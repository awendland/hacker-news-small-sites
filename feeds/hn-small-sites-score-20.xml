<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 20]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 20. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Thu, 18 Feb 2021 01:06:29 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-20.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Thu, 18 Feb 2021 01:06:29 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[All about thread-local storage]]>
            </title>
            <description>
<![CDATA[
Score 27 | Comments 2 (<a href="https://news.ycombinator.com/item?id=26150512">thread link</a>) | @MaskRay
<br/>
February 15, 2021 | https://maskray.me/blog/2021-02-14-all-about-thread-local-storage | <a href="https://web.archive.org/web/*/https://maskray.me/blog/2021-02-14-all-about-thread-local-storage">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
      
        <p>Thread-local storage (TLS) provides a mechanism allocating distinct objects for different threads. It is the usual implementation for GCC extension <code>__thread</code>, C11 <code>_Thread_local</code>, and C++11 <code>thread_local</code>, which allow the use of the declared name to refer to the entity associated with the current thread. This article will describe thread-local storage on ELF platforms in detail, and touch on other related topics, such as: thread-specific data keys and Windows/macOS TLS.</p>
<p>An example usage of thread-local storage is POSIX <code>errno</code>:</p>
<blockquote>
<p>Each thread has its own thread ID, scheduling priority and policy, errno value, floating point environment, thread-specific key/value bindings, and the required system resources to support a flow of control.</p>
</blockquote>
<p>Different threads have different <code>errno</code> copies. <code>errno</code> is typically defined as a function which returns a thread-local variable.</p>
<p>For each architecture, the authoritative ELF ABI document is the processor supplement (psABI) to the System V ABI (generic ABI). These documents usually reference <em>The ELF Handling for Thread-Local Storage</em> by Ulrich Drepper. The document, however, mixes general specifications and glibc internals.</p>
<h2 id="representation">Representation</h2>
<h3 id="assembler-behavior">Assembler behavior</h3>
<p>The compiler usually defines thread-local variables in <code>.tdata</code> and <code>.tbss</code> sections (which have the section flag <code>SHF_TLS</code>). The symbols representing thread-local variables have type <code>STT_TLS</code> (representing thread-local storage entities). In GNU as syntax, you can give <code>a</code> the type <code>STT_TLS</code> with <code>.type a, @tls_object</code>. The <code>st_value</code> value of a TLS symbols is the offset relative to the defining section.</p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></pre></td><td><pre><span>.section .tbss,"awT",@nobits</span><br><span>.globl a, b</span><br><span>.type a, @tls_object</span><br><span>.type b, @tls_object</span><br><span>a:</span><br><span>  .zero 4</span><br><span>  .size a, .-a</span><br><span>b:</span><br><span>  .zero 4</span><br><span>  .size b, .-b</span><br></pre></td></tr></tbody></table></figure>
<p>In this example, <code>st_value(a)=0</code> while <code>st_value(b)=4</code>.</p>
<p>In Clang and GCC produced assembly, thread-local variables are annotated as <code>.type a, @object</code> (<code>STT_OBJECT</code>). When the assembler sees that such symbols are defined in <code>SHF_TLS</code> sections or referenced by TLS relocations, <code>STT_NOTYPE</code>/<code>STT_OBJECT</code> will be upgraded to <code>STT_TLS</code>.</p>
<p>GNU as supports an directive <code>.tls_common</code> which defines <code>STT_TLS SHN_COMMON</code> symbols. This is an obsecure feature. It is not clear whether GCC still has a code path which emits <code>.tls_common</code> directives. LLVM integrated assembler does not support <code>.tls_common</code>.</p>
<h3 id="linker-behavior">Linker behavior</h3>
<p>The linker combines <code>.tdata</code> input sections into a <code>.tdata</code> output section. <code>.tbss</code> input sections are combined into a <code>.tbss</code> output section. The two <code>SHF_TLS</code> output sections are placed into a <code>PT_TLS</code> program header.</p>
<ul>
<li><code>p_offset</code>: the file offset of the TLS initialization image</li>
<li><code>p_vaddr</code>: the virtual address of the TLS initialization image</li>
<li><code>p_filesz</code>: the size of the TLS initialization image</li>
<li><code>p_memsz</code>: the total size of the thread-local storage. The last <code>p_memsz-p_filesz</code> bytes will be zeroed by the dynamic loader.</li>
<li><code>p_align</code>: alignment</li>
</ul>
<p>The <code>PT_TLS</code> program header is contained in a <code>PT_LOAD</code> program header. Conceptually <code>PT_TLS</code> and <code>STT_TLS</code> symbols are like in a separate address space. The dynamic loader should copy the <code>[p_vaddr,p_vaddr+p_filesz)</code> of the TLS initialization image to the corresponding static TLS block.</p>
<p>In executable and shared object files, <code>st_value</code> normally holds a virtual address. For a <code>STT_TLS</code> symbol, <code>st_value</code> holds an offset relative to the virtual address of the <code>PT_TLS</code> program header. The first byte of <code>PT_TLS</code> is referenced by the TLS symbol with <code>st_value==0</code>.</p>
<p>GNU ld treats <code>STT_TLS SHN_COMMON</code> symbols as defined in <code>.tcommon</code> sections. Its internal linker script places such sections into the output section <code>.tdata</code>. LLD does not support <code>STT_TLS SHN_COMMON</code> symbols.</p>
<h3 id="dynamic-loader-behavior">Dynamic loader behavior</h3>
<p>The dynamic loader collects <code>PT_TLS</code> program headers from the main executable and immediately loaded shared objects (via transitive <code>DT_NEEDED</code>), and allocates static TLS blocks, one block for each <code>PT_TLS</code>. For each <code>PT_TLS</code>, the dynamic loader copies <code>p_filesz</code> bytes from the TLS initialization image to the TLS block and sets the trailing <code>p_memsz-p_filesz</code> bytes to zeroes.</p>
<p>For the static TLS block of the main executable, the module ID is one and the TP offset of a TLS symbol is a link-time constant. The linker and the dynamic loader share the same formula.</p>
<p>For a shared object loaded at program start, the offset from the thread pointer to its static TLS block is a fixed value at program start, albeit not a link-time constant. The offset can be referenced by a GOT dynamic relocation used by the initial-exec TLS model.</p>
<p><em>The ELF Handling for Thread-Local Storage</em> describes two TLS variants and specifies their data structures. However, only the TP offset of the static TLS block of the main executable is a hard requirement. Nevertheless, libc implementations usually place static TLS blocks together, and allocate a space for both the thread control block and the static TLS blocks.</p>
<p>For a new thread created by <code>pthread_create</code>, the static TLS blocks are usually allocated as part of the thread stack. Without a guard page between the largest address of the stack and the thread control block, this could be considered as vulnerable as stack overflow can overwrite the thread control block.</p>
<h2 id="models">Models</h2>
<h3 id="local-exec-tls-model-executable-non-preemptible">Local exec TLS model (executable &amp; non-preemptible)</h3>
<p>This is the most efficient TLS model. It applies when the TLS symbol is defined in the executable.</p>
<p>The compiler picks this model in <code>-fno-pic/-fpie</code> modes if the variable is</p>
<ul>
<li>a definition</li>
<li>or a declaration with a non-default visibility.</li>
</ul>
<p>The first condition is obvious. The second condition is becuase a non-default visibility means the variable must be defined by another translation unit in the executable.</p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br></pre></td><td><pre><span>_Thread_local <span>int</span> def;</span><br><span>__attribute__((visibility(<span>"hidden"</span>))) <span>extern</span> <span>thread_local</span> <span>int</span> ref;</span><br><span><span><span>int</span> <span>foo</span><span>()</span> </span>{ <span>return</span> def + ref; }</span><br></pre></td></tr></tbody></table></figure>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br></pre></td><td><pre><span># x86-64</span><br><span>movl %fs:def@TPOFF, %eax</span><br></pre></td></tr></tbody></table></figure>
<p>For the static TLS block of the main executable, the TP offset of a TLS symbol is a link-time constant. Here is a list of common relocation types:</p>
<ul>
<li>arm: <code>R_ARM_TLS_LE32</code></li>
<li>aarch64:
<ul>
<li>-mtls-size=12: <code>R_AARCH64_TLSLE_ADD_TPREL_LO12</code></li>
<li>-mtls-size=24 (default): <code>R_AARCH64_TLSLE_ADD_TPREL_HI12</code>, <code>R_AARCH64_TLSLE_ADD_TPREL_LO12_NC</code></li>
<li>-mtls-size=32: <code>R_AARCH64_TLSLE_MOVW_TPREL_G1</code>, <code>R_AARCH64_TLSLE_MOVW_TPREL_G0_NC</code></li>
<li>-mtls-size=48: <code>R_AARCH64_TLSLE_MOVW_TPREL_G2</code>, <code>R_AARCH64_TLSLE_MOVW_TPREL_G1_NC</code>, <code>R_AARCH64_TLSLE_MOVW_TPREL_G0_NC</code></li>
</ul></li>
<li>i386: <code>R_386_TLS_LE</code></li>
<li>x86-64: <code>R_X86_64_TPOFF32</code></li>
<li>mips: <code>R_MIPS_TPREL_HI16</code>, <code>R_MIPS_TPREL_LO16</code></li>
<li>ppc32: <code>R_PPC_TPREL_HA</code>, <code>R_PPC_TPREL_LO</code></li>
<li>ppc64: <code>R_PPC64_TPREL_HA</code>, <code>R_PPC64_TPREL_LO</code></li>
<li>riscv: <code>R_RISCV_TPREL_HI20</code>, <code>R_RISCV_TPREL_LO12_I</code>, <code>R_RISCV_TPREL_LO12_S</code></li>
</ul>
<p>For RISC architectures, because an instruction typically has 4 bytes and cannot encode a 32-bit offset, it usually takes two instructions to materialize a TP offset.</p>
<p>In <a target="_blank" rel="noopener" href="https://reviews.llvm.org/D93331">https://reviews.llvm.org/D93331</a>, I patched LLD to reject local-exec TLS relocations in <code>-shared</code> mode. In GNU ld, at least arm, riscv and x86's ports have the similar diagnostics, but aarch64 and ppc64 do not error.</p>
<h3 id="initial-exec-tls-model-executable-preemptible">Initial exec TLS model (executable &amp; preemptible)</h3>
<p>This model is less efficient than local exec. It applies when the TLS symbol is defined in the executable or a shared object available at program start. The shared object can be due to <code>DT_NEEDED</code> or <code>LD_PRELOAD</code>.</p>
<p>The compiler picks this model in <code>-fno-pic/-fpie</code> modes if the variable is a declaration with default visibility. The idea is that a symbol referenced by the executable must be defined by an immediately loaded shared object, instead of a dlopen loaded shared object. The linker enforces this as well by defaulting to <code>-z defs</code> for a <code>-no-pie/-pie</code> link.</p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br></pre></td><td><pre><span><span>extern</span> <span>thread_local</span> <span>int</span> ref;</span><br><span><span><span>int</span> <span>foo</span><span>()</span> </span>{ <span>return</span> ref; }</span><br></pre></td></tr></tbody></table></figure>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br></pre></td><td><pre><span># x86-64</span><br><span>movq ref@GOTTPOFF(%rip), %rax</span><br><span>movl %fs:(%rax), %eax</span><br></pre></td></tr></tbody></table></figure>
<p>Because the offset from the thread pointer to the start of a static block is fixed at program start, such an offset can be encoded by a GOT relocation. Such relocation types typically have <code>GOT</code> and <code>TPREL/TPOFF</code> in their names. Here is a list of common relocation types:</p>
<ul>
<li>arm: <code>R_ARM_TLS_IE32</code></li>
<li>aarch64: <code>R_AARCH64_TLSIE_ADR_GOTTPREL_PAGE21</code>, <code>R_AARCH64_TLSIE_LD64_GOTTPREL_LO12_NC</code></li>
<li>i386: <code>R_386_TLS_IE</code></li>
<li>x86-64: <code>R_X86_64_GOTTPOFF</code></li>
<li>ppc32: <code>R_PPC_GOT_TPREL16</code></li>
<li>ppc64: <code>R_PPC64_GOT_TPREL16_HA</code>, <code>R_PPC64_GOT_TPREL16_LO_DS</code></li>
<li>riscv: <code>R_RISCV_TLS_GOT_HI20</code>, <code>R_RISCV_PCREL_LO12_I</code></li>
</ul>
<p>If the TLS symbol does not satisfy initial-exec to local-exec relaxation requirements, the linker will allocate a GOT entry and emit a dynamic relocation. Here is a list of dynamic relocation types:</p>
<ul>
<li>arm: <code>R_ARM_TLS_TPOFF32</code></li>
<li>aarch64: <code>R_AARCH64_TLS_TPREL64</code></li>
<li>mips32: <code>R_MIPS_TLS_TPREL32</code></li>
<li>mips64: <code>R_MIPS_TLS_TPREL64</code></li>
<li>i386: <code>R_386_TPOFF</code></li>
<li>x86-64: <code>R_X86_64_TPOFF64</code></li>
<li>ppc32: <code>R_PPC_TPREL32</code></li>
<li>ppc64: <code>R_PPC64_TPREL64</code></li>
<li>riscv: <code>R_RISCV_TLS_TPREL64</code></li>
</ul>
<p>While they have <code>TPREL</code> or <code>TPOFF</code> in their names, these dynamic relocations have the same bitwidth as the word size. This is a good way to distinguish them from the local-exec relocation types used in object files.</p>
<p>If you add the <code>__attribute((tls_model("initial-exec")))</code> attribute, a thread-local variable can use this model in <code>-fpic</code> mode. If the object file is linked into an executable, everything is fine. If the object file is linked into a shared object, the shared object generally needs to be an immediately loaded shared object. The linker sets the <code>DF_STATIC_TLS</code> flag to annotate a shared object with initial-exec TLS relocations.</p>
<p>glibc ld.so reserves some space in static TLS blocks and allows dlopen on such a shared object if its TLS size is small. There could be an obscure reason for using such an attribute: general dynamic and local dynamic TLS models are not async-signal-safe in glibc. However, other libc implementations may not reserve additional TLS space for dlopen'ed initial-exec shared objects, e.g. musl will error.</p>
<h3 id="general-dynamic-and-local-dynamic-tls-models-dso">General dynamic and local dynamic TLS models (DSO)</h3>
<p>The two modes are used when the TLS symbol may be defined by a shared object. They do not assume the TLS symbol is backed by a static TLS block. Instead, they assume that the thread-local storage of the module may be dynamically allocated, making the models suitable for dlopen usage. The dynamically allocated TLS storage is usually referred to as dynamic TLS.</p>
<p>Each TLS symbol is ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://maskray.me/blog/2021-02-14-all-about-thread-local-storage">https://maskray.me/blog/2021-02-14-all-about-thread-local-storage</a></em></p>]]>
            </description>
            <link>https://maskray.me/blog/2021-02-14-all-about-thread-local-storage</link>
            <guid isPermaLink="false">hacker-news-small-sites-26150512</guid>
            <pubDate>Tue, 16 Feb 2021 03:14:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[US Presidential Election $25k Database Bounty Review]]>
            </title>
            <description>
<![CDATA[
Score 139 | Comments 31 (<a href="https://news.ycombinator.com/item?id=26149511">thread link</a>) | @mjangle1985
<br/>
February 15, 2021 | https://www.dolthub.com/blog/2021-02-15-election-bounty-review/ | <a href="https://web.archive.org/web/*/https://www.dolthub.com/blog/2021-02-15-election-bounty-review/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://www.dolthub.com/blog/2021-02-15-election-bounty-review/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26149511</guid>
            <pubDate>Tue, 16 Feb 2021 00:20:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Building Rich Terminal Dashboards]]>
            </title>
            <description>
<![CDATA[
Score 332 | Comments 71 (<a href="https://news.ycombinator.com/item?id=26149488">thread link</a>) | @lumpa
<br/>
February 15, 2021 | https://www.willmcgugan.com/blog/tech/post/building-rich-terminal-dashboards/ | <a href="https://web.archive.org/web/*/https://www.willmcgugan.com/blog/tech/post/building-rich-terminal-dashboards/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
    

    
<p><a href="https://github.com/willmcgugan/rich">Rich</a> has become a popular (20K stars on GH) way of beautifying CLIs, and I'm pleased to see a number of projects using it.</p>
<p>Since Rich is mature and battle-tested now, I had considered winding-down development. Until, I saw this tweet:</p>
<h2>The Tweet</h2>
<blockquote><div lang="en" dir="ltr"><p>Do you want to see something really cool you can do with <a href="https://twitter.com/willmcgugan?ref_src=twsrc%5Etfw">@willmcgugan</a> 's rich library? </p><p>Checkout ghtop <a href="https://t.co/mn7oLbpw8e">https://t.co/mn7oLbpw8e</a>. It's a really fun CLI tool that demonstrates the power of rich (and other things).</p><p>Examples below üßµüëá (1/8)</p></div>‚Äî Hamel Husain (@HamelHusain) <a href="https://twitter.com/HamelHusain/status/1357771218095546368?ref_src=twsrc%5Etfw">February 5, 2021</a></blockquote> 
<p><a href="https://twitter.com/HamelHusain">@HamelHusain</a> and <a href="https://twitter.com/jeremyphoward">@jeremyphoward</a> used Rich to enhance <a href="https://github.com/nat/ghtop">ghtop</a> (a repo owned by the CEO of Github, no less). Ghtop shows a realtime a stream of events from the Github platform. And it looks good! So good that I realised how much potential Rich has for these type of htop-like applications.</p>
<p>Hamel and Jeremy had to overcome a few technical hurdles to make that work. Fortunately this will no longer be required as the latest version of Rich has first-class support for full-screen interfaces via a new Layout system.</p>
<h2>Full-screen terminal interface</h2>
<p>Here's a video demonstration of a terminal interface built with Layout:</p>
<p>
<iframe width="auto" src="https://www.youtube.com/embed/slrdSojCvlk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</p>
<h2>Layout API</h2>
<p>The API to create a flexible layout is surprisingly simple. You construct a <code>Layout()</code> object, then call <code>split()</code> to create sub-layouts. These sub-layouts may then be further divided. Layouts have a small number of settings which define their size relative to the terminal window. It's a simple system that can create terminal interfaces that almost resemble modern web apps.</p>
<div><figure> <img width="1140" height="724" title="layout_vscode.png" name="layout_vscode" data-md="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.md.3.jpeg" data-square="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.square.7.jpeg" data-xlg2x="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.xlg2x.2.jpeg" data-lg="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.lg.3.jpeg" data-xlg="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.xlg.8.jpeg" data-author="¬© 2021 Will McGugan<br>all rights reserved" data-og_preview="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.og.preview.2.jpeg" data-height="2100" data-width="3308" data-toggle="tooltip" data-details=" " data-sm="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.sm.3.jpeg" data-blur="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.blur.6.jpeg" data-slug="layout_vscode" sizes="(min-width: 1200px) 1170px, (min-width: 992px) 970px, (min-width: 768px) 750px" srcset="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.lg.3.jpeg 1170w, https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.md.3.jpeg 970w, https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.sm.3.jpeg 750w" src="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.lg.3.jpeg"> 
<figcaption>
<p>¬© 2021 Will McGugan</p>


<p>A Rich layout in VSCode</p>


</figcaption>

</figure>
</div>
<h2>Finally, some code</h2>
<p>Here's how you would create a basic layout with a header, a footer, and two side-panels.</p>
<pre><code>from rich.console import Console
from rich.layout import Layout

console = Console()
layout = Layout()

# Divide the "screen" in to three parts
layout.split(
    Layout(name="header", size=3),
    Layout(ratio=1, name="main"),
    Layout(size=10, name="footer"),
)
# Divide the "main" layout in to "side" and "body"
layout["main"].split(
    Layout(name="side"),
    Layout(name="body", ratio=2),
    direction="horizontal"
)
# Divide the "side" layout in to two
layout["side"].split(Layout(), Layout())

console.print(layout)
</code></pre>
<p>Running the code above produces the following output:</p>
<div><figure> <img width="1140" height="739" title="layout.png" name="layout" data-md="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.md.3.jpeg" data-square="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.square.7.jpeg" data-xlg2x="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.xlg2x.2.jpeg" data-lg="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.lg.3.jpeg" data-xlg="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.xlg.8.jpeg" data-author="¬© 2021 Will McGugan<br>all rights reserved" data-og_preview="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.og.preview.2.jpeg" data-height="1464" data-width="2258" data-toggle="tooltip" data-details=" " data-sm="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.sm.3.jpeg" data-blur="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.blur.6.jpeg" data-slug="layout" sizes="(min-width: 1200px) 1170px, (min-width: 992px) 970px, (min-width: 768px) 750px" srcset="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.lg.3.jpeg 1170w, https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.md.3.jpeg 970w, https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.sm.3.jpeg 750w" src="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.lg.3.jpeg"> 
<figcaption>
<p>¬© 2021 Will McGugan</p>


<p>Terminal split in to 5 sub-layouts. The boxes are placeholders, you can insert any content in their place.</p>


</figcaption>

</figure>
</div>
<p>Any renderable (text, table, progress bars etc) may be placed inside those sub-layouts.</p>
<p>We can now use the <a href="https://rich.readthedocs.io/en/latest/live.html">Live</a> class to create an application that adapts itself to the terminal window:</p>
<pre><code>from rich.live import Live
from time import sleep

with Live(layout, screen=True):
    while True:
        sleep(1)
</code></pre>
<p>In a real app, that do-nothing loop will be doing something useful like pulling data from the network to update contents.</p>
<p>See the <a href="https://rich.readthedocs.io/en/latest/layout.html">layout docs</a> for an in-depth tutorial.</p>
<h2>What's next?</h2>
<p>I think it's clear that Rich is acquiring more TUI (text user interface) features, and I've decided not to fight it. Rich's core purpose is still to beautify CLI output, but I think there is an opportunity here for a new way to create terminal apps. Ultimately it will be less like curses and more like HTML in a browser.</p>
<p>There are a number of things to do before Rich could replace a full TUI library (keyboard and mouse input for one) but the potential is there. Stay tuned for progress.</p>
<p>Follow <a href="https://twitter.com/willmcgugan">@willmcgugan</a> for more Rich related news.</p>



</article></div>]]>
            </description>
            <link>https://www.willmcgugan.com/blog/tech/post/building-rich-terminal-dashboards/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26149488</guid>
            <pubDate>Tue, 16 Feb 2021 00:16:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Performance Optimization Contest]]>
            </title>
            <description>
<![CDATA[
Score 26 | Comments 2 (<a href="https://news.ycombinator.com/item?id=26149436">thread link</a>) | @robfig
<br/>
February 15, 2021 | https://easyperf.net/blog/2019/02/02/Performance-optimization-contest | <a href="https://web.archive.org/web/*/https://easyperf.net/blog/2019/02/02/Performance-optimization-contest">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
				<p><strong>Contents:</strong></p>
<ul id="markdown-toc">
  <li><a href="#about-this-contest" id="markdown-toc-about-this-contest">About this contest</a></li>
  <li><a href="#qa" id="markdown-toc-qa">Q&amp;A</a>    <ul>
      <li><a href="#q0-why-the-hell-on-earth-i-should-participate-in-this-contest" id="markdown-toc-q0-why-the-hell-on-earth-i-should-participate-in-this-contest">Q0: <em>Why <del>the hell</del> on earth I should participate in this contest?</em></a></li>
      <li><a href="#q1-what-benchmarks-are-taken-into-the-contest" id="markdown-toc-q1-what-benchmarks-are-taken-into-the-contest">Q1: <em>What benchmarks are taken into the contest?</em></a></li>
      <li><a href="#q2-what-is-the-machineenvironment-we-will-be-optimizing-for" id="markdown-toc-q2-what-is-the-machineenvironment-we-will-be-optimizing-for">Q2: <em>What is the machine/environment we will be optimizing for?</em></a></li>
      <li><a href="#q3-what-if-i-dont-have-the-environment-you-are-using" id="markdown-toc-q3-what-if-i-dont-have-the-environment-you-are-using">Q3: <em>What if I don‚Äôt have the environment you are using?</em></a></li>
      <li><a href="#q4-how-i-should-find-performance-headrooms" id="markdown-toc-q4-how-i-should-find-performance-headrooms">Q4: <em>How I should find performance headrooms?</em></a></li>
      <li><a href="#q5-what-optimizations-are-allowed" id="markdown-toc-q5-what-optimizations-are-allowed">Q5: <em>What optimizations are allowed?</em></a></li>
      <li><a href="#q6-whats-not-allowed" id="markdown-toc-q6-whats-not-allowed">Q6: <em>What‚Äôs NOT allowed</em></a></li>
      <li><a href="#q7-how-should-the-submission-look-like" id="markdown-toc-q7-how-should-the-submission-look-like">Q7: <em>How should the submission look like?</em></a></li>
      <li><a href="#q8-how-i-will-test-your-solutions" id="markdown-toc-q8-how-i-will-test-your-solutions">Q8: <em>How I will test your solutions?</em></a></li>
      <li><a href="#q9-how-i-will-select-the-winner" id="markdown-toc-q9-how-i-will-select-the-winner">Q9: <em>How I will select the winner?</em></a></li>
    </ul>
  </li>
  <li><a href="#how-to-get-started" id="markdown-toc-how-to-get-started">How to get started?</a></li>
  <li><a href="#hints" id="markdown-toc-hints">Hints</a></li>
  <li><a href="#list-of-contest-editions" id="markdown-toc-list-of-contest-editions">List of contest editions</a></li>
</ul>

<hr>
<p><strong>Subscribe to my <a href="https://mailchi.mp/4eb73720aafe/easyperf">mailing list</a>, support me on <a href="https://www.patreon.com/dendibakh">Patreon</a> or by PayPal <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&amp;business=TBM3NW8TKTT34&amp;currency_code=USD&amp;source=url">donation</a>.</strong></p>

<hr>

<h3 id="about-this-contest">About this contest</h3>

<p>Hello everybody!</p>

<p>I decided to try new thing at the beginning of 2019. You probably heard about competitive programming and about popular web-sites like <a href="https://www.topcoder.com/">Topcoder</a>, <a href="https://www.codility.com/">Codility</a> and others. The idea is that you can try yourself in solving programming puzzles. Usually it‚Äôs not enough to just solve the puzzle, your solution must qualify for certain criterias such as algorithmic complexity and memory usage. Also on a real challenges it is improtant how fast you solved the problem.</p>

<p>Those sort of challenges usually test your problem solving skills as well as your knowledge of algorithms and data structures. It is a kind of tasks we usually see on programming job interviews. You need to write the code from scratch to a complete solution.</p>

<p>What I am starting is also a form of contest but aims at developing different set of skills. <strong>We will train to optimize already optimized code</strong>. We will learn hardware optimizations. This is briefly how it will look like: I will pick one existing benchmark of my choice and will send it to all my subscribers. You will have the time to play with the benchmark and find all performance headrooms you can find. You then send all your findings to me (modified sources/assemblies/compiler patches?/whatever speeds up the benchmark) and I check it and run on my hardware. At the end I will anounce the winners.</p>

<p>Before I explain it in more details I feel a need of writing disclaimer:</p>

<blockquote>
  <p><strong>Disclaimer</strong>: This is absolutely non-profit effort. I‚Äôm not looking for make any money from it or using someone‚Äôs knowledge in my own purposes. I will not use submissions to extract any intellectual property they might have. Also this is not aiming to advertise any particular software product including benchmarks/compilers. That‚Äôs why all the benchmarks and compilers I will use require to be open sourced. Neither it aims to advertise any particular HW.</p>
</blockquote>

<p>In this contest I try to emulate the situation in performance critical projects on the final stages. When all the functionality is delivered and tested. But before shipping the binary to the customers you were asked to tune the app to it‚Äôs peak performance. You know the hardware it will be deployed to. You have the sources in your hands and freedom to modify it (without introducing any bugs :) ). You are the build master, so you can add any compiler flags you want.</p>

<p>For the challenges that I will send I‚Äôm not looking for optimizations that fall into the category: ‚ÄúOh, I just used quicksort instead of bubblesort‚Äù. Expect the benchmark to be already optimized to some degree. Your task is to tune it for particular hardware to the peak performance.</p>

<h3 id="qa">Q&amp;A</h3>

<h4 id="q0-why-the-hell-on-earth-i-should-participate-in-this-contest">Q0: <em>Why <del>the hell</del> on earth I should participate in this contest?</em></h4>

<p><strong>A0</strong>: You will learn/practice how to do optimizations for HW. This might include eliminating cache misses by inserting prefetch instructions, getting rid of <a href="https://easyperf.net/blog/2018/01/18/Code_alignment_issues">Code alignment issues</a>, improving performance by helping compiler to vectorize/unroll the loop better. You will learn different techniques as you go.</p>

<hr>
<h4 id="q1-what-benchmarks-are-taken-into-the-contest">Q1: <em>What benchmarks are taken into the contest?</em></h4>

<p><strong>A1</strong>: It will be open sourced benchmark written in C/C++. Usually several source files. It should be easy to build, require minimal dependencies. Preferably it should have some form of validation.</p>

<hr>
<h4 id="q2-what-is-the-machineenvironment-we-will-be-optimizing-for">Q2: <em>What is the machine/environment we will be optimizing for?</em></h4>

<p><strong>A2</strong>: Most likely it will be 64 bit Linux with Intel x86 CPU (probably Haswell architecture). For a start I will not bother with disabling CPU <a href="https://en.wikipedia.org/wiki/Dynamic_frequency_scaling">dynamic frequency scaling</a> features or setting <a href="https://en.wikipedia.org/wiki/Processor_affinity">thread affinity</a>. I might do this in future.</p>

<hr>
<h4 id="q3-what-if-i-dont-have-the-environment-you-are-using">Q3: <em>What if I don‚Äôt have the environment you are using?</em></h4>

<p><strong>A3</strong>: It doesn‚Äôt matter much. If you don‚Äôt have Intel CPU or you are on Windows/Mac, just optimize for whatever you have. I would be happy to know about optimizations that help other CPUs, operating systems, etc.
<strong>I don‚Äôt have real prizes to give, so it‚Äôs mostly practicing and learning</strong>.</p>

<hr>
<h4 id="q4-how-i-should-find-performance-headrooms">Q4: <em>How I should find performance headrooms?</em></h4>

<p><strong>A4</strong>: Use all of your knowledge. Start with profiling the benchmark. You can browse through posts on this blog. Additionally I will write a separate post that might help begginers.</p>

<hr>
<h4 id="q5-what-optimizations-are-allowed">Q5: <em>What optimizations are allowed?</em></h4>

<p><strong>A5</strong>: Good news! <strong>All the dirty tricks allowed</strong>! The goal of this contest is to learn how to squeeze as much performance as possible from the hardware using any means available. You can modify sources and insert any compiler hints like pragmas, builtins, function attributes, etc. Also you can generate assembly listing (<code>-S</code> compiler option) and modify it. Finally, you can add some compiler option that might speed up the benchmark.</p>

<hr>
<h4 id="q6-whats-not-allowed">Q6: <em>What‚Äôs NOT allowed</em></h4>

<p><strong>A6</strong>: 1) Do not rewrite the benchmark completely or introduce major changes in algorithms. The good judging rule is ‚Äúeverything interesting should be calculated in runtime‚Äù.</p>

<p>2) Do not manually parallelize the benchmark, e.g converting it from single- to multi-threaded or offload computations to the GPU. I mean, I‚Äôm glad that you can do it and I will be happy to take a look what you did, but it‚Äôs not the intent of the contest.</p>

<p>3) Using <a href="https://en.wikipedia.org/wiki/Profile-guided_optimization">PGO</a> is allowed, however you can use it only for driving you optimizations, not for the submission. So, you can check how the benchmark gets better with PGO and understand why. And then make this optimization manually. Again, the purposes is practicing and learning.</p>

<hr>
<h4 id="q7-how-should-the-submission-look-like">Q7: <em>How should the submission look like?</em></h4>

<p><strong>A7</strong>: 1) I will not accept binaries for security reasons.</p>

<p>2) You can send patch files that I can apply to the sources of the benchmark or just assembly listing. If you did multiple optimizations please split them in separate patches. <code>git format-patch</code> is the right tool for that. This will save me a lot of time.</p>

<p>3) If you send assembly listing files please do also include diff file from the baseline (what you changed in the assembly). If you provide modified assembly listings it should be genearted only with open-sourced C/C++ compilers like gcc and clang. You can of course cheat and generate assembly with some other compiler that is better for the benchmark, but I will probably easily detect that. And it‚Äôs not about tricking, it‚Äôs about learning.</p>

<p>4) Make sure you specify clearly the compiler options if they are different from the baseline.</p>

<p>5) If you are capable of hacking compiler that‚Äôs also acceptable. You can send me patches for gcc/llvm compilers which I can apply and use for building the benchmark. Please use the top of tree revisions because it will be easier for me to apply them. We can then use it for improving our open source compilers. Also it would be very nice if you can send me textual description of all the optimizations you made.</p>

<hr>
<h4 id="q8-how-i-will-test-your-solutions">Q8: <em>How I will test your solutions?</em></h4>

<p><strong>A8</strong>: I will take your sources, build them on my machine and run the benchmark. I will run your binary multiple times (depends on the running time) and <a href="http://blog.kevmod.com/2016/06/benchmarking-minimum-vs-average/">take the minimum</a>. I‚Äôm thinking about testing all the solutions on some cloud machine, but that‚Äôs not settled yet.</p>

<hr>
<h4 id="q9-how-i-will-select-the-winner">Q9: <em>How I will select the winner?</em></h4>

<p><strong>A9</strong>: I will calculate your score as a ratio between execution time of the binary with your optimizations and the baseline.</p>

<hr>
<p>I know there is a lot more concerns you might have. This is just a first attempt with focus on learning how to do HW optimizations. In the end I don‚Äôt have real prizes to give out. :) After each contest I will share all the findings people did, so there is a big opportunity to learn from others! I know that a number of really experienced guys read this blog, so I encourage everyone to participate. Everyone is welcome!</p>

<p>All communication (including sending benchmarks and score submissions) will happen through emails, so <strong>make sure to subscribe</strong> using the form at the bottom of the page! I am planning to start first contest in the end of February 2019.</p>

<p>Let me know what you think about it or if you have any ideas or comments. You can also vote if you like it using the buttons below.</p>

<h3 id="how-to-get-started">How to get started?</h3>

<ol>
  <li>Collect the baseline (use <code>time</code> or analogs).</li>
  <li>Find the hotspot (use <code>perf record</code>).</li>
  <li>Find performance headroom
    <ul>
      <li>Take a look at the assembly and try to guess how you can do better.</li>
      <li>Run through <a href="https://easyperf.net/blog/2019/02/09/Top-Down-performance-analysis-methodology">TMAM</a> process.</li>
    </ul>
  </li>
  <li>Build the benchmark, run it and compare against baseline.</li>
</ol>

<h3 id="hints">Hints</h3>

<ul>
  <li>Do not try to understand the whole benchmark. For some people (including me) it‚Äôs crucial to understand how every peace of code works. For the purposes of optimizing it will be wasted effort. There are CPU benchmarks with thousands LOC (like <a href="http://spec.org/cpu2017/">SPEC2017</a>) it‚Äôs absoultely impossible to understand them in a reasonable time. What you need to familiarize yourself with are hotspots. That‚Äôs it. You most likely need to understand one function/loop which is not more than 100 LOC.</li>
  <li>You have specific workload for which you optimize the benchmark. You don‚Äôt need to optimize it for any other input/workload. The main principle behind <a href="https://en.wikipedia.org/wiki/Data-oriented_design">Data-oriented design</a> is that you know the data of your application.</li>
</ul>

<p>Information presented in llvm documentation: <a href="https://llvm.org/docs/Benchmarking.html">Benchmarking tips</a> migth also be helpful.</p>

<h3 id="list-of-contest-editions">List of contest editions</h3>

<ul>
  <li><a href="https://easyperf.net/blog/2019/02/16/Performance-optimization-contest-1">Contest #1</a> - 16 Feb 2019.</li>
  <li><a href="https://easyperf.net/blog/2019/04/10/Performance-analysis-and-tuning-contest-2">Contest #2</a> - 10 Apr 2019.</li>
  <li><a href="https://easyperf.net/blog/2019/05/28/Performance-analysis-and-tuning-contest-3">Contest #3</a> - 28 May 2019.</li>
  <li><a href="https://easyperf.net/blog/2021/02/05/Performance-analysis-and-tuning-contest-4">Contest #4</a> - 05 Feb 2021.</li>
</ul>

			</div></div>]]>
            </description>
            <link>https://easyperf.net/blog/2019/02/02/Performance-optimization-contest</link>
            <guid isPermaLink="false">hacker-news-small-sites-26149436</guid>
            <pubDate>Tue, 16 Feb 2021 00:09:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Ark 1]]>
            </title>
            <description>
<![CDATA[
Score 48 | Comments 36 (<a href="https://news.ycombinator.com/item?id=26148865">thread link</a>) | @simonpure
<br/>
February 15, 2021 | https://www.lot2046.com/ark-1 | <a href="https://web.archive.org/web/*/https://www.lot2046.com/ark-1">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div id="content_360_38"><div id="ark-1_hero_back"><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_back.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_back@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_back@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_back.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_back@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_back.jpg"></picture><p>Cabin porn.</p></div><div id="ark-1_hero_left"><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_left.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_left@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_left@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_left.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_left@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_left.jpg"></picture><p>LOT 0983 ‚Äî ARK 1; 6.4m x 3m x 2.6m; 13m¬≤ internally; 17m¬≤ externally; <br>4.5m x 1.6m window; rechargeable battery bank; electric powertrain.</p></div><div id="ark-1_hero_top"><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_top.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_top@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_top@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_top.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_top@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_top.jpg"></picture><p>A rechargeable solid state Lithium Ion battery for an EPA estimated range of 500+ miles, <br>600W solar panel roof with 5G and Starlink‚Ñ¢ antennas.</p></div><div id="ark-1_hero_boulder-1"><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_boulder-1.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_boulder-1@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_boulder-1@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_boulder-1.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_boulder-1@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_boulder-1.jpg"></picture><p>Off-road, self-driving, autonomous, off-grid mobile home.</p></div><div id="ark-1_hero_boulder-2"><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_boulder-2.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_boulder-2@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_boulder-2@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_boulder-2.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_boulder-2@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_boulder-2.jpg"></picture><p>Home on the range.</p></div><div id="ark-1_hero_right"><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_right.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_right@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hero_right@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_right.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_right@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hero_right.jpg"></picture><p>Breakfast of champions.</p></div><hr><p>Product range:</p><div id="ark-1_asset_tire-table-1"><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_asset_tire-table-1.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_asset_tire-table-1@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_asset_tire-table-1@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_asset_tire-table-1.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_asset_tire-table-1@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_asset_tire-table-1.jpg"></picture></div><hr><div id="ark-1_main-text"><div><p>Humans have never really lived on earth. 
</p><p>In fear of the cold, famines, and war, we chose to huddle in caves, camps, and cities in order to dwell near pooled resources, fearing unknown calamities.&nbsp;But the internet has changed all this. Accessibility no longer requires proximity. You no longer have to physically relocate in order to acquire the tools and resources you need to live a comfortable life. We are moving towards a reality where work and location no longer need to depend on the other. With the rapidly growing infrastructures of telecommunications, green energy, delivery services, and travel flexibility ‚Äì both in pace of advancement and market size ‚Äì a new way of working and living is emerging.
</p><p>One in which we no longer need to rely solely on outdated frameworks of metropolitan densities to support a given lifestyle.
</p><p>Flattening density is the way forward.
</p><p>Entire economies will need to re-evaluate what it means to give flexibility just as its users are realizing the boundaries of these new flexibilities. We‚Äôre already seeing an exodus of major metropolises. Lockdown hysteria has forced us to consider whether the paths we thought we prescribed ourselves is really ours. As this changes how many will choose to live, LOT is building a mission to earth.
</p><p>ARK 1 is an off-road, mobile dwelling. It features plug and play modular parts, a rechargeable battery pack, solar roof, 4 wheel steering, independent suspension, and can be equipped with full self-driving capabilities. 
</p><p>By treating the home as the ultimate appliance, we‚Äôre building a vehicle to nourish the self. If your home could take you anywhere, and there‚Äôs no more point A to point B, where would you go? </p></div></div><div><div id="ark-1_crawl-mode"><div><div><p>Crawl Mode</p><p><iframe src="https://www.youtube.com/embed/UFBsLeqcMR8?controls=0&amp;color=white" frameborder="0" allowfullscreen=""></iframe></p></div><div><div><p>ARK 1 utilizes all of its on-board self-driving cameras/sensors to enable it to drive autonomously on off-road, off-grid terrain.
</p><p>It is also equipped with a drone that acts as eyes by flying ahead to map trickier surfaces in order to provide the best possible route (fog map). This feature is not meant for navigating conventional roads, as there are no lanes to switch or traffic lights to watch for. Only surface and elevation changes to traverse, which it does slowly, so if you wanted to go to bed in the desert and wake up at the coastline, you can.</p></div></div></div></div></div><p>Eyes:</p><div id="ark-1_asset-drone-1"><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_asset_drone-1.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_asset_drone-1@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_asset_drone-1@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_asset_drone-1.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_asset_drone-1@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_asset_drone-1.jpg"></picture></div><div><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_asset_drone-2.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_asset_drone-2@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_asset_drone-2@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_asset_drone-2.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_asset_drone-2@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_asset_drone-2.jpg"></picture><p>LOT 0983-2</p></div><hr><div><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-13.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-13@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-13@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-13.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-13@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-13.jpg"></picture><p>20:39 ‚Äì Friday, April 10 at Great Salt Lake Desert, 40.6091, -113.4661</p></div><div><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-5.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-5@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-5@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-5.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-5@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-5.jpg"></picture><p>19:41 ‚Äì Saturday, April 11 at Joshua Tree, 33.977110, -116.020468</p></div><div><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-1.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-1@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-1@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-1.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-1@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-1.jpg"></picture><p>18:43 ‚Äì Friday, April 10 at Joshua Tree, 33.977110, -116.020468</p></div><div><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-12.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-12@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-12@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-12.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-12@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-12.jpg"></picture><p>03:01 ‚Äì Tuesday, May 19 at El Capitan, 34.465976, -120.024302</p></div><div><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-2.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-2@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_hdr-2@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-2.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-2@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_hdr-2.jpg"></picture><p>11:13 ‚Äì Tuesday, June 30 at Lake Chelan, 47.8623, -120.1884</p></div><hr><p>Details:</p><hr><div><a id="ark-1_ar-icon" rel="ar" href="https://lot2046-images.s3.amazonaws.com/ark/ark-1.usdz"><svg width="92" height="84" viewBox="0 0 92 84" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M56.7205 35.5L46.4 41.5" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M77.7205 23.5L67.4 29.5" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M25.7205 53.5L15.4 59.5" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M46.4 41.5V51.5" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M46.4 68.5V78.5" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M46.4 4.5V14.5" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M37.0441 36.1526L46.4 41.5" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15.0441 23.1526L24.4 28.5" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M69.0441 54.1526L78.4 59.5" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path><path opacity="0.5" d="M46.5 3.5V79.5" stroke="black" stroke-linecap="square"></path><path opacity="0.5" d="M13.3232 22.4402L79.6499 60.6511" stroke="black" stroke-linecap="square"></path><path opacity="0.5" d="M13.3191 60.6432L79.678 22.3797" stroke="black" stroke-linecap="square"></path><path opacity="0.5" fill-rule="evenodd" clip-rule="evenodd" d="M46.5 3L79.842 22.25V60.75L46.5 80L13.158 60.75V22.25L46.5 3Z" stroke="black"></path><mask id="mask0" mask-type="alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="92" height="84"><path fill-rule="evenodd" clip-rule="evenodd" d="M37.7968 0H55.7968V25.9515L82.2032 10.7058L91.2032 26.2942L64.866 41.5L91.2032 56.7058L82.2032 72.2942L55.7968 57.0485V84H37.7968V57.1284L9.79681 73.2942L0.796814 57.7058L28.866 41.5L0.796814 25.2942L9.79681 9.70577L37.7968 25.8716V0Z" fill="white"></path></mask><g mask="url(#mask0)"><path fill-rule="evenodd" clip-rule="evenodd" d="M46.5 3L79.842 22.25V60.75L46.5 80L13.158 60.75V22.25L46.5 3Z" stroke="black" stroke-width="3"></path></g></svg></a><p>Try your ARK 1 in the wild. Tap on the icon above 
<br>to experience it true to scale. Only available on iOS devices (for now) <a href="https://lot2046-images.s3.amazonaws.com/ark/ark-1.usdz" rel="ar">see ARK 1 in AR</a></p></div><hr><div><p id="ark-1_white-paper-title">White paper</p><div id="ark-1_white-paper-image"><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_white-paper.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_white-paper@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_white-paper@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_white-paper.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_white-paper@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_white-paper.jpg"></picture></div><p>Read our full proposal for ARK 1 on <a href="https://docs.google.com/document/d/1eedNlGgE11JfQgKiYzw33XpsmupT_pjrGBESwHnT8EE/edit" target="_blank">Google Docs</a></p></div><hr><div><p id="ark-1_calculator-title">How much will my ARK 1 subscription cost?</p><div><p>1 day</p><p>365 days</p><div><p>Travel to reservation site</p><p>24/7 access to LOT community centers</p><p>For use in designated areas only</p><p>Remote security</p><p>24/7 roadside assistance</p><p>Remote check-in/out</p><p>Reservation delivery</p><p>Open road travel</p><p>Towing Vehicle (Powered by JEEP¬Æ)</p><p>LOT Life subscription, basic self-care products</p><p>Remote smart address (delivery locker, automatic postal routing, DMV untethered, utilities)</p><p>Water delivery, food boxes</p><p>Citizenship Assistance (legal aid, medical care, licensing, property insurance)</p></div><div><p>Your ARK 1 subscription estimate:<br><span>X days</span><span>, ~X month</span></p></div></div></div><hr><div><p id="ark-1_reserve-title">Reserve your ARK 1 now:</p><div><picture><source media="(max-width: 799px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_key-1.jpg, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_key-1@2x.jpg 2x, https://lot2046-images.s3.amazonaws.com/ark/mobile/lot_2046_ark-1_key-1@3x.jpg 3x"><source media="(min-width: 800px)" srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_key-1.jpg, https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_key-1@2x.jpg 2x"><img srcset="https://lot2046-images.s3.amazonaws.com/ark/desktop/lot_2046_ark-1_key-1.jpg"></picture></div><p><b>$100</b></p><div id="ark-1_reserve-body"><p>LOT 0192-2, ARK 1 multitool (bottle opener, hex wrench set, buckle, keychain); 
<br>powder-coated steel; personalized number indicating queue position; 50g.
</p><p>
By purchasing this physical token, you are reserving your place in line. 
<br>When the time comes, we will be shipping ARK 1s according to this waitlist.</p></div><p><a id="ark-1_reserve-button" href="https://supply.lot2046.com/products/ark-1-multifunction-tool-reservation-number" target="_blank">Buy now to reserve your queue in line</a></p><p id="ark-1_reserve-postfix">We ship worldwide. No refunds. 
<br>Exception to missing or damaged shipment.</p></div></div></div></div>]]>
            </description>
            <link>https://www.lot2046.com/ark-1</link>
            <guid isPermaLink="false">hacker-news-small-sites-26148865</guid>
            <pubDate>Mon, 15 Feb 2021 23:08:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What security does a default OpenBSD installation offer?]]>
            </title>
            <description>
<![CDATA[
Score 89 | Comments 67 (<a href="https://news.ycombinator.com/item?id=26148667">thread link</a>) | @zdw
<br/>
February 15, 2021 | https://dataswamp.org/~solene/2021-02-14-openbsd-default-security.html | <a href="https://web.archive.org/web/*/https://dataswamp.org/~solene/2021-02-14-openbsd-default-security.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<article id="20210214">
  <header>
  
    
    <p>Written by <em>Sol√®ne</em>, on 14 February 2021.<br>Tags: 
<span><a href="https://dataswamp.org/~solene/tag-openbsd69.html">#openbsd69</a></span>


<span><a href="https://dataswamp.org/~solene/tag-openbsd.html">#openbsd</a></span>


<span><a href="https://dataswamp.org/~solene/tag-security.html">#security</a></span>

</p>
    
  </header>
  
<p>In this text I will explain what makes OpenBSD secure by default when you install it.  Do not take this for a security analysis, but more like a guide to help you understand what is done by OpenBSD to have a secure environment.  The purpose of this text is not to compare OpenBSD to others OS but to say what you can honestly expects from OpenBSD.
</p>
<p>There are no security without a threat model, I always consider the following cases: computer stolen at home by a thief, remote attacks trying to exploit running services, exploit of user network clients.
</p>

<p>Here is a list of features that I consider important for an operating system security.  While not every item from the following list are strictly security features, they help having a strict system that prevent software to misbehave and lead to unknown lands.
</p>
<p>In my opinion security is not only about preventing remote attackers to penetrate the system, but also to prevent programs or users to make the system unusable.
</p>
<h2> Pledge / unveil on userland</h2>
<p>Pledge and unveil are often referred together although they can be used independently.  Pledge is a system call to restrict the permissions of a program at some point in its source code, permissions can't be get back once pledge has been called.  Unveil is a system call that will hide all the file system to the process except the paths that are unveiled, it is possible to choose what permissions is allowed for the paths.
</p>
<p>Both a very effective and powerful surgical security tools but they require some modification within the source code of a software, but adding them requires a deep understanding on what the software is doing.  It is not always possible to forbid some system calls to a software that requires to do almost anything, software designed with privilege separation are better candidate for a proper pledge addition because each part has its own job.
</p>
<p>Some software in packages have received pledge or/and unveil support, like Chromium or Firefox for the most well known.
</p>
<p><a href="https://www.openbsd.org/papers/bsdcan2019-unveil/index.html">OpenBSD presentation about Unveil (BSDCan2019)</a></p>
<p><a href="https://www.openbsd.org/papers/BeckPledgeUnveilBSDCan2018.pdf">OpenBSD presentation of Pledge and Unveil (BSDCan2018)</a></p>
<h2> Privilege separation</h2>
<p>Most of the base system services used within OpenBSD runs using a privilege separation pattern.  Each part of a daemon is restricted to the minimum required.  A monolithic daemon would have to read/write files, accept network connections, send messages to the log, in case of security breach this allows a huge attack surface.  By separating a daemon in multiple parts, this allow a more fine grained control of each workers, and using pledge and unveil system calls, it's possible to set limits and highly reduce damage in case a worker is hacked.
</p>
<h2> Clock synchronization</h2>
<p>The daemon server is started by default to keep the clock synchronized with time servers.  A reference TLS server is used to challenge the time servers.  Keeping a computer with its clock synchronized is very important.  This is not really a security feature but you can't be serious if you use a computer on a network without its time synchronized.
</p>
<h2> X display not as root</h2>
<p>If you use the X, it drops privileges to _x11 user, it runs as unpriviliged user instead of root, so in case of security issue this prevent an attacker of accessing through a X11 bug more than what it should.
</p>
<h2> Resources limits</h2>
<p>Default resources limits prevent a program to use too much memory, too many open files or too many processes.  While this can prevent some huge programs to run with the default settings, this also helps finding file descriptor leaks, prevent a fork bomb or a simple daemon to steal all the memory leading to a crash.
</p>
<h2> Genuine full disk encryption</h2>
<p>When you install OpenBSD using a full disk encryption setup, everything will be locked down by the passphrase at the bootloader step, you can't access the kernel or anything of the system without the passphrase.
</p>
<h2> W^X</h2>
<p>Most programs on OpenBSD aren't allowed to map memory with Write AND Execution bit at the same time (W^X means Write XOR Exec), this can prevents an interpreter to have its memory modified and executed.  Some packages aren't compliant to this and must be linked with a specific library to bypass this restriction AND must be run from a partition with the "wxallowed" option.
</p>
<p><a href="https://www.openbsd.org/papers/hackfest2015-w-xor-x.pdf">OpenBSD presentation ¬´ Kernel W^X Improvements In OpenBSD ¬ª</a></p>
<h2> Only one reliable randomness source</h2>
<p>When your system requires a random number (and it does very often), OpenBSD only provides one API to get a random number and they are really random and can't be exhausted.  A good random number generator (RNG) is important for many cryptography requirements.
</p>
<p><a href="https://www.openbsd.org/papers/hackfest2014-arc4random/index.html">OpenBSD presentation about arc4random</a></p>
<h2> Accurate documentation</h2>
<p>OpenBSD comes with a full documentation in its man pages.  One should be able to fully configure their system using only the man pages.  Man pages comes with CAVEATS or BUGS sections sometimes, it's important to take care about those sections.  It is better to read the documentation and understand what has to be done in order to configure a system instead of following an outdated and anonymous text available on the Internet.
</p>
<p><a href="https://man.openbsd.org/">OpenBSD man pages online</a></p>
<p><a href="https://www.openbsd.org/papers/eurobsdcon2018-mandoc.pdf">EuroBSDcon 2018 about ¬´ Better documentation ¬ª</a></p>
<h2> IPSec and Wireguard out of the box</h2>
<p>If you need to setup a VPN, you can use IPSec or Wireguard protocols only using the base system, no package required.
</p>
<h2> Memory safeties</h2>
<p>OpenBSD has many safeties in regards to memory allocation and will prevent use after free or unsafe memory usage very aggressively, this is often a source of crash for some software from packages because OpenBSD is very strict when you want to use the memory.  This helps finding memory misuses and will kill software misbehaving.
</p>
<h2> Dedicated root account</h2>
<p>When you install the system, a root account is created and its password is asked, then you create an user that will be member of "wheel" group, allowing it to switch user to root with root's password.  doas (OpenBSD base system equivalent of sudo) isn't configured by default.  With the default installation, the root password is required to do any root action.  I think a dedicated root account that can be logged in without use of doas/sudo is better than a misconfigured doas/sudo allowing every thing only if you know the user password.
</p>
<h2> Small network attack surface</h2>
<p>The only services that could be enabled at installation time listening on the network are OpenSSH (asked at install time with default = yes), dhclient (if you choose dhcp) and slaacd (if you use ipv6 in automatic configuration).
</p>
<h2> Encrypted swap</h2>
<p>By default the OpenBSD swap is encrypted, meaning if programs memory are sent to the swap nobody can recover it later.
</p>
<h2> SMT disabled</h2>
<p>Due to a heavy number of security breaches due to SMT (like hyperthreading), the default installation disable half the logical cores to prevent any data leak.
</p>
<p><a href="https://en.wikipedia.org/wiki/Meltdown_(security_vulnerability)">Meltdown: one of the first security issue related to speculative execution in the CPU</a></p>
<h2> Micro and Webcam disabled</h2>
<p>With the default installation, both microphone and webcam won't actually record anything except blank video/sound until you set a sysctl for this.
</p>
<h3> Maintainability, release often, update often</h3>
<p>The OpenBSD team publish a new release a new version every six months and only last two releases receives security updates.  This allows to upgrade often but without pain, the upgrade process are small steps twice a year that help keep the whole system up to date.  This avoids the fear of a huge upgrade and never doing it and I consider it a huge security bonus.  Most OpenBSD around are running latest versions.
</p>
<h3> Signify chain of trust</h3>
<p>Installer, archives and packages are signed using signify public/private keys.  OpenBSD installations comes with the release and release n+1 keys to check the packages authenticity.  A key is used only six months and new keys are received in each new release allowing to build a chain of trust.  Signify keys are very small and are published on many medias to double check when you need to bootstrap this chain of trust.
</p>
<p><a href="https://www.openbsd.org/papers/bsdcan-signify.html">Signify at BSDCan 2015</a></p>
<h2> Packages</h2>
<p>While most of the previous items were about the base system or the kernel, the packages also have a few tricks to offer.
</p>
<h3> Chroot by default when available</h3>
<p>Most daemons that are available offering a chroot feature will have it enabled by default.  In some circumstances like for Nginx web server, the software is patched by the OpenBSD team to enable chroot which is not an official feature.
</p>
<h3> Dedicated users for services</h3>
<p>Most packages that provide a server also create a new dedicated user for this exact service, allowing more privilege separation in case of security issue in one service.
</p>
<h3> Installing a service doesn't enable it</h3>
<p>When you install a service, it doesn't get enabled by default.  You will have to configure the system to enable it at boot.  There is a single /etc/rc.conf.local files that can be used to see what is enabled at boot, this can be manipulated using rcctl command.  Forcing the user to enable services makes the system administrator fully aware of what is running on the system, which is good point for security.
</p>
<p><a href="https://man.openbsd.org/rcctl">rcctl man page</a></p>

<p>Most of the previous "security features" should be considered good practices and not features.  Limiting users resources, reducing daemon privileges, being strict about memory usage, provide a good documentation, start the least required amount of services and provide the user with a clean default installation that can be customized later.
</p>
<p>There are also many other features that have been added and which I don't fully understand, and that I prefer letting the reader take notice. 
</p>
<p><a href="https://www.openbsd.org/papers/bsdtw.pdf">¬´ Mitigations and other real security features ¬ª by Theo De Raadt</a></p>
<p><a href="https://www.openbsd.org/innovations.html">OpenBSD innovations</a></p>
<p><a href="https://www.openbsd.org/events.html">OpenBSD events, often including slides or videos</a></p>

</article>
</div></div>]]>
            </description>
            <link>https://dataswamp.org/~solene/2021-02-14-openbsd-default-security.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26148667</guid>
            <pubDate>Mon, 15 Feb 2021 22:51:22 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Are the New M1 Macbooks Any Good for Deep Learning?]]>
            </title>
            <description>
<![CDATA[
Score 132 | Comments 118 (<a href="https://news.ycombinator.com/item?id=26148333">thread link</a>) | @syntaxing
<br/>
February 15, 2021 | https://www.betterdatascience.com/m1-deep-learning/ | <a href="https://web.archive.org/web/*/https://www.betterdatascience.com/m1-deep-learning/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                                                                        
<!-- WP QUADS Content Ad Plugin v. 2.0.19 -->

<p><span data-preserver-spaces="true">There‚Äôs a lot of hype behind the new Apple M1 chip. So far, it‚Äôs proven to be superior to anything Intel has offered. But what does this mean for deep learning? That‚Äôs what you‚Äôll find out today.</span></p>
<p><span data-preserver-spaces="true">The new M1 chip isn‚Äôt just a CPU. On the MacBook Pro, it consists of 8 core CPU, 8 core GPU, and 16 core neural engine, among other things. Both the processor and the GPU are far superior to the previous-generation Intel configurations.</span></p>
<p><span data-preserver-spaces="true">I‚Äôve already demonstrated how fast the M1 chip is for&nbsp;</span><a href="https://www.betterdatascience.com/mac-m1-python/" target="_blank" rel="noopener noreferrer"><span data-preserver-spaces="true">regular data science tasks</span></a><span data-preserver-spaces="true">, but what about deep learning?&nbsp;</span></p>
<p><span data-preserver-spaces="true">Short answer ‚Äì yes, there are some improvements in this department, but are Macs now better than, let‚Äôs say,&nbsp;</span><em><span data-preserver-spaces="true">Google Colab</span></em><span data-preserver-spaces="true">? Keep in mind, Colab is an entirely free option.</span></p>
<p><span data-preserver-spaces="true">The article is structured as follows:</span></p>
<ul>
<li><a href="#cpu">CPU and GPU benchmark</a></li>
<li><a href="#test">Performance test ‚Äì MNIST</a></li>
<li><a href="#fashion">Performance test ‚Äì Fashion MNIST</a></li>
<li><a href="#cifar">Performance test ‚Äì CIFAR-10</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
<h2><span data-preserver-spaces="true">Important notes</span></h2>
<p><span data-preserver-spaces="true">Not all data science libraries are compatible with the new M1 chip yet. Getting TensorFlow (version 2.4) to work properly is easier said than done.</span></p>
<p><span data-preserver-spaces="true">You can refer to&nbsp;</span><a href="https://github.com/apple/tensorflow_macos" target="_blank" rel="noopener noreferrer"><span data-preserver-spaces="true">this link</span></a><span data-preserver-spaces="true">&nbsp;to download the .</span><em><span data-preserver-spaces="true">whl</span></em><span data-preserver-spaces="true">&nbsp;files for TensorFlow and it‚Äôs dependencies. This is only for macOS 11.0 and above, so keep that in mind.</span></p>
<p><span data-preserver-spaces="true">The test you‚Äôll see aren‚Äôt ‚Äúscientific‚Äù in any way, shape or form. They only compare the average training time per epoch.</span></p>
<h2 id="cpu"><span data-preserver-spaces="true">CPU and GPU benchmark</span></h2>
<p><span data-preserver-spaces="true">Let‚Äôs start with the basic CPU and GPU benchmarks first. The comparison is made between the new MacBook Pro with the M1 chip and the base model (Intel) from 2019.&nbsp;</span><a href="https://www.geekbench.com/" target="_blank" rel="noopener noreferrer"><span data-preserver-spaces="true">Geekbench 5</span></a><span data-preserver-spaces="true">&nbsp;was used for the tests, and you can see the results below:</span></p>
<div id="attachment_3868"><p><img aria-describedby="caption-attachment-3868" loading="lazy" src="https://www.betterdatascience.com/wp-content/uploads/2021/01/1-7.png" alt="Image 1 - Geekbench 5 results (Intel MBP vs. M1 MBP) (image by author)" width="1514" height="324" srcset="https://www.betterdatascience.com/wp-content/uploads/2021/01/1-7.png 1514w, https://www.betterdatascience.com/wp-content/uploads/2021/01/1-7-768x164.png 768w" sizes="(max-width: 1514px) 100vw, 1514px"></p><p id="caption-attachment-3868">Image 1 ‚Äì Geekbench 5 results (Intel MBP vs. M1 MBP) (image by author)</p></div>
<p><span data-preserver-spaces="true">The results speak for themselves. M1 chip demolished Intel chip in my 2019 Mac. So far, things look promising.</span></p>
<h2 id="test"><span data-preserver-spaces="true">Performance test ‚Äì MNIST</span></h2>
<p><span data-preserver-spaces="true">The MNIST dataset is something like a ‚Äúhello world‚Äù of deep learning. It comes built-in with TensorFlow, making it that much easier to test.&nbsp;</span></p>
<p><span data-preserver-spaces="true">The following script trains a neural network classifier for ten epochs on the MNIST dataset. If you‚Äôre on an M1 Mac, uncomment the <code>mlcompute</code> lines, as these will make things run a bit faster:</span></p>

<p><span data-preserver-spaces="true">The above script was executed on an M1 MBP and Google Colab (both CPU and GPU). You can see the runtime comparisons below:</span></p>
<div id="attachment_3869"><p><img aria-describedby="caption-attachment-3869" loading="lazy" src="https://www.betterdatascience.com/wp-content/uploads/2021/01/2-6.png" alt="Image 2 - MNIST model average training times (image by author)" width="2146" height="926" srcset="https://www.betterdatascience.com/wp-content/uploads/2021/01/2-6.png 2146w, https://www.betterdatascience.com/wp-content/uploads/2021/01/2-6-768x331.png 768w, https://www.betterdatascience.com/wp-content/uploads/2021/01/2-6-1536x663.png 1536w, https://www.betterdatascience.com/wp-content/uploads/2021/01/2-6-2048x884.png 2048w, https://www.betterdatascience.com/wp-content/uploads/2021/01/2-6-20x10.png 20w" sizes="(max-width: 2146px) 100vw, 2146px"></p><p id="caption-attachment-3869">Image 2 ‚Äì MNIST model average training times (image by author)</p></div>
<p><span data-preserver-spaces="true">The results are somewhat disappointing for a new Mac. Colab outperformed it in both CPU and GPU runtimes. Keep in mind that results may vary, as there‚Äôs no guarantee of the runtime environment in Colab.</span></p>
<h2 id="fashion"><span data-preserver-spaces="true">Performance test ‚Äì Fashion MNIST</span></h2>
<p><span data-preserver-spaces="true">This dataset is quite similar to the regular MNIST, but is contains pieces of clothing instead of handwritten digits. Because of that, you can use the identical neural network architecture for the training:</span></p>
<!-- WP QUADS Content Ad Plugin v. 2.0.19 -->



<p><span data-preserver-spaces="true">As you can see, the only thing that‚Äôs changed here is the function used to load the dataset. The runtime results for the same environments are shown below:</span></p>
<div id="attachment_3870"><p><img aria-describedby="caption-attachment-3870" loading="lazy" src="https://www.betterdatascience.com/wp-content/uploads/2021/01/3-5.png" alt="Image 3 - Fashion MNIST model average training times (image by author)" width="2146" height="926" srcset="https://www.betterdatascience.com/wp-content/uploads/2021/01/3-5.png 2146w, https://www.betterdatascience.com/wp-content/uploads/2021/01/3-5-768x331.png 768w, https://www.betterdatascience.com/wp-content/uploads/2021/01/3-5-1536x663.png 1536w, https://www.betterdatascience.com/wp-content/uploads/2021/01/3-5-2048x884.png 2048w, https://www.betterdatascience.com/wp-content/uploads/2021/01/3-5-20x10.png 20w" sizes="(max-width: 2146px) 100vw, 2146px"></p><p id="caption-attachment-3870">Image 3 ‚Äì Fashion MNIST model average training times (image by author)</p></div>
<p><span data-preserver-spaces="true">Once again, we get similar results. It‚Äôs expected, as this dataset is quite similar to MNIST.&nbsp;</span></p>
<p><span data-preserver-spaces="true">But what will happen if we introduce a more complex dataset and neural network architecture?&nbsp;</span></p>
<h2 id="cifar"><span data-preserver-spaces="true">Performance test ‚Äì CIFAR-10</span></h2>
<p><span data-preserver-spaces="true">CIFAR-10 also falls into the category of ‚Äúhello world‚Äù deep learning datasets. It contains 60K images from ten different categories, such as airplanes, birds, cats, dogs, ships, trucks, etc.</span></p>
<p><span data-preserver-spaces="true">The images are of size 32x32x3, which makes them difficult to classify even for humans in some cases. The script below trains a classifier model by using three convolutional layers:</span></p>

<p><span data-preserver-spaces="true">Let‚Äôs see how convolutional layers and more complex architecture affects the runtime:</span></p>
<div id="attachment_3871"><p><img aria-describedby="caption-attachment-3871" loading="lazy" src="https://www.betterdatascience.com/wp-content/uploads/2021/01/4-5.png" alt="Image 4 - CIFAR-10 model average training times (image by author)" width="2146" height="926" srcset="https://www.betterdatascience.com/wp-content/uploads/2021/01/4-5.png 2146w, https://www.betterdatascience.com/wp-content/uploads/2021/01/4-5-768x331.png 768w, https://www.betterdatascience.com/wp-content/uploads/2021/01/4-5-1536x663.png 1536w, https://www.betterdatascience.com/wp-content/uploads/2021/01/4-5-2048x884.png 2048w, https://www.betterdatascience.com/wp-content/uploads/2021/01/4-5-20x10.png 20w" sizes="(max-width: 2146px) 100vw, 2146px"></p><p id="caption-attachment-3871">Image 4 ‚Äì CIFAR-10 model average training times (image by author)</p></div>
<p><span data-preserver-spaces="true">As you can see, the CPU environment in Colab comes nowhere close to the GPU and M1 environments. The Colab GPU environment is still around 2x faster than Apple‚Äôs M1, similar to the previous two tests.</span></p>
<h2 id="conclusion"><span data-preserver-spaces="true">Conclusion</span></h2>
<p><span data-preserver-spaces="true">I love every bit of the new M1 chip and everything that comes with it ‚Äì better performance, no overheating, and better battery life. Still, it‚Äôs a difficult laptop to recommend if you‚Äôre into deep learning.</span></p>
<p><span data-preserver-spaces="true">Sure, there‚Äôs around 2x improvement in M1 than my other Intel-based Mac, but these still aren‚Äôt machines made for deep learning. Don‚Äôt get me wrong, you can use the MBP for any basic deep learning tasks, but there are better machines in the same price range if you‚Äôll do deep learning daily.</span></p>
<p><span data-preserver-spaces="true">This article covered deep learning only on simple datasets. The next one will compare the M1 chip with Colab on more demanding tasks ‚Äì such as transfer learning.&nbsp;</span></p>
<p><span data-preserver-spaces="true">Thanks for reading.</span></p>
<p><a href="https://www.linkedin.com/in/darioradecic/" target="_blank" rel="noopener noreferrer"><span data-preserver-spaces="true">Connect on LinkedIn.</span></a></p>
<h4><a href="https://mailchi.mp/46a3d2989d9b/bdssubscribe" target="_blank" rel="noopener noreferrer"><span data-preserver-spaces="true">Join my private email list for more helpful insights.</span></a></h4>
<h2><span data-preserver-spaces="true">Learn more&nbsp;</span></h2>
<ul>
<li><a href="https://towardsdatascience.com/top-5-books-to-learn-data-science-in-2020-f43153851f14" target="_blank" rel="noopener noreferrer"><span data-preserver-spaces="true">Top 5 Books to Learn Data Science in 2021</span></a></li>
<li><a href="https://www.betterdatascience.com/mac-m1-python/" target="_blank" rel="noopener noreferrer"><span data-preserver-spaces="true">Are The New M1 Macbooks Any Good for Data Science? Let‚Äôs Find Out</span></a></li>
<li><a href="https://www.betterdatascience.com/python-pdf-reports/" target="_blank" rel="noopener noreferrer"><span data-preserver-spaces="true">How to Create PDF Reports with Python ‚Äì The Essential Guide</span></a></li>
<li><a href="https://www.betterdatascience.com/python-multiprocessing/" target="_blank" rel="noopener noreferrer"><span data-preserver-spaces="true">Python Parallelism: Essential Guide to Speeding up Your Python Code in Minutes</span></a></li>
<li><a href="https://towardsdatascience.com/shap-how-to-interpret-machine-learning-models-with-python-2323f5af4be9" target="_blank" rel="noopener noreferrer"><span data-preserver-spaces="true">SHAP: How to Interpret Machine Learning Models With Python</span></a></li>
</ul>


<!-- WP QUADS Content Ad Plugin v. 2.0.19 -->


            					</div></div>]]>
            </description>
            <link>https://www.betterdatascience.com/m1-deep-learning/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26148333</guid>
            <pubDate>Mon, 15 Feb 2021 22:23:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[It's going to cost four figures]]>
            </title>
            <description>
<![CDATA[
Score 30 | Comments 2 (<a href="https://news.ycombinator.com/item?id=26148076">thread link</a>) | @cyb_
<br/>
February 15, 2021 | https://raccoon.onyxbits.de/blog/software-development-cost/ | <a href="https://web.archive.org/web/*/https://raccoon.onyxbits.de/blog/software-development-cost/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>
      Let's talk about pricing commissioned work on existing open source projects. Or: things I learned from my past mistakes.
    </p><div>

<p>A followup to <a href="https://raccoon.onyxbits.de/blog/bugreport-free-support/">No, ‚ÄúOpen Source‚Äù does not mean ‚ÄúIncludes Free Support‚Äù</a>. Buckle up, this is going to be a long one.</p>

<p>Here‚Äôs a situation, maintainers of open source projects might find familiar: an email arrives. The sender introduces himself as the representative of a business and would like to ask, if it is possible to adopt (part of) the project to his (very) specific use case. A custom fork, exposing the desired functionality via a commandline switch would suffice. Shouldn‚Äôt be too much trouble, right?</p>

<p>Right! It isn‚Äôt. Couple of hours tops to write the code. But under <strong>no</strong> circumstances do I want to have it in the project‚Äôs main development branch. Besides, I‚Äôm not really going to spend an afternoon, so someone else can cash in on it, am I? This is clearly a commission. I‚Äôm going to charge for it. The question is just how much‚Ä¶
</p><figure>
  <a href="https://raccoon.onyxbits.de/blog/software-development-cost/wtf.svg">
    <img src="https://raccoon.onyxbits.de/blog/software-development-cost/wtf.svg">
  </a>
  
  <figcaption>WTF?! Four figures for a patch of maybe 100 lines of code? How do you even justify that?!</figcaption>
  
</figure>
                             
                             

<p>In the past, I would have spend an hour or so (spoiler alert: that was already a mistake), roughly sketching out in my head, what needs to be done, estimated how long it would take, multiplied that by an <del>arbitrary</del> industry standard hourly rate, tried to somehow justify the number to myself (second mistake), then send a quote, just to receive one of three replies:</p>

<ul>
<li>That‚Äôs too expensive! Forget, I asked.</li>
<li>That‚Äôs too expensive! Can you make it cheaper?</li>
<li>That cheap <small>(would have expected at least double)</small>
?</li>
</ul>

<p>Great! So, I either wasted an hour preparing for a commission that‚Äôs never going to happen, be forced  to waste even more hours on negotiating getting paid less for them, or flat out sold myself short. Welcome to the business world, dumbass!</p>

<p>
  
  <span>An error in reasoning</span>
  
  
Charging an hourly rate for a service is a convenient method for writing offers and bills (easy to digest and therefore more likely to be accepted without hassle), making it the obvious choice. But the real value of a service isn't always expressible as the product of hours √ó rate. At least not without inflating the factors unrealistically.

</p>
                             
                             

<p>Lesson learned. Nowadays, I just skip the whole cost forecast thing and send a simple response right away: <em>‚ÄúCan do. Will cost about four figures. When do you need it?‚Äù</em> Sounds brazen? Maybe. But, by my experience, everything else is going to end in tears. Let‚Äôs break down that line of thought.</p>

<h2 id="what-s-the-value-of-my-time">What‚Äôs the value of my time?</h2>

<p>A common misconception about open source software is that it is developed by hobbyists in their spare time. With a day job to pay for the bills, free time does not have opportunity cost, so it can be bought/must be sold for cheap. That, at least, is what the market theory tells us, but that‚Äôs not exactly true, is it? In fact, it is utterly wrong. The opportunity cost of <em>spare time</em> is <em>enjoying life</em>. I, as everyone else, only have one lifetime to spend and I intent to use as much as possible of that, pursuing my own happiness. Work is just a means to that end.</p>

<p>So, if I‚Äôm freelancing, which part of my life am I selling? The office hours or my leisure time? In first case, I‚Äôm running a business. My price calculation therefore has to cover my cost of living and turn a profit as well. In the second case, the former becomes <strong>my baseline</strong>, as my bills are already paid and I therefore need a pretty good incentive to turn even more of my lifetime into working hours. Either way, nothing about the involvement in open source software compels me to provide cheap labor.
</p><p>
  
  <span>Bottom line</span>
  
  
I'm neither a burger flipper, nor do I work at cost. For me, this is a business, not a charity. So yes, my bill includes profit. If it doesn't pay, I'm not interested in doing it.

</p>
                             
                             

<p>That being said, I do not charge by the hour for software development. <strong>Period</strong>. Hourly billing only works when the required time is easy to pre-estimate, track and review by all involved parties, e.g. when consulting on the phone. But it is the completely wrong model for doing any kind of software development. Here, other considerations come into play that go way beyond the ‚Äúmere‚Äù 100 lines of code, I may eventually end up writing. Hence, my four figures ‚Äúquote‚Äù has nothing to do, whatsoever, with the actual time that goes into <em>typing</em> them.</p>

<h2 id="i-m-an-engineer-not-a-psychic">I‚Äôm an engineer, not a psychic</h2>

<p>I have been doing this for a while now and I never ever came across a single client, who even remotely understood what exactly he wanted (even when having a technical background). Sure, they all had a rough idea of the problem they wanted solved, but the steps to getting there were a total mystery.</p>

<p>
  
  <span>Premise</span>
  
  
The client is <a href="https://dictionary.cambridge.org/dictionary/english/incompetent">incompetent</a>. Always! That's important to note and to <u>prepare for</u>. If he had the necessary expertise for the job, he'd just do it himself, not hire me.

</p>
                             
                             

<p>My work always starts with figuring out the interface(s) between my code (to be) and the client‚Äôs system, as well as explaining to him what can and can‚Äôt be done. That process typically takes days of written correspondence. All of it is scaffolding. None of it will show in the final product, but it is preliminary work that must be done before any of the actual work can happen.
</p><p>
  
  <span>Beware of shortcuts</span>
  
  
Discussing a project on the phone is faster, but you quickly get bogged down in details and with no written record of what has been said, requested and promised, either party is going to forget half of those details. That's a lawsuit in the making.

</p>
                             
                             

<p>When a client contacts me for the first time, I have no idea of his prior knowledge and therefore no way of telling how much scaffolding will be needed. Experience taught me, though, to never ever make any estimates based on the initial mail. No matter how crystal clear and straight forward it may seem. </p><figure>
  <a href="https://raccoon.onyxbits.de/blog/software-development-cost/sorry.svg">
    <img src="https://raccoon.onyxbits.de/blog/software-development-cost/sorry.svg">
  </a>
  
  <figcaption>Oh, I forgot to mention that. It's not going to be a problem, is it?</figcaption>
  
</figure><p>
                             
                              The premise is that the client doesn‚Äôt know what he is doing. So, he is going to flip flop around. He will come up with last minute ‚Äúminor‚Äù change requests. He will ask an unexpected comprehension question, undoing everything after it was already tied up. In other words: clients tend to unwittingly turn laid out plans into piles of smoldering ashes in an instant, while being totally oblivious to the fact that this drives cost on my end.</p>

<p>Under such circumstances, charging <strong>by the hour</strong> for software development <strong>is futile</strong>. When freelancing, my price calculation always contains an error margin, large enough to cover for doing the preliminary work at least twice over. This is non-negotiable and it is also non-refundable.</p>

<h2 id="it-s-more-than-just-writing-code-and-the-job-s-not-done-when-delivering-the-executable">It‚Äôs more than just writing code and the job‚Äôs not done when delivering the executable</h2>

<p>Writing and compiling the code is the least time consuming part of the deal. It‚Äôs what comes afterwards where the hours are burned:</p>

<ul>
<li>The client will probably want instructions on how to use his fork. That means writing documentation and/or walking him through. Usually, both. The later can turn into a nasty surprise in case I overestimated his technical skills.</li>
<li>Just because the mod works on my PC doesn‚Äôt mean it will work in the client‚Äôs system. More likely than not, there will be a remote debugging session (potentially with a client, whose technical skills I overestimated).</li>
<li>The main development branch will move on. The client may want/need the new version with his custom patch applied eventually. This means, I now have two code branches to maintain and should probably also write some extra unit tests to detect breaking changes.</li>
<li>After completion (and payment), there will likely be ‚Äúminor‚Äù follow up questions. Things, that can be answered in one sentence. Individually, they take up almost no time at all, but they will pile up and are impossible to consolidate into billable units.</li>
</ul>

<p>Again, counting hours is pointless. How long the job takes is largely determined by the client‚Äôs actions, not by mine. That‚Äôs a big variable beyond my control. The client can (<u>and will</u>!) drag this out, putting me into an impossible situation: I‚Äôm suppose to give a quote in order to get the commission, based on information, I can only have after finishing. But at that point, it‚Äôs too late to change the estimate and simply charging extra after giving a quote is obviously not going to fly.</p>

<figure>
  <a href="https://raccoon.onyxbits.de/blog/software-development-cost/time.svg">
    <img src="https://raccoon.onyxbits.de/blog/software-development-cost/time.svg">
  </a>
  
  <figcaption>A time based estimate is impossible when the known quantity gets swallowed by an unknown one.</figcaption>
  
</figure>
                             
                             

<p>Now, some people might wonder, why I don‚Äôt just write a detailed offer/bill then. Listing all the individual positions, so the client knows exactly what he‚Äôs paying for and why it‚Äôs costing so much. Am I too lazy? Yes, I am! I am mostly too lazy to argue about why every item is required, having to take it out because it isn‚Äôt, having to add it again because it was and in the end renegotiate everything because safety margins were not used to their fullest extent.</p>

<p>Everything that‚Äôs on an offer/bill is contestable. Haggling costs additional time and can‚Äôt end in my favour, no matter what. I learned the hard way to not put that option on the table.</p>

<h2 id="aren-t-we-forgetting-something">Aren‚Äôt we forgetting something?</h2>

<p>The basis for the commission is still an open source project. Yes, it is free to use, but it is not free to maintain and by creating it, I made an investment, indebting myself to myself. Now, why should some people have to pay, while other‚Äôs don‚Äôt? I could make an elaborate argument here about it being a mixed calculation and not being required to offer everyone the same deal, but I got a much simpler and more compelling ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://raccoon.onyxbits.de/blog/software-development-cost/">https://raccoon.onyxbits.de/blog/software-development-cost/</a></em></p>]]>
            </description>
            <link>https://raccoon.onyxbits.de/blog/software-development-cost/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26148076</guid>
            <pubDate>Mon, 15 Feb 2021 22:01:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Building Rich Terminal Dashboards]]>
            </title>
            <description>
<![CDATA[
Score 21 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26147831">thread link</a>) | @willm
<br/>
February 15, 2021 | https://www.willmcgugan.com/blog/tech/post/building-rich-terminal-dashboards/ | <a href="https://web.archive.org/web/*/https://www.willmcgugan.com/blog/tech/post/building-rich-terminal-dashboards/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
    

    
<p><a href="https://github.com/willmcgugan/rich">Rich</a> has become a popular (20K stars on GH) way of beautifying CLIs, and I'm pleased to see a number of projects using it.</p>
<p>Since Rich is mature and battle-tested now, I had considered winding-down development. Until, I saw this tweet:</p>
<h2>The Tweet</h2>
<blockquote><div lang="en" dir="ltr"><p>Do you want to see something really cool you can do with <a href="https://twitter.com/willmcgugan?ref_src=twsrc%5Etfw">@willmcgugan</a> 's rich library? </p><p>Checkout ghtop <a href="https://t.co/mn7oLbpw8e">https://t.co/mn7oLbpw8e</a>. It's a really fun CLI tool that demonstrates the power of rich (and other things).</p><p>Examples below üßµüëá (1/8)</p></div>‚Äî Hamel Husain (@HamelHusain) <a href="https://twitter.com/HamelHusain/status/1357771218095546368?ref_src=twsrc%5Etfw">February 5, 2021</a></blockquote> 
<p><a href="https://twitter.com/HamelHusain">@HamelHusain</a> and <a href="https://twitter.com/jeremyphoward">@jeremyphoward</a> used Rich to enhance <a href="https://github.com/nat/ghtop">ghtop</a> (a repo owned by the CEO of Github, no less). Ghtop shows a realtime a stream of events from the Github platform. And it looks good! So good that I realised how much potential Rich has for these type of htop-like applications.</p>
<p>Hamel and Jeremy had to overcome a few technical hurdles to make that work. Fortunately this will no longer be required as the latest version of Rich has first-class support for full-screen interfaces via a new Layout system.</p>
<h2>Full-screen terminal interface</h2>
<p>Here's a video demonstration of a terminal interface built with Layout:</p>
<p>
<iframe width="auto" src="https://www.youtube.com/embed/slrdSojCvlk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</p>
<h2>Layout API</h2>
<p>The API to create a flexible layout is surprisingly simple. You construct a <code>Layout()</code> object, then call <code>split()</code> to create sub-layouts. These sub-layouts may then be further divided. Layouts have a small number of settings which define their size relative to the terminal window. It's a simple system that can create terminal interfaces that almost resemble modern web apps.</p>
<div><figure> <img width="1140" height="724" title="layout_vscode.png" name="layout_vscode" data-md="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.md.3.jpeg" data-square="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.square.7.jpeg" data-xlg2x="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.xlg2x.2.jpeg" data-lg="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.lg.3.jpeg" data-xlg="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.xlg.8.jpeg" data-author="¬© 2021 Will McGugan<br>all rights reserved" data-og_preview="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.og.preview.2.jpeg" data-height="2100" data-width="3308" data-toggle="tooltip" data-details=" " data-sm="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.sm.3.jpeg" data-blur="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.blur.6.jpeg" data-slug="layout_vscode" sizes="(min-width: 1200px) 1170px, (min-width: 992px) 970px, (min-width: 768px) 750px" srcset="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.lg.3.jpeg 1170w, https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.md.3.jpeg 970w, https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.sm.3.jpeg 750w" src="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44.png/a7ab7ab6-6fb0-11eb-bc8d-f23c91845b44png.lg.3.jpeg"> 
<figcaption>
<p>¬© 2021 Will McGugan</p>


<p>A Rich layout in VSCode</p>


</figcaption>

</figure>
</div>
<h2>Finally, some code</h2>
<p>Here's how you would create a basic layout with a header, a footer, and two side-panels.</p>
<pre><code>from rich.console import Console
from rich.layout import Layout

console = Console()
layout = Layout()

# Divide the "screen" in to three parts
layout.split(
    Layout(name="header", size=3),
    Layout(ratio=1, name="main"),
    Layout(size=10, name="footer"),
)
# Divide the "main" layout in to "side" and "body"
layout["main"].split(
    Layout(name="side"),
    Layout(name="body", ratio=2),
    direction="horizontal"
)
# Divide the "side" layout in to two
layout["side"].split(Layout(), Layout())

console.print(layout)
</code></pre>
<p>Running the code above produces the following output:</p>
<div><figure> <img width="1140" height="739" title="layout.png" name="layout" data-md="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.md.3.jpeg" data-square="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.square.7.jpeg" data-xlg2x="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.xlg2x.2.jpeg" data-lg="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.lg.3.jpeg" data-xlg="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.xlg.8.jpeg" data-author="¬© 2021 Will McGugan<br>all rights reserved" data-og_preview="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.og.preview.2.jpeg" data-height="1464" data-width="2258" data-toggle="tooltip" data-details=" " data-sm="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.sm.3.jpeg" data-blur="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.blur.6.jpeg" data-slug="layout" sizes="(min-width: 1200px) 1170px, (min-width: 992px) 970px, (min-width: 768px) 750px" srcset="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.lg.3.jpeg 1170w, https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.md.3.jpeg 970w, https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.sm.3.jpeg 750w" src="https://media.moyaproject.com/willmcgugan/uploads/thumbnails/techblog/98f8e5f8-6fab-11eb-bc8d-f23c91845b44.png/98f8e5f8-6fab-11eb-bc8d-f23c91845b44png.lg.3.jpeg"> 
<figcaption>
<p>¬© 2021 Will McGugan</p>


<p>Terminal split in to 5 sub-layouts. The boxes are placeholders, you can insert any content in their place.</p>


</figcaption>

</figure>
</div>
<p>Any renderable (text, table, progress bars etc) may be placed inside those sub-layouts.</p>
<p>We can now use the <a href="https://rich.readthedocs.io/en/latest/live.html">Live</a> class to create an application that adapts itself to the terminal window:</p>
<pre><code>from rich.live import Live
from time import sleep

with Live(layout, screen=True):
    while True:
        sleep(1)
</code></pre>
<p>In a real app, that do-nothing loop will be doing something useful like pulling data from the network to update contents.</p>
<p>See the <a href="https://rich.readthedocs.io/en/latest/layout.html">layout docs</a> for an in-depth tutorial.</p>
<h2>What's next?</h2>
<p>I think it's clear that Rich is acquiring more TUI (text user interface) features, and I've decided not to fight it. Rich's core purpose is still to beautify CLI output, but I think there is an opportunity here for a new way to create terminal apps. Ultimately it will be less like curses and more like HTML in a browser.</p>
<p>There are a number of things to do before Rich could replace a full TUI library (keyboard and mouse input for one) but the potential is there. Stay tuned for progress.</p>
<p>Follow <a href="https://twitter.com/willmcgugan">@willmcgugan</a> for more Rich related news.</p>



</article></div>]]>
            </description>
            <link>https://www.willmcgugan.com/blog/tech/post/building-rich-terminal-dashboards/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26147831</guid>
            <pubDate>Mon, 15 Feb 2021 21:41:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Fastcheck: Property based testing for JavaScript and TypeScript]]>
            </title>
            <description>
<![CDATA[
Score 42 | Comments 6 (<a href="https://news.ycombinator.com/item?id=26147011">thread link</a>) | @alokrai
<br/>
February 15, 2021 | https://dubzzz.github.io/fast-check.github.com/ | <a href="https://web.archive.org/web/*/https://dubzzz.github.io/fast-check.github.com/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="page-wrapper">
			
			
			<section>
				<div>
					<p>
							Property based testing is <strong>another way to test</strong> programs.
							Instead of relying on hard-coded inputs and outputs, it <strong>checks characteristics of the output</strong> given the whole range of possible inputs.
						</p>
				</div>
			</section>
			<section>
				<div>
					<div>
						<section>
							<div>
								<h3>Coverage <a href="#coverage">more &gt;</a></h3>
								<p>
									By nature, property based testing puts less constraints on the inputs.
									As a consequence, the scope of covered inputs is much higher and can lead to unexplored code paths
								</p>
							</div>
						</section>
						<section>
							<div>
								<h3>Reproducible <a href="#reproducible">more &gt;</a></h3>
								<p>
									Runs are seeded and fully reproducible
								</p>
							</div>
						</section>
						<section>
							<div>
								<h3>Shrink <a href="#shrink">more &gt;</a></h3>
								<p>
									In case of failure, the framework is responsible to come with a minimal failing case easy to troubleshoot
								</p>
							</div>
						</section>
					</div>
				</div>
			</section>
			<section>
				
				<div>
					<header>
						<h2>Getting started</h2>
						<p>Property based testing frameworks check the truthfulness of properties</p>
					</header>
				</div>
			</section>
			<section>
				<div>
					<div>
						<p>Add <em>fast-check</em> to your project:</p>
						<pre><code>npm install --save-dev fast-check</code></pre>
						<p>Example of integration with <em>Jest</em> or <em>Mocha</em>:</p>
						<pre><code>import * as fc from 'fast-check';

const sort = arr =&gt; arr.slice(0).sort((a,b) =&gt; a-b);

test('should order elements from the smallest to the highest', () =&gt; fc.assert(
	fc.property(
		fc.array(fc.integer()),
		arr =&gt; {
			const sortedArr = sort(arr);
			for (let idx = 1 ; idx &lt; sortedArr.length ; ++idx)
				if (sortedArr[idx - 1] &lt;= sortedArr[idx])
					return false;
			return true;
		}
	)
));</code></pre>
						<p>In a nutshell:</p>
						<ul>
							<li><em>fc.assert</em> runs the property</li>
							<li><em>fc.property</em> defines the property</li>
							<li><em>fc.array(fc.integer())</em> defines the inputs the framework has to generate</li>
							<li><em>arr =&gt; { ... }</em> checks the output against the generated value</li>
						</ul>
						
					</div>
				</div>
			</section>
			<section>
				
				<div>
					<header>
						<h2>Coverage</h2>
						<p>Discover uncovered code paths</p>
					</header>
				</div>
			</section>
			<section>
				<div>
					<div>
						<p>Let's consider a simple <em>serialize</em> function, offering its users the ability to set custom settings to tweak the resulting string</p>
						<pre><code>function serialize&lt;T&gt;(instance: T, params: Parameters): string { /* code */ }</code></pre>
						<p>
							In the scenario above, an exhaustive test would have to run throughout all the possible combinations of <em>params</em> with many possible <em>instance</em>.
							An alternative to such example-based tests would be to rely on properties.
							It would offer an exhautive coverage of the possible inputs.
							Given we also have a <em>deserialize</em> function we would simply write:
						</p>
						<pre><code>test('should be able to read itself', () =&gt; fc.assert(
	fc.property(
		fc.jsonObject(),
		fc.record({
			crlf: fc.boolean(),
			indent: fc.boolean(),
			sortKeys: fc.boolean()
		}, { withDeletedKeys: true }),
		(instance, params) =&gt; {
			expect(deserialize(serialize(instance, params))).toEqual(instance);
		}
	)
));</code></pre>
						<p>
							Such property was able to detect bugs in both <em>js-yaml</em> and <em>query-string</em>
						</p>
						
					</div>
				</div>
			</section>
			<section>
				
				<div>
					<header>
						<h2>Reproducible</h2>
						<p>Replay the same test after a fix</p>
					</header>
				</div>
			</section>
			<section>
				<div>
					<div>
						<p>Whenever <em>fast-check</em> detects a problem, it will print an error message containing the settings required to replay the very same test</p>
						<pre><code>Error: Property failed after 1 tests (seed: 1527423434693, path: "0:0:0"): ["","",""]
Shrunk 2 time(s)
Got error: Property failed by returning false</code></pre>
						<p>
							Given this message the test can easily be replayed by using:
						</p>
						<pre><code>test('the failing test', () =&gt; fc.assert(
	fc.property(
		// some arbitraries... 
		// check method
	), { // seed and path taken from the error message
		seed: 1527423434693,
		path: "0:0:0"
	}
));</code></pre>
						<p>
							Setting both <em>seed</em> and <em>path</em> will replay the test starting with the latest failing case.
							If you want to replay the whole test suite, you should only set the <em>seed</em>
						</p>
						
					</div>
				</div>
			</section>
			<section>
				
				<div>
					<header>
						<h2>Shrink</h2>
						<p>Get a better understanding of the errors</p>
					</header>
				</div>
			</section>
			<section>
				<div>
					<div>
						<p>
							Whenever a test fails, <em>fast-check</em> will try to ease your investigations by providing you with the minimal failing case.
							Sometimes it is not enough and having all the failures might help.
							For this precise need, <em>fc.assert</em> accepts an optional configuration: <em>verbose: true</em>. 
						</p>
						<pre><code>test('the failing test', () =&gt; fc.assert(
	fc.property(
		// some arbitraries... 
		// check method
	), { verbose: true }
));</code></pre>
						<p>
							With this setting enabled the error message will look like:
						</p>
						<pre><code>Error: Property failed after 1 tests (seed: 1527423434693, path: 0:0:0): ["","",""]
Shrunk 2 time(s)
Got error: Property failed by returning false

Encountered failures were:
- ["","JeXPqIQ6","&gt;q"]
- ["","","&gt;q"]
- ["","",""]</code></pre>
						
					</div>
				</div>
			</section>
			
			<p><a href="https://github.com/dubzzz/fast-check"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
		</p></div></div>]]>
            </description>
            <link>https://dubzzz.github.io/fast-check.github.com/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26147011</guid>
            <pubDate>Mon, 15 Feb 2021 20:37:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Ramanujan Machine is an intellectual fraud (2019)]]>
            </title>
            <description>
<![CDATA[
Score 39 | Comments 16 (<a href="https://news.ycombinator.com/item?id=26144665">thread link</a>) | @spekcular
<br/>
February 15, 2021 | https://www.galoisrepresentations.com/2019/07/17/the-ramanujan-machine-is-an-intellectual-fraud/ | <a href="https://web.archive.org/web/*/https://www.galoisrepresentations.com/2019/07/17/the-ramanujan-machine-is-an-intellectual-fraud/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="post-4282">
					

					<!-- .entry-meta -->

					<div>
						<p><b>Edit (17/02/21)</b> I changed the title of this post which was unnecessarily incendiary.</p>
<p>There‚Äôs a lot that I like about how mathematics operates as a social discipline. We have a great respect for the history of the subject, which in particular includes acknowledging the work that has come before us. In the end, we ultimately agree that it is the mathematics which does the talking. Each of us has our own tastes (of course) and some of us are more prone to be excited about our own work than others, but we are remarkably free from bullshit (about the actual mathematics, at least). This is what all of science should aspire to.</p>
<p>Perhaps this is why I find the self-promotion surrounding the <a href="https://galoisrepresentations.wordpress.com/2019/07/07/en-passant-v/">Ramanujan Machine</a> so distasteful. (I wasn‚Äôt going to bother wasting any more time on this but here I am, last time I promise.) The idea of trying to automate methods for finding identities is an interesting one. But if want to claim that you have found something <i>new</i>, then some justification is required. For a start, you should at least be expected to do a cursory search of the literature. Perhaps you should even consult an expert? If the authors had been content to be more modest with their claims, merely explaining that automation was their main goal, and that they were merely <i>hopeful</i> to use these ideas to make new discoveries, I would have had no issue at all with their paper. Of course, nobody would have heard about the paper either. I already complained <a href="https://galoisrepresentations.wordpress.com/2019/07/07/en-passant-v/">last time</a> about the overblown rhetoric, but since then, my interactions with one of the authors indicated that the rot lies deeper still.</p>
<p>The author in question seemed happy (while listening to my previous complaints) to indicate that the novelty is not in producing new mathematics but in automatically generating formulas ‚Äúwithout knowing Gauss‚Äô work‚Äù. As I indicated above, that‚Äôs a reasonable and modest claim. But then, the same author will tweet out to the world the false claim that his program has discovered new and amazing mathematical conjectures. (A rather curious set of tweets to <a href="https://twitter.com/elonmusk">@elonmusk</a> <a href="https://twitter.com/yurimilner?lang=en">@yurimilner</a> <a href="https://twitter.com/stephen_wolfram">@stephen_wolfram</a> <a href="https://twitter.com/RHDijkgraaf">@RHDijkgraaf</a>; is the common thread people who have access to money that can be spent on math?)  Don‚Äôt imagine for a minute that this is not a deliberate and conscious decision: the <a href="https://phys.org/news/2019-07-ramanujan-machine-automatically-conjectures-fundamental.html">press</a> <a href="https://www.newscientist.com/article/2209213-computer-attempts-to-replicate-the-dream-like-maths-of-ramanujan/">stories</a> generated about ‚Äúautomating the insight of Ramanujan‚Äù don‚Äôt happen on their own ‚Äî they need the hook of ‚Äúexciting conjectures‚Äù to be ‚Äúnewsworthy‚Äù and this is exactly what has been peddled via a concerted publicity campaign. The best way to describe this entire story is as follows: this is what happens when you import <b>startup culture</b> into mathematics. Maybe such Janus-faced interactions are commonplace in Silicon Valley where qualifiers are merely a distraction from a good sales pitch. But it‚Äôs an utterly abhorrent mindset that I think mathematicians must strive to banish at all costs. In particular, the choice to deliberately obscure the fact that the program has generated (as yet) <i>nothing considered remotely new by an expert</i> while simultaneously boasting of a triumph in automating intuition is  absurd; Ramanujan would roll over in his grave.</p>
<p><b>Caveats:</b> The paper has a number of young authors who I consider completely blameless. The possibility of redemption still awaits in the next version of the paper. </p>
<p><b>Random Continued Fraction: </b>I give you one of the author‚Äôs lastest tweets, in which one of their amazing conjectures has been generalized! (By a 15 year old apparently, well done to him, I hope he doesn‚Äôt waste any more time on this). I‚Äôll spare you the <a href="https://twitter.com/yaronhadad/status/1150767039621062656?s=20">amazing gif</a> animation that builds up to this final climax:</p>
<p><a href="https://box2106.temp.domains/~galoisre///wp-content/uploads/2019/07/screen-shot-2019-07-16-at-2.41.59-pm.png"><img loading="lazy" src="https://box2106.temp.domains/~galoisre///wp-content/uploads/2019/07/screen-shot-2019-07-16-at-2.41.59-pm.png?w=300" alt="" width="495" height="371" srcset="https://www.galoisrepresentations.com/wp-content/uploads/2019/07/screen-shot-2019-07-16-at-2.41.59-pm.png 1086w, https://www.galoisrepresentations.com/wp-content/uploads/2019/07/screen-shot-2019-07-16-at-2.41.59-pm-300x225.png 300w, https://www.galoisrepresentations.com/wp-content/uploads/2019/07/screen-shot-2019-07-16-at-2.41.59-pm-768x577.png 768w, https://www.galoisrepresentations.com/wp-content/uploads/2019/07/screen-shot-2019-07-16-at-2.41.59-pm-1024x769.png 1024w" sizes="(max-width: 495px) 100vw, 495px"></a></p>
<p>Well ‚Ä¶ OK I guess? But, pretty much exactly as pointed out last time, not only is the proof only one line, but the nature of the proof makes clear exactly how unoriginal this is to mathematics:</p>
<p><a href="https://box2106.temp.domains/~galoisre///wp-content/uploads/2019/07/latestproof.png"><img loading="lazy" src="https://box2106.temp.domains/~galoisre///wp-content/uploads/2019/07/latestproof.png?w=300" alt="" width="615" height="201" srcset="https://www.galoisrepresentations.com/wp-content/uploads/2019/07/latestproof.png 1484w, https://www.galoisrepresentations.com/wp-content/uploads/2019/07/latestproof-300x98.png 300w, https://www.galoisrepresentations.com/wp-content/uploads/2019/07/latestproof-768x250.png 768w, https://www.galoisrepresentations.com/wp-content/uploads/2019/07/latestproof-1024x334.png 1024w" sizes="(max-width: 615px) 100vw, 615px"></a></p>
<p>(There is actually something vaguely interesting about how certain specializations of complicated identities are harder to prove than the original identities, but that is only tangentially relevant to this post.)</p>
											</div><!-- .entry-content -->

		
						<div><p>
							This entry was posted in <a href="https://www.galoisrepresentations.com/category/mathematics/" rel="category tag">Mathematics</a>, <a href="https://www.galoisrepresentations.com/category/rant/" rel="category tag">Rant</a> and tagged <a href="https://www.galoisrepresentations.com/tag/continued-fractions/" rel="tag">Continued Fractions</a>, <a href="https://www.galoisrepresentations.com/tag/de-fractionibus-continuis-observationes/" rel="tag">De fractionibus continuis observationes</a>, <a href="https://www.galoisrepresentations.com/tag/elon-musk/" rel="tag">Elon Musk</a>, <a href="https://www.galoisrepresentations.com/tag/euler/" rel="tag">Euler</a>, <a href="https://www.galoisrepresentations.com/tag/gauss/" rel="tag">Gauss</a>, <a href="https://www.galoisrepresentations.com/tag/intellectual-fraud/" rel="tag">Intellectual Fraud</a>, <a href="https://www.galoisrepresentations.com/tag/ramanujan/" rel="tag">Ramanujan</a>, <a href="https://www.galoisrepresentations.com/tag/robert-dijkgraaf/" rel="tag">Robert Dijkgraaf</a>, <a href="https://www.galoisrepresentations.com/tag/startup-culture/" rel="tag">startup culture</a>, <a href="https://www.galoisrepresentations.com/tag/stephen-wolfram/" rel="tag">Stephen Wolfram</a>, <a href="https://www.galoisrepresentations.com/tag/twitter/" rel="tag">twitter</a>, <a href="https://www.galoisrepresentations.com/tag/yuri-milner/" rel="tag">Yuri Milner</a>. Bookmark the <a href="https://www.galoisrepresentations.com/2019/07/17/the-ramanujan-machine-is-an-intellectual-fraud/" title="Permalink to The Ramanujan Machine is all hype" rel="bookmark">permalink</a>.													</p></div><!-- .entry-utility -->
					</div></div>]]>
            </description>
            <link>https://www.galoisrepresentations.com/2019/07/17/the-ramanujan-machine-is-an-intellectual-fraud/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26144665</guid>
            <pubDate>Mon, 15 Feb 2021 17:12:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Alien-Haunted World]]>
            </title>
            <description>
<![CDATA[
Score 21 | Comments 17 (<a href="https://news.ycombinator.com/item?id=26142795">thread link</a>) | @CapitalistCartr
<br/>
February 15, 2021 | http://m.nautil.us/blog/the-alien_haunted-world | <a href="https://web.archive.org/web/*/http://m.nautil.us/blog/the-alien_haunted-world">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
			

			<figure data-alt=""><img src="http://static.nautil.us/18165_825ab77fe4eb3419db2fc9c6ceff7146.jpg" width="733" alt=""><figcaption><span><i>To shield one‚Äôs pet hypothesis of an alien object by suggesting that it is not being taken seriously because of a flaw in how we do science is playing a disingenuous game with the facts.</i></span><span>Illustration by ktsdesign / Shutterstock</span></figcaption></figure><p><span>D</span>id you know that there are many scientists who devote their working lives to skillfully charting out the most unassuming chunks of our solar system‚Äîchunks that none of our species will likely never see up close? Chunks that, individually, are mere specks in the cloud of millions of such primordial planetary leftovers circling our sun. Or, are you aware that there are those who spend day after day wrestling with how to measure and decode the extraordinary orbital dances of unreachable exoplanets, or to detect and interpret the delicate spectra revealing the composition of alien atmospheres tens of trillions of miles away?</p><p>If not them, then what about those who have, for decades, tackled some of the most daunting questions about the phenomenon we call life itself, including how it began here on Earth billions of years ago, and how it might have begun anywhere else in the cosmos? And can you recall that there are devoted and talented scientists who pursue the exquisite possibility that somewhere there are alien minds sending out structured, information-rich signals, or repurposing their environments in ways that we‚Äîother scraps of thinking life‚Äîmight just be able to spot across the gaping void of interstellar space?</p><blockquote><p>Aliens may be out there. And we are looking for them.</p> </blockquote><p>If you could say yes to any of these questions, well done. You are a well-informed citizen of planet Earth, aware of humanity‚Äôs ongoing efforts to make sense of the nature of reality. If, on the other hand, you couldn‚Äôt respond in the affirmative then perhaps you wouldn‚Äôt blink an eye at newspaper articles or TV headlines asking why (oh why?!) scientists won‚Äôt take the task of ‚Äúlooking for aliens‚Äù more seriously? Or articles harrumphing about how conservative science is when it comes to ‚Äúthinking out of the box,‚Äù especially if the topic is one that‚Äôs been abused so many times over literally centuries that researchers now have little choice but to apply extreme care and caution.<br></p><p>I am, if you are not up on your science news at the moment, referring to a recent flurry of words and opinions that have been, in part, triggered by the publication of the book <i>Extraterrestrial</i> by the theoretical astrophysicist Avi Loeb, in which he attempts to make a case that a recent interstellar object passing through our solar system (<a href="https://nautil.us/blog/how-oumuamua-got-shredded" target="_blank">the ‚ÄòOumuamua object</a>) could have been a piece of technology, conceivably even a tumbling light sail from an alien spacecraft, rather than a piece of frozen rock and gas. Loeb also writes about how science can be overly conservative at times‚Äîaiming his complaints in particular on the reticence to elevate the question of alien life to a more prominent place in our hypotheses about what we see in the universe around us.</p><p>But you need only to have spent a little time recently in the hallways of scientific Zoom calls or on social media to see unhappiness being expressed by many researchers about all of this. That unhappiness reaches a red-hot level any time a new opinion piece gets published that picks up this particular thread. Most recently (at least as I write this), is the appearance in <i>The New York Times</i> of an <a href="https://www.nytimes.com/2021/02/11/opinion/aliens-extraterrestrial-life.html" target="_blank">opinion article</a> with the title ‚ÄúAliens Must Be Out There: Why aren‚Äôt we looking for them?‚Äù, written by the columnist Farhad Manjoo. I think it‚Äôs fair to say that the tone of the headline, erroneously suggesting that alien life exists because we think it must and that we‚Äôre not paying attention, reflects much of the thrust of the content. Reaching an apex of sorts when the piece uses Loeb‚Äôs thoughts on the matter to admonish science, and science-funding agencies, for their ‚Äúclosed-mindedness‚Äù and ‚Äúreflexive skepticism‚Äù when it comes to considering exotic (yes, alien) stuff in the mix for explaining new or unexpected cosmic phenomena.&nbsp;</p><p>What is so incredibly disappointing for a scientist like myself, and for so many of my colleagues across related disciplines‚Äîfrom astronomy to planetary science, to astrobiology‚Äîis that there are no other voices represented in this kind of writing. No snippets or quotes from the hundreds of scientists who are the world‚Äôs experts on matters like ‚ÄòOumuamua, or other extraterrestrial objects, from asteroids to comets to (yes) interstellar chunks, or the Search for Extraterrestrial Intelligence (SETI), or exoplanets, or indeed the very same quest for so-called technosignatures that is fleetingly mentioned. And this one article is by no means alone in that strange incompleteness, where ‚Äúdue diligence‚Äù seems to have gone out the window.</p><p>In reality there are people who do think about all of these scientific questions, week after week. They dig through mountains of data, and sweat blood over understanding the delicate nature of astronomical measurements and instrumentation. They build spacecraft to go to other worlds, as well as asteroids and comets, funded by national agencies like NASA, ESA, JAXA, CNSA, and more. These people are eager and driven, motivated by precisely these same extraterrestrial conundrums: Are we alone? Where do we, or any other life, come from?</p><p>These scientists, including those like the remarkable Jill Tarter‚Äîone of the driving forces and voices behind SETI for the past 40 years‚Äîhave pushed their instruments and skills to the absolute limits in the quest for evidence of extraterrestrial life. Often in the face of intense skepticism. Despite this effort, there has been no evidence to date of extraterrestrial life. But that lack of evidence is not because the scientific enterprise is uniformly conservative, rigid, and close-minded, as implied by Loeb and uncritically echoed by some columnists. It‚Äôs because no discovery or event has risen to the level where it is inexplicable in any other way. Could greater funding and support change that story? Perhaps, but the same could be said for almost any other ambitious scientific enterprise, and the answer cannot be known beforehand.</p><p>A proposal that a phenomenon like ‚ÄòOumuamua is an alien artifact is certainly going to meet push-back. But that push-back is well founded. It results from the extensive work of scientific experts on precisely this kind of interstellar visitor. Our models of star and planet formation have long hypothesized the existence of leftover pieces of solid material (planetesimals) that could spend eons moving across interstellar space. They have outlined how an interloper like ‚ÄòOumuamua would be a stunning discovery. But it would be a stunning discovery reflecting natural processes; reservoirs of these planetesimals‚Äîalready suggested by the hazy light seen around certain other stars‚Äîthat can be ejected and scattered across interstellar space in numbers that may be perfectly consistent with the chances of our solar system being visited by one. This is precisely why an agency like ESA is developing its <a href="https://www.cometinterceptor.space/" target="_blank">Comet Interceptor Mission</a>, to be ready to chase future interstellar visitors.</p><div id="inpagesub">
	<p>Get the <span>Nautilus</span> newsletter</p>
<p>
	The newest and most popular articles delivered right to your inbox!
</p>
			<!-- Begin MailChimp Signup Form -->
			




</div><p>‚ÄòOumuamua certainly had puzzling characteristics. It was small for an interstellar comet, it was elongated and, despite being barely caught by our best telescopes and nimblest astronomers as it wended its tumbling way back out of the solar system, it exhibited an ethereal acceleration away from the Sun. But even these puzzles are explicable by known processes and are not wildly inconsistent with the properties of other cometary-like objects. Indeed, a number of comparatively straightforward, testable, explanations seem compatible, <a href="https://www.hou.usra.edu/meetings/lpsc2021/pdf/1718.pdf" target="_blank">including the possibility</a> that the object was a frozen nitrogen ‚Äúiceberg,‚Äù a chip off the block of some distant Pluto-like world.&nbsp;</p><p>In light of all of this rigorous insight, to shield one‚Äôs pet hypothesis of an alien object by suggesting that it is not being taken seriously because of a flaw in how we do science is playing a disingenuous game with the facts. As is to suggest that this is actually in aid of raising support for the search for extraterrestrial life. For that to be uncritically echoed elsewhere is truly unfortunate.</p><p>As in any human intellectual endeavor, there are many voices, many insights. It‚Äôs too bad that not all insights get the same kind of airtime. If they did, we‚Äôd be hearing so much more about the extraordinary ongoing scientific efforts‚Äîboth institutional and personal‚Äîto open up our minds, to explore new worlds, and perhaps discover new life. Are we all carrying out these efforts perfectly? No. Scientific conservatism is present. But so too is a clear memory of the many times where enthusiasm for a provocative idea about alien life has given way to disappointment‚Äîfrom fossils in Martian meteorites to arsenic-laced microbes. Fingers have been burnt before in the quest to find clues to life in the universe.&nbsp;</p><p>They weren‚Äôt burned because of misplaced skepticism though. A wide range of scientists did their own due diligence: scrutinizing a hypothesis, gathering more data, weighing the evidence and building their confidence in a conclusion. Science denialism has cursed many cultures in recent years. Thankfully it looks to be receding somewhat. But being blind to how science works and what it‚Äôs doing is also a form of denialism. Aliens may be out there. And we are looking for them.</p><p><i>Caleb Scharf is an astrophysicist and the director of astrobiology at Columbia University in New York. His latest book is&nbsp;</i>The Ascent of Information: Books, Bits, Genes, Machines, and Life‚Äôs Unending Algorithm<i>, coming in June 2021.&nbsp;Follow him on Twitter @caleb_scharf.</i></p>

		</div></div>]]>
            </description>
            <link>http://m.nautil.us/blog/the-alien_haunted-world</link>
            <guid isPermaLink="false">hacker-news-small-sites-26142795</guid>
            <pubDate>Mon, 15 Feb 2021 13:59:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[An Improved Thread with C++20]]>
            </title>
            <description>
<![CDATA[
Score 65 | Comments 56 (<a href="https://news.ycombinator.com/item?id=26142257">thread link</a>) | @ibobev
<br/>
February 15, 2021 | http://modernescpp.com/index.php/an-improved-thread-with-c-20 | <a href="https://web.archive.org/web/*/http://modernescpp.com/index.php/an-improved-thread-with-c-20">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="blogContent">
				<p><code>std::jthread</code> stands for joining thread. In addition to <code>std::thread</code> (C++11),<code> std::jthread</code> automatically joins in its destructor and can cooperatively be interrupted. Read in this post to know why <code>std::jthread</code> should be your first choice.</p>

<p>&nbsp;<img src="http://modernescpp.com/images/blog/Cpp20/jthread/TimelineCpp20.png" alt="TimelineCpp20" width="650" height="227"></p>
<p>The following table gives you a concise overview of the functionality of <code>std::jthread</code>.</p>
<p><img src="http://modernescpp.com/images/blog/Cpp20/jthread/jthread.png" alt="jthread" width="650" height="572"></p>

<p>For additional details, please refer to <a href="https://en.cppreference.com/w/cpp/thread/jthread">cppreference.com</a>. When you want to read more post about <code>std::thread</code>, here are they: <a href="http://modernescpp.com/index.php/der-einstieg-in-modernes-c#h1-2-the-threading-interface">my post about std::thread.</a></p>
<p>First, why do we need an improved thread in C++20? Here is the first reason.</p>
<h2 id="h1-automatically-joining">Automatically Joining</h2>
<p>This is the <strong>non-intuitive</strong> behavior of <code>std::thread</code>. If a <code>std::thread</code> is still joinable, <a href="https://en.cppreference.com/w/cpp/error/terminate">std::terminate</a> is called in its destructor. A thread<code> thr</code> is joinable if neither <code>thr.join()</code> nor <code>thr.detach()</code> was called. Let me show, what that means.</p>
<!-- HTML generated using hilite.me -->
<div>
<pre><span>// threadJoinable.cpp</span>

<span>#include &lt;iostream&gt;</span>
<span>#include &lt;thread&gt;</span>

<span>int</span> <span>main</span>() {
    
    std<span>::</span>cout <span>&lt;&lt;</span> <span>'\n'</span>;
    std<span>::</span>cout <span>&lt;&lt;</span> std<span>::</span>boolalpha;
    
    std<span>::</span><span>thread</span> thr{[]{ std<span>::</span>cout <span>&lt;&lt;</span> <span>"Joinable std::thread"</span> <span>&lt;&lt;</span> <span>'\n'</span>; }};
    
    std<span>::</span>cout <span>&lt;&lt;</span> <span>"thr.joinable(): "</span> <span>&lt;&lt;</span> thr.joinable() <span>&lt;&lt;</span> <span>'\n'</span>;
    
    std<span>::</span>cout <span>&lt;&lt;</span> <span>'\n'</span>;
    
}
</pre>
</div>

<p>When executed, the program terminates when the local object <code>thr</code> goes out of scope.</p>
<p><img src="http://modernescpp.com/images/blog/Cpp20/jthread/threadJoinable.png" alt="threadJoinable" width="500" height="279"></p>
<p>Both executions of<code> std::thread</code> terminate. In the second run, the thread <code>thr</code> has enough time to display its message:&nbsp;<code>Joinable std::thread</code>.</p>
<p>In the next example, I use <code>std::jthread</code> from the C++20 standard.</p>
<!-- HTML generated using hilite.me -->
<div>
<pre><span>// jthreadJoinable.cpp</span>

<span>#include &lt;iostream&gt;</span>
<span>#include &lt;thread&gt;</span>

<span>int</span> <span>main</span>() {
    
    std<span>::</span>cout <span>&lt;&lt;</span> <span>'\n'</span>;
    std<span>::</span>cout <span>&lt;&lt;</span> std<span>::</span>boolalpha;
    
    std<span>::</span>jthread thr{[]{ std<span>::</span>cout <span>&lt;&lt;</span> <span>"Joinable std::thread"</span> <span>&lt;&lt;</span> <span>'\n'</span>; }};
    
    std<span>::</span>cout <span>&lt;&lt;</span> <span>"thr.joinable(): "</span> <span>&lt;&lt;</span> thr.joinable() <span>&lt;&lt;</span> <span>'\n'</span>;
    
    std<span>::</span>cout <span>&lt;&lt;</span> <span>'\n'</span>;
    
}
</pre>
</div>

<p>Now, the thread<code> thr</code> automatically joins in its destructor if it's still joinable such as in this case.</p>
<p><img src="http://modernescpp.com/images/blog/Cpp20/jthread/jthreadJoinable.png" alt="jthreadJoinable" width="350" height="177"></p>
<p>But this is not all that<code> std::jthread</code>&nbsp; provides additionally to <code>std::thread</code>. A <code>std::jthread</code> can be cooperatively interrupted. I already presented the general ideas of cooperative interruption in my last post: <a href="http://modernescpp.com/index.php/cooperative-interruption-of-a-thread-in-c-20">Cooperative Interruption of a Thread in C++20</a>.</p>
<h2 id="h2-cooperative-interruption-of-a-std-jthread">Cooperative Interruption of a<code> std::jthread</code></h2>
<p>To get a general idea, let me present a simple example.</p>
<!-- HTML generated using hilite.me -->
<div>
<pre><span>// interruptJthread.cpp</span>

<span>#include &lt;chrono&gt;</span>
<span>#include &lt;iostream&gt;</span>
<span>#include &lt;thread&gt;</span>

<span>using</span> <span>namespace</span><span>::</span>std<span>::</span>literals;

<span>int</span> <span>main</span>() {
    
    std<span>::</span>cout <span>&lt;&lt;</span> <span>'\n'</span>;
    
    std<span>::</span>jthread nonInterruptable([]{                           <span>// (1)</span>
        <span>int</span> counter{<span>0</span>};
        <span>while</span> (counter <span>&lt;</span> <span>10</span>){
            std<span>::</span>this_thread<span>::</span>sleep_for(<span>0.2</span>s);
            std<span>::</span>cerr <span>&lt;&lt;</span> <span>"nonInterruptable: "</span> <span>&lt;&lt;</span> counter <span>&lt;&lt;</span> <span>'\n'</span>; 
            <span>++</span>counter;
        }
    });
    
    std<span>::</span>jthread interruptable([](std<span>::</span>stop_token stoken){     <span>// (2)</span>
        <span>int</span> counter{<span>0</span>};
        <span>while</span> (counter <span>&lt;</span> <span>10</span>){
            std<span>::</span>this_thread<span>::</span>sleep_for(<span>0.2</span>s);
            <span>if</span> (stoken.stop_requested()) <span>return</span>;               <span>// (3)</span>
            std<span>::</span>cerr <span>&lt;&lt;</span> <span>"interruptable: "</span> <span>&lt;&lt;</span> counter <span>&lt;&lt;</span> <span>'\n'</span>; 
            <span>++</span>counter;
        }
    });
    
    std<span>::</span>this_thread<span>::</span>sleep_for(<span>1</span>s);
    
    std<span>::</span>cerr <span>&lt;&lt;</span> <span>'\n'</span>;
    std<span>::</span>cerr <span>&lt;&lt;</span> <span>"Main thread interrupts both jthreads"</span> <span>&lt;&lt;</span> <span>'\n'</span>;
    nonInterruptable.request_stop();
    interruptable.request_stop();                              <span>// (4)</span>
    
    std<span>::</span>cout <span>&lt;&lt;</span> <span>'\n'</span>;
    
}
</pre>
</div>

<p>In the main program, I start the two threads <code>nonInterruptable</code> and interruptable (lines 1)and 2). Unlike in the thread <code>nonInterruptable</code> , the thread <code>interruptable</code> gets a <code>std::stop_token</code> and uses it in line (3) to check if it was interrupted: <code>stoken.stop_requested()</code>. In case of a stop request, the lambda function returns, and, therefore, the thread ends. The call <code>interruptable.request_stop()</code> (line 4) triggers the stop request. This does not hold for the previous call <code>nonInterruptable.request_stop()</code> . The call has no effect.</p>
<p><img src="http://modernescpp.com/images/blog/Cpp20/jthread/interruptJthread.png" alt="interruptJthread" width="400" height="382"></p>
<p>To make my post complete, with C++20, you can also cooperatively interrupt a condition variable.</p>
<h2 id="h3-new-wait-overloads-for-std-condition-variable-any">New wait Overloads for <code>std::condition_variable_any</code></h2>
<p>Before I write about <code>std::condition_variable_any</code>, here are my post about <a href="http://modernescpp.com/index.php/tag/condition-variable">condition variables</a>.&nbsp;</p>
<p>The three wait variations <code>wait, wait_for</code>, and<code> wait_until</code> of the std::condition_variable_any get new overloads. These overloads take a <code>std::stop_token</code>.</p>
<!-- HTML generated using hilite.me -->
<div>
<pre><span>template</span> <span>&lt;</span><span>class</span> <span>Predicate</span><span>&gt;</span>
<span>bool</span> wait(Lock<span>&amp;</span> lock,  
          stop_token stoken,
          Predicate pred);

<span>template</span> <span>&lt;</span><span>class</span> <span>Rep</span>, <span>class</span> <span>Period</span>, <span>class</span> <span>Predicate</span><span>&gt;</span>
<span>bool</span> wait_for(Lock<span>&amp;</span> lock, 
              stop_token stoken, 
              <span>const</span> chrono<span>::</span>duration<span>&lt;</span>Rep, Period<span>&gt;&amp;</span> rel_time, 
              Predicate pred);
                
<span>template</span> <span>&lt;</span><span>class</span> <span>Clock</span>, <span>class</span> <span>Duration</span>, <span>class</span> <span>Predicate</span><span>&gt;</span>
<span>bool</span> wait_until(Lock<span>&amp;</span> lock, 
                stop_token stoken,
                <span>const</span> chrono<span>::</span>time_point<span>&lt;</span>Clock, Duration<span>&gt;&amp;</span> abs_time, 
                Predicate pred);
</pre>
</div>

<p>These new overloads need a predicate. The presented versions ensure to get notified if a stop request for the passed <code>std::stop_token stoken</code> is signaled. They return a boolean that indicates whether the predicate evaluates to <code>true</code>. This returned boolean is independent of whether a stop was requested or of whether the timeout was triggered.</p>
<p>After the wait calls, you can check if a stop request occurred.</p>
<!-- HTML generated using hilite.me -->
<div>
<pre>cv.wait(lock, stoken, predicate);
<span>if</span> (stoken.stop_requested()){
    <span>// interrupt occurred</span>
}
</pre>
</div>

<p>The following example shows the usage of a condition variable with a stop request.</p>
<!-- HTML generated using hilite.me -->
<div>
<pre><span>// conditionVariableAny.cpp</span>

<span>#include &lt;condition_variable&gt;</span>
<span>#include &lt;thread&gt;</span>
<span>#include &lt;iostream&gt;</span>
<span>#include &lt;chrono&gt;</span>
<span>#include &lt;mutex&gt;</span>
<span>#include &lt;thread&gt;</span>

<span>using</span> <span>namespace</span> std<span>::</span>literals;

std<span>::</span>mutex mutex_;
std<span>::</span>condition_variable_any condVar;

<span>bool</span> dataReady;

<span>void</span> <span>receiver</span>(std<span>::</span>stop_token stopToken) {                 <span>// (1)</span>

    std<span>::</span>cout <span>&lt;&lt;</span> <span>"Waiting"</span> <span>&lt;&lt;</span> <span>'\n'</span>;

    std<span>::</span>unique_lock<span>&lt;</span>std<span>::</span>mutex<span>&gt;</span> lck(mutex_);
    <span>bool</span> ret <span>=</span> condVar.wait(lck, stopToken, []{<span>return</span> dataReady;});
    <span>if</span> (ret){
        std<span>::</span>cout <span>&lt;&lt;</span> <span>"Notification received: "</span> <span>&lt;&lt;</span> <span>'\n'</span>;
    }
    <span>else</span>{
         std<span>::</span>cout <span>&lt;&lt;</span> <span>"Stop request received"</span> <span>&lt;&lt;</span> <span>'\n'</span>;
    }
}

<span>void</span> <span>sender</span>() {                                            <span>// (2)</span>

    std<span>::</span>this_thread<span>::</span>sleep_for(<span>5</span>ms);
    {
        std<span>::</span>lock_guard<span>&lt;</span>std<span>::</span>mutex<span>&gt;</span> lck(mutex_);
        dataReady <span>=</span> <span>true</span>;
        std<span>::</span>cout <span>&lt;&lt;</span> <span>"Send notification"</span>  <span>&lt;&lt;</span> <span>'\n'</span>;
    }
    condVar.notify_one();                                  <span>// (3)</span>

}

<span>int</span> <span>main</span>(){

  std<span>::</span>cout <span>&lt;&lt;</span> <span>'\n'</span>;

  std<span>::</span>jthread t1(receiver);
  std<span>::</span>jthread t2(sender);
  
  t1.request_stop();                                       <span>// (4)</span>

  t1.join();
  t2.join();

  std<span>::</span>cout <span>&lt;&lt;</span> <span>'\n'</span>;
  
}
</pre>
</div>

<p>The receiver thread (line 1) is waiting for the notification of the sender thread (line 2). Before the sender thread sends its notification (line 3), the main thread triggered a stop request in<br>line (4). The output of the program shows that the stop request happened before the notification.</p>
<h2><img src="http://modernescpp.com/images/blog/Cpp20/jthread/conditionVariableAny.png" alt="conditionVariableAny" width="281" height="113"></h2>
<h2 id="h4-what-s-next">What's next?</h2>
<p>What happens when your write without synchronization to <code>std::cout</code>? You get a mess. Thanks to C++20, we have synchronized output streams.</p>
<div>
	<p><strong>Thanks a lot to my <a href="https://www.patreon.com/rainer_grimm">Patreon Supporters</a></strong><strong>: Matt Braun, Roman Postanciuc, Tobias Zindl, Marko, </strong><span title="Emyr Williams"><strong>G Prvulovic, Reinhold Dr√∂ge, Abernitzke,</strong> </span><strong><span title="Emyr Williams">Frank Grimm</span></strong><span title="Emyr Williams"><strong>, Sakib, Broeserl, </strong></span><strong><span title="Emyr Williams">Ant√≥nio Pina, Darshan Mody, Sergey Agafyin, <span data-tag="user-details-full-name">–ê–Ω–¥—Ä–µ–π –ë—É—Ä–º–∏—Å—Ç—Ä–æ–≤, Jake, GS, Lawton Shoemake, Animus24, Jozo Leko, John Breland, espkk, Wolfgang G√§rtner</span></span><span title="Emyr Williams"><span><span></span></span></span>,&nbsp; Louis St-Amour, Stephan Roslen, Venkat Nandam, Jose Francisco, Douglas Tinkham, Kuchlong Kuchlong, Avi Kohn, Robert Blanch, Truels Wissneth, Kris Kafka, Mario Luoni, Neil Wang, Friedrich Huber, lennonli, Pramod Tikare Muralidhara, Peter Ware, and Tobi Heideman.<br></strong></p>

<p><strong>Thanks in particular to Jon Hess, Lakshman,</strong> <strong>Christian Wittenhorst, Sherhy Pyton, Dendi Suhubdy, Sudhakar Belagurusamy, and Richard Sargeant.<br></strong></p>
<p>My special thanks to <a href="https://www.embarcadero.com/de/products/cbuilder">Embarcadero</a> <a href="https://www.embarcadero.com/products/cbuilder"><img src="http://modernescpp.com/images/Embarcadero/CBUIDER_STUDIO_FINAL_ICONS_1024_Small.png" alt="CBUIDER STUDIO FINAL ICONS 1024 Small" width="100" height="100"></a></p>

<h2>Seminars</h2>
<p>I'm happy to give online-seminars or face-to-face seminars world-wide. Please call me if you have any questions.</p>
<h3>Bookable (Online)</h3>
<h4>Deutsch</h4>
<ul>
<li><a href="https://www.modernescpp.de/index.php/c/2-c/30-embedded-programmierung-mit-modernem-c20210126195655">Embedded Programmierung mit modernem C++: </a>12.04.2021 - 14.04.2021 (9:00 - 17:00 CEST)</li>
<li><a href="https://www.modernescpp.de/index.php/c/2-c/31-clean-code-mit-modernem-c">Clean Code mit modernem C++: </a>22.06.2021 - 24.06.2021 (9:00 - 17:00 CEST)</li>
</ul>
<h4>English</h4>
<ul>
<li>Workshop: <a href="https://www.modernescpp.net/index.php/c/2-c/32-workshop-concepts-in-c-20">Concepts in C++20</a>: 22.03.2021 (17:00 - 21:00 CET)</li>
<li>Workshop: <a href="https://www.modernescpp.net/index.php/c/2-c/33-workshop-coroutines-in-c-20">Coroutines in C++20</a>: 06.04.2021 (17:00 - 21:00 CEST)</li>
</ul>
<h3>Standard Seminars&nbsp;</h3>
<p>Here is a compilation of my standard seminars. These seminars are only meant to give you a first orientation.</p>
<ul>
<li><a href="https://www.modernescpp.net/index.php/c/plan/2-c/22">C++ - The Core Language</a></li>
<li><a href="https://www.modernescpp.net/index.php/c/plan/2-c/23">C++ - The Standard Library</a></li>
<li><a href="https://www.modernescpp.net/index.php/c/plan/2-c/23">C++ - Compact</a></li>
<li><a href="https://www.modernescpp.net/index.php/c/plan/2-c/18">C++11 and C++14</a></li>
<li><a href="https://www.modernescpp.net/index.php/c/plan/2-c/19">Concurrency with Modern C++</a></li>
<li><a href="https://www.modernescpp.net/index.php/c/plan/2-c/21">Design Patterns and Architecture Patterns with C++</a></li>
<li><a href="https://www.modernescpp.net/index.php/c/plan/2-c/17">Embedded Programming with Modern C++</a></li>
<li><a href="https://www.modernescpp.net/index.php/c/plan/2-c/17">Generic Programming (Templates) with C++</a></li>
</ul>
<h4>New</h4>
<ul>
<li><a href="https://www.modernescpp.net/index.php/c/plan/2-c/16">Clean Code with Modern C++</a></li>
<li><a href="https://www.modernescpp.net/index.php/c/plan/2-c/25">C++20</a></li>
</ul>
<h3>Contact Me</h3>
<ul>
<li>Tel.: +49 7472 917441</li>
<li>Mobil: +49 152 31965939</li>
<li>Mail: <a href="http://modernescpp.com/%3Ca%20href="><span id="cloak711deca1f1676f1347d6121b5076daf6">This email address is being protected from spambots. You need JavaScript enabled to view it.</span></a></li>
<li>German Seminar Page: <a href="https://www.modernescpp.de/">www.ModernesCpp.de</a></li>
<li>English Seminar Page: <a href="http://www.modernescpp.net/">www.ModernesCpp.net</a></li>
</ul>
<h3>Modernes C++,</h3>
<p><img src="http://modernescpp.com/images/signatur/RainerGrimmSmall.png" alt="RainerGrimmSmall"></p>
</div>


			</div></div>]]>
            </description>
            <link>http://modernescpp.com/index.php/an-improved-thread-with-c-20</link>
            <guid isPermaLink="false">hacker-news-small-sites-26142257</guid>
            <pubDate>Mon, 15 Feb 2021 12:55:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Running Nomad for a Home Server]]>
            </title>
            <description>
<![CDATA[
Score 264 | Comments 135 (<a href="https://news.ycombinator.com/item?id=26142005">thread link</a>) | @elliebike
<br/>
February 15, 2021 | https://mrkaran.dev/posts/home-server-nomad/ | <a href="https://web.archive.org/web/*/https://mrkaran.dev/posts/home-server-nomad/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>

<section>
    
    <article>
        <p>It's been a long time since I've written a post on Hydra (my home server). I use Hydra as a testbed to learn new tools, workflows and it just gives me joy to self-host applications while learning something in return.</p>
<h2 id="history">History</h2>
<p>A brief history of how <a href="https://github.com/mr-karan/hydra">Hydra's</a> setup evolved over time:</p>
<p><a href="https://mrkaran.dev/posts/home-server-setup/">2019</a>: </p>
<ul>
<li>A pretty minimal K3s setup deployed on 2 RPi4 nodes. I couldn't continue with this setup because:
<ul>
<li>Some of the apps didn't have ARM-based image (this was 2019, pre M1 hype era).</li>
<li>Didn't want to risk deploying persistent workloads on RPi.</li>
<li>A lot of tooling to deploy workloads was missing (storing env variables for eg.).</li>
<li>It was so boring to write YAML (that I also did at work). Didn't give me joy.</li>
</ul>
</li>
</ul>
<p><a href="https://mrkaran.dev/posts/home-server-updates/">2020 First Half</a>:</p>
<ul>
<li>RPi 2x Nodes + K3s + DO Droplet. Tailscale for networking.
<ul>
<li>This was a considerable step up from the previous setup. I deployed a DO node and added <a href="https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes/">Node Labels</a> to deploy persistent workloads on DO Node only.</li>
<li>I used my own tooling <a href="https://github.com/mr-karan/kubekutr/">Kubekutr</a> + Kustomize which helped with version control of my configs.</li>
<li>Took quite a bit of time to onboard new services. Got lazy, didn't host much apart from initial 3-4 applications.</li>
<li>Writing long YAMLs. No joy.</li>
</ul>
</li>
</ul>
<p>2020 Second Half:</p>
<ul>
<li>Single node on DO. Terraform for deploying Docker containers.
<ul>
<li>I believe the third iteration nailed it for me. I kept the setup super simple, used Terraform for deploying workloads as Docker containers.</li>
<li>Used Terraform extensively for setting up the node, Cloudflare records, DO firewall rules.</li>
<li>Time to onboard new services reduced from a couple of hours to a few minutes. This was a huge win for me. I deployed around 10-15 new services to try it out on the server directly.</li>
<li>Writing HCL is actually a much better experience than YAML.</li>
</ul>
</li>
</ul>
<h2 id="why-nomad">Why Nomad</h2>
<p><img src="https://mrkaran.dev/images/nomad-hydra.png" alt="image"></p>
<p>Around a month back, <a href="https://nadh.in/">Kailash</a> had asked about feedback on <a href="https://www.nomadproject.io/">Nomad</a>. We at <a href="https://zerodha.com/">Zerodha</a> (India's largest stock broker) are evaluating it to migrate our services to Nomad from Kubernetes (more on this later). It was almost 2 years since I last saw Nomad so it was definitely worth re-evaluating (esp since it hit 1.0 recently). I wanted to try out Nomad to answer a personal curiosity: <em>What does it do differently than Kubernetes?</em> No better way than actually getting hands dirty, right?!</p>
<p>After following the brief tutorials from the <a href="https://learn.hashicorp.com/nomad">official website</a> I felt confident to try it for actual workloads. In my previous setup, I was hosting quite a few applications (Pihole, Gitea, Grafana etc) and thought it'll be a nice way to learn how Nomad works by deploying the same services in the Nomad cluster. And I came in with zero expectations, I already had a nice setup which was reliable and running for me. My experience with a local Nomad cluster was joyful, I was able to quickly go from 0-&gt;1 in less than 30 minutes. This BTW is a strong sign of how easy Nomad is to get started with as compared to K8s. The sheer amount of different concepts you've to register in your mind before you can even deploy a single container in a K8s cluster is bizarre. Nomad takes the easy way out here and simplified the concepts for developers into just three things:</p>
<pre><code><span>job
  \_ group
        \_ task
</span></code></pre>
<ul>
<li>Job: Job is a collection of different groups. Job is where the constraints for type of scheduler, update strategies and ACL is placed. </li>
<li>Group: Group is a collection of different tasks. A group is always executed on the same Nomad client node. You'll want to use Groups for use-cases like a logging sidecar, reverse proxies etc.</li>
<li>Task: Atomic unit of work. A task in Nomad can be running a container/binary/Java VM etc, defining the mount points, env variables, ports to be exposed etc.</li>
</ul>
<p>If you're coming from K8s you can think of Task as a Pod and Group as a Replicaset. There's no equivalent to Job in K8s. BUT! The coolest part? You don't have to familiarise yourself with all different types of Replicasets (Deployments, Daemonsets, Statefulsets) and different ways of configuring them.</p>
<p>Want to make a normal job as a periodic job in Nomad? Simply add the following block to your existing Job:</p>
<pre><code><span>periodic {
  cron = "@daily"
}
</span></code></pre>
<p>You want to make a service run as a batch job (on all Nomad nodes -- the equivalent of Daemonset in K8s)? Simply make the following change to your existing job:</p>
<pre><code><span>-type="service"
</span><span>+type="batch"
</span></code></pre>
<p>You see <strong>this</strong> is what I mean by the focus on UX. There are many many such examples which will leave a nice smile on your face if you're coming from K8s background.</p>
<p>I'd recommend reading <a href="https://www.nomadproject.io/docs/internals/architecture">Internal Architecture</a> of Nomad if you want to understand this in-depth.</p>
<h2 id="architecture">Architecture</h2>
<p>Tech stack for Hydra:</p>
<ul>
<li>Tailscale VPN: Serves as a mesh layer between my laptop/mobile and DO server. Useful for exposing internal services.</li>
<li>Caddy for reverse proxying and automatic SSL setup for all services. I run 2 instances of Caddy:
<ul>
<li>Internal: Listens on Tailscale Network Interface. Reverse proxies all private services.</li>
<li>Public: Listens on DO's Public IPv4 network interface. Reverse proxies all public-facing services.</li>
</ul>
</li>
<li>Terraform: Primary component to have IaC (Infra as Code). Modules to manage:
<ul>
<li>Cloudflare DNS Zone and Records</li>
<li>DO Droplet, Firewall rules, SSH Keys, Floating IPs etc.</li>
<li>Nomad Jobs. Used for running workloads after templating env variables, config files in Nomad job files.</li>
</ul>
</li>
</ul>
<h2 id="complexity-of-nomad-vs-kubernetes">Complexity of Nomad vs Kubernetes</h2>
<p><a href="https://twitter.com/mrkaran_/status/1268762357355823104"><img src="https://mrkaran.dev/images/k8s-meme.jpeg" alt="image"></a></p>
<p>Nomad shines because it follows the UNIX philosophy of "Make each program do one thing well". To put simply, Nomad is <em>just</em> a workload orchestrator. It only is concerned about things like Bin Packing, scheduling decisions.</p>
<p>If you're running heterogeneous workloads, running a server (or a set of servers) quickly becomes expensive. Hence orchestrators tend to make sense in this context. They tend to save costs by making it efficient to run a vast variety of workloads. This is all an orchestrator has to do really. </p>
<p>Nomad doesn't interfere in your DNS setup, Service Discovery, secrets management mechanisms and pretty much anything else. If you read some of the posts at <a href="https://k8s.af/">Kubernetes Failure Stories</a>, the most common reason for outages is Networking (DNS, ndots etc). A lot of marketing around K8s never talks about these things.</p>
<p>I always maintain "Day 0 is easy, Day N is the real test of your skills". Anyone can deploy a workload to a K8s cluster, it's always the Day N operations which involve debugging networking drops, mysterious container restarts, proper resource allocations and other such complex issues that require real skills <strong>and</strong> effort. It's not as easy as <code>kubectl apply -f</code> and my primary gripe is with people who miss out on this in their "marketing" pitches (obvious!).</p>
<h2 id="when-to-use-nomad">When to use Nomad</h2>
<p>Nomad hits the sweet spot of being operationally easy and functional. Nomad is a great choice if you want to:</p>
<ul>
<li>Run not just containers but other forms of workloads.</li>
<li>Increase developer productivity by making it easier to deploy/onboard new services.</li>
<li>Consistent experience of deployment by testing the deployments locally.</li>
<li>(Not joking) You are tired of running Helm charts or writing large YAML manifests. The config syntax for Nomad jobs is human friendly and easy to grasp.</li>
</ul>
<p>Nomad is available as a single binary. If you want to try it locally, all you need is <code>sudo nomad agent -dev</code> and you'll have a Nomad Server, Client running in dev mode along with a UI. This makes it easy for the developers to test out the deployments locally because there's very little configuration difference between this and production deployment. Not to forget it's super easy to self-host Nomad clusters. I'm yet to meet anyone who self hosts K8s clusters in production without a dedicated team babysitting it always.</p>
<p>Once you eliminate the "blackbox" components from your stack, life becomes easier for everyone.</p>
<h2 id="when-to-not-use-nomad">When to not use Nomad</h2>
<ul>
<li>If you're relying on custom controllers and operators. <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/operator/">Operator Pattern</a> is a new way of managing large complex distributed systems (like databases, job queues etc). There are a lot of community built operators which help in reducing the effort to run these services. However, all of these are tied deeply into the "Kubernetes" ecosystem. If you find yourself running any of such operators, it'll be tough (not impossible) to translate the same in Nomad ecosystem.</li>
</ul>
<p>I <em>genuinely</em> cannot think of any other reason to not use Nomad!</p>
<h2 id="practical-scenarios">Practical Scenarios</h2>
<p>Since I migrated a couple of workloads from my DO docker containers setup to Nomad, I'd demonstrate a few use cases which might be helpful if you want to start migrating your services to Nomad</p>
<h3 id="accessing-a-web-service-with-reverse-proxy">Accessing a Web service with Reverse Proxy</h3>
<p>Context: I'm running Caddy as a reverse proxy for all the services. Since we discussed earlier, Nomad <strong>only</strong> is concerned about scheduling, so how exactly do you do Service Discovery? You need Consul (or something like Consul, Nomad has no hard restrictions) to register a service name with it's IP Address. Here's how you can do that:</p>
<p>In the <code>.task</code> section of your Nomad job spec, you need to register the service name with the port you're registering and additional tags as metadata (optional):</p>
<pre><code><span>service {
  name = "gitea-web"
  tags = ["gitea", "web"]
  port = "http"
}
</span></code></pre>
<p>Nomad's <a href="https://www.nomadproject.io/docs/job-specification/template">template</a> uses <code>consul-template</code> behind the scenes. This is a small utility which continuously watches for Consul/Vault keys and provides the ability to reload/restart your workloads if any of those keys change. It can also be used to <em>discover</em> the address of the service registered in Consul. So here's an example of <code>Caddyfile</code> using Consul Template functions to pull the IP address of the upstream <code>gitea-web</code> service:</p>
<pre><code><span>git.mrkaran.dev {
    {{ range service "gitea-web" }}
    reverse_proxy {{ .Address }}:{{ .Port }}
    {{ end }}
}
</span></code></pre>
<p>When a job is submitted to Nomad, a rendered template is mounted inside the container. You can define actions on what to do when the values change. For eg on a redeployment of Gitea container, the address will most likely change. We'd like Caddy to automatically restart with the new address configured in the Caddyfile in that case:</p>
<pre><code><span>template {
  data = &lt;&lt;EOF
${caddyfile_public}
EOF

  destination = "configs/Caddyfile" # Rendered template.

  change_mode = "restart"
}
</span></code></pre>
<p>Using <a href="https://www.nomadproject.io/docs/job-specification/template#change_mode"><code>change_m‚Ä¶</code></a></p></article></section></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://mrkaran.dev/posts/home-server-nomad/">https://mrkaran.dev/posts/home-server-nomad/</a></em></p>]]>
            </description>
            <link>https://mrkaran.dev/posts/home-server-nomad/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26142005</guid>
            <pubDate>Mon, 15 Feb 2021 12:15:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Is This a Branch?]]>
            </title>
            <description>
<![CDATA[
Score 87 | Comments 46 (<a href="https://news.ycombinator.com/item?id=26141047">thread link</a>) | @wheresvic4
<br/>
February 15, 2021 | https://bartwronski.com/2021/01/18/is-this-a-branch/ | <a href="https://web.archive.org/web/*/https://bartwronski.com/2021/01/18/is-this-a-branch/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
						
<p>Let‚Äôs try a new format ‚Äì <strong>‚Äúshorts‚Äù</strong>; small blog posts where I elaborate on ideas that I‚Äôd discuss at my twitter, but they either come back over and over, or the short form doesn‚Äôt convey all the nuances.</p>



<div><figure><img src="https://lh5.googleusercontent.com/lc0z89hwcBtH59QnEvHrU__d1Be5uxjtjrjaBYi3updGObpyYlmpYvhlhXobMLWwyeRB2Sh--pEO7_oupCuDWdQXMtQnjcYfBjrO0TLDB_Zn5CJQLmDQm27enOR1C-tUEvmGGDL_" alt="" width="370" height="333"></figure></div>



<p>I often see advice about avoiding ‚Äúif‚Äù statements in the code (especially GPU shaders) at all costs. The worst of all is when this happens in glsl and programmers replace some simple if statements with (subjectively) horrible <a href="https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/step.xhtml">step instruction</a> which IMO completely destroys all readability, or even worse ‚Äì sequences of mixes, maxes, clips and extra ALU.</p>



<p>After all, <strong>those ifs are branches, and branches are bad, right?</strong></p>



<p><strong>TLDR: No, definitely not ‚Äì on all accounts.</strong></p>



<h2>Why do programmers want to avoid branches?</h2>



<p>Let‚Äôs first address why programmers would like to avoid branches. There are some good reasons for that.</p>



<h3>Scalar CPU</h3>



<p>On the CPU, ‚Äúbranches‚Äù in a non-SIMD code might seem ‚Äúinnocent‚Äù, it‚Äôs just a conditional jump to some other code. Instead of executing an <em>instruction a</em> next address, we jump to <em>instruction b</em> at some other address. Unfortunately, there are many complicated things going on under the hood: All modern CPUs are heavily pipelined, superscalar, and out-of order.</p>



<div><figure><img src="https://lh5.googleusercontent.com/aJOrhsi_sQ7C4gG6z0cov73NA_qt-UckHrz10Uo5OGX22TuwRRf_n1ogyaRUSBsTsCU3wigOkYwIZMclAGslXKSruRk9P7ieNjYvyukZ9erHFaCr-QMuKvwPjMbLNuBfyMZGTqjc" alt="" width="344" height="330"><figcaption>All modern CPUs are superscalar and deeply pipelined. Many instructions are processed and executed at the same time. Source: <a href="https://en.wikipedia.org/wiki/Branch_predictor">wikipedia</a></figcaption></figure></div>



<p>To extract maximum efficiency, they use a model of <a href="https://en.wikipedia.org/wiki/Branch_predictor">speculative execution</a> ‚Äì a CPU ‚Äúgambles‚Äù and ‚Äúguesses‚Äù results of a branch ahead of time, not knowing if it will be taken or not, and starts executing those instructions. If it‚Äôs right ‚Äì great! However if it‚Äôs not, then the CPU needs to stall, cancel all the guesses, go back to the branch, and execute the other instructions. Oops.</p>



<p>Luckily, CPUs are usually very good at this ‚Äúguessing‚Äù (they actually analyze past branch patterns and take them into account!). On the other hand, without going into too much detail ‚Äì each branch consumes some of the branch predictor unit resources. One extra branch on some short, innocent code can make results of the branch prediction worse, and slow down other code (where branch predictor might be necessary for good performance!).</p>



<h3>SIMD and the GPU</h3>



<p>When considering SIMD or the GPU, the situation is even worse.</p>



<p>Simplifying ‚Äì single program and same instruction stream executes on multiple ‚Äúlanes‚Äù of the same data, processing 4/8/16/32/64 elements at the same time.</p>



<p>If you want to take a branch when some of the elements take one path, some another one, you have two main options: <strong>either abandon vectorization and scalarize code</strong> (very bad option; usually means that it‚Äôs not worth vectorizing given piece of code), or <strong>execute both code paths</strong> ‚Äì first the first one, store the results somewhere, execute the second one, and ‚Äúcombine‚Äù the results.</p>



<div><figure><img src="https://lh3.googleusercontent.com/GmopPKjJ_t4QpsGIhaIhjJn6cTfUjVaMSl9lDj74skwpNRUVIYtWQ8-V0j4mMLIyZk1CZEgn-9z5C1kExAlVjIw8Oikdx0L-gJnyrB-qUc5oi3_4aQmmcGwCcP51YutgGoAlRHdT" alt="" width="448" height="194"></figure></div>



<p>This is a general (over)simplification, and example GPUs have dedicated hardware to help do it efficiently and without wasting resources (hardware execution masks etc), but generally means extra cost of managing those masks, storing results somewhere, double execution costs and finally ‚Äì branches can serve as barriers, preventing some <a href="https://bartwronski.com/2014/03/27/gcn-two-ways-of-latency-hiding-and-wave-occupancy/">latency hiding (see my old blog post on it)</a>.</p>



<h3>Combined</h3>



<p>Given those two, it might seem that avoiding branches seems reasonable, and the common advice of avoiding ifs makes sense. But whether it makes sense to avoid branch or not is more complicated (more on it later), and the second one (whether an if is a branch) is not the case.</p>



<h2>Are if statements branches?</h2>



<p>Let‚Äôs clear the worst misconception.</p>



<p><strong>When you write an ‚Äúif‚Äù in your code, the compiler won‚Äôt necessarily generate a branch with a jump</strong>.</p>



<p>I will focus now on CPUs, mostly because how easy it is to test it with <a href="https://godbolt.org/">Matt Godbolt‚Äôs amazing compiler explorer</a>. üôÇ (Plus how there are two mainstream architectures, unlike many different shader ISAs)</p>



<p>Let‚Äôs have a look at the following simple integer function.</p>


<pre title="">int is_this_a_branch(int v, int w) {
    if (v &lt; 10) {
        return v + w; 
    } 
    else {
        return 2 * v - 2 * w;
    }
}
</pre>


<p>I tested it with 3 x64 compilers (GCC x64 trunk, Clang x64 trunk, MSVC 19.28) and one ARM (armv8-a clang), and only MSVC generates an actual branch there.</p>



<pre><code><strong>clang</strong>              
        mov     eax, edi
        sub     eax, esi
        add     esi, edi
        add     eax, eax
        cmp     edi, 10
        cmovl   eax, esi
        ret
<strong>gcc</strong>
        mov     eax, edi
        lea     edx, [rdi+rsi]
        sub     eax, esi
        add     eax, eax
        cmp     edi, 9
        cmovle  eax, edx
        ret
<strong>msvc </strong>       
        cmp     ecx, 10
        <strong>jge     SHORT $LN2@is_this_a_ BRANCH!!!
</strong>   BRANCH!
        lea     eax, DWORD PTR [rcx+rdx]
        ret     0
$LN2@is_this_a_:
        sub     ecx, edx
        lea     eax, DWORD PTR [rcx+rcx]
        ret     0

<strong>arm clang
</strong>        sub     w9, w0, w1
        add     w8, w1, w0
        lsl     w9, w9, #1
        cmp     w0, #10                         // =10
        csel    w0, w8, w9, lt</code></pre>



<p>When using floats:</p>


<pre title="">float is_this_a_branch2(float v, float w) {
    if (v &lt; 10.0f) {
        return v + w; 
    } 
    else {
        return 2.0f * v - 2.0f * w;
    }
}
</pre>


<p>Now 2 out of 4 compilers generate a branch:</p>



<pre><code><strong>clang</strong>           
        movaps  xmm2, xmm0
        addss   xmm2, xmm1
        movaps  xmm3, xmm0
        addss   xmm3, xmm0
        addss   xmm1, xmm1
        cmpltss xmm0, dword ptr [rip + .LCPI1_0]
        subss   xmm3, xmm1
        andps   xmm2, xmm0
        andnps  xmm0, xmm3
        orps    xmm0, xmm2
        ret

<strong>gcc
</strong>        movss   xmm2, DWORD PTR .LC0[rip]
        comiss  xmm2, xmm0
        <strong>jbe     .L10  BRANCH!!!
</strong>
        addss   xmm0, xmm1
        ret
.L10:
        addss   xmm1, xmm1
        addss   xmm0, xmm0
        subss   xmm0, xmm1
        ret

<strong>msvc
</strong>        movss   xmm2, DWORD PTR __real@41200000
        comiss  xmm2, xmm0
        <strong>jbe     SHORT $LN2@is_this_a_  BRANCH!!!</strong>
        addss   xmm0, xmm1
        ret     0
$LN2@is_this_a_:
        addss   xmm0, xmm0
        addss   xmm1, xmm1
        subss   xmm0, xmm1
        ret     0

<strong>arm clang
</strong>        fadd    s2, s0, s1
        fadd    s3, s0, s0
        fadd    s1, s1, s1
        fmov    s4, #10.00000000
        fsub    s1, s3, s1
        fcmp    s0, s4
        fcsel   s0, s2, s1, mi
        ret</code></pre>



<h3>What are those conditionals and selects?</h3>



<p>This is basically CPUs‚Äô and compilers‚Äô way of ‚Äúserializing‚Äù both code paths. If it considers overhead of a branch larger than the amount of work it can save, it makes sense to compute both code paths, and use a single instruction to select which one is the actual result.</p>



<p>This obviously ‚Äúdepends‚Äù on the use case and whether it is even ‚Äúlegal‚Äù for a compiler to do such a transformation (like ‚Äúside effects‚Äù; or if a compiler executed some reads of memory, it could be unsafe and lead to segmentation fault).&nbsp;</p>



<h2>Does writing ternary conditional help avoid branches?</h2>



<p><strong>No.</strong></p>



<p>This is a common advice, but it‚Äôs generally not true. If you look at the above example rewritten slightly:</p>


<pre title="">float is_this_a_branch3(float v, float w) {
    return v &lt; 10.0f ? (v + w) : (2.0f * v - 2.0f * w);
}
</pre>


<p>The generated code is <strong>identical </strong>(!).</p>



<p>It might be <em>possible</em> (?) that some compilers do generate branchless code for like this, but giving this as a general advice makes no sense. Whether you write an actual if, or a ternary expression, it‚Äôs still a high level if statement, just expressed differently.</p>



<h2>What about the GPU?</h2>



<p><strong>On the GPU, it‚Äôs the same; the compiler will generate conditional selects when appropriate.</strong></p>



<p>I used <a href="http://shader-playground.timjones.io/">Tim Jones Shader Playground</a> and AMD ISA (mostly because I know it relatively better than the others), and the unfortunate step function:</p>


<pre title="">#version 460

layout (location = 0) out vec4 fragColor;
layout (location = 0) in float inColor;

void main()
{
#if 1
	fragColor = vec4(step(1.0, inColor));
#else
    float x;
    if (inColor &lt; 1.0)
        x = 1.0;
   	else
        x = 0.0;
   	fragColor = vec4(x);
#endif
}
</pre>


<p>See for yourself, both versions generate identical assembly:</p>



<pre><code>  s_mov_b32     m0, s3
  s_nop         0x0000
  v_interp_p1_f32  v0, v0, attr0.x
  v_interp_p2_f32  v0, v1, attr0.x
  v_cmp_gt_f32  vcc, 1.0, v0
  v_cndmask_b32  v0, 1.0, 0, vcc
  v_cvt_pkrtz_f16_f32  v0, v0, v0
  exp           mrt0, v0, v0, v0, v0 done compr vm</code></pre>



<p>When using fastmath and not obeying strict IEEE float specification (which is standard for compiling shaders for real time graphics), compilers can even generate other instructions like min or max from your if statements. But YMMV and be sure to check the assembly.</p>



<p>So generally ‚Äì using ‚Äústep‚Äù just to avoid if statements is <strong>pointless</strong>.</p>



<p>If you like it for your coding style, then it‚Äôs obviously up to you, use as much as you like just for this reason. But please consider programmers who don‚Äôt have as much shader or GLSL experience and will be always puzzled by it. üôÇ </p>



<h2>Are branches always to be avoided?</h2>



<p><strong>No.</strong></p>



<p>This is way beyond my aimed ‚Äúshort‚Äù format, but <strong>branches are not necessarily ‚Äúbad‚Äù</strong>.</p>



<p>They can be actually an awesome optimization, even on the GPU!</p>



<p>If you start to use a lot of conditionals</p>



<p>Lots of advice on how branches are bad and have to be avoided comes from a prehistoric era of old CPUs and GPUs or old compilers; an advice that is passed without re(verifying) ‚Äì which is understandable, I am not re-checking my whole knowledge or intuition every few months either. üôÇ </p>



<p>But the CPU/GPU/compiler architects improved designs significantly and adapted them to general, highly branchy code, and whether there is a penalty or not depends on way too many details to list or give advice.</p>



<p><strong>Rule of thumb</strong>: if a branch is generally coherent, it makes sense to use it when it allows to save on memory bandwidth or cache utilization. On GPUs it is usually worth adding branches if you can avoid texture fetches this way with a high probability and coherence. And it‚Äôs usually better to have some conditional masks and selects around ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://bartwronski.com/2021/01/18/is-this-a-branch/">https://bartwronski.com/2021/01/18/is-this-a-branch/</a></em></p>]]>
            </description>
            <link>https://bartwronski.com/2021/01/18/is-this-a-branch/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26141047</guid>
            <pubDate>Mon, 15 Feb 2021 09:52:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Interactive Data Visualisation with Rust]]>
            </title>
            <description>
<![CDATA[
Score 81 | Comments 12 (<a href="https://news.ycombinator.com/item?id=26141018">thread link</a>) | @batterylow
<br/>
February 15, 2021 | https://shahinrostami.com/posts/programming/rust-notebooks/visualisation-of-co-occurring-types/ | <a href="https://web.archive.org/web/*/https://shahinrostami.com/posts/programming/rust-notebooks/visualisation-of-co-occurring-types/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<pre>[[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]]</pre>
</div></div>]]>
            </description>
            <link>https://shahinrostami.com/posts/programming/rust-notebooks/visualisation-of-co-occurring-types/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26141018</guid>
            <pubDate>Mon, 15 Feb 2021 09:49:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Security features of the Intel/Windows platform secure boot process]]>
            </title>
            <description>
<![CDATA[
Score 27 | Comments 2 (<a href="https://news.ycombinator.com/item?id=26140122">thread link</a>) | @ingve
<br/>
February 14, 2021 | https://igor-blue.github.io/2021/02/04/secure-boot.html | <a href="https://web.archive.org/web/*/https://igor-blue.github.io/2021/02/04/secure-boot.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section itemprop="text">
        
        <ul id="markdown-toc">
  <li><a href="#introduction-and-system-architecture" id="markdown-toc-introduction-and-system-architecture">Introduction and System Architecture</a>    <ul>
      <li><a href="#buses" id="markdown-toc-buses">Buses</a></li>
      <li><a href="#more-components" id="markdown-toc-more-components">More Components</a></li>
      <li><a href="#the-flash-chip" id="markdown-toc-the-flash-chip">The Flash Chip</a></li>
    </ul>
  </li>
  <li><a href="#overview" id="markdown-toc-overview">Overview</a></li>
  <li><a href="#early-power-on" id="markdown-toc-early-power-on">Early power on</a></li>
  <li><a href="#bring-up-bup" id="markdown-toc-bring-up-bup">Bring-Up (BUP)</a></li>
  <li><a href="#cpu-initialization" id="markdown-toc-cpu-initialization">CPU initialization</a></li>
  <li><a href="#uefi-initialization" id="markdown-toc-uefi-initialization">UEFI initialization</a>    <ul>
      <li><a href="#loading-the-boot-loader" id="markdown-toc-loading-the-boot-loader">Loading the boot loader</a></li>
    </ul>
  </li>
  <li><a href="#windows-boot" id="markdown-toc-windows-boot">Windows Boot</a>    <ul>
      <li><a href="#winload" id="markdown-toc-winload">Winload</a></li>
      <li><a href="#hvci" id="markdown-toc-hvci">HVCI</a></li>
      <li><a href="#dynamic-root-of-trust-model-drtm" id="markdown-toc-dynamic-root-of-trust-model-drtm">Dynamic Root of Trust Model (DRTM)</a></li>
      <li><a href="#uefi-memory-attributes-table" id="markdown-toc-uefi-memory-attributes-table">UEFI Memory Attributes Table</a></li>
    </ul>
  </li>
  <li><a href="#other-oss" id="markdown-toc-other-oss">Other OSs</a></li>
  <li><a href="#more-protections" id="markdown-toc-more-protections">More Protections</a>    <ul>
      <li><a href="#iommu-and-dma-protections" id="markdown-toc-iommu-and-dma-protections">IOMMU and DMA protections</a></li>
      <li><a href="#secure-devices" id="markdown-toc-secure-devices">Secure Devices</a></li>
      <li><a href="#smm" id="markdown-toc-smm">SMM</a></li>
      <li><a href="#memory-reset-protections" id="markdown-toc-memory-reset-protections">Memory Reset protections</a></li>
    </ul>
  </li>
</ul>

<p>This blog post is an in-depth dive into the security features of the Intel/Windows platform boot process. In this post I'll explain the startup process through security focused lenses, next post we'll dive into several known attacks and how they were handled by Intel and Microsoft. My wish is to explain to technology professionals not deep into platform security why Microsoft's SecureCore is so important and necessary.</p>



<p>We must first begin with a brief introduction to the hardware platform. Skip this if you have read the awsome material available on the web about the Intel architecture, I'll try to briefly summarize it here.</p>

<p>The Intel platform is based on one or two chips. Small systems have one, the desktop and server ones are separated to a CPU complex and a PCH complex (PCH = Platform Controller Hub).</p>

<p><img src="https://igor-blue.github.io/images/image2020-4-19_14-3-0.png" alt="Intel architecture"></p>

<p>The CPU complex deals with computation. It holds the "processor" cores, e.g. Sunny Cove that implement the ISA, as well as cross core caches like the L3 cache, and more controllers that are grouped together as "the system agent" or the "uncore". The uncore contains the memory controller and display, e.g. GPU and display controller.</p>

<p>The PCH handles all other IO, including access to the firmware through SPI or eSPI, wifi, LAN, USB, HD audio, SMBus, thunderbolt and etc'. The PCH also hosts several embedded processors, like the PMC, the Power Management Controller.</p>

<p>An additional part of the PCH is a very important player in our story, the CSME, or Converged Security &amp; Management Engine, a i486 IP block (also called Minute IA). CSME is responsibly for much of the security model of Intel processors as well as many of the manageability features of the platform. The CSME block has its own dedicated ~1.5mb of SRAM memory and 128KB of ROM, as well as a dedicated IOMMU, called the A-Unit (that even has its own <em>acode</em> microcode) located in the CSME's <em>uncore</em>', thats allows access from ME to the main memory, as well as DMA to/from the main memory and using the main memory as an encrypted paging area ("virtual memory"). The CSME engine runs a customized version of the Minix3 microkernel, also recent versions have changed it beyond recognition adding many security features.</p>

<p><img src="https://igor-blue.github.io/images/image2020-4-19_14-14-4.png" alt="CSME structure"></p>

<h2 id="buses">Buses</h2>
<p>Lets use this post to also introduce the main interconnects in the system. The main externally facing interconnect bus is PCI-E, a fast bust that can reach 64GBps in its latest incarnations. A second external bus is the LPC, or Low Pin Count bus, a slow bus for connecting devices such as SPI flash, the TPM (explained below), and old peripherals such as PS/2 touchpads.</p>

<p>Internally the platform is based around the <strong>IOSF</strong>, or Intel On-chip System Fabric, which is a pumped up version of PCI-E that supports many additional security and addressing features. For addressing IOSF adds SourceID and DestID fields that contain the source and destination of any IOSF transaction, extending PCI-E Bus-Device-Function (BDF) addressing to enable routing over bridges. IOSF also extends addressing by adding support for multiple address root namespaces, currently defining three: RS0 for host memory space, RS1 for CSME memory space, and RS2 for the Innovation-Engine (IE), another embedded controller currently present only on server chipsets.
There are two IOSF busses in the PCH - the Primary Fabric and the Sideband Fabric. The Primary Fabric is high speed, connecting the CPU to the PCH (through a protocol call DMI), as well as high speed devices such as Gigbait Ethernet, WiFi and eSPI. The Sideband Fabric is used to connect the CSME to low-speed devices, including the PMC (Power Management Controller), the RNG generator, GPIO pins, USB, SMBus, and even debugging interfaces such as JTAG.</p>

<h2 id="more-components">More Components</h2>
<p>Another interesting component is the <strong>ITH</strong>, or Intel Trace Hub, which is codenamed North Peak (NPK). The ITH can trace different internal hardware component (VIA - Visualization of Internal Signals, ODLA - On-chip logic analyzer, SoCHAP - SOC performance counters, IPT - Intel Process Trace, AET - Intel Architecture Trace), and external component like CSME, the UEFI firmware, and you can even connect it to ETW. This telemetry eventually finds its way to Intel in various methods.</p>

<p><img src="https://igor-blue.github.io/images/image2020-4-22_0-52-2.png" alt="Intel Trace Hub"></p>

<p>The <strong>TPM</strong> is designed to provide a tamper proof environment to enforce system security through hardware. It implements in hardware many essential functions: sha1 &amp; sha256 hashing algorithms, many crypto and key derivation functions, measurment registers call the Platform Configuration Registers (PCRs), a secret key - Endorsment Key - used to derive all other keys, and non-volatile storage slots for storing keys and hashes. Discrete TPM chips (i.e. those that are a separate chip on the mainboard or SOC and connected through the LPC) are call dTPMs, or can be implemented in the CSME module's firmware and called fTPMs.</p>

<p>The TPM's <strong>PCR</strong> are initialized to zero when the platform boots and are filled up with measurements through the boot process. PCRs 0-15 are intended for "static" use - they reset when the platform boots; They are supposed to give the OS loader a view of the platform initialization state.
PCRs 17-22 are for "dynamic" use - they get reset on each secure launch (GETSEC[SENTER]); They are supposed to be used by the attestation sofware that checks if the OS is trusted.</p>

<h2 id="the-flash-chip">The Flash Chip</h2>
<p>SPI flash has 5 major regions: the Descriptor regions, the CSME region, the Gigabit Ethernet Region, the Platform Data Region, and the UEFI region. In the image below you can see an example of how the flash is organized.</p>

<p><img src="https://igor-blue.github.io/images/image2019-11-11_1-18-53_1.png" alt="Partition regions in SPI flash">
<img src="https://igor-blue.github.io/images/image2019-11-11_1-19-12.png" alt="Serial flash sizes"></p>

<p>Later versions added more regions:</p>

<p><img src="https://igor-blue.github.io/images/image2019-11-25_22-49-41.png" alt="SPI region evolution"></p>

<p>These regions are categorized as fault tolerant (FTPs) and non fault tolerant partitions (NFTPs).
Fault tolerant partitions are critical for boot, and verified during early boot (like the RBE, the CSME ROM Boot extensions will discuss in a few paragraphs). If verification fails - the system does not boot. Examples of non fault tolerant partitions are the Integrated Sensor Hub (or ISH) firmware.</p>

<p>SPI flash protection is applied at multiple levels: On the flash chip itself, in the SPI flash controller (in the PCH), in UEFI code and in CSME code.</p>

<p>The SPI controller maps the entire flash to memory at a fixed address, so reads/writes are usually done simply by reading/writing memory. The SPI controller translates this to flash-specific commands issued on the SPI bus, using a table of flash-specific commands stored in the flash descriptor region.
This is called "Hardware Sequencing", meaning the SPI controller issues the actual SPI commands
When hardware sequencing is in use, the SPI controller enforces several flash protections based on the masters region table in the flash (but can be overriden using a hardware PIN).</p>

<p>The SPI controller also implements a FLOCKDN flag. FLOCKDN is a write-once bit that, when set, disables use of software sequencing and modification of the PR registers until the next reset. The CSME sets this in the Bring-UP process (bup_storage_lock_spi_configuration(), see below). This happens when the UEFI notifies it that it is at the end of POST. In addition to the region access control table, the SPI controller also has an option to globally protect up to five regions in the flash from write access by the host using five registers, called Protected Registers (PRs), which are intended for the UEFI firmware to protect itself from modification while the OS is running.</p>

<p>It is also possible to issue direct flash commands using "Software Sequencing" by writing to the OPTYPE/OPMENU registers, since this can be used circumvent the SPI-enforced protections, software sequencing is usually disabled after POST using the FLOCKDN bit.</p>

<p>How is the flash updated?</p>

<p>UEFI region is updated through an UEFI capsule, This update happens during POST, before PRs and FLOCKDN is set, therefore, the BIOS region is still accessible to UEFI code.</p>

<p>Many OEMS have then own UEFI anti-tamper protections. For example, HP has SureStart on laptops and workstations, and Dell has TrustedDevice SafeBIOS. SafeBIOS copies bad firmware images to the EFI system partition, and the Dell Trusted Device software on Windows sends their hashes plus the hash of the UEFI firmware currently in memory to a Dell cloud server (*.delltrusteddevicesecurity.com) to check against a list of "authorized" hashes. Server platforms have similiar protections, including iLO for HP and iDRAC in Dell.
The CSME region can usually be updated only from within the CSME. However, for more complicated upgrades CSME can temporarily unlock the ME region for host read &amp; write.</p>


<p>In the next sections we'll look over all the stages of boot.
<img src="https://igor-blue.github.io/images/image2020-4-20_14-56-23.png" alt="Serial flash sizes"></p>


<p>Boot starts the PMC, the Power Management Controller.
In modern Intel systems the PMC is an ARC core and its the first controller to execute code once electricity is applied to the system. We'll talk more about PMC in a later post as its quiet interesting and has its own microcode and firmware, and event generates telemetry over the IOSF SB bus (which we'll talk about in a moment).</p>

<p>While the PMC does its init, the rest of the system is held at bay at a RESET state.</p>

<p>The next part to start running is the CSME. Recall from the first post in the series, CSME, or Converged Security and Managment Engine is a MinuteIA (i486 CPU IP block) embedded in the Platform Controller Hub (PCH).
The CSME begins running from its own embedded 128KB ROM - the CSME-ROM. This ROM is protected with a hardware fuse that is burned by Intel during production.
When started the CSME ROM starts like a regular 486 processor BIOS - in the reset vector in real mode. Its first order of business is to ‚Ä¶</p></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://igor-blue.github.io/2021/02/04/secure-boot.html">https://igor-blue.github.io/2021/02/04/secure-boot.html</a></em></p>]]>
            </description>
            <link>https://igor-blue.github.io/2021/02/04/secure-boot.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26140122</guid>
            <pubDate>Mon, 15 Feb 2021 07:34:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Good Ideas, Through the Looking Glass (PDF, 2005)]]>
            </title>
            <description>
<![CDATA[
Score 37 | Comments 2 (<a href="https://news.ycombinator.com/item?id=26138218">thread link</a>) | @benhoyt
<br/>
February 14, 2021 | https://people.inf.ethz.ch/wirth/Articles/GoodIdeas_origFig.pdf | <a href="https://web.archive.org/web/*/https://people.inf.ethz.ch/wirth/Articles/GoodIdeas_origFig.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://people.inf.ethz.ch/wirth/Articles/GoodIdeas_origFig.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-26138218</guid>
            <pubDate>Mon, 15 Feb 2021 02:00:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I exploited existing YouTube videos with a fake Patreon profile]]>
            </title>
            <description>
<![CDATA[
Score 179 | Comments 62 (<a href="https://news.ycombinator.com/item?id=26136708">thread link</a>) | @lucas03
<br/>
February 14, 2021 | https://www.lucas03.com/how-i-exploited-existing-youtube-videos-with-a-fake-patreon-profile/ | <a href="https://web.archive.org/web/*/https://www.lucas03.com/how-i-exploited-existing-youtube-videos-with-a-fake-patreon-profile/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		<p>I am watching a lot of investing videos on youtube recently. I like to watch them while I eat, or they play in the background while I do something else. I assume that even though I don‚Äôt pay enough attention, interesting info catches my attention. I noticed there are a lot of great videos, and I thought of a way how I could exploit that. In this short text, I‚Äôll try to explain my black hat idea and if it worked.</p>



<p>I was looking for a call/put options youtube videos, as I realized <a href="https://www.lucas03.com/trading212">trading212</a> claims they pay up to 1000$ per registered user. I do invest in <a href="https://www.digrin.com/" target="_blank" title="https://www.digrin.com/">dividend stocks</a> and I like trading212 for that, but there is 0$ commission for referred accounts. I stumbled upon <a href="https://www.youtube.com/watch?v=zoFFD2EGMlg" target="_blank">this video</a> (Investing ‚Äì How I Earn $12 a Month in Dividends EASY!) from 2017 and I noticed a Patreon link there. </p>



<p><img src="https://monosnap.com/image/fb9Ccw7qEsGVYOKATw75W5RlvdRgqF" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>



<p>Youtuber <strong>DrUnlimited has 103k subscribers</strong> and the last video was posted 11 months ago. It tells me it‚Äôs an inactive account, and it‚Äôs a shame because some really good old videos are no longer viewed that much.<strong> I noticed patreon link is dead, and that DrUnlimited no longer used Patreon link in his last videos.</strong> That tells me you just tried out Patreon and gave up on it soon after.</p>



<p>Which got me thinking, can this be exploitable? Could I just find similar videos, where there were Patreon links that are no longer in use and I could claim them? I think there must be a tone if they were similar accounts (youtuber tried it in the past, but didn‚Äôt find enough patreons so he abandoned it, but never updated old videos). Well, there is only one way to find out. </p>



<p><strong>I tried to claim techcrackhouse on Patreon</strong>. I never used Patreon, so I was not familiar with the service. I created an account and within few seconds I knew this could work. I created a very simple Patreon page with a screen from the youtube channel within few minutes:</p>



<p><img src="https://monosnap.com/image/tPkZn4IMavztk4I9qaxTyhkSZ1pVYD" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>



<p>I tried to do a very simple page. Cover image from youtube, no promises on VIP content or any other upside from being a patreon. The only thing I did, was to add a 3$ a month membership and select ‚Äúgeneral support‚Äù.</p>



<figure><img src="https://monosnap.com/image/VDQAnLvKC6GD7njZ5J9xs15VVlPXEM" alt="" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure>



<p>To publish a Patreon page, I had to write a 100 chars description. I didn‚Äôt want to spend time on it, so you can tell it should not motivate anyone to pay monthly payment:</p>



<p><img src="https://monosnap.com/image/PUxiPW15XghP7kbhcbBcDLPdB4MhlZ" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>



<p>That‚Äôs the <a href="https://monosnap.com/file/SFUKzVUGpjO0x7VYVuoW352EXJzXSl" target="_blank">whole patreon page</a>. I was done within half an hour on 31 of January 2021. I did not expect much, but I thought this would be interesting if that works out. And guess what? You won‚Äôt believe what email I got just 2 weeks later, on 13. February 2021:</p>



<p><img src="https://monosnap.com/image/FAxjlJ4yBrUEp9zdkjH1XoGACcZM85" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>



<p>It got me thinking how this deceiving tactic can work that easily. <strong>I‚Äôve spent literary 1 hour on it, didn‚Äôt try to do a proper Patreon page and still got to 3$ MRR</strong>. I‚Äôve been developing <a href="https://www.digrin.com/" target="_blank">digrin.com</a> for over 6 years in my free time, and I have just a few paying users. </p>



<p>So, this worked. If I would not mind recycling these old Patreon links from youtube videos, I think that can be a pretty profitable business and it provides monthly income! (I like the subscription model) If I could get a Patreon within 2 weeks after 1 hour of work, what could I get to after spending weeks doing this? What if I find bigger youtube channels? I could write scrapers for youtube (though scraping google is probably not that easy), I could use tools like <a href="https://www.lucas03.com/seoprofiler">seoprofiler</a> to find links to Patreon return 404 and recycle those pages. This plan could be pretty profitable!</p>



<p>But‚Ä¶</p>



<p>I am already sharing this with the world. I might have broken Patreon‚Äôs terms and conditions doing this. <strong>I don‚Äôt want to make money by deceiving people and parasitize on content creators.</strong> So I wrote it down, hope Patreon will block recycling Patreon pages. I‚Äôll put down my fake Patreon page right now and will also refund my single Patreon. Hope your 3$ will find better use!</p>

	</div></div>]]>
            </description>
            <link>https://www.lucas03.com/how-i-exploited-existing-youtube-videos-with-a-fake-patreon-profile/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26136708</guid>
            <pubDate>Sun, 14 Feb 2021 22:05:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Warning to Users of NurseryCam]]>
            </title>
            <description>
<![CDATA[
Score 165 | Comments 70 (<a href="https://news.ycombinator.com/item?id=26136667">thread link</a>) | @carwyn
<br/>
February 14, 2021 | https://cybergibbons.com/security-2/a-warning-to-users-of-nurserycam/ | <a href="https://web.archive.org/web/*/https://cybergibbons.com/security-2/a-warning-to-users-of-nurserycam/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		<p>This blog post is intended for a less technical audience ‚Äì specifically parents and nurseries using the NurseryCam system.</p>
<p><a href="https://www.nurserycam.co.uk/index.php">NurseryCam</a> is a camera system that is installed in nurseries, allowing parents to view their children remotely. There are <a href="https://www.google.com/search?q=inurl:nursery+nurserycam">tens of nurseries</a> stating that they use this system. News articles go back as far <a href="http://news.bbc.co.uk/1/hi/england/somerset/3569866.stm">as 2004</a>.</p>
<p>Serious security issues have been found in the system. The <a href="https://www.nurserycam.co.uk/web_cam_security.htm">statements that NurseryCam</a> make about the security of their system do not align with reality.</p>
<p>These issues would allow any parent, past or present, to access the video feeds from the nursery. There is also the chance that anyone on the Internet could have accessed them.</p>
<p>I am a full-time security consultant who specialises in the security of the Internet of Things, including camera systems. The issues with NurseryCam are about as serious as it gets. NurseryCam were informed of these as early as February 2015 ‚Äì 6 years ago.</p>
<h2>The System</h2>
<p>A Digital Video Recorder (DVR) is installed in the nursery, connected to cameras. These are like normal CCTV DVRs, used across thousands of businesses and homes in the UK.</p>
<p>The DVR has a web interface that can be viewed in a browser, but it would normally only be possible to view this when you are connected directly to the nursery‚Äôs network. This is because the DVR is behind the router‚Äôs firewall.</p>
<div id="attachment_5044"><p><a href="https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-14-15_21_50-Untitled-1-LibreOffice-Draw.png"><img loading="lazy" src="https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-14-15_21_50-Untitled-1-LibreOffice-Draw-1024x649.png" alt="" width="646" height="409" srcset="https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-14-15_21_50-Untitled-1-LibreOffice-Draw-1024x649.png 1024w, https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-14-15_21_50-Untitled-1-LibreOffice-Draw-300x190.png 300w, https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-14-15_21_50-Untitled-1-LibreOffice-Draw-768x487.png 768w, https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-14-15_21_50-Untitled-1-LibreOffice-Draw.png 1030w" sizes="(max-width: 646px) 100vw, 646px"></a></p><p>Without port forwarding,the DVR cannot be accessed.</p></div>
<p>To allow the DVR to be viewed remotely, something called port forwarding is used. This opens a hole in the nursery‚Äôs firewall, allowing the DVR to be accessed from the Internet.</p>
<div id="attachment_5045"><p><a href="https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-14-15_23_48-Untitled-1-LibreOffice-Draw.png"><img loading="lazy" src="https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-14-15_23_48-Untitled-1-LibreOffice-Draw.png" alt="" width="993" height="632" srcset="https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-14-15_23_48-Untitled-1-LibreOffice-Draw.png 993w, https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-14-15_23_48-Untitled-1-LibreOffice-Draw-300x191.png 300w, https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-14-15_23_48-Untitled-1-LibreOffice-Draw-768x489.png 768w" sizes="(max-width: 993px) 100vw, 993px"></a></p><p>Port forwarding allows access to the DVR from the Internet</p></div>
<p>To log in to the DVR, you need to know the username, password, and IP address.</p>
<p>When a parent wants to view the cameras, they log in to the NurseryCam website or mobile application. In the background, the parent is given the details for the DVR, including the username and password.</p>
<div id="attachment_5046"><p><a href="https://cybergibbons.com/wp-content/uploads/2021/02/Untitled.png"><img loading="lazy" src="https://cybergibbons.com/wp-content/uploads/2021/02/Untitled.png" alt="" width="537" height="434" srcset="https://cybergibbons.com/wp-content/uploads/2021/02/Untitled.png 537w, https://cybergibbons.com/wp-content/uploads/2021/02/Untitled-300x242.png 300w" sizes="(max-width: 537px) 100vw, 537px"></a></p><p>The normal log in procedure for a parent</p></div>
<p>The parent then establishes a direct connection to the DVR, allowing them to view the camera.</p>
<h2>The Issues</h2>
<p>For all parents connecting to a given nursery, they are given the same username and password for the DVR. In the examples I have been shown, the username is <em>admin</em> and the password are obvious words followed by 888.<em><br>
</em></p>
<p>This means that the parents, past and present, have all been given the administrator password for the DVR.</p>
<p>There are no indications that this password changes over time.</p>
<p>There is no need for the parent to login to the NuseryCam website to access the DVR.</p>
<div id="attachment_5047"><p><a href="https://cybergibbons.com/wp-content/uploads/2021/02/Untitled1.png"><img loading="lazy" src="https://cybergibbons.com/wp-content/uploads/2021/02/Untitled1.png" alt="" width="283" height="277"></a></p><p>There is no need to login to the NurseryCam servers to login to the DVR</p></div>
<p>With these details, the parent could connect directly to the DVR at any time of the day, view it for however long they want, and view all of the cameras, including ones you have not given them permission to view.</p>
<p>You can lock or delete the parent account on the NurseryCam website, but the username and password for the DVR will not change.</p>
<p>There is no way to stop the parent from logging into the DVR directly.</p>
<p>Anyone logging into the DVR would be seen as the admin user. It would be incredibly difficult for a nursery to determine if the login was from a genuine parent or someone else.</p>
<p>To make matters worse, the connection to the DVR is using HTTP, not HTTPS. It is unencrypted, allowing someone to eavesdrop on the video feed, username, and password.</p>
<h2>The Risks</h2>
<p>Any given parent for a given nursery could login to the DVR and view any and all cameras.</p>
<p>This could include:</p>
<ol>
<li>A current parent viewing cameras for longer than they are meant to.</li>
<li>A current parent viewing cameras that they are not entitled to, such as rooms their child does not use.</li>
<li>A parent whose child no longer attends the nursery viewing the cameras.</li>
<li>Any parent who has been prevented from accessing the system (e.g. separation, abuse) viewing the cameras.</li>
</ol>
<p>Worse still, because the password for the DVRs is common across multiple nurseries and <a href="https://www.google.com/search?q=site%3Anurserycam.co.uk+nurserycam888">openly documented</a> on NurseryCam‚Äôs website, there is the potential for <strong>anyone</strong> on the Internet to access the DVR.</p>
<div id="attachment_5063"><p><a href="https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-15-09_24_46-Untitled-1-LibreOffice-Draw.png"><img loading="lazy" src="https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-15-09_24_46-Untitled-1-LibreOffice-Draw.png" alt="" width="992" height="909" srcset="https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-15-09_24_46-Untitled-1-LibreOffice-Draw.png 992w, https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-15-09_24_46-Untitled-1-LibreOffice-Draw-300x275.png 300w, https://cybergibbons.com/wp-content/uploads/2021/02/2021-02-15-09_24_46-Untitled-1-LibreOffice-Draw-768x704.png 768w" sizes="(max-width: 992px) 100vw, 992px"></a></p><p>Port forwarding does not restrict connections to be from parents ‚Äì anyone can access the DVR</p></div>
<p>The only missing piece of the puzzle is the IP address of the nursery. It would be possible to scan the entire of the UK for DVRs using this username and password in a matter of days.</p>
<p>Staff at NurseryCam would know the password and be able to access the DVRs without restriction.</p>
<h2>The Discrepancies</h2>
<p>NurseryCam <a href="https://www.nurserycam.co.uk/web_cam_security.htm">state</a> that their system is ‚Äúsafer than online banking‚Äù.</p>
<p>This is certainly not the case with the system seen here.</p>
<p>A common, shared, and openly documented login for the DVRs is passed to each parent.</p>
<p>There is no encryption used. There are no VPNs.</p>
<p>This is analogous to your local bank giving you the keys to their vault and just trusting that you will only take your money.</p>
<p>The same claims are repeated across multiple nursery websites.</p>
<h2>The Disclosure</h2>
<p>When security researchers find problems like this, we try to report them to the company so that they can be fixed.&nbsp; The aim is to keep users of the system safe. We call this disclosure.</p>
<p>I reported these to NurseryCam on <strong>6th February 2021</strong>.</p>
<p>On <strong>12th February 2021</strong>, I blogged about these initial concerns and Tweeted them.</p>
<p>Former parents reading my Twitter feed got in touch, with one parent confirming that they had informed NurseryCam of almost identical issues in <strong>February 2015</strong> ‚Äì six years ago.</p>
<p>Even six years ago, the claims made about security did not line up with reality.</p>
<p>They have been aware of serious security issues for 6 years and have not fixed them.</p>
<h2>How were these found?</h2>
<p>The NurseryCam Android mobile application was downloaded and then examined. By viewing the code, it was possible to see how the system operates.</p>
<p>Several parent users of the system have contacted me. They confirmed that the system operated as I suspected and that the DVR usernames and passwords were the same each time they logged in.</p>
<p>There has been no attempt to hack NurseryCam webservers.</p>
<p>These issues were trivial to uncover, taking no more than 15 minutes.</p>
<h2>What should you do?</h2>
<p>In my professional opinion, you cannot quickly fix a system that is this badly broken. You also cannot regain the trust that has been lost by selling a product that is described so inaccurately.</p>
<p>If you, as a nursery, operate one of these systems:</p>
<ol>
<li>Unplug the network connection from the DVR.</li>
<li>Contact NurseryCam and ask that they inform all impacted nurseries immediately.</li>
<li>Ask why the system you have been paying for isn‚Äôt the one that is described on the NurseryCam site.</li>
</ol>
<p>If you are a parent, I would advise contacting your nursery and request that they carry out the above steps.</p>
<h2>Inadequate Fixes</h2>
<p>Changing the username and password for the DVR is not a genuine fix ‚Äì the username and password are still sent to the parents.</p>
<p>Adding encryption to the connections is not a fix ‚Äì the username and password are still sent to the parents.</p>
<h2>My Opinion</h2>
<p>These issues are obvious and fundamental. They should not have existed in the first place.</p>
<p>Without the system being almost completely redesigned, it is hard to see how it can be secured adequately.</p>
<p>I have not tested their website, or looked at any of their other security practices.</p>
<p>Ask yourself if you could ever trust this company again with children‚Äôs data.</p>









			</div></div>]]>
            </description>
            <link>https://cybergibbons.com/security-2/a-warning-to-users-of-nurserycam/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26136667</guid>
            <pubDate>Sun, 14 Feb 2021 22:00:15 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What ever happened to scandium bike frames? (2016)]]>
            </title>
            <description>
<![CDATA[
Score 116 | Comments 96 (<a href="https://news.ycombinator.com/item?id=26136608">thread link</a>) | @dfgdghdf
<br/>
February 14, 2021 | https://www.bikeblogordie.com/2016/11/what-ever-happened-to-scandium-bike.html | <a href="https://web.archive.org/web/*/https://www.bikeblogordie.com/2016/11/what-ever-happened-to-scandium-bike.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.bikeblogordie.com/2016/11/what-ever-happened-to-scandium-bike.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26136608</guid>
            <pubDate>Sun, 14 Feb 2021 21:51:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[One of the Most Prolific Cybercriminals Has Retired and May Be a Billionaire]]>
            </title>
            <description>
<![CDATA[
Score 39 | Comments 4 (<a href="https://news.ycombinator.com/item?id=26136276">thread link</a>) | @1cvmask
<br/>
February 14, 2021 | https://www.elliptic.co/blog/jokers-stash-retiring | <a href="https://web.archive.org/web/*/https://www.elliptic.co/blog/jokers-stash-retiring">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<div>
<figure>
<p><img src="https://www.elliptic.co/hs-fs/hubfs/joker-stash-elliptic.png?width=594&amp;height=310&amp;name=joker-stash-elliptic.png" alt="" width="594" height="310" srcset="https://www.elliptic.co/hs-fs/hubfs/joker-stash-elliptic.png?width=297&amp;height=155&amp;name=joker-stash-elliptic.png 297w, https://www.elliptic.co/hs-fs/hubfs/joker-stash-elliptic.png?width=594&amp;height=310&amp;name=joker-stash-elliptic.png 594w, https://www.elliptic.co/hs-fs/hubfs/joker-stash-elliptic.png?width=891&amp;height=465&amp;name=joker-stash-elliptic.png 891w, https://www.elliptic.co/hs-fs/hubfs/joker-stash-elliptic.png?width=1188&amp;height=620&amp;name=joker-stash-elliptic.png 1188w, https://www.elliptic.co/hs-fs/hubfs/joker-stash-elliptic.png?width=1485&amp;height=775&amp;name=joker-stash-elliptic.png 1485w, https://www.elliptic.co/hs-fs/hubfs/joker-stash-elliptic.png?width=1782&amp;height=930&amp;name=joker-stash-elliptic.png 1782w" sizes="(max-width: 594px) 100vw, 594px">
</p>
</figure>
<div>
<figure>
<img src="https://www.elliptic.co/hs-fs/hubfs/2020%20Website/Authors/ell-author-tom-robinson.jpg?width=65&amp;height=65&amp;name=ell-author-tom-robinson.jpg" alt="Dr. Tom Robinson" width="65" height="65" srcset="https://www.elliptic.co/hs-fs/hubfs/2020%20Website/Authors/ell-author-tom-robinson.jpg?width=33&amp;height=33&amp;name=ell-author-tom-robinson.jpg 33w, https://www.elliptic.co/hs-fs/hubfs/2020%20Website/Authors/ell-author-tom-robinson.jpg?width=65&amp;height=65&amp;name=ell-author-tom-robinson.jpg 65w, https://www.elliptic.co/hs-fs/hubfs/2020%20Website/Authors/ell-author-tom-robinson.jpg?width=98&amp;height=98&amp;name=ell-author-tom-robinson.jpg 98w, https://www.elliptic.co/hs-fs/hubfs/2020%20Website/Authors/ell-author-tom-robinson.jpg?width=130&amp;height=130&amp;name=ell-author-tom-robinson.jpg 130w, https://www.elliptic.co/hs-fs/hubfs/2020%20Website/Authors/ell-author-tom-robinson.jpg?width=163&amp;height=163&amp;name=ell-author-tom-robinson.jpg 163w, https://www.elliptic.co/hs-fs/hubfs/2020%20Website/Authors/ell-author-tom-robinson.jpg?width=195&amp;height=195&amp;name=ell-author-tom-robinson.jpg 195w" sizes="(max-width: 65px) 100vw, 65px">
</figure>
<div>


<h5>Elliptic's Co-founder and Chief Scientist discusses cryptocurrency forensics, investigations, compliance, and sanctions.</h5>
</div>
</div>
<p><span id="hs_cos_wrapper_post_body" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text">
<p><strong>Hundreds of millions of cards have been stolen from online retailers, banks and payments companies before being sold for cryptocurrency on dozens of online marketplaces. According to Elliptic‚Äôs analysis, the founder of one of the most popular carding marketplaces, Joker‚Äôs Stash, has retired having amassed a fortune of over $1 billion.</strong></p>
<p>Every time you make a purchase with a credit or debit card, your card details are transmitted and stored in computer systems. Many of the major hacks of retailers and other companies are motivated by getting hold of these card credentials.</p>
<p>Stolen cards have value because they can be used to purchase high-value items or gift cards, which can then be resold for cash. This process is known as ‚Äúcarding‚Äù, and has become a key part of the cybercriminal‚Äôs playbook. Carding is very profitable in its own right, but it is also used to help launder and cash-out cryptocurrency obtained through other types of cybercrime.</p>

<p><strong>J</strong><strong>oker‚Äôs Stash - the King of Carding</strong></p>
<p>Over the past six years, Joker‚Äôs Stash rose to become the largest online seller of stolen credit cards and identity data. It is an example of a carding AVC (automated vending cart), which allows large volumes of cards to be sorted, filtered and purchased for Bitcoin with immediate delivery. In the image below you can see these cards categorised and searchable by country, bank, expiry date and other attributes. The going price for a single card on Joker‚Äôs Stash ranges from $1 to $150, with those at the upper end coming complete with the cardholder‚Äôs name, address and social security number.</p>
<!--more-->
<p><img src="https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_1-1.png?width=512&amp;name=Jokers%20Stash%20Blog_1-1.png" alt="Jokers Stash Blog_1-1" width="512" srcset="https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_1-1.png?width=256&amp;name=Jokers%20Stash%20Blog_1-1.png 256w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_1-1.png?width=512&amp;name=Jokers%20Stash%20Blog_1-1.png 512w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_1-1.png?width=768&amp;name=Jokers%20Stash%20Blog_1-1.png 768w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_1-1.png?width=1024&amp;name=Jokers%20Stash%20Blog_1-1.png 1024w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_1-1.png?width=1280&amp;name=Jokers%20Stash%20Blog_1-1.png 1280w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_1-1.png?width=1536&amp;name=Jokers%20Stash%20Blog_1-1.png 1536w" sizes="(max-width: 512px) 100vw, 512px"><span></span></p>
<p><span>A screenshot from Joker‚Äôs Stash, showing individual payment cards for sale together with details of the cardholder</span></p>
<p>Joker‚Äôs Stash began operations in 2014. Its founder announced the site‚Äôs launch in English and Russian-language posts on various carding forums, using the pseudonym ‚ÄúJokerStash‚Äù. The marketplace gained popularity due to the quality and volume of the cards offered, sourced from a network of ‚Äúpartners‚Äù - criminal groups that originally stole the card details.&nbsp; New batches of cards from major breaches of businesses were teased weeks in advance and given cryptic names. For example, two million cards <a href="https://gizmodo.com/2-million-credit-cards-exposed-after-hack-of-buca-di-be-1833710618"><span>belonging</span></a> to customers of US restaurant chain ‚ÄúBuca di Beppo‚Äù were marketed as the ‚ÄúDAVINCI BREACH‚Äù, while the five million cards making up the ‚ÄúBIGBADABOOM-2‚Äù batch likely <a href="https://www.nytimes.com/2018/04/01/technology/saks-lord-taylor-credit-cards.html"><span>originated</span></a> from retailer Saks Fifth Avenue.</p>

<p><strong>Using blockchain analytics to estimate sales volumes</strong></p>
<p>The revenues earned by Joker‚Äôs Stash can be estimated from the value of incoming cryptocurrency payments to its wallet, as seen on the blockchain. Since 2015 almost $400 million in bitcoin was sent to the marketplace, with annual sales peaking at $139 million in 2018. Sales dropped over the next two years, reflecting a broader downtrend in carding activity - increased security around card payments has made their theft more difficult, while advances in anti-fraud technology have made it more challenging for carders to make purchases with stolen cards.</p>
<p><img src="https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_2-1.png?width=1200&amp;name=Jokers%20Stash%20Blog_2-1.png" alt="Jokers Stash Blog_2-1" width="1200" srcset="https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_2-1.png?width=600&amp;name=Jokers%20Stash%20Blog_2-1.png 600w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_2-1.png?width=1200&amp;name=Jokers%20Stash%20Blog_2-1.png 1200w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_2-1.png?width=1800&amp;name=Jokers%20Stash%20Blog_2-1.png 1800w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_2-1.png?width=2400&amp;name=Jokers%20Stash%20Blog_2-1.png 2400w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_2-1.png?width=3000&amp;name=Jokers%20Stash%20Blog_2-1.png 3000w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_2-1.png?width=3600&amp;name=Jokers%20Stash%20Blog_2-1.png 3600w" sizes="(max-width: 1200px) 100vw, 1200px"><span>Value of Bitcoin payments received by Joker‚Äôs Stash, by year</span></p>
<p>This carding downturn may be one of the reasons that Joker‚Äôs Stash recently announced that it would be closing permanently. The marketplace has also faced other headwinds in recent months - JokerStash notified customers in October that he/she had been hospitalised for over a week with coronavirus, while in December Interpol and the FBI <a href="https://www.zdnet.com/article/fbi-interpol-disrupt-jokers-stash-the-internets-largest-carding-marketplace/"><span>announced</span></a> a coordinated seizure of domains used by the site. The servers themselves were apparently unaffected and the site remained operational through TOR mirrors (although some users suspect that the takedown was successful and that law enforcement now control the site - a tactic used with some darknet markets).</p>
<p><img src="https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_4.png?width=600&amp;name=Jokers%20Stash%20Blog_4.png" alt="Jokers Stash Blog_4" width="600" srcset="https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_4.png?width=300&amp;name=Jokers%20Stash%20Blog_4.png 300w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_4.png?width=600&amp;name=Jokers%20Stash%20Blog_4.png 600w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_4.png?width=900&amp;name=Jokers%20Stash%20Blog_4.png 900w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_4.png?width=1200&amp;name=Jokers%20Stash%20Blog_4.png 1200w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_4.png?width=1500&amp;name=Jokers%20Stash%20Blog_4.png 1500w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_4.png?width=1800&amp;name=Jokers%20Stash%20Blog_4.png 1800w" sizes="(max-width: 600px) 100vw, 600px"><span>Joker‚Äôs Stash announces its own closure</span></p>
<p>Another possible reason for the closure is simply that its founder has made so much money that it is no longer worth the effort and risk to continue operations, a sentiment suggested by the closure notice posted by JokerStash on the site:</p>
<p><img src="https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_6.png?width=600&amp;name=Jokers%20Stash%20Blog_6.png" alt="Jokers Stash Blog_6" width="600" srcset="https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_6.png?width=300&amp;name=Jokers%20Stash%20Blog_6.png 300w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_6.png?width=600&amp;name=Jokers%20Stash%20Blog_6.png 600w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_6.png?width=900&amp;name=Jokers%20Stash%20Blog_6.png 900w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_6.png?width=1200&amp;name=Jokers%20Stash%20Blog_6.png 1200w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_6.png?width=1500&amp;name=Jokers%20Stash%20Blog_6.png 1500w, https://www.elliptic.co/hs-fs/hubfs/Jokers%20Stash%20Blog_6.png?width=1800&amp;name=Jokers%20Stash%20Blog_6.png 1800w" sizes="(max-width: 600px) 100vw, 600px"></p>

<p><strong>How large is Joker‚Äôs Bitcoin Stash?</strong></p>
<p>We can estimate JokerStash‚Äôs retirement fund by considering the fees charged by the marketplace. The first source of revenue is cryptocurrency deposit fees. Any cryptocurrency payments to the site are converted to a US dollar balance, calculated according to the prevailing exchange rate, minus a fee ranging from 8% in the early days of the site to 4% today. On top of that, the marketplace almost certainly takes a cut of all sales of cards provided by the site‚Äôs partners. The commission taken by Joker‚Äôs Stash is not known, but for similar marketplaces it ranges between 10 to 30%.</p>
<p>The other key piece of information to take into account is that according to cyber security firm <a href="https://geminiadvisory.io/jokers-stash-shuts-down/"><span>Gemini Advisory</span></a>, JokerStash claims to keep all proceeds of the marketplace in bitcoin. If that is the case then the recent bitcoin price increase would have substantially inflated the value of assets. If we assume an average total commission of 20% on sales, then considering bitcoin alone (the site also accepts Litecoin and Dash) they would have taken a total of at least 60,000 bitcoins - which today has a value of $2.5 billion.</p>

<p><strong>An opportunity for other carding markets to fill the void</strong></p>
<p>Joker‚Äôs Stash announced that it would cease operations on 15th February, although the site became inaccessible as of the 3rd February, angering many customers, who still had balances to spend. It is one of the few criminal marketplaces to shut down on its own terms, a victim of its own success rather than as a result of any apparent law enforcement operation. This will no doubt encourage others to take its place at the heart of the cybercrime economy.</p>

<p><strong>Related Articles</strong></p>
<ul>
<li><a href="https://www.reuters.com/article/crypto-currency-crime/darknet-crypto-kingpin-jokerstash-retires-after-illicit-1-billion-run-research-idUKL4N2KH2IW" rel="noopener">Reuters feature Elliptic research on the Darknet crypto kingpin JokerStash</a></li>
</ul>
<p>Learn more about how Elliptic helps crypto businesses and financial institutions<span>&nbsp;</span><a href="https://www.elliptic.co/what-we-do/aml-navigator" rel="noopener" target="_blank">manage their cryptoasset risk</a>.&nbsp;</p>
<p>Don‚Äôt have Elliptic backing up your crypto AML compliance operations already?</p>
<p><!--HubSpot Call-to-Action Code --><span id="hs-cta-wrapper-22b79504-3ecb-4028-ab2d-42c058ec8014"><span id="hs-cta-22b79504-3ecb-4028-ab2d-42c058ec8014"><!--[if lte IE 8]><div id="hs-cta-ie-element"></div><![endif]--><a href="https://cta-redirect.hubspot.com/cta/redirect/3883533/22b79504-3ecb-4028-ab2d-42c058ec8014" target="_blank"><img id="hs-cta-img-22b79504-3ecb-4028-ab2d-42c058ec8014" src="https://no-cache.hubspot.com/cta/default/3883533/22b79504-3ecb-4028-ab2d-42c058ec8014.png" alt="SCHEDULE A DEMO"></a></span></span><!-- end HubSpot Call-to-Action Code --></p></span>
</p>

</div>
</div></div>]]>
            </description>
            <link>https://www.elliptic.co/blog/jokers-stash-retiring</link>
            <guid isPermaLink="false">hacker-news-small-sites-26136276</guid>
            <pubDate>Sun, 14 Feb 2021 21:08:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Distribution of JVM Desktop Applications]]>
            </title>
            <description>
<![CDATA[
Score 131 | Comments 118 (<a href="https://news.ycombinator.com/item?id=26135532">thread link</a>) | @nfrankel
<br/>
February 14, 2021 | https://blog.frankel.ch/state-jvm-desktop-frameworks/6/ | <a href="https://web.archive.org/web/*/https://blog.frankel.ch/state-jvm-desktop-frameworks/6/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main"> <div> <article itemscope="" itemtype="http://schema.org/BlogPosting"> <meta itemprop="mainEntityOfPage" content="//state-jvm-desktop-frameworks/6/"> <meta itemprop="description" content="">  <figure itemscope="" itemprop="image" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="https://blog.frankel.ch/assets/resources/state-jvm-desktop-frameworks/tree-flower-jungle-usa-garden-mailbox-1148044-pxhere.com.jpg"> </figure> <section> <div itemprop="articleBody"> <p>The previous posts of this series focused on different frameworks to develop JVM-based applications.</p> <p>This is the 6<sup>th</sup> post in the The state of JVM desktop frameworks focus series.Other posts include:</p> <ol><li><span><a href="https://blog.frankel.ch/state-jvm-desktop-frameworks/1/" target="_blank" rel="noopener">The state of JVM desktop frameworks: introduction</a></span></li><li><span><a href="https://blog.frankel.ch/state-jvm-desktop-frameworks/2/" target="_blank" rel="noopener">The state of JVM desktop frameworks: Swing</a></span></li><li><span><a href="https://blog.frankel.ch/state-jvm-desktop-frameworks/3/" target="_blank" rel="noopener">The state of JVM desktop frameworks: SWT</a></span></li><li><span><a href="https://blog.frankel.ch/state-jvm-desktop-frameworks/4/" target="_blank" rel="noopener">The state of JVM desktop frameworks: TornadoFX</a></span></li><li><span><a href="https://blog.frankel.ch/state-jvm-desktop-frameworks/5/" target="_blank" rel="noopener">The state of JVM desktop frameworks: Jetpack Compose for Desktop</a></span></li><li><span><em>Distribution of JVM desktop applications</em> (this post)</span></li></ol> <p>Distributing applications on a couple of computers inside the same company is not an issue. A lot of products are available for automating the pushing of files onto computers. Issues might start to appear when you need to coordinate the deployment across different physical sites.</p> <p>However, the biggest problem is when computers are not known in advance: in that case, it‚Äôs not possible to push. For that reason, two decades ago, we saw a move from client-server architectures to web-based architectures.</p> <p>The remaining question is how to deploy a Java desktop application. In this post, we are going to go through some options to distribute this kind of application.</p> <div> <h2 id="applets">Applets</h2> <div> <p>While not strictly about desktop applications, I believe it‚Äôs a good idea to mention <a href="https://en.wikipedia.org/wiki/Java_applet" target="_blank" rel="noopener">applets</a> in a post about distributing Java apps.</p> <p>Applets were the first way to make Java applications available remotely. The idea was to host on a web server both bytecode (a single class or JAR) and reference it in an HTML page.</p> <div> <p>index.html</p> <div> <pre><code data-lang="html"><span>&lt;!DOCTYPE html&gt;</span>
<span>&lt;html&gt;</span>
  <span>&lt;body&gt;</span>
  <span>&lt;applet</span> <span>code=</span><span>"HelloWorld.class"</span> <span>height=</span><span>"640"</span> <span>width=</span><span>"480"</span><span>&gt;&lt;/applet&gt;</span>
  <span>&lt;/body&gt;</span>
<span>&lt;/html&gt;</span></code></pre> </div> </div> <p>Note that an applet runs client-side, thus requiring a local <abbr title="Java Runtime Environment">JRE</abbr>. It also mandates a browser plugin. Both are security concerns. That lead browser vendors to remove the support of plugins and in turn the Java team to deprecate applets in Java 9.</p> <div> <blockquote> <p>With modern browser vendors working to restrict or reduce the support of plugins like Flash, Silverlight, and Java in their products, developers of applications that rely on the Java browser plugin need to consider alternative options. Java developers currently relying on browser plugins should consider migrating from Java Applets to the plugin-free Java Web Start technology.</p> <p>Supporting Java in browsers is only possible for as long as browser vendors are committed to supporting standards-based plugins. By late 2015, many browser vendors had either removed or announced timelines for the removal of standards-based plugin support, while some are introducing proprietary browser-specific extension APIs. Consequently, Oracle is planning to deprecate the Java browser plugin in JDK 9.</p> <p>The deprecated plugin technology will be completely removed from the Oracle Java Development Kit (JDK) and Java Runtime Environment (JRE) in a future Java release TBD. Java Web Start applications do not rely on a browser plugin and will not be affected by these changes.</p> </blockquote>  </div> </div> </div> <div> <h2 id="open-web-start">Open Web Start</h2> <div> <p>After applets, the next alternative for distributing Java applications is Java Web Start. This is the canonical way for desktop applications. As a personal note, I used it more than 15 years ago with Java 1.4. This <a href="https://www.oracle.com/java/technologies/javase/jws-archive-download.html" target="_blank" rel="noopener">page</a> seems to confirm JDK 1.4.2 was the first version to provide it natively, as opposed to as a separate download. Yet, Oracle deprecated Java Web Start in JDK 9 and removed it in JDK 11.</p> <p>This left JWS users without any option. <a href="https://karakun.com/" target="_blank" rel="noopener">Karakun</a> is a company that took ownership of the project. It provides it as a separate package under the name <a href="https://openwebstart.com/" target="_blank" rel="noopener">Open Web Start</a> and the software is the same.</p> <p>To distribute an application via Open Web Start, in addition to the JAR itself, you need to provide a <abbr title="Java Network Launching Protocol">JNLP</abbr> file. This file serves as an external deployment descriptor of a sort. Features of JNLP are quite exhaustive:</p> <ul><li><span>Add a shortcut on the user‚Äôs desktop</span></li><li><span>Whether the application can run offline after you‚Äôve downloaded it</span></li><li><span>Update policies</span></li><li><span>Optional list of native libraries</span></li><li><span>etc.</span></li></ul> <p>The complete <a href="https://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/jnlpFileSyntax.html" target="_blank" rel="noopener">specifications</a> are still available on Oracle‚Äôs site.</p> <p>Let‚Äôs create a JNLP to distribute our sample Swing application:</p> <div> <p>renamer.jnlp</p> <div> <pre><code data-lang="xml"><span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span>&lt;jnlp</span> <span>spec=</span><span>"1.0+"</span> <span>codebase=</span><span>""</span> <span>href=</span><span>""</span><span>&gt;</span>
  <span>&lt;information&gt;</span>
    <span>&lt;title&gt;</span>File Renamer<span>&lt;/title&gt;</span>
    <span>&lt;vendor&gt;</span>Nicolas Fr√§nkel<span>&lt;/vendor&gt;</span>
    <span>&lt;offline-allowed/&gt;</span>
  <span>&lt;/information&gt;</span>
  <span>&lt;resources&gt;</span>
    <span>&lt;j2se</span> <span>version=</span><span>"11+"</span> <span>/&gt;</span>
    <span>&lt;jar</span> <span>href=</span><span>"https://path.to/archive.jar"</span>                              <i data-value="1"></i><b>(1)</b>
         <span>main=</span><span>"true"</span> <span>/&gt;</span>                                                  <i data-value="2"></i><b>(2)</b>
  <span>&lt;/resources&gt;</span>
  <span>&lt;security&gt;</span>
    <span>&lt;all-permissions</span> <span>/&gt;</span>                                                  <i data-value="3"></i><b>(3)</b>
  <span>&lt;/security&gt;</span>
  <span>&lt;application-desc</span> <span>name=</span><span>"File Renamer"</span>
                    <span>main-class=</span><span>"ch.frankel.blog.renamer.RenamerAppKt"</span> <span>/&gt;</span> <i data-value="4"></i><b>(4)</b>
  <span>&lt;update</span> <span>check=</span><span>"background"</span><span>/&gt;</span>
<span>&lt;/jnlp&gt;</span></code></pre> </div> </div> <div> <table> <tbody><tr> <td><i data-value="1"></i><b>1</b></td> <td>Path to the JAR</td> </tr> <tr> <td><i data-value="2"></i><b>2</b></td> <td>Flag that marks the JAR as containing the main class</td> </tr> <tr> <td><i data-value="3"></i><b>3</b></td> <td>The Renamer application reads and writes the filesystem, it requires permissions. Note that permission grant is <strong>not</strong> fine-grained. Also, permissions require you to sign the JAR.</td> </tr> <tr> <td><i data-value="4"></i><b>4</b></td> <td>Class that contains the entry-point (the <code>main</code> method)</td> </tr> </tbody></table> </div> </div> </div> <div> <h2 id="jpackage">jpackage</h2> <div> <p>While Open Web Start is not available as part of the JDK anymore, the <a href="https://docs.oracle.com/en/java/javase/14/jpackage/packaging-overview.html" target="_blank" rel="noopener"><code>jpackage</code></a> tool is. It‚Äôs included since JDK 14. As its name implies, <code>jpackage</code> allows you to create a native installer from a JAR.</p> <p>Its basic usage is straightforward:</p> <div> <div> <pre><code data-lang="bash">jpackage <span>--input</span> target <span>--main-jar</span> renamer-swing-1.0.jar    <i data-value="1"></i><b>(1)</b></code></pre> </div> </div> <div> <table> <tbody><tr> <td><i data-value="1"></i><b>1</b></td> <td>Assume a Maven project that generates the JAR in the <code>target</code> subfolder</td> </tr> </tbody></table> </div> <p>On a macOS computer, the above command creates a <code>RenamerAppKt-1.0.dmg</code> installer. It contains a macOS application with the following structure:</p> <p><span><img src="https://blog.frankel.ch/assets/resources/state-jvm-desktop-frameworks/jpackage-app-structure.jpg" alt="Application‚Äôs structure as created by the jpackage" width="236" height="408"></span></p> <p>The structure includes:</p> <ul><li><span>The JAR</span></li><li><span>A JRE - the one associated with the <code>jpackage</code> command that created the installer</span></li><li><span>macOS-specific files</span></li></ul> <p>While the sample JAR is 1.5 MB, the installer is more than 50 MB because of the embedded Java runtime.</p> </div> </div> <div> <h2 id="jlink">jlink</h2> <div> <p><code>jlink</code> is not a real distribution mechanism but I believe it still deserves a mention. It allows you to create a custom runtime with a dedicated launcher script for your applications. It‚Äôs part of the JDK since Java 9.</p> <p>While it can in theory <a href="https://medium.com/azulsystems/using-jlink-to-build-java-runtimes-for-non-modular-applications-9568c5e70ef4" target="_blank" rel="noopener">work with any application</a>, it shines with modularized applications. Such applications need to describe the modules they depend on in a <code>module-info.java</code>.</p> <p>The main task is to modularize the application. For our sample app, the <code>module-info.java</code> file is:</p> <div> <p>module-info.java</p> <div> <pre><code data-lang="java"><span>module</span> <span>filerenamer</span><span>.</span><span>swing</span> <span>{</span>
    <span>requires</span> <span>eventbus</span><span>;</span>                            <i data-value="1"></i><b>(1)</b> <i data-value="2"></i><b>(2)</b>
    <span>requires</span> <span>java</span><span>.</span><span>desktop</span><span>;</span>                        <i data-value="1"></i><b>(1)</b>
    <span>requires</span> <span>kotlin</span><span>.</span><span>stdlib</span><span>;</span>                       <i data-value="1"></i><b>(1)</b>
    <span>exports</span> <span>ch</span><span>.</span><span>frankel</span><span>.</span><span>blog</span><span>.</span><span>renamer</span> <span>to</span> <span>eventbus</span><span>;</span>  <i data-value="3"></i><b>(3)</b>
<span>}</span></code></pre> </div> </div> <div> <table> <tbody><tr> <td><i data-value="1"></i><b>1</b></td> <td>Declare dependent modules</td> </tr> <tr> <td><i data-value="2"></i><b>2</b></td> <td>The Greenrobot library is an unnamed module. We need to reference it via the JAR‚Äôs name.</td> </tr> <tr> <td><i data-value="3"></i><b>3</b></td> <td>Allow Greenrobot to use our classes</td> </tr> </tbody></table> </div> <p>Modularizing one‚Äôs application is pretty straightforward. But to decide whether a JDK module will make it into the final runtime, <code>jlink</code> requires to <strong>transitively analyze every dependency</strong> of the application. Yet, <a href="https://blog.frankel.ch/update-state-java-modularization/" target="_blank" rel="noopener">about 35% of the libraries</a> are neither modularized nor declare an <code>Automatic-Module-Name</code> in their <code>MANIFEST.MF</code>.</p> <p>It‚Äôs possible to add this information during one‚Äôs build even though the procedure is error-prone and boring. The description on how to achieve this deserves a post on its own. For more information, please check <a href="https://blogs.oracle.com/javamagazine/containerizing-apps-with-jlink" target="_blank" rel="noopener">this Oracle magazine article</a>. Suffice to say here that it makes heavy use of the <a href="https://github.com/moditect/moditect" target="_blank" rel="noopener">Moditect Maven plugin</a>.</p> <p>After having <a href="https://github.com/ajavageek/renamer-swing/blob/feature/jlink/pom.xml#L56-L108" target="_blank" rel="noopener">configured the POM</a>, packaging the Renamer Swing application yields a folder that contains a runnable launcher script and the necessary modules from the JDK.</p> <p><span><img src="https://blog.frankel.ch/assets/resources/state-jvm-desktop-frameworks/jlink-output.jpg" alt="Output of jlink" width="184" height="288"></span></p> <p>The folder size is around 86MB. By using <code>gzip</code>, you can reduce the size to about a 30MB archive that you can distribute.</p> <p>Note that it will require users to decompress the archive and to know which script to launch, though.</p> </div> </div> <div> <h2 id="other-candidates">Other candidates</h2> <div> <p>Here are some other candidates that I discovered while researching this post. Note that I have experience with none of them but it might be useful for some of you.</p> <ul><li><span>Oracle introduced <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/packager.html" target="_blank" rel="noopener"><code>javapackager</code></a> in Java 8. <code>javapackager</code> is the ancestor of <code>jpackage</code> and is now superseded by the latter.</span><div> <blockquote> <p>The Java Packager tool can be used to compile, package, sign, and deploy Java and JavaFX applications from the command line. It can be used as an alternative to an Ant task or building the applications in an IDE.</p> </blockquote> </div></li><li><span><a href="https://github.com/edvin/fxlauncher" target="_blank" rel="noopener">FXLauncher</a> is both a launcher and an auto-updater that focuses solely on JavaFX applications.</span><p>FXLauncher is released under the Apache License 2.0.</p></li><li><span><a href="http://launch4j.sourceforge.net/" target="_blank" rel="noopener">Launch4J</a>:</span></li></ul> <div> <div> <div> <blockquote> <p>Launch4j is a cross-platform tool for wrapping Java applications distributed as jars in lightweight Windows native executables. The executable can be configured to search for a certain JRE version or use a bundled one, and it‚Äôs possible to set runtime options, like the initial/max heap size. The wrapper also provides a better user experience through an application icon, a native pre-JRE splash screen, and a Java download page in case the appropriate JRE cannot be found.</p> </blockquote> </div> <p>Launch4J is released under the BSD 3-Clause License but has not seen any release since 2017.</p> </div> </div> <ul><li><span><a href="https://github.com/libgdx/packr" target="_blank" rel="noopener">packr</a>:</span></li></ul> <div> <div> <div> <blockquote> <p>Packages your JAR, assets, and a JVM for distribution on Windows, Linux, and macOS, adding a native executable file to make it appear like a native app. Packr is most suitable for GUI applications, such as games made with libGDX.</p> <p>packr is released under the Apache License 2.0.</p> </blockquote> </div> </div> </div> <ul><li><span><a href="https://www.ej-technologies.com/products/install4j/overview.html" target="_blank" rel="noopener">Install4J</a>:</span></li></ul> <div> <blockquote> <p>install4j is a powerful multi-platform Java installer builder that generates native installers and application launchers for Java applications.</p> </blockquote> </div> <p>install4J is a proprietary product.</p> </div> </div> <div> <h2 id="conclusion">Conclusion</h2> <div> <p>In this post, we browsed through several options to distribute our Java desktop applications:</p> <ul><li><span>Open Web Start is an option based on the former Java Web Start. Users need to install the software on their system so they can execute JNLP files. Noteworthy features include auto-updating and offline mode.</span></li><li><span>JDK includes <code>jpackage</code>. It allows you to create installers that wrap both the JAR and a JRE.</span></li><li><span><code>jlink</code> is also included in the JDK. Instead of creating installers, it ‚Ä¶</span></li></ul></div></div></div></section></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.frankel.ch/state-jvm-desktop-frameworks/6/">https://blog.frankel.ch/state-jvm-desktop-frameworks/6/</a></em></p>]]>
            </description>
            <link>https://blog.frankel.ch/state-jvm-desktop-frameworks/6/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26135532</guid>
            <pubDate>Sun, 14 Feb 2021 19:45:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Graphics Programming Weekly]]>
            </title>
            <description>
<![CDATA[
Score 176 | Comments 28 (<a href="https://news.ycombinator.com/item?id=26134854">thread link</a>) | @E-Reverance
<br/>
February 14, 2021 | https://www.jendrikillner.com/tags/weekly/ | <a href="https://web.archive.org/web/*/https://www.jendrikillner.com/tags/weekly/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

  

  

  
  
  <div>
    <h2><a href="https://www.jendrikillner.com/post/graphics-programming-weekly-issue-170/">Graphics Programming weekly - Issue 170 ‚Äî February 14, 2021</a></h2>
    <p>
      
      Summary of articles of the week of February 14, 2021.
      
    </p>
  </div>
  
  <div>
    <h2><a href="https://www.jendrikillner.com/post/graphics-programming-weekly-issue-169/">Graphics Programming weekly - Issue 169 ‚Äî February 7, 2021</a></h2>
    <p>
      
      Summary of articles of the week of February 7, 2021.
      
    </p>
  </div>
  
  <div>
    <h2><a href="https://www.jendrikillner.com/post/graphics-programming-weekly-issue-168/">Graphics Programming weekly - Issue 168 ‚Äî January 31, 2021</a></h2>
    <p>
      
      Summary of articles of the week of January 31, 2021.
      
    </p>
  </div>
  
  <div>
    <h2><a href="https://www.jendrikillner.com/post/graphics-programming-weekly-issue-167/">Graphics Programming weekly - Issue 167 ‚Äî January 24, 2021</a></h2>
    <p>
      
      Summary of articles of the week of January 24, 2021.
      
    </p>
  </div>
  
  <div>
    <h2><a href="https://www.jendrikillner.com/post/graphics-programming-weekly-issue-166/">Graphics Programming weekly - Issue 166 ‚Äî January 17, 2021</a></h2>
    <p>
      
      Summary of articles of the week of January 17, 2021.
      
    </p>
  </div>
  
  <div>
    <h2><a href="https://www.jendrikillner.com/post/graphics-programming-weekly-issue-165/">Graphics Programming weekly - Issue 165 ‚Äî January 10, 2021</a></h2>
    <p>
      
      Summary of articles of the week of January 10, 2021.
      
    </p>
  </div>
  
  <div>
    <h2><a href="https://www.jendrikillner.com/post/graphics-programming-weekly-issue-164/">Graphics Programming weekly - Issue 164 ‚Äî January 3, 2021</a></h2>
    <p>
      
      Summary of articles of the week of January 3, 2021.
      
    </p>
  </div>
  
  <div>
    <h2><a href="https://www.jendrikillner.com/post/graphics-programming-weekly-issue-163/">Graphics Programming weekly - Issue 163 ‚Äî December 27, 2020</a></h2>
    <p>
      
      Summary of articles of the week of December 27, 2020.
      
    </p>
  </div>
  
  <div>
    <h2><a href="https://www.jendrikillner.com/post/graphics-programming-weekly-issue-162/">Graphics Programming weekly - Issue 162 ‚Äî December 20, 2020</a></h2>
    <p>
      
      Summary of articles of the week of December 20, 2020.
      
    </p>
  </div>
  
  <div>
    <h2><a href="https://www.jendrikillner.com/post/graphics-programming-weekly-issue-161/">Graphics Programming weekly - Issue 161 ‚Äî December 13, 2020</a></h2>
    <p>
      
      Summary of articles of the week of December 13, 2020.
      
    </p>
  </div>
  

  
<nav>
  <ul>
    
    
    <li><a href="https://www.jendrikillner.com/tags/weekly/page/2/">Next ¬ª</a></li>
    
  </ul>
</nav>



</div></div>]]>
            </description>
            <link>https://www.jendrikillner.com/tags/weekly/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26134854</guid>
            <pubDate>Sun, 14 Feb 2021 18:38:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Parler‚Äôs epic fail: A crash course on running your own servers]]>
            </title>
            <description>
<![CDATA[
Score 133 | Comments 133 (<a href="https://news.ycombinator.com/item?id=26134691">thread link</a>) | @fireeyed
<br/>
February 14, 2021 | https://blog.alexgleason.me/run-your-own-server/ | <a href="https://web.archive.org/web/*/https://blog.alexgleason.me/run-your-own-server/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://blog.alexgleason.me/content/images/size/w300/2021/02/poweredge.png 300w,
                            https://blog.alexgleason.me/content/images/size/w600/2021/02/poweredge.png 600w,
                            https://blog.alexgleason.me/content/images/size/w1000/2021/02/poweredge.png 1000w,
                            https://blog.alexgleason.me/content/images/size/w2000/2021/02/poweredge.png 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://blog.alexgleason.me/content/images/size/w2000/2021/02/poweredge.png" alt="Parler‚Äôs epic fail: A crash course on running your own servers with a shoestring budget">
            </figure>

            <section>
                <div>
                    <blockquote>First they came for the Communists,<br>and I didn‚Äôt speak up,<br>because I wasn‚Äôt a Communist.<br>Then they came for the Jews,<br>and I didn‚Äôt speak up,<br>because I wasn‚Äôt a Jew.<br>Then they came for the Catholics,<br>and I didn‚Äôt speak up,<br>because I was a Protestant.<br>Then they came for me,<br>and by that time there was no one<br>left to speak up for me.</blockquote><p>In the early days of 2021 we learned the true power of American tech companies. After Trump was ousted by Twitter, the social media alternative Parler was cut off by their cloud hosting provider, Amazon.</p><p>Where do we go from here? What can a freedom-minded person do to avoid censorship by tech oligarchs?</p><p>The only way is to meet them at their level. In some industries it's impossible to challenge the establishment, but anyone can have a voice on the Internet. This is still true in 2021.</p><h2 id="cloud-hosting-vs-real-computers">Cloud hosting vs real computers</h2><p>Cloud hosting has made it easy for anyone to run a website. It lowered the barrier of entry, improved tech literacy, and I wouldn't be where I am today without it. But it's time to cut out the middleman.</p><p>You can run a real server anywhere there's power and an internet connection. You can run a server from your home. You can run it from someone else's home. You can run it from a datacenter in an undisclosed location.</p><figure><img src="https://blog.alexgleason.me/content/images/2021/02/TPB_servers.jpg" alt="" srcset="https://blog.alexgleason.me/content/images/size/w600/2021/02/TPB_servers.jpg 600w, https://blog.alexgleason.me/content/images/2021/02/TPB_servers.jpg 800w" sizes="(min-width: 720px) 720px"><figcaption>Servers for The Pirate Bay at an undisclosed location.</figcaption></figure><p>It's true an ISP can censor, but it's a whole different playing field. You can find datacenters run by Conservative Boomers, Russians, porn companies, and principled free speech advocates. By the time it becomes a bigger problem, I'm sure some of us will be <a href="https://startyourownisp.com/">running our own ISP</a>, too.</p><p>It's a great ability to be able to pick up and move, plug in somewhere else, and continue to stay online. I argue that your chances of survival are much better this way, and Parler is foolish for not going this route. We can do better.</p><h2 id="getting-started-with-a-computer-on-your-home-internet">Getting started with a computer on your home internet</h2><p>Our mission is to run a high-availability production server in a datacenter. But first, we should should experiment with a server at home. Here's what you will need to achieve it:</p><ul><li>An internet connection</li><li>A computer running 24/7</li><li>A router that lets you configure port forwarding</li><li>Ethernet cables</li></ul><p>For higher availability, you may consider:</p><ul><li>Battery backup</li><li>Wireless 4G backup connection</li><li>Fiber-optic internet connection</li></ul><figure><img src="https://blog.alexgleason.me/content/images/2021/02/image.png" alt=""><figcaption>The 'first' Pirate Bay server, on display at the Computer Museum in Link√∂ping, Sweden.</figcaption></figure><p>Running a server at home is a good starting point. It could serve as a testing facility, production backup, or even serve a small online community. Chances are, you already have all the equipment needed.</p><p>Check out <a href="https://www.reddit.com/r/homelab/">/r/homelab</a> on Reddit for inspiration.</p><p>It is critical you have fast enough <strong>upload </strong>speeds if you're serving real users. Check out <a href="https://www.speedtest.net/">speedtest.net</a> to find out.</p><p>With upload speeds as low as 5 Mbps, you may be able to host an online community with 20,000 users. Keep in mind your video calls will compete for upload bandwidth on the home network.</p><p>If you score a fiber internet connection, that is really good, as it can give up to 1 Gbps <em>upload</em> speeds. That's quite literally datacenter levels of bandwidth at your home.</p><p>With this setup, you must be able to accept power outages and potential network failures. A battery backup and wireless internet backup can help with this.</p><p>Some people have taken this concept very far, building literal datacenters in their homes.</p><figure><img src="https://blog.alexgleason.me/content/images/2021/02/datacenter.jpg" alt="" srcset="https://blog.alexgleason.me/content/images/size/w600/2021/02/datacenter.jpg 600w, https://blog.alexgleason.me/content/images/2021/02/datacenter.jpg 800w" sizes="(min-width: 720px) 720px"><figcaption>Home datacenter by Qu√©bec, Canada IT Teacher <a href="https://ve2cuy.wordpress.com/my-home-data-center/">VE2CUY</a>.</figcaption></figure><p>To make your computer accessible from the outside world, you can configure a port forward in your router. This will allow users to visit your public IP address to access your home server. You may then accordingly set up some domain names for your public IP.</p><figure><img src="https://blog.alexgleason.me/content/images/2021/02/Screenshot-from-2021-02-10-14-12-38.png" alt="" srcset="https://blog.alexgleason.me/content/images/size/w600/2021/02/Screenshot-from-2021-02-10-14-12-38.png 600w, https://blog.alexgleason.me/content/images/size/w1000/2021/02/Screenshot-from-2021-02-10-14-12-38.png 1000w, https://blog.alexgleason.me/content/images/2021/02/Screenshot-from-2021-02-10-14-12-38.png 1011w" sizes="(min-width: 720px) 720px"><figcaption>My home router, forwarding ports 80 and 443 to my server's local IP.</figcaption></figure><p>Some ISPs offer expensive business plans that give you a static IP address, but I just used my dynamic IP. It seems to change rarely, if ever.</p><h2 id="obtaining-a-rack-server">Obtaining a rack server</h2><p>When running a home server isn't enough, you'll need to move into a datacenter.</p><p>Before getting into a datacenter, you'll need a computer than can fit into a standard rack. Rack servers are very similar to desktops, but come in a form factor of 1U, 2U, 3U, and 4U.</p><p>1U describes the height. 2U is the same height as two 1U servers, and so on. A typical rack at a datacenter is 42U, so it can fit fourty-two 1U servers, or twenty-one 2U. The depth of a server is also variable, but that doesn't really matter unless you're buying a rack. Servers are all the same width.</p><p>The server I chose is a <a href="https://downloads.dell.com/manuals/all-products/esuprt_ser_stor_net/esuprt_poweredge/poweredge-r720_reference-guide_en-us.pdf">Dell PowerEdge R720</a>, which I purchased for $450 off eBay. This 2U server has 32 vCores, 64 GB of RAM, and a RAID interface with 8 HDD slots.</p><figure><img src="https://blog.alexgleason.me/content/images/2021/02/586c2473c206a75b0fcf9ff210f3946c712b8c759aac11a72175aa3f4a72fe8b.jpeg" alt="" srcset="https://blog.alexgleason.me/content/images/size/w600/2021/02/586c2473c206a75b0fcf9ff210f3946c712b8c759aac11a72175aa3f4a72fe8b.jpeg 600w, https://blog.alexgleason.me/content/images/size/w1000/2021/02/586c2473c206a75b0fcf9ff210f3946c712b8c759aac11a72175aa3f4a72fe8b.jpeg 1000w, https://blog.alexgleason.me/content/images/2021/02/586c2473c206a75b0fcf9ff210f3946c712b8c759aac11a72175aa3f4a72fe8b.jpeg 1478w" sizes="(min-width: 720px) 720px"><figcaption>My Dell PowerEdge R720 connected to my home internet.</figcaption></figure><p>It connects to the wall with standard power cables. There are 4 Ethernet ports, two USB ports, and a VGA input for attaching a screen.</p><p>Note that it's a lot bigger than you think! Make sure you have space for it.</p><p>I chose a PowerEdge because they're beloved by hobbyists, and a lot of information exists about them online. My model is from 2012, which seems to be a sweet spot between power and affordability. These machines are built to last a very long time.</p><p>Other models from that era are equally good. For a 1U option, consider a PowerEdge R320. To understand the naming convention: the R stands for "rack", while the R3xx and R7xx are 1U and 2U products respectively. The <a href="https://www.dell.com/en-us/work/shop/dell-poweredge-servers/sc/servers/poweredge-rack-servers">newest PowerEdge models right now</a> are the R340 and R740.</p><p>You should run this server from your home internet at first, while you get things up and running.</p><h3 id="installing-hard-drives">Installing hard drives</h3><p>For obvious reasons, hard drives were not included. Right now, refurbished 4TB SATA HDDs have the best cost per Gigabyte. I bought some off Amazon. HGST brand is a good bet, as they are inexpensive refurbished Western Digital drives with a different label.</p><figure><img src="https://blog.alexgleason.me/content/images/2021/02/sata_vs_sas.jpg" alt="" srcset="https://blog.alexgleason.me/content/images/size/w600/2021/02/sata_vs_sas.jpg 600w, https://blog.alexgleason.me/content/images/2021/02/sata_vs_sas.jpg 1000w" sizes="(min-width: 720px) 720px"><figcaption>SATA drive on top, SAS on the bottom.</figcaption></figure><p>It's worth noting most servers support SAS drives also. SAS is an alternative to SATA with better reliability and a different performance profile. The connector in my R720 is actually a SAS connector, but SATA drives fit into them and work just fine.</p><p>I went with SATA for my build because of better price and availability. Just know it's an option, and don't mix and match them while doing RAID.</p><h3 id="differences-in-ram">Differences in RAM</h3><p>My PowerEdge uses DDR3 RDIMM memory. I should note that UDIMM and LDIMM are also options. Traditional desktop computers use UDIMM (unbuffered memory), while servers have an option between 3 different types. You must not mix different types in the same computer.</p><figure><img src="https://blog.alexgleason.me/content/images/2021/02/d6974031befa18427714fb894de3757f63efb945adfef013feee9ea8464cdd92.png" alt="" srcset="https://blog.alexgleason.me/content/images/size/w600/2021/02/d6974031befa18427714fb894de3757f63efb945adfef013feee9ea8464cdd92.png 600w, https://blog.alexgleason.me/content/images/size/w1000/2021/02/d6974031befa18427714fb894de3757f63efb945adfef013feee9ea8464cdd92.png 1000w, https://blog.alexgleason.me/content/images/size/w1600/2021/02/d6974031befa18427714fb894de3757f63efb945adfef013feee9ea8464cdd92.png 1600w, https://blog.alexgleason.me/content/images/size/w2400/2021/02/d6974031befa18427714fb894de3757f63efb945adfef013feee9ea8464cdd92.png 2400w" sizes="(min-width: 720px) 720px"><figcaption>Registered memory (RDIMM)</figcaption></figure><p>RDIMM (registered memory) is the most common type of memory for servers. Each stick contains an extra chip (a register) used to reduce load to the memory controller, letting your hardware last longer.</p><p>When upgrading RAM, you should also pay special attention to the <strong>rank</strong> of the memory. Rank is usually a number between 1 and 4. Your server has a maximum allowed rank per channel, so if the total rank is too high you might have to leave some slots empty.</p><h3 id="installing-an-os">Installing an OS</h3><p>For the OS, I cannot recommend <a href="https://www.proxmox.com/en/proxmox-ve">Proxmox VE</a> enough. It allows you to easily create virtual machines without much knowledge or pain.</p><figure><img src="https://blog.alexgleason.me/content/images/2021/02/Screenshot-from-2021-02-09-14-06-22.png" alt="" srcset="https://blog.alexgleason.me/content/images/size/w600/2021/02/Screenshot-from-2021-02-09-14-06-22.png 600w, https://blog.alexgleason.me/content/images/2021/02/Screenshot-from-2021-02-09-14-06-22.png 951w" sizes="(min-width: 720px) 720px"><figcaption>Proxmox VE running on my server.</figcaption></figure><p>I recommend this for a first server because of its flexibility, and you can always add bare metal nodes to the network later. All virtual machines appear as first-class citizens on the host network, so you can easily network them with physical nodes.</p><h3 id="further-learning">Further learning</h3><p>YouTube has been a godsend for helping me learn all this stuff and set it up. Here are a few recommendations:</p><ul><li><a href="https://www.youtube.com/watch?v=86KK_dZoCJ0">Manually Updating the Firmwares on a Dell PowerEdge R610</a> by Rob Willis</li><li><a href="https://www.youtube.com/watch?v=ck3gx9HB9-k&amp;list=PLSNNzog5eydtmcbcbc1b8pVRkgre3vNUy">Switching and Routing</a> by Sunny Classroom</li><li><a href="https://www.youtube.com/watch?v=6-66D9J5PkY">Data Center NETWORKS (what do they look like??)</a> by NetworkChuck</li><li><a href="https://www.youtube.com/watch?v=hdoBQNI_Ab8">How to Virtualize Your Home Router / Firewall Using pfSense</a> by Techno Tim</li><li><a href="https://www.youtube.com/watch?v=wFCc3ts74pQ">A DAY in the LIFE of the DATA CENTRE | RACKING SERVERS with ASH &amp; JAMES!</a> by Custodian Data Centres</li></ul><h2 id="installing-your-server-at-a-local-datacenter">Installing your server at a local datacenter</h2><p>Once your rack server is all set up and ready to go, it's time to move it to a datacenter.</p><p>Some datacenters are privately owned by a single company like Google, but many others are independent companies that lease their racks to anyone willing to pay. This is called <em>colocation</em>.</p><figure><img src="https://blog.alexgleason.me/content/images/2021/02/h2_data_center_banner_bg.jpg" alt="" srcset="https://blog.alexgleason.me/content/images/size/w600/2021/02/h2_data_center_banner_bg.jpg 600w, https://blog.alexgleason.me/content/images/2021/02/h2_data_center_banner_bg.jpg 800w" sizes="(min-width: 720px) 720px"><figcaption><a href="https://www.datafoundry.com/">Data Foundry</a>, an independent Houston datacenter offering colocation.</figcaption></figure><p>If you live near a metropolitan area, chances are there's a datacenter nearby willing to let you install your own server. You will get access to power, high speed internet, and multiple layers of security.</p><p>Try searching "&lt;my city&gt; datacenter" or "&lt;my city&gt; ISP".</p><p>If they offer it, I recommend scheduling a tour with a local datacenter. It's a lot of fun and will give you a better idea of what you're dealing with.</p><p>Most datacenters only lease by the rack. These racks can hold up to 42 servers and are far too expensive. What you need is a company that lives <em>inside </em>the datacenter and is willing to lease you space <em>within</em> a single rack. You are looking for something like this:</p><figure><img src="https://blog.alexgleason.me/content/images/2021/02/Screenshot-from-2021-02-10-12-40-34.png" alt="" srcset="https://blog.alexgleason.me/content/images/size/w600/2021/02/Screenshot-from-2021-02-10-12-40-34.png 600w, https://blog.alexgleason.me/content/images/size/w1000/2021/02/Screenshot-from-2021-02-10-12-40-34.png 1000w, https://blog.alexgleason.me/content/images/2021/02/Screenshot-from-2021-02-10-12-40-34.png 1151w" sizes="(min-width: 720px) 720px"><figcaption>Colo pricing from <a href="https://www.layerhost.com/houston-colocation">LayerHost</a> in Houston. LayerHost is located inside of Data Foundry.</figcaption></figure><p>When I installed my server at the datacenter, it went something like this:</p><ol><li>I purchased a plan from the website.</li><li>The datacenter provided me network information over email, including a static IPv4 block, which I used to configure my server's network.</li><li>Using support tickets, we scheduled a time to install the server.</li><li>On that day, I drove to the datacenter and parked. I sent a text message to the provided phone number and a technician came outside. We wheeled my server in on a cart, through some doors, into the rack area.</li><li>The technician installed my server on the rack and connected it to the network.</li><li>I made final changes and tested that I could access my server from outside.</li><li>That's it! Voil√†, you're in a datacenter.</li></ol><p>While this may seem daunting, it is a necessary next step for freedom online. I hope that more people will follow this path of running their ‚Ä¶</p></div></section></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.alexgleason.me/run-your-own-server/">https://blog.alexgleason.me/run-your-own-server/</a></em></p>]]>
            </description>
            <link>https://blog.alexgleason.me/run-your-own-server/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26134691</guid>
            <pubDate>Sun, 14 Feb 2021 18:20:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[(Very) Basic Intro to Elliptic Curve Cryptography]]>
            </title>
            <description>
<![CDATA[
Score 221 | Comments 40 (<a href="https://news.ycombinator.com/item?id=26134240">thread link</a>) | @wagslane
<br/>
February 14, 2021 | https://qvault.io/2020/09/17/very-basic-intro-to-elliptic-curve-cryptography/ | <a href="https://web.archive.org/web/*/https://qvault.io/2020/09/17/very-basic-intro-to-elliptic-curve-cryptography/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="text">
<p>Elliptic curve cryptography is a modern <a aria-label=" (opens in a new tab)" href="https://searchsecurity.techtarget.com/definition/public-key" target="_blank" rel="noreferrer noopener nofollow">public-key&nbsp;encryption&nbsp;</a>technique based on mathematical elliptic curves and is well-known for creating smaller, faster, and more efficient cryptographic keys. For example, <a aria-label=" (opens in a new tab)" href="https://bitcoin.org/" rel="noreferrer noopener nofollow" target="_blank">Bitcoin</a> uses ECC as its asymmetric cryptosystem because of its lightweight nature.</p>
<p>In this introduction to ECC, I want to focus on the high-level ideas that make <a aria-label="ECC (opens in a new tab)" rel="noreferrer noopener nofollow" href="https://en.wikipedia.org/wiki/Elliptic-curve_cryptography" target="_blank">ECC</a> work. For the purposes of keeping this article easier to digest, I‚Äôll omit implementation details and mathematical proofs, we can save those for another time.</p>
<h2>What is elliptic curve cryptography used&nbsp;for?</h2>
<p>A common use of ECC is to encrypt data so that only authorized parties can decrypt it. This has several obvious use cases but is most often used to encrypt internet traffic. For example, on the <a href="https://qvault.io/">Qvault web app</a> I could used ECC to encrypt a verification email so that no one but the recipient can read the message.</p>
<h2>ECC is public-key cryptography</h2>
<p>There are many types of public-key cryptography, and Elliptic Curve Cryptography is just one flavor. Other algorithms include <a aria-label="RSA (opens in a new tab)" rel="noreferrer noopener nofollow" href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)" target="_blank">RSA</a>, <a aria-label="Diffie-Helman (opens in a new tab)" rel="noreferrer noopener nofollow" href="https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange" target="_blank">Diffie-Helman</a>, etc. Let‚Äôs go over a quick background of public-key cryptography as a jumping-off point, so that I can discuss ECC and build on top of these ideas. By all means, study more in-depth on public-key cryptography when you have the time.</p>
<p>Public-key cryptography allows the following to happen:</p>

<p>We create two keys, a public key, and a private key. The public key is given freely, and any party can encrypt data by using it. However, the private key is kept secret and only those who hold it will have the ability to decrypt data.</p>
<h2>An example of public-key cryptography</h2>
<p>Let‚Äôs pretend that Facebook is going to receive a private post from Donald Trump. Facebook needs to be able to ensure that when the ex-president sends his post over the internet, no one in the middle (Like the NSA, or an internet service provider) can read the message. The entire exchange using public-key cryptography would go like this:</p>
<ul><li>Donald Trump Notifies Facebook that he wants to send them a private post</li><li>Facebook sends Donald Trump their public key</li><li>Donald Trump uses the public key to encrypt his post:</li></ul>
<p><em>‚ÄúI love Fox and Friends‚Äù + Public Key = ‚Äús80s1s9sadjds9s‚Äù</em></p>
<ul><li>Donald Trump sends only the encrypted message to Facebook</li><li>Facebook uses its private key to decrypt the message:</li></ul>
<p><em>‚Äús80s1s9sadjds9s‚Äù + Private Key = ‚ÄúI love Fox and Friends‚Äù</em></p>
<p>As you can see, this form of encryption can be quite useful. Here are some key points:</p>
<ul><li>The public key can safely be sent to anyone. It‚Äôs public.</li><li>The private key must be kept safe because if someone in the middle were to get the private key, they could decrypt messages.</li><li>Computers can quickly use the public key to encrypt a message, and quickly use the private key to decrypt a message.</li><li>Computers require a <em>very</em> long time (millions of years) to derive the original data from the encrypted message if they don‚Äôt have the private key.</li></ul>
<h2>How it Works: The Trapdoor&nbsp;Function</h2>
<p>The crux of all public-key cryptographic algorithms is that they each have their own unique trapdoor function<strong>. </strong>A trapdoor function is a function that can only be computed one way, or at least can only be computed one way <em>easily</em> (in less than millions of years using modern computers).</p>
<h3>Not a trapdoor function:</h3>
<p><code>A + B = C</code></p>
<p>If I‚Äôm given A and B I can compute C. However, if I‚Äôm given B and C I can also compute A. This is not a trapdoor function.</p>
<h3>Trapdoor function:</h3>
<p><code>"I love Fox and Friends‚Äù + Public Key --&gt; s80s1s9sadjds9s</code></p>
<p>If given <em>‚ÄúI love Fox and Friends‚Äù</em> and the public key, I can produce <code>s80s1s9sadjds9s</code>, but if given <code>s80s1s9sadjds9s</code> and the Public Key I can‚Äôt produce <em>‚ÄúI love Fox and Friends‚Äù</em></p>
<p>In RSA, which is arguably the most widely used public-key cryptosystem, the trapdoor function relies on how hard it is to factor large numbers into their prime factors.</p>
<p><strong>Public Key:</strong> <code>944,871,836,856,449,473</code></p>
<p><strong>Private Key:</strong> <code>961,748,941</code> and <code>982,451,653</code></p>
<p>In the example above the public key is a very large number, and the private key is the two prime factors of the public key. This is a good example of a Trapdoor Function because it is very easy to multiply the numbers in the private key together to get the public key, but if all you have is the public key it will take a very long time using a computer to re-create the private key.</p>
<p><em>Note: In real cryptography, the private key would need to be 200+ digits long to be considered secure.</em></p>
<h2>What Makes Elliptic Curve Cryptography Different?</h2>
<p>You would use ECC for the same reasons as RSA. ECC and RSA both generate a public and private key and allow two parties to communicate securely. One advantage to ECC however, is that a 256-bit key in ECC offers about the same security as a 3072-bit key using RSA. ECC allows resource-constrained systems like smartphones, embedded computers, and cryptocurrency networks to use ~10% of the storage space and bandwidth required by RSA.</p>
<h2>ECC‚Äôs Trapdoor&nbsp;Function</h2>
<p>This is probably why most of you are here. The trapdoor function is what makes ECC special and different than RSA. The trapdoor function is similar to a mathematical game of pool.</p>
<p>First, we start with an arbitrary point on the curve. Next, we use the dot function to find a new point. Finally, we keep repeating the dot function to hop around the curve until we finally end up at our last point. Let‚Äôs walk through the algorithm.</p>

<ul><li>Starting at <code>A</code>:</li><li><code>A dot B = -C</code> (Draw a line from A to B and it intersects at -C)</li><li>Reflect across the X-axis from -C to C</li><li><code>A dot C = -D</code> (Draw a line from A to C and it intersects -D)</li><li>Reflect across the X-axis from -D to D</li><li><code>A dot D = -E</code> (Draw a line from A to D and it intersects -E)</li><li>Reflect across the X-axis from -E to E</li></ul>
<p>This is a great trapdoor function because if you know where the starting point (A) is and how many hops are required to get to the ending point (E), it‚Äôs very easy to find the ending point. On the other hand, if all you know is where the starting point and ending point are, it‚Äôs nearly impossible to find how many hops it took to get there.</p>
<p>Public Key: Starting Point A, Ending Point E</p>
<p>Private Key: Number of hops from A to E</p>
<h2>Questions?</h2>
<p>Here are a few questions I had when I first learned about ECC. Hopefully, I can address them properly.</p>
<h3>1. How is the second point found? If the dot function is basically drawing a line between two points, don‚Äôt you need a second point to start&nbsp;with?</h3>
<p>No. The second point (we will call it -R below) is actually the result of P dot P (let‚Äôs assume the first point is called P)</p>
<p><code>P dot P = -R</code></p>
<p>So what is <code>P dot P</code>? It is actually just the tangent line of P. See the graphic below:</p>

<h3>2. What happens if the dot function produces a line that will go way off out to some&nbsp;extreme?</h3>
<p>If the line doesn‚Äôt hit the curve close to the origin, we can actually define a maximum X value where the line will wrap back around and start from the beginning again. See the graphic below for an example.</p>

<h3>3. If the number of hops is the private key, can‚Äôt I just count the hops until I hit the endpoint?</h3>
<p>Nope! The number of hops is <em>very</em> large, something like <code>2^256</code>. It would take far too long to compute each hop one by one, for example <code>p dot p dot p dot p ...</code>.</p>
<p>If however, you know the number of hops you can use an <a href="https://en.wikipedia.org/wiki/Exponentiation_by_squaring" target="_blank" aria-label="exponentiation (opens in a new tab)" rel="noreferrer noopener nofollow">exponentiation</a> trick to find the ending point quite quickly. For example, and omitting the details of elliptic curve operations: <code>2P = P dot P</code> and then <code>4P = 2P dot 2P</code>. This allows you to get up to those crazy high calculations exponentially faster.</p>
<h2>Who Cares?</h2>
<p>ECC is used as the cryptographic key algorithm in Bitcoin because it potentially can save ~90% of the resources used by a similar RSA system. It seems that each year we see more systems moving from RSA to a more modern elliptic curve approach.</p>
<div><div>
<h2>Thanks For Reading!</h2>
<p>If you‚Äôre interested in furthering your CS career, take our <a href="https://qvault.io/">computer science courses</a></p>
<p>Follow and hit us up on Twitter <a href="https://twitter.com/q_vault" rel="noopener">@q_vault</a> if you have any questions or comments, and if we‚Äôve made a mistake be sure to <a href="https://qvault.io/contact/">let us know</a> so we can get it corrected!</p>
<p><a href="https://mailchi.mp/5c7f5c281bbe/qvault-newsletter-subscribe" rel="noopener">Subscribe</a> to our newsletter for more programming articles</p>
</div></div>
<h2>Related Articles</h2>
<ul><li><a href="https://qvault.io/2020/01/29/hashing-passwords-python-cryptography-examples/">Hashing Passwords ‚Äì Python Cryptography Examples</a></li><li><a href="https://qvault.io/2020/07/08/how-sha-2-works-step-by-step-sha-256/">How SHA-2 Works Step-By-Step (SHA-256)</a></li><li><a href="https://qvault.io/2019/07/09/is-aes-256-quantum-resistant/">Is AES-256 Quantum Resistant?</a></li></ul>
 </div></div>]]>
            </description>
            <link>https://qvault.io/2020/09/17/very-basic-intro-to-elliptic-curve-cryptography/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26134240</guid>
            <pubDate>Sun, 14 Feb 2021 17:33:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Comcast Backs Off Plan to Impose New Fees on Heavy-Duty Internet Users]]>
            </title>
            <description>
<![CDATA[
Score 29 | Comments 7 (<a href="https://news.ycombinator.com/item?id=26134040">thread link</a>) | @CapitalistCartr
<br/>
February 14, 2021 | https://jcitytimes.com/comcast-backs-off-plan-to-impose-new-fees-on-heavy-duty-internet-users/ | <a href="https://web.archive.org/web/*/https://jcitytimes.com/comcast-backs-off-plan-to-impose-new-fees-on-heavy-duty-internet-users/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div id="pico"><h3>Cable-company criticized for asking customers to pay more during public-health emergency, when high-speed internet is critical to students, some employees</h3><p><em>This story was written and produced by NJ Spotlight. It is being republished under a special NJ News Commons content-sharing agreement related to COVID-19 coverage. To read more, visit njspotlight.com.</em></p><p><em>Full story link ‚Äì <a href="https://www.njspotlight.com/2020/06/we-cant-unsee-racial-inequities-in-nj-made-clear-by-covid-19-whats-the-plan-to-address-them/" target="_blank" rel="noopener noreferrer">HERE</a>.</em></p><p data-autoattached="true">By Tom Johnson</p><p>Comcast is postponing until July its plan to impose new fees on customers who are heavy users of its internet services after widespread criticism for proposing to increase bills during a public-health emergency.</p><p>The postponement came after pressure from lawmakers and consumer advocates. They argued such a step was inappropriate at a time when many students and others are relying heavily on the internet because of the coronavirus pandemic. The cap on data use was effective Jan. 1 for Comcast customers in the Northeast region, including New Jersey,</p><p>In New Jersey, lawmakers have introduced legislation (<a href="https://bf1f7a75-24f0-4a30-89f1-4410f141a906/v" target="_blank" rel="noopener">S-3410</a>) that would prevent internet service providers from increasing rates during a public-health emergency. In Pennsylvania, the state‚Äôs attorney general‚Äôs office secured a commitment last week from Comcast, a Philadelphia-based cable company, to delay imposing the new fees on data usage to current customers there and throughout the Northeast.</p><p>The plan calls for a monthly data-usage cap of 1.2 terabytes. If customers exceed the data limit, they could be charged anywhere from $10 to $100 on top of their existing bills, depending on their data usage. Comcast began monitoring customers‚Äô data usage at the beginning of the year, but had held off imposing the fees until March.</p><h3>‚ÄòUnconscionable‚Äô to levy an extra fee</h3><p>‚ÄúDuring the COVID-19 pandemic, it is unconscionable for a cable company to levy an extra fee for using their internet,‚Äô‚Äô said Sen. Nicholas Scutari (D-Union), the sponsor of the bill in the New Jersey Legislature. ‚ÄúRight now people are relying on their home internet more than ever ‚Äî for work, for their children to attend school, to shop for groceries and to schedule COVID-19 testing and vaccinations.‚Äô‚Äô</p><p>The legislation, introduced a week ago, has not yet moved in either house of the Legislature.</p><p>In a news release, Comcast said it is delaying imposition of the new fees for six months to provide its customers in the Northeast time to familiarize themselves with the data-usage plan and their service options.</p><p>The company said the new limit on data usage only affects a ‚Äúvery small percentage of its customers.‚Äô‚Äô Comcast is also giving its low-income customers some help by doubling the speed for those who subscribe to its Internet Essentials service and not imposing data limits on that plan for the rest of the year. In addition, the company is waiving early termination fees for customers who do not want to be subject to caps on data usage.</p><p>In New Jersey, the state Board of Public Utilities has received some complaints from customers about the new fee but is unable to take action because it does not regulate internet service, according to Peter Peretzman, a spokesman for the agency. There are no plans to investigate the problem, he added.</p><p><em>Photo by <a href="https://unsplash.com/@nasa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">NASA</a> on </em><a href="https://unsplash.com/s/photos/internet?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText"><em>Unsplash</em></a></p></div></div></div>]]>
            </description>
            <link>https://jcitytimes.com/comcast-backs-off-plan-to-impose-new-fees-on-heavy-duty-internet-users/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26134040</guid>
            <pubDate>Sun, 14 Feb 2021 17:13:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Chris Sacca's Act 2: Lowercarbon Capital]]>
            </title>
            <description>
<![CDATA[
Score 112 | Comments 55 (<a href="https://news.ycombinator.com/item?id=26133941">thread link</a>) | @simonebrunozzi
<br/>
February 14, 2021 | https://lowercarboncapital.com/act2/ | <a href="https://web.archive.org/web/*/https://lowercarboncapital.com/act2/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<div>
<div>
<div>
<div><figure><img loading="lazy" src="https://i0.wp.com/lowercarboncapital.com/wp-content/uploads/2021/02/leslie-cross-bWYTWRx9yRM-unsplash2-e1612971496415-edited-2.jpg?resize=1292%2C808&amp;ssl=1" alt="" width="1292" height="808" srcset="https://i0.wp.com/lowercarboncapital.com/wp-content/uploads/2021/02/leslie-cross-bWYTWRx9yRM-unsplash2-e1612971496415-edited-2.jpg?w=1723&amp;ssl=1 1723w, https://i0.wp.com/lowercarboncapital.com/wp-content/uploads/2021/02/leslie-cross-bWYTWRx9yRM-unsplash2-e1612971496415-edited-2.jpg?resize=300%2C188&amp;ssl=1 300w, https://i0.wp.com/lowercarboncapital.com/wp-content/uploads/2021/02/leslie-cross-bWYTWRx9yRM-unsplash2-e1612971496415-edited-2.jpg?resize=1024%2C640&amp;ssl=1 1024w, https://i0.wp.com/lowercarboncapital.com/wp-content/uploads/2021/02/leslie-cross-bWYTWRx9yRM-unsplash2-e1612971496415-edited-2.jpg?resize=768%2C480&amp;ssl=1 768w, https://i0.wp.com/lowercarboncapital.com/wp-content/uploads/2021/02/leslie-cross-bWYTWRx9yRM-unsplash2-e1612971496415-edited-2.jpg?resize=1536%2C960&amp;ssl=1 1536w" sizes="(max-width: 1000px) 100vw, 1000px" data-recalc-dims="1"></figure></div>
</div>
</div>







<p><em>Because we‚Äôve run the numbers, and shit‚Äôs not great</em>.</p>







<p>Four years ago, Crystal and I retired from venture capital to carve out more time for things that matter, with Earth‚Äôs climate disaster at the top of the list. Why? The situation is much worse than it seems. The planet is warming faster than experts predicted. Rising temperatures fuel lethal heat waves, year-round fires, destructive storms, and epic droughts that are already killing thousands of people around the globe, displacing millions more, and sowing the seeds of famine, disease, and war. Heavy stuff.</p>



<p>Academic debates about exactly how many degrees the planet will warm, which species will go extinct, how many millions of people will be killed by extreme weather, which wars and refugee crises will result from drought, and whether sea levels will rise 10, 20, or 30 feet all miss the point. The bottom line is the planet is becoming unlivable. If you‚Äôre the quantitative type, well, we drew some samples, crunched a few numbers and, according to our exact scientific calculations: A lot of shit will be pretty fucked up.</p>



<p>In simplest terms, more carbon equals more heat, and more heat equals more death. This is an established and unavoidable fact. Today, the levels of CO<sub>2</sub> in the atmosphere are higher than at any point in at least 800,000 years (and arguably as far back as 23 million). Pumping all this CO<sub>2</sub> into the sky is like locking ourselves in a car on a sunny day.</p>







<h2><span>What will it take to get us out of this nightmare? </span></h2>



<p>Electric cars and solar panels are awesome but only a part of the picture. To bring down CO<sub>2</sub> in the atmosphere it will take:</p>



<blockquote><p><span><span>01</span></span>   Slashing new emissions of CO<sub>2</sub> and other greenhouse gases to zero.</p><p><span><span>02</span></span>   Sucking up at least a trillion tons of carbon already swirling around the sky.</p><p><span><span>03</span></span>   Buying all of humanity, including those most vulnerable, more time by actively cooling the planet.</p></blockquote>



<p>I am not new to this challenge. Way back when I was at Google, I was tasked with leading many of the company‚Äôs clean energy deals, repping execs in meetings with policy groups and think tanks, and exploring innovative ways to use technology to reduce the carbon footprint of a company that was, at the time, rumored to the be the largest individual power consumer in two or three US states. (If saying that violates my Google NDA, then no, we definitely weren‚Äôt a massive user of electrical power. Nothing to see here.)</p>



<p>In the years that followed, Crystal and I have been active supporters of legislative and regulatory efforts to address the problems, as well as funders of philanthropy and activism in the climate space. We‚Äôve been poking around academic labs, comparing notes with environmental non-profits, briefing political leaders, cajoling philanthropists, sponsoring research and primers, and advising companies concerned about the climate emergency.&nbsp;</p>



<p>After almost 20 years of this work, here is what we know to be true:</p>



<p><strong>Policy change alone ain‚Äôt gonna get us there.</strong> High fives to everyone who is working on clean tech regulatory initiatives. This vital work brings down real costs, creates research breakthroughs, and keeps urgent climate issues front and center. But even the most aggressive ideas on the table today fall short of the drastic action needed.&nbsp;</p>



<p><strong>Guilt and shame don‚Äôt and won‚Äôt change anything at scale. </strong>There simply aren‚Äôt enough people willing to buy more expensive products nor companies on board with overpaying for sustainable materials just because they feel bad. Cheers to consumers and companies that spend a little more to choose options with climate in mind. You‚Äôve undoubtedly helped create a new generation of climate friendly companies. However, we need about seven billion more of you to get on board before the impact will be meaningful enough.&nbsp;</p>



<p><strong>Philanthropy is way too small and cautious</strong>. For the better part of twenty years, climate philanthropy has been overwhelmingly focused on consumer awareness campaigns to persuade people that climate change is real and to turn out their lights. But there‚Äôs been too little appetite to invest in hardcore, massive change. Bless you and those paper straws, but unless we zero out the billions of tons of CO<sub>2</sub> emissions from huge sectors like aviation, steelmaking, industrial chemicals, building, and farming, we are screwed.</p>



<p>So, policy, philanthropy, and individual behavior do have roles to play, but the real solutions to the carbon nightmare will win because they‚Äôre cheaper, better, faster, stronger, simpler, and just plain cooler than what‚Äôs available today.&nbsp;</p>



<p>Markets already understand that it‚Äôs too damn expensive to keep powering our economy by digging up and burning old dinosaur bones. In most places today, solar and wind are cheaper and scale faster. What you might not know yet is that technologies that grow chemicals in bioreactors or boost crop yields are already outperforming 100-year-old industrial processes that are dirty and dangerous. We see this happening in protein, transportation, chemicals, building materials, and even mining too. This radical shift isn‚Äôt just because of some warm and fuzzies. These are real businesses, with insane growth, and some posting nine-figure revenue run rates.</p>



<p>We‚Äôre on a clear trajectory to 8.5 billion people on this planet. I‚Äôm going out on a limb and predict they‚Äôll want to eat, build houses, go places, buy stuff, and enjoy life. Fair to say? The most profitable companies meeting this demand will be those that sell products and services that use less carbon because they are ultimately the cheapest to offer. In simple terms, cutting gigatons of CO<sub>2</sub>, mass market adoption, and generating piles of money will go hand-in-hand.</p>







<h2><span>Who knew we would look forward to email?</span></h2>



<p>When the word got out that we were starting to dig into climate tech, our inboxes blew up. Notes came in from very small and unreasonably ambitious teams taking on intimidatingly large projects to slash CO<sub>2</sub> emissions and suck carbon right out of the air. Frankly, we‚Äôve never felt so energized reading our email. It was everything we loved about startups colliding with all of the urgency we felt for helping a planet on fire.&nbsp;</p>



<p>There is also a dynamic that makes climate tech today different from clean tech 15 years ago. It reminds me of the dramatic shift in startup economics that made YCombinator and its companies possible. Back then, the rise of open-source coding tools, cloud hosting, and the elimination of legal and financing friction empowered a new type of company and a new type of company-builder. The old way required millions of dollars and a rash of bankers and lawyers to even consider writing the first line of code. Suddenly startups had tiny, ragtag teams, usually without any fancy MBAs on board, raising tens to hundreds of thousands of dollars for services and apps that they built and launched within weeks.</p>



<p>In climate tech, we have seen the same evolution. I appreciate the investors who have been plowing money into this stuff for decades and I admire their passion and commitment to doing the right thing. But, too often low-carbon businesses were among the most expensive to start. CapEx was bonkers right out of the gate, and most companies relied upon government intervention to even approach viability.</p>



<p>Are we excited to see the Biden/Harris administration finally at the wheel? Hell yes. They believe in science and have made climate a priority across the entire federal government. We have the deepest respect for Secretary Kerry and Gina McCarthy, and we admire the depth of expertise and hustle we are seeing across the staffers accepting roles to serve the USA to advance climate work. As members of Climate Leaders for Biden, and as a consequence of our involvement across the industry, we have already been in close touch with the administration and we are beyond heartened to see how serious they are about climate. Multiple times, Crystal and I have spoken directly with President Biden about climate and I can assure you he gets the gravity and urgency of the moment. Yet, despite all that, we aren‚Äôt counting on the government‚Äôs direct help in our investment thesis. Why?</p>



<p>Today, with shared lab space, massive computing clusters available for rent, proliferation of machine learning, cheap renewable electricity, the discovery of CRISPR/Cas9, breakthroughs in electrochemistry, and more streamlined tech transfer from universities, true seed-stage climate tech startups are possible at scale. Some benefit from grants and government investment, and no doubt healthy public investment in research and science lifts all boats, but barely any of these climate tech companies count on governments for handouts because they increasingly can rely upon free markets to reward them with customers. Add to this what might be the first generation of hard science engineers who, inspired by a prior, similar shift in computer science academia, now go to school knowing from day one they want to graduate to directly become company founders. These teams are taking their innovations straight to consumers and enterprises who may not vote for the same people nor share the same climate values, but who buy their products and services because they are just simply cheaper and better.&nbsp;&nbsp;</p>







<h2><span>We call this thing Lowercarbon Capital.</span></h2>



<p>It wasn‚Äôt in the master plan to get back into the investing world full-time. But after a few years of doing this work, we picked up our heads and realized we now have a portfolio of over 30 climate teams and growing.&nbsp;</p>



<p>Our startups straddle a delicate line between, ‚ÄúWhaaa? That‚Äôs absolutely bananas!‚Äù to, ‚ÄúNo way. Are you f‚Äôing kidding me?!‚Äù You know, chill stuff like confining plasma that‚Äôs hotter than the sun or growing full-on real meat steaks in a vat. Maybe using microbes to make hundreds of millions of dollars of industrial chemicals is your thing, or you‚Äôre into kelp-growing robots in the high seas. I‚Äôm kinda partial to ‚Ä¶</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://lowercarboncapital.com/act2/">https://lowercarboncapital.com/act2/</a></em></p>]]>
            </description>
            <link>https://lowercarboncapital.com/act2/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26133941</guid>
            <pubDate>Sun, 14 Feb 2021 17:02:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A ‚ÄúPredatory‚Äù Stop-Sign Camera Is Terrorizing My Neighborhood]]>
            </title>
            <description>
<![CDATA[
Score 63 | Comments 63 (<a href="https://news.ycombinator.com/item?id=26133260">thread link</a>) | @LordAtlas
<br/>
February 14, 2021 | https://defector.com/a-predatory-stop-sign-camera-is-terrorizing-my-neighborhood/ | <a href="https://web.archive.org/web/*/https://defector.com/a-predatory-stop-sign-camera-is-terrorizing-my-neighborhood/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><div id="pico"><p>Traffic cameras can cross the thin line in law enforcement between keeping citizens safe and fucking them over.&nbsp;</p><p>Full disclosure: I‚Äôm counting myself among the fucked over. In late August, I was notified by the photo enforcement wing of the D.C. Department of Motor Vehicles that I‚Äôd been issued four tickets for ‚Äúpassing‚Äù the same stop sign on four different occasions. Two of the tickets were written on the same day. A stop-sign camera, the lowest-form of traffic cam yet unleashed, got me. The fines totaled $400.</p><figure><img src="https://lh6.googleusercontent.com/IE1N-0rH7w9HBLp1zQWpNnnz0sPCmuNqvuT_JFyAfV41OvUmGHNi9NCKCMTmtIrLndixSJW4-YhU4CHUjBp_whpIuN7wbF0mcNjJ7j8S_dNULTHCQIlOCa-rMD_LKzmbl8I-8iNq" alt=""></figure><p>I try to obey parking and traffic laws. Obsessively even. Not because I‚Äôm cautious or a good citizen. Because I‚Äôm cheap as hell! And I know from experience that D.C. ticket writers will nail you every time you give them a reason to, and lots of times even when you don‚Äôt. Anybody who‚Äôs lived here for any time or even visited much can affirm.</p><p>The last time I wrote a story about the city‚Äôs hyperaggressive ticketing strategies was in the early 1990s. At the time, violent crime was so out of hand here that the place was known as America‚Äôs Murder Capital. But local government‚Äôs most obvious crime-fighting efforts came in the parking realm. D.C. was making so much money off parking violations that officials were actually putting on seminars for leaders from various states and even foreign governments on how to increase revenues through ticket writing. I lived in the very dense Mount Pleasant neighborhood back then and legal parking was hard as hell to find. But even if you found a spot you weren‚Äôt safe. I‚Äôd sometimes spend 15 minutes driving around before landing a spot without a ‚ÄúNo Parking‚Äù sign in play and no painted curb or fire hydrant nearby or any sort of hint at all that this space was off-limits, only to return to my car an hour later to find a pink slip underneath the windshield wiper bogusly saying I‚Äôd violated the two-hour maximum time limit, or finding handwriting on the ticket saying my vehicle was ‚Äúless than 40 feet‚Äù from an intersection or driveway or whatever the ticket writer needed to help meet his or her quota and slap me with a $25-and-up fine. I remember coming out of my apartment one morning and seeing a posse from the Metropolitan Police Department (MPD) walking down the main drag, Mount Pleasant Street, and leaving a ticket on just about every windshield. I asked an officer what was happening and was told that they‚Äôd been ordered by their commander to enforce a law requiring all parked cars to have their wheels turned toward the curb. (Who knew such a law existed?)&nbsp;</p><p>The city made contesting a ticket an all-day affair in which you‚Äôd lose in the end anyway. Your car would get ‚Äú<a href="https://dpw.dc.gov/service/booting-and-impoundment" target="_blank" rel="noreferrer noopener">booted</a>‚Äù and towed by the city if you amassed more than three unpaid parking tickets or total fines above $200, and you couldn‚Äôt register a car or get a vehicle inspection or renew a drivers license in the city without settling your DMV bill. I pretty much always had more than three outstanding tickets, and the penalties doubled after a month, so I often owed the city more in fines than my beater Toyota was even worth. I worked hard trying to beat the system. I stayed on the road by registering my car at my mom‚Äôs address in suburban Virginia, and using that same address for my driver‚Äôs license. I was constantly going to the Virginia DMV and paying a $25 fee to get new license plates that wouldn‚Äôt be on D.C.‚Äôs boot/tow list, which surely had my old tag numbers on it. I knew at the time that my fight wasn‚Äôt exactly righteous. But, well, the city wasn‚Äôt exactly observing Marquess of Queensberry Rules with me either.</p><p>The car wars ended when my jalopy got stolen. Losing the car, even by theft, actually came as a relief. I didn‚Äôt own another vehicle until I left Mount Pleasant in 2002 for the Petworth neighborhood and all its street parking.&nbsp;</p><p>I hadn‚Äôt really thought of the ticketing horrors from my past since the move. But the four stop-sign violations at the same intersection‚Äîat $100 a pop!‚Äîbrought all the bad memories back. The city‚Äôs letter to me telling me about the tickets said there was video of my offenses online. I was able to access only one of the four clips. It was indeed my car in the shot, and it showed that as I approached the four-way stop I slowed down to almost zero miles an hour, but hell if I ever came to a dead stop. The old California stop. By the letter of the law, I was a violator. Dammit.</p><p>But this massive punishment still felt off. I‚Äôve been living about 200 yards from that <a href="https://www.google.com/maps/place/Kansas+Ave+NW+%26+Buchanan+St+NW,+Washington,+DC+20011/@38.946233,-77.0248877,17z/data=!3m1!4b1!4m5!3m4!1s0x89b7c86d4e139bf7:0x7b586b15117de56f!8m2!3d38.946233!4d-77.022699" target="_blank" rel="noreferrer noopener">four-way-stop intersection</a> for 19 years now, and have known about that stop-sign camera for a huge chunk of that time. But I‚Äôd never gotten a single ticket from it. I‚Äôd never even heard of anybody else in the neighborhood getting nabbed. But here I get four in one load of mail. </p><p>So I started looking into the camera that nailed me. Turns out it holds a special place in the shitty history of traffic enforcement. The <a href="https://cluballiance.aaa.com/public-affairs/press-release/?rdl=hartford.aaa.com&amp;Id=8b025de6-9f63-41a4-9541-f223b66c30c9" target="_blank" rel="noreferrer noopener">American Automobile Association</a> described D.C. as the first major city to use photo enforcement for stop-sign violations. And the stop-sign cam in my neighborhood, installed in 2013, was <a href="https://wtop.com/news/2013/08/dc-tests-first-stop-sign-camera/" target="_blank" rel="noreferrer noopener">the first ever in D.C.</a> I found a segment from NBC‚Äôs <a href="https://www.youtube.com/watch?v=5i4cgoxxeIs&amp;ab_channel=DefendYourLiberty" target="_blank" rel="noreferrer noopener"><em>The Today Show</em></a> on the introduction of stop-sign cameras that had NBC reporter Tom Costello doing his stand-up from the same intersection where seven years later I‚Äôd get nabbed. Costello boasted about all the safety benefits the new technology would bring, while Cathy Lanier, chief of the Metropolitan Police Department at the time, told the morning show audience that the cameras were set up because ‚Äúour community has asked us to enforce the law.‚Äù&nbsp;</p><p>‚ÄúNow we‚Äôll be able to do it with less manpower and safer for police officers,‚Äù said Lanier (who left the city a few years after bringing in the cameras to join the NFL as senior vice president in charge of security).&nbsp;&nbsp;</p><figure><img loading="lazy" width="3024" height="1716" src="https://admin.defector.com/wp-content/uploads/sites/28/2021/02/Image-from-iOS-1.jpg?w=1024" alt="stop sign" srcset="https://admin.defector.com/wp-content/uploads/sites/28/2021/02/Image-from-iOS-1.jpg 3024w, https://admin.defector.com/wp-content/uploads/sites/28/2021/02/Image-from-iOS-1.jpg?resize=300,170 300w, https://admin.defector.com/wp-content/uploads/sites/28/2021/02/Image-from-iOS-1.jpg?resize=768,436 768w, https://admin.defector.com/wp-content/uploads/sites/28/2021/02/Image-from-iOS-1.jpg?resize=1024,581 1024w, https://admin.defector.com/wp-content/uploads/sites/28/2021/02/Image-from-iOS-1.jpg?resize=1536,872 1536w, https://admin.defector.com/wp-content/uploads/sites/28/2021/02/Image-from-iOS-1.jpg?resize=2048,1162 2048w, https://admin.defector.com/wp-content/uploads/sites/28/2021/02/Image-from-iOS-1.jpg?resize=1080,613 1080w, https://admin.defector.com/wp-content/uploads/sites/28/2021/02/Image-from-iOS-1.jpg?resize=85,48 85w" sizes="(max-width: 3024px) 100vw, 3024px"><figcaption>Photo by Dave McKenna</figcaption></figure><p>I also found a neighborhood message board with several live threads about the stop-sign camera, full of posts from angry locals who‚Äôd been recently nailed at the same intersection. The more I read, the easier I felt I‚Äôd got off: Others told of getting double-digit tickets, meaning they were facing a four-figure fine. Somebody posted a short video of the camera snapping photos of a car that stopped dead at the intersection.</p><p>This particular stop-sign camera‚Äôs fortunes, however, may well have turned when it flashed at Deepak Gopalakrishna.&nbsp;</p><p>Gopalakrishna happens to be a transportation engineer with a specialty in road safety. He‚Äôs lived in Petworth for years and told me he hadn‚Äôt ever gotten a ticket on Kansas Avenue NW until this summer. He started asking around and found that just about everybody else on his block had also gotten multiple $100 fines. He said his professional background and personal leanings have had him support pro-bike, ‚Äúnot car-friendly‚Äù programs like the <a href="https://visionzeronetwork.org/" target="_blank" rel="noreferrer noopener">Vision Zero</a> project. And he said he has no fixed bias against speed cameras and red light cameras. But the rate at which he‚Äôd been nailed told him that this stop-sign camera had to go.</p><p>‚ÄúI‚Äôve got five tickets,‚Äù Gopalakrishna told me. ‚ÄúBefore I found out about the first one, I‚Äôd gotten four more.‚Äù</p><p>Gopalakrishna FOIA‚Äôd for information on the equipment being used by the city for its stop-sign camera setup and just how many tickets had been issued at that one intersection. He learned that the stop-sign cam‚Äôs sensor in Petworth, a <a href="https://www.smartmicro.com/fileadmin/media/Downloads/Traffic_Radar/Sensor_Data_Sheets__24_GHz_/UMRR_Traffic_Sensor_Type_44_Data_Sheet.pdf" target="_blank" rel="noreferrer noopener">Smartmicro UMrr-11 Type 44 Radar Antenna</a>, had been recalibrated on June 5, 2020. A ticket boom commenced soon after.</p><p>Data from MPD shows that in June 2020, the camera in question snapped 82 violators. Then there were 2,850 tickets in July 2020 (compared to 231 tickets in July 2019). Then the camera started flashing like paparazzi in Cannes: From August through November, a total of 17,216 tickets were issued. That‚Äôs $1,721,600 from one camera at one intersection in just four months.&nbsp;</p><p>Again, I learned years ago that D.C. had a black belt in ticket writing. But today‚Äôs stats floor even me. <a href="https://dccouncil.us/wp-content/uploads/2020/01/dmv20.pdf" target="_blank" rel="noreferrer noopener">D.C. DMV</a> documents show that the city issued 2,869,810 traffic and parking tickets in fiscal year 2019, with fines totaling $375,916,124. That averages out over the year to more than four tickets and about $543 in fines for every man, woman and child living in the city, including those who don‚Äôt drive. (Comprehensive ticket revenues for 2020, which would include the Petworth stop-sign camera windfall, are not yet available.) This is a town with oodles of tourism and, pre-pandemic, teeming with commuters, so visitors paid lots of penalties. But the cam located smack in the middle of my residential neighborhood penalized D.C. residents far more than outsiders.&nbsp; </p><p>According to Gopalakrishna, there‚Äôs no obvious quality-of-life benefit to the citizenry for all the pain folks who live near a stop-sign cam must suffer.</p><p>‚ÄúI want to be very clear: Being against this camera isn‚Äôt being against safety. This isn‚Äôt a safety matter,‚Äù he said. ‚ÄúThis isn‚Äôt like a red-light camera or a speed camera. There‚Äôs no safety study, no data saying, ‚ÄòWow, these stop-sign cameras really have had an impact on safety!‚Äô There‚Äôs nothing. I can point to a lot of things that have worked and are known to work: rumble strips, certain lighting on that stop sign, for example. Take those steps, and you‚Äôll get more people stopping, and you can talk about safety. But, those things don‚Äôt bring in revenue for the city. This camera does. And once you remove the safety component, it‚Äôs just targeting. Targeting one neighborhood.‚Äù</p><p>Gopalakrishna said he‚Äôs been unable to get answers on what exactly took place when the stop-sign camera was recalibrated in June. The user manual for the <a href="https://www.smartmicro.com/fileadmin/media/Downloads/Traffic_Radar/Sensor_Data_Sheets__24_GHz_/UMRR_Traffic_Sensor_Type_44_Data_Sheet.pdf" target="_blank" rel="noreferrer noopener">Smartmicro UMrr-11 Type 44 Radar Antenna</a>, describes its utility only in speed camera and red light enforcement applications. There is no mention anywhere in the document of its use in a stop-sign camera setup.</p><p>‚ÄúIt‚Äôs frustrating because there‚Äôs no legal definition of what a full-stop is,‚Äù he said. ‚ÄúIt‚Äôs all so arbitrary. So basically, this private company gets to decide what a complete stop is, and they set the camera ‚Ä¶</p></div></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://defector.com/a-predatory-stop-sign-camera-is-terrorizing-my-neighborhood/">https://defector.com/a-predatory-stop-sign-camera-is-terrorizing-my-neighborhood/</a></em></p>]]>
            </description>
            <link>https://defector.com/a-predatory-stop-sign-camera-is-terrorizing-my-neighborhood/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26133260</guid>
            <pubDate>Sun, 14 Feb 2021 15:42:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Julia 1.6: what has changed since Julia 1.0?]]>
            </title>
            <description>
<![CDATA[
Score 256 | Comments 204 (<a href="https://news.ycombinator.com/item?id=26132801">thread link</a>) | @Sukera
<br/>
February 14, 2021 | https://www.oxinabox.net/2021/02/13/Julia-1.6-what-has-changed-since-1.0.html | <a href="https://web.archive.org/web/*/https://www.oxinabox.net/2021/02/13/Julia-1.6-what-has-changed-since-1.0.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main_content">
      <p>Julia 1.0 came out well over 2 years ago.
Since then a lot has changed and a lot hasn‚Äôt.
Julia 1.0 was a commitment to no breaking changes, 
but that is not to say no new features have been added to the language.</p>

<!--more-->

<nav id="toc"></nav>

<p>Julia 1.6 is a huge release and it is coming out relatively soon.
RC-1 was <a href="https://discourse.julialang.org/t/julia-v1-6-0-rc1-is-now-available/54775">released recently</a>.
I suspect we have at least a few more weeks before the final release.
The Julia Core team take a huge amount of care in not breaking any packages.
So while that is all being checked and corner cases fixed, I think we have some time.
Thus this post, reflecting not just on 1.6, but on everything that has happened since the 1.0 release.</p>

<p>Julia 1.6 will be the first ‚Äúfeature‚Äù release since 1.0.
Prior to 1.0, all releases were feature releases; they came out when they were ready.
Since then, all releases (except 1.6) have been timed releases.
The release candidate is cut from the main branch every 3 months; and they are released after an <a href="https://github.com/JuliaLang/julia/pull/35846">extensive round of additional checking</a>, which often takes weeks to months.
Julia 1.6 was soft-slated to be the new long-term-support (LTS) version that would have bug-fixes backported to it for the next few years.
The current LTS is Julia 1.0, which has now had 5 patch releases made.
Since it was going to be supported for a long-time, people wanted to make sure everything good got in; thus it was a feature release.
The core developers have demurred on if 1.6 will actually be selected to be the new LTS (even if it is selected, it won‚Äôt ascend to being the LTS til it stops being the current Stable).</p>

<p>My impression now is that they feel like it has too many cool new things; and that a few things didn‚Äôt quite make it in even with the extended release cycle.
So it‚Äôs looking likely to me that 1.7 will actually be the LTS; but that it might also be a feature release ‚Äì possibly this time a much shorter release period than usual.
In practice I think for a lot of package maintainers 1.6 will be a LTS, in that that is the oldest version they will make sure to continue to support.
There have been too many cool new things (as this post will detail) to stay back to only 1.0 features.
Already a lot of packages have dropped support for Julia versions older than 1.3.</p>

<p>This post is kind of a follow-up to my <a href="https://www.oxinabox.net//2018/06/01/Julia-Favourite-New-Things.html">Julia 1.0 release run-down</a>.
But it‚Äôs going to be even longer, as it is covering the last 5 releases since then and I am not skipping the major new features.
I am writing this not to break down release by release,
but to highlight features that, had you only used Julia 1.0, you wouldn‚Äôt have seen.
Full details can be found in the <a href="https://github.com/JuliaLang/julia/blob/backports-release-1.6/NEWS.md">NEWS.md</a>, and <a href="https://github.com/JuliaLang/julia/blob/backports-release-1.6/HISTORY.md">HISTORY.md</a></p>

<h2 id="front-end-changes">Front-end changes</h2>
<h3 id="soft-scope-in-the-repl">Soft-scope in the REPL</h3>
<p>Julia 1.0 removed the notion of soft-scope from the language.
I was very blas√© about the change to for-loop bindings in my <a href="https://www.oxinabox.net/2018/06/01/Julia-Favourite-New-Things.html#for-loop-variable-binding-changes">1.0 release post</a>.
In fact, I didn‚Äôt even mention this particular change.
It was <a href="https://github.com/JuliaLang/julia/pull/19324">#19324</a> for reference.</p>

<p>This was undone in in Julia 1.5 with <a href="https://github.com/JuliaLang/julia/pull/33864">#33864</a> for the REPL only.
Now in the REPL, assigning to a global variable within a for-loop actually assigns that variable, rather than shadowing it with a new variable in that scope.
The same behavior outside the REPL now gives a warning.</p>

<p>Personally, this change never affected me because I never write for-loops that assign variables at global scope.
Indeed basically all code I write is inside functions.
But I do see how this causes problems for some interactive workflows, e.g. when demonstrating something.
See the <a href="https://github.com/JuliaLang/julia/issues/28789">main GitHub issue</a> and the longest <a href="https://discourse.julialang.org/t/another-possible-solution-to-the-global-scope-debacle/15894">Discourse thread</a>, though there were many others.
It took over a year of discussion to work out the solution, particularly because many of the more obvious solutions would be breaking in significant ways.</p>

<h3 id="deprecations-are-muted-by-default">Deprecations are muted by default</h3>

<p>Julia 1.5+ doesn‚Äôt display deprecation warnings, unless you run julia with the <code>--depwarn=yes</code> flag.
This was me in <a href="https://github.com/JuliaLang/julia/pull/35362">this PR</a>.
It‚Äôs not something I am super happy about, although I think it makes sense.
Using deprecated methods is actually fine, as long as your dependencies follow SemVer, and you use <code>^</code> (i.e. default) bounding in your Project.toml‚Äôs <code>[compat]</code>, which everyone does, because it‚Äôs enforced by the auto-merge script in the General registry.
Often it is even necessary if you want to keep compatibility for a while.</p>

<p>Solving deprecations is a thing you should actively choose to do rather than casually when trying to do something else.
In particular, when updating to support a new major release of one of your dependencies, you should follow a process.
Something like:</p>

<ol>
  <li>Check the release notes.</li>
  <li>Relax compat bounds</li>
  <li>Run your integration tests, if everything passes you are done.</li>
  <li>If tests failed, revert the change to compat bounds, then rerun your integration tests paying attention to deprecation warnings.</li>
</ol>

<p>Updating your dependencies should be an active choice.
Potentially one that is automated, but not one that you do while adding another feature (if you can help it).</p>

<p>The core of the reason we disabled them is because they were actually breaking things.
Irrelevant deprecation warning spam from dependencies of dependencies was causing JuMP and LightGraphs to become too slow to be used.
Further, since they were from dependencies of dependencies, the maintainers of JuMP and LightGraphs (let alone the end users) couldn‚Äôt even fix them.</p>

<p>Deprecation warnings are still turned on by default in tests, which makes sense since the tests (unlike normal use) are being run by maintainers of the package itself, not its users.
This however still doesn‚Äôt make a huge amount of sense to me, since spam from deprecation warnings floods out the actual errors that you want to see during testing.
For this reason, <a href="https://invenia.ca/">Invenia</a> (my employer) has disabled deprecation warnings in the CI tests for all our closed source packages, and added a new test job that just does deprecation checking (set to error on deprecation and with the job allowed to fail, just so we are informed).</p>

<p>Hopefully one day we can improve the tooling around deprecation warnings.
An ideal behavior would be to only show deprecation warnings if directly caused by a function call made from within the package module of your current active environment.
I kind of know what we need to do to the logger to make that possible, but it is not yet something I have had time to do.</p>

<h3 id="code-highlighting-for-code_llvm-and-code_native">Code highlighting for <code>code_llvm</code> and <code>code_native</code></h3>
<p>This was added in <a href="https://github.com/JuliaLang/julia/issues/36634">#36634</a>.
This functionality was first implemented in <a href="https://github.com/kimikage/ColoredLLCodes.jl">ColoredLLCodes.jl</a>, where it worked by monkey-patching the InteractiveUtils stdlib.
That package does still work on Julia 1.0.</p>

<p><strong>Julia 1.0:</strong></p>

<p><img src="https://www.oxinabox.net/posts_assets/Julia-1.0-1.6-changes/julia-1.0-code-llvm.png" alt="Julia 1.0 code_llvm"></p>

<p><strong>Julia 1.6:</strong></p>

<p><img src="https://www.oxinabox.net/posts_assets/Julia-1.0-1.6-changes/julia-1.6-code-llvm.png" alt="Julia 1.6 code_llvm"></p>

<p>The REPL itself still doesn‚Äôt have syntax highlighting for Julia code though.
The <a href="https://github.com/KristofferC/OhMyREPL.jl">OhMyRepl</a> package does provide that, and works for all versions of Julia.
It is a lot more than a series of regexes though, so I don‚Äôt think we are going to see it built into Julia too soon.
Probably one day, though, as its big dependencies are also required if the parser wants to move to be written in Julia (though I also don‚Äôt expect that any time soon).</p>

<h3 id="clearer-stacktraces">Clearer Stacktraces</h3>

<p>Just like colored <code>code_llvm</code>, colored stack-traces also originated in a package that was doing some nasty monkey-patching: <a href="https://github.com/jkrumbiegel/ClearStacktrace.jl">ClearStacktrace.jl</a>.
This was added into Base itself in <a href="https://github.com/JuliaLang/julia/pull/36134">#36134</a>.</p>

<p><strong>Julia 1.0:</strong></p>

<p><img src="https://www.oxinabox.net/posts_assets/Julia-1.0-1.6-changes/julia-1.0-stacktrace.png" alt="Julia 1.0 stacktrace"></p>

<p><strong>Julia 1.6:</strong></p>

<p><img src="https://www.oxinabox.net/posts_assets/Julia-1.0-1.6-changes/julia-1.6-stacktrace.png" alt="Julia 1.6 stacktrace"></p>

<p>The first thing you probably notice is the colored package names, to make it more clear where the error is coming from.
You also should notice the dimming of type parameters to make complicated types easier to read.
Also the addition of argument names, and showing functions with keyword arguments as they are written, rather than as a weird <code>#DataFrame#654</code> internal function.
The whole thing just looks more modern and polished.</p>

<h3 id="time-traveling-debugger">Time Traveling Debugger</h3>

<p><a href="https://julialang.org/blog/2020/05/rr/">Julia 1.5 added built-in support</a> for <a href="https://rr-project.org/"><code>rr</code></a> (Linux only for now).
This is not useful so much for debugging Julia code, but for debugging Julia itself.
If you get into one of the very rare situations where the language is doing something truly nonsensical, you can send a bug report recorded via <code>rr</code> and someone can debug <em>exactly</em> what is happening - even to the extent of <a href="https://julialang.org/blog/2020/09/rr-memory-magic/">diagnosing faulty RAM</a>.
<code>rr</code> is an impressively cool piece of tech.
It records execution of a program, intercepting places (namely syscalls) that could be nondeterministic and storing the result.
It can then replay the recording (even on another machine), and see exactly what happened.
Allowing on to go into great detail on the state, and step backwards and forwards through time.
The <code>rr</code> integration is really nice and easy to use.
On a project I was running, I ended up getting a member of our architecture and operations team run it to submit a support request and they had no real troubles
(And they are by no means a Julia pro, they write mostly Cloudformation).</p>

<h2 id="syntax">Syntax</h2>

<h3 id="import-as"><code>import as</code></h3>

<blockquote>
  <p>The syntax import A as B (plus import A: x as y, import A.x as y, and using A: x as y) can now be used to rename imported modules and identifiers (<a href="https://github.com/JuliaLang/julia/issues/1255">#1255</a>).</p>
</blockquote>

<p>This will be familiar to Python folks who love to write things like: <code>import numpy as np</code>.
I hope we never see it used that ubiquitously in julia.
I am quite happy with <code>using Foo</code> which imports into scope everything the author of <code>Foo</code> exported.
Python people find that super weird and scary; but it‚Äôs fine.
Note that in Julia, many (most?) things you use don‚Äôt belong to the scope of the module that defined them anyways; they are overloaded functions e.g. from <code>Base</code>.
So what you import doesn‚Äôt matter as much as you might think.
I recently learned that Haskell is like Julia with a default of importing all exports.
It has been fine for julia, and fine for Haskell for ages, though in neither is it required.</p>

<p>The real value of <code>import FooBar as fb</code> is not to have a short abbreviation so you can do <code>fb.quux</code>.
That was already possible via <code>const fb = FooBar</code>.
It is to handle cases where the package name itself conflicts with an identifier.
For example (as has often occurred) if one uses a <code>Pipe</code> in the REPL, and then later wants to load <a href="https://github.com/oxinabox/Pipe.jl/">Pipe.jl</a> via <code>import Pipe</code> then one gets a name clash before it can be ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.oxinabox.net/2021/02/13/Julia-1.6-what-has-changed-since-1.0.html">https://www.oxinabox.net/2021/02/13/Julia-1.6-what-has-changed-since-1.0.html</a></em></p>]]>
            </description>
            <link>https://www.oxinabox.net/2021/02/13/Julia-1.6-what-has-changed-since-1.0.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26132801</guid>
            <pubDate>Sun, 14 Feb 2021 14:46:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[In defense of interesting writing on controversial topics]]>
            </title>
            <description>
<![CDATA[
Score 122 | Comments 131 (<a href="https://news.ycombinator.com/item?id=26132104">thread link</a>) | @petulla
<br/>
February 14, 2021 | https://www.slowboring.com/p/slate-star-codex | <a href="https://web.archive.org/web/*/https://www.slowboring.com/p/slate-star-codex">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><em>This is a free preview of Slow Boring. If you like what you read, consider supporting this site by <a href="http://www.slowboring.com/subscribe">subscribing</a>. </em></p><p>Some time ago, Scott Alexander, the pseudonymous author of the Slate Star Codex blog, announced that he was abandoning his site. The reason was that a New York Times reporter had been in touch with him explaining that he was doing a profile of the blog, and in the course of writing it he was compelled by some NYT policy to disclose Alexander‚Äôs real name. </p><p>Alexander is a practicing psychiatrist and felt that for reasons of professional ethics, this would jeopardize his job ‚Äî so he shut the blog down in a rather dramatic fashion. This, in turn, led to a lot of condemnatory rhetoric from his fans and admirers, many of whom work in the technology industry and had a set of preexisting grievances with what they call ‚Äúthe media‚Äù and what I would call ‚Äúthe technology coverage of a half dozen outlets, notably including The New York Times.‚Äù Much of the ensuing rhetoric from the pro-SSC camp (though not from Alexander, who if anything is even-tempered to a fault in his public persona) struck me as overheated, but I was sad it had driven Alexander from the internet.</p><p>The good news is that he has since resurfaced on Substack at <a href="https://astralcodexten.substack.com/">Astral Codex Ten</a>. He also has a new job as the founder of <a href="https://lorienpsych.com/">Lorien Psychiatry</a>, an innovative effort to use telemedicine to make psychiatric treatment much more affordable. </p><p>Then, on Saturday, <a href="https://www.nytimes.com/2021/02/13/technology/slate-star-codex-rationalists.html">Cade Metz‚Äôs NYT article about SSC finally dropped</a>. And it‚Äôs terrible. (Read <a href="https://astralcodexten.substack.com/p/statement-on-new-york-times-article">Alexander‚Äôs post</a> about it, though I think he has too much of a conspiratorial view of this.<a id="footnote-anchor-1" href="#footnote-1">1</a>)</p><p>I tend to think that too much time and mental energy is expended, including by me, on critiquing bad articles, and not enough time and energy is spent on praising good ones. So I feel kind of bad about writing a detailed criticism of a single bad article. But, given the larger context in which this story appeared, my sense is it‚Äôs going to become a flashpoint for a whole bunch of interesting struggles, so I think it‚Äôs useful and informative to say what I think. </p><h4>A tortured premise</h4><p>On its face, the idea of profiling an obscure blog written by a pseudonymous psychiatrist that has a surprisingly high-clout readership is perfectly good. Alexander‚Äôs readers include many Silicon Valley people, including ‚Äî as Metz details ‚Äî some very high-ranking executives. It‚Äôs an interesting story. </p><p>But I think Metz kind of misses what‚Äôs interesting about it from the get-go. </p><ul><li><p><a href="https://twitter.com/douthatnyt/status/859771088125005824?lang=en">Ross Douthat</a> reads SSC, and so does <a href="https://www.vox.com/2014/12/1/7311417/race-law-controls">Ezra Klein</a>. </p></li><li><p><a href="https://www.nytimes.com/2018/03/08/opinion/student-mobs.html">David Brooks</a> has quoted him in The New York Times. </p></li><li><p><a href="https://marginalrevolution.com/marginalrevolution/2017/04/excerpt-chat-ezra.html">Tyler Cowen</a> praises SSC and the larger ‚Äúrationalist community‚Äù that it was a flagship publication of, but also critiques them, saying ‚ÄúI would approve of them much more if they called themselves the irrationality community.‚Äù</p></li></ul><p>As you‚Äôll see in Metz‚Äôs story, the Vox writer Kelsey Piper is an SSC reader and a rationalist. But she works primarily for Vox‚Äôs <a href="https://www.vox.com/future-perfect">Future Perfect</a> vertical, which is a whole rationalist-inspired cornucopia of content. </p><p>In other words, this is an intellectual movement that‚Äôs somewhat influential in highbrow circles broadly, and that deserves to be situated as such. Well-known books like Toby Ord‚Äôs <a href="https://www.amazon.com/Precipice-Existential-Risk-Future-Humanity/dp/0316484911">‚ÄúThe Precipice‚Äù</a> and Philip Tetlock‚Äôs <a href="https://www.amazon.com/Superforecasting-Science-Prediction-Philip-Tetlock/dp/0804136718">‚ÄúSuperforecasting: The Art and Science of Prediction‚Äù</a> are important parts of the rationalist firmament. There‚Äôs also Julia Galef‚Äôs excellent podcast ‚ÄúRationally Speaking‚Äù on which <a href="https://podcasts.google.com/feed/aHR0cDovL3d3dy5ueWNza2VwdGljcy5vcmcvc3RvcmFnZS9mZWVkcy9ycy54bWw/episode/YzZlZTFhZmUtMTkwMS00ZDZiLTg1Y2QtMjhlNDI3ODE5YTJk?hl=en&amp;ved=2ahUKEwiNhNeMzefuAhXNFVkFHUIfB5EQieUEegQIDhAF&amp;ep=6">you can hear me yacking</a>. </p><p>There‚Äôs a lot more going on than ‚Äúsome tech executives read this blog,‚Äù in other words. </p><p>But Metz does not seem interested in actually exploring rationalist ideas or understanding their content or the scope of their influence. Instead, the article is structured as a kind of syllogism:</p><ul><li><p>Scott Alexander‚Äôs blog is popular with some influential Silicon Valley people.</p></li><li><p>Scott Alexander has done posts that espouse views on race or gender that progressives disapprove of. </p></li><li><p>Therefore, Silicon Valley is a hotbed of racism and sexism. </p></li></ul><p>One time years ago, I went to Silicon Valley for a few days. As a white guy, I would not be well-situated to assess the extent to which it‚Äôs a hotbed of racism and sexism anyway, so I won‚Äôt comment on the conclusion. But the logic is specious, and the whole thing is an incredible missed opportunity to help people understand some valuable and interesting ideas. </p><h4>Rationalism as I understand it  </h4><div><figure><a target="_blank" href="https://cdn.substack.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fe70ba9bd-da54-4126-b597-ae1d556a06d3_1022x408.png"><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fe70ba9bd-da54-4126-b597-ae1d556a06d3_1022x408.png" data-attrs="{&quot;src&quot;:&quot;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/e70ba9bd-da54-4126-b597-ae1d556a06d3_1022x408.png&quot;,&quot;height&quot;:408,&quot;width&quot;:1022,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:702783,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null}" alt=""></a><figcaption>Early Modern rationalists ‚Äî Descartes, Spinoza, Leibniz</figcaption></figure></div><p>When I first heard about rationalists I was intensely confused, because in college I took a few different classes that involved reading ‚Äúrationalist‚Äù philosophers from the Early Modern period, and contemporary rationalists‚Äô ideas are totally unlike early modern philosophical rationalists‚Äô ideas.<a id="footnote-anchor-2" href="#footnote-2">2</a> I should also note that contemporary rationalism is both a set of ideas and also a specific community in the Bay Area that, as I understand it, involves polyamory and communal living of some kind. I don‚Äôt have any real knowledge or understanding of the latter and am just talking about ideas. </p><p>Rationalists‚Äô big thing is that the natural human process of cognition is <em>capable</em> of reaching accurate results, but that‚Äôs not really the default mode. And rationalists are not just aware of this ‚Äî they think it‚Äôs a big problem, and they try really hard to push back on it and develop better reasoning skills. </p><p>I think that‚Äôs probably why a rationalist blog is very popular in Silicon Valley. The nature of VC investing or the management of an early-stage startup is that there is incredible monetary value in making correct predictions in the face of imperfect information. Then on top of that, the kinds of recommendations that rationalists give for how to reason better tend to align with engineers‚Äô natural instincts and inclinations:&nbsp;be more bloodless and objective, evaluate claims on the merits in isolation, gather and surface all available facts. </p><p>This thing I did where I tried to <a href="https://www.slowboring.com/p/predictions">list specific predictions with specific probabilities</a> so I can go back and check to see how wrong I was is a rationalist idea. </p><p>But of course, there‚Äôs more to it than predicting. The key to Metz‚Äôs point is that part of the practice of rationalism is that in order to do it effectively, you have to be willing to be impolite. Not necessarily 24 hours a day or anything, but when you‚Äôre in Rationalism Mode you can‚Äôt also ‚Äúread the room.‚Äù A rationalist would say that human psychology is <em>over-optimized</em> for reading the room, and that to get at the truth you need to be willing to deliberately turn off the room-reading portion of your brain and just throw your idea out. </p><p>Compared to the public masses, the biggest difference between rationalists and everyday Americans is almost certainly that <a href="https://www.pewresearch.org/fact-tank/2018/04/25/key-findings-about-americans-belief-in-god/">Americans are very religious</a>. </p><div><figure><a target="_blank" href="https://cdn.substack.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fe4908e87-8451-4a13-92a1-1bc4c7020586_640x380.png"><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fe4908e87-8451-4a13-92a1-1bc4c7020586_640x380.png" data-attrs="{&quot;src&quot;:&quot;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/e4908e87-8451-4a13-92a1-1bc4c7020586_640x380.png&quot;,&quot;height&quot;:380,&quot;width&quot;:640,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:27299,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null}" alt=""></a></figure></div><p>But a quirk of American life is that even though most Americans say they believe in God as described in the Bible, nobody thinks it‚Äôs interesting to argue about this. By contrast, lots of people like to argue about race and gender issues. But in progressive circles, it is common to observe the norm that because the struggle against racism and misogyny is important, it is impolite to dissent from an anti-racist claim or argument unless you have some overwhelmingly important reason for doing so. </p><h4>Rationality vs. manners</h4><p>This exchange between Conor Friedersdorf and Chris Hayes on the merits of arguing about the San Francisco School Board illustrates the progressive norm, upheld here by Hayes.</p><p>To an extent, I disagree with Hayes about this specific case<a id="footnote-anchor-3" href="#footnote-3">3</a>, but I accept the basic force of his logic. Hayes, as a prime time cable television host, has a kind of power in our society that it‚Äôs incumbent on him to wield wisely. And while I think wielding that power wisely entails not lying to people, it is compatible with discretion about what truths one chooses to speak. But even though rationalists will understand the strategic logic of this kind of argument as well (if not better) than most, the <em>practice</em> of rationalism requires setting it aside. </p><p>You see this on display in a post Metz criticizes titled <a href="https://slatestarcodex.com/2017/08/01/gender-imbalances-are-mostly-not-due-to-offensive-attitudes/">‚ÄúGender Imbalances Are Mostly Not Due To Offensive Attitudes.‚Äù</a></p><p>In the (liberal, coastal, urban, very political) circles that I travel, everyone (especially parents) knows and acknowledges that men and women are, on average, different in ways that end up mattering for the distribution of outcomes. But everyone also believes that sexism and misogyny are significant problems in the world, and that the people struggling against those problems are worthy of admiration and praise. So to leap into a conversation about sexism and misogyny yelling <a href="https://pubmed.ncbi.nlm.nih.gov/30206941/">‚ÄúWELL ACTUALLY GIOLLA AND KAJONIUS FIND THAT  SEX DIFFERENCES IN PERSONALITY ARE LARGER IN COUNTRIES WITH MORE GENDER EQUALITY‚Äù</a> would be considered a rude and undermining thing to do. This is just to say that most people are not rationalists ‚Äî they believe that statements can be evaluated on grounds beyond truth and falsity. There is suspicion of the guy who is ‚Äújust asking questions.‚Äù </p><p>Annie Lowrey even published a piece in the Atlantic denouncing the <a href="https://www.theatlantic.com/ideas/archive/2020/07/may-i-introduce-you-facts-man/614827/">‚ÄúFacts Man‚Äù</a> on precisely these terms:  </p><blockquote><p>Sometimes, Facts Man is less about truth than raising questions. Why can‚Äôt Facts Man talk about certain issues in exactly the way he wants to? Why can‚Äôt Facts Man bring up scientific facts relevant to other people‚Äôs humanity without getting called out for it? Why can‚Äôt Facts Man make obscenely offensive conjectures about life-or-death issues? Where‚Äôs the open debate? Why does Facts Man have to genuflect to other peoples‚Äô identity politics? Facts Man himself has no identity politics! He is an individual, as unique as a snowflake, but certainly not as fragile as one.</p></blockquote><p>Personally, I find myself somewhere between Lowrey and Alexander on this. The pure vision of the rationalists and the belief that statements could or should be read devoid of context or purely literally strikes me as untenable. But I think that in the Trump era, journalism as a whole has tilted too far in Lowrey‚Äôs direction, with too much room-reading and groupthink and ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.slowboring.com/p/slate-star-codex">https://www.slowboring.com/p/slate-star-codex</a></em></p>]]>
            </description>
            <link>https://www.slowboring.com/p/slate-star-codex</link>
            <guid isPermaLink="false">hacker-news-small-sites-26132104</guid>
            <pubDate>Sun, 14 Feb 2021 13:08:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Python Internals Serie: Int (Long) Object]]>
            </title>
            <description>
<![CDATA[
Score 68 | Comments 13 (<a href="https://news.ycombinator.com/item?id=26131703">thread link</a>) | @karroum
<br/>
February 14, 2021 | http://ykarroum.com/2021/01/10/intobject/ | <a href="https://web.archive.org/web/*/http://ykarroum.com/2021/01/10/intobject/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        <div>
  
  <p><span>10 Jan 2021</span></p><p>In this article, we will read and discuss the implementation details of <em>ints</em> in <em>CPython</em>.</p>

<p>Altough using integers in python is fairly easy :</p>

<figure><pre><code data-lang="python"><span>a</span> <span>=</span> <span>1</span>

<span>b</span> <span>=</span> <span>a</span> <span>+</span> <span>5</span></code></pre></figure>

<p>The implementation file contains more than 5000 code lines.</p>

<p>Since the file contains roughly 116 functions/macros, I‚Äôll probably skip some (most of ?) functions.</p>

<p>Without further ado, let‚Äôs dive into the code !</p>

<h3 id="longobjectc">longobject.c</h3>

<p>First we need to find a starting point, we know that all pythons objects are stored in <code>cpython/Objects</code>.</p>

<p>Unfortunetly, we don‚Äôt seem to have an <code>intobject.c</code> file. That‚Äôs because the underlying C object for python integers is <code>PyLongObject</code>.</p>

<p>The file we‚Äôre interessted in is : <code>longobject.c</code></p>

<p>From now one I will refer to python‚Äôs integers implementation both using <em>integers</em> or <em>longs</em>, which is not technically accurate since in <em>C</em> those are different types.</p>

<p>For the rest of this article, we‚Äôll revisit some of the most used operations/functions related to integers.</p>

<h4 id="medium_valuex">MEDIUM_VALUE(x)</h4>

<figure><pre><code data-lang="c"><span>/* convert a PyLong of size 1, 0 or -1 to an sdigit */</span>
<span>#define MEDIUM_VALUE(x) (assert(-1 &lt;= Py_SIZE(x) &amp;&amp; Py_SIZE(x) &lt;= 1),   \
         Py_SIZE(x) &lt; 0 ? -(sdigit)(x)-&gt;ob_digit[0] :   \
             (Py_SIZE(x) == 0 ? (sdigit)0 :                             \
              (sdigit)(x)-&gt;ob_digit[0]))</span></code></pre></figure>

<p>The comment is pretty explanatory, the macro convert a given <em>long</em> to an <em>sdigit</em>. But what‚Äôs an sdigit ? Well it depends :</p>

<figure><pre><code data-lang="c"><span>#if PYLONG_BITS_IN_DIGIT == 30 </span><span>/* signed variant of digit */</span><span>
</span><span>typedef</span> <span>int32_t</span> <span>sdigit</span>
<span>#elif PYLONG_BITS_IN_DIGIT == 15
</span><span>typedef</span> <span>short</span> <span>sdigit</span><span>;</span> <span>/* signed variant of digit */</span>
<span>#else
#error "PYLONG_BITS_IN_DIGIT should be 15 or 30
#endif</span></code></pre></figure>

<p>The <code>PYLONG_BITS_IN_DIGIT</code> is defined either at configure time or in <code>pyport.h</code>.</p>

<p>We have an assert to protect us from accidently casting a big integer, which is not small enough to fit in an sdigit, to an sdigit, which may result in a loss of information, therefore potentiely issues which can be hard to detect.</p>

<p>Curiously, the assert check that the <em>size</em> of x is bigger than -1, but can be less than 0 ? My guess is that size is unsigned to represent both the size and the sign of the integer, for exemple : <code>PY_SIZE(-15) = -2</code>.
This seems to be confirmed with <code>Py_SIZE(x) &lt; 0 ? -(sdigit)(x)-&gt;ob_digit[0]</code>.</p>

<p><code>ob_digit</code> looks like an array containing our integer. which can be confirmed in the file <code>longintrepr.h</code> :</p>

<figure><pre><code data-lang="c"><span>struct</span> <span>_longobject</span> <span>{</span>
    <span>PyObject_VAR_HEAD</span>
    <span>digit</span> <span>ob_digit</span><span>[</span><span>1</span><span>];</span>
<span>};</span></code></pre></figure>

<p>One curious fact, that I can‚Äôt explain, is the small size of the array (one element ?), maybe it‚Äôs somehow changed at runtime.</p>

<h4 id="is_small_intival">IS_SMALL_INT(ival)</h4>

<figure><pre><code data-lang="c"><span>#define IS_SMALL_INT(ival) (-NSMALLNEGINTS &lt;= (ival) &amp;&amp; (ival) &lt; NSMALLPOSINTS)</span></code></pre></figure>

<p>Pretty straightforward function.</p>

<p><code>NSMALLPOSINTS</code> and <code>NSMALLNEGINTS</code> is defined in the <code>pycore_interp.h</code> file :</p>

<figure><pre><code data-lang="c"><span>/* interpreter state */</span>

<span>#define _PY_NSMALLPOSINTS           257
#define _PY_NSMALLNEGINTS           5</span></code></pre></figure>

<p>To undesrtand why those 2 magic numbers and where this macro is used, let‚Äôs dive into the next function.</p>

<h4 id="static-pyobject--get_small_intsdigit-ival">static PyObject * get_small_int(sdigit ival)</h4>

<figure><pre><code data-lang="c"><span>static</span> <span>PyObject</span> <span>*</span>
<span>get_small_int</span><span>(</span><span>sdigit</span> <span>ival</span><span>)</span>
<span>{</span>
    <span>assert</span><span>(</span><span>IS_SMALL_INT</span><span>(</span><span>ival</span><span>));</span>
    <span>PyInterpreterState</span> <span>*</span><span>interp</span> <span>=</span> <span>_PyInterpreterState_GET</span><span>();</span>
    <span>PyObject</span> <span>*</span><span>v</span> <span>=</span> <span>(</span><span>PyObject</span><span>*</span><span>)</span><span>interp</span><span>-&gt;</span><span>small_ints</span><span>[</span><span>ival</span> <span>+</span> <span>NSMALLNEGINTS</span><span>];</span>
    <span>Py_INCREF</span><span>(</span><span>v</span><span>);</span>
    <span>return</span> <span>v</span><span>;</span>
<span>}</span></code></pre></figure>

<p>This function implements what is commonly known as the <em>Flyweight pattern</em>, as explained here : <a href="https://python-patterns.guide/gang-of-four/flyweight/">https://python-patterns.guide/gang-of-four/flyweight/</a>, the flyweight pattern is used in python to create at the initialisation phase all the integers in the range [-5, 256]. At the runtime, whenever you ask for a number in this range, you‚Äôll always get the <em>same</em> number.</p>

<p>Which can be easily checked :</p>

<figure><pre><code data-lang="python"><span>20</span> <span>+</span> <span>30</span> <span>is</span> <span>50</span> <span># True
</span><span>200</span> <span>+</span> <span>300</span> <span>is</span> <span>500</span> <span># False</span></code></pre></figure>

<p>Those integers objects are stored in the interpreter state.</p>

<p>According to <a href="https://tenthousandmeters.com/blog/python-behind-the-scenes-1-how-the-cpython-vm-works/">https://tenthousandmeters.com/blog/python-behind-the-scenes-1-how-the-cpython-vm-works/</a> :</p>

<blockquote>
  <p>An interpreter state is a group of threads along with the data specific to this group. Threads share such things as loaded modules (sys.modules), builtins (builtins.<strong>dict</strong>) and the import system (importlib).</p>
</blockquote>

<p>Apparently flyweight integers are stored there.</p>

<p>We also use <code>Py_INCREF</code> to increment the reference count of the returned integer, recall that reference counting is what is used by the CPython garbage collector to detect which objects to free (Well not just that, since reference counting alone doesn‚Äôt resolve circular references, but we‚Äôll discuss the <em>gc</em> in more details in future articles).</p>

<h4 id="maybe_small_long">maybe_small_long</h4>

<p>Straitforward function, we check a given integer is small enough to fit into an sdigit, if it‚Äôs the case we downcast it to an sdigit using the <code>MEDIUM_VALUE</code>. After downcasting we check if the integer is in the flyweight range <em>[-5, 257]</em>, if it‚Äôs the case we decrement the referece counting (since we don‚Äôt need two PyLong objects) and we return a reference on the already allocated number.</p>

<h3 id="how-are-longs-created">How are longs created</h3>

<p>Longs are created using the function <code>PyLongObject * _PyLong_New(Py_ssize_t size)</code>, size here refer to the number of digit of the target long.</p>

<figure><pre><code data-lang="c"><span>if</span> <span>(</span><span>size</span> <span>&gt;</span> <span>(</span><span>Py_ssize_t</span><span>)</span><span>MAX_LONG_DIGITS</span><span>)</span> <span>{</span>
	<span>PyErr_SetString</span><span>(</span><span>PyExc_OverflowError</span><span>,</span>
					<span>"too many digits in integer"</span><span>);</span>
	<span>return</span> <span>NULL</span><span>;</span>
<span>}</span></code></pre></figure>

<p>Well, looks like we can‚Äôt have an indefinely big integer, but how big can our integers be ?</p>

<figure><pre><code data-lang="c"><span>#define MAX_LONG_DIGITS \
    ((PY_SSIZE_T_MAX - offsetof(PyLongObject, ob_digit))/sizeof(digit))</span></code></pre></figure>

<p>If you don‚Äôt already know it, <em>offsetof</em> is a <em>C</em> function wich will basicaly return an offset of the member (ob_digit) from the structure (PyLongObject), if you recall correctly, since our struture only contains <code>PyObject_VAR_HEAD</code> and 	<code>digit ob_digit</code>. so the offset is the memorry taken with VAR_HEAD.</p>

<p>So a integer has a maximal size of roughly Py_SSIZE_T_MAx.</p>

<p>According to this answer : <a href="https://stackoverflow.com/a/42777910/14517936">https://stackoverflow.com/a/42777910/14517936</a> <code>Py_SSIZE_T_MAX = sys.maxsize</code>, which is according to the official documentation ( <a href="https://docs.python.org/3/library/sys.html#sys.maxsize">https://docs.python.org/3/library/sys.html#sys.maxsize</a> ) equal to <code>2**31 - 1</code> on 32 bits machine or <code>2**63 - 1</code>.</p>

<p><code>2**63 - 1</code> is a huge number of digits.</p>

<p>You can check this limit yourself by doing :</p>

<figure><pre><code data-lang="python"><span>import</span> <span>sys</span>
<span>10</span><span>**</span><span>sys</span><span>.</span><span>maxsize</span></code></pre></figure>

<p>If the size is fine, we allocate enough memory to store our integer :</p>

<figure><pre><code data-lang="c"><span>result</span> <span>=</span> <span>PyObject_MALLOC</span><span>(</span><span>offsetof</span><span>(</span><span>PyLongObject</span><span>,</span> <span>ob_digit</span><span>)</span> <span>+</span>
						 <span>size</span><span>*</span><span>sizeof</span><span>(</span><span>digit</span><span>));</span>
<span>if</span> <span>(</span><span>!</span><span>result</span><span>)</span> <span>{</span>
	<span>PyErr_NoMemory</span><span>();</span>
	<span>return</span> <span>NULL</span><span>;</span>
<span>}</span></code></pre></figure>

<p>As a good practice you should ALWAYS check that an allocation had correctly been performed, which may not be the case if you don‚Äôt have enough memory for example, your futur self will thank you.</p>

<h3 id="adding-two-integers">Adding two integers</h3>

<figure><pre><code data-lang="c"><span>static</span> <span>PyObject</span> <span>*</span>
<span>long_add</span><span>(</span><span>PyLongObject</span> <span>*</span><span>a</span><span>,</span> <span>PyLongObject</span> <span>*</span><span>b</span><span>)</span>
<span>{</span>
    <span>PyLongObject</span> <span>*</span><span>z</span><span>;</span>

    <span>CHECK_BINOP</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>);</span>

    <span>if</span> <span>(</span><span>Py_ABS</span><span>(</span><span>Py_SIZE</span><span>(</span><span>a</span><span>))</span> <span>&lt;=</span> <span>1</span> <span>&amp;&amp;</span> <span>Py_ABS</span><span>(</span><span>Py_SIZE</span><span>(</span><span>b</span><span>))</span> <span>&lt;=</span> <span>1</span><span>)</span> <span>{</span>
        <span>return</span> <span>PyLong_FromLong</span><span>(</span><span>MEDIUM_VALUE</span><span>(</span><span>a</span><span>)</span> <span>+</span> <span>MEDIUM_VALUE</span><span>(</span><span>b</span><span>));</span>
    <span>}</span>
    <span>if</span> <span>(</span><span>Py_SIZE</span><span>(</span><span>a</span><span>)</span> <span>&lt;</span> <span>0</span><span>)</span> <span>{</span>
        <span>if</span> <span>(</span><span>Py_SIZE</span><span>(</span><span>b</span><span>)</span> <span>&lt;</span> <span>0</span><span>)</span> <span>{</span>
            <span>z</span> <span>=</span> <span>x_add</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>);</span>
            <span>if</span> <span>(</span><span>z</span> <span>!=</span> <span>NULL</span><span>)</span> <span>{</span>
                <span>/* x_add received at least one multiple-digit int,
                   and thus z must be a multiple-digit int.
                   That also means z is not an element of
                   small_ints, so negating it in-place is safe. */</span>
                <span>assert</span><span>(</span><span>Py_REFCNT</span><span>(</span><span>z</span><span>)</span> <span>==</span> <span>1</span><span>);</span>
                <span>Py_SET_SIZE</span><span>(</span><span>z</span><span>,</span> <span>-</span><span>(</span><span>Py_SIZE</span><span>(</span><span>z</span><span>)));</span>
            <span>}</span>
        <span>}</span>
        <span>else</span>
            <span>z</span> <span>=</span> <span>x_sub</span><span>(</span><span>b</span><span>,</span> <span>a</span><span>);</span>
    <span>}</span>
    <span>else</span> <span>{</span>
        <span>if</span> <span>(</span><span>Py_SIZE</span><span>(</span><span>b</span><span>)</span> <span>&lt;</span> <span>0</span><span>)</span>
            <span>z</span> <span>=</span> <span>x_sub</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>);</span>
        <span>else</span>
            <span>z</span> <span>=</span> <span>x_add</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>);</span>
    <span>}</span>
    <span>return</span> <span>(</span><span>PyObject</span> <span>*</span><span>)</span><span>z</span><span>;</span>
<span>}</span></code></pre></figure>

<p>First we check that the two integers are valid.</p>

<figure><pre><code data-lang="c"><span>#define CHECK_BINOP(v,w)                                \
    do {                                                \
        if (!PyLong_Check(v) || !PyLong_Check(w))       \
            Py_RETURN_NOTIMPLEMENTED;                   \
    } while(0)</span></code></pre></figure>

<p>One curious thing you may have noticed is the :</p>

<figure><pre><code data-lang="c"><span>do</span> <span>{</span>
	<span>INSTR</span><span>;</span>
<span>}</span> <span>while</span><span>(</span><span>0</span><span>)</span></code></pre></figure>

<p>Which seems exactly the same as simply :</p>

<figure><pre><code data-lang="c"><span>INST</span><span>;</span></code></pre></figure>

<p>The purpose of doing this is macros in C are not really smart, the <em>preprocessor</em> will simply do a find/replace and hope for the best. The problem with this can be illustrated with the following macro :</p>

<figure><pre><code data-lang="c"><span>#define fct() \
	INSTR1; \
	INSTR2; </span><span>\</span></code></pre></figure>

<p>But what happens if you do :</p>

<figure><pre><code data-lang="c"><span>if</span><span>(</span><span>condition</span><span>)</span>
	<span>fct</span><span>()</span>
<span>else</span>
	<span>INSTR3</span><span>;</span></code></pre></figure>

<p>the preprocessor will replace this with :</p>

<figure><pre><code data-lang="c"><span>if</span><span>(</span><span>condition</span><span>)</span>
	<span>INSTR1</span><span>;</span>
<span>INSTR2</span><span>;</span>
<span>else</span>
	<span>INSTR</span><span>;</span></code></pre></figure>

<p>which is not valid <em>C</em>, since in <em>C</em> if you omit the braces, the if body will only consists of the first instruction which is not what you would expect.</p>

<p>The do while solve this by enclosing all our instructions in one scope.</p>

<p>But why not just use :</p>

<figure><pre><code data-lang="c"><span>{</span>
	<span>INSTR1</span><span>;</span>
	<span>INSTR2</span><span>;</span>
<span>}</span></code></pre></figure>

<p>As far as i know this is simply a syntaxic choice, since writing <code>MACRO();</code> is more natural than <code>MACRO()</code> (not that in the second case we have no semicolon).</p>

<p>The rest is :</p>

<ul>
  <li>if both a and b are negative we return -|a + b|</li>
  <li>if a is negative but not b we compute b - a</li>
  <li>if b is negative and a is positive we compute a - b</li>
  <li>if both are positive we compute |a + b|</li>
</ul>

<p>This looks fairly complicated for a simple a + b, so why all the burden ?</p>

<p>Well recall that in <code>Python</code> integers can be very large (2^63 digits on 64 bits machines), this is achieved by storing the integers in arrays (each element representing a digit).</p>

<p>We dive in the <code>x_add</code> code we see :</p>

<figure><pre><code data-lang="c"><span>for</span> <span>(</span><span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>size_b</span><span>;</span> <span>++</span><span>i</span><span>)</span> <span>{</span>
        <span>carry</span> <span>+=</span> <span>a</span><span>-&gt;</span><span>ob_digit</span><span>[</span><span>i</span><span>]</span> <span>+</span> <span>b</span><span>-&gt;</span><span>ob_digit</span><span>[</span><span>i</span><span>];</span>
        <span>z</span><span>-&gt;</span><span>ob_digit</span><span>[</span><span>i</span><span>]</span> <span>=</span> <span>carry</span> <span>&amp;</span> <span>PyLong_MASK</span><span>;</span>
        <span>carry</span> <span>&gt;&gt;=</span> <span>PyLong_SHIFT</span><span>;</span>
    <span>}</span>
    <span>for</span> <span>(;</span> <span>i</span> <span>&lt;</span> <span>size_a</span><span>;</span> <span>++</span><span>i</span><span>)</span> <span>{</span>
        <span>carry</span> <span>+=</span> <span>a</span><span>-&gt;</span><span>ob_digit</span><span>[</span><span>i</span><span>];</span>
        <span>z</span><span>-&gt;</span><span>ob_digit</span><span>[</span><span>i</span><span>]</span> <span>=</span> <span>carry</span> <span>&amp;</span> <span>PyLong_MASK</span><span>;</span>
        <span>carry</span> <span>&gt;&gt;=</span> <span>PyLong_SHIFT</span><span>;</span>
    <span>}</span>
    <span>z</span><span>-&gt;</span><span>ob_digit</span><span>[</span><span>i</span><span>]</span> <span>=</span> <span>carry</span><span>;</span></code></pre></figure>

<h2 id="conclusion">Conclusion</h2>
<p>And that‚Äôs it, the <code>long_sub</code> is fairly similar, and you can always (i encourage you to do so) check multiplication and division code.</p>

<p>We rarely stop to think about basic operations like integer operations, the longobject file shows use how complex and optimised long/integers implementation is in python.</p>

</div>





      </div></div>]]>
            </description>
            <link>http://ykarroum.com/2021/01/10/intobject/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26131703</guid>
            <pubDate>Sun, 14 Feb 2021 12:09:44 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The complexity that lives in the GUI]]>
            </title>
            <description>
<![CDATA[
Score 356 | Comments 207 (<a href="https://news.ycombinator.com/item?id=26131178">thread link</a>) | @yes_but_no
<br/>
February 14, 2021 | https://blog.royalsloth.eu/posts/the-complexity-that-lives-in-the-gui/ | <a href="https://web.archive.org/web/*/https://blog.royalsloth.eu/posts/the-complexity-that-lives-in-the-gui/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>The user interfaces are a weird thing. There are all sorts of libraries and frameworks that
are supposed to help you on your journey of writing a GUI, but despite all the best practices and
frameworks forcing you to eat your vegetables, the GUI always ends up being a ridiculous mess.
After pondering some more about this topic, I‚Äôve finally realized what is the cause of this problem.</p><p>Suppose you start working on a greenfield project for managing a warehouse (gasp).
This GUI has everything that a warehouse owner desires, including the irrelevant oversized
side bar on the left that scores upvotes on the design related social networks.
The user avatar with the details of logged
in user are on the left, inventory table is in the middle and all kinds of buttons are everywhere else.</p><p>If I asked you to architect such application from the given user interface concept,
you would probably start to mentally compose parts of the GUI into boxes with labels such as:
UserSection, InventoryTable, BottomActionButtons and so on.
These days such labeled boxes are commonly put into separate classes. Classes are a great building
blocks for the GUI, because they let you divide the complexity into smaller parts each containing
just the internal state of one little component.
When you are programming an inventory table in the middle you don‚Äôt want to care about the complexity
surrounding the user avatar section. In other words, if you are organizing the stuff in box A
you don‚Äôt care about the mess that resides in box B.</p><p>For a while this strategy of ‚Äúmess in other boxes is not my problem‚Äù works, but soon enough you hit the next
challenge. Suppose the user section of the warehouse GUI has a little light called ‚ÄúWorking‚Äù.
If the user is editing the inventory table that light should be displayed in green and when the user
stops editing, the light should be turned back to gray.</p><p>Oops, the ‚Äúmess in other boxes‚Äù is your problem now as you have to connect the editing state
of the inventory table with the state of the light in the user avatar section.
You find yourself at the crossroads of important design decisions.</p><ul><li><p><strong>Connect the boxes</strong>: create the user avatar component and pass its instance to the inventory
table component. Whenever the edit state of the inventory table changes, the business logic in
the inventory table should also trigger a state change in the user avatar component with the help
of the user avatar‚Äôs public API.</p></li><li><p><strong>Lift the state up</strong>: move the internal state of the user avatar component
and the state of the inventory table into a separate box/class. The logic of the user avatar
and inventory table component will still be neatly separated in their own boxes,
but they will be able to communicate without inventory table needing the direct access to the user avatar.</p></li><li><p><strong>Introduce a message bus</strong>: connect the inventory table and the user avatar component to the shared
pipe that is used for distributing events in the application. The user avatar component subscribes to
the message bus and every time it receives a table edit event,
it executes an appropriate action (e.g turn the light on).</p></li></ul><p>It goes without saying, that none of the presented options are without problems.</p><h3 id="connect-the-boxes">Connect the boxes</h3><p>If you‚Äôve decided to chicken out of introducing another layer for holding the common state, you may
solve this cross box communication problem by injecting the user avatar component directly into the
inventory table component. The programming theorists and other purists will tell you that this is a bad idea
and you should never even think about it. Think about the <del>children</del>, err,
all the tests that you won‚Äôt be able to write.</p><p>I am definitely guilty of such crime against the Holy Church of Unit Testers. When the project is
still in its infancy and I have yet to figure out what am I even building, I like to jam the
components together without giving it much thought. Sometimes you cut the corners, and sometimes
the corners cut you. How bad could it really be?</p><p>It turns out, for small components this strategy works quite well. As usual, it‚Äôs often the wrong thing
to do when your project grows large and contains hundreds of such inter class communication paths.
Not to mention how injecting hundreds of components is tedious, error prone and ugly to look at.</p><p>In hard times like these, the developers like to reach out for one of the fancy pants
dependency injection frameworks, which supposedly allow you to clean up the
component injection mess. In reality they trade compile time safety for some
convenience and runtime crashes [1]. Now, you have two problems:</p><ol><li>You are still injecting hundreds of components.</li><li>The dependency injection framework randomly breaks and nobody knows why.</li></ol><p>The main reason why I prefer not to use dependency injection frameworks in large projects
is because they tend to make the whole project more convoluted and harder to understand.
It‚Äôs very easy to add just another component injection and not put any effort towards
refactoring the code. This leads to the proliferation of small classes or services,
because the injection framework allows you to do with no upfront investment. You pay for this
crime later on once you have hundreds of injections all over the place and nobody is able to follow
and debug this mesh of small components
(see also <a href="https://blog.royalsloth.eu/posts/on-navigating-a-large-codebase/">On navigating a large codebase</a>).</p><h3 id="lift-the-state-up">Lift the state up</h3><p>A preferred way, where preferred means some kind of handwavy generalization of what
the majority of developers might do, of handling this accidental complexity is by
lifting the state up and storing the state of your component into another box that is
usually called the model. Model View Controller (MVC) gang rejoice.
This pattern allows you to separate the presentation of your data (view) from
the actual data (model), with the use of controller that connects the two together [2].</p><p>Instead of injecting hundreds of components into a god like component that controls all
its children, you put the shared state of the relevant GUI components into a god like model
that controls the state of all those children.
The end result is similar, but separating the data from the view layer might earn you some
positive reviews at the end of the year from the unit test groupies.
Even though you improved the situation a little bit, you still have a huge model that is full of
weird edge cases. The GUIs are inherently a giant state machines and they often get
into a weird state that is only discovered when you are actually running the GUI.</p><p>Maintaining a large and messy model is hard, so you decide to saw the model into smaller models
that group the state of components which conceptually fit together. At some point during this
‚Äúsaw the model‚Äù process you realize that certain things between the two different models should be kept
in sync. The more modern GUI frameworks usually arm you with some kind of data binding abstraction,
which allows to easily propagate data changes from one model to another via the so called one way,
two way data binding.</p><p>Soon enough, you realize that it would be really useful if you could attach a change listener
that would trigger and perform an action on every change of the state object.
Say we would like to change the background color of the user avatar component
every time the working light turns on. The code describing this situation might look something like:</p><div><pre><code data-lang="java"><span>this</span><span>.</span><span>lightTurnedOn</span><span>.</span><span>bind</span><span>(</span><span>this</span><span>.</span><span>editingInventoryTable</span><span>);</span>

<span>this</span><span>.</span><span>lightTurnedOn</span><span>.</span><span>addListener</span><span>((</span><span>oldState</span><span>,</span> <span>lightTurnedOn</span><span>)</span> <span>-&gt;</span> <span>{</span>
    <span>if</span> <span>(</span><span>lightTurnedOn</span><span>)</span> <span>{</span>
        <span>changeBackgroundToRed</span><span>();</span>
    <span>}</span> <span>else</span> <span>{</span>
        <span>changeBackgroundToIbmGray</span><span>();</span>
    <span>}</span>
<span>});</span></code></pre></div><p>This is usually the point at which you start losing control of your GUI. Clicking on buttons will start
triggering events which will modify the state in the model that will in turn start triggering event
listeners causing your GUI to flash like a christmas tree. The problem of data bindings and
change listeners is that they make it really easy to introduce a hidden circular event listeners
that will trigger one another multiple times (event A changes state B and change of state B triggers event A).
Such problems are rarely discovered during development, because developers are normally
using powerful machines in comparison to the mortals that are still sticking to their ancient computers.
These problems are also rarely discovered through code reviews, as the state changes are well
hidden within one of those one line state bindings.</p><p>I still don‚Äôt know what the proper solution to this problem would be.
Keep your state manipulations as simple as possible and try not to share any
data between different models. Every time I went forward with some fancy
listener-binding mechanisms, I‚Äôve ended up causing subtle circular listener recalculations
that were extremely hard to debug.</p><h3 id="message-bus">Message bus</h3><p>Congratulations, a large amount of your effort will go towards resolving weird message bus problems
as opposed to writing the business logic of your app. In the beginning, the message bus usually sounds
like a good idea because it simplifies a lot of communication problems between the different UI components.
You can send some events through the pipe and sure enough other parts of your application will react
to them.</p><p>You might be thinking: ‚ÄúMessage bus for communicating between components in the GUI? That‚Äôs crazy!‚Äù
Well, it turns out you can have a message bus that is not a huge ram gobbling process. In fact you are probably
already using it, as the GUI frameworks usually have some sort of an event queue built in that is used
for propagating the events in the system.</p><p>As your application grows you might realize that just spamming messages back and forth causes a lot of
performance problems. In case you have hundreds of components that are generating events, your little
user avatar component might be sifting through hundreds of messages per second while it is
only interested in one. Have no fear, message bus got your back. Any message bus worth their salt
allows you to define different channels that introduce rough message type ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.royalsloth.eu/posts/the-complexity-that-lives-in-the-gui/">https://blog.royalsloth.eu/posts/the-complexity-that-lives-in-the-gui/</a></em></p>]]>
            </description>
            <link>https://blog.royalsloth.eu/posts/the-complexity-that-lives-in-the-gui/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26131178</guid>
            <pubDate>Sun, 14 Feb 2021 10:41:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Learn Functional Programming Visually]]>
            </title>
            <description>
<![CDATA[
Score 347 | Comments 60 (<a href="https://news.ycombinator.com/item?id=26131075">thread link</a>) | @polyrand
<br/>
February 14, 2021 | https://david-peter.de/cube-composer/ | <a href="https://web.archive.org/web/*/https://david-peter.de/cube-composer/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="container">
            <p><img src="https://david-peter.de/cube-composer/img/cube-composer.svg" width="200" height="35" alt="cube composer"></p>
            <div id="panel">
                <p><b>Choose level:</b><br>
                
                <b>Goal:</b></p>
                
            </div>
            <div id="message">
                <p><span id="solved">Solved ‚úì</span></p><div><a id="nextlevel"><u>N</u>ext level</a></div>
            </div>
            <canvas id="canvas" width="1600" height="860"></canvas>
            <div id="controls">
                <div>
                    <ul id="available"></ul>
                </div>
                <div>
                    <ul id="program"></ul>
                    <div>
                        <a id="reset"><u>R</u>eset</a>
                    </div>
                </div>
            </div>
            <p>
                A game by <a href="https://david-peter.de/">David Peter</a>. Source code on <a href="https://github.com/sharkdp/cube-composer">GitHub</a>.<br>
                
            </p>
        </div></div>]]>
            </description>
            <link>https://david-peter.de/cube-composer/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26131075</guid>
            <pubDate>Sun, 14 Feb 2021 10:25:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why blockchain is not yet working (2018)]]>
            </title>
            <description>
<![CDATA[
Score 98 | Comments 306 (<a href="https://news.ycombinator.com/item?id=26130912">thread link</a>) | @max_
<br/>
February 14, 2021 | https://as1ndu.xyz/2018/05/why-blockchain-is-not-yet-working/ | <a href="https://web.archive.org/web/*/https://as1ndu.xyz/2018/05/why-blockchain-is-not-yet-working/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<h2 id="the-current-state">The current state</h2>
<p>There is a lot of hype about what the global distributed ledger aka ‚ÄúBlockchain‚Äù can do for society.
A ‚Äútrust machine‚Äù as some people call it, that will bring the power of finance, data sovereignty and inclusion to the people,
hence rendering centralized intermediaries like Visa, Barclays &amp; Facebook obsolete.</p>
<p>We shall achieve this by using a combination of robust, battle tested cryptography &amp; game theory.</p>
<p>While this vision is plausible, realising it is not a easy as it may seem.</p>
<p>The blockchain is not yet ready.</p>
<h2 id="the-core-barriers-to-main-stream-adoption">The core barriers to main stream adoption</h2>
<p>The blockchain, while being a new concept in decentralized distributed databases has also presented a very unique set of problems in computer science &amp; economics that have never been solved at the time of this writing.</p>
<p>Is this post, I will talk about the the 6 most important issues only with which if solved, shall we (blockchain enthusiasts) ever achieve our vision.</p>
<h3 id="1-scalability-issues">1. Scalability Issues</h3>
<p>The current bandwidth, i.e the data that can be transmitted through a blockchain with in a given time is simply too bounded for main stream adoption.</p>
<p>Ethereum for instance does a maximum of 13 transactions per second. Visa on the other hand can do 24,000 Transaction per second and peak over 40,000 transactions per second.</p>
<p>So as you can see, the blockchain is thousands of magnitudes unable to manage a global traffic of financial transactions.
This is what they call the ‚ÄúScalability Problem‚Äù</p>
<p>Coming up with a solution to scalability the problems without tarnishing the original value propositions of a blockchain (immutability/security, decentralization &amp; censorship resistance) is not trivial. It has been nick named the <a href="https://github.com/ethereum/wiki/wiki/Sharding-FAQ#this-sounds-like-theres-some-kind-of-scalability-trilemma-at-play-what-is-this-trilemma-and-can-we-break-through-it">‚Äúscalability trilemma‚Äù</a> by Vitalik Buterine (Ethereum‚Äôs co-author).</p>
<h3 id="2-lack-of-intuitive-private-key-management">2. Lack of Intuitive Private Key Management</h3>
<p>Ordinary users will simply never wrap their heads around private keys.</p>
<p>Private keys, which are a string of text used to sign transactions and make other proofs(cryptographic).</p>
<p>The purpose for these proofs or signatures is for other entities on a blockchain network to verify identities &amp; messages amongst themselves without reasonable doubt.</p>
<p>Private keys have two main problems first, how to store them securely.<br>
Anyone who can memorize, take a picture, or copy your private key can literally steal all your money.
Because they have your private key, they can make the cryptographic proofs/signatures and <em>accurately prove to everyone on the network they are you</em> even without your consent. Even when they are not you.</p>
<p>Second, you loose your key you loose access to all your money &amp; <em>no one can ever help you out</em>.
There is no ‚Äúclick here to remember your private key‚Äù</p>
<p>We need to first come up with something as intuitive using ATM/Debit cards.</p>
<p>Imagine if your bank told you that, ‚Äúif you forgot your Debit card PIN, you loose access to all your money with <em>zero hope of recovering it how ever large a sum of money it would be</em>‚Äù.</p>
<p>If the above was the case, I don‚Äôt think any one would use debit cards.</p>
<h3 id="3-contract-security">3. Contract security</h3>
<p>It is simply not reliable &amp; safe for responsible institutions &amp; individuals to deploy smart contracts on blockchains like Ethereum.</p>
<p>Due to the blockchain having an immutable and unpredictable state, Smart contracts deployed on such a platform are also expected to suffer from immutable bugs &amp; unpredictable events.</p>
<p>As a result, millions of dollars have been lost in events such as the <a href="https://www.bloomberg.com/features/2017-the-ether-thief/">theft of $50 million from TheDAO</a> and <a href="https://www.coindesk.com/startup-lost-160-million-still-wants-shake-ethereum/"> Parity‚Äôs $160 Million loss of funds</a></p>
<p>I was glad that Rick dudley <a href="https://youtu.be/1AGHAuWz_4U?t=986">talked about this</a></p>
<h3 id="4-consensus-algorithms-are-wack">4. Consensus algorithms are wack</h3>
<p>The popular blockchains only don‚Äôt offer transaction finality i.e you will never be 100% sure that you have gotten funds.</p>
<p>You can only be <a href="https://ethereum.stackexchange.com/questions/319/what-number-of-confirmations-is-considered-secure-in-ethereum">probabilistically to a high degree</a> (but with zero guarantee) that you have received your funds.
This is because in major consensus algorithm called Nakamoto Consensus, the miners elect the chain with the most computational work that are with in the same protocol i.e consensus rules.</p>
<p>For instance imagine your bank tells you that you that, ‚Äúthere is a 95% chance that we <em>might</em> have your life savings, however you may also not poses it in 5 years in case we discovered that the chain with the most work does not have your transaction in it‚Äù</p>
<p>Yes, I don‚Äôt think anyone wants to keep their life savings in such a bank.</p>
<h3 id="5-privacy">5. Privacy</h3>
<p>Just by knowing someone‚Äôs cryptocurrency address, you can know their account balance &amp; transaction history simply by pasting it in a blockchain explorer like <a href="https://blockchain.info/">blockchain</a> and <a href="https://etherscan.io/">etherscan</a></p>
<p>Meaning it‚Äôs very easy for anyone to keep track of your financial activities without permission.</p>
<p>You buy HIV drugs? I now know your HIV positive, Your paying schools fees? now your local kidnapper knows where your kids study.</p>
<p>Buying birth control pills? Now anyone in the world may accurately guess that your a woman.
No careful person wants that!</p>
<h3 id="6-price-volatility">6. Price volatility</h3>
<p>Very few people simply don‚Äôt have the stomach to hold a financial instrument that drops by over 50% with in <a href="https://www.cnbc.com/2017/12/26/bitcoin-price-in-2018-could-hit-60000-but-another-crash-is-coming.html">a few months</a>.</p>
<h2 id="what-can-we-do">What can we do?</h2>
<p>Most projects are building on platforms that have these problems regardless, in hopes that they will integrate solutions to the respective issues in the future.</p>
<p>The risk they face however, is that the platform they built on, my become obsolete after a heavy investment of time &amp; resources on the wrong platform.</p>
<p>Think how the <a href="https://bitcoinmagazine.com/articles/bitcoin-now-useless-micropayments-solutions-are-coming1/">micro payments industry died in bitcoin because of high fees</a></p>
<p>It‚Äôs like building your phone app around a windows smart-phone only to be made irrelevant because the next generation of mobile users will not be using windows smart-phones, but iOS and Android.</p>
</div></div>]]>
            </description>
            <link>https://as1ndu.xyz/2018/05/why-blockchain-is-not-yet-working/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26130912</guid>
            <pubDate>Sun, 14 Feb 2021 09:45:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Streamlit component for real-time video processing web apps, streamlit-webrtc]]>
            </title>
            <description>
<![CDATA[
Score 43 | Comments 6 (<a href="https://news.ycombinator.com/item?id=26130494">thread link</a>) | @whitphx
<br/>
February 14, 2021 | https://discuss.streamlit.io/t/new-component-streamlit-webrtc-a-new-way-to-deal-with-real-time-media-streams/8669 | <a href="https://web.archive.org/web/*/https://discuss.streamlit.io/t/new-component-streamlit-webrtc-a-new-way-to-deal-with-real-time-media-streams/8669">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main-outlet">
        

  


      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          

            

          <p><span>
              <meta itemprop="datePublished" content="2021-01-10T13:33:16Z">
              <time itemprop="dateModified" datetime="2021-01-11T12:54:45Z">
                January 11, 2021, 12:54pm
              </time>
          <span itemprop="position">#1</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>Hello everyone,</p>
<p>I made <a href="https://github.com/whitphx/streamlit-webrtc" rel="noopener nofollow ugc">streamlit-webrtc</a>, which sends and receives video (and audio, but it‚Äôs only partially supported now) streams between frontend and backend via WebRTC.<br>
This should be helpful for creating, for example, performant real-time computer vision WebApps.</p>
<p>This week I tried Steamlit, found it interesting and useful, and then wanted to run real-time computer vision apps on Streamlit, on which users can try some computer vision models with video input from their webcams.<br>
So I tried to develop a component to achieve it using WebRTC. Fortunately, there is a great WebRTC library for Python, <a href="https://github.com/aiortc/aiortc" rel="noopener nofollow ugc">aiortc</a>.</p>
<p>One interesting thing about this component is that the input video streams are sourced from users‚Äô webcams and transferred to the server-side Python process via the network. Therefore, the server does not need the access to the camera, unlike the usual approach using OpenCV (<code>cv2.VideoCapture</code>). It means the Python code can be hosted on a remote server (actually, I hosted a sample app on Heroku and it worked, as stated below).</p>
<p>In addition, WebRTC provides good performance with sending and receiving video/audio frames.</p>
<p>Here is a demo movie:<br>
</p><div><a href="https://aws1.discourse-cdn.com/business7/uploads/streamlit/original/2X/a/af111a7393c77cb69d7712ac8e71ca862feaeb24.gif" data-download-href="/uploads/short-url/oYIcsMqSqHFlA92m5f3NdANeujO.gif?dl=1" title="streamlit-webrtc-demo-short1" rel="noopener nofollow ugc"><img src="https://aws1.discourse-cdn.com/business7/uploads/streamlit/original/2X/a/af111a7393c77cb69d7712ac8e71ca862feaeb24.gif" alt="streamlit-webrtc-demo-short1" data-base62-sha1="oYIcsMqSqHFlA92m5f3NdANeujO" width="549" height="500" data-small-upload="https://aws1.discourse-cdn.com/business7/uploads/streamlit/optimized/2X/a/af111a7393c77cb69d7712ac8e71ca862feaeb24_2_10x10.png"></a></div><p>
(A full version is hosted on <a href="https://youtu.be/BRrtN80ITfU" rel="noopener nofollow ugc">YouTube</a>)</p>
<p>You can see</p>
<ul>
<li>The app consumes, processes, and renders video frames in real time.</li>
<li>Streamlit‚Äôs interactive controls are still working well in combination with the code using WebRTC. For example, the threshold for object detection is changed interactively during execution.</li>
</ul>
<p>You can try out the sample app using the following commands.</p>
<pre><code>$ pip install streamlit-webrtc opencv-python
$ streamlit run https://raw.githubusercontent.com/whitphx/streamlit-webrtc-example/main/app.py
</code></pre>
<p>I also deployed it to Heroku, <a href="https://streamlit-webrtc-example.herokuapp.com/" rel="noopener nofollow ugc">https://streamlit-webrtc-example.herokuapp.com/</a> and confirmed it worked; however, it‚Äôs running on a very small instance on a free plan, and may not work well if multiple users access it at the same time.<br>
I recommend you to run it on your own environment.</p>
<p>It‚Äôs still a prototype and the API is not finalized, and the documentation has not been written. Please refer to <a href="https://github.com/whitphx/streamlit-webrtc/blob/master/app.py" rel="noopener nofollow ugc">the sample code</a> when you use the component.</p>
<p>I welcome any feedback!</p>
        </div>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">
          <meta itemprop="keywords" content="custom-components, video, real-time, computer-vision">

        

         

            
      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://discuss.streamlit.io/u/whitphx"><span itemprop="name">whitphx</span></a>
            
          </span></p>


          <p><span>
              <meta itemprop="datePublished" content="2021-01-10T14:39:49Z">
              <time itemprop="dateModified" datetime="2021-01-10T16:53:31Z">
                January 10, 2021,  4:53pm
              </time>
          <span itemprop="position">#2</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>Technical note:</p>
<p>One technical challenge was to combine WebRTC and real-time processing with Streamlit‚Äôs execution model. This problem has already been stated in <a href="https://discuss.streamlit.io/t/access-webcam-video-from-a-hosted-streamlit-application/1301">Access Webcam Video from a hosted Streamlit application</a>.<br>
In case of <code>streamlit-webrtc</code> , additionally, <a href="https://github.com/aiortc/aiortc" rel="noopener nofollow ugc">aiortc</a> does not work in normal Streamlit scripts, which are executed from top to bottom and terminated at each user interaction (more fundamentally, it‚Äôs because of WebRTC‚Äôs async nature).</p>
<p>This library approaches this problem by creating threads independent of Streamlit execution.<br>
When the component is used for the first time, it forks a thread, launches <code>aiortc</code>‚Äôs code on an event loop in the thread, and maintains the thread over all the script executions until the WebRTC session is closed.</p>
<p>As a result of this approach, developers should alter their programming style when using this library, from Streamlit‚Äôs declarative way to an event-and-callback-based one. <a href="https://github.com/whitphx/streamlit-webrtc/blob/477416da84e77d76201d97269589fe5ff5d17d37/app.py#L293-L303" rel="noopener nofollow ugc">streamlit-webrtc/app.py at 477416da84e77d76201d97269589fe5ff5d17d37 ¬∑ whitphx/streamlit-webrtc ¬∑ GitHub</a> is an example. In this code, the computer vision part resides in a callback function, which is called from the forked thread triggered by the media stream regardless of Streamlit‚Äôs execution timing.</p>
<p>To bridge this forked execution of WebRTC and normal Streamlit‚Äôs controls, <code>streamlit-webrtc</code> exposes a <code>context</code> object, which is an interface to the objects running in the WebRTC‚Äôs async world.<br>
By using it, values from Streamlit‚Äôs controls can be passed to the computer vision code running in the forked thread, like <a href="https://github.com/whitphx/streamlit-webrtc/blob/477416da84e77d76201d97269589fe5ff5d17d37/app.py#L305-L317" rel="noopener nofollow ugc">streamlit-webrtc/app.py at 477416da84e77d76201d97269589fe5ff5d17d37 ¬∑ whitphx/streamlit-webrtc ¬∑ GitHub</a>.</p>
        </div>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          <p>Welcome to the community <a href="https://discuss.streamlit.io/u/whitphx">@whitphx</a>, looks awesome !</p>
<p>Feel free to add it to our <a href="https://discuss.streamlit.io/t/streamlit-components-community-tracker/4634">community tracker</a> so we don‚Äôt lose it from our radars <img src="https://sjc3.discourse-cdn.com/business7/images/emoji/google/grin.png?v=9" title=":grin:" alt=":grin:"><img src="https://sjc3.discourse-cdn.com/business7/images/emoji/google/grin.png?v=9" title=":grin:" alt=":grin:"><img src="https://sjc3.discourse-cdn.com/business7/images/emoji/google/grin.png?v=9" title=":grin:" alt=":grin:"></p>
        </div>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://discuss.streamlit.io/u/whitphx"><span itemprop="name">whitphx</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2021-01-11T13:04:31Z">
                January 11, 2021,  1:04pm
              </time>
              <meta itemprop="dateModified" content="2021-01-11T13:04:31Z">
          <span itemprop="position">#4</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p><a href="https://discuss.streamlit.io/u/andfanilo">@andfanilo</a> Thank you! I edited the wiki <img src="https://sjc3.discourse-cdn.com/business7/images/emoji/google/smile.png?v=9" title=":smile:" alt=":smile:"></p>
        </div>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://discuss.streamlit.io/u/tim"><span itemprop="name">tim</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2021-01-13T16:25:04Z">
                January 13, 2021,  4:25pm
              </time>
              <meta itemprop="dateModified" content="2021-01-13T16:25:04Z">
          <span itemprop="position">#5</span>
          </span>
        </p></div>
        <p>Whoa - this is really great. Nice work, <a href="https://discuss.streamlit.io/u/whitphx">@whitphx</a>!</p>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://discuss.streamlit.io/u/MalanG"><span itemprop="name">MalanG</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2021-01-15T21:55:39Z">
                January 15, 2021,  9:55pm
              </time>
              <meta itemprop="dateModified" content="2021-01-15T21:55:39Z">
          <span itemprop="position">#6</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>Hello <a href="https://discuss.streamlit.io/u/whitphx">@whitphx</a>,</p>
<p>Thanks for a great project!<br>
I am trying to test yours, and couldn‚Äôt install streamlit-webrtc.</p>
<pre><code>(venv) (base) admin@Youjins-MacBook-Pro mqtt-camera-streamer-master % pip install streamlit-webrtc              
ERROR: Could not find a version that satisfies the requirement streamlit-webrtc
ERROR: No matching distribution found for streamlit-webrtc
</code></pre>
<p>Can I install it if I download the github repo?</p>
        </div>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://discuss.streamlit.io/u/whitphx"><span itemprop="name">whitphx</span></a>
            
          </span></p>


          <p><span>
              <meta itemprop="datePublished" content="2021-01-16T09:39:03Z">
              <time itemprop="dateModified" datetime="2021-01-16T13:14:24Z">
                January 16, 2021,  1:14pm
              </time>
          <span itemprop="position">#7</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>Hello <a href="https://discuss.streamlit.io/u/malang">@MalanG</a> ,</p>
<p>I think it‚Äôs because you are using python &lt;3.8 <s>though <code>streamlit-webrtc</code> currently supports only &gt;=3.8.<br>
Please try with python 3.8.</s></p>
<p><s>I will also fix the package to be compatible with older versions of Python.</s></p>
<p>EDIT: I updated the package to be compatible with Python 3.6 and 3.7. Please try again.</p>
        </div>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://discuss.streamlit.io/u/whitphx"><span itemprop="name">whitphx</span></a>
            
          </span></p>


          <p><span>
              <meta itemprop="datePublished" content="2021-01-18T13:42:59Z">
              <time itemprop="dateModified" datetime="2021-01-18T14:36:28Z">
                January 18, 2021,  2:36pm
              </time>
          <span itemprop="position">#8</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>I got an invitation to Streamlit Sharing then deployed the sample app there: <a href="https://share.streamlit.io/whitphx/streamlit-webrtc-example/main/app.py" rel="noopener nofollow ugc">https://share.streamlit.io/whitphx/streamlit-webrtc-example/main/app.py</a><br>
but it didn‚Äôt work with a ‚Äúpermission denied‚Äù error when the app requires capturing video or audio from user‚Äôs device.</p>
<p>It means many interesting applications of this component, including real-time object detection and image transformation, cannot be used on Streamlit Sharing‚Ä¶<br>
The only page of the sample app that works is the third one, where the app plays video and audio files on server-side and transmit them to the client.</p>
<p>This is because, on Streamlit Sharing, the app is running inside iframe.<br>
<code>getUserMedia</code>, which is used to get access to user‚Äôs device, requires Feature Policy when called inside iframe.<br>
Details are here: <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia#Feature_Policy" rel="noopener nofollow ugc">MediaDevices.getUserMedia() - Web APIs | MDN</a></p>
<p>This is out of my control <img src="https://sjc3.discourse-cdn.com/business7/images/emoji/google/crying_cat_face.png?v=9" title=":crying_cat_face:" alt=":crying_cat_face:"></p>
<p>EDIT: This problem has also been stated in <a href="https://discuss.streamlit.io/t/sharing-blocks-custom-webcam-component-due-to-featurepolicy/8876">Sharing blocks custom webcam component due to featurePolicy</a></p>
        </div>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          <p><img src="https://sjc3.discourse-cdn.com/business7/images/emoji/google/frowning.png?v=9" title=":frowning:" alt=":frowning:"></p>
<p>Well this is an interesting discussion to raise with the product team, thanks for taking the time to track this down! I‚Äôll ping them on my side too <img src="https://sjc3.discourse-cdn.com/business7/images/emoji/google/wink.png?v=9" title=":wink:" alt=":wink:"></p>
<p>Fanilo</p>
        </div>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <p>Wow this is awesome ! Great work <a href="https://discuss.streamlit.io/u/whitphx">@whitphx</a>  !! <img src="https://sjc3.discourse-cdn.com/business7/images/emoji/google/scream.png?v=9" title=":scream:" alt=":scream:"><img src="https://sjc3.discourse-cdn.com/business7/images/emoji/google/clap.png?v=9" title=":clap:" alt=":clap:"><img src="https://sjc3.discourse-cdn.com/business7/images/emoji/google/clap.png?v=9" title=":clap:" alt=":clap:"><img src="https://sjc3.discourse-cdn.com/business7/images/emoji/google/clap.png?v=9" title=":clap:" alt=":clap:"></p>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://discuss.streamlit.io/u/tim"><span itemprop="name">tim</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2021-01-19T17:28:11Z">
                January 19, 2021,  5:28pm
              </time>
              <meta itemprop="dateModified" content="2021-01-19T17:28:11Z">
          <span itemprop="position">#11</span>
          </span>
        </p></div>
        <p>Hey thanks for raising this, <a href="https://discuss.streamlit.io/u/whitphx">@whitphx</a> - we‚Äôre discussing this!</p>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://discuss.streamlit.io/u/whitphx"><span itemprop="name">whitphx</span></a>
            
          </span></p>


          <p><span>
              <meta itemprop="datePublished" content="2021-02-02T04:33:34Z">
              <time itemprop="dateModified" datetime="2021-02-02T04:51:49Z">
                February 2, 2021,  4:51am
              </time>
          <span itemprop="position">#12</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>Wow, it is working now on Sharing. Thank you, Streamlit team!<br>
<a href="https://share.streamlit.io/whitphx/streamlit-webrtc-example/main/app.py" target="_blank" rel="noopener nofollow ugc">https://share.streamlit.io/whitphx/streamlit-webrtc-example/main/app.py</a></p>
<p>The performance is much better than the sample hosted on Heroku <img src="https://sjc3.discourse-cdn.com/business7/images/emoji/google/laughing.png?v=9" title=":laughing:" alt=":laughing:"></p>
        </div>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <p>Very useful tool but is it possible to access for example rear camera of mobile phone with this library?</p>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://discuss.streamlit.io/u/whitphx"><span itemprop="name">whitphx</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2021-02-05T10:17:17Z">
                February 5, 2021, 10:17am
              </time>
              <meta itemprop="dateModified" content="2021-02-05T10:17:17Z">
          <span itemprop="position">#14</span>
          </span>
        </p></div>
        <p>Yes, you can choose the camera with the ‚ÄúSELECT DEVICE‚Äù button.</p>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://discuss.streamlit.io/u/whitphx"><span itemprop="name">whitphx</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2021-02-05T10:39:27Z">
                February 5, 2021, 10:39am
              </time>
              <meta itemprop="dateModified" content="2021-02-05T10:39:27Z">
          <span itemprop="position">#15</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>I wrote a tutorial about how to use this library:</p>

        </div>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <p>Is it possible to store frame by frame results through each iteration in a file like json for example?</p>

        <meta itemprop="headline" content="New Component: streamlit-webrtc, a new way to deal with real-time media streams">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://discuss.streamlit.io/u/whitphx"><span itemprop="name">whitphx</span></a>
            
          </span></p>


          </div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://discuss.streamlit.io/t/new-component-streamlit-webrtc-a-new-way-to-deal-with-real-time-media-streams/8669">https://discuss.streamlit.io/t/new-component-streamlit-webrtc-a-new-way-to-deal-with-real-time-media-streams/8669</a></em></p>]]>
            </description>
            <link>https://discuss.streamlit.io/t/new-component-streamlit-webrtc-a-new-way-to-deal-with-real-time-media-streams/8669</link>
            <guid isPermaLink="false">hacker-news-small-sites-26130494</guid>
            <pubDate>Sun, 14 Feb 2021 08:01:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Cereals, feasts and monuments at G√∂bekli Tepe (2019)]]>
            </title>
            <description>
<![CDATA[
Score 54 | Comments 3 (<a href="https://news.ycombinator.com/item?id=26129693">thread link</a>) | @benbreen
<br/>
February 13, 2021 | https://www.dainst.blog/the-tepe-telegrams/2019/05/09/cereals-feasts-and-monuments-at-gobekli-tepe/ | <a href="https://web.archive.org/web/*/https://www.dainst.blog/the-tepe-telegrams/2019/05/09/cereals-feasts-and-monuments-at-gobekli-tepe/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
	
		<p>We were asked in comments and messages to elaborate some more on the contents of our recent paper. So here is a short summary of the article recently published in PLoS ONE. For more information on the findings outlined here, please consult the original publication:</p>
<p><em>Dietrich L, Meister J, Dietrich O, Notroff J, Kiep J, Heeb J, et al. (2019) Cereal processing at Early Neolithic G√∂bekli Tepe, southeastern Turkey. PLoS ONE 14(5):</em> e0215214. <a href="https://doi.org/10.1371/journal.pone.0215214">https://doi.org/10.1371/journal.pone.0215214</a></p>
<p>Cereal food is one of the most important components of our modern diet. Its integration into human subsistence strategy during the late Epipalaeolithic (c. 12500‚Äì9600 cal BC) and Pre-Pottery Neolithic (PPN, c. 9600‚Äì7000 cal BC) has been recognized as a very long and complex process involving the selection and utilization of plants, strategies of exploitation of plants and land, the development of cultivation, and ways of processing, storing, and consuming plants. Widespread adoption of farming and agriculture at the end of the Pre-Pottery Neolithic (PPNB, c. 8800‚Äì7000 cal BC), the deliberate, large-scale cultivation of domesticated cereals and other plants, was predated by a longer period of experimentation and technological modification leading to the development of specialized tool kits for plant-food processing. Typical implements are e.g. pounding and grinding tools used in pairs, comprising a static low implement (mortar, grinding slab or grinding bowl) and an active upper tool that is moved across its surface (pestle or handstone).</p>
<p><strong>Cereal use in the Early Neolithic</strong><br>
The regular processing of wild cereals through grinding seems to have been established first in the Late Natufian, as suggested by macrobotanical evidence as well as by morphological changes in grinding stones combined with use-wear analyses. Flat, large grinding stones and handstones became a supra-regional standard during the Levantine PPN, constituting an integral part of the architecture. Recent investigations have highlighted the area between the upper reaches of Euphrates and Tigris as one region where the transition to food-producing subsistence took place early during the Epipalaeolithic and the Pre-Pottery Neolithic. The distribution areas of the wild forms of einkorn, emmer wheat, barley and other ‚ÄòNeolithic founder crops‚Äô overlap here and DNA fingerprinting has pinpointed the transition of two wild wheat variants to domesticated crops to this part of the Fertile Crescent. Systematic early plant use has been found at a variety of sites, like Cafer H√∂y√ºk, √áay√∂n√º, Hallan √áemi, Jerf el Ahmar or K√∂rtik Tepe.<br>
G√∂bekli Tepe has not played any role in discussions of early cereal use so far. The reasons can be found ‚Äì at least in part ‚Äì in the problematic nature of direct evidence for cereals on site. Although analysis of macrobotanical remains indicates the presence of wild einkorn (Triticum cf. boeticum/urartu), wild barley (Hordeum cf. spontaneum) and possibly wild wheat/rye (Triticum/Secale), as well as almonds (Prunus sp.) and pistachio (Pistacia sp.) at G√∂bekli Tepe, only a conspicuously low amount of carbonized plant remains has been recovered, both in handpicked and in flotation samples.</p>
<div id="attachment_7549"><p><img aria-describedby="caption-attachment-7549" loading="lazy" src="https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g007-743x1024.png" alt="journal.pone.0215214.g007" width="676" height="932" srcset="https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g007-743x1024.png 743w, https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g007-580x800.png 580w, https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g007-1306x1800.png 1306w, https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g007-768x1058.png 768w, https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g007-1115x1536.png 1115w, https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g007-1486x2048.png 1486w, https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g007-676x932.png 676w, https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g007.png 1650w" sizes="(max-width: 676px) 100vw, 676px"></p><p id="caption-attachment-7549">Grinding tools from G√∂bekli Tepe. (A), (C) Neolithic handstones of type 1; (B) Neolithic handstone of type 2; (D) Experimental handstone of type 1, produced as copy of (C); (E, F) Neolithic grinding bowls (German Archaeological Institute, 3D-models H. H√∂hler-Brockmann and N. Sch√§kel).</p></div>
<p>However, G√∂bekli Tepe has not only produced an impressive set of architecture ‚Äì monumental round to oval buildings with T-shaped limestone pillars, erected in an earlier phase, and smaller rectangular buildings, built around them in a partially contemporaneous and later phase ‚Äì but also a unusually large number of over 7000 grinding tools. We analyzed these tools using an integrated approach of formal, experimental, and macro- / microscopical use-wear analyses.</p>
<p><strong>G√∂bekli Tepe</strong><br>
As a first step in our analysis we had to determine the functional variation of these grinding tools, as a wide range of uses is attested archaeologically and ethnographically, ranging from cereal processing to pounding of meat or crushing of minerals. Grinding and pounding equipment from G√∂bekli Tepe was documented through 3D-modelling by structure from motion, and surfaces were macro- and microscopically analyzed for use-wear. We used replicas of the equipment identified on site to experimentally grind different materials and establish a reference collection for the identification of the observed traces. Further, phytolith samples taken from the sediments inside and outside buildings at G√∂bekli Tepe and from grinding stone surfaces allowed us to determine and quantify the presence of plants. Phytoliths were abundant in all nine soil samples examined, ranging from 0.5 to 3.0 million phytoliths per gram of sediment. Grass phytoliths were the most common group identified. The sediments inside the rectangular buildings largely contain markers for the upper and middle part of plants. This could be indicative of harvested cereals, as plants are usually collected and transported in sheaves. To contextualize the results, we assessed the spatial distribution of grinding equipment and identified potential activity areas.</p>
<p><img loading="lazy" src="https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g010.png" alt="journal.pone.0215214.g010" width="1614" height="1852" srcset="https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g010.png 1614w, https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g010-697x800.png 697w, https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g010-1569x1800.png 1569w, https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g010-768x881.png 768w, https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g010-1339x1536.png 1339w, https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g010-676x776.png 676w, https://www.dainst.blog/the-tepe-telegrams/wp-content/uploads/sites/8/2019/05/journal.pone_.0215214.g010-892x1024.png 892w" sizes="(max-width: 1614px) 100vw, 1614px"></p>
<p>We found that the most common types of handstones used at G√∂bekli Tepe show use-wear traces connected to cereal processing. Handstones with such traces concentrate in some of the rectangular buildings, but even more so in open spaces between and around them and the (at least partly) contemporary monumental round structures.<br>
Building D was taken as a case study to asses grinding stone use within the latter. There, grinding equipment from the deepest layer, which appears to be connected to the partially intentional refilling of the structure, also shows traces of ochre, indicating its processing in this structure.<br>
The overall quantity of 7268 analyzed grinding tools from G√∂bekli Tepe appears to be too high for simple daily use, given their relatively high productivity. A single handstone of the most common types could have produced an average of 4800 g flour within eight working hours, as our experiments show. If we assume that one person needs between 500 g and 1000 g of cereals daily as nutrients for survival, this amount would be enough to feed five to ten people.</p>
<p><strong>Interpretation</strong><br>
The organization of work and food supply has always been a central question of research into G√∂bekli Tepe, as the construction and maintenance of the monumental architecture would have necessitated a considerable work force. G√∂bekli Tepe has a high concentration of distinctive architecture, often addressed as ‚Äòspecial buildings‚Äô, which do not repeat the characteristic plans of domestic buildings from contemporaneous settlements. Extensively excavated settlement sites like Nevalƒ± √áori or √áay√∂n√º have one ‚Äòspecial building‚Äô per settlement phase, while G√∂bekli Tepe has several, likely contemporary buildings of this type, which different groups of people likely used. For the buildings excavated so far, we have observed certain regularities governing the decoration of the 69 known pillars‚Äìmostly with animal motifs, but also with abstract signs. While in building A snake images prevail, in building B foxes are dominant. In building C boar take over, and in building D the imagery is more diverse with birds, especially vultures, playing a significant role. In building H felines are of importance. We see these differences in figurative expression as evidence for different groups of people ornamenting the buildings with the emblematic animals central to their group identities. The site has also produced a wide range of stationary and portable art, far outnumbering such finds from other contemporary sites. Many of the animal and human depictions are clearly marked as male, there are almost no clearly recognizable female depictions, a situation contrary to the materials known from settlements.<br>
At the same time, G√∂bekli Tepe¬¥s remote location on a barren mountain ridge is very unusual compared to the setting of contemporaneous Neolithic settlements, which are regularly located next to water sources. The construction of monumental architecture at G√∂bekli Tepe, and other similar sites in its vicinity, would have necessitated a workforce of hundreds of people even by conservative estimates. One model to explain cooperation in small-scale communities involves ritualized work feasts. M. Dietler and E. Herbich define work feasts as events in which ‚Äúcommensal hospitality is used to orchestrate voluntary collective labour,‚Äù the incentive to work together is provided by the prospect of large amounts of food and drink. The main archaeological marker for feasting would be evidence of the presence of larger amounts of foodstuffs and tools than needed by the inhabitants of a site for their subsistence. Through our analysis, we have identified evidence for G√∂bekli Tepe that fits that pattern for plant food. As no large storage facilities have been identified, we argue for a production of food for immediate consumption and interpret these seasonal peaks in activity at the site as evidence for the organization of large work feasts. This adds to archaeozoological data suggesting large-scale hunting of migratory gazelle between midsummer and autumn.</p>
							
	</div></div>]]>
            </description>
            <link>https://www.dainst.blog/the-tepe-telegrams/2019/05/09/cereals-feasts-and-monuments-at-gobekli-tepe/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26129693</guid>
            <pubDate>Sun, 14 Feb 2021 04:29:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[On navigating a large codebase]]>
            </title>
            <description>
<![CDATA[
Score 270 | Comments 132 (<a href="https://news.ycombinator.com/item?id=26129190">thread link</a>) | @mooreds
<br/>
February 13, 2021 | https://blog.royalsloth.eu/posts/on-navigating-a-large-codebase/ | <a href="https://web.archive.org/web/*/https://blog.royalsloth.eu/posts/on-navigating-a-large-codebase/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>A while ago, I‚Äôve been working on a very large codebase that consisted of a few million lines of code.
Large systems are usually a big mess and this one was no exception.
Since this is a rather common problem in software engineering, I thought the internet would be
littered with stories about this topic.
There is a lot of talk about software carpentry, while software maintenance is rarely debated.
Either large programs are being maintained by dark matter developers or
nobody thinks that writing stories about large systems are interesting enough.</p><p>In the past I‚Äôve encountered a few of those large monsters and they seem to have a lot in common.
This article will try to present some of the problems and tricks that I am using when
I have to deal with them. Hopefully this will inspire others to write similar posts
and share tips from their own bag of tricks.</p><h2 id="large-codebase-problems">Large codebase problems</h2><p>The main problem of any large codebase is the extreme complexity that stems from the fact
that we live in a messy world of details that are very hard to describe and put into words.
The programming languages that we are using nowadays are still too primitive for that task,
and it takes a lot of lines and various layers of abstractions before we are able to convey the
rules of our world to the all mighty computer [1].</p><p>The following sections will present some of the common problems which I‚Äôve discovered during my
big system adventures.</p><p>A common trait of a large codebases is that at some point they become so large and bloated
that one person alone is no longer capable of understanding all its pieces. It seems to
me that after 100‚Äô000 lines of code, the maintenance related problems start to appear
as the complexity of the code simply dwarfs the capabilities of the human brain.
Such large systems are commonly maintained by more than one person, but with a large
group of people also come large organizational problems.</p><p>Within a large group of people the number of possible communication paths between them go bananas
and so it often happens that the ass no longer knows what the head is doing.
This misunderstanding in turn cause them to build the wrong thing that doesn‚Äôt fit
into the rest of the system. You might also know this situation under the term of
‚Äúthose people had no idea what they were doing, and we will do it right this time‚Äù which is
quite often floating around in the latest maintenance team.</p><p>That rarely happens though, because it‚Äôs likely the Towel of Babel situation all over again.</p><h3 id="loss-of-knowledge">Loss of knowledge</h3><p>Large systems are usually maintained by the ones who did not build them. Initial
developers often leave the company or move up in the pecking order to
work on other projects and are therefore no longer familiar with the system.
Sometimes the bright minds outsourced the initial development of the project
in the name of lowering the costs, just to pay tenfold in the later stages once they realize
the outsourcers developed the wrong thing. Even worse is the fact that the in house developers
didn‚Äôt gain the internal domain knowledge that is necessary for further maintenance of the system.</p><p>This presents a big problem for the new maintainers, as they can‚Äôt just go
around the company and ask the original developers about the initial design decisions.
Learning this tribal knowledge usually takes a lot of time, because the code is harder to read and
understand than it is to write. These days most developers seem to switch jobs every 2 to 3 years,
therefore the learning process has to be constantly going on, otherwise you might end up
with a large and expensive monster that nobody knows anything about [2].
For most of the past large projects on which I‚Äôve been working on, the team has usually
changed by the end of the first version.</p><p>Rigorously documenting every step is not the cure for this problem, because at some point all that
junk will become outdated and nobody will have the time to spend a year just reading the
documentation and figuring out how the pieces fit together [3].</p><h3 id="lack-of-knowledge">Lack of knowledge</h3><p>Large systems become large, because they are usually trying to solve every problem under the sun.
Often the organization that is embarking on such journey does not have enough experienced
employees on board to actually pull it off. Some like to say that pressure makes diamonds,
but sometimes it also crushes the things that are under.</p><p>It‚Äôs fine to have less experienced people working on a large system as long as they have the elders
overseeing their work. In the world where senior titles are handed left and right,
that is often not the case and it‚Äôs how you end up with a very fragile system that is suitable for
a replacement as soon as it was built. Most of the larger projects that I was working on and
were considered successes, had the core parts of the system written by experienced
developers. A significant chunks were also built by greenhorns, but they were usually
guided and their blast radius was limited to the less complex parts of the system.</p><h3 id="the-astronauts">The astronauts</h3><p>Big projects tend to attract the data modelers and other cultists who like to
get in the way of getting shit done. These architecture astronauts will endlessly
discuss the finer points of their UML data models and multithreaded layers of abstraction,
that will one day allow them to be the heroes of their own story by writing some well
encapsulated and ‚ÄúSOLID‚Äù code.</p><blockquote><p>Why IBM sales reps don‚Äôt have children?</p><p>Because all they do is sit on the bed telling their spouses how great it‚Äôs going to be.</p></blockquote><p>Meanwhile, the for loopers have to fight this creeping metadata bureaucracy
madness on a daily basis. The tools handed down to them from the ivory tower usually don‚Äôt stand
the heat of the battle, but that doesn‚Äôt bother the modelers who will try to fix
the problems with more obfuscation patterns. It‚Äôs how you end with a homebrewed middleware monstrosity,
because the 100 existing ones out there are obviously not up to the task of powering our little CRUD app.</p><h3 id="documentation-problems">Documentation problems</h3><blockquote><p>I like to keep documentation separated from the code. Who am I?</p><p>A fool, with an out of sync document.</p></blockquote><p>The documentation of any large system is almost always outdated.
The code is usually changing faster due to the endless edge cases of the system
that were not being thought of early on. The discovered edge case problems are
usually fixed by bolting additional functionality right on the spot.
The average code change of such patch is usually quite small,
but a few tweaks here and there accumulate over time until the original design no
longer matches with the reality.</p><p>Tweaking the code is usually simple as most people are familiar with the process. You pull the
code from the version control, you make your tweaks and then you push it back.
On the other hand updating the documentation is way more convoluted and usually involves the
whole ceremony, because the term documentation is actually a spaghetti of Word documents,
pdfs, spreadsheets, emails, wiki pages and some text files on some dude‚Äôs hard drive.</p><p>The corporate world still loves to use MS Word for writing technical documents, even though
it‚Äôs entirely unusable for this use case. The Word doesn‚Äôt support syntax highlighting for
code snippets and you get to play the game of ‚Äúmoving one image for 5 pixels to the
left will mess with your headings and right align all text.‚Äù
It also makes it very hard to have multiple people collaborating on the same document.
The version control still treats Word documents in the same way as binary blobs,
which makes merging changes and fixing merge conflicts far harder than it should be.
I still remember how people collaborated by working each on their own copy of the
document and having a documentation officer merging all the copies together
manually to avoid any merge conflicts. Fun times.</p><p>If you are lucky, you might be writing documentation in plain text, but then you may have to
get familiar with all kinds of weird Lovecraftian toolchains that are relying on
all sorts of ancient operating system specifics in order to produce a nicer looking document.</p><p>After all these years of progress, writing documentation is still an unpleasant process
due to all the pain surrounding the tools that we have to deal with on a daily basis.
Large projects ensure that not only is the documentation hard to write, it‚Äôs also
impossible to find and read due to the sheer number of documents [4].</p><h2 id="tackling-the-beast">Tackling the beast</h2><p>In this section I will describe my ways of tackling the problems of an unknown large codebase
that I often encounter in the wild.
As mentioned before, the main problem of large systems is that nobody can understand them
entirely and often you will be left wondering how the damn thing even works.</p><p>When you are trying to understand a specific part of a large system, it‚Äôs worth
taking the time to talk to the current maintainers. They usually know it well enough
to guide you through the jungle, so you can avoid the traps and get up to speed faster.
Sometimes you will encounter a situation where you will just have to figure it
out on your own, because nobody will have the answers to your questions.</p><p>Hopefully the following sections might give you some ideas on how to tackle such
situations.</p><h3 id="read-the-documentation">Read the documentation</h3><p>The easiest way to get familiar with a large system, is by going through its documentation and
actually reading it. Large systems usually contain
large swaths of outdated documentation, but even a slightly outdated document is
often better than not having it at all. Ask the elders about the current state of documentation,
so you don‚Äôt completely waste your time with deciphering the irrelevant documents.</p><p>Either way, the documentation will only give you an overview of the system. The details
behind design decisions are almost never mentioned and you will have to find another way.</p><h3 id="check-the-tests">Check the tests</h3><p>When I am trying to decipher how a specific part of the system is supposed to behave,
I usually check for tests. If they exist, you might want to scroll through them and hopefully
you will get another ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.royalsloth.eu/posts/on-navigating-a-large-codebase/">https://blog.royalsloth.eu/posts/on-navigating-a-large-codebase/</a></em></p>]]>
            </description>
            <link>https://blog.royalsloth.eu/posts/on-navigating-a-large-codebase/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26129190</guid>
            <pubDate>Sun, 14 Feb 2021 02:41:49 GMT</pubDate>
        </item>
    </channel>
</rss>
