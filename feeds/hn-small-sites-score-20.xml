<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 20]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 20. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Fri, 06 Nov 2020 20:18:22 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-20.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Fri, 06 Nov 2020 20:18:22 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[Account Takeover via IDOR in Starbucks Singapore]]>
            </title>
            <description>
<![CDATA[
Score 62 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24995657">thread link</a>) | @eshanaswar
<br/>
November 4, 2020 | http://www.kamilonurozkaleli.com/posts/starbucks-singapore-account-takeover/ | <a href="https://web.archive.org/web/*/http://www.kamilonurozkaleli.com/posts/starbucks-singapore-account-takeover/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
			<h3 id="recon"><strong>Recon</strong></h3>
<p>While browsing Starbucks Singapore, I noticed a page loaded with content from a 3rd party site. Let’s call this site <em>example.com</em> in order not to disclose it. When I did some research on this site, I saw the same login page on <em>card.starbucks.com.sg</em> in the directory example.com/starbucks, and at this point I had two possibilities.</p>
<ol>
<li>This application can be an environment where current developments of <em>card.starbucks.com.sg</em> are made and tested.</li>
<li>Or it may have been used as an old test environment and is in an idle state.</li>
</ol>
<p>Both possibilities increased the probability of a bug here, but the main problem is that I did not know whether a bug I will find here would affect the production environment. To understand this, I created a user account at card.starbucks.com.sg and tried to log into example.com/starbucks with this account. BINGO! I was able to successfully login with the account I just created. Both applications seemed to be using the same authentication mechanism.</p>
<p><img src="http://www.kamilonurozkaleli.com/images/starbucks-1.png" alt="Scheme-1, both applications are using same database table."></p>
<h3 id="exploitation"><strong>Exploitation</strong></h3>
<p>From this point I browsed example.com/starbucks and discovered an endpoint which does not exist in the production app. The POST data this endpoint received was as follows.</p>
<p><code>email=hacker@hacker.com</code></p>
<p>When I write the email address of the account I want to takeover in the email parameter here and send a request, I saw the partial information of the account belonging to that email address on my profile page. I could not fully takeover the account yet, and my password change request was not successful due to the invalid CSRF token generated in this application.</p>
<p>To get around this, I copied the PHPSESSID cookie value from example.com/starbucks to card.starbucks.com.sg and BOOM! I was able to see all the information belongs to victim in the production environment, the valid CSRF tokens generated here allowed me to change the password and I was able to completely takeover an account whose e-mail address I know.</p>
<h3 id="impact"><strong>Impact</strong></h3>
<p>Except for seeing all personal information belonging to users and completely taking over the accounts, if there is a loaded credit in the user account, these credits can be spent in Starbucks stores via the mobile application.</p>
<h3 id="multiplying-the-reward"><strong>Multiplying the Reward</strong></h3>
<p>I came across two other test environments on example.com. Let’s call them <em>example.com/starbucks2</em> and <em>example.com/starbucks3</em>. With my account at card.starbucks.com.sg, I was not able to login to either test environment. example.com/starbucks2 did not allow me to create a new account, so I tried my luck at example.com/starbucks3 and successfully created a new account. Things get a little complicated here, I will try to explain it as simply as possible.</p>
<p>I think the applications example.com/starbucks2 and example.com/starbucks3 were using test tables, so users in production could not login in these applications.</p>
<p>With the account I created at example.com/starbucks3, I was able to log in to example.com/starbucks2, but not card.starbucks.com.sg. However, the PHPSESSID I copied from example.com/starbucks2 was valid on card.starbucks.com.sg and I could use that account. Considering all the scenarios, I created a chain here as follows:</p>
<ol>
<li>Create a dummy account with the victim’s email address at example.com/starbucks3. (Add to testusers table.)</li>
<li>At example.com/starbucks2, associate the account for that email with your own account via the same endpoint. (Associate the PHPSESSID with the email in the testusers table.)</li>
<li>Copy the PHPSESSID to card.starbucks.com.sg and takeover. (Takeover the real account of the same email address in the production users table.)</li>
</ol>
<p><img src="http://www.kamilonurozkaleli.com/images/starbucks-2.png" alt="Scheme-2, relations between applicaitons and tables."></p>
<p>May 17th - Report Submitted<br>
May 18th - Triaged<br>
May 20th - Rewarded $4000 bounty<br>
Jun 17th - Rewarded $2000 bounty as 1.5x multiplier</p>

		</div></div>]]>
            </description>
            <link>http://www.kamilonurozkaleli.com/posts/starbucks-singapore-account-takeover/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24995657</guid>
            <pubDate>Thu, 05 Nov 2020 04:27:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Linux Commands HandBook]]>
            </title>
            <description>
<![CDATA[
Score 39 | Comments 5 (<a href="https://news.ycombinator.com/item?id=24995352">thread link</a>) | @ekianjo
<br/>
November 4, 2020 | https://openbootcamps.com/the-linux-commands-handbook/ | <a href="https://web.archive.org/web/*/https://openbootcamps.com/the-linux-commands-handbook/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                    <!--kg-card-begin: markdown-->
<p>The Linux Commands Handbook follows the 80/20 rule: you’ll learn 80% of a topic in around 20% of the time you spend studying it.</p>
<p>I find that this approach gives you a well-rounded overview.</p>
<p>This handbook does not try to cover everything under the sun related to Linux and its commands. It focuses on the small core commands that you will use the 80% or 90% of the time, and tries to simplify the usage of the more complex ones.</p>
<p>All these commands work on Linux, macOS, WSL, and anywhere you have a UNIX environment.</p>
<p>I hope the contents of this handbook will help you achieve what you want: <strong>getting comfortable with Linux</strong>.</p>
<p><a target="_blank" href="https://flaviocopes.com/page/linux-commands-handbook/" rel="noopener noreferrer">Click here to download this handbook in PDF / ePUB / Mobi format</a>.</p>
<p>Enjoy!</p>

<h2 id="summary">Summary</h2>

<h2 id="introductiontolinuxandshells">Introduction to Linux and shells</h2>
<h3 id="whatislinux">What is Linux?</h3>
<p>Linux is an operating system, like macOS or Windows.</p>
<p>It is also the most popular Open Source operating system, and it gives you a lot of freedom.</p>
<p>It powers the vast majority of the servers that compose the Internet. It’s the base upon which everything is built. But not just that. Android is based on (a modified version of) Linux.</p>
<p>The Linux “core” (called a <em>kernel</em>) was born in 1991 in Finland, and it has come a really long way from its humble beginnings. It went on to be the kernel of the GNU Operating System, creating the duo GNU/Linux.</p>
<p>There’s one thing about Linux that corporations like Microsoft, Apple, and Google will never be able to offer: the freedom to do whatever you want with your computer.</p>
<p>They’re actually going in the opposite direction, building walled gardens, especially on the mobile side.</p>
<p>Linux is the ultimate freedom.</p>
<p>It is developed by volunteers, some paid by companies that rely on it, some independently. But there’s no single commercial company that can dictate what goes into Linux, or the project’s priorities.</p>
<p>You can also use Linux as your day to day computer. I use macOS because I really enjoy the applications and design (and I also used to be an iOS and Mac apps developer). But before using macOS I used Linux as my main computer Operating System.</p>
<p>No one can dictate which apps you can run, or “call home” with apps that track you, your position, and more.</p>
<p>Linux is also special because there’s not just “one Linux”, like is the case with Windows or macOS. Instead, we have <strong>distributions</strong>.</p>
<p>A “distro” is made by a company or organization and packages the Linux core with additional programs and tooling.</p>
<p>For example you have Debian, Red Hat, and Ubuntu, probably the most popular distributions.</p>
<p>But many, many more exist. You can create your own distribution, too. But most likely you’ll use a popular one that has lots of users and a community of people around it. This lets you do what you need to do without losing too much time reinventing the wheel and figuring out answers to common problems.</p>
<p>Some desktop computers and laptops ship with Linux preinstalled. Or you can install it on your Windows-based computer, or on a Mac.</p>
<p>But you don’t need to disrupt your existing computer just to get an idea of how Linux works.</p>
<p>I don’t have a Linux computer.</p>
<p>If you use a Mac, you just need to know that under the hood macOS is a UNIX Operating System. It shares a lot of the same ideas and software that a GNU/Linux system uses, because GNU/Linux is a free alternative to UNIX.</p>
<blockquote>
<p><a target="_blank" href="https://en.wikipedia.org/wiki/Unix" rel="noopener noreferrer">UNIX</a> is an umbrella term that groups many operating systems used in big corporations and institutions, starting from the 70’s</p>
</blockquote>
<p>The macOS terminal gives you access to the same exact commands I’ll describe in the rest of this handbook.</p>
<p>Microsoft has an official <a target="_blank" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" rel="noopener noreferrer">Windows Subsystem for Linux</a> which you can (and should!) install on Windows. This will give you the ability to run Linux in a very easy way on your PC.</p>
<p>But the vast majority of the time you will run a Linux computer in the cloud via a VPS (Virtual Private Server) like DigitalOcean.</p>
<h3 id="whatisashell">What is a shell?</h3>
<p>A shell is a command interpreter that exposes an interface to the user to work with the underlying operating system.</p>
<p>It allows you to execute operations using text and commands, and it provides users advanced features like being able to create scripts.</p>
<p>This is important: shells let you perform things in a more optimized way than a GUI (Graphical User Interface) could ever possibly let you do. Command line tools can offer many different configuration options without being too complex to use.</p>
<p>There are many different kind of shells. This post focuses on Unix shells, the ones that you will find commonly on Linux and macOS computers.</p>
<p>Many different kind of shells were created for those systems over time, and a few of them dominate the space: Bash, Csh, Zsh, Fish and many more!</p>
<p>All shells originate from the Bourne Shell, called <code>sh</code>. “Bourne” because its creator was Steve Bourne.</p>
<p>Bash means <em>Bourne-again shell</em>. <code>sh</code> was proprietary and not open source, and Bash was created in 1989 to create a free alternative for the GNU project and the Free Software Foundation. Since projects had to pay to use the Bourne shell, Bash became very popular.</p>
<p>If you use a Mac, try opening your Mac terminal. By default it runs ZSH (or, pre-Catalina, Bash).</p>
<p>You can set up your system to run any kind of shell – for example I use the Fish shell.</p>
<p>Each single shell has its own unique features and advanced usage, but they all share a common functionality: they can let you execute programs, and they can be programmed.</p>
<p>In the rest of this handbook we’ll see in detail the most common commands you will use.</p>

<h2 id="the-man-command">The <code>man</code> command</h2>
<p>The first command I’ll introduce will help you understand all the other commands.</p>
<p>Every time I don’t know how to use a command, I type <code>man &lt;command&gt;</code> to get the manual:</p>
<figure><img src="https://i1.wp.com/www.freecodecamp.org/news/content/images/2020/10/Screen-Shot-2020-07-04-at-18.42.40.png?ssl=1" alt="" srcset="https://www.freecodecamp.org/news/content/images/size/w600/2020/10/Screen-Shot-2020-07-04-at-18.42.40.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2020/10/Screen-Shot-2020-07-04-at-18.42.40.png 1000w, https://i1.wp.com/www.freecodecamp.org/news/content/images/2020/10/Screen-Shot-2020-07-04-at-18.42.40.png?ssl=1 1188w" data-recalc-dims="1" data-lazy-srcset="https://www.freecodecamp.org/news/content/images/size/w600/2020/10/Screen-Shot-2020-07-04-at-18.42.40.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2020/10/Screen-Shot-2020-07-04-at-18.42.40.png 1000w, https://i1.wp.com/www.freecodecamp.org/news/content/images/2020/10/Screen-Shot-2020-07-04-at-18.42.40.png?ssl=1 1188w" data-lazy-src="https://i1.wp.com/www.freecodecamp.org/news/content/images/2020/10/Screen-Shot-2020-07-04-at-18.42.40.png?ssl=1&amp;is-pending-load=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure>
<p>This is a man (from <em>_manual_</em>) page. Man pages are an essential tool to learn as a developer. They contain so much information that sometimes it’s almost too much.<br>The above screenshot is just 1 of 14 screens of explanation for the <code>ls</code> command.</p>
<p>Most of the time when I need to learn a command quickly I use this site called <strong>tldr pages</strong>: <a target="_blank" href="https://tldr.sh/" rel="noopener noreferrer">https://tldr.sh</a>. It’s a command you can install, which you then run like this: <code>tldr &lt;command&gt;</code>. It gives you a very quick overview of a command, with some handy examples of common usage scenarios:</p>
<figure><img src="https://i0.wp.com/www.freecodecamp.org/news/content/images/2020/10/Screen-Shot-2020-09-07-at-07.35.41.png?ssl=1" alt="" srcset="https://www.freecodecamp.org/news/content/images/size/w600/2020/10/Screen-Shot-2020-09-07-at-07.35.41.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2020/10/Screen-Shot-2020-09-07-at-07.35.41.png 1000w, https://i0.wp.com/www.freecodecamp.org/news/content/images/2020/10/Screen-Shot-2020-09-07-at-07.35.41.png?ssl=1 1002w" data-recalc-dims="1" data-lazy-srcset="https://www.freecodecamp.org/news/content/images/size/w600/2020/10/Screen-Shot-2020-09-07-at-07.35.41.png 600w, https://www.freecodecamp.org/news/content/images/size/w1000/2020/10/Screen-Shot-2020-09-07-at-07.35.41.png 1000w, https://i0.wp.com/www.freecodecamp.org/news/content/images/2020/10/Screen-Shot-2020-09-07-at-07.35.41.png?ssl=1 1002w" data-lazy-src="https://i0.wp.com/www.freecodecamp.org/news/content/images/2020/10/Screen-Shot-2020-09-07-at-07.35.41.png?ssl=1&amp;is-pending-load=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure>
<p>This is not a substitute for <code>man</code>, but a handy tool to avoid losing yourself in the huge amount of information present in a <code>man</code> page. Then you can use the <code>man</code> page to explore all the different options and parameters you can use on a command.</p>
<h2 id="the-ls-command">The <code>ls</code> command</h2>

<p>Inside a folder you can list all the files that the folder contains using the <code>ls</code> command:</p>
<pre><code>ls
</code></pre>
<p>If you add a folder name or path, it will print that folder’s contents:</p>
<pre><code>ls /bin
</code></pre>
<p><img src="https://i2.wp.com/www.freecodecamp.org/news/content/images/2020/10/Screenshot-2019-02-09-at-18.50.14.png?ssl=1" alt="Screenshot-2019-02-09-at-18.50.14" data-recalc-dims="1" data-lazy-src="https://i2.wp.com/www.freecodecamp.org/news/content/images/2020/10/Screenshot-2019-02-09-at-18.50.14.png?ssl=1&amp;is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>
<p><code>ls</code> accepts a lot of options. One of my favorite combinations is <code>-al</code>. Try it:</p>
<pre><code>ls -al /bin
</code></pre>
<p><img src="https://i0.wp.com/www.freecodecamp.org/news/content/images/2020/10/Screenshot-2019-02-09-at-18.49.52.png?ssl=1" alt="Screenshot-2019-02-09-at-18.49.52" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/www.freecodecamp.org/news/content/images/2020/10/Screenshot-2019-02-09-at-18.49.52.png?ssl=1&amp;is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>
<p>Compared to the plain <code>ls</code> command, this returns much more information.</p>
<p>You have, from left to right:</p>
<ul>
<li>the file permissions (and if your system supports ACLs, you get an ACL flag as well)</li>
<li>the number of links to that file</li>
<li>the owner of the file</li>
<li>the group of the file</li>
<li>the file size in bytes</li>
<li>the file’s last modified datetime</li>
<li>the file name</li>
</ul>
<p>This set of data is generated by the <code>l</code> option. The <code>a</code> option instead also shows the hidden files.</p>
<p>Hidden files are files that start with a dot (<code>.</code>).</p>

<h2 id="thecdcommand">The <code>cd</code> command</h2>
<p>Once you have a folder, you can move into it using the <code>cd</code> command. <code>cd</code> means <strong>c</strong>hange <strong>d</strong>irectory. You invoke it specifying a folder to move into. You can specify a folder name, or an entire path.</p>
<p>Example:</p>
<pre><code>mkdir fruits
cd fruits
</code></pre>
<p>Now you are in the <code>fruits</code> folder.</p>
<p>You can use the <code>..</code> special path to indicate the parent folder:</p>
<pre><code>cd .. #back to the home folder
</code></pre>
<p>The # character indicates the start of the comment, which lasts for the entire line after it’s found.</p>
<p>You can use it to form a path:</p>
<pre><code>mkdir fruits
mkdir cars
cd fruits
cd ../cars
</code></pre>
<p>There is another special path indicator which is <code>.</code>, and indicates the <strong>current</strong> folder.</p>
<p>You can also use absolute paths, which start from the root folder <code>/</code>:</p>
<pre><code>cd /etc
</code></pre>

<h2 id="the-pwd-command">The <code>pwd</code> command</h2>

<p>Whenever you feel lost in the filesystem, call the <code>pwd</code> command to know where you are:</p>
<pre><code>pwd
</code></pre>
<p>It will print the current folder path.</p>

<h2 id="the-mkdir-command">The <code>mkdir</code> command</h2>

<p>You create folders using the <code>mkdir</code> command:</p>
<pre><code>mkdir fruits
</code></pre>
<p>You can create multiple folders with one command:</p>
<pre><code>mkdir dogs cars
</code></pre>
<p>You can also create multiple nested folders by adding the <code>-p</code> option:</p>
<pre><code>mkdir -p fruits/apples
</code></pre>
<p>Options in UNIX commands commonly take this form. You add them right after the command name, and they change how the command behaves. You can often combine multiple options, too.</p>
<p>You can find which options a command supports by typing <code>man &lt;commandname&gt;</code>. Try now with <code>man mkdir</code> for example (press the <code>q</code> key to esc the man page). Man pages are the amazing built-in help for UNIX.</p>

<h2 id="the-rmdir-command">The <code>rmdir</code> command</h2>

<p>Just as you can create a folder using <code>mkdir</code>, you can delete a folder using <code>rmdir</code>:</p>
<pre><code>mkdir fruits
rmdir fruits
</code></pre>
<p>You can also delete multiple folders at once:</p>
<pre><code>mkdir fruits cars
rmdir fruits cars
</code></pre>
<p>The folder you delete must be empty.</p>
<p>To delete folders with files in them, we’ll use the more generic <code>rm</code> command which deletes files and folders, using the <code>-rf</code> option:</p>
<pre><code>rm -rf fruits cars
</code></pre>
<p>Be careful as this command does not ask for confirmation and it will immediately remove anything you ask it to remove.</p>
<p>There is no <strong>bin</strong> when removing files from the command line, and recovering lost files can be hard.</p>

<h2 id="the-mv-command">The <code>mv</code> command</h2>

<p>Once you have a file, you can move it around using the <code>mv</code> command. You specify the file current path, and its new path:</p>
<pre><code>touch test
mv pear new_pear
</code></pre>
<p>The <code>pear</code> file is now moved to <code>new_pear</code>. This is how you <strong>rename</strong> files and folders.</p>
<p>If the last parameter is a folder, the file located at the first parameter path is going to be moved into that folder. In this case, you can specify a list of files and they will all be moved in the folder path identified by the last parameter:</p>
<pre><code>touch pear
touch apple
mkdir fruits
mv pear apple fruits #pear and apple moved to the fruits folder
</code></pre>

<h2 id="the-cp-command">The <code>cp</code> command</h2>

<p>You can copy a file using the <code>cp</code> command:</p>
<pre><code>touch test
cp apple another_apple
</code></pre>
<p>To copy folders you need to add the <code>-r</code> option to …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://openbootcamps.com/the-linux-commands-handbook/">https://openbootcamps.com/the-linux-commands-handbook/</a></em></p>]]>
            </description>
            <link>https://openbootcamps.com/the-linux-commands-handbook/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24995352</guid>
            <pubDate>Thu, 05 Nov 2020 03:19:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[GitHub Source Code Leak]]>
            </title>
            <description>
<![CDATA[
Score 719 | Comments 258 (<a href="https://news.ycombinator.com/item?id=24994746">thread link</a>) | @resynth1943
<br/>
November 4, 2020 | https://resynth1943.net/articles/github-source-code-leak/ | <a href="https://web.archive.org/web/*/https://resynth1943.net/articles/github-source-code-leak/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="content">
		
		<p>What do Microsoft <i>really</i> think about open-source?</p>

		<p><strong>Update</strong>: according to multiple online sources, the leaked source code was from GitHub <em>Enterprise</em>, not the version hosted at <a href="http://github.com/">GitHub.com</a>. While a substantial amount of code is shared between the two, they do have some differences.</p>
<p>The entirety of the confidential source code used by GitHub Enterprise has just been leaked to the public.</p>
<p>In a suspicious <a href="https://web.archive.org/web/20201104050026if_/https://github.com/github/dmca/tree/565ece486c7c1652754d7b6d2b5ed9cb4097f9d5">commit</a> to the <a href="https://github.com/github/dmca">official GitHub DMCA repository</a>, an unknown individual uploaded the confidential source code, impersonating Nat Friedman using a bug in GitHub's application.</p>
<p>At the heart of open-source, GitHub has long been criticised for keeping its source code private. The platform hosts millions of open-source projects, and critics say GitHub's position is somewhat hypocritical.</p>
<p>However, this raises questions around the security of GitHub's source code, and whether or not GitHub have anything to lose, if they do plan to release the source code in a public setting.</p>
<p>Some worry this will damage the overall security of GitHub, and this may be true. Commonly, closed-source applications perform "security by obscurity". This means the source code is hidden, with the intention of concealing security risks.</p>
<p>Since Microsoft's <a href="https://www.theverge.com/2018/10/26/17954714/microsoft-github-deal-acquisition-complete">acquisition of GitHub</a> in 2018, Microsoft have repeatedly emphasised their "love" for open-source. We have seen this through repeated commercial advertisements, which aim to place Microsoft at the forefront of open-source development.</p>
<p>Some users, such as Drew DeVault, suggest Microsoft is attempting to <a href="https://drewdevault.com/2020/08/27/Microsoft-plays-their-hand.html">centralise open-source</a>. Through closed-source applications, and proprietary extensions to Git, GitHub is seen as a platform that tries to <em>contain</em> open-source. An example of this is when <a href="https://www.theverge.com/2020/6/29/21306674/github-down-errors-outage-june-2020">GitHub went offline for two hours</a>, leaving thousands of open-source projects inaccessible and unusable.</p>
<p>GitHub is, in many ways, the Google of open-source development.</p>
<p>Perhaps GitHub as 12 years late in finally revealing their source code to the public; and maybe this is just what we need. <a href="https://mastodon.tedomum.net/@resynth1943">What do you think?</a></p>


		<!-- Doing a little experiment here. -->
		<p aria-disabled="true">resynth1943.article</p>
	</div></div>]]>
            </description>
            <link>https://resynth1943.net/articles/github-source-code-leak/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24994746</guid>
            <pubDate>Thu, 05 Nov 2020 01:10:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[IPv6 Is a Total Nightmare – This Is Why]]>
            </title>
            <description>
<![CDATA[
Score 33 | Comments 24 (<a href="https://news.ycombinator.com/item?id=24994587">thread link</a>) | @whereistimbo
<br/>
November 4, 2020 | https://teknikaldomain.me/post/ipv6-is-a-total-nightmare/ | <a href="https://web.archive.org/web/*/https://teknikaldomain.me/post/ipv6-is-a-total-nightmare/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
<div>


<p>So this is just going to be a total rant.
IPv6 is, in theory, a solution to many things, including the dwindling IPv4 address space.
IPv6 was a draft in 1997(!), and became a real <em>Internet Standard</em> in 2017.
And, quite frankly, it’s one of those things that just adds too much hassle for not enough benefit.</p>

<p>Okay, yes, IPv6’s address space is <em><strong>massive.</strong></em>
IPv4 uses 32-bit addresses, allowing for 4,294,967,296 total addresses.
IPv6 uses 128-bit addresses, meaning… 340,282,366,920,938,463,463,374,607,431,768,211,456 addresses.<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup>
The entire v4 space could fit into the v6 space $7.922816251426434 \times 10^{28}$ times over.<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup>
The default allocation to people, a <code>/64</code>, meaning the first half of the addresses is fixed and the entire second half is the part unique to the network, means that most people have 18,446,744,073,709,551,616 addresses to play with at home.<sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup>
Compared to v4, where <em>most</em> networks are around <code>/24</code>, meaning the first three groupings are fixed, you get… 254 addresses.
Again, context, a standard <code>/64</code> allocation can, <em>again</em>, fit the entire v4 address space inside itself 4,294,967,296 times. (Yes, that’s the number of addresses <em>in</em> the IPv4 address space. That’s what happens when you divide a power by half of that power.)</p>
<p>IPv4 addresses are, well, sparse, given that most high-level authorities have already run out of addresses, but because CIDR and NAT are a thing, we’ve really started compacting down our usage.
<em>My entire house</em> of easily over 60 IPs takes up… 2, according to the rest of the world.</p>
<h2 id="allocation-issues">Allocation Issues</h2>
<p>One thing that people have criticized IPv4 for is that the allocations are just horrible.
For example, <em>anything</em> starting with <code>127</code> is <code>localhost</code>.
normally this is <code>127.0.0.1</code>, but anything from <code>127.0.0.0</code> to <code>127.255.255.255</code> all mean the <strong>exact same thing.</strong>
That’s 16,777,216 addresses all <em>literally for <code>localhost</code>.</em>
By numbers, 0.39% of the address space, but just keep this in mind.</p>
<p>Similarly, anything starting with a <code>0</code>, is effectively “current network” (only valid as source), again, another 16 million addresses.</p>
<p>There’s also multiple blocks for private networks, <code>10.0.0.0/8</code>, <code>172.16.0.0/12</code>, and <code>192.168.0.0/16</code>.
In total, 17,891,328 addresses.</p>
<p>Compared to IPv6, yes, IPv6 is much better… in theory.
There’s only <em>one</em> loopback address, <code>::1</code>.
At the same time… <code>fc00::/7</code> (26,58,455,991,569,831,745,807,614,120,560,689,152 addresses) is the private address space (more on that later), <code>fe80::/10</code> (332,306,998,946,228,968,225,951,765,070,086,144 addresses) is the <em>local</em> address space, and <code>ff00::/8</code> (1,329,227,995,784,915,872,903,807,060,280,344,576 addresses.) is multicast.
yes, do you see a recurring pattern?
Even though the entire “special” address assignments are exactly 1.271% of the entire IPv6 address space, we’re still allocating <strong>giant</strong> swathes of addresses.
History repeats itself, you can see that <em>right here.</em></p>
<p>And I will admit, that multicast in IPv6 is special since some bits in the address are special flags, and one form of multicast actually includes a response node’s address, so it’s not <em>just</em> an arbitrary number, but… come on, that’s a little uncalled for, having <em>that much</em> space.</p>

<p>We all know what an IPv4 address looks like, right?
Four dotted-decimal grouping in the range from 0–255.
For example, <code>192.168.5.225</code>.
IPv6 uses <em>eight</em> groupings of four <em>hex</em> digits, colon-separated.
For example, <code>2607:f0d0:1002:0051:0000:0000:0000:0004</code>.
That’s… very unweildy, so we have a few shortening rules.
Any zeros that <em>lead</em> the droup can be dropped, giving us this: <code>2607:f0d0:1002:51:0:0:0:4</code>.
And since <em>that</em> is still repetitive, you can replace <em>exactly one</em> sequence of <em>more than one group</em> of all zeros with an empty: <code>2607:f0d0:1002:51::4</code>.
For the record this is why the loopback address is <code>::1</code>.
The full address is <code>0000:0000:0000:0000:0000:0000:0000:0001</code>.
Even with those methods, they’re still <em>much</em> longer, harder to remember, and harder to even say than IPv4 addresses.</p>
<h2 id="urls">URLs</h2>
<p>And remember that this address violates the URL spec, since the <code>:</code> character is specifically to be used to separate the <em>host</em> portion (e.g., <code>google.com</code>) from the <em>port</em> to connect to (assuming nonstandard).
As an example, I can reach my torrent client via <code>http://192.168.5.43:9091</code>.
See that <code>:</code> there?
Because Transmission listens on port 9091, not port 80.
How do we fix this?
Well, by breaking it again, naturally.
To connect to a raw IPv6 address, you wrap it in square brackets.
To connect to <code>2607:f0d0:1002:51::4</code> directly, that’s <code>http://[2607:f0d0:1002:51::4]/</code>
<strong>Why is this a thing?!</strong>.</p>
<h2 id="dns">DNS</h2>
<p>okay, admittedly, IPv6 kinda relies on DNS since… just about everything uses DNS, and of course, actual names are more memorable than 32 hexadecimal digits, but DNS isn’t magic.
Unless you have your own DNS server (actually not that hard) that’s configured, you’re still manually typing addresses.
Of course if you have, say, pfSense managing your network, every static DHCP lease will be registered in DNS, but it has to take a DHCP lease.
And if this device doesn’t… well, I hope you don’t mind typing that out by hand to connect so you can configure it.</p>
<p>Even better, rDNS.
rDNS, or Reverse DNS, is where a DNS query is performed <em>with an IP address</em> that returns the hostname associated, in a <code>PTR</code> record.
For example, the IPv4 that <code>google.com</code> resolves to, <code>216.58.192.142</code>, can be queried as <code>142.192.58.216.in-addr.arpa</code> to get it’s “real” name, a <code>PTR</code> record for <code>ord36s01-in-f142.1e100.net</code>.
With <code>dig</code>, specifying a <code>-x</code> and then the IP will convert it to the correct format.
And if you look close, the query name is the IP, backwards, with <code>in-addr.arpa</code> at the front.
It’s backwards because of the hierarchical nature of DNS, which runs right to left, the opposite of IPs.
Of course, there’s also rDNS for IPv6:</p>
<div><pre><code data-lang="plaintext">$ dig -x 2607:f0d0:1002:51::4

; &lt;&lt;&gt;&gt; DiG 9.11.3-1ubuntu1.12-Ubuntu &lt;&lt;&gt;&gt; -x 2607:f0d0:1002:51::4
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 22821
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 65494
;; QUESTION SECTION:
;4.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.5.0.0.2.0.0.1.0.d.0.f.7.0.6.2.ip6.arpa. IN PTR

;; ANSWER SECTION:
4.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.5.0.0.2.0.0.1.0.d.0.f.7.0.6.2.ip6.arpa. 3600 IN PTR 4000.0000.0000.0000.1500.2001.0d0f.7062.ip6.static.sl-reverse.com.

;; Query time: 731 msec
;; SERVER: 127.0.0.53#53(127.0.0.53)
;; WHEN: Sun Aug 30 00:52:50 EDT 2020
;; MSG SIZE  rcvd: 180
</code></pre></div><p>That is <em><strong>insane.</strong></em>
The IPv6 rDNS <abbr title="Top Level Domain">TLD</abbr>
is just <code>ip6.arpa</code>, and the IP part is…
every single hex digit, reversed.</p>
<div><pre><code data-lang="plaintext">2607f0d0100200510000000000000004
4000000000000000150020010d0f7062
</code></pre></div>
<p>One of the core pillars of IPv6 is that most of the processing of traffic should happen at the endpoints — routers don’t do much besides read, and forward, with very little actual data processing.
The IPv6 header while being <em>gargantuan</em> in comparison (because the giant addresses), is also much simpler.
A fixed version code (6), the traffic class (<abbr title="Differentiated Services">DiffServ</abbr>
+ <abbr title="Explicit Congestion Notification">ECN</abbr>
), a <em>flow label</em> which is effectively a random value that’s constant for every packet that’s part of the same logical connection, length, type of next header, and a TTL (then addresses, obviously).
That is <em>it</em>.
The IPv4 header contains 13 fields plus optional sections, and the IPv6 header contains a flat 8.
Of course, you may actually need other details, and that’s where the <em>next header</em> field comes in.
Instead of packing all sorts of options into the standard, global header, IPv6 uses additional header <em>extensions</em> that can get tacked on one after another to provide that information, say for fragmentation or IPsec.<sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup>
The value in the next header field identifies what’s going to come next, and the final header in the line will use this field to indicate the contained protocol, be it TCP, UDP, or something else.</p>
<p>Also note there’s no checksum anymore.
I mean, just about every device uses Ethernet, which has a Frame Check Sequence (FCS), UDP has a checksum option, TCP has a required checksum…
If we want to simply packet processing, drop the sum.
And really, it does make sense, in a way.
Even without that one, that means that most programs have two checksums: the Ethernet FCS as the frame gets transmitted point to point, and the transport layer checksum, making sure the entire packet is still valid.
Also, the IPv4 checksum also included the TTL (max number of hops in the path before the packet is dropped), meaning that at <em>every stop</em> along the way, the checksum had to be recalculated.</p>
<p>As a final point, this also does bring a change to another protocol: UDP.
With IPv4, the UDP checksum field can (and often would) be left blank as all zeros, meaning “no checksum”.
In IPv6, this is now disallowed, and a all zero checksum will still be checked… and then found invalid.
All UDP packets over IPv6 <em>must</em> have a valid checksum calculated.</p>

<p>So every link between devices has an MTU, the Maximum Transmission Unit.
For normal Ethernet links, minus the frame overhead, this is 1500 bytes.
If your equipment supports jumbo frames, that’s closer to 9000 bytes.
Well not all links are equal.
Some devices might have a high-MTU link on one end, and a lower MTU link on the other.
For example, my router might support jumbo frames internally, but the WAN side doesn’t allow that.
To deal with, this, we have <em>fragmentation</em>.</p>
<p>If a router is unable to forward a frame due to MTU differences, it will, if allowed, split the packet into multiple chunks, using the More Fragments flag and the Fragment Offset field of the IPv4 header, and send the packet in multiple frames piece by piece, which the other end can reassemble.
Note that I said “if allowed.”
There is a Don’t Fragment flag in the IPv4 header, and if this is set by the sending device, a router that cannot support a packet of that size will send back an <abbr title="Internet Control Message Protocol">ICMP</abbr>
“packet too big” message which bounces back along the chain.
Any node in the network path can perform this, meaning that for sending data, the only MTU you care about is the MTU of the device you’re directly connected …</p></div></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://teknikaldomain.me/post/ipv6-is-a-total-nightmare/">https://teknikaldomain.me/post/ipv6-is-a-total-nightmare/</a></em></p>]]>
            </description>
            <link>https://teknikaldomain.me/post/ipv6-is-a-total-nightmare/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24994587</guid>
            <pubDate>Thu, 05 Nov 2020 00:37:45 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Anatomy of a Binary Executable]]>
            </title>
            <description>
<![CDATA[
Score 57 | Comments 12 (<a href="https://news.ycombinator.com/item?id=24994522">thread link</a>) | @WalterSobchak
<br/>
November 4, 2020 | https://oswalt.dev/2020/11/anatomy-of-a-binary-executable/ | <a href="https://web.archive.org/web/*/https://oswalt.dev/2020/11/anatomy-of-a-binary-executable/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

            <div>
                <h3>Anatomy of a Binary Executable</h3>
                
                    <p><em></em>
                        <span>Wed, Nov 4, 2020</span>
                        <em></em>
                        <span>23-minute read</span>
                    </p>
                
            </div>

            <p>Even though I’ve developed software for a number of years now, there’s one question that has always been in the back of my mind and I haven’t had the time or patience to really answer, until now: <strong>What <em>is</em> a binary executable anyways?</strong></p>
<p>For this example, I wrote a brutally simple Rust program that includes a function “<code>sum</code>” to add two integers together, and am invoking it from <code>main()</code>:</p>
<div><pre><code data-lang="rust"><span>fn</span> <span>main</span>() {
    println<span>!</span>(<span>"{}"</span>, sum(<span>5</span>, <span>8</span>));
}

<span>pub</span> <span>fn</span> <span>sum</span>(a: <span>i32</span>, b: <span>i32</span>) -&gt; <span>i32</span> {
    a <span>+</span> b
}
</code></pre></div><p>My Rust code is always structured the <a href="https://doc.rust-lang.org/cargo/guide/project-layout.html">“cargo way”</a>, so I can compile my program by running <code>cargo build</code>, and this will produce a binary for me within the <code>target/debug/</code> directory. I have named my crate <code>rbin</code>, so this is the name of the binary that is created at this location:</p>
<div><pre><code data-lang="bash">~$ cargo build
   Compiling rbin v0.1.0 <span>(</span>/home/mierdin/Code/rbin<span>)</span>
    Finished dev <span>[</span>unoptimized + debuginfo<span>]</span> target<span>(</span>s<span>)</span> in 0.15s

~$ ls -lha target/debug/rbin
-rwxrwxr-x <span>2</span> mierdin mierdin 3.1M Nov  <span>3</span> 22:46 target/debug/rbin
</code></pre></div><p>These days, it’s really easy to take such questions for granted, but if you’re curious, you may be asking:</p>
<blockquote>
<p>“But what <strong>is</strong> that file?”</p>
</blockquote>
<p>I mean we all generally know that it’s an “executable”, in that we run it and our program happens. But what does that mean? What is contained in that file that means our computer automatically just <strong>knows</strong> how to run it? And how is it possible that a program with 7 lines of code can take up over 3 megabytes of disk space?!?</p>
<p>It turns out that in order to create an executable for this ridiculously simple program, the Rust compiler must include quite a bit of additional software to make it possible.</p>

<p>Well, it turns out there is a widely accepted format for these things, called the <a href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format">“Executable and Linkable Format”</a>, or ELF!</p>
<blockquote>
<p>Note that I won’t be comprehensively covering ELF here (there are plenty of other resources, many of which I’ll link to) - rather this is an exploration of what goes into a Rust binary with the simplest, default settings, and some observations about what seems interesting to me.</p>
</blockquote>
<p>ELF is a well-known, popular format, especially in the world of Linux, but there are plenty of others. <a href="https://en.wikipedia.org/wiki/Comparison_of_executable_file_formats">Operating systems like Windows and macOS each have their own format</a>, which is a big reason why, when you’re compiling (or simply downloading) software, you have to specify the operating system you want to run it on. This is true despite the fact that the underlying machine code that executes your program may be the same on all of them (e.g. <code>x86_64</code>).</p>
<p>An <strong>exceptional</strong> visual breaking down the ELF format can be found at the link to the ELF wikipedia page above, I have found myself constantly referring back to it while writing this post:</p>
<p><a title="Ange Albertini / CC BY (https://creativecommons.org/licenses/by/1.0)" href="https://oswalt.dev/assets/2020/11/elf.png"><img width="512" alt="ELF Executable and Linkable Format diagram by Ange Albertini" src="https://oswalt.dev/assets/2020/11/elf.png"></a>
</p>
<p>Commonly, executable formats like this specify a <a href="https://en.wikipedia.org/wiki/File_format#Magic_number">magic number</a> right at the beginning of the file, so that the format can be easily identified. This occupies the first four bytes in the <a href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format#File_header">file header</a>. This is a very important field, because unless we can first identify an ELF file appropriately, we can’t reasonably expect to do anything “ELF-y” with it. We know where certain bits of information <strong>should</strong> be in an ELF file, but we first must identify using these bytes that this is what we can expect.</p>
<p>The <code>readelf</code> utility is extremely useful for printing all kinds of useful metadata and related tables of information contained within an ELF file. However, this utility expects - naturally - that the file being read is actually an ELF file, and even provides a helpful hint that the expected “magic bytes” for a non-ELF file aren’t set appropriately when used on a non-ELF file, so it doesn’t attempt to read the rest:</p>
<div><pre><code data-lang="bash">~$ readelf -l .gitignore

readelf: Error: Not an ELF file - it has the wrong magic bytes at the start
</code></pre></div><p>Once identified, the entire rest of the file can be identified using <strong>byte offsets</strong> (that is, the number of bytes from zero).</p>
<blockquote>
<p>For those that are accustomed to looking at network packet captures, this should all sound very familiar to you, as this is exactly how we know where certain fields are located in a packet header. <a href="https://en.wikipedia.org/wiki/Ethernet_frame">Ethernet frames</a> have a predictable preamble and start-of-frame delimiter. Ethernet also has a field called the “Ethertype”, which provides a clue as to what protocol is contained within the Ethernet frame (which allows computers to then parse those field as well). Just like Ethernet has a standard set of byte offsets that indicate where the various fields should be represented, the ELF format specifies its own offsets for all of the fields providing useful identifying and execution information in the <a href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format#File_header">file header</a>, which then point to other important locations within the file.</p>
</blockquote>
<p>There’s all kinds of useful information in this header, but in particular, the <code>e_entry</code> field  in the file header points to the offset location from where the execution should start. This is the “entry point” for the program. We’ll definitely be following this down the rabbit hole in a little bit.</p>
<p>We can again use <code>readelf</code>, this time on a proper ELF file (our Rust program), and also using the <code>-h</code> flag to show the file header:</p>
<div><pre><code data-lang="bash">~$ readelf -h target/debug/rbin

ELF Header:
  Magic:   7f <span>45</span> 4c <span>46</span> <span>02</span> <span>01</span> <span>01</span> <span>00</span> <span>00</span> <span>00</span> <span>00</span> <span>00</span> <span>00</span> <span>00</span> <span>00</span> <span>00</span> 
  Class:                             ELF64
  Data:                              2<span>'</span>s complement, little endian
  Version:                           <span>1</span> <span>(</span>current<span>)</span>
  OS/ABI:                            UNIX - System V
  ABI Version:                       <span>0</span>
  Type:                              DYN <span>(</span>Shared object file<span>)</span>
  Machine:                           Advanced Micro Devices X86-64
  Version:                           0x1
  Entry point address:               0x5070
  Start of program headers:          <span>64</span> <span>(</span>bytes into file<span>)</span>
  Start of section headers:          <span>3195368</span> <span>(</span>bytes into file<span>)</span>
  Flags:                             0x0
  Size of this header:               <span>64</span> <span>(</span>bytes<span>)</span>
  Size of program headers:           <span>56</span> <span>(</span>bytes<span>)</span>
  Number of program headers:         <span>12</span>
  Size of section headers:           <span>64</span> <span>(</span>bytes<span>)</span>
  Number of section headers:         <span>42</span>
  Section header string table index: <span>41</span>
</code></pre></div><p>So, the “magic number” lets us parse at least the rest of the file header, which contains not only information about the file, but byte-offset locations for other important portions of the file. One of these is the “Start of program headers”, which starts after 64 bytes.</p>

<p>The <a href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format#Program_header">program header table</a> contains information that allows the operating system to allocate memory and load the program. This is also referred to as a <a href="http://www.tldp.org/LDP/LG/issue23/flower/psimage.html">process image</a>. You can think of it as a list of “instructions” that tell the system to do various things with chunks of memory in order to prepare to execute this program.</p>
<p>The <code>readelf</code> utility also allows us to read the program headers using the <code>-l</code> flag:</p>
<div><pre><code data-lang="bash">~$ readelf -l target/debug/rbin

Elf file type is DYN <span>(</span>Shared object file<span>)</span>
Entry point 0x5070
There are <span>12</span> program headers, starting at offset <span>64</span>

Program Headers:
  Type           Offset             VirtAddr           PhysAddr
                 FileSiz            MemSiz              Flags  Align
  PHDR           0x0000000000000040 0x0000000000000040 0x0000000000000040
                 0x00000000000002a0 0x00000000000002a0  R      0x8
  INTERP         0x00000000000002e0 0x00000000000002e0 0x00000000000002e0
                 0x000000000000001c 0x000000000000001c  R      0x1
      <span>[</span>Requesting program interpreter: /lib64/ld-linux-x86-64.so.2<span>]</span>
  LOAD           0x0000000000000000 0x0000000000000000 0x0000000000000000
                 0x0000000000004ed8 0x0000000000004ed8  R      0x1000
  LOAD           0x0000000000005000 0x0000000000005000 0x0000000000005000
                 0x0000000000030571 0x0000000000030571  R E    0x1000
  LOAD           0x0000000000036000 0x0000000000036000 0x0000000000036000
                 0x000000000000be44 0x000000000000be44  R      0x1000
  LOAD           0x0000000000042520 0x0000000000043520 0x0000000000043520
                 0x0000000000002b18 0x0000000000002cf8  RW     0x1000
  DYNAMIC        0x0000000000044740 0x0000000000045740 0x0000000000045740
                 0x0000000000000230 0x0000000000000230  RW     0x8
  NOTE           0x00000000000002fc 0x00000000000002fc 0x00000000000002fc
                 0x0000000000000044 0x0000000000000044  R      0x4
  TLS            0x0000000000042520 0x0000000000043520 0x0000000000043520
                 0x0000000000000000 0x00000000000000d8  R      0x20
  GNU_EH_FRAME   0x000000000003aa8c 0x000000000003aa8c 0x000000000003aa8c
                 0x0000000000000d84 0x0000000000000d84  R      0x4
  GNU_STACK      0x0000000000000000 0x0000000000000000 0x0000000000000000
                 0x0000000000000000 0x0000000000000000  RW     0x10
  GNU_RELRO      0x0000000000042520 0x0000000000043520 0x0000000000043520
                 0x0000000000002ae0 0x0000000000002ae0  R      0x1

 Section to Segment mapping:
  Segment Sections...
   <span>00</span>     
   <span>01</span>     .interp 
   <span>02</span>     .interp .note.gnu.build-id .note.ABI-tag .gnu.hash .dynsym .dynstr .gnu.version .gnu.version_r .rela.dyn .rela.plt 
   <span>03</span>     .init .plt .plt.got .text .fini 
   <span>04</span>     .rodata .debug_gdb_scripts .eh_frame_hdr .eh_frame .gcc_except_table 
   <span>05</span>     .init_array .fini_array .data.rel.ro .dynamic .got .data .bss 
   <span>06</span>     .dynamic 
   <span>07</span>     .note.gnu.build-id .note.ABI-tag 
   <span>08</span>     .tbss 
   <span>09</span>     .eh_frame_hdr 
   <span>10</span>     
   <span>11</span>     .init_array .fini_array .data.rel.ro .dynamic .got 
</code></pre></div><p>Each <a href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format#Program_header">program header type</a> does something different to a chunk of memory (segment). Next to each header can be found two 64-bit (this is a 64 bit ELF after all) hexidecimal values. As indicated at the top of the header output, the top value is the memory offset of the segment that the header refers to (where it is located). The value below that is the size of that particular segment in the …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://oswalt.dev/2020/11/anatomy-of-a-binary-executable/">https://oswalt.dev/2020/11/anatomy-of-a-binary-executable/</a></em></p>]]>
            </description>
            <link>https://oswalt.dev/2020/11/anatomy-of-a-binary-executable/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24994522</guid>
            <pubDate>Thu, 05 Nov 2020 00:26:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[New study finds psilocybin greatly and quickly relieves depression]]>
            </title>
            <description>
<![CDATA[
Score 326 | Comments 171 (<a href="https://news.ycombinator.com/item?id=24993519">thread link</a>) | @neom
<br/>
November 4, 2020 | https://www.psychnewsdaily.com/new-study-psilocybin-magic-mushrooms-relieves-depression/ | <a href="https://web.archive.org/web/*/https://www.psychnewsdaily.com/new-study-psilocybin-magic-mushrooms-relieves-depression/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-4933" role="main"><div><div><div><p>A <a rel="noreferrer noopener" href="https://jamanetwork.com/journals/jamapsychiatry/fullarticle/10.1001/jamapsychiatry.2020.3285?guestAccessKey=29ac3052-6203-4fb4-b1e2-d9dda5988445&amp;utm_source=For_The_Media&amp;utm_medium=referral&amp;utm_campaign=ftm_links&amp;utm_content=tfl&amp;utm_term=110420" target="_blank">new study</a> of 24 adults with major depression finds that two doses of the psychedelic substance psilocybin, given with supportive psychotherapy, produced rapid and large reductions in depressive symptoms. Most of the participants showed improvement, and half achieved remission at the four-week follow-up.</p><p><a rel="noreferrer noopener" href="https://en.wikipedia.org/wiki/Psilocybin" target="_blank">Psilocybin</a> is a compound found in so-called “magic mushrooms.” It produces visual and auditory hallucinations, and profound changes in consciousness, over a period of several hours.</p><p>The findings appeared on November 4 in&nbsp;<em><a href="https://jamanetwork.com/journals/jamapsychiatry" target="_blank" rel="noreferrer noopener">JAMA Psychiatry</a></em>.</p><h2>Effect of psilocybin 4x stronger than traditional antidepressants</h2><p>“The magnitude of the effect we saw was about four times larger than what clinical trials have shown for traditional antidepressants on the market,” said co-author <a rel="noreferrer noopener" target="_blank" href="https://hopkinspsychedelic.org/davis">Alan Davis</a> of Johns Hopkins University.</p><p>As the paper explains, “the effect sizes reported in this study were approximately 2.5 times greater than the effect sizes found in psychotherapy, and more than 4 times greater than the effect sizes found in psycho-pharmacological depression treatment studies.”</p><p>“Because most other depression treatments take weeks or months to work and may have undesirable effects, this could be a game changer if these findings hold up” in future clinical trials, Davis said.</p><p>And compared to traditional antidepressants, the side effects of psilocybin are more limited. These include mild-to-moderate headaches, and “challenging emotions” during the sessions. Antidepressant medications, on the other hand, have more far-reaching side effects. These include <a href="https://www.psychnewsdaily.com/new-study-finds-ethnic-variation-in-suicide-method-guns-vs-hanging/">suicidal</a> ideation, decrease in sexual drive, and weight gain.</p><p>Furthermore, the effectiveness of psilocybin <a href="https://www.psychnewsdaily.com/effects-of-therapy-for-hypochondriacs-last-10-years-or-more/">therapy</a> appears after only one or two administrations. This represents another advantage over commonly used antidepressants, which typically require daily administration.</p><h2>Two five-hour psilocybin sessions</h2><p>For the new study, the researchers recruited 24 people with a long-term history of depression. Most of the participants had experienced symptoms for about two years before enrolling in the study.</p><p>The participants underwent two five-hour psilocybin sessions, under the supervision of the researchers.</p><p>The average age of participants was 39. Sixteen were women. Twenty-two identified as white, one identified as Asian, and one identified as African American.</p><p>Participants had to taper off any antidepressants prior to the study. They did so with the help of their personal physician, to ensure safe exposure to this experimental treatment.</p><p>Treatment consisted of two psilocybin doses given by two monitors who provided guidance and reassurance. The doses were given two weeks apart, between August 2017 and April 2019. Each treatment session lasted about five hours. The participants lay on a couch wearing eyeshades and headphones that played music, in the presence of the monitors.</p><h2>A very large reduction in depressive symptoms</h2><p>All participants completed the <a rel="noreferrer noopener" href="https://pubmed.ncbi.nlm.nih.gov/18408526/" target="_blank">GRID-Hamilton Depression Rating Scale</a> upon enrollment. They also did this same assessment at one and four weeks following completion of their treatment.</p><p>A score of 24 or more indicates severe depression. A score of 17-23 means moderate depression, 8-16 mild depression, and 7 or less no depression.</p><p>At enrollment, participants had an average depression scale rating of 23. But at one week and four weeks after treatment, they had an average depression scale score of 8.</p><p>After treatment, most participants showed a substantial decrease in their symptoms. Likewise, almost half were in remission from depression at the four-week follow-up.</p><p>For the entire group of 24 participants, 67% showed a more than 50% reduction in depression symptoms at the one-week follow-up, and 71% at the four-week follow-up. Overall, four weeks post-treatment, 54% of participants were considered in remission, meaning they no longer qualified as being depressed.</p><p>Compared to ketamine, another psychoactive substance that has <a href="https://pubmed.ncbi.nlm.nih.gov/25038867/" target="_blank" rel="noreferrer noopener">recently been found</a> to alleviate depression, psilocybin has several advantages. The antidepressant effects of psilocybin seem to last longer. Psilocybin also has a lower potential for addiction and adverse events than ketamine.</p><h2>More results to follow</h2><p>The researchers say they will follow the participants for a year after the study to see how long the antidepressant effects of the psilocybin treatment last. They will report these new findings in a later publication.</p><p>In 2016, Johns Hopkins Medicine researchers first reported that treatment with psilocybin under psychologically supported conditions significantly relieved existential anxiety and depression in people with a&nbsp;<a target="_blank" href="https://www.hopkinsmedicine.org/news/media/releases/hallucinogenic_drug_psilocybin_eases_existential_anxiety_in_people_with_life_threatening_cancer_" rel="noreferrer noopener">life-threatening cancer diagnosis</a>.</p><p>According to the National Institute of Mental Health, more than 17 million people in the U.S., and 300 million people worldwide, have experienced major <a rel="noreferrer noopener" href="https://www.psychnewsdaily.com/category/mental-health/depression/" target="_blank">depression</a>.</p><p>Entrepreneur and philanthropist <a href="https://tim.blog/" target="_blank" rel="noreferrer noopener">Tim Ferriss</a> supported the funding campaign for this study. “I believe this study to be a critically important proof of concept for the medical approval of psilocybin for treatment of depression, a condition I have personally struggled with for decades,” he said.</p><p>“How do we explain the incredible magnitude and durability of effects? Treatment research with moderate to high doses of psychedelics may uncover entirely new paradigms for understanding and improving mood and mind,” Ferriss said.</p><hr><p><strong>Study: </strong>“<a rel="noreferrer noopener" href="https://jamanetwork.com/journals/jamapsychiatry/fullarticle/10.1001/jamapsychiatry.2020.3285?guestAccessKey=29ac3052-6203-4fb4-b1e2-d9dda5988445&amp;utm_source=For_The_Media&amp;utm_medium=referral&amp;utm_campaign=ftm_links&amp;utm_content=tfl&amp;utm_term=110420" target="_blank">Effects of Psilocybin-Assisted Therapy on Major Depressive Disorder: A Randomized Clinical Trial</a>“<br><strong>Authors:</strong> Alan K. Davis, Frederick S. Barrett, Darrick G. May, Mary P. Cosimano, Nathan D. Sepeda, Matthew W. Johnson, Patrick H. Finan, and Roland R. Griffiths<br><strong>Published in:</strong> <a rel="noreferrer noopener" href="https://jamanetwork.com/journals/jamapsychiatry" target="_blank"><em>JAMA Psychiatry</em></a><br><strong>Publication date: </strong>November 4, 2020<br><strong>DOI: </strong>doi:10.1001/jamapsychiatry.2020.3285<br><strong>Photo: </strong>by&nbsp;<a href="https://unsplash.com/@vanillapines?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">James Bak</a>&nbsp;via <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a><br></p><p>For a weekly summary of the latest psychology news, subscribe to our <a href="https://www.psychnewsdaily.com/the-psych-news-weekly-newsletter/" target="_blank" rel="noreferrer noopener">Psych News Weekly newsletter</a>.</p></div></div></div></article></div>]]>
            </description>
            <link>https://www.psychnewsdaily.com/new-study-psilocybin-magic-mushrooms-relieves-depression/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24993519</guid>
            <pubDate>Wed, 04 Nov 2020 22:05:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why Dark didn't choose Rust]]>
            </title>
            <description>
<![CDATA[
Score 125 | Comments 85 (<a href="https://news.ycombinator.com/item?id=24991848">thread link</a>) | @pimterry
<br/>
November 4, 2020 | https://blog.darklang.com/why-dark-didnt-choose-rust/ | <a href="https://web.archive.org/web/*/https://blog.darklang.com/why-dark-didnt-choose-rust/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://blog.darklang.com/content/images/size/w300/2020/11/2017-11-21-18-14-57-1200x800.jpg 300w,
                            https://blog.darklang.com/content/images/size/w600/2020/11/2017-11-21-18-14-57-1200x800.jpg 600w,
                            https://blog.darklang.com/content/images/size/w1000/2020/11/2017-11-21-18-14-57-1200x800.jpg 1000w,
                            https://blog.darklang.com/content/images/size/w2000/2020/11/2017-11-21-18-14-57-1200x800.jpg 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://blog.darklang.com/content/images/size/w2000/2020/11/2017-11-21-18-14-57-1200x800.jpg" alt="Why Dark didn't choose Rust">
            </figure>

            <section>
                <div>
                    <p><em><em>Welcome </em>again <em>HN! <a href="https://darklang.com/">Dark</a> is a programming language, structured editor, and infrastructure—all in one—whose goal is to make it 100x easier to build backend services. Check out the <a href="https://darklang.com/">website</a>, our <a href="https://blog.darklang.com/what-is-dark/">What is Dark</a> post, and <a href="https://blog.darklang.com/how-dark-deploys-code-in-50ms/">How Dark deploys in 50ms</a></em> <em>for more. Thanks for checking us out!</em></em></p><p><em>This is the third or a 3-part series: <a href="https://blog.darklang.com/leaving-ocaml/">Leaving OCaml</a> and <a href="https://blog.darklang.com/new-backend-fsharp/">Dark's new backend will be in F#</a>. You can enjoy this without reading the previous posts.</em></p><p>With the election in the state it is, I'm going to stop pretending that I can do work right now. So instead, I'll just milk the success of my last <a href="https://blog.darklang.com/leaving-ocaml/">two</a> <a href="https://blog.darklang.com/new-backend-fsharp/">posts</a> and hope that none of you are really working right now either.</p><p>As discussed in the two <a href="https://blog.darklang.com/leaving-ocaml/">previous</a> <a href="https://blog.darklang.com/new-backend-fsharp/">posts</a>, Dark is moving to F#. This has been a bit of a surprise to people, including me. We've spoken for years about the inevitable Rust rewrite; we have a CLI written in Rust and two services, so I was pretty sure that it was going to be Rust.</p><p>People asked about a few other languages as well, so let's get them out of the way first.</p><h3 id="clojure">Clojure</h3><p>I have a lot of experience with Clojure, as CircleCI was almost all Clojure. However, we spent a whole lot of time with dealing accidental complexity, specifically "what type is this field" and nulls all over the place. So I deliberately chose not to have a dynamically typed language, even though Clojure is a lovely language. A side benefit is to escape the Cult of Rich in the Clojure community. Hearing his <a href="https://www.youtube.com/watch?v=YR5WdGrpoug">Maybe Not</a> talk really cemented for me how deep down the dynamically typed rabbit hole they are over there, and how much I disagree with that.</p><h3 id="haskell">Haskell</h3><p>I had previously tried to love Haskell, trying to <a href="https://github.com/pbiggar/rash">write an interpreter</a> in it while I was at the <a href="https://www.recurse.com/">Recurse Center</a>, and I did not like it. <a href="https://news.ycombinator.com/item?id=24978238">HN user momentumtop's explanation</a> match my feelings exactly:</p><blockquote>The Haskell community, in my experience, is far more academic. A<a href="https://mail.haskell.org/pipermail/libraries/2020-September/030789.html"> recent post to the Haskell libraries mailing list</a> began with:<p>"It was pointed out to me in a private communication that the tuple function \x-&gt;(x,x) is actually a special case of a diagonalization for biapplicative and some related structures monadicially.</p><p>It received 39 pretty enthusiast replies.</p></blockquote><h3 id="scala">Scala</h3><p>I have no experience with Scala, but my overwhelming sense of the language and the community is that the whole thing is a mess. So I didn't consider it, and still wouldn't.</p><p>I actually <a href="https://blog.darklang.com/first-thoughts-on-rust-vs-ocaml/">wrote quite a bit on why I didn't like Rust</a> a few weeks ago. I think those main reasons stand, so I'll just link to them rather than repeat the <a href="https://blog.darklang.com/first-thoughts-on-rust-vs-ocaml/">1800 words</a> again. As a quick summary, the good parts were:</p><ul><li>tooling is great</li><li>library ecosystem is great</li><li>community is great</li><li>macros are nice (though I feel I was overusing them to cover problems in the language)</li></ul><p>and the bad parts were</p><ul><li>having to do memory management sucks</li><li>pattern matching doesn't work all that well</li><li>too many ways to do things (Arc vs Rc, async vs sync, different stdlibs)</li><li>the language isn't immutable</li><li>having to fight the compiler</li></ul><p>Again, for more on those, have a <a href="https://blog.darklang.com/first-thoughts-on-rust-vs-ocaml/">read of the previous post</a>.</p><p>Ultimately, when it came time to decide, it came down to a few major things: missing a GCP library, and the low-level nature of the language.</p><h2 id="libraries">Libraries</h2><p>Rust has a ton of libraries, and they work really well and are nicely integrated. They have 3rdparty libraries for <a href="https://www.honeycomb.io/">Honeycomb</a>, <a href="https://launchdarkly.com/">LaunchDarkly</a>, and <a href="https://blog.darklang.com/why-dark-didnt-choose-rust/rollbar.com">Rollbar</a>, which are important services for us. However, the <a href="https://github.com/Byron/google-apis-rs">library for GCP</a> seems super sketch. It's autogenerated and the issues imply that they've gone as far as they can using this technique. So that seemed very risky to take on, given that the whole point was to have a much richer library ecosystem.</p><h2 id="async">Async</h2><p>When I wrote the <a href="https://blog.darklang.com/first-thoughts-on-rust-vs-ocaml/">previous post</a>, I had just gotten the <a href="https://github.com/darklang/fizzboom/tree/main/rust-hyper">synchronous version</a> of the benchmark to work in Rust. Then I tried to <a href="https://github.com/darklang/fizzboom/tree/main/rust-hyper-async/execution-engine">make it async</a>. I really struggled with making things async. Apparently, recursion adds <a href="https://rust-lang.github.io/async-book/07_workarounds/04_recursion.html">a new level of complexity</a> to async. But the thing that killed me was <a href="https://rust-lang.github.io/async-book/04_pinning/01_chapter.html">pinning</a>.</p><p>Let's see if I can explain this. When you're writing an async, multi-threaded server in using the tokio runtime, async processes can be moved between threads. This means the memory can be copied, and so you need to ... pin things? OK, that's as much as I remember. Look in the HN comments after I publish this and I'm sure someone will explain better. The code <a href="https://github.com/darklang/fizzboom/blob/main/rust-hyper-async/execution-engine/src/eval.rs">is over here</a> if you're interested.</p><p>I tried to get my head around this for some time, before deciding that this was a waste of time. Apparently, this boxing and pinning is what you get when you don't have a GC, and that when you do have a GC, you simply don't need to deal with it. So that was the final straw for me.</p><h2 id="rust-is-a-low-level-language">Rust is a low-level language</h2><p>I'm implementing a language that's basically F#/OCaml. So it makes sense that it's easier to implement in F#/OCaml. A few people pointed out that I'm trying to write OCaml in Rust, and that's not really what it was designed for. I think that's right. Rust's semantics makes many things easy, but not what I'm trying to do.</p><p>I think most of us don't need Rust. I think Rust is a wonderful community, ecosystem, and tooling, wrapping a language that nicely solves a problem very few of us have. It's just so nice over there, until you actually write code.</p><p>It's easy to forget, given how nice everything is with the error messages and the docs, that Rust is a very low-level language. We're so attracted to the community and the tooling that we forget that low-level languages suck. Maybe Rust has a better story than most low-level languages, but remember that garbage collectors are great. By having a GC, we don't have to do any of the stuff that causes all these problems in Rust. Maybe that costs performance, but I need the ability to quickly write code a lot more than I need the extra performance.</p><p>And ultimately, that's <a href="https://blog.darklang.com/new-backend-fsharp/">why I picked F#</a>.</p><hr><p><em><em><em><em><em><em><em><em>You can sign up for Dark </em></em></em></em></em></em></em></em><a href="https://darklang.com/signup" rel="noopener nofollow"><em><em><em><em><em><em><em><em>here</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em>. For more info on Dark, follow our </em></em></em></em></em></em></em></em><a href="https://blog.darklang.com/rss" rel="noopener nofollow"><em><em><em><em><em><em><em><em>RSS</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em>, follow </em></em></em></em></em></em></em></em><a href="https://twitter.com/darklang" rel="noopener nofollow"><em><em><em><em><em><em><em><em>us</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em> (or </em></em></em></em></em></em></em></em><a href="https://twitter.com/paulbiggar" rel="noopener nofollow"><em><em><em><em><em><em><em><em>me</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em>) on Twitter, join our </em></em></em></em></em></em></em></em><a href="https://darklang.com/slack-invite" rel="noopener nofollow"><em><em><em><em><em><em><em><em>Slack Community</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em>, watch our </em></em></em></em></em></em></em></em><a href="https://github.com/darklang/dark" rel="noopener nofollow"><em><em><em><em><em><em><em><em>GitHub repo</em></em></em></em></em></em></em></em></a><em>, or join our <a href="http://darklang.com/mailing-list">mailing list</a><em><em><em><em><em><em><em>.</em></em></em></em></em></em></em></em></p><p><em>Thanks to <a href="https://twitter.com/jf">Joël Franusic</a>, <a href="https://twitter.com/jonathansywulak">Jonny Sywulak</a> and <a href="https://twitter.com/algo_luca">Luca Palmieri</a> for feedback on drafts of this post.</em></p>
                </div>
            </section>



        </article>

    </div>
</div></div>]]>
            </description>
            <link>https://blog.darklang.com/why-dark-didnt-choose-rust/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24991848</guid>
            <pubDate>Wed, 04 Nov 2020 18:52:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Is it morally wrong to write inefficient code?]]>
            </title>
            <description>
<![CDATA[
Score 25 | Comments 44 (<a href="https://news.ycombinator.com/item?id=24991784">thread link</a>) | @headalgorithm
<br/>
November 4, 2020 | https://tomgamon.com/posts/is-it-morally-wrong-to-write-inefficient-code/ | <a href="https://web.archive.org/web/*/https://tomgamon.com/posts/is-it-morally-wrong-to-write-inefficient-code/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><p>In this post I will explore the idea that because running code contributes to global warming, writing inefficient code is morally wrong<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup>. I will start by outlining the argument, before working through each of the premises in turn to see how they hold up. I will then conclude that even if we cannot concretely defend every premise in this first iteration, then it is sufficiently plausible that it should at least make us pause for thought. With that said, let’s dive in!</p><p>The argument I am considering, in summary, can be presented as:</p><ol><li>Running code produces greenhouse gasses, proportional to the computing resources it requires.</li><li>Greenhouse gasses contribute to global warming.</li><li>Global warming increases the suffering of others.</li><li>Therefore, increasing your consumption of computing resources increases your contribution to the suffering of others.</li><li>Inefficient code increases your consumption of computing resources.</li><li>Therefore, inefficient code increases your contribution to the suffering of others.</li><li>Increasing your contribution to the suffering of others is morally wrong.</li><li>Therefore, writing inefficient code is morally wrong.</li></ol><p>I believe the argument as laid out above is valid, in that the conclusions follow from the premises, so we will focus our energies on determining if it is sound, that is all the premises are true. We will now break it down and look at each premise more carefully.</p><blockquote><ol><li>Running code produces greenhouse gasses, proportional to the computing resources it requires.</li></ol></blockquote><p>The first premise is based on the fact that running code requires electricity. Electricy, in large, requires the burning of fossil fuels, which releases a number of greenhouse gasses. There are cases where this is not the case (solar energy, wind energy), and in such cases, this argument is invalid. However, if you run your code on AWS, then it is very likely that you are running on fossil fuels<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup>. As AWS is the largest provider of cloud computing, this is likely to be true in a good number of cases.</p><blockquote><ol start="2"><li>Greenhouse gasses contribute to global warming.</li><li>Global warming increases the suffering of others.</li></ol></blockquote><p>With regards to the second and third premises, these are statements which are consistent with the overwhelming scientific consensus, and as such are uncontroversial. For the sake of completeness, here are some supporting statements from the <a href="https://www.ipcc.ch/site/assets/uploads/2018/02/AR5_SYR_FINAL_SPM.pdf">2014 climate change report summary</a> from the Intergovernmental Panel on Climate Change, emphasis mine.</p><blockquote><p><strong>Human influence on the climate system is clear, and recent anthropogenic emissions of greenhouse gases are the highest in history</strong>. Recent climate changes have had widespread impacts on human and natural systems.</p></blockquote><blockquote><p><strong>Warming of the climate system is unequivocal, and since the 1950s, many of the observed changes are unprecedented over decades to millennia</strong>. The atmosphere and ocean have warmed, the amounts of snow and ice have diminished, and sea level has risen.</p></blockquote><blockquote><p><strong>Continued emission of greenhouse gases will cause further warming and long-lasting changes in all components of the climate system, increasing the likelihood of severe, pervasive and irreversible impacts for people and ecosystems</strong>. Limiting climate change would require substantial and sustained reductions in greenhouse gas emissions which, together with adaptation, can limit climate change risks.</p></blockquote><blockquote><p>Cumulative emissions of CO2 largely determine global mean surface warming by the late 21st century and beyond.</p></blockquote><blockquote><p><strong>Climate change will amplify existing risks and create new risks for natural and human systems.</strong> Risks are unevenly distributed and are generally greater for disadvantaged people and communities in countries at all levels of development.</p></blockquote><p>I believe these to be enough to support the argument that greenhouse gasses contribute to global warming, and that global warming will increase suffering of the human and other animal populations.</p><blockquote><ol start="4"><li>Therefore, increasing your consiumption of computing resources increases your contribution to the suffering of others.</li></ol></blockquote><p>So here we come to our first conclusion, that increasing ones consumption of computing resources increases ones contribution to the suffering of others. It is based on at least two implicit premises. The first is that if A contributes to B, and B causes C, A contributes to C. The second is that in such a transitive relationship, if you increase your contribution to A then you increase your contribution to C. To illustrate, we can imagine a much more straightforward case. Imagine that I have a dial which, when turned, increases the voltage supplied to an electric chair. There are several such dials, and their contributions are additive. It would be fair to say that if I turned up my dial, I am contributing to the suffering of whoever is in that electric chair.</p><p>Given this assertion, it would seem reasonable that if running code produces greenhouse gasses, and greenhouse gasses contribute to global warming, then running code contributes to global warming. Global warming increases the suffering of others, so it follows that running code increases ones contribution to the suffering of others.</p><blockquote><ol start="5"><li>Inefficient code increases your consumption of computing resources.</li></ol></blockquote><p>Premise five seems relatively uncontroversial, though to simplify let us just consider the length of time some piece of code takes to run (in a similar way we assess algorithmic complexity). If an efficient version runs in 1 minute, and an inefficient version runs in 1 hour, it stands to reason that the inefficient version would consume more electricity.</p><blockquote><ol start="6"><li>Therefore, inefficient code increases your contribution to the suffering of others</li></ol></blockquote><p>With point six we again come to a relatively straightforward conclusion. If you agree with the earlier conclusion at point four and the premise at point five, then this falls out as a result of the logic of the statements.</p><blockquote><ol start="7"><li>Increasing your contribution to the suffering of others is morally wrong.</li></ol></blockquote><p>Point seven is the real crux of the argument, and on the surface intuitively plausible. In the above example with the dial, it would generally be considered morally wrong for you to dial up the dial and increase the suffering of the individual in the chair. However, if we are merely counting <em>contributions</em> to suffering, this casts a wide net. Would it be morally wrong not to buy an energy efficient bulb when an energy efficient one is available at the same price? How about breathing? This expels carbon dioxide, a greenhouse gas, but would generally not be considered a morally reprehensible action.</p><p>It seems that there is some inherent provision that increasing your contribution to the suffering of others is not morally wrong if it causes equal or greater personal suffering. For example, if there was some shared well of water, it would be reasonable to claim that it is not morally wrong of you to take a sip of water in order to save yourself from dehydration, even if that means other may become more dehydrated. However, if you drained the well, and threw that water away, causing another to die to dehydration, that seems morally wrong.</p><p>I think for the purposes of this post, we can consider this sufficiently true (there is definitely some sense in which it is true), even if is vulnerable to <a href="https://en.wikipedia.org/wiki/Reductio_ad_absurdum">reductio ad absurdum</a> in it’s current form. Consider it the alpha version of the premise - solid enough to be useful, but not without it’s bugs.</p><blockquote><ol start="8"><li>Therefore, writing inefficient code is morally wrong.</li></ol></blockquote><p>Here we come to the conclusion of the argument, that writing inefficient code is morally wrong, which follows from the logic set out in the conclusion at point six and the premise at point seven. So what does this mean?</p><p>As discussed, I am aware that this argument is probably not watertight, and perhaps with some more time spent on it we could tighten it up<sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup>. I think the premise at point seven could definitely be better defended, and there almost certainly some implicit premises and caveats that need to be put in place. However, I think it is reasonable enough that it should make us pause and reflect. Whilst a lot of code performance issues can be covered up with bigger and better hardware, these come at a greater cost than just an increased AWS bill. The decisions we make as developers have real world effects.</p><p>If there are ways that we can reduce ‘programming waste’ we should strive to do so, whether that is changing an algorithm to be <code>O(1)</code>, scaling down some cloud instances or killing of that Heroku dyno that’s not really doing anything useful<sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup>. Collectively we can make a real difference.</p><section role="doc-endnotes"><hr><ol><li id="fn:1" role="doc-endnote"><p>I have had this idea knocking around for a while, but reading <a href="https://visitmy.website/2020/07/13/this-website-is-killing-the-planet/">this post</a> motivated me to explore it further. Definitely check out the blog if you haven’t read it. <a href="#fnref:1" role="doc-backlink">↩︎</a></p></li><li id="fn:2" role="doc-endnote"><p><a href="https://www.youtube.com/watch?v=N4hiqGwTRBU">https://www.youtube.com/watch?v=N4hiqGwTRBU</a> <a href="#fnref:2" role="doc-backlink">↩︎</a></p></li><li id="fn:3" role="doc-endnote"><p>Perfect is the enemy of good. <a href="#fnref:3" role="doc-backlink">↩︎</a></p></li><li id="fn:4" role="doc-endnote"><p>After posting this, I am going to finally kill a bot that has been producing random inspirational quotes and posting them to Twitter for the last 6 years. <a href="#fnref:4" role="doc-backlink">↩︎</a></p></li></ol></section></section></div>]]>
            </description>
            <link>https://tomgamon.com/posts/is-it-morally-wrong-to-write-inefficient-code/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24991784</guid>
            <pubDate>Wed, 04 Nov 2020 18:45:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Economics of Sex Robots]]>
            </title>
            <description>
<![CDATA[
Score 120 | Comments 79 (<a href="https://news.ycombinator.com/item?id=24991249">thread link</a>) | @elsewhen
<br/>
November 4, 2020 | https://dianaverse.com/2020/10/30/uncanny-vulvas/ | <a href="https://web.archive.org/web/*/https://dianaverse.com/2020/10/30/uncanny-vulvas/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-441">
	<!-- .entry-header -->

	
	
	<div>
		
<p>This is a lightly edited version of an article I wrote that first appeared in <a rel="noreferrer noopener" href="https://jacobitemag.com/2018/04/24/uncanny-vulvas/" target="_blank">Jacobite</a>. I had a great conversation about this article and evolutionary psychology more generally (<a rel="noreferrer noopener" href="https://philosophicaldisquisitions.blogspot.com/2018/08/episode-44-fleischman-on-evolutionary.html" target="_blank">link here</a>) with  J<a rel="noreferrer noopener" href="https://twitter.com/JohnDanaher?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" target="_blank">ohn Danaher</a>, who <a rel="noreferrer noopener" href="https://www.amazon.com/Robot-Sex-Social-Ethical-Implications-ebook/dp/B08BT1G87G/ref=cm_cr_arp_d_product_top?ie=UTF8" target="_blank">edited a book about sex robots</a>. Most recently, <a href="https://dianaverse.com/2020/10/30/zombiesexbots/" target="_blank" rel="noreferrer noopener">I gave a presentation as a damaged android for the Zombie Apocalypse Medicine meeting about the dangers of counterfeit fitness. </a></p>



<hr>



<p><strong>Uncanny Vulvas- Diana Fleischman</strong></p>



<p>Sex is consistently underrated as a driver of innovation. Yes, space exploration helped us develop the technology for things like cochlear implants, powdered (machine) lubricants and scratch resistant lenses. Lust has furthered the development of cash transfers, point-of-view filming and video chat. I predict that historians of the development of artificial intelligence are going to see sexual gratification as one of the phenomenon’s great motivators. Evolutionary psychology can give us insight into how sex robots are going to develop and the ramifications they’ll have on society.</p>



<p>Sexbots are usually woman-shaped&nbsp;<em>gynoid</em>&nbsp;machines. At the&nbsp;present time,&nbsp;sex robots are simple: they’re silicone sex dolls that have some capacity for movement and response. Manufacturers are rolling out new models and new promises: sex robots that respond to touch and penetration, sex robots with interchangeable faces and bodies and sex robots with&nbsp;<a rel="noreferrer noopener" href="https://www.nytimes.com/2017/07/17/opinion/sex-robots-consent.html" target="_blank">different personalities</a>. Future robots will have the allure and cues of fertility of a flesh-and-blood woman combined with the artificial intelligence that creates compulsive reward directed behavior. An intelligence, unlike the intelligence of humans, that will have the gratification of its owner as the only goal. </p>



<p>Sex robots are overwhelmingly gynoid because heterosexual men drive the market for sexual products like prostitution and pornography. Across cultures, men desire more sexual partners, need to know someone for less time before they want to have sex with them, and have lower standards for a sexual liaison than women. Looking at gay men is instructive here. Their sexual interactions are not limited by women’s sexual choosiness and they, on average, have many more sexual partners than straight men or lesbians.</p>



<figure><img data-attachment-id="448" data-permalink="https://dianaverse.com/time-partner-known-consenting-to-sex/" data-orig-file="https://dianafleischman.files.wordpress.com/2020/10/time-partner-known-consenting-to-sex.png" data-orig-size="568,512" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="time-partner-known-consenting-to-sex" data-image-description="" data-medium-file="https://dianafleischman.files.wordpress.com/2020/10/time-partner-known-consenting-to-sex.png?w=300" data-large-file="https://dianafleischman.files.wordpress.com/2020/10/time-partner-known-consenting-to-sex.png?w=568" src="https://dianafleischman.files.wordpress.com/2020/10/time-partner-known-consenting-to-sex.png?w=568" alt="" srcset="https://dianafleischman.files.wordpress.com/2020/10/time-partner-known-consenting-to-sex.png 568w, https://dianafleischman.files.wordpress.com/2020/10/time-partner-known-consenting-to-sex.png?w=150 150w, https://dianafleischman.files.wordpress.com/2020/10/time-partner-known-consenting-to-sex.png?w=300 300w" sizes="(max-width: 568px) 85vw, 568px"><figcaption>A woman would have to know someone for 3 months to be as likely to have sex with someone as a man would be after one day- via<a href="https://en.wikipedia.org/wiki/David_Buss" target="_blank" rel="noreferrer noopener"> David Buss</a></figcaption></figure>



<p>It isn’t hard to see the reason for this. Men don’t get pregnant and don’t lactate, and they have smaller, easier-to-produce sex cells than women.&nbsp;For a man, the cost of producing offspring is cheap. Getting one’s genes into the next generation is the engine of evolution. The low opportunity costs make men motivated to take every opportunity, even if it comes in the form of a robot. Ever think a dog is dumb for growling at his reflection in the mirror? Human men can become aroused looking at flat images of nude women in black and white,&nbsp;<a href="https://en.wikipedia.org/wiki/Evolutionary_mismatch" target="_blank" rel="noreferrer noopener">our evolved psychology can respond in maladaptive ways towards novel stimuli.</a></p>



<p>Courtship is expensive and complicated by design,&nbsp;and it’s the limiting factor&nbsp;of the sexual fulfillment of men.&nbsp;Women impose costs on men to gain sexual access for very good reasons: to test their genetic fitness and their long-term potential supporting a&nbsp;family. If courtship is costly and the costs are not clearly defined, this not only tests a man’s motivation toward a specific woman, it also acts to monopolize a man’s resources so he can’t afford to woo anyone else. Pornography and prostitution are popular because they arrive at sexual end goals, or a reasonable facsimile, with more clarity and lower costs than in the mating market.</p>



<p>The complications of courtship are driving improvements in sexual substitutes, like masturbation aids (e.g. fleshlight, fliphole) and 3-D&nbsp;porn. There are already thousands of <a href="https://en.wikipedia.org/wiki/RealDoll" target="_blank" rel="noreferrer noopener">RealDolls </a>in the world, silicone sex dolls that cost around $6,000 each.&nbsp;<a href="https://en.wikipedia.org/wiki/LovePlus" target="_blank" rel="noreferrer noopener"><em>LovePlus</em>&nbsp;</a>is a Japanese game in which players interact with a virtual girlfriend including kissing her by touching the screen and taking her out on dates, has&nbsp;<a href="https://www.dailydot.com/irl/video-game-girlfriend-loveplus-japan/" target="_blank" rel="noreferrer noopener">hundreds of thousands of users</a>.&nbsp;<em>LovePlus</em>&nbsp;is a great demonstration of how this market&nbsp;<a href="https://www.kotaku.com.au/2014/05/love-plus-makes-you-care-about-a-virtual-girl/" target="_blank" rel="noreferrer noopener">isn’t only about providing sex</a>, but also virtual companionship. You can’t even have virtual sex with Rinko, the ingénue of the game. These substitutes aren’t very good, and yet they are already competing with flesh-and-blood companionship.</p>



<figure><img data-attachment-id="444" data-permalink="https://dianaverse.com/sex-doll-mouth/" data-orig-file="https://dianafleischman.files.wordpress.com/2020/10/sex-doll-mouth.jpg" data-orig-size="621,472" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="sex-doll-mouth" data-image-description="" data-medium-file="https://dianafleischman.files.wordpress.com/2020/10/sex-doll-mouth.jpg?w=300" data-large-file="https://dianafleischman.files.wordpress.com/2020/10/sex-doll-mouth.jpg?w=621" src="https://dianafleischman.files.wordpress.com/2020/10/sex-doll-mouth.jpg?w=621" alt="" srcset="https://dianafleischman.files.wordpress.com/2020/10/sex-doll-mouth.jpg 621w, https://dianafleischman.files.wordpress.com/2020/10/sex-doll-mouth.jpg?w=150 150w, https://dianafleischman.files.wordpress.com/2020/10/sex-doll-mouth.jpg?w=300 300w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 67vw, (max-width: 984px) 61vw, (max-width: 1362px) 45vw, 600px"><figcaption>A silicone facsimile of a woman’s face- <a href="https://www.shutterstock.com/image-photo/shenzhen-china-1108-female-silicone-doll-1343425748" target="_blank" rel="noreferrer noopener">via Alex Raysikh from shutterstock</a></figcaption></figure>







<p>Union&nbsp;power, increases in mandatory working standards, and minimum wage&nbsp;laws&nbsp;accelerate the push toward&nbsp;automation.&nbsp;Machines&nbsp;are already replacing cashiers&nbsp;and&nbsp;factory workers. Soon the jobs of truck drivers, clerks, and accountants&nbsp;will be automated. The current political climate around courtship and interactions between the sexes is more powerful than&nbsp;the&nbsp;market forces that are&nbsp;replacing jobs,&nbsp;because escalating costs aren’t transparent and neither is the punishment for not paying them. If a business owner wants to adhere to employment laws, he reads them. The costs of courtship are codified nowhere.</p>



<p>The average single man paying attention to&nbsp;contemporary&nbsp;social fashions&nbsp;will struggle to understand the new rules of meeting, courting, or having sex with women. Something as banal as trying to converse with a woman wearing headphones&nbsp;<a href="https://uk.askmen.com/news/dating/talking-to-women-who-are-wearing-headphones.html" target="_blank" rel="noreferrer noopener">is now often considered harassment</a>. A man’s chances of mating success increase when he approaches many women, but so too do his chances of a gaining reputation as sexist, exploitative, or immoral. To take a fraught example, how does a man know that a woman is genuinely consenting to sex?&nbsp;A lack of ability to pick up on cues can incur catastrophic costs.</p>



<p>Men high in conscientiousness, who are sensitive to social disapproval but who nonetheless have difficulty reading subtle social cues, could make good husbands for women.&nbsp;These men are unlikely to want to take the risk of approaching women. As substitutes like sex robots and virtual companions become better and cheaper,&nbsp;they will monopolize the attention of such men.</p>



<p>Think of an introverted engineer with Asperger’s syndrome who wasn’t sure how to broach a conversation with a woman back in 2015 and definitely isn’t sure how to&nbsp;do that in today’s climate. In 10 years he could have a beautiful robot companion (indeed, he could have one that could emulate the experience of having sex with dozens of&nbsp;different&nbsp;women) that has a lower barrier to entry than the mating market and that keeps him satisfied enough to&nbsp;remain a&nbsp;happy&nbsp;bachelor. Some woman misses out on a conscientious guy with a good income who might not know exactly how to respond when she says “nothing’s wrong,” but will definitely keep the cars tuned up to get the kids to their mathematics championships. The world might miss out on his sons and daughters and their analytical approaches to some of the world’s problems.</p>



<p>The kinds of men described above, who have difficulty reading social signals but who are nonetheless strongly sexually motivated, have a characteristic that means&nbsp;they’ll be less put off by sex robots than the average person: resistance to perceiving the uncanny valley. “<a href="https://en.wikipedia.org/wiki/Uncanny_valley" target="_blank" rel="noreferrer noopener">The uncanny valley</a>” is the way that representations that fall just short of looking like humans&nbsp;<a href="https://www.strangerdimensions.com/2013/11/25/10-creepy-examples-uncanny-valley/" target="_blank" rel="noreferrer noopener">often look “creepy.”</a>&nbsp;Anthropomorphized robots are more relatable and trustworthy than machine-like robots. It’s also difficult to imagine that many people would want to have sex with a conglomeration of gears and wheels.</p>



<p>My view is that&nbsp;the uncanny valley&nbsp;is something analogous to&nbsp;<a href="https://en.wikipedia.org/wiki/Capgras_delusion" target="_blank" rel="noreferrer noopener">Capgras delusion</a>,&nbsp;a psychological disorder that causes sufferers to believe that someone&nbsp;they&nbsp;know has been taken over by an imposter,&nbsp;often inhuman. According to&nbsp;<a href="https://www.ted.com/talks/vilayanur_ramachandran_on_your_mind" target="_blank" rel="noreferrer noopener">VS Ramachandran</a>, there are two aspects to recognizing faces: the identification of the external familiar representation and the “internal” validation – the warm emotion that goes along with it. In the uncanny valley, you recognize a robot as humanlike, but it’s missing the facial movement or some other characteristic that gives you a warm feeling of recognition. Many men won’t experience the uncanny valley, especially with regards to sex robots. These men are going to be the early adopters. Men are worse at identifying faces than women and are far more likely to have&nbsp;<a href="https://en.wikipedia.org/wiki/Prosopagnosia" target="_blank" rel="noreferrer noopener">prosopagnosia</a>, the inability to recognize faces.</p>



<p>Sex is weird.&nbsp;Sex is&nbsp;gross&nbsp;and awkward.&nbsp;Natural selection addressed this issue by causing arousal to attenuate the&nbsp;human&nbsp;disgust response. It’s worth noting that men have&nbsp;a&nbsp;much lower&nbsp;baseline&nbsp;sexual disgust than women,&nbsp;and that sexual excitement&nbsp;further reduces&nbsp;disgust sensitivity in men.&nbsp;In a&nbsp;<a href="http://people.duke.edu/~dandan/webfiles/PapersPI/Sexual%20Arousal%20and%20Decision%20making.pdf" target="_blank" rel="noreferrer noopener">classic paper</a>&nbsp;by Dan Ariely,&nbsp;aroused men&nbsp;had much more positive attitudes about all kinds of unusual sexual acts.&nbsp;Sexually aroused men were&nbsp;more likely to say&nbsp;that it would be fun to watch a woman urinating or that they could imagine getting sexually excited by contact with an animal). 3-D pornography of video game or cartoon characters that might be creepy in a nonsexual context are&nbsp;<a href="https://www.rollingstone.com/glixel/news/daily-glixel-people-were-thirsty-for-overwatch-zelda-porn-in-2017-w515316/the-top-video-game-porn-searches-of-2017-w515317" target="_blank" rel="noreferrer noopener">popular genres</a>. The most direct evidence that men won’t be put off by uncanny vulvas is from a&nbsp;<a href="http://faculty.utrgv.edu/zhixiang.chen/cs6174/papers/Strait_paper2.pdf" target="_blank" rel="noreferrer noopener">paper</a>&nbsp;that laments the “unabashed sexualization of female-gendered robots” in comments on YouTube&nbsp;videos of&nbsp;robots.&nbsp;Bawdy comments&nbsp;on gynoids&nbsp;– “you’ll have to replace it monthly due to semen corrosion,”&nbsp;for example&nbsp;– were more frequent than comments expressing unease.</p>



<p>Perhaps&nbsp;we should encourage&nbsp;some men&nbsp;to use sex robots. Men who get&nbsp;environmental&nbsp;cues that they’re evolutionary dead-ends disproportionately menace society. In the 1980s, evolutionary psychologist couple Wilson and Daly found that perpetrators of violence and homicide had something in common: they were young, single and didn’t have access to the kinds of resources&nbsp;<a href="https://www.economist.com/news/special-report/21688587-young-single-idle-males-are-dangerous-work-and-wedlock-can-tame-them-men-and-mayhem" target="_blank" rel="noreferrer noopener">with which to win mates</a>. Polygynous societies in which wealthier men have access to multiple women are more violent and less stable because they have a class of young men without the prospect of getting a mate. Monogamy, rather than being the state of nature, may have been an …</p></div></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://dianaverse.com/2020/10/30/uncanny-vulvas/">https://dianaverse.com/2020/10/30/uncanny-vulvas/</a></em></p>]]>
            </description>
            <link>https://dianaverse.com/2020/10/30/uncanny-vulvas/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24991249</guid>
            <pubDate>Wed, 04 Nov 2020 17:45:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Down to the Suburbs]]>
            </title>
            <description>
<![CDATA[
Score 42 | Comments 70 (<a href="https://news.ycombinator.com/item?id=24991178">thread link</a>) | @eldavido
<br/>
November 4, 2020 | https://blog.shortbar.com/working-from-home-in-homewood-77368bd848ea | <a href="https://web.archive.org/web/*/https://blog.shortbar.com/working-from-home-in-homewood-77368bd848ea">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><div><div><div><div><div><div><p><a href="https://medium.com/@davidralbrecht?source=post_page-----77368bd848ea--------------------------------" rel="noopener"><img alt="David Albrecht" src="https://miro.medium.com/fit/c/96/96/0*sJ-ajeRfD0gwSk72." width="48" height="48"></a></p></div></div></div></div><p id="af2b">Before I got married, I ran a Chinese class. Our rotating cast of six drilled tones and measure words every Wednesday for about two years, in the 2nd Street WeWork, just south of Market Street in San Francisco.</p><p id="200a">Our teacher was a guy from Beijing named <a href="https://www.yelp.com/biz/dennis-language-services-san-francisco" rel="noopener">Dennis Zhu</a>. I got to know Dennis pretty well, and in many ways, he’s a stereotypical Boomer — mid-60s, kids in their 30s, west San Francisco house bought 20 years ago for peanuts — except he’d grown up in China. No doubt, the ’60s in the US were bad — assassinations, riots, Vietnam—but it’s a daytime sitcom compared to Dennis, who was forcibly moved to a farm, along with 10 million other “urban intellectual youth”, to play the harmonica and chop wood. They called it the <a href="https://en.wikipedia.org/wiki/Down_to_the_Countryside_Movement" rel="noopener">Down to the Countryside Movement</a>, only one part of the larger Cultural Revolution, that among other things included book burnings, mass executions, and the complete annihilation of land titles in large parts in China.</p><p id="399c">Big resettlements like this mark a generation. Fifty years on, Dennis can still tell you where he went, how he felt, and how pointless and futile the whole thing felt.</p><p id="2b6f">And here we are, somewhere in the middle (?) of the American COVID outbreak. My wife and I took a month or two off after Amelia, our first daughter, was born in early April, but the search for childcare has been difficult — reduced capacity at day cares, and a tight market for nanny share. With Caroline working remotely and me getting Dials up and running, we packed our bags and headed to my parents place in Homewood, the town of my childhood. Three generations sit down to dinner each night, and my parents couldn’t be happier.</p></div></div></section><section><div><div><p id="f055">Thus, our migration —the Down to the Suburbs Movement — or whatever we end up calling it. A forced migration, of maybe 100,000 (?) people, brought upon us not by politics, but by disease. The urban intellectual gentry, with our degrees, and money, and jobs in law / tech / finance.</p><p id="a9d9"><a href="https://www.strongtowns.org/journal/2020/10/26/developing-the-underdeveloped" rel="noopener">“Intellectual strip-mining”</a>. That’s what some call the hiring practices of the Goldman Sachs, the Googles, the DLA Pipers: showing up at the best universities across the country, grabbing the best-educated, most driven talent, and shuttling them off to well-paid jobs in glass high-rises in Denver, San Francisco, Seattle, or New York.</p><p id="48a4">And these people — I’m one of them — with my car-light lifestyle, interesting job employing novel computer vision algorithms, and successful marriage — wonder what the rest of the country “doesn’t get it”. Why someone making $12/hour at Target doesn’t want to pay yet another gas tax to get to work, living in a place without sidewalks, where the only real option is to drive.</p><p id="d2fb">The Down to the Suburbs Movement is our opportunity. A time when we can talk to our parents’ neighbors — regardless of their degrees, or what color sign they have in their yard — about how things are going.</p><p id="ede2">To many Americans, facebook is a blue square on their phone — something mystical that dropped from the sky, like calculus or the Bible — not a bunch of buildings at the end of the Dumbarton, where real people work. Ditto for Uber, Netflix, Amazon, Apple — major products, minting millionaires, profits and cashflow driving the entire S&amp;P 500. All clustered into a tiny little strip of land where shacks sell for millions and the pressure to perform is so intense, kids <a href="https://www.theatlantic.com/magazine/archive/2015/12/the-silicon-valley-suicides/413140/" rel="noopener">kill themselves</a> rather than be seen as “failures”.</p><p id="69e6">If you’re in the suburbs, here are some things you might consider.</p><p id="f0cd">Get a meeting with your city’s mayor, economic development director, or anyone else you can, in the city government. Help them understand <a href="https://twitter.com/naval/status/1002103832879419392" rel="noopener">Naval’s tweet</a>: “The Internet has massively broadened the possible space of careers. Most people haven’t figured this out yet.” Tell them about Internet marketing. Show them how code, or niche e-commerce products, or new subscription media, are enabling entirely new types of economic and creative output.</p><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/2212/1*dzc0q0xRA_mnKjXYMlRHaA.png" width="1106" height="578" srcset="https://miro.medium.com/max/552/1*dzc0q0xRA_mnKjXYMlRHaA.png 276w, https://miro.medium.com/max/1104/1*dzc0q0xRA_mnKjXYMlRHaA.png 552w, https://miro.medium.com/max/1280/1*dzc0q0xRA_mnKjXYMlRHaA.png 640w, https://miro.medium.com/max/1400/1*dzc0q0xRA_mnKjXYMlRHaA.png 700w" sizes="700px" data-old-src="https://miro.medium.com/max/60/1*dzc0q0xRA_mnKjXYMlRHaA.png?q=20"></p></div></div></div><figcaption>Me talking about <a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;ved=2ahUKEwjDqbXTuufsAhVYV80KHdHWBBMQFjAAegQIBhAC&amp;url=https%3A%2F%2Fwww.hfhighschool.org%2Ffile.aspx%3FDocumentId%3D3483&amp;usg=AOvVaw2Ng3-WPf3sh5W3pmOckN8M" rel="noopener">self-driving trucking</a> at my high school</figcaption></figure><p id="f4d9">Use your resources — know-how, connections, capital — to solve problems, get things done, and contribute. As part of our “balanced investing diet”, my wife, brother-in-law, and I started a small investment partnership last year. As I write this, I’m sitting in a building we own, next door to a pastry shop I helped get going. In the back of the building, over 100 kids show up for daycare in a 7600-square foot facility. We got tired of hearing about kids tripping on the broken asphalt, so we made drawings (my wife is an architect), borrowed money from a few friends, and managed the thing through to completion. We did it because Silicon Valley instilled in us a bias for action, and gave us the skills, and connections, to get it done.</p><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/2916/1*q6tkuFtv1KhUvpgog5MsSw.png" width="1458" height="542" srcset="https://miro.medium.com/max/552/1*q6tkuFtv1KhUvpgog5MsSw.png 276w, https://miro.medium.com/max/1104/1*q6tkuFtv1KhUvpgog5MsSw.png 552w, https://miro.medium.com/max/1280/1*q6tkuFtv1KhUvpgog5MsSw.png 640w, https://miro.medium.com/max/1400/1*q6tkuFtv1KhUvpgog5MsSw.png 700w" sizes="700px" data-old-src="https://miro.medium.com/max/60/1*q6tkuFtv1KhUvpgog5MsSw.png?q=20"></p></div></div></div><figcaption>Architecture.</figcaption></figure><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/8064/1*ZV8_c7Sjn7ebrqJcfMrEdg.jpeg" width="4032" height="3024" srcset="https://miro.medium.com/max/552/1*ZV8_c7Sjn7ebrqJcfMrEdg.jpeg 276w, https://miro.medium.com/max/1104/1*ZV8_c7Sjn7ebrqJcfMrEdg.jpeg 552w, https://miro.medium.com/max/1280/1*ZV8_c7Sjn7ebrqJcfMrEdg.jpeg 640w, https://miro.medium.com/max/1400/1*ZV8_c7Sjn7ebrqJcfMrEdg.jpeg 700w" sizes="700px" data-old-src="https://miro.medium.com/max/60/1*ZV8_c7Sjn7ebrqJcfMrEdg.jpeg?q=20"></p></div></div></div><figcaption>Now the kids can play outside without breaking their wrists (actually happened). Bottom-left/bottom-right shows prior condition of asphalt — the whole area used to look like that.</figcaption></figure><p id="646e">Don’t be obnoxious. Listen as much as you talk. Don’t be a blowhard. Just talk, share what you’re doing, how it’s going, and try to show people that cynicism, bickering, and bureaucracy are no match for education, well-applied effort, and progress.</p><p id="340f">From <a href="http://www.paulgraham.com/hubs.html?viewfullsite=1" rel="noopener">Paul Graham</a>:</p><blockquote><p id="8f9f">I flew into the Bay Area a few days ago. I notice this every time I fly over the Valley: somehow you can sense something is going on. Obviously you can sense prosperity in how well kept a place looks. But there are different kinds of prosperity. Silicon Valley doesn’t look like Boston, or New York, or LA, or DC. I tried asking myself what word I’d use to describe the feeling the Valley radiated, and the word that came to mind was optimism.</p></blockquote><p id="c910">Few cities anywhere have the talent or tax base of a place like San Francisco. But every city has its strengths. I still think Chicago is the ideal site for a packaged food business accelerator. The south suburbs, where I am now, delivers an incredibly good quality of life even on $20–30k/year; that’s a major achievement in its own right, something the San Francisco Board of Supervisors could never accomplish, and the recipe for a manufacturing renaissance. The solution is playing to your strengths, not trying to out-chip or out-software Silicon Valley.</p><p id="97fc">My hope — prayer, even — is that we can use this time to spread a sense of optimism, progress, and belief that things can be better. This time won’t last forever. Try to use it well.</p></div></div></section></div>]]>
            </description>
            <link>https://blog.shortbar.com/working-from-home-in-homewood-77368bd848ea</link>
            <guid isPermaLink="false">hacker-news-small-sites-24991178</guid>
            <pubDate>Wed, 04 Nov 2020 17:38:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Mutated Coronavirus from Minks is a threat to Humans]]>
            </title>
            <description>
<![CDATA[
Score 73 | Comments 47 (<a href="https://news.ycombinator.com/item?id=24990845">thread link</a>) | @xbmcuser
<br/>
November 4, 2020 | https://www.bt.dk/politik/alle-mink-skal-slaas-ihjel-muteret-coronavirus-fra-mink-er-en-trussel-for | <a href="https://web.archive.org/web/*/https://www.bt.dk/politik/alle-mink-skal-slaas-ihjel-muteret-coronavirus-fra-mink-er-en-trussel-for">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    

    

<p>Situationen omkring coronasmitte blandt mink har nu udviklet sig til et kritisk stadie i Nordjylland.</p>
<p>Helt inde i regeringskontorerne kategoriseres situationen som meget alvorlig, og der tales om en coronavirus 2.0.</p>


<p>Derfor har regeringen besluttet, at alle minkbesætninger nu skal slås ihjel, fordi coronavirus er muteret blandt mink og har spredt sig til mennesker.</p>
<p>Det fortæller statsminister Mette Frederiksen på et pressemøde onsdag.</p>
<div><p>»I mister livsværk, som i nogle tilfælde er gået i arv igennem flere generationer. Det er en sorgens dag for jer og for alle, der arbejder i mink-erhvervet. Det er regeringen bevidst om,« siger Mette Frederiksen til minkavlerne.</p><p>En muteret coronavirus er vandret fra mink til mennesker og har siden spredt sig kraftigt blandt borgerne i Nordjylland.</p></div>
<p>Tirsdag modtog regeringen et notat fra Statens Serum Institut (SSI), som har udsat den muterede coronavirus for antistoffer.</p>


<p>Resultatet var ifølge SSI dybt bekymrende, fordi den muterede coronavirus ikke reagerede godt på antistofferne.</p>
<figure itemprop="image" itemscope="" itemtype="https://schema.org/ImageObject">
        <a href="https://bt.bmcdn.dk/media/cache/resolve/image_1240/image/156/1564385/23568501-mink2.jpg" title="When the Danish Veterinary and Food Administration killed mink in Brovst, they had no containers for the dead mink. Therefore, they were just thrown to the ground. Foto: Private photo">
                        <img src="https://bt.bmcdn.dk/media/cache/resolve/image_1240/image/156/1564385/23568501-mink2.jpg" width="" height="" alt="When the Danish Veterinary and Food Administration killed mink in Brovst, they had no containers for the dead mink. Therefore, they were just thrown to the ground." data-original="https://bt.bmcdn.dk/media/cache/resolve/image_1240/image/156/1564385/23568501-mink2.jpg" data-old-src="data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACH5BAEAAAAALAAAAAAQAAkAAAIKhI+py+0Po5yUFQA7">
        
    
        </a>
                    <figcaption>
                <span>
                                            When the Danish Veterinary and Food Administration killed mink in Brovst, they had no containers for the dead mink. Therefore, they were just thrown to the ground.
                                                                <span>Foto: Private photo</span>
                                    </span>
            </figcaption>
            <a href="">Vis mere</a>
            
            </figure>

<p>Dermed er der risiko for, at en eventuel vaccine mod covid-19 ikke vil have den ønskede effekt, hvis den muterede virus fra mink spreder sig yderligere blandt mennesker.</p>
<p>Samtidig er bekymringen, at den nye coronavirus fra mink betyder, at alle mennesker, som har været smittet med corona, igen kan blive ramt af den muterede coronavirus.</p>
<p>Der er desuden nye restriktioner på vej for borgere i en række kommuner i det nordjyske for at stoppe spredningen af coronavirussen fra mink.</p>


<p>Det drejer sig indtil videre om kommunerne Hjørring, Frederikshavn, Brønderslev, Jammerbugt, Thisted og Læsø, oplyser Mette Frederiksen.</p>
<p>»Vi ved godt, at vi efterlader jer i Nordjylland i uvished til i morgen. Det beklager jeg. Men vi skal handle nu. Det drejer sig om liv og død ikke kun i Danmark, men i hele verden,« siger Mette Frederiksen.</p>
<p>De nye restriktioner bliver meldt ud torsdag.</p>
<p>Siden regeringen modtog det bekymrende notat fra SSI tirsdag, har man i regeringskontorerne arbejdet på højtryk for at finde ud af, hvilke restriktioner der skal til.</p>


<p>Coronavirussen har spredt sig voldsomt på de danske minkfarme siden sommer. I skrivende stund har mere end 207 minkbesætninger fået konstateret corona, og derfor skal alle disse mink aflives.</p>
<p>Men nu lyder befalingen fra Mette Frederiksen, at samtlige mink på de godt 1.100 minkfarme i Danmark skal aflives.</p>

</div></div>]]>
            </description>
            <link>https://www.bt.dk/politik/alle-mink-skal-slaas-ihjel-muteret-coronavirus-fra-mink-er-en-trussel-for</link>
            <guid isPermaLink="false">hacker-news-small-sites-24990845</guid>
            <pubDate>Wed, 04 Nov 2020 17:06:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Denmark to cull millions of minks over mutated coronavirus]]>
            </title>
            <description>
<![CDATA[
Score 315 | Comments 230 (<a href="https://news.ycombinator.com/item?id=24990724">thread link</a>) | @ndanmand
<br/>
November 4, 2020 | https://www.thelocal.dk/20201104/denmark-to-cull-millions-of-minks-over-mutated-coronavirus | <a href="https://web.archive.org/web/*/https://www.thelocal.dk/20201104/denmark-to-cull-millions-of-minks-over-mutated-coronavirus">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><img src="https://storage.googleapis.com/ddos-shield.appspot.com/shield-logo-mono-darktext.svg" width="250px" height="50px" alt="Project Shield Logo"></p><p>You will be connected to <b>www.thelocal.dk</b> in just a moment...</p><p><a href="https://g.co/shield">Learn about Project Shield</a></p></div></div>]]>
            </description>
            <link>https://www.thelocal.dk/20201104/denmark-to-cull-millions-of-minks-over-mutated-coronavirus</link>
            <guid isPermaLink="false">hacker-news-small-sites-24990724</guid>
            <pubDate>Wed, 04 Nov 2020 16:54:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Notes on Paxos]]>
            </title>
            <description>
<![CDATA[
Score 145 | Comments 22 (<a href="https://news.ycombinator.com/item?id=24990613">thread link</a>) | @matklad
<br/>
November 4, 2020 | https://matklad.github.io/2020/11/01/notes-on-paxos.html | <a href="https://web.archive.org/web/*/https://matklad.github.io/2020/11/01/notes-on-paxos.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <article>
  
  <p>Nov 1, 2020</p>
  <div id="preamble">
<div>
<p>These are my notes after learning the <a href="https://en.wikipedia.org/wiki/Paxos_(computer_science)">Paxos</a> algorithm.
The primary goal here is to sharpen my own understanding of the algorithm, but maybe someone will find this explanation of Paxos useful!
This post assumes fluency with mathematical notation.</p>


<p>That means that I didn’t actually understand the algorithm.</p>
<p>What finally made the whole thing click are</p>

<p>I now think that the thing is actually much simpler than it is made to believe :-)</p>
<p>Buckle in, we are starting!</p>
</div>
</div>
<div>
<h2 id="what-is-paxos"><a href="#what-is-paxos"></a>What is Paxos?</h2>
<div>
<p>Paxos is an algorithm for implementing distributed consensus.
Suppose you have <code>N</code> machines which communicate over a faulty network.
The network may delay, reorder, and lose messages (it can not corrupt them though).
Some machines might die, and might return later.
Due to network delays, “machine is dead” and “machine is temporary unreachable” are indistinguishable.
What we want to do is to make machines agree on some value.
“Agree” here means that if some machine says “value is X”, and another machine says “value is Y”, then X necessary is equal to Y.
It is OK for machine to answer “I don’t know yet”.</p>
<p>The problem with this formulation is that Paxos is an elementary, but subtle algorithm.
To understand it (at least for me), a precise, mathematical formulation is needed.
So, let’s try again.</p>
<p>What is Paxos?
Paxos is a theorem about sets!
This is definitely mathematical, and is true (as long as you base math on set theory), but is not that helpful.
So, let’s try again.</p>
<p>What is Paxos?
Paxos is a theorem about nondeterministic state machines!</p>
<p>A system is characterized by a state.
The system evolves in discrete steps: each step takes system from <code>state</code> to <code>state'</code>.
Transitions are non-deterministic: from a single current <code>s1</code>, you may get to different next states <code>s2</code> and <code>s3</code>.
(non-determinism models a flaky network).
An infinite sequence of system’s states is called a behavior:</p>
<div>
<div>
<pre><code><table><tbody><tr><td><pre>1
</pre></td><td><pre>state_0 → state_1 → ... → state_n → ...
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>Due to non-determinism, there’s a potentially infinite number of possible behaviors.
Nonetheless, depending on the transition function, we might be able to prove that some condition is true for any state in any behavior.</p>
<p>Let’s start with a simple example, and also introduce some notation.
I won’t use TLA+, as I don’t enjoy its concrete syntax.
Instead, math will be set in monospaced unicode.</p>
<p>The example models an integer counter.
Each step the counter decrements or increments (non-deterministically), but never gets too big or too small</p>
<div>
<p>Counter</p>
<div>
<pre><code><table><tbody><tr><td><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td><pre>Sets:
  ℕ -- Natural numbers with zero

Vars:
  counter ∈ ℕ

Init ≡
  counter = 0

Next ≡
    (counter &lt; 9 ∧ counter' = counter + 1)
  ∨ (counter &gt; 0 ∧ counter' = counter - 1)

Theorem:
  ∀ i: 0 ≤ counter_i ≤ 9

-- Notation
-- ≡: equals by definition
-- ∧: "and", conjunction
-- ∨: "or",  disjunction
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>The sate of the system is a single variable — <code>counter</code>.
It holds a natural number.
In general, we will represent a state of any system by a fixed set of variables.
Even if the system logically consists of several components, we model it using a single unified state.</p>
<p>The <code>Init</code> formula specifies the initial state, the <code>counter</code> is zero.
Note that <code>=</code> is a mathematical equality, and not an assignment.
<code>Init</code> is a <em>predicate</em> on states.</p>
<p><code>Init</code> is true for <code>{counter: 0}</code>.<br>
<code>Init</code> is false for <code>{counter: 92}</code>.</p>
<p><code>Next</code> defines a non-deterministic transition function.
It is a predicate on pairs of states, <code>s1</code> and <code>s2</code>.
<code>counter</code> is a variable in the <code>s1</code> state, <code>counter'</code> is the corresponding variable in the <code>s2</code> state.
In plain English, transition from <code>s1</code> to <code>s2</code> is valid if one of these is true:</p>
<div>
<ul>
<li>
<p>Value of <code>counter</code> in <code>s1</code> is less than <code>9</code> and value of <code>counter</code> in <code>s2</code> is greater by 1.</p>
</li>
<li>
<p>Value of <code>counter</code> in <code>s1</code> is greater than <code>0</code>, and value of <code>counter</code> in <code>s2</code> is smaller by 1.</p>
</li>
</ul>
</div>
<p><code>Next</code> is true for <code>({counter: 5}, {counter: 6})</code>.<br>
<code>Next</code> is false for <code>({counter: 5}, {counter: 5})</code>.</p>
<p>Here are some behaviors of this system:</p>
<div>
<ul>
<li>
<p><code>0 → 1 → 2 → 3 → 4 → 5 → 6 → 7 → 8 → 9</code></p>
</li>
<li>
<p><code>0 → 1 → 0 → 1 → 0 → 1</code></p>
</li>
<li>
<p><code>0 → 1 → 2 → 3 → 3 → 2 → 1 → 0</code></p>
</li>
</ul>
</div>
<p>Here are some <strong>non</strong> behaviors of this system:</p>
<div>
<ul>
<li>
<p><code>1 → 2 → 3 → 4 → 5</code>: <code>Init</code> does not hold for initial state</p>
</li>
<li>
<p><code>0 → 2</code>: <code>Next</code> does not hold for <code>(0, 2)</code> pair</p>
</li>
<li>
<p><code>0 → 1 → 0 → -1</code>: <code>Next</code> does not hold for <code>(0, -1)</code> pair</p>
</li>
</ul>
</div>
<p>“behavior” means that the initial state satisfies <code>Init</code>, and each transition satisfies <code>Next</code>.</p>
<p>We can state and prove a theorem about this system: for every state in every behavior, the value of counter is between 0 and 9.
Proof is by induction:</p>
<div>
<ul>
<li>
<p>The condition is true in the initial state.</p>
</li>
<li>
<p>If the condition is true for state <code>s1</code>, and <code>Next</code> holds for <code>(s1, s2)</code>, then the condition is true for <code>s2</code>.</p>
</li>
<li>
<p>QED.</p>
</li>
</ul>
</div>
<p>As usual with induction, sometimes we would want to prove a <em>stronger</em> property, because it gives us more powerful base for an induction step.</p>
<p>To sum up, we define a non-deterministic state machine using two predicates <code>Init</code> and <code>Next</code>.
<code>Init</code> is a predicate on states which restricts possible initial states.
<code>Next</code> is a predicate on <em>pairs</em> of states, which defines a non-deterministic transition function.
<code>Vars</code> section describes the state as a fixed set of typed variables.
<code>Sets</code> defines auxiliary fixed sets, elements of which are values of variables.
<code>Theorem</code> section specifies a predicate on behaviors: <em>sequences</em> of steps evolving according to <code>Init</code> and <code>Next</code>.</p>
<p>The theorem does not automatically follow from <code>Init</code> and <code>Next</code>, it needs to be proven.
Alternatively, we can simulate a range of possible behaviors on a computer and check the theorem for the specific cases.
If the set of reachable states is small enough (finite would be a good start), we can enumerate <em>all</em> behaviors and produce a brute force proof.
If there are too many reachable states, we can’t prove the theorem this way, but we often can prove it to be wrong, by finding a counter example.
This is the idea behind model checking in general and TLA+ specifically.</p>
</div>
</div>
<div>
<h2 id="what-is-consensus"><a href="#what-is-consensus"></a>What is Consensus?</h2>
<div>
<p>Having mastered the basic vocabulary, let’s start slowly building towards Paxos.
We begin with defining what consensus is.
As this is math, we’ll do it using sets.</p>
<div>
<div>
<pre><code><table><tbody><tr><td><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
</pre></td><td><pre>Sets:
  𝕍 -- Arbitrary set of values

Vars:
  chosen ∈ 2^𝕍 -- Subset of values

Theorem:
    ∀ i: |chosen_i| ≤ 1
  ∧ ∀ i, j: i ≤ j ∧ chosen_i ≠ {} ⇒ chosen_i = chosen_j

-- Notation
-- {}:  empty set
-- 2^X: set of all subsets of X, powerset
-- |X|: cardinality (size) of the set
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>The state of the system is a set of chosen values.
For this set to constitute consensus (over time) we need two conditions to hold:</p>
<div>
<ul>
<li>
<p>at most one value is chosen</p>
</li>
<li>
<p>if we choose a value at one point in time, we stick to it (math friendly: any two chosen values are equal to each other)</p>
</li>
</ul>
</div>
<p>Here’s the simplest possible implementation of consensus:</p>
<div>
<p>Consensus</p>
<div>
<pre><code><table><tbody><tr><td><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
</pre></td><td><pre>Sets:
  𝕍 -- Arbitrary set of values

Vars:
  chosen ∈ 2^𝕍 -- Subset of values

Init ≡
  chosen = {}

Next ≡
  chosen = {} ∧ ∃ v ∈ 𝕍: chosen' = {v}


Theorem:
    ∀ i: |chosen_i| ≤ 1
  ∧ ∀ i, j: i ≤ j ∧ (chosen_i ≠ {} ⇒ chosen_i = chosen_j)
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>In the initial state, the set of chosen values is empty.
We can make a step if the current set of chosen values is empty, in which case we select an arbitrary value.</p>
<p>This technically breaks our behavior theory: we require behaviors to be infinite, but, for this spec, we can only make a single step.
The fix is to allow empty steps: a step which does not change the state at all is always valid.
We call such steps “stuttering steps”.</p>
<p>The proof of the first condition of the consensus theorem is a trivial induction.
The proof of the second part is actually non-trivial, here’s a sketch.
Assume that <code>i</code> and <code>j</code> are indices, which violate the condition.
They might be far from each other in state-space, so we can’t immediately apply <code>Next</code>.
So let’s choose the <em>smallest</em> <code>j1 ∈ [i+1;j]</code> such that the condition is violated.
Let <code>i1 = j1 - 1</code>.
The condition is still violated for <code>(i1, j1)</code> pair, but this time they are subsequent steps, and we can show that <code>Next</code> does not hold for them, concluding the proof.</p>
<p>Yay! We have a distributed consensus algorithm which works for 1 (one) machine:</p>
<div>
<p>Distributed Consensus For One Machine</p>
<ol>
<li>
<p>Pick arbitrary value.</p>
</li>
</ol>
</div>
</div>
</div>
<div>
<h2 id="simple-voting"><a href="#simple-voting"></a>Simple Voting</h2>
<div>
<p>Let’s try to extend this to a truly distributed case, where we have <code>N</code> machine (“acceptors”).
We start with formalizing the naive consensus algorithm: let acceptors vote for values, and select the value which gets a majority of votes.</p>
<div>
<p>Majority Vote</p>
<div>
<pre><code><table><tbody><tr><td><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
</pre></td><td><pre>Sets:
  𝕍 -- Arbitrary set of values
  𝔸 -- Finite set of acceptors

Vars:
  votes ∈ 2^(𝔸×𝕍) -- Set of (acceptor, value) pairs

Init ≡
  votes = {}

Next ≡
  ∃ a ∈ 𝔸:
      ∃ v ∈ V: votes' = votes ∪ {(a, v)}
    ∧ ∀ v ∈ V: (a, v) ∉ votes

chosen ≡
  {v ∈ V: |{a ∈ 𝔸: (a, v) ∈ votes}| &gt; |𝔸| / 2}
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>The state of the system is the set of all votes cast by all acceptors.
We represent a vote as a pair of an acceptor and the value it voted for.
Initially, the set of votes is empty.
On each step, some acceptor casts a vote for some value (adds <code>(a, v)</code> pair to the set of votes), but only if it hasn’t voted yet.
Remember that <code>Next</code> is a predicate on pairs of states, so we check <code>votes</code> for existing vote, but add a new one to <code>votes'</code>.
The value is chosen if the set of acceptors which voted for the value (<code>{a ∈ 𝔸: (a, v) ∈ votes}</code>) is at least half as large as the set of all acceptors.
In other words, if a majority of acceptors has voted for the value.</p>

<p>Let’s prove consensus theorem for Majority Vote protocol.
TYPE ERROR, DOES NOT COMPUTE.
The consensus theorem is a predicate on behaviors of states consisting of <code>chosen</code> variable.
Here, <code>chosen</code> isn’t a variable, <code>votes</code> is!
<code>chosen</code> is a function which maps current state to some boolean.</p>
<p>While it is intuitively clear what “consensus theorem” would look like for this case, let’s make this precise.
Let’s <em>map</em> states with <code>votes</code> variable to states with <code>chosen</code> variable using the majority rule, <code>f</code>.
This mapping naturally extends to a mapping between corresponding behaviors (sequences …</p></div></div></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://matklad.github.io/2020/11/01/notes-on-paxos.html">https://matklad.github.io/2020/11/01/notes-on-paxos.html</a></em></p>]]>
            </description>
            <link>https://matklad.github.io/2020/11/01/notes-on-paxos.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24990613</guid>
            <pubDate>Wed, 04 Nov 2020 16:43:52 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Victims of school bullying are at a higher risk of developing violent behavior]]>
            </title>
            <description>
<![CDATA[
Score 196 | Comments 146 (<a href="https://news.ycombinator.com/item?id=24990064">thread link</a>) | @rustoo
<br/>
November 4, 2020 | https://www.uco.es/ucci/es/noticias-ingles/item/3138-victims-of-school-bullying-are-at-a-higher-risk-of-developing-violent-behavior-in-the-future | <a href="https://web.archive.org/web/*/https://www.uco.es/ucci/es/noticias-ingles/item/3138-victims-of-school-bullying-are-at-a-higher-risk-of-developing-violent-behavior-in-the-future">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>A University of Cordoba and University of Cambridge study analyzed what factors in childhood and adolescence increase the likelihood of having violent behavior in adulthood</p><div>
			
<p>There is another pandemic that humans have been experiencing for a long time now and for which effective preventive measures have yet to be found: violence. This is shown in various ways in different aspects of life and continues to have serious consequences for society, the economy, our health and human relations. The onset of violent behavior can be observed from childhood and adolescence, so studying what aspects lead to the development of these kinds of behaviors and which curb them has become a necessary step in their prevention.</p>
<p>The University of Cordoba and the University of Cambridge have been collaborating for a long time now on research into aspects related to violence, thus helping decrease its risks and prevent it. In their latest piece of research, they studied possible risk and protection factors for violence and, in this way, they verified whether violent behavior can be predicted months or even years before it develops.</p>
<p>Specifically, the study focused on finding out if morality, victimization, empathy and social and emotional skills predict the expression of different violent behaviors in children and adolescents in different contexts, including at school and in a family setting. "These behaviors refer to, for instance, troubling behavior at home, including physical violence towards parents and siblings, at school, including physical violence towards teaching staff and schoolmates, and other settings, including bad behavior in public", explains Raquel Espejo Siles, doctoral student at the University of Cordoba who carried out this research during her stay at the Institute of Criminology at the University of Cambridge thanks to one of the ELMER grants from the Diputación de Córdoba (Cordoba's county government).</p>
<p>Raquel Espejo worked with Izabela Zych, Professor at the Psychology Department at the University of Cordoba and part of the LAECOVI (Study Laboratory on Coexistence and Violence Prevention) research group, whose line of research is this study's framework. The study also had the participation of David P. Farrington, Emeritus Professor of Criminology at the University of Cambridge, and Vicente J. Llorent, Professor at the Education Department at the University of Cordoba.</p>
<p>871 students between 10 and 17 years of age at different Andalusian educational centers took part in the research. They filled out two questionnaires, one in June 2017 and one in June 2018.</p>
<p>Interesting conclusions were drawn from the results. "We found that violence used directly towards people was related to a tendency to make impulsive decisions and to a blind motivation to accomplish one's aims, without regard for the disadvantages or negative consequences from using violence", reveals Raquel Espejo.</p>
<p>What is more, being a victim of bullying was detected as a risk factor for developing violent behavior at home against their family as well as at school. Likewise, those people who were violent in public or in class were shown to have higher scores in moral disengagement, meaning that they usually made excuses so that these acts would seem less serious than they really were.</p>
<p>At school, it was verified that higher scores for social and emotional competencies such as social awareness, self-management, motivation and decision making are protection factors against violence. Therefore, these results support prevention initiatives based on the potential of learning social and emotional skills at home as well as at school.</p>
<p>The data show that reducing victimization in a school setting could be effective in decreasing violence in different contexts in the future. "It is important to prevent violence, both victimization and bullying, since the data found in this study and others indicate that violence is a vicious cycle. Being the aggressor or the victim entails a high risk of developing the opposite role, reinforcing and increasing violence both at school and outside of school", points out Raquel Espejo.</p>
<p>According to this research study, enabling teenagers to reassess their goals and the consequences of their violent behavior could have an impact on decreasing violence further down the road. In addition, teaching different strategies to resolve issues in a different way could help them to compare and see the high individual and social price to pay for violent behavior.</p>
<p>This study is part of the "E-intelligence: risks and opportunities of emotional competencies expressed online" (PSI-2015-64114-R) project of the National Research, Development and Innovation Program, subsidized by the Ministry of Economic Affairs and Competitiveness. With the aim of having greater understanding of the reality of violence in childhood and adolescence, the team will continue to research about violent behavior in face to face and online contexts. Firstly, they have studied the factors that can curb or increase cyberhate in a study funded by the Center for Andalusian Studies. Secondly, they will continue working on the same line of research, investigating the link between bullying and drug use in a study financed by the Ministry of Health.</p>
<p>Raquel Espejo-Siles, Izabela Zych, David P. Farrington, Vicente J. Llorent. Moral disengagement, victimization, empathy, social and emotional competencies as predictors of violence in children and adolescents. Children and Youth Services Review. Doi: <a href="https://doi.org/10.1016/j.childyouth.2020.105337">https://doi.org/10.1016/j.childyouth.2020.105337</a></p>		</div></div>]]>
            </description>
            <link>https://www.uco.es/ucci/es/noticias-ingles/item/3138-victims-of-school-bullying-are-at-a-higher-risk-of-developing-violent-behavior-in-the-future</link>
            <guid isPermaLink="false">hacker-news-small-sites-24990064</guid>
            <pubDate>Wed, 04 Nov 2020 15:49:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Self Referential Formula in Math (2011)]]>
            </title>
            <description>
<![CDATA[
Score 29 | Comments 4 (<a href="https://news.ycombinator.com/item?id=24988704">thread link</a>) | @surround
<br/>
November 4, 2020 | https://jtra.cz/stuff/essays/math-self-reference/index.html | <a href="https://web.archive.org/web/*/https://jtra.cz/stuff/essays/math-self-reference/index.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main">
      <h2>Self Referential Formula in Math</h2>
      <p>Keywords: math, quine, self-reference, Tupper</p>
      <p>Published: 23 Jun 2011 - see updates at the bottom</p>
      <h3>Tupper's formula</h3>
      <p>
        <b>See newer self-referential stuff:</b>
        <a href="https://jtra.cz/stuff/essays/math-self-reference-smooth/index.html">my 2019 self-referential formula uses Bézier curves instead of bitmaps</a>.
      </p>
      <p>
        I have seen <a href="https://shreevatsa.wordpress.com/2011/04/12/how-does-tuppers-self-referential-formula-work/">
        this blog about Tupper self-referential formula</a> recently.
        This formula is interesting. Its graph contains all possible
        bitmaps that fit in region of 17 * 106 grid. So it is not much
        of wonder that one of those many bitmaps contains meaningful
        representation of the formula itself. Actually, there multiple
        ways to fit the formula in 17*106 grid, so there are multiple
        occurrences of the formula in the graph. But there are also
        all other formulas that fit. It is not truly self-referential
        since number N which you need to find right viewport is not
        included inside (see updates at the bottom, Jeff Tupper has
	produced additional formulas that are truly self-referential,
	but this famous one is not).
	You cannot fit a bitmap represented as number
        in the same bitmap as fonts you would use for base-10 number
        would take at least 4*3 "pixels" per digit while that digit
        carries only log<sub>2</sub>10 bits. Is there a better way
        than that? Some form of compression might work.
      </p>
      <h3>Trávník's formula</h3>
      <p>
        So I though how I would design a formula that would be truly
        self-referential. This design process is more like programming
        for several reasons:
      </p>
      <ul>
        <li>I expected it will take one evening (4hrs), but it took
        three evenings :-)</li>
        <li>I had to debug the formula and refine it until it started to work.</li>
        <li>Formula had to be designed incrementally, in small pieces.</li>
        <li>Getting the picture takes a lot of computational time.</li>
      </ul>
      <p>
        Here is the formula in final form (I will probably describe
        steps how I arrived to this form in some follow up article if
        there is enough interest). Originally I have used Haskell in
        design process. To verify final form, I had to create
        C program (uses GMP big number library) since Haskell was too
        slow. This allowed me to verify it again that the formula is
        matching the program. This is the formula as formated with
        LyX:
      </p>
      
      <p><img src="https://jtra.cz/stuff/essays/math-self-reference/travnik-self-referential-formula-lyx.png" alt="Travnik's self referential formula (LyX)"></p><p>
        Now this one omitted the value of N. The N is very big number,
        it contains 12876 digits. You can see the N in the graph of
        the function below. Also, you can copy and paste the N from
        C source program below. Here is the function as it graphs
        itself (inside yellow border):
      </p>
      
      <p><img src="https://jtra.cz/stuff/essays/math-self-reference/travnik-self-referential-formula-graph.png" alt="Travnik's self referential formula (graph)"></p><p>
        You can find source of the program I used to plot it <a href="https://jtra.cz/stuff/essays/math-self-reference/selfref-demo.c">here</a> (it requires <a href="http://gmplib.org/">GMP big number library</a> to
        compile and run). At the top of the program there are
        constants which allow to define viewport you want. It is set
        to some interesting region that includes part of N. But you
        can set it to whole region if you have patience. Output graph
        is printed on terminal, '#' denotes true value, ' ' denotes
        false values. If you set wider X axis than fits the terminal,
        you can redirect to file and open in non-word wrapping editor
        with monospaced font. I have transformed such file to PBM
        ASCII format and used GIMP to get the image above.
      </p>
      <p>
        Beware that the C program is very slow. On my computer it ran
        for about 30 hours. I could optimize it, but I wanted the
        functions in C to correspond closely to the functions in the
        formula. While the program uses integer values for x and
        y computation, you can graph it with real valued x and y too.
        You can make it significantly faster if you don't want
        to see all digits of the N in this way. Replace:
      </p>
      <pre>        nnnBase10Len=strlen(strnnn)-1;
      </pre>
      <p>with</p>
      <pre>        nnnBase10Len=60;
      </pre>
      <p>
        In this case, you will see only last 60 digits of the N (and
        they will be shifted to different locations).
      </p>
      <h2>Updates</h2>
      <ul>
        <li>2011-06-23 - <a href="http://www.reddit.com/r/math/comments/i75t1/tuppers_formula_popular_topic_here_few_days_ago/c21h4vn">corrected LyX version of formulas there was "x" where should be "floor(x)" in function g. It was correct in other places.</a></li>
	<li>2017-12-29 - I have noticed that Jeff Tupper has produced additional formulas that are truly self-referential, they are <a href="http://www.peda.com/selfplot/">here</a>. Files have year 2007 so they predate my formula from 2011.</li>
	<li>2019-03-30 - Added link to my <a href="https://jtra.cz/stuff/essays/math-self-reference-smooth/index.html">2019 self-referential formula that uses Bézier curves</a>.</li>
      </ul>
      <p>
        Back to index - <a href="https://jtra.cz/index.html">Jakub Trávník's
        resources</a>.
      </p>
    </div></div>]]>
            </description>
            <link>https://jtra.cz/stuff/essays/math-self-reference/index.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24988704</guid>
            <pubDate>Wed, 04 Nov 2020 13:16:44 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Disclosure: Unlimited Chase Ultimate Rewards Points]]>
            </title>
            <description>
<![CDATA[
Score 1097 | Comments 242 (<a href="https://news.ycombinator.com/item?id=24988301">thread link</a>) | @ic4l
<br/>
November 4, 2020 | https://chadscira.com/post/5fa269d46142ac544e013d6e/DISCLOSURE-Unlimited-Chase-Ultimate-Rewards-Points | <a href="https://web.archive.org/web/*/https://chadscira.com/post/5fa269d46142ac544e013d6e/DISCLOSURE-Unlimited-Chase-Ultimate-Rewards-Points">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://chadscira.com/post/5fa269d46142ac544e013d6e/DISCLOSURE-Unlimited-Chase-Ultimate-Rewards-Points</link>
            <guid isPermaLink="false">hacker-news-small-sites-24988301</guid>
            <pubDate>Wed, 04 Nov 2020 12:10:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Subversive Computing]]>
            </title>
            <description>
<![CDATA[
Score 46 | Comments 23 (<a href="https://news.ycombinator.com/item?id=24988273">thread link</a>) | @stargrave
<br/>
November 4, 2020 | https://datagubbe.se/subversive/ | <a href="https://web.archive.org/web/*/https://datagubbe.se/subversive/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>



<p>
or <b>Better Digital Living By Making Things Harder For Yourself</b><br>
or <b>I spent a Year Without Facebook and Google - Here's What Happened Next</b><br>
</p>

<p><em>Autumn 2020</em></p>


<p>
It's easy to grow disillusioned with tech, even to the point that it 
appals you. I've been using computers since 1988 and the net since 1995
and over time, something's happened. During the last decade or so, my 
mind has increasingly been preoccupied with the following thoughts:
</p>

<ul>
<li>I'm no longer in control of my computer and my OS.</li>
<li>The modern web is a cesspool of tracking scripts, ads, 
malware and clickbait designed to suck you in and make you stupid.</li>
<li>Even the most premium commercial software and hardware more often
than not comes with contraptions to spy on you.</li>
<li>"Cloud apps" are replacing programs I'd much rather run natively.</li>
<li>Thus, we sacrifice our privacy and intellects for faux conveniences.</li>
<li>The Idealist Net we fondly remember is long dead and unlikely to come
back.</li>
<li>...but there are still pockets of sanity left.</li>
</ul>

<p>
As a child of the home computer boom, I'm used to general purpose 
machines that do my bidding without interference from neither the 
manufacturer nor some unknown other wanting to sell me Depends and 
Bitcoins. That's what I want my computing to <i>still</i> be like.
</p>

<p>
The Man wants something different, though. The Man wants you to log in, 
click accept, sell your soul and Buy More Stuff. Hence, working to avoid 
that must be some level of subversive computing: Sticking it to The Man, 
one bit at a time.
</p>

<p>
In this text, I'll try to outline how I do my best to achieve that. Fair 
warning: it doesn't come without what some would call sacrifice, because 
you can't have the cake and eat it. This "sacrifice", however, might 
ultimately turn out to be beneficial.
</p>

<h2>What I absolutely do not use</h2>

<h3>Facebook</h3>

<p>
This is a dead giveaway, of course. No facebook and no facebook services 
(E.G. instagram, whatsapp, messenger, etc).
</p>

<p>
Quitting was, considering the circumstances, very easy. I'd had a 
facebook account since 2007 and I used to live there, sometimes posting 
several times a day and checking in much more often. In the summer of 
2019, I wrote a goodbye post and the day after, I closed my account. 
This is more than a year ago now and I don't miss it.
</p>

<p>
I had an Instagram account for a while, but only used it for maybe a 
month or two. It's the second stupidest "service" available on the net 
right now, and that's saying a lot: It is, quite literally, a site 
where millions of people post daily photos of their dinners. To put it 
as nicely as I can: Instagram has absolutely zero content of any kind of 
real importance to anyone.
</p>

<p>
<b>Coping strategy:</b> None, really. It turns out that people who are 
interested in meeting with or talking to you will send an email or text 
or perhaps even call you. I'm also particularly thankful I didn't have to
witness the COVID-19 debacle unfold on social media.
</p>

<h3>Twitter</h3>

<p>
Beating Instagram, Twitter is currently the stupidest site on the net. 
Best described as a slowly decomposing swamp of infighting and political 
bickering, it's full of people who will not yield a millimeter in any 
direction and will never, ever change their opinions about anything.
</p>

<p>
<b>Coping strategy:</b> None. Ditching twitter is something I advice 
everyone to do, even those who will gladly sell their DNA for a bit of 
"free" online convenience. You'll feel much more at peace with the world 
without it.
</p>

<h3>Google</h3>

<p>
If facebook is a dead giveaway, this is the truly crucial part of the 
concept. Facebook deals with distractions - Google deals with 
infrastructure. No longer one of many actors on the net, their monopoly 
quite simply dictates what goes and what doesn't. A recent reminder was 
when their domain blacklisting suddenly identified 
pouet.net, an innocent site for discussing the demo scene, as a spreader 
of malware. Things were, as usual, only resolved because someone knew 
someone who worked at Google. To discourage their thuggish, predatory 
behavior, we should avoid them in any way possible.
</p>

<p>
I closed down my Google account together with my Facebook account. I 
haven't missed that one, either. I also switched to searching with 
DuckDuckGo. The major point here is to <i>not</i> find a "replacement 
Google", such as Office 365 and Onedrive. That's not taking back control 
over your data, that's just handing it to the next buffoon for continued 
mining.
</p>

<p>
<b>Coping strategy:</b> I now pay for my email. A mom-and-pop hosts it 
all for a very reasonable yearly fee and they throw in some pretty 
decent web hosting, too. Complete self-hosting would of course be ideal 
from a privacy standpoint, but I'm happy with this solution. I can also 
mount the home directory through sshfs, which makes it an excellent 
"cloud drive". When I've been in contact with their customer support,
they've been timely, friendly, efficient and professional.
</p>

<p>
All things considered, it's probably nowhere near as safe 
from third-party intrusion and reliable against service outage as 
the Google equivalent, but then again I didn't use Google Drive for
anything important, either. That's what my hard drives and USB sticks are for. 
Don't hand over the stuff that matters to third parties if you can avoid 
it.
</p>

<p>
<b>Caveat:</b> Some people might actually need Google Docs for work, because 
employers like to force their employees into certain ecosystems. I'm 
forced into other ecosystems by mine, see
<a href="#tacs">Tradeoffs and Concessions</a>
below. The best option in these cases is of course to use it exclusively for 
work, exclusively on your work computer and in a separate web browser if
possible.
</p>

<h3>Many more sites</h3>

<p>
There are tons of sites, services and apps I don't use, for example 
Paypal and Dropbox. In fact, I avoid most sites where I have to register 
an account.
</p>

<h3>Phone Apps</h3>

<p>
My employer supplies me with a smartphone. On it I keep only the apps I 
need for work and banking. When commuting was still a thing, I also 
listened to Spotify. Other than that, I try to use it as little as 
possible these days. I do carry it with me, though: it mostly works fine 
as a phone and mobile phones are pretty damn convenient.
</p>

<p>
<b>Coping strategy:</b> I've never been fond of having a lot of apps.
Most of them are pointless and solve completely invented problems.
</p>

<h3>My local newspaper</h3>

<p>
I used to pay for an online subscription, until I just decided to stop 
one day. Apart from the poor quality of journalism, the biased reporting and 
the insipid editorial texts, I was basically paying money to keep feeding 
the online ad machine. That's a no-go.
</p>

<p>
<b>Coping strategy:</b> It's probably a reasonable idea to keep somewhat 
informed about current events. <a href="#news">See "News" below.</a>
</p>

<h2>Things I do use</h2>

<h3>Linux</h3>

<p>
In terms of user empowerment, even Canonical's Ubuntu with its telemetry 
and mysterious snap packages is so far a much better choice than any 
proprietary home computer OS on the market. From a privacy standpoint, 
other distributions, such as Debian and Slackware, are of course even 
better.
</p>

<h3>Native software</h3>

<p>
Turns out there are plenty of good programs that can be used completely 
offline and will let you store your files locally. They're not even hard 
to find. A few tips: Abiword, GNumeric, The Gimp, WordGrinder, 
Audacious.
</p>


<h3>The Web</h3>

<h4>The web, method one: Links2</h4>

<p>
The web still has good parts and I want to get at those good parts. 
Turns out the really good parts are usually remnants of The Old Web, 
consisting of HTML and great content.
</p>

<p>
I try to do as much web browsing as possible in Links2. It's a fast, 
lean browser with zero support for JavaScript and CSS. The latter means 
some sites look a bit funky. The former means some sites won't work at 
all. My usual strategy for sites that won't render without JavaScript is 
to simply ignore them. If they can't produce something worthwhile 
without scripting, it's probably not worthwhile at all.
</p>

<p>
On the plus side, no JavaScript means that most trackers and other spy- 
and malware just won't run at all. Since Links doesn't save <i>any</i> 
cookies between sessions, other means of tracking will at least be kept 
somewhat confused. The flip side is that it's probably an extremely 
unique browser fingerprint.
</p>

<h4>The web, method two: RSS and native applications</h4>

<p>
You can subscribe to Youtube channels, subreddits and pretty much every 
blog out there using RSS. There are also plenty of specialized TUI:s and 
CLI:s for interfacing with various popular websites such as Youtube and 
Reddit.
</p>

<h4>The web, method three: Firefox with UBlock Origin</h4>

<p>
For some things, like banking and filing taxes, the Internet really has 
made things so much more convenient I don't want to live without them. 
Although my bank could easily provide the services I use completely 
without a single line of JavaScript, they have decided not to. This also 
goes for most online shopping. For these types of sites, I use Firefox.
</p>

<h3>Youtube</h3>

<p>
There's still plenty of worthwhile content published on Youtube, not 
least recordings of demo scene productions for obscure hardware.
</p>

<p>
I watch Youtube using my own <a href="https://datagubbe.se/yt">tube script</a> in 
combination with a media player. It's not ideal, since Google will be 
able to infer a bit about my habits through my IP (although that could 
of course be mitigated using a VPN) and some videos don't work due to 
various restrictions imposed by their creators (or copyright laws). 
Somewhere around 90% of them do though, especially the interesting 
ones such as Computerphile and Numberphile). The upside is freedom from 
ads and algorithmic "recommendations": I watch only the videos I really 
want to watch.
</p>

<h3>Wikipedia</h3>

<p>
Still a useful and usable site.
</p>

<h3 id="news">News</h3>

<p>
Most of the content produced by news media is either clickbait or some 
kind of "commentary" by "experts" on actual headline news, which can 
then be milked for another couple of days. More often than not, the 
reporting is either misinformed, or biased, or both. Still, keeping 
somewhat updated can be beneficial for private decision making and 
overall …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://datagubbe.se/subversive/">https://datagubbe.se/subversive/</a></em></p>]]>
            </description>
            <link>https://datagubbe.se/subversive/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24988273</guid>
            <pubDate>Wed, 04 Nov 2020 12:03:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Get Started with Infection Monkey, Open Source Security Tool]]>
            </title>
            <description>
<![CDATA[
Score 51 | Comments 8 (<a href="https://news.ycombinator.com/item?id=24988227">thread link</a>) | @morchen
<br/>
November 4, 2020 | https://swimm.io/blog/infection-monkey-tutorial-start-contributing-using-swimm/ | <a href="https://web.archive.org/web/*/https://swimm.io/blog/infection-monkey-tutorial-start-contributing-using-swimm/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section data-v-f94c7cca=""> <!----> <div data-v-0cf44990="" data-v-f94c7cca=""><div><p><img src="https://swimm.io/media/screen-shot-2020-11-04-at-10.34.43.png" alt="Infection monkey "></p>
<p>Infection Monkey powered by Guardicore is a popular Open Source project and essentially a Breach and Attack Simulation (BAS) tool that analyzes and breaks down the robustness of cloud-based development environments, regardless of if they are of the private or public type.</p>
<p><a href="https://twitter.com/ShayNehmad">Shay Nehmad</a>, a seasoned Open Source developer, and Shreya Malviya, a contributor to Infection Monkey, spoke to the participants about how Swimm is making it easier to contribute to the project and make a difference.</p>
<p>The resiliency to post-breach attacks and lateral movement is done with the help of automatic attack simulations that inject a random machine with a proprietary Infection Monkey code, which helps gauge and discover security loopholes and vulnerabilities. Think of it as an automated Pen Testing tool.</p>
<p>The 48 hour online event devoted to encouraging contributions to open source projects hosted by Brian Douglas of Github,&nbsp; the Open Sauced community and backed by Swimm.</p>
<p>Check out the event <a href="https://www.youtube.com/playlist?list=PLHyZ0Wz_A44Ul9-YwiT-zt-JgEy3lRGns">here</a>.</p>
<h2>Getting Started with Infection Monkey using Swimm</h2>
<p><a href="https://github.com/guardicore/monkey#:~:text=The%20Infection%20Monkey%20is%20an,a%20centralized%20Monkey%20Island%20server.">Infection Monkey</a> is very straightforward and user-friendly. The Monkey, is a proprietary tool that infects random machines in the target environment and propagates to them. And there is Monkey Island, a dedicated centralized dashboard to monitor the results and findings. More about the Infection Monkey installation process <a href="https://www.guardicore.com/infectionmonkey/wt/">here</a>.</p>
<p><img src="https://swimm.io/media/screen-shot-2020-11-04-at-11.02.48.png" alt="The Map" title="github.com/guardicore/monkey"></p>
<p>Besides being a non-intrusive and plug-and-play tool, Infection Monkey requires zero maintenance and runs around the clock for comprehensive security analysis. Furthermore, users can also get actionable insights and recommendations with the ability to define alerts as per their requirements.</p>
<blockquote>
<p>Swimm makes the onboarding of contributors to open source projects easier. Since everything related to Swimm is within the Infection Monkey (henceforth: IM) repository, all that you have to do is to clone that repo, start the terminal, and run the command “swimm start” on your terminal.</p>
</blockquote>
<p>Once the server starts, it automatically opens the Swimm homepage, which already has playlists for IM. Currently, the repository includes three playlists (Post-breach action, Configuration, and System Info Collection). For this tutorial, we will use an extra-verbose playlist called “Adding a PBA in 5 Simple Steps”.</p>
<p><img src="https://lh6.googleusercontent.com/wbkmZQhpI08v8F6ivT_mEp0Dsa7mAQ-g9xS4VGAs5-GZniEwnEl_BHm4ui5BqxZRB613RULmPIk1uXOmsVQOVCR5xFmHjUevYXWcrkOk7Rs6BdYT-qQe9bZGhZL-aC1neoYxnROu" alt=""></p>
<p>In a nutshell, Infection Monkey is a penetration testing tool and it simulates a person breaking into your system. Once the person is inside your system, they can perform additional actions after conducting the breach. In IM terminology, these are referred to as the “post-breach actions” or PBAs.</p>
<h4>Define What Your New PBA Does</h4>
<p>This is the actual coding step. As the name suggests, it basically defines what your new PBA does. So, briefly, you have to define what this step will do in IM (as stated in the description). This step also gives you instructions to run the manual test after you are done. But first, let’s do the main coding part.</p>
<p>All you have to do is copy the command from the Swimm interface and run it on your terminal. This will give you some information about this particular unit.</p>
<p><img src="https://lh4.googleusercontent.com/n--uGoeV2gCm-JCZzKWr3nchhCZsHE8AkrldGNKm-L6uzNRQ4LDeB1zjwooiiENFs5_AAvdu3nSLMKeW0EUTfcewurPHMBbs_3a5RA0F_Nva7nfwAURu_3FGKjhO9QVSejoWHFL6" alt=""></p>
<p>For example, the “Definition of done” says that you need a new constant defining what the PBA does. Now, you can ask Swimm to tell you which particular files are relevant to this specific Unit by running the command “Swimm Files”. It shows you the name of one file which is relevant to this Unit.</p>
<p><img src="https://lh3.googleusercontent.com/vtfc9Vr61m_8KQr9uOBS6eK2qMRVgoeCPZRuatXYzAVR40xiq41d3jKJKNql6FRg5GIDNwo26-2X2PPhMAsXNlboVXxKwwcOXdHMrf0bun0_ZYCQtUGOGQxvxRfUSmHS-GEgg4i_" alt=""></p>
<blockquote>
<p>“This is pretty cool if you think about how you would do personal onboarding with someone. You would guide them toward the files relevant to what you are teaching.” - Shay Nehmad</p>
</blockquote>
<p>So we have to see how to define the name of the PBA which is to be done in this file. This really shows how building the Unit correctly can “emulate” or replace the personal onboarding process. Also, another thing we should notice here is that this particular file is in the module called “common”.</p>
<p>This suggests that everything we will do here is going to affect both the Monkey and the Swimm server. Open this file.</p>
<p><img src="https://lh4.googleusercontent.com/lnAb1DR5i9wnsoAZJNe76VeHqwv0wW4xyI9drUrGrH8MgXU6GK_-DRCbL8OGFHCfumQfR0KlvKALtpT-KMfox3wTMdbt0RDAyi89AZZ7CJx9ojaycexEHjTJshfvqdAXyoDGfMxd" alt=""></p>
<p>The comments generated by Swimm show you where you need to add your code. But if you are not sure about what to do next, Swimm provides hints via the command `swimm hint`.</p>
<p>If you go back to the file and look at that PBA, it basically tells you what the PBA with the name “Timestomping” does. That’s how you will also define the name of your new PBA. Add your new PBA “POST_BREACH_SCHEDULE_JOBS” and save the file. You have refined your new PBA, but how do we know this works?</p>
<p><img src="https://lh5.googleusercontent.com/ZMTPTwtUn17Qz2ABXXby8GipDAQSj9vwCgdlWgzYq85FoEBCOHHfkdijUQ5pBFPM-zXneonQNd1fuD0BFgWKtcc3tCE2CxvwD7dOelMiHXvAh9ahDusmIWZWCaEKe84Jghxvreom" alt=""></p>
<p>It's pretty easy when you are using Swimm. Let’s go back to the Swimm interface and learn about some easy and straightforward instructions to run the test.</p>
<p><img src="https://lh4.googleusercontent.com/oj-L3LjKzRhVqKbmPagGdHtkj-AoNYzEgKJ0P8tcg4es6sf1s-TnbG-Ig3BR0t4quDKl6UummO4FJXc-ifobCpWy79QOY-OfQYFexiqYVB3QnrFMxxnZ1dnFvuTuBapRClBTVMyN" alt=""></p>
<p>Let’s study the result of this test from its image.</p>
<p><img src="https://lh3.googleusercontent.com/bVQos7iG-I40XJfiDKJ7DH-SnUCed0Xtp5csLgqyLAmDTlUWkqzSRuG6H5DZB6xaLgav7qzcnEhIZrZRW1PZMemZyWYlVLp2YNNWH6Sjdfpz9jAcS4mCxMBKv_SAPd4W91wsmu7o" alt=""></p>
<p>Whatever you added to the PBA definitions file, you should be able to see in the test report. Once you are done studying it, you can mark it as done with the command `swimm done`. This will take you to a Swimm status page (see below) that also allows you to compare your solution to the original codebase.</p>
<p><img src="https://lh4.googleusercontent.com/nU2b4mGCv-mhVLPL8PotXYIeFC70Sid_prw7-oBbknXgnHJxIDSNG8DcwMZ6-19m90mJW4MPX6tEcHPLr3D6YkoO8A90Lya1T0iA9U8My7Eb3BTZntGwb20p6Tf256apGCynI5il" alt=""></p>
<h2>Implement a New PBA</h2>
<p>Now, we know that the schedule jobs PBA is pretty dangerous because if someone is able to schedule jobs on your system, they can leave open a backdoor or ensure a virus downloads itself in case it gets deleted.</p>
<p>So do you now have to schedule jobs in your operating systems? Luckily, Infection Monkey already has these commands in the codebase.</p>
<p><img src="https://lh6.googleusercontent.com/Wc1t9yejLqPPj7VTsIiOB-yIh9N-EVy27EiH9conClOaIA1HAtSpgXlqXrRK0zTqSxK2v1I7Wzw0z94HlAZy8mzfOV0D9sZ-tu5vU1MpfTJi_szhgNGrBjU2v-VRRVfiH0_tsUpI" alt=""></p>
<p>So, all you need to do is fetch commands from a function called `get_commands_to_schedule_jobs`.</p>
<p>Once again, the description of this Unit also shows a manual test to run after writing the code. Just like in the previous Unit, we can play the Unit by copying the command from the Swimm interface and running it on your terminal. You can also request Swimm to tell you the relevant files with the same command.</p>
<p><img src="https://lh3.googleusercontent.com/bMfq0Tlu_TT2BXFJ6z7Bb9SCrN158jAPBO-UKGbhAj2XLqISnxL3c6T_cKXpSGXV-FPlYcgVyQ2R7ejaeFsYM71saNVBIbiIFJ8T3irHqE75aE1TtBp7UORLrR1uAljI3NmkEBZJ" alt=""></p>
<p>This time it tells you that the relevant file is in a module called “infection_monkey” which suggests that whatever we will be doing is going to affect the Monkey (i.e. the virtual intruder simulated by Infection Monkey) itself. This makes sense because you will basically be adding new functionality.</p>
<p>So, once you open the file, you will see a comment that tells you where you need to add your new code. This is something that leaves no place for error.</p>
<p><img src="https://lh4.googleusercontent.com/wD6oSMRb2YH2qY-ZJALKj3FEs10TJO7GaZuU2CFJW2ysPjvYvyPVolFmakq549bFyec4P_hsDNr1iPqpijLwDE6uWEizlQdn9YeJMCMeiQ3BCrd5-8v-ulefx5vfCSaoyouk5EVT" alt=""></p>
<p>Let’s ask Swimm for more hints about how to proceed with coding in this Unit.</p>
<p><img src="https://lh4.googleusercontent.com/ffI32iZ3jXpwLuGRb-EGO9tQyZLRIQASQa5AUFY2tImzdEo8ZVMqoNkg0T0h6iniEx-IfowbVRxNpnUELuWi3eGjBidBtl9dP8BINBHzP5AVCkZ__u0hrW6n1EYw4t8JqaMtHTNX" alt=""></p>
<p>Swimm provides you with two hints. Let’s go ahead with the first one which suggests you check the “Time Stomping” PBA to get an idea about the implementation.</p>
<p><img src="https://lh5.googleusercontent.com/RtASkWQPjlZjjUAdFvzPXiV0Zttvuj7VxpbODATTF1aALEv4B9kKhas61sDZO7ikmID77Bs7jX2EF7n1Du-RD8djCShbTW2EpXZZy3dCyG9svG8OoXaoC_z7lgP49NHSxxgY35Vz" alt=""></p>
<p>We can see here that we are basically fetching Linux and Windows commands from a function called `get_timestomping_commands`. Then you will call the constructor for the parent class with the name of the PBA, the Linux commands, and the Windows commands as arguments.</p>
<p>So, you will do something similar to “schedule jobs” PBA.</p>
<p><img src="https://lh4.googleusercontent.com/HhKuTh0wzVAHddeJHHGY7PYUKSweb0TdHtM3hgd3WPgYVIfNL1bKzRuUsvwbH0RC1ml4wsNeivKW9AxrjUd9CvBF6wNQO0txtFfJJPFcljUrS50Gd5P3jSS8fVBygPubLS3ZMGdk" alt=""></p>
<p>Here, you can see the code fetches the commands from the function given in the description and it calls the constructor of the parent class.</p>
<p>Swimm has given you a second hint that notifies you to remove your PBA by removing the schedule jobs.</p>
<p>For that purpose, you can see a call to the function called `remove_scheduled_jobs`.</p>
<p>You can really walk through each line of the solution and see how building the Unit correctly nudged whoever’s solving it to write each line. So, from lines 13 to 18, that was the first hint telling you the general structure of how to implement post-breach actions in IM that are based on shell commands.</p>
<p>Following the hint shows you an example of how to write that code. Another cool thing pops up when we look at line 16. We can see the code is pulling the name of the PBA from the variable we defined in the previous Unit. The last line is from the second hint.</p>
<p>You may decide to not look at the hints and go blind trying to solve it. In this case, when you mark your unit done in Swimm and then compare it to the actual solution, you’ll find that discrepancy. If you forgot to remove the scheduled jobs, you will find it in the diff. It’s up to you as the Swimmer to choose if you’d rather see hints or not.</p>
<p>Now that you have added the code, let’s run the manual test by following the instructions in the Unit’s description.</p>
<p><img src="https://lh6.googleusercontent.com/h2EUcy5vZxKp9DkINaiSFjQ-5Yv7f_MtnaL5q27cucqc61GrB7xU1OlTH1w5W_1PCKJJE4Pkk1nRdAVlcsDg1EZshdSJvzHqkJS8SlV1_A5icgii59WgGcXCVtVGUX2JJPpR2gZp" alt=""></p>
<p>You can see in the attack report that it successfully scheduled a job using `crontab`. Let’s mark the Unit as done in Swimm with the command `swimm done`. Just like the last step, you will be taken to a page that gives you more information about what changes you’ve just made.</p>
<p><img src="https://lh5.googleusercontent.com/gintBnsEcmxzAzpSPUnZfi8t1657nzb4b0votoNDt9C3sVe6MkR28hl_taR46cOsVwidaJ3imRdeV439FMYmQq6VLxTEe1k6AWR7Ct7bdLSC7SKEj7YdLxL1gjyozdSNewzooDeX" alt=""></p>
<p>This summary guides the person solving the Unit to read other parts of the code. Now that you have made some contributions, you are already more familiar with the lexicon, and manually tested your changes, you now have the context to figure out the code much quicker and improve your productivity when contributing to Infection Monkey!</p>
<p><img src="https://lh5.googleusercontent.com/Ue285WOS8WBBNqmcS6QndVxB1ZHrt2U_CzeKFqxRSqP-ylm-j5nmseJ1L6l-vVNCu2ZOvh68qJGynji0p6iEyOv8Ri5eFfKKi3yV3BH2ONLZ2E7eNccTyWx6Y9rvNo8kG4Z1t9eR" alt=""></p>
<p>Once again, Swimm will let you compare your solution to the original codebase. Now that you named the PBA and implemented it, the next step is to make sure that it actually shows up in the configuration. So, let’s move on to the fourth step, where you will be adding details about your PBA.</p>
<h2>Add Details About Your New PBA</h2>
<p><img src="https://lh6.googleusercontent.com/_eTNZp-OGjYt84lmYqnQZR9_TB2QWd_I7X9T5i9cyLvDdi9vSt-2fdDdFvhdlPkG_REI1Iq9vSKoPzyACek-EqstoIe6FbZxj8wFgIhTPMf_NYUqZpyNKK0rSBiixcwsJ5mZ2bcO" alt=""></p>
<p>This is actually a pretty good example of how learning begets learning. Whenever you are trying to learn something new, you come across new terms, new terminology, and you look it up and research it. The MITRE ATT&amp;CK technique is something you will encounter a lot and you need to be ready for it.</p>
<blockquote>
<p>“The MITRE ATT&amp;CK framework is an open-source knowledge base of attack tactics and techniques which were derived from real-world scenarios. This is something professionals in the cybersecurity industry refer to a lot." - Shreya Malviya</p>
</blockquote>
<p>In this particular example, the “schedule jobs” PBA is related to two MITRE techniques that are shown in the description with their IDs. They basically do what the PBA does - scheduling jobs for Linux and Windows.</p>
<p><img src="https://lh6.googleusercontent.com/3mTHvCgEGmqJY6erSnouIhmtLugxxaCAJfOI56umZVBcgOypbl_12zUMzrtItPzrYFle2ClJwaPV74bK2k7egoJLUZTcGBTXh_QZPFNJlxGdqUBi6fnaY42VA54THouAaQtVzdka" alt=""></p>
<p>Here you can see a short recording of how the finder test should look so that it’s easier to ensure that whatever you’ve done is correct. Now, you …</p></div></div></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://swimm.io/blog/infection-monkey-tutorial-start-contributing-using-swimm/">https://swimm.io/blog/infection-monkey-tutorial-start-contributing-using-swimm/</a></em></p>]]>
            </description>
            <link>https://swimm.io/blog/infection-monkey-tutorial-start-contributing-using-swimm/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24988227</guid>
            <pubDate>Wed, 04 Nov 2020 11:54:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Doubleclicking on the Web (2015)]]>
            </title>
            <description>
<![CDATA[
Score 25 | Comments 18 (<a href="https://news.ycombinator.com/item?id=24987829">thread link</a>) | @Mojah
<br/>
November 4, 2020 | https://ma.ttias.be/double-clicking-on-the-web/ | <a href="https://web.archive.org/web/*/https://ma.ttias.be/double-clicking-on-the-web/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                    <p>Here’s a usability feature for the web: disable double-clicks on links and form submits.</p>
<p>Before you think I’m a complete idiot, allow me to talk some sense into the idea.</p>
<h2 id="the-double-click-outside-the-web">The Double-click Outside The Web</h2>
<p>Everywhere in the Operating System, whether it’s Windows or Mac OSX, the default behaviour to navigate between directories is by double-clicking them. We’re trained to double-click anything.</p>
<p>Want to open an application? Double-click the icon. Want to open an e-mail in your mail client? Double-click the subject. <strong>Double-clicks everywhere.</strong></p>
<p>Except on the web. The web is a single-click place.</p>
<h2 id="double-the-click-twice-the-fun">Double The Click, Twice The Fun</h2>
<p>We <em>know</em> we should only single-click a link. We <em>know</em> we should only click a form submit once. But sometimes, we double-click. Not because we do so intentionally, but because our brains are just hardwired to double-click everything.</p>
<p><strong>For techies like us, a double-click happens by accident.</strong> It’s an automated double-click, one we don’t really think about. One we didn’t mean to do.</p>
<p>For lesser-techies, also know as the <em>common man or woman</em>, double-clicks happen all the time. The user doesn’t have a technical background, so they don’t know the web works with single-clicks. Or perhaps they do, and don’t see the harm in double-clicking.</p>
<p><strong>But default browser behaviour is to accept user input. However foolish it may be.</strong></p>
<p>If you accidentally double-click a form submit, you submit it twice. It’s that simple.</p>
<pre>10.0.1.1 - - [18/Apr/2015:00:37:06 +0400] "POST /index.php HTTP/1.1" 200 0 
10.0.1.1 - - [18/Apr/2015:00:37:07 +0400] "POST /index.php HTTP/1.1" 200 0</pre>
<p>If you double-click a link, it opens twice.</p>
<pre>10.0.1.1 - - [18/Apr/2015:00:37:06 +0400] "GET /index.php HTTP/1.1" 200 9105 
10.0.1.1 - - [18/Apr/2015:00:37:07 +0400] "GET /index.php HTTP/1.1" 200 9104</pre>
<p>The problem is <em>sort of</em> solved with fast servers. If the page loads fast enough, the next page may already be downloading/rendering, so the second click of that double-click is hitting some kind of <em>void</em>, the limbo in between the current and the next page.</p>
<p>For slower servers, that just take more time to generate a response, a double-click would still happen and re-submit or re-open a link.</p>
<h2 id="workarounds">Workarounds</h2>
<p>I recently filed a feature request at <a href="https://www.nucleus.be/en">our</a> devs for a similar problem.</p>
<p>If you <em>accidentally</em> (and we’ve all done this) double-click a form submit, you submit it twice. That means whatever action was requested, is executed by the server twice.</p>
<p>The fix client-side is relatively simple, to disable the form submit button after the first submit was registered. There’s a <a href="http://stackoverflow.com/questions/2830542/prevent-double-submission-of-forms-in-jquery/2830812#2830812">simple jquery snippet</a> that can solve this for you.</p>
<pre>$(document).ready(function(){
    $("form").submit(function(){
        setTimeout(function() {
            $('input').attr('disabled', 'disabled');
            $('a').attr('disabled', 'disabled');
        }, 50);
    })
});
</pre>
<p>Server-side, a fix could be to implement some kind of rate limiting or double-submit protection within a particular timeframe. <strong>Server-side, this is a much harder problem to solve.</strong></p>
<p>It’s 2015, why is this even a thing to consider?</p>
<h2 id="proposed-solution">Proposed Solution</h2>
<p>I can not think of a single reason why something like a form submit should have to be executed twice as a result of a <em>double-click</em>.</p>
<p>For a slow responding server, it’s reasonable for a user to hit the <em>submit</em> again after more than a few seconds have passed and no feedback has been given. Because of the lack of visual feedback that the request is still being processed, the expectation has been raised that the form submit did not work.</p>
<p>So the user submits again, thinking he must have made a mistake the first attempt. If the same form submit has been registered by the browser in less than 2 seconds, surely that must have been a mistake and would count as an <em>accidental double-click</em>?</p>
<p>Why should every web service implement a <em>double-click protection</em>, either client-side or server-side, and reinvent the wheel? Wouldn’t this make for a great browser feature?</p>
<p><strong>What if a double-click is blocked by default, and can be enabled again by setting a new attribute on the form?</strong></p>
<pre>&lt;form action="/something.php" allowmultiplesubmits&gt;
...
&lt;form&gt;
</pre>
<p>Setting the <strong>allowmultiplesubmits</strong> attribute causes the browser to allow multiple submits to the same form in the same page, and by default the browser has some kind of flood/repeat/double-click protection to prevent this.</p>
<p>Maybe I’m over thinking it and this isn’t an issue. But anyone who’s active on the web has, at one point, accidentally double-clicked. And I think we’ve got all the technology available to fix that, once and for all.</p>
                </div></div>]]>
            </description>
            <link>https://ma.ttias.be/double-clicking-on-the-web/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24987829</guid>
            <pubDate>Wed, 04 Nov 2020 10:24:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Introduction to Google Cloud Functions]]>
            </title>
            <description>
<![CDATA[
Score 75 | Comments 47 (<a href="https://news.ycombinator.com/item?id=24987197">thread link</a>) | @adrianancona
<br/>
November 4, 2020 | https://ncona.com/2020/11/introduction-to-google-cloud-functions/ | <a href="https://web.archive.org/web/*/https://ncona.com/2020/11/introduction-to-google-cloud-functions/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>Cloud Functions are Google’s offering for serverless architecture (similar to AWS lambdas).</p>

<h2 id="what-is-serverless">What is serverless?</h2>

<p>Before we look into how to use Cloud Functions, we should understand some things about it.</p>

<p>Code needs servers to run, so <code>serverless</code> doesn’t mean there are no servers, it means that we don’t need to manage those servers ourselves.</p>

<p>In a usual server based architecture, we might create a service and deploy it to a machine. This service will be running in the machine all the time waiting for requests. This has the disadvantage that even if there are no requests, the machine would need to be up, and incurring cost.</p>

<p>On the other hand, if we use Cloud Functions, we write a service and register it with Google. Google will then listen to the endpoint this service cares about and will only start it when there are requests. If it detects that there haven’t been requests for some time, it will stop the service again.</p>

<!--more-->

<p>While Google Compute Engine instances are billed by time, Cloud Functions are billed by execution time. If a Cloud Function is not being executed, then it is not being billed. This sounds very attractive, but there are draw backs, namely:</p>

<ul>
  <li>Running a Compute Engine instance for a full month is most of the time cheaper than having a Cloud Function executing for one month straight. This means that if we need a service to be always doing work, it’s better to get a whole machine for it.</li>
  <li>Cloud Functions need to warm up. If a Cloud Function hasn’t been used for a while, Google will stop the server that was running it. Next time we get a new request, a new server needs to be started, which takes some time. This will make this first request take long (This time varies a lot, but usually less than 4 seconds)</li>
</ul>

<p>For these reasons, serverless shouldn’t be used in all scenarios.</p>

<h2 id="creating-a-cloud-function">Creating a Cloud Function</h2>

<p>To make it easy to work on our Cloud Function, we need a way to run the function from our development machine.</p>

<p>Let’s start by creating a module:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
3
</pre></td><td><pre>mkdir test-functions
cd test-functions
go mod init test.com/functions
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Now, we can create a file for our function:</p>



<p>With this content:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td><pre><span>package</span> <span>functions</span>

<span>import</span> <span>(</span>
	<span>"net/http"</span>
	<span>"fmt"</span>
<span>)</span>

<span>func</span> <span>DoYouLikeTacos</span><span>(</span><span>w</span> <span>http</span><span>.</span><span>ResponseWriter</span><span>,</span> <span>r</span> <span>*</span><span>http</span><span>.</span><span>Request</span><span>)</span> <span>{</span>
	<span>fmt</span><span>.</span><span>Fprint</span><span>(</span><span>w</span><span>,</span> <span>"Of course I like tacos!</span><span>\n</span><span>"</span><span>)</span>
<span>}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To be able to test our functions from our development machine, we need to create a server. Let’s create a file for it:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
</pre></td><td><pre>mkdir cmd
touch cmd/main.go
</pre></td></tr></tbody></table></code></pre></div></div>

<p>And add this content:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td><pre><span>package</span> <span>main</span>

<span>import</span> <span>(</span>
  <span>"log"</span>
  <span>"context"</span>
  <span>"github.com/GoogleCloudPlatform/functions-framework-go/funcframework"</span>
  <span>"test.com/functions"</span>
<span>)</span>

<span>func</span> <span>main</span><span>()</span> <span>{</span>
  <span>ctx</span> <span>:=</span> <span>context</span><span>.</span><span>Background</span><span>()</span>

  <span>// Our function will be executed when a request to /do-you-like-tacos is received</span>
  <span>if</span> <span>err</span> <span>:=</span> <span>funcframework</span><span>.</span><span>RegisterHTTPFunctionContext</span><span>(</span>
      <span>ctx</span><span>,</span> <span>"/do-you-like-tacos"</span><span>,</span> <span>functions</span><span>.</span><span>DoYouLikeTacos</span><span>);</span> <span>err</span> <span>!=</span> <span>nil</span> <span>{</span>
    <span>log</span><span>.</span><span>Fatalf</span><span>(</span><span>"funcframework.RegisterHTTPFunctionContext: %v</span><span>\n</span><span>"</span><span>,</span> <span>err</span><span>)</span>
  <span>}</span>

  <span>// The server will run on port 8080</span>
  <span>port</span> <span>:=</span> <span>"8080"</span>
  <span>if</span> <span>err</span> <span>:=</span> <span>funcframework</span><span>.</span><span>Start</span><span>(</span><span>port</span><span>);</span> <span>err</span> <span>!=</span> <span>nil</span> <span>{</span>
    <span>log</span><span>.</span><span>Fatalf</span><span>(</span><span>"funcframework.Start: %v</span><span>\n</span><span>"</span><span>,</span> <span>err</span><span>)</span>
  <span>}</span>
<span>}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To run the server:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
</pre></td><td><pre>cd cmd
go run main.go
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Once the server is running, we can use curl to test it:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
</pre></td><td><pre>curl localhost:8080/do-you-like-tacos
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The output should be:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
</pre></td><td><pre>Of course I like tacos!
</pre></td></tr></tbody></table></code></pre></div></div>

<p>This example is very simple, but we can have our fucntion do whatever we want.</p>

<p>We can also add more functions by adding more files and updating our <code>main.go</code> server. Let’s create another function just to show it.</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
</pre></td><td><pre>cd ..
touch cerveza.go
</pre></td></tr></tbody></table></code></pre></div></div>

<p>With this content:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td><pre><span>package</span> <span>functions</span>

<span>import</span> <span>(</span>
	<span>"net/http"</span>
	<span>"fmt"</span>
<span>)</span>

<span>func</span> <span>Thirsty</span><span>(</span><span>w</span> <span>http</span><span>.</span><span>ResponseWriter</span><span>,</span> <span>r</span> <span>*</span><span>http</span><span>.</span><span>Request</span><span>)</span> <span>{</span>
	<span>fmt</span><span>.</span><span>Fprint</span><span>(</span><span>w</span><span>,</span> <span>"Cerveza, por favor</span><span>\n</span><span>"</span><span>)</span>
<span>}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>And add this to <code>cmd/main.go</code>:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
3
4
</pre></td><td><pre>  <span>if</span> <span>err</span> <span>:=</span> <span>funcframework</span><span>.</span><span>RegisterHTTPFunctionContext</span><span>(</span>
      <span>ctx</span><span>,</span> <span>"/thirsty"</span><span>,</span> <span>functions</span><span>.</span><span>Thirsty</span><span>);</span> <span>err</span> <span>!=</span> <span>nil</span> <span>{</span>
    <span>log</span><span>.</span><span>Fatalf</span><span>(</span><span>"funcframework.RegisterHTTPFunctionContext: %v</span><span>\n</span><span>"</span><span>,</span> <span>err</span><span>)</span>
  <span>}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Run the server:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
</pre></td><td><pre>cd cmd
go run main.go
</pre></td></tr></tbody></table></code></pre></div></div>

<p>And hit the new url:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
</pre></td><td><pre>curl localhost:8080/thirsty
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="deploying-to-google-cloud">Deploying to Google Cloud</h2>

<p>Once we have our functions ready, we want to make them available to the public by deploying them to Google Cloud.</p>

<p>From the root of our project we can use this command:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
</pre></td><td><pre>gcloud functions deploy DoYouLikeTacos \
    --runtime go113 --trigger-http --allow-unauthenticated
</pre></td></tr></tbody></table></code></pre></div></div>

<p>This will spit out a bunch of information. The most important part is the URL:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
</pre></td><td><pre>httpsTrigger:
  url: https://us-central1-proj-1234567.cloudfunctions.net/DoYouLikeTacos
</pre></td></tr></tbody></table></code></pre></div></div>

<p>We can curl this endpoint, the same way we did for our local endpoint:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
</pre></td><td><pre>curl https://us-central1-proj-1234567.cloudfunctions.net/DoYouLikeTacos
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Let’s take a closer look to the command we used to deploy our function:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
</pre></td><td><pre>gcloud functions deploy DoYouLikeTacos \
    --runtime go113 --trigger-http --allow-unauthenticated
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li><code>DoYouLikeTacos</code> is the name of the function we are deploying. The tool will search the package for a function with that name.</li>
  <li><code>--runtime go113</code> tells google to use Golang 1.13. We can see the available runtimes in the help (<code>gcloud functions deploy --help</code>)</li>
  <li><code>--trigger-http</code> means that an http endpoint will be assigned to the function</li>
  <li><code>--allow-unauthenticated</code> means that the function will be available for everybody without authentication. Note that the function code itself could expect some kind of authentication independently of this flag</li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>This was a quick introduction to Google Cloud Functions. We learned how to create a function, test it locally and deploy it to Google Cloud.</p>

<p>Complete applications can be built using Cloud Functions, so I’ll explore a little more in another article.</p>

  </div></div>]]>
            </description>
            <link>https://ncona.com/2020/11/introduction-to-google-cloud-functions/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24987197</guid>
            <pubDate>Wed, 04 Nov 2020 08:04:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Clean Code – Notes]]>
            </title>
            <description>
<![CDATA[
Score 30 | Comments 5 (<a href="https://news.ycombinator.com/item?id=24986604">thread link</a>) | @wheresvic3
<br/>
November 3, 2020 | https://smalldata.tech/blog/2018/09/16/clean-code-notes | <a href="https://web.archive.org/web/*/https://smalldata.tech/blog/2018/09/16/clean-code-notes">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>
  The following is a list of notes taken on writing clean code, i.e. code that is maintainable and extensible.
</p>
<h5 id="names">Names</h5>
<p>
  Naming is the <i>hardest</i> and the most important part of writing clean code. Names should clearly express intent
  and the assumption here is that everyone involved in the codebase has the same cultural background which is not
  always the case in practice. Some general tips:
  </p><ul>
    <li>Classes should be Nouns, e.g. <code>User</code></li>
    <li>Methods should be verbs, e.g. <code>getById()</code>, <code>save()</code></li>
    <li>No need for prefixes such as <code>m_</code> or <code>str</code> for strongly typed languages</li>
    <li>Pick one word per concept, e.g. <code>fetch</code>, <code>retrieve</code> and <code>get</code> are
      semantically equal</li>
  </ul>

<h5 id="functions">Functions</h5>
<p>
  Functions or methods are the fundamental building blocks of programming. In fact, the internal operation of
  programs normally consists mostly of functions pushing data onto and popping data off the stack as they call each
  other. Sometimes memory needs to be allocated on the heap for data that must survive across function calls.
</p>
<p>
  When a function is called, a <strong>stack frame</strong> is created to support the function's execution. The stack
  frame contains the function's local variables and the arguments passed to the function by its caller. The frame
  also contains housekeeping information that allows the called function (the callee) to return to the caller safely.
  The exact contents and layout of the stack vary by processor architecture and function call convention.
</p>
<div>
  <p><a href="https://smalldata.tech/img/blog/call-stack-layout.svg">
      <img alt="An example of a call stack for the DrawLine function which is called by DrawSquare" src="https://smalldata.tech/img/blog/call-stack-layout.svg">
    </a>
  </p>
  
  <p>
    An example of a call stack for the <code>DrawLine</code> function which is called by <code>DrawSquare</code>.
  </p>
</div>
<p>
  Some general tips on writing functions:
  </p><ul>
    <li>Functions should be small and they should do 1 thing only:
      <ul>
        <li>Only have 1 level of indentation - highly nested functions should be refactored into sub-routines</li>
        <li>
          <strong>No side-effects!</strong>
          <pre>public int sum(int a, int b) {
    int result = a + b;
    resetGui(); // this is untestable and introduces a hidden dependency!
    return result;
}
</pre>
        </li>
      </ul>
    </li>
    <li>Do not return <code>null</code> - caller will need to always check cluttering p code, consider using <i>special
        case</i> return values</li>
    <li>Don't pass <code>null</code> as a parameter value either</li>
    <li>Prefer exceptions for error conditions except in cases were a <code>Nullable</code> or <code>Optional</code>
      type is available</li>
    <li>Should ideally return a value, especially for monadic functions as this allows function chaining</li>
    <li>Fewer arguments are better - the more the arguments, the more the complexity and test cases that need to be
      written</li>
  </ul>

<h5 id="oop">Object Oriented Programming</h5>
<p>
  An important but suble point to note in OOP is that objects hide their data behind abstractions and expose
  functions that operate on that data whereas data structures expose their data and have no meaningful functions.
  Good OOP requires knowing when to use objects and when to use data structures. Consider the following example:
  </p><pre>public class Point {
    public double x;
    public double y;
}

public interface Point {
    double getX();
    double getY();
    void setCartesian(double x, double y);
    double getR();
    double getTheta();
    void setPolar(double r, double theta);
}
</pre>
    <p>
      In the second <code>Point</code> definition the co-ordinate system being used by the implementation is not
      known and need not necessarily be cartesian nor polar!
    </p>
    <p>
      Tips on writing clean OO code:
      </p><ul>
        <li>Classes should be small and follow the Single Responsibility Principle (SRP)</li>
        <li>Classes should have high cohesion, i.e. operate on a small number of variables</li>
        <li>Avoid using boundary interfaces, e.g. instead of returning a <code>Map</code>, wrap it in a class (<code>Sensors</code>)
          to encapsulate the implementation</li>
        <li>Comments should only be used for clarification or amplification - avoid in general and let the code
          do the talking!</li>
        <li>Prefer exceptions to error codes - error codes have the habit of spilling out into the entire
          system</li>
        <li>Use unchecked exceptions to not break encapsulation</li>
      </ul>
    
    <p>
      Finally, procedural code makes it hard to add new data structures because all the functions must change. OO
      code makes it hard to add new functions because all the classes must change. Again, writing clean code
      requires insight as to when to use which style of programming.
    </p>
    <h5 id="tdd">Test Driven Development</h5>
    <p>
      Unit Tests should follow the F.I.R.S.T principle, i.e. they should be Fast, Independent of any external
      dependencies or manual setup, Repeatable, Self-validating (no manual checking verification) and Timely (run
      just before writing production code). Some general tips on writing clean tests:
      </p><ul>
        <li>Tests should be readable above all else and this might mean relaxing certain production code
          restrictions on performance</li>
        <li>Single concept per test</li>
        <li>Create helper methods to simplify complicated setups</li>
        <li>Convert multiple asserts into a single assert via a state pattern</li>
      </ul>
    

    <p>
      The three laws of TDD:
      </p><dl>
        <dt>First law</dt>
        <dd>You may not write production code until you have written a failing test.</dd><dt>Second law</dt>
        <dd>You may not write more of a test than is sufficient to fail, and not compiling is failing.</dd>
        <dt>Third law</dt>
        <dd>You may not write more production code than is sufficient to pass the currently failing test.</dd>
      </dl>
    

    <div>
      <p><a href="https://smalldata.tech/img/blog/011-clean-code.jpg">
        <img alt="" src="https://smalldata.tech/img/blog/011-clean-code.jpg">
      </a></p><p>
        Not quite TDD.
      </p>
    </div>

    <h5 id="system-design">System Design</h5>
    <ul>
        <li>Classes should follow the open-closed principle - open for extension but closed for modification.
          Consider the following example where we write an <code>AreaCalculator</code> which calculates the
          total area of a collection of rectangles.
          <pre>public class Rectangle {
    public double width;
    public double height;
}

public class AreaCalculator {

    public double calculateArea(Collection<rectangle> rectangles) {
        double result = 0;
        for (Rectangle r : rectangles) {
            result += r.width * r.height;
        }
        return result;
    }
}
</rectangle></pre> We would now like to extend this function to calculate the area of circles as well. Our new function now looks
          as follows:
          <pre>public abstract class Shape { }

public class Rectangle extends Shape {
    public double width;
    public double height;
}

public class Circle extends Shape {
    public double radius;
}

public class AreaCalculator {

    public double calculateArea(Collection<shape> shapes) {
        double result = 0;
        for (Shape s : shapes) {
            if (s instanceof Rectangle) {
                Rectangle r = (Rectangle) s;
                result += r.width * r.height;
            } else {
                Circle c = (Circle) s;
                result += c.radius * c.radius * Math.PI;
            }
        }
        return result;
    }
}
</shape></pre> Extending this further to calculate the area of triangles now requires another modification to the <code>calculateArea</code>
          method, i.e. it is not <strong>open for extension</strong>. We can change this by introducing an
          <code>area</code> method on the <code>Shape</code> data structure. Our code now looks like the
          following:
          <pre>public abstract class Shape {
    abstract double area();
}

public class Rectangle extends Shape {
    public double width;
    public double height;

    @Override
    public double area() {
        return width * height;
    }
}

public class Circle extends Shape {
    public double radius;

    @Override
    public double area() {
        return radius * radius * Math.PI;
    }
}

public class AreaCalculator {

    public double calculateArea(Collection<shape> shapes) {
        double result = 0;
        for (Shape s : shapes) {
            result += s.area(); // note the simplicity
        }
        return result;
    }
}
</shape></pre>
        </li>
        <li>Dependency Inversion Principle - depend upon abstractions and interfaces, not concrete
          implementations</li>
        <li>When building large software systems, try to avoid doing a big design up front - use a dependency
          injection container to separate cross-cutting concers like transactions, logging, etc. from
          business logic</li>
      </ul>
    
    <h5 id="references">References</h5>
    <ul>
        <li><a href="https://smalldata.tech/api/to/f838bf36866ac96dc70a088a5d559fb0">Clean Code - A handbook on agile software
            craftmanship</a></li>
        <li><a href="https://smalldata.tech/api/to/d0ed22ebb2bd98aa226ab833705aaa85">Explanation of the stack</a></li>
        <li><a href="https://smalldata.tech/api/to/779794f2469765d811744e656c1e09e2">Simple example of the Open Closed Principle</a></li>
      </ul>
    
<p><a href="https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fsmalldata.tech%2Fblog%2F2018%2F09%2F16%2Fclean-code-notes&amp;t=Clean%20Code%20-%20Notes">HackerNews submission / discussion</a></p></div></div>]]>
            </description>
            <link>https://smalldata.tech/blog/2018/09/16/clean-code-notes</link>
            <guid isPermaLink="false">hacker-news-small-sites-24986604</guid>
            <pubDate>Wed, 04 Nov 2020 05:35:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[All systems go for UK’s £55M fusion energy experiment]]>
            </title>
            <description>
<![CDATA[
Score 247 | Comments 76 (<a href="https://news.ycombinator.com/item?id=24986528">thread link</a>) | @danboarder
<br/>
November 3, 2020 | https://ccfe.ukaea.uk/all-systems-go-for-uks-55m-fusion-energy-experiment/ | <a href="https://web.archive.org/web/*/https://ccfe.ukaea.uk/all-systems-go-for-uks-55m-fusion-energy-experiment/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
			
						
			<div>
			
			
<article id="post-14051">
  
  <div>

		<div data-hide-featured-media="0">
      
        <div><p>Clean energy from fusion is a step closer with the launch of the MAST Upgrade tokamak.</p>
<div id="attachment_14062"><p><img aria-describedby="caption-attachment-14062" src="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgOTYwIDY0MCIgd2lkdGg9Ijk2MCIgaGVpZ2h0PSI2NDAiIGRhdGEtdT0iaHR0cHMlM0ElMkYlMkZjY2ZlLnVrYWVhLnVrJTJGd3AtY29udGVudCUyRnVwbG9hZHMlMkYyMDIwJTJGMTAlMkZnb3YudWtfLmpwZyIgZGF0YS13PSI5NjAiIGRhdGEtaD0iNjQwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==" data-spai="1" alt="MAST Upgrade first plasma" width="400" height="267" sizes="(max-width: 400px) 100vw, 400px"></p><p id="caption-attachment-14062">MAST Upgrade first plasma</p></div>
<p>For the first time, after a seven-year build, UKAEA’s £55M-machine, labelled <a href="https://ccfe.ukaea.uk/research/mast-upgrade/">Mega Amp Spherical Tokamak (MAST) Upgrade</a>, has achieved “first plasma” – where all the essential components work together simultaneously.</p>
<p>The project at Culham Centre for Fusion Energy was funded by the Engineering &amp; Physical Sciences Research Council, part of UK Research &amp; Innovation and the Department for Business, Energy &amp; Industrial Strategy.</p>
<p>Fusion energy offers the potential of an abundant, inherently safe low-carbon electricity supply (the raw materials are found in seawater and the Earth’s crust). It involves fusing hydrogen particles in a hot gas known as a ‘plasma’ to unlock large amounts of energy.</p>
<p>Operating fusion technologies requires a careful balancing act of controlling extreme heat, gas and powerful magnetic fields, amongst other complex systems.</p>
<h3>Super-X factor</h3>
<p>One of the biggest challenges in fusion research has been to extract the amount of excess heat from the plasma. UKAEA’s scientists now plan to test a new exhaust system called the ‘Super-X divertor’ at MAST Upgrade.</p>
<p>This system is designed to channel plasma out of the machine at temperatures low enough for its materials to withstand – meaning that components can last much longer. The approximate tenfold reduction in heat arriving at the internal surfaces of the machine has the potential to be a game-changer for the long-term viability of future fusion power stations.</p>
<h3>A step towards fusion power</h3>
<p>MAST Upgrade will be the forerunner of the UK’s prototype fusion power plant, <a href="https://ccfe.ukaea.uk/research/step/">Spherical Tokamak for Energy Production (“STEP”)</a>, due for completion by 2040.</p>
<p>STEP – which UKAEA is designing in an initial £220 million programme funded by the UK Government – will be based on MAST Upgrade’s ‘spherical tokamak’ fusion concept. The spherical tokamak could offer a route to a compact fusion power plant. The success of MAST Upgrade is another step along the way to designing future fusion power facilities, which could have an important role as part of a future portfolio of low-carbon energy.</p>
<p>MAST Upgrade will also aid preparations for <a href="https://www.iter.org/" target="_blank" rel="noopener noreferrer">ITER</a> – the world’s largest science megaproject, now being built in the South of France, which intends to demonstrate fusion power on an industrial scale.</p>
<p><iframe title="Shaping fusion power for the future - Mega Amp Spherical Tokamak Upgrade" width="1080" height="608" src="https://www.youtube.com/embed/PVUnOZwrSx8?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>
<p>UK Science Minister, Amanda Solloway, said: “We want the UK to be a world leader in fusion energy and to capitalise on its amazing potential as a clean energy source that could last for hundreds of years.</p>
<p>“Backed by £55 million of government funding, powering up the MAST Upgrade device is a landmark moment for this national fusion experiment and takes us another step closer towards our goal of building the UK’s first fusion power plant by 2040.”</p>
<p>Commenting on the achievement of first plasma, UKAEA CEO, Professor Ian Chapman, said:</p>
<p>“MAST Upgrade will take us closer to delivering sustainable, clean fusion energy. This experiment will break new ground and test technology that has never been tried before. It ensures the UK is in the premier league of countries working on fusion – and will be vital in achieving UKAEA’s goal of building the STEP fusion power plant.”</p>
<p>Video of the first plasma on MAST Upgrade:</p>

</div>        
      </div><!--/post-content-->
      
    </div><!--/inner-wrap-->
    
</article>
		</div><!--/post-area-->
			
							
		</div></div>]]>
            </description>
            <link>https://ccfe.ukaea.uk/all-systems-go-for-uks-55m-fusion-energy-experiment/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24986528</guid>
            <pubDate>Wed, 04 Nov 2020 05:01:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Three Months of Go from a Haskeller’s perspective (2016)]]>
            </title>
            <description>
<![CDATA[
Score 175 | Comments 156 (<a href="https://news.ycombinator.com/item?id=24986132">thread link</a>) | @amzans
<br/>
November 3, 2020 | https://memo.barrucadu.co.uk/three-months-of-go.html | <a href="https://web.archive.org/web/*/https://memo.barrucadu.co.uk/three-months-of-go.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemscope="" itemtype="http://schema.org/BlogPosting" itemprop="mainEntity">
      

      <article>
        
<header>
  
</header>

<section itemprop="articleBody">
<p>This summer I’ve been interning at <a href="https://pusher.com/">Pusher</a>, and have been writing a lot of Go. It’s been a bit of a change coming from a Haskell background, so I decided to write up my thoughts now, at the end.</p>
<h2 id="the-good">The Good</h2>
<h3 id="incredibly-easy-to-pick-up">Incredibly easy to pick up</h3>
<p>There’s not a lot to Go, it’s quite a small language. I had never written a line of it before June, and now I’ve written about 30,000. It’s very easy to get started and become productive.</p>
<p>Haskell, on the other hand, is notorious for being hard to learn (<em>cough</em> monad tutorials <em>cough</em>). People often find it really hard to take the step from evaluating pure mathematical expressions to writing actual programs. I experienced no such disconnect in Go.</p>
<h3 id="garbage-collector-keeps-getting-better-and-better">Garbage collector keeps getting better and better</h3>
<p>Pusher previously tried to use Haskell for the project I was working on, but eventually had to give up due to unpredictable latency caused by garbage collection pauses. GHC’s garbage collector is <a href="https://blog.pusher.com/latency-working-set-ghc-gc-pick-two/">designed for throughput, not latency</a>. It is a generational copying collector, which means that pause times are proportional to the amount of live data in the heap. To make matters worse, it’s also stop-the-world.</p>
<p><a href="https://blog.golang.org/go15gc">Go’s garbage collector</a> is a concurrent mark-sweep with very short stop-the-world pauses, and it just seems to <a href="https://golang.org/doc/go1.7#performance">keep getting better</a>. This is definitely a good thing for a garbage collected language. We did have some issues with unacceptable latencies, but were able to work them all out. No such luck with the Haskell project.</p>
<h3 id="style-wars-are-a-thing-of-the-past">Style wars are a thing of the past</h3>
<p>Say what you like about <code>gofmt</code>, but it makes arguments over code style almost impossible. Just run it on save, and your code will always be consistently formatted.</p>
<p>I do find it a little strange that <code>gofmt</code> has been completely accepted, whereas Python’s significant whitespace (which is there for exactly the same reason: enforcing readable code) has been much more contentious across the programming community.</p>
<h2 id="the-neutral">The Neutral</h2>
<h3 id="code-generation-seems-to-be-the-accepted-solution-to-a-lot-of-problems">Code generation seems to be the accepted solution to a lot of problems</h3>
<p>I am not a huge fan of code generation (and I say this as <a href="https://blog.pusher.com/go-interface-fuzzer/">the author of a code generation tool</a>). I think it can do good, but it can also obscure what’s actually going on. In every discussion on Go generics, someone will come along and say you can add generics with code generation: that’s true, but at the cost of introducing additional, nonstandard, syntax.</p>
<p>I suspect the strong culture of code generation is largely because it lets you work around the flaws of the language.</p>
<h3 id="strict-not-lazy-evaluation">Strict, not lazy, evaluation</h3>
<p>Strict evaluation is typically better for performance than lazy evaluation (thunks cause allocation, so you’re gambling that <a href="https://www.barrucadu.co.uk/posts/2016-02-12-strict-vs-lazy.html">the computation saved offsets the memory cost</a>), but it does make things less composable. There have been a couple of times where I’ve gone to split up a function, only to realise that doing so would require allocating a data structure in memory which before was not needed.</p>
<p>I could trust the compiler to inline things for me, and so optimise away the additional allocations, but in a lazy language you just don’t have that issue at all.</p>
<h3 id="the-standard-library-is-not-so-great">The standard library is not so great</h3>
<p>If you know me in person, it might seem a little odd that I specifically comment on this. Normally I am all for languages having a small, really well-written, stdlib and everything else provided through libraries. I am picking on Go here a bit because the standard library seems to get a lot of praise, but I was unimpressed.</p>
<p>Parts of it are good, a lot of it is mediocre, and some of it is downright bad (like the <a href="https://golang.org/pkg/go/ast/">go/ast</a> package documentation). It seems a lot of Go’s use is in webdev, so perhaps those bits of the stdlib (which I haven’t touched at all) are consistently good.</p>
<h2 id="the-bad">The Bad</h2>
<p>I also agree with this Quora answer by Tikhon Jelvis to <a href="https://www.quora.com/Do-you-feel-that-golang-is-ugly">do you feel that golang is ugly?</a>, so have a look at that once you’ve read this section.</p>
<h3 id="a-culture-of-backwards-compatibility-at-all-costs">A culture of “backwards compatibility at all costs”</h3>
<p>In Go, you import packages by URL. If the URL points to, say, GitHub, then <code>go get</code> downloads HEAD of master and uses that. There is no way to specify a version, unless you have separate URLs for each version of your library.</p>
<p>This is just insane.</p>
<p>Go has a very strong culture of backwards compatibility, which I think is largely due to this. Even if you have a flaw in the API of your library, you can’t actually <em>fix</em> it because that would break all of your reverse-dependencies, unless they do vendoring, or pin to a specific commit.</p>
<p>Coming from the Haskell world, where the attitude is far more towards correctness than compatibility, this was probably the biggest culture shock for me. Things break backwards compatibility in Haskell, and the users just update their code because they <em>know</em> the library author did it for a reason. In Go, it just doesn’t happen <em>at all</em>.</p>
<h3 id="the-type-system-is-really-weak">The type system is really weak</h3>
<p>A common mantra in Haskell is “make illegal states unrepresentable,” which is great. If you’ve never come across it before it means to <em>choose your types such that an illegal value is a static error</em>. Want to avoid nulls? Use an option type. Want to ensure a list has at least one element? Use a nonempty list type. Use proper enums, not just ints. etc etc</p>
<p>In Go you just can’t do that, the type system isn’t strong enough. So a lot of things which are (or can be) a <em>compile-time</em> error in Haskell are a <em>runtime</em> error in Go, which is just worse.</p>
<p>Let’s pick on some specifics:</p>
<ul>
<li><p><strong>No generics</strong></p>
<p>Want to write a tree where every element is statically <em>guaranteed</em> to be the same type? Well, have fun implementing a “uinttree”, an “inttree”, a “stringtree”, and so on. You can’t just implement a generic tree.</p>
<p>But Go <em>does</em> have generics, for the built-in types. Arrays, channels, maps, and slices all have generic type parameters. So it seems that the Go developers want generics, but they don’t want to bother implementing it properly, so it remains a special case for a few things in the compiler.</p></li>
<li><p><strong>No sum types</strong></p>
<p>The way in Go to handle possibly-failing functions is to have multiple return values: an actual result, and an error. If the error is <code>nil</code>, then the actual result is sensible; otherwise the actual result is meaningless.</p>
<p>This means you can forget to check the error and use a bogus result and, because there are no compiler warnings (another wtf), you will know nothing of this until things fail at runtime.</p>
<p>With a sum type, like <code>Either error result</code>, that just can’t happen.</p></li>
<li><p><strong>No separation of pure code from effectful code</strong></p>
<p>It is very nice to know, just by looking at the type of a function, that it <em>cannot</em> perform any side-effects. Go’s type system doesn’t do that.</p></li>
</ul>
<h3 id="the-tooling-is-bad">The tooling is bad</h3>
<p>Haskell gets a lot of criticism for bad tooling, but I think it’s worlds ahead of Go in some cases.</p>
<ul>
<li><p><strong>Godoc makes it really difficult to write good documentation</strong></p>
<p>Godoc groups bindings by type, and then sorts alphabetically. Code is not written like that, code is written with related functions in proximity to each other. The source order is <em>almost always</em> better than how godoc sorts things.</p>
<p>Also, <a href="https://github.com/golang/go/issues/7873">godoc doesn’t even support lists</a>:</p>
<blockquote>
<p>Previous proposals similar to this have been rejected on grounds that it’s a slippery slope from this to Markdown or worse.</p>
</blockquote>
<p>I think that comment is particularly discouraging. Because the developers don’t like Markdown (and similar languages), they refuse to add even the most basic of formatting to godoc.</p></li>
<li><p><strong>There is nothing like GHC’s heap profiling</strong></p>
<p>Go has a snapshot-based memory profiler. You can take a snapshot at a point in time, and see which functions and types are taking up the heap space. However, there is <a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/profiling.html#profiling-memory-usage">nothing like this</a>.</p>
<p>Being able to see not only a snapshot, but also how things have changed over time, is incredibly useful for spotting memory leaks. If all you have is a snapshot, all you can really say is “well, the number of allocated <code>Foo</code>s looks a bit high, is that right?” With a graph you can say “the number of allocated <code>Foo</code>s is increasing when it shouldn’t be.”</p></li>
<li><p><strong>There is (was?) nothing like ThreadScope</strong></p>
<p><a href="https://wiki.haskell.org/ThreadScope">ThreadScope</a> is a tool for profiling performance of concurrent Haskell programs. It shows which Haskell threads are running on which OS threads, when garbage collection happens, and a bunch of other information.</p>
<p>If things are slower than expected, it’s great: you can see <em>exactly</em> how things are executing. Go doesn’t <em>currently</em> have anything like it, although towards the end of Dave Cheney’s <strong>Seven ways to profile Go applications</strong> talk at <a href="http://golanguk.com/">GolangUK</a>, he did whip out something which looked rather like ThreadScope (sadly, a video isn’t up at the time of writing, that I can see).</p></li>
</ul>
<h3 id="zero-values-are-almost-never-what-you-want">Zero values are almost never what you want</h3>
<p>Go avoids the issue of uninitialised memory by having “zero values”. If you declare a variable of type <code>int</code>, but don’t give it a value, it gets the value 0. Simple.</p>
<p>Except that that’s almost never what you want.</p>
<p>What is a sensible default value for a type? Well, it depends on what you’re using it for! Sometimes there isn’t a sensible default, and not initialising a value should be an error. You can’t define a zero value for your own types, so you’re kind of stuck.</p>
<p>Zero values caused so many problems over the summer, because everything would <em>appear</em> to be fine, then it suddenly breaks because the zero value wasn’t sensible for its context of use. Perhaps it’s an unrelated change that causes things to break (like a struct getting an extra field).</p>
<p>I would much rather:</p>
<ol type="1">
<li>Drop the syntax for declaring a variable without giving it a value.</li>
<li>Make it an error to not initialise a struct field.</li>
</ol>
<h3 id="lots-of-boilerplate">Lots of boilerplate</h3>
<p>The cause of the lots of code generation, I feel.</p>
<ul>
<li><p>Because you have to check error values, if you want to perform a sequence of possibly-erroring computations, where the successful result of one feeds into the next, there is a lot of typing. In Haskell, you’d just use the <code>Either</code> monad.</p></li>
<li><p>If you want to sort a slice, because there are no generics, you need to wrap the slice in another type and implement three methods on that type. So that’s four lines of code to sort a slice of uints, four lines to sort a slice of uint8s, …</p></li></ul></section></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://memo.barrucadu.co.uk/three-months-of-go.html">https://memo.barrucadu.co.uk/three-months-of-go.html</a></em></p>]]>
            </description>
            <link>https://memo.barrucadu.co.uk/three-months-of-go.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24986132</guid>
            <pubDate>Wed, 04 Nov 2020 02:33:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Modern Programming Glossary]]>
            </title>
            <description>
<![CDATA[
Score 24 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24984318">thread link</a>) | @elierotenberg
<br/>
November 3, 2020 | https://elie.rotenberg.io/b/p/modern-programming-glossary | <a href="https://web.archive.org/web/*/https://elie.rotenberg.io/b/p/modern-programming-glossary">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><i>Disclaimer: I spent a LOT of time browsing Github, and read a lot of READMEs. This post is a satire, and many great repos / landing pages feature some of the following idioms. I don't mean to offend dedicated maintainers &amp; docs writers, however funny I find dev-targeted marketing tropes.</i></p><p><i><a target="_blank" rel="noopener noreferrer" href="https://github.com/elierotenberg/rotenberg.io/blob/master/posts/modern-programming-glossary.md">Suggestions welcome!</a></i></p><h2><a id="table-of-contents" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#table-of-contents">Table of contents</a></h2><ul><li><a href="#accessible">Accessible</a></li><li><a href="#battle-tested">Battle-tested</a></li><li><a href="#blazingly-fast">Blazingly fast</a></li><li><a href="#bloated">Bloated</a></li><li><a href="#bleeding-edge">Bleeding edge</a></li><li><a href="#cloud-native">Cloud-native</a></li><li><a href="#cloud-ready">Cloud-ready</a></li><li><a href="#configurable">Configurable</a></li><li><a href="#cross-plaform">Cross-plaform</a></li><li><a href="#customizable">Customizable</a></li><li><a href="#entreprise-level">Entreprise-level</a></li><li><a href="#legacy-code">Legacy code</a></li><li><a href="#lightweight">Lightweight</a></li><li><a href="#mobile-first">Mobile-first</a></li><li><a href="#modern">Modern</a></li><li><a href="#modular">Modular</a></li><li><a href="#open-standards">Open standards</a></li><li><a href="#privacy-focused">Privacy-focused</a></li><li><a href="#production-ready">Production-ready</a></li><li><a href="#progressive-web-app">Progressive web app</a></li><li><a href="#responsive">Responsive</a></li><li><a href="#robust">Robust</a></li><li><a href="#scalable">Scalable</a></li><li><a href="#secure">Secure</a></li><li><a href="#serverless">Serverless</a></li><li><a href="#tiny">Tiny</a></li><li><a href="#well-tested">Well-tested</a></li><li><a href="#unified">Unified</a></li><li><a href="#typesafe">Typesafe</a></li><li><a href="#zero-dependencies">Zero-dependencies</a></li></ul><h2><a id="accessible" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#accessible">Accessible</a></h2><p><code>alt</code> attributes on <code>img</code> are encouraged. Some of our components allow <code>aria</code> attributes.</p><p><i>See also: <a href="#responsive">responsive</a>, <a href="#mobile-first">mobile-first</a></i></p><h2><a id="battle-tested" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#battle-tested">Battle-tested</a></h2><p>We used it for the docs website of the project and we haven't received any complains except for browers other than latest Chrome.</p><p><i>See also: <a href="#production-ready">production-ready</a>, <a href="#well-tested">well-tested</a>, <a href="#modern">modern</a></i></p><h2><a id="blazingly-fast" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#blazingly-fast">Blazingly fast</a></h2><p>Fast-enough on our latest-gen Macbook Pros and on the adhoc microbenchmark we have massaged into being faster than <em>&lt;similar project&gt;</em>. We don't support edge cases though.</p><p><i>See also: <a href="#modern">modern</a>, <a href="#lightweight">lightweight</a></i></p><h2><a id="bloated" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#bloated">Bloated</a></h2><p>Handles edge cases we don't.</p><p><i>See also: <a href="#modern">modern</a>, <a href="#lightweight">lightweight</a>, <a href="#tiny">tiny</a></i></p><h2><a id="bleeding-edge" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#bleeding-edge">Bleeding edge</a></h2><p>Only works in latest Chrome with experimental flags enabled and a custom <code>babel</code> plugin. Expect breaking changes without notice every 1-2 months.</p><p><i>See also: <a href="#modern">modern</a>, <a href="#legacy-code">legacy code</a></i></p><h2><a id="cloud-native" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#cloud-native">Cloud-native</a></h2><p>We have written a <code>docker-compose.yml</code> file and it works on AWS. You need to pass secrets as environment variables.</p><p><i>See also: <a href="#cloud-ready">cloud-ready</a>, <a href="#scalable">scalable</a></i></p><h2><a id="cloud-ready" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#cloud-ready">Cloud-ready</a></h2><p>We provide a <code>Dockerfile</code>.</p><p><i>See also: <a href="#cloud-native">cloud-native</a>, <a href="#scalable">scalable</a></i></p><h2><a id="configurable" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#configurable">Configurable</a></h2><p>You will need to copy/paste a subfolder from our <code>examples</code> folder to run it.</p><p><i>See also: <a href="#modular">modular</a></i></p><h2><a id="cross-plaform" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#cross-plaform">Cross-plaform</a></h2><p>Laggy on all Web, Android, iOS and Electron. All versions include 20Mb of Node API polyfills.</p><p><i>See also: <a href="#modern">modern</a>, <a href="#progressive-web-app">progressive web app</a></i></p><h2><a id="customizable" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#customizable">Customizable</a></h2><p>Our JSON configuration interpreter is Turing-complete.</p><p><i>See also: <a href="#configurable">configurable</a>, <a href="#modular">modular</a></i></p><h2><a id="entreprise-level" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#entreprise-level">Entreprise-level</a></h2><p>We provide paid support &amp; services.</p><p><i>See also: <a href="#cloud-native">cloud-native</a></i></p><h2><a id="legacy-code" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#legacy-code">Legacy code</a></h2><p>Code not written by us less than 3 month ago.</p><p><i>See also: <a href="#modern">modern</a>, <a href="#bleeding-edge">bleeding-edge</a></i></p><h2><a id="lightweight" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#lightweight">Lightweight</a></h2><p>With 100Gbps network speed, it takes no more than several seconds to download in NA.</p><p><i>See also: <a href="#tiny">tiny</a>, <a href="#modern">modern</a>, <a href="#blazingly-fast">blazingly-fast</a></i></p><h2><a id="mobile-first" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#mobile-first">Mobile-first</a></h2><p>We have copy-pasted <code>&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;</code> and it works on our Macbook Pros in latest Chrome emulating iPhone X.</p><p><i>See also: <a href="#mobile-first">mobile-first</a></i></p><h2><a id="modern" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#modern">Modern</a></h2><p>Written in a language we are familiar with, using our own linting conventions. Only works on latest Chrome. Expect breaking changes every 2-3 months.</p><p><i>See also: <a href="#bleeding-edge">bleeding edge</a>, <a href="#legacy-code">legacy code</a></i></p><h2><a id="modular" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#modular">Modular</a></h2><p>Code is spread over 10 different tighly-coupled packages. We expose a <code>plugin</code> configuration option that only accepts our own plugins. Expect breaking plugin API changes every 2-3 months.</p><p><i>See also: <a href="#modern">modern</a>, <a href="#bleeding-edge">bleeding edge</a></i></p><h2><a id="open-standards" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#open-standards">Open standards</a></h2><p>We published the source code of our parser and wrote a README file that looks like an RFC.</p><p><i>See also: <a href="#modular">modular</a></i></p><h2><a id="privacy-focused" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#privacy-focused">Privacy-focused</a></h2><p>You may opt-out of automated backdoor analytics in both your config file and environment variables, and you must do so again every time you update.</p><p><i>See also: <a href="#secure">secure</a></i></p><h2><a id="production-ready" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#production-ready">Production-ready</a></h2><p>Not yet used in production.</p><p><i>See also: <a href="#enterprise-level">entreprise-level</a>, <a href="#modern">modern</a>, <a href="#well-tested">well-tested</a>, <a href="#battle-tested">battle-tested</a></i></p><h2><a id="progressive-web-app" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#progressive-web-app">Progressive web app</a></h2><p>We display a spinner while the 10Mb bundle is downloading.</p><p><i>See also: <a href="#responsive">responsive</a>, <a href="#lightweight">lightweight</a></i></p><h2><a id="responsive" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#responsive">Responsive</a></h2><p>We use <code>display: flex</code> instead of <code>display: block</code> and we have replaced <code>16px</code> with <code>1em</code>.</p><p><i>See also: <a href="#accessible">accessible</a>, <a href="#mobile-first">mobile-first</a></i></p><h2><a id="robust" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#robust">Robust</a></h2><p>It works on our machines.</p><p><i>See also: <a href="#well-tested">well-tested</a>, <a href="#battle-tested">battled-tested</a>, <a href="#production-ready">production-ready</a>, <a href="#enterprise-level">entreprise-level</a></i></p><h2><a id="scalable" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#scalable">Scalable</a></h2><p>You need a Kubernetes cluster with at least 3 nodes to serve your blog. We also provide paid hosting, by the way.</p><p><i>See also: <a href="#enterprise-level">enterprise-level</a>, <a href="#cloud-native">cloud-native</a>, <a href="#cloud-ready">cloud-ready</a></i></p><h2><a id="secure" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#secure">Secure</a></h2><p>We only use <code>eval</code> sparingly and we embed a 10Mb third party HTML sanitizer.</p><p><i>See also: <a href="#enterprise-level">entreprise-level</a>, <a href="#typesafe">typesafe</a></i></p><h2><a id="serverless" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#serverless">Serverless</a></h2><p>You need an AWS server to run it.</p><p><i>See also: <a href="#scalable">scalable</a>, <a href="#cloud-native">cloud-native</a>, <a href="#cloud-ready">cloud-ready</a></i></p><h2><a id="tiny" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#tiny">Tiny</a></h2><p>All code is inlined in a single 1k LOC file.</p><p><i>See also: <a href="#lightweight">lightweight</a>, <a href="#zero-dependencies">zero-dependencies</a></i></p><h2><a id="well-tested" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#well-tested">Well-tested</a></h2><p>We have written some tests and have more than 50% code coverage.</p><p><i>See also: <a href="#battle-tested">battle-tested</a>, <a href="#robust">robust</a>, <a href="#production-ready">production-ready</a></i></p><h2><a id="unified" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#unified">Unified</a></h2><p><a target="_blank" rel="noopener noreferrer" href="https://xkcd.com/927"><img src="https://imgs.xkcd.com/comics/standards.png" alt="Standards"></a></p><p><i>See also: <a href="#open-standards">open standards</a></i></p><h2><a id="typesafe" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#typesafe">Typesafe</a></h2><p>We have prefixed all occurences of <code>any</code> with <code>// eslint-ignore-next-line</code>.</p><p><i>See also: <a href="#secure">secure</a></i></p><h2><a id="zero-dependencies" href="https://elie.rotenberg.io/b/p/modern-programming-glossary#zero-dependencies">Zero-dependencies</a></h2><p>Our dependencies are embeded in a <code>vendor</code> folder, and/or we have custom implementations of common functions that don't support edge cases, most of which are copy/pasted from StackOverflow without attribution.</p><p><i>See also: <a href="#tiny">tiny</a>, <a href="#lightweight">lightweight</a>, <a href="#modular">modular</a>, <a href="#modern">modern</a></i></p></div></div>]]>
            </description>
            <link>https://elie.rotenberg.io/b/p/modern-programming-glossary</link>
            <guid isPermaLink="false">hacker-news-small-sites-24984318</guid>
            <pubDate>Tue, 03 Nov 2020 21:41:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Bevy 0.3: game engine built in Rust]]>
            </title>
            <description>
<![CDATA[
Score 240 | Comments 54 (<a href="https://news.ycombinator.com/item?id=24983956">thread link</a>) | @_cart
<br/>
November 3, 2020 | https://bevyengine.org/news/bevy-0-3/ | <a href="https://web.archive.org/web/*/https://bevyengine.org/news/bevy-0-3/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p><img src="https://bevyengine.org/news/bevy-0-3/sheep_game.png"></p>
      
    
  </div><div><p>A little over a month after releasing Bevy 0.2, and thanks to <strong>59</strong> contributors, <strong>122</strong> pull requests, and our <a href="https://github.com/sponsors/cart"><strong>generous sponsors</strong></a>, I'm happy to announce the <strong>Bevy 0.3</strong> release on <a href="https://crates.io/crates/bevy">crates.io</a>!</p>
<p>For those who don't know, Bevy is a refreshingly simple data-driven game engine built in Rust. You can check out <a href="https://bevyengine.org/learn/book/getting-started/">Quick Start Guide</a> to get started. Bevy is also free and open source forever! You can grab the full <a href="https://github.com/bevyengine/bevy">source code</a> on GitHub.</p>
<p>Here are some of the highlights from this release:</p>
<h2 id="initial-android-support">Initial Android Support</h2>

<p>You can try out the <a href="https://github.com/bevyengine/bevy/tree/master/examples/android">Bevy Android example</a> by following the <a href="https://github.com/bevyengine/bevy/blob/master/examples/README.md#android">instructions here</a>. While many things work, please note that this is <em>very hot</em> off the presses. Some features will work and others probably won't. Now is a great time to dive in and help us close the gaps!</p>
<p><img src="https://bevyengine.org/news/bevy-0-3/android.png" alt="android"></p>
<p>This was a massive group effort that spanned multiple projects:</p>
<ul>
<li>Bevy: rewrote bevy-glsl-to-spirv to support android / static libraries (@PrototypeNM1, @enfipy)</li>
<li>Bevy: <code>bevy_asset</code> backend using Android Asset Manager (@enfipy)</li>
<li>Bevy: Touch support (@naithar)</li>
<li>Bevy: Texture format fix (@enfipy)</li>
<li>Bevy: UI touch fixes, touch force, and android example (@enfipy)</li>
<li>Cpal: android audio support (@endragor) </li>
<li>android-ndk-rs / cargo-apk: fix to support Bevy project structure (@PrototypeNM1)</li>
</ul>
<h2 id="initial-ios-support">Initial iOS Support</h2>
<p>authors: @simlay, @MichaelHills, @Dash-L, @naithar</p>
<p>Bevy can now run on iOS!</p>
<p><img src="https://bevyengine.org/news/bevy-0-3/ios.png"></p><p>You can try out the <a href="https://github.com/bevyengine/bevy/tree/master/examples/ios">Bevy iOS example</a> by following the <a href="https://github.com/bevyengine/bevy/tree/master/examples#ios">instructions here</a>. This one is also hot off the presses: some features will work and others probably won't.</p>
<p>This was another large group effort that spanned multiple projects:</p>
<ul>
<li>Bevy: XCode Project / Example (@simlay with help from @MichaelHills)</li>
<li>Bevy: Runtime shader compilation using shaderc (@MichaelHills)</li>
<li>Bevy: Rodio upgrade (@Dash-L)</li>
<li>Bevy: Touch support (@naithar)</li>
<li>Winit: Fix iOS portrait view (@MichaelHills) </li>
<li>RustAudio: iOS support (@simlay and @MichaelHills)</li>
</ul>
<p>Known issues:</p>
<ul>
<li><a href="https://github.com/RustAudio/cpal/pull/485">Audio doesn't quite work yet</a></li>
</ul>
<h2 id="wasm-asset-loading">WASM Asset Loading</h2>
<p>authors: @mrk-its (and ported to the new AssetIo by @cart)</p>
<p>@mrk-its has been hard at work on expanding Bevy's WASM support. In this release we landed WASM asset loading. You can now load assets when you publish to WASM just like you would on any other platform:</p>
<pre><code><span>asset_server</span><span>.</span><span>load</span><span>("</span><span>sprite.png</span><span>");
</span></code></pre>
<p>If the asset hasn't already been loaded, this will make a <code>fetch()</code> request to retrieve the asset over HTTP.</p>
<p>@mrk-its has also been building a custom WebGL2 <code>bevy_render</code> backend. It is already pretty usable, but its not <em>quite</em> ready yet. Expect more news on this soon!</p>
<h2 id="touch-input">Touch Input</h2>
<p>authors: @naithar</p>
<p>Bevy now has support for touches:</p>
<pre><code><span>fn </span><span>touch_system</span><span>(</span><span>touches</span><span>: </span><span>Res</span><span>&lt;</span><span>Touches</span><span>&gt;) {
    </span><span>// you can iterate all current touches and retrieve their state like this:
    </span><span>for</span><span> touch </span><span>in</span><span> touches</span><span>.</span><span>iter</span><span>() {
        </span><span>println!</span><span>("</span><span>active touch: {:?}</span><span>",</span><span> touch</span><span>);
    }

    </span><span>for</span><span> touch </span><span>in</span><span> touches</span><span>.</span><span>iter_just_pressed</span><span>() {
        </span><span>println!</span><span>("</span><span>just pressed {:?}</span><span>",</span><span> touch</span><span>);
    }

    </span><span>for</span><span> touch </span><span>in</span><span> touches</span><span>.</span><span>iter_just_released</span><span>() {
        </span><span>println!</span><span>("</span><span>just released {:?}</span><span>",</span><span> touch</span><span>);
    }

    </span><span>for</span><span> touch </span><span>in</span><span> touches</span><span>.</span><span>iter_just_cancelled</span><span>() {
        </span><span>println!</span><span>("</span><span>just cancelled {:?}</span><span>",</span><span> touch</span><span>);
    }
}
</span></code></pre>
<p>You can also consume raw touch events using the <code>Events&lt;TouchInput&gt;</code> resource.</p>
<h2 id="asset-system-improvements">Asset System Improvements</h2>
<p>authors: @cart</p>
<h3 id="asset-handle-reference-counting">Asset Handle Reference Counting</h3>
<p>Assets are now automatically freed when their "handle reference count" reaches zero. This means you no longer need to think about freeing assets manually:</p>
<pre><code><span>// Calling load() now returns a strong handle:
</span><span>let</span><span> handle </span><span>=</span><span> asset_server</span><span>.</span><span>load</span><span>("</span><span>sprite.png</span><span>");

</span><span>// Note that you no longer need to unwrap() loaded handles. Ergonomics for the win!

// Cloning a handle increases the reference count by one
</span><span>let</span><span> second_handle </span><span>=</span><span> handle</span><span>.</span><span>clone</span><span>();

</span><span>// Spawn a sprite and give it our handle
</span><span>commands</span><span>.</span><span>spawn</span><span>(</span><span>SpriteComponents </span><span>{
</span><span>    material</span><span>:</span><span> materials</span><span>.</span><span>add</span><span>(</span><span>handle</span><span>.</span><span>into</span><span>()),
    ..</span><span>Default</span><span>::</span><span>default</span><span>()
});

</span><span>// Later in some other system:
</span><span>commands</span><span>.</span><span>despawn</span><span>(</span><span>sprite_entity</span><span>);

</span><span>// There are no more active handles to "sprite.png", so it will be freed before the next update
</span></code></pre><h3 id="asset-loaders-can-now-load-multiple-assets">Asset Loaders can now load multiple assets</h3>
<p>In past releases, <code>AssetLoaders</code> could only produce a single asset of a single type. In <strong>Bevy 0.3</strong>, they can now produce any number of assets for any type. The old behavior was extremely limiting when loading assets like GLTF files, which might produce many meshes, textures, and scenes. </p>
<h3 id="sub-asset-loading">Sub-Asset Loading</h3>
<p>Sometimes you only want to load a specific asset from an asset source. You can now load sub assets like this:</p>
<pre><code><span>// Mesh0/Primitive0 references the first mesh primitive in "my_scene.gltf"
</span><span>let</span><span> mesh </span><span>=</span><span> asset_server</span><span>.</span><span>load</span><span>("</span><span>my_scene.gltf#Mesh0/Primitive0</span><span>");
</span></code></pre><h3 id="assetio-trait">AssetIo Trait</h3>
<p>The <code>AssetServer</code> is now backed by the <code>AssetIo</code> trait. This allows us to load assets from whatever storage we want. This means on desktop we now load from the filesystem, on Android we use the Android Asset Manager, and on the web we make HTTP requests using the <code>fetch()</code> api.</p>
<h3 id="asset-dependencies">Asset Dependencies</h3>
<p>Assets can now depend on other assets, which will automatically be loaded when the original asset is loaded. This is useful when loading something like a "scene" which might reference other asset sources. We utilize this in our new GLTF loader.</p>
<h3 id="removed-assetserver-load-sync">Removed AssetServer::load_sync()</h3>
<p>This might rustle some feathers, but <code>AssetServer::load_sync()</code> had to go! This api wasn't WASM friendly, encouraged users to block game execution for the sake of convenience (which causes "hitching"), and was incompatible with the new AssetLoader api. Asset loading is now always asynchronous. Users of <code>load_sync()</code> should instead <code>load()</code> their assets, check load status in their systems, and change game state accordingly. </p>
<h2 id="gltf-scene-loader">GLTF Scene Loader</h2>
<p>authors: @cart</p>
<p>Up until this point, the GLTF loader was painfully limited. It could only load the first mesh with a single texture in a GLTF file. For <strong>Bevy 0.3</strong>, we took advantage of the asset system improvements to write a new <code>GltfLoader</code> that loads GLTF files as Bevy <code>Scenes</code>, along with all meshes and textures in the files.</p>
<p>Here's Bevy loading the Khronos Flight Helmet example, which consists of multiple meshes and textures!</p>
<p><img src="https://bevyengine.org/news/bevy-0-3/flight_helmet.png" alt="flight helmet"></p>
<p>Here is the complete code for a system that loads a GLTF file and spawns it as a scene:</p>
<pre><code><span>fn </span><span>load_gltf_system</span><span>(</span><span>mut </span><span>commands</span><span>:</span><span> Commands, </span><span>asset_server</span><span>: </span><span>Res</span><span>&lt;</span><span>AssetServer</span><span>&gt;) {
    </span><span>let</span><span> scene_handle </span><span>=</span><span> asset_server</span><span>.</span><span>load</span><span>("</span><span>models/FlightHelmet/FlightHelmet.gltf</span><span>");
</span><span>    commands</span><span>.</span><span>spawn_scene</span><span>(</span><span>scene_handle</span><span>);
}
</span></code></pre><h2 id="bevy-ecs-improvements">Bevy ECS Improvements</h2>
<p>authors: @cart</p>
<h3 id="query-ergonomics">Query Ergonomics</h3>
<p>In this release I finally was able to remove the one thing I <em>truly despised</em> in Bevy ECS. In previous versions of Bevy, iterating over the components in a <code>Query</code> looked like this:</p>
<pre><code><span>for </span><span>(</span><span>a</span><span>,</span><span> b</span><span>) in &amp;</span><span>mut</span><span> query</span><span>.</span><span>iter</span><span>() {
    </span><span>// The `&amp;mut` here just felt so unnatural
</span><span>}

</span><span>// Or if you preferred you could do this
</span><span>for </span><span>(</span><span>a</span><span>,</span><span> b</span><span>) in</span><span> query</span><span>.</span><span>iter</span><span>().</span><span>iter</span><span>() {
    </span><span>// query.iter().iter()? Really???
</span><span>}
</span></code></pre>
<p>Similarly, retrieving a specific entity's component's looked like this:</p>
<pre><code><span>if let </span><span>Ok</span><span>(</span><span>mut</span><span> result</span><span>) =</span><span> query</span><span>.</span><span>entity</span><span>(</span><span>entity</span><span>) {
    </span><span>if let </span><span>Some</span><span>((</span><span>a</span><span>,</span><span> b</span><span>)) =</span><span> result</span><span>.</span><span>get</span><span>() {
        </span><span>// access components here
    </span><span>}
}
</span></code></pre>
<p>In <strong>Bevy 0.3</strong> you can just do this:</p>
<pre><code><span>// iteration
</span><span>for </span><span>(</span><span>a</span><span>,</span><span> b</span><span>) in</span><span> query</span><span>.</span><span>iter</span><span>() {
    </span><span>// sweet ergonomic bliss
</span><span>}

</span><span>// entity lookup
</span><span>if let </span><span>Ok</span><span>((</span><span>a</span><span>,</span><span>b</span><span>)) =</span><span> query</span><span>.</span><span>get</span><span>(</span><span>entity</span><span>) {
    </span><span>// boilerplate be gone!
</span><span>}
</span></code></pre>
<p>You might naturally be thinking something like:</p>
<p><em>Why did this take so long? Why would removing a single <code>&amp;mut</code> be hard?</em></p>
<p>It's a long story! In summary:</p>
<ul>
<li>The old api looked the way it did for a reason. It was the result of good design choices that protect against unsafe memory access in a parallel environment.</li>
<li><code>query.iter()</code> didn't actually return an iterator. It returned a <em>wrapper</em> that held an atomic lock on the component storages. The same was true for the type returned by <code>query.entity()</code></li>
<li>Removing these "wrapper types" would have allowed unsafe behavior because another Query could access the same components in a way that violated Rust's mutability rules.</li>
<li>Due to the iterator implementation and quirks in the rust compiler, removing the wrapper type <em>tanked</em> iteration performance by about ~2-3x.</li>
</ul>
<p>Fortunately we finally found ways to solve all of these problems. The newly added <code>QuerySets</code> allow us to completely remove the locks (and wrapper types). And by completely rewriting <code>QueryIter</code> we were able to avoid the performance hit that removing the wrapper incurred. Read on for the details!</p>
<h3 id="100-lockless-parallel-ecs">100% Lockless Parallel ECS</h3>
<p>Bevy ECS is now completely lock free. In Bevy 0.2, we made direct <code>World</code> access and "for-each" systems lock free. This is possible because the Bevy ECS scheduler ensures that systems only run in parallel in ways that respect Rust's mutability rules. </p>
<p>We couldn't remove locks from <code>Query</code> systems because of systems like this:</p>
<pre><code><span>fn </span><span>conflicting_query_system</span><span>(</span><span>mut </span><span>q0</span><span>: </span><span>Query</span><span>&lt;&amp;</span><span>mut</span><span> A</span><span>&gt;</span><span>, </span><span>mut </span><span>q1</span><span>: </span><span>Query</span><span>&lt;(&amp;</span><span>mut</span><span> A, </span><span>&amp;</span><span>B</span><span>)&gt;) {
    </span><span>let</span><span> a </span><span>=</span><span> q0</span><span>.</span><span>get_mut</span><span>(</span><span>some_entity</span><span>).</span><span>unwrap</span><span>();
    </span><span>let </span><span>(</span><span>another_a</span><span>,</span><span> b</span><span>) =</span><span> q1</span><span>.</span><span>get_mut</span><span>(</span><span>some_entity</span><span>).</span><span>unwrap</span><span>();
    </span><span>// Aaah!!! We have two mutable references to some_entity's A component!
    // Very unsafe!
</span><span>}
</span></code></pre>
<p>The locks ensured that the second <code>q1.get_mut(some_entity)</code> access panicked, keeping us nice and safe. In <strong>Bevy 0.3</strong>, a system like <code>conflicting_query_system</code> will fail when the schedule is constructed. By default, <em>systems cannot have conflicting queries</em>.</p>
<p>However there are some cases where a system <em>needs</em> conflicting queries to do what it needs to do. For these cases, we added <code>QuerySets</code>: </p>
<pre><code><span>fn </span><span>system</span><span>(</span><span>mut </span><span>queries</span><span>: </span><span>QuerySet</span><span>&lt;(</span><span>Query</span><span>&lt;&amp;</span><span>mut</span><span> A</span><span>&gt;</span><span>, Query</span><span>&lt;(&amp;</span><span>mut</span><span> A, </span><span>&amp;</span><span>B</span><span>)&gt;)&gt;) {
    </span><span>for</span><span> a </span><span>in</span><span> queries</span><span>.</span><span>q0_mut</span><span>().</span><span>iter_mut</span><span>() {
    }

    </span><span>for </span><span>(</span><span>a</span><span>,</span><span> b</span><span>) in</span><span> queries</span><span>.</span><span>q1_mut</span><span>().</span><span>iter_mut</span><span>() {
    }
}
</span></code></pre>
<p>By putting our conflicting <code>Queries</code> in a <code>QuerySet</code>, the Rust borrow checker protects us from unsafe query accesses.</p>
<p>Because of this, we were able to remove <em>all</em> safety checks from <code>query.iter()</code> and <code>query.get(entity)</code>, which means these methods are now <em>exactly</em> as fast as their <code>World</code> counterparts (which we made lock-free in Bevy 0.2). </p>
<h3 id="performance-improvements">Performance Improvements</h3>
<p>Bevy had a number of nice performance improvements this release:</p>
<ul>
<li>Removed atomic locks from Query access, making Bevy ECS 100% lock free</li>
<li>Removed archetype "safety checks" from Query access. At this point we have already verified …</li></ul></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://bevyengine.org/news/bevy-0-3/">https://bevyengine.org/news/bevy-0-3/</a></em></p>]]>
            </description>
            <link>https://bevyengine.org/news/bevy-0-3/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24983956</guid>
            <pubDate>Tue, 03 Nov 2020 21:04:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Mind-Melting Decision Proves a Dialer Can Never Be Too Old to Be an ATDS]]>
            </title>
            <description>
<![CDATA[
Score 86 | Comments 38 (<a href="https://news.ycombinator.com/item?id=24983532">thread link</a>) | @guerrilla
<br/>
November 3, 2020 | https://tcpaworld.com/2020/11/03/heres-your-tcpa-distraction-for-a-normal-tuesday-with-nothing-else-going-on-mind-melting-decision-proves-a-dialer-can-never-be-too-old-to-be-an-atds/ | <a href="https://web.archive.org/web/*/https://tcpaworld.com/2020/11/03/heres-your-tcpa-distraction-for-a-normal-tuesday-with-nothing-else-going-on-mind-melting-decision-proves-a-dialer-can-never-be-too-old-to-be-an-atds/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		<p><em>Editor’s Note: Welcome Hackers! Not sure how Hacker News found this article but I see a ton of folks headed in from that website, which I presume is some sort of aggregator for news articles of interest to folks that like to hack stuff. Feel free to have a look around the website–<a href="https://tcpaworld.com/podcast/">check out our cool podcast</a>–and tell any friends that might like this nerdy stuff. But don’t hack anything please. Thanks.&nbsp;</em></p>
<p>Since there is absolutely nothing else going on today I figured I’d share one of the weirdest TCPA cases I’ve seen recently.</p>
<p>So apparently some guy in Nebraska named Mort who really doesn’t like a gas station called Bucky’s Gas Station. He hates it so much, in fact, that he has created a stark raving mad loony-toons (my opinion) gripes board on the internet to assail it. You can visit it, if you’d like, but be warned that your brain will melt a little: <a href="http://www.buckysgasstationsucks.com/">www.buckysgasstationsucks.com</a>.</p>
<p>I spent more time than I’d care to admit reviewing the website last night but I can’t quite figure out where the beef originated. (If you can figure it out let me know, as I am actually genuinely curious.)</p>
<p>So Bucky’s Gas Station is owned by a guy named Buchanan— who I will assume goes by Bucky whether he wants to or not—and his wife who have allegedly been subjected to years of abuse at the hands of Mort using something called a FaxTel 2000, which is something directly out of a 90s era Simpsons. Apparently Mort revs up his FaxTel 2000 and blasts Bucky and his wife with unwanted messages from time to time, just to make sure Bucky remembers how much Mort dislikes him.</p>
<p>Not stopping there, Mort also—allegedly—encourages members of the public to blast poor Bucky with calls “day and night” and to do the same with his associates and neighbors, many of whose contact information is listed on the brain-melting website. As the order tersely words it: “<em>[Mort] encourages members of the public to contact the Buchanans, their neighbors, and others they are affiliated with; and notes that the Buchanans and others will be contacted daily and nightly regarding Sullivan’s grievances</em>.”</p>
<p>Since I don’t actually know why Mort is so agitated by Bucky I can’t say that his conduct is totally inappropriate. I mean, maybe Bucky threw Mort’s puppy in a microwave or something. But either way the conduct of blasting someone’s cell phone with unwanted messages is illegal—if an ATDS is used.</p>
<p>And here’s where things finally get interesting in this yawner of a case.</p>
<p>The Plaintiff alleged that FaxTel 2000 is an autodialer because, I mean, look at the thing.</p>
<p><img data-attachment-id="9016" data-permalink="https://tcpaworld.com/2020/11/03/heres-your-tcpa-distraction-for-a-normal-tuesday-with-nothing-else-going-on-mind-melting-decision-proves-a-dialer-can-never-be-too-old-to-be-an-atds/faxtel-20007jpeg/" data-orig-file="https://i0.wp.com/tcpaworld.com/wp-content/uploads/2020/11/FAXTEL-20007jpeg.jpg?fit=350%2C267&amp;ssl=1" data-orig-size="350,267" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="FAXTEL 20007jpeg" data-image-description="" data-medium-file="https://i0.wp.com/tcpaworld.com/wp-content/uploads/2020/11/FAXTEL-20007jpeg.jpg?fit=300%2C229&amp;ssl=1" data-large-file="https://i0.wp.com/tcpaworld.com/wp-content/uploads/2020/11/FAXTEL-20007jpeg.jpg?fit=350%2C267&amp;ssl=1" loading="lazy" src="https://i0.wp.com/tcpaworld.com/wp-content/uploads/2020/11/FAXTEL-20007jpeg.jpg?resize=300%2C229&amp;ssl=1" alt="" width="300" height="229" srcset="https://i0.wp.com/tcpaworld.com/wp-content/uploads/2020/11/FAXTEL-20007jpeg.jpg?resize=300%2C229&amp;ssl=1 300w, https://i0.wp.com/tcpaworld.com/wp-content/uploads/2020/11/FAXTEL-20007jpeg.jpg?w=350&amp;ssl=1 350w" sizes="(max-width: 300px) 100vw, 300px" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/tcpaworld.com/wp-content/uploads/2020/11/FAXTEL-20007jpeg.jpg?resize=300%2C229&amp;ssl=1 300w, https://i0.wp.com/tcpaworld.com/wp-content/uploads/2020/11/FAXTEL-20007jpeg.jpg?w=350&amp;ssl=1 350w" data-lazy-src="https://i0.wp.com/tcpaworld.com/wp-content/uploads/2020/11/FAXTEL-20007jpeg.jpg?resize=300%2C229&amp;is-pending-load=1#038;ssl=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>
<p>But Mort had a clever response—this device is so old and beaten up that it can no longer dial randomly and sequentially, plus no replacement parts are available so it lacks the capacity to dial that way in the future either. So it can’t possibly meet the TCPA’s ATDS definition.</p>
<p>I mean, its kind of a brilliant argument if you think about it (and your mind has melted a little.)</p>
<p>Unfortunately for Mort, however, the case was decided at the pleadings stage and the Court simply could not accept Mort’s assertions on the FaxTel’s dialing capacity as those “facts” were outside the pleadings. Instead the Court had to accept Bucky’s claim that the dialer had all the needed functionality to behave as an ATDS.</p>
<p>Undeterred, Mort also argued that the TCPA infringed on his First Amendment rights but—as <strong><a href="https://tcpaworld.com/2020/10/29/happy-halloween-tcpaworld-heres-are-the-top-10-scariest-tcpa-stories-going-to-freak-you-out-this-halloween/">readers of my Halloween column know</a></strong>—the Constitution won’t save you in TCPAWorld.</p>
<p>*Insert left-over evil laugh from Halloween bargain bin here*</p>
<p>Mort finished his motion to dismiss with a claim that the TCPA only applies to telemarketing harassment, not good-ole-fashioned harassment harassment. No dice. The Court looks at the words of the statute and cannot find the “I just want to abuse people out of spite” TCPA exemption.</p>
<p>On the other hand, and somewhat amusingly, the Court refused to enter a preliminary injunction prohibiting Mort’s conduct finding that it wanted more information and evidence before doing so. Under the circumstances of this case one might have thought ordering one party to temporarily stop blasting the other with&nbsp; robocalls would have been pretty perfunctory. But I guess the Court also wants to know about the condition of Mort’s puppies before ordering him to stop FaxTeling Bucky.</p>
<p>The case is <em>Buchanan v. Sullivan</em>, 8:20-CV-301, 2020 U.S. Dist. LEXIS 202519 (D. Ne. October 30, 2020).</p>
<p>And now you may return to your low-anxiety and worry free Tuesday.</p>
<p>Hey, look at that bird outside.</p>
<p><strong>UPDATE: 11/3/2020 at 2:24 pm pacific</strong></p>
<p>So I apparently have a new team of hackers that work for me– Czar of TCPAWorld and Czar of the Hackers?– and they think they’ve uncovered what happened here. Below is an exchange from a hacker news message board, because that’s how I roll now:</p>

	</div></div>]]>
            </description>
            <link>https://tcpaworld.com/2020/11/03/heres-your-tcpa-distraction-for-a-normal-tuesday-with-nothing-else-going-on-mind-melting-decision-proves-a-dialer-can-never-be-too-old-to-be-an-atds/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24983532</guid>
            <pubDate>Tue, 03 Nov 2020 20:19:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Decision Journal in Notion]]>
            </title>
            <description>
<![CDATA[
Score 74 | Comments 16 (<a href="https://news.ycombinator.com/item?id=24983435">thread link</a>) | @saviorand
<br/>
November 3, 2020 | https://optemization.com/decision-journal-notion | <a href="https://web.archive.org/web/*/https://optemization.com/decision-journal-notion">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://optemization.com/decision-journal-notion</link>
            <guid isPermaLink="false">hacker-news-small-sites-24983435</guid>
            <pubDate>Tue, 03 Nov 2020 20:07:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Docker in 10 Minutes]]>
            </title>
            <description>
<![CDATA[
Score 34 | Comments 6 (<a href="https://news.ycombinator.com/item?id=24982719">thread link</a>) | @wheresvic4
<br/>
November 3, 2020 | https://smalldata.tech/blog/2019/06/08/docker-in-10-minutes | <a href="https://web.archive.org/web/*/https://smalldata.tech/blog/2019/06/08/docker-in-10-minutes">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>
  I've been exposed to docker on and off and every time I see it, I seem to need a refresher. In this article we will go
  through everything you need to know about Docker in order to either jump into an existing project or get started with
  it.
</p>

<h5>Basic concepts</h5>

<p>
  Docker is basically a system of running processes on the host machine in an isolated way, using several Linux kernel
  features. Thus, Docker is more lightweight than a full-blown virtual machine. The disadvantage of a Docker container
  vs. a virtual machine is that multiple containers share the same underlying OS kernel. While the concept of jailed
  processes is not new, Docker's popularity was essentially due to the tooling that it provided to which made it really
  straightforward to spin up and manage containers.
</p>

<p>
  Docker is made up of various components. The main component is the the docker engine, which consists of a lightweight
  runtime that manages containers, images, builds, and more. It runs natively on Linux systems and is made up of:
</p>

<ol>
  <li>Docker daemon that runs on the host machine.</li>
  <li>Docker client that communicates with the Docker daemon to execute commands.</li>
  <li>A REST API for interacting with the Docker daemon remotely.</li>
</ol>

<p>
  The Docker client is what you, as the end-user use to communicate with the Docker daemon, e.g.
  <code>docker run hello-world</code>.
</p>

<p>
  The Docker daemon is what actually executes commands like building and running containers on the host machine. The
  Docker Client can run on the same machine as well, but it does not have to. It can also communicate with the Docker
  Daemon running on a different host.
</p>

<p>We will look at other Docker components like the Docker hub, etc. later in this article.</p>

<h5>Images, containers and volumes</h5>

<p>
  A Docker image can be though of as a recipe for setting up a machine with all required software and dependencies
  installed. Apart from installing software, images can also define what processes to run when launched. Docker images
  are created via instructions written in a <code>Dockerfile</code>. Images are built on the concept of layers. There is
  always a base layer, potentially followed by additional layers that represent file changes. Each layer is stacked on
  top of the others, consisting of the differences between it and the previous layer. This is achieved via a
  <a href="https://en.wikipedia.org/wiki/UnionFS">Union file system</a>.
</p>

<!--
<p>Examples of instructions one can put into a <code>Dockerfile</code>:</p>

<ul>
  <li><code>RUN apt-get -y install some-package</code> # install a software package</li>
  <li><code>EXPOSE 8000</code> # expose a port</li>
  <li><code>ENV ANT_HOME /usr/local/apache-ant</code> # pass an environment variable</li>
</ul>
-->

<p>
  A Docker container is the running instance of an image. This includes the operating system, application code, runtime,
  system tools, system libraries, etc. A Docker image can be thought of as an executable and a container can be thought
  of as the running application. Note that in this analogy each running application is its own instance and independent
  of the others.
</p>

<p>
  The general idea is that once you have successfully created a container, you can then run it in any environment
  without having to make changes.
</p>

<p>
  A Docker volume is the "data" part of a container, initialized when a container is created. Volumes allow
  you to persist and share a container's data. Docker volumes are separate from the default Union File System and exist
  as normal directories and files on the host filesystem.
</p>

<h5>Docker comands</h5>

<p>
  As part of the docker installation process, a hello world image was downloaded and executed via:
  <code>docker run hello-world</code>
</p>

<p>List all images with <code>docker images</code>:</p>

<pre>$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              latest              94e814e2efa8        2 weeks ago         88.9MB
hello-world         latest              fce289e99eb9        2 months ago        1.84kB
</pre>

<p>Run a command interactively from an image in a new container: <code>docker run -it ubuntu bash</code></p>

<p>
  List all running containers: <code>docker ps</code>. To list all previously run containers use
  <code>docker ps -a</code>:
</p>

<pre>$ docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                         PORTS               NAMES
d2d651741317        ubuntu              "bash"              45 minutes ago      Exited (0) 43 minutes ago                          suspicious_kalam
36813bdb6434        ubuntu              "bash"              About an hour ago   Exited (0) About an hour ago                       inspiring_banach
46f352a0cde9        hello-world         "/hello"            2 hours ago         Exited (0) 2 hours ago                             thirsty_clarke
</pre>

<p>
  Note that in the output above, for each docker <code>run</code> command, a new container was created. As mentioned
  previously, each container has it's own data volume and changes to one do not affect the others. To run an existing
  container: <code>docker run [container-name</code>. This will start the container and
  <code>docker attach [container-name]</code> will jump into it.
</p>

<p>
  At this point, you should have enough to get started with an existing docker project. Read on if you're looking to
  develop with docker.
</p>

<h5>Custom images</h5>

<p>
  As noted previously, Docker images are specified via a <code>Dockerfile</code>. Here's an extremely basic example that
  uses a ubuntu base image and copies an executable called <code>sysinfo</code> from the current directory into the
  container and executes it:
</p>

<pre>FROM ubuntu:18.04
COPY sysinfo /
CMD ["/sysinfo"]
</pre>

<p>
  Let's see how we can get this image up and running via the <code>docker build</code> command (note that gcc is
  required to compile the binary):
</p>

<pre>$ cd ~
$ mkdir -p docker/sysinfo
$ cd docker/sysinfo
$ vim sysinfo.cpp

#include &lt;iostream&gt;
#include &lt;sys/utsname.h&gt;

using namespace std;

int main() {
  struct utsname sysinfo;
  uname(&amp;sysinfo);
  
  cout &lt;&lt; "System Name: " &lt;&lt; sysinfo.sysname &lt;&lt; endl;
  cout &lt;&lt; "Host Name: " &lt;&lt; sysinfo.nodename &lt;&lt; endl;
  cout &lt;&lt; "Release(Kernel) Version: " &lt;&lt; sysinfo.release &lt;&lt; endl;
  cout &lt;&lt; "Kernel Build Timestamp: " &lt;&lt; sysinfo.version &lt;&lt; endl;
  cout &lt;&lt; "Machine Arch: " &lt;&lt; sysinfo.machine &lt;&lt; endl;
  cout &lt;&lt; "Domain Name: " &lt;&lt; sysinfo.domainname &lt;&lt; endl;
  
  return 0;
}

$ g++ sysinfo.cpp -o sysinfo
$ ./sysinfo

System Name: Linux
Host Name: coolbeans
Release(Kernel) Version: 4.18.0-16-generic
Kernel Build Timestamp: #17-Ubuntu SMP Fri Feb 8 00:06:57 UTC 2019
Machine Arch: x86_64
Domain Name: (none)


$ vim Dockerfile

FROM ubuntu:18.04
COPY sysinfo /
CMD ["/sysinfo"]

$ docker build . -t sysinfo
$ docker run sysinfo

System Name: Linux
Host Name: d8e53b009d72
Release(Kernel) Version: 4.18.0-16-generic
Kernel Build Timestamp: #17-Ubuntu SMP Fri Feb 8 00:06:57 UTC 2019
Machine Arch: x86_64
Domain Name: (none)
</pre>

<p>
  Note in the difference in hostname between local system (coolbeans) and the running container (d8e53b009d72) in the
  above output.
</p>

<p>
  If you make a mistake, you can remove an image via <code>docker rmi [image-name] --force</code>. Cleaning up unused
  containers and volumes related to the image can be accomplished via <code>docker system prune --volumes</code>.
</p>

<p>
  In the above example, we created a custom image using the standard Ubuntu image as our base image, before we go
  further with creating custom images it would be good to note that the docker
  <a href="https://hub.docker.com/search?q=&amp;type=image&amp;image_filter=official">hub</a> provides lots of free
  pre-configured images for various software. This is the second Docker component and is also sometimes called the
  Docker registry (one can also have private registries).
</p>

<h5>Networking</h5>

<p>
  In most cases, we would like to run a service via Docker. Let is look at how we can accomplish this by using a very
  simple web server as an example. Create the image as follows (note that the example below uses Go to create the
  binary):
</p>

<pre>$ cd ~
$ mkdir -p docker/webapp
$ cd docker/webapp
$ vim webapp.go

package main

import (
	"io"
	"net/http"
)

func hello(w http.ResponseWriter, r *http.Request) {
	io.WriteString(w, "Hello from webapp!")
}

func main() {
	http.HandleFunc("/", hello)
	http.ListenAndServe(":8000", nil)
}

$ go build webapp.go
$ vim Dockerfile

FROM ubuntu:18.04
COPY webapp /
CMD ["/webapp"]

$ docker build . -t webapp
$ docker run -d webapp
cfab907c828a40ce4cc53b88b26badabf8fa6672fd538d0c072fd0947f36d650
</pre>

<p>
  In the above example we built a webapp image and started the docker container with the <code>-d</code> flag. This
  started the container in detached mode and printed the container id so that we could interact with it. We can confirm
  it is running via <code>docker ps</code>:
</p>

<pre>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
cfab907c828a        webapp              "/webapp"           4 minutes ago       Up 4 minutes                            zealous_herschel    
</pre>

<p>
  At this point we have our web application running in a docker container but we have no way to communicate with it. Run
  <code>docker inspect cfab907c828a</code> to output the container configuration in json format. We are interested in
  the <code>NetworkSettings.Networks.bridge.IPAddress</code> property. Let's try connecting to the provided ip address,
  http://172.17.0.2:8000 (in my case) and we can see our web application in action!
</p>

<p>
  It is also possible to bind ports on from the docker container to the host machine so that we can access services as
  if they were running locally, <code>docker run -d -p3000:8000 webapp</code>. Thus our web application is now available
  on http://localhost:3000!
</p>

<h5>Persistent storage</h5>

<p>
  By default Docker containers come with their own storage which lives as long as the container is running. If we would
  like to persist data across containers, we can either bind a local file/directory to our container or create and mount
  a named Docker volume. The added benefit of using a Docker volume is that it does not necessarily have to be a
  resource on the host file system, it can also be an external cloud storage service depending upon the driver.
</p>

<p>
  A very practical example of using a postgres docker image with persistent data storage can be found
  <a href="https://smalldata.tech/blog/2018/02/23/dockerized-postgresql-with-local-data-storage-on-ubuntu">here</a>.
</p>

<h5>Summary</h5>

<p>
  We looked at Docker basic concepts, created a few containers, ran some services and even persisted data across machine
  restarts! This was longer than 10 minutes but it should be enough to get going with Docker.
</p>
<p><a href="https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fsmalldata.tech%2Fblog%2F2019%2F06%2F08%2Fdocker-in-10-minutes&amp;t=Docker%20in%2010%20minutes">HackerNew…</a></p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://smalldata.tech/blog/2019/06/08/docker-in-10-minutes">https://smalldata.tech/blog/2019/06/08/docker-in-10-minutes</a></em></p>]]>
            </description>
            <link>https://smalldata.tech/blog/2019/06/08/docker-in-10-minutes</link>
            <guid isPermaLink="false">hacker-news-small-sites-24982719</guid>
            <pubDate>Tue, 03 Nov 2020 18:55:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Programming R at native speed using Haskell (2015)]]>
            </title>
            <description>
<![CDATA[
Score 116 | Comments 11 (<a href="https://news.ycombinator.com/item?id=24981356">thread link</a>) | @behnamoh
<br/>
November 3, 2020 | https://www.tweag.io/blog/2015-09-08-programming-r-at-native-speed-in-haskell/ | <a href="https://web.archive.org/web/*/https://www.tweag.io/blog/2015-09-08-programming-r-at-native-speed-in-haskell/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><p>Most good data stories start with a interesting question. If the
average request latency went down by a further 100ms, by how much
could we expect user engagement to increase? How can we detect
evidence of corruption of government officials given a list of all
bids nationwide for the building of new roads and repair of existing
ones? Can we identify a new pandemic in the making given a timeline of
common search terms? Often though, we know we have the data, but we
don’t even know what questions the data might help answer, or how the
story will unfold. From the data scientist who scratched an itch on an
idle afternoon, to a low latency, high availability, real-time
analysis deployed on hundreds of machines, the story typically
involves lots of rewrites, meanderings and building out of a lot of
code and utilities to improve the precision, speed or scale of the
analysis.</p>
<!--more-->
<p>R provides a great interactive environment for poking at the dataset
<em>du jour</em> and find what answers might be lurking in there. It provides
a wealth of readily available libraries for banging out an initial
story to tell. But R is a special purpose scripting language. Its
strength in supporting throwaway “do what I mean” programming to test
and iterate on hypotheses quickly becomes a hindrance when a model is
to be built out into an industrial scale, performant and maintainable
product or service. By then, a more general purpose language
encouraging structured, modular programming, providing strong static
guarantees of correctness and that compiles down to native code for
maximum speed becomes more appropriate. Haskell is such a language.</p>
<p>Mind you, Haskell makes for a great language to support rapid
iteration, “in the small” exploratory programming too, but it as of
yet lacks the plethora of high quality libraries from machine learning
to visualization that R provides, and perhaps also some syntactic
facilities to play it fast and loose. Today we’re proud to announce
the first public release of the
<a href="https://tweag.github.io/HaskellR/">HaskellR</a> project, which includes
a library and two interactive environments for seamlessly programming
in <em>both</em> R and Haskell in the same source file, or indeed at the same
prompt.</p>
<p>At the heart of the project lies <code>inline-r</code> (whose design later
inspired
<a href="https://www.fpcomplete.com/blog/2015/05/inline-c">inline-c</a> - they
share a coauthor), which exports a few quasiquoters for expressing
calls to R functions and indeed arbitrary R code in R’s syntax. The
principles behind the design of <code>inline-r</code> are,</p>
<ul>
<li>use R libraries the way R intends them to be used: using R’s syntax
and calling conventions;</li>
<li>keep the overhead of crossing language boundaries as low as possible
to encourage fine grained interleaving of code in both languages;</li>
<li>zero marshalling overhead in the common case;</li>
<li>optional typing of R data as executable documentation of what
functions expect and return;</li>
<li>let the user stoop as low or jump as high as (s)he likes in the
abstraction stack: everything is under the user’s control control in
case (s)he needs it.</li>
</ul>
<p>We’ll touch upon each of the above points in more detail below and in
future posts. But first, let’s get a taste of this stuff. You may want
to consider the below setup as your go-to interactive shell if you
haven’t already: it reuses existing projects and works much like GHCi,
in an isolated sandbox if you like, except that you have inline
graphics and formulas out-of-the-box, as Shae Erisson first pioneered
in the Haskell world with <a href="https://github.com/shapr/ghclive/">ghclive</a>
and Manuel Chakravarty realized more recently on OS X with
<a href="http://haskellformac.com/">Haskell for Mac</a>.</p>
<h2>Charts, code, prose and formulas in a playground</h2>
<p>HaskellR features two interactive prompts:</p>
<ul>
<li>a bare bones REPL, called H. This is a thin wrapper around GHCi
initializing it with all the right extensions and imports to hit the
road running;</li>
<li>an all singing, all dancing interactive notebook, powered by
<a href="https://jupyter.org/">Jupyter</a> (formerly IPython) and Andrew
Gibiansky’s fantastic
<a href="https://github.com/gibiansky/IHaskell">IHaskell</a> kernel.</li>
</ul>
<p>In this post, we’ll talk mostly about the latter. Thanks to
<a href="https://github.com/commercialhaskell/stack">stack</a>, getting started
with <strong>HaskellR</strong> is pretty straightforward, and more importantly,
comparatively reliable. We put together
<a href="https://hub.docker.com/r/tweag/haskellr/">a Docker container</a> to get
you started hassle-free. It includes <strong>Jupyter</strong> and <strong>IHaskell</strong>
preinstalled. To build <strong>HaskellR</strong> inside it:</p>
<div data-language="bash"><pre><code>$ <span>git</span> clone http://github.com/tweag/HaskellR
$ <span>cd</span> HaskellR
$ stack --docker build
$ stack --docker <span>exec</span> ihaskell <span>install</span></code></pre></div>
<p>And get started in your browser:</p>
<div data-language="bash"><pre><code>$ stack --docker <span>exec</span> ipython notebook</code></pre></div>
<p><span>
      <a href="https://www.tweag.io/static/41a8b35719ee8bafb01f70190d40a529/c1b63/haskellr-jupyter.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="HaskellR in Jupyter" title="HaskellR in Jupyter" src="https://www.tweag.io/static/41a8b35719ee8bafb01f70190d40a529/fcda8/haskellr-jupyter.png" srcset="https://www.tweag.io/static/41a8b35719ee8bafb01f70190d40a529/12f09/haskellr-jupyter.png 148w,
https://www.tweag.io/static/41a8b35719ee8bafb01f70190d40a529/e4a3f/haskellr-jupyter.png 295w,
https://www.tweag.io/static/41a8b35719ee8bafb01f70190d40a529/fcda8/haskellr-jupyter.png 590w,
https://www.tweag.io/static/41a8b35719ee8bafb01f70190d40a529/efc66/haskellr-jupyter.png 885w,
https://www.tweag.io/static/41a8b35719ee8bafb01f70190d40a529/c83ae/haskellr-jupyter.png 1180w,
https://www.tweag.io/static/41a8b35719ee8bafb01f70190d40a529/c1b63/haskellr-jupyter.png 1200w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>Or remain in your terminal:</p>
<div data-language="bash"><pre><code>$ stack --docker <span>exec</span> ipython</code></pre></div>
<p>With <strong>IHaskell</strong>, you can keep your notes and formulas together with
your code in one place, called a notebook. With <strong>HaskellR</strong>’s plugin
for <strong>IHaskell</strong>, you can use widely acclaimed and very popular
R visualization packages such as <a href="http://ggplot2.org/">ggplot2</a> for
embedding plots in your notebook. Working in notebooks (aka
<a href="http://blog.haskellformac.com/blog/from-the-read-eval-print-loop-to-playgrounds">playgrounds</a>)
is convenient: they are self contained units that is easy to share
with colleagues, via email or
<a href="https://nbviewer.jupyter.org/">on the web</a>, and you can edit earlier
definitions while keeping the later ones in sync.</p>
<p>Here’s a simple example of using R’s data analysis facilities on data
generated in Haskell. Say you have a cluster of noisy data. We’ll use
the <code>random</code> package to generate a sample set:</p>
<div data-language="haskell"><pre><code><span><span>import</span> Control.Monad</span>
<span><span>import</span> System.Random.MWC <span>as</span> MWC</span>
<span><span>import</span> System.Random.MWC.Distributions</span>

<span>main</span> <span>=</span> <span>do</span>
  <span>gen</span> <span>&lt;-</span> <span>MWC.create</span>
  <span>xs</span> <span>&lt;-</span> <span>replicateM</span> <span>500</span> <span>$</span> <span>normal</span> <span>10</span> <span>3</span> <span>gen</span>
  <span>ys</span> <span>&lt;-</span> <span>replicateM</span> <span>500</span> <span>$</span> <span>normal</span> <span>10</span> <span>3</span> <span>gen</span>
  <span>...</span></code></pre></div>
<p>We can now plot the list of x-ordinates against the list of
y-ordinates using R’s standard library <code>plot()</code> function:</p>
<div data-language="haskell"><pre><code>  <span>[</span><span>r</span><span>|</span> <span>plot</span><span>(</span><span>xs_hs</span><span>,</span> <span>ys_hs</span><span>)</span> <span>|</span><span>]</span></code></pre></div>
<p><span>
      <a href="https://www.tweag.io/static/c6d47a04f8ebdbbdef96de235500886f/e17e5/haskellr-plot1.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="Randomly generated points" title="Randomly generated points" src="https://www.tweag.io/static/c6d47a04f8ebdbbdef96de235500886f/e17e5/haskellr-plot1.png" srcset="https://www.tweag.io/static/c6d47a04f8ebdbbdef96de235500886f/12f09/haskellr-plot1.png 148w,
https://www.tweag.io/static/c6d47a04f8ebdbbdef96de235500886f/e4a3f/haskellr-plot1.png 295w,
https://www.tweag.io/static/c6d47a04f8ebdbbdef96de235500886f/e17e5/haskellr-plot1.png 400w" sizes="(max-width: 400px) 100vw, 400px" loading="lazy">
  </a>
    </span></p>
<p>Better yet: say we want some kind of visualization of the density
estimation of these points. We can use R’s 2D kernel density
estimation function, available out-of-the-box:</p>
<div data-language="haskell"><pre><code><span>[</span><span>r</span><span>|</span> <span>k</span> <span>&lt;-</span> <span>kde2d</span><span>(</span><span>Xv</span><span>,</span> <span>Yv</span><span>,</span> <span>n</span><span>=</span><span>500</span><span>)</span>
    <span>image</span><span>(</span><span>k</span><span>,</span> <span>col</span><span>=</span><span>topo</span><span>.</span><span>colors</span><span>(</span><span>8</span><span>)</span><span>)</span> <span>|</span><span>]</span></code></pre></div>
<p><span>
      <a href="https://www.tweag.io/static/b56b1373f1fb40b96ee512eb43296cb8/e17e5/haskellr-plot2.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="Density estimation for our random points" title="Density estimation for our random points" src="https://www.tweag.io/static/b56b1373f1fb40b96ee512eb43296cb8/e17e5/haskellr-plot2.png" srcset="https://www.tweag.io/static/b56b1373f1fb40b96ee512eb43296cb8/12f09/haskellr-plot2.png 148w,
https://www.tweag.io/static/b56b1373f1fb40b96ee512eb43296cb8/e4a3f/haskellr-plot2.png 295w,
https://www.tweag.io/static/b56b1373f1fb40b96ee512eb43296cb8/e17e5/haskellr-plot2.png 400w" sizes="(max-width: 400px) 100vw, 400px" loading="lazy">
  </a>
    </span></p>
<p>Notice how in the above, some code appears delineated in
quasiquotation blocks. This is a syntactic facility to tell the
Haskell compiler that any code inside the block should be understood
to be in R’s syntax, not Haskell’s syntax as is normally the case
outside of these blocks. We implemented a mechanism to get an embedded
instance of the R interpreter to parse that code for us, so that we
don’t have to grok R’s full surface syntax ourselves.</p>
<p>By convention, <code>_hs</code> suffixed variables don’t refer to bindings in the
R environment, but rather to bindings in the Haskell environment. In
technical terms, these variables are actually
<a href="https://downloads.haskell.org/~ghc/7.8.4/docs/html/users_guide/template-haskell.html">antiquotations</a>
(we use convention over extra syntax so that we can reuse R’s stock
parser as-is and not implement our own). Antiquotation is the
fundamental mechanism for communicating data between R and Haskell. In
common cases, we can do so with no marshalling at all, so you can
cross the language boundaries repeatedly in a tight loop with impunity
if you like.</p>
<h2>Elements of design</h2>
<p>The core idea behind <strong>HaskellR</strong> is that language interop should be
zero-cost, or close to. There should be no reason why you would
hesitate to dip into a little bit of R to get the job done, over
reimplementing the same thing in Haskell because you’re worried about
performance or the cost of sending large volumes of data to some
remote R interpreter instance. We believe that making foreign calls
practically as fast as native calls is the key to making the
experience programming with both <a href="https://cran.r-project.org/">CRAN</a>
and <a href="https://hackage.haskell.org/">Hackage</a> package functions at the
same time seamless.</p>
<p>To this end, we decided to embed the R interpreter instance, that is
to say link together in the same binary the C code of the
R interpreter with the Haskell code of Haskell programs. In this way,
we can communicate with the R interpreter in the same process address
space. Many R functions are actually written in C, for speed, and
compile down to native code. Some of these primitives can be called
from Haskell as cheaply as any other foreign function call.</p>
<p>But that’s not the end of the performance story. A typically vexing
issue in cross-language programming is that the one language insists
on one representation of the data, while the other language wants its
own representation. Therefore, data typically has to be marshalled
from one representation to another constantly. In <strong>HaskellR</strong>, we
solved that problem in the following way: just use R’s representation
throughout. It’s the form that R functions expect, so they can get
straight to computing on that data when called. The trouble is, R’s
data representation is foreign to Haskell, so you lose Haskell’s
extremely powerful language facilities that work with any native
algebraic datatype, such as pattern matching. Or do you?…</p>
<p>The trick to get the best of both worlds, zero marshalling but also
pattern matching, is to define so-called view functions that provide
you with a native view as an algebraic datatype of the foreign data.
Here’s a toy and contrived example, where we define the factorial
function in Haskell but over R integers:</p>
<div data-language="haskell"><pre><code><span>fact</span> <span>::</span> <span>SEXP</span> <span>s</span> '<span>R.Int</span> <span>-&gt;</span> <span>R</span> <span>s</span> <span>(</span><span>SEXP</span> <span>s</span> '<span>R.Int</span><span>)</span>
<span>fact</span> <span>(</span><span>hexp</span> <span>-&gt;</span> <span>Int</span> <span>[</span><span>0</span><span>]</span><span>)</span> <span>=</span> <span>R.cast</span> <span>sing</span> <span>&lt;$&gt;</span> <span>[</span><span>r</span><span>|</span> 1L <span>|</span><span>]</span>
<span>fact</span> <span>n</span><span>@</span><span>(</span><span>hexp</span> <span>-&gt;</span> <span>Int</span> <span>_</span><span>)</span> <span>=</span>
    <span>R.cast</span> <span>sing</span> <span>&lt;$&gt;</span> <span>[</span><span>r</span><span>|</span> <span>n_hs</span> <span>*</span> <span>fact_hs</span><span>(</span><span>n_hs</span> <span>-</span> 1L<span>)</span> <span>|</span><span>]</span></code></pre></div>
<p><code>hexp</code> is a view function, mapping native R data (everything is
a <code>SEXP</code> internally in R) to a Haskell-native GADT. Thanks to the type
annotations (more on that in future posts), we know statically that
the R data can only be some kind of integer vector, so we pattern
match on that, check whether it’s the singleton zero vector or not,
and recurse.</p>
<p>Aren’t we now back to marshalling? Yes and no! We carefully engineered
these view functions to be non-recursive. Non-recursive functions can
be inlined. So that when you use a view function only to pattern match
on the result immediately afterwards, as is the case above, <strong>GHC</strong> is
smart enough to recognize that the view function is constructing
a datatype value only to destructure it later, so it simplifies the
allocation away! Yes this is marshalling of sorts, but it’s
marshalling for free: there is no trace of it at runtime.</p>
<p>There’s plenty more to talk about regarding the design of
<strong>HaskellR</strong>, but this post is already …</p></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.tweag.io/blog/2015-09-08-programming-r-at-native-speed-in-haskell/">https://www.tweag.io/blog/2015-09-08-programming-r-at-native-speed-in-haskell/</a></em></p>]]>
            </description>
            <link>https://www.tweag.io/blog/2015-09-08-programming-r-at-native-speed-in-haskell/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24981356</guid>
            <pubDate>Tue, 03 Nov 2020 16:53:21 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I got 10k post karma on Reddit with (and without) fast.ai]]>
            </title>
            <description>
<![CDATA[
Score 123 | Comments 97 (<a href="https://news.ycombinator.com/item?id=24981153">thread link</a>) | @ameerkat
<br/>
November 3, 2020 | https://www.a8b.io/posts/10k-karma-reddit-bot/ | <a href="https://web.archive.org/web/*/https://www.a8b.io/posts/10k-karma-reddit-bot/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>

    

    
      

    

    
<p><a href="https://www.a8b.io/posts/10k-karma-reddit-bot/" title="How I got 10k post karma on reddit with (and without) fast.ai">
        <img src="">
    </a>
</p>



    <figure>
    <img src="https://www.a8b.io/images/reddit/reddit_badge.png#mid" alt="My reddit profile with 10,088 post karma">
    <figcaption>Profile image made by AI Gahaku</figcaption>
  </figure>

<p>Back in 2006-2007 my friend and I put together a spreadsheet of 20 or so high-level achievements called “Everything’s a Contest”. This included goals like “Photograph a live grizzly bear in the wild”, “Have something named after you”, and <em>“Get 10,000 (post) karma on Reddit”</em>. Despite our heated discussions about what should be on this list and the criteria for success none of us ever really did anything substantial to complete any of these goals. In early 2020 I decided to tackle one of these long-standing contests. <em>But I was going to do it with AI since I wanted to see how I could apply AI to more of my problems</em>. I’m a huge fan of <a href="https://www.fast.ai/">fast.ai</a> and I appreciate its high-level abstractions and simple interfaces. For someone trying to get into deep learning, I would highly recommend it and the associated courses. This is a post about how I built a bot to gain karma on Reddit with fast.ai.</p>
<h2 id="approach">Approach</h2>
<p>Content on Reddit, in general, falls into two categories which you might call original content and found content. Trying to automate generating original content to post would be implementing something like <a href="https://imgflip.com/ai-meme">imgflip’s AI meme generator</a> and posting the resulting content to r/memes. While the memes that are generated are an amusing juxtaposition of tropes, they generally aren’t as good as memes that are generated by human users skilled in the art of observational comedy. Try the meme generator out and you’ll see what I mean. At some point, I did try posting one of those just to see how well it did.</p>
<figure>
    <img src="https://www.a8b.io/images/reddit/3migr03n6m251.jpg#mid" alt="Drake meme with text Staying in the Server / Watching Anime">
    <figcaption>I went through about 100 auto generated memes before I got this. This post got ~35 points with the title 'An AI generated this meme. Good to know it's putting its sentience to good use.'</figcaption>
  </figure>

<p>The other approach would be finding content online and posting it. I chose this route for automation because while generating high-quality content is more interesting it’s also far more challenging and involved. Rather than being disadvantaged in trying to catch up to the “human quality” of content, a computer is at the advantage since the primary differentiator between posters is the ability to search through large amounts of content and speed (who finds and posts something first). In particular, I ended up looking at news based subreddits due to a few reasons:</p>
<ul>
<li>Little chances of content being a repost</li>
<li>Lots of content being generated frequently</li>
<li>Large member bases</li>
<li>A lot of the content comes from the same set of known sites</li>
</ul>
<figure>
    <img src="https://www.a8b.io/images/reddit/business_submissions_by_domain.png" alt="">
    <figcaption>Domains for all the &gt; 1 score articles from /r/business in the last week as of October 29th 2020, showing the top few sites supply the majority of content.</figcaption>
  </figure>

<p>Why use AI at all though? If I was going to automate posting why not just create a bot that submits all links and leaves it up to the masses to sort my fate. In general, spamming on Reddit is looked down upon, though I believe banning is up to the discretion of the subreddit moderators. While in theory I might have gotten away with it or used some sort of generic rate-limiting and hope for the best, I wanted my bot to be more like a productive member of the community submitting thoughtful content, an extension of myself, rather than a spam bot that would be the bane of its existence until forcibly removed.</p>
<p>I searched for and found many good news subreddits but I targeted initially /r/business and /r/worldnews, somewhat arbitrarily and somewhat because those areas seemed interesting to me. /r/business had a sizeable community (577k members) and relatively low frequency of posts for a news subreddit so it seemed approachable as a first target. I would build a web crawler to watch popular business news sites for new articles, and then leverage an NLP-based article classifier to determine if the article had a high chance of receiving upvotes.</p>
<h2 id="implementation">Implementation</h2>
<h3 id="finding-and-loading-posts">Finding and loading posts</h3>
<p>To train the NLP model that will classify articles I need the article text and their corresponding Reddit scores. Unfortunately, the official Reddit API limits the amount of historic post data you can retrieve to 1000 items. Luckily there is an alternative, you can grab historic post data from <a href="https://pushshift.io/">pushshift.io</a> using code I shamelessly adapted from <a href="https://www.osrsbox.com/blog/2019/03/18/watercooler-scraping-an-entire-subreddit-2007scape/">WaterCooler: Scraping an Entire Subreddit (/r/2007scape)</a>. The output file of the script has individual lines like the one below, containing a JSON object of a post per line:</p>
<pre><code>{"author": "CALIPHATEMEDIA", "author_flair_css_class": null, "author_flair_text": null, "brand_safe": true, "can_mod_post": false, "contest_mode": false, "created_utc": 1514767344, "domain": "caliphatemedia.info", "full_link": "https://www.reddit.com/r/business/comments/7nc5yf/south_korea_to_regulate_bitcoin_trading_further/", "id": "7nc5yf", "is_crosspostable": false, "is_reddit_media_domain": false, "is_self": false, "is_video": false, "locked": false, "num_comments": 0, "num_crossposts": 0, "over_18": false, "parent_whitelist_status": "all_ads", "permalink": "/r/business/comments/7nc5yf/south_korea_to_regulate_bitcoin_trading_further/", "pinned": false, "retrieved_on": 1514841750, "score": 1, "selftext": "", "spoiler": false, "stickied": false, "subreddit": "business", "subreddit_id": "t5_2qgzg", "subreddit_type": "public", "thumbnail": "default", "thumbnail_height": 140, "thumbnail_width": 140, "title": "South korea to regulate bitcoin trading further with tougher measures", "url": "http://www.caliphatemedia.info/2017/12/south-korea-govt-to-introduce-tougher.html", "whitelist_status": "all_ads"}
</code></pre><p>After generating a file with all the historic posts, I loaded the contents referenced by the “url” field of each JSON line into <a href="https://github.com/slaveofcode/boilerpipe3">boilerpipe3</a> which is a python library that simplifies HTML documents into their primary content text.</p>
<figure>
    <img src="https://www.a8b.io/images/reddit/reuters_article.jpg" alt="">
    <figcaption>boilerpipe3 simplifies this (mostly) down to what we really want which is 'By Jeffrey Dastin, Akanksha Rana 4 Min Read (Reuters) - Amazon.com INC AMZN.O on Thursday...'</figcaption>
  </figure>

<p>After loading the article text I did some processing to remove pages that didn’t load properly and to truncate page text to 10k characters at most.</p>
<h3 id="training-the-model">Training the model</h3>
<p>I trained the NLP model for /r/business over a few days on approximately 271k articles from 2018-01-01 to mid-April 2020. I used an <a href="https://docs.fast.ai/text.models.awdlstm">AWD_LSTM</a> (e.g. <code>language_model_learner(data_lm, AWD_LSTM, drop_mult=0.3)</code> and <code>text_classifier_learner(data, AWD_LSTM, drop_mult=0.5)</code>) for the model with discrete labels based on the article score: neutral (0-10 points), okay (10-100), good (100-500), and great (500+). The classes are kind of arbitrary and I’ve changed them around for different iterations and subreddits. The only thing I ended up paying attention to at runtime was the non-neutral class score, so this could have been a binary classifier or even better a classifier that looks at an individual article as a candidate for multiple subreddits rather than training an individual model per subreddit. For world news I had around double the number of articles. In either case I trained in 100k article chunks due to memory limitations, reloading the existing model and tuning with the new data each time.</p>

<h3 id="building-the-bot">Building the bot</h3>
<p>I chose a few sites (Business Insider, Reuters, Bloomberg, CNN, CNBC, BBC, etc.) based on frequent sites for /r/business and put them into a script and built a crawler using requests and BeautifulSoup. Every minute or so I’d crawl the site root for new links and process the linked page with boilerpipe and pass it through the NLP model for scoring. New pages with a non-neutral score of greater than 0.25 (an arbitrary threshold I picked for this particular model) would be flagged and emailed to me using AWS SNS. Initially, I relied on filtering these incoming suggestions and submitting the articles myself using the Reddit app.</p>
<figure>
    <img src="https://www.a8b.io/images/reddit/example_email.png" alt="">
    <figcaption>An example email I received from my site poller that I called 'Reddit Postmaster'.</figcaption>
  </figure>

<h2 id="automation">Automation</h2>
<p>My site poller is acting as a personal news aggregator that I use to generate suggestions for things to post. To remove me from this loop there are a few “last mile” problems to solve. Coding up submitting via the Reddit API is easy enough, but I don’t just submit all the articles that get passed to me, I act as a quality filter choosing not to submit things which don’t seem appropriate. I also gather an appropriate title for the Reddit post. The page title is usually not good as a post title (for example containing redundancies like the site name) directly and needs to be reformatted or the title should instead be extracted from the content for example by picking the most appropriate h1 tag on the page. Rather than refining the model to be better at classifying articles and improve the accuracy of the scoring mechanism, and then coding a new component for extracting the title, I decided to try to encapsulate these tasks into a mechanical turk task and have humans as the final gate-keeper and title generator. I can take the results from these mechanical turk tasks and submit the articles to Reddit via the Reddit API utilizing those results.</p>
<h3 id="mechanical-turk">Mechanical Turk</h3>
<p>Mechanical turk is a service for leveraging humans to complete small tasks for your application. It’s great for augmenting AI applications and collecting data via labeling tasks for them. But using it effectively isn’t without difficulties. The important thing to know about mechanical turk is that many workers on the platform are (sensibly) optimizing for task completion quantity. When using a custom qualifier for tasks, ensure the qualification you’re looking for is not apparent from the question. Similarily a bad HIT (human intelligence task) would be one where you ask the user to read an article and check some box if they think it belongs in some category. For example, I did this with /r/worldnews candidates to ensure that among other things didn’t pertain to US news, however the first fully automated submission I made to /r/worldnews was “Johnson &amp; Johnson to stop selling baby powder in the United States” which was …</p></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.a8b.io/posts/10k-karma-reddit-bot/">https://www.a8b.io/posts/10k-karma-reddit-bot/</a></em></p>]]>
            </description>
            <link>https://www.a8b.io/posts/10k-karma-reddit-bot/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24981153</guid>
            <pubDate>Tue, 03 Nov 2020 16:34:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Color-balancing vote margins and vote totals in the US election map]]>
            </title>
            <description>
<![CDATA[
Score 201 | Comments 57 (<a href="https://news.ycombinator.com/item?id=24979807">thread link</a>) | @mygo
<br/>
November 3, 2020 | https://stemlounge.com/muddy-america-color-balancing-trumps-election-map-infographic/ | <a href="https://web.archive.org/web/*/https://stemlounge.com/muddy-america-color-balancing-trumps-election-map-infographic/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="wrapper">

			<!-- start: #header -->

<!-- end: #header -->




			


<!-- start: #single -->
<main id="single" role="main">

    
    <!-- start: .center -->
    <div>


            <!-- start: .content -->
            <div>

                <article>

                        <header>
                            
                                <p><img src="https://stemlounge.com/content/images/size/w1500/2019/10/muddy_america_2016_weru_animated-1.gif">
                                    
                                </p>

                            <!-- start: .meta -->
                            
                            <!-- end: .meta -->

                            

                        </header>

                    <section>


                        <div><p>Graphs can inform, and informed discussions can be more civil than uninformed ones. But graphs can also mislead, so we need to understand what a graph is saying when we're using it. In 2015 I gave gave a TEDx talk on making clearer election maps. The original recording was lost, then recovered and <a href="https://www.youtube.com/watch?v=U5qn33KR7us">uploaded to Youtube</a> this summer. As election season ramps up, I'd like to continue the discussion by talking about this often-misleading map.</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/countywinner_2016.png"><figcaption>2016 County-Level Winner-Takes-All map</figcaption></figure><!--kg-card-end: image--><p>Different graphs are designed for different purposes. The graph above is a county-level winner-takes-all map. I'll call it a County Winner map for short. Scientists use it to quickly see which way the counties went in an election. While there is arguably no better map for seeing who won in which county, this map can be misleading when used for other purposes. We need to be aware of two of its characteristics:</p><ol><li>It doesn’t express the <strong>relative voting populations</strong> between each county. Instead, it can make people feel like each county has the same population.</li><li>It’s not designed to express the <strong>margin of victory</strong> within each county. It shows who won in a county, even if they won by just one vote. It’s a winner-takes-all graph, after all.</li></ol><h3 id="relative-voting-population">Relative Voting Population</h3><p>Half of the US population lives in these counties:</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/image-1.jpg"><figcaption>Half lives in blue. Half lives in gray. Census/Business Insider</figcaption></figure><!--kg-card-end: image--><p>America can be described as a collection of densely populated metros buffered by less densely populated communities. Here’s what the “population mountains” look like:</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/where_we_live_pop_lg.jpg"><figcaption>This map of U.S. population density appeared in Time magazine Oct. 30, 2006 issue.</figcaption></figure><!--kg-card-end: image--><p>When we take the County Winner map and resize each county’s land-area to be proportionate to its population, here’s how the US looks.</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/image-4.jpg"><figcaption>Mark Newman, University of Michigan</figcaption></figure><!--kg-card-end: image--><p>One downside to the cartogram, however, is that the shape and location of many territories are distorted beyond recognition. This is maybe one reason why the cartogram isn't very mainstream.</p><p>The County Winner map, however, doesn’t convey this relative population information. It's not designed to. But one might think it does. </p><h3 id="margin-of-victory">Margin of Victory</h3><p>In the general election, there are 50 concurrent presidential races, one for each state. In some of these states, the margin of victory turns out to be very small. In New Hampshire, <code>743,117 votes</code> were cast for the president in the 2016 general election. Hillary Clinton won New Hampshire by <code>2,701 votes</code>. We can seat as many people in a set of high school football bleachers.<br></p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/IMG_2944.jpeg"><figcaption>How New Hampshire was won.</figcaption></figure><!--kg-card-end: image--><p>There was a <code>75.03% turnout</code> in New Hampshire, so more people could have voted that didn’t. If just 2,702 more eligible voters in New Hampshire exercised their right to vote and voted for Trump, then New Hampshire would have gone to Trump instead. With such hair thin margins, New Hampshire is neither Blue nor Red in 2016. It’s <code>50:50</code> and leaning red or blue depending on traffic and dinner plans. It would be misleading to have all of New Hampshire colored as either blue or red to represent the statewide popularity of a presidential candidate. </p><p>This characteristic also holds true at the county level. The losing candidate in a county can receive a significant number of votes. In many counties the winner won by less than a 25% margin.</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/2016_margin_histogram_rb.jpg"><figcaption>Kenneth Tay, Stanford University. Modified to add color to the scale and to highlight 25% range.</figcaption></figure><!--kg-card-end: image--><h6 id="a-margin-of-0-is-50-50-clinton-s-county-level-percent-win-margins-are-on-the-left-trump-s-county-level-percent-win-margins-are-on-the-right-the-yellow-area-highlights-counties-won-with-vote-margins-within-25-note-that-these-are-percent-vote-margins-not-absolute-vote-margins">A margin of 0 is 50:50. Clinton's county-level percent-win margins are on the left. Trump's county-level percent-win margins are on the right. The yellow area highlights counties won with vote margins within 25%. Note that these are percent vote margins, not absolute vote margins</h6><p>In general, smaller counties were won by larger percent margins. Larger counties were won by smaller percent margins. So in the counties with the most votes cast, the runner up got a lot of votes, too. </p><p>Here’s what the County Winner map looks like when we account for vote margins by blending each red and blue vote together within each county. Purple represents 50:50:</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/purple-map-2016.png"><figcaption>2016 Purple Map</figcaption></figure><!--kg-card-end: image--><p>The neutralizing map is designed to express vote margins more clearly. It uses a grey intermediary, adjusting for <a href="https://www.fastcompany.com/3035951/the-glaring-design-flaw-in-us-election-maps">the way humans perceive purple</a>. Here’s the 2016 neutralizing map:</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/2016_neutralizing_map.png"><figcaption>2016 Neutralizing Map</figcaption></figure><!--kg-card-end: image--><p>Rarely are all of the votes in a county cast for one candidate. The County Winner map, however, doesn’t convey this win margin information.</p><p>The contiguous United States aren't very contiguous. The County Winner map's inability to express vote population and margin of victory can be misleading. Cartograms account for population, but they distort the shape of the US, which can add confusion. The neutralizing map accounts for vote margin, but it doesn't account for population.</p><p><strong>Can we construct a single map that shows both vote margin and vote population without distorting the shape of the US?</strong></p><p>Here's one way:</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/muddy_america_2016_weru_animated.gif"><figcaption>Animated GIF that goes from the County Winner map to old muddy.</figcaption></figure><!--kg-card-end: image--><p>Here's a less-distracting, static version of the graph:</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/muddy_america_2016_static-1.png"></figure><!--kg-card-end: image--><p>The map leverages Color Theory to express <code>vote margins</code> and <code>vote populations</code> in a 2-dimensional scale. </p><p>Here's the key blown up:</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/muddy_key_labeled_compressed.png"></figure><!--kg-card-end: image--><p>Horizontal scale represents vote margins. Vertical scale represents vote totals.</p><h4 id="lightness-vertical-scale-">Lightness (Vertical Scale)</h4><p>The lighter counties had fewer votes. The darker counties had more votes. </p><h4 id="hue-saturation-horizontal-scale-">Hue + Saturation (Horizontal Scale)</h4><p>The closer a county gets to gray, the closer the votes were 50:50. </p><p>A highly saturated red county was won by Trump with high percent vote margins. A highly saturated blue county was won by Hillary with high percent vote margins.</p><h2 id="the-mathematics-of-the-muddy-map">The mathematics of the muddy map</h2><h4 id="hsl">HSL</h4><p>All colors can be described as a combination of <code><u>H</u>ue(°)</code>, <code><u>S</u>aturation(%)</code>, and <code><u>L</u>ightness(%)</code>. </p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/640px-HSL_color_solid_cylinder_saturation_gray.png"><figcaption>The HSL color model.</figcaption></figure><!--kg-card-end: image--><p>We can leverage these individual components of the <code>HSL color model</code> to faithfully express 2-dimensional data such as vote totals vs margin on a 2d color scale.</p><h4 id="county-fill-colors">County Fill Colors</h4><p>The fill-color of each county is constructed using the MuddyColor algorithm, which is expressed as the following mathematical formula:</p><!--kg-card-begin: html--><!--
MuddyColor =

HSL \left (  

Hue \left (winner(D,R ) \right ), 

\frac{ \left |D-R \right | }{totalVote}, 

 \frac{ \left (1-\frac{totalVote}{upperFence}   \right )*100}{2} + 50

\right )
--><!--kg-card-end: html--><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/muddyColor_Formula-1.gif"><figcaption>Formula for county fill color</figcaption></figure><!--kg-card-end: image--><p>This produces the following two dimensional scale, which also doubles as a map key, with the upper fence labeled for the 2016 data set:</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/muddy_key_labeled_compressed.png"><figcaption>Color scale produced by MuddyColor, used for county fill colors.</figcaption></figure><!--kg-card-end: image--><h4 id="county-border-colors">County Border Colors</h4><p>For the borders of each county, I use the same formula, but just give them a constant lightness (L) of 50%. </p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/muddyBorderColor_Formula.gif"><figcaption>Formula for county border color</figcaption></figure><!--kg-card-end: image--><p>This results in a 1-dimensional scale which we use for the county borders. It's the same color-scale scale used in the Neutralizing Map, which is designed to more-accurately express vote margins. &nbsp;<code>Left = higher DEM %margin</code>. <code>Right = higher GOP %margin</code>.</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/neutralized_scale.png"><figcaption>Color scale produced by MuddyBorderColor, used for county border colors.</figcaption></figure><!--kg-card-end: image--><p>Giving each county an opaque border color allows even the lightest-filled counties to be recognized, including their vote margins.</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/muddy_zoom.png"><figcaption>With opaque county borders, you can see the counties with even the lowest vote totals.</figcaption></figure><!--kg-card-end: image--><p>You don't need to look at the whole nation to see where one county's vote total lies on the overall lightness scale. The &nbsp;<code>county border color</code> and the &nbsp;<code>county fill color</code> differ only by lightness, so the greater the <code>contrast</code> between a county's border color and its fill color, the lower its vote total.</p><h4 id="upper-fence">Upper Fence</h4><p>A few counties have enough votes to skew the vote totals scale. Here's how the graph looks when the <code>vote totals</code> scale maxes out at <code>2,514,055</code>, the maximum number of votes in a county:</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/muddy_no_upper_limit-1.jpg"><figcaption>A few counties have enough votes to skew the whole vote scale.</figcaption></figure><!--kg-card-end: image--><p>One may suggest using a logarithmic scale to bring the sky-high outliers down to Earth. However, this would be visually misleading. A logarithmic scale flattens the min:max vote totals proportion from <code>1:39,282</code> closer to<code>1:3.5</code>, visually equating population mountains with population plains.</p><!--kg-card-begin: image--><figure><img src="https://stemlounge.com/content/images/2019/10/logarithmic_scale-16.png"><figcaption>In this log-scale graph of northwest Texas, can you distinguish a county with 1,000 votes from one with 50,000 votes?</figcaption></figure><!--kg-card-end: image--><p>We maintain a linear vote totals scale and use the statistical <code>upper fence</code> to account for outliers. The statistical upper fence can be calculated using the formula <code>Q3 + 1.5 * IQR</code>. Since the county vote margins are only concerned with %DEM|%GOP, county vote totals are DEM+GOP. For vote totals, we calculate the statistical upper fence to be <code>59,828 DEM+GOP votes</code>. We need to keep in mind that <code>432 counties</code> have vote totals ≥ <code>59,828 DEM+GOP</code> and are fully opaque in the Muddy Map. </p><h2 id="practical-uses-of-the-muddy-map">Practical uses of the Muddy Map</h2><p>The formulas give the Muddy Map graph some interesting characteristics. For each county, both the percent vote margin, as well as the vote totals (≤ the statistical upper fence), are embedded in the colors of the graph.</p><p>The Practical Characteristics of the Muddy Map Algorithm:</p><ul><li>There are only two hues, <code>red (hue#0 aka hue#360)</code> and <code>blue (hue#240)</code>. Red indicates GOP win, blue indicates DEM win.</li><li>A county with a <code><em>vote margin</em> of 100%</code> will have <code>100% saturation</code>. </li><li>A county with a <code><em>vote margin</em> of 0%</code> will have <code>0% saturation</code>. Such a county will be a pure gray, since gray appears at 0% saturation. So the closer a county gets to 50:50, the more gray it appears. No county in the 2016 election had a vote margin of 0%.</li><li>A county with <code>0 <em>total votes</em></code> will have <code>100% lightness</code>. Pure white appears at 100% lightness, so the closer the vote totals get to 0, the more white the counties appear. &nbsp;No county in the 2016 election had 0 votes. </li><li>A county with <code>≥ 59,828 <em>total votes</em></code> (the statistical upper fence) has <code>50% lightness</code>. &nbsp;432 counties in the 2016 election have this property.</li></ul><p>If a computer can faithfully render all of the colors described by the formula, then you can use a color picker to get …</p></div></section></article></div></div></main></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://stemlounge.com/muddy-america-color-balancing-trumps-election-map-infographic/">https://stemlounge.com/muddy-america-color-balancing-trumps-election-map-infographic/</a></em></p>]]>
            </description>
            <link>https://stemlounge.com/muddy-america-color-balancing-trumps-election-map-infographic/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24979807</guid>
            <pubDate>Tue, 03 Nov 2020 14:16:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Dark’s new backend will be in F#]]>
            </title>
            <description>
<![CDATA[
Score 343 | Comments 256 (<a href="https://news.ycombinator.com/item?id=24979578">thread link</a>) | @nikivi
<br/>
November 3, 2020 | https://blog.darklang.com/new-backend-fsharp/ | <a href="https://web.archive.org/web/*/https://blog.darklang.com/new-backend-fsharp/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://blog.darklang.com/content/images/size/w300/2020/11/El5FcMQWkAAnkTX.jpeg 300w,
                            https://blog.darklang.com/content/images/size/w600/2020/11/El5FcMQWkAAnkTX.jpeg 600w,
                            https://blog.darklang.com/content/images/size/w1000/2020/11/El5FcMQWkAAnkTX.jpeg 1000w,
                            https://blog.darklang.com/content/images/size/w2000/2020/11/El5FcMQWkAAnkTX.jpeg 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://blog.darklang.com/content/images/size/w2000/2020/11/El5FcMQWkAAnkTX.jpeg" alt="Dark's new backend will be in F#">
            </figure>

            <section>
                <div>
                    <p><em>Welcome HN! Dark is a programming language, structured editor, and infrastructure—all in one—whose goal is to make it 100x easier to build backend services. Check out the <a href="https://darklang.com/">website</a>, our <a href="https://blog.darklang.com/what-is-dark/">What is Dark</a> post, and <a href="https://blog.darklang.com/how-dark-deploys-code-in-50ms/">How Dark deploys in 50ms</a> for more. Thanks for checking us out!</em></p><hr><p><em>Part of a set with <a href="https://blog.darklang.com/leaving-ocaml/">Leaving OCaml</a> and <a href="https://blog.darklang.com/why-dark-didnt-choose-rust/">Why Dark didn't choose Rust</a>.</em></p><p>Nothing in my life so far would have prepared me for the fact that I would be willfully choosing to move to .NET, but it's 2020, and nothing matters anymore.</p><p>I've been evaluating new languages for the Dark backend over the last 2 months or so. For a <a href="https://blog.darklang.com/leaving-ocaml/">bunch of reasons</a>, OCaml has been a little unsatisfactory.</p><p>Over the last few years we've always said "when we rewrite the backend", "at some point we'll rewrite and this will go away", etc. There's a lot of new code to be written on the backend, to meet our roadmap. Are we really going to write it once, and then rewrite it later? Or would it be faster to just port it now, and write the new code in the new stack?</p><p>Ultimately, I decided that if there was going to be a change, now was the time. And more importantly, if there wasn't going to be a change, now was an excellent time to fully commit to OCaml, and not be second guessing the choice.</p><p>Initially, I expected to go to Rust. <a href="https://blog.darklang.com/first-thoughts-on-rust-vs-ocaml/">Rust has excellent tooling, great libraries, a delightful community, etc</a>. But after spending about a month on it, I can't say I like writing Rust. Especially, I don't like writing async code in Rust. I like a nice high level language, and that's kinda what you need when you have a project as big as Dark to build. And Rust is not that. I'll publish "Why Dark didn't choose Rust" next. Or I might call it "you'll never believe just how much a Garbage Collector does for you!", because that's the summary.</p><p>When I was working on <a href="https://github.com/darklang/fizzboom/">Async benchmarks</a> before, what I was really doing was evaluating "are any of these OCaml alternatives better? And if so are they also faster?". I evaluated and expected not to like F#. I actually quite like it. It's close enough to OCaml, has great library support, and tooling which so far has been a mix of great and terrible. The 90's Microsoft tooling is still there, and that bit isn't all that great, but overall it's a much better situation than OCaml or Rust.</p><h2 id="why-did-i-chose-f-">Why did I chose F#?</h2><p>Let's start with the obvious, F# is OCaml. It's OCaml backed by the world's largest and most experienced creators of programming languages. And in the areas that OCaml is great, F# is also great! Sum types, static typing, eager execution, pipelines, immutable values, all of this is really great.</p><p>It actually has a much better type system, in my opinion. One thing that sticks out is that OCaml made it really cumbersome to use maps. Like, hashtables, associative arrays, whatever you call them. It seems the old version of Real World OCaml has been taken down, so I can't show you how unpleasant they were at the start. Now, in the latest version, they are <a href="https://dev.realworldocaml.org/maps-and-hashtables.html">more moderately unpleasant</a> to use. Whereas in F#, you have a <code>Map&lt;OneType,AnotherType&gt;</code> and that's really it. Magic!</p><p>Of course, the main reason I chose .NET was the libraries. It has libraries for everything, what a surprise. While there aren't all that many F# first-party libraries, every vendor out there has a .NET SDK that you can use directly from F#. I look forward to finally having first-party support for <a href="https://honeycomb.io/">Honeycomb</a>, <a href="https://rollbar.io/">Rollbar</a>, and Google Cloud. I'm even finally going to get to use <a href="https://launchdarkly.com/">LaunchDarkly</a>, after <a href="https://www.heavybit.com/library/podcasts/to-be-continuous/">years of telling Edith</a> I would.</p><p>The other thing I've really enjoyed is how good the docs and community content are. A lot of OCaml community content is on the language and what you can do with it. F# developers seem to just want to get shit done. There's a million blog posts, youtube videos, etc, from enterprise software developers talking about the best way to build web software. And then of course the massively detailed and useful <a href="https://fsharpforfunandprofit.com/">FSharpForFunAndProfit</a>, as well as <a href="http://tomasp.net/">Tomas Petricek</a>'s work - it's really great.</p><p>I think most of this is due to the size of the community. I've heard people say that there are very few F# developers; something like there's 1M C# users, 100k VB users, and 10K F# users, or something like that. I'm not sure exactly what counts as user, but I would imagine that OCaml has fewer than 100 "users" in this metric, so it feels like I'm moving to a massive community.</p><p>Not everything is amazing though. The build system is attrocious. While <code>paket</code> is roughly on par with <code>esy</code>, msbuild is 1000 times worse than <code>dune</code>. An incremental build in dune is like 1s for me, and 6s in .NET, even if nothing is happening. I know they have fancy incremental compilers for .NET so this puzzles me; if anyone has tips on getting really fast compilation in F#, <a href="mailto:paul@darklang.com">I would appreciate them</a>.</p><p>An important thing to check was whether I could compile my code to JS. Dark's execution engine runs it the editor as well, and that's one of the core things that makes Dark special. Because of this, I want to take unaltered backend code and compile it directly to JS. This isn't like <a href="https://rescript-lang.org/">Rescript</a> (which is OCaml compiled to JS with slightly different semantics and ecosystem, or it's equivalent in F#, <a href="https://fable.io/">Fable</a>). Fortunately, F# code can be compiled to Wasm using <a href="https://dotnet.microsoft.com/apps/aspnet/web-apps/blazor">Blazor</a>. Blazor compiles the .NET runtime to WASM and runs your code in that. It <a href="https://github.com/darklang/dark/tree/main/fsharp-backend/src/Wasm">barely took any code</a> to get working either (though figuring out the right incantation was not trivial).</p><h2 id="feedback-from-leaving-ocaml-blog-post">Feedback from "Leaving OCaml" blog post</h2><p><a href="https://blog.darklang.com/leaving-ocaml/">Yesterday's post</a> got a lot of people to add their opinions. In addition to some <a href="https://news.ycombinator.com/item?id=24976630">Scala</a> and <a href="https://twitter.com/fakenickels/status/1323304778089304070">Erlang</a> love, a lot of people pointed to F#:</p><blockquote>So...I think a decent choice to make here is to switch from OCaml to F#. You'll get almost all of the benefits and most of the drawbacks go away. And for the most part, you can directly translate the code from OCaml to F#. - <a href="https://news.ycombinator.com/item?id=24978526">darksaints</a></blockquote><blockquote>I've been using F# on GCP in production for 3 years now and it's fantastic and only getting better. You can leverage existing .NET libraries (for example, you get official GCP libraries from google) and if you use them enough it's easy enough to write a functional wrapper around them. - <a href="https://news.ycombinator.com/item?id=24978526">angio</a></blockquote><blockquote>We have considered OCaml but went for F# instead. I could not be happier. Great libraries, good tooling, in 2020 F# is a first class citizen in the cloud thanks to C# and .NET Core. You can develop on Linux, Windows, MacOS and without modification it works. Compilation times are great. Unless you want to deal with the low level nature and the C++ influence in Rust F# is a much more logical step to move from OCaml. There is dotnet fsi for REPL too. F# has access to C# libraries and it is relatively easy to write a thin wrapper that convert nulls to Nones, so you are null safe or C# style functions to ML style functions so you can use |&gt; or &lt;| etc. - <a href="https://lobste.rs/s/bcwbuw/leaving_ocaml#c_uoy61u">l1x</a></blockquote><h2 id="next-steps">Next steps</h2><p>I recently merged the <a href="https://github.com/darklang/dark/tree/main/fsharp-backend">first F# code into the codebase</a>. It's an async version of the core of the Dark interpreter, connected to Giraffe (F#'s low-level interface to .NET's Kestrel web server).</p><p>My plan is to reimplement the same language, but with some of the learnings that are in the <a href="https://roadmap.darklang.com/">roadmap</a>. For example:</p><ul><li><code>Result</code> and <code>Options</code> will be types, not special cased into the language</li><li><code>Int</code> will be infinite precision (this is technically a breaking change, but not a significant one AFAICT)</li><li>breaking out the API server, using F# builtin middleware libraries</li><li>refactoring the Dark public HTTP server into composable middleware, available from within Dark</li></ul><p>I'll be working on making the equivalent to the existing Dark interpreter, keeping the semantics the same. After that, I'll be making new features from the <a href="https://roadmap.darklang.com/">Dark Roadmap</a>.</p><h2 id="implementation-plan">Implementation plan</h2><p>Dark's backend is 37K lines of OCaml, of which 8K lines are tests, and 10K lines are the Dark standard library. So there's about 20K lines to port. Should be fun. My implementation plan is to get to parity - there's plenty of time after that to take advantage of the ecosytem:</p><ul><li>finish the interpreter</li><li>connect Dark's F# backend to Dark's DB, so it can read the same data</li><li><s>compile Dark's F# interpreter to JS</s> (done, see above)</li><li>make an OCaml library to deserialize the binary opcodes in the DB and covert them into F# (via, I presume, a JSON intermediary). This will allow incoming requests to (optionally) be routed to the F# service.</li><li>add a fuzzer to ensure the semantics of the OCaml and F# versions of Dark are the same (especially the library functions)</li><li>do all the devops (getting it into k8s, etc)</li><li>add the APIs we have available in OCaml</li><li>add a way for users to safely try their code in the new version</li><li>port over 170 or so functions we have in the standard library</li><li>start recording traces using <a href="https://blog.darklang.com/evolving-darks-tracing-system/">the new design</a> (this is actually the main thing driving the whole change, believe it or not!)</li><li>use <a href="https://www.honeycomb.io/">Honeycomb</a>, R<a href="http://rollbar.com/">ollbar</a>, and Google Cloud using their .NET native interfaces</li><li>port our <a href="https://github.com/darklang/dark/tree/main/services">various services</a> to F# (lower priority)</li><li>port our accounts to self-managed from Auth0</li><li>translate the <a href="https://docs.darklang.com/contributing/ocaml-for-dark-developers">contributor docs</a> to F#</li></ul><p>There's lots to do, and <a href="https://docs.darklang.com/contributing/getting-started">Dark contributors</a> are welcome to take part. Porting standard library functions might be an easy place to get started, as is adding language features. Most things are a straight port from OCaml, except as mentioned above. As always, feel free to ask in <a href="https://darklang.com/slack-invite">the Slack</a> or <a href="https://github.com/darklang/dark/issues">issues</a> if you've any questions.</p><hr><p><em><em><em><em><em><em><em><em>You can sign up for Dark </em></em></em></em></em></em></em></em><a href="https://darklang.com/signup" rel="noopener nofollow"><em><em><em><em><em><em><em><em>here</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em>. For more info on Dark, follow our </em></em></em></em></em></em></em></em><a href="https://blog.darklang.com/rss" rel="noopener nofollow"><em><em><em><em><em><em><em><em>RSS</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em>, follow </em></em></em></em></em></em></em></em><a href="https://twitter.com/darklang" rel="noopener nofollow"><em><em><em><em><em><em><em><em>us</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em> (or </em></em></em></em></em></em></em></em><a href="https://twitter.com/paulbiggar" rel="noopener nofollow"><em><em><em><em><em><em><em><em>me</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em>) on Twitter, join our </em></em></em></em></em></em></em></em><a href="https://darklang.com/slack-invite" rel="noopener nofollow"><em><em><em><em><em><em><em><em>Slack Community</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em>, watch our </em></em></em></em></em></em></em></em><a href="https://github.com/darklang/dark" rel="noopener nofollow"><em><em><em><em><em><em><em><em>GitHub repo</em></em></em></em></em></em></em></em></a><em>, or join our <a href="http://darklang.com/mailing-list">mailing list</a><em><em><em><em><em><em><em>.</em></em></em></em></em></em></em></em></p><p><em>Thank you<a href="https://twitter.com/JaggerJo1/status/1323571699330260993"> JaggerJo</a> for the header image!</em></p>
                </div>
            </section>



        </article>

    </div>
</div></div>]]>
            </description>
            <link>https://blog.darklang.com/new-backend-fsharp/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24979578</guid>
            <pubDate>Tue, 03 Nov 2020 13:45:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Suzieq: Network Observability]]>
            </title>
            <description>
<![CDATA[
Score 22 | Comments 4 (<a href="https://news.ycombinator.com/item?id=24979461">thread link</a>) | @gjvc
<br/>
November 3, 2020 | https://suzieq.readthedocs.io/en/latest/ | <a href="https://web.archive.org/web/*/https://suzieq.readthedocs.io/en/latest/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        <div>
          
          <div role="main">
            <div>
              
                
<p><strong>Suzieq</strong> is both a framework and an application using that framework, that is focused on 
<strong>improving the observability of your network</strong>.  We define observaility as the ability of a system to 
answer either trivial or complex questions that you pose as you go about operating your network. How easily 
you can answer your questions is a measure of how good the system's observability is. A good observable 
system goes well beyond monitoring and alerting. Suzieq is primarily meant for use by network engineers and designers.</p>
<p>Suzieq does multiple things. It collects data from different devices and systems. It normalizes the data and 
then stores it in a vendor independent way. Then it allows analysis of that data. </p>
<p>We believe Suzieq is novel because it is a disaggregated framework that allows you to independently pick:</p>
<ul>
<li>how you gather your data (agentless or agent-based)</li>
<li>how you store your data</li>
<li>how you interact with the data i.e. how you ask the questions and how you see the answers.</li>
</ul>
<p>With the applications that we build on top of the framework we want to demonstrate a different and more 
systematic approach to thinking about networks. We want to show how useful it is to think of your network holistically.</p>
<p>In this very early release of Suzieq, we've chosen some answers for the framework to get the ball rolling. </p>
<ul>
<li>We gather data using an agentless model using either SSH or REST API as the transport. </li>
<li>We normalize the data into a vendor-agnostic format.</li>
<li>We store all data in files using the popular big data format, Parquet. </li>
<li>All the analysis are exposed either via a CLI or via Python objects. The output can be rendered in various formats from plain text to JSON and CSV.</li>
<li>The analysis engine used in this release is pandas.</li>
</ul>
<p><strong>We support gathering data from Cumulus, Arista, JunOS and NXOS routers, and Linux servers.</strong> We gather:</p>
<ul>
<li>Basic device info</li>
<li>Interfaces</li>
<li>LLDP</li>
<li>MAC address table</li>
<li>MLAG (only for Cumulus and EOS at this time)</li>
<li>Routing table</li>
<li>ARP/ND table</li>
<li>OSPFv2</li>
<li>BGP (v4 unicast, v6 unicast and evpn AFI/SAFI)</li>
<li>EVPN VNI info (not for EOS at this time)</li>
</ul>
<p>We are just getting started with Suzieq. As befitting an early release, what you see is only a brief 
demonstration of what this approach can bring about. We've many, many ideas to implement in our upcoming 
releases, but we wanted to get this out so that people can start using it. And start understanding their 
networks to solve problems, validate or to make changes.</p>
<p>You can join the conversation via <a href="https://netenglabs.slack.com/">slack</a>. Send email to Dinesh or Justin with the email address to send the Slack invitation to. </p>
<p>We're also looking for collaborators to help us make Suzieq a truly useful multi-vendor, open source platform 
for observing all aspects of networking. Please read the <a href="https://suzieq.readthedocs.io/en/latest/CONTRIBUTING.md">collaboration document</a> for 
ideas on how you can help. </p>
              
            </div>
          </div>
          
      
        </div>
      </div></div>]]>
            </description>
            <link>https://suzieq.readthedocs.io/en/latest/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24979461</guid>
            <pubDate>Tue, 03 Nov 2020 13:32:47 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[URLs in C (2011)]]>
            </title>
            <description>
<![CDATA[
Score 61 | Comments 23 (<a href="https://news.ycombinator.com/item?id=24979396">thread link</a>) | @susam
<br/>
November 3, 2020 | https://susam.in/blog/urls-in-c/ | <a href="https://web.archive.org/web/*/https://susam.in/blog/urls-in-c/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p>By <b>Susam Pal</b> on 03 Jun 2011</p>
<p>
Here is an interesting C puzzle I created recently. It is a silly one
but you might find it amusing.
</p>

<pre><code>#include &lt;stdio.h&gt;

int main()
{
    https://susam.in/
    printf("hello, world\n");
    return 0;
}</code>
</pre>

<p>
This code compiles and runs successfully.
</p>

<pre><samp>$ <kbd>c99 hello.c &amp;&amp; ./a.out</kbd>
hello, world</samp>
</pre>

<p>
However, the <a href="http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf">C99
standard</a> does not mention anywhere that a URL is a valid syntactic
element in C. How does this code work then?
</p>

<p>
<em><strong>Update on 04 Jun 2011:</strong> The puzzle has been solved
in the <a href="https://susam.in/blog/urls-in-c/comments/">comments</a> section. If you want to think
about the problem before you see the solutions, this is a good time to
pause and think about it. There are spoilers ahead.</em>
</p>

<p>
The code works fine because <code>https:</code> is a label and
<code>//</code> following it begins a comment. In case, you are
wondering if <code>//</code> is indeed a valid comment in C, yes, it is,
since C99. Download the <a href="http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf">C99
standard</a>, go to section 6.4.9 (Comments) and read the second
point which mentions this:
</p>

<blockquote>
Except within a character constant, a string literal, or a comment, the
characters <code>//</code> introduce a comment that includes all
multibyte characters up to, but not including, the next new-line
character. The contents of such a comment are examined only to identify
multibyte characters and to find the terminating new-line character.
</blockquote>

<div>
  <h2>More ...</h2>
  <p>
    If you liked this post, you might also like these:
  </p>
  <ul>
     <li><a href="https://susam.in/blog/sequence-points/">Sequence Points in C</a></li>
     <li><a href="https://susam.in/blog/stack-overwriting-function/">Stack Overwriting Function in C</a></li>
     <li><a href="https://susam.in/blog/writing-boot-sector-code/">Writing Boot Sector Code in ASM</a></li>
     <li><a href="https://github.com/susam/uncap">Map Caps Lock to Escape</a></li>
  </ul>
  <p>
    Also,
    <a href="https://twitter.com/intent/follow?screen_name=susam">follow me on Twitter</a>
    where I often post about Python, Lisp, Linux, Unix Shell, TeX, Vim,
    InfoSec, mathematics, etc.
  </p>
</div>


</div></div>]]>
            </description>
            <link>https://susam.in/blog/urls-in-c/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24979396</guid>
            <pubDate>Tue, 03 Nov 2020 13:25:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[“Computer Unit” – A PDP-11/34 at my school (1979)]]>
            </title>
            <description>
<![CDATA[
Score 34 | Comments 7 (<a href="https://news.ycombinator.com/item?id=24979179">thread link</a>) | @qmacro
<br/>
November 3, 2020 | https://qmacro.org/2020/11/03/computer-unit-1979/ | <a href="https://web.archive.org/web/*/https://qmacro.org/2020/11/03/computer-unit-1979/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p><em>I’ve transcribed an article about the arrival of the “Computer Unit” - a PDP-11/34 - at my school in 1979. The unit became the early focus of a fascination with computing that’s never left me.</em></p>

<p>I went to school in the late 1970s and early 1980s - the dawn of computing for everyone. My very first experience of computing was at a terminal connected to a timesharing minicomputer, rather than at the keyboard of one of the personal computers of the day.</p>

<p>There was an article in the 1979 edition of my school’s magazine “The Hulmeian”, written by our head of Mathematics Morris Loveland. It brings back many happy memories, and provides some insight into computing in the early days.</p>

<p>Below the article, I’ve included some pictures accompanied by brief descriptions.</p>

<p><em>COMPUTER UNIT</em></p>

<p><em>In 1974 the School purchased a single computer terminal, a TEXAS 733, and established the G.P.O. dial-up link to Salford University. This project, initially between School and the University, made available on-line computer time to us and later to other educational establishments. It proved to be a most useful and successful facility and reports have been given in this magazine of some of the work undertaken in the five years in which the link was used. The School had between ten and fifteen hours of on-line time each week, mainly during lunch hours and after school. Some time was available during teaching time and a large number of boys had experience of using the BASIC language to a large remote processor.</em></p>

<p><em>Computing was mainly organised for small groups or for individual users, although a certain amount of class teaching was undertaken. The limitations of a single terminal caused delays and frustration. Boys were foreced to wait to use the system and it was found to be extremely difficult to teach a class of thirty boys where the visual display was a single sheet of typed material. Salford University extended the computer facility to several other schools resulting in a considerable reduction in the on-line time available to us.</em></p>

<p><em>Early in 1978 it was decided to investigate the possibility of installing a complete on-site computer system at School. The searches took nearly a year and in that time a system which would satisfy the requirements of the School was determined. The financial aspects were agreed in November 1978 and the system was delivered in January 1979.</em></p>

<p><em>The computer which has been installed is a SYSTIME 3000 comprising a PDP11/34 processor with 196Kb of working memory, two 4.8Mb disc drives for data storage, three visual display terminals (one of which is used for system control), a Superterm paper printer and the necessary hardware to include the original Texas terminal into the system. Thus four terminals instead of one are available for use with no restriction on the time when a boy may use the computer.</em></p>

<p><em>The language used is BASIC PLUS which is a variant of the BASIC language used during the past five years. Very few problems have been experienced with this minor change of language and it is a most suitable language for teaching purposes. BASIC PLUS is interactive, that is, one which enables a two way ‘conversation’ between user and machine. If an error is made by the user, either in typing or in the logic of what is communicated to the machine, he is informed of that error immediately and can make the required corrections.</em></p>

<p><em>The processor and system control is housed in the careers room and is linked by cables running across the quadrangle and over the roof of the Science block to room 34. This room has been redesigned and redecorated to be a terminal room, housing at present the four computer terminals.</em></p>

<p><em>The system is a fairly standard computer package apart from one important modification. The signal from one visual display unit is taken and fed to a television monitor. Normally a single terminal is used by an individual or at most by a small group working on a particular project. The intention of having the signal from one terminal displayed on a large television monitor was to enable full classes of thirty boys to see a particular piece of computing. However, one monitor proved insufficient and by including a signal converter and amplifier the signal from one terminal can now be displayed on three domestic television sets. When a full class is taken into the terminal room teaching can be given to all by linking all four terminals together and displaying the data on them and on the three television sets. As far as is known this particular part of the system is an innovation as regards the teaching of computing in schools, particularly as part of the electronics required to convert the signals to be compatible with domestic television sets was designed and built in School.</em></p>

<p><em>The system is thus being used in two different ways: for individual and small group activity or with the system linked together for class teaching. So far no examination teaching has been undertaken and at present none is envisaged. The intention is to use the computer in the classroom as a tool to teach a computer language, which will enable boys to undertake projects on their own, and as an aid to enrich and extend the normal teaching of Mathematics. Boys will find that they are taken to the terminal room perhaps for a complete period or for only ten minotes of a Mathematics period during which some particular part of the subject matter being developed will be illustrated using the computer.</em></p>

<p><em>The system has been planned with future expansion in mind. When the wiring was installed two extra cables were taken into room 34; and therefore two more terminals can be added to the system fairly easily as and when they are required. Further expansion is possible; up to twenty-four terminals can be serviced by the processor! To achieve this additional memory will have to be added to the processor.</em></p>

<p><em>Following the delivery of the system in January 1979 and after all testing had been carried out by the suppliers the computer was in limited use in early March. Since then the number of users has increased considerably. The computer is available for general use from 8.00 am to 5.00 pm and is heavily used by boys from the first to the sixth form before morning school, during the lunch hour and after school. Considerable use has been made during teaching time for class sessions, and sixth formers are able to use the computer in their private study time. During the final three weeks of the summer term about nine hundred log-ins were recorded! As this period included the preparation for the Open Days when the system was out of general use, there appears to be a growing for the facility the computer now provides.</em></p>

<p><em>During the summer term three after-school courses were provided to each the BASIC language, two for juniors new to the system and one for those with considerable experience in computing. It is hoped that more of these courses will be provided for boys at all levels in the School in the coming years.</em></p>

<p><em>Looking back over the period of the installation of the computer and the enthusiasm it has generated with boys of all ages, I anticipate a growing demand for computer time and an enhancement of the teaching of Mathematics in the School.</em></p>

<p><em>M.L.</em></p>

<p><img src="https://qmacro.org/content/images/2020/11/computerunit.jpg" alt="A picture of schoolboys using the terminals of the computer unit">
<em>A photo that accompanied the article in the school magazine</em></p>

<p>Here’s a grainy photo that accompanied the article in the school magazine. You can see one of the “VDU” (Visual Display Unit) terminals, and you can see a better picture of one of these in the photo of the Systime unit at the end of this post, but can you also spot the <a href="http://vtda.org/docs/computing/IntertecDataSystems/1100500-00_SuperTermMaintenance_1978.pdf">Superterm</a> paper-based terminal (back right)?</p>

<p><img src="https://qmacro.org/content/images/2020/11/superterm.png" alt="A grainy photo of the &quot;Superterm Data Communications Terminal&quot;">
<em>A Superterm Data Communications Terminal</em></p>

<p>Moreover, furthest away from the camera, there’s the original Texas 733 terminal, also paper-based. Here’s a better picture of one, from the <a href="http://www.bitsavers.org/pdf/ti/terminal/brochures/TI-327-A-10M_Silent_700_Model_732_733_Brochure_Sep_1973.pdf">original brochure</a>.</p>

<p><img src="https://qmacro.org/content/images/2020/11/texas.png" alt="A Texas 733 terminal&quot;">
<em>A Texas 733 terminal</em></p>

<p>Here’s a picture of what the computer unit looked like - it’s a photo (courtesy of <a href="http://www.chilton-computing.org.uk/">Computing at Chilton</a>, thank you) of a Systime unit, and the terminal on the desk is the same as those that we had in the computer room.</p>

<p><img src="https://qmacro.org/content/images/2020/11/systime.png" alt="A picture of a very similar Systime unit">
<em>A Systime unit</em></p>

  </div>

</article>

      </div>
    </div></div>]]>
            </description>
            <link>https://qmacro.org/2020/11/03/computer-unit-1979/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24979179</guid>
            <pubDate>Tue, 03 Nov 2020 12:55:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[We made our SaaS home page cookie-free]]>
            </title>
            <description>
<![CDATA[
Score 374 | Comments 181 (<a href="https://news.ycombinator.com/item?id=24979167">thread link</a>) | @jivings
<br/>
November 3, 2020 | https://blog.leavemealone.app/no-more-cookies/ | <a href="https://web.archive.org/web/*/https://blog.leavemealone.app/no-more-cookies/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://blog.leavemealone.app/content/images/size/w300/2020/11/cookies.jpg 300w,
                            https://blog.leavemealone.app/content/images/size/w600/2020/11/cookies.jpg 600w,
                            https://blog.leavemealone.app/content/images/size/w1000/2020/11/cookies.jpg 1000w,
                            https://blog.leavemealone.app/content/images/size/w2000/2020/11/cookies.jpg 2000w" sizes="(max-width: 800px) 400px,
                            (max-width: 1170px) 700px,
                            1400px" src="https://blog.leavemealone.app/content/images/size/w2000/2020/11/cookies.jpg" alt="How we made our SaaS homepage cookie-free 🍪">
            </figure>

            <section>
                <div>
                    <p>If you've browsed the web in the last 10 years then you'll have seen more than your fair share of cookie banners!</p><p>Intended as a workaround to the <a href="https://www.cookielaw.org/the-cookie-law/">2011 EU Cookie Law</a>, cookie consent banners have become so commonplace that most people <a href="https://www.amazeemetrics.com/en/blog/76-ignore-cookie-banners-the-user-behavior-after-30-days-of-gdpr/">don't even bother to look at them</a>, or just click accept on everything. </p><!--kg-card-begin: image--><figure><img src="https://blog.leavemealone.app/content/images/2020/11/image-10.png"></figure><!--kg-card-end: image--><!--kg-card-begin: image--><figure><img src="https://blog.leavemealone.app/content/images/2020/11/image-9.png"></figure><!--kg-card-end: image--><p>As I see it, the purpose of the Cookie Law was to <strong>stop websites from storing data in your browser unless they absolutely needed to</strong>, by requiring them to prompt their visitors for consent. The end goal being to give you more control over your online privacy, stop needless tracking, and make website owners think twice about what they were doing. In short - a good intentioned idea.</p><p>However, basically every website in the world took the easier, less introspective approach - prompting for consent - creating an objectively worse web experience for everyone.</p><p>Since at <a href="https://leavemealone.app/">Leave Me Alone</a> we're trying to set an example of how to run a privacy friendly company, we decided to figure out how we could remove all the cookies from our landing page without sacrificing anything important. This means no more cookie banner, no more tracking! 🍪</p><p>We had three main cookie monsters that will be well known to SaaS companies;</p><ol><li>Web analytics</li><li>Live Chat</li><li>Security (DDOS protection etc)</li></ol><p>Before we start, I'm not neccessarily saying I distrust any of these companies and how they use cookies...so make your own judgement about them. We're just in this to get cookie free! </p><h2 id="web-analytics">Web Analytics</h2><p>To track our page views and general visitor behaviour, like <a href="https://trends.builtwith.com/analytics/Google-Analytics">most sites</a>, we were using Google Analytics. </p><p>Google Analytics sets a little cookie on page load to "remember" what a visitor has done on each page as they navigate around a site. This allows it to create a profile of the visitor so you can figure out exactly what it takes to get a visitor to sign up or convert, or whatever it is that you're trying to measure.</p><p>Realistically we never really use this information, so it's an easy one to get rid of. There are actually a handful of simpler web analytics platforms that don't use cookies, and we opted to try <a href="https://simpleanalytics.com/">Simple Analytics</a>. With this we get basically all the info we ever got out of Google Analytics (page views), so it seems like a great compromise.</p><p>You can even make your analytics pages public, which fits nicely with our "<a href="https://blog.leavemealone.app/how-we-share-company-stats-and-metrics-publicly/">open startup</a>" work ethic. For example you can view the stats for this <a href="https://simpleanalytics.com/blog.leavemealone.app">blog post here</a>!</p><!--kg-card-begin: image--><figure><img src="https://blog.leavemealone.app/content/images/2020/11/image-1.png"><figcaption>The page view anaylitcs for Simple Analyics - meta!</figcaption></figure><!--kg-card-end: image--><p>🍪 Cookie Verdict = 5/5, no cookies, no problem.</p><!--kg-card-begin: html--><!--kg-card-end: html--><h2 id="live-chat">Live Chat</h2><p>Having an annoying chat widget is another common thing for a SaaS homepage. We used to use Crisp for this, which uses a cookie to match a browser session to messages in their system. Their <a href="https://help.crisp.chat/en/article/crisp-chatbox-cookie-and-ip-policy-1147xor/">privacy policy</a> says this is "not used for tracking purposes", but given all the data they show in their UI about visitors that's not exactly much comfort. </p><p>(It even guesses a load of personal info from the visitors' email address like what company they work for and their job title using something called <a href="https://go.crisp.chat/notice/domain-enrich/">Crisp Enrich</a> which is apparently impossible to find any info about but sounds shady as hell).</p><!--kg-card-begin: image--><figure><img src="https://blog.leavemealone.app/content/images/2020/11/image-6.png"><figcaption>I don't know why I would care about half of the stuff Crisp automatically collect on people who are just asking for help on my website 🤷‍♂️</figcaption></figure><!--kg-card-end: image--><p>So, this is a top priority since it looks like an absolute privacy and tracking nightmare.</p><p>I get that this is a difficult one, but there's literally no service we could find to do this cookieless (or even mildly privacy focused) so we ended up heavily modifying an open-source project called <a href="https://github.com/idoco/intergram">Intergram</a> to do what we wanted. Intergram works like a regular chat widget, but it communicates with the chat app Telegram via a self-hosted server - meaning at least we're in control of the code. Our modified chat widget now looks like this (and the code is <a href="https://github.com/squarecat/squarechat">open-source</a>);</p><!--kg-card-begin: image--><figure><img src="https://blog.leavemealone.app/content/images/2020/11/Group-54.png"></figure><!--kg-card-end: image--><p>Unfortunately it still requires some place to store the messages locally so that the visitor has a copy of them, but we still made this work by only storing anything <em>after</em> the chat has been opened. Unlike Crisp that injected it's cookies when it felt like it. We also don't collect any tracking crap like Crisp does, only chat messages!</p><p>We sweetened the deal by adding a consent prompt to the chat widget itself like this;</p><!--kg-card-begin: image--><figure><img src="https://blog.leavemealone.app/content/images/2020/11/Group-53.png"></figure><!--kg-card-end: image--><p>🍪 Cookie Verdict = 3/5 - fewer cookies, more privacy.</p><h2 id="security">Security</h2><p>This was a tricky one. We use Cloudflare as a security layer to protect the website from denial-of-service attacks. We also use their CDN to cache our assets so that the site loads extra fast, and use their DNS because it's hella convenient.</p><p>To perform their protection Cloudflare stores a cookie called <em><code>_cfduid</code></em>,<em> </em>which is used to track each client and somehow figure out if they're a malicious actor or something. I don't really know and <a href="https://support.cloudflare.com/hc/en-us/articles/200170156-Understanding-the-Cloudflare-Cookies">their description is clear as mud</a>. Whatever it does, it's got to go.</p><p>I didn't really know where to start with this one, so <a href="https://twitter.com/JamesIvings/status/1315945593471205376">I tweeted about it</a> and got a reply from a systems engineer that works there:</p><!--kg-card-begin: image--><figure><img src="https://blog.leavemealone.app/content/images/2020/11/Slice-1-1.png"></figure><!--kg-card-end: image--><p>Which is a bit of a non-answer, since the Enterprise plan costs $200/month and I'd end up with fewer features for my trouble.</p><p>Since we've never actually had to use Cloudflare protection, my solution was to disable Cloudflare forwarding completely and switch to a proper CDN provider. You can do this by clicking the cloud icon on the DNS settings switching to "DNS only":</p><!--kg-card-begin: image--><figure><img src="https://blog.leavemealone.app/content/images/2020/11/image-11.png"></figure><!--kg-card-end: image--><p>This means we are now just using Cloudflare for DNS. But it's possible to hit this button again and <strong>re-enable</strong> Cloudflare forwarding temporarily if we find ourselves under attack, so I figure this is a good option.</p><p>For a CDN provider we decided on recommendation to check out <a href="https://bunnycdn.com/">BunnyCDN</a>. I'm actually really impressed by this service, compared to Cloudflare everything feels a bit faster and it's easier to know what's going on, which I like. Also since it's just a file CDN there are zero cookies of course!</p><p>🍪 Cookie Verdict = 6/5 - No cookies AND a faster website!</p><p>The website now has no cookies on load, with some storage being used if a visitor opens the chat widget, which I think is a pretty successful outcome! </p><!--kg-card-begin: image--><figure><img src="https://blog.leavemealone.app/content/images/2020/11/image-8.png"></figure><!--kg-card-end: image--><p>You can check it out <a href="https://leavemealone.app/">here</a>, you'll notice there's no cookie banner to annoy you, it's almost like stepping back in time ;)</p><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><p>PS.</p><p>If you enjoyed this post then check out <a href="https://twitter.com/JamesIvings">my Twitter</a>. I spend my free time tweeting about how much I hate anti-privacy web practices and crappy mailing list emails. See you there!</p><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><p>Cover photo by <a href="https://unsplash.com/@clemono?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Clem Onojeghuo</a> on <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>.</p><!--kg-card-begin: html--><!--kg-card-end: html-->
                </div>
            </section>

            <section>
                <h3>Subscribe to Leave Me Alone Blog</h3>
                <p>Get the latest posts delivered right to your inbox</p>
                


            </section>

            


        </article>

    </div>
</div></div>]]>
            </description>
            <link>https://blog.leavemealone.app/no-more-cookies/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24979167</guid>
            <pubDate>Tue, 03 Nov 2020 12:53:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Fatal Flaw of Ownership Semantics]]>
            </title>
            <description>
<![CDATA[
Score 42 | Comments 29 (<a href="https://news.ycombinator.com/item?id=24979129">thread link</a>) | @komuW
<br/>
November 3, 2020 | http://www.gingerbill.org/article/2020/06/21/the-ownership-semantics-flaw/ | <a href="https://web.archive.org/web/*/http://www.gingerbill.org/article/2020/06/21/the-ownership-semantics-flaw/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<article>
<header>
	
	
	<p>
		<span>2020-06-21</span>
		</p>
</header>
<p>I have been toying with a theoretical idea for the past 18 months off-and-on in my head and I have not fully articulated it aloud yet. It is regarding the concept of <em>Ownership Semantics</em> (OS) or <em>Move Semantics</em> in programming languages. Fundamentally this article is a criticism of the concept and states that the concept is a duality of traditional OOP but applied to a different area.</p>
<h2 id="general-definitions-of-terminology">General Definitions of Terminology</h2>
<p>A general list of definitions of terminology used within this article in order to minimize confusion.</p>
<ul>
<li>
<p>A <em>Value</em> is a datum with an associated type</p>
</li>
<li>
<p>A <em>(Data) Type</em> is an attribute of a value which encodes information about how the data value can be operated upon</p>
</li>
<li>
<p>An <em>Object</em> is a value with associated behaviour, and thus implies it has <em>agency</em></p>
</li>
<li>
<p>A <em>Class</em> is the data type of an <em>Object</em></p>
</li>
<li>
<p>A hierarchy of value ownership is a hierarchy of responsibility of values</p>
</li>
<li>
<p>An <em>Owned-Value</em> is a value which belongs to a hierarchy of value ownership, which implies it is governed by an <em>agent</em></p>
</li>
<li>
<p>An <em>Agent</em> is an actor with the capacity to act within a given environment</p>
</li>
<li>
<p>A <em>Model of Interpretation</em> is a way to view and analyse a subject</p>
</li>
<li>
<p>A <em>Paradigm</em> is a way of classifying models of structure of programming languages; a <em>Paradigm</em> is a <em>model of interpretation</em></p>
</li>
<li>
<p><em>Object Orient(at)ed Programming (OOP)</em> - A paradigm of structuring a program around the sole concept of <em>Objects</em>, commonly through coupling data and code into a single unit.</p>
</li>
<li>
<p><em>Ownership/Move Semantics (OS)</em> - Orientation around responsibility of values in a hierarchical fashion</p>
</li>
</ul>
<h2 id="foundations-of-the-object-orientation-paradigm">Foundations of the Object Orientation Paradigm</h2>
<p>Though the original conception of the term coined by Alan Kay<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup> was never used as he intended it to be, the term <em>Object Orient(at)ed Programming (OOP)</em> has been commonly understood to be a paradigm of structuring a program around the concept of <em>Objects</em>, commonly through coupling data and code into a single unit. Many languages support multiple paradigms, including aspects for the OOP paradigm, but I would class those as multiparadigm rather than being <em>solely</em> an OOP language.</p>
<p>Most languages implement <em>Objects</em> and <em>Classes</em> in the Simula tradition; most of the notable OOP languages have a similar form by defining methods (member functions) within the class definition. Traditionally languages such as Java can be classed as <em>solely</em> an OOP language.</p>
<p>Most traditional OOP languages are based around the concept of <em>inheritance</em>, a mechanism of deriving a class data type from another class data type and retaining similar information. Most people generally view inheritance as a combination of <a href="https://en.wikipedia.org/wiki/Subtyping">subtyping</a> and <a href="https://en.wikipedia.org/wiki/Dynamic_dispatch">dynamic dispatch</a> through <a href="https://en.wikipedia.org/wiki/Virtual_method_table">virtual method tables (vtables)</a>. This has lead to many discussions asking whether a language can be called as OOP if it does not support inheritance<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup>.</p>
<p>In recent times, <em>inheritance</em> has been falling out of fashion in favour of <em>composition</em><sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup>. This is mostly due to the issue of conforming a <em>class</em> to a strict (singular) hierarchy of agency when in reality, things can belong to many (if not infinite) categories and hierarchies, as well as another aspect which I will be discussing throughout this article.</p>
<p>There are many criticisms of OOP<sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup><sup id="fnref:5"><a href="#fn:5" role="doc-noteref">5</a></sup><sup id="fnref:6"><a href="#fn:6" role="doc-noteref">6</a></sup><sup id="fnref:7"><a href="#fn:7" role="doc-noteref">7</a></sup><sup id="fnref:8"><a href="#fn:8" role="doc-noteref">8</a></sup><sup id="fnref:9"><a href="#fn:9" role="doc-noteref">9</a></sup> but my general criticism is that by placing emphasis on trying to solve problem in the type system, it shifts focus from the data structures and algorithms, <a href="http://www.gingerbill.org/article/2020/05/31/progamming-pragmatist-proverbs/#the-concept-of-programming">the core of what a program fundamentally is</a>.</p>
<p>Since objects themselves are being treated <em>as if</em> they have behaviour (not just type properties), they are effectively being treated as if they were <em>agents</em> in the program. This mental model has many conclusions, many of which cause issues.</p>
<p>In my article <a href="https://www.gingerbill.org/article/2020/05/31/progamming-pragmatist-proverbs/"><em>Pragmatism in Programming Proverbs</em></a>, I state:</p>
<blockquote>
<p>Object orientated programming is a form of misinterpreted and misapplied Aristotelian Metaphysics applied to a domain it was never meant to model</p>
</blockquote>
<p>What I mean by this statement is that <em>artificially</em> conforming any/all relationships between data and types to an artificial hierarchy of <em>agency</em> is a form of naïve-Aristotelian metaphysics. Since there is no actual <em>agency</em> in the programming objects, it is a partial fallacy. When trying to conform a program to have a particular structure when it does not naturally, the absence of a structure in a program is more useful than a bad structure.</p>
<h3 id="methods">Methods</h3>
<p>The concept of adding methods to classes/objects has proven useful to many. The real questions are:</p>
<ul>
<li>Why?</li>
<li>And how do people actually conceptualize methods on a day-to-day basis?</li>
</ul>
<p>For most people, I am going to bet that methods, in languages with an emphasis on inheritance rather than composition (such as C++ or Java), are treated as a way of categorizing and associating functions/procedures with a data record. There are a few reasons for this approach:</p>
<ul>
<li>Easy to organize and search for procedures by a data type</li>
<li>Allowing methods as a form of syntactic sugar for writing calls in a <em>subject verb object</em> manner e.g. <code>foo_do_thing(x, y)</code> vs <code>x.do_thing(y)</code></li>
<li>Mental model of behaviour for objects</li>
</ul>
<p>From experience, I have found that long time users of “OOP” languages eventually start treating methods primarily in the first two approaches.</p>
<p>I will not go into depth about the other main aspects of OOP such as encapsulation, local retention, forms of polymorphism, etc, as the hierarchical nature is the fundamental aspect of focus for this article. The (linear) hierarchy of agency is the main problem. The reason why people argue for <em>composition over inheritance</em> is that it flattens this linear hierarchy, reducing its effect. It is the transition from <a href="https://en.wikipedia.org/wiki/Nominal_type_system">nominal typing</a> to <a href="https://en.wikipedia.org/wiki/Structural_type_system">structural typing</a>, which is more flexible because many data structures and problems have a <em>non-linear</em> nature to them, which <em>linear</em> approaches <strong>cannot</strong> handle. When trying to adhere to the the strict hierarchical type system approaches, it leads to numerous issues because data is more commonly graph-like (non-linear) than tree-like (linear) for most problems. This strict hierarchy does occur with encapsulation at the object level too, a strict hierarchy of messages/references; this hierarchical nature arises from the concept agency itself, inheritance is not the root cause.</p>
<p><strong>n.b.</strong> Inheritance is not all bad and does have many real life practical uses, but these costs must be known before using them, like with any tool.</p>
<p><strong>n.b.</strong> The linearity is with regards to the data structures themselves and not the algorithms.</p>
<h2 id="foundations-of-the-ownership-semantics-paradigm">Foundations of the Ownership Semantics Paradigm</h2>
<p><a href="https://en.wikipedia.org/wiki/C%2B%2B">C++11</a> introduced the concept of <em>move semantics</em> or <em>ownership semantics</em> (OS), a way to minimize the copying of data through copy constructors. It utilizes the added concept of r-value references (<code>T &amp;&amp;</code>) as a means to do this. However, the concept began to be used for a lot more than its basic purpose. The concept adds the high level abstraction of “moving” objects rather than “copying” objects. Physically, a computer only ever copies and this high level abstraction, to treat objects <em>as if</em> they were “real objects”, is not what actually happens. It is also a <a href="https://en.wikipedia.org/wiki/Category_mistake">category error</a> to treat them as “real objects” since “real objects” and “programming objects” have little connection with each other ontologically. When a value or object is “moved”, this means is that the <em>responsibilities</em> of the resources of that object have been transferred to another object or environment—<em>agents</em>. In this case, ownership/move semantics is fundamentally based around the <em>responsibilities of values</em> by tracking value usage.</p>
<p>In this model of agency, the arena of agency can take on many forms, such as blocks, procedure bodies, or aggregate values. Therefore some <em>owned-values</em> also <em>own</em> other values, and thus a value could have agency.</p>
<p>If we were to call Ownership Semantics a paradigm, it would be the orientation around the <em>responsibility of values</em> in a hierarchical fashion, placing emphasis on this system of responsibility, shifting focus from data structures and algorithms.</p>
<p>The concept of <em>responsibility</em> and <em>ownership</em> is similar to the real world counter parts in that to own something means to have exclusive use and full responsibility over it.</p>
<p><a href="https://www.rust-lang.org/">Rust</a> is a multi-paradigm programming language but at its core is an Ownership-Orientated language. Everything in Rust has a concept of <em>“ownership”</em> and <em>lifetime</em> associated with it. Rust is designed around trying to be first and foremost “safe”, especially with regards to concurrency. Rust derives from the C++ family in terms of philosophy and style, but uses a more <a href="https://www.gingerbill.org/article/2018/03/12/on-the-aesthetics-of-the-syntax-of-declarations/">qualifier-focused</a> declaration syntax and many concepts from functional languages from the <a href="https://en.wikipedia.org/wiki/ML_%28programming_language%29">ML family</a>.</p>
<p><em>Lifetimes</em> are theoretically orthogonal to <em>ownership</em> but in practical, they usually are intrinsically coupled. I will not discuss the problems with object-based lifetimes in this article.</p>
<p>The following Rust code can be used to demonstrate this responsibility transfer between different capturing things such as <code>let</code> statements:</p>
<pre><code>pub struct Foo {
	value: i32,
}

fn main() {
	let foo = Foo{value: 123};
	let bar = foo; // the responsibility of `foo` is transferred to `bar`

	println!("{}", foo.value); // error: use of moved value: `foo.value`
	println!("{}", bar.value);
}

</code></pre>
<p>Rust is an immutable-by-default language, with the option to opt into mutability with <code>mut</code>. Immutability helps a lot with mathematical proofs for logic since things things can be “flattened” quite easily, however virtually all computers are fundamentally mutable things, even if the abstraction of immutability is a useful tool. As a result, the ownership semantics system requires a few more rules to take into account mutability, by adding the concept of “borrowing” through references. The general rules for the borrow checker are:</p>
<ul>
<li>Each value may have as many immutable borrows as you want</li>
<li>Each value may only have one mutable borrow at a time</li>
<li>Each value may not borrow immutably and mutably at the same time</li>
<li>Values will be “dropped” when the owning connecting goes out of scope</li>
<li>Taking a value by <code>self</code> <code>Drop</code>s the original value</li>
</ul>
<p>When using Rust (or move semantics to their full extent in C++11), most people will fight the borrow …</p></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://www.gingerbill.org/article/2020/06/21/the-ownership-semantics-flaw/">http://www.gingerbill.org/article/2020/06/21/the-ownership-semantics-flaw/</a></em></p>]]>
            </description>
            <link>http://www.gingerbill.org/article/2020/06/21/the-ownership-semantics-flaw/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24979129</guid>
            <pubDate>Tue, 03 Nov 2020 12:48:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[React Fundamentals: What I’m Learning]]>
            </title>
            <description>
<![CDATA[
Score 100 | Comments 63 (<a href="https://news.ycombinator.com/item?id=24979103">thread link</a>) | @buaiscia
<br/>
November 3, 2020 | https://buaiscia.github.io/posts/learning-on-epic-react-fundamentals | <a href="https://web.archive.org/web/*/https://buaiscia.github.io/posts/learning-on-epic-react-fundamentals">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><h2 id="intro"><a href="#intro" aria-label="intro permalink"></a>Intro</h2>
<p>At this moment in my career, I’m a Javascript fullstack developer in the early stages. I’ve a good knowledge of Javascript, however React gives me sometimes a little more than a headache to understand deeply. I grew up in my learning with class based components, so later, when hooks were introduced, I found a little difficult to transition to this new way of writing React. That’s why I wanted this course. </p>
<p>As part of my learning process, I’m going to note down not everything, but what I learnt, for each section. Often my solution was, although working, more complicated and less elegant than Kent’s one. That’s another aspect I wish to improve in my coding. </p>
<p>Of course you will find many more details and, well, the workshop itself directly in <a href="https://epicreact.dev/">epicreact.dev</a>
I hope this will be useful to somebody else apart from me, and forgive my mistakes in English (not a native speaker).
<br></p>
<h2 id="01-basic-javascript-rendered"><a href="#01-basic-javascript-rendered" aria-label="01 basic javascript rendered permalink"></a>01: Basic JavaScript-rendered</h2>
<p>In the first exercise, it’s necessary to make some DOM manipulation with plain Javascript. As I’m using this method in my daily work, I had no difficulties in the first part. As a matter of fact, I’m learning a lot into transforming a codebase that is heavily relying on jQuery into plain Javascript.</p>
<p>However, I did have to do some thinking on the additional exercise, as I’m not used to work with the root element of the body. So I personally didn’t know -but now that I know, it makes sense - that there’s a body object inside the document object. I won’t give here the solution, but it’s an important reminder to always check the parent elements… what are they hiding inside :)
<br></p>
<h2 id="02-intro-to-raw-react-apis"><a href="#02-intro-to-raw-react-apis" aria-label="02 intro to raw react apis permalink"></a>02: Intro to raw React APIs</h2>
<p>The second exercise of the workshop was already trickier - which I was happy about because definitely I didn’t want to learn again the same stuff.
It’s not often, if ever, that we are using the React.createElement. Using JSX we just skip this part, but that’s how it works under the hood.
So after learning what jQuery is doing in Javascript, now it’s React in Javascript. </p>
<p>First thing I learnt here is that the famous property ‘children’, in React, corresponds to textContent in plain JS. It makes sense, of course, as a matter of fact we are rendering some text made visually in HTML.</p>
<p>The second thing is that createElement has three - or more - arguments that can be passed. </p>
<ol>
  <li>The type of element (span, div, etc)</li>
  <li>The object passed inside the element (class, children, etc)</li>
  <li>A n number of other objects, that will be rendered as additional children.</li>
</ol>
<p>As a matter of fact, the children property doesn’t even have to be defined inside the second argument of createElement, but can be listed at the end of the method.
<br></p>
<h2 id="03-using-jsx"><a href="#03-using-jsx" aria-label="03 using jsx permalink"></a>03: Using JSX</h2>
<p>The third exercise was about creating simple JSX elements that Babel will transform in normal JS with React.createElement. As it’s basically almost a reverse engineering of the previous exercises, it was not difficult. However, it was interesting the use of the spread operator inside a div element, which createElement puts in the correct position:</p>
<div data-language="text"><pre><code>const className = 'myClass';
const children = 'this is my text';
const props = { children, className }
element = &lt;div {...props}/&gt;</code></pre></div>
<p>It will create a div with its own class and the innertext as children.</p>
<p>Another interesting point in the video is about prioritazion of position using the spread operator. Supposing that we have the above props, but then we want to override the className with another name, we have to place the spread props before. In synthesis, the right argument will always override the left ones.</p>
<div data-language="text"><pre><code>&lt;div {...props, className='secondClass'} /&gt; // &lt;div className="secondClass"&gt;
&lt;div {className='secondClass', ...props} /&gt; // &lt;div className="myClass"&gt;</code></pre></div>
<h2 id="04-creating-custom-components"><a href="#04-creating-custom-components" aria-label="04 creating custom components permalink"></a>04: Creating custom components</h2>
<p>So here we go finally to start creating components. The first part consists in creating a function that basically returns a div, so instead of repeating div div in the rendered element, we just pass the function with the string as “children”. One thing that I knew but forgot explicitly is that if I pass a parameter to the function as an object, the argument must be an object as well. So:</p>
<div data-language="text"><pre><code>helloFunction = ({children}) =&gt; {
  return &lt;div&gt;{children}&lt;/div&gt;
}

helloFunction({ children: 'Hello' });</code></pre></div>
<p>The next point was to implement this function as an element:</p>
<p><code>const myElement = React.createElement(message, { children: 'Hello!' })</code></p>
<p>and finally incorporate it in the element itself, which will be taken into ReactDom.render:</p>
<div data-language="text"><pre><code>const element = (
  ...
  {myElement}
)</code></pre></div>
<p>Following that, it’s about referring the same helloFunction but make it directly compiled through Babel as an element, without needing to pass through createElement. This is possible thanks to JSX, and it’s enough to make the function name with first letter as capital, and reference it inside the element object as that.
<code>HelloFunction = () = {}</code></p>
<p><code>&lt;HelloFunction&gt;Hello!&lt;/HelloFunction&gt;</code></p>
<p>This is the equivalent of <code>React.createElement(HelloFunction, null, 'Hello!')</code></p>
<p>Next, it was the time of implementing propTypes for typechecking, giving the same above function to have two parameters, both strings. In the workshop, it’s explained how to make a propTypes function for checking manually the type. But it’s interesting that it’s not taking advantage of the prop-types library. It is true that for a simple check of two props, importing a whole library is excessive; but I don’t think I’ll ever just use two checks. </p>
<p><code>&lt;script src="https://unpkg.com/prop-types@15.6/prop-types.js"&gt;&lt;/script&gt;</code></p>
<div data-language="text"><pre><code>HelloFunction.propTypes = {
      greeting: PropTypes.string,
      subject: PropTypes.string,
    }</code></pre></div>
<p>I’m not getting either a personalized message, but the standard warning is understandable enough</p>
<div data-language="text"><pre><code>Invalid prop `subject` of type `number` supplied to `Message`, expected `string`. in HelloFunction</code></pre></div>
<p>Ah, here we go, in the next exercise there’s the implementation of the library… ooooops, I went a little over head. But good point, to implement also ‘isRequired’</p>
<div data-language="text"><pre><code>HelloFunction.propTypes = {
      greeting: PropTypes.string.isRequired,
      subject: PropTypes.string.isRequired,
    }</code></pre></div>
<p>Anyway, Typescript rules!
<br></p>
<h2 id="05-styling"><a href="#05-styling" aria-label="05 styling permalink"></a>05: Styling</h2>
<p>In this  exercise it was needed to apply style to a custom component in various ways. On a first part, just adding inline styling to a small div; then to a custom component passing its className prop; finally, passing only a string as a size prop and selecting dynamically the style inside the custom component.</p>
<p>First note: when making a reusable component, normally it’s good to place all defaults on the left and what the user is providing (spread operator) after, because we don’t want to enforce something.</p>
<p>Second note: as usual I overcomplicated things. As the size property passed would be only small, medium and large, and the classes are called box—small, box—medium, box—large, it’s enough to substitute the size with the size prop passed into the component.</p>
<p><code>box--${size}</code></p>
<p>adding that to a ternary operator in case it’s the prop is not present.
What I did instead was a nested ternary operator with an object created with the classes names inside. Much more complicated, although it was working 😁</p>
<div data-language="text"><pre><code>const sizes = {
  small: 'box--small',
  medium: 'box--medium',
  large: 'box--large'
}

className={`box ${size === 'small' ? sizes.small : size === 'medium' ? sizes.medium : sizes.large}`}</code></pre></div>
<h2 id="06-forms"><a href="#06-forms" aria-label="06 forms permalink"></a>06: Forms</h2>
<p>In the first exercise, the object is creating a submit listener/handler that will call the function in the main component, which is passed through as a prop.</p>
<p>We can put events (will be React synthetic events) on each element; however, the onSubmit goes inside the form to catch every field that is contained.
Synthetic events are objects that React creates that look and behave like regular DOM events.
It’s still possible to access the DOM event with <code>event.nativeEvent</code>, however, the synthetic one is optimized to work with React code, and the virtual DOM.</p>
<p>I created then a function inside the function (a callback), called once the submit button is clicked. And I’ve added the preventDefault() to that event to prevent the page to refresh (as default event for a form).</p>
<p>Another interesting thing is about accessibility. Screen readers need to associate the input with its label. So it’s needed to give the input an id and the label a htmlFor (the same for= parameter in normal HTML). Moreover, this gives the property of focusing on the input when clicking on it.</p>
<p>The second part of the exercise was about doing the same as above but using the useRef hook. UseRef are simply reference pointers to an element.
First, it’s needed to be imported from ‘react’ and not ‘react-dom’.</p>
<p>Then, adding the reference to our input
<code>&lt;input ref={usernameInput}&gt;</code>
In the main function (or custom component), we can call the hook: <code>const usernameInput = useRef(null);</code>
Why null? The argument of useRef is the initial value. But in this case we don’t need that, just what will be in usernameInput.</p>
<p>Finally, we can access all our referenced properties, like the input value, this way: <code>usernameInput.current.value</code></p>
<p>In the next credit, it was needed to create a controlled input. A controlled input is an input field that is controlled by the component state. That means setting the value of the input by the state: <code>&lt;input ref={usernameInput}  value={username} onChange={handleChange} /&gt;</code></p>
<p>Then, we can set the state at the top of the component: <code>const [username, setUsername] = useState('');</code>
And finally, use that state to change the value of the input in the handleChange function. In this case, transforming every key to lowercase:</p>
<div data-language="text"><pre><code>const { value } = event.target;
setUsername(value.toLowerCase());</code></pre></div>
<p>So the flow is the following:
input from user —&gt; update input state —&gt; transforming input state -&gt; sending the state as value of the input —&gt; input appears on screens.
<br></p>
<h2 id="07-rendering-arrays"><a href="#07-rendering-arrays" aria-label="07 rendering arrays permalink"></a>07: Rendering Arrays</h2>
<p>The exercises were just little demonstrations in this case, to show the importance of using a unique index key when showing elements in the DOM through a mapping. Not without, not with the pre-built index of the map function, but with a preset set of keys to …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://buaiscia.github.io/posts/learning-on-epic-react-fundamentals">https://buaiscia.github.io/posts/learning-on-epic-react-fundamentals</a></em></p>]]>
            </description>
            <link>https://buaiscia.github.io/posts/learning-on-epic-react-fundamentals</link>
            <guid isPermaLink="false">hacker-news-small-sites-24979103</guid>
            <pubDate>Tue, 03 Nov 2020 12:44:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Kingdom – The little known story of how Sikkim was annexed]]>
            </title>
            <description>
<![CDATA[
Score 28 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24978744">thread link</a>) | @yukiari
<br/>
November 3, 2020 | https://fiftytwo.in/story/kingdom/ | <a href="https://web.archive.org/web/*/https://fiftytwo.in/story/kingdom/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-v-09b8f8d3="" data-v-20489b7b=""><div data-v-09b8f8d3=""><div data-v-df82986e=""><div data-v-df82986e=""><div data-v-df82986e=""><div data-v-df82986e=""><div data-v-df82986e=""><!----> <p>In the days leading up to 9 April 1975, the sedate capital of an autonomous Himalayan kingdom became a fortress. In and around Gangtok, troops belonging to neighbouring India were mobilised on a large scale. In the market squares, people gathered over chhang and chhurpi<a href="" onclick="return!1"><sup id="6e15b10do9i9">[1]</sup></a> and wondered if there was going to be another clash with China. </p></div></div></div></div>  <!----></div><section data-v-58180b62=""><div data-v-58180b62=""><div data-v-58180b62=""><div data-v-58180b62=""><!----> <div data-v-58180b62=""><p>In his hilltop palace, Palden Thondup Namgyal, the Chogyal of Sikkim,<a href="" onclick="return!1"><sup id="edie9d5nit9z">[2]</sup></a> sensed a trap. The Indian Army claimed to be carrying out a routine exercise, but his guards were not convinced. They pleaded with him to escape to Nepal disguised as a monk. They were thinking, perhaps, of a day in 1959 when a 24-year-old from Tibet, anointed the Dalai Lama of his people, had made the opposite journey, fleeing the Chinese regime in soldier’s disguise. </p><p>The Chogyal rejected the plan, but his worst fears were confirmed. At 12.45pm on 9 April, a platoon of jeeps full of soldiers armed for battle surrounded the palace. A guard in the sentry box was shot dead after he raised his rifle. Inside the palace, the Chogyal called up Gurbachan Singh, the political officer who represented the Indian administration. </p><p>“What the hell are you doing?” he exploded. The line went dead. Indian soldiers had jammed the radio communication, and the palace had been cut off from the outside world.<a href="" onclick="return!1"><sup id="t6xwro8pg71k">[3]</sup></a></p><p>The coup was over in twenty minutes. At the end of it, the Chogyal was placed under house arrest, bringing about the end of a regime that had ruled Sikkim for 333 years. Just over a month later, on 16 May 1975, Sikkim joined the union of India as its twenty-second state.</p></div></div></div></div></section><blockquote data-v-6f86352e=""><div data-v-6f86352e=""> <p data-v-6f86352e="">“What is the Indian obsession with annexing Sikkim?”</p>  </div></blockquote><section data-v-58180b62=""><div data-v-58180b62=""><div data-v-58180b62=""><div data-v-58180b62=""><!----> <div data-v-58180b62=""><div data-v-58180b62=""><p>
              T
            </p> <div data-v-58180b62=""><p>his year, the forty-fifth anniversary of Sikkim’s statehood passed unremarked. For a generation of young Sikkimese, 16 May is just another public holiday. But recent border clashes between India and China have re-established India’s eastern boundary as one of the world’s great fault lines, and also highlighted Sikkim’s historical role as a centrepiece of the dispute. </p><p>The last time lives were lost in the conflict between India and China was in 1967, the second and “forgotten” war<a href="" onclick="return!1"><sup id="ht079c5lizsd">[4]</sup></a> along the border between Sikkim and Tibet.</p></div></div><p>Depending on which side is telling the story, the “Sikkim affair” is variously referred to as an ‘integration’, an ‘annexation’ or a ‘merger’. What we know about it is largely down to three books that differ in the detail about what transpired and why. </p><p>The first was actively suppressed by the Indian state for nearly three decades. Journalist Sunanda Datta-Ray’s book<em> Smash and Grab: The Annexation of Sikkim</em> was published in 1984, but was kept out of circulation with the aid of a defamation suit filed by the government. It was republished in 2014. The book, engrossing in its detail, paints a picture of the Chogyal—a close friend of Dutta-Ray’s—as a lonely bastion, valiantly resisting an expansionist India. </p><p>The Scottish journalist Andrew Duff was initially drawn to Sikkim by reading his grandfather’s account of a trek from Darjeeling to Pemayangtse Monastery in 1922. Duff’s book, S<em>ikkim: Requiem for a Himalayan Kingdom</em>, is largely based on the letters written home by two Scottish principals of a girls’ school in Gangtok.</p><p>In 2018, GBS Sidhu, a retired officer from India’s intelligence agency, the Research and Analysis Wing (R&amp;AW), published <em>Sikkim: Dawn of Democracy </em>(sub-titled “The Truth Behind The Merger With India”). Finally, it publicly owned up to the role played by the agency in Sikkim’s accession to India.</p><p>“What is the Indian obsession with annexing Sikkim?” asked US Secretary of State Henry Kissinger in bewilderment in a staff meeting in Washington when news of the coup reached the world.<a href="" onclick="return!1"><sup id="nvao4gb3yfli">[5]</sup></a> It was a naïve question. The answer is inextricably tied to the tumultuous decade of the 1970s when Indira’s India (or India’s Indira) was consolidating its power within and around its borders in the near neighbourhood. It is also tied to the events of the 1960s, particularly the lingering effects of the 1962 war, which in turn was partly triggered by the Dalai Lama’s escape to India. It stretches further back in history to a century of colonial expansionism under British rule that had left Sikkim vulnerable in the first place.</p><p>Sikkim is a tiny, thumb-shaped state wedged between Nepal, Bhutan and Tibet.&nbsp;For centuries, it was the primary route into the two Buddhist kingdoms. When Tibet was occupied in 1950, the expansion of China was brought “almost up to our gates”, as a deeply-worried Sardar Patel wrote to India’s first prime minister, Jawaharlal Nehru.<a href="" onclick="return!1"><sup id="3y6aft9s71bj">[6]</sup></a></p><p>The British had made Sikkim a protectorate in 1861, according it the same status as other princely states on the subcontinent. In 1950, three years after independence, Sikkim became a protectorate of the new republic. The kingdom had autonomy in domestic matters but India was responsible for defence, external affairs and communications. For Nehru, Sikkim’s autonomy was nearly sacred. “If we bring a small country like Sikkim within our fold by using force,” he said, “it would be like killing a fly with a bullet.” </p><p>Twenty-five years later, that was no longer the republic’s position. How the change came about is a story with multiple plots involving India’s greatest spymaster, a defiant king, his ambitious political rival, and two enigmatic foreign women. </p></div></div></div></div></section><section data-v-58180b62=""><div data-v-58180b62=""><div data-v-58180b62=""><div data-v-58180b62=""><p data-v-58180b62=""><header>On Her Majesty’s Secret Service</header></p> <div data-v-58180b62=""><div data-v-58180b62=""><p>
              I
            </p> <div data-v-58180b62=""><p>n December 1972, Indira Gandhi, fresh from victory in the 1971 war for Bangladesh’s liberation, summoned Rameshwar Nath Kao to her office. In 1968, she had handpicked this tall Kashmiri with a formidable intellect to set up the R&amp;AW. In three years’ time, Kao had delivered the agency’s first significant success, providing critical support for the covert training of the guerrilla army Mukti Bahini in what was then East Pakistan. </p><p>“Can you do something about Sikkim?” she asked him. </p></div></div><p>Relations between the Indian state and the kingdom had reached a stalemate. India wanted to create a treaty of Permanent Association, even dangling the carrot of sponsoring Sikkim’s membership to UN organisations in return. But over the 1960s, the Chogyal had been demanding full independence with increasing vigour.&nbsp; </p><p>In the Chogyal’s backyard, the demand for merger with India had originated from the first leader of the Sikkim State Congress,<a href="" onclick="return!1"><sup id="7ljmmvxeh2jx">[7]</sup></a> Tashi Tshering, who had even gone to Delhi in 1948 to negotiate it. Patel, the man in charge of India’s integration, was keen on bringing Sikkim into the fold. Nehru chose to overrule him and sent Tshering back.<a href="" onclick="return!1"><sup id="5wyoqzf96doj">[8]</sup></a></p><p>But Nehru’s India kept more than a watchful eye over Sikkim, much like the British had. “The Sikkimese kingdom became highly dependent on the political officers from the time that the British established direct control of Sikkim,” Saul Mullard, a researcher at  Oxford University and author of a book of Sikkimese history, explained. “Indians took over the role of political officers in Sikkim. They inherited the authority of the British and it weakened the ability of the king to set his own agenda.”</p><p>After Indira Gandhi asked him to “do something” about Sikkim, Kao concocted a plan with PN Banerjee, the joint secretary of the R&amp;AW’s eastern division and a fellow mastermind of the Bangladesh operation. He assured the prime minister that the R&amp;AW could handle Sikkim’s merger.<a href="" onclick="return!1"><sup id="y12w4vabm98f">[9]</sup></a> A three-member special ops team was dispatched to Gangtok.</p><p>One of these men was GBS Sidhu, who maintained a meticulous diary of his time in Gangtok. He wrote his book at the prodding of his former boss, who had always been keen for the story of the R&amp;AW’s role in Sikkim to be made public someday. On his passing in 2002, Kao’s own notes on the operations in Sikkim and Bangladesh were handed over to the Nehru Memorial Museum and Library. These will be made public in 2027, according to his will.</p><p>To preserve its reputation as a country that respected the sovereignty of its smaller neighbours, India was keen to legitimize its takeover of Sikkim. It made common cause with the political movement started by Tashi Tshering. India would maintain that the merger was a natural consequence of the peoples’ desire for a democratic form of government. The denouement that came with the coup took more than two years of meticulous planning on the part of the Indian state. </p><p>Like its neighbours Tibet and Bhutan, Sikkim was a conservative Buddhist theocracy. The ruling elite came from two communities: the Bhutia, who migrated from Tibet in the thirteenth century, and the Lepcha, indigenous to Sikkim. The royal family of Namgyals were Bhutia who’d come from Tibet in the sixteenth century. The demographic dynamic of Sikkim started shifting in the late nineteenth century, when Jean Claude White, the first British political officer of Sikkim, began to bring in labour from Nepal to build roads and cultivate land.</p><p>There was another reason why the British encouraged Nepali immigration—to counteract Tibetan influence in Sikkim. There were close religious, cultural and political ties between the two kingdoms. White’s successors tried to undo the policy, but by the early twentieth century, the native population of Bhutia and Lepcha people was already a minority.</p><p>From the 1940s onwards, this, then, was the defining divide in Sikkim’s politics: the tension between its powerful minority and the landless and disenfranchised Nepalis, who had grown to 75 percent of the population by the 1970s. The Chogyal’s inability to provide political representation for the majority of his subjects became his Achilles heel. The R&amp;AW recognized this and surreptitiously worked to exploit it. </p><p>The Sikkim operation helped Kao cement his legacy and strengthen India’s position in relation to China. “It is a fantastic piece of work, handled in a way that it took place under the cover of democracy in process,” the former R&amp;AW officer Rana Banerji, who’s studied the Sikkim papers in the archives of the R&amp;AW’s Kolkata office, told me in a phone interview. “It showed a lot …</p></div></div></div></div></section></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://fiftytwo.in/story/kingdom/">https://fiftytwo.in/story/kingdom/</a></em></p>]]>
            </description>
            <link>https://fiftytwo.in/story/kingdom/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24978744</guid>
            <pubDate>Tue, 03 Nov 2020 11:47:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Writing for the Internet Across a Human Lifetime]]>
            </title>
            <description>
<![CDATA[
Score 22 | Comments 7 (<a href="https://news.ycombinator.com/item?id=24978738">thread link</a>) | @mooreds
<br/>
November 3, 2020 | http://len.falken.ink/misc/writing-for-the-internet-across-a-human-lifetime.txt | <a href="https://web.archive.org/web/*/http://len.falken.ink/misc/writing-for-the-internet-across-a-human-lifetime.txt">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>http://len.falken.ink/misc/writing-for-the-internet-across-a-human-lifetime.txt</link>
            <guid isPermaLink="false">hacker-news-small-sites-24978738</guid>
            <pubDate>Tue, 03 Nov 2020 11:47:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[When Computers Were Cool]]>
            </title>
            <description>
<![CDATA[
Score 118 | Comments 79 (<a href="https://news.ycombinator.com/item?id=24978637">thread link</a>) | @aphrax
<br/>
November 3, 2020 | https://datagubbe.se/coolcomp.html | <a href="https://web.archive.org/web/*/https://datagubbe.se/coolcomp.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>


<p>
When I was a kid, computers were cool.</p><p>

Nowadays? Not so much.</p><p>

I know, I know. Grumpy old gits are a dime a dozen, and their views about the past are often filtered through a golden haze of blissful forgetfulness and nostalgia. This is of course the case for me, too, but I still think the point is valid: computers used to be much cooler - by orders of magnitude - than they are now.</p><p>

The situation can perhaps be explained by an analogy: You've got a rusty old 1994 FIAT Punto and there is a rather pressing need for you to invest in a new vehicle. Of course, you can dream big - maybe you'd like some kind of armoured personnel carrier, perhaps a souped-up, pimped-out Tesla with all the bells and whistles or why not a Ferrari? Realistically, though, you're probably considering something along the lines of a brand new Ford: the kind of sensible family car that would still be an upgrade to the withering piece of junk you're currently driving. And, as soon as you've amassed enough funds, that's probably what you're going to buy. That APC, though... Man, how sweet would it be to drive one of those? Just thundering through morning traffic, fist pumping in the air, shouting crude insults at that guy with the SUV who always cuts in front of you at the intersection down by the grocery store. Not so smug now, eh, Mr. Sports Utility?</p><p>

That's what it used to be like with computers.</p><p>

Don't get me wrong. You can spend nearly infinite amounts of money on a computer if you'd like to - it's always been like that and probably will be for the foreseeable future. This is especially true for supercomputer clusters used in science and the mainframes keeping the banks and stock markets ticking. But when dreaming about computer power, few of us imagine having access to a behemoth like that. The things we do with our machines can only go faster up to a certain point, unless we dabble in computational biology in our spare time. It would be like replacing our feeble FIAT with an aircraft carrier: sure, it's powerful, but it's not very practical for getting to and from work.</p><p>

No, the computer we dream about having on our desk is usually something a little bit faster, a little bit sleeker and just a little bit more expensive than what we can actually afford. If you're a dedicated games player, there's always the next graphics card, that extra gig of RAM, those extra few frames per second you can chase - but that's still the realistic dreaming, it's something within reach; perhaps not quite in line with a sensible Ford, but not as far out there as an APC.</p><p>

And, even if you are currently dreaming of the home computer equivalent of an APC (let's pretend that's a top of the line Mac Pro, just for the sake of argument), getting one won't make much of a difference in day to day use. Sure, the machine might be faster than your current one, but except for the rare few cases when you actually utilize all that power, it won't provide a profoundly different user experience compared to what an iMac will deliver at a fraction of the cost. It's the same OS, the same applications and the same basic architecture. This is true for Windows and Linux machines as well: you can add more RAM and disk and CPU cores, but the machine won't behave in a significantly different way from what you're used to.</p><p>

Now, when I was a kid... computers were cool.</p><p>

In 1994, I bought a second hand Amiga 1200 with a 120 megabyte hard drive. It was a low cost, capable home computer with good sound and graphics. It was more than enough for the kind of gaming and school work a kid my age wanted to do, but the 14 MHz processor was a tad slow when it came to heavy lifting. Applying just a hint of Gaussian blur to a very low resolution JPEG file took ages. Dabbling in animation, I frequently hit the barrier of the 2 megs of RAM it came with. However, it also had a motherboard connector for adding more memory and a faster CPU. This was the reasonable dream: it was within my reach, it was the sensible family Ford.</p><p>

Thus, in 1995, I got a CPU and RAM upgrade for it, making it roughly four times faster. In those days, that was a pretty hefty upgrade: speeding up from 10 to 40 MPH is more noticeable to a human compared to the difference between the 10000 and 40000 MPH speeds of today's machines. But the speed-up didn't profoundly change my user experience. I was still shuffling about with the same old software and I was still waiting around for that Gaussian blur calculation to finish - although not quite as many minutes as before.</p><p>

As I sat there, watching the Gaussian blur progress bar, I of course dreamt of the computing equivalent of an Armoured Personnel Carrier. It wasn't an Amiga 4000 or a Pentium PC or one of those new-fangled PowerMacs. It was something completely different, something that would have utterly changed my all-round user experience, from boot-up to shutdown. I wanted something the likes of which actually no longer exists: I dreamt of a Unix Workstation.</p><p>

Not just any old Unix box mind you, but a rather specific one: a Silicon Graphics Indy with a 24-bit frame buffer, 128 megabytes of memory and a 175 MHz MIPS R4400 CPU.</p><p>

It was, hands down, just about the most maxed-out piece of hardware that could grace the top of a desk. Design-wise, computers have always been kind of beige - literally and figuratively. Black computers became commonplace some time around, say, 2000, but that was hardly a giant leap in design. Depending on your tastes, you might think companies like Apple or Alienware produce attractive machines - but then again, perhaps you've never seen an SGI Indy.</p><p>

The teal blue pizza box case sports a horizontal, slightly diagonally skewed cut along the middle, shifting the top and bottom parts in a slight offset. The monitor was huge for its time: a 17" CRT cased in grey granite plastic, matching the mouse and keyboard. Both the computer and the screen were adorned with embossed SGI cube logos in a gleaming silver finish. It was over the top, maximalist 1990s more-is-more design in a strangely tasteful package and a far cry from the sleek, subdued designer machines of today. Yet, it wasn't an overstatement - it might've talked the talk, but it sure as hell could walk the walk.</p><p>

For example, it didn't even have a regular floppy drive - it had a bizarre floptical unit capable of storing 20 megabytes on a single, magneto-optical disk. On top of the giant screen a webcam was poised, surely one of the absolutely first computers to come with such a device as standard. In fact, it was called an IndyCam - the term webcam hadn't really caught on yet and was more commonly used to describe just about any camera that regularly uploaded a still image to a public web server.</p><p>

And that, of course, are all trivial oddities compared to the guts of the machine. Even though it was an entry-level workstation, SGI's custom hardware was capable of churning out both 2D and 3D graphics unmatched by any contemporaneous gaming PC, however expensive, and the CPU could run in circles around even the most outrageously-priced Pentium home computer available at the time.</p><p>

And then there was the operating system. And the software.</p><p>

IRIX, SGI's in-house Unix flavour, came with their own proprietary GUI and desktop. It was called Indigo Magic and, featuring things like scalable vector icons, animated desktop backgrounds and visual feedback cues, it was just about as outlandish as the name suggests. It should be noted that this was ten years before any PC owner had gotten the chance to grow tired of such pointless flash and that for the serious hacker, there was always a terminal emulator with a capable shell on hand.</p><p>

Apart from all the usual Unix-related niceties such as stability, pre-emptive multitasking, multi-user support, excellent command line utilities and a bunch of readily available programming languages, it had an impressive array of professional productivity software. Most of it was not available on my home computer, and even if it was, the Indy could run it both faster and in higher resolution. Apart from industry standards such as Photoshop and Netscape, there was a world of curious and wonderful applications written with nothing but SGI hardware in mind: web authoring, video editing, image manipulation and graphics creation unavailable on any other platform. It was a true digital media production workhorse, an overgrown distant cousin to the machines available on the then budding multimedia PC market.</p><p>

In short, it was a cool computer. Far too expensive for any home user, of course. But so. Damn. Cool.</p><p>

There are computers aimed at this kind of work today as well. One of the high-end Macs mentioned before, for example, or perhaps a suitably high-powered Windows machine. In fact, pretty much any dirt cheap home computer will, pixel for pixel, do what the Indy did - except faster, cheaper and in many cases better.</p><p>

Yet there isn't, today, an equivalent of the SGI Indy, or the Sun SPARCstation, or the DEC Alpha, or any of the other professional workstations. The only thing that's on offer is more of the same user experience, only slightly faster.</p><p>

That's why computers are so boring these days. Because even though IRIX, Indigo Magic and the Indy by no means was a perfect solution to all of my computational desires back then, it had the lure of the unknown and unattainable: it was a goal to strive for, a source of inspiration and aspiration and a promise that better things were possible.</p><p>

Today, we all know about the different quirks, mannerisms, privacy issues, drawbacks and occasional benefits of Windows update loops, overpriced Mac hardware and the tiresome fiddliness of Linux. Those are the choices we have and they're not going to change any time soon.</p><p>

I'd somehow be more okay with all of this if it wasn't for the fact that, to top it all off, we have no other platform left to dream of.</p><p>

That's just not cool.
</p></div></div>]]>
            </description>
            <link>https://datagubbe.se/coolcomp.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24978637</guid>
            <pubDate>Tue, 03 Nov 2020 11:30:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Model of Small Decisions]]>
            </title>
            <description>
<![CDATA[
Score 61 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24978356">thread link</a>) | @SerCe
<br/>
November 3, 2020 | https://ahitrin.github.io/work/2020/11/03/a-model-of-small-decisions/ | <a href="https://web.archive.org/web/*/https://ahitrin.github.io/work/2020/11/03/a-model-of-small-decisions/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    
<p><img src="https://ahitrin.github.io/images/a-model-of-small-decisions/forest.jpg" alt="a dence forest">
<small>Would you like to walk here at night? Photo: Andrey Hitrin</small></p>

<p>Sometimes thoughts of our human nature makes me sad.
Our attempts to share own thoughts to others can be compared with attempts to find a way out from the dense forest during a moonless night aimed only with a laser pointer.
The only thing you could show to others is a little spot of light randomly jumping back and forth, appearing and disappearing spontaneously.
How could you find a trail with such a weak tool?
How could you convince your party to follow it?
How could you understand if this trail should take you out of the forest?</p>

<p>That’s why people try to invent new and new words to explain same conceptions.
Everyone hopes that his/her explanations will be good enough to make other understand “the inner nature of things”.
Most of the time it’s worthless: others don’t see more than chaotically jumping light spot.</p>

<p>Nevertheless, here is my own attempt.
Words written here are not the truth, they are nothing more than my biased reflection of it, based on my limited experience.
I don’t know if they are contains some wisdom, or just a bunch of useless commonplace.
That’s you who will judge.</p>

<h2 id="the-quest-for-mastery">The quest for mastery</h2>

<p>As usual, I want to speak about programming.</p>

<p>There is an idea that programming has many similarities with martial arts or musical performing.
In all of these areas you could show some results after relatively little amount of practice, but it requires years of studying and training if you want to achieve truly significant level.
Often you even have to perform at the edge of your own abilities.</p>

<p>And when you want to perform at such level, you must be aware of all aspects of your profession.
Today I want to speak about small and often invisible decisions that guide you through your everyday work.</p>

<h2 id="small-decisions">Small decisions</h2>

<p>In our job, you need to do a lot of small decisions every day.
Just watch after yourself during work process, and soon you will be able to notice them.</p>

<p>Imagine you’ve just started to work on some feature.
Small decisions appear instantly.
How will you start you work?
By reading documentation, or by checking code out, or by asking your colleagues?
Change some code first, or think about test cases?
Implement straightforward change, or roll out few refactorings beforehand?</p>

<p>How will you deal with “bad code” challenging your way: ignore it, or try to fix right now, or defer a fix for a “better time”?
How will you act when feeling struck: ask your teammate (and which one, when you have several of them), google your problem, stackoverflow it?
Or maybe simply wait until an answer forms inside your head (also known as ‘procrastinating’)?
Or maybe wait until someone asks you about the progress?</p>

<p>That’s what I mean by the “small decisions” term.
A lot (tens, or even hundreds per day) micro-choices you make in your work.
Sometimes you make this choice consciously, but often not!
You choose your path without even thinking about it, without even noticing the fact of choosing.</p>

<p>Does this matter?
I think it does.</p>

<h2 id="choosemove-dichotomy">Choose/move dichotomy</h2>

<p>Let’s draw your way through the imaginary “work task”.
I like to draw graphs, so it’s depicted as a graph.</p>

<p><img src="https://ahitrin.github.io/images/a-model-of-small-decisions/01_a_to_b.jpg" alt="one way from Start to Goal"></p>

<p>Every node here is a small choice you’ve made.
Arrows represent the “movement” between them.
A number of intermediate steps is arbitrary and depends on your own definition of “small decision”.
When you zoom out, they almost disappear.
When you zoom in, a single decision could be even as small as “<em>which finger should hit the given keyboard button?</em>”.
Here I choose something intermediate.</p>

<p>And now let’s imagine more possible moves that also could solve your task.</p>

<p><img src="https://ahitrin.github.io/images/a-model-of-small-decisions/02_a_to_b.jpg" alt="many ways from Start to Goal"></p>

<p>Here we see a whole net of possible decisions.
What would happen if you choose another step at the start?
Some of alternative ways could be shorter (containing less hops), some of them could be much, much longer!
Of course, here I simplify the problem <strong>a lot</strong>.
But I need this simplification to show you few important things.
Here are following key points:</p>

<ol>
  <li>
    <p><strong>You have to make a lot of decisions</strong>.
There are points in almost every task that requires your decision.
For example, you need to ask yourself at least once: “<em>have I reached my goal?</em>”.
And then either get done with it or continue to work.</p>
  </li>
  <li>
    <p><strong>Even small decisions may have big impact</strong>.
When you choose the wrong path at start, it may lead you far away from the goal.
You have to move along the non-optimal path or return back to the start.</p>
  </li>
  <li>
    <p><strong>Every decision takes your time and energy</strong>.
Usually delay on decision come from one of two or three sources.
The first source is <strong>delay between a question and an answer</strong>.
Say you’re struck and don’t know where to move next.
You try to ask your colleague via IM for help.
But currently he/she is busy, and only can answer you in 20 minutes.
This delay is the cost of your decision.
The second source is <strong>delay on choosing</strong> by itself.
It may happen when you see two or more alternative paths and hesitate which one should be followed on (maybe a “frustration” word is suitable here).
The third one is <strong>a need to remember</strong> a known, but currently forgotten solution (more on this in the next chapter).</p>
  </li>
</ol>

<p>All of these make me conclude that it’s important to consider the impact of decision making to our work.
Low-quality decisions reduce your productivity <em>every day</em>.
They make you stray in the dark without help.</p>

<p>Surprisingly, even after reading a lot of books and articles on programmer’s productivity, I haven’t found enough much attention to this theme (please correct me if I’m wrong!).
That’s the main reason why I’ve started to write this article.</p>

<h2 id="a-table-of-decision-rules">A table of decision rules</h2>

<p>OK, maybe quality of decisions is important.
But how could we ever manage them?
Here I suggest a simple <em>model</em>.
As any other model, it doesn’t describe things as they are, but uses simpler (and more manageable) view on it instead.
The main power of modeling is its ability to predict effects of our actions, but we should never forget about its boundaries.
Outside boundaries, our model will be wrong - and I don’t know where they are.
I sincerely hope that your feedback could help determine them.</p>

<p>The model is heavily inspired by the work [1].
Think for a minute: this paper is already 40 years old!
Why no one still haven’t developed it into the similar direction as I did?
I don’t know (or maybe I’m just wrong - please let me know in that case).</p>

<p>This prelude was necessary - but now let’s proceed to the model.
So, suppose each of us have some kind of <em>table</em> in the head (I warned you, it’s a simplified view).
It contains two columns:</p>

<ol>
  <li>
    <p><strong>Trigger</strong>.
An external stimulus that could activate current “table row” or <em>rule</em>.
For example: a piece of code you’re looking at; a letter from CI server; a message from your colleague; your current thoughts about your task; and so on.</p>
  </li>
  <li>
    <p><strong>Acton</strong>.
A thing you do when the <em>rule</em> is being activated.</p>
  </li>
</ol>

<p>It may look like this:</p>

<table>
<colgroup>
<col width="35%">
<col width="5%">
<col width="60%">
</colgroup>
<thead>
<tr>
<th>Trigger</th>
<th></th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>You need to find the source of a bug</td>
<td>→</td>
<td>Run <code>git bisect</code> to find a commit where it was introduced. Then analyse the code</td>
</tr>
<tr>
<td>You want to check if your code is ready to deploy</td>
<td>→</td>
<td>Push changes to remote repository and run CI service</td>
</tr>
<tr>
<td>You want to check if your code is ready to deploy</td>
<td>→</td>
<td>Push changes to remote repository and ask someone to review it</td>
</tr>
<tr>
<td>You have detected the "smell of ugly code"</td>
<td>→</td>
<td>Try to refactor it out immediately</td>
</tr>
<tr>
<td>You have detected the "smell of ugly code"</td>
<td>→</td>
<td>Ignore it: we don't have time to refactor</td>
</tr>
<tr>
<td>Selenium test on CI server has failed</td>
<td>→</td>
<td>Look at screenshot to check where is the problem</td>
</tr>
<tr>
<td>Selenium test on CI server has failed</td>
<td>→</td>
<td>Look at job logs</td>
</tr>
<tr>
<td>Selenium test on Ci server has failed</td>
<td>→</td>
<td>Launch that job again: maybe it's just flaky test?</td>
</tr>
<tr>
<td>You're struck and don't know what to do next</td>
<td>→</td>
<td>Ask your teammates for help</td>
</tr>
<tr>
<td>You're struck and don't know what to do next</td>
<td>→</td>
<td>Wait until someone asks you what's going on</td>
</tr>
<tr>
<td>...</td>
<td>→</td>
<td>...</td>
</tr>
</tbody>
</table>

<p>This table has important properties:</p>

<ol>
  <li>
    <p>It <strong>changes over time</strong>, depending on your own experience and knowledge.
When you discover new tricks, they have a chance to hold in the table.
In other hand, even the best practices without repetition pass away from your memory.
Of course, they do not always being erased completely.
Rather, they are removed from “the cache”, the fastest part of your memory.
And you’ll have to make an effort of remembering to bring it back.</p>
  </li>
  <li>
    <p>It has <strong>limited size</strong>.
You cannot know literally everything.
You cannot have the best solution for every possible situation you may face.</p>
  </li>
  <li>
    <p>It may have <strong>several rules for one situation</strong>.
In that case your final choice may depend on current context.
Sometimes you may even need to spend additional time and effort to make a choice between alternative actions (“resolve a conflict”).</p>
  </li>
  <li>
    <p>It models <strong>only small decisions</strong>.
Only little choices that often even pass your spotlight and perform automatically could be modelled that way.
In terms of “Thinking, Fast and Slow” [2], it relies to the “System 1” only.</p>
  </li>
</ol>

<p>There could be different sources where these rules come from:</p>

<ul>
  <li>Your previous successful and unsuccessful experience.</li>
  <li>Observations of your teammates: how do they behave in different situations.</li>
  <li>Direct rules of the project you’re working on (like “use <code>./gradlew check</code> to verify correctness of your code”).</li>
</ul>

<p>I hope to write more on it in following articles, but the current one has grown big enough.
Seems like I have to go to conclusions.</p>

<h2 id="any-benefits">Any benefits?</h2>

<p>What benefits could the awareness about these rules bring to you?</p>

<p>First of all, you should take into consideration the limited size of your memory.
In order to make better decisions, you need to consciously “tune” your rule table.
How could it be done?</p>

<ul>
  <li>
    <p><strong>Remember your good (effective) decision rules</strong>.
Practice them from time to time so they don’t leave your working memory.
Write them down in known place so they could be remembered effectively when needed.</p>
  </li>
  <li>
    <p>Try to <strong>free your memory from unneeded decision rules</strong>.
If they aren’t needed, forget them.
If they still may be useful, keep them in an external place.
For example, imagine you have a complex …</p></li></ul></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://ahitrin.github.io/work/2020/11/03/a-model-of-small-decisions/">https://ahitrin.github.io/work/2020/11/03/a-model-of-small-decisions/</a></em></p>]]>
            </description>
            <link>https://ahitrin.github.io/work/2020/11/03/a-model-of-small-decisions/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24978356</guid>
            <pubDate>Tue, 03 Nov 2020 10:46:15 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[My game won't sell and that's ok]]>
            </title>
            <description>
<![CDATA[
Score 22 | Comments 5 (<a href="https://news.ycombinator.com/item?id=24978084">thread link</a>) | @chr15m
<br/>
November 3, 2020 | https://chr15m.itch.io/asterogue/devlog/190653/my-game-wont-sell-and-thats-ok | <a href="https://web.archive.org/web/*/https://chr15m.itch.io/asterogue/devlog/190653/my-game-wont-sell-and-thats-ok">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="wrapper"><div id="inner_column"><div id="game_devlog_post_page_59571"><div><div><section id="video_embed_widget_79452"><iframe frameborder="0" allowfullscreen="" src="//www.youtube.com/embed/7efdmAJAUVY"></iframe></section><section><a href="https://img.itch.zone/aW1hZ2UvNzYwMDkxLzQ0ODg4MzYuZ2lm/original/HaqSXO.gif" target="_blank" data-image_lightbox=""><img src="https://img.itch.zone/aW1hZ2UvNzYwMDkxLzQ0ODg4MzYuZ2lm/x200/lnOYDd.gif" data-image_id="4488836" height="200"></a><a href="https://img.itch.zone/aW1hZ2UvNzYwMDkxLzQ0OTMzNDguZ2lm/original/0NaSBi.gif" target="_blank" data-image_lightbox=""><img src="https://img.itch.zone/aW1hZ2UvNzYwMDkxLzQ0OTMzNDguZ2lm/x200/ZLnRgb.gif" data-image_id="4493348" height="200"></a><a href="https://img.itch.zone/aW1hZ2UvNzYwMDkxLzQ0NDAxMDAuZ2lm/original/kTd%2Bi3.gif" target="_blank" data-image_lightbox=""><img src="https://img.itch.zone/aW1hZ2UvNzYwMDkxLzQ0NDAxMDAuZ2lm/x200/kCBUJY.gif" data-image_id="4440100" height="200"></a><a href="https://img.itch.zone/aW1hZ2UvNzYwMDkxLzQ0ODg4MzUuZ2lm/original/tRRdDT.gif" target="_blank" data-image_lightbox=""><img src="https://img.itch.zone/aW1hZ2UvNzYwMDkxLzQ0ODg4MzUuZ2lm/x200/bwgJDH.gif" data-image_id="4488835" height="200"></a></section><section><p>I discovered Nethack and Rogue some 25 years ago and ever since then I have wanted to make my own roguelike game. On Friday I followed through on that youthful dream and shipped Asterogue, yay!</p>
<p>This game won’t sell. I have been around the indie games scene long enough to know its a crap-shoot. To make a successful indie game you have to execute at peak performance, do everything right, and then you still roll the dice on success. I’ve seen stone cold geniuses build glorious works of art and watch them get zero downloads. A single tear rolls down their cheek one week after launch and tiny pixellated violins play a chiptune version of Mozart’s Requiem.</p>
<p>My game won’t sell and that’s ok. I am at peace with it after all of these years of game jams and side projects. It is the way of things. I’m just happy to have had the chance to fulfill this dream.</p>
<p>I had so much fun making Asterogue. I’ve never worked harder on a side project. I publically committed to an October 30th release, and I’ve done it. I built the thing I dreamed of making since I was a kid, and I am simply grateful to the universe that this opportunity was within my reach.</p>
<p>I want to thank the people who took a chance and bought the game. It’s amazing to me that our tiny club of people who like this kind of game has more than one member. You guys rock!</p>
<p>I also want to thank from the bottom of my heart the people who tested the game and gave me feedback. It’s an honor when somebody is willing to sacrifice their time to try out something you built, and I really appreciate it. It’s your feedback that made this the best possible game I could make in the time allocated. Thank you.</p>
</section><section><h2>Get Asterogue</h2></section></div></div></div></div></div></div>]]>
            </description>
            <link>https://chr15m.itch.io/asterogue/devlog/190653/my-game-wont-sell-and-thats-ok</link>
            <guid isPermaLink="false">hacker-news-small-sites-24978084</guid>
            <pubDate>Tue, 03 Nov 2020 09:50:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Untimely Demise of Workstations]]>
            </title>
            <description>
<![CDATA[
Score 145 | Comments 192 (<a href="https://news.ycombinator.com/item?id=24977652">thread link</a>) | @ingve
<br/>
November 3, 2020 | https://deprogrammaticaipsum.com/the-untimely-demise-of-workstations/ | <a href="https://web.archive.org/web/*/https://deprogrammaticaipsum.com/the-untimely-demise-of-workstations/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

		<p>Last month’s news that <a href="https://arstechnica.com/information-technology/2020/10/ibm-to-split-into-two-companies-by-the-end-of-2021/">IBM would do a Hewlett-Packard</a> and divide into two—an IT consultancy and a buzzword compliance unit—marks the end of “business as usual” for yet another of the great workstation companies.</p>
<p>A quick aside on computing history. You can imagine personal computing being driven by two distinct schools of thought. The “top down” school, represented by research-led organisations including Xerox PARC, Bell Labs,academia and the military, asked “what would the world be like if everyone had their own minicomputer”? They took large, time-sharing systems like UNIX and installed them first under, then on, employees’ desks for their own personal use.</p>
<p>The “bottom up” school was made up of hobbyists who asked “can we make an interesting computer out of inexpensive components”? Thus companies like Apple and MITS in the US, Acorn and Sinclair Radionics in the UK, and others took chips that were usually used as peripherals controllers in “real” computers and built interactive programming systems around them. The microcomputer revolution came from the bottom-up school, as they made home computing affordable. The workstation revolution came from the top-down school, as they made powerful on-demand computing feasible.</p>
<p>The two schools came into very close proximity in the 1980s, when the Motorola 68000 family of CPUs (along with the 68881/68882 FPU and 68851 MMU) were the processors of choice in everything from entry-level PCs like the Atari 520ST, through games consoles like the Sega Mega Drive (Genesis in the US), to the most expensive UNIX workstations from NeXT Computer, Sun Microsystems, and Apollo Computer.</p>
<p>But then the workstation makers invested heavily in their own CPU architectures based on RISC design principles and again the two diverged. The workstation market became highly differentiated: RS/6000 from IBM (later PowerPC), Alpha from Digital Equipment Corp, MIPS from, well, MIPS, SPARC from Sun, PA-RISC from HP. The software on these workstations, while superficially very similar, was also differentiated and surprisingly incompatible. Take a program from HP-UX and you’ll have difficulty running it on NeXTSTEP, unless the authors shared the source code and used the nascent GNU autotools to support portable building. As Yoda said: begun, the <a href="https://www.livinginternet.com/i/iw_unix_war.htm">UNIX wars</a> have.</p>
<p>Of course we know that the (desktop) computing world today is mostly Intel and that workstations are mostly fancy PCs, rather than bespoke designs by vertically-integrated companies, Apple being the two trillion dollar outlier. How we got here was that the commodity parts got good enough that there was no evident advantage to workstation-grade hardware. A high-end PC could easily run a workstation OS like System V UNIX (Solaris was an early example), BSD (386BSD which later became FreeBSD, or NeXTSTEP) or Windows NT.</p>
<p>Along the way, the workstation companies consolidated (Apollo and eventually DEC got absorbed into HP; MIPS into SGI) or disappeared altogether (Sun became Oracle Hardware; SGI went bankrupt and sold its assets to sgi; Symbolics did similar—incidentally Symbolics was the first company with a .com domain). IBM long ago stopped even making its own brand PCs, and the news of its split means that there are now very few workstation companies trading in the same form they had “back in the day”. The only ones I can think of that have not had major changes to their corporate structures are Xerox and Sony, whose management may not even have known that they sold workstations.</p>
<p>What’s got lost alongside the death of the workstation is the business model where you sell expensive computers as part of an integrated solution into a particular vertical market, where that expensive solution will cost a lot less than cobbling something together out of cheap PCs. Why? I think people have a lower expectation and higher pain threshold when using computers now; they expect an amount of friction based on their own experience and translate that expectation into realms where it doesn’t belong. As I described way back in issue 2, <a href="https://deprogrammaticaipsum.com/the-various-meanings-of-quality/" target="_blank" rel="noopener noreferrer">computing is a lemon market</a>.</p>
<p>Organisations would go to the workstation vendors because they solved particular problems very well. If you’re in AI, you need Symbolics. Computer graphics, SGI. Telecoms, that’d be Sun. If you want to write software in Ada for the military-industrial complex, you’ll be buying a Rational workstation. Yes, the first IDE was a completely integrated package of hardware and software. And, of course, Apple for Desktop Publishing, the Mac being a workstation of sorts itself. People would buy computers <em>because</em> applications like AutoCAD, Quark or Mathematica ran well on them. They wouldn’t buy the computer then browse the App Store to see whether it could do anything useful.</p>
<p>And the strange thing is that catering to those vertical markets with integrated solutions is easier than ever now. The wide availability of free software means that the basic job of “being a desktop computer” is taken care of at zero cost, so business can focus on contributing valuable bespoke behaviour. And hardware costs are lower than ever: the availability of high-capability SoCs and single-board computers like the Raspberry Pi and Rock64 should make it a no-brainer to sell the computers as accessories for the applications, not the other way around.</p>
<p>In high-tech domains, an engineer could readily have a toolchest of suitable computers in the same way that a mechanic has different tools for their tasks. This one has an FPGA connected by both PCI-E and JTAG to allow for quick hardware prototyping. This one is connected to a high-throughput GPU for visualisations; that one to a high-capacity GPU for scientific simulations.</p>
<p>The general purpose hardware vendors want us to believe that an okay-at-anything computer is the best for everything: you don’t need a truck, so here’s a car. But when you’re hauling a ton of goods, you’ll find it cheaper and more satisfying to shell out more for a truck. Okay-at-anything is good for nothing.</p>
<p>Cover photo by <a href="https://unsplash.com/@serejahh">Serhii Butenko</a> on <a href="https://unsplash.com/photos/zx2Vc1zPDIs">Unsplash</a>.</p>
	</div></div>]]>
            </description>
            <link>https://deprogrammaticaipsum.com/the-untimely-demise-of-workstations/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24977652</guid>
            <pubDate>Tue, 03 Nov 2020 08:34:23 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Rust from a Gopher – Lessons 3 and 4]]>
            </title>
            <description>
<![CDATA[
Score 49 | Comments 23 (<a href="https://news.ycombinator.com/item?id=24977373">thread link</a>) | @BookPage
<br/>
November 2, 2020 | https://levpaul.com/posts/rust-lesson-3-and-4/ | <a href="https://web.archive.org/web/*/https://levpaul.com/posts/rust-lesson-3-and-4/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody"><p><em>Update: There has been discussion on this post on <a href="https://news.ycombinator.com/item?id=24977373">Hacker News</a> - feel free to see the comments there</em></p><p><em>Warning: Incoming opinion monologue; feel free to skip to <a href="#give-me-the-lessons">The Lesson Review</a> review if that’s what you’re after</em></p><p>Hello and welcome to the third post in my series about learning Rust. In case you want to hit it from the start, <a href="https://levpaul.com/posts/rust-lesson-1/">here’s</a> a link to the first one! This entire series covers my journey from being a completely land-locked Gopher to becoming (hopefully) a hardened Rustacean, able to skitter the hazardous seabed of any application safely.</p><h4 id="how-rust-is-makin-me-feel">How Rust is Makin' Me Feel</h4><p>Let me begin not by thwacking loosely about in concepts I know little yet of, as there’s plenty of time for that, but instead allow me to paint the landscapes I see for both Rust and Go. At quite the visceral it occurred to me that these modern languages are built not just to make our coding lives more delightful - but instead to shepherd us into particular engineering and organizational goals.</p><p>The needs for new general purpose languages no longer stem from the “simple” software problems. Take the problems of using variables (Assembly), using custom data types (C), cross-platform, cross-architecture compatibility (JVM languages) or even being dead simple (Python). Today’s languages can instead choose features from all the preceding and <em>then</em> apply engineering and organizational direction.</p><h4 id="the-coercion-of-go">The Coercion of Go</h4><p>I’ve been writing in Go as a hobby since 2014 but professionally only since 2018. As a hobbyist I’ll admit I used to think “Go is <em>opinionated</em>”. That seemed cool, because opinions mean something! Right? But <em>why</em> was it opinionated Levi, WHY? WAKE UP MAN!</p><p>Well today I have a completely different look on it. Go is simply a language that is very <em>safe</em> to share across engineers. This is because engineers don’t need to make a lot of decisions when they use Go. If an application has had its design completed in theory then in Go it often really is just a matter of whacking out the code to make it a reality.</p><p>Just look at how much of Go’s development tooling Google owns. With Java, I remember choosing between Ant or Maven for your build tooling. Go doesn’t let you chose. The closest we got to having a choice was with <code>dep</code> for dependency management. But finally Google caved and <code>gomod</code> was brought about as the standard. Go does its best to take choices away from you. You don’t need to chose between Tomcat or Jetty - the Go <code>net/http</code> package will handle 10kRPS for you no problem. Hell I’ve looked at apps serving 50kRPS, whilst <em>logging</em> a third of said requests simply using <code>fmt.Println</code>. You just don’t need to stray far from the standard library to scale and that is a huge plus of the language. (A large part of this is also comes from the fact that webservers haven’t changed a heck of a lot in the past 10 years so Go didn’t have to “keep up” - on the other hand my experience with http2 in Go has been far from ideal).</p><h5 id="_anyone_-can-pick-up-your-code-and-fix-it"><em>Anyone</em> can pick up your code and fix it</h5><p>This is by far the biggest selling point of using Go <em>in a company</em>. If you need to hire help you can find basically <em>anyone</em> with backend experience, and they will pick up 90% of Go in a week or two. You don’t need to worry at all if they have experience with Struts, JUnit or Spring - what’s in the standard library is plenty. I mean it. Do they need to know about passing pointers or values? Not really - general software engineering practices like peer review and simple unit testing will uncover those types of issues with ease.</p><p>Now on the other hand - who in their right mind would hire <em>me</em> to join their Rust team right now? Nobody - because I would be a gigantic liability to that team.</p><h5 id="gos-purpose-is-for-dev-shops-to-crank-out-web-services-that-are-scalable-easy-to-develop-and-do-not-require-mission-critical-performance">Go’s purpose is for dev shops to crank out web services that are scalable, easy to develop and do not require mission critical performance.</h5><h4 id="rust-no-rust">Rust no Rust</h4><p>I’m a noob. 100%. But even so, in my feeble mind I can already see what Rust is. I see a very sharp knife; but this knife is completely and utterly shrouded and encased in tamper-proof, child-proof, thief-proof hardened and sealed plastic shells. Yes shells as in the plural of shell. These shells are even adult-proof too, where the adult is a generic engineer trained generally in other languages only. The compiler is the packaging, and it will let you wield the knife when it knows exactly what your action plan is. -But oh no, not just any plan will do, your plan <em>must</em> adhere to each and every rule and regulation from the Knife Safety Measurement Act of 1938 and its associated amendments!! (This may not be strictly true as I’ve heard about an <code>unsafe</code> keyword).</p><p><em>But why so much plastic broseidon?</em> You know, and I know that it’s to keep mild-minded people like myself exactly, from nicking fingers with that very sharp knife. Warping back to a meta-level, those fingers don’t even necessarily belong to me the coder, but to the end users of the code. It is no secret to anybody even slightly interested in Rust that a major driving factor for the language was to be able to replace C++ code with something <em>as</em> efficient but much less susceptible to security exploits. Thus, the safety plastic aims not to protect individual coders, but the <em>coding organization</em>.</p><p>Okay, you’ve probably heard enough of my opinion, let’s move on before this analogy implodes and actually hurts someone.</p><hr><h2 id="give-me-the-lessons">Give Me The Lessons!</h2><h4 id="3-common-programming-conceptshttpsdocrust-langorgbookch03-00-common-programming-conceptshtml">3. <a href="https://doc.rust-lang.org/book/ch03-00-common-programming-concepts.html">Common Programming Concepts</a></h4><p>One of the first ‘huh’ moments in this lesson was this compiler message:</p><div><pre><code data-lang="rust"><span>compiler</span><span> </span><span>error</span>:
<span>For</span><span> </span><span>more</span><span> </span><span>information</span><span> </span><span>about</span><span> </span><span>this</span><span> </span><span>error</span><span>,</span><span> </span><span>try</span><span> </span><span>`</span><span>rustc</span><span> </span><span>--</span><span>explain</span><span> </span><span>E0384</span><span>`</span><span>.</span><span>
</span></code></pre></div><p>Naturally I ran the command listed, which took me to a <code>less</code> window (buffer?) containing the following:</p><div><pre><code data-lang="fallback">An immutable variable was reassigned.
Erroneous code example:
'''
fn main() {
    let x = 3;
    x = 5; // error, reassignment of immutable variable
}
'''
By default, variables in Rust are immutable. To fix this error, add the keyword
`mut` after the keyword `let` when declaring the variable. For example:
'''
fn main() {
    let mut x = 3;
    x = 5;
}
'''
</code></pre></div><p>…and this slightly let me down. There isn’t a whole lot of information in this “explanation”. I proceeded to allow <code>rustc</code> to “explain” some more random error codes to me, most of them seemed also to be quite small or to have been deprecated. I am hoping either A) I don’t have to use this feature much or B) I can make rustc/cargo/intellij just tell me the detailed stuff by default.</p><hr><div><pre><code data-lang="rust"><span>const</span><span> </span><span>MAX_POINTS</span>: <span>u32</span> <span>=</span><span> </span><span>100_000</span><span>;</span><span> </span><span>// wtf is this ugly numeric shit
</span></code></pre></div><p>For some reason this irked me when I first saw it (the comment taken verbatim from my lesson notes). On second look it actually seems really, really helpful for readability.</p><hr><h4 id="shadowinghttpsdocrust-langorgbookch03-01-variables-and-mutabilityhtmlshadowing"><a href="https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html#shadowing">Shadowing</a></h4><p>This seems like a really handy trick. You get to write code as if your variable was immutable, but the compiler does the switching for you. What is really messing my head up though is that you learn about Shadowing before you learn about Ownership. So does my naive understanding of shadowing change after this? I don’t think so … at least. Here’s something I wrote to verify my learnings:</p><div><pre><code data-lang="rust"><span>fn</span> <span>main</span><span>()</span><span> </span><span>{</span><span>
</span><span>    </span><span>let</span><span> </span><span>mut</span><span> </span><span>s</span><span> </span><span>=</span><span> </span><span>String</span>::<span>from</span><span>(</span><span>"hello"</span><span>);</span><span>
</span><span>    </span><span>let</span><span> </span><span>r1</span><span> </span><span>=</span><span> </span><span>&amp;</span><span>mut</span><span> </span><span>s</span><span>;</span><span>
</span><span>    </span><span>let</span><span> </span><span>r1</span><span> </span><span>=</span><span> </span><span>&amp;</span><span>mut</span><span> </span><span>s</span><span>;</span><span>
</span><span>    </span><span>println</span><span>!</span><span>(</span><span>"{}"</span><span>,</span><span> </span><span>r1</span><span>);</span><span>
</span><span></span><span>}</span><span>
</span></code></pre></div><p>…and it works. It also answers a question I had when originally learning ownership. For some reason when reading the examples in the book I came away thinking Rust could infer when immutable references' scopes end, but not mutable ones. I was puzzled by this and had a follow-up item but this little example proves I was wrong. Happy days!</p><hr><h5 id="small-nit">Small Nit?</h5><p>The <a href="https://doc.rust-lang.org/book/ch03-02-data-types.html#invalid-array-element-access">Invalid array element access example</a> didn’t work - it was supposed to produce a runtime error but instead it failed to compile:</p><div><pre><code data-lang="rust"><span>   </span><span>Compiling</span><span> </span><span>variables</span><span> </span><span>v0</span><span>.</span><span>1.0</span><span> </span><span>(</span><span>/</span><span>home</span><span>/</span><span>levi</span><span>/</span><span>rustprojs</span><span>/</span><span>variables</span><span>)</span><span>
</span><span></span><span>error</span>: <span>this</span><span> </span><span>operation</span><span> </span><span>will</span><span> </span><span>panic</span><span> </span><span>at</span><span> </span><span>runtime</span><span>
</span><span> </span><span>-</span>-&gt; <span>src</span><span>/</span><span>main</span><span>.</span><span>rs</span>:<span>5</span>:<span>19</span><span>
</span><span>  </span><span>|</span><span>
</span><span></span><span>5</span><span> </span><span>|</span><span>     </span><span>let</span><span> </span><span>element</span><span> </span><span>=</span><span> </span><span>a</span><span>[</span><span>index</span><span>];</span><span>
</span><span>  </span><span>|</span><span>                   </span><span>^^^^^^^^</span><span> </span><span>index</span><span> </span><span>out</span><span> </span><span>of</span><span> </span><span>bounds</span>: <span>the</span><span> </span><span>len</span><span> </span><span>is</span><span> </span><span>5</span><span> </span><span>but</span><span> </span><span>the</span><span> </span><span>index</span><span> </span><span>is</span><span> </span><span>10</span><span>
</span><span>  </span><span>|</span><span>
</span><span>  </span><span>=</span><span> </span><span>note</span>: <span>`</span><span>#[deny(unconditional_panic)]</span><span>`</span><span> </span><span>on</span><span> </span><span>by</span><span> </span><span>default</span><span>
</span></code></pre></div><p>I don’t even know if I should call this a nit or just straight up be impressed. Did Rust <em>evolve</em> to the point the <em>book</em> can no longer trick me into making a runtime panic?! This is some straight-jacket level packaging I swear to god. Much applause.</p><hr><h4 id="_a-smol-walk-in-the-woods_"><em>A smol walk in the woods</em></h4><p>Having picked up many a good pointer during this lesson I figured I had bumped myself up a couple of notches. Maybe white-belt, double-yellow-tip or something along those lines… “<em>Let’s go for a wander</em>” I thought to myself with quiet confidence. Looking left, and then looking right, under the shelter of a single raised eye-brow I chose to descend toward the belly of Rust.</p><p><em><strong><code>Ctrl + *click*</code></strong></em></p><p>I chose a simple avenue. I chose something concrete to all beginners. I chose the pinnacle of <code>Hello_World</code>…</p><p>I chose to dive into <code>println!</code></p><p>… and dive I did. Straight into the ground after clanking my head into a hard iron post of this macro. My eyes but glimpsed Sauron directly and from then on and always, I am blind:</p><div><pre><code data-lang="rust"><span>#[macro_export]</span><span>
</span><span></span><span>#[stable(feature = </span><span>"rust1"</span><span>, since = </span><span>"1.0.0"</span><span>)]</span><span>
</span><span></span><span>#[allow_internal_unstable(print_internals, format_args_nl)]</span><span>
</span><span></span><span>macro_rules</span><span>!</span><span> </span><span>println</span><span> </span><span>{</span><span>
</span><span>    </span><span>()</span><span> </span><span>=&gt;</span><span> </span><span>(</span><span>$crate</span>::<span>print</span><span>!</span><span>(</span><span>"\n"</span><span>));</span><span>
</span><span>    </span><span>(</span><span>$($arg</span>:<span>tt</span><span>)</span><span>*</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>({</span><span>
</span><span>        </span><span>$crate</span>::<span>io</span>::<span>_print</span><span>(</span><span>$crate</span>::<span>format_args_nl</span><span>!</span><span>(</span><span>$($arg</span><span>)</span><span>*</span><span>));</span><span>
</span><span>    </span><span>})</span><span>
</span><span></span><span>}</span><span>
</span></code></pre></div><p>What in God’s sweet name is this acrid assault on all of my senses?</p><p>I am going to be honest here. There is no way in hell I will understand this macro by the end of my twentieth lesson. Will I?
I’m not sure actually. I guess there’s hope? Chapters <a href="https://doc.rust-lang.org/book/ch10-00-generics.html">10</a>, <a href="https://doc.rust-lang.org/book/ch14-00-more-about-cargo.html">14</a> and <a href="https://doc.rust-lang.org/book/ch19-00-advanced-features.html">19</a> all look they will be mandatory. <em>Hoping Intensifies … ?</em></p><hr><h4 id="expressions-versus-statements">Expressions versus Statements</h4><blockquote><p>If you add a semicolon to the end of an expression, you turn it into a statement, which will then not return a value. Keep this in mind as you explore function return values and expressions next.</p></blockquote><p>This was a mind fuck - about 10 minutes before reading this I thought to myself that semi-colons seemed optional and kind of pointless in rust. Boy was I well outside the woods.</p><p>A later thought did have me wondering though; do Rustaceans really just write expressions at the end of their getter functions or is it more common to explicitly <code>return</code>?</p><hr><blockquote><p>In …</p></blockquote></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://levpaul.com/posts/rust-lesson-3-and-4/">https://levpaul.com/posts/rust-lesson-3-and-4/</a></em></p>]]>
            </description>
            <link>https://levpaul.com/posts/rust-lesson-3-and-4/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24977373</guid>
            <pubDate>Tue, 03 Nov 2020 07:46:31 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Nassim Taleb vs. Nate Silver: who is right about election forecasting?]]>
            </title>
            <description>
<![CDATA[
Score 92 | Comments 154 (<a href="https://news.ycombinator.com/item?id=24976175">thread link</a>) | @probe
<br/>
November 2, 2020 | http://quant.am/statistics/2020/10/11/taleb-silver-feud/ | <a href="https://web.archive.org/web/*/http://quant.am/statistics/2020/10/11/taleb-silver-feud/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
			
<p>Perhaps lost in the whirlwind of presidential name-calling, a lesser-known multi-year old feud has resurfaced on Twitter this election season. Nate Silver is the founder of <a href="https://fivethirtyeight.com/">FiveThirtyEight</a> and is a popular statistician frequently called upon by media members to give commentary and expertise on election forecasting. Nassim Taleb is a statistician/quant turned philosopher, perhaps most well known for authoring the book “The Black Swan”. He is second most well known for calling people names on Twitter. In this 2018 instance he seemed to take issue with FiveThirtyEight’s election forecasts, saying that <a href="https://twitter.com/nntaleb/status/1059202026184282113">“klueless Nate Silver” “doesn’t know how math works”</a>, among a host of other insults. Silver responded that Taleb was an <a href="https://twitter.com/NateSilver538/status/1062782704159256576">“intellectual-yet-idiot”</a>, an phrase coined by Taleb himself. Ouch. A litany of statisticans, mathematicians, and data scientists came out of the woodwork to take sides. Taleb himself <a href="https://twitter.com/nntaleb/status/1314902682570764288">doubled down</a> on Oct. 10, 2020, again calling Silver “totally clueless”.</p>

<p>In this article I take a look behind the mathematical premises of Taleb’s arguments, and give intuitive explanations of why or why not they hold up. In short, while Taleb’s math is sound, he still manages to miss the mark by ignoring the nuance of Silver’s forecasts.</p>

<p>Taleb’s main gripe is that forecasters change their opinion too much over time. Take a look at FiveThirtyEight’s forecast from the 2016 presidential election, where the probability of Clinton winning peaked at 90%, and hit a low of 50%. 
<img src="http://quant.am/assets/2016election.png" alt="2016 election"></p>

<p>Taleb insists that Clinton never should’ve received a probability of winning of 90%. Even if polls were heavily in favor of Clinton at the time, he says Silver should’ve taken into account the uncertainty that polls would change over the next few months leading up to the election, or the possibility of major news breaking. If Silver had factored in the “unknown unknowns” his forecast should’ve been closer to 50%. In essence, this single number should reflect all <em>current and future uncertainty</em>. Taleb constructs this argument by way of quantitative finance, which perhaps led to him and traditional statisticians talking past each other. In the following sections I step through his argument in intuitive terms.</p>


<p>A well known truth to economists, quants, and traders: if I tell you a number, I must be willing to transact at that number. If I tell you the fair value of this house is $500,000, I must be willing to buy AND sell at that price. Otherwise, the number I gave you is meaningless. Likewise, if I tell you the probability of Biden winning this election is 73%, I must be willing to pay $0.73 to make the following wager: if Biden wins I receive $1, if he loses I receive $0.</p>

<p>This is important because it turns the predicted probabilities into a tradeable financial instrument known as a binary option. If the prediction is 50%, I can buy the option at $0.50. If the prediction moves to 65%, I can now sell the option at $0.65, turning a $0.15 profit.</p>

<p>This brings us to another important principle known as the <em>no-arbitrage condition</em>. If the election predictions are accurate, there should be no way for a trader to make guaranteed money by trading this option. To give an illustrative example, let’s say that we live in an unchanging world where the probability of Candidate A winning is static at 50%. If a pollster does not report a static forecast day after day, he will create an arbitrage opportunity. We will sell when the prediction is above 50%, and buy below. 
<img src="http://quant.am/assets/arbitrage-pollster.jpeg" alt="Arbitrage condition"></p>

<p>OK, so now we’ve established that if an arbitrage condition exists, then the pollster is wrong and should not have made that prediction in the first place. Still, it’s not obvious that there’s an arbitrage condition within Silver’s predictions yet (remember, the trader doesn’t have access to an oracle, and only has the same information available to him as the pollster). There’s two more building blocks that we need in order to establish an arbitrage condition.</p>


<p>To paraphrase Taleb, if I tell you an event has a 0% chance of occurring, I cannot change my mind and tell you tomorrow it now has a 50% chance of occurring. Otherwise I shouldn’t have told you it has a 0% chance in the first place. Probability and confidence are inextricably linked, and the number a pollster predicts should encapsulate both. To go to the other extreme, if the uncertainty is extremely high (and therefore confidence low), <em>it does not matter what the polls today are saying</em>. I should give both candidates a 50% chance of winning, because I am admitting the extremely likely possibility that an external event will happen that will invalidate today’s polls. To put it in technical terms, maximum uncertainty implies maximum entropy, and the maximum entropy distribution on the [0, 1] interval is the uniform distribution, which has a mean at .5. The following figure (from <a href="https://arxiv.org/pdf/1703.06351.pdf">this paper</a>) shows the relationship between probability (x-axis) and volatility (y-axis) under a specific option pricing formulation.
<img src="http://quant.am/assets/confidence-probability.png" alt="Confidence vs volatility"></p>

<p>At this point we are suspecting something doesn’t look right with FiveThirtyEight’s predictions, as they seem to have both high volatility and high probability, which contradict each other. Where is the threshold though? How can we prove that the volatility is too high?</p>


<p>Now we’re going to go a little bit technical and show that a no-arbitrage condition was likely violated. The basic construction is as follows:</p>

<ol>
  <li>In order to satisfy the no-arbitrage condition, all information must be “priced in” into the pollster’s current prediction.</li>
  <li>Therefore, the time series of predictions must be a martingale.</li>
  <li>Martingales cannot show trending or mean-reverting behavior, therefore Silver’s predictions violated the martingale property, and therefore the no-arbitrage condition.</li>
</ol>

<p>The definition of a martingale is a stochastic process \(X_1, X_2, ... X_t\) that satisfies</p><p>

\[E[X_{t+1} | X_1, ... ,X_t] = X_t\]

</p><p>To quote <a href="https://www.researchgate.net/profile/Christopher_Wlezien/publication/344419648_Information_incentives_and_goals_in_election_forecasts/links/5f73c994a6fdcc0086484861/Information-incentives-and-goals-in-election-forecasts.pdf">Andrew Gelman</a>,</p>

<blockquote>
  <p>In non-technical terms, the martingale property says that knowledge of the past will be of no use in predicting the future…One implication of this is
that it should be unlikely for forecast probabilities to change too much during the campaign (Taleb, 2017). Big events can still lead to big changes in the forecast: for example, a series of polls with Biden or Trump doing much better than before will translate into an inference that public opinion has shifted in that candidate’s favor. The point of the martingale property is not that this cannot happen, but that the possibility of such shifts should be anticipated in the model, to an amount corresponding to their prior probability. If large opinion shifts are allowed with high probability, then there should be a correspondingly wide uncertainty in the vote share forecast a few months before the election, which in turn will lead to win probabilities closer to 50%.</p>
</blockquote>

<p>In other words, all information is already priced into the current market. If it were not so, a trader could make money by taking advantage of the information that is not priced in already. So last thing we need to check: is it likely that Silver’s predictions have the martingale property? It is not in dispute that the answer is no…it shows clear mean-reversion behavior and can be validated by a statistical test of the martingale hypothesis (for example, a <a href="http://www.planchet.net/EXT/ISFA/1226.nsf/9c8e3fd4d8874d60c1257052003eced6/35822efeb009804cc1257afe006b0063/$FILE/11park.pdf">Kolmogorov-Smirnov test</a>). It seems that Taleb’s math is sound here. So where did he go wrong?</p>


<p>I believe Nate Silver is answering a subtly different question with his election forecasts. Each data point that Silver produces is answering the question: <em>if the election were to happen today</em>, what is the probability of each candidate winning? I argue that this is a valid and useful formulation. To put it slightly differently: if the question is “Who will win the election on Nov. 3?”, which of the following answers is more satisfying?</p>

<ul>
  <li>“If nothing else changes between now and the election, Joe Biden has a 85% chance of winning.” (Silver’s argument)</li>
  <li>“I dunno, anything could happen between now and the election, I give neither candidate chances much more than 50%.” (Taleb’s argument)</li>
</ul>

<p>It is a valid criticism that perhaps Silver is not very clear on explaining what his numbers represent, and therefore the media misreports his predictions. Still, I wager that most people would find the first answer more useful. In this interpretation, the “financial instrument” is a binary option that expires every day. Thefore the time series of Silver’s predictions is not interpretable as a martingale, as it strings together the price of a completely different instrument every day.</p>

<p>It is also a valid criticism that Silver’s predictions prior to Nov. 3 mean absolutely nothing, whereas in the Taleb formulation it has a natural interpretation as the betting odds for each candidate. Silver has explicitly stated that he only judges his models based on his finalized prediction. To that end, his models are extremely well calibrated, i.e., when he says something has a 50% chance of happening it actually does happen 50% of the time.
<img src="http://quant.am/assets/538-calibration.png" alt="538 calibration"></p>

<p>In conclusion, Taleb and Silver should be having a philosophical debate on what pollsters’ numbers actually mean, and stay away from the useless distraction of calling each other names on Twitter.</p>

<h3 id="update-10122020">Update (10/12/2020)</h3>
<p>Andrew Gelman, Aubrey Clayton, Dhruv Madeka and many other statisticians respond and give their thoughts: <a href="https://statmodeling.stat.columbia.edu/2020/10/12/more-on-martingale-property-of-probabilistic-forecasts-and-some-other-issues-with-our-election-model/">https://statmodeling.stat.columbia.edu/2020/10/12/more-on-martingale-property-of-probabilistic-forecasts-and-some-other-issues-with-our-election-model/</a></p>

<h3 id="update-2-1132020">Update 2 (11/3/2020)</h3>
<ul>
  <li>Nassim Taleb responds to this post on <a href="https://twitter.com/nntaleb/status/1323594733797679104">Twitter</a></li>
  <li><a href="https://news.ycombinator.com/item?id=24976175">Hacker News discussion</a></li>
</ul>

		</div></div>]]>
            </description>
            <link>http://quant.am/statistics/2020/10/11/taleb-silver-feud/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24976175</guid>
            <pubDate>Tue, 03 Nov 2020 04:04:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[EME, CDM, AES, CENC, and Keys – Building Blocks of DRM]]>
            </title>
            <description>
<![CDATA[
Score 92 | Comments 48 (<a href="https://news.ycombinator.com/item?id=24975487">thread link</a>) | @jayjohn436
<br/>
November 2, 2020 | https://ottverse.com/eme-cenc-cdm-aes-keys-drm-digital-rights-management/ | <a href="https://web.archive.org/web/*/https://ottverse.com/eme-cenc-cdm-aes-keys-drm-digital-rights-management/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<figure>
<img src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/08/eme-cdm-cenc-featured-image.png?resize=678%2C381&amp;ssl=1" alt="eme cdm cenc keys" title="eme-cdm-cenc-featured-image" data-src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/08/eme-cdm-cenc-featured-image.png?resize=678%2C381&amp;ssl=1" data-old-src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
</figure>


<p><strong>Anyone trying to understand DRM (Digital Rights Management) will be confronted with acronyms such as AES, CDM, CENC, EME, etc. This can get very confusing for a newcomer, but understanding them is important to get a good understanding of DRM. In this article, let’s take a gentle tour of the building blocks of DRM:- EME, CDM, AES, CENC, and the use of Keys &amp; Key Servers.</strong></p>








<h2 id="simplified-architecture-of-a-drm-system"><span id="Simplified_Architecture_of_a_DRM_System"></span>Simplified Architecture of a DRM System<span></span></h2>



<p>As we saw&nbsp;<a href="https://ottverse.com/what-is-drm-digital-rights-management/">in the previous article</a>,&nbsp;<strong>DRM is a combination of encryption and business rules to control access and consumption of digital content.</strong></p>



<p>Simply put, DRM is a system that,</p>



<ul><li>provides the tools and infrastructure to enable a content provider to encrypt their content, and</li><li>build an ecosystem around the encrypted content so that the content provider can control who/what can decrypt and consume their content.</li></ul>



<p><a href="https://ottverse.com/what-is-drm-digital-rights-management/">In the previous article of the series</a>, we saw Ram and Shyam sending coded messages to each other. At the same time, Hari maintained the codebooks and decided who got to read/write the notes – remember?</p>



<figure><img data-attachment-id="156" data-permalink="https://ottverse.com/with-drm/" data-orig-file="https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/with-drm.png?fit=1316%2C878&amp;ssl=1" data-orig-size="1316,878" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="with-drm" data-image-description="" data-medium-file="https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/with-drm.png?fit=300%2C200&amp;ssl=1" data-large-file="https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/with-drm.png?fit=1024%2C683&amp;ssl=1" loading="lazy" width="1024" height="683" src="https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/with-drm.png?resize=1024%2C683&amp;is-pending-load=1#038;ssl=1" alt="aes-cenc-cdm-eme-keys" data-recalc-dims="1" data-lazy-srcset="https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/with-drm.png?resize=1024%2C683&amp;ssl=1 1024w, https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/with-drm.png?resize=300%2C200&amp;ssl=1 300w, https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/with-drm.png?resize=768%2C512&amp;ssl=1 768w, https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/with-drm.png?resize=1200%2C801&amp;ssl=1 1200w, https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/with-drm.png?w=1316&amp;ssl=1 1316w" data-lazy-sizes="(max-width: 1000px) 100vw, 1000px" data-lazy-src="https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/with-drm.png?resize=1024%2C683&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure>



<p>Now, let’s take this simple system and replace it with the technology needed to secure and distribute video. What do we get?</p>



<figure><img data-attachment-id="138" data-permalink="https://ottverse.com/step-0/" data-orig-file="https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0.png?fit=1396%2C818&amp;ssl=1" data-orig-size="1396,818" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="step-0" data-image-description="" data-medium-file="https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0.png?fit=300%2C176&amp;ssl=1" data-large-file="https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0.png?fit=1024%2C600&amp;ssl=1" loading="lazy" width="1024" height="600" src="https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0.png?resize=1024%2C600&amp;is-pending-load=1#038;ssl=1" alt="aes-cenc-cdm-eme-keys" data-recalc-dims="1" data-lazy-srcset="https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0.png?resize=1024%2C600&amp;ssl=1 1024w, https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0.png?resize=300%2C176&amp;ssl=1 300w, https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0.png?resize=768%2C450&amp;ssl=1 768w, https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0.png?resize=1200%2C703&amp;ssl=1 1200w, https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0.png?w=1396&amp;ssl=1 1396w" data-lazy-sizes="(max-width: 1000px) 100vw, 1000px" data-lazy-src="https://i2.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0.png?resize=1024%2C600&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure>



<p>Let’s describe what we have here. There is a movie that we want to send to an authenticated user securely.</p>



<p>So,</p>



<ol><li>we ask a DRM company’s server for a codebook to encrypt our video,</li><li>then, we encrypt the video using that codebook</li><li>we send the movie to the user.</li><li>the user then asks the DRM company’s server for the codebook to unlock the video (decrypt it)</li><li>and then he watches the movie!</li></ol>



<p>Fantastic!</p>



<p>Is this all there is to know about DRM for video?</p>



<p>Nope! What we have here is a simple, toy-example of how to transfer movies securely using DRM. It captures the essence of DRM perfectly but wouldn’t work well in the real world.</p>



<p>In the rest of this article, let’s take each piece of this simple system, re-think it, re-design it, and see how it fits within the world of video delivery and DRM, shall we?</p>



<h2 id="step-0-lets-move-to-adaptive-bitrate-streaming"><span id="Step_0_Let%E2%80%99s_Move_to_Adaptive_Bitrate_Streaming"></span>Step 0: Let’s Move to Adaptive Bitrate Streaming<span></span></h2>



<p>Before we talk about the order, let’s modify our example to suit the ABR (<strong>A</strong>daptive&nbsp;<strong>B</strong>it<strong>R</strong>ate) model of video delivery.</p>



<p><strong>ABR Refresher:</strong>&nbsp;in ABR, a movie is encoded into different bitrate-resolution combinations&nbsp;<em>(a.k.a ladder)</em>&nbsp;and then split into&nbsp;<strong>chunks or segments</strong>. Each chunk represents a few seconds of video and it is independently decodable.</p>



<p><strong>“Packaging”</strong>&nbsp;refers to chunking or breaking up a movie into small pieces and describing it in a manifest or playlist document. When the user wants to play the movie, he needs to refer to this manifest.</p>



<p>Depending on the available bandwidth, the player requests a chunk/segment of a particular bitrate&nbsp;<em>(rendition, or rung of the ladder)</em>&nbsp;and a CDN (Content Delivery Network) responds with the requested chunk.</p>



<p>Popular methods of video delivery using ABR are MPEG DASH and HLS. For a deeper understanding, please refer to our articles on&nbsp;<a href="https://ottverse.com/what-is-ott-video-streaming/">OTT</a>&nbsp;and&nbsp;<a href="https://ottverse.com/what-is-abr-video-streaming/">ABR</a>&nbsp;video streaming.</p>



<p>Let’s change our block digram to reflect ABR video delivery.</p>



<figure><img data-attachment-id="139" data-permalink="https://ottverse.com/step-0-with-abr/" data-orig-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0-with-abr.png?fit=1476%2C868&amp;ssl=1" data-orig-size="1476,868" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="step-0-with-abr" data-image-description="" data-medium-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0-with-abr.png?fit=300%2C176&amp;ssl=1" data-large-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0-with-abr.png?fit=1024%2C602&amp;ssl=1" loading="lazy" width="1024" height="602" src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0-with-abr.png?resize=1024%2C602&amp;is-pending-load=1#038;ssl=1" alt="aes-cenc-cdm-eme-keys" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0-with-abr.png?resize=1024%2C602&amp;ssl=1 1024w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0-with-abr.png?resize=300%2C176&amp;ssl=1 300w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0-with-abr.png?resize=768%2C452&amp;ssl=1 768w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0-with-abr.png?resize=1200%2C706&amp;ssl=1 1200w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0-with-abr.png?w=1476&amp;ssl=1 1476w" data-lazy-sizes="(max-width: 1000px) 100vw, 1000px" data-lazy-src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/step-0-with-abr.png?resize=1024%2C602&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure>



<p>The only changes here are the packaging and CDN-based delivery steps. That’s all.</p>



<p>Okay, let’s move on and start with the encryption process.</p>



<h2 id="step-1-video-encryption"><span id="Step_1_Video_Encryption"></span>Step 1: Video Encryption<span></span></h2>



<p>The whole idea of encryption is to ensure that when someone intercepts our data, they should not read it or watch it in the case of video.</p>



<p><strong>Encryption refresher:</strong>&nbsp;–&nbsp;<em>encryption is a technique used to keep data confidential and prevent unauthorized people from reading it. Encryption uses a “key” to convert input data (plaintext) into an alternate form called ciphertext. It is almost impossible to convert the ciphertext back to plaintext without the key.</em></p>



<p><em>However, practically speaking, decryption without the key is possible, and encryption algorithms are designed make reverse-engineering extremely expensive – in terms of time, money, and computing resources needed.</em></p>



<p>One of the most popular encryption techniques is the “Advanced Encryption Standard” or “AES” for short. It is also called Rijndael (after its inventor) and was established by the U.S. National Institute of Standards and Technology (NIST) in 2001 to encrypt electronic data.</p>



<p>Some important points to remember about AES:-</p>



<ul><li>It’s a&nbsp;<strong>symmetric-key algorithm</strong>: encryption and decryption are performed using the same key.</li><li>It has three variants based on the key-length: 128, 192, and 256 bits. The longer the key, the harder it is to crack.</li><li>Cracking the AES-128 without the key would require a “billion times a billion years” and a super-computer (<a href="https://www.eetimes.com/how-secure-is-aes-against-brute-force-attacks/" target="_blank" rel="noopener">source</a>).</li></ul>



<p>If you are interested in going deep into the AES standard, look at the&nbsp;<a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard" target="_blank" rel="noopener">AES’s Wikipedia page</a>.&nbsp;<em>I am not an expert in cryptography and won’t be able to do justice to the AES.</em></p>



<p><strong>Note:</strong>&nbsp;Please remember that&nbsp;<strong>encryption is not encoding, and decryption is not decoding in the video space</strong>. For videos, encoding and decoding are words used to refer to compression and decompression, respectively. To learn more about encoding, decoding, and video codecs, please read our articles on&nbsp;<a href="https://ottverse.com/need-for-video-compression/">the need for compression</a>&nbsp;and a&nbsp;<a href="https://ottverse.com/what-is-a-video-codec/">simple introduction to video codecs</a>.</p>



<h3 id="is-aes-128-the-only-encryption-technique"><span id="Is_AES128_The_Only_Encryption_Technique"></span>Is AES-128 The Only Encryption Technique?<span></span></h3>



<p>No, it isn’t, and let’s think about the implication of this for a minute.</p>



<p>If a content provider decides to engage with three different DRM companies, and all three use different encryption techniques, then it means that the content provider needs to encrypt their videos three times, resulting in a waste of storage space and other resources.</p>



<p>That is why the CENC specification came into being – to reduce this encryption-driven fragmentation of the market and to reduce storage requirements.</p>



<p>Let’s learn about this next.</p>



<h3 id="cenc-or-common-encryption"><span id="CENC_or_Common_Encryption"></span>CENC or Common Encryption<span></span></h3>



<p><strong>Actually, before we dive into CENC, let’s step back and take a look at the state of OTT streaming protocols and CMAF in particular.</strong></p>



<p>There are primarily two protocols in use today – MPEG-DASH and HLS.&nbsp;<em>There are others such as MSS (Microsoft Smooth Streaming) and HDS, but, we’ll leave them aside for this discussion.</em></p>



<p>MPEG-DASH uses the&nbsp;<code>mp4</code>&nbsp;container format for its videos and HLS uses the MPEG-TS (<code>ts</code>) container for its files. If a content provider uses both MPEG-DASH and HLS, then they need to store a copy of their videos in both&nbsp;<code>mp4</code>&nbsp;and&nbsp;<code>ts</code>&nbsp;file formats.</p>



<p>Now, let’s add the DRM encryption problem to it. If our three hypothetical DRM providers use three different encryption standards, then a content providers needs to store&nbsp;<code>2 * 3</code>&nbsp;… six copies of each video! What a waste of storage space!!</p>



<p><strong>To combat the first problem posed by video streaming protocols, the&nbsp;<a href="https://mpeg.chiariglione.org/standards/mpeg-a/common-media-application-format" target="_blank" rel="noopener">CMAF</a>&nbsp;specification was created</strong> which said that videos can be stored in the&nbsp;<strong>fragmented mp4</strong>&nbsp;container format (<code>fmp4</code>). With support from both MPEG-DASH and HLS, you can now create only one set of videos, store it in&nbsp;<code>fmp4</code>&nbsp;format, and use a common set of files for both protocols. </p>



<p><strong>Just make sure you create two manifests (sigh!).</strong></p>



<h3><span id="How_About_Unifying_the_Encryption"></span><strong>How About Unifying the Encryption?</strong><span></span></h3>



<p>We still need to store multiple copies of each file if different DRM technologies use different encryption standards, right?</p>



<p>For this purpose, the MPEG developed the&nbsp;<a href="https://www.iso.org/standard/68042.html" target="_blank" rel="noopener">CENC or Common Encryption specification</a>, specifying that videos can be encrypted using either&nbsp;<code>cenc</code>&nbsp;(AES-128 CTR) or&nbsp;<code>cbcs</code>&nbsp;(AES-128 CBC).&nbsp;<em>CTR stands for Counter; and CBC stands for Cipher Block Chaining.</em></p>



<p>The implication of CENC is that a content provider needs to encrypt his videos only once and any decryption module can decrypt it.&nbsp;<em>Note: Exposing the encryption algorithm is not a problem as long as the keys are strongly protected.</em></p>



<p><strong>Well, CENC might sound like a magic wand for DRM-unification, but it is not.</strong></p>



<p>There are three primary DRM technologies in the market – Apple FairPlay, Google Widevine, and Microsoft PlayReady.</p>



<ul><li>Apple FairPlay supports only AES-CBC&nbsp;<code>cbcs</code>&nbsp;mode.</li><li>HLS supports only AES-CBC&nbsp;<code>cbcs</code>&nbsp;mode (irrespective of CMAF)</li><li>Widevine and PlayReady support both AES-128 CTR&nbsp;<code>cenc</code>&nbsp;or AES-128 CBC&nbsp;<code>cbcs</code>&nbsp;modes.</li><li>MPEG-DASH with CMAF supports both AES-128 CTR&nbsp;<code>cenc</code>&nbsp;or AES-128 CBC&nbsp;<code>cbcs</code>&nbsp;modes.</li><li>MPEG-DASH without CMAF supports only AES-128 CTR&nbsp;<code>cenc</code>&nbsp;mode.</li></ul>



<p>As you can see, the CMAF and CENC specs have lead to confusion and fragmentation in the streaming space. </p>



<p><strong>A possible convergence point is the universal use of CMAF and AES-CBC&nbsp;cbcs&nbsp;mode, but, how will these impact legacy devices that support only CTR or only MPEG-TS?</strong></p>



<p>That’s a discussion for another time.</p>



<h2 id="step-2-key-keyid-and-the-license-server"><span id="Step_2_Key,_KeyID,_and_the_License_Server"></span>Step 2: Key, KeyID, and the License Server<span></span></h2>



<p>By now, we have established that we will be encrypting or videos using AES-128 bit encryption. At this stage, a few questions that come up are –</p>



<ol><li>Where do we get the AES-128 Encryption Keys?</li><li>How do we associate an Encryption Key with a movie?</li><li>Where do we store the Encryption Keys?</li></ol>



<p>Let’s answer them one at a time.</p>



<h3 id="where-do-we-get-the-aes-128-bit-encryption-keys"><span id="Where_do_we_get_the_AES128_bit_encryption_keys"></span>Where do we get the AES-128 bit encryption keys?<span></span></h3>



<p>Any content provider can generate the encryption keys manually using specialized software. Alternatively, several DRM vendors provide the necessary tools and software to generate these keys.</p>



<h3 id="how-do-we-associate-an-encryption-key-with-a-movie"><span id="How_do_we_associate_an_encryption_key_with_a_movie"></span>How do we associate an encryption key with a movie?<span></span></h3>



<p>Let’s understand the “why” first. When you go to a hotel, you ask the receptionist for the keys to a particular room by mentioning the room number – right? You’re providing the association here between a key and a room by telling her the room number.</p>



<p>Similarly, when we encrypt a movie with a particular key, we need to create that association and provide that to the DRM license server&nbsp;<em>(our receptionist, if you will)</em>.</p>



<p>In DRM, a “<strong>KeyID</strong>” provides the association between an encryption key and a movie. It is a&nbsp;<strong>unique</strong>&nbsp;string of characters generated at the time of creating an encryption key for a particular movie.</p>



<p><em>And finally,</em></p>



<h3 id="where-do-we-store-the-encryption-key--its-keyid"><span id="Where_do_we_store_the_Encryption_Key_its_KeyID"></span>Where do we store the Encryption Key &amp; its KeyID?<span></span></h3>



<p><strong>The Encryption Key and the KeyID are stored in a secure server (Key Store) that works alongside a DRM license server</strong>.</p>



<p>When a client needs to play an encrypted movie, it requests the DRM license server for the decryption key by providing that …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://ottverse.com/eme-cenc-cdm-aes-keys-drm-digital-rights-management/">https://ottverse.com/eme-cenc-cdm-aes-keys-drm-digital-rights-management/</a></em></p>]]>
            </description>
            <link>https://ottverse.com/eme-cenc-cdm-aes-keys-drm-digital-rights-management/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24975487</guid>
            <pubDate>Tue, 03 Nov 2020 01:38:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Leaving OCaml]]>
            </title>
            <description>
<![CDATA[
Score 236 | Comments 180 (<a href="https://news.ycombinator.com/item?id=24974907">thread link</a>) | @rbanffy
<br/>
November 2, 2020 | https://blog.darklang.com/leaving-ocaml/ | <a href="https://web.archive.org/web/*/https://blog.darklang.com/leaving-ocaml/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://blog.darklang.com/content/images/size/w300/2020/11/skeleton-camel.jpg 300w,
                            https://blog.darklang.com/content/images/size/w600/2020/11/skeleton-camel.jpg 600w,
                            https://blog.darklang.com/content/images/size/w1000/2020/11/skeleton-camel.jpg 1000w,
                            https://blog.darklang.com/content/images/size/w2000/2020/11/skeleton-camel.jpg 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://blog.darklang.com/content/images/size/w2000/2020/11/skeleton-camel.jpg" alt="Leaving OCaml">
            </figure>

            <section>
                <div>
                    <p><em>Part of a 3 part series. Followups on <a href="https://blog.darklang.com/new-backend-fsharp/">F#</a>, <a href="https://blog.darklang.com/why-dark-didnt-choose-rust/">Rust</a></em></p><p>I built the first demo of Dark in Python, in about two weeks. A few months later when I started productizing it, I rebuilt it in OCaml. Back in 2017, when I was considering the language and platform to use for Dark, OCaml was extremely compelling:</p><ul><li>it's a high-level language with static types, so easy to make large scale changes as we figure out what the language/product was</li><li>you mostly model data with sum types, which in my mind are the best way to model data</li><li>it's very similar to the language I wanted to build (in particular, we could reuse built-in immutable data structures for Dark's values)</li><li>it had a reputation for being high-performance, which meant that we could write an interpreter for Dark and not have it be terribly slow (vs writing an interpreter in python, which might be too slow)</li></ul><p>Unfortunately, as we've built Dark we've run into significant problems that have made it challenging to build in OCaml.</p><h2 id="lack-of-libraries">Lack of libraries</h2><p>When you bet on an off-mainstream language, one of the things you accept is that many libraries are not going to be available. When there is a small community, often there aren't enough people working in the language to make important libraries. This is especially true if few people are building business applications.</p><p>In OCaml there are many high quality libraries, especially for data structures and data manipulation. The annual<a href="https://opensource.janestreet.com/core/"> Jane Street code dump</a> has been quite useful and very high quality. However, we really felt the lack of several libraries. The most obvious of these is that we had to build a <a href="https://github.com/darklang/dark/blob/main/backend/libexecution/unicode_string.mli">Unicode string library</a> ourselves (built on top of the <a href="https://erratique.ch/software/uuseg">very impressive OCaml Unicode libraries</a> built by <a href="https://erratique.ch/contact.en">Daniel Bünzli</a>), but we needed many more libraries than that.</p><p>The lack of an SDK for Google Cloud has affected us greatly. When you're searching for product-market fit, you do the simplest, easiest thing. If you lack a good SDK for your cloud provider, the simplest, easiest thing is often a terrible architectural choice. We've built our own queue on top of our database rather than using the production-quality cloud queues available on GCP. Similarly, we barely use the Cloud Storage (GCP's version of S3), because we initially put things in the database <a href="https://blog.darklang.com/evolving-darks-tracing-system/">because it was easier</a>. We've built 3 services, 2 <a href="https://github.com/darklang/dark/tree/main/containers/stroller">in</a> <a href="https://github.com/darklang/dark/tree/main/containers/queue-scheduler">Rust</a>, and 1 in <a href="https://github.com/darklang/dark/tree/main/containers/postgres-honeytail">Go</a>, to workaround the challenges we've faced.</p><p>The biggest challenge here is our use of Postgres. Postgres is a great database and we're big fans, but Cloud SQL is not a great hosted database. GCP's position is that Cloud SQL is there to tick a box and we should be using Cloud Spanner. I would love to switch to Cloud Spanner, but we have no driver for it in OCaml. Given the Postgres driver in OCaml is not particularly mature, it's hard to expect that a Cloud Spanner driver would exist, and indeed it doesn't. We've had to contribute to the <a href="https://github.com/mmottl/postgresql-ocaml/commit/81a4ae5240decd8f483a90568257cfbc1558c7ed">OCaml Postgres driver</a>, and some parts of our codebase have been <a href="https://github.com/darklang/dark/blob/main/backend/libbackend/serialize.ml#L226">well and truly mangled</a> when working around features not supported in that driver.</p><p>We've also suffered from a lack of a high-level, production web stack (there are <a href="https://github.com/anmonteiro/ocaml-h2">low-level stacks with good reputations</a> that I've struggled to use, and a <a href="https://github.com/oxidizing/sihl">few</a> <a href="https://github.com/reason-native-web/morph">new</a> ones out there that look good), in particular lacking a user authentication module. We've been using <a href="https://auth0.com/">Auth0</a> to work around this for now, which has more moving pieces than I'd like, and a shockingly high cost (our 7000 users, most of whom never log in, costs us over $500/mo).</p><p>We've worked around other missing vendor SDKs by calling their HTTP endpoints directly and that's been mostly fine. However, for libraries like encryption we don't have that option - we <a href="https://github.com/darklang/dark/pull/1455/files">hacked around a missing encryption library</a>, but decided not to ship it to production until we audited it for security (which was never actually worth the cost).</p><p>At CircleCI, we bet on Clojure. That was also a non-mainstream language, but its ability to call Java SDKs meant we had a mature cloud library, which was essential for building CircleCI. Of course, in OCaml we could call C libraries (and <a href="https://github.com/darklang/dark/pull/1841">even Rust libraries</a>, perhaps), but it doesn't match having native libraries we can call directly.</p><h2 id="learnability">Learnability</h2><p>I'm mostly in the camp that anyone can learn any language, but I saw a team struggle with OCaml, and for good reason. Language tutorials are extremely poor in OCaml compared to other languages; they're mostly lecture notes from academic courses.</p><p>The compiler isn't particularly helpful, certainly compared to Rust or Elm (both of which have been in our stack at one point). Often it gives no information about an error. Syntax errors typically say "Syntax error"; though it will try to give a good error for a mismatched brace, often incorrectly. Type errors can be a real burden to read, even after 3 years of experience with it.</p><p>The docs in OCaml are often challenging to find. The <a href="https://ocaml.janestreet.com/ocaml-core/latest/doc/base/index.html">Jane Street docs</a> have improved significantly in the last few years, but it can be a challenge to even figure out what functions are available in a particular module for most libraries. Compare to the excellent <a href="https://docs.rs/">docs.rs</a> in Rust, which has comprehensive API docs for every package in Rust.</p><p>One of the ways I personally struggled in OCaml is around <code>Lwt</code>. Lwt is (one of!) OCaml's async implementations. I couldn't figure it out several years ago and so just built a single-threaded server. The amount of workarounds and downtime we've suffered from that single decision is immense. A tutorial around building high-performance (or even medium performance!) web servers would be very valuable. </p><p>Tooling is something I read would be good in OCaml. I remember reading there was a debugger that could go back in time! I don't know where that's gone but I've never heard of anyone using it.</p><p>We have struggled to make editor tooling work for us. This is partially because we also use ReasonML and this seems to break things. Unfortunately, this is common in programming, but even more so in small communities: you might be the first person to ever try to use a particular configuration.</p><p>Finally, the disconnect between the various tools is immense. You need to understand Opam, Dune, and Esy, to be able to get something working (you could also do it without Esy and just rely on Opam, but that's much worse). I talked about a bunch of these challenges <a href="https://blog.darklang.com/first-thoughts-on-rust-vs-ocaml/">here</a>.</p><h2 id="language-problems">Language problems</h2><p>Multicore is coming Any Day Now™️, and while this wasn't a huge deal for us, it was annoying. </p><h2 id="minor-annoyances">Minor annoyances</h2><p>One of my biggest annoyances was how often OCaml folks talk about Fancy Type System problems, instead of how to actually build products and applications. In other communities for similar languages (ReasonML, Elm, F#), people talk about building apps and solving their problems. In OCaml, it feels like people spend an awful lot of time discussing Functors. It's not quite at the level that I perceived in the Haskell world, but it pointed out that the people building the core of the ecosystem do not have the same problems that I do (which is building web-y stuff).</p><p>I honestly think OCaml was a great choice at the start. Being able to quickly and safely make large-scale changes to your app is something that staticly-typed functional languages excel at. I'm happy that we made the choice, and in retrospect, it still seems like the best choice of those we had at the time.</p><p>I'm working on building the next version of the backend. We have about 20k lines to be replaced, and they'll be rewritten in a new language while keeping the semantics the same. I plan to leave keep the frontend in ReasonML: it doesn't suffer from the same library problems as it can interface nicely to JS, and it's nearly 50k lines of code so it would be a much bigger undertaking.</p><p>Read <a href="https://blog.darklang.com/new-backend-fsharp/">the followup</a> to see what we picked!</p><hr><p><em><em><em><em><em><em><em><em>You can sign up for Dark </em></em></em></em></em></em></em></em><a href="https://darklang.com/signup" rel="noopener nofollow"><em><em><em><em><em><em><em><em>here</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em>. For more info on Dark, follow our </em></em></em></em></em></em></em></em><a href="https://blog.darklang.com/rss" rel="noopener nofollow"><em><em><em><em><em><em><em><em>RSS</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em>, follow </em></em></em></em></em></em></em></em><a href="https://twitter.com/darklang" rel="noopener nofollow"><em><em><em><em><em><em><em><em>us</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em> (or </em></em></em></em></em></em></em></em><a href="https://twitter.com/paulbiggar" rel="noopener nofollow"><em><em><em><em><em><em><em><em>me</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em>) on Twitter, join our </em></em></em></em></em></em></em></em><a href="https://darklang.com/slack-invite" rel="noopener nofollow"><em><em><em><em><em><em><em><em>Slack Community</em></em></em></em></em></em></em></em></a><em><em><em><em><em><em><em><em>, watch our </em></em></em></em></em></em></em></em><a href="https://github.com/darklang/dark" rel="noopener nofollow"><em><em><em><em><em><em><em><em>GitHub repo</em></em></em></em></em></em></em></em></a><em>, or join our <a href="http://darklang.com/mailing-list">mailing list</a><em><em><em><em><em><em><em>.</em></em></em></em></em></em></em></em></p>
                </div>
            </section>



        </article>

    </div>
</div></div>]]>
            </description>
            <link>https://blog.darklang.com/leaving-ocaml/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24974907</guid>
            <pubDate>Tue, 03 Nov 2020 00:03:20 GMT</pubDate>
        </item>
    </channel>
</rss>
