<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 50]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 50. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Thu, 04 Mar 2021 16:58:39 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-50.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Thu, 04 Mar 2021 16:58:39 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[Why northern Europe is so indebted]]>
            </title>
            <description>
<![CDATA[
Score 70 | Comments 72 (<a href="https://news.ycombinator.com/item?id=26325765">thread link</a>) | @bryanrasmussen
<br/>
March 2, 2021 | https://theloop.ecpr.eu/why-northern-europe-is-so-indebted/ | <a href="https://web.archive.org/web/*/https://theloop.ecpr.eu/why-northern-europe-is-so-indebted/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section id="section-5-61"><div><div id="new_columns-6-61"><div id="div_block-7-61"><p><span id="span-26-61">
<p>You might think the US would be world champion of household debt, yet the highest private indebtment has always been in the Nordic countries. Debt, however, takes different forms, writes <strong>Martino Comelli</strong>. In Scandinavia, inclusive welfare systems make debt into an investment. Elsewhere, gerontocratic welfare and consumer credit can become a burden</p>
<h2>Debt and welfare: a trade-off?</h2>
<p>The economic crisis of 2007–2008 put household debt in the spotlight. <strong><a href="https://en.wikipedia.org/wiki/Financial_crisis_of_2007%E2%80%932008">A common narrative</a></strong> was that cheap credit fuelled a house price bubble in the US. The financial industry sold derivatives based on those debts and many European banks who bought those products went belly up, allowing the crisis to spread across the Atlantic.</p>
<p>Debt, and in particular, household debt, has been regarded with suspicion ever since. Many scholars argue that the rise of household debt was caused by welfare retrenchment, suggesting a trade-off between welfare and debt. A lack of welfare was compensated by private leveraging. Other scholars pointed out that many governments were pushing for asset-based welfare – like buying housing as a form of private welfare – encouraged by steadily rising house prices in the years preceding the crash.</p>
<figure><img loading="lazy" width="683" height="776" src="https://theloop.ecpr.eu/wp-content/uploads/2021/02/figure1.png" alt="" srcset="https://theloop.ecpr.eu/wp-content/uploads/2021/02/figure1.png 683w, https://theloop.ecpr.eu/wp-content/uploads/2021/02/figure1-264x300.png 264w" sizes="(max-width: 683px) 100vw, 683px"><figcaption>Figure 1: Quantity of household debt in OECD countries</figcaption></figure>
<p>Yet empirical data suggests that the welfare-debt trade-off may be mistaken. Curiously, the highest indebtment ratio in the OECD was, and is, in northern European countries such as Denmark, Norway, Sweden and the Netherlands. These are the countries with the most far-reaching welfare programmes, and known to be fiscally responsible. Clearly, the welfare-debt trade-off theory needs a rethink.</p>
<h2>Private debt, public virtues: on the age-orientation of welfare</h2>
<p>Is it, then, a complementary relationship? Generous welfare provides security, encouraging people to borrow more. But this interpretation does not fly either. Many European countries have generous welfare – France for example, has higher social spending than Denmark – but nowhere near the level of household debt of the Nordic countries.</p>
<p><strong><a href="https://doi.org/10.1080/02732173.2021.1875088">My research on the relations between welfare and household debt</a> </strong>offers a novel explanation of the welfare-debt conundrum. There is no trade-off between private debt and welfare, nor is there a complementary relation. What matters is where the welfare money is spent and how. It isn’t necessarily about the quantity of spending, but about its direction.</p>
<blockquote><p>While mortgages are a marker of privilege, another common type of debt, consumer credit, is often a marker of need</p></blockquote>
<p>Most welfare spending is concentrated on older generations, particularly retired people. According to <strong><a href="https://en.wikipedia.org/wiki/Life-cycle_hypothesis">Franco Modigliani</a>'s life-cycle <a href="https://en.wikipedia.org/wiki/Life-cycle_hypothesis">hypothesis</a></strong>, debt is linked to one's stage in life. People take on debt when young because their income is low but their expenses (housing, children, leisure) high – and they pay this debt off as they age.</p>
<p>Countries that not only provide social help for the elderly, but counterbalance that with spending and services for the young and economically active, tend to have higher private debt (see Figure 2). In particular, countries that spend on education and active labour market policies, and those which offer better protection for people in precarious jobs, have the highest levels of private debt.</p>
<p>Household debt is an unintended consequence of assuring a smoother transition to adulthood. In conservative continental European countries, however, despite high welfare spending, welfare is concentrated mostly on the elderly and on people with stable jobs. This discourages younger generations from taking risks, including mortgage debt.</p>
<figure><img loading="lazy" width="980" height="714" src="https://theloop.ecpr.eu/wp-content/uploads/2021/02/figure2.png" alt="Figure 2. Quantity of household debt by the age orientation of welfare spending in OECD countries" srcset="https://theloop.ecpr.eu/wp-content/uploads/2021/02/figure2.png 980w, https://theloop.ecpr.eu/wp-content/uploads/2021/02/figure2-300x219.png 300w, https://theloop.ecpr.eu/wp-content/uploads/2021/02/figure2-768x560.png 768w" sizes="(max-width: 980px) 100vw, 980px"><figcaption>Figure 2. Quantity of household debt by the age orientation of welfare spending in OECD countries.</figcaption></figure>
<p>Note: Figure 2 illustrates an inverse relationship between the elderly orientation of social spending (EBiSS, on the x axis), and the quantity of household debt as % of net disposable income (on the y axis). The EBiSS is a rate between social spending for the economically active (at the numerator) versus spending oriented toward the elderly (at the denominator). A higher value on the EBiSS index means that a greater share of social spending is going to the elderly.</p>
<h2>Consumer credit? The three worlds of debtfare capitalism</h2>
<p>Most of the debt in OECD countries is mortgage debt. While mortgages are a marker of privilege, another common type of debt, consumer credit, is often a marker of need.</p>
<p>If we consider consumer credit, the welfare-debt theory makes sense again. While consumer credit is more the exception than the norm in Europe, and almost absent in the Nordic countries, it is common in Anglo-liberal countries (UK, US and Canada) where it is used by families as a substitute for poor welfare provision.</p>
<figure><img loading="lazy" width="895" height="531" src="https://theloop.ecpr.eu/wp-content/uploads/2021/02/figure3.png" alt="Figure 3. Clusters measures" srcset="https://theloop.ecpr.eu/wp-content/uploads/2021/02/figure3.png 895w, https://theloop.ecpr.eu/wp-content/uploads/2021/02/figure3-300x178.png 300w, https://theloop.ecpr.eu/wp-content/uploads/2021/02/figure3-768x456.png 768w" sizes="(max-width: 895px) 100vw, 895px"><figcaption>Figure 3. Clusters measures</figcaption></figure>
<p>Figure 3 shows three main patterns of private debt/welfare configurations; what we call debtfare:</p>
<ol>
<li>In the Nordic / youth-oriented model, household debt is high, consumer credit is low, and the rate of young people Not in Education, Employment, or Training (NEET) is very low.</li>
<li>
<p>In conservative European countries such as Germany and Italy, there are a lot of NEETs, welfare is orientated toward the elderly, and there is little household debt or consumer credit.</p>
</li>
<li>
<p>In Anglo-liberal countries such as the UK, US and Canada, consumer credit is high, and so is overall debt (though not as high as in the Nordic countries). The share of NEETs is remarkably high, and most welfare is oriented toward the elderly.</p>
</li>
</ol>
<p>Household financialisation, then, follows different paths and patterns. Both liberal and conservative welfare is gerontocratic, and they have a high level of NEETs, but while the former is oriented toward a market solution to inequality (more debt), the latter discourages any form of risk taking.</p>
<p>So, while paying attention to debt is important, it shouldn’t be the only lesson of the 2008 crisis. Further attention should be paid to the macro-sociological conditions that give debt different meanings: inclusive welfare can make debt into an investment, but gerontocratic welfare can make debt a burden.</p>
</span></p><p>This article presents the views of the author(s) and not necessarily those of the ECPR or the Editors of <i>The Loop</i>.</p><div id="div_block-246-61"><p><img id="image-247-61" alt="" src="https://theloop.ecpr.eu/wp-content/uploads/2020/09/ECPR-tag-icon.svg" loading="lazy"></p></div></div></div></div></section></div>]]>
            </description>
            <link>https://theloop.ecpr.eu/why-northern-europe-is-so-indebted/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26325765</guid>
            <pubDate>Wed, 03 Mar 2021 07:45:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Bitcoin Is Time]]>
            </title>
            <description>
<![CDATA[
Score 397 | Comments 1015 (<a href="https://news.ycombinator.com/item?id=26315923">thread link</a>) | @taylorwc
<br/>
March 2, 2021 | https://dergigi.com/2021/01/14/bitcoin-is-time/ | <a href="https://web.archive.org/web/*/https://dergigi.com/2021/01/14/bitcoin-is-time/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div id="markdown" itemprop="articleBody"> <blockquote><p>One luminary clock against the sky <br> Proclaimed the time was neither wrong nor right.</p><p><cite>Robert Frost, <em>Acquainted with the Night</em> (1928)</cite></p></blockquote><blockquote><p>Time is still the great mystery to us. It is no more than a&nbsp;concept; we don’t know if it even exists…</p><p><cite>Clifford D. Simak, <em>Shake­speare’s Planet</em> (1976)</cite></p></blockquote><p>Time is money, or so the saying goes. It follows that money is also time: a&nbsp;repre­sen­ta­tion of the collec­tive economic energy stored by humanity. However, the link between time and money is more intri­cate than it might seem at first. If money requires no time to create, it doesn’t work as money very well, or not for long. More profoundly, as we shall see, keeping track of things in the infor­ma­tional realm always implies keeping track of time.</p><p>As soon as money goes digital, we have to agree on a&nbsp;<em>defin­i­tion of time</em>, and herein lies the whole problem. You might think telling the time is as easy as glancing at whatever clock is nearby, and you would be right when it comes to everyday tasks. But when it comes to synchro­nizing the state of a&nbsp;global, adver­sarial, distrib­uted network, telling the time becomes an almost intractable problem. How do you tell the time if clocks can’t be trusted? How do you create the concept of a&nbsp;singular time if your system spans the galaxy? How do you measure time in a&nbsp;timeless realm? And what is time anyway?&nbsp;</p><p>To answer these questions, we will have to take a&nbsp;closer look at the concept of time itself and how Bitcoin makes up its own time: block time — more commonly known as <em>block height</em>. We will explore why the problem of timekeeping is intimately related to keeping records, why there is no absolute time in a&nbsp;decen­tral­ized system, and how Bitcoin uses causality and unpre­dictability to build its own sense of now.&nbsp;</p><p>Timekeeping devices have trans­formed civiliza­tions more than once. As Lewis Mumford pointed out in 1934: “The clock, not the steam-engine, is the key-machine of the modern indus­trial age.” Today, it is again a&nbsp;timekeeping device that is trans­forming our civiliza­tion: a&nbsp;clock, not computers, is the true key-machine of the modern infor­ma­tional age. And this clock is Bitcoin.</p><h2 id="keeping-track-of-things">Keeping Track of Things</h2><blockquote><p>Let the child learn to count things, thus getting the notion of number. These things are, for the purpose of counting, consid­ered alike, and they may be single objects or groups.</p><p><cite>David Eugene Smith, <em>The Teaching of Elemen­tary Mathe­matics</em> (1900)</cite></p></blockquote><p>Very broadly speaking, there are two ways to keep track of things: physical tokens and ledgers. You can either use real-world artifacts directly, e.g., give someone a&nbsp;sea shell, a&nbsp;coin, or some other tangible <em>thing</em>, or you can repli­cate the state of the world by writing down what happened on a&nbsp;piece of paper.&nbsp;</p><p>Imagine you are a&nbsp;shepherd and want to make sure that your whole flock returned home. You can put a&nbsp;collar on each sheep, and as soon as a&nbsp;sheep returns home, you simply remove the collar and hang it up in your shed. If you have one hanger for every collar, you will know that every sheep returned safely as soon as all hangers are filled. Of course, you can also count them and keep a&nbsp;list. However, you will have to make sure to create a&nbsp;new list every time you start counting, and you will also have to make sure not to count a&nbsp;single sheep twice (or not at all).</p><p>Money is essen­tially a&nbsp;tool to keep track of who owes what to whom. Broadly speaking, every­thing we have used as money up to now falls into two categories: <em>physical</em> artifacts and <em>infor­ma­tional</em> lists. Or, to use more common parlance: tokens and ledgers.</p><figure> <img src="https://dergigi.com/assets/images/bitcoin/2021-01-14-bitcoin-is-time/ledger-token.jpg"></figure><p>It is impor­tant to realize the inherent differ­ence of these categories, so let me point it out explic­itly: The first method — a&nbsp;physical token — <em>directly</em> repre­sents the state of things. The second one — a&nbsp;ledger — <em>indirectly</em> reflects the state of things. Each comes with advan­tages and disad­van­tages. For example, tokens are physical and distrib­uted; ledgers are infor­ma­tional and central­ized. Tokens are inher­ently trust­less; ledgers are not.</p><p>In the digital realm — no matter how intensely marketing gurus try to convince you of the opposite — we can only use ledgers. It is an <em>infor­ma­tional</em> realm, not a&nbsp;physical one. Even if you call a&nbsp;certain kind of infor­ma­tion a “token,” it is still a&nbsp;malleable piece of infor­ma­tion, written down on a&nbsp;hard drive or some other medium that can hold infor­ma­tion, effec­tively rendering it an infor­ma­tional record.</p><p>The ledger-like nature of all digital infor­ma­tion is the root cause of the double-spend problem. Infor­ma­tion never repre­sents the state of the world <em>directly</em>. Further, the movement of infor­ma­tion implies copying. Infor­ma­tion exists in one place, and to “move” it, you have to copy it to another place and erase it at its origin. This problem doesn’t exist in the physical realm. In the physical realm, we can actually move things from A&nbsp;to B. The infor­ma­tional realm doesn’t have this property. If you want to “move” infor­ma­tion from list A&nbsp;to list B, you have to copy it from A&nbsp;to B. There is no other way.</p><p>Another way to think about it is in terms of unique­ness. Physical tokens are unique compos­ites of atoms whose assembly is not easily replic­able. Pure infor­ma­tion does not have this property. If you can read the infor­ma­tion, you can also copy it perfectly. Practi­cally speaking, it follows that physical tokens are unique, and digital tokens are not. I&nbsp;would even argue that “digital token” is a&nbsp;misnomer. A&nbsp;token might repre­sent secret infor­ma­tion, but it will never repre­sent unique, singular, uncopy­able infor­ma­tion.</p><p>This differ­ence in proper­ties shows that there really is no way to “hand over” infor­ma­tion. It is impos­sible to pass on a&nbsp;digital token like you would pass on a&nbsp;physical one since you can never be sure if the original owner destroyed the infor­ma­tion on his end. Digital tokens, like all infor­ma­tion, can only be spread, like an idea.</p><blockquote><p>… if you have an apple and I&nbsp;have an apple, and we swap apples — we each end up with only one apple. But if you and I&nbsp;have an idea and we swap ideas — we each end up with two ideas.</p><p><cite>Charles F. Brannan (1949)</cite></p></blockquote><p>Physical tokens — what we call physical bearer assets, or “cash” — are free from this dilemma. In the real world, if you hand me a&nbsp;coin, your coin is gone. There is no magical dupli­ca­tion of the coin, and the only way to give it to me is to physi­cally hand it over. The laws of physics do not allow you to double-spend it.</p><p>While double-spending does exist in the non-digital realm — George Parker, a&nbsp;con artist who famously “double-spent” the Brooklyn Bridge and other landmarks comes to mind — it requires elabo­rate decep­tion and gullible buyers. Not so in the digital realm.&nbsp;</p><p>In the digital realm, because we are always dealing with <em>infor­ma­tion,</em> double-spending is an <em>inherent</em> problem. As everyone who ever copied a&nbsp;file or used copy-and-paste knows, infor­ma­tion is something that you can copy <em>perfectly</em>, and it is not bound to the medium that hosts it. If you have a&nbsp;digital photo­graph, for example, you can copy it a&nbsp;million times, store some copies on a&nbsp;USB stick, and send it to thousands of different people. Perfect copies are possible because infor­ma­tion allows for flawless error correc­tion, which elimi­nates degra­da­tion. And to top things off, there is virtu­ally no cost to dupli­ca­tion and no way to tell what the original was.</p><p>Again: when it comes to infor­ma­tion, copying is all there is. There simply is no way to <em>move</em> digital infor­ma­tion from A&nbsp;to B. Infor­ma­tion is always <em>copied</em> from A&nbsp;to B, and if the copying process was successful, the original copy of A&nbsp;is deleted. This is why the double-spending problem is so tricky. Absent of a&nbsp;central authority, there is no way to move <em>anything</em> from A&nbsp;to B&nbsp;in a&nbsp;trust­less manner. You always have to trust that the original will be deleted. A&nbsp;natural side-effect is that, when it comes to digital infor­ma­tion, it is <em>impos­sible</em> to tell how many copies are in existence and where these copies might be.</p><p>Because of this, using digital “tokens” as money can not and will never work. Since tokens derive their relia­bility from being hard to repro­duce as a&nbsp;result of their unique physical construc­tion, this advan­tage disap­pears in the digital realm. In the digital realm, tokens cannot be trusted. As a&nbsp;result of the nature of infor­ma­tion’s intrinsic proper­ties, the only viable format for digital money is not a&nbsp;token but a&nbsp;ledger — which brings us to the problem of time.</p><h2 id="tokens-are-timeless-ledgers-are-not">Tokens Are Timeless, Ledgers Are Not</h2><blockquote><p>For the things seen are tempo­rary, but the things unseen are everlasting.</p><p><cite>Paul of Tarsus, <em>Corinthians</em> 4:18b</cite></p></blockquote><p>When it comes to physical tokens, the time of a&nbsp;trans­ac­tion does not matter. You either have the coins in your pocket, or you don’t; you can either spend them, or you can’t. The simple act of posses­sion is the only prereq­ui­site for spending. The laws of nature take care of the rest. In that sense, physical tokens are trust­less and timeless.</p><p>When it comes to ledgers, physical posses­sion falls to the wayside. Whoever is in control of the ledger needs to make sure that things are <em>in order</em>. What is other­wise given by physical laws, namely that you can’t spend money that you don’t have and you can’t spend money that you have already spent previ­ously, has to be enforced by man-made rules. It is these rules that govern the orderly opera­tion and mainte­nance of a&nbsp;ledger, not physical laws.&nbsp;</p><p>Moving from physical laws to man-made rules is the crux of the matter. Man-made rules can be bent and broken, physical laws not so much. For example, you can’t simply “make up” a&nbsp;physical gold coin. You have to dig it out of the ground. You can, however, absolutely make up a&nbsp;gold coin on paper. To do this, you simply add an entry to the ledger and give yourself a&nbsp;couple of coins. Or, in the case of central banks, simply add a&nbsp;couple trillion with a&nbsp;few computer keystrokes. (Fancy finan­cial people call this “Rehypoth­e­ca­tion,” “Fractional Reserve Banking,” or …</p></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://dergigi.com/2021/01/14/bitcoin-is-time/">https://dergigi.com/2021/01/14/bitcoin-is-time/</a></em></p>]]>
            </description>
            <link>https://dergigi.com/2021/01/14/bitcoin-is-time/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26315923</guid>
            <pubDate>Tue, 02 Mar 2021 14:55:02 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Using Ghidra to Reverse Engineer Super Monkey Ball for GameCube]]>
            </title>
            <description>
<![CDATA[
Score 285 | Comments 59 (<a href="https://news.ycombinator.com/item?id=26315368">thread link</a>) | @coldpie
<br/>
March 2, 2021 | https://www.smokingonabike.com/2021/02/28/hacking-super-monkey-ball-part-2-decompilation-with-ghidra/ | <a href="https://web.archive.org/web/*/https://www.smokingonabike.com/2021/02/28/hacking-super-monkey-ball-part-2-decompilation-with-ghidra/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
				
<p>In Part 1, <a href="https://www.smokingonabike.com/2021/01/17/hacking-super-monkey-ball-part-1-banana-bunch-values/" data-type="post" data-id="645">we used Dolphin’s debugger to find the location of Player 1’s score in RAM</a>. In this article, our goal is to hack the score calculation routine so that the bonus goals do not award so many points.</p>



<p>Levels in Super Monkey Ball can have up to three separate exits: the normal Blue exit, a Green exit, and a Red exit. If you manage to get to a Green or Red exit, the game will let you skip a number of upcoming levels (e.g. skip the next 3 levels). In addition, it multiplies the score for completing the level by the number of levels skipped (e.g. you gain 3 times as many points as you would have with the normal exit). This is a totally bonkers amount of points, especially for levels which you can complete in only a few seconds and so also get the time bonus multiplier. In the below screenshot, the normal Blue exit would have awarded 3,386 points. Instead the game awards <em>130,158</em> points because I completed the level with the Red exit! There is some fun in a risk/reward calculation, but not when it’s this lopsided!</p>



<figure><a href="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_7.png"><img loading="lazy" width="390" height="188" src="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_7.png" alt="" srcset="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_7.png 390w, https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_7-300x145.png 300w" sizes="(max-width: 390px) 100vw, 390px"></a></figure>



<p>It really incentivizes you to skip levels, which means you play less of the game, which… sucks. If we eliminate the level skip bonus entirely, then it becomes a more interesting trade-off. You can either skip a few levels and so be less likely to lose lives but lose out on score, or you can choose to risk completing those levels and gain all the points from those levels you would have skipped. It’s a much more interesting mechanic than always choosing the Red exit to get that massive score dump.</p>



<p>So let’s start by finding the code that alters your score upon level completion. As in part 1, we set a memory watch breakpoint on Player 1’s score, then complete the level. As the score tally displays, Dolphin breaks and we have our score routine.</p>



<figure><a href="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_1.png"><img loading="lazy" width="1024" height="635" src="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_1-1024x635.png" alt="" srcset="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_1-1024x635.png 1024w, https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_1-300x186.png 300w, https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_1-768x477.png 768w, https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_1.png 1244w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>There’s a couple interesting things to notice in this screenshot. First, you can see the current instruction is storing the updated score into our player’s struct, which is what we expected/hoped to find. Just before that is where it adds the new points into the existing score. You can see in <code>r4</code> and <code>r5</code> are the new score value to be added and the player’s current score, respectively. So this really looks like the routine we wanted to find. Finally, notice the <code>LR</code> value, which is where we jumped from to get into this routine. Let’s head to that code and see what called this routine. More specifically, we want to know where the beginning of this routine is, since we’ve paused execution somewhere in the middle of it.</p>



<figure><a href="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_3.png"><img loading="lazy" width="512" height="102" src="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_3.png" alt="" srcset="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_3.png 512w, https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_3-300x60.png 300w" sizes="(max-width: 512px) 100vw, 512px"></a></figure>



<p>That tells us where the score calculation routine actually begins. Let’s go see what happens there at the start of this function.</p>



<figure><a href="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_2.png"><img loading="lazy" width="500" height="469" src="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_2.png" alt="" srcset="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_2.png 500w, https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_2-300x281.png 300w" sizes="(max-width: 500px) 100vw, 500px"></a></figure>



<p>Well that… sure is some PowerPC code. I can read assembly if I have to, but that looks like a real chore to try to understand. Notice the start of the routine is something like 500 bytes away from where the actual store happens. I don’t want to try to understand that much assembly.</p>



<p>Well luckily, just a few years ago the NSA (yes, that NSA) made their internal software reverse-engineering (SRE) tool <a rel="noreferrer noopener" href="https://ghidra-sre.org/" target="_blank">Ghidra</a> public. Among many other things, it is capable of disassembling binaries into C source. I figured it probably was capable of handling PPC binaries (it is), but I wondered if anyone had specifically tried it with a GameCube binary. Turns out somebody had: I found <a rel="noreferrer noopener" href="https://hmapl.wordpress.com/2019/04/13/ghidra-a-potentially-useful-reverse-engineering-tool/" target="_blank">a blog post</a> about using a Ghidra plugin for the GameCube’s PPC variant to decompile Harvest Moon. I also found <a rel="noreferrer noopener" href="https://github.com/Cuyler36/Ghidra-GameCube-Loader" target="_blank">a Ghidra plugin specifically for loading GameCube binaries</a> dumped from ISOs. It’s pretty painless to install. Once that’s done, you can use Dolphin to dump the game’s executable to disk, to load into Ghidra. Extract the game’s system data using Dolphin, and it will dump some binaries into a directory.</p>



<figure><a href="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_4.png"><img loading="lazy" width="823" height="751" src="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_4.png" alt="" srcset="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_4.png 823w, https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_4-300x274.png 300w, https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_4-768x701.png 768w" sizes="(max-width: 823px) 100vw, 823px"></a></figure>



<p>The one we’re interested in is main.dol, which is the game’s main executable. Loading that into Ghidra will prompt you to analyze the binary. On my machine, that only took about a minute to complete. Now I was ready to see if Ghidra could turn that PPC code into readable C code. So I jumped to the start of the score routine and…</p>



<figure><a href="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_6.png"><img loading="lazy" width="1024" height="563" src="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_6-1024x563.png" alt="" srcset="https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_6-1024x563.png 1024w, https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_6-300x165.png 300w, https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_6-768x422.png 768w, https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_6-1536x845.png 1536w, https://www.smokingonabike.com/wp-content/uploads/2021/02/smb_blog2_6.png 1598w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>It worked! Without any symbol names, the code is hard to read, but it’s legible enough. This was so exciting to see!! I’ve been wanting to hack this score code for at least a decade. And look at those if-statements! They’re comparing something against ‘<code>G</code>‘ and ‘<code>R</code>‘. Green and Red exits, perhaps? I couldn’t wait to figure out what this code was doing.</p>



<p>I’ve inserted the code in text format here, with some interesting lines highlighted for discussion below.</p>



<pre><code>
void FUN_8004c7d4(int param_1,int param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  undefined1 *puVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  char *pcVar11;
  
  iVar2 = DAT_802f1f18;
  iVar8 = DAT_801eec4c;
  if ((param_1 &lt; 4) &amp;&amp; (1 &lt; param_1)) {
    iVar6 = (int)DAT_801f3a7a;
    iVar9 = *(int *)(*(int *)(DAT_802f1f30 + 0xc) + 0x40);
<strong><span>    iVar3 = (DAT_801f3a74 * 100) / 0x3c + (DAT_801f3a74 * 100 &gt;&gt; 0x1f); //[3]
    iVar3 = iVar3 - (iVar3 &gt;&gt; 0x1f); //[3]</span></strong>
    uVar5 = 0;
    iVar10 = iVar9;
    if (((DAT_801f3a64._0_2_ != 0) &amp;&amp; (iVar10 = iVar9 + 0x14, DAT_801f3a64._0_2_ != 1)) &amp;&amp;
       (iVar10 = iVar9 + 0x28, DAT_801f3a64._0_2_ != 2)) {
      iVar10 = iVar9 + 0x3c;
    }
    if (*(char *)(iVar10 + 0x12) == 'G') {
<strong><span>      uVar5 = 4; //[4]</span></strong>
      iVar3 = iVar3 + 10000;
    }
    else {
      if (*(char *)(iVar10 + 0x12) == 'R') {
<strong><span>        uVar5 = 8; //[4]</span></strong>
        iVar3 = iVar3 + 20000;
      }
    }
    if (iVar6 != 1) {
<strong><span>      uVar5 = uVar5 | 2; //[4]</span></strong>
    }
    if (DAT_801f3a5e &gt;&gt; 1 &lt; DAT_801f3a5c) {
<strong><span>      uVar5 = uVar5 | 1; //[4]</span></strong>
      iVar6 = iVar6 &lt;&lt; 1;
    }
<strong><span>    uVar4 = iVar3 * iVar6; //[2]</span></strong>
    if (param_1 == 3) {
      FUN_8007f368(iVar3,uVar4,uVar5);
    }
    else {
      if (DAT_801eec48 == 1) {
        puVar7 = &amp;DAT_80205e60;
        iVar8 = 0;
        pcVar11 = DAT_80205994;
        while (iVar8 &lt; DAT_80205990) {
          if (*pcVar11 != '\0') {
            cVar1 = puVar7[0x2f];
            if (cVar1 == '\x02') {
              *(uint *)(puVar7 + 0x7c) =
                   *(int *)(puVar7 + 0x7c) +
                   ((int)uVar4 &gt;&gt; 1) + (uint)((int)uVar4 &lt; 0 &amp;&amp; (uVar4 &amp; 1) != 0);
            }
            else {
              if (cVar1 &lt; '\x02') {
                if ('\0' &lt; cVar1) {
                  *(uint *)(puVar7 + 0x7c) = *(int *)(puVar7 + 0x7c) + uVar4;
                }
              }
              else {
                if (cVar1 &lt; '\x04') {
                  *(int *)(puVar7 + 0x7c) = *(int *)(puVar7 + 0x7c) + (int)uVar4 / 3;
                }
              }
            }
            if (999999999 &lt; *(int *)(puVar7 + 0x7c)) {
              *(undefined4 *)(puVar7 + 0x7c) = 999999999;
            }
          }
          iVar8 = iVar8 + 1;
          puVar7 = puVar7 + 0x1a4;
          pcVar11 = pcVar11 + 1;
        }
      }
      else {
        if (DAT_801eec48 &lt; 1) {
          if (-1 &lt; DAT_801eec48) {
<strong><span>            (&amp;DAT_80205edc)[DAT_801eec4c * 0x69] = (&amp;DAT_80205edc)[DAT_801eec4c * 0x69] + uVar4; //[1]</span></strong>
            if ((int)(&amp;DAT_80205edc)[iVar8 * 0x69] &lt; 1000000000) {
              return;
            }
            (&amp;DAT_80205edc)[iVar8 * 0x69] = 999999999;
            return;
          }
        }
        else {
          if (DAT_801eec48 &lt; 3) {
            *(uint *)(DAT_802f1f18 + 0x7c) = *(int *)(DAT_802f1f18 + 0x7c) + uVar4;
            if (999999999 &lt; *(int *)(iVar2 + 0x7c)) {
              *(undefined4 *)(iVar2 + 0x7c) = 999999999;
            }
            if (*(int *)(iVar2 + 0x7c) &lt;= DAT_802f1cac) {
              return;
            }
            if (0 &lt; DAT_802f1cac) {
              DAT_802f1ca8 = 1;
            }
            DAT_802f1cac = *(undefined4 *)(iVar2 + 0x7c);
            return;
          }
        }
        *(uint *)(DAT_802f1f18 + 0x7c) = *(int *)(DAT_802f1f18 + 0x7c) + uVar4;
        if (999999999 &lt; *(int *)(iVar2 + 0x7c)) {
          *(undefined4 *)(iVar2 + 0x7c) = 999999999;
        }
      }
    }
  }
  else {
    *(int *)(DAT_802f1f18 + 0x7c) = *(int *)(DAT_802f1f18 + 0x7c) + param_2;
    if (999999999 &lt; *(int *)(iVar2 + 0x7c)) {
      *(undefined4 *)(iVar2 + 0x7c) = 999999999;
    }
  }
  return;
}
</code></pre>



<p>Even just looking at the raw code, you can see some interesting stuff. At [1] is our current PC, that <code>stw</code> instruction which we broke on back at the start of the article. You can see it’s adding the value of <code>uVar4</code> into the player’s score location. Scrolling up to [2], you see where <code>uVar4</code> is calculated, as the product of <code>iVar3</code> and <code>iVar6</code>. I bet one of those is the base score, and the other is the bonus multiplier. Going further up to [3], you’ll see <code>iVar3</code> does indeed seem to be derived from some global value. I bet that global is the current time, and these calculations are converting the internal time representation into points and maybe doing some rounding on the result. Looking around for more interesting stuff, the lines marked with [4] look a lot like bit flags. From the code flow, I bet that’s used for deciding which parts of the score calculation to display on screen when tallying the score.</p>



<p>So with some of those guesses, I used Ghidra to rename some of the local variables to be more descriptive. Here’s what I ended up with for everything that goes into calculating <code>uVar4</code> (I trimmed all the later stuff).</p>



<pre><code>  iVar2 = DAT_802f1f18;
  iVar4 = DAT_801eec4c;
  if ((param_1 &lt; 4) &amp;&amp; (1 &lt; param_1)) {
<strong><span>    score_multiplier = (int)DAT_801f3a7a; //[4]</span></strong>
    iVar5 = *(int *)(*(int *)(DAT_802f1f30 + 0xc) + 0x40);
    time_score = (DAT_801f3a74 * 100) / 0x3c + (DAT_801f3a74 * 100 &gt;&gt; 0x1f);
    time_score = time_score - (time_score &gt;&gt; 0x1f);
    out_flags = 0;
    exit_data = iVar5;
    if (((DAT_801f3a64._0_2_ != 0) &amp;&amp; (exit_data = iVar5 + 0x14, DAT_801f3a64._0_2_ != 1)) &amp;&amp;
       (exit_data = iVar5 + 0x28, DAT_801f3a64._0_2_ != 2)) {
      exit_data = iVar5 + 0x3c;
    }
    if (*(char *)(exit_data + 0x12) == 'G') {
      out_flags = 4;
<strong><span> …</span></strong></code></pre></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.smokingonabike.com/2021/02/28/hacking-super-monkey-ball-part-2-decompilation-with-ghidra/">https://www.smokingonabike.com/2021/02/28/hacking-super-monkey-ball-part-2-decompilation-with-ghidra/</a></em></p>]]>
            </description>
            <link>https://www.smokingonabike.com/2021/02/28/hacking-super-monkey-ball-part-2-decompilation-with-ghidra/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26315368</guid>
            <pubDate>Tue, 02 Mar 2021 14:01:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Mindsets to Avoid as a Senior Software Developer]]>
            </title>
            <description>
<![CDATA[
Score 88 | Comments 87 (<a href="https://news.ycombinator.com/item?id=26315116">thread link</a>) | @sidcool
<br/>
March 2, 2021 | https://betterprogramming.pub/the-3-mindsets-to-avoid-as-a-senior-software-developer-efc8fa17fc3 | <a href="https://web.archive.org/web/*/https://betterprogramming.pub/the-3-mindsets-to-avoid-as-a-senior-software-developer-efc8fa17fc3">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><section><div><div><div><h2 id="cbb5">The more we’ve learned, the more we’ve realized there’s so much more to learn</h2><div><div><div><p><a href="https://elye-project.medium.com/?source=post_page-----efc8fa17fc3--------------------------------" rel="noopener"><img alt="Elye" src="https://miro.medium.com/fit/c/96/96/1*0wVPGGR_3FMoPVGzT4nbTw.png" width="48" height="48"></a></p></div></div></div></div><figure><div role="button" tabindex="0"><div><div><p><img alt="A young man looking out of an apartment window." src="https://miro.medium.com/max/12000/0*wbhJehvIn63MyQzE" width="6000" height="3916" srcset="https://miro.medium.com/max/552/0*wbhJehvIn63MyQzE 276w, https://miro.medium.com/max/1104/0*wbhJehvIn63MyQzE 552w, https://miro.medium.com/max/1280/0*wbhJehvIn63MyQzE 640w, https://miro.medium.com/max/1400/0*wbhJehvIn63MyQzE 700w" sizes="700px" data-old-src="https://miro.medium.com/max/60/0*wbhJehvIn63MyQzE?q=20"></p></div></div></div><figcaption>Photo by <a href="https://unsplash.com/@trebron?utm_source=medium&amp;utm_medium=referral" rel="noopener">Norbert Kundrak</a> on <a href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener">Unsplash</a></figcaption></figure><p id="717d">As developers, the longer we’re on the job, the more experience we gain. Eventually, we may even become the go-to person on our team or in our organization, seen as the technical guru of our field.</p><p id="bd7c">At this level, we get a self-esteem boost, which is positive. But at times we may fall into the trap of getting an unnecessary ego. The wrong mindset creeps in, which can lead to the beginning of our downfall.</p><p id="8035">I’ve been through that journey. So I now consciously remind myself not to fall into one of those mindsets again. We’ll talk about three of them.</p></div></div></section><section><div><div><p id="fdb9">I once saw a tweet from a person who claimed his father (a programmer) offered to teach him how to code, and he rejected it. The author of the tweet is now a developer, describing himself as a self-taught programmer.</p><p id="e3c4">Programming isn’t a skill one can master completely by simply taking a course or getting a degree. A lot of sweat and time spent digging and learning is needed to build one’s competency.</p><p id="a45d">It’s not a field that can be effectively explored and fully discovered alone. We might not have a personal mentor and we may not have taken any formal courses, but that doesn’t change the fact that we still learn by reading from somewhere — whether that be a book, tutorial, blog, manual, or even Stack Overflow. All these things were written by someone.</p><p id="6607">In fact, the best way to learn programming is by working with a group of developers — through code reviews, pairings, constant discussion, and the exchange of ideas and the information learned. Attending conferences, guilds, dojos, etc. helps too.</p><p id="739c">Therefore, much of what we’ve learned and where we are today isn’t a result of our self-meditation on a mountain. Instead, it’s an accumulated assimilation of the knowledge and experience others have shared with us, either directly or indirectly.</p><p id="cc5a">We should always be grateful.</p></div></div></section><section><div><div><p id="0edf">Someone responded to one of my past blogs saying, “The young ones can’t concentrate. And their productivity is vastly lower than that of us oldsters. Their code quality is way lower.” I felt disgusted by this blanket statement targeting young programmers, even if I’m not the young one.</p><p id="c651">We learn, we grow, we age. With the advantage of time, we sometimes gain an upper hand in terms of both knowledge and experience in some area.</p><p id="10db">However, software development is an ever-changing field. One needs to continue learning to keep abreast of a skill. Over time, some of the past knowledge we acquired and spent time on is no longer relevant. When you consider what’s still relevant, the knowledge gap between older and younger programmers becomes smaller.</p><p id="15b7">At times, some area of knowledge younger programmers have might surpass us, the older folks (I consider myself an <em>older folk</em>, having worked for more than two decades). In software development, there’s been so much new knowledge to harvest in the last 10 years, and it’s not possible for us to extract it all.</p><p id="0b17">Never look down on the young ones. Respect each other, and always shamelessly ask and listen to their opinion. Be open. Avoid impostor syndrome. We might be surprised to learn a lot from those younger than us.</p><p id="28f9">The young ones are the future. They’ll shape the world one day. Teach them as much as you can, and also learn from them as much as you can. We’re not always right.</p></div></div></section><section><div><div><p id="e916">“What more is there to learn within programming? Everything new is just an old thing with a different look — or it’s just <code>if</code>-<code>else</code> or <code>for</code> loops covered by fancier names and structures externally.” I thought this back then after I’ve mastered C++ and object-oriented programming.</p><p id="0a2f">I despised Java as an inferior language to C++ and looked down on all scripts — VBScript, JavaScript, and let’s not forget HTML, which isn’t even a language to me. Python, what is it? No <code>{}</code> and, it’s optional to use <code>;</code>? Using indentation is a must??</p><p id="f535">The word<em> evolve </em>meant nothing to me, and after a decade, Python became the most used language.</p><p id="1213">I still have the utmost respect for those with competency in C programming, having the ability to work with pointers, having proper memory management, and writing code that compiles into the smallest and most efficient executable.</p><p id="e21a">However, that’s no longer what mainstream software development looks like. Web programming took the world by storm in the ‘90s and early 2000s. Since the launch of the iPhone, mobile development has become a significant player in software development. And now artificial intelligence could be the next wave, which the Python language plays a significant role in enabling.</p><p id="11c4">Fast forward to today: Now I’m getting my feet wet in mobile development, a rapidly changing field. I just realized how wrong I was back then in despising the newer yet seemingly inferior product (i.e., Java) over what I’d mastered (i.e., C++). Java has influenced many of the programming languages we have today, and its JVM is the backbone of many new languages (e.g., Scala and Kotlin).</p><p id="97ef">Never despise newer tech at a glance. It’s true most of them spawn from an existing tech and may look similar (or at times even inferior), but all of these small little changes could contribute to the next leap of change.</p></div></div></section><section><div><div><p id="7126">In the early years of my career, I worked hard and was promoted fast. My boss jokingly gave me a little advice, “Don’t get cocky.” I guess that about sums it all up.</p></div></div></section></div></div>]]>
            </description>
            <link>https://betterprogramming.pub/the-3-mindsets-to-avoid-as-a-senior-software-developer-efc8fa17fc3</link>
            <guid isPermaLink="false">hacker-news-small-sites-26315116</guid>
            <pubDate>Tue, 02 Mar 2021 13:36:03 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Xforms Toolkit]]>
            </title>
            <description>
<![CDATA[
Score 61 | Comments 15 (<a href="https://news.ycombinator.com/item?id=26314851">thread link</a>) | @marcodiego
<br/>
March 2, 2021 | http://xforms-toolkit.org/screenshots/ | <a href="https://web.archive.org/web/*/http://xforms-toolkit.org/screenshots/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
	

    <p>
	  Here are some screenshots and photos of applications written using
	  the XForms toolkit.
	</p>

    <hr>

	<p>
	  The first two are from two applications developed for
	  the <a href="http://www.virgo.infn.it/"><i>Virgo</i> experiment</a>,
	  an interferometric detector for gravitational waves.
	</p>

	<p>
	  <img src="http://xforms-toolkit.org/screenshots/virgo1.png" alt="Screenshot from Virgo experiment">
	</p>

	<p>
	  Author: <a href="http://lapp.in2p3.fr/~verkind">D. Verkindt</a>,
	  Virgo experiment, LAPP, CNRS-Universite de Savoie
	</p>

	<p>
	  <img src="http://xforms-toolkit.org/screenshots/virgo2.png" alt="Screenshot from Virgo experiment">
	</p>

	<p>
	  Author: L. Fournier, Virgo experiment, LAPP, CNRS-Universite de Savoie
	</p>

	<hr>

	<p>
      This screenshot shows a VLF signal analyser - a spectrogram
      and oscilloscope - displaying the sidebands of the 50Hz
      mains supply (click to enlarge):
    </p>

	<p>
	  <a href="http://xforms-toolkit.org/screenshots/vlf_analyser.gif"><img src="http://xforms-toolkit.org/screenshots/vlf_analyser.gif" width="700px" alt="Screenshot from VLF signal analyser program"></a>
	</p>

	<p>
	  Author: P. Nicholson,
	  <a href="http://abelian.org/">abelian.org</a>
	</p>

	<hr>

	<p>
      These photos/screenshot are from a Point of Sales package for
	  restaurants and retail industries (click to enlarge). For more
	  information see the <a href="http://www.dineamix.ca/">DineAmix Inc.
	  homepage</a>. Further screenshots and photos can be found at
	  <a href="http://www.dineamix.ca/xforms/">www.dineamix.ca/xforms/</a>
	</p>

	<p>
	  <a href="http://xforms-toolkit.org/screenshots/dineamix1.jpg"><img src="http://xforms-toolkit.org/screenshots/dineamix1.jpg" width="700px" alt="Photo of POS on touch screen "></a>
	</p>

	<p>
	  <a href="http://xforms-toolkit.org/screenshots/dineamix2.jpg"><img src="http://xforms-toolkit.org/screenshots/dineamix2.jpg" width="700px" alt="Creating a restaurant menu"></a>
	</p>

	<p>
	  Author: S. Bromow,
	  <a href="http://www.dineamix.ca/">www.dineamix.ca</a>
	</p>

	<hr>

    <p>
      The next two screenshots are from the visualization systems of a tile
	  plant in Turkey. The production process is controlled
	  by Simatic S5 and S7 PLCs, linked to two Linux based visualization 
	  systems (click to enlarge):
	</p>

	<p>
	  <a href="http://xforms-toolkit.org/screenshots/tile_plant1.png"><img src="http://xforms-toolkit.org/screenshots/tile_plant1.png" width="700px" alt="Screenshot from program for controlling tile plant"></a>
	  <a href="http://xforms-toolkit.org/screenshots/tile_plant2.png"><img src="http://xforms-toolkit.org/screenshots/tile_plant2.png" width="700px" alt="Screenshot from program for controlling tile plant"></a>
	</p>

	<p>
	  Author: W. Heisch,
	  <a href="http://www.heisch-automation.de/">Heisch Automation</a>
	</p>

	<hr>

    <p>
      This screenshots is from a program for handling stock exchange data
	  (click to enlarge):
	</p>

	<p>
	  <a href="http://xforms-toolkit.org/screenshots/stock_exchange.png"><img src="http://xforms-toolkit.org/screenshots/stock_exchange.png" width="700px" alt="Screenshot from program for stock excange data"></a>
	</p>

	<p>
	  Author: W. Heisch,
	  <a href="http://www.heisch-automation.de/">Heisch Automation</a>
	</p>


	<hr>

	<p>
	  Screenshot from a program used in the design of large tents
	  by <a href="http://www.chapitech.fr/">atelier Chapi-tech</a>.
	</p>

	<p>
	  <a href="http://xforms-toolkit.org/screenshots/chapitech.png"><img src="http://xforms-toolkit.org/screenshots/chapitech.png" width="700px" alt="Screenshot from chapitech.com"></a>
	</p>

	<p>
	  Mesh, by Robert Hawkin, for
	  <a href="http://www.chapitech.fr/">www.chapitech.fr</a>
	</p>

	<hr>

	<p>
	  These screenshots are from a Formant
	  synthesizer, <a href="http://z-universe.dyndns.org/software/sculpt_o_sound/software01.php">formant-o-matic</a>,
	  and a
	  Vocoder, <a href="http://z-universe.dyndns.org/software/sculpt_o_sound/software02.php">vocode-o-matic</a>
	  (click to enlarge).
	</p>

	<p>
	  <a href="http://xforms-toolkit.org/screenshots/formant.gif"><img src="http://xforms-toolkit.org/screenshots/formant.gif" width="700px" alt="Formant synthesizer"></a>
	</p>

	<p>
	  <a href="http://xforms-toolkit.org/screenshots/vocode.gif"><img src="http://xforms-toolkit.org/screenshots/vocode.gif" width="700px" alt="Vocoder"></a>
	</p>

	<p>
	  Author: Zaphod B aka Jos Bouten
	</p>

	<hr>

	<p>
	  The following two are from a program, <a href="http://fsc2.org/">fsc2</a>,
	  for controlling spectrometers. They show time-resolved and cw EPR
	  (Electron Paramagnetic Resonance) experiments (click to enlarge).
	</p>

	<p>
	  <a href="http://xforms-toolkit.org/screenshots/fsc2_1.png"><img src="http://xforms-toolkit.org/screenshots/fsc2_1.png" width="700px" alt="Screenshot from fsc2"></a>
	  <a href="http://xforms-toolkit.org/screenshots/fsc2_2.png"><img src="http://xforms-toolkit.org/screenshots/fsc2_2.png" width="700px" alt="Screenshot from fsc2"></a>
	</p>

	<p>
	  Author: <a href="http://toerring.de/">J. T. Törring</a>, Berlin
	</p>

	<hr>

    

  

</div>]]>
            </description>
            <link>http://xforms-toolkit.org/screenshots/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26314851</guid>
            <pubDate>Tue, 02 Mar 2021 13:02:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Elegant Bash Conditionals]]>
            </title>
            <description>
<![CDATA[
Score 116 | Comments 85 (<a href="https://news.ycombinator.com/item?id=26314489">thread link</a>) | @timvisee
<br/>
March 2, 2021 | https://timvisee.com/blog/elegant-bash-conditionals/ | <a href="https://web.archive.org/web/*/https://timvisee.com/blog/elegant-bash-conditionals/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
            <p>The if-statement is a very basic thing, not just in bash, but in all of programming.
I see them used quite a lot in shell scripts,
even though in many cases they can be replaced with something much more elegant.</p>
<p>In this rather short article, I'll show how control operators can be used
instead.
Many probably know about this, but don't realize how to use them nicely.
This will help you write cleaner shell scripts in the future.</p>
<p>Here is what a simple if-statements looks like in bash:</p>
<pre><code data-lang="bash"><span>if </span><span>[</span><span> expression </span><span>]
</span><span>then
    </span><span>command
</span><span>fi

</span><span># or
</span><span>if </span><span>[</span><span> expression </span><span>]; then </span><span>command</span><span>; fi
</span></code></pre>
<p>Ughh. Let's improve!</p>
<h2 id="control-operators">Control operators
    <a href="#control-operators" aria-label="Anchor link for: control-operators">
        #
    </a>

</h2>
<p>Bash provides <a rel="noopener" target="_blank" href="https://www.gnu.org/software/bash/manual/html_node/Definitions.html#Definitions">control operators</a> to build sequences of
commands.
Some of these are conditional and allow logical branching based on the success
state of the last run command.</p>
<p>We will just focus on these two logical operators:</p>
<ul>
<li><code>&amp;&amp;</code>: the AND operator, run the following command only if previous succeeded</li>
<li><code>||</code>: the OR operator, run the following command only if previous failed</li>
</ul>
<h2 id="exit-codes">Exit codes
    <a href="#exit-codes" aria-label="Anchor link for: exit-codes">
        #
    </a>

</h2>
<p>You might wonder how bash considers whether a command succeeded.
This is where <a rel="noopener" target="_blank" href="https://en.wikipedia.org/wiki/Exit_status">exit codes</a> come in.
When a program exits a numeric status code is returned.
A value of <code>0</code> means the program succeeded, any other value means it failed.</p>
<p>The exit code is normally hidden.
The status of the last run command is stored in the <code>?</code> variable.
You may inspect it by invoking:</p>
<pre><code data-lang="bash"><span>echo </span><span>$</span><span>?
</span></code></pre>
<p>E.g., listing with <code>ls</code> normally returns <code>0</code>, but this value differs if the
directory doesn't exist or if an error occurred.</p>
<pre><code data-lang="bash"><span>ls ~</span><span>/            </span><span># exit code: 0
</span><span>ls </span><span>~</span><span>/nonexistent </span><span># exit code: 2
</span></code></pre>
<p>This will function similarly to almost any program.</p>
<h2 id="chaining-commands">Chaining commands
    <a href="#chaining-commands" aria-label="Anchor link for: chaining-commands">
        #
    </a>

</h2>
<p>Let's go over some examples to show how these control operators can be used.</p>
<p>Imagine you want to <a rel="noopener" target="_blank" href="https://bash.cyberciti.biz/guide/Source_command">source</a> the <code>~/.profile</code> file, but only if it
is readable:</p>
<pre><code data-lang="bash"><span>if </span><span>[ </span><span>-r </span><span>~</span><span>/.profile </span><span>]</span><span>; then
    </span><span>source </span><span>~</span><span>/.profile
</span><span>fi
</span></code></pre>
<p>We can simplify this using control operators:</p>
<pre><code data-lang="bash"><span>[ </span><span>-r </span><span>~</span><span>/.profile </span><span>] </span><span>&amp;&amp; </span><span>. </span><span>~</span><span>/.profile
</span></code></pre>
<p>Only if the readability check expression is truthful/succeeds, we want to source
the file, so we use the <code>&amp;&amp;</code> operator.</p>

<p>To require invoking user to be root, we can do the following:</p>
<pre><code data-lang="bash"><span>[ </span><span>$</span><span>EUID </span><span>-ne</span><span> 0 </span><span>] </span><span>&amp;&amp; </span><span>echo</span><span> You must be root </span><span>&amp;&amp; </span><span>exit</span><span> 1
</span></code></pre>
<p>The <code>echo</code> command exists with <code>0</code>, so this propagates to <code>exit</code> if the
first expression is truthful.</p>

<p>If we'd like to print our profile file contents with a success message,
or an error message on reading failure, we can do the following:</p>
<pre><code data-lang="bash"><span>cat ~</span><span>/.profile </span><span>&amp;&amp; </span><span>echo</span><span> This is your profile </span><span>|| </span><span>echo</span><span> Failed to read profile
</span></code></pre>
<p>You can make these command sequences as long as you want. Useful for
building install scripts that go through a series of steps. You could define
bash functions for each step and orchestrate the installation like this:</p>
<pre><code data-lang="bash"><span>init </span><span>&amp;&amp; </span><span>configure </span><span>&amp;&amp; </span><span>install </span><span>&amp;&amp; </span><span>cleanup </span><span>|| </span><span>echo</span><span> Install failed
</span></code></pre>
<p>Or format it differently to make long sequences better readable:</p>
<pre><code data-lang="bash"><span>init </span><span>&amp;&amp;
  </span><span>configure </span><span>&amp;&amp;
  </span><span>install </span><span>&amp;&amp;
  </span><span>cleanup </span><span>||
  </span><span>echo</span><span> Install failed
</span></code></pre><h2 id="nice-to-know">Nice to know
    <a href="#nice-to-know" aria-label="Anchor link for: nice-to-know">
        #
    </a>

</h2>
<p>There are <a rel="noopener" target="_blank" href="https://unix.stackexchange.com/a/159514/61092">many</a> more control operators,
including list terminators, pipe operators, and others.</p>
<p>The <code>[</code> (commonly used in if-statements) isn't just a shell feature.
It is a binary on Unix-like systems, usually located at <code>/usr/bin/[</code>,
so it can be used anywhere.
It returns the exit code <code>0</code> if the expression was truthful.</p>
<p>You can chain multiple <code>[ expr ] &amp;&amp; [ expr ]</code> expressions together, they are
commands after all.</p>
<p>Bash also has <code>[[</code>, which is
<a rel="noopener" target="_blank" href="https://stackoverflow.com/q/13542832/1000145">different</a> from <code>[</code>.</p>
<p>You can wrap multiple commands with <code>{ expr }</code> to run it as single expression in
your command chain. For example:</p>
<pre><code data-lang="bash"><span>[ </span><span>$</span><span>EUID </span><span>-ne</span><span> 0 </span><span>] </span><span>&amp;&amp; </span><span>{ </span><span>echo</span><span> You must be root</span><span>; </span><span>exit</span><span> 1 }
</span></code></pre>
<p>The <code>true</code> and <code>false</code> commands do nothing more than returning <code>0</code> or <code>1</code>.</p>
<p>Bash features <a rel="noopener" target="_blank" href="https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html#Shell-Parameter-Expansion">parameter expression</a>.
You can use <code>${EDITOR:=nvim}</code> to set the <code>EDITOR</code> variable to <code>nvim</code> only if
it is empty, so you won't even need conditionals.</p>
<p>Most other shells support similar operators. <a rel="noopener" target="_blank" href="https://fishshell.com/">fish</a> uses <code>; and</code> and <code>; or</code>, but now <a rel="noopener" target="_blank" href="https://github.com/fish-shell/fish-shell/issues/4620">supports</a> <code>&amp;&amp;</code> and <code>||</code> as well in modern versions.</p>
<p><code>$_</code> (or <code>Alt+.</code>) is your last used argument (noted by <a rel="noopener" target="_blank" href="https://lobste.rs/s/nao13f/elegant_bash_conditionals#c_brp038">@Diti</a>).
For example:</p>
<pre><code data-lang="bash"><span>test</span><span> -f </span><span>"</span><span>FILE</span><span>" </span><span>&amp;&amp; </span><span>source </span><span>"$</span><span>_</span><span>" </span><span>|| </span><span>echo </span><span>"$</span><span>_</span><span> does not exist</span><span>" </span><span>&gt;&amp;</span><span>2
</span></code></pre>
<p>A function or script returns the exit code of the last expression. If your last
expression is a command chain as described in this article, you might have an
unexpected exit code. See
<a rel="noopener" target="_blank" href="https://www.reddit.com/r/linux/comments/lw0ofg/elegant_bash_conditionals/gpf1lr0/">this</a>
comments.</p>
<h2 id="closing-thoughts">Closing thoughts
    <a href="#closing-thoughts" aria-label="Anchor link for: closing-thoughts">
        #
    </a>

</h2>
<p>These command sequences with control operators are an elegant alternative for
simple if-statements. I think they look much better and are more expressive
looking at conditional logic.</p>
<p>But, don't overuse them. For bigger statements or advanced branching, you should
fall back to if-statements.</p>
<p>I hope this article motivates you to make your shell scripts a little more
elegant in the future by using these operators.</p>

        </div></div>]]>
            </description>
            <link>https://timvisee.com/blog/elegant-bash-conditionals/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26314489</guid>
            <pubDate>Tue, 02 Mar 2021 12:16:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Proposal for an Internet Service: The Eternal Home Page (1996)]]>
            </title>
            <description>
<![CDATA[
Score 68 | Comments 39 (<a href="https://news.ycombinator.com/item?id=26313569">thread link</a>) | @jstrieb
<br/>
March 2, 2021 | http://neilsloane.com/doc/eternal.html | <a href="https://web.archive.org/web/*/http://neilsloane.com/doc/eternal.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
<center><h2>Proposal for an Internet Service: The Eternal Home Page</h2></center><center>
<a href="http://neilsloane.com/index.html"> N. J. A. Sloane</a>
</center>
<center>
Information Sciences Research Center,
</center>
<center>
AT&amp;T Labs - Research, Florham Park, New Jersey 07932, U.S.A.
</center>
<center>
Email address: njasloane@gmail.com.
</center>
<center>
December 13, 1996. Revised November 11, 1997.
</center>
<center>
<h2><strong>Abstract</strong></h2>
</center>
<p>
This paper describes a possible Internet service that
some major organization such as
Harvard University, AT&amp;T,
the Institute of Electrical and Electronic Engineers,
the American Mathematical Society, the American Medical Association,
or even the Vatican, might offer: a home page "in perpetuity".
Such a "perpetual page" or "eternity page" or
"e-memorial page" would be a home page that the organization would
help the customer set up, with a guarantee that it would
last for (say) 500 years, or until the organization no
longer exists.
It would list all the things that the customer would like to
be remembered for (accomplishments, family, etc.).
As the population of the U.S. ages,
such a service should prove very popular.
After all, almost everyone wants to be remembered by posterity.
</p><center><h2> Details </h2></center>
<ul>
<li>
The name for this service needs to be chosen with care, and
of course registered. "Eternity service",
"Perpetual page", "Eternity page", "E-memorial page",
"Everlasting page"
are a few possibilities. I will use "Perpetual page"
in this paper.

</li>
<li>
The first version of this paper was written in
December 1996, although the idea for the "Perpetual home page"
first occurred to me in January 1996.
Not surprisingly,
it turns out that other people have had similar ideas, and there may be some
commercial services that provide electronic gravestones available even now.
But my vision is that
this service would be offered by a major organization or institute,
that has already existed for a long time and
has some chance of existing 500 years from now.
And I'm not thinking of tombstones, but home-pages.

</li>
<li>
The "Perpetual page" could include such things as:
<ul>
<li>
photographs of houses, boats, paintings, other precious possessions
</li>
<li>
lists of awards, accomplishments
</li>
<li>
writings, drawings, songs, even unpublished novels
(disk space is cheap)
</li>
<li>
links to perpetual pages of one's family (including ancestors!) and friends
</li>
</ul>

</li>
<li>
This is the customer's chance to write their own
<em>New York Times</em> obituary page, or "time capsule".
(Many people do not realize that except for a handful of major obituaries,
every obituary item in the <em>New York Times</em> has to be
purchased at about $40 per line -- this can be a humiliating
experience for the next-of-kin.
Setting up a "Perpetual page" in advance for the sick
and elderly could be both therapeutic and comforting for the family.)

</li>
<li>
There should be a generous amount of disk
space available for each page - a minimum of ten megabytes,
to allow a number of photographs to be included. (Most Internet
providers at present do not allow nearly enough disk space.)
As my colleague 
Andrew Odlyzko has pointed out in his
<a href="http://www.research.att.com/~amo/doc/tragic.loss.txt">
discussion of the future of scholarly journals</a>,
the cost of disk space is dropping so rapidly that it is likely that 
the cost of providing a service
in perpetuity will be not much more than that of providing it for
one year.

</li>
<li>
The organization would help the customer set up the initial page, and would
provide instructions on how to maintain it.
A "help desk" would be part of the service.

</li>
<li>
One way to structure the offer might be to tell customers:
For a one-time fee of $X, we will provide you with Y MB of
storage, and as long as you pay a small monthly fee,
you can keep modifying it.  Once you stop paying the monthly fee
(say because you die, or switch to a different
provider) we will keep the latest version <em>forever</em>.

</li>
<li>
Part of the offer would be a guarantee that when the Internet is replaced
by some other service in a few years, all the "Perpetual pages"
would be automatically converted to the new medium.

</li>
<li>
It is important that the organization offering the servce
should have been in existence for a long time, and have a good chance of
still existing 500 hundred years from now.
The organizations mentioned in the Abstract certainly
satisfy these conditions, and it is easy to think of others. 
Such a service would not carry much conviction
if offered by some tiny local Internet service provider.

</li>
<li>
This is the first time in history that such a thing is possible.

</li>
<li>
Incidentally,
the <em>New York Times</em>} for Saturday Dec. 7 1996 describes (on page D2)
a patent, US 5,517,791, for a new tombstone design that can
incorporate a person's life story - including photographs.
So ideas like the one I am proposing are "in the air".

</li>
<li>
As one may verify by visiting cemeteries in New Jersey, tombstones are rarely
legible after a hundred years have passed.  One of the advertisements for the
proposed service could show a family searching through a
cemetery full of grave stones that have been worn smooth,
looking for the lost grave of an ancestor.  Furthermore,
as the world population continues to explode,
cemeteries will become increasingly irrelevant.

</li>
<li>
The "perpetual page" service would especially appeal to mature customers.
There are several ways in which advertisements could point out the futility
of earlier attempts to be remembered, even by world leaders.
For example, one advertisement could show a replica of the original
Mausoleum at Halicarnassus,
after which all later mausoleums are named.
(See <em>The Oxford History of the Classical World</em>,
ed. J. Boardman et al., Oxford, 1993, p. 150.)
<center> <img src="http://neilsloane.com/doc/maus1.jpg"> </center>
<p>
One of the Seven Wonders of the World, it was
built in the year 353 for King Mausolus of Caria by his wife.
It no longer exists.
"But if King Mausolus had had a perpetual page, we could still read
about his victories today ...".

</p></li>
<li>
An alternative way in which the "perpetual page" could be used is
by family and friends after the death of a loved one, by setting up a
permanent memorial for the deceased.  The Page would need to have an
authorized keeper, to screen out inappropriate material.
A certain amount of permanent space would be purchased, to which
interested parties could contribute in any way they wished.


</li>
<li>
Another advertisement could have a voice reading P. B. Shelley's
poem <strong>Ozymandias</strong>,
while the picture shows dust blowing around an appropriate ruin:

<pre>     I met a traveller from an antique land 
     Who said: Two vast and trunkless legs of stone 
     Stand in the desert ... Near them, on the sand,
     Half sunk, a shattered visage lies, whose frown,
     And wrinkled lip, and sneer of cold command,
     Tell that its sculptor well those passions read
     Which yet survive, stamped on these lifeless things,
     The hand that mocked them, and the heart that fed:
     And on the pedestal these words appear: 
     `My name is Ozymandias, king of kings: 
     Look on my works, ye Mighty, and despair!' 
     Nothing beside remains. Round the decay 
     Of that colossal wreck, boundless and bare
     The lone and level sands stretch far away.
</pre>
<center><img src="http://neilsloane.com/doc/ozy4.jpg"> </center>
</li>
<li>
It will also give all the unpublished poets and writers,
the unrecognized painters and musicians, the scientists
whose theories are rejected, the opportunity to have their
work immortalized.

</li>
<li>
Yet another advertisement could have Jessye Norman singing the moving
and unforgettable aria "Remember Me"
from Henry Purcell's "Dido and Aeneas".
(The formal title
is "Thy hand Belinda - when I am laid in Earth"
[Philips CD 434 161-2].)

</li>
</ul>
<p>
<strong>Acknowledgements</strong>:  I am grateful to Colin Mallows, Andrew Odlyzko,
Susanna Cuyler Sloane and Nambi Seshadri for a number of helpful comments.

</p><center>
<img src="http://neilsloane.com/banners/bline.gif" alt=" ">
</center>
<p><strong>See also:</strong> <a href="http://neilsloane.com/index.html"> <strong>My home page</strong></a> | 
<a href="http://neilsloane.com/doc/links.html#ET"><strong>Related links</strong></a>





</p></div>]]>
            </description>
            <link>http://neilsloane.com/doc/eternal.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26313569</guid>
            <pubDate>Tue, 02 Mar 2021 09:49:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: A network of weather stations to help prevent pesticide spray drift]]>
            </title>
            <description>
<![CDATA[
Score 78 | Comments 22 (<a href="https://news.ycombinator.com/item?id=26313216">thread link</a>) | @Damon_Mesonet
<br/>
March 2, 2021 | https://cotl.com.au/launch.html | <a href="https://web.archive.org/web/*/https://cotl.com.au/launch.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <div>
              <a name="intro"></a>


              <figure>
                <a href="https://riverlandmalleemesonet.com.au/"><img alt="Screenshot of the Riverland Mesonet during the beginning of an inversion" src="https://cotl.com.au/assets/app-screenshot-riverland-inversion-e97e8509021dc60e59f9013061552f9c5589719e56dbf50e5420a2d2ffc36e1a.png"></a>
                <figcaption>Screenshot of the Riverland Mesonet during the beginning of an inversion</figcaption>
              </figure>


              <p>Hi from the team who built the "mesonet" weather station networks in the state of South Australia!</p>
              <p>A <a href="https://en.wikipedia.org/wiki/Mesonet">mesonet</a> is a term for a network of automated weather stations designed to monitor meteorological phenomena at high geographic density and updated frequently.</p>
              <p>We built these networks to help prevent pesticide <a href="#spraydrift">spray drift</a> - the phenomenon in which pesticide spray that is applied to a crop ends up drifting to other crops, sometimes many kilometres away.</p>
              <p>Spray drift can be a huge problem, as it can lead to damage or even destruction of highly valuable crops, and can also cause pollution to waterways and harm to native ecosystems.</p>
              <p>The biggest factor in spray drift the presence of a <a href="#thermalinversions">thermal inversion</a>, a state in which temperature increases with increasing altitude, which usually happens in the evening and overnight when the earth is cooling, but can happen at other times. However other meteorological phenomena also affect the likelihood of spray drift, and different types of spray respond differently.</p>
              <p>So we designed a <a href="#ourweatherstations">weather station</a> to measure all the relevant meteorological phenomena, and in particular to detect thermal inversions, and a custom <a href="#webapp">web app</a> to display the data in format that is very fast and simple to access and understand.</p>
              <p>We've now deployed 70 of these stations across two of the major agricultural regions of South Australia, and so far it seems to be making a difference: no damage due to spray drift has been reported in these regions since the networks were rolled out.</p>


              

              <a name="background"><h2>Background</h2></a>

              <p>A group of stakeholders in the <a href="https://en.wikipedia.org/wiki/Mid_North">Mid North region of South Australia</a> had identified spray drift as a major issue.</p>
              <p>The region, to the north of <a href="https://en.wikipedia.org/wiki/South_Australia">South Australia</a>'s capital of <a href="https://en.wikipedia.org/wiki/Adelaide">Adelaide</a>, has a thriving agricultural sector, producing wheat, barley, wine grapes, pulses, livestock and other produce.</p>
              <p>The total annual output from the region is valued at nearly AUD $2 billion. It has been estimated that the potential loss in production from spray drift could be as high as $178M/year, and potential harm to waterways and native ecosystems is significant.</p>
              <p>The local stakeholders worked with meteorologists and researchers to develop a solution, then sought funding from the South Australia state government to fund the project.</p>
              <p>In 2018, a $1.4M grant was provided, and a pilot rollout of 40 weather stations was undertaken.  It was named the Mid North Mesonet.</p>
              <p>The pilot was deemed successful, and in 2019, another grant was provided by the state government for a network in the <a href="https://en.wikipedia.org/wiki/Riverland">Riverland</a> and <a href="https://en.wikipedia.org/wiki/Murray_Mallee">Mallee</a> region to the north-east of Adelaide.</p>

              <p>In the two years since the Mid North Mesonet was rolled out, there have been no reported instances of crop damage due spray drift.</p>

              <a name="spraydrift"><h2>The Problem of Spray Drift</h2></a>
              <p>Farmers spray pesticides on their crops to manage pests. It is an important feature of modern farming. Herbicide may be applied to target broad-leaf plants, other times to target summer weeds.</p>
              <p>Spray drift occurs when pesticide spray 'drifts' across into non-target areas.</p>
              <p>Spray drift is a problem because:</p>
              <div>
                <ul>
                    <li>The affected non-target area may be particularly susceptible to pesticides (i.e. broad-leaf crops such as grapevines are especially vulnerable)</li>
                    <li>Some markets are highly sensitive to the amount of pesticide residues detectable in the end products (i.e. wine exports to China; organic farms; etc)</li>
                    <li>The affected non-target area might be a sensitive natural ecosystem (i.e. local waterways)</li>
                    <li>The affected non-target area might include rain water tanks used for drinking water</li>
                    <li>It is a waste of pesticide product and labour time costs</li>
                </ul>
              </div>

              <a name="causesofspraydrift"><h2>Causes of Spray Drift</h2></a>
              <p>A combination of conditions can lead to spray drift.</p>
              <h3>Wind Speed</h3>
              <p>Wind speed that is very low or very high.</p>
              <h3>Temperature</h3>
              <p>A temperature over about 28°C (83°F).</p>
              <h3>Humidity</h3>
              <p>The effect of humidity varies depending on the type of spray. The spray manufacturer's instructions should provide guidance.</p>
              <h3>Atmospheric Stability</h3>
              <p><i>Unstable</i> or <i>stable</i> conditions can lead to spray drift. Conditions should be <i>neutral.</i></p>
              <h3>Thermal Inversions</h3>
              <p>A thermal inversion, in which temperature increases with increasing altitude, is a major risk factor for spray drift.</p>
              <p>Inversions generally happen in the evening and overnight as the earth cools, but they can happen at other times.</p>

              <a name="thermalinversions"><h2>Thermal Inversions</h2></a>
              <p>For current farming practices, long-distance spray drift generally occurs during very stable weather conditions (i.e. little to no air turbulence).</p>
              <p>A thermal inversion occurs when a warm layer of air sits above a cooler layer of air near the ground.</p>
              <p>This reduces air turbulence and can act as a ‘lid’ for an airborne pollutant source. The lack of air turbulence means the smaller spray droplets float without settling on the target crops.</p>
              <p>A very slight breeze can then carry these floating droplets large distances before they eventually descend into a non-target area.</p>
              <p>It is illegal to spray during a thermal inversion.</p>

              <p><strong>The problem: it is very difficult for farmers to tell if a thermal inversion is underway.</strong></p>

              <figure>
                <img alt="Diagram of an inversion" src="https://cotl.com.au/assets/inversion-diagram-4620f5e78853d307f3eda98282034a2f31990112210498b118a7f7209d362393.png">
                <figcaption>Diagram of an inversion</figcaption>
              </figure>

              <figure>
                <img alt="Photograph of an inversion with smoke" src="https://cotl.com.au/assets/inversion-smoke-photograph-37a8df015d3d946abce8f157b9088b23458cf7be098822bc24c5ccc5c98ac6ac.png">
                <figcaption>Photograph of an inversion with smoke</figcaption>
              </figure>

              <a name="ourweatherstations"><h2>Our Weather Stations</h2></a>

              <p>Our weather stations were designed to:</p>
              <div>
                <ul>
                    <li>Measure temperature at 1.2m and 10m, in order to detect inversions</li>
                    <li>Measure all weather metrics that are relevant in determining whether it is safe to spray</li>
                    <li>Update data every 10 minutes, so farmers have access to the most recent readings</li>
                </ul>
              </div>

              <p>They consist of:</p>
              <div>
                <ul>
                    <li>Temperature sensors at 1.2m</li>
                    <li>Temperature difference between 10m and 1.2m</li>
                    <li>Wind speed and direction sensors at 2m and 10m</li>
                    <li>Tipping bucket rain-gauge</li>
                    <li>Solar radiation sensor</li>
                    <li>Pressure sensor</li>
                    <li>Relative Humidity sensor</li>
                    <li>Antenna</li>
                    <li>DataLogger which takes readings every 10 minutes, does some calculations locally, and uploads over cellular data (3G/4G) to the web server for processing and display</li>
                </ul>
              </div>
              <p>Each tower is self-powered by a solar panel and battery.</p>

              <figure>
                <img alt="Weather Station at Walker Flat, SA" src="https://cotl.com.au/assets/aws-walkerflat-700x400px-4c79a337af8e7993aa961117c4d7ce0714a59cf0d23192272858e23c0c7e8a6f.jpg">
                <figcaption>Weather Station at Walker Flat, SA</figcaption>
              </figure>

              <figure>
                <img alt="Weather Station at Pinkerton Plains, SA" src="https://cotl.com.au/assets/aws_pinkerton_550px-e67cf8f7ec5c635d25d6fd2855bd4144e8209d78f17d71c9443a3b5e924419ce.jpg">
                <figcaption>Weather Station at Pinkerton Plains, SA</figcaption>
              </figure>


              <a name="webapp"><h2>The Web Application</h2></a>

              <p>We initially used an off-the-shelf web application for displaying meteorological data, but soon realised we needed something tailored to our needs. We found a company that was already in the business of building web-applications to display environmental data for farmers, and they were willing to build a customised version for us.</p>

              <p>The key requirements for the application were:</p>
              <div>
                <ul>
                    <li>Each of the monitored metrics displayed on a map, with fast/simple switching between each metric</li>
                    <li>A dashboard of all the current key metrics and recent historical graphs</li>
                    <li>Long-term graphs of all the key metrics also available, and as well as the past 48 hours of data in tabular format</li>
                    <li>The site must display well and be easy to use on a mobile device, and be fast to use even in areas with low cellular signal strength, given that much of the usage will be by farmers out in the field in remote areas.</li>
                </ul>
              </div>

              <p>The key technologies are:</p>
              <div>
                <ul>
                    <li>Ruby on Rails</li>
                    <li>PostgreSQL</li>
                    <li>Redis</li>
                    <li>Sidekiq for queue processing</li>
                    <li>React</li>
                </ul>
              </div>

              <p>Data is uploaded from the data logger via FTP (which may seem primitive, but the world of meteorological data still relies heavily on FTP).</p>

              <p>On detection of new data, the application first takes the most recent readings, and updates the data structures for the map and dashboard views.</p>

              <p>The historical data is then placed in a queue, for updating of historical graphs.</p>

              <p>All the data for the map view, dashboards and historical graphs are formatted into a JSON hash then serialized and stored in the Redis cache. That way, when the React web interface makes a request, the pre-formatted data can be retrieved and sent very quickly, as no querying, processing or formatting of data is required at request time.</p>

              <figure>
                <a href="https://midnorthmesonet.com.au/"><img alt="Screenshot of the Mid North Mesonet Map View with wind speeds shown" src="https://cotl.com.au/assets/app-screenshot-mid-north-mesonet-e2dc04bb613cc2a2607527fb6973e8fd78f938152818a84f184d0f8aeba497d5.png"></a>
                <figcaption>Screenshot of the Mid North Mesonet Map View with wind speeds shown</figcaption>
              </figure>

              <figure>
                <a href="https://riverlandmalleemesonet.com.au/"><img alt="Screenshot of the Riverland Mallee Mesonet Map View with temperatures shown" src="https://cotl.com.au/assets/app-screenshot-riverland-mallee-mesonet-61fdac0ba62e4974f33b61ae5b121162a7078d7320f4be951f2eb55052a59ce2.png"></a>
                <figcaption>Screenshot of the Riverland Mallee Mesonet Map View with temperatures shown</figcaption>
              </figure>

              <a name="results"><h2>Results so far</h2></a>

              <p>In the two years since the Mid North Mesonet was deployed, there have been no reported cases of crop damage due to spray drift.</p>

              <p>Damage and loss had been reported in most of the previous years - though not all. So it is too early to tell if the problem has been completely solved, but indications are promising.</p>

              <p>Other government bodies and NGOs are expressing interest in establishing their own mesonets.</p>


              <a name="contacts"><h2>Contacts</h2></a>
              <p>
                Damon Grace<br>
                Project Engineer<br>
                damon.grace@cotl.com.au<br>
              </p>
              <p>
                Warwick Grace<br>
                Meteorologist<br>
                warwick@graceresearch.com<br>
              </p>
              <p>
                Tom Howard<br>
  …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://cotl.com.au/launch.html">https://cotl.com.au/launch.html</a></em></p>]]>
            </description>
            <link>https://cotl.com.au/launch.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26313216</guid>
            <pubDate>Tue, 02 Mar 2021 08:42:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[DDD Is Overrated]]>
            </title>
            <description>
<![CDATA[
Score 104 | Comments 84 (<a href="https://news.ycombinator.com/item?id=26312652">thread link</a>) | @mcp_
<br/>
March 1, 2021 | https://tilkov.com/post/2021/03/01/ddd-is-overrated/ | <a href="https://web.archive.org/web/*/https://tilkov.com/post/2021/03/01/ddd-is-overrated/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p><em>Update: There’s a <a href="https://www.innoq.com/en/blog/is-domain-driven-design-overrated/">slightly extended version of this post</a> over at the INNOQ company blog.</em></p>
<p>There, I said it. Now that I have your attention: Domain Driven Design (DDD) has recently gained additional popularity, as evidenced by new books, conference talks (and even complete conferences dedicated to it), and lots of trainings – including some by our very own colleagues at <a href="https://www.innoq.com/">INNOQ</a>. And in contrast to my click-bait headline, I’m actually a fan. <a href="https://www.dddcommunity.org/book/evans_2003/">Eric Evans’s book</a>, the additional work writing and evangelizing it done by <a href="https://vaughnvernon.com/">Vaughn Vernon</a> (e.g. in <a href="https://www.case-podcast.org/15-domain-driven-design-with-vaughn-vernon">this very good podcast</a> with my colleague Joy) and many others, are all very good additions to our industry’s body of knowledge. In the best sense of pattern languages, DDD gives clear names to things that many developers and designers know how to do, but cannot reliably and compatibly communicate about.</p>
<p>But I’m annoyed by the fact that recently, it seems that any time somebody talks about how to architect system or service boundaries, or even just mentions non-technical design, everybody feels compelled to bring in the DDD experts – as if they were the only superheroes who could possibly design anything at all. This is just as bad as any other situation where you blindly apply the solution that’s currently en vogue, just because it is the thing everyone talks about, and not because it is the right solution for the job. DDD is great, but it’s just one of many tools and techniques you should be aware of.</p>
<p>I think there is a more important aspect that people miss, especially when they get into DDD as their introduction to design in general. DDD emphasizes the importance of naming, and it suggests you should strive for a common, ubiquitous language, in the context you’re designing for. But it also uses its own language – concepts like bounded context, aggregates, entities, value objects, etc. – for our domain, the domain of designing systems. And while these are all well and good, they’re only one possible language. There’s value in calling a value object a value object, if this is a term many people understand, to facilitate communication. But the existing, common DDD concepts are not the only concepts you should consider – they are just examples of a very common trait of designing and architecting systems: Coming up with and recognizing patterns, giving them good names, and using them to give the system structure and integrity. If in your architecture, there’s a common pattern that you use a Filter to route requests to a Handler, or a concept of a Document that is handled by an Agent, then these things may occur again and again, on the same level as Services or Repositories, and end up being way more important to you. This is fine! This concept, that we can and should invent our own languages, is to me way more important than many naïve DDD practitioners think. I like to believe that DDD experts know this very well, and view any DDD material as a starting point, not an end result – but if all you’re doing is applying the by-the-book definition of existing DDD terms, and trying to shoe-horn any problem into this existing structure, yours is a very sad designer’s life.</p>
<p>There is a life beyond DDD. Not every good design needs to be Domain-Driven (though I can accept it should always be driven by the domain, just not necessarily in the DDD sense). You can design good systems even if you’re not a DDD expert.</p>

</div></div>]]>
            </description>
            <link>https://tilkov.com/post/2021/03/01/ddd-is-overrated/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26312652</guid>
            <pubDate>Tue, 02 Mar 2021 07:08:44 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Speed Is the Killer Feature]]>
            </title>
            <description>
<![CDATA[
Score 529 | Comments 488 (<a href="https://news.ycombinator.com/item?id=26312516">thread link</a>) | @bdickason
<br/>
March 1, 2021 | https://bdickason.com/posts/speed-is-the-killer-feature/ | <a href="https://web.archive.org/web/*/https://bdickason.com/posts/speed-is-the-killer-feature/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		        
<p>Do you remember your first time using a modern smartphone? A vibrant screen that responded instantly when you tapped replaced cramped keyboards. You could sign your name, drag and drop apps around the screen, and even spin the giant Price is Right wheel to set your alarm. In 2007, this felt like a the future. There's a reason it was called 'the Jesus phone.'</p>
<p>At that same time, The Motorola Razr (<a href="https://www.youtube.com/watch?v=4_IK295sfxQ">video</a>) was the top phone on the market. It was a flip phone with the ability to take photos, play videos, browse the web, and play music. Sound familiar?</p>
<p>Phones in 2007 had the same features as the iPhone. The Palm Treo (<a href="https://www.youtube.com/watch?v=nK7FvGz4Jkc">video</a>) even had a touch screen.</p>
<img src="https://bdickason.com/static/posts/speed-is-the-killer-feature/smartphones-2007.png">
<p>The difference was <em>speed</em>.</p>
<p>When you touched a Razr or a Palm phone, there was a delay. It felt sluggish and slow. Apple removed the delay between your finger tapping the screen and something happening. Your finger could finally manipulate the UI in realtime, just like in the real world. It felt magical. If there was even a slight delay, the whole experience fell apart.</p>
<p><strong>Speed is a killer feature. Speed is a differentiator.</strong></p>
<p>Yet teams consistently overlook speed. Instead, they add more features (which ironically make things slower). Products bloat over time and performance goes downhill.</p>
<p>New features might help your users accomplish something extra in your product.
<strong>Latency stops your users from doing the job they already hire your product for.</strong></p>
<p>Slow ui acts like tiny papercuts. Every time we have to wait, we get impatient, frustrated, and lose our flow.</p>
<h2>Honestly assess your speed</h2>
<p>I want you to take a moment and approach your product with a fresh set of eyes: Eyes for speed  👀</p>
<p>Go through your onboarding flow and try your core product features. Take mental note of how long each step takes to appear on the page then to be interactive.</p>
<p>How slow is it?
Be honest.
It’s ok, I’ve been there too.</p>
<p>Does your checkout page take 10+ seconds to load? Did you have to wait for a loading indicator multiple times along the way? Did things look interactive but weren’t loaded yet?</p>
<p>Every one of these is an opportunity. The great thing about speed (also called ‘performance’) is that you can stack rank it and burn it down.</p>
<p>Imagine what your product would feel like if everything happened in real time.</p>
<p><img src="https://bdickason.com/static/posts/speed-is-the-killer-feature/speed-keanu-sandra.png"></p><p>Be like Keanu and fix every slowdown in your product. Your users will thank you.</p>
<h2>Places where speed matters</h2>
<ul>
<li>Speed during Checkout - Every second of page load time kills conversion rates. A 1 second delay <a href="https://neilpatel.com/blog/loading-time/">reduces conversion rate by 7%</a>.</li>
<li>Framerate in Virtual Reality - The early days of Virtual Reality caused intense nausea akin to motion sickness <a href="https://link.medium.com/QyheLe9rbeb">when framerates dropped below 60fps</a>.</li>
<li>Design Tools - Users are consistently frustrated when Sketch or Figma are slow. <a href="https://quizlet.com/blog/everything-i-know-about-design">Designers have high APM</a> (actions per minute) and a small slowdown can occur 5-10 times per minute.</li>
<li>The core interaction of your product - Your product exists to save people time or help them solve a problem. Introducing friction or delay during the most important flow of your product will drive people crazy. Notion has developed a reputation for being a sluggish product:</li>
</ul>
<img src="https://bdickason.com/static/posts/speed-is-the-killer-feature/reddit-notion.png">
<h2>Perception vs. Reality</h2>
<p>If you can’t speed up a specific action, you can often fake it. Perceived speed is just as important as actual speed. Even if you can’t be fast, you should appear to be fast.</p>
<p><strong>Large content</strong> - Render the screen while content loads so the user knows what’s coming.
<strong>Long load times</strong> - Make the screen interactive, even if everything hasn’t loaded.
<strong>Waiting for an action</strong> - Allow the user to take the action and keep moving but post the action in the background.
<strong>Very long actions</strong> - If you have an action that will take 30s or more, offer to notify the user (e.g. via email) when the action is available.</p>
<p>Here are some examples of products that fake being fast:</p>
<ul>
<li>Facebook’s app pioneered loading images that look like actual content. The structure and UI of the page loads but the content does not. As a result, you can still use the product and prepare to take actions, even if the content hasn’t loaded.</li>
<li>Games have a rule to never block the input thread. You can slow down the visuals but the controls should always feel responsive so the user feels in control.</li>
<li>Robinhood has you swipe up to trade, but runs your transaction in the background and notifies you via email when your trade is complete.</li>
</ul>
<h2>When is it ok to be slow?</h2>
<ul>
<li>When there is a physical constraint that causes things to take a while (e.g. dispensing money from an ATM)</li>
<li>When you want to give people a chance to correct a mistake (e.g. Gmail's "undo" feature)</li>
<li>When a human has to keep up with a machine (e.g. we slow down video game framerates, otherwise the game would run at 60x speed and overwhelm you).</li>
</ul>
<h2>Bonus Fun: What would it be like to live with lag?</h2>
<p>Imagine making breakfast with a 1 second latency added to every action you take. Even something as simple as moving your hands so that an egg rests over a bowl becomes incredibly challenging.</p>
<p><strong>Here's a real life experiment where 0.5-3s of latency was added to everyone's action via a VR headset:</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_fNp37zFn9Q" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
<p>This is what we're forcing on people when we ship laggy software. We're making them spend their time waiting for us.</p>
<p><strong>Do you struggle to prioritize speed for your product? I'd love to hear more: <a href="http://twitter.com/bdickason">@bdickason</a></strong></p>
<p><strong>Get my newsletter.</strong>  It features simple improvements you can make to improve your day-to-day PM life. From Product Vision/Strategy to Goals and Metrics to Roadmaps and everything in between.</p>


<center></center>


<p>Soundtrack: <a href="https://www.youtube.com/watch?v=MviNwNKYLN4">Mega Ran &amp; Futurecop! - Slow Down</a></p>

<p> <a href="https://open.spotify.com/playlist/1sjamnHIeKEKqkYVwFtXo9?si=NAShg2i5TzetT69GKQ9Irw">See all songs featured on my site.</a></p>
<p>Post last updated: Feb 25, 2021
</p><h2 id="posts">Posts</h2>
<div>
<ul>
<li>
<p><a href="https://bdickason.com/posts/speed-is-the-killer-feature/">Speed is the killer feature</a> <span>Feb 25, 2021</span></p>
</li>
<li>
<p><a href="https://bdickason.com/posts/manage-your-manager/">How to manage your manager</a> <span>Feb 19, 2021</span></p>
</li>
<li>
<p><a href="https://bdickason.com/posts/social-thinkers-solo-thinkers/">Social thinkers vs. Solo thinkers</a> <span>Feb 11, 2021</span></p>
</li>
<li>
<p><a href="https://bdickason.com/posts/pm-lead-massive-projects-writer-editor/">How top silicon valley PM's lead massive projects</a> <span>Feb 4, 2021</span></p>
</li>
<li>
<p><a href="https://bdickason.com/posts/hardware-release-software-release/">How great hardware and software teams ship</a> <span>Jan 21, 2021</span></p>
</li>
<li>
<p><a href="https://bdickason.com/posts/most-pms-dont-use-their-product/">Most PM's don't use their own product</a> <span>Jan 15, 2021</span></p>
</li>
<li>
<p><a href="https://bdickason.com/posts/the-best-product-management-books-articles/">The Best Product Management books, articles, and videos</a> <span>Jan 8, 2021</span></p>
</li>
<li>
<p><a href="https://bdickason.com/posts/gather-great-feedback-from-power-users/">How to gather great feedback from your power users</a> <span>Jan 4, 2021</span></p>
</li>
<li>
<p><a href="https://bdickason.com/posts/biggest-pm-learning-2020-set-an-intention/">Set an intention for the year (and tell everyone)</a> <span>Dec 27, 2020</span></p>
</li>
<li>
<p><a href="https://bdickason.com/posts/strategy-write-great-prereads/">Write great pre-reads and land your strategy</a> <span>Dec 21, 2020</span></p>
</li>
<li>
<p><a href="https://bdickason.com/posts/write-things-down/">Write Things Down</a> <span>Dec 2, 2020</span></p>
</li>
<li>
<p><a href="https://bdickason.com/posts/strategy-101-unpack-your-assumptions/">Strategy 101: Unpack your assumptions</a> <span>Nov 19, 2020</span></p>
</li>
</ul>
</div>

		


	  </div></div>]]>
            </description>
            <link>https://bdickason.com/posts/speed-is-the-killer-feature/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26312516</guid>
            <pubDate>Tue, 02 Mar 2021 06:40:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Element Matrix Services Announces Element Home]]>
            </title>
            <description>
<![CDATA[
Score 206 | Comments 160 (<a href="https://news.ycombinator.com/item?id=26311801">thread link</a>) | @decrypt
<br/>
March 1, 2021 | https://element.io/blog/element-home/ | <a href="https://web.archive.org/web/*/https://element.io/blog/element-home/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div>
      
      <div><p>We’ve launched a brand new version of Element, called <a href="https://element.io/element-home">Element Home</a>!<br></p><p>It’s the Element app, but faster, personalised and under your control - all packaged up so you don’t have to worry about how it works! You can just enjoy the fact you know you chose someone you trust (us!) with your data.<br></p><p>So that you know, here’s what’s going on behind the scenes with Element Home; in practice you’re getting your own fully managed, dedicated server alongside your Element app. It means you have a notably faster service than when using a typical free public server - you’re saved the hassle of self-hosting and it’s guaranteed to be kept updated with the very latest and greatest Matrix hosting best practices.<br></p><div><p>On top of faster messaging, Element Home comes with five user accounts. It’s the ideal way for a family, or groups of friends, to get a super-quick professionally hosted version of Element.</p><p><strong>A new type of messenger</strong></p></div><p>As you know, Element is completely different to most messaging apps. <br></p><p>Because Element is <strong>decentralised</strong>, the app itself (what you see) is separate from the Matrix hosting service behind it (what you don’t see; the movement of messages and where they are stored).<br></p><p>That’s important because it lets users decide where their messages and data are kept. In owning that choice, you also get to own your data and messages rather than having them sucked up into the likes of Facebook Messenger, Signal, Telegram or WhatsApp.<br></p><p>Some people choose to host themselves, and that’s great. As it requires some technical knowledge, many others choose to use a free public hosting service such as Matrix.org to get up and running.<br></p><p>Element Home is a third option; the ability to pay for a fully managed, dedicated server (aka a ‘homeserver’). Being a dedicated server, it devotes itself to just a handful of users; and that’s why it’s so much quicker than a typical free public server that constantly juggles thousands of users.</p><p><strong>There are many messaging apps, but surprisingly little choice.</strong></p><figure><img src="https://element.io/blog/content/images/2021/02/Comparison-table-8--1-.png" alt="" srcset="https://element.io/blog/content/images/size/w600/2021/02/Comparison-table-8--1-.png 600w, https://element.io/blog/content/images/size/w1000/2021/02/Comparison-table-8--1-.png 1000w, https://element.io/blog/content/images/size/w1600/2021/02/Comparison-table-8--1-.png 1600w, https://element.io/blog/content/images/2021/02/Comparison-table-8--1-.png 2108w" sizes="(min-width: 720px) 720px"><figcaption>Element compared with centralised messaging apps.</figcaption></figure><p><br><strong>Free vs $10 per month</strong><br></p><p>As you know, Element and Matrix is all about giving you choice. If you want to use the free version, that’s completely fine by us!<br></p><p>But here’s the extra you get in return for a few bucks a month:<br></p><ol><li>Element Home means you’re <strong>hosted by Element Matrix Services</strong> - our Matrix-based hosting platform used by big companies and public sector organisations. You have a <strong>dedicated server</strong> (so you’re sharing minimal infrastructure with anyone else), fully managed and maintained by the most Matrix-savvy team in the world.<br></li><li>Professional-hosting means the service is <strong>notably faster</strong> than when hosted by a typical free public server, and <strong>always fully updated</strong> and maintained.<br></li><li>An Element domain that you can name, so you can make <strong>memorable Matrix IDs</strong> such as @yourfirstname:yoursurname.ems.host. Use your surname as the domain, and it’s perfect for family sharing!<br></li><li><strong>Five Element accounts</strong> - so after using one yourself, you’ll have four more for family or friends - so that’s <strong>just $2 per user per month</strong> for a super-quick data sovereign messaging service (you can add more users if you wish).</li></ol><figure><img src="https://element.io/blog/content/images/2021/02/Element-Home-custom-IDs.png" alt="" srcset="https://element.io/blog/content/images/size/w600/2021/02/Element-Home-custom-IDs.png 600w, https://element.io/blog/content/images/2021/02/Element-Home-custom-IDs.png 848w" sizes="(min-width: 720px) 720px"><figcaption>Matching IDs for all the family!</figcaption></figure><p><strong>Wishing you could turn back time?!</strong></p><p>If you’re an Element user and you’re self-hosting, or using a typical free public server (such as Matrix.org), you can simply copy your existing account over to Element Home. Currently, you can only do this in the Element web app (we’re working on an equally simple upgrade from within Android and iOS). Once you’ve upgraded your ‘old’ account will still be live, so feel free to keep it or delete it as you see fit.<br></p><p>For those not already up and running on Element, just <a href="https://element.io/element-home">sign up for Element Home</a> from here.</p></div>
      
    </div>
  </div></div>]]>
            </description>
            <link>https://element.io/blog/element-home/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26311801</guid>
            <pubDate>Tue, 02 Mar 2021 04:05:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to Read Assembly Language]]>
            </title>
            <description>
<![CDATA[
Score 275 | Comments 88 (<a href="https://news.ycombinator.com/item?id=26311722">thread link</a>) | @sidcool
<br/>
March 1, 2021 | https://wolchok.org/posts/how-to-read-assembly-language/ | <a href="https://web.archive.org/web/*/https://wolchok.org/posts/how-to-read-assembly-language/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p>Why, in 2021, does anyone need to learn about assembly language?
First, reading assembly language is the way to know <em>exactly</em> what
your program is doing. Why, <em>exactly</em>, is that C++ program 1 MiB (say)
instead of 100 KiB? Is it possible to squeeze some more performance
out of that function that gets called all the time?</p><p>For C++ in particular, it is easy to forget or just not notice some
operation (e.g., an implicit conversion or a call to a copy
constructor or destructor) that is implied by the source code and
language semantics, but not spelled out explicitly. Looking at the
assembly generated by the compiler puts everything in plain sight.</p><p>Second, the more practical reason: so far, posts on this blog haven’t
required an understanding of assembly language, despite constant
links to <a href="https://godbolt.org/">Compiler Explorer</a>. By <a href="https://twitter.com/ScottWolchok/status/1361022423399755776">popular
demand</a>,
however, our next topic will be parameter passing, and for that, we
will need a basic understanding of assembly language. We will focus
only on <em>reading</em> assembly language, not writing it.</p><p>The basic unit of assembly language is the <strong>instruction</strong>. Each
machine instruction is a small operation, like adding two numbers,
loading some data from memory, jumping to another memory location
(like the dreaded <a href="https://en.wikipedia.org/wiki/Goto">goto</a>
statement), or calling or returning from a function. (The x86
architecture has <a href="https://en.wikipedia.org/wiki/Complex_instruction_set_computer">lots of not-so-small
instructions</a>
as well. Some of these are <a href="https://stackoverflow.com/questions/5959890/enter-vs-push-ebp-mov-ebp-esp-sub-esp-imm-and-leave-vs-mov-esp-ebp">legacy
cruft</a>
built up over the 40-odd years of the architecture’s existence, and
others are <a href="https://en.wikipedia.org/wiki/Advanced_Vector_Extensions">newfangled
additions</a>. )</p><p>Our first toy example will get us acquainted with simple
instructions. It just calculates the square of the
<a href="https://en.wikipedia.org/wiki/Norm_(mathematics)#Euclidean_norm">norm</a>
of a 2D vector:</p><div><pre><code data-lang="c++"><span>#include</span> <span>&lt;cstdint&gt;</span><span>
</span><span></span>
<span>struct</span> <span>Vec2</span> {
    <span>int64_t</span> x;
    <span>int64_t</span> y;
};

<span>int64_t</span> <span>normSquared</span>(Vec2 v) {
    <span>return</span> v.x <span>*</span> v.x <span>+</span> v.y <span>*</span> v.y;
}
</code></pre></div><p>and here is the resulting x86_64 assembly from clang 11, <a href="https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAM1QDsCBlZAQwBtMQBGAFlICsupVs1qhkAUgBMAISnTSAZ0ztkBPHUqZa6AMKpWAVwC2tQVvQAZPLUwA5YwCNMxEADZSAB1QLC62nsMTQS8fNTorG3sjJxd3JRUw2gYCZmICAONTTkVlTFU/ZNSCCLtHZzdFFLSMoOyFKuLrUujy1wBKRVQDYmQOAHIpAGZrZEMsAGpxQZ1kevx6KexxAAYAQRXV%2BuIDVXGANTzJSYB2WTXxi/HrAlduAH0CcYAPKbPVy6v6W4fxgE9XjbiY4AEQBaw212%2Bj1oJCMDAAjgZUph0BADsgjgA3NonN4fYiYAjdWjjTEAOie4wAVKSKZMZLTftTGWD1iC%2Bh1WCA%2BgBWPqkUx9Zb81DcnRyOTjBRdHqYemDTj8gjc4VtDoAaxAg0GZO1ev1BvcXL63H5guFpFFfX5ChAy1IyqFHNIcFgSDQRg8eHYZAoEA9Xp9KGEok4nGW2So3oIzltEAcKv5DmsqV%2B3MVpA9Ri0BAA8rRWGmnaQsEYRMB2ImS3gCflMZhbcXME88gYY%2Bn%2BddlB2hHgHMRU3osD2CMQ8EYOx0aPQmGwODx%2BIIQ2IJTJew5bZAOqgPIlGwBaXODcb7uZTYESGRySQW%2BJ5RKabQ1LKkcwlKIxYLeXx0Z9f0J%2BO%2BZQuHUuT5HQhTVPomSCHe4FJA0QEtCBlRFH%2BdSIU0H7lJwHTSt0vRcJy3J8gKVZWk8AAcrj7rc4yjOW4xhmSyxkpw4wQLghAkPK2TjHonres4vE4uKV4yEqiZqqQmrarqBoKdqRrcqaZHFlaNp2g6UkujAiAoKggk%2BuQlABkJLgMaG4aRtGsaUAmxbJrQqY9lmOb5oWValuWlbFvgtZqPWjYWs2rbtn0GZdsaFqsH2A7EL8Q79Bao7jpOpDTowLCVguAiSEI5YoKu8ixRu8DbrufgHkeJ5noMF7FTeNpgQ%2BEDmOhr7aEhn7ZCEP7%2BNBtSeN%2BiTdThOQJAUDQdXBiSQY0kTAbB02DS%2B9RFGNIF4TKhG4UIJFmuR3JUTRdGWcATGcCxbEcVxRDELxpD8YZgbCUMkiicVklOtJsk6opin7Sah3qdymn2o6qrEX0kggxaGnaT9HT1sQPgaNwQA%3D%3D">via Compiler Explorer</a>:<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup></p><div><pre><code data-lang="asm">        <span>imulq</span>   %rdi, %rdi
        <span>imulq</span>   %rsi, %rsi
        <span>leaq</span>    (%rsi,%rdi), %rax
        <span>retq</span>
</code></pre></div><p>Let’s talk about that first instruction: <code>imulq %rdi, %rdi</code>. This
instruction <a href="https://www.felixcloutier.com/x86/imul">performs signed integer
multiplication</a>. The <code>q</code>
suffix tells us that it is operating on 64-bit quantities. (In
contrast, <code>l</code>, <code>w</code>, and <code>b</code> would denote 32-bit, 16-bit, and 8-bit,
respectively.) It multiplies the value in the first given register
(<code>rdi</code>; register names are prefixed with a <code>%</code> sign) by the value in
the second register and stores the result in that second
register. This is squaring <code>v.x</code> in our example C++ code.</p><p>The second instruction does the same with the value in <code>%rsi</code>, which
squares <code>v.y</code>.</p><p>Next, we have an odd instruction: <code>leaq (%rsi,%rdi), %rax</code>. <code>lea</code>
stands for “load effective address”, and it stores the address of the
first operand into the second operand. <code>(%rsi, %rdi)</code> means “the
memory location pointed to by <code>%rsi + %rdi</code>”, so this is just adding
<code>%rsi</code> and <code>%rdi</code> and storing the result in <code>%rax</code>. <code>lea</code> is a quirky
x86-specific instruction; on a more
<a href="https://en.wikipedia.org/wiki/Reduced_instruction_set_computer">RISC</a>-y
architecture like ARM64, we would expect to see a plain old <code>add</code>
instruction.<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup></p><p>Finally, <code>retq</code> returns from the <code>normSquared</code> function.</p><p>Let’s take a brief detour to explain what the registers we saw in our
example are. Registers are the “variables” of assembly
langauge. Unlike your favorite programming language (probably), there
are a finite number of them, they have standardized names, and the
ones we’ll be talking about are at most 64 bits in size. Some of them
have specific uses that we’ll see later. I wouldn’t be able to rattle
this off from memory, but <a href="https://en.wikipedia.org/wiki/X86-64#Architectural_features">per
Wikipedia</a>,
the full list<sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup> of 16 registers on x86_64 is <code>rax</code>, <code>rcx</code>, <code>rdx</code>, <code>rbx</code>,
<code>rsp</code>, <code>rbp</code>, <code>rsi</code>, <code>rdi</code>, <code>r8</code>, <code>r9</code>, <code>r10</code>, <code>r11</code>, <code>r12</code>, <code>r13</code>,
<code>r14</code>, and <code>r15</code>.</p><p>Now, let’s extend our example to debug print the <code>Vec2</code> in <code>normSquared</code>:</p><div><pre><code data-lang="c++"><span>#include</span> <span>&lt;cstdint&gt;</span><span>
</span><span></span>
<span>struct</span> <span>Vec2</span> {
    <span>int64_t</span> x;
    <span>int64_t</span> y;
<span>    <span>void</span> <span>debugPrint</span>() <span>const</span>;
</span>};

<span>int64_t</span> <span>normSquared</span>(Vec2 v) {
<span>    v.debugPrint();
</span>    <span>return</span> v.x <span>*</span> v.x <span>+</span> v.y <span>*</span> v.y;
}
</code></pre></div><p>and, again, let’s see <a href="https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAM1QDsCBlZAQwBtMQBGAFlICsupVs1qhkAUgBMAISnTSAZ0ztkBPHUqZa6AMKpWAVwC2tEJICcpLegAyeWpgByxgEaZiIAGykADqgWE6rR6hiaCfgFqdHYOzkZuHt5KKlG0DATMxAQhxqYWisqYqkHpmQQxTq7uXooZWTlhnLVlFXEJXgCUiqgGxMgcAORSAMz2yIZYANTiwzrICgT49DPY4gAMAILrGwvEBqqTAGpFktMA7LKbk9eT9gSe3AD6BJMAHjOXGze39A/PkwBPD7bb4AN1QeHQkywLgMwAACsQ7hAOpM0LQFsDNuIzgARLFbTZ3P4vWgkIwMACOBkymHQEGOyFOoNROM%2BYIAdDC4YjkR0Cd9iJgCL1aJNQRzXpMAFTiyXTGRygEypUEnG4gZdVggAYAVgGpFMAzWBtQOp0cjkkwUPT6mAVw04BoIOpNHS6AGsQMNhhyff6A4HvNqBtwDUaTaQzQMDQoQGtSC7jZrSHBYEg0EYfHh2GQKBBM9ncyhhKJOJw1k0qDmCO44xAXK6DS57JkATqnaRM0YtAQAPK0Vjt5OkLBGETAdhN0d4IXFUGYOMjzCvIoGWsdg13ZSboR4FzENt6LC7ghIoybro0ehMNgcHj8QSlsSWmR7lxxyBdVA%2BVJLgC0fbDJM/4LOgMy4hIMhyJIkbJEUqSaNoDSmE01itFUHhNBEgR0Ch4T%2BLhtAYfE1RNPBxR0KU9T6LkggUak1HlPYlSkVhzQ0aEqEccxsSYVwXQ2r0/QCUIOr6oa07Rq8AAcnj/g8aLPpM5YcmsHKcJMEC4IQJAOk0kx6FmObuPpqIWtBMjOk27qkF6Pp%2BoGTk%2BsGOphpJI7RrG8aJjZqYwIgKCoMZubkJQhYmR44wTuWlakNWrC1sQ9aNiOLa0G2u7dr2A5DtOY4TlOI74HOagLkukYrmuG4DJ224hpGrD7oexAAsegyRmeeAXrVKbXowLBTg%2BAiSEIE4oK%2B8hNR%2B8Dfr%2BQQAUBIFgRBUGyDIsGxoUlGmBA1j4Zwo3oSxbRkcMviEakB2jThqQke0nDnQxJR1NktGNKNz1Ua991nTx108b9WHDIJtoiZwWrieGUk6rJ8mKdFogqZwakaVpOlEMQ%2BmkIZwVFqZIySOZk3Wcmtn2b6znOWJobQ55OreQmSZupDAySHTkZeb5ZNdAuyVBCA3BAA">the generated assembly</a>:</p><div><pre><code data-lang="asm">        <span>subq</span>    <span>$24</span>, %rsp
        <span>movq</span>    %rdi, <span>8</span>(%rsp)
        <span>movq</span>    %rsi, <span>16</span>(%rsp)
        <span>leaq</span>    <span>8</span>(%rsp), %rdi
        <span>callq</span>   <span>Vec2</span>::<span>debugPrint</span>() <span>const</span>
        <span>movq</span>    <span>8</span>(%rsp), %rcx
        <span>movq</span>    <span>16</span>(%rsp), %rax
        <span>imulq</span>   %rcx, %rcx
        <span>imulq</span>   %rax, %rax
        <span>addq</span>    %rcx, %rax
        <span>addq</span>    <span>$24</span>, %rsp
        <span>retq</span>
</code></pre></div><p>In addition to the obvious call to <code>Vec2::debugPrint() const</code>, we have
some other new instructions and registers! <code>%rsp</code> is special: it is
the “stack pointer”, used to maintain the <a href="https://en.wikipedia.org/wiki/Call_stack">function call
stack</a>. It points to the
bottom of the stack, which grows “down” (toward lower addresses) on
x86. So, our <code>subq $24, %rsp</code> instruction is making space for three
64-bit integers on the stack. (In general, setting up the stack and
registers at the start of your function is called the <a href="https://en.wikipedia.org/wiki/Function_prologue">function
prologue</a>.) Then, the
following two <code>mov</code> instructions store the first and second arguments
to <code>normSquared</code>, which are <code>v.x</code> and <code>v.y</code> (more about how parameter
passing words in the next blog post!) to the stack, effectively
creating a copy of <code>v</code> in memory at the address <code>%rsp + 8</code>. Next, we
load the address of our copy of <code>v</code> into <code>%rdi</code> with <code>leaq 8(%rsp), %rdi</code> and then call <code>Vec2::debugPrint() const</code>.</p><p>After <code>debugPrint</code> has returned, we load <code>v.x</code> and <code>v.y</code> back into
<code>%rcx</code> and <code>%rax</code>. We have the same <code>imulq</code> and <code>addq</code> instructions as
before. Finally, we <code>addq $24, %rsp</code> to clean up the 24
bytes<sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup> of stack space we allocated at the start of
our function (called the <a href="https://en.wikipedia.org/wiki/Function_prologue#Epilogue">function
epilogue</a>),
and then return to our caller with <code>retq</code>.</p><p>Now, let’s look at a different example. Suppose that we want to print
an uppercased C string and we’d like to avoid heap allocations for
smallish strings.<sup id="fnref:5"><a href="#fn:5" role="doc-noteref">5</a></sup> We might write something like
the following:</p><div><pre><code data-lang="c++"><span>#include</span> <span>&lt;cstdio&gt;</span><span>
</span><span>#include</span> <span>&lt;cstring&gt;</span><span>
</span><span>#include</span> <span>&lt;memory&gt;</span><span>
</span><span></span>
<span>void</span> <span>copyUppercase</span>(<span>char</span> <span>*</span>dest, <span>const</span> <span>char</span> <span>*</span>src);

<span>constexpr</span> size_t MAX_STACK_ARRAY_SIZE <span>=</span> <span>1024</span>;

<span>void</span> <span>printUpperCase</span>(<span>const</span> <span>char</span> <span>*</span>s) {
    <span>auto</span> sSize <span>=</span> strlen(s);
    <span>if</span> (sSize <span>&lt;=</span> MAX_STACK_ARRAY_SIZE) {
        <span>char</span> temp[sSize <span>+</span> <span>1</span>];
        copyUppercase(temp, s);
        puts(temp);
    } <span>else</span> {
        <span>// std::make_unique_for_overwrite is missing on Godbolt.
</span><span></span>        std<span>::</span>unique_ptr<span>&lt;</span><span>char</span>[]<span>&gt;</span> temp(<span>new</span> <span>char</span>[sSize <span>+</span> <span>1</span>]);
        copyUppercase(temp.get(), s);
        puts(temp.get());
    }
}
</code></pre></div><p>Here is <a href="https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAM1QDsCBlZAQwBtMQBGAFlICsupVs1qhkAUgBMAISnTSAZ0ztkBPHUqZa6AMKpWAVwC2tEAHZeW9ABk8tTADljAI0zEuANlIAHVAsLqtHqGJua8vv5qdLb2Tkau7pxeSipRtAwEzMQEwcamForKmKqBGVkEMY4ubp6Kmdm5oQUK9RV2VfE1SQCUiqgGxMgcAORSAMx2yIZYANTiYzrILfio89jiAAwAguOT05hzC0sExHbAa5s7khO0Uwaz8zpGmEYkAJ4X25cAbqh46DM0N43gBVbzeNwsJQQZAILIzABUWBapEBdBagLhxERCkG3Xmsi%2B2zQtBamAAHt5sf4AF6YAD6BBmAFktgANekMAAqWx0AGl6VsAEpCrYATU5AEkAFrYQ4AERmnA2km4BMuPz%2BAKpdgIYIhxB0zGhJIxsPhCIU3TmZkJWxmDpmzAMRBmCgYeDpCrdJ3YtAgVvV20dMzwVBmAY9Xse80VrI53N5AuFoolDBl2Gt4ltlxDIfN2IIL284gArNJ3Z6DnIlWX5UH7XmHUDQeDIcbMBAi0ZvKjA2M7U2Hd4XQou8X8QPc47s4rlEobYOhwB6Zc%2B9AgEBGZgAawZBloeAAjgYGTRiPTUN83AB3U5F0MKGZGPAKfyiGZ0GZ6Ht4djY7BKVYEg3AAOmnJtlk3A9j1PelvBOR4CzLWRS3rMY5W7bwIHsG9MSyFDK2jGRazQyclybFt9XbaEsNA4BMAICBejdciILzEcCDHOiGKY7o2ODGczHrL5hOGXpWBAYZS2GUhTGGDZZNQKSdDkGsFH6QZq2uThZIIKTFP40gdxAbgxlAsZlTGABOMxS1LMZSySAAOSQhCk7hZPkxTSGU4ZZIUEANlIfSFPE0g4FgJA0F/f9yEoGLvD/GophEYBOGVThSCoP8i2IQKIGcAzZOcOwsjeKTdNIGLnnoAB5WhWAqsLSCwbdRHYYrWrwYhijUa9ApailihdEYqt1ZRKtk1g8GcYhyr0LAppC04jCm3oaHoJg2A4Hh%2BEEYRRBQNSZCEWbAsgXpUAQwJBoAWjqsYZju5ZYwkGQ5EkDZnqoWhUDu69VBIKsfr%2Bu6D2IfRWDu4DrqfO7fv%2Bikhhu9EAqKEoNAgKxGlMLKrEqOIEkECIAjoXGSb8MnaEJ6pEkKVJSlaCmspSPqmfKWnOnplpyhZupOfaImul6DSBiGLgJKkmS5K6vzyWcjw7o8bhAUO4AlU4UCNlAzgI1wQgSDmHTUR/JL/2NyzrVUj6ZD04qjJMsZzMkUszNLMxrI2MxnIc653OGTzZZavyAqCkKHYimBEBQVBYrceKYTj82UvVjKNiynLWDygqipa0raHK5aaq0AgGqarq2rSzqWvwXqSgGrrhuQUblomySWpmuaFowEYfJOPA1uGXSNroRgWE6vaBDc9Xjtt%2BQu4u5jfNR0kpIep6XoIdA3pO6QvtB/7AaIU4vQRsGIahmHUDhw%2B7uRzBV4UdHGaxnH9DyQQCaFunKciQJ%2BakzSFzYmrMMZpDKA0D%2BoQwGv3SK0EBXQBZQJCHjZBbRYi/04KLTSEtsEBxlt5JSUkFZKxVmrNKmtta631vgE%2BlssrfmTslbE4xJDWz3vbMKjsQDXFAu7VU3AHKK0kNZaypYZ4eS8nLKSYdgqhUMlLYYkhpEh1kRHbhvRrz5UCKZIAA%3D">the generated assembly</a>:<sup id="fnref:6"><a href="#fn:6" role="doc-noteref">6</a></sup></p><div><pre><code data-lang="asm"><span>printUpperCase</span>(<span>char</span> <span>const</span>*):                  <span># @printUpperCase(char const*)
</span><span></span>        <span>pushq</span>   %rbp
        <span>movq</span>    %rsp, %rbp
        <span>pushq</span>   %r15
        <span>pushq</span>   %r14
        <span>pushq</span>   %rbx
        <span>pushq</span>   %rax
        <span>movq</span>    %rdi, %r14
        <span>callq</span>   <span>strlen</span>
        <span>leaq</span>    <span>1</span>(%rax), %rdi
        <span>cmpq</span>    <span>$1024</span>, %rax                     <span># imm = 0x400
</span><span></span>        <span>ja</span>      <span>.LBB0_2</span>
        <span>movq</span>    %rsp, %r15
        <span>movq</span>    %rsp, %rbx
        <span>addq</span>    <span>$15</span>, %rdi
        <span>andq</span>    <span>$-16</span>, %rdi
        <span>subq</span>    %rdi, %rbx
        <span>movq</span>    %rbx, %rsp
        <span>movq</span>    %rbx, %rdi
        <span>movq</span>    %r14, %rsi
        <span>callq</span>   <span>copyUppercase</span>(<span>char</span>*, <span>char</span> <span>const</span>*)
        <span>movq</span>    %rbx, %rdi
        <span>callq</span>   <span>puts</span>
        <span>movq</span>    %r15, %rsp
        <span>leaq</span>    -<span>24</span>(%rbp), %rsp
        <span>popq</span>    %rbx
        <span>popq</span>    %r14
        <span>popq</span>    %r15
        <span>popq</span>    %rbp
        <span>retq</span>
.LBB0_2:
        <span>callq</span>   <span>operator</span> <span>new</span>[](<span>unsigned</span> <span>long</span>)
        <span>movq</span>    %rax, %rbx
        <span>movq</span>    %rax, %rdi
        <span>movq</span>    %r14, %rsi
        <span>callq</span>   <span>copyUppercase</span>(<span>char</span>*, <span>char</span> <span>const</span>*)
        <span>movq</span>    %rbx, %rdi
        <span>callq</span>   <span>puts</span>
        <span>movq</span>    %rbx, %rdi
        <span>leaq</span>    -<span>24</span>(%rbp), %rsp
        <span>popq</span>    %rbx
        <span>popq</span>    %r14
        <span>popq</span>    %r15
        <span>popq</span>    %rbp
        <span>jmp</span>     <span>operator</span> <span>delete</span>[](<span>void</span>*)                          <span># TAILCALL
</span></code></pre></div><p>Our function prologue has gotten a lot longer, and we have some new
control flow instructions as well. Let’s take a closer look at the
prologue:</p><div><pre><code data-lang="asm">        <span>pushq</span>   %rbp
        <span>movq</span>    %rsp, %rbp
        <span>pushq</span>   %r15
        <span>pushq</span>   %r14
        <span>pushq</span>   %rbx
        <span>pushq</span>   %rax
        <span>movq</span>    %rdi, %r14
</code></pre></div><p>The <code>pushq %rbp; movq %rsp, %rbp</code> sequence is very common: it pushes
the <a href="https://en.wikipedia.org/wiki/Call_stack#FRAME-POINTER">frame
pointer</a>
stored in <code>%rbp</code> to the stack and saves the old stack pointer
(which is the new frame pointer) in <code>%rbp</code>. The following four
<code>pushq</code> instructions store registers that <a href="https://en.wikipedia.org/wiki/X86_calling_conventions#System_V_AMD64_ABI">we need to save before
using</a>.<sup id="fnref:7"><a href="#fn:7" role="doc-noteref">7</a></sup>
Finally, we save our first argument (<code>%rdi</code>) in <code>%r14</code>.</p><p>On to the function body. We call <code>strlen(s)</code> with <code>callq strlen</code> and
store <code>sSize + 1</code> in <code>%rdi</code> with <code>lea 1(%rax), %rdi</code>.</p><p>Next, we finally see our first <code>if</code> statement! <code>cmpq $1024, %rax</code> sets
the <a href="https://en.wikipedia.org/wiki/FLAGS_register">flags register</a>
according to the result of <code>%rax - $1024</code>, and then <code>ja .LBB0_2</code>
(“jump if above”) transfers control to the location labeled <code>.LBB0_2</code>
if the flags indicate that <code>%rax &gt; 1024</code>. In general, higher-level
control-flow primitives like <code>if</code>/<code>else</code> statements and loops are
implemented in assembly using conditional jump instructions.</p><p>Let’s first look at the path where <code>%rax &lt;= 1024</code> and thus the branch
to <code>.LBB0_2</code> was not taken. We have a blob of instructions to create
<code>char temp[sSize + 1]</code> on the stack:</p><div><pre><code data-lang="asm">        <span>movq</span>    %rsp, %r15
        <span>movq</span>    %rsp, %rbx
        <span>addq</span>    <span>$15</span>, %rdi
        <span>andq</span>    <span>$-16</span>, %rdi
        <span>subq</span>    %rdi, %rbx
        <span>movq</span>    %rbx, %rsp
</code></pre></div><p>We save <code>%rsp</code> to <code>%r15</code> and <code>%rbx</code> for later
use.<sup id="fnref:8"><a href="#fn:8" role="doc-noteref">8</a></sup> Then, we add 15 to <code>%rdi</code> (which,
remember, contains the size of our array), mask off the lower 4 bits
with <code>andq $-16, %rdi</code>, and subtract the result from <code>%rbx</code>, which we
then put back into <code>%rsp</code>. In short, this rounds the array size up to
the next multiple of 16 bytes and makes space for it on the stack.</p><p>The following block simply calls <code>copyUppercase</code> and <code>puts</code> as written in the code:</p><div><pre><code data-lang="asm">        <span>movq</span>    %rbx, %rdi
        <span>movq</span>    %r14, %rsi
        <span>callq</span>   <span>copyUppercase</span>(<span>char</span>*, <span>char</span> <span>const</span>*)
        <span>movq</span>    %rbx, %rdi
        <span>callq</span>   <span>puts</span>
</code></pre></div><p>Finally, we have our function epilogue:</p><div><pre><code data-lang="asm">        <span>movq</span>    %r15, %rsp
        <span>leaq</span>    -<span>24</span>(%rbp), %rsp
        <span>popq</span>    %rbx
        <span>popq</span>    %r14
        <span>popq</span>    %r15
        <span>popq</span>    %rbp
        <span>retq</span>
</code></pre></div><p>We restore the stack pointer to deallocate our variable-length array
using <code>leaq</code>. Then, we <code>popq</code> the registers we saved during the
function prologue and return control to our caller, and we are done.</p><p>Next, let’s look at the path when <code>%rax &gt; 1024</code> and we branch to
<code>.LBB0_2</code>. This path is more …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://wolchok.org/posts/how-to-read-assembly-language/">https://wolchok.org/posts/how-to-read-assembly-language/</a></em></p>]]>
            </description>
            <link>https://wolchok.org/posts/how-to-read-assembly-language/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26311722</guid>
            <pubDate>Tue, 02 Mar 2021 03:51:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[National Security Commission on Artificial Intelligence's Final Report]]>
            </title>
            <description>
<![CDATA[
Score 148 | Comments 99 (<a href="https://news.ycombinator.com/item?id=26311616">thread link</a>) | @AndrewKemendo
<br/>
March 1, 2021 | https://www.nscai.gov/2021-final-report/ | <a href="https://web.archive.org/web/*/https://www.nscai.gov/2021-final-report/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main" role="main"><div data-elementor-type="wp-page" data-elementor-id="419" data-elementor-settings="[]"><div><div><section data-id="234355d" data-element_type="section" data-settings="{&quot;ekit_has_onepagescroll_dot&quot;:&quot;yes&quot;}"><div><div><div data-id="d8c7098" data-element_type="column" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}"><div><div><section data-id="deac5bd" data-element_type="section" data-settings="{&quot;ekit_has_onepagescroll_dot&quot;:&quot;yes&quot;}"><div><div><div data-id="8ba7a06" data-element_type="column"><div><div><div data-id="d57a85d" data-element_type="widget" data-widget_type="image.default"><div><p><a href="https://www.nscai.gov/wp-content/uploads/2021/03/final-repor__screenshot-1.jpg" data-elementor-open-lightbox="yes" data-elementor-lightbox-title="final-repor__screenshot-1"> <img width="732" height="412" src="https://www.nscai.gov/wp-content/uploads/2021/03/final-repor__screenshot-1.jpg" alt="" loading="lazy" srcset="https://www.nscai.gov/wp-content/uploads/2021/03/final-repor__screenshot-1.jpg 732w, https://www.nscai.gov/wp-content/uploads/2021/03/final-repor__screenshot-1-300x169.jpg 300w" sizes="(max-width: 732px) 100vw, 732px"> </a></p></div></div><div data-id="cd4d96d" data-element_type="widget" data-widget_type="image.default"><div><p><a href="https://www.nscai.gov/wp-content/uploads/2021/03/final-repor__screenshot-3.jpg" data-elementor-open-lightbox="yes" data-elementor-lightbox-title="final-repor__screenshot-3"> <img width="732" height="412" src="https://www.nscai.gov/wp-content/uploads/2021/03/final-repor__screenshot-3.jpg" alt="" loading="lazy" srcset="https://www.nscai.gov/wp-content/uploads/2021/03/final-repor__screenshot-3.jpg 732w, https://www.nscai.gov/wp-content/uploads/2021/03/final-repor__screenshot-3-300x169.jpg 300w" sizes="(max-width: 732px) 100vw, 732px"> </a></p></div></div></div></div></div><div data-id="4cf2c23" data-element_type="column"><div><div><div data-id="0d42a7d" data-element_type="widget" data-widget_type="text-editor.default"><div><div><p>The mandate of the National Security Commission on Artificial Intelligence’s (NSCAI) is to make recommendations to the President and Congress to “advance the development of artificial intelligence, machine learning, and associated technologies to comprehensively address the national security and defense needs of the United States.”</p><p>This Final Report presents the NSCAI’s strategy for winning the artificial intelligence era. The 16 chapters in the Main Report provide topline conclusions and recommendations. The accompanying Blueprints for Action outline more detailed steps that the U.S. Government should take to implement the recommendations.</p></div></div></div></div></div></div></div></div></section></div></div></div></div></div></section><section data-id="06674a1" data-element_type="section" data-settings="{&quot;ekit_has_onepagescroll_dot&quot;:&quot;yes&quot;}"><div><div><div data-id="5e2210f" data-element_type="column"><div><div><div data-id="dc57494" data-element_type="widget" data-widget_type="text-editor.default"><div><p>From quick bites to in depth interviews, hear from leading artificial intelligence and United States defense experts, including insights on how to move recommendations to crucial actions. New podcasts from our latest series, Highlights from 2020 Quarterly Recommendations, will be shared weekly.</p></div></div></div></div></div><div data-id="848e99b" data-element_type="column"><div><div><div data-id="222fe7f" data-element_type="widget" data-widget_type="text-editor.default"><div><div><p>Read our COVID white paper series, including:</p><ul><li><span>The Role of AI Technology in Pandemic Response and Preparedness: Recommended Investments and Initiatives</span></li><li><span>Mitigating Economic Impacts of the COVID-19 Pandemic and Preserving U.S. Strategic Competitiveness in AI</span></li><li><p><span>Privacy and Ethics Recommendations for Computing Applications Developed to Mitigate COVID-19</span></p></li></ul></div></div></div></div></div></div></div></div></section></div></div></div></div></div>]]>
            </description>
            <link>https://www.nscai.gov/2021-final-report/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26311616</guid>
            <pubDate>Tue, 02 Mar 2021 03:33:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Literate: A Flexible Literate Programming System]]>
            </title>
            <description>
<![CDATA[
Score 101 | Comments 22 (<a href="https://news.ycombinator.com/item?id=26311089">thread link</a>) | @cableclasper
<br/>
March 1, 2021 | https://zyedidia.github.io/literate/index.html | <a href="https://web.archive.org/web/*/https://zyedidia.github.io/literate/index.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <!-- This adds the top navigation bar -->
            


            <!-- Jumbotron -->
            <div>
                
                <p>A Flexible Literate Programming System</p>
            </div>

            <!-- What is Literate Programming -->
            <p>View the literate <a href="https://zyedidia.github.io/literate/literate-source">source code</a> for Literate!
            </p><p>View the literate <a href="https://zyedidia.github.io/literate/website-source">source code</a> for this website!
            </p><p>See the <a href="https://github.com/zyedidia/Literate">Github page</a>.</p>
            
            <h2>What is Literate Programming?</h2>
            <p>Literate programming is a style of programming invented by Donald Knuth, where the main idea is
            that a program's source code is made primarily to be read and understood by other people, and
            secondarily to be executed by the computer.</p>
            
            <p>This frees the programmer from the structure of a program imposed by the computer and means that
            the programmer can develop programs in the order of the flow of their thoughts.</p>
            
            <p>A Literate program consists of explanation of the code in a natural language such as English, interspersed
            with snippets of code to be executed. This means that Literate programs are very easy to understand and share,
            as all the code is well explained.</p>
            
            <p>Literate, a tool for literate programming, will allow you to take a literate source file (<code>*.lit</code>) and
            either <em>tangle</em> the source file which will create a file with executable code, or <em>weave</em> the
            source file, which will generate an HTML document to be read as formatted documentation.</p>

            <!-- What are the features of lit -->
            <h2>Features of this tool</h2><p>
            Literate works with any programming language, generates HTML as output (<a href="https://wkhtmltopdf.org/">which can be converted to pdf</a>),
            and generates readable code. The code that is generated is indented properly and is automatically commented using the titles you have written
            for the code blocks.</p><p>
            Here is the full list of features:</p><ul>
                <li>Supports any language including syntax highlighting and pretty printing in HTML</li>
                <li>Generates HTML as output</li>
                <li>Generates readable code and commented in the target language</li>
                <li>Reports syntax errors back from the compiler to the right line in the literate source</li>
                <li>Runs fast -- wc.lit compiled for me in 7ms for both code and html output</li>
                <li>Markdown based -- very easy to read and write Literate source.</li>
                <li>Automatically generates hyperlinks between code sections</li>
                <li>Formatted output similar to CWEB</li>
                <li>Creates an index with identifiers used (you need to have exuberant or universal ctags installed to use this feature)</li>
                <li>Supports TeX equations with <code>$</code> notation</li>
                <li>Compatible with Vim (<a href="https://github.com/zyedidia/literate.vim" target="_blank">literate.vim</a>)</li>
                <li>Highly customizable</li>
            </ul><p>
            
            You can get started by taking a look at the <a href="https://zyedidia.github.io/literate/manual.html">manual</a>.
            In addition, this website is made with Literate, and the source can be viewed
            <a href="https://github.com/zyedidia/literate-website">here</a>.

        </p></div></div>]]>
            </description>
            <link>https://zyedidia.github.io/literate/index.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26311089</guid>
            <pubDate>Tue, 02 Mar 2021 02:05:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[U.S. asks Google for detailed search data in antitrust case]]>
            </title>
            <description>
<![CDATA[
Score 234 | Comments 105 (<a href="https://news.ycombinator.com/item?id=26310292">thread link</a>) | @johncena33
<br/>
March 1, 2021 | https://www.bnnbloomberg.ca/u-s-asks-google-for-detailed-search-data-in-antitrust-case-1.1570497 | <a href="https://web.archive.org/web/*/https://www.bnnbloomberg.ca/u-s-asks-google-for-detailed-search-data-in-antitrust-case-1.1570497">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>The U.S. government has asked Google to fork over granular data on how its search engine works and is monetized, seeking to prove that the internet giant is a monopoly.</p>

<p>The U.S. Department of Justice and several state attorneys general are seeking comparable data on U.S. search results and related ad from Feb. 2, 2015 to Feb. 8, 2015 and from Feb. 3, 2020 to Feb. 9, 2020, according to a legal filing Monday.</p>

<p>The Alphabet Inc. unit is being asked to share data on how and where users searched in those periods, the quantity of different types of ads, revenue from those ads and what the underlying bids were for them, among other details. The government told the company it wants the information within 30 days.</p>

<p>The Justice Department under former U.S. President Donald Trump and 11 Republican attorneys general originally filed the suit. Three other states have since joined, including California, the site of Googleâ€™s headquarters. The latest data request shows the government is pressing ahead under a new administration led by Democrat Joe Biden.</p>

<p>The U.S. government alleges Googleâ€™s exclusive deals to distribute its search engine on browsers and phones, including Apple Inc.â€™s iPhones, violates the Sherman Actâ€™s prohibition on monopolization. Itâ€™s the most significant U.S. monopoly case since the one against Microsoft Corp. more than 20 years ago.</p>

<p>Google has said its deals donâ€™t prevent consumers from switching to other search providers. The company argues its success rests on superior technology.</p>
</div></div>]]>
            </description>
            <link>https://www.bnnbloomberg.ca/u-s-asks-google-for-detailed-search-data-in-antitrust-case-1.1570497</link>
            <guid isPermaLink="false">hacker-news-small-sites-26310292</guid>
            <pubDate>Tue, 02 Mar 2021 00:10:15 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why does an A note sound different across instruments?]]>
            </title>
            <description>
<![CDATA[
Score 194 | Comments 106 (<a href="https://news.ycombinator.com/item?id=26308241">thread link</a>) | @OmarShehata
<br/>
March 1, 2021 | https://omarshehata.me/notebook/exploring_sound | <a href="https://web.archive.org/web/*/https://omarshehata.me/notebook/exploring_sound">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="notebook">
	
	<p>From <a href="https://omarshehata.me/notebook">Omar's notebook</a>.</p>
	<hr>
	
	
	<p>
		If you pull up a tuner app on your phone and play an A note on a piano, the tuner will say ~440 hz. Do the same thing on a violin's A note and you'll also get 440 hz.  
	</p>
	<p>
		This seemed impossible based on my understanding of sound, which was: 
	</p>
	<ol>
		<li>Our ears perceive sound by picking up on the frequency of the air vibrating around us.</li>
		<li>Two sounds are different if they have different frequencies, in the same way two colors appear different if they emit light of different wavelengths.</li>
		<li>When we say a sound is 440 hz, that means a point vibrating along that sound wave makes a complete cycle 440 times per second.</li>
	</ol>
	<p>
		So if two sound waves have exactly the same frequency, according to my tuner app, they cannot possibly sound different. But they do! Does that mean there's something else, something <i>more</i> than frequency that can differentiate sound? 
	</p>
	<p>
		There isn't! That's all sound is - vibrations in the air of some specific frequency. 
	</p>
	<p>
		Was the tuner lying? Yes, kind of: when we say a sound is 440 hz, that's not actually a complete description of the sound. It's kind of like telling you a shape has 4 points - you might assume it's a square. But it could be a rectangle, or some completely wacky irregular polygon. 
	</p>
	<h2>Visualizing a couple notes</h2>
	<p>
		Here's an A note from a piano and a violin that I recorded from online virtual instruments. 
	</p>
	<p>
		Click "Play" to hear them. Below each is a small slice of the audio. 
	</p>
	
	<p>Drag and drop your own sound file in these diagrams to use it throughout the article.</p>
	<p>
		They look structurally similar, but they're <i>not</i> the same sound wave. They both have a pattern that repeats ~3 times in 9 milliseconds (or ~440 times per second). So that's what makes them both 440 hz.
	</p>
	<p>
		But that pattern itself that repeats is different. This is why saying "A sound is 440 hz" isn't a complete description, so assumption (3) for me was a misunderstanding.
	</p>
	<p>
		Here is what the sound would look like if the speaker vibrated exactly 440 times per second in a continuous, regular, motion.
	</p>
	
	<p>
		The fact that all 3 of these sound different, even though they are all made of a pattern that repeats at 440 hz, tells me I need to tweak assumption (1). Our ears don't pick up on just a single frequency in the air. If they did, these sounds would be indistinguishable (which I think actually happens for our eyes, see <a href="https://en.wikipedia.org/wiki/Metamerism_(color)">metamerism</a>.)
	</p>
	<p>
		So our ears can detect the internal structure of these patterns. To decompose this structure on a computer, we'll use the Fourier transform.
	</p>
	<h3>
		Performing the Fourier Transform
	</h3>
	<p>
		The Fast Fourier Transform (FFT) algorithm allows you to extract frequencies in a signal.
	</p>
	<p>
		Our signal in this case is a list of amplitudes, how loud the sound is at every sample.
	</p>
	<p>
		When you run the signal through like <code>FFT(signal)</code> you get a list numbers that correspond to a list of frequencies. For example, if the FFT output looks like this:
	</p>
	<p><code>
		[0.001, 0.1, 0.7, 0, 12, 0, 2, 1]
	</code></p><p>
		You'll also have a corresponding list of frequencies:
	</p>
	<p><code>
		[0, 55, 110, 220, 440, 880, 1320, 1760]
	</code></p><p>
		We interpret this to mean 440 is the most significant frequency in this signal, because its FFT coefficient is 12 (the largest), and it's the 5th number. And the 5th frequency in our list is 440. 
	</p>
	<p>
		I've found it easiest to interpret the results of FFT by putting it in a table in terms of the original sound frequency and the relative weights (so I divide all of them by the largest number).
	</p>
	<p>
		Below are the FFT results running on our two 9 ms slices. <a id="compute-fft" href="#">Click to expand</a> the chosen slices. You can also scroll back up to change the slices by hand.
	</p>
	<div id="fft-table-container">
		<div id="fft-table-A-container">
			<h4>Piano A note</h4>
			<p>(<span id="piano-fft-slice-number">10</span> ms slice)</p>
			<table id="fft-table-A">
			  <thead>
			    <tr>
			      <th>Freq. (hz)</th>
			      <th>Weight (%)</th>
			    </tr>
			  </thead>
			  <tbody>
				<tr>
					<td> N/A </td>
					<td> N/A </td>
				</tr>
			</tbody>
			</table>
		</div>
		<div id="fft-table-B-container">
			<h4>Violin A note</h4>
			<p>(<span id="violin-fft-slice-number">10</span> ms slice)</p>
			<table id="fft-table-B">
			  <thead>
			    <tr>
			      <th>Freq. (hz)</th>
			      <th>Weight (%)</th>
			    </tr>
			  </thead>
			  <tbody>
			  	<tr>
					<td> N/A </td>
					<td> N/A </td>
				</tr>
			</tbody>
			</table>
		</div>
	</div>
	<p>Frequencies below 1% weight are omitted from this table.</p>
	<p>
		These tables tell us that both sounds do have ~440 hz as the strongest frequency, but there's other frequencies inside too! The violin one appears a lot more complex, in that it seems to contain a lot more frequencies that contribute significantly.
	</p>
	<p>
		The last step is reconstructing the sound from this table. Representing sound this way is really powerful. This is the basis for a lot of sound analysis/transformations like:
	</p>
	<ul>
		<li><b>Compression?</b> Remove the highest frequencies that our ears can't hear as easily. </li>
		<li><b>Noise filtering?</b> Remove specific known frequencies, that's how you can remove the sound of car horns but keep your voice in a recording.</li>
		<li><b>Auto tune?</b> Check which musical note is closest to the list of frequencies in the sound, and alter/remove/add frequencies to make it sound closer to the note.</li>
		<li><b>Voice recognition?</b> You can think of the frequencies you can create by talking as a unique pattern a software can search for. Like how the letter "E" appears ~11% of the time in most English text. We all have a few frequencies in our voices that appear with predictable probability.</li>
	</ul>
	<p>
		Below is a sandbox for you to explore these ideas of sound reconstruction.
	</p> 
	<p>
		The code returns a <code>outputMultipliers</code> array that scales the original frequencies. A new sound is reconstructed from those new frequencies/weights. You can try <a href="#" id="zero-out">zero-ing out all the high frequencies</a>, or isolate <a href="#" id="single-frequency">a single frequency</a>.
	</p>
	<div id="sandbox">
		
		<p><a href="#" id="run-code">Run</a> <span>(shortcut: CTRL+ENTER)</span><br>
		<a href="#" id="reset-code">Reset code</a></p><div id="note-visualization">
			<div id="output-fft-table">
				<h4>Filtered note</h4>
				<table id="fft-table-output">
				  <thead>
				    <tr>
				      <th>Freq. (hz)</th>
				      <th>Weight (%)</th>
				    </tr>
				  </thead>
				  <tbody>
				  	<tr>
					<td> N/A </td>
					<td> N/A </td>
				</tr>
				</tbody>
				</table>
				<p>Frequencies below 1% weight are omitted from this table.</p>
			</div>
			
		</div>	
	</div>
	<h3>
		Takeaways
	</h3>
	<p>
		So the correct version of assumption (3) is: When we say a sound is 440 hz, we mean that's the frequency with the most weight in the signal. To give a complete description of the sound you need to know (1) all the frequencies it's made of and (2) how much of each frequency to use.  
	</p>
	<p>
		I created this to learn how FFT works. This is the end-to-end demonstration I was looking for to help me understand it. It's best used to test your understanding while reading other materials. I don't have the source code up yet but if you'd like to extend this or use it as a teaching tool just let me know! 
	</p>
	<p>
	 	You can drag and drop any sound file in the very first two figures and all figures will update to use it, including the FFT tables and the code sandbox. Here's a few notes from <a href="https://philharmonia.co.uk/resources/sound-samples/">Philharmonia</a> you can try dragging in:
	</p>
	<ul>
		<li><a href="https://omarshehata.me/static/whoisomar/images/notebook/sound/banjo_a4.mp3" download="">Banjo A note</a></li>
		<li><a href="https://omarshehata.me/static/whoisomar/images/notebook/sound/flute_a4.mp3" download="">Flute A note</a></li>
		<li><a href="https://omarshehata.me/static/whoisomar/images/notebook/sound/saxophone_a4.mp3" download="">Saxophone A note</a></li>
	</ul>
	<p>
		A few key points I needed for a correct implementation:
	</p>
	<ul>
		<li>
			<b>How to retrieve the original frequencies from the FFT output.</b> The FFT only tells you the frequency in terms of how often it repeats in the list of samples. So you need to multiple by the sample rate (like 44100 for most sound) to get frequency per second (Hz). Most FFT libraries in JS do NOT give you a list of the frequencies (just the coefficients). The formula for figuring out what frequency corresponds to what coefficient <a href="https://stackoverflow.com/questions/4364823/how-do-i-obtain-the-frequencies-of-each-value-in-an-fft/4371627#4371627" target="_blank">is described here</a>.
		</li>
		<li>
			<b>You have to take a small slice of the audio.</b> Given that the frequency of the sound changes over time, even when playing a single note, you won't get accurate/expected frequencies if you FFT the entire thing. For example, a piano note has an "attack" and a "decay", you want to take a slice from the middle. 
			<ul>
				<li>See the <a href="https://en.wikipedia.org/wiki/Short-time_Fourier_transform">Short Time Fourier Transform (STFT)</a>. This is computing FFT for a small slice of audio as we just did, but do this for all slices of the audio. You'll get a list of frequencies over time. This is often visualized as a <a href="https://en.wikipedia.org/wiki/Spectrogram">spectrogram</a>.</li>
			</ul>
		</li>
		<li>
			<b>You have to sample an integer number of cycles.</b> If you take an arbitrary slice of a pure A note, you likely will get a lot more than 440 in your FFT table, unless you happen to pick a start and an end that matches a multiple of the cycle length. This article automatically shortens any slice to the nearest cycle (we figure that out by finding the nearest sample where the signal crosses the Y axis). This is also important when playing the reconstructed sound on loop (otherwise you hear a popping sound).
		</li>
		<li>
			<b>The discrete fourier transform (DFT) doesn't include all possible frequencies.</b> In theory, FFT is a continuous sum (AKA an integral) of all possible frequencies in the audio. What we have implemented here is a discrete version, where we sum a finite list of frequencies. In a small slice you may not get 440 exactly as an output, only because it wasn't included as a frequency the algorithm was looking for. I <i>think</i> in principle you could have an implementation that allows you to specify what frequencies must be included (if you know what you're looking for) but I haven't seen such an implementation.
		</li>
		<li>
			<b>FFT isn't magic.</b> A popular analogy is that FFT can take a smoothie and extract all the component that went into it. But this seems impossible??? The trick is the FFT comes in with an assumption of what frequencies might be in there. We go through each possible frequency and ask "How much 440 hz is in this sound?" and "How much 880 hz is in this sound?" and so on. So it's closer to having an unknown substance and figuring out what it is by checking if it reacts to known chemicals/substances.
		</li>
	</ul>
	<p>A few insights I learned from exploring the code sandbox:</p>
	<ul>
		<li><b>The sum of all the frequencies &lt; 1% weight have a big effect.</b> I had these hidden in the FFT tables thinking they weren't significant, and any one of them isn't, but removing them altogether does have a very noticeable effect. Here's a <a href="#" id="remove-low-weight">code snippet</a> (scroll up) that removes all frequencies with weight less than 1%. Or try the opposite, listen to only weights less than 1%.</li>
		<li><b>The high frequencies are a big part of the violin sound.</b> Removing anything at 5000 hz and up makes it no longer really sound like a violin (or just sound really muted). This isn't true for the piano.</li>
		<li><b>A string tuned to 440 hz will never emit frequencies any lower than that</b>. This is true because of the physics of standing waves, but it was really cool to learn about this in theory, and then go back to this interface and see that this was indeed true for all the recordings of notes I had! Without having known this before I …</li></ul></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://omarshehata.me/notebook/exploring_sound">https://omarshehata.me/notebook/exploring_sound</a></em></p>]]>
            </description>
            <link>https://omarshehata.me/notebook/exploring_sound</link>
            <guid isPermaLink="false">hacker-news-small-sites-26308241</guid>
            <pubDate>Mon, 01 Mar 2021 20:52:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Introducing dbt + Materialize]]>
            </title>
            <description>
<![CDATA[
Score 107 | Comments 25 (<a href="https://news.ycombinator.com/item?id=26306861">thread link</a>) | @jldlaughlin
<br/>
March 1, 2021 | https://materialize.com/introducing-dbt-materialize/ | <a href="https://web.archive.org/web/*/https://materialize.com/introducing-dbt-materialize/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Managing data is hard. Managing data pipelines is even harder. The meaning of individual tables or values in your data warehouse gets lost in translation across organizations. Another team’s refactor breaks your team’s pipeline. And, it’s normally very difficult to tell who made what change and when.</p>
<p><a href="https://www.getdbt.com/">dbt</a>, data build tool, alleviates these frustrations by taking over the transformation step in your ETL pipelines. <a href="https://blog.getdbt.com/what--exactly--is-dbt-/">dbt is not itself a data processor</a>, but instead sits on top of your data warehouse that contains your already extracted and loaded data. dbt allows teams to easily test, document, and version-control their data transformations.</p>
<p>While dbt is a great tool for transforming batch data, it cannot currently transform streaming data in real time. (The dbt team explicitly warns users about this in a <a href="https://blog.getdbt.com/is-dbt-the-right-tool-for-my-data-transformations/">few</a> <a href="https://discourse.getdbt.com/t/how-to-create-near-real-time-models-with-just-dbt-sql/1457">places</a>.) Here at <a href="https://materialize.com/">Materialize</a>, we want to help the world stop batching and start streaming. So we* built a dbt adapter that will allow you to transform your streaming data in real time using Materialize as your data warehouse.</p>
<p>The rest of this post will explore why dbt works best with batch data and how using Materialize unlocks streaming transformations. If you’re eager to get started, the <a href="https://github.com/MaterializeInc/materialize/tree/main/misc/dbt-materialize">dbt-materialize adapter is here</a>, and our <a href="https://github.com/MaterializeInc/materialize/tree/main/play/wikirecent-dbt">sample streaming project is here</a>. Note: The dbt-materialize adapter is an <a href="https://github.com/MaterializeInc/materialize/issues/5462">active work in progress</a> and not yet suitable for production use-cases. Please file issues or submit PRs as you see fit, we love feedback!</p>
<p>*The dbt-materialize adapter was originally created by Josh Wills and actively shaped by Jeremy Cohen. Thank you for all of your work and support!</p>
<h2>dbt and batch data</h2>
<p>dbt is great at transforming batch data, but it cannot transform streaming data efficiently in real time. To understand why, let’s take a look at how dbt transforms data under the hood.</p>
<p>dbt users define their desired transformations using <a href="https://docs.getdbt.com/docs/building-a-dbt-project/building-models/">dbt “models”</a>. dbt models are SQL files that contain:</p>
<ul>
<li>A SELECT statement that performs the desired transformation</li>
<li>A <a href="https://docs.getdbt.com/docs/building-a-dbt-project/building-models/materializations/">“materialization”</a> parameter</li>
</ul>
<p>dbt transforms your data each time you <a href="https://docs.getdbt.com/reference/commands/run/">“run”</a> a model. Each time a model is run, dbt queries the underlying data warehouse using that model’s SELECT statement. The result set of the query (the transformed data) is then either returned directly to the user or persisted into your data warehouse, depending on the model’s materialization parameter.</p>
<p>Currently, dbt supports four types of materializations: <em>table</em>, <em>view</em>, <em>incremental</em>, and <em>ephemeral</em>. The <em>table</em> and <em>incremental</em> materializations persist a table, the <em>view</em> materialization creates a view, and the <em>ephemeral</em> materialization, instead of persisting anything, returns results directly using a common table expression (CTE). The good news is that these database objects are totally sufficient to transform batch data. The bad news is that none of these database objects transform streaming data efficiently.</p>
<p>First, what do I mean by batch and streaming data? Batch data, as the name suggests, is any type of data that arrives in discrete batches. This can be once a minute, once an hour, or once a day. The important thing is that no new data arrives between batches. Streaming data, on the other hand, arrives continually and at no particular schedule.</p>
<p>So, why are these database objects sufficient to transform batch data, but not able to efficiently transform streaming data?</p>
<p>Views and CTEs do not physically persist data to your data warehouse. This means that each time you query a model that uses a view or CTE, your data warehouse must re-transform the underlying source data. And, each time you transform your source data, you are paying some cost. While views and CTEs always return up-to-date transformations of your batch and streaming data, they do not do so efficiently.</p>
<p>Tables, on the other hand, do physically persist data. More specifically, tables persist the result set of the last time their model “dbt run.” Unlike views and CTEs, this means that you won’t pay the price of transforming data each time your table is queried. But, this means that your transformed data can quickly become stale as new data arrives. This is not an issue with batch data because you can simply “dbt run” your table each time a new batch arrives. Unfortunately, things aren’t so simple with streaming data.</p>
<p>Because streaming data does not arrive on a schedule, there is no longer a right time to re-run your models to keep them up-to-date. Instead, you’re forced to choose between maximizing data freshness and minimizing transformation costs. You can minimize your costs by limiting how often you recreate your tables, effectively turning your streaming data into batch data. Or, you can maximize your data freshness by continually recreating your tables. But, this approach will cost you time and money, leave you vulnerable to bugs, and still won’t maintain truly up-to-date results.</p>
<p>So, what should you do if you want to transform streaming data with dbt?</p>
<h2>dbt and streaming data</h2>
<p>dbt currently has one official and one unofficial way to approximate transforming streaming data. Neither of these methods truly transforms streaming data in real-time, and both come at a cost.</p>
<p>The first method to approximate transforming streaming data is to create models with an incremental materialization. The first time you run an incremental model, dbt persists your transformation’s result set into a table in your data warehouse. For subsequent runs, dbt only transforms the subset of source data indicated by your model’s filter predicate. (For example, you might have a filter predicate that will only transform data with a timestamp greater than your last model’s run.)</p>
<p>While incremental models reduce the severity of the tradeoff that users face when persisting their transformations in tables (data freshness vs cost), they do not eliminate the tradeoff entirely. By design, you will probably be paying a lesser cost each time you “dbt run” an incremental model. (I say “probably” here because even though you’re only transforming a few rows of data with each run, unless you’re filtering cleverly, your model’s SELECT statement will still have to scan the entire underlying source table or view to discover these rows). While these lesser costs may free you up to run your incremental models more frequently, you still will not be able to run them continuously. By definition, you are still transforming your streaming data with a batch process.</p>
<p>The second way to approximate transforming streaming data is the <a href="https://discourse.getdbt.com/t/how-to-create-near-real-time-models-with-just-dbt-sql/1457">unofficial “lambda view” approach</a>. This method simulates transformations over “near real-time models” by querying a combined historical table and a current view. This approach incurs the cost of querying both of the underlying database objects using some filter, similar to the incremental materialization. The current view of your data returns up-to-date results, but must re-transform the recent data each time.</p>
<p>Neither of these methods can efficiently transform data in real time. (And, they come with <a href="https://discourse.getdbt.com/t/on-the-limits-of-incrementality/303">hairy problems</a> if, say, you have streaming data that might arrive late.) In order to efficiently perform worry-free, real-time transformations of streaming data, dbt would need to persist a database object that updates as new data arrives upstream. Luckily, there is a database object that can do this for us: materialized views.</p>
<h2>dbt and Materialize</h2>
<p>Materialized views in traditional databases behave a bit like dbt’s incremental materialization. When a materialized view is first created, the result set of its query is physically persisted in the database. Then, at some interval or when manually triggered, the stored result set is updated with recent data. Like the incremental materialization, maintaining these materialized views incurs a variety of costs.</p>
<p>This is the exact problem Materialize was created to solve. Unlike traditional materialized views, <a href="https://materialize.com/why-use-a-materialized-view/">our materialized views</a> continually update as new data arrives–no refreshes needed. Better yet, we provide up-to-date results with millisecond latency. (For more information about Materialize and our materialized views, check out <a href="https://materialize.com/docs/">our documentation</a>.)</p>
<p>So, what does this mean for dbt and streaming data? This means that the first time you run a dbt model on top of Materialize, dbt persists a materialized view. <strong>Then, you never have to run your model again.</strong> No matter how much or how frequently your data arrives, your model will stay up to date. No matter when you query your view, it will return a fresh answer. Just by creating your model with our materialized views, you can confidently and efficiently transform streaming data in real time.</p>
<h2>Try it out!</h2>
<p>Excited? Skeptical? Cautiously optimistic? Try it out for yourself! As mentioned before, we have a <a href="https://github.com/MaterializeInc/materialize/tree/main/misc/dbt-materialize">beta dbt-adapter</a> and a <a href="https://github.com/MaterializeInc/materialize/tree/main/play/wikirecent-dbt">demo streaming project</a>. If you have any thoughts, questions, or concerns, please feel free to contact us in our community Slack or in our dbt repos. (Or, when you’re up and running, tell us what you’re transforming in real time!)</p>
<div><h3>Subscribe to our Newsletter</h3>
        
        

        </div></div></div>]]>
            </description>
            <link>https://materialize.com/introducing-dbt-materialize/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26306861</guid>
            <pubDate>Mon, 01 Mar 2021 19:13:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Ten seconds to ponder if a thread is worth it]]>
            </title>
            <description>
<![CDATA[
Score 143 | Comments 46 (<a href="https://news.ycombinator.com/item?id=26306478">thread link</a>) | @eat_veggies
<br/>
March 1, 2021 | https://blog.jse.li/posts/ten-seconds/ | <a href="https://web.archive.org/web/*/https://blog.jse.li/posts/ten-seconds/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
      
<p>A userstyle that makes you wait ten seconds before entering a Hacker News thread. I use <a href="https://github.com/openstyles/stylus">stylus</a> to manage mine.</p>
<div><pre><code data-lang="css"><span>.</span><span>subtext</span> <span>{</span>
  <span>--bar-color</span><span>:</span> <span>#f60</span><span>;</span>
  <span>--animation-delay</span><span>:</span> <span>0.5</span><span>s</span><span>;</span>
  <span>--animation-duration</span><span>:</span> <span>9.5</span><span>s</span><span>;</span>

  <span>background-image</span><span>:</span> <span>linear-gradient</span><span>(</span><span>to</span> <span>left</span><span>,</span> <span>transparent</span> <span>50</span><span>%</span><span>,</span> <span>var</span><span>(</span><span>--</span><span>bar</span><span>-</span><span>color</span><span>)</span> <span>50</span><span>%</span><span>);</span>
  <span>background-position</span><span>:</span> <span>right</span><span>;</span>
  <span>background-size</span><span>:</span> <span>201</span><span>%</span><span>;</span>
  <span>display</span><span>:</span> <span>inline</span><span>-</span><span>block</span><span>;</span>
  <span>transition</span><span>:</span> <span>background</span><span>-</span><span>position</span> <span>0.2</span><span>s</span><span>;</span>
<span>}</span>

<span>.</span><span>subtext</span><span>:</span><span>hover</span> <span>{</span>
  <span>background-position</span><span>:</span> <span>left</span><span>;</span>
  <span>transition</span><span>:</span> <span>background</span><span>-</span><span>position</span> <span>var</span><span>(</span><span>--</span><span>animation</span><span>-</span><span>duration</span><span>)</span> <span>linear</span> <span>var</span><span>(</span><span>--</span><span>animation</span><span>-</span><span>delay</span><span>);</span>
<span>}</span>

<span>.</span><span>subtext</span> <span>a</span><span>[</span><span>href</span><span>^=</span><span>"item"</span><span>]</span> <span>{</span>
  <span>pointer-events</span><span>:</span> <span>none</span><span>;</span>
<span>}</span>

<span>.</span><span>subtext</span><span>:</span><span>hover</span> <span>a</span><span>[</span><span>href</span><span>^=</span><span>"item"</span><span>]</span> <span>{</span>
  <span>animation</span><span>:</span> <span>enable-click</span> <span>var</span><span>(</span><span>--</span><span>animation</span><span>-</span><span>duration</span><span>)</span> <span>forwards</span> <span>step-end</span> <span>var</span><span>(</span><span>--</span><span>animation</span><span>-</span><span>delay</span><span>);</span>
<span>}</span>

<span>@</span><span>keyframes</span> <span>enable-click</span> <span>{</span>
  <span>to</span> <span>{</span>
    <span>pointer-events</span><span>:</span> <span>auto</span><span>;</span>
  <span>}</span>
<span>}</span>
</code></pre></div><p>Special thanks to Martino di Filippo (<a href="https://github.com/MartinodF">@MartinodF</a>) for showing me the <code>animation-timing-function: step-end</code> CSS property!</p>

    </section></div>]]>
            </description>
            <link>https://blog.jse.li/posts/ten-seconds/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26306478</guid>
            <pubDate>Mon, 01 Mar 2021 18:46:22 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The small web is beautiful]]>
            </title>
            <description>
<![CDATA[
Score 112 | Comments 11 (<a href="https://news.ycombinator.com/item?id=26305585">thread link</a>) | @benhoyt
<br/>
March 1, 2021 | https://benhoyt.com/writings/the-small-web-is-beautiful/ | <a href="https://web.archive.org/web/*/https://benhoyt.com/writings/the-small-web-is-beautiful/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="container">



<div id="content">

<p>March 2021</p>

<blockquote>
  <p>Summary: I believe that small websites are compelling aesthetically, but are also important to help us resist selling our souls to large tech companies. In this essay I present a vision for the “small web” as well as the small software and architectures that power it. Also, a bonus rant about microservices.</p>

  <p><strong>Go to:</strong> <a href="#small-software">Software</a> | <a href="#small-websites">Web</a> | <a href="#emphasize-server-side-not-javascript">Server-side</a> | <a href="#static-sites-and-site-generators">Static sites</a> | <a href="#fewer-dependencies">Dependencies</a> | <a href="#small-analytics">Analytics</a> | <a href="#small-architectures-not-microservices">Microservices</a></p>
</blockquote>

<p>About fifteen years ago, I read E. F. Schumacher’s <em>Small is Beautiful</em> and, despite not being interested in economics, I was moved by its message. Perhaps even more, I loved the terse poetry of the book’s title – it resonated with my frugal upbringing and my own aesthetic.</p>

<p>I think it’s time for a version of that book about technology, with a chapter on web development: <em>The Small Web is Beautiful: A Study of Web Development as if People Mattered.</em> Until someone writes that, this essay will have to do.</p>

<p>There are two aspects of this: first, <strong>small teams and companies</strong>. I’m not going to talk much about that here, but <a href="https://basecamp.com/books">Basecamp</a> and many others have. What I’m going to focus on in this essay is <strong>small websites and architectures</strong>.</p>

<p>I’m not the first to talk about the “small web”, but, somewhat surprisingly, only a few people have discussed it using that term. Here are the main web pages I can find that do:</p>

<ul>
  <li><a href="https://neustadt.fr/essays/the-small-web/">Rediscovering the Small Web</a> by Parimal Satyal: a fabulous article about the joy of small, independent (and sometimes retro) websites in contrast to the “commercial web”.</li>
  <li><a href="https://ar.al/2020/08/07/what-is-the-small-web/">What is the Small Web?</a>, by Aral Balkan of the Small Technology Foundation: more of a manifesto against the surveillance of Big Tech than something concrete, but still interesting.</li>
</ul>

<p>Why aim small in this era of fast computers with plenty of RAM? A number of reasons, but the ones that are most important to me are:</p>

<ul>
  <li>Fewer moving parts. It’s easier to create more robust systems and to fix things when they do go wrong.</li>
  <li>Small software is faster. Fewer bits to download and clog your computer’s memory.</li>
  <li>Reduced power consumption. This is important on a “save the planet” scale, but also on the very local scale of increasing the battery life of your phone and laptop.</li>
  <li>The light, frugal aesthetic. That’s personal, I know, but as you’ll see, I’m not alone.</li>
</ul>

<p>So let’s dive in. I want to cover a bunch of different angles, each with its own subheading.</p>

<h2 id="small-software">Small software</h2>

<p>If we’re going to talk about a small web, we need to start with small <em>software</em>.</p>

<p>As a teen, I learned to program using x86 assembly and <a href="https://en.wikipedia.org/wiki/Forth_(programming_language)">Forth</a> – perhaps odd choices, but my dad was heavily into Forth, and I loved how the language was so simple I could write <a href="https://github.com/benhoyt/third">my own bootstrapped compiler</a>.</p>

<p>In terms of career, I started as an embedded programmer – not as in “embedded Linux” but as in microcontrollers where 16KB of RAM was generous. My current laptop has 16GB of RAM, and that’s not a lot by today’s standards. We were building IP-networked products with <em>one millionth</em> the amount of RAM. Those kinds of micros are as cheap as chips (ahem), and still widely used for small electronic devices, sensors, internet-of-things products, and so on.</p>

<p>You have to think about every byte, compile with size optimizations enabled, and reuse buffers. It’s a very different thing from modern web development, where a JavaScript app compiles “down” to a 1MB bundle, or a single Python object header is 16 bytes before you’ve even got any data, or a Go hello-world binary is 2MB even before you’ve added any real code.</p>

<p>How do you create small programs? I think the main thing is that you have to <em>care about size</em>, and most of us don’t think we have time for that. Apart from embedded development, there’s an entire programming subculture called the <a href="https://en.wikipedia.org/wiki/Demoscene">demoscene</a> that cares about this. They have competitions for the smallest 4KB demos: who can pack the most graphical punch into 4096 bytes of executable. That’s smaller than many favicons! (<a href="https://www.youtube.com/watch?v=jB0vBmiTr6o">Elevated</a> and <a href="https://www.youtube.com/watch?v=RCh3Q08HMfs">cdak</a> are two of the highest-rated 4K demos.) Many demosceners go on to become game developers.</p>

<p>It’s not just about executable size … when you’re developing your next command line tool, if you use Go or Rust or even C, your program will be much faster, smaller, and use less memory than a Python or Java equivalent. And easier to install. If you don’t understand why, please do learn. (It’s out of scope for this essay, but to summarize: Go, Rust, and C compile to ready-to-execute machine code, don’t carry around a virtual machine, and don’t have memory overhead for objects like integers.)</p>

<p>But why not apply some of the same principles to web development? In the web world, I think the main trick is to be careful what dependencies you include, and also what dependencies <em>they</em> pull in. In short, know <code>node_modules</code> – or maybe better, <em>no</em> <code>node_modules</code>. More about this <a href="#fewer-dependencies">below</a>.</p>

<p>Niklaus Wirth of Pascal fame wrote a famous paper in 1995 called <a href="https://cr.yp.to/bib/1995/wirth.pdf">A Plea for Lean Software [PDF]</a>. His take is that “a primary cause for the complexity is that software vendors uncritically adopt almost any feature that users want”, and “when a system’s power is measured by the number of its features, quantity becomes more important than quality”. He goes on to describe Oberon, a computer language (which reminds me of Go in several ways) and an operating system that he believes helps solve the complexity problem. Definitely wirth a read!</p>

<p>I’ve been mulling over this for a number of years – back in 2008 I wrote a sarcastic dig at how bloated Adobe Reader had become: <a href="https://blog.brush.co.nz/2008/07/adobe-reader-9/">Thank you, Adobe Reader 9!</a> It was a 33MB download and required 220MB of hard drive space even in 2008 (it’s now a 150MB download, and I don’t know how much hard drive space it requires, because I don’t install it these days).</p>

<p>But instead of just complaining, how do we actually solve this problem? Concretely, I think we need to start doing the following:</p>

<ul>
  <li>Care about size: this sounds obvious, but things only change when people think they’re important.</li>
  <li>Measure: both your executable’s size, and your program’s memory usage. You may want to measure over time, and make it a blocking issue if the measurements grow more than <em>x</em>% in a release. Or you could hold a memory-reduction sprint every so often.</li>
  <li>Language: choose a backend language that has a chance, for example Rust, C or C++, or for servers, Go. These languages aren’t right for everything (like data transformation scripts), but they produce small executables, and they’re good for CLIs and desktop apps.</li>
  <li>Remove: cut down your feature set. Aim for a small number of high-quality features. My car can’t fly or float, and that’s okay – it drives well.</li>
  <li>Say no to new features: unless they really fit your philosophy, or add more than they cost over the lifetime of your project.</li>
  <li>Dependencies: understand the size and complexity of each dependency you pull in. Use only built-in libraries if you can.</li>
</ul>

<h2 id="small-websites">Small websites</h2>

<p>I’m glad there’s a growing number of people interested in small websites.</p>

<p>A few months ago there was a sequence of posts to Hacker News about various “clubs” you could post your small website on: the <a href="https://1mb.club/">1MB Club</a> (<a href="https://news.ycombinator.com/item?id=25151773">comments</a>), <a href="https://512kb.club/">512KB Club</a> (<a href="https://news.ycombinator.com/item?id=25450451">comments</a>), <a href="https://250kb.club/">250KB Club</a> (<a href="https://news.ycombinator.com/item?id=25176663">comments</a>), and even the <a href="https://10kbclub.com/">10KB Club</a> (<a href="https://news.ycombinator.com/item?id=25556860">comments</a>). I think those are a fun indicator of renewed interested in minimalism, but I will say that raw size isn’t enough – a 2KB site with no real content isn’t much good, and a page with 512KB of very slow JavaScript is worse than a snappy site with 4MB of well-chosen images.</p>

<p>Some of my favourite small websites are:</p>

<p><a href="https://news.ycombinator.com/news">Hacker News</a>: I personally like the minimalist, almost brutalist design, but I love its lightness even more. I just downloaded the home page, and loading all resources transfers only 21KB (61KB uncompressed). Even pages with huge comment threads only transfer about 100KB of compressed data, and load quickly. Reddit has become such a bloated mess in comparison. Hacker News, never change!</p>

<p><a href="https://lobste.rs/">Lobsters</a>: a similar news-and-voting site, with slightly more “modern” styling. It uses some JavaScript and profile icons, but it’s still clean and fast, and the total transfer size for the homepage is only 102KB. You just don’t need megabytes to make a good website.</p>

<p><a href="https://sourcehut.org/">Sourcehut</a>: I like the concept behind Drew DeVault’s business, but I love how small and anti-fluff the website is. He has set up a mini-site called the <a href="https://forgeperf.org/">Software Forge Performance Index</a> that tracks size and browser performance of the prominent source code websites – Sourcehut is far and away the lightest and fastest. Even his homepage is only 81KB, including several screenshot thumbnails.</p>

<p><a href="https://sqlite.org/">SQLite</a>: not only is SQLite a small, powerful SQL database engine, the website is fantastically small and content-rich. Even their 7000-word <a href="https://sqlite.org/testing.html">page about testing</a> is only 70KB. How do they do this? It’s not magic: focus on high-quality textual content, minimal CSS, no JavaScript, and very few images (a small logo and some SVGs).</p>

<p><a href="https://lwn.net/">LWN</a>: I’m a little biased, because I’ve written <a href="https://lwn.net/Archives/GuestIndex/#Hoyt_Ben">articles</a> for them, but they’re an excellent website for Linux and programming news. Extremely high-quality technical content (and a high bar for authors). They’re definitely niche, and have a “we focus on quality content, not updating our CSS every year” kind of look – they’ve been putting out great content for 23 years! Their homepage only downloads 44KB (90KB uncompressed).</p>

<p><a href="https://danluu.com/">Dan Luu’s blog</a>: this is one of the more hardcore examples. His inline CSS is only about 200 bytes (the pages are basically unstyled), and his HTML source code doesn’t use any linefeed characters. Kind of a fun point, although then he goes on to load 20KB of Google Analytics JavaScript…</p>

<p>As a friend pointed out, those websites have something of an “anti-aesthetic aesthetic”. I confess to not minding that at all, but on the other hand, small doesn’t have to mean ugly. More and more personal blogs and websites have adopted a small web approach but are more typographically appealing:</p>

<ul>
  <li><a href="https://lucumr.pocoo.org/">Armin Ronacher’s Thoughts and Writings</a></li>
  <li><a href="https://nullprogram.com/">Chris Wellons’ “Null program” blog</a></li>
  <li><a href="http://eradman.com/">Eric Radman’s BSD and SQL blog</a></li>
  <li><a href="https://hugotunius.se/">Hugo Tunius’ programming blog</a></li>
  <li><a href="https://prog21.dadgum.com/">James Hague’s “Programming in the …</a></li></ul></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://benhoyt.com/writings/the-small-web-is-beautiful/">https://benhoyt.com/writings/the-small-web-is-beautiful/</a></em></p>]]>
            </description>
            <link>https://benhoyt.com/writings/the-small-web-is-beautiful/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26305585</guid>
            <pubDate>Mon, 01 Mar 2021 17:44:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Giving Ada a Chance]]>
            </title>
            <description>
<![CDATA[
Score 166 | Comments 208 (<a href="https://news.ycombinator.com/item?id=26302344">thread link</a>) | @jayp1418
<br/>
March 1, 2021 | https://ajxs.me/blog/Giving_Ada_a_chance.html | <a href="https://web.archive.org/web/*/https://ajxs.me/blog/Giving_Ada_a_chance.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
			<header>
				<a id="header-link" href="https://ajxs.me/">
					
				</a>
			</header>
			<section id="blog-entry">
	
	<div>
		<p><span>TL;DR:</span> Ada is an extremely interesting and robust programming language that has a lot to offer modern developers of system 
	and bare-metal software. At very least, Ada presents many interesting ideas that designers of modern programming languages could stand to learn much from. If you want a 30 second version of this article, check out the 
	<a href="#practical_example">practical example</a> that I provide for a comparison of Ada with C.</p>

<p>
	Much of the technical material presented in this article is available as part of <a href="https://wiki.osdev.org/User:Ajxs">my contributions</a> to <a href="https://wiki.osdev.org/Main_Page">osdev.org</a>
</p>
<p>
	I consider myself a rational man. While I may believe in an entirely deterministic model of the universe, I certainly
	do not believe it to be guided by any conscious process.
	I do not believe in destiny. This absence of guidance makes such fortuitous occurrences as the one I will discuss all
	the more extraordinary, and for this I am all the more grateful.
</p>

<h2>A Chance Collision</h2>
<p>
	By no deliberate design of my own, I happen to live close to a university. Not in the kind of ‘University town’ common
	to much of Europe or the United States, but in the densely packed suburban sprawl of the inner-city. My regular walk
	to and from the local shopping centre takes me past several of the buildings belonging to the highly regarded
	engineering faculty of the aforementioned University.
</p>
<p>
	Making my way home one serendipitous afternoon, I happened across a sizeable stack of books sitting on the curb
	outside one of the University’s engineering buildings. The university was ostensibly in the process of liquidating its stockpile
	of old engineering books, and had left them in a pile for the local council to collect. Amongst material covering a
	wide variety of academic disciplines, two books in particular caught my eye: <i>Building Parallel, Embedded, and
	Real-Time Applications with Ada</i>, and <i>Concurrent and Real-Time Programming in Ada</i>.
</p>
<p>
	I had heard of Ada before. I understood that it came from a pedigree of languages developed for the United States
	military, and that it still occupied a niche in the development of safety-critical applications, nothing more.
	Curious, I threw the books in my bag and off I went.
</p>


<h2>Exceeding My Expectations</h2>
<p>Admittedly, I had pictured Ada’s syntax resembling the uncompromising verbosity and rigid construction of COBOL, or
	perhaps the Lovecraftian hieroglyphics of Fortran’s various eldritch incarnations. Turning the pages, I was pleasantly
	surprised by modern constructs associated with modern high-level languages such as ranges, slicing and
	exception-handling. The syntax — Admittedly verbose by modern standards<sup><a href="#footnote_3">3</a></sup> — seemed deliberately and purposefully
	constructed to make the language comprehensible at a glance.</p>
<p>The fact that Ada was designed with embedded-software in mind was of particular interest to me. I already had some
	limited experience with bare-metal development on the x86 and ARM platforms using C and assembly, so the prospect of
	using higher-level constructs on bare-metal seemed promising to me.</p>

<h2>Not the Camel You Expected</h2>
<p>A common pejorative refrain directed at Ada by its many detractors is that it is a language “designed by committee”,
	or even worse, a language “designed by committee <i>for the military</i>”<sup><a href="#footnote_1">1</a></sup>. The implication of which being that (so-called)
	design by committee precludes it from any real-world practicality. I contend that it is better to design a language to fit an
	existing problem domain than to pick your weapon of choice and set out in search of new problem domains to apply it
	to<sup><a href="#footnote_2">2</a></sup>. I will spare readers a detailed retelling of Ada’s conception within the Department of Defence’s <a href="http://archive.adaic.com/pol-hist/history/holwg-93/holwg-93.htm">‘High Order
	Language Working Group’</a>, save to say that the Ada programming language was born of the need for single, unified
	higher-level language suitable for use in the multitude of Real-Time Embedded systems developed by the DoD<sup><a href="#footnote_4">4</a></sup>. In the
	wise words of the working-group’s chair, Colonel William A. Whitaker: “It was concluded that no existing language
	could be adopted as a single common high order language for the DoD, but that a single language meeting essentially
	all the requirements was both feasible and desirable.”. If such a thing was indeed feasible, the DoD’s deep pockets
	would help it bring it into existence. Ironically, given its status as the de-facto standard language of modern embedded-system development, the C language was considered unsuitable for this purpose: “When Bell Labs were
	invited to evaluate C against the DoD requirements, they said that there was no chance of C meeting the requirements
	of readability, safety, etc.” (Whitaker, 1993). After its successful implementation, in what would prove a controversial decision, the DoD would go so far as to mandate 
	the use of Ada for all in-house software engineering.</p>

<h2>So What Makes It Special?</h2>
<p>
	Ada has many useful features that are of particular interest for low-level programming and operating-system development. One
	feature in particular that impressed me greatly was Ada’s <i>representation clauses</i> (see below). They provide a highly granular way to define the
	in-memory representation of low-level data structures. I was very quickly able to adapt my own long suffering operating-system development project to Ada, improving the
	quality of my codebase greatly in the process. The following section details some of Ada’s features:
</p>

<h3>Custom Types</h3>
<p>
	In addition to being a strongly typed language, Ada allows for the definition of new scalar, enumerated and record types.
	Custom primitive types can also be constrained to a predefined range of values.
	The example below demonstrates the definition of a new integer type based upon Ada’s native <code>Natural</code> type, restricted
	to a predefined range.
	The use of the subtype directive informs the compiler that other variables of the <code>Natural</code> type are compatible with
	the newly defined subtype.
</p>

<div><pre><span></span><span>VGA_COL_COUNT</span> <span>:</span> <span>constant</span> <span>:=</span> <span>80</span><span>;</span>
<span>VGA_ROW_COUNT</span> <span>:</span> <span>constant</span> <span>:=</span> <span>24</span><span>;</span>

<span>subtype</span> <span>Col</span> <span>is</span> <span>Natural</span> <span>range</span> <span>0</span> <span>..</span> <span>VGA_COL_COUNT</span> <span>-</span> <span>1</span><span>;</span>
<span>subtype</span> <span>Row</span> <span>is</span> <span>Natural</span> <span>range</span> <span>0</span> <span>..</span> <span>VGA_ROW_COUNT</span> <span>-</span> <span>1</span><span>;</span>
</pre></div>

<p>
	The below example illustrates the creation of incompatible custom integer types. While their base type and range
	constraints are identical, Ada treats both as separate, incompatible types. An assignment of a variable of one type
	to the value of another is illegal, and will trigger a compile-time error.
</p>

<div><pre><span></span><span>type</span> <span>Integer_1</span> <span>is</span> <span>range</span> <span>1</span> <span>..</span> <span>10</span><span>;</span>
<span>type</span> <span>Integer_2</span> <span>is</span> <span>range</span> <span>1</span> <span>..</span> <span>10</span><span>;</span>
<span>A</span> <span>:</span> <span>Integer_1</span> <span>:=</span> <span>8</span><span>;</span>
<span>B</span> <span>:</span> <span>Integer_2</span> <span>:=</span> <span>A</span><span>;</span> <span>-- illegal!</span>
</pre></div>

<p>
	The following example demonstrates the creation of a custom enumerated type. It also demonstrates a subtype of an enumerated type with a constrained range of values.
</p>

<div><pre><span></span><span>type</span> <span>Day_Of_Week</span> <span>is</span> <span>(</span><span>Monday</span><span>,</span> <span>Tuesday</span><span>,</span>
  <span>Wednesday</span><span>,</span> <span>Thursday</span><span>,</span> <span>Friday</span><span>,</span> <span>Saturday</span><span>,</span> <span>Sunday</span><span>);</span>

<span>subtype</span> <span>Work_Day</span> <span>is</span> <span>Day_Of_Week</span> <span>range</span> <span>Monday</span> <span>..</span> <span>Friday</span><span>;</span>
</pre></div>


<p>
	A variable with the type of <code>Work_Day</code> is restricted to its constrained range. Any attempt to assign a value outside
	of this range to a variable of this type will raise a <code>Constraint_Error</code> exception at runtime.
</p>

<h2>Representation Clauses</h2>
<p>
	Ada allows for explicitly defining the in-memory representation of scalar and compound types. The following example
	demonstrates the definition of a record type (equivalent to structures in C), as well as its associated
	representation in memory.
</p>

<div><pre><span></span><span>----------------------------------------------------------------------------</span>
<span>--  The format of the System Table Descriptor pointer used by the processor</span>
<span>--  to load descriptor tables like the GDT and IDT.</span>
<span>----------------------------------------------------------------------------</span>
<span>type</span> <span>System_Table_Descriptor</span> <span>is</span>
   <span>record</span>
      <span>Size</span>   <span>:</span> <span>Unsigned_16</span><span>;</span>
      <span>Offset</span> <span>:</span> <span>System</span><span>.</span><span>Address</span><span>;</span>
   <span>end record</span>
<span>with</span> <span>Size</span> <span>=&gt;</span> <span>48</span><span>;</span>
<span>for</span> <span>System_Table_Descriptor</span> <span>use</span>
   <span>record</span>
      <span>Size</span>   <span>at</span> <span>0</span> <span>range</span> <span>0</span>  <span>..</span> <span>15</span><span>;</span>
      <span>Offset</span> <span>at</span> <span>0</span> <span>range</span> <span>16</span> <span>..</span> <span>47</span><span>;</span>
   <span>end</span> <span>record</span><span>;</span>
</pre></div>

<p>
	The <code>Size</code> aspect specifier instructs the compiler that the <code>System_Table_Descriptor</code> type must be 48 bits in size. The
	record representation clause instructs the compiler as to the required layout of this record type in memory. This
	example specifies that the <code>Size</code> member should occupy bits 0 to 15, and the <code>Offset</code> member should occupy bits 16 to
	47. This feature is analogous to C’s bit-fields. The following example demonstrates defining the in-memory
	representation of an enumerated type.
</p>

<div><pre><span></span><span>----------------------------------------------------------------------------</span>
<span>--  The privilege level for a particular descriptor.</span>
<span>--  These correspond to the 'protection ring' that this descriptor is</span>
<span>--  accessible from.</span>
<span>----------------------------------------------------------------------------</span>
<span>type</span> <span>Descriptor_Privilege_Level</span> <span>is</span> <span>(</span>
   <span>Ring_0</span><span>,</span>
   <span>Ring_1</span><span>,</span>
   <span>Ring_2</span><span>,</span>
   <span>Ring_3</span>
<span>)</span>
<span>with</span> <span>Size</span> <span>=&gt;</span> <span>2</span><span>;</span>
<span>for</span> <span>Descriptor_Privilege_Level</span> <span>use</span> <span>(</span>
   <span>Ring_0</span> <span>=&gt;</span> <span>0</span><span>,</span>
   <span>Ring_1</span> <span>=&gt;</span> <span>1</span><span>,</span>
   <span>Ring_2</span> <span>=&gt;</span> <span>2</span><span>,</span>
   <span>Ring_3</span> <span>=&gt;</span> <span>3</span>
<span>);</span>
</pre></div>


<p>
	The <code>Size</code> aspect specifier instructs the compiler that the <code>Descriptor_Privilege_Level</code> type must be 2 bits in size.
	The representation clause instructs the compiler as to required representation of each possible value of the
	enumerated type in memory. In this example the value of <code>Ring_0</code> will be represented by a value of <code>0x0</code> in memory, the
	value of <code>Ring_1</code> will be represented by <code>0x1</code>, and so on.
</p>

<h2 id="practical_example">A Practical Example</h2>

<p>
	The following example, and accompanying comparison with C, demonstrates the configuration of a hypothetical UART device by interfacing with an 8-bit memory-mapped configuration register. 
	This example has been adapted from a presentation by AdaCore viewable <a href="https://www.youtube.com/watch?v=qvmDqbuQe-M">here</a>.
</p>

<div><pre><span></span><span>with</span> <span>System.Storage_Elements</span><span>;</span> <span>use</span> <span>System.Storage_Elements</span><span>;</span>

<span>-------------------------------------------------------------------------------</span>
<span>--  Main</span>
<span>-------------------------------------------------------------------------------</span>
<span>procedure</span> <span>Main</span> <span>is</span>
   <span>----------------------------------------------------------------------------</span>
   <span>--  Baud rate type.</span>
   <span>----------------------------------------------------------------------------</span>
   <span>type</span> <span>Baud_Rate_T</span> <span>is</span> <span>(</span><span>b_9600</span><span>,</span> <span>b_14400</span><span>,</span> <span>b_115200</span><span>);</span></pre></div></div></section></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://ajxs.me/blog/Giving_Ada_a_chance.html">https://ajxs.me/blog/Giving_Ada_a_chance.html</a></em></p>]]>
            </description>
            <link>https://ajxs.me/blog/Giving_Ada_a_chance.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26302344</guid>
            <pubDate>Mon, 01 Mar 2021 13:01:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[SolidRun 1U 2 node Arm Server]]>
            </title>
            <description>
<![CDATA[
Score 82 | Comments 50 (<a href="https://news.ycombinator.com/item?id=26302237">thread link</a>) | @cameron_b
<br/>
March 1, 2021 | https://www.servethehome.com/solidrun-honeycomb-lx2-server-announced-1u-2-node-arm/ | <a href="https://web.archive.org/web/*/https://www.servethehome.com/solidrun-honeycomb-lx2-server-announced-1u-2-node-arm/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <!-- image --><div><figure><a href="https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server.jpg" data-caption="SolidRun Honeycomb LX2 Server"><img width="696" height="448" src="https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-696x448.jpg" srcset="https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-696x448.jpg 696w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-400x258.jpg 400w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-652x420.jpg 652w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server.jpg 800w" sizes="(max-width: 696px) 100vw, 696px" alt="SolidRun Honeycomb LX2 Server" title="SolidRun Honeycomb LX2 Server"></a><figcaption>SolidRun Honeycomb LX2 Server</figcaption></figure></div>
            <!-- content --><p>SolidRun has a new development in their NXP Layerscape LX2160A based systems this week. The new SolidRun HoneyComb LX2 Server packages two of their familiar HoneyComb LX2K boards into a single chassis. This includes a power supply and accommodations for 2.5″ or 3.5″ SATA storage. While the board at the core of this system is not a new part this does mark a milestone for deploy-ability of Arm systems at a tier that does not have a lot of other attention.<span id="more-51095"></span></p>
<h2>SolidRun HoneyComb LX2 Server Background</h2>
<p>To take a step back and look at where this system lands, the Arm ecosystem currently has a lot of activity at the top and bottom of the price and performance spectrum, with not a lot of options in the middle. That is where SolidRun’s new dual-node server aims to compete.</p>
<figure id="attachment_51102" aria-describedby="caption-attachment-51102"><a href="https://www.servethehome.com/solidrun-honeycomb-lx2-server-announced-1u-2-node-arm/solidrun-honeycomb-lx2-server-front/" rel="attachment wp-att-51102"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-Front.jpg" alt="SolidRun Honeycomb LX2 Server Front" width="1110" height="722" srcset="https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-Front.jpg 1110w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-Front-400x260.jpg 400w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-Front-800x520.jpg 800w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-Front-696x453.jpg 696w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-Front-1068x695.jpg 1068w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-Front-646x420.jpg 646w" sizes="(max-width: 1110px) 100vw, 1110px"></a><figcaption id="caption-attachment-51102">SolidRun HoneyComb LX2 Server Front</figcaption></figure>
<p>Raspberry Pi systems between $5 and $100 have shipped over 30 million units. Developer kits such as these have earned a level of ubiquity in learning and DIY spaces for making it really easy to try out new concepts in programming or “physical computing.” While the Raspberry Pi Foundation has demonstrated using the Raspberry Pi 4 in production, including running Raspberry Pi 4s to serve their website for the launch of the Pi 4, that is not quite what they are designed for. In that example, the Foundation included their own hardware between more performant load balancers and database machines as a demonstration of their very capable new devices, not quite as a shot across the bow to the Xeons they may have replaced.</p>
<figure id="attachment_49430" aria-describedby="caption-attachment-49430"><a href="https://www.servethehome.com/myelectronics-nl-apple-mac-mini-and-raspberry-pi-rack-review/myelectronics-nl-apple-mac-mini-and-raspberry-pi-rack-4/" rel="attachment wp-att-49430"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2020/12/MyElectronics.nl-Apple-Mac-Mini-and-Raspberry-Pi-Rack-4.jpg" alt="MyElectronics.nl Apple Mac Mini And Raspberry Pi Rack 4" width="800" height="534" srcset="https://www.servethehome.com/wp-content/uploads/2020/12/MyElectronics.nl-Apple-Mac-Mini-and-Raspberry-Pi-Rack-4.jpg 800w, https://www.servethehome.com/wp-content/uploads/2020/12/MyElectronics.nl-Apple-Mac-Mini-and-Raspberry-Pi-Rack-4-400x267.jpg 400w, https://www.servethehome.com/wp-content/uploads/2020/12/MyElectronics.nl-Apple-Mac-Mini-and-Raspberry-Pi-Rack-4-696x465.jpg 696w, https://www.servethehome.com/wp-content/uploads/2020/12/MyElectronics.nl-Apple-Mac-Mini-and-Raspberry-Pi-Rack-4-629x420.jpg 629w" sizes="(max-width: 800px) 100vw, 800px"></a><figcaption id="caption-attachment-49430">MyElectronics.nl Apple Mac Mini And Raspberry Pi Rack</figcaption></figure>
<p>On the other end of the spectrum, several orders of magnitude away, Ampere Altra is making a case for permanently replacing some of those Xeons for certain customers. Ampere’s price-to-performance numbers are impressive, as are figures like 160 cores for a 2 socket server and 128 lanes of PCIe Gen4 per socket. This underscores that this is a platform designed for cloud providers and hyperscalers. You can check out STH’s <a href="https://www.servethehome.com/ampere-altra-wiwynn-mt-jade-server-review-the-most-significant-arm-server/">Ampere Altra Wiwynn Mt. Jade Server Review</a> to learn more.</p>
<figure id="attachment_49505" aria-describedby="caption-attachment-49505"><a href="https://www.servethehome.com/ampere-altra-wiwynn-mt-jade-server-review-the-most-significant-arm-server/amd-epyc-ampere-altra-intel-xeon-cascade-lake-small-2/" rel="attachment wp-att-49505"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2020/12/AMD-EPYC-Ampere-Altra-Intel-Xeon-Cascade-Lake-Small-1.jpg" alt="AMD EPYC Ampere Altra Intel Xeon Cascade Lake Small" width="800" height="487" srcset="https://www.servethehome.com/wp-content/uploads/2020/12/AMD-EPYC-Ampere-Altra-Intel-Xeon-Cascade-Lake-Small-1.jpg 800w, https://www.servethehome.com/wp-content/uploads/2020/12/AMD-EPYC-Ampere-Altra-Intel-Xeon-Cascade-Lake-Small-1-400x244.jpg 400w, https://www.servethehome.com/wp-content/uploads/2020/12/AMD-EPYC-Ampere-Altra-Intel-Xeon-Cascade-Lake-Small-1-696x424.jpg 696w, https://www.servethehome.com/wp-content/uploads/2020/12/AMD-EPYC-Ampere-Altra-Intel-Xeon-Cascade-Lake-Small-1-690x420.jpg 690w" sizes="(max-width: 800px) 100vw, 800px"></a><figcaption id="caption-attachment-49505">AMD EPYC Ampere Altra Intel Xeon Cascade Lake Small</figcaption></figure>
<p>There is enough intrigue over the top-of-line Arm servers that developers wonder if there is not a better workstation-level/ or entry/mid-range server system. A prospective Arm developer would want something between $100 for a dev board and $4000 per socket for a screaming 2U. (Apologies to the $800 32-core 1.7GHz SKU at the other end of the Ampere Altra line.)</p>
<p>SolidRun has been positioning itself in this space for several years. Its LX2 products continue in active development. HoneyComb’s maturity dovetails with the work SolidRun has been doing on two fronts. It is servicing its niche and driving specific development (for example their high bandwidth networking) but return their development work to benefit the ease of adoption from mainline Linux.</p>
<figure id="attachment_51103" aria-describedby="caption-attachment-51103"><a href="https://www.servethehome.com/solidrun-honeycomb-lx2-server-announced-1u-2-node-arm/solidrun-honeycomb-lx2-board-with-annotations/" rel="attachment wp-att-51103"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-HoneyComb-LX2-Board-with-Annotations.jpg" alt="SolidRun HoneyComb LX2 Board With Annotations" width="1030" height="789" srcset="https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-HoneyComb-LX2-Board-with-Annotations.jpg 1030w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-HoneyComb-LX2-Board-with-Annotations-392x300.jpg 392w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-HoneyComb-LX2-Board-with-Annotations-800x613.jpg 800w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-HoneyComb-LX2-Board-with-Annotations-696x533.jpg 696w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-HoneyComb-LX2-Board-with-Annotations-548x420.jpg 548w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-HoneyComb-LX2-Board-with-Annotations-80x60.jpg 80w" sizes="(max-width: 1030px) 100vw, 1030px"></a><figcaption id="caption-attachment-51103">SolidRun HoneyComb LX2 Board With Annotations</figcaption></figure>
<p>The HoneyComb LX2K is a COM Express Type 7 carrier for an NXP Layerscape LX2160A System-on-Chip with 16x Arm A72 cores running up to 2GHz. The COM Express Type 7 module has dual-channel DDR4 in SODIMMs for up to 64GB total. The carrier board exposes 4x SATA, one M.2 and one Micro SD slot for storage, four SFP+ (directly from the SoC) and one RJ45 at 1Gb for networking, dual USB 3.0 ports, and an open-ended PCIe x8 slot on a standard mini ITX form factor using standard ATX power. There is even the ATX standard power indicator and reset button header. The goal seems to be to create a platform that is easy to integrate into existing chassis and systems.</p>
<figure id="attachment_51101" aria-describedby="caption-attachment-51101"><a href="https://www.servethehome.com/solidrun-honeycomb-lx2-server-announced-1u-2-node-arm/solidrun-honeycomb-lx2-server/" rel="attachment wp-att-51101"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server.jpg" alt="SolidRun Honeycomb LX2 Server" width="800" height="515" srcset="https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server.jpg 800w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-400x258.jpg 400w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-696x448.jpg 696w, https://www.servethehome.com/wp-content/uploads/2021/02/SolidRun-Honeycomb-LX2-Server-652x420.jpg 652w" sizes="(max-width: 800px) 100vw, 800px"></a><figcaption id="caption-attachment-51101">SolidRun HoneyComb LX2 Server</figcaption></figure>
<p>In the context of running highly deployable servers to replace Xeons, this may not be quite the same level of hardware maturity. On the other hand, having a dual-node 1U platform that one can deploy in racks and do Arm development is a big step forward. Not only do we get a bigger CPU, but we also get the ability to use a lot of standard components which will help boost the ecosystem as well. Adding a chassis with cooling and power may not seem like a big deal, but there is a large segment of the market that does not want to search for or cobble together these solutions. Instead, if the nodes are already in a 1U chassis, that lowers the friction and barriers to entry for development. This is still not a $400-500 PC or Atom server. Still, it is an important step in the right direction.</p>
<h2>Final Words</h2>
<p>SolidRun’s HoneyComb LX2K is a platform that is accessible and capable for development on 64-bit Arm architecture as a workstation. It is also becoming more deployment-ready for appliance-type power-conscious edge applications with the 1U chassis. Developers interested in using the HoneyComb board in production have faced the challenge of trying to rack-mount an ITX board. Bamboo Systems in the UK have an answer for developers ready to deploy an 8-node 1U, but that raises the bar back up the scale of Ampere Altra. The challenge with small server nodes is that as one scales, it tends to be more efficient having larger nodes. AWS Gravition2 is an important product for the industry, but it is also tied to the AWS ecosystem. The new availability to deploy two nodes in 1U targets the intersection of accessibility and capability for those interested to kick the tires on Arm in the wild.</p>
<p>We look forward to getting our hands on the dual sled system and doing an in-depth review. We will also pair that with approaching the HoneyComb Board as a workstation for daily-driver use. Leave a comment if you would like to see specific applications explored for either system.</p>
        </div></div>]]>
            </description>
            <link>https://www.servethehome.com/solidrun-honeycomb-lx2-server-announced-1u-2-node-arm/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26302237</guid>
            <pubDate>Mon, 01 Mar 2021 12:46:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Applicative Parsing]]>
            </title>
            <description>
<![CDATA[
Score 92 | Comments 20 (<a href="https://news.ycombinator.com/item?id=26301543">thread link</a>) | @gbrown_
<br/>
March 1, 2021 | https://jobjo.github.io/2019/05/19/applicative-parsing.html | <a href="https://web.archive.org/web/*/https://jobjo.github.io/2019/05/19/applicative-parsing.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
      <p><a href="https://en.wikipedia.org/wiki/Parser_combinator">Parser combinators</a> are
sets of functions for building parsers in a composable fashion. Haskell’s
<a href="http://hackage.haskell.org/package/parsec">Parsec library</a> and OCaml’s
<a href="https://github.com/inhabitedtype/angstrom">Angstrom</a> are two examples.
Both of these libraries expose <em>monadic</em> interfaces for
describing context-sensitive grammars. This post looks at implementing a more
restricted parsing library, structured around <a href="https://en.wikipedia.org/wiki/Applicative_functor">applicative
functors</a> rather
than monads.</p>

<p>What could justify giving up on monads? Depending on the design, one may get
a few things in return. In this exercise, the aim is for an API with the following
features:</p>

<ol>
  <li>The ability to extract all valid symbols from a parser.</li>
  <li>Allow some form of pretty printing.</li>
  <li>Support multiple evaluation strategies (e.g. backtracking and non-backtracking).</li>
</ol>

<p>To see why (1) is not possible to accomplish with monads, consider a parser
constructed using the monadic <em>bind-operator</em>:</p>



<p>Here, <code>f</code> is a function of the form <code>'a -&gt; 'b parser</code>; that means we don’t
know what sort of parser it produces until it’s provided with a value. Therefore,
we cannot infer all possible symbols consumed by those parsers. The same
reasoning applies to pretty printing.</p>

<h3 id="designing-a-parser-type">Designing a parser type</h3>

<p>The essence of a parser is a function with a type analogous to:</p>

<div><div><pre><code><span>char</span> <span>list</span> <span>-&gt;</span> <span>(</span><span>'</span><span>a</span> <span>*</span> <span>char</span> <span>list</span><span>)</span> <span>option</span>
</code></pre></div></div>

<p>A parser takes a list of characters as input, and, when successful, returns a
parsed value along with the remaining input.</p>

<p>This representation, however, falls short of supporting symbol
extraction, pretty printing, or allowing for multiple evaluation strategies.
To accommodate for those we’d have to embellish the type with more context.
The problem is we don’t necessarily know the complete feature set upfront.
Every time a request for some new capability comes in – be it error reporting,
logging or something else – we would have to go back and change the definition
to accommodate for the new functionality.</p>

<p>Rather than trying to anticipate all use cases upfront, an alternative
approach is to choose a representation that preserves as much structure as
possible, so that alternative interpreters may be added later on. To do that,
we’re effectively going to enumerate the set of parsers, and ways of
combining them, by defining a type for representing an abstract syntax tree
(AST). To this purpose, we’ll use a
<a href="https://en.wikipedia.org/wiki/Generalized_algebraic_data_type">GADT</a>, that
also expresses that different parsers are indexed by different types. The
initial constructors are split into two sets – primitive ones (the
leaf nodes of the tree), and combinators for composing parsers:</p>

<div><div><pre><code><span>type</span> <span>'</span><span>a</span> <span>t</span> <span>=</span>
  <span>(* Primitive parsers *)</span>
  <span>|</span> <span>Fail</span>      <span>:</span> <span>string</span>            <span>-&gt;</span> <span>'</span><span>a</span> <span>t</span>
  <span>|</span> <span>Empty</span>     <span>:</span>                       <span>unit</span> <span>t</span>
  <span>|</span> <span>Return</span>    <span>:</span> <span>'</span><span>a</span>                <span>-&gt;</span> <span>'</span><span>a</span> <span>t</span>
  <span>|</span> <span>Symbol</span>    <span>:</span> <span>char</span>              <span>-&gt;</span> <span>char</span> <span>t</span>
  <span>(* Composition - applicative *)</span>
  <span>|</span> <span>Map</span>       <span>:</span> <span>(</span><span>'</span><span>a</span> <span>-&gt;</span> <span>'</span><span>b</span><span>)</span> <span>*</span> <span>'</span><span>a</span> <span>t</span> <span>-&gt;</span> <span>'</span><span>b</span> <span>t</span>
  <span>|</span> <span>Product</span>   <span>:</span> <span>'</span><span>a</span> <span>t</span> <span>*</span> <span>'</span><span>b</span> <span>t</span>       <span>-&gt;</span> <span>(</span><span>'</span><span>a</span> <span>*</span> <span>'</span><span>b</span><span>)</span> <span>t</span>
  <span>(* Composition - alternative *)</span>
  <span>|</span> <span>Either</span>    <span>:</span> <span>'</span><span>a</span> <span>t</span> <span>*</span> <span>'</span><span>a</span> <span>t</span>       <span>-&gt;</span> <span>'</span><span>a</span> <span>t</span>
</code></pre></div></div>

<p>The primitive parsers are:</p>

<ul>
  <li><code>Fail msg</code> - a parser that always fails.</li>
  <li><code>Empty</code> - a parser that succeeds when given empty input.</li>
  <li><code>Return x</code> - a parser that does not consume any input and always returns <code>x</code>.</li>
  <li><code>Symbol c</code> - a parser that matches input when the first character is <code>c</code>.</li>
</ul>

<p>The applicative interface is what provides sequential composition, as in:
first parse <code>x</code> with parser <code>p1</code>, then parse <code>y</code> with parser <code>p2</code> and combine
their results.</p>

<p>The <code>Either</code> constructor makes it possible to provide alternative execution
paths, i.e. parsers that succeed on different types of input.</p>

<p>As we don’t want to give users direct access to the type, we’ll mechanically
add some smart constructors:</p>

<div><div><pre><code><span>let</span> <span>empty</span> <span>=</span> <span>Empty</span>

<span>let</span> <span>fail</span> <span>m</span> <span>=</span> <span>Fail</span> <span>m</span>

<span>let</span> <span>return</span> <span>x</span> <span>=</span> <span>Return</span> <span>x</span>

<span>let</span> <span>symbol</span> <span>c</span> <span>=</span> <span>Symbol</span> <span>c</span>

<span>let</span> <span>map</span> <span>f</span> <span>x</span> <span>=</span> <span>Map</span> <span>(</span><span>f</span><span>,</span> <span>x</span><span>)</span>

<span>let</span> <span>product</span> <span>p</span> <span>q</span> <span>=</span> <span>Product</span> <span>(</span><span>p</span><span>,</span><span>q</span><span>)</span>

<span>let</span> <span>either</span> <span>p</span> <span>q</span> <span>=</span> <span>Either</span> <span>(</span><span>p</span><span>,</span><span>q</span><span>)</span>
</code></pre></div></div>

<p>Having an applicative interface means that it is also possible to leverage
the new syntax extension – the <code>let+ .. and+</code> notation – which I’ve described
<a href="http://jobjo.github.io//2019/04/24/ocaml-has-some-new-shiny-syntax.html">here</a>.
Assuming OCaml 4.08 or the dune
<a href="https://discuss.ocaml.org/t/let-syntax-backported-to-ocaml-4-02/3447">future_syntax stanza</a>
, we can add a syntax module, like so:</p>

<div><div><pre><code><span>module</span> <span>Syntax</span> <span>=</span> <span>struct</span>
  <span>let</span> <span>(</span><span>let</span><span>+</span><span>)</span> <span>p</span> <span>f</span> <span>=</span> <span>map</span> <span>f</span> <span>p</span>
  <span>let</span> <span>(</span><span>and</span><span>+</span><span>)</span> <span>p</span> <span>q</span> <span>=</span> <span>product</span> <span>p</span> <span>q</span>
<span>end</span>
</code></pre></div></div>

<p>In addition to these, we’ll include an <code>Ops</code> module with infix versions
and some derived combinators:</p>

<div><div><pre><code><span>module</span> <span>Ops</span> <span>=</span> <span>struct</span>
  <span>open</span> <span>Syntax</span>
  <span>let</span> <span>(</span> <span>&lt;$&gt;</span> <span>)</span> <span>f</span> <span>p</span>   <span>=</span> <span>map</span> <span>f</span> <span>p</span>
  <span>let</span> <span>(</span> <span>&lt;|&gt;</span> <span>)</span> <span>p</span> <span>q</span>   <span>=</span> <span>either</span> <span>p</span> <span>q</span>
  <span>let</span> <span>(</span> <span>&lt;*&gt;</span> <span>)</span> <span>pf</span> <span>px</span> <span>=</span> <span>let</span><span>+</span> <span>f</span> <span>=</span> <span>pf</span> <span>and</span><span>+</span> <span>x</span> <span>=</span> <span>px</span> <span>in</span> <span>f</span> <span>x</span>
  <span>let</span> <span>(</span> <span>*&gt;</span>  <span>)</span> <span>p</span> <span>q</span>   <span>=</span> <span>(</span><span>fun</span> <span>_</span> <span>x</span> <span>-&gt;</span> <span>x</span><span>)</span> <span>&lt;$&gt;</span> <span>p</span> <span>&lt;*&gt;</span> <span>q</span>
  <span>let</span> <span>(</span> <span>&lt;*</span>  <span>)</span> <span>p</span> <span>q</span>   <span>=</span> <span>const</span> <span>&lt;$&gt;</span> <span>p</span> <span>&lt;*&gt;</span> <span>q</span>
<span>end</span>
</code></pre></div></div>

<p>Before moving on, some of the code examples also assume a few general
utility functions:</p>

<div><div><pre><code><span>(* Identity *)</span>
<span>val</span> <span>id</span> <span>:</span> <span>'</span><span>a</span> <span>-&gt;</span> <span>'</span><span>a</span>

<span>(* Const *)</span>
<span>val</span> <span>const</span> <span>:</span> <span>'</span><span>a</span> <span>-&gt;</span> <span>'</span><span>b</span> <span>-&gt;</span> <span>'</span><span>a</span>

<span>(* Forward composition *)</span>
<span>val</span> <span>(</span> <span>&gt;&gt;</span> <span>)</span> <span>:</span> <span>(</span><span>'</span><span>a</span> <span>-&gt;</span> <span>'</span><span>b</span><span>)</span> <span>-&gt;</span> <span>(</span><span>'</span><span>b</span> <span>-&gt;</span> <span>'</span><span>c</span><span>)</span> <span>-&gt;</span> <span>'</span><span>a</span> <span>-&gt;</span> <span>'</span><span>c</span>

<span>(* Converting a char list to a string *)</span>
<span>val</span> <span>string_of_list</span> <span>:</span> <span>char</span> <span>list</span> <span>-&gt;</span> <span>string</span>

<span>(* And back again *)</span>
<span>val</span> <span>list_of_string</span> <span>:</span> <span>string</span> <span>-&gt;</span> <span>char</span> <span>list</span>
</code></pre></div></div>

<p>Their implementation, along with the complete code is available
<a href="https://gist.github.com/jobjo/13376aaea1151100dd7915dedb35d9d7">here</a>.</p>

<h3 id="building-simple-parsers">Building simple parsers</h3>

<p>How can we use the API to build actual parsers? Let’s consider a few simple
examples. First, a parser that parses a specific string, i.e. a function:</p>

<div><div><pre><code><span>val</span> <span>string</span> <span>:</span> <span>string</span> <span>-&gt;</span> <span>string</span> <span>t</span>
</code></pre></div></div>

<p>To implement the <code>string</code> parser, we can use the <code>symbol</code> primitive and fold over the
given string to combine the parsers using applicative (<code>let+ .. and+)</code> syntax:</p>

<div><div><pre><code><span>let</span> <span>string</span> <span>s</span> <span>=</span>
  <span>let</span> <span>accum</span> <span>c</span> <span>p</span> <span>=</span>
    <span>(* Parse 'x' using the 'symbol c' parser *)</span>
    <span>let</span><span>+</span> <span>x</span>  <span>=</span> <span>symbol</span> <span>c</span>
    <span>(* Then parse 'xs' using the 'p' parser *)</span>
    <span>and</span><span>+</span> <span>xs</span> <span>=</span> <span>p</span> <span>in</span>
    <span>(* Combine 'x' and 'xs' in a string *)</span>
    <span>Printf</span><span>.</span><span>sprintf</span> <span>"%c%s"</span> <span>x</span> <span>xs</span>
  <span>in</span>
  <span>List</span><span>.</span><span>fold_right</span> <span>accum</span> <span>(</span><span>list_of_string</span> <span>s</span><span>)</span> <span>(</span><span>return</span> <span>""</span><span>)</span>
</code></pre></div></div>

<p>Next, let’s attempt a parser for parsing digits. A version that
detects a single digit may be defined as:</p>

<div><div><pre><code><span>let</span> <span>digit</span> <span>=</span>
  <span>list_of_string</span> <span>"0123456789"</span>
  <span>|&gt;</span> <span>List</span><span>.</span><span>map</span> <span>symbol</span>
  <span>|&gt;</span> <span>List</span><span>.</span><span>fold_left</span> <span>either</span> <span>fail</span>
</code></pre></div></div>

<p>Choosing between a list of parsers is a natural generalization of the binary <code>either</code>
combinator, and deserves its own version:</p>

<div><div><pre><code><span>let</span> <span>choose</span> <span>xs</span> <span>=</span> <span>List</span><span>.</span><span>fold_left</span> <span>either</span> <span>fail</span>
</code></pre></div></div>

<p>We may also generalize the <code>digit</code> definition to take a list of symbols as an argument:</p>

<div><div><pre><code><span>let</span> <span>one_of</span> <span>cs</span> <span>=</span> <span>choose</span> <span>@@</span> <span>List</span><span>.</span><span>map</span> <span>symbol</span> <span>cs</span>
</code></pre></div></div>

<p>Now, <code>digit</code> is achieved by:</p>

<div><div><pre><code><span>let</span> <span>digit</span> <span>=</span> <span>one_of</span> <span>"0123456789"</span>
</code></pre></div></div>

<h3 id="hitting-the-boundaries">Hitting the boundaries</h3>

<p>Next, consider a parser that recognizes arbitrary integers? An integer
consists of at least one digit but we don’t know exactly how many. How can we
define a parser that captures this semantics? As a first try:</p>

<div><div><pre><code><span>let</span> <span>int</span> <span>=</span>
  <span>let</span> <span>rec</span> <span>digits</span> <span>()</span> <span>=</span>
    <span>let</span><span>+</span> <span>d</span>  <span>=</span> <span>digit</span>
    <span>and</span><span>+</span> <span>ds</span> <span>=</span> <span>either</span> <span>(</span><span>digits</span> <span>()</span><span>)</span> <span>(</span><span>return</span> <span>[]</span><span>)</span> <span>in</span>
    <span>d</span> <span>::</span> <span>ds</span>
  <span>in</span>
  <span>map</span> <span>(</span><span>string_of_list</span> <span>&gt;&gt;</span> <span>int_of_string</span><span>)</span> <span>@@</span> <span>digits</span> <span>()</span>
</code></pre></div></div>

<p>Can you spot the problem with the above definition? If not, just try running
it and you’ll find it throwing a <em>stack-overflow</em> exception. The problem is
that the recursive call is never conditional on any base case and is always
eagerly evaluated. We need a way to describe parsers that may consume
arbitrarily large inputs without constructing infinite parsing expressions!
To generalize from the <code>int</code> example, we’re aiming for a combinator with the
following signature:</p>

<div><div><pre><code><span>val</span> <span>many</span> <span>:</span> <span>'</span><span>a</span> <span>t</span> <span>-&gt;</span> <span>(</span><span>'</span><span>a</span> <span>t</span><span>)</span> <span>list</span>
</code></pre></div></div>

<p>One solution would be to introduce a constructor, say <code>Delay</code>,
for representing lazy parsers:</p>

<div><div><pre><code><span>type</span> <span>'</span><span>a</span> <span>t</span> <span>=</span>
  <span>...</span>
  <span>|</span> <span>Delay</span> <span>:</span> <span>(</span><span>unit</span> <span>-&gt;</span> <span>'</span><span>a</span> <span>t</span><span>)</span> <span>-&gt;</span> <span>'</span><span>a</span> <span>t</span>

<span>let</span> <span>delay</span> <span>f</span> <span>=</span> <span>Delay</span> <span>f</span>
</code></pre></div></div>

<p>That is a parser with delayed construction. We may use <code>delay</code> to define
<code>many</code>, as in:</p>

<div><div><pre><code><span>let</span> <span>rec</span> <span>many</span> <span>p</span> <span>=</span>
  <span>let</span> <span>many_one</span> <span>=</span>
    <span>let</span><span>+</span> <span>x</span>  <span>=</span> <span>p</span>
    <span>and</span><span>+</span> <span>xs</span> <span>=</span> <span>delay</span> <span>@@</span> <span>fun</span> <span>_</span> <span>-&gt;</span> <span>many</span> <span>p</span><span>)</span> <span>in</span>
    <span>x</span> <span>::</span> <span>xs</span>
  <span>in</span>
  <span>either</span> <span>many_one</span> <span>(</span><span>return</span> <span>[]</span><span>)</span>
</code></pre></div></div>

<p>Now, each step of the recursion is evaluated on demand rather than upfront.
This solution would work well if it weren’t for the more ambitious set of constraints
having to do with pretty printing and symbol extraction. The problem is that
in order to extract all possible symbols of a delayed parser, we’d need to evaluate
it; this would unroll the infinite recursion expressed in the <code>many</code> definition, and
once again kill the stack.</p>

<h3 id="fixing-the-parser-definition"><em>Fixing</em> the parser definition</h3>

<p>Is there any fix for the problem of simultaneously having a finite
traversable representation, and providing sufficient expressive power for
describing infinite parsers? The clue is in the question. A way of expressing
recursive structures without recursion is exactly what is offered by the <a href="https://en.wikipedia.org/wiki/Fixed-point_combinator">fixed-point
combinator</a>.</p>

<p>Let’s extend the parser type with a fixed-point constructor (and also get rid of <code>Delay</code>):</p>

<div><div><pre><code><span>type</span> <span>'</span><span>a</span> <span>t</span> <span>=</span>
  <span>...</span>
  <span>|</span> <span>Fix</span> <span>:</span> <span>(</span><span>'</span><span>a</span> <span>t</span> <span>-&gt;</span> <span>'</span><span>a</span> <span>t</span><span>)</span> <span>-&gt;</span> <span>'</span><span>a</span> <span>t</span>

<span>let</span> <span>fix</span> <span>f</span> <span>=</span> <span>Fix</span> <span>f</span>
</code></pre></div></div>

<p>We can then use <code>fix</code> as a remedy for the recursiveness of the definition of <code>many</code>,
from above:</p>

<div><div><pre><code><span>let</span> <span>many</span> <span>p</span> <span>=</span>
  <span>fix</span> <span>@@</span> <span>fun</span> <span>many</span> <span>-&gt;</span>
    <span>let</span> <span>many_one</span> <span>=</span>
      <span>let</span><span>+</span> <span>x</span>  <span>=</span> <span>p</span>
      <span>and</span><span>+</span> <span>xs</span> <span>=</span> <span>many</span> <span>in</span>
      <span>x</span> <span>::</span> <span>xs</span>
    <span>in</span>
    <span>either</span> <span>many_one</span> <span>(</span><span>return</span> <span>[]</span><span>)</span>
</code></pre></div></div>

<p>Note that there is <em>no</em> <code>rec</code> keyword in sight. The function <code>fix</code> is just a
handy tool for allowing us to mimic recursive functions. You may be left
wondering how exactly this solves the problem of symbol extraction, given
that we still end up with <code>Fix</code> nodes – functions of type <code>('a t -&gt; 'a t)</code>
– that need to be evaluated. Hopefully, the next sections on interpreting
parsers will bring some clarity on that matter.</p>

<p>Coming back to the example of integer-parsing, here’s how <code>int</code> may be defined
in terms of <code>many</code>:</p>

<div><div><pre><code><span>let</span> <span>int</span> <span>=</span>
  <span>let</span><span>+</span> <span>d</span>  <span>=</span> <span>digit</span>
  <span>and</span><span>+</span> <span>ds</span> <span>=</span> <span>many</span> <span>digit</span> <span>in</span>
  <span>int_of_string</span> <span>@@</span> <span>string_of_list</span> <span>(</span><span>d</span> <span>::</span> <span>ds</span><span>)</span>
</code></pre></div></div>

<p>Again, we may extract the common pattern of parsing one or more times using the same
parser (one or more digits in the example above) by adding a new combinator, as in:</p>

<div><div><pre><code><span>let</span> <span>many_one</span> <span>p</span> <span>=</span>
  <span>let</span><span>+</span> <span>x</span> <span>=</span> <span>p</span>
  <span>and</span><span>+</span> <span>xs</span> <span>=</span> <span>many</span> <span>p</span>
  <span>x</span> <span>::</span> <span>xs</span>
</code></pre></div></div>

<p>Given a parser <code>p</code>, the parser <code>many p</code> succeeds if it can apply <code>p</code> <em>at least</em> one
time on its input.</p>

<p>As a side note, the code generously makes use of the new applicative syntax to
demonstrate how it may be used to write declarative code that also avoids
infix operators. As an alternative, we can define the same functions
without relying on the syntax extension; for instance:</p>

<div><div><pre><code><span>(* Requires Ops module to be open *)</span>

<span>let</span> <span>many</span> <span>p</span> <span>=</span> <span>fix</span> <span>@@</span> <span>fun</span> <span>many</span> <span>-&gt;</span>
  <span>either</span> <span>(</span><span>List</span><span>.</span><span>cons</span> <span>&lt;$&gt;</span> <span>p</span> <span>&lt;*&gt;</span> <span>many</span><span>)</span> <span>(</span><span>return</span> <span>[]</span><span>)</span>

<span>let</span> <span>many_one</span> <span>p</span> <span>=</span> <span>List</span><span>.</span><span>cons</span> <span>&lt;$&gt;</span> <span>p</span> <span>&lt;*&gt;</span> <span>many</span>…</code></pre></div></div></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://jobjo.github.io/2019/05/19/applicative-parsing.html">https://jobjo.github.io/2019/05/19/applicative-parsing.html</a></em></p>]]>
            </description>
            <link>https://jobjo.github.io/2019/05/19/applicative-parsing.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26301543</guid>
            <pubDate>Mon, 01 Mar 2021 10:59:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Spectre exploits in the "wild"]]>
            </title>
            <description>
<![CDATA[
Score 191 | Comments 53 (<a href="https://news.ycombinator.com/item?id=26301326">thread link</a>) | @todsacerdoti
<br/>
March 1, 2021 | https://dustri.org/b/spectre-exploits-in-the-wild.html | <a href="https://web.archive.org/web/*/https://dustri.org/b/spectre-exploits-in-the-wild.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <p>Someone was silly enough to upload a
<a href="https://www.virustotal.com/gui/file/6461d0988c835e91eb534757a9fa3ab35afe010bec7d5406d4dfb30ea767a62c">working spectre (CVE-2017-5753) exploit</a>
for Linux (there is also a
<a href="https://www.virustotal.com/gui/file/ecc0f2aa29b102bf8d67b7d7173e8698c0341ddfdf9757be17595460fbf1791a">Windows one</a> with symbols that I didn't look at.)
on VirusTotal last month, so here is my quick Sunday afternoon lazy analysis.</p>
<p>The binary has its <code>-h</code> option stripped, likely behind a <code>#define</code> to avoid
detection, but some of its parameters are obvious, like specifying
what file to leak, or the kernel base address. The authors didn't check (or care)
that the logging function hasn't been entirely optimized out, leaving a bunch
of strings helping in the reversing process.</p>
<p>The exploit works in four stages:</p>
<ol>
<li>Find the <a href="https://www.halolinux.us/kernel-reference/inode-objects.html">superblock</a>,</li>
<li>Find the <a href="https://en.wikipedia.org/wiki/Inode">inode</a> of the file to dump</li>
<li>Find the corresponding page address</li>
<li>Dumps the content of the file.</li>
</ol>
<p>In the case of <code>/etc/shadow</code>, the default option, the content of the
file is shoved in memory by running the following command in the
background: <code>return system("echo \"whatever\n\" | su - 2&gt; /dev/null")</code>.
In my lab, on a vulnerable Fedora, the exploit is successfully dumping <code>/etc/shadow</code> in a couple of minutes.
Interestingly, there are checks to detect <a href="https://en.wikipedia.org/wiki/Supervisor_Mode_Access_Prevention">SMAP</a>
and abort if it's present. I didn't manage to understand why the exploit was
failing in its presence.</p>
<p>edit: Andrew Cooper from citrix was kind enough to reach out and solve the riddle:</p>
<blockquote>
<p>The covert channel is
(presumably FLUSH+RELOAD) a userspace pointer, which is accessed
speculatively in kernel context, causing a cacheline fill, and recovered
later by.
SMAP prevents supervisor code from accessing user memory operands
outside of explicitly permitted areas.  This is enough to prevent the
cacheline fill (of a userspace pointer) and break the covert channel.
A more sophisticated attack could use EVICT+RELOAD on a supervisor
pointer (or one of a multitude of other covert channels) to transmit the
same data, which is a higher barrier, but definitely not impossible.</p>
</blockquote>
<p>The crux of the exploit is at <code>0x4092f0</code>, using <code>cpuid</code> as a serializing
instruction, <code>rdtsc</code> for timing, and <code>mfence</code>/<code>lfence</code> as barrier, as
documented in the paper. It's also using some tricks to minimize the amount of
readings, like type-specific functions, for example a kernel address has a
specific <em>format</em>.
Thanks to <a href="https://twitter.com/spendergrsec">spender</a> for confirming that the gadget used is likely <code>get_user()</code> in the <code>FIOASYNC ioctl</code>,
which was <a href="https://patchwork.kernel.org/project/kernel-hardening/patch/20180209133935.811950747@linuxfoundation.org/">fixed in 2018</a></p>
<p><a href="https://en.wikipedia.org/wiki/KASLR">KASLR</a> is bypassed when present either by
looking at <code>/proc/kallsyms</code> when available to unprivileged users like it used
to be the case on Fedora until ~recently, or by using the generic
bypass from the <a href="https://gruss.cc/files/prefetch.pdf">prefetch side-channel</a> by Gruss and al.
originating from a library called <code>libkaslr</code>. Amusingly, this method is still
working on an up to date Linux, proving again that <a href="https://grsecurity.net/kaslr_an_exercise_in_cargo_cult_security">KASLR is useless at
best</a>.
For systems that don't have the <code>/proc/kallsym</code> file accessible, the exploit
relies on hardcoded offsets, and while only Fedora, ArchLinux and Ubuntu are currently
supported, there are functions to check for Debian and CentOS. It's a bit
surprising to see hardcoded offsets in an exploit with arbitrary read in
2021.</p>
<p>Unsurprisingly, it had a 
<a href="https://www.virustotal.com/gui/file/6461d0988c835e91eb534757a9fa3ab35afe010bec7d5406d4dfb30ea767a62c/detection">0 detection</a>
rate before I published this blogpost.</p>
<p>Attribution is trivial and left as an exercise to the reader.</p>
    </div></div>]]>
            </description>
            <link>https://dustri.org/b/spectre-exploits-in-the-wild.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26301326</guid>
            <pubDate>Mon, 01 Mar 2021 10:21:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Build a Business, Not an Audience]]>
            </title>
            <description>
<![CDATA[
Score 206 | Comments 47 (<a href="https://news.ycombinator.com/item?id=26301030">thread link</a>) | @jakobgreenfeld
<br/>
March 1, 2021 | https://jakobgreenfeld.com/build_an_audience | <a href="https://web.archive.org/web/*/https://jakobgreenfeld.com/build_an_audience">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>If you’re reading this, I’m pretty sure you’ve seen the following pattern over and over again:</p>

<ul>
  <li>Creative nonfiction pioneer John McPhee distilled decades of experience and first-hand learnings in a series of essays. (The best of them are now available in a book called “Draft No. 4”.)</li>
  <li>A savvy entrepreneur repackages the advice in a $1000+ cohort-based course.</li>
  <li>Someone takes the course and summarizes what he learned.</li>
  <li>People on Twitter start creating threads summarizing the student’s summaries.</li>
  <li>At some point, the guy who summarized the student’s summaries will get invited to a podcast to summarize his summary of the student’s summary.</li>
</ul>

<p>I wish I was kidding.</p>

<p>This is a picture-perfect example of what Sean Blanda calls the <a href="https://99u.adobe.com/articles/55974/the-creative-worlds-bullshit-industrial-complex">Creative World’s Bullshit Industrial Complex</a>. But my goal here is not to dunk on anyone. Instead I want to focus on something far more important.</p>

<p>The Bullshit Complex is just a symptom. What’s the underlying cause?</p>

<p>First, let me clarify one thing. While I’m convinced that remixed content is largely a waste of time for writers and readers, it’s a free world out there. Do whatever makes you happy. If you focus on remixed or “curated” content I’ll probably not follow you on Twitter or read your blog, but there’s no reason why you should care about that. Ultimately, it’s your own responsibility to decide how you spend your time and what kind of content you consume.</p>

<p>With that out of the way, let’s talk about entrepreneurship.</p>

<p>In recent years one of the most common pieces of advice for aspiring entrepreneurs has become that you should focus on building an audience. Everyone is screaming it from the rooftops.</p>

<p>So when I started to get into entrepreneurship a few months ago, that’s exactly what I did. I spent a lot of time researching what kind of tweets get attention and set the goal for myself to post at least two tweets per week and two blog posts per month. After all, churning out content regularly is key if you want to build an audience, <a href="https://www.youtube.com/watch?t=67&amp;v=cubPiuD7_dA&amp;feature=youtu.be">right</a>?</p>

<p>If you need any evidence how serious I was about the whole building an audience thing, here it is: I created a <a href="https://whattotweet.com/">What to Tweet</a> tool because I was struggling to stick to my Twitter schedule.</p>

<p>Looking back at it now I think I largely wasted my time. And more importantly I see so many people falling into the exact same trap.</p>

<p>Their goal is to become entrepreneurs. But instead of building products, they create content. Or even worse, they do research and take courses on how to create content.</p>

<p>But this doesn’t bring them one inch closer to their goal. It’s just a form of procrastination.</p>

<p>While charging money for something you created is <a href="https://jakobgreenfeld.com/free">scary</a>, there is almost zero risk in putting out free content. And if you’re just remixing other people’s content, the intellectual risk is effectively zero. After all, you can always reply “hey, don’t shoot the messenger”.</p>

<p>This trap is particularly dangerous because it feels like you’re making progress while really you don’t.</p>

<p>Aspiring entrepreneurs are not just wasting a lot of time but also lots of money this way. They spend thousands of dollars on courses that teach them how to remix other people’s content more effectively. They buy the latest hyped-up courses that teach them how to craft more effective tweets, blog posts and Youtube videos.</p>

<p>But don’t get me wrong. <em>Having</em> an audience is awesome and I love great content.</p>

<p>What I’m saying is that too many beginners have their priorities backwards and fall into the “build an audience!” trap.</p>

<p>An exemplary plan looks as follows: “I don’t know what product I should create. So I’m planning to create articles or carousels on Linkedin to find my voice and build an audience.” That’s almost verbatim a paragraph from an email I received two days ago.</p>

<p>You can certainly get a lot of followers by churning out remixed content and feel-good platitudes. But everyone seems to forget that not all audiences are alike.</p>

<p>Let’s say you have 2000 followers that you got by posting feel-good platitudes, whereas I only have two followers called Elon Musk and Paul Graham. Would you swap accounts?</p>

<p>With feel-good platitudes and remixed content you’ll only attract fellow beginners. Everyone else recognizes the content immediately for what it is. Hence, the primary value of your much larger audience is that you’re able to sell them a “How to grow your Twitter following” Gumroad course for $47.</p>

<p>A high-quality audience is an endless source of opportunities. A low quality one is at most a Ponzi scheme.</p>

<p>Many people <a href="https://twitter.com/m_ashcroft/status/1364334719970721793">learn</a> this the hard way. They get lured by the promise that they’ll be able to create content effortlessly and build an audience this way. This is exactly what beginners want to hear and hence what gurus are preaching. “Everything is a remix”. So just progressively summarize a bunch of books and then start sharing pieces you remixed from your summaries.</p>

<p>Students of these courses spent months recording videos and writing thousands of words only to discover that they never said anything meaningful.</p>

<p>Valuable content that truly advances the conversation and gets the attention of people you really want to connect with is never effortless. It’s painful. And I’m not talking about some kind of sophisticated editing process, but the writing itself.</p>

<p>In fact, this is how you know that you’re creating valuable content. You should at least be a little scared before you hit the publish button.</p>

<p>Publishing content online is the best way to become visible so that opportunities can find you. But please don’t try to improve your ability to come up with interesting things by reading and connecting ideas just so that you have something to write about.</p>

<p>If you ever notice that you’re trying to “say something interesting”, stop. You’re just going to feed the Creative World’s Bullshit Industrial Complex.</p>

<p>Your main priority always should be to <em>do</em> meaningful things, to solve real-world problems, to be the man in the arena. And if you share what you learn along the way, people will start to listen. Write when you have something meaningful to say, and not to stick to some self-imposed writing schedule.</p>

<p>A hidden benefit of this strategy is that your writing skills become largely irrelevant. It’s certainly true that great writers like John McPhee can make a topic as boring as <a href="https://www.goodreads.com/book/show/54983.Oranges">Oranges</a> exciting. But if you have a great story to tell or learned something important, people will pay attention no matter how bad your writing is. Not convinced? Just look at the essay you’re reading right now.</p>

<p>Save yourself thousands of dollars. Here’s all the writing advice you need:</p>

<ul>
  <li>Share meaningful first-hand experiences.</li>
  <li>Write as if you were emailing a friend, not to impress an imaginary teacher.</li>
</ul>

<p>Now I’m definitely scared to publish this essay. This is exactly why I’ll do it.</p>

  </div></div>]]>
            </description>
            <link>https://jakobgreenfeld.com/build_an_audience</link>
            <guid isPermaLink="false">hacker-news-small-sites-26301030</guid>
            <pubDate>Mon, 01 Mar 2021 09:31:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Last Message Sent on AIM]]>
            </title>
            <description>
<![CDATA[
Score 403 | Comments 207 (<a href="https://news.ycombinator.com/item?id=26300266">thread link</a>) | @luu
<br/>
February 28, 2021 | https://justanman.org/posts/the-last-message-sent-on-aim/ | <a href="https://web.archive.org/web/*/https://justanman.org/posts/the-last-message-sent-on-aim/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
      <p><img src="https://justanman.org/images/aol-instant-messenger-shuts-down.png" alt="AOL Instant Messenger ‘Running Man’ waving goodbye"></p>
<p>In the early 2000s social media sites like Facebook and Twitter weren’t commonplace yet. Even text messages, at ten cents each, were something to be rationed. For many teenagers the primary means of communication outside school was AOL Instant Messenger (AIM). So when it was announced in October that they were shutting down AIM after 20 years, I felt a wave of nostalgia for the messaging app of my youth.</p>
<p>It wasn’t clear when they would be pulling the plug for good, but a high school friend and I planned to be online for the occasion. Their website indicated that AIM would continue to work until the morning of December 15, 2017. Assuming this meant UTC time, that put it going offline sometime after 7:00 PM EST on the 14th.</p>
<p>I wondered: Could I be the last person to sign off? The last person to send a message? Would I have anything profound to say?</p>
<p><strong>Research</strong></p>
<p>I decided to research famous last words. First stop: the Book of Revelation. Final chapter, final verse.</p>
<blockquote>
<p>“The grace of our Lord Jesus Christ be with you all. Amen.”</p>
</blockquote>
<p>Not quite what I was looking for.</p>
<blockquote>
<p>“Last words are for fools who haven’t said enough!”</p>
</blockquote>
<p>Too cantankerous. And as a somewhat libertarian leaning person, I wasn’t going to let Karl Marx have the last word.</p>
<p>I’d figure out what to say later and in the meantime started reading about the technology behind AIM. I learned about OSCAR, the proprietary protocol used by AIM and ICQ. Parts of the protocol were documented by AOL in an official SDK. This is what made third-party AIM clients possible. I had used Gaim (now Pidgin) on Linux machines before and indeed, there was even BSFlite, an AIM client for the command line.</p>
<p>AOL’s desktop client no longer worked for me. They had already pulled the iOS app from the App Store. Ditto for Android. Fortunately browser sign on still worked. I was greeted by a familiar interface that supported new features like embedded media and SMS.</p>
<p>I sent a couple test messages from the browser to my phone. Monitoring outbound activity in the Chrome network panel revealed the structure of a request: a simple HTTP POST to a url, with what appeared to be a session ID in the query string and a message body. I tried to send a message using <code>curl</code> and it worked. As long as I was signed on in the browser the request was accepted.</p>
<p>There were several paths to automating this but given the time constraint, something quick and easy would probably suffice. All I had to do was keep sending messages until the server stopped responding.</p>
<p><strong>December 14, 2017: The final countdown</strong></p>
<p>It was almost midnight UTC time. It would be the 15th soon and I didn’t want to miss the shutdown, so I set up a Bash script to run the <code>curl</code> command at one second intervals. Every now and then I had to manually reauthenticate in the browser. It wasn’t elegant but it worked. Now I had to wait…</p>
<p>To pass time I searched Twitter for mentions of AIM’s last day. Plenty of people were reminiscing about their old screen names, but only a handful were actually signing on one last time. I added them to my buddy list and we talked for a bit. One lived in DC, one in Toledo. Another somewhere in Maryland. Two were engineers, one was a wrestling announcer! I made dinner and watched <em>The Office</em> while occasionally checking on the script.</p>
<p>It ran for another six hours until 1:21 AM EST. I witnessed the drama play out in HTTP status codes:</p>
<pre><code>200 OK
200 OK
200 OK
408 Request Timeout
408 Request Timeout
401 Unauthorized
</code></pre><p>And like that, AIM was gone. Requests to aim.com returned an Invalid URL status page. <code>curl</code> returned nothing but 401s.</p>
<p><strong>Epitaph</strong></p>
<p>I examined the script logs and found it – the last message sent on AIM. [1] It was timestamped Fri Dec 15 01:21:42 EST 2017. From me, to me. (I didn’t want to spam anyone.)</p>
<p>I had borrowed the words from Leonard Nimoy’s final tweet:</p>
<blockquote>
<p>“A life is like a garden. Perfect moments can be had, but not preserved, except in memory. LLAP”</p>
</blockquote>
<p>🖖</p>
<p><strong>Notes</strong></p>
<p>[1] At least in my server region.</p>
<p><strong>Thanks</strong> to behind2greeneyes, dalilmoo, croftonworldwide, nuklermuleburger, and sirmatthew84.</p>
<p>If you enjoyed reading this, please consider a donation to the <a href="https://archive.org/donate/">Internet Archive</a>.</p>
<p>You can also read Kat Timpf’s brilliant <a href="https://www.nationalreview.com/2017/10/aol-instant-messenger-eulogy-aim-social-media-millennials/">eulogy for AIM</a>.</p>

      <hr>
      <p>
        For more frequent updates, follow me on Twitter.
      </p>
      <p>
        <a href="https://twitter.com/jtangofx?ref_src=twsrc%5Etfw" data-show-count="false">Follow @jtangofx</a>
      </p>
    </div></div>]]>
            </description>
            <link>https://justanman.org/posts/the-last-message-sent-on-aim/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26300266</guid>
            <pubDate>Mon, 01 Mar 2021 06:40:44 GMT</pubDate>
        </item>
    </channel>
</rss>
