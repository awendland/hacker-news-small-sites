<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 50]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 50. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Tue, 15 Dec 2020 20:30:07 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-50.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Tue, 15 Dec 2020 20:30:07 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[Blabrecs]]>
            </title>
            <description>
<![CDATA[
Score 59 | Comments 15 (<a href="https://news.ycombinator.com/item?id=25412525">thread link</a>) | @xingyzt
<br/>
December 13, 2020 | https://mkremins.github.io/blabrecs/ | <a href="https://web.archive.org/web/*/https://mkremins.github.io/blabrecs/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <h2>What's all this, then?</h2>
      <p><strong>BLABRECS</strong> is a rules modification for the wordgame SCRABBLE that swaps out the dictionary of real-if-obscure English words for a capricious artificial intelligence. In BLABRECS, real English words aren't allowed! Instead, you have to play nonsense words that <em>sound</em> like English to the AI. These nonsense words are called – you guessed it – BLABRECS.</p>
      <h2>How do I play?</h2>
      <p>Get together your regular SCRABBLE supplies and pull up this page in a web browser. Then play SCRABBLE as normal, but before you play a word, use the "test a word..." box at the top of the page to check whether the AI will let you play it. Remember, you can only play words that the AI approves!</p>
      <p>When you find a legal word to play, hit the "Play It" button to add this word to the lexicon. As you play, you can write in definitions for all the words you've invented in the "Meaning" textbox next to each word. The player who comes up with the best definition for a word can add half of that word's points to their SCRABBLE score at the end of the game.</p>
      <h2>I found a real word that the AI thinks is playable! What should I do?</h2>
      <p>This happens often with proper nouns (which SCRABBLE generally disallows) and with inflected forms of base words that are disallowed. I think you should play by the spirit of BLABRECS and not the letter, but what this means is ultimately up to you. Is the game primarily about exploring the vast "shadow English" implied by the statistical distribution of letter sequences, or is it about the inherent absurdity of an external authority presuming to dictate your language to you? Either interpretation seems valid to me.</p>
      <h2>How does the AI work?</h2>
      <p>Right now it uses a Markov model trained on the <a href="https://www.wordgamedictionary.com/enable/">ENABLE word list</a> used in a number of wordgames. It looks at the statistical patterns of letter sequences in English words and uses this information to determine how likely a sequence of letters is to be a real English word. Then it rejects both real dictionary words and fake words that it deems insufficiently plausible. Check out the <a href="https://github.com/mkremins/blabrecs">source code</a> if you want to learn more.</p>
      <p>I might update BLABRECS to provide a wider range of AI "opponents" using a variety of different technologies in the future. Stay tuned!</p>
      <h2>Why is it called BLABRECS?</h2>
      <p>I generated every possible permutation of the word SCRABBLE and asked an early version of the AI to sort them from least to most statistically likely. BRABLECS won out by a significant margin, beating not only the real word SCRABBLE but also my hand-designed previous title BESCRALB. Then I switched the L and the R because BLABRECS sounds better and I'm not about to let a computer tell me what to do.</p>
      <h2>Who are you?</h2>
      <p>I'm <a href="https://mkremins.github.io/">Max Kreminski</a>, an artifical intelligence researcher and game designer. At the time of this release (December 2020), I'm working on my PhD in Computational Media at the University of California, Santa Cruz. I make a lot of weird stuff with AI; if you want to keep tabs on my work, you can <a href="https://twitter.com/maxkreminski">follow me on Twitter</a>. Oh, and if you enjoyed BLABRECS, you can also <a href="https://mkremins.itch.io/blabrecs">leave me a tip</a> via the "Download Now" button on itch.io.</p>
    </div></div>]]>
            </description>
            <link>https://mkremins.github.io/blabrecs/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25412525</guid>
            <pubDate>Mon, 14 Dec 2020 01:40:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Tesla's market cap now accounts for roughly 1/3rd of the global automaker market]]>
            </title>
            <description>
<![CDATA[
Score 142 | Comments 235 (<a href="https://news.ycombinator.com/item?id=25411799">thread link</a>) | @jonathanleane
<br/>
December 13, 2020 | https://datamentary.net/psa-tesla-may-soon-be-as-big-as-all-other-automakers-combined/ | <a href="https://web.archive.org/web/*/https://datamentary.net/psa-tesla-may-soon-be-as-big-as-all-other-automakers-combined/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-content" role="main">

	
<article id="post-36">

	
<!-- .entry-header -->

	<div>

		<div>

			
<p>I wasn’t really paying attention, so maybe I’m the only one that hadn’t noticed, but Tesla’s market cap as of December 9th 2020 is a touch over 616 billion US dollars. That makes it kind of a big deal. In fact, it accounts for a full third of the global automaker market cap:</p>







<p>Just for a bit of context – Tesla only listed on the stock market 10 years ago (June 2010). The company itself was only founded in 2003. Compare that to Ford which launched in 1903 and basically invented the concept of mass production (the Model T is still one of the best selling cars of all time) or Benz in 1889, whose founder, Karl Benz, literally had a patent on the original goddamn automobile. </p>



<p>Here’s a racing bar chart of a few of the top automakers share prices over the last couple of decades. Tesla both literally and figuratively comes out of nowhere (spoiler alert: things get insane in 2019):</p>







<p>As you can see from the chart, the share price has pretty much 10x’d over the last 12 months. Why? Well, it’s certainly not because Tesla is making 10 times the revenue or shipping 10 times as many cars. In all of 2019, for example, Tesla shipped 367,500 cars. In Q3, 2020, they shipped 139,300 cars, giving them a run rate of around 550,000 cars for the entire year. For context, <strong>Toyota sold 927,623 cars in October 2020 alone</strong> (<a rel="noreferrer noopener" href="https://global.toyota/en/company/profile/production-sales-figures/" target="_blank">source</a>). </p>



<p>Here’s how Tesla compares to some of the automakers mentioned above in terms of yearly car sales:</p>







<p>No, I didn’t forget to add Tesla to the chart – you just can’t see the label because of how tiny the sales numbers are relative to other automakers (it’s that little blue sliver between Volkswagen and BMW if you still haven’t found it).</p>



<p>As you’d expect from the huge disparity in car sales shown above, Tesla’s revenues are also dwarfed by the bigger incumbents. Expected 2020 revenues are around 28 billion USD – impressive, but more than an order of magnitude less than VW’s 299 billion USD in 2019. </p>







<p>So why does the market have such a hard on for Tesla? As the chart above shows, Tesla’s market cap seems to be completely out of whack with its revenues and earnings (the latter was just 10 million USD in 2019). </p>



<p>The simple answer is that the market is valuing the VW’s, Toyota’s, and Daimler’s of the world on what they are – car companies. Tesla, on the other hand, is being valued as a tech business, and therefore what it *could* be. Car companies are boring and predictable. Technology companies though… Well, they have pretty much unlimited upside, don’t they?</p>



<p>Here are a few things Tesla has going for it.</p>



<ul><li>First, and most obviously, the electric car market is really just getting started. There are close to 100 million new cars per year sold globally, and less than 1% of them are electric, though this number is growing quickly – <a href="https://www.reuters.com/article/us-china-autos-electric-idUSKBN27C08C">it’s already 5% in China</a> – and expected to surpass 50% in most developed nations by 2030. There is even some talk of the UK and EU <a rel="noreferrer noopener" href="https://www.smh.com.au/world/europe/build-back-greener-boris-johnson-bans-petrol-cars-by-2030-20201119-p56fwn.html" target="_blank">banning sales</a> of new petrol and diesel cars in the not too distant future.<p>Tesla clearly has a first mover advantage here, and a lead on battery technology and EV engineering, though the quantum of this lead is <a rel="noreferrer noopener" href="https://www.barrons.com/articles/tesla-battery-technology-electric-vehicles-engineering-51592842119" target="_blank">disputed</a>. </p></li><li>Tesla may be the first company to actually nail self-driving. After overpromising and underdelivering for years (in 2015, Musk predicted FSD could arrive by 2018), Tesla Full Self Driving appears to have <a rel="noreferrer noopener" href="https://cleantechnica.com/2020/12/07/tesla-full-self-driving-speed-bumps-cyclists-no-destination-lane-centering-with-on-street-parking-videos/" data-type="URL" data-id="https://cleantechnica.com/2020/12/07/tesla-full-self-driving-speed-bumps-cyclists-no-destination-lane-centering-with-on-street-parking-videos/" target="_blank">launched in beta</a> for some drivers, though early reports of its reliability are mixed.<br></li><li>Revenue growth to date. Sure, as we can see in the above chart, total revenues are still only a fraction of VW’s and Toyota’s, but 10 years ago Tesla had revenues of 100m USD compared to 2020’s projected 28B USD – that’s a roughly 28 fold increase. In the same period, VW’s revenue has increased by about 75%, and Toyota’s by only around 30%.<br></li><li>Well placed in solar and home energy storage. <br></li><li>The Tesla brand is cool, the Elon Musk brand is cool </li></ul>



<p>And finally, Tesla is, for pretty much the first time in its history doing something many of its critics said it would never do – <strong>actually turning a profit</strong>. The 10 million USD profit it made in 2019 was for all intents and purposes breaking even (and was driven largely by sale of regulatory credits), but in 2020 expected profits are a meaty looking 1.26B USD.</p>



<p>If you liked this article and want to help me out, there are a few things you can do.</p>



<ol><li>I just created a Twitter account (I know, I know – bit late to the party). I promise to only post interesting things! Follow me here: <a href="https://twitter.com/LeaneJonathan" target="_blank" rel="noreferrer noopener">https://twitter.com/LeaneJonathan</a></li><li>If you have a spare couple of bucks, please consider joining my Patreon. I’d love to do this as a full time job, but at the moment I’d even settle for breaking even! I’ve just set my Patreon up here:&nbsp;<a rel="noreferrer noopener" href="https://www.patreon.com/datamentary" target="_blank">https://www.patreon.com/datamentary</a></li><li>You could subscribe to my Youtube channel here:&nbsp;<a rel="noreferrer noopener" href="https://www.youtube.com/channel/UCiqE7AFojsc6U7fqmPt2Vdg" target="_blank">https://www.youtube.com/channel/UCiqE7AFojsc6U7fqmPt2Vdg</a><br>Youtube won’t let me monetise until I hit 2000 subscribers, so there’s still a looong way to go&nbsp;</li><li>You could upvote this post on Reddit, share it on FB, etc… Really, any publicity I can get at this point would be a big help.</li><li>And finally, if you have any requests for future topics or would like to collaborate on something, please leave a comment here and I’ll get in touch.</li></ol>

		</div><!-- .entry-content -->

	</div><!-- .post-inner -->

	<!-- .section-inner -->

	
	<!-- .pagination-single -->

	
		<!-- .comments-wrapper -->

		
</article><!-- .post -->

</div></div>]]>
            </description>
            <link>https://datamentary.net/psa-tesla-may-soon-be-as-big-as-all-other-automakers-combined/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25411799</guid>
            <pubDate>Mon, 14 Dec 2020 00:01:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Germany begins legal action against Facebook for their Oculus login requirements]]>
            </title>
            <description>
<![CDATA[
Score 67 | Comments 8 (<a href="https://news.ycombinator.com/item?id=25410418">thread link</a>) | @vrfinal
<br/>
December 13, 2020 | https://www.vrfinal.com/germany-begins-legal-action-against-facebook-for-their-oculus-login-requirements/ | <a href="https://web.archive.org/web/*/https://www.vrfinal.com/germany-begins-legal-action-against-facebook-for-their-oculus-login-requirements/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <p>Germany’s Federal Cartel Office (Bundeskartellamt) <a href="https://www.bundeskartellamt.de/SharedDocs/Meldung/EN/Pressemitteilungen/2020/10_12_2020_Facebook_Oculus.html">has announced</a> that they are opening formal abuse proceedings against Facebook after the introduction of their new login requirements for the Quest 2.</p><p>We have <a href="https://www.vrfinal.com/report-from-the-house-of-representatives-may-suggest-that-the-facebook-login-requirement-for-the-oculus-quest-2-is-anticompetitive/">previously reported</a> on the controversy surrounding Oculus and Facebooks decision to require a Facebook account to access the Quest 2 in the past. The requirements have been seen as anti-competitive by forcing users to take part in a separate service in order to use their product.</p><figure><blockquote data-width="550"><p lang="en" dir="ltr"><a href="https://twitter.com/hashtag/Bundeskartellamt?src=hash&amp;ref_src=twsrc%5Etfw">#Bundeskartellamt</a> examines linkage between <a href="https://twitter.com/hashtag/Oculus?src=hash&amp;ref_src=twsrc%5Etfw">#Oculus</a> and the <a href="https://twitter.com/hashtag/Facebook?src=hash&amp;ref_src=twsrc%5Etfw">#Facebook</a> network <a href="https://twitter.com/hashtag/VR?src=hash&amp;ref_src=twsrc%5Etfw">#VR</a><br>PR➡️<a href="https://t.co/MXFJY7untv">https://t.co/MXFJY7untv</a> <a href="https://t.co/zp4FxSxdyw">pic.twitter.com/zp4FxSxdyw</a></p>— Bundeskartellamt (@Kartellamt) <a href="https://twitter.com/Kartellamt/status/1336968762613002241?ref_src=twsrc%5Etfw">December 10, 2020</a></blockquote>

</figure><p>The Bundeskartellamt is the German governments national authority on issues of competition. According to their announcement, they are opening an inquest to investigate <em>“the linkage between Oculus virtual reality products and the social network and Facebook platform.”</em></p><p>According to the President of the Federal Cartel Office, Andreas Mundt:</p><p><em>“With its social network Facebook holds a dominant position in Germany and is also already an important player in the emerging but growing VR (virtual reality) market. We intend to examine whether and to what extent this tying arrangement will affect competition in both areas of activity.”</em></p><p>Facebook already halted sales of Oculus products in Germany prior to the release of the Quest 2 and it’s likely that Germans may not be able to purchase the devices for a long time to come.</p><p>A similar case <a href="https://www.ftc.gov/news-events/press-releases/2020/12/ftc-sues-facebook-illegal-monopolization">was introduced in the US on December 9<sup>th</sup></a>. The United States Federal Trade Commission announced that it had filed a lawsuit with the Washington, D.C. US District Court alleging anticompetitive practices. This suit is not focused on Oculus alone but rather it looks at the wider ranging implications of Facebooks anti-competitive practices.</p><p>If these lawsuits and investigations are successful, we could potentially see properties that are currently owned by Facebook like WhatsApp, Instagram, and even Oculus be divested from the larger company and spin off into their own separately owned entities.</p>
          </div></div>]]>
            </description>
            <link>https://www.vrfinal.com/germany-begins-legal-action-against-facebook-for-their-oculus-login-requirements/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25410418</guid>
            <pubDate>Sun, 13 Dec 2020 21:23:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Five lines I put in a blank .vimrc]]>
            </title>
            <description>
<![CDATA[
Score 139 | Comments 118 (<a href="https://news.ycombinator.com/item?id=25410390">thread link</a>) | @jiannengli
<br/>
December 13, 2020 | https://swordandsignals.com/2020/12/13/5-lines-in-vimrc.html | <a href="https://web.archive.org/web/*/https://swordandsignals.com/2020/12/13/5-lines-in-vimrc.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article itemscope="" itemtype="http://schema.org/BlogPosting">

    <div itemprop="articleBody">

      <h2 id="tldr">TL;DR</h2>
<p>To make a default Vim installation more useful, type the following 5 lines into its <code>.vimrc</code> file:</p>

<div><div><pre><code>set hls
set ic
set is
set nu
set noswf
</code></pre></div></div>

<p>Or if you prefer, copy and paste the spelled out and annotated version:</p>

<div><div><pre><code>set hlsearch    " highlight all search results
set ignorecase  " do case insensitive search 
set incsearch   " show incremental search results as you type
set number      " display line number
set noswapfile  " disable swap file
</code></pre></div></div>

<p>For what it’s worth, the acronym for the 5 lines is <code>HIINN</code>.</p>

<p><strong>Edit</strong>: <a href="https://news.ycombinator.com/item?id=25410751" target="_blank">Multiple people on HN</a> <a href="https://news.ycombinator.com/item?id=25410742" target="_blank">have pointed out</a> that the 5 lines can be combined into a single line like below. I didn’t know about this capability, but will definitely start doing this from now on:</p>



<p>Also, as mentioned below, this is for temporary environments where you read more than you edit. For your local set up, it’s better to take the time to properly maintain the config file and install plugins as needed.</p>

<h2 id="motivation">Motivation</h2>
<p><a href="https://www.vim.org/" target="_blank">Vim</a> is a powerful text editor for Unix/Linux, and I use it frequently to view and edit files. Unfortunately, Vim’s default configurations lack several important usability features compared to popular alternative text editors, such as <a href="https://code.visualstudio.com/" target="_blank">VSCode</a>.</p>

<p>The undesirable defaults are not an issue on my own computer, as I can take the time to configure them. However, often I’d find myself debugging or reading logs on near-fresh Linux installations (eg. virtual machines spun up to do integration testing), where Vim had not yet been configured.</p>

<p>So over time, I distilled the text editor features that I needed the most, and came up with the list above. To set it up, I would run <code>vim ~/.vimrc</code>, manually enter those 5 lines in whichever order that I remembered them, then quit and restart Vim to pick up the new configurations.</p>

<h2 id="discussion">Discussion</h2>
<p>The first 4 lines are straightforward - most popular modern text editors already come with all of them out of the box. The last one could be controversial, since <a href="http://vimdoc.sourceforge.net/htmldoc/recover.html#swap-file" target="_blank">swap file</a> is designed to help users recover work. In practice though, I find it to be more in the way, due to the additional dialogue that pops up when opening a file that has an existing swap file. The recovery feature itself is also not useful to me, as I more often read logs rather than make edits in those cases.</p>

<p>The next time you find yourself in a similar situation, I recommend you to also try putting those 5 lines into the <code>.vimrc</code>. It could make your Vim experience just a bit better.</p>

<p>Discuss this post on <a href="https://news.ycombinator.com/item?id=25410390" target="_blank">HN</a>.</p>


    </div>

</article></div>]]>
            </description>
            <link>https://swordandsignals.com/2020/12/13/5-lines-in-vimrc.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25410390</guid>
            <pubDate>Sun, 13 Dec 2020 21:20:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Thinking About Decentralized Communities]]>
            </title>
            <description>
<![CDATA[
Score 52 | Comments 46 (<a href="https://news.ycombinator.com/item?id=25409715">thread link</a>) | @SubGenius
<br/>
December 13, 2020 | https://gurlic.com/root/thinking-about-decentralized-communities | <a href="https://web.archive.org/web/*/https://gurlic.com/root/thinking-about-decentralized-communities">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
          
            <p>Earlier today, I had the misfortune of reading a blog post about the dangers of the decentralized web and how we should not partake in or encourage it's development. Hacker News had a pretty <a href="https://news.ycombinator.com/item?id=25312854" rel="noopener noreferrer nofollow">active discussion</a> about the post.</p><p>Ideological takes on this always turn ugly, and I'm at a point in my life where I avoid that at all costs. I can only talk about my preferences about the world, not about how things ought to be, implying some sort of inherent value or divine moral good.</p><p>Here's what I prefer: a world where ideas, no matter how silly or dangerous, are allowed to be expressed, shared, ignored, attacked and laughed at. I don't imagine a world like this can ever exist easily, but a more decentralized web can help us get halfway there.</p><h3 id="ok-so-what-about-gurlic-then">Ok so what about Gurlic then?</h3><p><a href="https://gurlic.com/" rel="noopener noreferrer nofollow">Gurlic</a> is roughly just over two months old now, and at a point where I am relatively comfortable with the basic features it has. In the coming weeks and months, I want to focus on modifying the backend to either adopt an existing decentralized protocol, or think about how to approach writing a new one. Perhaps it would have been smarter to do this before building it first, but that would have limited how I envisioned Gurlic to be and it would've turned out differently.</p><p>Right now I'm looking into the <a href="https://www.w3.org/TR/activitypub/" rel="noopener noreferrer nofollow">activitypub</a> spec, and the <a href="https://matrix.org/docs/spec/" rel="noopener noreferrer nofollow">matrix</a> spec - here are some initial thoughts I have about how Gurlic should approach decentralization/federation.</p><ul><li><p>Decentralization can be a priority, but must never be promoted as a feature, or made to be a selling point. When decentralization becomes the main selling point of a product or service, the usability and polish tend to suffer. Not always, but nearly always. None of the marketing copy should include the words 'decentralization', 'privacy' etc. <strong>Normal users don't care about any of this</strong>.</p></li><li><p>User experience should be seamless. The user shouldn't have to generate a key, remember an extra password, remember weird URL schemes, or download utilities and clients just to be part of an online community or to write an article. Above all, the user must not be confused, as one usually is when looking at Mastodon instances, which one to sign up to, and so on. My mom should be able to use it without having to call me, just like she does with Facebook. <strong>Normal users do care about this</strong>.</p></li><li><p>The protocol must be flexible enough to allow for all of Gurlic's current features. This means communities, user profiles, publications, articles, galleries, rich media posts, sharing/responding and so on. All seamlessly without any rough edges.</p></li><li><p>Any and all cryptocurrency/blockchain must be avoided.</p></li></ul><p>I'll have more to write about this in the near future.</p>
            </section></div>]]>
            </description>
            <link>https://gurlic.com/root/thinking-about-decentralized-communities</link>
            <guid isPermaLink="false">hacker-news-small-sites-25409715</guid>
            <pubDate>Sun, 13 Dec 2020 20:07:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Sharrows, the bicycle infrastructure that doesn’t work and nobody wants]]>
            </title>
            <description>
<![CDATA[
Score 290 | Comments 373 (<a href="https://news.ycombinator.com/item?id=25409690">thread link</a>) | @Tomte
<br/>
December 13, 2020 | https://macwright.com/2020/12/04/sharrows.html | <a href="https://web.archive.org/web/*/https://macwright.com/2020/12/04/sharrows.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>San Francisco was poised to make a big improvement in its central transit system: the <a href="http://bettermarketstreetsf.org/index.html"><em>Better Market Street</em></a> plan. <a href="https://en.wikipedia.org/wiki/Market_Street_(San_Francisco)">Market Street</a> is one of the major transit arteries of the city, the route that people ride to commute from the Mission and the Haight to downtown.</p><p>It’s also a high-injury corridor, and the city aimed to fix that by creating a grade-separated bike lane and lots of new and improved infrastructure.</p><p><img alt="Better market plan" src="https://macwright.com/images/2020-12-04-sharrows-better-market-plan.png"></p><p>After years of community input and design, the plan was to introduce a separate lane for bikes, sidewalk improvements, separated lanes for buses, and more. It was pretty inspiring.</p><p><img alt="Post-pandemic revised plan" src="https://macwright.com/images/2020-12-04-sharrows-post-pandemic-revised-plan.png"></p><p>But the budget collapse caused by COVID-19 scaled back the project radically, and now we’re considering sharrows instead of separated bicycle lanes. The plan includes what you see above: a double-wide lane where bicyclists perilously “share the road” with taxis, delivery trucks, and city vehicles. It’s what we call <a href="https://bummermarketstreet.com/">Bummer Market Street</a>.</p><p>So I decided to look into the main anti-feature of this plan for cyclists: the sharrow.</p><h2 id="whats-a-sharrow">What’s a sharrow?</h2><svg viewBox="0 0 1362 640" width="100%" xmlns="http://www.w3.org/2000/svg" fill="none"><rect fill="white" height="640" width="1362"></rect><path d="M199.425 153.667H200.259C202.518 155.991 249.906 213.529 255.814 220.75C258.584 224.135 276.703 244.915 277.314 246.75C278.004 248.818 277.481 257.706 277.481 261.167H269.981C267.774 258.889 212.277 191.982 205.814 184.083C203.958 181.815 202.174 179.044 199.425 177C198.172 178.444 179.754 200.966 177.203 204.083C166.048 217.717 154.469 231.005 143.314 244.639C137.201 252.11 128.882 262.514 122.203 269.778C122.203 265.612 121.65 248.911 122.37 246.75C123.134 244.456 142.401 222.638 145.537 218.806C152.567 210.213 197.03 157.768 199.425 153.667Z" fill="black"></path><path d="M199.425 107H200.259C202.692 109.477 248.517 165.195 254.425 172.417C257.288 175.915 276.736 198.348 277.314 200.083C278.031 202.234 277.481 218.83 277.481 223.111C275.364 221.7 255.037 196.498 251.925 192.694C245.58 184.938 202.203 133.7 200.259 130.333C199.199 130.593 180.651 153.234 178.592 155.75C165.312 171.981 151.594 187.853 138.314 204.083C133.172 210.368 127.488 216.343 122.203 223.111C122.203 218.946 121.65 202.244 122.37 200.083C122.999 198.195 142.318 176.011 145.259 172.417C157.54 157.406 170.2 142.705 182.481 127.694C186.227 123.116 190.124 118.662 193.87 114.083C195.615 111.95 197.201 109.641 199.425 107Z" fill="black"></path><path d="M183.13 302.178C182.931 298.388 180.205 290.794 180.769 287.595C181.101 285.716 185.139 271.09 185.88 270.483C186.822 269.713 195.137 270.095 197.575 270.095V280.372C195.244 280.372 188.701 279.817 187.547 280.761C187.013 281.198 186.946 282.121 186.742 282.733C184.257 290.188 186.403 289.412 187.214 296.706C187.474 299.047 187.699 301.485 187.575 303.845C187.457 306.084 186.859 308.275 186.742 310.511C186.599 313.226 185.27 331.829 184.797 333.706H185.353C191.783 334.363 219.178 334.264 226.186 333.706C226.584 331.812 227.282 329.68 226.853 328.178C226.377 326.515 215.458 320.741 215.908 312.178C215.968 311.047 216.42 309.616 217.492 309.039C219.052 308.199 230.396 307.04 233.075 306.567C235.047 306.219 241.555 304.618 242.38 307.095C243.679 310.989 239.324 321.522 236.742 324.678C235.745 325.896 233.562 326.337 232.825 327.706C231.906 329.412 231.836 334.884 231.436 337.15C231.189 338.55 231.049 340.105 231.297 341.511C232.021 345.614 234.466 353.463 235.825 357.539C236.425 359.338 236.352 361.342 236.936 363.095C238.498 367.782 239.684 372.737 240.908 378.15H241.464C241.911 376.359 243.261 375.037 244.019 373.9C256.336 355.426 270.512 370.988 275.353 385.511C277.841 392.975 280.505 400.634 281.88 408.428C287.113 438.08 288.614 468.977 283.353 498.789C283.093 500.258 283.055 501.77 282.797 503.233C280.703 515.103 276.009 534.092 268.325 543.483C260.421 553.144 251.412 552.795 244.408 542.289C236.679 530.695 232.595 513.498 230.186 499.845C229.491 495.904 228.619 491.729 228.408 487.733C228.334 486.326 228.773 484.363 228.075 483.067C227.251 481.538 219.198 487.046 219.158 487.095C218.602 487.775 218.681 488.758 218.408 490.095C215.132 495.009 218.13 511.638 218.13 518.428L218.408 518.706H220.075L220.353 525.095L213.964 525.928C213.964 523.608 213.34 520.636 215.353 519.261L213.686 495.372C208.456 489.792 210.79 483.733 209.658 477.317C209.108 474.2 207.684 471.316 207.13 468.178C206.922 466.997 206.336 466.018 205.964 464.9C204.598 460.804 204.112 456.401 202.742 452.289C197.595 436.848 193.381 417.041 188.214 401.539C186.945 397.733 186.01 393.816 184.742 390.011C184.482 389.233 184.55 388.369 184.408 387.567C184.182 386.285 181.161 375.622 180.63 374.539H180.353C179.939 375.923 179.191 384.077 179.325 385.15C179.63 387.587 180.919 389.932 181.686 392.233C184.839 401.692 186.457 411.492 188.186 421.289C188.801 424.771 188.622 430.891 189.519 434.261C189.519 439.569 190.103 444.373 190.353 449.122C190.697 455.655 190.353 462.301 190.353 469.539C190.353 487.774 185.336 520.185 176.964 535.733C173.494 542.178 169.147 550.372 160.769 550.372C159.156 550.372 157.356 550.179 155.908 549.4C145.588 543.843 141.75 528.926 138.325 518.65C137.262 515.46 136.602 512.034 136.019 508.733C135.292 504.611 134.387 500.5 133.658 496.372C133.231 493.954 133.333 491.475 132.908 489.067C131.224 479.524 130.669 459.771 131.186 449.956C131.42 445.509 131.785 441.068 132.019 436.622C132.227 432.677 132.414 428.552 133.103 424.65C133.561 422.054 133.7 419.413 134.158 416.817C136.556 403.228 140.135 386.255 147.853 374.678C155.896 362.613 166.255 362.185 174.242 375.372H174.797C174.797 371.596 176.967 354.882 177.63 351.122C178.509 346.142 178.306 340.996 179.186 336.011C180.803 326.846 181.65 316.614 182.686 307.289C182.868 305.647 183.217 303.828 183.13 302.178ZM185.63 349.817H183.408L183.13 350.095C183.13 352.444 182.534 354.088 182.63 355.733C182.764 357.996 190.129 382.674 191.38 386.428C192.329 389.274 193.728 396.638 194.686 399.511C198.241 410.176 200.647 421.228 204.214 431.928C204.537 432.897 204.499 433.949 204.825 434.928C206.9 441.153 208.054 447.592 210.63 453.983L210.353 443.428L208.964 443.15L208.686 442.872V436.761H214.242V443.706H213.13L213.408 453.15H213.686L215.908 433.706L224.519 349.817C220.794 349.422 212.8 349.315 204.857 349.304C196.914 349.292 189.022 349.376 185.63 349.817ZM228.964 365.65C228.455 371.669 226.762 379.015 226.464 384.678C226.192 389.841 226.027 395.156 225.075 400.65L223.408 416.345L221.742 432.039L217.853 469.539L227.019 467.039L227.297 466.761C227.297 459.432 226.948 452.692 227.297 446.067C227.585 440.595 228.398 435.15 228.686 429.678C228.883 425.931 228.95 422.069 229.603 418.372C231.141 409.655 233.093 401.076 235.353 392.039C236.212 389.954 237.043 387.972 236.936 386.15C236.896 385.47 230.451 361.406 229.797 359.261H229.242L228.964 365.65ZM158.408 383.15C156.426 384.637 154.594 385.174 153.408 386.622C146.522 395.039 142.694 406.504 140.825 417.095C140.516 418.847 139.969 420.558 139.658 422.317C135.375 446.591 135.908 471.714 140.186 495.956C141.892 505.624 147.621 529.36 158.242 532.9C169.561 536.673 178.307 512.847 179.714 504.872C180.347 501.286 181.494 497.84 182.13 494.233C184.399 481.379 185.482 461.021 184.797 448.011C184.641 445.036 184.12 442.084 183.964 439.122C183.85 436.958 183.898 434.77 183.519 432.622C182.897 429.093 182.558 425.507 181.936 421.983C181.642 420.316 181.061 418.692 180.769 417.039C180.071 413.083 179.391 408.448 177.575 404.261H177.019C176.437 407.48 176.572 410.267 176.103 412.928C175.906 414.044 175.412 415.085 175.214 416.206C174.684 419.208 173.526 427.401 172.88 429.983C171.597 435.119 169.723 440.111 168.436 445.261C167.545 448.827 164.659 453.703 164.075 457.011C163.622 459.578 164.293 464.434 161.992 466.317C157.819 469.731 157.249 454.543 158.686 450.233C159.422 448.025 161.273 446.638 162.019 444.4C167.445 428.122 169.995 420.12 171.936 402.65C172.203 400.251 173.17 396.199 172.769 393.928C172.511 392.464 171.085 390.727 170.158 389.595C169.558 388.861 169.254 387.933 168.658 387.206C166.115 384.098 162.846 383.15 158.408 383.15ZM254.242 383.15C250.783 384.193 244.68 390.253 244.325 393.095C243.983 395.829 246.237 401.358 246.769 404.372C247.149 406.521 255.732 441.983 256.242 443.511C257.471 447.198 259.08 448.946 259.38 450.65C259.823 453.159 260.21 455.731 260.075 458.289C259.965 460.382 259.541 464.912 257.825 466.317C256.834 467.127 255.428 466.026 254.269 466.65C249.696 469.112 245.453 472.188 240.88 474.65C239.588 475.346 234.183 478.134 233.853 479.289C233.189 481.612 235.245 490.644 235.742 493.456C236.112 495.554 236.26 497.691 236.63 499.789C237.04 502.11 237.888 504.45 238.63 506.678C241.465 515.181 244.196 527.517 252.853 532.178C254.616 533.127 256.632 532.973 258.547 532.872C268.121 532.368 275.293 507.699 276.63 500.122C276.885 498.677 277.375 497.29 277.63 495.845C281.718 472.681 282.305 448.333 278.214 425.15C277.251 419.696 276.558 414.129 274.797 408.845C272.342 401.481 268.154 388.024 260.908 384.122C258.984 383.086 256.916 383.15 254.242 383.15ZM238.408 407.039L236.742 413.706C236.138 414.937 236.198 415.906 236.047 416.761C234.365 426.294 233.13 435.927 233.13 446.206L232.853 462.872C235.593 460.836 251.888 454.01 252.575 452.733C253.313 451.362 250.824 442.812 250.325 440.817C248.852 434.924 242.532 412.271 242.019 407.872L240.63 401.483H240.075L238.408 407.039Z" fill="black"></path><path d="M491.921 123.163L509.083 123.416L509.587 124.929C510.67 125.805 511.778 126.781 512.868 127.704C513.699 127.891 513.999 128.167 514.358 128.36C514.86 128.631 515.42 128.796 515.922 129.066C517.3 129.808 519.267 132.206 521.121 133.204C522.49 133.94 523.867 134.662 525.235 135.398C525.88 135.745 526.333 136.338 526.977 136.685C527.91 137.187 528.968 137.465 529.803 138.148C534.341 141.859 535.527 143.557 541.085 146.548C543.866 148.046 545.354 150.817 548.707 151.417C550.119 152.967 551.793 153.456 553.3 154.268C553.93 154.607 554.617 155.596 555.774 156.21C556.251 156.943 556.871 157.082 557.313 157.32C558.512 157.965 559.488 159.814 561.831 160.247C563.094 161.667 564.468 162.005 565.793 162.719C566.118 162.894 566.387 163.154 566.879 163.778L569.655 165.292C570.045 165.949 570.233 166.304 570.538 166.553C572.024 167.769 573.738 169.071 575.434 169.984C576.029 170.304 576.748 170.485 577.277 170.918C578.989 172.318 580.713 173.705 582.425 175.105C583.408 175.908 584.644 176.392 585.631 177.199C586.18 177.648 586.687 178.195 587.322 178.536C588.046 178.926 588.844 179.181 589.568 179.57C590.528 180.087 591.182 181.021 592.142 181.538C593.24 182.129 594.529 182.687 595.499 183.48C596.234 184.081 596.834 184.847 597.569 185.448C598.379 186.111 599.507 186.394 600.42 186.886C601.07 187.236 605.788 191 606.68 191.73C607.671 192.54 608.956 192.8 610.062 193.395C611.85 194.357 618.959 199.315 619.778 200.836C620.85 202.826 617.977 204.573 616.699 206.134C616.133 206.826 615.39 207.375 614.958 208.177C614.12 209.732 613.524 211.416 612.686 212.971C612.021 214.205 611.077 215.273 610.415 216.502C610.095 217.097 609.928 217.795 609.38 218.243C608.459 218.996 607.342 219.529 606.124 219.529C604.36 219.529 601.875 217.408 600.521 216.3C597.579 213.894 593.974 212.299 591.032 209.893C590.293 209.289 589.6 208.63 588.861 208.026C588.345 207.604 587.579 207.425 586.565 206.916C584.592 204.876 582.093 204.395 580.179 202.829C579.077 201.928 578.177 200.779 577.075 199.878C575.697 198.751 572.137 197.445 570.084 195.766C569.155 195.007 568.457 194.022 567.535 193.268C566.89 192.741 565.848 192.554 565.112 192.158C563.879 191.495 563.025 190.317 561.806 189.661C560.939 189.194 554.395 185.894 553.755 185.726C552.561 184.366 551.733 183.076 550.221 181.942C549.197 181.132 545.83 178.94 544.416 178.662C543.464 177.514 542.468 177.034 541.59 176.316C540.762 175.639 540.07 174.798 539.243 174.121C537.99 173.097 536.659 172.169 535.406 171.145C534.246 170.195 532.618 170.129 531.318 169.429C530.588 169.037 529.958 168.409 529.324 167.89C528.664 167.351 527.834 167.039 527.179 166.503C525.174 164.863 523.192 163.174 520.894 161.937C519.395 161.13 518.115 159.936 516.629 159.137C515.469 158.513 514.019 158.057 512.995 157.219C512.585 156.884 512.074 156.24 511.859 155.201C510.661 154.193 509.383 153.839 508.351 153.284C506.41 152.239 502.577 148.714 499.694 149.223C498.707 149.397 498.409 150.224 497.599 150.66C496.567 151.216 495.247 150.937 494.167 151.518C493.554 151.848 493.012 152.417 492.476 152.855C490.516 154.458 487.262 155.904 485.283 157.522C484.493 158.168 483.932 159.017 483.138 159.666C481.576 160.944 479.536 161.449 477.787 162.391C477.758 162.407 471.354 166.941 471.149 167.108C470.211 167.876 469.392 168.7 468.373 169.379C466.973 170.312 462.748 172.603 462.064 173.163C461.095 173.955 460.205 174.843 459.237 175.635C458.402 176.317 457.332 177.01 456.587 178.41C455.774 178.978 453.7 178.988 452.826 179.57C451.929 180.168 451.184 180.959 450.353 181.639C450.179 181.781 445.418 185.032 445.255 185.12C444.484 185.535 443.662 185.856 442.453 186.482C441.363 187.751 440.111 188.226 439.097 189.056C436.775 190.954 434.251 192.606 431.929 194.505C430.681 195.525 429.005 195.841 427.739 196.876C426.926 197.541 425.963 197.985 425.19 198.617C424.407 199.257 423.719 200.026 422.944 200.66C422.436 201.075 421.748 201.371 421.001 202.123C420.249 202.311 419.973 202.511 419.486 203.132C416.585 204.072 414.647 206.232 413.984 206.588C413.22 207 412.319 207.038 411.561 207.446C410.789 207.862 410.14 208.585 409.467 209.136C408.573 209.867 407.458 210.297 406.564 211.028C405.826 211.632 405.132 212.291 404.394 212.895C403.403 213.705 402.062 213.934 401.062 214.711C400.463 215.177 400.009 215.77 399.422 216.25C397.724 217.638 395.111 218.379 393.743 220.791C392.209 221.234 390.862 221.091 389.453 220.286C388.796 219.397 386.756 217.522 386.575 216.982C386.12 215.615 386.424 198.131 386.424 194.555L386.676 194.303C387.934 193.96 388.677 193.546 389.427 193.142C391.198 192.19 394.128 189.817 396.292 188.652C397.894 187.79 399.687 187.068 401.113 185.902C401.998 185.178 403.029 184.633 403.914 183.909C405.536 182.583 407.214 181.326 408.836 179.999C410.704 178.471 413.147 177.62 415.019 176.089C416.263 175.071 417.384 173.903 418.628 172.885C420.342 171.483 422.623 170.948 424.357 169.53C426.449 167.82 434.789 161.8 436.926 160.65C438.323 159.898 440.026 159.445 441.267 158.43C442.121 157.732 442.556 156.688 443.387 156.009C444.384 155.193 445.558 154.84 446.668 154.243C447.437 153.829 448.222 153.445 448.99 153.032C450.69 152.117 452.251 150.663 453.735 149.45C454.773 148.601 456.119 148.188 457.167 147.33C460.068 144.959 461.873 143.556 465.218 141.755C466.851 140.876 468.388 139.691 469.812 138.526C470.182 138.224 470.424 137.796 470.796 137.492C471.456 136.953 472.379 137.144 473.093 136.76C474.105 136.216 474.889 135.037 476.046 134.414C478.248 133.229 483.398 129.846 485.308 128.284C486.673 127.168 490.903 125.639 491.163 123.416L491.921 123.163Z" fill="black"></path><path d="M498.23 181.689C501.365 181.689 504.502 182.06 506.609 183.783C507.152 184.227 507.728 184.734 508.351 185.07C509.053 185.447 509.833 185.763 510.496 186.205C511.072 186.589 511.591 187.232 512.364 187.996C512.972 188.33 516.671 189.948 518.295 191.276C519.263 192.067 520.153 192.956 521.121 193.748C522.468 194.849 524.233 195.283 525.563 196.371C529.448 199.548 533.611 202.682 538.056 205.075C538.694 205.418 539.218 205.972 539.848 206.311C540.525 206.675 541.27 206.882 541.943 207.244C542.526 207.558 547.637 211.855 548.631 212.668C549.864 213.676 551.619 213.758 552.846 214.762C553.881 215.608 554.314 216.949 555.547 217.612C556.433 218.09 557.385 218.447 558.272 218.924C559.07 219.353 559.746 220.008 560.544 220.438C564.066 222.333 569.523 225.992 572.633 228.535C573.392 229.156 574.33 229.565 575.182 230.024C576.933 230.966 582.053 234.772 583.713 236.129C586.202 238.164 589.763 239.586 592.168 241.552C593.187 242.386 594.252 243.165 595.272 243.999C595.73 244.374 596.076 244.886 596.534 245.261C597.27 245.863 602.931 248.762 604.206 249.448C605.402 250.092 606.57 251.61 607.689 252.526C609.977 254.397 612.762 255.436 615.034 257.294C616.235 258.277 620.035 260.392 620.283 261.633C620.599 263.211 617.568 266.149 616.598 267.334C615.458 268.728 614.771 270.402 613.923 271.976C612.75 274.154 610.873 275.981 609.633 278.283C609.464 278.596 609.144 278.831 608.774 279.569C607.833 279.804 607.347 280.125 606.781 280.225C603.405 280.82 602.599 278.079 600.118 276.744C599.337 276.324 598.475 276.054 597.695 275.634C596.842 275.175 596.225 274.377 595.373 273.918C594.032 273.197 589.557 270.538 588.508 269.68C587.446 268.812 586.44 267.875 585.378 267.006C584.341 266.157 582.994 265.745 581.946 264.887C581.306 264.363 580.742 263.696 580.003 263.298C579.302 262.921 578.507 262.648 577.883 262.138C575.899 260.515 573.942 258.755 571.649 257.521C569.984 256.625 568.174 255.794 566.601 254.746C566.002 254.347 565.365 253.965 564.809 253.51C563.93 252.791 560.168 249.363 559.812 249.171C558.523 248.477 557.071 248.103 555.774 247.405C554.44 246.687 550.105 243.365 548.783 242.284C547.4 241.153 544.755 239.398 543.18 238.55C541.884 237.853 540.476 237.303 539.318 236.356C538.433 235.632 537.402 235.087 536.517 234.363C535.78 233.76 535.134 233.048 534.397 232.446C533.212 231.476 528.05 228.998 525.942 227.274C524.029 225.709 519.051 221.431 517.159 220.412C516 219.789 514.785 219.27 513.626 218.647C512.66 218.127 512.067 217.148 511.102 216.628C510.43 216.267 509.671 216.095 509.032 215.67C508.142 215.077 507.46 214.2 506.635 213.526C506.329 213.276 500.271 210.124 499.997 210.069C498.345 209.739 497.194 211.597 495.908 212.289C495.062 212.745 484.997 219.653 484.223 220.286C483.232 221.096 481.83 220.73 480.891 221.497C479.979 222.244 479.292 223.264 478.368 224.02C477.712 224.556 476.882 224.868 476.222 225.407C475.575 225.936 474.951 226.493 474.304 227.022C473.388 227.771 472.252 228.185 471.225 228.737C470.101 229.342 469.268 230.353 468.146 230.957C467.469 231.322 466.701 231.703 466.102 232.193C464.656 233.376 462.973 234.27 461.534 235.448C460.886 235.977 460.366 236.658 459.615 237.062C458.782 237.511 457.875 237.824 457.041 238.273C456.371 238.634 455.733 239.182 455.148 239.66C454.772 239.968 454.31 240.189 453.886 240.417C451.083 241.926 448.571 244.462 445.961 245.866C444.989 246.39 443.844 246.741 442.453 247.531C441.324 248.834 440.479 248.859 439.728 249.474C439.168 249.932 438.846 250.608 438.289 251.063C437.21 251.946 435.909 252.528 434.831 253.409C434 254.089 433.214 254.823 432.383 255.503C431.363 256.337 429.996 256.652 428.85 257.269C426.846 258.347 424.355 261.046 422.515 262.037C421.791 262.426 420.993 262.681 420.269 263.071C419.308 263.588 418.655 264.522 417.694 265.039C416.691 265.579 415.478 266.002 414.59 266.729C413.411 267.693 409.633 270.445 408.381 271.118C407.82 271.421 407.177 271.573 406.615 271.875C404.757 272.875 403.557 274.781 400.81 275.281C399.968 276.332 397.96 278.517 397.63 278.787C396.772 279.489 395.747 279.956 394.778 280.477C394.032 280.879 393.497 281.594 392.759 281.991C392.374 282.198 391.834 282.348 391.396 282.294C389.325 282.035 389.063 279.191 387.989 277.879C387.52 277.306 386.774 277.062 386.525 276.315C386.175 275.266 386.296 257.323 386.676 254.847C387.994 254.637 389.006 254.438 389.932 253.939C391.212 253.25 392.248 251.976 393.365 251.063C394.342 250.263 395.466 249.642 396.444 248.843C398.547 247.123 401.192 245.88 403.561 244.605C405.537 243.541 408.031 241.431 409.795 239.988C410.885 239.097 412.213 238.725 413.429 238.071C414.633 237.423 417.53 234.506 419.764 233.303C421.262 232.497 422.582 231.36 424.08 230.554C426.266 229.377 428.722 228.386 430.667 226.795C432.011 225.696 433.411 224.665 434.756 223.566C435.49 222.966 436.066 222.173 436.8 221.573C437.815 220.742 441.378 219.109 442.706 218.394C444.467 217.446 445.85 215.538 447.526 214.636C448.772 213.965 450.253 213.576 451.362 212.668C452.748 211.535 454.127 209.768 456.082 208.682C456.566 207.943 456.795 207.474 457.268 207.219C457.922 206.867 458.694 206.859 459.338 206.512C461.232 205.493 463.021 204.278 464.916 203.258C466.108 202.616 468.692 200.697 469.787 199.802C470.252 199.421 470.54 198.865 470.998 198.49C472.648 197.141 476.533 195.259 478.544 194.177C480.702 193.015 482.428 191.115 484.299 189.585C486.032 188.168 488.204 187.406 490.154 186.356C491.922 185.405 493.173 183.742 494.924 182.799C495.789 182.334 496.717 182.294 498.23 181.689Z" fill="black"></path><path d="M517.916 298.994C521.114 298.994 524.158 299.355 526.876 299.498C530.483 299.688 534.121 299.309 537.728 299.498C542.322 299.74 547.451 300.102 552.013 300.608C555.178 300.96 558.799 300.103 561.452 302.273C562.061 302.771 562.427 303.492 562.916 304.09C563.402 304.683 563.883 305.424 564.128 306.158C564.525 307.351 564.355 308.73 564.355 309.967C564.355 311.412 563.946 312.673 563.27 313.928C562.677 315.027 561.67 316.244 560.443 316.652C555.993 318.135 545.278 314.398 543.331 320.235C542.834 321.725 542.872 323.329 542.372 324.826C541.95 326.093 541.046 327.139 540.631 328.383C540.288 329.412 540.313 330.537 540.05 331.587C539.526 333.684 538.009 336.204 538.183 339.155C538.267 340.594 538.87 341.972 539.318 343.317C539.725 344.538 539.997 345.805 540.404 347.026C540.765 348.108 541.41 349.038 541.943 350.027C542.601 351.249 544.433 355.778 544.896 357.167C545.769 359.784 546.116 362.54 546.991 365.164C547.461 366.573 550.241 373.07 550.928 374.346C551.359 375.146 551.926 375.978 552.215 376.844C552.525 377.772 552.94 378.665 553.25 379.593C553.677 380.873 553.69 382.356 554.335 383.554C554.629 384.098 555.212 384.467 555.799 384.613C558.967 385.405 561.93 379.731 564.784 378.508C565.795 378.076 567.755 377.216 568.721 376.894C569.384 376.673 574.278 375.46 574.829 375.431C576.428 375.347 577.712 376.073 579.22 376.339C582.264 376.876 585.926 376.64 588.458 378.71C589.649 379.684 590.547 381.016 591.739 381.99C593.627 383.534 595.855 385 597.417 386.909C598.468 388.192 599.124 389.72 600.042 391.097C600.837 392.289 602.133 393.104 602.818 394.376C603.582 395.793 603.921 397.396 604.686 398.816C605.588 400.49 606.629 402.273 607.235 404.088C607.534 404.986 607.743 405.915 608.043 406.813C608.523 408.253 609.554 409.429 610.036 410.874C610.502 412.269 610.084 413.791 610.541 415.163C610.842 416.066 611.505 416.791 611.803 417.686C612.32 419.237 612.287 421.007 612.686 422.605C612.983 423.791 613.482 424.924 613.696 426.137C613.888 427.225 614.008 428.327 614.201 429.416C614.443 430.788 614.916 432.125 615.16 433.503C616.784 442.705 616.346 451.761 616.346 461.076C616.346 469.082 616.563 476.157 615.16 484.108C614.814 486.068 614.34 487.825 613.923 490.187C613.574 492.165 612.783 494.041 612.434 496.015C612.056 498.155 611.941 500.318 611.248 502.397C610.357 505.069 608.861 507.738 608.27 509.511C607.878 510.686 607.702 511.921 607.311 513.093C606.972 514.109 606.141 514.796 605.645 515.717C604.819 517.251 604.397 519.583 603.272 521.67C602.666 522.795 601.733 523.699 601.127 524.824C600.653 525.704 600.239 526.617 599.764 527.498C599.189 528.565 597.908 529.089 596.912 530.323C596.4 531.087 596.225 531.742 595.827 532.139C594.583 533.383 592.012 536.25 590.603 537.008C589.829 537.425 588.99 537.704 588.256 538.194C586.921 539.083 585.47 540.181 583.94 540.691C582.646 541.122 581.363 540.679 580.053 540.843C578.67 541.015 577.349 541.441 575.939 541.524C573.326 541.677 567.012 540.456 564.683 539.203C562.192 537.862 560.641 535.819 558.676 533.855C557.707 532.886 556.398 532.277 555.521 531.206C554.949 530.507 554.529 529.685 553.957 528.986C553.505 528.434 552.97 527.949 552.518 527.397C551.751 526.459 551.399 525.103 550.827 524.042C549.782 522.102 548.217 520.458 547.117 518.416C546.208 516.728 545.978 514.647 545.376 512.841C544.908 511.438 544.152 510.132 543.685 508.729C542.907 506.398 542.115 504.072 541.337 501.741C541.097 501.02 540.566 500.436 540.328 499.723C539.994 498.721 540.235 497.628 539.899 496.62C539.517 495.474 538.821 494.449 538.435 493.29C537.992 491.962 537.949 490.497 537.754 489.128C537.574 487.869 537.217 486.645 536.996 485.394C536.361 481.793 536.626 477.917 535.987 474.294C535.89 473.743 535.663 473.142 535.305 472.705C532.749 469.581 526.501 471.797 523.09 471.797C520.494 471.797 517.858 471.661 515.266 471.797C513.637 471.883 512.093 472.469 510.471 472.554C506.779 472.748 503.057 472.36 499.366 472.554C498.007 472.625 496.695 472.806 495.328 472.806C493.403 472.806 486.381 473.191 485.056 472.478C484.457 472.156 484.202 471.463 483.794 470.965C481.671 468.371 481.342 466.944 480.311 463.851C479.765 462.214 478.84 460.7 478.292 459.058C477.303 456.093 476.209 452.389 475.667 449.32C475.535 448.572 475.547 447.798 475.415 447.05C475.318 446.499 475.095 445.876 474.784 445.41C474.413 444.854 474.014 444.306 473.699 443.72C473.136 442.676 473.083 441.519 472.714 440.415C472.248 439.018 471.437 437.745 470.973 436.353C470.322 434.402 470.642 432.232 469.988 430.274C469.728 429.493 469.216 428.815 468.954 428.029C468.555 426.833 468.141 425.642 467.742 424.446C467.013 422.259 466.882 419.899 466.152 417.711C465.242 414.981 464.059 412.343 463.149 409.613C462.886 408.825 462.402 408.13 462.139 407.343C461.681 405.97 461.761 404.492 461.306 403.13C460.396 400.4 459.592 397.635 458.682 394.906C458.179 393.399 458.3 391.744 457.798 390.239C457.534 389.447 457.049 388.75 456.789 387.969C456.555 387.268 456.586 386.526 456.334 385.269L456.082 385.017H454.063C453.331 385.973 450.764 394.171 451.539 396.495C452.453 399.234 454.022 401.752 455.375 404.265C456.053 405.522 456.391 407.008 456.839 408.352C457.306 409.75 458.115 411.017 458.581 412.413C459.917 416.42 460.283 419.532 461.004 423.614C461.57 426.821 462.967 429.875 463.149 433.326C463.232 434.897 463.851 441.926 464.083 443.24C464.291 444.423 464.719 445.621 464.789 446.823C464.791 446.85 464.769 471.429 464.764 471.52C464.718 472.295 464.445 473.077 464.31 473.84C464.018 475.491 464.046 477.182 463.755 478.835C463.513 480.204 463.012 481.528 462.77 482.897C462.457 484.674 462.1 486.443 461.786 488.22C461.524 489.701 461.771 491.246 461.508 492.735C461.442 493.113 458.37 505.475 458.303 505.677C457.613 507.745 455.063 512.916 453.962 514.96C453.373 516.053 453.269 517.364 452.675 518.467C452.057 519.614 448.064 526.987 447.728 527.397C446.629 528.739 445.571 530.116 444.472 531.458C444.022 532.009 443.434 532.447 442.983 532.997C442.516 533.568 442.247 534.285 441.696 535.368C440.554 536.312 439.155 536.765 438.188 537.286C437.55 537.629 437.009 538.153 436.371 538.497C434.623 539.437 432.78 540.214 430.894 540.843C429.368 541.351 427.747 541.088 426.175 541.171C425.463 541.208 424.687 541.394 423.979 541.347C422.023 541.217 416.956 540.958 415.322 540.414C413.903 539.941 408.786 536.857 407.877 535.747C407.015 534.694 406.233 533.455 405.353 531.837L400.81 528.305C400.514 527.122 400.336 526.218 399.952 525.505C399.381 524.445 398.559 523.496 397.983 522.427C396.703 520.051 395.679 517.538 394.399 515.162C394.002 514.423 393.34 513.844 392.936 513.093C392.705 512.665 390.006 505.368 389.705 504.466C389.111 502.684 388.617 496.587 386.676 495.51C386.098 493.85 386.424 478.271 386.424 475.707C386.424 463.767 386.424 451.826 386.424 439.885C386.424 436.649 386.05 424.951 386.676 422.1C388.19 420.732 388.134 419.421 388.645 417.887C388.843 417.295 389.279 416.794 389.478 416.197C389.785 415.277 389.915 414.225 390.084 413.271C390.127 413.027 392.615 404.014 392.784 403.508C393.058 402.686 394.191 402.223 394.627 401.414C395.178 400.391 395.414 399.232 395.964 398.211C396.648 396.941 400.305 391.058 400.305 389.558H400.81V388.801L402.072 388.549C403.502 386.983 405.506 385.236 406.615 383.882C408.735 381.291 411.236 378.306 414.565 377.197C416.743 376.471 419.55 376.036 421.834 375.633C424.909 375.09 429.707 376.002 432.686 376.995C434.847 377.715 437.232 378.366 438.541 375.935C440.346 372.585 439.919 367.627 440.586 363.852C440.944 361.822 442.115 360.653 442.352 359.311C442.675 357.483 442.281 355.597 442.605 353.761C442.895 352.116 443.374 350.497 443.463 348.817C443.556 347.042 443.557 345.172 443.867 343.418C444.191 341.581 444.804 339.797 445.255 337.994C445.54 336.853 445.715 335.655 446.088 334.538C446.433 333.502 447.211 332.735 447.552 331.713C448.054 330.207 447.855 327.421 448.662 325.003C449.222 323.324 449.24 321.502 449.798 319.831C450.185 318.67 450.643 317.567 450.858 316.35C451.445 313.026 450.838 309.86 454.341 307.974C458.28 305.854 464.661 306.794 469.08 306.562C469.826 306.522 470.546 306.363 471.276 306.234C471.611 306.175 481.484 305.073 481.951 305.048C482.958 304.995 483.973 305.101 484.98 305.048C486.479 304.969 487.889 304.656 489.397 304.922C490.756 305.162 494.21 308.055 494.874 309.286C495.208 309.908 495.387 310.544 495.429 311.254C495.472 311.995 495.241 312.759 495.202 313.499C494.832 320.521 491.968 320.807 485.914 321.874C484.845 322.063 483.801 322.397 482.709 322.455C478.462 322.678 470.749 321.556 467.111 323.514C466.658 323.758 466.292 324.277 466.051 324.725C465.607 325.55 464.238 331.125 464.032 332.293C463.708 334.132 461.638 338.985 462.518 340.618C463.653 342.724 466.35 342.028 468.323 342.132C469.082 342.171 469.835 342.344 470.594 342.384C474.941 342.612 479.364 342.384 483.718 342.384C492.047 342.384 500.376 342.384 508.704 342.384C510.789 342.384 517.561 342.089 519.052 340.87C520.752 339.48 519.639 336.588 520.188 334.942C520.783 333.156 522.558 328.668 523.418 327.071C524.222 325.58 525.454 324.194 525.992 322.581C526.333 321.56 526.245 320.359 526.245 319.301C526.245 316.088 524.554 315.787 521.828 315.643C521.069 315.603 520.316 315.431 519.557 315.391C517.107 315.262 513.988 315.515 511.985 313.878C510.978 313.054 510.496 311.58 510.193 310.371C509.8 308.8 509.205 307.333 509.613 305.704C509.964 304.299 510.165 302.975 511.102 301.264C513.31 299.102 514.66 299.246 517.916 298.994ZM467.944 358.781C466.984 359.508 466.602 360.204 466.531 360.774C466.42 361.661 468.874 373.319 469.332 374.169C469.624 374.711 470.019 375.218 470.216 375.809C470.577 376.893 470.423 378.075 470.619 379.19C470.918 380.879 471.901 382.327 472.437 383.932C472.791 384.996 472.865 386.125 473.219 387.186C473.615 388.374 474.865 388.993 475.263 390.188C475.575 391.122 475.473 392.13 475.642 393.09C475.946 394.812 476.658 396.44 477.207 398.084C477.589 399.23 477.705 400.485 477.913 401.667C478.096 402.699 478.773 404.698 479.125 405.753C479.772 407.694 480.923 409.43 481.573 411.379C481.9 412.36 482.03 413.405 482.355 414.381C482.799 415.71 483.399 416.915 483.743 418.291C484.241 420.28 484.006 422.509 484.652 424.446C485.053 425.65 485.966 426.57 486.368 427.776C486.963 429.561 486.646 434.796 489.725 434.411C491.546 434.183 491.592 431.742 491.744 430.375C492.109 427.095 493.388 424.942 494.394 421.924C494.828 420.622 494.97 419.238 495.404 417.938C495.636 417.24 495.953 416.592 496.186 415.895C496.511 414.918 496.641 413.873 496.968 412.893C497.291 411.924 497.907 411.086 498.23 410.118C498.688 408.745 499.236 407.403 499.694 406.031C500.319 404.158 500.312 402.108 500.653 400.178C501.037 398.007 502.032 395.994 502.723 393.922C503.214 392.45 503.269 390.872 503.757 389.406C503.995 388.695 504.42 388.03 504.717 387.338C505.206 386.197 505.409 384.935 506.004 383.831C506.743 382.459 507.527 381.03 508.023 379.543C508.538 377.999 508.689 376.373 509.083 374.8C509.395 373.551 509.554 371.822 509.89 370.814C510.17 369.977 510.343 369.104 510.622 368.266C510.945 367.298 511.59 366.475 511.909 365.517C512.232 364.548 512.582 361.042 512.111 360.169C511.818 359.624 511.126 359.151 510.547 358.958C508.935 358.421 503.399 358.781 501.385 358.781C490.406 358.781 479.428 358.781 467.944 358.781ZM529.021 367.863C528.183 368.961 527.931 369.689 527.583 370.335C527.234 370.983 526.733 371.571 526.497 372.277C525.949 373.921 525.964 376.246 525.261 378.357C524.882 379.494 524.103 380.467 523.721 381.611C523.181 383.231 522.52 384.81 521.98 386.43C520.886 389.71 520.985 392.035 520.364 393.897C518.638 399.074 518.65 397.132 517.538 403.433C517.354 404.474 513.138 414.96 512.389 417.206C512.031 418.279 512.155 419.458 511.96 420.562C511.683 422.132 510.843 423.506 510.345 425.001C509.85 426.485 509.853 428.091 509.36 429.567C509.081 430.405 507.384 435.147 507.114 435.647C506.129 437.475 505.2 439.419 504.54 441.399C503.838 443.503 503.905 445.774 503.202 447.882C502.674 449.467 501.086 452.238 501.41 453.861C502.046 457.037 506.148 455.904 508.452 455.904C510.364 455.904 512.112 455.247 514.004 455.147C518.686 454.901 523.449 455.147 528.138 455.147C529.072 455.147 529.984 454.944 530.914 454.895C532.319 454.821 534.07 454.992 535.078 453.76C535.41 453.355 535.666 452.951 535.76 452.423C536.23 449.761 535.886 447.46 536.037 444.88C536.188 442.325 536.851 433.295 537.224 431.182C537.349 430.47 538.366 425.032 538.435 424.825C538.894 423.449 539.749 422.008 540 420.587C540.158 419.693 540.014 418.729 540.303 417.862C540.607 416.949 541.581 416.607 542.019 415.794C542.511 414.879 542.349 413.757 542.524 412.766C543 410.068 544.523 407.6 544.669 404.82C544.741 403.45 543.787 402.528 543.382 401.313C542.367 398.269 542.404 397.768 540.807 394.805C539.273 391.957 537.821 384.468 536.037 381.157C535.229 379.656 535.055 377.958 534.523 376.364C534.134 375.197 531.821 369.365 531.04 368.367L529.021 367.863ZM423.525 412.766C421.127 413.019 419.574 414.151 418.275 415.213C417.247 416.054 415.827 416.41 414.969 417.459C414.41 418.141 414.165 418.979 413.682 419.704C410.379 424.655 408.026 428.445 406.968 434.436C406.428 437.498 404.879 442.656 404.268 446.116C403.905 448.17 403.862 469.026 404.217 471.04C404.431 472.253 404.986 473.379 405.201 474.597C405.589 476.79 406.076 478.964 406.463 481.156C406.684 482.408 406.747 483.689 406.968 484.94C407.219 486.361 410.456 492.893 411.309 494.476C411.999 495.756 413.093 496.778 413.783 498.058C414.132 498.708 414.287 499.918 414.943 500.808C416.134 501.448 416.967 501.79 417.72 502.195C421.899 504.445 424.931 505.089 429.506 503.129C430.877 502.542 432.15 501.86 433.115 500.682C433.992 499.61 436.554 494.803 437.355 493.315C439.473 489.384 442.21 485.382 442.453 480.753C442.539 479.126 442.345 477.501 442.63 475.884C443.057 473.464 443.967 472.18 444.119 471.318C444.56 468.822 444.22 461.307 444.22 458.301C444.22 456.133 444.45 447.237 443.968 445.309L441.949 444.804C441.404 445.879 440.953 446.252 440.712 446.974C440.518 447.554 439.516 455.007 439.273 456.383C438.982 458.033 438.233 459.553 437.709 461.126C437.216 462.603 436.994 464.166 436.724 465.692C436.369 467.706 434.529 471.221 432.661 472.226C431.499 472.851 429.729 472.806 428.446 472.806C427.286 472.806 425.787 472.791 424.736 472.226C422.793 471.18 420.86 467.492 420.748 465.364C420.597 462.499 422.179 459.7 422.666 456.938C422.841 455.949 422.769 454.93 422.944 453.936C423.405 451.323 423.694 448.679 424.156 446.066C424.322 445.121 424.746 444.236 424.913 443.291C425.52 439.853 426.098 436.411 426.705 432.973C426.998 431.31 427.956 429.838 428.244 428.205C428.367 427.508 428.317 426.79 428.396 426.086C428.515 425.015 428.533 423.807 428.875 422.781C429.373 421.289 430.24 419.887 430.44 418.291C430.889 414.7 427.097 412.766 423.525 412.766ZM574.45 413.019C572.328 413.867 571.256 414.496 570.008 415.516C569.461 415.963 568.814 416.363 568.469 417.005C567.698 418.434 568.18 420.983 568.671 422.454C569.309 424.367 569.846 424.377 570.69 427.751C571.829 432.306 574.435 436.257 575.914 440.692C577.043 444.078 577.915 447.55 579.044 450.935C580.192 454.377 582.473 457.554 582.274 461.328C582.208 462.586 581.676 463.647 581.189 464.784C580.47 466.462 579.335 468.545 577.378 468.997C576.732 469.146 576.062 469.025 575.409 469.098C573.349 469.327 571.339 469.418 569.276 469.527C567.555 469.617 565.877 470.106 564.153 470.208C561.889 470.341 557.816 468.828 556.783 471.923C555.577 475.54 557.674 478.89 558.525 482.291C558.739 483.15 558.801 484.021 558.954 484.89C559.324 486.984 561.13 489.865 562.159 491.777C562.704 492.787 562.682 494.008 563.219 495.006C563.933 496.33 565.107 497.341 566.046 498.487C566.976 499.624 567.645 501.102 568.797 502.044C571.609 504.343 576.099 504.531 579.473 503.936C580.867 503.69 581.768 503.079 582.905 502.321C583.798 501.727 584.859 501.28 585.555 500.429C588.193 497.206 589.939 491.499 591.991 487.69C592.425 486.884 592.995 486.15 593.43 485.344C593.76 484.73 594.066 481.416 594.439 480.298C594.786 479.257 595.384 478.323 595.726 477.296C596.593 474.698 596.155 464.89 596.155 461.58C596.155 456.537 596.593 445.057 595.827 440.718C595.619 439.541 594.82 438.453 594.439 437.312C593.757 435.266 594.035 432.85 593 430.93C592.302 429.633 591.453 428.417 590.754 427.12C589.088 424.027 587.91 419.68 585.101 417.383C584.398 416.808 583.372 416.84 582.678 416.273C582.22 415.899 581.887 415.363 581.517 414.911C580.058 413.128 577.057 413.019 574.45 413.019ZM557.54 442.786C556.143 444.5 556.026 446.218 556.026 447.705C556.026 448.781 555.706 449.866 555.824 450.935C556.061 453.068 558.846 455.108 560.569 453.003C562.226 450.979 560.12 443.609 557.54 442.786Z" fill="black"></path><path d="M1040.87 227.513L1056.99 237.053C1056.92 238.86 1051.36 247.001 1050.31 248.961C1048.59 252.147 1032.17 279.696 1031 281.132C1041.58 281.132 1051.34 281.132 1061.1 281.132C1064.75 281.132 1071.31 280.458 1074.52 282.184C1075.07 282.481 1075.52 282.944 1076 283.336C1080.64 287.135 1078.81 287.274 1080.01 290.342L1080.18 409.257L1080.34 528.171L1107.97 528.5V491L1108.3 490.671H1127.05C1127.05 504.432 1127.05 517.371 1127.05 530.309C1127.05 535.29 1128.19 541.997 1123.86 545.539C1120.14 548.585 1113.07 547.579 1108.47 547.579C1099.7 547.579 1090.92 547.579 1082.15 547.579C1078.22 547.579 1074.23 547.785 1070.31 547.579C1066.09 547.357 1061.26 544.427 1061.26 539.026L1061.1 419.783L1060.93 300.539C1055.93 300.042 1051.42 300.211 1046.95 300.211C1038.07 300.211 1029.19 300.211 1020.31 300.211C1012.94 300.211 1006.34 301.252 1004.03 291.987V290.342C1005 284.823 1008.79 281.046 1011.07 276.822C1015.55 268.5 1021.5 260.555 1025.97 252.25C1027.21 249.939 1028.87 247.85 1030.11 245.539C1031.01 243.866 1040.28 228.44 1040.87 227.513Z" fill="black"></path><path d="M1232.32 301.855V537.711L1231.99 539.684L1232.32 301.855Z" fill="black"></path><path d="M1212.91 301.691C1212.91 298.166 1212.72 294.581 1213.24 290.671V291V526.855V527.842C1212.73 522.726 1212.91 518.108 1212.91 513.533C1212.91 504.432 1212.91 495.331 1212.91 486.23C1212.91 456.844 1212.91 427.458 1212.91 398.072C1212.91 373.182 1212.91 348.292 1212.91 323.401C1212.91 316.164 1212.91 308.928 1212.91 301.691Z" fill="black"></path><path d="M1232.32 301.526C1232.82 306.643 1232.64 311.26 1232.64 315.836C1232.64 324.936 1232.64 334.037 1232.64 343.138C1232.64 372.414 1232.64 401.691 1232.64 430.967C1232.64 455.638 1232.64 480.309 1232.64 504.98C1232.64 512.217 1232.64 519.454 1232.64 526.691C1232.64 530.216 1232.83 533.8 1232.32 537.711V301.855V301.526Z" fill="black"></path><path d="M1126.72 86.7237C1127.26 90.9042 1127.37 121.582 1126.76 123.434C1125.8 126.297 1109.81 150.778 1106.89 156.197C1105.79 158.231 1104.36 160.085 1103.27 162.118C1098.92 170.191 1093.34 177.598 1088.99 185.671C1087.56 188.328 1085.62 190.711 1084.19 193.368C1082.71 196.112 1069.4 218.091 1067.84 220.605C1064.22 219.125 1054.29 213.154 1051.07 211.066L1126.72 86.7237Z" fill="black"></path><path d="M1166.2 87.7105L1241.86 211.395C1240.73 212.216 1228.28 219.879 1226.69 220.737C1226.24 220.98 1225.67 221.159 1225.18 220.934C1224.29 220.53 1221.54 215.512 1220.93 214.388C1217.72 208.422 1213.59 202.953 1210.38 196.987C1208.53 193.556 1206.07 190.451 1204.22 187.02C1198.36 176.131 1190.91 166.099 1185.05 155.211C1183.16 151.702 1180.72 148.489 1178.83 144.98C1176.78 141.18 1167.07 126.746 1166.43 124.158C1165.72 121.322 1166.2 94.0928 1166.2 87.7105Z" fill="black"></path><path d="M1182.32 335.737C1193.23 335.737 1200.09 353.385 1201.56 361.724C1201.71 362.589 1202.16 363.378 1202.32 364.257C1202.82 367.105 1202.09 372.239 1203.04 375.868H1194.16L1193.83 375.539C1193.83 371.986 1192.83 369.472 1191.92 366.757C1190.54 362.601 1189.06 356.84 1183.73 356.526C1180.11 356.313 1177.38 360.946 1175.9 363.697C1175.12 365.144 1174.84 366.827 1174.32 368.368C1173.61 370.491 1172.78 372.427 1172.78 375.539L1172.45 375.868H1163.57C1163.57 374.289 1163.85 373.345 1163.89 372.414C1164.06 369.294 1164.2 366.164 1164.75 363.072C1166.17 355.049 1171.77 340.872 1179.29 336.822C1180.01 336.433 1180.78 336.359 1182.32 335.737Z" fill="black"></path><path d="M1163.57 389.026H1172.45L1172.78 389.355C1172.78 394.799 1177.76 408.669 1183.99 408.303C1189.56 407.975 1191.2 399.986 1192.58 395.836C1193.23 393.885 1193.83 392.274 1193.83 389.355L1194.16 389.026H1203.04C1203.04 391.566 1202.48 393.539 1202.38 395.441C1202.29 397.144 1202.55 398.882 1202.25 400.572C1202.09 401.455 1201.68 402.256 1201.53 403.138C1200.34 409.881 1197.32 418.216 1192.97 423.533C1190.09 427.06 1187.25 429.907 1182.28 429.355C1181.31 429.248 1180.2 429.169 1179.32 428.697C1175.16 426.457 1171.6 420.61 1169.42 416.559C1167.99 413.894 1165.27 404.647 1164.72 401.526C1164.16 398.391 1164.19 392.772 1163.57 389.026Z" fill="black"></path><path d="M1109.95 334.421C1113.07 334.421 1114.94 335.498 1116.76 336.987C1124.14 343.032 1128.39 355.517 1129.42 364.783C1129.6 366.431 1130.05 374.317 1130.34 375.868H1121.79L1121.46 375.539C1120.95 373.722 1121.16 372.246 1120.93 370.967C1120.29 367.319 1117.26 359.2 1114.36 356.822C1112.92 355.645 1111.43 355.035 1109.55 355.243C1104.67 355.786 1102.9 362.905 1101.62 366.724C1100.76 369.324 1099.75 371.917 1099.75 375.539L1099.42 375.868H1090.87C1090.87 371.624 1091.39 370.76 1091.53 368.138C1091.78 363.383 1092.68 358.554 1094.19 354.026C1094.67 352.586 1095.39 351.223 1095.87 349.783C1096.11 349.055 1096.29 348.297 1096.66 347.612C1097.34 346.341 1098.14 345.133 1098.83 343.862C1100.56 340.645 1105.13 334.75 1109.95 334.421Z" fill="black"></path><path d="M1091.2 389.026H1100.08C1100.08 391.563 1101.07 393.426 1101.66 395.178C1103.05 399.36 1104.39 406.032 1109.62 406.954C1113.54 407.647 1117.43 401.949 1118.5 398.73C1119 397.23 1119.38 395.691 1119.88 394.191C1120.32 392.866 1121.13 391.618 1121.13 389.355L1121.46 389.026H1130.34C1129.4 392.031 1129.67 397.603 1129.16 400.507C1128.56 403.869 1126.41 411.711 1124.85 414.618C1123.89 416.394 1122.88 418.139 1121.92 419.914C1121.1 421.436 1119.61 422.505 1118.5 424.553C1117.13 425.646 1115.75 426.807 1114.62 427.414C1112.53 428.537 1108.7 428.499 1106.63 427.382C1104.89 426.446 1102.71 424.211 1101.46 422.678C1096.45 416.556 1093 406.752 1091.63 398.961C1091.31 397.193 1091.2 392.14 1091.2 389.026Z" fill="black"></path><path d="M1140.54 209.421C1142.41 209.421 1143.74 209.287 1144.85 209.882C1152.12 213.795 1153.9 232.147 1145.57 238.961C1142.47 241.497 1140.1 239.412 1137.91 237.217C1137.14 236.453 1136.29 235.713 1135.77 234.75C1135.07 233.445 1134.52 231.937 1134.06 230.539C1132.77 226.677 1133.65 217.131 1136.3 213.895C1137.41 212.53 1138.99 211.482 1140.54 209.421Z" fill="black"></path><path d="M1152.71 241.987C1153.58 242.509 1153.92 242.881 1154.09 243.401C1154.66 245.113 1154.84 246.96 1155.41 248.664C1156.69 252.518 1157.58 256.495 1158.86 260.342C1159.88 263.394 1160.31 266.658 1161.33 269.717C1162.25 272.484 1172.26 307.991 1172.28 308.434C1172.37 309.92 1168.66 323.961 1167.94 326.132C1167.03 328.877 1166.6 331.82 1165.9 334.618C1164.95 338.426 1162.12 349.635 1161.07 352.809C1159.78 356.652 1159.35 360.772 1158.07 364.618C1157.1 367.522 1154.73 377.09 1154.19 380.145C1153.53 383.883 1151.54 389.924 1150.54 393.928C1150.14 395.515 1148.98 401.238 1148.4 402.316C1148.27 402.563 1147.98 402.842 1147.68 402.842C1146.87 402.842 1144.34 399.898 1143.66 399.224C1138.42 393.974 1137.15 395.419 1139.88 387.217C1140.2 386.253 1140.23 385.175 1140.47 384.191C1142.37 376.61 1145.32 365.525 1146.62 358.105C1146.89 356.609 1148.21 352.825 1148.57 350.836C1149.15 347.526 1150.35 344.345 1150.93 341.033C1151.33 338.794 1152.12 336.618 1152.51 334.388C1153.37 329.515 1154.76 324.801 1156 319.289C1154.36 319.738 1144.52 326.15 1144.26 326.724C1143.37 328.666 1147.01 347.93 1146.26 350.178C1145.61 352.151 1139.08 355.724 1136.59 357.447C1136.59 355.906 1136.22 355.056 1136.07 354.191C1135.87 353.079 1136 351.947 1135.8 350.836C1134.67 344.394 1133.95 337.903 1132.81 331.461C1132.62 330.374 1132.67 329.258 1132.48 328.171C1132.11 326.1 1130.86 319.708 1131.26 317.941C1131.7 316.063 1149.62 303.452 1150.87 301.493C1151.74 300.128 1149.97 296.484 1149.59 294.947C1149.28 293.744 1143.93 275.304 1143.83 274.224L1143.5 273.895H1142.51C1140.61 279.528 1133.12 299.58 1130.67 303.5C1129.69 300.401 1126.07 293.307 1125.84 291.395C1125.6 289.474 1129.44 280.122 1130.28 277.612C1131.41 274.212 1135.97 259.903 1137.58 257.941C1139.63 255.433 1142.43 253.541 1144.49 251.033C1146.19 248.952 1150.32 244.354 1152.71 241.987Z" fill="black"></path><path d="M1284.16 280.441C1285.69 283.288 1289.31 287.794 1289.09 291.099C1289.05 291.804 1288.67 292.405 1288.5 293.072C1288.15 294.453 1287.83 295.641 1286.92 296.757C1283.23 301.263 1276.82 300.211 1271.62 300.211C1258.85 300.211 1246.08 300.211 1232.64 300.211L1232.32 300.539V301.526V301.855L1231.99 539.684C1231.99 544.002 1227.25 547.579 1222.45 547.579H1222.12C1209.02 547.579 1196.73 547.579 1184.45 547.579C1179.39 547.579 1172.81 548.664 1168.66 545.276C1164.45 541.825 1165.54 535.115 1165.54 530.309C1165.54 517.316 1165.54 504.322 1165.54 490.671H1184.62V528.5H1213.24V527.842V526.855C1213.75 522.945 1213.57 519.36 1213.57 515.836C1213.57 508.599 1213.57 501.362 1213.57 494.125C1213.57 469.454 1213.57 444.783 1213.57 420.112C1213.57 390.945 1213.57 361.779 1213.57 332.612C1213.57 323.511 1213.57 314.41 1213.57 305.309C1213.57 300.734 1213.74 296.116 1213.24 291V290.671C1213.57 289.01 1213.51 288.115 1213.96 287.283C1214.52 286.243 1218.4 282.49 1219.45 281.921C1221.73 280.693 1229.04 281.132 1231.82 281.132C1241.42 281.132 1251.01 281.132 1261.26 281.132L1235.28 238.039C1240.38 235.486 1246.64 230.498 1251.03 228.303C1251.29 228.173 1251.71 228.092 1251.99 228.204C1252.67 228.476 1260.57 241.611 1261.46 243.27C1262.82 245.788 1264.64 248.054 1266 250.572C1269.93 257.875 1274.96 264.585 1278.89 271.888C1280.48 274.83 1282.57 277.498 1284.16 280.441Z" fill="black"></path><path d="M891.238 198.697C892.547 198.697 893.55 198.63 894.336 199.053C896.079 199.992 899.03 203.473 899.975 205.227C900.54 206.277 900.817 207.46 901.379 208.504C901.634 208.976 902.026 209.344 902.36 209.752C903.536 211.189 904.505 212.795 905.681 214.232C906.565 215.312 907.091 216.649 907.977 217.731C910.303 220.575 914.086 223.464 916.379 226.268C917.176 227.242 917.454 228.547 918.252 229.522C919.852 231.478 923.509 235.147 924.537 237.055C925.435 238.723 926.205 241.001 927.39 242.449C928.675 244.019 930.497 245.008 931.758 246.55C932.627 247.612 932.976 249.005 933.831 250.05C934.664 251.068 935.606 251.996 936.439 253.014C937.135 253.864 938.553 256.217 939.671 257.583C942.307 260.804 945.148 263.857 947.784 267.078C948.925 268.473 949.429 270.253 950.57 271.647C951.774 273.119 952.954 274.611 954.158 276.083C954.476 276.471 955.023 276.772 955.429 277.598C958.583 280.884 957.381 280.08 959.04 282.569C961.548 286.331 960.778 284.638 960.778 289.077C960.778 295.314 958.616 294.062 955.786 295.006C954.702 295.367 953.682 295.915 952.598 296.276C951.649 296.592 950.519 296.714 949.522 296.766C946.569 296.922 943.565 296.766 940.607 296.766C933.995 296.766 927.382 296.766 920.77 296.766C918.769 296.766 911.687 296.466 910.25 296.945C909.464 297.207 908.192 298.219 907.798 298.951C907.603 299.312 907.447 299.678 907.375 300.087C906.988 302.281 907.286 311.579 907.286 314.486C907.286 327.265 907.286 340.043 907.286 352.822C907.286 357.131 907.286 361.44 907.286 365.75C907.286 366.786 907.61 369.678 906.773 370.363C905.751 371.199 902.681 370.764 901.379 370.764C898.542 370.764 888.302 371.053 886.29 370.698C884.091 370.31 884.774 367.136 884.774 365.527C884.774 364.398 884.61 363.305 884.551 362.183C884.517 361.541 884.625 360.926 884.663 360.289C884.7 359.647 884.585 359.031 884.551 358.394C884.466 356.772 884.634 355.068 884.73 353.446C884.788 352.459 884.551 350.476 884.551 349.256C884.551 344.002 884.295 335.623 884.551 330.756C884.64 329.063 884.863 327.328 884.774 325.63C884.669 323.629 884.88 321.617 884.774 319.612C884.735 318.875 884.512 318.122 884.551 317.383C884.587 316.713 884.739 316.048 884.774 315.377C884.834 314.243 884.61 313.158 884.551 312.034C884.449 310.083 884.672 308.176 884.774 306.239C884.834 305.105 884.61 304.02 884.551 302.896C884.388 299.79 884.774 296.637 884.774 293.535C884.774 291.349 884.298 289.173 884.685 286.982C885.222 283.941 886.532 282.653 887.003 280.05L888.34 279.381C889.316 278.249 890.485 278.326 891.55 278.022C893.072 277.587 894.37 276.698 895.963 276.417C898.672 275.939 914.336 276.261 918.318 276.261C920.735 276.261 925.942 276.647 928.036 275.949C928.47 275.804 928.779 275.524 928.995 275.124C930.048 273.168 927.832 271.064 926.565 269.797C924.805 268.037 921.982 264.565 920.815 262.397C920.395 261.618 919.86 260.809 919.299 260.124C918.568 259.23 917.4 258.744 916.669 257.851C914.915 255.707 913.681 253.159 911.922 251.008C911.155 250.071 910.303 249.203 909.537 248.266C908.796 247.361 908.252 246.3 907.508 245.391C906.599 244.279 904.632 243.139 902.627 240.688C902.084 240.025 900.089 236.451 899.574 235.495C899.569 235.486 891.242 224.667 891.126 224.551C889.538 222.963 884.666 218.438 883.704 217.263C882.907 216.288 882.637 214.992 881.832 214.009C880.93 212.906 879.784 211.874 879.982 210.287C880.201 208.536 881.822 208.202 882.768 206.498C883.682 205.772 885.178 204.581 885.889 203.712C886.442 203.036 888.345 200.709 888.897 200.257C889.418 199.831 890.08 199.153 891.238 198.697Z" fill="black"></path><path d="M814.342 227.449C815.565 227.449 816.353 227.408 817.128 227.449C818.225 227.507 822.281 228.44 823.213 228.942C824.721 229.754 825.847 231.041 827.047 232.241C827.719 232.914 828.595 233.341 829.209 234.091C830.532 235.708 831.091 239.009 830.434 240.978C830.236 241.572 829.734 241.915 829.275 242.828C828.415 243.493 827.8 243.96 827.426 244.656C826.846 245.732 827.524 252.49 827.18 254.44C826.895 256.056 825.601 257.225 825.353 258.631C824.932 261.015 825.39 261.679 823.926 264.225C822.721 265.284 821.453 265.377 820.405 265.941C817.939 267.269 816.086 268.31 813.384 266.855C812.412 266.332 811.484 265.648 810.776 264.782C809.747 263.524 809.254 261.866 808.748 260.347C808.354 259.166 807.624 258.136 807.232 256.959C806.066 253.461 807.12 249.711 806.719 246.104C806.456 243.736 803.59 243.268 802.908 241.223C801.214 236.14 805.513 231.354 809.662 229.121C810.899 228.454 812.503 228.065 814.342 227.449Z" fill="black"></path><path d="M887.003 475.967C890.666 475.967 893.933 475.798 897.144 475.967C897.881 476.005 898.635 476.228 899.373 476.189C900.195 476.146 901 475.967 901.825 475.967C902.959 475.967 906.129 475.605 906.862 476.502C907.281 477.013 907.669 477.648 907.709 478.329C907.77 479.363 907.34 480.394 907.286 481.427C907.099 484.971 907.286 488.576 907.286 492.126C907.286 503.121 907.286 514.117 907.286 525.113C907.286 527.557 907.649 535.524 907.04 537.349C906.811 538.038 904.442 541.887 903.942 542.498C903.411 543.147 902.423 543.455 901.647 543.635C900.864 543.815 888.742 543.724 886.892 543.724C875.227 543.724 863.563 543.724 851.898 543.724C847.314 543.724 842.657 543.483 838.08 543.724C837.337 543.763 836.612 544.152 835.873 544.103C835.219 544.059 834.81 543.492 833.733 543.278C833.514 542.403 833.386 541.852 833.354 541.317C833.316 540.664 833.476 540.026 833.51 539.378C833.724 535.317 833.51 531.186 833.51 527.119C833.51 523.532 833.092 509.698 833.912 507.237C834.189 506.404 834.899 505.626 835.672 505.209C837.328 504.318 842.478 504.719 844.543 504.719C846.879 504.719 849.944 504.235 851.898 505.833C853.546 507.181 852.772 509.96 852.679 511.74C852.578 513.644 852.369 519.285 853.191 520.811C854.926 524.034 857.633 522.902 859.722 523.062C865.459 523.504 871.321 523.218 877.085 523.218C879.289 523.218 882.412 523.763 884.195 522.305C884.508 522.048 884.66 521.671 884.73 521.279C884.926 520.164 884.551 519.087 884.551 517.981C884.551 515.408 884.837 512.847 884.685 510.269C884.603 508.868 884.75 506.919 884.685 505.811C884.446 501.75 884.513 497.06 884.752 492.995C884.855 491.243 884.551 489.429 884.551 487.668C884.551 486.033 884.621 484.431 884.73 482.809C884.784 481.991 884.547 481.183 884.596 480.357C884.649 479.449 884.774 478.551 884.774 477.081L887.003 475.967Z" fill="black"></path><path d="M754.163 198.028C756.834 198.028 758.723 200.978 760.292 202.263C761.11 202.931 761.927 203.6 762.744 204.269C763.709 205.058 764.209 206.096 765.753 206.943C768.808 209.895 766.615 212.172 765.218 214.767C764.712 215.707 764.183 216.675 763.502 217.508C762.544 218.679 761.155 219.461 760.181 220.651C758.91 222.204 757.663 223.778 756.392 225.331C755.893 225.941 755.286 226.461 754.787 227.07C754.193 227.796 753.178 228.417 752.402 229.366C752.267 229.531 747.981 237.023 747.9 237.122C747.127 238.067 742.902 242.656 742.35 243.72H741.681L739.453 246.617C738.119 247.823 736.902 248.756 735.953 249.916C735.846 250.046 732.465 254.865 732.454 254.886C732.012 255.707 731.531 256.658 730.938 257.382C729.736 258.852 728.193 259.995 726.993 261.461C726.433 262.146 726.341 263.182 725.923 263.958C725.4 264.929 723.888 266.718 723.137 267.635C722.102 268.901 718.085 272.546 717.788 273.831C717.659 274.39 717.833 274.929 717.833 276.038C719.517 276.549 725.548 276.261 727.305 276.261C734.215 276.261 741.124 276.261 748.034 276.261C749.316 276.261 750.621 276.193 751.89 276.417C753.543 276.709 755.023 277.432 756.592 277.955C757.447 278.24 758.469 278.194 759.267 278.623C759.871 278.949 760.454 279.356 760.894 279.894C761.911 281.137 761.884 283.331 761.964 284.842C762.032 286.131 762.564 287.335 762.633 288.631C762.789 291.595 762.477 294.583 762.633 297.546C762.711 299.043 762.935 300.495 762.856 302.004C762.792 303.203 762.569 304.36 762.633 305.57C762.668 306.241 762.82 306.906 762.856 307.576C763.008 310.467 763.008 324.3 762.856 327.19C762.82 327.861 762.668 328.526 762.633 329.196C762.482 332.058 762.482 338.593 762.633 341.455C762.668 342.126 762.82 342.79 762.856 343.461C762.964 345.527 762.741 347.644 762.633 349.702C762.522 351.8 762.746 353.859 762.856 355.943C762.937 357.498 762.774 359.067 762.856 360.623C762.986 363.104 763.838 367.917 762.165 369.962C761.219 371.118 758.372 370.809 756.994 370.809C754.34 370.809 743.884 371.015 742.083 370.698C741.126 370.529 740.18 369.582 739.876 368.669C739.659 368.017 739.675 354.952 739.675 353.268C739.675 340.489 739.675 327.71 739.675 314.932C739.675 311.382 739.862 307.777 739.675 304.233C739.621 303.198 739.342 302.193 739.163 301.18C739.002 300.268 739.1 299.185 738.65 298.349C738.327 297.749 737.879 297.126 737.201 296.9C735.947 296.482 728.509 296.766 726.637 296.766C720.024 296.766 713.412 296.766 706.8 296.766C703.842 296.766 700.837 296.922 697.884 296.766C696.533 296.695 695.202 296.402 693.895 296.075C690.424 295.208 688.177 295.068 686.651 291.506C686.326 290.749 685.955 289.966 686.004 289.121C686.046 288.423 686.482 287.767 686.651 287.093C687.141 285.133 687.855 283.145 689.147 281.566C690.323 280.129 691.292 278.523 692.468 277.086C693.669 275.618 694.967 274.229 696.168 272.762C697.492 271.143 698.901 268.233 700.046 266.833C700.916 265.77 703.961 261.497 705.128 260.882C707.164 258.822 709.062 256.425 710.299 254.128C710.846 253.113 711.118 251.914 711.859 251.008C712.59 250.115 713.514 249.382 714.244 248.489C714.787 247.825 715.103 246.993 715.648 246.327C716.704 245.038 718.33 244.238 719.393 242.939C720.063 242.121 720.684 241.262 721.354 240.443C722.533 239.002 723.385 237.293 724.564 235.852C725.092 235.207 725.768 234.635 726.169 233.89C726.664 232.97 726.808 231.747 727.461 230.948C728.791 229.323 730.537 228.081 731.874 226.446C733.88 223.994 735.886 221.542 737.892 219.091C738.556 218.279 739.39 217.607 740.054 216.795C741.851 214.599 743.499 211.049 744.178 210.22C744.974 209.246 745.989 208.452 746.785 207.478C748.065 205.914 750.162 201.865 751.533 200.19C752.182 199.397 753.433 199.001 754.163 198.028Z" fill="black"></path><path d="M828.83 267.345C832.762 267.345 832.737 273.854 833.889 275.993C836.182 280.251 834.914 279.869 835.695 282.212C835.958 283.003 836.59 283.606 836.854 284.396C837.262 285.621 837.334 286.951 837.745 288.185C838.093 289.229 838.979 290.013 839.328 291.06C839.713 292.218 839.61 293.405 839.818 294.582C839.994 295.58 840.794 296.35 841.111 297.301C841.503 298.479 841.324 299.768 841.713 300.934C842.119 302.155 843.288 303.922 844.209 306.685C844.494 307.54 845.038 308.281 845.323 309.137C845.68 310.207 845.654 311.377 846.014 312.458C846.385 313.571 847.133 314.522 847.508 315.645C847.953 316.982 847.624 318.384 847.864 319.746C848.081 320.977 848.943 322.003 849.335 323.178C849.812 324.61 849.796 326.165 850.271 327.591C850.484 328.231 850.931 328.768 851.141 329.397C851.531 330.568 851.619 331.814 852.01 332.985C852.531 334.548 853.395 335.221 853.503 337.064C853.619 339.029 852.246 340.417 851.921 342.257C851.69 343.563 851.862 344.895 851.631 346.202C851.37 347.683 850.696 348.961 850.227 350.37C849.776 351.723 849.985 353.235 849.536 354.583C849.077 355.96 848.117 357.276 847.864 358.706C847.584 360.296 847.791 362.094 847.441 364.078C847.33 364.703 847.066 365.324 846.817 365.906C845.589 368.769 846.015 369.603 845.301 371.745C844.954 372.785 844.018 373.668 843.83 374.732C843.615 375.949 843.874 377.186 843.473 378.387C843.079 379.571 842.22 380.453 841.824 381.641C841.283 383.263 841.588 385.025 841.044 386.656C840.777 387.457 840.214 388.121 839.952 388.907C839.502 390.257 839.688 391.749 839.238 393.098C838.821 394.351 838.183 395.507 837.767 396.753C837.466 397.659 837.535 398.653 837.233 399.561C836.871 400.645 836.323 401.665 835.962 402.749C835.511 404.101 835.72 405.613 835.271 406.961C834.897 408.084 834.106 408.987 833.733 410.104C833.257 411.531 833.722 413.081 833.243 414.517C832.829 415.76 831.929 416.719 831.527 417.927C831.132 419.111 831.389 420.434 830.992 421.627C830.574 422.88 829.983 424.074 829.565 425.327C829.192 426.446 829.161 427.656 828.785 428.782C828.446 429.801 827.806 430.693 827.47 431.701C826.698 434.018 826.922 434.318 825.732 437.095C824.84 439.176 825.823 442.998 824.238 444.295C822.934 445.361 821.02 442.863 819.87 442.244C818.475 441.493 817.185 440.453 815.969 439.458C813.796 437.68 812.815 438.472 811.066 435.223C810.615 434.385 810.163 433.451 809.996 432.504C809.675 430.687 811.927 425.239 812.581 423.276C813.039 421.902 813.014 420.419 813.473 419.042C813.867 417.859 814.611 416.976 814.832 415.721C815.129 414.042 814.757 412.246 815.301 410.616C815.624 409.647 816.249 408.84 816.571 407.875C816.976 406.66 816.883 405.333 817.284 404.13C817.775 402.659 818.659 401.316 818.934 399.762C819.262 397.902 818.684 395.921 819.29 394.101C819.591 393.199 820.46 391.959 820.026 391.003C819.328 389.467 818.386 390.32 817.463 390.936C815.312 392.37 814.062 393.787 812.559 396.396C810.808 398.079 809.049 395.787 808.815 394.457C808.613 393.318 808.703 392.116 808.503 390.98C808.241 389.497 807.185 388.272 806.92 386.768C806.613 385.026 806.915 383.249 806.608 381.508C806.362 380.113 805.567 378.903 805.226 377.54C804.824 375.932 804.786 373.857 804.312 372.436C803.903 371.21 803.233 370.295 802.953 368.892C802.602 367.14 802.877 365.233 802.306 363.521C801.987 362.563 801.279 361.775 800.969 360.846C800.469 359.347 800.263 354.602 800.612 353.09C800.788 352.328 801.111 351.536 801.861 350.705C802.684 349.705 803.217 348.868 804.112 348.387C805.655 347.556 807.374 347.127 808.926 346.292C809.869 345.784 810.676 345.041 811.623 344.531C812.918 343.834 814.162 343.044 815.457 342.347C815.95 342.081 816.501 341.921 816.994 341.656C818.324 340.94 819.177 339.432 820.561 338.803C824.014 337.233 822.575 338.694 827.492 335.771C827.74 334.782 827.91 334.162 827.871 333.498C827.816 332.562 826.904 329.982 826.445 329.129C826.191 328.659 825.835 328.191 825.665 327.681C825.27 326.495 825.235 325.232 824.84 324.048C824.54 323.148 823.755 322.531 823.458 321.64C823.117 320.617 823.175 319.497 822.834 318.475C822.674 317.994 821.385 315.986 820.962 314.998C820.327 313.516 819.061 308.872 816.348 309.471C815.875 310.164 815.368 310.575 815.122 311.031C814.789 311.65 814.762 312.4 814.431 313.015C813.307 315.103 812.302 317.257 811.177 319.345C810.621 320.378 810.551 321.591 809.996 322.621C809.324 323.869 807.406 327.36 807.009 328.55C806.264 330.786 806.519 331.767 804.981 334.434C801.887 335.208 801.053 331.76 800.568 329.82C799.811 326.791 799.583 327.355 798.941 325.429C797.647 321.548 797.67 319.032 798.963 315.154C799.321 314.08 799.944 313.104 800.3 312.034C800.658 310.961 800.657 309.806 801.014 308.735C801.3 307.876 801.869 307.151 802.15 306.306C802.445 305.422 802.48 304.47 802.774 303.587C803.149 302.464 803.94 301.561 804.312 300.444C804.646 299.443 804.692 298.37 805.026 297.368C805.285 296.591 806.474 293.946 806.875 293.2C807.308 292.396 807.983 291.749 808.413 290.949C809.193 289.501 809.393 287.87 810.575 286.424C811.181 285.684 818.816 277.413 819.134 277.152C819.955 276.481 820.718 275.791 821.474 275.035C824.411 272.099 823.424 271.4 828.83 267.345Z" fill="black"></path><path d="M823.035 114C824.191 114 824.893 114.018 825.576 114.245C827.143 114.768 831.338 117.549 832.374 118.814C833.559 120.264 834.403 121.963 835.583 123.406C836.685 124.753 837.824 126.07 838.926 127.418C840.217 128.994 842.539 130.818 843.094 131.497C843.763 132.314 844.432 133.131 845.1 133.948C845.637 134.604 846.393 135.033 846.928 135.687C847.868 136.835 847.874 138.367 848.555 139.632C849.231 140.886 850.286 142.143 851.185 143.243C851.917 144.138 852.771 144.933 853.503 145.828C854.151 146.62 854.531 147.605 855.175 148.391C855.676 149.004 856.189 149.606 856.69 150.219C857.054 150.664 857.636 150.904 858.005 151.356C859.981 153.77 861.847 156.274 863.823 158.689C864.554 159.582 865.454 160.336 866.185 161.23C867.068 162.308 867.615 163.621 868.503 164.707C869.234 165.599 870.158 166.333 870.888 167.225C871.83 168.376 874.208 171.258 874.833 172.418C875.364 173.404 875.854 174.483 876.572 175.36C877.037 175.929 877.623 176.397 878.087 176.965C878.786 177.819 881.731 181.734 881.787 182.582C881.886 184.057 880.464 184.722 879.648 186.215C878.68 187.002 877.01 187.998 876.193 188.667C874.516 190.038 873.392 191.951 871.713 193.325C871.067 193.853 870.246 194.116 869.417 194.061C866.476 193.865 863.373 189.392 861.594 187.218C860.831 186.285 859.861 185.521 859.098 184.588C858.234 183.533 857.153 182.657 856.289 181.601C855.232 180.309 854.632 178.709 853.57 177.411C853.004 176.719 852.205 176.263 851.631 175.561C850.718 174.445 847.723 168.902 846.661 167.604C845.8 166.552 844.624 165.758 843.763 164.707C842.809 163.541 834.698 153.653 834.402 153.005C833.166 151.911 832.218 150.942 831.371 149.907C829.508 147.63 827.878 144.535 824.483 144.535C823.536 144.535 822.392 144.889 821.653 145.494C820.104 146.761 818.881 148.355 817.463 149.773C816.613 150.623 815.564 151.276 814.788 152.225C814.253 152.879 813.718 153.533 813.183 154.186C812.349 155.206 811.454 156.176 810.62 157.195C809.842 158.147 809.327 159.296 808.547 160.249C807.951 160.977 807.137 161.527 806.541 162.255C805.872 163.072 805.204 163.889 804.535 164.707C803.91 165.47 802.943 166.083 802.173 167.025C800.435 169.148 799.383 171.92 797.626 174.068C796.717 175.178 795.2 175.62 794.282 176.742C793.308 177.933 792.981 179.522 792.009 180.71C790.905 182.059 789.814 183.417 788.71 184.766C787.928 185.722 786.595 186.337 785.813 187.775C783.69 189.883 782.436 193.793 779.238 193.793C777.285 193.793 775.935 191.218 774.869 189.915C771.239 185.478 766.949 184.076 768.873 178.303C769.638 176.009 772.019 174.73 773.509 172.909C774.835 171.288 775.618 169.266 776.942 167.649C777.582 166.866 778.475 166.345 779.104 165.576C780.246 164.179 781.171 162.604 782.313 161.207C782.978 160.396 783.811 159.723 784.475 158.912C785.215 158.008 785.809 156.985 786.548 156.081C787.682 154.695 788.913 153.388 790.048 152.002C790.755 151.138 791.72 150.553 792.499 149.773C793.384 148.889 794.16 147.843 794.951 146.876C795.059 146.744 796.712 145.219 797.581 144.156C797.968 143.684 799.922 140.956 800.167 140.501C800.893 139.151 800.868 137.44 801.883 136.199C802.612 135.309 803.583 134.616 804.312 133.725C804.989 132.898 805.462 131.924 806.14 131.095C807.249 129.74 809.096 128.622 810.263 127.195C812.678 124.244 814.105 120.486 817.128 118.012C817.978 117.317 819.939 115.727 820.828 115.248C821.357 114.963 822.11 114.699 823.035 114Z" fill="black"></path><path d="M863.6 372.325C866.128 372.325 867.574 372.892 869.506 372.993C870.458 373.043 871.411 372.886 872.359 372.949C872.781 372.977 873.258 373.127 873.63 373.328C875.004 374.068 878.075 378.538 879.246 379.97C882.248 383.638 883.487 385.202 885.019 389.799C885.425 391.016 886.065 392.086 886.379 393.343C886.674 394.524 886.597 395.826 886.981 396.976C887.203 397.644 887.652 398.255 887.984 398.87C888.971 400.705 888.68 403.418 888.786 405.423C888.86 406.834 889.692 407.918 890.123 409.212C890.852 411.397 891.047 415.508 889.098 417.102C887.653 418.285 885.391 417.947 883.682 418.061C882.243 418.157 877.969 418.396 876.906 417.526C875.354 416.256 875.596 413.593 875.279 411.798C875.13 410.955 874.804 410.144 874.655 409.301C874.472 408.261 874.415 407.199 874.232 406.159C874.026 404.996 872.421 401.937 871.802 400.787C870.913 399.135 867.944 394.616 865.896 394.48C864.29 394.373 862.827 396.256 862.151 397.511C861.77 398.219 861.644 399.065 861.326 399.806C861.093 400.352 860.716 400.845 860.435 401.367C859.894 402.371 859.725 403.674 859.365 404.755C859.042 405.724 858.252 406.458 858.072 407.474C857.597 410.169 858.484 414.326 856.668 416.545C854.817 418.807 847.314 418.348 844.209 417.793C843.919 416.635 843.369 416.218 843.317 415.23C843.222 413.415 843.59 411.619 843.696 409.814C843.731 409.224 843.624 408.639 843.585 408.053C843.499 406.76 843.652 403.261 844.031 402.124C844.453 400.858 845.262 399.873 845.591 398.558C845.923 397.229 845.819 395.869 846.259 394.546C846.562 393.639 847.255 392.941 847.552 392.05C847.843 391.177 847.93 390.249 848.221 389.375C848.536 388.43 849.239 387.658 849.558 386.701C849.984 385.422 849.911 384.007 850.561 382.8C851.137 381.73 851.749 380.58 852.522 379.635C853.573 378.351 856.213 375.437 857.604 374.687C859.373 373.735 861.155 373.083 863.6 372.325Z" fill="black"></path><path d="M847.552 429.161C850.178 429.161 855.658 429.521 857.114 431.3C858.203 432.631 857.887 434.174 857.805 435.736C857.766 436.474 857.964 440.503 858.095 441.241C858.285 442.32 859.048 443.164 859.387 444.183C859.813 445.459 859.947 446.911 860.591 448.106C861.109 449.068 864.082 452.717 865.026 453.032C867.477 453.848 869.791 451.696 871.178 450C871.518 449.585 871.921 449.258 872.181 448.775C872.542 448.104 872.554 447.287 872.917 446.613C873.312 445.878 873.939 445.084 874.142 444.272C874.501 442.84 874.223 441.412 874.298 439.971C874.407 437.908 875.329 432.836 876.527 430.721C878.529 428.752 887.586 428.878 889.321 430.297C889.838 430.72 890.119 431.353 890.324 431.969C891.647 435.937 888.9 439.579 888.786 441.754C888.669 443.978 888.864 446.143 888.474 448.351C888.255 449.594 887.203 450.605 886.802 451.806C886.419 452.956 886.25 454.177 885.866 455.327C885.634 456.023 885.229 456.66 884.997 457.356C884.43 459.056 883.961 460.775 883.102 462.371C882.491 463.506 881.485 464.356 880.874 465.491C880.577 466.042 880.454 466.684 880.16 467.229C879.007 469.371 877.603 471.247 875.703 472.802C874.887 473.469 873.577 473.614 872.605 473.938C871.588 474.277 870.707 474.912 869.685 475.253C869.214 475.41 868.699 475.48 868.214 475.565C866.066 475.944 863.653 475.65 861.594 474.964C860.878 474.725 860.104 474.59 859.432 474.228C855.399 472.057 851.903 468.492 850.427 464.064C850.106 463.102 849.879 462.107 849.558 461.145C849.274 460.291 848.704 459.562 848.421 458.715C848.06 457.631 848.113 456.451 847.753 455.372C847.414 454.356 846.752 453.483 846.415 452.474C846.027 451.311 845.91 450.066 845.524 448.908C845.061 447.52 844.367 446.286 844.008 444.852C843.184 441.554 844.354 437.543 843.607 434.554C843.447 433.912 843.282 433.285 843.317 432.615C843.342 432.138 843.422 431.593 843.652 431.167C844.298 429.965 845.878 429.738 847.552 429.161Z" fill="black"></path><path d="M755.5 475.744C756.473 475.744 756.998 475.887 757.529 475.922C761.835 476.209 762.421 477.854 762.633 481.873C762.739 483.899 762.856 485.607 762.856 487.668C762.856 489.752 762.519 491.83 762.41 493.909C762.342 495.194 762.566 496.424 762.633 497.698C762.785 500.588 762.785 503.946 762.633 506.836C762.554 508.33 762.117 511.304 762.187 512.631C762.24 513.634 762.472 514.647 762.789 515.596C763.563 517.919 762.678 520.814 764.772 522.527C765.859 523.416 770.405 523.218 771.882 523.218C774.753 523.218 791.536 523.517 792.901 523.062C795.511 522.192 794.393 516.741 794.282 514.637C794.203 513.128 794.427 511.676 794.505 510.18C794.575 508.854 794.598 507.429 795.241 506.234C796.423 504.039 800.827 504.826 802.864 504.719C803.913 504.664 804.928 504.496 805.984 504.496C807.454 504.496 810.985 504.497 812.225 505.165C814.269 506.266 814.232 511.199 814.342 513.3C814.495 516.202 814.271 519.105 814.119 521.992C813.898 526.201 814.119 530.482 814.119 534.697C814.119 536.869 814.857 541.106 813.451 543.278C812.508 543.514 811.951 543.691 811.333 543.724C810.119 543.788 808.911 543.586 807.7 543.657C803.659 543.895 799.559 543.724 795.508 543.724C783.692 543.724 771.888 543.724 760.069 543.724C756.826 543.724 748.213 544.155 745.582 543.278C744.291 542.848 743.238 541.924 742.395 540.893C741.63 539.958 740.943 538.71 740.612 537.55C740.023 535.491 739.343 530.323 739.453 528.233C739.488 527.563 739.64 526.898 739.675 526.227C739.8 523.865 739.675 521.461 739.675 519.095C739.675 513.82 739.675 508.545 739.675 503.27C739.675 497.317 739.675 491.382 739.675 485.439C739.675 482.746 738.907 479.946 740.567 477.081C741.095 477.081 741.22 476.651 741.458 476.189L755.5 475.744Z" fill="black"></path><path d="M778.458 372.102C781.144 372.773 784.38 372.776 786.37 373.439C787.273 373.74 788.163 374.37 789 374.821C789.809 375.256 790.754 375.547 791.474 376.136C792.985 377.372 793.551 379.195 794.751 380.661C795.48 381.552 796.428 382.265 797.158 383.157C798.302 384.556 798.393 386.418 798.941 388.06C799.264 389.031 800.026 389.752 800.211 390.802C800.48 392.327 800.338 393.899 800.59 395.326C800.861 396.863 802.094 398.277 802.396 399.985C802.581 401.037 802.457 402.097 802.574 403.15C802.944 406.477 804.017 406.575 804.424 408.878C804.598 409.866 804.535 410.888 804.535 411.887C804.535 414.104 804.502 416.277 802.306 417.459C800.976 418.176 799.209 418.239 797.737 418.239C796.531 418.239 793.92 418.155 792.834 417.793C792.188 417.578 791.734 417.143 791.318 416.634C789.535 414.455 790.625 412.487 790.181 409.97C789.985 408.855 789.04 408.06 788.688 407.006C788.21 405.573 788.189 404.009 787.462 402.659C787.157 402.094 786.699 401.624 786.392 401.055C784.975 398.422 784.341 394.871 780.33 394.636C778.723 394.541 776.844 396.448 776.14 397.756C775.777 398.429 775.711 399.265 775.471 399.985C775.069 401.191 774.051 403.126 773.866 404.175C773.581 405.79 773.929 407.457 773.643 409.079C773.369 410.632 772.462 411.955 771.972 413.425C771.522 414.772 772.012 416.422 771.035 417.615C770.602 418.145 769.584 418.18 768.963 418.217C768.308 418.255 767.633 418.051 766.979 418.016C764.802 417.902 762.594 418.022 760.426 418.15C759.849 418.184 759.291 418.016 758.175 418.016L757.952 417.793C757.464 416.372 757.546 415.634 757.484 414.584C757.272 410.976 757.321 411.172 757.506 407.652C757.545 406.911 757.467 406.164 757.506 405.423C757.631 403.047 758.904 401.587 759.223 399.784C759.463 398.423 759.314 396.97 759.757 395.639C760.005 394.895 760.534 394.29 760.783 393.543C761.12 392.532 761.404 391.502 761.741 390.49C762.269 388.907 763.078 388.153 763.547 386.277C763.687 385.715 763.804 385.098 764.081 384.583C764.389 384.013 764.824 383.53 765.307 382.577C766.329 381.728 767.349 381.233 767.982 380.46C770.554 377.316 773.296 372.325 778.458 372.102Z" fill="black"></path><path d="M760.404 429.383C762.862 429.383 767.519 429.043 769.208 429.606C769.891 429.834 770.694 430.457 771.147 431.011C771.605 431.57 772.931 435.476 773.019 436.271C773.261 438.448 773.366 442.528 774 444.428C774.319 445.385 775.018 446.146 775.337 447.103C775.676 448.12 776.031 449.188 776.541 450.134C777.742 452.365 780.464 454.098 782.982 452.742C784.38 451.989 785.595 449.989 786.192 448.596C786.785 447.212 787.89 445.215 788.131 443.849C788.335 442.692 788.312 441.522 788.688 440.394C789.088 439.194 789.91 438.227 790.137 436.939C790.544 434.632 789.927 432.812 791.385 430.275C792.891 428.873 801.982 429.17 804.089 430.721C804.729 433.278 804.8 437.303 804.067 439.502C803.609 440.877 802.939 442.257 802.685 443.693C802.309 445.823 802.595 447.994 802.217 450.134C802.015 451.28 801.378 452.295 801.014 453.388C800.633 454.529 800.413 455.724 800.033 456.865C799.75 457.715 799.201 458.436 798.852 459.25C798.55 459.953 798.334 460.668 798.094 461.39C797.999 461.673 795.975 466.051 795.709 466.583C795.154 467.692 791.308 472.399 790.27 472.958C789.027 473.627 787.651 473.504 786.348 473.938C784.874 474.43 784.087 475.43 782.358 475.521C781.316 475.576 780.321 475.41 779.304 475.231C776.882 474.804 775.894 475.075 773.576 473.827C770.987 472.433 768.03 467.848 766.399 465.402C765.728 464.395 764.879 463.438 764.304 462.371C764.06 461.917 761.971 457.11 761.808 456.62C761.498 455.69 761.405 454.699 761.095 453.767C760.811 452.916 760.192 452.219 759.913 451.382C759.448 449.985 759.554 448.477 759.089 447.081C758.692 445.89 757.845 444.937 757.618 443.648C757.023 440.276 757.06 434.733 757.506 430.944H758.175V430.721H757.729C758.58 430.209 759.204 429.849 760.404 429.383Z" fill="black"></path></svg><figcaption>Sharrow symbols from the MUTCD, Sacramento study, SF Study, and Florida study</figcaption><p><em>Sharrow</em> is a portmanteau of “shared” and “arrow.” It’s a particular symbol that combines a bicycle icon with an arrow or house icon. Initially, the bicycle was <em>inside</em> the arrow, like it was in a little house, but recently it’s next to the arrow.</p><p>Sharrow symbols are painted on streets or applied with thermoplastic decals.</p><p>The purpose of a sharrow is to <em>encourage good bicyclist and driver behavior</em>. Sharrows don’t increase legal penalties for drivers or cyclists. They encourage cyclists to take the lane, but cyclists are permitted to do that anyway, on any narrow street. Sharrows are supposed to make motorists aware of cyclists. When drivers kill people in sharrows, there aren’t any additional consequences. The consequences for hitting people with cars are <a href="https://www.nytimes.com/2013/11/10/opinion/sunday/is-it-ok-to-kill-cyclists.html">minimal</a>.</p><p>Sharrows do constitute <a href="http://www.cityofamericancanyon.org/home/showdocument?id=3474">class III bikeways</a>, which bring with them higher penalties for illegal parking.</p><p><picture><source srcset="https://macwright.com/images/2020-12-04-sharrows-denver-sharrow.webp" type="image/webp"><img alt="Denver sharrow" src="https://macwright.com/images/2020-12-04-sharrows-denver-sharrow.jpg"></picture></p><figcaption><a href="https://www.flickr.com/photos/jessicajuriga/5066431139">A sharrow in Denver, Colorado / photo by Jess J</a></figcaption><p>James Mackay invented the sharrow in 1993 in Denver, in hopes that it would legitimize bicycles on the road, encourage cyclists to take the center of the lane, and reduce wrong-way cycling:</p><blockquote><p>I was hoping the shared lane marking would legitimize the presence of bicyclists, reinforce the correct direction of travel and assign lane position, including the correct approach to an intersection and fill an intermediate niche where typical bike lane markings might not necessarily fit.</p></blockquote><blockquote><p>But I was hoping it overall would provide a step in the right direction towards legitimizing the presence of bicycling and reinforcing bicycle usage. - <a href="https://www.thebicyclestory.com/2016/03/episode-4-a-brief-history-of-the-american-sharrow/">The Bicycle Story: James Mackay</a></p></blockquote><h2 id="what-are-sharrows-supposed-to-do">What are sharrows supposed to do?</h2><p>This is a really important question, because the answer isn’t simply “to protect people.” San Francisco and many other cities have versions of Vision Zero, the idea that traffic deaths should be reduced to zero.</p><p>Sharrows aren’t a general-purpose tool: their applicability and goal is quite specific.</p><p><a href="https://mutcd.fhwa.dot.gov/htm/2009r1r2/part9/part9c.htm">According to the MUTCD</a>, sharrows may be used to:</p><ol><li>Assist bicyclists with lateral positioning in a shared lane with on-street parallel parking in order to reduce the chance of a bicyclist’s impacting the open door of a parked vehicle.</li><li>Assist bicyclists with lateral positioning in lanes that are too narrow for a motor vehicle and a bicycle to travel side by side within the same traffic lane.</li><li>Alert road users of the lateral location bicylists are likely to occupy within the traveled way.</li><li>Encourage safe passing of bicyclists by motorists, and</li><li>Reduce the incidence of wrong-way bicycling.</li></ol><p>The purpose of sharrows is thus pretty tied to the problem of <em>dooring</em>, in which drivers don’t look out of their rear-view window before swinging open their doors. Behavioral solutions to dooring, like the <a href="https://en.wikipedia.org/wiki/Dooring#Dutch_Reach">Dutch Reach</a>, haven’t caught on in America because it’s America.</p><p><picture><source srcset="https://macwright.com/images/2020-12-04-sharrows-a-sharrow-in-oakland-california.webp" type="image/webp"><img alt="A sharrow in Oakland, California" src="https://macwright.com/images/2020-12-04-sharrows-a-sharrow-in-oakland-california.jpg"></picture></p><figcaption><a href="https://www.flickr.com/photos/walkingsf/4920881091">A sharrow in Oakland, California / photo by Eric Fischer</a></figcaption><p>The <a href="https://nacto.org/wp-content/uploads/2010/08/Shared-Lane-Markings-When-and-Where-to-Use-Them.pdf">SFMTA</a> proposed additional use-cases for sharrows: Hills, Narrow Streets, Discontinued Bike Lane due to Roadway Narrowing, Discontinued Bike Lane for Right Turn Lane, Lane Drop for Right Turn Only Lane, Double Turn Lanes, Double Turn Lanes with Bike Box, Route Finding, Roundabouts or Traffic Circles, Along Separated Bikeways, and Space for Only One Bike Lane.</p><p>None of this describes the Market Street plan, which would be a double-sharrow in a scenario with no on-street parking. The SFTMA also advises that sharrows are not meant to replace bike lanes, and in this case they are.</p><h2 id="does-anyone-want-sharrows">Does anyone want sharrows?</h2><p>Sharrows is are tools for improving combined car traffic and bicycle traffic. It’s apparent from all data that bicyclists do not want car traffic near them.</p><svg viewBox="0 0 725 318" width="100%" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink"><defs><path d="M.96.06h196v13.738H.96z" id="a"></path><path d="M.596.06h11v13.738h-11z" id="c"></path><path d="M.542.06h8v13.738h-8z" id="e"></path><path d="M.71.304h116V14.04H.71z" id="g"></path><path d="M.803.547h121v13.738h-121z" id="i"></path><path d="M.596.547h11v13.738h-11z" id="k"></path><path d="M.542.547h8v13.738h-8z" id="m"></path><path d="M.617.79h171v13.738h-171z" id="o"></path><path d="M.155.79h8v13.738h-8z" id="q"></path><path d="M.06.79h40v13.738h-40z" id="s"></path><path d="M.403.033h169v13.738h-169z" id="u"></path><path d="M.703.277h184v13.737h-184z" id="w"></path><path d="M.22.686h22v13.738h-22z" id="y"></path><path d="M.969.686h29v13.738h-29z" id="A"></path><path d="M.525.686h29v13.738h-29z" id="C"></path><path d="M.082.686h29v13.738h-29z" id="E"></path><path d="M.638.686h29v13.738h-29z" id="G"></path></defs><g fill="none" fill-rule="evenodd"><path d="M364.5 29v248M460.5 29v248M555.5 29v248M651.5 29v248" stroke="#B8B8B8" stroke-width=".5"></path><path d="M268.5 276.5v-247" stroke="#000" stroke-linecap="square"></path><g transform="translate(40 41)"><mask fill="#fff" id="b"><use href="#a"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#b)"><tspan x=".96" y="10.798">Separate bike lanes f</tspan><tspan x="129.603" y="10.798" letter-spacing="-.247">r</tspan><tspan x="133.672" y="10.798">om car tra</tspan></text></g><g transform="translate(236 41)"><mask fill="#fff" id="d"><use href="#c"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#d)"><tspan x=".596" y="10.798">ﬃ</tspan></text></g><g transform="translate(247 41)"><mask fill="#fff" id="f"><use href="#e"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#f)"><tspan x=".542" y="10.798">c</tspan></text></g><g transform="translate(139 82)"><mask fill="#fff" id="h"><use href="#g"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#h)"><tspan x=".71" y="11.041">Repairing potholes</tspan></text></g><g transform="translate(115 123)"><mask fill="#fff" id="j"><use href="#i"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#j)"><tspan x=".803" y="11.285">Less automobile tra</tspan></text></g><g transform="translate(236 123)"><mask fill="#fff" id="l"><use href="#k"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#l)"><tspan x=".596" y="11.285">ﬃ</tspan></text></g><g transform="translate(247 123)"><mask fill="#fff" id="n"><use href="#m"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#n)"><tspan x=".542" y="11.285">c</tspan></text></g><g transform="translate(36 164)"><mask fill="#fff" id="p"><use href="#o"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#p)"><tspan x=".617" y="11.528">Mo</tspan><tspan x="20.414" y="11.528" letter-spacing="-.247">r</tspan><tspan x="24.483" y="11.528">e bike paths and trails o</tspan></text></g><g transform="translate(207 164)"><mask fill="#fff" id="r"><use href="#q"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#r)"><tspan x=".155" y="11.528">ﬀ</tspan></text></g><g transform="translate(215 164)"><mask fill="#fff" id="t"><use href="#s"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#t)"><tspan x=".06" y="11.528">-st</tspan><tspan x="16.555" y="11.528" letter-spacing="-.247">r</tspan><tspan x="20.623" y="11.528">eet</tspan></text></g><g transform="translate(86 206)"><mask fill="#fff" id="v"><use href="#u"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#v)"><tspan x=".403" y="10.771">Mo</tspan><tspan x="20.2" y="10.771" letter-spacing="-.247">r</tspan><tspan x="24.268" y="10.771">e secu</tspan><tspan x="64.615" y="10.771" letter-spacing="-.247">r</tspan><tspan x="68.684" y="10.771">e indoor parking</tspan></text></g><g transform="translate(71 247)"><mask fill="#fff" id="x"><use href="#w"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#x)"><tspan x=".703" y="11.014">Better education for motorists</tspan></text></g><g transform="translate(258 281)"><mask fill="#fff" id="z"><use href="#y"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#z)"><tspan x=".221" y="11.424">0%</tspan></text></g><g transform="translate(349 281)"><mask fill="#fff" id="B"><use href="#A"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#B)"><tspan x=".969" y="11.424">20%</tspan></text></g><g transform="translate(445 281)"><mask fill="#fff" id="D"><use href="#C"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#D)"><tspan x=".525" y="11.424">40%</tspan></text></g><g transform="translate(541 281)"><mask fill="#fff" id="F"><use href="#E"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#F)"><tspan x=".082" y="11.424">60%</tspan></text></g><g transform="translate(636 281)"><mask fill="#fff" id="H"><use href="#G"></use></mask><text fill="#000" font-family="HelveticaNeue, Helvetica Neue" font-size="13.7" mask="url(#H)"><tspan x=".638" y="11.424">80%</tspan></text></g><path d="M269 36h368v29H269zM269 77h325v29H269zM269 118h310v29H269zM269 159h282v29H269zM269 200h272v29H269zM269 241h248v29H269z" fill="#00A2FF"></path></g></svg><p>In a <a href="https://nacto.org/wp-content/uploads/2010/08/City-of-Toronto-Cycling-Study-Tracking-Report-1999-and-2009.pdf">2009 City of Toronto study</a>, 77% of bicyclists said that to “separate bike lanes from car traffic” would improve cycling “a great deal”, more than any other change. Columbus, Ohio asked in 2008 what infrastructure cyclists would want to see, and 85% of respondents referred to bicycle lanes, with only 76% seeing a benefit to shared-use paths.</p><p>Bicycle advocacy organizations also don’t want sharrows: the new Better Market Street plans were <a href="https://sfbike.org/news/the-fights-not-over-for-a-better-market-street/">immediately panned by the SF Bicycle Coalition</a>.</p><h3 id="do-sharrows-inform-drivers-of-the-presence-of-bicyclists">Do sharrows inform drivers of the presence of bicyclists?</h3><p>We have a few sources of data here. Let’s look at the <a href="https://nacto.org/wp-content/uploads/2010/08/San-Franciscos-Shared-Lane-Pavement-Markings-Improving-Bicycle-Safety.pdf">San Francisco Shared Lane Marking Study</a>:</p><blockquote><p>The majority of the drivers surveyed claimed not to notice the markings. Since the sample size of drivers was so small, the results do not provide conclusive findings. -p13</p></blockquote><p>Do drivers understand the markings?</p><blockquote><p>Of the motorists that responded, two out of the seven that noticed the markings understood that the marking indicate that they should allow more room for cyclists. p14</p></blockquote><p>There’s a study from Brookline, MA. Do drivers notice markings there?</p><blockquote><p>Of the motorists surveyed, only 21% noticed the markings and were at least 70% confident that the markings indicated a preferred zone for bicycling.</p></blockquote><p>Casual observations from Warren Vermont:</p><blockquote><p>Casual verbal survey of approximately 200 local citizens and 50 bicyclists led to conclusion that bicyclists felt the symbols were too small to be effective and local drivers rarely noticed them. The Vermont DOT decided to not encourage their use, to not replace them, and to not include them in future plans</p></blockquote><p>Do cyclists understand the symbols? <a href="https://www.youtube.com/watch?v=Xp1gN8xsz3o">Here’s a news report about how they don’t</a>. The city of Fremont had to <a href="https://www.youtube.com/watch?v=-qg6cpG7Zeg">publish a video about how to use sharrows</a>.</p><h3 id="do-sharrows-make-streets-safer">Do sharrows make streets safer?</h3><p>A striking commonality in the sharrow research is that safety is not clearly measured. Proxies to safety are measured: cyclists riding in the center of the lane, in the right direction, not on sidewalks, and sometimes the distance from cars to bikes. The Texas study does an impressive amount of statistical reasoning about passing events &amp; horizontal positioning on the street. But actual safety is not rigorously measured.</p><p>The one study that directly studies the effectiveness of bicycle sharrows <em>for safety</em> is called <a href="https://trid.trb.org/view/1393928"><em>The Relative (In)Effectiveness of Bicycle Sharrows on Safety Outcomes</em></a>. It’s a quick read, but the killer line is:</p><blockquote><p>Results suggest that not only are sharrows not as safe as bike lanes, but they could be more dangerous than doing nothing at all.</p></blockquote><p>This probably isn’t the question you care about, right? Proper horizontal positioning isn’t one of the <a href="https://www.visionzerosf.org/">Vision Zero SF</a> goals. Bicyclists don’t talk that much about proper horizontal positioning.</p><p>But nevertheless: proper horizontal positioning is one of the key goals of sharrows. Three of the five goals outlined in the MUTCD are different kinds of proper horizontal positioning. The first goal of San Francisco’s study was horizontal positioning. Most of the sharrow-related data collected is about horizontal positioning.</p><p>As Ferenchak &amp; Marshall note, there is mixed evidence for horizontal positioning in correctly-painted sharrows.</p><p>Amusingly, though, there are a lot of sharrows that don’t even encourage cyclists to take the center of the lane, because they’re painted in the “door zone”: exactly the area that cyclists are supposed to stay away from.</p><p><picture><source srcset="https://macwright.com/images/2020-12-04-sharrows-door-zone-sharrow-in-chicago.webp" type="image/webp"><img alt="Door-zone sharrow in Chicago" src="https://macwright.com/images/2020-12-04-sharrows-door-zone-sharrow-in-chicago.jpg"></picture></p><figcaption><a href="https://www.flickr.com/photos/walkingsf/38067633996">A sharrow in Chicago that has been painted exactly in the 'door zone' which sharrows are supposed to keep bicycles out of / photo by Eric Fischer</a></figcaption><h2 id="why-dont-sharrows-go-away">Why don’t sharrows go away?</h2><p>I’m not the first to point out the uselessness of sharrows. The In(effectiveness) study by Ferenchak and Marshall got airtime on <a href="https://usa.streetsblog.org/2016/01/14/study-sharrows-dont-make-streets-safer-for-cycling/">Streetsblog</a> and <a href="https://99percentinvisible.org/article/sharrows-shared-lane-markings-street-cyslists-may-hurt-help/">99 Percent Invisible</a>. The bicycle coalition immediately <a href="https://sfbike.org/news/the-fights-not-over-for-a-better-market-street/">opposed San Francisco’s new sharrows</a>. Ferenchak and Marshall <a href="https://www.sciencedirect.com/science/article/pii/S2046043018300583">expanded their research with additional data</a>.</p><p>One defense of sharrows is that they’re <em>part of a larger strategy</em>: why not have all the tools in the toolbox? This is sort of like justifying the addition of some homeopathics in your ambulance medical kit. Sure, you have it now, but it’s not going to do anything.</p><h2 id="how-sharrows-snuck-into-transportation-planning">How sharrows snuck into transportation planning</h2><p>Sharrows started as a brutal compromise. The creator of the sharrow, James Mackay, essentially said that it was a bare-minimum way to do <em>something</em> for cycling in a city that didn’t want to do anything:</p><blockquote><p>Part of it was the city of Denver’s reluctance to do much of anything for bicycles. So I figured, this would be a less expensive approach versus the conventional bike lane markings. A lot of the agencies don’t want to do anything involving change or spending money for bicycles. I was always under pressure to do less as the Denver bicycle planner.</p></blockquote><p>In this form, as a temporary measure in the evolution of cities away from cars, sharrows made sense.</p><p>And sharrows <em>are</em> successful, to some degree, at encouraging cyclists to avoid the “door zone.” And those small, measurable improvements in ‘horizontal positioning’ bought the sharrow’s way into transit device standards.</p><p>Then cities started pushed sharrows in all sorts of scenarios that needed bike lanes, not a temporary, toothless symbol on the asphalt. And since they’re cheap and don’t disrupt car traffic, they caught on.</p><p>But sharrows have overreached and underperformed. Any …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://macwright.com/2020/12/04/sharrows.html">https://macwright.com/2020/12/04/sharrows.html</a></em></p>]]>
            </description>
            <link>https://macwright.com/2020/12/04/sharrows.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25409690</guid>
            <pubDate>Sun, 13 Dec 2020 20:04:44 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[MicroStrategy's Bitcoin Debt Bet]]>
            </title>
            <description>
<![CDATA[
Score 187 | Comments 333 (<a href="https://news.ycombinator.com/item?id=25406764">thread link</a>) | @123six
<br/>
December 13, 2020 | https://www.kevinrooke.com/post/microstrategys-bitcoin-debt-bet | <a href="https://web.archive.org/web/*/https://www.kevinrooke.com/post/microstrategys-bitcoin-debt-bet">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div href=""><p>On December 7th, MicroStrategy announced its intention to offer $400M of debt to investors, and a plan to purchase Bitcoin with the proceeds.</p><p>This was the 4th time MicroStrategy announced plans to buy Bitcoin, but for the first time, the market had a strong negative reaction to MicroStrategy's announcement.</p><p>On December 8th, Microstrategy's stock was down by 14%, their largest single-day decline since March 18th.</p><p>Why the negative reaction? Because this time the Bitcoin would be bought with other people's money, instead of the cash reserves already on MicroStrategy's balance sheet.</p><p>Despite the negative reaction, this bet makes a ton of sense.</p><p>MicroStrategy is a business generating tens of millions of dollars in annual cash flow from operations, they've got almost no long-term debt, and they have access to some of the cheapest capital in the world.</p><p>They also have an ongoing Bitcoin bet that has returned over 50% in a few months, and this offering gives them an opportunity to almost double the stakes.</p><p>Let's break down the potential upside and downside of MicroStrategy's latest debt offering.</p><h2>Microstrategy's Debt Offering</h2><p>First, let's look at the type of debt MicroStrategy offered investors.</p><p>They offered "unsecured senior convertible notes", a quick break-down of the term is below.</p><p><strong>Unsecured:</strong> Microstrategy is not giving investors ownership of any assets as collateral. For investors, this obviously comes with a higher risk than debt secured by some underlying asset like real estate or equipment.</p><p><strong>Convertible:</strong> Microstrategy can convert this debt into shares of Microstrategy or cash. The equity conversion rate for the notes will be 2.5126 shares of MicroStrategy per $1,000 of notes, which is equivalent to a conversion price of $397.99 per share. Microstrategy currently trades for less, so this strategy only makes sense when the stock value rises above $398.</p><p><strong>Senior:</strong> If Microstrategy defaults on its debt, company assets are paid out to creditors in priority sequence.</p><p>Secured debt is paid off first, then unsecured debt, and then finally the equity shareholders get whatever is left (if anything). Within each priority level, there are sub-levels of priority. Senior secured debt is paid back before junior secured debt, senior notes are paid off before junior notes, and preferred stock is paid off before common stock.</p><p><strong>Notes:</strong> A particular kind of corporate debt, typically with a maturity period of 10 years or less.</p><h3>MicroStrategy's Debt Offering Timeline</h3><p>On December 7th, MicroStrategy's intention was to offer:</p><ul role="list"><li>$400M of unsecured convertible senior notes</li><li>Due in 2025</li><li>With an option for investors to buy an extra $60M of notes within 13 days of the offering</li></ul><p>On December 9th, MicroStrategy officially priced their offering at:</p><ul role="list"><li>$550M of unsecured convertible senior notes</li><li>Due in 2025, with a semi-annual interest payment at 0.75% APY</li><li>With an option for investors to buy an extra $100M of notes within 13 days of the offering</li></ul><p>On December 11th, MicroStrategy closed the round of fundraising, and sold the extra $100 million option too. As a result, their net proceeds were $634.9 million after fees.</p><p>And with that money, they plan to buy more Bitcoin - since they've already converted 100% of their cash and short-term investments into Bitcoin.</p><h3>MicroStrategy's Bet In A Nutshell</h3><p>Here's what this entire bet boils down to.</p><p>MicroStrategy must pay $4.9M in each of the next five years as interest on their debt offering. That adds up to $24.4M in interest payments, plus a lump sum payment of the $650M original debt offering in December 2025.</p><p>That's a grand total of $674.4M paid off over the course of 5 years.</p><p>But there's a bonus option for MicroStrategy. If their Bitcoin bet pays off and they want to de-leverage, or if their stock price rises above $400, they have the option to convert some or all of the debt into equity or cash.</p><p>From the $650M offering, MicroStrategy expects to keep $634.9M that they can invest in Bitcoin. The other $15.1 million goes towards various fees and commissions.</p><p>Therefore, to turn their $634.9M into $674.4M, they'll just need a 1.2% annual return on their Bitcoin investment. </p><p>In other words, assuming MicroStrategy acquires Bitcoin around $18,750 per coin, they'll have paid for all 5 years of interest payments once Bitcoin hits $19,916 per coin. Anything above that is all profit.</p><h2>MicroStrategy's Upside Potential</h2><h3>How Much Could MicroStrategy Make?</h3><p>MicroStrategy has made 3 prior Bitcoin purchases.</p><ul role="list"><li>They're up $152M (61%) on their $250M August investment</li><li>They're up $140M (80%) on their $175M September investment</li><li>They're roughly even on their $50M December investment (made last week).</li></ul><p>All together, their $475M of cash is now worth $765M (up 61%) in just a few months.</p><p>With this $634.9M of cash from investors, they can buy just under 35,000 more coins. Since they already have 40,824 BTC, they will likely hold over 75,000 BTC by the end of December.</p><h3>How Much Higher Might Bitcoin Go?</h3><p>Obviously this is unknowable, and no prediction will be perfect when we look back five years from now. Still, there are enough influential figures in finance who have put out Bitcoin price predictions that it would be unwise to ignore them completely.</p><p>In addition, these people have all been successful capital allocators outside of the Bitcoin world, so their stance on Bitcoin as an asset class is less biased than the price predictions one might find on Bitcoin Twitter. They don't need Bitcoin to succeed, but they still think it will.</p><p><a href="https://www.youtube.com/watch?v=qwHI6OC3rc8">Raoul Pal</a>: $1M per coin in the next five years</p><p><a href="https://winklevosscapital.com/the-case-for-500k-bitcoin/">Winklevoss Twins</a>: $500k per coin (timeline not provided)</p><p><a href="https://twitter.com/classicmacro/status/1327381449000034307">Citibank Analyst Tom Fitzpatrick</a>: A move as high as $318k per coin by December 2021</p><p><a href="https://www.cnbc.com/2017/12/12/social-capitals-palihapitiya-says-bitcoin-is-going-to-1-million-in-the-next-20-years.html">Chamath Palihapitiya [in 2017]</a>: Probably 100k per coin in the next 3-4 years, and I think it is in the next 20 years, $1M per coin</p><p><a href="https://twitter.com/novogratz/status/1328492371353489408">Mike Novogratz</a>: Going to 65k per coin (timeline not provided)</p><p>I'm sure I've missed a handful of price predictions, but you get the point.</p><p>On the high end, if Bitcoin gets to $1M/coin, Microstrategy's 75,000 BTC would be worth $75B by 2025.</p><p>On the low end, if Bitcoin gets to $65k/coin, Microstrategy's 75,000 BTC would be worth $4.9B by 2025.</p><p>It doesn't take a genius to figure out that Microstrategy has massive upside potential if Bitcoin's price gets anywhere close to the predictions above. But what if it doesn't?</p><h2>Microstrategy's Downside Risk</h2><h3><strong>What Happens To MicroStrategy If Bitcoin Goes Down?</strong></h3><p>It's possible that Bitcoin's price in December 2025 may be lower than it is today, but it's not very likely. In its 12 year history, Bitcoin has never traded down over a five year period, and it's not even close. 5 years ago, it was trading for $436. It is now trading for $18,750.</p><p>That's a 42x gain since December 12, 2015.</p><p>Still, the past isn't always a good predictor of the future, so let's explore MicroStrategy's options if Bitcoin does have a negative 5 year return.</p><p>Microstrategy has a profitable business generating tens of millions of dollars in operating cash flow each year. In fact, from 2016-2019 they've averaged $65M of cash flow from operations per year.</p><p>That's plenty of safety margin to take care of their $4.12 million annual interest payment, assuming zero business growth and zero inflation. If either one is positive, it will be even easier to meet their interest payment obligations.</p><h3>What Happens If Bitcoin And MicroStrategy Go Down?</h3><p>Ok, but what happens if Microstrategy's business doesn't generate any cash in the next five years, and the price of Bitcoin is lower in 2025?</p><p>Even more unlikely considering MicroStrategy's track record of success dates back to 1989, but let's entertain the possibility. What can MicroStrategy do about a rough spell for both Bitcoin and their business?</p><p>First, they could issue more debt.</p><p>MicroStrategy's largest long-term liability is its office space, and otherwise the company carries almost no long-term debt on their balance sheet.</p><p>At a time when central banks are relentlessly printing money, and bond yields are basically zero, raising another round of low-interest capital in the future won't be a challenge.</p><p>Second, a remote-first future means they may not even have to raise more money.</p><p>Prior to 2020, Michael Saylor strongly believed in-person work was important for MicroStrategy's success, but the global lockdown in the spring changed his mind.</p><p>If MicroStrategy does pursue a long-term remote work approach, that eliminates their largest long-term liability. As their $100M of lease obligations for office space gradually expires, the extra money can help fund their debt interest payments. It's not a big enough saving to pay off their debt principal, but it gives them extra time to either raise more capital or improve their business cash flows.</p><h3>Final Thoughts</h3><p>MicroStrategy investors didn't run the numbers when they heard of this debt offering announcement last week, they panicked.</p><p>Microstrategy is a well-run, capital efficient business that took advantage of low interest rates to protect their purchasing power. While their Bitcoin allocation is aggressive by Wall Street standards, it's nothing that might risk the future of their software business.</p><p>And if it works out, it will be remembered as a bold (and very successful) bet that permanently shifted the way Wall Street thinks about Bitcoin.</p></div></div>]]>
            </description>
            <link>https://www.kevinrooke.com/post/microstrategys-bitcoin-debt-bet</link>
            <guid isPermaLink="false">hacker-news-small-sites-25406764</guid>
            <pubDate>Sun, 13 Dec 2020 14:30:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The State of Linux Debuggers]]>
            </title>
            <description>
<![CDATA[
Score 224 | Comments 147 (<a href="https://news.ycombinator.com/item?id=25406541">thread link</a>) | @pyb
<br/>
December 13, 2020 | https://scattered-thoughts.net/writing/the-state-of-linux-debuggers/ | <a href="https://web.archive.org/web/*/https://scattered-thoughts.net/writing/the-state-of-linux-debuggers/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p><a href="https://scattered-thoughts.net/writing/looking-for-debugger/">Click here</a> to be redirected.</p>
</div>]]>
            </description>
            <link>https://scattered-thoughts.net/writing/the-state-of-linux-debuggers/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25406541</guid>
            <pubDate>Sun, 13 Dec 2020 13:52:52 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Unlimited is like a Ponzi Scheme]]>
            </title>
            <description>
<![CDATA[
Score 145 | Comments 131 (<a href="https://news.ycombinator.com/item?id=25406072">thread link</a>) | @chesterarthur
<br/>
December 13, 2020 | https://staysaasy.com/product/2020/12/12/unlimitted.html | <a href="https://web.archive.org/web/*/https://staysaasy.com/product/2020/12/12/unlimitted.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>Recently Google Photos ended their unlimited storage. You shouldn’t have been shocked, because unlimited is more often than not an unsustainable Ponzi Scheme.</p>

<h2 id="good-at-business">Good at Business</h2>

<p>When a software company gives you unlimited storage for anything, the only way for them to maintain that business in the long run is for them to make (amortized or not) incremental and recurring money from each thing they store. This is true, because storage is a recurring and forever cost.</p>

<p>Most B2C companies don’t make recurring money off of the data they store for you. They make money inversely proportional to how recent you stored the thing. Sometimes they don’t make any money at all. So it’s no surprise that unlimited is a Ponzi scheme, because that’s the only way to make the ledger look right.</p>

<h2 id="the-unlimited-ponzi-scheme">The Unlimited Ponzi Scheme</h2>

<p>Businesses will often follow a Ponzi Scheme-esque model with storage for their product. As they go through growth, newer customers are instantly delivering new revenue while their cost is very little - they haven’t started accruing much data. These customers offset older customers, who are getting more expensive as data retention continues forever.</p>

<p>Then, one day, the growth stops. You’ve gained most of the market you’re going to gain.  All of the sudden margin starts to slip. Fewer new users exist to offset the old users People look into and realize the unlimited scheme is up. Then they implement a retention policy and customers freak out.</p>

<h2 id="handling-unlimited-as-a-business">Handling Unlimited as a Business</h2>

<p>Businesses often fail at unlimited in a few ways.</p>

<p>First, companies should offer a way to pay more to get more storage. I can’t be mad that you won’t run a ridiculous business for me. I will get mad if you sink me into your product and don’t give me the option to pay a fair value to continue service.</p>

<p>Second, companies should be mindful of data retention policies from day 1.  The unlimited Ponzhi scheme is in many products not something that companies even know is happening. Things look good  until they don’t.</p>

<p>If you keep data around without retention policies, you will face a long road of performance, stability, and customer issues as you scale. Especially as your growth numbers slow, you should be mindful of the upcoming business realities sooner rather than later if you have anything that is unlimited in your product.</p>

<h2 id="summary">Summary</h2>

<p>There’s no free lunch in this world unless you’re willing to run around to different dumpsters to get it.</p>

    




  </div></div>]]>
            </description>
            <link>https://staysaasy.com/product/2020/12/12/unlimitted.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25406072</guid>
            <pubDate>Sun, 13 Dec 2020 12:16:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Goodreads plans to retire API access, disables existing API keys]]>
            </title>
            <description>
<![CDATA[
Score 792 | Comments 392 (<a href="https://news.ycombinator.com/item?id=25405737">thread link</a>) | @buttscicles
<br/>
December 13, 2020 | https://joealcorn.co.uk/blog/2020/goodreads-retiring-API | <a href="https://web.archive.org/web/*/https://joealcorn.co.uk/blog/2020/goodreads-retiring-API">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

      
<!-- site-header -->


      <div>
        <article>

  

  <div>
    <p>In news that surprises nobody, Goodreads last week quietly announced the deprecation of their public APIs. And I mean really quietly – the only people who were told about this were those unfortunate enough to have their existing <a href="https://blog.stephanieawilkinson.com/posts/2020-12-10-yonderbook-and-goodreads/" target="_blank" rel="noopener noreferrer">API keys disabled</a> without warning. Other than a small banner at the top of the API docs which mentions vague “plans to retire these tools”, nobody else appears to have heard anything from Goodreads, including those whose API keys remain active. So far it seems any key unused for 30 days has been disabled.</p>

<p><img src="https://joealcorn.co.uk/assets/img/posts/2020/12/deprecated.png" alt="Deprecation notice on Goodreads API documentation"></p>

<p>So this is an “announcement” much in the way a windshield announces its presence to bugs on a highway, and with the same consequences: dead bugs. Some developers have taken to the <a href="https://www.goodreads.com/topic/show/21788520-api-deprecation" target="_blank" rel="noopener noreferrer">API discussion boards</a> and blogs, but the overall impression I’m getting is grim acceptance. Really the surprising thing is how long it took them: Amazon has been in charge at Goodreads for almost 8 years now, and I think we’ve all been expecting this to come at some point.</p>

<p>So why now? What’s changed? Well, the fact is the market’s changing – and Goodreads isn’t. Alternative options are starting to emerge, and since Goodreads has forgotten how to innovate, it wants to use its market position to stifle innovation instead.</p>

<p>The sad thing is it really only hurts the hobbyist projects and Goodreads users themselves. Anybody seriously attempting to compete with Goodreads is well aware of the Amazon-shaped elephant in the room and is likely prepared. It’s the users and the hackers that this move will harm, and if anything it further reinforces the need for viable alternatives.</p>

<p>Personally I’m going to continue pouring my efforts into building <a href="https://beta.readng.co/?utm_source=joealcorn.co.uk" target="_blank" rel="noopener noreferrer">readng</a>. I’m already using it to keep track of my reads &amp; collections, along with a few thousand beta testers. I’m really excited by our plans and think we have the right team to execute, but we also need a shift in consumer behaviour.</p>

<p>The web has to mature beyond advertising as a business model. For this to happen people are going to have to open their wallets, pay for the services they use, and support independent businesses. That’s how we build a web where indies can thrive - one that’s more village centre than financial centre. I think the shift is underway.</p>


<hr>

<p>PS: <a href="https://beta.readng.co/user/joe?utm_source=joealcorn.co.uk" target="_blank" rel="noopener noreferrer">here’s my own readng profile</a>. You should probably use our Goodreads importer while our API key works, huh?</p>

  </div>

</article>













      </div>
      <!-- site-content -->

      
<!-- site-footer -->



<!-- <script src="/assets/js/main.js"></script> -->



<!-- Fathom - simple website analytics - https://github.com/usefathom/fathom -->

<!-- / Fathom -->
  <!-- / Fathom -->


    </div></div>]]>
            </description>
            <link>https://joealcorn.co.uk/blog/2020/goodreads-retiring-API</link>
            <guid isPermaLink="false">hacker-news-small-sites-25405737</guid>
            <pubDate>Sun, 13 Dec 2020 11:07:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: An anti-book recommendation tool, to help you escape your echo chamber]]>
            </title>
            <description>
<![CDATA[
Score 316 | Comments 208 (<a href="https://news.ycombinator.com/item?id=25405259">thread link</a>) | @padolsey
<br/>
December 13, 2020 | https://abooklikefoo.com/escape/ | <a href="https://web.archive.org/web/*/https://abooklikefoo.com/escape/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="app"><div><div><div><h3>Escape your literary echo chamber! ðŸ“š</h3><p><em>Break the Bubble</em> allows you to find out which books you are statistically <strong>unlikely</strong> to read. The more narrow your reading tastes are, the more you will be challenged by the results.</p><p>Start your search by entering a book you <strong><u>do</u></strong> like. You'll then be asked to enter a second book. Etc. The more books you add, the more accurate we can be in discovering these anti-correlations and odd new reading possibilities!</p><p>Try out these examples:</p><ul><li><a href="https://abooklikefoo.com/escape/?q=Ez4,L9pX,KJJ&amp;pop=p&amp;fnf=n&amp;period=a">Bubble-breakers for readers of Ayn Rand</a>.</li><li><a href="https://abooklikefoo.com/escape/?q=lNr,jNl,49O0&amp;pop=c&amp;fnf=a&amp;period=a">Bubble-breakers that are well-acclaimed for readers of Harry Potter</a>.</li><li><a href="https://abooklikefoo.com/escape/?q=VQV9,yyo6,7lQ,gxoY&amp;pop=b&amp;fnf=a">Bubble-breakers for readers of software engineering topics</a>.</li></ul><p><strong>How does it work?</strong>: Briefly, for each book entered we find the rarest but highest rated intersections and provide those to you. The query can be summarised as: which highly rated books are least read (and enjoyed) by people who've also read the books I have? To find out more about the recommendation engine generally, visit <a href="https://abooklikefoo.com/">the homepage</a>.</p><p><small>Note: this is an experimental feature of <a href="https://abooklikefoo.com/">A Book Like Foo</a> and was created by <a href="https://twitter.com/padolsey">James Padolsey</a>.</small></p></div><p>Your query is taking a while. ðŸ˜± Sorry about that, but it's not long now! We're leaving no book unturned in order to find you your perfect matches. ðŸ¤“</p></div></div></div></div>]]>
            </description>
            <link>https://abooklikefoo.com/escape/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25405259</guid>
            <pubDate>Sun, 13 Dec 2020 09:05:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Who Owns the Stars: The Trouble with Urbit]]>
            </title>
            <description>
<![CDATA[
Score 76 | Comments 61 (<a href="https://news.ycombinator.com/item?id=25404575">thread link</a>) | @deegles
<br/>
December 12, 2020 | http://distributedweb.care/posts/who-owns-the-stars/ | <a href="https://web.archive.org/web/*/http://distributedweb.care/posts/who-owns-the-stars/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
  <h2>
  <a href="http://distributedweb.care/">
    Distributed Web of Care
  </a>
  </h2>
  <section>
    
    

    <p>by Francis Tseng</p>

<p>The application that introduced peer-to-peer (P2P) computing to the mainstream was file sharing, services like Napster, Kazaa, Gnutella, and BitTorrent. For me, these programs were the first time the contradiction of artificial scarcity—the imposed scarcity of infinitely replicable digital information—and the excessive measures that were used to enforce it became startlingly clear. Over time, I encountered the term P2P in other settings and alongside other ideas—democratic governance, communalism, autonomy, cooperatives—and I started to see the purchase this idea had beyond file sharing and networking protocols.</p>

<p><a href="https://p2pfoundation.net/the-p2p-foundation/about-the-p2p-foundation">The P2P Foundation’s mission and strategic priorities</a>, for example, extend the early P2P ideas of open culture and exchange into values of cooperative living and regenerative production. <a href="https://www.scuttlebutt.nz/principles/">Scuttlebutt, a more recent P2P social networking protocol, has its own “principles stack”</a> that similarly advocates pluralistic exchange and mutual interdependence. It’s beautiful how, at least in the ideal scenario, by using a P2P service we are helping others access it as well. P2P is both an acknowledgment of our shared needs and an example of how cooperation helps us fulfill those needs.</p>

<p>Over the years, I’ve followed along with P2P projects because of these shared values, and I always find it exciting when new projects emerge. It seems that P2P is experiencing something of a renaissance, likely due to the frenzy around blockchain (which purports to offer something similar to P2P) and the increasing popular anxiety around centralized internet services like Facebook.</p>

<p>Urbit, “<a href="https://urbit.org/">a personal server built from scratch</a>,” first came across my radar a couple of years ago. Urbit positions itself as a P2P project, but it stands out in contrast to other P2P projects, mainly because the person behind it, Curtis Yarvin, seems antithetical to what I understand P2P to represent.</p>

<p>My central question is this: <em>Is Urbit a project that should be supported?</em></p>

<p>We can further break this down into two parts. First, Urbit’s marketing materials correctly identify that concentrated data aggregation and decision-making power are fundamental issues of the internet-as-we-know-it. Twitter’s persistent neglect of harassment on its platform is one everyday example. It is clear that new protocols and platforms that reduce our dependency on distant power are needed to challenge these issues. What’s less clear, though, is whether or not Urbit actually offers a meaningful alternative. Does Urbit genuinely enable new kinds of relations? Or, does it merely replace the old aristocracy with a new one?</p>

<p>The second, and more urgent, question is: who and what are we supporting by supporting Urbit? Many people in tech still believe that technology can be divorced from its creators; however, those of us in tech need to recognize that we have a considerable amount of influence over which products enter the mainstream consciousness, which products get created at all, and who receives both financial and social capital (shout out to <a href="https://techworkerscoalition.org/">Tech Workers Coalition</a> et al.). For example, consider Peter Thiel , who co-founded PayPal and was an early investor in Facebook. Early support of PayPal and Facebook contributed to their financial success, which developed Thiel’s influence and made him quite rich. Thiel then turned that money and influence into Palantir Technologies, a software company that <a href="https://theintercept.com/2017/03/02/palantir-provides-the-engine-for-donald-trumps-deportation-machine/">develops technologies to help expand surveillance and deportation for the government</a>. We have to consider what similar groundwork we help to lay by supporting Urbit.</p>

<h2 id="context">Context</h2>

<p>In order to discuss Urbit’s design, we need to have an understanding of the politics of its creator, Curtis Yarvin. <a href="https://en.wikipedia.org/wiki/Curtis_Yarvin">Curtis Yarvin</a> is innocuously described on Wikipedia as an “American political theorist and computer scientist,” but to many, he is better known as <a href="https://www.theatlantic.com/politics/archive/2017/02/behind-the-internets-dark-anti-democracy-movement/516243/">one of the intellectual forebears of the alt-right</a>. From 2007 to 2014<sup id="fnref:1"><a href="#fn:1">1</a></sup>, working under the pen name Mencius Moldbug, Yarvin writings, which among other things espoused anti-democratic ideas and scientific racism and helped introduce many of what are now understood as the alt-right’s foundational ideologies to a wider public. The term “red pill,” which describes the process of reactionary radicalization and the community around it, was first used in this way by Yarvin.<sup id="fnref:2"><a href="#fn:2">2</a></sup> Defenders of Urbit are quick to dismiss any inclusion of Yarvin’s politics in discussions about Urbit as unfair or irrelevant, and might point out that Yarvin left the project in January of this year.<sup id="fnref:3"><a href="#fn:3">3</a></sup> However, given that Yarvin basically laid out the general design for Urbit independently, as he worked on it alone for 11 years<sup id="fnref:3:1"><a href="#fn:3">3</a></sup> and in parallel with his political writings<sup id="fnref:4"><a href="#fn:4">4</a></sup>, and that Urbit, as a P2P project, is a fundamentally social and thus incorporates ideas about how people should be organized, Yarvin’s politics should be considered as something that influences his design decisions and his long-term vision for the project. <a href="https://lobste.rs/s/z5j1hq/urbit_2017#c_4z4gik">Dog-whistles</a> have been identified in some of his writing about Urbit and its design, including his <a href="https://urbit.org/posts/essays/the-dao-as-a-lesson-in-decentralized-governance/">leaning on Nazi philosopher Carl Schmitt</a> for questions around Urbit’s governance.</p>

<p>To save space I’ll provide only a very brief overview of Yarvin’s political philosophy—if you like, you can read more about it <a href="https://thebaffler.com/latest/mouthbreathing-machiavellis">here</a>, <a href="https://www.viewpointmag.com/2017/03/28/the-darkness-at-the-end-of-the-tunnel-artificial-intelligence-and-neoreaction/">here</a>, <a href="https://thebaffler.com/latest/the-moldbug-variations-pein">here</a>, and <a href="https://slatestarcodex.com/2013/10/20/the-anti-reactionary-faq/">here</a>.</p>

<p>Yavin refers to his brand of political philosophy as “neocameralism.” Neocameralism, as described in his essay “<a href="https://www.unqualified-reservations.org/2007/08/against-political-freedom/">Against Political Freedom</a>,” is a political philosophy arguing that state should be run like a business, (i.e., with a CEO at its head and no democratic mechanisms). His ideas are credited as being foundational to the “<a href="https://techcrunch.com/2013/11/22/geeks-for-monarchy/">neoreactionary” movement</a>, which could be described as a neo-monarchist movement (though Yarvin himself doesn’t identify as a “monarchist” because of its association with a constitutional monarchy and not absolute monarchy). In the neoreactionary movement, “divine right” is supplanted with “genetic right” based on scientific racism reframed as “human biodiversity.” Yarvin’s writings are also popular within the right-libertarian sects of Silicon Valley, such as <a href="https://thebaffler.com/latest/the-moldbug-variations-pein">with Peter Thiel</a> (<a href="https://www.theverge.com/2017/2/21/14671978/alt-right-mencius-moldbug-urbit-curtis-yarvin-tlon">Peter Thiel also has a stake in Tlön</a>, Yarvin’s company which develops Urbit, via Thiel’s VC firm, Founders Fund). The point here is that Yarvin is not a fringe philosopher. His writings have influence over people with considerable power and contributes to the intellectual miasma that emboldens and normalizes anti-democratic, anti-immigrant, misogynistic, and racist policies and attacks.</p>

<h2 id="urbit">Urbit</h2>
<h4 id="a-self-sovereign-internet">A self-sovereign internet</h4>

<p>Urbit positions itself as infrastructure for self-sovereignty in the digital age, liberating people from ceding control of their data to corporations.<sup id="fnref:5"><a href="#fn:5">5</a></sup> The core idea is that Urbit helps you run a personal server that acts as an intermediary between you and other services, including existing services like Facebook (yes, there is a lot more to Urbit—such as its reinvention of parts of the lower-level computational stack—but its P2P layer is what’s of interest here).</p>

<p>Self-sovereignty is an important principle, and I wager that many who regularly use the internet would agree that more of it is valuable for a healthy internet: for being able to control who can access your data, who can and cannot contact you, and so on. <em>But</em>, self-sovereignty is far too vague of a concept on its own. Left- and right-libertarianism both start with self-sovereignty as a core value, but they end up with vastly different conceptions of what meaningful self-sovereignty looks like and how it can be achieved. Left-libertarianism finds that self-sovereignty arises from social organizing, care, and democratic governance, which build towards positive freedoms (freedom to learn, to flourish, and so on); whereas, right-libertarianism believes it comes from the market and that negative freedoms (freedom from restrictions and regulation) are the goal. Though Yarvin does not identify as a libertarian (he is, in his own words, sympathetic to it), his neocameralism is right-libertarianism taken to its logical conclusion<sup id="fnref:6"><a href="#fn:6">6</a></sup> of corporate tyranny and serfdom.</p>

<p>To draw an example that you might be familiar with, consider the Twitter-alternative, Gab, which markets itself as a bastion for free speech. Gab, in practice, operates as a niche platform for members of the far-right who have been banned from Twitter: “<a href="https://www.nytimes.com/2018/10/28/us/gab-robert-bowers-pittsburgh-synagogue-shootings.html">a haven for white nationalists, neo-Nazis and other extremists</a>”. We might ask then, is Gab a platform for free speech, or is it a platform for hate speech? Who’s speech does Gab prioritize? It quickly becomes clear that the concept of “free speech” that Gab deploys is not quite the same as what others see it to mean.</p>

<p>In a similar way, this slipperiness of self-sovereignty as a concept, especially in light of Yarvin’s political writings, makes me suspicious of what it really means in the context of Urbit. Is Urbit actually designed to give users more autonomy and control? Does it restore any power to internet users?</p>

<p>One central design feature of Urbit is its network hierarchy. As a participant in Urbit, you may be a galaxy (the top of the hierarchy), a star (which fall under galaxies), or a planet (which fall under stars). The description of this hierarchy <a href="https://github.com/cgyarvin/urbit/blob/6ac688960687aa9c89d4da6fff49a3125c10aca1/Spec/urbit/3-intro.txt">used to use explicitly feudal metaphors</a> as part of what Yarvin called “digital feudalism,” with himself as the “prince,” and further contributes to my suspicion of Yarvin’s conception of self-sovereignty actually entails.</p>

<p>In trying to backpedal on these naming conventions, Yarvin claims that his ideas about governance are flipped for the internet:</p>

<blockquote>
  <p>If the real world today is governed as an insanely dysfunctional republic, and the Internet today is governed as a cluster of insanely despotic corporate monarchies, it doesn’t strike me as at all inconsistent with historical thought to treat the former case of misgovernment with efficient monarchism, and the latter case with liberating republicanism.<sup id="fnref:7"><a href="#fn:7">7</a></sup></p>
</blockquote>

<p>The rationale for why the …</p></section></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://distributedweb.care/posts/who-owns-the-stars/">http://distributedweb.care/posts/who-owns-the-stars/</a></em></p>]]>
            </description>
            <link>http://distributedweb.care/posts/who-owns-the-stars/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25404575</guid>
            <pubDate>Sun, 13 Dec 2020 05:41:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[To listen well, get curious]]>
            </title>
            <description>
<![CDATA[
Score 171 | Comments 34 (<a href="https://news.ycombinator.com/item?id=25403240">thread link</a>) | @axiomdata316
<br/>
December 12, 2020 | https://www.benkuhn.net/listen/ | <a href="https://web.archive.org/web/*/https://www.benkuhn.net/listen/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><figure><a href="https://www.benkuhn.net/listen/shawarma.jpg" title="fullsize"><img width="414" height="139" src="https://www.benkuhn.net/listen/shawarma_hu8d3539d292afb8dcad4d284a93a9ab60_28658_828x278_resize_q75_box.jpg" srcset="https://www.benkuhn.net/listen/shawarma_hu8d3539d292afb8dcad4d284a93a9ab60_28658_828x278_resize_q75_box.jpg 2x, https://www.benkuhn.net/listen/shawarma_hu8d3539d292afb8dcad4d284a93a9ab60_28658_414x139_resize_q75_box.jpg"></a><figcaption><a href="https://twitter.com/thecassiecao/status/1276506378388017155/photo/1">source</a></figcaption></figure><p>A common piece of interacting-with-people advice goes: “often when people complain, they don’t want help, they just want you to listen!”</p><p>For instance, <em>Nonviolent Communication</em>:<sup><label for="sn0">✻</label><span><span><sup>✻</sup>
<em>Nonviolent Communication</em>, ch. 7.</span></span></sup></p><blockquote><p>It is often frustrating for someone needing empathy to have us assume that they want reassurance or “fix-it” advice.</p></blockquote><p><em>Active Listening</em>:<sup><label for="sn1">†</label><span><span><sup>†</sup>
<a href="https://www.benkuhn.net/listen/active-listening.pdf">Active Listening</a>, p. 2</span></span></sup></p><blockquote><p>Similarly, advice and information are almost always seen as efforts to change a person and thus serve as barriers to his self-expression and the development of a creative relationship.</p></blockquote><p>You can find similar advice in most books on relationships, people management, etc.</p><p>This always used to seem silly to me. If I complain at my partner and she “just listens,” I’ve accomplished nothing except maybe made her empathetically sad. When I complain at people, I want <em>results</em>, not to grouse into the void!<sup><label for="sn2">‡</label><span><span><sup>‡</sup>
Empirically, I did notice that I usually got better results from listening than from giving advice. So I inferred that this advice was true for other people, but not me, because other people didn’t actually want to fix their problems.</span></span></sup></p><p>Frequently the “just listen” advice comes with tactical tips, like “reflect what people said back to you to prove that you’re listening.” For instance, consider these example dialogues from <em>Nonviolent Communication</em>:<sup><label for="sn3">§</label><span><span><sup>§</sup>
<em>Nonviolent Communication</em>, Chapter 7, Exercise 5.5, 5.6 and solutions.</span></span></sup></p><blockquote><p>Person A: How could you say a thing like that to me?</p><p>Person B: Are you feeling hurt because you would have liked me to agree to do what you requested?</p></blockquote><p>Or:</p><blockquote><p>Person A: I’m furious with my husband. He’s never around when I need him.</p><p>Person B: So you’re feeling furious because you would like him to be around more than he is?</p></blockquote><p>I say this with great respect for <em>Nonviolent Communication</em>, but these sound like a <a href="https://en.wikipedia.org/wiki/ELIZA" target="_blank">1970s-era chatbot</a>. If I were Person A in either of these dialogues my next line would be “yes, you dingbat—can you turn the nonviolence down a couple notches?” I’d feel alienated knowing that someone is going through their NVC checklist on me.</p><hr><p>Recently, I realized why people keep giving this weird-seeming advice. Good listeners <em>do</em> often reflect words back—but not because they read it in a book somewhere. Rather, it’s <a href="https://en.wikipedia.org/wiki/Cargo_cult_science" target="_blank">cargo cult advice</a>: it teaches you to imitate the surface appearance of good listening, but misses what’s actually important, the thing that’s <em>generating</em> that surface appearance.</p><p>The generator is curiosity.</p><p>When I’ve listened the most effectively to people, it’s because I was intensely curious—I was trying to build a <em>detailed, precise</em> understanding of what was going on in their head. When a friend says, “I’m furious with my husband. He’s never around when I need him,” that one sentence has a huge amount underneath. How often does she need him? What does she need him for? Why isn’t he around? Have they talked about it? If so, what did he say? If not, why not?</p><p>It turns out that <a href="http://johnsalvatier.org/blog/2017/reality-has-a-surprising-amount-of-detail" target="_blank">reality has a surprising amount of detail</a>, and those details can matter a lot to figuring out what the root problem or best solution is. So if I want to help, I can’t treat those details as a black box: I need to <a href="https://www.lesswrong.com/posts/B7P97C27rvHPz3s9B/gears-in-understanding" target="_blank">open it up and see the gears inside</a>. Otherwise, anything I suggest will be wrong—or even if it’s right, I won’t have enough “shared language” with my friend for it to land correctly.</p><p>Some stories from recent memory:</p><ul><li><p>When we started doing a pair programming rotation at Wave, I suggested that, to make scheduling easier, we designate a default time when pairing sessions would happen. A coworker objected that this seemed authoritarian. I was extremely puzzled, but they’d previously mentioned being an anarchist, so I was tempted to just chalk it up to a political disagreement and move on. But instead I tried to get curious and explore more deeply whatever “political” models were generating that disagreement. After a lot of digging into what was or wasn’t authoritarian for them and why, it turned out the disagreement was because they’d missed the word “default” and thought I was suggesting a single <em>mandatory</em> time for pair programming.</p></li><li><p>My partner, Eve, wrote a post about Polish attitudes about sex, with some details that upset her (Polish) parents. When her parents told her that, she initially got very stressed about having to have a conversation to calm them down. I thought she shouldn’t be worried and the conversation would be fine, but of course just telling her that wasn’t very helpful. Instead, I summoned up my curiosity and asked lots of questions about her relationship with her parents, her parents’ relationship with each other, each of their relationships with Catholicism, etc. By the end of the conversation, after thinking through all the baggage involved, Eve agreed with me, and her attitude about the upcoming conversation shifted from impending doom to compassionate curiosity about where her parents were coming from.</p></li><li><p>I was stressed by work and complained to Eve about some things that I felt frustrated and stuck about. Instead of suggesting solutions, she kept asking for more details until she had more or less a complete snapshot of my mental state. At that point, she observed that every time I mentioned feeling sad, I sounded contemptuous and exasperated with myself. She hypothesized that I wasn’t giving myself permission to be sad. The “solution” to my problem ended up being to give me a big hug and let me cry on her shoulder for a bit, after which I immediately felt much less stressed.</p></li></ul><p>In each case, the “helper” tried to learn about the “complainer’s” reality in as much detail as possible—not just the problem, but the whole person and whatever else was behind the immediate issue. And that’s what made it possible for them to actually help.</p><p>It often feels like I understand enough to be helpful without knowing all those details. But when I think that, I’m usually wrong: I end up giving bad advice, based on bad assumptions, and the person I’m talking to ends up having to do a bunch of work to argue with me and correct my bad assumptions. That makes the conversation feel disfluent and adversarial instead of collaborative.</p><p>It turns out this is a really common failure mode of helping-conversations, which is what I think generates the old saw at the beginning of this post, that “sometimes people don’t want help, just to be listened to.”</p><p>But I think that’s actually too nice to the helper, and uncharitable to the complainer (in that it assumes they weirdly don’t care about solving their problem). What’s really going on is probably that your advice is bad, because you didn’t really listen, because you weren’t curious enough.</p><hr><p>When I’m curious about what someone’s saying, I often do repeat things back to them in my own words. But it’s because I’m genuinely curious, not because I’m checking off the “reflect words” box in my “be a good listener” checklist. That means I do it in a way that sounds like my natural speech, instead of mimicking them like a chatbot.</p><p>When done this way, reflective listening feels validating rather than alienating. It’s a way of demonstrating that I care a lot about what someone has to say. Putting their idea into my own words shows them that I’ve fully digested it, and helps us establish a shared language in which to talk about it. That, in turn, makes the conversation fluent and collaborative, rather than a zigzag of bad assumptions and corrections.</p><p>So the right advice isn’t “listen harder and repeat everything back”—you won’t be genuine if you’re just imitating the surface appearance of a good listener. Instead, be humble and get curious! Remind yourself that there’s a ton of detail behind whatever you’re hearing, and try to internalize all of it that you can. Once you’ve done that, your advice will be more likely hit the mark, and you’ll be able to communicate it clearly.</p></article></div>]]>
            </description>
            <link>https://www.benkuhn.net/listen/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25403240</guid>
            <pubDate>Sun, 13 Dec 2020 00:45:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why radio receivers won’t tune 800-900 MHz]]>
            </title>
            <description>
<![CDATA[
Score 425 | Comments 160 (<a href="https://news.ycombinator.com/item?id=25403163">thread link</a>) | @jtakkala
<br/>
December 12, 2020 | https://computer.rip/2020-11-28%20the%20verboten%20band.html | <a href="https://web.archive.org/web/*/https://computer.rip/2020-11-28%20the%20verboten%20band.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>


<p>To start: yes, long time no see. Well, COVID-19 has been like that. Some days I
feel accomplished if I successfully check my email. I finally managed to clear
out a backlog of an entire handfull of things that needed thoughtful responses,
though, and so here I am, screaming into the void instead of at anyone in
particular.</p>
<p>That said, let's talk a bit about radios. It is probably unsurprising by now
that I have a long-running interest in radio and especially digital radio
communications---but people who come to radio from all kinds of different
perspectives run into one odd problem: the curious refusal of any receiver
to tune to certain frequencies in the 800-900MHz range.</p>
<p>A lot of people have a general knowledge that this has to do with some kind of
legal prohibition on reception of cellular phones. That's roughly correct, but
to fully explain the matter requires going into some depth on two different
topics: FCC regulation of radio devices, and the development of cellular
phones. The first sounds more boring, so let's hit that one first.</p>
<p>Generally speaking, most electronic products manufactured or imported into the
United States are subject to regulation by the Federal Communications
Commission. Specifically, they generally require an "Equipment Authorization"
from the FCC prior to being marketed. For purposes of this regulatory scheme,
electronic devices can be broadly divided into two categories: intentional
radiators and unintentional radiators.</p>
<p>An intentional radiator is something that is specifically intended to broadcast
a radio signal, like, say, a cellular phone. Intentional radiators must be
certified to comply with the specific Part of the FCC regulations relevant to
the service for which they will be used. For example, cellular phones must be
certified against Part 27, Wireless Communications Service, among others. The
exact process varies by the part and can be involved, but it generally
involves the manufacturer paying a certified test lab to perform certain tests
and complying with various other filing requirements which include placing a
label on the device which specifies its FCC approval. Device manufacturers
must file with the FCC a description of how this label will appear before they
receive approval to market the device, which is why the rough designs of
unreleased devices are sometimes revealed by the rough drawings in these
filings---tech journalists will watch these to get the dimensions of new
iPhones, for example.</p>
<p>By the way, when I say the "FCC Regulations," if you want to follow along at
home these are promulgated as 47 CFR. So Part 27, for example, refers to 47 CFR
27. The ever lovely Cornell LII has the whole thing for your entertainment:
https://www.law.cornell.edu/cfr/text/47. There's some reading for when you need
help falling asleep.</p>
<p>But that's all besides the point, I'm more interested in talking about
unintentional radiators, devices which are not intended to produce RF radiation
but may still do so as a result of the operation of the electronics---this is
generally called a spurious emission, which is basically any RF emitted by
accident. These devices are certified under Part 15 of the FCC regulations[1],
and so are sometimes called "Part 15 devices." Part 15 essentially limits the
type and amplitude of spurious emissions to prevent random devices causing
harmful interference due to defects in their designs.</p>
<p>What would we call a radio <em>receiver</em>, then? It is explicitly a radio device,
but is not intended to transmit anything. As a result, radio receivers are Part
15 devices. Most of Part 15 is very general and doesn't really say anything
specific about radio devices, it just limits spurious emissions and other
design standards. However, 15.121 gets a great deal more specific in
discussing "Scanning receivers.' A scanning receiver is specifically defined
earlier in the regulation as a device capable of tuning to two or more frequency
bands in the range of 30-960Mhz. This has the fun result that nothing for the
GHz range is technically a scanner, but for practical reasons this doesn't
matter too much.</p>
<p>So what's in 15.121? This is:</p>
<p>47 CFR 15.121(a): ... scanning receivers and frequency converters designed or
marketed for use with scanning receivers, shall: (1) Be incapable of operating
(tuning), or readily being altered by the user to operate, within the frequency
bands allocated to the Cellular Radiotelephone Service in part 22 of this
chapter (cellular telephone bands). ... (b) Be designed so that the tuning,
control and filtering circuitry is inaccessible. The design must be such that
any attempts to modify the equipment to receive transmissions from the Cellular
Radiotelephone Service likely will render the receiver inoperable. </p>
<p>The rest of paragraph (a) gives a pretty long clarification of "readily being
altered by the user," and it's amusing to think of a bunch of FCC characters
sitting around a table trying to think up every alteration that is easy.
Jumper wires and reprogramming micro-controllers are both right out.</p>
<p>It gets even better:</p>
<p>47 CFR 15.121(b): ... scanning receivers shall reject any signals from the
Cellular Radiotelephone Service frequency bands that are 38 dB or lower based
upon a 12 dB SINAD measurement, which is considered the threshold where a
signal can be clearly discerned from any interference that may be present. </p>
<p>So, here's this actual weird rule about scanners. Scanners are specifically
prohibited from being able to tune to any bands allocated to the Part 22
Cellular Radiotelephone Service. This raises questions, and as you can imagine
from the way I got here, I am about to spend a long time answering them.</p>
<p>When the FCC says "Cellular Radiotelephone Service," they aren't talking about
cell phones in general. The CRS as I'll call it refers to a <em>very specific</em>
cellular service, and that is AMPS.</p>
<p>AMPS, the Advanced Mobile Phone System, is the most common in the US of the
"1G" cellular services. Most carriers that were around when it was offered
called it "Analog" service, and indeed, AMPS was entirely analog. And, due to
an odd detail of the regulation, large cellular carriers were <em>required</em> to
offer AMPS service until 2008, long after AMPS phones were no longer produced.
You may have had a candy bar phone back when you would occasionally see an "A"
for analog service, but I hope not into the late 2000s.</p>
<p>There are a few things that we might infer from AMPS being an analog service.
One of those things is that it probably did not employ strong encryption. In
fact, AMPS employed no scrambling or enciphering of any kind. Your phone
conversations were just flapping in the wind for anyone to hear. This posed a
major practical problem for carriers in the '90s as it was discovered that it
was not particularly difficult to intercept the call setup process from an AMPS
phone and swipe its identification numbers, allowing you to basically steal
someone else's cellular service. You can imagine that this was popular with
certain criminals with a need for untraceable but convenient communications.</p>
<p>There was also a problem for consumers: their phone conversations could be
fairly easily overheard. There were a number of ways to do this, using any
radio scanner that covered that band for example. One particularly well-known
option was a particular model of phone, the Oki 900, that had an unusually
open design (in terms of modifiability) that led to reverse engineered and
modified firmware being developed that made eavesdropping on other people's
calls just, well, a feature it had.</p>
<p>The scale of this problem was fairly large, and it was fairly well known. For
example, let's turn to <em>my</em> favorite source of late-night reading, newspaper
archives. A lovely piece in the 30 May 1990 issue of The News and Observer,
from Raleigh NC, takes the cheesy headline "Monitoring Megahertz" and goes
into some depth on the issue.</p>
<p>"I've heard men call their wives and tell them they'll be home late, then call
their girl friends," quipped one electronics store owner who had "accidentally"
eavesdropped on cellular calls using a scanner. We've all fat-fingered our
ways into someone else's affairs I'm sure, pun intended. Another person said
"when you look at the fact that there are how many thousands of people out
there who know my name, my mailing address and my salary...I put cellular
eavesdropping down as being no different from that." In the face of technology,
even in 1990, people had begun to abandon their privacy.</p>
<p>Cellular carriers were not so happy about this, viewing it as an embarrassment
to their operation. I have heard before that cellular carriers went so far as
to lobby for banning scanners entirely, although I am not aware of much hard
evidence of this. What they did do was convince congress to stick an extra few
paragraphs onto an otherwise only tangentially related bit of legislation
called the Telephone Disclosure and Dispute Resolution Act of 1992. This has
largely to do with abusive 1-900 numbers, which is its whole own topic in
telephone regulation that I ought to take on sometime. But it also brought
along just a bit more, an extra section that was subsequently amended several
times at the behest of cellular carriers. Let's read part of it, as amended,
and with some editing for readability.</p>
<p>The Commission shall prescribe and make effective regulations denying equipment
authorization for any scanning receiver that is capable of---(A) receiving
transmissions in the frequencies allocated to the domestic cellular radio
telecommunications service, (B) readily being altered by the user to receive
transmissions in such frequencies, or (C) being equipped with decoders that
convert digital cellular transmissions to analog voice audio.</p>
<p>Well, we've made it full circle: we've seen the regulation, and we've seen the
legislation that kicked the FCC to write the regulation. But how does this
translate today? Things get a bit weird there.</p>
<p>You see, the FCC seems to have (sensibly) …</p></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://computer.rip/2020-11-28%20the%20verboten%20band.html">https://computer.rip/2020-11-28%20the%20verboten%20band.html</a></em></p>]]>
            </description>
            <link>https://computer.rip/2020-11-28%20the%20verboten%20band.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25403163</guid>
            <pubDate>Sun, 13 Dec 2020 00:32:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Rizin – a free and open-source Reverse Engineering framework]]>
            </title>
            <description>
<![CDATA[
Score 58 | Comments 12 (<a href="https://news.ycombinator.com/item?id=25402690">thread link</a>) | @homarp
<br/>
December 12, 2020 | https://rizin.re/posts/announcing-rizin/ | <a href="https://web.archive.org/web/*/https://rizin.re/posts/announcing-rizin/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><article><div><p>We are excited to announce Rizin — a <strong>free</strong> and <strong>open-source</strong> Reverse Engineering framework, providing a complete binary analysis experience with features like Disassembler, Hexadecimal editor, Emulation, Binary inspection, Debugger, and more.</p><p>Rizin is a fork of radare2 with a focus on usability, stability, and working features, which strives to provide a welcoming environment for developers and users alike. Rizin was founded by a group of the core developers of radare2 and Cutter who contributed to the project in one way or the other in the past years and together constructed the Core group of radare2. With the establishment of Rizin, we are committed to creating an environment and a project which will be aligned with our values and vision.</p><p>During recent years, the environment that was created in radare2 was one where many of us felt stressed, disrespected, and unwelcome. Moreover, the number of users of radare2 grew every year, and we held the ultimate responsibility to provide them a stable, usable framework. As the core developer team, we have come to the conclusion that it is impossible for us to continue to pursue the goal of making radare2 better under the current circumstances and environment, and we decided to move forward on our own and fork the project. Cutter, the Graphical User Interface for radare2, and its entire team will also join Rizin and will use it as its backend.</p><p>Rizin is a newborn project that was created from radare2, hence more and more changes and differences will appear over time. A lot of efforts were put into improving our workflows, putting more tests in place, improving the API, removing redundant features, and more. We hope to provide better consistency between releases, making the framework more trustworthy to users.</p><p>We are also working to create a more inclusive and diverse community that will be inviting for new contributors and users. As an initial step, we adopted a <a href="https://rizin.re/code-of-conduct">Code of Conduct</a> that we believe is aligned with our values and with the community we want to create around Rizin.</p><p>Finally, we know and understand that now it is our turn to prove that Rizin can become a tool you can trust and enjoy using, and a community in which you feel welcome. We invite you to read our answers to your <a href="https://rizin.re/posts/faq/">Frequently Asked Questions</a> and join our communities on <a href="https://im.rizin.re/">Mattermost</a> and other chat platforms.</p></div></article></div></div>]]>
            </description>
            <link>https://rizin.re/posts/announcing-rizin/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25402690</guid>
            <pubDate>Sat, 12 Dec 2020 23:11:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Bulk loading into PostgreSQL: Options and comparison]]>
            </title>
            <description>
<![CDATA[
Score 109 | Comments 28 (<a href="https://news.ycombinator.com/item?id=25402430">thread link</a>) | @eatonphil
<br/>
December 12, 2020 | https://www.highgo.ca/2020/12/08/bulk-loading-into-postgresql-options-and-comparison/ | <a href="https://web.archive.org/web/*/https://www.highgo.ca/2020/12/08/bulk-loading-into-postgresql-options-and-comparison/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                        
<p>You have a file, possibly a huge CSV, and you want to import its content into your database. There are lots of options to do this but how would you decide which one to use. More often than not the&nbsp;question is how much time would the&nbsp;bulk load would take. I found my self&nbsp;doing the same few days back when I wanted to design a data ingestion process for PostgreSQL where we needed to bulk load around 250GB of data from CSV files every 24 hours.</p>



<p>Goto solution for bulk loading into PostgreSQL is the native copy command. But one limitation with the copy command is that it requires the CSV file to be placed on the server. So I decided to do a simple comparison of bulk loading options and techniques.</p>



<p>In short I wanted to see the performance difference of loading the data into standard vs unlogged tables and want to compare the loading time difference between loading into table that has an index vs drop-index-&gt;load-&gt;recreate-index option.</p>



<p>Moreover, I wanted to see the performance difference of COPY command, client-side copy command, loading through file_fdw, and pg_bulkload for each of the above options.</p>



<h2>Database and system settings</h2>



<p>Since the intention was to do a relative performance comparison among different data loading techniques and options, so using the personal MacBook Pro running macOS Catalena with 16GB of RAM, 2.7 GHz Quad-Core Intel Core i7 processor, and 500 GB SSD disk was good enough to serve the purpose. </p>



<p>For database I compiled PostgreSQL v12 from source code with default configure options. I left most of the configuration parameter to their default values and only changed the below mentioned settings.</p>



<pre><code>shared_buffers = 2GB
work_mem = 400MB
maintenance_work_mem = 640MB
</code></pre>



<h2>Sample data and schema</h2>



<p>For the purpose of this exercise, I downloaded a sample CSV file from <a href="http://eforexcel.com/wp/downloads-18-sample-csv-files-data-sets-for-testing-sales/">http://eforexcel.com/wp/downloads-18-sample-csv-files-data-sets-for-testing-sales/</a> with 5million rows.</p>



<p>The sample CSV file contains 5 million rows, 14 columns and 624MB in size.</p>



<p><img loading="lazy" width="986" height="71" src="https://www.highgo.ca/wp-content/uploads/2020/12/1-3.png" alt="" srcset="https://www.highgo.ca/wp-content/uploads/2020/12/1-3.png 986w, https://www.highgo.ca/wp-content/uploads/2020/12/1-3-300x22.png 300w, https://www.highgo.ca/wp-content/uploads/2020/12/1-3-768x55.png 768w" sizes="(max-width: 986px) 100vw, 986px"></p>



<p><img loading="lazy" width="2618" height="390" src="https://www.highgo.ca/wp-content/uploads/2020/12/sample-csv.png" alt="" srcset="https://www.highgo.ca/wp-content/uploads/2020/12/sample-csv.png 2618w, https://www.highgo.ca/wp-content/uploads/2020/12/sample-csv-300x45.png 300w, https://www.highgo.ca/wp-content/uploads/2020/12/sample-csv-1024x153.png 1024w, https://www.highgo.ca/wp-content/uploads/2020/12/sample-csv-768x114.png 768w, https://www.highgo.ca/wp-content/uploads/2020/12/sample-csv-1536x229.png 1536w, https://www.highgo.ca/wp-content/uploads/2020/12/sample-csv-2048x305.png 2048w, https://www.highgo.ca/wp-content/uploads/2020/12/sample-csv-1920x286.png 1920w" sizes="(max-width: 2618px) 100vw, 2618px"></p>



<p>To keep things simple I created a sales_record table in PostgreSQL with one to one mapping with the CSV file</p>



<pre>CREATE TABLE sales_record 
(
	region VARCHAR,
	country VARCHAR,
	item_type VARCHAR,
	sales_channel VARCHAR,
	order_priority CHAR,
	order_date DATE,
	order_id INT,
	ship_date DATE,
	unit_sold INT,
	unit_price FLOAT,
	unit_cost FLOAT,
	total_revenue FLOAT,
	total_cost FLOAT,
	total_profit FLOAT
);</pre>



<p>Along with that I also wanted to see the impact of having an index on the bulk load performance, So for tests that&nbsp;require&nbsp;an INDEX, I created a <code>btree</code> index on the <code>country</code> column.</p>



<pre><code>CREATE INDEX country_idx ON sales_record USING btree (country);</code></pre>



<h2>Load using the <a href="https://www.postgresql.org/docs/current/sql-copy.html">COPY</a> command</h2>



<p><code>COPY</code>&nbsp;moves data between&nbsp;PostgreSQL&nbsp;tables and standard file-system files. The copy command comes in two variants, COPY TO and COPY FROM. The former copies the table content to the file, while we will use the latter to load data into the table from the file.</p>



<pre><code>COPY sales_record FROM '/Users/muhammadusama/work/data/5m_Sales_Records.csv' CSV HEADER;</code></pre>



<h2>Load using <a href="https://www.postgresql.org/docs/current/app-psql.html">psql</a> ‘\copy’</h2>



<p>‘<code>\copy</code>‘ is a <code>psql</code> operation that runs an&nbsp;SQL&nbsp;<a href="https://www.postgresql.org/docs/current/sql-copy.html">COPY</a>&nbsp;command, but instead of the server reading or writing the specified file,&nbsp;<code>psql</code>&nbsp;(client) reads or writes the file and routes the data between the server and the local file system. This means that file accessibility and privileges are those of the local user, not the server, and no SQL superuser privileges are required.</p>



<pre>\copy sales_record FROM '/Users/muhammadusama/work/data/5m_Sales_Records.csv' csv header;</pre>



<h2>Through <a href="https://www.postgresql.org/docs/current/file-fdw.html">file_fdw</a></h2>



<p>The foreign-data wrapper&nbsp;<code>file_fdw</code>, can be used to access data files in the server’s file system, or to execute programs on the server and read their output.&nbsp;We can also use the file_fdw to load data from CSV to PostgreSQL tables.</p>



<pre><code>-- Create file_fdw extension and foreign server
CREATE  EXTENSION file_fdw ;
CREATE SERVER file_fdw_server FOREIGN DATA WRAPPER file_fdw; 

-- Define the foreign table that points to our CSV file
CREATE FOREIGN TABLE foreign_sales_record (
	region VARCHAR,
	country VARCHAR,
	item_type VARCHAR,
	sales_channel VARCHAR,
	order_priority CHAR,
	order_date DATE,
	order_id INT,
	ship_date DATE,
	unit_sold INT,
	unit_price FLOAT,
	unit_cost FLOAT,
	total_revenue FLOAT,
	total_cost FLOAT,
	total_profit FLOAT) SERVER file_fdw_server
		OPTIONS (
			format 'csv',
			header 'false' ,
			filename '/Users/muhammadusama/work/data/5m_Sales_Records.csv',
			delimiter ',',
			null '');

-- Copy the data from foreign table to local table
INSERT INTO sales_record SELECT * from foreign_sales_record;
</code></pre>



<p>Although <code>file_fdw</code> is not expected to be as fast as COPY command when it comes to loading the data but it provides a lot of flexibility and options when it comes to pre-processing the data before loading.</p>



<h2><a href="https://github.com/ossc-db/pg_bulkload">pg_bulkload</a> tool</h2>



<p>pg_bulkload is also a very interesting option when it comes to high speed data loading. Its an open-source tool that achieves its performance by skipping the shared buffers and WAL logging.</p>



<pre><code>-- CREATE pg_bulkload extension
$ bin/psql -c "CREATE EXTENSION pg_bulkload" postgres

-- Create control file with appropriate contents
$ more sample_csv.ctl 
WRITER = PARALLEL
OUTPUT = public.sales_record  # [&lt;schema_name&gt;.]table_name
INPUT = /Users/muhammadusama/work/data/5m_Sales_Records.csv  # Input data location (absolute path)

TYPE = CSV           # Input file type
QUOTE = "\""         # Quoting character
ESCAPE = \           # Escape character for Quoting
DELIMITER = ","      # Delimiter

-- Execute pg_bulkload utility
$ bin/pg_bulkload -d postgres -h localhost sample_csv.ctl
</code></pre>



<h2>Results</h2>



<p>Below chart shows the time taken by each tool/command to load 5 million rows from CSV file </p>



<p><img loading="lazy" width="2162" height="756" src="https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.39.13-AM.png" alt="" srcset="https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.39.13-AM.png 2162w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.39.13-AM-300x105.png 300w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.39.13-AM-1024x358.png 1024w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.39.13-AM-768x269.png 768w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.39.13-AM-1536x537.png 1536w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.39.13-AM-2048x716.png 2048w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.39.13-AM-1920x671.png 1920w" sizes="(max-width: 2162px) 100vw, 2162px"></p>



<p><img loading="lazy" width="1784" height="1092" src="https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.31-AM.png" alt="" srcset="https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.31-AM.png 1784w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.31-AM-300x184.png 300w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.31-AM-1024x627.png 1024w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.31-AM-768x470.png 768w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.31-AM-1536x940.png 1536w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.31-AM-1764x1080.png 1764w" sizes="(max-width: 1784px) 100vw, 1784px"></p>



<p><img loading="lazy" width="1904" height="1204" src="https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.47-AM.png" alt="" srcset="https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.47-AM.png 1904w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.47-AM-300x190.png 300w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.47-AM-1024x648.png 1024w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.47-AM-768x486.png 768w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.47-AM-1536x971.png 1536w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.38.47-AM-1708x1080.png 1708w" sizes="(max-width: 1904px) 100vw, 1904px"></p>



<p><img loading="lazy" width="1794" height="928" src="https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.36.01-AM.png" alt="" srcset="https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.36.01-AM.png 1794w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.36.01-AM-300x155.png 300w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.36.01-AM-1024x530.png 1024w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.36.01-AM-768x397.png 768w, https://www.highgo.ca/wp-content/uploads/2020/12/Screenshot-2020-12-07-at-12.36.01-AM-1536x795.png 1536w" sizes="(max-width: 1794px) 100vw, 1794px"></p>



<h2>Conclusion</h2>



<p>Each method for data loading has its own pros and cons which may make one preferred choice over others for a particular use case. But when it comes to raw performance pg_bulkload is a clear winner with COPY and /copy line up behind while file_fdw stands at the last place.</p>



<p>While no matter which data loading method we use, loading into an indexed table is always slow, So do consider <code>drop-index-&gt;load-&gt;create-index </code>when you have a huge data to be loaded.</p>



<blockquote><p>Comparison of all the tools was an apple to apple comparison with both client and server were running on the same machine. So, /copy had no network overhead. In the case of PostgreSQL server and client are on different<em> machines the /copy command may not perform as well as these above results.</em></p></blockquote>
<div itemtype="http://schema.org/Person" itemscope="" itemprop="author"><p><a href="https://www.highgo.ca/author/muhammad-u/"><img src="https://www.highgo.ca/wp-content/uploads/2019/08/usama.jpg" alt="" itemprop="image"></a></p><div><p>Muhammad Usama is a database architect / PostgreSQL consultant at HighGo Software and also Pgpool-II core committer. Usama has been involved with database development (PostgreSQL) since 2006, he is the core committer for open source middleware project Pgpool-II and has played a pivotal role in driving and enhancing the product. Prior to coming to open source development, Usama was doing software design and development with the main focus on system-level embedded development. After joining the EnterpriseDB, an Enterprise PostgreSQL’s company in 2006 he started his career in open source development specifically in PostgreSQL and Pgpool-II. He is a major contributor to the Pgpool-II project and has contributed to many performance and high availability related features.</p></div></div>                                                                    </div></div>]]>
            </description>
            <link>https://www.highgo.ca/2020/12/08/bulk-loading-into-postgresql-options-and-comparison/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25402430</guid>
            <pubDate>Sat, 12 Dec 2020 22:34:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I Hacked into Facebook's Legal Department Admin Panel]]>
            </title>
            <description>
<![CDATA[
Score 648 | Comments 277 (<a href="https://news.ycombinator.com/item?id=25401294">thread link</a>) | @hackerpain
<br/>
December 12, 2020 | https://alaa.blog/2020/12/how-i-hacked-facebook-part-one/ | <a href="https://web.archive.org/web/*/https://alaa.blog/2020/12/how-i-hacked-facebook-part-one/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
						<p>We’ve been in this pandemic since&nbsp; March and once the pandemic started I was having plenty of free time, And I need to use that time wisely, So I’ve decided to take the OSWE certification and I finished the exam on 8 of August, after that, I took a couple of weeks to recover from the OSWE exam, then in the med of September, I said you know what? I did not register my name in the Facebook hall of fame for 2020 as I do every year. okay, let’s do it.</p>

<p>I never found a vulnerability on one of Facebook subdomains, and I took a look at some writeups and I saw one writeup in one of Facebook subdomains which It got all my attention It was a great write up you can check it out <a href="https://ysamm.com/?p=280">[HTML to PDF converter bug leads to RCE in Facebook server.]</a></p>
<p>So after reading this writeup now I took a good idea about how many vulnerabilities I could find in such a huge web app.</p>

<p>So my main target was https://legal.tapprd.thefacebook.com and my goal was RCE or something similar.</p>

<p>I ran some fuzzing tools just to get the full endpoints of this web app and I took a 2 hours nap and watched a movie, Then I got back to see the results okay I got some good results.</p>

<p>Dirs found with a 403 response:</p>
<pre><code>
Dirs found with a 403 response:

/tapprd/
/tapprd/content/
/tapprd/services/
/tapprd/Content/
/tapprd/api/
/tapprd/Services/
/tapprd/temp/
/tapprd/logs/
/tapprd/logs/portal/
/tapprd/logs/api/
/tapprd/certificates/
/tapprd/logs/auth/
/tapprd/logs/Portal/
/tapprd/API/
/tapprd/webroot/
/tapprd/logs/API/
/tapprd/certificates/sso/
/tapprd/callback/
/tapprd/logs/callback/
/tapprd/Webroot/
/tapprd/certificates/dkim/
/tapprd/SERVICES/
</code></pre>
<p>Okay, I think this result is very enough to support my previous theory about how huge this application, Then I started to read the javascript files to see how the website works and what methods it uses ..etc</p>

<p>I noticed a way to bypass the redirection into the Login SSO, https://legal.tapprd.thefacebook.com/tapprd/portal/authentication/login and after analyzing the login page, I noticed this endpoint</p>
<p><strong> /tapprd/auth/identity/user/forgotpassword</strong></p>
<p>and after doing some fuzzing on the user endpoint I’ve noticed another endpoint which its <strong>/savepassword&nbsp;&nbsp;</strong>and it was expecting a POST request, Then after reading the javascript files I knew how the page work, there should be a generated token and xsrf token.. etc The idea that first came to me okay, Lets test it and see if it will work I tried to change manually using burp suite but I got an error, the error <em>was execution this operation failed</em>.</p>

<p>I said okay, this might be because the email is wrong or something? let’s get an admin email, Then I started to put random emails in a list to make a wordlist and after that, I used the intruder and I said let’s see what will happen.</p>
<p>I got back after a couple of hours I found the same error results plus one other result, This one was 302 redirect to the login page, I said wow, I’ll be damned if this worked Haha.</p>

<p>So let’s get back to see what I’ve done here, I sent random requests using intruder with a CSRF token and random emails with a new password to this endpoint <em><strong>/savepassword</strong></em></p>
<p>and one of the results was 302 redirect.</p>
<div id="attachment_128"><p><img aria-describedby="caption-attachment-128" loading="lazy" src="https://alaa.blog/wp-content/uploads/2020/11/redirect-login.png" alt="fbredtrect" width="989" height="446" srcset="https://alaa.blog/wp-content/uploads/2020/11/redirect-login.png 1671w, https://alaa.blog/wp-content/uploads/2020/11/redirect-login-300x135.png 300w, https://alaa.blog/wp-content/uploads/2020/11/redirect-login-1024x461.png 1024w, https://alaa.blog/wp-content/uploads/2020/11/redirect-login-768x346.png 768w, https://alaa.blog/wp-content/uploads/2020/11/redirect-login-1536x692.png 1536w" sizes="(max-width: 989px) 100vw, 989px"></p><p id="caption-attachment-128">Redirect</p></div>
<p><strong>Now I went to the login page and I put the login email and the new password and BOOM I logged in Successfully into the application and I can enter the admin panel 🙂</strong></p>

<p><img loading="lazy" src="https://alaa.blog/wp-content/uploads/2020/11/fblegal-admin.png" alt="" width="882" height="468" srcset="https://alaa.blog/wp-content/uploads/2020/11/fblegal-admin.png 1785w, https://alaa.blog/wp-content/uploads/2020/11/fblegal-admin-300x159.png 300w, https://alaa.blog/wp-content/uploads/2020/11/fblegal-admin-1024x543.png 1024w, https://alaa.blog/wp-content/uploads/2020/11/fblegal-admin-768x407.png 768w, https://alaa.blog/wp-content/uploads/2020/11/fblegal-admin-1536x815.png 1536w" sizes="(max-width: 882px) 100vw, 882px"></p>

<p>I read the hacker report who found RCE before using the PDF and they gave him a reward of 1000$ only so I said okay, let’s make a good Impact here and a perfect exploit.</p>
<p>I wrote a quick and simple script to exploit this vulnerability with python you put the email and the new password and the script will change the password.</p>
<p><img loading="lazy" src="https://alaa.blog/wp-content/uploads/2020/11/Exploit1.png" alt="" width="983" height="123" srcset="https://alaa.blog/wp-content/uploads/2020/11/Exploit1.png 983w, https://alaa.blog/wp-content/uploads/2020/11/Exploit1-300x38.png 300w, https://alaa.blog/wp-content/uploads/2020/11/Exploit1-768x96.png 768w" sizes="(max-width: 983px) 100vw, 983px"></p>
<p><strong>The Impact here was so high because the Facebook workers used to login with their workplace accounts, Which mean they’re using their Facebook accounts access token, and maybe if another attacker wanted to exploit this it might give him the ability to gain access to some Facebook workers accounts .. etc&nbsp;</strong></p>
<p>Then I reported the vulnerability and the report triaged.</p>

<p><strong>And on 2 of October, I received a bounty of 7500$&nbsp;</strong></p>
<p><img loading="lazy" src="https://alaa.blog/wp-content/uploads/2020/11/reward.png" alt="" width="654" height="171" srcset="https://alaa.blog/wp-content/uploads/2020/11/reward.png 696w, https://alaa.blog/wp-content/uploads/2020/11/reward-300x78.png 300w" sizes="(max-width: 654px) 100vw, 654px"></p>
<p>I enjoyed exploiting this vulnerability so much, so I said that’s not enough, this is a weak script! let’s dig more and more.</p>
<p>And I found two more vulnerabilities on the same application, But we will talk about the other vulnerabilities in the Part two writeup 🙂</p>

<p>Cheers.</p>
<div id="sexy-author-bio"><p><a id="sab-Email" href="https://alaa.blog/cdn-cgi/l/email-protection#ee8f828f8f9d8f8c9c879d86ae89838f8782c08d8183" target="_top"><img id="sig-Email" alt="Alaa Abdulridha on Email" src="https://alaa.blog/wp-content/plugins/sexy-author-bio/public/assets/images/flat-circle/sabemail.png"></a><a id="sab-Facebook" href="https://www.facebook.com/alaa.abdulridha.716" target="_top"><img id="sig-Facebook" alt="Alaa Abdulridha on Facebook" src="https://alaa.blog/wp-content/plugins/sexy-author-bio/public/assets/images/flat-circle/sabfacebook.png"></a><a id="sab-Github" href="https://github.com/Alaa-abdulridha" target="_top"><img id="sig-Github" alt="Alaa Abdulridha on Github" src="https://alaa.blog/wp-content/plugins/sexy-author-bio/public/assets/images/flat-circle/sabgithub.png"></a><a id="sab-Instagram" href="https://www.instagram.com/al_shwele" target="_top"><img id="sig-Instagram" alt="Alaa Abdulridha on Instagram" src="https://alaa.blog/wp-content/plugins/sexy-author-bio/public/assets/images/flat-circle/sabinstagram.png"></a><a id="sab-Twitter" href="https://twitter.com/alaa0x2" target="_top"><img id="sig-Twitter" alt="Alaa Abdulridha on Twitter" src="https://alaa.blog/wp-content/plugins/sexy-author-bio/public/assets/images/flat-circle/sabtwitter.png"></a></p><p><a href="https://alaa.blog/author/alaaabdulridha/" target="_top"><img src="https://alaa.blog/wp-content/uploads/2019/08/aaaaaaaaaa-150x150.jpg" width="100" height="100" alt="Alaa Abdulridha"></a></p><p>My name is Alaa Abdulridha I'm a computer engineering student and cybersecurity researcher I'm interested in web application pen-testing and game development, also I'm interested in some bug bounty programs, I like a lot of things such as reverse engineering, reading the others code to learn and then to find my own exploits and teaching it to you, Do you want to know more about me? <a href="https://alaa.blog/whoami/">Click Here</a>.</p></div>						
											</div></div>]]>
            </description>
            <link>https://alaa.blog/2020/12/how-i-hacked-facebook-part-one/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25401294</guid>
            <pubDate>Sat, 12 Dec 2020 20:17:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Yo WASM – The Easy Way to WebAssembly]]>
            </title>
            <description>
<![CDATA[
Score 81 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25400837">thread link</a>) | @praveenperera
<br/>
December 12, 2020 | https://deislabs.io/posts/introducing-yo-wasm/ | <a href="https://web.archive.org/web/*/https://deislabs.io/posts/introducing-yo-wasm/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <p>WebAssembly (Wasm) is a portable standard for bytecode, allowing code to be compiled to an efficient representation that’s amenable to just-in-time optimisation, and to be run on the operating system and runtime environment of your choice.  An ever-increasing number of languages offer compilation to Wasm, and Wasm runtimes are available in major browsers and as separate programs.  The existence of runtimes outside the browser, such as <a href="https://wasmtime.dev/"><code>wasmtime</code></a> and <a href="https://wascc.dev/"><code>waSCC</code></a>, opens up the possibility of using WASM as a general-purpose bytecode format, similar to <a href="https://en.wikipedia.org/wiki/Java_bytecode">Java bytecode</a> or <a href="https://en.wikipedia.org/wiki/Common_Intermediate_Language">.NET CIL</a>.  For example, the <a href="https://deislabs.io/posts/introducing-krustlet/">Krustlet</a> project provides a way to run WebAssembly modules as Kubernetes pods, performing compute work or serving HTTP requests.</p>

<p>Although languages such as <a href="https://rustwasm.github.io/docs/book/">Rust</a> and <a href="https://developer.mozilla.org/en-US/docs/WebAssembly/C_to_wasm">C/C++</a> can compile to WASM, it’s not always obvious how to set up projects in this way - there is extra ceremony compared to most languages’ “native” target.  Setting up debugging and deployment also involves extra steps too, and those aren’t always obvious.  So there’s a barrier to entry in the first place, and unwelcome configuration every time you create a new project.</p>

<p>To make this a bit easier, we’re building a Wasm project generator, using the popular <a href="https://yeoman.io/">Yeoman</a> code generator, to take care of this setup for you.  We’ve just released the first preview and we’d love folks to try it out and let us know how it goes.</p>

<p>To install Yeoman and the Wasm generator, you’ll need to have Node.js and NPM already installed; then run:</p>

<pre><code>npm install -g yo
npm install -g generator-wasm
</code></pre>

<p>Then generate your new project:</p>

<pre><code>mkdir myproject
cd myproject
yo wasm
</code></pre>

<p>The generator will ask you a few questions, of which two are interesting:</p>

<ol>
<li><p>Which language do you want the project generated in?  At the moment, we can do Rust, C and AssemblyScript.  We’d be delighted to have more.</p></li>

<li><p>Do you want to publish the compiled Wasm module to an OCI registry, and if so which one?  This is relevant for workloads that you envisage running in a cloud environment such as Kubernetes with Krustlet.  You don’t have to publish to an OCI registry; if you do, we currently only offer Azure Container Registry, but again would love to extend that to other OCI registries.</p></li>
</ol>

<p><img src="https://i.imgur.com/QYAQcHH.png" alt="Project setup in yo wasm"></p>

<p>The result of all this is a “hello, world” application.  The code itself is uninteresting, being just a minimal Rust, C or AssemblyScript program, but the generator also provides a bunch of things to make the development experience easier:</p>

<ol>
<li><p>Visual Studio Code tasks to build and debug the Wasm build.  This means that - if you’re a VS Code user - you can get up and running editing and debugging the project very quickly.  The Debug Wasm debug configuration uses <code>wasmtime</code> to run the program, and the LLDB debugger to support breakpoints, etc. in the running Wasm.</p>

<p><img src="https://i.imgur.com/ypz6o0P.png" alt="The Debug WASM configuration in VS Code"></p></li>

<li><p>GitHub actions to build pull requests, and to publish the compiled Wasm module to your chosen OCI registry when you merge to <code>main</code> or tag a release with a string of the form <code>v*</code> (e.g. <code>v1.0.0</code>).  (If you chose not to publish to an OCI registry, this action just creates a build artifact.)</p>

<p><img src="https://i.imgur.com/ARpY3jl.png" alt="Build and publish workflows running out of the box"></p></li>
</ol>

<p>The preview release has some limitations.  We’ve mentioned the limited language and registry options.  One important restriction is that all our current templates target WASI (WebAssembly System Interface) and the <code>wasmtime</code> runtime.  We’d love to have templates for other environments and runtimes, but we could really do with feedback on that before we invest in it.</p>

<p>We hope you’ll give <code>yo wasm</code> a try.  Please let us know if you run into any problems by raising an issue at <a href="https://github.com/deislabs/generator-wasm/issues">https://github.com/deislabs/generator-wasm/issues</a>, or feel free to send a pull request if there’s something you’d like to add or improve.  Thanks!</p>

      
      
    </div></div>]]>
            </description>
            <link>https://deislabs.io/posts/introducing-yo-wasm/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25400837</guid>
            <pubDate>Sat, 12 Dec 2020 19:32:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I built a picture frame with a greyscale e-paper that runs on battery for years]]>
            </title>
            <description>
<![CDATA[
Score 171 | Comments 80 (<a href="https://news.ycombinator.com/item?id=25400702">thread link</a>) | @clash
<br/>
December 12, 2020 | https://framelabs.eu/en/ | <a href="https://web.archive.org/web/*/https://framelabs.eu/en/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="moove_gdpr_cookie_modal" role="complementary" aria-label="GDPR Settings Screen" data-no-translation-aria-label="">
  <div>
    <div>
      
<p><img src="https://framelabs.eu/wp-content/plugins/gdpr-cookie-compliance/dist/images/gdpr-logo.png" alt="Frame Labs">
</p>
<!--  .moove-gdpr-company-logo-holder -->      <ul id="moove-gdpr-menu">
        
<li>
  
</li>

  <li>
    
  </li>




      </ul>
      
<div>
  
		<p><a href="https://wordpress.org/plugins/gdpr-cookie-compliance" target="_blank" rel="noopener">Powered by&nbsp; <span data-no-translation="" data-trp-gettext="">GDPR Cookie Compliance</span></a>
		</p></div>
<!--  .moove-gdpr-branding -->    </div>
    <!--  .moove-gdpr-modal-left-content -->
    <div>
      
      <!-- .moove-gdpr-modal-ritle -->
      <div>

        <div>
          
<div id="privacy_overview">
      <p><span data-no-translation="" data-trp-gettext="">Privacy Overview</span></p><p data-no-translation="" data-trp-gettext="">This website uses cookies so that we can provide you with the best user experience possible. Cookie information is stored in your browser and performs functions such as recognising you when you return to our website and helping our team to understand which sections of the website you find most interesting and useful.</p>
  <!--  .moove-gdpr-tab-main-content -->

</div>
<!-- #privacy_overview -->          
  
  <!-- #strict-necesarry-cookies -->
          
          
          
        </div>
        <!--  .moove-gdpr-tab-content -->
      </div>
      <!--  .main-modal-content -->
      <div>
        
<!--  .moove-gdpr-button-holder -->      </div>
      <!--  .moove-gdpr-modal-footer-content -->
    </div>
    <!--  .moove-gdpr-modal-right-content -->

    

  </div>
  <!--  .moove-gdpr-modal-content -->
</div></div>]]>
            </description>
            <link>https://framelabs.eu/en/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25400702</guid>
            <pubDate>Sat, 12 Dec 2020 19:19:45 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Thread-Per-Core Buffer Management for a modern storage system]]>
            </title>
            <description>
<![CDATA[
Score 116 | Comments 36 (<a href="https://news.ycombinator.com/item?id=25400350">thread link</a>) | @arjunnarayan
<br/>
December 12, 2020 | https://vectorized.io/blog/tpc-buffers/ | <a href="https://web.archive.org/web/*/https://vectorized.io/blog/tpc-buffers/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><section><p><a href="https://vectorized.io/blog/redpanda-raison-detre">As I have previously observed</a>, software does not run on category theory, it runs on superscalar CPUs with wide, multi-channel GB/s memory units and NVMe SSD access times in the order of 10-100’s of microseconds. The reason some software written a decade ago - on a different hardware platform - feels slow is because it fails to exploit the advances in modern hardware.</p>
<p>The new bottleneck in storage systems is the CPU. SSD devices are 100-1000x faster than spinning disks and are 10x cheaper today[1] than they were a decade ago, from $2,500 down to $200 per Terabyte. Networks have 100x higher throughput in public clouds from 1Gbps to 100Gbps.</p>
<p>Although computers did, in fact, get faster, single-core speeds remain roughly the same. The reason being that CPU frequency has a cubic dependency on power consumption, and we’ve hit a wall. Instruction level parallelism, prefetching, speculative execution, branch prediction, deep hierarchy of data caches and instruction caches, etc, have contributed to programs <em>feeling</em> faster when you interact with them, but in the datacenter, the material improvements have come from the rise in core count. While the instructions per clock are 3x higher than a decade ago, core count is up 20x.</p>
<p>This is all to say that the rise of readily available, many-core systems necessitates a different approach for building infrastructure. Case in point[9]: in order to take full advantage of 96 vCPUs on a i3en.metal on AWS, you’ll need to find a way to exploit sustained CPU clock speed of 3.1 GHz, 60 TB of total NVMe instance storage, 768 GiB of memory and NVMe devices capable of delivering up to 2 million random IOPS at 4 KB block sizes. This kind of beast necessitates a new kind of storage engine and threading model that leverages these hardware advances.</p>
<p><a href="https://vectorized.io/redpanda" target="_self" rel="nofollow">Redpanda</a> - a Kafka-API compatible system for mission critical workloads[3] - addresses all of these issues. It uses a thread-per-core architecture with Structured Message Passing (SMP) to communicate between these pinned threads. Threading is a foundational decision for any application, whether you are using a thread-pool, pinned threads with a network of Single Producer Single Consumer SPSC[7] queues, or any other of the advanced Safe Memory Reclamation (SMR) techniques, threading is your ring-0, the true kernel of your application. It tells you what your sensitivity is for blocking - which for Redpanda is less than 500 microseconds - otherwise, Seastar’s[4] reactor will print a stack trace warning you of the blocking since it effectively injects latency on the network poller.</p>
<p>Once you have decided on your threading model, the next step is your memory model and ultimately, for storage engines, your buffer management. In this post, we’ll cover the perils of buffer management in a thread-per-core environment and describe <code>iobuf</code>, our solution for a 0-copy memory management in the world of Seastar.</p>
<h2 id="Request-Flow-Architecture">Request Flow Architecture<a href="#Request-Flow-Architecture" aria-label="Request Flow Architecture permalink"></a></h2>
<p>As mentioned earlier, Redpanda uses a <em>single</em> pinned thread per core architecture to do everything. Network polling, submitting async IO to the kernel, reaping events, triggering timers, scheduling compute tasks, etc. Structurally, it means nothing can block for longer than 500 microseconds, or you’ll be introducing latency in other parts of your stack. This is an incredibly strict programming paradigm, but this opinionated idea forces a truly asynchronous system, whether you like it or not as the programmer.</p>
<p><img src="https://vectorized.io/31d1a730c507b605e6c1ebea60eb1e56/flow.svg" alt="Kafka request flow">
<small>
Figure 1: request flow architecture. Core-0 accepts the connection from the Kafka Java client and becomes the source core. After the request goes through the metadata cache(valid request) it filters through the partition router which decides to send the request to core-1, the destination core. Core-1 then accepts the write through the Raft-log interface and saves it to disk.
</small></p>
<p>The challenge in a TpC (thread-per-core) architecture[8] is that all communication between cores is explicit. This muscles the programmer into implementing algorithms that favor core-locality (d-cache, i-cache) over the straightforward multi-threaded implementations via mutexes. This imperative has to be co-designed with the asynchronicity of a <strong>future&lt;&gt;</strong>-based implementation.</p>
<p>For our Kafka-API implementation as shown in Figure 1, we explicitly trade memory usage to reduce latency and increase throughput by materializing key components. The metadata Cache is materialized on every core since every request has to know if the partition exists, and that that particular machine is, in fact, the leader of the partition. The Partition Router maintains a map of which logical core actually owns the underlying Kafka partition on the machine. Other things like Access Control Lists (ACLs) are deferred until the request reaches the destination core since they can get unwieldy in memory footprint.  We have no hard and fast rule of what we materialize on every core vs. what is deferred for the destination core, and it’s often a function of memory (smaller data structures are good candidates for broadcast), computation (how much time is spent deciding) and frequency of access (very likely operations tend to get materialized on every core).</p>
<p>One question remaining is how, exactly, does memory management work in a TpC architecture? How does data actually travel from L-core-0 to L-core-66 safely using a network of SPSC queues within a fully asynchronous execution model where things can suspend at any point in time?</p>
<h2 id="struct-iobuf--">struct iobuf { };<a href="#struct-iobuf--" aria-label="struct iobuf   permalink"></a></h2>
<h3 id="Redpandas-0-copy-buffer-management-for-TpC">Redpanda’s 0-copy buffer management for TpC<a href="#Redpandas-0-copy-buffer-management-for-TpC" aria-label="Redpandas 0 copy buffer management for TpC permalink"></a></h3>
<p>To understand <strong>iobuf</strong>, we need to understand the actual memory constraints of Seastar, our TpC framework. During program bootstrap, Seastar allocates the full memory of the computer and splits it evenly across all the cores. It consults the hardware to understand what memory belongs to each particular core, reducing inter-core traffic to main memory.</p>
<p><img src="https://vectorized.io/efa273909c5b695bf7f978f77b32c12b/seastar_model.svg" alt="Seastar mental model">
<small>
Figure 2: Copy from alexgallego.org (<a href="https://www.alexgallego.org/concurrency/smf/2017/12/16/future.html" target="_self" rel="nofollow">https://www.alexgallego.org/concurrency/smf/2017/12/16/future.html</a>) Seastar threading model. Seastar uses a network of SPS queues to send messages to neighboring cores. Similar to other message passing or actor models like Erlang, Orleans and Pony, once a function is futurized, transitive functions too will become futurized. Both approaches, however, are intrinsically safe. The programmer worries about correctness and construction while the frameworks worry about efficient execution. Counter to general wisdom, it is actually faster and more scalable than the synchronous approach. While the machine does more work, it is executing your code simultaneously. This simultaneity is the key to finishing work sooner.
</small></p>
<p>As Figure 2 suggests, memory allocated on core-0, <em>must</em> be deallocated on core-0. However, there is no way to guarantee that a Java or Go client connecting to Redpanda will actually communicate with the exact core that owns the data.</p>
<p>At its core, an iobuf is a ref-counted, fragmented-buffer-chain with deferred deletes that allows Redpanda to simply share a view of a remote core’s parsed messages as the fragments come in, without incurring a copy overhead.</p>
<p><img src="https://vectorized.io/6df6fc00e05201d068dc5d03e080606a/iobuf.svg" alt="iobuf architecture"></p>
<p>The fragmented buffers abstraction is not new. The linux kernel has <strong>sk_buff</strong>[5] and the freebsd kernel has an <strong>mbuf</strong>[6] which are roughly similar. The additional extension of an iobuf is that it works in the TCP model leveraging Seastar’s network of SPSC queues to have proper deletes in addition to being able to share sub-views arbitrarily, tailored for a storage-like workload.</p>
<p>Removing the C++ templates, allocators, pooling, pointer caching, etc, one could think of an iobuf as being equivalent to:</p>
<div data-language="cpp"><pre><code><span>struct</span> <span>fragment</span> <span>{</span>
    <span>void</span> <span>*</span> data<span>;</span>
    size_t ref_count<span>;</span>
    size_t capacity<span>;</span>
    size_t size<span>;</span>

    fragment<span>*</span> next<span>;</span>  
    fragment<span>*</span> prev<span>;</span>
<span>}</span>
<span>struct</span> <span>iobuf</span> <span>{</span>
    fragment<span>*</span> head<span>;</span>
<span>}</span><span>;</span></code></pre></div>
<p>The origins of iobuf are rooted in one of our central product tenets for building a Kafka® replacement for mission critical systems - giving users 10x lower tail latencies for most workloads. Aside from a thread-per-core architecture, the memory management would have been our second bottleneck if not designed from the ground up for latency. On long running storage systems, memory fragmentation is a real problem, and one that is eventually either met with a proper solution (iobuf), stalls or an OOM.</p>
<p>Like its predecessors skbuff and mbuff, iobuf allows us to optimize and train our memory allocator with predictable memory sizes. Here is our iobuf allocation table logic:</p>
<div data-language="cpp"><pre><code><span>struct</span> <span>io_allocation_size</span> <span>{</span>
   <span>static</span> <span>constexpr</span> size_t max_chunk_size <span>=</span> <span>128</span> <span>*</span> <span>1024</span><span>;</span>
   <span>static</span> <span>constexpr</span> size_t default_chunk_size <span>=</span> <span>512</span><span>;</span>

   
   
   
   
   
   
   <span>static</span> <span>constexpr</span> std<span>::</span>array<span>&lt;</span><span>uint32_t</span><span>,</span> <span>15</span><span>&gt;</span> alloc_table <span>=</span>
     
     <span>{</span><span>{</span><span>512</span><span>,</span>
       <span>768</span><span>,</span>
       <span>1152</span><span>,</span>
       <span>1728</span><span>,</span>
       <span>2592</span><span>,</span>
       <span>3888</span><span>,</span>
       <span>5832</span><span>,</span>
       <span>8748</span><span>,</span>
       <span>13122</span><span>,</span>
       <span>19683</span><span>,</span>
       <span>29525</span><span>,</span>
       <span>44288</span><span>,</span>
       <span>66432</span><span>,</span>
       <span>99648</span><span>,</span>
       <span>131072</span><span>}</span><span>}</span><span>;</span>

   <span>static</span> size_t <span>next_allocation_size</span><span>(</span>size_t data_size<span>)</span><span>;</span>
<span>}</span><span>;</span>   </code></pre></div>
<p>Predictability, memory pooling, fixed sizes, size capping, fragmented traversal, etc, are all known techniques to reduce latency. Asking for contiguous and variably sized memory could cause the allocator to compact all of the arenas and reshuffle a lot of bytes for what could be a short-lived request, not only injecting latency on the request path, but for the entire system since we have exactly one thread performing all operations.</p>
<p>Hardware is the platform. When we ask the network layer to give us exactly 11225 bytes in contiguous memory, we are simply asking the allocator to linearize an empty buffer of that exact size and for the network layer to copy bytes as the fragments come from the hardware into the destination buffer. There is ultimately no free lunch when it comes to trying to squeeze every single ounce of performance of your hardware and often it requires re-architecting from zero.</p>
<p>If you made it this far, I encourage you to sign up for our <a href="https://vectorized.io/slack" target="_self" rel="nofollow">Community Slack (here!)</a> and ask us questions directly or engage with us on twitter via <a href="https://twitter.com/vectorizedio" target="_self" rel="nofollow">@vectorize…</a></p></section></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://vectorized.io/blog/tpc-buffers/">https://vectorized.io/blog/tpc-buffers/</a></em></p>]]>
            </description>
            <link>https://vectorized.io/blog/tpc-buffers/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25400350</guid>
            <pubDate>Sat, 12 Dec 2020 18:34:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Red Hat Goes Full IBM and Says Farewell to CentOS]]>
            </title>
            <description>
<![CDATA[
Score 219 | Comments 311 (<a href="https://news.ycombinator.com/item?id=25400249">thread link</a>) | @vanburen
<br/>
December 12, 2020 | https://www.servethehome.com/red-hat-goes-full-ibm-and-says-farewell-to-centos/ | <a href="https://web.archive.org/web/*/https://www.servethehome.com/red-hat-goes-full-ibm-and-says-farewell-to-centos/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <!-- image --><div><figure><a href="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-scaled.jpg" data-caption="Red Hat Distro Family Progression 2020-2025"><img width="696" height="391" src="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-696x391.jpg" srcset="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-696x391.jpg 696w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-400x224.jpg 400w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-800x449.jpg 800w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-1536x862.jpg 1536w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-2048x1149.jpg 2048w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-1068x599.jpg 1068w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-749x420.jpg 749w" sizes="(max-width: 696px) 100vw, 696px" alt="Red Hat Distro Family Progression 2020-2025" title="Red Hat Distro Family Progression 2020-2025"></a><figcaption>Red Hat Distro Family Progression 2020-2025</figcaption></figure></div>
            <!-- content --><p>This week, Red Hat caught a lot of the Linux community off-guard by what was a shocking announcement for many: CentOS 8 as we know it, will see a reduced lifecycle, ending in December 2021. Further, while the project will still support CentOS 7, CentOS, as the community has known it, is effectively a dead project at this point. This is fairly consistent with how <a href="https://www.servethehome.com/ibm-gobbles-up-red-hat/">IBM</a> is known to do some acquisitions, but it is still shocking.<span id="more-49249"></span></p>
<h2>The Video Version</h2>
<p>Since we have been doing more content with video lately, we are also including a version of this as a video for you to listen to.</p>
<p><iframe title="Red Hat Says Sayonara to CentOS" width="696" height="392" src="https://www.youtube.com/embed/qqc3k5Ym1tA?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>
<p>Of course, we know most of the folks on here prefer to read, but this video is a fairly close representation of what is in the article. Feel free to open it on YouTube and check it out there.</p>
<h2>CentOS Project Key History</h2>
<p>While some will like to go back to the founding of CentOS, we instead wanted to focus on what CentOS had effectively become over the last 5-10 years: a Red Hat Enterprise Linux (RHEL) alternative without the support contract.</p>
<figure id="attachment_49262" aria-describedby="caption-attachment-49262"><a href="https://www.servethehome.com/red-hat-goes-full-ibm-and-says-farewell-to-centos/red-hat-2020/" rel="attachment wp-att-49262"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2020-scaled.jpg" alt="Red Hat 2020" width="2560" height="1439" srcset="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2020-scaled.jpg 2560w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2020-400x225.jpg 400w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2020-800x450.jpg 800w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2020-1536x864.jpg 1536w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2020-2048x1151.jpg 2048w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2020-696x391.jpg 696w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2020-1068x600.jpg 1068w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2020-747x420.jpg 747w" sizes="(max-width: 2560px) 100vw, 2560px"></a><figcaption id="caption-attachment-49262">Red Hat Distro Family Progression 2020</figcaption></figure>
<p>Even if you run on Debian derivatives, you are aware of how mature the RHEL ecosystem is. It is a testament to Red Hat being the top open-source company in the world. CentOS releases generally lagged the RHEL releases by a few months, but effectively were clones of RHEL for those that did not have the budget for RHEL. Some can say CentOS was something different, but if we are being fair, a huge portion of the usage was effectively to access key parts of the RHEL ecosystem while not paying a subscription fee.</p>
<p>In 2014, Red Hat saw the potential and the benefits to its ecosystem and brought the CentOS team in-house. There is a team inside Red Hat developing CentOS with salaries and badges. The rationale from what I have been told is that it was better to have applications built on CentOS then brought up to RHEL as they matured rather than putting more development effort into the Ubuntu/ Debian ecosystem. That is both simplistic, but also makes a lot of sense. As part of this arrangement, Red Hat effectively got control of the CentOS governing body. That makes a lot of sense since Red Hat would be paying for developers, but it also made a few folks think about what could happen with CentOS not being independent.</p>
<figure id="attachment_49263" aria-describedby="caption-attachment-49263"><a href="https://www.servethehome.com/red-hat-goes-full-ibm-and-says-farewell-to-centos/red-hat-acquisition-passage/" rel="attachment wp-att-49263"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Acquisition-Passage.jpg" alt="Red Hat Acquisition Passage" width="1714" height="1602" srcset="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Acquisition-Passage.jpg 1714w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Acquisition-Passage-321x300.jpg 321w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Acquisition-Passage-800x748.jpg 800w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Acquisition-Passage-1536x1436.jpg 1536w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Acquisition-Passage-696x651.jpg 696w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Acquisition-Passage-1068x998.jpg 1068w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Acquisition-Passage-449x420.jpg 449w" sizes="(max-width: 1714px) 100vw, 1714px"></a><figcaption id="caption-attachment-49263">Red Hat Absorbs CentOS Press Release</figcaption></figure>
<p>Taking a step back to 2014, anyone building applications saw Red Hat’s signal that it was committing resources to CentOS and frankly felt fairly good about platforming on CentOS. We almost switched back our hosting infrastructure to CentOS because of that, but there was a not-insignificant risk that we would get forced into a subscription at some point.</p>
<p>Between that acquisition, and 2020, we had a period where loosely CentOS would follow RHEL releases, supported by official Red Hat resources, by a few months. It took some time to extract bits of IP in RHEL and other changes, but for years, this was the operating model.</p>
<figure id="attachment_49269" aria-describedby="caption-attachment-49269"><a href="https://www.servethehome.com/red-hat-goes-full-ibm-and-says-farewell-to-centos/red-hat-centos-eol-summary/" rel="attachment wp-att-49269"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-CentOS-EOL-Summary.jpg" alt="Red Hat CentOS EOL Summary" width="1118" height="188" srcset="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-CentOS-EOL-Summary.jpg 1118w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-CentOS-EOL-Summary-400x67.jpg 400w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-CentOS-EOL-Summary-800x135.jpg 800w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-CentOS-EOL-Summary-696x117.jpg 696w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-CentOS-EOL-Summary-1068x180.jpg 1068w" sizes="(max-width: 1118px) 100vw, 1118px"></a><figcaption id="caption-attachment-49269">Red Hat CentOS EOL Summary</figcaption></figure>
<p>Another key factoid is that the end of support for CentOS 6 was in November 2020. Since RHEL and CentOS are known for long support cycles, a lot of organizations decided to jump from CentOS 6 to 8 instead of re-platforming on 7 since that maximizes the time until another re-platforming effort would need to be scheduled. Or that is what many in the industry thought.</p>
<figure id="attachment_49267" aria-describedby="caption-attachment-49267"><a href="https://www.servethehome.com/red-hat-goes-full-ibm-and-says-farewell-to-centos/red-hat-2022/" rel="attachment wp-att-49267"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2022-scaled.jpg" alt="Red Hat 2022" width="2560" height="1444" srcset="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2022-scaled.jpg 2560w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2022-400x226.jpg 400w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2022-800x451.jpg 800w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2022-1536x866.jpg 1536w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2022-2048x1155.jpg 2048w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2022-696x392.jpg 696w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2022-1068x602.jpg 1068w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2022-745x420.jpg 745w" sizes="(max-width: 2560px) 100vw, 2560px"></a><figcaption id="caption-attachment-49267">Red Hat Distro Family Progression 2022</figcaption></figure>
<p>Then, on December 8, 2020, Red Hat announced that it was going to cut the current CentOS 8 support timeframe down considerably in the process of effectively killing the project. While 2021 may not be impacted, with CentOS 6 EOL on November 30, 2020, and CentOS 8 EOL on December 31, 2021, by January 1, 2022 CentOS 7 will be the only one receiving Maintenance Updates. The CentOS name will live on but in a different part of the ecosystem than it has to date.</p>
<h2>CentOS Stream and the New Red Hat Operating Model</h2>
<p>CentOS Stream is a project that sits between the upstream Fedora Linux and RHEL. While CentOS 8 is being shut down, and we do not expect a CentOS 9 unless there is a major change in direction at Red Hat, the CentOS name will live on for now in the CentOS Stream after CentOS 7 eventually goes EOL on June 30, 2024. By the second half of 2024, and by 2025 we expect this is what the diagram will look like.</p>
<figure id="attachment_49268" aria-describedby="caption-attachment-49268"><a href="https://www.servethehome.com/red-hat-goes-full-ibm-and-says-farewell-to-centos/red-hat-2025/" rel="attachment wp-att-49268"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2025-scaled.jpg" alt="Red Hat 2025" width="2560" height="1449" srcset="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2025-scaled.jpg 2560w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2025-400x226.jpg 400w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2025-800x453.jpg 800w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2025-1536x870.jpg 1536w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2025-2048x1159.jpg 2048w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2025-696x394.jpg 696w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2025-1068x605.jpg 1068w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-2025-742x420.jpg 742w" sizes="(max-width: 2560px) 100vw, 2560px"></a><figcaption id="caption-attachment-49268">Red Hat Distro Family Progression 2025</figcaption></figure>
<p>For those who are current CentOS users, this means that what will be known as CentOS is being moved upstream of RHEL instead of downstream. Many of the current CentOS users like the fact that it is broadly tied to the RHEL ecosystem, and by moving it upstream it becomes a different value proposition.</p>
<figure id="attachment_49272" aria-describedby="caption-attachment-49272"><a href="https://www.servethehome.com/red-hat-goes-full-ibm-and-says-farewell-to-centos/red-hat-summary/" rel="attachment wp-att-49272"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-scaled.jpg" alt="Red Hat Summary" width="2560" height="1436" srcset="https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-scaled.jpg 2560w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-400x224.jpg 400w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-800x449.jpg 800w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-1536x862.jpg 1536w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-2048x1149.jpg 2048w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-696x391.jpg 696w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-1068x599.jpg 1068w, https://www.servethehome.com/wp-content/uploads/2020/12/Red-Hat-Summary-749x420.jpg 749w" sizes="(max-width: 2560px) 100vw, 2560px"></a><figcaption id="caption-attachment-49272">Red Hat Distro Family Progression 2020-2025</figcaption></figure>
<p>As much as I have an affinity for the CentOS brand, I do not like “CentOS Stream” being used, especially without CentOS being discontinued as a downstream distribution from RHEL. It made some sense for both to be active, but CentOS Stream may as well be called “BigBlue Hat Enterprise Linux Stream” or something like that. Fedora is not RHEL Stream for a reason. In the future Fedora, CentOS Stream, then RHEL will make sense from a branding perspective, except that CentOS is so widely used that it has a history, a history that will be chronicled for decades in Q&amp;A sites, how-tos, and other user support artifacts from the CentOS (non-stream) era.</p>
<h2>What Red Hat Needs to Do, ASAP</h2>
<p>As part of the announcement, RHEL has hinted that it would be doing something with its RHEL licensing to help the CentOS community, and there is a step it could take to turn this into an amazing gambit for Red Hat: opening a non-subscription level to RHEL beyond the current developer license.</p>
<p>“There are different kinds of CentOS users, and we are working with the CentOS Project Governing Board to tailor programs that meet the needs of these different user groups. In the first half of 2021, we plan to introduce low- or no-cost programs for a variety of use cases, including options for open source projects and communities and expansion of the Red Hat Enterprise Linux Developer subscription use cases to better serve the needs of systems administrators. We’ll share more details as these initiatives coalesce.“ (<strong>Source</strong>: <a href="https://www.redhat.com/en/blog/centos-stream-building-innovative-future-enterprise-linux">Red Hat</a>)</p>
<p>This is the sort of move that could yield huge dividends for Red Hat. If the migration path was from CentOS 8 to a carefully crafted “RHEL-freemium” distribution, which is how many viewed CentOS at a high-level anyway, then it has the ability to greatly increase Red Hat’s installed base in its main RHEL distribution. There are huge ramifications for this from an IP, licensing, and even just a business perspective, but it would be an amazing move. At the same time, it is a move that if Red Hat wanted to do, it should have been announced along with the CentOS retirement to quell the confusion. Effectively, Red Hat would be doing what iXsystems did to migrate FreeNAS to TrueNAS Core just on a much grander scale.</p>
<p>Red Hat desperately needs to have a good path forward. Perhaps none are perfect, but asking CentOS users to upgrade to CentOS Stream, pay for a RHEL license, or leave the ecosystem seems like a highly imperfect set of options.</p>
<h2>Final Words</h2>
<p>The intellectually easy answer to what is happening is that IBM is putting pressure on Red Hat to hit bigger numbers in the future. Red Hat sees a captive audience in its CentOS userbase and is looking to covert a percentage to paying customers. Everyone else can go to Ubuntu or elsewhere if they do not want to pay. That seems a bit shortsighted of an explanation we have heard offered.</p>
<figure id="attachment_30704" aria-describedby="caption-attachment-30704"><a href="https://www.servethehome.com/ibm-gobbles-up-red-hat/ibm-and-red-hat-merger/" rel="attachment wp-att-30704"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2018/10/IBM-and-Red-Hat-Merger.jpg" alt="IBM And Red Hat Merger" width="1039" height="572" srcset="https://www.servethehome.com/wp-content/uploads/2018/10/IBM-and-Red-Hat-Merger.jpg 1039w, https://www.servethehome.com/wp-content/uploads/2018/10/IBM-and-Red-Hat-Merger-400x220.jpg 400w, https://www.servethehome.com/wp-content/uploads/2018/10/IBM-and-Red-Hat-Merger-800x440.jpg 800w, https://www.servethehome.com/wp-content/uploads/2018/10/IBM-and-Red-Hat-Merger-696x383.jpg 696w, https://www.servethehome.com/wp-content/uploads/2018/10/IBM-and-Red-Hat-Merger-763x420.jpg 763w" sizes="(max-width: 1039px) 100vw, 1039px"></a><figcaption id="caption-attachment-30704">IBM And Red Hat Merger</figcaption></figure>
<p>The strange part of the Red Hat announcement was that it sets a precedent that is not great. Both Red Hat, and IBM its parent, are very large, sophisticated companies. There is little chance they did not foresee community outcry over an abrupt change of direction like this. Sometimes, those changes have to be made, and in the technology industry change should be the status quo. At the same time, seeing a large, established company making this kind of abrupt change, that has a major operating impact on a large user base, without a clear path forward, is a scary precedent. RHEL customers are taking notice asking if this is what they can expect from the company moving forward.</p>
<p>There are basically two paths forward here. One is that Red Hat becomes the Apple (or IBM?) of the Linux ecosystem, becoming a high-priced exclusive vendor with great technology. The second is that Red Hat unveils a roadmap that does not leave the CentOS community peering over the edge of an end-of-support cliff.</p>
<p>As always, we would love to hear STH community’s thoughts on the announcement. There is a thread in our <a href="https://forums.servethehome.com/index.php?threads/centos-8-to-be-discontinued-at-end-of-2021.31052/">forums here</a>.</p>
        </div></div>]]>
            </description>
            <link>https://www.servethehome.com/red-hat-goes-full-ibm-and-says-farewell-to-centos/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25400249</guid>
            <pubDate>Sat, 12 Dec 2020 18:19:03 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[GitHub Dark Mode is too Dark]]>
            </title>
            <description>
<![CDATA[
Score 369 | Comments 192 (<a href="https://news.ycombinator.com/item?id=25400139">thread link</a>) | @karenying7
<br/>
December 12, 2020 | https://blog.karenying.com/posts/github-darkmode-sucks | <a href="https://web.archive.org/web/*/https://blog.karenying.com/posts/github-darkmode-sucks">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>If you hate it too this is why. Using color theory to show why GitHub dark mode is disappointing</p><div><p><span>
      <a href="https://blog.karenying.com/static/1240ac771aa160847206d70e5dd76dce/6389a/github-darkmode-sucks.jpg" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.karenying.com/static/1240ac771aa160847206d70e5dd76dce/8ac56/github-darkmode-sucks.webp 240w,
https://blog.karenying.com/static/1240ac771aa160847206d70e5dd76dce/d3be9/github-darkmode-sucks.webp 480w,
https://blog.karenying.com/static/1240ac771aa160847206d70e5dd76dce/e46b2/github-darkmode-sucks.webp 960w,
https://blog.karenying.com/static/1240ac771aa160847206d70e5dd76dce/30504/github-darkmode-sucks.webp 1325w" sizes="(max-width: 960px) 100vw, 960px" type="image/webp">
        <source srcset="https://blog.karenying.com/static/1240ac771aa160847206d70e5dd76dce/09b79/github-darkmode-sucks.jpg 240w,
https://blog.karenying.com/static/1240ac771aa160847206d70e5dd76dce/7cc5e/github-darkmode-sucks.jpg 480w,
https://blog.karenying.com/static/1240ac771aa160847206d70e5dd76dce/6a068/github-darkmode-sucks.jpg 960w,
https://blog.karenying.com/static/1240ac771aa160847206d70e5dd76dce/6389a/github-darkmode-sucks.jpg 1325w" sizes="(max-width: 960px) 100vw, 960px" type="image/jpeg">
        <img src="https://blog.karenying.com/static/1240ac771aa160847206d70e5dd76dce/6a068/github-darkmode-sucks.jpg" alt="toggle" title="toggle" loading="lazy">
      </picture>
  </a>
    </span></p>
<p>This past week, GitHub <a href="https://twitter.com/github/status/1336362679506784256" target="_blank">released</a> a long-awaited feature — dark mode. Like many devs around the world, I was hype. In 2020, a dark mode toggle for anything remotely related to tech seems like a requirement.</p>
<p>So I flipped the switch. My immediate reaction was that it seemed a bit off. But I wanted to give it a chance and credited that feeling towards just not being used to the theme yet.</p>
<p>Flash forward a couple of days, I found myself switching to light mode for code review specifically. I didn’t feel confident code reviewing in dark mode. I was scared I would miss something. It was after a couple of instances of this did I realize, GitHub dark mode is <em>too</em> dark. And here’s why.</p>
<h2 id="the-proof-is-in-the-palette-pudding"><a href="#the-proof-is-in-the-palette-pudding" aria-label="the proof is in the palette pudding permalink"></a>The Proof is in the Palette (Pudding)</h2>
<h3 id="accessibility-and-contrast-ratio"><a href="#accessibility-and-contrast-ratio" aria-label="accessibility and contrast ratio permalink"></a>Accessibility and Contrast Ratio</h3>
<p>I explain contrast ratio in depth <a href="https://blog.karenying.com/posts/boost-visual-accessibility-by-auto-flipping-text-color#wcag-and-contrast-ratio" target="_blank">here</a> but this is what you need to know:</p>
<ul>
<li>The contrast ratio between two colors mathematically calculates how different our eyes perceive them to be</li>
<li>It ranges between <strong>1</strong> (two of the same colors) to <strong>21</strong> (black and white)</li>
<li>The smaller the text is, the larger the contrast ratio between the text color and the background color needs to be</li>
<li>The <a href="https://www.w3.org/WAI/standards-guidelines/wcag/" target="_blank">Web Content Accessibility Guidelines</a> (WCAG) defines a level <strong>AA</strong> contrast ratio as above <strong>4.5</strong> and level <strong>AAA</strong> as above <strong>7</strong> for small text</li>
<li><strong>AAA</strong> is considered the gold standard level for web accessibility</li>
</ul>
<h3 id="other-dark-mode-site-palettes"><a href="#other-dark-mode-site-palettes" aria-label="other dark mode site palettes permalink"></a>Other Dark Mode Site Palettes</h3>
<p><em>I did a deep dive into the dark mode palettes of Spotify, Twitter, Facebook and more in this <a href="https://blog.karenying.com/posts/50-shades-of-dark-mode-gray" target="_blank">post</a>.</em></p>
<p>I grabbed the dark mode colors of a couple of popular sites/apps. Every palette image shows the background color, primary text color, and secondary text color from left to right. <strong>I put the contrast ratios of the primary and secondary colors with the background color on top of the respective color.</strong></p>
<p><strong>Spotify</strong>:
<span>
      <a href="https://blog.karenying.com/static/f41785977c16229244c691d3ea4a2e08/cd7c1/spotify.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.karenying.com/static/f41785977c16229244c691d3ea4a2e08/8ac56/spotify.webp 240w,
https://blog.karenying.com/static/f41785977c16229244c691d3ea4a2e08/d3be9/spotify.webp 480w,
https://blog.karenying.com/static/f41785977c16229244c691d3ea4a2e08/e46b2/spotify.webp 960w,
https://blog.karenying.com/static/f41785977c16229244c691d3ea4a2e08/f992d/spotify.webp 1440w,
https://blog.karenying.com/static/f41785977c16229244c691d3ea4a2e08/0dd1a/spotify.webp 1547w" sizes="(max-width: 960px) 100vw, 960px" type="image/webp">
        <source srcset="https://blog.karenying.com/static/f41785977c16229244c691d3ea4a2e08/8ff5a/spotify.png 240w,
https://blog.karenying.com/static/f41785977c16229244c691d3ea4a2e08/e85cb/spotify.png 480w,
https://blog.karenying.com/static/f41785977c16229244c691d3ea4a2e08/d9199/spotify.png 960w,
https://blog.karenying.com/static/f41785977c16229244c691d3ea4a2e08/07a9c/spotify.png 1440w,
https://blog.karenying.com/static/f41785977c16229244c691d3ea4a2e08/cd7c1/spotify.png 1547w" sizes="(max-width: 960px) 100vw, 960px" type="image/png">
        <img src="https://blog.karenying.com/static/f41785977c16229244c691d3ea4a2e08/d9199/spotify.png" alt="spotify" title="spotify" loading="lazy">
      </picture>
  </a>
    </span></p>
<p><strong>Facebook</strong>:
<span>
      <a href="https://blog.karenying.com/static/ad8798f88b992514cc4c3731757290b2/dca52/facebook.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.karenying.com/static/ad8798f88b992514cc4c3731757290b2/8ac56/facebook.webp 240w,
https://blog.karenying.com/static/ad8798f88b992514cc4c3731757290b2/d3be9/facebook.webp 480w,
https://blog.karenying.com/static/ad8798f88b992514cc4c3731757290b2/e46b2/facebook.webp 960w,
https://blog.karenying.com/static/ad8798f88b992514cc4c3731757290b2/f992d/facebook.webp 1440w,
https://blog.karenying.com/static/ad8798f88b992514cc4c3731757290b2/eb054/facebook.webp 1550w" sizes="(max-width: 960px) 100vw, 960px" type="image/webp">
        <source srcset="https://blog.karenying.com/static/ad8798f88b992514cc4c3731757290b2/8ff5a/facebook.png 240w,
https://blog.karenying.com/static/ad8798f88b992514cc4c3731757290b2/e85cb/facebook.png 480w,
https://blog.karenying.com/static/ad8798f88b992514cc4c3731757290b2/d9199/facebook.png 960w,
https://blog.karenying.com/static/ad8798f88b992514cc4c3731757290b2/07a9c/facebook.png 1440w,
https://blog.karenying.com/static/ad8798f88b992514cc4c3731757290b2/dca52/facebook.png 1550w" sizes="(max-width: 960px) 100vw, 960px" type="image/png">
        <img src="https://blog.karenying.com/static/ad8798f88b992514cc4c3731757290b2/d9199/facebook.png" alt="facebook" title="facebook" loading="lazy">
      </picture>
  </a>
    </span></p>
<p><strong>YouTube</strong>:
<span>
      <a href="https://blog.karenying.com/static/fd8122a79767abe8f5819c42f7c9b391/acd79/youtube.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.karenying.com/static/fd8122a79767abe8f5819c42f7c9b391/8ac56/youtube.webp 240w,
https://blog.karenying.com/static/fd8122a79767abe8f5819c42f7c9b391/d3be9/youtube.webp 480w,
https://blog.karenying.com/static/fd8122a79767abe8f5819c42f7c9b391/e46b2/youtube.webp 960w,
https://blog.karenying.com/static/fd8122a79767abe8f5819c42f7c9b391/f992d/youtube.webp 1440w,
https://blog.karenying.com/static/fd8122a79767abe8f5819c42f7c9b391/bb338/youtube.webp 1543w" sizes="(max-width: 960px) 100vw, 960px" type="image/webp">
        <source srcset="https://blog.karenying.com/static/fd8122a79767abe8f5819c42f7c9b391/8ff5a/youtube.png 240w,
https://blog.karenying.com/static/fd8122a79767abe8f5819c42f7c9b391/e85cb/youtube.png 480w,
https://blog.karenying.com/static/fd8122a79767abe8f5819c42f7c9b391/d9199/youtube.png 960w,
https://blog.karenying.com/static/fd8122a79767abe8f5819c42f7c9b391/07a9c/youtube.png 1440w,
https://blog.karenying.com/static/fd8122a79767abe8f5819c42f7c9b391/acd79/youtube.png 1543w" sizes="(max-width: 960px) 100vw, 960px" type="image/png">
        <img src="https://blog.karenying.com/static/fd8122a79767abe8f5819c42f7c9b391/d9199/youtube.png" alt="youtube" title="youtube" loading="lazy">
      </picture>
  </a>
    </span></p>
<p>All of these satisfy the AAA standard of a contrast ratio of at least 7 👍🏼</p>
<p>And then we have GitHub’s new look…</p>
<p><strong>GitHub</strong>:
<span>
      <a href="https://blog.karenying.com/static/bf248615c0d8b1075b682c980b07202d/d3deb/github.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.karenying.com/static/bf248615c0d8b1075b682c980b07202d/8ac56/github.webp 240w,
https://blog.karenying.com/static/bf248615c0d8b1075b682c980b07202d/d3be9/github.webp 480w,
https://blog.karenying.com/static/bf248615c0d8b1075b682c980b07202d/e46b2/github.webp 960w,
https://blog.karenying.com/static/bf248615c0d8b1075b682c980b07202d/f992d/github.webp 1440w,
https://blog.karenying.com/static/bf248615c0d8b1075b682c980b07202d/383eb/github.webp 1758w" sizes="(max-width: 960px) 100vw, 960px" type="image/webp">
        <source srcset="https://blog.karenying.com/static/bf248615c0d8b1075b682c980b07202d/8ff5a/github.png 240w,
https://blog.karenying.com/static/bf248615c0d8b1075b682c980b07202d/e85cb/github.png 480w,
https://blog.karenying.com/static/bf248615c0d8b1075b682c980b07202d/d9199/github.png 960w,
https://blog.karenying.com/static/bf248615c0d8b1075b682c980b07202d/07a9c/github.png 1440w,
https://blog.karenying.com/static/bf248615c0d8b1075b682c980b07202d/d3deb/github.png 1758w" sizes="(max-width: 960px) 100vw, 960px" type="image/png">
        <img src="https://blog.karenying.com/static/bf248615c0d8b1075b682c980b07202d/d9199/github.png" alt="github" title="github" loading="lazy">
      </picture>
  </a>
    </span></p>
<p>Not only do the colors look noticeably darker than their counterparts in other apps, <strong>the secondary text color fails AAA standards</strong>! It’s important for the secondary text color to have high contrast because of how small the font is. I knew my eyes didn’t deceive me.</p>
<p><strong>While contrast ratios aren’t <a href="https://www.bounteous.com/insights/2019/03/22/orange-you-accessible-mini-case-study-color-ratio/" target="_blank">everything</a>, they are a simple way to quantify the difference between two colors.</strong> In this case, it’s clear that GitHub’s dark mode colors <em>are</em> darker. This can make it harder to read text.</p>
<h3 id="code-review-palette"><a href="#code-review-palette" aria-label="code review palette permalink"></a>Code Review Palette</h3>
<p>Finally, my main gripe with GitHub dark mode is that the red / green for code diffs looks super off to me.</p>
<p>On the right is the light mode colors and left is the new shades. I overlaid the respective background colors on top:</p>
<p><span>
      <a href="https://blog.karenying.com/static/8746d6d25da3c72d11a920e17b5ad110/c95f0/diff.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.karenying.com/static/8746d6d25da3c72d11a920e17b5ad110/8ac56/diff.webp 240w,
https://blog.karenying.com/static/8746d6d25da3c72d11a920e17b5ad110/d3be9/diff.webp 480w,
https://blog.karenying.com/static/8746d6d25da3c72d11a920e17b5ad110/e46b2/diff.webp 960w,
https://blog.karenying.com/static/8746d6d25da3c72d11a920e17b5ad110/f992d/diff.webp 1440w,
https://blog.karenying.com/static/8746d6d25da3c72d11a920e17b5ad110/2ac07/diff.webp 1842w" sizes="(max-width: 960px) 100vw, 960px" type="image/webp">
        <source srcset="https://blog.karenying.com/static/8746d6d25da3c72d11a920e17b5ad110/8ff5a/diff.png 240w,
https://blog.karenying.com/static/8746d6d25da3c72d11a920e17b5ad110/e85cb/diff.png 480w,
https://blog.karenying.com/static/8746d6d25da3c72d11a920e17b5ad110/d9199/diff.png 960w,
https://blog.karenying.com/static/8746d6d25da3c72d11a920e17b5ad110/07a9c/diff.png 1440w,
https://blog.karenying.com/static/8746d6d25da3c72d11a920e17b5ad110/c95f0/diff.png 1842w" sizes="(max-width: 960px) 100vw, 960px" type="image/png">
        <img src="https://blog.karenying.com/static/8746d6d25da3c72d11a920e17b5ad110/d9199/diff.png" alt="diff colors" title="diff colors" loading="lazy">
      </picture>
  </a>
    </span></p>
<p>I did calculate the contrast ratios of both palettes and they were pretty similar (close to 1 lol). However, for some reason the lighter one is easier for me to parse at a cursory glance. Maybe I’m not used to it yet, but I really dislike how dark the new diff colors are. For something as important as code review, I’m using GitHub light mode.</p>
<p>I also investigated <strong>VSCode’s Git integration</strong> diff colors (which I enjoy!):</p>
<p><span><span>
      <a href="https://blog.karenying.com/static/8dc099fd4d8ccf05421bcfe28ae70892/dc61a/vscode-diff.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.karenying.com/static/8dc099fd4d8ccf05421bcfe28ae70892/8ac56/vscode-diff.webp 240w,
https://blog.karenying.com/static/8dc099fd4d8ccf05421bcfe28ae70892/d3be9/vscode-diff.webp 480w,
https://blog.karenying.com/static/8dc099fd4d8ccf05421bcfe28ae70892/e46b2/vscode-diff.webp 960w,
https://blog.karenying.com/static/8dc099fd4d8ccf05421bcfe28ae70892/f8f9f/vscode-diff.webp 1147w" sizes="(max-width: 960px) 100vw, 960px" type="image/webp">
        <source srcset="https://blog.karenying.com/static/8dc099fd4d8ccf05421bcfe28ae70892/8ff5a/vscode-diff.png 240w,
https://blog.karenying.com/static/8dc099fd4d8ccf05421bcfe28ae70892/e85cb/vscode-diff.png 480w,
https://blog.karenying.com/static/8dc099fd4d8ccf05421bcfe28ae70892/d9199/vscode-diff.png 960w,
https://blog.karenying.com/static/8dc099fd4d8ccf05421bcfe28ae70892/dc61a/vscode-diff.png 1147w" sizes="(max-width: 960px) 100vw, 960px" type="image/png">
        <img src="https://blog.karenying.com/static/8dc099fd4d8ccf05421bcfe28ae70892/d9199/vscode-diff.png" alt="vscode diff colors" title="vscode diff colors" loading="lazy">
      </picture>
  </a>
    </span></span></p>
<p>IMO these shades work well even on a darker background and don’t hinder code review.</p>
<h2 id="conclusion"><a href="#conclusion" aria-label="conclusion permalink"></a>Conclusion</h2>
<p>While there is no color theory justification that GitHub’s new code diff palette is worse, its text colors are not as WCAG accessible as other dark mode apps we use daily.</p>
<p>Maybe if GitHub put as much effort into researching their dark mode palette as they did into the <a href="https://twitter.com/github/status/1336362679506784256" target="_blank">promo video</a> they released, we wouldn’t be here. This is still a beta feature so I have hope. <strong>GitHub, please give us the dark mode experience we deserve 🥺</strong></p>
<p><em>Thanks for reading. Happy hacking!</em></p></div></div>]]>
            </description>
            <link>https://blog.karenying.com/posts/github-darkmode-sucks</link>
            <guid isPermaLink="false">hacker-news-small-sites-25400139</guid>
            <pubDate>Sat, 12 Dec 2020 18:03:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I've designed Python fantasy cards to learn it easier]]>
            </title>
            <description>
<![CDATA[
Score 72 | Comments 37 (<a href="https://news.ycombinator.com/item?id=25400117">thread link</a>) | @tomaszs
<br/>
December 12, 2020 | https://summonthejson.com/products/summon-the-json-python-deck | <a href="https://web.archive.org/web/*/https://summonthejson.com/products/summon-the-json-python-deck">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p data-mce-style="text-align: left;">If you are learning to code, it is often hard to discover and memorize all programming functions. STJ&nbsp;Python flashcards make it super easy. It combines state of art memory techniques to help you remember functions fast.</p>
<p data-mce-style="text-align: left;"><strong>The science behind STJ:&nbsp;Python</strong></p>
<div data-mce-style="text-align: left;"><p>According to research, images help stick the information in the long term memory, transmit messages faster, improve comprehension, trigger emotions, motivate learners. In fact, 90% of information transmitted to the brain is visual (<a href="https://www.shiftelearning.com/blog/bid/350326/studies-confirm-the-power-of-visuals-in-elearning">source</a>). That is why STJ: Python intriguing and beautiful illustrations can help you memorize faster. Side-by-side with the fantasy setting and funny descriptions STJ:&nbsp;Python cards are a great combo to help boost your memory! They are eye-catching but also cause emotions - the cornerstone of fast memorization (<a href="https://www.memory-key.com/memory/emotion">source</a>).</p><p>Dive into a fantasy world of Summon The JSON, where excellent visual design, creatures, and fun descriptions will help you remember&nbsp;Python function automagically.</p></div>
<p data-mce-style="text-align: left;"><img alt="" src="https://cdn.shopify.com/s/files/1/0448/5260/9188/files/IMG20201117083121_1024x1024.jpg?v=1606044111"></p>
<p data-mce-style="text-align: left;">STJ:&nbsp;Python is an excellent choice if you:</p>
<p data-mce-style="text-align: left;"><strong>Want to become a programmer</strong></p>
<div data-mce-style="text-align: left;"><p>Flashcards contain the most useful set of&nbsp;Python functions programmers use most of the time. STJ:&nbsp;Python will give you a great overview of what tools every programmer has at hand. With that knowledge, it will be easier for you to start thinking about how to create your application from these building blocks.</p><p><strong>Go to a coding job interview</strong></p></div>
<p data-mce-style="text-align: left;">A lot of companies use knowledge tests and whiteboard tasks to assess coding job candidate knowledge. STJ:&nbsp;Python helps you remember functions easier. Regular flashcards are boring and make it hard to stick programming functions to anything meaningful.&nbsp; Contrary STJ:&nbsp;Python helps your brain store information about&nbsp;Python functions in an efficient way.&nbsp; It increases the chance, that during a job interview your brain will be able to give you all information you need.<br></p>
<p data-mce-style="text-align: left;"><img alt="" src="https://cdn.shopify.com/s/files/1/0448/5260/9188/files/IMG20201117083241_8b6c81c4-e7f9-4e0a-b7aa-b22ca2d539a8_1024x1024.jpg?v=1606044472"></p>
<p data-mce-style="text-align: left;"><strong>Switch from another language to&nbsp;Python</strong></p>
<p data-mce-style="text-align: left;">If you are already a software developer, you know how confusing it is to switch to learn another language. Some functions are similar. Some are not. It gets even worse when you code in 2 or 3 languages at the same time. There is a lot of things to remember in every language. You need to find equivalents. STJ:&nbsp;Python will help you progress faster in learning Python. It shows you the toolset of the language and helps you remember it faster. Also, if you come back to Python, you can also take a look at cards, to recalibrate your brain easier.</p>
<p data-mce-style="text-align: left;"><img alt="" src="https://cdn.shopify.com/s/files/1/0448/5260/9188/files/IMG20201117082424_1024x1024.jpg?v=1606044528"></p>
<p data-mce-style="text-align: left;"><strong>Write faster without searching online</strong><br></p>
<p data-mce-style="text-align: left;">It is great, we have a lot of easily accessible sources on the Internet, we can find all information within seconds or minutes. But the Internet will never beat the human brain speed. If you remember function names, you will code faster. Moreover, your coding experience will become more fulfilling. You won't worry about connection lags, that the search engine does not give the answer you are looking for. You won't be distracted by websites and online ads. Focus is one of the most important assets of a programmer. STJ:&nbsp;Python will help you be more focused in the zone!</p>
<p data-mce-style="text-align: left;"><img src="https://cdn.shopify.com/s/files/1/0448/5260/9188/files/IMG20201117082538_1024x1024.jpg?v=1606044208" alt=""></p>

<div data-mce-style="text-align: left;"><p>Summon The JSON:&nbsp;Python is not only a flashcard deck. It is also a game for everyone. Up to four people can play a game with STJ: Python. The deck is divided into heroes, animals, and food.&nbsp; Some cards have points, some have super-powers. You can combine them to win battles against other players.</p><p>STJ:&nbsp;Python game can be played by everyone. You don't need to have any prior programming knowledge to do so. In fact, it is a great way to spend time in a mixed group of geeks and non-geeks. You can play it with your family, friends, colleagues, or even meet new people</p></div>
<p data-mce-style="text-align: left;">STJ:&nbsp;Python game is a great ice-breaker, conversation starter, and a way to spend time with other people, chat, and bond. Have a great time together.</p>
<p data-mce-style="text-align: left;"><img src="https://cdn.shopify.com/s/files/1/0448/5260/9188/files/IMG20201117082016_1024x1024.jpg?v=1606044238" alt=""></p>
<h2 data-mce-style="text-align: left;">What is inside?</h2>
<p data-mce-style="text-align: left;">One deck contains:</p>
<ul>
<li data-mce-style="text-align: left;">A complete deck of 65-cards with several custom cards (make your own cards)</li>
<li data-mce-style="text-align: left;">8-page long booklet instruction with 2 memorization modes and game instruction</li>
</ul>
<p data-mce-style="text-align: left;">Cards are premium quality with linen texture and durable UV coating. The learning game takes approx 3 minutes. Each game takes about 15 minutes and can be repeated indefinitely.&nbsp;</p>
<p data-mce-style="text-align: left;"><img src="https://cdn.shopify.com/s/files/1/0448/5260/9188/files/IMG20201117082811_1024x1024.jpg?v=1606044272" alt=""></p>
</div></div>]]>
            </description>
            <link>https://summonthejson.com/products/summon-the-json-python-deck</link>
            <guid isPermaLink="false">hacker-news-small-sites-25400117</guid>
            <pubDate>Sat, 12 Dec 2020 18:00:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Buy Don't Build]]>
            </title>
            <description>
<![CDATA[
Score 216 | Comments 212 (<a href="https://news.ycombinator.com/item?id=25399250">thread link</a>) | @jrott
<br/>
December 12, 2020 | https://jrott.com/posts/why-buy/ | <a href="https://web.archive.org/web/*/https://jrott.com/posts/why-buy/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
				

<p>Standing up and managing a service or building a custom service is a common desire for engineers. It’s usually a major mistake, that ends up costing a ton of time and money.
The desire to build custom versions of everything seems to come from a few places:</p>

<ol>
<li>The hope that it will be cheaper to build than buy.</li>
<li>The idea that their companies process is special so industry-standard stuff will not work.</li>
<li>That they need to have total control over what the service does.</li>
<li>To avoid vendor lock-in</li>
</ol>

<p>All four of those things are less true and less important than you would think. It’s worth building when something is core to your business or provides a significant competitive advantage. Otherwise, it’s probably worth using the services that your cloud provider has or another saas. Running your own stuff has a significant operational burden and a large opportunity cost.
If you only get one thing out of this let it be: Building stuff is fun, but being paged at two in the morning about a Rube Goldberg contraption of a system to handle customer analytics isn’t.</p>

<h2 id="p-align-center-running-services-isn-t-easy-p"><p> Running services isn’t easy </p></h2>

<p>Keeping systems up in production takes time and energy. Building them isn’t where most of the expense lies. Instead, that comes with running and maintaining complicated systems.
Most enterprise systems require an engineering team to keep them running. Engineers aren’t cheap to hire and there is also additional complexity that gets introduced to keep a large number of teams coordinated. This all results in slower decision making.</p>

<p>Slower decisions happen because more teams are needed to maintain more services. These teams then need to work together and coordinate. All of a sudden, to make a change there are a million teams that need to be informed and handoffs that have to be managed. That can lead to fiefdoms for managers and way more politics, since there are now more teams and a more complicated organizational structure.</p>

<p>If you are following a DevOps model, the team that builds the service will also end up maintaining it. The more moving pieces that there are for the team to maintain, the less time that they will have for new feature development. This is painful, especially in young companies with a rapidly evolving product. Slowing down the time it takes to find product-market fit in exchange for getting to run your own stuff is a bad trade.</p>

<p>You also have to consider the level of operational excellence that exists in your organization. To put it bluntly, who do you trust more for uptime - Amazon or you? The answer, for services which you absolutely depend on for survival, might be you. Other systems though may suffer from getting less time and attention, because it becomes harder to justify the expense of keeping them up and running.</p>

<h2 id="p-align-center-vendor-lock-in-p"><p> Vendor lock-in </p></h2>

<p>At this point, you might be thinking “But I don’t want to be stuck on a vendor’s special snowflake of a system”. My counter-argument to that is there is also lock-in with internal systems. The most common version of this is The Keeper of The Spreadsheet. Now, if you’re going “what spreadsheet?”, well that’s a fair question. But it’s the one that for some important internal process that has turned into The Keeper of The Spreadsheet’s job. Most large companies have at least one spreadsheet like this. If you work at a large company, you probably realize that is a gross understatement - there can be many.</p>

<p>The Keeper(s) of The Spreadsheet will defend their process, and not want to change it at all costs, because they are worried that they’ll get fired if that process gets automated or is no longer necessary. You also see this with engineering teams, where they become the Keepers of A Database or ticketing system. All of a sudden you’ve got a system that sucks, and nobody wants to advocate for getting rid of it because their co-worker is convinced that they’ll lose their job if it happens. This also creates a political trap for the unwary when they try and fix that process.</p>

<p>Being The Keeper of The Ticketing System isn’t all that fun usually either. It’s a good way to get pigeonholed into boring work. It also means that you end up with a system that isn’t the most important thing to the business, instead of allowing an outside company to take it. That outside company is likely to specialize in solving that problem, and has built deeper expertise because of that. Unless of course you’re slightly evil and looking for awful projects to exile people to.</p>

<p>All of this makes being locked into a vendor less of a concern than most people think. There is lock-in no matter what you do. The thing that you want to avoid is giving wholesale pricing power to any vendor. This can be avoided by making sure that the key differentiators for your business are in-house.</p>

<h2 id="p-align-center-engineering-time-is-expensive-p"><p> Engineering time is expensive </p></h2>

<p>Software and systems engineers aren’t cheap to hire. As a group, we also tend to undervalue our time. Think about how often you hear “Oh I could build that in a week”, or “That’ll be easy”. With luck that’s just a comment on Reddit or hacker news, but if it’s at work then it usually turns into a total slog.</p>

<p>It’s common to express the cost of owning or maintaining a service in terms of the total cost of ownership (TCO). This is often really hard to calculate since many of the things that go into TCO aren’t tracked. The major issue that you’ll run into is that it’s not just the cost of the engineer. The metric we care about is the opportunity cost of the other things that engineers could be producing.</p>

<p>Another reason that will come up for building something custom is for unique company processes. Usually with the idea that you couldn’t customize the software to make it work, or that it’d cost more than just building it. While these can be  valid reasons to build, it’s true less often than you would think. Many processes are shared across a large number of businesses. Also, processes tend to get bloated over time. Large amounts of the custom work that is needed to match up with a business’s processes are stuff that could just not be done. For an absurd example, that happened at a company I worked with:
1. Our process for recommending articles is complicated and requires tons of joins on fuzzy data
2. We can build our own database system that is designed specially to handle this.
3. A few months of intense development go by.
4. It turns out operating this thing is hard, we don’t know why some queries take the system down, and why our customers complaining about the recommendations.</p>

<p>You really don’t want that to be you. It’s demoralizing to have built and maintained a product for something that doesn’t even work correctly. When things are getting so complicated that no existing tooling will work for it, you should be asking if all of the complexity is fundamental to the domain or if the model you are using is flawed.</p>

<h2 id="p-align-center-loss-of-focus-p"><p> Loss of focus </p></h2>

<p>A significant problem that comes from running your own version of a service is that it’s another thing that engineers have to pay attention to. There is a limit on how many things can be important. What then happens to all of the non-core services that you are running is usually some form of neglect, where they are kept in a barely good enough state.</p>

<p>The problem then with that is everyone who is working on those services is usually trying to get off of them. After all, no one wants to work on something that their boss doesn’t care about. So you end up with a ton of maneuvering since people are trying to change teams, and that increases drag.</p>

<p>Compounding this problem even further is that not revenue-generating things are frequently ignored. Yes, your CI/CD system is absolutely critical, but it’s easy for executives to not think about. This leads to a failure mode where you have a lost garden of internal tools. Whereas if you are paying someone money to do the same thing, it is their business so they keep working on it.</p>

<h2 id="p-align-center-opportunity-cost-p"><p> Opportunity cost </p></h2>

<p>In many ways, the biggest problem with building a service is opportunity cost. The reason isn’t salary but instead what else could be done. It’s basically the same problem that you see when a company is building a one-off feature to close a sale. The big difference is that engineering is doing it to themselves so there may be willful blindness to the damage being done.</p>

<p>Engineers like building things, and many like to be in control of all the buttons and knobs. Many times this is a good thing. After all, it’s how anything super cool actually gets built. The problem with it arises when that impulse exists, without a keen sense of the business effects of decisions that are made.</p>

<p>The question you should be asking is what else could be done instead of tuning your own stuff or building a new internal system. The answer is usually spending more time coming up with the correct architecture,or developing actual customer-facing features, instead of fighting fires .</p>

<p>Having large operational footprints usually results in reduced velocity and fewer changes happening per engineer. Think about the difference in speed between big companies and startups. This isn’t because startups hire smarter people, instead it’s the amount of stuff that is tied up with any change at a big company.</p>

<p>This is an area where engineering can’t just think about the software that is being built. Instead, you have to think of the health of the entire product. It’s about building stuff that is useful for the customer and letting go of things that aren’t critical. By keeping a tight focus on core projects things are built faster. There is also less craft and maintenance work that goes along with the product.</p>

<h2 id="p-align-center-summing-up-p"><p> Summing up </p></h2>

<p>None of these reasons might apply in your case. There are many good reasons to build. However, if you haven’t considered whether you can just buy something to solve a problem instead of building it yourself, you should.</p>

<p>Think about if it’s worth as being paged at 2 in the morning over. If you are willing to be paged over it, also consider if someone else can …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://jrott.com/posts/why-buy/">https://jrott.com/posts/why-buy/</a></em></p>]]>
            </description>
            <link>https://jrott.com/posts/why-buy/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25399250</guid>
            <pubDate>Sat, 12 Dec 2020 16:22:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Semgrep for Cloud Security]]>
            </title>
            <description>
<![CDATA[
Score 60 | Comments 5 (<a href="https://news.ycombinator.com/item?id=25398963">thread link</a>) | @okram87
<br/>
December 12, 2020 | https://www.marcolancini.it/2020/blog-semgrep-for-cloud-security/ | <a href="https://web.archive.org/web/*/https://www.marcolancini.it/2020/blog-semgrep-for-cloud-security/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<ul id="markdown-toc">
<li><a href="#what-is-semgrep" id="markdown-toc-what-is-semgrep">What is Semgrep?</a></li>
<li><a href="#semgrep-for-infrastructure-as-code" id="markdown-toc-semgrep-for-infrastructure-as-code">Semgrep for Infrastructure as Code</a> <ul>
<li><a href="#terraform" id="markdown-toc-terraform">Terraform</a> <ul>
<li><a href="#unencrypted-ebs-volumes" id="markdown-toc-unencrypted-ebs-volumes">Unencrypted EBS Volumes</a></li>
<li><a href="#open-security-groups" id="markdown-toc-open-security-groups">Open Security Groups</a></li>
</ul>
</li>
<li><a href="#kubernetes" id="markdown-toc-kubernetes">Kubernetes</a></li>
</ul>
</li>
<li><a href="#conclusions" id="markdown-toc-conclusions">Conclusions</a></li>
</ul>
<p><a href="https://semgrep.dev/" target="_blank">Semgrep</a> is an emerging
static analysis tool which is getting traction within the AppSec
community. Its broad support to multiple programming languages, together with
the easiness with which is possible to create rules, makes it a
powerful tool that can help AppSec teams scaling their efforts into preventing
complete classes of vulnerabilities from their codebases.</p>
<p>But what about cloud security? In the era of Infrastructure as Code,
where tools like Terraform, CloudFormation, Pulumi (and many others) are used
to provision infrastructure from (de-facto) source code, can we apply the
same approach to eradicate classes of cloud-related vulnerabilities from a
codebase?</p>

<p>I decided to spend part of my weekend experimenting with this,
and to get an idea of what Semgrep can provide to cloud/platform security teams.</p>

<p>Before jumping into the details, it is worth explaining what Semgrep
actually is.
As per their <a href="https://github.com/returntocorp/semgrep" target="_blank">website</a>, Semgrep is:</p>
<blockquote>
<p>A fast, open-source, static analysis tool that excels at expressing code standards — without complicated queries — and surfacing bugs early at editor, commit, and CI time.</p>
<p>Precise rules look like the code you’re searching; no more traversing abstract syntax trees or wrestling with regexes.</p>
<p>The Semgrep Registry has 1,000+ rules written by the Semgrep community covering security, correctness, and performance bugs. No need to DIY unless you want to.</p>
</blockquote>
<p>At a high level, Semgrep leverages Abstract Syntax Trees (ASTs)
to build a model of the code you are analyzing. Unlike other tools based on ASTs,
though, Semgrep lowers the entry bar by abstracting away the AST syntax itself.</p>
<figure>
<a href="https://www.marcolancini.it/images/posts/blog_semgrep_cloud_ast.jpg">
<img src="https://www.marcolancini.it/images/posts/blog_semgrep_cloud_ast.jpg" alt="Code as ASTs">
</a>
<figcaption>Code as ASTs. Image courtesy of <a href="https://docs.google.com/presentation/d/1j9uqQsMlePEuSzOD6E4Th2IYY4Hi7dl5XYbHdSDMkrc/edit#slide=id.g787344da8e_0_1645" target="_blank">Clint Gibler</a>.</figcaption>
</figure>
<p>Out of the box, Semgrep supports mainstream programming languages
(e.g., Go, Java, Python, Ruby, Javascript, etc.) and has a library of
<a href="https://github.com/returntocorp/semgrep-rules" target="_blank">open source rules</a>
ready to be re-used.</p>
<p>Explaining how to use Semgrep is out of scope for this blog post,
but the <a href="https://semgrep.dev/docs/" target="_blank">official documentation</a>
is really well made, and the
<a href="https://semgrep.dev/editor" target="_blank">online playground</a>
is an excellent space where to start playing with it
(without having to spend time installing anything).</p>
<hr>

<p>As briefly mentioned earlier, the benefit that Semgrep can bring to AppSec teams
is obvious (and if you are still not convinced, I recommend you to watch this
<a href="https://docs.google.com/presentation/d/1j9uqQsMlePEuSzOD6E4Th2IYY4Hi7dl5XYbHdSDMkrc/" target="_blank">this presentation</a> from <a href="https://twitter.com/clintgibler/" target="_blank">Clint Gibler</a>).</p>
<p>What I was curious to try was how well the same approach could fit a codebase
made of Terraform (HCL) and YAML files, as those languages are not currently
supported by Semgrep. Hence, I relied on its <code>Generic Pattern Matching</code> engine.</p>
<h2 id="terraform">Terraform</h2>
<p>The official <a href="https://github.com/returntocorp/semgrep-rules/tree/develop/terraform/lang/security" target="_blank">semgrep-rules</a> repository already contains a folder dedicated to Terraform.</p>
<figure>
<a href="https://www.marcolancini.it/images/posts/blog_semgrep_cloud_terraform_rules.jpg">
<img src="https://www.marcolancini.it/images/posts/blog_semgrep_cloud_terraform_rules.jpg" alt="Open source Terraform rules">
</a>
<figcaption>Open source Terraform rules.</figcaption>
</figure>
<p>Within this folder, we can see 7 rules already made open source, mainly focusing
on <a href="https://github.com/bridgecrewio/terragoat" target="_blank">Terragoat</a>
scenarios and S3 buckets.</p>
<h3 id="unencrypted-ebs-volumes">Unencrypted EBS Volumes</h3>
<p>Let’s start wrapping our head around it by picking the <code>unencrypted-ebs-volume</code> rule.
In the repo we can see a sample <a href="https://github.com/returntocorp/semgrep-rules/blob/develop/terraform/lang/security/ebs-unencrypted-volume.tf" target="_blank">Terraform file</a> (shown here below):</p>
<figure><pre><code data-lang="terraform"><span>resource</span> <span>"aws_ebs_volume"</span> <span>"web_host_storage"</span> <span>{</span>
  <span>availability_zone</span> <span>=</span> <span>"ap-southeast-2"</span>
  <span>encrypted</span>         <span>=</span> <span>false</span>
  <span>size</span> <span>=</span> <span>1</span>
  <span># ruleid: unencrypted-ebs-volume</span>
  <span>tags</span> <span>=</span> <span>{</span>
    <span>Name</span> <span>=</span> <span>"abcd-ebs"</span>
  <span>}</span>
<span>}</span></code></pre></figure>
<p>Quite straightforward, with an <code>aws_ebs_volume</code> resource declaring an EBS volume
with encryption disabled (as it can bee seen from <code>encrypted = false</code>).</p>
<p>So what we want to <code>grep</code> here is for an occurrence of <code>encrypted = false</code>
(or the lack of <code>encrypted = true</code>), as shown in the
<a href="https://github.com/returntocorp/semgrep-rules/blob/develop/terraform/lang/security/ebs-unencrypted-volume.yaml" target="_blank">corresponding rule</a>:</p>
<figure><pre><code data-lang="yaml"><span>rules</span><span>:</span>
<span>-</span> <span>id</span><span>:</span> <span>unencrypted-ebs-volume</span>
  <span>patterns</span><span>:</span>
    <span>-</span> <span>pattern-either</span><span>:</span>
      <span>-</span> <span>pattern</span><span>:</span> <span>|</span>
          <span>{...}</span>
    <span>-</span> <span>pattern-not-inside</span><span>:</span> <span>|</span>
        <span>resource "aws_ebs_volume" "..." {... encrypted=true ...}</span>
    <span>-</span> <span>pattern-inside</span><span>:</span> <span>|</span>
        <span>resource "aws_ebs_volume" "..." {...}</span>
  <span>languages</span><span>:</span>
    <span>-</span> <span>generic</span>
  <span>paths</span><span>:</span>
    <span>include</span><span>:</span>
    <span>-</span> <span>'</span><span>*.tf'</span>
  <span>message</span><span>:</span> <span>|</span>
    <span>An EBS volume is configured without encryption enabled.</span>
  <span>severity</span><span>:</span> <span>WARNING</span></code></pre></figure>
<p>You can try this rule in the Semgrep playground:
<a href="https://semgrep.dev/s/ZWrA/" target="_blank">https://semgrep.dev/s/ZWrA/</a>.</p>
<h3 id="open-security-groups">Open Security Groups</h3>
<p>As a second test, I wanted to create my first Semgrep rule to detect
a Security Group open to the world (<code>0.0.0.0/0</code>), like the one below:</p>
<figure><pre><code data-lang="terraform"><span>resource</span> <span>"aws_security_group"</span> <span>"allow_tls"</span> <span>{</span>
  <span>name</span>        <span>=</span> <span>"allow_tls"</span>
  <span>description</span> <span>=</span> <span>"Allow TLS inbound traffic"</span>
  <span>vpc_id</span>      <span>=</span> <span>aws_vpc</span><span>.</span><span>main</span><span>.</span><span>id</span>

  <span>ingress</span> <span>{</span>
    <span>description</span> <span>=</span> <span>"TLS from VPC"</span>
    <span>from_port</span>   <span>=</span> <span>443</span>
    <span>to_port</span>     <span>=</span> <span>443</span>
    <span>protocol</span>    <span>=</span> <span>"tcp"</span>
    <span>cidr_blocks</span> <span>=</span> <span>[</span><span>"10.0.1.0/24"</span><span>,</span> <span>"0.0.0.0/0"</span><span>]</span>
  <span>}</span>

  <span>tags</span> <span>=</span> <span>{</span>
    <span>Name</span> <span>=</span> <span>"allow_tls"</span>
  <span>}</span>
<span>}</span></code></pre></figure>
<p>What we want to <code>grep</code> here is any occurrence of <code>0.0.0.0/0</code> within an <code>ingress</code> block:</p>
<figure><pre><code data-lang="yaml"><span>rules</span><span>:</span>
<span>-</span> <span>id</span><span>:</span> <span>open-security-group</span>
  <span>patterns</span><span>:</span>
    <span>-</span> <span>pattern-inside</span><span>:</span> <span>ingress { ... }</span>
    <span>-</span> <span>pattern</span><span>:</span> <span>"</span><span>0.0.0.0/0"</span>
  <span>languages</span><span>:</span>
    <span>-</span> <span>generic</span>
  <span>paths</span><span>:</span>
    <span>include</span><span>:</span>
    <span>-</span> <span>'</span><span>*.tf'</span>
  <span>message</span><span>:</span> <span>|</span>
    <span>A security group is allowing inbound traffic from the public internet (0.0.0.0/0).</span>
  <span>severity</span><span>:</span> <span>WARNING</span></code></pre></figure>
<figure>
<a href="https://www.marcolancini.it/images/posts/blog_semgrep_cloud_rule_sg.jpg">
<img src="https://www.marcolancini.it/images/posts/blog_semgrep_cloud_rule_sg.jpg" alt="open-security-group rule">
</a>
<figcaption>open-security-group rule.</figcaption>
</figure>
<p>You can try this rule in the Semgrep playground:
<a href="https://semgrep.dev/s/ne51/" target="_blank">https://semgrep.dev/s/ne51/</a>.</p>
<p>Of course this is a very basic case, where the offending string (<code>0.0.0.0/0</code>)
is directly hardcoded within the security group definition. The rule
will have to be extended if we want to take into account cases where
the CIDR can be specified, for example, via variables.</p>
<h2 id="kubernetes">Kubernetes</h2>
<p>Next, I wanted to create a rule more focused on Kubernetes (or, more precisely, YAML files).</p>
<p>Let’s take as a sample the case where you might want to enforce all your
Kubernetes Ingresses to be private, removing all the <code>public</code> ones:</p>
<figure><pre><code data-lang="yaml"><span>apiVersion</span><span>:</span> <span>extensions/v1beta1</span>
<span>kind</span><span>:</span> <span>Ingress</span>
<span>metadata</span><span>:</span>
  <span>name</span><span>:</span> <span>test-ingress</span>
  <span>annotations</span><span>:</span>
    <span>kubernetes.io/ingress.class</span><span>:</span> <span>public</span>
<span>spec</span><span>:</span>
  <span>rules</span><span>:</span>
  <span>-</span> <span>http</span><span>:</span>
      <span>paths</span><span>:</span>
      <span>-</span> <span>path</span><span>:</span> <span>/testpath</span>
        <span>pathType</span><span>:</span> <span>Prefix</span>
        <span>backend</span><span>:</span>
          <span>service</span><span>:</span>
            <span>name</span><span>:</span> <span>test</span>
            <span>port</span><span>:</span>
              <span>number</span><span>:</span> <span>80</span></code></pre></figure>
<p>In this example, we want to <code>grep</code> for the <code>kubernetes.io/ingress.class</code>
annotation, and ensure it has the approved value of <code>nginx-internal</code>:</p>
<figure><pre><code data-lang="yaml"><span>rules</span><span>:</span>
<span>-</span> <span>id</span><span>:</span> <span>public-ingress</span>
  <span>patterns</span><span>:</span>
    <span>-</span> <span>pattern</span><span>:</span> <span>kubernetes.io/ingress.class</span>
    <span>-</span> <span>pattern-not-inside</span><span>:</span> <span>|</span>
        <span>kubernetes.io/ingress.class: nginx-internal</span>
  <span>languages</span><span>:</span>
    <span>-</span> <span>generic</span>
  <span>paths</span><span>:</span>
    <span>include</span><span>:</span>
    <span>-</span> <span>'</span><span>*.yaml'</span>
  <span>message</span><span>:</span> <span>|</span>
    <span>An Ingress has been made public.</span>
  <span>severity</span><span>:</span> <span>WARNING</span></code></pre></figure>
<p>You can try this rule in the Semgrep playground:
<a href="https://semgrep.dev/s/ErGE/" target="_blank">https://semgrep.dev/s/ErGE/</a>.</p>
<hr>

<p>I have to say the extensibility, and simple syntax, of Semgrep are making it
very promising for cloud security teams as well.
In a few hours, thanks to the official documentation and Playground, I was able
to go from absolute 0 to writing my first rules.</p>
<p>The main challenge I can think of at the moment is: how much does Semgrep
overlap with <a href="https://github.com/open-policy-agent/conftest" target="_blank">OPA Conftest</a>?
Although Conftest has been created with cloud resources in mind,
and benefits from the sinergies
with the rest of the OPA offering (like <a href="https://github.com/open-policy-agent/gatekeeper" target="_blank">Gatekeeper</a>), basically everyone in the
industry at some point complained about how cumbersome the <a href="https://www.openpolicyagent.org/docs/latest/policy-language/" target="_blank">Rego</a> language is.
In my opinion, this could be a defining factor that might help expand the adotpion
of Semgrep from platform teams.</p>
<p>I’m quite curious to hear other people’s opinions on this, so please
feel free to reach out to me on <a href="https://twitter.com/lancinimarco" target="_blank">Twitter</a>.</p>
</div></div>]]>
            </description>
            <link>https://www.marcolancini.it/2020/blog-semgrep-for-cloud-security/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25398963</guid>
            <pubDate>Sat, 12 Dec 2020 15:51:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Optimizing Lambda Cost with Multi-Threading]]>
            </title>
            <description>
<![CDATA[
Score 59 | Comments 4 (<a href="https://news.ycombinator.com/item?id=25398091">thread link</a>) | @kiyanwang
<br/>
December 12, 2020 | https://www.sentiatechblog.com/aws-re-invent-2020-day-3-optimizing-lambda-cost-with-multi-threading | <a href="https://web.archive.org/web/*/https://www.sentiatechblog.com/aws-re-invent-2020-day-3-optimizing-lambda-cost-with-multi-threading">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><!--## AWS re:Invent 2020 Day 3: Optimizing Lambda Cost with Multi-Threading-->
<p>Amazon has released support for up to 10 GB memory and 6 vCPUs for your Lambda functions. In this article we will explore how these new memory configuration options can drive down costs and execution times for compatible workloads.</p>
<p>Let’s quickly review the Lambda pricing scheme. We’ll ignore the free tier. Lambda is billed at $0.0000166667 for every GB-second. A GB-second is the unit of measurement for 1 GB of memory running for 1 second. Lambdas are often very short lived, so let’s say a particular function has an average execution time of 100ms, and is executed 100 times every minute. That’s 10 seconds of execution time per minute, 14.400 seconds per day, and 432.000 seconds per 30 days. This function is configured to use 128 MB or RAM (1/8th of a GB), so you’re billed for 432.000 / 8 = 54.000 GB-seconds per month. At $0.0000166667 per GB-second, this function will cost a whopping $0.90 per month.</p>
<p>The only tunable performance configuration for Lambda is the amount of memory available to the function. The CPU performance scales with the memory configuration. Lambda functions used to always have 2 vCPU cores, regardless of memory. These cores would be throttled at certain memory configurations. The <a rel="noopener noreferrer" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-memory.html">documentation</a> states that at 1,769 MB, a function has the equivalent of one vCPU.</p>
<p>With the increased maximum memory of 10GB, up from 3008 MB (<a rel="noopener noreferrer" href="https://aws.amazon.com/about-aws/whats-new/2020/12/aws-lambda-supports-10gb-memory-6-vcpu-cores-lambda-functions/">AWS News</a> - <a rel="noopener noreferrer" href="https://aws.amazon.com/blogs/aws/new-for-aws-lambda-functions-with-up-to-10-gb-of-memory-and-6-vcpus/">AWS Blog</a>), the number of CPUs has become more flexible. We ran some tests and found out that Lambda now has the following CPU tiers:</p>
<table>
<thead>
<tr>
<th>Memory</th>
<th>vCPUs</th>
</tr>
</thead>
<tbody>
<tr>
<td>128 - 3008 MB</td>
<td>2</td>
</tr>
<tr>
<td>3009 - 5307 MB</td>
<td>3</td>
</tr>
<tr>
<td>5308 - 7076 MB</td>
<td>4</td>
</tr>
<tr>
<td>7077 - 8845 MB</td>
<td>5</td>
</tr>
<tr>
<td>8846+ MB</td>
<td>6</td>
</tr>
</tbody>
</table>
<p>This opens up a number of new price tuning options. If a workload supports multi-threading, for example, we can try to optimize the number of vCPUs to reduce execution time. A multi-threading function configured at 3009 MB might execute 1.5x as fast as a 3008 MB function, a 33.3% cost reduction! Let’s see if we can produce these results in real life benchmarks.</p>
<h3>Running tests with ffmpeg</h3>
<p>To test Lambda’s performance we compiled <code>ffmpeg</code> from source and packaged it together with a 100 MB sample video and a simple Python app. Because this package exceeds the maximum size for Lambda deployment packages, we used the new Lambda  Container Image Support (<a rel="noopener noreferrer" href="https://aws.amazon.com/about-aws/whats-new/2020/12/aws-lambda-now-supports-container-images-as-a-packaging-format/">AWS News</a> - <a rel="noopener noreferrer" href="https://aws.amazon.com/blogs/aws/new-for-aws-lambda-container-image-support">AWS Blog</a>) to put <code>ffmpeg</code> and the video together in a container and create a Lambda function from that container. Our performance benchmark will consist of 100 iterations of a video format conversion. The exact command for our initial run of benchmarks is <code>ffmpeg -i source.mkv -c:v libx264 -b:a 128k -threads 1 -y /tmp/target.mp4</code></p>
<p>As you can see, this command is hardcoded to use only one thread. This allows us to set a single-threaded baseline on various memory configurations. We ran 100 iterations on the key memory sizes in the table below. The values chosen are the top and bottom values for every CPU tier. 832 MB was the minimum required to successfully convert the video within 15 minutes.</p>
<h3>Single thread results</h3>
<table>
<thead>
<tr>
<th>Memory</th>
<th>vCPUs</th>
<th>Threads</th>
<th>Average Execution Time</th>
<th>Cost for 100 Executions</th>
</tr>
</thead>
<tbody>
<tr>
<td>832 MB</td>
<td>2</td>
<td>1</td>
<td>832308 ms (832.31 s)</td>
<td>$1.1271</td>
</tr>
<tr>
<td>1769 MB</td>
<td>2</td>
<td>1</td>
<td>396342 ms (396.34 s)</td>
<td>$1.1412</td>
</tr>
<tr>
<td>3008 MB</td>
<td>2</td>
<td>1</td>
<td>361768 ms (361.77 s)</td>
<td>$1.7712</td>
</tr>
<tr>
<td>3009 MB</td>
<td>3</td>
<td>1</td>
<td>361907 ms (361.91 s)</td>
<td>$1.7724</td>
</tr>
<tr>
<td>5307 MB</td>
<td>3</td>
<td>1</td>
<td>362551 ms (362.55 s)</td>
<td>$3.1316</td>
</tr>
<tr>
<td>5308 MB</td>
<td>4</td>
<td>1</td>
<td>359439 ms (359.44 s)</td>
<td>$3.1053</td>
</tr>
<tr>
<td>7076 MB</td>
<td>4</td>
<td>1</td>
<td>360534 ms (360.53 s)</td>
<td>$4.1523</td>
</tr>
<tr>
<td>7077 MB</td>
<td>5</td>
<td>1</td>
<td>359426 ms (359.43 s)</td>
<td>$4.1401</td>
</tr>
<tr>
<td>8845 MB</td>
<td>5</td>
<td>1</td>
<td>359287 ms (359.29 s)</td>
<td>$5.1724</td>
</tr>
<tr>
<td>8846 MB</td>
<td>6</td>
<td>1</td>
<td>360957 ms (360.96 s)</td>
<td>$5.1970</td>
</tr>
<tr>
<td>10240 MB</td>
<td>6</td>
<td>1</td>
<td>361495 ms (361.49 s)</td>
<td>$6.0249</td>
</tr>
</tbody>
</table>
<p><img src="https://images.ctfassets.net/9gzi1io5uqx8/2usIrwWt5S0vVYYUpe5lKY/cc8d1b2aa761055af87c205a5b96d245/single_threaded.png" alt="Single-threaded Results"></p>
<p>This data clearly shows that any memory configuration above 3008 MB does not improve single thread performance. Memory configurations up to 1769 MB are throttled, from 1769 MB to 3008 MB there are some minor performance increases, and from 3008 MB and up you’re using the full capacity of a single core, which means the average execution time plateaus. At the same time the costs for higher memory configurations are skyrocketing. Clearly, if you’re running single-threaded processes in Lambda you would do well to fit your Lambda’s memory closely to your function’s actual requirements.</p>
<h3>Multi-threaded results</h3>
<p>For our multi-threaded tests, we obtain the number of CPUs from <code>/proc/cpuinfo</code> and configure <code>ffmpeg</code> to use as many threads as there are cores. Let’s take a look at the results.</p>
<table>
<thead>
<tr>
<th>Memory</th>
<th>vCPUs</th>
<th>Threads</th>
<th>Average Execution Time</th>
<th>Diff vs. Single-threaded</th>
<th>Cost for 100 Executions</th>
</tr>
</thead>
<tbody>
<tr>
<td>832 MB</td>
<td>2</td>
<td>2</td>
<td>880404 ms (880.40 s)</td>
<td>+5.78%</td>
<td>$1.1922</td>
</tr>
<tr>
<td>1769 MB</td>
<td>2</td>
<td>2</td>
<td>402968 ms (402.97 s)</td>
<td>+1.67%</td>
<td>$1.1602</td>
</tr>
<tr>
<td>3008 MB</td>
<td>2</td>
<td>2</td>
<td>241733 ms (241.73 s)</td>
<td>-33.18%</td>
<td>$1.1835</td>
</tr>
<tr>
<td>3009 MB</td>
<td>3</td>
<td>3</td>
<td>237562 ms (237.56 s)</td>
<td>-34.36%</td>
<td>$1.1635</td>
</tr>
<tr>
<td>5307 MB</td>
<td>3</td>
<td>3</td>
<td>168755 ms (168.76 s)</td>
<td>-53.45%</td>
<td>$1.4577</td>
</tr>
<tr>
<td>5308 MB</td>
<td>4</td>
<td>4</td>
<td>150779 ms (150.78 s)</td>
<td>-58.05%</td>
<td>$1.3026</td>
</tr>
<tr>
<td>7076 MB</td>
<td>4</td>
<td>4</td>
<td>142042 ms (142.04 s)</td>
<td>-60.60%</td>
<td>$1.6359</td>
</tr>
<tr>
<td>7077 MB</td>
<td>5</td>
<td>5</td>
<td>104318 ms (104.32 s)</td>
<td>-70.98%</td>
<td>$1.2016</td>
</tr>
<tr>
<td>8845 MB</td>
<td>5</td>
<td>5</td>
<td>95304 ms (95.30 s)</td>
<td>-73.47%</td>
<td>$1.3720</td>
</tr>
<tr>
<td>8846 MB</td>
<td>6</td>
<td>6</td>
<td>90039 ms (90.04 s)</td>
<td>-75.06%</td>
<td>$1.2964</td>
</tr>
<tr>
<td>10240 MB</td>
<td>6</td>
<td>6</td>
<td>87455 ms (87.46 s)</td>
<td>-75.81%</td>
<td>$1.4576</td>
</tr>
</tbody>
</table>
<p><img src="https://images.ctfassets.net/9gzi1io5uqx8/3U0RNbpfoWamiGYTzgQvxK/4437e7a6b9f8baa6ae6f5fd841ef2a44/multi_threaded.png" alt="Multi-threaded Results"></p>
<p>What jumps out immediately is that at 832 MB using two threads is actually slower than the single-threaded benchmark. This likely relates to the CPU throttling applied to Lambda functions below 1769 MB: two threads competing for the same limited resources are slower than a single thread having those resources to itself.</p>
<p>At 1769 MB the multi-threaded measurement is almost exactly equal to the single-threaded result. This makes sense, since the documentation states that at 1769 MB, a function has the equivalent of one vCPU. At this level contestation is apparently no longer an issue.</p>
<p>At 3008 MB, the old maximum memory configuration, we start to benefit from using multiple cores. But it starts to get interesting at exactly 1 MB higher, at 3009 MB. This is the first time we get to use more than two cores, and we would expect an immediate performance bump. However, the results at three cores and 3009 MB are only 1.73% better than at two cores and 3008 MB. Apparently, the three cores at 3009 MB do not offer 1.5x the performance of the two cores at 3008 MB, and some throttling is taking place. This is corroborated by the benchmark at 5307 MB: even though this configuration has the same amount of cores, its performance is 28.96% higher than at 3009 MB. This means that AWS is dynamically limiting the amount of processing power available to the function, based on its memory configuration.</p>
<p>Next, at 5308 MB, we have our first four-core benchmark. Here we see that the fourth core adds a significant improvement. Although we added only 0.0188% of memory, performance jumped by 10.65%. The other four-core measurement at 7076 MB yields further improvements, but not enough to offset the additional cost.</p>
<p>Then at 7077 MB, the first five-core benchmark, we see another BIG jump. Again, we only added a single MB of memory, but the fifth core increased performance by an incredible 26.56%. Increasing memory to 8845 MB adds another improvement of 8.64%, but like in the four-core block, this doesn’t offset the additional cost.</p>
<p>At 8846 MB the additional MB and 6th core yields a 5.52% performance boost, and the maximum configuration of 10240 MB is 2.87% faster than the 8846 MB setting.</p>
<h3>Understanding these results</h3>
<p>The single-threaded benchmarks showed that a single core maxes out at relatively low memory configurations. The same logic doesn’t apply to multi-threaded solutions: every tier increased multi-threaded performance. Adding an additional core sometimes adds a big performance gain, and sometimes it hardly adds value.</p>
<p>This leads me to conclude that AWS applies a sort of dynamic capacity ceiling to Lambda functions. For example, this ceiling might be set at 0.5 at 832 MB, which means you can at max use half a core. It’s set to 1.0 at 1769 MB, which means we can use one full core. At 3008 it seems to be set to 1.6667. A full list of ceiling values can be found in the table below:</p>
<table>
<thead>
<tr>
<th>Memory</th>
<th>vCPUs</th>
<th>CPU Ceiling</th>
</tr>
</thead>
<tbody>
<tr>
<td>832 MB</td>
<td>2</td>
<td>0.50</td>
</tr>
<tr>
<td>1769 MB</td>
<td>2</td>
<td>1.00</td>
</tr>
<tr>
<td>3008 MB</td>
<td>2</td>
<td>1.67</td>
</tr>
<tr>
<td>3009 MB</td>
<td>3</td>
<td>1.70</td>
</tr>
<tr>
<td>5307 MB</td>
<td>3</td>
<td>2.39</td>
</tr>
<tr>
<td>5308 MB</td>
<td>4</td>
<td>2.67</td>
</tr>
<tr>
<td>7076 MB</td>
<td>4</td>
<td>2.84</td>
</tr>
<tr>
<td>7077 MB</td>
<td>5</td>
<td>3.86</td>
</tr>
<tr>
<td>8845 MB</td>
<td>5</td>
<td>4.23</td>
</tr>
<tr>
<td>8846 MB</td>
<td>6</td>
<td>4.48</td>
</tr>
<tr>
<td>10240 MB</td>
<td>6</td>
<td>4.72</td>
</tr>
</tbody>
</table>
<p>This explains how single-threaded functions can completely utilize a single core, but multi-threaded applications can’t do the same on multiple cores.</p>
<p>Please note that these values are for my specific video conversion benchmark. This benchmark might not be able to max out all the cores available to it. Other benchmarks might be able to use multiple cores more efficiently and produce different results.</p>
<p>The core take-away is that this benchmark has run exactly the same process under different memory configurations, and consistently produces better results for higher memory configurations in the same CPU tier.</p>
<p>The second finding is that adding an additional core always yields a performance benefit for multi-threaded processes. Some cores (the third and sixth) provide smaller benefits than others (the fourth and fifth). If your function is configured just below one of these thresholds, slightly increasing the value might result in big gains.</p>
<h3>Determining the ideal price point</h3>
<p>Multi-threaded Lambda functions complete faster at higher memory settings, leading to lower costs. In general, the lower execution time offsets a big chunk of the higher memory costs. This is especially visible at 1769, 3009 and 7077 MB: the first configuration costs $1.1602 for 100 executions. The second configuration completes its operation 41.05% faster, at a 0.28% price increase ($1.1635). The 7077 MB setting completes 74.11% faster than the 1769 MB variant, at a 3.57% price increase ($1.2016).</p>
<p>Deciding which price point is best for your workload depends on your requirements: if it’s purely cost-driven, 1769 MB or 3009 MB might be a good starting point. If it’s performance driven, do run some tests at 5308, 7077 and 8846 MB. These memory configurations might perform significantly better at a marginally higher cost.</p>
<h3>Conclusion</h3>
<p>You might have hoped that the new high-memory Lambda functions would also improve single-threaded performance, but alas - the functions seem to run on exactly the same hardware as their lowly 3008 MB siblings. However, the higher Lambda tiers do include three, four, five and six CPU cores. In multi-threaded processes, a single MB …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.sentiatechblog.com/aws-re-invent-2020-day-3-optimizing-lambda-cost-with-multi-threading">https://www.sentiatechblog.com/aws-re-invent-2020-day-3-optimizing-lambda-cost-with-multi-threading</a></em></p>]]>
            </description>
            <link>https://www.sentiatechblog.com/aws-re-invent-2020-day-3-optimizing-lambda-cost-with-multi-threading</link>
            <guid isPermaLink="false">hacker-news-small-sites-25398091</guid>
            <pubDate>Sat, 12 Dec 2020 13:23:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to Reliably Scale Your Data Platform for High Volumes]]>
            </title>
            <description>
<![CDATA[
Score 59 | Comments 4 (<a href="https://news.ycombinator.com/item?id=25398009">thread link</a>) | @oedmarap
<br/>
December 12, 2020 | https://shopify.engineering/reliably-scale-data-platform | <a href="https://web.archive.org/web/*/https://shopify.engineering/reliably-scale-data-platform">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
  <p><strong>By&nbsp;Arbab Ahmed and Bruno Deszczynski</strong></p>
<p><strong></strong>Black Friday and Cyber Monday—or as we like to call it, BFCM—is one of the largest sales events of the year. It’s also one of the most important moments for Shopify and our merchants. To put it into perspective, this year our merchants across more than 175 countries sold a record breaking $5.1+ billion over the sales weekend.&nbsp;</p>
<p>That’s a lot of sales. That’s a lot of data, too.</p>
<p>This BFCM, the Shopify data platform saw an average throughput increase of 150 percent. Our mission as the Shopify Data Platform Engineering (DPE) team is to ensure that our merchants, partners, and internal teams have access to data quickly and reliably. It shouldn’t matter if a merchant made one sale per hour or a million; they need access to the most relevant and important information about their business, without interruption. While this is a must all year round, the stakes are raised during BFCM.</p>
<p>Creating a data platform that withstands the largest sales event of the year means our platform services need to be ready to handle the increase in load. In this post, we’ll outline the approach we took to reliably scale our data platform in preparation for this high-volume event.&nbsp;</p>

<p>Shopify’s data platform is an interdisciplinary mix of processes and systems that collect and transform data for use by our internal teams and merchants. It enables access to data through a familiar pipeline:</p>
<ul>
<li>
<strong>Ingesting data</strong> in any format, from any part of Shopify. “Raw” data (for example, pageviews, checkouts, and orders) is extracted from Shopify’s operational tables without any manipulation. Data is then conformed to an Apache Parquet format on disk.</li>
</ul>
<ul>
<li>
<strong>Processing data,</strong> in either <em>batches</em> or <em>streams,</em> to form the foundations of business insights. Batches of data are “enriched” with models developed by data scientists, and processed within Apache Spark or <a href="https://shopify.engineering/build-production-grade-workflow-sql-modelling" target="_blank" title="How to Build a Production Grade Workflow with SQL Modelling" rel="nofollow noopener noreferrer">dbt</a>.&nbsp;</li>
</ul>
<ul>
<li>
<strong>Delivering</strong> <strong>data</strong> to our merchants, partners, and internal teams so they can use it to make great decisions quickly. We rely on an internal collection of streaming and serving applications, and libraries that power the merchant-facing analytics in Shopify. They’re backed by BigTable, GCS, and CloudSQL.</li>
</ul>
<p>In an average month, the Shopify data platform processes about 880 billion MySQL records and 1.75 trillion Kafka messages.</p>
<h2>Tiered Services</h2>
<p>As engineers, we want to conquer every challenge <em>right now.</em> But that’s not always realistic or strategic, especially when not all data services require the same level of investment. At Shopify, a <strong>tiered services</strong> taxonomy helps us prioritize our reliability and infrastructure budgets in a broadly declarative way. It’s based on the potential impact to our merchants and looks like this:</p>
<table>
<tbody>
<tr>
<td>
<p><strong>Tier 1</strong></p>
</td>
<td>
<p>This service is <em>critical</em> <em>externally</em>, for example. to a merchant’s ability to run their business</p>
</td>
</tr>
<tr>
<td>
<p><strong>Tier 2</strong></p>
</td>
<td>
<p>This service is <em>critical</em> <em>internally</em> to business functions, e.g. a operational monitoring/alerting service</p>
</td>
</tr>
<tr>
<td>
<p><strong>Tier 3</strong></p>
</td>
<td>
<p>This service is <em>valuable internally</em>, for example, internal documentation services</p>
</td>
</tr>
<tr>
<td>
<p><strong>Tier 4</strong></p>
</td>
<td>
<p>This service is an <em>experiment</em>, in very early development, or is otherwise disposable. For example, an emoji generator</p>
</td>
</tr>
</tbody>
</table>

<p>The highest tiers are top priority. Our ingestion services, called <em>Longboat</em> and <em>Speedboat</em>, and our merchant-facing query service <em>Reportify</em> are examples of services in Tier 1.</p>

<p>As we’ve mentioned, each BFCM the Shopify data platform receives an unprecedented volume of data and queries. Our data platform engineers did some forecasting work this year and predicted nearly two times the traffic of 2019. The challenge for DPE is ensuring our data platform is prepared to handle that volume.&nbsp;</p>
<p>When it comes to BFCM, the primary risk to a system’s reliability is directly proportional to its throughput requirements. We call it <em>throughput risk.</em> It increases the closer you get to the front of the data pipeline, so the systems most impacted are our <strong><em>ingestion</em></strong> and <strong><em>processing systems</em></strong>.</p>
<p>With such a titillating forecast, the risk we faced was unprecedented throughput pressure on data services. In order to be BFCM ready, we had to prepare our platform for the tsunami of data coming our way.</p>

<p>We tasked our Reliability Engineering team with Tier 1 and Tier 2 service preparations for our ingestion and processing systems. Here’s the steps we took to prepare our systems most impacted by BFCM volume:</p>
<h2>1. Identify Primary Objectives of Services</h2>
<p>A data ingestion service's main operational priority can be different from that of a batch processing or streaming service. We determine upfront what the service is optimizing for. For example, if we’re extracting messages from a limited-retention Kafka topic, we know that the ingestion system needs to ensure, above all else, that no messages are lost in the ether because they weren’t consumed fast enough. A batch processing service doesn’t have to worry about that, but it may need to prioritize the delivery of one dataset versus another.</p>
<p>In Longboat’s case, as a batch data ingestion service, its primary objective is to ensure that a raw dataset is available within the interval defined by its data freshness service level objective (SLO). That means Longboat is operating reliably so long as every dataset being extracted is no older than eight hours— the default <em>freshness</em> SLO. For Reportify<strong>, </strong>our main query serving service, its primary objective is to get query results out as fast as possible; its reliability is measured against a <em>latency </em>SLO.</p>
<h2>2. Pinpoint Service Knobs and Levers</h2>
<p>With primary objectives confirmed, you need to identify what you can “turn up or down” to sustain those objectives.</p>
<p>In Longboat’s case, extraction jobs are orchestrated with a batch scheduler, and so the first obvious lever is <em>job frequency</em>. If you discover a raw production dataset is stale, it could mean that the extraction job simply needs to run more often. This is a service-specific lever.</p>
<p>Another service-specific lever is Longboat’s “overlap interval” configuration, which configures an extraction job to redundantly ingest some overlapping span of records in an effort to catch late-arriving data. It’s specified in a number of hours.</p>
<p>Memory and CPU are universal compute levers that we ensure we have control of. Longboat and Reportify run on Google Kubernetes Engine, so it’s possible to demand that jobs request more raw compute to get their expected amount of work done within their scheduled interval (ignoring total compute constraints for the sake of this discussion).</p>
<p>So, in pursuit of data freshness in Longboat, we can manipulate:</p>
<ol>
<li>Job frequency</li>
<li>Longboat overlap interval</li>
<li>Kubernetes Engine Memory/CPU requests</li>
</ol>
<p>In pursuit of <em>latency</em> in Reportify, we can turn knobs like its:</p>
<ol>
<li>BigTable node pool size&nbsp;</li>
<li>ProxySQL connection pool/queue size</li>
</ol>
<h2>3. Run Load Tests!</h2>
<p>Now that we have some known controls, we can use them to deliberately constrain the service’s resources. As an example, to simulate an unrelenting N-times throughput increase, we can turn the infrastructure knobs so that we have 1/N the amount of compute headroom, so we’re at N-times nominal load.</p>
<p>For Longboat’s simulation, we manipulated its “overlap interval” configuration and tripled it. Every table suddenly looked like it had roughly three times more data to ingest within an unchanged job frequency; throughput was tripled.</p>
<p>For Reportify, we leveraged our <a href="https://shopify.engineering/performance-testing-shopify" target="_blank" title="Pummelling the Platform–Performance Testing Shopify - Shopify Engineering" rel="nofollow noopener noreferrer">load testing tools</a> to simulate some truly haunting throughput scenarios, issuing an increasingly extreme volume of queries, as seen here:</p>
<figure><img alt="A line graph showing streaming service queries per second by source. The graph shows increase in the volume of queries over time during a load test." data-src="https://cdn.shopify.com/s/files/1/0779/4361/files/streaming-queries-per-second-graph.jpg?v=1607444696" src="https://cdn.shopify.com/s/files/1/0779/4361/files/streaming-queries-per-second-graph.jpg?v=1607444696">
<figcaption>Streaming service queries per second metric after the load test</figcaption>
</figure>
<p>In this graph, the doom is shaded purple.&nbsp;</p>
<p>Load testing answers a few questions immediately, among others:</p>
<ul>
<li>Do infrastructure constraints affect service uptime?&nbsp;</li>
<li>Does the service’s underlying code gracefully handle memory/CPU constraints?</li>
<li>Are the raised service alarms expected?</li>
<li>Do you know what to do in the event of every fired alarm?</li>
</ul>
<p>If any of the answers to these questions leave us unsatisfied, the reliability roadmap writes itself: we need to engineer our way into satisfactory answers to those questions. That leads us to the next step.&nbsp;</p>
<h2>4. Confirm Mitigation Strategies Are Up-to-Date</h2>
<p>A service’s reliability depends on the speed at which it can recover from interruption. Whether that recovery is performed by a machine or human doesn’t matter when your CTO is staring at a service’s reliability metrics! After deliberately constraining resources, the operations channel turns into a (controlled) hellscape and it's time to act as if it were a real production incident.</p>
<p>Talking about mitigation strategy could be a blog post on its own, but here are the tenets we found most important:</p>
<ol>
<li>
<strong>Every alert must be directly actionable</strong>. Just saying “the curtains are on fire!” without mentioning “put it out with the extinguisher!” amounts to noise.</li>
<li>
<strong>Assume that mitigation instructions will be read by someone broken out of a deep sleep</strong>. Simple instructions are carried out the fastest.</li>
<li>
<strong>If there is </strong><strong><em>any </em></strong><strong>ambiguity or unexpected behavior during controlled load tests, you’ve identified new reliability risks.</strong> Your service is less reliable than you expected. For Tier 1 services, that means everything else drops and those risks should be addressed immediately.</li>
<li>
<strong>Plan another controlled load test</strong> and ensure you’re confident in your recovery.</li>
<li>
<strong>Always over-communicate, even if acting alone</strong>. Other engineers will devote their brain power to your struggle.</li>
</ol>
<h2>5. Turn the Knobs Back</h2>
<p>Now that we know what can happen with an overburdened infrastructure, we can make an informed decision whether the service carries real throughput risk. If we absolutely hammered the service and it skipped along smiling without risking its primary objective, we can leave it alone (or even scale <em>down</em>, which will have the CFO smiling too).</p>
<p>If we don’t feel confident in our ability to recover, we’ve unearthed new risks. The service’s development team can use this information to plan resiliency projects, and we can collectively scale our infrastructure to minimize throughput risk in the interim.</p>
<p>In general, …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://shopify.engineering/reliably-scale-data-platform">https://shopify.engineering/reliably-scale-data-platform</a></em></p>]]>
            </description>
            <link>https://shopify.engineering/reliably-scale-data-platform</link>
            <guid isPermaLink="false">hacker-news-small-sites-25398009</guid>
            <pubDate>Sat, 12 Dec 2020 13:05:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Germany's State Distance-Learning University]]>
            </title>
            <description>
<![CDATA[
Score 124 | Comments 106 (<a href="https://news.ycombinator.com/item?id=25396999">thread link</a>) | @Tomte
<br/>
December 12, 2020 | https://www.fernuni-hagen.de/english/ | <a href="https://web.archive.org/web/*/https://www.fernuni-hagen.de/english/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		<p>The FernUniversität in Hagen is Germany’s only state distance-learning university, and its largest in terms of student numbers. Its flexible degree programs and continuing education options make higher education accessible to students in a variety of life situations. Its five faculties conduct a wide range of theoretical and applied research in their subject areas of Humanities and Social Sciences, Psychology, Mathematics and Computer Science, Economics and Business Administration, and Law.</p> <p><a href="https://www.fernuni-hagen.de/english/university/index.shtml">Learn more</a></p>
	</div><div>
		<h2>The Hagen New Learning Manifesto</h2> <p><span><span>How should we, how can we, how must we learn in the future?</span></span> The FernUniversität in Hagen and leading educational experts address these questions in a new position paper about New Learning.</p> <p><a href="https://www.fernuni-hagen.de/english/university/hagen-manifesto.shtml">Learn more and read the Manifesto</a></p>
	</div></div>]]>
            </description>
            <link>https://www.fernuni-hagen.de/english/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25396999</guid>
            <pubDate>Sat, 12 Dec 2020 09:27:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Amazon owns more than $2B worth of IPv4 addresses]]>
            </title>
            <description>
<![CDATA[
Score 345 | Comments 348 (<a href="https://news.ycombinator.com/item?id=25395432">thread link</a>) | @dangoldin
<br/>
December 11, 2020 | https://dangoldin.com/2020/12/11/amazon-owns-more-than-2b-worth-of-ipv4-addresses/ | <a href="https://web.archive.org/web/*/https://dangoldin.com/2020/12/11/amazon-owns-more-than-2b-worth-of-ipv4-addresses/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div role="main">
  <article>
    

    <section>
      
<p>While listening to a <a href="https://softwareengineeringdaily.com/2020/12/02/bgp-with-andree-toonk/">podcast discussing BGP</a> I heard the fact that AWS owns more than $2B worth of IP addresses. I knew AWS was massive but this came as a big shock so I decided to do some digging around. I came across a <a href="https://ipv4marketgroup.com/ipv4-pricing/">site</a> that listed the market prices of IP addresses and the range looks to be anywhere from $20 to $30 per IP depending on the block size. Now it was time to figure out the IP addresses owned by Amazon. I figured this would be difficult but lucky for us AWS actually <a href="https://ip-ranges.amazonaws.com/ip-ranges.json">publishes</a> their entire set of IP addresses as JSON.</p>

<p>The work is simply to download the JSON and then convert the CIDR blocks to the number of IPs and add them all up. As of today, December 11, 2020 AWS self reports owning 109,847,486 IPV4 addresses - at a price of $20 this is almost $2.2B and at $30 it’s almost $3.3B. That’s wild.</p>

<figure><pre><code data-lang="python"><span>import</span> <span>urllib.request</span>
<span>import</span> <span>json</span>

<span>with</span> <span>urllib</span><span>.</span><span>request</span><span>.</span><span>urlopen</span><span>(</span><span>' https://ip-ranges.amazonaws.com/ip-ranges.json'</span><span>)</span> <span>as</span> <span>f</span><span>:</span>
    <span>j</span> <span>=</span> <span>json</span><span>.</span><span>loads</span><span>(</span><span>f</span><span>.</span><span>read</span><span>().</span><span>decode</span><span>(</span><span>'utf-8'</span><span>))</span>

<span>print</span><span>(</span><span>'All keys'</span><span>,</span> <span>j</span><span>.</span><span>keys</span><span>())</span>

<span>print</span><span>(</span><span>'IPV4 prefixes'</span><span>,</span> <span>len</span><span>(</span><span>j</span><span>[</span><span>'prefixes'</span><span>]))</span>

<span>ips</span> <span>=</span> <span>0</span>
<span>for</span> <span>prefix</span> <span>in</span> <span>j</span><span>[</span><span>'prefixes'</span><span>]:</span>
    <span>cidr</span> <span>=</span> <span>int</span><span>(</span><span>prefix</span><span>[</span><span>'ip_prefix'</span><span>].</span><span>split</span><span>(</span><span>'/'</span><span>)[</span><span>1</span><span>])</span>
    <span>ips</span> <span>+=</span> <span>2</span><span>**</span><span>(</span><span>32</span><span>-</span><span>cidr</span><span>)</span>

<span>print</span><span>(</span><span>'# IPS'</span><span>,</span> <span>ips</span><span>)</span></code></pre></figure>

    </section>

    
    <br>
    

    

    

    

  </article>
</div></div>]]>
            </description>
            <link>https://dangoldin.com/2020/12/11/amazon-owns-more-than-2b-worth-of-ipv4-addresses/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25395432</guid>
            <pubDate>Sat, 12 Dec 2020 04:08:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Reverse Engineering the TP-Link HS110]]>
            </title>
            <description>
<![CDATA[
Score 97 | Comments 22 (<a href="https://news.ycombinator.com/item?id=25393505">thread link</a>) | @zdw
<br/>
December 11, 2020 | https://www.softscheck.com/en/reverse-engineering-tp-link-hs110/ | <a href="https://web.archive.org/web/*/https://www.softscheck.com/en/reverse-engineering-tp-link-hs110/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
	<div>
		<div>
			
<article id="post-3286">

<div>
<div>
	<!-- .entry-header -->

		<div>
      
		<p><em>by Lubomir Stroetmann, Consultant and Tobias Esser, Consultant</em></p>
<p><teaser><br>The <strong>TP-Link HS110 Wi-Fi</strong> is a cloud-enabled power plug that can be turned on and off remotely via app and offers energy monitoring and scheduling capabilities. As part of ongoing research into Internet of Things security, we performed a security analysis by reverse engineering the device firmware and Android app, sniffing app-to-device and device-to-app communications and <a href="https://www.softscheck.com/de/fuzzing-de/" target="_blank" rel="noopener noreferrer">fuzzing</a> the proprietary protocols being used.</teaser></p>
<p>While cloud communication was found to be reasonably secure for an IoT device, we discovered two insecure proprietary local configuration protocols: A human-readable JSON protocol “encrypted” with an easily reversible autokey XOR cipher and a binary DES-encrypted configuration and debugging protocol (<strong>TDDP – TP-Link Device Debug Protocol</strong>). TDDP is in use across most of the TP-Link product line including routers and access points and thus merits further research. We also release a <a href="https://github.com/softScheck/tplink-smartplug" target="_blank" rel="noopener noreferrer">Wireshark dissector and two python clients</a> for the proprietary protocols on GitHub.</p>

<p><strong id="nav">Contents</strong> </p>
<ol>
<li><a href="#Security Analysis Summary">Security Analysis Summary</a></li>
<li><a href="#Device Setup">Device Setup</a></li>
<li><a href="#Reverse Engineering the firmware">Reverse Engineering the firmware</a></li>
<li><a href="#Busybox">Busybox</a></li>
<li><a href="#Portscan">Portscan</a></li>
<li><a href="#TP-Link Smart Home Protocol">TP-Link Smart Home Protocol</a></li>
<li><a href="#Test Mode">Test Mode</a></li>
<li><a href="#TP-Link Device Debug Protocol">TP-Link Device Debug Protocol</a></li>
</ol>
<p><strong id="Security Analysis Summary">1. Security Analysis Summary</strong> <a href="#nav"></a></p>
<p><strong>The Good:</strong></p>
<ul>
<li>Cloud functionality can be turned off</li>
<li>Cloud communication uses HTTPS and CA pinning</li>
<li>Stores energy monitoring data locally</li>
<li>Firmware update checks signature against RSA keys</li>
</ul>
<p><strong>The Bad:</strong></p>
<ul>
<li>Useless encryption for local communication</li>
<li>No authentication: Anybody on the local network can turn the Smart Plug on and off, reset it or render it inoperable</li>
<li>TLS cloud connection could be intercepted with any valid Symantec EV certificate (only Root CA is checked)</li>
<li>Phones home even if set up as local-only</li>
<li>Undocumented configuration and debug service (TDDP)</li>
</ul>
<p><strong id="Device Setup">2. Device Setup</strong> <a href="#nav"></a></p>
<p>The Smart Plug has two physical buttons: An on/off relay switch and a device reset button that resets the device if pushed for five seconds or longer. When plugged in, an unconfigured or freshly reset Smart Plug will start an unsecured open Access Point with the SSID “<code>TP-LINK_Smart Plug_XXXX</code>” where XXXX are four hexadecimal numbers. A quick search on <a href="https://www.wigle.net/" target="_blank" rel="noopener noreferrer">WiGLE</a> reveals several unconfigured TP-Link Smart Plugs in the wild:</p>
<p><img src="https://www.softscheck.com/assets/img/blog/wigle-suche-1.png" alt="wigle-suche"></p>
<p>&nbsp;<br>
TP-Link’s Smart Home app “<a href="https://play.google.com/store/apps/details?id=com.tplink.kasa_android" target="_blank" rel="noopener noreferrer">Kasa</a>” makes the smartphone connect to this access point, sends UDP broadcast packets to <code>255.255.255.255</code> to find the Smart Plug IP and proceeds to configure it with the SSID and password that the user entered into the app. The Smart Plug then turns off the Access Point and connects to the configured WiFi as a client.</p>
<p>We perform a KARMA attack using the Sensepost <a href="https://github.com/sensepost/mana" target="_blank" rel="noopener noreferrer">MANA Toolkit</a>, forcibly deauthenticating the Smart Plug and trying to get it to connect to a rogue Access Point with the same SSID and no security. The attack is not successful; however repeated deauthentication can be used to perform a temporary Denial of Service attack against the device.</p>
<p><strong id="Reverse Engineering the firmware">3. Reverse Engineering the TP-Link HS110 firmware</strong> <a href="#nav"></a></p>
<p>We download the current official firmware for the device (<code>HS110(US)_V1_151016.zip</code>) and use binwalk to extract the contents of the .bin file:</p>
<p><img src="https://www.softscheck.com/assets/img/blog/binwalk-1.png" alt="binwalk"></p>
<p>&nbsp;<br>
As we can see, the firmware is a typical embedded Linux system and contains three parts:</p>
<ul>
<li>U-Boot Bootloader 1.1.4 (Oct 16 2015 – 11:22:22)</li>
<li>Linux Kernel 2.6.31—LSDK-9.2.0_U11.14 (yt@yangtao.localdomain)</li>
<li>Squashfs filesystem</li>
</ul>
<p>Examining the contents of the filesystem, we find the following interesting files:</p>
<ul>
<li>/bin/busybox v1.01 (2015.10.16-03:17+0000)</li>
<li>/etc/newroot2048.crt</li>
</ul>
<p>This is the certificate used to verify the identity of the cloud server. The file contains the “<a href="https://www.symantec.com/theme/roots">VeriSign Class 3 Public Primary Certification Authority – G5</a>” root certificate. This means the only check performed when establishing a TLS connection to the cloud is if the provided server certificate has been signed by the Symantec/VeriSign CA for Extended Validation (EV) certificates (<a href="https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning" target="_blank" rel="noopener noreferrer">CA pinning</a>). A determined attacker could buy his own EV certificate and use it to impersonate a cloud server.</p>
<ul>
<li>/etc/shadow</li>
</ul>
<pre>root:7KBNXuMnKTx6g:15502:0:99999:7:::</pre>
<p>The oldschool descrypt password is trivially broken, the password is “media”.</p>
<ul>
<li>/usr/bin/shd – the main server application</li>
<li>/usr/bin/shdTester – client for energy monitor calibration</li>
<li>/usr/bin/calDump – dumps wifi calibration data from /dev/caldata</li>
</ul>
<p>All proprietary server logic is contained in the shd (“Smart Home Daemon”) binary, which is <code>MIPS32 R2 Big Endian</code>:</p>
<pre>shd: ELF 32-bit MSB executable, MIPS, MIPS32 rel2 version 1 (SYSV), 
dynamically linked, interpreter /lib/ld-uClibc.so.0, corrupted section header size
</pre>
<p>The shd binary also contains a copy of <code>OpenSSL 1.0.1j 15 Oct 2014</code> for establishing TLS connections to the cloud server.<br>
We load the shd binary into IDA and start analyzing!</p>
<p><strong id="Busybox">4. Busybox</strong> <a href="#nav"></a></p>
<p>The Busybox version provided in the firmware is vulnerable to <a href="https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2011-2716" target="_blank" rel="noopener noreferrer">CVE-2011-2716</a>, a command injection vulnerability in the udhcpc DHCP client component of Busybox, which allows to inject shell commands into one of the following DHCP options: (12) Hostname, (15) Domainname, (40) NIS Domain or (66) TFTP Server Name. For this to work, those values have to be actually used by the shell script invoking udhcpc. Analyzing the firmware we find that the shd binary creates a shell script <code>/tmp/udhcpc.script</code> containing:</p>
<pre>#!/bin/sh
if[ $1 = renew –o $1 = bound]
then
    ifconfig $interface $ip netmask $subnet
    route del default
    route add default gw $router
   echo "nameserver $dns" &gt; /tmp/resolv.conf
fi
</pre>
<p>It then executes udhcpc:</p>
<pre>/sbin/udhcpc –b –H "HS100(US)" –i br0 –s /tmp/udhcpc.script
</pre>
<p>As we can see, the hostname is hardcoded and none of the other options are used. Unfortunately, the udhcpc vulnerability is not exploitable in this case.</p>
<p><strong id="Portscan">5. Portscan</strong> <a href="#nav"></a></p>
<p>An nmap port scan on all TCP and UDP ports reveals the following:</p>
<table>
<thead>
<tr>
<th><strong>Port</strong></th>
<th><strong>Protocol</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>80/tcp</td>
<td>HTTP</td>
</tr>
<tr>
<td>9999/tcp</td>
<td>TP-Link Smart Home Protocol</td>
</tr>
<tr>
<td>1040/udp</td>
<td>TP-Link Device Debug Protocol (TDDP)</td>
</tr>
</tbody>
</table>
<p>The Webserver on Port <code>80</code> replies with a meaningless ellipsis, no matter what the request is:</p>
<pre>HTTP/1.1 200 OK
Server: TP-LINK Smart Plug
Connection: close
Content-Length: 5
Content-Type: text/html

…
</pre>
<p>Looking through the shd binary we see that the HTTP Server routine is called “<code>fake_httpd</code>” and will always return this hardcoded reply.</p>
<p>Port <code>9999 TCP</code> is used for controlling the Smart Plug on the local network via the Kasa app and is described in the <a href="#TP-Link Smart Home Protocol">TP-Link Smart Home Protocol section</a>. Port <code>1040 UDP</code> is described in the <a href="#TP-Link Device Debug Protocol">TP-Link Device Debug Protocol section</a>.</p>
<p><strong id="TP-Link Smart Home Protocol">6. TP-Link Smart Home Protocol</strong> <a href="#nav"></a></p>
<p>Sniffing the local wireless network traffic reveals that the TP-Link Kasa SmartHome app talks to the HS110 Smart Plug on TCP port 9999 using what looks like encrypted data.</p>
<p>After decompiling the Kasa app for Android, we find the encryption function:</p>
<p><img src="https://www.softscheck.com/assets/img/blog/tphome-encryption-1.png" alt="hs110 tphome-encryption"></p>
<p>We see the initial key (initialization vector) i has a hardcoded value of <code>-85 (= 171)</code>. The first byte of the plaintext is <code>XORed</code> with the key. The key is then set to the plaintext byte. During the next iteration, the next plaintext byte is <code>XORed</code> with the previous plaintext byte. Decryption works the same, with the keystream made out of cyphertext bytes. This is known as an <a href="https://en.wikipedia.org/wiki/Autokey_cipher" target="_blank" rel="noopener noreferrer">autokey cipher</a> and while it has better statistical properties than simple XOR encryption with a repeating key, it can be easily broken by known plaintext attacks.</p>
<p>Now that we know the algorithm and the key, we implement a Wireshark dissector in LUA which automatically decrypts TP-Link Smart Home packets on port <code>9999</code>. It turns out that the protocol uses JSON, so we also pass the decrypted contents to the JSON dissector. We can now monitor communications between the Kasa app and the Smart Plug on the local WiFi:</p>
<p><a href="https://www.softscheck.com/assets/img/blog/wireshark-dissector-1.png" target="_blank" rel="noopener noreferrer"><img src="https://www.softscheck.com/assets/img/blog/wireshark-dissector-1.png" alt="wireshark-dissector"></a></p>
<p>&nbsp;<br>
The Smart Plug commands are grouped into the following categories:</p>
<ul>
<li>system</li>
<li>netif (WLAN interface commands)</li>
<li>cnCloud (cloud connection)</li>
<li>time</li>
<li>emeter (energy meter)</li>
<li>schedule (scheduled on/off)</li>
<li>count_down (countdown on/off)</li>
<li>anti_theft (random scheduled on/off)</li>
</ul>
<p>We provide a comprehensive list of JSON commands (<a href="https://github.com/softScheck/tplink-smartplug/blob/master/tplink-smarthome-commands.txt" target="_blank" rel="noopener noreferrer">tplink-smarthome-commands.txt</a>) and a python client to send them with (<a href="https://github.com/softScheck/tplink-smartplug/blob/master/tplink_smartplug.py" target="_blank" rel="noopener noreferrer">tplink_smartplug.py</a>).</p>
<p><strong>System Commands</strong></p>
<p>We can read out information about the system using the <code>get_sysinfo</code> command:</p>
<pre>{"system":{"get_sysinfo":{}}}</pre>
<p>To send the command using our python client, invoke it with the <code>–c</code> info option:</p>
<pre>./tplink_smartplug.py –t 192.168.0.1 –c info</pre>
<p>We provide several predefined commands to read out information from the HS110 Smart Plug using <code>–c</code> options.<br>
Alternatively, you can use the <code>–j</code> option and provide the full JSON string:</p>
<pre>./tplink_smartplug.py –t 192.168.0.1 –j '{"system":{"get_sysinfo":{}}}'</pre>
<p>This allows to send any of the commands listed in <code>tplink-smarthome-commands.txt</code>.<br>
The <code>get_sysinfo</code> reply will contain the following information:</p>
<p><a href="https://www.softscheck.com/assets/img/blog/sysinfo.png" target="_blank" rel="noopener noreferrer"><img src="https://www.softscheck.com/assets/img/blog/sysinfo.png" alt="hs110 sysinfo"></a></p>
<p>&nbsp;<br>
We can turn the HS110 Smart Plug on and off using the <code>set_relay_state</code> command, using <code>1</code> for on and <code>0</code> for off:</p>
<pre>{“system":{"set_relay_state":{"state":1}}}</pre>
<p>We can reboot the HS110 Smart Plug using the <code>reboot</code> command which requires a <code>delay</code> parameter in seconds:</p>
<pre>{"system":{"reboot":{"delay":1}}}</pre>
<p>The HS110 Smart Plug can be reset to factory settings, making it act as an open Access Point again:</p>
<pre>{"system":{"reset":{"delay":1}}}</pre>
<p>Note that since the protocol does not provide authentication, anybody on your network can send this command and force a reset. Here, a prankster would set a high delay value, giving them time to leave the premises.</p>
<p>There are further commands to change the MAC address, change the Device and Hardware IDs, turn off the device LED (night mode) etc.</p>
<p>Of special interest are the firmware flashing commands. You can download a&nbsp; firmware file from an arbitrary URL using:</p>
<pre>{"system":{"download_firmware":{"url":"http://..."}}}</pre>
<p>While downloading, you can get the download state using:</p>
<pre>{"system":{"get_download_state":{}}}</pre>
<p>Once the download is finished, you can flash the firmware using:</p>
<pre>{"system":{"flash_firmware":{}}}</pre>
<p>Flashing a modified image will not work since the image’s signature has to match one of four hardcoded RSA keys (we won’t go into wild speculations why there are four keys here):</p>
<p><a href="https://www.softscheck.com/assets/img/blog/checkfirmware2-1.png" target="_blank" rel="noopener noreferrer"><img src="https://www.softscheck.com/assets/img/blog/checkfirmware2-1.png" alt="hs110 checkfirmware2"></a></p>
<p>&nbsp;<br>
<strong>WiFi Commands</strong></p>
<p>You can instruct the …</p></div></div></div></article></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.softscheck.com/en/reverse-engineering-tp-link-hs110/">https://www.softscheck.com/en/reverse-engineering-tp-link-hs110/</a></em></p>]]>
            </description>
            <link>https://www.softscheck.com/en/reverse-engineering-tp-link-hs110/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25393505</guid>
            <pubDate>Sat, 12 Dec 2020 00:05:04 GMT</pubDate>
        </item>
    </channel>
</rss>
