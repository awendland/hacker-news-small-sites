<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 50]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 50. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Mon, 29 Jun 2020 08:16:54 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-50.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Mon, 29 Jun 2020 08:16:54 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[NeXTSTEP on the HP 712 Part 2: Getting Software]]>
            </title>
            <description>
<![CDATA[
Score 55 | Comments 14 (<a href="https://news.ycombinator.com/item?id=23659277">thread link</a>) | @luu
<br/>
June 26, 2020 | https://blog.pizzabox.computer/posts/hp712-nextstep-part-2/ | <a href="https://web.archive.org/web/*/https://blog.pizzabox.computer/posts/hp712-nextstep-part-2/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div>
  
  <p><time datetime="2020-06-09T09:45:00-0400">Tue, Jun 9, 2020</time></p><p>In the <a href="https://blog.pizzabox.computer/posts/hp712-nextstep-part-1">last post of this series</a>, I set up NeXTstep on an HP PA-RISC <a href="https://blog.pizzabox.computer/pizzaboxes/hp712">workstation</a>. Today, I’m going to get down to business: configure networking, install system patches, outfit it with developer tools, and install some useful software!</p>
<p>As with the previous post, I’ve also made a YouTube video that covers roughly the same topics! If video is your speed, I’d love for you to check it out!</p>
<p>
  <iframe src="https://www.youtube.com/embed/_4hs4K7AEvQ" allowfullscreen="" title="YouTube Video"></iframe>
</p>

<!-- raw HTML omitted -->
<p>My goal is to end up with a capable machine that I can use like it might have been when new, and learn from the experience.</p>
<h2 id="foreshadowing-networking-woes">Foreshadowing networking woes</h2>
<p>While it is possible to transfer files from SCSI drives (or even floppies!), <strong>getting a pizzabox on my home network makes loading software much easier</strong>.
I first tried out NeXTstep on this workstation a couple years ago. The OS installed OK, but I ran in to trouble with networking. I was initially optimistic that I would figure it out:</p>
<blockquote><p lang="en" dir="ltr">I think I'm done for the day but soon if I can fight with NFS and NetInfo (lolololol) I can get screenshots off it and software on</p>— cron mom (@sophaskins) <a href="https://twitter.com/sophaskins/status/962427825608429568?ref_src=twsrc%5Etfw">February 10, 2018</a></blockquote>


<blockquote>
<p><strong>NARRATOR</strong>: she did not soon win the fight with NFS and NetInfo</p>
</blockquote>
<p>Hang on a second: NeXTstep is a workstation-focused Unix operating system from the 80s-90s - <strong>how could it be difficult to get it on a network</strong>? The answer is a thing called NetInfo.</p>
<p>In a surprise to exactly no one, NeXTstep, being from a company founded by Steve Jobs, had it’s own NeXT-only ecosystem of tools that fit together amazingly well. <strong>The cornerstone of NeXTstep networking was NetInfo</strong>. If you had a collection of NeXT computers on a network, NetInfo gave you a system to:</p>
<ul>
<li>manage user accounts that would work across all machines</li>
<li>configure file sharing</li>
<li>control permissions around access to network resources</li>
<li>assign IP addresses and hostnames</li>
<li>quickly bring new machines in to the network</li>
<li>serve this information in a highly-available manner</li>
</ul>
<p>which is to say: NetInfo is a “directory services” system. That’s all well and good - in the early 1990s that space had many competitors and a “right path” hadn’t yet been established, but…<strong>I don’t <em>want</em> my machine to be part of a directory</strong>, **I just want it to be on my existing TCP/IP network.</p>
<h2 id="starting-a-simple-network">Starting a “simple” network</h2>
<p>With that in mind, I (naively) attempted to use the “SimpleNetworkStarter” application.</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/simple-network-starter-1.png" alt="SimpleNetworkStarter">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/simple-network-starter-1.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>SimpleNetworkStarter</p>
      </figcaption>
  </figure>
</div>

<p>The SimpleNetworkStarter window has three “steps”:</p>
<ol>
<li>Select <strong>how we’ll integrate</strong> with an existing NetInfo network (since I don’t intend to interact with one at all, I have to choose “Provide the services specified below”, a sort of catch-all)</li>
<li>Specify <strong>my hostname and IP address</strong> - if I were connecting to an existing NetInfo network, I might not have to do this. “Network Options” lets me set more granular IP settings like netmask and gateway; “NetInfo Options” lets me choose how to integrate with existing domains (if relevant).</li>
<li>Setup <strong>network services</strong>: for my setup I don’t really want <em>any</em> of these things, but as a standalone NeXTstep system, I do have to “Maintain the master copy of network administrative data” (aka, the NetInfo database).</li>
</ol>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/simple-network-starter-2.png" alt="Network Options">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/simple-network-starter-2.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Network Options</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/simple-network-starter-3.png" alt="NetInfo Options">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/simple-network-starter-3.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>NetInfo Options</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/simple-network-starter-4.png" alt="Configuration Successful">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/simple-network-starter-4.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Configuration Successful</p>
      </figcaption>
  </figure>
</div>


</div>

<p>So far, this feels like a really good start, but will it let me fetch files from an NFS share?</p>
<h2 id="networking-woes">Networking woes</h2>
<p>I immediately tried connecting to my NAS over NFS - after all, the main point of setting up networking was making it easier to transfer files. Unfortunately, it didn’t work - I could set up the NFS mount with NFSMananger (more on how to do that later), but the mountpoint would always be empty. Here you can see me attempting to reach it by IP address:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/failing-nfs-mount.png" alt="a failing NFS mount">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/failing-nfs-mount.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>a failing NFS mount</p>
      </figcaption>
  </figure>
</div>

<p>So I had <em>some</em> sort of problem. To narrow down potential issues, I ran a few tests:</p>
<ul>
<li><strong>attempting to ping my NAS</strong> from the workstation - this turned out to not work because NeXTstep doesn’t seem to have any <code>ping</code> command. There are probably ways to accomplish something equivalent with the tools it <em>does</em> have, but I just moved on</li>
<li><strong>attempting to ping the workstation</strong> from elsewhere on my network. This worked - I was able to ping it from my laptop!</li>
<li><strong>attempting to connect to my NAS with FTP</strong> - one of the few network tools NeXTstep <em>does</em> seem to have is FTP, so I gave it a shot. To my surprise, this works!</li>
</ul>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/ftp-by-ip.png" alt="connecting to my NAS via FTP (successfully)">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/ftp-by-ip.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>connecting to my NAS via FTP (successfully)</p>
      </figcaption>
  </figure>
</div>

<p>It did not work via hostname, though, which points to at least some trouble with DNS. Taking a deeper look at the “NeXTstep 3.3 Network and
System Administration Manual” section on “<a href="http://www.nextcomputers.org/NeXTfiles/Docs/NeXTStep/3.3/nsa/11_MixedNet.htmld/index.html">NEXTSTEP Computers in a Mixed Network</a>” (which I probably should have done earlier) shows that <strong>I need to manually configure DNS</strong>. There’s no GUI options for it, you just have to write out an <code>/etc/resolv.conf</code>:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/resolv-conf.png" alt="editing /etc/resolv.conf in vi">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/resolv-conf.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>editing /etc/resolv.conf in vi</p>
      </figcaption>
  </figure>
</div>

<p>After rebooting, I was able to access the NAS via FTP by hostname:


</p><div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/ftp-by-hostname.png" alt="connecting to my NAS via FTP (successfully) by hostname">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/ftp-by-hostname.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>connecting to my NAS via FTP (successfully) by hostname</p>
      </figcaption>
  </figure>
</div>

<p>But still couldn’t use NFS. What gives? I have network connectivity in both directions, and DNS is also now working! I believe this is as far as I got a few years ago, and man I was FRUSTRATED.</p>
<p>Eventually I thought to look in the system log (<code>/usr/adm/messages</code>) for hints:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/dmesg.png" alt="an error from autonfsmount">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/dmesg.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>an error from autonfsmount</p>
      </figcaption>
  </figure>
</div>

<p>and there it was:</p>
<pre><code>autonfsmount: Can't get my address
</code></pre><p>Can’t get…<em>my</em> address? Doesn’t the computer know its own address? While I don’t know <em>why</em> it has to do this (googling has provided me a couple of <a href="https://rute.gerdesas.com/node31.html">quick asides</a> mentioning it, but not much detail), <strong>mounting an NFS server requires working <em>reverse</em> DNS for your IP</strong>.</p>
<p>I do have a real-ish DNS server for my home network, and it populates based on DHCP leases and IP reservations. This workstation, though, was just <strong>using an IP that I habitually hardcode for pizzaboxes (192.168.1.200)</strong>. I double-checked the DHCP server config, and it was indeed set up with a different host for that IP, and not set up at all for this hostname. I replaced that entry with one for <code>hp712</code> at <code>192.168.1.200</code> for the MAC address of my workstation, and crossed my fingers.</p>
<p>It worked! I could browse my NAS from the file-browser.</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/browse-nas.png" alt="browsing my NAS">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/browse-nas.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>browsing my NAS</p>
      </figcaption>
  </figure>
</div>

<h2 id="setting-up-an-nfs-mount">Setting up an NFS mount</h2>
<p>After all that rigamarole, the right way to configure a remote NFS mount goes through the NFSManager.app. While NFSManager lets you configure both “exports” (local directories I share with others) and “imports” (remote directories I want to mount locally).</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/empty-imports.png" alt="an empty list of nfs imports">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/empty-imports.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>an empty list of nfs imports</p>
      </figcaption>
  </figure>
</div>

<p>All I have to is click “Add” and fill in the details for my NAS:</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/new-import.png" alt="adding a new nfs import">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/new-import.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>adding a new nfs import</p>
      </figcaption>
  </figure>
</div>

<p>That’s it? A lot of struggle got me to this point, but <em>finally</em> I can transfer files.</p>
<h2 id="patch-tuesday">Patch Tuesday</h2>
<p>The first order of business is to <strong>run system updates</strong>. NeXTstep 3.3 was released in mid-1995, and it had three patch updates: the <a href="https://www.nextop.de/NeXTAnswers/2066.html">first</a> at the end of 1995, and the second and <a href="http://www.nextcomputers.org/NeXTfiles/Software/NEXTSTEP/Patches/NEXTSTEP_3.3_User_Patch_3/nextstep3.3_patch_3_overview.pdf">third</a> in late 1999. Since NeXT were acquired by Apple in 1997, this patch was made by Apple to address Y2k bugs and other longstanding issues. Thanks, Apple! <a href="https://youtu.be/gaI6kBVyu00?t=28"><em>Thapple</em></a>.</p>
<p>The third patch is a cumulative update, so that should be all I need. Nextcomputers.org generously <a href="http://www.nextcomputers.org/NeXTfiles/Software/NEXTSTEP/Patches/NEXTSTEP_3.3_User_Patch_3/">hosts</a> the patch for download. Because I’m using an HP PA-RISC machine, I need <code>NS33RISCUserPatch3.tar</code>. System updates need to be installed as the <code>root</code> user, and if you run them as <code>me</code> (the default user) NeXTstep doesn’t prompt to escalate privilges, it just gives an error. Thus, I need to log in as <code>root</code> directly. In order to do that, I need to give the <code>me</code> user a password so the system will stop automatically logging in at boot (giving me a chance to log in as <code>root</code>). To set a password, you go to Preferences.app and navigate to the lock icon.</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/password-before.png" alt="no password!">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/password-before.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>no password!</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/password-set.png" alt="password set">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/password-set.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>password set</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/password-secure.png" alt="password secure">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/password-secure.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>password secure</p>
      </figcaption>
  </figure>
</div>


</div>

<p>After the next reboot, I then get the login screen (instead of automatically going to the desktop):</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/login-screen.png" alt="nextstep 3.3 login screen">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/login-screen.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>nextstep 3.3 login screen</p>
      </figcaption>
  </figure>
</div>

<p>By default, the <code>root</code> password is blank (you can of course fix this after login in the same way as setting a password for the <code>me</code> account). I navigated to where I had put the patch tarball on my NAS, copied it to the HP 712, and unarchived it.</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-copy.png" alt="copying from NAS">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-copy.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>copying from NAS</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-untar.png" alt="untarring">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-untar.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>untarring</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-pkg.png" alt="the patch package">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-pkg.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>the patch package</p>
      </figcaption>
  </figure>
</div>


</div>

<p>Double-clicking the package brings up a familiar-feeling Installer.app</p>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-installer.png" alt="installer.app for OS update">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-installer.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>installer.app for OS update</p>
      </figcaption>
  </figure>
</div>

<p>Clicking “Install” prompts me to make sure I’m choosing the right architecture (in my case, PA-RISC), runs a program to determine compatibility, and runs the update.</p>



<div itemscope="" itemtype="http://schema.org/ImageGallery">
	  


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-arch.png" alt="choose system arch">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-arch.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>choose system arch</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-install.png" alt="installation in progress">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-install.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>installation in progress</p>
      </figcaption>
  </figure>
</div>



<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-complete.png" alt="installation complete">
    </p>
    <a href="https://blog.pizzabox.computer/img/hp712/nextstep-part-2/os-update-complete.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>installation complete</p>
      </figcaption>
  </figure>
</div>


</div>

<p>After a reboot, I’m on the most recent version of NeXTstep for PA-RISC, and ready for the year 2000!</p>

<p>What’s next for making a usable system? Developer tools! <strong>NeXTstep came on two sets of discs - “User” for the main operating system, and the optional “Developer” disc</strong> with compilers, GUI building tools, libraries, and documentation. While there were separate versions of NeXTstep User for CISC (m68k and i386) and RISC (PA-RISC and SPARC) platforms, the Developer disc is “quad-fat” - it contains binaries for all four platforms. I …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.pizzabox.computer/posts/hp712-nextstep-part-2/">https://blog.pizzabox.computer/posts/hp712-nextstep-part-2/</a></em></p>]]>
            </description>
            <link>https://blog.pizzabox.computer/posts/hp712-nextstep-part-2/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23659277</guid>
            <pubDate>Sat, 27 Jun 2020 03:22:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Examining ARM vs. x86 Memory Models with Rust]]>
            </title>
            <description>
<![CDATA[
Score 141 | Comments 34 (<a href="https://news.ycombinator.com/item?id=23659037">thread link</a>) | @redbluemonkey
<br/>
June 26, 2020 | https://www.nickwilcox.com/blog/arm_vs_x86_memory_model/ | <a href="https://web.archive.org/web/*/https://www.nickwilcox.com/blog/arm_vs_x86_memory_model/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section itemprop="text">
        
        <p>With Apple’s recent announcement that they are moving away from Intel X86 CPU’s to their own ARM CPU’s for future laptops and desktops I thought it would be a good time to take a look at the some differences that can affect systems programmers working in Rust.</p>

<p>One of the key areas where ARM CPU’s differ from X86 is their memory model. This article will take a look at what a memory model is and how it can cause code to be correct on one CPU but cause race conditions on another.</p>

<h2 id="memory-models">Memory Models</h2>

<p>The way loads and stores to memory interact between multiple threads on a specific CPU is called that architecture’s Memory Model.</p>

<p>Depending on the memory model of the CPU, multiple writes by one thread may become visible to another thread in a different order to the one they were issued in.</p>

<p>The same is true of a thread issuing multiple reads. A thread issuing multiple reads may receive “snapshots” of global state that represent points in time ordered differently to the order of issue.</p>

<p>Modern hardware needs this flexibility to be able to maximize the throughput of memory operations. While CPU clock rates and core counts have been increasing with each new CPU iteration, memory bandwidth has struggled to keep up. Moving data from memory to operate on is often the bottle neck in the performance of applications.</p>

<p>If you’ve never written multi-threaded code, or only done so using higher level synchronization primitives such as <code>std::sync::Mutex</code>, you’ve probably never been exposed to the details of the memory model. This is because the CPU, despite whatever reordering it’s memory model allows it to perform, always presents a consistent view of memory to the current thread.</p>

<p>If we look at the below snippet of code that writes to memory and then reads the same memory straight back, we will always get the expected value of <code>58</code> back when we read. There is never the case that we’d read some stale value from memory.</p>

<div><div><pre><code><span>pub</span> <span>unsafe</span> <span>fn</span> <span>read_after_write</span><span>(</span><span>u32_ptr</span><span>:</span> <span>*</span><span>mut</span> <span>u32</span><span>)</span> <span>{</span>
    <span>u32_ptr</span><span>.write_volatile</span><span>(</span><span>58</span><span>);</span>
    <span>let</span> <span>u32_value</span> <span>=</span> <span>u32_ptr</span><span>.read_volatile</span><span>();</span>
    <span>println!</span><span>(</span><span>"the value is {}"</span><span>,</span> <span>u32_value</span><span>);</span>
<span>}</span>
</code></pre></div></div>
<p><em>I’m using volatile operations because if I used normal pointer operations the compiler is smart enough to skip the memory read and just prints the value <code>58</code>. 
Volatile operations stop the compiler from reordering or skipping our memory operation. However they have no affect on hardware (or the compiler re-ordering relative to non-volatile memory operations).</em></p>

<p>Once we introduce multiple threads, we’re now exposed to the fact that the CPU may be reordering our memory operations.</p>

<p>We can examine the snippet below in a multi-threaded context:</p>

<div><div><pre><code><span>pub</span> <span>unsafe</span> <span>fn</span> <span>writer</span><span>(</span><span>u32_ptr_1</span><span>:</span> <span>*</span><span>mut</span> <span>u32</span><span>,</span> <span>u32_ptr_2</span><span>:</span> <span>*</span><span>mut</span> <span>u32</span><span>)</span> <span>{</span>
    <span>u32_ptr_1</span><span>.write_volatile</span><span>(</span><span>58</span><span>);</span>
    <span>u32_ptr_2</span><span>.write_volatile</span><span>(</span><span>42</span><span>);</span>
<span>}</span>

<span>pub</span> <span>unsafe</span> <span>fn</span> <span>reader</span><span>(</span><span>u32_ptr_1</span><span>:</span> <span>*</span><span>mut</span> <span>u32</span><span>,</span> <span>u32_ptr_2</span><span>:</span> <span>*</span><span>mut</span> <span>u32</span><span>)</span> <span>-&gt;</span> <span>(</span><span>u32</span><span>,</span> <span>u32</span><span>)</span> <span>{</span>
    <span>(</span><span>u32_ptr_1</span><span>.read_volatile</span><span>(),</span> <span>u32_ptr_2</span><span>.read_volatile</span><span>())</span>
<span>}</span>
</code></pre></div></div>

<p>If we initialize the contents of both pointers to <code>0</code>, and then run each function in a different thread, we can list the possible outcomes for the reader. We know that there is no synchronization, but based on our experience with single threaded code we think the possible return values are <code>(0, 0)</code>, <code>(58, 0)</code> or <code>(58, 42)</code>. But the possibility of hardware reordering of memory writes affecting multi-threads means that there is a fourth option <code>(0, 42)</code>.</p>

<p>You might think there are more possibilities due to the lack of synchronization. But all hardware memory models guarantee that aligned loads and store up to the native word size are atomic (u32 or a 32-bit CPU, u64 on a 64-bit CPU). If we changed one of our writes to <code>0xFFFF_FFFF</code>, the read will only ever see the old value or the new value. It will never see a partial value like <code>0xFFFF_0000</code>.</p>

<p>If the details of the CPU’s memory model are hidden away when using regular memory accesses, it seems like we would have no way to control it in multi-threaded programs where it affects program correctness.</p>

<p>Luckily Rust provides as with the <code>std::sync::atomic</code> module containing types that gives us the control we need. We use these types to specify exactly the memory ordering requirements our code needs. We trade performance for correctness. We place restrictions on what order the hardware can perform memory operations, taking away any bandwidth optimizations the hardware would want to perform.</p>

<p>When working with the <code>atomic</code> module, we don’t worry about the actual memory models of individual CPU architectures. Instead the operation of the <code>atomic</code> module works on an abstract memory model that’s CPU agnostic. Once we’ve expressed our requirements on the loads and stores using this Rust memory model, the compiler does the job of mapping to the memory model of the target CPU.</p>

<p>The requirements we specify on each operation takes the form of what reordering we want to allow (or deny) on the operation. The orderings form a hierarchy, with each level placing more restrictions the CPU. For example <code>Ordering::Relaxed</code> means the CPU is free to perform any reordering it wants. <code>Ordering::Release</code> means that a store can only complete after all proceeding stores have finished.</p>

<p>Let’s look at how atomic memory writes are actually compiled, compared to a regular write.</p>

<div><div><pre><code><span>use</span> <span>std</span><span>::</span><span>sync</span><span>::</span><span>atomic</span><span>::</span><span>*</span><span>;</span>

<span>pub</span> <span>unsafe</span> <span>fn</span> <span>test_write</span><span>(</span><span>shared_ptr</span><span>:</span> <span>*</span><span>mut</span> <span>u32</span><span>)</span> <span>{</span>
    <span>*</span><span>shared_ptr</span> <span>=</span> <span>58</span><span>;</span>
<span>}</span>

<span>pub</span> <span>unsafe</span> <span>fn</span> <span>test_atomic_relaxed</span><span>(</span><span>shared_ptr</span><span>:</span> <span>&amp;</span><span>AtomicU32</span><span>)</span> <span>{</span>
    <span>shared_ptr</span><span>.store</span><span>(</span><span>58</span><span>,</span> <span>Ordering</span><span>::</span><span>Relaxed</span><span>);</span>
<span>}</span>

<span>pub</span> <span>unsafe</span> <span>fn</span> <span>test_atomic_release</span><span>(</span><span>shared_ptr</span><span>:</span> <span>&amp;</span><span>AtomicU32</span><span>)</span> <span>{</span>
    <span>shared_ptr</span><span>.store</span><span>(</span><span>58</span><span>,</span> <span>Ordering</span><span>::</span><span>Release</span><span>);</span>
<span>}</span>

<span>pub</span> <span>unsafe</span> <span>fn</span> <span>test_atomic_consistent</span><span>(</span><span>shared_ptr</span><span>:</span> <span>&amp;</span><span>AtomicU32</span><span>)</span> <span>{</span>
    <span>shared_ptr</span><span>.store</span><span>(</span><span>58</span><span>,</span> <span>Ordering</span><span>::</span><span>SeqCst</span><span>);</span>
<span>}</span>
</code></pre></div></div>

<p>If we look at the <a href="https://godbolt.org/z/uVQM8T">X86 assembly</a> for the above code, we see the first three functions produce identical code. It’s not until the stricter <code>SeqCst</code> ordering that we get a different instruction being produced.</p>

<div><div><pre><code><span>example:</span><span>:</span><span>test_write:</span>
        <span>mov</span>     <span>dword</span> <span>ptr</span> <span>[</span><span>rdi</span><span>],</span> <span>58</span>
        <span>ret</span>

<span>example:</span><span>:</span><span>test_atomic_relaxed:</span>
        <span>mov</span>     <span>dword</span> <span>ptr</span> <span>[</span><span>rdi</span><span>],</span> <span>58</span>
        <span>ret</span>

<span>example:</span><span>:</span><span>test_atomic_release:</span>
        <span>mov</span>     <span>dword</span> <span>ptr</span> <span>[</span><span>rdi</span><span>],</span> <span>58</span>
        <span>ret</span>
        
<span>example:</span><span>:</span><span>test_atomic_consistent:</span>
        <span>mov</span>     <span>eax</span><span>,</span> <span>58</span>
        <span>xchg</span>    <span>dword</span> <span>ptr</span> <span>[</span><span>rdi</span><span>],</span> <span>eax</span>
        <span>ret</span>
</code></pre></div></div>
<p>The first two orderings use the <strong><code>MOV</code></strong> (<strong>MOV</strong>e) instruction to write the value to memory. Only the strictest ordering produces a different instruction, <strong><code>XCHG</code></strong> (atomic e<strong>XCH</strong>an<strong>G</strong>), to a raw pointer write.</p>

<p>We can compare that to the <a href="https://godbolt.org/z/wWQo8P">ARM assembly</a>.</p>

<div><div><pre><code><span>example:</span><span>:</span><span>test_write:</span>
        <span>mov</span>     <span>w8</span><span>,</span> <span>#</span><span>58</span>
        <span>str</span>     <span>w8</span><span>,</span> <span>[</span><span>x0</span><span>]</span>
        <span>ret</span>

<span>example:</span><span>:</span><span>test_atomic_relaxed:</span>
        <span>mov</span>     <span>w8</span><span>,</span> <span>#</span><span>58</span>
        <span>str</span>     <span>w8</span><span>,</span> <span>[</span><span>x0</span><span>]</span>
        <span>ret</span>

<span>example:</span><span>:</span><span>test_atomic_release:</span>
        <span>mov</span>     <span>w8</span><span>,</span> <span>#</span><span>58</span>
        <span>stlr</span>    <span>w8</span><span>,</span> <span>[</span><span>x0</span><span>]</span>
        <span>ret</span>
        
<span>example:</span><span>:</span><span>test_atomic_consistent:</span>
        <span>mov</span>     <span>w8</span><span>,</span> <span>#</span><span>58</span>
        <span>stlr</span>    <span>w8</span><span>,</span> <span>[</span><span>x0</span><span>]</span>
        <span>ret</span>
</code></pre></div></div>

<p>In contrast we can see there is a difference once we hit the release ordering requirement. The raw pointer and relaxed atomic store use <strong><code>STR</code></strong> (<strong>ST</strong>ore <strong>R</strong>egister) while the release and sequential ordering uses the instruction <strong><code>STLR</code></strong> (<strong>ST</strong>ore with re<strong>L</strong>ease <strong>R</strong>egister). <em>The <strong><code>MOV</code></strong> instruction in this disassembly is moving the constant <code>58</code> into a register, it’s not a memory operation.</em></p>

<p>We should be able to see the risk here. The mapping between the theoretical Rust memory model and the X86 memory model is more forgiving to programmer error. It’s possible for us to write code that is wrong with respect to the abstract memory model, but still have it produce the correct assembly code and work correctly on some CPU’s.</p>

<h2 id="writing-a-multi-threaded-program-using-atomic-operations">Writing a Multi-Threaded Program using Atomic Operations</h2>

<p>The program we’ll be exploring builds upon the concept of storing a pointer value being atomic across threads. One thread is going to perform some work using a mutable object it owns. Once it’s finished that work it’s going to publish that work as an immutable shared reference, using an atomic pointer write to both signal the work is complete and allow reading threads to use the data.</p>

<h2 id="the-x86-only-implementation">The X86 Only Implementation</h2>

<p>If we really want to test how forgiving the X86’s memory model is, we can write multi-threaded code that skips any use of the <code>std::sync::atomic</code> module. I want to stress this is not something you should ever actually consider doing. In fact this code has undefined behavior due to not guarding against possible compiler instruction re-ordering (however in Rust 1.44.1 the compiler doesn’t re-order so the code “works”). This is an learning exercise only.</p>

<div><div><pre><code><span>pub</span> <span>struct</span> <span>SynchronisedSum</span> <span>{</span>
    <span>shared</span><span>:</span> <span>UnsafeCell</span><span>&lt;*</span><span>const</span> <span>u32</span><span>&gt;</span><span>,</span>
    <span>samples</span><span>:</span> <span>usize</span><span>,</span>
<span>}</span>

<span>impl</span> <span>SynchronisedSum</span> <span>{</span>
    <span>pub</span> <span>fn</span> <span>new</span><span>(</span><span>samples</span><span>:</span> <span>usize</span><span>)</span> <span>-&gt;</span> <span>Self</span> <span>{</span>
        <span>assert</span><span>!</span><span>(</span><span>samples</span> <span>&lt;</span> <span>(</span><span>u32</span><span>::</span><span>MAX</span> <span>as</span> <span>usize</span><span>));</span>
        <span>Self</span> <span>{</span>
            <span>shared</span><span>:</span> <span>UnsafeCell</span><span>::</span><span>new</span><span>(</span><span>std</span><span>::</span><span>ptr</span><span>::</span><span>null</span><span>()),</span>
            <span>samples</span><span>,</span>
        <span>}</span>
    <span>}</span>

    <span>pub</span> <span>fn</span> <span>generate</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>{</span>
        <span>// do work on data this thread owns</span>
        <span>let</span> <span>data</span><span>:</span> <span>Box</span><span>&lt;</span><span>[</span><span>u32</span><span>]</span><span>&gt;</span> <span>=</span> <span>(</span><span>0</span><span>..</span><span>self</span><span>.samples</span> <span>as</span> <span>u32</span><span>)</span><span>.collect</span><span>();</span>

        <span>// publish to other threads</span>
        <span>let</span> <span>shared_ptr</span> <span>=</span> <span>self</span><span>.shared</span><span>.get</span><span>();</span>
        <span>unsafe</span> <span>{</span>
            <span>shared_ptr</span><span>.write_volatile</span><span>(</span><span>data</span><span>.as_ptr</span><span>());</span>
        <span>}</span>
        <span>std</span><span>::</span><span>mem</span><span>::</span><span>forget</span><span>(</span><span>data</span><span>);</span>
    <span>}</span>

    <span>pub</span> <span>fn</span> <span>calculate</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>expected_sum</span><span>:</span> <span>u32</span><span>)</span> <span>{</span>
        <span>loop</span> <span>{</span>            
            <span>// check if the work has been published yet</span>
            <span>let</span> <span>shared_ptr</span> <span>=</span> <span>self</span><span>.shared</span><span>.get</span><span>();</span>
            <span>let</span> <span>data_ptr</span> <span>=</span> <span>unsafe</span> <span>{</span> <span>shared_ptr</span><span>.read_volatile</span><span>()</span> <span>};</span>
            <span>if</span> <span>!</span><span>data_ptr</span><span>.is_null</span><span>()</span> <span>{</span>
                <span>// the data is now accessible by multiple threads, treat it as an immutable reference.</span>
                <span>let</span> <span>data</span> <span>=</span> <span>unsafe</span> <span>{</span> <span>std</span><span>::</span><span>slice</span><span>::</span><span>from_raw_parts</span><span>(</span><span>data_ptr</span><span>,</span> <span>self</span><span>.samples</span><span>)</span> <span>};</span>
                <span>let</span> <span>mut</span> <span>sum</span> <span>=</span> <span>0</span><span>;</span>
                <span>for</span> <span>i</span> <span>in</span> <span>(</span><span>0</span><span>..</span><span>self</span><span>.samples</span><span>)</span><span>.rev</span><span>()</span> <span>{</span>
                    <span>sum</span> <span>+=</span> <span>data</span><span>[</span><span>i</span><span>];</span>
                <span>}</span>

                <span>// did we access the data we expected?</span>
                <span>assert_eq!</span><span>(</span><span>sum</span><span>,</span> <span>expected_sum</span><span>);</span>
                <span>break</span><span>;</span>
            <span>}</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>The function that calculates the sum of the array starts by executing a loop that reads the …</p></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.nickwilcox.com/blog/arm_vs_x86_memory_model/">https://www.nickwilcox.com/blog/arm_vs_x86_memory_model/</a></em></p>]]>
            </description>
            <link>https://www.nickwilcox.com/blog/arm_vs_x86_memory_model/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23659037</guid>
            <pubDate>Sat, 27 Jun 2020 02:26:45 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Xbox Architecture]]>
            </title>
            <description>
<![CDATA[
Score 189 | Comments 64 (<a href="https://news.ycombinator.com/item?id=23657231">thread link</a>) | @timeoperator
<br/>
June 26, 2020 | https://www.copetti.org/projects/consoles/xbox/ | <a href="https://web.archive.org/web/*/https://www.copetti.org/projects/consoles/xbox/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div class="page"><nav id="navbar"></nav><hr><h2 id="a-quick-introduction">A quick introduction</h2><p>It seems that Microsoft has decided to pick up where Sega left off. Their offer? A system with familiarities appreciated by developers and online services welcomed by users.</p><p>Please note that, due to consistency with other sources, this article separates storage units between the metric prefix (i.e. megabytes or ‘MB’) and the standardised binary prefix (i.e. mebibytes or ‘MiB’), thus:</p><ul><li>1 MB = 1000 KB</li><li>1 MiB = 1024 KiB</li></ul><p>… and so forth.</p><hr><h2 id="cpu">CPU</h2><p>The processor included in this console is a slightly customised version of the famous <strong>Intel Pentium III</strong> (an off-the-shelf CPU for computers) running at <strong>733 MHz</strong>. With this, one can assume this console is just a PC behind the scenes… I won’t tell you the answer, but I promise that at the end of the article you will be able to reach your own conclusion.</p><p>Anyhow, Pentiums, along with other lines of CPUs designed and manufactured by Intel, were incredibly popular in the computer market. Such was Intel’s market share that they became the de-facto reference point for quality: As a typical user, if you wanted a good computer and had the budget, you only had to look for <em>something</em> carrying an Intel CPU. We all know by now that there are more factors involved, but that’s what the marketing guys at Intel managed to project.</p><h4 id="technical-information">Technical information</h4><p>Now that we positioned Intel in the map, let’s go back to the topic of this console. During my research, I was expecting to find documentation with the level of depth as other CPUs (MIPS, SuperH, ARM, etc), but instead, I stumbled across an excessive amount of marketing terms that only diverted my search. So, for this article, I came up with a structure to organise all the necessary information which will help to understand how this CPU works. Furthermore, I will try to introduce some terminology that Intel used to brand this CPU.</p><p>Having said that, let us take a look:</p><div><ul><li id="tab-1-1-branding-link"><a href="#tab-1-1-branding">Branding</a></li><li id="tab-1-2-the-isa-link"><a href="#tab-1-2-the-isa">The ISA</a></li><li id="tab-1-3-the-microarchitecture-link"><a href="#tab-1-3-the-microarchitecture">The Microarchitecture</a></li><li id="tab-1-4-cisc-or-risc-link"><a href="#tab-1-4-cisc-or-risc">CISC or RISC</a></li><li id="tab-1-5-the-core-link"><a href="#tab-1-5-the-core">The Core</a></li></ul><div><div id="tab-1-1-branding"><h4>Branding</h4><div><a href="https://www.copetti.org/images/consoles/xbox/cpu/branding.113be6f183d200764d7cfc590548c60fe637af1411fccff6cb274c99c9a5fa28.png"><picture>
<img name="image_cover" alt="Image" src="https://www.copetti.org/images/consoles/xbox/cpu/branding.113be6f183d200764d7cfc590548c60fe637af1411fccff6cb274c99c9a5fa28.png" data-src="https://www.copetti.org/images/consoles/xbox/cpu/branding.113be6f183d200764d7cfc590548c60fe637af1411fccff6cb274c99c9a5fa28.png"></picture></a><figcaption>How is this study organised</figcaption></div><p>First things first, the Xbox’s CPU is identified as a <strong>Pentium III</strong>. So what does this mean? Back then (early 00s), the Pentium series represented the next-generation of CPUs. They were ‘new high-end’ that grouped all the fancy technology that made computers super-fast, plus it helped buyers decide which CPU they had to buy if they wanted <em>the best of the best</em>.</p><p>The Pentium III replaced Pentium II, which in turn replaced the original Pentium. Moreover, when the first Pentium came out, it replaced the 80486, which in turn replaced the 80386… You get the idea. What matters is that ‘Pentium’ is mainly a brand name, it’s not directly associated with its inner workings. Therefore, we must go deeper!</p><p>To dive further and not get lost in the way, I have catalogued the information into three sections which combined, make up the chip. The first the <strong>Instruction Set Architecture</strong> or ‘ISA’ (the group of instructions used to command the CPU), <strong>Microarchitecture</strong> (how is the ISA implemented in silicon) and the <strong>Core</strong> (what set of components are used to package the microarchitecture to form the specific CPU model).</p></div><div id="tab-1-2-the-isa"><h4>The ISA</h4><p>Indeed, after I mentioned the name Intel it was a matter of time before I introduce the famous <strong>x86</strong>, its instruction set.</p><p>Even though x86 first appeared with the release of the 16-bit CPU called <strong>Intel 8086</strong> in 1978, the ISA has been constantly expanded with more instructions as more Intel CPUs were released (80186, 80286 and so on). Consequently, x86 started to fragment as more ground-breaking features were added (i.e. ‘real mode’, vs ‘protected mode’ vs ‘long mode’). To tackle this, modern x86 applications commonly targeted the 80386 ISA (also referred as <strong>IA-32</strong> or <strong>i386</strong>) as a baseline, which among other things, operates in a 32-bit environment.</p><p>Subsequently, Intel presented enhancements of IA-32 in the form of <strong>extensions</strong>, meaning these may or may not be included in an IA-32 CPU. Programs can query the CPU to check if a specific enhancement is present. The Xbox’s CPU includes two extensions:</p><ul><li><strong>MMX</strong> (Multimedia Extension): Adds 57 SIMD instructions and 8 64-bit registers (integers only) that can speed up vector operations.</li><li><strong>SSE</strong> (Streaming SIMD extension): Another SIMD-type extension which addresses some of the limitations of MMX (lack of floating-point support and unable to use floating-point unit in parallel). It adds 8 128-bit registers (called ‘XMM’) that hold four 32-bit floats; and 56 new instructions.</li></ul><p>Good news is that since the console will always have the same CPU features, programmers can optimise their code to exploit these extensions as they will always be present.</p></div><div id="tab-1-3-the-microarchitecture"><h4>The Microarchitecture</h4><p>When it comes to building a circuit that can interpret x86 instructions, Intel has come up with so many different designs for their CPUs. Some designs were featured with the release of a new Pentium Series (i.e. Pentium 4) while others are featured when Intel releases an ‘enhanced’ version of a Pentium (such as the ‘Pentium Pro’). Nevertheless, since the release of the first Pentium, the microarchitecture is identified with a different name from the CPU model. For example, the original Pentium includes the ‘P5’ microarchitecture.</p><p>Now, the Xbox CPU, along with the rest of Pentium III processors, use the <strong>P6 Microarchitecture</strong> (also known as ‘i686’). This is the 6th generation (counting from the 8086) which features:</p><ul><li>A <em>massive</em> <strong>14-stage pipeline</strong>.</li><li><strong>Out-of-order execution</strong>: If possible, the CPU re-orders the sequence of instructions to increase efficiency and performance.</li><li><strong>Speculative prediction</strong>: Similar to <a href="https://www.copetti.org/projects/consoles/gamecube/#features">branch prediction</a>, but it also executes the branch that the CPU has predicted it will be chosen.</li></ul><p>Having said that, take a closer look at these features. It so happens they are very similar to <a href="https://www.copetti.org/projects/consoles/gamecube/#features">previous consoles</a>, however, the other CPUs are very different in terms of design compared to Intel ones. Historically, one could argue that Intel could have never been able to accomplish, let’s say, a pipelined CPU. Yet they managed to do so, so let us see why…</p></div><div id="tab-1-4-cisc-or-risc"><h4>CISC or RISC</h4><p>All of the competitor’s consoles previously analysed contain a <strong>RISC</strong> CPU whereas Intel’s x86 ones are <strong>CISC</strong>. RISC CPUs are known for having a simplified instruction set compared to CISC CPUs. This includes, for instance, not featuring instructions that operate values directly from memory (as opposed to registers).</p><p>One of the advantages of RISC processors is that their simplistic approach enables its CPUs to be designed with a modular sense, which in turn can be exploited to improve performance with parallelism techniques. This is why we have seen CPUs like MIPS and PowerPC debuting pipelining, superscalar, out-of-order, branch prediction, etc. On the other side, ‘CISC’ processors were design many years before the RISC processors appeared and aimed to solve different needs. Consequently, their designs are not as flexible as RISC ones.</p><p>Back to the original question, the P6 is an interesting design, because while the CPU only understands a CISC instruction set (x86), it interprets the ISA using <strong>microcode</strong> (called ‘micro-operations’) and the unit that executes that code is built around the guidelines of RISC. All in all, this allows Intel to apply the optimisations of RISC processors while keeping a ‘CISC layer’ for compatibility with x86.</p><p>Microcode is already embedded in the silicon but it can be patched, allowing Intel to fix its CPUs after production whenever a bug or a security vulnerability is discovered. If you have read previous articles (i.e. N64 or PS2), bear in mind that Intel’s microcode is <strong>not publicly accessible</strong> (let alone documented) and Intel is its solely ‘maintainer’.</p></div><div id="tab-1-5-the-core"><h4>The Core</h4><div><a href="https://www.copetti.org/images/consoles/xbox/cpu/core.63696b1d55e579495cbbb6e42a5ee66fe0ce7fee34e107f74c750a34546c309a.png"><picture>
<img name="image_cover" alt="Image" src="https://www.copetti.org/images/consoles/xbox/cpu/core.63696b1d55e579495cbbb6e42a5ee66fe0ce7fee34e107f74c750a34546c309a.png" data-src="https://www.copetti.org/images/consoles/xbox/cpu/core.63696b1d55e579495cbbb6e42a5ee66fe0ce7fee34e107f74c750a34546c309a.png"></picture></a><figcaption>Coppermine design</figcaption></div><p>There were numerous chips released using the P6 microarchitecture. Specifically, the Xbox includes one model called <strong>Coppermine</strong>. This was also released as the second revision of the Pentium III (replacing the ‘Katmai’ core) and includes the following components:</p><ul><li><strong>32 KiB L1</strong> cache: Divided between 16 KiB for instructions and 16 KiB for data.</li><li>Integrated <strong>128 KiB L2</strong> cache: This is <em>odd</em> since the off-the-shelf Coppermine has 256 KiB of L2. In fact, the Coppermine128 (found in the Intel ‘Celeron’ brand, the low-end Pentium alternative) has the same amount of L2. This is probably done to reduce manufacturing costs, and keep this console at a competitive price.</li><li>133 MHz <strong>Front-side bus</strong>: This is the bus that connects the L2 cache with the memory controller, we’ll see more about it later on.<ul><li>Intel names it ‘Front-side bus’ to distinguish it from another bus which connects the L2 (external cache) with the L1 (internal cache). The latter bus is called ‘Back-side bus’ and yes… It’s an unfortunate name to use from the UK.</li></ul></li></ul><p>Coppermine also features two ‘enhancements’ over their original implementation of L2 cache, these are the <strong>Advanced Transfer Cache</strong> and the <strong>Advanced System Buffering</strong>. To sum them up, L2 cache is on-chip and their buses are wider, which help to reduce possible bottlenecks found in the Front-side bus.</p><p>Finally, the chip uses the ‘Micro-PGA2’ socket to connect it to the motherboard, but like any other console, the Xbox has it soldered with a Ball Grid Array or ‘BGA’.</p></div></div></div><h4 id="p6-and-the-end-of-pentium-numbers">P6 and the end of Pentium numbers</h4><p>Here’s a bit more history: After the years of the P6, Intel planned to succeed it with the ‘Netburst’ microarchitecture (featured in the Pentium IV). However, the line of succession also ended there: The microarchitecture couldn’t be improved anymore. This prompted an Intel team in Israel to revisit the old P6 and develop a more efficient successor. The result was <strong>Pentium M</strong>, eventually extended to form the <strong>Core</strong> microarchitecture (and brand). ‘Core’ is the basis of present designs.</p><h4 id="motherboard-architecture">Motherboard architecture</h4><p>At some point in the history of the PC, motherboards grew so much in complexity that new designs had to be developed from the ground up to efficiently tackle new emerging needs.</p><div><div><a href="https://www.copetti.org/images/consoles/xbox/cpu/motherboard.8ddd164202ef59296b376029d383dac1a91e08eea715a6596e1eefe61af1a160.png"><picture>
<img name="image_cover" alt="Image" src="https://www.copetti.org/images/consoles/xbox/cpu/motherboard.8ddd164202ef59296b376029d383dac1a91e08eea715a6596e1eefe61af1a160.png" data-src="https://www.copetti.org/images/consoles/xbox/cpu/motherboard.8ddd164202ef59296b376029d383dac1a91e08eea715a6596e1eefe61af1a160.png"></picture></a><figcaption>Overview of Xbox Motherboard</figcaption></div><p>The new standard developed relied on two dedicated chips to handle most of the motherboard functions. These chips are:</p><ul><li>The <strong>Northbridge</strong>: Serves as a memory controller and interfaces the GPU.</li><li>Th…</li></ul></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.copetti.org/projects/consoles/xbox/">https://www.copetti.org/projects/consoles/xbox/</a></em></p>]]>
            </description>
            <link>https://www.copetti.org/projects/consoles/xbox/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23657231</guid>
            <pubDate>Fri, 26 Jun 2020 21:25:23 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Building AI Trading Systems]]>
            </title>
            <description>
<![CDATA[
Score 171 | Comments 83 (<a href="https://news.ycombinator.com/item?id=23656369">thread link</a>) | @dennybritz
<br/>
June 26, 2020 | https://dennybritz.com/blog/ai-trading/ | <a href="https://web.archive.org/web/*/https://dennybritz.com/blog/ai-trading/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>Lessons learned building a profitable algorithmic trading system using Reinforcement Learning techniques.</p><div id="post-content"><p>About two years ago I wrote a <a href="http://www.wildml.com/2018/02/introduction-to-learning-to-trade-with-reinforcement-learning/">little piece</a> about applying Reinforcement Learning to the markets. It was a project I had worked on for a while in various forms. A few people asked me what became of it. So this post covers some high-level things I've learned. It's more of a rant than an organized post, really. If there is enough interest in this topic I'd be happy to go into more technical detail in future posts, but that's TBD. Please let me know in the comments or on <a href="https://twitter.com/dennybritz">Twitter</a>.</p> <p>Over the past few years I've built around four and a half trading systems. The first one was a pile of crap. The second one I never finished because I realized early on that it was also a pile of crap. The third one was abandoned for personal and political reasons. The fourth one worked extremely well for 12-18 months. Then, profits started decreasing and I decided to move on to other things and I lacked the motivation to go back into it. Some of the systems I worked on were for the financial markets, but the last one was applied to the crypto markets. So keep that in mind while reading.</p>  <p>If you've taken some economics classes your first thought is perhaps something like</p> <blockquote> <p>Ha, newbie! Efficient Market Hypothesis! E!M!H! You can't beat the market! It's all just luck!</p> </blockquote> <p>And I would say that most economic theories like the EMH are so far removed from the real world that they don't matter. This doesn't necessarily mean they're wrong. They are interesting academic models that can be useful in certain contexts, like for writing papers or getting prizes. But they don't survive confrontations with a messy real world and emotional human beings. If you have no idea what the Efficient Market Hypothesis says then you are in luck - sometimes ignorance truly is bliss. I won't get into it here because you can find <a href="https://www.youtube.com/watch?v=bM9bYOBuKF4">smarter people</a> arguing about this. Suffice to say, I strongly believe and have seen myself that you can build profitable systems that consistently beat the market. Will the market eventually adjust to take away that opportunity? Probably, but that's irrelevant, because the market may take months, years or decades to adjust (just look at HFT), and you are free to evolve your system over time, looking for new opportunities and adjusting to the adjusting market yourself. That was the case for me. The market seemed to have adjusted to my system as profits started decreasing, but it took more than 12 months, and with the right motivation I probably could have adjusted and improved the system to work again.</p> <p>Rather than thinking about markets from an economics perspective, I prefer to think about them from a Game Theory or Reinforcement Learning perspective. <strong><strong>The market does not exist.</strong></strong> What people call the market is an emergent property of many agents acting in an environment trying to maximize their own objective. The objective may be slightly different for everyone. Some want to sell shares they obtained through a stock options plan at a good price. Some engage in arbitrage for quick profits. Some try to predict short-term movements based on news or charting patterns. Some engage long-term speculation based on fundamentals. Some are designated market makers providing liquidity for a specific asset or exchange in return for a fee. Each could be a human acting on gut feeling and emotion, a human following some kind of implicit fuzzy algorithm (e.g. charting), or an automated system acting on data. The combined behavior of all these agents gives rise to this illusive thing that people call <em>the market</em>. Your goal isn't to beat the market, it's to beat some of the other players in the market over a time horizon you care about. The time horizon part is important. Not every trade has a clear winner and loser, because agents are optimizing over different time horizons, ranging from microseconds to decades.</p>  <p>If you come from a tech or startup background, transitioning to trading may require a change in thinking. Products and engineering are often about <strong><strong>absolutes</strong></strong>. If your website takes 100ms to load that's pretty good. Making it load in 99ms provides negligible benefit to the end-user. It'd be a waste of engineering resources. The same is true for startups. Paul Graham likes to say that startups are rarely killed by competitors. Rather, they commit suicide. They fail because they cannot find customers, don't have a solid business model, or because of founder issues. Being killed by competition with a slightly better product is quite rare.</p> <p>Trading is different. It's about <strong><strong>relatives</strong></strong>. It's fine if your website takes a horrible 10 seconds to load if your competitor needs 11 seconds. Having crappy data is fine if everyone else's data is even crappier. Paying high trading fees is fine if everyone is paying the same. This is pretty obvious if you look at the market as a multiplayer game. Even if you're a bad player on an absolute scale, you can win if your competition is worse. This has direct effects on how you build software to trade in the markets.</p>  <p>What a focus on relative performance means for engineering can be quite counterintuitive.</p> <p>When building infrastructure for a product-based company you would prefer using battle-tested, robust frameworks that minimize risk. Why re-invent the wheel if someone else has already built it? It's safe to use something that has been adopted by thousands of people. This is where open source shines. Using AWS for hosting your server? Postgres for storing your data? JSON for serialization? Python or Node for data collection? An open source library for calling APIs? Download Keras and train a NN on your data? Reasonable ideas, but when you are building trading infrastructure, you should think twice about these.</p> <p>Widely adopted technologies are commodities. If you use the same technologies as everyone else, where will your advantage come from? When building a product this doesn't matter because it's about absolute SLAs. But trading is about relatives. <strong><strong>Each commoditized technology you can specialize and build yourself is an opportunity</strong></strong> to beat the competition. By being hybrid cloud you can reduce latencies. By storing data in an efficient binary format you can save serialization time, leading to faster iteration during development, and faster predictions in production. By creating custom integrations with exchanges instead of using off-the-shelf APIs you may be able to use specific order types that are not available to others, or gain an informational advantage by processing exchange-specific information. And so on. Building highly-specialized non-generic systems is what engineers hate. We love generalization and abstraction. But specialization is often where your advantage in trading comes from.</p> <p>You don't need to start from scratch and implement your own programming language to start trading. But you should be aware of the tradeoffs you are making when adopting commoditized technologies. Make conscious decisions about it. Some of the things above seem minor - but a large number of tiny advantages can add up to a significant edge.</p>  <p>You may say, well, this makes sense, but I really don't want to compete on the infrastructure side. Instead, I want to build a smarter model that makes better predictions. That's my edge! I've heard this a LOT, and I've never seen it work.</p> <p>AI is pretty commoditized. I would say it's more commoditized than excellent infrastructure engineering, data collection, or inductive biases from domain knowledge. These days, you can easily download state-of-the-art models and run them on your data. Unless you are at the forefront of some extremely relevant research, it's unlikely that you can gain a significant edge just from training a better model.</p> <p>When people realize that their fancy AI model built on crappy infrastructure trained with crappy data (that's also used by everyone else) doesn't work, they give up. AI can give you an edge, but not an edge so huge that it allows you to ignore other factors. You still need to build good infrastructure, get good data, have decent latencies, and so on. Few people seem to be willing to spend time on these unsexy things. Think of each as a multiplier. If one is close to zero, it doesn't matter how good your AI model is.</p> <p>So, what are some these other things?</p> <ul> <li><strong><strong>Market</strong></strong> - Pick the right market(s) to trade in. Don't go for the obvious choices that everyone is picking by default. The harder it is to get access to a market, both legally and technically, the more likely that you will find opportunities. Less liquid markets may be overlooked by sophisticated funds because they don't scale to their AUM. Again, this is often counterintuitive to engineers who go for "good APIs" - good APIs typically mean popular. Popular typically means commoditized.</li> <li><strong><strong>Data</strong></strong> - Think about data sources that others do not have access to, or are not willing to get. For example, there may be data that's difficult to crawl due to sophisticated rate restrictions IP bans. Most people will give up here. This is an opportunity for you. Be skeptical of popular APIs and open source software. It's the same data that everyone else uses.</li> <li><strong><strong>Latencies</strong></strong> - You're probably not planning to compete with HFT traders (bad idea), but that doesn't mean you can completely ignore latencies. Better latencies will probably lead to easier execution with less slippage. Be careful about where you host your systems, how you send data around, how you serialize data, and so on.</li> <li><strong><strong>Models</strong></strong> - In general, better data is more important than better models, but better models can also give you an edge. Note that you are often trading off model complexity with latencies.</li> <li><strong><strong>Execution</strong></strong> - A good model doesn't mean much if you can't execute. Historical data you collect may look quite different from what's actually happening on the exchange. You are not going to know until you start live trading.</li> </ul>  <p>More than two years after my <a href="http://www.wildml.com/2018/02/introduction-to-learning-to-trade-with-reinforcement-learning/">last post</a>, do I still believe that …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://dennybritz.com/blog/ai-trading/">https://dennybritz.com/blog/ai-trading/</a></em></p>]]>
            </description>
            <link>https://dennybritz.com/blog/ai-trading/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23656369</guid>
            <pubDate>Fri, 26 Jun 2020 20:06:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Micronaut 2.0: a full stack Java framework for modular, testable applications]]>
            </title>
            <description>
<![CDATA[
Score 90 | Comments 52 (<a href="https://news.ycombinator.com/item?id=23653601">thread link</a>) | @el_duderino
<br/>
June 26, 2020 | https://docs.micronaut.io/2.0.0/guide/index.html | <a href="https://web.archive.org/web/*/https://docs.micronaut.io/2.0.0/guide/index.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div>
        
        
        <p>Natively Cloud Native</p>
        <p><strong>Version:</strong> </p>
    </div>
    





<p>Micronaut is a modern, JVM-based, full stack Java framework designed for building modular, easily testable JVM applications with support for Java, Kotlin and the Groovy language.</p>
<p>Micronaut is developed by the creators of the Grails framework and takes inspiration from lessons learnt over the years building real-world applications from monoliths to microservices using Spring, Spring Boot and Grails.</p>
<p>Micronaut aims to provide all the tools necessary to build JVM applications including:</p>
<div>
<ul>
<li>
<p>Dependency Injection and Inversion of Control (IoC)</p>
</li>
<li>
<p>Aspect Oriented Programming (AOP)</p>
</li>
<li>
<p>Sensible Defaults and Auto-Configuration</p>
</li>
</ul>
</div>
<p>With Micronaut you can build Message-Driven Applications, Command Line Applications, HTTP Servers and more whilst for Microservices in particular Micronaut also provides:</p>
<div>
<ul>
<li>
<p>Distributed Configuration</p>
</li>
<li>
<p>Service Discovery</p>
</li>
<li>
<p>HTTP Routing</p>
</li>
<li>
<p>Client-Side Load Balancing</p>
</li>
</ul>
</div>
<p>At the same time Micronaut aims to avoid the downsides of frameworks like Spring, Spring Boot and Grails by providing:</p>
<div>
<ul>
<li>
<p>Fast startup time</p>
</li>
<li>
<p>Reduced memory footprint</p>
</li>
<li>
<p>Minimal use of reflection</p>
</li>
<li>
<p>Minimal use of proxies</p>
</li>
<li>
<p>No runtime bytecode generation</p>
</li>
<li>
<p>Easy Unit Testing</p>
</li>
</ul>
</div>
<p>Historically, frameworks such as Spring and Grails were not designed to run in scenarios such as server-less functions, Android apps, or low memory-footprint microservices. In contrast, Micronaut is designed to be suitable for all of these scenarios.</p>
<p>This goal is achieved through the use of Java’s <a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/processing/Processor.html">annotation processors</a>, which are usable on any JVM language that supports them, as well as an HTTP Server and Client built on <a href="https://netty.io/">Netty</a>. In order to provide a similar programming model to Spring and Grails, these annotation processors precompile the necessary metadata in order to perform DI, define AOP proxies and configure your application to run in a low-memory environment.</p>
<p>Many of the APIs within Micronaut are heavily inspired by Spring and Grails. This is by design, and aids in bringing developers up to speed quickly.</p>

<h2 id="whatsNew"><a href="#whatsNew"></a>1.1 What's New?</h2>




<p>Micronaut 2.0.0 includes the following changes:</p>
<div>
<h3 id="_core_features">Core Features</h3>
<div>
<h4 id="_support_for_jdk_14">Support for JDK 14</h4>
<p>Micronaut has been updated to support JDK 14.</p>
</div>
<div>
<h4 id="_groovy_3">Groovy 3</h4>
<p>Micronaut now supports applications written in Groovy 3.</p>
</div>
<div>
<h4 id="_startup_performance_improvements">Startup Performance Improvements</h4>
<p>Startup time has been further improved in this release with typical startup time for a new application around 20% faster.</p>
</div>
<div>
<h4 id="_improvements_to_bean_introspections">Improvements to Bean Introspections</h4>
<p>Bean introspections have been improved to support static creator methods, interfaces and enums. This means you can define a bean introspection on an interface with a private implementation such as:</p>
<div>
<p>Introspections on interfaces</p>
<div>
<pre><code data-lang="java">import io.micronaut.core.annotation.Creator;

@io.micronaut.core.annotation.Introspected
interface Example {
    String getName();

    @Creator
    static Example create(String name) {
        return () -&gt; name;
    }
}</code></pre>
</div>
</div>
</div>
<div>
<h4 id="_support_for_analyzing_the_injection_point">Support for Analyzing the Injection Point</h4>
<p>Micronaut’s Dependency Injection implementation has been improved such that you can now receive an <a href="https://docs.micronaut.io/2.0.0/api/io/micronaut/inject/InjectionPoint.html">InjectionPoint</a> instance to any <a href="https://docs.micronaut.io/2.0.0/api/io/micronaut/context/annotation/Factory.html">@Factory</a> method. This makes it possible to customize how the bean is created based on the annotation metadata at the point at which the bean is injected.</p>
<p>For example consider the following definition:</p>
<div>
<div>
<pre><code data-lang="java">@Inject @Client("http://foo.com") RxHttpClient client;</code></pre>
</div>
</div>
<p>A factory method can receive the injection point and create a client based off of the value:</p>
<div>
<div>
<pre><code data-lang="java">@Bean
protected DefaultHttpClient httpClient(InjectionPoint&lt;?&gt; injectionPoint) {
    String url = metadata.stringValue(Client.class).orElse(null);
    if (url != null) {
        return new DefaultHttpClient(url);
    } else {
        return new DefaultHttpClient();
    }
}</code></pre>
</div>
</div>
</div>
<div>
<h4 id="_support_for_eager_initialization_of_beans">Support for Eager Initialization of Beans</h4>
<p>Eager initialization of beans is useful in certain cases, such as on AWS Lambda where more CPU resources are assigned to Lamdba construction than execution. Therefore as for Micronaut 2.0, you can specify whether you want to eager initialization configuration or all singletons using the <a href="https://docs.micronaut.io/2.0.0/api/io/micronaut/context/ApplicationContextBuilder.html">ApplicationContextBuilder</a> interface:</p>
<div>
<p>Enabling Eager Initialization</p>
<div>
<pre><code data-lang="java">public class Application {

    public static void main(String[] args) {
        Micronaut.build(args)
            .eagerInitSingletons(true) <i data-value="1"></i><b>(1)</b>
            .mainClass(Application.class)
            .start();
    }
}</code></pre>
</div>
</div>
<div>
<table>
<tbody><tr>
<td><i data-value="1"></i><b>1</b></td>
<td>Setting eager init to true initializes all singletons</td>
</tr>
</tbody></table>
</div>
<p>It is also possible to just eager init configuration using <code>eagerInitConfiguration</code> which will initialize all <a href="https://docs.micronaut.io/2.0.0/api/io/micronaut/context/annotation/ConfigurationProperties.html">@ConfigurationProperties</a> beans.</p>
</div>
<div>
<h4 id="_spot_bugs_instead_of_jsr_305_nullable_nonnull_annotations">Spot Bugs Instead of JSR-305 Nullable/NonNull Annotations</h4>
<p>In Micronaut 1.x the Google distributed JSR-305 annotations library (<code>com.google.code.findbugs:jsr305</code>) was used to specify <code>@Nullable</code> and <code>@NonNull</code> on interfaces of the Micronaut API using the annotations contained within the <code>javax.annotation</code> package.</p>
<p>Due to the fact that JSR-305 has been cancelled and that this dependency has potential licensing issues (by using the <code>javax</code> namespace) as well as problems with the cross packages on Java 9+ with the module system Micronaut 2.x switches to the <code>spotbugs-annotations</code> module provided by the <a href="https://spotbugs.github.io/">SpotBugs project</a>.</p>
<p>It is recommended users of Micronaut use this API instead (although the <code>javax.annotation.Nullable</code> and <code>javax.annotation.NotNull</code> annotations continue to be supported).</p>
</div>
</div>
<div>
<h3 id="_cli_features">CLI Features</h3>

<div>
<h4 id="_micronaut_launch">Micronaut Launch</h4>
<p>Create Micronaut 2.0 applications without having the CLI installed using <code>curl</code>:</p>
<div>
<div>
<pre><code data-lang="bash">$ curl https://launch.micronaut.io/demo.zip -o demo.zip
$ unzip demo.zip -d demo</code></pre>
</div>
</div>


</div>
<div>
<h4 id="_diff_command">Diff Command</h4>
<p>Run <code>mn feature-diff --features=[FEATURE NAME]</code> from the root of another Micronaut project to create a diff of the changes that need to be applied to enable the feature. For example:</p>
<div>
<p>Using <code>feature-diff</code></p>
<div>
<pre><code data-lang="bash">$ mn feature-diff --features=azure-function
--- micronaut-cli.yml
+++ micronaut-cli.yml
@@ -3,4 +3,4 @@
 testFramework: junit
 sourceLanguage: java
 buildTool: gradle
-features: [app-name, application, gradle, http-client, java, junit, logback, netty-server, shade, yaml]
+features: [app-name, application, azure-function, azure-function-http, gradle, java, junit, logback, yaml]


--- host.json
+++ host.json
@@ -1,0 +1,7 @@
+{
+  "version": "2.0",
+  "extensionBundle": {
+    "id": "Microsoft.Azure.Functions.ExtensionBundle",
+    "version": "[1.*, 2.0.0)"
+  }
+}</code></pre>
</div>
</div>
</div>
</div>
<div>
<h3 id="_graalvm_improvements">GraalVM Improvements</h3>
<p>Micronaut’s support for GraalVM Native Image has been moved out of experimental status, which solidifies our commitment to continue improving support for native images.</p>
<div>
<h4 id="_automatic_static_resource_detection_for_native_image">Automatic Static Resource Detection for Native Image</h4>
<p>It is not longer necessary to configure static resources for your Native Immage builds. The <code>micronaut-graal</code> annotation processor will automatically do this for you for all resources found in <code>src/main/resources</code>.</p>
</div>
<div>
<h4 id="_improved_support_for_jdbc_hibernate_in_native_image">Improved support for JDBC / Hibernate in Native Image</h4>
<p>It is no longer necessary to provide additional GraalVM related configuration to connect to databases via JDBC or Hibernate/JPA. Micronaut includes automatic support for the following drivers with GraalVM Native Image:</p>
<div>
<ul>
<li>
<p>Oracle</p>
</li>
<li>
<p>MariaDB</p>
</li>
<li>
<p>Postgres</p>
</li>
<li>
<p>MS SQL</p>
</li>
<li>
<p>H2</p>
</li>
<li>
<p>MySQL</p>
</li>
</ul>
</div>
</div>
<div>
<h4 id="_support_for_flyway_migrations_in_native_image">Support for Flyway Migrations in Native Image</h4>

</div>
<div>
<h4 id="_support_for_native_image_in_aws_sdk_v2">Support for Native Image in AWS SDK v2</h4>
<p>Version 2.0 of the Micronaut AWS module <a href="https://micronaut-projects.github.io/micronaut-aws/2.0.x/guide/index.html#sdkv2">includes support for Native Image</a> for the majority of the v2 AWS APIs including S3, Dynamo DB, SES, SNS, and SQS which will be helpful for those developing native AWS Lambda functions with Micronaut + GraalVM.</p>
</div>
<div>
<h4 id="_support_for_jooq_in_native_image">Support for jOOQ in Native Image</h4>

</div>
<div>
<h4 id="_support_for_redis_in_native_image">Support for Redis in Native Image</h4>
<p>The Micronaut Redis module <a href="https://micronaut-projects.github.io/micronaut-redis/latest/guide/index.html#graalvm">includes support for Native Image</a>. There are still some pending uses cases that won’t work because of how Lettuce driver works. Make sure you read the documentation.</p>
</div>
<div>
<h4 id="_support_for_elasticsearch_in_native_image">Support for Elasticsearch in Native Image</h4>

</div>
</div>
<div>
<h3 id="_build_improvements">Build Improvements</h3>
<div>
<h4 id="_new_maven_parent_pom">New Maven Parent POM</h4>
<p>Micronaut now provides a new parent POM that can be used in Maven projects to get setup quickly:</p>
<div>
<p>Using the Maven Parent POM</p>
<div>
<pre><code data-lang="xml">&lt;parent&gt;
    &lt;groupId&gt;io.micronaut&lt;/groupId&gt;
    &lt;artifactId&gt;micronaut-parent&lt;/artifactId&gt;
    &lt;version&gt;${micronaut.version}&lt;/version&gt;
&lt;/parent&gt;</code></pre>
</div>
</div>
</div>
<div>
<h4 id="_new_maven_plugin">New Maven Plugin</h4>
<p>The parent POM mentioned above includes a new Micronaut Maven Plugin that enables automatic application restart during development. Just run the following:</p>

<p>Whenever you make a change to a class file the server will restart automatically.</p>
</div>
<div>
<h4 id="_gradle_6_5_update">Gradle 6.5 Update</h4>
<p>For Gradle users who create new applications Gradle 6.5 is used which is compatible with JDK 14.</p>
</div>
<div>
<h4 id="_better_gradle_incremental_annotation_processing_support">Better Gradle Incremental Annotation Processing Support</h4>

</div>
</div>
<div>
<h3 id="_http_features">HTTP Features</h3>
<div>
<h4 id="_support_for_http_2">Support for HTTP/2</h4>
<p>Micronaut’s Netty-based HTTP client and server have been updated to support HTTP/2.</p>
<p>See the <a href="#http2Server">HTTP/2 documentation</a> for more information on how to enable support for HTTP/2.</p>
</div>
<div>
<h4 id="_threading_model_and_event_loop_group_improvements">Threading Model and Event Loop Group Improvements</h4>
<p>Micronaut 2.0 uses a new shared default Netty <code>EventLoopGroup</code> for server worker threads and client request threads. This reduces context switching and improves resource utilization.</p>
<p>See the <a href="#clientConfiguration">HTTP Client Configuration</a> section for information on how to configure the default <code>EventLoopGroup</code> and add additional `EventLoopGroup’s that are configured per client.</p>
<p>In addition, as of Micronaut 2.0 all operations are by default executed on the <code>EventLoop</code> and users can optionally use the new <a href="https://docs.micronaut.io/2.0.0/api/io/micronaut/scheduling/annotation/ExecuteOn.html">@ExecuteOn</a> annotation to specify a named executor to execute an operation on if required (for example to offload blocking operations such as interactions with JPA/JDBC to a specific thread pool).</p>
</div>
<div>
<h4 id="_support_for_code_requestbean_code">Support for <code>@RequestBean</code></h4>
<p>It is now possible to bind the properties of a POJO argument to a <code>@Controller</code> to request parameters, headers and so on using the <a href="https://docs.micronaut.io/2.0.0/api/io/micronaut/http/annotation/RequestBean.html">@RequestBean</a> annotation.</p>
<p>Thanks to Github user <a href="https://github.com/asodja">asodja</a> for this contribution.</p>
</div>
<div>
<h4 id="_micronaut_servlet">Micronaut Servlet</h4>
<p>Micronaut now includes support for creating <a href="https://github.com/micronaut-projects/micronaut-servlet">Servlet applications</a> and users can use the command line to create an application that targets popular Servlet containers:</p>
<div>
<div>
<pre><code data-lang="bash">$ mn create-app myapp --features jetty-server    # for Jetty
$ mn create-app myapp --features tomcat-server   # for Tomcat
$ mn …</code></pre></div></div></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://docs.micronaut.io/2.0.0/guide/index.html">https://docs.micronaut.io/2.0.0/guide/index.html</a></em></p>]]>
            </description>
            <link>https://docs.micronaut.io/2.0.0/guide/index.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23653601</guid>
            <pubDate>Fri, 26 Jun 2020 16:11:31 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Carving out a niche as a small artist on Spotify]]>
            </title>
            <description>
<![CDATA[
Score 368 | Comments 257 (<a href="https://news.ycombinator.com/item?id=23652545">thread link</a>) | @imartin2k
<br/>
June 26, 2020 | https://www.stevebenjamins.com/blog/music-in-the-age-of-algorithms-47syg | <a href="https://web.archive.org/web/*/https://www.stevebenjamins.com/blog/music-in-the-age-of-algorithms-47syg">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-nc-base="header" data-controller="AncillaryLayout">
      

      

      <div>

        

        <div>
          

          <main>
            
              <section data-content-field="main-content">
                <article id="post-5ef5dad9c1c000530253b9bf" data-item-id="5ef5dad9c1c000530253b9bf">

    
      
    

    <div data-layout-label="Post Body" data-type="item" data-updated-on="1593170960338" id="item-5ef5dad9c1c000530253b9bf"><div><div><div data-block-type="2" id="block-951a4eb12d4604fa593a"><div><p>I'm making over $800 per month with my music— almost exclusively through Spotify. This is up from <a href="https://www.stevebenjamins.com/blog/spotify-and-discover-weekly">$400 per month</a> last year.   </p><p>I don't tour, I don't sell merch and I'm not on a major label. I'm just a small indie artist making music in my evenings— and Spotify is making that possible. </p></div></div><div data-block-type="5" id="block-yui_3_17_2_1_1593170550434_54819"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593170748322-P5RY1O7VWJM9MIUCOI2F/ke17ZwdGBToddI8pDm48kMWB_b-n6a50YzIZsjMYkmt7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0nHIEvVYSINmwchg1DeZrsBIoPZ3Gfj_FVJugF-nGL6izxVTmLKDD-oSa7oHWTxBOw/Earnings+Chart.png" data-image="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593170748322-P5RY1O7VWJM9MIUCOI2F/ke17ZwdGBToddI8pDm48kMWB_b-n6a50YzIZsjMYkmt7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0nHIEvVYSINmwchg1DeZrsBIoPZ3Gfj_FVJugF-nGL6izxVTmLKDD-oSa7oHWTxBOw/Earnings+Chart.png" data-image-dimensions="2500x1085" data-image-focal-point="0.5,0.5" alt="Earnings Chart.png" data-load="false" data-image-id="5ef5db3b8575ee1ad665d981" data-type="image" src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593170748322-P5RY1O7VWJM9MIUCOI2F/ke17ZwdGBToddI8pDm48kMWB_b-n6a50YzIZsjMYkmt7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0nHIEvVYSINmwchg1DeZrsBIoPZ3Gfj_FVJugF-nGL6izxVTmLKDD-oSa7oHWTxBOw/Earnings+Chart.png">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-yui_3_17_2_1_1593170550434_55119"><div><p>I’ve been releasing music on the internet since 2013 and it’s crazy how much music has changed since then. Here’s what I’ve learned about where music is at in 2020 and how it’s possible to carve out a niche as a small artist.    </p><h3>1. Spotify Is The Streaming Service That Matters</h3><p>In terms of music streaming market share, Spotify is Google and Apple Music is Bing. At least, that’s what I see in my stats:</p><p>I get about 177,000 plays / month. <strong>Spotify is 96% of those plays. </strong></p><p>I earn around $800 / month from music streaming. <strong>Spotify is 93% of that income. </strong></p></div></div><div data-aspect-ratio="49.95918367346939" data-block-type="5" id="block-eb72151a66d662f8af68"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1592916283663-0UYU3X1SDZU5IEDBVVRU/ke17ZwdGBToddI8pDm48kHP34hgIrqdksCH8TYvFigB7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0jG2lbcDYBOeMi4OFSYem8C2mvP1fRqxz_kej_mjMmx3K3LA91PMAqEFB2wYydnw4g/Streaming-Bar-Graph.jpg" data-image="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1592916283663-0UYU3X1SDZU5IEDBVVRU/ke17ZwdGBToddI8pDm48kHP34hgIrqdksCH8TYvFigB7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0jG2lbcDYBOeMi4OFSYem8C2mvP1fRqxz_kej_mjMmx3K3LA91PMAqEFB2wYydnw4g/Streaming-Bar-Graph.jpg" data-image-dimensions="2500x1248" data-image-focal-point="0.5,0.5" alt="Streaming-Bar-Graph.jpg" data-load="false" data-image-id="5ef5dad9c1c000530253b9ae" data-type="image" src="https://www.stevebenjamins.com/blog/Streaming-Bar-Graph.jpg">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-yui_3_17_2_1_1593170550434_61183"><div><h3>2. Algorithmic Playlists (Like <em>Discover Weekly</em>) Are Enormously Important</h3><p><strong>Every Monday my music gets a spike in streams on Spotify</strong>. You could set a watch to it— it’s that consistent: </p></div></div><div data-block-type="5" id="block-06dcac609bc1a10bb8d0"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1592919512085-FCR4VZMBTDSZEIYU2GUK/ke17ZwdGBToddI8pDm48kIKogUPb2YHTlnaztcmfVcIUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYwL8IeDg6_3B-BRuF4nNrNcQkVuAT7tdErd0wQFEGFSnPD4rrHbC4KeGHcLT21XLDVbdTUj-MuZl2cMhGeQFdSzaAYFqs-j32vOCypc5QMhBw/Daily-Spotify-Streams.jpg" data-image="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1592919512085-FCR4VZMBTDSZEIYU2GUK/ke17ZwdGBToddI8pDm48kIKogUPb2YHTlnaztcmfVcIUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYwL8IeDg6_3B-BRuF4nNrNcQkVuAT7tdErd0wQFEGFSnPD4rrHbC4KeGHcLT21XLDVbdTUj-MuZl2cMhGeQFdSzaAYFqs-j32vOCypc5QMhBw/Daily-Spotify-Streams.jpg" data-image-dimensions="2500x976" data-image-focal-point="0.5,0.5" alt="Daily-Spotify-Streams.jpg" data-load="false" data-image-id="5ef5dad9c1c000530253b99f" data-type="image" src="https://www.stevebenjamins.com/blog/Daily-Spotify-Streams.jpg">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-f845b5a6a792d5434442"><div><p>What makes Monday so special? </p><p>Well every Monday Spotify sends out a new <em>Discover Weekly</em> playlist. Discover Weekly is an <em>algorithmic</em> playlist— which means its personalized with songs <em>Spotify</em> thinks the user would like.</p><p>Discover Weekly is massively popular and it’s the reason for those Monday spikes in my streams.  </p></div></div><div data-block-type="5" id="block-4a776c4d7eb7e02d2365"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1592999085261-APZRZMG2J7AOH4BO6B2E/ke17ZwdGBToddI8pDm48kJN0G_F3WP6my7lOVI5MswB7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QPOohDIaIeljMHgDF5CVlOqpeNLcJ80NK65_fV7S1UZp4hhut_HaIerbk5pFZ8oSyrnRibAambjs2gnBi-UefkvjJh3JJWsjdMZ66YIxKAg/discover-weekly.jpg" data-image="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1592999085261-APZRZMG2J7AOH4BO6B2E/ke17ZwdGBToddI8pDm48kJN0G_F3WP6my7lOVI5MswB7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QPOohDIaIeljMHgDF5CVlOqpeNLcJ80NK65_fV7S1UZp4hhut_HaIerbk5pFZ8oSyrnRibAambjs2gnBi-UefkvjJh3JJWsjdMZ66YIxKAg/discover-weekly.jpg" data-image-dimensions="2362x1498" data-image-focal-point="0.5,0.5" alt="This is what Discover Weekly looks like" data-load="false" data-image-id="5ef5dad9c1c000530253b9a2" data-type="image" src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1592999085261-APZRZMG2J7AOH4BO6B2E/ke17ZwdGBToddI8pDm48kJN0G_F3WP6my7lOVI5MswB7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QPOohDIaIeljMHgDF5CVlOqpeNLcJ80NK65_fV7S1UZp4hhut_HaIerbk5pFZ8oSyrnRibAambjs2gnBi-UefkvjJh3JJWsjdMZ66YIxKAg/discover-weekly.jpg">
          </p>
        
          
        

        
          
          <figcaption>
            <p>This is what Discover Weekly looks like</p>
          </figcaption>
        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-d485b2d78d765ad48976"><div><p>Discover Weekly might not seem like much— after all, it looks like just another playlist— but its effect on streaming numbers is <em>enormous</em>. </p><p>And the effect of Discover Weekly isn’t limited to small, obscure artists like me— the same spikes are  visible in famous artists too: </p></div></div><div data-block-type="5" id="block-ba6f929a7737ac5cf3aa"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1592920721420-SCE25GI5ZRSZD13FC5YU/ke17ZwdGBToddI8pDm48kD3m4u8nI0SgVTwfGWCKndoUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYwL8IeDg6_3B-BRuF4nNrNcQkVuAT7tdErd0wQFEGFSnO7bu0kpYlCm0fzLGoiwLJTCHsT-6enuziktTU2MNXtHVB6mY_V2xBKRzGpHlGMZGw/Coldplay.jpg" data-image="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1592920721420-SCE25GI5ZRSZD13FC5YU/ke17ZwdGBToddI8pDm48kD3m4u8nI0SgVTwfGWCKndoUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYwL8IeDg6_3B-BRuF4nNrNcQkVuAT7tdErd0wQFEGFSnO7bu0kpYlCm0fzLGoiwLJTCHsT-6enuziktTU2MNXtHVB6mY_V2xBKRzGpHlGMZGw/Coldplay.jpg" data-image-dimensions="2500x982" data-image-focal-point="0.5,0.5" alt="Coldplay.jpg" data-load="false" data-image-id="5ef5dad9c1c000530253b9a5" data-type="image" src="https://www.stevebenjamins.com/blog/Coldplay.jpg">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="5" id="block-c576bcb5ad79ca58f7c2"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1592920734163-YDS79BET4FF7MXH3GTXY/ke17ZwdGBToddI8pDm48kD3m4u8nI0SgVTwfGWCKndoUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYwL8IeDg6_3B-BRuF4nNrNcQkVuAT7tdErd0wQFEGFSnO7bu0kpYlCm0fzLGoiwLJTCHsT-6enuziktTU2MNXtHVB6mY_V2xBKRzGpHlGMZGw/Beyonce.jpg" data-image="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1592920734163-YDS79BET4FF7MXH3GTXY/ke17ZwdGBToddI8pDm48kD3m4u8nI0SgVTwfGWCKndoUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYwL8IeDg6_3B-BRuF4nNrNcQkVuAT7tdErd0wQFEGFSnO7bu0kpYlCm0fzLGoiwLJTCHsT-6enuziktTU2MNXtHVB6mY_V2xBKRzGpHlGMZGw/Beyonce.jpg" data-image-dimensions="2500x982" data-image-focal-point="0.5,0.5" alt="Beyonce.jpg" data-load="false" data-image-id="5ef5dad9c1c000530253b9a8" data-type="image" src="https://www.stevebenjamins.com/blog/Beyonce.jpg">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="5" id="block-2703bf19dcbad1ce9d12"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1592920755190-CMSVZPPO7TM4NHYONU59/ke17ZwdGBToddI8pDm48kD3m4u8nI0SgVTwfGWCKndoUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYwL8IeDg6_3B-BRuF4nNrNcQkVuAT7tdErd0wQFEGFSnO7bu0kpYlCm0fzLGoiwLJTCHsT-6enuziktTU2MNXtHVB6mY_V2xBKRzGpHlGMZGw/Rihanna.jpg" data-image="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1592920755190-CMSVZPPO7TM4NHYONU59/ke17ZwdGBToddI8pDm48kD3m4u8nI0SgVTwfGWCKndoUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYwL8IeDg6_3B-BRuF4nNrNcQkVuAT7tdErd0wQFEGFSnO7bu0kpYlCm0fzLGoiwLJTCHsT-6enuziktTU2MNXtHVB6mY_V2xBKRzGpHlGMZGw/Rihanna.jpg" data-image-dimensions="2500x982" data-image-focal-point="0.5,0.5" alt="Rihanna.jpg" data-load="false" data-image-id="5ef5dad9c1c000530253b9ab" data-type="image" src="https://www.stevebenjamins.com/blog/Rihanna.jpg">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-f9c72d34909bce94a17f"><div><p>This is <em>CRAZY</em>. </p><p>No other promotional tactic in music comes close to Discover Weekly in delivering new listeners in such a low-effort, high volume way. </p><p>Back in 2013 I would spend hours cold-emailing bloggers. I would be lucky if I got a hit and got 1,000 plays on one of my songs. It was labour intensive. </p><p>Now algorithmic playlists like Discover Weekly send 1,000 new listeners every week without any work on my part. This is amazing. Cold outreach sucks. It sucks for the artist and it sucks for the bloggers. Spotify deserves a lot of credit for here. </p><h3>3. Songs Matter, Not Albums</h3><p>Spotify's algorithmic playlists rank songs— not albums. It's just like in SEO: Google indexes pages, not websites. </p><p>This has elevated the importance of songs and made albums more irrelevant than ever— especially for small artists like me. (Of course famous artists like Drake and Billie Eilish can still get massive press from an album release— but most artists are not at that level of fame.)</p><p>These days it’s almost always better to release individual songs rather than albums. (Plus as an artist, you’re limited to pitching one song at a time to Spotify’s human editors— and I’ll explain why human editors still matter in the next section). </p></div></div><div data-block-type="5" id="block-3d45ff76650d47ec036b"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593088518969-V2ZSGRTIPC70DQU6DTY2/ke17ZwdGBToddI8pDm48kO97cLu6upMnNovRR-E7bzEUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYy7Mythp_T-mtop-vrsUOmeInPi9iDjx9w8K4ZfjXt2dmbqkB0ZqjW5-e8O_uKcAuR8BQQi9T61LWwD7i0-QXfMoRwB-dUGsSquCnVTFQcaRg/stagger.jpg" data-image="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593088518969-V2ZSGRTIPC70DQU6DTY2/ke17ZwdGBToddI8pDm48kO97cLu6upMnNovRR-E7bzEUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYy7Mythp_T-mtop-vrsUOmeInPi9iDjx9w8K4ZfjXt2dmbqkB0ZqjW5-e8O_uKcAuR8BQQi9T61LWwD7i0-QXfMoRwB-dUGsSquCnVTFQcaRg/stagger.jpg" data-image-dimensions="1574x639" data-image-focal-point="0.5,0.5" alt="A 12-song album is better off being released as 12 staggered singles throughout the year." data-load="false" data-image-id="5ef5dad9c1c000530253b9b1" data-type="image" src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593088518969-V2ZSGRTIPC70DQU6DTY2/ke17ZwdGBToddI8pDm48kO97cLu6upMnNovRR-E7bzEUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYy7Mythp_T-mtop-vrsUOmeInPi9iDjx9w8K4ZfjXt2dmbqkB0ZqjW5-e8O_uKcAuR8BQQi9T61LWwD7i0-QXfMoRwB-dUGsSquCnVTFQcaRg/stagger.jpg">
          </p>
        
          
        

        
          
          <figcaption>
            <p>A 12-song album is better off being released as 12 staggered singles throughout the year.</p>
          </figcaption>
        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-22e1940a7b25c119a57a"><div><p>I get why the growing irrelevance of albums bums some people out. Albums are big statements. Some of the most iconic releases in popular music have been albums. </p><p>… But things change and that’s okay. Plus I think asking listeners to listen to a full-length album don’t make sense in our attention-starved world. Asking listeners to listen to a single song might just be a more realistic ask. </p><h3>4. Human Editors Still Matter— Just Not How You Think</h3><p>The secret to getting your music on algorithmic playlists like Discover Weekly is to get on <em>human</em> playlists first. </p><p>It’s similar to SEO: playlists are like backlinks. When a song is added to a playlist it's a vote for the quality of the song. Not every playlist is equally authoritative though— just like how a link from The NY Times is more authoritative than other links in SEO.  </p><p>On Spotify, the most authoritative playlists are <em>editorial</em> playlists. These are  playlists curated by official Spotify editors. <strong>In my experience, it’s only when I get on an editorial playlist that my songs get heavily featured on algorithmic playlists like Discover Weekly.</strong></p></div></div><div data-block-type="5" id="block-d2618bdb9eb6fca6fb0b"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593088707091-NCYBLFD641ENREFXBUZL/ke17ZwdGBToddI8pDm48kP049tvC-D_OFvuLSxtdDE0UqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYy7Mythp_T-mtop-vrsUOmeInPi9iDjx9w8K4ZfjXt2ds5RHc3yZvuk382KqaWk56FRKl7OH-Mh-dlRKY4AnQFFCjLISwBs8eEdxAxTptZAUg/editor-playlists.png" data-image="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593088707091-NCYBLFD641ENREFXBUZL/ke17ZwdGBToddI8pDm48kP049tvC-D_OFvuLSxtdDE0UqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYy7Mythp_T-mtop-vrsUOmeInPi9iDjx9w8K4ZfjXt2ds5RHc3yZvuk382KqaWk56FRKl7OH-Mh-dlRKY4AnQFFCjLISwBs8eEdxAxTptZAUg/editor-playlists.png" data-image-dimensions="1884x738" data-image-focal-point="0.5,0.5" alt="Official Spotify editorial playlists have this icons in the top left." data-load="false" data-image-id="5ef5dad9c1c000530253b9b4" data-type="image" src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593088707091-NCYBLFD641ENREFXBUZL/ke17ZwdGBToddI8pDm48kP049tvC-D_OFvuLSxtdDE0UqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYy7Mythp_T-mtop-vrsUOmeInPi9iDjx9w8K4ZfjXt2ds5RHc3yZvuk382KqaWk56FRKl7OH-Mh-dlRKY4AnQFFCjLISwBs8eEdxAxTptZAUg/editor-playlists.png">
          </p>
        
          
        

        
          
          <figcaption>
            <p>Official Spotify editorial playlists have this icons in the top left.</p>
          </figcaption>
        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-811f68956e11c14d5a36"><div><p>So how do you get on editorial playlists? I sincerely have no clue. I've been on editorial playlists 16 times but I have no idea how to replicate that.  </p><p><em>Note: In my experience, major label artists have an easier time getting on editorial playlists. This is discouraging— if major label artists have an easier time getting on editorial playlists, they’ll also get better placement in algorithmic playlists… But major label artists also only typically get 13% - 20% of streaming royalties… so there are still plenty of reasons to stay indie! </em></p><h3>5. Algorithms Make For Looser Relationships Between Artists And Listeners</h3><blockquote><p><em>"Music itself is going to become like running water or electricity." - David Bowie</em></p></blockquote><p>My most popular song 'Circles' has been played 1,350,00 times. And every month about 65,000 people listen to my music on Spotify. </p><p>Guess how many people follow me <a href="https://www.instagram.com/stevebenjamins/">on Instagram</a>? 480. </p><p>Just because people listen to me on Spotify, doesn’t mean they want a deep relationship. Most listeners just add 'Circles' to their library and move on with their life.</p><p>I’m definitely okay with this. I’d rather listeners follow me on Spotify rather than Instagram anyways. Plus only good things can come out of de-coupling fame from music. Make music because it’s what you love to do— not because you want to get famous. If you want to get famous I think you’re better off as a Youtuber or Tiktok influencer anyways! </p><p><strong>I think this is just the nature of algorithmic playlists— they lead to a high volume of listeners with a very loose connection to you as an artist:</strong></p></div></div><div data-block-type="5" id="block-a901b06fafc5a15411fa"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593089202461-97Q8C0YXC24AJXHWAZS9/ke17ZwdGBToddI8pDm48kE0dBl2NH3FZqnEQ36vQk7d7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QPOohDIaIeljMHgDF5CVlOqpeNLcJ80NK65_fV7S1USktP1TqXhY4Tkzt8R3NIMXp3WxE2w03r4EM8893BLC6ItbcvNsfhsWVcDwbNYmf2w/discovery-1.jpg" data-image="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593089202461-97Q8C0YXC24AJXHWAZS9/ke17ZwdGBToddI8pDm48kE0dBl2NH3FZqnEQ36vQk7d7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QPOohDIaIeljMHgDF5CVlOqpeNLcJ80NK65_fV7S1USktP1TqXhY4Tkzt8R3NIMXp3WxE2w03r4EM8893BLC6ItbcvNsfhsWVcDwbNYmf2w/discovery-1.jpg" data-image-dimensions="2000x1106" data-image-focal-point="0.5,0.5" alt="discovery-1.jpg" data-load="false" data-image-id="5ef5dad9c1c000530253b9b7" data-type="image" src="https://www.stevebenjamins.com/blog/discovery-1.jpg">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-a93c404fd14f000ea4f9"><div><h3>6. The Deepest Relationships Happen When Listeners Share Music With Friends</h3><p>Listeners sharing music among their friends leads to the deepest connections in my experience. </p><p>For example: last month I was interviewed on a college radio station by three guys. I was blown away by how closely these guys  listened to the music. They knew it so well and had spotted lyrical themes that I’ve repeated throughout songs that I thought I only noticed. It was clear there was a very deep connection.  </p><p>Hearing from listeners like that is nourishing in a way that a graph on Spotify just can't be.  It can be a very moving experience.</p><p>I’ve had similar experiences when high school students reach out to tell me everyone in their circle is listening to the music. Somehow they seem to just care about the music more— like their shared interest draws them deeper. </p><p>When you spend most of your time in an algorithmic world of music streaming, it can feel like magic when you meet listeners who found your music through friends. Sharing music between friends can’t much algorithms in sheer volume but it is by far the deepest way to build connections. </p></div></div><div data-block-type="5" id="block-9ce321c7732a79bf3e5a"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593089242182-PUPZTVNS044OUUZMF106/ke17ZwdGBToddI8pDm48kE0dBl2NH3FZqnEQ36vQk7d7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QPOohDIaIeljMHgDF5CVlOqpeNLcJ80NK65_fV7S1USktP1TqXhY4Tkzt8R3NIMXp3WxE2w03r4EM8893BLC6ItbcvNsfhsWVcDwbNYmf2w/discovery-2.jpg" data-image="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593089242182-PUPZTVNS044OUUZMF106/ke17ZwdGBToddI8pDm48kE0dBl2NH3FZqnEQ36vQk7d7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QPOohDIaIeljMHgDF5CVlOqpeNLcJ80NK65_fV7S1USktP1TqXhY4Tkzt8R3NIMXp3WxE2w03r4EM8893BLC6ItbcvNsfhsWVcDwbNYmf2w/discovery-2.jpg" data-image-dimensions="2000x1106" data-image-focal-point="0.5,0.5" alt="discovery-2.jpg" data-load="false" data-image-id="5ef5dad9c1c000530253b9ba" data-type="image" src="https://www.stevebenjamins.com/blog/discovery-2.jpg">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-47277ac585d98eee4d6a"><div><h3>7. Small And Obscure Is Wonderful </h3><p>I don’t tour, I don’t sell merch and I’m not on a major label. I just like making music. I'm an indie artist surfing the waves of the Spotify algorithm— and honestly… it’s been great. </p><p>Small and obscure is kind of wonderful: I get 3 or 4 people every week sending me an email or DM and it's all something sweet or kind— no one cares enough to troll or be a hater.</p></div></div><div data-block-type="5" id="block-33e58c22c9b6be9be03d"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593089843440-HMK4D6UUZDPLG5KKJ34U/ke17ZwdGBToddI8pDm48kPnFvlbclLoR6gDHvfg1BsoUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcZ7nIHmprcfuov5dlvTnz74ZM4c50vsZUfNA6dMgd7y1l5gbUCHkpeEIHHwQ0bqKX/insta-love.jpg" data-image="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593089843440-HMK4D6UUZDPLG5KKJ34U/ke17ZwdGBToddI8pDm48kPnFvlbclLoR6gDHvfg1BsoUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcZ7nIHmprcfuov5dlvTnz74ZM4c50vsZUfNA6dMgd7y1l5gbUCHkpeEIHHwQ0bqKX/insta-love.jpg" data-image-dimensions="1038x460" data-image-focal-point="0.5,0.5" alt="These kind of messages are really uplifting and mean a lot." data-load="false" data-image-id="5ef5dad9c1c000530253b9bd" data-type="image" src="https://images.squarespace-cdn.com/content/v1/5c6b0db3da50d3614fd79e23/1593089843440-HMK4D6UUZDPLG5KKJ34U/ke17ZwdGBToddI8pDm48kPnFvlbclLoR6gDHvfg1BsoUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcZ7nIHmprcfuov5dlvTnz74ZM4c50vsZUfNA6dMgd7y1l5gbUCHkpeEIHHwQ0bqKX/insta-love.jpg">
          </p>
   …</figure></div></div></div></div></div></div></article></section></main></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.stevebenjamins.com/blog/music-in-the-age-of-algorithms-47syg">https://www.stevebenjamins.com/blog/music-in-the-age-of-algorithms-47syg</a></em></p>]]>
            </description>
            <link>https://www.stevebenjamins.com/blog/music-in-the-age-of-algorithms-47syg</link>
            <guid isPermaLink="false">hacker-news-small-sites-23652545</guid>
            <pubDate>Fri, 26 Jun 2020 14:46:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What I learned from writing for The Onion for a month (2015)]]>
            </title>
            <description>
<![CDATA[
Score 201 | Comments 108 (<a href="https://news.ycombinator.com/item?id=23651864">thread link</a>) | @bryanrasmussen
<br/>
June 26, 2020 | https://wordsbyevanporter.com/what-i-learned-from-writing-for-the-onion-for-a-month/ | <a href="https://web.archive.org/web/*/https://wordsbyevanporter.com/what-i-learned-from-writing-for-the-onion-for-a-month/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            


            <section>
                <div>
                    <!--kg-card-begin: markdown--><p><img src="https://wordsbyevanporter.com/content/images/2015/01/onionlogo.png" alt=""></p>
<p>In April/May of 2010, I spent four weeks as a freelance writer for The Onion News Network.</p>
<p>Besides looking great on a resume, it was an awesome gig and a huge learning experience. Not surprisingly, I get asked about it pretty often.</p>
<p>So here's everything I know about how to get a job writing for <a href="http://www.theonion.com/">The Onion</a>, and what I learned from my (short) time doing it.</p>
<hr>
<h2 id="howigotajobfreelancewritingfortheonion">How I Got a Job Freelance Writing for The Onion</h2>
<hr>
<p>Getting a job writing for The Onion is not easy. But there's no big secret to it, either.</p>
<p><a href="http://www.theonion.com/jobs">The Onion has a jobs page</a> on their website.</p>
<p>Yep. That's the big story behind how I got hired to write for The Onion: I went on their website and applied.</p>
<p>But here's the thing -- I did this at least twice with no luck before I got accepted.</p>
<p>Here's how it worked back then:</p>
<p>I would check the job listings frequently (obsessively), and every once in a blue moon, there'd be a position on there called Freelancer or Freelance Writer. You'd send in an email with your resume and samples, and they'd send back an application for you to complete. You had to return two things:</p>
<ol>
<li>
<p><strong>A list of 20 headlines</strong> and concepts for video sketches. (All the job listings I ever saw were for The Onion News Network -- their video leg. I never saw anything for editorial positions.)</p>
</li>
<li>
<p><strong>A completed script</strong> for one of their news segment sketches based on ideas or concepts they provided.</p>
</li>
</ol>
<p>Like I said, I went through this process (the final product is often known in the industry as a "packet") at least twice with no success. It doesn't sound like much, but it is TOUGH. I labored over those 20 headlines like you wouldn't believe. Even the best ideas start to look like shit after you've stared at them for a week.</p>
<p>And the scripts. Man, those were hard. They never gave you blockbuster concepts to work with, and I think that was on purpose. It was always some kind of dry, subtle joke -- they wanted to see what you could do and how far you would take it.</p>
<p>But the third time I applied was a charm. I'll never forget opening my email and seeing these words:</p>
<blockquote>
<p>The Onion News Network would like to congratulate you on being selected as a Contributor for the IFC series. We had a huge number of applicants, and we are thrilled with how strong this group is.</p>
</blockquote>
<p>I remember texting my wife -- girlfriend at the time. She was in class and stepped into the hall to call me. We both basically screamed on the phone for a couple of minutes.</p>
<p><strong>Side Note:</strong> I haven't seen any writing positions listed on The Onion's website in years. Granted, I don't check as frequently anymore, but I think the only way to get in with them these days is to be recruited, know someone there, or come up through the ranks as an intern or writer's assistant.</p>
<p>If you REALLY want to get a job writing for The Onion; email them. I've heard stories of people that have done this. They say they won't take anything unsolicited, and there's a 99% chance they won't, but who knows? Serendipity just might strike for you.</p>
<hr>
<h2 id="whatitwasliketowritefortheonion">What It Was Like to Write for The Onion</h2>
<hr>
<p>They put us to work right away. This was back in 2010, and The Onion was going into pre-production on its very first TV show -- The Onion News Network on IFC (The Independent Film Channel).</p>
<p>It would be a lot like the Onion video content we knew and loved, except in a half hour format and with recurring anchors as characters.</p>
<p>We were required to turn in 25 ideas a week; an "idea" being a headline or concept along with a short explanation of the joke and how the segment would play out.</p>
<p>Some weeks, we'd get really brief feedback on our lists. Other weeks, not. Then, by mid week, they'd compile all the ideas they liked. Some would be marked down as "one liners", or jokes that would be pulled in to scroll across the bottom of the screen during the show. Others were segmented by where in the show they might fit in, with some of them designated to move to the scripting stage (where the staff writers would take over).</p>
<p>The process moved fast. My job, along with the other freelancers, was to come up with ideas. We weren't really consulted or informed about anything else surrounding the show. No meetings to discuss casting. No phone calls to brainstorm around our jokes. It was our job to pump out creativity and let the full time staff filter everything out. Everything was done over email.</p>
<p>In the end, only one of my ideas actually made it into the show -- unless I missed a one-liner somewhere along the line, which would be easy to do.</p>
<p>Funny enough, the idea of mine that made it to production was one from my submission packet -- I'm pretty sure it's the reason they hired me. And they actually chose to open the entire series with it, which was pretty cool.</p>

<p>I recorded the pilot when it aired and probably watched it a dozen times with my family. One of the coolest moments I've ever had as a writer.</p>
<hr>
<h2 id="whatilearnedwritingfortheonion">What I Learned Writing for The Onion</h2>
<hr>
<p>This was a huge learning experience for me in a very short amount of time. I could probably talk for days about everything I learned working as a writer for The Onion for four weeks, but if I had to boil it down, here's what I'd say:</p>
<h3 id="ideasarecheap">Ideas are cheap.</h3>
<p>Or, in their case, jokes. They made us come up with so many sketch ideas and headlines. Huge lists of them. And once they were dead, they were dead. There was no reusing ideas that didn't quite make the cut in previous weeks. No iterating on almost-there jokes. When an idea was rejected, it was time to move on. Always bigger and better jokes, or ideas, out there to be found.</p>
<p>I also learned how to really dig into an idea to see if it had any potential. They were constantly pushing us to see past the headline. Is it just a funny sentence or is there room to explore and expand this into a 3 minute sketch? Is there substance?</p>
<h3 id="creativityisamuscle">Creativity is a muscle.</h3>
<p>What I loved about The Onion's writing process was the sheer volume of it. 25 ideas a week. No excuses. Often times, I'd turn in more than 25, along with a big list of one-liners I knew weren't big enough for full sketches. For one thing, it forced me to dig deep and get past those first initial ideas that came easily. It also helped me learn The Onion's editorial voice through repetition, which is something that can't be overstated.</p>
<h3 id="iamnotthatfunny">I am not that funny.</h3>
<p>I had one great idea and I used it up in my application to get the job. I wrote a few other funny jokes throughout, but nowhere near the level of The Onion's top writers. I wish I could show you these lists of approved ideas I got in my inbox each week. Reading through them was an absolute blast; these guys and girls are so freaking talented and funny.</p>
<p>At the end of the project, they opted to keep a few of the freelance writers on -- alas, I was not one of them. And I didn't expect to be. To be a professional humor writer, you have to be insanely funny and creative. I'm a good writer, and I got their voice, and I have a few good ideas, but I was never going to make it as a full-time writer for The Onion. And that's okay.</p>
<hr>
<h2 id="intheend">In The End</h2>
<hr>
<p>Writing for The Onion was one of the coolest experiences I've ever had, and I feel lucky to have gotten the opportunity.</p>
<p>I mean, I got to see an idea I had sitting in my living room acted out on TV with a real script, real actors, and real production value. That was awesome, and I'll never forget it. And to top it off, I actually got a paycheck. People paid me real money to come up with jokes. That was incredible.</p>
<p>And I'd like to think that, even though the gig was short lived, I learned a ton by being bold enough to jump into the deep end with pro comedy writers.</p>
<p>Even if I didn't really belong there.</p>
<hr>
<h2 id="nowreadthisworkingwithaneditorprotectingyourvoice">Now Read This: <a href="http://www.wordsbyevanporter.com/working-with-an-editor/">Working with an Editor &amp; Protecting Your Voice</a></h2>
<hr>
<!--kg-card-end: markdown-->
                </div>
            </section>


            


        </article>

    </div>
</div></div>]]>
            </description>
            <link>https://wordsbyevanporter.com/what-i-learned-from-writing-for-the-onion-for-a-month/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23651864</guid>
            <pubDate>Fri, 26 Jun 2020 13:43:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Prisma Raises $12M Series A]]>
            </title>
            <description>
<![CDATA[
Score 104 | Comments 105 (<a href="https://news.ycombinator.com/item?id=23651605">thread link</a>) | @pimeys
<br/>
June 26, 2020 | https://www.prisma.io/blog/prisma-raises-series-a-saks1zr7kip6 | <a href="https://web.archive.org/web/*/https://www.prisma.io/blog/prisma-raises-series-a-saks1zr7kip6">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><div><div><hr><h3 id="contents"><a href="#contents" aria-label="contents permalink"></a>Contents</h3><ul><li><a href="#our-mission-making-databases-easy">Our mission: Making databases easy</a></li><li><a href="#where-we-are-today">Where we are today</a></li><li><a href="#whats-next-for-prisma">What's next for Prisma</a></li><li><a href="#we--our-community">We 💚 our community</a></li></ul><hr><h3 id="tldr"><a href="#tldr" aria-label="tldr permalink"></a>TLDR</h3><p>At Prisma, our goal is to <strong>revolutionize how application developers work with databases</strong>. Considering the <a target="_blank" rel="noopener noreferrer" href="https://dataguide.prisma.io/intro/comparing-database-types">vast number of different databases</a> and <a target="_blank" rel="noopener noreferrer" href="https://dataguide.prisma.io/types/relational/comparing-sql-query-builders-and-orms">variety of tools</a> for working with them, this is an extremely ambitious goal!</p><p>We are thrilled to enter the next chapter of pursuing this goal with a <strong>$12M Series A</strong> funding round led by <a target="_blank" rel="noopener noreferrer" href="https://amplifypartners.com/">Amplify Partners</a>. We are especially excited about this partnership as Amplify is an experienced investor in the developer tooling ecosystem and has led investments for numerous companies, such as <a target="_blank" rel="noopener noreferrer" href="https://www.datadoghq.com/">Datadog</a>, <a target="_blank" rel="noopener noreferrer" href="https://www.fastly.com/">Fastly</a>, and <a target="_blank" rel="noopener noreferrer" href="https://www.gremlin.com/">Gremlin</a>.</p><hr><h3 id="our-mission-making-databases-easy"><a href="#our-mission-making-databases-easy" aria-label="our mission making databases easy permalink"></a>Our mission: Making databases easy</h3><h4 id="database-tools-are-stuck-with-legacy-paradigms"><a href="#database-tools-are-stuck-with-legacy-paradigms" aria-label="database tools are stuck with legacy paradigms permalink"></a>Database tools are stuck with legacy paradigms</h4><p>Despite having been developed in the 1970s, relational <a target="_blank" rel="noopener noreferrer" href="https://dataguide.prisma.io/intro/what-are-databases">databases</a> are still the most commonly used databases today. While <a target="_blank" rel="noopener noreferrer" href="https://dataguide.prisma.io/intro/comparing-database-types">other database types have been developed in the meantime</a>, from <em>document</em>, to <em>graph</em> , to <em>key-value</em> databases, working with databases remains one of the biggest challenges in application development.</p><p>While almost any other part of the development stack has been modernized, database tools have been stuck with the same paradigms for the last decades.</p><p><span><img src="https://imgur.com/WwMdROo.png"></span></p><p>When working with relational databases, developers have the choice of working directly with SQL or using a higher-level abstraction called ORMs. <a href="https://www.prisma.io/docs/understand-prisma/why-prisma#problems-with-sql-orms-and-other-database-tools">None of these options is particularly compelling</a>.</p><p>Using SQL is very low-level resulting in reduced developer <em>productivity</em>. In contrast, ORMs are too high-level and developers sacrifice <em>control</em> over the executed database operations when using this approach. ORMs further suffer from a fundamentally misguided abstraction called the <a target="_blank" rel="noopener noreferrer" href="http://blogs.tedneward.com/post/the-vietnam-of-computer-science/">object-relational impedance mismatch</a>.</p><h4 id="prisma-modernizes-how-developers-work-with-databases"><a href="#prisma-modernizes-how-developers-work-with-databases" aria-label="prisma modernizes how developers work with databases permalink"></a>Prisma modernizes how developers work with databases</h4><p>Similar to how React.js modernized frontend development or how Serverless invented a new model for compute infrastructure, <strong>Prisma is here to bring a new and modern approach for working with databases</strong>!</p><p>Prisma's unique approach to solving database access with a <em>generated</em> query builder that's fully type-safe and can be tailored to any database schema sets it apart from previous attempts of solving the same problem.</p><p>A big part of the modernization comes from our <strong>major focus on developer experience</strong>. Database tools are often associated with friction, uncertainty, painful hours of debugging and costly performance bottlenecks.</p><div><p><strong>Developer experience is part of our DNA at Prisma.</strong> Working with databases is too often associated with friction and uncertainty when it should be fun, delightful and productive!</p></div><p>We want to make working with databases <em>fun</em>, <em>delightful</em> and <em>productive</em> while guiding developers towards proper patterns and best practices in their daily work with databases!</p><h4 id="learning-from-our-past-from-graphql-to-databases"><a href="#learning-from-our-past-from-graphql-to-databases" aria-label="learning from our past from graphql to databases permalink"></a>Learning from our past: From GraphQL to databases</h4><p>As a company we've gone through a number of major product iterations and pivots over the last years.</p><p><span><img src="https://imgur.com/4YPWyaW.png"></span></p><p>Our initial products, Graphcool and Prisma 1 were focused on <a target="_blank" rel="noopener noreferrer" href="http://graphql.org/">GraphQL</a> as a technology. However, as we were running both tools in production, we realized they didn't address the <em>core</em> problems developers had.</p><p>We realized that a lot of the value we provided with both tools didn't necessarily lie in the quick provision of a GraphQL server, but rather in the fact that developers didn't need to manage their <em>database workflows</em> explicitly.</p><p>This realization led to a pivot which ultimately manifested in the rewrite to Prisma 2. With this new version of Prisma, we have found the right level of abstraction that ensures developers keep full control and flexibility about their development stack while not needing to worry about database workflows!</p><h4 id="inspired-by-the-data-layers-of-big-companies-twitter-facebook-"><a href="#inspired-by-the-data-layers-of-big-companies-twitter-facebook-" aria-label="inspired by the data layers of big companies twitter facebook  permalink"></a>Inspired by the data layers of big companies (Twitter, Facebook, ...)</h4><p>The approach Prisma takes for this modernization is inspired by big tech companies such as Twitter, Facebook, or Airbnb. </p><p>To ensure productivity of application developers, it is a common practice in these organizations to introduce a <em>unified data access layer</em> that abstracts away the database infrastructure and provides developers with a more familiar and convenient way of accessing data.</p><p>Facebook developed a system called <a target="_blank" rel="noopener noreferrer" href="https://medium.com/coinmonks/tao-facebooks-distributed-database-for-social-graph-c2b45f5346ea">TAO</a> that fulfills the data needs of application developers. Twitter has built a "virtual database" called <a target="_blank" rel="noopener noreferrer" href="https://about.sourcegraph.com/graphql/graphql-at-twitter#schema">Strato</a> which <em>brings together multiple data sources so that they can be queried and mutated uniformly</em>. Airbnb <a target="_blank" rel="noopener noreferrer" href="https://medium.com/airbnb-engineering/reconciling-graphql-and-thrift-at-airbnb-a97e8d290712">combines GraphQL and Thrift</a> to abstract away the implementation details of querying data.</p><p><span><img src="https://imgur.com/Hb9VOWN.png"></span></p><p>Building these custom data access layers requires <em>a lot</em> of time and resources (as these are typically implemented by dedicated <em>infrastructure teams</em>) and thus is not a realistic approach for most companies and development teams.</p><p>Being based on the same core ideas and principles as these systems, <strong>Prisma democratizes the pattern of a uniform data access layer</strong> and makes it accessible as an open-source technology for development teams of all sizes.</p><hr><h3 id="where-we-are-today"><a href="#where-we-are-today" aria-label="where we are today permalink"></a>Where we are today</h3><h4 id="prisma-20-is-ready-for-production"><a href="#prisma-20-is-ready-for-production" aria-label="prisma 20 is ready for production permalink"></a>Prisma 2.0 is ready for production</h4><p>After running Preview and Beta versions for more than a year, we've recently <a href="https://www.prisma.io/blog/announcing-prisma-2-n0v98rzc8br1">launched Prisma 2.0 for production</a>. Having rewritten the core of Prisma from Scala to Rust for the transition, we've built a strong foundation to expand the Prisma toolkit to cover various database workflows in the future.</p><p>Prisma's main feature is <a href="https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-client">Prisma Client</a>, an auto-generated and type-safe query builder which can be used to access a database in Node.js and TypeScript. Thanks to <a href="https://www.prisma.io/docs/reference/tools-and-interfaces/introspection">introspection</a>, Prisma Client can be used to work with any existing database!</p><blockquote><p><strong>Note</strong>: Prisma currently supports <strong>PostgreSQL</strong>, <strong>MySQL</strong> and <strong>SQLite</strong> databases –&nbsp;with more planned. Please create <a target="_blank" rel="noopener noreferrer" href="https://github.com/prisma/prisma/issues/new">new GitHub issues</a> or subscribe to existing ones (e.g. for <a target="_blank" rel="noopener noreferrer" href="https://github.com/prisma/prisma/issues?q=is%3Aissue+is%3Aopen+mongo">MongoDB</a> or <a target="_blank" rel="noopener noreferrer" href="https://github.com/prisma/prisma/issues/1676">DynamoDB</a>) if you'd like to see support for specific databases.</p></blockquote><h4 id="next-generation-web-frameworks-are-built-on-prisma"><a href="#next-generation-web-frameworks-are-built-on-prisma" aria-label="next generation web frameworks are built on prisma permalink"></a>Next-generation web frameworks are built on Prisma</h4><p>The Node.js ecosystem is known for lots of different frameworks that try to streamline workflows and prescribe certain conventions. We are extremely humbled that many framework authors decide to use Prisma as their data layer of choice.</p><h5 id="redwoodjs-bringing-full-stack-to-the-jamstack"><a href="#redwoodjs-bringing-full-stack-to-the-jamstack" aria-label="redwoodjs bringing full stack to the jamstack permalink"></a>Redwood.js: Bringing full-stack to the Jamstack</h5><p>The new <a target="_blank" rel="noopener noreferrer" href="https://redwoodjs.com/">RedwoodJS</a> framework by GitHub co-founder <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/mojombo">Tom Preston-Werner</a> seeks to become the "Ruby on Rails" equivalent for Node.js. RedwoodJS is based on React and GraphQL and comes with a baked-in deployment model for serverless functions.</p><h5 id="blitzjs-the-fullstack-react-framework"><a href="#blitzjs-the-fullstack-react-framework" aria-label="blitzjs the fullstack react framework permalink"></a>Blitz.js: The Fullstack React Framework</h5><p>Another framework with increasing anticipation and excitement in the community is <a target="_blank" rel="noopener noreferrer" href="http://blitzjs.com/">Blitz.js</a>. Blitz is build on top of Next.js and takes a fundamentally different approach compared to Redwood. Its goal is to completely eliminate the API server and <a target="_blank" rel="noopener noreferrer" href="https://github.com/blitz-js/blitz/blob/canary/rfc-docs/01-architecture.md#introduction">"bring back the simplicity of server rendered frameworks"</a>.</p><h5 id="nexus-a-delightful-graphql-application-framework"><a href="#nexus-a-delightful-graphql-application-framework" aria-label="nexus a delightful graphql application framework permalink"></a>Nexus: A delightful GraphQL application framework</h5><p>At Prisma, we're huge fans of GraphQL and believe in its bright future. That's why we founded the <a target="_blank" rel="noopener noreferrer" href="https://github.com/prisma-labs/">Prisma Labs</a> team which dedicates its time to work on open source tools in the GraphQL ecosystem.</p><p>It is currently focused on building <a target="_blank" rel="noopener noreferrer" href="https://www.nexusjs.org/#/">Nexus</a>, a delightful application framework for developing GraphQL servers. As opposed to RedwoodJS, Nexus is a <em>backend-only</em> GraphQL framework and has no opinions on how you access the GraphQL API from the frontend.</p><h3 id="whats-next-for-prisma"><a href="#whats-next-for-prisma" aria-label="whats next for prisma permalink"></a>What's next for Prisma</h3><h4 id="database-migrations-with-prisma-migrate"><a href="#database-migrations-with-prisma-migrate" aria-label="database migrations with prisma migrate permalink"></a>Database migrations with Prisma Migrate</h4><p>Database migrations are a common pain point for many developers! Especially with applications running in production, it is often unclear what the best approach is to perform schema changes (e.g. in CI/CD environments). Many developers resort to manual migrations or custom scripts, making the process brittle and error-prone.</p><p><a href="https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-migrate">Prisma Migrate</a> is our solution to this problem. Prisma Migrate lets developers map the declarative <a href="https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-schema">Prisma schema</a> to their database. Under the hood, Prisma Migrate generates the required SQL statements to perform the migration.</p><blockquote><p><strong>Note</strong>: Prisma Migrate is currently in an experimental state and should not be used in production environments.</p></blockquote><h4 id="prisma-studio-a-visual-editor-for-your-database-workflows"><a href="#prisma-studio-a-visual-editor-for-your-database-workflows" aria-label="prisma studio a visual editor for your database workflows permalink"></a>Prisma Studio: A visual editor for your database workflows</h4><p><a href="https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-studio">Prisma Studio</a> is your visual companion for various database workflows. It provides a modern GUI that lets you view and edit the data in your database. You can switch between the <em>table</em> and the <em>tree</em> view, the latter is especially convenient to drill deeply into nested data (explore the two views using the tabs below or try out the <a target="_blank" rel="noopener noreferrer" href="https://prisma.studio/">online demo</a>).</p><div><p><span><img src="https://imgur.com/Fc7BweP.png"></span></p></div><blockquote><p><strong>Note</strong>: Prisma Studio is currently in an experimental state and should not be used in production environments. .</p></blockquote><h4 id="beyond-nodejs--typescript-prisma-client-in-other-languages"><a href="#beyond-nodejs--typescript-prisma-client-in-other-languages" aria-label="beyond nodejs  typescript prisma client in other languages permalink"></a>Beyond Node.js &amp; TypeScript: Prisma Client in other languages</h4><p>Prisma Client is a thin, language-specific layer that delegates the heavy-lifting of query planning and execution to Prisma's <a href="https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-client/query-engine">query engine</a>. The query engine is <a target="_blank" rel="noopener noreferrer" href="https://github.com/prisma/prisma-engines">written in Rust</a> and runs as a standalone process alongside your main application.</p><p>This architecture enables us to expand Prisma Client to other languages and bring its benefits to developers beyond the Node.js community. We are already working on <strong>Prisma Client in Go</strong> with a first <a target="_blank" rel="noopener noreferrer" href="https://github.com/prisma/prisma-client-go">alpha version</a> ready to try out!</p><h4 id="supporting-a-broad-spectrum-of-databases-and-other-data-sources"><a href="#supporting-a-broad-spectrum-of-databases-and-other-data-sources" aria-label="supporting a broad spectrum of databases and other data sources permalink"></a>Supporting a broad spectrum of databases and other data sources</h4><p>Prisma is designed in a way that it can potentially connect to <em>any</em> existing data source as long as there is the right <em>connector</em> for it!</p><p>As of today, we've built connectors for PostgreSQL, MySQL and SQLite. A <a target="_blank" rel="noopener noreferrer" href="https://github.com/prisma/prisma/issues/1277">connector for MongoDB</a> is already in the works and more are planned for the future.</p><p><span><img src="https://imgur.com/PQSljF7.png"></span></p><h4 id="building-commercial-services-to-sustain-the-oss-tools"><a href="#building-commercial-services-to-sustain-the-oss-tools" aria-label="building commercial services to sustain the oss tools permalink"></a>Building commercial services to sustain the OSS tools</h4><p>We are commited to building world-class open-source tools to solve common database problems of application developers. To be able to sustain our open-source work, we're planning to build commercial services that will enable development teams and organizations to collaborate better in projects that are using Prisma.</p><blockquote><p><strong>Note</strong>: The plans for commercial services do not affect the open-source tools we are building, those will remain free forever.</p></blockquote><hr><p>We are incredibly grateful for everyone who has accompanied us on our journey! It is fantastic to see our lively community on <a target="_blank" rel="noopener noreferrer" href="https://slack.prisma.io/">Slack</a>, <a target="_blank" rel="noopener noreferrer" href="https://github.com/prisma/prisma">GitHub</a>, <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/search?q=%40prisma&amp;src=typed_query&amp;f=live">Twitter</a> and a lot of other channels where folks are chatting about Prisma and helping each other out!</p><h4 id="join-us-at-prisma-day"><a href="#join-us-at-prisma-day" aria-label="join us at prisma day permalink"></a>Join us at Prisma Day</h4><p>If you've become …</p></div></div></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.prisma.io/blog/prisma-raises-series-a-saks1zr7kip6">https://www.prisma.io/blog/prisma-raises-series-a-saks1zr7kip6</a></em></p>]]>
            </description>
            <link>https://www.prisma.io/blog/prisma-raises-series-a-saks1zr7kip6</link>
            <guid isPermaLink="false">hacker-news-small-sites-23651605</guid>
            <pubDate>Fri, 26 Jun 2020 13:17:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Taking Theatre Online with WebGL and WebRTC]]>
            </title>
            <description>
<![CDATA[
Score 51 | Comments 10 (<a href="https://news.ycombinator.com/item?id=23651117">thread link</a>) | @seacaster
<br/>
June 26, 2020 | https://chrisuehlinger.com/blog/2020/06/16/unshattering-the-audience-building-theatre-on-the-web-in-2020/ | <a href="https://web.archive.org/web/*/https://chrisuehlinger.com/blog/2020/06/16/unshattering-the-audience-building-theatre-on-the-web-in-2020/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p><em>[<strong>Ed. Note:</strong> This post contains a promotion! It basically *is* a promotion for my current online interactive show: Shattered Space.]</em></p>

<p><em>[But I’ve also got a lot of cool technical stuff to tell you about, so stick around and if this sounds interesting feel free to <a href="https://shatteredspace.live/" target="_blank">buy a ticket here</a>!]</em></p>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="#intro">Intro</a></li>
  <li><a href="#other-peoples-computers">Other People’s Computers</a></li>
  <li><a href="#basic-platform-overview">Basic Platform Overview</a></li>
  <li>WebRTC/Janus
    <ul>
      <li><a href="#webrtc-and-janus">WebRTC and Janus</a></li>
      <li><a href="#webrtc-and-redux">WebRTC and Redux</a></li>
      <li><a href="#acquiring-media-devices">Acquiring Media Devices</a></li>
    </ul>
  </li>
  <li>WebGL/three.js
    <ul>
      <li><a href="#threejs-and-offscreencanvas">three.js and OffscreenCanvas</a></li>
      <li><a href="#threejs-and-memory-management">three.js and Memory Management</a></li>
    </ul>
  </li>
  <li><a href="#detecting-and-solving-issues-remotely">Detecting and Solving Issues Remotely</a></li>
  <li><a href="#come-see-shattered-space">Come See Shattered Space!</a></li>
</ul>

<h2 id="intro">Intro</h2>

<p>Safe to say that the past couple months have gone a lot different than many of us were expecting. In early March, as quarantine was starting and all of my projection design gigs were being cancelled, I hit up a couple close friends about building a non-linear theatre experience entirely online. A lot of folks have been trying to perform plays on Zoom (and have found a lot of interesting and clever ways of working with that medium), but I felt like we could make something really unique if we built our own custom video conferencing app.</p>

<p><img src="https://chrisuehlinger.com/images/shattered/initial-google-doc.png">
<strong>The Google Doc that started it all</strong></p>

<p>Crazy? It definitely would’ve been 10 years ago. But advances in the web platform (as well as the quality of cameras and hardware in mobile devices) took this down into the realm of “possible-if-slightly-quixotic”.</p>

<p>Three months later, we’ve done it: Shattered Space is a piece of interactive theatre about a binary star system whose twin stars (“The Mothers”) have disappeared. You and your fellow audience members are Star Jockeys, and have been conscripted to fly around in spaceships to get to know the denizens of the Matra System and see what you can do to help.</p>

<p><iframe src="https://www.youtube.com/embed/iifZPEHJM6c" frameborder="0" allowfullscreen=""></iframe></p>
<p><strong>Here’s a trailer if you want a better idea of what’s going on</strong></p>

<p>If you watched that trailer, you’ve probably figured out that this show involved 3D graphics (WebGL), videoconferencing (WebRTC) and perhaps also some music and audio processing (Web Audio). These were all technologies that I’d worked with on some level in the past, but this show required me to think about them completely differently. All because of the following central problem:</p>

<h2 id="other-peoples-computers">Other People’s Computers</h2>

<p><iframe src="https://www.youtube.com/embed/nGt8w9RbhvY" frameborder="0" allowfullscreen=""></iframe></p>
<p><strong>This WebRTC-based monitoring system allowed the backstage band to see the stage in real time and take cues from actors. The onstage portal was rendered with WebGL. (<em>Welcome to Shakesville</em>, Baltimore Rock Opera Society 2019)</strong></p>

<p>I’ve used WebGL and WebRTC to build projection/video effects for a number of shows the past couple years, but in every case I was writing code that would only run on <strong>my</strong> computer. If I ran into a device-specific bug that affected my computer (or my iPhone, or my squad of Raspberry Pis) I had all the time and access I needed to either debug it or come up with a workaround. Not this time.</p>

<p>If someone pays us $15, receives the login link via email, tries to open it on a cheap 2014 laptop and it can’t load without crashing, that’s a refund. We weren’t just messing around with advanced web features, we needed to deploy them in the most battle-hardened and resilient way possible, while also capturing just enough data and logs to pinpoint who was having problems and ideally solve them before the show started.</p>

<p>This meant going beyond the kinds of code you see in introductory tutorials and really digging into how these APIs deal with memory management, how they respond to connection issues, how they can fail, and how to tweak things at runtime to ensure that framerates stay high and dropped packets are few. I learned a lot about productizing these features, and I’d like to share as much of that as I can, but first let’s talk basics.</p>

<h2 id="basic-platform-overview">Basic Platform Overview</h2>

<p><img src="https://chrisuehlinger.com/images/shattered/screenshots/ship-in-flight.png">
<strong>A group of attendees interacting with a character in the show</strong></p>

<p>Attendees of Shattered Space are broken up into 6 groups of 5. Each group is assigned to a “ship” that flies around the system, and they interact with the characters in the show as a group. Attendees have the options to mute their microphone and turn off their camera if they wish (there is a text chat on the side they can use to communicate) although we encourage people to keep them on if they feel comfortable.</p>

<p>The Shattered Space platform consists of:</p>

<ul>
  <li>An ExpressJS service that keeps track of the overall state of the show.</li>
  <li>7 Janus WebRTC media servers. One for each ship and a extra for broadcasting a livestream of the ending scene.</li>
  <li>The Admin App, a React/Redux webapp that handles scheduling shows, keeping track of which actor is talking to which ship, and has real-time dashboards with logs of client-side errors and connectivity issues.</li>
  <li>The Actor App, a React/Redux webapp used by actors to interact with the audience via audio, video, text, and the giving/taking of items from a ship’s inventory.</li>
  <li>The Attendee App, a React/Redux webapp where attendees view the show and interact with the actors and each other via audio, video and text.</li>
  <li>The Host App, used by me to perform the motion-captured ending scene.</li>
</ul>

<p>When I say that the Show Service “keeps track of the overall state of the show”, I mean <em>all</em> of the state. Most of the Redux actions (across all 3 apps) don’t mutate the state of the reducers, but instead hit an endpoint on the Show Service that changes the state kept in the database, then fetches <em>all</em> of the state from the database and sends it to <em>all</em> of the users as a WebSocket message which then overwrites most of the reducers’ state. This way, no client can end up with “orphan state” as a result of optimistically updating their reducer before their API call returns, and fetching the updated state for <em>all</em> users can be done with a single database call (this refresh-all-state-for-everyone method is debounced and implements a queueing mechanism to ensure we don’t have too many database calls at once).</p>

<p><img src="https://chrisuehlinger.com/images/shattered/redux-oops.jpg">
<strong>I basically took Dan Abramov’s simple and elegant system and did this to it. <br> Sorry Dan.</strong></p>

<p>(I’d note that this architecture emerged sort of organicly and there are probably cleaner or more optimal ways of achieving this “Redux-but-the-server-is-the-reducer” architecture. I’m open to feedback on whether something like Relay or Meteor would be a better fit for a V2)</p>

<p><img src="https://chrisuehlinger.com/images/shattered/screenshots/admin-show-online.png"></p>

<p><img src="https://chrisuehlinger.com/images/shattered/screenshots/actor-screen.png">
<strong>The Admin app allows us to see who’s logged on and what’s happening in the show</strong></p>

<p>Of the 3 React/Redux apps, the Admin App uses the least of these shiny web technologies, and is pretty much just a dashboard for displaying what’s in the database. As admins, we can see which actors and attendees have logged on, which ships are currently visiting which actors, we can move attendees between ships if need be, and we can see a list of errors the actors and attendees have encountered (more on this later).</p>

<p><img src="https://chrisuehlinger.com/images/shattered/screenshots/actor-app-normal.png">
<strong>The actor app allows performers to engage with the audience and view information about the ship they’re talking to</strong></p>

<p>The Actor App is more sophisticated, since it needs to handle WebRTC and media device concerns. It also has 3 modes: Normal, Mobile (used automatically if the window has a dimension less than 500px) and Headless (used if the querystring variable <code>headless</code> is set to <code>true</code>. The Normal mode is used by about half of the actors, and has the ability for them to see themselves, configure their audio/video devices, change any info about their user, character or planet, and view information about the ships they’re talking to (their chat, inventory, history of previous places, etc.).</p>

<p><img src="https://chrisuehlinger.com/images/shattered/screenshots/actor-app-mobile.jpg">
<img src="https://chrisuehlinger.com/images/shattered/screenshots/actor-app-headless.png">
<strong>The mobile and headless modes of the actor app give our actors flexibility to use whatever devices they have available</strong></p>

<p>The Mobile mode uses a tab-based layout to try and accomplish all the same goals, but since only one tab can be on the screen at a time, it’s a bit of a pain to use on its own. We’ve got Headless mode, which doesn’t do any of the audio/video streaming, but shows all the information about the current ship and can run on any laptop. Many actors have opted for using the Mobile mode (since their phone has a good camera) but keeping Headless mode open on an old laptop to make it easier to use the other features.</p>

<p><img src="https://chrisuehlinger.com/images/shattered/screenshots/ship-in-flight.png">
<strong>A group of attendees interacting with a character in the show</strong></p>

<p>The Attendee app is about as complex as the actor app, but doesn’t have a Headless mode (which is really just a power-user feature for actors). This app has multiple screens corresponding to the different phases of the show:</p>

<ul>
  <li>Preshow - A lobby screen where attendees can meet the shipmates they’ll be flying with</li>
  <li>Intro - A tutorial video</li>
  <li>Freeplay - The bulk of the show, where attendees alternate between interacting with characters and choosing their next destination from the Navigation Screen</li>
  <li>Ending - A livestreamed 3D ending scene</li>
  <li>Ended - This just redirects attendees out of the app to <a href="https://shatteredspace.live/program.html" target="_blank">a static page with our casts’ bios</a>.</li>
</ul>

<p><img src="https://chrisuehlinger.com/images/shattered/screenshots/host-app.jpg">
<strong>My setup for performing the motion capture at the end of the show</strong></p>

<p>At the end of the show, I perform a scene as Colonel Panic, the AI commander of the Star Jockeys. In this scene I go around to each ship and review the items they’ve managed to collect. Then a “resolution” happens that I won’t spoil here.</p>

<p>This performance is rendered on my desktop PC (Intel 8700K + RTX 2080TI) with a special version of the Actor app that I’ve built just for this purpose. The three.js scene here involves at least 7 huge models with MeshPhysicalMaterials and a dozen moving PointLights, so rather than rendering on attendees’ computers, I render it on mine and stream it to them using an <a href="https://www.elgato.com/en/gaming/cam-link-4k" target="_blank">Elgato Camlink 4K</a>, ffmpeg and the Janus (explained below) <a href="https://janus.conf.meetecho.com/docs/streaming.html" target="_blank">Streaming plugin</a>.</p>

<p>The motion capture work is done by taking a modified version of Apple’s <a href="https://developer.apple.com/documentation/arkit/tracking_and_visualizing_faces" target="_blank">TrackingAndVisualizingFaces</a> example from the ARKit docs and having it send each frame of mocap data over WebSockets to the server, which then forwards them to the Host app. It’s amazing that this works with sub-100ms latency, but it does.</p>

<p>I’m planning on open-sourcing all of this when the show is done, but I’d want to purge the git history in case there are any secrets lying around, and I’d warn any interested spelunkers that it will be more of an …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://chrisuehlinger.com/blog/2020/06/16/unshattering-the-audience-building-theatre-on-the-web-in-2020/">https://chrisuehlinger.com/blog/2020/06/16/unshattering-the-audience-building-theatre-on-the-web-in-2020/</a></em></p>]]>
            </description>
            <link>https://chrisuehlinger.com/blog/2020/06/16/unshattering-the-audience-building-theatre-on-the-web-in-2020/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23651117</guid>
            <pubDate>Fri, 26 Jun 2020 12:17:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Working on iPad]]>
            </title>
            <description>
<![CDATA[
Score 53 | Comments 96 (<a href="https://news.ycombinator.com/item?id=23650763">thread link</a>) | @tosh
<br/>
June 26, 2020 | https://www.notion.so/vercel/Working-on-iPad-ccefea4f9e06455da169c97b3fe054c1 | <a href="https://web.archive.org/web/*/https://www.notion.so/vercel/Working-on-iPad-ccefea4f9e06455da169c97b3fe054c1">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.notion.so/vercel/Working-on-iPad-ccefea4f9e06455da169c97b3fe054c1</link>
            <guid isPermaLink="false">hacker-news-small-sites-23650763</guid>
            <pubDate>Fri, 26 Jun 2020 11:21:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Numerical Linear Algebra for Programmers]]>
            </title>
            <description>
<![CDATA[
Score 211 | Comments 74 (<a href="https://news.ycombinator.com/item?id=23650640">thread link</a>) | @dragandj
<br/>
June 26, 2020 | https://aiprobook.com/numerical-linear-algebra-for-programmers?release=0.9.0 | <a href="https://web.archive.org/web/*/https://aiprobook.com/numerical-linear-algebra-for-programmers?release=0.9.0">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="lafp-why">
        
        
        
        <p>
          <h4>basically…</h4>



<h4>interactive &amp; dynamic</h4>
<h4>a direct link from theory to implementation</h4>
<h4>incredible performance</h4>
<h4>Intel &amp; AMD CPUs (MKL)</h4>
<h4>Nvidia GPUs (CUDA and cuBLAS)</h4>
<h4>AMD GPUs (yes, OpenCL too!)</h4>
<h4>Clojure (it’s magic!)</h4>
<h4>Java Virtual Machine (without Java boilerplate!)</h4>
<h4>complete source code</h4>
<h4>beautiful typesetting (see the sample chapters below)</h4>

        </p>
      </div><div id="lafp-interactive">
        
        
        
        <p>
          

<h4>see the result of executing each line</h4>
<h4>experiment in a live environment</h4>

<h4>no C++ build hell</h4>

<h3>no C++ syntax hell!</h3>

<h4>Java Virtual Machine, but without Java boilerplate</h4>

<h4>Clojure, the nicest language on earth :-)</h4>



        </p>
      </div><div id="lafp-fast">
        
        
        
        <p>
          

<h3>yet, high-level (you don’t touch C++)</h3>

<h2>CPUs</h2>

<h4>learn Intel MKL</h4>

<h2>GPUs</h2>

<h4>learn CUDA &amp; cuBLAS</h4>
<h4>learn OpenCL</h4>
<h4>all hardware: Nvidia, AMD, Intel</h4>

<h3>you don’t touch C++!!!</h3>

        </p>
      </div><div id="lafp-contents">
        
        
        
        <div>
          <h2>Table of Contents</h2>

<h3>Part 1: Getting Started (SOON)</h3>

<h4>Hello world (SOON)</h4>

<h4>Vectors, matrices, and linear algebra API (SOON)</h4>

<h4>Polymorphic acceleration (SOON)</h4>

<h3>Part 2: Linear algebra refresher (<a href="https://www.patreon.com/linear_algebra?ref=20">AVAILABLE</a>)</h3>

<h4>Vector spaces (<a href="https://www.patreon.com/linear_algebra?ref=21">AVAILABLE</a>)</h4>

<h4>Eigenvalues and eigenvectors (<a href="https://www.patreon.com/linear_algebra?ref=22">AVAILABLE</a>)</h4>

<h4>Matrix transformations (<a href="https://www.patreon.com/linear_algebra?ref=23">AVAILABLE</a>)</h4>

<h4>Linear transformations (<a href="https://www.patreon.com/linear_algebra?ref=24">AVAILABLE</a>)</h4>

<h3>Part 3: High performance matrix computations (<a href="https://www.patreon.com/linear_algebra?ref=40">AVAILABLE</a>)</h3>

<h4>Using matrices efficiently (<a href="https://www.patreon.com/linear_algebra?ref=41">AVAILABLE</a>)</h4>

<h4>Linear systems and factorization (<a href="https://www.patreon.com/linear_algebra?ref=42">AVAILABLE</a>)</h4>

<h4>Singular value decomposition (SVD) (<a href="https://www.patreon.com/linear_algebra?ref=43">AVAILABLE</a>)</h4>

<h4>Orthogonalization and least squares (<a href="https://www.patreon.com/linear_algebra?ref=44">AVAILABLE</a>)</h4>

<h3>Part 4: GPU acceleration</h3>

<h4>GPU computing crash course</h4>

<h4>CUDA and cuBLAS on Nvidia GPUs</h4>

<h4>OpenCL and CLBlast on AMD GPUs</h4>

<h3>Part 5: In practice (<a href="https://www.patreon.com/linear_algebra?ref=50">IN PROGRESS</a>)</h3>

<h4>Generating random matrices (<a href="https://www.patreon.com/linear_algebra?ref=51">AVAILABLE</a>)</h4>

<h4>Broadcasting (<a href="https://www.patreon.com/linear_algebra?ref=52">AVAILABLE</a>)</h4>

<h4>Mean, variance, and correlation (<a href="https://www.patreon.com/linear_algebra?ref=53">AVAILABLE</a>)</h4>

<h4>Principal component analysis (PCA) (<a href="https://www.patreon.com/linear_algebra?ref=54">AVAILABLE</a>)</h4>

<h3>Appendix</h3>

<h4>Setting up the environment and the JVM</h4>

        </div>
      </div></div>]]>
            </description>
            <link>https://aiprobook.com/numerical-linear-algebra-for-programmers?release=0.9.0</link>
            <guid isPermaLink="false">hacker-news-small-sites-23650640</guid>
            <pubDate>Fri, 26 Jun 2020 11:00:44 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Big Sur on Unsupported Macs]]>
            </title>
            <description>
<![CDATA[
Score 139 | Comments 115 (<a href="https://news.ycombinator.com/item?id=23650031">thread link</a>) | @todsacerdoti
<br/>
June 26, 2020 | https://parrotgeek.com/bigsur/ | <a href="https://web.archive.org/web/*/https://parrotgeek.com/bigsur/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p><span face="Helvetica, Arial, sans-serif"><b><u>Compatibility
            status</u></b> <br>
        Note: this patcher <i>only</i> supports computers<b> </b>that
        are in the table below. <b>Do not ask me to add support for other models.</b><br>
      </span></p><div>
      <tbody>
        <tr>
          <td><span face="Helvetica,
              Arial, sans-serif"><b>Model Identifier</b><br>
            </span></td>
          <td><span face="Helvetica,
              Arial, sans-serif"><b>Human-Readable Name</b><br>
            </span></td>
          <td><span face="Helvetica,
              Arial, sans-serif"><b>Status</b><br>
            </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacBookAir5,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">MacBook









              Air (11-inch, Mid 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacBookAir5,2<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">MacBook









              Air (13-inch, Mid 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacBookPro9,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">MacBook









              Pro (15-inch, Mid 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacBookPro9,2<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">MacBook









              Pro (13-inch, Mid 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacBookPro10,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">MacBook









              Pro (Retina, 15-inch, Mid 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacBookPro10,2<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">MacBook









              Pro (Retina, 13-inch, Early 2013)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">Macmini6,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">Mac
              mini (Late 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">Everything









              except Wi-Fi works<br>
            </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">Macmini6,2<br>
            </span></td>
          <td>
            <meta charset="utf-8">
            <span face="Helvetica, Arial, sans-serif">Mac mini (Late
              2012) quad-core<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">iMac13,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">iMac









              (21.5-inch, Late 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">iMac13,2<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">iMac









              (27-inch, Late 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">iMac14,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">iMac









              (21.5-inch, Late 2013) integrated GPU<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">Everything






              works<br>
            </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">iMac14,2<br>
            </span></td>
          <td>
            <meta charset="utf-8">
            <span face="Helvetica, Arial, sans-serif">iMac (27-inch,
              Late 2013)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">Everything






              works<br>
            </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">iMac14,3<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">iMac









              (21.5-inch, Late 2013) discrete GPU</span><br>
          </td>
          <td><span face="Helvetica, Arial, sans-serif">Everything






              works<br>
            </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacPro5,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">Mac
              Pro (Mid 2010/Mid 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">WiFi


              does not work; sleep issues<br>
            </span></td>
        </tr>
      </tbody>
    </div><p><span face="Helvetica, Arial, sans-serif">Special thanks to
        ASentientBot for the method of removing the installer
        compatibility check ("hax.dylib").</span><br>
    </p></div>]]>
            </description>
            <link>https://parrotgeek.com/bigsur/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23650031</guid>
            <pubDate>Fri, 26 Jun 2020 08:56:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A multiplayer board game in Rust and WebAssembly]]>
            </title>
            <description>
<![CDATA[
Score 121 | Comments 31 (<a href="https://news.ycombinator.com/item?id=23649369">thread link</a>) | @lukastyrychtr
<br/>
June 25, 2020 | http://www.mattkeeter.com/projects/pont/ | <a href="https://web.archive.org/web/*/http://www.mattkeeter.com/projects/pont/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">
<!-- End header -->


<h2>A multiplayer board game in Rust and WebAssembly</h2>
<p><a href="https://pont.mattkeeter.com/">
<img src="http://www.mattkeeter.com/projects/pont/screenshot.png">
</a></p><p>
<a href="https://pont.mattkeeter.com/">Click to play!</a>
</p>
<p><em>Pont</em> is an online implementation of
<a href="https://en.wikipedia.org/wiki/Qwirkle">Qwirkle, a board game by Mindware Games</a>.
It was written for my parents,
so they could play with friends and family during the COVID-19 stay-at-home era.</p>
<p>Play is split into <strong>rooms</strong>,
which are identified by a three-word code
(<code>size moody shape</code> in the image above).
Within each room,
the game distributes pieces,
enforces the game rules,
and provides a local chat window.</p>
<p>Unusually, it's a web-based multiplayer game <strong>without any Javascript</strong>:
both the client and server are written in <a href="https://www.rust-lang.org/">Rust</a>,
which is compiled into <a href="https://webassembly.org/">WebAssembly</a> to run on the browser.
(There's a Javascript shim to load the WebAssembly module, but I didn't have to write it myself)</p>
<h2>Architecture</h2>
<p>Keep in mind, I'm <em>not a web developer</em>,
so this is probably a weird <a href="https://en.wikipedia.org/wiki/Outsider_art">outsider architecture</a>
for web applications.
Here's what the system looks like:</p>
<p><img src="http://www.mattkeeter.com/projects/pont/diagram.svg" alt="Diagram"></p>
<p>The system uses <a href="https://letsencrypt.org/">Let's Encrypt</a> for certificates:
both static assets and WebSocket communication are encrypted
between the client and the server.
The game server does not communicate securely with the NGINX proxy,
but if anyone is on the server watching,
I've got bigger problems.</p>
<p>The <code>wasm</code> bundle and <code>pont-server</code> executable are both
written in Rust and managed in the <a href="https://github.com/mkeeter/pont"><code>pont</code> repository</a>.
They both depend on <a href="https://github.com/mkeeter/pont/blob/master/pont-common/src/lib.rs"><code>pont-common</code></a>,
which defines basic types and logic for gameplay
(e.g. so that both the client and server can check whether a move is legal).</p>
<p>The client and server communicate via <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API">WebSockets</a>.
Messages are strongly typed as an <a href="https://github.com/mkeeter/pont/blob/master/pont-common/src/lib.rs#L7-L48"><code>enum</code> in <code>pont-common</code></a>,
serialized using <a href="https://serde.rs/">Serde</a>,
and packed into <a href="https://github.com/servo/bincode">bincode</a>
to be sent as binary WebSocket messages.</p>
<h2>Server</h2>
<p>The game server using async Rust,
which was... exciting:</p>
<ul>
<li>There's a <a href="https://www.reddit.com/r/rust/comments/ej649l/a_summary_of_the_current_state_of_async_rust/fcw16a9/">"very polite cold war"</a>
going on between the two major (incompatible?) runtimes,
with packages that only work in one or the other</li>
<li>An <a href="https://docs.rs/futures/0.3.5/futures/channel/mpsc/index.html">infinite</a>
<a href="https://docs.rs/tokio/0.2.21/tokio/sync/mpsc/fn.channel.html">supply</a>
<a href="https://docs.rs/crossbeam-channel/0.4.2/crossbeam_channel/">of</a>
<a href="https://docs.rs/futures/0.3.5/futures/channel/oneshot/fn.channel.html">options</a>
<a href="https://docs.rs/futures-channel-preview/0.3.0-alpha.19/futures_channel/index.html">for</a>
<a href="https://doc.rust-lang.org/std/sync/mpsc/index.html">channels</a></li>
<li>General confusion between <a href="https://docs.rs/futures/0.3.5/futures/"><code>futures</code></a>,
<a href="https://doc.rust-lang.org/std/future/index.html"><code>std::Future</code></a>, and
<a href="https://docs.rs/futures-util/0.3.5/futures_util/"><code>futures_util</code></a>
(exacerbated by the fact that Googling for things will land you
into a random version of the docs)</li>
<li>Error messages that rival C++ in incomprehensibility</li>
</ul>
<p>To be fair, the Rust <code>async</code> ecosystem is relatively new,
so most of this can be ascribed to growing pains;
I'm sure that the ergonomics and library situation
will improve over time.</p>
<p>I ended up using the <a href="https://github.com/stjepang/smol"><code>smol</code> runtime</a>
because it's got relatively few dependencies,
and I appreciated that it wasn't trying to own the entire async universe
(unlike Tokio and <code>async-std</code>).</p>
<p>After getting over those hurdles,
the server architecture is relatively straightforward.
A bunch of independent tasks run asynchronously,
communicating to the outside world via WebSockets
and internally via <a href="https://docs.rs/futures/0.3.5/futures/channel/mpsc/fn.unbounded.html">unbounded MPSC queues</a>.</p>
<p>Here's an example of the server running one game (with two players),
plus one new client who has just connected.  Each rectangle
represents an async task:</p>
<p><img src="http://www.mattkeeter.com/projects/pont/server.svg" alt="Server"></p>
<p>The system has <code>2 + n_players + n_games</code> async tasks running at one time:</p>
<ul>
<li>A top-level task which accepts incoming connections.</li>
<li>A top-level task which logs the number of active rooms, once per minute</li>
<li>One async task per client connection, which passes messages between the WebSocket connection
and the application's internal queues.</li>
<li>One async task per room, which handles game state</li>
</ul>
<p>These tasks each map to a <a href="https://docs.rs/smol/0.1.10/smol/struct.Task.html"><code>smol::Task</code></a>.
(As a small optimization,
the first player's <code>Task</code> handles both the player communication
and running the room, which is why they're both blue in the diagram above)</p>
<p>The server compiles down to a 5 MB static binary.
The whole system is hosted on the smallest VM offered by
<a href="https://www.digitalocean.com/">Digital Ocean</a>,
which is a $5/month machine.
I'm looking forward to the inevitable <a href="https://news.ycombinator.com/">Hacker News</a>
<a href="https://en.wikipedia.org/wiki/Slashdot_effect">DDOS</a>,
where I can see how well it scales!</p>
<h2>Client</h2>
<p>The client is <a href="https://github.com/mkeeter/pont/blob/master/pont-client/src/lib.rs">2000 lines of framework-less excitement</a>.
It uses a
<a href="https://en.wikipedia.org/wiki/Finite-state_machine">state machine pattern</a>
to represent the flow of the game,
accepting messages from the server
and updating the state accordingly:
for example, top-level state flows from
<code>Connecting</code> to <code>CreateOrJoin</code> to <code>Playing</code>.</p>
<p>The game board is represented as an SVG;
everything else is standard HTML elements.
In fact, the whole UI is pre-constructed in
<a href="https://github.com/mkeeter/pont/blob/master/pont-client/deploy/index.html"><code>index.html</code></a>
and revealed on demand.</p>
<p>The client has a bit of polish:
Pieces are animated as they move around the board,
and there's an optional color-blind mode,
which adds corner markings to indicate color.</p>
<p><img src="http://www.mattkeeter.com/projects/pont/cb.png" alt="Color-blind mode"></p>
<p>I use direct DOM manipulation
(from the <a href="https://rustwasm.github.io/wasm-bindgen/api/web_sys/"><code>web-sys</code></a> crate)
to control the system.
This exercise has left me appreciating the usefulness of virtual DOMs,
but I didn't want to bring in the complexity of a framework.
(Is there a Rust + <code>wasm</code> version of <a href="https://svelte.dev/">Svelte</a> yet?)</p>
<p>For deployment,
I'm using <a href="https://rustwasm.github.io/wasm-pack/"><code>wasm-pack</code></a>
and serving the resulting <code>wasm</code> blob from the same server as the other static assets.</p>
<p>The main challenges on the client side were
(of course) dealing with cross-browser compatibility:
Safari, in particular, supports fewer features
and has funky handling of touch events.</p>
<h2>Conclusions</h2>
<p>After a bit of a learning curve,
this all worked surprisingly well!</p>
<p>The client side is still a bit messy,
with animations, UI inputs,
and server events all fighting to break the system's invariants.
For example,
there was a nasty bug where dragging the board while
an animation was running could drop the system into an invalid state.</p>
<p>This isn't surprising:
stateful UIs are hard,
which explains the popularity of declarative approaches.
At this point, the client is feature-complete
and hasn't quite collapsed under its own weight,
so I'm not inclined to do any dramatic refactorings.</p>
<p>Rust as a language continues to be great,
despite minor complaints.
I already discussed the async ecosystem above,
and won't dwell on that any further.
On the client side,
there are often impedance mismatches with WebAssembly:
for example, using Rust closures as callbacks
requires
<a href="https://github.com/mkeeter/pont/blob/master/pont-client/src/lib.rs#L1189-L1211">cryptic boilerplate</a>.</p>
<p>Still, with all of the pieces in place,
making changes is pleasantly fast,
and I trust the compiler to check that I haven't broken anything.</p>
<p>I'm particularly happy with the combination of WebSockets, Serde, and bincode:
having both the client and server process a strongly-typed stream of events
makes things easy to reason about.</p>
<h2>Links</h2>
<p><a href="https://pont.mattkeeter.com/">Play the game here</a>, or check out
<a href="https://github.com/mkeeter/pont">the source on Github</a></p>
<p><a href="https://news.ycombinator.com/item?id=23649369">Discussion on Hacker News</a></p>
<p>Questions?  Comments?  <a href="mailto:matt.j.keeter@gmail.com">Send me an email!</a></p>

<!-- Begin footer -->
</div></div>]]>
            </description>
            <link>http://www.mattkeeter.com/projects/pont/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23649369</guid>
            <pubDate>Fri, 26 Jun 2020 06:44:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Re-Stacking the GUI Stack]]>
            </title>
            <description>
<![CDATA[
Score 61 | Comments 1 (<a href="https://news.ycombinator.com/item?id=23649215">thread link</a>) | @todsacerdoti
<br/>
June 25, 2020 | https://genodians.org/nfeske/2020-06-23-gui-stack | <a href="https://web.archive.org/web/*/https://genodians.org/nfeske/2020-06-23-gui-stack">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="post">
        <div id="posting">
          <p><a href="https://genodians.org/nfeske/index">
            <img src="https://genodians.org/nfeske/author.png" alt="Norman Feske avatar">
           </a>
          </p>
          
          <p><span>June 23 2020 by
           <a href="https://genodians.org/nfeske/index">Norman Feske</a></span></p>
 <p>
  As I am currently right in the middle of a far-reaching rework of Genode's
  low-level GUI stack, I'd like to share a bit of background behind this work:
  the Why, the What, and the How.
 </p>
 <h4>
 <a name="Current_state"></a>
 Current state</h4>
  <p>
   The current incarnation of Genode's low-level GUI-related interfaces is almost
   identical to the very first version that we originally created in 2006.
   Genode has a very strong asymmetric notion of the
   <a href="https://genode.org/documentation/genode-foundations/20.05/architecture/Recursive_system_structure.html#Client-server_relationship">relationship</a>
   between client and server components. In this relationship, the client depends
   on the server but the server does not depend on the client.
  </p>
  <p>
   At the lowest level, the framebuffer driver and input driver(s) were
   envisioned as servers that provide the <i>Framebuffer</i> and <i>Input</i> session
   interfaces to higher-level GUI components. From our former academic view, this
   felt natural because those drivers <i>provide</i> <i>resources</i> to other components.
   Provide... serve... server! The nitpicker GUI server uses those low-level
   services to implement a higher level service that ultimately allows for the
   multiplexing of graphics and input.
   <a href="https://genode.org/documentation/genode-foundations/20.05/components/Common_session_interfaces.html#Nitpicker_GUI">Nitpicker</a>
   virtualizes the low-level framebuffer and input interfaces while supplementing
   the notions of visible views and input focus. Such a system looks as follows:
  </p>
  <p>
    <img src="https://genodians.org/nfeske/nitpicker_orig.png">
  </p>
  <p>
   The drivers and the nitpicker GUI server are displayed in red because they are
   servers. The GUI applications at the right are nitpicker clients. Nitpicker,
   in turn, is a client of the framebuffer and input drivers.
  </p>
  <p>
   The client interface of the nitpicker GUI server is success story. A few
   <a href="https://genode.org/documentation/release-notes/15.11#GUI_stack">evolutionary tweaks</a>
   notwithstanding, the original design scales up to the windowed working
   environment of Sculpt OS while retaining the tiny complexity of the nitpicker
   GUI server.
  </p>
  <p>
   However, the approach of modelling the framebuffer and input drivers as
   servers is a dead end, for the following reasons.
  </p>
  <ul>
   <li>
    <p>
     Drivers are sometimes extremely complex. When looking at the complexity of
     the Intel framebuffer driver (ported from the Linux kernel) for example, it
     feels foolish to trust that it won't fail. Because the nitpicker GUI server
     depends on the liveliness of the driver, however, the well-being of the
     driver is on the critical path for the entire GUI stack and all GUI
     applications.
    </p>
   </li>
   <li>
    <p>
     It is impossible to transparently restart or replace the driver at runtime
     without also restarting the GUI stack and - transitively - all GUI
     applications. This is because the nitpicker GUI server is connected as a
     client to the drivers. The connections are like a life supply for the GUI
     server. Cutting those would ultimately kill the GUI server.
    </p>
   </li>
   <li>
    <p>
     Adding secondary displays is rather difficult because this would require
     nitpicker to know what framebuffer servers are out there and to request
     multiple framebuffer connections. Adding such a protocol would inflate
     the complexity of nitpicker.
    </p>
   </li>
  </ul>
 <h4>
 <a name="Inverting_interfaces"></a>
 Inverting interfaces</h4>
  <p>
   To overcome these limitations, we must break the dependency of the GUI
   server from the drivers, like illustrated here:
  </p>
  <p>
    <img src="https://genodians.org/nfeske/nitpicker_next.png">
  </p>
  <p>
   In this scenario, the GUI server no longer <i>uses</i> the drivers, but the drivers
   use the GUI server. The relationship is reversed. Only the nitpicker GUI
   server remains red. Of course, the drivers cannot talk to nitpicker GUI
   server via nitpicker's regular client interface. Instead, two new interfaces
   enter the picture:
  </p>
  <div><dl>
   <dt>The <i>Capture</i> session interface</dt>
   <dd>
    <p>
     is like the inverse of the original
     <i>Framebuffer</i> session interface. It allows a client to obtain pixel data
     from the server. From the GUI server's perspective, a framebuffer driver
     is like a frame capturing device - which it is.
    </p>
   </dd>
   <dt>The <i>Event</i> session interface</dt>
   <dd>
    <p>
     is like the inverse of the original
     <i>Input</i> session interface. In contrast to a input session, which allows
     a client to obtain input events, an event session allows a client to
     induce input events. Nitpicker is an event server that consumes the input
     events from the driver(s).
    </p>
   </dd>
  </dl></div>
  <p>
   The benefits of this approach are manifold:
  </p>
  <ul>
   <li>
    <p>
     The low-complexity GUI server remains as the only component that must never
     fail, which makes the GUI stack much more resilient compared to today.
    </p>
   </li>
   <li>
    <p>
     Since the nitpicker GUI server no longer depends on the drivers, it can be
     started before the drivers are running, speeding up the boot time of
     graphical scenarios. In scenarios with rigid power management, we can remove
     the graphics driver - and switch off the graphics device - all while the GUI
     server and all GUI applications stay intact.
    </p>
   </li>
   <li>
    <p>
     Drivers can be restarted anytime. From the perspective of the nitpicker
     GUI server, this looks like a client disconnect and connect. Drivers
     can also be replaced at runtime, e.g., swapping out the VESA and Intel
     drivers.
    </p>
   </li>
   <li>
    <p>
     Connecting more than one driver to the nitpicker GUI server becomes
     conceptually simple. This clears the path towards multi-head support.
    </p>
   </li>
   <li>
    <p>
     The new capture session interface of the nitpicker GUI server would be
     the right hook for implementing screenshot/screencast applications, or a
     remote desktop server.
    </p>
   </li>
   <li>
    <p>
     Analogously to capture devices, input devices can enter and leave the
     system at any time without disruption, which will allow for the fine-grained
     management of USB HID devices. Think of plugging a new HID device to
     your Sculpt system. A new USB device would show up.
     The user can deploy the matching HID driver with the option of routing the
     event session of the driver to the system GUI server. Isn't that wonderful?
    </p>
   </li>
  </ul>
  <p>
   What is the downside? <i>It is a lot of work!</i> This leads us the following
   section.
  </p>
 <h4>
 <a name="The_plan"></a>
 The plan</h4>
  <p>
   Turning the low-level session interfaces upside down is an invasive operation
   that must be carried out in several steps, each yielding an intermediate
   consistent state.
  </p>
  <ol>
   <li>
    <p>
     We start off with some low-risk <b>cosmetic</b> changes, namely the renaming
     of the "Nitpicker" session interface to "Gui" session. The strange
     branding of the session interface after a particular implementation is a
     relic from the early days. This
     <a href="https://github.com/genodelabs/genode/issues/3778">change</a> has already
     entered Genode's master branch.
    </p>
   </li>
   <li>
    <p>
     Consistently use <b>32-bit RGB</b> as pixel format by all drivers and
     applications. This is a long-standing feature request that eliminates
     the need for color-space conversions and generally improves the output
     quality.
     It is quite labor-intensive because it requires me testing many
     different hardware platforms covering the drivers vesa_fb_drv, fb_sdl,
     intel_fb_drv, imx53_fb_drv, imx8_fb_drv, rpi_fb_drv, boot_fb_drv,
     omap4_fb_drv, exynos5_fb_drv.
     This <a href="https://github.com/genodelabs/genode/issues/3784">change</a> has already
     progressed well.
    </p>
   </li>
   <li>
    <p>
     Introducing the new <b>Capture</b> session <b>interface</b>.
    </p>
   </li>
   <li>
    <p>
     Implementing the <b>capture service</b> in the nitpicker GUI server.
    </p>
   </li>
   <li>
    <p>
     Introduce a <b>nitpicker</b> option to choose the framebuffer <b>back end</b> between
     the use of a requested framebuffer session (as done today), the use of a
     capture client for the pixel output, or the use of another GUI server
     (for stacking multiple instance of nitpicker).
    </p>
   </li>
   <li>
    <p>
     Turn "Framebuffer" <b>drivers</b> into "Capture" clients, covering all the
     drivers mentioned above. Shoveling code. Adjusting all existing
     scenarios to use nitpicker's capture service.
    </p>
   </li>
   <li>
    <p>
     <b>Pruning</b> the remaining use of the <b>framebuffer client</b> interface.
     In fact, when done, I want to remove the <tt>Framebuffer::Connection</tt>
     completely. This will require the reworking of the terminal, MESA back end,
     several tests, and the liquid_framebuffer. In the process, I hope to largely
     eliminate the use cases of the nit_fb (now called gui_fb) component so
     that this component can be removed in the end.
    </p>
   </li>
   <li>
    <p>
     <b>Turning</b> a few other <b>framebuffer clients</b> into "Capture" servers, in
     particular test-framebuffer, fb_bench, and test-driver_manager.
    </p>
   </li>
   <li>
    <p>
     <b>Removal</b> of the "Framebuffer" <b>session interface</b>, retaining the interface
     merely as a part of the GUI session.
    </p>
   </li>
   <li>
    <p>
     Introducing the new <b>Event</b> session <b>interface</b> and adding its implementation
     to the nitpicker GUI server.
    </p>
   </li>
   <li>
    <p>
     Adding a new <b>event_filter component</b> taking the place of the input_filter.
    </p>
   </li>
   <li>
    <p>
     With the structural changes done, it would be time for optimizations.
     As a prerequisite for tear-free animations, the <b>frame buffering</b> will be
     moved from the clients into the nitpicker GUI server. At first, this will be
     transparent to most clients. The subsequent removal of client-side buffering
     is second independent step. As another optimization, I plan to go though all
     places that employed the dithering of pixels.
    </p>
   </li>
  </ol>
  <p>
   Of those topics, the rework of the framebuffer drivers is certainly the most
   elaborate one. I'm considering to drop the Exynos5 and OMAP4 drivers.
   Even though I strive for replacing the input session interface by the new
   event session interface, the scope of the task of reworking the input drivers
   is not yet completely tangible to me.
  </p>
          
        </div> <!-- posting -->
      </div></div>]]>
            </description>
            <link>https://genodians.org/nfeske/2020-06-23-gui-stack</link>
            <guid isPermaLink="false">hacker-news-small-sites-23649215</guid>
            <pubDate>Fri, 26 Jun 2020 06:15:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Hitchhiker’s Guide to PlantUML]]>
            </title>
            <description>
<![CDATA[
Score 134 | Comments 24 (<a href="https://news.ycombinator.com/item?id=23648957">thread link</a>) | @bambambazooka
<br/>
June 25, 2020 | https://crashedmind.github.io/PlantUMLHitchhikersGuide/ | <a href="https://web.archive.org/web/*/https://crashedmind.github.io/PlantUMLHitchhikersGuide/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p>Tip</p>
<p><a href="http://www.plantuml.com/plantuml/svg/SYWkIImgAStDKU3YAYueoYn9LL39JImgoynJY3OqCgWmD37HDpIBLQZc0j1YTykjipeOWCzxDPX_7Kh2tFybRIJILB7PAtJIxvrfkfonyo1vGKpxh-ByCeVhlytNv-oC--_Wm_iG_3_oty1UsAjxN8x-7XRMkeUDvTsVmavKunxthELFOUigkoz_0dlhtjaRVVmHBEp2TS_SwT_3swvxpLLs7yDhrztpAXyVms7XkcNUTHk0jc5nOrJuZIknSBZB0BWFnpttBeTmlSquODw6_HqMOK_k9eGmGhkm51ntNOc5mz6VONLXjzL1tNtOodfHdy798Y00xy0-MdYwUx3aUC049aWRi0lntkbzsHq-I9TVNDY1nRt0RXyUvqh9Q5rXtyD2_hBJaf-AHycTh-e6FBnmBtY_PFbrq6om1FicFBpu2Upb5wbPfxmDXyzWV_WGJSd0U_0mFuTzRxRPEx0RwaTmq9y-P0Ia_OgFz2aSv6Skc8W2zoquV0vBNDS08lKjsCM_WAF09XlmaVu6zh-5VHBPmf9VmYB_5WuAVx9awdLXmcThxVmjVE_r_gF04QAe3BLMPB4tuG--5eF2YNkZMhAaL1Hw2_xWGK3XWBt3P2VDMx3Alt_MqypBSZjF2yDx-4ZlUos8BkX9aaVIl4fV52OY9gWF5Xdv7UmCV9Mbh91ogIEbJ6tQ8iW8a12Wf52844aEQaLYJaT-1_UuA5d0c4jvW47VifsEHIv9fM5AfK85WL5iQWt2E3UzXRs5PsAgY5A85-sMG-GSOynCIKwF2NZ22DIzarXuezSnPKqfuT-RDXzJJDZoNBLYVS9u7a-Oa5ZXTTAth4sRFQpnxJOrPcYexWYiO6HY1eNT6jRaYiYiRYnnOsCUaT8tZEqEDsgCc0USIiaBEZxKcc8YAdBlalTJrjURAgp8qvNm0YPYoccqkbO4nBg4WOOh90uvvU0r8UNuZxyuXUbApZjy4X8aD-2CX8qXNs6PgSJC86rEG6LeafW14OhGQzV0_GRdauWXz06xMg4nbbktMTWcjCoHYb4VyJDYpN8BSdYXZVfqqnqkPsidrpcTKa6TdnVu59GLhqA760KiQIuIWux-Kcmg9QaxKtzWUi2rSpjF0eLx1a90IA_iT6Uevc41Gid2YfmhGWx-cH1pvTQmfFX8w1Rs4pu5RfmdJ4CX9i1IgwgMdI50mZhP7xegFOj5RX9-qix2BKruVBR820EkrAIjqdj0KfRlQOrgjh3GCEcOAxMVaFR5zmKC_MGSCW_O8GyAILwuDM5NcSMyojh-MWfmipbrZDt0Q60QtD2_UXMtiHoAsdYT-O5maOKcrIvqwqkuTc6amrzP6aqypFx_M2I5xHsqASWB-W9pL1W4qHP_LHHulEW4MgRcIjpQclQ7Nz5IY8N9Fs4ckSbVohTPy1eMwldHUcnf-Q8CgMBJCB6bJ_w6yGTM1xz86jxaKDjv8Ii-fd5-o2mX45hcxeYNX3nlDPM2bZwP7l3nXCKb-9h_fGKcbE5UQwqq_v619pm3kcw97UPUEEe9N5EoKqiKCh3EuqO0zOlc2KrWlD5KKaQQHLfPw1H4zlByhCju4fgnn8IFCucL9WG3o_t8yhM8pE9EM6WJ0NCgf5112oijhdn7XoYPj3IZe5wPiMdu2UUcVNO3xeM8snE-qrXI0KGiDxYXoBFSHrALEL9IgZNhCBxpW0FLKdBi0dUep1PMsW249UUIywNLZHkNQ51n2vmoAp77LD3CGIfkmZfMD-5UvmAXy9ec0AIcUR84E62RLEN20RV6HfLn16VWeqzOPI8MU4rFQkR9nYDREEMAZVBXMM0Jmkp5NC8m90ClwVQK6sCDtZa39vd7CXXtu0lCaEtpVw01knUO1BxBXZP53C1PE0FoMKLuXNbM-meVPYSH0AaPU4dFfQXXYMwcA9nIGOIYm2jCLGPuWREu4vRa6tpljxgTizDCEALSOR31kIjCDRbR8e5xWLqbQSoQ_eRFXZb7R-0w7_cbnnRMAHWEju3vl6pQCX0tfZNzA1hIuMno8sMTpO6jKT7XhU1ssoqMe7_IaAAx9F6YhWC6As-kuSKsjIAIj9NMSd2t724iXFkR9ca1vwh2MYQwD5JYTdECh2gsCe3Gx-3_qMftEwwhEXp0xy_J1FnXSmcawwtEkszCd9OqqpLhh-tvNumgMSgle8P1XZGRBF27RiQHl5dW1bksOhAMwlHdE1EFq9-v2Na4Zi_z1bkus91LVTJVmHW5kwmgOdGiZ7TuZKnPcEMwUBV-7s3w3hPiwZ9nMUYsts6AWosgfPXCH7FdvF0ZtPz5xs-r1KVWNq-r1KMBJXa7lK_w3ekgNc4WFaFf_Zgb6tmFYS5CY5XixtQ7VKsumhp2zzpXUpOMOJ9O-sxq7Ru72IqqWjjVmcQFpAzGsknB_89q1huECURixTQFSDxly3VfhRKY8zhwXpGLaL9_b_PtT_RsWVV7v_hiQFp0PS5EHDmVxx6zcAUhQ8-7SyweK-gz-TegR17HChVmJPX_0WRfVO1C2FdjJbU6sGyf8l7m1YJJpAlfiX-DY0g6mtwwaWrENy8v0pD4mpXS631yXc5Ke4J3CDpVm7wUQEjECAoOCpxd-jrrE9iS2biolE1qWyr5-14OSC9tsGTizMno_Ej4ov3JpJKOVW3EVbpfyiZroDXSmb69XiqbN6MFknCcoC7mtDkiyjFEYpk240fdG5vWo6jMbrMsIFXuhCjENraB0DVQLRSmk1Gbm-2PV0duNxA-LPSj1S69UYl-8dc-l7MBjLjmss9Ws9ATUtsu7_5oeSxUKB5o14nfIsLVv9LEgxjRMXx5505ZJa1roEBoUzmj-sEu5RQqfH2O411DRcpmJSxkFYmLRHPYO64okpvCFkcxkvlRS1i9Wdd8281sKkJoZ9CMmCKrE0V2cORS68o-hLlkKd8uHS9JxW8BxIoMntJPt60O3QFsSDbncF5vxfBT3O95sFVJcUoSIX7Mc3lFGoLjJpXc0H6VwvIIc5neeT7SaQxvvSQirHlvN0yvInz8PNn5ZsxsueR05kGvrq-vxrK9FToQmGLURavR1Em_hulSMsMQuL9DLXYWZzOEMe9WCldSO6Qnuw9Q79O1D_75RBA1y3PWborSUwsAI3DrtWcv96u7WcAoqMO3bG7JsGjKNlT2zkbN6BofdYqeiA0KWor-IGEMR46mPK0glisq49zD1zy1keqZeR2tE2VjGN_9UOHm2VmAX4lrTWlFY66p029i1vF7zo8BXiD7vfc_Y8fFXJABnHiao1GxrIe7mDxcBENSSVlFFH_tHJDnB2ppyTwgJA2rUA6ymIWK2Iixx8zdXqNr2YSG38JB0llZzLpKNfKqkp0CiIFc2vnzUM9lB99d_iBYO5JHKjGGNqPo9lz6efwZXaW0KV1sF7OL2B9NH0XXROyJXS66CLxk6US3hdCDVoiHXi5oWnFW9pX16CnyJ6vAwudg2GjVfpfb284jeiku7EOJzjAh5hW3EU4fhx2AFaifViG6d-DAorJx8kvoJXw8W-tnpmLa1XmkzPGXUm13OPFFnmCWbtgKUg_djx8W4XF6_RYg3uoUTzLwEqfrNkfHyMXhoXe6OxMBCUquojVQ1cRkJ5alSBMsTmtzVznwxVl3Z3O--7YFj94oP4khpIhVm___tpzjd45h8p4CXU_pAyImaDlCFOImi8HDe2cba5EQWp9MR7LiETXomz0_NwVJGW-zYCTxJtpw1Mhoo7B5X0467uk1z-QCmsXJB6B-HHyJt1mhrUgSVpqMmGpjQhZdIvjmMg_-pC5wrN-wwxPf92g1fuj2l7plBQ7TmOspWocMXO7NaXMKl8T0a50TfHS1TLX7cbWiQ0GIYvOWJ5MfAvanXzewqu0b4-p0uHl9Gi76oXBgsfcTsBeVy3jxKKdgM4Quonbl8noFJlMQbtq_9CoEJ60ndULAEtSS-oUFeeVzmvPrS8v7Ilb_OKFz8-ajfl6GgxF7mR5G_jNid0OFsytpvdG2bgo4fklgfT3y9J4b-0y0"><img alt="playbutton_index" src="https://crashedmind.github.io/PlantUMLHitchhikersGuide/_images/play6.png"></a> <strong>Press play</strong></p>
<blockquote>
<div><p>Imagine being able to</p>
<ol>
<li><p>share a model or diagram between all members of the team that they can all understand and contribute to and edit</p></li>
<li><p>draw diagrams like below automatically from a text description.</p></li>
<li><p>describe a system before you build it, when you’re building it, and as you maintain it into the future - keeping the description and the system current, and in sync.</p></li>
<li><p>maintain that text version in a source code repository beside the code for the system it is describing</p></li>
</ol>
<p>Imagine having a diagramming tool that</p>
<ol>
<li><p>fits with a developer workflow, and developers are comfortable using</p></li>
<li><p>enables <strong>lightweight just-enough</strong> <a href="http://agilemodeling.com/essays/barelyGoodEnough.html">AgileModeling</a> in a way that meets <a href="https://tdan.com/best-practices-for-agile-documentation/18936">AgileModelingBP</a></p></li>
<li><p>fits with modern practices of Continuous Integration Continuous Delivery - and “everything as code” including diagrams.</p></li>
</ol>
<p>Well that’s what PlantUML gives you, and more…</p>
</div></blockquote>
</div></div>]]>
            </description>
            <link>https://crashedmind.github.io/PlantUMLHitchhikersGuide/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23648957</guid>
            <pubDate>Fri, 26 Jun 2020 05:26:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The War on Upstart Fiber Internet Providers]]>
            </title>
            <description>
<![CDATA[
Score 496 | Comments 213 (<a href="https://news.ycombinator.com/item?id=23647609">thread link</a>) | @joecool1029
<br/>
June 25, 2020 | http://chrishacken.com/the-war-on-upstart-fiber-optic-internet-providers/ | <a href="https://web.archive.org/web/*/http://chrishacken.com/the-war-on-upstart-fiber-optic-internet-providers/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>                                
                                    <div> 
                                        <p>As someone who grew up throughout the 90's and 00's, some of my fondest memories stem from progressive advancements in internet and computing technologies.  Upgrading from Dial-Up internet to DSL was a grand event in our house.  I remember my brother and I fighting over the computer day in and day out to play games like Wolfenstein - Enemy Territory, which was released in 2003. (I'm convinced that this will be the all-time best FPS game ever created.)  At around the same time, we upgraded to one of the best Dell computer's available at the time. It had 512MB of RAM and a Pentium 4 processor.  This was a major upgrade from our Compaq Celeron, which had something like 64MB of RAM. <br>
<img src="http://chrishacken.com/content/images/2020/03/MV5BOGFmNjMzZTktNDg2ZS00ZjllLTlkMTAtZTAzMzBkN2UyMzk2XkEyXkFqcGdeQXVyMjU3MzI1NzI@._V1_.jpg" alt="Wolfenstein - Enemy Territory"></p>

<p>Eventually, the grandeur of DSL faded as the rest of the world began to adopt Cable and Fiber internet.  It wasn't until I briefly moved to Philadelphia that I was finally able to experienced what I had been missing out on.  In college I lived in a neighborhood that was one of Verizon's first Fios builds.  I was absolutely blown away by the 25 Mbps connection.  This was in 2009. I'm amazed that over a decade later, in 2020, some households still don't have access to cable or fiber internet yet.</p>

<p>Like many of our customers do now, I could never figure out why it was so difficult to get us fiber service.  The cable is cheap, just throw it up on a pole and give me internet! Right?  Well, not so fast... <br>
<img src="http://chrishacken.com/content/images/2020/03/1849761.jpg" alt="Fiber Spaghetti"></p>

<p>A quick overview of how utility services are run and the challenges involved...</p>

<p>As most people know, there are primarily two ways to deliver utility services to a home or business.  Aerial and underground.  Water, gas, and sewer are always serviced underground for obvious reasons.  Electric, telephone, cable, and fiber have the ability to either be above or below ground.</p>

<h3 id="aerial">Aerial.</h3>

<p>As with anything else, aerial has pro's and con's.</p>

<p>The pro's are primarily upfront costs (this is debatable) and speed of deployment (this is also debatable).</p>

<p>The con's are that contrary to it being cheaper to physically deploy, the pole owners generally charge up-front make ready fee's.  These fees can range from $0 to upwards of $50,000/mile.  It's essentially pay to play.  If we want to attach to 50 poles, the pole owner might determine that 10 of those poles are old and need to be replaced before we can attach to them.  Rather than fork up the cash themselves, they'll force us to pay to replace their poles in order to approve the attachment.</p>

<p>In addition to that, there are the annual pole fee's.  Depending on your agreement, we've seen pole fee's ranging anywhere from $7/pole per year all the way up to $43/pole per year with 10% annual increases (I'm looking at you PPL.  This ridiculous rate was purely intended to keep us from attaching to their poles, IMO.  It's impossible to make money with these rates). <br>
<img src="http://chrishacken.com/content/images/2020/03/Screenshot-2020-03-10-22.04.34.png" alt="Pole Rates"></p>

<p>Another con is that even though installing the cable on poles is faster, it usually takes the pole owner around 6 months just to review applications and to determine make ready requirements and costs.  As an example, if we have fiber on a pole that's 1 pole short from being able to service your house, it would take at least 6 months just to run fiber to that one additional pole. So close, yet so far.</p>

<h3 id="underground">Underground.</h3>

<p>Like aerial, underground has its own list of pro's and con's.</p>

<p>When you install a service underground, you own it for life.  There are no annual fee's.  You pay one time to install it and you're set for life.  This sounds like a pro, but it's also a con.  When we run metro conduit, it generally costs us between $15-25/ft (not including customer drops).  For the sake of argument, let's assume we're at the high-end of our costs.  If we install 1,000ft of conduit, that's $25,000 that we need to pay out of pocket upfront.  Some blocks have upwards of 30 customers, but others have as little as 5.  Let's average it out at 20 customers per block, that's $1,250 upfront per customer, assuming we get every single customer.  Conservatively, we're initially looking at a 50% take rate.  This could grow to 100% overtime, but we never make that assumption. So that's $2,500/customer.  Imagine spending $2,500 per house/building and then have them tell you that your $69/m service is too expensive.  Generally speaking, we won't do a street unless our numbers look better than this, but this is a realistic scenario as we scale and get access to cheaper capital, etc.</p>

<p><img src="http://chrishacken.com/content/images/2020/03/enorthampton01.jpg" alt="Underground Construction">
<img src="http://chrishacken.com/content/images/2020/03/enorthampton02.jpg" alt="Underground Construction Restoration"></p>

<h3 id="politics">Politics</h3>

<p>Cost issues aside, there are a number of other hurdles one needs to get past just to begin the process of building out a network.  You'd think that risking everything you have in an effort to bring your local economy into the 21st Century would be a welcome sight.  That's what I thought too; was I wrong.  While there are plenty of supporters (I truly appreciate you all), there are just as many, if not more, critics.</p>

<p>We've been fortunate enough to have had a handful of people get behind us overtime and give us a shot.  I'm sure others haven't had it so easy.  I know this because even after we've become an established player in our city throughout the past 4 years, neighboring townships and municipalities haven't been as opened armed to welcome us into their communities as I had anticipated or would have liked.</p>

<p>I'll go into more detail on small government policies that really hamper our ability to deploy underground later below.</p>

<h3 id="toomanyopinions">Too Many Opinions</h3>

<p>I'm generally a big fan of individual citizens trying to make an impact in their communities.  However, in too many cases these contributions seem to be made in the form of unproductive complaints rather than productive feedback or action.  Far too many people have a say in things that they probably shouldn't.</p>

<p><strong><em>Case A.</em></strong></p>

<p>A new customer had recently signed an agreement with us to run fiber into their building.  This is a non-profit who's members are selflessly donating their time to restore a landmark in the community.  Upon receiving their signature, I notified the city that we would be pulling a permit to connect the building in question to our underground network.  They said okay; that was that.  Our nearest existing hand hole is approximately 90ft to the right of the new customer's property; in front of another property.  As a courtesy, I notified the manager of that establishment to let her know that we would be performing work over the weekend, from Friday into Saturday.  They're closed Saturday and Sunday so I had assumed they would appreciate the notice and possibly even sign up with us.  The project would involve removing 90ft of sidewalk, running conduit, and then restoring the sidewalk with brand spankin' new concrete.  The total timespan that this would occur, from when our shovel hit the ground to having new sidewalks in place, would be 48 hrs.  The response that I received from a member of their organization made me facepalm.</p>

<p><img src="http://chrishacken.com/content/images/2020/03/Screenshot-2020-03-10-18.53.55-copy.png" alt="Sidewalk Issues"></p>

<p>Not long after receiving this email, I became aware that they didn't even own the building in question, nevermind the sidewalk.  They lease it.  This was eventually "resolved" after a series of negotiations between the non-profit's president and the establishment in question.  Often times we aren't as lucky.</p>

<p>We initially planned to have this new customer installed within a week of them signing the contract.  Now it will end up being around 2 months from start to finish.  Long story short, I learned my lesson in trying to be courteous.</p>

<p><strong><em>Case B.</em></strong></p>

<p>Last year we were installing conduit for our fiber optic network.  There were countless instances where people would literally stop their cars, roll down their windows, and yell profanities at us.  In what world is that acceptable behavior for an adult? I can't imagine being so far off my rocker that I would feel the need to yell at a bunch of construction workers trying to build a fiber optic network (not that they had any idea what we were doing).  If these are the types of people influencing decisions, there's something wrong.</p>

<p>City workers have a tough job fielding complaints from people like this and I commend them for it.  It shouldn't affect policy though.</p>

<p><strong><em>Case C.</em></strong></p>

<p>In another incident that took place not long, maybe a day or two, after <em>Case B</em> above.  A local store owner came back to us as we're swinging pick axes in 95 degree heat telling us we need to hurry up and we should hire more workers.  "My customers keep calling saying there's no where to park."  Mind you, we're standing right next to a massive parking lot that is approximately 1/3rd full.  I made my best attempt to kindly explain that paying 3 guys to stand around a hole to watch one person hand-dig to expose a utility isn't going to make our work go any faster.  I don't think he liked my response.</p>

<h3 id="theconsequences">The Consequences</h3>

<p>In many cases, resident complaints are justified.  Utility providers need to be held accountable for shitty restoration work.  However, the way in which bad restoration work is being combated is counter productive.  There has been a huge increase in curb-to-curb restoration requirements by local governments.  Essentially what these rules state is that anytime a utility cuts asphalt beyond a predetermined length, say 100ft, they are then responsible for replacing the entire road surface from the curb on the left side of the street to the curb on the right side of the street.  I believe some municipalities are also trying to introduce these measures to offload the costs of repaving roads themselves, similar to how pole owners force you to replace their aging utility poles under their make-ready requirements.  (One municipality told me as much when I attended a local council meeting in an effort to get them to waive this ridiculous ordinance for us.)</p>

<p>These policies will ultimately do more harm than good.  For us, these are the one and only thing preventing us from providing superior fiber internet services in these areas.  Forcing curb-to-curb asphalt …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://chrishacken.com/the-war-on-upstart-fiber-optic-internet-providers/">http://chrishacken.com/the-war-on-upstart-fiber-optic-internet-providers/</a></em></p>]]>
            </description>
            <link>http://chrishacken.com/the-war-on-upstart-fiber-optic-internet-providers/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23647609</guid>
            <pubDate>Fri, 26 Jun 2020 00:55:14 GMT</pubDate>
        </item>
    </channel>
</rss>
