<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 50]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 50. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Mon, 10 Aug 2020 00:49:12 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-50.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Mon, 10 Aug 2020 00:49:12 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[Intel, ARM, IBM, AMD Processors Vulnerable to New Side-Channel Attacks]]>
            </title>
            <description>
<![CDATA[
Score 117 | Comments 22 (<a href="https://news.ycombinator.com/item?id=24089281">thread link</a>) | @beefhash
<br/>
August 7, 2020 | https://modernnetsec.io/intel-arm-ibm-amd-processors-vulnerable-to-new-side-channel-attacks/ | <a href="https://web.archive.org/web/*/https://modernnetsec.io/intel-arm-ibm-amd-processors-vulnerable-to-new-side-channel-attacks/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<div><a href="https://modernnetsec.io/wp-content/uploads/2020/08/intel-arm-ibm-amd-processors-vulnerable-to-new-side-channel-attacks-1.jpg"><amp-img alt="Side-Channel Attacks" data-original-height="380" data-original-width="728" src="https://modernnetsec.io/wp-content/uploads/2020/08/intel-arm-ibm-amd-processors-vulnerable-to-new-side-channel-attacks-1.jpg" title="Side-Channel Attacks" width="728" height="380" layout="intrinsic" i-amphtml-layout="intrinsic"><img alt="Side-Channel Attacks" src="https://modernnetsec.io/wp-content/uploads/2020/08/intel-arm-ibm-amd-processors-vulnerable-to-new-side-channel-attacks-1.jpg" title="Side-Channel Attacks" width="728" height="380" data-old-src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzM4MCcgd2lkdGg9JzcyOCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2ZXJzaW9uPScxLjEnLz4="></amp-img></a></div>
<p>It turns out that the root cause behind several previously disclosed speculative execution attacks against modern processors, such as <a href="https://thehackernews.com/2018/01/meltdown-spectre-vulnerability.html" target="_blank" rel="noopener noreferrer">Meltdown</a> and <a href="https://thehackernews.com/2018/08/foreshadow-intel-processor-vulnerability.html" target="_blank" rel="noopener noreferrer">Foreshadow</a>, was misattributed to ‘prefetching effect,’ resulting in hardware vendors releasing incomplete mitigations and countermeasures.</p>
<p>Sharing its findings with The Hacker News, a group of academics from the Graz University of Technology and CISPA Helmholtz Center for Information Security finally revealed the exact reason behind why the kernel addresses are cached in the first place, as well as presented several new attacks that exploit the previously unidentified underlying issue, allowing attackers to sniff out sensitive data.</p>
<p>The <a href="https://arxiv.org/pdf/2008.02307.pdf" target="_blank" rel="noopener noreferrer">new research explains</a> microarchitectural attacks were actually caused by speculative dereferencing of user-space registers in the kernel, which not just impacts the most recent Intel CPUs with the latest hardware mitigations, but also several modern processors from ARM, IBM, and AMD — previously believed to be unaffected.</p>
<div>
<a href="https://go.thn.li/contrast" rel="nofollow noopener sponsored noreferrer" target="_blank" title="cybersecurity"><amp-img alt="cybersecurity" src="https://modernnetsec.io/wp-content/uploads/2020/08/intel-arm-ibm-amd-processors-vulnerable-to-new-side-channel-attacks-2.jpg" width="728" height="90" layout="intrinsic" i-amphtml-layout="intrinsic"><img alt="cybersecurity" src="https://modernnetsec.io/wp-content/uploads/2020/08/intel-arm-ibm-amd-processors-vulnerable-to-new-side-channel-attacks-2.jpg" width="728" height="90" data-old-src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzkwJyB3aWR0aD0nNzI4JyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZlcnNpb249JzEuMScvPg=="></amp-img></a>
</div>
<p>“We discovered that effects reported in several academic papers over the past 4 years were not correctly understood, leading to incorrect assumptions on countermeasures,” the researchers told The Hacker News.</p>
<p>“This <a href="https://gruss.cc/files/prefetch.pdf" target="_blank" rel="noopener noreferrer">prefetching effect</a> is actually unrelated to software prefetch instructions or hardware prefetching effects due to memory accesses and instead is caused by speculative dereferencing of user-space registers in the kernel.”</p>
<p>Besides analyzing the actual root cause of the prefetching effect, some other key findings from the research are:</p>
<ul>
<li>Discovery of several new attacks exploiting the underlying root cause, including an address-translation attack in more restricted contexts, direct leakage of register values in specific scenarios, and an end-to-end Foreshadow exploit targeting non-L1 data.</li>
<li>A novel cross-core covert channel attack that, in some instances, could let attackers observe caching of the address (or value) stored in a register without relying on shared memory.</li>
<li>Spectre ‘prefetch’ gadgets can directly leak actual data, which not only makes <a href="https://thehackernews.com/2019/11/zombieload-cpu-vulnerability.html" target="_blank" rel="noopener noreferrer">ZombieLoad attack</a> efficient on Intel CPUs to leak sensitive data from internal buffers or memory but also impact non-Intel CPUs.</li>
<li>The speculative dereferencing issue — in certain attacks like <a href="https://thehackernews.com/2020/03/rowhammer-vulnerability-ddr4-dram.html" target="_blank" rel="noopener noreferrer">Rowhammer</a>, cache attacks, and DRAMA — could let attackers recover the physical addresses of JavaScript variables and exfiltrate information via <a href="https://gruss.cc/files/rowhammerjs.pdf" target="_blank" rel="noopener noreferrer">transient execution</a> remotely via a web browser.</li>
</ul>
<p>Additionally, researchers also demonstrated that the Foreshadow vulnerability on Intel CPUs could be exploited even when the recommended mitigations are enabled. This is made possible due to the fact the attack can be mounted on data not residing in L1 cache on kernel versions containing ‘prefetch’ gadgets.</p>
<h2>From Address Translation Attack to Foreshadow</h2>
<p>The idea behind this is straight-forward. System software relies on the CPU’s address translation mechanism to implement isolation among different processes. Each process has its own virtual memory space and cannot access arbitrary physical memory addresses outside of it.</p>
<p>[embedded content]</p>
<p>Address translation, thus, acts as an intermediate layer that maps the virtual address space, which is used by a program, to the physical address to a physical address.</p>
<p>The virtual address space also includes a kernel address space to house Linux kernel threads, thus making it easy for the underlying hardware to handle privileged instructions from user threads in kernel mode.</p>
<p>While operating system kernels can be secured against prefetch side-channel attacks via a technique called kernel page-table isolation (<a href="https://en.wikipedia.org/wiki/Kernel_page-table_isolation" target="_blank" rel="noopener noreferrer">KPTI</a> or <a href="https://gruss.cc/files/kaiser.pdf" target="_blank" rel="noopener noreferrer">KAISER</a>) — which enforces a strict kernel and userspace isolation such that the hardware does not hold any information about kernel addresses while running in user mode — the researchers found that it does not guarantee full protection from address-translation attacks, where an attacker tries to check if two different virtual addresses map to the same physical address.</p>
<p>Put differently, the “address-translation attack allows unprivileged applications to fetch arbitrary kernel addresses into the cache and thus resolve virtual to physical addresses on 64-bit Linux systems.”</p>
<p>While the original line of thought was that such attacks were related to prefetch instructions, the new finding proves otherwise, thereby validating that KAISER isn’t an adequate countermeasure against microarchitectural side-channel attacks on kernel isolation.</p>
<p>Instead, it exploits a Spectre-BTB-SA-IP (Branch Target Buffer, same address, in-place) gadget to cause information leakage, causing speculative execution, and further carry out Meltdown and Foreshadow (L1 Terminal Fault) attacks by bypassing current L1TF mitigations.</p>
<p><a href="https://thehackernews.com/2018/11/meltdown-spectre-vulnerabilities.html" target="_blank" rel="noopener noreferrer">Spectre-BTB-SA-IP</a> is a variant of <a href="https://arxiv.org/pdf/1811.05441.pdf" target="_blank" rel="noopener noreferrer">Spectre vulnerability</a> that exploits the Branch Target Buffer — a cache-like component in CPUs that’s used for branch prediction — to perform attacks within the same address space and the same branch location.</p>
<p>“The same prefetching effect can be used to perform Foreshadow,” the researchers said. “If a secret is present in the L3 cache and the direct-physical map address is derefenced in the hypervisor kernel, data can be fetched into the L1. This reenables Foreshadow even with Foreshadow mitigations enabled if the unrelated Spectre-BTB mitigations are disabled.”</p>
<p>“The consequence is that we are able to mount a Foreshadow attack on older kernels patched against Foreshadow with all mitigations enabled and on a fully patched kernel if only Spectre-v2 mitigations are disabled.”</p>
<h2>Enable Spectre-BTB mitigations such as Retpoline</h2>
<p>To highlight the impact of the side-channel attacks, the researchers established a cache-based covert channel that exfiltrated data from a process running on an Intel Core i7-6500U CPU to another stealthy process, achieving a transmission rate of 10 bit/s to relay a total of 128 bytes from the sender to the receiver process.<br>Furthermore, the researchers disclosed that it’s possible to leak register contents from an SGX enclave of Intel CPUs using a register that’s speculatively dereferenced (called “Dereference Trap”), using it to recover a 32-bit value stored in a 64-bit register within 15 minutes.</p>
<p>Lastly, ‘certain attacks’ can now be mounted remotely using JavaScript in a web browser, and “fill 64-bit registers with an attacker-controlled value in JavaScript by using WebAssembly.”</p>
<p>To mitigate these attacks, it’s recommended that current CPUs enable Spectre-BTB mitigations, including <a href="https://support.google.com/faqs/answer/7625886" target="_blank" rel="noopener noreferrer">retpoline</a> (short for “return trampoline”), which aims to <a href="https://software.intel.com/security-software-guidance/insights/deep-dive-retpoline-branch-target-injection-mitigation" target="_blank" rel="noopener noreferrer">prevent branch-target-injection</a> by isolating <a href="https://en.wikipedia.org/wiki/Branch_predictor#Indirect_branch_predictor" target="_blank" rel="noopener noreferrer">indirect branches</a> from speculative execution.</p>
</div></div>]]>
            </description>
            <link>https://modernnetsec.io/intel-arm-ibm-amd-processors-vulnerable-to-new-side-channel-attacks/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24089281</guid>
            <pubDate>Sat, 08 Aug 2020 05:24:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Alcohol as a social technology to check the trustworthiness of others (2014)]]>
            </title>
            <description>
<![CDATA[
Score 248 | Comments 255 (<a href="https://news.ycombinator.com/item?id=24088202">thread link</a>) | @searchableguy
<br/>
August 7, 2020 | https://hndex.org/7798063 | <a href="https://web.archive.org/web/*/https://hndex.org/7798063">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
<header>

<a href="https://news.ycombinator.com/item?id=7798063" target="_blank">comments</a> <a href="https://plus.google.com/+KajSotala/posts/hofuxyXz78j" target="_blank">original article</a></header>
<p>Ohhh, never thought of this hypothesis: that the act of getting
drunk together might be a social technology that helps us verify
the trustworthiness of others by inhibiting their higher cognitive
functions and thus making it harder to consciously fake things.
That would make sense.</p>
<p>&gt; To enhance our natural thin-slicing abilities, humans have
therefore also developed various cultural practices that make these
instant assessments more reliable. These techniques take advantage
of the fact that deception is fundamentally a cold-cognition act
and relies on cognitive control centers. This means that if we can
impair the cognitive control abilities of people we're trying to
judge, we’ll do a better job of sussing them out: they will
be less able to confuse our cheater-detection systems.</p>
<p>&gt; In one study that has proven enormously useful to law
enforcement agencies, researchers found that police officers could
significantly improve their ability to detect false statements if
suspects were asked to give their alibis in reverse order, starting
with the most recent event and working their way back. This is not
the way we normally tell stories, so being forced to do it
increases cognitive load. Dishonest suspects, it turns out, are
less effective liars if you handicap their conscious minds in this
way.</p>
<p>&gt; This reverse-order alibi technique is a great tool for law
enforcement but not terribly practical when evaluating a potential
business partner or deciding if the people you’re about to
make a peace treaty with are being sincere. There are other ways to
achieve the same effect, though. The police study aimed to reduce
subjects’ cognitive control ability by increasing the
load-adding more weight, as it were. Alternately, you can keep the
load constant but decrease cognitive control ability-weaken the
mental muscles-by suppressing cognitive control centers. One way to
do this is transcranial magnetic stimulation (TMS), which involves
applying a powerful magnetic force to the appropriate region of the
skull. TMS, however, is a very recent technology and not exactly
widely available. Also, in most cultures it’s considered bad
form to shock the heads of new acquaintances with huge magnets.</p>
<p>&gt; A much more low-tech and socially acceptable way to produce
the same effect is to get someone completely wasted. As we
discussed in chapter 6, one of the primary effects of alcohol and
other intoxicants is to "downregulate," or temporarily paralyze,
areas of the prefrontal cortex associated with cognitive control. A
couple shots of tequila is the liquid equivalent of a nice jolt of
TMS. It’s therefore no accident that intoxicants of various
sorts are frequently employed by human beings as social lubricants.
Alcohol, kava, cannabis, magic mushrooms, you name it: any
intoxicant that people can get their hands on quickly comes to play
a central role in social occasions, both formal and informal. In
ancient China, no major treaty was signed without first bringing
everyone together in an extended, alcohol-soaked banquet. In fact,
this is one feature of Chinese culture that has not changed a bit
in over four thousand years. Any modern businessperson hoping to
ink a deal with Chinese partners had better get his or her liver in
shape first.</p>
<p>&gt; On a less formal level, this is no doubt why intoxicants
are a universal feature of all sorts of human social gatherings,
from casual cocktail parties to fraternity mixers. Not only is
getting drunk pleasant, it also typically causes people to get
along more freely and easily (at least to a certain point, after
which the drunken fights break out). Intoxication enhances
cooperation in at least two ways. First of all, it reduces social
faking by inhibiting cognitive control centers. Second, if we all
get drunk together, we create a situation of mutual vulnerability
that makes trust easier to establish. Getting drunk is essentially
an act of mental disarmament. In the same way that shaking right
hands with someone assures them that you’re not holding a
weapon, downing a few tequila shots is like checking your
prefrontal cortex at the door. See? No cognitive control. You can
trust me.</p>
<p>Excerpt From: Slingerland, Edward. "Trying Not to Try." Crown
Publishing Group, 2014-03-04. ﻿</p>
</article></div>]]>
            </description>
            <link>https://hndex.org/7798063</link>
            <guid isPermaLink="false">hacker-news-small-sites-24088202</guid>
            <pubDate>Sat, 08 Aug 2020 01:32:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Swedish doctor's perspective on Covid]]>
            </title>
            <description>
<![CDATA[
Score 126 | Comments 244 (<a href="https://news.ycombinator.com/item?id=24087287">thread link</a>) | @gofiggy
<br/>
August 7, 2020 | https://sebastianrushworth.com/2020/08/04/how-bad-is-covid-really-a-swedish-doctors-perspective/ | <a href="https://web.archive.org/web/*/https://sebastianrushworth.com/2020/08/04/how-bad-is-covid-really-a-swedish-doctors-perspective/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		
<p>Ok, I want to preface this article by stating that it is entirely anecdotal and based on my experience working as a doctor in the emergency room of one of the big hospitals in Stockholm, Sweden, and of living as a citizen in Sweden. As many people know, Sweden is perhaps the country that has taken the most relaxed attitude of any towards the covid pandemic. Unlike other countries, Sweden never went in to complete lockdown. Non-essential businesses have remained open, people have continued to go to cafés and restaurants, children have remained in school, and very few people have bothered with face masks in public.</p>



<p>Covid hit Stockholm like a storm in mid-March. One day I was seeing people with appendicitis and kidney stones, the usual things you see in the emergency room. The next day all those patients were gone and the only thing coming in to the hospital was covid. Practically everyone who was tested had covid, regardless of what the presenting symtom was. People came in with a nose bleed and they had covid. They came in with stomach pain and they had covid.</p>



<p>Then, after a few months, all the covid patients disappeared. It is now four months since the start of the pandemic, and I haven’t seen a single covid patient in over a month. When I do test someone because they have a cough or a fever, the test invariably comes back negative. At the peak three months back, a hundred people were dying a day of covid in Sweden, a country with a population of ten million. We are now down to around five people dying per day in the whole country, and that number continues to drop. Since people generally die around three weeks after infection, that means virtually no-one is getting infected any more. If we assume around 0.5 percent of those infected die (which I think is very generous, more on that later), then that means that three weeks back 1,000 people were getting infected per day in the whole country, which works out to a daily risk per person of getting infected of 1 in 10,000, which is miniscule. And remember, the risk of dying is at the very most 1 in 200 if you actually do get infected. And that was three weeks ago. Basically, covid is in all practical senses over and done with in Sweden. After four months.</p>



<p>In total covid has killed under 6,000 people in a country of ten million. A country with an annual death rate of around 100,000 people. Considering that 70% of those who have died of covid are over 80 years old, quite a few of those 6,000 would have died this year anyway. That makes covid a mere blip in terms of its effect on mortality.</p>



<p>That is why it is nonsensical to compare covid to other major pandemics, like the 1918 pandemic that killed tens of millions of people. Covid will never even come close to those numbers. And yet many countries have shut down their entire economies, stopped children going to school, and made large portions of their population unemployed in order to deal with this disease.</p>



<p>The media have been proclaiming that only a small percentage of the population have antibodies, and therefore it is impossible that herd immunity has developed. Well, if herd immunity hasn’t developed, where are all the sick people? Why has the rate of infection dropped so precipitously? Considering that most people in Sweden are leading their lives normally now, not socially distancing, not wearing masks, there should still be high rates of infection.</p>



<p>The reason we test for antibodies is because it is easy and cheap. Antibodies are in fact not the body’s main defence against virus infections. T-cells are. But T-cells are harder to measure than antibodies, so we don’t really do it clinically. It is quite possible to have T-cells that are specific for covid and thereby make you immune to the disease, without having any antibodies. Personally, I think this is what has happened. Everybody who works in the emergency room where I work has had the antibody test. Very few actually have antibodies. This is in spite of being exposed to huge numbers of infected people, including at the beginning of the pandemic, before we realized how widespread covid was, when no-one was wearing protective equipment.</p>



<p>I am not denying that covid is awful for the people who do get really sick or for the families of the people who die, just as it is awful for the families of people who die of cancer, or influenza, or an opioid overdose. But the size of the response in most of the world (not including Sweden) has been totally disproportionate to the size of the threat.</p>



<p>Sweden ripped the metaphorical band-aid off quickly and got the epidemic over and done with in a short amount of time, while the rest of the world has chosen to try to peel the band-aid off slowly. At present that means Sweden has one of the highest total death rates in the world. But covid is over in Sweden. People have gone back to their normal lives and barely anyone is getting infected any more. I am willing to bet that the countries that have shut down completely will see rates spike when they open up. If that is the case, then there won’t have been any point in shutting down in the first place, because all those countries are going to end up with the same number of dead at the end of the day anyway. Shutting down completely in order to decrease the total number of deaths only makes sense if you are willing to stay shut down until a vaccine is available. That could take years. No country is willing to wait that long.</p>



<p>Covid has at present killed less than 6000 in Sweden. It is very unlikely that the number of dead will go above 7,000. An average influenza year in Sweden, 700 people die of influenza. Does that mean covid is ten times worse than influenza? No, because influenza has been around for centuries while covid is completely new. In an average influenza year most people already have some level of immunity because they’ve been infected with a similar strain previously, or because they’re vaccinated. So it is quite possible, in fact likely, that the case fatality rate for covid is the same as for influenza, or only slightly higher, and the entire difference we have seen is due to the complete lack of any immunity in the population at the start of this pandemic. </p>



<p>This conclusion makes sense of the Swedish fatality numbers – if we’ve reached a point where there is hardly any active infection going on any more in Sweden in spite of the fact that there is barely any social distancing happening then that means at least 50% of the population has been infected already and have developed immunity, which is five million people. This number is perfectly reasonable if we assume a reproductive number for the virus of two: If each person infects two new, with a five day period between being infected and infecting others, and you start out with just one infected person in the country, then you will reach a point where several million are infected in just four months. If only 6000 are dead out of five million infected, that works out to a case fatality rate of 0.12 percent, roughly the same as regular old influenza, which no-one is the least bit frightened of, and which we don’t shut down our societies for.</p>



<p>If you thought this article was interesting, then you might be interested in my follow-up article, about <a href="https://sebastianrushworth.com/2020/08/08/what-is-the-best-way-to-measure-rates-of-covid-immunity/">the best way to measure rates of covid infection in a population</a></p>



<p>Additionally, If you liked this article, then please click the link at the bottom of this page to subscribe and receive future articles straight to your inbox.</p>

<div>
	<p><img alt="" src="https://0.gravatar.com/avatar/f80948fe1de6fa8784ebcbce1a6c153c?s=42&amp;d=identicon&amp;r=G" height="42" width="42">	</p><!-- .author-avatar -->

	<div>
		

		<p>
			I am a practicing physician in Stockholm, Sweden. Every day I get asked questions by my patients about health, diet, exercise, supplements, and medications. There is a lot of misinformation on the internet and it is easy to get the wrong advice, and hard to tell what is right and what is wrong if you don’t have advanced scientific training. The purpose of this blog is to share what the science actually says.			<a href="https://sebastianrushworth.com/author/doctorsebastian/" rel="author">
				View all posts by Sebastian Rushworth, M.D.			</a>
		</p><!-- .author-bio -->
	</div><!-- .author-description -->
</div><!-- .author-info -->
	</div></div>]]>
            </description>
            <link>https://sebastianrushworth.com/2020/08/04/how-bad-is-covid-really-a-swedish-doctors-perspective/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24087287</guid>
            <pubDate>Fri, 07 Aug 2020 23:00:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Microsoft Fast Design]]>
            </title>
            <description>
<![CDATA[
Score 552 | Comments 181 (<a href="https://news.ycombinator.com/item?id=24083260">thread link</a>) | @no_wizard
<br/>
August 7, 2020 | https://www.fast.design/docs/introduction | <a href="https://web.archive.org/web/*/https://www.fast.design/docs/introduction">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Welcome to the FAST documentation! We're glad you're here. We can't wait to show you around.</p><h2>What is FAST?</h2><p>FAST is a collection of JavaScript packages centered around web standards, designed to help you efficiently tackle some of the most common challenges in website and application design and development.</p><p>Have you ever needed a reusable set of UI components that you could drop into your app and have an amazing experience? <em><strong>That's FAST.</strong></em></p><p>Have you ever needed to create your own components, and share them across your company, including across groups that use different, incompatible front-end frameworks? <em><strong>That's FAST.</strong></em></p><p>Have you ever needed to implement a branded experience or a design language like Microsoft's Fluent UI or Google's Material Design? <em><strong>That's FAST.</strong></em></p><p>Have you ever wanted to improve your app's startup time, render speed, or memory consumption? <em><strong>That's FAST.</strong></em></p><p>Have you ever wanted to adopt more web standards and build your site or app on a native web foundation that's immune to the shifting sands of the modern JavaScript front-end landscape? <em><strong>That's FAST.</strong></em></p><p>Let's take a look at what each of FAST's core packages gives us today.</p><h3>fast-element</h3><p><a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
<a href="https://badge.fury.io/js/%40microsoft%2Ffast-element" target="_blank" rel="noopener noreferrer"><img src="https://badge.fury.io/js/%40microsoft%2Ffast-element.svg" alt="npm version"></a></p><p>The <code>fast-element</code> library is a lightweight means to easily building performant, memory-efficient, standards-compliant Web Components. FAST Elements work in every major browser and can be used in combination with any front-end framework or even without a framework. To get up and running with <code>fast-element</code> see <a href="https://www.fast.design/docs/fast-element/getting-started">the Getting Started guide</a>.</p><h3>fast-foundation</h3><p><a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
<a href="https://badge.fury.io/js/%40microsoft%2Ffast-foundation" target="_blank" rel="noopener noreferrer"><img src="https://badge.fury.io/js/%40microsoft%2Ffast-foundation.svg" alt="npm version"></a></p><p>The <code>fast-foundation</code> package is a library of Web Component classes, templates, and other utilities intended to be composed into registered Web Components by design systems (e.g. Fluent Design, Material Design, etc.). The exports of this package can generally be thought of as un-styled base components that implement semantic and accessible markup and behavior.</p><p>This package does not export Web Components registered as <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements" target="_blank" rel="noopener noreferrer">custom elements</a> - it exports parts and pieces intended to be <em>composed</em> into Web Components, allowing you to implement your own design language by simply applying CSS styles and behaviors without having to write all the JavaScript that's involved in building production-quality component implementations.</p><h3>fast-components</h3><p><a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
<a href="https://badge.fury.io/js/%40microsoft%2Ffast-components" target="_blank" rel="noopener noreferrer"><img src="https://badge.fury.io/js/%40microsoft%2Ffast-components.svg" alt="npm version"></a></p><p><code>fast-components</code> is a library of Web Components that <em>composes</em> the exports of <code>fast-foundation</code> with stylesheets aligning to the FAST design language. This composition step registers a custom element. See the <a href="https://www.fast.design/docs/components/getting-started">quick start</a> to get started using the components.</p><h3>fast-components-msft</h3><p><a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
<a href="https://badge.fury.io/js/%40microsoft%2Ffast-components-msft" target="_blank" rel="noopener noreferrer"><img src="https://badge.fury.io/js/%40microsoft%2Ffast-components-msft.svg" alt="npm version"></a></p><p><code>fast-components-msft</code> is a library of Web Components that <em>composes</em> <code>fast-foundation</code>. <code>fast-components-msft</code> uses the same custom element names as <code>fast-components</code>, but makes use of different stylesheets that support Microsoft's Fluent design language.</p><h3>Component Explorer</h3><p>Launch our <a href="https://explore.fast.design/" target="_blank" rel="noopener noreferrer">Component Explorer</a> to experience our <a href="https://www.npmjs.com/package/@microsoft/fast-components" target="_blank" rel="noopener noreferrer">FAST Components</a> and development tools.</p><h2>Getting started</h2><p>If you're looking to get started using our components right away, take a look at <a href="https://www.fast.design/docs/components/getting-started">the components quick start</a>. You'll also want to check out <a href="https://www.fast.design/docs/integrations/introduction">our integrations</a> if you're looking to add the components into a Webpack build or incorporate them with another front-end framework. For those interested in implementing their own design system or customizing the styles of the components, after you <a href="https://www.fast.design/docs/components/getting-started">have a look at the components</a>, you'll want to read through <a href="https://www.fast.design/docs/design/introduction">our styling docs</a>. Finally, if your goal is to build your own components or apps with <code>fast-element</code>, you can learn all about that in our <a href="https://www.fast.design/docs/fast-element/getting-started">guide to building web components with FASTElement</a>.</p><h2>Joining the community</h2><p>Looking to get answers to questions or engage with us in realtime? Our community is most active <a href="https://discord.gg/FcSNfg4" target="_blank" rel="noopener noreferrer">on Discord</a>. Submit requests and issues on <a href="https://github.com/Microsoft/fast/issues/new/choose" target="_blank" rel="noopener noreferrer">GitHub</a>, or join us by contributing on <a href="https://github.com/Microsoft/fast/labels/community:good-first-issue" target="_blank" rel="noopener noreferrer">some good first issues via GitHub</a>.</p><p>We look forward to building an amazing open source community with you!</p></div></div>]]>
            </description>
            <link>https://www.fast.design/docs/introduction</link>
            <guid isPermaLink="false">hacker-news-small-sites-24083260</guid>
            <pubDate>Fri, 07 Aug 2020 15:55:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A T Cell Army against SARS-CoV-2]]>
            </title>
            <description>
<![CDATA[
Score 68 | Comments 28 (<a href="https://news.ycombinator.com/item?id=24082327">thread link</a>) | @karmel
<br/>
August 7, 2020 | https://www.hellovirology.com/2020/08/a-t-cell-army-against-sars-cov-2.html | <a href="https://web.archive.org/web/*/https://www.hellovirology.com/2020/08/a-t-cell-army-against-sars-cov-2.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<div id="post-body-3178459137750369132">



<p>
We have talked a fair <a href="https://www.hellovirology.com/2020/07/what-is-mrna-vaccine.html">amount</a> <a href="https://www.hellovirology.com/2020/07/antibody-hope-in-sars-cov-2.html">about</a> antibodies, and much of the SARS-CoV-2 discussion is focused on antibodies as indicators, treatments, or vaccines. However, antibodies produced by B-cells are only one part of the larger immune picture, albeit one of the most accessible parts. To develop a comprehensive treatment strategy for SARS-CoV-2, we will likely need to understand how the broader network of immune cells responds to the virus. Today, we’ll take a closer look at the T cell response to SARS-CoV-2 infection, and what it says about long-term immunity.
</p>
<h3>A robust T cell response</h3>


<p>
A brief refresher: T cells, <a href="https://www.hellovirology.com/2020/06/adaptive-immune-cells.html">you may remember</a>, are adaptive immune cells. Each T cell has a unique T cell receptor that recognizes a different set of foreign peptides, and if a T cell’s receptor is activated, that T cell clones itself and produces an army of similar T cells capable of fighting off the invader that was recognized. T cells come in several varieties, the two most prominent of which are CD4+ T cells and CD8+ T cells. CD4+ T cells are responsible for surveying peptides (that is, short protein fragments) presented by antigen-presenting cells like B cells and macrophages and starting a signaling cascade that activates the rest of the immune system, and are thus referred to as “helper” T cells. CD8+ T cells survey peptides presented by normal tissue cells throughout the body, and, if they recognize one of the presented peptides as foreign, they kill the cell under the assumption that it has been infected. CD8+ T cells are thus called “killer” T cells.</p><p><img height="441" src="https://lh6.googleusercontent.com/VHihcE0ie5EooWOw2mc8MzfuYgaOlru5R7lLNl22U_DTENRS9eBrKdPNZd1a0q609Hhyl7WZLuQpw8lVU3fO2ZsWAYwdT_anu_JpkUAMOyP1IkBQ_TGsvrYS4geTdOtRC1TVjQLU=w499-h441" width="499"></p><p>Given these critical roles in immune system activation, scientists are studying the extent to which CD4+ and CD8+ T cells recognize peptides from SARS-CoV-2. In <a href="https://www.nature.com/articles/s41586-020-2550-z">one recent paper</a>, Grifoni et al. created pools of peptides that tile the entire set of proteins that make up SARS-CoV-2. In one pool, they created a peptide for every set of 15 amino acids from the Spike protein, tiled such that each length-15 chain overlapped by ten amino acids with the next peptide in the pool. In another pool, they computationally predicted which peptides would be efficiently held by antigen presenting cells like macrophages, and made peptides that covered the rest of the SARS-CoV-2 proteins. A similar pool was made for the peptides predicted to be efficiently held in the MHC class I molecules that CD8+ T cells recognize.</p> <p><img height="250" src="https://lh4.googleusercontent.com/zUoM8PrduU9w1Tw6QW9QYVvR_PE7ctTnUvJyqoBkLcEO6jqFuuZwkc97g5hStxr7hNOl4ceN3bcB4PBHx0GrHLioF1cOAWLW9-eK3K7Xk6U_rw-ZTmx9oj5FiyisoABi1VRZ7fYv" width="241"></p><p>
Scientists regularly create overlapping peptides that tile proteins of interest when studying which pieces of a protein immune cells recognize. This is a generic example showing overlap strategies from Mimotopes.com, a company that creates and sells custom peptides.
</p>
<p>
To test out the effects of these peptide pools, the researchers collected blood from patients who tested positive for COVID-19 but were not hospitalized, 20 - 35 days after symptom onset. The researchers extracted the Peripheral Mononuclear Blood Cells (PBMCs) from the blood, as these include circulating T cells and other immune cells, and then ran a series of experiments to see how the T cells responded to the peptide pools. The number of patients was small (20 patients exposed to SARS-CoV-2, and 20 unexposed controls), but even so, the results were consistent: all recovered COVID-19 patients showed evidence of a robust T cell response to SARS-CoV-2 peptides. 100% of patients had CD4+ T cells that recognized and became activated in response to peptides from the Spike pool as well as peptides from the non-Spike peptide pool. These activated cells were able to produce inflammatory cytokines (immune signaling molecules) and to quickly clone themselves. The response of the patients’ CD8+ T cells was less universal, but still robust: 70% of patients had CD8+ T cells that were activated in response to the SARS-CoV-2 peptide pools. 
</p>
<h3>Memories of infections past</h3>


<p>
What does this T cell response mean? For starters, it indicates that recovered COVID-19 patients have a stronghold of “memory” T cells— T cells that have seen SARS-CoV-2 and learned its patterns so that they are ready to respond more quickly in the future. It’s unclear whether these T cells are able to confer long-term immunity for the patients, but there is some evidence that they might: another paper published by <a href="https://www.nature.com/articles/s41586-020-2550-z">Le Bert et al.</a> ran a similar set of peptide/T cell experiments, but they were able to include a set of long-recovered SARS-CoV-1 patients. They found that even after 17 years, these patients had T cells that were able to quickly respond to both SARS-CoV-1 and SARS-CoV-2 peptides, which gives us hope that T cell memory of SARS-CoV-2 will be similarly long-lived.
</p>
<p>
These cross-reactive T cells were not limited to SARS-CoV-1 patients, either. Both Grifoni et al. and Le Bert et al. used PBMCs drawn from donors without any exposure to COVID as controls, but these unexposed controls proved more interesting than the “zero baseline” we might have expected, as up to 50% of the unexposed controls showed some degree of reactivity to peptides from SARS-CoV-2, though these reactions were skewed toward the non-spike peptide pools. The researchers reason this is likely due to previous exposure to coronaviruses that cause common colds, and indeed, all unexposed controls had antibodies for two common coronaviruses, HCoV-OC43 and HCoV-NL63. If true, this cross-reactivity between common cold coronaviruses and SARS-CoV-2 could explain some of the variability in severity of COVID-19 across different people; some immune systems may already be primed to react to SARS-CoV-2 by prior infections. Further, given that the cross-reactive responses were more pronounced for non-spike proteins, this finding lends support to the idea that we should have a multi-target approach to vaccination and treatment, rather than a Spike-only approach.
</p>
<p>
(We should pause for a moment here to address a nagging question: wait, if even the unexposed controls showed responses to SARS-CoV-2 peptides, how do we know any of these responses are real? Isn’t the whole idea of a control to give a baseline to compare to? There are several reasons to believe these results are legitimate: peptide assays are fairly robust in immunological studies; the amplitude and targets of the control response are distinct from the COVID-19-exposed response; and multiple studies from multiple labs found the same results with the same peculiarities. That said, the sample size is very small, and the lack of a non-reactive control should always be concerning, so more studies in this area should be conducted before we draw any strong conclusions here.)
</p>

<p>
COVID-19-exposed cells (top row) showed a robust response to a number of SARS-CoV-2 targets, but the unexposed controls also showed some responsiveness, especially among lesser-known viral peptides.
</p>
<h3>Reading the T leaves</h3>


<p>
Taken all together, these T cell experiments demonstrate that, well, T cells matter, too. A robust immune response requires many cells, and the evidence of consistent T cell activation in recovered patients indicates that T cells play an important role in the natural clearance of the virus. It stands to reason, then, that an effective vaccination strategy will likely have to consider how and when to activate T cells. These studies identify a number of distinct peptides that activate T cells across patients, and could therefore be used along with antibodies as part of a vaccination strategy.
</p>
<h3 id="sources">Sources</h3>


<ul>

<li>Image 1: <a href="https://commons.wikimedia.org/wiki/File:Figure_42_02_04.png">https://commons.wikimedia.org/wiki/File:Figure_42_02_04.png</a>

</li><li>Image 2: Product image from <a href="http://www.mimotopes.com/peptideLibraryScreening.asp?id=90">http://www.mimotopes.com/peptideLibraryScreening.asp?id=90</a> , which sells peptide services

</li><li>Image 3: Figure 6B and 6C from Grifoni et al.

</li><li><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7289747/">Vaccination strategies to combat novel corona virus SARS-CoV-2</a>

</li><li>Grifoni et al: <a href="https://www.sciencedirect.com/science/article/pii/S0092867420306103">Targets of T Cell Responses to SARS-CoV-2 Coronavirus in Humans with COVID-19 Disease and Unexposed Individuals</a> 

</li><li>Le Bert et al: <a href="https://www.nature.com/articles/s41586-020-2550-z">SARS-CoV-2-specific T cell immunity in cases of COVID-19 and SARS, and uninfected controls</a> </li></ul>
</div>
</div></div>]]>
            </description>
            <link>https://www.hellovirology.com/2020/08/a-t-cell-army-against-sars-cov-2.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24082327</guid>
            <pubDate>Fri, 07 Aug 2020 14:38:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[JuliaCon2020: Julia Is Production Ready]]>
            </title>
            <description>
<![CDATA[
Score 185 | Comments 97 (<a href="https://news.ycombinator.com/item?id=24082281">thread link</a>) | @ViralBShah
<br/>
August 7, 2020 | https://bkamins.github.io/julialang/2020/08/07/production-ready.html | <a href="https://web.archive.org/web/*/https://bkamins.github.io/julialang/2020/08/07/production-ready.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    

<p>Last time I have <a href="https://bkamins.github.io/julialang/2020/08/02/post_juliacon_1.html">posted</a> about the take-aways for DataFrames.jl from
<a href="https://juliacon.org/2020/">JuliaCon 2020</a>. This time I wanted to share my general conclusions
from attending different talks at this extremely successful event.</p>

<p>I have spent 20 years now deploying data science related projects in corporate
environments (back then it was not called data science, but we were already
training neural networks to make predictions) and have many colleagues who are
deeply into enterprise software development. Quoting a discussion with
Tomasz Olczak I had some time ago, who is a genuine one-man army in
delivering complex enterprise projects:</p>

<blockquote>
  <p>Julia is fast, and has a very nice syntax, but its ecosystem is not mature
enough for use in serious production projects.</p>
</blockquote>

<p>For many years I would agree with it, but after <a href="https://juliacon.org/2020/">JuliaCon 2020</a>
I believe we can confidently announce that</p>

<p>
  <b><i>Julia is production ready!</i></b>
</p>

<p>Let me now give a list of key (in my opinion) presentations given during
<a href="https://juliacon.org/2020/">JuliaCon 2020</a> that make me draw this conclusion.</p>

<p>I will not comment here on functionalities related to number crunching, as it
is clear that Julia shines here, but rather I want to focus on the things that
make Julia a great tool for deployment in production (still I skip many
interesting talks in this area — check out the detailed <a href="https://live.juliacon.org/agenda/">agenda</a> to
learn more).</p>



<p>In <a href="https://live.juliacon.org/talk/Y3H7FG">this talk</a> <a href="https://github.com/quinnj">Jacob Quinn</a> gives an end to end tutorial how
to build and deploy in an enterprise setting a microservice using Julia.
He gives ready recipes how to solve typical tasks that need to be handled in
such contexts: logging, context management, middleware setup, authentication,
caching, connection pooling, dockerization, and many other, that
are bread and butter of enterprise projects.</p>

<p>As an addition be sure to check out:</p>

<ul>
  <li>the <a href="https://live.juliacon.org/talk/Z8TE39">shippable apps</a> talk, where <a href="https://github.com/KristofferC">Kristoffer Carlsson</a> guides you
through creating executables which can be run on machines that do not have Julia
installed.</li>
  <li>the <a href="https://live.juliacon.org/talk/N39HSX">Julia for scripting</a> presentation, during which
<a href="https://github.com/fredrikekre">Fredrik Ekre</a> discusses the best practices for using Julia in contexts
where you need to execute short code snippets many times.</li>
  <li>the <a href="https://live.juliacon.org/talk/DTLBM9">Genie.jl</a> talk, in which <a href="https://github.com/essenciary">Adrian Salceanu</a> shows that it is currently
a mature, stable, performant, and feature-rich Julia web development framework.</li>
</ul>



<p>The two talks <a href="https://live.juliacon.org/talk/PLFURQ">Pkg.update()</a> and <a href="https://live.juliacon.org/talk/RXAN8F">What’s new in Pkg</a> show that
currently Julia has best in class functionalities for enterprise grade dependency
management for your projects. The list of provided functionalities is so long
that it is hard to list them all here.</p>

<p>Let me just mention one particular tool in this ecosystem, that is presented in
<a href="https://live.juliacon.org/talk/9WMAVU">BinaryBuilder.jl</a> talk that explains how to take software written in compiled
languages such as C, C++, Fortran, Go or Rust, and build precompiled artifacts
that can be used from Julia packages with ease (which means that no compilation
has to take place on client side when you install packages having such dependencies).</p>



<p>A natural topic related to dependency management is how to integrate Julia with
external tools. This area of functionality is really mature. Here is a list of
talks that cover this topic:</p>
<ul>
  <li><a href="https://live.juliacon.org/talk/7MALUA">Make your Julia code faster and compatible with non-Julia code</a></li>
  <li><a href="https://live.juliacon.org/talk/NNVQQF">Wrapping a C++ library using CxxWrap.jl</a></li>
  <li><a href="https://live.juliacon.org/talk/XGHSWW">Julia and C++: a technical overview of CxxWrap.jl</a></li>
  <li><a href="https://live.juliacon.org/talk/Y7ERM9">Introducing the @ccall macro</a></li>
  <li><a href="https://live.juliacon.org/talk/PHGCKB">Integrating Julia in R with the JuliaConnectoR</a></li>
  <li><a href="https://live.juliacon.org/talk/Q88P8U">Integrate Julia and Javascript using Node.js extensions</a></li>
</ul>

<p>Here it is worth to add Julia has had a great integration with Python for many
years now, see <a href="https://github.com/JuliaPy">JuliaPy</a>.</p>

<p>A good end to end example of doing some real work in Julia that requires integration
is <a href="https://live.juliacon.org/talk/KK9S9V">Creating a multichannel wireless speaker setup with Julia</a>
talk that show how to easily stitch things together (and in particular featuring
ZMQ.jl, Opus.jl, PortAudio.jl, and DSP.jl).</p>

<p>Another interesting talk showcasing integration capabilities is
<a href="https://live.juliacon.org/talk/GFE3DB">JSServe: Websites &amp; Dashboards in Julia</a>
that shows a high performance framework to easily combine interactive plots,
markdown, widgets and plain HTML/Javascript in Jupyter / Atom / Nextjournal and
on websites.</p>



<p>The two great talks <a href="https://live.juliacon.org/talk/DWCJUK">Juno 1.0</a> and <a href="https://live.juliacon.org/talk/HBTFT7">Using VS Code</a> that current IDE
support for Julia in VS Code is first class. You have all tools that normally you
would expect to get: code analysis (static and dynamic), debugger, workspaces,
integration with Jupyter Notebooks, and remote capabilities.</p>



<p>I do not want to cover many different ML algorithms that are available in Julia
natively, as there are just too many of them (and if something is missing you
can easily integrate it — see the integration capabilities section above).</p>

<p>However, on top of particular models you need frameworks that let you manage
ML workflows. In this area there are two interesting talks, one about
<a href="https://live.juliacon.org/talk/DMHZCC">MLJ: a machine learning toolbox for Julia</a> and the other showing
<a href="https://live.juliacon.org/talk/AD7TQW">AutoMLPipeline: A ToolBox for Building ML Pipelines</a>. From my experience
such tools are crucial when you want to move with your ML models from data scientist’s
sandbox to a real production usage.</p>



<p>Obviously, I have omitted many interesting things that were shown during
<a href="https://juliacon.org/2020/">JuliaCon 2020</a>. However, I hope that the aspects I have covered here,
that is:</p>

<ul>
  <li>enterprise grade patterns to create microservices and applications in Julia,</li>
  <li>robust dependency management tools,</li>
  <li>very flexible and powerful capabilities to integrate Julia with existing code
bases that were not written in Julia,</li>
  <li>excellent developer tooling in VSCode,</li>
  <li>mature packages that help you to create production-grade code for ML solutions
deployment,</li>
</ul>

<p>show that already now Julia can (and should) be considered as a serious option
for your next project in enterprise environment.</p>

<p>What I believe is crucially important is that not only we have required tools
ready but also we have great practical showcases how they can be used to build
robust production code with.</p>


  </div>
</article>

      </div>
    </div></div>]]>
            </description>
            <link>https://bkamins.github.io/julialang/2020/08/07/production-ready.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24082281</guid>
            <pubDate>Fri, 07 Aug 2020 14:32:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Self-Contained Development Environments (2018) [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 63 | Comments 24 (<a href="https://news.ycombinator.com/item?id=24082194">thread link</a>) | @tosh
<br/>
August 7, 2020 | https://charig.github.io/assets/papers/SCDE-DLS.pdf | <a href="https://web.archive.org/web/*/https://charig.github.io/assets/papers/SCDE-DLS.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://charig.github.io/assets/papers/SCDE-DLS.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-24082194</guid>
            <pubDate>Fri, 07 Aug 2020 14:25:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[On the Performance of User-Mode Threads and Coroutines]]>
            </title>
            <description>
<![CDATA[
Score 142 | Comments 52 (<a href="https://news.ycombinator.com/item?id=24081713">thread link</a>) | @carimura
<br/>
August 7, 2020 | https://inside.java/2020/08/07/loomperformance/ | <a href="https://web.archive.org/web/*/https://inside.java/2020/08/07/loomperformance/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://inside.java/2020/08/07/loomperformance/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24081713</guid>
            <pubDate>Fri, 07 Aug 2020 13:46:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I made a mechanical keyboard with 3D-printed switches]]>
            </title>
            <description>
<![CDATA[
Score 177 | Comments 30 (<a href="https://news.ycombinator.com/item?id=24081046">thread link</a>) | @jstanley
<br/>
August 7, 2020 | https://incoherency.co.uk/blog/stories/jesboard.html | <a href="https://web.archive.org/web/*/https://incoherency.co.uk/blog/stories/jesboard.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<h3>I made a mechanical keyboard with 3d-printed switches</h3>
<p><i>Fri  7 August 2020</i></p>
<p><i>Tagged: <a href="https://incoherency.co.uk/blog/tags/3dprinting.html">3dprinting</a>, <a href="https://incoherency.co.uk/blog/tags/keyboard.html">keyboard</a></i></p>
<p>The keyboard is done! This is basically the result of what I've been working on for the past 2 months, which has
involved 3 iterations of testing machines, over 100 printed switches, and now finally a keyboard that I can type on.
Unfortunately it is not a very good keyboard, but you can't win them all.</p>
<p>Here's some pictures of the keyboard:</p>
<p><a href="https://img.incoherency.co.uk/2843"><img src="https://img.incoherency.co.uk/2843"></a></p>
<p><a href="https://img.incoherency.co.uk/2844"><img src="https://img.incoherency.co.uk/2844"></a></p>
<p><a href="https://img.incoherency.co.uk/2845"><img src="https://img.incoherency.co.uk/2845"></a></p>
<p>And here's a video of me typing on it:</p>
<p><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/iEBbCk1WJUk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>
<p>(In the video it is a bit wobbly because the back is propped up to take the pressure off the exposed wiring. I have subsequently printed a couple of small legs to raise up
the back of the keyboard and now it is a lot <i>less</i> wobbly, but it could still do with some soft feet).</p>
<p>I am very happy with how the keyboard looks, and also happy that I have managed to produce a working keyboard using 3d-printed switches in the first place. I believe
this may be a world first.</p>
<p>That said, I started using the jesboard to write this blog post, and it was too annoying to type on so I went back to the Filco. Spending some time typing
on my homemade switches has given me a newfound appreciation for just how good Cherry MX switches are. I'm not sure what it is that makes the
jesboard so unpleasant to type on, there's just a general vagueness to it that makes typing frustrating. Pressing a single key up and down feels basically fine, which is why I hadn't
noticed this problem while developing the switches. But trying to use it as an actual keyboard, and type at a sensible speed, just feels <i>really</i> bad. It
is genuinely the worst keyboard I have ever used. So that's disappointing.</p>
<p>I think to improve upon this you'd probably want to reduce the activation force (that's easy, just make the spring thinner) and add some tactile feedback so it is easier to tell
when the switch has actually been pressed. Beyond that, I'm not sure.</p>
<h2>Switches</h2>
<p><a href="https://img.incoherency.co.uk/2841"><img src="https://img.incoherency.co.uk/2841"></a></p>
<p>If you want to learn more about the switches, I would recommend looking at some of my other <a href="https://incoherency.co.uk/blog/tags/keyboard.html">posts tagged "keyboard"</a>, but in short:
pressing on the stem at the top compresses the spiral spring (I copied the spring design from <a href="https://www.youtube.com/channel/UCSsm4h2ccJMdR6bsAFyIu6A">Riskable 3D Printing</a>, he
is also developing 3d-printable keyboard switches, but using magnet sensors instead of making mechanical switches himself). Once
the stem is pressed down far enough, a contact wire bridges the 2 contacts at the bottom, activating the switch. As the switch is pressed further, the leaf spring compresses, allowing
the stem to move further down while allowing the contact wire to remain in place. Eventually the spiral spring bottoms out against its casing and then stem movement stops. When the key is released,
the spiral spring pushes everything back up to the top.</p>
<p>The leaf spring has a section in its bend that is narrow in the "other" axis, to allow it easily tilt side-to-side to ensure good contact with both of the contact wires.</p>
<p>I don't have a good photo of the latest switch design, but I have this of an earlier version:</p>
<p><a href="https://img.incoherency.co.uk/2757"><img src="https://img.incoherency.co.uk/2757"></a></p>
<p>The working principle is the same but the new version is a bit shorter.</p>
<p>The switches are printed in PETG. If you want to see them in action, you might enjoy my <a href="https://www.youtube.com/watch?v=hRBQBf6jzFM">video of operating the switch tester</a>.
The final incarnation of the switch design lasted over 350k presses in all cases, and some instances still hadn't failed at 500k presses. This is a lot lower than the "tens of millions" that might be
expected of a commercial switch, but it's a big improvement over <a href="https://incoherency.co.uk/blog/stories/keyswitch-failure.html">13907</a> which is where the first iteration failed, and that was on an extremely
gentle machine.</p>
<p>I said I was going to experiment with moving the activation point down to 75% of the plunger travel so as to reduce the strain on
the leaf spring. I did test this on the <a href="https://incoherency.co.uk/blog/stories/another-new-tester.html">new machine</a>, with 5 of the old design and 5 of the new design side-by-side, and the new design lasted almost
twice as long, so that was a good improvement.</p>
<p>The gold-plated "jewellery wire" that I bought off eBay ended up working well and soldering well (so I conclude it was not varnished),
and 4 metres (costing £4) was <i>just</i> enough to do the entire keyboard.</p>
<p>If you want, you can <a href="https://incoherency.co.uk/interest/3dpswitch.tar.gz">download the switch CAD</a>, including STL and FreeCAD files.</p>
<h2>Case</h2>
<p><a href="https://img.incoherency.co.uk/2805"><img src="https://img.incoherency.co.uk/2805"></a></p>
<p><a href="https://img.incoherency.co.uk/2804"><img src="https://img.incoherency.co.uk/2804"></a></p>
<p><a href="https://img.incoherency.co.uk/2832"><img src="https://img.incoherency.co.uk/2832"></a></p>
<p>The case is split into 2 halves that are then glued together, so that it fits on the bed of the 3D printer. There is a large rectangular hole at the top and bottom in each half, and a long bit of plastic
inside joining them, to add a bit more strength to the joint. There's not a lot to the case design really, it is just a shape to fit the switches into,
with a bulge at the top to house the microcontroller, an exit hole for the cable, stabiliser mounts, and a cool-looking logo. I made the general shape of the case halves in FreeCAD, and then imported the resulting STL
into OpenSCAD to cut out the holes for the switches, because I found it easier to get the layout correct with code.</p>
<p>I printed the logo in a different colour by having the printer stop and wait for me to change the filament at the layer height where the colour changes, using the
<a href="https://marlinfw.org/docs/gcode/M600.html">M600</a> G-code command. PrusaSlicer has a nice GUI for setting this up, so I didn't even need to manually edit the G-code.</p>
<p><a href="https://img.incoherency.co.uk/2846"><img src="https://img.incoherency.co.uk/2846"></a></p>
<p>If I were to make another keyboard, I would give myself more space to work with underneath by reducing the thickness of the "solid" middle part that the switches are mounted in.
I found that there was not really enough room to run the diodes and wires. I would also add provision for a few screws to attach a bottom cover to protect the wiring inside.</p>
<p>The case and keycaps are printed in Prusament Galaxy Black PLA, which I think gives a really nice finish.</p>
<h2>Keycaps</h2>
<p><a href="https://img.incoherency.co.uk/2848"><img src="https://img.incoherency.co.uk/2848"></a></p>
<p>The keycaps were designed using <a href="https://github.com/rsheldiii/KeyV2">KeyV2</a>, a free parametric keycap library for OpenSCAD. If you want to design
some keycaps, you should check out KeyV2. Its creator, <a href="https://github.com/rsheldiii">Bob</a>, is friendly and gave me helpful advice and assistance.</p>
<p>There are several different ways to make an ISO (UK-style) enter key in KeyV2, but I couldn't find any combination of settings that would let me have rounded corners, sloping top,
and dished top, so I ended up making the enter key by hand in FreeCAD.</p>
<p>I was originally going to use "outset" legends on the keycaps, like I used on the <a href="https://incoherency.co.uk/blog/stories/3pct-keyboard.html">macro keypad</a>. But I read this comment in the KeyV2 source
which changed my mind, so I used inset legends instead:</p>
<pre><code>// make legends outset instead of inset.
// broken off from artisan support since who wants outset legends?
$outset_legends = false;</code></pre>
<p>But having printed all the keycaps, I'm not sure whether I think inset legends actually <i>are</i> better. They range from "perfectly fine" to "almost invisible" depending on the lighting. I'd
say the outset legends were easier to read.</p>
<h2>Wiring</h2>
<p><a href="https://img.incoherency.co.uk/2836"><img src="https://img.incoherency.co.uk/2836"></a></p>
<p>The switches are hand-wired in a 15x5 <a href="https://en.wikipedia.org/wiki/Keyboard_matrix_circuit">keyboard matrix</a>, with diodes allowing current to pass only in one direction. 14x5 would be enough
if you thought about it a bit more than I did, but 15x5 is fine.</p>
<p>Originally I was planning to use an Arduino for the microcontroller, which has only 16 IO pins. This would allow for an 8x8 matrix, but when I went to layout the wiring, I came up with this, where
red is columns and green is rows:</p>
<p><a href="https://img.incoherency.co.uk/2824"><img src="https://img.incoherency.co.uk/2824"></a></p>
<p>Obviously this is too complicated to wire up in real life, particularly in the small amount of space provided in the bottom of my case. You may also notice it was too complicated for me to
lay out in GIMP, as I have failed to connect the full-stop and apostophe keys to any row. For these reasons I decided to use a <a href="https://www.pjrc.com/teensy/">Teensy</a> 2.0 instead, which allowed me to use a more sensible matrix layout:</p>
<p><a href="https://img.incoherency.co.uk/2835"><img src="https://img.incoherency.co.uk/2835"></a></p>
<p>(I laid this out on <a href="https://kbfirmware.com/">kbfirmware.com</a>).</p>
<p>The other part of the wiring is that the USB cable has to reach the microcontroller. I left a 4mm hole in the side of the case for the cable to run through, but this is too small for the connector
on the end. I was originally planning to cut the connector off and solder the wires directly to the USB pads on the micocontroller board, but they were too small and annoying to access, so instead
I just soldered the MiniUSB end back on and plugged it in. It's a tight fit but it does the job.</p>
<p><a href="https://img.incoherency.co.uk/2847"><img src="https://img.incoherency.co.uk/2847"></a></p>
<p>In hindsight, I am not sure whether I regret hand-wiring the keyboard. I toyed with the idea of getting a PCB made up that I could directly solder my switches to. It would certainly have
made it easier to put the keyboard together, but I thought outsourcing the manufacturing of a PCB kind of takes the edge off making your own switches...</p>
<h2>Stabilisers</h2>
<p>Here's a clip showing how the stabilisers work:</p>
<p><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/ZTvDP3Qutwk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>
<p>The idea is that when you press down on one side you cause the bar to rotate, which then pulls down on the other side of the switch, forcing the key to move down parallel (instead of rocking)
and activate the switch properly. The bar is made of 1.75mm stainless steel wire bent into a suitable shape. Thick stainless wire is quite hard to cut, but doable with a big-ish pair of nippers.</p>
<p>While trying to fit the stabilisers for the spacebar, I managed to break off the mounts attached to the case. This is bad news because the case halves are about a 10-hour print each, and aside from
that I had already soldered up all of the switches. To reprint the case halves would involve undoing all of my soldering work, and then 20 hours of printing, and then redoing all of the soldering.</p>
<p>I wasn't interested in redoing all of that work, so as a last resort I drilled a hole into the case in the position of each stabiliser mount, and printed 2 new stabiliser mounts, long enough to fit
in the holes. I printed the mounts in PETG so that they'd be less likely to break.</p>
<p><a href="https://img.incoherency.co.uk/2842"><img src="https://img.incoherency.co.uk/2842"></a></p>
<p>This worked really well, disaster averted! The mounts were a tight fit in the drilled holes so I didn't even need to use any glue.</p>
<h2>QMK</h2>
<p>I used <a href="https://qmk.fm/">QMK</a> for the keyboard firmware, running on a Teensy 2.0. I found it quite hard to get started with my custom keyboard, because almost all of the documentation
is geared towards the case where you are using an off-the-shelf keyboard which is already defined in QMK. The key point I needed to know was that you can use the script "<tt>./util/new_keyboard.s…</tt></p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://incoherency.co.uk/blog/stories/jesboard.html">https://incoherency.co.uk/blog/stories/jesboard.html</a></em></p>]]>
            </description>
            <link>https://incoherency.co.uk/blog/stories/jesboard.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24081046</guid>
            <pubDate>Fri, 07 Aug 2020 12:17:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Pocket P.C. Open Sourced]]>
            </title>
            <description>
<![CDATA[
Score 81 | Comments 33 (<a href="https://news.ycombinator.com/item?id=24078853">thread link</a>) | @nullagent
<br/>
August 6, 2020 | https://blog.popcorncomputer.com/2020/08/05/pocket-p-c-open-sourced/ | <a href="https://web.archive.org/web/*/https://blog.popcorncomputer.com/2020/08/05/pocket-p-c-open-sourced/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-content" role="main">

	
<article id="post-194">

	
<!-- .entry-header -->

	<div>

		<div>

			
<div><figure><img src="https://opensource.popcorncomputer.com/community/bottom-2lyr-pcb-twitter-resolution-scaled.jpg" alt=""></figure></div>



<p>If you would like to follow along with the latest design or would like to dive deep into the internals of <a href="https://pocket.popcorncomputer.com/" target="_blank" rel="noreferrer noopener">Pocket P.C.</a> we have created a repository on <a href="https://github.com/PopcornComputer/PocketPC-Hardware" target="_blank" rel="noreferrer noopener">GitHub</a> for the latest hardware files. The work is licensed under a <a href="http://creativecommons.org/licenses/by-sa/3.0/us/">Creative Commons Attribution-ShareAlike 3.0 United States License</a>.</p>



<p>&nbsp; Click the GitHub image below to check out the latest files.</p>



<figure><a href="https://github.com/PopcornComputer/PocketPC-Hardware" target="_blank" rel="noopener noreferrer"><img src="https://opensource.popcorncomputer.com/blog/GitHub_PocketPC.png" alt="GitHub Repository Badge"></a></figure>



<h3><strong>We are one step closer to shipping Pocket P.C. with the latest developments.</strong></h3>



<p>The latest D.V.T PCB design is out for production. We expect the PCBs to arrive within 10-12 days.&nbsp; After that, we will be assembling 25 units.</p>



<p>The D.V.T. design brings with it a newly added SPI Flash which will allow <a href="https://pocket.popcorncomputer.com/" target="_blank" rel="noreferrer noopener">Pocket P.C. </a>to more easily boot multiple operating systems on the same <a href="https://pocket.popcorncomputer.com/" target="_blank" rel="noreferrer noopener">Pocket P.C.</a> We also changed the design to a 10-layer PCB stackup vs. 8-layers which will ensure better signal integrity for high-speed signals.</p>



<p>The keyboard layout has been tweaked incorporating feedback from community suggestions and from hands-on the 3D printed prototypes. Thank you to everyone who submitted feedback about our initial layout. The space bar has been extended to allow for it to be pressed from a comfortable hand position and a few other minor changes. You can view the latest layout in our community keyboard thread here: <a href="https://community.popcorncomputer.com/t/pocket-p-c-keyboard-layout-part-2/541" target="_blank" rel="noreferrer noopener">Pocket P.C. Keyboard Layout (Part 2)</a></p>



<p>We learned a lot from the last production run of Original Popcorn. We did not receive the level of support that we were promised from the USB-C IC manufacturer that we chose to handle the USB Power Delivery system. As such, we changed the <a href="https://pocket.popcorncomputer.com/" target="_blank" rel="noreferrer noopener">Pocket P.C.</a> design to incorporate a robust Texas Instruments single-chip solution. With this new solution, we added to the design dedicated port protector ICs with ESD protection and surge protection ICs also from Texas Instruments on every ports. This will make the design more robust to faulty power conditions.</p>



<p>Finally, to ensure that <a href="https://pocket.popcorncomputer.com/" target="_blank" rel="noreferrer noopener">Pocket P.C. </a>has great software support out of the box, we have requested embedded development help from the community. Our goal is to ensure that we get all aspects of our products mainlined so that custom kernels will not be required. In order to accomplish this, a community effort is required to review and test new solutions before submitting them to the Linux Kernel mailing list. If you are interested in following with our development efforts you can join the discussion here: <a href="https://community.popcorncomputer.com/t/embedded-linux-development-help-requested/559/15" target="_blank" rel="noreferrer noopener">Embedded Linux Development Help Requested</a></p>



<figure><img src="https://opensource.popcorncomputer.com/community/top-2lyr-pcb-twitter-resolution-scaled.jpg" alt=""></figure>



<h3>Visit the shop to pre-order your Pocket P.C. today!</h3>



<h4><a href="https://shop.popcorncomputer.com/" target="_blank" rel="noreferrer noopener"><strong>Pre-order Now</strong></a></h4>



<h3>Keep up to date on the latest developments in our community.</h3>



<p>In an effort to be more transparent with the latest on-goings with development and production, we have created a community thread where we will post updates as they happen.</p>



<h4><a href="https://community.popcorncomputer.com/t/pocket-p-c-development-updates/552" target="_blank" rel="noreferrer noopener"><strong>Community Website</strong></a></h4>





		</div><!-- .entry-content -->

	</div><!-- .post-inner -->

	<!-- .section-inner -->

	
	<!-- .pagination-single -->

	
		<!-- .comments-wrapper -->

		
</article><!-- .post -->

</div></div>]]>
            </description>
            <link>https://blog.popcorncomputer.com/2020/08/05/pocket-p-c-open-sourced/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24078853</guid>
            <pubDate>Fri, 07 Aug 2020 06:04:47 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[First Impressions of Rust]]>
            </title>
            <description>
<![CDATA[
Score 266 | Comments 180 (<a href="https://news.ycombinator.com/item?id=24076083">thread link</a>) | @jmillikin
<br/>
August 6, 2020 | https://john-millikin.com/first-impressions-of-rust | <a href="https://web.archive.org/web/*/https://john-millikin.com/first-impressions-of-rust">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><blog-article posted="2020-08-06T22:23:05Z"><p><img src="https://john-millikin.com/first-impressions-of-rust/crab.jpg"></p><p>I've been wanting to write a big project in <a href="https://www.rust-lang.org/">Rust</a> for a while as a learning exercise, and actually started one in late 2018 (a FUSE server implementation). But then life happened and I got busy and never went anywhere with it. Due to certain world circumstances I'm currently spending a lot of time indoors so <a href="https://github.com/jmillikin/rust-fuse">rust-fuse</a> (<a href="https://jmillikin.github.io/rust-fuse/fuse-v0.0.1-a6ad16d1127d36f80e6d02f36e48da56920ca693/fuse/">docs</a>) now exists and is good enough to write basic hello-world filesystems. I plan to polish it up a bit more with the goal of releasing a v1.0 that supports the same use cases as <a href="https://github.com/libfuse/libfuse">libfuse</a>.</p><p>I took some notes along the way about things that struck me as especially good or bad. Overall I quite like Rust the language, have mixed feelings about the quality of ancillary tooling, and have strong objections to some decisions made by the packaging system (Cargo + crates.io).</p><blog-section><h2 slot="title">Background</h2><p>I've been programming professionally for 15 years, primarily network servers and GUIs on Linux. Between roughly 2009 and 2015 I experimented with using Haskell for systems programming, writing several projects in pure Haskell (<a href="https://john-millikin.com/software/haskell-dbus">haskell-dbus</a>, <a href="https://john-millikin.com/software/anansi">Anansi</a>) and as bindings (<a href="https://john-millikin.com/software/haskell-ncurses">haskell-ncurses</a>, <a href="https://john-millikin.com/software/haskell-cpython">haskell-cpython</a>). However, I couldn't achieve the sorts of reliability improvements over bread-and-butter C++ that I had hoped for:</p><ul><li>Haskell has a lot of tools for reasoning about the structure of computation, notably monads for declarative I/O, but it doesn't do much to help the programmer with non-algorithmic concerns such as memory lifetimes. I spent a lot of time debugging dangling pointers and race conditions.</li><li>I found it very difficult to write Haskell code that could run as fast as C. Avoiding allocation, auto-boxing, etc felt like it required a deep knowledge of undocumented or unspecified GHC behavior.</li></ul><p>In late 2015 I started rough sketches for a new language, Funk, that would combine the type-safety of Haskell with the low-level precision of C/C++. Funk was strongly influenced by Google's internal dialect of C++, which uses smart pointers and sum types (e.g. <tt>StatusOr&lt;T&gt;</tt>) to improve memory safety – many of its features later became part of the C++11 and C++14 standards. To this foundation I bolted on Haskell-style typeclasses and modules, then started writing a Funk-to-C translator based on <a href="https://wiki.gnome.org/Projects/Vala/Documentation">Vala</a>.</p><p>At some point I was looking around for inspiration on how to handle memory allocation (I planned to use scoped arenas as the fundamental dynamic memory system) and I discovered Rust. Here was a language that was solving the same problems as Funk but (1) better designed (2) already implemented and (3) supported by an entire team of compiler experts. So that was that, Funk went to <tt>/dev/null</tt> and I logged a TODO to learn Rust.</p></blog-section><blog-section><h2 slot="title">The Rust language</h2><p>It shouldn't come as a surprise that someone looking for a cross between C++ and Haskell would like Rust, but I want to be clear: I really <i>really</i> enjoy using Rust. It is nearly everything I want in a systems programming language, and the few parts it's missing are due to legitimate technical difficulty. The amount of careful thought I've seen put into its design – crafting <tt>async/await</tt> to work in <tt>no_std</tt> environments, or the <a href="https://blog.rust-lang.org/inside-rust/2020/06/08/new-inline-asm.html">new inline assembly syntax</a> – has produced a language that is not only better than what I could have designed, it's better among axes I was not even aware existed prior to reading the Rust RFCs.</p><p>The "nightly" release channel is an excellent idea that I wish more infrastructure software made use of. Stabilizing individual features on their own schedules lets the compiler maintain a blistering release cadence (stable releases every <i>six weeks</i>!). Users are empowered to choose their own preferred point on the maintenance/velocity curve, opting in to higher upgrade costs in exchange for early access to new features. The "editions" system goes a bit further, derisking backwards-incompatible syntax changes that would have stymied C++ for decades (see: trigraphs).</p><blog-section><h3 slot="title">Type system</h3><p>Rust has a reasonable amount of Haskell-style type programming, though I wouldn't mind a <i>bit</i> more. Some parts of its type system are limited in non-intuitive ways – for example only lifetime-kinded type parameters can be universally quantified in a trait bound. I hit a lot of compiler errors that recognized exactly what I wanted to do but wouldn't let me do it.</p><p>I wish Rust's type system supported:</p><ul><li>Closed-world ("sealed") traits. Rust's rules against private types in the public API are good civilization but they make it difficult to define pseudo-private traits like <tt>Mount</tt> that I want users to name but not implement or call into.</li><li>Associated types in structs. Rust lets traits have associated types, and structs can have associated <i>values</i>, but there's no equivalent to the nested type names found in C++ or Java.</li><li>Very basic dependent typing, or maybe something like Eiffel's contracts, for the purpose of eliminating array bounds checks. I'd like to be able to say "this function accepts a <tt>&amp;[u8]</tt> of at least <tt>size_of&lt;SomeType&gt;</tt>" so I can do safe unchecked byte poking.</li></ul></blog-section><blog-section><h3 slot="title">Standard library</h3><p>There's a lot of standard UNIX functionality that's missing from the Rust standard library. Some of it is more-or-less available from separate packages like <a href="https://crates.io/crates/nix">nix</a>, but I shouldn't have to depend on four crates plus a C compiler to get access to <tt>getuid()</tt>. I shouldn't have to depend on <i>anything</i> to get the definition of <tt>ENOSYS</tt> or the size of <tt>c_ulong</tt>. Go is the gold standard here – it can cross-compile to a Linux target from macOS using its own copies of the Linux syscall table – and even Haskell has <a href="http://hackage.haskell.org/package/base-4.14.0.0/docs/Foreign-C-Types.html"><tt>Foreign.C.Types</tt></a>.</p><p>A <tt>std::os::unix</tt> without <tt>getuid()</tt> is incomplete but can be worked around with a small <tt>extern "C"</tt> block. Much worse is the lack of macro-dependent functions like <tt>recvmsg()</tt>, which is not a great API to begin with, or functions with OS-dependent arity like <tt>mount()</tt>. Rust is not averse to providing clean wrappers around the OS library – the <tt>std::fs</tt> and <tt>std::process</tt> modules contain little else – so it's frustrating to see these very basic functions left out.</p></blog-section></blog-section><blog-section><h2 slot="title">Tooling</h2><blog-section><h3 slot="title">rustdoc</h3><p>I categorize documentation generators into two basic groups:</p><ul><li>First is the <a href="https://www.sphinx-doc.org/">Sphinx</a> group, which consumes prose and uses embedded pragmas to reference symbols of the library being documented. The output layout tends to be textbook-like, containing long "chapters" that might cover entire modules in one HTML file. Sphinx-style docs are popular among Python programmers.</li><li>Second is the <a href="https://www.doxygen.nl/">Doxygen</a> group, which consumes source code and generates a rigidly-structured catalog of symbols with optional attached prose. The output feels more like an encyclopedia or reference manual.</li></ul><p><tt>rustdoc</tt> is obviously in the second category. It is designed to consume doc comments, which are special-cased by the Rust compiler, and produces output closely matching the structure of the exported API. At this task <tt>rustdoc</tt> does a reasonable job: the page layout is navigable, the markup format (<tt>rustdoc</tt> uses Markdown) isn't great but it could be worse, and it doesn't hardcode absolute file paths into the output like Haddock.</p><p>Some of its annotations, like whether a symbol is OS-specific (<a href="https://github.com/rust-lang/rust/issues/43781">rust-lang/rust#43781</a>), are gated to the Nightly toolchain. It's not obvious to me why they do this – it's a documentation generator, why does it care what version of the Rust compiler I'm using? What's more, some of its functionality is reserved for the standard library only. I can't mark fields as unstable (subject to change in future library versions) because that annotation is based on the <tt>#[unstable]</tt> attribute, which the compiler reserves for its own use. Ditto for annotations about which version a symbol was added in. If I'm going to use a Doxygen-group tool then I don't want it to get too fussy about what libraries it's documenting.</p></blog-section><blog-section><h3 slot="title">rustfmt</h3><p>Something like a cross between <tt>gofmt</tt>, <tt>clang-format</tt>, and GNU indent. It has a lot of configuration options but all the interesting ones are gated to Nightly, and most of those are much less useful than you might expect.</p><p>As a representative sample, consider <tt>rustfmt</tt>'s handling of hard tabs. Given the following input there are two basic ways you might use hard tabs to indent it, depending on whether struct value alignment should apply to nested structs:</p><blog-code><pre>MyStruct{
  field_with_long_name: (some_big_complex_variable_name + another_big_complex_variable_name),
  another_field: 123,
  nested_struct: &amp;NestedStruct{
    nested_struct_field: 456,
  },
  final_field: 123,
}
</pre></blog-code><p>The first is to treat the nested struct as a "break" in the alignment (<tt>gofmt</tt> does this). I've drawn the tabs as <span>████</span> for clarity:</p><blog-code><pre><code>MyStruct{
<span>████</span>field_with_long_name: (some_big_complex_variable_name
<span>████</span>                       + another_big_complex_variable_name),
<span>████</span>another_field:        123,
<span>████</span>nested_struct: &amp;NestedStruct{
<span>████████</span>nested_struct_field: 456,
<span>████</span>},
<span>████</span>final_field: 123,
}
</code></pre></blog-code><p>The second is to align all the values, including the nested struct, and introduce a nested layer of tabs:</p><blog-code><pre><code>MyStruct{
<span>████</span>field_with_long_name: (some_big_complex_variable_name
<span>████</span>                       + another_big_complex_variable_name),
<span>████</span>another_field:        123,
<span>████</span>nested_struct:        &amp;NestedStruct{
<span>████</span>                      <span>████</span>nested_struct_field: 456,
<span>████</span>                      },
<span>████</span>final_field:          123,
}
</code></pre></blog-code><p>But what <tt>rustfmt</tt> produces is an indecisive and poorly formatted combo of the two – it doesn't even properly align the parenthesized expression after line-breaking it:</p><blog-code><pre><code>MyStruct {
<span>████</span>field_with_long_name: (some_big_complex_variable_name
<span>████████</span>+ another_big_complex_variable_name),
<span>████</span>another_field:        123,
<span>████</span>nested_struct:        &amp;NestedStruct {
<span>████████</span>nested_struct_field: 456,
<span>████</span>},
<span>████</span>final_field:          123,
}
</code></pre></blog-code><p>I eventually gave up on trying to make the formatted rust-fuse code look pretty, and settled for "consistent".</p></blog-section></blog-section><blog-section><h2 slot="title">Cargo and crates.io</h2><p>While the Rust language feels carefully designed to combine the best parts of multiple popular and interesting languages, Rust's default build system (Cargo) and package repository (crates.io) are the opposite. They combine the worst parts of Cabal/Hackage and NPM, resulting in a user experience that is somehow inferior to both.</p><blog-section><h3 slot="title">Pa…</h3></blog-section></blog-section></blog-article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://john-millikin.com/first-impressions-of-rust">https://john-millikin.com/first-impressions-of-rust</a></em></p>]]>
            </description>
            <link>https://john-millikin.com/first-impressions-of-rust</link>
            <guid isPermaLink="false">hacker-news-small-sites-24076083</guid>
            <pubDate>Thu, 06 Aug 2020 22:26:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Surviving Django, if you care about databases]]>
            </title>
            <description>
<![CDATA[
Score 163 | Comments 215 (<a href="https://news.ycombinator.com/item?id=24074520">thread link</a>) | @pauloxnet
<br/>
August 6, 2020 | https://www.varrazzo.com/blog/2020/07/25/surviving-django/ | <a href="https://web.archive.org/web/*/https://www.varrazzo.com/blog/2020/07/25/surviving-django/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
  <div>
    <div id="content"><p>Django is currently the most commonly used full-stack web framework for Python. It has
been around for a good 15 years, emerging as a winner from a period in which
Python was already mature, but its web development tools were comparatively
much more immature and fragmented.</p>
<p>Django allows the definition of objects in your program as "models" using the
<tt>Model</tt> base class. They behave largely like normal Python classes, with
added support to save into, and retrieve from, the relational database backing
your application. If you don't need such database support, you didn't
need a full-stack web framework in first place.</p>
<p>Django tries to be independent from the database you choose. It sounds like
a good idea, but only on paper. After working several years
with Django systems, both written from scratch or inherited and maintained, I
feel the "blessed" way of working with databases and
Django leads you to using your database in a sub-optimal way, and unnecessarily complicates
the development and maintenance cycle of your project.</p>
<p>I think the divergence between wishful thinking and reality starts from a
fundamental misunderstanding between you and Django, which is not written in
the contract you haven't signed with them anyway:</p>
<blockquote>
"independence from the relational database" is a feature needed by Django
as a framework, <em>not by the program you are writing</em>.</blockquote>
<p>Django needs it because a web framework not tied to a single database vendor
is more valuable than one tied to a specific one - and that's fair enough. <em>But you
don't:</em> your web program, most likely than not, will not have to switch from
one database to another. So, <a href="https://www.martinfowler.com/bliki/Yagni.html">You Ain't Gonna Need It™</a>. Portability at all costs
leads to at least two problems:</p>
<p>1) You will not able to use all the features offered by your relational
database.</p>
<p>2) Every change to your models, or to your database schema, will be more
complicated than it should be.</p>
<div id="you-ain-t-gonna-need-it">
<h3>You Ain't Gonna Need It</h3>
<p>How many times have you worked on a project and, after 1-2 years of
development, you have changed to a different database?</p>
<p>I can tell you how many times it happened to me, I counted them: exactly
never.</p>
<p>Replacing your database vendor is a major, traumatic occurrence, almost as
much as rewriting your program in a different language. If you replace your
database, more likely than not, it is because you are interested in the
features of the new databas. You need to use them so using the common
functionalities between the old and the new one will not solve any of your
problems.</p>
<p>Did you maybe start your project with SQLite and now your project grew enough
to need a bigger database? If so then you are still at the phase in
which your project is a toy: you haven't done anything yet that requires
thinking in terms of concurrency. Even if you have to rewrite a few things,
it's not going to be a lot.</p>
<p>Do you have a large MySQL project and now you have to migrate to PostgreSQL?
That's not gonna happen: you have probably tweaked MySQL, have expertise in
MySQL. Maybe PostgreSQL might be a better database in some aspects, but not so much
that you want to migrate all your data and start from scratch without
<a href="http://www.catb.org/jargon/html/F/frobnicate.html">frobbing, twiddling, tweaking</a> the database configuration. Did you say
you have High Availability and Disaster Recovery configured? That's to be
converted too of course.</p>
<p>In the above paragraph, replace the database vendor with all the permutations
of MySQL, PostgreSQL, MS SQL, Oracle. <em>That's not gonna happen</em>. Except maybe
if an Oracle salesman gets hold of someone in your project with a modicum of
decision making and talks them into buying some sort of expensive license, but
that's not a technical problem, it's a political one, and it's up to you to
decide if you are comfortable with it.</p>
<p>Have you got PostgreSQL in production, but you want to test with SQLite because
it's easier to set up? If so, your tests are just a tick-box exercise: you
are not testing anything remotely plausible and resembling your live system.</p>
<p>Choosing a database happens in the first days of your projects, it will not
happen when the project is mature. You may as well use all the features
available with your database, not only the ones common enough that Django
created a Python wrapper for it.</p>
</div>
<div id="use-all-the-features">
<h3>Use all the features</h3>
<p>Scanning the schema of a Django program I've written and maintained for a few
years I see:</p>
<ul>
<li>Schemas (as in the "directory of the tables", not all the other meanings)</li>
<li>Custom domains</li>
<li>Collations</li>
<li>Triggers</li>
<li>Permissions</li>
<li>Partial indexes</li>
<li>Constraint exclusions</li>
<li>Views</li>
<li>Stored procedures</li>
<li>Partitioned tables</li>
</ul>
<p>If these features were used, it's because they allowed to implement
certain features needed for the program in a simpler way than what possible in
the language (if even would have been possible there). Audit for
instance: Django doesn't have an audit feature except for the changes made in
the admin. Even if you added some form of manual auditing to each <tt>save()</tt>
method, it will not capture changes made outside Django. It wouldn't be very
secure either: Django uses a single user to access the database so if someone
manages to hijack that user, they would be able to change the data in the database
and alter the audit tables to hide their traces.</p>
<p>In PostgreSQL you can:</p>
<ul>
<li>Create an "audit" user: it will have different permissions than the user of
the Django application.</li>
<li>Create an "audit" schema: revoking write permission to all the objects it
will contain from the Django user.</li>
<li>Create a function to append a record to an audit table owned by the "audit"
user, but callable by the Django user.</li>
<li>Add a trigger to the tables to audit.</li>
</ul>
<p>This setup requires Postgres-specific knowledge, which is fair for a feature
that has to watch over the database data whichever the origin of the change
is. But being PostgreSQL extensible as it is, you can <a href="https://github.com/dvarrazzo/pgaudit">use an extension</a> to automate the creation and
maintenance of the audit triggers and functions.</p>
</div>
<div id="so-where-do-i-put-the-schema">
<h3>So where do I put the schema?</h3>
<p>Into an SQL file!</p>
<p>With its tiny <tt>.sql</tt> extension!</p>
<p>And with comments! Explaining why a certain index or constraint exist!</p>
<p>With constraints named meaningfully, available for manipulation, not
<tt>auth_group_permissions_group_id_b120cbf9_fk_auth_group_id</tt>.</p>
<p>Sounds civilised to me.</p>
<p>The nice thing of doing this is that, if you do things carefully enough, Django
will not notice anything at all.</p>
<p>Take the above audit examples: Django is not meant to interact with it:
everything will just happen under its nose. You can use views instead of
tables for read-only models, you can use domains instead of more basic data
types for your fields: Django won't see your triggers triggering, your
constraints constraining, your permissions permitting - except when things go
wrong, which will result in an error 500 and a Python traceback. This is at least
better than bad data in the database. Also it won't see your procedures
proceeding, your domains dominating...you get the idea.</p>
<p>Using psql to import the schema into an empty database means you can modularise the
code and use <tt>\i</tt> to import "submodules". A typical pattern for me is to have
a <tt>database.sql</tt> to create global objects (users, extensions, schemas),
set the basic permissions and import the details into target schemas.</p>
<pre><span>\</span><span>i</span> <span>users</span><span>.</span><span>sql</span>
<span>revoke</span> <span>create</span> <span>on</span> <span>schema</span> <span>public</span> <span>from</span> <span>public</span><span>;</span>     <span>-- safety
</span>
<span>--- create a schema for the django app tables
</span><span>create</span> <span>schema</span> <span>myapp</span><span>;</span>
<span>grant</span> <span>usage</span> <span>on</span> <span>schema</span> <span>myapp</span> <span>to</span> <span>myapp</span><span>,</span> <span>backup</span><span>;</span>

<span>--- set the default permissions for all the object that will be created there
</span><span>alter</span> <span>default</span> <span>privileges</span> <span>in</span> <span>schema</span> <span>myapp</span>
    <span>grant</span> <span>select</span><span>,</span> <span>insert</span><span>,</span> <span>update</span><span>,</span> <span>delete</span> <span>on</span> <span>tables</span> <span>to</span> <span>myapp</span><span>;</span>
<span>alter</span> <span>default</span> <span>privileges</span> <span>in</span> <span>schema</span> <span>myapp</span>
    <span>grant</span> <span>select</span> <span>on</span> <span>tables</span> <span>to</span> <span>view</span><span>,</span> <span>backup</span><span>;</span>
<span>alter</span> <span>default</span> <span>privileges</span> <span>in</span> <span>schema</span> <span>myapp</span> <span>grant</span> <span>all</span> <span>on</span> <span>sequences</span> <span>to</span> <span>myapp</span><span>;</span>
<span>alter</span> <span>default</span> <span>privileges</span> <span>in</span> <span>schema</span> <span>myapp</span> <span>grant</span> <span>select</span> <span>on</span> <span>sequences</span> <span>to</span> <span>backup</span><span>;</span>

<span>--- import the tables into the schema
</span><span>set</span> <span>search_path</span> <span>to</span> <span>myapp</span><span>,</span> <span>public</span><span>;</span>
<span>\</span><span>i</span> <span>django</span><span>.</span><span>sql</span>   <span>-- django objects - users, groups, permissions tables
</span><span>\</span><span>i</span> <span>myapp</span><span>.</span><span>sql</span>    <span>-- your app models
</span><span>reset</span> <span>search_path</span><span>;</span>
</pre>
<p>The <tt>database.sql</tt> doesn't create the database itself so you can create an
empty one anywhere it's needed, then you can use <tt>psql <span>-f</span> database.sql
<span>"postgres://connection/url"</span></tt> to populate it. The <tt>myapp.sql</tt> file
shouldn't contain any reference to the schema <tt>myapp</tt> where the objects are
created so the schama can be easily changed. Postgres doesn't have a statement like
<tt>CREATE USER ... IF NOT EXIST</tt>: in <tt>users.sql</tt> you can simulate it with:</p>
<pre><span>do</span> <span>$</span><span></span><span>$</span>
<span>begin</span>
    <span>perform</span> <span>1</span> <span>from</span> <span>pg_user</span> <span>where</span> <span>usename</span> <span>=</span> <span>'myapp'</span><span>;</span>
    <span>if</span> <span>not</span> <span>found</span> <span>then</span>
        <span>create</span> <span>user</span> <span>myapp</span><span>;</span>
    <span>end</span> <span>if</span><span>;</span>
<span>end</span>
<span>$</span><span></span><span>$</span> <span>language</span> <span>plpgsql</span><span>;</span>
</pre>
</div>
<div id="migrations">
<h3>Migrations</h3>
<p>Django has an amazingly complex system to <a href="https://docs.djangoproject.com/en/3.0/topics/migrations/">perform model migrations</a>. It is
complex amongst other reasons because:</p>
<ul>
<li><p>It actually migrates <em>Python models</em> not <em>database schemas</em>. Even if you change a field's help
text, it generates a migration.</p>
<pre><span>class</span> <span>Migration</span><span>(</span><span>migrations</span><span>.</span><span>Migration</span><span>):</span>

    <span>operations</span> <span>=</span> <span>[</span>
        <span>migrations</span><span>.</span><span>AlterField</span><span>(</span>
            <span>model_name</span><span>=</span><span>'foo'</span><span>,</span>
            <span>name</span><span>=</span><span>'bar'</span><span>,</span>
            <span>field</span><span>=</span><span>models</span><span>.</span><span>BooleanField</span><span>(</span><span>help_text</span><span>=</span><span>'I only changed this'</span><span>),</span>
        <span>),</span>
</pre>
<p>That's not useful at all for the database, but Django will create it for you
and if you remove it, it will add it back. Similarly, changing a <a href="https://docs.djangoproject.com/en/3.0/ref/models/fields/#choices">choices
list</a>, a display label, results in migrations with no database operation,
only a Python operation, and practically no SQL purpose.</p>
</li>
<li><p>It allows access to the state of the model at times intermediate between
migrations, using <a href="https://docs.djangoproject.com/en/3.0/ref/applications/#django.apps.AppConfig.get_models">get_model</a><tt>(appname, modelname)</tt> and with some
Python code in the returned model. But if that code also happens to use
any code inside your application, importing models with a normal Python
<tt>import</tt>, things will crash because of a mismatch between model
definitions and schema in the database. But they won't crash immediately: only
later when you will apply some unrelated migration. And not when that
migration is needed: only after it has already been applied and it doesn't
have anything more to do in its lifetime: it is implemented as a model that
Django will keep on importing over and over. In a …</p></li></ul></div></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.varrazzo.com/blog/2020/07/25/surviving-django/">https://www.varrazzo.com/blog/2020/07/25/surviving-django/</a></em></p>]]>
            </description>
            <link>https://www.varrazzo.com/blog/2020/07/25/surviving-django/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24074520</guid>
            <pubDate>Thu, 06 Aug 2020 19:28:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Busted retailers use bankruptcy to break leases by the thousands]]>
            </title>
            <description>
<![CDATA[
Score 213 | Comments 265 (<a href="https://news.ycombinator.com/item?id=24074311">thread link</a>) | @finphil
<br/>
August 6, 2020 | https://www.bnnbloomberg.ca/busted-retailers-use-bankruptcy-to-break-leases-by-the-thousands-1.1476347 | <a href="https://web.archive.org/web/*/https://www.bnnbloomberg.ca/busted-retailers-use-bankruptcy-to-break-leases-by-the-thousands-1.1476347">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>With the pandemic intensifying the plight of U.S. retailers, companies from J. Crew Group Inc. to the owner of Ann Taylor are using Chapter 11 bankruptcy filings to quickly get out of costly, long-term leases and shutter thousands of stores.</p>

<p>By seeking court protection, firms like Neiman Marcus Group Inc. and the parent company of Menâ€™s Wearhouse avoid the headache of protracted negotiations with individual landlords. But the moves threaten to upend huge swaths of the real estate market and the half-trillion dollar market for commercial mortgage-backed securities.</p>

<p>â€œThis is now black-letter law -- a debtor can cram down a landlord,â€� said Melanie Cyganowski, a former bankruptcy judge whoâ€™s now a partner at law firm Otterbourg PC. â€œIf this becomes a tsunami of retailers rejecting their leases, itâ€™s going to trigger another part of the sea change -- the mortgages held by the landlords.â€�</p>

<p>As bankrupt firms like J.C. Penney Co. and Brooks Brothers Group Inc. look to jettison leases, landlords are already feeling the consequences. CBL &amp; Associates Properties Inc., owner of more than 100 shopping centers in the U.S., is preparing its own bankruptcy&nbsp;filing&nbsp;after rent collections cratered. And 16 per cent&nbsp;of retail property loans bundled into CMBS were delinquent in July, according to research firm Trepp.</p>

<p><strong>Filing Surge</strong></p>

<p>At least 25 major retailers have filed for bankruptcy this year, according to data compiled by Bloomberg. The most recent additions include Tailored Brands Inc., owner of Menâ€™s Wearhouse and Jos. A. Bank, which is seeking to&nbsp;close&nbsp;about a third of its more than 1,200 stores, and Lord &amp; Taylor parent company&nbsp;Le Tote, which said it could shut down all of the department storeâ€™s remaining locations.</p>

<p>â€œItâ€™s economical, itâ€™s efficient and it allows retailers to rationalize their footprint quickly,â€� said Fred Ringel, co-chair of the business finance and restructuring practice at the law firm Robinson Brog Leinwand Greene Genovese &amp; Gluck P.C. Ringel, who works for landlords, said heâ€™s busier than ever renegotiating leases and in some cases persuading tenants to forgo cancellations and stay under modified terms.</p>

<p><img alt="Embedded Image" height="750" src="https://www.bnnbloomberg.ca/polopoly_fs/1.1476348!/fileimage/httpImage/image.png_gen/derivatives/default/a-pedestrian-wearing-a-protective-mask-walks-past-a-boarded-up-j-crew-group-inc-store-on-14th-street-in-washington-d-c-u-s-on-thursday-april-16-2020-on-wednesday-mayor-muriel-bowser-announced-an-extension-of-the-shutdown-of-nonessential-businesses-until-may-15-after-the-original-date-of-april-24.png" width="1296"></p>

<p>Take vitamin retailer GNC Holdings Inc. It operates hundreds of stores across the country, mostly in strip malls. Since filing for bankruptcy in June, GNC has asked to reject at least 500 leases, along with more than 50 franchise agreements and subleases, according to court records.</p>

<p>Meanwhile, CEC Entertainment Inc., the parent company of Chuck E. Cheese, is negotiating with its landlords after its June bankruptcy filing. It won court approval this week to defer rent payments as it evaluates which locations it wants to keep open.</p>

<p>And the U.S. unit of Spanish retailer Desigual said it was forced to file after struggling to get rent abatements from its landlords. â€œUnfortunately, DUSA had little success in getting landlords to realize the new reality that most tenants -- especially those in retail -- cannot afford to pay pre-COVID-19 rent,â€� a representative for the firm said in court papers.</p>

<p>Landlords, in turn, have their own mortgages to worry about, which were also underwritten with pre-pandemic assumptions about rent collections. Amid the stress, Barry Sternlichtâ€™s Starwood Capital Group&nbsp;missed&nbsp;payments on securitized debt linked to five shopping malls, and Saks owner Hudsonâ€™s Bay Co. also&nbsp;skipped&nbsp;interest due on certain CMBS. Delinquencies on retail mortgages bundled into bonds climbed to 16 per cent&nbsp;in July, from 3.8 per cent&nbsp;in January, according to Trepp.</p>

<p><strong>Tenant Power</strong></p>

<p>Some retailers can work out rent abatements and other lease modifications including terminations without filing for bankruptcy. However, negotiating hundreds of deals outside of a court process can be challenging, especially for big retail chains that may have hundreds of landlords to deal with, said Navin Nagrani, an executive vice president at Hilco Real Estate.</p>

<p>Bankruptcy flips the power from landlords to tenants. Retailers can legally reject a swath of leases in court, sometimes leaving building owners to collect just pennies on the dollar. Firms can also sell off favorable contracts to other parties to help repay creditors.</p>

<p>â€œSometimes a bankruptcy is the most advantageous way to get out of those leases,â€� Nagrani said.</p>

<p>As many as 25,000 stores are expected to close in the U.S. in 2020, mostly in shopping malls, according to Coresight Research. Department stores and fashion boutiques are seen as the most endangered.</p>

<p><img alt="Embedded Image" height="675" src="https://www.bnnbloomberg.ca/polopoly_fs/1.1476623!/fileimage/httpImage/image.png_gen/derivatives/default/mall-landlords-get-mauled.png" width="1200"></p>

<p>More than half of mall department stores could close for good by the end of 2021, according to an April report from real estate research firm Green Street&nbsp;Advisors. J.C. Penney said last month that it would&nbsp;shutter&nbsp;more than 150 locations, while Neiman Marcus plans to pull out of New Yorkâ€™s Hudson Yards development and&nbsp;close&nbsp;three other U.S. locations.</p>

<p>The closures so far are â€œjust the tip of the iceberg,â€� said&nbsp;Garrick Brown, head of Americas retail research for Cushman &amp; Wakefield. Over the next two years, at least 1.2 billion of square feet -- 10% of already-occupied store real estate -- will go vacant, he said. â€œWorst-case scenario, that could double.â€�</p>
</div></div>]]>
            </description>
            <link>https://www.bnnbloomberg.ca/busted-retailers-use-bankruptcy-to-break-leases-by-the-thousands-1.1476347</link>
            <guid isPermaLink="false">hacker-news-small-sites-24074311</guid>
            <pubDate>Thu, 06 Aug 2020 19:04:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A crash course on hacking satellites]]>
            </title>
            <description>
<![CDATA[
Score 402 | Comments 60 (<a href="https://news.ycombinator.com/item?id=24072829">thread link</a>) | @PatrolX
<br/>
August 6, 2020 | https://nyan-sat.com/chapter0.html | <a href="https://web.archive.org/web/*/https://nyan-sat.com/chapter0.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
        <div>
            
            <p>We'll be guiding you through a crash course on satellites - their history, where in (well, around) the world they are, and how they send and receive data. Accompanying this guide (though not strictly required for it) is a set of equipment we've used ourselves to get everything going.</p>

            <p>If you have the means, we recommend buying the equipment yourself. If you don't, we've put together a kit that we'll send to you for a very reasonable price, though supplies are limited. The list of parts is below, or you can <a href="https://shoppe.redballoonsecurity.com/products/nyansat-kit">click here</a> to request a kit. We also have stickers and T-shirts <a href="https://shoppe.redballoonsecurity.com/collections/nyansat">here</a>. If you don't want a kit right now, you can continue on to the <a href="https://nyan-sat.com/chapter1.html">next section</a>.</p>

            <p><a href="https://nyan-sat.com/assets/pcbh_board.jpg"><img src="https://nyan-sat.com/assets/pcbh_board.jpg"></a>
            <span>Antenny v1</span></p>

            <p>For the kit, we custom-built a PCB in our kit that integrates multiple parts, allowing you to connect everything together on a single board with no wiring. This board is the hardware component of the RBS Antenny project. It combines the EPS32 (with Bluetooth and Wifi support), a 16 channel PWM driver, and a motor driver with a maximum output of maximum 27W at 6V. The RBS Antenny board can easily handle the movement control of NyanSat antenna gimbal, and you can load your own custom code to adjust it however you like. The onboard reserved I2C channel connectors allow you to extend the basic NyanSat setup with an RBS custom made IMU module, OLED screen and GPS module.</p>

            <p>The RBS Antenny board is designed using Altium Designer and Assembled by an in-house pick and place machine in Manhattan, New York. After DEF CON, you can even repurpose the board for your future projects requiring microcontrollers and motor drivers. You can read more about it <a href="https://github.com/RedBalloonShenanigans/antenny/">here</a>.</p>

            

            <p>After completing the Antenny v1 board, we found ways to enhance the board and designed the Antenny v2 which fixes bugs, improves functionality and reliability, and is now adaptable for future development on hardware.</p>

            <p><a href="https://nyan-sat.com/assets/pcbh_board2.jpg"><img src="https://nyan-sat.com/assets/pcbh_board2.jpg"></a>
            <span>Antenny v2</span></p><p>The main improvements to highlight from the Antenny v1 to the Antenny v2 are as follows.</p>

            <ol>
                <li>Reduced PCB size by 40%</li>
                <li>Breakout unused GPIO pins from ESP32 for future development</li>
                <li>Fixed I2C GPIO pull up bugs</li>
                <li>Enhanced power output of servo motor driver by 25%</li>
                <li>Added BeiDou/GPS (beitian bn-880) module connector pinout on PCB board</li>
            </ol>

            <p>For more information on Antenny v2 and general setup, please review <a href="https://github.com/RedBalloonShenanigans/antenny/blob/master/hardware/Antenny_board_hardware_setup_guide.pdf">this document</a> for pinouts and hardware requirements.</p>
            
            
            <p>These are covered in more detail in Chapter 4. Feel free to skip ahead. Not every part here is strictly required - feel free to only get the ones that interest you.</p>

            <h2>Pan/Tilt Gimbal</h2>
            <p><img src="https://nyan-sat.com/assets/gimbal.jpg"></p><p>This is a small gimbal we're using for pointing an antenna in a specific direction and track a satellite across the sky. They can be found multiple places. We have spare ones that we're selling at cost. Without one of these you can listen to geosynchronous satellites, but low orbit satellites will be whizzing across your antenna’s pickup area in seconds.</p>
            <p><a href="https://www.amazon.com/dp/B085HDYTCQ/">Product link</a></p>

            <h2>RTL-SDR</h2>
            <p><img src="https://nyan-sat.com/assets/rtl-sdr.jpg"></p><p>The cheapest and most flexible SDR available.</p>
            <p><a href="https://www.amazon.com/dp/B011HVUEME/">Product link</a></p>

            <h2>ESP32</h2>
            <p><img src="https://nyan-sat.com/assets/esp32.jpg"></p><p>Lots of features in a tiny package. This is the microcontroller that our software expects.</p>
            <p><a href="https://www.amazon.com/dp/B0718T232Z">Product link</a></p>

            <h2>IMU</h2>
            <p>This Inertial Measuring Unit tells the software which way the antenna is pointing, helping you to point it very precisely.</p>
            <p><a href="https://www.amazon.com/dp/B017PEIGIG/">Product link</a></p>

            <h2>Motor Driver</h2>
            <p><img src="https://nyan-sat.com/assets/driver.jpg"></p><p>The ESP32 isn't able to drive the motors directly, so an adapter board is needed.</p>
            <p><a href="https://www.amazon.com/dp/B01D9VNXEQ/">Product link</a></p>

            <h2>OLED Screen (optional)</h2>
            <p><img src="https://nyan-sat.com/assets/oled.jpg"></p><p>Super simple display for getting quick feedback from the device.</p>
            <p><a href="https://www.amazon.com/dp/B07X25T786/">Product link</a></p>

            <p><a href="https://nyan-sat.com/chapter1.html"><span>NEXT CHAPTER</span></a>
        </p></div>
    </article></div>]]>
            </description>
            <link>https://nyan-sat.com/chapter0.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24072829</guid>
            <pubDate>Thu, 06 Aug 2020 16:55:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Auth is now available in Supabase (YC S20)]]>
            </title>
            <description>
<![CDATA[
Score 170 | Comments 50 (<a href="https://news.ycombinator.com/item?id=24072051">thread link</a>) | @kiwicopple
<br/>
August 6, 2020 | https://supabase.io/blog/2020/08/05/supabase-auth | <a href="https://web.archive.org/web/*/https://supabase.io/blog/2020/08/05/supabase-auth">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><p>Supabase is an open source Firebase alternative. We are building the features of Firebase using scalable, open source products. </p><p>Two months ago a developer discovered Supabase and (unexpectedly) <a href="https://news.ycombinator.com/item?id=23319901" target="_blank" rel="noopener noreferrer">launched us on Hacker News</a>. Although we had completed only 3 months of development the community support was both incredible and humbling.</p><p><img src="https://supabase.io/img/supabase-hn-launch.png" alt="This image shows all of the top dev tool launches on Hacker news. The most popular is Stripe, with 1249 upvotes, the next popular is Supabase with 1120 upvotes, and third is Fly.io with 626 upvotes."></p><p>Developers were obviously excited about the prospect of an open source Firebase alternative, but the comments were dominated by one emphatic feature request: Auth.</p><blockquote><p>" <em>Just FYI, making a good auth solution in Supabase will instantly make me a customer.</em> "<br><small>@pdimitar</small></p></blockquote><blockquote><p>" <em>For me the MVP, before I could use it for my commercial projects, would be: DB+auth. At that point, I could switch - and probably would.</em> "<br><small>@julianeon</small></p></blockquote><blockquote><p>" <em>This looks great, however at first peek it doesn't mention anything about auth. Do you have any plans for that? For me this is the topic I most want to just delegate to the service.</em> "<br><small>@2mol</small></p></blockquote><p>So we got to work, and today we're ecstatic to launch Supabase Auth. Let's dig into some of the features of the Auth system.</p><p>Supabase Auth provides all the backend services you need to authenticate and authorize your users.</p><h3>User management</h3><p>Supabase makes it simple to onboard your users with our new <code>supabase.auth.signup()</code> and <code>supabase.auth.login()</code> <a href="https://supabase.io/docs/library/user-management">functions</a>.</p><video width="99%" autoplay="autoplay" loop="" muted="" controls=""><source src="https://supabase.io/videos/auth-zoom.mp4" type="video/mp4"></video><h3>Row Level Security</h3><p>Authentication only gets you so far. When you need granular authorization rules, nothing beats PostgreSQL's <a href="https://www.postgresql.org/docs/current/ddl-rowsecurity.html" target="_blank" rel="noopener noreferrer">Row Level Security</a>. Supabase makes it simple to turn RLS on and off.</p><video width="99%" autoplay="autoplay" loop="" muted="" controls=""><source src="https://supabase.io/videos/rls-zoom.mp4" type="video/mp4"></video><h3>Policies</h3><p><a href="https://www.postgresql.org/docs/current/sql-createpolicy.html" target="_blank" rel="noopener noreferrer">Policies</a> are PostgreSQL's rule engine. They are incredibly powerful and flexible, allowing you to write complex SQL rules which fit your unique business needs. </p><video width="99%" autoplay="autoplay" loop="" muted="" controls=""><source src="https://supabase.io/videos/policies-zoom.mp4" type="video/mp4"></video><p>With policies, your database becomes the rules engine. Instead of repetitively filtering your queries, like this ...</p><div><div><div tabindex="0"><div><p><span>const</span><span> loggedInUserId </span><span>=</span><span> </span><span>'d0714948'</span><span></span></p><p><span></span><span>let</span><span> user </span><span>=</span><span> </span><span>await</span><span> supabase</span></p><p><span>    </span><span>.</span><span>from</span><span>(</span><span>'users'</span><span>)</span><span></span></p><p><span>    </span><span>.</span><span>select</span><span>(</span><span>'user_id, name'</span><span>)</span><span></span></p><p><span>    </span><span>.</span><span>eq</span><span>(</span><span>'user_id'</span><span>,</span><span> loggedInUserId</span><span>)</span><span></span></p></div></div></div></div><p>... you can simply define a rule on your database table, <code>auth.uid() = user_id</code>, and your request will return the rows which pass the rule, even when you remove the filter from your middleware:</p><div><div><div tabindex="0"><div><p><span>let</span><span> user </span><span>=</span><span> </span><span>await</span><span> supabase</span></p><p><span>    </span><span>.</span><span>from</span><span>(</span><span>'users'</span><span>)</span><span></span></p><p><span>    </span><span>.</span><span>select</span><span>(</span><span>'user_id, name'</span><span>)</span><span></span></p></div></div></div></div><h3>Open source</h3><p>Building an open source Firebase alternative is difficult task, made possible by an amazing suite of OSS tools that have forged the way for Supabase. We spent many weeks building Auth POC's with existing OSS tools. Notable mentions go to RedHat's <a href="https://www.keycloak.org/" target="_blank" rel="noopener noreferrer">KeyCloak</a>, and Ory's <a href="https://github.com/ory/kratos" target="_blank" rel="noopener noreferrer">Kratos</a>. </p><p>Ultimately we landed on a system which utilises three amazing open source products: </p><ul><li>Authorization: <a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer">PostgreSQL</a> and <a href="http://postgrest.org/en/v7.0.0/auth.html" target="_blank" rel="noopener noreferrer">PostgREST</a>.</li><li>Authentication: Netlify's <a href="https://github.com/netlify/gotrue" target="_blank" rel="noopener noreferrer">GoTrue</a> server, which we forked and will continue to contribute to.</li></ul><h3>Next steps</h3><p>Supabase has a culture of shipping early and often. Our Auth release is another example of this, and we still have a lot of work to do. Next month we have more Auth features planned, including custom email templates and 3rd-party OAuth providers. We also plan to simplify the Policy interface, enabling non-technical users to get started with one of PostgreSQL's best features.</p><h3>Get started</h3><p>Supabase Auth is ready for you to start using today, free of charge: <a href="https://app.supabase.io/" target="_blank" rel="noopener noreferrer">app.supabase.io</a></p><p>To see the full power of our auth system, watch <a href="https://youtu.be/2oqIZW5S-lQ" target="_blank" rel="noopener noreferrer">this demo</a> where I deploy a secure, real-time slack clone to Vercel in less than 3 minutes.</p></section></div>]]>
            </description>
            <link>https://supabase.io/blog/2020/08/05/supabase-auth</link>
            <guid isPermaLink="false">hacker-news-small-sites-24072051</guid>
            <pubDate>Thu, 06 Aug 2020 15:50:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to use the next-gen open-sourced .Avif image format, 50% smaller than JPEG]]>
            </title>
            <description>
<![CDATA[
Score 65 | Comments 28 (<a href="https://news.ycombinator.com/item?id=24071431">thread link</a>) | @tomhanlon
<br/>
August 6, 2020 | https://reachlightspeed.com/blog/using-the-new-high-performance-avif-image-format-on-the-web-today/ | <a href="https://web.archive.org/web/*/https://reachlightspeed.com/blog/using-the-new-high-performance-avif-image-format-on-the-web-today/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><h2>A More Optimal Image Format</h2><p><a href="http://aomedia.org/" title="AV1 (.avif) File Format"><svg width="220" viewBox="0 0 240 330" fill="none" xmlns="http://www.w3.org/2000/svg"><title>AV1 (.avif) File Format</title><path d="M9 10v310h221V69l-58-59H9zm163 0v59h58" fill="#fff"></path><path d="M172 10l58 59h-58V10z" fill="#fff"></path><path d="M230 69v251H9V10h163m58 59l-58-59m58 59h-58V10" stroke="#3B5EE2" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"></path><path d="M211 190l-42-74-43 74h85z" fill="#FBAC30"></path><path d="M211 190l-16-19h-53l-16 19h85z" fill="#12B17D"></path><path d="M169 218l26-47h-53l27 47z" fill="#BB255C"></path><path d="M67 183H47l-2 7H28l19-53h20l20 53H69l-2-7zm-16-13h12l-6-19-6 19zm25-33h18l12 36 11-36h18l-19 53H96l-20-53" fill="#000"></path><path d="M165 150l-5 6-6-6 13-13h9v32h-11v-19" fill="#F1F4D4"></path><path d="M172 10l58 59h-58V10z" fill="#3B5EE2" stroke="#3B5EE2" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></p><p>One of the upcoming technologies we're really excited about is the <a href="https://aomediacodec.github.io/av1-avif/">AV1 (.avif)</a> image file format. It's basically a super-compressed image type. <a href="https://netflixtechblog.com/avif-for-next-generation-image-coding-b1d75675fe4" title="AVIF for Next-Generation Image Coding">Netflix</a> has already considered .avif superior to the JPEG, PNG, and even the newer WebP image formats for its image quality to compressed file size ratio.</p><p>The format was developed by the <a href="http://aomedia.org/">Alliance for Open Media</a> in collaboration with Google, Cisco, and Xiph.org (who worked with Mozilla, creators of the Firefox browser). This format was created to be an open-sourced and royalty-free image format (unlike JPEG XR, which is a file format that compresses down very small but requires expensive licensing to implement).</p><h2>AVIF Compared to JPEG and WebP</h2><p>AVIF offers significant file size reduction for images compared with JPEG or WebP; <strong>~50% savings compared to JPEG</strong>, and <strong>~20% savings compared to WebP</strong>. Daniel Aleksandersen of <a href="https://www.ctrl.blog/">CTRL.Blog</a> has a great breakdown and deep dive into <a href="https://www.ctrl.blog/entry/webp-avif-comparison.html">AVIF comparison to JPEG and WebP</a>.</p><p><svg width="768" viewBox="0 0 768 216" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 16h380a4 4 0 014 4v44a4 4 0 01-4 4H0V16zM0 82h533.6a4 4 0 014 4v44a4 4 0 01-4 4H0V82zM0 148h764a4 4 0 014 4v44a4 4 0 01-4 4H0v-52z" fill="#3B5EE2"></path><text fill="#fff" style="white-space:pre" font-size="28" letter-spacing="0em"><tspan x="317.08" y="50.95">.avif</tspan></text><text fill="#fff" style="white-space:pre" font-size="20" font-weight="300" letter-spacing="0em"><tspan x="12" y="49.11">50% smaller than .jpeg</tspan></text><text fill="#fff" style="white-space:pre" font-size="20" font-weight="300" letter-spacing="0em"><tspan x="12" y="116.11">30% smaller than .jpeg</tspan></text><text fill="#fff" style="white-space:pre" font-size="28" letter-spacing="0em"><tspan x="449.21" y="116.95">.webp</tspan></text><text fill="#fff" style="white-space:pre" font-size="28" letter-spacing="0em"><tspan x="692.03" y="182.95">.jpeg</tspan></text></svg></p><p>The format is very flexible in that it supports any image codec, can be lossy or lossless, has the ability to use an alpha channel (transparency for UI and design elements), and even has the ability to store a series of animated frames (think lightweight high-quality animated GIFs).</p><p>It is also one of the first image formats to support HDR color support; offering higher brightness, color bit depth, and color gamuts.</p><h2>Using AVIF in Web Development Today</h2><p>AVIF is supposed to land in <a href="https://www.chromestatus.com/feature/4905307790639104">Chrome 85</a> and <a href="https://www.mozilla.org/en-US/firefox/80.0beta/releasenotes/">Firefox 80</a> on August 25, 2020; so we should start developing for it today!</p><p><picture><source srcset="https://reachlightspeed.com/img/blog/post-using-avif-images-today-support.avif" type="image/avif"><source srcset="https://reachlightspeed.com/img/blog/post-using-avif-images-today-no_support.jpg" type="image/jpeg"><img src="https://reachlightspeed.com/img/blog/post-using-avif-images-today-no_support.jpg" width="768" loading="lazy" alt="Does your browser support AVIF?"></picture></p><p>The AVIF image above likely doesn't show in your browser, but it can by using <a href="https://www.google.com/chrome/canary/">Chrome Canary</a> or by enabling AVIF in the Firefox advanced configuration preferences. You can do this by entering <code>about:config</code> in the URL bar, searching <code>image.avif.enabled</code>, and flipping this parameter to <code>true</code>.</p><p><picture><source srcset="https://reachlightspeed.com/img/blog/post-using-avif-images-today-firefox-avif.webp" type="image/webp"><img src="https://reachlightspeed.com/img/blog/post-using-avif-images-today-firefox-avif.png" width="768" loading="lazy" alt="Enable AVIF within Firefox Advanced Configuration Preferences"></picture></p><h2>Create AVIF Files with Squoosh (AVIF Beta)</h2><p><a href="https://squoosh.app/">Squoosh</a> is an image compression web app that allows you to dive into the advanced options provided by various image compressors.</p><p>While Google Chrome Labs plans to add AVIF to the amazing Squoosh web app, <a href="https://squoosh-avif.netlify.app/">here is an early build with AVIF support</a> that is built from a more recent <a href="https://github.com/GoogleChromeLabs/squoosh/pull/722">Pull Request</a>. It might be a little buggy as expected, but definitely functions well. In my opinion, this is the best option right now for converting and creating .avif files.</p><p><a href="https://squoosh-avif.netlify.app/"><picture><source srcset="https://reachlightspeed.com/img/blog/post-using-avif-images-today-squoosh-avif.avif" type="image/avif"><source srcset="https://reachlightspeed.com/img/blog/post-using-avif-images-today-squoosh-avif.webp" type="image/webp"><img src="https://reachlightspeed.com/img/blog/post-using-avif-images-today-squoosh-avif.jpg" width="768" loading="lazy" alt="Use Squoosh to convert and encode AVIF files."></picture></a></p><p><a href="https://squoosh-avif.netlify.app/">Squoosh (AVIF Beta)</a></p><p>If you are comfortable in the command line, you can use the offical AOMedia library, <a href="https://github.com/AOMediaCodec/libavif">libavif</a>, to encode/decode AVIF files. Also, if you're a macOS user with <a href="https://brew.sh/">Homebrew</a>, you can quickly install a pre-built version using <code>brew install joedrago/repo/avifenc</code>, and <code>avifenc --help</code> for syntax and options.</p><h2>AVIF as Progressive Enhancement</h2><p>Even though AVIF isn't support everywhere yet, we can still use the format in native HTML with the <code>&lt;picture&gt;</code> element. The <code>&lt;picture&gt;</code> element allows for progressive support as we can list the image sources in the order in which we want loaded, and the browser will load the first that it supports. If browser doesn't support <code>&lt;picture&gt;</code> at all, it will fallback to using the default <code>&lt;img&gt;</code>.</p><pre><code><span><span><span>&lt;</span>picture</span><span>&gt;</span></span><br>	<span><span><span>&lt;</span>source</span> <span>srcset</span><span><span>=</span><span>"</span>img/photo.avif<span>"</span></span> <span>type</span><span><span>=</span><span>"</span>image/avif<span>"</span></span><span>&gt;</span></span><br>	<span><span><span>&lt;</span>source</span> <span>srcset</span><span><span>=</span><span>"</span>img/photo.webp<span>"</span></span> <span>type</span><span><span>=</span><span>"</span>image/webp<span>"</span></span><span>&gt;</span></span><br>	<span><span><span>&lt;</span>img</span> <span>src</span><span><span>=</span><span>"</span>img/photo.jpg<span>"</span></span> <span>alt</span><span><span>=</span><span>"</span>Description of Photo<span>"</span></span><span>&gt;</span></span><br><span><span><span>&lt;/</span>picture</span><span>&gt;</span></span></code></pre><h2>AVIF Content-Type Headers + Netlify</h2><p>An issue we noticed when using .avif files on <a href="https://www.netlify.com/">Netlify</a>, was that the image wasn't showing up in Firefox. It worked fine for Chrome, but not Firefox. We identified that the Response Headers were returning <code>Content-Type: application/octet-stream</code>, causing Firefox to display nothing. We fixed this by defining custom headers within the Netlify configuration file (<code>netlify.toml</code>).</p><pre><code><span>[</span><span>[</span>headers<span>]</span><span>]</span><br>  for = "<span>*.avif"</span><br>  <span>[</span>headers.values<span>]</span><br>    Content<span>-</span>Type = "image/avif"<br>    Content<span>-</span>Disposition = "inline"</code></pre><p>We also set the <code>Content-Disposition</code> to <code>inline</code> vs <code>attachment</code>, this way the browser will try to render the file within the browser rather than externally. A good example of this is when a PDF will open within the browser vs as a downloadable file. While <code>inline</code> should be default behavior, specifying won't hurt as this is a new filetype.</p><p>You can learn more about setting <a href="https://docs.netlify.com/routing/headers/">Custom Headers in Netlify</a> by checking out their docs.</p><h2>We're Excited</h2><p>We are super excited about what kind of awesome new experiences can be made with the flexibility and performance gains of this new format.</p></section></div>]]>
            </description>
            <link>https://reachlightspeed.com/blog/using-the-new-high-performance-avif-image-format-on-the-web-today/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24071431</guid>
            <pubDate>Thu, 06 Aug 2020 14:53:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Math of Card Shuffling (2018)]]>
            </title>
            <description>
<![CDATA[
Score 135 | Comments 60 (<a href="https://news.ycombinator.com/item?id=24069999">thread link</a>) | @benibraz
<br/>
August 6, 2020 | https://fredhohman.com/card-shuffling/ | <a href="https://web.archive.org/web/*/https://fredhohman.com/card-shuffling/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="idyll-mount"><div data-reactroot=""><div><div><div><h2>Riffling from factory order to complete randomness.</h2></div><p>You’ve probably seen a few ways to shuffle a deck of cards.
Sometimes the deck is split in half and the halves are switched.
Sometimes the deck is <em><a href="https://big.assets.huffingtonpost.com/smooshing.gif">smooshed</a></em> until it’s all mixed up.
But most of the time, a deck of cards is shuffled using a <em>riffle</em>.</p><p><img src="https://fredhohman.com/card-shuffling/static/images/riffle.gif" idyll="[object Object]"></p><p>Here’s a question: <em>how many times do you have to riffle a deck of cards before it is completely shuffled?</em>

It’s a tricky one, but math has us covered: <a href="https://en.wikipedia.org/wiki/Shuffling#Riffle">you need seven riffles</a>.</p><div><p>
We can calculate the number of orderings of a deck of cards using the notion of a <a href="https://en.wikipedia.org/wiki/Permutation">permutation</a>.
To find all arrangements of 52 cards in a deck, we compute <strong>5<!-- -->2<!-- -->!</strong>, which happens to be a <a href="https://www.wolframalpha.com/input/?i=52!">really big number</a>.</p></div><p>Riffle seven times and you’ll have a sufficiently random ordering of cards, an ordering that has likely <a href="http://www.murderousmaths.co.uk/cardperms.htm">never existed before</a>.
In other words, it’s unlikely you’ll ever shuffle two decks the same.</p><p>The card shuffling result appears in a <a href="https://www.youtube.com/watch?v=AxJubaijQbI">Numberphile video from 2015</a>, along with a number of other card shuffling facts.
Here’s another problem posed in that video: what if instead of a standard riffle using a deck roughly split in half, you were to only riffle <em>1<!-- --> card at a time</em>?</p><div><p><a href="https://projecteuclid.org/download/pdf_1/euclid.aoap/1177005705">This paper</a> shows a number of other interesting card shuffling results in all their gory details.</p></div><p>That is, using a standard deck of 52 cards, in one hand hold 51 cards and in the other hold the remaining single card.
Now riffle these together.
This is equivalent to taking one card and placing it at random inside of the deck.</p><p><strong>So here’s the question:</strong>
<br><em>How many single riffles do you have to do in order to have a completely shuffled deck?</em>

</p><h2>Theorem</h2><p>You could simulate this in a short program, which we will do towards the end, but first we can solve for the number of riffles explicitly.</p><p>Consider an ordered deck of cards. <a href="https://en.wikipedia.org/wiki/Without_loss_of_generality">Without loss of generality</a>, let’s say the suits are in the following order: <span suit="S">♠</span>, <span suit="C">♣</span>, <span suit="H">♥</span>, <span suit="D">♦</span>.
So our ordered deck looks like this.</p><p>The bottom suit is <span suit="D">♦</span>, which means the bottom card of our deck is the King of Diamonds (<span number="K" suit="D">K♦</span>).
Now perform the following iteration:</p><blockquote>Place the top card of the deck randomly inside the deck</blockquote><p>This means taking the <span number="A" suit="S">A♠</span> and placing it randomly somewhere in the deck.
The top card then becomes <span number="2" suit="S">2♠</span>.</p><p>If this procedure is repeated, eventually the top card will be placed at the very bottom of the deck, shifting the <span number="K" suit="D">K♦</span> to the penultimate position.
Since every riffled card has a <span><span> <span><span><math><semantics><mrow><mfrac><mrow><mn>1</mn></mrow><mrow><mn>5</mn><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{52}</annotation></semantics></math></span></span> </span></span> chance of moving to any new position in the deck, that means, on average, after about 52 top card riffles, the top card will become the new bottom card.</p><div><div><p><strong>Note:</strong> notice the <span number="K" suit="D">K♦</span> can only rise in the deck.
There are two cases:</p><ol><li>The top card is placed above the <span number="K" suit="D">K♦</span>, therefore its position does not change.</li><li>The top card is placed underneath the <span number="K" suit="D">K♦</span>, therefore it rises one position closer to the top.</li></ol></div></div><p>Once the <span number="K" suit="D">K♦</span> moves up one position, upon subsequent riffles there are now two spots for the new top card to be placed underneath it.
That means there is now a <span><span> <span><span><math><semantics><mrow><mfrac><mrow><mn>1</mn></mrow><mrow><mn>5</mn><mn>2</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mn>5</mn><mn>2</mn></mrow></mfrac><mo>=</mo><mfrac><mrow><mn>2</mn></mrow><mrow><mn>5</mn><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{52}+\frac{1}{52}=\frac{2}{52}</annotation></semantics></math></span></span> </span></span> chance of a riffled card going underneath the <span number="K" suit="D">K♦</span>.</p><p>Continuing this procedure, the original bottom card, the <span number="K" suit="D">K♦</span>, will eventually rise to the top of the deck and be riffled.
Once this happens, the deck is randomly shuffled: the order we’re left with is equally as likely as any other order.</p><p>So, how many single card riffles does this take?
Recall each time a card is placed underneath the <span number="K" suit="D">K♦</span>, our chances of placing another card increases by <span><span> <span><span><math><semantics><mrow><mfrac><mrow><mn>1</mn></mrow><mrow><mn>5</mn><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{52}</annotation></semantics></math></span></span> </span></span>.
We can calculate the number of riffles this would take.</p><p><span><span> <span><span><span><math><semantics><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mn>5</mn><mn>2</mn></mrow></munderover><mfrac><mrow><mn>5</mn><mn>2</mn></mrow><mrow><mi>i</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mn>5</mn><mn>2</mn></mrow><mrow><mn>1</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>5</mn><mn>2</mn></mrow><mrow><mn>2</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>5</mn><mn>2</mn></mrow><mrow><mn>3</mn></mrow></mfrac><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><mfrac><mrow><mn>5</mn><mn>2</mn></mrow><mrow><mn>5</mn><mn>2</mn></mrow></mfrac><mo>≈</mo><mn>2</mn><mn>3</mn><mn>6</mn></mrow><annotation encoding="application/x-tex">\sum_{i=1}^{52} \frac{52}{i} = \frac{52}{1} + \frac{52}{2} + \frac{52}{3} + ... + \frac{52}{52} \approx 236</annotation></semantics></math></span></span></span> </span></span></p><p>On average, 236 single card riffles will randomly shuffle a deck of cards.</p><h2>Let’s Riffle</h2><p>Equations are great, but let’s visualize this!
Below is the same ordered deck of cards from before, except the <span number="K" suit="D">K♦</span> has been highlighted red so we can follow its journey to the top of the deck.</p><p>Click the <strong>Riffle</strong> button to move the top card somewhere else in the deck randomly.</p><p>Did you see where it went? Click again.</p><p>Click a bunch more really fast.</p><p>Now I could tell you to keep clicking until the highlighted <span number="K" suit="D">K♦</span> rises to the top, but as we have already shown, that would take about 236 clicks.
Instead, click the <strong>Riffle (x<!-- -->1<!-- -->0<!-- -->)</strong> button to riffle 10 times.
Keep riffling until the <span number="K" suit="D">K♦</span> moves to the top.</p><div><p>
You have riffled <strong><span>0</span></strong> times.<br></p></div><p>Here is a chart of the <span number="K" suit="D">K♦</span>’s position in the deck for each riffle.
Notice how it takes many riffles to move the <span number="K" suit="D">K♦</span> up just a few positions, but once the <span number="K" suit="D">K♦</span> starts rising towards the top of the deck, it accelerates.</p><div><p>
Once the <span number="K" suit="D">K♦</span> is the top card, click the <strong>Clear</strong> button to try again.</p></div><p>On average, the <span number="K" suit="D">K♦</span> will reach the top position somewhere around 236 riffles.
Since this is the <em>average</em> result, there is a chance your first shuffled deck of cards took less riffles (or many more!).
To try again, click the <strong>Clear</strong> button and get riffling.</p><h3>Acknowledgements</h3><ul><li>This article was created using <a href="https://idyll-lang.org/">Idyll</a>.</li><li>Shoutout to <a href="https://twitter.com/mathisonian">@mathisonian</a> <!-- -->for help and feedback.</li><li>The source code is available on <a href="https://github.com/fredhohman/card-shuffling/">Github</a>.</li></ul></div></div></div></div></div>]]>
            </description>
            <link>https://fredhohman.com/card-shuffling/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24069999</guid>
            <pubDate>Thu, 06 Aug 2020 11:27:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Programming with RISC-V Vector Instructions]]>
            </title>
            <description>
<![CDATA[
Score 159 | Comments 35 (<a href="https://news.ycombinator.com/item?id=24069793">thread link</a>) | @pantalaimon
<br/>
August 6, 2020 | https://gms.tf/riscv-vector.html | <a href="https://web.archive.org/web/*/https://gms.tf/riscv-vector.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
      <header>
        
      </header>
      
<!-- content -->
<p>Perhaps the most interesting part of the open <a href="https://en.wikipedia.org/wiki/RISC-V">RISC-V</a> <a href="https://en.wikipedia.org/wiki/Instruction_set_architecture">instruction set architecture (ISA)</a> is the vector extension (RISC-V "V").
In contrast to the average <a href="https://en.wikipedia.org/wiki/SIMD">single-instruction multipe-data (SIMD)</a> instruction set, RISC-V vector instructions are vector length agnostic (VLA).
Thus, a RISC-V "V" CPU is flexible in choosing a vector register size while RISC-V "V" binary code is portable between different CPU implementations.</p>
<p>This articles compares the two main different styles of vector ISAs, discusses a string processing  example that is implemented using <a href="https://github.com/riscv/riscv-v-spec/releases/tag/0.8">RISC-V "V" draft version 0.8</a> (current as of early 2020) vector instructions and details how to set up a RISC-V "V" development environment under Linux.</p>

<section id="simd-challenges">
<h2><a href="#id13">SIMD Challenges</a></h2>
<p>With a vector length specific (VLS) <a href="https://en.wikipedia.org/wiki/SIMD">SIMD</a> instruction set the main problem is to pick the right vector register size.
Of course there is a trade-off between the amount of data-level parallelism and hardware costs.
Due to <a href="https://en.wikipedia.org/wiki/Moore%27s_law">Moore's law</a>, vector register sizes can be increased over time without making the CPU chip more expensive.
Also, some users are interested in powerful CPUs with wider vector registers while the average user is fine with averagely sized register.
Thus, there is no one right vector register size.
This shows for example with x86, where the answer is to provide one VLS ISA after the other, such as <a href="https://en.wikipedia.org/wiki/MMX_(instruction_set)">MMX</a> (64 bit registers), <a href="https://en.wikipedia.org/wiki/Streaming_SIMD_Extensions">SSE</a> (128 bit), <a href="https://en.wikipedia.org/wiki/Advanced_Vector_Extensions">AVX</a> (256 bit) and <a href="https://en.wikipedia.org/wiki/AVX-512">AVX512</a> (512 bit).</p>
<p>Because of <a href="https://en.wikipedia.org/wiki/Backward_compatibility">backward compatibility</a>, each CPU that adds a new VLS ISA also has to support all existing ones.
This leads to a waste of <a href="https://en.wikipedia.org/wiki/Opcode">opcode</a> space and increases the complexity of the CPU's <a href="https://en.wikipedia.org/wiki/Instruction_cycle#Decode_stage">instruction decoder</a>.
Of course this also increases the complexity for the programmer who has then remember (or look up all the time) syntactic and functional differences between all the VLS ISAs.</p>
<p>That means that while VLS code written for smaller vector registers runs on newer CPUs, it can't make use of the wider vector registers.
Thus, existing code has to be reimplemented again and again to make use of new VLS ISAs.
Similarly, code written for high-end CPUs doesn't run on middle-end CPUs (because it requires the VLS-ISA with wider vector registers).
Thus one either has to target some older (hopefully widely available) VSL-ISA or has to provide multiple implementations for different VSL-ISAs.</p>
</section>
<section id="the-solution-agnosticism">
<h2><a href="#id14">The Solution: Agnosticism</a></h2>
<p>The solution to all this is to design a variable length vector instruction set.
In that way the instructions are then agnostic to the vector register size of a concrete CPU implementation.
Thus, the binary code is portable between low, middle and high-end CPUs, and automatically makes use of wider registers in newer CPUs.</p>
<p>The <a href="https://github.com/riscv/riscv-v-spec/releases/tag/0.8">RISC-V vector extension "V"</a> implements such vector instruction set.
As of early 2020, the <a href="https://github.com/riscv/riscv-v-spec/releases/tag/0.8">RISC-V "V" specification</a> is at version 0.8 and has draft status.</p>
<p>RISC-V "V" adds 32 vector registers, where the first register can be used as mask register and up to 8 registers can be grouped together.
The operands of a vector instruction such as <code>vadd.vv</code> are single vector registers or vector register groups.</p>
<p>Since vector registers are of variable length, RISC-V "V" code has to indicate the maximum vector length it wants to work with, e.g.:</p>
<pre><span>vsetvli</span> <span>t0</span><span>,</span> <span>a2</span><span>,</span> <span>e8</span></pre>
<p>Meaning that a vector length (vl) of up to <code>a2</code> 8 bit wide (<code>e8</code>) elements is requested while the instruction returns the resulting length in register <code>t0</code>.
Thus, if the <code>a2</code> register is set to - say - <code>4096</code>, on a CPU with a vector register length (VLEN) of 128 bits, the following vector instructions work on 16 element wide vectors and <code>t0</code> is thus set to <code>16</code>, while on a CPU with 512 bit registers the vectors are configured to be 64 elements wide and <code>t0</code> is set to <code>64</code>.</p>
<p>This approach also simplifies loops that iterate over an input array in vector length chunks.
For example (where <code>a1</code> contains the address of an array of <code>a2</code> times 4 bytes):</p>
<pre><span>.Loop:</span>                        <span># local symbol name because of .L prefix</span>
    <span>vsetvli</span> <span>t0</span><span>,</span> <span>a2</span><span>,</span> <span>e32</span>       <span># configure vectors of 32 bit elements</span>

    <span>vlw.v</span>   <span>v4</span><span>,</span> <span>(</span><span>a1</span><span>)</span>          <span># Load t0 elements into v4,</span>
                              <span># starting at the address stored in a1</span>

    <span>...</span>                       <span># work with that chunk</span>

    <span>slli</span>    <span>t1</span><span>,</span> <span>t0</span><span>,</span> <span>2</span>         <span># shift-left logical, i.e. times 4</span>
    <span>add</span>     <span>a1</span><span>,</span> <span>a1</span><span>,</span> <span>t1</span>        <span># increment src by read elements</span>
    <span>sub</span>     <span>a2</span><span>,</span> <span>a2</span><span>,</span> <span>t0</span>        <span># decrement n</span>
    <span>bnez</span>    <span>a2</span><span>,</span> <span>.Loop</span>         <span># branch to loop head if not equal to zero</span>

    <span>...</span>                       <span># continue</span></pre>
<p>In cases where <code>a2</code> isn't a multiple of the maximum vector length, the last iteration
sets the vector length to a smaller value and the following vector instructions ignore
the unused trailing elements.
This implicit masking mechanism is orthogonal to the optional mask operand that is supported by most RISC-V vector instructions.</p>
<p>In contrast to that, with a vector length specific ISA, the main loop usually has to be followed by some finalization code block to explicitly deal with the last elements that don't fill a complete register, e.g.:</p>
<pre><span>const</span> <span>unsigned</span> <span>char</span> <span>*</span><span>p</span> <span>=</span> <span>inp</span><span>;</span>
<span>size_t</span> <span>l</span> <span>=</span> <span>n</span> <span>/</span> <span>(</span><span>VECTOR_LENGTH</span> <span>*</span> <span>ELEMENT_BYTES</span><span>);</span>
<span>for</span> <span>(</span><span>size_t</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>l</span><span>;</span> <span>++</span><span>i</span><span>,</span> <span>p</span> <span>+=</span> <span>VECTOR_LENGTH</span> <span>*</span> <span>ELEMENT_BYTES</span><span>)</span> <span>{</span>
    <span>...</span> <span>// load p into a vector register</span>
    <span>...</span> <span>// execute some vector instructions</span>
<span>}</span>
<span>// deal with some remaining bytes</span>
<span>// e.g. by setting up a mask or work on single elements</span>
<span>for</span> <span>(</span><span>size_t</span> <span>i</span> <span>=</span> <span>l</span><span>;</span> <span>i</span> <span>&lt;</span> <span>n</span><span>;</span> <span>++</span><span>i</span><span>,</span> <span>p</span> <span>+=</span> <span>ELEMENT_BYTES</span><span>)</span> <span>{</span>
    <span>...</span> <span>// work on the next element located at p</span>
<span>}</span></pre>
</section>
<section id="example">
<h2><a href="#id15">Example</a></h2>
<p>To illustrate RISC-V "V" with a real example, this section shows how to implement a vectorized function that converts a string of <a href="https://en.wikipedia.org/wiki/Binary-coded_decimal">binary coded decimals (BCD)</a> into an <a href="https://en.wikipedia.org/wiki/ASCII">ASCII</a> string.
Why BCD to ASCII conversion?
The task is complex enough such that most of the different vector instructions are used.
On the other hand, it's simple enough to fit into a small article and doesn't require domain specific knowledge.
It also demonstrates some perhaps not entirely obvious ways how vector instructions are used for string processing where those instruction could be assumed to only be useful for calculations.</p>
<p>With BCD, a byte (8 bits) is divided into two <a href="https://en.wikipedia.org/wiki/Nibble">nibbles</a> (4 bits) such that each nibble stores a (hexa-)decimal digit.
Note that 4 bits allow to exactly encode <span>2<sup>4</sup></span> values, thus when using it just for storing decimal digits it's not a very efficient encoding.</p>
<p>For the purpose of our example, the exercise is to write vector code that efficiently converts a BCD string such as <code>{ 0x12, 0x34, ..., 0xcd, 0xef }</code> to a corresponding ASCII string (e.g. <code>{ '1', '2', '3', '4', ..., 'c', 'd', 'e', 'f' }</code>). On a high-level, a solution involves separating the nibbles into single bytes and then converting each byte to the matching ASCII value.</p>
<p>The complete example source code is available in <a href="https://github.com/gsauthof/riscv">my github repository</a>.</p>
<section id="shuffling-nibbles">
<h3><a href="#id16">Shuffling Nibbles</a></h3>
<p>Our function has the following function signature:</p>
<pre><span>void</span> <span>bcd2ascii</span><span>(</span><span>void</span><span>*</span> <span>dst</span><span>,</span> <span>void</span> <span>const</span> <span>*</span> <span>src</span><span>,</span> <span>size_t</span> <span>n</span><span>);</span></pre>
<p>Meaning that <code>n</code> input bytes are read from <code>src</code> and the conversion writes <code>2*n</code> bytes into the <code>dst</code> output buffer.
Under the RISC-V calling conventions, <code>dst</code> is passed in register <code>a0</code>, <code>src</code> in register <code>a1</code> and <code>n</code> in register <code>a2</code>.</p>
<pre><span>.Loop:</span>                        <span># local symbol name because of .L prefix</span>
    <span>vsetvli</span> <span>a3</span><span>,</span> <span>a2</span><span>,</span> <span>e16</span><span>,</span> <span>m8</span>   <span># switch to 16 bit element size,</span>
                              <span># 4 groups of 8 registers</span>
    <span># --&gt; a3 = min(a2, 8*vlenb/2)</span>
    <span>vlbu.v</span> <span>v16</span><span>,</span> <span>(</span><span>a1</span><span>)</span>          <span># Load a3 unsigned bytes,</span>
                              <span># one byte per 16 bit element, zero-extend,</span>
                              <span># starting at addr stored in a1</span>
    <span># --&gt; v16 = | 0, a1[vlenb/2-1], ..., 0, a1[1], 0, a1[0] |, ...,</span>
    <span>#     v23 = | 0, a1[a3-1],       ...,  0, a1[7*vlenb/2] |</span>
    <span># --&gt; v16 = | ... 00mn 00kl 00ij 00gh |</span>

    <span>add</span> <span>a1</span><span>,</span> <span>a1</span><span>,</span> <span>a3</span>            <span># increment src by read elements</span>
    <span>sub</span> <span>a2</span><span>,</span> <span>a2</span><span>,</span> <span>a3</span>            <span># decrement n</span></pre>
<p>The main loop starts with configuring a vector element size of 16 bit (<code>e16</code>), grouping 8 registers together (<code>m8</code>) and requesting a vector length that equals the number of remaining source bytes or the CPU maximum.
With this grouping, each register group is accessed by using a vector register with a number that is dividable by 8.
That means <code>v0</code> identifies the group consisting of <code>v0, v1, ..., v7</code>, <code>v8</code> identifies <code>v8, ..., v15</code>, etc.</p>
<p>The <code>vl*.v</code> load instruction comes in different variants.
Here, the <code>vlbu.v</code> variant zero extends each input byte per 16 bit element which is useful in our example because this directly leaves room for shuffling the nibbles.
In other words, it's a widening load and thus saves a separate widening operation such as <code>vwaddu.vx</code>.</p>
<p>That means on CPUs with 256 bit vector registers, this code loads up to 128 input bytes into the <code>v16</code> register group.</p>
<p>Note that register content in the comments is enclosed in <code>| |</code> and written right to left, starting with the least significant element.
Arbitrary nibbles are denoted sometimes by placeholder variables such as <code>g, h, ...</code>.</p>
<p>The actual nibble shuffling:</p>
<pre><span>vsll.vi</span> <span>v24</span><span>,</span> <span>v16</span><span>,</span> <span>8</span>       <span># shift-left-logical each element by 8 bits</span>
<span># --&gt; v24 = | ... mn00 kl00 ij00 gh00 |</span>

<span>vsrl.vi</span> <span>v16</span><span>,</span> <span>v16</span><span>,</span> <span>4</span>       <span># shift-right-logical each element by 4 bits</span>
<span># --&gt; v16 = | ... 000m 000k 000i 000g |</span>

<span>slli</span> <span>a3</span><span>,</span> <span>a3</span><span>,</span> <span>1</span>            <span># shift left logical by immediate,</span>
                          <span># i.e. to double the number of vector elements</span>
<span>vsetvli</span> <span>t4</span><span>,</span> <span>a3</span><span>,</span> <span>e8</span><span>,</span> <span>m8</span>    <span># switch to 8 bit element size,</span>
                          <span># 4 groups of 8 registers</span>

<span>vand.vx</span> <span>v24</span><span>,</span> <span>v24</span><span>,</span> <span>t2</span>      <span># and each element with 0x0f,</span>
                          <span># i.e. zero-out the high nibbles</span>
<span># --&gt; v24 = | ... 0n 00 0l 00 0j 00 0h 00 |</span>
<span>vor.vv</span>  <span>v16</span><span>,</span> <span>v16</span><span>,</span> <span>v24</span>     <span># or each element</span>
<span># --&gt; v16 = | ... 0n 0m 0l 0k 0j 0i 0h 0g |</span></pre>
<p>So far the example shows most of the syntactic conventions of the "V" ISA.
Vector instructions start with <code>v</code> and a suffix such as <code>.vi</code>, <code>.vx</code> and <code>.vv</code> describe the source operand types, i.e. vector-immediate, vector-scalar and vector-vector.</p>
<p>The bit-shift instructions don't cross element boundaries.
Thus, just vector group <code>v24</code> has to be zero-masked and not <code>v16</code>.</p></section></section></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://gms.tf/riscv-vector.html">https://gms.tf/riscv-vector.html</a></em></p>]]>
            </description>
            <link>https://gms.tf/riscv-vector.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24069793</guid>
            <pubDate>Thu, 06 Aug 2020 10:52:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Two Features of JavaScript that you might not know]]>
            </title>
            <description>
<![CDATA[
Score 59 | Comments 63 (<a href="https://news.ycombinator.com/item?id=24069444">thread link</a>) | @illuminated
<br/>
August 6, 2020 | https://www.monkwhocode.com/2020/06/javascriptnodejs-2-features-that-you.html | <a href="https://web.archive.org/web/*/https://www.monkwhocode.com/2020/06/javascriptnodejs-2-features-that-you.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<div id="post-body-5960135948766008378">
<div dir="ltr" trbidi="on">
<p><a href="https://1.bp.blogspot.com/-eUGp0l2lGGI/Xu8IjGPaWoI/AAAAAAAAWPw/t1PSsuhsUMUErg6Pqodr1mFqR8_Y1pNQgCLcBGAsYHQ/s1600/LEARN%2BeXPLORE%2Bgrow%2B%25288%2529.png" imageanchor="1"><img data-original-height="500" data-original-width="500" height="320" src="https://1.bp.blogspot.com/-eUGp0l2lGGI/Xu8IjGPaWoI/AAAAAAAAWPw/t1PSsuhsUMUErg6Pqodr1mFqR8_Y1pNQgCLcBGAsYHQ/s320/LEARN%2BeXPLORE%2Bgrow%2B%25288%2529.png" width="320"></a></p>

<p>
This is a very short article where we will be discussing two Javascript features that you may not know.</p>


<p>
So let's start,</p>

<p><b>1)Exponentiation operator(**):</b></p>
<p>
This operator was added in ES6 and is supported by most of the browsers but excluding internet explorer.</p>
<p>
It is also called an Infix operator for Exponentiation.</p>
<p>
Before for exponentiation, we have to use Math.pow(x,y).</p>
<p>
But now you can use x**y.</p>

<p>
For example: 2**5 //returns 32</p>

<p><b>2)Numeric Separators:</b></p>
<p>
Large numeric literals are difficult for the human eye to parse quickly,</p>
<p>
especially when there are lots of repeating digits. To improve readability, you can use</p>
<p>
underscores as separators in numeric literals.</p>

<p>
For example:</p>
<p>
let value= 100_000_000_00 //Is same as 10000000000</p>

<p>
As of May 2020, It is supported by all major browsers (Chrome[75+], Firefox[70+], Edge, Safari[13+], Opera) (<a href="https://caniuse.com/#feat=mdn-javascript_grammar_numeric_separators">source 1</a>, <a href="https://v8.dev/features/numeric-separators">source 2</a> for more details about different browsers and versions supporting it)&nbsp;</p>

<p>
Interesting note: although supported by all browsers, this is not part of any ECMAScript version yet.</p>



<p>
I hope you like this article and if any doubts please let me know in the comment section.</p>
<p>
Subscribe&nbsp;this blog for more articles on&nbsp;Node.js&nbsp;and&nbsp;JavaScript.<br>
You can also follow me on&nbsp;<b><a href="https://twitter.com/joshiisaurabh">Twitter</a></b>&nbsp;or&nbsp;<b><a href="https://www.linkedin.com/in/saurabh-joshi-b16b05b4/">Linkedin</a>&nbsp;</b>for<b>&nbsp;</b>the<b>&nbsp;</b>latest updates.</p><p>

Written By:<br>
<b>Saurabh Joshi</b></p>




<br></div>
</div>
</div></div>]]>
            </description>
            <link>https://www.monkwhocode.com/2020/06/javascriptnodejs-2-features-that-you.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24069444</guid>
            <pubDate>Thu, 06 Aug 2020 09:37:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Epic Systems workers are organizing]]>
            </title>
            <description>
<![CDATA[
Score 163 | Comments 83 (<a href="https://news.ycombinator.com/item?id=24068201">thread link</a>) | @mgerdts
<br/>
August 5, 2020 | https://www.tonemadison.com/articles/epic-workers-arent-just-mad-theyre-organizing | <a href="https://web.archive.org/web/*/https://www.tonemadison.com/articles/epic-workers-arent-just-mad-theyre-organizing">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div data-layout-label="Post Body" data-type="item" data-updated-on="1596655167481" id="item-5f2b05c776829d20055ef8a0"><div><div><div data-block-type="2" id="block-b9ef3d0cb4832dbe6ac8"><div><p><strong><em>The Madison-area tech company's botched COVID-19 response has spurred some employees to pursue unionization.</em></strong></p><p><strong><em>John McCracken contributed additional reporting for this story.</em></strong></p><p><strong><em>Photo by </em></strong><a href="https://www.flickr.com/photos/gas_station_sushi/7261830974" target="_blank"><strong><em>E. Nekervis on Flickr</em></strong></a><strong><em>.</em></strong></p><p>Epic Systems is putting Madison back in the tech-industry spotlight, this time for its troubling public health and labor practices. As COVID-19 cases mount in Wisconsin, Dane County’s second-largest employer is set to send workers back to its sprawling Verona campus in stages, starting on August 10.&nbsp;</p><p>Employee fears and anger surrounding the return-to-work plan are, at this point, well-established: national and local reporters have <a href="https://twitter.com/lkwhite/status/1290677520078196736?s=20" target="_blank">noted</a> the dozens of messages, calls, and emails they received in response to requests for comment. But employee dissatisfaction has manifested in more than complaints. It has also cracked open an opportunity for collective action in the Madison area’s biggest, most ostentatiously anti-labor private employer.&nbsp;</p><p>Many of the Epic employees facing down the return-to-work date say they are scared about the health implications of heading back to share physical space with thousands of their co-workers.</p><p>“There’s a person in my household who is at high risk for serious complications from COVID-19 and I am very cognizant of the fact that my actions affect more than just myself,” says one employee, who also has two school-aged kids. Like many Epic workers speaking to the press this week, this employee asked to be cited anonymously, due to fears about retaliation or firing.</p><p>In an August 3 email, company executives addressed people who are parents or facing higher risks of coronavirus-related complications to offer an extended work-from-home period—but only until November 2, at which point employees are told to take a leave of absence without a guarantee of getting their jobs back. In an earlier message, sent on July 1, executives told employees: "If you’re a parent with young children, you will need to use the time between now and your return to campus to make arrangements for childcare so that you can be on campus full-time."</p><p>Of the Epic employees who spoke with <em>Tone Madison</em> this week, even those who are not at personally heightened risk for COVID-19&nbsp; expressed concern on behalf of the community at large.</p><p>“I’m a software developer at Epic, I’ve worked there for over 8 years...it’s disrespectful and risking the health of the entire community,” says another concerned employee, who remained anonymous for fear of reprisal. “We should all understand&nbsp; that personal risk is community risk. And so Epic, by forcing 10,000 people to increase their personal risk, it does risk the whole community.”</p><p>The scheduled plan will have workers populating the medical software company’s sprawling campus over the same period that University of Wisconsin-Madison students prepare to return to their dorms and downtown housing. To justify the rapid return to work, Epic CEO Judy Faulkner has cited the “culture” of the company: “It’s hard (actually, it’s impossible) to retain our culture when we’re working from our homes,” wrote Faulkner in an all-staff email on July 1.&nbsp;</p><p>Workers argue that given the projected course of the virus, there’s no way the company can provide for a safe return to work.</p><p>In Faulkner’s communications with Epic staff, she emphasized the role of individual employees in preventing the spread of COVID-19 on campus: “We ask you to do your part by avoiding bars, attending crowded gatherings, or other places where physical distancing can’t be easily observed.” By placing the responsibility of limiting exposure on individual workers, the company rhetorically absolves itself of the possibility of an outbreak: after all, Faulkner—Epic's <a href="https://www.nytimes.com/2018/12/20/business/epic-systems-campus-verona-wisconsin.html" target="_blank">eccentric billionaire</a> founder —claimed in the same&nbsp; email, “we’ve been told by many that our campus looks specifically designed to weather an epidemic.”&nbsp;</p><p>Epic is notorious for preventing employees from coming together to advocate for themselves as a group. In the 2018 ruling <em>&nbsp;</em><a href="https://www.oyez.org/cases/2017/16-285" target="_blank"><em>Epic Systems Corp. v. Lewis</em></a>, the United States Supreme Court enshrined the right of employers to force workers into individual arbitration. To work for Epic, employees sign away their rights to file class-action lawsuits against the company. It's now easier for other employers around the country to enforce those kinds of terms: In May 2018, <a href="https://www.jdsupra.com/legalnews/new-jersey-supreme-court-confirms-20004/" target="_blank">citing the </a><a href="https://www.jdsupra.com/legalnews/new-jersey-supreme-court-confirms-20004/"><em>Epic v. Lewis</em> SCOTUS ruling, </a>the New Jersey Supreme Court ruled that truck drivers attempting to file a collective suit against their employer could be prohibited from doing so.&nbsp;</p><p>In mid-July, a coalition of Epic workers, concerned about the company’s plan to reopen offices, circulated a survey to demonstrate collective disapproval of the plan. The poll yielded hundreds of responses condemning the company’s response to the coronavirus pandemic—but an Epic employee familiar with the survey, who prefers to remain anonymous for fear of reprisal, says that the company ignored the survey results. <a href="https://www.cbsnews.com/video/employees-raise-safety-concerns-with-return-to-work-plans/">In a </a><a href="https://www.cbsnews.com/video/employees-raise-safety-concerns-with-return-to-work-plans/" target="_blank"><em>CBS News</em></a><a href="https://www.cbsnews.com/video/employees-raise-safety-concerns-with-return-to-work-plans/"> segment that aired Tuesday morning</a>, Epic’s Chief Administrative Officer Sverre David Roang evaded questions about the survey, claiming that he was unaware of complaints surrounding the plan to reopen.&nbsp;</p><p>The pandemic, and Epic’s disregard for workers’ concerns, have occasioned a sudden flurry of labor activism at the company. Groups of workers have started organizing with the International Association of Sheet Metal, Air, Rail and Transportation Workers (SMART) Local 565. The local represents workers at several Madison-area companies, including Sub-Zero and Trachte Building Systems, and at a few companies in the Wausau area. IWW, a political affiliation group emphasizing direct action, has likewise supported workers in their fight for better conditions at Epic. The IWW's local activities of late have included <a href="http://captelunion.org/2020/03/18/captel-workers-union-calls-sickout/" target="_blank">working to organize employees at CapTel's call centers</a> in Madison and Milwaukee, and <a href="https://www.tonemadison.com/articles/the-grassroots-response-to-covid-19-in-madison-puts-our-institutions-to-shame" target="_blank">spearheading mutual-aid efforts during the pandemic</a>.</p><p>One first-time organizer among Epic's workers reached a boiling point after the usual channels available to Epic employees failed. “The reason that we reached out to the IWW,” says the worker, who requested anonymity, “is that we basically tried all of the internal avenues to have things change for the better, the work-from-home policies, the response to Black Lives Matter. Epic tells us that we’re supposed to be able to give feedback to whomever we want, and it doesn’t seem to have gone anywhere.”</p><p>“The only reason I am doing something is that it got to a point where my fear of getting fired was outweighed by 'I have to do something,'" this worker says.&nbsp;</p><p>This worker and organizer provided internal emails that outline the supposed benefits of coming back to work. One email that Faulkner sent to staff argues that employees who return to campus will have a better connection to Epic's software and internal employees. “Personally, I’m not willing to go back to work and possibly get sick for a better internet connection,” the worker says.&nbsp;</p><p>One employee in the company’s hosting sector, who has looked into the various union organizing drives, says that organizing at Epic will be a challenge, given the company’s hiring practices and labor structure.&nbsp;</p><p>“It is a little bit harder to organize than other places because there’s so many people that are young, straight out of college . . . without any frame of reference for their workplace conditions,” he says. “And there's a lot of&nbsp; anti-union or anti-collective sentiments that the company will work very hard to enforce.”</p><p>In addition to the 2018 SCOTUS ruling, Epic has, in the past several weeks, quashed workers’ attempts to act collectively. In an email obtained by <em>Tone Madison</em>, a company representative explained that an employee’s post questioning the return-to-work plan had been removed from an internal discussion board “per request by upper management.” <a href="https://madison.com/ct/news/local/health-med-fit/epic-employees-say-coronavirus-concerns-met-with-retaliation-demotions/article_7a7ce63e-4e56-5b57-a7f4-8c4dba286094.html#tracking-source=home-top-story" target="_blank">Employees also told </a><a href="https://madison.com/ct/news/local/health-med-fit/epic-employees-say-coronavirus-concerns-met-with-retaliation-demotions/article_7a7ce63e-4e56-5b57-a7f4-8c4dba286094.html#tracking-source=home-top-story"><em>The Capital Times </em>this week</a> that on multiple occasions, managers who had expressed concern about the company’s COVID-19 plan faced demotions.&nbsp;</p><p>The company has taken precautions to enable physical distancing on the premises, installing the same airflow systems used in hospitals, and rearranging the main cafeteria to preclude the daily mass gatherings characteristic of pre-pandemic lunchtime at the software company. But Epic's coronavirus response diverges significantly from those of other tech companies, including Alphabet, Google’s parent company, <a href="https://www.wsj.com/articles/google-to-keep-employees-home-until-summer-2021-amid-coronavirus-pandemic-11595854201" target="_blank">which will not require workers to return to its Mountain View, California offices until July of next year</a>.&nbsp;</p><p>Before the sudden spate of labor coverage at Epic, the medical software company had mostly <a href="https://madison.com/wsj/news/local/govt-and-politics/epic-systems-draws-on-literature-greats-for-its-next-expansion/article_4d1cf67c-2abf-5cfd-8ce1-2da60ed84194.html" target="_blank">drawn attention for its themed campus</a>—an oversized playground paying homage to storybook figures like Alice in Wonderland, Humpty Dumpty, and Harry Potter.&nbsp;</p><p>But with COVID-19 spreading quickly <a href="https://www.dhs.wisconsin.gov/covid-19/local.htm" target="_blank">in 61 of Wisconsin’s 72 counties</a>, the pandemic highlights the contradiction between Epic’s friendly workplace aesthetic and its disregard for worker safety. </p></div></div></div></div></div></div></div>]]>
            </description>
            <link>https://www.tonemadison.com/articles/epic-workers-arent-just-mad-theyre-organizing</link>
            <guid isPermaLink="false">hacker-news-small-sites-24068201</guid>
            <pubDate>Thu, 06 Aug 2020 04:48:15 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Node Modules at War: Why CommonJS and ES Modules Can’t Get Along]]>
            </title>
            <description>
<![CDATA[
Score 189 | Comments 143 (<a href="https://news.ycombinator.com/item?id=24067748">thread link</a>) | @dfabulich
<br/>
August 5, 2020 | https://redfin.engineering/node-modules-at-war-why-commonjs-and-es-modules-cant-get-along-9617135eeca1 | <a href="https://web.archive.org/web/*/https://redfin.engineering/node-modules-at-war-why-commonjs-and-es-modules-cant-get-along-9617135eeca1">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><section><div><div><h2 id="4131">Interop between them is possible, but it’s a hassle</h2><div><div><div><p><a href="https://redfin.engineering/@danfabulich?source=post_page-----9617135eeca1----------------------" rel="noopener"><img alt="Dan Fabulich" src="https://miro.medium.com/fit/c/96/96/0*3NuQy3oh1ckOGP-9." width="48" height="48"></a></p></div></div></div><p id="38db"><em>Dan Fabulich is a Principal Engineer at Redfin. (</em><a href="https://www.redfin.com/about/jobs?utm_source=engblog" target="_blank" rel="noopener"><em>We’re hiring</em></a><em>!)</em></p><p id="65d7">In Node 14, there are now two kinds of scripts: there are old-style CommonJS (CJS) scripts and new-style ESM scripts (aka MJS). CJS scripts use <code>require()</code> and <code>module.exports</code>; ESM scripts use <code>import</code> and <code>export</code>.</p><p id="4684"><strong>ESM and CJS are completely different animals.</strong> Superficially, ESM looks very similar to CJS, but their implementations couldn’t be more different. One of them is a honey bee, and the other is a murder hornet.</p><figure><div><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/3436/1*ljab8kLJtGC-o36VQ7vBZg.jpeg" width="1718" height="581" srcset="https://miro.medium.com/max/552/1*ljab8kLJtGC-o36VQ7vBZg.jpeg 276w, https://miro.medium.com/max/1104/1*ljab8kLJtGC-o36VQ7vBZg.jpeg 552w, https://miro.medium.com/max/1280/1*ljab8kLJtGC-o36VQ7vBZg.jpeg 640w, https://miro.medium.com/max/1400/1*ljab8kLJtGC-o36VQ7vBZg.jpeg 700w" sizes="700px" data-old-src="https://miro.medium.com/max/60/1*ljab8kLJtGC-o36VQ7vBZg.jpeg?q=20"></p></div></div></div><figcaption>A hornet and a honey bee. One of these is like ESM and the other is like CJS, but I can never remember which one is which. Credit: <a href="https://en.wikipedia.org/wiki/File:Hornet-vespa.jpg" target="_blank" rel="noopener">wikimedia</a>, <a href="https://commons.wikimedia.org/wiki/File:Honey_bee_(Apis_mellifera).jpg" target="_blank" rel="noopener">wikimedia</a></figcaption></figure><p id="c5d2"><strong>Calling CJS from ESM and vice versa is possible, but it’s a hassle.</strong></p><p id="4a03">Here are the rules, which I’ll explain in more detail below:</p><ol><li id="0fb2">You can’t <code>require()</code> ESM scripts; you can only <code>import</code> ESM scripts, like this: <code>import {foo} from 'foo'</code></li><li id="e91d">CJS scripts can’t use static <code>import</code> statements like the one above.</li><li id="ad90">CJS scripts <em>can</em> use asynchronous dynamic <code>import()</code> to use ESM, but that's a hassle, compared to synchronous <code>require</code>.</li><li id="d3b7">ESM scripts <em>can</em> <code>import</code> CJS scripts, but only by using the “default import” syntax <code>import _ from 'lodash'</code>, not the “named import” syntax <code>import {shuffle} from 'lodash'</code>, which is a hassle if the CJS script uses named exports.</li><li id="a767">ESM scripts <em>can</em> <code>require()</code> CJS scripts, even with named exports, but it’s typically not worth the trouble, because it requires even more boilerplate, and, worst of all, bundlers like Webpack and Rollup don’t/won’t know how to work with ESM scripts that use <code>require()</code>.</li><li id="3a5c">CJS is the default; you have to opt-in to ESM mode. You can opt-in to ESM mode by renaming your script from <code>.js</code> to <code>.mjs</code>. Alternately, you can set <code>"type": "module"</code> in <code>package.json</code>, and then you can opt-out of ESM by renaming scripts from <code>.js</code> to <code>.cjs</code>. (You can even tweak just an individual subdirectory by putting a one-line <code>{"type": "module"}</code> <code>package.json</code> file in there.)</li></ol><p id="1641">These rules are <em>painful</em>. Worse, for many users, especially newbies to Node, these rules are <em>incomprehensible</em>. (Fear not, I’ll explain them all here in this article.)</p><p id="5fb5">Many observers of the Node ecosystem have speculated that these rules are due to a failure of leadership, or even hostility toward ESM. But, as we’ll see, all of these rules are here for a good reason, which will make it very difficult to break these rules in the future.</p><p id="1121">I’ll conclude with three guidelines for library authors to follow:</p><ul><li id="fc38">Provide a CJS version of your library</li><li id="6dae">Provide a thin ESM wrapper for your CJS</li><li id="4ca9">Add an <code>exports</code> map to your <code>package.json</code></li></ul><p id="7269"><strong>It’s all gonna be OK.</strong></p><p id="2f7d"><a href="https://www.reddit.com/r/node/comments/i4jwb7/node_modules_at_war_why_commonjs_and_es_modules/" target="_blank" rel="noopener">Discuss on Reddit</a><br><a href="https://news.ycombinator.com/item?id=24067748" target="_blank" rel="noopener">Discuss on Hacker News</a></p><p id="8d2e">Since the dawn of Node, Node modules were written as CommonJS modules. We use <code>require()</code> to import them. When implementing a module for other people to use, we can define <code>exports</code>, either “named exports” by setting <code>module.exports.foo = 'bar'</code> or a “default export” by setting <code>module.exports = 'baz'</code>.</p><p id="a362">Here’s a CJS example using <strong>named exports</strong>, where <code>util.cjs</code> has an export named <code>sum</code>.</p><pre><span id="36d6">// @filename: util.cjs<br>module.exports.sum = (x, y) =&gt; x + y;</span><span id="b41b">// @filename: main.cjs<br>const {sum} = require('./util.cjs');<br>console.log(sum(2, 4));</span></pre><p id="d017">Here’s a CJS example where <code>util.cjs</code> sets a <strong>default export</strong>. The default export has no name; modules using <code>require()</code> define their own name.</p><pre><span id="6577">// @filename: util.cjs<br>module.exports = (x, y) =&gt; x + y;</span><span id="eeec">// @filename: main.cjs<br>const whateverWeWant = require('./util.cjs');<br>console.log(whateverWeWant(2, 4));</span></pre><p id="b405">In ESM scripts, <code>import</code> and <code>export</code> are part of the language; like CJS, they have two different syntaxes for named exports and the default export.</p><p id="e73c">Here’s an ESM example with <strong>named exports</strong>, where <code>util.mjs</code> has an export named <code>sum</code>.</p><pre><span id="4112">// @filename: util.mjs<br>export const sum = (x, y) =&gt; x + y;</span><span id="3c49">// @filename: main.mjs<br>import {sum} from './util.mjs'<br>console.log(sum(2, 4));</span></pre><p id="d0ee">Here’s an ESM example where <code>util.mjs</code> sets a <strong>default export</strong>. Just like in CJS, the default export has no name, but the module using <code>import</code> defines its own name.</p><pre><span id="ab2d">// @filename: util.mjs<br>export default (x, y) =&gt; x + y;</span><span id="0916">// @filename: main.mjs<br>import whateverWeWant from './util.mjs'<br>console.log(whateverWeWant(2, 4));</span></pre><p id="bfb3"><strong>In CommonJS, </strong><code><strong>require()</strong></code><strong> is synchronous</strong>; it doesn't return a promise or call a callback. <code>require()</code> reads from the disk (or perhaps even from the network), and then immediately runs the script, which may itself do I/O or other side effects, and then returns whatever values were set on <code>module.exports</code>.</p><p id="5eb2"><strong>In ESM, the module loader runs in asynchronous phases.</strong> In the first phase, it parses the script to detect calls to <code>import</code> and <code>export</code> without running the imported script. In the parsing phase, the ESM loader can immediately detect a typo in named imports and throw an exception without ever actually running the dependency code.</p><p id="d291">The ESM module loader then asynchronously downloads and parses any scripts that you imported, and then scripts that your scripts imported, building out a “module graph” of dependencies, until eventually it finds a script that doesn’t import anything. Finally, that script is allowed to execute, and then scripts that depend on that are allowed to run, and so on.</p><p id="8815">All of the “sibling” scripts in the ES module graph download in parallel, but they execute in order, guaranteed by the loader specification.</p><p id="6f7b">ESM changes a bunch of stuff in JavaScript. ESM scripts use Strict Mode by default (<code>use strict</code>), their <code>this</code> doesn't refer to the global object, scoping works differently, etc.</p><p id="8a61">This is why, even in browsers, <code>&lt;script&gt;</code> tags are non-ESM by default; you have to add a <code>type="module"</code> attribute to opt into ESM mode.</p><p id="e76a">Switching the default from CJS to ESM would be a big break in backwards compatibility. (<a href="https://deno.land/" target="_blank" rel="noopener">Deno</a>, the hot new alternative to Node, makes ESM the default, but as a result, its ecosystem is starting from scratch.)</p><p id="03c6">The simplest reason that CJS can’t <code>require()</code> ESM is that ESM can do top-level <code>await</code>, but CJS scripts can't.</p><p id="a892"><a href="https://v8.dev/features/top-level-await" target="_blank" rel="noopener">Top-level </a><code><a href="https://v8.dev/features/top-level-await" target="_blank" rel="noopener">await</a></code> lets us use the <code>await</code> keyword outside of an <code><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Async_await" target="_blank" rel="noopener">async</a></code><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Async_await" target="_blank" rel="noopener"> function</a>, at the “top level.”</p><p id="1b27">ESM’s multi-phase loader makes it possible for ESM to implement top-level await without making it a “footgun.” Quoting from the <a href="https://v8.dev/features/top-level-await" target="_blank" rel="noopener">V8 team’s blog post</a>:</p><blockquote><p id="368f">Perhaps you have seen the <a href="https://gist.github.com/Rich-Harris/0b6f317657f5167663b493c722647221" target="_blank" rel="noopener">infamous gist</a> by <a href="https://twitter.com/Rich_Harris" target="_blank" rel="noopener">Rich Harris</a> which initially outlined a number of concerns about top-level <code>await</code> and urged the JavaScript language not to implement the feature. Some specific concerns were:</p><p id="d5f0">• Top-level <code>await</code> could block execution.<br>• Top-level <code>await</code> could block fetching resources.<br>• There would be no clear interop story for CommonJS modules.</p><p id="9ad3">The stage 3 version of the proposal directly addresses these issues:</p><p id="81b7">• As siblings are able to execute, there is no definitive blocking.<br>• Top-level <code>await</code> occurs during the execution phase of the module graph. At this point all resources have already been fetched and linked. There is no risk of blocking fetching resources.<br>• Top-level <code>await</code> is limited to [ESM] modules. There is explicitly no support for scripts or for CommonJS modules.</p></blockquote><p id="a0c0">(Rich now approves of the current top-level <code>await</code> implementation.)</p><p id="8cd5">Since CJS doesn’t support top-level <code>await</code>, it’s not even possible to <em>transpile</em> ESM top-level <code>await</code> into CJS. How would you rewrite this code in CJS?</p><pre><span id="1969">export const foo = await fetch('./data.json');</span></pre><p id="1c9b">It’s frustrating, because the vast majority of ESM scripts don’t use top-level <code>await</code>, but, as one commenter wrote in that thread, “I don’t think designing a system with the blanket assumption that some feature just won’t get used is a viable path.”</p><p id="445d"><a href="https://github.com/nodejs/modules/issues/454" target="_blank" rel="noopener">There’s an active debate on how to </a><code><a href="https://github.com/nodejs/modules/issues/454" target="_blank" rel="noopener">require()</a></code><a href="https://github.com/nodejs/modules/issues/454" target="_blank" rel="noopener"> ESM in this thread.</a> (Please read the whole thread and the linked discussions before commenting. If you dive in, you’ll find that top-level <code>await</code> isn’t even the only problematic case… what do you think happens if you synchronously <code>require</code> ESM which can asynchronously <code>import</code> some CJS which can synchronously <code>require</code> some ESM? What you get is a sync/async zebra stripe of <em>death</em>, that’s what! Top-level <code>await</code> is just the last nail in the coffin, and the easiest to explain.)</p><p id="d83f">Reviewing that conversation, it doesn’t look like we’re going to be able to <code>require()</code> ESM any time soon!</p><h2 id="3acf">CJS Can import() ESM, but It’s Not Great</h2><p id="b19b">For now, if you’re writing CJS and you want to <code>import</code> an ESM script, you’ll have to use asynchronous dynamic <code>import()</code>.</p><pre><span id="69f7">(async () =&gt; {<br>    const {foo} = await import('./foo.mjs');<br>})();</span></pre><p id="dcae">It’s… fine, I guess, as long as you don’t have any <code>exports</code>. If you do need to do some <code>exports</code>, you’ll have to export a Promise instead, which may be <a href="https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/" target="_blank" rel="noopener">a huge inconvenience to your users</a>:</p><pre><span id="ad31">module.exports.foo = (async () =&gt; {<br>    const {foo} = await import('./foo.mjs');<br>    return foo;<br>})();</span></pre><p id="94bc">You can do this:</p><pre><span id="6859">import _ from './lodash.cjs'</span></pre><p id="3b2c">But you can’t do this:</p><pre><span id="c06a">import {shuffle} from './lodash.cjs'</span></pre><p id="7e7b">That’s because CJS scripts compute their named exports as they <em>execute</em>, whereas ESM’s named exports must be computed during the <em>parsing</em> phase.</p><p id="2899">Fortunately for us, there’s a workaround! The workaround is annoying, but totally doable. We just have to import CJS scripts like this:</p><pre><span id="bccb">import _ from './lodash.cjs';<br>const {shuffle} = _;</span></pre><p id="7e2f">There are no real downsides to this, and ESM-aware CJS libraries can even provide their own ESM wrappers that encapsulate this boilerplate for us.</p><p id="7fd3">This is totally fine! I just… wish it were better.</p><h2 id="6069">Out-of-order execution would work, but it might be even worse</h2><p id="6455">A number of people have proposed executing CJS imports before ESM imports, out of order. That way, the CJS named exports could be computed at the same time as ESM named exports.</p><p id="ab6c">But that would <a href="https://github.com/nodejs/modules/issues/81#issuecomment-391348241" target="_blank" rel="noopener">create a new problem</a>.</p><pre><span id="34c8">import {liquor} from 'liquor';<br>import {beer} from 'beer';</span></pre><p id="69a1">If <code>liquor</code> and <code>beer</code> are both initially CJS, changing <code>liquor</code> from CJS to ESM would change the ordering from <code>liquor, beer</code> to <code>beer, liquor</code> , which would be nauseatingly problematic if <code>beer</code> relied on something from <code>liquor</code> being executed first.</p><p id="b454"><a href="https://github.com/nodejs/modules/issues/509" target="_blank" rel="noopener">Out-of-order execution is still under debate</a>, though the conversation seems to have mostly fizzled out a few weeks ago.</p><h2 id="59b5">Dynamic Modules could save us, but their star is poisoned</h2><p id="79d1">There’s an alternative proposal that doesn’t require out-of-order execution or wrapper scripts, called <a href="https://github.com/nodejs/dynamic-modules" target="_blank" rel="noopener">D…</a></p></div></div></section></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://redfin.engineering/node-modules-at-war-why-commonjs-and-es-modules-cant-get-along-9617135eeca1">https://redfin.engineering/node-modules-at-war-why-commonjs-and-es-modules-cant-get-along-9617135eeca1</a></em></p>]]>
            </description>
            <link>https://redfin.engineering/node-modules-at-war-why-commonjs-and-es-modules-cant-get-along-9617135eeca1</link>
            <guid isPermaLink="false">hacker-news-small-sites-24067748</guid>
            <pubDate>Thu, 06 Aug 2020 03:01:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[$250k books sold, to save lives]]>
            </title>
            <description>
<![CDATA[
Score 113 | Comments 52 (<a href="https://news.ycombinator.com/item?id=24067365">thread link</a>) | @gregalbritton
<br/>
August 5, 2020 | https://sive.rs/250k | <a href="https://web.archive.org/web/*/https://sive.rs/250k">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">

<article>
<header>


<small>2020-08-06</small>
</header>

<p>
	Six weeks ago I emailed my <a href="https://sive.rs/list">private email list</a> with a secret link to buy my new books.
</p><p>
	They’re not even officially released yet, but they’ve already sold over $250,000.
</p><p>
	I made 5000 limited edition hardcover copies of each, but those have sold out now.
</p><p>
<strong>
	I’ll admit, it made me ridiculously happy to make $250,000.
</strong>
	I was expecting way less than that, so it was a big surprise.
	I had a spring in my step for days.
</p><p>
	Then I thought about what to do with the money.
	There’s nothing I want to buy.
	Should I put it in an investment account?
	Eh.
	For what purpose?
	I <a href="https://sive.rs/full">don’t want more money</a>.
</p><p>
	So, I decided to donate it to charity.
	Which charity?
	I want to save the most lives.
	So I let <a href="https://www.givewell.org/">GiveWell</a> decide.
</p><p>
<strong>
	Yesterday I wired the entire $250,000 to the <a href="https://www.againstmalaria.com/">Against Malaria Foundation</a>.
</strong>
	That will buy 125,000 malaria nets, protecting ~225,000 people, averting ~65,000 cases of malaria, preventing ~125 deaths.
</p><p>
	Yeah.
	That’s <a href="https://sive.rs/n">worth doing</a>.
</p><p>
	Afterwards, a friend reminded me that I had just repeated my “<a href="https://sive.rs/232">232 sand dollars</a>” story, so <a href="https://sive.rs/232">go read that</a> if interested.
</p><p>
	You can buy the books now, directly from me.
	They won’t be available anywhere else for a couple more months.
</p>
<ul><li>
	“<strong><a href="https://sive.rs/m">Your Music and People</a></strong>” is a philosophy of getting your work to the world by being creative, considerate, resourceful, and connected.
</li><li>
	“<strong><a href="https://sive.rs/n">Hell Yeah or No</a></strong>” is a collection of thoughts around what’s worth doing, fixing faulty thinking, and making things happen.
</li></ul>
<img src="https://sive.rs/images/DerekSivers-cover-YourMusicAndPeople-400x492.png" alt="Your Music and People">
<br>
<img src="https://sive.rs/images/DerekSivers-cover-HellYeahOrNo-400x492.png" alt="Hell Yeah or No">


</article>



</div></div>]]>
            </description>
            <link>https://sive.rs/250k</link>
            <guid isPermaLink="false">hacker-news-small-sites-24067365</guid>
            <pubDate>Thu, 06 Aug 2020 01:33:47 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Do Not Trust Google]]>
            </title>
            <description>
<![CDATA[
Score 61 | Comments 39 (<a href="https://news.ycombinator.com/item?id=24067162">thread link</a>) | @DlSGUSTING
<br/>
August 5, 2020 | https://lukeboyle.com/blog-posts/2020/08/do-not-trust-google | <a href="https://web.archive.org/web/*/https://lukeboyle.com/blog-posts/2020/08/do-not-trust-google">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="___gatsby"><div tabindex="-1" id="gatsby-focus-wrapper"><div><main><div><article><div><p>Posted by <!-- -->Luke Boyle<!-- --> on the<!-- --> <time datetime="Sat Aug 01 2020 00:00:00 GMT+0000 (Coordinated Universal Time)">1st of August, 2020</time></p><p><img src="https://lukeboyle.com/static/google-fasc-6d23fd163ac10360abb4467ecdb9645a.jpg" alt="" data-identifier="google-fasc"></p><p>I realise that this is one of the most well-explored topics on the privacy-conscious edges of the internet, but seriously... Do not trust Google. Facebook seems to be our current punching bag of choice because of their supposed ability to manipulate political opinion, but in my opinion Google is a much more insidious company with far greater potential for abuse. Google is the <a href="https://www.investopedia.com/news/facebook-google-digital-ad-market-share-drops-amazon-climbs/" target="_blank" rel="noreferrer noopener">largest advertising platform</a> by a significant margin (accounting for 36.3% of advertising in the U.S. with Facebook trailing at 19.3%). At the end of the day, if you delete your Facebook account, what are you really missing out on?</p><p>Google (or more specifically Alphabet Inc.) owns the largest search engine (Google.com), the largest video streaming platform (Youtube), and the most-used smartphone operating system (Android). You might ask, "What's wrong with that? Sounds like they're just very successful at what they do". Well, let's break down those three markets (Search, Streaming, Mobile).</p><p><img src="https://lukeboyle.com/static/do-be-evil-6ba993531a7046106f481b038b7ed98b.jpg" alt="The classic Google slogan &quot;Don't be evil&quot;, except the end of the &quot;don't&quot; is crossed out so it says &quot;Do be evil&quot;" data-identifier="do-be-evil"></p><h2>Search</h2><p>Google's estimated market share for search traffic globally is 92.16% <a href="https://gs.statcounter.com/search-engine-market-share" target="_blank" rel="noreferrer noopener">source</a>. As people increasingly are using search to navigate the web (as opposed to typing a URL into the address bar), this traffic increases, those people see more ads, Google makes more money. Google then uses this money to purchase exclusivity agreements with the likes of Apple (just two years ago it was announce that Google would be paying $12 billion US to Apple to remain the default search engine on Safari in 2019 <a href="https://fortune.com/2018/09/29/google-apple-safari-search-engine/" target="_blank" rel="noreferrer noopener">source</a> at a cost of roughly $10 per user).</p><h3>How does Google abuse Search?</h3><p>If you ask the average user how Google search works, they'd probably say "it just searches for your search term across the web", but what they probably don't know is that is just the tip of the iceberg. Other dimensions of search include:</p><ul><li>what kind of users go to that websites (and does the user searching fit that profile)?</li><li>how much traffic does the website get?</li><li>how relevant the content is to the search term (SEO magic)?</li><li>and, most importantly, does this website fit an acceptable narrative?</li></ul><p>There's certainly an argument to be made for suppressing some search results, such as pro-authoritarian sites (e.g. communist or fascist), extremely fringe conspiracy, illegal pornography, or bomb-making instructions. Advertisers probably don't want their ads next to those results. Rightly or wrongly, Google is already suppressing content from such websites (though, they're probably still indexing them).</p><p>If Google can suppress fascist content from sites like Stormfront (prominent white-supremacy forum), then who is to say which content they can or cannot suppress? Breitbart is a well-known right wing news site that has had their content <a href="https://www.breitbart.com/tech/2020/07/28/election-interference-google-purges-breitbart-from-search-results/" target="_blank" rel="noreferrer noopener">almost entirely purged</a> from Google search results (as evidenced by the "search engine visibility" chart below).</p><p><img src="https://lukeboyle.com/static/breitbart-visibility-index-7479c89645b960fee2d841dfa4f1574d.jpg" alt="Search engine visibility index for Breitbart.com shows significant increase in visibility leading up to the 2016 presidential election with a sharp drop in mid 2017" data-identifier="breitbart-visibility-index"></p><p>You don't have to agree with them politically to see that Google is applying different standards to conservative content than to more liberal content. I don't visit Breitbart, I don't read their articles, and frankly I don't give a shit what they have to say, but I believe in a free and open internet. If you believe in a free and open internet then you have to agree this is wrong. During the cold war, anyone who didn't follow the extreme protectionist beliefs of the time <a href="https://www.history.com/topics/cold-war/red-scare" target="_blank" rel="noreferrer noopener">were shouted down as communists</a> (Even Martin Luther King Jr. was dismissed as a communist by J. Edgar Hoover). This same thing is happening now, but the buzz word is different. The new weaponised word is "Nazi". If time had elapsed differently, I have no doubt that it would be left-wing websites suppressed in search results, and that still wouldn't be okay.</p><p>There's plenty of evidence to suggest that Google is manually making these decisions to block conservative websites, however, Alphabet CEO Sundar Pichai denied that they manually censor websites at the recent <a href="https://www.theguardian.com/technology/2020/jul/29/tech-hearings-facebook-mark-zuckerberg-amazon-jeff-bezos-apple-tim-cook-google-sundar-pichai-congress" target="_blank" rel="noreferrer noopener">Congressional antitrust hearing</a> except for in cases where there are legal requirements or copyright issues. I don't buy that, personally.</p><h2>Streaming</h2><p>When YouTube was founded it was facing severe scaling problems (because video processing and streaming is extremely expensive). Fortunately for them, Google saw potential in the platform and purchased the company for $1.65bn in Google stock, and their money issues were over. Google was throwing money into scaling the platform, and it was experiencing great growth. This success turned out to be a major problem for the YouTube, because, from the time it was purchased it has been making a loss. In recent years, YouTube has become profitable, however, without the bottomless pockets of Google behind it, they never would have been able to accomplish this. What incentive could Google have to take losses year after year on YouTube? Well, it turns out user data is particularly delicious. Mastercard's CEO has infamously said <a href="https://www.cnbc.com/2017/10/24/mastercard-boss-just-said-data-is-the-new-oil.html" target="_blank" rel="noreferrer noopener">"data is the new oil"</a>. I personally can't wait for Facebook, Amazon, and Google to become para-military organisations in the up-coming data wars.</p><p>YouTube has essentially bullied their way into market dominance using Google's bottomless pit of money. This is problematic because it allows failing companies to cheat death. Just like a bottom-feeding fish,latching onto a whale shark and hitching a ride. As I mentioned before, video streaming is extremely expensive, so it makes sense that great cloud infrastructure is a prerequisite to success. Well, big surprise, Google offers world-class commercial cloud infrastructure with Google Cloud Platform (GCP)! Do you suppose YouTube is paying full price for their infra?</p><p><img src="https://lukeboyle.com/static/google-shark-ad4f1bd39e618a72413dc9456fb01ebc.jpg" alt="A whale shark with small fish adhered to the top of it. YouTube, Google Play, and Google Plus logos are superimposed on the small fish heads" data-identifier="google-shark"></p><p>So, when you see a headline that says "<a href="https://bgr.com/2020/07/30/google-one-free-phone-backup-ios-android/" target="_blank" rel="noreferrer noopener">Stop paying for iCloud – Google One will now back up your iPhone for free</a>". Before obeying the shill who wrote it, you should ask yourself, "How can a company afford to give away so much storage space for free?". Well, they can't. Google simply obscures their losses with the immense revenue from Google Ads in the profit/loss statement at the end of each quarter. For more reading about this topic, Tim Bray has a fantastic article called <a href="https://www.tbray.org/ongoing/When/202x/2020/06/25/Break-Up-Google" target="_blank" rel="noreferrer noopener">"Break up Google"</a>.</p><h2>Mobile</h2><p>This article is already becoming too long, so I'm just going to cover mobile quickly. As Tim Bray mentions in the article above, Android isn't really a business. The only real non-ad revenue they have is from the commission they get from app purchases and licensing fees from OEMs (e.g. Samsung, Huawei, LG). How, then, are they able to sustain hundreds of highly paid engineers and all the other non-technical staff required to support the system?</p><p><img src="https://lukeboyle.com/static/android-ios-market-share-aa0b256bae300e426ecb38c8ef842165.jpg" alt="A map of the world with Android vs iOS market share. iOS is most dominant in first-world countries, whereas Android dominates emerging nations" data-identifier="android-ios-market-share"></p><p>Above is a map of Android vs iOS market shares. You can see that iOS pretty much only has the dominant market share in first world countries (like USA, Canada, Australia, UK, Japan). Most of the emerging countries in the world are strongly in favour of Android because, unlike Apple, the OS is not restricted to a particular device. So, countries like India (where the number of smart-phone users has increased sharply from 199 million in 2015 to 401 million in 2020 <a href="https://www.statista.com/statistics/467163/forecast-of-smartphone-users-in-india/" target="_blank" rel="noreferrer noopener">source</a>) that mostly purchase low-cost phones (e.g. Huawei, Xiaomi, Oppo). Emerging markets are extremely important to companies like Google partly because these countries are easier to exploit because they don't have strong legislation to protect users from predatory advertising, anticompetitive tactics, or data privacy. This is why I speculate that Mastercard is scrambling to <a href="https://www.forbes.com/sites/tomgroenfeldt/2020/05/06/financial-inclusion-helps-refugees-move-from-aid-recipients-to-earners-and-tax-payers" target="_blank" rel="noreferrer noopener">connect refugees to the global payment network</a> (Remember that quote from the Mastercard CEO: "Data is the new oil") and, indeed, why Mastercard <a href="https://www.jihadwatch.org/2018/08/patreon-and-mastercard-ban-robert-spencer-without-explanation" target="_blank" rel="noreferrer noopener">forced Patreon to ban Robert Spencer for his anti-refugee sentiment</a>.</p><p>Again, regardless of whether you agree with someone's political leaning or rhetoric, I shouldn't have to explain why it's ludicrous for people to believe that faceless, soulless corporations such as MasterCard or Google give two fucks about moral righteousness when their only servant is a number ticker on the Nasdaq website.</p><h2>Closing thoughts</h2><p>So, after reading all of that, I have to ask:</p><p>Why don't you route all of your web traffic through Google Servers?</p><p><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBqRXhpZgAATU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA5KGAAcAAAASAAAAUKACAAQAAAABAAAA86ADAAQAAAABAAAAKwAAAABBU0NJSQAAAFNjcmVlbnNob3T/4QkhaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiLz4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+AP/tADhQaG90b3Nob3AgMy4wADhCSU0EBAAAAAAAADhCSU0EJQAAAAAAENQdjNmPALIE6YAJmOz4Qn7/4gIkSUNDX1BST0ZJTEUAAQEAAAIUYXBwbAQAAABtbnRyUkdCIFhZWiAH5AAIAAEADQAyACBhY3NwQVBQTAAAAABBUFBMAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWFwcGxdkqS5+W0V5HeFKm4FIPOTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApkZXNjAAAA/AAAAGZjcHJ0AAABZAAAACN3dHB0AAABiAAAABRyWFlaAAABnAAAABRnWFlaAAABsAAAABRiWFlaAAABxAAAABRyVFJDAAAB2AAAABBjaGFkAAAB6AAAACxiVFJDAAAB2AAAABBnVFJDAAAB2AAAABBkZXNjAAAAAAAAAAxNU0kgTUFHMjcyQwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHRleHQAAAAAQ29weXJpZ2h0IEFwcGxlIEluYy4sIDIwMjAAAFhZWiAAAAAAAADz2AABAAAAARYIWFlaIAAAAAAAAH0OAAA6NgAAAQlYWVogAAAAAAAAUjIAALCBAAASSFhZWiAAAAAAAAAnlgAAFUgAAL/ccGFyYQAAAAAAAAAAAAH2BHNmMzIAAAAAAAELtwAABZb///NXAAAHKQAA/df///u3///9pgAAA9oAAMD2/8AAEQgAKwDzAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/bAEMAAgICAgICAwICAwQDAwMEBQQEBAQFBwUFBQUFBwgHBwcHBwcICAgICAgICAoKCgoKCgsLCwsLDQ0NDQ0NDQ0NDf/bAEMBAgICAwMDBgMDBg0JBwkNDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDf/dAAQAEP/aAAwDAQACEQMRAD8A/fyiivjb9q34kfFbwdrHgDwt8KL9LDUPFd5eWrFreCcySI1rHCubiORUXdOSxAz05wDn2MgyStm2OhgKEoxlLmd5NqKUYuTbaT6J9Dzc3zOnl+Fli6sW1G2kVdu7SVk2ur7n2TRX5OfGX4nftgfA++02z8WeMrO5TVopJLaexsbGSNmh2CVDvso2DIXX+HBBGD1A8X/4bE/aN/6G7/ym6d/8i1+lZf4KZvj8PHF4PE0Z05bNSnZ62/5991Y+Jxnidl2ErSw+JoVYzW6cY37/AM5+5dFfD37GHxm+Inxah8XReP8AU11RtIbTmtZBbQW7KLoXO9T5EcasP3KkZGRzz6fcNfnHEeQ4jJcxqZZi2nOFruN2tYqStdJ7NdD7TJs2o5ng4Y7DpqMr2vvo2ujfVdwor4O8c/twwjxzqfw3/Z/+HutfF7XNCfytXl0uT7JpdlKGZTG94YpgXBVh9wISMK7EEDsPgh+1VrHxJ8dyfCz4jfDHxJ8OfFgspNRhgvo3vLCa1iZVZ1vFiiA5YDLRiMt8gcuQp8Q9Q+waKKKACiiigAoorwb9nD486R+0f8MoPiZoml3Oj2s95c2YtbqRJJA1swUtuT5cHPFAHvNFFcT8Q/iN4K+FHhW58bfEHVI9G0SzeKOe8lSSRUadxHGCsSu/zOwHA780AdtRXzz8Pf2r/wBnX4q67F4X8B+O9M1PV58iCyJktp5ioLERJcJEZCFBJCZOATX0NQAUVyXjrx34T+GfhS/8ceOdRTSdD0tY2u7yRHdYhLIsSErGrucu6rwp6+ldbQAUVxt78QfB2neMYPh/fanFD4gudMm1iKyZX3NYW7iOWbft8sKjkAgsD7Ypnw9+Ingv4q+FLTxx8PtUj1nQ79pVt7uJXRXaCRopBtkVHBV0I5UdMjgg0AdrRRXK+N/G/hb4ceFtQ8beNtQTS9E0tFkvLuRHdYld1jUlY1Zzl2A4B60AdVRXy/4Y/bS/ZZ8YarDouh/EfR2vLhxHEl00tiHduiq91HEhYngDOSeBzXtPxC+I/gn4U+Fbnxv8QdUj0fQ7N4o5ryVJJERp3EcY2xK7nc7AcDvQB29FZ+m6rpus6Va65pNzHd6ffW8d1bXMLB4poJVDpIjDgqykEEdQa88g+NvwpuPhinxmXxLZx+CnieZdYnLwQMiSNCcCRVcsZVKKu3czcKDkZAPU6K8G+Fn7TnwK+NOq3Gg/DbxZbarqdtF572UkNxZXLQ/89Y4ruKF5Y8EHegZQCCTyK95oAKKKKAP/0P38r5E/aq+E938RW8Ia1p/izTPCl34dubqSCfU5vs6vJP5Dq0UgORJG0AIGO+cjHP13X54/ty2mh6h4r+E2n+J7prLRrnUNRi1C4XrFbNJYLK/ttQk55x1welfb+HNOtPiGhGhU5JWm78qnoqcm1yvR3V1bzPl+M5045PVdWHMvd0vy7zilqtrOz+R5X48+B3jr4m39vqfjr4zeENWuLWLyYDJfJGkaZyQqRIiAk/eO3LYGScVwv/DIX/VTvBX/AIMP/rVzX7UXhD4JeEde0WH4M6jBdx3FrI2oQWt4b+CFgU8lxMXkO6UMxZN5xtBwM8/Llf1Nw5gc0xWW0q+CxjpU2tIuhCDWr+ynZd9N9+p+DZ1isDQxtSlisMpzT1kqspX07tXf9I/Z/wDZH+DQ+E9n4nuf+Em0nxGdYkskzpEvnRQfZBMcO/8AebzumOAO+ePX/wBozWtd8OfAL4i6/wCGGePVdP8AC+rXFpLFkSRSx2shEiY53R/fHuK+NP8AgnUTj4gDPA/sU4+v22v0pu7S1v7WaxvYknt7iNopopFDJJG4KsrKeCrAkEHqK/l/xOoYijxNiaeKq+0muS8rKN/cjbRaKysvlc/deBqtGpkdCdCHJH3rK7dvelfV93qfFv7A+geHPDH7Ivg/U/CVnHLc6rZXOp37x4Et7qJmlWQSOASWVkEKk52qgHavD/H37fvx3+F2gHxR8Qf2bdT0PShPHbfarrxGix+dLnYgxppJZsHAx2rV0z4DftTfsr61q1v+yzPonjH4e6xdvexeFPEc7wXGkzTElltZzJGpj6ctJkgfNGXzI2jZfAf9pb9o7xz4c8S/tYyaF4e8HeEb2PVLLwboDNcC/v4c7JLyUySLtXPaR8oWQIm9nPwR9Ya3jj43ftD/ABa+OPiD4Ffs0HRPDsPgi0tZvEviPXYzdGK8vE3pa28SCRCy8qSUYFo3+ZQo3weBv2wPGfgW1+Kvgz9pXTbBPGHwn0tNZefQyy2etWU4UQGLzM+VLJJLCnOATKPkXawq946+Dn7QXwj+PPiT46/s1WejeJbHx9Bax+JfDOr3H2IreWabIrq2mJRcHLMwZshnf5WDKY8bwL+yH49+I1v8V/HX7TV9Y2/i74raUmiJZaL+9ttDsLfY0G1icSyJLDC+3cw/dZaRmkbaAcO/xY/b/tvhZ/w1Dcx+DP8AhFV08eIH8GeRMLxdD2+cZftGNwm+z/vSDKcLyU3Dyh6J8RP2uvG3jef4XfDv9mWwsW8YfFLRl8Q/a9dDNa6LpeHDPKsf35FkimUnDKPKICOXXHnk3w2/4KAXPwm/4ZfktPCC+H/7PHhxvG4vHM7aGEEG37KT5hmNv+7LeUMr33/vTtfFH9nbUfhL4h+DPiH9n3xNoafEjwPor+G7DQ/El0lu3ijTYo5ZJ1jTerearSzyMFwo8zIdDGoYA1vCHxg/a18BftO/Dz9n342zeGtZ0rxZb6vdrr2lWskUl5HZ2M86x7SY0ilhmhXzMRFWSRcHPNfKP7N37Qnib4L/ALH/AIE8J/Du00658a+P/Fus6dpMmsS+Tp1lFbtEbm7uG3J8sIlj4JA5LHO3a3qFhqvx98Rf8FA/gvefHOx0bRb2HSfEM1loGi3JvDp9k2nXkZuLmXLAvczfKpDbcRgYBznMtf8Agnx8SdT/AGX/AAj4Q1VdGj+IHgTxFqWs2Nneym50q/tL5oWmtJ3jGR53kR84x8u0lQ29QD2D9nP9qb4q618cl+C/jDWdD+KumXNm003irwVYXP2PR70KzeReTLEts8D7NqSp/Ey7mySq+v8A/BQW7hsP2atRvrnd5Vvrvh2WTapdtianbscKASTgdAMmoPgNo/7V1t4s0u18V+FPBHwv+HWjWtxDN4e0JUuZtQuJVAjliaFtlusRUc7skFgyOSrR+iftdfD3xh8UPgxP4T8Daf8A2nqr6zod2tv50MGYbPUIJ5m3zvGnyRozY3ZOMAE4FAHzB8d/id4U/ap0PRPh18EPDOvat4tGv6Ve2fiK50K60628NpZ3KTzXj3d3FEEPko6Kikly+ACcA/Wnwo+KXiXxr8Xvi/4G1hLVdO8C6npFnpjQRskzR31itzJ5zF2DkOflIC4HHPWvoevhC80v44fBH9oH4g+M/BPw8l+Ifhj4m/2VeI9hqlpp9zpmoadafZXinW7ZQ0U2A4kU4QccnigDxn9qX4peJPHv7Pv7T3hfXUtVsvBOuaLpWmm3jZJGt5LiwnYylnYM+5jggKMdq9i8TeOv2yfBvgm4+Ouq23hK40SwtTrGpeBore4Go2ukRjzpQmpmbZJfRQZL5hERZTsVuAfE9a/Z5/aM8TfBH9onRfEmgWjeLfiT4g0rVdKtbG/tjbSxJLaSSRxyyyx7RbJG0eZvKaQx7lHzDPsvjDV/2vfG3w/v/gbL8ObWx1nWLF9C1LxydYtpNFFncL9nn1CC2DC9MskRdkgZA0bEElgMEAtWviXS/Gn7aHw28YaIzPp2u/CS+1K0ZgAxt7u8t5YyQCQDtYZwTXM+Av2nfGJ/Zd+GfiPw74c0a4+IHxI1e90LQtJtYjYaNDcR3t4rXM0aOXS2ghg8yYI293PGN2V9O8OfA7xD4K/aD+HWq6FYmbwZ4O+GUvhI6iZYUYXUU8HkoYfM84l44y5YIUB4LZrxfwP+zd8Y/Dv7MvwjTTrC0074o/CfWtR1u20q+uInt72K7vL3zrF7m3kkjj+02s6lZAzBWAVsclQD6F8JD9rjwt490a28fTeG/HHhPWjLHqNxotqdJutBlCF45FS4uXF1bFh5bAZm5DY4IOT+31/yaF8SP+vG0/8AS23rX8J/ET9pfx1470fT7v4aRfDzwxYPJL4gvtb1C21Oe8whVLXT47KYYJkIY3Eny7R90n5W2f2vPAPi34ofs4+NvAXgWx/tPXdXtLeKztPOit/NdLqGRh5k7xxLhEY/MwHGOuKAPTvEvw58C/ErwaPDHjvQ7HWtNvLNIpIbuFZMBlHzIxG5HU8q6kMpAIIIzX5U+ItT1K+/Yg8XfDvxFdPrVv8ADz4pw+CbW6vCJnu9N0zWbQQeYcYcLFKIumNqAV9ezfET9tPxHpa+GvC/wa0zwReTQrAuveIPFFlqVtZ8BTKLTT1kllYDJUEgbsZBGRXPfET9l7X/AA9+yhb/AAY+HSy+KfEB17S9Z1O9uJYbabUrw6nDeX927TyKgJCsVUuW2Kqgs3JANr4G3t38BviJqv7KXiSaR9Engutc+G97OxYzaSSXutKLt96bT3YlBks0B3HaoUV86/Cn4U+Nfij+wb8E7jwBFYahq/gzX18Ux6NqrbLHV10+/vwbSVyGVC/mZRmGwMOcZ3D7p/aR+EF/8WPA0U3hK4XTfHPhW7TXPCepcA2+p23KxOT1guVzDKpypVgxB2gV85/Df4UftM/DT9lX4YaJ4IMOl+N/A95cXmr+Fru5tjaa1ZyXVy72L3cfnRxyPHIrROsmxWPz8gFQDuvAfxn+FXxP+LHh3R/in4Dv/AHxc0SC7Oh2niK2CvIkke26/sy+j/c3cewEH7pIDFVxuNfa1fBV5pPxw/aI+Jvw91Hxr8Nv+Fb+Gfh5ri+I5r3UNWtb7Ub68gheKO0to7PdsgLuGld2CyKoxyMH71oAKKKKAP/R/fyvN/iJ8Ivh38V4bGDx/o66qumtI9qTPPbtEZgofDQSRsQ2xcgkjgelekUV04TGYjC1ViMLNwmtnFtNdNGtVpoY4jDUsRTdGvFSi900mn8nofM3/DHf7OX/AEKP/lS1H/5Ko/4Y7/Zy/wChR/8AKlqP/wAlV9M0V7n+unEH/QdW/wDBk/8AM8r/AFayj/oEp/8AgEf8jzf4d/CL4d/CiG+g8AaOulLqTRvdETz3DSmEMEy08kjALvbABA5PrXpFFFeHi8ZiMVVeIxU3Ob3cm2301b1emh6uHw1LD01RoRUYrZJJJfJaBRRRXMbBRRRQAV4d8cf2ePhn+0HotjpXj+0uFudJnNzpeqafMbXUbCVtu5oJgDgOFG5WVlJCnG5VI9xooA+Zfgj+yd8LvgVruo+MdEn1jxF4p1WL7Pc6/wCJL3+0NSMGQfKWQJGiqSq7iEDNgAkgAD6aoooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9k=" alt="Google DNS logo" data-identifier="google-dns"></p><p>To be clear, I'm not accusing Google of storing DNS logs or associating that with specific users (they claim that they don't in their terms of service), however, I think it's unreasonable to think that they wouldn't be capable of that. I also wouldn't put it past them to lie in terms of service considering their recent run-ins with the law (<a href="https://www.cbsnews.com/news/google-eu-fines-google-1-7-billion-for-blocking-advertising-rivals/" target="_blank" rel="noreferrer noopener">$1.7bn fine for anti-competitive behaviour</a>, <a href="https://www.nytimes.com/2019/09/04/technology/google-youtube-fine-ftc.html" target="_blank" rel="noreferrer noopener">$170m for violating children's privacy on YouTube</a>, <a href="https://www.theverge.com/2019/1/21/18191591/google-gdpr-fine-50-million-euros-data-consent-cnil" target="_blank" rel="noreferrer noopener">50 million euro fine for GDPR violations</a>).</p><p>$2bn doesn't matter to Google. It's a drop in the bucket, especially considering they would probably be able to freely harvest user data for months or even years before they're caught and slapped on the wrist. If a single user's search data is worth upwards of $10 a year (see the Safari Google default search engine deal) for Google, then the complete logs of their browsing history would be quite juicy indeed.</p><p>Okay, so that's verging on conspiracy theory I suppose. Maybe Google DNS will remain clean. How about you get a Google® Nest™ WiFi mesh router and let them inspect all of your web traffic that way?</p><p><img src="https://lukeboyle.com/static/nest-c6cc34d5b4043b24d7c12a3223cc9ae4.jpg" alt="Google Nest Wifi Router product photo" data-identifier="nest"></p><p>Or perhaps you want to buy the new Pixel and give them advanced analytics about how you use your phone (<a href="https://www.searchenginejournal.com/google-privacy-lawsuit-android-apps/374952/" target="_blank" rel="noreferrer noopener">privacy class action lawsuit</a>), everywhere you go (Location History), how much physical activity you do (Google Fit), every article/video you engage with (Chrome), everything you buy (Google Pay - and incidentally, how much disposable income you have, so they can better target more relevant ads to you). All of these "services" are simply a ruse so that Google can build an extremely accurate profile about the type of consumer you are and target you with more advertising to turn you into a soulless consumer.</p><p>I don't want these people to also be the arbiters of what content I should or should not be able to see online.</p><h2>Actual closing thoughts</h2><p>Well that was pretty depressing. So, how can you reclaim a shred of your privacy?</p><h3>Search</h3><p>There's a swathe of …</p></div></article></div></main></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://lukeboyle.com/blog-posts/2020/08/do-not-trust-google">https://lukeboyle.com/blog-posts/2020/08/do-not-trust-google</a></em></p>]]>
            </description>
            <link>https://lukeboyle.com/blog-posts/2020/08/do-not-trust-google</link>
            <guid isPermaLink="false">hacker-news-small-sites-24067162</guid>
            <pubDate>Thu, 06 Aug 2020 00:49:46 GMT</pubDate>
        </item>
    </channel>
</rss>
