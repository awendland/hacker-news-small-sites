<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 50]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 50. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Wed, 04 Nov 2020 08:22:57 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-50.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Wed, 04 Nov 2020 08:22:57 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[You might not need to store plaintext email addresses]]>
            </title>
            <description>
<![CDATA[
Score 58 | Comments 31 (<a href="https://news.ycombinator.com/item?id=24965671">thread link</a>) | @danielskogly
<br/>
November 2, 2020 | https://blog.klungo.no/2020/11/01/you-might-not-need-to-store-plaintext-emails/ | <a href="https://web.archive.org/web/*/https://blog.klungo.no/2020/11/01/you-might-not-need-to-store-plaintext-emails/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Earlier this year, when I went from having only Facebook-login on <a href="https://wishy.gift/">Wishy.gift</a> to allow registrations with email address and password, one of my concerns was how to implement this is a way that protects the data and privacy of my users. I don’t have any ads or analytics on the site, the users can select whatever display name they want, and I never stored the email addresses I got from Facebook when a user registered or logged in - only a hashed<sup><a href="#fn1" id="fnref1">[1]</a></sup> version of the ID. Email addresses and passwords, on the other hand, are a whole other beast, and the consequences of a database breach much worse.</p>
<p>Considering that the only kind of emails I ever need to send out are transactional - no newsletters or other kinds of notifications - the only thing I need to store them for are as identifiers, and can safely be hashed.</p>
<p>For every transactional email I need to send out - registration, account recovery, and email change verification - the user always initiates this by submitting their email address, and it will at that time be available to the backend to perform the needed action.</p>
<p>In conclusion, if you only use email addresses for transactional emails, you might be able to only store hashed versions of them. For <a href="https://wishy.gift/">Wishy.gift</a> I use SHA512 with a fixed salt, and this has been working perfectly since implementation in June.</p>
<p>Thank you for reading this! I would love to hear your thoughts and ideas too. Join the discussion on <a href="https://news.ycombinator.com/item?id=24959734">Hacker News</a>, or feel free to email me at <code>daniel</code> at the domain this blog is on.</p>
<hr>
<section>
<ol>
<li id="fn1"><p>I discovered that, even though the ID was unique to my FB-app, it was still possible to go to <a href="http://facebook.com/%7Bid%7D">facebook.com/{id}</a> and be redirected to the user’s FB-profile. <a href="#fnref1">↩︎</a></p>
</li>
</ol>
</section>
</div></div>]]>
            </description>
            <link>https://blog.klungo.no/2020/11/01/you-might-not-need-to-store-plaintext-emails/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24965671</guid>
            <pubDate>Mon, 02 Nov 2020 08:11:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Rendering photo-realistic glass in the browser]]>
            </title>
            <description>
<![CDATA[
Score 151 | Comments 46 (<a href="https://news.ycombinator.com/item?id=24965005">thread link</a>) | @anonytrary
<br/>
November 1, 2020 | https://domenicobrz.github.io/webgl/projects/SSRefractionDepthPeeling/ | <a href="https://web.archive.org/web/*/https://domenicobrz.github.io/webgl/projects/SSRefractionDepthPeeling/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://domenicobrz.github.io/webgl/projects/SSRefractionDepthPeeling/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24965005</guid>
            <pubDate>Mon, 02 Nov 2020 05:13:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Names are not type safety]]>
            </title>
            <description>
<![CDATA[
Score 186 | Comments 71 (<a href="https://news.ycombinator.com/item?id=24963821">thread link</a>) | @azhenley
<br/>
November 1, 2020 | http://lexi-lambda.github.io/blog/2020/11/01/names-are-not-type-safety/ | <a href="https://web.archive.org/web/*/http://lexi-lambda.github.io/blog/2020/11/01/names-are-not-type-safety/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section role="main">
        <!-- Main column -->
        <div>



          <article>
  <header>
    
    
  </header>

<p>Haskell programmers spend a lot of time talking about <em>type safety</em>. The Haskell school of program construction advocates “capturing invariants in the type system” and “making illegal states unrepresentable,” both of which sound like compelling goals, but are rather vague on the techniques used to achieve them. Almost exactly one year ago, I published <a href="http://lexi-lambda.github.io/blog/2019/11/05/parse-don-t-validate/">Parse, Don’t Validate</a> as an initial stab towards bridging that gap.</p>

<p>The ensuing discussions were largely productive and right-minded, but one particular source of confusion quickly became clear: Haskell’s <code>newtype</code> construct. The idea is simple enough—the <code>newtype</code> keyword declares a wrapper type, nominally distinct from but representationally equivalent to the type it wraps—and on the surface this <em>sounds</em> like a simple and straightforward path to type safety. For example, one might consider using a <code>newtype</code> declaration to define a type for an email address:</p>

<div>
 <div>
  <pre><span></span><span>newtype</span> <span>EmailAddress</span> <span>=</span> <span>EmailAddress</span> <span>Text</span>
</pre></div>

</div>

<p>This technique can provide <em>some</em> value, and when coupled with a smart constructor and an encapsulation boundary, it can even provide some safety. But it is a meaningfully distinct <em>kind</em> of type safety from the one I highlighted a year ago, one that is far weaker. On its own, a newtype is just a name.</p>

<p>And names are not type safety.</p>
<!-- more-->



<p>To illustrate the difference between constructive data modeling (discussed at length in my <a href="http://lexi-lambda.github.io/blog/2020/08/13/types-as-axioms-or-playing-god-with-static-types/">previous blog post</a>) and newtype wrappers, let’s consider an example. Suppose we want a type for “an integer between 1 and 5, inclusive.” The natural constructive modeling would be an enumeration with five cases:</p>

<div>
 <div>
  <pre><span></span><span>data</span> <span>OneToFive</span>
  <span>=</span> <span>One</span>
  <span>|</span> <span>Two</span>
  <span>|</span> <span>Three</span>
  <span>|</span> <span>Four</span>
  <span>|</span> <span>Five</span>
</pre></div>

</div>

<p>We could then write some functions to convert between <code>Int</code> and our <code>OneToFive</code> type:</p>

<div>
 <div>
  <pre><span></span><span>toOneToFive</span> <span>::</span> <span>Int</span> <span>-&gt;</span> <span>Maybe</span> <span>OneToFive</span>
<span>toOneToFive</span> <span>1</span> <span>=</span> <span>Just</span> <span>One</span>
<span>toOneToFive</span> <span>2</span> <span>=</span> <span>Just</span> <span>Two</span>
<span>toOneToFive</span> <span>3</span> <span>=</span> <span>Just</span> <span>Three</span>
<span>toOneToFive</span> <span>4</span> <span>=</span> <span>Just</span> <span>Four</span>
<span>toOneToFive</span> <span>5</span> <span>=</span> <span>Just</span> <span>Five</span>
<span>toOneToFive</span> <span>_</span> <span>=</span> <span>Nothing</span>

<span>fromOneToFive</span> <span>::</span> <span>OneToFive</span> <span>-&gt;</span> <span>Int</span>
<span>fromOneToFive</span> <span>One</span>   <span>=</span> <span>1</span>
<span>fromOneToFive</span> <span>Two</span>   <span>=</span> <span>2</span>
<span>fromOneToFive</span> <span>Three</span> <span>=</span> <span>3</span>
<span>fromOneToFive</span> <span>Four</span>  <span>=</span> <span>4</span>
<span>fromOneToFive</span> <span>Five</span>  <span>=</span> <span>5</span>
</pre></div>

</div>

<p>This would be perfectly sufficient for achieving our stated goal, but you’d be forgiven for finding it odd: it would be rather awkward to work with in practice. Because we’ve invented an entirely new type, we can’t reuse any of the usual numeric functions Haskell provides. Consequently, many programmers would gravitate towards a newtype wrapper, instead:</p>

<div>
 <div>
  <pre><span></span><span>newtype</span> <span>OneToFive</span> <span>=</span> <span>OneToFive</span> <span>Int</span>
</pre></div>

</div>

<p>Just as before, we can provide <code>toOneToFive</code> and <code>fromOneToFive</code> functions, with identical types:</p>

<div>
 <div>
  <pre><span></span><span>toOneToFive</span> <span>::</span> <span>Int</span> <span>-&gt;</span> <span>Maybe</span> <span>OneToFive</span>
<span>toOneToFive</span> <span>n</span>
  <span>|</span> <span>n</span> <span>&gt;=</span> <span>1</span> <span>&amp;&amp;</span> <span>n</span> <span>&lt;=</span> <span>5</span> <span>=</span> <span>Just</span> <span>$</span> <span>OneToFive</span> <span>n</span>
  <span>|</span> <span>otherwise</span>        <span>=</span> <span>Nothing</span>

<span>fromOneToFive</span> <span>::</span> <span>OneToFive</span> <span>-&gt;</span> <span>Int</span>
<span>fromOneToFive</span> <span>(</span><span>OneToFive</span> <span>n</span><span>)</span> <span>=</span> <span>n</span>
</pre></div>

</div>

<p>If we put these declarations in their own module and choose not to export the <code>OneToFive</code> constructor, these APIs might appear entirely interchangeable. Naïvely, it seems that the newtype version is both simpler and equally type-safe. However—perhaps surprisingly—this is not actually true.</p>

<p>To see why, suppose we write a function that consumes a <code>OneToFive</code> value as an argument. Under the constructive modeling, such a function need only pattern-match against each of the five constructors, and GHC will accept the definition as exhaustive:</p>

<div>
 <div>
  <pre><span></span><span>ordinal</span> <span>::</span> <span>OneToFive</span> <span>-&gt;</span> <span>Text</span>
<span>ordinal</span> <span>One</span>   <span>=</span> <span>"first"</span>
<span>ordinal</span> <span>Two</span>   <span>=</span> <span>"second"</span>
<span>ordinal</span> <span>Three</span> <span>=</span> <span>"third"</span>
<span>ordinal</span> <span>Four</span>  <span>=</span> <span>"fourth"</span>
<span>ordinal</span> <span>Five</span>  <span>=</span> <span>"fifth"</span>
</pre></div>

</div>

<p>The same is not true given the newtype encoding. The newtype is opaque, so the only way to observe it is to convert it back to an <code>Int</code>—after all, it <em>is</em> an <code>Int</code>. An <code>Int</code> can of course contain many other values besides <code>1</code> through <code>5</code>, so we are forced to add an error case to satisfy the exhaustiveness checker:</p>

<div>
 <div>
  <pre><span></span><span>ordinal</span> <span>::</span> <span>OneToFive</span> <span>-&gt;</span> <span>Text</span>
<span>ordinal</span> <span>n</span> <span>=</span> <span>case</span> <span>fromOneToFive</span> <span>n</span> <span>of</span>
  <span>1</span> <span>-&gt;</span> <span>"first"</span>
  <span>2</span> <span>-&gt;</span> <span>"second"</span>
  <span>3</span> <span>-&gt;</span> <span>"third"</span>
  <span>4</span> <span>-&gt;</span> <span>"fourth"</span>
  <span>5</span> <span>-&gt;</span> <span>"fifth"</span>
  <span>_</span> <span>-&gt;</span> <span>error</span> <span>"impossible: bad OneToFive value"</span>
</pre></div>

</div>

<p>In this highly contrived example, this may not seem like much of a problem to you. But it nonetheless illustrates a key difference in the guarantees afforded by the two approaches:</p>

<ul>
 <li>
  <p>The constructive datatype captures its invariants in such a way that they are <em>accessible</em> to downstream consumers. This frees our <code>ordinal</code> function from worrying about handling illegal values, as they have been made unutterable.</p></li>
 <li>
  <p>The newtype wrapper provides a smart constructor that <em>validates</em> the value, but the boolean result of that check is used only for control flow; it is not preserved in the function’s result. Accordingly, downstream consumers cannot take advantage of the restricted domain; they are functionally accepting <code>Int</code>s.</p></li></ul>

<p>Losing exhaustiveness checking might seem like small potatoes, but it absolutely is not: our use of <code>error</code> has punched a hole right through our type system. If we were to add another constructor to our <code>OneToFive</code> datatype,<sup><a href="#2020-11-01-names-are-not-type-safety-footnote-1-definition" name="2020-11-01-names-are-not-type-safety-footnote-1-return">1</a></sup> the version of <code>ordinal</code> that consumes a constructive datatype would be immediately detected non-exhaustive at compile-time, while the version that consumes a newtype wrapper would continue to compile yet fail at runtime, dropping through to the “impossible” case.</p>

<p>All of this is a consequence of the fact that the constructive modeling is <em>intrinsically</em> type-safe; that is, the safety properties are enforced by the type declaration itself. Illegal values truly are unrepresentable: there is simply no way to represent <code>6</code> using any of the five constructors. The same is not true of the newtype declaration, which has no intrinsic semantic distinction from that of an <code>Int</code>; its meaning is specified extrinsically via the <code>toOneToFive</code> smart constructor. Any semantic distinction intended by a newtype is thoroughly invisible to the type system; it exists only in the programmer’s mind.</p>

<h2 id="revisiting-non-empty-lists">Revisiting non-empty lists</h2>

<p>Our <code>OneToFive</code> datatype is rather artificial, but identical reasoning applies to other datatypes that are significantly more practical. Consider the <code>NonEmpty</code> datatype I’ve repeatedly highlighted in recent blog posts:</p>

<div>
 <div>
  <pre><span></span><span>data</span> <span>NonEmpty</span> <span>a</span> <span>=</span> <span>a</span> <span>:|</span> <span>[</span><span>a</span><span>]</span>
</pre></div>

</div>

<p>It may be illustrative to imagine a version of <code>NonEmpty</code> represented as a newtype over ordinary lists. We can use the usual smart constructor strategy to enforce the desired non-emptiness property:</p>

<div>
 <div>
  <pre><span></span><span>newtype</span> <span>NonEmpty</span> <span>a</span> <span>=</span> <span>NonEmpty</span> <span>[</span><span>a</span><span>]</span>

<span>nonEmpty</span> <span>::</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>Maybe</span> <span>(</span><span>NonEmpty</span> <span>a</span><span>)</span>
<span>nonEmpty</span> <span>[]</span> <span>=</span> <span>Nothing</span>
<span>nonEmpty</span> <span>xs</span> <span>=</span> <span>Just</span> <span>$</span> <span>NonEmpty</span> <span>xs</span>

<span>instance</span> <span>Foldable</span> <span>NonEmpty</span> <span>where</span>
  <span>toList</span> <span>(</span><span>NonEmpty</span> <span>xs</span><span>)</span> <span>=</span> <span>xs</span>
</pre></div>

</div>

<p>Just as with <code>OneToFive</code>, we quickly discover the consequences of failing to preserve this information in the type system. Our motivating use case for <code>NonEmpty</code> was the ability to write a safe version of <code>head</code>, but the newtype version requires another assertion:</p>

<div>
 <div>
  <pre><span></span><span>head</span> <span>::</span> <span>NonEmpty</span> <span>a</span> <span>-&gt;</span> <span>a</span>
<span>head</span> <span>xs</span> <span>=</span> <span>case</span> <span>toList</span> <span>xs</span> <span>of</span>
  <span>x</span><span>:</span><span>_</span> <span>-&gt;</span> <span>x</span>
  <span>[]</span>  <span>-&gt;</span> <span>error</span> <span>"impossible: empty NonEmpty value"</span>
</pre></div>

</div>

<p>This might not seem like a big deal, since it seems unlikely such a case would ever happen. But that reasoning hinges entirely on trusting the correctness of the module that defines <code>NonEmpty</code>, while the constructive definition only requires trusting the GHC typechecker. As we generally trust that the typechecker works correctly, the latter is a much more compelling proof.</p>



<p>If you are fond of newtypes, this whole argument may seem a bit troubling. It may seem like I’m implying newtypes are scarcely better than comments, albeit comments that happen to be meaningful to the typechecker. Fortunately, the situation is not quite that grim—newtypes <em>can</em> provide a sort of safety, just a weaker one.</p>

<p>The primary safety benefit of newtypes is derived from abstraction boundaries. If a newtype’s constructor is not exported, it becomes opaque to other modules. The module that defines the newtype—its “home module”—can take advantage of this to create a <em>trust boundary</em> where internal invariants are enforced by restricting clients to a safe API.</p>

<p>We can use the <code>NonEmpty</code> example from above to illustrate how this works. We refrain from exporting the <code>NonEmpty</code> constructor, and we provide <code>head</code> and <code>tail</code> operations that we trust to never actually fail:</p>

<div>
 <div>
  <pre><span></span><span>module</span> <span>Data.List.NonEmpty.Newtype</span>
  <span>(</span> <span>NonEmpty</span>
  <span>,</span> <span>cons</span>
  <span>,</span> <span>nonEmpty</span>
  <span>,</span> <span>head</span>
  <span>,</span> <span>tail</span>
  <span>)</span> <span>where</span>

<span>newtype</span> <span>NonEmpty</span> <span>a</span> <span>=</span> <span>NonEmpty</span> <span>[</span><span>a</span><span>]</span>

<span>cons</span> <span>::</span> <span>a</span> <span>-&gt;</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>NonEmpty</span> <span>a</span>
<span>cons</span> <span>x</span> <span>xs</span> <span>=</span> <span>NonEmpty</span> <span>(</span><span>x</span><span>:</span><span>xs</span><span>)</span>

<span>nonEmpty</span> <span>::</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>Maybe</span> <span>(</span><span>NonEmpty</span> <span>a</span><span>)</span>
<span>nonEmpty</span> <span>[]</span> <span>=</span> <span>Nothing</span>
<span>nonEmpty</span> <span>xs</span> <span>=</span> <span>Just</span> <span>$</span> <span>NonEmpty</span> <span>xs</span>

<span>head</span> <span>::</span> <span>NonEmpty</span> <span>a</span> <span>-&gt;</span> <span>a</span>
<span>head</span> <span>(</span><span>NonEmpty</span> <span>(</span><span>x</span><span>:</span><span>_</span><span>))</span> <span>=</span> <span>x</span>
<span>head</span> <span>(</span><span>NonEmpty</span> <span>[]</span><span>)</span>    <span>=</span> <span>error</span> <span>"impossible: empty NonEmpty value"</span>

<span>tail</span> <span>::</span> <span>NonEmpty</span> <span>a</span> <span>-&gt;</span> <span>[</span><span>a</span><span>]</span>
<span>tail</span> <span>(</span><span>NonEmpty</span> <span>(</span><span>_</span><span>:</span><span>xs</span><span>))</span> <span>=</span> <span>xs</span>
<span>tail</span> <span>(</span><span>NonEmpty</span> <span>[]</span><span>)</span>     <span>=</span> <span>error</span> <span>"impossible: empty NonEmpty value"</span>
</pre></div>

</div>

<p>Since the only way to construct or consume <code>NonEmpty</code> values is to use the functions in <code>Data.List.NonEmpty.Newtype</code>’s exported API, the above implementation makes it impossible for clients to violate the non-emptiness invariant. In a sense, values of opaque newtypes are like <em>tokens</em>: the implementing module issues tokens via its constructor functions, and those tokens have no intrinsic value. The only way to do anything useful with them is to “redeem” them to the issuing module’s accessor functions, in this case <code>head</code> and <code>tail</code>, to obtain the values contained within.</p>

<p>This approach is significantly weaker than using a constructive datatype, since it is theoretically possible to screw up and accidentally provide a means to construct an invalid <code>NonEmpty []</code> value. For this reason, the newtype approach to type safety does not on its own constitute a <em>proof</em> that a desired invariant holds. However, it restricts the “surface area” where an invariant violation can occur to the defining module, so reasonable confidence the invariant really does hold can be achieved by thoroughly testing the module’s API using fuzzing or property-based testing techniques.<sup><a href="#2020-11-01-names-are-not-type-safety-footnote-2-definition" name="2020-11-01-names-are-not-type-safety-footnote-2-return">2</a></sup></p>

<p>This tradeoff may not seem all that bad, and indeed, it is often a very good one! Guaranteeing invariants using …</p></article></div></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://lexi-lambda.github.io/blog/2020/11/01/names-are-not-type-safety/">http://lexi-lambda.github.io/blog/2020/11/01/names-are-not-type-safety/</a></em></p>]]>
            </description>
            <link>http://lexi-lambda.github.io/blog/2020/11/01/names-are-not-type-safety/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24963821</guid>
            <pubDate>Mon, 02 Nov 2020 00:27:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Collision]]>
            </title>
            <description>
<![CDATA[
Score 128 | Comments 14 (<a href="https://news.ycombinator.com/item?id=24963131">thread link</a>) | @vijayr02
<br/>
November 1, 2020 | https://fiftytwo.in/story/collision/ | <a href="https://web.archive.org/web/*/https://fiftytwo.in/story/collision/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-v-154a69ab=""><div data-v-154a69ab=""><p>
              T
            </p> <div data-v-154a69ab=""><p>hat November evening, the people of Charkhi Dadri town, about 100km west of Delhi, were done with the day’s work out in the fields. Some of them heard the sky detonate with thunder and erupt into flames. On the ground, doors and windows crumbled. Glass shards flew through the air.</p><p>Mistaking it for an earthquake, residents streamed out of their homes, only to find over 500 tonnes of material pouring out from the sky—what an <em>India Today</em> story vividly described as “the equivalent of 600 Maruti cars”. The planes plunged into the mustard and cotton fields, miraculously hitting no one on the ground. There were rumours of a few survivors found in the wreckage, but none were ever brought to a hospital.&nbsp;</p></div></div><p>At about 9pm, as Prannoy Roy finished reading for <em>The News Tonight</em>, the daily English bulletin on Doordarshan, wire services broke the story of a mid-air collision just outside Delhi. Most journalists had already left for the day, and the crowd at the studios of NDTV, a private news production company, was thinning. Writer and film-maker Natasha Badhwar, then a 25-year-old cameraperson two years out of Jamia Millia Islamia University, quickly volunteered herself for the story. Along with reporter Radhika Bordia and camera assistant Kanan Patra, she got into an office vehicle and headed towards Charkhi Dadri. As they approached the site, they saw a massive inferno raging in the distance, ringed by smaller fires. </p><p>They got out of the car and began to walk through the debris and darkness. When Badhwar struck something, the group stopped and switched on the camera light. A stiff body swam into view, dead, but not burnt or broken. The man looked in death as he might have in life. How do you film a dead body, Badhwar wondered. “There was a sense of horror I could not shut out,” she said. “There was a sense of incredulity: How could this happen? How could two planes collide?”</p><p>Through the night, journalists arrived to scenes of damage and disarray. Passports, bags of food, toys, slippers, wallets, wrenched-open suitcases and airplane seats were flung around. Disembodied human limbs lay scattered like confetti. The full horror would not be apparent until sunrise, but the acrid stench of burning fuselage and singed remains had already begun choking the air.</p><p>At one point, the grandson of a prominent politician waltzed in,<a href="" onclick="return!1"><sup id="2pzmabfu9t5s">[4]</sup></a> chaperoned by a group of sidekicks and handlers. He had no reason to be there but quickly became the centre of attention. When asked what he was doing there, he smarmily replied, “Plane curiosity.”&nbsp;</p><p>Through the night, villagers tried to find survivors as emergency services arrived. By the morning, several bodies were moved into a school which had been converted to a makeshift morgue. Debris had scattered over a radius of several kilometres, complicating search and rescue operations. </p><p>KPS Nair was among the first team of investigators and diplomats to reach the scene as dawn broke. Then a Deputy Director with the Directorate General of Civil Aviation (DGCA), Nair had been in a meeting on air safety when news filtered in the previous evening. The irony was inescapable. “My first thought was, my god!” he recalled over the phone in June 2020. “Why do such things happen in spite of the efforts of human beings to make better flying machines and systems?”</p><p>As lead investigator, his first impulse was to locate the “black boxes”, vermilion-coloured crash-proof casings that held the cockpit voice recorder (CVR) and the flight data recorder (FDR). The CVR, which saved the last 30 minutes of cockpit conversation, could provide precious insight into what the crew had said to each other. The FDR would provide readings on altitude, speed, flight path and engine power to help build a picture of both planes’ vital parameters. “This,” Nair explained, “is the most important tool in the hands of an investigator from the accident site.”</p><div data-v-154a69ab=""><p>Both black boxes were found before nightfall on the day following the accident. The cockpit of the Saudi aircraft was stuck deeper in the ground, irrevocably damaged, none of its instruments readable. All three of its altimeters were destroyed in the fire.&nbsp;</p><p>The Kazakh plane had suffered less damage and yielded four altimeters. Two of them, curiously, showed different readings: 4,443m (14,576 feet) and 4,540m (14,895 feet). The other two were unreadable.&nbsp;</p></div><p>Nair scoured the fields, analysing the debris scattered across two sites seven kilometres apart, searching for clues in the carcasses of the two planes. “We approach any accident with an open mind,” he said. “We ask, did everyone involved apply the necessary procedures? The contributing factors we look at include the ATC communications, pilot error, engineering and maintenance aspects.” </p><p>AK Chopra, then head of air safety for the North region at the DGCA, also reached the site with his team. Chopra sensed something puzzling, even counter-intuitive. The frontal structure of the Kazakh flight was mostly intact, which indicated that this hadn’t been a head-on collision. If the Kazakh plane was supposed to have been higher (15,000 feet), why did a primary assessment suggest that it had hit the Saudi plane from below? </p><p>By mid-afternoon, just 19 bodies had been claimed from the morgue. Rescue workers tried to pick through the debris, retrieving limbs and luggage. Badhwar even encountered the studio in-charge from Jamia’s Mass Communication Research Centre, mourning the loss of a younger brother who had been on the flight.&nbsp;</p><p>For at least 15 hours after the crash, there was little sense of sanctity about the site, which was only cordoned off much later.<a href="" onclick="return!1"><sup id="z5s3bz6hivmy">[5]</sup></a> Some people rifled through the wreckage and corpses, trying to make off with the spoils. But for the most part, people were kind and helpful, bringing sheets from their homes for the bodies, volunteering tractors in search efforts, and offering tea to families. </p><p>Over time, the horror of losing a loved one morphed into the numbing pain of dealing with paperwork. Relatives scrambling to apply for compensation and obtain death certificates shuttled from one office to another. The Saudis announced compensation of up to GBP 12,000 for the families of passengers, and some compensation<a href="" onclick="return!1"><sup id="k4yf7bl2nlj4">[6]</sup></a> for the villagers in whose fields the flights had crashed.&nbsp;</p><p>In the end, 94 bodies were charred beyond recognition or totally mutilated. They lay piled up in the morgue, their limbs on ice. Many of the dead were from mofussil areas. Their families would hear about the tragedy only much later, particularly since some didn’t even know their relatives were on board.<a href="" onclick="return!1"><sup id="xjunwbq7ccht">[7]</sup></a> Others, perhaps, never found out at all, given the underhand manner in which agents and touts recruited people for jobs abroad.<a href="" onclick="return!1"><sup id="am1u2ycez0x2">[8]</sup></a></p><p>After 15 days in the morgue, the unclaimed bodies were divided in proportion to the Hindus and Muslims on board according to the passenger manifest, a compromise between community leaders following an initial dispute. First, everyone went to the Muslim burial ground; later they went to the crematorium. Badhwar, still processing the disaster she had covered, attended the mass funerals and filmed them. “The smell of burning flesh still haunted me,” she said. “I felt I had some undone mourning to do.”</p></div></div>]]>
            </description>
            <link>https://fiftytwo.in/story/collision/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24963131</guid>
            <pubDate>Sun, 01 Nov 2020 22:33:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Algebraic Effects for React Developers]]>
            </title>
            <description>
<![CDATA[
Score 122 | Comments 72 (<a href="https://news.ycombinator.com/item?id=24962842">thread link</a>) | @reesew
<br/>
November 1, 2020 | https://reesew.io/posts/react-algebraic-effects | <a href="https://web.archive.org/web/*/https://reesew.io/posts/react-algebraic-effects">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><blockquote>
<p>It’s in words that the magic is—Abracadabra, Open Sesame, and the rest—but the magic words in one story aren’t magical in the next.
The real magic is to understand which words work, and when, and for what; the trick is to learn the trick.</p>
<p>- John Barth, <em>Chimera</em></p>
</blockquote>
<p>It’s been quite some time since Hooks were officially stabilized in <a href="https://reactjs.org/blog/2019/02/06/react-v16.8.0.html" target="_blank" rel="nofollow noopener noreferrer">React 16.8</a>, and with them came a fundamentally different way of understanding the way our applications work.
This is both a blessing and a curse: Hooks are much closer to the React programming model and help avoid a certain class of subtle and confusing bugs, but some developers have also expressed concerns that <a href="https://jaredpalmer.com/blog/react-is-becoming-a-black-box" target="_blank" rel="nofollow noopener noreferrer">React is becoming a black box</a>.
These concerns are completely valid; Hooks can often seem “magical,” since most of the complexities are hidden away in React’s internals.</p>
<p>Much of that “magical” feeling is simply due to the fact that Hooks are based on some <a href="https://reactjs.org/docs/hooks-faq.html#what-is-the-prior-art-for-hooks" target="_blank" rel="nofollow noopener noreferrer">prior art</a> and programming language research that many developers simply aren’t familiar with.
Understanding some of the motivations and inspirations for Hooks can help build a mental model for what’s happening behind the scenes.
While there are several sources of influence on the original Hooks proposal, arguably the most important is the notion of algebraic effects.</p>
<blockquote>
<p>❗❗ Note that this article is <em>not</em> an introduction into how to <em>use</em> Hooks or how Hooks work internally.
This is merely a way to <em>think</em> about Hooks. For more information about how to use them, I suggest
starting with <a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="nofollow noopener noreferrer">the docs</a>.</p>
</blockquote>
<p>Before diving into the details of algebraic effects, let’s first take a step back.</p>
<h2 id="why-do-we-need-hooks"><a href="#why-do-we-need-hooks" aria-label="why do we need hooks permalink"></a>Why Do We Need Hooks?</h2>
<p>Class components seemed to be working well enough, why add <em>another</em> way of writing components that, at least at face value, do the same thing?</p>
<p><img src="https://reesew.io/media/DysfunctionalClassComponents.png" alt="First tweet by @rickhanlonii: &quot;The existence of functional components implies the existence of dysfunctional components&quot;. Reply tweet by @sebmarkbage: &quot;We call those 'class components'.&quot;"></p>
<p>One of React’s core principles is the idea that an application’s user interface is a pure function of that application’s state.
Here, “state” can refer to any combination of local component state and global state, such as a Redux store.
When that state changes and propagates through your component tree, the output represents your new UI after that state change.
This is, of course, an abstraction over the nuts and bolts of how that update actually happens, since React handles the actual reconciliation and DOM updates that are necessary, but this core principle means, at least in theory, that our UI is always synchronized with our data.</p>
<p>Of course, this isn’t always true.
Class components expose certain scenarios that allow us to ignore changes in state if we don’t effectively handle those state changes in our lifecycle methods.
Dan Abramov wrote an <a href="https://overreacted.io/writing-resilient-components/#dont-stop-the-data-flow-in-side-effects" target="_blank" rel="nofollow noopener noreferrer">excellent article</a> on some common pitfalls related to this that’s worth a read for more detail.
In short, class components use different lifecycle methods to handle side effects, but that maps side effects to DOM operations, <em>not</em> state changes.
This means that while the visual elements of our UI may respond to state changes, our side effects might not.</p>
<p>Because class components have to do these internal updates to synchronize their internal state when props change, they are by definition <em>impure</em>.
<em>But wait</em>, you say, <em>I thought we said that UI was a <em>pure</em> function of state</em>.</p>
<p><em>Precisely</em>.
This is where Hooks come into play.</p>
<p>Hooks represent a different way of thinking about effects.
Instead of thinking about the entire lifecycle of a component, Hooks allow us to narrow our focus to only the current state.
We can then <em>declare</em> the states in which we want our effects to run, ensuring that those state changes are reflected in our effects.
Of course, an “effect” can be many things, from handling state with <code>useState</code>, making network requests or manually updating the DOM with <code>useEffect</code>, or calculating expensive callback functions with <code>useCallback</code>.</p>
<p>But how do we reason about those side effects within a pure function?
I’m glad you asked!</p>
<h2 id="an-introduction-to-algebraic-effects"><a href="#an-introduction-to-algebraic-effects" aria-label="an introduction to algebraic effects permalink"></a>An Introduction to Algebraic Effects</h2>
<p><em>Algebraic effects</em> are a generalized approach to reasoning about computational effects in pure contexts by defining an <em>effect</em>, a set of operations, and an effect <em>handler</em>, which is responsible for handling the semantics of how to implement effects.<sup id="fnref-1"><a href="#fn-1">1</a></sup>
Algebraic effects generalize over a whole host of potential uses, like input and output, handling state, <code>async</code>/<code>await</code>, and many more.</p>
<p>This is a little abstract, so let’s write some code to see how this works in practice.
Unfortunately, JavaScript doesn’t actually support algebraic effects, although React might mimic them internally.
While there are a few different languages<sup id="fnref-2"><a href="#fn-2">2</a></sup> that support algebraic effects, we’re going to use <a href="https://github.com/matijapretnar/eff" target="_blank" rel="nofollow noopener noreferrer">Eff</a>, a functional programming language designed specifically around algebraic effects.
Don’t worry, <em>most</em> people won’t know Eff, so I’ll explain some syntax as we go along<sup id="fnref-3"><a href="#fn-3">3</a></sup>.</p>
<p>A common use case for algebraic effects is handling stateful computations.
Remember that effects are just in an interface with a set of operations.
In Eff, we defined effects with the <code>effect</code> keyword and a type signature:</p>
<!---
I'm using OCaml tags in the markdown here because there's obviously
no highlighting options for Eff.
-->
<div data-language="ocaml"><pre><code>


<span>type</span> user <span>=</span> string <span>*</span> int

effect <span>Get</span><span>:</span> user
effect <span>Set</span><span>:</span> user <span>-&gt;</span> unit</code></pre></div>
<p>Once we’ve defined what effects our effects will look like, we can define how our effects are handled by using the <code>handler</code> keyword.</p>
<div data-language="ocaml"><pre><code><span>let</span> state <span>=</span> handler
  <span>|</span> y <span>-&gt;</span> <span>fun</span> currentState <span>-&gt;</span> <span>(</span>y<span>,</span> currentState<span>)</span>
  <span>|</span> effect <span>Get</span> k <span>-&gt;</span> <span>(</span><span>fun</span> currentState <span>-&gt;</span> <span>(</span>continue k currentState<span>)</span> currentState<span>)</span>
  <span>|</span> effect <span>(</span><span>Set</span> newState<span>)</span> k <span>-&gt;</span> <span>(</span><span>fun</span> <span>_</span> <span>-&gt;</span> <span>(</span>continue k <span>(</span><span>)</span><span>)</span> newState<span>)</span>
<span>;</span><span>;</span></code></pre></div>
<p>Hmm, this looks a little trickier — let’s break it down a bit.
We have a <code>handler</code> with three branches, and all of them return a function.
That function will be used to handle some effect (or lack thereof).</p>
<p>The first branch, <code>y -&gt; fun currentState -&gt; (y, currentState)</code>, represents <em>no</em> effect, which happens when we reach the end of the block we’re handling (which we’ll see shortly). <code>y</code> here is the return value of the function, so this simply returns a tuple of the inner return and the state.</p>
<p>The second and third branches match our effects, but there’s a suspicious argument <code>k</code>.
<code>k</code> here is a <em>continuation</em>, which represents the rest of the computation <em>after</em> where we perform an effect.</p>
<div><p>GOTO, but better</p><div><blockquote>
<p>At my heart, I am something like the goto instruction; my creation sets the label, and my methods do the jump. However, this is a really powerful kind of goto instruction. If your hair is turning green at this point, don’t worry as you will probably only deal with users of continuations, rather than with the concept itself.</p>
</blockquote><p>This little gem comes from the GNU Smalltalk <a href="https://www.gnu.org/software/smalltalk/manual-base/html_node/Continuation.html" target="_blank" rel="nofollow noopener noreferrer"><code>Continuation</code> documentation</a>.
For some of you, the reference to <code>GOTO</code> might make you a little nauseated, but there’s a reason that continuations still have their place as a control flow, which is about <em>context</em>.
One of the more treacherous aspects of <code>GOTO</code> is getting plopped into an invalid context, but with continuations, you’re really storing an in-flight <em>process</em>, so the variables, pointers, and so on will all be valid.<sup id="fnref-5"><a href="#fn-5">5</a></sup></p></div></div>
<p>Because continuations represent the entire process in action, they’re essentially a snapshot of the call stack at the time of the effect.
When we get to an effect, it’s almost as if we hit a giant pause button on the computation until we properly handle the effect.
Calling <code>continue k</code><sup id="fnref-4"><a href="#fn-4">4</a></sup> is like hitting the play button again.</p>
<p>Alright, I think we’re ready to see our effect handlers in action.
Right now, we have a user in state; let’s wish them well on their birthday:</p>
<div data-language="ocaml"><pre><code><span>let</span> celebrate <span>=</span> <span>with</span> state handle
  <span>let</span> <span>(</span>name<span>,</span> age<span>)</span> <span>=</span> perform <span>Get</span> <span>in</span>

  print<span>_</span>string <span>"Happy Birthday, "</span><span>;</span>
  print<span>_</span>string name<span>;</span>
  print<span>_</span>endline <span>"!"</span><span>;</span>

  perform <span>(</span><span>Set</span> <span>(</span>name<span>,</span> age<span>+</span><span>1</span><span>)</span><span>)</span><span>;</span>
  perform <span>Get</span>
<span>;</span><span>;</span>

celebrate<span>(</span><span>(</span><span>"Henry"</span><span>,</span> <span>39</span><span>)</span><span>)</span><span>;</span><span>;</span></code></pre></div>
<p>When we start off this computation, we first <code>Get</code> our user from state, which runs the second branch in our handler.
At this point, we’ve hit the pause button, so the function has stopped running while we get this from state.
The handler gives us back a function, which calls <code>continue k currentState</code>, resuming our computation with the value of <code>currentState</code>.</p>
<p>This same flow happens every time we <code>perform</code> an effect.
Hit pause, do some work, hit play.</p>
<p><img src="https://reesew.io/media/CelebrateToBeContinued.png" alt="Our code for the celebrate function, overlaid with the &quot;To Be Continued&quot; meme from Jojo's Bizarre Adventure."></p>
<!-- markdownlint-disable MD033 -->
<figcaption>I'm so sorry</figcaption>
<p>And here, dear reader, is where the power of algebraic effects really shines.
You see, it doesn’t really <em>matter</em> how we hold state.
Sure, right now it’s just an object in memory, but what if it was in a database?
What if it was stored in a browser’s <code>localStorage</code>?
As far as <code>celebrate</code> knows, these are <em>all the same</em>.
If we wanted, we could swap out our <code>state</code> handler with a <code>redisState</code> handler that stored state in a key-value store.</p>
<p>In JavaScript, your code has to be aware of what’s synchronous and what’s not.
If this were to change in the future, and state was handled asynchronously, we would need to start handling Promises, which would require changes across <em>everything</em> that touches this function.
But with algebraic effects, instead of maintaining a running process that holds a reference to a <em>different</em> process, we can simply stop the current process altogether until our effects are finished.</p>
<p>Of course, state isn’t the only thing that we can handle with algebraic effects.
Let’s say we have some network request we want to make or cleanup we want to execute, but we only want to do it <em>after</em> our function is done.
We’ll call it a <code>Defer</code> effect.</p>
<div data-language="ocaml"><pre><code>effect <span>Defer</span><span>:</span> <span>(</span>unit <span>-&gt;</span> unit<span>)</span> <span>-&gt;</span> unit

<span>let</span> defer <span>=</span> handler
    <span>|</span> y <span>-&gt;</span> <span>fun</span> <span>(</span><span>)</span> <span>-&gt;</span> <span>(</span><span>)</span>
    <span>|</span> effect <span>(</span><span>Defer</span> effectFunc<span>)</span> k <span>-&gt;</span>
        <span>(</span><span>fun</span> <span>(</span><span>)</span> <span>-&gt;</span>
            continue k <span>(</span><span>)</span><span>;</span>
            effectFunc <span>(</span><span>)</span>
        <span>)</span>
<span>;</span><span>;</span></code></pre></div>
<p>Notice that <code>continue k ()</code> doesn’t have to be the last part of the handler, as it was in our <code>state</code> handler.
We can call continuations <em>whenever</em> we want and however many times we want — remember, they’re just representations of a process.</p>
<p>To make sure this works as intended, let’s make a quick sketch of how this might work in practice:</p>
<div data-language="ocaml"><pre><code><span>let</span> runWithCleanup <span>=</span> <span>with</span> defer handle
    print<span>_</span>endline <span>"Starting our computation"</span><span>;</span>
    perform <span>(</span><span>Defer</span> <span>fun</span> <span>(</span><span>)</span> <span>-&gt;</span> print<span>_</span>endline <span>"Running cleanup"</span><span>)</span><span>;</span>
    
    print<span>_</span>endline <span>"Finishing computation"</span>
<span>;</span><span>;</span>

runWithCleanup<span>(</span><span>)</span><span>;</span><span>;</span></code></pre></div>
<p>When we run this, we get the following in our terminal:</p>
<div data-language="shell"><pre><code>$ eff defer.eff</code></pre></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://reesew.io/posts/react-algebraic-effects">https://reesew.io/posts/react-algebraic-effects</a></em></p>]]>
            </description>
            <link>https://reesew.io/posts/react-algebraic-effects</link>
            <guid isPermaLink="false">hacker-news-small-sites-24962842</guid>
            <pubDate>Sun, 01 Nov 2020 21:51:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Winamp for Windows 10]]>
            </title>
            <description>
<![CDATA[
Score 261 | Comments 136 (<a href="https://news.ycombinator.com/item?id=24962823">thread link</a>) | @zindera
<br/>
November 1, 2020 | http://www.mywinamp.com/winamp-for-windows-10-download/ | <a href="https://web.archive.org/web/*/http://www.mywinamp.com/winamp-for-windows-10-download/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>http://www.mywinamp.com/winamp-for-windows-10-download/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24962823</guid>
            <pubDate>Sun, 01 Nov 2020 21:48:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Flutter Web: A Fractal of Bad Design]]>
            </title>
            <description>
<![CDATA[
Score 104 | Comments 71 (<a href="https://news.ycombinator.com/item?id=24962504">thread link</a>) | @adrian_mrd
<br/>
November 1, 2020 | https://hugotunius.se/2020/10/31/flutter-web-a-fractal-of-bad-design.html | <a href="https://web.archive.org/web/*/https://hugotunius.se/2020/10/31/flutter-web-a-fractal-of-bad-design.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main"><article>
  
  <div><p>The web has a long and rich history dating back to the nineties at CERN. Back then <a href="https://twitter.com/timberners_lee">Tim Berners-Lee</a> laid the foundation of HTML that is still around today. There have been attempts to replace it with varying success but none have been successful, for good reason. HTML and the later invention of CSS are a remarkably powerful set of tools to build all kinds of experiences on the web. People are still trying to replace HTML, which brings us to the topic of this post: Flutter Web.</p>

<p><a href="https://flutter.dev/web">Flutter Web</a> is part of Google’s <a href="https://flutter.dev/">Flutter</a> framework for building cross platform UI. Hailed by many developers as the best thing since sliced bread, my opinion of it lacks the rose coloured glasses. I haven’t looked at Flutter for other platforms than web so I cannot comment on it other than that the general principle of Flutter is a terrible idea. Flutter works by throwing away the native UI toolkits provided by the platform and rendering everything from scratch using OpenGL et al. This translates extremely poorly to the web platform in particular. It’s worth noting that Flutter for Web is currently in beta and the problems I am about to detail could be addressed. However, I believe these issues are fundamental to Flutter’s design choices so I feel confident in my criticism.</p>

<h2 id="semantic-html">Semantic HTML</h2>

<p>Anyone learning HTML these days would have encountered the term “Semantic HTML” because it is such an important part of modern web. <a href="https://www.petelambert.com/">Pete Lambert</a> describes why this is important in the excellent blog post <a href="https://www.petelambert.com/journal/html-is-the-web">HTML is the Web</a>. In short, the visible portion of a website, i.e. presentation, is only half the story. To take an example Pete used, a <code>div</code> with an <code>onClick</code> handler might be clickable and can be styled to look like a button, but that doesn’t make it a button. The semantic structure of a document matters because that’s how machines, not humans, understand the web. A <code>div</code> with an <code>onClick</code> handler doesn’t look like a link or a button to a screen reader, search engine crawler, or accessibility extension, it looks like a <code>div</code>.</p>

<p>Most importantly, semantic HTML is key for accessibility and other tools that let a user experience the web as they wish.</p>

<h2 id="a-fractal-of-bad-design">A Fractal of Bad Design</h2>

<p>Does Flutter Web generate semantic HTML? Not even close. It generates a patchwork of <code>canvas</code> elements, custom elements, and a few other HTML elements. In the demo app <a href="https://gallery.flutter.dev/#/reply">Reply</a>, how many buttons and links are there? If you guessed <strong>zero</strong>, congratulations you are as jaded and cynical as me. Let me reiterate that, an email app with no buttons and links! Because there are no links in particular, features like cmd/ctrl clicking to open a new tab, hovering links to see the URL, and using the context menu do not work.</p>

<p>I use the browser extension <a href="https://vimium.github.io/">Vimium</a> to navigate the web, it’s an amazingly powerful tool that relies on, you guessed it, semantic HTML. Does it work on pages built with Flutter Web? Fuck no. It doesn’t work because it tries to find things that are semantically clickable, like <code>button</code> or <code>a</code> elements, of which, as we have established, Flutter Web generates none. Vimium works on almost all websites I use because most developers, thankfully, don’t just stick <code>onClick</code> handlers on <code>div</code>s. However, whatever crazy shit Flutter Web does, doesn’t look clickable. Things being clickable that don’t look clickable is a good proxy for poor accessibility. For example, screen readers can navigate by landmarks, such as headings, <strong>links</strong>, forms, and other semantic elements, does any of this work with Flutter Web? Fuck no.</p>

<p>Even worse, unless you use special “selectable” text, Flutter Web doesn’t even support selecting text. No joke, their own code examples have a “copy all” button to get around this.</p>

<p><a href="https://hugotunius.se/img/flutter-web-a-fractal-of-bad-design/code-example.png"><img src="https://hugotunius.se/img/flutter-web-a-fractal-of-bad-design/code-example.png?1604348346" alt="Screenshot of Flutter's Navigation Bar component with preview, code, and &quot;copy all&quot; button"></a></p>

<p>How did anyone look at this and say “yeah nah, selecting text isn’t an important use case on the web”? Why does selecting text matter you ask? Some people use it to aid with reading by selecting the text they are currently reading, other people use it to(and I know this is wild) copy parts of the text, people with dyslexia use tools that read out selected portions of the text to help them read. Does any of this work with Flutter’s default, unselectable text? Fuck no!</p>

<p>While we are talking about dyslexia, another useful feature that help people who suffer from it is the ability to change the fonts of web pages to one they find easier to read, such as <a href="https://www.opendyslexic.org/">OpenDyslexic</a>. There are many tools that help with this and they all rely on the ability to inject custom CSS in a web page, to my surprise this actually looked to work when I tried it on some of the Flutter Web demos. However, looks deceive and while the font does apply it causes text to get cut off in almost all instances because of the terrible HTML Flutter generates. For example, in the “Reply” email client here’s the tag for the word “Reply” in the upper right</p>

<figure><pre><code data-lang="html"><span>&lt;p</span> <span>style=</span><span>"font-size: 18px; font-weight: normal; font-family: WorkSans_regular, -apple-system, BlinkMacSystemFont, sans-serif; color: rgb(255, 255, 255); letter-spacing: 0px; position: absolute; white-space: pre-wrap; overflow-wrap: break-word; overflow: hidden; height: 27px; width: 54px; transform-origin: 0px 0px 0px; transform: matrix(1, 0, 0, 1, 59, 3.5); left: 0px; top: 0px;"</span><span>&gt;</span>REPLY<span>&lt;/p&gt;</span></code></pre></figure>

<p>Cleaned up a bit and these are the attributes</p>

<figure><pre><code data-lang="plain">font-size: 18px;
font-weight: normal;
font-family: WorkSans_regular, -apple-system, BlinkMacSystemFont, sans-serif; color: rgb(255, 255, 255);
letter-spacing: 0px;
position: absolute;
white-space: pre-wrap;
overflow-wrap: break-word;
overflow: hidden;
height: 27px;
width: 54px;
transform-origin: 0px 0px 0px;
transform: matrix(1, 0, 0, 1, 59, 3.5);
left: 0px;
top: 0px;</code></pre></figure>

<p>Flutter Web generates absolutely positioned fixed sized HTML which instead of adopting to the text layout specified by the browser just cuts the text off.</p>

<p>Another useful feature that is common in accessibility extensions is making links stand out more. This works by injecting global CSS rules that target <code>a</code> tags on the page.</p>

<p><a href="https://hugotunius.se/img/flutter-web-a-fractal-of-bad-design/link-underlines.png"><img src="https://hugotunius.se/img/flutter-web-a-fractal-of-bad-design/link-underlines.png?1604348346" alt="Screenshot of links with link emphasis turned on which underlines them in multiple colours"></a></p>

<p>Does this work with Flutter Web (this questions is starting to feel redundant because the answer is almost always “No”)? Fuck no! In general, users use custom stylesheets for a multitude of reasons not limited to accessibility. As a “fun” exercise try this <a href="https://ssb22.user.srcf.net/css/">low vision stylesheet</a> on one of the <a href="https://gallery.flutter.dev/">Flutter Web demos</a> and see how readable the content is.</p>

<p>Another one of the <a href="https://gallery.flutter.dev/#/fortnightly">demos</a> in the Flutter Web Gallery is a news site. On news sites, I like to use the built-in “reader mode” in my browser to get a reading experience that is free from clutter and better suites me. For example, when reading in bed late at night (which I know I shouldn’t do) it’s nice to have a soft, dark mode experience instead of the glaring black text on pure white that many publications use. Does reader mode work with Flutter Web website? Nope. It doesn’t work because, you guessed it, it relies on semantic HTML.</p>

<p><a href="https://hugotunius.se/img/flutter-web-a-fractal-of-bad-design/enable-accessibility.png"><img src="https://hugotunius.se/img/flutter-web-a-fractal-of-bad-design/enable-accessibility.png?1604348346" alt="Screenshot of Firefox accessibility inspector showing a single button with the text &quot;Enable accessibility&quot;"></a></p>

<p>Like any good writer, I’ve saved the best for last: the screen reader experience with Flutter Web. When you first focus on  one of the Flutter Web demos with a screen reader you are greeted with a “button” that says “Enable accessibility”. Admittedly, when you click this button there is a resemblance of screen reader content but it’s terrible. In the “Reply” app things are read out with unnecessarily high detail in the list view, things that can be clicked aren’t identified as such, you cannot even get to the menu as far as I can tell, and as previously identified there are almost no landmarks which are used for navigation.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Flutter is a misguided attempt to achieve the impossible: quality cross platform experiences. Flutter Web in particular is fundamentally flawed and needs to be rebuilt from the ground up if it has any hopes of being viable tech that generates semantic, accessible, and modern web experiences. I have serious doubt that when Flutter Web leaves beta any of this will be addressed properly, unless the whole approach is reconsidered. If you see Flutter Web, turn around and run in the opposite direction.</p>

<p>Developers, designers, and product people all love cross platform solutions because it saves them time and energy while achieving the “same” outcome as the costlier alternatives. Flutter Web nicely illustrates that the outcomes aren’t the same, the visible part of a product is only one part of the puzzle.</p>

<p>I’m merely an accessibility novice and I didn’t even mention SEO in this post. I didn’t stop writing because I stopped finding flaws, but because this post was getting too long and I have other things to do. I’m sure accessibility users and experts can find even more issues than I have presented here(feel free to DM me on <a href="https://twitter.com/k0nserv">Twitter</a> and I’ll include them).</p>

<p>To end I’d like to leave you with a <a href="https://www.youtube.com/watch?v=mRNX6XJOeGU">quote</a> from <a href="https://www.imdb.com/title/tt0107290/characters/nm0000156?ref_=tt_cl_t3">Dr. Ian Malcolm</a>.</p>

<blockquote>
  <p>Your scientists were so preoccupied with whether or not they could, they didn’t stop to think if they should.</p>
</blockquote>
</div>
  
    
</article>
</div></div>]]>
            </description>
            <link>https://hugotunius.se/2020/10/31/flutter-web-a-fractal-of-bad-design.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24962504</guid>
            <pubDate>Sun, 01 Nov 2020 21:06:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The missing explanation of ZK-SNARKs: Part 1]]>
            </title>
            <description>
<![CDATA[
Score 66 | Comments 10 (<a href="https://news.ycombinator.com/item?id=24962049">thread link</a>) | @gbrown_
<br/>
November 1, 2020 | https://www.cryptologie.net/article/507/the-missing-explanation-of-zk-snarks/ | <a href="https://web.archive.org/web/*/https://www.cryptologie.net/article/507/the-missing-explanation-of-zk-snarks/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>

<p>What are ZK-SNARKs and how do they work? This is a question I’ve had for years, and always felt like the resources I found gave no clear intuition as to how all of that stuff worked. So today, after a breakthrough in my own understanding, I thought it would be good to re-share what I’ve learned in a more understandable picture. Something that tells you what is the right way of thinking about these things, and what are the gaps that you can fill for yourself if you want to.</p>
<h2>Getting terminology out of the way</h2>
<p>The first part of the question is pretty easy to answer. ZK-SNARKs, no matter what their funny name might imply, are simply <strong>zero-knowledge proofs</strong> that are:</p>
<ul>
<li><strong>non interactive</strong></li>
<li><strong>general purpose</strong></li>
<li>and <strong>succinct</strong></li>
</ul>
<p>Huh, what are all these words? you ask, intimidated by their vagueness.</p>
<p>Well first, <strong>zero-knowledge proofs</strong> are cryptographic proofs that you know something, without revealing the something (zero-knowledgeness). That “something” is usually called the <strong>witness</strong>, but this detail doesn’t matter much. There are a lot of resources about zero-knowledge proofs so I won’t explain much about how they work, or what their exact cryptographic properties are (completeness, soundness, zero-knowledgeness).
Zero-knowledge proofs are often seen used to prove that you know the discrete logarithm in some base of an element of some group (e.g. what is $x$ in $g^x \mod p$), or similarly-limited statements.<br>
“<em>Limited yes, but still useful!</em>” yells Schnorr, inventor of the Schnorr signature scheme which is fabricated by taking a zero-knowledge proof of the knowledge of a discrete logarithm, and making it <strong>non-interactive</strong>. A zero-knowledge proof or <strong>ZKP</strong> is an interactive protocol between a prover (who knows the <strong>witness</strong>) and a verifier (who has to be convinced). An interactive protocol sucks in the real world, as it often limits the number of potential use-cases of the primitive, and slows down protocols depending on the number of round trips that need to happen between the prover and the verifier. Fortunately, some ZKPs can be constructed without interaction with a verifier. In other words, a prover can simply create a proof, and that proof can be verified by anyone at any point in time later without further help from the prover. When ZKPs are made non-interactive, we simply call them non-interactive zero-knowledge proofs or <strong>NIZKs</strong>. I talk more about <a href="https://www.cryptologie.net/article/193/schnorrs-signature-and-non-interactive-protocols/">the link between signatures and zero-knowledge proofs here</a>.<br>
ZKPs and NIZKs can also be constructed on much more general statements like “I know an input to some function such that the execution gives some output”, or more specifically “I know $a$ in $f(a, b) = c$”. If this still doesn’t make sense think about the usual example given to illustrate general-purpose ZKPs: “I know the solution of the sudoku”. <br>
We’re almost there: <strong>ZK-SNARKs</strong> are general-purpose non-interactive zero-knowledge proofs, and more! They are also <strong>succinct</strong>, meaning that the proofs they produce are small in size and are fast to verify, which makes them so special they deserve to be called ZK-SNARKs. Not every modern proof systems deserve that special classification, for example STARKs don’t :(</p>
<p>As a recap:</p>
<ul>
<li>zero-knowledge proof: a cryptographic proof that you know something, without revealing the something</li>
<li>non interactive: a proof that was constructed without the help of a verifier</li>
<li>general purpose: a proof of a more general statement, like the knowledge of secret inputs or outputs of a program</li>
<li>succinct: a small proof that is fast to verify</li>
</ul>
<p>But not only did you ask, what are ZK-SNARKs, but you also asked about how they work.</p>
<h2>The actual stuff</h2>
<p>And oh boy, this is a complex subject to answer. First and foremost, there are many many schemes, too many of them, and so I’m not sure exactly how to answer that question. But I have some idea of how some of them work, and so I imagine that most of them follow that pattern, or improve on it, so let me explain…</p>
<p>There’s two parts to your typical ZK-SNARK: </p>
<ol>
<li>The proving system, which I'll explain in this post.</li>
<li>The translation or compilation of a program to something the proving system can prove, which I'll explain in part 2 of this post.</li>
</ol>
<p>The first part is not too hard to understand, while the second sort of requires a graduate course into the subject…</p>
<h3>Proving your knowledge of a constrained polynomial</h3>
<p>Here it is, remember that one: ZK-SNARKs are all about proving that you know some polynomial $f(x)$ that has some roots.
By roots I mean that the verifier has some values in mind (e.g. $1$ and $2$) and the prover must prove that the secret polynomial they have in mind evaluates to $0$ for this values (e.g. $f(1) = f(2) = 0$).
By the way, a polynomial that has 1 and 2 as roots (in our example) can be written as $f(x)=(x-1)(x-2)h(x)$ for some polynomial $h(x)$. (If you’re not convinced try to evaluate that at $x=1$ and $x=2$.)
So we say that the prover must prove that they know an $f(x)$ and $h(x)$ such that $f(x) = t(x)h(x)$ for some target polynomial $t(x) = (x-1)(x-2)$ (in the example that $1$ and $2$ are the roots that the verifier wants to check).</p>
<p>But that’s it, that’s what ZK-SNARKs proving systems usually provide: something to prove that you know some polynomial. I’m repeating this because the first time I learned about that it made no sense to me: how can you prove that you know some secret input to a program, if all you can prove is that you know a polynomial. Well, that’s why part 2 of this explanation is so difficult: it’s about translating a program into a polynomial. But more on that later.</p>
<p>Back to our proving system, how does one prove that they know such a function $f(x)$? Well they just have to prove that they know an $h(x)$ such that you can write $f(x)$ as $f(x) = t(x)h(x)$. Ugh… Not so fast here. We’re talking about <strong>zero-knowledge</strong> proofs right? How can we prove this without giving out $f(x)$? Well, by using three tricks!</p>
<ol>
<li><strong>homomorphic commitments</strong></li>
<li><strong>bilinear pairings</strong></li>
<li><strong>different polynomials evaluate to different values most of the time</strong></li>
</ol>
<p>So let's go through each of them shall we?</p>
<h3>Homomorphic commitments</h3>
<p>The first trick is to use <strong>commitments</strong> to hide the values that we’re sending to the prover. But not only do we hide them, we also want to allow the <strong>verifier</strong> to perform some operations on them so that they can verify the proof. Specifically verify that if the prover commits on their polynomial $f(x)$ as well as $h(x)$, then we have
$$
com(f(x)) = com(t(x)) com(h(x)) = com(t(x)h(x))
$$ </p>
<p>where $com(t(x))$ is computed by the verifier as these are the known constraints on the polynomial.
These operations are called <strong>homomorphic operations</strong> and we can’t perform them if we use hash functions as commitment mechanisms. Instead, we can simply “hide the values in the exponent” (e.g. for a value $v$ then send the commitment $g^v \mod{p}$) as these are commitments that allow for these homomorphic operations. (To convince yourself, observe that if $a = bc$ then $g^a = g^b g^c = g^{b+c}$. </p>
<p>Wait, this is not what we wanted… we wanted $g^a = g^{bc}$.</p>
<h3>Bilinear pairings</h3>
<p>$g^a = (g^b)^c = g^{bc}$ gets us there, but only if $c$ is a known value and not a commitment (e.g. $g^c$). Unfortunately this is a limitation for our proving protocol, as there will be multiplication operations between commitments. This is where <strong>bilinear pairings</strong> can be used to unblock us, and this is the <em>sole reason</em> why we use bilinear pairings in a ZK-SNARK (really just to be able to multiply the values inside the commitments).
I don’t want to go too deep into what bilinear pairings are, but just know that it is just another tool in our toolkit that:</p>
<ul>
<li>Takes two values of our group (the values generates by $g$ raised to different powers modulo $p$) and place them in another group.</li>
<li>By moving stuff from one group to the other, <strong>we can multiply things that couldn't be multiplied previously</strong>.</li>
</ul>
<p>So using $e$ as the typical way of writing a bilinear pairing, we have $e(g_1, g_2) = h_3$ and we can use it to perform multiplications hidden in the exponent via this one equation:</p>
<p>$$
e(g^b, g^c) = e(g)^{bc}
$$</p>
<p>But no more about bilinear pairings! Again that’s the only reason why we use these in ZK-SNARKs. It’s just a trick to make our homomorphic commitments more homomorphic, to allow us to do:</p>
<p>$$
com(f(x)) = com(t(x)) com(h(x)) = com(t(x)h(x))
$$</p>
<h3>Where does the succinctness comes from?</h3>
<p>Finally, the <strong>succinctness</strong> of ZK-SNARKs come from the fact that two functions that differ will evaluate to different points most of the time.
What this means for us is that if my $f(x)$ is not really equal to $t(x)h(x)$, meaning that I don’t have a polynomial $f(x)$ that really has the roots we’ve chosen with the verifier, then evaluating $f(x)$ and $t(x)h(x)$ at a random point $r$ will not give out the same result (most of the time). In other words for almost all $r$, $f(r) \neq t(r)h(r)$.</p>
<p>This is known as the <strong>Schwartz-Zippel lemma</strong>, which I pictured in the following illustration.</p>
<p><img alt="schwartz zippel lemma" src="https://www.cryptologie.net/upload/Screen_Shot_2020-11-01_at_11.48_.47_AM_.png"></p>
<p>Knowing this, it is enough to prove that $com(f(r)) = com(t(r)h(r))$ for some random point $r$. This is why ZK-SNARKs are so small; by comparing points in a group you end up comparing entire polynomials!</p>
<p>But this is also why there is a “trusted setup” needed before most ZK-SNARKs can work. If a prover learns the random point $r$, then they can forge bad polynomials that will verify. So a trusted setup is about:</p>
<ol>
<li>creating a random value $r$</li>
<li>committing different exponentiation of it $g^r, g^{r^2}, g^{r^3}, \ldots$ so that they can be used by the prover to compute their polynomial without knowing the point $r$</li>
<li>destroying the value $r$</li>
</ol>
<p>Does the second point makes sense? If my polynomial as the prover is $f(x) = x^2 + x$ then all I have to do is compute $g^{r^2} g^r$ to obtain a commitment of my polynomial evaluated at that random point $r$.</p>
<p>Next, I'll write the second part of this blogpost and you'll have to wait until I'm done.</p>
</article></div>]]>
            </description>
            <link>https://www.cryptologie.net/article/507/the-missing-explanation-of-zk-snarks/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24962049</guid>
            <pubDate>Sun, 01 Nov 2020 20:03:45 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[SQL X-to-Y]]>
            </title>
            <description>
<![CDATA[
Score 55 | Comments 27 (<a href="https://news.ycombinator.com/item?id=24961028">thread link</a>) | @panda17
<br/>
November 1, 2020 | https://www.damirsystems.com/sql-x-to-y/ | <a href="https://web.archive.org/web/*/https://www.damirsystems.com/sql-x-to-y/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-2056">

<div>
<p>What is the correct way to model one-to-one, one-to-many, many-to-many? Where do foreign keys go? What criteria to use? How to decide? I see these questions repeated on StackOverflow time and again.</p>
<p>The particular implementation should be based on <em>logic</em>. In most cases, <em>verbalizing</em> the constraint in <em>natural language</em> reveals the correct solution.</p>
<p>The following example uses two entities: <em>thing</em> <strong>T</strong>, and <em>category</em> <strong>C</strong>. Defining relationship with four most common multiplicities results in <tt>4x4=16</tt> possible constraints.</p>
<pre>Term                    Multiplicity
------------------------------------
is     in exactly one       [1]
is     in at most one       [0,1]
is     in at least one      [1,*]
may be in more than one     [0,*]
</pre>
<h2>Easy</h2>
<p>The following 11 cases can be declaratively defined in SQL using standard constraints <tt>(FK, PK, AK)</tt>. No need for triggers, deferred constraints, stored procedures, nor special application code.</p>
<hr>
<p><strong>T</strong> <tt>|-[1]------------[1]-|</tt> <strong>C</strong></p>
<p>1. Each thing <em>is</em> in <em>exactly one</em> category;<br>
for each category: <em>exactly one</em> thing <em>is</em> in that category.</p>
<pre>thing {T, C}
   PK {T}
   AK {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,1]----------[1]-|</tt> <strong>C</strong></p>
<p>2. Each thing <em>is</em> in <em>exactly one</em> category;<br>
for each category: <em>at most one</em> thing <em>is</em> in that category.</p>
<pre>thing {T, C}
   PK {T}
   AK {C}

   FK {C} REFERENCES category {C}


category {C}
      PK {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[1]----------[0,1]-|</tt> <strong>C</strong></p>
<p>3. Each thing <em>is</em> in <em>at most one</em> category;<br>
for each category: <em>exactly one</em> thing <em>is</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C, T}
      PK {C}
      AK {T}

      FK {T} REFERENCES thing {T}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,*]----------[1]-|</tt> <strong>C</strong></p>
<p>4. Each thing <em>is</em> in <em>exactly one</em> category;<br>
for each category: <em>more than one</em> thing <em>may be</em> in that category.</p>
<pre>thing {T, C}
   PK {T}

   FK {C} REFERENCES category {C}


category {C}
      PK {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[1]----------[0,*]-|</tt> <strong>C</strong></p>
<p>5. Each thing <em>may be</em> in <em>more than one</em> category;<br>
for each category: <em>exactly one</em> thing <em>is</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C, T}
      PK {C}

      FK {T} REFERENCES thing {T}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,*]--------[0,*]-|</tt> <strong>C</strong></p>
<p>6. Each thing <em>may be</em> in <em>more than one</em> category;<br>
for each category: <em>more than one</em> thing <em>may be</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C}
      PK {C}


thing_category {T, C}
            PK {T, C}

           FK1 {T} REFERENCES thing    {T}
           FK2 {C} REFERENCES category {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,*]--------[0,1]-|</tt> <strong>C</strong></p>
<p>7. Each thing <em>is</em> in <em>at most one</em> category;<br>
for each category: <em>more than</em> one thing <em>may be</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C}
      PK {C}


thing_category {T, C}
            PK {T}

           FK1 {T} REFERENCES thing    {T}
           FK2 {C} REFERENCES category {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,1]--------[0,*]-|</tt> <strong>C</strong></p>
<p>8. Each thing <em>may be</em> in <em>more than one</em> category;<br>
for each category: <em>at most one</em> thing <em>is</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C}
      PK {C}


thing_category {T, C}
            PK {C}

           FK1 {T} REFERENCES thing    {T}
           FK2 {C} REFERENCES category {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,1]--------[0,1]-|</tt> <strong>C</strong></p>
<p>9. Each thing <em>is</em> in <em>at most one</em> category;<br>
for each category: <em>at most one</em> thing <em>is</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C}
      PK {C}


thing_category {T, C}
            PK {T}
            AK {C}

           FK1 {T} REFERENCES thing    {T}
           FK2 {C} REFERENCES category {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[1,*]--------[0,*]-|</tt> <strong>C</strong></p>
<p>10. Each thing <em>may be</em> in <em>more than one</em> category;<br>
for each category: <em>at least one</em> thing <em>is</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C, T}
      PK {C}

      FK {T} REFERENCES thing {T}


thing_cat {T, C}
       PK {T, C}

      FK1 {T} REFERENCES thing    {T}
      FK2 {C} REFERENCES category {C}


VIEW thing_category {T, C}
AS
category  {T, C}
UNION
thing_cat {T, C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,*]--------[1,*]-|</tt> <strong>C</strong></p>
<p>11. Each thing <em>is</em> in <em>at least one</em> category;<br>
for each category: <em>more than one</em> thing <em>may be</em> in that category.</p>
<pre>thing {T, C}
   PK {T}

   FK {C} REFERENCES category {C}


category {C}
      PK {C}


thing_cat {T, C}
       PK {T, C}

      FK1 {T} REFERENCES thing    {T}
      FK2 {C} REFERENCES category {C}


VIEW thing_category {T, C}
AS
thing {T, C}
UNION
thing_cat {T, C}
</pre>
<h2>Not Easy</h2>
<p>Cases from 12 to 16 require use of triggers, stored procedures, deferred constraints, or application code to enforce the constraint.</p>
<p>12. <strong>T</strong> <tt>|-[1,*]----------[1]-|</tt> <strong>C</strong><br>
Each thing <em>is</em> in <em>exactly one</em> category;<br>
for each category: <em>at least one</em> thing <em>is</em> in that category.</p>
<p>13. <strong>T</strong> <tt>|-[1]----------[1,*]-|</tt> <strong>C</strong><br>
Each thing <em>is</em> in <em>at least one</em> category;<br>
for each category: <em>exactly one</em> thing <em>is</em> in that category.</p>
<p>14. <strong>T</strong> <tt>|-[1,*]--------[0,1]-|</tt> <strong>C</strong><br>
Each thing <em>is</em> in <em>at most one</em> category;<br>
for each category: <em>at least one</em> thing <em>is</em> in that category.</p>
<p>15. <strong>T</strong> <tt>|-[0,1]--------[1,*]-|</tt> <strong>C</strong><br>
Each thing <em>is</em> in <em>at least one</em> category;<br>
for each category: <em>at most one</em> thing <em>is</em> in that category.</p>
<p>16. <strong>T</strong> <tt>|-[1,*]--------[1,*]-|</tt> <strong>C</strong><br>
Each thing <em>is</em> in <em>at least one</em> category;<br>
for each category: <em>at least one</em> thing <em>is</em> in that category.</p>
<h3>The Problem</h3>
<p>The main problem is lack of assertions (DB-wide constraints) in main SQL implementations. SQL standard actually defines them (<tt>CREATE ASSERTION</tt>), but no luck yet. Hence, not every business constraint can be elegantly defined in SQL. Often some creativity, compromise, and awkwardness is required.</p>
<hr>
<p>Note:</p>
<pre>All attributes (columns) NOT NULL

PK = Primary Key
AK = Alternate Key (Unique)
FK = Foreign Key
</pre>
</div>

</article></div>]]>
            </description>
            <link>https://www.damirsystems.com/sql-x-to-y/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24961028</guid>
            <pubDate>Sun, 01 Nov 2020 17:34:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Danish military intelligence uses XKEYSCORE to tap cables in co-op with the NSA]]>
            </title>
            <description>
<![CDATA[
Score 575 | Comments 190 (<a href="https://news.ycombinator.com/item?id=24960994">thread link</a>) | @XzetaU8
<br/>
November 1, 2020 | https://www.electrospaces.net/2020/10/danish-military-intelligence-uses.html | <a href="https://web.archive.org/web/*/https://www.electrospaces.net/2020/10/danish-military-intelligence-uses.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="post-body-7080478453343339184" itemprop="description articleBody">
<p>
Last August, it came out that a whistleblower accused the Danish military and signals intelligence service (<a href="https://en.wikipedia.org/wiki/Danish_Defence_Intelligence_Service" target="_blank"><i>Forsvarets Efterretningstjeneste</i></a> or FE) of unlawful activities and deliberately misleading the intelligence oversight board. </p><p>

Meanwhile, the Danish press was able to paint a surprisingly comprehensive and detailed picture of how the FE cooperated with the NSA in <a href="#cabletapping"><b>cable tapping</b></a> on Danish soil.</p><p>

It was further revealed that the Americans provided Denmark with a sophisticated <a href="#spysystem"><b>new spy system</b></a> which includes the NSA's data processing system <a href="#xkeyscore"><b>XKEYSCORE</b></a>.</p><p>

A Danish paper also disclosed that the accusation of <a href="#unlawful"><b>unlawful collection</b></a> came from a young FE employee who reminds of Edward Snowden. A newly established investigation commission now has to clarify whether he was driven by fears or by facts.</p><p><a href="https://1.bp.blogspot.com/-FEhoYi_a0EI/X3lHJbfeSlI/AAAAAAAAEyk/urOidzARWswgJstbeNFiU8CRo38JQMufACPcBGAYYCw/s800/fe-xks-header.jpg"><img alt="" data-original-height="420" data-original-width="800" src="https://1.bp.blogspot.com/-FEhoYi_a0EI/X3lHJbfeSlI/AAAAAAAAEyk/urOidzARWswgJstbeNFiU8CRo38JQMufACPcBGAYYCw/s800/fe-xks-header.jpg" width="600"></a></p>
<p><span size="2">
The Sandagergård complex of the FE on the island of Amager, where a new<br> 
data center was built for its deployment of the XKEYSCORE system<br>
</span>
</p>


<p><span size="+2">Cable tapping</span></p><p>

In an extensive piece from September 13, the renowned Danish newspaper <a href="https://www.berlingske.dk/samfund/et-pengeskab-paa-kastellet-har-i-aartier-gemt-paa-et-dybt-fortroligt" target="_blank"><i>Berlingske</i></a> (founded in 1749) describes how the FE, in cooperation with the NSA, started to tap an international telecommunications cable in order to gather foreign intelligence.</p><p>
  
  In the mid-1990s, the NSA had found out that somewhere under Copenhagen there was a backbone cable containing phone calls, e-mails and text messages from and to countries like China and Russia, which was of great interest for the Americans.</p><p>
  
Tapping that cable, however, was almost impossible without the help of the Danes, so the NSA asked the FE for access to the cable, but this request was denied, according to Berlingske.</p><p>
  
  
  <b>Agreement with the United States</b></p><p>
  
  The US government did not give up, and in a letter sent directly to the Danish prime minister Poul Nyrup Rasmussen, US president Clinton asked his Danish colleague to reconsider the decision. And Nyrup, who was a sworn supporter of a close relationship with the US, said yes. </p><p>
  
  The cooperation was laid down in a document, which, according to Berlingske, all Danish defense ministers had to sign "so that any new minister could see that his predecessor - and his predecessors before his predecessors - with their signatures had been part of this small, exclusive circle of people who knew one of the kingdom's biggest secrets."</p><p> 
    
  The code name for this cooperation is not known, but it's most likely part of the NSA's umbrella program <a href="https://www.electrospaces.net/2014/10/the-german-operation-eikonal-as-part-of.html#rampart-a">RAMPART-A</a>. Under this program, which started in 1992, foreign partners <a href="https://s3.amazonaws.com/s3.documentcloud.org/documents/1200864/tssinframpartaoverview-v1-0-redacted-information.pdf" target="_blank">provide</a> access to high-capacity international fiber-optic cables, while the US provides the equipment for transport, processing and analysis:</p><p><a href="https://1.bp.blogspot.com/-VQv_x5OW4VM/VD2MIOzUWkI/AAAAAAAAB8o/rxZgVvQ4hmI/s1600/rampart-a-2010-diagram.jpg" imageanchor="1" target="_blank"><img src="https://1.bp.blogspot.com/-VQv_x5OW4VM/VD2MIOzUWkI/AAAAAAAAB8o/rxZgVvQ4hmI/s1600/rampart-a-2010-diagram.jpg" title="Slide from an NSA presentation about the RAMPART-A program" width="450"></a></p>
   
  <p>

  <b>Agreement with a cable operator</b></p><p>
  
To make sure that tapping the cable was as legal as possible, the government asked approval of the private Danish company that operated the cable. The company agreed, but only when it was approved at the highest level, and so the agreement was signed by prime minister Rasmussen, minister of defense Hækkerup and head of department Troldborg. </p><p>
  
  Because the cable contained international telecommunications it was considered to fall within the FE's foreign intelligence mandate. The agreement was prepared in only one copy, which was shown to the company and then locked in a safe at the FE's headquarters at the <a href="https://web.archive.org/web/20200811152740/https://fe-ddis.dk/om-os/Organisation/lokaliteter-i-dk/Pages/Kastellet.aspx" target="_blank">Kastellet</a> fortress in Copenhagen, according to Berlingske.</p><p>

 This Danish agreement is very similar to the <a href="http://download.krone.at/pdf/VertragWZschwarz.pdf" target="_blank">Transit Agreement</a> between the German foreign intelligence service BND and Deutsche Telekom, in which the latter agreed to provide access to international transit cables at its switching center in Frankfurt am Main. The BND then tapped these cables with help from the NSA under <a href="https://www.electrospaces.net/2015/05/new-details-about-joint-nsa-bnd.html">operation Eikonal</a> (2004-2008).</p><p>
  
  
    <b>Processing at Sandagergård</b></p><p>
  
  Berlingske reported that the communications data that were extracted from the backbone cable in Copenhagen were sent from the Danish company's technical hub to the <a href="https://web.archive.org/web/20200811153920/https://fe-ddis.dk/om-os/Organisation/lokaliteter-i-dk/Pages/Sandagergaard.aspx" target="_blank">Sandagergård complex</a> of the FE on the island of <a href="https://en.wikipedia.org/wiki/Amager" target="_blank">Amager</a>. The US had paid for a cable between the two locations.</p><p>
  
  At Sandagergård, the "NSA made sure to install the technology that made it possible to enter keywords and translate the huge amount of information, so-called raw data from the cable tapping, into "readable" information."</p><p>
  
The filter system was not only fed by keywords from the FE, but the NSA also provided "the FE with a series of keywords that are relevant to the United States. The FE then reviews them - and checks that there are basically no Danes among them - and then enters the keywords" according to sources cited by Berlingske.</p><p>
  
  Besides this filtering with keywords and selectors, the FE and the NSA will also have used the metadata for <a href="https://edwardsnowden.com/docs/doc/B17-TDB-Knowledge-Sharing.pdf" target="_blank">contact-chaining</a>, which means reconstructing which phone numbers and e-mail addresses had been in contact with each other, in order to create social network graphs - something the sources apparently didn't want to disclose to Berlingske.</p><p><a href="https://1.bp.blogspot.com/-zFJ49f56CXY/X5PXqIaouqI/AAAAAAAAEzY/TJwURx3Jn6oCxN9s4I3LqKKu1EhtLPEAACPcBGAYYCw/s1351/dk-cables.JPG"><img alt="" data-original-height="830" data-original-width="1351" src="https://1.bp.blogspot.com/-zFJ49f56CXY/X5PXqIaouqI/AAAAAAAAEzY/TJwURx3Jn6oCxN9s4I3LqKKu1EhtLPEAACPcBGAYYCw/s1351/dk-cables.JPG" width="550"></a></p>
  <p><span size="2">
  Map of the current backbone cables around the Danish capital Copenhagen<br>
  and the Sandagergård complex of the FE on the island of Amager<br>
  (source: <a href="https://live.infrapedia.com/app" target="_blank">Infrapedia</a> - click to enlarge)<br>
</span>
</p>

  <p>
  
      <b>Trusted partners</b></p><p>
  
  Part of the agreement between the US and Denmark was that "the USA does not use the system against Danish citizens and companies. And the other way around". Similar words can be found in an <a href="https://www.documentcloud.org/documents/1200860-odd-s3-overviewnov2011-v1-0-redacted-information.html" target="_blank">NSA presentation</a> from 2011: "No US collection by Partner and No Host Country collection by US" - although this is followed by "there ARE exceptions!"</p><p>
  
  The latter remark may have inspired Edward Snowden to accuse the NSA of abusing these cooperations with foreign partner agencies to spy on European citizens, but as a source told Berlingske: </p><p>
  
  "I can not at all imagine in my imagination that the NSA would betray that trust. I consider it completely and utterly unlikely. If the NSA had a desire to obtain information about Danish citizens or companies, the United States would simply turn to [the domestic security service] PET, which would then provide the necessary legal basis."</p><p>
  
The source also said that "the NSA wanted to jump and run for Denmark. The agency did everything Denmark asked for, without discussion. The NSA continuously helped Denmark - because of this cable access. [...] Denmark was a very, very close and valued partner."</p><p>
    
This close and successful cooperation was apparently one of the reasons for the visit of president Bill Clinton to Denmark in July 1997, according to Berlingske.</p><p><a href="https://1.bp.blogspot.com/-1-v3T8EQqk0/X3gIQLWgChI/AAAAAAAAEyE/j-yGk3qiStcS3Y692bc25UT6WG1_B_2BACLcBGAsYHQ/s0/clinton-rasmussen.jpg"><img alt="" src="https://1.bp.blogspot.com/-1-v3T8EQqk0/X3gIQLWgChI/AAAAAAAAEyE/j-yGk3qiStcS3Y692bc25UT6WG1_B_2BACLcBGAsYHQ/s0/clinton-rasmussen.jpg" width="550"></a></p>
  <p><span size="2">
Danish prime minister Poul Nyrup Rasmussen and US president Bill Clinton<br>
  during his visit to Denmark in July 1997 (photo: Linda Kastrup)<br>
</span>
</p>

<p><span size="+2">A new spy system</span></p><p>
  
  In the wake of the FE scandal even more recent developments have been revealed: a <a href="https://www.dr.dk/nyheder/indland/ny-afsloering-fe-masseindsamler-oplysninger-om-danskere-gennem-avanceret-spionsystem" target="_blank">report</a> by the Danish broadcaster DR from September 24, 2020 provides interesting details about how the Americans provided Denmark with a sophisticated new "spy system".</p><p>
  
After the FE got a new head of procurement in 2008, NSA employees frequently traveled to Denmark for quite some time to build the necessary hardware and install the required software for the new system, which DR News describes as extremely advanced. It also has a special internal code name, which the broadcaster decided not to publish. It's also this new system through which the alleged illegal collection of Danish data took place.</p><p>
  
  According to DR News, the NSA technicians were also involved in the construction of a new data center at the FE's <a href="https://web.archive.org/web/20200811153920/https://fe-ddis.dk/om-os/Organisation/lokaliteter-i-dk/Pages/Sandagergaard.aspx" target="_blank">Sandagergård complex</a> on Amager that was specifically built to house the new spy system, which was taken into use somewhere between 2012 and 2014. The cooperation between the FE and the NSA on this specific system was based upon a Memorandum of Understanding (MoU) signed by then FE chief <a href="https://da.wikipedia.org/wiki/Thomas_Ahrenkiel" target="_blank">Thomas Ahrenkiel</a>.</p><p>

  
  
  <b>Filter systems</b></p><p>
  
The DR News <a href="https://www.dr.dk/nyheder/indland/ny-afsloering-fe-masseindsamler-oplysninger-om-danskere-gennem-avanceret-spionsystem" target="_blank">report</a> also goes into more detail about the interception process. It says that first, the intelligence service identifies a data stream that may be interesting, after which they "mirror" the light that passes through the particular fiber-optic cables. In this way, they copy both metadata and content, like text messages, chat conversations, phone calls and e-mails, and send them to the FE's data center at Sandagergård.</p><p>

  
According to DR News, the FE tried to develop a number of filters to ensure that data from Danish citizens and companies is sorted out and not made searchable by the new spy system. The former Danish minister of defense Claus Hjort Frederiksen recently <a href="http://www.weekendavisen.dk/2020-37/samfund/landsskadeligt" target="_blank">said</a> that there was indeed an attempt to develop such filters, but at the same time he admitted that there can be no guarantee that no Danish information will pass through.</p><p><span size="+2">XKEYSCORE</span></p><p>

  DR News also reported that the heart of the new spy system is formed by <a href="https://en.wikipedia.org/wiki/XKeyscore" target="_blank">XKEYSCORE</a>, which was developed by the NSA and the existence of which was first <a href="https://www.theguardian.com/world/2013/jul/31/nsa-top-secret-program-online-data" target="_blank">revealed</a> by The Guardian in June 2013.</p><p> 
  
  The NSA's British counterpart GCHQ incorporated XKEYSCORE in its own system for processing bulk internet data codenamed <a href="https://en.wikipedia.org/wiki/Tempora" target="_blank">TEMPORA</a> and it can be assumed that the other <a href="https://www.electrospaces.net/2014/09/nsas-foreign-partnerships.html#2ndparty">Second Party</a> partners (also known as the Five Eyes) also use this system, whether or not under a different codename.</p><p><a href="https://1.bp.blogspot.com/-t6LWjnPz3Wo/X3LLi61rZzI/AAAAAAAAExc/-F5vREaIi4oBCAZ_LNhvOOJFVnHnLlFbgCLcBGAsYHQ/s0/xks%2Bintro.JPG" target="_blank"><img alt="" src="https://1.bp.blogspot.com/-t6LWjnPz3Wo/X3LLi61rZzI/AAAAAAAAExc/-F5vREaIi4oBCAZ_LNhvOOJFVnHnLlFbgCLcBGAsYHQ/s0/xks%2Bintro.JPG" width="500"></a></p>
  <p>
  
From the Snowden documents we know that the NSA also provided XKEYSCORE to some of its <a href="https://www.electrospaces.net/2014/09/nsas-foreign-partnerships.html#3rdparty">Third Party</a> partners: the German <a href="https://www.electrospaces.net/2016/09/secret-report-reveals-german-bnd-also.html">foreign intelligence service BND</a> and domestic security service BfV, the Swedish signals intelligence service FRA and the Japanese Directorate for SIGINT. It is new though that the Danish military intelligence service FE uses the system too.</p><p>

  
Some press reports seem to suggest that these partner agencies "gain access to XKEYSCORE" as if it would allow them to connect to a huge global mass surveillance system. The latter may be the case for the NSA's Second Party partners, but the Third Party partners are using XKEYSCORE only to process and analyze data from their own tapping points and are not able to access data from Five Eyes collection platforms.</p><p>
  
  Likewise, NSA analysts using XKEYSCORE don't have direct …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.electrospaces.net/2020/10/danish-military-intelligence-uses.html">https://www.electrospaces.net/2020/10/danish-military-intelligence-uses.html</a></em></p>]]>
            </description>
            <link>https://www.electrospaces.net/2020/10/danish-military-intelligence-uses.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24960994</guid>
            <pubDate>Sun, 01 Nov 2020 17:30:02 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[C/C++ vs. Rust Performance]]>
            </title>
            <description>
<![CDATA[
Score 91 | Comments 125 (<a href="https://news.ycombinator.com/item?id=24960108">thread link</a>) | @krizhanovsky
<br/>
November 1, 2020 | http://tempesta-tech.com/blog/fast-programming-languages-c-c++-rust-assembly | <a href="https://web.archive.org/web/*/http://tempesta-tech.com/blog/fast-programming-languages-c-c++-rust-assembly">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div> <p><i>Posted on October 28, 2020</i></p><p>This article isn't about which programming language is better, instead it discusses the most powerful tool set for development of the fastest server-side system software, such as database engines and HTTPS servers. There are several specific properties of this type of software: </p><ul><li>Relatively large code base, 100,000 lines of C or C++ code and more. While it's possible to write particular, the most 'hot' functions, in Assembly language, it's impractical to write the whole program in Assembly. </li><li>Databases and web servers are mission-critical software - we all got used that our Linux systems with MySQL and Nginx processes work for months and years. There are <a href="https://github.com/tempesta-tech/tempesta/wiki/High-availability">simple high availability</a> best practices mitigating the downtime due to possible crashes, but they're the subject for another article. Meantime, it's worth mentioning that if you really-really care about high availability, then you should build you infrastructure with an assumption that any component of your system may crash at any time, just like <a href="https://lwn.net/Articles/801871/">Facebook does this</a> -the company deploys the recent versions of the Linux kernel as soon as they're available. </li></ul><p>We've been developing the <a href="http://tempesta-tech.com/c++-services">fastest software in C, C++, and Assembly</a> for ages. It's not a surprise that since Rust is <a href="https://en.wikipedia.org/wiki/Rust_(programming_language)">"focused on performance"</a> we're very interested in it. With a bit of skepticism though. Just remember the rise of Java programming language: there were a lot of reports that the JIT compilation produced code faster than C++. Now it's hard to find a case, when C++ is slower than Java, see for example the <a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/fastest/java.html">benchmark game</a>. It's also worth mentioning that the memory garbage collection (GC) in Java leads to high tail latencies and it's hard or even impossible to do anything with the problem. Golang can not be considered for high performance programming also due to the GC. </p><h2>C or C++? Or both of them?</h2><p> The C programming language dominates in the system programming. An operating system kernel is an example of one of the most sophisticated system software, not only because it deals with hardware directly, but also due to strict performance requirements. The Linux and FreeBSD kernels are written in C, as well as the other UNIX'es and Windows kernels. Let's start the discussion from this bright example of high-performance system software. </p><h3>C++ for operating systems kernel development</h3><p> FreeBSD <a href="https://forums.freebsd.org/threads/driver-building-in-c.35701/">has been supporting C++ modules</a> for a while. While the Linux kernel never supported C++, there was <a href="https://pdos.csail.mit.edu/papers/click:tocs00/paper.pdf">the Click modular router</a> written in C++ and working as a Linux kernel module. If you're interested in C++ applicability for the operating systems kernel development, then you can find quite good discussions in the <a href="https://wiki.osdev.org/C++">C++</a> and <a href="https://wiki.osdev.org/C++_Bare_Bones">Bare bones</a> articles. However, there are fundamental reasons against using C++ for operating system kernel development: </p><ul><li>You do not have <code>libstdc++</code> with <a href="https://en.wikipedia.org/wiki/Run-time_type_information">RTTI</a> and exceptions in the kernel space. Actually, <code>dynamic_cast</code> isn't so frequently used and there are a lot of C++ projects compiled without RTTI. If you need exceptions, then you have to port them into the kernel. <code>libstdc++</code> uses basic C allocations, so it must be significantly reworked for the kernel. </li><li>You can't use the STL and Boost libraries and, in fact, all kernels already have their own libraries. C++ introduces filesystem, threading and networking libraries, which are senseless in an OS kernel. From the other hand, the modern OSes provide advanced synchronization primitives, which are still not available in standard C++ (e.g. there is still no read-write spinlocks in C++). </li><li>The Linux kernel provides number of memory allocators (SLAB, page, <code>vmalloc()</code>, <code>kmalloc()</code>, and so on), thus you have to use <a href="https://en.cppreference.com/w/cpp/language/new"><code>placement new</code></a> and/or just use the C functions for memory allocation and freeing. Aligned memory is crucial for the performance, but you need to write special wrappers to get aligned memory with <code>new</code>. </li><li>Strong type safety isn't so comfortable for system programming when raw memory pointers are frequently casted to some data structures. This is debatable though: while some people are uncomfortable with frequent <code>reinterpret_cast&lt;Foo *&gt;(ptr)</code> instead of short <code>(Foo *)ptr</code>, the others are good with more typing and more type safety. </li><li>C++ <a href="https://en.wikipedia.org/wiki/Name_mangling">name mangling</a>, required for namespaces and function overloading, makes function hard to call from Assembly, so you need to use <code>extern "C"</code>. </li><li>You have to make special code sections for static objects constructors and destructors, <code>.ctor</code> and <code>.dtor</code> correspondingly. </li><li>C++ exceptions can not cross <i>context</i> boundaries, i.e. you can not throw an exception in one thread and catch it in another. The operating system kernel deals with much more complex context model: there are kernel threads, user space processes entering into the kernel, deferred and hardware interruptions. The contexts can preempt each other in voluntarily or cooperative manner, so exception handling of current context could be preempted by another context. There are also memory management and contexts switching code which could conflict with exception handling code. Just like for RTTI, it's possible to implement the mechanism in kernel, but the current standard library can not be used. </li><li>While Clang and G++ support <code>__restrict__</code> extension, the official C++ standard <a href="https://www.quora.com/Why-doesnt-C++-have-an-equivalent-of-Cs-restrict-specifier">does not support</a> it. </li><li>Variable length arrays (VLA) are <a href="https://lwn.net/Articles/749064/">discouraged</a> in the Linux kernel, they are still handy in some scenarios, but are <a href="https://groups.google.com/g/comp.std.c++/c/K_4lgA1JYeg?pli=1">completely unavailable in C++</a>. </li></ul><p> Thus, with C++ in the kernel space you basically have only templates, classes inheritance and some syntax sugar like lambda functions. Since system code is quite rarely requires complicated abstractions and inheritances, then does it still have sense to make effort to use C++ in the kernel space? </p><h3>C++ exceptions</h3><p> This is one of the most <a href="https://herbsutter.com/2010/03/13/trip-report-march-2010-iso-c-standards-meeting/">debatable</a> C++ feature and it deserves a separate chapter. For example, the MySQL project, following to the <a href="https://google.github.io/styleguide/cppguide.html#Exceptions">Google coding style</a>, <a href="https://dev.mysql.com/doc/dev/mysql-server/latest/PAGE_CODING_GUIDELINES.html">doesn't use exceptions</a>. The Google coding style provides the good lists of pros and cons of using exceptions. Here we focus on performance aspects only. </p><p>Exceptions can improve performance when we have to handle error codes in too may places, e.g. (let the functions be inlined and very small) </p><pre><code>
        if (func_1())
            return -EINVAL;
        if (func_2())
            return -EINVAL;
        ....
        if (func_100())
            return -EINVAL;
    </code></pre><p> The problem with the code is that there are extra conditional jumps. Modern CPU are pretty good with branch prediction, but it still hurts performance. In C++ we can just write </p><pre><code>
        try {
            func_1();
            func_2();
            ...
            func_100();
        } catch (...) {
            return -EINVAL;
        }
    </code></pre><p> , so there are no extra conditions in the <i>hot</i> path. However, this isn't for free: most of the functions in your C++ code have to have extra epilogues with a table of exceptions, which these functions can catch, and an appropriate cleanup table. The function epilogues aren't executed in normal workflow, but they increase the size of code causing extra pollution in the CPU instruction cache. You can find great details about C++ exception handling internals in the <a href="https://monoinfinito.wordpress.com/series/exception-handling-in-c/">Nico Brailovsky's blog</a>. </p><h3>Is C++ still good?</h3><p> Yes, it is. Firstly, not the whole code actually must be as fast as possible and in most of the places we don't need custom memory allocation and don't care about exceptions overhead. The most of the projects are developed in the user space and benefit, especially the new ones, from relatively rich C++ standard and Boost libraries (not so rich as Java's though). </p><p>Secondly, the killing feature of C++ is that <b>it is C</b>. If you don't want to use exceptions or RTTI, then you can just switch the features off. Most of C programs can be just compiled with a C++ compiler with very small changes or without any changes at all. As an example, we need only this trivial change </p><pre><code>
    $ diff -up nbody.c nbody-new.cc
        @@ -112,9 +112,9 @@ static void advance(body bodies[]){
             // ROUNDED_INTERACTIONS_COUNT elements to simplify one of the following
             // loops and to also keep the second and third arrays in position_Deltas
             // aligned properly.
        -    static alignas(__m128d) double
        -      position_Deltas[3][ROUNDED_INTERACTIONS_COUNT],
        -      magnitudes[ROUNDED_INTERACTIONS_COUNT];
        +    static double
        +      position_Deltas[3][ROUNDED_INTERACTIONS_COUNT] __attribute__((aligned(16))),
        +      magnitudes[ROUNDED_INTERACTIONS_COUNT] __attribute__((aligned(16)));

             // Calculate the position_Deltas between the bodies for each interaction.
             for(intnative_t i=0, k=0; i &lt; BODIES_COUNT-1; ++i)
    </code></pre><p> to compile <a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/program/nbody-clang-8.html">the C program</a> with G++ compiler. The modern C++ compilers provide C compatibility extensions like the <code>__restrict__</code> keyword. You always can write the most performance critical code of a C++ program in C style. If you don't like the <a href="https://250bpm.com/blog:8/">STL containers with an overhead</a>, then you can use <a href="https://www.boost.org/doc/libs/1_74_0/doc/html/intrusive.html">Boost.intrusive</a> or even port a similar container from the Linux kernel or other fast C project -in most of the cases this won't be painful. See for example how a hash table from PostgreSQL, HTrie from <a href="https://github.com/tempesta-tech/tempesta/tree/master/tempesta_db">Tempesta DB</a>, and the Linux kernel read/write spinlocks (all are written in C) were used in a C++ <a href="https://github.com/tempesta-tech/blog/tree/master/htrie">benchmark</a>. </p><p>The last thing which must be mentioned about development of high performance programs in C++ is <a href="https://en.wikipedia.org/wiki/Template_metaprogramming">template metaprogramming</a>. It's very exciting about the modern C++ standards that using templates you can write quite sophisticated logic which is fully computed in the compile time and costs nothing in the run time. </p><h2>GOTO - the power of C</h2> <p><b>A professional tool must allow you to work with it in the most efficient way.</b> The goal of the high-level and high-performance programming languages is to generate the most efficient machine code. Each hardware architecture supports <i>jumps</i>, which means that you can jump to any address by any condition. The closest abstraction for the jumps in the C and C++ programming languages is <code>goto</code> operator. It's not so flexible …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://tempesta-tech.com/blog/fast-programming-languages-c-c++-rust-assembly">http://tempesta-tech.com/blog/fast-programming-languages-c-c++-rust-assembly</a></em></p>]]>
            </description>
            <link>http://tempesta-tech.com/blog/fast-programming-languages-c-c++-rust-assembly</link>
            <guid isPermaLink="false">hacker-news-small-sites-24960108</guid>
            <pubDate>Sun, 01 Nov 2020 15:33:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: A JavaScript SDK to reduce video streaming costs]]>
            </title>
            <description>
<![CDATA[
Score 64 | Comments 50 (<a href="https://news.ycombinator.com/item?id=24959519">thread link</a>) | @Anil1331
<br/>
November 1, 2020 | https://api.peervadoo.com/test | <a href="https://web.archive.org/web/*/https://api.peervadoo.com/test">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                <p><label for="url">Url:</label>
                    
		</p>
                </div></div>]]>
            </description>
            <link>https://api.peervadoo.com/test</link>
            <guid isPermaLink="false">hacker-news-small-sites-24959519</guid>
            <pubDate>Sun, 01 Nov 2020 13:57:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[7GUIs]]>
            </title>
            <description>
<![CDATA[
Score 455 | Comments 51 (<a href="https://news.ycombinator.com/item?id=24958725">thread link</a>) | @dsego
<br/>
November 1, 2020 | https://eugenkiss.github.io/7guis/tasks/ | <a href="https://web.archive.org/web/*/https://eugenkiss.github.io/7guis/tasks/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>The tasks were selected by the following criteria. The task set should be as small as possible yet reflect as many typical (or fundamental or representative) challenges in GUI programming as possible. Each task should be as simple and self-contained as possible yet not too artificial. Preferably, a task should be based on existing examples as that gives the task more justification to be useful and there already will be at least one reference implementation.</p><p>Below, a description of each task highlighted with the challenges it reflects and a screenshot of the resulting GUI application in Java/Swing is given.</p><p>For a live version of the tasks see my<!-- --> <a target="_blank" href="https://eugenkiss.github.io/7guis-React-TypeScript-MobX/">React/MobX</a> <!-- -->implementation.</p><h2>Counter</h2><p><em>Challenge:</em> Understanding the basic ideas of a language/toolkit.</p><p><img src="https://eugenkiss.github.io/7guis/static/counter.9cd92091.png"></p><p>The task is to build a frame containing a label or read-only textfield<!-- --> <em>T</em> and a button <em>B</em>. Initially, the value in <em>T</em> is “0” and each click of <em>B</em> increases the value in <em>T</em> by one.</p><p>Counter serves as a gentle introduction to the basics of the language, paradigm and toolkit for one of the simplest GUI applications imaginable. Thus, Counter reveals the required scaffolding and how the very basic features work together to build a GUI application. A good solution will have almost no scaffolding.</p><h2>Temperature Converter</h2><p><em>Challenges:</em> bidirectional data flow, user-provided text input.</p><p><img src="https://eugenkiss.github.io/7guis/static/tempconv.de9aff1f.png"></p><p>The task is to build a frame containing two textfields <em>T<sub>C</sub></em> <!-- -->and <em>T<sub>F</sub></em> representing the temperature in Celsius and Fahrenheit, respectively. Initially, both <em>T<sub>C</sub></em> and <em>T<sub>F</sub></em> are empty. When the user enters a numerical value into <em>T<sub>C</sub></em> the corresponding value in <em>T<sub>F</sub></em> is automatically updated and vice versa. When the user enters a non-numerical string into <em>T<sub>C</sub></em> the value in <em>T<sub>F</sub></em> is <em>not</em> updated and vice versa. The formula for converting a temperature <em>C</em> in Celsius into a temperature <em>F</em> in Fahrenheit is <em>C = (F - 32) * (5/9)</em> and the dual direction is <em>F = C * (9/5) + 32</em>.</p><p>Temperature Converter increases the complexity of Counter by having bidirectional data flow between the Celsius and Fahrenheit inputs and the need to check the user input for validity. A good solution will make the bidirectional dependency very clear with minimal boilerplate code.</p><p>Temperature Converter is inspired by the<!-- --> <a target="_blank" href="https://www.artima.com/pins1ed/gui-programming.html#32.4">Celsius/Fahrenheit converter</a> <!-- -->from the book <em>Programming in Scala</em>. It is such a widespread example—sometimes also in the form of a currency converter—that one could give a thousand references. The same is true for the Counter task.</p><h2>Flight Booker</h2><p><em>Challenge:</em> Constraints.</p><p><img src="https://eugenkiss.github.io/7guis/static/bookflight.a5434663.png"></p><p>The task is to build a frame containing a combobox <em>C</em> with the two options “one-way flight” and “return flight”, two textfields <em>T<sub>1</sub></em> and<!-- --> <em>T<sub>2</sub></em> representing the start and return date, respectively, and a button <em>B</em> for submitting the selected flight. <em>T<sub>2</sub></em> is enabled iff <em>C</em>’s value is “return flight”. When <em>C</em> has the value “return flight” and <em>T<sub>2</sub></em>’s date is strictly before <em>T<sub>1</sub></em>’s then <em>B</em> is disabled. When a non-disabled textfield <em>T</em> has an ill-formatted date then <em>T</em> is colored red and <em>B</em> is disabled. When clicking <em>B</em> a message is displayed informing the user of his selection (e.g. “You have booked a one-way flight on 04.04.2014.”). Initially, <em>C</em> has the value “one-way flight” and <em>T<sub>1</sub></em> as well as <em>T<sub>2</sub></em> have the same (arbitrary) date (it is implied that <em>T<sub>2</sub></em> is disabled).</p><p>The focus of Flight Booker lies on modelling constraints between widgets on the one hand and modelling constraints within a widget on the other hand. Such constraints are very common in everyday interactions with GUI applications. A good solution for Flight Booker will make the constraints clear, succinct and explicit in the source code and not hidden behind a lot of scaffolding.</p><p>Flight Booker is directly inspired by the<!-- --> <a target="_blank" href="http://blog.reactiveprogramming.org/?p=21">Flight Booking Java example in Sodium</a> <!-- -->with the simplification of using textfields for date input instead of specialized date picking widgets as the focus of Flight Booker is not on specialized/custom widgets.</p><h2>Timer</h2><p><em>Challenges:</em> concurrency, competing user/signal interactions, responsiveness.</p><p><img src="https://eugenkiss.github.io/7guis/static/timer.ed46b6b4.png"></p><p>The task is to build a frame containing a gauge <em>G</em> for the elapsed time <em>e</em>, a label which shows the elapsed time as a numerical value, a slider <em>S</em> by which the duration <em>d</em> of the timer can be adjusted while the timer is running and a reset button <em>R</em>. Adjusting<!-- --> <em>S</em> must immediately reflect on <em>d</em> and not only when<!-- --> <em>S</em> is released. It follows that while moving <em>S</em> the filled amount of <em>G</em> will (usually) change immediately. When <em>e ≥ d</em> is true then the timer stops (and <em>G</em> will be full). If, thereafter, <em>d</em> is increased such that <em>d &gt; e</em> will be true then the timer restarts to tick until <em>e ≥ d</em> is true again. Clicking <em>R</em> will reset <em>e</em> to zero.</p><p>Timer deals with concurrency in the sense that a timer process that updates the elapsed time runs concurrently to the user’s interactions with the GUI application. This also means that the solution to competing user and signal interactions is tested. The fact that slider adjustments must be reflected immediately moreover tests the responsiveness of the solution. A good solution will make it clear that the signal is a timer tick and, as always, has not much scaffolding.</p><p>Timer is directly inspired by the timer example in the paper<!-- --> <a target="_blank" href="http://cs.brown.edu/~sk/Publications/Papers/Published/ick-adapt-oo-fwk-frp/paper.pdf">Crossing State Lines: Adapting Object-Oriented Frameworks to Functional Reactive Languages</a>.</p><h2>CRUD</h2><p><em>Challenges:</em> separating the domain and presentation logic, managing mutation, building a non-trivial layout.</p><p><img src="https://eugenkiss.github.io/7guis/static/crud.515ce94b.png"></p><p>The task is to build a frame containing the following elements: a textfield<!-- --> <em>T<sub>prefix</sub></em>, a pair of textfields <em>T<sub>name</sub></em> and<!-- --> <em>T<sub>surname</sub></em>, a listbox <em>L</em>, buttons <em>B<sub>C</sub></em>,<!-- --> <em>B<sub>U</sub></em> and <em>B<sub>D</sub></em> and the three labels as seen in the screenshot. <em>L</em> presents a view of the data in the database that consists of a list of names. At most one entry can be selected in <em>L</em> at a time. By entering a string into <em>T<sub>prefix</sub></em> the user can filter the names whose surname start with the entered prefix—this should happen immediately without having to submit the prefix with enter. Clicking <em>B<sub>C</sub></em> <!-- -->will append the resulting name from concatenating the strings in<!-- --> <em>T<sub>name</sub></em> and <em>T<sub>surname</sub></em> to <em>L</em>.<!-- --> <em>B<sub>U</sub></em> and <em>B<sub>D</sub></em> are enabled iff an entry in <em>L</em> is selected. In contrast to <em>B<sub>C</sub></em>, <em>B<sub>U</sub></em> <!-- -->will not append the resulting name but instead replace the selected entry with the new name. <em>B<sub>D</sub></em> will remove the selected entry. The layout is to be done like suggested in the screenshot. In particular, <em>L</em> must occupy all the remaining space.</p><p>CRUD (Create, Read, Update and Delete) represents a typical graphical business application. The primary challenge is the separation of domain and presentation logic in the source code that is more or less forced on the implementer due to the ability to filter the view by a prefix. Traditionally, some form of MVC pattern is used to achieve the separation of domain and presentation logic. Also, the approach to managing the mutation of the list of names is tested. A good solution will have a good separation between the domain and presentation logic without much overhead (e.g. in the form of toolkit specific concepts or language/paradigm concepts), a mutation management that is fast but not error-prone and a natural representation of the layout (layout builders are allowed, of course, but would increase the overhead).</p><p>CRUD is directly inspired by the crud example in the blog post<!-- --> <a target="_blank" href="http://apfelmus.nfshost.com/blog/2012/03/29-frp-three-principles-bidirectional-gui.html">FRP - Three principles for GUI elements with bidirectional data flow</a>.</p><h2>Circle Drawer</h2><p><em>Challenges:</em> undo/redo, custom drawing, dialog control*.</p><p><img src="https://eugenkiss.github.io/7guis/static/circledraw.235dfd8b.png"></p><p>The task is to build a frame containing an undo and redo button as well as a canvas area underneath. Left-clicking inside an empty area inside the canvas will create an unfilled circle with a fixed diameter whose center is the left-clicked point. The circle nearest to the mouse pointer such that the distance from its center to the pointer is less than its radius, if it exists, is filled with the color gray. The gray circle is the selected circle <em>C</em>. Right-clicking <em>C</em> will make a popup menu appear with one entry “Adjust diameter..”. Clicking on this entry will open another frame with a slider inside that adjusts the diameter of <em>C</em>. Changes are applied immediately. Closing this frame will mark the last diameter as significant for the undo/redo history. Clicking undo will undo the last significant change (i.e. circle creation or diameter adjustment). Clicking redo will reapply the last undoed change unless new changes were made by the user in the meantime.</p><p>Circle Drawer’s goal is, among other things, to test how good the common challenge of implementing an undo/redo functionality for a GUI application can be solved. In an ideal solution the undo/redo functionality comes for free resp. just comes out as a natural consequence of the language / toolkit / paradigm. Moreover, Circle Drawer tests how dialog control*, i.e. keeping the relevant context between several successive GUI interaction steps, is achieved in the source code. Last but not least, the ease of custom drawing is tested.</p><p><small>* Dialog control is explained in more detail in the paper<!-- --> <a target="_blank" href="http://ceur-ws.org/Vol-610/paper11.pdf">Developing GUI Applications: Architectural Patterns Revisited</a> <!-- -->starting on page seven. The term describes the challenge of retaining context between successive GUI operations.</small></p><h2>Cells</h2><p><em>Challenges:</em> change propagation, widget customization, implementing a more authentic/involved GUI application.</p><p><img src="https://eugenkiss.github.io/7guis/static/cells.9544a72f.png"></p><p>The task is to create a simple but usable spreadsheet application. The spreadsheet should be scrollable. The rows should be numbered from 0 to 99 and the columns from A to Z. Double-clicking a cell <em>C</em> lets the user change <em>C</em>’s formula. After having finished editing the formula is parsed and evaluated and its updated value is shown in <em>C</em>. In addition, all cells which depend on <em>C</em> must be reevaluated. This process repeats until there are no more changes in the values of any cell (change propagation). Note that one should not just recompute the value of every cell but only of those cells that depend on another cell’s changed value. If there is an already provided spreadsheet widget it should not be used. Instead, another similar widget (like JTable in Swing) should be customized to become a reusable spreadsheet widget.</p><p>Cells is a more authentic and involved task that tests if a particular …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://eugenkiss.github.io/7guis/tasks/">https://eugenkiss.github.io/7guis/tasks/</a></em></p>]]>
            </description>
            <link>https://eugenkiss.github.io/7guis/tasks/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24958725</guid>
            <pubDate>Sun, 01 Nov 2020 11:20:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Building Containers Without Docker]]>
            </title>
            <description>
<![CDATA[
Score 95 | Comments 18 (<a href="https://news.ycombinator.com/item?id=24957887">thread link</a>) | @kiyanwang
<br/>
November 1, 2020 | https://blog.alexellis.io/building-containers-without-docker/ | <a href="https://web.archive.org/web/*/https://blog.alexellis.io/building-containers-without-docker/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div role="main">
    <article>

        

        <section>
            <div><p>In this post I'll outline several ways to build containers without the need for Docker itself. I'll use <a href="https://github.com/openfaas/">OpenFaaS</a> as the case-study, which uses OCI-format container images for its workloads. The easiest way to think about OpenFaaS is as a CaaS platform for <a href="https://kubernetes.io/">Kubernetes</a> which can run microservices, and add in FaaS and event-driven tooling for free.</p>
<p>See also <a href="https://openfaas.com/">OpenFaaS.com</a></p>
<p>The first option in the post will show how to use the built-in buildkit option for Docker's CLI, then <a href="https://github.com/moby/buildkit">buildkit</a> stand-alone (on Linux only), followed by Google's container builder, <a href="https://github.com/GoogleContainerTools/kaniko">Kaniko</a>.</p>
<p>This post covers tooling which can build an image from a Dockerfile, and so anything which limits the user to only Java (jib) or Go (ko) for instance is out of scope. I'll then wrap things up and let you know how to get in touch with suggestions, feedback and your own stories around wants and needs in container tooling.</p>
<h2 id="sowhatswrongwithdocker">So what's wrong with Docker?</h2>
<p>Nothing as such, Docker runs well on armhf, arm64, and on <code>x86_64</code>. The main Docker CLI has become a lot more than build/ship/run, and also lugs around several years of baggage, it now comes bundled with Docker Swarm and EE features.</p>
<blockquote>
<p>Update for Nov 2020: anyone using Docker's set of official base-images should also read: <a href="https://inlets.dev/blog/2020/10/29/preparing-docker-hub-rate-limits.html">Preparing for the Docker Hub Rate Limits</a></p>
</blockquote>
<h3 id="alternativestodocker">Alternatives to Docker</h3>
<p>There are a few efforts that attempt to strip "docker" back to its component pieces, the original UX we all fell in love with:</p>
<ul>
<li>
<p><a href="https://github.com/docker/docker">Docker</a> - docker itself now uses containerd to run containers, and has support for enabling buildkit to do highly efficient, caching builds.</p>
</li>
<li>
<p><a href="https://podman.io/">Podman</a> and <a href="https://github.com/containers/buildah">buildah</a> combination - RedHat / IBM's effort, which uses their own OSS toolchain to generate OCI images. Podman is marketed as being daemonless and rootless, but still ends up having to mount overlay filesystems and use a UNIX socket.</p>
</li>
<li>
<p><a href="https://github.com/alibaba/pouch">pouch</a> - from Alibaba, pouch is billed as "An Efficient Enterprise-class Container Engine". It uses containerd just like Docker, and supports both container-level isolation with <a href="https://github.com/opencontainers/runc">runc</a> and "lightweight VMs" such as <a href="https://github.com/hyperhq/runv">runV</a>. There's also more of a <a href="https://github.com/alibaba/pouch/blob/master/docs/architecture.md">focus on image distribution and strong isolation</a>.</p>
</li>
<li>
<p>Stand-alone buildkit - buildkit was started by <a href="https://twitter.com/tonistiigi?lang=en">Tõnis Tiigi</a> from Docker Inc as a brand new container builder with caching and concurrency in mind. buildkit currently only runs as a daemon, but you will hear people claim otherwise. They are forking the daemon and then killing it after a build.</p>
</li>
<li>
<p><a href="https://github.com/genuinetools/img">img</a> - img was written by <a href="https://github.com/jessfraz">Jess Frazelle</a> and is often quoted in these sorts of guides and is a wrapper for buildkit. That said, I haven't seen traction with it compared to the other options mentioned. The project was quite active <a href="https://github.com/genuinetools/img/commits/master">until late 2018 and has only received a few patches since</a>. img claims to be daemonless, but it uses buildkit so is probably doing some trickery there. I hear that <code>img</code> gives a better UX than buildkit's own CLI <code>buildctr</code>, but it should also be noted that img is only released for <code>x86_64</code> and there are no binaries for armhf / arm64.</p>
</li>
</ul>
<blockquote>
<p>An alternative to <code>img</code> would be <code>k3c</code> which also includes a runtime component and plans to support ARM architectures.</p>
</blockquote>
<ul>
<li><a href="https://github.com/ibuildthecloud/k3c">k3c</a> - Rancher's latest experiment which uses containerd and buildkit to re-create the original, classic, vanilla, lite experience of the original Docker version.</li>
</ul>
<p>Out of all the options, I think that I like k3c the most, but it is very nascient and bundles everything into one binary which is likely to conflict with other software, at present it runs its own embedded containerd and buildkit binaries.</p>
<blockquote>
<p>Note: If you're a RedHat customer and paying for support, then you really should use their entire toolchain to get the best value for your money. I checked out some of the examples and saw one that used my "classic" blog post on multi-stage builds. See for yourself which style you prefer <a href="https://github.com/containers/buildah/blob/master/demos/buildah_multi_stage.sh">the buildah example</a> vs. <a href="https://blog.alexellis.io/mutli-stage-docker-builds">Dockerfile example</a>.</p>
</blockquote>
<p>So since we are focusing on the "build" piece here and want to look at relativelt stable options, I'm going to look at:</p>
<ul>
<li>buildkit in Docker,</li>
<li>buildkit stand-alone</li>
<li>and kaniko.</li>
</ul>
<p>All of the above and more are now possible since the OpenFaaS CLI can output a standard "build context" that any builder can work with.</p>
<h2 id="buildatestapp">Build a test app</h2>
<p>Let's start with a Golang HTTP middleware, this is a cross between a function and a microservice and shows off how versatile OpenFaaS can be.</p>
<pre><code>faas-cli template store pull golang-middleware

faas-cli new --lang golang-middleware \
  build-test --prefix=alexellis2
</code></pre>
<ul>
<li><code>--lang</code> specifies the build template</li>
<li><code>build-test</code> is the name of the function</li>
<li><code>--prefix</code> is the Docker Hub username to use for pushing up our OCI image</li>
</ul>
<p>We'll get the following created:</p>
<pre><code>./
├── build-test
│   └── handler.go
└── build-test.yml

1 directory, 2 files
</code></pre>
<p>The handler looks like this, and is easy to modify. Additional dependencies can be added through vendoring or <a href="https://blog.golang.org/using-go-modules">Go modules</a>.</p>
<pre><code>package function

import (
	"fmt"
	"io/ioutil"
	"net/http"
)

func Handle(w http.ResponseWriter, r *http.Request) {
	var input []byte

	if r.Body != nil {
		defer r.Body.Close()

		body, _ := ioutil.ReadAll(r.Body)

		input = body
	}

	w.WriteHeader(http.StatusOK)
	w.Write([]byte(fmt.Sprintf("Hello world, input was: %s", string(input))))
}
</code></pre>
<h3 id="buildthenormalway">Build the normal way</h3>
<p>The normal way to build this app would be:</p>
<pre><code>faas-cli build -f build-test.yml
</code></pre>
<p>A local cache of the template and Dockerfile is also available at <code>./template/golang-middleware/Dockerfile</code></p>
<p>There are three images that are pulled in for this template:</p>
<pre><code>FROM openfaas/of-watchdog:0.7.3 as watchdog
FROM golang:1.13-alpine3.11 as build
FROM alpine:3.12
</code></pre>
<p>With the traditional builder, each of the images will be pulled in sequentially.</p>
<p>The wait a few moments and you're done, we now have that image in our local library.</p>
<p>We can also push it up to a registry with <code>faas-cli push -f build-test.yml</code>.</p>
<p><img src="https://blog.alexellis.io/content/images/2020/01/seq.png" alt="seq"></p>
<h3 id="buildwithbuildkitanddocker">Build with Buildkit and Docker</h3>
<p>This is the easiest change of all to make, and gives a fast build too.</p>
<pre><code>DOCKER_BUILDKIT=1 faas-cli build -f build-test.yml
</code></pre>
<p>We'll see that with this approach, the Docker daemon automatically switches out its builder for buildkit.</p>
<p>Buildkit offers a number of advantages:</p>
<ul>
<li>More sophisticated caching</li>
<li>Running later instructions first, when possible - i.e. downloading the "runtime" image, before the build in the "sdk" layer is even completed</li>
<li>Super fast when building a second time</li>
</ul>
<p>With buildkit, all of the base images can be pulled in to our local library at once, since the FROM (download) commands are not executed sequentially.</p>
<pre><code>FROM openfaas/of-watchdog:0.7.3 as watchdog
FROM golang:1.13-alpine3.11 as build
FROM alpine:3.11
</code></pre>
<p>This option works even on a Mac, since buildkit is proxied via the Docker daemon running in the VM.</p>
<p><img src="https://blog.alexellis.io/content/images/2020/01/dkit.png" alt="dkit"></p>
<h3 id="buildwithbuildkitstandalone">Build with Buildkit standalone</h3>
<p>To build with Buildkit in a stand-alone setup we need to run buildkit separately on a Linux host, so we can't use a Mac.</p>
<p><code>faas-cli build</code> would normally execute or fork <code>docker</code>, because the command is just a wrapper. So to bypass this behaviour we should write out a build context, that's possible via the following command:</p>
<pre><code>faas-cli build -f build-test.yml --shrinkwrap

[0] &gt; Building build-test.
Clearing temporary build folder: ./build/build-test/
Preparing ./build-test/ ./build/build-test//function
Building: alexellis2/build-test:latest with golang-middleware template. Please wait..
build-test shrink-wrapped to ./build/build-test/
[0] &lt; Building build-test done in 0.00s.
[0] Worker done.

Total build time: 0.00
</code></pre>
<p>Our context is now available in the <code>./build/build-test/</code> folder with our function code and the template with its entrypoint and Dockerfile.</p>
<pre><code>./build/build-test/
├── Dockerfile
├── function
│   └── handler.go
├── go.mod
├── main.go
└── template.yml

1 directory, 5 files
</code></pre>
<p>Now we need to run buildkit, we can build from source, or grab upstream binaries.</p>
<pre><code>curl -sSLf https://github.com/moby/buildkit/releases/download/v0.6.3/buildkit-v0.6.3.linux-amd64.tar.gz | sudo tar -xz -C /usr/local/bin/ --strip-components=1
</code></pre>
<p>If you checkout the releases page, you'll also find buildkit available for armhf and arm64, which is great for multi-arch.</p>
<p>Run the buildkit daemon in a new window:</p>
<pre><code>sudo buildkitd 
WARN[0000] using host network as the default            
INFO[0000] found worker "l1ltft74h0ek1718gitwghjxy", labels=map[org.mobyproject.buildkit.worker.executor:oci org.mobyproject.buildkit.worker.hostname:nuc org.mobyproject.buildkit.worker.snapshotter:overlayfs], platforms=[linux/amd64 linux/386] 
WARN[0000] skipping containerd worker, as "/run/containerd/containerd.sock" does not exist 
INFO[0000] found 1 workers, default="l1ltft74h0ek1718gitwghjxy" 
WARN[0000] currently, only the default worker can be used. 
INFO[0000] running server on /run/buildkit/buildkitd.sock 
</code></pre>
<p>Now let's start a build, passing in the shrink-wrapped location as the build-context. The command we want is <code>buildctl</code>, buildctl is a client for the daemon and will configure how to build the image and what to do when it's done, such as exporting a tar, ignoring the build or pushing it to a registry.</p>
<pre><code>buildctl build --help
NAME:
   buildctl build - build

USAGE:
   
  To build and push an image using Dockerfile:
    $ buildctl build --frontend dockerfile.v0 --opt target=foo --opt build-arg:foo=bar --local context=. --local dockerfile=. --output type=image,name=docker.io/username/image,push=true
  

OPTIONS:
   --output value, -o value  Define exports for build result, e.g. --output type=image,name=docker.io/username/image,push=true
   --progress value          Set type of progress (auto, plain, tty). Use plain to show container output (default: "auto")
   --trace value             Path to trace file. Defaults to no tracing.
   --local value             Allow build access to the local directory
   --frontend value          Define frontend used for build
   --opt value               Define custom options for frontend, e.g. --opt target=foo --opt build-arg:foo=bar
   --no-cache                Disable cache for all the vertices
   --export-cache value      Export build cache, e.g. --export-cache type=registry,ref=example.com/foo/bar, or …</code></pre></div></section></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.alexellis.io/building-containers-without-docker/">https://blog.alexellis.io/building-containers-without-docker/</a></em></p>]]>
            </description>
            <link>https://blog.alexellis.io/building-containers-without-docker/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957887</guid>
            <pubDate>Sun, 01 Nov 2020 07:54:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I No Longer Tell My Friends about Anki/SuperMemo]]>
            </title>
            <description>
<![CDATA[
Score 63 | Comments 82 (<a href="https://news.ycombinator.com/item?id=24957617">thread link</a>) | @kioleanu
<br/>
October 31, 2020 | https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/ | <a href="https://web.archive.org/web/*/https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><p>This article <a href="https://www.lesswrong.com/posts/6NvbSwuSAooQxxf7f/beware-of-other-optimizing">Beware of Other-Optimizing</a> by Eliezer Yudkowsky is highly illuminating. I recommend you read it through the lens of “recommending Anki to a friend.” This article is about the problems of giving advice on how to learn.</p>
<h2>Spreading the “gospel” to the world</h2>
<p>If you deeply believe something, along the lines of “if everyone did it, the world would be much better off.” and have tried convincing other people to do that thing, then you will realize it’s almost impossible to change others’ opinions or behaviors.</p>
<p>Maybe you’re not that ambitious to convince everyone, so you start small: you share it with your friends, but then discovered nobody actually cares or realizes its significance. A mild version is like <a href="https://www.deathbulge.com/comics/206">showing your favorite TV show and they don’t care</a>:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/acb04/deathbulge.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="deathbulge" title="deathbulge" src="https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/1c72d/deathbulge.jpg" srcset="https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/a80bd/deathbulge.jpg 148w,
https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/1c91a/deathbulge.jpg 295w,
https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/1c72d/deathbulge.jpg 590w,
https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/acb04/deathbulge.jpg 750w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>My faith in evidence-based learning strategies is informed by my personal experience and <a href="https://www.masterhowtolearn.com/2020-02-25-how-to-learn-about-meta-learning-my-resource-list">my meta-learning list</a>. I wholeheartedly believe Spaced Repetition Software (SRS) like SuperMemo and Anki is the key to effective and efficient learning. If you believe education is the future, then the knowledge about evidence-based learning strategies is one big key to unlocking that future, both individually and collectively.</p>
<h2>“Doing this every day seems very tiring.”</h2>
<p>Two years ago I was doing my Anki reps. One friend glanced over and was interested in what I was doing.</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/ee745/myTime.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="My time has come" title="My time has come" src="https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/1c72d/myTime.jpg" srcset="https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/a80bd/myTime.jpg 148w,
https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/1c91a/myTime.jpg 295w,
https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/1c72d/myTime.jpg 590w,
https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/ee745/myTime.jpg 660w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>We ate lunch together while I was giving her a little presentation. I talked <em>very enthusiastically</em> about spaced repetition, basic memory science and Anki operations. Of course I had to show her the infamous forgetting curve:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/8aab1/forgetting-curve-wired-wozniak.webp" target="_blank" rel="noopener">
    <span></span>
  <img alt="forgetting-curve" title="forgetting-curve" src="https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/5ca24/forgetting-curve-wired-wozniak.webp" srcset="https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/cbe2e/forgetting-curve-wired-wozniak.webp 148w,
https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/3084c/forgetting-curve-wired-wozniak.webp 295w,
https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/5ca24/forgetting-curve-wired-wozniak.webp 590w,
https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/8aab1/forgetting-curve-wired-wozniak.webp 630w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>She sounded excited about the possibility of finally mastering a second language. But at one point she was confused:</p>
<blockquote>
<p>“If I hadn’t learned it how could I recall it from memory?”</p>
</blockquote>
<p>So I explained that assessment <strong>for</strong> learning (testing as a means of learning) is different from assessment <strong>of</strong> learning (finding out what you’ve learned). The act of “recalling from memory” is itself a learning process. Then I was aware that her confusion was probably due to a common misconception about memory: human memory works like computer memory:</p>
<blockquote>
<p>The functional architecture of how humans forget, remember, and learn is <strong>unlike</strong> the corresponding processes in man-made devices […] We think of ourselves as working like computers, we become prone to assuming that exposing ourselves to information and procedures will lead to storage (i.e., recording) of such information or procedures in our memories—that the information will write itself in one’s memory.</p>
<p>If we think of human memory equals to memory in a computer, we are unlikely to appreciate that retrieving information from our memory increases the subsequent accessibility of that information, while retrieving information from computer memory leaves the status of that information unperturbed. <a href="https://www.taylorfrancis.com/books/e/9780203842539/chapters/10.4324%2F9780203842539-6">On the Symbiosis of Remembering, Forgetting, and Learning</a></p>
</blockquote>
<p>Side note: this story might give you the impression that I liked to show off what I know. No not really. I like to be convinced with evidence, and I thought others were the same. I was wrong. Also, I included the above quotes for the sake of convincing you, the reader. I didn’t obfuscate the subject matter further with phrases like assessment <strong>for</strong> learning and assessment <strong>of</strong> learning.</p>
<p>She looked… befuddled. Sort of like this:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/c08c5/AwkwardSmile.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="awkwardSmile" title="awkwardSmile" src="https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/1c72d/AwkwardSmile.jpg" srcset="https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/a80bd/AwkwardSmile.jpg 148w,
https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/1c91a/AwkwardSmile.jpg 295w,
https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/1c72d/AwkwardSmile.jpg 590w,
https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/c08c5/AwkwardSmile.jpg 640w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>I remember I was so excited and nervous at the same time that I was fumbling for words, trying to simplify it as much as I could. In retrospect, I was making things worse.</p>
<p>She’d listen to me quite intently, signaling that she was thinking and trying to figure it out, but I could tell she was still confused. And the more I explained, the deeper the rabbit hole went (like keep clicking hyperlinks in Wikipedia), and the more confused she became, so I stopped talking to stop making the whole situation uncomfortable. The following monologue is how I imagine what she was thinking at the time:</p>
<blockquote>
<p>“He’s so passionate about this stuff and so sure of himself that I guess he’s right.”</p>
</blockquote>
<blockquote>
<p>“I’m not really sure what he means. I do want to learn Japanese but the stuff he’s talking about is so confusing…”</p>
</blockquote>
<blockquote>
<p>“I was indeed interested in the beginning, but I don’t really care at this point. I’m just going to pretend I understand and end this whole conversation asap.”</p>
</blockquote>
<p>I will never forget what she said at one point,</p>
<blockquote>
<p>“Doing this every day seems very tiring.”</p>
</blockquote>
<p>I was like “Yeah…” I never followed up on her progress. I figured if she was truly interested, when she bumped into problem she would ask for my help. As expected, we never talked about it and I never mentioned Anki again.</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/0b533/sadFrog.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="sadFrog" title="sadFrog" src="https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/0b533/sadFrog.png" srcset="https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/12f09/sadFrog.png 148w,
https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/e4a3f/sadFrog.png 295w,
https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/0b533/sadFrog.png 500w" sizes="(max-width: 500px) 100vw, 500px" loading="lazy">
  </a>
    </span></p>
<p>These has happened countless times. I usually look nonchalant on the outside but dying on the inside. People looked interested (probably due to my enthusiasm and it’s impolite to look otherwise) and then never actually bothered to use Anki. Some would actually try, make a few cards, do the reps for a few days and then say, “I tried and Anki doesn’t work.”</p>
<p>I’m probably over my head, but sometimes it feels like I’m personally attacked, that what I’m saying is not valuable. I understand it’s not true, but it took me years to study the learning science and to gain the experience with Anki/SuperMemo. The fact that they’re dismissing the software feels like they’re dismissing my knowledge and experience.</p>
<h2>The problems of giving advice on how to learn</h2>
<h3>#1. Nobody cares <em>that</em> much, alright?</h3>
<p>When I first discovered Anki I was like, “How come no one around me knows this?! I need to share this to everyone!” So I would tell my friends about Anki but nobody was interested. I’ve introduced Anki to people and every time it’s a very frustrating experience. (Surprise surprise, not SuperMemo. The learning curve of Anki is much lower. What chance do I have if I preached SuperMemo when they even think Anki is too hard to use?)</p>
<p>Update: I was never a missionary and randomly went out my way to tell people about Anki all the time like this:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/737f1/thejenkinscomicVim.webp" target="_blank" rel="noopener">
    <span></span>
  <img alt="vim" title="vim" src="https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/737f1/thejenkinscomicVim.webp" srcset="https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/cbe2e/thejenkinscomicVim.webp 148w,
https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/3084c/thejenkinscomicVim.webp 295w,
https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/737f1/thejenkinscomicVim.webp 585w" sizes="(max-width: 585px) 100vw, 585px" loading="lazy">
  </a>
    </span></p>
<p><a href="https://thejenkinscomic.wordpress.com/">Source</a></p>
<p>Very early on I did give unsolicited advice once to my best friend by intentionally bringing up Anki. Then I did bring up Anki on multiple occasions, but only when the opportunity presented itself, like the story above.</p>
<p>People may be interested in how you’ve developed a skill or become fluent in a foreign language, but just not <strong>that</strong> interested. And they certainly don’t expect to be suddenly lectured on how learning and memory work.</p>
<p>I never liked following up to people with questions like “So how’s Anki? Have you used it?” It feels like pushing an agenda to them. Also, since most would not even bother buying and downloading the app, their response is usually, “I forgot about it. I’ll do it later.” and the conversation would end in an awkward tone.</p>
<h3>#2. I’m not sure if I actually want it, alright?</h3>
<p>Sometimes people keep lamenting “I want to learn X or I want to get better grades.” How many times do you hear people say they want to learn a second language? This is like that friend who keeps saying “I want to lose weight”. Probably after all, they’re just lamenting and not yet ready to put in the effort to change.</p>
<p>Trying to convince others to use Anki/SuperMemo is like trying to convince your friends to go to the gym regularly. You can talk about the benefits of exercising/weight-lifting, how good you’ll feel afterwards, how much more productive you’ll be and so on. But nothing will work if they don’t try it in the first place, and it doesn’t help that spaced repetition doesn’t work in the short-term since using Spaced Repetition Software is a life-long pursuit (just as learning is):</p>
<blockquote>
<p>This long term focus may explain why explicit spaced repetition is an uncommon studying technique: the pay-off is distant &amp; counterintuitive, the cost of self-control near &amp; vivid. <a href="https://www.gwern.net/Spaced-repetition">Gwern’s Spaced Repetition for Efficient Learning</a></p>
</blockquote>
<h3>#3. Why are you so hyped about it?</h3>
<p>It’s rare if people could understand and realize the significance and application of Spaced Repetition Software in a casual 10-min chat. It’s not about the complexity (it’s not rocket science after all), but rather it’s about awareness: problems with current learning approaches and how Anki/SuperMemo could solve the problems. In other words, if I don’t see the problems, why bother changing?</p>
<p>I have a friend who was learning German. She copied German vocabulary on one side and the equivalent English on the other in a notebook. I showed her my Korean Anki cards: “Take a look at these beautiful images! Gifs! Sentence cards! Audio clips! Mass Immersion Approach! (Former: All Japanese All The Time (AJATT)), Stephen Krashen’s Input Hypothesis!” Then I had another friend who was studying to become a nurse. I told him about Anki: “Image occlusion for anatomy!” It felt wrong of me to be hiding Anki (<a href="https://ankiweb.net/shared/info/1374772155">Image Occlusion</a> to be specific) from him. Deep down I want to shove their faces to this table:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/91608/UtilityAssessment.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="UtilityAssessment" title="UtilityAssessment" src="https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/fcda8/UtilityAssessment.png" srcset="https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/12f09/UtilityAssessment.png 148w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/e4a3f/UtilityAssessment.png 295w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/fcda8/UtilityAssessment.png 590w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/efc66/UtilityAssessment.png 885w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/c83ae/UtilityAssessment.png 1180w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/91608/UtilityAssessment.png 1251w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>(Image source: <a href="https://journals.sagepub.com/stoken/rbtfl/Z10jaVH/60XQM/full">Improving Students’ Learning With Effective Learning Techniques</a>)</p>
<p>I was exaggerating but you get the point: it’s not possible to convey the significance and application of it all in a casual 10-min chat. With the benefit of hindsight, all my attempts could’ve been a lot better:</p>
<ul>
<li>Maybe I was so convinced and have so much faith in Spaced Repetition Software that I came off as condescending, giving off the impression like “you don’t know how to study; let me teach you.”</li>
<li>Maybe it’s the bold claims: “You’ll get 2x results with half the study time.” (How many are really true whenever you hear such claim?)</li>
<li>Maybe it’s the situation: all he or she wants is someone to listen about the difficulty of studying, not some real advice or suggestions.</li>
</ul>
<p>Here’s the guy from <a href="http://brianjx.altervista.org/">How I Passed the Demanding […] Italian Language Exam Without Going to Italy – Here’s a Hint: the 326,538 Flashcard Reviews Helped a Lot.</a></p>
<blockquote>
<p>Like many language teachers, V. had never heard of Anki (but she did know Reverso Context). I showed her how I studied Italian …</p></blockquote></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/">https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/</a></em></p>]]>
            </description>
            <link>https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957617</guid>
            <pubDate>Sun, 01 Nov 2020 06:33:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Visualizing Git Concepts with D3]]>
            </title>
            <description>
<![CDATA[
Score 241 | Comments 25 (<a href="https://news.ycombinator.com/item?id=24957280">thread link</a>) | @gilad
<br/>
October 31, 2020 | https://onlywei.github.io/explain-git-with-d3/ | <a href="https://web.archive.org/web/*/https://onlywei.github.io/explain-git-with-d3/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div id="ExplainGitCommit-Container">
      <p>
        We are going to skip instructing you on how to add your files for commit in this explanation.
        Let's assume you already know how to do that. If you don't, go read some other tutorials.
      </p>
      <p>
        Pretend that you already have your files staged for commit and enter <span>git commit</span>
        as many times as you like in the terminal box.
      </p>
      
    </div>
    <div id="ExplainGitTag-Container">
      <p>
        <span>git tag name</span> will create a new tag named "name".
        Creating tags just creates a new tag pointing to the currently checked out commit.
      </p>
      <p>
        Tags can be deleted using the command <span>git tag -d name</span> (coming soon).
      </p>
      <p>
        Type <span>git commit</span> and <span>git tag</span> commands
        to your hearts desire until you understand this concept.
      </p>
      
    </div>
    <div id="ExplainGitBranch-Container">
      <p>
        <span>git branch name</span> will create a new branch named "name".
        Creating branches just creates a new tag pointing to the currently checked out commit.
      </p>
      <p>
        Branches can be deleted using the command <span>git branch -d name</span>.
      </p>
      <p>
        Type <span>git commit</span> and <span>git branch</span> commands
        to your hearts desire until you understand this concept.
      </p>
      
    </div>
    <div id="ExplainGitCheckout-Container">
      <p>
        <span>git checkout</span> has many uses,
        but the main one is to switch between branches.<br>
        For example, to switch from master branch to dev branch,
        I would type <span>git checkout dev</span>.
        After that, if I do a git commit, notice where it goes. Try it.
      </p>
      <p>
        In addition to checking out branches, you can also checkout individual commits. Try it.<br>
        Make a new commit and then type <span>git checkout bb92e0e</span>
        and see what happens.
      </p>
      <p>
        Type <span>git commit</span>, <span>git branch</span>,
        and <span>git checkout</span> commands to your hearts desire
        until you understand this concept.
      </p>
      
    </div>
    <div id="ExplainGitCheckout-b-Container">
      <p>
        You can combine <span>git branch</span> and <span>git checkout</span>
        into a single command by typing <span>git checkout -b branchname</span>.
        This will create the branch if it does not already exist and immediately check it out.
      </p>
      
    </div>
    <div id="ExplainGitReset-Container">
      <p>
        <span>git reset</span> will move HEAD and the current branch back to wherever
        you specify, abandoning any commits that may be left behind. This is useful to undo a commit
        that you no longer need.
      </p>
      <p>
        This command is normally used with one of three flags: "--soft", "--mixed", and "--hard".
        The soft and mixed flags deal with what to do with the work that was inside the commit after
        you reset, and you can read about it <a href="http://git-scm.com/2011/07/11/reset.html">here</a>.
        Since this visualization cannot graphically display that work, only the "--hard" flag will work
        on this site.
      </p>
      <p>
        The ref "HEAD^" is usually used together with this command. "HEAD^" means "the commit right
        before HEAD. "HEAD^^" means "two commits before HEAD", and so on.
      </p>
      <p>
        Note that you must <b>never</b> use <span>git reset</span> to abandon commits
        that have already been pushed and merged into the origin. This can cause your local repository
        to become out of sync with the origin. Don't do it unless you really know what you're doing.
      </p>
      
    </div>
    <div id="ExplainGitRevert-Container">
      <p>
        To undo commits that have already been pushed and shared with the team, we cannot use the
        <span>git reset</span> command. Instead, we have to use <span>git revert</span>.
      </p>
      <p>
        <span>git revert</span> will create a new commit that will undo all of the work that
        was done in the commit you want to revert.
      </p>
      
    </div>
    <div id="ExplainGitMerge-Container">
      <p>
        <span>git merge</span> will create a new commit with two parents. The resulting
        commit snapshot will have the all of the work that has been done in both branches.
      </p>
      <p>
        If there was no divergence between the two commits, git will do a "fast-forward" method merge.<br>
        To see this happen, checkout the 'ff' branch and then type <span>git merge dev</span>.
      </p>
      
    </div>
    <div id="ExplainGitRebase-Container">
      <p>
        <span>git rebase</span> will take the commits on this branch and "move" them so that their
        new "base" is at the point you specify.
      </p>
      <p>
        You should pay close attention to the commit IDs of the circles as they move when you do this exercise.
      </p>
      <p>
        The reason I put "move" in quotations because this process actually generates brand new commits with
        completely different IDs than the old commits, and leaves the old commits where they were. For this reason,
        you never want to rebase commits that have already been shared with the team you are working with.
      </p>
      
    </div>
    <div id="ExplainGitFetch-Container">
      <p>
        <span>git fetch</span> will update all of the "remote tracking branches" in your local repository.
        Remote tracking branches are tagged in grey.
      </p>
      
    </div>
    <div id="ExplainGitPull-Container">
      <p>
        A <span>git pull</span> is a two step process that first does a <span>git fetch</span>,
        and then does a <span>git merge</span> of the remote tracking branch associated with your current branch.
        If you have no current branch, the process will stop after fetching.
      </p>
      <p>
        If the argument "--rebase" was given by typing <span>git pull --rebase</span>, the second step of
        pull process will be a rebase instead of a merge. This can be set to the default behavior by configuration by typing:
        <span>git config branch.BRANCHNAME.rebase true</span>.
      </p>
      
    </div>
    <div id="ExplainGitPush-Container">
      <p>
        A <span>git push</span> will find the commits you have on your local branch that the corresponding branch
        on the origin server does not have, and send them to the remote repository.
      </p>
      <p>
        By default, all pushes must cause a fast-forward merge on the remote repository. If there is any divergence between
        your local branch and the remote branch, your push will be rejected. In this scenario, you need to pull first and then
        you will be able to push again.
      </p>
      
    </div>
    <div id="ExplainGitClean-Container">
      <p>
        One simple example of the use of <span>git reset</span> is to completely restore your local repository
        state to that of the origin.<br>
        You can do so by typing <span>git reset origin/master</span>.
      </p>
      <p>
        Note that this won't delete untracked files, you will have to delete those separately with
        the command <span>git clean -df</span>.
      </p>
      
    </div>
    <div id="ExplainGitFetchRebase-Container">
      <p>
        Below is a situation in which you are working in a local branch that is all your own. You want to receive the latest code
        from the origin server's master branch. To update your local branch, you can do it without having to switch branches!
      </p>
      <p>
        First do a <span>git fetch</span>, then type <span>git rebase origin/master</span>!
      </p>
      
    </div>
    <div id="ExplainGitDeleteBranches-Container">
      <p>
        <span>git branch -d</span> is used to delete branches.
        I have pre-created a bunch of branches for you to delete in the playground below.
        Have at it.
      </p>
      
    </div>
    <div id="ExplainGitFree-Container">
      <p>
        Do whatever you want in this free playground.
      </p>
      
    </div>
  </div></div>]]>
            </description>
            <link>https://onlywei.github.io/explain-git-with-d3/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957280</guid>
            <pubDate>Sun, 01 Nov 2020 04:43:47 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Toronto-area lawyer had to flee Canada after taking on the tow truck industry]]>
            </title>
            <description>
<![CDATA[
Score 416 | Comments 232 (<a href="https://news.ycombinator.com/item?id=24957200">thread link</a>) | @walterbell
<br/>
October 31, 2020 | https://www.ctvnews.ca/w5/this-toronto-area-lawyer-had-to-flee-the-country-after-taking-on-the-tow-truck-industry-1.5167869 | <a href="https://web.archive.org/web/*/https://www.ctvnews.ca/w5/this-toronto-area-lawyer-had-to-flee-the-country-after-taking-on-the-tow-truck-industry-1.5167869">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <p>TORONTO -- 
	Lisa Carr never thought her work would lead to armed threats, a firebombing, a shooting and a conspiracy to kill her.</p>
<p>
	The Carr Law office is in a nondescript strip mall in Vaughan, Ont., north of Toronto. It’s closed now, after the litigation lawyer says police told her they could no longer protect her.</p>
<p>
	She was shuttled to another country where she spent five long months in hiding. Carr has never before told her story, but agreed to meet for an interview as part of a W5 investigation into the shady underbelly of an industry that forced her to give up her business and almost cost her, her life: The tow truck industry.</p>
<p>
	Over the last number of years, criminal elements have been battling for lucrative control of the major highways around the Toronto area. It has resulted in more than 50 arsons, multiple shootings and at least four murders.</p>
<p>
	So why is there so much violence over a couple of hundred-dollar tows at the side of the road? Because that one tow can net tens of thousands of dollars.</p>
<p>
	Here’s how it works: The tow truck driver gets a kickback from an unscrupulous auto body shop, which then submits wildly inflated repair fees to an insurance company.</p>
<p>
	<img alt="york police" src="https://www.ctvnews.ca/polopoly_fs/1.4954903!/httpImage/image.jpg_gen/derivatives/landscape_960/image.jpg"></p>
<p>
	The insurance industry estimates that fake repair bills tally up to $2 billion a year in Canada. And that’s why Carr was in the crosshairs. She was hired by an insurance company to challenge bogus claims.</p>
<p>
	Over the course of a number of months, Carr’s law firm was the target of increasingly violent attacks. First a firebombing and then her office was set on fire.</p>
<p>
	Months later, in broad daylight, a colleague leaving work had a gun put to her head and was told, “Stop suing our friends.” Shortly after that, again in broad daylight, someone opened fire through the front door of the busy office.</p>
<p>
	Carr says it is incredible no one was struck by the flurry of bullets.</p>
<p>
	“I looked down the hall and I saw my receptionist on her hands and knees surrounded by glass. And one of the other girls came running at me saying, ‘Shots fired, shots fired. Call 911.’”</p>
<p>
	While the violence surrounding the tow truck industry has made headlines in the Greater Toronto Area, the story that has never been told is that York Regional Police (YRP) uncovered a plot to kill Carr.</p>
<p>
	It was such a credible threat that they gave her an hour to pack up her belongings and leave her home. Carr and her husband were then whisked out of the country and spent five months in hiding.</p>
<p>
	Three separate police services – YRP, Toronto Police Service and Ontario Provincial Police – joined forces to launch Project Platinum to investigate the violence associated with the tow truck industry.</p>
<p>
	They carried out a series of raids this past spring, which netted dozens of high-powered weapons and led to the arrests of 35 people who face almost 500 charges, including the attempted murder of Carr.</p>
<p>
	<img alt="weapon" src="https://www.ctvnews.ca/polopoly_fs/1.4954983!/httpImage/image.jpg_gen/derivatives/landscape_960/image.jpg"></p>
<p>
	Now back in Canada, Carr says police have told her she is likely no longer in danger, but with one caveat.</p>
<p>
	“The police said we believe the risk is low. As long as you don't go back to work, as long as you don't restart the firm,” she says.</p>
<p>
	“So they have effectively ended my career. We lost everything. They won.”</p>
                                              </div></div>]]>
            </description>
            <link>https://www.ctvnews.ca/w5/this-toronto-area-lawyer-had-to-flee-the-country-after-taking-on-the-tow-truck-industry-1.5167869</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957200</guid>
            <pubDate>Sun, 01 Nov 2020 04:20:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Simple Image Vectorization]]>
            </title>
            <description>
<![CDATA[
Score 124 | Comments 14 (<a href="https://news.ycombinator.com/item?id=24957120">thread link</a>) | @thesephist
<br/>
October 31, 2020 | https://wordsandbuttons.online/simple_image_vectorization.html | <a href="https://web.archive.org/web/*/https://wordsandbuttons.online/simple_image_vectorization.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    
    <p>
Vectorization is when you take some minecraft-style raster image and make a crisp vector picture out of it.
    </p>
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/Bitmap_VS_SVG.svg">
    
    <p>
It's especially useful when you want to turn a satellite photo into a map. Or if you want to scan some blueprint and turn it into a CAD model. Or if you want to reissue an old game and you don't want to redraw all the artwork from scratch.
    </p>
    <p>
The algorithm I'm going to show you has nothing to do with all these things. It's a basic vectorization technique which, in its original form, has little to none applications in the industry.
    </p>
    <p>
On the plus side, it illustrates the approach rather well. It shows how things like bilinear interpolation, gradient descent, and parametric splines work together to solve a real-world problem. At the very least, it makes learning about all these things a little more compelling.
    </p>

    <h2>
An input image
    </h2>
    <p>
A raster image is essentially a rectangular table of things. If it's a full-color RGB, then it's a table of color pixels. Color pixels are the triplets of 8-bit integer values where each value represents an amount of red, green, and blue color.
    </p>
    <p>
Medical images, such as obtained from computed tomography, are usually the tables of 12-bit or 16-bit integers. It's not a color really since the values come from invisible X-ray radiation, but they are called gray values nevertheless.
    </p>
    <p>
Satellite images may have a lot of channels. Apart from the colors of the visible specter they may contain ultra-violet and infra-red luminosity. Channels may be represented by integers or floating point values.
    </p>
    <p>
Our image will be a simple gray-scale bitmap.
    </p>
    <canvas id="greyscale_canvas" width="640" height="640"></canvas>
    <p>
Technically, we can already turn it into vectors rather easily. Let's just agree on some threshold, and mark the contour of all the pixels that have the values exceeding this threshold.
    </p>
    <canvas id="greyscale_canvas_contour" width="640" height="640"></canvas>
    <p>
Well, it's simple, but it's not what we wanted. We want curves, not corners. And for that, we have to make our image less cornery.
    </p>
    <h2>
<span id="index_image_interpolation">Image interpolation</span>
    </h2>
    <p>
Let's say our image is not a table of values. Let's say we only know the values in the centers of the pixels, and we have to guess the values between them somehow.
    </p>
    <p>
This is called interpolation. The simplest case would be the nearest neighbor interpolation, where for every point on an image, the value is the value from the nearest pixel's center. But this simply turns it back into a table.
    </p>
    <p>
A little more advanced is the <span id="index_bilinear_interpolation">bilinear interpolation</span>. The value is the linear sum of the four neighboring values. It looks like this.
    </p>
    <div>
    <pre id="code_1">// pixel value with out of bounds checks
function pixel_in(pixels, i, j) {
    if(i &gt;= pixels.length)
        return pixel_in(pixels, pixels.length-1, j);
    if(i &lt; 0)
        return pixel_in(pixels, 0, j);
    if(j &gt;= pixels[0].length)
        return pixel_in(pixels, i, pixels[0].length-1);
    if(j &lt; 0)
        return pixel_in(pixels, i, 0);
    return pixels[i][j];
}

// linear interpolation
function value_in(pixels, x, y) {
    var j = Math.floor(x - 0.5);
    var tj = x - 0.5 - j;
    var i = Math.floor(y - 0.5);
    var ti = y - 0.5 - i;
    return pixel_in(pixels, i, j) * (1 - ti) * (1 - tj)
         + pixel_in(pixels, i, j+1) * (1 - ti) * (tj)
         + pixel_in(pixels, i+1, j+1) * (ti) * (tj)
         + pixel_in(pixels, i+1, j) * (ti) * (1 - tj);
}
    </pre>
    </div>
    <p>
If we darken the pixels where the interpolated value meets the threshold, we'll get some kind of a contour.
    </p>
    <canvas id="interpolation_canvas" width="640" height="640"></canvas>
    
    <p>
There are other methods. Plenty of them. But linear interpolation solves the cornery border problem just fine. Although, the border we see is just the borderline of some threshold. It's not a vector representation yet.
    </p>

    <h2>
Turning an interpolated image into a contour
    </h2>
    <p>
We can borrow an idea from the <a href="https://wordsandbuttons.online/the_simplest_possible_smooth_contouring_algorithm.html">simplest possible smooth contouring</a> algorithm. We'll build an initial border from the source pixels, and then we'll use our linearly interpolated image to find the best place to put each contour point so the image value will meet the threshold value.
    </p>
    <p>
When you have a <span id="index_distance_field">distance field</span>, it's easy. A distance field is when for any point in space you can tell how far it lies from the surface you want. It's basically a function from point in space to distance.
    </p>
    <p>
You take its gradient, take the difference between the value you have and the threshold value. Since it's the distance field, the value difference is exactly the distance you should move your point for. And the gradient is the exact opposite direction. You just inverse, multiply, add — and you're there.
    </p>
    <p>
Unfortunately, we don't have a distance field. We have a continuous image which only resembles one.
    </p>
    <p>
But the principle still works. If you traverse against the gradient, you will get closer to the threshold value. And the more the difference, the further you have to go. It's just you wouldn't always get there in one try.
    </p>
    <p>
So let's try several times then. Let's make an <a href="https://wordsandbuttons.online/interactive_introduction_to_iterative_algorithms.html">iterative algorithm</a> out of it.
    </p>
    <div>
    <pre id="code_2">// gradient
function gradient(pixels, x, y) {
    const eps = 1e-5;
    return [(value_in(pixels, x + eps, y) - value_in(pixels, x, y)) / eps,
            (value_in(pixels, x, y + eps) - value_in(pixels, x, y)) / eps];
}

// how far should you shift the point to meet the isoline
// if value_in were a distance function
function gradient_shift(pixels, threshold, x, y) {
    var g = gradient(pixels, x, y);
    var g_norm = Math.sqrt(g[0]*g[0] + g[1]*g[1]);
    var d = threshold - value_in(pixels, x, y);
    return [g[0] * d / g_norm / g_norm, g[1] * d / g_norm / g_norm];
}

// brings a point closer to the threshold isoline
function fit_point_better(pixels, threshold, point) {
    const ok_error = 1/255;
    if(Math.abs(value_in(pixels, point[0], point[1]) - threshold) &lt; ok_error)
        return point;
    gs = gradient_shift(pixels, threshold, point[0], point[1])
    var new_point = [point[0] + gs[0], point[1] + gs[1]];
    return fit_point_better(pixels, threshold, new_point);
}
    </pre>
    </div>
    <p>
We'll move our contour points against the gradient until we're close enough to the threshold
    </p>
    <canvas id="fitting_canvas" width="640" height="640"></canvas>
        
    <p>
That's good but we can do better. Let's make the contour smooth.
    </p>

    <h2>
Cubic splines
    </h2>
    <p>
All we have to do to make the contour smooth is to turn each line segment into a parametric cubic curve.
    </p>
    <p>
It's probably sounds more complicated than it is. A parametric cubic curve is just a pair of polynomials. If you have the points and partial derivatives in this points, you can get the coefficients for them from this pair of <a href="https://wordsandbuttons.online/programmers_introduction_to_linear_equations.html">linear systems</a>:
    </p>
    <div><p>
Px(t<sub>1</sub>)' = 3a<sub>x</sub>t<sub>1</sub><sup>2</sup> + 2b<sub>x</sub>t<sub>1</sub> + c = dx<sub>1</sub>/dt
<br>
Px(t<sub>1</sub>) = a<sub>x</sub>t<sub>1</sub><sup>3</sup> + b<sub>x</sub>t<sub>1</sub><sup>2</sup> + c<sub>x</sub>t<sub>1</sub> + d = x<sub>1</sub>
<br>
Px(t<sub>2</sub>) = a<sub>x</sub>t<sub>2</sub><sup>3</sup> + b<sub>x</sub>t<sub>2</sub><sup>2</sup> + c<sub>x</sub>t<sub>2</sub> + d = x<sub>2</sub>
<br>
Px(t<sub>2</sub>)' = 3a<sub>x</sub>t<sub>2</sub><sup>2</sup> + 2b<sub>x</sub>t<sub>2</sub> + c = dx<sub>2</sub>/dt
    </p><p>
    
Py(t<sub>1</sub>)' = 3a<sub>y</sub>t<sub>1</sub><sup>2</sup> + 2b<sub>y</sub>t<sub>1</sub> + c = dy<sub>1</sub>/dt
<br>
Py(t<sub>1</sub>) = a<sub>y</sub>t<sub>1</sub><sup>3</sup> + b<sub>y</sub>t<sub>1</sub><sup>2</sup> + c<sub>y</sub>t<sub>1</sub> + d = y<sub>1</sub>
<br>
Py(t<sub>2</sub>) = a<sub>y</sub>t<sub>2</sub><sup>3</sup> + b<sub>y</sub>t<sub>2</sub><sup>2</sup> + c<sub>y</sub>t<sub>2</sub> + d = y<sub>2</sub>
<br>
Py(t<sub>2</sub>)' = 3a<sub>y</sub>t<sub>2</sub><sup>2</sup> + 2b<sub>y</sub>t<sub>2</sub> + c = dy<sub>2</sub>/dt
    </p></div>
    <p>
The curve itself will then look like this.
    </p>
    <canvas id="cubic_canvas" width="640" height="640"></canvas>
    <p>
Even more, since we get to choose the parameter range, we can make it [0..1]. This greatly simplifies our system and makes it really easy to solve.
    </p>
    <p>
Here is the function that makes one array of polynomial coefficients from two pairs of point and tangent values.
    </p>
    <div>
    <pre id="code_3">// solver specific to [0..1] parametrized splines
function spline_for(p1, p1d, p2, p2d) {
//     A = [
//         [1, 0, 0, 0],
//         [0, 1, 0, 0],
//         [1, 1, 1, 1],
//         [0, 1, 2, 3]];
//     B = [p1, p1d, p2, p2d]
    return [
        p1,
        p1d,
        3*p2 - p2d - 3*p1 - 2*p1d,
        p2d + p1d - 2*p2 + 2*p1
    ];
}
    </pre>
    </div>
    <p>
The polynomial is then computed in every <i>t</i> with this function.
    </p>
    <div>
    <pre id="code_4">// polynomial
function polynomial_in_t(A, t){
    var pt = 0.0;
    for(var i = 0; i &lt; A.length; ++i){
        pt += A[i] * Math.pow(x, i);
    }
    return pt;
}
    </pre>
    </div>
    <p>
So for every line segment with tangents, we can make a parametric polynomial. There is one problem though. We don't have tangents.
    </p>
    <p>
We have the gradient, which is orthogonal to the tangent, but there are two possible tangents in every point. The tangent can be oriented left or right from the gradient.
    </p>
    <p>
But this is solvable. Let's just pick the direction we like and keep it consistent.
    </p>
    <p>
Let the curves that originally come from horizontally oriented segments always have both tangents that way that <i>dx &gt; 0</i>. And the ones that come from vertically oriented segments, will have <i>dy &gt; 0</i>.
    </p>
    <p>
It looks like we have enough parts to assemble an algorithm.
    </p>
    <h2>
Creating splines from the pixels
    </h2>
    <p>
Let's split our vectorization into two parts. First, we'll get points and tangents for every line segment from the pixels. Then we'll turn it all into polynomial splines.
    </p>
    <p>
The function that does the first part looks like this.
    </p>
    <div>
    <pre id="code_5">function turn_pixels_into_points_and_tangents(pixels, threshold) {
    var points = [];
    var tangents = [];

    // "horizontal" pieces
    for(var i = 0; i &lt;= pixels.length; i += 1) {
        var old_point = [];
        var old_tangent = [];
        for(var j = 0; j &lt;= pixels[0].length; j += 1) {
            // if right, left, top, and bottom pixels have a sign change,
            // there should be a spline there
            var sign_change_on_the_right  =
                (pixel_in(pixels, i-1, j+0) - threshold) *
                (pixel_in(pixels, i+0, j+0) - threshold) &lt; 0;
            var sign_change_on_the_left   =
                (pixel_in(pixels, i-1, j-1) - threshold) *
                (pixel_in(pixels, i+0, j-1) - threshold) &lt; 0;
            var sign_change_on_the_bottom =
                (pixel_in(pixels, i+0, j-1) - threshold) *
                (pixel_in(pixels, i+0, j+0) - threshold) &lt; 0;
            var sign_change_on_the_top    =
                (pixel_in(pixels, i-1, j-1) - threshold) *
                …</pre></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://wordsandbuttons.online/simple_image_vectorization.html">https://wordsandbuttons.online/simple_image_vectorization.html</a></em></p>]]>
            </description>
            <link>https://wordsandbuttons.online/simple_image_vectorization.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957120</guid>
            <pubDate>Sun, 01 Nov 2020 03:57:17 GMT</pubDate>
        </item>
    </channel>
</rss>
