<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 50]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 50. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Tue, 01 Sep 2020 12:29:00 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-50.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Tue, 01 Sep 2020 12:29:00 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[The rise and fall of the industrial R&D lab]]>
            </title>
            <description>
<![CDATA[
Score 55 | Comments 16 (<a href="https://news.ycombinator.com/item?id=24321799">thread link</a>) | @npalli
<br/>
August 29, 2020 | https://worksinprogress.co/issue/the-rise-and-fall-of-the-american-rd-lab/ | <a href="https://web.archive.org/web/*/https://worksinprogress.co/issue/the-rise-and-fall-of-the-american-rd-lab/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
					<div>
						<p><span>Once, small firms centred on inventors were responsible for most of our innovation. Larger firms might buy or exploit these steps forwards, but they did not typically make them. And then for a brief period, this changed: many of the best new products, tools, and ideas came from research labs within large corporations. This brief period also happened to be the era when scientific, technological, and economic productivity sped forward at its fastest ever clip. Yet almost as soon as it arrived, the fruitful period was over and we returned to a situation where small companies and small-business-like teams at universities developed innovations outside of large companies and sold them in a market for ideas. Though we might enjoy the innovation created by small flexible firms, we should not dismiss the contributions made by large corporate labs. The corporate lab may be creeping back, but aggressively prosecuting antitrust against large firms growing organically through in-house research could easily snuff this spark out.</span></p>
<h3>The USA’s first system of innovation</h3>
<p><span>When the USA began to contribute to the progress of technology, in the early 19th century, it was largely practically-minded, not based on deep scientific understanding. Rather, it largely consisted of individual inventors commercialising their own inventions. Whereas nuclear power depended on decades or centuries of progress in physics, many late 19th century innovations were more like the cotton gin, which came together through practical-minded trial and error in the field. By the late 19th century, the system had morphed into one we would find strangely familiar today: inventors invented, venture capitalists invested, and companies commercialised. The system even had </span><a href="https://www.cambridge.org/core/journals/business-history-review/article/patent-alchemy-the-market-for-technology-in-us-history/90991329A8D4A49EBF7B49D2EAD1CE7A"><span>patent lawyers</span></a><span> and </span><a href="https://www.hoover.org/sites/default/files/khan_ip2_working_paper.pdf"><span>non-practising entities</span></a>, <span>which own patents purely </span><a href="https://www.hbs.edu/businesshistory/Documents/BHR870102.pdf"><span>to litigate on their behalf</span></a><span>. There were still startups commercialising an idea and scaling it up themselves, but many inventors found that the division of labour enabled by the market ideas allowed them to </span><a href="https://www.cambridge.org/core/journals/business-history-review/article/patent-alchemy-the-market-for-technology-in-us-history/90991329A8D4A49EBF7B49D2EAD1CE7A"><span>focus on what they did best</span></a><span>.</span></p>
<p><span>Large firms were consumers of ideas created by inventors, and were sceptical of the value of doing in-house science. They believed it was easier to buy new science off the shelf. In 1885 T. D. Lockwood, head of American Bell Telephone Company’s patent department, said:&nbsp;</span></p>
<blockquote><p><span>“I am fully convinced that it has never, is not now, and never will pay commercially, to keep an establishment of professional inventors, or of men whose chief business it is to invent”</span></p></blockquote>
<p><span>Of course, Bell Labs itself later grew to be one of the marquees of commercial labs—in the late 1960s it employed 15,000 people including 1,200 PhDs, who between them made too many important inventions to list, from the transistor and the photovoltaic cell to the first digitally scrambled voice audio (in 1943) and the first complex number calculator (in 1939). Fourteen of its staff went on to win Nobel Prizes and five to win </span><a href="https://en.wikipedia.org/wiki/Turing_Award"><span>Turing Awards</span></a><span>. </span></p>
<p><span>The 1920s stock market boom was in large part driven by a huge rise in the value that investors </span><a href="https://pubs.aeaweb.org/doi/pdfplus/10.1257/aer.98.4.1370"><span>accorded to intangible capital</span></a><span> and ideas held within companies. A similar thing happened in the </span><a href="https://www.amazon.co.uk/Capitalism-Without-Capital-Intangible-Economy/dp/0691175039"><span>1990s Dot-com Bubble</span></a><span>. Between 1921 and 1927 the number of scientists and engineers in industrial labs more than doubled. When the stock market crashed and the Great Depression hit it caused a </span><a href="https://pdfs.semanticscholar.org/d71a/90cfa2d0d0d72f13724d27dd326209431974.pdf"><span>massive and persistent decline</span></a><span> in independent inventing and the startup-like activity around it. But large labs continued to boom, increasing staffing and research spending throughout the lean 1930s, and earning more patents. By 1930, most patents were issued to large firms, rather than independent innovators, and this gap only widened into the 1950s. The industrial lab had become king.</span></p>
<h3>Why labs work well</h3>
<p><span>The question of why the industrial lab works is a microcosm of the question of why the firm works in general. Economist Ronald Coase, who won the Nobel Prize in 1991 (and who lived to be 102) bookended the most productive period of his career with two insights about transaction costs. The first, published in 1937 and entitled </span><a href="https://onlinelibrary.wiley.com/doi/full/10.1111/j.1468-0335.1937.tb00002.x"><span>“The Nature of the Firm”</span></a><span>, tells us why firms exist. In economics, situations are typically approached from the perspective of competitive behaviour in open markets. Most of the things we buy are from open, competitive markets like these. But when we sell our labour, we are usually bound to a single “buyer”—our employer—for an extended period of time for everything we have to offer. If market competition is so efficient, why do we not set up mini-firms for every instance of cooperative work and receive pay in line with our output? Why do we instead generally sell a promise to do whatever our boss says within limits for certain hours of the day for months or years in advance?</span></p>
<p><span>The other, </span><a href="https://www.law.uchicago.edu/files/file/coase-problem.pdf"><span>“The Problem of Social Cost”</span></a><span>, reads like a reflection of the first. Published in 1960, it spawned the so-called Coase Theorem, which holds that so long as transaction costs—the costs of interacting with other individuals or institutions, such as the costs of drawing up and enforcing a contract—are low, people will contract to deal with the problems emerging from positive and negative externalities, like the benefits of a new park to a neighbourhood or the costs of pollution. Where transaction costs are too high, institutions and policies are needed to deal with the externalities instead.</span></p>
<p><span>Coase answers the question of why businesses exist as he answers the question of why people simply don’t contract away all externalities: transaction costs. If there is a cost on both sides every time one person wants to pay another for a task, then some tasks will not be worth paying for, or worth doing at the going rate. Concretely: an employer who does not negotiate contracts for each and every individual work unit can afford to offer higher wages, and an employee who does not do so can afford to accept lower wages. Companies organized in this way thus outcompete pure market organization—in cases where transaction costs are large.</span></p>
<p><span>In many ways, this general story for why firms exist also explains why large firm R&amp;D labs were so successful. The transaction costs of collaboration are extremely large, and prevent all sorts of potentially-valuable crossovers: not just the financial costs of contracting with others, but the costs of finding people you work well with, of corresponding and collaborating with people far from you, and so on. University lecturers collaborate more with those in their department than in other departments, and more with those in their university or city than elsewhere, despite all the tools and technologies the internet has brought. Chance meetings are another driver of serendipitous discovery and unexpected but fruitful collaborations.&nbsp;</span></p>
<p><span>What’s more, without great efforts in ‘translation’, many scientific ideas can be completely disconnected from practical applications. A research lab brings an array of scientific experts together from different disciplines, for collaboration and drawing on expertise at low cost. Fellow researchers bump into one another. And the firm context means the potential impact in terms of usable products is always taken into account.</span></p>
<h3>The DARPA Era</h3>
<p><span>The era of the R&amp;D lab has one particularly legendary story and paradigmatic example: PARC. Xerox’s Palo Alto Research Centre—the location in Palo Alto, now the home of companies like Tesla, Palantir, and Google, is no coincidence—developed many of the foundational building blocks of today’s technology and economy. In the 1970s, PARC researchers built the first computer with a graphical user interface, the first laser printer, the first Ethernet cable, and the first user-friendly word processor. Steve Jobs visited PARC in 1979, aged 24, and incorporated many of the ideas into Apple products. Charles Simonyi, a key developer at PARC, moved to Microsoft, where he developed the Office suite. But Xerox itself, which is still largely known for making photocopiers, did not capitalise on these inventions.</span></p>
<p><span>PARC, in turn, had hired many of its workers from Augmentation Research Centre, a publicly-funded project which pioneered the computer mouse, hyperlinks, the earliest predecessor to the internet, and many smaller innovations we take for granted in today’s computer ecosystem. ARC was funded by ARPA, the Advanced Research Projects Agency, now DARPA. Though DARPA (then ARPA) is funded by the US Department of Defence, it shares many elements with golden era R&amp;D labs. They are organised around a mission and a goal—even the most basic research is done with an end in mind—but researchers are given a lot of freedom to make their own decisions.</span></p>
<h3>A return to the market for ideas</h3>
<p><span>The scale of the change since the 1970s is huge—big businesses have retreated from research. In the 1960s, DuPont, the chemicals giant, published more in the </span><i><span>Journals of the American Chemical Society</span></i><span> than both MIT and Caltech combined. R&amp;D magazine, which awards the R&amp;D 100 to the hundred innovations it judges most innovative in a given four year period, gave 41% of its awards to Fortune 500 companies in its 1971 iteration and 47% in 1975. By 2006, 6% of the awards were going to firms in the Fortune 500. The great majority of these awards are now being won by federal labs, university teams, and spin-offs from academia. The lone inventor is back.</span></p>
<p><span>This is reflected by declines in the shares of patents going to the biggest businesses, and in the shares of scientists working there. In 1971 just over seven per cent of scientists in industry tracked by the US National Science Foundation worked in firms with under 1,000 employees; by 2004 this was 32%. In 2003 around a quarter worked at firms with fewer than ten employees. Even pharmaceuticals, the one area where large internal research labs are still significant, has been affected—around half of the drugs approved so far in the 2010s were originally discovered by small biotech startups.</span></p>
<p><span>In general, participation by large American firms in …</span></p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://worksinprogress.co/issue/the-rise-and-fall-of-the-american-rd-lab/">https://worksinprogress.co/issue/the-rise-and-fall-of-the-american-rd-lab/</a></em></p>]]>
            </description>
            <link>https://worksinprogress.co/issue/the-rise-and-fall-of-the-american-rd-lab/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24321799</guid>
            <pubDate>Sun, 30 Aug 2020 06:40:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Exploring mullender.c – A deep dive into the first IOCCC winner]]>
            </title>
            <description>
<![CDATA[
Score 110 | Comments 16 (<a href="https://news.ycombinator.com/item?id=24321403">thread link</a>) | @todsacerdoti
<br/>
August 29, 2020 | https://lainsystems.com/posts/exploring-mullender-dot-c/ | <a href="https://web.archive.org/web/*/https://lainsystems.com/posts/exploring-mullender-dot-c/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div>
        <ul>
<li>Table of Contents
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#mullenderc">Mullender.c</a></li>
<li><a href="#running-the-thing-on-a-pdp-11">Running the thing on a PDP-11</a></li>
<li><a href="#examining-the-pdp-11-code">Examining the PDP-11 code</a></li>
<li><a href="#the-meat-of-the-code">The meat of the code</a></li>
<li><a href="#where-is-the-string">Where is the string?</a></li>
<li><a href="#looking-at-the-vax-code">Looking at the VAX code</a></li>
<li><a href="#how-the-program-happened-in-sjoerds-own-words">How the program happened in Sjoerd’s own words</a></li>
<li><a href="#the-original-source">The Original Source</a></li>
<li><a href="#extra-bits">Extra bits</a></li>
<li><a href="#documents-and-websites-i-used">Documents and Websites I used</a></li>
</ul>
</li>
</ul>

<p>A few years ago I wrote <a href="https://medium.com/@LainIwakura/deobfuscating-obfuscated-code-for-fun-and-no-profit-36ec615c8f5d">two</a> <a href="https://medium.com/@LainIwakura/deobfuscating-code-for-fun-and-no-profit-round-2-60d78b67ebce">posts</a>
on medium.com explaining the workings of some obfuscated programs. After these posts other stuff took priority and I forgot about the world of obfuscation for a while. Now though, I find myself returning to it.
For reasons I’ll explain in a different post I find studying obfuscated code to be quite valuable. So, I thought to myself ‘Well, those last programs I examined were honestly pretty simple. What would it be like to research a truly obfuscated program?’</p>
<p>This post is the story of that journey. I will discuss the code, how I got such old and obscure code to run, as well as include snippets from my conversations with
one of the original authors (who was very helpful in figuring some of this out). If all that wasn’t enough I managed to obtain the original PDP and VAX source code, it will be hosted here with permission. I want to give a huge thank you to Sjoerd Mullender and Don Libes for their assistance and permission in reproducing some of this material.</p>

<p>Because older obfuscated programs tend to be easier to dissect I decided to stay in the early years of the IOCCC (International Obfuscated C Code Contest).
Among those early programs one sticks out as truly interesting - and that is the first IOCCC winner <a href="https://www.ioccc.org/1984/mullender/mullender.c">mullender.c</a>, which I’ve also replicated below because it’s quite short.



  </p><div>
    <p>
    <label for="187453296">
      <span>c</span>
      <span>mullender.c</span>
      <span data-label-expand="△" data-label-collapse="▽"></span>
    </label></p><pre><code>
  short main[] = {
	  277, 04735, -4129, 25, 0, 477, 1019, 0xbef, 0, 12800,
	  -113, 21119, 0x52d7, -1006, -7151, 0, 0x4bc, 020004,
	  14880, 10541, 2056, 04010, 4548, 3044, -6716, 0x9,
	  4407, 6, 5568, 1, -30460, 0, 0x9, 5570, 512, -30419,
	  0x7e82, 0760, 6, 0, 4, 02400, 15, 0, 4, 1280, 4, 0,
	  4, 0, 0, 0, 0x8, 0, 4, 0, ',', 0, 12, 0, 4, 0, '#',
	  0, 020, 0, 4, 0, 30, 0, 026, 0, 0x6176, 120, 25712,
	  'p', 072163, 'r', 29303, 29801, 'e'
  };
</code></pre>
  </div>


<p>Where do you start with a program like this? Well, the <a href="https://www.ioccc.org/1984/mullender/hint.text">hint</a> provided by the IOCCC is always a good first step.
From this hint, we can learn a few things necessary to understanding how the program works:</p>
<ul>
<li>Perhaps most importantly, this program will only run on a PDP-11 or VAX-11.</li>
<li>The C startup routine - provided by crt0.o - transfers control to a location named ‘main’ - usually intended to be a function, but in this case it’s an array of shorts</li>
<li>These shorts (represented in different formats to enhance obfuscation) form a meaningful set of PDP-11 and VAX-11 instructions</li>
<li>The first instruction is a branch to the PDP code, and due to the way VAX calls the main ‘function’ it skips the first word of the program (I’ll discuss this more later).</li>
<li>The program prints a string</li>
</ul>
<p>Essentially, the program is a bunch of machine code instructions encoded in various formats. It runs because this code predates ANSI C by a half decade and old compilers seem to have had significantly less qualms about
‘main’ being a function or not (I tried to define ‘main’ as an array of shorts with a modern compiler and it did not like that one bit).</p>

<p>I admit it, the PDP-11 was before my time. I grew up in the Windows 95/98/2000 era, and until recently I didn’t even know what a PDP-11 was.
This ignorance left me kind of stuck, and a brief look on eBay confirmed that I was not going to get a working PDP-11 any time soon. Fortunately though,
an emulator exists. Enter <a href="http://simh.trailing-edge.com/">SimH</a>, it’s more of a suite of emulators for a wide range of historical computers - of which the
PDP-11 is one, and lucky for us the VAX-11 is another.</p>
<p>After a few false starts and misadventures with 2.11BSD, I realized I had no idea what I was doing so I decided I needed some help.
The two original authors of this program are Robbert van Renesse and Sjoerd Mullender, why not try to contact them? So I did.
Robbert didn’t answer my e-mail, but luckily Sjoerd got back to me and was happy to discuss the program. He told me that the
PDP-11 OS they used was Unix v7, so I proceeded on that route.</p>
<p>I managed to <a href="http://a.papnet.eu/UNIX/v7/Installation">find a guide</a> on installing Unix v7 onto this emulator that worked;
and now with my emulator running, and OS installed, I could slap it into a file, compile, and run the thing. Below is what I got.</p>

<figure>
	<img src="https://lainsystems.com/img/running_on_pdp11.gif">
	
		<figcaption>Running the program on the PDP-11 using Unix v7</figcaption>
	
</figure>


<p>The animation is a little choppy, but even still you can hopefully see that it is printing “:-)” across the screen until it is forced to exit (there is no clean way to stop it).</p>
<p>In my discussions with Sjoerd, it was revealed that the string it prints is not exactly “:-)” but instead "  :-)\b\b\b\b”
(NOTE: there should be 2 space characters at the start but my templating engine is removing one for some reason).
It is exactly 9 bytes long. The first 2 characters are whitespace, followed by the :-), finally followed by four ‘\b’
characters. The ‘\b’ characters indicate a backspace. What does the backspace accomplish? Well, if you count 4 characters back from when they begin you’ll see we’re left with a single space - it is at this point
that the program loops and prints the string again. This happens quickly enough that to our eyes it looks like the “:-)” is scrolling across the screen - a clever effect.</p>

<p>As it turns out, the C code is not very useful to examine directly. As it also turns out, the assembly isn’t much better. Below is a small sample of what the assembly looks like (from the PDP-11’s perspective):</p>
<pre><code>    .text
    .globl  _main
    .data
    .even
_main:
    .word   0425 
    .word   04735
    .word   -010041
    .word   031
    .word   0
    .word   0735
    .word   01773
    .word   05757
</code></pre><p>So, what to do? Well, you can actually set up a cross compiler for the PDP-11 and if you go through that effort you can use the objdump program targeted at PDP-11 binaries.</p>
<p>Below is the relevant portion of the objdump - the whole thing is <a href="https://lainsystems.com/mull_objdump.txt">here</a>, but not all of it is useful. Sjoerd confirmed that the PDP code is
from _main+0x2c to _main+0x4a (inclusive). Of course, the first word is also a PDP-11 instruction. Everything I’ve ommitted is related to the VAX portion of
the program which we will get back to. (It’s also not proper VAX code since the disassembler thinks everything is PDP-11).</p>
<pre><code>   0:   0115            br  0x2c
  2c:   11c4            mov pc, r4
  2e:   0be4            tst -(r4)
  30:   e5c4 0009       sub $11, r4
  34:   1137 0006       mov r4, $0x3e
  38:   15c0 0001       mov $1, r0
  3c:   8904            sys 4
  3e:   0000            halt
  40:   0009            .word   11
  42:   15c2 0200       mov $1000, r2
  46:   892d            sys 55
  48:   7e82            sob r2, 0x46
  4a:   01f0            br  0x2c
</code></pre><p>Before going further there are 2 important things to know about PDP-11 assembly code:</p>
<ul>
<li>The PDP-11 works primarily with octal. All the addresses and instructions are encoded in octal.</li>
<li>In an instruction like <code>mov pc, r4</code>, you are moving pc INTO r4, not r4 into pc. Personally, I got used to this pretty quickly.</li>
</ul>
<p>The first number in the original program is 277, put that into a hex converter and you’ll get 115 like we see in the objdump. More interesting though is what you get translating it into octal - 425.
How does 0425 get you br 0x2c though? Well for that you need to grab some <em>manuals</em>. I got my hands on a lot of old manuals for these computers but the most useful one was the PDP-11/45 Handbook from 1973.
It would helpfully describe the instruction format, and exactly what it did. Below is an example of the page for the unconditional branch instruction.</p>

<figure>
	<img src="https://lainsystems.com/img/pdp11-branch.png">
	
		<figcaption>PDP-11/45 Handbook Describing the Branch instruction</figcaption>
	
</figure>


<p>As you can see, it sets the program counter to pc + 2x the offset - which is 25 (octal) in our case. Since the program counter at the start of our program is 2 (because it points to the next word to execute),
we get 2 + (25 x 2), or 2 + 52 = 54, which translating back into hex gives us 2c. Cool!</p>

<p>Now that we know how the branch works we can examine the main stuff - I won’t go into huge depth with the manuals for each little instruction but doing so is fun if you’re bored and enjoy that sort of thing.</p>
<p>The next relevant portion of code is this:</p>
<pre><code>  mov pc, r4
  tst -(r4)
  sub $11, r4
  mov r4, $0x3e
  mov $1, r0
  sys 4
  halt
  .word   11
</code></pre><p>We move the program counter into the r4 register and then use the ‘test’ (tst) instruction. This has the effect of clearing the some flags in the PSW (processor status word), and because
the register is using ‘Autodecrement mode’ it will subtract 2 from the value stored at r4. When using autoincrement / decrement, it will go by 1 in byte instructions or 2 in word instructions.
After this we subtract 11 from r4, but 11 is actually 9 (used to octal yet?). Then we store r4 into…0x3e? Well, if you look back at the objdump you’ll see that 0x3e is ‘halt’ or 0000. This
mov instruction overwrites that value with the contents of r4. We move 1 into r0 (1 indicating STDOUT), and call ‘sys 4’. The next line will be the value of r4 as just mentioned, and <code>.word 11</code>
simply inserts octal 11 directly into that spot. If you’re wondering what exactly is in r4 and why we’re doing all this stuff, be patient - we’re getting there.</p>
<p>If you’re familiar with system calls, you probably know what’s going on. If not, all of this is to setup the <a href="https://en.wikipedia.org/wiki/Write_(system_call)">write</a> system call. I
actually made a <a href="https://retrocomputing.stackexchange.com/questions/15590/trying-to-understand-some-assembly-syntax-in-the-unix-v7-write-system-call">post on the retro-computing stackexchange</a>
asking about the workings of this call internally - I recommend checking it out if you want further clarity on how this works.</p>
<p>After this we have the final 3 lines of PDP code which are:</p>
<pre><code>  mov $1000, r2
  sys 55
  sob r2, 0x46
</code></pre><p>We put 1000 into r2, and call system call 55. After this, we use the ‘sob’ instruction - which is ‘subtract one and branch’ and not an invitation to cry - to see if r2 is 0 yet. If it isn’t, we branch
to the previous line and call system call 55 again. loop until r2 is 0. Syscall 55 eh? Which …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://lainsystems.com/posts/exploring-mullender-dot-c/">https://lainsystems.com/posts/exploring-mullender-dot-c/</a></em></p>]]>
            </description>
            <link>https://lainsystems.com/posts/exploring-mullender-dot-c/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24321403</guid>
            <pubDate>Sun, 30 Aug 2020 04:37:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Longevity FAQ: A beginner's guide to longevity research]]>
            </title>
            <description>
<![CDATA[
Score 137 | Comments 90 (<a href="https://news.ycombinator.com/item?id=24320846">thread link</a>) | @apsec112
<br/>
August 29, 2020 | https://www.ldeming.com/longevityfaq | <a href="https://web.archive.org/web/*/https://www.ldeming.com/longevityfaq">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
				
				<tr>
					<td data-title="Intervention">Senescent cell removal</td>
					<td data-title="Median lifespan increase (treated/control)">135%</td>
					<td data-title="Year Published">2016</td>
					<td data-title="Notes">Does not affect rotarod performance, object discrimination. Slight delay in wound closure.</td>
					<td data-title="Reference">1</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Rapamycin</td>
					<td data-title="Median lifespan increase (treated/control)">110%</td>
					<td data-title="Year Published">2009</td>
					<td data-title="Notes">Late-life rapamyicn treatment extends lifespan (pooled females from multiple-site NIA study)</td>
					<td data-title="Reference">2</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">NR</td>
					<td data-title="Median lifespan increase (treated/control)">105%</td>
					<td data-title="Year Published">2016</td>
					<td data-title="Notes">Claim an increase in running distance</td>
					<td data-title="Reference">3</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Catalase</td>
					<td data-title="Median lifespan increase (treated/control)">117%</td>
					<td data-title="Year Published">2005</td>
					<td data-title="Notes">Mitochondrially-targeted catalase expression extended mouse lifespan compared to control</td>
					<td data-title="Reference">4</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Sirt6 overexpression</td>
					<td data-title="Median lifespan increase (treated/control)">115%</td>
					<td data-title="Year Published">2012</td>
					<td data-title="Notes">Sirt6-overexpression increases male mouse lifespan</td>
					<td data-title="Reference">5</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Metformin</td>
					<td data-title="Median lifespan increase (treated/control)">106%</td>
					<td data-title="Year Published">2013</td>
					<td data-title="Notes">In males, small but significant lifespan extension after metformin application</td>
					<td data-title="Reference">6</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">DN-IκBα</td>
					<td data-title="Median lifespan increase (treated/control)">110%</td>
					<td data-title="Year Published">2013</td>
					<td data-title="Notes">Dominant negative to downregulate IKK-beta activity, delivered to hypothalamus of middle-aged mice</td>
					<td data-title="Reference">7</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Klotho</td>
					<td data-title="Median lifespan increase (treated/control)">120%</td>
					<td data-title="Year Published">2005</td>
					<td data-title="Notes">Overexpression under human elongation factor 1α promoter increases lifespan, slight fertility loss</td>
					<td data-title="Reference">8</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">S6K1</td>
					<td data-title="Median lifespan increase (treated/control)">118%</td>
					<td data-title="Year Published">2009</td>
					<td data-title="Notes">KO of S6K1 extends lifspan compared to wildtype mice</td>
					<td data-title="Reference">9</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">p66</td>
					<td data-title="Median lifespan increase (treated/control)">128%</td>
					<td data-title="Year Published">1999</td>
					<td data-title="Notes">Mutation of a p66shc, member of proto-oncogene locus SHC, extends lifespan. May be just due to cancer effect.</td>
					<td data-title="Reference">10</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Lowering protein:carbohydrate ratio</td>
					<td data-title="Median lifespan increase (treated/control)">128%</td>
					<td data-title="Year Published">2014</td>
					<td data-title="Notes">Varied protein, carbohydrate, and total energy levels.</td>
					<td data-title="Reference">11</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Fat-specific insulin receptor knockout mice</td>
					<td data-title="Median lifespan increase (treated/control)">111%</td>
					<td data-title="Year Published">2003</td>
					<td data-title="Notes">Fat-specific insulin receptor knockout mice show a significant increase in lifespan</td>
					<td data-title="Reference">12</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">C57BL/6 mice with NZB/OlaHsd mitochondrial mutations</td>
					<td data-title="Median lifespan increase (treated/control)">120%</td>
					<td data-title="Year Published">2016</td>
					<td data-title="Notes">Same nuclear, different mitochondrial DNA.</td>
					<td data-title="Reference">13</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Fasting mimicking diet</td>
					<td data-title="Median lifespan increase (treated/control)">112%</td>
					<td data-title="Year Published">2015</td>
					<td data-title="Notes">FMD followed by 10 days of normal, then repeat</td>
					<td data-title="Reference">14</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Rapamycin</td>
					<td data-title="Median lifespan increase (treated/control)">127%</td>
					<td data-title="Year Published">2014</td>
					<td data-title="Notes">Rapamycin from 9 months of age, weight decreased ~30% at highest dose</td>
					<td data-title="Reference">15</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Brain-specific Sirt1 expression</td>
					<td data-title="Median lifespan increase (treated/control)">116%</td>
					<td data-title="Year Published">2013</td>
					<td data-title="Notes">Brain-specific Sirt1 expression in female mice increases lifespan over wildtype</td>
					<td data-title="Reference">16</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">SRT1720</td>
					<td data-title="Median lifespan increase (treated/control)">104%</td>
					<td data-title="Year Published">2014</td>
					<td data-title="Notes">Start diet at 28 weeks of age, very small increase on lifespan</td>
					<td data-title="Reference">17</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Spermidine</td>
					<td data-title="Median lifespan increase (treated/control)">111%</td>
					<td data-title="Year Published">2016</td>
					<td data-title="Notes">Polyamine, administered in drinking water</td>
					<td data-title="Reference">18</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Atg5 overexpression</td>
					<td data-title="Median lifespan increase (treated/control)">117%</td>
					<td data-title="Year Published">2013</td>
					<td data-title="Notes">Transgenic mice ubiquitously expressing Atg5 (crucial for autophagasome confirmation) live longer.</td>
					<td data-title="Reference">19</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Telomerase</td>
					<td data-title="Median lifespan increase (treated/control)">124%</td>
					<td data-title="Year Published">2012</td>
					<td data-title="Notes">Paper showing telomerase therapy increasing life</td>
					<td data-title="Reference">20</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Insulin receptor substrate null</td>
					<td data-title="Median lifespan increase (treated/control)">132%</td>
					<td data-title="Year Published">2008</td>
					<td data-title="Notes">Insulin receptor substrate 1 null mouse lifespan extension in females</td>
					<td data-title="Reference">21</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Snell Dwarf Mice</td>
					<td data-title="Median lifespan increase (treated/control)">142%</td>
					<td data-title="Year Published">2001</td>
					<td data-title="Notes">Snell dwarf mouse paper showing life extension</td>
					<td data-title="Reference">22</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Ames Dwarf Mice</td>
					<td data-title="Median lifespan increase (treated/control)">168%</td>
					<td data-title="Year Published">1996</td>
					<td data-title="Notes">Original Ames dwarf mouse paper showing life extension</td>
					<td data-title="Reference">23</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">s-Arf/p53</td>
					<td data-title="Median lifespan increase (treated/control)">113%</td>
					<td data-title="Year Published">2007</td>
					<td data-title="Notes">An extra copy of p53 and upstream regulator Arf/p16Ink4a increases lifespan</td>
					<td data-title="Reference">24</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Slow growth during lactation</td>
					<td data-title="Median lifespan increase (treated/control)">106%</td>
					<td data-title="Year Published">2004</td>
					<td data-title="Notes">Male mice suckled by dams fed a low-protein diet lived longer than their control cohort</td>
					<td data-title="Reference">25</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Methionine restriction</td>
					<td data-title="Median lifespan increase (treated/control)">111%</td>
					<td data-title="Year Published">2005</td>
					<td data-title="Notes">Methionine restriction increases mouse lifespan, here median lifespan increase in mice that survived at least 1 yr.</td>
					<td data-title="Reference">26</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Rapamycin (3 months)</td>
					<td data-title="Median lifespan increase (treated/control)">114%</td>
					<td data-title="Year Published">2016</td>
					<td data-title="Notes">Lifespan given from time of treatment which was 23-24 mo, used 24 mo to get percentage so this is an estimate</td>
					<td data-title="Reference">27</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">GHR-BP</td>
					<td data-title="Median lifespan increase (treated/control)">138%</td>
					<td data-title="Year Published">2000</td>
					<td data-title="Notes">Mice deficient in growth hormone receptor / binding protein live longer (female mean, not median, lifespan shown here)</td>
					<td data-title="Reference">28</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">mTOR</td>
					<td data-title="Median lifespan increase (treated/control)">116%</td>
					<td data-title="Year Published">2013</td>
					<td data-title="Notes">mTOR depletion extends lifespan</td>
					<td data-title="Reference">29</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">PTEN overexpression</td>
					<td data-title="Median lifespan increase (treated/control)">112%</td>
					<td data-title="Year Published">2012</td>
					<td data-title="Notes">Overexpression of PTEN, a tumor suppressor which counteracts PI3K, extends mouse lifespan</td>
					<td data-title="Reference">30</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Myc (+/-)</td>
					<td data-title="Median lifespan increase (treated/control)">121%</td>
					<td data-title="Year Published">2015</td>
					<td data-title="Notes">Claim no correlation between weight and lifespan</td>
					<td data-title="Reference">31</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">FGF-21</td>
					<td data-title="Median lifespan increase (treated/control)">139%</td>
					<td data-title="Year Published">2012</td>
					<td data-title="Notes">Hepatic-specific expression of FGF-21 (which suppresses growth hormone and reduces the production of IGF) increases lifespan, female lifespan shown here</td>
					<td data-title="Reference">32</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">BubR1 overexpression</td>
					<td data-title="Median lifespan increase (treated/control)">114%</td>
					<td data-title="Year Published">2012</td>
					<td data-title="Notes">Kinase which localizes to kinetochore, overexpression increases lifespan</td>
					<td data-title="Reference">33</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">AC5 KO</td>
					<td data-title="Median lifespan increase (treated/control)">132%</td>
					<td data-title="Year Published">2007</td>
					<td data-title="Notes">AC5 knockount mice lived longer than control, potentially linked to effects on cAMP production and beta-adrenergic receptor signaling.</td>
					<td data-title="Reference">34</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">17-alpha-estradiol</td>
					<td data-title="Median lifespan increase (treated/control)">112%</td>
					<td data-title="Year Published">2013</td>
					<td data-title="Notes">17-alpha-estradiol extended lifespan in males, but not females (as expected)</td>
					<td data-title="Reference">35</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Acarbose</td>
					<td data-title="Median lifespan increase (treated/control)">122%</td>
					<td data-title="Year Published">2013</td>
					<td data-title="Notes">Acarbose extended male more than female lifespan</td>
					<td data-title="Reference">36</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">TRPV1 -/-</td>
					<td data-title="Median lifespan increase (treated/control)">114%</td>
					<td data-title="Year Published">2014</td>
					<td data-title="Notes">Resting exchange ratio similar at 16 mo to 3 mo</td>
					<td data-title="Reference">37</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">SRT2104</td>
					<td data-title="Median lifespan increase (treated/control)">106%</td>
					<td data-title="Year Published">2014</td>
					<td data-title="Notes">Start diet at 28 weeks of age, very small increase if there</td>
					<td data-title="Reference">38</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Hcrt-UCP2</td>
					<td data-title="Median lifespan increase (treated/control)">128%</td>
					<td data-title="Year Published">2006</td>
					<td data-title="Notes">UCP2 under hypocretin promoter lowers core body temp, increases lifespan</td>
					<td data-title="Reference">39</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">G6PD overexpression</td>
					<td data-title="Median lifespan increase (treated/control)">114%</td>
					<td data-title="Year Published">2016</td>
					<td data-title="Notes">Reduces NADP+</td>
					<td data-title="Reference">40</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">IGF-1 Receptor Brain KO (+/-)</td>
					<td data-title="Median lifespan increase (treated/control)">109%</td>
					<td data-title="Year Published">2008</td>
					<td data-title="Notes">Brain-specific IGF-1 Receptor +/- mice live longer than WT</td>
					<td data-title="Reference">41</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">SURF-1 KO</td>
					<td data-title="Median lifespan increase (treated/control)">121%</td>
					<td data-title="Year Published">2007</td>
					<td data-title="Notes">Mutations in SURF1, a cytochrome c oxidase assembly factor, extend lifespan. Mitochondrial.</td>
					<td data-title="Reference">42</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Litter enlargemnet (CR)</td>
					<td data-title="Median lifespan increase (treated/control)">118%</td>
					<td data-title="Year Published">2009</td>
					<td data-title="Notes">50% enlargement of litter in first 20 days, to induce caloric restriction</td>
					<td data-title="Reference">43</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">mclk-1 heterozygous</td>
					<td data-title="Median lifespan increase (treated/control)">115%</td>
					<td data-title="Year Published">2005</td>
					<td data-title="Notes">A heterozygous knockout of mclk1 (important in mitochondrial respiration) results in mouse lifespan extension compared to wildtype</td>
					<td data-title="Reference">44</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Nordihydroguairaitic acid</td>
					<td data-title="Median lifespan increase (treated/control)">112%</td>
					<td data-title="Year Published">2008</td>
					<td data-title="Notes">NDGA and aspirin extend lifespan by a little bit. Small molecule.</td>
					<td data-title="Reference">45</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Aspirin</td>
					<td data-title="Median lifespan increase (treated/control)">108%</td>
					<td data-title="Year Published">2008</td>
					<td data-title="Notes">NDGA and aspirin extend lifespan by a little bit. Small molecule.</td>
					<td data-title="Reference">46</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">SOD mimetic carboxyfullerene</td>
					<td data-title="Median lifespan increase (treated/control)">115%</td>
					<td data-title="Year Published">2008</td>
					<td data-title="Notes">Carboxyfullerene, described as an SOD mimetic, increased the lifespan of treated mice compared to wildtype control</td>
					<td data-title="Reference">47</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Removal of visceral fat tissue</td>
					<td data-title="Median lifespan increase (treated/control)">108%</td>
					<td data-title="Year Published">2008</td>
					<td data-title="Notes">Removal of visceral fat tissue increases lifespan over control</td>
					<td data-title="Reference">48</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Low glycotoxin diet</td>
					<td data-title="Median lifespan increase (treated/control)">112%</td>
					<td data-title="Year Published">2007</td>
					<td data-title="Notes">Low glycotoxin (low levels of AGE's) shown to extend lifespan</td>
					<td data-title="Reference">49</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Per2 (-/-)</td>
					<td data-title="Median lifespan increase (treated/control)">118%</td>
					<td data-title="Year Published">2016</td>
					<td data-title="Notes">Lifespan study incomplete</td>
					<td data-title="Reference">50</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Neonatal metformin</td>
					<td data-title="Median lifespan increase (treated/control)">120%</td>
					<td data-title="Year Published">2015</td>
					<td data-title="Notes">Animals recieved on 3, 5, 7th day after birth - bad for females, good for males.</td>
					<td data-title="Reference">51</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">GHRH KO</td>
					<td data-title="Median lifespan increase (treated/control)">146%</td>
					<td data-title="Year Published">2013</td>
					<td data-title="Notes">GHRH (Growth-Hormone Releasing Hormone) disruption extends lifespan, presumably through the insulin/IGF pathway axis</td>
					<td data-title="Reference">52</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Sod-2 overexpresion</td>
					<td data-title="Median lifespan increase (treated/control)">104%</td>
					<td data-title="Year Published">2007</td>
					<td data-title="Notes">Overexpression of SOD-2 targeted to the mitochondrion increases mouse lifespan relative to wildtype</td>
					<td data-title="Reference">53</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Metallothionein cardiac-specific expression</td>
					<td data-title="Median lifespan increase (treated/control)">114%</td>
					<td data-title="Year Published">2006</td>
					<td data-title="Notes">Cardiac-specific expression of antioxidant metallothionein extended the lifespan of wildtype mice compared to WT FVB control.</td>
					<td data-title="Reference">54</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">IGF1R(+/-)</td>
					<td data-title="Median lifespan increase (treated/control)">121%</td>
					<td data-title="Year Published">2013</td>
					<td data-title="Notes">Tyrosine kinase receptor activated by IGF1/2</td>
					<td data-title="Reference">55</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Ink4a/Arf/Ink4b</td>
					<td data-title="Median lifespan increase (treated/control)">116%</td>
					<td data-title="Year Published">2009</td>
					<td data-title="Notes">Encodes 2 CDKs (p16 and p15), and Arf (upstream of p53)</td>
					<td data-title="Reference">56</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Adult-onset Ghr (-/-)</td>
					<td data-title="Median lifespan increase (treated/control)">100%</td>
					<td data-title="Year Published">2016</td>
					<td data-title="Notes">Male mice have &gt;2x higher insulin than female mice</td>
					<td data-title="Reference">57</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Ovary Transplantation</td>
					<td data-title="Median lifespan increase (treated/control)">117%</td>
					<td data-title="Year Published">2003</td>
					<td data-title="Notes">Original paper showing that transplantation of young ovaries into old animals could result in lifespan increase</td>
					<td data-title="Reference">58</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">UCP-1 transgenic</td>
					<td data-title="Median lifespan increase (treated/control)">111%</td>
					<td data-title="Year Published">2007</td>
					<td data-title="Notes">Transgenic mice with skeletal muscle-specific UCP1 had increased longevity. Small increase if there.</td>
					<td data-title="Reference">59</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">PAPP</td>
					<td data-title="Median lifespan increase (treated/control)">131%</td>
					<td data-title="Year Published">2010</td>
					<td data-title="Notes">Knockout of PAPP-A (which enhances IGF-1 activity by degrading the inhibitory IGF-binding protein) increases lifespan over wildtype, female lifespan shown here</td>
					<td data-title="Reference">60</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">CR diet with lard</td>
					<td data-title="Median lifespan increase (treated/control)">132%</td>
					<td data-title="Year Published">2015</td>
					<td data-title="Notes">40% decrease starting at 4 months</td>
					<td data-title="Reference">61</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">loss of function of Riib (PKA subunit)</td>
					<td data-title="Median lifespan increase (treated/control)">114%</td>
					<td data-title="Year Published">2009</td>
					<td data-title="Notes">Knockout of RIIbeta, a subunit of PKA, increased lifespan in mice compared to wildtype</td>
					<td data-title="Reference">62</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Myostatin (+/-)</td>
					<td data-title="Median lifespan increase (treated/control)">109%</td>
					<td data-title="Year Published">2015</td>
					<td data-title="Notes">Knockout induces double-muscle mice</td>
					<td data-title="Reference">63</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Akt1 +/-</td>
					<td data-title="Median lifespan increase (treated/control)">113%</td>
					<td data-title="Year Published">2013</td>
					<td data-title="Notes">Haploinsufficiency of Akt1 increases mouse lifespan relative to wildtype. Insulin/IGF-1 pathway.</td>
					<td data-title="Reference">64</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">miR-17</td>
					<td data-title="Median lifespan increase (treated/control)">117%</td>
					<td data-title="Year Published">2014</td>
					<td data-title="Notes">Not clear if there is a main function for miR-17</td>
					<td data-title="Reference">65</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">NDGA</td>
					<td data-title="Median lifespan increase (treated/control)">111%</td>
					<td data-title="Year Published">2015</td>
					<td data-title="Notes">Makes up ~12.5% of the dry weight of leaves</td>
					<td data-title="Reference">66</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">FAT10ko</td>
					<td data-title="Median lifespan increase (treated/control)">119%</td>
					<td data-title="Year Published">2014</td>
					<td data-title="Notes">Ubiquitin-like protein which can signal for protein to go to proteasome.</td>
					<td data-title="Reference">67</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">Intranasal Hsp70</td>
					<td data-title="Median lifespan increase (treated/control)">116%</td>
					<td data-title="Year Published">2015</td>
					<td data-title="Notes">Seemed to extend lifespan when started at 17 months</td>
					<td data-title="Reference">68</td>
				</tr>
			

				<tr>
					<td data-title="Intervention">RasGRF1(-/-)</td>
					<td data-title="Median lifespan increase (treated/control)">120%</td>
					<td data-title="Year Published">2011</td>
					<td data-title="Notes">Ras-guanine nucleotide exchange factor …</td></tr></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.ldeming.com/longevityfaq">https://www.ldeming.com/longevityfaq</a></em></p>]]>
            </description>
            <link>https://www.ldeming.com/longevityfaq</link>
            <guid isPermaLink="false">hacker-news-small-sites-24320846</guid>
            <pubDate>Sun, 30 Aug 2020 02:21:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Deep Dive into PHP 8's JIT]]>
            </title>
            <description>
<![CDATA[
Score 86 | Comments 58 (<a href="https://news.ycombinator.com/item?id=24320024">thread link</a>) | @nawarian
<br/>
August 29, 2020 | https://thephp.website/en/issue/php-8-jit/ | <a href="https://web.archive.org/web/*/https://thephp.website/en/issue/php-8-jit/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
<div>
<p><time datetime="2020-03-03">
2020-03-03
</time></p>
<p><a href="https://thephp.website/br/edicao/php-8-jit">Leia em Português</a></p>
<p>PHP has a Just In Time compiler (JIT) since its most recent major version, PHP 8.</p>
<p>Here's a demo of JIT's impact on PHP. The video was recorded by Zeev, a core
developer of the php engine, to demonstrate the performance difference between
php 7.0 and JIT when generating fractals.</p>
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/dWH65pmnsrI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""><iframe style="margin: auto; margin-bottom: 20px;" width="560" height="315" src="https://www.youtube-nocookie.com/embed/dWH65pmnsrI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>It is fair to expect great performance improvements after watching this video,
especially if you remember the amazing boost when migrating from php 5 to 7.
But soon you'll notice that such gains aren't for most applications (unless
you do fractals for a living 🤷🏻‍♀️).</p>
<p>So before you get too hyped or too disappointed about JIT, let me explain what
this thing is and how you can get the most out of it.</p>
<h2>What is a Just In Time compiled language and why do we need it?</h2>
<p>Let me introduce you to compilation first, I believe we will need it.</p>
<p>CPUs can't read english, you already know that. They can kind of read a series
of bits and bytes which represent addresses, values, instructions... But guess
who can't code this? That's right, us! (At least I can't 👀 (I kind of can, but... no.))</p>
<p>A solution to this problem is to translate something we, humans, can write into
something CPUs can execute. This translation can be called "compilation". So
<strong>compilation is a translation of human-readable code to machine code.</strong>
Simple, oder?</p>
<p>Translating human-readable code to machine code can happen in three different
ways: Ahead Of Time (AOT) compilation, Just In Time (JIT) compilation or, our
favorite, interpretation (or Implicit Compilation).</p>
<p><strong>Languages like C, C++ or Rust are AOT-compiled languages.</strong> You write the code,
you compile it and the output is a binary object that a CPU immediately understands
how to execute. It is called Ahead Of Time because you compile the binary object
BEFORE you run it.</p>
<p><strong>Languages like PHP, Java or JavaScript are interpreted.</strong> A code written in such
languages will be translated into an intermediate representation and another
program (a compiled one) will understand and execute such intermediate
representation. It is very common to call such programs "Virtual Machines" or
"Interpreters".</p>
<p><strong>Normally interpreted languages have less performance and freedom when compared
with AOT-compiled languages</strong> because things like memory management, CPU-targeted
instructions and funky low-level tricks are not available to the user space. So
another program (the interpreter) has to manage all of this plus be polyglot
enough to talk to different kinds of processors and operating systems.</p>
<p><strong>Languages like Java, LUA and now PHP are not only interpreted but also Just
In Time compiled!</strong> They still need a VM, but their VMs are capable of compiling
this intermediate representation of code into binary objects in runtime. These
JIT-capable VMs operate in a hybrid mode where code is partially compiled and interpreted.</p>
<p>When JIT kicks in, parts of your php code will be compiled into machine code so the
Zend VM (php's virtual machine) won't interpret these parts anymore. Your php
code will talk directly to the CPU.</p>
<p>So why can't we just compile everything, then? If the VM is a bottleneck, why
bother to run through it in the first place? We could just compile our php code
into machine code and be happy about it.</p>
<p>Well, we'd have to compile to specific CPU architectures, be prepared to talk to
different operating systems, be extremely clear about our variable types and
perform way more bare-metal operations than we should if we want to be productive.
There are decent abstractions for Golang and Rust, for example, but they aren't
very practical and require control over the environment they're deployed against.</p>
<p><strong>Interpreted languages, on the other hand, can be easily deployed to different
servers, allow rapid development and create room for dynamic typing systems.</strong></p>
<p>Just In Time compilation is potentially the best of the two worlds, combining
good speed and developer experience.</p>
<p>Dynamic typing, as you know, is one of the core features of PHP. It is very
complex and is tattooed into php's core in a way that removing the dynamic
typing is almost unthinkable.
<a href="https://thephp.website/en/issue/php-type-system/">Here’s a great summary on how php’s type system works.</a></p>
<p>And because of Dynamic Typing (and some other things you'll learn about below)
the Just In Time compiler present in PHP is not yielding big performance gains.
At least not yet.</p>
<p>Curious why? Keep reading!</p>
<h2>Let's see how PHP works with and without JIT</h2>
<p>In PHP there are three steps before executing your code: <strong>tokenizing</strong>,
<strong>parsing</strong> into an AST and <strong>compiling</strong> to an intermediate representation
known as <strong>Opcode</strong>.</p>
<p><strong>Tokenizing (or Lexing) is the process of reading php code and splitting
it into understandable units called tokens.</strong> <code>&lt;?php</code> becomes a _T_OPEN<em>TAG</em>,
<code>echo</code> becomes a _T<em>ECHO</em> and <code>"Hello, friend"</code> becomes T_CONSTANT_ENCAPSED_STRING.
<a href="https://www.php.net/manual/en/tokens.php">A complete list of PHP's tokens can be found here.</a></p>
<p>Parsing is the process of making sense out of such tokens. In PHP parsed tokens
are organized in a tree structure named AST (Abstract syntax tree).
The AST's job is to represent what operations should be. In <code>echo 1+1</code> the interpreter
should in fact understand <code>print the result of the expression 1+1</code>. Such tree would
look something like the following:</p>
<pre><code>operation =&gt; ECHO,
operand =&gt; expression (
    operation =&gt; ADD,
    operand1 =&gt; 1,
    operand2 =&gt; 1
)</code></pre>
<p>PHP is then able to <strong>compile this tree into an intermediate representation
called Opcode.</strong></p>
<p>The Opcode is what is actually executed by the virtual machine, so executing
is the final step. Here's a diagram illustrating how this process looks like.</p>
<figure>
<a href="https://thephp.website/assets/images/posts/10-php-8-jit/zendvm-no-opcache.png" target="_blank">
<img src="https://thephp.website/assets/images/posts/10-php-8-jit/zendvm-no-opcache.png" alt="The PHP's interpreting flow.">
</a>
<figcaption>A simplified overview on PHP's interpreting flow.</figcaption>
</figure>
<p>You probably realized that tokenizing, parsing and compiling code every single time
can be a big bottleneck. PHP engineers thought so too and that's why the
Opcache extension exists. Let's have a quick look at it.</p>
<h2>The Opcache extension</h2>
<p>The Opcache extension is shipped with PHP and generally there's no big reason to
deactivate it. If you use PHP, you should probably have Opcache switched on.</p>
<p>It adds an in-memory shared cache layer to store Opcodes. So tokenizing, parsing
and compiling will happen once for each file and will be shared with every request.</p>
<p>With Opcache extension enabled, the execution of PHP code looks like in the following
diagram:</p>
<figure>
<a href="https://thephp.website/assets/images/posts/10-php-8-jit/zendvm-opcache.png" target="_blank">
<img src="https://thephp.website/assets/images/posts/10-php-8-jit/zendvm-opcache.png" alt="The PHP's interpreting flow with Opcache">
</a>
<figcaption>The PHP's interpreting flow with Opcache. If a file was already parsed, php fetches the cached Opcodes for it instead of parsing all over again.</figcaption>
</figure>
<p><strong>Side note:</strong> this is where <a href="https://wiki.php.net/rfc/preload">PHP 7.4's preloading feature</a>
shines! It allows you to tell PHP FPM to parse your codebase, transform it into
Opcodes and cache them even before you execute anything.</p>
<h2>Enters the Just In Time compilation</h2>
<p>While the Opcache extension will prevent PHP from tokenizing, parsing and compiling
over and over again, the Just In Time compilation aims to skip the virtual machine's
Opcode interpretation and let it execute machine code directly.</p>
<p>PHP's JIT implementation uses a C library called
<a href="https://luajit.org/dynasm.html">DynASM (Dynamic Assembler)</a>
which maps a set of CPU instructions in one specific format into assembly code for
many different CPU types. So the Just In Time compiler transforms Opcodes into an
architecture-specific machine code using DynASM.</p>
<p>The compilation happens between fetching Opcodes from cache and executing them.
Since compiling Opcode into machine code can be very expensive, PHP has to decide
which portions of your code might make sense to be compiled or not.</p>
<p><strong>PHP then profiles Opcodes being executed by the Zend VM and checks which ones
might make sense to compile. (based on your configuration)</strong></p>
<p>When an Opcode is compiled its execution doesn't happen through the Zend VM handlers,
they are directly executed by the CPU.</p>
<figure>
<a href="https://thephp.website/assets/images/posts/10-php-8-jit/zendvm-opcache-jit.png" target="_blank">
<img src="https://thephp.website/assets/images/posts/10-php-8-jit/zendvm-opcache-jit.png" alt="The PHP's interpreting flow with JIT">
</a>
<figcaption>The PHP's interpreting flow with JIT. If compiled, Opcodes don't execute through the Zend VM.</figcaption>
</figure>
<p>When an Opcode should be compiled is decided based on your INI configurations. You'll
get more details in the next section.</p>
<h2>JIT Configuration</h2>
<p>Configuring JIT in PHP is very simple, there are two INI directives we need to set:
<code>opcache.jit_buffer_size</code> and <code>opcache.jit</code>. The first indicates how much memory
we're willing to allocate for compiled code, while the later one dictates how JIT
should behave.</p>
<p>There's also an optional directive named <code>opcache.jit_debug</code> for debugging purposes.
I will not cover this one here.</p>
<p>For example, the snippet below indicates that we're willing to give up to 100 Megabytes
of compiled code, enabling AVX instruction generation, using a global linear-scan register
allocator, profiling each request and jitting hot functions, optimizing the compiled
code based on static type inference. (👀 WUT?)</p>
<pre><code>opcache.jit_buffer_size=100M
opcache.jit=1235</code></pre>
<p>To make your life easier, I’m bringing some presets that
<a href="https://beberlei.de/2020/07/05/what_to_look_out_for_when_testing_php_jit.html">Benjamin Eberlei kindly shared in his blog</a>:</p>
<ul>
<li><code>opcache.jit=1205</code> (JIT everything)</li>
<li><code>opcache.jit=1235</code> (JIT hot code based on relative usage)</li>
<li><code>opcache.jit=1255</code> (trace hot code for JITability, the best so far)</li>
</ul>
<p>The <code>opcache.jit</code> entry is a sequence of values named "CRTO", each character can have different
behavioural effect on your application. Below I explain what each of these letters can do:</p>
<p><strong>C - CPU-specific optimization</strong></p>
<table>
<thead>
<tr>
<th>Flag</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No optimization whatsoever</td>
</tr>
<tr>
<td>1</td>
<td>Enable <a href="https://en.wikipedia.org/wiki/Advanced_Vector_Extensions">AVX instruction</a> generation</td>
</tr>
</tbody>
</table>
<p><strong>R - Register Allocation Modes</strong></p>
<table>
<thead>
<tr>
<th>Flag</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Never perform <a href="https://en.wikipedia.org/wiki/Register_allocation">register allocations</a></td>
</tr>
<tr>
<td>1</td>
<td>Use local linear-scan register allocation</td>
</tr>
<tr>
<td>2</td>
<td>Use global linear-scan register allocation</td>
</tr>
</tbody>
</table>
<p><strong>T - JIT trigger</strong></p>
<table>
<thead>
<tr>
<th>Flag</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>JIT everything on first script load</td>
</tr>
<tr>
<td>1</td>
<td>JIT functions when they execute</td>
</tr>
<tr>
<td>2</td>
<td>Profile first request and compile hot functions on second requests</td>
</tr>
<tr>
<td>3</td>
<td>Profile and compile hot functions all the time</td>
</tr>
<tr>
<td>4</td>
<td>Compile functions with a <code>@jit</code> in doc blocks</td>
</tr>
</tbody>
</table>
<p><strong>O - Optimization level</strong></p>
<table>
<thead>
<tr>
<th>Flag</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Never JIT</td>
</tr>
<tr>
<td>1</td>
<td>Minimal JIT (use regular VM handlers)</td>
</tr>
<tr>
<td>2</td>
<td>Selective VM handler inlining</td>
</tr>
<tr>
<td>3</td>
<td>Optimized JIT based on static type inference of individual function</td>
</tr>
<tr>
<td>4</td>
<td>Optimized JIT based on static type inference and call tree</td>
</tr>
<tr>
<td>5</td>
<td>Optimized JIT based on static type inference and inner procedure analyses</td>
</tr>
</tbody>
</table>
<p>I don't fully understand every term there, but the main takeaway is that you should play
around with each flag and keep profiling …</p></iframe></div></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://thephp.website/en/issue/php-8-jit/">https://thephp.website/en/issue/php-8-jit/</a></em></p>]]>
            </description>
            <link>https://thephp.website/en/issue/php-8-jit/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24320024</guid>
            <pubDate>Sat, 29 Aug 2020 23:00:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Inventing Monads]]>
            </title>
            <description>
<![CDATA[
Score 115 | Comments 105 (<a href="https://news.ycombinator.com/item?id=24318244">thread link</a>) | @stopachka
<br/>
August 29, 2020 | https://stopa.io/post/247 | <a href="https://web.archive.org/web/*/https://stopa.io/post/247">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p><span><p>I got into a discussion about monads recently. On a search to find some resources to share, I realized that most essays explained them with type signatures and rules. A missing ingredient to grok them, I think, is to understand the intuition behind them. How could you end up <em>inventing</em> monads?</p><p>Okay, let’s try to build that intuition. We’ll avoid both types and category theory.</p><p>Say you have a few functions to get a user, a profile, and a display picture:</p><pre><code>function getUser(id) { 
  return USERS[id] 
}

function getProfile(user) { 
  return user.profile
}

function getDisplayPicture(profile) { 
  return profile.displayPicture
}</code></pre><p>Now, given an id, how would you get the profile picture?</p><p>You could write this: </p><pre><code>getDisplayPicture(getProfile(getUser(id)))</code></pre><p>Buut, this would throw an error: all these functions <em>could</em> return null. If <code>getUser</code> returned null for example, you would see: </p><pre><code>Uncaught TypeError: Cannot read property 'profile' of undefined</code></pre><p>To fix this, you may end up writing something like this:</p><pre><code>function getDisplayPictureFromId(id) { 
  const user = getUser(id)
  if (!user) return
  const profile = getProfile(user)
  if (!profile) return
  return getDisplayPicture(profile)
}</code></pre><p>But, this is getting pretty ugly. All these conditional returns distract from what you’re really trying to do. <strong>What if there was a way to get rid of these conditionals?</strong></p><p>So, that’s our challenge: let’s get rid of these conditionals. One way we can do this, is to make some kind of helper. This helper would let us chain these functions together: </p><pre><code>new Chainer(getUser(id))
  .whenExists(user =&gt; getProfile(user))
  .whenExists(profile =&gt; getDisplayPicture(profile))</code></pre><p>This looks pretty good. Let’s implement it.</p><h2>whenExists</h2><p><code>.whenExists</code> would only run the callback if the value exists. Here’s how you could write this:</p><pre><code>class Chainer {
  constructor(v) { 
      this.value = v
  }
  whenExists(f) { 
      if (!this.value) return this;
      return new Chainer(f(this.value))
  }
}</code></pre><p>And voila, with just this, we can now write</p><pre><code>function getProfilePictureFromId(id) { 
  return new Chainer(getUser(id))
    .whenExists(user =&gt; getProfile(user))
    .whenExists(profile =&gt; getDisplayPicture(profile))
}</code></pre><h2>More Problems</h2><p>Notice that <code>getDisplayPictureFromId</code> now returns a <code>Chainer</code>. </p><p>Imagine we had another function <code>resizeDisplayPicture</code>, that <em>also</em> returned a Chainer</p><pre><code>function resizeDisplayPicture(pic) { 
    return new Chainer(pic).whenExists(pic =&gt; ...
}</code></pre><p>What would happen, if we wrote:</p><pre><code>getProfilePictureFromId(id).whenExists(pic =&gt; resizeDisplayPicture(pic))</code></pre><p>Let’s look at whenExists again:</p><pre><code>whenExists(f) { 
  if (!this.value) return this;
  return new Chainer(f(this.value))
}</code></pre><p>If <code>getProfilePictureFromId(id)</code> did exist, we would run </p><pre><code>new Chainer(f(this.value))</code></pre><p>which in this case is</p><pre><code>new Chainer(resizeDisplayPicture(this.value)) </code></pre><p>Which becomes </p><pre><code>new Chainer(new Chainer(this.value)...</code></pre><p><strong>Uh oh. We now have a Chainer inside of a Chainer.</strong> Ideally, we’d want a function that somehow “merged” these chainers together.</p><h2>whenExistsMerge</h2><p>So let’s do that. We can call it <code>whenExistsMerge</code></p><pre><code>class Chainer {
  constructor(v) { 
      this.value = v
  }
  whenExists(f) { 
      if (!this.value) return this;
      return new Chainer(f(this.value))
  }
  whenExistsMerge(f) { 
      if (!this.value) return this;
      return f(this.value)
  }
}</code></pre><p>And with that, we can write </p><pre><code>getProfilePictureFromId(id)
  .whenExistsMerge(pic =&gt; resizeDisplayPicture(pic))
  .whenExists(resizedPic =&gt; ...)</code></pre><p><strong>Aand voila, you’ve just invented a specific type of monad.</strong> Kind of (1). Chainer is analogous to the <code>Maybe</code> monad. <code>whenExists</code> is analogous to its <code>fmap</code> operation, and <code>whenExistsMerge</code> is analogous to its <code>bind</code> operation. If you’re curious about the type-based technicalities now, <a href="http://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html" target="_blank">see this essay</a>. </p><p>So, now we’ve found this cool <code>Chainer</code>. We can stop here, or think a bit further. What’s so special about it? </p><p>Well, it’s like a box that wraps around some information. We can interact with that box with  <code>whenExists</code> and <code>whenExistsMerge</code>.</p><p>How else can we use the idea of <code>box</code> and <code>whenExists?</code></p><p>Here’s one. Let’s say you were dealing with callback hell: </p><pre><code>fetchUser(id, (err, user) =&gt; {
  if (err) ... 
    fetchProfile(profile, (err, profile) =&gt; { 
      if (err) ...
        fetchDisplayPicture(...
    }
}</code></pre><p>What if we created something like an <code>Async Chainer</code>: it stores the result of some future computation. Then, you could use the <code>whenExists*</code> functions, which let you interact with the value <em>when</em> it is computed. We turn the callback hell into</p><pre><code> fetchUser(id).whenExistsMerge(fetchProfile).whenExistsMerge(fetchDisplayPicture)</code></pre><p>Well, replace <code>whenExistsMerge</code> with <code>then</code>, and you're on a road to discover <code>Promise</code>, which is also a monad. Kind of (2). </p><p>Now, it’s pretty cool to notice that both the nullable use case and the async use case have the same interface. The name <code>whenExists</code> may be a bit too specific. Really, what it does is give you an interface to <code>map</code> over the value. If you use the word <code>map</code>, <code>whenExistsMerge</code> really lets you <code>flatMap</code> over the value. </p><p>This begins to get us to the fundamental abstraction of a monad: a box, with an interface for <code>map</code>, and <code>flatMap</code>. As you look deeper, you’ll notice that this abstraction can handle a lot of other things. If you’re curious, research the <code>Result</code> monad for example.</p><p>And with that, you’ve invented monads : ) </p><h2>Aside: Do you <em>really</em> need this?</h2><p>As you went through this, you may have realized that there are other ways to solve the problems that monads solve. Instead of <code>Chainer</code>, your language could have a <a href="https://kotlinlang.org/docs/reference/null-safety.html#safe-calls" target="_blank">safe call</a> abstraction. Instead of <code>Promise</code>, your language could have an <code>async/await</code> abstraction. Sometimes those can be a better <a href="https://www.youtube.com/watch?v=YR5WdGrpoug" target="_blank">better choice</a>. Nevertheless, if your language doesn’t have those abstractions, you can use monads to solve them. And of course, like any powerful abstraction, you can invent new monads to simplify your business logic.</p><hr><p>(1) I cheated a bit with <code>Chainer</code>, by avoiding the subtypes <code>Just</code> and <code>Nothing</code>. This makes it so you can’t express something like <code>Just(null)</code>. Still, it gets at the essence : ) </p><p>(2) Likewise, <code>Promise</code> isn’t quite a monad, because it mixes both <code>flatMap</code> and <code>map</code> with <code>then</code>. This makes it so you can’t have a <code>Promise&lt;Promise&lt;Res&gt;&gt;</code>. Again though, it gets at the essence</p><p><em>Thanks to Joe Averbukh, Mark Shlick, Daniel Woelfel, Irakli Safareli, Jacky Wang for reviewing drafts of this essay</em></p></span></p></div></div></div>]]>
            </description>
            <link>https://stopa.io/post/247</link>
            <guid isPermaLink="false">hacker-news-small-sites-24318244</guid>
            <pubDate>Sat, 29 Aug 2020 18:22:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[She’s Got Game]]>
            </title>
            <description>
<![CDATA[
Score 83 | Comments 92 (<a href="https://news.ycombinator.com/item?id=24316556">thread link</a>) | @woldemariam
<br/>
August 29, 2020 | https://restofworld.org/2020/you-just-got-pwned-habibi/ | <a href="https://web.archive.org/web/*/https://restofworld.org/2020/you-just-got-pwned-habibi/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
			
<p>In April 2012, three college juniors — Felwa, Tasnim, and Najla — waited anxiously on the campus of Prince Sultan University in Riyadh. For the previous six months, their lives had been consumed by the pursuit of a single, radical idea: frustrated that women, year after year, were barred from the annual Gamers’ Day convention, <a href="http://gamersday.com/en/about-us.php#:~:text=Gamers'%20Day%20is%20a%20gaming,numbers%20of%20visitors%20and%20exhibitors">the largest annual gaming convention in Saudi Arabia</a>, they had decided to launch the first-ever gamers’ convention for women in the kingdom. As the organizers hurried around counting consoles and hanging posters near stalls, they wondered whether anyone would show up.</p>



<p>Over the past decade, Saudi Arabia’s gaming scene has dramatically evolved, especially for women. In the early 2000s, the country had strict moral regulations on entertainment, and games were mostly sold in a gray market or through unofficial channels. Areej, a 23-year-old university graduate, picked up her interest in gaming from her father, who once frequented the informal neighborhood stores that sold pirated copies of popular games for 10 riyals ($2). “He played Japanese and English games, even though he didn’t even understand English back then,” she recalled. “He would keep dictionaries around while playing. That’s actually how he learned the language.” Areej hopes to become a “localizer,” a job that entails translating English-language games into Arabic. A decade ago, this wouldn’t have been possible.&nbsp;</p>



<p>After Sony’s 2007 release of the PlayStation 3 in the kingdom, the gaming industry began to take shape in Saudi Arabia. The first <a href="https://www.gamersday.com/en/">Gamers’ Day</a> took place in 2008, and it now draws upward of 60,000 male visitors over the course of four days. The convention presents video game companies with a lucrative opportunity to demo their latest equipment and products; devoted players, in turn, get to try out highly anticipated games that have not yet been released. In 2012, as the three girls were setting up Girls Con (or GCON as it would come to be known), the industry was estimated to have a global revenue stream of $70 billion.</p>



<p>In the months prior to GCON, Tasnim, the only one in the group with work experience, took the lead pitching sponsorship proposals to the all-male staffs at Nintendo and PlayStation Arabia. Without any real data on female gamers in the Middle East, and with barely any on girl gamers in North America, she had pitched on the assumption that the <a href="https://newzoo.com/insights/articles/male-and-female-gamers-how-their-similarities-and-differences-shape-the-games-market/">gender ratio for gamers in Saudi Arabia</a> was likely the same as in the United States: 47%. But there was no way to prove this. Until then, the world of female gaming in Saudi Arabia was a private one, usually set in the intimacy of people’s bedrooms.</p>



<p>“You could find girls who played video games, just for fun or on their mobile phone, but I had no idea how many girls were into hardcore gaming,” Felwa said. While mobile games like Angry Birds and Candy Crush were popular — the Kingdom boasts a <a href="https://www2.deloitte.com/content/dam/Deloitte/xe/Documents/technology-media-telecommunications/GMCS-whitepaper.pdf">90% cell phone penetration rate</a> — Felwa was curious to see how many girls had grown up like her playing Tomb Raider, Tekken, and League of Legends.</p>



<p>When the hall flooded with nearly 3,000 women, some as young as 13 and others in their 50s, it was a shock. “I definitely did not expect moms to come,” Felwa said. Back then, it was mandatory for women to wear the traditional black abaya, and often a headscarf, while in public. It was only when the women walked through the doors into the all-female space that their abayas slipped off to reveal an array of cosplay costumes.</p>



<p>Inside the hallway, girls who were expected to behave discreetly at all times rushed around trying to play as many PlayStation- and Nintendo-sponsored games as they could. On one side of the hall, first-time cosplayers shared a rare opportunity to express their fandom. On the other, 150 people stood in a rowdy line waiting their turn in a Call of Duty tournament.</p>


		<figure>
			<div>
				<p><img src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/08/Ghada_AlMoqbel_25-40x27.jpg" data-src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/08/Ghada_AlMoqbel_25-768x432.jpg" data-srcset="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/08/Ghada_AlMoqbel_25-400x267.jpg 400w, https://restofworld.org/wp-content/uploads/2020/08/Ghada_AlMoqbel_25-600x400.jpg 600w, https://restofworld.org/wp-content/uploads/2020/08/Ghada_AlMoqbel_25-1600x1067.jpg 1600w, https://restofworld.org/wp-content/uploads/2020/08/Ghada_AlMoqbel_25-2800x1867.jpg 2800w, " sizes="(max-width: 640px) 100vw, (max-width: 992px) calc(100vw - 40px), (max-width: 1140px) calc(100vw - 290px), calc(100vw - ((100vw - 640px)/2))" alt="">
					
				</p>
			</div>
						<figcaption itemprop="caption description">
				
				
			</figcaption>
		</figure>


<hr>



<p><strong>While the Middle</strong> <strong>East</strong> represents only a small portion of the international gaming industry, it is a rapidly expanding market. In 2017, the countries of the Gulf Cooperation Council accounted for around $693 million of gaming revenue, most related to esports. By 2021, that number is expected to exceed <a href="https://www.strategyand.pwc.com/m1/en/press-releases/2020/gcc-gaming-market.html">$821 million</a>, boosted in part by the pandemic-induced lockdown.&nbsp;</p>



<p>Saudi Arabia expects to be at the forefront<strong> </strong>of that expansion. In a country where roughly 50% of the population is under 30, gaming has become an emblem for a generation of young Saudis.&nbsp;</p>



<p>In recent years, Prince Faisal bin Bandar, a young member of the royal family raised on Atari consoles, set out to make Saudi Arabia the Middle East’s hub for the $160 billion gaming industry. Under his leadership, the<strong> </strong><a href="https://safeis.sa/">Saudi Arabian Federation for Electronic and Intellectual Sports (SAFEIS)</a> aims for esports revenue to amount to 1% of the country’s GDP (approximately $22 billion) by 2030.</p>



<p>While Saudi Arabia was a late arrival to esports, its male players have already made their mark. Since 2017, Prince Faisal and the federation have been scouting, coaching, and sending professional esports players to competitions across the world. Mossad Al-Dossary, then 18, made headlines in 2018 after <a href="https://www.ea.com/games/fifa/news/msdossary-triumphs-fifa-eworld-cup-grand-final-london">winning first place</a> at the FIFA eWorld Cup in London, taking home a $250,000 cash prize.&nbsp;</p>



<p>Female gamers, however, are still finding their way. Women in Felwa, Tasnim, and Najla’s generation grew up under the watch of religious police, in a time when public spaces were segregated by gender. While women still do not have the same rights as men, Crown Prince Mohammed bin Salman<strong> </strong>has relaxed male-guardianship rules and mandatory dress codes and legalized certain forms of entertainment for women. “I still struggle to convey what Saudi Arabia was like at that time to those that haven’t had that experience,” Tess said. There were no theaters, and sports facilities for girls were limited, “So, mostly, we had to stay inside and make do with what we had — and games were all that we had.”</p>



<p>Raghad, 23, currently works for a mining company, but she dreams of becoming a voice actor for video games. Although she’s never lived anywhere but Saudi Arabia, she has a distinctly squeaky American accent — a curious trait she picked up from a fifth-grade teacher who had lived in the U.S. and a torrent of YouTube videos. She is considering taking voice-acting classes online, assuming she can find any, because she’s not allowed to travel abroad alone to study until after she’s married. It’s still common to meet women who come to gaming as a result of these kinds of restrictions, as Felwa, Tasnim, and Najla did years ago. This is why going to GCON can be such a powerful experience.&nbsp;</p>


		<figure>
			<div>
				<p><img src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/08/GettyImages-1010892174-40x27.jpg" data-src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/08/GettyImages-1010892174-768x432.jpg" data-srcset="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/08/GettyImages-1010892174-400x267.jpg 400w, https://restofworld.org/wp-content/uploads/2020/08/GettyImages-1010892174-600x400.jpg 600w, https://restofworld.org/wp-content/uploads/2020/08/GettyImages-1010892174-1600x1067.jpg 1600w, https://restofworld.org/wp-content/uploads/2020/08/GettyImages-1010892174-2800x1867.jpg 2800w, " sizes="(max-width: 640px) 100vw, (max-width: 992px) calc(100vw - 40px), (max-width: 1140px) calc(100vw - 290px), calc(100vw - ((100vw - 640px)/2))" alt="Mossad Al-Dossary (right) made headlines in 2018 after winning first place at the FIFA e-World Cup in London, taking home a $250,000 cash prize.&nbsp;">
					
				</p>
			</div>
						<figcaption itemprop="caption description">
				
				<span itemprop="copyrightHolder">Ben Hoskins/FIFA via Getty Images</span>
			</figcaption>
		</figure>


<hr>



<p><strong>In 2018, Felwa,</strong> Tasnim, and Najla handed GCON over to Ghada Al-Moqbel, who attended her first GCON in 2013 at the age of 18. Now she leads Saudi Arabia’s women’s gaming community. This occurred right after bin Salman took control and began dismantling the country’s gender segregation. For Ghada and the wider community of female gamers, these changes forced them to decide whether they wanted to stay on the fringes of the gaming community or take a more central role. In 2018, GCON organizers met regularly to discuss whether there was still value in creating an exclusively female space for gaming.</p>



<figure><blockquote><p>“We had to stay inside and make do with what we had — and games were all that we had.”</p></blockquote></figure>



<p>For Ghada, the answer was yes. While attitudes toward female gamers have improved, parts of Saudi society remain uncomfortable with this burgeoning culture. When GCON first launched, participants were criticized for indulging in supposedly immoral behavior, and social media accounts of female gamers were routinely hacked. Likewise, after the first Comic Con in Jeddah, in 2017, a<a href="https://twitter.com/hashtag/%D9%83%D9%88%D9%85%D9%8A%D9%83%D9%88%D9%86_%D8%AD%D9%81%D9%84_%D8%B9%D8%A8%D8%AF%D8%A9_%D8%A7%D9%84%D8%B4%D9%8A%D8%B7%D8%A7%D9%86_%D8%A8%D8%AC%D8%AF%D9%87?src=hashtag_click"> hashtag</a> accusing participants of being Satan worshippers flooded social media along with pictures of women who had dressed up for cosplay. Thanks in part to the continuing fear of societal backlash, many Saudi women still advocate for all-female events.&nbsp;</p>



<p>But like the kingdom, GCON is also evolving. “We’re not just entertainment anymore,” Ghada said. “It’s about empowering and enabling women to be serious in the gaming and esports industry.” In mid-August, Princess Nourah bint Abdulrahman University, the largest women-only university in the world, <a href="https://www.arabnews.com/node/1718151/saudi-arabia">announced</a> that it would be creating a degree program for animation.</p>



<p>Since Ghada took over, the organization has expanded, hosting regular skill-development workshops as well as the annual convention. While she has maintained GCON’s focus on female gamers, she has been open to collaborating with their male peers. In 2017, organizers from Gamer’s Day worked with GCON to arrange their first mixed-gender gaming event. While 2020 was supposed to be a big year for Ghada and GCON, Covid-19 disrupted their plans. Nonetheless, it’s unlikely that GCON — a force that arose in far more challenging terrain — will be going away anytime soon.</p>
		</div></div>]]>
            </description>
            <link>https://restofworld.org/2020/you-just-got-pwned-habibi/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24316556</guid>
            <pubDate>Sat, 29 Aug 2020 15:04:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Don't trust default timeouts]]>
            </title>
            <description>
<![CDATA[
Score 133 | Comments 111 (<a href="https://news.ycombinator.com/item?id=24315239">thread link</a>) | @kiyanwang
<br/>
August 29, 2020 | https://robertovitillo.com/default-timeouts/ | <a href="https://web.archive.org/web/*/https://robertovitillo.com/default-timeouts/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><header><p>May 03, 2020</p></header><p>Modern applications don’t crash; they hang. One of the main reasons for it is the assumption that the network is reliable. It isn’t. </p><p>When you make a network call without setting a timeout, you are telling your code that you are 100% confident that the call is going to succeed. Would you really take that bet?</p><p>If you are a making synchronous network call that never returns, then to very least your thread hogs forever. Whoops. Asynchronous network calls that don’t return are not free either. Sure, you are not hogging threads, but you are leaking sockets. Any HTTP client library worth its salt uses socket pools to <a href="https://en.wikipedia.org/wiki/HTTP_persistent_connection">avoid recreating connections</a>. And those pools have a limited capacity. Like any other resource leak, it’s only a matter of time until there are no sockets left. When that happens, your application is going to get stuck waiting for a connection to free up.</p><p>If the network is not reliable, why do we keep creating APIs that have infinity as the default timeout? Some APIs don’t even have a way to set a timeout in the first place! A good API should be easy to use the right way and hard to use the wrong way. When the default timeout is infinity, it’s all too easy for a client to shoot itself in the foot. </p><p>If you remember one thing from this post, then let it be this: <strong>never use “infinity” as a default timeout</strong>.</p><p>Let’s take a look at some concrete examples.</p><p>Javascript’s XMLHttpRequest is THE web API to retrieve data from a server asynchronously. Its <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/timeout">default timeout is zero</a>, which means there is no timeout!</p><div data-language="javascript"><pre><code><span>var</span> xhr <span>=</span> <span>new</span> <span>XMLHttpRequest</span><span>(</span><span>)</span><span>;</span>
xhr<span>.</span><span>open</span><span>(</span><span>'GET'</span><span>,</span> <span>'/api'</span><span>,</span> <span>true</span><span>)</span><span>;</span>


xhr<span>.</span>timeout <span>=</span> <span>10000</span><span>;</span> 

xhr<span>.</span><span>onload</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
 
<span>}</span><span>;</span>

xhr<span>.</span><span>ontimeout</span> <span>=</span> <span>function</span> <span>(</span><span>e</span><span>)</span> <span>{</span>
 
<span>}</span><span>;</span>

xhr<span>.</span><span>send</span><span>(</span><span>null</span><span>)</span><span>;</span>
</code></pre></div><p>Client-side timeouts are as crucial as server-side ones. There is a <a href="https://hpbn.co/primer-on-browser-networking/#connection-management-and-optimization">maximum number of sockets your browser</a> can open for a particular host. If you make network requests that never returns, you are going to exhaust the socket pool. When the pool is exhausted, you are no longer able to connect to the host. </p><p>The fetch web API is a modern replacement for the XMLHttpRequest API, which uses Promises. When the API was initially introduced, there was <a href="https://github.com/whatwg/fetch/issues/951">no way to set a timeout at all</a>! Browsers have recently added experimental support for the <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController">Abort API</a> to support timeouts, though.</p><div data-language="javascript"><pre><code><span>const</span> controller <span>=</span> <span>new</span> <span>AbortController</span><span>(</span><span>)</span><span>;</span>

<span>const</span> signal <span>=</span> controller<span>.</span>signal<span>;</span>

<span>const</span> fetchPromise <span>=</span> <span>fetch</span><span>(</span>url<span>,</span> <span>{</span>signal<span>}</span><span>)</span><span>;</span>  


<span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> controller<span>.</span><span>abort</span><span>(</span><span>)</span><span>,</span> <span>10000</span><span>)</span><span>;</span> 

fetchPromise<span>.</span><span>then</span><span>(</span><span>response</span> <span>=&gt;</span> <span>{</span>
 
<span>}</span><span>)</span>
</code></pre></div><p>Things aren’t much rosier in Python-land. The requests library uses a default timeout of <a href="https://requests.readthedocs.io/en/master/user/quickstart/#timeouts">infinity</a>. </p><div data-language="python"><pre><code>
response <span>=</span> requests<span>.</span>get<span>(</span><span>'https://github.com/'</span><span>,</span> timeout<span>=</span><span>10</span><span>)</span></code></pre></div><p>What about Go? Go’s HTTP package <a href="https://github.com/golang/go/issues/24138">doesn’t use timeouts</a> by default either. </p><div data-language="go"><pre><code><span>var</span> client <span>=</span> <span>&amp;</span>http<span>.</span>Client<span>{</span>
  
  Timeout<span>:</span> time<span>.</span>Second <span>*</span> <span>10</span><span>,</span> 
<span>}</span>

response<span>,</span> <span>_</span> <span>:=</span> client <span>.</span><span>Get</span><span>(</span>url<span>)</span></code></pre></div><p>Modern HTTP clients for Java and .NET do a much better job and usually, come with default timeouts. For example, .Net Core’s HttpClient has a default timeout of <a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.timeout?view=netcore-3.1#remarks">100 seconds</a>. It’s lax but much better than no timeout at all. That comes as no surprise since those languages are used to build large scale distributed systems that need to be robust against network failures. Network requests without timeouts are the <a href="https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing">top silent killer</a> of distributed systems.</p><h3 id="remember-this"><a href="#remember-this" aria-label="remember this permalink"></a>Remember this</h3><p>As a rule of thumb, always set timeouts when making network calls. And if you build libraries, always set reasonable default timeouts and make them configurable for your clients.</p><p>Do you want to learn more about stability patterns and anti-patterns of distributed systems? Check out my <a href="https://systemdesignmanual.com/">upcoming book</a>.</p><hr></article></div>]]>
            </description>
            <link>https://robertovitillo.com/default-timeouts/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24315239</guid>
            <pubDate>Sat, 29 Aug 2020 10:58:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Literate DevOps]]>
            </title>
            <description>
<![CDATA[
Score 58 | Comments 14 (<a href="https://news.ycombinator.com/item?id=24315057">thread link</a>) | @geocar
<br/>
August 29, 2020 | http://www.howardism.org/Technical/Emacs/literate-devops.html | <a href="https://web.archive.org/web/*/http://www.howardism.org/Technical/Emacs/literate-devops.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">
<header>

</header><p>
((tl;dr See <a href="https://www.youtube.com/watch?v=dljNabciEGg">my video presentation/demonstration</a> of this essay))
</p>

<p>
Maintaining servers falls into two phases:
</p>

<ol>
<li>Bang head until server works</li>
<li>Capture effort into some automation tool like Puppet or Chef.</li>
</ol>

<p>
Recently, I’ve been playing around with making the first phase closer
to the second.  For lack of a better word, I’m calling it <i>literate
devops</i>.
</p>

<p>
I’ve talked about using <a href="http://www.howardism.org/Technical/LP/introduction.html">org-mode’s <i>literate programming</i> model</a> to
investigate new ideas and crystallize thoughts, and this approach
appears to work well for me since I lack those esoteric sysadmin
skills.
</p>

<div id="outline-container-orgbcbce75">
<h2 id="orgbcbce75">Tell us a Story</h2>
<div id="text-orgbcbce75">
<p>
Once upon a time, I was tasked with patching an RPM, which is not in
my comfort zone, so my initial plan of attack was:
</p>

<ol>
<li>Use Vagrant to create a disposable CentOS system</li>
<li>SSH into this virtual machine to download needed tools</li>
<li>Run various unknown commands</li>
<li>Rinse and repeat this step until successful</li>
</ol>

<p>
Of course, once I figure out the solution, I need to document it for
others on my team, and maybe create a <i>repeatedable</i> script.
</p>

<p>
First step is well documented elsewhere, but today I learned (TIL)
you can <code>ssh</code> directly to your Vagrant-based virtual machine with
this little magic (<b>Note:</b> <i>client</i> is the name of my virtual
machine I specified in the <code>Vagrantfile</code>):
</p>

<div>
<pre>vagrant ssh-config --host clientvm &gt;&gt; $<span>HOME</span>/.ssh/config
</pre>
</div>

<p>
This command appends some lovely host-connection magic so you can
issue: <code>ssh clientvm</code>
</p>
</div>
</div>

<div id="outline-container-org8dff3db">
<h2 id="org8dff3db">Literate Devops</h2>
<div id="text-org8dff3db">
<p>
Instead of opening up a terminal to my virtual machine, I pop into
Emacs and load this sprint’s <i>note file</i><sup><a id="fnr.1" href="#fn.1">1</a></sup>, create a new header,
and enter the shell and ruby commands in this text file.
</p>

<p>
What good is this? Unlike a traditional terminal, this allows me to
<i>log</i>, <i>document</i> and <i>execute</i> each command.
</p>

<p>
For instance, here is a screen-shot of a section of my Emacs buffer:
</p>


<figure>
<img src="http://www.howardism.org/Technical/Emacs/literate-devops.png" alt="literate-devops.png">

</figure>

<p>
As an old bear with very little brains, my prose can explain the
background and purpose of each command.  Clicking the hyperlink
refreshes my memory of previous discoveries. A keychord <i>executes</i>
the code block…
</p>

<p>
Yes. I execute the commands from within Emacs.
</p>

<p>
Hitting <code>C-c C-c</code> (Control-C twice) runs the code (based on the
language).  This example runs in the shell. The results are placed
back into the file, which can be used by other code blocks (and <a href="http://orgmode.org/manual/results.html#results">many
other options</a>).
</p>

<p>
For instance, here is the first half of a section for downloading
the GPG Keys from a repository (the URL is placed in a <i>property</i>
that is shared among all code blocks in his section):
</p>


<figure>
<img src="http://www.howardism.org/Technical/Emacs/literate-devops-14.png" alt="literate-devops-14.png">

</figure>

<p>
The Shell script block (in the center of the screen-shot) uses
<code>wget</code> to download the HTML index file and parse and extract the key
file URLs.  We’ll have a Ruby script do that parsing, and since the
script may be a bit hairy, we’ll define it in another code block.
</p>

<p>
One technique from <a href="http://www.howardism.org/Technical/LP/introduction.html">literate programming</a> is the idea that one code
block can be inserted into another block (the reference is a name
within double angle brackets, <code>&lt;&lt;...&gt;&gt;</code>). Donald Knuth called this
feature WEB. Since it can accidentally conflict with some languages
(like Ruby), I have it off by default, but turn it on for this block
with the <code>noweb</code> parameter.
</p>

<p>
Here is the Ruby script. Having it in a separate Ruby-specific code
block allows me to turn on all the Ruby magic that Emacs can muster.
</p>


<figure>
<img src="http://www.howardism.org/Technical/Emacs/literate-devops-15.png" alt="literate-devops-15.png">

</figure>

<p>
The last step is to take the URLs produced by the first script and
feed them to another Shell script that will call <code>wget</code> to download
each:
</p>


<figure>
<img src="http://www.howardism.org/Technical/Emacs/literate-devops-16.png" alt="literate-devops-16.png">

</figure>

<p>
The <code>key-list</code> was the name of our original code block, as well as
the name of its results. We assign that list of results to a
variable, <code>LIST</code> that the shell script would access as <code>$LIST</code>.
</p>

<p>
This example demonstrated how literate programming can weave code
and data through different languages.
</p>
</div>
</div>

<div id="outline-container-org5d7bdd1">
<h2 id="org5d7bdd1">What about the Virtual Machine?</h2>
<p>
Normally, specifying <code>sh</code> as the code block’s <i>language</i>, tells
Emacs to run the code in my local system’s shell, but in this case,
I want it ran on my virtual machine (or on my development server in
my lab). I’ll describe two options for doing this, using <a href="http://www.emacswiki.org/TrampMode">Tramp</a> and
Babel Sessions.
</p>

<div id="outline-container-org2251b72">
<h3 id="org2251b72">Tramp to the Rescue</h3>
<div id="text-org2251b72">
<p>
Tramp is an Emacs feature that allows one to edit a file on a
remote machine using <code>ssh</code> and other protocols. For instance,
running the <code>find-file</code> function (bound to <code>C-x C-f</code>) lets you type
something like:
</p>

<pre>/ssh:howard.abrams@goblin.howardism.org:web/files/robot.txt
</pre>

<p>
If you put the following in your <code>.emacs</code> initialization file:
</p>

<div>
<pre><span>(</span><span>setq</span> tramp-default-method <span>"ssh"</span><span>)</span>
</pre>
</div>

<p>
And update your <code>~/.ssh/config</code> file to know what user account goes
with the host name, the file reference above can be shorten to:
</p>

<pre>/goblin.howardism.org:web/files/robot.txt
</pre>

<p>
Emacs looks for the <code>:</code> character to determine if Tramp should be
invoked.  Tramp uses SSH keys if available, or will prompt you for
a password if needed.
</p>


<p>
Each org-mode code block can specify a <code>:dir</code> option that specifies
where the code snippet should run, for instance, the following
blocks are equivalent:
</p>


<figure>
<img src="http://www.howardism.org/Technical/Emacs/literate-devops-9.png" alt="literate-devops-9.png">

</figure>

<p>
The <code>:dir</code> option allows full Tramp functionality, allowing me to
run a block on a different machine. Remember how I added my
<code>client</code> Vagrant virtual machine to my <code>~/.ssh/config</code> file?
</p>


<figure>
<img src="http://www.howardism.org/Technical/Emacs/literate-devops-10.png" alt="literate-devops-10.png">

</figure>

<p>
<i>But I need access to my machine behind a firewall!?</i>
</p>

<p>
My job deals with virtual machines running in a highly protected
data center, where I need to first log into jump boxes and bastion
machines. Tramp handles these sorts of hops. For instance:
</p>

<pre>/ssh:10.98.18.229|ssh:10.0.1.122|sudo:/etc/network/interfaces
</pre>

<p>
Uses my account name to log into the bastion machine, and
then uses my account name to <code>ssh</code> into a virtual machine running
in a private cloud. And then uses the <code>sudo</code> command to let me edit
a file owned by <code>root</code>.
</p>

<p>
Tramp pipe references works with the <code>:dir</code> option for <code>org-mode</code>
source blocks:
</p>


<figure>
<img src="http://www.howardism.org/Technical/Emacs/literate-devops-11.png" alt="literate-devops-11.png">

</figure>

<p>
Few tricks to keep in mind:
</p>

<ul>
<li>All but the last hop uses a pipe character, |, instead of the
colon character, :</li>
<li>If you use the pipe character, you need to specify all
protocols, like <code>ssh</code>, even if it is the default.</li>
<li>If your local machine’s operating system is different than the
machine you are connecting to, you need to fix a bug in
<code>org-mode</code>, which I can show you how to fix<sup><a id="fnr.2" href="#fn.2">2</a></sup>.</li>
</ul>
</div>
</div>

<div id="outline-container-org0d027af">
<h3 id="org0d027af">Using org-mode Sessions</h3>
<div id="text-org0d027af">
<p>
Another approach is to create a <i>session</i> that connects different
code blocks together. Each screen shot below, each code block below
has the same <code>session</code> value, <code>client</code> (which is conveniently the
same my virtual machine’s hostname, <code>client</code>):
</p>


<figure>
<img src="http://www.howardism.org/Technical/Emacs/literate-devops-2b.png" alt="literate-devops-2b.png">

</figure>

<p>
If I execute the first block, a <i>shell</i> is started in the
background, and it ssh’s into the machine. Note, to get this
working, you need to enable <i>password-less access</i> by placing your
SSH’s public key into the remote system’s <code>.ssh/authorized_keys</code>
file, or using the <code>ssh</code> Emacs package.<sup><a id="fnr.3" href="#fn.3">3</a></sup>
</p>

<p>
From this point on, each code block I execute with the <code>client</code>
session value, uses this connection, and the code is executed on the
remote machine (a virtual machine in this case, but that doesn’t
matter).
</p>

<p>
Either of these approaches works well, but the second approach,
allows me to set variables to create a particular state that other
blocks may expect.  However, this requires execution of each block in
order.
</p>

<p>
I have a third, more interactive, approach<sup><a id="fnr.4" href="#fn.4">4</a></sup> using <code>screen</code>, but
it doesn’t allow passing variables to the code, and as you’ll see
below, this is pretty important to me.
</p>


<p>
Regardless, I continue learning how to accomplish my goal, all the
while documenting and <i>validating</i> my steps. The end result can be
exported to web or wiki page.
</p>
</div>
</div>
</div>

<div id="outline-container-org39ccdca">
<h2 id="org39ccdca">What about Verbose Commands?</h2>
<div id="text-org39ccdca">
<p>
Yes, executing some commands can be quite time-consuming and
verbose, but often I need to search the results, and having the
results placed in an Emacs buffer allows better searching.
</p>

<p>
Often I use a collapsible “drawer” (which is just a way to identify
the beginning and end of the output):
</p>


<figure>
<img src="http://www.howardism.org/Technical/Emacs/literate-devops-3.png" alt="literate-devops-3.png">

</figure>

<p>
Place the cursor on this drawer and hit the <code>Tab</code> key to hide or
show the output:
</p>


<figure>
<img src="http://www.howardism.org/Technical/Emacs/literate-devops-4.png" alt="literate-devops-4.png">

</figure>
</div>
</div>

<div id="outline-container-org3721d6c">
<h2 id="org3721d6c">Can you Use the Output?</h2>
<div id="text-org3721d6c">
<p>
The results of some commands are often needed for the next command,
and I’m sure you just love using your mouse to copy and paste part
of the output, but I have a better way.
</p>

<p>
For instance, I needed a list of an RPM’s dependencies:
</p>


<figure>
<img src="http://www.howardism.org/Technical/Emacs/literate-devops-5.png" alt="literate-devops-5.png">

</figure>

<p>
Notice I <i>named</i> this source code block. Also notice how Emacs
automatically broke the results up into a table. By default, the
output from shell commands are split along newlines and
spaces.
</p>

<p>
I can feed the results of these execution to another code block.
The following source block creates a variable named <code>DEPENDS</code> that
uses rows 2 through 10 of the first column as an array.
</p>


<figure>
<img src="http://www.howardism.org/Technical/Emacs/literate-devops-6.png" alt="literate-devops-6.png">

</figure>

<p>
I then download the RPMs I want without any mouse interaction.
</p>
</div>
</div>

<div id="outline-container-orgdfa5caa">
<h2 id="orgdfa5caa">Setting Variables and Values</h2>
<div id="text-orgdfa5caa">
<p>
A key aspect of reusing devops programs (like a Chef
cookbooks) is the separation of the <i>code</i> from the <i>values</i> the code
uses…a key aspect of <i>any</i> program you reuse.
</p>

<p>
In my world, I create a new <code>org-mode</code> file for each sprint, and
each task or problem gets its own header and section. Each section
can have a <i>drawer</i> of properties, including variables shared among
all code blocks in that section.
</p>

<p>
To create a <i>section variable</i>, simply hit: <code>C-c C-x p</code>, and set the
<code>Property</code> to <code>var</code> and the value to a <i>variable=value</i>, as in:
</p>



<p>
This drawer can contain any code block values you wish, like
<code>session</code> or <code>results</code>. These values can then be overridden as
settings on the code block, as you see in this screen-shot:
</p>


<figure>
<img src="http://www.howardism.org/Technical/Emacs/literate-devops-8.png" alt="literate-devops-8.png">

</figure>

<p>
Setting variables and settings (especially the <code>session</code> setting),
ties the code blocks together.
</p>
</div>
</div>

<div id="outline-container-org874102b">
<h2 id="org874102b">Communicating with Others</h2>
<div id="text-org874102b">
<p>
While investigations in operations and administrations (as I’ve
described) are useful to oneself when understanding the problem
domain, I need to communicate the results with my team mates.
Since my <a href="https://github.com/howardabrams/dot-files/blob/master/emacs-mail.org#sending-email">Emacs configuration</a> allows me to send mail messages, I kick
off the function, <code>org-mime-org-buffer-htmlize</code>, which exports the
<code>org-mode</code> file to an HTML mail message (This function is part of
the latest <code>org-plus-contrib</code> package).
</p>

<p>
However, some times the exported results are not quite perfect.
</p>

<p>
For instance, some blocks may result in some JSON data, and since</p></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://www.howardism.org/Technical/Emacs/literate-devops.html">http://www.howardism.org/Technical/Emacs/literate-devops.html</a></em></p>]]>
            </description>
            <link>http://www.howardism.org/Technical/Emacs/literate-devops.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24315057</guid>
            <pubDate>Sat, 29 Aug 2020 10:10:35 GMT</pubDate>
        </item>
    </channel>
</rss>
