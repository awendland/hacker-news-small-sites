<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 50]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 50. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Wed, 15 Jul 2020 16:16:29 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-50.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Wed, 15 Jul 2020 16:16:29 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[Strange public IPv4 address assigned behind NAT (2019)]]>
            </title>
            <description>
<![CDATA[
Score 56 | Comments 57 (<a href="https://news.ycombinator.com/item?id=23827521">thread link</a>) | @rohan1024
<br/>
July 13, 2020 | https://broadbandforum.co/t/190267/ | <a href="https://web.archive.org/web/*/https://broadbandforum.co/t/190267/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://broadbandforum.co/t/190267/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23827521</guid>
            <pubDate>Tue, 14 Jul 2020 01:12:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Hacking with environment variables]]>
            </title>
            <description>
<![CDATA[
Score 174 | Comments 52 (<a href="https://news.ycombinator.com/item?id=23827486">thread link</a>) | @pentestercrab
<br/>
July 13, 2020 | https://www.elttam.com/blog/env/ | <a href="https://web.archive.org/web/*/https://www.elttam.com/blog/env/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                        

<p>On a recent project we gained the ability to specify environment variables but not the process that was executed.
We were also unable to control the contents of a file on disk, and bruteforcing process identifiers (PIDs) and file descriptors found no interesting results, eliminating <a href="https://www.elttam.com/blog/goahead/">remote LD_PRELOAD exploitation</a>.
Fortunately, a scripting language interpreter was executed which enabled us to execute arbitrary commands by specifying particular environment variables.
This blog post discusses how arbitrary commands can be executed by a range of scripting language interpreters when supplied with malicious environment variables.</p>



<p>A quick read of the <code>ENVIRONMENT</code> section of the <code>perlrun(1)</code> man page reveals plenty of environment variables worth investigating.
The <code>PERL5OPT</code> environment variable allows specifying command-line options, but is restricted to only accepting the options <code>CDIMTUWdmtw</code>.
This unfortunately means that <code>-e</code>, which allows supplying perl code to run, is out.</p>

<p>All is not lost though, as demonstrated in the <a href="https://github.com/HackerFantastic/exploits/blob/master/cve-2016-1531.sh">exploit</a> for CVE-2016-1531 by <a href="https://twitter.com/hackerfantastic">Hacker Fantastic</a>.
The exploit writes a malicious perl module to <code>/tmp/root.pm</code> and supplies the environment variables <code>PERL5OPT=-Mroot</code> and <code>PERL5LIB=/tmp</code> to achieve arbitrary code execution.
However this was an exploit for a local privilege escalation vulnerability and a generic technique should ideally not require access to the file system. Looking at <a href="https://twitter.com/bl4sty">blasty</a>’s <a href="https://haxx.in/blasty-vs-exim.sh">exploit</a> for the same CVE, the exploit did not require creating a file and used the environment variables <code>PERL5OPT=-d</code> and <code>PERL5DB=system("sh");exit;</code>.
The same environment variables were also used to <a href="https://old.reddit.com/r/netsec/comments/1dm8fv/hack_this_website_and_win_bitcoins_the_first/c9tm6j4/">solve a CTF challenge</a> in 2013.</p>

<p>One final nicety of a generic technique would be to use a single environment variable instead of two.
<a href="https://twitter.com/justinsteven">@justinsteven</a> found this was possible by leveraging <code>PERL5OPT=-M</code>.
While either <code>-m</code> or <code>-M</code> can be used to load a perl module, the <code>-M</code> option allows adding extra code after the module name.</p>

<h2 id="proof-of-concept">Proof of Concept</h2>

<figure>
  <figcaption>Figure-0: arbitrary code execution achieved using an environment variable against perl running an empty script (/dev/null)</figcaption>

<figure><pre><code data-lang="console"><span>$</span><span> </span>docker run <span>--env</span> <span>'PERL5OPT=-Mbase;print(`id`)'</span> perl:5.30.2 perl /dev/null
<span>uid=0(root) gid=0(root) groups=0(root)</span></code></pre></figure>

</figure>



<p>Reading the <code>ENVIRONMENT VARIABLES</code> section of the <code>python(1)</code> man page, <code>PYTHONSTARTUP</code> initially appears like it may be a piece of a straightforward solution.
It allows specifying a path to a Python script that will be executed prior to displaying the prompt in interactive mode.
The interactive mode requirement didn’t seem like it would be an issue as the <code>PYTHONINSPECT</code> environment variable can be used to enter interactive mode, the same as specifying <code>-i</code> on the command line.
However, the documentation for the <code>-i</code> option explains that <code>PYTHONSTARTUP</code> will not be used when python is started with a script to execute.
This means that <code>PYTHONSTARTUP</code> and <code>PYTHONINSPECT</code> cannot be combined and <code>PYTHONSTARTUP</code> only has an effect when the python REPL is immediately launched.
This ultimately means that <code>PYTHONSTARTUP</code> is not viable as it has no effect when executing a regular Python script.</p>

<p>Other environment variables which looked promising were <code>PYTHONHOME</code> and <code>PYTHONPATH</code>. Both of these will let you gain arbitrary code execution but require you to also be able to create directories and files on the filesystem. It may be possible to loosen those requirements through the use of the proc filesystem and/or ZIP files.</p>

<p>The majority of the remaining environment variables are simply checked if they contain a non-empty string, and if so, toggle a generally benign setting. One of the rare exceptions to this is <code>PYTHONWARNINGS</code>.</p>

<h2 id="making-progress-with-pythonwarnings">Making progress with PYTHONWARNINGS</h2>
<p>The documentation for <code>PYTHONWARNINGS</code> states <code>it is equivalent to specifying the -W option</code>. The <code>-W</code> option is used for warning control to specify which warnings and how often they are printed. The full form of argument is <code>action:message:category:module:line</code>. While warning control didn’t seem like a promising lead, that quickly changed after checking the implementation.</p>

<figure>
  <figcaption>Figure-1: Python-3.8.2/Lib/warnings.py</figcaption>

<figure><pre><code data-lang="python"><span>[...]</span>
<span>def</span> <span>_getcategory</span><span>(</span><span>category</span><span>):</span>
    <span>if</span> <span>not</span> <span>category</span><span>:</span>
        <span>return</span> <span>Warning</span>
    <span>if</span> <span>'.'</span> <span>not</span> <span>in</span> <span>category</span><span>:</span>
        <span>import</span> <span>builtins</span> <span>as</span> <span>m</span>
        <span>klass</span> <span>=</span> <span>category</span>
    <span>else</span><span>:</span>
        <span>module</span><span>,</span> <span>_</span><span>,</span> <span>klass</span> <span>=</span> <span>category</span><span>.</span><span>rpartition</span><span>(</span><span>'.'</span><span>)</span>
        <span>try</span><span>:</span>
            <span>m</span> <span>=</span> <span>__import__</span><span>(</span><span>module</span><span>,</span> <span>None</span><span>,</span> <span>None</span><span>,</span> <span>[</span><span>klass</span><span>])</span>
        <span>except</span> <span>ImportError</span><span>:</span>
            <span>raise</span> <span>_OptionError</span><span>(</span><span>"invalid module name: %r"</span> <span>%</span> <span>(</span><span>module</span><span>,))</span> <span>from</span> <span>None</span>
<span>[...]</span></code></pre></figure>

</figure>

<p>The above code shows that as long as our specified category contains a dot, we can trigger the import an arbitrary Python module.</p>

<p>The next problem is that the vast majority of modules from Python’s standard library run very little code when imported. They tend to just define classes to be used later, and even when they provide code to run, the code is typically <a href="https://docs.python.org/3/library/__main__.html">guarded with a check of the <code>__main__</code> variable</a> (to detect if the file has been imported or run directly).</p>

<p>An unexpected exception to this is the <a href="https://xkcd.com/353/">antigravity module</a>. The Python developers included an <a href="https://en.wikipedia.org/wiki/Easter_egg_(media)">easter egg</a> in <a href="https://github.com/python/cpython/commit/206e3074d34aeb5a4d0c1e24d970b6569f7ad702">2008</a> which can be triggered by running <code>import antigravity</code>. This import will immediately open your browser to the xkcd comic that joked that <code>import antigravity</code> in Python would grant you the ability to fly.</p>

<p>As for how the <code>antigravity</code> module opens your browser, it uses another module from the standard library called <code>webbrowser</code>. This module checks your PATH for a large variety of browsers, including mosaic, opera, skipstone, konqueror, chrome, chromium, firefox, links, elinks and lynx. It also accepts an environment variable <code>BROWSER</code> that lets you specify which process should be executed. It is not possible to supply arguments to the process in the environment variable and the xkcd comic URL is the one hard-coded argument for the command.</p>

<p>The ability to turn this into arbitrary code execution depends on what other executables are available on the system.</p>

<h2 id="leveraging-perl-for-arbitrary-code-execution">Leveraging Perl for Arbitrary Code Execution</h2>

<p>One approach is to leverage Perl which is commonly installed on systems and is even available in the standard Python docker image. However, the <code>perl</code> binary cannot itself be used. This is because the first and only argument is the xkcd comic URL. The comic URL argument will cause an error and the process to exit without the <code>PERL5OPT</code> environment variable being used.</p>

<figure>
  <figcaption>Figure-2: PERL5OPT having no effect when a URL is passed to perl</figcaption>

<figure><pre><code data-lang="console"><span>$</span><span> </span>docker run <span>-e</span> <span>'PERL5OPT=-Mbase;print(`id`);exit'</span> perl:5.30.2 perl https://xkcd.com/353/
<span>Can't open perl script "https://xkcd.com/353/": No such file or directory</span></code></pre></figure>

</figure>

<p>Fortunately, when Perl is available it also common to have the default Perl scripts available, such as perldoc and perlthanks. These scripts will also error and exit with an invalid argument, but the error in this case happens later than the processing of the <code>PERL5OPT</code> environment variable. This means you can leverage the Perl environment variable payload detailed earlier in this blog post.</p>

<figure>
  <figcaption>Figure-3: PERL5OPT working as intended with perldoc and perlthanks</figcaption>

<figure><pre><code data-lang="console"><span>$</span><span> </span>docker run <span>-e</span> <span>'PERL5OPT=-Mbase;print(`id`);exit'</span> perl:5.30.2 perldoc https://xkcd.com/353/
<span>uid=0(root) gid=0(root) groups=0(root)
</span><span>$</span><span> </span>run <span>-e</span> <span>'PERL5OPT=-Mbase;print(`id`);exit'</span> perl:5.30.2 perlthanks https://xkcd.com/353/
<span>uid=0(root) gid=0(root) groups=0(root)</span></code></pre></figure>

</figure>

<h2 id="proof-of-concept-1">Proof of Concept</h2>

<figure>
  <figcaption>Figure-4: arbitrary code execution achieved using multiple environment variables against Python 2 and Python 3</figcaption>

<figure><pre><code data-lang="console"><span>$</span><span> </span>docker run <span>-e</span> <span>'PYTHONWARNINGS=all:0:antigravity.x:0:0'</span> <span>-e</span> <span>'BROWSER=perlthanks'</span> <span>-e</span> <span>'PERL5OPT=-Mbase;print(`id`);exit;'</span> python:2.7.18 python /dev/null
<span>uid=0(root) gid=0(root) groups=0(root)
Invalid -W option ignored: unknown warning category: 'antigravity.x'

</span><span>$</span><span> </span>docker run <span>-e</span> <span>'PYTHONWARNINGS=all:0:antigravity.x:0:0'</span> <span>-e</span> <span>'BROWSER=perlthanks'</span> <span>-e</span> <span>'PERL5OPT=-Mbase;print(`id`);exit;'</span> python:3.8.2 python /dev/null
<span>uid=0(root) gid=0(root) groups=0(root)
Invalid -W option ignored: unknown warning category: 'antigravity.x'</span></code></pre></figure>

</figure>



<p>A <a href="https://research.securitum.com/prototype-pollution-rce-kibana-cve-2019-7609/">blog post</a> by <a href="https://twitter.com/securitymb">Michał Bentkowski</a> provided a payload for exploiting Kibana (CVE-2019-7609). A prototype pollution vulnerability was used to set arbitrary environment variables which resulted in arbitrary command execution. Michał’s payload used the <code>NODE_OPTIONS</code> environment variable and the <a href="https://en.wikipedia.org/wiki/Procfs">proc filesystem</a>, specifically <code>/proc/self/environ</code>.</p>

<p>Although Michał’s technique was creative and worked perfectly for their vulnerability, the technique is not always guaranteed to work and has some constraints that would be nice to remove.</p>

<p>The first constraint is that it using <code>/proc/self/environ</code> is only viable if the contents can be made to be syntactically valid JavaScript. This requires being able to create an environment variable and have it appear first in the contents of <code>/proc/self/environ</code>, or knowing/bruteforcing the environment variable’s name that will appear first and overwriting it’s value.</p>

<p>Another constraint, as the first environment variable’s value finishes with a single line comment (<code>//</code>). Therefore, any newline character in other environment variables will likely cause a syntax error and prevent the payload from executing. The use of multi-line comments (<code>/*</code>) will not fix this issue as they must be closed to be syntactically valid. Therefore, in the rare case that an environment variable contains a newline character, it is required to know/bruteforce the environment variable’s name and overwrite it’s value to a new value that does not contain a newline.</p>

<p>Removing these contraints is an exercise left for the reader.</p>

<h2 id="proof-of-concept-2">Proof of Concept</h2>

<figure>
  <figcaption>Figure-5: achieving arbitrary code execution with environment variables against NodeJS by Michał Bentkowski</figcaption>

<figure><pre><code data-lang="console"><span>$</span><span> </span>docker run <span>-e</span> <span>'NODE_VERSION=console.log(require("child_process").execSync("id").toString());//'</span> <span>-e</span> <span>'NODE_OPTIONS=--require /proc/self/environ'</span> node:14.2.0 node /dev/null
<span>uid=0(root) gid=0(root) groups=0(root)</span></code></pre></figure>

</figure>



<p>If you run <code>ltrace -e getenv php /dev/null</code> you will find PHP uses the <code>PHPRC</code> environment variable.
The environment variable is used …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.elttam.com/blog/env/">https://www.elttam.com/blog/env/</a></em></p>]]>
            </description>
            <link>https://www.elttam.com/blog/env/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23827486</guid>
            <pubDate>Tue, 14 Jul 2020 01:07:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The AirPods Pro “Rattlegate”]]>
            </title>
            <description>
<![CDATA[
Score 371 | Comments 314 (<a href="https://news.ycombinator.com/item?id=23826070">thread link</a>) | @dewey
<br/>
July 13, 2020 | https://annoying.technology/posts/abea6876cf4f2e13/ | <a href="https://web.archive.org/web/*/https://annoying.technology/posts/abea6876cf4f2e13/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><img src="https://d33wubrfki0l68.cloudfront.net/a57da8f4dbb8954a0649e58235d5555af26d4c2f/d294d/media/rattlegate.jpg"></p><p>The AirPods Pro “Rattlegate”</p><p>The first generation of the AirPods was generally regarded as a perfect product. “Apple at its best!” was the universally accepted opinion.</p><p>I used them for a long time. No speaker issues, no battery issues.</p><p>Excited for the noise cancelling feature I ordered the AirPods Pro and for the first few months everything was fine. One day the left AirPod started buzzing every time I was moving my head. Slightly tilting my head would result in a buzzing noise with changing intensity depending on how my head moved.</p><p>Support agreed that this is a problem and sent a new AirPod.</p><p>A few weeks later the right AirPod started to produce weird rattling noises. It sounded like some tiny part fell off and was now bouncing around in the AirPod. It also started to behave weird as soon as there was a bit of wind.</p><p>Support agreed that this is a problem and sent a new AirPod.</p><p>Days later it was the left AirPod’s turn and it’s now rattling again.</p><p>There’s something very wrong with this product line and just getting a new one every few months is — financially and ecologically — not sustainable as they end up in a landfill. I’m also <a href="https://forums.macrumors.com/threads/airpods-pro-rattlegate.2233658/">far from being the only one</a> having this issue.</p></div></div>]]>
            </description>
            <link>https://annoying.technology/posts/abea6876cf4f2e13/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23826070</guid>
            <pubDate>Mon, 13 Jul 2020 22:02:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Python malware on the rise]]>
            </title>
            <description>
<![CDATA[
Score 256 | Comments 58 (<a href="https://news.ycombinator.com/item?id=23824689">thread link</a>) | @vesche
<br/>
July 13, 2020 | https://www.cyborgsecurity.com/python-malware-on-the-rise/ | <a href="https://web.archive.org/web/*/https://www.cyborgsecurity.com/python-malware-on-the-rise/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        <div>
                        <p>
                July 13, 2020            </p>
            
			
            <hr>
                        <p><img width="2560" height="1646" src="https://www.cyborgsecurity.com/wp-content/uploads/2020/07/david-clode-d0CasEMHDQs-unsplash-scaled.jpg" alt="" srcset="https://www.cyborgsecurity.com/wp-content/uploads/2020/07/david-clode-d0CasEMHDQs-unsplash-scaled.jpg 2560w, https://www.cyborgsecurity.com/wp-content/uploads/2020/07/david-clode-d0CasEMHDQs-unsplash-300x193.jpg 300w, https://www.cyborgsecurity.com/wp-content/uploads/2020/07/david-clode-d0CasEMHDQs-unsplash-1024x658.jpg 1024w, https://www.cyborgsecurity.com/wp-content/uploads/2020/07/david-clode-d0CasEMHDQs-unsplash-768x494.jpg 768w, https://www.cyborgsecurity.com/wp-content/uploads/2020/07/david-clode-d0CasEMHDQs-unsplash-1536x988.jpg 1536w, https://www.cyborgsecurity.com/wp-content/uploads/2020/07/david-clode-d0CasEMHDQs-unsplash-2048x1317.jpg 2048w" sizes="(max-width: 2560px) 100vw, 2560px">            </p>
                        <p>The vast majority of serious malware&nbsp;<a href="https://software.imdea.org/~juanca/papers/malsource_raid16.pdf">over the past 30 years</a>&nbsp;has been written in Assembly or compiled languages such as C, C++, and Delphi. However, ever-increasing over the past decade, a large amount of malware has been written in interpreted languages, such as Python. The low barrier to entry, ease of use, rapid development process, and massive library collection has made Python attractive for millions of developers- including malware authors. Python has quickly become a standard language in which threat actors create Remote Access Trojans (RATs), information stealers, and vulnerability exploit tools. As&nbsp;<a href="https://www.techrepublic.com/article/python-is-eating-the-world-how-one-developers-side-project-became-the-hottest-programming-language-on-the-planet/">Python continues to grow radically in popularity</a>&nbsp;and the&nbsp;<a href="https://research.checkpoint.com/2019/malware-against-the-c-monoculture/">C malware monoculture</a>&nbsp;continues to be challenged, it would seem only certain that Python will be increasingly utilized as malware in cyber attacks.</p>

<p><img src="https://www.cyborgsecurity.com/wp-content/uploads/2020/07/python_growth.jpg" alt="" width="770" height="660" srcset="https://www.cyborgsecurity.com/wp-content/uploads/2020/07/python_growth.jpg 770w, https://www.cyborgsecurity.com/wp-content/uploads/2020/07/python_growth-300x257.jpg 300w, https://www.cyborgsecurity.com/wp-content/uploads/2020/07/python_growth-768x658.jpg 768w" sizes="(max-width: 770px) 100vw, 770px"></p>
<p><span>Image Source: Stack Overflow</span></p>

<p>In comparison to a standard compiled language like C, writing malware in Python comes with a whole host of difficulties. The first being that Python is required to be installed on the operating system in order to interpret and execute Python code. However, as we’ll see in the next section, a Python program can easily be converted into a native executable using a variety of different methods.</p>
<p>Malware written in Python will also have adverse effects on file size, memory footprint, and processing power. Serious malware is often designed to be small, stealthy, have low memory footprint, and use limited processing power. A compiled malware sample written in C might be 200 KB, while a comparable malware sample written in Python might be 20 MB after converted into an executable. Both the CPU &amp; RAM usage will also be significantly higher when using an interpreted language.</p>
<p>However, it’s 2020 and the digital landscape isn’t what it once was. The internet is faster than it’s ever been, our computers have more memory &amp; storage capacity than ever, and CPUs get faster every year. Python is also more ubiquitous than ever, coming pre-installed on macOS and most all Linux distributions by default.</p>

<p>Microsoft Windows is still the primary target for most malicious campaigns, and it does not come with Python installed by default. Therefore, for threat actors to distribute their malware effectively they must convert their Python code into an executable format. There are many methods to “compile Python” into a native executable. Let’s take a look at the few most popular methods…</p>
<h3>PyInstaller</h3>
<p><img src="https://www.cyborgsecurity.com/wp-content/uploads/2020/07/pyinstaller.png" alt="" width="500" height="100" srcset="https://www.cyborgsecurity.com/wp-content/uploads/2020/07/pyinstaller.png 500w, https://www.cyborgsecurity.com/wp-content/uploads/2020/07/pyinstaller-300x60.png 300w" sizes="(max-width: 500px) 100vw, 500px"></p>

<p><a href="https://www.pyinstaller.org/">PyInstaller</a>&nbsp;is capable of building Python applications into stand-alone executables for Windows, Linux, macOS and more by “freezing” Python code. It is one of the most popular methods to convert Python code into executable format and has been used widely for both legitimate and malicious purposes.</p>
<p>Let’s create a simple “Hello, world!” program in Python and freeze it into a stand-alone executable using PyInstaller:</p>
<pre><code>$ cat hello.py
print('Hello, world!')

$ pyinstaller --onefile hello.py
...

$ ./dist/hello 
Hello, world!

$ file dist/hello 
dist/hello: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32, BuildID[sha1]=294d1f19a085a730da19a6c55788ec08c2187039, stripped

$ du -sh dist/hello 
7.0M    dist/hello
</code></pre>
<p>This process created a portable, stand-alone Linux ELF (Executable and Linkable Format) which is the equivalent to an EXE on Windows. Now let’s create and compile a “Hello, world!” program in C on Linux for comparison:</p>
<pre><code>$ cat hello.c
#include &lt;stdio.h&gt;
int main() {
    printf("Hello, world!");
}

$ gcc hello.c -o hello

$ ./hello 
Hello, world!

$ file hello
hello: ELF 64-bit LSB pie executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=480c7c75e09c169ab25d1b81bd28f66fde08da7c, for GNU/Linux 3.2.0, not stripped

$ du -sh hello
20K hello
</code></pre>
<p>Notice how much larger the file size is: 7 MB (Python) vs 20 KB (C)! This demonstrates the major drawback we discussed previously about file size and memory usage. The Python executable is so much larger due to the fact it must bundle the Python interpreter (as a shared object file on Linux) inside the executable itself in order to run.</p>
<h3>py2exe</h3>
<p><a href="https://www.py2exe.org/">Py2exe</a>&nbsp;is another popular method to convert Python code into Windows EXE (executable) format that can be run natively. Similar to PyInstaller, it bundles the Python interpreter with your Python code to make a portable executable. Py2exe is likely to fall out of style with time as it has not been supported past Python 3.4, this is due to&nbsp;<a href="https://docs.python.org/3/whatsnew/3.6.html#cpython-bytecode-changes">the bytecode in CPython being heavily changed in Python 3.6 and beyond</a>.</p>
<p>Py2exe utilizes distutils and requires a small&nbsp;<code>setup.py</code>&nbsp;script to be created to produce an executable. Let’s create an example “Hello, world!” executable using py2exe:</p>
<pre><code>&gt; type hello.py
print('Hello, world!')

&gt; type setup.py
import py2exe
from distutils.core import setup
setup(
    console=['hello.py'],
    options={'py2exe': {'bundle_files': 1, 'compressed': True}},
    zipfile=None
)

&gt; python setup.py py2exe
...

&gt; dist\hello.exe
Hello, world!
</code></pre>
<p>The&nbsp;<code>hello.exe</code>&nbsp;created by py2exe is similar in size to PyInstaller coming in at 6.83 MB.</p>
<p><img src="https://www.cyborgsecurity.com/wp-content/uploads/2020/07/hello_exe.png" alt="" width="369" height="508" srcset="https://www.cyborgsecurity.com/wp-content/uploads/2020/07/hello_exe.png 369w, https://www.cyborgsecurity.com/wp-content/uploads/2020/07/hello_exe-218x300.png 218w" sizes="(max-width: 369px) 100vw, 369px"></p>
<h3>Nuitka</h3>
<p><img src="https://www.cyborgsecurity.com/wp-content/uploads/2020/07/nuitka.png" alt="" width="120" height="24"></p>
<p><a href="https://nuitka.net/">Nuitka</a>&nbsp;is perhaps the most underutilized, and yet more advanced method of compiling Python code to an executable. It translates Python code into a C program that then is linked against libpython to execute code the same as CPython. Nuitka can use a variety of C compilers including gcc, clang, MinGW64, Visual Studio 2019+, and clang-cl to convert your Python code to C.</p>
<p>Let’s create a “Hello, world!” Python program on Linux and compile it using Nuitka:</p>
<pre><code>$ cat hello.py
print('Hello, world!')

$ nuitka3 hello.py
...

$ ./hello.bin
Hello, world!

$ file hello.bin 
hello.bin: ELF 64-bit LSB pie executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=eb6a504e8922f8983b23ce6e82c45a907c6ebadf, for GNU/Linux 3.2.0, stripped

$ du -sh hello.bin
432K    hello.bin
</code></pre>
<p>Nuitka produced a portable binary very simply, and at 432 KB is a fraction of the size of what PyInstaller or py2exe can produce! How is Nuitka able to do this? Let’s take a look at the build folder:</p>
<pre><code>$ cloc hello.build/
-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
C                               11           2263            709           8109
C/C++ Header                     1              1              0              7
-------------------------------------------------------------------------------
SUM:                            12           2264            709           8116
-------------------------------------------------------------------------------
</code></pre>
<p>Nuitka produced over 8,000 lines of C code from our 1 line Python program. The way Nuitka works is it actually translates the Python modules into C code and then uses libpython and static C files of its own to execute in the same way as CPython does.</p>
<p>This is very impressive, and it seems highly likely the Nuitka “Python compiler” will see further adoption as time goes on. As we’ll see later, Nuitka might have a further, built-in advantage in protection against Reverse Engineering (RE). There already exist several tools to easily analyze binaries produced by PyInstaller and py2exe to recover Python source code. However, by Nuitka translating the Python code to C it is much more difficult to reverse engineer.</p>

<p><img src="https://www.cyborgsecurity.com/wp-content/uploads/2020/07/tools.png" alt="" width="557" height="383" srcset="https://www.cyborgsecurity.com/wp-content/uploads/2020/07/tools.png 557w, https://www.cyborgsecurity.com/wp-content/uploads/2020/07/tools-300x206.png 300w" sizes="(max-width: 557px) 100vw, 557px"></p>
<p>Python malware can take advantage of a massive ecosystem of open-source Python packages and repositories. Almost anything you could think of, someone has already built it using Python. This is a huge advantage to malware authors as simplistic capabilities can be cherry-picked from the open web and more complex capabilities likely don’t need to be written from scratch.</p>
<p>Let’s take a look at three simple, yet powerful tool examples:</p>
<ol>
<li>Code Obfuscation</li>
<li>Taking Screenshots</li>
<li>Performing Web Requests</li>
</ol>
<h3>Tool Example 1 – Obfuscation</h3>
<p>Malware authors using Python have many libraries they could use to obfuscate their Python code to make code readability much more difficult, such as:&nbsp;<a href="https://github.com/liftoff/pyminifier">pyminifier</a>&nbsp;and&nbsp;<a href="https://github.com/dashingsoft/pyarmor">pyarmor</a>.</p>
<p>Here’s a small example of how&nbsp;<code>pyarmor</code>&nbsp;can obfuscate Python code:</p>
<pre><code>$ cat hello.py 
print('Hello, world!')

$ pyarmor obfuscate hello.py
...

$ cat dist/hello.py
from pytransform import pyarmor_runtime
pyarmor_runtime()
__pyarmor__(__name__, __file__, b'\x50\x59\x41\x52\x4d\x4f\x52\x00\x00\x03\x08\x00\x55\x0d\x0d\x0a\x04\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x40\x00\x00\x00\xd5\x00\x00\x00\x00\x00\x00\x18\xf4\x63\x79\xf6\xaa\xd7\xbd\xc8\x85\x25\x4e\x4f\xa6\x80\x72\x9f\x00\x00\x00\x00\x00\x00\x00\x00\xec\x50\x8c\x64\x26\x42\xd6\x01\x10\x54\xca\x9c\xb6\x30\x82\x05\xb8\x63\x3f\xb0\x96\xb1\x97\x0b\xc1\x49\xc9\x47\x86\x55\x61\x93\x75\xa2\xc2\x8c\xb7\x13\x87\xff\x31\x46\xa5\x29\x41\x9d\xdf\x32\xed\x7a\xb9\xa0\xe1\x9a\x50\x4a\x65\x25\xdb\xbe\x1b\xb6\xcd\xd4\xe7\xc2\x97\x35\xd3\x3e\xd3\xd0\x74\xb8\xd5\xab\x48\xd3\x05\x29\x5e\x31\xcf\x3f\xd3\x51\x78\x13\xbc\xb3\x3e\x63\x62\xca\x05\xfb\xac\xed\xfa\xc1\xe3\xb8\xa2\xaa\xfb\xaa\xbb\xb5\x92\x19\x73\xf0\x78\xe4\x9f\xb0\x1c\x7a\x1c\x0c\x6a\xa7\x8b\x19\x38\x37\x7f\x16\xe8\x61\x41\x68\xef\x6a\x96\x3f\x68\x2b\xb7\xec\x60\x39\x51\xa3\xfc\xbd\x65\xdb\xb8\xff\x39\xfe\xc0\x3d\x16\x51\x7f\xc9\x7f\x8b\xbd\x88\x80\x92\xfe\xe1\x23\x61\xd0\xf1\xd3\xf8\xfa\xce\x86\x92\x6d\x4d\xd7\x69\x50\x8b\xf1\x09\x31\xcc\x19\x15\xef\x37\x12\xd4\xbd\x3d\x0d\x6e\xbb\x28\x3e\xac\xbb\xc4\xdb\x98\xb5\x85\xa6\x19\x11\x74\xe9\xab\xdf', 1)

$ python dist/hello.py
Hello, world!
</code></pre>

<h3>Tool Example 2 – Screenshots</h3>
<p>Information stealing malware will often come with the capability to take screenshots of the users desktop in order to steal sensitive …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.cyborgsecurity.com/python-malware-on-the-rise/">https://www.cyborgsecurity.com/python-malware-on-the-rise/</a></em></p>]]>
            </description>
            <link>https://www.cyborgsecurity.com/python-malware-on-the-rise/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23824689</guid>
            <pubDate>Mon, 13 Jul 2020 19:34:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Deschooling Society (1970)]]>
            </title>
            <description>
<![CDATA[
Score 188 | Comments 179 (<a href="https://news.ycombinator.com/item?id=23821855">thread link</a>) | @minerjoe
<br/>
July 13, 2020 | https://davidtinapple.com/illich/1970_deschooling.html | <a href="https://web.archive.org/web/*/https://davidtinapple.com/illich/1970_deschooling.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div width="700">
				<tbody><tr>
					<td><span size="+2">DESCHOOLING SOCIETY</span><p>
						
						&nbsp;
						IVAN ILLICH</p><p>
						
						&nbsp;
						
						&nbsp;
						Contents</p><p>
						
						&nbsp;
						
						Introduction xix </p><p>
						
						<a href="#1">1. Why We Must Disestablish School</a></p><p>
						
						<a href="#2">2. Phenomenology of School<br>
						</a><br>
						<a href="#3">3. Ritualization of Progress<br>
						</a><br>
						<a href="#4">4. Institutional Spectrum</a></p><p>
						
						<a href="#5">5. Irrational Consistencies</a></p><p>
						
						<a href="#6">6. Learning Webs</a></p><p>
						
						<a href="#7">7. Rebirth of Epimethean Man</a></p><p>
						
						&nbsp;
						
						
						
						
						&nbsp;
						
						Introduction</p><p>
						
						
						&nbsp;
						
						I owe my interest in public education to Everett Reimer. Until we first met in Puerto Rico in 1958, I had never questioned the value of extending obligatory schooling to all people. Together we have come to realize that for most men the right to learn is curtailed by the obligation to attend school. The essays given at CIDOC and gathered in this book grew out of memoranda which I submitted to him, and which we discussed during 1970, the thirteenth year of our dialogue. The last chapter contains my afterthoughts on a conversation with Erich Fromm on Bachofen's Mutterrecht.</p><p>
						
						
						Since 1967 Reimer and I have met regularly at the Center for Intercultural Documentation (CIDOC) in Cuernavaca, Mexico. Valentine Borremans, the director of the Center, also joined our dialogue, and constantly urged me to test our thinking against the realities of Latin America and Africa. This book reflects her conviction that the ethos, not just the institutions, of society ought to be "deschooled."</p><p>
						
						
						Universal education through schooling is not feasible. It would be no more feasible if it were attempted by means of alternative institutions built on the style of present schools. Neither new attitudes of teachers toward their pupils nor the proliferation of educational hardware or software (in classroom or bedroom), nor finally the attempt to expand the pedagogue's responsibility until it engulfs his pupils' lifetimes will deliver universal education. The current search for new educational funnels must be reversed into the search for their institutional inverse: educational webs which heighten the opportunity for each one to transform each moment of his living into one of learning, sharing, and caring. We hope to contribute concepts needed by those who conduct such counterfoil research on education--and also to those who seek alternatives to other established service industries.</p><p>
						
						
						On Wednesday mornings, during the spring and summer of 1970, I submitted the various parts of this book to the participants in our CIDOC programs in Cuernavaca. Dozens of them made suggestions or provided criticisms. Many will recognize their ideas in these pages, especially Paulo Freire, Peter Berger, and Jos? Maria Bulnes, as well as Joseph Fitzpatrick, John Holt, Angel Quintero, Layman Allen, Fred Goodman, Gerhard Ladner, Didier Piveteau, Joel Spring, Augusto Salazar Bondy, and Dennis Sullivan. Among my critics, Paul Goodman most radically obliged me to revise my thinking. Robert Silvers provided me with brilliant editorial assistance on Chapters 1, 3, and 6, which have appeared in The New York Review of Books.</p><p>
						
						
						Reimer and I have decided to publish separate views of our joint research. He is working on a comprehensive and documented exposition, which will be subjected to several months of further critical appraisal and be published late in 1971 by Doubleday &amp; Company. Dennis Sullivan, who acted as secretary at the meetings between Reimer and myself, is preparing a book for publication in the spring of 1972 which will place my argument in the context of current debate about public schooling in the United States. I offer this volume of essays now in the hope that it will provoke additional critical contributions to the sessions of a seminar on "Alternatives in Education" planned at CIDOC in Cuernavaca for 1972 and 1973.</p><p>
						
						
						I intend to discuss some perplexing issues which are raised once we embrace the hypothesis that society can be deschooled; to search for criteria which may help us distinguish institutions which merit development because they support learning in a deschooled milieu; and to clarify those personal goals which would foster the advent of an Age of Leisure (schole) as opposed to an economy dominated by service industries. </p><p>
						
						
						IVAN ILLICH</p><p>
						
						
						&nbsp;
						
						
						CIDOC</p><p>
						
						
						Cuernavaca, Mexico</p><p>
						
						
						November, 1970<br>
						<a name="1"></a>.</p><a href="#top"><span size="-1">index&nbsp;</span></a><span size="+1">1.  Why We Must Disestablish School</span><p>
						
						
						&nbsp;
						
						
						Many students, especially those who are poor, intuitively know what the schools do for them. They school them to confuse process and substance. Once these become blurred, a new logic is assumed: the more treatment there is, the better are the results; or, escalation leads to success. The pupil is thereby "schooled" to confuse teaching with learning, grade advancement with education, a diploma with competence, and fluency with the ability to say something new. His imagination is "schooled" to accept service in place of value. Medical treatment is mistaken for health care, social work for the improvement of community life, police protection for safety, military poise for national security, the rat race for productive work. Health, learning, dignity, independence, and creative endeavor are defined as little more than the performance of the institutions which claim to serve these ends, and their improvement is made to depend on allocating more resources to the management of hospitals, schools, and other agencies in question.</p><p>
						
						
						In these essays, I will show that the institutionalization of values leads inevitably to physical pollution, social polarization, and psychological impotence: three dimensions in a process of global degradation and modernized misery. I will explain how this process of degradation is accelerated when nonmaterial needs are transformed into demands for commodities; when health, education, personal mobility, welfare, or psychological healing are defined as the result of services or "treatments." I do this because I believe that most of the research now going on about the future tends to advocate further increases in the institutionalization of values and that we must define conditions which would permit precisely the contrary to happen. We need research on the possible use of technology to create institutions which serve personal, creative, and autonomous interaction and the emergence of values which cannot be substantially controlled by technocrats. We need counterfoil research to current futurology.</p><p>
						
						
						I want to raise the general question of the mutual definition of man's nature and the nature of modern institutions which characterizes our world view and language. To do so, I have chosen the school as my paradigm, and I therefore deal only indirectly with other bureaucratic agencies of the corporate state: the consumer-family, the party, the army, the church, the media. My analysis of the hidden curriculum of school should make it evident that public education would profit from the deschooling of society, just as family life, politics, security, faith, and communication would profit from an analogous process.</p><p>
						
						
						I begin my analysis, in this first essay, by trying to convey what the deschooling of a schooled society might mean. In this context, it should be easier to understand my choice of the five specific aspects relevant to this process with which I deal in the subsequent chapters.</p><p>
						
						
						Not only education but social reality itself has become schooled. It costs roughly the same to school both rich and poor in the same dependency. The yearly expenditure per pupil in the slums and in the rich suburbs of any one of twenty U.S. cities lies in the same range-and sometimes is favorable to the poor. Rich and poor alike depend on schools and hospitals which guide their lives, form their world view, and define for them what is legitimate and what is not. Both view doctoring oneself as irresponsible, learning on one's own as unreliable, and community organization, when not paid for by those in authority, as a form of aggression or subversion. For both groups the reliance on institutional treatment renders independent accomplishment suspect. The progressive underdevelopment of self- and community-reliance is even more typical in Westchester than it is in the northeast of Brazil. Everywhere not only education but society as a whole needs "deschooling."</p><p>
						
						
						Welfare bureaucracies claim a professional, political, and financial monopoly over the social imagination, setting standards of what is valuable and what is feasible. This monopoly is at the root of the modernization of poverty. Every simple need to which an institutional answer is found permits the invention of a new class of poor and a new definition of poverty. Ten years ago in Mexico it was the normal thing to be born and to die in one's own home and to be buried by one's friends. Only the soul's needs were taken care of by the institutional church. Now to begin andend life at home become signs either of poverty or of special privilege. Dying and death have come under the institutional management of doctors and undertakers.</p><p>
						
						
						Once basic needs have been translated by a society into demands for scientifically produced commodities, poverty is defined by standards which the technocrats can change at will. Poverty then refers to those who have fallen behind an advertised ideal of consumption in some important respect. In Mexico the poor are those who lack three years of schooling, and in New York they are those who lack twelve.</p><p>
						
						
						The poor have always been socially powerless. The increasing reliance on institutional care adds a new dimension to their helplessness: psychological …</p></td></tr></tbody></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://davidtinapple.com/illich/1970_deschooling.html">https://davidtinapple.com/illich/1970_deschooling.html</a></em></p>]]>
            </description>
            <link>https://davidtinapple.com/illich/1970_deschooling.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23821855</guid>
            <pubDate>Mon, 13 Jul 2020 15:34:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Meddling Middlemen of Academia]]>
            </title>
            <description>
<![CDATA[
Score 82 | Comments 50 (<a href="https://news.ycombinator.com/item?id=23819130">thread link</a>) | @Topolomancer
<br/>
July 13, 2020 | https://bastian.rieck.me/blog/posts/2020/middlemen/ | <a href="https://web.archive.org/web/*/https://bastian.rieck.me/blog/posts/2020/middlemen/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        <p>One of the strangest phenomena in academia is the reliance on publishing
companies. In this article, I want to outline some of the issues that
arise when working with publishers. I shall also endeavour to provide
some solutions to improve this collaboration.</p>
<p>Before we start, a brief <strong>disclaimer</strong>: this article will use an
amalgamation of different incidents that involved either myself, my
colleagues, or my friends.  Names&nbsp;(of the publishing companies)
have been withheld because I do not think it fair to use my ‘soapbox’
without giving the <em>other</em> side a chance to respond. Moreover,
everything I write here pertains to publishing your research in
a journal. Conference publishing—at least in machine learning—is
a joy<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup>. Plus, there <em>are</em> good examples of journals for machine
learning papers, foremost of them the <a href="http://www.jmlr.org/">Journal of Machine Learning
Research</a>. The ‘adversaries’ in this article are
rather the ‘big’ publishing companies and their practices. With that out
of the way, let us take a look at the state of the art!</p>

<p>If you are new to science, at some point, you will probably have to deal
with an established publishing company to get your article published.
The deal usually works like this:</p>
<ol>
<li>
<p>You look for a journal you want to publish in and submit your article
to the journal. This already often involves jumping through some
hoops. Without knowing the eventual fate of your article, you often
already have to abide by certain arbitrary formatting guidelines or
completely ‘butcher’ your article for the submission<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup> by shifting
content around. However, this can be all accepted and endured because
of course, you want something from <em>them</em>, i.e. a published,
citable publication!</p>
</li>
<li>
<p>The journal then receives your submission—often through a web
interface that was developed with all the UX/UI knowledge of the
1980s<sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup> and has <em>never</em> been updated since—and this is where it gets
slightly <em>murky</em>. Another person—typically the editor of the
journal—now decides whether to accept the paper for reviewing, or
whether to provide you with a desk reject. A desk reject usually cannot
be appealed. It just shows you the door and leaves you to try again
with another journal&nbsp;(more murkiness here). For early-career
researchers like Ph.D. students submitting their first paper,
this can be highly discouraging. I see the reason for reducing the
workload on reviewers, of course, but I also heard of academic feuds
that were carried out on the backs of Ph.D. students and their
publications.</p>
</li>
<li>
<p>Assuming your paper ‘survived’ the desk reject, it will now be sent
to reviewers or referees. Their job is to review your paper
thoroughly, provide feedback, and in general give this whole business
a formal veneer. Setting aside problems in the reviewing
process—which I discussed <a href="http://bastian.rieck.me/blog/posts/2019/reviewing/">in another blog post</a>—this again opens up a portal into
a strange dimension: working as a reviewer for a journal is usually
a job that is provided for free&nbsp;(same goes for editorial
duties). Notice that this is <em>despite</em> the fact that those journals
are charging money to readers and universities. ETH Zurich, my
current employer, describes their experiences of the <a href="https://www.library.ethz.ch/en/Services/Using-ordering-resources/National-negotiations-with-publishers-Read-publish-reorganised">negotiations
with
publishers</a>
and mentions an expenditure of 6.4 million EUR&nbsp;(roughly 7.25
million USD) per year for being allowed to access journal articles.
That is a lot of money.</p>
<p>Setting aside the actual numbers here, let me just point out how
strange it is that companies are relying on <em>unpaid labour</em>, and this
reliance is <em>crucial</em> to their business model. They often do not
employ people that are qualified to judge the content that they want
to publish! But of course, reviewers and editors get the benefit of
<em>exposure</em>—that wonderful currency that is supposed to help your
career along! Even stranger: journals often charge hefty sums for
accessing your own research articles. To me, it is super weird that
research that is often <em>funded</em> by the taxpayer cannot be <em>accessed</em>
by the taxpayer.</p>
</li>
<li>
<p>Supposing your article got sufficiently good reviews to be published,
the next stage of the process starts. This is where the <em>meddling</em>
begins in earnest. After a little back and forth, you article will be
changed according to some arbitrary rules: the last period of every
sentence in an image caption will be removed, footnotes will be put
into the text—because for some reason, footnotes are permitted in
virtually every template and publishing medium, but deemed somewhat
uncouth by certain publishers—and you might have to redo certain
parts of your paper because of subtle font changes or what have you.</p>
<p>Again, lest you think of me as a particularly cranky person prone to
grumbling and finding faults, you are getting the wrong idea here.
I do not object to these changes, but I <em>do</em> object to the fact that
these meddlesome changes often decrease the quality of your paper.
Here are some irksome changes:</p>
<ul>
<li>
<p>Footnotes will be inserted willy-nilly into the text, regardless of
whether they make sense or not. That might break the flow of your
paper, but that is <em>your</em> problem.</p>
</li>
<li>
<p>Some ‘publisher house rules’ conflict with proper nomenclature in
a field. For example, the journal might have the ‘rule’ that all
fields in a table have to be capitalised. If this clashes with
nomenclature in your field, it is—you guessed it—<em>your</em> problem.</p>
</li>
<li>
<p>Your equations will typically be typeset yet
another time for you<sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup>, which might introduce subtle changes: symbols
will change and you have to be go through your own paper once again
line-by-line to see whether anything untoward happened. Again, I am
primarily objecting to the substandard quality of this meddling:
the work that you put into writing your equations is completely
ignored, and now you have to chase—often very subtle—changes in
your own text. For mathematical typesetting, precision is crucial,
and it is unbecoming when people who do not <em>care</em> about this
precision create more work for you.</p>
</li>
<li>
<p>As a last example, your figures might be meddled with: you might be
forced to convert them into obsolete file formats&nbsp;(because
apparently, EPS is still the best format available), or, more
appallingly, vector graphics might be converted to raster
images&nbsp;(judging from the experiences of my friends and myself,
this is unfortunately relatively common!). This might sound like a tiny
problem again, but it decreases readability and accessibility for
some readers, and, more to the point of this post, it is somewhat
unnecessary meddling.</p>
</li>
</ul>
<p>Let me re-iterate my main point: I do not object to changing my
paper, I merely object to meddlesome changes that are just generating
useless work. For example, there is no need whatsoever to typeset
your equations again—this is quite literally the definition of
negative work.</p>
</li>
<li>
<p>If you survived this ordeal intact, you now must <em>pay</em>. To be fair,
not all journals charge you for normal articles, but <em>most</em> of them
charge you for open access publishing. In other words: if I want my
research, which is generously funded<sup id="fnref:5"><a href="#fn:5" role="doc-noteref">5</a></sup> by the Swiss taxpayers, to
be available to those selfsame taxpayers, I have to pay. The amounts
vary a little bit, of course, but we are talking upwards of a few
hundred USD at least. Luckily, this is <em>not</em> a problem for my
research group; my postdoctoral adviser, <a href="https://bsse.ethz.ch/mlcb/karsten.html">Prof. Karsten
Borgwardt</a> ensures that
sufficient funds for open access publications are available.</p>
<p>Interestingly, sometimes the cost is fielded by a conference; this
happens when the conference has a contract that ensures that its
publications will be available as special issue of some journal.
This might seem nice because it <em>shifts</em> the costs away from authors,
but it is also somewhat non-transparent; conference costs being high
already, I find it strange that some of the money goes into the
pockets of another party.</p>
<p>After all this negativity, it is time for a <em>positive example</em>:
NeurIPS, one of the flagship machine learning conferences, is
partnered with a publisher and makes <em>all</em> papers available for free
online. I <em>gladly</em> pay the conference fee for this!</p>
</li>
</ol>

<p>How can this process be improved? I have a few suggestions:</p>
<ol>
<li>
<p><strong>Transparency</strong>: publishers should make it clear <em>where</em> the funds are
going. Are we increasing shareholder value by working for free? How
are profits split and used?</p>
</li>
<li>
<p><strong>Giving back</strong>: it is generally understood that everyone needs to eat
and no one should have to work for free. Why is then that this
completely different in publishing? Almost all the profits are
essentially generated because editors and reviewers work for free.
I know that being remunerated for your reviewing work might raise
some questions about impartiality etc., so I think <em>paying</em> people to
write reviews might be somewhat problematic.</p>
<p>However, closely related to my point about transparency, publishers
could be more upfront about how they user their funds and <em>give back</em>
to the community. For example, publishers could sponsor students so
that they can visit a conference for free, or publishers could
sponsor the conferences themselves.</p>
<p>If you, as a publisher, engage the community and give back a little,
the community will be all the more happy to work with you. We need
you, but you also need us. Without the scientists, you cannot be
a scientific publisher.</p>
</li>
<li>
<p><strong>Commitment to excellence</strong>: publishers should commit to the highest
quality and the highest standards. Employ people that are capable of
working <em>with</em> the scientists, not <em>for</em> the scientists. Train your
employees to be experts in typography, typesetting, and pair them
with domain experts so that they do not create more work for the
authors by inadvertently destroying equations, figures, and so on.</p>
<p>This goal is not necessarily orthogonal to maximising your profits,
by the way: if you lower your standards, your reputation as
a publisher will suffer, meaning that scientists in the long
run&nbsp;(!) might not be willing to publish with you any more. If
you commit to excellence, by contrast, we will flock to you.</p>
<p>I know that working with a publisher that <em>cares</em> about the end
product as much as I do is a heavenly match! So we should endeavour
to make such …</p></li></ol></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://bastian.rieck.me/blog/posts/2020/middlemen/">https://bastian.rieck.me/blog/posts/2020/middlemen/</a></em></p>]]>
            </description>
            <link>https://bastian.rieck.me/blog/posts/2020/middlemen/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23819130</guid>
            <pubDate>Mon, 13 Jul 2020 10:16:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Real World Programming in SWI-Prolog]]>
            </title>
            <description>
<![CDATA[
Score 104 | Comments 21 (<a href="https://news.ycombinator.com/item?id=23818901">thread link</a>) | @luu
<br/>
July 13, 2020 | http://www.pathwayslms.com/swipltuts/ | <a href="https://web.archive.org/web/*/http://www.pathwayslms.com/swipltuts/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">


<p>This is a hopefully ever expanding collection of tutorials on aspects of the SWI-Prolog environment.
Our emphasis is on learning to write <b>real world</b> applications in SWI-Prolog.</p>

<ol>
<li><a href="http://www.pathwayslms.com/swipltuts/dcg/index.html">Definite Clause Grammars</a> by <a href="mailto:annie@theelginworks.com">Anne Ogborn</a></li>
<li><a href="http://www.pathwayslms.com/swipltuts/html/index.html">Web Applications</a> by <a href="mailto:annie@theelginworks.com">Anne Ogborn</a></li>
<li><a href="http://www.pathwayslms.com/swipltuts/clpfd/clpfd.html">Constraint Logic Programming over Finite Domains</a> by <a href="mailto:annie@theelginworks.com">Anne Ogborn</a></li>
<li><a href="http://www.pathwayslms.com/swipltuts/message/index.html">Printing Messages in SWI-Prolog</a>by <a href="mailto:annie@theelginworks.com">Anne Ogborn</a></li>
<li><a href="http://www.pathwayslms.com/swipltuts/chr/index.html">Constraint Handling Rules</a>by <a href="mailto:annie@theelginworks.com">Anne Ogborn</a></li>
</ol>

<h2>Stuff that's in the general vein of the <i>Real World</i> tutorials, but are by others</h2>
<ul>
<li>There is a <a href="http://swish.swi-prolog.org/example/dict.swinb">SWISH tutorial on the dict structure</a> that was introduced with revision 7.0</li>
<li>There is a <a href="http://swish.swi-prolog.org/example/tabling.swinb">SWISH tutorial on tabling</a> that was introduced with 7.2.3</li>
<li>Michael Richter maintains a tutorial on using modules with SWI-Prolog <a href="http://chiselapp.com/user/ttmrichter/repository/gng/doc/trunk/output/tutorials/swiplmodtut.html">Using Modules with SWI-Prolog</a></li>
<li>Michael Hendricks has a tutorial for his vastly nifty pack "Julian" for reasoning about dates and times <a href="http://mndrix.github.io/julian/index.html">Julian tutorial</a></li>
<li>The Amzi Corporation maintains a useful introduction to expert systems <a href="http://www.amzi.com/ExpertSystemsInProlog/">Expert Systems in Prolog</a></li>
</ul>

<h2>Other stuff by me (Anne Ogborn) about Prolog</h2>
<li><a href="http://www.pathwayslms.com/swipltuts/student/index.html">FAQ For The ##Prolog Channel</a> by Anne Ogborn and Michael Richter</li>
<li>A little story about <a href="http://www.pathwayslms.com/swipltuts/teacher/index.html">teaching Programming Languages courses that include Prolog</a></li>
<li><a href="https://www.youtube.com/watch?v=JmOHV5IlPyU">Youtube video (35 mins) of my tutorial on Pengines at Strange Loop 2014</a></li>
<li><a href="https://www.youtube.com/watch?v=G_eYTctGZw8">Youtube video (40 mins)</a> of Michael Hendricks' talk on Production Prolog, with great hints on practical Prolog</li>
<li>I gave a workshop on SWI-Prolog web development at <a href="https://thestrangeloop.com/">Strangeloop 2013</a> The workshop materials were basically the set of html tutorials collected into a single program. <a href="https://github.com/Anniepoo/strangeloop">You can get them here</a>.</li>

<h2>Selected other folks' tutorials and info about prolog</h2>
<ul>
<li>Roman Bartok maintains a great <a href="http://kti.ms.mff.cuni.cz/~bartak/prolog/index.html">tutorial introduction to Prolog</a></li>
<li>The introductory book <a href="http://lpn.swi-prolog.org/lpnpage.php?pageid=online">Learn Prolog Now</a> is online, and has embedded SWISH so you can run the examples right in the text</li>
<li>Help, my brain is melting <a href="http://www.pathwayslms.com/swipltuts/())).pl">())).pl</a></li>
</ul>

<h2>Contribute!</h2>
<p>We'd love to have more contributors of tutorials. Areas we'd love to see covered: Pldoc, The IDE, CLP, Expert Systems, aggregator library, and whatever else excites you.</p>



</div>]]>
            </description>
            <link>http://www.pathwayslms.com/swipltuts/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23818901</guid>
            <pubDate>Mon, 13 Jul 2020 09:37:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Dark Web Price Index 2020]]>
            </title>
            <description>
<![CDATA[
Score 282 | Comments 197 (<a href="https://news.ycombinator.com/item?id=23818727">thread link</a>) | @known
<br/>
July 13, 2020 | https://www.privacyaffairs.com/dark-web-price-index-2020/ | <a href="https://web.archive.org/web/*/https://www.privacyaffairs.com/dark-web-price-index-2020/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><p><b>The dark web has a longstanding reputation as a haven for the worst kinds of criminal activity. This reputation is not wholly unjustified, as there are indeed terrible things happening around the world that can be bought and sold on the dark web. </b></p><p><span>The privacy offered by software such as TOR creates an environment where criminals can sell their wares on the dark web without the worry of law enforcement.</span></p><p><span>What’s more, many will have heard the horror stories of people’s bank accounts being cleaned out, or their identity stolen and turning up in custody in Mexico. Again, not unjustified horror.</span></p><p><span>You might be asking yourself, just how easy is it to obtain someone else’s personal information, documents, account details?&nbsp;</span></p><p><span>We certainly were.</span></p><p><span>To see just how prevalent such items of personal data are being listed, and at what price, we sent our researchers on a data-gathering mission into the dark web.</span></p><table><tbody><tr><td>Category</td><td>Product</td><td>Avg. dark web Price (USD)</td></tr><tr><td><a href="https://www.privacyaffairs.com/dark-web-price-index-2020/#2">Credit Card Data</a></td><td>Cloned Mastercard with PIN</td><td>$15</td></tr><tr><td></td><td>Cloned American Express with PIN</td><td>$35</td></tr><tr><td></td><td>Cloned VISA with PIN</td><td>$25</td></tr><tr><td></td><td>Credit card details, account balance up to $1000</td><td>$12</td></tr><tr><td></td><td>Credit card details, account balance up to $5000</td><td>$20</td></tr><tr><td></td><td>Stolen online banking logins, minimum $100 on account</td><td>$35</td></tr><tr><td></td><td>Stolen online banking logins, minimum $2000 on account</td><td>$65</td></tr><tr><td></td><td>Walmart account with credit card attached</td><td>$10</td></tr><tr><td><a href="https://www.privacyaffairs.com/dark-web-price-index-2020/#3">Payment processing services</a></td><td>Stolen PayPal account details, minimum $100</td><td>$198.56</td></tr><tr><td></td><td>PayPal transfer from stolen account, $1000 – $3000</td><td>$320.39</td></tr><tr><td></td><td>PayPal transfers from stolen account, $3000+</td><td>$155.94</td></tr><tr><td></td><td>Western Union transfer from stolen account, above $1000</td><td>$98.15</td></tr><tr><td><a href="https://www.privacyaffairs.com/dark-web-price-index-2020/#4">Forged documents</a></td><td>US driving license, average quality</td><td>$70</td></tr><tr><td></td><td>US driving license, high quality</td><td>$550</td></tr><tr><td></td><td>Auto insurance card</td><td>$70</td></tr><tr><td></td><td>AAA emergency road service membership card</td><td>$70</td></tr><tr><td></td><td>Wells Fargo bank statement</td><td>$25</td></tr><tr><td></td><td>Wells Fargo bank statement with transactions</td><td>$80</td></tr><tr><td></td><td>Rutgers State University student ID</td><td>$70</td></tr><tr><td></td><td>US, Canada, or Europe passport</td><td>$1500</td></tr><tr><td></td><td>Europe national ID card</td><td>$550</td></tr><tr><td><a href="https://www.privacyaffairs.com/dark-web-price-index-2020/#5">Social Media</a></td><td>Hacked Facebook account</td><td>$74.5</td></tr><tr><td></td><td>Hacked Instagram account</td><td>$55.45</td></tr><tr><td></td><td>Hacked Twitter account<a id="mcegrid91" href="https://www.privacyaffairs.com/wp-admin/post.php?post=7083&amp;action=edit#" data-mce-x="1" data-mce-y="9"></a></td><td>$49</td></tr><tr><td></td><td>Hacked Gmail account</td><td>$155.73</td></tr><tr><td></td><td>Instagram followers x 1000</td><td>$7</td></tr><tr><td></td><td>Spotify followers x 1000</td><td>$3</td></tr><tr><td></td><td>Twitch followers x 1000</td><td>$6</td></tr><tr><td></td><td>Tick Tok followers x 1000</td><td>$15</td></tr><tr><td></td><td>LinkedIn followers x 1000</td><td>$10</td></tr><tr><td></td><td>LinkedIn company page followers x 1000</td><td>$10</td></tr><tr><td></td><td>Pinterest followers x 1000</td><td>$5</td></tr><tr><td></td><td>Soundcloud plays x 1000</td><td>$1</td></tr><tr><td></td><td>Daily Motion views x 1000</td><td>$2</td></tr><tr><td></td><td>Twitter retweets x 1000</td><td>$25</td></tr><tr><td></td><td>Instagram likes x 1000</td><td>$6</td></tr><tr><td><a href="https://www.privacyaffairs.com/dark-web-price-index-2020/#6">Malware</a></td><td>Global low quality, slow speed, low success rate x 1000</td><td>$70</td></tr><tr><td></td><td>Europe low quality, slow speed, low success rate x 1000</td><td>$300</td></tr><tr><td></td><td>USA, CA, UK, AU low quality, slow speed, low success rate x 1000<a id="mcegrid91" href="https://www.privacyaffairs.com/wp-admin/post.php?post=7083&amp;action=edit#" data-mce-x="1" data-mce-y="9"></a></td><td>$800</td></tr><tr><td></td><td>Global med quality, 70% success rate x 1000</td><td>$80</td></tr><tr><td></td><td>Europe med quality, 70% success rate x 1000</td><td>$700</td></tr><tr><td></td><td>USA only med quality, 70% success rate x 1000</td><td>$900+</td></tr><tr><td></td><td>USA, CA, UK, AU med quality, 70% success rate x 1000</td><td>$1300</td></tr><tr><td></td><td>Europe fresh high quality x 1000</td><td>$2300</td></tr><tr><td></td><td>Europe aged high quality x 1000</td><td>$1400</td></tr><tr><td></td><td>USA high quality x 1000</td><td>$1700</td></tr><tr><td></td><td>CA high quality x 1000</td><td>$1500</td></tr><tr><td></td><td>UK high quality x 1000</td><td>$2000</td></tr><tr><td></td><td>Android x 1000</td><td>$600</td></tr><tr><td></td><td>Premium x 1000</td><td>$6000</td></tr><tr><td><a href="https://www.privacyaffairs.com/dark-web-price-index-2020/#7">DDoS Attack</a></td><td>Unprotected website, 10-50k requests per second, 1 hour</td><td>$10</td></tr><tr><td></td><td>Unprotected website, 10-50k requests per second, 24 hours</td><td>$60</td></tr><tr><td></td><td>Unprotected website, 10-50k requests per second, 1 week<br> <a id="mcegrid91" href="https://www.privacyaffairs.com/wp-admin/post.php?post=7083&amp;action=edit#" data-mce-x="1" data-mce-y="9"></a></td><td>$400+</td></tr><tr><td></td><td>Unprotected website, 10-50k requests per second, 1 month</td><td>$800+</td></tr><tr><td></td><td>Premium protected website, 20-50k requests per second, multiple elite proxies, 24 hours</td><td>$200</td></tr></tbody></table></section><div><section id="1"><h2>What We Found</h2><p>Whilst there are many marketplaces on the dark web, there are even more forum posts warning of scammers. This makes verified prices difficult to obtain without ordering the items to find out, which of course we didn’t.</p><p>Our methodology was to scan dark web marketplaces, forums, and websites, to create an index of the average prices for a range of specific products.</p><p>We were only interested in products and services relating to personal data, counterfeit documents, and social media.</p><p>This is what we found.</p></section><section id="2"><h2>Cloned credit cards and associated data</h2><table><tbody><tr><td>Product</td><td>Average dark web Price (USD)</td></tr><tr><td>Cloned Mastercard with PIN</td><td>$15</td></tr><tr><td>Cloned American Express with PIN</td><td>$35</td></tr><tr><td>Cloned VISA with PIN</td><td>$25</td></tr><tr><td>Credit card details, account balance up to $1000</td><td>$12</td></tr><tr><td>Credit card details, account balance up to $5000</td><td>$20</td></tr><tr><td>Stolen online banking logins, minimum $100 on account</td><td>$35</td></tr><tr><td>Stolen online banking logins, minimum $2000 on account</td><td>$65</td></tr><tr><td>Walmart account with credit card attached</td><td>$10</td></tr></tbody></table><p>Credit card details usually come in the format CC|MM|YY|CVV|HOLDER_NAME|ZIP|CITY|ADDRESS|EMAIL|PHONE with the first 4 sections being the details on the card and the rest the details of the account holder. This will definitely cause a major inconvenience, but the prospect of someone using your online banking logins to gain full access to your account is far more daunting.</p><p><a href="https://mk0privacyaffaidetc8.kinstacdn.com/wp-content/uploads/2020/05/Screenshot-1040-e1590230436263.png"><img src="https://mk0privacyaffaidetc8.kinstacdn.com/wp-content/uploads/2020/05/Screenshot-1040-e1590230436263.png" data-src="https://mk0privacyaffaidetc8.kinstacdn.com/wp-content/uploads/2020/05/Screenshot-1040-e1590230436263.png" alt="Dark web credit card price" width="840" height="447"></a></p><p>Vendors tend to offer a guarantee of 80%. Meaning that two of every ten cards either won’t work or will have less than the advertised balance. We didn’t order any so can’t verify whether this is true, but the prevalence of these claims alongside the well documented increase in identity fraud cases suggests that there is a high turnover of such data.</p></section><section id="3"><h2>Payment processing services</h2><table><tbody><tr><td>Product</td><td>&nbsp;Average dark web Price (USD)</td></tr><tr><td>Stolen PayPal account details, minimum $100</td><td>$198.56</td></tr><tr><td>PayPal transfer from stolen account, $1000 – $3000</td><td>$320.39</td></tr><tr><td>PayPal transfers from stolen account, $3000+</td><td>$155.94</td></tr><tr><td>Western Union transfer from stolen account, above $1000</td><td>$98.15</td></tr></tbody></table><p>PayPal account details were easily the most common items listed, and extremely cheap. More expensive was actual transfers from a hacked account.</p><p>Another very common item for sale was guides on how to “cash out” – actually get the money in a way that doesn’t alert the authorities. These guides go for a few cents, but whether or not they actually work is not what we were looking for.</p></section><section id="4"><h2>Forged documents</h2><table><tbody><tr><td>Product</td><td>&nbsp;Average dark web Price (USD)</td></tr><tr><td>US driving license, average quality</td><td>$70</td></tr><tr><td>US driving license, high quality</td><td>$550</td></tr><tr><td>Auto insurance card</td><td>$70</td></tr><tr><td>AAA emergency road service membership card</td><td>$70</td></tr><tr><td>Wells Fargo bank statement</td><td>$25</td></tr><tr><td>Wells Fargo bank statement with transactions</td><td>$80</td></tr><tr><td>Rutgers State University student ID</td><td>$70</td></tr><tr><td>US, Canada, or Europe passport</td><td>$1500</td></tr><tr><td>Europe national ID card</td><td>$550</td></tr></tbody></table><p>These documents came with a range of guarantees and are available with any details the buyer chooses. With just a few pieces of real information about someone, a criminal could create a whole file of official documents to be used for all sorts of fraudulent activities. This one way in which an identity is stolen.</p><h3>Counterfeit money</h3><p>Counterfeit banknotes are extremely common, mainly in 20 or 50 denominations.</p><p>We came across USD, EUR, GBP, CAD, AUD most often. Some come with a UV pen test guarantee. The “quality” ones tend to cost around 30% of the banknote value.</p></section><section id="5"><h2>Social media</h2><table><tbody><tr><td>Product</td><td>&nbsp;Average dark web Price (USD)</td></tr><tr><td>Hacked Facebook account</td><td>$74.5</td></tr><tr><td>Hacked Instagram account</td><td>$55.45</td></tr><tr><td>Hacked Twitter account<a id="mcegrid91" href="https://www.privacyaffairs.com/wp-admin/post.php?post=7083&amp;action=edit#" data-mce-x="1" data-mce-y="9"></a></td><td>$49</td></tr><tr><td>Hacked Gmail account</td><td>$155.73</td></tr><tr><td>Instagram followers x 1000</td><td>$7</td></tr><tr><td>Spotify followers x 1000</td><td>$3</td></tr><tr><td>Twitch followers x 1000</td><td>$6</td></tr><tr><td>Tick Tok followers x 1000</td><td>$15</td></tr><tr><td>LinkedIn followers x 1000</td><td>$10</td></tr><tr><td>LinkedIn company page followers x 1000</td><td>$10</td></tr><tr><td>Pinterest followers x 1000</td><td>$5</td></tr><tr><td>Soundcloud plays x 1000</td><td>$1</td></tr><tr><td>Daily Motion views x 1000</td><td>$2</td></tr><tr><td>Twitter retweets x 1000</td><td>$25</td></tr><tr><td>Instagram likes x 1000</td><td>$6</td></tr></tbody></table><p>Offers to hack accounts or sell them were relatively scarce, but not non-existent. Perhaps due to a lack of demand for the product coupled with increased security practices. Hackers trying to get the social media credentials from their victims mostly have to resort to using <a href="https://www.getsafeonline.org/blog/what-is-pii-and-how-do-you-keep-it-private/">social engineering techniques</a>, which have a very high effort input for relatively low success ratio.</p><p>The extremely low cost for social engagement should seriously make you question an account’s validity before blindly trusting their wealth of social currency.</p></section><section id="6"><h2>Malware</h2><table><tbody><tr><td>Product</td><td>&nbsp;Average dark web Price (USD)</td></tr><tr><td>Global low quality, slow speed, low success rate x 1000</td><td>$70</td></tr><tr><td>Europe low quality, slow speed, low success rate x 1000</td><td>$300</td></tr><tr><td>USA, CA, UK, AU low quality, slow speed, low success rate x 1000<a id="mcegrid91" href="https://www.privacyaffairs.com/wp-admin/post.php?post=7083&amp;action=edit#" data-mce-x="1" data-mce-y="9"></a></td><td>$800</td></tr><tr><td>Global med quality, 70% success rate x 1000</td><td>$80</td></tr><tr><td>Europe med quality, 70% success rate x 1000</td><td>$700</td></tr><tr><td>USA only med quality, 70% success rate x 1000</td><td>$900+</td></tr><tr><td>USA, CA, UK, AU med quality, 70% success rate x 1000</td><td>$1300</td></tr><tr><td>Europe fresh high quality x 1000</td><td>$2300</td></tr><tr><td>Europe aged high quality x 1000</td><td>$1400</td></tr><tr><td>USA high quality x 1000</td><td>$1700</td></tr><tr><td>CA high quality x 1000</td><td>$1500</td></tr><tr><td>UK high quality x 1000</td><td>$2000</td></tr><tr><td>Android x 1000</td><td>$600</td></tr><tr><td>Premium x 1000</td><td>$6000</td></tr></tbody></table><p>Malicious tools are installed on comprised systems (Windows, Android and others) which gives attackers access to the system. Initial installation is via fake online casino, FB/social networks, warez websites etc.</p><p>Some forms of malware may simply use your computer’s resources for activities such as cryptocurrency mining. Others may be used to steal credentials as you enter them on a website. For each 1000 installs, hackers can often steal tens of thousands of dollars.</p></section><section id="7"><h2>DDoS attack</h2><table><tbody><tr><td>Product</td><td>&nbsp;Average dark web Price (USD)</td></tr><tr><td>Unprotected website, 10-50k requests per second, 1 hour</td><td>$10</td></tr><tr><td>Unprotected website, 10-50k requests per second, 24 hours</td><td>$60</td></tr><tr><td>Unprotected website, 10-50k requests per second, 1 week<br> <a id="mcegrid91" href="https://www.privacyaffairs.com/wp-admin/post.php?post=7083&amp;action=edit#" data-mce-x="1" data-mce-y="9"></a></td><td>$400+</td></tr><tr><td>Unprotected website, 10-50k requests per second, 1 month</td><td>$800+</td></tr><tr><td>Premium protected website, 20-50k requests per second, multiple elite proxies, 24 hours</td><td>$200</td></tr></tbody></table><p>A distributed denial of service (DDoS) attack aims to take a website offline by sending thousands of requests per second in order to overload the website’s server, causing it to crash.</p></section><section id="8"><h2>Why This Data Is Important</h2><p>For the average person, underground market data isn’t necessarily going to provide much use as they most likely aren’t shopping around for stolen card data or PayPal accounts. Though this is true, the prices at which these items sell provide a powerful perspective.</p><p>If someone gets their hands on your financial details or social media credentials, the prices mentioned above is basically what it’s worth to them. There’s a good chance that you value these things much more than they do, as to them you’re just another mark for a quick buck.</p><p>For far less than the amount your data would sell for on the black market, you can protect it from ever having to reach their hands with a couple of simple rules and habits. With this knowledge, there’s no excuse not to do what you can to protect your data.</p><p>Nothing is foolproof however, and …</p></section></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.privacyaffairs.com/dark-web-price-index-2020/">https://www.privacyaffairs.com/dark-web-price-index-2020/</a></em></p>]]>
            </description>
            <link>https://www.privacyaffairs.com/dark-web-price-index-2020/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23818727</guid>
            <pubDate>Mon, 13 Jul 2020 09:08:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Tutorial sites treating FreeBSD like a Linux distro]]>
            </title>
            <description>
<![CDATA[
Score 66 | Comments 77 (<a href="https://news.ycombinator.com/item?id=23818702">thread link</a>) | @todsacerdoti
<br/>
July 13, 2020 | https://rubenerd.com/tutorial-sites-treating-freebsd-like-a-linux-distro/ | <a href="https://web.archive.org/web/*/https://rubenerd.com/tutorial-sites-treating-freebsd-like-a-linux-distro/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div property="articleBody">
<p>On the Gold Coast in January, Deb Goodkin from the FreeBSD Foundation began her Linux.conf.au talk with an intentionally-provocative slide: <em>FreeBSD, that’s just another Linux distro, right?</em> It was said in jest to highlight what a common misconception it is.</p>
<p>One way this manifests is through introductory FreeBSD guides online, usually on blogs with the words sysadmin, cookbook, or tutorial in their names; you know the ones I’m talking about. Invariably they advise updating the base system and pkgng, then immediately installing bash, nano, htop, lsof, coreutils, proc, and more. Some go as far as aliasing these over the built-in tools, and even setting bash as the root shell. From then on, you barely have to touch the FreeBSD userland.</p>
<p>Like a poorly-maintained cheese utensil, this used to grate. If you’re installing an entire GNU toolchain, why not use a Linux distribution, or Debian/kFreeBSD, or a Nexenta-like OS that’s built specifically for those tools? You’re not learning about FreeBSD’s features, nor are you taking advantage of any of its benefits beyond the kernel and base. It’s wasted opportunity, and could render future project contributions more difficult because of misunderstood assumptions about how the system works.</p>
<p><img src="https://rubenerd.com/files/2020/usebsd-pillow@1x.jpg" srcset="https://rubenerd.com/files/2020/usebsd-pillow@1x.jpg 1x, https://rubenerd.com/files/2020/usebsd-pillow@2x.jpg 2x" alt="A photo of a pillow saying: Use BSD"></p>
<p>I’ve since changed my tune somewhat, with a caveat. I also want to take this opportunity— not a sponsor—to spruik Jay Patel’s <a href="https://www.redbubble.com/people/jaypatelani/shop">RedBubble store</a> for your BSD laptop and loungeroom. I’ve already added some to next sticker batch.</p>
<p>What was I talking about?</p>
<p>We should be encouraging Linux people to try FreeBSD, and if giving them their familiar tooling gets their foot in the door, it’s worth it. I personally learn things the quickest by jumping in the deep end, but I know others want to take things a step at a time.</p>
<p>What also gets lost in the fray is FreeBSD, even with all those Linux-focused tools, is still a compelling and useful operating system. It’s a feature not a bug to be able to have all these tools available, and at times run them faster than Linux could on the same hardware. It may even integrate better into shops that otherwise entirely run Linux, given the motivation to write portable, POSIX-compliant code and applications is no longer a priority for most people (sadface).</p>
<p>So rather than saying those guides aren’t useful or even misrepresent FreeBSD, we need to reframe them. Instead of <em>introductions to FreeBSD</em>, say they’re <em>FreeBSD for Linux people</em>. This shouldn’t be constued as criticism; the latter kinds of post would be <em>hugely</em> useful. It’s also then easier to introduce BSD-specific tools and ideas, either inline after each Linuxism you introduce, or in a follow-up post where you compare and contrast.</p>
<p>We need more bridge-building and outreach between the two communities, and anything to make FreeBSD relatable to people coming from Linux, or any other operating system, is useful.</p>
</div></div>]]>
            </description>
            <link>https://rubenerd.com/tutorial-sites-treating-freebsd-like-a-linux-distro/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23818702</guid>
            <pubDate>Mon, 13 Jul 2020 09:02:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Rust Is Surprisingly Good as a Server Language]]>
            </title>
            <description>
<![CDATA[
Score 306 | Comments 326 (<a href="https://news.ycombinator.com/item?id=23817464">thread link</a>) | @signa11
<br/>
July 12, 2020 | https://stu2b50.dev/posts/rust-is-surpris76171 | <a href="https://web.archive.org/web/*/https://stu2b50.dev/posts/rust-is-surpris76171">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="layout">
      <div id="main">
        

    

    <div>
        
<p>At some point, I got tired of my old static site generator setup for my blogs and other pages. It was annoying to ssh every time I wanted to make a modification, it was annoying to sftp or sshfs all my images, and so forth. And god forbid, if you ever wanted someone else to write something or make an edit, let me tell you, most people are not particularly happy when you tell him "hey, I'll make you a user on my server, give me your public key so you can ssh in".</p>
<p>I wanted something with a <em>little</em> more dynamism. </p>
<p>So that was the project: a small scope blog, where a few, already <em>trusted</em> users can make, edit, and post new pages in markdown (with a nice markdown editor courtesy of <a href="https://simplemde.com/">SimpleMDE</a>). Additionally, I want a built in jank verison of imgur so I can satisfy my need to be self sufficient without going crazy.</p>
<p>So while I could whip something up in an afternoon with Django, I could also experiment with other languages. The project is simple enough that I can't imagine being too limited by any language's ecosystem. And I've been itching to write something substansive in Rust...</p>
<h3>Which framework?</h3>
<p>The biggest framework is probably <code>actix-web</code>. But</p>
<ol>
<li>When I was scoping out my options months ago, actix-web's maintainer quit with a bunch of drama</li>
<li>At least from what I could tell reading the docs, it seems more suited to APIs rather than servers serving templated HTML</li>
<li>With the above, I wanted this to be a weekend project, not a weekly project, so the more batteries included the better</li>
<li>I really don't want to figure out which async library is considered better. And note that with each async library, comes its own ecosystem of libraries, which only work with that async library, so it's a pretty hard decision to reverse after you made it.</li>
</ol>
<p>So Rocket it is. </p>

<p>Something I didn't realize until I started scoping out this project is that on servers... the memory model is actually pretty simple! </p>
<p>Much of your state is just handled by your database. I <em>never</em> actually fought with the borrow checker. I never had to. For the most part, everything had exactly one owner, and exactly one lifetime: the function that's handling the request. </p>
<p>Rocket, too, has a surprising amount of "magic":</p>
<pre><code>#[get("/posts/&lt;slug&gt;/"]
pub fn post_view(slug: String) -&gt; Option&lt;Template&gt; {
    ...
		
    Some(Template::render("/posts/post", hashmap! { "post" =&gt; post}))
}
</code></pre>
<p>As opposed to Flask's</p>
<pre><code>@app.route("/posts/&lt;string:slug&gt;")
def post_view(slug):
    ...
		
    return render_template("posts/post.html", post=post)
</code></pre>
<p>Rust's macro system has really impressed me so far. Not only is there a shocking amount of "just works", but it's all statically typed and compiled.</p>
<p>The closest analogue to Rocket is flask + all the flask adjacent libraries (SQLAlchemy-flask, etc). Rocket, through the power of 3rd party integrations, comes with two template engines (handlebars, and Tera, which is basically Jinja2), database pooling support for quite a few ORMs/DB drivers, and more.</p>
<p>It's still at the point where you have to roll your own auth, though.</p>
<p>While I've heard comparisons to Django/Rails, it doesn't really seem like they're going that direction. Django/Rails purposefully put you, the developer, on the metaphorical rails, dictating best practices from everything from where the files go, to how you update your models and views. Rocket doesn't do that, and I'm not sure it should ever.</p>
<p>I also had, for the most part, the experience that "if it compiles, it works". Most of my runtime errors were in the templates, which incidentally is the only thing that's not statically typed. </p>
<p>I guess that's really what surprised me. For a lot of it, "it just works"! There's not a lot of boilerplate syntax, type inference keeps your functions clean, and I didn't write a <em>single</em> lifetime annotation at any point. My rust server really didn't look that different from my flask server, or my Django server, and honestly it looks cleaner than my Java server. All with no garbage collector or runtime.</p>

<p>Next, I'll talk about Diesel, which as far as I can see, is the most mature ORM available. While I do have my gripes, it's not really anything "objectively" bad. I suppose it's more on tradeoffs, and Diesel chooses to go light on the magic. </p>
<p>For one, it's annoying to make two structs for each table. You need one to represent the table, and one to insert with (with any autogenerated columns like the primary key removed). For instance, I have</p>
<pre><code>#[derive(Identifiable, Queryable, Associations, PartialEq, Debug, Serialize)]
#[belongs_to(BlogPosts, foreign_key="post_id")]
#[table_name = "tags"]
pub struct Tag {
    id: i32,
    tag_name: String,
    post_id: i32,
}

#[derive(Insertable)]
#[table_name = "tags"]
pub struct InsertTag {
    tag_name: String,
    post_id: i32
}
</code></pre>
<p>Additionally, while in some ORMs you write your table models, and the ORM generates your SQL migrations, in Diesel, you write your SQL migrations by hand, and the ORM generates a <code>schema.rs</code> file that contains the mappings. I actually don't mind that one too much.</p>
<p>Diesel also only supports parent-child relationships, and you have to be quite explicit. There's no magic field on your parent, that magically gives you a list of its children. No, you just have to write the query and call it. In some sense it's more like using a slightly fancier query builder.</p>
<p>Dipping down from that level of magic, it's not really a <em>bad</em> thing per se. By being explicit, you prevent users from believing too much in that magic, and shooting themselves in the foot, like N+1 selects. </p>
<p>But I'm not going to say it didn't slow me down quite a bit, either. And to be honest, writing joins was a humongous pain in the ass. Maybe that's how it should be, but maybe that also caused a generation of NoSQL databases. 🤷</p>

<p>Here's how you upload an image in flask</p>
<pre><code>@app.route('/images/upload')
def upload_file():
	files = request.files['file']
	if file and allowed_file(file.filename):
            filename = secure_filename(file.filename)
            file.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
</code></pre>
<p>Here's the "simpler" example, while using a <em>third party library in addition</em> from abonader</p>
<p><a href="https://github.com/abonander/multipart/blob/master/examples/rocket.rs"><strong>See the whole thing here</strong></a></p>
<pre><code>#[post("/upload", data = "&lt;data&gt;")]
// signature requires the request to have a `Content-Type`
fn multipart_upload(cont_type: &amp;ContentType, data: Data) -&gt; Result&lt;Stream&lt;Cursor&lt;Vec&lt;u8&gt;&gt;&gt;, Custom&lt;String&gt;&gt; {
    // this and the next check can be implemented as a request guard but it seems like just
    // more boilerplate than necessary
    if !cont_type.is_form_data() {
        return Err(Custom(
            Status::BadRequest,
            "Content-Type not multipart/form-data".into()
        ));
    }

    let (_, boundary) = cont_type.params().find(|&amp;(k, _)| k == "boundary").ok_or_else(
            || Custom(
                Status::BadRequest,
                "`Content-Type: multipart/form-data` boundary param not provided".into()
            )
        )?;

    match process_upload(boundary, data) {
        Ok(resp) =&gt; Ok(Stream::from(Cursor::new(resp))),
        Err(err) =&gt; Err(Custom(Status::InternalServerError, err.to_string()))
    }
}

fn process_upload(boundary: &amp;str, data: Data) -&gt; io::Result&lt;Vec&lt;u8&gt;&gt; {
    let mut out = Vec::new();

    // saves all fields, any field longer than 10kB goes to a temporary directory
    // Entries could implement FromData though that would give zero control over
    // how the files are saved; Multipart would be a good impl candidate though
    match Multipart::with_body(data.open(), boundary).save().temp() {
        Full(entries) =&gt; process_entries(entries, &amp;mut out)?,
        Partial(partial, reason) =&gt; {
            writeln!(out, "Request partially processed: {:?}", reason)?;
            if let Some(field) = partial.partial {
                writeln!(out, "Stopped on field: {:?}", field.source.headers)?;
            }

            process_entries(partial.entries, &amp;mut out)?
        },
        Error(e) =&gt; return Err(e),
    }

    Ok(out)
}
</code></pre>
<p>Now, to be fair, Rocket is in version 0.4.5. From <a href="https://github.com/SergioBenitez/Rocket/issues/106"><strong>this github issue</strong></a>, multipart form support is coming in 0.5.0. But it doesn't change the fact that right now, the current libraries are somewhat immature still. They lack some of the edge features, especially for more traditional web servers that serve templated HTML, as opposed to pure API servers, or an SPA. </p>
<hr>
<p>Rust's errors are quite good, usually. But that's before you get into, well, libraries that try to do a bit more. I ran into some... interesting error messages, mostly from macros in Rocket and Diesel. Take a look at this one, for instance.</p>
<pre><code>the trait bound `(i32, std::string::String, std::string::String, std::string::String, i32, i32, std::string::String, i32, i32): diesel::Queryable&lt;diesel::sql_types::Nullable&lt;(diesel::sql_types::Integer, diesel::sql_types::Text, diesel::sql_types::Text, diesel::sql_types::Text, diesel::sql_types::Integer, diesel::sql_types::Integer, diesel::sql_types::Text, diesel::sql_types::Integer, diesel::sql_types::Integer)&gt;, diesel::sqlite::Sqlite&gt;` is not satisfied

the trait `diesel::Queryable&lt;diesel::sql_types::Nullable&lt;(diesel::sql_types::Integer, diesel::sql_types::Text, diesel::sql_types::Text, diesel::sql_types::Text, diesel::sql_types::Integer, diesel::sql_types::Integer, diesel::sql_types::Text, diesel::sql_types::Integer, diesel::sql_types::Integer)&gt;, diesel::sqlite::Sqlite&gt;` is not implemented for `(i32, std::string::String, std::string::String, std::string::String, i32, i32, std::string::String, i32, i32)`

help: the following implementations were found:
        &lt;(A, B, C, D, E, F, G, H, I) as diesel::Queryable&lt;(SA, SB, SC, SD, SE, SF, SG, SH, SI), __DB&gt;&gt;
note: required because of the requirements on the impl of `diesel::Queryable&lt;diesel::sql_types::Nullable&lt;(diesel::sql_types::Integer, diesel::sql_types::Text, diesel::sql_types::Text, diesel::sql_types::Text, diesel::sql_types::Integer, diesel::sql_types::Integer, diesel::sql_types::Text, diesel::sql_types::Integer, …</code></pre></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://stu2b50.dev/posts/rust-is-surpris76171">https://stu2b50.dev/posts/rust-is-surpris76171</a></em></p>]]>
            </description>
            <link>https://stu2b50.dev/posts/rust-is-surpris76171</link>
            <guid isPermaLink="false">hacker-news-small-sites-23817464</guid>
            <pubDate>Mon, 13 Jul 2020 05:31:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Website allows you to experience what it is like to live with dyslexia]]>
            </title>
            <description>
<![CDATA[
Score 420 | Comments 175 (<a href="https://news.ycombinator.com/item?id=23816678">thread link</a>) | @colinprince
<br/>
July 12, 2020 | http://geon.github.io/programming/2016/03/03/dsxyliea | <a href="https://web.archive.org/web/*/http://geon.github.io/programming/2016/03/03/dsxyliea">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        


<div>
  <div>
    
<p>A friend who has dyslexia described to me how she experiences reading. She <em>can</em> read, but it takes a lot of concentration, and the letters seems to “jump around”.</p>

<p>I remembered reading about <a href="https://en.wikipedia.org/wiki/Typoglycemia">typoglycemia</a>. Wouldn’t it be possible to do it interactively on a website with Javascript? Sure it would.</p>

<p>Feel like making a bookmarklet of this or something? <a href="https://github.com/geon/geon.github.com/blob/master/_posts/2016-03-03-dsxyliea.md">Fork it</a> on github.</p>

<blockquote>
  <p>Dyslexia is characterized by difficulty with learning to read fluently and with accurate comprehension despite normal intelligence. This includes difficulty with phonological awareness, phonological decoding, processing speed, orthographic coding, auditory short-term memory, language skills/verbal comprehension, and/or rapid naming.</p>
</blockquote>

<blockquote>
  <p>Developmental reading disorder (DRD) is the most common learning disability. Dyslexia is the most recognized of reading disorders, however not all reading disorders are linked to dyslexia.</p>
</blockquote>

<blockquote>
  <p>Some see dyslexia as distinct from reading difficulties resulting from other causes, such as a non-neurological deficiency with vision or hearing, or poor or inadequate reading instruction. There are three proposed cognitive subtypes of dyslexia (auditory, visual and attentional), although individual cases of dyslexia are better explained by specific underlying neuropsychological deficits and co-occurring learning disabilities (e.g. attention-deficit/hyperactivity disorder, math disability, etc.). Although it is considered to be a receptive language-based learning disability in the research literature, dyslexia also affects one’s expressive language skills. Researchers at MIT found that people with dyslexia exhibited impaired voice-recognition abilities.</p>
</blockquote>

<p><em>Source: <a href="http://en.wikipedia.org/wiki/Dyslexia">Wikipedia</a></em></p>






    <hr>
    
    <hr>
    


  


<p><a href="http://disqus.com/">blog comments powered by </a>




  </p></div>
  
  
</div>


      </div></div>]]>
            </description>
            <link>http://geon.github.io/programming/2016/03/03/dsxyliea</link>
            <guid isPermaLink="false">hacker-news-small-sites-23816678</guid>
            <pubDate>Mon, 13 Jul 2020 02:40:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Self Host a Wiki or Knowledge Base for Your Team]]>
            </title>
            <description>
<![CDATA[
Score 108 | Comments 69 (<a href="https://news.ycombinator.com/item?id=23816462">thread link</a>) | @chsasank
<br/>
July 12, 2020 | http://chsasank.github.io/outline-self-hosted-wiki.html | <a href="https://web.archive.org/web/*/http://chsasank.github.io/outline-self-hosted-wiki.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
    <p>How is your startup sharing knowledge with the rest of your team?
We’ve been using slack’s <code>#general</code> or <code>#random</code> channels to make announcements.
We regularly post documents and PPTs slack channels so that they can be used by other people. We have a channel called <code>#setup</code> to post all IT related information like how to login to VPN etc.</p>

<p>But after a few weeks, these docs/notes become super hard to find. As good slack’s search is, you have to precisely know what you’re looking for. What we needed was a centralized knowledge base website - something like <a href="https://www.atlassian.com/software/confluence">Confluence</a></p>

<p>But Confluence is clunky and slow, and not cheap ($5/user). We experimented with <a href="https://tiddlywiki.com/">TiddlyWiki</a>. It calls itself ‘a non-linear personal web notebook’. It’s an opensource software which you can host on your servers or AWS. But its non linear organization makes it super unintuitive and confusing.</p>

<h2 id="why-outline">Why Outline?</h2>

<p>Then, I found <a href="https://www.getoutline.com/">outline</a>! Outline is similar to TiddlyWiki in that it’s opensource and free to self-host. Its UI is a great balance between simplicity of plain text notes and feature creep of Confluence. Login to outline is through your slack - so one less password to remember (or save). You can create private notebooks for a team or just for yourself. You can create a public link of a note so that you can share it with people outside your team - say via email.</p>

<p><span>
    Outline has great UI
</span>
<img src="https://www.getoutline.com/images/screenshot.png"></p>

<p>Best part of all of this is that <em>data doesn’t leave your servers</em> if you self-host it!
We already have a server lying around on AWS to host our own <a href="https://en.wikipedia.org/wiki/Python_Package_Index">python package server, pypi</a>. Since neither hosting pypi nor hosting outline are particularly intensive, we’ve hosted outline on this machine as <code>wiki.qure.ai</code>.</p>

<h2 id="install-outline">Install Outline</h2>

<p>Unfortunately, documentation for self-hosting outline is limited. There’s no robust docker-compose avaialable that you can use to directly create your server. In the rest of this post, I’ll show you how to host in your laptop or server. Before starting, make sure to install <a href="https://docs.docker.com/get-docker/">docker</a> and <a href="https://docs.docker.com/compose/install/">docker-compose</a>.</p>

<div><div><pre><code>git clone https://github.com/chsasank/outline-wiki-docker-compose.git
cd outline-wiki-docker-compose
make install
</code></pre></div></div>
<p><span>
    make install
</span>
<img src="http://chsasank.github.io/assets/images/outline/make_install.png"></p>

<p>Follow the instructions. You’ll have to create a slack app.
<span>
   Slack app
</span>
<img src="http://chsasank.github.io/assets/images/outline/slack_app.png"></p>

<p>If you want to install HTTPS:</p>



<p>Run the server:</p>



  </section></div>]]>
            </description>
            <link>http://chsasank.github.io/outline-self-hosted-wiki.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23816462</guid>
            <pubDate>Mon, 13 Jul 2020 02:00:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to Build a Biotech]]>
            </title>
            <description>
<![CDATA[
Score 121 | Comments 22 (<a href="https://news.ycombinator.com/item?id=23816390">thread link</a>) | @apsec112
<br/>
July 12, 2020 | https://www.celinehh.com/how-to-build-a-biotech | <a href="https://web.archive.org/web/*/https://www.celinehh.com/how-to-build-a-biotech">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main" role="main">

      

        

        <div data-content-field="main-content">
          <div data-type="page" data-updated-on="1594684464227" id="page-5e0541ebe2b52a3155df2dcb"><div><div><div data-block-type="2" id="block-3ee5a93fdab84f05b621"><p><h3>The Summer of 2019, I gave a series of lectures to Longevity Fund’s Venture Fellows on the basics of building a biotechnology company. This is the write up of those lectures, with some additions by Laura Deming &amp; myself. </h3></p></div><div data-block-type="2" id="block-yui_3_17_2_1_1577404962916_9483"><div><h2>First Steps</h2><p>You’re intrigued by biotech and want to explore ideas in the area. Where do you start? </p></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1577402821118_87823"><div><h2>Raising Money</h2><p>Science is expensive! One way to fund your work is to get venture capital (VC) investment. It’s a very different process from applying for an academic research grant. </p><p>There are a lot of excellent resources out there on raising capital.* Because of this I’ve focused here on “SF style” biotech investing, and the areas where the advice for a bio company differs from that of a tech company. </p><h3><a href="https://www.celinehh.com/vc101">VC for Bio 101</a> </h3><h3><a href="https://www.celinehh.com/investment-memo">Biotech investment memos</a></h3><p><a href="https://pmarchive.com/guide_to_startups_part1.html">*Marc Andreessen’s guide to startups</a>, the <a href="http://paulgraham.com/articles.html">PG essays</a>, and <a href="https://www.amazon.com/Venture-Deals-Smarter-Lawyer-Capitalist/dp/1118443616">Venture Deals</a> are three classics</p></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1577402821118_96448"><div><h2>Building in Bio</h2><p>A bit of a deeper dive into the predominant types of drugs and the considerations around each of them. The type of drug you select impacts the safety, dosing strategy, potential efficacy, downstream price &amp; profit margin, and competitiveness of your drug. </p></div></div></div></div></div>
        </div>
      
    </div></div>]]>
            </description>
            <link>https://www.celinehh.com/how-to-build-a-biotech</link>
            <guid isPermaLink="false">hacker-news-small-sites-23816390</guid>
            <pubDate>Mon, 13 Jul 2020 01:46:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Creating randomness Without Math.random]]>
            </title>
            <description>
<![CDATA[
Score 75 | Comments 30 (<a href="https://news.ycombinator.com/item?id=23814713">thread link</a>) | @healeycodes
<br/>
July 12, 2020 | https://healeycodes.com/creating-randomness/ | <a href="https://web.archive.org/web/*/https://healeycodes.com/creating-randomness/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><p>In JavaScript, you can create random numbers using <code>Math.random()</code>. But what if we wanted to create our own random values in the browser without this function?</p>
<p>The <a href="https://tc39.es/ecma262/#sec-math.random">ECMAScript Language Specification</a> defines the requirements of <code>Math.random()</code>:</p>
<blockquote>
<p>Returns a Number value with positive sign, greater than or equal to 0 but less than 1, chosen randomly or pseudo randomly with approximately uniform distribution over that range, using an implementation-dependent algorithm or strategy. This function takes no arguments.</p>
</blockquote>
<blockquote>
<p>Each Math.random function created for distinct realms must produce a distinct sequence of values from successive calls.</p>
</blockquote>
<h2 id="number-generation"><a href="#number-generation" aria-label="number generation permalink"></a>Number Generation</h2>
<p>Here’s an example of a number generator. It uses a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures">closure</a> to maintain internal state and creates a sequence of numbers based off an initial seed value. Here the seed is fixed and is always initialized to <code>0</code>.</p>
<div data-language="javascript"><pre><code>Math<span>.</span>random <span>=</span> <span>(</span><span>function</span> <span>(</span><span>)</span> <span>{</span>
  <span>let</span> seed <span>=</span> <span>0</span>
  <span>return</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
    seed <span>+=</span> <span>1</span>
    <span>return</span> seed
  <span>}</span>
<span>}</span><span>)</span><span>(</span><span>)</span>


Math<span>.</span><span>random</span><span>(</span><span>)</span> 
Math<span>.</span><span>random</span><span>(</span><span>)</span> 
Math<span>.</span><span>random</span><span>(</span><span>)</span> </code></pre></div>
<p>A <strong>pseudorandom number generator</strong> (PRNG) works in a similar manner. A PRNG maintains an internal state and applies math to that state every time a new random number is requested. The seed can be manual or automatic. In the <a href="https://golang.org/pkg/math/rand/#New">Go programming language</a>, you must seed <code>math/rand</code> yourself. In the browser, <code>Math.random</code> requests random data under the hood from the operating system (OS) to use as a seed.</p>
<p>PRNGs are deterministic. The same seed will always produce the same sequence of numbers. Often, a deterministic outcome is preferred. For example, to generate the same random events on all clients without them having to talk over a network. Or for reproducible performance benchmarks.</p>
<p>A hash function can be used to create a PRNG. In <a href="https://github.com/v8/v8/blob/4b9b23521e6fd42373ebbcb20ebe03bf445494f9/benchmarks/spinning-balls/v.js">spinning-balls</a>, one of Chrome’s benchmarks, we can see an example of this:</p>
<div data-language="javascript"><pre><code>



Math<span>.</span>random <span>=</span> <span>(</span><span>function</span> <span>(</span><span>)</span> <span>{</span>
  <span>var</span> seed <span>=</span> <span>49734321</span>
  <span>return</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
    
    seed <span>=</span> seed <span>&amp;</span> <span>0xffffffff</span>
    seed <span>=</span> <span>(</span>seed <span>+</span> <span>0x7ed55d16</span> <span>+</span> <span>(</span>seed <span>&lt;&lt;</span> <span>12</span><span>)</span><span>)</span> <span>&amp;</span> <span>0xffffffff</span>
    seed <span>=</span> <span>(</span>seed <span>^</span> <span>0xc761c23c</span> <span>^</span> <span>(</span>seed <span>&gt;&gt;&gt;</span> <span>19</span><span>)</span><span>)</span> <span>&amp;</span> <span>0xffffffff</span>
    seed <span>=</span> <span>(</span>seed <span>+</span> <span>0x165667b1</span> <span>+</span> <span>(</span>seed <span>&lt;&lt;</span> <span>5</span><span>)</span><span>)</span> <span>&amp;</span> <span>0xffffffff</span>
    seed <span>=</span> <span>(</span><span>(</span>seed <span>+</span> <span>0xd3a2646c</span><span>)</span> <span>^</span> <span>(</span>seed <span>&lt;&lt;</span> <span>9</span><span>)</span><span>)</span> <span>&amp;</span> <span>0xffffffff</span>
    seed <span>=</span> <span>(</span>seed <span>+</span> <span>0xfd7046c5</span> <span>+</span> <span>(</span>seed <span>&lt;&lt;</span> <span>3</span><span>)</span><span>)</span> <span>&amp;</span> <span>0xffffffff</span>
    seed <span>=</span> <span>(</span>seed <span>^</span> <span>0xb55a4f09</span> <span>^</span> <span>(</span>seed <span>&gt;&gt;&gt;</span> <span>16</span><span>)</span><span>)</span> <span>&amp;</span> <span>0xffffffff</span>
    <span>return</span> <span>(</span>seed <span>&amp;</span> <span>0xfffffff</span><span>)</span> <span>/</span> <span>0x10000000</span>
  <span>}</span>
<span>}</span><span>)</span><span>(</span><span>)</span></code></pre></div>
<p>Like our number generator, it alters its internal state while calculating the next random number. This state-change allows the next call to produce a different number.</p>
<h2 id="more-on-pseudorandom-number-generators"><a href="#more-on-pseudorandom-number-generators" aria-label="more on pseudorandom number generators permalink"></a>More on Pseudorandom Number Generators</h2>
<p>One of the oldest and most well known types of PRNG is the <a href="https://en.wikipedia.org/wiki/Linear_congruential_generator">linear congruential generator</a> (LCG). Which, despite its somewhat scary name, does not require many lines of code.</p>
<p>@bryc provides an example and <a href="https://github.com/bryc/code/blob/master/jshash/PRNGs.md#lcg-lehmer-rng">a warning</a>:</p>
<blockquote>
<p>Commonly called a Linear congruential generator (LCG), but in this case, more correctly called a Multiplicative congruential generator (MCG) or Lehmer RNG. It has a state and period of 2^31-1. It’s blazingly fast in JavaScript (likely the fastest), but its quality is quite poor.</p>
</blockquote>
<div data-language="javascript"><pre><code><span>function</span> <span>LCG</span><span>(</span><span>a</span><span>)</span> <span>{</span>
  <span>return</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
    a <span>=</span> Math<span>.</span><span>imul</span><span>(</span><span>48271</span><span>,</span> a<span>)</span> <span>|</span> <span>0</span> <span>%</span> <span>2147483647</span>
    <span>return</span> <span>(</span>a <span>&amp;</span> <span>2147483647</span><span>)</span> <span>/</span> <span>2147483648</span>
  <span>}</span>
<span>}</span></code></pre></div>
<p>(This is the first time I’ve come across <code>Math.imul()</code> — which provides <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/imul#Description">C-like 32-bit multiplication</a> of the two parameters.)</p>
<p>What does @bryc’s comment, “its quality is quite poor” mean in this context? Well, given certain even seeds, this algorithm has a pattern when the final step (the division) is removed.</p>
<div data-language="javascript"><pre><code>






<span>const</span> <span>LCG</span> <span>=</span> <span>(</span><span>s</span><span>)</span> <span>=&gt;</span> <span>(</span><span>_</span><span>)</span> <span>=&gt;</span> <span>(</span>s <span>=</span> Math<span>.</span><span>imul</span><span>(</span><span>48271</span><span>,</span> s<span>)</span> <span>&gt;&gt;&gt;</span> <span>0</span><span>)</span>
<span>const</span> nxt <span>=</span> <span>LCG</span><span>(</span><span>3816034944</span><span>)</span>
<span>for</span> <span>(</span><span>let</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>9</span><span>;</span> i<span>++</span><span>)</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>nxt</span><span>(</span><span>)</span><span>.</span><span>toString</span><span>(</span><span>16</span><span>)</span><span>)</span>
<span>}</span>

</code></pre></div>
<p>There are <a href="https://en.wikipedia.org/wiki/Diehard_tests">many</a> ways to test the quality of randomness. Some of the methodology and results of these tests can be understood by a layperson. One of the <a href="https://en.wikipedia.org/wiki/Diehard_tests">Diehard battery of tests</a> plays 200000 games of craps and looks at the distribution of wins and the number of throws each game.</p>
<p>There’s also a test for LCGs called the <a href="https://en.wikipedia.org/wiki/Spectral_test">spectral test</a> which plots the sequence in two or more dimensions. In the example below, we can see the <a href="https://en.wikipedia.org/wiki/Hyperplane">hyperplanes</a> that the spectral test measures for.</p>
<center>
<p><img src="https://d33wubrfki0l68.cloudfront.net/940b3280e30ebce96af63d654d461af46f2afc28/26139/9e8cfab758735e8c6d06f733460f6a3f/lcg-3d.gif" alt="Hyperplanes of an LCG in three dimensions"></p>
</center>
<p>A PRNG eventually repeats its sequence. In this context, the <em>period</em> is the length of steps until the cycle repeats. Simpler PRNGs such as <a href="https://github.com/bryc/code/blob/master/jshash/PRNGs.md#mulberry32">Mulberry32</a> have a period as low as ~4 billion whereas the <a href="https://stackoverflow.com/a/38838863">Mersenne Twister</a> has a period of <code>2^19,937 - 1</code>. In 2015, the V8 team <a href="https://v8.dev/blog/math-random">said</a> that their implementation of <code>Math.random()</code> uses an algorithm called <a href="http://vigna.di.unimi.it/ftp/papers/xorshiftplus.pdf">xorshift128+</a> which has a period of <code>2^128 - 1</code>. Its introduction can been seen in <a href="https://github.com/v8/v8/blob/085fed0fb5c3b0136827b5d7c190b4bd1c23a23e/src/base/utils/random-number-generator.h#L102">this diff</a>.</p>
<p>If a PRNG eventually repeats itself, you might wonder why we call it repeatedly. Why not use the first number and then reset the internal state with a new seed? The problem with this is that the seed needs to originate from somewhere. If we continue to ask the OS for more random data there is a chance that the call may block (as the OS waits for more randomness to be generated) and our program will stall.</p>
<h2 id="entropy-required"><a href="#entropy-required" aria-label="entropy required permalink"></a>Entropy Required</h2>
<p>So you’ve settled on a PRNG and replaced <code>window.Math.random</code>. You’ve shipped it to your users and, at first, everyone seems to be happy.</p>
<p>But wait! You forgot about the seed. And now your users are complaining about the sequence of random numbers they get. It’s the same every time their customers’ page loads. All of their software is predictable. As a result, the web games they built are easy to beat.</p>
<p>Huzaifa Sidhpurwala <a href="https://www.redhat.com/en/blog/understanding-random-number-generators-and-their-limitations-linux">reminds us</a>:</p>
<blockquote>
<p>Entropy is the measurement of uncertainty or disorder in a system. Good entropy comes from the surrounding environment which is unpredictable and chaotic.</p>
</blockquote>
<p>When required, the generation of securely random numbers in the browser is performed by <code>Crypto.getRandomValues()</code> from the <a href="https://www.w3.org/TR/WebCryptoAPI/#Crypto-method-getRandomValues">Web Cryptography API</a>. Which is seeded by “a platform-specific random number function, the Unix <code>/dev/urandom</code> device, or other source of random or pseudorandom data.”</p>
<p>The Linux <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/char/random.c">source</a> suggests where this pseudorandom data can come from:</p>
<blockquote>
<p>Sources of randomness from the environment include inter-keyboard timings, inter-interrupt timings from some interrupts, and other events which are both (a) non-deterministic and (b) hard for an outside observer to measure.</p>
</blockquote>
<p>There are also hardware devices that use <a href="https://en.wikipedia.org/wiki/Hardware_random_number_generator#Quantum_random_properties">quantum mechanical physical randomness</a>.</p>
<p>You can find many <a href="https://en.wikipedia.org/wiki/Random_number_generator_attack#Prominent_examples">prominent examples</a> of random number generator attacks which occurred because the wrong type (or not enough) entropy was used. Cloudflare <a href="https://www.cloudflare.com/learning/ssl/lava-lamp-encryption/">famously</a> uses lava lamps as an entropy source. Since we are not attempting to create a secure algorithm, predictable sources of entropy like time are fine.</p>
<p>We can use <code>Date.now()</code> our seed state. This means that we will get a different random sequence for every millisecond. We could also use <code>performance.now()</code> which returns the length of time since the <a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMHighResTimeStamp#The_time_origin">time origin</a>.</p>
<p>Other possible ways of getting entropy in the browser:</p>
<ul>
<li><code>crypto.getRandomValues</code>, <code>crypto</code> key generation, or similar (feels like cheating)</li>
<li>Mouse/touch events, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Ambient_Light_Events">ambient light events</a>, mic/webcam noise (hard to use on page load)</li>
<li>Geolocation API, Bluetooth API, or similar (need permission, doesn’t work on page load)</li>
<li>WebGL/video performance shenanigans</li>
<li>Most APIs <a href="https://developer.mozilla.org/en-US/docs/Web/API">listed here</a></li>
</ul>
<p>Here’s our slower (because it’s not native code) and unstable (because I haven’t tested it) replacement for <code>Math.random()</code>. Also note that PRNGs have requirements for the seed state (e.g. prime numbers, 128-bit). Our algorithm doesn’t comply with the <a href="http://vigna.di.unimi.it/ftp/papers/ScrambledLinear.pdf">seed recommendations</a> for the Xoshiro family.</p>
<div data-language="javascript"><pre><code>

Math<span>.</span>random <span>=</span> <span>(</span><span>function</span> <span>xoshiro128p</span><span>(</span><span>)</span> <span>{</span>
  
  
  <span>let</span> a <span>=</span> Date<span>.</span><span>now</span><span>(</span><span>)</span><span>,</span>
    b <span>=</span> Date<span>.</span><span>now</span><span>(</span><span>)</span><span>,</span>
    c <span>=</span> Date<span>.</span><span>now</span><span>(</span><span>)</span><span>,</span>
    d <span>=</span> Date<span>.</span><span>now</span><span>(</span><span>)</span>
  <span>return</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
    <span>let</span> t <span>=</span> b <span>&lt;&lt;</span> <span>9</span><span>,</span>
      r <span>=</span> a <span>+</span> d
    c <span>=</span> c <span>^</span> a
    d <span>=</span> d <span>^</span> b
    b <span>=</span> b <span>^</span> c
    a <span>=</span> a <span>^</span> d
    c <span>=</span> c <span>^</span> t
    d <span>=</span> <span>(</span>d <span>&lt;&lt;</span> <span>11</span><span>)</span> <span>|</span> <span>(</span>d <span>&gt;&gt;&gt;</span> <span>21</span><span>)</span>
    <span>return</span> <span>(</span>r <span>&gt;&gt;&gt;</span> <span>0</span><span>)</span> <span>/</span> <span>4294967296</span>
  <span>}</span>
<span>}</span><span>)</span><span>(</span><span>)</span>

Math<span>.</span><span>random</span><span>(</span><span>)</span> 
Math<span>.</span><span>random</span><span>(</span><span>)</span> </code></pre></div>
<h2 id="so-mission-accomplished"><a href="#so-mission-accomplished" aria-label="so mission accomplished permalink"></a>So, Mission Accomplished?</h2>
<p>Sadly it’s impossible to create a fully ECMAScript compliant replacement for <code>Math.random()</code> since the specification requires “distinct realms [to] produce a distinct sequence of values from successive calls.” A <em>realm</em> roughly means a different global environment (e.g. a different window, or a different <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API">WebWorker</a>). Our version cannot reach outside its realm thus cannot make this guarantee.</p>
<p>However, there have been proposals for a <a href="https://github.com/tc39/proposal-realms">Realms API</a>. It’s not inconceivable that such an API would provide access to something like an incrementing realm id. This would give our algorithm the loophole it needs — access to Realm-unique entropy!</p>
<p><small>Thanks to <a href="https://commons.wikimedia.org/wiki/File:Lcg_3d.gif">JN~commonswiki</a> for the 3D GIF of the spectral test.</small></p></section></div>]]>
            </description>
            <link>https://healeycodes.com/creating-randomness/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23814713</guid>
            <pubDate>Sun, 12 Jul 2020 20:59:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Text-Only Social Network]]>
            </title>
            <description>
<![CDATA[
Score 437 | Comments 226 (<a href="https://news.ycombinator.com/item?id=23814517">thread link</a>) | @lcnmrn
<br/>
July 12, 2020 | https://subreply.com/trending | <a href="https://web.archive.org/web/*/https://subreply.com/trending">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://subreply.com/trending</link>
            <guid isPermaLink="false">hacker-news-small-sites-23814517</guid>
            <pubDate>Sun, 12 Jul 2020 20:32:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Wt – C++ Web Toolkit]]>
            </title>
            <description>
<![CDATA[
Score 172 | Comments 81 (<a href="https://news.ycombinator.com/item?id=23812791">thread link</a>) | @gtirloni
<br/>
July 12, 2020 | https://www.webtoolkit.eu/wt | <a href="https://web.archive.org/web/*/https://www.webtoolkit.eu/wt">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="ose6mik">
    <section>
      
      
      <div>
        <div>
          <div>
            <div>
              <div>
                
                <p data-wow-delay="0.3s">
                  
    
      Wt is a web GUI library in modern C++.
    
    
    Quickly develop highly interactive web UIs with widgets,
    without having to write a single line of JavaScript.
    Wt handles all request handling and page rendering
    for you, so you can focus on functionality.
  
                </p>
                
              </div>
            </div>
            
          </div>
        </div>
      </div>
    </section>
    <section>
      <div>
        
        <div>
          <p>
    You don't want to focus on details like request handling or page rendering.
    You want your application to continue to work
    even when JavaScript is unavailable.
    You just want to write your web application in C++ without sacrificing interactivity.
    Wt allows you to focus on functionality and create highly interactive, secure, and future proof applications
    quickly.
  </p>
        </div>
        <div>
	  
    <div data-wow-delay="0.3s">
      <div>
        <p><img alt="Save Time" src="https://www.webtoolkit.eu/images/icon-development@2x.png" width="121px"></p><h3>Save Time</h3>
         <p>
    Wt handles all the nitty-gritty of requests and responses and
    client-side JavaScript, and allows you to focus on functionality
    in pure C++.
  </p>
       </div>
    </div>
  
	  
    <div data-wow-delay="0.1s">
      <div>
        <p><img alt="Built to Maintain" src="https://www.webtoolkit.eu/images/icon-products@2x.png" width="98px"></p><h3>Built to Maintain</h3>
         <p>
    Wt's widget abstraction represents HTML elements as C++ objects, allowing
    them to be easily composable and extendable.
  </p>
       </div>
    </div>
  
	  
    <div data-wow-delay="0.1s">
      <div>
        <p><img alt="Future Proof" src="https://www.webtoolkit.eu/images/icon-support@2x.png" width="86px"></p><h3>Future Proof</h3>
         <p>
    Stay up to date with the latest web technologies without changing your code, thanks to Wt's stable API.
    <!--    Wt uses Ajax and WebSockets when available and can fall back on plain HTML automatically, without
    the need for specific code.-->
  </p>
       </div>
    </div>
  
	  
    <div data-wow-delay="0.25s">
      <div>
        <p><img alt="Secure" src="https://www.webtoolkit.eu/images/icon-smartphone@2x.png" width="52px"></p><h3>Secure</h3>
         <p>
    Wt is designed to be resilient against the most common types of exploits:
    SQL injection,  XSS and CSRF vulnerabilities.
  </p>
       </div>
    </div>
  
        </div>
      </div>
    </section>
    
    <section>
      <div>
        <div>
          <p>
            <h3>
 	      
    Contact us for more information
    <br>
    or a personalised quotation
  
            </h3>
          </p>
          
        </div>
      </div>
    </section>
  
    
    <section>
      <div>
        
        <div>
          <p>
    
    Wt has a lot to offer. It includes the essential basic widgets and building blocks to
    build web applications, but also offers built-in security, PDF rendering, a 2D and 3D painting system, 
    an object-relational mapping library, a charting library, and an authentication framework.
  
    <a href="https://www.webtoolkit.eu/wt/features?wtd=FzrMEDwaeyUvcohl">You can see the full list of features here</a>, but here's a short overview:
  </p>
        </div>
      </div>
      <div>
        <div>
	  
    
  
	  
    <div>
      <div>
        <hr>
          <p><img src="https://www.webtoolkit.eu/images/icon-purple-desktop@2x.png" width="66px">
          </p>
          <h4>Server side, client optimized</h4>
          <p>Wt employs a signal-slot system. Instead of worrying about the sending of Ajax requests and serving of pages, you can simply connect the click of a button to a callback function on the server.
    
      <a href="https://www.webtoolkit.eu/widgets/forms#form-simple">Take a look at this example in the widget gallery.</a>
    
    
    Wt will use whatever technology available for communication: Ajax or WebSockets, but will fall back on full HTML
    page loads when JavaScript is unavailable. This makes Wt applications accessible to any browser or web crawler.
  </p>
      </div>
    </div>
  
	  
    <div>
      <div>
        <hr>
          <p><img src="https://www.webtoolkit.eu/images/icon-purple-laptop@2x.png" width="75px">
          </p>
          <h4>Built-in security</h4>
          <p>
    Wt automatically protects against misuse by only allowing visible and enabled widgets to be interacted with.
    This also helps to avoid CSRF attacks, which are doubly avoided because Wt does not store session information in cookies.
    By using the widget abstraction, Wt discourages the inserting of raw HTML into a web page, preventing XSS attacks.
    
      Wt::Dbo prevents SQL injection by encouraging the use of prepared statements when accessing the database.
    
    Wt also includes an authentication and registration system with support for OAuth
    providers like Google, Facebook, and OpenID Connect.
  </p>
      </div>
    </div>
  
        </div>
        <div>
	  
    
  
	  
    <div>
      <div>
        <hr>
          <p><img src="https://www.webtoolkit.eu/images/icon-purple-servers@2x.png" width="67px">
          </p>
          <h4>2D and 3D painting system</h4>
          <p>
    Use a single 2D drawing API with many backends (PNG, JPEG, SVG, HTML canvas, VML, and PDF) so you only need to write
    your drawing code once to support any web browser and save to many formats. Write server-side (OpenGL) and
    client-side (WebGL) 3D graphics with a uniform API. Wt's 2D and 3D charting libraries were built on top of this
    graphics API.
    
      <a href="https://www.webtoolkit.eu/widgets/graphics-charts">Check out the examples in the widget gallery.</a>
    
    
  </p>
      </div>
    </div>
  
	  
    
  
        </div>
      </div>
      
    </section>
    <section>
      <div>
        
        <div id="ose6man"><div id="ose6mam">
    <h4><a id="ose6mal" href="https://www.webtoolkit.eu/wt/news/2020/04/20/wt_3_6_1___4_3_1?wtd=FzrMEDwaeyUvcohl"><span id="ose6mak">Wt 3.6.1 &amp; 4.3.1</span></a></h4>
    
    
    <div>
      <p>Wt 4.3.0 was released almost a month ago, so itâ€™s about time for a patch release. Wt 4.3.1 (and Wt 3.6.1) is a tiny patch release, with the most notable fix being an issue in the destructor of WWebWidget when user-defined ids were used. There will be no JWt 4.3.1 since nothing has changed to JWt.</p>
<p>Read the release notes for more information.</p>
<p>Here are the links:</p>



    </div>
    
  </div></div>
      </div>
    </section>
    <section>
      
    </section>
    
  </div></div>]]>
            </description>
            <link>https://www.webtoolkit.eu/wt</link>
            <guid isPermaLink="false">hacker-news-small-sites-23812791</guid>
            <pubDate>Sun, 12 Jul 2020 17:00:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Robot Game: Comparing 6502 C, Assembly, and Forth]]>
            </title>
            <description>
<![CDATA[
Score 94 | Comments 33 (<a href="https://news.ycombinator.com/item?id=23812187">thread link</a>) | @druzyek
<br/>
July 12, 2020 | http://calc6502.com/RobotGame/summary.html | <a href="https://web.archive.org/web/*/http://calc6502.com/RobotGame/summary.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
				
			
			<p><img src="http://calc6502.com/RobotGame/images/RobotGame_main_screen.png" alt="Robot Game screenshot"></p><p>
				A few years ago, I started doing small projects with the 65C02 processor to build up to using it to make a graphing calculator. There are a few different languages that you can use to write programs for this processor with assembly offering the best performance. One of the projects I worked on is an optimizer to make assembly programs run faster. It works by tracing program flow then assigning fixed addresses to local variables in functions instead of storing them on the stack. To figure out how much of an improvement the optimizer adds, I made a game in Python then ported it to both traditional assembly and the new optimized assembly format. I also ported the game to C and Forth to see how fast they are compared to the assembly versions.
			</p>
			
			
			

			<h2>Table of Contents</h2>
			
			<ol>
				<li><a href="#Why6502">Why 65C02?</a></li>
				<li><a href="#TheLanguages">The Languages</a></li>
				<li><a href="#TheSimulator">The Simulator</a></li>
				<li><a href="#TheGame">The Game</a></li>
				<li><a href="#ExtractingGameAssets">Extracting Game Assets</a></li>
				<li><a href="#PortingTradAsm">Porting the Game to Traditional Assembly</a></li>
				<li><a href="#PortingOptAsm">Porting the Game to Optimized Assembly</a></li>
				<li><a href="#PortingC">Porting the Game to C</a></li>
				<li><a href="#PortingForth">Porting the Game to Forth</a></li>
				<li><a href="#Results">Speed Comparison</a></li>
				<li><a href="#SizeTime">Size and Time to Implement</a></li>
				<li><a href="#CodeAnalysisRand">Code Analysis: rand</a></li>
				<li><a href="#CodeAnalysisCalcStats">Code Analysis: CalcStats</a></li>
				<li><a href="#Conclusions">Conclusions</a></li>
				<li><a href="#Improvement">Areas for Improvement</a></li>
			</ol>

			<a name="Why6502">
			<h2>Why 65C02?</h2>
			
			</a><p><a name="Why6502">
				The </a><a href="https://en.wikipedia.org/wiki/WDC_65C02">65C02</a> is an improved version of the <a href="https://en.wikipedia.org/wiki/MOS_Technology_6502">6502</a> used in the <a href="https://en.wikipedia.org/wiki/Atari_2600">Atari 2600</a>, <a href="https://en.wikipedia.org/wiki/Nintendo_Entertainment_System">Nintendo Entertainment System (NES)</a>, and the <a href="https://en.wikipedia.org/wiki/Apple_I">first</a> <a href="https://en.wikipedia.org/wiki/Apple_II">two</a> computers made by Apple. Because the 65C02 is made with more modern CMOS transistors, it’s much more energy efficient and runs at up to 14 MHz, compared to the 1-3 MHz of the original 6502. Both of these things make it a good choice for a graphing calculator. For comparison, the very common <a href="https://en.wikipedia.org/wiki/TI-83_series#TI-83_Plus">TI-83+</a> made by Texas Instruments has a <a href="https://en.wikipedia.org/wiki/Zilog_Z80">Zilog Z80</a> running at 6 MHz. Since the Z80 needs 3-4 times more cycles to accomplish the same work as a 6502, a 65C02 running at full speed should be 7-9 times more powerful than the Z80 in a TI-83+. Another advantage of the 65C02 is that it’s still sold in a DIP package, so it’s easy to find and experiment with on a breadboard. There aren’t many better choices in a throughhole package. The <a href="https://en.wikipedia.org/wiki/Motorola_68000">Motorola 68000</a> is more powerful MHz for MHz, but it's already used in the <a href="https://en.wikipedia.org/wiki/TI-89_series">TI-89</a>, so I would like to use something different. Some throughhole microcontrollers have much more processing power, though not much RAM and no way to add more without an external address bus. The throughhole <a href="https://en.wikipedia.org/wiki/PIC_microcontrollers#PIC32M_MIPS-based_line">PIC32</a>, for example, runs at up to 50 MHz, but only has 64 kB of RAM. For comparison, the TI-89 introduced in 1998 and the <a href="https://en.wikipedia.org/wiki/HP_49/50_series#49G">HP-49G</a> from 1999 had 256 kB and 512 kB of RAM respectively. Since the 65C02 has an open address bus, there is no limit to the amount of RAM and ROM it can access.
			</p>

			<a name="TheLanguages">
			<h2>The Languages</h2>
			
			<p>
				These are the languages that I want to compare:
			</p>
			</a><ol><a name="TheLanguages">
				<li><b>Traditional assembly</b> - This is plain old 65C02 assembly. Like many 65(C)02 (ie 6502 or 65C02) programs, it uses the X register as a stack pointer for a data stack (more details on this below). Some functions copy and save data from the fastest region of memory called zero page to free it up for use and restore the data when the function ends (more details on this below too).</li>
				<li><b>Optimized assembly</b> - This version of the game differs from traditional assembly since it doesn’t use the X register as a data stack pointer. Instead, local variables in each function are assigned a fixed address at compile time. The addresses are determined by a Python script that analyzes the flow of the program and tracks how much memory each function needs (more details below).</li>
				</a><li><a name="TheLanguages"><b>C</b> - This version is compiled with </a><a href="https://cc65.github.io/">CC65</a>, which seems to be the most popular C compiler for the 65(C)02.</li>
				<li><b>Forth</b> - This version is compiled using a modified version of <a href="https://github.com/scotws/TaliForth2">Tali Forth 2</a>. I picked this Forth since it generates subroutine threaded code (STC) which is generally the fastest, though largest, type of Forth code.</li>
			</ol>

			<a name="TheSimulator">
			<h2>The Simulator</h2>
			<span></span></a><p><a href="https://github.com/JoeyShepard/65C02_Emulator">65C02 Emulator on GitHub</a></p><p>
				All of the code runs on a JavaScript-based simulator I made that works in the browser. The simulation itself runs very fast on a separate thread using a web worker, while the main page is only responsible for the interface. This setup lets the simulation run at the equivalent of 40-50 MHz, several times faster than an actual 65C02 running at 14 MHz. Because it runs in the browser, you can try each version of the game for yourself:
			</p>
			
			<p>
				<a href="http://calc6502.com/RobotGame/TradAsm/main.html">Robot Game - Traditional assembly version</a><br>
				<a href="http://calc6502.com/RobotGame/OptAsm/main.html">Robot Game - Optimized assembly version</a><br>
				<a href="http://calc6502.com/RobotGame/CC65/main.html">Robot Game - C version</a><br>
				<a href="http://calc6502.com/RobotGame/TaliForth2/main.html">Robot Game - Forth version</a>
			</p>
			
			<p>
				The simulator has sixteen memory banks of 16 kB each for a total of 256 kB of memory. The 65C02 has a 16 bit address bus, so it can only address 64 kB of memory at a time. To access the memory outside of the first 64 kB, the simulator simulates a memory banking system. Each 16 kB range of the 64 kB address space can point to any of the sixteen memory banks. This was a common strategy in retro computers to get around the limitations of a small address space.
			</p>

			<p>
				Memory map:
			</p>
			<ul>
				<li>0x0000 to 0x01FF - No banking</li>
				<li>0x0200 to 0x3FFF - Memory window 1</li>
				<li>0x4000 to 0x7FFF - Memory window 2</li>
				<li>0x8000 to 0xBFFF - Memory window 3</li>
				<li>0xC000 to 0xFFDF - Memory window 4</li>
				<li>0xFFE0 to 0xFFFF - Peripherals</li>
			</ul>

			<p>
				The first 512 bytes are not banked since they contain the fast zero page memory and the hardware stack which always need to be visible from all banks. The last 32 bytes are for peripherals like the keyboard and for vectors for reset and interrupts. Each peripheral is assigned a specific address in this range, and the processor communicates with them by reading and writing to those addresses. Four bytes in the peripheral region control which of the sixteen memory banks each window points to. For example, if memory window 2 points to memory bank 7, then reading the first byte of memory window 2 at 0x4000 will access the first byte of memory bank 7 which is at 0x1C000.
			</p>
			
			<p>
				The video memory is mapped one byte per pixel and takes up the 32 kB from 0x10000 to 0x17FFF (memory banks 5 and 6). The resolution is 256x128. Each byte has two bits each of red, green, and blue. Valid color codes are therefore 0-63.
			</p>
			
			<p>
				The simulator has some interesting tools that helped port the game. Some of them were added during development because a specific problem arose that I needed to add them for. The main page lets you step through the code and shows the status of all the registers and each memory region that it accesses. There is also a memory viewer and a log of exactly which instructions have been executed. Copying this information into Excel or a text diff program helped track down several bugs in the game.
			</p>

			<p><img src="http://calc6502.com/RobotGame/images/RobotGame_simulator.png" alt="Screenshot of simulator Robot Game runs on">
			<span>Simulator debug interface</span></p><p>
				Getting the cycle counts right for the executed instructions was a little tricky. For example, when an X-indexed instruction fetches an address where adding X to the low byte of the address overflows and the high byte of the address has to be adjusted, the instruction takes an additional cycle. After I got the logic for that fixed, the test code I was using was still a few cycles out of 3.5 million cycles off. Single stepping the program through all of those cycles to figure out which instruction was off would take too long. Instead, I loaded the code into the <a href="http://exifpro.com/utils.html">Kowalski simulator</a> then used a Python script to automate pressing the single step button and record the cycle count for every instruction. This generated way too much data to load into a spreadsheet, so I made another script to compare those cycles to the ones I generated in my own simulator and tracked the problem down to incorrect cycle times for the STZ instruction.
			</p>

			<a name="TheGame">
			<h2>The Game</h2>
			<span></span></a><p><a href="https://github.com/JoeyShepard/RobotGame">Robot Game on GitHub</a></p><p>
				The game is made in Python with the <a href="https://www.pygame.org/">PyGame library</a>. It was easy to read one big image into memory then copy parts of it into individual tiles that PyGame draws to the screen. Here are the images I came up with in Paint:
			</p>

			<p><img src="http://calc6502.com/RobotGame/images/RobotGame_tiles.png" alt="Graphics tiles for Robot Game">
			<span>Graphics tiles for Robot Game</span></p><p>
				Several of these are tiles that I was experimenting with that didn’t make it into the game. Bright magenta (0xFF00FF) and bright cyan (0x00FFFF) are replaced with transparency when the tiles are created. Most of the tiles only have placeholder colors and are used as the basis to create other tiles. For example, the green, yellow, and grey color in the generic crystal graphic above are filled in depending on what type of crystal the game needs to draw:
			</p>

			<p><img src="http://calc6502.com/RobotGame/images/RobotGame_crystals.png" alt="Crystal tiles for Robot Game"></p><p>
				The rock and lava tiles are constructed similarly from the generic tile above. There are four dirt tiles that are colored slightly differently and rotated at 90, 180, and 270 degrees to give the background some variety:
			</p>

			<p><img src="http://calc6502.com/RobotGame/images/RobotGame_dirt_tiles.png" alt="Dirt tiles for Robot Game"></p><p>
				There is only one type of monster which is always colored the same, so a few tiles like that don’t have any pixels that change colors. Adding in some stats and a randomly generated map gets us to the main game window:
			</p>

			<p><img src="http://calc6502.com/RobotGame/images/RobotGame_main_screen.png" alt="Dirt tiles for Robot Game"></p><p>
				The map is formed from the output of a random number generator. Using the same generator algorithm for each port results in the same beginning map for all four versions (and the same gameplay if the player makes the same decisions). I had to try several seed values for the RNG until I got a map I liked the look of as seen in the screenshot above. Here are a few that didn’t make the cut:
			</p>

			<p><img src="http://calc6502.com/RobotGame/images/RobotGame_failed_maps.png" alt="Random maps for Robot Game that failed"></p><p>
				The rest of the game is just the three menu screens. The first displays a couple of stats and an inventory page. Moving the cursor over an item shows that item’s stats and what is currently equipped in that slot. Equipping an item changes the color of the corresponding part of the robot to match. In the tiles page above, the image of the robot is drawn with different colors that all correspond to the same colors that the generic item tile has. This means that the easy find and replace function to color in the individual items also works with the same color information on the larger image of the full robot.
			</p>

			<p><img src="http://calc6502.com/RobotGame/images/RobotGame_character_menu.png" alt="Robot Game character menu">
			<span>Robot Game character menu</span></p><p>
				The skills page is pretty straightforward. There are three paths and unlocking any skill requires first unlocking the skill before it in that path. Every …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://calc6502.com/RobotGame/summary.html">http://calc6502.com/RobotGame/summary.html</a></em></p>]]>
            </description>
            <link>http://calc6502.com/RobotGame/summary.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23812187</guid>
            <pubDate>Sun, 12 Jul 2020 15:47:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[WireGuard as VPN Server on Kubernetes with AdBlocking]]>
            </title>
            <description>
<![CDATA[
Score 111 | Comments 36 (<a href="https://news.ycombinator.com/item?id=23812063">thread link</a>) | @coding_coffee
<br/>
July 12, 2020 | https://codingcoffee.dev/blog/wireguard_on_kubernetes_with_adblocking/ | <a href="https://web.archive.org/web/*/https://codingcoffee.dev/blog/wireguard_on_kubernetes_with_adblocking/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p>Lets be frank, the Internet is simply unusable with all the ads floating around.</p><p>I use the <a href="https://github.com/gorhill/uBlock" target="_blank" rel="noopener">uBlock Origin</a> extension in my browser, as do most of the people reading this genre of articles, but the same is not true for the majority of the population, including other members of my family. So in order to enhance their web browsing experience I decided to block ads at the DNS level.</p><p>But why stop there I thought, why not also improve their privacy while I'm at it. So I also decided to setup a VPN. Now let me clarify some things here, I'm not a big fan of VPNs, the way they're advertised by the big companies, here's a <a href="https://www.youtube.com/watch?v=WVDQEoe6ZWY" target="_blank" rel="noopener">great video by Tom Scott</a> explaining what I mean. But they also have their use cases, some of which are:</p><ul><li>Prohibiting ISPs from collecting data on my browsing patterns</li><li>Circumvent internet censorship</li><li>Connect to my home network from anywhere</li></ul><p>I took a look at apps like <a href="https://blokada.org/" target="_blank" rel="noopener">Blokada</a> and <a href="https://github.com/julian-klode/dns66" target="_blank" rel="noopener">DNS66</a> which grant you device wide ad blocking on mobile devices. On Android <a href="https://block.blokada.org/post/2018/06/17/how-does-blokada-work" target="_blank" rel="noopener">the way this works is</a>, by creating an internal VPN on the phone, so that all traffic from the device can be routed via it, and it has a file with all the blacklisted domains, to filter out traffic.</p><p>But there's a caveat with this approach. I cannot use another VPN to route my traffic, due to an Android <a href="https://developer.android.com/reference/android/net/VpnService" target="_blank" rel="noopener">limitation</a>.</p><blockquote><p>There can be only one VPN connection running at the same time. The existing interface is deactivated when a new one is created.</p></blockquote><p>This means my browsing patterns are still accessible to my ISP. So, I started looking for ad blocking DNS servers, so that I could point Android's global DNS to it. I found <a href="https://adguard.com/" target="_blank" rel="noopener">AdGuard</a> and <a href="https://pi-hole.net/" target="_blank" rel="noopener">PiHole</a> to be the top projects. Hosting these at home, on Raspberry Pi seemed like a plausible solution, but then again one can't use it while traveling. The solution is to obviously host it on a publicly accessible server. Amongst the two I found AdGuard more appealing due to the following reasons</p><ul><li>It has out of the box support for DNS-over-TLS</li><li>It maintains a single file for its entire configuration</li><li>It's written in Golang, and is much lighter on resources compared to PiHole</li></ul><p>You can find more about their differences <a href="https://github.com/AdguardTeam/AdGuardHome#how-does-adguard-home-compare-to-pi-hole" target="_blank" rel="noopener">here</a>. Both are great projects, but AdGuard met my requirements perfectly.</p><p>When it comes to VPN, I did not even consider using OpenVPN, <a href="https://www.wireguard.com/" target="_blank" rel="noopener">WireGuard</a> was the obvious choice, because of it's speed, smaller, easily auditable codebase (not that I was going to audit it, but still), cross platform compatibility and integration into the Linux Kernel.</p><p>Being a big fan of Kubernetes and maintaining infrastructure as code, I wanted a way to be able to easily deploy and version control my deployment. After much searching I stumbled upon, <a href="https://github.com/squat/kilo" target="_blank" rel="noopener">kilo</a>, a network overlay built on WireGuard for Kubernetes. It could do exactly what I wanted, while also enhancing the security of my cluster, by encrypting the inter pod communication, and allowing me to build secure clusters, over nodes spanning multiple cloud providers. Also it would give me the added benefit of easily debugging applications deployed on my Kubernetes Cluster, since when connected I would be a peer on the network, thereby getting access to the all the private IPs of the deployments, services etc. You can watch <a href="https://www.youtube.com/watch?v=iPz_DAOOCKA" target="_blank" rel="noopener">this talk by Lucas Servén Marín</a> to know more.</p><p>Without further ado, let's jump right into the setup. I'll be explaining the steps for setting it up on a <a href="https://k3s.io/" target="_blank" rel="noopener">k3s</a> cluster. You may need to modify them as per your cluster. After deploying k3s, the 1st thing which needs to be done is to setup kilo. First download the <a href="https://raw.githubusercontent.com/squat/kilo/master/manifests/kilo-k3s.yaml" target="_blank" rel="noopener">manifest</a> for kilo on k3s.</p><pre><code>curl -LO https://raw.githubusercontent.com/squat/kilo/master/manifests/kilo-k3s.yaml
</code></pre><p>Now you need to modify and add <code>- --mesh-granularity=full</code> to the <code>DaemonSet</code> section under the <code>args</code> for the <code>kilo</code> container.</p><pre><code>...
containers:
- name: kilo
  image: squat/kilo
  args:
  - --kubeconfig=/etc/kubernetes/kubeconfig
  - --hostname=$(NODE_NAME)
  - --mesh-granularity=full
  env:
  - name: NODE_NAME
    valueFrom:
      fieldRef:
        fieldPath: spec.nodeName
...
</code></pre><p>This is done to ensure all our nodes are meshed together regardless of the datacenter. Then simply apply the manifest.</p><pre><code>kubectl apply -f kilo-k3s.yaml
</code></pre><p>This will later be useful for setting up WireGuard VPN. More on this later. Now we can proceed to setup AdGuard. Here is the spec for AdGuard.</p><pre><code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: adguardhome
spec:
  selector:
    matchLabels:
      app: adguardhome
  replicas: 1
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 0
  template:
    metadata:
      labels:
        app: adguardhome
    spec:
      volumes:
        - name: tls-cert-secret
          secret:
            secretName: production-tls-cert
        - name: adguard-config
          hostPath:
            path: "/path/to/store/conf"
            type: DirectoryOrCreate
        - name: adguard-logs
          hostPath:
            path: "/path/to/store/work"
            type: DirectoryOrCreate

      containers:
        - name: adguardhome
          image: adguard/adguardhome:v0.102.0
          ports:
            # Regular DNS Port
            - containerPort: 53
              hostPort: 53
              protocol: UDP
            - containerPort: 53
              hostPort: 53
              protocol: TCP
            # DNS over TLS
            - containerPort: 853
              hostPort: 853
              protocol: TCP
          volumeMounts:
            - name: tls-cert-secret
              mountPath: /certs
            - name: adguard-config
              mountPath: /opt/adguardhome/conf
            - name: adguard-logs
              mountPath: /opt/adguardhome/work

      terminationGracePeriodSeconds: 20

---

apiVersion: v1
kind: Service
metadata:
  name: adguardhome
  labels:
    app: adguardhome
spec:
  type: ClusterIP
  selector:
    app: adguardhome
  ports:
  - port: 80
    # targetPort: 3000
    targetPort: 80
    protocol: TCP

</code></pre><p>The <code>RollingUpdate</code> is intentionally configured to not wait till a new pod is up, and directly terminate the existing pod during deploys. On the surface it seems like an anti-pattern, but since I'm using the <code>hostPort</code> directive, a new Pod wouldn't get scheduled unless port <code>53</code> was available on the host for it to bind to, so the existing Pod has to terminate before a new Pod can be deployed.</p><p>Also I initially intended to use a <code>ConfigMap</code> for holding the <code>AdGuardHome.yml</code>, but there was some issue with AdGuard trying to write to it while initally comming up, but since <code>ConfigMap</code>'s are moundted as <code>ReadOnly</code>, Pod creation used to fail, so I decided to go with a Volume instead, until I could figure out the issue.</p><p>For the initial setup, the AdGuard admin UI will be accessible on port 3000, so you'll have to switch the <code>targetPort</code> to <code>3000</code> in the <code>adguardhome</code> service initially, access the admin UI, setup the password, and then revert the <code>targetPort</code> to <code>80</code>.</p><p>You may also enable <code>DNSSEC</code> under <code>DNS Settings</code> for guaranteeing authenticity of DNS responses by signing them, and making tampering detectable.</p><p>The volume mounts for <code>tls-cert-secret</code> are only necessary if you want to enable DNS-over-TLS. And you need to configure your ingress resource before mounting it here.</p><p>For enabling DNS-over-TLS, on the AdGuard admin UI you can goto <code>Encryption Settings</code> -&gt; <code>Enable Encryption</code>, and put in the Certificate path as <code>/certs/tls.crt</code> and the Key path as <code>/certs/tls.key</code>. Again let me re-iterate that your Ingress resource needs to be configured properly and you need to have a valid TLS certificate for the domain you're hosting AdGuard on.</p><p>On Android phones for Android Pie and later, you may goto <code>Settings</code> -&gt; <code>WiFi and Internet</code> -&gt; <code>Private DNS</code>. Select <code>Private DNS Hostname Provider</code> and set it to the domain name to the once you've configured on. You may also configure it on your home router to ensure all the devices get DNS level Ad Blocking.</p><p>This concludes the AdGuard part of the setup.</p><hr><p>Now coming to setting up WireGuard.</p><p>I'll be referring to the k3s cluster as the server and the local laptop as the client from here on.</p><p>You'll need WireGaurd installed on both your server and client machine. Follow the <a href="https://www.wireguard.com/install" target="_blank" rel="noopener">steps as per your distribution</a> to install the same. If you're using a bleeding edge distro like Archlinux or Gentoo, you don't need to do anything on the server side, since WireGuard is already baked into the kernel at this point. On the client side however you'll need to install it for getting the command line client to enable / disable the interface.</p><p>Another useful tool to have on the client side is <code>kgctl</code>. You can install it using</p><pre><code>go get github.com/squat/kilo/cmd/kgctl
</code></pre><p>Now we need to create a private and a public key pair on the client.</p><pre><code>wg genkey | tee privatekey | wg pubkey &gt; publickey
</code></pre><p>This'll create 2 files with the respective key contents. This key pair needs to be authorized on the server. You can do this simply by creating a peer resource. Create a file named <code>archie.yaml</code></p><pre><code>apiVersion: kilo.squat.ai/v1alpha1
kind: Peer
metadata:
  name: archie
spec:
  allowedIPs:
  - 10.120.120.1/32 # This is just and example, you can use any valid available CIDR here
  publicKey: CLIENT_PUBLIC_KEY # Enter the public key here, the one you just generated
  persistentKeepalive: 10
</code></pre><p>Finally apply the manifest</p><pre><code>kubectl apply -f archie.yaml
</code></pre><p>Remember, the <code>allowedIPs</code> should be a valid CIDR, which is available on both the server and the client. Now we can use the <code>kgctl</code> tool to generate the <code>peer</code> section of the client WireGuard config.</p><pre><code>kgctl showconf peer archie
</code></pre><p>This will return something like</p><pre><code>[Peer]
AllowedIPs = 10.42.0.0/24, 10.42.0.0/32, 10.4.0.1/32
Endpoint = YOUR_SERVER_IP:51820
PersistentKeepalive = 10
PublicKey = SERVER_PUBLIC_KEY
</code></pre><p>Create a file on the client named <code>adgaurd.yaml</code> at the location <code>/etc/wireguard</code> and add the following contents to it</p><pre><code>[Interface]
Address = 10.120.120.1/32 # Use the same CIDR whitelisted in the Peer manifest
PrivateKey = CLIENT_PRIVATE_KEY # The one you generated above on your client
DNS = YOUR_SERVER_IP # Enter the IP of the server to block ads, FQDN don't work on Android for some reason

[Peer]</code></pre></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://codingcoffee.dev/blog/wireguard_on_kubernetes_with_adblocking/">https://codingcoffee.dev/blog/wireguard_on_kubernetes_with_adblocking/</a></em></p>]]>
            </description>
            <link>https://codingcoffee.dev/blog/wireguard_on_kubernetes_with_adblocking/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23812063</guid>
            <pubDate>Sun, 12 Jul 2020 15:29:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Future of Online Identity Is Decentralized]]>
            </title>
            <description>
<![CDATA[
Score 269 | Comments 191 (<a href="https://news.ycombinator.com/item?id=23811568">thread link</a>) | @Yolta
<br/>
July 12, 2020 | https://yarmo.eu/post/future-online-identity-decentralized | <a href="https://web.archive.org/web/*/https://yarmo.eu/post/future-online-identity-decentralized">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><h2>Online identity</h2>
<p><a href="https://en.wikipedia.org/wiki/Online_identity">Online&nbsp;identity</a> refers to the concept of "being" in the digital world. As an internet user, you exist. You create accounts on websites. You write on social media and blogs. You post photos. All this online activity has in common that one and the same person performed these actions; it defines your "online&nbsp;identity".</p>
<p>However, your "online&nbsp;identity" is not <em>per se</em> representative of your "social&nbsp;identity" in the physical world.</p>
<p>You may choose to use your own name or a pseudonym. You may choose to publish personally identifiable information or not. You may choose to remain truthful to your social identity or deceive. In short, you may choose for authenticity or for anonymity.</p>
<h2>Authenticity versus anonymity</h2>
<p>Authenticity and anonymity aren't mutually exclusive and that is the beauty of the internet. In the physical realm, you are (mostly) limited to a single social identity. In the digital space, there are no such restrictions. While you can't embody multiple persons in the offline world, you can have several identities online. In fact, you can even have multiple accounts on the same platform, opting for a different balance between authenticity and anonymity for each one of them.</p>
<p>The anonymity has its downsides, creating psychological artifacts like <a href="https://en.wikipedia.org/wiki/Online_disinhibition_effect">online&nbsp;disinhibition</a> and facilitating <a href="https://en.wikipedia.org/wiki/Cyberbullying">cyberharassment</a>. However, even though we are far from completely overcoming these challenges, the internet that allows us to remain anonymous is still the one we should want and fight for.</p>
<h2>Consolidation of identity and internet corporations</h2>
<p>Removing the possibility for anonymity could solve the problem of online toxicity. Large internet corporations like Google and Facebook allow all to create an account on condition that some personally identifiable information is revealed, usually a phone number.</p>
<p>The benefit is that it deters most from repeatably creating new accounts when older accounts have been flagged or banned due to improper behavior. These companies gain the function of "identity provider": they manage your online identity that can be used to login in different locations of the internet. We all know many websites that offer a "Google login" or "Facebook login".</p>
<p>But there is a problem: handling the entire online identity of a single person is too much responsibility for any corporation or organization, especially if it is in their interest to gain intimate individual knowledge and sell it (Google) or use it to manipulate moods and influence decision making (Facebook).</p>
<p>That phone number that was once used to prevent online toxicity is now the first of many pieces of personally identifiable information that these corporations will seek and use to figure out who you are.</p>
<p>"You have nothing to hide"? Great. The internet corporations will still make money hand over fist by selling your personality, your preferences, your buying patterns and your vote. And not just yours. That of entire populations.</p>
<p>Know that profits are just the tip of the iceberg. Governments all around the world are also interested in knowing what their citizens think, say and do for very different motives.</p>
<h2>Going decentralized</h2>
<p>The solution is relatively simple. When you create a new account and get to choose between "Google&nbsp;login", "Facebook&nbsp;login" and "Email&nbsp;login", pick "Email&nbsp;login".</p>
<p>The benefit of not giving away any more personal data and tracking possibilities outweigh the inconvenience of having to fill in your email address and a password, especially when using a password manager. As tempting as the alternative is, making these changes will improve your life and ultimately, when enough people join these efforts, that of the world population.</p>
<p>A different problem arises: how to prove online identity when decentralized?</p>
<h2>Decentralized online identity</h2>
<p>When you are no longer relying on an identity provider to manage your entire online identity, you lose the one common thing all your accounts on different platforms had: if two accounts on different online platforms are created by the same Google or Facebook account, we can safely assume they belong to the same person.</p>
<p>But this "trust by proxy" is lost when the accounts on those platforms were created without identity provider. And whether authentic or anonymous, it can sometimes be extremely useful to know and trust that separate accounts on the internet belong to the same person, even when not knowing who this person is.</p>
<p>The username is not sufficient to identify accounts across platforms. If you are "Alice" on one website, chances are you might need to be "Alice123" on the next one. And what if someone close to you is contacted by an "Aliss" requesting an amount of money to be transferred because they believe you to be in some sort of trouble? A poor attempt at impersonation, I know… Don't worry, a real bad actor will put in more effort and make a much more convincing act.</p>
<h2>Proving decentralized online identity</h2>
<p>What if not only your online identity is decentralized, but also the tool to prove said online identity? This would mean that you wouldn't need to depend on a single company or entity to prove your identity across platforms. Decentralized identity, decentralized proofs!</p>
<p>Such solutions are already being deployed in industry, for example by firms like <a href="https://indicio.tech/">Indicio.tech</a> which focus on blockchain technology.</p>
<p>Built for individuals, I recently launched <a href="https://keyoxide.org/">Keyoxide</a> which uses cryptographic keypairs to accomplish decentralized identity verification. While it doesn't (and shouldn't!) link an account to a person in the physical realm, it links accounts across platforms.</p>
<p>If you trust an account on one platform, you can trust any other account on any other platform as long as they are both verified by "identity proofs" stored in the same keypair. Whether you choose authenticity or anonymity, decentralized identity proofs allow you to build a cross-platform online identity.</p>
<p>Here's my <a href="https://keyoxide.org/9f0048ac0b23301e1f77e994909f6bd6f80f485d">Keyoxide profile</a>. In this case, I link to several "authentic" accounts but I could easily generate a new keypair void of personal data that links to several anonymous accounts. The accounts don't need to be authentic to create an online persona.</p>
<p>All the accounts listed in the link above belong to me. No one else could claim these accounts. Here's how.</p>
<h2>Identity proofs</h2>
<p>An "identity proof" is nothing more than a link to an account A on some platform P stored inside your keypair K. If a "proof verification tool" such as Keyoxide follows this link and discovers some piece of data linking back to keypair K (which is only possible if keypair K and account A on platform P belong to the same person), the account is verified. If this proof verification is done for several accounts on different platforms, it is beyond reasonable doubt that the same person owns said accounts.</p>
<p>No bad actor could claim one of your accounts: the piece of data that links back is specific to your keypair, not the bad actor's keypair. And the bad actor also couldn't insert a proof inside your keypair as long as your keypair isn't compromised. Only you, the owner of the keypair, can add new proofs. But the entire world can read and verify them.</p>
<p>These identity proofs are decentralized because Keyoxide doesn't store them, your cryptographic keypair does. Keyoxide simply reads the keys and verifies the proofs. When you remove a proof from your keypair, Keyoxide will no longer have access to it. You own your proofs and your online identity.</p>
<p>In fact, the proofs are readable by everyone and are not specifically designed for Keyoxide. Anyone can use any tool or create new ones to verify these proofs and developers are encouraged to enrich this field with additional tools and services. Let's build a decentralized identity ecosystem we can all trust.</p>
<h2>Online identity beyond today's internet</h2>
<p>Initiatives like <a href="https://inrupt.com/solid">Solid</a> by <a href="https://en.wikipedia.org/wiki/Tim_Berners-Lee">Sir Tim Berners-Lee</a> are paving the way for a new internet where all data is owned by the user and shared with platforms with consent and restrictions. This would solve the online identity problem: you get the benefits of a "pseudo centralized" account while maintaining full ownership over all account-related data stored on a decentralized platform. Social media would be allowed to see some data, messaging platforms some other data. But there would still be one single account to rule all the platforms.</p>
<p>On today's internet, the best we can do is make fully separated accounts, link them using technologies like decentralized online identity proofs and create our own online personas, with our own open tools that ensure we maintain ownership over them.</p></div></div>]]>
            </description>
            <link>https://yarmo.eu/post/future-online-identity-decentralized</link>
            <guid isPermaLink="false">hacker-news-small-sites-23811568</guid>
            <pubDate>Sun, 12 Jul 2020 14:30:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Rust for JavaScript Developers – Pattern Matching and Enums]]>
            </title>
            <description>
<![CDATA[
Score 109 | Comments 39 (<a href="https://news.ycombinator.com/item?id=23811431">thread link</a>) | @rkwz
<br/>
July 12, 2020 | http://www.sheshbabu.com/posts/rust-for-javascript-developers-pattern-matching-and-enums | <a href="https://web.archive.org/web/*/http://www.sheshbabu.com/posts/rust-for-javascript-developers-pattern-matching-and-enums">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>This is the fourth part in a series about introducing the Rust language to JavaScript developers. Here are the past chapters:</p>
<ol>
<li><a href="http://www.sheshbabu.com/posts/rust-for-javascript-developers-tooling-ecosystem-overview/">Tooling Ecosystem Overview</a></li>
<li><a href="http://www.sheshbabu.com/posts/rust-for-javascript-developers-variables-and-data-types/">Variables and Data Types</a></li>
<li><a href="http://www.sheshbabu.com/posts/rust-for-javascript-developers-functions-and-control-flow/">Functions and Control Flow</a></li>
</ol>
<h2 id="Pattern-Matching"><a href="#Pattern-Matching" title="Pattern Matching"></a>Pattern Matching</h2><p>To understand Pattern Matching, let’s start with something familiar in JavaScript - Switch Case.</p>
<p>Here’s a simple example that uses <code>switch case</code> in JavaScript:</p>
<pre><code><span>function</span> <span>print_color</span><span>(</span>color<span>)</span> <span>{</span>
  <span>switch</span> <span>(</span>color<span>)</span> <span>{</span>
    <span>case</span> <span>"rose"</span><span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"roses are red,"</span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
    <span>case</span> <span>"violet"</span><span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"violets are blue,"</span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
    <span>default</span><span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"sugar is sweet, and so are you."</span><span>)</span><span>;</span>
  <span>}</span>
<span>}</span>

<span>print_color</span><span>(</span><span>"rose"</span><span>)</span><span>;</span> 
<span>print_color</span><span>(</span><span>"violet"</span><span>)</span><span>;</span> 
<span>print_color</span><span>(</span><span>"you"</span><span>)</span><span>;</span> </code></pre>
<p>Here’s the equivalent Rust code:</p>
<pre><code><span>fn</span> <span>print_color</span><span>(</span>color<span>:</span> <span>&amp;</span>str<span>)</span> <span>{</span>
  <span>match</span> color <span>{</span>
    <span>"rose"</span> <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"roses are red,"</span><span>)</span><span>,</span>
    <span>"violet"</span> <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"violets are blue,"</span><span>)</span><span>,</span>
    _ <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"sugar is sweet, and so are you."</span><span>)</span><span>,</span>
  <span>}</span>
<span>}</span>

<span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
  <span>print_color</span><span>(</span><span>"rose"</span><span>)</span><span>;</span> 
  <span>print_color</span><span>(</span><span>"violet"</span><span>)</span><span>;</span> 
  <span>print_color</span><span>(</span><span>"you"</span><span>)</span><span>;</span> 
<span>}</span></code></pre>
<p>Most of the code should be immediately understandable. The <code>match</code> expression has the following signature:</p>
<pre><code><span>match</span> VALUE <span>{</span>
  PATTERN1 <span>=</span><span>&gt;</span> EXPRESSION1<span>,</span>
  PATTERN2 <span>=</span><span>&gt;</span> EXPRESSION2<span>,</span>
  PATTERN3 <span>=</span><span>&gt;</span> EXPRESSION3<span>,</span>
<span>}</span></code></pre>
<p>The fat arrow <code>=&gt;</code> syntax might trip us up because of the similarities with JavaScript arrow functions but they’re unrelated. The last pattern that uses underscore <code>_</code> is called the catchall pattern and is similar to the default case in switch case. Each <code>PATTERN =&gt; EXPRESSION</code> combination is called a <code>match arm</code>.</p>
<p>The above example doesn’t really convey how useful pattern matching is - it just looks like switch case with a different syntax and a fancy name. Let’s talk about destructuring and enums to understand why pattern matching is useful.</p>
<h2 id="Destructuring"><a href="#Destructuring" title="Destructuring"></a>Destructuring</h2><p>Destructuring is the process of extracting the inner fields of an array or struct into separate variables. If you have used destructuring in JavaScript, it is very similar in Rust.</p>
<p>Here’s an example in JavaScript:</p>
<pre><code><span>let</span> rgb <span>=</span> <span>[</span><span>96</span><span>,</span> <span>172</span><span>,</span> <span>57</span><span>]</span><span>;</span>
<span>let</span> <span>[</span>red<span>,</span> green<span>,</span> blue<span>]</span> <span>=</span> rgb<span>;</span>
console<span>.</span><span>log</span><span>(</span>red<span>)</span><span>;</span> 
console<span>.</span><span>log</span><span>(</span>green<span>)</span><span>;</span> 
console<span>.</span><span>log</span><span>(</span>blue<span>)</span><span>;</span> 

<span>let</span> person <span>=</span> <span>{</span> name<span>:</span> <span>"shesh"</span><span>,</span> city<span>:</span> <span>"singapore"</span> <span>}</span><span>;</span>
<span>let</span> <span>{</span> name<span>,</span> city <span>}</span> <span>=</span> person<span>;</span>
console<span>.</span><span>log</span><span>(</span>name<span>)</span><span>;</span> 
console<span>.</span><span>log</span><span>(</span>city<span>)</span><span>;</span> </code></pre>
<p>Here’s the same example in Rust:</p>
<pre><code><span>struct</span> Person <span>{</span>
  name<span>:</span> String<span>,</span>
  city<span>:</span> String<span>,</span>
<span>}</span>

<span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
  <span>let</span> rgb <span>=</span> <span>[</span><span>96</span><span>,</span> <span>172</span><span>,</span> <span>57</span><span>]</span><span>;</span>
  <span>let</span> <span>[</span>red<span>,</span> green<span>,</span> blue<span>]</span> <span>=</span> rgb<span>;</span>
  <span>println!</span><span>(</span><span>"{}"</span><span>,</span> red<span>)</span><span>;</span> 
  <span>println!</span><span>(</span><span>"{}"</span><span>,</span> green<span>)</span><span>;</span> 
  <span>println!</span><span>(</span><span>"{}"</span><span>,</span> blue<span>)</span><span>;</span> 

  <span>let</span> person <span>=</span> Person <span>{</span>
    name<span>:</span> <span>"shesh"</span><span>.</span><span>to_string</span><span>(</span><span>)</span><span>,</span>
    city<span>:</span> <span>"singapore"</span><span>.</span><span>to_string</span><span>(</span><span>)</span><span>,</span>
  <span>}</span><span>;</span>
  <span>let</span> Person <span>{</span> name<span>,</span> city <span>}</span> <span>=</span> person<span>;</span>
  <span>println!</span><span>(</span><span>"{}"</span><span>,</span> name<span>)</span><span>;</span> 
  <span>println!</span><span>(</span><span>"{}"</span><span>,</span> city<span>)</span><span>;</span> 
<span>}</span></code></pre>
<h2 id="Comparing-Structs"><a href="#Comparing-Structs" title="Comparing Structs"></a>Comparing Structs</h2><p>It’s very common to write “if this then that” type of code. Combining destructuring and pattern matching allows us to write these type of logic in a very concise way.</p>
<p>Let’s take this following example in JavaScript. It’s contrived but you have probably written something like this sometime in your career:</p>
<pre><code><span>const</span> point <span>=</span> <span>{</span> x<span>:</span> <span>0</span><span>,</span> y<span>:</span> <span>30</span> <span>}</span><span>;</span>
<span>const</span> <span>{</span> x<span>,</span> y <span>}</span> <span>=</span> point<span>;</span>

<span>if</span> <span>(</span>x <span>===</span> <span>0</span> <span>&amp;&amp;</span> y <span>===</span> <span>0</span><span>)</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>"both are zero"</span><span>)</span><span>;</span>
<span>}</span> <span>else</span> <span>if</span> <span>(</span>x <span>===</span> <span>0</span><span>)</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span><span>`x is zero and y is </span><span><span>${</span>y<span>}</span></span><span>`</span></span><span>)</span><span>;</span>
<span>}</span> <span>else</span> <span>if</span> <span>(</span>y <span>===</span> <span>0</span><span>)</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span><span>`x is </span><span><span>${</span>x<span>}</span></span><span> and y is zero`</span></span><span>)</span><span>;</span>
<span>}</span> <span>else</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span><span>`x is </span><span><span>${</span>x<span>}</span></span><span> and y is </span><span><span>${</span>y<span>}</span></span><span>`</span></span><span>)</span><span>;</span>
<span>}</span></code></pre>
<p>Let’s write the same code in Rust using pattern matching:</p>
<pre><code><span>struct</span> Point <span>{</span>
  x<span>:</span> i32<span>,</span>
  y<span>:</span> i32<span>,</span>
<span>}</span>

<span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
  <span>let</span> point <span>=</span> Point <span>{</span> x<span>:</span> <span>10</span><span>,</span> y<span>:</span> <span>0</span> <span>}</span><span>;</span>

  <span>match</span> point <span>{</span>
    Point <span>{</span> x<span>:</span> <span>0</span><span>,</span> y<span>:</span> <span>0</span> <span>}</span> <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"both are zero"</span><span>)</span><span>,</span>
    Point <span>{</span> x<span>:</span> <span>0</span><span>,</span> y <span>}</span> <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"x is zero and y is {}"</span><span>,</span> y<span>)</span><span>,</span>
    Point <span>{</span> x<span>,</span> y<span>:</span> <span>0</span> <span>}</span> <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"x is {} and y is zero"</span><span>,</span> x<span>)</span><span>,</span>
    Point <span>{</span> x<span>,</span> y <span>}</span> <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"x is {} and y is {}"</span><span>,</span> x<span>,</span> y<span>)</span><span>,</span>
  <span>}</span>
<span>}</span></code></pre>
<p>It’s a bit concise compared to the <code>if else</code> logic but also might be confusing as we’re performing comparison, destructuring and variable binding at the same time.</p>
<p>This is how it looks like visually:</p>
<p><img src="http://www.sheshbabu.com/images/2020-rust-for-javascript-developers-4/pattern-matching-rust-1.png" alt=""><br><img src="http://www.sheshbabu.com/images/2020-rust-for-javascript-developers-4/pattern-matching-rust-2.png" alt=""></p>
<p>We begin to see why it’s named as “pattern matching” - we take an input and see which pattern in the match arms “fits” better - It’s like the <a href="https://www.google.com/search?q=shape+sorter" target="_blank" rel="noopener">shape sorter</a> toys that kids play with. Apart from comparison, we also do variable binding in the 2nd, 3rd and 4th match arms. We pass variables x or y or both to their respective expressions.</p>
<p>Pattern matching is also <code>exhaustive</code> - that is, it forces you to handle all the possible cases. Try removing the last match arm and Rust won’t let you compile the code.</p>
<h2 id="Enum"><a href="#Enum" title="Enum"></a>Enum</h2><p>JavaScript doesn’t have Enums but if you’ve used TypeScript, you can think of Rust’s Enums as a combination of TypeScript’s <a href="https://www.typescriptlang.org/docs/handbook/enums.html" target="_blank" rel="noopener">Enums</a> and TypeScript’s <a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html#discriminated-unions" target="_blank" rel="noopener">Discriminated Unions</a></p>
<p>In the simplest case, Enums can be used as a group of constants.</p>
<p>For example, even though JavaScript doesn’t have Enums, you might have used this pattern:</p>
<pre><code><span>const</span> DIRECTION <span>=</span> <span>{</span>
  FORWARD<span>:</span> <span>"FORWARD"</span><span>,</span>
  BACKWARD<span>:</span> <span>"BACKWARD"</span><span>,</span>
  LEFT<span>:</span> <span>"LEFT"</span><span>,</span>
  RIGHT<span>:</span> <span>"RIGHT"</span><span>,</span>
<span>}</span><span>;</span>

<span>function</span> <span>move_drone</span><span>(</span>direction<span>)</span> <span>{</span>
  <span>switch</span> <span>(</span>direction<span>)</span> <span>{</span>
    <span>case</span> DIRECTION<span>.</span>FORWARD<span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"Move Forward"</span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
    <span>case</span> DIRECTION<span>.</span>BACKWARD<span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"Move Backward"</span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
    <span>case</span> DIRECTION<span>.</span>LEFT<span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"Move Left"</span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
    <span>case</span> DIRECTION<span>.</span>RIGHT<span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"Move Right"</span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
  <span>}</span>
<span>}</span>

<span>move_drone</span><span>(</span>DIRECTION<span>.</span>FORWARD<span>)</span><span>;</span> </code></pre>
<p>Here, we could’ve defined the FORWARD, BACKWARD, LEFT and RIGHT as separate constants, yet grouping it inside the DIRECTION object has the following benefits:</p>
<ul>
<li>The names FORWARD, BACKWARD, LEFT and RIGHT are namespaced under DIRECTION so naming conflicts can be avoided</li>
<li>It is self-documenting as we can quickly see all the valid directions available in the codebase</li>
</ul>
<p>However, there are some problems with this approach:</p>
<ul>
<li>What if someone passes NORTH or UP as an argument to move_drone? To fix this, we can add a validation to make sure that only values present in the DIRECTION object is allowed in the move function.</li>
<li>What if we decide to support UP and DOWN in future or rename LEFT/RIGHT to PORT/STARBOARD? We need to find all the places where similar switch-case or if-else is used. There’s a chance that we might miss out a few places which would cause issues in production.</li>
</ul>
<p>Enums in strongly typed languages like Rust are more powerful as they solve these problems without us writing extra code.</p>
<ul>
<li>If a function can take in only a small set of valid inputs, Enums can be used to enforce this constraint</li>
<li>Enums with pattern matching force you to cover all cases. Useful when you’re updating Enums in future</li>
</ul>
<p>Here’s the equivalent Rust example:</p>
<pre><code><span>enum</span> Direction <span>{</span>
  Forward<span>,</span>
  Backward<span>,</span>
  Left<span>,</span>
  Right<span>,</span>
<span>}</span>

<span>fn</span> <span>move_drone</span><span>(</span>direction<span>:</span> Direction<span>)</span> <span>{</span>
  <span>match</span> direction <span>{</span>
    Direction<span>:</span><span>:</span>Forward <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"Move Forward"</span><span>)</span><span>,</span>
    Direction<span>:</span><span>:</span>Backward <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"Move Backward"</span><span>)</span><span>,</span>
    Direction<span>:</span><span>:</span>Left <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"Move Left"</span><span>)</span><span>,</span>
    Direction<span>:</span><span>:</span>Right <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"Move Right"</span><span>)</span><span>,</span>
  <span>}</span>
<span>}</span>

<span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
  <span>move_drone</span><span>(</span>Direction<span>:</span><span>:</span>Forward<span>)</span><span>;</span>
<span>}</span></code></pre>
<p>We access the <code>variants</code> inside Enum using the <code>::</code> notation. Try editing this code by calling “move_drone(Direction::Up)” or adding “Down” as a new item in the Direction enum. In the first case, the compiler will throw an error saying that “Up” is not found in “Direction” and in the second case, the compiler will complain that we haven’t covered “Down” in the match block.</p>
<p>Rust Enums can do much more than act as a group of constants - we can also associate data with an Enum variant.</p>
<pre><code><span>enum</span> Direction <span>{</span>
  Forward<span>,</span>
  Backward<span>,</span>
  Left<span>,</span>
  Right<span>,</span>
<span>}</span>

<span>enum</span> Operation <span>{</span>
  PowerOn<span>,</span>
  PowerOff<span>,</span>
  <span>Move</span><span>(</span>Direction<span>)</span><span>,</span>
  Rotate<span>,</span>
  TakePhoto <span>{</span> is_landscape<span>:</span> bool<span>,</span> zoom_level<span>:</span> i32 <span>}</span><span>,</span>
<span>}</span>

<span>fn</span> <span>operate_drone</span><span>(</span>operation<span>:</span> Operation<span>)</span> <span>{</span>
  <span>match</span> operation <span>{</span>
    Operation<span>:</span><span>:</span>PowerOn <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"Power On"</span><span>)</span><span>,</span>
    Operation<span>:</span><span>:</span>PowerOff <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"Power Off"</span><span>)</span><span>,</span>
    Operation<span>:</span><span>:</span><span>Move</span><span>(</span>direction<span>)</span> <span>=</span><span>&gt;</span> <span>move_drone</span><span>(</span>direction<span>)</span><span>,</span>
    Operation<span>:</span><span>:</span>Rotate <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"Rotate"</span><span>)</span><span>,</span>
    Operation<span>:</span><span>:</span>TakePhoto <span>{</span>
      is_landscape<span>,</span>
      zoom_level<span>,</span>
    <span>}</span> <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"TakePhoto {}, {}"</span><span>,</span> is_landscape<span>,</span> zoom_level<span>)</span><span>,</span>
  <span>}</span>
<span>}</span>

<span>fn</span> <span>move_drone</span><span>(</span>direction<span>:</span> Direction<span>)</span> <span>{</span>
  <span>match</span> direction <span>{</span>
    Direction<span>:</span><span>:</span>Forward <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"Move Forward"</span><span>)</span><span>,</span>
    Direction<span>:</span><span>:</span>Backward <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"Move Backward"</span><span>)</span><span>,</span>
    Direction<span>:</span><span>:</span>Left <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"Move Left"</span><span>)</span><span>,</span>
    Direction<span>:</span><span>:</span>Right <span>=</span><span>&gt;</span> <span>println!</span><span>(</span><span>"Move Right"</span><span>)</span><span>,</span>
  <span>}</span>
<span>}</span>

<span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
  <span>operate_drone</span><span>(</span>Operation<span>:</span><span>:</span><span>Move</span><span>(</span>Direction<span>:</span><span>:</span>Forward<span>)</span><span>)</span><span>;</span>
  <span>operate_drone</span><span>(</span>Operation<span>:</span><span>:</span>TakePhoto <span>{</span>
    is_landscape<span>:</span> <span>true</span><span>,</span>
    zoom_level<span>:</span> <span>10</span><span>,</span>
  <span>}</span><span>)</span>
<span>}</span></code></pre>
<p>Here, we’ve added one more Enum called Operation that contains “unit like” variants (PowerOn, PowerOff, Rotate) and “struct like” variants (Move, TakePhoto). Notice how we’ve used pattern matching with destructuring and variable binding.</p>
<p>If you’ve used TypeScript or Flow, this is similar to <code>discriminated unions</code> or <code>sum types</code>:</p>
<pre><code><span>interface</span> <span>PowerOn</span> <span>{</span>
  kind<span>:</span> <span>"PowerOn"</span><span>;</span>
<span>}</span>

<span>interface</span> <span>PowerOff</span> <span>{</span>
  kind<span>:</span> <span>"PowerOff"</span><span>;</span>
<span>}</span>

type Direction <span>=</span> <span>"Forward"</span> <span>|</span> <span>"Backward"</span> <span>|</span> <span>"Left"</span> <span>|</span> <span>"Right"</span><span>;</span>

<span>interface</span> <span>Move</span> <span>{</span>
  kind<span>:</span> <span>"Move"</span><span>;</span>
  direction<span>:</span> Direction<span>;</span>
<span>}</span>

<span>interface</span> <span>Rotate</span> <span>{</span>
  kind<span>:</span> <span>"Rotate"</span><span>;</span>
<span>}</span>

<span>interface</span> <span>TakePhoto</span> <span>{</span>
  kind<span>:</span> <span>"TakePhoto"</span><span>;</span>
  is_landscape<span>:</span> <span>boolean</span><span>;</span>
  zoom_level<span>:</span> <span>number</span><span>;</span>
<span>}</span>

type Operation <span>=</span> PowerOn <span>|</span> PowerOff <span>|</span> Move <span>|</span> Rotate <span>|</span> TakePhoto<span>;</span>

<span>function</span> <span>operate_drone</span><span>(</span>operation<span>:</span> Operation<span>)</span> <span>{</span>
  <span>switch</span> <span>(</span>operation<span>.</span>kind<span>)</span> <span>{</span>
    <span>case</span> <span>"PowerOn"</span><span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"Power On"</span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
    <span>case</span> <span>"PowerOff"</span><span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"Power Off"</span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
    <span>case</span> <span>"Move"</span><span>:</span>
      <span>move_drone</span><span>(</span>operation<span>.</span>direction<span>)</span><span>;</span>
      <span>break</span><span>;</span>
    <span>case</span> <span>"Rotate"</span><span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"Rotate"</span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
    <span>case</span> <span>"TakePhoto"</span><span>:</span>
      console<span>.</span><span>log</span><span>(</span><span><span>`TakePhoto </span><span><span>${</span>operation<span>.</span>is_landscape<span>}</span></span><span>, </span><span><span>${</span>operation<span>.</span>zoom_level<span>}</span></span><span>`</span></span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
  <span>}</span>
<span>}</span>

<span>function</span> <span>move_drone</span><span>(</span>direction<span>:</span> Direction<span>)</span> <span>{</span>
  <span>switch</span> <span>(</span>direction<span>)</span> <span>{</span>
    <span>case</span> <span>"Forward"</span><span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"Move Forward"</span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
    <span>case</span> <span>"Backward"</span><span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"Move Backward"</span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
    <span>case</span> <span>"Left"</span><span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"Move Left"</span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
    <span>case</span> <span>"Right"</span><span>:</span>
      console<span>.</span><span>log</span><span>(</span><span>"Move Right"</span><span>)</span><span>;</span>
      <span>break</span><span>;</span>
  <span>}</span>
<span>}</span>

<span>operate_drone</span><span>(</span><span>{</span>
  kind<span>:</span> <span>"Move"</span><span>,</span>
  direction<span>:</span> <span>"Forward"</span><span>,</span>
<span>}</span><span>)</span><span>;</span>

<span>operate_drone</span><span>(</span><span>{</span>
  kind<span>:</span> <span>"TakePhoto"</span><span>,</span>
  is_landscape<span>:</span> <span>true</span><span>,</span>
  zoom_level<span>:</span> <span>10</span><span>,</span>
<span>}</span><span>)</span><span>;</span></code></pre>
<h2 id="Option"><a href="#Option" title="Option"></a>Option</h2><p>We learnt about the <code>Op…</code></p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://www.sheshbabu.com/posts/rust-for-javascript-developers-pattern-matching-and-enums">http://www.sheshbabu.com/posts/rust-for-javascript-developers-pattern-matching-and-enums</a></em></p>]]>
            </description>
            <link>http://www.sheshbabu.com/posts/rust-for-javascript-developers-pattern-matching-and-enums</link>
            <guid isPermaLink="false">hacker-news-small-sites-23811431</guid>
            <pubDate>Sun, 12 Jul 2020 14:16:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[SAS Rescue 3 Trapped British Diplomats in Albania]]>
            </title>
            <description>
<![CDATA[
Score 179 | Comments 75 (<a href="https://news.ycombinator.com/item?id=23811306">thread link</a>) | @Hansig_jw
<br/>
July 12, 2020 | https://www.mydiplomaticlife.com/sas-rescue-trapped-diplomats-in-albania/ | <a href="https://web.archive.org/web/*/https://www.mydiplomaticlife.com/sas-rescue-trapped-diplomats-in-albania/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
<p><span>This is a story of how the SAS rescued myself and two colleagues who were trapped in the British embassy in Tirana having been evacuated into the embassy on 12th September 12th 1998 as the country erupted into civil unrest and lawlessness. The boys from Hereford did good!</span></p>
<p>This was my first diplomatic posting and during the course of my career I took part in the <span>evacuation of British nationals&nbsp;(and others)</span><span>&nbsp;in a number of locations but on this occasion, I was the one being evacuated albeit from my residence to the embassy as a place of safety.<a href="https://www.mydiplomaticlife.com/libya-timely-evacuation-of-oil-workers/">Libya – Timely Evacuation Of Oil Workers During Arab Spring 2011</a></span></p>
<p>This was a day I was not going to forget in a hurry. I had just under four months left before my tour ended and I had spent the previous day at work trawling through future job opportunities. The Ambassador was again out of the country and the Deputy Head of Mission (DHM) was once more in charge. I should have known from previous experience and recent incidents that trouble always seemed to flare up when Ambassadors are away from post.</p>
<p>On this day, I awoke very early to the sounds of large explosions and the rattle of gunfire that seemed to be going off in all directions. What was going on? There had been no forewarning of trouble and things had been relatively quiet and stable in the city over the preceding weeks.</p>
<p>I tried to get hold of the DHM on my mobile phone but the network was down, always a bad sign. I immediately got on the embassy radio net and contacted her. She said that she had just heard from the German Embassy that a local high profile opposition politician, Azem Hajdari, had been assassinated outside the Parliament building and his Democratic Party (DP) supporters were on the warpath blaming the Socialist government party for the murder.</p>
<p>Tanks, automatic weapons and armoured personnel carriers had been seized by DP members and the government were now calling this an attempted coup d’etat and responding with armed force of its own.</p>
<p>She advised me to keep my head down, keep the radio close to hand and they would try and get an Embassy armoured vehicle to me as soon as possible and we would all rendezvous at the embassy. By this time, the noise of fighting outside seemed to be getting louder and getting nearer. The main government quarter was only just two blocks away from my apartment and it sounded like the main fighting was in this area. I cautiously pulled back a shutter and looked outside and saw there was a lot of smoke billowing forth from that quarter.</p>
<p>After about an hour, I heard a familiar voice on the radio, it was Benny our Embassy driver calling from the armoured car radio just outside my front gate. Not for the first time had he come to get me out of another messy situation. He advised me to be careful coming out as there was a body in front of my gate.</p>
<p>As I came out, the noise was deafening, there was small arms firing which appeared to be coming from the next street and there was indeed a man in what looked like a policeman’s uniform lying just to the side of my gate.</p>
<p>I didn’t hang around to assess his condition as just at that moment, a large group of armed men turned the corner on to my street firing in our direction as they advanced. Why they were shooting at a vehicle that was clearly marked as a diplomatic car, I had no idea. I jumped into the car and Benny quickly reversed the vehicle away from the onrushing crowd, turned it around at the intersection and off we sped to the embassy taking as many back roads as possible.</p>
<p>We reached the embassy safely but it was disturbing to see that the usual government provided armed security guarding the Embassy and the surrounds was nowhere to be seen. We drew up to the embassy and I ran into the building. Both the DHM and Management Officer (MO) were already there. The DHM had already contacted London and appraised them of the situation. It appeared that the violence was escalating and that it could very well be a coup d’etat. London advised us to remain in lockdown in the embassy and to stay there until further notice. Not very reassuring.</p>
<p>The hours went by, nighttime came and the sky was lit up with explosions and the gunfire seemed to be getting closer to the embassy. Throughout all of this, the DHM was updating London via our secure communication channels of our ever-growing precarious situation. They continued to advise us to stay in the embassy as help was on the way. What did that mean? How on earth were they going to help us? They were in London and we were trapped and bottled up at the sharp end.</p>
<p>Well, indeed help was on the way in the most unexpected form. After a long, restless and uncomfortable night trying to sleep on the floor of my office under my desk, as dawn was breaking, there was the sound of screeching tyres outside the embassy.</p>
<p>At first we thought this was it, the bad guys had arrived and we were destined for some form of uncertain captivity or worse, but no, out of two strange looking 4x4s, poured a section of heavily armed and equipped Special Air Service (SAS) troopers who had flown into Tirana airport from the UK in an RAF transport aircraft (without any flight clearance), offloaded themselves and sped the 17 Kms to the embassy.</p>
<p>There were no formalities, the SAS section commander immediately told the DHM that he was in charge and that we were to follow his instructions until further notice. For the time being, he said, there were no orders for evacuating us, his men would go out and evaluate the situation on the ground and then make a recommendation back to London.</p>
<p>They then set up their own communications suite in the Ambassador’s office (their communication specialist felt very much at home behind the large Ambassadorial desk), brought in their weapons and stores and after a short briefing, their patrol set off. Benny our driver volunteered to go with them and act as guide and interpreter if needed.</p>
<p>While one party was employed on this task another group made a start of setting up defensive positions within the embassy and thoroughly briefing us on what to do if we were subjected to an attack. It really was a boost to our morale that we had these guys now with us, more than able to physically protect us and if needed get us out of there to a place of safety if things deteriorated.</p>
<p>Later that afternoon the first patrol returned to the embassy. The good news was that they reported our homes had appeared from the outside not to have been looted. They said there was still heavy fighting going on in various parts of the city, but it seemed to be centred mainly around the government quarter. Benny told us later that the patrol had been menaced on several occasions by armed men, but a few well aimed shots above the heads of the mob had convinced them to melt away and not to mess with the patrol.</p>
<p>The fighting went on for about three days. Each day the sound of gunfire and explosions seemed to decrease. The SAS continued to send out rotating patrols to monitor the situation in and around the city, deciding after the third day that there was no need to evacuate us out of the country as their assessment was the fighting had run its course. Indeed thankfully, on the fourth day there was silence, no gunfire and no explosions.</p>
<p>The SAS kept us in the embassy for just over a week before they deemed it fully safe for us to return to our homes and resume normal work. We also received reassurances from the Albanian government that the fighting had now ceased, order had been restored and our local security would be reinstated. All of this was good news indeed.</p>
<p>However, it was a sad day when we came to bid farewell to our SAS rescuers as they packed up to leave. We had got to know them pretty well over the course of a long week. They were a thoroughly professional, no nonsense group of guys who were extremely sociable in the rare moments they took time out to relax in between patrols with a wealth of stories that kept us entertained during the long days and nights we were cooped up in the embassy.</p>
<p>I personally would miss their army ration packs on which we all lived, apart from rare welcome pizzas they brought back occasionally from goodness knows where by some of the patrols.</p>
<p>With impeccable timing, the day after they left, the Ambassador returned to post. Even he, not usually one to crack a joke at the best of times remarked tongue in cheek that in future he would give us ample warning of his next trip out of country so that we could be prepared for the next crisis. Not funny. Yes, by all means forewarn us of your next absence but make it far enough in advance so that I for one could also ensure I was not around as well!</p>

              </article></div>]]>
            </description>
            <link>https://www.mydiplomaticlife.com/sas-rescue-trapped-diplomats-in-albania/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23811306</guid>
            <pubDate>Sun, 12 Jul 2020 13:55:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Operators and Sidecars Are the New Model for Software Delivery]]>
            </title>
            <description>
<![CDATA[
Score 55 | Comments 48 (<a href="https://news.ycombinator.com/item?id=23810718">thread link</a>) | @kiyanwang
<br/>
July 12, 2020 | http://www.ofbizian.com/2020/07/operators-and-sidecars-are-new-model.html | <a href="https://web.archive.org/web/*/http://www.ofbizian.com/2020/07/operators-and-sidecars-are-new-model.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p>Today’s developers are expected to develop resilient and scalable 
distributed systems. Systems that are easy to patch in the face of 
security concerns and easy to do low-risk incremental upgrades. Systems 
that benefit from software reuse and innovation of the open source 
model. Achieving all of this for different languages, using a variety of
 application frameworks with embedded libraries is not possible.</p>
<p>Recently I’ve <a href="https://www.infoq.com/articles/multi-runtime-microservice-architecture/" rel="external" target="_blank">blogged</a>
 about “Multi-Runtime Microservices Architecture” where I have explored 
the needs of distributed systems such as lifecycle management, advanced 
networking, resource binding, state abstraction and how these 
abstractions have been changing over the years. I also&nbsp;<a href="https://www.youtube.com/watch?v=CZPEIJFJV9k" rel="external noopener noreferrer" target="_blank">spoke</a>&nbsp;about&nbsp;“The
 Evolution of Distributed Systems on Kubernetes” covering how Kubernetes
 Operators and the sidecar model are acting as the primary innovation 
mechanisms for delivering the same distributed system primitives.</p>
<p>On both occasions, the main takeaway is the prediction that the 
progression of software application architectures on Kubernetes moves 
towards the sidecar model managed by operators. Sidecars and operators 
could become a mainstream software distribution and consumption model 
and in some cases even replace software libraries and frameworks as we 
are used to.</p>
<p>The sidecar model allows the composition of applications written in 
different languages to deliver joint value, faster and without the 
runtime coupling. Let’s see a few concrete examples of sidecars and 
operators, and then we will explore how this new software composition 
paradigm could impact us.</p>
<h2>Out-of-Process Smarts on the Rise</h2>
<p>In Kubernetes, a sidecar is one of the <a href="http://k8spatterns.io/" rel="external" target="_blank">core design patterns</a>
 achieved easily by organizing multiple containers in a single Pod. The 
Pod construct ensures that the containers are always placed on the same 
node and can cooperate by interacting over networking, file system or 
other IPC methods. And <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/operator/" rel="external" target="_blank">operators</a>
 allow the automation, management and integration of the sidecars with 
the rest of the platform. The sidecars represent a language-agnostic, 
scalable data plane offering distributed primitives to custom 
applications. And the operators represent their centralized management 
and control plane.</p>
<p>Let’s look at a few popular manifestations of the sidecar model.</p>
<h3>Envoy</h3>
<p>Service Meshes such as Istio, Consul, and others are using transparent service proxies such as <a href="https://www.envoyproxy.io/" rel="external" target="_blank">Envoy</a>
 for delivering enhanced networking capabilities for distributed 
systems. Envoy can improve security, it enables advanced traffic 
management, improves resilience, adds deep monitoring and tracing 
features. Not only that, it understands more and more Layer 7 protocols 
such as Redis, MongoDB, MySQL and most recently Kafka. It also added 
response caching capabilities and even WebAssembly support that will 
enable all kinds of custom plugins. Envoy is an example of how a 
transparent service proxy adds advanced networking capabilities to a 
distributed system without including them into the runtime of the 
distributed application components.</p>
<h3>Skupper</h3>
<p>In addition to the typical service mesh, there are also projects, such as<a href="https://skupper.io/" rel="external" target="_blank"> Skupper</a>,
 that ship application networking capabilities through an external 
agent. Skupper solves multicluster Kubernetes communication challenges 
through a Layer 7 virtual network and offers advanced routing and 
connectivity capabilities. But rather than embedding Skupper into the 
business service runtime, it runs an instance per Kubernetes namespace 
which acts as a shared sidecar.</p>
<h3>Cloudstate</h3>
<p><a href="https://cloudstate.io/" rel="external" target="_blank">Cloudstate</a>
 is another example of the sidecar model, but this time for providing 
stateful abstractions for the serverless development model. It offers 
stateful primitives over GRPC for EventSourcing, CQRS, Pub/Sub, 
Key/Value stores and other use cases. Again, it an example of sidecars 
and operators in action but this time for the serverless programming 
model.</p>
<h3>Dapr</h3>
<p><a href="https://dapr.io/" rel="external" target="_blank">Dapr</a>
 is a relatively young project started by Microsoft, and it is also 
using the sidecar model for providing developer-focused distributed 
system primitives. Dapr offers abstractions for state management, 
service invocation and fault handling, resource bindings, pub/sub, 
distributed tracing and others. Even though there is some overlap in the
 capabilities provided by Dapr and Service Mesh, both are very different
 in nature. Envoy with Istio is injected and runs transparently from the
 service and represents an operational tool. Dapr, on the other hand, 
has to be called explicitly from the application runtime over HTTP or 
gRPC and it is an explicit sidecar targeted for developers. It is a 
library for distributed primitives that is distributed and consumed as a
 sidecar, a model that may become very attractive for developers 
consuming distributed capabilities.</p>
<h3>Camel K</h3>
<p>Apache Camel is a mature integration library that rediscovers itself on Kubernetes. Its subproject <a href="https://camel.apache.org/camel-k/latest/index.html" rel="external" target="_blank">Camel K</a>
 uses heavily the operator model to improve the developer experience and
 integrate deeply with the Kubernetes platform. While Camel K does not 
rely on a sidecar, through its CLI and operator it is able to reuse the 
same application container and execute any local code modification in a 
remote Kubernetes cluster in less than a second. This is another example
 of developer-targeted software consumption through the operator model.</p>
<h2>More to Come</h2>
<p>And these are only some of the pioneer projects exploring various 
approaches through sidecars and operators. There is more work being done
 to reduce the networking overhead introduced by container-based 
distributed architectures such as the data plane development kit (<a href="https://www.dpdk.org/" rel="external" target="_blank">DPDK</a>),
 which is a userspace application that bypasses the layers of the Linux 
kernel networking stack and access directly to the network hardware. 
There is work in the Kubernetes project to create <a href="https://github.com/kubernetes/enhancements/issues/753" rel="external" target="_blank">sidecar</a> containers with more granular lifecycle guarantees. There are new Java projects based on GraalVM implementation such as <a href="https://quarkus.io/" rel="external" target="_blank">Quarkus</a>
 that reduce the resource consumption and application startup time which
 makes more workloads attractive for sidecars. All of these innovations 
will make the side-car model more attractive and enable the creation of 
even more such projects.</p>
<p><a href="https://1.bp.blogspot.com/-ajKfxQnN7Eg/Xs1961D9WzI/AAAAAAAAORs/_hu-KhmUN1wsQ8PfeIaNKaHNVyi8-3iYACK4BGAsYHg/d/multiruntine1.png"><img alt="Sidecars Providing Distributed Systems Primitives" data-original-height="944" data-original-width="1670" height="226" src="https://1.bp.blogspot.com/-ajKfxQnN7Eg/Xs1961D9WzI/AAAAAAAAORs/_hu-KhmUN1wsQ8PfeIaNKaHNVyi8-3iYACK4BGAsYHg/w400-h226/multiruntine1.png" title="Sidecars Providing Distributed Systems Primitives" width="400"></a></p><p>Sidecars providing distributed systems primitives</p>
<p>I’d not be surprised to see projects coming up around more specific 
use cases such as stateful orchestration of long-running processes such 
as Business Process Model and Notation (BPMN) engines in sidecars. Job 
schedulers in sidecars. Stateless integration engines i.e. Enterprise 
Integration Patterns implementations in sidecars. Data abstractions and 
data <a href="https://github.com/teiid/teiid-operator" rel="external" target="_blank">federation</a> engines in sidecars. OAuth2/<a href="https://github.com/louketo/louketo-proxy" rel="external" target="_blank">OpenID</a>
 proxy in sidecars. Scalable database connection pools for serverless 
workloads in sidecars. Application networks as sidecars, etc. But why 
would software vendors and developers switch to this model? Let’s see a 
few of the benefits it provides.</p>
<h2>Runtimes with Control Planes over Libraries</h2>
<p>If you are a software vendor today, probably you have already 
considered offering your software to potential users as an API or a 
SaaS-based solution. This is the fastest software consumption model and a
 no-brainer to offer, when possible. Depending on the nature of the 
software you may be also distributing your software as a library or a 
runtime framework. Maybe it is time to consider if it can be offered as a
 container with an operator too. This mechanism of distributing software
 and the resulting architecture has some very unique benefits that the 
library mechanism cannot offer.</p>
<h3>Supporting Polyglot Consumers</h3>
<p>By offering libraries to be consumable through open protocols and 
standards, you open them up for all programming languages. A library 
that runs as a sidecar and consumable over HTTP, using a text format 
such as JSON does not require any specific client runtime library. Even 
when gRPC and Protobuf are used for low-latency and high-performance 
interactions, it is still easier to generate such clients than including
 third party custom libraries in the application runtime and implement 
certain interfaces.</p>
<h3>Application Architecture Agnostic</h3>
<p>The explicit sidecar architecture (as opposed to the transparent one)
 is a way of software capability consumption as a separate runtime 
behind a developer-focused API. It is an orthogonal feature that can be 
added to any application whether that is monolithic, microservices, 
functions-based, actor-based or anything in between. It can sit next to a
 monolith in a less dynamic environment, or next to every microservice 
in a dynamic cloud-based environment. It is trivial to create sidecars 
on Kubernetes, and doable on many other software orchestration platforms
 too.</p>
<h3>Tolerant to Release Impedance Mismatch</h3>
<p>Business logic is always custom and developed in house. Distributed 
system primitives are well-known commodity features, and consumed 
off-the-shelf as either platform features or runtime libraries. You 
might be consuming software for state abstractions, messaging clients, 
networking resiliency and monitoring libraries, etc. from third-party 
open source projects or companies. And these third party entities have 
their release cycles, critical fixes, CVE patches that impact your 
software release cycles too. When third party libraries are consumed as a
 separate runtime (sidecar), the upgrade process is simpler as it is 
behind an API and it is not coupled with your application runtime. The 
release impedance mismatch between your team and the consumed 3rd party 
libraries vendors becomes easier to manage.</p>
<h3>Control Plane Included Mentality</h3>
<p>When a feature is consumed as a library, it is included in your 
application runtime and it becomes your responsibility to understand how
 it works, how to configure, monitor, tune and upgrade. That is because 
the language runtimes (such as the JVM) and the runtime frameworks (such
 as Spring Boot or application servers) dictate how a third-party 
library can be included, …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://www.ofbizian.com/2020/07/operators-and-sidecars-are-new-model.html">http://www.ofbizian.com/2020/07/operators-and-sidecars-are-new-model.html</a></em></p>]]>
            </description>
            <link>http://www.ofbizian.com/2020/07/operators-and-sidecars-are-new-model.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23810718</guid>
            <pubDate>Sun, 12 Jul 2020 12:03:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[IBM looking for 12 years’ experience in Kubernetes administration]]>
            </title>
            <description>
<![CDATA[
Score 384 | Comments 251 (<a href="https://news.ycombinator.com/item?id=23810519">thread link</a>) | @tosh
<br/>
July 12, 2020 | https://intellijobs.ai/job/IBMCloud-Native-Infrastructure-Engineer-Architect-bvJJ6yraexfWOk1nMRKP-bvJJ6yraexfWOk1nMRKP | <a href="https://web.archive.org/web/*/https://intellijobs.ai/job/IBMCloud-Native-Infrastructure-Engineer-Architect-bvJJ6yraexfWOk1nMRKP-bvJJ6yraexfWOk1nMRKP">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://intellijobs.ai/job/IBMCloud-Native-Infrastructure-Engineer-Architect-bvJJ6yraexfWOk1nMRKP-bvJJ6yraexfWOk1nMRKP</link>
            <guid isPermaLink="false">hacker-news-small-sites-23810519</guid>
            <pubDate>Sun, 12 Jul 2020 11:13:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Hosting your entire web application using S3 and CloudFront]]>
            </title>
            <description>
<![CDATA[
Score 118 | Comments 120 (<a href="https://news.ycombinator.com/item?id=23809318">thread link</a>) | @root993
<br/>
July 11, 2020 | https://www.sankalpjonna.com/posts/hosting-your-entire-web-application-using-s3-cloudfront | <a href="https://web.archive.org/web/*/https://www.sankalpjonna.com/posts/hosting-your-entire-web-application-using-s3-cloudfront">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>There are several ways to host an application on the internet, but the one that I am most familiar with is to use a web server such as Apache or NGINX where you can host all the static components of your application and also use it as a reverse proxy server to direct API calls.&nbsp;</p><p>‍</p><p>But recently I came across another way to host a web application which is more elegant, cost effective and has no need for maintenance. This method makes use of AWS S3 and AWS Cloudfront and it’s turned out to be significantly easier to set up, scales infinitely and is cheaper than the alternative.</p><p>‍</p><h4><strong>Why did we need S3 to host a web application?</strong><br></h4><p>The <a href="https://apps.shopify.com/whatsapp-chat-button" target="_blank">product</a> that I have built is currently architected in this way - we use an open source version of Nginx that is hosted on an AWS VPS instance which takes care of hosting our static files for our web app and also works as a reverse proxy server to send API calls to our backend applications.</p><p>This setup worked great so far because we have a limited number of users that need access to the application dashboard and there is no need for a CDN either because the users, especially the ones on a paid plan do not have any problem waiting a couple of seconds more for the website to load.</p><p>This requirement changed when there was a new feature requirement within our product. Our users are e-commerce merchants and most of them accept “Cash on delivery” as an option while accepting orders and this leaves a lot of room for fraud to occur where somebody places an order and selects the payment method as “Cash on delivery” without the intention to actually buy the product.</p><p>In order to fix this we introduced a feature where the customer who places a COD order gets an automated message on WhatsApp to confirm their order via a link.</p><figure id="w-node-c4a1f5223dce-87eecd11"><p><img src="https://uploads-ssl.webflow.com/5e0b01877436086c8beecd1a/5f0a951c3967fc45b644bd89_23sxkg2VnH0KczPacTa60TpnJXRd675pY-TD7m1i8DzhDDZvosqX5cXv9tXTpgyHrF6Rd_PM_-xv37qWKFQOsc6Bx818rC_OcCfJxhfHC-FojE8HjpC9EXqQL_jVq8DJbeIynX31.png" alt=""></p><figcaption>Automated WhatsApp message to confirm a COD&nbsp;order</figcaption></figure><p>Clicking on this link would open this web page</p><p>‍</p><figure id="w-node-11a95fb1ed82-87eecd11"><p><img src="https://uploads-ssl.webflow.com/5e0b01877436086c8beecd1a/5f0a951bd3ce595371f24095_FScpPINWKrHotUgTY8aLaV9wlay9dcXXurWkK_Ce-jcsF07e5bxofrU9qjaSspkf5UvCAE40CvgKZ57KouSas0GsPBF_RHbLppjgiOhpGqLN0LbQiVIGd0f7yV9pw9pc2g5t6nEP.png" alt=""></p><figcaption>Reactjs web app used to confirm a COD&nbsp;order</figcaption></figure><p>Now this web page would be accessed by the customers that buy from the merchants that use our application, so the traffic to this page could be very erratic, not to mention the fact that it would come from various parts of the world where the users internet connection would also be erratic and vary according to the region.</p><p>Therefore it did not make sense to host this web page the way the rest of our application is hosted. This web app had the following requirements</p><ul role="list"><li>High availability from any part of the world</li><li>Fast load time</li><li>Ability to handle any amount of traffic</li><li>Not having the need to manage or monitor</li></ul><p>It turns out that all of these things can be achieved if you host the app using a combination of S3 and CloudFront which is the CDN offered by AWS.</p><h4><strong>How to host an application on s3</strong><br></h4><p>There is a comprehensive guide in the AWS documentation on how to do this - <a href="https://docs.aws.amazon.com/AmazonS3/latest/user-guide/static-website-hosting.html" target="_blank">link to documentation</a>.&nbsp;</p><p>The TL:DR for this is to Create an s3 bucket with the same name as the domain/subdomain where you want to host your web app.&nbsp;</p><p>For instance, our web page had to be hosted on<a href="http://cod.superlemon.xyz/" target="_blank"> cod.superlemon.xyz</a>, so this is what the s3 bucket would be called. After this there are a bunch of properties and settings that you would have to change on the bucket which are mentioned in the doc.&nbsp;</p><p>Once this is done, you can test whether it worked or not by using either of the below links based on the region where you are hosted</p><figure id="w-node-30ce7d6ec647-87eecd11"><p><img src="https://uploads-ssl.webflow.com/5e0b01877436086c8beecd1a/5f0a951c849c2b0521c7c2f0_AToH07QToYYzbJ9Hj3iliaW3JMuv0_jHNoaEopFciAvlAf-Ajqr0VpnnKS22_3du4E4vmnV-5Eh3fLajnyQ48kEFHFGjwpKVa_wTl7EXOQu2ZrOX_OgbBq1ba08CWAgeUKTuN0no.png" alt=""></p><figcaption>End points for verifying if the s3 hosting worked or not</figcaption></figure><p>Though the steps in the AWS doc are quite comprehensive, there is one gotcha here that you must keep in mind. If your web app runs on a framework like react which is what we are using, you must make sure that under the “static website hosting” settings of the AWS bucket, you set the index document as well as error document as index.html.</p><figure id="w-node-bc6f0af8aa89-87eecd11"><p><img src="https://uploads-ssl.webflow.com/5e0b01877436086c8beecd1a/5f0a951ce32edcd6fc8e8c88_JNhV0zwqHr-nOGJWip4t3WDyp9wB8Ld7aXF3KHr30jHAeKpRQVkB_gUIG-Z911vMOLNRZplgM7vUasVAs5Wm7NUtxkTZS6-HI9YzPh2I78EAwCEezHDfzxR08lDBQu7z4aLBhXSX.png" alt=""></p><figcaption>S3 static web hosting settings</figcaption></figure><p>This is to ensure that if you have any URL routes set up in your react application, those routes are honoured.&nbsp;</p><h4><strong>How to put the s3 application behind a CDN</strong><br></h4><p>The above step only completes one step of the process where your application is now residing in s3. But the process is only complete if the application is accessible as a CDN. For this you would have to use CloudFront and configure it to use your s3 bucket as the source. A comprehensive documentation for this process is given <a href="https://aws.amazon.com/premiumsupport/knowledge-center/cloudfront-https-requests-s3/" target="_blank">here</a>.&nbsp;</p><p>There are a few gotchas here as well. The first one being that you will require an SSL certificate to host your application as <strong>https://</strong>. You can get an SSL certificate easily using <a href="https://aws.amazon.com/premiumsupport/knowledge-center/install-ssl-cloudfront/" target="_blank">AWS Certificate manager</a>. This process becomes even more easy if you are using Route53 to manage your domains and subdomains. Even if you use another provider like Godaddy or Bigrock for your domains, I would highly recommend following <a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/migrate-dns-domain-in-use.html#migrate-dns-change-name-servers-with-provider" target="_blank">these steps</a> to plug in your domains to Route53.&nbsp;</p><p>The other gotcha here is once again something to do with reactjs URL routing. If you are using this in your application, there is another step that you have to follow. Under your CloudFront distribution, you must navigate to error pages and create a new custom error response as follows</p><figure id="w-node-a5d3bf85872d-87eecd11"><p><img src="https://uploads-ssl.webflow.com/5e0b01877436086c8beecd1a/5f0a951c40228a0a31b66d85_Xtn0dT_NkHLal0TU8T9vqg_t9AGSxaLs9wvMlIbGxfXCIrH7coSBdYVtZQdkiJJI6oj6WtfPpMjYius2H4gDZrX1_29_TwlPOiHrWeB24cS65VzitHgu9yK5U43S0ByQf3Z4l7uc.png" alt=""></p><figcaption>CloudFront distribution error pages settings</figcaption></figure><figure id="w-node-283c3bc077ec-87eecd11"><p><img src="https://uploads-ssl.webflow.com/5e0b01877436086c8beecd1a/5f0a951c8fbf67d9dc26bd63_XTsEDUFowLfUmq3r3YixmsOrB-fMsmIqSr2r5HiymcBaBxt79EQiVT-1qZM3Aps7l27IZNzbSDSxRCZ-FV7HPUu3utQckFitE1tjnr_Stn9YA_HSgjwjB-rQwiD6lC48o0BhiBVg.png" alt=""></p><figcaption>CloudFront distribution handling 403 error</figcaption></figure><p>This will ensure that if the CDN is not able to find the URL path you specify, it will default to index.html which will handle the routing in case of a reactjs application.&nbsp;</p><p>After finishing all these steps you will receive a url for your CloudFront distribution that looks something like this -<a href="https://dohgltcrfo5nj.cloudfront.net/" target="_blank"> dohgltcrfo5nj.cloudfront.net</a>. You just need to use this URL as an alias and map it to your domain/subdomain which in our case is<a href="http://cod.superlemon.xyz/" target="_blank"> cod.superlemon.xyz</a></p><figure id="w-node-ec229573544f-87eecd11"><p><img src="https://uploads-ssl.webflow.com/5e0b01877436086c8beecd1a/5f0a951ccd92d9716216562a_S_OJrarz5VxJWIVBHKu-wpg2Ine5qGjwdGzIb0Ban3S5Ya41_TbycPcpfnL5IQbu73mNS7oMmqNsrTQjatzC1qUSgsuy5q_CGEL25PITgZlWNJ3xUouo0G-DkloWeR_zPIfW9qA2.png" alt=""></p><figcaption>Route53 subdomain targeting</figcaption></figure><p>And that’s it, it's done! You now have a highly available application which does not need to be monitored or managed. Once you launch your application this way, it is now on a CDN and if you have to update the application in the future, the CDN cache must be invalidated for the changes to take effect. This can be done under the “invalidations” tab.</p><figure id="w-node-4a1c808b9f87-87eecd11"><p><img src="https://uploads-ssl.webflow.com/5e0b01877436086c8beecd1a/5f0a951c64584095bc4b3701_5oYoQ3CFjxE69GyZKHZ1HlboCYnrtEcRAZok14fLisD0VU7JCm1s3416Q5roMUIWFy-XX7PzNWwXQ3ogLygpMhV1AsPciPjqGAs9E9Dyx1drA9qLf6GmDCN_1otqPOhMwJ3ep9ei.png" alt=""></p><figcaption>CloudFront cache invalidation</figcaption></figure><p>Then supply all the paths that have been updated and you would like the CDN cache to invalidate. If you would like to invalidate the entire app, just enter "*".</p><figure id="w-node-33b54a1119a6-87eecd11"><p><img src="https://uploads-ssl.webflow.com/5e0b01877436086c8beecd1a/5f0a951cde4cdd2f582b3238_7JLSDXaOYN0gpc6dfgedqOpLyO9yFs-WDTLFGyWvpj10HJbsQjynURxaWOBo4TfuI1P8J8Xma0R2D3Z1dEbAm-SLZR-gptJVZkuySjNGJN1DMsMm1ma9h_EBs-lOoL64BlgY0ZlZ.png" alt=""></p><figcaption>CloudFront cache invalidation for specific paths</figcaption></figure><h4><strong>Closing notes</strong><br></h4><p>This approach works great for a use case where the web application is mostly static and can be completely decoupled from the backend applications.&nbsp;</p><p>In terms of cost, with this approach you will only incur the CDN cost since the s3 storage cost for any web application would be quite low and the CDN cost will depend on how much traffic you have so it would scale well with usage.&nbsp;</p><p>For reference, we had around 100k hits on our web page in the month of June and our cost was roughly 0.79$</p><figure id="w-node-724c6c1a2415-87eecd11"><p><img src="https://uploads-ssl.webflow.com/5e0b01877436086c8beecd1a/5f0a951c14ae487790c28040_oj2_EYWg5l2I2CbcSiZVf4aPvLlR2zey8lD9JlrvJP2GtwSc1tOLJ-loHFeSl2qCpweRm5cPgPg6nPhlPs_HtHHmnTNpDr52NwU3zKLXtQcJWFuhqyGPBoCGfK1KJahaqMpN5QWK.png" alt=""></p><figcaption>Our cost for this setup in the month of June</figcaption></figure></div></div>]]>
            </description>
            <link>https://www.sankalpjonna.com/posts/hosting-your-entire-web-application-using-s3-cloudfront</link>
            <guid isPermaLink="false">hacker-news-small-sites-23809318</guid>
            <pubDate>Sun, 12 Jul 2020 06:25:02 GMT</pubDate>
        </item>
    </channel>
</rss>
