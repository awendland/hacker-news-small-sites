<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 50]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 50. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Wed, 26 Aug 2020 00:51:50 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-50.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Wed, 26 Aug 2020 00:51:50 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[A tale of webpage speed, or throwing away React]]>
            </title>
            <description>
<![CDATA[
Score 75 | Comments 53 (<a href="https://news.ycombinator.com/item?id=24258855">thread link</a>) | @todsacerdoti
<br/>
August 24, 2020 | https://solovyov.net/blog/2020/a-tale-of-webpage-speed-or-throwing-away-react/ | <a href="https://web.archive.org/web/*/https://solovyov.net/blog/2020/a-tale-of-webpage-speed-or-throwing-away-react/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section itemprop="articleBody">
  <p>Back in 2011, I happened to get a job writing <a href="https://backbonejs.org/">Backbone.js</a> app. If you never did that, don‚Äôt. I was complaining about difficulties with composition left and right to whoever would listen. As I started digging into alternatives for the front-end, I discovered <a href="https://en.wikipedia.org/wiki/Functional_reactive_programming">FRP</a> and <a href="https://www.flapjax-lang.org/">Flapjax</a>, and <a href="https://clojurescript.org/">ClojureScript</a>. The last one got me hooked on <a href="https://clojure.org/">Clojure</a>. I even did a <a href="https://fwdays.com/event/js-frameworks-day-2013/review/Functional-Reactive-Programming-&amp;-ClojureScript">successful talk</a> on FRP and ClojureScript (and precursor to <a href="https://hoplon.io/">Hoplon</a>, called hlisp).</p>
<h2 id="react">React</h2>
<p>Then in May 2013 React was released. I championed it on my new job and discovered during Clojure-themed hackaton (<a href="https://solovyov.net/blog/2013/clojurecup/">Clojure Cup 2013</a>) that CLJS and React are a great match. What‚Äôs so good about React though? To me, the main selling point is that it composes well.</p>
<p>When you use predecessors like jQuery or Backbone or Angular or whatever after just a year of development your code is a mess of event listeners and triggers. Don‚Äôt get me started on unobtrusive JS, code locality is non-existent with jQuery. Which handler is bound where and what it does? It‚Äôs too hard to discover to be a good base for a good codebase!</p>
<p>Then I started working at <a href="https://kasta.ua/">Kasta</a>, where web frontend was exactly that jQuery-ish mess. Nobody ever wanted to touch checkout, since you could spend hours, if not days, making the smallest change. Then QA would find more invalid states than you can dream of. And then users would report more bugs to our call center. It was just as awful as you can imagine.</p>
<p>So after some experiments, tests, and checks, I decided that we‚Äôre going React + ClojureScript way with server-side rendering done in Clojure.</p>
<h2 id="demise">Demise</h2>
<p>And for a while, things were looking good. We had this <a href="https://solovyov.net/blog/2017/server-side-rendering/">architecture</a> where our components are executed as Clojure on the backend, so no Node.js on the server, hurray! And developer UX is through the roof with the excellent live reload (thanks CLJS), ability to connect from your editor to browser REPL, and experiment there. It is just great!</p>
<p>To make a long story short, our frontend grew bigger and bigger. Incremental compilation started to become slower ‚Äî it now routinely takes more than a second or two. And while there were few attempts on keeping the whole app performant, ultimately we failed. It‚Äôs a death by a thousand cuts. The application became too big and its boot time became too long. Server side rendering helps partially, but then hydration freezes the browser. On the older hardware or Androids it became unacceptable!</p>
<p>One of the main reasonings back in 2016 was that we take a hit on startup time, but in turn, get no page loads and have a rich web application with a lot of interactions. And for a while that worked! But startup time became longer and longer, leading to a shameful rating of 5/100 from Google‚Äôs PageSpeed (okay, it was sometimes up to ~25/100, whatever).</p>
<p>More than that, while doing what is described below, we‚Äôve discovered that React also leads to some questionable practices. Like hovers in JS (rather than in CSS), drop-down menus in JS, not rendering hidden (under a hover) text (Google won‚Äôt be happy), weird complex logic (since it‚Äôs possible!), etc. You can have a React app without those problems, but apparently, you have to have better self-control than we had (nobody‚Äôs perfect!).</p>
<p>Also since then, the vast majority of our users switched to mobile apps. This made the web app the main entry point for new users. This means its main goal is rendering fast for a newcomer, because old-timers, which want more functionality, are on mobile app now. And <a href="https://web.dev/tti/">TTI</a> (time to interactive) is so much more important here.</p>
<h2 id="time-for-a-change">Time For A Change</h2>
<p>So given that circumstances have changed, what do we do? I read articles ‚Äúhow I survive on vanilla JS‚Äù since before React appeared and they usually don‚Äôt make sense ‚Äî it‚Äôs either a pink-glassed rant about how great it is, disregarding all the problems (separation of concerns, cohesion, composability, code locality) or a project by one (or few) persons, who just keep everything in their head.</p>
<p>Somewhere back in February I stumbled upon <a href="https://intercoolerjs.org/">Intercooler.js</a>. I‚Äôm not sure if I ever saw it before ‚Äî maybe I did but skimmed over ‚Äî it does not matter. This time it captured my attention.</p>
<p>The idea is that all HTML is rendered on the server. And client updates parts of HTML, controlled by element‚Äôs attributes. Basically like HTML+XHR on steroids. You can‚Äôt do anything you want, but that‚Äôs partially the point: some limits are good so you won‚Äôt do crazy stuff. And you need some support from the server, so you can render partial results ‚Äî just an optimization, but quite an important one.</p>
<p>There is an alternative library ‚Äî <a href="https://unpoly.com/">Unpoly</a>. It has more features around layout and styling but has a little bit less thought out XHR stuff (hard to do a POST request with parameters without having a form, for example). And the library size is much bigger. And it‚Äôs written in CoffeeScript with lots of classes, <a href="https://solovyov.net/blog/2020/inheritance/">ugh</a>.</p>
<p>So I made a proof-of-concept implementation of our catalogue page in Intercooler and it worked! Except there was a dependency on jQuery and some other irritating stuff‚Ä¶ As I was struggling to make a batch request for HTML fragments I understood one thing: when I wrote down a roadmap for catalogue the last point was ‚Äúsmall intercooler-like thing for analytics‚Äù.</p>
<p>So why wait?</p>
<h2 id="twinspark">TwinSpark</h2>
<p>I liked Intercooler‚Äôs coherent approach to working around AJAX, so I decided to name the library after some automotive stuff as well, and TwinSpark seems like an appropriate name. So what‚Äôs the deal?</p>
<p><a href="https://github.com/kasta-ua/twinspark-js">TwinSpark</a> is a framework for declarative HTML enhancement: you put additional attributes on your element and TwinSpark does something with them. Like makes an AJAX call and replaces target with a response, or adds a class, or‚Ä¶ well, see <a href="https://kasta-ua.github.io/twinspark-js/">examples</a>, shall you?</p>
<p>There are some differences with Intercooler, of course, because why would it exist? The most noticeable one is that there is no dependency on jQuery. It supports only modern browsers (not IE or Opera Mini) but drops that 88kb monster.</p>
<p>It also has:</p>
<ul>
<li>no inheritance ‚Äî can‚Äôt stress that enough!</li>
<li>clear extension points for your directives</li>
<li>support for batching requests to a server</li>
<li>tighter attribute name convention (my own opinion, but <code>ic-get</code> and <code>ic-post</code> irritate me: do not make me change keys!)</li>
<li>much smaller payload (thanks to no jQuery!)</li>
<li>should be faster (thanks to no jQuery again)</li>
</ul>
<p>Honestly speaking, the main reasons are <a href="https://kasta-ua.github.io/twinspark-js/#batch">batching</a> and <a href="https://solovyov.net/blog/2020/inheritance/">no inheritance</a>. Inheritance is particularly painful here. In Intercooler, if you declared <code>ic-target</code> on the body, all tags inside will think it‚Äôs their target too. So you include a component somewhere in HTML tree and an attribute higher on tree changes this component behavior. I mean this is a freaking dynamic scope, I want none of that! :)</p>
<p>Funnily enough, after about a month of dabbling with TwinSpark, Intercooler‚Äôs author announced that he‚Äôs doing a jQuery-less modern version: <a href="https://htmx.org/">htmx</a>. :) It has really good extensions points, so maybe it‚Äôs possible to add batching‚Ä¶ but inheritance is still there. :-(</p>
<h2 id="why-is-that-a-good-idea">Why is that a good idea</h2>
<p>We need to look at it from two sides: if it‚Äôs good for developers and if it‚Äôs good for users. React was great at former and terrible at later.</p>
<p>TwinSpark approach is much better in most cases for the user: less JavaScript, less jitter, more common HTML-like behavior. In the worst case, we would serve you 2.5MB of minified (non-gzipped) JS and 700KB of HTML (half of it were initial data for React) for catalogue. JS bundle is not that big because of embedded images or css or some other obscure stuff, it‚Äôs big because it‚Äôs the whole app, with a lot of views and logic.</p>
<p>Now it‚Äôs 40KB of minified non-gzipped JS (TwinSpark, analytics, some behavior, IntersectionObserver polyfill) and 350KB of HTML. Two orders of magnitude difference and even HTML is smaller! This is just like Christmas in childhood!</p>
<p>On the developer side, I think React is better still, but code locality is great, composability is much better (since you are forced in a limited world of working in a simplistic model) than with jQuery. Plus there are a lot of ways to improve it.</p>
<p>The good news is that the development process did not change that much! We‚Äôre still writing components that query necessary data from site-wide memory store (and make a call to API when needed), but they are executed only on the server. We effectively piggy-backend on our previous architecture, and this gives us the perfect ability to render ‚Äúpartial‚Äù HTML - since components do not wait for some ‚Äúcontroller‚Äù to give them all necessary data. This is what allowed us to have both React and non-React versions to co-exist and make an A/B test without writing the markup twice.</p>
<h2 id="results">Results</h2>
<p>It took us four months since the first experiments to release. Not exactly the amount of time I imagined when we started (‚Äúshould take two to three weeks at most!"), heh, but we were not exclusively doing that. It still took a lot of time and energy to remove React-isms from the code and wrangle our app to be a server-side citizen. It still could use some polishing, but we decided to release it despite that just to cut it short. And A/B test showed that we were right ‚Äî especially for Android phones.</p>
<p>Google gives our catalogue 75/100 now instead of 5/100. Hurray, I guess? :)</p>

  </section></div>]]>
            </description>
            <link>https://solovyov.net/blog/2020/a-tale-of-webpage-speed-or-throwing-away-react/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24258855</guid>
            <pubDate>Mon, 24 Aug 2020 09:25:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Clean Start for the Web]]>
            </title>
            <description>
<![CDATA[
Score 87 | Comments 66 (<a href="https://news.ycombinator.com/item?id=24255541">thread link</a>) | @tannhaeuser
<br/>
August 23, 2020 | https://macwright.com/2020/08/22/clean-starts-for-the-web.html | <a href="https://web.archive.org/web/*/https://macwright.com/2020/08/22/clean-starts-for-the-web.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>The web is in need of some reinvention right now.</p><p>The web‚Äôs evolution over the last decade has mirrored the American economy. All of the essential indicators are going ‚Äúup and to the right,‚Äù a steady stream of fundamental advances reassure use that there ‚Äúis progress,‚Äù but the actual experience and effects for individuals stagnates or regresses.</p><p>The crisis affects platforms, creators, and consumers alike.</p><p><em>I‚Äôm going to try and dissect and diagnose this situation, a bit. You can skip forward if you just want to read my casual, unprofessional pitch for a reboot of the web. The idea is that we could choose a new lightweight markdown format to replace HTML &amp; CSS, split the web into documents and applications, and find performance, accessibility, and fun again.</em></p><details><summary>This post uses the pedantic definition of "the web"</summary>I've discussed attempts to reinvent the "Internet" a few times. Things like dat, IPFS, and arweave are all projects to reinvent an Internet, or a transport and data-sharing layer. The web is what lies on top of that, the HTML, CSS, URLs, JavaScript, browsing experience.</details><h3 id="the-platform-collapse">The platform collapse</h3><p>The platform side is what changed last week, when <a href="https://arstechnica.com/information-technology/2020/08/firefox-maker-mozilla-lays-off-250-workers-says-covid-19-lowered-revenue/">Mozilla laid off 250 employees</a> and indicated that it would affect Firefox development. Firefox wasn‚Äôt the #2 browser - that‚Äôs Safari, mainly because of the captive audience of iPhone and iPad users. But it was the most popular browser that people <em>chose</em> to use.</p><p><img alt="Chart of browser market share, with Chrome becoming the monopoly" src="https://macwright.com/images/2020-08-22-clean-starts-for-the-web-chart-of-browser-market-share-with-chrome-becoming-the-monopoly.png"></p><p><em>Chart from <a href="https://gs.statcounter.com/browser-market-share#monthly-200901-202007">statcounter</a></em></p><p>The real winner is not just Chrome, but Chrome‚Äôs engine. One codebase, <a href="https://en.wikipedia.org/wiki/KHTML">KHTML</a>, split into <a href="https://en.wikipedia.org/wiki/WebKit">WebKit</a> (Safari), and <a href="https://en.wikipedia.org/wiki/Blink_(browser_engine)">Blink</a> (Chrome, Microsoft Edge, Opera, etc.)</p><p>This a textbook monoculture. In one sense, it‚Äôs a victory for collaboration because nobody‚Äôs ‚Äòwasting time‚Äô on competing implementations and web developers can expect the same features and bugs across different browsers. But in a deeper way, it threatens one of the basic principles of how the web has evolved.</p><h3 id="specs--implementations">Specs &amp; implementations</h3><p><picture><source srcset="https://macwright.com/images/2020-08-22-clean-starts-for-the-web-decline.webp" type="image/webp"><img alt="Decline" src="https://macwright.com/images/2020-08-22-clean-starts-for-the-web-decline.jpg"></picture></p><p>The web has evolved through a combination of <em>specifications</em> and <em>implementations</em>. Organizations like the <a href="https://whatwg.org/">WHATWG</a>, <a href="https://www.w3.org/">W3C</a>, and <a href="https://www.ietf.org/">IETF</a> have been collaboration spaces for independent developers, corporations, and academics to discuss potential new features of the web. Then, browsers would test those ideas out in a variety of implementations.</p><p>This was an interesting structural piece: it reassured us all that it was <em>possible</em> to follow along, and that a multi-participant web was one of our goals. It was frustrating to pull up <a href="https://caniuse.com/">caniuse</a> and see blank spots, but the idea was that different browsers may take the lead in some areas, but everyone catches up eventually. Chrome was not always the first to jump on features, or the first to optimize.</p><p>It‚Äôs slower to collaborate than to work alone, but it was beneficial in some ways that we‚Äôve lost now. Chrome has been moving extremely fast, adding new specifications and ideas at a startling rate, and it‚Äôs becoming one of the hardest pieces of software to replicate.</p><p>Mike Healy I think <a href="https://twitter.com/mike_hasarms/status/1296575224599556097">said it best</a>:</p><blockquote><p>Do you think the web has almost ‚Äòpriced itself out of the market‚Äô in terms of complexity if only 1-2 organisations are capable of building rendering engines for it?</p></blockquote><p>Not only is it nearly impossible to build a new browser from scratch, once you have one the ongoing cost of keeping up with standards requires a full team of experts. Read Drew DeVault‚Äôs <a href="https://drewdevault.com/2020/08/13/Web-browsers-need-to-stop.html">Web browsers need to stop</a> for that point, and keep reading all of Drew‚Äôs stuff.</p><details><summary>What about Flow?</summary>Yep, there‚Äôs a <a href="https://www.ekioh.com/flow-browser/">browser called Flow</a>, which may exist and may support a full range of web standards. If it does exist, I‚Äôll be very excited about it, but it has been teased for almost a year now without any concrete evidence, so it could equally be vaporware.</details><h3 id="the-problem-for-creators">The problem for creators</h3><p>The web has gotten much harder to develop for.</p><p>The web has had about 25 years to grow, few opportunities to shrink, and is now surrounded by an extremely short-sighted culture that is an outgrowth of economic and career short-termism. There are lots of <a href="https://frankchimero.com/blog/2018/everything-easy/">ways to do anything</a>, and some of the most popular ways of building applications on the web are - in my opinion - <a href="https://macwright.com/2020/05/10/spa-fatigue.html">usually ghoulish overkill</a>.</p><p>The best way for folks to enter <em>web development</em> in 2020 is to choose a niche, like <a href="https://vuejs.org/">Vue.js</a> or <a href="https://reactjs.org/">React</a>, and hope that there‚Äôs a CSS and accessibility expert on their team.</p><p>For folks who just want to create a web page, who don‚Äôt want to enter an industry, there‚Äôs a baffling array of techniques, but all the simplest, probably-best ones are stigmatized. It‚Äôs easier to stumble into building your resume in React with GraphQL than it is to type some HTML in Notepad.</p><h3 id="the-problem-for-consumers">The problem for consumers</h3><p>We hope that all this innovation is <em>for the user</em>, but often it isn‚Äôt. Modern websites seem to be as large, slow, and buggy as they‚Äôve ever been. Our computers are <a href="https://macwright.com/2019/11/15/something-is-wrong-with-computers.html">barely getting faster</a> and our internet connection speeds are stagnating (don‚Äôt even <em>try</em> to mention 5G). Webpage <a href="https://www.pingdom.com/blog/webpages-are-getting-larger-every-year-and-heres-why-it-matters/">size growth</a> is outpacing it all.</p><p>The end result is that I no longer expect pages to be fast, even with <a href="https://github.com/gorhill/uBlock">uBlock</a> installed in Firefox and a good local <a href="https://sonic.net/">fiber internet provider</a>.</p><p>I don‚Äôt want to lay all of the blame at <em>those web developers</em>, though. Here‚Äôs a story from an old job that I find kind of funny. We were collecting some data from user interactions to answer simple questions like ‚Äúdo people click to upload or do they drag &amp; drop?‚Äù So we enabled <a href="https://segment.com/">Segment</a>, a tool that lets you add data-collection pipelines by including a single script. The problem, though, is that Segment offered a big page of on/off switches with hundreds of data providers &amp; ad-tech companies on it. And, sure, enough, some folks closer to the business side started <em>clicking all those buttons</em>.</p><p>See, the problem with ads and data tracking is that <em>you can</em>, and who is going to say no? (In that instance, I said no, and added a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">CSP</a> that would block new advertiser access at the page level.)</p><h2 id="recreating-simplicity">Recreating simplicity</h2><blockquote><p>You cannot get a simple system by adding simplicity to a complex system. - <a href="http://erlang.org/pipermail/erlang-questions/2012-March/065087.html">Richard O‚ÄôKeefe</a></p></blockquote><p>Where do we go from here? Some of the smartest folks out there have been <a href="https://twitter.com/_developit/status/1296628134406692865">advocating for a major version revision</a> of the web.</p><p><em>I am in no way qualified to speculate on a whole new web from scratch, but the <a href="https://www.nytimes.com/2020/08/21/us/california-wildfires.html">air quality</a> is scary so I‚Äôm skipping my run and it‚Äôs Saturday morning so here we are.</em></p><p>How do we make the web fun, participatory, and good?</p><p>My first thought is that there are two webs:</p><h3 id="the-document-web">The document web</h3><p><picture><source srcset="https://macwright.com/images/2020-08-22-clean-starts-for-the-web-illustration-of-web-pages.webp" type="image/webp"><img alt="Illustration of web pages" src="https://macwright.com/images/2020-08-22-clean-starts-for-the-web-illustration-of-web-pages.jpg"></picture></p><p>There is the ‚Äúdocument web‚Äù, like blogs, news, Wikipedia, Twitter, Facebook. This is basically the original vision of the web, as far as I can understand it (I was 2). Basically CSS, which we now think of as a way for designers to add brand identity and tweak pixel-perfect details, was instead mostly a way of making plain documents readable and letting the <em>readers</em> of those documents customize how they looked. This attribute actually <a href="https://twitter.com/autiomaa/status/1296755641164468224">survived for a while in Chrome, in the form of user stylesheets</a>, and <a href="https://davidwalsh.name/firefox-user-stylesheet">still works in Firefox</a>. Though it‚Äôs going to be a rough ride in the current web which has basically thrown away <a href="https://en.wikipedia.org/wiki/Semantic_HTML">semantic HTML</a> as an idea.</p><h3 id="the-application-web">The ‚Äúapplication‚Äù web</h3><p><picture><source srcset="https://macwright.com/images/2020-08-22-clean-starts-for-the-web-illustration-of-machines.webp" type="image/webp"><img alt="Illustration of machines" src="https://macwright.com/images/2020-08-22-clean-starts-for-the-web-illustration-of-machines.jpg"></picture></p><p>Then there‚Äôs the ‚Äúapplication web‚Äù. This started as <em>server</em> applications, built with things like <a href="https://www.djangoproject.com/">Django</a> and <a href="https://rubyonrails.org/">Ruby on Rails</a> and before them a variety of technologies that will live forever in corporations, like <a href="https://en.wikipedia.org/wiki/Jakarta_Servlet">Java Servlets</a>.</p><p><a href="https://backbonejs.org/">Backbone.js</a> demonstrated that a lot of these applications could be moved into the browser, and then <a href="https://reactjs.org/">React</a> and its many SPA-style competitors established a new order for the web ‚Äì highly-interactive, quite complex, client-side applications.</p><h3 id="the-war-between-the-parts-of-the-web">The war between the parts of the web</h3><p>I posit that this dual-nature is part of what gives the web its magic. But it‚Äôs also a destructive force.</p><p>The magic is that a simple blog can be creative expression, can be beautifully interactive. This one isn‚Äôt, but I‚Äôm just saying - <a href="https://www.typewolf.com/site-of-the-day">it‚Äôs possible</a>.</p><p>The problem is that the ‚Äúdocument web‚Äù is often plagued by application characteristics - it‚Äôs the JavaScript and animations and complexity that makes your average newspaper website an unmitigated disaster. Where document websites adopt application patterns they often accidentally sacrifice <a href="https://www.a11yproject.com/">accessibility</a>, performance, and <a href="https://en.wikipedia.org/wiki/Web_scraping">machine readability</a>.</p><p>And the ‚Äúapplication web‚Äù is plagued by the document characteristics - interactive applications are going to great lengths to avoid most of the essential characteristics of HTML &amp; CSS and just use them as raw materials - avoiding writing any HTML directly at all, avoiding <a href="https://mxstbr.com/thoughts/css-in-js">writing any CSS directly at all</a>, avoiding <a href="https://www.react-spring.io/">default animation features</a>, replacing <a href="https://reactrouter.com/">page-based navigation with something that looks like it but works completely differently</a>. The application web uses <a href="https://reactjs.org/docs/introducing-jsx.html">JSX</a>, not HTML, and would like that in the browser itself, or <a href="https://svelte.dev/">Svelte</a>, instead of JavaScript, and would like that too.</p><p>When I read blog posts from ‚Äòtraditional web developers‚Äô who are mad that HTML &amp; CSS aren‚Äôt enough anymore and that everything is complicated ‚Äì&nbsp;I think this is largely that the application stack for building websites has replaced the document stack in a lot of places. Where we would use Jekyll or server-side rendering, we now use React or Vue.js. There are advantages to that, but for a lot of minimally-interactive websites, it‚Äôs throwing away decades worth of knowledge in exchange for certain performance perks that might not even matter.</p><p>The appeal of social networks is partly because they let us create <em>documents</em> without thinking about web technology, and they provide guarantees around performance, accessibility, and polish that otherwise would take up our time. You don‚Äôt have to think about whether your last Facebook post will load quickly on your friend‚Äôs phone or whether your Instagram post will be correctly cropped and resized in the timeline - those things are taken care of.</p><p>To some extent, this doesn‚Äôt <em>need</em> to be something that only social networks provide, though: standards like <a href="https://en.wikipedia.org/wiki/RSS">RSS</a> and services like <a href="https://www.instapaper.com/">Instapaper</a> show that pleasing formatting and distribution can be done at the <em>platform level</em> and be provided on top of existing vanilla websites.</p><details><summary>These are not absolutes.</summary>Yeah, I can hear it now: but these categories are not ‚Ä¶</details></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://macwright.com/2020/08/22/clean-starts-for-the-web.html">https://macwright.com/2020/08/22/clean-starts-for-the-web.html</a></em></p>]]>
            </description>
            <link>https://macwright.com/2020/08/22/clean-starts-for-the-web.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24255541</guid>
            <pubDate>Sun, 23 Aug 2020 21:47:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Bare Metal Rust Generics]]>
            </title>
            <description>
<![CDATA[
Score 195 | Comments 40 (<a href="https://news.ycombinator.com/item?id=24254048">thread link</a>) | @cube00
<br/>
August 23, 2020 | https://www.ecorax.net/as-above-so-below-1/ | <a href="https://web.archive.org/web/*/https://www.ecorax.net/as-above-so-below-1/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <p>I've had the pleasure to work with very experienced firmware developers; the
kind of people who know the size of their <a href="https://en.wikipedia.org/wiki/Red_zone_(computing)">red
zones</a> and routinely
transform coffee into linker scripts and pointer dereferences. In other words,
the <a href="http://www.catb.org/%7Eesr/jargon/html/story-of-mel.html">Mels</a> and <a href="https://www.usenix.org/system/files/1311_05-08_mickens.pdf">Zeus
Hammers</a> of the
world.</p>
<p>When it comes to the tools of our trade, many of them are curious and
experimental. Some of them‚Äîvery much myself included‚Äîexplore far enough to leave
pragmatism behind and veer into idealism, stubbornly forcing beautiful round
pegs into industrial square holes. Hey, maybe they're square for a reason, but
it doesn't hurt to try.</p>
<p>The majority of them aren't like that. Your average battle-tested firmware
developer has accrued a healthy distrust of the abstract, probably born of
watching shiny platonic constructs crash and burn with painfully <em>real</em> and
<em>concrete</em> error traces. It is sobering, having to chase a hardfault on a tiny
MCU across enough vtables and templated code to make Herb Sutter puke angle
brackets. No wonder modern approaches are met with some resistance unless the
LOADs and the STOREs are in clear view.</p>
<p>I felt this way too when someone suggested to me, back in 2014, that an
up-and-coming language called <a href="https://www.rust-lang.org/">Rust</a> showed promise
in the embedded field. <em>Surely not</em>, I thought, <em>too high level.</em> Even though I
had been playing with it already, my profoundly ingrained bit-twiddling
instincts told me not to trust a language that supported functional programming,
or one that dared to have an <em>opinion</em> on how I managed my memory. Bah! That's
how you get philosophers to run out of forks, and your forks to turn into
SIGSEGVs.</p>
<p>I was wrong.</p>
<p>Through the past five years of experimentation, I've gone from intrigued, to
optimistic, to <em>convinced</em> that Rust is an ideal language to build industrial
grade, bulletproof bare metal software. Beyond that, I've come to realize that
even the highest level constructs that the base language offers are applicable
to firmware development, very much unlike other languages that span a wide range
of paradigms (I'm looking at you, C++). There are a few reasons I felt this way:</p>
<ul>
<li>Rust's safety guarantees and general strictness bring the debug time down
significantly, so there's less need to spend time developing mental maps of
how high level constructs correspond to hardware primitives.</li>
<li>The type system is <em>great</em> at enforcing local reasoning and preventing leaky
abstractions. Building decoupled systems with no runtime cost is easy.</li>
<li>The compiler error messages are worthy of an AI assistant with <em>concerning</em>
mind-reading abilities.</li>
</ul>
<p>Lately, I've had the chance to work on a Rust
<a href="https://www.st.com/en/microcontrollers-microprocessors/stm32f412.html">STM32F412</a>
project in a professional setting, with one of the goals being to foster a Rust
knowledge pool at my company. The project, <code>Loadstone</code>, is a 32kb secure
bootloader targeting bare metal devices for the medical industry.</p>
<p>While it would've been easier‚Äîand much less of a headache to my colleagues‚Äîto
stick to a subset of Rust more familiar to C developers, with your <code>for</code>s, your
<code>*mut u8</code>s and your <code>unsafe</code>s, I instead decided not to pull any punches and
make liberal use of generics, iterator adapters, typestate programming and other
stuff that would've made 2010's cuervo cry blood and hug the closest copy of
Kernighan and Ritchie.</p>
<p>The pressures of a real collaborative project have taught me a lot, and many
assumptions have been refined thanks to the criticism of several skilled
outsiders who, as outsiders often do, had a privileged view on things I took for
granted.</p>
<p>A topic that came up frequently in code review is
<a href="https://thume.ca/2019/07/14/a-tour-of-metaprogramming-models-for-generics/">generics</a>.
Perhaps still recovering from a SFINAE nightmare, some colleagues were
unsure about the use of generics to group behaviour that we'd normally write
separate implementations for. The concerns tended to fall in one of three
categories:</p>
<ul>
<li>Runtime performance.</li>
<li>Binary size bloat.</li>
<li>Habitability and readability.</li>
</ul>
<p>The first is easy to dispel, as it often comes from unfamiliarity with static
dispatch. No vtables or heap allocations in anything we're doing, promise! The
second concern is valid but I've found it to be negligible in practice; I have
plans for another blog post giving some concrete benchmarks.</p>
<p>The last concern is the most subjective and thus the hardest to argue, so I
decided to focus on it in this blog series. I'll go over the design process of
two similar flash memory drivers, and hopefully show how generic programming can
make the job easier and the result more habitable, even in the barren, heapless,
rugged world of bare metal firmware.</p>
<blockquote>
<p>Compile times are another common‚Äîand very valid‚Äîargument against liberal use
of generics. However, it is not a big problem for low footprint embedded
projects like this one.</p>
</blockquote>

<p><a href="https://en.wikipedia.org/wiki/Flash_memory">Flash memory</a> is electronic
non-volatile storage. It's ubiquitous in consumer electronics; any time you
switch a small device off and it <em>remembers something</em>‚Äîwhether it's settings,
songs, documents, even its own program‚Äîchances are you have flash memory to
thank. We'll be looking at two different <em>NOR</em> flash chips, since the first demo
port of <code>Loadstone</code> requires us to operate both:</p>
<ul>
<li>The embedded
<a href="https://www.st.com/en/microcontrollers-microprocessors/stm32f412.html">STM32F412</a>
1MB MCU flash.</li>
<li>The external 128MB <a href="https://www.micron.com/-/media/client/global/documents/products/data-sheet/nor-flash/serial-nor/n25q/n25q_128mb_1_8v_65nm.pdf">Micron
N25Q128</a>
flash chip present in the <a href="https://www.st.com/en/evaluation-tools/32f412gdiscovery.html">STM32F412ZGT6 Discovery
Kit</a></li>
</ul>
<p>You probably knew what flash memory is used for already, but what non-firmware
developers may not know is that flash memory is <em>quirky</em>. You cannot simply
write a byte to a NOR flash address, sir, that would be rude. While a blob of
flash memory will happily turn a <code>1</code> into a <code>0</code>, the opposite operation will
fail silently.</p>
<p>You can think of every <code>1</code> bit (NOR flash's <em>erased</em> state) as a lit candle you
can blow out. However, in this metaphor you don't get a lighter
to light them back up; you get a flamethrower. Without getting into the hardware
principles involved, the design of NOR flash memory requires that you erase
(i.e. set to <code>1</code>) memory <em>in bulk</em>, in chunks often orders of magnitude bigger
than the minimum addressable memory. On most chips you even have a three way
mismatch: your read, write and erase sizes aren't equal. Ugh.</p>
<p>As you can imagine, this makes writing flash drivers a bit of a pain,
particularly because even the smallest write operations turn into <em>read/write
cycles</em>. Writing a single byte requires reading the minimum erasable block
surrounding the targeted address (which may itself require multiple reads),
potentially erasing the entire block, then writing back the original data merged
with the desired byte.</p>
<p>As you can also imagine, nobody but the person writing this driver <em>wants to
care about this</em>. Even in the minimalistic world of bare metal software,
productive collaboration depends on developers filing away these sharp edges,
presenting interfaces that uniformize or hide any aspects of hardware irrelevant
to the bigger design. As such, a first stab at a flash memory interface should
simply offer a way to read and write ranges of memory.</p>
<p>Let's look at some code:</p>
<pre><code><span>pub trait </span><span>ReadWrite {
   </span><span>type </span><span>Error;
   </span><span>type </span><span>Address;
   </span><span>fn </span><span>read</span><span>(</span><span>&amp;</span><span>mut </span><span>self</span><span>, </span><span>address</span><span>: </span><span>Self::</span><span>Address, </span><span>bytes</span><span>: </span><span>&amp;</span><span>mut</span><span> [</span><span>u8</span><span>]) -&gt; </span><span>Result</span><span>&lt;(), </span><span>Self::</span><span>Error&gt;;
   </span><span>fn </span><span>write</span><span>(</span><span>&amp;</span><span>mut </span><span>self</span><span>, </span><span>address</span><span>: </span><span>Self::</span><span>Address, </span><span>bytes</span><span>: </span><span>&amp;</span><span>[</span><span>u8</span><span>]) -&gt; </span><span>Result</span><span>&lt;(), </span><span>Self::</span><span>Error&gt;;
   </span><span>fn </span><span>range</span><span>(</span><span>&amp;</span><span>self</span><span>) -&gt; (</span><span>Self::</span><span>Address, </span><span>Self::</span><span>Address);
   </span><span>fn </span><span>erase</span><span>(</span><span>&amp;</span><span>mut </span><span>self</span><span>) -&gt; </span><span>Result</span><span>&lt;(), </span><span>Self::</span><span>Error&gt;;
}
</span></code></pre>
<p>The above is what I converged on as a generic interface to a flash
driver. If you're unfamiliar with Rust generics, the above isn't a type, or a
parent class to inherit from. It's more like a Haskell typeclass; a set of
requirements for a concrete type to implement, described in this case in the
form of associated types (<code>Error</code> and <code>Address</code>) and method signatures (<code>read</code>,
<code>write</code>, <code>range</code> and <code>erase</code>).</p>
<p>Even at this early step, some tradeoffs have to be made. The keen,
hardfault-traumatized reader will notice that this interface doesn't lend itself
well to timing sensitive problems. All methods are blocking, and abstracting the
read/write cycle away will naturally lead to non-deterministic write times; a
write may take very little if it only requires toggling bits off, or it might
take very long if it straddles two big sectors requiring erase operations. The
<code>bytes</code> output parameter in <code>read</code> might also strike you as not too rusty, where
returning a <code>Vec&lt;u8&gt;</code> is often idiomatic. Unfortunately we have no heap to work
with, so if you want to take your bytes home you'll have to bring your own bag.</p>
<p>Indeed, it's hard to write the universal interface. This one made sense for the
problems we're solving, but make sure to keep in mind the requirements of your
project!</p>
<h3 id="why-not-simply-write-a-concrete-type">Why not simply write a concrete type?<a href="#why-not-simply-write-a-concrete-type" aria-label="Anchor link for: why-not-simply-write-a-concrete-type">üîó</a></h3>
<p>Ah, the word "simply" is tricky. Datasheet in hand, it may have been easier to
write. It might even save us a few bytes down the line. But altogether I think
the benefits of starting here are well worth the drawbacks:</p>
<ul>
<li>Makes it easy to write test doubles and leverage static dispatch for unit
testing. This kind of approach is what I miss the most when writing C, where
I'm forced to resort to link time substitution or to do things with the
preprocessor too vile to even mention here.</li>
<li>Decouples your design from the get go and makes collaboration easy. Another
developer can immediately start working against this interface, and it's
abstract enough to give you confidence it won't need to be changed as more
knowledge of the hardware emerges.</li>
<li>Going abstract first forces you to think long and hard about what behaviour is
common to each implementation and what behaviour isn't, which helps to <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">not
repeat yourself</a>.</li>
</ul>
<p>But the biggest reason, and one where C++ and Rust diverge, is the fact that
<em>you can reason about this interface locally</em>. This stems from a non-obvious
difference between the C++ template system and Rust traits. Where C++ templates
type check at the point of instantiation, Rust traits type check at the point of
definition.</p>
<p>What does this mean? It means that the inscrutable, seven-feet-deep-in-a-library
C++ template errors are impossible in Rust, because the compiler doesn't need to
go beyond the interface to prove it is used correctly.</p>
<p>A similar interface using C++ ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.ecorax.net/as-above-so-below-1/">https://www.ecorax.net/as-above-so-below-1/</a></em></p>]]>
            </description>
            <link>https://www.ecorax.net/as-above-so-below-1/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24254048</guid>
            <pubDate>Sun, 23 Aug 2020 18:26:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Finding vulnerable Twitter accounts with expired domains]]>
            </title>
            <description>
<![CDATA[
Score 183 | Comments 113 (<a href="https://news.ycombinator.com/item?id=24252524">thread link</a>) | @zainamro
<br/>
August 23, 2020 | https://zainamro.com/hacks/finding-vulnerable-twitter-accounts | <a href="https://web.archive.org/web/*/https://zainamro.com/hacks/finding-vulnerable-twitter-accounts">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
    <p><a href="https://zainamro.com/hacks">‚Üê hacks</a></p>
    <h3>Finding vulnerable Twitter accounts with expired domains</h3>
    <p>August 23, 2020</p>
    <p>Recently, I discovered a simple yet suprisingly effective attack vector against Twitter accounts (and which likely applies to other platforms as well). This attack vector makes it easy to find and hack vulnerable accounts with login emails that are using expired domains. If a user creates a Twitter account with an email on their own domain, then forgets to renew their domain at some point, that account can be hijacked by registering the domain, forwarding all emails to your email, then submitting a password reset on that account. By itself, this is hardly an attack vector since finding such vulnerable accounts is the more important part, and we already know that owning someone's email is essentially a "game over" situation. This attack becomes more dangerous when you can combine it with an efficient method to find these vulnerable accounts quickly and at scale. As it turns out, this is trivial on Twitter for several reasons attributable to their platform design.</p>
    <p>If you're familiar with Twitter, you know that users are given the option to add a public website url. With a simple script and proxy, an attacker can quickly iterate over millions of accounts and check if the domain in that url is not registered; this usually indicates some likelihood that the Twitter account was created with an email address on a now-expired domain. To verify this, they can submit a password reset which will show them a censored version of the account email address for confirmation; however, even though it's censored, it still provides enough information to check if the email domain matches the expired domain listed on their account profile. If it does, the attacker now knows this is an account that can be hacked. Once this entire process is automated, it makes finding these accounts very easy. This method of account hijacking is very likely being used right now by malicious hackers, and I believe it accounts for a large portion of stolen accounts/handles on the platform.</p>
    <img src="https://zainamro.com/assets/img/twitter-emails.png">
    <p>This attack can potentially be executed on other platforms besides Twitter, assuming one can find a similar discovery method. In Twitter's case, they could make it harder to discover these accounts by not showing any email confirmation upon requesting a password reset. This would make the process more costly for attackers who would no longer be able to verify whether an account can be hacked prior to registering the domain. Or perhaps, Twitter should monitor and unlist domains that are no longer registered and notify users when this happens so that they're aware. As for most users, in addition to turning on 2FA, it's important to be very cautious when using an email on your own domain to create accounts; it makes it much easier to lose access if you forget to renew or can't under certain extreme circumstances like incarceration or death.</p>
    <p><a href="https://news.ycombinator.com/item?id=24252524">Comments</a></p>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    
    
  

</div>]]>
            </description>
            <link>https://zainamro.com/hacks/finding-vulnerable-twitter-accounts</link>
            <guid isPermaLink="false">hacker-news-small-sites-24252524</guid>
            <pubDate>Sun, 23 Aug 2020 15:25:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Persisting as a solo founder]]>
            </title>
            <description>
<![CDATA[
Score 622 | Comments 232 (<a href="https://news.ycombinator.com/item?id=24251403">thread link</a>) | @vishnumohandas
<br/>
August 23, 2020 | https://vishnu.tech/posts/persistence/ | <a href="https://web.archive.org/web/*/https://vishnu.tech/posts/persistence/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><img src="https://sa.vishnu.tech/noscript.gif" alt="">




    



  



    
    <p><time itemprop="datePublished">August 19, 2020</time>
    </p>
    

<p>I quit my job in January 2020 to build a privacy friendly photo organizer.</p>

<p>As a 30 year old whose friends are either getting married or planning
off-springs, what I had underestimated was the difficulty involved in finding a co-founder and how that would compound the difficulty involved in
finding an investor.</p>

<p>Once I accepted the loneliness and the lack of a financial cushion I had to figure out a way to keep building without burning myself out.</p>

<p>It took me a while, but I have found a rhythm that works, and with it, a steady
source of endorphins. Here are some changes that helped me to keep things
moving.</p>

<h2 id="being-patient">Being patient</h2>

<p>Life is no longer as comfortable as it used to be and things are not always
going the way I want them to. Preseverance has been key and indirectly patience
too. Naval‚Äôs <a href="https://twitter.com/naval/status/1261481752448524289" target="_blank">take on
meditation</a> (60 minutes x
60 days), was an eye opener. I‚Äôve stuck with it since, and I now have an easier
time identifying negative thought patterns and sitting out situations that would
otherwise overwhelm me.</p>

<p>On some level, spending the last few months locked indoors with my parents, who
are not the most rational people in the world has also helped. But I wouldn‚Äôt
recommend it.</p>

<h2 id="reducing-procrastination">Reducing procrastination</h2>

<p>Over time I‚Äôve realized that action precedes motivation and procrastination precedes guilt.</p>

<p>Breaking down tasks into chunks that seem trivial to accomplish has helped reduce the friction in getting started on unexciting grunt work.</p>

<p>Then there are tasks which I loathe from my core, like writing out applications
to VCs explaining why what I‚Äôm doing will matter. To those I attach reinforcing
personal reasons, like, ‚ÄúI need the $50k to hire that college junior who I love
working with, and that will give me spare bandwidth to focus on traction channels‚Äù.</p>

<h2 id="thinking-clearer">Thinking clearer</h2>

<p>It is sub-optimal to not have a coworker to bounce ideas off and rant about problems to. A lot of times it‚Äôs these conversations that help you gain clarity.</p>

<p>It‚Äôs a luxury I do not have so every time I feel stuck, I type/scribble my thoughts out, and then question everything that was written, and then document my realizations.</p>

<p>Task tracking has also helped in clearing the path. I write down unstructured
thoughts into a diary, and once I‚Äôve clarity, I promote them to a Notion board
(that‚Äôs divided into <em>Thinking</em>, <em>Building</em>, <em>Reading</em>, <em>Writing</em> and
<em>Adulting</em>) and every Monday within an Excel sheet I track what was done, and
what is left to be done.</p>

<h2 id="reducing-distractions">Reducing distractions</h2>

<p>I‚Äôve reduced my information consumption to free up brain cycles. I‚Äôve disabled all notifications on my phone barring a few contacts, and I‚Äôve more or less stopped browsing on it. As an added bonus, this has reduced the negativity with which I perceived the world.</p>

<p>To minimize the overhead of context switches, I split tasks into a tree of checkpoints. Before taking a break I note down the next simplest checkpoint so that when I get back to work there‚Äôs little friction to resume.</p>

<p>To help me zone out I keep <a href="https://www.youtube.com/watch?v=5qap5aO4i9A" target="_blank">lofi
beats</a> or
<a href="http://github.audio/" target="_blank">github.audio</a> playing in the background. Listening to the
latter gives me a strange sense of motivation and makes me feel less alone.</p>

<h2 id="staying-grounded">Staying grounded</h2>

<p>I‚Äôm lucky to have some friends who call/text every other week. I look at them as my accountability partners and I talk to them about what I‚Äôm doing on a high level. While not all of them genuinely care, some do, and these conversations force me to reflect on how well I‚Äôm doing what I‚Äôm doing.</p>

<p>While Silicon Valley wisdom suggests that if I‚Äôm not sleeping I should be
working, failing because of a burn out would be stupid. An advantage of not
having a VC onboard so far has been the freedom to dictate my pace. So I spend
days thinking, reading, fiddling with my violin or just doing nothing when I
feel like writing code is not what I want to do.</p>

<hr>

<p>It‚Äôs been 7 months of building alone, and while this is not how I pictured things to be on my last day at work, this is the happiest I have ever been. There‚Äôs a long way to go, and the grind seems inviting.</p>

<p>This list is by no means exhaustive, for I‚Äôm still learning. If you‚Äôve
anything to share, please join <a href="https://news.ycombinator.com/item?id=24251403" target="_blank">the discussion on HackerNews</a>.</p>

<hr>

<p>If you are curious about what I‚Äôve been building, check out
<a href="https://ente.io/" target="_blank">ente.io</a>.</p>

    <br>
    


</div>]]>
            </description>
            <link>https://vishnu.tech/posts/persistence/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24251403</guid>
            <pubDate>Sun, 23 Aug 2020 12:27:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to update U-Boot for PostmarketOS on the Pine Phone]]>
            </title>
            <description>
<![CDATA[
Score 73 | Comments 8 (<a href="https://news.ycombinator.com/item?id=24244407">thread link</a>) | @dustfinger
<br/>
August 22, 2020 | https://bloggerbust.ca/post/how-to-update-uboot-for-postmarketos-on-the-pinephone/ | <a href="https://web.archive.org/web/*/https://bloggerbust.ca/post/how-to-update-uboot-for-postmarketos-on-the-pinephone/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div> 


<!--endtoc-->

<h2 id="introduction">Introduction</h2>

<p>If you are in a hurry to update U-Boot and the SPL on your PinePhone, then please proceed directly to <a href="#write-u-boot-plus-spl-to-bootable-storage">Write U-Boot+SPL to bootable storage</a>.</p>

<p>In this article, I am going to explain what U-Boot, SoC and the SPL are. After that, I will describe the sunxi bootable storage layout as well as the PinePhone boot procedure, so you will understand what you will be updating and why. Then, I will teach you how to determine if an upgrade is required, and I will explain two different ways of upgrading U-Boot. As a special treat for the curious, I will show you the first steps to reverse engineer the U-Boot+SPL firmware blob. I hope this article peeks your curiosity and encourages you to learn more.</p>

<p>Discussed on <a href="https://news.ycombinator.com/item?id=24244407">Hacker News</a> and <a href="https://forum.pine64.org/showthread.php?tid=11099">Pine64</a>.</p>

<h2 id="what-is-u-boot">What is U-Boot?</h2>

<p>U-Boot, or rather <a href="https://en.wikipedia.org/wiki/Das%5FU-Boot">Das U-Boot</a> a.k.a <em>the Universal Boot Loader</em>, is a small program that is loaded into <em>read-only memory</em> (ROM) and is ultimately responsible for loading the Linux kernel. Designed with flexibility in mind, U-Boot now supports <a href="https://gitlab.denx.de/u-boot/u-boot/-/tree/master/arch">a wide variety of architectures</a> for <a href="https://gitlab.denx.de/u-boot/u-boot/-/tree/master/board">embedded boards</a>, each of which may support multiple boot methods. This article is only concerned with U-Boot as it is configured for the <a href="https://gitlab.denx.de/u-boot/u-boot/-/blob/master/board/sunxi/README.sunxi64">Allwinner 64-bit boards</a>, specifically the <a href="https://linux-sunxi.org/A64">Allwinner A64 SoC</a>.</p>

<h2 id="what-is-a-soc">What is a SoC?</h2>

<p>No, it does not refer to the stinky fabric covering your feet. <em>SoC</em> stands for <em>System on a Chip</em>. The PinePhone contains the <a href="https://linux-sunxi.org/A64">Allwinner A64 SoC</a>, featuring a Quad-Core <a href="https://en.wikipedia.org/wiki/ARM%5FCortex-A53">ARM Cortex-A53 ARMv8-A CPU</a> and an <a href="https://linux-sunxi.org/Mali400">ARM Mali400 MP2 GPU</a>. See the <a href="https://linux-sunxi.org/A64#Documentation">Allwinner A64 documentation</a> for more details.</p>

<h2 id="what-is-the-spl">What is the SPL?</h2>

<p>The <em>Secondary Program Loader‚Äôs</em> (SPL) primary function is to load U-Boot proper, the <em>flattened device tree</em> (<a href="https://devicetree-specification.readthedocs.io/en/latest/flattened-format.html">FDT</a>) and the <em>Arm Trusted Firmware</em> (<a href="https://www.trustedfirmware.org/about/">ATF</a>), ultimately passing execution to the ATF. In particular, execution is passed to <em>Trusted Firmware-A</em> (<a href="https://trustedfirmware-a.readthedocs.io/en/latest/index.html">TF-A</a>), which is <a href="https://github.com/ARM-software/arm-trusted-firmware">the official reference implementation</a> used by SoCs with armv8- cores, such as <a href="https://trustedfirmware-a.readthedocs.io/en/latest/plat/allwinner.html">Allwinner Armv8-A SoCs</a>.</p>

<h2 id="what-installs-the-spl">What installs the SPL?</h2>

<p>The SPL is installed via the <code>u-boot-pinephone</code> package from the <a href="http://postmarketos1.brixit.nl/postmarketos/master/aarch64/">postmarketOS aarch64 APK repository</a>. The package is built from the <a href="https://gitlab.com/pine64-org/u-boot/">pine64 u-boot fork</a> in which they added a <a href="https://gitlab.com/pine64-org/u-boot/-/blob/master/.gitlab-ci-pine64.yml">pine64 specific GitLab CI/CD pipeline configuration</a>. By listing the contents of the package using the <a href="https://wiki.alpinelinux.org/wiki/Alpine%5FLinux%5Fpackage%5Fmanagement#apk%5Finfo">apk info</a> command we can see where the SPL binary is actually installed to the root file system.</p>
<div><pre><code data-lang="sh">second-chance:~$ apk info -L u-boot-pinephone</code></pre></div><div><pre><code data-lang="text">u-boot-pinephone-2020.04_git20200421-r1 contains:
usr/share/u-boot/pine64-pinephone/u-boot-sunxi-with-spl.bin</code></pre></div>
<p>However, this is just a convenient location to deliver the binary. The SPL must be deployed to a specific location on disk so that the BootROM can load it.</p>

<h2 id="a-bit-about-bytes">A bit about bytes</h2>

<p>I suspect that not all of those reading this article are familiar with the various standards when it comes to measuring information. Allow me to digress with a brief introduction to these standards with respect to how they both measure and represent a <em>kilobyte</em>. Many of the articles that I have linked herein use the <em><a href="https://en.wikipedia.org/wiki/JEDEC%5Fmemory%5Fstandards#Unit%5Fprefixes%5Ffor%5Fsemiconductor%5Fstorage%5Fcapacity">Joint Electron Device Engineering Council</a></em> (JEDEC) memory standards in which the unit for <em>kilobyte</em> is denoted by (<code>KB</code>), in upper case letters and represents <code>1024B</code>. This is not to be confused with the kilobyte from the <em><a href="https://en.wikipedia.org/wiki/Metric%5Fprefix/">International System of Quantities</a></em> (SI) in which <em>kilo</em> is denoted with a lower case <code>k</code>, such that <code>kB</code> means <code>1000B</code>. My preference is to use the <a href="https://en.wikipedia.org/wiki/Kibibyte">kibibyte</a> (pron. KI-BEE-BYTE), which was established by the <em><a href="https://en.wikipedia.org/wiki/International%5FElectrotechnical%5FCommission">International Electrotechnical commission</a></em> (IEC) and is recognized by all major standards organizations, including those aforementioned.</p>

<table>
<thead>
<tr>
<th>Decimal</th>
<th></th>
<th>Binary</th>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>Value</td>
<td>Metric</td>
<td>Value</td>
<td>IEC</td>
<td>JEDEC</td>
</tr>

<tr>
<td>1</td>
<td>B byte</td>
<td>1</td>
<td>B byte</td>
<td>B byte</td>
</tr>

<tr>
<td>1000</td>
<td>kB kilobyte</td>
<td>1024</td>
<td>KiB kibibyte</td>
<td>KB kilobyte</td>
</tr>

<tr>
<td>1000^2</td>
<td>MB megabyte</td>
<td>1024^2</td>
<td>MiB mebibyte</td>
<td>MB megabyte</td>
</tr>

<tr>
<td>1000^3</td>
<td>GB gigabyte</td>
<td>1024^3</td>
<td>GiB gibibyte</td>
<td>GB gigabyte</td>
</tr>

<tr>
<td>1000^4</td>
<td>TB terabyte</td>
<td>1024^4</td>
<td>TiB tebibyte</td>
<td>-</td>
</tr>
</tbody>
</table>

<p>The reasoning behind my preference is two fold:</p>

<ol>
<li>The JEDEC <a href="https://www.jedec.org/document%5Fsearch?search%5Fapi%5Fviews%5Ffulltext=JESD100B01">Terms, Definitions, and Letter Symbols for Microcomputers, Microprocessors, and Memory Integrated Circuits</a> only defines the first three higher order prefixes: <em>kilo</em> (K), <em>mega</em> (M), <em>giga</em> (G), referring to them for common usage. The prefix <em>tera</em> was later added to the JEDEC terms dictionary to reflect <a href="https://www.jedec.org/standards-documents/dictionary/terms/mega-m-prefix-units-semiconductor-storage-capacity">common prefix usage for modern semiconductor storage capacity</a>.</li>
<li>IEC prefixes cannot be confused with Metric prefixes.</li>
</ol>

<p>To make matters more confusing, sometimes lowercase <code>k</code> is used to mean 1024, e.g. see <a href="https://man7.org/linux/man-pages/man1/tar.1.html#OPTIONS">tar(1) OPTIONS</a> sub section <code>Size Suffixes</code> located <a href="https://man7.org/linux/man-pages/man1/tar.1.html#RETURN%5FVALUE">above the RETURN VALUE section</a>. Understanding which system of measurement is being used is essential when calculating offsets.</p>

<h2 id="layout-of-sunxi-bootable-storage">Layout of sunxi bootable storage</h2>

<p>The first 40 plus <code>KiB</code> of bootable storage for an Allwinner based board has the <a href="https://linux-sunxi.org/Bootable%5FSD%5Fcard#SD%5FCard%5FLayout">following default layout</a>:</p>

<table>
<thead>
<tr>
<th>Start</th>
<th>Size</th>
<th>Usage</th>
</tr>
</thead>

<tbody>
<tr>
<td>0KiB</td>
<td>8KiB</td>
<td>Reserved for optional MBR or GPT</td>
</tr>

<tr>
<td>8KiB</td>
<td>32KiB</td>
<td>Initial SPL</td>
</tr>

<tr>
<td>40KiB</td>
<td>-</td>
<td>U-Boot Proper</td>
</tr>
</tbody>
</table>

<p>From the layout, one can conclude that upgrading the SPL and U-Boot for the PinePhone must involve writing the <code>u-boot-sunxi-with-spl.bin</code> to bootable storage starting at <code>8192B</code>.</p>

<h2 id="pinephone-boot-procedure">PinePhone boot procedure</h2>

<p>Bootstrapping is complicated by initial memory address space limitations. The <a href="https://linux-sunxi.org/BROM#U-Boot%5FSPL%5Flimitations">SPL is limited to 32 KiB</a>, most likely because the BootROM, or BROM, loads the SPL into <a href="https://linux-sunxi.org/A64/Memory%5Fmap">SRAM A1</a>, which is a <code>32 KiB</code> subsection. If the SPL is larger than <code>32 KiB</code> the BROM will refuse to load it. After the SPL loads U-Boot proper and passes execution to the ATF, U-Boot proper in turn runs <a href="https://gitlab.com/postmarketOS/pmaports/-/blob/master/device/community/device-pine64-pinephone/uboot-script.cmd">the Pine Phone‚Äôs u-boot command script</a>. The command script sets the default bootargs for init and calls the <a href="https://gitlab.denx.de/u-boot/u-boot/-/blob/master/cmd/booti.c">booti command</a>, which boots the Linux Kernel Image from memory given the <em>flattend device tree</em> (<a href="https://devicetree-specification.readthedocs.io/en/latest/flattened-format.html">FDT</a>) and the <em>initial ramdisk</em> (<a href="https://en.wikipedia.org/wiki/Initrd">initrd</a>), ultimately passing execution to Linux init.</p>



<div>
  
<div><pre><code data-lang="text">+-----------------------+
|        BootROM        |
+-----------.-----------+
|
|
+-----------V-----------+
|     u-boot.itb+SPL    |
+-----------.-----------+
|
|
+-----------V-----------+
|       TF-A BL31       |
+-----------.-----------+
|
|
+-----------V-----------+
| U-Boot Proper (=BL33) |
+-----------.-----------+
|
|
+-----------V-----------+
|        Linux          |
+-----------------------+</code></pre></div>
</div>

<p>You might have noticed that <code>/usr/share/u-boot/pine64-pinephone/u-boot-sunxi-with-spl.bin</code> is much larger than <code>32KiB</code>.</p>
<div><pre><code data-lang="text">second-chance:~$ ls -lh /usr/share/u-boot/pine64-pinephone/u-boot-sunxi-with-spl.bin
-rw-r--r--    1 root     root      486.0K Jun 20 12:41 /usr/share/u-boot/pine64-pinephone/u-boot-sunxi-with-spl.bin</code></pre></div>
<p>That is because the SPL binary image includes a <em>Flattened uImage Tree</em> (<a href="https://gitlab.com/pine64-org/u-boot/-/blob/master/doc/uImage.FIT/source%5Ffile%5Fformat.txt">FIT image</a>) named <code>u-boot.itb</code> that contains the rest of the firmware.</p>

<h2 id="determine-which-bootable-storage-device-is-relevant">Determine which bootable storage device is relevant</h2>

<p>Before you can <a href="#how-to-determine-if-u-boot-needs-to-be-upgraded">determine if U-Boot needs to be upgraded</a>, you need to know which storage device your PinePhone is booting from. This can be easily determined by using the <a href="https://linux.die.net/man/8/lsblk">lsblk(8)</a> command to list the running operating system‚Äôs current mount points. Below is the output of <a href="https://linux.die.net/man/8/lsblk">lsblk(8)</a> run on my PinePhone booted from an <code>SD</code> card:</p>
<div><pre><code data-lang="sh">second-chance:~$ lsblk --output NAME,TYPE,MOUNTPOINT</code></pre></div><div><pre><code data-lang="text">NAME         TYPE MOUNTPOINT
mmcblk0      disk
‚îú‚îÄmmcblk0p1  part /boot
‚îî‚îÄmmcblk0p2  part
mmcblk2      disk
‚îú‚îÄmmcblk2p1  part
‚îú‚îÄmmcblk2p2  part
‚îú‚îÄmmcblk2p1  part
‚îî‚îÄmmcblk2p2  part
mmcblk2boot0 disk
mmcblk2boot1 disk</code></pre></div>
<p>The disk corresponding to the <code>/boot</code> mountpoint is the name of the block special device that postmarketOS is currently running form. The device path to the relevant boot storage device is therefore <code>/dev/mmcblk0</code>. We will be using this device name in the next two sections to determine if an upgrade is needed and again to perform the actual upgrade if warranted. You must be careful to use the device name that is relevant to your own running environment if you are following along.</p>

<h2 id="how-to-determine-if-u-boot-needs-to-be-upgraded">How to determine if U-Boot needs to be upgraded?</h2>

<p>You can determine if an upgrade is necessary simply by comparing the version of U-Boot installed by the <code>u-boot-pinephone</code> package with the version of U-Boot that is written to <a href="#determine-which-bootable-storage-device-is-relevant">the bootable storage device which is relevant to your running environment</a>.</p>

<p>To see which version of <code>U-Boot</code> was installed by the <code>u-boot-pinephone</code> package, simply run the <code>apk policy</code> sub command as shown below:</p>
<div><pre><code data-lang="sh">second-chance:~/$ apk policy u-boot-pinephone</code></pre></div><div><pre><code data-lang="text">u-boot-pinephone policy:
  2020.04_git20200421-r1:
    lib/apk/db/installed
    etc/apk/cache
    http://postmarketos1.brixit.nl/postmarketos/master</code></pre></div>
<p>Alternatively, you can use the <a href="https://linux.die.net/man/1/busybox">busybox(1)</a> <code>strings</code> command to search the binary‚Äôs printable strings for the regex pattern <code>U-Boot [[:digit:]]</code> by piping the output through a <a href="https://linux.die.net/man/1/busybox">busybox(1)</a> <code>grep</code> filter. As a side note, the PinePhone uses busybox, so when you find yourself looking up command line documentation with the intention of running the command from a PinePhone shell, always check the <a href="https://linux.die.net/man/1/busybox">busybox(1)</a> man pages first.</p>
<div><pre><code data-lang="sh">second-chance:~/packages$ strings /usr/share/u-boot/pine64-pinephone/u-boot-sunxi-with-spl.bin | grep -E <span>'U-Boot [[:digit:]]'</span></code></pre></div><div><pre><code data-lang="text">U-Boot 2020.04 (Jun 20 2020 - 12:41:48 +0000)</code></pre></div>
<p>Similarly, to determine the version of U-Boot that is currently written to bootable storage, you can search for the same regex pattern in the printable strings of the boot disk after the first <code>8 KiB</code>. However, since the bootable storage is significantly larger than <code>u-boot-sunxi-with-spl.bin</code>, it would not be efficient to use the <code>strings</code> command as we did previously. Instead, we will use the <a href="https://linux.die.net/man/1/busybox">busybox(1)</a> <code>dd</code> command, which will allow us to control where to begin and end the search. Since we can‚Äôt easily know the exact offset of the version string, which can very from build to build, my strategy has been to simply skip the first <code>8 KiB</code> and then read the same number of <code>KiB</code> as the size of the currently installed <code>u-boot-sunxi-with-spl.bin</code>. If my search turns up nothing, then that means that the previously installed version was larger, and I can simply increase the <code>count</code> to some reasonable number of <code>KiB</code> until I find what I am looking for.</p>

<p>First, let‚Äôs determine the size of <code>u-boot-sunxi-with-spl.bin</code>.</p>
<div><pre><code data-lang="sh">ls -lh /usr/share/u-boot/pine64-pinephone/u-boot-sunxi-with-spl.bin</code></pre></div><div><pre><code data-lang="text">-rw-r--r--    1 root     root      543.3K Jul 18  2020 /usr/share/u-boot/pine64-pinephone/u-boot-sunxi-with-spl.bin</code></pre></div>
<p>The binary installed to disk is about <code>5‚Ä¶</code></p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://bloggerbust.ca/post/how-to-update-uboot-for-postmarketos-on-the-pinephone/">https://bloggerbust.ca/post/how-to-update-uboot-for-postmarketos-on-the-pinephone/</a></em></p>]]>
            </description>
            <link>https://bloggerbust.ca/post/how-to-update-uboot-for-postmarketos-on-the-pinephone/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24244407</guid>
            <pubDate>Sat, 22 Aug 2020 14:35:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Build tools around workflows, not workflows around tools]]>
            </title>
            <description>
<![CDATA[
Score 483 | Comments 144 (<a href="https://news.ycombinator.com/item?id=24244329">thread link</a>) | @thesephist
<br/>
August 22, 2020 | https://thesephist.com/posts/tools/ | <a href="https://web.archive.org/web/*/https://thesephist.com/posts/tools/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
        <p><em>This March, I spent a couple of days traveling through western Iceland.</em></p>
<p><img src="https://thesephist.com/img/iceland.jpg" alt="Iceland, part 1"></p>
<p>While I was there, I thought a lot about tools ‚Äì mechanical tools, software tools, tools that last, and tools that are fragile. The somber snow-covered scenery made me think about how quickly most of the tools we use today get outdated or replaced, and I thought about the kinds of tools that I‚Äôve been building for myself for the last few years to help organize my life.</p>
<p>I took a walk around <em>Sm√°b√°tah√∂fnin √≠ Keflav√≠k</em> (a small marina nearby) that night, unraveled myself into my hotel room, and started writing this post.</p>
<p>I want to share why I build my own tools and how I think we should think about building tools for life. It‚Äôs long, so here‚Äôs a roadmap. Feel free to jump around.</p>
<ol>
<li><a href="#my-tools-today">My tools, today</a></li>
<li><a href="#workflows--tools">Workflows &gt; tools</a>
<ol>
<li><a href="#tasks-and-notes-a-false-dichotomy">Tasks and notes, a false dichotomy</a></li>
<li><a href="#tools-that-grow-with-your-workflows">Tools that grow with your workflows</a></li>
</ol>
</li>
<li><a href="#own-your-load-bearing-tools-of-life">Own your load-bearing tools of life</a></li>
<li><a href="#cost-and-other-smaller-benefits">Cost and other smaller benefits</a></li>
<li><a href="#your-tools-are-an-extension-of-you">Your tools are an extension of you</a></li>
<li><a href="#appendix-the-technical-nitty-gritty">Appendix: the technical nitty-gritty</a></li>
</ol>
<hr>

<p>For the last few years, I‚Äôve been on a journey to replace all of the essential digital tools I use for organizing my life with tools I develop, maintain, and deploy myself.</p>
<p>What started with a single-page notes app I made in high school has grown into a constellation of home-grown productivity tools I now rely on for my day-to-day work and learning. Here‚Äôs a sample.</p>
<ul>
<li>
<p><a href="https://github.com/thesephist/polyx#ligature">Ligature</a>, for long-term notes and tasks, goals, brainstorming, project planning, and other important writing.</p>
<p><img src="https://thesephist.com/img/ligature.jpg" alt="Ligature"></p>
</li>
<li>
<p><a href="https://github.com/thesephist/pico">Pico</a>, for more ephemeral notes and tasks that change on a daily basis. I split up my notes into two apps (Ligature and Pico) because it works better for my workflow. (More on this later.)</p>
<p><img src="https://thesephist.com/img/pico.jpg" alt="Pico"></p>
</li>
<li>
<p><a href="https://github.com/thesephist/mira">Mira</a> for keeping track of people I know, why they‚Äôre interesting, and what we‚Äôve talked about.</p>
<p><img src="https://thesephist.com/img/mira.png" alt="Mira"></p>
</li>
<li>
<p><a href="https://github.com/thesephist/lovecroft">Lovecroft</a> for managing and sending emails to my <a href="https://thesephist.com/#newsletter">mailing lists</a>.</p>
<p><img src="https://thesephist.com/img/lovecroft.jpg" alt="Lovecroft"></p>
</li>
<li>
<p><a href="https://github.com/thesephist/polyx#noct">Noct</a> for backing up and syncing all my files across computers and the cloud. Noct doesn‚Äôt have a graphical UI, just a command-line tool.</p>
</li>
<li>
<p><a href="https://thesephist.com/posts/frieden/">Frieden</a> as a public availability calendar, showing when I‚Äôm free or busy.</p>
<p><img src="https://thesephist.com/img/frieden.png" alt="Frieden"></p>
</li>
<li>
<p><a href="https://github.com/thesephist/thingboard">Thingboard</a> for more free-form Post-its-on-the-wall style brainstorming.</p>
<p><img src="https://thesephist.com/img/thingboard.jpg" alt="Thingboard"></p>
</li>
<li>
<p><a href="https://codeframe.co/">Codeframe</a> for spinning off simple JavaScript experiments like <a href="https://thesephist.com/posts/word-experiments/#word-plotter">the word plotter</a>.</p>
<p><img src="https://thesephist.com/img/codeframe.jpg" alt="Codeframe"></p>
</li>
<li>
<p><a href="https://github.com/thesephist/draw">draw</a>, a collaborative whiteboard, best used with my iPad Pro and Apple Pencil.</p>
<p><img src="https://thesephist.com/img/draw.jpg" alt="Draw"></p>
</li>
</ul>
<p>Taken together, these apps do almost everything I need to do on my computer to keep myself organized. I don‚Äôt use any third-party notes, task management, or contacts apps, though I used to be a big fan of Simplenote and Todoist. I‚Äôve used Notion, Dropbox Paper, Google Docs, and Airtable, but only for working in teams that centralized on them. These days, besides email and calendar, I live within a system of my own tools, and it works well for me.</p>
<p>I don‚Äôt want to imply that my tools are objectively better than the professional tools on the market like Notion and Dropbox. Those latter services have more features, and might even be more reliable today. But I think my tools fit me better for a different reason.</p>

<p>Each person‚Äôs mind works a little differently, and each person remembers and processes information a little differently. I think we all work at our best when we work with tools that fit how our minds work.</p>
<p>The Eureka moment that some of us feel when we finally find a notes app or todo system that fits our brains ‚Äì that epiphany happens when the tools we use mirror the way our minds work, and how we want to move information through our lives. Good tools fit perfectly around our workflows, bad tools don‚Äôt.</p>
<p>When we resort to having other people build tools for us, the tools they build might never quite perfectly fit our workflows, because they‚Äôre not built for our individual minds. When other people build tools for us to use, they either design tools after their own workflows and mental models, or worse, they design it for a mass market of millions of people who all sort-of-but-not-really work and think in similar ways. The result is that mass-market productivity tools don‚Äôt fit the way our individual minds are predisposed to work. Instead, to use these tools, we need to bend our workflows to fit around the tools.</p>
<p>My biggest benefit from writing my own tool set is that <strong>I can build the tools that exactly conform to my workflows, rather than constructing my workflows around the tools available to me.</strong> This means the tools can truly be an extension of the way my brain thinks and organizes information about the world around me. My tools aren‚Äôt perfect yet, but as they grow and evolve, they‚Äôll only become better reflections of my personal mental models.</p>
<p>For example, one place where my mind works differently than the tools on the market is the task/notes distinction.</p>
<h3 id="tasks-and-notes-a-false-dichotomy">Tasks and notes, a false dichotomy</h3>
<p>My workflow used to differentiate between tasks and notes. Tasks were action items that I could reference, take action on, and complete, and then erase from my list. Notes were things that were indefinitely relevant. I would take notes and then come back to reference them many times. A note by itself isn‚Äôt actionable.</p>
<p>But once I started building my own tools, I realized this distinction isn‚Äôt really the way my brain worked. For me, a huge grey area exists between actionable, completable tasks and purely encyclopedic notes. Here are some things that fall in the grey area for me, pulled from my real, actual notes I took this week.</p>
<ol>
<li>I recently learned some really useful tips about how to grow leaders within a community from the book <em><a href="https://gettogetherbook.com/">Get Together</a></em>. I definitely want to act on these learnings at some point in the communities I lead, but I don‚Äôt want them cluttering up my todo list because they‚Äôre not things I can just complete and check off quickly. I also want to remember these tips forever, even after the first time I act on them.</li>
<li>I‚Äôve been brainstorming an idea for a side project related to <a href="https://en.wikipedia.org/wiki/Computer_algebra">symbolic mathematics</a>. I‚Äôve been writing down my inspirations related to this project. I don‚Äôt want to tuck it away in my notes, because this is something I want to build soon, but I also don‚Äôt want to shove paragraphs of notes into a todo list item.</li>
<li>I keep a running list of ideas I have for future blog posts, but I don‚Äôt really have a ‚Äúwrite the next blog post‚Äù task item under which I‚Äôd normally put these ideas, because I don‚Äôt write on schedule ‚Äì I just write when I can. Where should these ideas go? They‚Äôre sort-of notes and sort-of tasks.</li>
</ol>
<p>You might think that these are either very clearly todo items or very clearly notes, and that‚Äôs ok. But I certainly felt differently, and I realized I was only separating things into these two buckets because my tools forced me to. Before I wrote my own tools, I had a todo app (Todoist) and I had a notes app (Simplenote), and there was nothing in between.</p>
<p>Eventually, I discovered a better mental model for my working style: I ask myself <em>how immediately</em> I need to take action on something.</p>
<p>The way that I see it, everything I learn and jot down is something for me to act on at some point in my life. If I read something that I never thought would influence the way I lived, it wouldn‚Äôt have value to me, and I simply wouldn‚Äôt write it down. Armed with this insight, these days, I have two different notes apps, and I don‚Äôt use a todo list app. These two apps are Ligature and Pico, mentioned above.</p>
<p>One is for notes that are changing often. Day-to-day tasks, things to remember for the next week, even long notes and links related to what I‚Äôm working on <em>now</em>. The other app is for notes that grow over time, like notes I take while reading books or watching talks, my annual goals, financial planning, reading list, and project outlines. <strong>My two notes apps mirror the way my brain works best ‚Äì one is my short-term, working memory, the other is my long-term memory.</strong></p>
<p>I‚Äôve had this system for a few months now, and haven‚Äôt felt any need for something better. It doesn‚Äôt have the crazy features of some notes services on the market today, but it just works the way my brain does.</p>
<p>But what if I need something different later on in life?</p>
<h3 id="tools-that-grow-with-your-workflows">Tools that grow with your workflows</h3>
<p>The other benefit of building homebrew tools is that <strong>tools you build yourself can grow and change as your workflow changes over time</strong>. So if my needs do change over time, my tools can grow to accommodate exactly what I need.</p>
<p>When I first started keeping more organized notes on the interesting people I met, I started with a document in my notes app. Over time, I noticed that these notes followed a pattern: I wrote down their name and primary contact info, how I first met them, what school they went to, and what we talked about the last time we spoke.</p>
<p>So when I built Mira, my own people-manager app, I designed it around that exact workflow I had developed. When I later realized I was also recording people‚Äôs Twitter usernames in the description field, I just added a Twitter username field to each contact.</p>
<p>This is typical of the way I <em>discover</em> my workflows. <strong>I start with a minimal, bare-bones solution, and try to pick up on patterns and tricks I create for myself. And then I encode those patterns and tricks into the tools over time.</strong></p>
<p>This way, my tools can grow organically as my workflows evolve. Neither of them gets in the way of each other most of the time, and I think that was hard to appreciate before I started relying wholly on my own tools.</p>

<p>My productivity tools, especially my notes and contacts, are the load-bearing tools of my life. If they break or disappear, it‚Äôll take a long time and a lot of effort for me to rebuild those same workflows and tools, so it‚Äôs important that they‚Äôre reliable, and that I can depend on them working for me for a long time (measured in years and decades, not quarters).</p>
<p>I‚Äôve written at length about <a href="https://thesephist.com/posts/ownership/">the importance of ownership</a> before. I want to own the pieces of my life that are most critical, and I want agency over how these tools change over time.</p>
<p>I want these notes and ideas and workflows to stick with me as I grow as a person through the next decades. If I had to ‚Ä¶</p></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://thesephist.com/posts/tools/">https://thesephist.com/posts/tools/</a></em></p>]]>
            </description>
            <link>https://thesephist.com/posts/tools/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24244329</guid>
            <pubDate>Sat, 22 Aug 2020 14:23:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Teletext Bad Apple]]>
            </title>
            <description>
<![CDATA[
Score 104 | Comments 32 (<a href="https://news.ycombinator.com/item?id=24243360">thread link</a>) | @bemmu
<br/>
August 22, 2020 | https://bitshifters.github.io/posts/prods/bs-badapple.html | <a href="https://web.archive.org/web/*/https://bitshifters.github.io/posts/prods/bs-badapple.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

                <!-- has to be portfolio-item for the caption overlay to work -->
                <div>
                    <div>

                        
                        <a href="#videoModal" data-toggle="modal">
                            
                            
                            <img src="https://bitshifters.github.io/content/bs-badappl.png" width="640" alt="image-alt">                            
                        </a>
                        


                        <p><strong>‚ÄúBad Apple‚Äù - The definitive BBC Micro/Teletext Version</strong></p>

<p>The Tou Hou Bad Apple <a href="https://www.youtube.com/watch?v=G3C-VevI36s">video</a> has become a benchmark for pushing retro computing power to the limits. While it has been ported to many other 8-bit platforms, we are now pleased to present the definitive BBC Micro version in glorious Teletext pixel graphics.</p>

<p>Our version is a full 3m18s of video playback, played back at 25 frames per second in Teletext / MODE 7.</p>

<p>MODE 7 on the BBC Micro used a <a href="https://en.wikipedia.org/wiki/Mullard_SAA5050">Mullard SAA5050</a> Teletext display/decoder chip which (apart from from subtle implementation differences) is the same <a href="https://en.wikipedia.org/wiki/Teletext">Teletext</a> chip used in analogue TVs. It is 40x25 characters, supporting 8 primary colours, with support for text characters and basic graphical effects using control codes embedded into each character row. Support for teletext on the BBC Micro was an original requirement of the BBC‚Äôs specification for the machine due to their own use of broadcast teletext (<a href="https://en.wikipedia.org/wiki/Ceefax">Ceefax</a>).</p>

<p>The music is a custom VGM chiptune, hand designed by <a href="http://www.inversephase.com/">Inverse Phase</a> for the BBC Micro‚Äôs <a href="https://en.wikipedia.org/wiki/Texas_Instruments_SN76489">SN76489</a>. You can support IP‚Äôs excellent work by <a href="https://www.patreon.com/inversephase">becoming a patron here</a>.</p>

<p>Intro art by <a href="http://www.horsenburger.com/">Horsenburger</a>, and you can buy awesome stuff from <a href="https://www.tshirtstudio.com/marketplace/horsenburger's-textworks">Horsenburger‚Äôs store</a>.</p>

<p>The code, music &amp; screens are crammed into a standard 8-bit 2MHz 6502 based BBC Micro‚Äôs 32Kb RAM, and the video is streamed into memory track by track, after being heavily compressed to fit on one single 400Kb double sided floppy disk image.</p>

<p>You can watch the demo in your browser, using the brilliant JSBeeb Javascript BBC Micro emulator by clicking the Emulate button below.</p>

<p>Full source is on Github.</p>

<p>For more information on teletext, take a look at the following sites:</p>
<ul>
  <li><a href="http://teletextart.co.uk/">TeletextR</a> - News &amp; Happenings in the world of Teletext</li>
  <li><a href="http://edit.tf/">Edit.TF</a> - A Web Based Teletext Editor</li>
  <li><a href="https://www.facebook.com/groups/TeletextGroup/">Facebook Teletext Group</a> - Teletext Community Group</li>
  <li><a href="http://danfarrimond.co.uk/">Dan Farrimond‚Äôs Art</a> - Awesome teletext art</li>
  <li><a href="http://www.horsenburger.com/">Horsenburger‚Äôs Art</a> - Addtional Awesome teletext art</li>
</ul>


                        <hr>
                        <ul>
                            <li>Team:
                                <strong>Bitshifters
                            </strong>
                            </li>
                            
                            <li>Authors:
                                <strong>Kieran, Simon, Inverse Phase &amp; Horsenburger
                            </strong>
                            </li>
                            
                            <li>Released:
                                <strong>2017
                            </strong>
                            </li>
                            <li>Type:
                                <strong>Demo
                            </strong>
                            </li>
                            <li>
                                Platform:
                                <strong>
                                BBC Micro Model B
                            </strong>
                            </li>
                        </ul>
                        <!--
                        <ul class="list-inline item-details">
                            
                            <a href="http://www.pouet.net/prod.php?which=69110" target="_blank">Pouet</a>  
                            <a href="https://www.youtube.com/watch?v=22y_aiOx9CY" target="_blank">Video</a> 
                        </ul>
-->

                    </div>
                </div>
            </div></div>]]>
            </description>
            <link>https://bitshifters.github.io/posts/prods/bs-badapple.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24243360</guid>
            <pubDate>Sat, 22 Aug 2020 11:16:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[AngelCAD: Script-based 3D solid modeller]]>
            </title>
            <description>
<![CDATA[
Score 102 | Comments 67 (<a href="https://news.ycombinator.com/item?id=24243077">thread link</a>) | @app4soft
<br/>
August 22, 2020 | https://arnholm.github.io/angelcad-docs/ | <a href="https://web.archive.org/web/*/https://arnholm.github.io/angelcad-docs/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <header>
        
        
        

        <p>AngelCAD - user documentation</p>

        
        <p><a href="https://github.com/arnholm/angelcad-docs">View the Project on GitHub <small>arnholm/angelcad-docs</small></a></p>
        

        

        
      </header>
      <section>

      <p><strong>AngelCAD - script based 3D solid modeller</strong></p>

<p>AngelCAD is a powerful open source 3D solid modeller based on the Constructive Solid Geometry (<a href="https://en.wikipedia.org/wiki/Constructive_solid_geometry">CSG</a>) modelling technique, expressed in the <a href="http://www.angelcode.com/angelscript/sdk/docs/manual/doc_script.html">AngelScript</a> language. The software creates 3D models in STL or other file formats.</p>



<p>The csg_wikipedia.as sample</p>

<table>
  <thead>
    <tr>
      <th>AngelCAD resources</th>
      <th>&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="http://www.angelcode.com/angelscript/sdk/docs/manual/doc_script.html" target="_blank">AngelScript language</a></td>
      <td>AngelScript language reference</td>
    </tr>
    <tr>
      <td><a href="https://arnholm.github.io/angelcad-docs/docs/annotated.html" target="_blank">AngelCAD language extension</a></td>
      <td>Language extension for 3d modelling</td>
    </tr>
    <tr>
      <td><a href="https://forum.abmesh.com/" target="_blank">AngelCAD user forum</a></td>
      <td>Discuss AngelCAD topics</td>
    </tr>
    <tr>
      <td><a href="https://github.com/arnholm/angelcad-samples" target="_blank">angelcad-samples</a></td>
      <td>Examples repository - GitHub</td>
    </tr>
    <tr>
      <td><a href="https://youtu.be/h-qDzG9bwnQ" target="_blank">Video</a></td>
      <td>script based 3D solid modeller</td>
    </tr>
    <tr>
      <td><a href="https://github.com/arnholm/angelcad/releases" target="_blank">Downloads</a></td>
      <td>Prebuilt binaries - Windows and Linux</td>
    </tr>
  </tbody>
</table>

<p>(links above open in new tabs)</p>

<p><strong>AngelCAD IDE and Viewer</strong> - With the desktop IDE you edit/run the scripts and launch the 3d Viewer</p>

<p><img src="https://arnholm.github.io/angelcad-docs/images/angelcad_ide.png" alt="AngelCAD modeller"></p>

<p><strong>Technology</strong> - AngelCAD uses <a href="https://github.com/arnholm/xcsg" target="_blank">xcsg</a> for 3d computations. xcsg is based on the <a href="https://github.com/arnholm/carve" target="_blank">carve library</a> by Tobias Sargeant. Also used is <a href="http://angusj.com/delphi/clipper.php">Clipper</a> by Angus Johnson, qhull by C.B. Barber and libtess2 by Mikko Mononen.</p>

<p>The AngelCAD language interpreter - as_csg - is based on the <a href="http://www.angelcode.com/angelscript/" target="_blank">AngelScript language</a> by Andreas J√∂nsson, as_csg extends the language with 3d modelling primitives and operations for constructive solid geometry.</p>

<p>The AngelCAD IDE and Viewer applications use the <a href="https://wxwidgets.org/" target="_blank">wxWidgets cross-platform GUI library</a> to create native GUI for Windows and Linux.</p>


      </section>
      
    </div></div>]]>
            </description>
            <link>https://arnholm.github.io/angelcad-docs/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24243077</guid>
            <pubDate>Sat, 22 Aug 2020 10:07:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Stef's Free Online Smalltalk Books]]>
            </title>
            <description>
<![CDATA[
Score 86 | Comments 7 (<a href="https://news.ycombinator.com/item?id=24241561">thread link</a>) | @triyambakam
<br/>
August 21, 2020 | http://stephane.ducasse.free.fr/FreeBooks.html | <a href="https://web.archive.org/web/*/http://stephane.ducasse.free.fr/FreeBooks.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>
	   I started to be fed up to see all the books I like to be out of print, so I started to contact authors and 
	   collect their old books. I would like to thanks them all and their publishers as well. If you
       know an author that is willing to give to the community a book, please give
       him my email. You can support me. </p><p> Thanks in advance. 




</p><p>
You can find a lot more recent and free books at <a href="http://books.pharo.org/">http://books.pharo.org</a>: Spec, Pharo by Example Updated, Pharo with Style, Learning OOD with TDD, and many more. 
In addition most the new books around Pharo are hosted at <a href="http://github.com/SquareBracketAssociates">http://github.com/SquareBracketAssociates</a> and each project has an automatic build with the latest PDF version.


</p><p>
If you have more books and you want to get them archived and listed here please contact me.

</p><div width="95%" height="174">

	<tbody><tr>
	    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/DynamicWebDevInSeaside/DynWebDevInSeaside.png" width="100"></td>
	    <td>
	      <p><a href="http://book.seaside.st/">[ Dynamic Web Development with Seaside ]</a> Stephane Ducasse, Lukas Renggli, David C. Shaffer and Rick Zaccone. Square Bracket Associates, 2009.</p>
	     
	This book is made available under the Creative Commons Attribution-ShareAlike 3.0 license. You will be able to  buy a softcover copy from <a href="http://www.lulu.com/">lulu.com</a>. 
	    </td>
	  </tr>
	

	<tr>
	    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/PBE/PharoByExample.png" width="100"></td>
	    <td>
	      <p><a href="http://books.pharo.org/">[ Pharo by Example (original version and translation) ]</a> Andrew P. Black, St√©phane Ducasse, Oscar Nierstrasz, Damien Pollet with Damien Cassou and Marcus Denker. Square Bracket Associates, 2009.</p> Pay attention there is also Pharo by Example Updated (for Pharo 50) and we are working on Pharo by Example for Pharo 80.
	     
	This book is made available under the Creative Commons Attribution-ShareAlike 3.0 license. You will be able to  buy a softcover copy from <a href="http://www.lulu.com/">lulu.com</a>. 
	    </td>
	  </tr>

	<tr>
	    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/Gnu/GNU.png" width="100"></td>
	    <td>
	     <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/Gnu/computer_programming_using_gnu_smalltalk.pdf">[ Computer Programming using GNU Smalltalk ]</a> Canol Gokel, free e-book. 2009. 
	   <a href="http://www.canol.info/books/computer_programming_using_gnu_smalltalk">home page of the book to have an up to date version</a>.
		</p> 
	    </td>
	  </tr> 


  	<tr>
	    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/SBE/sbe.png" width="100"></td>
	    <td>
	      <p><a href="https://hal.inria.fr/inria-00441576/document">[ Squeak by Example ]</a> Andrew P. Black, St√©phane Ducasse, Oscar Nierstrasz and Damien Pollet. Square Bracket Associates, 2007.</p> Watch out this book is old. Better read <a href="http://books.pharo.org/">Pharo by Example book</a>.
	    </td>
	  </tr>
	
	<tr>
	    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/SmalltalkDesignPatternCompanion/coversm.gif" width="100"></td>
	    <td>
	      <p> <a href="http://sdmeta.gforge.inria.fr/FreeBooks/SmalltalkDesignPatternCompanion">[ Smalltalk design pattern companion book drafts ]</a> Sherman Alpert, Kyle Brown, and Bobby Woolf. Addison-Wesley,  978-02011846241998.</p>
		The chapters listed here are not in their final form but more in draft form. Buy the book it is really excellent. 
	    </td>
	  </tr>
	
	
   <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/ByExample/byExample.gif" width="100"></td>
    <td> 
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/ByExample/">[ Smalltalk by
      Example: the Developer's Guide ]</a> Alex Sharp, McGraw Hill Text; ISBN:
      0079130364, 1997.</p>
      This book covers all kinds of issues basic level, design, testing... I
      liked it a lot. The code and the book as a single file containing everything are available. Thank again
      Lukas Renggli for his effort for converting everything from Word.
       Thanks a lot Alec and thanks McGraw-Hill <a href="http://books.mcgraw-hill.com/">http://books.mcgraw-hill.com/</a>
  They were really nice with us so think about it if you hesitate to buy
  one of their books. Not all the publishers are that open-minded. 
  </td>
  </tr>
  
<tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/WithStyle/WithStyle.gif" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/WithStyle/SmalltalkWithStyle.pdf">[ Smalltalk With Style ]</a> by Edward Klimas, Suzanne Skublics and David A. Thomas. 
		ISBN: 0-13-165549-3, Publisher: Prentice Hall, Copyright: 1996. A great and 
		small book that everybody should read. Thanks Ed, Suzanne and Dave to give it for free. 
		Thanks Don for the OCR!
	   </p>
    </td>
  </tr>
  
  
<tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/InsideST/InsideSmalltalkV1.png" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/InsideST/InsideSmalltalk.pdf">[ Inside Smalltalk 
       (Volume One) ]</a>  by LaLonde, Wilf R. and Pugh, John R., Prentice-Hall, 1990, ISBN 0-13-468414-1.
       Thanks Don for the OCR! 
	   </p>
    </td>
  </tr>
  
  
  <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/InsideST/InsideSmalltalkV2.png" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/InsideST/InsideSmalltalkII.pdf">[ Inside Smalltalk (Volume Two)],</a>  by LaLonde, Wilf R. and Pugh, John R., Prentice-Hall, 1990, ISBN 0-13-468414-1. Thanks Don for the OCR! </p>
    </td>
  </tr>
  
<tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/LittleSmalltalk/littleST.jpeg" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/LittleSmalltalk/ALittleSmalltalk.pdf">[ A Little Smalltalk ] </a> by Tim Budd, Addison-Wesley 1987.  
      <br>Many thanks to Tim Budd and his  publisher. Please have a look at <a href="http://www.aw.com/catalog/academic/discipline/1,4094,69948,00.html">http://www.aw.com/catalog/academic/discipline/1,4094,69948,00.html</a>. Thanks Don for the OCR!.
		</p>
    </td>
  </tr>
  
<tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/Art/Art.gif" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/Art/artAdded174186187Final.pdf">[ The Art and Science of Smalltalk ]</a>  by Simon Lewis, Prentice-Hall 1995-1999.  
      <br>Many thanks to the original publishers of this book Prentice-Hall, the responsible of the HP series and Simon Lewis.</p>
    </td>
  </tr>
<tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/PracticalSmalltalk/practical.gif" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/PracticalSmalltalk/PracticalSmalltalk.pdf">[ Practical Smalltalk: Using Smalltalk/V ]</a>  by Dan Shafer and Dean A. Ritz, Springer Verlag; (July 1991).  
      <br>Many thanks to the original publishers of this book Springer Verlag,  and Dan. Thanks</p>
    </td>
  </tr>
  
  
<tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/HopkinsHoran/HopkinsHoran.jpg" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/HopkinsHoran/HopkinsHoran.pdf">[ Smalltalk An Introduction to Application Development using VisualWorks ]</a> Trevor Hopkins and Bernard Horan,  Pearson Education, 1995. The answers of the exercises are at ftp://st.cs.uiuc.edu/pub/Smalltalk/books/Book_Answers.tar.gz
      <br>Many thanks to the original publishers of this book,  Pearson Education,  for permission to distribute this work, and of course the authors! </p>
    </td>
  </tr>

<tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/STandOO/st-and-oo.jpg" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/STandOO/Smalltalk-and-OO.pdf"> [ Smalltalk and Object Orientation: an Introduction ] </a> Springer-Verlag, ISBN 3-540-76115-2, 1997.
</p>
      <br>This book provides a good survey of Smalltalk. Some information are now obsolete 
      but it is still worth reading. Enjoy it. Thanks John to support our request. We want to thank Springer Verlag Publishing
    for allowing us to give you this book for free.
    </td>
  </tr>
  
 <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/SmalltalkVTutorial/emptyCover.gif" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/SmalltalkVTutorial/SmalltalkVTutorial.pdf"> [ Smalltalk V Tutorial ]</a>
	   </p>
    </td>
  </tr>

  <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/Taste/taste.gif" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/Taste/"> [ The Taste of Smalltalk ] </a> Ted Kaehler and Dave Patterson, W W Norton Co.; ISBN: 0393955052; (May 1986).</p>
      This book is for collectors. The quotes are really excellent. 
      <br>All the chapters are ready (except chap.2 for now)
    Enjoy it. (Scanned ... by Stef, Alex, Gabriela, and Lukas).
    Thanks Ted.
    </td>
  </tr>

 <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/emptyCover.gif" width="100"></td>
    <td>
     <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/Joy/">[ The Joy Of Smalltalk ]</a> Ivan
    Tomek (September 2000). 700 pages</p>
    Ivan wrote this book and he gave it to the community. It contains a lot of useful material. 
    Thanks again ivan and continue to write good books. 
    </td>
  </tr>
  
  
  
   <!--<tr>
    <td width="45%"><img src="FreeBooks/SmalltalkObjectAndDesign/SmalltalkObjectAndDesign.jpg" width=100></td>
    <td width="55%">
      <p><a href="http://books.iuniverse.com/viewbooks.asp?isbn=1583484906&page=fm1">Smalltalk,objects and design</a>
	  Liu, iUniverse books</p>
      
	  </font>
    </td>
  </tr>-->
  
  <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/BitsOfHistory/BitsOfHistory.gif" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/BitsOfHistory/"> [ Smalltalk-80, Bits of History, Words of Advice] </a> By Glen Krasner, Editor
ISBN 0-201-11669-3. 344 pp. 1983</p>
      This book is for collectors. Thanks Glenn.
    </td>
  </tr>

  <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/BlueBook/blueBook.jpg" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/BlueBook/">[ Smalltalk-80: The Language and its Implementation ]</a>
	By Adele Goldberg and DavidRobson; 		Xerox Palo Alto Research Center
	ISBN 0-201-11371-6. 344 pp. 1983</p>
    </td>
  </tr>
  
  <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/TheInteractiveProgrammingEnv/TheInteractiveProgrammingEnv.gif" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/TheInteractiveProgrammingEnv/TheInteractiveProgrammingEnv.pdf">[ Smalltalk-80, The Interactive Programming Environment ]</a> By Adele Goldberg 
ISBN  0201113724. 560 pp. 1983</p> This book is for collectors. Thanks Adele. Thanks Don for the OCR!
    </td>
  </tr>
  
 <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/CollectiveNBlueBook/small-bluebook-cover.jpg" width="100"></td>
    <td>
    <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/CollectiveNBlueBook/">[ DRAFTS of Squeak, Open Personal Computing and Multimedia ]</a> Mirror of <a href="http://coweb.cc.gatech.edu/squeakbook/">http://coweb.cc.gatech.edu/squeakbook/</a> Edited by Mark Guzdial and Kim Rose. Prentice-Hall 2000.  It's available from Prentice-Hall.  </p>
    <br>
    </td>
  </tr>
  
  
   <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/GuzdialBookDrafts/mark1.jpg" width="100"></td>
    <td>
     <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/GuzdialBookDrafts/">[ DRAFS of Squeak: Open Personal Computing for Multimedia ]</a>
	 taken from <a href="http://www.cc.gatech.edu/~mark.guzdial/drafts/">http://www.cc.gatech.edu/~mark.guzdial/drafts/</a> 
	 Mark Guzdial, Prentice-Hall 2000. It's available from Prentice-Hall. </p>
    </td>
  </tr>
  
  <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/Syntax/BuchLogo.png" width="100"></td>
    <td>
      <p> <a href="http://sdmeta.gforge.inria.fr/FreeBooks/Syntax/Syntax.zip">[ (In German) Syntaxbasierte
      Programmierwerkzeuge ]</a> L. Schmitz, B.G. Teubner Stuttgart 1995.  
        1996.</p>
      <p>This book presents compilation techniques in german.
	 Lothar Schmitz is still developing a free visual compiler-compiler
	 (SIC and JACCIE).  <!-- <a
	 href="http://ist.unibw-muenchen.de/Research/Tools/SIC">http://ist.unibw-muenchen.de/Research/Tools/SIC</a> 
<a href="http://ist.unibw-muenchen.de/Research/Tools/JACCIE">http://ist.unibw-muenchen.de/Research/Tools/JACCIE</a> 
-->

</p>
    </td>
  </tr>

  <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/SmalltalkDE/emptyCover.gif" width="100"></td>
    <td>
      <p> <a href="http://sdmeta.gforge.inria.fr/FreeBooks/SmalltalkDE/smalltalkBuch.pdf">[ (In German) Smalltalk
      Einfuehrung in die objekt-orientierte Programmierung ]</a> Peter P. Bothner, Wolf-Michael Kaehler 1999.  
        1996.</p>
      <p>This book presents object-oriented programming in german with VisualWorks.  
<!-- <a href="http://e-books.zfn.uni-bremen.de/e-book-SMALLTALK.html</a>  
-->

</p>
    </td>
  </tr>
  
  <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/emptyCover.gif" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/Swedish/">[  (In Swedish) Objektorienterad programmering i Smalltalk ]</a>
	  Bjoern Eiderbaeck, Per Haegglund, and Olle Baelter</p>
      <br>Thanks Bjoern Eiderbaeck.
	  
    </td>
  </tr>
  
  <tr>
    <td><img src="http://sdmeta.gforge.inria.fr/FreeBooks/Programando/Programando.gif" width="100"></td>
    <td>
      <p><a href="http://sdmeta.gforge.inria.fr/FreeBooks/Programando/ProgramandoConSmalltalk-BORRADORFINAL07-Febrero-2006.pdf">[ (In Spanish) Programando con Smalltalk ]</a>
	  Diego Gomez Deck</p>
      <br>Thanks Diego. This book is distributed under the Creative Commons license.
	  
    </td>
  </tr>
  
</tbody></div><p>
 I added some other material because they illustrate the philosophy behind Smalltalk.

 </p></div>]]>
            </description>
            <link>http://stephane.ducasse.free.fr/FreeBooks.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24241561</guid>
            <pubDate>Sat, 22 Aug 2020 04:33:44 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Debian Janitor: 60k Lintian Issues Automatically Fixed]]>
            </title>
            <description>
<![CDATA[
Score 145 | Comments 20 (<a href="https://news.ycombinator.com/item?id=24241549">thread link</a>) | @zdw
<br/>
August 21, 2020 | https://www.jelmer.uk/janitor-update-3.html | <a href="https://web.archive.org/web/*/https://www.jelmer.uk/janitor-update-3.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="layout">
    <div>
        <div>
            <section>
                
            </section>
            <p>The <a href="https://jelmer.uk/debian-janitor.html">Debian Janitor</a> is an automated
system that commits fixes for (minor) issues in Debian packages that can be
fixed by software. It gradually started proposing merges in early
December. The first set of changes sent out ran <a href="https://salsa.debian.org/jelmer/lintian-brush">lintian-brush</a> on sid packages maintained in
Git. This post is part of <a href="https://jelmer.uk/tag/janitor-update.html">a series</a> about the progress of the
Janitor.</p>
<div id="scheduling-lintian-fixes">
<h2>Scheduling Lintian Fixes</h2>
<p>To determine which packages to process, the  <a href="https://janitor.debian.net/">Janitor</a>  looks at the import of  <a href="https://lintian.debian.org/">lintian</a>  output across the archive that is available
in  <a href="https://wiki.debian.org/UltimateDebianDatabase/">UDD</a> <a href="#f1" id="id1">[1]</a>. It
will prioritize those packages with the most and more severe issues that it has
fixers for.</p>
<p>Once a package is selected, it will clone the packaging repository and run
<a href="https://manpages.debian.org/testing/lintian-brush/lintian-brush.1.en.html">lintian-brush</a>
on it.  Lintian-brush provides a framework for applying a set of ‚Äúfixers‚Äù to a
package. It will run each of a set of ‚Äúfixers‚Äù in a pristine version of the
repository, and handles most of the heavy lifting.</p>
</div>
<div id="the-inner-workings-of-a-fixer">
<h2>The Inner Workings of a Fixer</h2>
<p>Each fixer is just an executable which gets run in a clean
checkout of the package, and can make changes there. Most
of the fixers are written in Python or shell, but they
can be in any language.</p>
<p>The contract for fixers is pretty simple:</p>
<ul>
<li>If the fixer exits with non-zero, the changes are reverted and fixer is
considered to have failed</li>
<li>If exits with zero and made changes, then it should write a summary of its
changes to standard out</li>
</ul>
<p>If a fixer is uncertain about the changes it has made, it should report so on
standard output using a pseudo-header.  By default, lintian-brush will discard
any changes with uncertainty but if you are running it locally you can still
apply them by specifying <tt><span>--uncertain</span></tt>.</p>
<p>The summary message on standard out will be used for the commit message and
(possibly) the changelog message, if the package doesn‚Äôt use gbp dch.</p>
</div>
<div id="example-fixer">
<h2>Example Fixer</h2>
<p>Let‚Äôs look at an example. The package priority ‚Äúextra‚Äù is deprecated since
Debian Policy 4.0.1 (released August 2 017) ‚Äì see
<a href="https://www.debian.org/doc/debian-policy/ch-archive.html#priorities">Policy 2.5 "Priorities"</a>.
Instead, most packages should use the ‚Äúoptional‚Äù priority.</p>
<p>Lintian will warn when a package uses the deprecated ‚Äúextra‚Äù value for the
‚ÄúPriority‚Äù  - the associated tag is
<a href="https://lintian.debian.org/tags/priority-extra-is-replaced-by-priority-optional.html">priority-extra-is-replaced-by-priority-optional</a>.
Lintian-brush has a fixer script that can automatically replace ‚Äúextra‚Äù with
‚Äúoptional‚Äù.</p>
<p>On systems that have lintian-brush installed, the source for the fixer lives in
<a href="https://salsa.debian.org/jelmer/lintian-brush/-/blob/master/fixers/priority-extra-is-replaced-by-priority-optional.py">/usr/share/lintian-brush/fixers/priority-extra-is-replaced-by-priority-optional.py</a>,
but here is a copy of it for reference:</p>
<table><tbody><tr><td><div><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td><div><pre><span></span><span>#!/usr/bin/python3</span>

<span>from</span> <span>debmutate.control</span> <span>import</span> <span>ControlEditor</span>
<span>from</span> <span>lintian_brush.fixer</span> <span>import</span> <span>report_result</span><span>,</span> <span>fixed_lintian_tag</span>

<span>with</span> <span>ControlEditor</span><span>()</span> <span>as</span> <span>updater</span><span>:</span>
    <span>for</span> <span>para</span> <span>in</span> <span>updater</span><span>.</span><span>paragraphs</span><span>:</span>
        <span>if</span> <span>para</span><span>.</span><span>get</span><span>(</span><span>"Priority"</span><span>)</span> <span>==</span> <span>"extra"</span><span>:</span>
            <span>para</span><span>[</span><span>"Priority"</span><span>]</span> <span>=</span> <span>"optional"</span>
            <span>fixed_lintian_tag</span><span>(</span>
                <span>para</span><span>,</span> <span>'priority-extra-is-replaced-by-priority-optional'</span><span>)</span>

<span>report_result</span><span>(</span><span>"Change priority extra to priority optional."</span><span>)</span>
</pre></div>
</td></tr></tbody></table><p>This fixer is written in Python and uses the  <a href="https://salsa.debian.org/jelmer/debmutate">debmutate</a>  library to easily modify
control files while preserving formatting ‚Äî or back out if it is not possible
to preserve formatting.</p>
<p>All the current fixers come with tests, e.g. for this particular fixer the
tests can be found here:
<a href="https://salsa.debian.org/jelmer/lintian-brush/-/tree/master/tests/priority-extra-is-replaced-by-priority-optional">https://salsa.debian.org/jelmer/lintian-brush/-/tree/master/tests/priority-extra-is-replaced-by-priority-optional</a>.</p>
<p>For more details on writing new fixers, see the  <a href="https://salsa.debian.org/jelmer/lintian-brush#writing-new-fixers">README</a>  for
lintian-brush.</p>
<p>For more details on debugging them, see the  <a href="https://manpages.debian.org/unstable/lintian-brush/lintian-brush.1.en.html">manual page</a>.</p>
</div>


            

            

            
            <p><a href="#">Go Top</a></p>        </div>
    </div>
</div></div>]]>
            </description>
            <link>https://www.jelmer.uk/janitor-update-3.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24241549</guid>
            <pubDate>Sat, 22 Aug 2020 04:30:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How NAT Traversal Works]]>
            </title>
            <description>
<![CDATA[
Score 148 | Comments 28 (<a href="https://news.ycombinator.com/item?id=24241105">thread link</a>) | @signa11
<br/>
August 21, 2020 | https://tailscale.com/blog/how-nat-traversal-works/ | <a href="https://web.archive.org/web/*/https://tailscale.com/blog/how-nat-traversal-works/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      
<p>We covered a lot of ground in our post about <a href="https://tailscale.com/blog/how-tailscale-works/"><em>How Tailscale
Works</em></a>.  However, we glossed over how we can get through NATs
(Network Address Translators) and connect your devices directly to
each other, no matter what‚Äôs standing between them. Let‚Äôs talk about
that now!</p>
<figure>
    
        <img src="https://tailscale.com/blog/how-nat-traversal-works/nat-intro.png">
    
    
</figure>

<p>Let‚Äôs start with a simple problem: establishing a peer-to-peer
connection between two machines. In Tailscale‚Äôs case, we want to set
up a WireGuard¬Æ tunnel, but that doesn‚Äôt really matter. The
techniques we use are widely applicable and the work of many people
over decades. For example, <a href="https://webrtc.org/">WebRTC</a> uses this bag of tricks to
send peer-to-peer audio, video and data between web browsers. VoIP
phones and some video games use similar techniques, though not always
successfully.</p>
<p>We‚Äôll be discussing these techniques generically, using Tailscale and
others for examples where appropriate. Let‚Äôs say you‚Äôre making your
own protocol and that you want NAT traversal. You need two things.</p>
<p>First, the protocol should be based on UDP. You <em>can</em> do NAT traversal
with TCP, but it adds another layer of complexity to an already quite
complex problem, and may even require kernel customizations depending
on how deep you want to go. We‚Äôre going to focus on UDP for the rest
of this article.</p>
<p>If you‚Äôre reaching for TCP because you want a stream-oriented
connection when the NAT traversal is done, consider using QUIC
instead. It builds on top of UDP, so we can focus on UDP for NAT
traversal and still have a nice stream protocol at the end.</p>
<p>Second, you need direct control over the network socket that‚Äôs sending
and receiving network packets. As a rule, you can‚Äôt take an existing
network library and make it traverse NATs, because you have to send
and receive extra packets that aren‚Äôt part of the ‚Äúmain‚Äù protocol
you‚Äôre trying to speak. Some protocols tightly integrate the NAT
traversal with the rest (e.g. WebRTC). But if you‚Äôre building your
own, it‚Äôs helpful to think of NAT traversal as a separate entity that
shares a socket with your main protocol. Both run in parallel, one
enabling the other.</p>
<figure>
    
        <img src="https://tailscale.com/blog/how-nat-traversal-works/nat-deep-integration.png">
    
    
</figure>

<p>Direct socket access may be tough depending on your situation. One
workaround is to run a local proxy. Your protocol speaks to this
proxy, and the proxy does both NAT traversal and relaying of your
packets to the peer. This layer of indirection lets you benefit from
NAT traversal without altering your original program.</p>
<p>With prerequisites out of the way, let‚Äôs go through NAT traversal from
first principles. Our goal is to get UDP packets flowing
bidirectionally between two devices, so that our other protocol
(WireGuard, QUIC, WebRTC, ‚Ä¶) can do something cool. There are two
obstacles to having this Just Work: stateful firewalls and NAT
devices.</p>
<h3 id="figuring-out-firewalls">Figuring out firewalls</h3>
<p>Stateful firewalls are the simpler of our two problems. In fact, most
NAT devices include a stateful firewall, so we need to solve this
subset before we can tackle NATs.</p>
<p>There are many incarnations to consider. Some you might recognize are
the Windows Defender firewall, Ubuntu‚Äôs ufw (using iptables/nftables),
BSD‚Äôs pf (also used by macOS) and AWS‚Äôs Security Groups. They‚Äôre all
very configurable, but the most common configuration allows all
‚Äúoutbound‚Äù connections and blocks all ‚Äúinbound‚Äù connections. There
might be a few handpicked exceptions, such as allowing inbound SSH.</p>
<p>But connections and ‚Äúdirection‚Äù are a figment of the protocol
designer‚Äôs imagination. On the wire, every connection ends up being
bidirectional; it‚Äôs all individual packets flying back and forth. How
does the firewall know what‚Äôs inbound and what‚Äôs outbound?</p>
<p>That‚Äôs where the stateful part comes in. Stateful firewalls remember
what packets they‚Äôve seen in the past and can use that knowledge when
deciding what to do with new packets that show up.</p>
<figure>
    
        <img src="https://tailscale.com/blog/how-nat-traversal-works/nat-firewalls-1a.png">
    
    
</figure>

<p>For UDP, the rule is very simple: the firewall allows an inbound UDP
packet if it previously saw a matching outbound packet. For example,
if our laptop firewall sees a UDP packet leaving the laptop from
<code>2.2.2.2:1234</code> to <code>7.7.7.7:5678</code>, it‚Äôll make a note that incoming
packets from <code>7.7.7.7:5678</code> to <code>2.2.2.2:1234</code> are also fine. The
trusted side of the world clearly intended to communicate with
<code>7.7.7.7:5678</code>, so we should let them talk back.</p>
<p>(As an aside, some <em>very</em> relaxed firewalls might allow traffic from
anywhere back to <code>2.2.2.2:1234</code> once <code>2.2.2.2:1234</code> has communicated
with anyone. Such firewalls make our traversal job easier, but are
increasingly rare.)</p>
<h4 id="firewall-face-off">Firewall face-off</h4>
<p>This rule for UDP traffic is only a minor problem for us, as long as
all the firewalls on the path are ‚Äúfacing‚Äù the same way. That‚Äôs
usually the case when you‚Äôre communicating with a server on the
internet. Our only constraint is that the machine that‚Äôs <em>behind</em> the
firewall(s) must be the one initiating all connections. Nothing can
talk to it, unless it talks first.</p>
<figure>
    
        <img src="https://tailscale.com/blog/how-nat-traversal-works/nat-firewalls-2.png">
    
    
</figure>

<p>This is fine, but not very interesting: we‚Äôve reinvented client/server
communication, where the server makes itself easily reachable to
clients. In the VPN world, this leads to a hub-and-spoke topology: the
hub has no firewalls blocking access to it and the firewalled spokes
connect to the hub.</p>
<figure>
    
        <img src="https://tailscale.com/blog/how-nat-traversal-works/nat-firewalls-3.png">
    
    
</figure>

<p>The problems start when two of our ‚Äúclients‚Äù want to talk
directly. Now the firewalls are facing each other. According to the
rule we established above, this means both sides must go first, but
also that neither can go first, because the other side has to go
first!</p>
<figure>
    
        <img src="https://tailscale.com/blog/how-nat-traversal-works/nat-firewalls-4.png">
    
    
</figure>

<p>How do we get around this? One way would be to require users to
reconfigure one or both of the firewalls to ‚Äúopen a port‚Äù and allow
the other machine‚Äôs traffic. This is not very user friendly. It also
doesn‚Äôt scale to mesh networks like Tailscale, in which we expect the
peers to be moving around the internet with some regularity. And, of
course, in many cases you don‚Äôt have control over the firewalls: you
can‚Äôt reconfigure the router in your favorite coffee shop, or at the
airport. (At least, hopefully not!)</p>
<p>We need another option. One that doesn‚Äôt involve reconfiguring
firewalls.</p>
<h4 id="finessing-finicky-firewalls">Finessing finicky firewalls</h4>
<p>The trick is to carefully read the rule we established for our
stateful firewalls. For UDP, the rule is: <strong>packets must flow out
before packets can flow back in.</strong></p>
<p>However, nothing says the packets must be <em>related</em> to each other
beyond the IPs and ports lining up correctly. As long as <em>some</em> packet
flowed outwards with the right source and destination, any packet that
<em>looks like</em> a response will be allowed back in, even if the other
side never received your packet!</p>
<p>So, to traverse these multiple stateful firewalls, we need to share
some information to get underway: the peers have to know in advance
the <code>ip:port</code> their counterpart is using. One approach is to
statically configure each peer by hand, but this approach doesn‚Äôt
scale very far. To move beyond that, we built a <a href="https://tailscale.com/blog/how-tailscale-works/#the-control-plane-key-exchange-and-coordination">coordination
server</a> to keep the <code>ip:port</code> information synchronized in a
flexible, secure manner.</p>
<p>Then, the peers start sending UDP packets to each other. They must
expect some of these packets to get lost, so they can‚Äôt carry any
precious information unless you‚Äôre prepared to retransmit them. This
is generally true of UDP, but especially true here. We‚Äôre <em>going</em> to
lose some packets in this process.</p>
<p>Our laptop and workstation are now listening on fixed ports, so that
they both know exactly what <code>ip:port</code> to talk to. Let‚Äôs take a look at
what happens.</p>
<figure>
    
        <img src="https://tailscale.com/blog/how-nat-traversal-works/nat-firewalls-5a.png">
    
    
</figure>

<p>The laptop‚Äôs first packet, from <code>2.2.2.2:1234</code> to <code>7.7.7.7:5678</code>, goes
through the Windows Defender firewall and out to the internet. The
corporate firewall on the other end blocks the packet, since it has no
record of <code>7.7.7.7:5678</code> ever talking to <code>2.2.2.2:1234</code>. However,
Windows Defender now remembers that it should expect and allow
responses from <code>7.7.7.7:5678</code> to <code>2.2.2.2:1234</code>.</p>
<figure>
    
        <img src="https://tailscale.com/blog/how-nat-traversal-works/nat-firewalls-5b.png">
    
    
</figure>

<p>Next, the workstation‚Äôs first packet from <code>7.7.7.7:5678</code> to
<code>2.2.2.2:1234</code> goes through the corporate firewall and across the
internet. When it arrives at the laptop, Windows Defender thinks ‚Äúah,
a response to that outbound request I saw‚Äù, and lets the packet
through! Additionally, the corporate firewall now remembers that it
should expect responses from <code>2.2.2.2:1234</code> to <code>7.7.7.7:5678</code>, and
that those packets are also okay.</p>
<p>Encouraged by the receipt of a packet from the workstation, the laptop
sends another packet back. It goes through the Windows Defender
firewall, through the corporate firewall (because it‚Äôs a ‚Äúresponse‚Äù to
a previously sent packet), and arrives at the workstation.</p>
<figure>
    
        <img src="https://tailscale.com/blog/how-nat-traversal-works/nat-firewalls-5c.png">
    
    
</figure>

<p>Success! We‚Äôve established two-way communication through a pair of
firewalls that, at first glance, would have prevented it.</p>
<h4 id="creative-connectivity-caveats">Creative connectivity caveats</h4>
<p>It‚Äôs not always so easy. We‚Äôre relying on some indirect influence over
third-party systems, which requires careful handling. What do we need
to keep in mind when managing firewall-traversing connections?</p>
<p>Both endpoints must attempt communication at roughly the same time, so
that all the intermediate firewalls open up while both peers are still
around. One approach is to have the peers retry continuously, but this
is wasteful. Wouldn‚Äôt it be better if both peers knew to start
establishing a connection at the same time?</p>
<p>This may sound a little recursive: to communicate, first you need to
be able to communicate. However, this preexisting ‚Äúside channel‚Äù
doesn‚Äôt need to be very fancy: it can have a few seconds of latency,
and only needs to deliver a few thousand bytes in total, so a tiny VM
can easily be a matchmaker for thousands of machines.</p>
<p>In the distant past, I used XMPP chat messages as the side channel,
with great results. As another example, WebRTC requires you to come up
with your own ‚Äúsignalling channel‚Äù (a name that reveals WebRTC‚Äôs IP
telephony ancestry), and plug it into the WebRTC APIs. In Tailscale,
our coordination server and fleet of DERP (Detour Encrypted Routing
Protocol) servers act as ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://tailscale.com/blog/how-nat-traversal-works/">https://tailscale.com/blog/how-nat-traversal-works/</a></em></p>]]>
            </description>
            <link>https://tailscale.com/blog/how-nat-traversal-works/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24241105</guid>
            <pubDate>Sat, 22 Aug 2020 02:36:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Bread, How Did They Make It? Part IV: Markets, Merchants and the Tax Man]]>
            </title>
            <description>
<![CDATA[
Score 110 | Comments 12 (<a href="https://news.ycombinator.com/item?id=24240677">thread link</a>) | @Kednicma
<br/>
August 21, 2020 | https://acoup.blog/2020/08/21/collections-bread-how-did-they-make-it-part-iv-markets-and-non-farmers/ | <a href="https://web.archive.org/web/*/https://acoup.blog/2020/08/21/collections-bread-how-did-they-make-it-part-iv-markets-and-non-farmers/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		
<p>As the fourth and final part (<a href="https://acoup.blog/2020/07/24/collections-bread-how-did-they-make-it-part-i-farmers/">I</a>, <a href="https://acoup.blog/2020/07/31/collections-bread-how-did-they-make-it-part-ii-big-farms/">II</a>, <a href="https://acoup.blog/2020/08/06/collections-bread-how-did-they-make-it-part-iii-actually-farming/">III</a>) of our look at the basic structure of food production in the pre-modern world (particularly farming grain to make bread), this week we‚Äôre going to look at how at least some of the delicious food we made in the last post might make its way into the hands of people who are <em>not</em> <a href="https://acoup.blog/2020/07/24/collections-bread-how-did-they-make-it-part-i-farmers/">farmers </a>or even<a href="https://acoup.blog/2020/07/31/collections-bread-how-did-they-make-it-part-ii-big-farms/"> farm owners</a>.</p>



<p>In the previous three posts, I have mostly just used the magic word ‚Äòmarkets‚Äô to describe how the food produced in the countryside gets to the cities and people who are not farmers.  As we‚Äôll see in this post, that is a bit of an oversimplifying fib, both in that the phrase ‚Äòmarkets‚Äô covers a <em>lot </em>of complexity, but also (as we‚Äôll see) some of the major drivers of moving that food from the countryside into towns doesn‚Äôt involve money <em>or</em> market interactions.  That said, we‚Äôre going to <em>start</em> with market transactions, because while they are actually the minority-type in many of these societies, they are more readily familiar and understandable, I suspect, to modern readers.  Then we‚Äôll move to <em>extraction</em> as the other category.</p>



<p>Speaking of extraction, as always, if you like what you are reading here, you can support me on <a href="https://www.patreon.com/user?u=20122096">Patreo</a>n. And if you want updates whenever a new post appears, you can click the button below for email updates or follow me on twitter (@BretDevereaux) for updates as to new posts, as well as my occasional ancient history, foreign policy or pop-culture thoughts.</p>






<h2>Point of Sale</h2>



<p>I want to start by leaning on (with small modifications for clarity) Paul Erdkamp‚Äôs taxonomy of the various options by which food might get into the stream of commerce.  A small farmer might sell their grain (I) directly to city-dwellers, (II) indirectly, via urban middlemen and grain merchants, either in the market or (III) ‚Äòat the gate‚Äô (meaning selling to merchants who come out to the farm in order to buy; the difference being who transports the food to the city), (IV) to itinerant traders at periodic rural markets or (V) to other local small farmers.  As we‚Äôll see, <em>large </em>landholders have a <em>somewhat</em> larger range of options within this taxonomy, but the fundamentals are the same.</p>



<p>While all of these sale methods certainly happened, in every society I have looked at, Option I ‚Äì selling directly to city-dwellers ‚Äì is fairly rare for grains and other bulk agricultural goods.  Market <em>gardeners</em>, selling fruits, vegetables (and sometimes flowers) often do sell this way, maintaining a high-intensity garden near town and a shop or stall in the town market.  Likewise, while Option V ‚Äì small-scale trade between farmers ‚Äì absolutely happens, it is typically non-monetary: the banqueting of neighbors discussed in the first post.  Where it is monetary, it is typically quite small scale and very short distance.  By and large, small and mid-sized farmers hadn‚Äôt the time, expertise or infrastructure to sell their goods directly.  They needed to be farming, not manning a market stall or trying to figure out how to store their goods close to the point of sale.  And of course large landowners, being rich, aren‚Äôt going to stand in the market square either (and in many cases don‚Äôt want their obvious representative doing so either,  see below).  So while I and V happen, they‚Äôre not too common or too large a portion of total trade and we may lay them aside for this discussion.</p>



<p>That leaves Options II, III and IV, all of which involve selling grain to a middle-man merchant of some sort.  The main difference is the location of sale (in town, at the gate, or at periodic rural markets).  Outside of large cities and major ports, markets were likely to be <em>periodic</em>, occurring only on certain days (typically around once per week).  In Roman Italy, these were the <em>nundinae</em> (‚Äòninth days,‚Äô although it was an 8-day cycle as the Romans count inclusively); the <em>nundinae</em> were minor festivals, days of rest and merrymaking, but they were also the days when the rural markets would be open ‚Äì the rest-day from agricultural labor enabled farmers to head into local towns to buy or sell whatever they needed (interestingly, at Rome, the <em>nundinae</em> were <em>dies nefasti</em> ‚Äì state business couldn‚Äôt generally be conducted on them ‚Äì so poor farmers hoping to use their day off to participate politically were out of luck).  Similar periodic markets are common in the Middle Ages (and even today; most ‚Äòfarmer‚Äôs markets‚Äô in the United States are periodic, <a href="http://www.carrborofarmersmarket.com/">including my town‚Äôs</a>).  The periodic nature of these markets is an adaptation to agricultural rhythms; for a market to function there need to be a lot of people together all at once and the small towns that dotted the countryside simply didn‚Äôt have the density to do that all of the time.</p>



<figure><img data-attachment-id="4249" data-permalink="https://acoup.blog/fresco_from_the_house_of_julia_felix_pompeii_depicting_scenes_from_the_forum_market/" data-orig-file="https://acoupdotblog.files.wordpress.com/2020/08/fresco_from_the_house_of_julia_felix_pompeii_depicting_scenes_from_the_forum_market.jpg" data-orig-size="2325,663" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="fresco_from_the_house_of_julia_felix_pompeii_depicting_scenes_from_the_forum_market" data-image-description="" data-medium-file="https://acoupdotblog.files.wordpress.com/2020/08/fresco_from_the_house_of_julia_felix_pompeii_depicting_scenes_from_the_forum_market.jpg?w=300" data-large-file="https://acoupdotblog.files.wordpress.com/2020/08/fresco_from_the_house_of_julia_felix_pompeii_depicting_scenes_from_the_forum_market.jpg?w=1024" src="https://acoupdotblog.files.wordpress.com/2020/08/fresco_from_the_house_of_julia_felix_pompeii_depicting_scenes_from_the_forum_market.jpg?w=1024" alt="" srcset="https://acoupdotblog.files.wordpress.com/2020/08/fresco_from_the_house_of_julia_felix_pompeii_depicting_scenes_from_the_forum_market.jpg?w=1024 1024w, https://acoupdotblog.files.wordpress.com/2020/08/fresco_from_the_house_of_julia_felix_pompeii_depicting_scenes_from_the_forum_market.jpg?w=2048 2048w, https://acoupdotblog.files.wordpress.com/2020/08/fresco_from_the_house_of_julia_felix_pompeii_depicting_scenes_from_the_forum_market.jpg?w=150 150w, https://acoupdotblog.files.wordpress.com/2020/08/fresco_from_the_house_of_julia_felix_pompeii_depicting_scenes_from_the_forum_market.jpg?w=300 300w, https://acoupdotblog.files.wordpress.com/2020/08/fresco_from_the_house_of_julia_felix_pompeii_depicting_scenes_from_the_forum_market.jpg?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"><figcaption><a href="https://en.wikipedia.org/wiki/Merchant#/media/File:Fresco_from_the_House_of_Julia_Felix,_Pompeii_depicting_scenes_from_the_Forum_market.JPG">Via Wikipedia</a>, a fresco showing market activity, with merchants showing off wares of fabric (left) and goods in pots (center) from the House of Julia Felix at Pompeii, first century CE.  Please note: the importance of pottery in modern archaeology has given many students and the general public the idea that the ancients were always shipping pots around for sale, as if there was a vast market in pottery.  <strong>Generally, people were buying what was in the pot, not the pot itself</strong>.</figcaption></figure>



<p>But as noted, our farmers are unlikely to be selling their grain directly to customers.  Instead, they are likely to be using some sort of middle-man merchant, which brings us to:</p>



<h2>Merchants!</h2>



<p>Merchants are a bit of a break from the people we have so far discussed in that they, by definition, live in the realm of the <em>market</em> (in the economic sense, although often also in a physical sense).  As we‚Äôve seen so much of the world of our farmers and even our millers and bakers was governed by <em>non-market</em> interactions: horizontal and vertical social ties that carried expectations that weren‚Äôt quite transactional and certainly not monetized.  By contrast, merchants work with transactions and tend to be the <em>first</em> group in any society to attempt to monetize their operations once money becomes available.  I find students are often quick to feel identity with the merchant class, because these folks are more likely to travel, more likely to use money, more likely to employ or be employed in wage-labor; they feel more like modern people.</p>



<p>It thus tends to come as something of a surprise that with <em>stunning</em> consistency, <strong>the merchant class tended to be at best cordially disliked and at worst <em>despised</em> by the broader community</strong> (although not typically to the point of suffering legal disability, as did some other jobs; see S. Bond, <em>Trade and Taboo: Disreputable Professions in the Roman Mediterranean</em> (2016) for this in Rome).  This often strikes students as strange, both because we tend to think rather better of our own modern merchants but also because the image they have of the merchant class certainly looks elite.</p>



<figure><img data-attachment-id="4257" data-permalink="https://acoup.blog/britlibaddms35166apocalypseunkfolio3sealblackhorse/" data-orig-file="https://acoupdotblog.files.wordpress.com/2020/08/britlibaddms35166apocalypseunkfolio3sealblackhorse.jpg" data-orig-size="1134,766" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="britlibaddms35166apocalypseunkfolio3sealblackhorse" data-image-description="" data-medium-file="https://acoupdotblog.files.wordpress.com/2020/08/britlibaddms35166apocalypseunkfolio3sealblackhorse.jpg?w=300" data-large-file="https://acoupdotblog.files.wordpress.com/2020/08/britlibaddms35166apocalypseunkfolio3sealblackhorse.jpg?w=1024" src="https://acoupdotblog.files.wordpress.com/2020/08/britlibaddms35166apocalypseunkfolio3sealblackhorse.jpg?w=1024" alt="" srcset="https://acoupdotblog.files.wordpress.com/2020/08/britlibaddms35166apocalypseunkfolio3sealblackhorse.jpg?w=1024 1024w, https://acoupdotblog.files.wordpress.com/2020/08/britlibaddms35166apocalypseunkfolio3sealblackhorse.jpg?w=150 150w, https://acoupdotblog.files.wordpress.com/2020/08/britlibaddms35166apocalypseunkfolio3sealblackhorse.jpg?w=300 300w, https://acoupdotblog.files.wordpress.com/2020/08/britlibaddms35166apocalypseunkfolio3sealblackhorse.jpg?w=768 768w, https://acoupdotblog.files.wordpress.com/2020/08/britlibaddms35166apocalypseunkfolio3sealblackhorse.jpg 1134w" sizes="(max-width: 1024px) 100vw, 1024px"><figcaption><a href="https://en.wikipedia.org/wiki/Merchant#/media/File:BritLibAddMS35166ApocalypseUnkFolio3SealBlackHorse.jpg">Via Wikipedia</a>, a manuscript illustration showing the Horseman of Famine depicted as a grain merchant (from Revalations 6:5-6), holding the scales he would use to measure out grain.</figcaption></figure>



<p>For the farmers who need to sell their crops (for reasons we will get to in a moment) and purchase the things they need that they cannot produce, the merchant feels like an adversary: always pushing his prices to his best advantage.  We expect this, but remember that our pre-modern farmers are just <em>not that exposed to market interactions</em>; most of their relationships are reciprocal, not transactional ‚Äì the horizontal relationships we discussed before.  The merchant‚Äôs ‚Äòmoney-grubbing‚Äô feels like a betrayal of trust in a society where you banquet your neighbors in the good years so they‚Äôll help you in the bad years.  <strong>The necessary function of a merchant is to transgress the ‚Äòrules‚Äô of village interactions which ‚Äì and this <em>resounds</em> from the sources ‚Äì the farmers tend to understand as being ‚Äòcheated.‚Äô</strong></p>



<p>At the same time, <strong>while most merchant types are humble, the high-risk and potentially high-reward involved in trade meant that <em>some</em> merchants </strong>(again, a small number) <strong>could become <em>very</em> rich</strong>.  That, as you might imagine, <strong>did not go over well for the traditionally wealthy in these societies</strong>, the large landholders.  Again, the values here often strike modern readers as topsy-turvy compared to our own, but to the elite large landholders (who dominate the literary and political culture of their societies), the <em>morally correct</em> way to earn great wealth is to inherit it (or capture it in war).  The <em>morally correct</em> way to hold that wealth is with large landed estates.  Anything else is <em>morally</em> suspect, and so the idea that a successful merchant could ‚Äì by a process that again, strikes the large landholder, just like the small farmer, as ‚Äòcheating‚Äô ‚Äì leap-frog the social pyramid and skip to the top, without putting in the work at either having distinguished wealthy ancestors <em>or</em> tremendous military success was an open insult to elite values.  Often laws were put in place to limit the ability of wealthy non-aristocrats (likely merchants or successful artisans) from displaying their wealth (<a href="https://en.wikipedia.org/wiki/Sumptuary_law">sumptuary laws</a>) so as to keep them from competing with the aristocrats; at Rome, senators were forbidden from owning ships with much the same logic (Roman senators being clever, they still invested in trade through proxies while at the same time disapproving of the activity in public politics).</p>



<p>Such disdain appears, with varying justification, in the sources of every pre-modern agrarian society I‚Äôve studied, to one degree or another.  One commonplace of Greek and Roman thinking ‚Äì despite these being very active, maritime societies ‚Äì was that the first production of ships and the first sailing was in some essential way a profanation of the divine realm of the sea, a space humans ought not have ever ventured into ‚Äì and certainly not for anything as mean as profit (e.g. Euripides, <em>Medea</em> 1-6; Catullus. 64.1-20; Valerius Flaccus, <em>Argonautica</em> 627-632; Seneca, <em>Medea</em> 1-12; 301-379, <em>inter alia</em> ‚Äì thanks to my old grad school pals <a href="https://www.usf.edu/arts-sciences/departments/world-languages/about-us/hedrick.aspx">Buddy Hedrick</a> and <a href="http://gdrsd.org/gdrhs/faculty/michael-hoffman/">Michael Hoffman </a>for ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://acoup.blog/2020/08/21/collections-bread-how-did-they-make-it-part-iv-markets-and-non-farmers/">https://acoup.blog/2020/08/21/collections-bread-how-did-they-make-it-part-iv-markets-and-non-farmers/</a></em></p>]]>
            </description>
            <link>https://acoup.blog/2020/08/21/collections-bread-how-did-they-make-it-part-iv-markets-and-non-farmers/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24240677</guid>
            <pubDate>Sat, 22 Aug 2020 01:04:49 GMT</pubDate>
        </item>
    </channel>
</rss>
