<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 10]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 10. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Wed, 30 Dec 2020 08:46:27 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-10.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Wed, 30 Dec 2020 08:46:27 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[HN Readers]]>
            </title>
            <description>
<![CDATA[
Score 105 | Comments 74 (<a href="https://news.ycombinator.com/item?id=25556990">thread link</a>) | @lgats
<br/>
December 27, 2020 | https://blog.luke.lol/tech/15-hacker-news-alternatives/ | <a href="https://web.archive.org/web/*/https://blog.luke.lol/tech/15-hacker-news-alternatives/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="text">
<h2>News.YCombinator.com Readers</h2>
<p>Ranked by Alexa popularity.</p>
<p><a href="https://hn.algolia.com/">hn.algolia.com</a><br>
HackerNews with a search function and 16.8+ million posts indexed.<br>
Alexa: 8.7k</p>
<p><a href="http://popurls.com/">popurls.com</a><br>
Several news sites combined into a single newspaper-like feed<br>
Alexa: 87k</p>
<p><a href="https://upstract.com/">upstract.com</a><br>
News aggregator with paid features, includes HN<br>
Alexa: 137k</p>
<p><a href="https://hckrnews.com/">hckrnews.com</a><br>
HN posts organized by rolling, quarter-daily timeslots.<br>
Alexa: 178k</p>
<p><a href="https://pxlet.com/">pxlet.com</a><br>
Culmination of HN, Reddit, SlashDot, and other Tech-News Sites<br>
Alexa: 330k</p>
<p><a href="https://hackernewsletter.com/">hackernewsletter.com</a><br>
HN delivered via email<br>
Alexa: 581k</p>
<p><a href="https://old.thenews.im/">thenews.im&nbsp;</a><br>
Designer News, Product Hunt and Hacker News Mashup with easy-access to individual feeds<br>
Alexa: 960k</p>
<p><a href="http://www.daemonology.net/hn-daily/">daemonology.net</a><br>
Daily list of the top HN posts.<br>
Alexa: 971k</p>
<p><a href="http://n-gate.com/%3En-gate.com%3C/a%3E%3Cbr%20/%3EA%20weekly%20[human?]%20annotated%20digest%20of%20the%20top%20%E2%80%9CHacker%E2%80%9D%20%E2%80%9CNews%E2%80%9D%20posts%3Cbr%20/%3EAlexa:%202.5m%3C/p%3E%3Cp%3E%3Ca%20href=" https:="" hn.premii.com"="">hn.premii.com</a><br>
HN Mirror integrated with an on-page reader<br>
Alexa: 3m</p>
<p><a href="http://hnrankings.info/">hnrankings.info</a><br>
HN Ranking Charts<br>
Alexa: 4m</p>
<p><a href="https://hnews.xyz/">hnews.xyz</a><br>
HN Mirror with Webpage Screenshots [similar to tiledhn.com (<a href="https://web.archive.org/web/20200120125632/http://www.tiledhn.com/">RIP</a>)]<br>
Alexa: 5m</p>
<p><a href="https://hnsince.com/">hnsince.com</a><br>
Top HN posts since you last visited<br>
Alexa: 5.4m</p>
<p><a href="https://hackerweb.app/">hackerweb.app</a><br>
More mobile-friendly HN<br>
Alexa: 6.3m</p>
<p><a href="https://fullhn.com/">fullhn.com</a><br>
Front page of HN in a single page loaded with all articles. Great for loading up before you jump on a flight without wireless access.<br>
Alexa: 7m</p>
<p><a href="https://hackurls.com/">hackurls.com</a><br>
HN, proggit, reddit, toptal, hackaday, slashdot, techmeme, wired as separate feeds on a single page<br>
Alexa: 8.5m</p>
<p><a href="https://hackernewsmobile.com/">hackernewsmobile.com</a><br>
More mobile-friendly HN<br>
Alexa: 9.5m</p>
<p><a href="https://lopespm.github.io/hackernews-daily/">lopespm HN Daily</a><br>
HackerNews Daily – Culmination of top posts for the day<br>
Alexa: Unavailable</p>
<p><a href="https://www.wolfgangfaust.com/project/paper-hn/">wolfgangfaust HN Newspaper</a><br>
Newspaper themed HN<br>
Alexa: Unavailable</p>
<p><a href="https://thn.rakhim.org/">thn.rakhim.org</a><br>
30 random good HN posts from the past<br>
Alexa: Unavailable</p>
<p><a href="https://zvoid.org/hn">zvoid.org/hn</a><br>
Dark-themed HN reader<br>
Alexa: Unavailable</p>
<p><a href="https://hn.svelte.dev/">hn.svelte.dev</a><br>
mobile and dark mode friendly reader for HN<br>
Alexa: None</p>
<p><a href="https://hackernews.betacat.io/">hackernews.betacat.io</a><br>
Modern HN theme with website preview screenshots<br>
Alexa: None</p>
<p><a href="https://read.hn/">read.hn</a><br>
Another HN Reader view<br>
Alexa: None</p>
<p><a href="https://hnapp.com/">hnapp.com</a><br>
HN Advanced Search and monitoring tool<br>
Alexa: None</p>
<p><a href="http://hnpaper.forge.partlab.io/">hnpaper.forge.partlab.io</a><br>
HNPaper – bootstrap theme simple HN interface<br>
Alexa: Unavailable</p>
<p><a href="https://hack.ernews.info/">hack.ernews.info</a><br>
More mobile-friendly HN<br>
Alexa: None</p>
<p><a href="https://progscrape.com/">progscrape.com</a><br>
HN, Reddit, and Lobste.rs aggregated and merged into a single feed<br>
Alexa: None</p>
<p><a href="http://hn.elijames.org/">hn.elijames.org</a><br>
“Less annoying hacker news” with an even simpler interface<br>
Alexa: None</p>
<p><a href="http://serializer.io/">seralizer.io</a><br>
HN + Related Subreddits + Lobsters + Mac Rumors + Arstechnica<br>
Alexa: None</p>
<p><a href="https://nerdmash.com/">nerdmash.com</a><br>
A nerd’s daily read. Top posts from every nerdy content aggregator.<br>
Alexa: None</p>
<h2>Other Tweaks / Interfaces</h2>
<p><a href="https://old.reddit.com/r/hackernews/">/r/hackernews</a><br>
Subreddit for HN<br>
51,450 readers</p>
<p><a href="https://hnreplies.com/">hnreplies.com</a><br>
Emails on replies to your comments<br>
Alexa: 3.2m</p>
<p><a href="https://apps.apple.com/us/app/id1308885491">Octal iOS App</a><br>
Full-featured HN client with support for posting/voting/comments – iOS only.<br>
4.8/5.0 – 1K Ratings</p>
<p><a href="https://hnrss.github.io/">hnrss.github.io</a><br>
HN RSS Feed<br>
Alexa: None</p>
<p><a href="https://hackerne.ws/">hackerne.ws</a><br>
HN Short Link – redirects to https://news.ycombinator.com<br>
Alexa: None</p>
<p><a href="https://chrome.google.com/webstore/detail/hacker-news-ux/chngbdmhgakoomomnnhfapkpbalpmhid">Hacker News UX</a><br>
Chrome Extension for Improved UI<br>
356 users</p>
<p><a href="https://f5bot.com/">f5bot.com</a><br>
Reddit / HN / Lobsters keyword mention watch tool.<br>
Alexa: 1.1m</p>

<h2>Graveyard</h2>
<p>hackermonthly.com [<a href="https://web.archive.org/web/20160731192600/http://hackermonthly.com/">defunct</a>]<br>
HN in print</p>
<p>quiethn.com [<a href="https://web.archive.org/web/20171001013212/https://quiethn.com/">defunct</a>]<br>
HN with less clutter </p>
<p>hackerblogs.com [<a href="https://web.archive.org/web/20110204021331/http://www.hackerblogs.com/">defunct</a>]<br>
2011-era mobile view</p>
<p>hackernews.im [defunct]<br>
now <a href="https://hackernews.betacat.io/">hackernews.betacat.io</a></p>
<p>tiledhn.com [<a href="https://web.archive.org/web/20200120125632/http://www.tiledhn.com/">defunct</a>]<br>
Windows 8-type view for HN</p>
<p>hackerbra.in [<a href="https://web.archive.org/web/20181105131330/http://hackerbra.in/">defunct</a>]<br>
HN with inline top comments </p>
<p>hnwatcher.com [<a href="https://web.archive.org/web/20201125052525/https://www.hnwatcher.com/">defunct</a>]<br>
user/keyword email notification service</p>
<p>hnmobile.herokuapp.com [<a href="https://web.archive.org/web/20180601000346/http://hnmobile.herokuapp.com/">defunct</a>]<br>
HN mobile friendly mirror</p>
<p>hackernewsemail.com [<a href="https://web.archive.org/web/20180826215821/https://hackernewsemail.com/">defunct</a>]<br>
Daily email for posts with minimum set number of points</p>
<p>hacker-newspaper.gilesb.com [<a href="https://web.archive.org/web/20180402131152/https://news.ycombinator.com/">defunct</a>]<br>
HN Mirror</p>
<p>react-hn.appspot.com [<a href="https://web.archive.org/web/20181115204207/https://react-hn.appspot.com/">defunct</a>]<br>
HN Mirror</p>
<p>hackeroo.co [<a href="https://web.archive.org/web/20181115204207/https://react-hn.appspot.com/">defunct</a>]<br>
HN Mirror </p>
</div></div>]]>
            </description>
            <link>https://blog.luke.lol/tech/15-hacker-news-alternatives/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25556990</guid>
            <pubDate>Mon, 28 Dec 2020 05:37:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Cosmopolitan Libc: build-once run-anywhere C library]]>
            </title>
            <description>
<![CDATA[
Score 288 | Comments 74 (<a href="https://news.ycombinator.com/item?id=25556286">thread link</a>) | @pantalaimon
<br/>
December 27, 2020 | https://justine.lol/cosmopolitan/index.html | <a href="https://web.archive.org/web/*/https://justine.lol/cosmopolitan/index.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><header>
  <img width="196" height="105" src="https://storage.googleapis.com/justine/cosmopolitan/cosmopolitan.png" title="cosmopolitan honeybadger" alt="honeybadger">
  
  <span>build-once run-anywhere c without devops</span>
</header>

<nav>
  <ul>
    <li><a href="https://justine.lol/cosmopolitan/index.html">Intro</a>
    </li><li><a href="https://justine.lol/cosmopolitan/download.html">Download</a>
    </li><li><a href="https://justine.lol/cosmopolitan/documentation.html">Documentation</a>
    </li><li><a href="https://justine.lol/cosmopolitan/sources.html">Sources</a>
    </li><li><a href="https://github.com/jart/cosmopolitan">GitHub</a>
    </li><li><a href="https://justine.lol/cosmopolitan/license.html">License</a>
    </li><li><a href="https://justine.lol/index.html">» jart's web page</a>
  </li></ul>
</nav>

<p>
  Cosmopolitan makes C a build-once run-anywhere language, similar to
  Java, except it doesn't require interpreters or virtual machines be
  installed beforehand. Cosmo provides the same portability benefits as
  high-level languages like Go and Rust, but it doesn't invent a new
  language and you won't need to configure a CI system to build separate
  binaries for each operating system. What Cosmopolitan focuses on is
  fixing C by decoupling it from platforms, so it can be pleasant to use
  for writing small unix programs that are easily distributed to a much
  broader audience.

</p><h3>Getting Started</h3>

<p>
  Assuming you have GCC on Linux, then all you need are the five
  additional files which are linked below:

</p><pre><span># create simple c program on command line</span>
echo <span>'
  main() {
    printf("hello world\n");
  }
'</span> &gt;hello.c

<span># run gcc compiler in freestanding mode</span>
gcc -g -Os -static -fno-pie -mno-red-zone -nostdlib -nostdinc -o hello.com hello.c \
  -Wl,--oformat=binary -Wl,--gc-sections -Wl,-z,max-page-size=0x1000 \
  -Wl,-T,<a href="https://justine.lol/cosmopolitan/ape.lds">ape.lds</a> -include <a href="https://justine.lol/cosmopolitan/cosmopolitan.h">cosmopolitan.h</a> <a href="https://justine.lol/cosmopolitan/crt.o">crt.o</a> <a href="https://justine.lol/cosmopolitan/ape.o">ape.o</a> <a href="https://justine.lol/cosmopolitan/cosmopolitan.a">cosmopolitan.a</a>

<span># ~40kb static binary (can be ~16kb w/ MODE=tiny)</span>
./hello.com
</pre>

<p>
  The above command fixes GCC so it outputs portable binaries that will
  run on every Linux distro in addition to Mac OS X, Windows NT,
  FreeBSD, and OpenBSD too. For details on how this works, please read
  the <a title="Actually Portable Executable" href="https://justine.lol/ape.html">αcτµαlly pδrταblε εxεcµταblε</a> blog post. This
  novel binary format is also optional: conventional ELF binaries can be
  compiled too by removing the <code>-Wl,--oformat=binary</code> flag.

</p><p>
  Your program will also boot on bare metal too. In other words, you've
  written a normal textbook C program, and thanks to Cosmopolitan's
  low-level linker magic, you've effectively created your own operating
  system which happens to run on all the existing ones as well. Now
  that's something no one's done before.

</p><h3>Mailing List</h3>

<p>
  Please join
  the <a href="https://groups.google.com/g/cosmopolitan-libc">Cosmopolitan
  Cosmonauts</a> Google Group!

</p><h3>Performance</h3>

<p>
  Cosmopolitan has been optimized by hand for excellent performance on
  modern desktops and servers. Compared with glibc, you should expect
  Cosmopolitan to be almost as fast, but with an order of a magnitude
  tinier code size. Compared with Musl or Newlib, you can expect that
  Cosmopolitan will generally go much faster, while having roughly the
  same code size, if not tinier.

</p><p>
  In the case of the most important libc function, memcpy(),
  Cosmopolitan outperformed every other open source library tested. The
  chart below shows how quickly memory is transferred depending on the
  size of the copy. Since it's log scale, each grid square represents a
  2x difference in performance. What makes Cosmopolitan so fast here is
  it uses uses several different memory copying strategies. For small
  sizes it uses an indirect branch with overlapping moves; for medium
  sizes it uses simd vectors, and for large copies it uses nontemporal
  hints which prevent cache thrash. Other libraries usually fall short
  because they use a one-size-fits-all strategy. For example, Newlib
  goes 10x slower for the optimal block size (half L1 cache) because it
  always does nontemporal moves.

</p><p>
  <a href="https://justine.lol/cosmopolitan/memcpy.png">
    <img width="960" height="540" src="https://storage.googleapis.com/justine/cosmopolitan/memcpy.png" alt="memcpy() performance for varying n values"></a>

</p><h3>Trickle-Down Performance</h3>

<p>
  Performing the best on benchmarks isn't enough. Cosmopolitan also uses
  a second technique that the above benchmark doesn't measure, which we
  call "trickle-down performance". For an example of how that works,
  consider the following common fact about C which is often overlooked.
  External function calls such as the following:

</p><pre>memcpy(foo, bar, n);
</pre>

<p>
  Are roughly equivalent to the following assembly, which leads
  compilers to assume that most cpu state is clobbered:

</p><pre><span>asm volatile</span>(<span>"call memcpy"</span>
             : <span>"=a"</span>(rax), <span>"=D"</span>(rdi), <span>"=S"</span>(rsi), <span>"=d"</span>(rdx)
             : <span>"1"</span>(foo), <span>"2"</span>(bar), <span>"3"</span>(n)
             : <span>"rcx"</span>, <span>"r8"</span>, <span>"r9"</span>, <span>"r10"</span>, <span>"r11"</span>, <span>"memory"</span>, <span>"cc"</span>,
               <span>"xmm0"</span>, <span>"xmm1"</span>, <span>"xmm2"</span>, <span>"xmm3"</span>, <span>"xmm4"</span>, <span>"xmm5"</span>, <span>"xmm6"</span>);
</pre>

<p>
  In other words the compiler assumes that, in calling the function,
  fifteen separate registers and all memory will be overwritten. See
  the <a href="https://www.uclibc.org/docs/psABI-x86_64.pdf">System V
  ABI</a> for further details. This can be problematic for
  frequently-called functions such as memcpy, since it inhibits many
  optimizations and it tosses a wrench in the compiler register
  allocation algorithm, thus causing stack spillage which further
  degrades performance while bloating the output binary size.

</p><p>
  So what Cosmopolitan does for memcpy() and many other
  frequently-called core library leaf functions, is defining a simple
  macro wrapper, which tells the compiler the correct subset of the abi
  that's actually needed, e.g.

</p><pre><span>#define</span> memcpy(DEST, SRC, N) ({       \
  void *Dest = (DEST);                \
  void *Src = (SRC);                  \
  size_t Size = (N);                  \
  <span>asm</span>(<span>"call memcpy"</span>                   \
      : <span>"=m"</span>(*(<span>char</span>(*)[Size])(Dest))  \
      : <span>"D"</span>(Dest), <span>"S"</span>(Src), <span>"d"</span>(n),  \
        <span>"m"</span>(*(<span>char</span>(*)[Size])(Src))    \
      : <span>"rcx"</span>, <span>"xmm3"</span>, <span>"xmm4"</span>, <span>"cc"</span>); \
    Dest;                             \
  })
</pre>

<p>
  What this means, is that Cosmopolitan memcpy() is not simply fast, it
  also makes unrelated code in the functions that call it faster too as
  a side-effect. When this technique was first implemented for memcpy()
  alone, many of the functions in the Cosmopolitan codebase had their
  generated code size reduced by a third.

</p><p>
  For an example of one such function, consider <code>strlcpy</code>,
  which is the BSD way of saying <code>strcpy</code>:

</p><pre><span>/**
 * Copies string, the BSD way.
 *
 * <span>@param</span> d is buffer which needn't be initialized
 * <span>@param</span> s is a NUL-terminated string
 * <span>@param</span> n is byte capacity of d
 * <span>@return</span> strlen(s)
 * <span>@note</span> d and s can't overlap
 * <span>@note</span> we prefer memccpy()
 */</span>
<span>size_t</span> strlcpy(<span>char</span> *d, <span>const</span> <span>char</span> *s, <span>size_t</span> n) {
  <span>size_t</span> slen, actual;
  slen = strlen(s);
  if (n) {
    actual = MIN(n - 1, slen);
    memcpy(d, s, actual);
    d[actual] = <span>'\0'</span>;
  }
  <span>return</span> slen;
}
</pre>

<p>
  If we compile our <code>strlcpy</code> function, then here's the
  assembly code that the compiler outputs:

</p><table><tbody><tr><td>
<pre><span>/ compiled with traditional libc</span>
<span>strlcpy</span>:
	<span>push</span>	<span>%rbp</span>
	<span>mov</span>	<span>%rsp</span>,<span>%rbp</span>
	<span>push</span>	<span>%r14</span>
	<span>mov</span>	<span>%rsi</span>,<span>%r14</span>
	<span>push</span>	<span>%r13</span>
	<span>mov</span>	<span>%rdi</span>,<span>%r13</span>
	<span>mov</span>	<span>%rsi</span>,<span>%rdi</span>
	<span>push</span>	<span>%r12</span>
	<span>push</span>	<span>%rbx</span>
	<span>mov</span>	<span>%rdx</span>,<span>%rbx</span>
	<span>call</span>	strlen
	<span>mov</span>	<span>%rax</span>,<span>%r12</span>
	<span>test</span>	<span>%rbx</span>,<span>%rbx</span>
	<span>jne</span>	1f
	<span>pop</span>	<span>%rbx</span>
	<span>mov</span>	<span>%r12</span>,<span>%rax</span>
	<span>pop</span>	<span>%r12</span>
	<span>pop</span>	<span>%r13</span>
	<span>pop</span>	<span>%r14</span>
	<span>pop</span>	<span>%rbp</span>
	<span>ret</span>
1:	<span>cmp</span>	<span>%rbx</span>,<span>%rax</span>
	<span>mov</span>	<span>%r14</span>,<span>%rsi</span>
	<span>mov</span>	<span>%r13</span>,<span>%rdi</span>
	<span>cmovbe</span>	<span>%rax</span>,<span>%rbx</span>
	<span>mov</span>	<span>%rbx</span>,<span>%rdx</span>
	<span>call</span>	memcpy
	<span>movb</span>	$<span>0</span>,0(<span>%r13</span>,<span>%rbx</span>)
	<span>mov</span>	<span>%r12</span>,<span>%rax</span>
	<span>pop</span>	<span>%rbx</span>
	<span>pop</span>	<span>%r12</span>
	<span>pop</span>	<span>%r13</span>
	<span>pop</span>	<span>%r14</span>
	<span>pop</span>	<span>%rbp</span>
	<span>ret</span>
	<span>.endfn</span>	strlcpy,globl
</pre>
</td><td>
<pre><span>/ compiled with cosmopolitan libc</span>
<span>strlcpy</span>:
	<span>mov</span>	<span>%rdx</span>,<span>%r8</span>
	<span>mov</span>	<span>%rdi</span>,<span>%r9</span>
	<span>mov</span>	<span>%rsi</span>,<span>%rdi</span>
	<span>call</span>	strlen
	<span>test</span>	<span>%r8</span>,<span>%r8</span>
	<span>je</span>	1f
	<span>cmp</span>	<span>%r8</span>,<span>%rax</span>
	<span>lea</span>	<span>-1(%r8)</span>,<span>%rdx</span>
	<span>mov</span>	<span>%r9</span>,<span>%rdi</span>
	<span>cmova</span>	<span>%rax</span>,<span>%rdx</span>
	<span>call</span>	MemCpy
	<span>movb</span>	$<span>0</span>,(<span>%r9</span>,<span>%rdx</span>)
1:	<span>ret</span>
	<span>.endfn</span>	strlcpy,globl
</pre>
</td></tr></tbody></table>

<p>
  That's a huge improvement in generated code size. The above two
  compiles used the same gcc flags and no changes to the code needed to
  be made. All that changed was we used cosmopolitan.h (instead of the
  platform c library string.h) which contains ABI specialization macros
  for <code>memcpy</code> and <code>strlen</code>. It's a great example
  of how merely choosing a better C library can systemically eliminate
  bloat throughout your entire codebase.

</p>
</div>]]>
            </description>
            <link>https://justine.lol/cosmopolitan/index.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25556286</guid>
            <pubDate>Mon, 28 Dec 2020 02:59:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[2-Acre Vertical Farm Run by AI and Robots Out-Produces 720-Acre Flat Farm]]>
            </title>
            <description>
<![CDATA[
Score 234 | Comments 233 (<a href="https://news.ycombinator.com/item?id=25554941">thread link</a>) | @wrycoder
<br/>
December 27, 2020 | https://www.intelligentliving.co/vertical-farm-out-produces-flat-farm/ | <a href="https://web.archive.org/web/*/https://www.intelligentliving.co/vertical-farm-out-produces-flat-farm/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
	<p><a href="https://www.plenty.ag/" target="_blank" rel="noopener">Plenty</a> is an ag-tech startup in San Francisco, co-founded by Nate Storey, that is reinventing farms and farming. Storey, who is also the company’s chief science officer, says the future of farms is vertical and indoors because that way, the food can grow anywhere in the world, year-round; and the future of farms employ robots and AI to continually improve the quality of growth for fruits, vegetables, and herbs. Plenty does all these things and uses 95% less water and 99% less land because of it.</p>
<p>In recent years, farmers on flat farms have been using new tools for making farming better or easier. They’re using drones and robots to improve crop maintenance, while artificial intelligence is also on the rise, with over 1,600 startups and total investments reaching tens of billions of dollars. Plenty is one of those startups. However, flat farms still use a lot of water and land, while a Plenty vertical farm can produce the same quantity of fruits and vegetables as a 720-acre flat farm, but on only 2 acres!</p>
<p>Storey said:</p>
<blockquote><p>Vertical farming exists because we want to grow the world’s capacity for fresh fruits and vegetables, and we know it’s necessary.</p></blockquote>
<p><span><iframe width="1400" height="788" src="https://www.youtube.com/embed/GO0fRU46ZHc?version=3&amp;rel=1&amp;showsearch=0&amp;showinfo=1&amp;iv_load_policy=1&amp;fs=1&amp;hl=en-GB&amp;autohide=2&amp;wmode=transparent" allowfullscreen="true" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation"></iframe></span></p>
<p>Plenty’s climate-controlled indoor farm has rows of plants growing vertically, hung from the ceiling. There are sun-mimicking LED lights shining on them, <a href="https://www.intelligentliving.co/tiny-smart-robots-kill-weeds/">robots</a> that move them around, and artificial intelligence (AI) managing all the variables of water, temperature, and light, and continually learning and optimizing how to grow bigger, faster, better crops. These futuristic features ensure every plant grows perfectly year-round. The conditions are so good that the farm produces 400 times more food per acre than an outdoor flat farm.</p>

<p>Storey said:</p>
<blockquote><p>400X greater yield per acre of ground is not just an incremental improvement, and using almost two orders of magnitude less water is also critical in a time of increasing environmental stress and climate uncertainty. All of these are truly game-changers, but they’re not the only goals.</p></blockquote>
<p>Another perk of vertical farming is locally produced food. The fruits and vegetables aren’t grown 1,000 miles away or more from a city; instead, at a warehouse nearby. Meaning, many transportation miles are eliminated, which is useful for reducing millions of tons of yearly CO2 emissions and prices for consumers. Imported fruits and vegetables are more expensive, so society’s most impoverished are at an extreme nutritional disadvantage. Vertical farms could solve this problem.</p>
<p>Storey said:</p>
<blockquote><p>Supply-chain breakdowns resulting from COVID-19 and natural disruptions like this year’s California wildfires demonstrate the need for a predictable and durable supply of products can only come from vertical farming.</p></blockquote>
<figure id="attachment_39422" aria-describedby="caption-attachment-39422"><img loading="lazy" src="https://i2.wp.com/www.intelligentliving.co/wp-content/uploads/2020/12/Reuters.jpg?resize=1024%2C576&amp;ssl=1" alt="2-Acre Vertical Farm Run By AI And Robots Out-Produces 720-Acre' Flat Farm'" width="1024" height="576" srcset="https://i2.wp.com/www.intelligentliving.co/wp-content/uploads/2020/12/Reuters.jpg?resize=1024%2C576&amp;ssl=1 1024w, https://i2.wp.com/www.intelligentliving.co/wp-content/uploads/2020/12/Reuters.jpg?resize=300%2C169&amp;ssl=1 300w, https://i2.wp.com/www.intelligentliving.co/wp-content/uploads/2020/12/Reuters.jpg?resize=768%2C432&amp;ssl=1 768w, https://i2.wp.com/www.intelligentliving.co/wp-content/uploads/2020/12/Reuters.jpg?resize=960%2C540&amp;ssl=1 960w, https://i2.wp.com/www.intelligentliving.co/wp-content/uploads/2020/12/Reuters.jpg?resize=711%2C400&amp;ssl=1 711w, https://i2.wp.com/www.intelligentliving.co/wp-content/uploads/2020/12/Reuters.jpg?resize=585%2C329&amp;ssl=1 585w, https://i2.wp.com/www.intelligentliving.co/wp-content/uploads/2020/12/Reuters.jpg?w=1200&amp;ssl=1 1200w" sizes="(max-width: 1024px) 100vw, 1024px" data-recalc-dims="1"><figcaption id="caption-attachment-39422">(Credit: Reuters)</figcaption></figure>
<p>Plenty’s farms grow non-GMO crops and don’t use herbicides or pesticides. They recycle all water used, even capturing the evaporated water in the air. The flagship farm in San Francisco is using 100% renewable energy too.</p>
<p>Furthermore, all the packaging is 100% recyclable, made of recycled plastic, and specially designed to keep the food fresh longer to reduce food waste.</p>
<p>Storey told <a href="https://www.forbes.com/sites/johnkoetsier/2020/11/20/this-2-acre-vertical-farm-out-produces-750-acre-flat-farms/" target="_blank" rel="noopener">Forbes</a>:</p>
<blockquote><p>The future will be quite remarkable. And I think the size of the global fresh fruit and vegetable industry will be multiples of what it is today.</p></blockquote>
<p>Plenty has already received $400 million in investment capital from SoftBank, former Google chairman Eric Schmidt, and Amazon’s Jeff Bezos. It’s also struck a deal with Albertsons stores in California to supply 430 stores with fresh produce.</p>
<p>Ideally, the company will branch out, opening vertical farms across the country and beyond. There can never be too many places graced by better food growing with a less environmental cost.</p>
<p>Here’s a <a href="https://anchor.fm/techfirst/episodes/The-future-of-farms-is-vertical-400X-more-yield--95-less-water--99-less-space-emesrq/a-a3sf2o5" target="_blank" rel="noopener">TechFirst podcast</a> about the story behind Plenty:</p>

<p><span><iframe width="1400" height="788" src="https://www.youtube.com/embed/0uXdnjXIGjI?version=3&amp;rel=1&amp;showsearch=0&amp;showinfo=1&amp;iv_load_policy=1&amp;fs=1&amp;hl=en-GB&amp;autohide=2&amp;wmode=transparent" allowfullscreen="true" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation"></iframe></span></p>
<!-- AI CONTENT END 2 -->
</div></div>]]>
            </description>
            <link>https://www.intelligentliving.co/vertical-farm-out-produces-flat-farm/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25554941</guid>
            <pubDate>Sun, 27 Dec 2020 22:47:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Resolving the Time Paradox Implied by Functional Programs]]>
            </title>
            <description>
<![CDATA[
Score 22 | Comments 21 (<a href="https://news.ycombinator.com/item?id=25554907">thread link</a>) | @jbmilgrom
<br/>
December 27, 2020 | https://softwarefordays.com/post/resolving-the-fp-time-paradox/ | <a href="https://web.archive.org/web/*/https://softwarefordays.com/post/resolving-the-fp-time-paradox/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

      

<p>Excerpted from <a href="https://softwarefordays.com/post/functional-programming-and-identity-state-and-time/#resolving-the-time-paradox">Functional Programming and the Semantics of Change, State &amp; Time</a>.</p>
<blockquote>
<p>“No man can ever cross the same river twice.” Because what’s a river? I mean, we love this idea of objects; like there’s this thing that changes. Right? There’s no river. Right? There’s water there at one point-in-time. And another point-in-time, there’s other water there. — Rich Hickey, <a href="https://github.com/matthiasn/talk-transcripts/blob/master/Hickey_Rich/AreWeThereYet.md">Are We There Yet</a>, quoting Heraclitus.</p>
</blockquote>
<p>From the perspective of a user, a functional program may appear stateful. Interact with <a href="https://softwarefordays.com/post/functional-programming-and-identity-state-and-time/#stateful-functional-programs">the functional ATM program above</a> and notice the program remembering previous encounters. On the one hand, this is not surprising. We included an imperative layer to remember previous states. Instead of decomposing the state of the program into distinct objects, like <code>bankAccount</code> and <code>withdrawalAmount</code>, we created a single global object, the <code>store</code>. On the other hand, focusing on the “object” portion of the program betrays an object-oriented predisposition. The imperative piece of the program is merely a construct used to facilitate a computation based asynchronously on another. One can even imagine a programming language where such a construct is built into the language itself, hiding any imperative implementation from the programmer’s view. In fact, such a language exists that compiles to JavaScript.<sup><a href="#fn1" id="fnref1">[1]</a></sup> In other words, it is syntax, not semantics. The semantics of the program better align with the semantics of a recursive, iterative function, having state <code>S</code> at a discrete step <code>i</code> — run the functional ATM program with the output of the previous run to produce the input for the next.</p>
<p>That a program with a functional, stateless and timeless core can maintain state is surprising, to say the least. Look around the room, bus, park or wherever you find yourself reading this sentence, and you will likely identify “a collection of distinct objects,” such as dogs, people, and trees, “whose behaviors may change over time.” Look around the functional ATM program, on the other hand, and there are no identifiable objects to be found. Yet, the program appears to have state just like any other object in the room.</p>
<p>However, the ostensible “paradox” dissipates when the augmentation of our conception of time extends beyond the functional program to include the rest of our physical reality.</p>
<blockquote>
<p>One way to resolve this paradox is to realize that it is the user’s temporal existence that imposes state on the system. If the user could step back from the interaction and think in terms of streams of balances rather than individual transactions, the system would appear stateless — <a href="https://web.mit.edu/alexmv/6.037/sicp.pdf">SICP</a> Section 3.5.5</p>
</blockquote>
<p>Instead of viewing the <em>world</em> as the sum of its objects, each reflecting its latest state as time elapses, we may also think in terms of discrete state histories. We may interpret the dog at the park as moving in discrete steps <code>S(i)</code> to <code>S(i+1)</code>, just as we interpret the state of our functional program as moving in discrete steps <code>S(i)</code> to <code>S(i+1)</code>.</p>
<p>Consider video media. To movie scenes, we may attribute the same object-oriented semantics. Character and inanimate objects shift, interact and evolve as time elapses.</p>
<video id="metavideo" poster="https://softwarefordays.com/media/metavideoposter.gif" preload="none" width="480" controls="">
    <source src="https://softwarefordays.com/media/metavideo.mp4" type="video/mp4; codecs=&quot;avc1.42E01E, mp4a.40.2&quot;">
    <img src="https://softwarefordays.com/media/metavideo.mp4" title="Your browser does not support the mp4 video codec.">
</video>
<p>While playing the above video, for example, we may conclude that “a cat is dancing.” Yet, videos are comprised of static frames stitched together in a certain sequence at discrete time intervals. Each frame corresponds to a state of the video at a moment in time and the frames, taken together, a time-denominated series of discrete states. The media chosen above is intentionally meta. The video includes a TV animation of a scene mirrored by a flip-book<sup><a href="#fn2" id="fnref2">[2]</a></sup>, showing static frames strung together at discrete time intervals, which itself is mirrored by a flip-book in “real” life, showing static frames strung together at discrete time intervals. Take another step back to notice that the above gif media (or mp4 if your browser supports html5) being played on <em>your</em> computer is comprised of static frames, strung together at discrete time intervals.</p>
<p>There is nothing stopping us from taking another step back and interpreting the real world in which your computer currently sits as static frames, strung together at discrete time intervals. We <em>may</em> attribute normal object-oriented semantics to the above gif, concluding that “a cat is dancing.” However, we may also attribute functional semantics, concluding that “a cat has arms above its head on frame fᵢ.” At a park in the real world, we may conclude that “a dog is chasing a squirrel.” However, we may also conclude that “a dog is in the running motion behind a squirrel in the running motion on frame fᵢ.” In both cases, we may identify a time-series of states instead of objects that change over time. The functional programming paradigm can be coherently applied to world and program alike.</p>
<p>With a model for discrete time in mind, it is less surprising that functional programs can appear stateful. A user of the program may be viewed as a series of states, just like the program itself. A specific series of user states, for example,</p>
<pre><code>U₀: "Open up this blog post"<br>U₁: “Select 20 option”<br>U₂: “Click withdraw”<br>...<br>U(i): Uᵢ</code></pre>
<p>directly precipitate a series of program states:</p>
<pre><code>S₀: balance:100, amount:10<br>S₁: balance:100, amount:20<br>S₂: balance:80, amount:20<br>...<br>S(i): program(Sᵢ₋₁, Eᵢ)</code></pre>
<p>In both cases, pieces of static information may be listed, one <em>after</em> another. Moreover, both lists can be plotted along the same discrete timeline <code>i</code>. User interactions come in a certain order <code>U(i)</code>, triggering a run of the program function against the result of the previous run <code>S(i-1)</code> and event data <code>E(i)</code>, in order to produce <code>S(i)</code>. Our reality can be viewed as a time-series of states, just as it can be viewed as a collection of objects. Functional programming models a time-series of states, just as as object-oriented programming models objects. When the program and world <em>alike</em> can be viewed as “streams of information that flow in the system,” (<a href="https://web.mit.edu/alexmv/6.037/sicp.pdf">SICP</a> Section 3) the world can flow into the program, and the program back into the world.</p>
<hr>
<section>
<ol>
<li id="fn1"><p><a href="https://guide.elm-lang.org/">Elm</a> programs are trivially made to be stateful, notwithstanding the exclusive use of pure functions <em>and</em> the asynchrony of user interactions! This counter program</p>
<pre><code><span><span>import</span> Browser</span><span><br><span>import</span> Html <span>exposing</span> </span><span>(</span><span>Html</span><span>,</span> <span>button</span><span>,</span> <span>div</span><span>,</span> <span>text</span><span>)</span><br><span><span>import</span> Html.Events <span>exposing</span> </span><span>(</span><span>onClick</span><span>)</span><p><span>main</span> <span>=</span><br><span>Browser.sandbox</span> <span>{</span> <span>init</span> <span>=</span> <span>0</span><span>,</span> <span>update</span> <span>=</span> <span>update</span><span>,</span> <span>view</span> <span>=</span> <span>view</span> <span>}</span></p><p><span>type</span> <span>Msg</span> <span>=</span> <span>Increment</span> <span>|</span> <span>Decrement</span></p><p><span>update</span> <span>msg</span> <span>model</span> <span>=</span><br><span>case</span> <span>msg</span> <span>of</span><br><span>Increment</span> <span>-&gt;</span><br>  <span>model</span> <span>+</span> <span>1</span></p><p><span>Decrement</span> <span>-&gt;</span><br>  <span>model</span> <span>-</span> <span>1</span></p><p><span>view</span> <span>model</span> <span>=</span><br><span>div</span> <span>[</span><span>]</span><br><span>[</span> <span>button</span> <span>[</span> <span>onClick</span> <span>Decrement</span> <span>]</span> <span>[</span> <span>text</span> <span>"-"</span> <span>]</span><br><span>,</span> <span>div</span> <span>[</span><span>]</span> <span>[</span> <span>text</span> <span>(</span><span>String.fromInt</span> <span>model</span><span>)</span> <span>]</span><br><span>,</span> <span>button</span> <span>[</span> <span>onClick</span> <span>Increment</span> <span>]</span> <span>[</span> <span>text</span> <span>"+"</span> <span>]</span><br><span>]</span></p></code></pre>
<p>can be seen <a href="https://elm-lang.org/examples/buttons">here</a> tracking counter state, even though a user may of course click the counter buttons asynchronously. Like garbage collection in JavaScript, Elm hides any imperative code dedicated to communication between asynchronous scripts from the programmer’s view. <a href="#fnref1">↩︎</a></p>
</li>
<li id="fn2"><p>A flip-book <a href="https://softwareengineering.stackexchange.com/a/245409/369472">has been suggested</a> as a valuable mental model for state in functional programming <a href="#fnref2">↩︎</a></p>
</li>
</ol>
</section>




    </div></div>]]>
            </description>
            <link>https://softwarefordays.com/post/resolving-the-fp-time-paradox/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25554907</guid>
            <pubDate>Sun, 27 Dec 2020 22:43:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Hyperbezier Pen Tool]]>
            </title>
            <description>
<![CDATA[
Score 95 | Comments 16 (<a href="https://news.ycombinator.com/item?id=25554205">thread link</a>) | @raphlinus
<br/>
December 27, 2020 | https://www.cmyr.net/blog/hyperbezier.html | <a href="https://web.archive.org/web/*/https://www.cmyr.net/blog/hyperbezier.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <article>
        <h2 id="introduction">Introduction</h2>

<p>This post introduces a new model for a path drawing (pen) tool, with a particular focus on font design.</p>

<p>Although this tool works much like familiar pen tools (which are based on the manipulation of <a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve">Bézier curves</a>), it is actually based on a new family of two-control-point curves, which we’ve been calling the <em>hyperbezier</em>.</p>

<p>This work is still in its early stages, and the demo below is quite barebones; my goal here is to get a simple version of this tool into the hands of designers and design-tool makers, so that more people can start to play around and evaluate it.</p>

<h4 id="contents">Contents</h4>



<h3 id="-background--motivation"><a id="background"></a> Background &amp; motivation</h3>

<p>The basis of this tool is a new mathematical model for fitting a curve to a set of points; that work was done earlier in the year by my collaborator <a href="https://raphlinus.github.io/">Raph Levien</a>. For the past year or so Raph has been excitedly talking to me about about things like <em>splines</em> and <em>G2 continuity</em> and the elegance of the <em>Euler spiral</em>, and I have for the most part been smiling politely and nodding. In the last few weeks however I have started trying to implement a simple drawing app around his new model, and the excitement is catching: this new tool feels like the first I have used that is a compelling alternative to traditional Bézier-curve based drawing tools.</p>

<p>It is likely that if you have ever used a computer drawing application then you have, at some point, used a <em>pen tool</em>: a tool that allows you to place a small number of points, which are then connected with a series of curves, the exact curvature being a function of the position of the points.</p>

<p>Tools like this— which take some fixed number of points and calculate a curve based on them— are called <em>splines</em>. If you are curious about the topic (particularly in the context of interactive design tools), a very accessible overview is Raph’s <a href="https://levien.com/phd/thesis.pdf">dissertation</a>; I won’t go into too much detail here, except to say that Raph has been revisiting this subject recently, and the result is the <a href="https://github.com/linebender/spline"><em>hyperbezier spline</em></a>. Like traditional (cubic) Bézier paths, a hyperbezier path is comprised of segments, each defined by two <em>on-curve</em> and two <em>off-curve</em> (or <em>control</em>) points; the curve passes through the two on-curve points, and the curvature itself is determined by the position of the two off-curve points.</p>

<p><img id="simple-cubic" src="https://www.cmyr.net/assets/hyperbez/hyperbez-simple-cubic1.png" alt="A simple cubic Bézier"></p>
<p>A Bézier path, consisting of two segments</p>

<p>If you’re generally curious about Béziers, <a href="https://pomax.github.io/bezierinfo/">A Primer on Béziers Curves</a> is an excellent resource. For our purposes it is enough to note that splines based on direct manipulation of Bézier control points (most pen tools) provide a high degree of control, but are difficult to use well. In particular, it can be tricky to maintain consistent curvature between adjoining segments of a path, which can lead to a ‘lumpy’ look; the following example is  contrived, but in practice consistently getting smooth feeling curves with Béziers is challenging.</p>


<p>A lumpy path. Mouseover to see the filled outline.</p>

<h3 id="-the-hyperbezier"><a id="hyperbezier"></a> The hyperbezier</h3>

<p>The core idea of the hyperbezier is the use of <em>auto-points</em>. These control points are adjusted automatically by the tool in order to maintain a smooth curve between neighbouring curve segments.</p>

<p>Let’s look at an example. With the path below you can drag points around, and double-click points to toggle their type.</p>

<p>The two green squares are <em>corner</em> points; curve segments that join at these points are allowed to change direction sharply. The two blue circles are <em>smooth</em> points; changing the curve on one side of the point can cause changes in the <em>auto</em> points (and hence the curve) on the other side.</p>

<p>The auto-points are indicated with dashed lines and terminating ‘x’s. The manual control points are indicated with solid lines, and terminating ‘o’s.</p>




<h5 id="playing-around">Playing around</h5>
<p>To get a better understanding of the spline’s behaviour, here are some things to try <em>(this requires a mouse)</em>:</p>
<ul>
  <li><em>double-click the bottom point to make it smooth</em>. When this point is smooth, the auto points beside it are adjusted so that the two curve segments join smoothly.</li>
  <li><a href="#" onclick="reloadHeart();return false;">reset,</a> or double-click the bottom point to turn it back into a corner. Now <em>doubleclick the top-left smooth point</em>. Making the top-left point a corner will replace the curve between them with a straight line. Two adjacent corners with only auto-points between them will always form a straight line, because a line is maximally smooth.
    <ul>
      <li>You should notice two small ‘x’s on this line. <em>Drag one of these auto points somewhere to position it manually</em>. You will notice that the remaining auto-point is repositioned as you drag.</li>
      <li><em>Drag the other auto-point</em>. With both control points positioned manually, and with corners at either end, you have full control of this segment.</li>
    </ul>
  </li>
</ul>

<!--(TK: SIMPLIFY ME, JUST INTRODUCE AUTO POINTS)The principal goal of the hyperbezier is to make it easier to maintain consistent curvature between adjoining segments of a path. This is achieved by letting the designer choose to have certain control points positioned automatically. These *auto-points* are adjusted in response to changes in adjoining segments so as to form a [smooth][smoothness] curve.-->

<!--In addition, on-curve points can be either *smooth* points or *corners*; if a point is smooth (marked by a green circle) then any auto points on either side of that point will be adjusted to maintain curvature with the segment on the other side. If a point is a corner (marked by a blue square) then the segment on one side of the point is not influenced by the curvature on the other side.-->

<!--Moving any on-curve point can cause subtle changes to the position of multiple auto-points; the example below is interactive, and you can drag the various points around, or toggle their type. Notice how the behaviour of the auto points changes if you toggle a nearby on-curve point between smooth and corner;

<iframe class="embedded-toy"
    title="Interactive hyperbezier toy"
    width="400"
    height="400"
    src="https://www.cmyr.net/misc/hyperbez/#AAE=eJxVzL0JgDAUBOCcYO8IjvImsFTQMmIpuEGmcJtARnlDpA0ELpCfq46P42BKZjNGkxWWeMhUddk_argeQWPdbrL6t2f3n-TV2WHdXQNsyEpvEhM=">
</iframe>
<div class = "img-caption">This demo requires a fairly recent browser</div>
-->

<h3 id="-the-toy-pen-tool"><a id="the-toy"></a> The toy pen tool</h3>

<p>If you’re curious to try drawing with this tool, <a href="https://cmyr.net/misc/hyperbez">There is a simple web app available here</a> (and embedded below).</p>




<p>Below are some examples of letterforms I’ve sketched in the process of getting this working. These may offend the actual type designers in the room, but I hope they will be useful illustrations.</p>

<p><a href="https://www.cmyr.net/misc/hyperbez/#AAE=eJxlkj3OgUEUhWe-fHqFBSiVSuVdwhuFKBQjQUQk3viPv4y8oqBRKpVKpdISLMESLIG4J8xhmkmenDn33Hvn3-hJma_jhvK6pSJ_H-rbStNdsQEWiP2E8GWhONsnHFhb-6YZ83WkrjIXhwnMCKVK5BktFd-aYsJgCXCV1Nc1gnU42ApqxhGwaxC-o6S0gLWXK3Dc0zvnYTqi19mB4vyMsEfTY0_YYGTHJeE0kkVrwjG8y1s2KSo-sfrWQuCERmeqivecxNUU3-c8jFixm_L8Pzu09veP4dEhCTf8_BZqyTF3aOq8IVzAhs-sDqyNtRJWfQBl00gu" onclick="return reloadMain(event, 'g');"><img src="https://www.cmyr.net/assets/hyperbez/hyper-g-small-fill.png"></a>
<a href="https://www.cmyr.net/misc/hyperbez/#AAE=eJxt0TsKwkAQBuDZWGiZRrEKuYB9OucGRmJhlzQmNiq-QVCCBLFQsLbKUXKUHMDC0lJkJji7ZJssH39mZncbYKyOCUWEtBmhJXhKijEqVZnLOM4Q_jgh7F4Ewpwwugp8rAk9TjqvIHxaK-z1B05bq1kuKZnvBdoHQnchG5240VYmK8xQiTPlXLV1R_gx5SMu-7nRF_wzbexMHN1jdGUf_8i_JAIL7lLsahBibaL3hjmgiYxBcail0xlXDrV0mRCnelq8q7gu1QSxvvatM50=" onclick="return reloadMain(event, 'h');"><img src="https://www.cmyr.net/assets/hyperbez/hyper-h-small-fill.png"></a>
<a href="https://www.cmyr.net/misc/hyperbez/#AAE=eJxd0rEKwjAQBuCkk2PHjn2EPkJeQQQpqNCCYEWQIiJ0KFTbKuri6NhH6CPkERwdHR0zOgq5K_b3liMfuUtyxBEUnviLYqxsNpVyftrErAclLUu79JfEjz3laE35VijRq25T4qSrpjA1cYj8ZDYZsF5x7xzY3RD7C-CgJNYz4OjMPEe-MofA9wtxMQL-dLuHwIpZxDAjl49UPCtzohykMCOdc_UU38HPe22BQ76Z2uHojsReCdxmxO8aL5wQu7hbT7hJBdxExANs0vsvUgqMLzuHP6M=" onclick="return reloadMain(event, 's');"><img src="https://www.cmyr.net/assets/hyperbez/hyper-s-small-fill.png"></a>
<a href="https://www.cmyr.net/misc/hyperbez/#AAE=eJx1kquOAkEQRXs2K1auXNnrECv3A8pssjggEAgKSEgIgWQAA8EM4TEISHj8AgI5EjkSySfwCUgkj6qmq0jTpjInt27Vne539ep8PwMowL3qCrxZGuSRxkXwPANLdYSQAo9pdROxyjCtgccaKKY99hAHabLAhv8xWVSpi77jhuiGOeG0WCBaIfa7bIENwcNYaEdrxF-hwDPCUSgGJhZO_Ev4U5oklnbkY48fA_si8XaKWCWx6gnWoMV6PybODKfQOf5MeHetDwt_YCHTdgk__QYYOhKkhs4EQRux-qNKN659Nv52gbezlwn8tnO8sYx4ApWzkGnjrNOiVHYkMFB3ZFr79K2WzgVbDlNT" onclick="return reloadMain(event, 'm');"><img src="https://www.cmyr.net/assets/hyperbez/hyper-m-small-fill.png"></a>
<a href="https://www.cmyr.net/misc/hyperbez/#AAE=eJxt0b0OgjAQB_CrA2FkMXH0EXyEDg5OBI1x0YGZOIBGIxETjHysPgKTs4s7j8BkHImLr-Fwld6BXUh-XP-9a3uAy4DWKj2J36UUHdtLaNDyGxQ9vd85Ihdrxr6vY8Wfs0D0od3JDP_CXHcCG20k3Twr9hhXO2R5kEAYYuR7xKqlCjFTxq8EubqwkEmKPEgYXyNkJ_uFPN_GOLiFEqLis32cWDYEWO2G5FZqr0HooMWbG6qAIiO1I4VWTlLBVtPlpDK29XaSWq7UbCl9LIW1y0eYIscLHkEeT0V8Ab6RQUE=" onclick="return reloadMain(event, 'r');"><img src="https://www.cmyr.net/assets/hyperbez/hyper-r-small-fill.png"></a></p>
<p>Some example paths, drawn in the tool.</p>

<!--. This is very much a demo; the idea is to explore the interaction model, and to get a sense for how it feels to draw with the tool, compared to the standard Bézier curves used in most pen tools. Spoiler: I think it feels *really good*. You [can play around with it yourself][hypertoy]; it is pretty rough around the edges, but it works.-->

<h4 id="-using-the-toy-pen-tool"><a id="toy-guide"></a> Using the toy pen tool</h4>

<p>The toy is very rough: you have a select and a pen tool, but there are no rulers or measurement tools, no transforms, no ability to select multiple points. The pen works much like the familiar Bézier pen:</p>

<p>General:</p>

<ul>
  <li><code>V</code> key sets selection (arrow) tool, <code>P</code> key sets pen tool</li>
  <li>holding the space bar hides UI and shows filled path</li>
  <li>the current drawing is stored as part of the URL; copy this somewhere to “save”</li>
</ul>

<p>Pen tool:</p>

<ul>
  <li>click to add a line segment ending in a corner point</li>
  <li>alt + click to add an automatic curve segment ending in a smooth point</li>
  <li>click + drag to add a curve segment ending in a smooth point, with a manual control point</li>
  <li>click on a line segment to insert a point there; alt makes it a smooth point</li>
  <li>alt + click on any existing point to toggle the type of that point</li>
</ul>

<p>Select tool:</p>

<ul>
  <li>drag a control auto-point to move it, converting it to a manual point if necessary</li>
  <li>double-click will toggle an on-curve point between smooth and corner</li>
  <li>alt + click on a line segment to add two auto points</li>
  <li>deleting an off-curve point makes that curve segment into a line segment</li>
  <li>arrow keys nudge the current selection by 1 px; adding shift makes it 10px, and ctrl/cmd makes it 100px.</li>
  <li>shift + any of the above moves all of the points in the current outline (I’m sorry)</li>
</ul>

<h3 id="-next-steps"><a id="next-steps"></a> Next steps</h3>

<p>The code for the spline, including the demo, is <a href="https://github.com/linebender/spline">open source and available on github</a>.</p>

<p>The intent of this demo is twofold: firstly to test out how the curve feels to use, and to start playing around with the UX of the pen tool, and secondly to share this research with the broader community of designers and design-tool creators. Although this work is quite rough, my personal feeling is that this spline shows tremendous promise. Anecdotally, as a mere casual user of design tools, I find it <em>significantly</em> easier to make good looking curves with the hyperbezier than I do with traditional Bézier pen tools.</p>

<p>Perhaps the biggest question will be figuring out the best interaction model: what set of mouse clicks, key presses and modifiers the user issues in order to control the state of the points. This has been a challenge for other new splines; the interaction model we use with Béziers is <a href="https://youtu.be/sT8Y7o-zsVw?t=68">familiar and long-established</a>, and people (especially graphic designers) are deeply comfortable with it. The interaction model used here for the hyperbezier is intentionally designed to feel similar to these existing tools, but other interaction models may be worth exploring.</p>

<p>In the coming weeks I hope to integrating the spline into <a href="https://github.com/linebender/runebender">Runebender</a>, a font editor, which will provide a much richer editing experience and will let us better explore how well the spline is suited to real-world use. In addition, Raph intends to do a more detailed writeup of the spline itself and the associated math, which derives both from the earlier Spiro spline and the classic model of elastica under tension.</p>

<p>If you’re curious about the spline, there are more details in the <a href="https://github.com/linebender/spline">github repo</a>; if you have questions you can open an issue there, ask them in our <a href="https://xi.zulipchat.com/">zulip chat server</a> or reach out on <a href="https://twitter.com/cmyr">on twitter</a>.</p>

<h3 id="thanks">Thanks</h3>

<p>This work was funded by <a href="https://fonts.google.com/about">Google Fonts</a>.</p>

<!--- this is particularly useful for fonts
* fix bug with click-drag
* rebuild example
* revisit "next steps": we want to encourage other folks to adopt this
* explicitly mention that all of this is open source
-->


      </article>

    </div></div>]]>
            </description>
            <link>https://www.cmyr.net/blog/hyperbezier.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25554205</guid>
            <pubDate>Sun, 27 Dec 2020 20:59:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A first look at Ghidra’s Debugger – Game Boy Advance Edition]]>
            </title>
            <description>
<![CDATA[
Score 153 | Comments 9 (<a href="https://news.ycombinator.com/item?id=25553105">thread link</a>) | @mr_golyadkin
<br/>
December 27, 2020 | https://wrongbaud.github.io/posts/ghidra-debugger/ | <a href="https://web.archive.org/web/*/https://wrongbaud.github.io/posts/ghidra-debugger/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div> <p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src=""></p><h2 id="overview">Overview</h2><p><a href="https://twitter.com/NSACyber/status/1339652646513291264">Yesterday</a> the NSA Twitter account announced that a new branch of Ghidra has been release with the long-awaited debugging capability. This will allow for single-step debugging of a program within <a href="https://hackaday.io/course/172292-introduction-to-reverse-engineering-with-ghidra">Ghidra</a> through a GDB stub or other various debug mechanisms. To celebrate this (and my being stuck at home quarantining…) I wanted to review how to build this version of Ghidra and give an example of how to use this debugger on a fun target.</p><p>This post will explain the following:</p><ul><li>How to build the latest (or any) version of Ghidra using a <a href="https://github.com/dukebarman/ghidra-builder">Docker Container</a></li><li>How to build the Ghidra Eclipse plugins</li><li>How to build a program <a href="https://github.com/SiD3W4y/GhidraGBA">loader</a> for Ghidra</li><li>Debugging a program with Ghidra using the GDB stub</li><li>Use the debugging capability to help us learn about how passwords are processed for a GBA game</li></ul><p>For this post, we’re going to be taking a look at the Game Boy Advance game Spiderman: Mysterio’s Menace. I’ve been very much inspired by all of the awesome work that <a href="https://youtu.be/VVbRe7wr3G4">stacksmashing and Liveoverflow have been doing regarding these topics</a>. This was a game that I spent a lot of time playing and it’s always fun revisiting childhood favorites from an RE perspective. The ultimate goal is to demonstrate how to properly load this ROM using a custom loader, and connect to an emulator’s GDB stub using Ghidra’s debugging features.</p><p><strong>RE Note/Tangent:</strong> When taking on a new reversing project, it’s important to try to compartmentalize goals and targets. For example, if we said we just want to <em>reverse</em> this game, that opens up endless possibilities. We could reverse engineer the collision detection, how enemy AI works, or how level maps are generated. For this post, we will pick a specific target and take a look at the password mechanism in use by this game.</p><p>I am doing all of this work on an Ubuntu 20.04 machine, with the latest updates.</p><h2 id="building-ghidra">Building Ghidra</h2><p>First things first, this debugger branch has not yet been included in an official release so we’re going to have to build it ourselves. Luckily for us <a href="https://github.com/dukebarman/ghidra-builder">dukebarman</a> has put together a docker container for us to do this, all we need to do is modify the <code>build_ghidra.sh</code> script to checkout the debugger branch, see the following line below:</p><div><p><code><table><tbody><tr><td><pre>1
</pre></td><td><pre>git clone https://github.com/NationalSecurityAgency/ghidra -b debugger
</pre></td></tr></tbody></table></code></p></div><p>We are also going to build the Eclipse development extensions for this version of Ghidra, this will help us later on when we build a loader and write our analysis scripts. To do this we add the following line to the <code>build_ghidra.sh</code> script:</p><div><p><code><table><tbody><tr><td><pre>1
2
</pre></td><td><pre>gradle prepDev
gradle eclipse -PeclipsePDE
</pre></td></tr></tbody></table></code></p></div><p>Next follow the instructions in the <code>README</code>:</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
</pre></td><td><pre>cd ghidra-builder
sudo docker-tpl/build
cd workdir
sudo ../docker-tpl/run ./build_ghidra.sh
</pre></td></tr></tbody></table></code></p></div><p>This will take some time, so maybe go grab a coffee or two and come back to your freshly built Ghidra. The resulting build can be found in <code>workdir/out</code>:</p><div><p><code><table><tbody><tr><td><pre>1
2
</pre></td><td><pre>wrongbaud@wubuntu:~/blog/gba-re-gbd/ghidra-builder/workdir$ ls out/
ghidra_9.3_DEV_20201218_linux64.zip
</pre></td></tr></tbody></table></code></p></div><p>Unzip this file, and you can launch Ghidra via the <code>./ghidraRun</code> script. For this post, I will unzip this into the <code>ghidra-builder/workdir</code> directory because we’re going to be using the docker container to build a Ghidra loader for this version of Ghidra. If you’re following along, your workdir directory should look like this:</p><div><p><code><table><tbody><tr><td><pre>1
2
</pre></td><td><pre>wrongbaud@wubuntu:~/blog/gba-re-gbd/ghidra-builder/workdir$ ls
build_ghidra.sh  ghidra  ghidra_9.3_DEV out  set_exec_flag.sh
</pre></td></tr></tbody></table></code></p></div><h2 id="building-eclipse-plugins">Building Eclipse Plugins</h2><p>Now that we have a new version of Ghidra built, we also need to build the GhidraDev plugin for Eclipse. The eclipse projects can be found in the <code>ghidra-builder/workdir/ghidra/GhidraBuild/EclipsePlugins/GhidraDev</code> directory.</p><ol><li>Install <a href="https://www.eclipse.org/downloads/packages/installer">Eclipse</a><ul><li>Select the Java IDE</li></ul></li><li>Install CDT, PyDev, and Plugin Development Environment<ul><li>This can be done from the Eclipse marketplace</li></ul></li><li>Import the GhidraDevFeature and GhidraDevPlugin projects<ul><li>These can be found in the <code>ghidra-builder/workdir/ghidra/GhidraBuild/EclipsePlugins/GhidraDev/</code> directory</li><li><code>File</code> -&gt; <code>Import</code> -&gt; <code>General</code> -&gt; <code>Existing Projects into Workspace</code></li><li>Add <code>ghidra-builder/workdir/ghidra/GhidraBuild/EclipsePlugins/GhidraDev</code></li><li>Select “Search for nested projects”</li><li>Import the projects!</li><li><strong>Note:</strong> you may see some build errors when these are imported, you can ignore these as you are just exporting the plugin!</li></ul></li><li>With these projects loaded, we can now <a href="https://github.com/NationalSecurityAgency/ghidra/blob/debugger/GhidraBuild/EclipsePlugins/GhidraDev/GhidraDevPlugin/build_README.txt">export the plugin</a><ul><li><code>File</code> -&gt; <code>Export</code></li><li><code>Plug-in Development</code> -&gt; <code>Deployable Features</code></li><li><code>ghidradev.ghidradev</code></li><li>Select an archive location for the plugin to be exported to</li><li>Click Finish!</li></ul></li></ol><p>Now we have our Ghidra plugin, built for our custom version of Ghidra that we can load via <code>Help</code>-&gt;<code>Install New Software</code>.</p><p>And with that, we have built Ghidra from the <code>debugger</code> branch, and have also built the Eclipse development extensions so we can build plugins for our new version of Ghidra!</p><p><strong>Note:</strong> I just want to take a second to outline just how incredible the <a href="https://github.com/NationalSecurityAgency/ghidra/blob/15c1f43fa51f210836cb451aff587b227dffe0a7/DevGuide.md">help docs</a> are for Ghidra. From the P-Code manuals to the instructions on building and exporting these plugins - the project is very well documented.</p><h2 id="building-the-rom-loader">Building the ROM Loader</h2><p>To properly analyze this ROM in Ghidra, we are going to need to define all of the <a href="https://problemkaputt.de/gbatek.htm#gbamemorymap">memory regions and peripherals</a> for the Game Boy Advance. Luckily for us, <a href="https://github.com/SiD3W4y/GhidraGBA">SiD3W4y</a> on GitHub has already written one.</p><p>If you are a regular reader of this blog, a <a href="https://wrongbaud.github.io/posts/writing-a-ghidra-loader/">ghidra loader</a> may be a familiar subject to you. If not, the purpose of a Ghidra loader is to set up all of the necessary memory regions, identify any debug information or symbols that may be present in the file, and provide as much information as possible about the target file. The loader that was mentioned before outlines all of the basic peripherals of the GBA and is an excellent example loader to work with, let’s start by cloning it into the <code>ghidra-builder/workdir</code> directory. We’re doing this because we’re going to use the same docker container we built Ghidra with to build this loader.</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
</pre></td><td><pre>cd ghidra-builder/workdir
git clone https://github.com/SiD3W4y/GhidraGBA
sudo ../docker-tpl/run /bin/bash
dockerbot@797eb43ce05f:/files/GhidraGBA$ export GHIDRA_INSTALL_DIR=/files/ghidra_9.3_DEV/
dockerbot@797eb43ce05f:/files/GhidraGBA$ gradle
dockerbot@797eb43ce05f:/files/GhidraGBA$ cp dist/ghidra_9.3_DEV_20201218_GhidraGBA.zip ../ghidra_9.3_DEV/Extensions/Ghidra/
dockerbot@797eb43ce05f:/files/GhidraGBA$ exit
exit
</pre></td></tr></tbody></table></code></p></div><p>In case the above steps are confusing, what we are doing is:</p><ol><li>Launching the docker container</li><li>Building the GhidraGBA extension, providing the path to our installation</li><li>Copying it to Ghidra’s extensions directory (so it will show up under the Install Extensions menu)</li><li>Exiting the docker container</li></ol><p>Launch Ghidra via <code>ghidraRun</code> and go to <code>File</code>-&gt; <code>Install Extensions</code>. Select the GhidraGBA loader and click <code>OK</code>. You will need to restart Ghidra for the change to take effect. Now when you load a GBA ROM you should see the following:</p><p><img data-src="https://wrongbaud.github.io/assets/img/ghidra-dbg/gba.png" alt="GBA" src="https://wrongbaud.github.io/assets/img/ghidra-dbg/gba.png"></p><p>After running the auto analysis, Ghidra seems to make a pretty quick sense of the ROM. There are a lot of functions defined and things are looking good. So the next step is to figure out some way to narrow down what we care about in this ROM image, in other words, we need to find our needle in the haystack. Let’s start by examining how the password system works in this game by entering a few passwords.</p><h2 id="analyzing-the-rom">Analyzing the Rom</h2><p>As mentioned before, our goal here is to try to understand the password system in use by this game. If we attempt to enter a password, the following screen is displayed:</p><p><img data-src="https://wrongbaud.github.io/assets/img/ghidra-dbg/rom-1.png" alt="ROM1" src="https://wrongbaud.github.io/assets/img/ghidra-dbg/rom-1.png"></p><p>Note that we have all of the consonants and no vowels and numbers “0-9”, and our passwords are only 5 characters long. This is a nice starting point for us as reverse engineers. We can use this information to help us narrow down functions of interest. For example- let’s look through the strings in the ROM and see if these values are represented in a string somewhere. If we open the strings window, <code>Window</code> -&gt; <code>Defined Strings</code>, and filter for the first 5 characters available to us as password characters we see the following:</p><p><img data-src="https://wrongbaud.github.io/assets/img/ghidra-dbg/strings-password-characters.png" alt="" src="https://wrongbaud.github.io/assets/img/ghidra-dbg/strings-password-characters.png"></p><p>So far so good - we only have two instances of this string in use. One is located at <code>0x804c11fc</code> and one at <code>0x84b86f0</code>. Upon examination of the first one, we see that this string gets passed to a function in the subroutine located at <code>0x8003358</code>, see below:</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td><pre><span>undefined4</span> <span>passwd_1</span><span>(</span><span>int</span> <span>param_1</span><span>,</span><span>int</span> <span>param_2</span><span>)</span>

<span>{</span>
  <span>int</span> <span>iVar1</span><span>;</span>
  <span>uint</span> <span>uVar2</span><span>;</span>
  <span>uint</span> <span>uVar3</span><span>;</span>
  <span>undefined4</span> <span>in_lr</span><span>;</span>
  <span>undefined</span> <span>auStack52</span> <span>[</span><span>36</span><span>];</span>
  <span>undefined4</span> <span>uStack4</span><span>;</span>
  
  <span>uStack4</span> <span>=</span> <span>in_lr</span><span>;</span>
  <span>FUN_080231f4</span><span>(</span><span>auStack52</span><span>,</span><span>"BCDFGHJKLMNPQRSTVWXYZ0123456789-"</span><span>,</span><span>0x21</span><span>);</span>
  <span>*</span><span>(</span><span>uint</span> <span>*</span><span>)(</span><span>param_1</span> <span>+</span> <span>0x8c</span><span>)</span> <span>=</span> <span>0</span><span>;</span>
  <span>FUN_080025f8</span><span>(</span><span>param_1</span><span>);</span>
  <span>FUN_08002674</span><span>(</span><span>param_1</span><span>);</span>
  <span>FUN_08002714</span><span>(</span><span>param_1</span><span>);</span>
  <span>FUN_0800282c</span><span>(</span><span>param_1</span><span>);</span>
  <span>iVar1</span> <span>=</span> <span>0</span><span>;</span>
  <span>uVar3</span> <span>=</span> <span>*</span><span>(</span><span>uint</span> <span>*</span><span>)(</span><span>param_1</span> <span>+</span> <span>0x8c</span><span>);</span>
  <span>uVar2</span> <span>=</span> <span>0</span><span>;</span>
  <span>do</span> <span>{</span>
    <span>*</span><span>(</span><span>undefined</span> <span>*</span><span>)(</span><span>param_2</span> <span>+</span> <span>iVar1</span><span>)</span> <span>=</span> <span>auStack52</span><span>[</span><span>uVar3</span> <span>&gt;&gt;</span> <span>(</span><span>uVar2</span> <span>&amp;</span> <span>0xff</span><span>)</span> <span>&amp;</span> <span>0x1f</span><span>];</span>
    <span>uVar2</span> <span>=</span> <span>uVar2</span> <span>+</span> <span>5</span><span>;</span>
    <span>iVar1</span> <span>=</span> <span>iVar1</span> <span>+</span> <span>1</span><span>;</span>
  <span>}</span> <span>while</span> <span>(</span><span>iVar1</span> <span>&lt;</span> <span>5</span><span>);</span>
  <span>return</span> <span>uStack4</span><span>;</span>
<span>}</span>
</pre></td></tr></tbody></table></code></p></div><p>Notice also the while loop that is looping while a variable is less than five, this is a good indicator that this function might be useful as we know that the password length is 5! Let’s label it <code>passwd_1</code> and move onto the other uses of our character string. The next one that we can see is in the function at <code>0x8002CEC</code>, the decompilation can be seen below:</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre></td><td><pre><span>undefined8</span> <span>passwd_2</span><span>(</span><span>void</span><span>)</span>

<span>{</span>
  <span>int</span> <span>iVar1</span><span>;</span>
  <span>int</span> <span>iVar2</span><span>;</span>
  <span>uint</span> <span>uVar3</span><span>;</span>
  <span>undefined4</span> <span>in_lr</span><span>;</span>
  <span>undefined</span> <span>local_98</span> <span>[</span><span>5</span><span>];</span>
  <span>undefined</span> <span>local_93</span><span>;</span>
  <span>undefined</span> <span>auStack144</span> <span>[</span><span>36</span><span>];</span>
  <span>undefined</span> <span>auStack108</span> <span>[</span><span>8</span><span>];</span>
  <span>undefined</span> <span>auStack100</span> <span>[</span><span>72</span><span>];</span>
  <span>undefined4</span> <span>uStack4</span><span>;</span>
  
  <span>uStack4</span> <span>=</span> <span>in_lr</span><span>;</span>
  <span>FUN_08000b0c</span><span>(</span><span>0</span><span>,</span><span>1</span><span>,</span><span>0</span><span>,</span><span>0</span><span>);</span>
  <span>DAT_03001fd0</span><span>.</span><span>_0_2_</span> <span>=</span> <span>0x1444</span><span>;</span>
  <span>DISPCNT</span> <span>=</span> <span>0x1444</span><span>;</span>
  <span>FUN_0801e330</span><span>(</span><span>&amp;</span><span>DAT_0838277c</span><span>);</span>
  <span>iVar1</span> <span>=</span> <span>DAT_03001fe0</span><span>;</span>
  <span>FUN_080231f4</span><span>(</span><span>auStack144</span><span>,</span><span>"BCDFGHJKLMNPQRSTVWXYZ0123456789-"</span><span>,</span><span>0x21</span><span>);</span>
  <span>*</span><span>(</span><span>uint</span> <span>*</span><span>)(</span><span>iVar1</span> <span>+</span> <span>0x8c</span><span>)</span> <span>=</span> <span>0</span><span>;</span>
  <span>FUN_080025f8</span><span>(</span><span>iVar1</span><span>);</span>
  <span>FUN_08002674</span><span>(</span><span>iVar1</span><span>);</span>
  <span>FUN_08002714</span><span>(</span><span>iVar1</span><span>);</span>
  <span>FUN_0800282c</span><span>(</span><span>iVar1</span><span>);</span>
  <span>iVar2</span> <span>=</span> <span>0</span><span>;</span>
  <span>uVar3</span> <span>=</span> <span>0</span><span>;</span>
  <span>do</span> <span>{</span>
    <span>local_98</span><span>[</span><span>iVar2</span><span>]</span> <span>=</span> <span>auStack144</span><span>[</span><span>*</span><span>(</span><span>uint</span> <span>*</span><span>)(</span><span>iVar1</span> <span>+</span> <span>0x8c</span><span>)</span> <span>&gt;&gt;</span> <span>(</span><span>uVar3</span> <span>&amp;</span> <span>0xff</span><span>)</span> <span>&amp;</span> <span>0x1f</span>…</pre></td></tr></tbody></table></code></p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://wrongbaud.github.io/posts/ghidra-debugger/">https://wrongbaud.github.io/posts/ghidra-debugger/</a></em></p>]]>
            </description>
            <link>https://wrongbaud.github.io/posts/ghidra-debugger/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25553105</guid>
            <pubDate>Sun, 27 Dec 2020 18:29:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Building my own HomeKit Thermostat]]>
            </title>
            <description>
<![CDATA[
Score 175 | Comments 88 (<a href="https://news.ycombinator.com/item?id=25552889">thread link</a>) | @frenchie4111
<br/>
December 27, 2020 | https://www.staycaffeinated.com/2020/12/27/building-my-own-homekit-thermostat-v1 | <a href="https://web.archive.org/web/*/https://www.staycaffeinated.com/2020/12/27/building-my-own-homekit-thermostat-v1">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content_area">
    <div>
        
            <h2 id="post_title">Building my own HomeKit Thermostat</h2>
        

        <p>Iâ€™m pretty obsessed with controlling most of the electronics in my house from my
phone. One of the last remaining devices was the thermostat. I donâ€™t want a Nest
because it doesnâ€™t work with HomeKit, and I canâ€™t use an EcoBee because I donâ€™t
have a neutral wire. So I resolved to build my own.</p>

<p>If you are building your own thermostat, or any hardware really, and want some
help or just want to show it off, feel free to shoot me an email at mdl0394@gmail.com. 
Also I plan to continue to expand this project to have a screen and some buttons,
if you want to hear about that signup to my email list and Iâ€™ll let you know when
I do it.</p>



<h2 id="figuring-out-hot-to-turn-on-the-heat">Figuring out hot to turn on the heat</h2>

<p>So I turns out my heater runs on a really simple control protocol. There are just
two wires run from the heater to the current thermostat, when you connect them it
turns on, and when you disconnect it turns off. The only unfortunate part of it is
that the wires are 24vac, so to be safe I need to use a solid state relay for
switching.</p>

<p><img src="https://d33wubrfki0l68.cloudfront.net/5897a162a777067bc7469e501a50029f58c9efe6/cc305/images/homekit_thermostat/old_thermostat_closeup.jpeg" alt="Old Thermostat Closeup showing two pins that need to be connected"></p>



<h2 id="the-prototype">The prototype</h2>

<p>I am building this whole thing on an esp32, with a big overkill relay I got on
amazon prime. I will link the exact parts below. The current thermometer is an
old tmp102 sparkfun board I had lying around, but itâ€™s off by around 6 degrees,
so in v2 I will be replacing it with hopefully a more accurate one.</p>

<p><img src="https://d33wubrfki0l68.cloudfront.net/ec16c9863aa710ab4101208bd7eebc89d316fecb/23983/images/homekit_thermostat/breadboard.jpeg" alt="Fully wired breadboard">
<img src="https://d33wubrfki0l68.cloudfront.net/81db446d96ed6124330e190aba1321f981d07adc/8d0da/images/homekit_thermostat/wall_taped.jpeg" alt="Breadboard taped to wall"></p>

<p>After wiring it all together, and taping it to my wall for a day or two, I was
satisfied with the components, and wanted to get started on prettying it up a bit.</p>



<h2 id="the-code">The code</h2>

<p>The thermostat control runs on a pretty simple state machine. I am a big fan of
drawing things out ahead of time, so I drew this diagram for myself before coding.
In C this is implemented as two enums (actions, states) and a bunch of switch case
statements.</p>

<p><img src="https://d33wubrfki0l68.cloudfront.net/6d7680c909d72c389d076e0390408d1e44382733/c2055/images/homekit_thermostat/state_machine.png" alt="State machine for thermostat control"></p>

<p id="expand_model_code">Click Here to toggle the code</p>
<div id="model_code">
<pre><code>// Enums:

typedef enum {
    TC_HEATER_MODE_OFF,
    TC_HEATER_MODE_ON,
    TC_HEATER_MODE_AUTO_ON,
    TC_HEATER_MODE_AUTO_OFF
} tc_heater_mode_t;

typedef enum {
    TC_HEATER_ACTIONS_SET_TO_AUTO,
    TC_HEATER_ACTIONS_SET_TO_OFF,
    TC_HEATER_ACTIONS_SET_TO_ON,
    TC_HEATER_ACTIONS_TEMPERATURE_CHANGE,
    TC_HEATER_ACTIONS_THRESHOLD_CHANGE
} tc_heater_action_t;

// ... Somewhere else:

switch (s_current_heater_mode) {
    case TC_HEATER_MODE_OFF:
        switch(tc_action) {
            case TC_HEATER_ACTIONS_SET_TO_AUTO:
                s_current_heater_mode = TC_HEATER_MODE_AUTO_OFF;
                s_current_heater_mode = tc_update_auto_mode(s_current_heater_mode);
                break;
            case TC_HEATER_ACTIONS_SET_TO_OFF:
                break;
            case TC_HEATER_ACTIONS_SET_TO_ON:
                s_current_heater_mode = TC_HEATER_MODE_ON;
                break;
            case TC_HEATER_ACTIONS_TEMPERATURE_CHANGE:
                break;
            case TC_HEATER_ACTIONS_THRESHOLD_CHANGE:
                break;
        }
        break;
    case TC_HEATER_MODE_ON:
        switch(tc_action) {
            case TC_HEATER_ACTIONS_SET_TO_AUTO:
                s_current_heater_mode = TC_HEATER_MODE_AUTO_ON;
                s_current_heater_mode = tc_update_auto_mode(s_current_heater_mode);
                break;
            case TC_HEATER_ACTIONS_SET_TO_OFF:
                s_current_heater_mode = TC_HEATER_MODE_OFF;
                break;
            case TC_HEATER_ACTIONS_SET_TO_ON:
                break;
            case TC_HEATER_ACTIONS_TEMPERATURE_CHANGE:
                break;
            case TC_HEATER_ACTIONS_THRESHOLD_CHANGE:
                break;
        }
        break;
    case TC_HEATER_MODE_AUTO_ON:
    case TC_HEATER_MODE_AUTO_OFF:
        switch(tc_action) {
            case TC_HEATER_ACTIONS_SET_TO_AUTO:
                break;
            case TC_HEATER_ACTIONS_SET_TO_OFF:
                s_current_heater_mode = TC_HEATER_MODE_OFF;
                break;
            case TC_HEATER_ACTIONS_SET_TO_ON:
                s_current_heater_mode = TC_HEATER_MODE_ON;
                break;
            case TC_HEATER_ACTIONS_TEMPERATURE_CHANGE:
                s_current_heater_mode = tc_update_auto_mode(s_current_heater_mode);
                break;
            case TC_HEATER_ACTIONS_THRESHOLD_CHANGE:
                s_current_heater_mode = tc_update_auto_mode(s_current_heater_mode);
                break;
        }
        break;
}</code></pre>
</div>

<p>It was very important to me that the thermostat worked on homekit, thankfully
there are already great homekit (hap) resources for the esp32. After some digging
I decided on this homekit package, as itâ€™s a clean port of the expressif homekit
library to arduino. There are about 15 different homekit frameworks for arduino,
so at some point I just had to choose one and start running.</p>

<p><img src="https://d33wubrfki0l68.cloudfront.net/09e7eb514a6c9878988e3897b1f9377a39d331c7/9fc55/images/homekit_thermostat/homekit.jpeg" alt="Homekit screenshot showing thermostat"></p>

<p>After a whole bunch of fucking around I managed to get my esp32 to show up as a thermostat from my phone.</p>

<p>A few gotchaâ€™s that I encountered along the way: (some specific to this library, some specific to homekit)</p>

<ul>
  <li>With this HomeKit library if you want to factory reset, you have to do it <em>after</em> you initialize. Also be sure to remove the device from homekit on your phone before factory resetting the device</li>
  <li>Be sure that you have unique id and pairing codes for your device, I have another esp32 on my homekit and they kept colliding</li>
  <li>Be sure that your device cid matches with the services you are providing, otherwise you will get annoying silent failures from homekit</li>
</ul>



<h2 id="making-things-pretty">Making things pretty</h2>

<p>After getting the code into a place I liked, all that was left was to make it
look less like a bomb strapped to my living room wall. I 3d printed an enclosure,
and soldered the correct wires in the correct places. Unfortunately my board
requires constant a 5V micro-usb power source, so as of right now I have it
powered off of a huge battery pack. Maybe in vN (for very large values of N)
I will go nest style with an internal LiPo and an AC-DC converter.</p>

<p><img src="https://d33wubrfki0l68.cloudfront.net/da9845e5838dba97dbae170da8ae49eb191c9b6f/089ad/images/homekit_thermostat/soldered.jpeg" alt="Soldered together">
<img src="https://d33wubrfki0l68.cloudfront.net/a2686592824334db4590b4affc52e706eb1acd91/cfae7/images/homekit_thermostat/enclosure.jpeg" alt="3d printed enclosure">
<img src="https://d33wubrfki0l68.cloudfront.net/3d6c45942a18d64daa989a8b0baf0f3ab706a833/aa250/images/homekit_thermostat/pretty.jpeg" alt="Enclosure mounted to wall and plugged in"></p>



<h2 id="whats-next">Whatâ€™s Next?</h2>

<p>I have already bought a few parts for a planned v2, so stay tuned. In v2 I will be adding:</p>

<ul>
  <li>New thermometer board (Going to use this overpriced adafruit breakout here <a href="https://www.amazon.com/gp/product/B00OKCQX96/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&amp;psc=1">https://www.amazon.com/gp/product/B00OKCQX96/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&amp;psc=1</a>)</li>
  <li>Adding a small status display OLED screen <a href="https://www.amazon.com/gp/product/B0833PF7ML/ref=ppx_yo_dt_b_asin_title_o01_s03?ie=UTF8&amp;psc=1">https://www.amazon.com/gp/product/B0833PF7ML/ref=ppx_yo_dt_b_asin_title_o01_s03?ie=UTF8&amp;psc=1</a></li>
  <li>Add a few buttons to allow non-phone control of the device <a href="https://www.amazon.com/gp/product/B0722LBKV7/ref=ppx_yo_dt_b_asin_title_o01_s00?ie=UTF8&amp;psc=1">https://www.amazon.com/gp/product/B0722LBKV7/ref=ppx_yo_dt_b_asin_title_o01_s00?ie=UTF8&amp;psc=1</a></li>
</ul>

<div>
    <p>

    Thanks for reading! If you want to stay updated feel free to follow the <a href="https://staycaffeinated.com/feed.xml">RSS feed</a>, if you have any suggestions feel free to email me at <a href="mailto:mdl0394@gmail.com">mdl0394@gmail.com</a></p><p>
    

    You could also submit your email here, and I will personally email you whenever I post new things:

    </p>
</div>

<h2 id="parts-used--other-references">Parts used / Other references</h2>

<ul>
  <li>Way too big of a relay: <a href="https://www.amazon.com/gp/product/B07KXNCL91/ref=ppx_yo_dt_b_asin_title_o08_s00?ie=UTF8&amp;psc=1">https://www.amazon.com/gp/product/B07KXNCL91/ref=ppx_yo_dt_b_asin_title_o08_s00?ie=UTF8&amp;psc=1</a></li>
  <li>ESP32 Doit Devkit v1 boards: <a href="https://www.amazon.com/gp/product/B07Q576VWZ/ref=ppx_yo_dt_b_asin_title_o08_s01?ie=UTF8&amp;psc=1">https://www.amazon.com/gp/product/B07Q576VWZ/ref=ppx_yo_dt_b_asin_title_o08_s01?ie=UTF8&amp;psc=1</a></li>
  <li>HomeKit framework esp-homekit-arduino-sdk <a href="https://github.com/Brawrdon/esp-homekit-arduino-sdk?utm_source=platformio&amp;utm_medium=piohome">https://github.com/Brawrdon/esp-homekit-arduino-sdk?utm_source=platformio&amp;utm_medium=piohome</a></li>
</ul>

    </div>
</div></div>]]>
            </description>
            <link>https://www.staycaffeinated.com/2020/12/27/building-my-own-homekit-thermostat-v1</link>
            <guid isPermaLink="false">hacker-news-small-sites-25552889</guid>
            <pubDate>Sun, 27 Dec 2020 18:06:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[SaaS We Happily Pay For]]>
            </title>
            <description>
<![CDATA[
Score 367 | Comments 175 (<a href="https://news.ycombinator.com/item?id=25552342">thread link</a>) | @frankdilo
<br/>
December 27, 2020 | https://francescodilorenzo.com/saas-we-pay-for | <a href="https://web.archive.org/web/*/https://francescodilorenzo.com/saas-we-pay-for">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><p>We try to run a lean operation at <a href="https://mailbrew.com/">Mailbrew</a>, but we are suckers for great tools that improve our daily workflows, so we pay for quite a few of them each month.</p>
<p>Being small (just 3 people), the cost of switching services is almost negligible, so we try new stuff regularly and do switch when we see a clear improvement.</p>
<p>Here is a list of everything we <em>happily</em> pay for.</p>
<h3><a href="https://missiveapp.com/">Missive</a></h3>
<p><strong>$15/month ⨉ 3 = $45/month.</strong></p>
<p>Collaborative email on top of G Suite. The main thing we pay for is a comment box below each email thread. It allows us to quickly discuss emails without forwarding or copy/pasting in Slack. It also allows us to edit drafts collaboratively and have multiple team inboxes for invoices, support, and other stuff.</p>
<p>We pay for the Productive plan because of one feature: Rules. They allow us to automatically categorize emails and be more granular with notifications. </p>
<h3><a href="https://www.notion.so/product">Notion</a></h3>
<p><strong>$8/month ⨉ 3 = $24/month.</strong></p>
<p>It's our team wiki. We write memos, meeting notes, drafts for blog posts, and everything that needs to be shared async for feedback. We also used to put tasks here but recently moved to Linear (more on this below).</p>
<p>It's an amazing value, but we were close to ditching it because of how slow it has become. We still have to find something that delivers the same great feature set and flexibility while improving speed and reliability.</p>
<h3><a href="https://linear.app/">Linear</a></h3>
<p><strong>$8/month ⨉ 3 = $24/month.</strong></p>
<p>We put our tasks here. It's a newcomer, but it's so good that we have already committed to it for a year. </p>
<p>It completely revolutionized the way we work with its flexibility, speed, customizability, and great GitHub integration.</p>
<p>If you connect it to GitHub and open a pull request with a task-specific name, task and PR get linked. When the PR is merged, the task is automatically marked as done.</p>
<p>I would invest in this company if I had the chance. It's so much better than everything else I ever tried in this space.</p>
<h3><a href="https://vercel.com/">Vercel</a></h3>
<p><strong>$20/month ⨉ 3 = $60/month.</strong></p>
<p>Vercel deploys and hosts our frontends and serverless functions.</p>
<p>It's a bit pricier than we'd like, and the pricing does not really make sense. Why do we have to pay per team member instead of build minutes, bandwidth, and compute?</p>
<p>With all that being said, we love the product philosophy, simplicity, and integration with GitHub. Having automatic deploys for all commits, together with automatic task-linking to Linear for PRs, is code-review Nirvana.</p>
<h3><a href="https://savvycal.com/">SavvyCal</a></h3>
<p><strong>$12/month ⨉ 2 = $24/month.</strong></p>
<p>We use it to schedule our calls. It's a better Calendly, made by a solo indie developer that we're happy to support.</p>
<p>The product is super-intuitive, and its feature set is increasing at a great pace with features that massively improve our workflows.</p>
<h3><a href="https://plausible.io/">Plausible Analytics</a></h3>
<p><strong>$12/month.</strong></p>
<p>It's a privacy-focused website analytics tool that replaces Google Analytics.</p>
<p>The most impressive thing is how better the insights we get from it are, thanks to some great UX, despite its privacy-respecting stance.</p>
<p>No surprise, they have been <a href="https://www.indiehackers.com/product/plausible-insights">growing like crazy</a>.</p>
<h3><a href="https://mailbrew.com/">Mailbrew</a></h3>
<p><strong>$10/month.</strong></p>
<p>We pay for this, even if we are the ones making it, to test our Stripe Integration.</p>
<p>We use Mailbrew to receive a couple of digests with dedicated Twitter Searches that keep us updated on social mentions of our product.</p>
<h3><a href="https://super.so/">Super</a></h3>
<p><strong>$12/month.</strong></p>
<p>This turns Notion documents into their own websites with a dedicated domain. We use it for our <a href="https://mailbrew.com/press">press kit</a> and <a href="https://help.mailbrew.com/">support docs</a>.  </p>
</article></div>]]>
            </description>
            <link>https://francescodilorenzo.com/saas-we-pay-for</link>
            <guid isPermaLink="false">hacker-news-small-sites-25552342</guid>
            <pubDate>Sun, 27 Dec 2020 16:59:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Remembering the Nanjing Massacre]]>
            </title>
            <description>
<![CDATA[
Score 57 | Comments 17 (<a href="https://news.ycombinator.com/item?id=25552140">thread link</a>) | @Beggers1960
<br/>
December 27, 2020 | https://ramblinghistory.co.uk/2020/12/11/nanjing-massacre-remembered/ | <a href="https://web.archive.org/web/*/https://ramblinghistory.co.uk/2020/12/11/nanjing-massacre-remembered/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-449">

	<!-- .entry-header -->

	<div>
		


<p><img loading="lazy" data-attachment-id="464" data-permalink="https://ramblinghistory.co.uk/2020/12/11/nanjing-massacre-remembered/ija_10th_army_entering_nanking/" data-orig-file="https://rossk1992.files.wordpress.com/2020/12/ija_10th_army_entering_nanking.jpg" data-orig-size="950,633" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="IJA_10th_Army_entering_Nanking" data-image-description="" data-medium-file="https://rossk1992.files.wordpress.com/2020/12/ija_10th_army_entering_nanking.jpg?w=300" data-large-file="https://rossk1992.files.wordpress.com/2020/12/ija_10th_army_entering_nanking.jpg?w=748" src="https://rossk1992.files.wordpress.com/2020/12/ija_10th_army_entering_nanking.jpg" alt="Nanjing Massacre" width="748" height="498" srcset="https://rossk1992.files.wordpress.com/2020/12/ija_10th_army_entering_nanking.jpg?w=748&amp;h=498 748w, https://rossk1992.files.wordpress.com/2020/12/ija_10th_army_entering_nanking.jpg?w=150&amp;h=100 150w, https://rossk1992.files.wordpress.com/2020/12/ija_10th_army_entering_nanking.jpg?w=300&amp;h=200 300w, https://rossk1992.files.wordpress.com/2020/12/ija_10th_army_entering_nanking.jpg?w=768&amp;h=512 768w, https://rossk1992.files.wordpress.com/2020/12/ija_10th_army_entering_nanking.jpg 950w" sizes="(max-width: 748px) 100vw, 748px"></p>
<p>In 1937, before a shot was even fired in Europe, Imperial Japanese forces were engaged in a long, bloody conflict in China – and it is during this period that we catch a glimpse of the atrocities that would stain the 1940s.&nbsp;</p>
<p>The event, or series of events, we are looking at today is the Japanese occupation of Nanjing, commonly referred to as the ‘Rape of Nanjing’.</p>



<p>Anyone with a modicum of knowledge on the Second World War will know of the atrocities committed by Imperial Japanese forces. Their atrocious treatment of PoW’s and civilians throughout South East Asia, Oceania and China are well documented. Several years before those times however, when Japanese forces entered Nanjing, they let loose upon the people there.</p>
<h4>Crashing dominoes&nbsp;</h4>
<p>In the weeks preceding the Japanese occuptation of Nanjing, there had been bloody fighting between Chinese forces and Imperial Japanese troops. Indeed, for several years, the Imperial Japanese Army had been involved in a tit-for-tat conflict against both Communist and nationalist Chinese forces.</p>
<p>In August 1937, the <a href="https://en.wikipedia.org/wiki/Battle_of_Shanghai" target="_blank" rel="noopener">Battle of Shangai</a> set into motion a series of events that would lead to disaster for Chinese forces and civilians throughout the country. The Battle of Shanghai was a visceral, bloody engagement for both sides. However, by mid-November, Imperial Japanese forces had captured and subjugated the area.&nbsp;</p>
<figure data-shortcode="caption" id="attachment_462" aria-describedby="caption-attachment-462"><img loading="lazy" data-attachment-id="462" data-permalink="https://ramblinghistory.co.uk/2020/12/11/nanjing-massacre-remembered/japanese_marines_during_the_battle_of_shanghai_1937/" data-orig-file="https://rossk1992.files.wordpress.com/2020/12/japanese_marines_during_the_battle_of_shanghai_1937.jpg" data-orig-size="510,352" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Japanese_marines_during_the_Battle_of_Shanghai,_1937" data-image-description="" data-medium-file="https://rossk1992.files.wordpress.com/2020/12/japanese_marines_during_the_battle_of_shanghai_1937.jpg?w=300" data-large-file="https://rossk1992.files.wordpress.com/2020/12/japanese_marines_during_the_battle_of_shanghai_1937.jpg?w=510" src="https://rossk1992.files.wordpress.com/2020/12/japanese_marines_during_the_battle_of_shanghai_1937.jpg" alt="" width="510" height="352" srcset="https://rossk1992.files.wordpress.com/2020/12/japanese_marines_during_the_battle_of_shanghai_1937.jpg 510w, https://rossk1992.files.wordpress.com/2020/12/japanese_marines_during_the_battle_of_shanghai_1937.jpg?w=150&amp;h=104 150w, https://rossk1992.files.wordpress.com/2020/12/japanese_marines_during_the_battle_of_shanghai_1937.jpg?w=300&amp;h=207 300w" sizes="(max-width: 510px) 100vw, 510px"><figcaption id="caption-attachment-462">Japanese marines advance during the Battle of Shanghai.</figcaption></figure>
<p>Despite sustaining heavy casualities after weeks of fighting, Japanese forces of the Central China Area Army and 10th Army were ordered to capture the city of Nanjing and the surrounding area. The subsequent advance prompted hysteria among Chinese civilians and military forces, with thousands of the latter desperately trying to avoid capture.&nbsp;</p>
<h4>Cry havoc! and let slip the dogs of war</h4>







<p>Upon entering the city, Japanese forces appear to enter a feral state, abandoning all reason and humanity and embarking on a campaign of terror, abuse and murder against the people of the old Chinese capital.</p>



<p>A truly ghastly affair, and throughout we see sadistic methods and practices by Japanese troops. Groups of individuals were buried alive, some were burned alive, and the lucky ones were simply executed en-masse.</p>



<p>Beheadings were commonplace throughout this event, and there are accounts (although hotly debated) of ‘contests’ between Japanese officers to see who could behead 100 people in the shortest time.</p>





<p>In 1937, Japanese media covered the story of Toshiaki Mukai and Tsuyoshi Noda of the Japanese 16th Division, who were both vying to reach this goal of 100 beheadings. Throughout the course of the war these two men are alleged to have murdered over 300 people between them, and upon Japan’s surrender in 1945 the officers were tried and executed for war crimes.</p>



<p>While crimes were being committed against the civilian population, scores of Chinese prisoners of war were ruthlessly executed. The execution of prisoners of war were also particularly sadistic and brutal.</p>



<p>Countless PoW’s were hanged, shot and beheaded, with many more being buried alive alongside civilians. To this day the number of Chinese PoW’s executed is still unknown.</p>
<figure data-shortcode="caption" id="attachment_458" aria-describedby="caption-attachment-458"><img loading="lazy" data-attachment-id="458" data-permalink="https://ramblinghistory.co.uk/2020/12/11/nanjing-massacre-remembered/iwane_matsui_rides_into_nanjing/" data-orig-file="https://rossk1992.files.wordpress.com/2020/12/iwane_matsui_rides_into_nanjing.jpg" data-orig-size="498,360" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Iwane_Matsui_rides_into_Nanjing" data-image-description="" data-medium-file="https://rossk1992.files.wordpress.com/2020/12/iwane_matsui_rides_into_nanjing.jpg?w=300" data-large-file="https://rossk1992.files.wordpress.com/2020/12/iwane_matsui_rides_into_nanjing.jpg?w=498" src="https://rossk1992.files.wordpress.com/2020/12/iwane_matsui_rides_into_nanjing.jpg" alt="Nanking Massacre" width="498" height="360" srcset="https://rossk1992.files.wordpress.com/2020/12/iwane_matsui_rides_into_nanjing.jpg 498w, https://rossk1992.files.wordpress.com/2020/12/iwane_matsui_rides_into_nanjing.jpg?w=150&amp;h=108 150w, https://rossk1992.files.wordpress.com/2020/12/iwane_matsui_rides_into_nanjing.jpg?w=300&amp;h=217 300w" sizes="(max-width: 498px) 100vw, 498px"><figcaption id="caption-attachment-458">General Iwane Matsui rides into Nanjing.</figcaption></figure>
<h4>Accounts by westerners</h4>



<p>As hostilities had not yet erupted between western nations and Japan, there were a range of western civilians in the city during this event, and their accounts of the actions of Japanese soldiers are harrowing.</p>



<p>A surgeon, Robert O. Wilson, in the university hospital within the US safety zone, wrote home on several occasions detailing the events unfolding before his eyes.</p>



<p>“The slaughter of civilians is appalling. I could go on for pages telling of cases of rape and brutality almost beyond belief,” he wrote. “Two bayoneted corpses are the only survivors of seven street cleaners who were sitting in their headquarters when Japanese soldiers came in without warning and killed five of their number and wounded the two that found their way to the hospital.”</p>
<p>The Minnie Vautrin Diary detailing atrocities provides some of the most compelling and harrowing accounts of the Nanjing Massacre. Excerpts detailing what she witnessed can be found online, or the diary itself can be purchased.</p>



<p>In her diary she details the callous brutality of Japanese soldiers and, in particular, their treatment of Chinese women.</p>



<p>“A woman of almost 50 living down near San Pai Lou.&nbsp;She had three sons and two daughters-in-law. Four nights ago two soldiers came to the door at about 10pm, unable to push the door they forced their way in through a window and found themselves in Liu Lau Tai’s room.</p>





<p>“They demanded her daughters-in-law and when she refused and started to go for a military police they cut two gashes in her face and one in her heart.&nbsp;She died from these wounds.”</p>





<h4>Age old barbarism</h4>



<p>Japanese soldiers employed an age old weapon against the people of Nanjing, rape. Assault on women throughout the Nanjing Massacre were widespread and anywhere up to 20,000 women and girls were raped and brutalised.</p>







<p>John Rabe, leader of the Nanjing Safety Zone details his experiences in dealing with these cases during his time in the city.</p>



<p>“In one of the houses in the narrow street behind my garden wall, a woman was raped, and then wounded in the neck with a bayonet. I managed to get an ambulance so we can take her to Kulou Hospital.</p>





<p>“Last night up to 1,000 women and girls are said to have been raped, about 100 girls at Ginling College alone.</p>



<p>“You hear nothing but rape. If husbands or brothers intervene, they’re shot. What you hear and see on all sides is the brutality and bestiality of the Japanese soldiers.”</p>
<figure data-shortcode="caption" id="attachment_460" aria-describedby="caption-attachment-460"><img loading="lazy" data-attachment-id="460" data-permalink="https://ramblinghistory.co.uk/2020/12/11/nanjing-massacre-remembered/nanking_bodies_1937/" data-orig-file="https://rossk1992.files.wordpress.com/2020/12/nanking_bodies_1937.jpg" data-orig-size="800,559" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Nanking_bodies_1937" data-image-description="" data-medium-file="https://rossk1992.files.wordpress.com/2020/12/nanking_bodies_1937.jpg?w=300" data-large-file="https://rossk1992.files.wordpress.com/2020/12/nanking_bodies_1937.jpg?w=748" src="https://rossk1992.files.wordpress.com/2020/12/nanking_bodies_1937.jpg" alt="Nanjing Massacre" width="748" height="523" srcset="https://rossk1992.files.wordpress.com/2020/12/nanking_bodies_1937.jpg?w=748&amp;h=523 748w, https://rossk1992.files.wordpress.com/2020/12/nanking_bodies_1937.jpg?w=150&amp;h=105 150w, https://rossk1992.files.wordpress.com/2020/12/nanking_bodies_1937.jpg?w=300&amp;h=210 300w, https://rossk1992.files.wordpress.com/2020/12/nanking_bodies_1937.jpg?w=768&amp;h=537 768w, https://rossk1992.files.wordpress.com/2020/12/nanking_bodies_1937.jpg 800w" sizes="(max-width: 748px) 100vw, 748px"><figcaption id="caption-attachment-460">Bodies littered the shore of the Qinhuai River.</figcaption></figure>



<h4>Relenting troops</h4>



<p>In January of 1938, after several weeks of bloodletting, refugees within the safety zones were ordered to return to their homes.</p>



<p>Japanese officials claimed at the time that ‘order had been restored’ and that daily life were to continue as normal. For the people of Nanjing subjected to relentless bouts of violence, however, life would never be the same again.</p>



<p>As order was gradually restored, the frequency of attacks and atrocities did dissipate.</p>
<h4>Guilt</h4>



<p>General Iwane Matsui, leader of the Japanese Expeditionary Force in China, began to realise the extent of the atrocities being committed by his men in Nanjing – albeit too late.</p>



<p>Speaking of his knowledge on the atrocities being committed, he is claimed to have stated to an aide:</p>



<p>“I now realise that we have unknowingly wrought a most grievous effect on this city. When I think of the feelings and sentiments of many of my Chinese friends who have fled from Nanjing and of the future of the two countries, I cannot but feel depressed.</p>



<p>“I am very lonely and can never get in a mood to rejoice about this victory … I personally feel sorry for the tragedies to the people, but the Army must continue unless China repents.</p>



<p>“Now, in the winter, the season gives time to reflect. I offer my sympathy, with deep emotion, to a million innocent people.”</p>



<p>Although an apparent admission of guilt on his part, Matsui’s lack of action on the issue, his burying of the head in sand, simply allowed the ordeal to continue far longer than it did.</p>



<p>Matsui was recalled to Japan following the massacre and retired. Upon Japan’s surrender in 1945, he was tried by the International Military Tribunal for the Far East and is executed.</p>



<h4>Aftermath</h4>



<p>The death toll in Nanjing is debated. Contemporary Japanese statistics could be considered laughable, amounting to only several hundred dead. A range of sources estimate that anywhere between 30,000 to 300,000 people were murdered during this month-long tirade of violence.</p>
<p>Modern Chinese sources (in particular the Chinese Government) claim that these numbers range even higher and are, in fact, closer to half-a-million.</p>




<p>The Nanjing War Crimes Tribunal in 1947 stated:</p>



<p>“More than 190,000 mass slaughtered civilians and Chinese soldiers killed by machine gun by the Japanese army, whose corpses have been burned to destroy proof.</p>



<p>“Besides, we count more than 150,000 victims of barbarian acts buried by the charity organisations. We thus have a total of more than 300,000 victims.”</p>



<p>Researchers state that the death toll numbers between 40,000 and 60,000 based on a number of sources from the time, including Red Army statistics and the Nanjing Safety Zone committee.</p>



<p>Regardless of the true number of casualties, the barbarism and horrific nature of this event are beyond comprehension. The callous behaviour of Japanese soldiers is a stain on the tapestry of 20th century history, and this behaviour continued for another several years until Japanese capitulation in the wake of Hiroshima &amp; Nagasaki.</p>


			
			
						</div><!-- .entry-content -->

	<!-- .entry-footer -->

</article></div>]]>
            </description>
            <link>https://ramblinghistory.co.uk/2020/12/11/nanjing-massacre-remembered/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25552140</guid>
            <pubDate>Sun, 27 Dec 2020 16:36:15 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A New Google]]>
            </title>
            <description>
<![CDATA[
Score 38 | Comments 3 (<a href="https://news.ycombinator.com/item?id=25552030">thread link</a>) | @smusamashah
<br/>
December 27, 2020 | https://dcgross.com/a-new-google | <a href="https://web.archive.org/web/*/https://dcgross.com/a-new-google">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>   <p>[TL;DR: Google has gotten bad; we all know it; ideas for a startup making a better Google.]</p> <p>In 2000, Google got popular because hackers realized it was better than Lycos or Excite. This effect is happening again. Early adopters aren’t using Google anymore.</p> <p>They aren’t using DuckDuckGo either. They’re still using Google.com, but differently. To make Google usable, users are adding faux-query modifiers that to supress the “garbage Internet”.</p> <p>You see this in the typeahead logs.</p> <p><img src="https://dcgross.com/assets/new-google/image6.png" alt=""> <em></em></p><center><em>Products (Reddit)</em></center> <p><img src="https://dcgross.com/assets/new-google/image4.png" alt=""> <em></em></p><center><em>Services (Reddit, Yelp)</em></center> <p><img src="https://dcgross.com/assets/new-google/image1.png" alt=""> <em></em></p><center><em>Movies (Rotten Tomatoes)</em></center> <p><img src="https://dcgross.com/assets/new-google/image5.png" alt=""> <em></em></p><center><em>Even code (Github)</em></center> <p>Interestingly, this doesn’t work for all categories. <img src="https://dcgross.com/assets/new-google/image3.png" alt=""> <img src="https://dcgross.com/assets/new-google/image2.png" alt=""> <em></em></p><center><em>Recipes don’t have a “Reddit” equivalent</em></center> <h3 id="query-operators-mean-somethings-broken">Query Operators Mean Something’s Broken</h3> <p>More advanced users use modifiers like <code>site: filetype: intitle:</code> because adding “reddit” isn’t strict enough, as spammy websites often manipulate content to win SEO.</p> <p>How about those websites that stuff the year in the title? “Reviews UPDATED JANUARY 2020” are exploiting the fact that customers suffix queries with the year. What those people are trying to command is freshness, not a title match.</p> <p>Something’s broken, and a tiny share of Google is open for the taking. Obviously attacking incumbents head-on doesn’t work. Here are two alternative ideas for bootstrapping next-generation search:</p> <h3 id="1-boogle-a-query-reformulator">#1 Boogle, A Query Reformulator</h3> <p>Introducing Boogle, a proxy for Google that’s just Better Google Search. It’s a query expander. We predict the correct operators for your query, proxy Google’s results, and serve. For example:</p> <p><code>query("stripe.js example") -&gt; query("stripe.js example (site:github.com OR site:gitlab.com OR site:..."))</code></p> <p><code>query("is anker charger") -&gt; query("is anker charger (inurl:forum OR site:reddit.com OR ...))"</code></p> <p>Query topic modeling is a rich science with plenty of examples.</p> <p>You’d almost as fast as Google, never worse, and occasionally better. This will help build the reflex to use you instead. This approach isn’t that hard to get started with, and might work for the high-end users.</p>  <p>You could go after this vertical by vertical – build the <em>best</em> site for electric product search, for travel, for code, etc. A key question is how to build habitual recall to use your product over Google. Amazon and Airbnb both enjoy a huge amount of direct traffic. Some learnings from those:</p> <ul> <li><strong>Stellar mobile destination.</strong> Using Airbnb directly feels more fluid and fun than using Google for Airbnb.</li> <li><strong>The 90% Rule.</strong> To build reflex you need to give me what I want most of the time.** **With Prime, Amazon made it such that we stopped price comparing across other sites; Amazon would get it to us fastest, and that turns out to matter more than price. Most of the time you open Amazon.app, it satisfies.</li> <li><strong>Come for search, stay for something else.</strong> I don’t think of Airbnb or Amazon as search apps. They help me get things or book homes. You might want to your search app to be a destination for something else. This is where I think community comes in.</li> </ul> <p>Picking a vertical that <em>doesn’t</em> have strong typeahead completions[1] would help you build community around your search engine. Recipes, fitness, fashion, etc. don’t have decacorn conglomerates like Github or Reddit. That might mean it’s easier to build community around them, and put your flagship search engine on top.</p> <hr> <p>If you’re working on this kind of stuff, try out <a href="https://pioneer.app/">Pioneer</a> or just shoot me an email – daniel@pioneer.app.</p> <hr> <p>[1] In reality I’d pick the vertical _I _love most. If you’re a guitar player start with music; a movie buff should build better Rotten Tomatos. Etc.</p> </article></div>]]>
            </description>
            <link>https://dcgross.com/a-new-google</link>
            <guid isPermaLink="false">hacker-news-small-sites-25552030</guid>
            <pubDate>Sun, 27 Dec 2020 16:23:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Conversation with Bruce Schneier [video]]]>
            </title>
            <description>
<![CDATA[
Score 13 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25551599">thread link</a>) | @sasvari
<br/>
December 27, 2020 | https://media.ccc.de/v/rc3-11473-conversation_with_bruce_schneier | <a href="https://web.archive.org/web/*/https://media.ccc.de/v/rc3-11473-conversation_with_bruce_schneier">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">



<div>

<p>
<span></span>
<a href="https://media.ccc.de/search?p=Bruce+Schneier">Bruce Schneier</a> and
<a href="https://media.ccc.de/search?p=frank">frank</a>

</p><p>
No content found (yet?).
</p>
<!-- %h3 About -->
<p>Live Conversation with Bruce Schneier. Audience questions can be submitted via chat and have a chance to be asked by moderator Frank Rieger.</p>

<p>Topics:
<br>• Actual and perceived role of cryptography in our world
<br>• The recent latest chapter in the eternal CryptoWars
<br>• Core problems of IT-security and why nobody solves them
<br>• The digital sphere as a freefire battlefield for state and nonstate actors
<br>• Technological, legal and political leverages to prevent total surveillance</p>

<h3>Download</h3>

<!-- %h3 Embed/Share -->

<h3>Tags</h3>

</div>





</div>]]>
            </description>
            <link>https://media.ccc.de/v/rc3-11473-conversation_with_bruce_schneier</link>
            <guid isPermaLink="false">hacker-news-small-sites-25551599</guid>
            <pubDate>Sun, 27 Dec 2020 15:21:15 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Central Bank Digital Currencies Are a Bad Idea]]>
            </title>
            <description>
<![CDATA[
Score 76 | Comments 164 (<a href="https://news.ycombinator.com/item?id=25550443">thread link</a>) | @simonebrunozzi
<br/>
December 27, 2020 | https://www.forgac.me/blog/2020/11/17/three-reasons-why-central-bank-digital-currencies-are-a-bad-idea | <a href="https://web.archive.org/web/*/https://www.forgac.me/blog/2020/11/17/three-reasons-why-central-bank-digital-currencies-are-a-bad-idea">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div data-layout-label="Post Body" data-type="item" data-updated-on="1605643941671" id="item-5fb42c70669e655a2de5be01"><div><div><div data-block-type="2" id="block-36140108062efd62704e"><div><p><em>This text was published at </em><a href="https://mises.org/wire/why-central-bank-digital-currencies-are-bad-idea"><em>Mises Institute</em></a></p><p>The Central Banking Digital Currencies (CBDC) are being sold with the narrative of protecting consumers who are increasingly moving to cashless payments and as a result, robbing themselves of the privacy advantages of cash and exposing themselves to bank runs, payment network blackouts, and to foreign financial adversaries.</p><p>While these risks are real, they would be negligible had it not been for the central banking and financial regulators’ interventions into the market (more on that in the last couple of paragraphs), and CBDCs if anything make them worse and introduce some new, much bigger ones.</p><p>While the stated intention behind their design is to keep the commercial banks in the picture, CBDCs will bring the end-users of the future tokens closer to the central banks. This is because blockchains and blockchain-inspired distributed ledger technologies are built on a single, common, ledger, which is distributed either in a permissionless or permissioned manner. The permissionless distribution exposes a lot of information about the network participants, but in combination with proof-of-work verification makes it very difficult for an adversary to attack and overtake the network and e.g. change the inflation rate.</p><p>Permissioned network with no proof-of-work or similar consensus algorithm not only doesn’t provide the immutability feature but by having a single permissioned ledger gives potential control to those who grant the network privileges. As a result, the central bank as the ultimate permission issuer would have much stronger control over the monetary system and payment network than they have right now. This gives the central banks three very dangerous capabilities.</p><h2>Helicopter Money</h2><p>The reason why we’ve seen such an elevated business cycle over the past century is the central banking fiat money system. Unnatural expansion of the money supply causes booms, which are unsustainable and markets try to clear them when they are exposed as such.</p><p>Economists of the Austrian school understand, that the boom is the real problem and the economic crisis is the necessary and positive cleansing mechanism. Unfortunately, the (neo)Keynesian response to such an event is to prop the markets up by further monetary interventions.</p><p>However, the current design of the banking system requires the intermediary role of commercial banks in issuing credit to businesses. Central banks get frustrated when the commercial banks exercise caution in an economy, which hasn’t fully cleared the previous misallocations and hasn’t brought prices of capital goods to more sustainable levels.</p><p>Furthermore, since the predominant Keynesian narrative is that spending drives the economy (hint: it doesn’t - capital investments do), the central banks would like to spur more consumer spending by issuing money supply directly to consumers. Needless to say, commercial banks’ cautious approach to consumer credit in a period of growing unemployment doesn’t align well with the central bank’s goals either. During the COVID crisis, the governments managed to an extent to get around these hurdles by issuing benefits en masse, but those are complicated by logistics, bureaucracy, or legislation.</p><p>By closer integration of the monetary spigot to the end consumers and businesses, the central bank can much more easily issue credit, or just outright cashouts to the private individuals and commercial entities by simply “airdropping” new tokens to the existing token identities. They would not even compromise their stated intention of keeping the commercial banks in the picture - those would still serve as custodians of the token keys, and even have the ability to issue credit along the traditional lines.</p><p>This would lead to disastrous consequences. Economies get easily addicted to central banks’ money dope. With every new crisis, the chief monetarists had to increase intervention doses the same way as junkies have to do with their drug of choice. As with every addiction, the longer it lasts and the stronger it grows, the more difficult it is to cure it. And while monetary overdose such as we’ve seen in Zimbabwe or Venezuela might not come for a long time, if ever, junkies don’t perform well, as Japan’s three lost decades of BOJ’s interventions have demonstrated.</p><h2>Negative Interest Rates</h2><p>Hoarding is evil - or so the modern monetarists’ narrative goes. In the Keynesian framework, there is no space for the function of cash as a hedge in times of uncertainty. Savings accounts, in their minds, are just money that doesn’t work in spurring the miracles of spending- and monetary-driven economic growth. Negative interest rates are then potentially the most effective method of preventing hoarding by incentivizing account holders to spend their depreciating balances.</p><p>Currently, the central banks have to rely on commercial banks to pass the negative interest rates on their customers. Commercial banks instead are trying to convince the account holders to move their deposits from negative yielding accounts to interest yielding products and are consuming the negative rates on most of the outstanding cash balances.</p><p>With the central bank tokens being tied more tightly with their issuance authority, it would be much easier for the monetary interventionists to impose negative interest rates on all tokens in circulation. This would on a margin certainly increase the consumers’ and businesses’ propensity to spend and would also drive asset prices up as people would try to offload their cash savings. But to think of it as something beneficial is foolish. It was massive spending, record-low savings, and unsustainable asset valuations that led to the credit bubbles and crises of the past decades. To think that more of the same recipe would lead to a different, let alone better outcome is ludicrous.</p><h2>Financial Surveillance</h2><p>Third and final major implication of cash tokenization is the potential it creates for financial surveillance. The central banks are ostensibly introducing digital tokens to protect people’s privacy in the face of those reducing their anonymous cash usage. But the idea that any branch of government, let alone the one that imposes KYC/AML rules on the existing crypto token platforms, limits physical cash use to prevent tax avoidance, and uses financial surveillance to catch non-violent “criminals” cares about our privacy is laughable.</p><p>They’re not even hiding the fact, that tokenization of money would allow them to run what they call “data analytics”, but to think that they would not make the leap from aggregate analytics to individual data processing would be naive.</p><p>Of course, it’s not a coincidence, that China is the global leader in CBDCs. The surveillance potential of centralized tokenization is extremely attractive to the government that tries to keep tabs on every aspect of the lives of their underlings.</p><p>The proponents of the central banking tokens argue, that consumers need to be protected against targeted attacks on a country’s payment network. While such a risk exists - for example, if a country like Switzerland tried to provide anonymity for foreign depositors as it used to and as a result Visa and Mastercard would be pressured to shut down their payment networks for the country - if it materializes, the economy can always temporarily revert back to cash, supported by a vast network of local ATMs and bank branches.</p><p>If anything, the biggest attacks on the monetary exchange in the western world came from the governments themselves suspending or limiting cash withdrawals in times of liquidity crises as was the case in Cyprus or Greece, not to mention that those crises themselves were caused by central banking credit bubbles of the preceding periods.</p><p>Finally as was already mentioned, the argument about the protection of consumer privacy doesn’t pass the laugh test considering the history of continuous erosion of financial privacy by central banks and financial regulators.</p><p>In conclusion, the same characteristics for which people should oppose the transition to CDBCs give central banks the strongest reason to champion and implement them. And while the pretense of an investigation into the fiat money tokenization gives an impression of a debate on the topic, the reality is, there will be no debate and the digital currencies will go through and give central banks more control than they had before with all the disastrous consequences such control brings.</p></div></div></div></div></div></div></div>]]>
            </description>
            <link>https://www.forgac.me/blog/2020/11/17/three-reasons-why-central-bank-digital-currencies-are-a-bad-idea</link>
            <guid isPermaLink="false">hacker-news-small-sites-25550443</guid>
            <pubDate>Sun, 27 Dec 2020 11:57:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Remote Chaos Communication Congress – Streams]]>
            </title>
            <description>
<![CDATA[
Score 211 | Comments 27 (<a href="https://news.ycombinator.com/item?id=25549762">thread link</a>) | @doener
<br/>
December 27, 2020 | https://streaming.media.ccc.de/rc3/ | <a href="https://web.archive.org/web/*/https://streaming.media.ccc.de/rc3/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://streaming.media.ccc.de/rc3/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25549762</guid>
            <pubDate>Sun, 27 Dec 2020 08:42:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Start Contributing to Open Source Software]]>
            </title>
            <description>
<![CDATA[
Score 27 | Comments 18 (<a href="https://news.ycombinator.com/item?id=25547724">thread link</a>) | @fagnerbrack
<br/>
December 26, 2020 | https://markushatvan.com/blog/why-you-should-start-contributing-to-open-source-software-right-now | <a href="https://web.archive.org/web/*/https://markushatvan.com/blog/why-you-should-start-contributing-to-open-source-software-right-now">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><figure> <figcaption>I know you want to. - Photo by Author </figcaption></figure> <p>You might not be aware of it, but you use some form of open source software every single day.</p> <p>Every time you start an app on your phone or launch a program on your computer, you profit from the code that someone has written for free.</p> <p>WordPress, the largest and most well-known content management system, is used by <a href="https://w3techs.com/technologies/details/cm-wordpress" rel="nofollow">38% of all websites</a> worldwide. It is open source and free to use.</p> <p>Linux is powering <a href="https://w3techs.com/technologies/details/os-linux" rel="nofollow">30% of all websites</a> globally. It is open source and free to use.</p> <p>These are just two examples out of a myriad of projects which were created to solve a problem or serve a use case.</p> <p>These projects became highly popular as communities formed around them. They tried to deliver the best product possible in terms of user experience, stability, security, and more.</p> <p>But not only the usage of open source projects is rising. The participation in the open source movement as a whole is growing as well.</p> <p>According to the <a href="https://octoverse.github.com/" rel="nofollow">State of the Octoverse report</a> by GitHub, out of more than 40 million developers on GitHub, 10 million new&nbsp;users joined in 2019 alone!</p> <p>The open source movement is growing quickly and you should become a part of it too.</p> <p>Whenever I see a new update for my operating system or new software releases of tools that I actively use every day, it makes me smile. I enjoy the thought of products continuously getting better and more sophisticated.</p> <p>Do you feel the same way?</p> <p>Here is why I am convinced that you should start contributing to open source software right now.</p> <h2>You can learn a lot from the source code</h2> <p>Since the source code in open source projects is available for anyone to read, that means that a large number of developers can battle-test and improve a project.</p> <p>Developers point out privacy or security issues, update the documentation, and improve source code to the newest web development standards all the time.</p> <p>Especially when you go through the code of projects with hundreds or even thousands of contributors, you can gain immense knowledge about best practices and code quality.</p> <p>Not only is reviewing the code itself a learning experience, but also the structure and folder hierarchy in larger projects is well thought-out and works well in the long run.</p> <h2>You will work with the smartest people</h2> <p>Compared to a company that has a limited number of employees to work on feature requests and bug fixes, you have the brightest minds working in open source development.</p> <p>In my imagination, I see it as swarm intelligence, which can solve every problem that arises.</p> <p>The more people that join a community, the better a project can scale. It can be like a buzzing beehive, where you could have pull requests to a codebase from users all around the world 24/7, non-stop.</p> <p>A good example is the well-known code editor <a href="https://github.com/microsoft/vscode" rel="nofollow">Visual Studio Code</a> which got very popular with a total of 1,200+ contributors on GitHub.</p> <p>You won’t see a single day without any pull requests on GitHub and the monthly release cycles always bring out new amazing features.</p> <p>When you participate in a project and submit a pull request, you will receive extremely helpful feedback from highly experienced maintainers. You can then implement that feedback to grow as a developer.</p> <h2>Your own code could be used globally</h2> <p>Since some software development projects are used by millions of users daily, it can be very rewarding to see your own code helping so many people.</p> <p>I wrote lint rules for the JavaScript projects called <a href="https://github.com/sindresorhus/eslint-plugin-unicorn" rel="nofollow">eslint-plugin-unicorn</a> and <a href="https://github.com/sveltejs/svelte" rel="nofollow">svelte</a>. It’s a great feeling knowing that my pull request will improve the code quality of many developers all around the world.</p> <p>From my personal experience, it is also motivating to get positive feedback in the form of a thankful comment.</p> <h2>Open source projects are inclusive</h2> <p>A great advantage of free open source software is that no one is excluded from using the product because they can’t afford it.</p> <p>While some open source projects cost money to use, most do not.</p> <p>Also, when you’re contributing to a project on GitHub, many of the bigger repositories have a code of conduct. These make sure that every contributor feels welcome and accepted in a project.</p> <h2>Projects are starting to become sustainable</h2> <p>The main goal of a company is to become profitable - which often leads to questionable decisions. But open source software focuses on solving the needs of its users as the highest priority.</p> <p>Most projects are entirely volunteer-supported, and project maintainers will unfortunately never see any financial reward. But there are great ways nowadays that you can help make these projects sustainable.</p> <p>With websites like <a href="https://opencollective.com/" rel="nofollow">OpenCollective</a>&nbsp;or <a href="https://github.com/sponsors" rel="nofollow">GitHub Sponsors</a>, you can donate to speed up the development of projects that you like.</p> <p>Personally, I think that it would be great if every company donated at least a small sum to open source software projects because they profit from these tools daily. Such support would reduce the stress for a lot of maintainers and some could even take up the work full-time.</p> <h2>How to contribute to open source</h2> <p>Contributing to open source development sounds more scary than it really is. There are plenty of projects out there on GitHub which encourage first time contributors and newbies to take action by labeling issues as “Good first issue”, “Beginner friendly” or “Help wanted”.</p> <p>Don’t know where to start?</p> <p>Ask yourself: what is an application that you enjoy using every day and where you would want to give back?</p> <p>It can be as simple as searching for that application on GitHub and looking through the open issues.</p> <p>It doesn’t have to be a code contribution, either - you can also help out by creating a pull request to update the documentation, fix typos that you find, or by doing a thorough code review.</p> <p>The <code>README.md</code> file of a project usually includes a passage of how to contribute.</p> <p>If you decide to contribute to a project, I recommend reading my article about&nbsp;<a href="https://markushatvan.com/blog/contributing-to-open-source-projects-the-right-way">Contributing To Open Source Projects The Right Way</a>. It’s a detailed step-by-step guide about the contribution workflow.</p> <p>I wrote it to be very beginner friendly, so don’t worry about becoming overwhelmed. You will be able to find your first project and submit a contribution in no time!</p> <h2>Wrapping up</h2> <p>It always impressed me that everyone in the world can join an open source software project and work on it.</p> <p>And open source software only works as a collaborative effort. The goal is to produce the best product or service without compromising on important factors like stability, security, or user privacy.</p> <p>I hope you understand the importance of open source software and that you value its benefits. No matter what your reasons are for giving back to the open source community, just know that you are highly appreciated!</p> <p>Many projects can only thrive with support and contributions from developers like you.</p> <h2>Helpful resources</h2> <ul><li><a href="https://octoverse.github.com/" rel="nofollow">The State of the Octoverse</a></li> <li><a href="https://opensource.com/resources/what-open-source" rel="nofollow">What is open source?</a></li> <li><a href="https://clearcode.cc/blog/why-developers-contribute-open-source-software/" rel="nofollow">What Motivates a Developer to Contribute to Open-Source Software?</a></li></ul> <div><p><b>If you liked this post, share it:</b></p> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmarkushatvan.com%2Fblog%2Fwhy-you-should-start-contributing-to-open-source-software-right-now" rel="noopener noreferrer" target="_blank" title="Share on Facebook"><svg height="24" role="presentation" style="font-size:1.5em" version="1.1" viewBox="0 0 512 512" width="24"> <path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z" key="path-0"></path> </svg></a> <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fmarkushatvan.com%2Fblog%2Fwhy-you-should-start-contributing-to-open-source-software-right-now&amp;title=Why%20You%20Should%20Start%20Contributing%20to%20Open%20Source%20Software%20Right%20Now&amp;summary=The%20open%20source%20movement%20is%20growing%20quickly%20and%20you%20should%20become%20a%20part%20of%20it%20too.&amp;source=LinkedIn" rel="noopener noreferrer" target="_blank" title="Share on LinkedIn"><svg height="24" role="presentation" style="font-size:1.5em" version="1.1" viewBox="0 0 448 512" width="21"> <path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z" key="path-0"></path> </svg></a> <a href="https://twitter.com/intent/tweet?text=Why%20You%20Should%20Start%20Contributing%20to%20Open%20Source%20Software%20Right%20Now&amp;url=https%3A%2F%2Fmarkushatvan.com%2Fblog%2Fwhy-you-should-start-contributing-to-open-source-software-right-now" rel="noopener noreferrer" target="_blank" title="Share on Twitter"><svg height="24" role="presentation" style="font-size:1.5em" version="1.1" viewBox="0 0 512 512" width="24"> <path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" key="path-0"></path> </svg></a> <a href="https://www.reddit.com/submit?url=https%3A%2F%2Fmarkushatvan.com%2Fblog%2Fwhy-you-should-start-contributing-to-open-source-software-right-now&amp;title=Why%20You%20Should%20Start%20Contributing%20to%20Open%20Source%20Software%20Right%20Now" rel="noopener noreferrer" target="_blank" title="Share on Reddit"><svg height="24" role="presentation" style="font-size:1.5em" version="1.1" viewBox="0 0 512 512" width="24"> <path d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z" key="path-0"></path> </svg></a> <a href="https://pinterest.com/pin/create/button/?url=https%3A%2F%2Fmarkushatvan.com%2Fblog%2Fwhy-you-should-start-contributing-to-open-source-software-right-now" rel="noopener noreferrer" target="_blank" title="Share on Pinterest"><svg height="24" role="presentation" style="font-size:1.5em" version="1.1" viewBox="0 0 496 512" width="23.25"> <path d="M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z" key="path-0"></path> </svg></a></div>   </article></div>]]>
            </description>
            <link>https://markushatvan.com/blog/why-you-should-start-contributing-to-open-source-software-right-now</link>
            <guid isPermaLink="false">hacker-news-small-sites-25547724</guid>
            <pubDate>Sun, 27 Dec 2020 00:40:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[API pagination design]]>
            </title>
            <description>
<![CDATA[
Score 338 | Comments 128 (<a href="https://news.ycombinator.com/item?id=25547716">thread link</a>) | @fagnerbrack
<br/>
December 26, 2020 | https://solovyov.net/blog/2020/api-pagination-design/ | <a href="https://web.archive.org/web/*/https://solovyov.net/blog/2020/api-pagination-design/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content"><p>Returning all results for a given query could be a challenge for an API, especially if there are thousands of results. It puts a load on a server, on a client, on a network, and often is unnecessary. Thus people invented pagination.</p>
<p>The usual way to paginate is an offset or a page number. So you make a request like that:</p>
<pre><code>GET /api/products?page=10
{"items": [...100 products]}
</code></pre>
<p>and to continue you make a request like that:</p>
<pre><code>GET /api/products?page=11
{"items": [...another 100 products]}
</code></pre>
<p>In case of a simple offset it’ll look like <code>?offset=1000</code> and <code>?offset=1100</code> — it’s the same old soup, just reheated. It’ll either go straight into SQL query like <code>OFFSET 1000 LIMIT 100</code> or will be multiplied by page size (that <code>LIMIT</code> value). In any case, it’s a suboptimal solution, since every database has to skip that 1000 rows. And to skip them it needs to identify them. It does not matter if it’s PostgreSQL, or ElasticSearch, or MongoDB, it’ll have to order them, count them, and throw them away.</p>
<p>This is a kind of work which no one needs. But it repeats over and over again since it’s <em>easy</em> to implement — you directly map your API onto your query to a database.</p>
<p>What do you do then? We could look at what databases do! They have this concept, called <a href="https://en.wikipedia.org/wiki/Cursor_(databases)">cursor</a> — it’s a pointer to a row. So you can say to a database “return me 100 rows after <strong>that</strong> one”. And it’s much easier for a database to do since there is a good chance that you’ll identify the row by a field with an index. And suddenly you don’t need to fetch and skip those rows, you’ll go directly past them.</p>
<p>An example:</p>
<pre><code>GET /api/products
{"items": [...100 products],
 "cursor": "qWe"}
</code></pre>
<p>API returns an (opaque) string, which you can use then to retrieve the next page:</p>
<pre><code>GET /api/products?cursor=qWe
{"items": [...100 products],
 "cursor": "qWr"}
</code></pre>
<p>Implementation-wise there are many options. Generally, you have some ordering criteria, for example, product id. In this case, you’ll encode your product id with some reversible algorithm (let’s say <a href="https://hashids.org/">hashids</a>). And on receiving a request with the cursor you decode it and generate a query like <code>WHERE id &gt; :cursor LIMIT 100</code>.</p>
<p>Just a little performance comparison, look at how offsets work:</p>
<pre><code>=# explain analyze select id from product offset 10000 limit 100;
                                                           QUERY PLAN                                                            
---------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=1114.26..1125.40 rows=100 width=4) (actual time=39.431..39.561 rows=100 loops=1)
   -&gt;  Seq Scan on product  (cost=0.00..1274406.22 rows=11437243 width=4) (actual time=0.015..39.123 rows=10100 loops=1)
 Planning Time: 0.117 ms
 Execution Time: 39.589 ms
</code></pre>
<p>And how where works:</p>
<pre><code>=# explain analyze select id from product where id &gt; 10000 limit 100;
                                                          QUERY PLAN                                                          
------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=0.00..11.40 rows=100 width=4) (actual time=0.016..0.067 rows=100 loops=1)
   -&gt;  Seq Scan on product  (cost=0.00..1302999.32 rows=11429082 width=4) (actual time=0.015..0.052 rows=100 loops=1)
         Filter: (id &gt; 10000)
 Planning Time: 0.164 ms
 Execution Time: 0.094 ms
</code></pre>
<p>That is a difference of several orders of magnitude! Of course, the actual numbers depend on a size of a table, on your filters and on a store implementation. There <a href="https://use-the-index-luke.com/no-offset">a great article</a> with more technical information - there are slides embedded, see slide 42 for performance comparison.</p>
<p>Of course, nobody orders products by an id — you usually order them by some relevancy (and then by id as a <a href="https://stackoverflow.com/a/17330992/46854">tie breaker</a>). In the real world, you’ll have to look at your data to determine what to do. Orders can be ordered by id (as it’s monotonically increasing). Wishlist items can be ordered like that as well — by wishlisting time. In our case products come from ElasticSearch, which naturally supports this cursor stuff.</p>
<p>One deficiency you can see is that it’s impossible to generate a “previous page” link with a stateless API. So in case of a user-facing pagination, if it’s important to have prev/next and “go directly to page 10” buttons there is no way around this offset/limit stuff. But in other cases using cursor-based pagination can greatly improve performance, especially on really big tables with really deep pagination.</p>
</div></div>]]>
            </description>
            <link>https://solovyov.net/blog/2020/api-pagination-design/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25547716</guid>
            <pubDate>Sun, 27 Dec 2020 00:38:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to backup and decrypt Signal for iPhone message history]]>
            </title>
            <description>
<![CDATA[
Score 25 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25547699">thread link</a>) | @jonnytran
<br/>
December 26, 2020 | https://cight.co/backup-signal-ios-jailbreak/ | <a href="https://web.archive.org/web/*/https://cight.co/backup-signal-ios-jailbreak/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
                <div>
                    <p>I started using Signal 5 years ago as I became increasingly conscious of my data footprint. Around the same time, I closed my Facebook and Instagram accounts, and later, my Google Account.</p><h2 id="the-problem-with-signal">The problem with Signal</h2><p>Signal makes it very difficult, and in most cases, impossible, for one to back up, export, or migrate message data. The Signal team insists these restrictions are meant to protect users’ privacy. However, backup and migration policies differ for each official Signal client and sometimes contradict each other.</p><p>For example, while iOS offers no official backups process, Android backups are built into the app. At the same time, iOS users can migrate their data to a new device (as long as their phone number hasn’t changed), but this is impossible on Android. Meanwhile, decrypting messages from the desktop client is trivial, but linking one’s phone and desktop client only syncs messages forward in time.</p><h2 id="why-export-signal-s-message-history">Why export Signal's message history</h2><p>Because it’s my fucking data.</p><p>The road to exporting my data was long, frustrating and filled with dead ends – it took over a year to get here. What's paradoxical is that someone else's phone turned out to be the key to my data. </p><p>In recent years, I moved most of my conversations to Signal, including those with family and close friends. Shortly after we started dating, I asked my partner to switch to Signal, and we’ve used it exclusively ever since. At some point, I thought it would be nice to export our conversation history – a sort of time capsule of our relationship. “Easy,” I thought. I was wrong.</p><p>Since we started dating, I had switched from a OnePlus 2 to an iPhone XS Max. And since migrating from Android to iOS isn’t possible, part of our conversation history was locked on my old phone. Jailbreaking the iPhone was out of the question since my version of iOS had not been jailbreaken. The Signal Desktop client could have offered an easy avenue to decrypt our chat history, but there was a period of several months during which I had not linked my iPhone to the Signal desktop client.</p><p>I opened a <a href="https://community.signalusers.org/t/ios-backups-through-the-desktop-client/8123">thread about this in the Signal Community Forum</a> in June of 2019. It quickly became apparent that backing up my Signal data would be an uphill battle. </p><p>Luckily, my partner had an iPhone 7, which she recently replaced with a company phone. Her old iPhone contained our entire message history in one place and was easy to jailbreak. Jackpot.</p><p>One important lesson I learned during this process:<strong> to ensure access to your conversation history, install the Desktop client and link it to your mobile device as soon as you start using Signal. </strong>The Signal database and encryption key are both accessible on your computer, allowing for easy decryption. Linking the desktop client later will only sync messages forward in time from the moment the devices are linked.</p><h2 id="tips-to-increase-your-chances-of-exporting-your-signal-database">Tips to increase your chances of exporting your Signal database</h2><p>If you haven’t linked the desktop client and extracting the iOS database is your only option, this guide is for you. If you've decided to embark upon this journey, here's some advice. </p><h3 id="stop-updating-ios">Stop updating iOS</h3><p>Your best chance of jailbreaking iOS is on older firmware versions. Turn off automatic updates and decline prompts to update iOS.</p><h3 id="backup-shsh-blobs-with-every-new-ios-update">Backup SHSH blobs with every new iOS update</h3><p><a href="https://en.wikipedia.org/wiki/SHSH_blob">SHSH blobs</a> are the digital signatures that Apple generates and uses to personalize iOS firmware files for each iOS device. Apple only signs firmware updates for a limited time after release. Having these signatures handy allows one to install versions of iOS after Apple stops signing them – like when a jailbreak becomes available for that version. In some cases, you may be able to downgrade iOS to a previous version.</p><p>Backup SHSH blobs every time Apple releases a new version of iOS (e.g., 14.0, 14.1, 14.1.1). I personally use the <a href="https://github.com/airsquared/blobsaver">blobsaver</a> app, but <a href="https://tsssaver.1conan.com/v2/">TSS Saver</a> is a popular alternative.</p><h3 id="learn-about-jailbreaking-and-stay-up-to-date-on-developments">Learn about jailbreaking and stay up to date on developments</h3><p>Developers and hackers are constantly working to break the security of iOS, and new methods to jailbreak iPhones are frequently made public. Stay informed on jailbreak releases by following the <a href="https://www.reddit.com/r/jailbreak/">/r/jailbreak subreddit</a>.</p><p>This <a href="https://docs.google.com/spreadsheets/d/11DABHIIqwYQKj1L83AK9ywk_hYMjEkcaxpIg6phbTf0/edit#gid=1014970938">exhaustive list of jailbreak compatibility</a> by device and iOS version is also a great resource.</p><p>It's also useful to understand the difference between <a href="https://www.theiphonewiki.com/wiki/Untethered_jailbreak">untethered</a>, <a href="https://www.theiphonewiki.com/wiki/Semi-untethered_jailbreak">semi-untethered</a>, <a href="https://www.theiphonewiki.com/wiki/Semi-tethered_jailbreak">semi-tethered</a>, and <a href="https://www.theiphonewiki.com/wiki/Tethered_jailbreak">tethered</a> jailbreaks.</p><h3 id="recognize-that-this-may-not-work">Recognize that this may not work</h3><p>Depending on your iPhone, you might never be able to jailbreak it or extract Signals decryption key from the iOS Keychain. Apple is making it increasingly difficult to jailbreak iOS devices – improvements to hardware and software are leaving fewer cracks for hackers to exploit.</p><p>Ok, let's get our hands dirty. </p><h2 id="how-to-maybe-backup-signal-for-iphone">How to (maybe) backup Signal for iPhone </h2><p>This guide explains how I was able to backup and extract data from Signal's encrypted SQLite database on an iPhone 7 with iOS 13.6.1. </p><h3 id="prerequisites">Prerequisites </h3><ul><li>Physical access to the iPhone with Signal still installed</li><li>An original iPhone cable</li><li>A Mac or Linux computer</li><li>Patience and a bit of luck</li></ul><p>Shell environments will be differentiated as such. </p><pre><code>// Host machine
$ &lt;command&gt;

// iPhone 
root# &lt;command&gt;</code></pre><h3 id="step-1-jailbreak-ios">Step 1: Jailbreak iOS</h3><p>For iOS 13.6.1 on an iPhone 7, I used <strong>checkra1n</strong> which offers a straight forward semi-tethered jailbreak. Depending on the iPhone device and version of iOS, a jailbreak may or may not be available. </p><p>See this <a href="https://docs.google.com/spreadsheets/d/11DABHIIqwYQKj1L83AK9ywk_hYMjEkcaxpIg6phbTf0/edit#gid=1014970938">updated list of iOS jailbreaks</a> for device compatibility and instructions. </p><h3 id="step-2-ssh-into-the-iphone">Step 2: SSH into the iPhone </h3><p>Cydia usually comes with OpenSSH installed and enabled, allowing shell access over IP or USB. If SSH access isn't activated, launch Cydia and install OpenSSH. </p><p><strong>As always, the root password on iOS is <code>alpine</code>.</strong></p><p>If the iPhone and the host machine are on the same network, SSH into the phone using its IP address. It may be found in the phone's WiFi settings. </p><pre><code>$ ssh root@[iphone ip] -p 22</code></pre><p>If SSH over the air isn't possible, USB may be an alternative. However, this involves enabling a proxy service on the host machine.</p><p>First, install <em><em>libimobiledevice</em></em> on the host machine. </p><pre><code>$ brew install libimobiledevice</code></pre><p>Then, edit <em><em>com.usbmux.iproxy.plist</em></em> and append the following XML to the file. </p><pre><code>$ nano ~/Library/LaunchAgents/com.usbmux.iproxy.plist</code></pre><pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
&lt;key&gt;Label&lt;/key&gt;
&lt;string&gt;com.usbmux.iproxy&lt;/string&gt;
&lt;key&gt;ProgramArguments&lt;/key&gt;
&lt;array&gt;
&lt;string&gt;/usr/local/bin/iproxy&lt;/string&gt;
&lt;string&gt;2222&lt;/string&gt;
&lt;string&gt;22&lt;/string&gt;
&lt;/array&gt;
&lt;key&gt;RunAtLoad&lt;/key&gt;
&lt;true/&gt;
&lt;key&gt;KeepAlive&lt;/key&gt;
&lt;true/&gt;
&lt;/dict&gt;</code></pre><p>And finally, launch the proxy on the host machine. </p><pre><code>$ launchctl load ~/Library/LaunchAgents/com.usbmux.iproxy.plist</code></pre><p>It should now be possible to SSH into the iPhone over USB on port <code>2222</code>.</p><pre><code>$ ssh root@localhost -p 2222</code></pre><h3 id="step-3-install-required-packages">Step 3: Install required packages </h3><p>Once logged into to the iPhone's shell, install the following packages as they will come in handy. </p><pre><code>root# apt install zip unzip nano wget</code></pre><h3 id="step-4-backup-the-signal-data-directory">Step 4: Backup the Signal data directory</h3><p><strong>Locate Signal's data directory</strong></p><p>Much like macOS, iOS stores application data in a <em>Library</em>-like directory. In iOS&nbsp;13, its located here <code>/private/var/mobile/Containers/Shared/AppGroup/</code>. </p><p>Signal's data directory contains the encrypted SQLite database file in <code>./grdb/signal.sqilte</code> and attachments, such as images and videos in <code>./Attachments</code>.</p><p>The data directory may be found by searching the filesystem for Signal's encrypted database file, <code>signal.sqlite</code>.</p><pre><code>root# find / -type f -iname "signal.sqlite"</code></pre><p>That should return something which looks like this:<br><code>/private/var/mobile/Containers/Shared/AppGroup/01484069-3446-4CC0-8BE7-7464E7D08FDF/grdb/signal.sqlite</code> </p><p>The Signal directory is: <code>/private/var/mobile/Containers/Shared/AppGroup/01484069-3446-4CC0-8BE7-7464E7D08FDF/</code></p><p><strong>Zip the Signal directory</strong></p><p>It is recommended to zip the entire directory, not only the database file, as it also contains images and other message attachments. This archive can reach several gigabytes.</p><pre><code>root# cd /private/var/mobile/Containers/Shared/AppGroup/
root# zip -r signal-backup.zip &lt;Signal directory&gt;

# ex: zip -r signal-backup.zip /private/var/mobile/Containers/Shared/AppGroup/01484069-3446-4CC0-8BE7-7464E7D08FDF/</code></pre><p><strong>Retrieve the backup on the host machine</strong></p><p>In a new terminal session on the host machine, use <code>scp</code> to copy the backup. </p><pre><code>$ scp -P 22 root@localhost:/private/var/mobile/Containers/Shared/AppGroup/signal-backup.zip ~/</code></pre><p>Once complete, verify that the backup has fully transferred by unpacking it.</p><p>This is the most complex part of this operation and it helps to have a basic understanding of core iOS development concepts.</p><p><strong>Understanding iOS Entitlements </strong></p><p>From the <a href="https://developer.apple.com/documentation/bundleresources/entitlements">Apple Developer Documentation</a>: </p><blockquote>An entitlement is a right or privilege that grants an executable particular capabilities. For example, an app needs the HomeKit Entitlement — along with explicit user consent — to access a user’s home automation network. An app stores its entitlements as key-value pairs embedded in the code signature of its binary executable.</blockquote><p><strong>Enter Keychain Dumper</strong></p><p>We will use <a href="https://github.com/ptoomey3/Keychain-Dumper"><strong>Keychain-Dumper</strong></a> to attempt extracting the Signal encryption key. It requires entitlements to access Keychain data for any particular app. </p><p>Reading through Keychain-Dumper's GitHub issues, I learned that entitlements changed in iOS 13.5 – prior to this version, an application <a href="https://github.com/ptoomey3/Keychain-Dumper/issues/52#issuecomment-638174691">could be given wildcard entitlements</a>. Changes in 13.5 made it such that apps need specific entitlements. Thankfully, it's possible to update an executable's entitlements, even as a binary.</p><p>The <code>keychain_dumper</code> binary included in its <a href="https://github.com/ptoomey3/Keychain-Dumper">GitHub repo</a> has wildcard entitlements. We'll need to update them in order to give it permission to decrypt the Signal key.</p><p><strong>Install Keychain Dumper on the iPhone</strong></p><p>Back on the iPhone, download and extract the <a href="https://github.com/ptoomey3/Keychain-Dumper/releases/tag/1.0.0">keychain_dumper binary</a>, and move it to <code>/usr/bin</code>.</p><pre><code>root# wget https://github.com/ptoomey3/Keychain-Dumper/releases/download/1.0.0/keychain_dumper-1.0.0.zip
root# unzip keychain_dumper-1.0.0.zip
root# mv keychain_dumper /usr/bin</code></pre><p><strong>Update <em>keychain_dumper</em>'s …</strong></p></div></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://cight.co/backup-signal-ios-jailbreak/">https://cight.co/backup-signal-ios-jailbreak/</a></em></p>]]>
            </description>
            <link>https://cight.co/backup-signal-ios-jailbreak/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25547699</guid>
            <pubDate>Sun, 27 Dec 2020 00:36:15 GMT</pubDate>
        </item>
    </channel>
</rss>
