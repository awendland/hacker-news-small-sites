<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 5]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 5. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Sun, 03 Jan 2021 04:51:51 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-5.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Sun, 03 Jan 2021 04:51:51 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[Sparse Matrices]]>
            </title>
            <description>
<![CDATA[
Score 37 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25601288">thread link</a>) | @tremguy
<br/>
December 31, 2020 | https://matteding.github.io/2019/04/25/sparse-matrices | <a href="https://web.archive.org/web/*/https://matteding.github.io/2019/04/25/sparse-matrices">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <article>
  
  <time datetime="2019-04-25T00:00:00+00:00">25 Apr 2019</time>
  

<h4 id="table-of-contents">Table of Contents</h4>
<ol>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#construction-matrices">Construction Matrices</a>
    <ol>
      <li><a href="#coordinate-matrix">Coordinate Matrix</a></li>
      <li><a href="#linked-list-matrix">Linked List Matrix</a></li>
      <li><a href="#dictionary-of-keys-matrix">Dictionary of Keys Matrix</a></li>
    </ol>
  </li>
  <li><a href="#compressed-sparse-matrices">Compressed Sparse Matrices</a>
    <ol>
      <li><a href="#compressed-sparse-rowcolumn">Compressed Sparse Row/Column</a></li>
      <li><a href="#block-sparse-row">Block Sparse Row</a></li>
    </ol>
  </li>
  <li><a href="#diagonal-matrix">Diagonal Matrix</a></li>
  <li><a href="#specialized-functions">Specialized Functions</a></li>
  <li><a href="#other-libraries">Other Libraries</a>
    <ol>
      <li><a href="#pandas">Pandas</a></li>
      <li><a href="#scikit-learn">Scikit-Learn</a></li>
      <li><a href="#pydata-sparse">PyData Sparse</a></li>
    </ol>
  </li>
  <li><a href="#final-thoughts">Final Thoughts</a></li>
</ol>

<h2 id="introduction">Introduction</h2>
<p>A <a href="https://en.wikipedia.org/wiki/Sparse_matrix">sparse matrix</a> is a matrix that has a value of 0 for most elements.
If the ratio of <b>N</b>umber of <b>N</b>on-<b>Z</b>ero (<a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.spmatrix.getnnz.html">NNZ</a>) elements to the size is less than 0.5, the matrix is sparse.
While this is the mathematical definition, I will be using the term sparse for matrices with only NNZ elements and dense for matrices with all elements.</p>

<p><img src="https://matteding.github.io/images/sparse_dense.gif" alt="Sparse vs Dense"></p>

<p>Storing information about all the 0 elements is inefficient, so we will assume unspecified elements to be 0.
Using this scheme, sparse matrices can perform faster operations and use less memory than its corresponding dense matrix representation, which is especially important when working with large data sets in data science.</p>

<p>Today we will investigate all of the different implementations provided by the <a href="https://docs.scipy.org/doc/scipy/reference/sparse.html">SciPy sparse package</a>.
This implementation is modeled after <code>np.matrix</code> opposed to <code>np.ndarray</code>, thus is restricted to 2-D arrays and having quirks like <code>A * B</code> doing matrix multiplication instead of element-wise multiplication.</p>

<div><div><pre><code><span>In</span> <span>[</span><span>0</span><span>]:</span> <span>from</span> <span>scipy</span> <span>import</span> <span>sparse</span>

<span>In</span> <span>[</span><span>1</span><span>]:</span> <span>import</span> <span>numpy</span> <span>as</span> <span>np</span>

<span>In</span> <span>[</span><span>2</span><span>]:</span> <span>spmatrix</span> <span>=</span> <span>sparse</span><span>.</span><span>random</span><span>(</span><span>10</span><span>,</span> <span>10</span><span>)</span>

<span>In</span> <span>[</span><span>3</span><span>]:</span> <span>spmatrix</span>
<span>Out</span><span>[</span><span>3</span><span>]:</span>
<span>&lt;</span><span>10</span><span>x10</span> <span>sparse</span> <span>matrix</span> <span>of</span> <span>type</span> <span>'&lt;class '</span><span>numpy</span><span>.</span><span>float64</span><span>'&gt;'</span>
        <span>with</span> <span>1</span> <span>stored</span> <span>elements</span> <span>in</span> <span>COOrdinate</span> <span>format</span><span>&gt;</span>

<span>In</span> <span>[</span><span>4</span><span>]:</span> <span>spmatrix</span><span>.</span><span>nnz</span> <span>/</span> <span>np</span><span>.</span><span>product</span><span>(</span><span>spmatrix</span><span>.</span><span>shape</span><span>)</span>  <span># sparsity</span>
<span>Out</span><span>[</span><span>4</span><span>]:</span> <span>0.01</span>
</code></pre></div></div>

<h2 id="construction-matrices">Construction Matrices</h2>
<p>Different sparse formats have their strengths and weaknesses.
A good starting point is looking at formats that are efficient for constructing these matrices.
Typically you would start with one of these forms and then convert to another when ready to do calculations.</p>

<h3 id="coordinate-matrix">Coordinate Matrix</h3>
<p>Perhaps the simplest sparse format to understand is the <b>COO</b>rdinate (<a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.coo_matrix.html">COO</a>) format.
This variant uses three subarrays to store the element values and their coordinate positions.</p>

<p><img src="https://matteding.github.io/images/coo.gif" alt="COO Matrix"></p>

<div><div><pre><code><span>In</span> <span>[</span><span>5</span><span>]:</span> <span>row</span> <span>=</span> <span>[</span><span>1</span><span>,</span> <span>3</span><span>,</span> <span>0</span><span>,</span> <span>2</span><span>,</span> <span>4</span><span>]</span>

<span>In</span> <span>[</span><span>6</span><span>]:</span> <span>col</span> <span>=</span> <span>[</span><span>1</span><span>,</span> <span>4</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>3</span><span>]</span>

<span>In</span> <span>[</span><span>7</span><span>]:</span> <span>data</span> <span>=</span> <span>[</span><span>2</span><span>,</span> <span>5</span><span>,</span> <span>9</span><span>,</span> <span>1</span><span>,</span> <span>6</span><span>]</span>

<span>In</span> <span>[</span><span>8</span><span>]:</span> <span>coo</span> <span>=</span> <span>sparse</span><span>.</span><span>coo_matrix</span><span>((</span><span>data</span><span>,</span> <span>(</span><span>row</span><span>,</span> <span>col</span><span>)),</span> <span>shape</span><span>=</span><span>(</span><span>6</span><span>,</span> <span>7</span><span>))</span>

<span>In</span> <span>[</span><span>9</span><span>]:</span> <span>print</span><span>(</span><span>coo</span><span>)</span>  <span># coordinate-value format</span>
<span># (1, 1)        2</span>
<span># (3, 4)        5</span>
<span># (0, 2)        9</span>
<span># (2, 3)        1</span>
<span># (4, 3)        6</span>

<span>In</span> <span>[</span><span>10</span><span>]:</span> <span>coo</span><span>.</span><span>todense</span><span>()</span>  <span># coo.toarray() for ndarray instead</span>
<span>Out</span><span>[</span><span>10</span><span>]:</span>
<span>matrix</span><span>([[</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>9</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>],</span>
        <span>[</span><span>0</span><span>,</span> <span>2</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>],</span>
        <span>[</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>1</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>],</span>
        <span>[</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>5</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>],</span>
        <span>[</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>6</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>],</span>
        <span>[</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>]])</span>
</code></pre></div></div>

<p>The savings on memory consumption is quite substantial as the matrix size increases.
Managing data in a sparse structure is a fixed cost unlike the case for dense matrices.
The overhead incurred from needing to manage the subarrays is becomes negligible as data grows making it a great choice for some datasets.</p>

<p>A word of caution: only use sparse arrays if they are sufficiently sparse enough; it would be counterproductive storing a mostly nonzero array using several subarrays to keep track of position and data.</p>

<div><div><pre><code><span>In</span> <span>[</span><span>11</span><span>]:</span> <span>def</span> <span>memory_usage</span><span>(</span><span>coo</span><span>):</span>
    <span>...</span><span>:</span>    <span># data memory and overhead memory</span>
    <span>...</span><span>:</span>    <span>coo_mem</span> <span>=</span> <span>(</span><span>sum</span><span>(</span><span>obj</span><span>.</span><span>nbytes</span> <span>for</span> <span>obj</span> <span>in</span> <span>[</span><span>coo</span><span>.</span><span>data</span><span>,</span> <span>coo</span><span>.</span><span>row</span><span>,</span> <span>coo</span><span>.</span><span>col</span><span>])</span>
    <span>...</span><span>:</span>               <span>+</span> <span>sum</span><span>(</span><span>obj</span><span>.</span><span>__sizeof__</span><span>()</span> <span>for</span> <span>obj</span> <span>in</span> <span>[</span><span>coo</span><span>,</span> <span>coo</span><span>.</span><span>data</span><span>,</span> <span>coo</span><span>.</span><span>row</span><span>,</span> <span>coo</span><span>.</span><span>col</span><span>]))</span>
    <span>...</span><span>:</span>    <span>print</span><span>(</span><span>f</span><span>'Sparse: {coo_mem}'</span><span>)</span>
    <span>...</span><span>:</span>    <span>mtrx</span> <span>=</span> <span>coo</span><span>.</span><span>todense</span><span>()</span>
    <span>...</span><span>:</span>    <span>mtrx_mem</span> <span>=</span> <span>mtx</span><span>.</span><span>nbytes</span> <span>+</span> <span>mtrx</span><span>.</span><span>__sizeof__</span><span>()</span>
    <span>...</span><span>:</span>    <span>print</span><span>(</span><span>f</span><span>'Dense: {mtrx_mem}'</span><span>)</span>

<span>In</span> <span>[</span><span>12</span><span>]:</span> <span>memory_usage</span><span>(</span><span>coo</span><span>)</span>
<span># Sparse: 480</span>
<span># Dense: 448</span>

<span>In</span> <span>[</span><span>13</span><span>]:</span> <span>coo</span><span>.</span><span>resize</span><span>(</span><span>100</span><span>,</span> <span>100</span><span>)</span>

<span>In</span> <span>[</span><span>14</span><span>]:</span> <span>memory_usage</span><span>(</span><span>coo</span><span>)</span>
<span># Sparse: 480</span>
<span># Dense: 80112</span>
</code></pre></div></div>

<h3 id="dictionary-of-keys-matrix">Dictionary of Keys Matrix</h3>

<p><b>D</b>ictionary <b>O</b>f <b>K</b>eys (<a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.dok_matrix.html">DOK</a>)
is very much like COO except that it subclasses <code>dict</code> to store coordinate-data information as key-value pairs.
Since it uses a <a href="https://en.wikipedia.org/wiki/Hash_table">hash table</a> as storage, identifying values at any given location has constant lookup time.
Use this format if you need the functionality that come with builtin dictionaries, but be mindful that hash tables hog much more memory than arrays.</p>

<div><div><pre><code><span>In</span> <span>[</span><span>15</span><span>]:</span> <span>dok</span> <span>=</span> <span>sparse</span><span>.</span><span>dok_matrix</span><span>((</span><span>10</span><span>,</span> <span>10</span><span>))</span>

<span>In</span> <span>[</span><span>16</span><span>]:</span> <span>dok</span><span>[(</span><span>3</span><span>,</span> <span>7</span><span>)]</span> <span>=</span> <span>42</span>  <span># store value 42 at coordinate (3, 7)</span>

<span>In</span> <span>[</span><span>17</span><span>]:</span> <span>dok</span><span>[(</span><span>9</span><span>,</span> <span>5</span><span>)]</span>  <span># zero elements are accessible</span>
<span>Out</span><span>[</span><span>17</span><span>]:</span> <span>0.0</span>

<span>In</span> <span>[</span><span>18</span><span>]:</span> <span>dok</span><span>.</span><span>keys</span><span>()</span> <span>|</span> <span>dok</span><span>.</span><span>transpose</span><span>()</span><span>.</span><span>keys</span><span>()</span>  <span># union of key views</span>
<span>Out</span><span>[</span><span>18</span><span>]:</span> <span>{(</span><span>3</span><span>,</span> <span>7</span><span>),</span> <span>(</span><span>7</span><span>,</span> <span>3</span><span>)}</span>

<span>In</span> <span>[</span><span>19</span><span>]:</span> <span>isinstance</span><span>(</span><span>dok</span><span>,</span> <span>dict</span><span>)</span>
<span>Out</span><span>[</span><span>19</span><span>]:</span> <span>True</span>
</code></pre></div></div>

<p>Note: be careful of potential problems using the methods inherited from <code>dict</code>; they don’t always behave.</p>

<div><div><pre><code><span>In</span> <span>[</span><span>20</span><span>]:</span> <span>out_of_bounds</span> <span>=</span> <span>(</span><span>999</span><span>,</span> <span>999</span><span>)</span>

<span>In</span> <span>[</span><span>21</span><span>]:</span> <span>dok</span><span>[</span><span>out_of_bounds</span><span>]</span> <span>=</span> <span>1</span>  <span># works as expected</span>
<span>IndexError</span><span>:</span> <span>Index</span> <span>out</span> <span>of</span> <span>bounds</span><span>.</span>

<span>In</span> <span>[</span><span>22</span><span>]:</span> <span>dok</span><span>.</span><span>setdefault</span><span>(</span><span>out_of_bounds</span><span>)</span>  <span># silently ignored...</span>

<span>In</span> <span>[</span><span>23</span><span>]:</span> <span>dok</span><span>.</span><span>toarray</span><span>()</span>  <span># ...until now</span>
<span>ValueError</span><span>:</span> <span>row</span> <span>index</span> <span>exceeds</span> <span>matrix</span> <span>dimensions</span>

<span>In</span> <span>[</span><span>24</span><span>]:</span> <span>dok</span><span>.</span><span>pop</span><span>(</span><span>out_of_bounds</span><span>)</span>  <span># fix issue by removing bad point</span>

<span>In</span> <span>[</span><span>25</span><span>]:</span> <span>sparse</span><span>.</span><span>dok_matrix</span><span>.</span><span>fromkeys</span><span>([</span><span>...</span><span>,</span> <span>...</span><span>,</span> <span>...</span><span>])</span>  <span># don't get me started</span>
<span>TypeError</span><span>:</span> <span>__init__</span><span>()</span> <span>missing</span> <span>1</span> <span>required</span> <span>positional</span> <span>argument</span><span>:</span> <span>'arg1'</span>
</code></pre></div></div>

<h3 id="linked-list-matrix">Linked List Matrix</h3>

<p>The most flexible format to insert data is through usage of <b>LI</b>nked <b>L</b>ist (<a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.lil_matrix.html">LIL</a>) matrices.
Data can be set via <a href="https://docs.scipy.org/doc/numpy/user/basics.indexing.html">indexing and slicing</a> syntax of NumPy to quickly populate the matrix.
In my opinion, LIL is the coolest sparse format for constructing sparse matrices from scratch.</p>

<p><img src="https://matteding.github.io/images/lil.gif" alt="LIL Matrix"></p>

<p>LIL stores information in <code>lil.rows</code> where each list represents a row index and the elements inside the list match columns.
In a parallel array, <code>lil.data</code>, the NNZ values are stored.
But unlike other sparse formats, these subarrays <em>cannot</em> be explicitly passed to the constructor; LIL matrices must be made from either an empty state or from existing matrices, dense or sparse.
Below is an illustration of various techniques used to build up a LIL matrix.</p>

<div><div><pre><code><span>In</span> <span>[</span><span>26</span><span>]:</span> <span>lil</span> <span>=</span> <span>sparse</span><span>.</span><span>lil_matrix</span><span>((</span><span>6</span><span>,</span> <span>5</span><span>),</span> <span>dtype</span><span>=</span><span>int</span><span>)</span>

<span>In</span> <span>[</span><span>27</span><span>]:</span> <span>lil</span><span>[(</span><span>0</span><span>,</span> <span>-</span><span>1</span><span>)]</span> <span>=</span> <span>-</span><span>1</span>  <span># set individual point</span>

<span>In</span> <span>[</span><span>28</span><span>]:</span> <span>lil</span><span>[</span><span>3</span><span>,</span> <span>(</span><span>0</span><span>,</span> <span>4</span><span>)]</span> <span>=</span> <span>[</span><span>-</span><span>2</span><span>]</span> <span>*</span> <span>2</span>  <span># set two points</span>

<span>In</span> <span>[</span><span>29</span><span>]:</span> <span>lil</span><span>.</span><span>setdiag</span><span>(</span><span>8</span><span>,</span> <span>k</span><span>=</span><span>0</span><span>)</span>  <span># set main diagonal</span>

<span>In</span> <span>[</span><span>30</span><span>]:</span> <span>lil</span><span>[:,</span> <span>2</span><span>]</span> <span>=</span> <span>np</span><span>.</span><span>arange</span><span>(</span><span>lil</span><span>.</span><span>shape</span><span>[</span><span>0</span><span>])</span><span>.</span><span>reshape</span><span>(</span><span>-</span><span>1</span><span>,</span> <span>1</span><span>)</span> <span>+</span> <span>1</span>  <span># set entire column</span>

<span>In</span> <span>[</span><span>31</span><span>]:</span> <span>lil</span><span>.</span><span>toarray</span><span>()</span>
<span>Out</span><span>[</span><span>31</span><span>]:</span>
<span>array</span><span>([[</span> <span>8</span><span>,</span>  <span>0</span><span>,</span>  <span>1</span><span>,</span>  <span>0</span><span>,</span> <span>-</span><span>1</span><span>],</span>
       <span>[</span> <span>0</span><span>,</span>  <span>8</span><span>,</span>  <span>2</span><span>,</span>  <span>0</span><span>,</span>  <span>0</span><span>],</span>
       <span>[</span> <span>0</span><span>,</span>  <span>0</span><span>,</span>  <span>3</span><span>,</span>  <span>0</span><span>,</span>  <span>0</span><span>],</span>
       <span>[</span><span>-</span><span>2</span><span>,</span>  <span>0</span><span>,</span>  <span>4</span><span>,</span>  <span>8</span><span>,</span> <span>-</span><span>2</span><span>],</span>
       <span>[</span> <span>0</span><span>,</span>  <span>0</span><span>,</span>  <span>5</span><span>,</span>  <span>0</span><span>,</span>  <span>8</span><span>],</span>
       <span>[</span> <span>0</span><span>,</span>  <span>0</span><span>,</span>  <span>6</span><span>,</span>  <span>0</span><span>,</span>  <span>0</span><span>]])</span>
</code></pre></div></div>

<p>So what’s the drawback…? Well, it utilizes <a href="https://en.wikipedia.org/wiki/Jagged_array">jagged arrays</a> under the hood which requires <code>np.dtype(object)</code>.
This costs a lot more memory than a rectangular array, so if the data is big enough, you may be forced to work with COO instead of LIL.
In short, LIL is mostly offered as a convenience, albeit an awesome one at that.</p>

<div><div><pre><code><span>In</span> <span>[</span><span>32</span><span>]:</span> <span>lil</span><span>.</span><span>rows</span>
<span>Out</span><span>[</span><span>32</span><span>]:</span>
<span>array</span><span>([</span><span>list</span><span>([</span><span>0</span><span>,</span> <span>2</span><span>,</span> <span>4</span><span>]),</span> <span>list</span><span>([</span><span>1</span><span>,</span> <span>2</span><span>]),</span> <span>list</span><span>([</span><span>2</span><span>]),</span> <span>list</span><span>([</span><span>0</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>]),</span>
       <span>list</span><span>([</span><span>2</span><span>,</span> <span>4</span><span>]),</span> <span>list</span><span>([</span><span>2</span><span>])],</span> <span>dtype</span><span>=</span><span>object</span><span>)</span>

<span>In</span> <span>[</span><span>33</span><span>]:</span> <span>lil</span><span>.</span><span>data</span><span>[:,</span> <span>np</span><span>.</span><span>newaxis</span><span>]</span>  <span># expose jagged structure</span>
<span>Out</span><span>[</span><span>33</span><span>]:</span>
<span>array</span><span>([[</span><span>list</span><span>([</span><span>8</span><span>,</span> <span>1</span><span>,</span> <span>-</span><span>1</span><span>])],</span>
       <span>[</span><span>list</span><span>([</span><span>8</span><span>,</span> <span>2</span><span>])],</span>
       <span>[</span><span>list</span><span>([</span><span>3</span><span>])],</span>
       <span>[</span><span>list</span><span>([</span><span>-</span><span>2</span><span>,</span> <span>4</span><span>,</span> <span>8</span><span>,</span> <span>-</span><span>2</span><span>])],</span>
       <span>[</span><span>list</span><span>([</span><span>5</span><span>,</span> <span>8</span><span>])],</span>
       <span>[</span><span>list</span><span>([</span><span>6</span><span>])]],</span> <span>dtype</span><span>=</span><span>object</span><span>)</span>
</code></pre></div></div>

<p>As an aside, Linked List Matrix is a misnomer since it does <em>not</em> use <a href="https://en.wikipedia.org/wiki/Linked_list">linked lists</a> behind the scenes!
LIL actually uses Python’s <code>list</code> which is a <a href="https://en.wikipedia.org/wiki/Dynamic_array">dynamic array</a>, so it should really be called a List of Lists Matrix, in spite of what the documentation says.
(A missed opportunity to christen it as LOL…)</p>

<div><div><pre><code><span>In</span> <span>[</span><span>34</span><span>]:</span> <span>sparse</span><span>.</span><span>lil</span><span>.</span><span>__doc__</span>  <span># module docstring</span>
<span>Out</span><span>[</span><span>34</span><span>]:</span> <span>'LInked List sparse matrix class</span><span>\n</span><span>'</span>
</code></pre></div></div>

<h2 id="compressed-sparse-matrices">Compressed Sparse Matrices</h2>
<p>The formats described earlier are great for building sparse matrices, but they aren’t as computationally performant than more specialized forms.
The reverse is true for compressed sparse matrix family, which should be treated as read-only rather than write-only.
These are more difficult to understand, but with a little patience their structure can be <a href="https://en.wikipedia.org/wiki/Grok">grokked</a>.</p>

<h3 id="compressed-sparse-rowcolumn">Compressed Sparse Row/Column</h3>

<p>The <b>C</b>ompressed <b>S</b>parse <b>R</b>ow/<b>C</b>olumn (<a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.html">CSR</a> and <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csc_matrix.html">CSC</a>) formats are designed for computation in mind.</p>

<p><img src="https://matteding.github.io/images/csr.gif" alt="CSR Matrix"></p>

<div><div><pre><code><span>In</span> <span>[</span><span>35</span><span>]:</span> <span>indptr</span> <span>=</span> <span>np</span><span>.</span><span>array</span><span>([</span><span>0</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>3</span><span>,</span> <span>3</span><span>,</span> <span>6</span><span>,</span> <span>6</span><span>,</span> <span>7</span><span>])</span>

<span>In</span> <span>[</span><span>36</span><span>]:</span> <span>indices</span> <span>=</span> <span>np</span><span>.</span><span>array</span><span>([</span><span>0</span><span>,</span> <span>2</span><span>,</span> <span>2</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>3</span><span>])</span>

<span>In</span> <span>[</span><span>37</span><span>]:</span> <span>data</span> <span>=</span> <span>np</span><span>.</span><span>array</span><span>([</span><span>8</span><span>,</span> <span>2</span><span>,</span> <span>5</span><span>,</span> <span>7</span><span>,</span> <span>1</span><span>,</span> <span>2</span><span>,</span> <span>9</span><span>])</span>

<span>In</span> <span>[</span><span>38</span><span>]:</span> <span>csr</span> <span>=</span> <span>sparse</span><span>.</span><span>csr_matrix</span><span>((</span><span>data</span><span>,</span> <span>indices</span><span>,</span> <span>indptr</span><span>))</span>

<span>In</span> <span>[</span><span>39</span><span>]:</span> <span>csr</span><span>.</span><span>todense</span><span>()</span>
<span>Out</span><span>[</span><span>39</span><span>]:</span>
<span>matrix</span><span>([[</span><span>8</span><span>,</span> <span>0</span><span>,</span> <span>2</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>],</span>
        <span>[</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>5</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>],</span>
        <span>[</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>],</span>
        <span>[</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>],</span>
        <span>[</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>7</span><span>,</span> <span>1</span><span>,</span> <span>2</span><span>],</span>
        <span>[</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>],</span>
        <span>[</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>9</span><span>,</span> <span>0</span><span>]])</span>
</code></pre></div></div>

<p>Adjacent pairs of index pointers determine two things.
First, their position in the pointer array is the row number.
Second, these values represent the [start:stop] slice of the indices array, and their difference is the NNZ elements in each row.
Using the pointers, look up the indices to determine the column for each element in the data.</p>

<p>CSC works exactly the same as CSR but has column based index pointers and row indices instead.
Below is a diagram of the same data in this format.
Notice for this particular case, CSC is slightly more compact with two fewer index pointers.</p>

<p><img src="https://matteding.github.io/images/csc.gif" alt="CSC Matrix"></p>

<div><div><pre><code><span>In</span> <span>[</span><span>40</span><span>]:</span> <span>csc</span> <span>=</span> <span>sparse</span><span>.</span><span>csc_matrix</span><span>(</span><span>csr</span><span>)</span>  <span># convert format</span>

<span>In</span> <span>[</span><span>41</span><span>]:</span> <span>csc</span><span>.</span><span>indptr</span>
<span>Out</span><span>[</span><span>41</span><span>]:</span> <span>array</span><span>([</span><span>0</span><span>,</span> <span>1</span><span>,</span> <span>1</span><span>,</span> <span>4</span><span>,</span> <span>6</span><span>,</span> <span>7</span><span>],</span> <span>dtype</span><span>=</span><span>int32</span><span>)</span>

<span>In</span> <span>[</span><span>42</span><span>]:</span> <span>csc</span><span>.</span><span>indices</span>
<span>Out</span><span>[</span><span>42</span><span>]:</span> <span>array</span><span>([</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>1</span><span>,</span> <span>4</span><span>,</span> <span>4</span><span>,</span> <span>6</span><span>,</span> <span>4</span><span>],</span> <span>dtype</span><span>=</span><span>int32</span><span>)</span>

<span>In</span> <span>[</span><span>43</span><span>]:</span> <span>csc</span><span>.</span><span>data</span>
<span>Out</span><span>[</span><span>43</span><span>]:</span> <span>array</span><span>([</span><span>8</span><span>,</span> <span>2</span><span>,</span> <span>5</span><span>,</span> <span>7</span><span>,</span> <span>1</span><span>,</span> <span>9</span><span>,</span> <span>2</span><span>],</span> <span>dtype</span><span>=</span><span>int64</span><span>)</span>
</code></pre></div></div>

<p>As promised, the compressed formats are indeed faster than their COO counterpart.
For a modest-sized matrix, we see a 2x speed gain vs COO and 60x speedup vs dense!</p>

<div><div><pre><code><span>In</span> <span>[</span><span>44</span><span>]:</span> <span>csr</span><span>.</span><span>resize</span><span>(</span><span>1000</span><span>,</span> <span>1000</span><span>)</span>

<span>In</span> <span>[</span><span>45</span><span>]:</span> <span>%</span><span>timeit</span> <span>csr</span> <span>@</span> <span>csr</span>
<span># 111 µs ± 3.66 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)</span>

<span>In</span> <span>[</span><span>46</span><span>]:</span> <span>coo</span> <span>=</span> <span>csr</span><span>.</span><span>tocoo</span><span>()</span>  <span># another way to convert</span>

<span>In</span> <span>[</span><span>47</span><span>]:</span> <span>%</span><span>timeit</span> <span>coo</span> <span>@</span> <span>coo</span>
<span># 251 µs ± 8.06 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)</span>

<span>In</span> <span>[</span><span>48</span><span>]:</span> <span>arr</span> <span>=</span> <span>csr</span><span>.</span><span>toarray</span><span>()</span>

<span>In</span> <span>[</span><span>49</span><span>]:</span> <span>%</span><span>timeit</span> <span>arr</span> <span>@</span> <span>arr</span>  <span># order of magnitude slower!</span>
<span># 632 ms ± 2.02 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)</span>
</code></pre></div></div>

<h3 id="block-sparse-row">Block Sparse Row</h3>
<p><b>B</b>lock <b>S</b>parse <b>R</b>ow (<a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.bsr_matrix.html">BSR</a>) is like CSR but stores sub-matrices rather than scalar values at locations.</p>

<div><div><pre><code><span>In</span> <span>[</span><span>50</span><span>]:</span> <span>ones</span> <span>=</span> <span>np</span><span>.</span><span>ones</span><span>((</span><span>2</span><span>,</span> <span>3</span><span>),</span> <span>dtype</span><span>=</span><span>int</span><span>)</span>

<span>I…</span></code></pre></div></div></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://matteding.github.io/2019/04/25/sparse-matrices">https://matteding.github.io/2019/04/25/sparse-matrices</a></em></p>]]>
            </description>
            <link>https://matteding.github.io/2019/04/25/sparse-matrices</link>
            <guid isPermaLink="false">hacker-news-small-sites-25601288</guid>
            <pubDate>Fri, 01 Jan 2021 06:11:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[AirPods Max are no match for my AirPods]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25600738">thread link</a>) | @MereCivilian
<br/>
December 31, 2020 | https://merecivilian.com/airpodsmax/ | <a href="https://web.archive.org/web/*/https://merecivilian.com/airpodsmax/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://merecivilian.com/content/images/size/w300/2020/12/5EF3F05C-B991-4575-89D3-0F04915D0A1F-1.jpeg 300w,
                            https://merecivilian.com/content/images/size/w600/2020/12/5EF3F05C-B991-4575-89D3-0F04915D0A1F-1.jpeg 600w,
                            https://merecivilian.com/content/images/size/w1000/2020/12/5EF3F05C-B991-4575-89D3-0F04915D0A1F-1.jpeg 1000w,
                            https://merecivilian.com/content/images/size/w2000/2020/12/5EF3F05C-B991-4575-89D3-0F04915D0A1F-1.jpeg 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://merecivilian.com/content/images/size/w2000/2020/12/5EF3F05C-B991-4575-89D3-0F04915D0A1F-1.jpeg" alt="AirPods Max - Nuance in Sound">
            </figure>

            <section>
                <div>
                    <p>oh boy oh boy........I have been using the AirPods Max for hours daily for the last 7 days.</p><h5 id="airpods-max-s-largest-competitor-is-the-apple-airpods">AirPods Max’s largest competitor is the Apple AirPods</h5><h2 id="context">Context</h2><p>Firstly, these are my thoughts based on my use case. I am not an audiophile (although most reviewers are saying this lol) and I certainly do not have the ears to identify the nuance in sound. For example, both the AirPods 2 and AirPods Pro almost sound the same to my ears. I must say, I find the AirPods 2 more comfortable than my AirPods Pro because the AirPods seat in the ear as opposed to the AirPods Pro are inside the ear.</p><h2 id="experience">Experience</h2><p>The only reason, I purchased the AirPods Max is because, before these headphones, I had yet to find a pair where my ears do not get hot within 30 minutes of use. I was hoping, these would be the same and as such, I do not have to consider whether I would pay $550 for these. Well, both fortunately and unfortunately, <strong>my ears did not get hot even after hours of use</strong>. This was a Christmas miracle. Finally, headphones exist that are made for my ears. Prior to these, I had tested all the Bose and Beats noise-cancelling headphones without success. The Sony headphones do not come with a customer friendly returns policy, so I haven't tested them. I think, AirPods Max are different <strong>because unlike all the other headphones, the cups are NOT made of leather.</strong></p><p>For me, comfort is most important and as my wallet takes a sigh of relief, my AirPods are still the most comfortable means of personal music/podcast listening. Even though, the AirPods Max is the most comfortable headphones I have tried, they are distant second to my AirPods in terms of comfort and the sound quality on the AirPods is acceptable to me.</p><p>AirPods Max are the best in class:</p><ul><li>Noise Cancellation</li><li>Music listening</li><li>Transparency</li><li>Design and build quality</li><li>Only headphones I know that stand on their own two cups. Now that's cool.</li></ul><figure><img src="https://merecivilian.com/content/images/2020/12/Image-28-12-20--7-50-am-1.jpeg" alt=""></figure><p>The following are where the AirPods Max fall short:</p><ul><li>comfort is not as good as AirPods</li><li>Noise cancellation is so good that I struggle to hear my wife calling within my home. I find the noise cancelling is so good that I am lost in silence and am completely unaware of things happening in the house. My home is already quiet so there is no need for noise cancelling. Turning it off was the only option and that works well enough.</li><li>Pronounced pressurization effect</li><li>Portability </li><li>Lighting charging (and no wireless charging)</li><li>The joke of a case. My AirPods case charges my AirPods as well.</li><li>Because of the cost and the canopy headband, I cannot help but baby this thing all the time - it's like a big baby</li></ul><h5 id="i-am-so-accustomed-to-the-convenience-the-airpods-provide-that-the-airpods-max-seem-cumbersome-for-my-use-case-">I am so accustomed to the convenience the AirPods provide that the AirPods Max seem cumbersome for my use case.</h5><p><strong>Spatial audio</strong> : this is a pointless feature. There is no way I am watching <a href="https://en.wikipedia.org/wiki/The_Mandalorian">The Mandalorian</a> on my iPhone or iPad to use this feature. Bring it on the Apple TV than I will reconsider.</p><p><strong>Sound Quality</strong>: regardless of the hype, these are Bluetooth headphones and as such the same Bluetooth limitations are applicable here. Nonetheless, these are the best sounding Bluetooth headphones I have heard. The credit for this goes to the two H1 chips and Apple’s sound processing. Your ears may hear things that I do not, so my view is just as subjective as any other reviewer’s view on this.</p><p>To summarise, all this year, I worked from home and I do not see this changing in 2021. Therefore, I do not need noise cancelling and frankly prefer my AirPods because they are more comfortable. Would I prefer these for when I sit down for quality music listening - You bet I would. Well, in practice, when this is the case, I usually listen to music on my 5.1 Sonos surround sound with my wife and family.</p><h5 id="i-do-not-have-space-for-the-airpods-max-in-my-life-and-as-such-these-are-going-back-airpods-were-life-changing-for-me-these-are-not-">I do not have space for the AirPods Max in my life and as such, these are going back. &nbsp;AirPods were life changing for me, these are not.</h5><h2 id="pricing">Pricing</h2><p>If I were using it all day like my AirPods, I would have kept them but it would still bug me that they are priced almost 50% above their closest competition and more than 100% above the AirPods Pro. Regardless of what anyone says, I refuse to believe that these are 50% better than the Bose. But that's the Apple premium tax. However, I sense these are priced like the HomePods and will also be significantly discounted in the coming 12 to 18 months.</p><p>I understand folks supporting Apple and providing an argument as to why shouldn't Apple charge a premium if they're providing a premium product. And I agree, Why shouldn't they? Apple can charge whatever they want, but if I find that it's not premium enough for me, than it's ultimately my decision to make. Furthermore, Apple at times has incorrectly priced their products. HomePod is a perfect example, as evident by the significant discounts regularly available on the HomePod. These significant discounts of RRP is not seen in other Apple products.</p><h2 id="recommendation">Recommendation</h2><p><strong>Sound is subjective and listening to sound is also subjective</strong>. Therefore, what sounds amazing to you, may sound <em>meh</em> to me. I suggest taking advantage of Apple's excellent returns policy and<strong> give it a try to DECIDE for YOURSELF</strong>. Then, when these are on sale, you can grab them from any retailer if these fit your use case.</p><p>I am human after all and very sensitive to a good bargain so this may end up as an impulse buy in the future. Very unlikely but stranger things have occurred.</p>
                </div>
            </section>



        </article>

    </div>
</div></div>]]>
            </description>
            <link>https://merecivilian.com/airpodsmax/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25600738</guid>
            <pubDate>Fri, 01 Jan 2021 04:02:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[TabFS: Mount your Browser Tabs as a Filesystem]]>
            </title>
            <description>
<![CDATA[
Score 524 | Comments 68 (<a href="https://news.ycombinator.com/item?id=25600338">thread link</a>) | @thesephist
<br/>
December 31, 2020 | https://omar.website/tabfs/ | <a href="https://web.archive.org/web/*/https://omar.website/tabfs/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      

<!-- I'm setting this page in Verdana-on-gray so I feel more comfortable -->

<!-- jotting random notes and stuff down. -->



<p><a href="https://github.com/osnr/TabFS">TabFS</a> is a browser extension that
mounts your browser tabs as a filesystem on your computer.</p>

<p>Out of the box, it supports Chrome and (to a lesser extent<sup id="fnref:firefox"><a rel="footnote" href="#fn:firefox">1</a></sup>)
Firefox, on macOS and Linux.<sup id="fnref:otherbrowsers"><a rel="footnote" href="#fn:otherbrowsers">2</a></sup></p>

<p>Each of your open tabs is mapped to a folder.</p>

<div>
<p><a href="https://omar.website/tabfs/doc/00-browser.png"><img src="https://omar.website/tabfs/doc/00-browser.png"></a>
<a href="https://omar.website/tabfs/doc/00-finder.png"><img src="https://omar.website/tabfs/doc/00-finder.png"></a></p><p>I have 3 tabs open, and
they map to 3 folders in TabFS</p>
</div>

<p>The files inside a tab's folder directly reflect (and can control) the
state of that tab in your browser. (TODO: update as I add more)</p>

<div>
<video autoplay="" loop="" muted="">
  <source src="https://omar.website/tabfs/doc/finder-contents.mp4" type="video/mp4">
</video>
<p>Example: the url.txt, text.txt, and title.txt
files inside a tab's folder, which tell me those live properties
for that tab</p>
</div>

<p>This gives you a <em>ton</em> of power, because now you can apply <a href="https://twitter.com/rsnous/status/1018570020324962305">all the
existing tools</a>
on your computer that already know how to deal with files -- terminal
commands, scripting languages, etc -- and use them to control and
communicate with your browser.</p>

<p>Now you don't need to <a href="https://twitter.com/rsnous/status/1261392522485526528">code up a browser extension from
scratch</a> every
time you want to do anything. You can write a script that talks to
your browser in, like, a melange of Python and bash, and you can save
it as <a href="https://twitter.com/rsnous/status/1308588645872435202">a single ordinary
file</a> that you
can run whenever, and it's no different from scripting any other part
of your computer.</p>

<h3 id="table-of-contents">table of contents</h3>




<h2 id="examples-of-stuff-you-can-do-examples">Examples of stuff you can do!<sup id="fnref:examples"><a rel="footnote" href="#fn:examples">3</a></sup></h2>

<p>(assuming your current directory is the <code>fs</code> subdirectory of the git
repo and you have the extension running)</p>

<h3 id="list-the-titles-of-all-the-tabs-you-have-open">List the titles of all the tabs you have open</h3>

<pre><code>$ cat mnt/tabs/by-id/*/title.txt
GitHub
Extensions
TabFS/install.sh at master · osnr/TabFS
Alternative Extension Distribution Options - Google Chrome
Web Store Hosting and Updating - Google Chrome
Home / Twitter
...
</code></pre>

<h3 id="cull-tabs-like-any-other-files">Cull tabs like any other files</h3>

<div>
<video autoplay="" loop="" muted="">
  <source src="https://omar.website/tabfs/doc/delete.mp4" type="video/mp4">
</video>
<p>Selecting and deleting a bunch of tabs in my file manager</p>
</div>

<p>I'm using Dired in Emacs here, but you could use whatever tools you
already feel comfortable managing your files with.</p>

<h3 id="close-all-stack-overflow-tabs">Close all Stack Overflow tabs</h3>

<pre><code>$ rm mnt/tabs/by-title/*Stack_Overflow*
</code></pre>

<p>or (older / more explicit)</p>

<pre><code>$ echo remove | tee -a mnt/tabs/by-title/*Stack_Overflow*/control
</code></pre>

<h4 id="btw">btw</h4>

<p>(this task, removing all tabs whose titles contain some string, is a
little contrived, but it's not that unrealistic, right?)</p>

<p>(now... how would you do this <em>without</em> TabFS?  I honestly have no
idea, off the top of my head. like, how do you even get the titles of
tabs? how do you tell the browser to close them?)</p>

<p>(I looked up the APIs, and, OK, if you're already in a browser
extension, in a 'background script' inside the extension, <em>and</em> your
extension has the <code>tabs</code> permission -- this already requires you to
make 2 separate files and hop between your browser and your text
editor to set it all up! -- you can do
<a href="https://developer.chrome.com/docs/extensions/reference/tabs/#method-query">this</a>:
<code>chrome.tabs.query({}, tabs =&gt; chrome.tabs.remove(tabs.filter(tab =&gt;
tab.title.includes('Stack Overflow')).map(tab =&gt; tab.id)))</code>)</p>

<p>(not <em>terrible</em>, but look at all that upfront overhead to get it set
up. and it's not all that discoverable. and what if you want to reuse
this later, or plug it into some larger pipeline of tools on your
computer, or give it a visual interface? the jump in complexity once
you need to communicate with anything -- possibly setting up a
WebSocket, setting up handlers and a state machine -- is pretty
horrifying)</p>

<p>(but to be honest, I wouldn't even have conceived of this as a thing I
could do in the first place)</p>

<h3 id="save-text-of-all-tabs-to-a-file">Save text of all tabs to a file</h3>

<pre><code>$ cat mnt/tabs/by-id/*/text.txt &gt; text-of-all-tabs.txt
</code></pre>

<h3 id="run-script">Run script</h3>

<pre><code>$ echo 'document.body.style.background = "green"' &gt; mnt/tabs/last-focused/execute-script
$ echo 'alert("hi!")' &gt; mnt/tabs/last-focused/execute-script
</code></pre>

<h3 id="get-images-scripts-etc-on-page">Get images / scripts / etc on page</h3>

<p>(TODO: <a href="https://github.com/osnr/TabFS/issues/5">document better</a>, put in screenshots)</p>

<p>The <a href="https://github.com/osnr/TabFS/blob/fef9289e3a7f82cda6319d5f19d5a5f13f3cc44b/extension/background.js#L355"><code>debugger/</code>
subdirectory</a>
in each tab folder has synthetic files that let you access loaded
resources (in <code>debugger/resources/</code>) and scripts (in
<code>debugger/scripts/</code>). (this is experimental)</p>

<h3 id="retrieve-what-s-playing-on-youtube-music-youtube-music-tabfs-https-github-com-junhoyeo-youtube-music-tabfs">Retrieve what's playing on YouTube Music: <a href="https://github.com/junhoyeo/youtube-music-tabfs">youtube-music-tabfs</a></h3>

<p><a href="https://www.reddit.com/r/programming/comments/kok4dw/tabfs_mount_your_browser_tabs_as_a_filesystem/ghtbgw1/">thanks</a> to <a href="https://github.com/junhoyeo">Junho Yeo</a>!</p>

<h3 id="reload-an-extension-when-you-edit-its-source-code">Reload an extension when you edit its source code</h3>

<p>Suppose you're working on a Chrome extension (apart from this
one). It's a pain to reload the extension (and possibly affected Web
pages) every time you change its code. There's a <a href="https://stackoverflow.com/questions/2963260/how-do-i-auto-reload-a-chrome-extension-im-developing">Stack Overflow
post</a>
with ways to automate this, but they're all sort of hacky. You need
yet another extension, or you need to tack weird permissions onto your
work-in-progress extension, and you don't just get a command you can
trigger from your editor or shell to refresh the extension.</p>

<p>TabFS lets you do all this in <a href="https://github.com/osnr/playgroundize-devtools-protocol/blob/main/go.sh">an ordinary shell
script</a>.
You don't have to write any browser-side code at all.</p>

<p>This script turns an extension (this one's title is "Playgroundize
DevTools Protocol") off, then turns it back on, then reloads any tabs
that have the relevant pages open (in this case, I decided it's tabs
whose titles start with "Chrome Dev"):</p>

<pre><code>#!/bin/bash -eux
echo false &gt; mnt/extensions/Playg*/enabled
echo true &gt; mnt/extensions/Playg*/enabled
echo reload | tee mnt/tabs/by-title/Chrome_Dev*/control
</code></pre>

<p>I mapped this script to Ctrl-. in my text editor, and now I just hit
that every time I want to reload my extension code.</p>

<h3 id="todo-live-edit-a-running-web-page">TODO: Live edit a running Web page</h3>

<p>edit <code>page.html</code> in the tab folder. I guess it could just stomp
outerHTML at first, eventually could do something more sophisticated</p>

<p>(it would be cool to have a persistent storage story here
also. I like the idea of being able to put arbitrary files anywhere in
the subtree, actually, because then you could use git and emacs
autosave and stuff for free... hmm)</p>

<h3 id="todo-watch-expressions">TODO: Watch expressions</h3>

<pre><code>$ touch mnt/tabs/last-focused/watches/window.scrollY
</code></pre>

<p>Now you can <code>cat window.scrollY</code> and see where you are scrolled on the
page at any time.</p>

<p>Could make an <a href="https://twitter.com/rsnous/status/1080878682275803137">ad-hoc
dashboard</a>
around a Web page: a bunch of terminal windows floating around your
screen, each sitting in a loop and using <code>cat</code> to monitor a different
variable.</p>

<h3 id="todo-import-data-json-xls-js">TODO: Import data (JSON? XLS? JS?)</h3>

<p>drag a JSON file <code>foo.json</code> into the <code>imports</code> subfolder of the tab
and it shows up as the object <code>imports.foo</code> in JS. (modify
<code>imports.foo</code> in JS and then read <code>imports/foo.json</code> and you read the
changes back?)</p>

<p>import a plotting library or whatever the same way? dragging
<code>plotlib.js</code> into <code>imports/plotlib.js</code> and then calling
<code>imports.plotlib()</code> to invoke that JS file</p>

<p>the browser has a lot of potential power as an interactive programming
environment, one where graphics come <a href="https://twitter.com/rsnous/status/1295828978477932544">as
naturally</a> as
console I/O do in most programming languages. i think something that
holds it back that is underexplored is lack of ability to just... drag
files in and manage them with decent tools. many Web-based 'IDEs' have
to reinvent file management, etc from scratch, and it's like a
separate universe from the rest of your computer, and migrating
between one and the other is a real pain (if you want to use some
Python library to munge some data and then have a Web-based
visualization of it, for instance, or if you want to version files
inside it, or make snapshots so you <a href="https://twitter.com/rsnous/status/1288725175895068673">feel
comfortable</a>
trying stuff, etc).</p>

<p>(what would the persistent storage story here be? localStorage? it's
interesting because I almost want each tab to be <a href="https://twitter.com/rsnous/status/1344753559007420416">less of a
commodity</a>,
less
<a href="https://twitter.com/rsnous/status/1270192308772691968">disposable</a>,
since now it's the site I'm dragging stuff to and it might have some
persistent state attached. like, if I'm programming and editing stuff
and saving inside a tab's folder, that tab suddenly really
<a href="https://twitter.com/rsnous/status/1251863115022491653">matters</a>; I
want it to survive as long as a normal file would, unlike most browser
tabs today)</p>

<h2 id="setup">Setup</h2>

<p><strong>disclaimer</strong>: this extension is an experiment. I think it's cool and
useful and provocative, and I usually leave it on, but I make no
promises about functionality or, especially, security. applications
may freeze, your browser may freeze, there may be ways for Web pages
to use the extension to escape and hurt your computer ... In some
sense, the <a href="https://twitter.com/rsnous/status/1338932056743546880">whole
point</a> of this
extension is to create a gigantic new surface area of communication
between stuff inside your browser and software on the rest of your
computer.</p>

<p>Before doing anything, clone <a href="https://github.com/osnr/TabFS">this repository</a>:</p>

<pre><code>$ git clone https://github.com/osnr/TabFS.git
</code></pre>

<p>First, install the browser extension.</p>

<p>Then, install the C filesystem.</p>

<h3 id="1-install-the-browser-extension">1. Install the browser extension</h3>

<p>(I think for Opera or whatever other Chromium-based browser, you could
get it to work, but you'd need to change the native messaging path in
install.sh. Not sure about Safari. maybe Edge too? if you also got
everything to compile for Windows)</p>

<h4 id="in-chrome">in Chrome</h4>

<p>Go to the <a href="chrome://extensions">Chrome extensions page</a>. Enable
Developer mode (top-right corner).</p>

<p>Load-unpacked the <code>extension/</code> folder in this repo.</p>

<p><strong>Make a note of the extension ID Chrome assigns.</strong> Mine is
<code>jimpolemfaeckpjijgapgkmolankohgj</code>. We'll use this later.</p>

<h4 id="in-firefox">in Firefox</h4>

<p>You'll need to install as a "temporary extension", so it'll only last
in your current FF session. (TODO: is this fixable? signature stuff?)</p>

<p>Go to <a href="about:debugging#/runtime/this-firefox">about:debugging#/runtime/this-firefox</a>.</p>

<p>Load Temporary Add-on...</p>

<p>Choose manifest.json in the extension subfolder of this repo.</p>

<h3 id="2-install-the-c-filesystem">2. Install the C filesystem</h3>

<p>First, make sure you have FUSE and FUSE headers. On Linux, for example,
<code>sudo apt install libfuse-dev</code> or equivalent. On macOS, get <a href="https://osxfuse.github.io/">FUSE for
macOS</a>. (on macOS, also check <a href="https://github.com/osnr/TabFS/issues/11">this
bug</a> -- TODO work out the
best path to explain here.)</p>

<p>Then compile the C filesystem:</p>

<pre><code>$ cd fs
$ mkdir mnt
$ make
</code></pre>

<p>(GNU Make is required, so use gmake on FreeBSD)</p>

<p>Now install the native messaging host into your browser, so the
extension can launch and talk to the filesystem:</p>

<h4 id="chrome-and-chromium">Chrome and Chromium</h4>

<p>Substitute the extension ID you copied earlier for
<code>jimpolemfaeckpjijgapgkmolankohgj</code> in the command below.</p>

<pre><code>$ ./install.sh chrome jimpolemfaeckpjijgapgkmolankohgj
</code></pre>

<p>or</p>

<pre><code>$ ./install.sh chromium jimpolemfaeckpjijgapgkmolankohgj
</code></pre>

<h4 id="firefox">Firefox</h4>

<pre><code>$ ./install.sh firefox
</code></pre>

<h3 id="3-ready">3. Ready!</h3>

<p>Go back to <code>chrome://extensions</code> or
<code>about:debugging#/runtime/this-firefox</code> and reload the extension.</p>

<p>Now your browser tabs should be mounted in <code>fs/mnt</code>!</p>

<p>Open the background page inspector to see the filesystem operations
stream in. (in Chrome, click "background page" next to "Inspect views"
in the extension's entry in the Chrome extensions page; in Firefox,
click "Inspect")</p>

<p><a href="https://omar.website/tabfs/doc/inspector.png"><img src="https://omar.website/tabfs/doc/inspector.png"></a>
</p>

<p>This console is …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://omar.website/tabfs/">https://omar.website/tabfs/</a></em></p>]]>
            </description>
            <link>https://omar.website/tabfs/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25600338</guid>
            <pubDate>Fri, 01 Jan 2021 02:48:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Logseq – The Open-Source Note Taking App]]>
            </title>
            <description>
<![CDATA[
Score 11 | Comments 3 (<a href="https://news.ycombinator.com/item?id=25600143">thread link</a>) | @tiensonqin
<br/>
December 31, 2020 | https://www.thefortunelabs.com/knowledge/logseq-the-note-taking-app/ | <a href="https://web.archive.org/web/*/https://www.thefortunelabs.com/knowledge/logseq-the-note-taking-app/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="text">
			
<p>Having spent the summer of 2020 testing out various note-taking tools / apps for <a href="https://www.thefortunelabs.com/personal-knowledge-management/">personal knowledge management (PKM)</a> purposes, there are a few, in my opinion, which really stand out from the rest. One of these is Logseq (<a data-type="URL" data-id="https://logseq.com/" href="https://logseq.com/" target="_blank" rel="noreferrer noopener">link</a>).</p>



<p>Before going into why I believe Logseq is one of the best note-taking apps out there, it might be worth remembering that instinctively when we need to write something down, the first thing we look for is a pen and some paper. When on the phone and we need to take a number down, the other person instinctively says “do you have a pen ready”. I believe this is because pen and paper:</p>



<ul><li>Feels natural,</li><li>Efficient,</li><li>Easy to use,</li><li>Free (minimal cost to owning a piece of paper and a pen),</li><li>Liberal (only the paper edges define the space you have available),</li><li>Ownership (you own it and can do what you want with it).</li></ul>



<p>In essence, you can pick up a pen and some paper and write at your heart’s content.</p>



<p>With that out of the way, let’s get into why Logseq, and why I found it (and think you will too) just as easy to use as pen and paper.</p>



<h2>Why Logseq?</h2>



<p>What makes Logseq what it is, is how the tool came to be, the founder and the team of developers he has with him, in addition to Logseq being a fantastic note-taking tool. The app is still in its early beta days, and there is a lot of development going on, but it is a breeze to use and with each update comes further stability and new features.</p>



<p>The tool came to life as a side project of an immensely friendly chap called Tienson Qin <a href="https://twitter.com/tiensonqin">Twitter</a>. Having notes but nowhere convenient to put them, he developed Logseq. His passion for the tool and the time he takes to answer questions and grow the community are incredible. This passion, time and care are directly transferred to the Logseq tool. It is a true joy to use, and when things don’t go according to plan, you can sense he feels the pain and will look to put things right as soon as possible. The Devs also listen to their users’ comments and feedback and shape the future of the app with these in mind.</p>



<p>Logseq is local first (you are in control of your notes) with notes being saved in plain text files in both Markdown and Org Mode formats means that you are not tied into proprietary software – you can easily transfer your notes somewhere else or even open them with Notepad.</p>



<blockquote><p>The server will never store or analyse your private notes. Even if the website is down or can’t be maintained, your data is always yours. Your notes are stored in the local browser storage using IndexedDB and plain text files in a local directory or on GitHub. </p><cite>Logseq.com</cite></blockquote>



<p>When visiting Logseq.com we are greeted with a welcome page which highlights what is possible, as shown in the following example:</p>



<div><figure><img loading="lazy" width="1024" height="660" src="https://i1.wp.com/www.thefortunelabs.com/wp-content/uploads/2020/12/logseq-front.png?resize=1024%2C660&amp;ssl=1" alt="" srcset="https://i1.wp.com/www.thefortunelabs.com/wp-content/uploads/2020/12/logseq-front.png?resize=1024%2C660&amp;ssl=1 1024w, https://i1.wp.com/www.thefortunelabs.com/wp-content/uploads/2020/12/logseq-front.png?resize=300%2C193&amp;ssl=1 300w, https://i1.wp.com/www.thefortunelabs.com/wp-content/uploads/2020/12/logseq-front.png?resize=768%2C495&amp;ssl=1 768w, https://i1.wp.com/www.thefortunelabs.com/wp-content/uploads/2020/12/logseq-front.png?w=1277&amp;ssl=1 1277w" sizes="(max-width: 1024px) 100vw, 1024px" data-recalc-dims="1" data-lazy-srcset="https://i1.wp.com/www.thefortunelabs.com/wp-content/uploads/2020/12/logseq-front.png?resize=1024%2C660&amp;ssl=1 1024w, https://i1.wp.com/www.thefortunelabs.com/wp-content/uploads/2020/12/logseq-front.png?resize=300%2C193&amp;ssl=1 300w, https://i1.wp.com/www.thefortunelabs.com/wp-content/uploads/2020/12/logseq-front.png?resize=768%2C495&amp;ssl=1 768w, https://i1.wp.com/www.thefortunelabs.com/wp-content/uploads/2020/12/logseq-front.png?w=1277&amp;ssl=1 1277w" data-lazy-src="https://i1.wp.com/www.thefortunelabs.com/wp-content/uploads/2020/12/logseq-front.png?resize=1024%2C660&amp;is-pending-load=1#038;ssl=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure></div>



<p>Although the tool by default opens up on the daily journal page (with a new page being created for each day automatically) it is possible to change this by adding “:default-home {:page “WhateverFile”}” before the last “}” to the config file (under settings). This way you can direct the home page to be whatever note page you want.</p>



<h3>Features:</h3>



<p>There are many, many features available in Logseq and I have listed below what I consider to be the main ones:</p>



<ul><li>Ease of writing notes<em> – open up and off you go</em></li><li>Outliner – <em>Can structure your notes how you wish</em></li><li>Focus mode –<em> click on a bullet point to focus on that text</em></li><li>Collapse / expand –<em> easily expand and collapse blocks of notes to see what is of interest to you in a given moment</em></li><li>Note linking – <em>create links between notes at both a page and block-level</em></li><li>Backlinking –<em> easily see which pages and block link to the page</em></li><li>Sidebar actions – <em>see recent notes or open a note in the sidebar allowing you to work on two notes (or more) at once</em></li><li>Embed block – <em>include an embed of a block in another page where you can edit the contents which will be reflected in the original note</em></li><li>To-do list –<em> easily create to-do lists</em></li><li>Graph View – <em>Visualise a page or your notes collection in a graph</em></li><li>Favourites – <em>editable list of favourite notes in an easy to reach location</em></li></ul>



<p>I have included below a brief video of the things that it can do (<strong>please note that there have been a few changes to Logseq since the video was posted – a new and updated video is being prepared</strong>)</p>



<figure><p>
<iframe title="Logseq - A Roam Research Alternative for Notes / PKM / To Do / Journal" width="1200" height="675" src="https://www.youtube.com/embed/_BPlbNr6hzY?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</p></figure>



<h3>How I Use Logseq:</h3>



<p>You can use Logseq to take and organise your notes and personal knowledge in a non-linear manner. Use it to manage your to-do list, write your journals or, record the unique moments in your life. A brief overview of how I use it daily is included below:</p>



<figure><p>
<iframe title="How I use Logseq Daily - A Roam Research Alternative for Notes / PKM / To Do / Journal" width="1200" height="675" src="https://www.youtube.com/embed/JCIdJBZGQLQ?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</p></figure>



<h3>True Local Only Experience:</h3>



<p>The introduction of the stable Local Storage option means that it is now possible to store files locally (or Google Drive, OneDrive or DropBox, etc.) instead of having to save the notes in Github. This addition has truly made Logseq local only. I did a quick video overview of this in the following video:</p>



<figure><p>
<iframe title="Logseq Update for Local File Storage - The Roam Research Alternative for Notes / PKM / To Do" width="1200" height="675" src="https://www.youtube.com/embed/Afmqowr0qEQ?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</p></figure>



<p>If you were one of the early users of Logseq and want to take your notes from your GitHub repo to the local storage, I found the following manner works best:</p>



<ol><li>Go to your Github repo where you save your Logseq notes and on the right-hand side you should see a green “Code” button</li><li>Click this button and then click the last option “Download Zip” (This downloads your notes as a zip file)</li><li>Open the Zip folder you downloaded and copy / extract the contents to the location where your local Logseq directory is set. Copy the Journals from the zip to the journals on your machine and same for pages.</li><li>Go to Logseq.com and click on the refresh icon beside your avatar (top right hand side)</li></ol>



<h3>Pros and Areas of Improvement:</h3>



<p>The things I like about Logseq:</p>



<ol><li>Ease of using the tool and getting started,</li><li>Saves files locally so you are in total control,</li><li>Efficient to jot down something,</li><li>Liberal – can indent at your hearts content and chop and change text / reorder as you wish,</li><li>Easily search for anything you have written,</li><li>Speed of development and a great team behind it,</li><li>Free (donations are possible, see OpenCollective link below for more info).</li></ol>



<p>Do you see the resemblance of the advantages of using Logseq to those described why we typically go for pen and paper?</p>



<p>The things I hope to see in the near future:</p>



<ol><li>Better markdown format so that it is easier to copy and paste text between different applications. It feels a little cumbersome at the moment.</li><li>Desktop / mobile app for even quicker note-taking – this is more a wish rather than an improvement as working via a web browser is ok.</li></ol>



<h2>More Information:</h2>



<p>For more details be sure to check out:</p>



<ul><li><a href="https://logseq.com/" target="_blank" rel="noreferrer noopener">Logseq.com</a></li><li><a href="https://discord.com/invite/URphjhk" target="_blank" rel="noreferrer noopener">Discord</a></li><li><a href="https://opencollective.com/logseq" target="_blank" rel="noreferrer noopener">OpenCollective</a></li></ul>



<p>Thank you for reading, and I hope you give Logseq a try.</p>
		</div></div>]]>
            </description>
            <link>https://www.thefortunelabs.com/knowledge/logseq-the-note-taking-app/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25600143</guid>
            <pubDate>Fri, 01 Jan 2021 02:15:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[People should know more about how the 911 system works]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25599455">thread link</a>) | @ColinWright
<br/>
December 31, 2020 | https://tildes.net/~talk/u7g/whats_something_you_think_more_people_should_know_about#comment-609x | <a href="https://web.archive.org/web/*/https://tildes.net/~talk/u7g/whats_something_you_think_more_people_should_know_about#comment-609x">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-js-hide-sidebar-if-open="">



<article id="topic-u7g">
<header>
      <p><span>32</span>
    <span>
    votes
    </span>

    </p>

  
  <p>
      Posted <time datetime="2020-12-27T18:36:14Z" title="2020-12-27 18:36:14 UTC" data-abbreviated="6d 10h ago"><span>6 days, 10 hours ago</span></time> by
            <a href="https://tildes.net/user/kfwyre">kfwyre</a>


  </p>

</header>


    <div><p>Any answer is fair game: serious, funny, big, small, substantial, trivial, broad, niche, etc.</p>
<p>Let us know what it is and why you think more people should know about it.</p>
</div>

  <menu>










  </menu>
  


<section>
    
    <header>
      <h2>59 comments</h2>

      

      <form method="get">
        <p><label for="comment_order">Comments sorted by</label>
          
          
        </p>
      </form>
    </header>

  <ol id="comments">
    <li>    <article id="comment-609x" data-comment-id36="609x" data-comment-replies="4" data-comment-depth="0">
        <div>
    <header>
      

        <p>[10]</p>

            <a href="https://tildes.net/user/Ellimist">Ellimist</a>



        <p><time datetime="2020-12-27T21:36:25Z" title="2020-12-27 21:36:25 UTC" data-abbreviated="6d 7h ago"><span>6 days, 7 hours ago</span></time>

            <span>
              (edited <time datetime="2020-12-27T21:48:06Z" title="2020-12-27 21:48:06 UTC" data-abbreviated="6d 7h ago"><span>6 days, 7 hours ago</span></time>)
            </span>
        </p>

      <a href="https://tildes.net/~talk/u7g/whats_something_you_think_more_people_should_know_about#comment-609x">Link</a>

        <p>How the 911 system operates, at least in the US Also, apologies on the formatting, was doing this on mobile while waiting for a car detail I’m a 911 dispatcher for a smallish Texas suburb in the...</p>
    </header>


          <ul><li>Exemplary</li></ul>


      <div>

        <p>How the 911 system operates, at least in the US</p>
<p>Also, apologies on the formatting, was doing this on mobile while waiting for a car detail</p>
<p>I’m a 911 dispatcher for a smallish Texas suburb in the DFW metroplex. Be 4 years in June.</p>
<p>Unfortunately there’s a lot of misinformation on how 911 works. Here’s some things I think people should know</p>
<ol>
<li>Contrary to movies and TV, we don’t always magically know where you are. In many cases, we don’t have a clue. I’ve had countless callers that simply say “I need the police” or “I need an ambulance” and then hang up. And then they refuse to answer my callbacks. So now, I have a 911 request and have to do a bunch of guesswork to figure out where 911 is needed which can greatly delay the response. How do I do that?</li>
</ol>
<ul>
<li>
<p>Check the ping info. All 911 calls that come into my agency have varying degrees of location information. Varying is the key word. It can be as accurate as 5 meters to a specific house or 2000 meters off a cell tower. And this only works from the time the phone dials into 911 to the time the phone hangs up. The longer we have someone on the line, the more likely we get accurate location information but it’s not a certainty</p>
</li>
<li>
<p>Check the number for prior history. We have frequent flyers that we know. I’ve got callers I’ve dealt with enough that I often have an idea of what’s going on the second I see the number pop up on my Callworks. But this is no guarantee. Someone visiting from out of town isn’t likely going to have history in my city</p>
</li>
<li>
<p>If those two steps don’t yield the results I’m looking for, I move on to checking with the phone carriers. T-Mobile, Verizon, and ATT all have numbers I can call to get subscriber information(name, address on the account) and can get them to ping the phone so we can try to get location information. This location info is given via map coordinates(latitude/longitude), not exact locations. From here, I plug the coordinates into Google Maps and hope for the best. Problem here is that many phones that dial 911 aren’t owned by the same people who initially registered the account. For example, a parent who gives their son or daughter a phone. The subscriber information may show an address in a completely different city. And the ping information we get can be unreliable as well. Just last night, I had T-Mobile ping a phone of an elderly who went missing. The ping location had an accuracy radius of 1500 meters and the ping coordinates where in the middle of a nearby lake.</p>
</li>
<li>
<p>Uninitialized phones are a death trap. These phones are phones that aren’t technically active. They don’t have a SIM card or an active account with a carrier. Think something like a prepaid phone or a random old cell phone in a drawer. By law, any cell phone must be capable of dialing 911. However, these numbers cannot be called back. If you call from one of these phones, you can be in the process of being murdered and there’s little I can do.</p>
</li>
<li>
<p>You can be in a completely different city and get my agency. Due to the layout of cell towers, I get 911 requests from 5 or 6 cities around me. This is usually rectified by simply transferring the caller to the appropriate agency. However, it does happen that my city might share similar street addresses. Meaning you might rattle off an address that comes up in my CAD but is in another city entirely.</p>
</li>
</ul>
<p>If anyone takes anything from this post, take this......</p>
<p>Know your location. The city you’re in. Look for street signs, businesses....anything that can help me find you faster.</p>
<p>If you’re in someone’s house, look for mail. Check the fridge. Check someone’s wallet even. Pull it up on Google Maps if you can.</p>
<p>The most important thing you can do in an emergency is give me accurate location information. Knowing exactly where you are means I can get help to you a lot faster than if I’m going through the above steps to find you.</p>
<p>People have died because they didn’t know where they were and the 911 system couldn’t find them in time. Things have gotten a lot better in just the 3.5 years I’ve been working as a dispatcher but there still isn’t 100% certainty I can find someone in a crisis</p>
<ol start="2">
<li>
<p>Text to 911 is a thing. This can be especially useful for women in dangerous situations but anyone can utilize it. The short of it is you, quite literally, text 911. We’re gonna ask all the same questions we would of a regular voice call and treat it exactly the same.</p>
</li>
<li>
<p>911 operators experience PTSD at similar rates as police officers and firefighters. Even though we don’t see the emergencies, we don’t see the dead bodies, 911 operators experience PTSD the same way police and fire fighters do. Turns out just hearing these tragedies can do a number on your psyche. Despite this, 911 operators are classified by the Federal government as “Clerical” workers, not “first responders” and even some of our police and fire coworkers treat us a little more than secretaries.</p>
</li>
</ol>
<ul>
<li>
<p>My agency has done some work to rectify the latter by making police officers sit in Dispatch and work a shift with us, taking calls, working the radio etc.....95% of the officers will tell us “I don’t know you do that every day, I’m sorry I was asshole on the radio”.</p>
</li>
<li>
<p>My manager and the relatively new police chief are both fairly progressive, by law enforcement standards anyway, in that they take mental health seriously and they are more than willing to help someone who is struggling. Whether it’s time off or getting someone into contact with the right people, they’ll what they can.</p>
</li>
</ul>
<ol start="4">
<li>No dispatch operates the same way. For my city, of about 70k people, we typically have anywhere from 2-4 dispatchers on a 12 hour shift. A typical breakdown for a day shift would be 4 dispatchers. 1 works PD radio, one works FD radio, one works the Traffic channel, and one is first up for 911 and admin phones. However, the PD and FD dispatchers are still required to answer 911 if the need arises. Meaning you can be working an active incident like a police chase or structure fire and still have to answer 911 and give CPR instructions while somehow managing to give both situations your undivided attention.</li>
</ol>
<ul>
<li>
<p>Other cities, though, especially the larger ones, have dedicated call takers, dedicated dispatchers, dedicated NCIC(warrants, stolen vehicles etc) operators that focus solely on their responsibilities and aren’t required to multi task like I am.</p>
</li>
<li>
<p>I work nights meaning that 11 or 12 midnight, we’re down to 3 dispatchers. Sometimes just 2. But by 2am, we’re down to 2 all the time. The vast majority of the time, for that late, 2 is enough. But a single major incident like a structure fire can make things pretty tense.</p>
</li>
<li>
<p>So if you call 911, and your call taker sounds a bit distracted, chances are he or she isn’t actually distracted or bad at their job but is trying to balance your call with radio traffic. It ain’t easy listening to and processing two sources of audio simultaneously, being able to create and call for service and put call notes in, and do whatever an officer or firefighter might need at a moments notice</p>
</li>
</ul>
<p>That’s all I can think of for now. If anyone has any specific questions about anything, feel free to drop them here or in a DM.</p>
<p>Some related articles for reading for those interested</p>
<p><a href="https://www.google.com/amp/s/www.vice.com/amp/en/article/9398qy/911-dispatchers-hear-the-worst-moments-of-our-lives-who-listens-to-them">https://www.google.com/amp/s/www.vice.com/amp/en/article/9398qy/911-dispatchers-hear-the-worst-moments-of-our-lives-who-listens-to-them</a></p>
<p><a href="https://www.safety.com/calling-911/">https://www.safety.com/calling-911/</a></p>
<p><a href="https://www.google.com/amp/s/www.washingtonpost.com/health/2020/02/22/student-died-911-call-location/%3foutputType=amp">https://www.google.com/amp/s/www.washingtonpost.com/health/2020/02/22/student-died-911-call-location/%3foutputType=amp</a></p>

      </div>

      <menu>
          <p>43 votes</p>








      </menu>
      
  </div>


      <ol>
          <li>    <article id="comment-60et" data-comment-id36="60et" data-comment-replies="1" data-comment-depth="1">
        <div>
    <header>
      

        <p>[2]</p>

            <a href="https://tildes.net/user/kfwyre">kfwyre</a>


          <span>
            (<abbr title="Original Poster (of the topic)">OP</abbr>)
          </span>

        <p><time datetime="2020-12-28T20:54:54Z" title="2020-12-28 20:54:54 UTC" data-abbreviated="5d 7h ago"><span>5 days, 7 hours ago</span></time>

        </p>

      <a href="https://tildes.net/~talk/u7g/whats_something_you_think_more_people_should_know_about#comment-60et">Link</a>
        <a href="https://tildes.net/~talk/u7g/whats_something_you_think_more_people_should_know_about#comment-609x" data-js-comment-parent-button="">Parent</a>

        <p>This is an absolutely incredible response. Thank you so much for taking the time to type it all out and share it, and thank you again for doing a very difficult and very under-appreciated job. I...</p>
    </header>




      <div>

        <p>This is an absolutely incredible response. Thank you so much for taking the time to type it all out and share it, and thank you again for doing a very difficult and very under-appreciated job. I used to know a dispatcher who would share some of her experiences with us, and some of the stories she told shook me to my core. What you do requires incredible fortitude and resolve.</p>
<p>One thing to add that has come in handy for me, as someone from the other side of the call: being aware of mile-markers while highway driving. When I first started learning to drive, knowing where I was on any given road was drilled into me as a part of my situational awareness. I no longer keep track of them like I used to (nearly every second I was behind the wheel), but the moment anything out of the ordinary happens, I immediately check the nearest mile marker in the event that there's an emergency. Most times nothing comes of it, but the few times I've had to call 911 while driving (due to witnessing cars going off the road, accidents, or outright hazardous drivers), I'm able to immediately identify the exact location to the dispatcher, which they seem to appreciate.</p>
<p>My …</p></div></div></article></li></ol></article></li></ol></section></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://tildes.net/~talk/u7g/whats_something_you_think_more_people_should_know_about#comment-609x">https://tildes.net/~talk/u7g/whats_something_you_think_more_people_should_know_about#comment-609x</a></em></p>]]>
            </description>
            <link>https://tildes.net/~talk/u7g/whats_something_you_think_more_people_should_know_about#comment-609x</link>
            <guid isPermaLink="false">hacker-news-small-sites-25599455</guid>
            <pubDate>Fri, 01 Jan 2021 01:01:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Design of the Roland Juno Syntheziser's Oscillators]]>
            </title>
            <description>
<![CDATA[
Score 163 | Comments 55 (<a href="https://news.ycombinator.com/item?id=25598656">thread link</a>) | @cushychicken
<br/>
December 31, 2020 | https://blog.thea.codes/the-design-of-the-juno-dco/ | <a href="https://web.archive.org/web/*/https://blog.thea.codes/the-design-of-the-juno-dco/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>This article is a comprehensive guide to the <a href="http://www.vintagesynth.com/roland/juno106.php">Roland Juno</a>'s <strong>digitally-controlled analog oscillators</strong> (<em>DCOs</em>). I fell in love with the Juno early in my synthesizer journey and I've spent the last year or so doing research on its design so that I could create my own Juno-inspired DCO, <a href="https://winterbloom.com/store/winterbloom-castor-and-pollux">Winterbloom's <em>Castor &amp; Pollux</em></a>.</p>
<p><img alt="Juno logo" src="https://blog.thea.codes/static/juno/juno-logo.png"></p>
<p>This article will cover a little history of the Juno, discuss the theory of operation behind digital-controlled oscillators, analyze the circuit designs for the Juno 6/60 &amp; the Juno 106, and discuss practical aspects of using DCOs. This article is somewhat lengthy and there is a <em>lot</em> of information here. I've tried my best to make this approachable for anyone with <a href="https://www.sparkfun.com/engineering_essentials">basic electronics knowledge</a>, so if you feel confused or overwhelmed please <a href="mailto:me@thea.codes">reach out</a> and I'll be more than happy to include more details or change something so that it's easier to understand.</p>
<h2 id="a-little-history">A little history</h2>
<p>Roland introduced the incredible <a href="http://www.vintagesynth.com/roland/juno6.php">Juno-6</a> and nearly identical <a href="http://www.vintagesynth.com/roland/juno60.php">Juno-60</a> in 1982. The Juno was a 6-voice polyphonic synthesizer that was an incredible value considering its array of features.</p>
<p><img alt="A photo of the Juno-60" src="https://blog.thea.codes/static/juno/juno-60.jpg"></p>
<p>The Juno notably featured <a href="https://en.wikipedia.org/wiki/Digitally_controlled_oscillator"><em>digitally-controlled analog oscillators</em></a>. The DCO was designed to overcome the tuning instability of the usual <strong>voltage-controlled oscillators</strong> (<em>VCOs</em>) in contemporary polyphonic synthesizers. The DCOs operate with the same fundamental analog circuitry but differ in that they are controlled by a microcontroller. This imparted a unique sound to the Juno series and one that's become a favorite of many musicians.</p>
<p><img alt="A photo of the Juno 106" src="https://blog.thea.codes/static/juno/juno-106.jpg"></p>
<p>Roland followed with the <a href="https://en.wikipedia.org/wiki/Roland_Juno-106">Juno-106</a> in 1984. It offered some feature upgrades over its predecessor such as pitch bend, modulation, and support for a new thing called <a href="https://en.wikipedia.org/wiki/MIDI">MIDI</a>. It still used the same digitally-controlled oscillator concept from the 6 &amp; 60, but its implementation is a little bit different.</p>
<p>This article will discuss and analyze both designs, but before getting into the nitty-gritty details let's take a look at the overall sound generation design of the Juno. Also, this article will refer to these three synthesizers - the 6, 60, and 106 - as <strong>the Juno</strong>, but note that this isn't necessarily applicable to later models.</p>
<h2 id="an-overview-of-the-junos-sound-generation">An overview of the Juno's sound generation</h2>
<p>The Juno has six voices. Each voice has a single oscillator that can generate three different <em>waveforms</em>. These oscillators are controlled by the microcontroller. Here's a block diagram that should help visualize the different parts at play:</p>
<p><img alt="A block diagram of a DCO-based synth" src="https://blog.thea.codes/static/juno/dco-block.png"></p>
<p>Sound generation starts with a <em>square</em> wave controlled by the microntroller and then goes through a series of <em>waveshapers</em> which generates a <em>ramp/sawtooth</em> waveform, a <em>sub</em> waveform (which is a square wave at half the frequency), and a <em>pulse</em> waveform. The frequency of the clock determines the frequency/note that the oscillator plays.</p>
<p>This is in contrast to a common design for a voltage-controlled oscillator (<em>VCO</em>) where a CPU isn't required. Instead, it uses analog circuitry to create a <em>control voltage</em> which determines the oscillator's frequency:</p>
<p><img alt="A block diagram of a VCO-based synth" src="https://blog.thea.codes/static/juno/vco-block.png"></p>
<p>Now that you've got a high-level overview of the sound generation inside of these synthesizers, let's take a deeper look at the components involved in sound generation.</p>
<h2 id="the-ramp-generator">The ramp generator</h2>
<p>Before jumping into the difference between DCOs and VCOs it's useful to discuss the similarities. As shown in the block diagrams above several designs for VCOs <strong>and</strong> the Juno DCOs are designed around a <strong>ramp generator</strong> (sometimes referred to as a <em>ramp core</em>) which creates a <em>sawtooth</em> (ramp) waveform:</p>
<p><img alt="A sawtooth waveform" src="https://blog.thea.codes/static/juno/ramp.png"></p>
<p>The ramp generator is the beginning of how an oscillator turns a <em>frequency input signal</em> into the various useful waveforms that are used to make musical sounds. For a VCO, the frequency input signal is a <strong>control voltage</strong>, hence "voltage-controlled". For a DCO, the frequency input signal is a <strong>digital clock</strong>, hence "digitally-controlled".</p>
<p>The difference in the type of input signal has a significant impact on the circuit design. Before getting into those differences, let's look at the heart of the ramp generator that's shared between both designs: the <strong>integrator</strong>.</p>
<h2 id="the-integrator">The integrator</h2>
<p>An integrator is a electronic circuit that performs the mathematical operation of <a href="https://en.wikipedia.org/wiki/Integral"><em>Integration</em></a>. This is a fancy word from calculus but don't be afraid- it's actually pretty straightforward in practice.</p>
<p>The purpose of an integrator is to produce an output signal that changes (increase or decreases) at a rate that corresponds to the magnitude and duration of the input signal. In this case the input and output signals are both voltage. If you apply a <strong>constant</strong> voltage to an integrator, it will create a consistent increase or decrease in the output voltage over time (a <em>ramp</em>):</p>
<p><img alt="An ideal integrator" src="https://blog.thea.codes/static/juno/integrator-ramp.png"></p>
<p>More voltage means that the ramp will have a steeper slope. This is going to be helpful in generating a sawtooth waveform- the integrator ramp produces exactly one cycle of a sawtooth waveform. The trick is getting it to restart so that it creates a repeating (or <em>periodic</em>) sawtooth waveform.</p>
<p>You can create an integrator using an <a href="https://www.electronics-tutorials.ws/opamp/opamp_6.html">op-amp integrator circuit</a>:</p>
<p><img alt="A basic op-amp integrator circuit" src="https://blog.thea.codes/static/juno/op-amp-integrator.png"></p>
<p>The op-amp integrator is based on the idea that if you apply a voltage to a capacitor it <a href="http://hyperphysics.phy-astr.gsu.edu/hbase/electric/capchg.html">takes some time to charge</a>, in fact, it will charge at a rate that is proportional to the input voltage which sounds a <em>lot</em> like integration! Without going into too much op-amp theory, you can just assume that the integrator circuit will produce a voltage that increases or decreases at a rate determined by the input voltage and the values of <code>R</code> and <code>C</code>. The values of <code>R</code> and <code>C</code> determine the <a href="https://www.electronics-tutorials.ws/rc/rc_1.html"><strong>RC constant</strong></a> of the integrator - or put more simply, <em>how long it takes the circuit to charge up</em>. Remember this concept because it comes into play a <em>lot</em> in this article.</p>
<p>You can play around this with interactive illustration to see how changing the voltage, resistance, or capacitance changes the output of the integrator:</p>
<canvas id="integrator" width="1000" height="600"></canvas>


<p>The formula used to determine the output voltage of an integrator with a constant input voltage at a given time is:</p>
<pre><span>Vout</span> <span>=</span> <span>-</span><span>(</span><span>Vin</span> <span>/</span> <span>(</span><span>R</span> <span>*</span> <span>C</span><span>))</span> <span>*</span> <span>time</span>
</pre>
<p>Before going further, there are some interesting and noteworthy properties of the integrator's behavior to be aware of:</p>
<ul>
<li>First, notice that there are three ways of changing the steepness of the output's slope: changing the capacitance, changing the resistance, or changing the voltage. Making the voltage higher will charge the capacitor more quickly and increase the steepness of the slope. Making the resistance or capacitance lower will also cause the capacitor to charge more quickly and will increase the steepness of the slope.</li>
<li>Second, the output is <strong>inverted</strong> - a positive input voltage creates a downward slope and a negative input voltage creates an upward slope. This will come into play when we look at the difference between the Juno-6/60 design and the Juno-106 design.</li>
<li>Third, notice that with steeper slopes the output will <em>saturate</em> (stop increasing or decreasing). This is because a real op amp doesn't have an infinite amount of voltage to output and the capacitor can't hold an infinite amount of charge, so when either the output voltage is beyond the op amp's power supply or the capacitor can't hold any more charge the output voltage will saturate.</li>
</ul>
<p>At this point you should hopefully have a good grasp on how an op-amp integrator forms a ramp from a constant input voltage. So now we'll see how to change the circuit so that instead of a single slope it generates a repeating (periodic) sawtooth waveform.</p>
<p>A straightforward solution is to just start the circuit over - <strong>reset</strong> it. That'll start the ramp back at zero and let it start rising (or falling) again. If you keep resetting at regular intervals the circuit will keep generating ramps and which form cycles of the sawtooth waveform.</p>
<p>But what does it mean to reset a circuit? Well, it means to put it back into its initial state. Think about what <em>changes</em> in the integrator circuit over time: the <strong>charge</strong> of the capacitor. When the circuit first starts the capacitor has no charge and the output voltage is zero, but, as time goes on the capacitor charges more and more. So resetting the circuit means <em>discharging</em> the capacitor.</p>
<p>The easiest way to discharge a capacitor is to <em>short</em> it: connect its two leads together so there's nothing blocking it from discharging. You can do that by putting a little switch in the circuit:</p>
<p><img alt="An op-amp integrator with a switch to discharge the capacitor" src="https://blog.thea.codes/static/juno/integrator-with-switch.png"></p>
<p>When the switch is open the integrator behaves the same as before - its output goes up or down depending on the input voltage. When the switch is closed, it creates a circuit that connects the capacitor's leads and allows it to discharge:</p>
<p><img alt="An op-amp integrator with a switch to discharge the capacitor" src="https://blog.thea.codes/static/juno/integrator-with-switch-closed.png"></p>
<p>Once the switch is opened again the integrator starts over and begins ramping its output again.</p>
<p>Try out the little simulation below - press <code>start</code> to let the capacitor charge for a little bit and then press <code>close switch</code> to reset it:</p>
<canvas id="discharge" width="1000" height="600"></canvas>


<p>Take notice that when you press the button at consistent intervals the output is a sawtooth waveform and its frequency is determined by how often you press the button and reset the capacitor.</p>
<p>Obviously there aren't any synthesizers out there that require you to manually tap a switch at the desired note's frequency!<sup id="fnref:fast"><a href="#fn:fast">1</a></sup> So instead of requiring a person to press a switch this circuit should take some form of <strong>frequency input signal</strong> and use it to electronically close the switch.</p>
<p>The switch is the easy part - there's a well-known component that can act as an <em>electronically-controlled switch</em>: the <a href="https://learn.sparkfun.com/tutorials/transistors/all">transistor</a>. So, the ramp generator will use a transistor in place of the switch:</p>
<p><img alt="An op-amp integrator with a transistor to discharge the capacitor" src="https://blog.thea.codes/static/juno/integrator-with-transistor.png"></p>
<p>Note that I am explicitly not specifying which kind of transistor (PNP, NPN etc)- which one you choose depends on a few other factors so for now I'll keep it abstract. Notice that there's also a new resistor there between the capacitor and the transistor. This is generally a low-value resistor and it's just there to limit the current that goes through the transistor when the capacitor discharges as too much current could damage the transistor.</p>
<p>So now the circuit has a means of electronically resetting the capacitor. The next step is to create a circuit that takes a frequency input signal …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.thea.codes/the-design-of-the-juno-dco/">https://blog.thea.codes/the-design-of-the-juno-dco/</a></em></p>]]>
            </description>
            <link>https://blog.thea.codes/the-design-of-the-juno-dco/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25598656</guid>
            <pubDate>Thu, 31 Dec 2020 23:42:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[UK formally leaves European Union after 48 years]]>
            </title>
            <description>
<![CDATA[
Score 100 | Comments 209 (<a href="https://news.ycombinator.com/item?id=25598606">thread link</a>) | @mhh__
<br/>
December 31, 2020 | https://www.rte.ie/news/brexit/2020/1231/1187075-brexit-transition-end/ | <a href="https://web.archive.org/web/*/https://www.rte.ie/news/brexit/2020/1231/1187075-brexit-transition-end/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section itemprop="articleBody" data-epic-field="content">
<p>The United Kingdom's Brexit transition period expired at 11pm last night, ending a 48-year history with the European project.</p>
<p>New <a href="https://www.rte.ie/news/2020/1228/1186705-brexit-eu/" target="_blank">trading rules now apply</a> between Britain and the EU.</p>
<p>Speaking on Wednesday, British Prime Minister Boris Johnson said the destiny of the UK now lies firmly in its people's hands.</p>
<p>He said his government would take on the duty "with a sense of purpose and with the interests of the British public at the heart of everything" it&nbsp;does.</p>
<p>Mr Johnson spoke of wanting a new relationship with the EU as its biggest ally, after <a href="https://www.rte.ie/news/2020/1230/1186933-brexit/" target="_blank">MPs approved the Brexit Withdrawal Agreement yesterday with an overwhelming majority in a House of Commons vote</a>.</p>
<p>17.4 million voters, or 52%&nbsp;opted to leave the EU in a referendum on 23 June 2016.&nbsp;16.1 million, or 48%, voted to remain.&nbsp;</p>
<p>The result of that referendum has dominated British politics ever since and seen the departure of two Prime Ministers,&nbsp;David Cameron and Theresa May,&nbsp;as debate raged about whether another referendum should be called, and how the result of the 2016 vote should be implemented.</p>
<p>The referendum showed a United Kingdom divided about much more than the European Union, and has fuelled soul-searching about everything from secession and immigration to capitalism, empire and modern Britishness.</p>
<p>After the United Kingdom leaves the Single Market and&nbsp;the Customs Union tonight, there is almost certain to be some disruption at borders. More red tape means more cost for those importing and exporting goods across the EU-UK border.</p>
<p>The English Port of Dover expects volumes to drop off in early January. The most worrisome period, it says, will be in mid&nbsp;to late January when volumes pick up again.</p>
<p>Walking away from almost half a century of membership means change to everything from pet passports and driving licence rules for the British in Europe to data rules.</p><hr>
<p><b><a href="https://www.rte.ie/news/brexit/" target="_blank">Latest Brexit stories</a></b></p>
<hr>
<p>After clinching a Christmas Eve trade deal intended to smooth out the worst disruption, European Commission President Ursula von der Leyen quoted both William Shakespeare and TS&nbsp;Eliot.</p>
<p>"Parting is such sweet sorrow," she said. "What we call the beginning is often the end. And to make an end is to make a beginning."</p>
<p><img alt="" src="https://img.rasset.ie/00110cec-614.jpg?ratio=1.78"></p>
<p><b>Deal reached to keep Gibraltar border open</b></p>
<p>Gibraltar's border with Spain will remain open following the end of the Brexit transition period,&nbsp;after the UK and European Union agreed a draft deal.</p>
<p>The Rock's status was not covered in the trade agreement reached by Boris Johnson on Christmas Eve, prompting concerns about what would happen when the transition period ends at 11pm tonight.</p>
<p>Gibraltar, whose sovereignty is disputed by Spain and Britain, will remain subject to the rule of the free-travel Schengen area, Spain's foreign minister said.</p>
<p>Arancha Gonzalez Laya announced that the "agreement in principle" means people in Gibraltar "can breathe a sigh of relief".</p>
<p>She said that further details on the agreement would be published in the New Year.</p>
<p>Foreign Secretary Dominic Raab said: "Today, working side by side with the chief minister of Gibraltar, and following intensive discussions with the Spanish government, we reached agreement on a political framework to form the basis of a separate treaty between the UK and the EU regarding Gibraltar.</p>
<p>"We will now send this to the European Commission, in order to initiate negotiations on the formal treaty.</p>
<p>"In the meantime, all sides are committed to mitigating the effects of the end of the transition period on Gibraltar, and in particular ensure border fluidity, which is clearly in the best interests of the people living on both sides.</p>
<p>"We remain steadfast in our support for Gibraltar and its sovereignty. I am grateful to foreign minister Laya and her team for their positive and constructive approach.</p>
<p>"We have a warm and strong relationship with Spain, and we look forward to building on it in 2021."&nbsp;</p>
<p><img alt="" src="https://img.rasset.ie/0015eea2-614.jpg?ratio=1.78"></p>
<p><b>Minister updates Cabinet of impact on fishing</b></p>
<p>The Minister for Agriculture has&nbsp;said that&nbsp;while trade can continue tariff-free, he updated the cabinet on the potential impacts on the agri-food and fishing sectors earlier this week.&nbsp;</p>
<p>"The main impacts in relation to administrative costs in doing trade with Britain and also health certification and SPS checks which agri-food products have to undergo," Charlie McConalogue said.</p>
<p>"There is differing assessments in what that might mean," he added.</p>
<p>Speaking on RTÉ's Today with Philip Boucher Hayes, he said there has been significant support assured already in advance of Brexit for the agri-food sector in terms of grant aid and financial support.</p>
<p>He also said post-Brexit he will be going to Brussels to fight the Irish case as strongly as possible for the fisheries sector.</p>
<p>"The Brexit adjustment reserve, we will be looking for our significant share of that in terms of the compensation.</p>
<p>"Also, in terms of working with my European colleagues to ensure we have a strong allocation of quota as we possibly can."&nbsp;</p>
<p>Meanwhile, Revenue has confirmed that its specialised Customs Service is already operating in advance of the Brexit transition period ending tonight</p>
<p>From 11pm a valid Pre-Boarding Notification (PBN) is required for all goods carried by commercial vehicles to and from Britain by ferry.</p>
<p>Revenue says its Customs Roll on-Roll off (RoRo) Service is up and running and a transport company, haulier, importer, exporter or customs agent can create a PBN for any ferry due to sail after 11pm.</p>
<p>The Customs RoRo Service was designed to help efficiently move goods and vehicles between Ireland and Great Britain.</p>
<p>The service also allows truck drivers to check, prior to disembarking a ferry in Ireland, if a vehicle can exit the port or if it is required to call to Customs.</p>
<p><i><b>Additional reporting Mícheál Lehane&nbsp;&nbsp;</b></i></p>
</section></div>]]>
            </description>
            <link>https://www.rte.ie/news/brexit/2020/1231/1187075-brexit-transition-end/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25598606</guid>
            <pubDate>Thu, 31 Dec 2020 23:38:37 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Mimblewimble and Grin Are Different]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 4 (<a href="https://news.ycombinator.com/item?id=25598571">thread link</a>) | @phyro
<br/>
December 31, 2020 | https://phyro.github.io/what-is-grin/ | <a href="https://web.archive.org/web/*/https://phyro.github.io/what-is-grin/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <section id="main_content">
        

<p>The purpose of this series of posts is to describe how Grin works and what innovations it brings with it.</p>

<h2 id="table-of-contents">Table of contents</h2>

<ol>
  <li><a href="https://phyro.github.io/what-is-grin/mimblewimble.html">Mimblewimble and Grin</a></li>
  <li><a href="https://phyro.github.io/what-is-grin/interactive_txs.html">Interactive transactions</a></li>
  <li><a href="https://phyro.github.io/what-is-grin/grin_emission.html">Grin’s emission schedule</a></li>
</ol>

<p>New content might be added over time.</p>

<p><em>Thanks to John Tromp for the review and valuable input.</em></p>

      </section>
    </div></div>]]>
            </description>
            <link>https://phyro.github.io/what-is-grin/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25598571</guid>
            <pubDate>Thu, 31 Dec 2020 23:35:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Perfect Media Server – 2020 Edition]]>
            </title>
            <description>
<![CDATA[
Score 24 | Comments 3 (<a href="https://news.ycombinator.com/item?id=25598190">thread link</a>) | @alexktz
<br/>
December 31, 2020 | https://blog.ktz.me/the-perfect-media-server-2020-edition/ | <a href="https://web.archive.org/web/*/https://blog.ktz.me/the-perfect-media-server-2020-edition/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
                <div>
                    <p>Squeakin' in at the finish line of 2020, Perfect Media Server is back! </p><p>The 5th anniversary of the series is in February and to celebrate I have prepared a complete overhaul of the material and would like to present a brand new home both for the blog posts (this blog) and <a href="https://perfectmediaserver.com/">perfectmediaserver.com</a>.</p><blockquote><a href="https://perfectmediaserver.com/">perfectmediaserver.com</a> is the new home of the series.</blockquote><p>The new site is a wiki and will guide new and experienced users through the process of selecting the software and hardware to build a Perfect Media Server of their own. </p><p>It represents 100's of hours worth of work and aims to lower the barrier of entry for some of you to building your own PMS and to help spread the good word about Free and Open-Source Software. The site has a lot of the fundamentals completed but expect to see some work in progress labels here and there - they'll disappear over the next few weeks.</p><p>So what does this mean for the annual blog posts? Great question!</p><p>These blogs posts will now serve as an annual opinion piece on the state of the Perfect Media Server solution and chronicle any major changes that occurred throughout the year. Also on the agenda will be discussing the general state of Self-Hosting too. I do this regularly on the <a href="https://selfhosted.show/">Self-Hosted</a> podcast anyway so why not bring the highlights to the fore each year.</p><p>And now, on with the blog post...</p><h2 id="the-2020-edition">The 2020 edition</h2><p>Phewf, what a year. I don't know about you but the stay home orders have meant I've had more time to tinker and perfect things than ever before. However, I find that this entire system is so reliable that each year when it comes to write the post I find myself thinking "OK, it still just works. But that doesn't make for such great content. So... What do I even write about?".</p><p>I know that things are very stable and reliable for many of you too because you find me and tell me via <a href="https://selfhosted.show/discord">Discord</a> or <a href="https://twitter.com/IronicBadger">Twitter</a>. Several times a month I get contacted asking if <a href="https://perfectmediaserver.com/">PMS</a> is still relevant in 2020 and the answer is yes! Absolutely, yes.</p><p>You can find the previous incarnations of PMS below:</p><ul><li><a href="https://blog.linuxserver.io/2016/02/02/the-perfect-media-server-2016/">Perfect Media Server (2016 Edition) - The Original Solution</a></li><li><a href="https://blog.linuxserver.io/2017/06/24/the-perfect-media-server-2017/">Perfect Media Server (2017 Edition) - From scratch installation with extensive video guides</a></li><li><a href="https://blog.linuxserver.io/2019/07/16/perfect-media-server-2019/">Perfect Media Server (2019 Edition) - Boring is reliable and adding ZFS to the mix</a></li></ul><p>This year though it occurred to me that yet another blog post on it's own might not be that useful. However, a properly curated, open-source site with first class search and some kind of structure was the way forward.</p><h2 id="the-great-debate">The Great Debate</h2><p>Xbox vs Playstation. Gas vs Electric. Pragmatism vs Idealism. Build vs Buy. Emacs vs Vim. Unraid vs PMS. These are truly the great debates of our time. </p><p>In the end, there is no right or wrong answer and the only person who can decide which works best for you, is you. That said, there are plenty of reasons why rolling your solution might just be a better idea.</p><h2 id="cost-and-flexibility">Cost and Flexibility</h2><p>One might be forgiven for valuing the overall cost of a solution as the pain inflicted upon their wallet. But there is much more to it than that. </p><p>Of course, cost can be quantified financially but also consider the world altering power of Free and Open Source Software (FOSS). Every piece of software used to bring this text to your eyeballs is an open source project (Linux, Ghost, docker, docker-compose, nginx, rsync, mkdocs, Joplin, emacs + org-mode, QEMU, Proxmox etc).</p><p>Open Source is a gift and as such, supporting it wherever possible will lead to the betterment of humanity. Formula 1 even announced an open-source <a href="https://us.motorsport.com/f1/news/teams-open-source-designs-proposal/4552509/">design initiative</a>, wow!</p><p>By rolling your own solution you are investing in yourself. You are learning skills that will make you more likely to interview well if you'd like to get a job working with Linux. In my opinion, this angle is all too often completely overlooked when picking a solution. The skills I learned building the original Perfect Media Server lead to several wonderful, life-changing situations and it is my hope that comparable opportunities are afforded to my readers and others undertaking a similar path.</p><p>Let us next consider money. A license for UnRaid costs $59-129 depending on how many hard drives you connect to it. A Synology or QNAP box will have an associated "tax" to cover the R&amp;D costs of their Operating System maintenance and development. Here's an awkward question though, what happens when these companies stop supporting these products or are acquired?</p><blockquote>"That'll never happen!"<br> - You at some moment in time</blockquote><p>Sadly though, these types of scenarios are much more likely to occur than we like to admit and there are countless examples in just the last 10 years. You must also consider what happens if the new owners decide to kill off your favourite product (Google are <em>the worst</em> for this). Perhaps they aren't making enough money because one-off license or hardware purchases are just that, one-offs.</p><p>It's a lottery in this scenario as to what happens next. Maybe the source code will be released and the open source community will take it over, maybe it won't. Why take the risk? It might make sense if there weren't viable alternatives but lucky for you, you're reading this article.</p><p>My final argument in relation to cost is a lack of flexibility. By using a specific vendors product you are deferring many important decisions to them. Sometimes this is good, sometimes not.</p><p>In 2016 PMS was running ‘bare metal’. In other words, it was the primary OS installed on the system. Fast forward to today and I’ve moved the installation from bare metal to a VM in Proxmox and last Autumn to VM under VMware ESXi. More on this later.</p><p>In the <a href="https://blog.linuxserver.io/2019/07/16/perfect-media-server-2019/">2019 edition</a> I decided that whilst JBOD + SnapRAID parity was good enough for my ephemeral media collection, I wanted to enjoy some of the benefits of ZFS for my irreplaceable bits and bytes. Because PMS is 'just regular Linux', ZFS was just a single package install away. No waiting for a plug-in to be developed or for the vendor "officially" support it.</p><p>Technically Unraid can run ZFS, but it literally required a <a href="https://forum.level1techs.com/t/zfs-on-unraid-lets-do-it-bonus-shadowcopy-setup-guide-project/148764">Wendell</a> to figure it out -it is just Linux under the hood after all. Some of this lack of flexibility comes from the unique USB boot method employed by Lime Technology. They ship Unraid this way to make it more n00b friendly and easier to troubleshoot but paradoxically have created a unicorn that only they and their (honestly pretty great) community are intimately familiar with.</p><p>This is in contrast to using Ubuntu where almost any issue you encounter is not unique. You are probably able to Google yourself to an answer relatively quickly. Plus LTS releases, like 20.04, are guaranteed 5 years of maintenance updates from Canonical. I know of no such <em>guarantee</em> from Lime Technology, Synology, Q-NAP or other NAS vendor.</p><blockquote>Under the guise of simplicity we create elegant abstractions whilst inadvertently often making things harder to fix. Remember that cost is not just financial.</blockquote><p>The flexibility afforded to you by using full-blown Linux is vast. It is that flexibility which has enabled PMS to last me for 4 years and counting. The PMS system changes and adapts as I do.</p><h3 id="infrastructure-as-code-and-docker-compose">Infrastructure as Code and docker-compose</h3><p>A few years ago, I read a book called <a href="https://amzn.to/2WjBb5c">Infrastructure as Code</a> by Kief Moris. In this book, Kief lays out a framework for defining every part of your infrastructure in text files - or as we sometimes call it, code. This simple philosophy of managing configuration in the same manner as source code revolutionized the way I approach building systems. Tools like Ansible and Terraform may seem overkill for your average media server administrator but I firmly believe they have their place. An afternoon or two learning Ansible, and that is all it takes, will save you dozens of future afternoons scratching your head wondering how you accomplished something 3 weeks, 3 months or 3 years ago. We already covered improved job prospects but these skills are in demand, just do a quick Google search for "DevOps Engineer" jobs.</p><p>Readers frequently ask me "Which GUI do you recommend for docker?" and my answer is always <code>docker-compose</code>, which understandbly confuses folks as this isn't a GUI at all. This opinion is born out of countless times rebuilding boxes of my own and of others. If you've used a GUI you'll be able to relate to the tedium of clicking and typing over and over again, often guessing at the required input and having no way other than screenshots! to remember what you did. GUIs might feel as if they make the initial set up of a system easier but in the long run, they will bite you and be more difficult to maintain.</p><p>Let's now examine the supportability angle for a moment. Put yourself in the shoes of a friendly internet stranger helping you with something via a Discord chat or forum post to fix a problem with a container. It's likely they'll have to ask you to share the parameters used when creating that container. At some point, they're likely to ask you for a screenshot of the web interface of your NAS software or to paste a <code>docker-compose</code> yaml snippet. The yaml snippet is easier for you to share, easier for others to read and debug and also means you can't forget the variables used when creating that container. Reverse engineering a random <code>docker run</code> command from 6 months ago is no fun.</p><p>Recovering from a disaster is easier with a text file too. A backup can be as simple as copying and pasting a file to a Github repository. How do you backup a GUI? Maybe it's possible, maybe not. We can extend this philosophy well beyond just the <code>docker-compose.yaml</code> file. What about file sharing configuration via Samba? Users? Packages installed? Bash aliases? Monitoring configurations? The list goes on. Using Ansible 100% of the answers to these questions are stored in my <a href="https://github.com/ironicbadger/infra">IronicBadger/infra</a> git repo. Using two or three commands it is trivial to take a vanilla Ubuntu installation to fully functional media server in only a few minutes.</p><p>Your server will never be "finished". It is a living, breathing manifestation of your tinkering and learning. Infrastructure as Code allows …</p></div></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.ktz.me/the-perfect-media-server-2020-edition/">https://blog.ktz.me/the-perfect-media-server-2020-edition/</a></em></p>]]>
            </description>
            <link>https://blog.ktz.me/the-perfect-media-server-2020-edition/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25598190</guid>
            <pubDate>Thu, 31 Dec 2020 22:58:21 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Path to Fluent Japanese (2020)]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25597153">thread link</a>) | @sova
<br/>
December 31, 2020 | http://japanesecomplete.com/path/ | <a href="https://web.archive.org/web/*/http://japanesecomplete.com/path/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">    
    <!-- Hero section -->
    <section id="hero">
      <!-- Navigation -->
      <nav id="tmNav">              
        
      </nav>
      
      <div>
        <div>
            <h2>Mastering Japanese</h2>
            <p>
              Getting to Native-Level Japanese
              <br>A Straightforward <strong>Path to Mastery</strong>

              <br>by <span>Hake Hayashi</span><br>
              <span>27 October 2020</span>
            </p>
        </div>        
      </div>

            
    </section>

    <section id="introduction">
      <div>
        <div>
          <p><img src="https://jpc0.b-cdn.net/img/castle-sunset.jpg" alt="Japanese Castle at Sunset">
          </p>
          <div>
            <div>
                <h2>The Syllabaries</h2>
                <div><p>
                  The Japanese language, called 日本語（にほんご）[knee-hohn-go] is composed of 2 major syllabaries, <strong>Hiragana and Katakana.</strong> Made up of <strong>Consonant-Vowel pairs</strong> [ka, ga, ta, su, mu] as opposed to single letters that can be combined in variety, Hiragana and Katakana are two versions of the same collection, Katakana being used for <strong>foreign loan words</strong> since the reorganization of public education in 1962.</p><p>
                  In addition to Hiragana (the native script) and Katakana (reserved for foreign loan-words post-62), Japan imported symbolic glyphs from mainland Asia and they are referred to as 漢字（かんじ） kanji — letters of the Han Dynasty.
              </p></div>
                <p>
                  You can learn the Hiragana in the inside front cover of our <a href="https://japanesecomplete.com/guide">guide</a> that contains information on essential grammar, sentence structure, sound-effect language, and covers some of the more nuanced aspects of the language in plain English.</p>
                  
            </div>
          </div>
        </div>

        <div>
          <div>
            <h4>Hiragana ひらがな</h4>
            <p>Warm and curvy, the ひらがな [hiragana] are used for native Japanese words and are the primary phonetic syllabary of Japanese.
            </p>
            <p>あ　い　う　え　お</p>
            <p>か　き　く　け　こ</p>
            <p>さ　し　す　せ　そ</p>
            <p>た　ち　つ　て　と</p>
            <p>ま　み　む　め　も</p>
            <p><a href="https://japanesecomplete.com/guide">Full Hiragana Chart in our Guide…</a></p>
          </div>
        
        <div>
          <h4>Katakana カタカナ</h4>
          <p>
            The カタカナ [katakana] are sharp and angular, and while letters to friends have been written entirely in Katakana (and Kanji), <a href="https://upload.wikimedia.org/wikipedia/commons/3/3f/Masabumi_Hosono_titanic_diary.jpg">such as this beautiful letter recovered from the Titanic,</a> since 1962 the カタカナ [katakana] have been reserved for foreign loan-words such as "computer" コンピュータ [konpyuuta] and "glass" ガラス [garasu].  <br>カタカナ [katakana] have a one-to-one correlation with the ひらがな [hiragana] similar to how English has print and cursive.
          </p>
        </div>
        <div>
          <h4>Kanji 漢字（かんじ）</h4>
          <p>
           The 漢字（かんじ） [kanji] were imported lock, stock, and barrel from mainland Asia starting in the 5th century.  Fewer than 4% of them are pictographs, and over 90% of the kanji are "meaning and sound borrowers."  You can read more about the <a href="https://learnjapanesebest.wordpress.com/2019/12/11/the-four-types-of-kanji/">four types of kanji here.</a>
          </p>
        </div>
      </div>
    </div></section> <!--end part1-->

      <section id="part2">
      <div>
        <div>
          <div>
            <div>
                <h2>Practice Listening + Identifying</h2>
                <p>
                  「聞き取れない」（ききとれない）[kiki-torenai] is the Japanese expression for "unable to get a clear ear grab" of a sound or a term when listening.  The audible morphemes of Japanese require plenty of exposure to be able to distinguish them easily, due in part to the clunkiness of the syllabaries, the ひらがな Hiragana and カタカナ Katakana.  
              </p>
              <p>
                Japanese Complete provides a <a href="http://japanesecomplete.com/path/japanesecomplete.com/hiragana">ひらがな Hiragana listening challenge</a> for free to all; our カタカナ Katakana listening challenge is available to <a href="https://japanesecomplete.com/purchase">premium subscribers</a>
              </p>
                <p>
                  The site <a href="https://supernative.tv/">SuperNative.tv</a> has an incredible cornucopia of film and television show clips that one can watch on replay with subtitles and fill-in-the-blank exercises to practice the ability to "ear catch" or "ear grab" the audible morphemes of Japanese.  We highly recommend this resource for new learners to get an "ear grip" of the common Japanese sounds and how they are actually pronounced.  Naturally, real-life speech and the way it is written down may not appear to match up perfectly until one has plenty of exposure.</p>
                  
            </div>
          </div>
          <p><img src="https://jpc0.b-cdn.net/img/sakura-close.jpg" alt="Image">
          </p>
        </div>
    </div></section> <!--end part 2-->

  <section id="part3">
      <div>
        <div>
          <p><img src="https://jpc0.b-cdn.net/img/shinkansen-night.jpg" alt="Image">
          </p>
          <div>
            <div>
                <h2>Grammar: Particles</h2>
                <p>
                  Rather than relying on word sequence, Japanese relies on particles to partner with words in order to indicate the role of the word in the sentence.  Think of particles as dancing partners wearing brightly colored clothing who let you know the current occupation of their partner.  A subject dances with a pink-scarf wearing dancer.  A topic dances with a blue-scarf wearing dancer.  A destination of travel dances with a green-scarf wearing dancer.  When we look at the dancers, we can see clearly who they are dancing with, letting us know what the sentence means.  
              </p>
              <p>Particles are used to explain the <strong>who, what, when, where, and how</strong> of Japanese sentences and they are in <strong>post-fix position</strong>, meaning that they follow the words to which they snap.</p>
              <p>Mastery of particles is essential to having a native-level understanding of Japanese.  In fact, by exploring a frequency dictionary or the <a href="https://pj.ninjal.ac.jp/corpus_center/bccwj/en/">Balanced Corpus of Contemporary Written Japanese,</a> one will find that <em>of the 37 most frequent words, 17 of them are particles (45%).</em></p>
                <p>
                  In Japanese Complete we teach particles using a method devised specifically for Japanese Complete and not available elsewhere: <strong>the bunsetsu jar</strong>.  Every jar (which contains a person, place, or thing) needs a lid (which contains a grammatical particle).</p>
                  
            </div>
          </div>
        </div>
    </div></section> <!--end part3-->

      <section id="part4">
      <div>
        <div>
          <div>
            <div>
                <h2>Kanji: Meanings</h2>
                <p>
                  Japan imported symbolic glyphs from mainland Asia and they are referred to as 漢字（かんじ） kanji — letters of the Han Dynasty and there are <a href="https://learnjapanesebest.wordpress.com/2019/12/11/the-four-types-of-kanji/">four types of kanji</a> where only 4% are simple pictographs and over 90% are "meaning-and-sound borrowers."
              </p>
              <p>In acquiring Japanese, modern learners often rely on methods inspired by <a href="https://smile.amazon.com/Remembering-Kanji-Complete-Japanese-Characters/dp/0824835921?pldnSite=1">Heisig's Remembering the Kanji,</a> a book written by James Heisig after he had arrived in Japan too late to take the introductory course; upon asking his friends what the hardest part of the language was, he was quickly informed that the Kanji are a most formidable adversary.  He took the spare time before the next semester started to try his best to conquer this formidable opponent, and in the process discovered that he could break the kanji down section-by-section, part-by-part, and develop clever mnemonic devices and imaginary scenes to remember their <strong>general meanings</strong> for the long-term.
              </p>
                <p>
                  Heisig only provides clear and concise mnemonics for the first hundred-or-so kanji in his series, which is quite deflating to the beginner, leaving much of the creative and mental work to the learner when they could be absorbing, rather than generating, content.  This is the reason that we have taken it upon ourselves at Japanese Complete to provide detailed mnemonic lessons for the kanji we teach.  You can see the most frequent 777 kanji on our <a href="https://japanesecomplete.com/777">777 kanji list.</a></p>
                
            </div>
          </div>
          <p><img src="https://jpc0.b-cdn.net/img/shrine-green.jpg" alt="Image">
          </p>
        </div>
    </div></section> <!--end part 4-->

  <section id="part5">
      <div>
        <div>
          <p><img src="https://jpc0.b-cdn.net/img/himeji-sky.jpg" alt="Image">
          </p>
          <div>
            <div>
                <h2>Verbs: Meanings, Connotations</h2>
                <p>
                  Every Japanese sentence ends with a verb.  Our classification scheme in Japanese Complete comes from conversations with expert language teachers from University College London and Middlebury College, schools renowned for their East Asian studies and language departments.  While normal textbooks try to wedge Japanese grammar as a round peg into the square-hole shape of English, Japanese Complete strives to simplify the equation as much as possible while retaining all the fidelity and integrity of real Japanese.  Our <a href="https://japanesecomplete.com/reverse-engineer/">Reverse Engineering a Japanese Sentence</a> page details how our classification of verbs and nouns differs from common textbooks, and illustrates how they are more coherent with actual Japanese.
              </p>
              <p>In general, verbs are the missing piece of every Japanese sentence and we must wait until the end of the sentence or phrase to hear or read them.  This is what makes translation and interpretation notoriously difficult, for a translator needing a verb to connect two thoughts, nouns, or ideas, must allow the Japanese speaker to complete the phrase, adding a significant delay to the process, all-the-while needing to be able to perceive the beginning of the next phrase.  The latency effect in translating and interpreting Japanese makes this skill quite coveted in tourism, national and international diplomacy, and any role where interpretation in real-time is a must.
              </p>
                <p>
                By learning a large subset of verbs in their "plain-form" first, and then learning how to transform verbs into their variety of tenses and aspects, one builds a solid foundation for understanding written and oral Japanese.  <strong>It is wise to familiarize oneself with the great variety of tenses, active and passive constructions, and formality levels early on, so that they are not completely foreign when encountered later on in advanced studies.</strong>  In Japanese Complete, we teach politeness levels, active and passive tenses, and the variety of verbs early on so that learners have a solid foundation and are not surprised to find whole new constructions in years 3 or 4, but instead are immediately confronted with the variegated tones of the language and its inflexions.
                </p>
                
            </div>
          </div>
        </div>
    </div></section> <!--end part 5-->

      <section id="part6">
      <div>
        <div>
          <div>
            <div>
                <h2>Kanji: Masking</h2>
                <p>
                  Have you ever written a message using emoji only?  Did you know that emoji is a word imported from Japanese?  
              </p>
              <p>
                Just as there are ways to communicate entirely using emoji, Japanese adopted a way early on of using …</p></div></div></div></div></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://japanesecomplete.com/path/">http://japanesecomplete.com/path/</a></em></p>]]>
            </description>
            <link>http://japanesecomplete.com/path/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25597153</guid>
            <pubDate>Thu, 31 Dec 2020 21:09:03 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[When Nintendo fought a device that gave Mario 'new superpowers']]>
            </title>
            <description>
<![CDATA[
Score 88 | Comments 47 (<a href="https://news.ycombinator.com/item?id=25596587">thread link</a>) | @avery42
<br/>
December 31, 2020 | https://www.cbc.ca/archives/super-mario-enhancer-1990-1.5799393 | <a href="https://web.archive.org/web/*/https://www.cbc.ca/archives/super-mario-enhancer-1990-1.5799393">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>The Game Genie could make Super Mario jump higher. But Nintendo didn't want him to, and in 1990 the game maker sued a Canadian company over the product.</p><div><p><span><span><div><div title="Game Genie's battle with Nintendo" role="button" tabindex="0"><div><div aria-labelledby="1817989699690-metadata-" title="Game Genie's battle with Nintendo"><div><p><img src="https://thumbnails.cbc.ca/maven_legacy/thumbnails/139/87/game_genie_1391x691.jpg" alt="" loading="lazy"></p></div></div></div></div></div><span>The Game Genie was supposed to make Super Mario jump higher. But in 1990 Nintendo said the console add-on amounted to copyright infringement.<!-- --> <!-- -->2:30</span></span></span></p><p><span><p>The Game Genie could make Super Mario jump higher. But Nintendo wanted to keep him just the way he was.</p>  <p>On Nov. 18, 1990, the CBC business program <em>Venture </em>took viewers inside Nintendo's U.S. headquarters, where frustrated gamers could call for support when playing the video game <em>Super Mario Brothers</em>&nbsp;and others.</p>  <p>"<em>Crystalis</em>," said a caller on the phone with a customer service representative, with an inquiry about the role-playing game of the same name. "I can't defeat the general."</p>  <p>But, as correspondent Nora Pratt explained, the "army of kids" working Nintendo's hotline might not have to field calls about such games for much longer.&nbsp;&nbsp;</p>  <h2>'New superpowers'</h2>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5799671.1605209899!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/nintendo-help-line.jpg 300w,https://i.cbc.ca/1.5799671.1605209899!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/nintendo-help-line.jpg 460w,https://i.cbc.ca/1.5799671.1605209899!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/nintendo-help-line.jpg 620w,https://i.cbc.ca/1.5799671.1605209899!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/nintendo-help-line.jpg 780w,https://i.cbc.ca/1.5799671.1605209899!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/nintendo-help-line.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5799671.1605209899!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/nintendo-help-line.jpg"></p></div><figcaption>"Did you use the sword of thunder?" asked a troubleshooting customer service representative at Nintendo's American headquarters.<!-- --> <!-- -->(Venture/CBC Archives)</figcaption></figure></span></p>  <p>The reason was a product called the Game Genie, which was distributed in Canada by a company called Camerica.</p>  <p>"Game Genie is an electronic device that lets you give new superpowers to the battling heroes of Nintendo's games," explained Pratt.</p>  <p>According to the Globe and Mail, it was&nbsp;a cartridge that could be attached to a Nintendo game cartridge before being inserted into the game console.&nbsp;</p>  <p>But Nintendo —&nbsp;a Japanese company that had sold $4 billion in games that year —&nbsp;said the Game Genie was "riding on our coattails."&nbsp;</p>  <p>"They are taking our copyrighted work and changing it," said Howard Lincoln, a vice president at Nintendo. "There's no difference between what's happening here and if I were to write <em>Gone With the Wind</em> and change the characters, change the story, change the ending."</p>  <h2>'Mutilating' Mario</h2>  <p><span><span><div><div title="Trouble for the Game Genie" role="button" tabindex="0"><div><div aria-labelledby="1820732483767-metadata-" title="Trouble for the Game Genie"><div><p><img src="https://thumbnails.cbc.ca/maven_legacy/thumbnails/706/827/jump_higher_1383x788.jpg" alt="" loading="lazy"></p></div></div></div></div></div><span>A Canadian company marketing a device to enhance Nintendo game play gets legal pushback from the video game giant.<!-- --> <!-- -->5:05</span></span></span></p>  <p>Pratt said Camerica's David Harding viewed it differently, comparing&nbsp;the device he sold for $50 wholesale to retailers to&nbsp;"any other software add-on."</p>  <p>His company&nbsp;had purchased the "world distribution rights" from Game Genie's&nbsp;British inventors 18 months earlier, and was expecting the Game Genie to generate up to 30 per cent of Camerica's revenues.</p>  <p>"Half a million plus," he said. "That's how many I plan on selling."</p>  <p>An excerpt from a TV commercial for the Game Genie "enhancer" touted its powers to make&nbsp;gamers&nbsp;"run faster" and "jump higher" with a list of retailers already selling it, including Toys R Us, <a href="https://www.cbc.ca/archives/the-240m-deal-that-meant-a-fast-farewell-for-kmart-in-canada-1.5443333">Kmart</a>, Woolco and <a href="https://www.cbc.ca/archives/the-days-when-tough-times-provided-good-times-for-zellers-1.5417584">Zellers</a>.</p>  <p>In August 1990, explained Pratt, Nintendo had filed a lawsuit charging Camerica&nbsp;with "violating their copyright, mutilating an artistic work ... and just plain stealing the fun out of their game."&nbsp;&nbsp;</p>  <p>"It makes our game boring," said Lincoln.</p>  <h2>Legal head-to-head</h2>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5799765.1605626142!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/warehouse-boxes.jpg 300w,https://i.cbc.ca/1.5799765.1605626142!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/warehouse-boxes.jpg 460w,https://i.cbc.ca/1.5799765.1605626142!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/warehouse-boxes.jpg 620w,https://i.cbc.ca/1.5799765.1605626142!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/warehouse-boxes.jpg 780w,https://i.cbc.ca/1.5799765.1605626142!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/warehouse-boxes.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5799765.1605626142!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/warehouse-boxes.jpg"></p></div><figcaption>Without a victory in court, Camerica faced being stuck with a warehouse full of Game Genies it couldn't sell.<!-- --> <!-- -->(Venture/CBC Archives)</figcaption></figure></span></p>  <p>"Their opinion is, it's harmful to the industry," Harding was seen telling his team after Nintendo filed a second lawsuit.</p>  <p>Both companies had hired PR firms and many lawyers in their fight to control the powers of, "the man in the red hat," as Pratt called Mario.</p>  <p>"That hat's worth billions in sales," said the reporter.</p>  <p>In February&nbsp;1991, according to the Associated Press, Nintendo lost its bid to halt sales of the Game Genie.</p>  <p>"Nintendo, the judge said, had produced 'not&nbsp;one scintilla of proof' that it had&nbsp;suffered&nbsp;irreparable harm from the sale of Camerica's device,"&nbsp;said an AP report in the Globe and Mail.&nbsp;</p>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5799928.1605216746!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/duck-hunt.jpg 300w,https://i.cbc.ca/1.5799928.1605216746!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/duck-hunt.jpg 460w,https://i.cbc.ca/1.5799928.1605216746!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/duck-hunt.jpg 620w,https://i.cbc.ca/1.5799928.1605216746!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/duck-hunt.jpg 780w,https://i.cbc.ca/1.5799928.1605216746!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/duck-hunt.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5799928.1605216746!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/duck-hunt.jpg"></p></div><figcaption>"In this business, there's no buzzword more deadly than boring," said reporter Nora Pratt as a girl was seen playing Nintendo's Duck Hunt. <!-- --> <!-- -->(Venture/CBC Archives)</figcaption></figure></span></p></span></p></div></div>]]>
            </description>
            <link>https://www.cbc.ca/archives/super-mario-enhancer-1990-1.5799393</link>
            <guid isPermaLink="false">hacker-news-small-sites-25596587</guid>
            <pubDate>Thu, 31 Dec 2020 20:08:03 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[PostgreSQL vs. Elastic Full Text Search]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25596343">thread link</a>) | @brightball
<br/>
December 31, 2020 | https://rocky.dev/full-text-search | <a href="https://web.archive.org/web/*/https://rocky.dev/full-text-search">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><p><a href="#2020-09-08-update">2020-09-08 update</a>: Use one GIN index instead of two, <code>websearch_to_tsquery</code>, add <code>LIMIT</code>, and store <code>TSVECTOR</code> as separate column. More details at the end of the article.</p><p>I started investigating full-text search options recently. The use-case is real-time search over key-value pairs where the keys are strings and the values are either strings, numbers, or dates. It should enable full-text search over keys and values and range queries over numbers and dates with 1.5 million unique key-value pairs as the expected maximum search index size. The search company Algolia recommends an <a href="https://blog.algolia.com/algolia-v-elasticsearch-latency/" target="_blank" rel="noopener noreferrer">end-to-end latency budget</a> of no more than 50ms, so we’ll use that as our threshold.</p><h2 id="postgresql"><a href="#postgresql" jsx="[object Object]"></a>PostgreSQL</h2><p>I’m already familiar with PostgreSQL, so let’s see if it meets these requirements. First, create a table,</p><div><pre><p><span>CREATE</span><span> </span><span>TABLE</span><span> </span><span>IF</span><span> </span><span>NOT</span><span> </span><span>EXISTS</span><span> search_idx</span></p><p><span></span><span>(</span><span></span></p><p><span>    id       </span><span>BIGINT</span><span> </span><span>PRIMARY</span><span> </span><span>KEY</span><span> GENERATED </span><span>BY</span><span> </span><span>DEFAULT</span><span> </span><span>AS</span><span> </span><span>IDENTITY</span><span>,</span><span></span></p><p><span>    key_str  </span><span>TEXT</span><span> </span><span>NOT</span><span> </span><span>NULL</span><span>,</span><span></span></p><p><span>    val_str  </span><span>TEXT</span><span> </span><span>NOT</span><span> </span><span>NULL</span><span>,</span><span></span></p><p><span>    val_int  </span><span>INT</span><span>,</span><span></span></p><p><span>    val_date TIMESTAMPTZ</span></p><p><span></span><span>)</span><span>;</span></p></pre></div><p>Next, seed it with semi-realistic data. The following can insert ~20,000 rows/second into tables that don’t have indexes,</p><div><pre><p><span>const</span><span> pgp </span><span>=</span><span> </span><span>require</span><span>(</span><span>"pg-promise"</span><span>)</span><span>(</span><span>)</span><span></span></p><p><span></span><span>const</span><span> faker </span><span>=</span><span> </span><span>require</span><span>(</span><span>"faker"</span><span>)</span><span></span></p><p><span></span><span>const</span><span> Iterations </span><span>=</span><span> </span><span>150</span><span></span></p><p><span></span><span>const</span><span> </span><span>seedDb</span><span> </span><span>=</span><span> </span><span>async</span><span> </span><span>(</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>const</span><span> db </span><span>=</span><span> </span><span>pgp</span><span>(</span><span>{</span><span></span></p><p><span>    database</span><span>:</span><span> process</span><span>.</span><span>env</span><span>.</span><span>DATABASE_NAME</span><span>,</span><span></span></p><p><span>    user</span><span>:</span><span> process</span><span>.</span><span>env</span><span>.</span><span>DATABASE_USER</span><span>,</span><span></span></p><p><span>    password</span><span>:</span><span> process</span><span>.</span><span>env</span><span>.</span><span>DATABASE_PASSWORD</span><span>,</span><span></span></p><p><span>    max</span><span>:</span><span> </span><span>30</span><span></span></p><p><span>  </span><span>}</span><span>)</span><span></span></p><p><span>  </span><span>const</span><span> columns </span><span>=</span><span> </span><span>new</span><span> </span><span>pgp</span><span>.</span><span>helpers</span><span>.</span><span>ColumnSet</span><span>(</span><span></span></p><p><span>    </span><span>[</span><span>"key_str"</span><span>,</span><span> </span><span>"val_str"</span><span>,</span><span> </span><span>"val_int"</span><span>,</span><span> </span><span>"val_date"</span><span>]</span><span>,</span><span></span></p><p><span>    </span><span>{</span><span> table</span><span>:</span><span> </span><span>"search_idx"</span><span> </span><span>}</span><span></span></p><p><span>  </span><span>)</span><span></span></p><p><span>  </span><span>const</span><span> </span><span>getNextData</span><span> </span><span>=</span><span> </span><span>(</span><span>_</span><span>,</span><span> pageIdx</span><span>)</span><span> </span><span>=&gt;</span><span></span></p><p><span>    Promise</span><span>.</span><span>resolve</span><span>(</span><span></span></p><p><span>      pageIdx </span><span>&gt;</span><span> Iterations </span><span>-</span><span> </span><span>1</span><span></span></p><p><span>        </span><span>?</span><span> </span><span>null</span><span></span></p><p><span>        </span><span>:</span><span> Array</span><span>.</span><span>from</span><span>(</span><span>Array</span><span>(</span><span>10000</span><span>)</span><span>)</span><span>.</span><span>map</span><span>(</span><span>(</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>(</span><span>{</span><span></span></p><p><span>            key_str</span><span>:</span><span> </span><span>`</span><span>${</span><span>faker</span><span>.</span><span>lorem</span><span>.</span><span>word</span><span>(</span><span>)</span><span>}</span><span> </span><span>${</span><span>faker</span><span>.</span><span>lorem</span><span>.</span><span>word</span><span>(</span><span>)</span><span>}</span><span>`</span><span>,</span><span></span></p><p><span>            val_str</span><span>:</span><span> faker</span><span>.</span><span>lorem</span><span>.</span><span>words</span><span>(</span><span>)</span><span>,</span><span></span></p><p><span>            val_int</span><span>:</span><span> Math</span><span>.</span><span>floor</span><span>(</span><span>faker</span><span>.</span><span>random</span><span>.</span><span>float</span><span>(</span><span>)</span><span>)</span><span>,</span><span></span></p><p><span>            val_date</span><span>:</span><span> faker</span><span>.</span><span>date</span><span>.</span><span>past</span><span>(</span><span>)</span><span></span></p><p><span>          </span><span>}</span><span>)</span><span>)</span><span></span></p><p><span>    </span><span>)</span><span></span></p><p><span>  console</span><span>.</span><span>log</span><span>(</span><span></span></p><p><span>    </span><span>await</span><span> db</span><span>.</span><span>tx</span><span>(</span><span>"seed-db"</span><span>,</span><span> </span><span>t</span><span> </span><span>=&gt;</span><span></span></p><p><span>      t</span><span>.</span><span>sequence</span><span>(</span><span>idx</span><span> </span><span>=&gt;</span><span></span></p><p><span>        </span><span>getNextData</span><span>(</span><span>t</span><span>,</span><span> idx</span><span>)</span><span>.</span><span>then</span><span>(</span><span>data</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></p><p><span>          </span><span>if</span><span> </span><span>(</span><span>data</span><span>)</span><span> </span><span>return</span><span> t</span><span>.</span><span>none</span><span>(</span><span>pgp</span><span>.</span><span>helpers</span><span>.</span><span>insert</span><span>(</span><span>data</span><span>,</span><span> columns</span><span>)</span><span>)</span><span></span></p><p><span>        </span><span>}</span><span>)</span><span></span></p><p><span>      </span><span>)</span><span></span></p><p><span>    </span><span>)</span><span></span></p><p><span>  </span><span>)</span><span></span></p><p><span></span><span>}</span><span></span></p><p><span></span><span>seedDb</span><span>(</span><span>)</span></p></pre></div><p>Now that the 1.5M rows are loaded, add the full-text search GIN indexes (<a href="https://www.postgresql.org/docs/current/textsearch.html" target="_blank" rel="noopener noreferrer">details</a>),</p><div><pre><p><span>CREATE</span><span> </span><span>INDEX</span><span> search_idx_key_str_idx </span><span>ON</span><span> search_idx</span></p><p><span>    </span><span>USING</span><span> GIN </span><span>(</span><span>to_tsvector</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> key_str</span><span>)</span><span>)</span><span>;</span><span></span></p><p><span></span><span>CREATE</span><span> </span><span>INDEX</span><span> search_idx_val_str_idx </span><span>ON</span><span> search_idx</span></p><p><span>    </span><span>USING</span><span> GIN </span><span>(</span><span>to_tsvector</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> val_str</span><span>)</span><span>)</span><span>;</span></p></pre></div><p>Note: If adding more data to the table after creating the indexes, <code>VACUUM ANALYZE search_idx;</code> to update the table stats and improve query plans.</p><p>Time to test performance over the following queries,</p><div><pre><p><span></span><span>SELECT</span><span> </span><span>*</span><span></span></p><p><span></span><span>FROM</span><span> search_idx</span></p><p><span></span><span>WHERE</span><span> to_tsvector</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> key_str</span><span>)</span><span> @@ to_tsquery</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> </span><span>'qui:*'</span><span>)</span><span></span></p><p><span>  </span><span>OR</span><span> to_tsvector</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> val_str</span><span>)</span><span> @@ to_tsquery</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> </span><span>'qui:*'</span><span>)</span><span>;</span><span></span></p><p><span></span><span>SELECT</span><span> </span><span>*</span><span></span></p><p><span></span><span>FROM</span><span> search_idx</span></p><p><span></span><span>WHERE</span><span> key_str ILIKE </span><span>'%quis%'</span><span>;</span><span></span></p><p><span></span><span>SELECT</span><span> </span><span>*</span><span></span></p><p><span></span><span>FROM</span><span> search_idx</span></p><p><span></span><span>WHERE</span><span> to_tsvector</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> key_str</span><span>)</span><span> @@ to_tsquery</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> </span><span>'quis'</span><span>)</span><span></span></p><p><span>  </span><span>AND</span><span> </span><span>(</span><span>to_tsvector</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> val_str</span><span>)</span><span> @@ to_tsquery</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> </span><span>'nulla'</span><span>)</span><span></span></p><p><span>    </span><span>OR</span><span> </span><span>(</span><span>to_tsvector</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> val_str</span><span>)</span><span> @@ to_tsquery</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> </span><span>'velit'</span><span>)</span><span>)</span><span>)</span><span>;</span><span></span></p><p><span></span><span>SELECT</span><span> </span><span>*</span><span></span></p><p><span></span><span>FROM</span><span> search_idx</span></p><p><span></span><span>WHERE</span><span> to_tsvector</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> key_str</span><span>)</span><span> @@ to_tsquery</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> </span><span>'quis'</span><span>)</span><span></span></p><p><span>  </span><span>AND</span><span> val_int </span><span>&gt;</span><span> </span><span>1000</span><span></span></p><p><span>  </span><span>AND</span><span> val_date </span><span>&gt;</span><span> </span><span>'2020-01-01'</span><span>;</span></p></pre></div><p>Add <code>EXPLAIN</code> in front of any query to ensure it’s using the index rather than doing a full table scan. Adding <code>EXPLAIN ANALYZE</code> in front will give timing information, however, <a href="https://www.postgresql.org/docs/current/sql-explain.html" target="_blank" rel="noopener noreferrer">as noted in the documentation</a>, this adds overhead and can sometimes take significantly longer than executing the query normally.</p><p>I consistently get ~100ms on my MacBook Pro (2.4 GHz 8-Core i9, 32 GB RAM) on the first, likely most common query. This is well over the 50ms threshold.</p><h2 id="elasticsearch"><a href="#elasticsearch" jsx="[object Object]"></a>Elasticsearch</h2><p>Next, let’s try Elasticsearch. Start it and ensure the status is <code>green</code> with the following,</p><div><pre><p><span>docker run -d -p </span><span>9200</span><span>:9200 -p </span><span>9300</span><span>:9300 -e </span><span>"discovery.type=single-node"</span><span> docker.elastic.co/elasticsearch/elasticsearch:7.9.0</span></p><p><span></span><span>curl</span><span> -sX GET </span><span>"localhost:9200/_cat/health?v&amp;pretty"</span><span> -H </span><span>"Accept: application/json"</span></p></pre></div><p>Next, seed the index. The first script creates a file with each line a semi-realistic document,</p><div><pre><p><span>const</span><span> faker </span><span>=</span><span> </span><span>require</span><span>(</span><span>"faker"</span><span>)</span><span></span></p><p><span></span><span>const</span><span> </span><span>{</span><span> writeFileSync </span><span>}</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>"fs"</span><span>)</span><span></span></p><p><span></span><span>const</span><span> Iterations </span><span>=</span><span> </span><span>1_500_000</span><span></span></p><p><span></span><span>writeFileSync</span><span>(</span><span></span></p><p><span>  </span><span>"./dataset.ndjson"</span><span>,</span><span></span></p><p><span>  Array</span><span>.</span><span>from</span><span>(</span><span>Array</span><span>(</span><span>Iterations</span><span>)</span><span>)</span><span></span></p><p><span>    </span><span>.</span><span>map</span><span>(</span><span>(</span><span>)</span><span> </span><span>=&gt;</span><span></span></p><p><span>      </span><span>JSON</span><span>.</span><span>stringify</span><span>(</span><span>{</span><span></span></p><p><span>        key</span><span>:</span><span> </span><span>`</span><span>${</span><span>faker</span><span>.</span><span>lorem</span><span>.</span><span>word</span><span>(</span><span>)</span><span>}</span><span> </span><span>${</span><span>faker</span><span>.</span><span>lorem</span><span>.</span><span>word</span><span>(</span><span>)</span><span>}</span><span>`</span><span>,</span><span></span></p><p><span>        val</span><span>:</span><span> faker</span><span>.</span><span>lorem</span><span>.</span><span>words</span><span>(</span><span>)</span><span>,</span><span></span></p><p><span>        valInt</span><span>:</span><span> Math</span><span>.</span><span>floor</span><span>(</span><span>faker</span><span>.</span><span>random</span><span>.</span><span>float</span><span>(</span><span>)</span><span>)</span><span>,</span><span></span></p><p><span>        valDate</span><span>:</span><span> faker</span><span>.</span><span>date</span><span>.</span><span>past</span><span>(</span><span>)</span><span></span></p><p><span>      </span><span>}</span><span>)</span><span></span></p><p><span>    </span><span>)</span><span></span></p><p><span>    </span><span>.</span><span>join</span><span>(</span><span>"\n"</span><span>)</span><span></span></p><p><span></span><span>)</span></p></pre></div><p>The second script adds each document from the ~150 MB file to the index,</p><div><pre><p><span>const</span><span> </span><span>{</span><span> createReadStream </span><span>}</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>"fs"</span><span>)</span><span></span></p><p><span></span><span>const</span><span> split </span><span>=</span><span> </span><span>require</span><span>(</span><span>"split2"</span><span>)</span><span></span></p><p><span></span><span>const</span><span> </span><span>{</span><span> Client </span><span>}</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>"@elastic/elasticsearch"</span><span>)</span><span></span></p><p><span></span><span>const</span><span> Index </span><span>=</span><span> </span><span>"search-idx"</span><span></span></p><p><span></span><span>const</span><span> </span><span>seedIndex</span><span> </span><span>=</span><span> </span><span>async</span><span> </span><span>(</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>const</span><span> client </span><span>=</span><span> </span><span>new</span><span> </span><span>Client</span><span>(</span><span>{</span><span> node</span><span>:</span><span> </span><span>"http://localhost:9200"</span><span> </span><span>}</span><span>)</span><span></span></p><p><span>  console</span><span>.</span><span>log</span><span>(</span><span></span></p><p><span>    </span><span>await</span><span> client</span><span>.</span><span>helpers</span><span>.</span><span>bulk</span><span>(</span><span>{</span><span></span></p><p><span>      datasource</span><span>:</span><span> </span><span>createReadStream</span><span>(</span><span>"./dataset.ndjson"</span><span>)</span><span>.</span><span>pipe</span><span>(</span><span>split</span><span>(</span><span>)</span><span>)</span><span>,</span><span></span></p><p><span>      </span><span>onDocument</span><span>(</span><span>doc</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>        </span><span>return</span><span> </span><span>{</span><span> index</span><span>:</span><span> </span><span>{</span><span> _index</span><span>:</span><span> Index </span><span>}</span><span> </span><span>}</span><span></span></p><p><span>      </span><span>}</span><span>,</span><span></span></p><p><span>      </span><span>onDrop</span><span>(</span><span>doc</span><span>)</span><span> </span><span>{</span><span> b</span><span>.</span><span>abort</span><span>(</span><span>)</span><span> </span><span>}</span><span></span></p><p><span>    </span><span>}</span><span>)</span><span></span></p><p><span>  </span><span>)</span><span></span></p><p><span></span><span>}</span><span></span></p><p><span></span><span>seedIndex</span><span>(</span><span>)</span></p></pre></div><p>Note: this script is fine for testing purposes, but in production, follow best practices on <a href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/indexing-performance.html#_using_and_sizing_bulk_requests" target="_blank" rel="noopener noreferrer">sizing bulk requests</a> and <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-indexing-speed.html#multiple-workers-threads" target="_blank" rel="noopener noreferrer">using multiple threads</a>.</p><p>Now, run some queries,</p><div><pre><p><span>curl</span><span> -sX GET </span><span>"localhost:9200/search-idx/_search?pretty"</span><span> </span><span>\</span><span></span></p><p><span>-H </span><span>'Content-Type: application/json'</span><span> </span><span>\</span><span></span></p><p><span>-d</span><span>'</span></p><p><span>{</span></p><p><span>  "query": {</span></p><p><span>    "simple_query_string" : {</span></p><p><span>      "query": "</span><span>\"</span><span>repellat sunt</span><span>\"</span><span> -quis",</span></p><p><span>      "fields": ["key", "val"],</span></p><p><span>      "default_operator": "and"</span></p><p><span>    }</span></p><p><span>  }</span></p><p><span>}</span></p><p><span>'</span></p></pre></div><p>I get 5-24ms on 136 matching results clustered on the low end the more you run the query. This is ~5x faster than PostgreSQL. So it seems like the added overhead of maintaining an Elasticsearch cluster may be worth it to get the performance I’m after.</p><h2 id="2020-09-08-update"><a href="#2020-09-08-update" jsx="[object Object]"></a>2020-09-08 update</h2><p>With <a href="https://twitter.com/samokhvalov" target="_blank" rel="noopener noreferrer">@samokhvalov</a>’s help, I created a single GIN index instead of using two,</p><div><pre><p><span>CREATE</span><span> </span><span>INDEX</span><span> search_idx_key_str_idx </span><span>ON</span><span> search_idx</span></p><p><span>    </span><span>USING</span><span> GIN </span><span>(</span><span>(</span><span>setweight</span><span>(</span><span>to_tsvector</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> key_str</span><span>)</span><span>,</span><span> </span><span>'A'</span><span>)</span><span> </span><span>||</span><span></span></p><p><span>                setweight</span><span>(</span><span>to_tsvector</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> val_str</span><span>)</span><span>,</span><span> </span><span>'B'</span><span>)</span><span>)</span><span>)</span><span>;</span></p></pre></div><p>I’m using PostgreSQL 10 in production, however, since I’m using the latest version of Elasticsearch, it’s only fair to pull the latest version of PostgreSQL (<code>postgres:12.4-alpine</code> at the time of writing). I then updated the query to use the new index, <a href="https://www.postgresql.org/docs/12/textsearch-controls.html#TEXTSEARCH-PARSING-QUERIES" target="_blank" rel="noopener noreferrer"><code>websearch_to_tsquery</code></a>, and add the same default <code>LIMIT</code> used by Elasticsearch,</p><div><pre><p><span>SELECT</span><span> </span><span>*</span><span></span></p><p><span></span><span>FROM</span><span> search_idx</span></p><p><span></span><span>WHERE</span><span> </span><span>(</span><span>setweight</span><span>(</span><span>to_tsvector</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> key_str</span><span>)</span><span>,</span><span> </span><span>'A'</span><span>)</span><span> </span><span>||</span><span></span></p><p><span>       setweight</span><span>(</span><span>to_tsvector</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> val_str</span><span>)</span><span>,</span><span> </span><span>'B'</span><span>)</span><span>)</span><span> @@</span></p><p><span>      websearch_to_tsquery</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> </span><span>'"repellat sunt" -quis'</span><span>)</span><span></span></p><p><span></span><span>LIMIT</span><span> </span><span>10000</span><span>;</span></p></pre></div><p>This is much more of an apples to apples comparison and drastically cut the query times on my MacBook Pro, from ~100ms to ~13-16ms on 172 matching results!</p><p>As a final test, I created a standalone column to hold the <code>TSVECTOR</code> as described in the <a href="https://www.postgresql.org/docs/11/textsearch-tables.html#TEXTSEARCH-TABLES-INDEX" target="_blank" rel="noopener noreferrer">documentation</a>. It’s kept up-to-date via trigger,</p><div><pre><p><span>CREATE</span><span> </span><span>TABLE</span><span> </span><span>IF</span><span> </span><span>NOT</span><span> </span><span>EXISTS</span><span> search_idx</span></p><p><span></span><span>(</span><span></span></p><p><span>    id       </span><span>BIGINT</span><span> </span><span>PRIMARY</span><span> </span><span>KEY</span><span> GENERATED </span><span>BY</span><span> </span><span>DEFAULT</span><span> </span><span>AS</span><span> </span><span>IDENTITY</span><span>,</span><span></span></p><p><span>    key_str  </span><span>TEXT</span><span> </span><span>NOT</span><span> </span><span>NULL</span><span>,</span><span></span></p><p><span>    val_str  </span><span>TEXT</span><span> </span><span>NOT</span><span> </span><span>NULL</span><span>,</span><span></span></p><p><span>    val_int  </span><span>INT</span><span>,</span><span></span></p><p><span>    val_date TIMESTAMPTZ</span><span>,</span><span></span></p><p><span>    fts      TSVECTOR</span></p><p><span></span><span>)</span><span>;</span><span></span></p><p><span></span><span>CREATE</span><span> </span><span>FUNCTION</span><span> fts_trigger</span><span>(</span><span>)</span><span> </span><span>RETURNS</span><span> </span><span>trigger</span><span> </span><span>AS</span><span></span></p><p><span>$$</span></p><p><span></span><span>BEGIN</span><span></span></p><p><span>    new</span><span>.</span><span>fts :</span><span>=</span><span></span></p><p><span>      setweight</span><span>(</span><span>to_tsvector</span><span>(</span><span>'pg_catalog.english'</span><span>,</span><span> new</span><span>.</span><span>key_str</span><span>)</span><span>,</span><span> </span><span>'A'</span><span>)</span><span> </span><span>||</span><span></span></p><p><span>      setweight</span><span>(</span><span>to_tsvector</span><span>(</span><span>'pg_catalog.english'</span><span>,</span><span> new</span><span>.</span><span>val_str</span><span>)</span><span>,</span><span> </span><span>'B'</span><span>)</span><span>;</span><span></span></p><p><span>    </span><span>return</span><span> new</span><span>;</span><span></span></p><p><span></span><span>END</span><span></span></p><p><span>$$ </span><span>LANGUAGE</span><span> plpgsql</span><span>;</span><span></span></p><p><span></span><span>CREATE</span><span> </span><span>TRIGGER</span><span> tgr_search_idx_fts_update</span></p><p><span>    BEFORE </span><span>INSERT</span><span> </span><span>OR</span><span> </span><span>UPDATE</span><span></span></p><p><span>    </span><span>ON</span><span> search_idx</span></p><p><span>    </span><span>FOR EACH ROW</span><span></span></p><p><span></span><span>EXECUTE</span><span> </span><span>FUNCTION</span><span> fts_trigger</span><span>(</span><span>)</span><span>;</span><span></span></p><p><span></span><span>CREATE</span><span> </span><span>INDEX</span><span> search_idx_fts_idx </span><span>ON</span><span> search_idx </span><span>USING</span><span> GIN </span><span>(</span><span>fts</span><span>)</span><span>;</span><span></span></p><p><span></span><span>SELECT</span><span> </span><span>*</span><span></span></p><p><span></span><span>FROM</span><span> search_idx</span></p><p><span></span><span>WHERE</span><span> fts @@ websearch_to_tsquery</span><span>(</span><span>'english'</span><span>::regconfig</span><span>,</span><span> </span><span>'"repellat sunt" -quis'</span><span>)</span><span></span></p><p><span></span><span>LIMIT</span><span> </span><span>10000</span><span>;</span></p></pre></div><p>This gets queries down to 6-10ms when measured in <code>psql</code>, practically the same as Elasticsearch for this specific query.</p><p>If anyone knows of further optimizations, I’ll update my rough numbers and the code snippets to include them.</p></section></div>]]>
            </description>
            <link>https://rocky.dev/full-text-search</link>
            <guid isPermaLink="false">hacker-news-small-sites-25596343</guid>
            <pubDate>Thu, 31 Dec 2020 19:47:21 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Doing Python development under Mac OS]]>
            </title>
            <description>
<![CDATA[
Score 32 | Comments 41 (<a href="https://news.ycombinator.com/item?id=25596311">thread link</a>) | @PeterWhittaker
<br/>
December 31, 2020 | https://peter-whittaker.com/install-python-MacOS | <a href="https://web.archive.org/web/*/https://peter-whittaker.com/install-python-MacOS">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

        <div>
    
          <main>
            <article>
  
  <time datetime="2020-08-19T00:00:00+00:00">19 Aug 2020</time>

  <p>tl;dr? <a href="#just-the-recipe">Jump right to the recipe</a></p>

<p>For reasons lost in the mists of time, Iâ€™ve been a Mac guy since 2013 - but Iâ€™ve been a command line (CLI) guy since 1990 (or earlier, hard to remember), and still am. A few years ago, I discovered <a href="https://brew.sh/">brew, aka homebrew</a> after finding out how out-of-date were so many of the standard UNIX/Linux tools included with Mac OS, e.g., bash.</p>

<p>Generalizing, the hardest part of working with the CLI on a Mac is having the same experience on all the platforms I use, which range from Windows 10 with WSL (some flavour of Ubuntu, cannot remember which), RHEL 7.6, Fedora 32, Mac OS 10.15, and Cygwin - and that problem persists across those other platforms, which is why <a href="https://github.com/PeterWhittaker/myDotFiles">I created a GitHub project to keep my dot files in snc</a>.</p>

<p>Well. Until the last few days.</p>

<p>Since last week Iâ€™ve been using the <a href="https://github.com/23andMe/Yamale">most excellent Yamale</a> to validate YAML schema Iâ€™ve defined for my <a href="https://github.com/PeterWhittaker/LinearAssuredPipeline">SELinux Linear Assured Pipeline</a>. Iâ€™ve even made some contributions to it - or, at least, am in the process of so doingâ€¦</p>

<p>â€¦and thatâ€™s where things get weird.</p>

<p>Yamale depends upon Python and <a href="https://pypi.org/project/pip/">pip</a>, the Python package manager, and upon <a href="https://tox.readthedocs.io/en/latest/#">tox</a>, a test automation framework for Python  - but <strong>standard Mac OS has neither <code>pip</code> nor <code>tox</code></strong>. OK, so <code>brew install pip</code> and <code>brew install tox</code>, right? Well, almost.</p>

<p>This is where things can get a little weird. Yamaleâ€™s <code>tox.ini</code>, for example, depends upon two different versions of Python, <code>3.6</code> and <code>3.8</code>.</p>

<p>How does get multiple versions of Python? The short answer is <a href="https://github.com/pyenv/pyenv">pyenv, a python-independent shell-script based system for managing multiple Python environments</a>. But thatâ€™s not the whole story.</p>

<p>This <a href="https://opensource.com/article/20/4/pyenv">page intends itself as the correct answer</a> - install <code>pyenv</code> and go! - but it is lacking a step, as I discovered - and I discovered that page <a href="https://opensource.com/article/19/5/python-3-default-mac">from this page</a>, which tells us what we might do wrong, then what we should do to get things right - but a bootstrap problem remainsâ€¦.</p>

<p>The first page wants us to run <code>pip install pyenv</code> - but Mac OS lacks <code>pip</code>. The second page has a few brew-based recipes, but suggests that <code>brew</code> is the wrong way to go, overall, and that we really want <code>pyenv</code>. This <a href="https://opensource.com/article/19/6/python-virtual-environments-mac">third page</a> tries to put things succinctly, but if youâ€™re running <code>tox</code>, there is <strong>YAS</strong> (Yet Another Step): By default, <code>tox</code> works only with your default Python environment, whether that is standard or something installed via <code>brew</code>.</p>

<p>To get <code>tox</code> to work with multiple Pythons out of the box, you need <a href="https://pypi.org/project/tox-pyenv/">tox-pyenv</a> - but <strong>that</strong> page mentions a lot of irrelevant <code>Circle CI</code> stuff.</p>

<div><div><pre><code>Before we go any further, I should note that whatever you do
with brew - or with gem, if you get there - do NOT override
system defaults - Mac OS and many utilities produced for the
Mac depend upon them. Let brew manage things and install them
cellar-only. You then need to find them via appropriate
manipulation of PATH, CPPFLAGS, LDFLAGS, etc. Cf my dot file
project for one way of doing this.
</code></pre></div></div>

<p>At any rate, none of those pages provide the complete answer. You know that you need</p>
<ul>
  <li>Python (and possibly multiple versions of Python)</li>
  <li><code>pip</code> (not included with Mac OS)</li>
  <li><code>tox</code>, which depends upon <code>pip</code></li>
  <li><code>pyenv</code>, which you can get a number of waysâ€¦.</li>
  <li><code>tox-pyenv</code>, which depends upon <code>pip</code>â€¦.</li>
</ul>

<p>So what is one to do? Install <code>pyenv</code> and use it to install <code>pip</code> and <code>tox</code> and <code>tox-pyenv</code> several times over? That seems soâ€¦.</p>

<p>UGH.</p>

<p>I repeat.</p>



<p>I donâ€™t know that what follows is a universally-accepted approach, but it is the shortest and cleanest path to where I needed to go (as verified by running <code>make clean; make</code> in my <code>yamale</code> top-level folder and having all <code>tox</code> tests work out-of-the-box with both Python <code>3.6</code> and <code>3.8</code>, no modifications to <code>yamale</code> files requiredâ€¦).</p>

<p>So, <a href="http://onlineslangdictionary.com/meaning-definition-of/ymmv">YMMV</a> and <a href="http://onlineslangdictionary.com/meaning-definition-of/fwiw">FWIW</a>, here isâ€¦.</p>

<h3 id="just-the-recipe">Just The Recipe</h3>
<div><div><pre><code># install brew
$ /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"
# use brew to install python3, which comes with pip3
$ brew install python3          # let brew install this cask-only
# figure out your path to pip3, installed with python3
$ &lt;path to pip3&gt; install tox
# install py-env using brew
$ brew install py-env
$ &lt;path to pip3&gt; install tox-pyenv
</code></pre></div></div>

<p>Once youâ€™ve done that, figure out what versions of Python your particular <code>tox.ini</code> specifies; for <code>yamale</code>, these are <code>3.6</code> and <code>3.8</code> which Iâ€™ve mentioned a few times alreadyâ€¦. Assuming these are what you need, the rest of your recipe is as follows:</p>
<div><div><pre><code>$ brew install pyenv
$ pyenv install 3.6
# lists multiple versions, choose appropriate minor #, e.g.,
$ pyenv install 3.6.11
$ pyenv install 3.8
# lists multiple versions, choose appropriate minor #, e.g.,
$ pyenv install 3.8.5
# almost there, now we want to use what we just installed
$ cd &lt;where Yamale lives&gt;
# have pyenv set the versions of python tox should use
$ pyenv local 3.6.11 3.8.5
# that command creates a ./python-version file, which
# is already in ./gitignore! Now confirm those....
$ pyenv version
</code></pre></div></div>
<p>In my case, the latter command shows</p>
<div><div><pre><code>3.6.11 (set by /Users/pww/pipelineWork/yamale/.python-version)
3.8.5 (set by /Users/pww/pipelineWork/yamale/.python-version)
</code></pre></div></div>
<p><code>pyenv which</code> shows me what I expected:</p>
<div><div><pre><code>$ pyenv which python3.6
/Users/pww/.pyenv/versions/3.6.11/bin/python3.6
$ pyenv which python3.8
/Users/pww/.pyenv/versions/3.8.5/bin/python3.8
</code></pre></div></div>

<p>Now. Run <code>make clean; make</code> and all should be well.</p>

<p>It was for me, at least.</p>

<p>Easy-peasy. Right?</p>

<p>Right.</p>


</article>



          </main>
    
        </div>

   </div></div>]]>
            </description>
            <link>https://peter-whittaker.com/install-python-MacOS</link>
            <guid isPermaLink="false">hacker-news-small-sites-25596311</guid>
            <pubDate>Thu, 31 Dec 2020 19:43:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Pure Digital CSS, Swiss Made, Clock – No JavaScript, almost no HTML]]>
            </title>
            <description>
<![CDATA[
Score 133 | Comments 81 (<a href="https://news.ycombinator.com/item?id=25595439">thread link</a>) | @IceWreck
<br/>
December 31, 2020 | https://www.quaxio.com/pure_css_digital_clock.html | <a href="https://web.archive.org/web/*/https://www.quaxio.com/pure_css_digital_clock.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.quaxio.com/pure_css_digital_clock.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25595439</guid>
            <pubDate>Thu, 31 Dec 2020 18:26:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Autofocus for the 16mm Telephoto Lens Mounted on the Raspberry Pi HQ Camera]]>
            </title>
            <description>
<![CDATA[
Score 90 | Comments 42 (<a href="https://news.ycombinator.com/item?id=25594894">thread link</a>) | @lemariva
<br/>
December 31, 2020 | https://lemariva.com/blog/2020/12/raspberry-pi-hq-camera-autofocus-telephoto-lens | <a href="https://web.archive.org/web/*/https://lemariva.com/blog/2020/12/raspberry-pi-hq-camera-autofocus-telephoto-lens">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p>This tutorial opens the series of articles about "Project JiJi" and describes how to add autofocus to the 16 mm Telephoto Lens mounted on the Raspberry Pi HQ Camera. In the past months, I've been working on a project to add autofocus to the lens and this is the result:</p><div><p><iframe width="100%" height="315" data-src="https://www.youtube.com/embed/PrbyPmq_Z7Q" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p></div><p>Adding some background to this: The Raspberry Pi Foundation offers different Raspberry Pi Camera modules since 2013. The first module (5-megapixel) was produced in 2013, and an 8-megapixel module upgrade (v2) was released in 2016. Both models have visible light and infrared versions. This year (2020), the Foundation launched the HQ Camera. This is a 12-megapixel High Quality (thus HQ) camera (Sony IMX477), which adds the possibility to use a lens with CS-mount. It is a great upgrade, but the lens and the camera lack autofocus up to now.</p><p>If you are impatient, you can find the hardware design, firmware and software on the <a href="https://github.com/lemariva/rPIFocus">lemariva/rPIFocus</a> and <a href="https://github.com/lemariva/uPyFocus">lemariva/uPyFocus</a> repositories. But, you should come back and read the tutorial until the end, so that you can understand how it works, and if you want to, you can also cooperate on this project!</p><h2><span id="software-and-hardware-720530">Software and Hardware</span></h2><p>This section includes the software and hardware needed for this tutorial.</p><h2><span id="diy-project-jiji-720530">DIY: Project JiJi</span></h2><p>In this article, I will explain how to build the project yourself. I won't go deeper in detail. These will be covered in future articles.</p><h2><span id="hardware-pcb-ordering-soldering-and-mounting-720530">Hardware: PCB ordering, soldering, and mounting</span></h2><p>As you may have already noticed, to add autofocus to the camera, you will need to order a PCB and solder and mount some parts. In the Github repository, under the folder <a href="https://github.com/lemariva/rPIFocus/tree/main/pcb">`pcb</a>`, you'll find the schematic as well as the board files for the PCB. To open those files, you'll need <a rel="noopener noreferrer" href="https://www.autodesk.de/products/eagle/overview">Eagle</a>. Eagle is still free for hobbyists, thus, download and install it to open the files. You can export Gerber files using <a rel="noopener noreferrer" href="https://support.jlcpcb.com/article/137-how-to-generate-gerber-and-drill-files-in-autodesk-eagle">this export-to-gerber tutorial</a>.</p><p>To simplify the process for you, I also added the Gerber files that you can directly send to your PCB provider. I use and recommend <a rel="noopener noreferrer" href="https://jlcpcb.com/">jlcpcb</a>. They are fast, cheap, reliable and the quality of the boards is pretty good. Check out the setting and costs for this project in Fig. 1. Don't forget to select the LeadFree HASL-RoHS surface finish!</p><div uk-grid=""><p><img data-src="https://lemariva.com/storage/temp/public/70d/d54/c63/5fe8fb550b22d311339148__1285.jpg" alt="jlcpcb settings" data-srcset="https://lemariva.com/storage/temp/public/70d/d54/c63/5fe8fb550b22d311339148__1285.jpg 1285w, https://lemariva.com/storage/temp/public/70d/d54/c63/5fe8fb550b22d311339148__400.jpg 400w, https://lemariva.com/storage/temp/public/70d/d54/c63/5fe8fb550b22d311339148__768.jpg 768w, https://lemariva.com/storage/temp/public/70d/d54/c63/5fe8fb550b22d311339148__1024.jpg 1024w" sizes="(max-width: 1285px) 100vw, 1285px" src="https://lemariva.com/storage/temp/public/70d/d54/c63/5fe8fb550b22d311339148__1285.jpg" srcset="https://lemariva.com/storage/temp/public/70d/d54/c63/5fe8fb550b22d311339148__1285.jpg 1285w, https://lemariva.com/storage/temp/public/70d/d54/c63/5fe8fb550b22d311339148__400.jpg 400w, https://lemariva.com/storage/temp/public/70d/d54/c63/5fe8fb550b22d311339148__768.jpg 768w, https://lemariva.com/storage/temp/public/70d/d54/c63/5fe8fb550b22d311339148__1024.jpg 1024w"><br><span>Fig. 1: jlcpcb settings for this project.</span></p></div><p>I designed the PCB for people with two types of skills: advanced and basic. So, if you're a pro, grab your solder and solder every element (ICs) for yourself, or, if your skills are basic, don't worry, grab your solder and solder the small hobbies boards that you can buy from the selection above. Two steppers rotate the focus and aperture rings. They are controlled by the M5Stack ATOM, which also measures the steppers' currents and offers an RestAPI to send the commands (see Fig. 2 for an basic PCB schematic).</p><div uk-grid=""><p><img data-src="https://lemariva.com/storage/temp/public/625/29e/b52/5feca3f70da50778861950__899.jpg" alt="Simple PCB schematic" data-srcset="https://lemariva.com/storage/temp/public/625/29e/b52/5feca3f70da50778861950__899.jpg 899w, https://lemariva.com/storage/temp/public/625/29e/b52/5feca3f70da50778861950__400.jpg 400w, https://lemariva.com/storage/temp/public/625/29e/b52/5feca3f70da50778861950__768.jpg 768w" sizes="(max-width: 899px) 100vw, 899px" src="https://lemariva.com/storage/temp/public/625/29e/b52/5feca3f70da50778861950__899.jpg" srcset="https://lemariva.com/storage/temp/public/625/29e/b52/5feca3f70da50778861950__899.jpg 899w, https://lemariva.com/storage/temp/public/625/29e/b52/5feca3f70da50778861950__400.jpg 400w, https://lemariva.com/storage/temp/public/625/29e/b52/5feca3f70da50778861950__768.jpg 768w"><br><span>Fig. 2: Simple PCB schematic.</span></p></div><p>Fig. 3 to Fig. 8 show you some close photos of the design to help you to mount the elements. Fig. 3 shows you how to mount the aperture and focus belt rings. They usually have a standard of 0.8 mm pitch. So the motor pinions should be compatible with that. Fig. 4 shows the mounted motor. Check the cable color - or the order! They are connected to the A4988 drivers (Fig. 5) and that's the right connection. Otherwise, the driver won't be able to switch the electromagnets in the right sequence and the motor won't rotate. I planned a cut on the PCB so that the pinion distance to the belt ring can be modified and the motor can be fixed as shown in Fig. 6 (using a 2.5 mm screw) - not the best way, but it works ;). To fix the camera to the board, I used a 3/8 inch screw and an adapter to mount that to a tripod (see Fig. 7). The screw fixes the camera to the board. The camera tends to rotate, and it releases the screw. If that's the case, you can fix it using the two 3mm holes on the left of the camera base (see Fig. 8) with an e.g. rectangular piece of wood over the board. Finally, you need to mount the INA219 and two pinheads for the M5Stack ATOM Matrix. The INA219 measures the current of the steppers, which are used to identify the rotational limits of the focus and aperture rings. Therefore, after booting, the system calibrates itself and it doesn't require encoders to measure the steppers positions.</p><div uk-grid=""><p><img data-src="https://lemariva.com/storage/temp/public/028/bde/13d/5fe90f321ecc9579624920__300.jpg" alt="Focus and aperture ring belts" data-srcset="https://lemariva.com/storage/temp/public/028/bde/13d/5fe90f321ecc9579624920__300.jpg 300w" sizes="(max-width: 300px) 100vw, 300px" src="https://lemariva.com/storage/temp/public/028/bde/13d/5fe90f321ecc9579624920__300.jpg" srcset="https://lemariva.com/storage/temp/public/028/bde/13d/5fe90f321ecc9579624920__300.jpg 300w"><br><span>Fig. 3: Focus and aperture ring belts.</span></p><p><img data-src="https://lemariva.com/storage/temp/public/df5/25f/3b1/5fe90f2482bd7006993442__300.jpg" alt="Motor connection and gear mouting" data-srcset="https://lemariva.com/storage/temp/public/df5/25f/3b1/5fe90f2482bd7006993442__300.jpg 300w" sizes="(max-width: 300px) 100vw, 300px" src="https://lemariva.com/storage/temp/public/df5/25f/3b1/5fe90f2482bd7006993442__300.jpg" srcset="https://lemariva.com/storage/temp/public/df5/25f/3b1/5fe90f2482bd7006993442__300.jpg 300w"><br><span>Fig. 4: Motor connection and gear mouting.</span></p><p><img data-src="https://lemariva.com/storage/temp/public/4bc/2a4/32c/5fe910d944bfb013963036__300.jpg" alt="A4988 Motor stepper driver" data-srcset="https://lemariva.com/storage/temp/public/4bc/2a4/32c/5fe910d944bfb013963036__300.jpg 300w" sizes="(max-width: 300px) 100vw, 300px" src="https://lemariva.com/storage/temp/public/4bc/2a4/32c/5fe910d944bfb013963036__300.jpg" srcset="https://lemariva.com/storage/temp/public/4bc/2a4/32c/5fe910d944bfb013963036__300.jpg 300w"><br><span>Fig. 5: A4988 Motor stepper driver.</span></p><p><img data-src="https://lemariva.com/storage/temp/public/b09/476/b07/5fe90f2b34a72694523645__300.jpg" alt="Motor fixing" data-srcset="https://lemariva.com/storage/temp/public/b09/476/b07/5fe90f2b34a72694523645__300.jpg 300w" sizes="(max-width: 300px) 100vw, 300px" src="https://lemariva.com/storage/temp/public/b09/476/b07/5fe90f2b34a72694523645__300.jpg" srcset="https://lemariva.com/storage/temp/public/b09/476/b07/5fe90f2b34a72694523645__300.jpg 300w"><br><span>Fig. 6: Motor fixing.</span></p><p><img data-src="https://lemariva.com/storage/temp/public/b6f/13c/272/5fe90f3b8a223189023619__300.jpg" alt="Camera fixing / tripod adapter" data-srcset="https://lemariva.com/storage/temp/public/b6f/13c/272/5fe90f3b8a223189023619__300.jpg 300w" sizes="(max-width: 300px) 100vw, 300px" src="https://lemariva.com/storage/temp/public/b6f/13c/272/5fe90f3b8a223189023619__300.jpg" srcset="https://lemariva.com/storage/temp/public/b6f/13c/272/5fe90f3b8a223189023619__300.jpg 300w"><br><span>Fig. 7: Camera fixing / tripod adapter.</span></p><p><img data-src="https://lemariva.com/storage/temp/public/0cd/6a5/977/5feb9cc4b3ea3328038215__300.jpg" alt="INA219 and M5Stack ATOM matrix" data-srcset="https://lemariva.com/storage/temp/public/0cd/6a5/977/5feb9cc4b3ea3328038215__300.jpg 300w" sizes="(max-width: 300px) 100vw, 300px" src="https://lemariva.com/storage/temp/public/0cd/6a5/977/5feb9cc4b3ea3328038215__300.jpg" srcset="https://lemariva.com/storage/temp/public/0cd/6a5/977/5feb9cc4b3ea3328038215__300.jpg 300w"><br><span>Fig. 8: Camera rotate fix option.</span></p><p><img data-src="https://lemariva.com/storage/temp/public/2f2/8ca/74e/5fe90f2f2e446168683514__300.jpg" alt="INA219 and M5Stack ATOM matrix" data-srcset="https://lemariva.com/storage/temp/public/2f2/8ca/74e/5fe90f2f2e446168683514__300.jpg 300w" sizes="(max-width: 300px) 100vw, 300px" src="https://lemariva.com/storage/temp/public/2f2/8ca/74e/5fe90f2f2e446168683514__300.jpg" srcset="https://lemariva.com/storage/temp/public/2f2/8ca/74e/5fe90f2f2e446168683514__300.jpg 300w"><br><span>Fig. 9: INA219 and M5Stack ATOM matrix.</span></p></div><p>As you can see in Fig. 9, there are some ICs, capacitors, and resistors that aren't assembled and also two cables (red and black). The cables supply 7.5V for the motors. The ICs, capacitors, and resistors are planned to provide 5V and 3.3V to the M5Stack, A4988 drivers, and the INA219. Currently (in that Fig. 9), they are supplied via the USB cable connected, on one end, to the M5Stack, on the other, to the Raspberry Pi. So, you have two ways to supply the system :). But, yes, you need two power suppliers: one for the steppers (7.5V) and one for the Raspberry Pi (5V). The 5V on the board (via ICs) won't be able to supply the Raspberry Pi. Sorry, but I didn't want to use bigger ICs for that.</p><h2><span id="m5stack-application-720530">M5Stack Application</span></h2><p>As I described before, the M5Stack ATOM Matrix controls the motors and offers a RestAPI to receive the commands. The M5Stack application is programmed in MicroPython. If you haven't heard about MicroPython, you can check this tutorial: <a href="https://lemariva.com/blog/2020/03/tutorial-getting-started-micropython-v20">Getting Started with MicroPython on ESP32, M5Stack, and ESP8266</a>. MicroPython is a lean and efficient implementation of the Python 3 programming language that includes a small subset of the Python standard library and is optimized to run on microcontrollers and in "constrained environments".
The application is located <a href="https://github.com/lemariva/uPyFocus">lemariva/uPyFocus</a>.</p><p>So, follow these steps to upload the application to the M5Stack:</p><ol><li>Flash MicroPython to the M5Stack as described in <a href="https://lemariva.com/blog/2020/03/tutorial-getting-started-micropython-v20">this tutorial</a>.</li><li>Clone the <a href="https://github.com/lemariva/uPyFocus">lemariva/uPyFocus</a> repository:
<pre><code>git clone https://github.com/lemariva/uPyFocus.git</code></pre></li><li>Open the folder <code>uPyFocus</code> with <a rel="noopener noreferrer" href="https://code.visualstudio.com/">VSCode</a> and rename the <code>config.py.sample</code> to <code>config.py</code>.</li><li>Open the file and add your Wi-Fi credentials in this section:
<pre><code>wifi = {
    'ssid':'',
    'password':''
}</code></pre>
<p>The M5Stack needs to connect to your Wi-Fi so that the Raspberry Pi (also connected to your Wi-Fi/LAN) can find it and sends the commands to control the steppers.</p></li><li>Upload the application to the M5Stack.</li></ol><p>After uploading the code, the M5Stack resets and starts with the calibration routine (check video section: nnn). Take note of the IP that the M5Stack reports while connecting to your Wi-Fi. You'll need that to configure the Microservices Application.</p><h2><span id="docker-and-docker-compose-on-raspberry-pi-720530">Docker and docker-compose on Raspberry Pi</span></h2><p>The application that runs on the Raspberry Pi is a microservices application. That means different services are orchestrated to offer an application. The orchestration is performed by docker-compose and the services are containerized using Docker.</p><p>To install Docker on the Raspberry Pi, just type the following on a Terminal:</p>
<pre><code>curl -sSL https://get.docker.com | sh
sudo usermod -aG docker pi</code></pre>
<p>If you want to learn more about Docker on Embedded System, just read this tutorial: <a href="https://lemariva.com/blog/2018/05/tutorial-docker-on-embedded-systems-raspberry-pi-beagleboard">Tutorial: Docker on Embedded Systems (Raspberry Pi &amp; Beagleboard)</a></p><p>To orchestrate the services, you need to install <code>docker-compose</code>. This can be done by typing:</p>
<pre><code>sudo pip3 -v install docker-compose</code></pre>
<p>Usually, you need to install these dependencies:</p>
<pre><code>sudo apt-get install -y libffi-dev libssl-dev
sudo apt-get install -y python3 python3-pip
sudo apt-get remove python-configparser</code></pre>
<h2><span id="memory-disk-optional-720530">Memory Disk (optional)</span></h2><p>To take photos faster, you can create a disk on RAM. A RAM disk offers faster access to the data compared to an SD card or a connected USB disk. Thus, this allows the application to reduce the time between photos. To do that, you need to create a folder by typing on a Terminal:</p>
<pre><code>sudo mkdir /mnt/ramdisk</code></pre>
<p>Then, you need to modify the <code>/etc/fstab</code> file and add a line at the end of the file:</p>
<pre><code>sudo nano /etc/fstab
### add the following line at the file's end:
tmpfs /mnt/ramdisk tmpfs nodev,nosuid,size=50M 0 0</code></pre>
<p>Then, you can mount it using:</p>
<pre><code>sudo mount -a</code></pre>
<p>To ensure that everything is working, just reboot your Raspberry Pi using:</p>
<pre><code>sudo reboot</code></pre>
<p>To display the newly created drive and check it use the following command.</p>
<pre><code>df -h</code></pre>
<h2><span id="microservices-application-720530">Microservices Application</span></h2><p>The services of the microservices application are the following:</p><ul><li><strong>webapp</strong>: it provides the frontend application (webserver). It is programmed in Angular.</li><li><strong>backend</strong>: it communicates with the frontend via a RestAPI (Flask server), controls the camera, sends the signals to the M5Stack to control the motors, sends the signals and data to the other services to identify objects and take photos. Basically, it is the core service. It is programmed in Python.</li><li><strong>obj-detector</strong>: it receives an image over UDP and identifies the object on it and returns a JSON message. It is programmed in Python. It uses TensorFlow and connects to the Coral USB Accelerator to process the data in real-time.</li><li><strong>photo-service</strong>: it receives a signal via RestAPI (Flask server) to take photos and it processes them to create HDR photos. It is programmed in Python and it uses Celery for multitasking/non-blocking response to the RestAPI.</li><li><strong>redis</strong>: Celery uses this service to schedule the tasks.</li></ul><div uk-grid=""><p><img data-src="https://lemariva.com/storage/temp/public/828/27f/a52/5fec60ad052fc228241834__800.jpg" alt="Webservice Microservices Application" data-srcset="https://lemariva.com/storage/temp/public/828/27f/a52/5fec60ad052fc228241834__800.jpg 800w, https://lemariva.com/storage/temp/public/828/27f/a52/5fec60ad052fc228241834__400.jpg 400w, https://lemariva.com/storage/temp/public/828/27f/a52/5fec60ad052fc228241834__768.jpg 768w" sizes="(max-width: 800px) 100vw, 800px" src="https://lemariva.com/storage/temp/public/828/27f/a52/5fec60ad052fc228241834__800.jpg" srcset="https://lemariva.com/storage/temp/public/828/27f/a52/5fec60ad052fc228241834__800.jpg 800w, https://lemariva.com/storage/temp/public/828/27f/a52/5fec60ad052fc228241834__400.jpg 400w, https://lemariva.com/storage/temp/public/828/27f/a52/5fec60ad052fc228241834__768.jpg 768w"><br><span>Fig. 10: Webservice Microservices Application.</span></p></div><p>To start the Microservices application, follow these steps:</p><ol><li>Download the <code>docker-compose.yml</code> file or just clone the complete <a href="https://github.com/lemariva/rPIFocus">lemariva/rPIFocus</a> repository:
<pre><code>git clone https://github.com/lemariva/rPIFocus.git</code></pre></li><li>Open the <code>docker-compose.yml</code> file and change the <code>HOST_M5STACK=&lt;ip-address&gt;</code> with the IP of your M5Stack.</li><li>Start the application by typing inside the <code>rPiFocus</code> folder:
<pre><code>docker-compose up -d</code></pre></li><li>Open a browser and visit the URL address: <code>http://&lt;ip-raspberrypi&gt;:4200</code>, you'll see an interface like in Fig. 9. (shhhh... I've just noticed that I wrote Raspberry HD camera and not HQ camera... :()</li><li>To stop the application, type:
<pre><code>docker-compose down</code></pre></li></ol><div uk-grid=""><p><img data-src="https://lemariva.com/storage/temp/public/f5a/b64/244/5fec63443a76c981023585__300.jpg" alt="Focus Type: Box - Background focused" data-srcset="https://lemariva.com/storage/temp/public/f5a/b64/244/5fec63443a76c981023585__300.jpg 300w" sizes="(max-width: 300px) 100vw, 300px" src="https://lemariva.com/storage/temp/public/f5a/b64/244/5fec63443a76c981023585__300.jpg" srcset="https://lemariva.com/storage/temp/public/f5a/b64/244/5fec63443a76c981023585__300.jpg 300w"><br><span>Fig. 11: Focus Type: Box - Background focused (<a href="https://lemariva.com/storage/app/media/blog_imgs/hqcamera/hq_camera_background_focused.jpg">download</a>).</span></p><p><img data-src="https://lemariva.com/storage/temp/public/24c/bc0/434/5fec6339224b0320000410__300.jpg" alt="Focus Type: Box - Nanoblock bird focused" data-srcset="https://lemariva.com/storage/temp/public/24c/bc0/434/5fec6339224b0320000410__300.jpg 300w" sizes="(max-width: 300px) 100vw, 300px" src="https://lemariva.com/storage/temp/public/24c/bc0/434/5fec6339224b0320000410__300.jpg" srcset="https://lemariva.com/storage/temp/public/24c/bc0/434/5fec6339224b0320000410__300.jpg 300w"><br><span>Fig. 12: Focus Type: Box - Nanoblock bird focused (<a href="https://lemariva.com/storage/app/media/blog_imgs/hqcamera/hq_camera_nanoblock_bird_focused.jpg">download</a>).</span></p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://lemariva.com/blog/2020/12/raspberry-pi-hq-camera-autofocus-telephoto-lens">https://lemariva.com/blog/2020/12/raspberry-pi-hq-camera-autofocus-telephoto-lens</a></em></p>]]>
            </description>
            <link>https://lemariva.com/blog/2020/12/raspberry-pi-hq-camera-autofocus-telephoto-lens</link>
            <guid isPermaLink="false">hacker-news-small-sites-25594894</guid>
            <pubDate>Thu, 31 Dec 2020 17:41:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Msmtp: About Authentication Methods]]>
            </title>
            <description>
<![CDATA[
Score 33 | Comments 17 (<a href="https://news.ycombinator.com/item?id=25594693">thread link</a>) | @JetSpiegel
<br/>
December 31, 2020 | https://marlam.de/msmtp/news/about-authentication/ | <a href="https://web.archive.org/web/*/https://marlam.de/msmtp/news/about-authentication/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<article>

<p>2020-12-28</p>
<p>
<i>This article asks why there are so many authentication methods when the simplest one works just fine.</i>
</p>
<p>
There are several methods for password-based authentication with SMTP, POP3,
IMAP and other protocols.  The simplest one is PLAIN. It just sends user name
and password, and that's it. The server side only needs to store a hash of the
password, not the password itself, so it cannot be stolen from the server.  The
client side can store the password encrypted, so it cannot be stolen from the client
either (in msmtp and mpop: use a keyring or use gpg with <code>passwordeval</code>).
The transmission of the password is inside a TLS-secured session, so the
client knows it is really talking to the right service and not to an attacker,
and eavesdropping is prevented.
</p>
<p>
So, all problems are solved, right? But <b>why then are there so many authentication methods?</b>
I have not found a convincing answer to this question yet. In the following, I will argue that even the
relatively new SCRAM-SHA-256 method does not provide any practical benefit over PLAIN and is far more complex than it should be.
If I am wrong, please <a href="mailto:marlam@marlam.de">send me a mail</a> and correct me. I promise I will update
this article with all the convincing arguments I receive.
</p>
<p>
My premise is that everyone is using TLS for every SMTP, POP3 or IMAP session
nowadays, since there is no such thing as a trustworthy network.<br>
So what benefits does SCRAM-SHA-256 promise? According to <a href="https://tools.ietf.org/html/rfc5802">RFC 5802</a>:
</p><ul>
<li><i>There are some significant security concerns with the transmission of clear-text
       passwords over a TLS-protected channel.</i><br>
       Are there? The RFC does not list any. Please specify.</li>
<li><i>The authentication information stored in the authentication
       database is not sufficient by itself to impersonate the client.</i><br>
       This is true also PLAIN when the server stores just hashes.<br>
       <i>The information is salted to prevent a pre-stored dictionary attack if the database is stolen.</i><br>
       Dictionary attacks do not help with good passwords. And if the user is too stupid to use a password manager for
       good unique passwords, then inventing a more complicated authentication method will not help you:
       your user will still write the password on a post-it note, stick it on a monitor, and
       then post a photo of his desk on social media. He will also without hesitation run any software from any source
       on his computer and not care about security updates or privacy settings. In other words: the user must be educated,
       you cannot solve this problem with technical means.</li>
<li><i>The server does not gain the ability to impersonate the client to other servers.</i><br>
       If you cannot trust your mail server, then it is game over anyway, so this is not a relevant concern.</li>
<li><i>Mutual authentication is supported.</i><br>
       Why would the client want the server to authenticate itself? It is already using TLS and has verified that
       it is talking to the right server.</li>
<li><i>SCRAM is capable of transporting authorization identities.</i><br>
       For what purpose? This is not needed for password-based authentication.</li>
<li><i>Support for channel binding.</i><br>
       This has absolutely no benefit when always using TLS, as far as I can see.</li>
<li><i>Support for Unicode user names and passwords.</i><br>
       PLAIN supports that too, and in a much simpler way: it sees both user name and password simply as byte sequences.
       Of course both should be valid UTF-8, but that does not need to concern the method; this is handled simply
       on the client side. No need for <code>stringprep</code> and other Unicode-interpreting mess like in SCRAM-SHA-256!</li>
</ul>
So what's left? Nothing.  I really hope I'm wrong.


</article>

</div></div>]]>
            </description>
            <link>https://marlam.de/msmtp/news/about-authentication/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25594693</guid>
            <pubDate>Thu, 31 Dec 2020 17:24:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Futureproof is a live editor for GPU shaders, built on Zig, Neovim, and WebGPU]]>
            </title>
            <description>
<![CDATA[
Score 18 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25594611">thread link</a>) | @zdw
<br/>
December 31, 2020 | http://www.mattkeeter.com/projects/futureproof/ | <a href="https://web.archive.org/web/*/http://www.mattkeeter.com/projects/futureproof/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">
<!-- End header -->
<p><a href="https://github.com/mkeeter/futureproof"><em>Futureproof</em></a> is a live editor for GPU shaders,
built on Zig, Neovim, and WebGPU.</p>
<p><img src="http://www.mattkeeter.com/projects/futureproof/marble.png" alt="Marble shader"><br>
<a href="https://www.shadertoy.com/view/MtX3Ws">(original shader by S. Guillitte)</a></p>
<p>It's designed for a quick feedback loop,
recompiling shaders and marking errors live!</p>
<p>The name is tongue-in-cheek,
because it builds on as many unproven new technologies as possible:</p>
<ul>
<li>It is written in <a href="https://ziglang.org/">Zig</a>, which is a "better C"</li>
<li>The editor is an embedded <a href="https://neovim.io/">Neovim</a>, which is a modernized Vim</li>
<li>Graphics are done with <a href="https://gpuweb.github.io/gpuweb/">WebGPU</a>,
which is an in-development next-gen API</li>
</ul>
<p>The system also uses
<a href="https://www.freetype.org/">FreeType</a> for font rasterization
and <a href="https://www.glfw.org/">GLFW</a> for windowing,
but those are both relatively mature,
so I don't get any points for them.</p>
<h2>Embedding Neovim</h2>
<p>Neovim is run as a subprocess (<code>nvim --embed</code>),
which communicates on <code>stdin</code> and <code>stdout</code>
using the <a href="https://github.com/msgpack-rpc/msgpack-rpc"><code>msgpack-rpc</code></a> format.</p>
<p>I wrote <a href="https://github.com/mkeeter/futureproof/blob/master/src/msgpack.zig"><code>msgpack</code></a>
and <a href="https://github.com/mkeeter/futureproof/blob/master/src/rpc.zig"><code>msgpack-rpc</code></a>
libraries in Zig from the ground up,
which ended up being &lt; 1 KLOC.</p>
<p>A listener thread monitors the subprocess's <code>stdout</code>,
decoding messages then passing events and responses into a pair of queues.
The main loop claims and handles events before drawing each frame.</p>
<p>RPC calls are blocking: the call is encoded and passed to the subprocess's
<code>stdin</code>, then we wait for the listener thread to return the response
on the queue.</p>
<p><img src="http://www.mattkeeter.com/projects/futureproof/nvim.svg" alt="Neovim"></p>
<h2>Drawing the character grid</h2>
<p>Neovim's abstract UI model is a monospaced grid of a particular width and height.
Each cell in the grid has a character and attribute ID;
the latter is a lookup into a table of colors, bold, underlines, etc.</p>
<p>The grid and attribute table are modified through API messages
(<code>grid_line</code>, <code>grid_cursor_goto</code>, <code>hl_attr_define</code>, <code>mode_change</code>, etc),
so our UI has to keep track of this state.</p>
<p>These API calls are evaluated by the main loop
and edit state in CPU memory,
but we want rendering to be done by the GPU.
As it turns out,
both Zig and GLSL can import C headers, so Futureproof uses a fun trick:
we define a set of <a href="https://github.com/mkeeter/futureproof/blob/master/extern/futureproof.h">C <code>structs</code></a>,
populate them on the CPU (in Zig),
then copy them to the GPU and use them directly (in GLSL).</p>
<p>(This requires a <a href="https://github.com/KhronosGroup/GLSL/blob/master/extensions/ext/GL_EXT_scalar_block_layout.txt">GLSL extension</a>
to properly pack the <code>structs</code>)</p>
<p>We split the state into two pieces:</p>
<ul>
<li>Meta-data tables (attributes, font atlas, etc.) are in a <strong>uniform buffer</strong>,
as they're relatively small (11 KB in total)</li>
<li>The character grid is larger (1 MB), and so is passed as a <strong>storage buffer</strong></li>
</ul>
<p>The font is rasterized and packed into a texture on the CPU side.
As part of the meta-data, we include the positions and bounding boxes
of each character.
The font ends up looking something like this:</p>
<p><img src="http://www.mattkeeter.com/projects/futureproof/font.png" alt="Font texture"></p>
<p>The grid stores character and attribute indices packed into a <code>uint32_t</code> per cell.
This limits us to 65535 characters, but that's acceptable.</p>
<p>In this architecture, the CPU side doesn't think about vertex positions at all!
It simply passes the character grid to a vertex shader and tells it to draw
<code>total_tiles * 6</code> elements.</p>
<p>The vertex shader then calculates vertex positions,
lays out tiles in the character grid,
samples from the font texture, and so on.</p>
<p>Getting pixel-perfect font rendering was a comedy of (off-by-one) errors,
including this particularly cursed GUI:</p>
<p><img src="http://www.mattkeeter.com/projects/futureproof/haunted.png" alt="Haunted Neovim GUI"></p>
<h2>Platform integration</h2>
<p>I developed Futureproof on macOS,
and there were a few cases where I needed to hook into native APIs.</p>
<p>The <code>wgpu-native</code> demo simply <a href="https://github.com/gfx-rs/wgpu-native/blob/master/examples/triangle/main.c#L58-L66">writes Objective-C in <code>main.c</code></a>,
then <a href="https://github.com/gfx-rs/wgpu-native/blob/master/examples/triangle/CMakeLists.txt#L16">compiles with <code>-x objective-c</code></a>,
meaning the input source file is secretly Objective-C, rather than plain C.</p>
<p>This doesn't quite work with Zig, despite my best efforts:
the pass-through C compiler doesn't accept the <code>-x</code> flag.
Instead, we can use the <a href="https://developer.apple.com/documentation/objectivec/objective-c_runtime">Objective-C Runtime API</a> directly,
inspired by <a href="https://github.com/jimon/osx_app_in_plain_c">OS X app in Plain C</a>.</p>
<p>In practice, this is <a href="https://github.com/mkeeter/futureproof/blob/master/src/objc.zig">surprisingly clean</a>:
We're not defining our own classes, so we just use
<code>sel_getUid</code>, <code>objc_lookUpClass</code>, and <code>objc_msgSend</code>.
<a href="https://github.com/mkeeter/futureproof/blob/master/src/paste.zig#L9-L18">Here's how we use it</a>
to get a string from the pasteboard.</p>
<p>(Of course, this is fundamentally terrifying and shouldn't be used for production code)</p>
<h2>Live shader previews</h2>
<p>Futureproof attaches itself to the Neovim buffer,
so it receives messages whenever the buffer changes.
This lets us keep a mirror of the text on the Futureproof side of the RPC barrier.</p>
<p>If the text hasn't changed in some amount of time (200 ms by default),
we pass it to <code>shaderc</code> and attempt to compile it from GLSL to SPIR-V.
Errors are parsed out of the return value and passed back into Neovim,
showing up in the location list and as signs in the left column.</p>
<p><img src="http://www.mattkeeter.com/projects/futureproof/error.png" alt="Error"></p>
<p>After a shader is successfully compiled, the SPIR-V bytecode is passed into WebGPU
and rendered with the rest of the GUI.</p>
<p>One unexpected challenge was keeping the GUI performant while
rendering a shader in the same GPU queue.
For challenging shaders like <a href="https://www.shadertoy.com/view/Ms2SD1">this seascape</a>,
the shader takes hundreds of milliseconds to render.</p>
<p><img src="http://www.mattkeeter.com/projects/futureproof/seascape.png" alt="Seascape"></p>
<p>There's got to be a <em>good</em> way to handle this,
but for Futureproof, I used a hack:
when a shader takes too long,
the preview image is split into tiles, each of which updates once per GUI frame.
The tiles are stored in a separate texture,
which is copied into the main texture once all tiles have been rendered.</p>
<p>This effectively slows down the shader by a factor of <code>n^2</code>,
where <code>n</code> is the number of tiles per side.
We pick <code>n</code> to keep the GUI responsive,
with a median filter to stop single slow frames from messing things up.</p>
<p>I'd love to hear the <em>correct</em> way to handle this with WebGPU,
but suspect that it will require support for multiple queues,
which isn't yet in the standard.</p>
<h2>Are these technologies ready for use?</h2>
<h3>Neovim</h3>
<p>Yes, it's relatively stable.</p>
<p>I found <a href="https://github.com/neovim/neovim/issues/13418">one bug</a>
early in development,
which received no feedback, so that's a minor red flag.</p>
<p>More recently, I discovered a
<a href="https://github.com/neovim/neovim/issues/13626">more serious issue</a>
which makes it easy to deadlock Futureproof.
This more concerning,
but it may be a problem with how I architected the GUI and live error-marking system;
I'm waiting to hear back from the Neovim development team about this issue.</p>
<h3>Zig</h3>
<p>Absolutely not!
This is to be expected:
it's at 0.7.0, so it's not <em>supposed</em> to be stable or bug-free.</p>
<p>I discovered <a href="https://github.com/ziglang/zig/issues?q=is%3Aissue+author%3Amkeeter">multiple bugs</a>,
and understanding the standard library requires reading the source.</p>
<p>In addition, it's changing very quickly;
updating to the latest nightly build breaks Futureproof regularly.</p>
<p>Still, Zig is <strong>fun</strong>!</p>
<p>Things that I particularly like:</p>
<ul>
<li>The general-purpose allocator, which can print memory leaks on program exit.
This is like running in Valgrind all the time, and makes writing
leak-free code part of normal development.</li>
<li>C library interop is fantastic: you can natively import header files, then
call into C libraries, and it all just works!</li>
<li>The philosophy of passing explicit allocators around; particularly how arena
allocators can then be used for easy memory management.</li>
</ul>
<p>I want to like <code>comptime</code> evaluation,
but it's a little too shaky right now:
I tried to use it for a
<a href="https://github.com/mkeeter/futureproof/blob/master/src/msgpack.zig#L119-L183">generic <code>msgpack</code> struct packer</a>,
and often ended up confused whether my code was wrong or the compiler was broken.</p>
<p>More generally, I fear that <code>comptime</code> is <em>too powerful</em>:
without some kind of concept or trait system, it can be a free-for-all.
For example, using <a href="https://ziglang.org/documentation/master/#Generic-Data-Structures"><code>comptime</code> type variables to do generics</a>
is <em>extremely clever</em>,
but it means that generating documentation will be a challenge:
after all, it's powerful enough to return entirely different APIs
depending on the type!</p>
<p>(Of course, this is also true for C++ templates, but they're hard enough to use that
most people don't get too weird with them)</p>
<p>Similarly, error handling is a little rough:
there's no way to attach data (e.g. a message) to an error
while using the language-level error handling.</p>
<p>Finally, I'm a little iffy on the
"strings are simply arrays of <code>u8</code>" philosophy.
Though static strings are guaranteed to be UTF-8,
the onus is on the programmer
(rather than the type system)
to enforce that strings from other sources be correctly encoded.
For a detailed look at where this can break,
see the discussion of <code>std::fs::metadata</code> in
<a href="https://fasterthanli.me/articles/i-want-off-mr-golangs-wild-ride">this post</a></p>
<p>(the previous paragraph has been edited after publication,
based on feedback from the Zig Discord)</p>
<h3>WebGPU</h3>
<p>WebGPU is <em>fine</em>, but the documentation is lacking.
I had to reverse-engineer a lot of behavior from examples,
reading the source code,
and pre-existing knowledge of modern graphics APIs.
As discussed above,
the lack of multi-queue rendering was the only real frustration.</p>
<p>I was using the <a href="https://github.com/gfx-rs/wgpu-native"><code>wgpu-native</code></a> bindings,
which seem a bit unloved compared to <a href="https://github.com/gfx-rs/wgpu-rs"><code>wgpu-rs</code></a>.
There's <a href="https://github.com/gfx-rs/wgpu-native/issues/53">one obvious bug</a>
which I encountered within 5 minutes,
and it's unclear how often it's synched with <code>wgpu-rs</code>'s releases.</p>
<p>It's frustrating needing <a href="https://github.com/google/shaderc"><code>shaderc</code></a>
to go from text to SPIR-V,
particularly because a full download unzips to 1.9GB (!!).
It looks like <a href="https://wgpu.rs/doc/naga/index.html"><code>naga</code></a>
aims to replace it, so I'm optimistic about the future!</p>
<h2>Future plans</h2>
<p>This was a fun exercise, but I'm not planning to develop it any further.</p>
<p>(It's likely that I'll build a similar system in Rust,
next time I want a framework for semi-interactive graphics programming)</p>
<p>The code is <a href="https://github.com/mkeeter/futureproof">on Github</a>,
and forks are welcome;
if one achieves critical momentum,
I'd be happy to link it here.</p>
<h2>Bonus Shader</h2>
<p>Here's a very bad Cornell Box Raytracer that I threw together,
basically so I could have a project thumbnail:</p>
<p><img src="http://www.mattkeeter.com/projects/futureproof/cornell.png" alt="Cornell box"></p>

<!-- Begin footer -->
</div></div>]]>
            </description>
            <link>http://www.mattkeeter.com/projects/futureproof/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25594611</guid>
            <pubDate>Thu, 31 Dec 2020 17:15:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The best things and stuff of 2020]]>
            </title>
            <description>
<![CDATA[
Score 17 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25593828">thread link</a>) | @geospeck
<br/>
December 31, 2020 | http://blog.fogus.me/2020/12/31/the-best-things-and-stuff-of-2020/ | <a href="https://web.archive.org/web/*/http://blog.fogus.me/2020/12/31/the-best-things-and-stuff-of-2020/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="body">

                <div id="post-6692">
                 <h3><a href="http://blog.fogus.me/2020/12/31/the-best-things-and-stuff-of-2020/" title="The best things and stuff of 2020">The best things and stuff of 2020</a></h3>
                 <p><span>Dec 31, 2020 </span></p><p>Great things and people that I discovered, learned, read, met, etc. in 2020.  No particular ordering is implied.  Not everything is new.</p>

<p><em>also: see the lists from <a href="http://blog.fogus.me/2019/12/30/the-best-things-and-stuff-of-2019/">2019</a>, <a href="http://blog.fogus.me/2019/01/02/the-best-things-and-stuff-of-2018/">2018</a>, <a href="http://blog.fogus.me/2018/01/02/the-best-things-and-stuff-of-2017/">2017</a>, <a href="http://blog.fogus.me/2016/12/29/the-best-things-and-stuff-of-2016/">2016</a>, <a href="http://blog.fogus.me/2015/12/29/the-best-things-and-stuff-of-2015/">2015</a>, <a href="http://blog.fogus.me/2014/12/29/the-best-things-and-stuff-of-2014/">2014</a>, <a href="http://blog.fogus.me/2013/12/27/the-best-things-and-stuff-of-2013/">2013</a>, <a href="http://blog.fogus.me/2012/12/26/the-best-things-and-stuff-of-2012/">2012</a>, <a href="http://blog.fogus.me/2011/12/31/the-best-things-and-stuff-of-2011/">2011</a> and <a href="http://blog.fogus.me/2010/12/30/the-best-things-in-2010/">2010</a></em></p>

<h2>Great blog-posts / articles read</h2>

<ul>
<li><em><a href="https://lithub.com/the-octopus-an-alien-among-us/">The Octopus: An Alien Among Us</a></em> – <em>for biology-curious goofs<sup id="fnref:bio"><a href="#fn:bio" rel="footnote">1</a></sup> such as myself, the octopus is a fascinating example of aliens among us. no chimera was half as interesting.</em></li>
<li><em><a href="https://queue.acm.org/detail.cfm?id=1531242">A Conversation with Arthur Whitney</a></em> – <em>computing luminary and designer of the <a href="http://www.aplusdev.org/Develop/devTeam.html">A+</a>, k, and q languages as well as an <a href="https://code.jsoftware.com/wiki/Essays/Incunabulum">early contributor to J</a> speaks about his life and contributions to computing and also that he never writes buggy code.</em></li>
<li><em><a href="https://www.newyorker.com/books/page-turner/the-true-glamour-of-clarice-lispector">The True Glamour of Clarice Lispector</a></em> – <em>a portrait of a brilliant author who’s characters lived and experienced life as the author experienced it. her body of work is a record of her life.</em></li>
<li><em><a href="http://www.aholme.co.uk/Mk1/Architecture.htm">Mark I FORTH Computer</a></em> – <em>a home-brewed forth computer using discrete components.</em></li>
<li><em><a href="https://medium.com/pop-off/art-bell-and-the-eerie-joy-of-late-night-radio-8e4476d00e4b">Art Bell and the Eerie Joy of Late Night Radio</a></em> – <em>as a college student i would often spend my nights slinging code, working proofs, and writing essays long into the night. my background sounds of choice were the dulcet tones of Art Bell, the original host of Coast to Coast AM and lover of all things weird. while most of the content of his shows were far-fetched at best, i couldn’t help but marvel at the possibilities of a world that was much more interesting than the one in which i lived.</em></li>
<li><em><a href="https://embeddedbits.org/how-is-the-linux-kernel-tested/">How is the Linux Kernel Tested?</a></em> – <em>from linus’ gut to static analysis to automated testing to continuous integration to people running commands.</em></li>
<li><em><a href="http://www.wirfs-brock.com/allen/posts/914">The Rise and Fall of Commercial Smalltalk</a></em> – <em>Allen Wirfs-Brock responds to Gilad Bracha’s perspective on the subject, providing his own perspective in the process. interestingly what Smalltalk brought to computing was probably more important than Smalltalk itself.</em></li>
<li><em><a href="http://www.codersnotes.com/notes/a-constructive-look-at-templeos/">A Constructive Look at TempleOS</a></em> – <em>TempleOS is a legend in the weird world of hobby osdev and its developer <a href="https://en.wikipedia.org/wiki/Terry_A._Davis">Terry Davis</a> (RIP) was as prolific as he was controversial (i.e. massively). the operating system is an altar (in more ways than one) to eccentricity and was developed with a singular focus on speed and direct hardware access.</em> <sup id="fnref:losethos"><a href="#fn:losethos" rel="footnote">2</a></sup></li>
<li><em><a href="https://rusue.com/cemetery-of-soviet-computers/">Cemetery of Soviet Computers</a></em> – <em>a retrocomputing bonanza of defunct Soviet computer systems found in a dilapidated building somewhere in Russia.</em></li>
<li><em><a href="http://hci.stanford.edu/winograd/shrdlu/name.html">How SHRDLU Got Its Name</a></em> – <em>Terry Winograd explains how his blocks world program SHRDLU got its name.</em> <sup id="fnref:blocks"><a href="#fn:blocks" rel="footnote">3</a></sup></li>
<li><em><a href="https://www.wired.com/story/ai-ruined-chess-now-making-game-beautiful/">AI Ruined Chess, Now It’s Making the Game Beautiful Again</a></em> – <em>how AlphaZero is used to explore odd variants of Chess, finding new patterns and in some cases reducing draws dramatically.</em></li>
<li><em><a href="https://aphyr.com/posts/353-rewriting-the-technical-interview">Rewriting the Technical Interview</a></em> – <em>a work of beautiful madness.</em></li>
<li><em><a href="https://ideolalia.com/essays/thought-leaders-and-chicken-sexers.html">thought leaders and chicken sexers</a></em> by Zach Tellman – <em>an essay that takes on the topic of Paul Graham head on, especially in regard to his programming language experiment Arc. computerists of a certain vintage have a complex relationship with pg in that many of his early, mostly pseudo-technical writings were inspirational. however, over time his focus has changed to that of concerns of finance and thought-leadership thus leaving many who admired his technicalish essays alienated. Zach captures the spirit of that group well in both the content of the article and its subtext.</em></li>
<li><em><a href="http://danluu.com/sounds-easy/">I Could Do That in a Weekend</a></em> – <em>if you’ve spent any time at all on the internet then you’ve likely heard the phrase “i could do that in a weekend” — the battle cry of the dickweed. Dan Luu talks about the difference between happy-paths and real work required to make modern software systems.</em></li>
</ul>

<h2>Most viewed blog posts by me</h2>

<p>I’ve been trying something new over the past couple of years. That is, I’ve been posting threads and such on <a href="http://www.twitter.com/fogus">my Twitter</a> with a small handful of posts here  That said, there were a few high-traffic posts on my blog.</p>

<ul>
<li><em><a href="http://blog.fogus.me/2020/12/16/torilisp-an-ersatz-lisp-for-tiny-birds">ToriLisp – an ersatz LISP for little birds</a></em> – <em>my final post of 2020 turned out to be my most popular. this one described a little programming language that I created over the course of the year and the motivations behind it.</em></li>
<li><em><a href="http://blog.fogus.me/2015/04/27/six-works-of-computer-science-fiction/">Six Works of Computer Science Fiction</a></em> – <em>an older post that discusses computer science books describing systems that couldn’t possibly be real — except that they are!</em></li>
<li><em><a href="http://blog.fogus.me/2020/05/01/walking-the-clojure-source-history-a-talk-not-given/">Walking the Clojure Source History (a talk not given)</a></em> – <em>some images of notebook pages with notes about the commit history of Clojure during its early days. the notes were in service to a conference talk that i never gave.</em></li>
<li><em><a href="http://blog.fogus.me/2020/05/20/8-bit-spirituals/">8-bit Spirituals</a></em> – <em>a short discussion about old 8-bit programs and the gestalt of the small, yet feature-rich, in programming and some modern examples that fit this mold.</em><sup id="fnref:8bs"><a href="#fn:8bs" rel="footnote">4</a></sup></li>
</ul>

<h2>Favorite technical books discovered (and read)</h2>

<p>I’ve intentionally reduced the number of technical books that I consume, but there are a few that I “found” in 2020 that stood out.</p>

<ul>
<li><em><a href="https://www.amazon.com/UNIX-History-Memoir-Brian-Kernighan/dp/1695978552?tag=fogus-20">UNIX: A History and a Memoir</a></em> by Brian Kernigan – <em>this was much better than i thought it would be. regardless of how you view UNIX the anecdotes and stories are worth reading.</em></li>
<li><em><a href="https://www.amazon.com/Introduction-VLSI-Systems-Carver-Mead/dp/0201043580?tag=fogus-20">Introduction to Very Large Scale Integration Systems</a></em> by Carver Mead and Lynn Conway – <em>this book might have motivated the spread of Alan Kay’s famous quote in across the general computer landscape — ‘People who are really serious about software should make their own hardware’ — but it didn’t. certainly Conway and Mead’s seminal work is deeply influential but even still most industry folks don’t understand VLSI except superficially, myself included.</em></li>
<li><em><a href="https://www.amazon.com/Dataflow-Programming-Language-Studies-Processing/dp/0127296506/?tag=fogus-20">Lucid, the Dataflow Programming Language</a></em> by William Wadge – <em>if enjoy twisting the langdev center of your brain into a pretzel then Lucid might be your thing. the book builds to the main language from subset languages, each teaching core principles. this is a new addition to my personal CS book pantheon.</em></li>
<li><em><a href="https://www.amazon.com/Footsteps-Empty-Valley-issue-3-ebook/dp/B06X6JGM5L/?tag=fogus-20">Footsteps In An Empty Valley issue 3</a></em> by Chen-Hanson Ting – <em>a book that tries to make a parallel between Zen and Forth. i can’t say if the two did meet but it was an entertaining journey nonetheless.</em></li>
<li><em><a href="https://www.amazon.com/Beneath-Apple-DOS-Don-Worth/dp/0912985003/?tag=fogus-20">Beneath Apple DOS</a></em> by Don Worth – <em>while trying to squeeze out as much performance from his Apple ][ to run his game Beneath Apple Manor, Don Worth explore the darkest recesses of his computer to find every speed hack that he could use. his findings were published in this book.</em></li>
</ul>

<h2>Favorite non-technical books read</h2>

<ul>
<li><em><a href="https://www.amazon.com/Understanding-Media-Extensions-Marshall-McLuhan/dp/0262631598/?tag=fogus-20">Understanding Media</a></em> by Marshall McLuhan – <em>this book has been… a challenge… to read so far, but so far I’ve found the effort worthwhile. McLuhan died in 1980, but seems to have been talking about us.</em></li>
<li><em><a href="https://www.amazon.com/Confederacy-Dunces-John-Kennedy-Toole/dp/0802130208/?tag=fogus-20">A Confederacy of Dunces</a></em> by John Kennedy Toole – <em>i had this book all wrong. you see, before 2020 i viewed it from a position of pure ignorance, tainted by prejudices. you see, in the past some of the worst people that i have known loved this book so naturally i made an association with it. couple these biases with the fact that a gloss of the story — three intermingled storylines populated by utterly broken people with the most broken of all taking center stage — seemed not worth my time. all of this said, i eventually broke down and decided to try the first chapter. well, the first motivated the second and it in turn motivated the third and so on until finally i was done. and wow was it a great book. it’s the kind of book that absolutely deserves its accolades and despite finding its place on the pedestals of the the Ignatius Reillys of the world, is a must read by lovers of literature.</em></li>
<li><em><a href="https://www.amazon.com/Hitler-Ascent-1889-1939-Volker-Ullrich/dp/1101872055/?tag=fogus-20">Hitler: Ascent, 1889-1939</a></em> by Volker Ullrich – <em>i’ve read my share of books on the subject but what i found especially compelling about this take was its focus on most of the points along the ascent where the powers of the time could have tamped out the eventual greatest evil but refused.</em></li>
<li><em><a href="https://www.amazon.com/Classical-Education-Stuff-Taught-School/dp/1782430105/?tag=fogus-20">A Classical Education: The Stuff You Wish You’d Been Taught at School</a></em> by Caroline Taggart – <em>i was [this] close to attending St. Johns College where a classical education is compulsory but since i didn’t i’ve often wondered what i missed out on. while this book is no substitution for a classical education, it does provide a nice outline for diving deeper should one be compelled to do so.</em></li>
<li><em><a href="https://www.amazon.com/Wise-Blood-Novel-FSG-Classics/dp/0374530637/?tag=fogus-20">Wise Blood</a></em> by Flannery O’Connor – <em>like ACoDunces mentioned above, my prejudices prevented me from reading Wise Blood for far longer than I should have. however, in the case of the O’Connor classic it was the negative view by people whom i admire that kept me away. again an opportunity to buck my prejudices presented itself and as a result a pantheonic book<sup id="fnref:pant"><a href="#fn:pant" rel="footnote">5</a></sup> was found. the book masquerades as a morality tale but lurking beneath is a nihilistic romp that’s kept me thinking for weeks after reading it. it’s stuck with me and i can’t foresee it leaving my mind any time soon.</em></li>
</ul>

<h2>Number of books published</h2>

<p>0</p>

<h2>Number of books written</h2>

<p>0</p>

<h2>Number of books read</h2>

<p><a href="https://www.goodreads.com/review/list/266149?shelf=2020_read&amp;sort=date_read&amp;order=d">lots</a></p>

<h2>Favorite musicians discovered</h2>

<ul>
<li><em><a href="https://www.amazon.com/fire-meant-burning-Vlor/dp/B000QQPR1A/?tag=fogus-20">Vlor</a></em> – <em>a nice layering of haunting guitar and persistent drones. it’s always nice to discover new “headspace music.”</em></li>
<li><em><a href="https://soundcloud.com/shakulatte">Shakulatte</a></em> – <em>a blend of traditional Japanese skakuhachi music with some blues and jazz for good measure. full disclosure: Adam is a very good friend of mine but i’ve always loved his music and would listen even if i didn’t know him.</em></li>
<li><em><a href="https://zacbentz.bandcamp.com/album/field-recordings-from-the-edge-of-hell">Dirty Knobs</a></em> – <em>specifically the “Field Recordings From The Edge Of Hell” album which is atmospheric and brooding.</em></li>
</ul>

<h2>Favorite show about an old dude riding trains and talking and looking at stuff</h2>

<p><em><a href="https://www.amazon.com/The-North-East/dp/B07MF1M626/?tag=fogus-20">British Railway Journeys</a></em> with Robert Symes</p>

<h2>Favorite films/shows discovered</h2>

<ul>
<li><em><a href="https://www.amazon.com/Lighthouse-Willem-Dafoe/dp/B07Z4236MR/?tag=fogus-20">The Lighthouse</a></em> – <em>a fantastic freaking film. it’s horror in that it’s somewhat tangential to a Lovecraftian experience all the while skirting the line between myth and time. on the surface the film tells a tale of loneliness, frustration, alcoholism, and the slow slide into madness but there’s a lot more going on than meets the eye.</em></li>
<li><em><a href="https://www.amazon.com/Episode-1/dp/B00S1VFB36/?tag=fogus-20">Fortitude</a></em> – <em>quite grim in terms of exposing the dark side of the human condition but I was in the mood for that. you have to be. It has some truly memorable characters.</em></li>
</ul>

<h2>Favorite games discovered</h2>

<ul>
<li><em><a href="https://all-aboardgames.com/products/us-only-18chesapeake-preorder">18Chesapeake</a></em> – <em>for fans of <a href="https://en.wikipedia.org/wiki/18XX">18XX games</a> this is train-game comfort food. however, the reason that it makes the …</em></li></ul></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://blog.fogus.me/2020/12/31/the-best-things-and-stuff-of-2020/">http://blog.fogus.me/2020/12/31/the-best-things-and-stuff-of-2020/</a></em></p>]]>
            </description>
            <link>http://blog.fogus.me/2020/12/31/the-best-things-and-stuff-of-2020/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25593828</guid>
            <pubDate>Thu, 31 Dec 2020 15:59:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Probabilistic Machine Learning: An Introduction]]>
            </title>
            <description>
<![CDATA[
Score 263 | Comments 37 (<a href="https://news.ycombinator.com/item?id=25593262">thread link</a>) | @joaorico
<br/>
December 31, 2020 | https://probml.github.io/pml-book/book1.html | <a href="https://web.archive.org/web/*/https://probml.github.io/pml-book/book1.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
by Kevin Patrick Murphy.
<br>
MIT Press, 2021.


<h2>Key links</h2>

<ul>

  <li> <a href="https://probml.github.io/pml-book/pml1/pml1-toc-short-2020-12-26.pdf">Short table of
      contents</a>

  </li><li> <a href="https://probml.github.io/pml-book/pml1/pml1-toc-long-2020-12-26.pdf">Long table of
      contents</a>

  </li><li> <a href="https://probml.github.io/pml-book/pml1/pml1-preface-2020-12-26.pdf">Preface</a>

  </li><li> <a href="https://github.com/probml/pml-book/releases/latest/download/pml1.pdf">Draft pdf file</a>,  CC-BY-NC-ND license. (Please cite the official reference below.)

    </li><li> <a href="https://somsubhra.com/github-release-stats/?username=probml&amp;repository=pml-book&amp;page=1&amp;per_page=5">Book download statistics</a>
    
    </li><li> <a href="https://github.com/probml/pyprobml">Python code</a>
      
  </li><li> <a href="https://github.com/probml/pml-book/issues">Issue tracker</a>. Use this to report problems with the book and/or code. Be sure to specify which 
    release (date stamp) of the book you are using. Please specify pdf and print page number (which sometimes differ). For reporting small typos, please collect
    a batch of errors into a doc, and create a single issue (or add to an existing open issue list).
</li></ul>

If you use this book, please be sure to cite
<pre><code>
 @book{pml1Book,
 author = "Kevin P. Murphy",
 title = "Probabilistic Machine Learning: An introduction",
 publisher = "MIT Press",
 year = 2021,
 url = "http://mlbayes.ai"
}
</code></pre>

<h2> Endorsements</h2>

<ul>

  <li> "My favorite machine learning book just received a face-lift!
    'Probabilistic Machine Learning: An Introduction' is the most
    comprehensive and accessible book on modern machine learning by a
    large margin.  
    It now also covers the latest developments in deep learning and
    causal discovery. With this upgrade it will remain the reference
    book for our field that every respected researcher needs to have
    on their desk."  -- <a href="https://staff.fnwi.uva.nl/m.welling/">Max Welling</a>,
    U. Amsterdam 

    </li><li> "There are many books on machine learning out there, but none gives
    such a well-rounded, up-to-date, and comprehensive view of the
    field as this one. We use this book as reference reading for our
    students taking the advanced machine learning course at Oxford to
    introduce them to fundamental as well as current topics in the
    field. I'm amazed at the amount of work that went into this
    book---which will surely be used by many to train the next
      generation of machine learning experts."
      -- <a href="http://www.cs.ox.ac.uk/people/yarin.gal/website/">Yarin    Gal</a>, U. Oxford
    

    </li></ul>

<h2>Table of contents</h2>

<br>
    <img src="https://probml.github.io/pml-book/pml1/pml1-toc-short-2col-2020-12-27.png" alt="TOC 2020-12-26">
<h2><a id="ack"></a>Acknowledgements</h2>

I would like to thank the following people for helping with this book.

<ul>

<li> People who helped write some sections:
  Krzysztof Choromanski,
  Justin Gilmer,
  Zico Kolter,
  Frederick Kunster,
  Lihong Li,
  Si Yi Meng,
  Aaron Mishkin,
  Byran Perozzi,
  Colin Raffel,
  Mark Schmidt,
  Sharan Vaswani,
  Andrew Wilson.
  
      </li><li> Proof reader: John Fearns.

      </li><li> People who have provided feedback on parts of the book:
Sebastien Bratieres,
	Kai Brodersen,
	Peter Cerno,
Daniel Galvez,
Abhishek Kumar,
Max Lepikhin,
Aaron Michelony,
Hal Varian.

      </li><li> People who have helped with the code:
	Andrew Carr,
	Aurelien Geron,
	Osvaldo Martin,
	Duane Rich,
	Mahmoud Soliman,
	Theodore Vasiloudis,
	Oscar Wahltinez.

      </li><li> People who have helped with the figures:
	Sandeep Choudhary, and others who are credited in the figure captions.
    </li></ul>
    

</div>]]>
            </description>
            <link>https://probml.github.io/pml-book/book1.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25593262</guid>
            <pubDate>Thu, 31 Dec 2020 15:03:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Spirulina Algae Photobioreactor (2017)]]>
            </title>
            <description>
<![CDATA[
Score 59 | Comments 16 (<a href="https://news.ycombinator.com/item?id=25593247">thread link</a>) | @seesawtron
<br/>
December 31, 2020 | https://www.mikechatzidakis.com/home/2017/7/29/spirulina-algae-photobioreactor | <a href="https://web.archive.org/web/*/https://www.mikechatzidakis.com/home/2017/7/29/spirulina-algae-photobioreactor">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <article id="article-597d365603596eab18a33f7f">
      
      <div>
        <p><time datetime="2016-07-28" pubdate="">
          <p><span>Jul </span><span>28</span>
          </p>
        </time></p><h2 itemprop="headline" data-content-field="title"><time itemprop="datePublished" datetime="2016-07-28" pubdate="">Jul 28 </time>Spirulina Algae Photobioreactor</h2>

        
      </div>
      
      <div data-controller="BlogProgressBar">
        
        
        <div><div data-layout-label="Post Body" data-type="item" data-updated-on="1501378473772" id="item-597d365603596eab18a33f7f"><div><div><div data-block-type="2" id="block-5b388869c77c096f4e8c"><div><p>I first heard about <em>Arthospira platensis</em> (Spirulina) when I saw a NASA mission featuring the growth of these microbes onboard the ISS. Why grow a cyanobacteria in space you might say? Well what these little guys can do is convert carbon dioxide into oxygen gas for one, and secondly they can also be ingested as a protein substitute. It contains<a target="_blank" href="https://en.wikipedia.org/wiki/Spirulina_(dietary_supplement)#Food_and_nutrition"> 50-70% protein </a>by dry weight for starters, high in iron, and is nearly 300 cals / 100 g to boot. So in terms of a great symbiotic friend for a closed biome (i.e. a sealed steel ball in orbit), Spirulina is a pretty darn perfect room mate.</p><p>Okay I was hooked after a few videos from Youtube and Reddit. How do I get a sample of this West African extremophile? Turns out Amazon, among a myraid of products, also carries this...</p><p>So I ordered this from <a target="_blank" href="http://www.algaelab.org/">AlgaeLab</a> back when they had a Amazon store, it appears they don't have it anymore (July 2017). But they still do ship from their website. So take this in, I purchased a biological sample, shipping from California to Toronto, and it arrived in a little over a week with a bunch of Alkali salts without any major delay at customs. Are you kidding me? A biological sample and miscellaneous white powder can pass through the borders that easy, but I have had books delayed?!</p></div></div><div data-block-type="5" id="block-yui_3_17_2_1_1501375207629_153452"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501381077828-VKSVEYADYJIT9Y4URHOU/ke17ZwdGBToddI8pDm48kA9MJP8G-Te-KF6G_txWkV1Zw-zPPgdn4jUwVcJE1ZvWEtT5uBSRWt4vQZAgTJucoTqqXjS3CfNDSuuf31e0tVHz1OCtlxDsjXY12tun39jAhdGVKUGCmpVBBjfR2L-Oc8E8-vZB1rw5b7FMBZGIOl4/image-asset.jpeg" data-image="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501381077828-VKSVEYADYJIT9Y4URHOU/ke17ZwdGBToddI8pDm48kA9MJP8G-Te-KF6G_txWkV1Zw-zPPgdn4jUwVcJE1ZvWEtT5uBSRWt4vQZAgTJucoTqqXjS3CfNDSuuf31e0tVHz1OCtlxDsjXY12tun39jAhdGVKUGCmpVBBjfR2L-Oc8E8-vZB1rw5b7FMBZGIOl4/image-asset.jpeg" data-image-dimensions="400x711" data-image-focal-point="0.5,0.5" alt="Spirulina sample sent from AlgaeLab" data-load="false" data-image-id="597d379d3e00bed8e5d33b4d" data-type="image" src="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501381077828-VKSVEYADYJIT9Y4URHOU/ke17ZwdGBToddI8pDm48kA9MJP8G-Te-KF6G_txWkV1Zw-zPPgdn4jUwVcJE1ZvWEtT5uBSRWt4vQZAgTJucoTqqXjS3CfNDSuuf31e0tVHz1OCtlxDsjXY12tun39jAhdGVKUGCmpVBBjfR2L-Oc8E8-vZB1rw5b7FMBZGIOl4/image-asset.jpeg">
          </p>
        
          
        

        
          
          <figcaption>
            <p>Spirulina sample sent from AlgaeLab</p>
          </figcaption>
        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-yui_3_17_2_2_1501381010248_13798"><p>I was so fascinated when I got the sample. It could photosynthesize before your eyes! I recorded a timelapse to see it in direct sunlight. Pretty dope right. The timelapse was over half an hour and condensed into about 5 seconds.</p></div><div data-block-type="2" id="block-yui_3_17_2_2_1501381010248_22505"><div><p>The kit from AlgaeLab came with alkali salts and nutrients with directions and ratios for dilution to the volume of water. I took the starter vial and added it into a large Voss glass water bottle.</p><p>Using aquarium air pumps, air was piped through plastic tubing. First into a water percolator to catch dust, then into the glass bottles. One tube was connected to an airstone which creates small air bubbles which will allow greater oxygen dissolution into the medium, and the second tube causes stirring from the bottom to the top of the water column by means of entraining liquid in a bubble tea straw similar to an <a target="_blank" href="https://en.wikipedia.org/wiki/Airlift_pump">airlift pump</a> or geyser pump. The effect of the air pump is then two fold, greater carbon dioxide diffusion and stirring of the algae.</p></div></div><div data-block-type="5" id="block-yui_3_17_2_2_1501381010248_27504"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501382433389-XTE9RHMTZODM1Z7DY6EQ/ke17ZwdGBToddI8pDm48kPTrHXgsMrSIMwe6YW3w1AZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0k5fwC0WRNFJBIXiBeNI5fKTrY37saURwPBw8fO2esROAxn-RKSrlQamlL27g22X2A/image-asset.jpeg" data-image="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501382433389-XTE9RHMTZODM1Z7DY6EQ/ke17ZwdGBToddI8pDm48kPTrHXgsMrSIMwe6YW3w1AZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0k5fwC0WRNFJBIXiBeNI5fKTrY37saURwPBw8fO2esROAxn-RKSrlQamlL27g22X2A/image-asset.jpeg" data-image-dimensions="2500x1406" data-image-focal-point="0.5,0.5" alt="Spirulina reactor underneath the window with a DIY hydroponic garden above it." data-load="false" data-image-id="597d470a4402438918214587" data-type="image" src="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501382433389-XTE9RHMTZODM1Z7DY6EQ/ke17ZwdGBToddI8pDm48kPTrHXgsMrSIMwe6YW3w1AZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0k5fwC0WRNFJBIXiBeNI5fKTrY37saURwPBw8fO2esROAxn-RKSrlQamlL27g22X2A/image-asset.jpeg">
          </p>
        
          
        

        
          
          <figcaption>
            <p>Spirulina reactor underneath the window with a DIY hydroponic garden above it.</p>
          </figcaption>
        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-yui_3_17_2_2_1501381010248_30812"><p>Below is a short video of the pump system in action. The third tube at the top of the reactors is just for air outflow to avoid pressure building. It would frequently sputter out water and salt everywhere. I will touch on the hydroponic garden in a later blog post.</p></div><div data-block-type="2" id="block-yui_3_17_2_2_1501381010248_32831"><div><p>Around one week later we have hit the first exponential bloom phase! Here is another great thing about autotropic microbes, they are so freaking efficient. No photons wasted! Well, I guess thats not entirely true, many photons wasted, but they make trees look like slackers.</p></div></div><div data-block-type="5" id="block-yui_3_17_2_2_1501381010248_34530"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501382904391-J9202TDVO03SJCCBJ9LZ/ke17ZwdGBToddI8pDm48kPTrHXgsMrSIMwe6YW3w1AZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0k5fwC0WRNFJBIXiBeNI5fKTrY37saURwPBw8fO2esROAxn-RKSrlQamlL27g22X2A/image-asset.jpeg" data-image="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501382904391-J9202TDVO03SJCCBJ9LZ/ke17ZwdGBToddI8pDm48kPTrHXgsMrSIMwe6YW3w1AZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0k5fwC0WRNFJBIXiBeNI5fKTrY37saURwPBw8fO2esROAxn-RKSrlQamlL27g22X2A/image-asset.jpeg" data-image-dimensions="2500x1406" data-image-focal-point="0.5,0.5" alt="" data-load="false" data-image-id="597d48f6d2b8570b18c96491" data-type="image" src="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501382904391-J9202TDVO03SJCCBJ9LZ/ke17ZwdGBToddI8pDm48kPTrHXgsMrSIMwe6YW3w1AZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0k5fwC0WRNFJBIXiBeNI5fKTrY37saURwPBw8fO2esROAxn-RKSrlQamlL27g22X2A/image-asset.jpeg">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-yui_3_17_2_2_1501381010248_35744"><div><p>I think however my favourite thing about Spirulina is their defense mechanism towards getting too much light. Ever wonder why its called Spirlina? The cyanobacteria form a spiral-like shape when they get too much sunlight. Since sunlight is always going to come from one direction at a time (applied to one face), by rearranging into a spiral, only a fraction of total surface area is exposed. And what if the amount of light is too low and not ideal? They straighten out into a line to increase available surface area! How neat is that?</p><p>I bought a cheap $60 chinese microscope on Amazon (most of my projects start at amazon tbh) capable of 800x magnification and I took a cell phone picture through the cheap crappy plastic lenses. As you can see, spirals! Look at that!</p></div></div><div data-block-type="5" id="block-yui_3_17_2_2_1501381010248_38600"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501383118830-BZR0QQY1JFXL7T3BGT0I/ke17ZwdGBToddI8pDm48kPTrHXgsMrSIMwe6YW3w1AZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0k5fwC0WRNFJBIXiBeNI5fKTrY37saURwPBw8fO2esROAxn-RKSrlQamlL27g22X2A/image-asset.jpeg" data-image="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501383118830-BZR0QQY1JFXL7T3BGT0I/ke17ZwdGBToddI8pDm48kPTrHXgsMrSIMwe6YW3w1AZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0k5fwC0WRNFJBIXiBeNI5fKTrY37saURwPBw8fO2esROAxn-RKSrlQamlL27g22X2A/image-asset.jpeg" data-image-dimensions="2500x1406" data-image-focal-point="0.5,0.5" alt="" data-load="false" data-image-id="597d49cd197aea062b6f648b" data-type="image" src="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501383118830-BZR0QQY1JFXL7T3BGT0I/ke17ZwdGBToddI8pDm48kPTrHXgsMrSIMwe6YW3w1AZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0k5fwC0WRNFJBIXiBeNI5fKTrY37saURwPBw8fO2esROAxn-RKSrlQamlL27g22X2A/image-asset.jpeg">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-yui_3_17_2_2_1501381010248_61733"><div><p>It was at this point in the project where I realized I should never step foot in a casino. I had a nice batch of algae, now should I do double or nothing? Because of this whole exponential growth business, if my principal amount of algae is higher than before, I should get a ton more algae if I throw in a new batch of nutrients. Or maybe I should harvest these in a 5 micron cloth for consumption and grow a fraction of them again?</p><p>I decided to scale up the operation, and I was at this (below) amount of algae after another 10 days. I put an aquarium heater in the large sack of algae to maintain its temperature at ~32 C.</p><p>I also made this sack of plastic by buying a roll of vacuum pack freezer bag. Typically the vacuum pack machines use this uncut freezer bag material and they singe it closed to the correct size using a heated metal wire. I reproduced this and sealed the bags using a soldering iron. I should note all of these vials are hanging precariously above where I sleep... I sure have a lot of faith in a DIY sealed plastic bag eh??</p></div></div><div data-block-type="5" id="block-yui_3_17_2_2_1501381010248_63989"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501383866718-SN6I2ATQOEWRB21P8HKO/ke17ZwdGBToddI8pDm48kPTrHXgsMrSIMwe6YW3w1AZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0k5fwC0WRNFJBIXiBeNI5fKTrY37saURwPBw8fO2esROAxn-RKSrlQamlL27g22X2A/image-5883.jpg" data-image="https://images.squarespace-cdn.com/content/v1/597d2753be6594cef6a34840/1501383866718-SN6I2ATQOEWRB21P8HKO/ke17ZwdGBToddI8pDm48kPTrHXgsMrSIMwe6YW3w1AZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0k5fwC0WRNFJBIXiBeNI5fKTrY37saURwPBw8fO2esROAxn-RKSrlQamlL27g22X2A/image-5883.jpg" data-image-dimensions="2500x1406" data-image-focal-point="0.5,0.5" alt="image-5883.jpg" data-load="false" data-image-id="597d4cb8d482e9f4cc74af7a" data-type="image" src="https://www.mikechatzidakis.com/home/2017/7/29/image-5883.jpg">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-yui_3_17_2_2_1501381010248_66437"><div><p>I'm sure you are wondering, "But Mike, you said you shouldn't gamble at a casino, wasn't this a good gamble? Thats a great yield in the picture above?!" Well, you are indeed correct, its a great yield, but what happened next was quite traumatic for me (no the sack did not fall on my head while I slept). I left for a long weekend, and over that weekend we had one of the hottest heat waves in a while. Between the aquarium heater, tne additional heat and photon flux, the algae overheated and turned yellow. I tried to shade them and I took out the heater but they died.</p><p>I know, there is no happy ending, I'm sorry if you got emotionally invested through this journey. Yes they died, they are very fickle and although they are extremophiles that live in Eastern African salt lakes, they are not invincible.</p><p>I will add more to this blog post as I get along, a few other topics I want to hit (because i researched them during construction) are the following:</p><p>&nbsp;- Fresh vs dried spirulina</p></div></div></div></div></div></div>

        

        

        
      </div>
      

    </article>
  </div></div>]]>
            </description>
            <link>https://www.mikechatzidakis.com/home/2017/7/29/spirulina-algae-photobioreactor</link>
            <guid isPermaLink="false">hacker-news-small-sites-25593247</guid>
            <pubDate>Thu, 31 Dec 2020 15:01:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How Surveillance Companies track you using Mobile Networks [video]]]>
            </title>
            <description>
<![CDATA[
Score 30 | Comments 9 (<a href="https://news.ycombinator.com/item?id=25593228">thread link</a>) | @HelenePhisher
<br/>
December 31, 2020 | https://media.ccc.de/v/rc3-11511-watching_the_watchers_-_how_surveillance_companies_track_you_using_mobile_networks | <a href="https://web.archive.org/web/*/https://media.ccc.de/v/rc3-11511-watching_the_watchers_-_how_surveillance_companies_track_you_using_mobile_networks">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://media.ccc.de/v/rc3-11511-watching_the_watchers_-_how_surveillance_companies_track_you_using_mobile_networks</link>
            <guid isPermaLink="false">hacker-news-small-sites-25593228</guid>
            <pubDate>Thu, 31 Dec 2020 14:59:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How a Nuclear Submarine Officer Learned to Live in Tight Quarters]]>
            </title>
            <description>
<![CDATA[
Score 46 | Comments 19 (<a href="https://news.ycombinator.com/item?id=25592429">thread link</a>) | @CapitalistCartr
<br/>
December 31, 2020 | http://m.nautil.us/issue/94/evolving/how-a-nuclear-submarine-officer-learned-to-live-in-tight-quarters-rp | <a href="https://web.archive.org/web/*/http://m.nautil.us/issue/94/evolving/how-a-nuclear-submarine-officer-learned-to-live-in-tight-quarters-rp">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
			<p><i>Happy Holidays. This week we are reprinting our top stories of 2020. This article first appeared online in our “Outbreak” issue in April, 2020.</i></p>
<p><span>I</span>’m no stranger to forced isolation. For the better part of my 20s, I served as a nuclear submarine officer running secret missions for the United States Navy. I deployed across the vast Pacific Ocean with a hundred other sailors on the USS Connecticut, a Seawolf-class ship engineered in the bygone Cold War era to be one of the fastest, quietest, and deepest-diving submersibles ever constructed. The advanced reactor was loaded with decades of enriched uranium fuel that made steam for propulsion and electrical power so we could disappear under the waves indefinitely without returning to port. My longest stint was for two months, when I traveled under the polar ice cap to the North Pole with a team of scientists studying the Arctic environment and testing high frequency sonar and acoustic communications for under-ice operations. During deployments, critical-life events occur without you: holidays with loved ones, the birth of a child, or in my case, the New York Giants 2011-2012 playoff run to beat Tom Brady’s Patriots in the Super Bowl for the second time. On the bright side, being cut off from the outside world was a great first job for an introvert.</p><p>It’s been a month since COVID-19 involuntarily drafted me into another period of isolation far away from home. I’m in Turkey, where a two-week trip with my partner to meet her family has been extended indefinitely. There were no reported cases here and only a few in California in early March when we left San Francisco, where I run a business design studio. I had a lot of anticipation about Turkey because I’d never been here. Now I’m sheltering in a coastal town outside of Izmir with my partner, her parents, their seven cats, and a new puppy.</p><p>Shuttered in a house on foreign soil where I don’t speak the language, I have found myself snapping back into submarine deployment mode. Each day I dutifully monitor online dashboards of data and report the status of the spread at the breakfast table to no one in particular. I stay in touch with friends and family all over the world who tell me they’re going stir crazy and their homes are getting claustrophobic. But if there is one thing my experience as a submarine officer taught me, it’s that you get comfortable being uncomfortable.</p><figure data-alt="Weiner_BREAKER-1"><img src="http://static.nautil.us/17074_4fe560444cca7edf1c75e4fa492ff7d2.png" width="733" alt=""><figcaption><span><strong>OFFICER OF THE DECK:</strong> Author Steve Weiner in 2011, on the USS Connecticut, a nuclear submarine. Weiner was the ship’s navigator. Submarine and crew, with a team of scientists, were deployed in the Arctic Ocean, studying the Arctic environment and testing high frequency sonar and acoustic communications for under-ice operations.</span><span>Courtesy of Steve Weiner</span></figcaption></figure><p>My training began with psychological testing, although it may not be what you think. Evaluating mental readiness for underwater isolation isn’t conducted in a laboratory by clipboard-toting, spectacled scientists. The process to select officers was created by Admiral Hyman Rickover—the engineering visionary and noted madman who put the first nuclear reactor in a submarine—to assess both technical acumen and composure under stress. For three decades as the director of the Navy’s nuclear propulsion program, Rickover tediously interviewed every officer, and the recruiting folklore is a true HR nightmare: locking candidates in closets for hours, asking obtuse questions such as “Do something to make me mad,” and sawing down chair legs to literally keep one off balance.<br></p><p>Rickover retired from the Navy as its longest-serving officer and his successors carried on the tradition of screening each officer candidate, but with a slightly more dignified approach. Rickover’s ghost, though, seemed to preside over my interview process when I applied to be a submariner as a junior at the U.S. Naval Academy in Annapolis, Maryland. I was warned by other midshipmen that I would fail on the spot if I initiated a handshake. So, dressed in my formal navy blue uniform and doing my best to avoid tripping into accidental human contact, I rigidly marched into the Admiral’s office, staring straight ahead while barking my resume. When I took a seat on the unaltered and perfectly level chair in front of his desk, the Admiral asked me bluntly why I took so many philosophy classes and if I thought I could handle the technical rigors of nuclear power school. My response was a rote quip from John Paul Jones’ “Qualifications of a Naval Officer.” “Admiral, an officer should be a gentleman of liberal education, refined manners, punctilious courtesy, and the nicest sense of personal honor.” My future boss looked at me, shook his head like he thought I’d be a handful, and told me I got the job.</p><blockquote><p>Confinement opened something up in my psyche and I gave myself permission to let go of my anxieties.</p> </blockquote><p>Nuclear power training is an academic kick in the face every day for over a year. The curriculum is highly technical and the pedagogy resembles a cyborg assembly-line without even a hint of the Socratic method. Our grades were conspicuously posted on the classroom wall and a line was drawn between those who passed and those who failed. I was below the line enough to earn the distinguished dishonor of 25 additional study hours each week, which meant I was at school at 5 a.m. and every weekend. This is how the Nuclear Navy builds the appropriate level of knowledge and right temperament to deal with shipboard reactor operations.<br></p><p>I finally sat down for a formal psychological evaluation a few months before my first deployment. I was ushered into a room no bigger than a broom closet and instructed to click through a computer-based questionnaire with multiple-choice questions about my emotions. I never did&nbsp; learn the results, so I assume my responses didn’t raise too many red flags.</p><p>During my first year onboard, I spent all my waking hours either supervising reactor operations or learning the intricacies of every inch of the 350-foot tube and the science behind how it all worked. The electrolysis machine that split water molecules to generate oxygen was almost always out of commission, so instead we burned chlorate candles that produced breathable air. Seawater was distilled each day for drinking and shower water. Our satellite communications link had less bandwidth than my dial-up modem in the 1990s and we were permitted to send text-only emails to friends and family at certain times and in certain locations so as not to risk being detected. I took tests every month to demonstrate proficiency in nuclear engineering, navigation, and the battle capabilities of the ship. When I earned my submarine warfare qualification, the Captain pinned the gold dolphins insignia on my uniform and gave me the proverbial keys to the $4 billion warship. At that point, I was responsible for coordinating missions and navigating the ship as the Officer of the Deck.</p><div>
<article>
<p><a href="http://m.nautil.us/issue/19/Illusions/fooled-by-your-own-brain" data-trval="fooled-by-your-own-brain" data-trlbl="foc_rec" data-tract="internal_art">
<img src="http://static.nautil.us/416_8fe0093bb30d6f8c31474bd0764e6ac0.png" alt="Sapolsky_TH-F1" width="314" height="177">
</a>
</p>
<div>
<p><span>
<span>

<span><a href="http://m.nautil.us/term/f/Psychology">Also in Psychology</a></span>&nbsp;&nbsp;</span>
</span></p><h4><a href="http://m.nautil.us/issue/19/Illusions/fooled-by-your-own-brain" data-trval="fooled-by-your-own-brain" data-trlbl="foc_rec" data-tract="internal_art">Fooled By Your Own Brain</a></h4>
<p>By Virginia Hughes</p>
<p>
Your powers of attention: fooled! Attention is, by definition, limited. And that’s usually a good thing. If you’re searching for a lost earring on the floor, you want to ignore anything that’s not small and shiny. When talking to someone...<strong><a href="http://m.nautil.us/issue/19/Illusions/fooled-by-your-own-brain" data-trval="fooled-by-your-own-brain" data-trlbl="foc_rec" data-tract="internal_art">READ MORE</a></strong>
</p>

</div>

</article>
</div><p>Modern submarines are hydrodynamically shaped to have the most efficient laminar flow underwater, so that’s where we operated 99 percent of the time. The rare exception to being submerged is when we’d go in and out of port. The most unfortunate times were long transits tossing about in heavy swells, which made for a particularly nauseated cruise. To this day, conjuring the memory of some such sails causes a reflux flashback. A submariner’s true comfort zone is beneath the waves so as soon as we broke ties with the pier we navigated toward water that was deep enough for us to dive.<br></p><p>It’s unnatural to stuff humans, torpedoes, and a nuclear reactor into a steel boat that’s intentionally meant to sink. This engineering marvel ranks among the most complex, and before we’d proceed below and subject the ship and its inhabitants to extreme sea pressures, the officers would visually inspect thousands of valves to verify the proper lineup of systems that would propel us to the surface if we started flooding uncontrollably and sinking—a no-mistakes procedure called <i>rigging for dive</i>. Once we’d slip beneath the waves, the entire crew would walk around to check for leaks before we’d settle into a rotation of standing watch, practicing our casualty drills, engineering training, eating, showering (sometimes), and sleeping (rarely). The full cycle was 18 hours, which meant the timing of our circadian cycles were constantly changing. Regardless of the amount of government-issued Folger’s coffee I’d pour down my throat, I’d pass out upon immediate contact with my rack (the colloquialism for a submarine bunk in which your modicum of privacy was symbolized by a cloth curtain).</p><p>As an officer, I lived luxuriously with only two other grown men in a stateroom no bigger than a walk-in closet. Most of the crew slept stacked like lumber in an 18-person bunk room and they all took turns in the rack. This alternative lifestyle is known as hot-racking, because of the sensation you get when you crawl into bedding that’s been recently occupied. The bunk rooms are sanctuaries where silence is observed with monastic intensity. Slamming the door or setting an alarm clock was a cardinal sin so wakeups were conducted by a junior sailor who gently coaxed you awake when it was time to stand watch. <i>Lieutenant Weiner, it’s time to wake up. You’ve got the midnight watch, sir.</i> Words that haunt my dreams.</p><blockquote><p>The electrolysis machine was out of commission, so we burned chlorate candles that produced breathable air.</p> </blockquote><p>I maintained some semblance of sanity and physical fitness by sneaking a workout on a rowing erg in the engine room or a stationary bike squeezed between electronics cabinets. The rhythmic beating of footsteps on a treadmill was a noise …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://m.nautil.us/issue/94/evolving/how-a-nuclear-submarine-officer-learned-to-live-in-tight-quarters-rp">http://m.nautil.us/issue/94/evolving/how-a-nuclear-submarine-officer-learned-to-live-in-tight-quarters-rp</a></em></p>]]>
            </description>
            <link>http://m.nautil.us/issue/94/evolving/how-a-nuclear-submarine-officer-learned-to-live-in-tight-quarters-rp</link>
            <guid isPermaLink="false">hacker-news-small-sites-25592429</guid>
            <pubDate>Thu, 31 Dec 2020 13:24:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Elasticsearch new features: 2020 year in review]]>
            </title>
            <description>
<![CDATA[
Score 24 | Comments 6 (<a href="https://news.ycombinator.com/item?id=25592273">thread link</a>) | @synhershko
<br/>
December 31, 2020 | https://blog.bigdataboutique.com/2020/12/elasticsearch-new-features-2020-year-in-review-g5wyqy | <a href="https://web.archive.org/web/*/https://blog.bigdataboutique.com/2020/12/elasticsearch-new-features-2020-year-in-review-g5wyqy">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>Now that 2020 is (finally!) over, we highlight the changes and additions Elasticsearch received during the year, that we believe could make a big difference to you - a developer working with Elasticsearch.</p><div><div><p>What a year 2020 has been! Social distancing and a lot of very weird situations. For some it was a year full of difficulties, and hopefully a lot of growth and some good things too.</p><p><span>It has definitely been an interesting year for Elasticsearch. Many things happened, new features added and the product evolved significantly. We wanted to recap and share highlights of new features and usage recommendation. This post is about the things we consider as big changes, and important steps forward, based on our experience and what we see as important while actively working with hundreds of customers on Elasticsearch clusters of all shapes and sizes, from full-text search to log analytics and anomaly detection.</span><br></p><p><span>As always, upgrading to a more recent Elasticsearch version will grant you significant performance boosts, depending on your usage. This year as well, Elasticsearch has seen many performance and memory optimizations, most notably in the 7.8 and 7.9 releases. Those are too many and too low-level to list in detail here, so we won't.</span><br></p><p><span>In this post we will focus on high-level technical details that we believe could make a big difference to you - a developer working with Elasticsearch. For the sake of brevity, we will only highlight, and give you links for further investigation.</span><br></p><p>One important note about licensing, before we start: recently, many new features are added under the X-Pack license, and not as part of the open-source product. Most are indeed free (X-Pack Basic) but some require a paid subscription license. In this post, we are focusing on the features that we believe are important to know about, and will be useful to you - but are still in the free tier and usable without purchasing a license.<br></p><p>Here it goes.</p><h2>Better results scrolling using PIT</h2><p>There are three ways to page through search results (aka "do paging") in Elasticsearch: from/size, scroll, and search_after.&nbsp;<span>Each has it's downsides (slowness, instability of result sets, the requirement to sort on a field, and so on).&nbsp;</span><span>In recent Elasticsearch versions a new API was added, namely the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.10/point-in-time-api.html">PIT (Point in Time) API</a></span><span>. Essentially, it is a lightweight version of the scroll API and is meant to replace it, making deep paging possible and more efficient but still some limitations remain.</span></p><p><span>Our recommendation is to still not</span><span>&nbsp;over-use it - and in general avoid deep paging with Elasticsearch. But when you do need to scroll, e.g. for copying data to external jobs and so on - prefer the new PIT API over the (now discouraged) scroll API.&nbsp;</span><span>A good summary and discussion are in the </span><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/paginate-search-results.html">official documentation for the PIT API</a><span>.</span></p><h2>Ingestion using a single Agent, and Fleet</h2><p>In 2020 Elastic has moved off the premise of having many beats (Filebeat, Packetbeat, Metricbeat and so on), to supporting a single data collection agent that can deliver all that functionality. Under the hood the Elastic Agent runs all the beats, but it's going to be easier to deploy and manage the unified Elastic Agent. Also new is the option of managing them through <a href="https://www.elastic.co/guide/en/fleet/current/fleet-overview.html">Fleet</a>, and a centralized Ingest Manager in Kibana. <a href="https://www.elastic.co/blog/introducing-elastic-agent-and-ingest-manager">Read more here</a>.</p><h2>Data Streams</h2><p>In essence, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.9/data-streams.html">Data Streams</a> is just an improved API and a better user-experience for using the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/indices-rollover-index.html">Rollover API</a> for partitioning data into more indexes. In the last couple of years we stopped using shards and moved to index-level sharding - essentially partitioning the data to different indexes, and the new Data Streams API plays an important role in making your clusters more efficient and more stable.</p><h2>Composable index templates</h2><p>Composable index templates were introduced in Elasticsearch 7.8, and are in fact a results of a <a href="https://github.com/elastic/elasticsearch/issues/21105">4-year long discussion started in 2016</a>. With composable index templates you finally get a fine-grained control over how templates are built and applied, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.10/index-templates.html">see the docs</a> for a comprehensive discussion and example.</p><h2>Transform APIs</h2><p>The Transform APIs became GA since 7.7, and in their core they are essentially a managed ETL process run by Elasticsearch within the Elasticsearch cluster, to copy and transform data from one index to another.</p><p><span>This allows for compacting ("roll up"), executing self-joins on write (e.g. folding events into a session), enriching and cleaning up data from the ingest layer into indexes that will serve the serving layer. <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/transform-apis.html">See the docs here</a>.</span></p><p><span>Our recommendation is to keep using dedicated ETL tools for any real-world or heavy use-cases, and to only use the Transforms API for minor use-cases, or during development.&nbsp;We usually prefer running ETLs with tools that were built to do it - like Flink, Airflow, Nifi and such, as they provide&nbsp;significantly better development experience, ability to debug, write testable code, and much more predictable and </span>manageable<span>&nbsp;ETL processes.</span></p><h2>Asynchronous search API</h2><p>The async search API lets you asynchronously execute a search request, monitor its progress, and retrieve partial results as they become available. It was introduced in Elasticsearch 7.7, and is designed to support more responsive search experience. <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/async-search.html">See the docs here</a>.</p><h2>Improved support and performance for geo-search</h2><p><span>Geo-spatial search got a lot of love in 2020, most notably by making </span><a href="https://www.elastic.co/blog/bkd-backed-geo-shapes-in-elasticsearch-precision-efficiency-speed">geo-shapes BKD-backed in Elasticsearch</a><span>, which </span>translates<span>&nbsp;to significant precision, efficiency and speed gains. This also allowed to add more geo-types, queries and aggregations.</span></p><h2>New data types</h2><p><span>* </span><a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.8/histogram.html">Histogram</a><span> - A field to store pre-aggregated numerical data representing a histogram. This data is defined using two paired arrays - values and counts.</span></p><p><span>* <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.8/constant-keyword.html">Constant keyword data type</a> -&nbsp;</span><span>Constant keyword is a specialization of the keyword field for the case that all documents in the index have the same value.&nbsp;</span></p><p><span>* Arbitrary <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/shape.html">Shape</a> and Point data types -&nbsp;The shape data type facilitates the indexing of and searching with arbitrary x, y </span>Cartesian<span>&nbsp;shapes such as rectangles and polygons. It can be used to index and query geometries whose coordinates fall in a 2-dimensional planar coordinate system.</span></p><p><span>* </span><a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/keyword.html#wildcard-field-type">Wildcard field</a><span> - A wildcard field stores values </span>optimized<span>&nbsp;for wildcard grep-like queries. Wildcard queries are possible on other field types but are usually slower and has analysis limitation (case sensitivity and others).&nbsp;The Wildcard field is an important addition - it finally allows a case insensitive wildcard search, and when used in conjunction with the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.x/search-as-you-type.html">search_as_you_type</a> field type it allows to provide great search experiences.</span></p><h2>New Aggregation types</h2><p>* <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.9/search-aggregations-bucket-histogram-aggregation.html">Histogram Aggregation</a> - A multi-bucket values source based aggregation that can be applied on numeric values or numeric range values extracted from the documents<br>* <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-normalize-aggregation.html">Normalize Aggregation</a> - A parent pipeline aggregation which calculates the specific normalized/rescaled value for a specific bucket value.<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-normalize-aggregation.html*"><span data-auto-link="true" data-href="https://www.elastic.co/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-normalize-aggregation.html*"><br></span></a>* <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-moving-percentiles-aggregation.html#search-aggregations-pipeline-moving-percentiles-aggregation">Moving Percentiles Aggregation</a> - Given an ordered series of percentiles, the Moving Percentile aggregation will slide a window across those percentiles and allow the user to compute the cumulative percentile.<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-moving-percentiles-aggregation.html#search-aggregations-pipeline-moving-percentiles-aggregation*"><span data-auto-link="true" data-href="https://www.elastic.co/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-moving-percentiles-aggregation.html#search-aggregations-pipeline-moving-percentiles-aggregation*"><br></span></a>* <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-movfn-aggregation.html#search-aggregations-pipeline-movfn-aggregation">Moving Function Aggregation</a> - Given an ordered series of data, the Moving Function aggregation will slide a window across the data and allow the user to specify a custom script that is executed on each window of data.<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-movfn-aggregation.html#search-aggregations-pipeline-movfn-aggregation*"><span data-auto-link="true" data-href="https://www.elastic.co/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-movfn-aggregation.html#search-aggregations-pipeline-movfn-aggregation*"><br></span></a>* <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-pipeline-inference-bucket-aggregation.html#search-aggregations-pipeline-inference-bucket-aggregation">Pipeline inference aggregation</a> - A parent pipeline aggregation which loads a pre-trained model and performs inference on the collated result fields from the parent bucket aggregation.<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-pipeline-inference-bucket-aggregation.html#search-aggregations-pipeline-inference-bucket-aggregation*"><span data-auto-link="true" data-href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-pipeline-inference-bucket-aggregation.html#search-aggregations-pipeline-inference-bucket-aggregation*"><br></span></a>* <a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/search-aggregations-metrics-ttest-aggregation.html">T-test aggregation</a> - A new aggregation that will tell you if the difference between two population means are statistically significant and did not occur by chance alone.<a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/search-aggregations-metrics-ttest-aggregation.html*"><span data-auto-link="true" data-href="https://www.elastic.co/guide/en/elasticsearch/reference/master/search-aggregations-metrics-ttest-aggregation.html*"><br></span></a>* <a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/search-aggregations-metrics-boxplot-aggregation.html">Box plot aggregation</a> - The boxplot aggregation returns essential information for making a <a href="https://en.wikipedia.org/wiki/Box_plot">box plot</a>: minimum, maximum, median, first quartile (25th percentile) and third quartile (75th percentile) values.</p><h2>New Query Language - EQL</h2><p><span>The <a href="https://www.elastic.co/blog/introducing-event-query-language">Event Query Language (EQL)</a> is a query language for event-based time series data, such as logs, metrics, and traces. It's a new query language that was recently added to Elasticsearch, mostly aimed for SIEM users but not only. It joins the traditional Lucene query syntax and Elasticsearch JSON queries, and also the SQL support and Kuery - the Kibana query language. <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.9/eql.html">Full docs here</a>.</span></p><h2>Kibana Lens</h2><p><span>For years Kibana was about creating simple visualizations that can be added as components to a dashboard, and only recently they started adding additional capabilities like Timelion, Visual Time Series Builder and Vega. Lens is the most recent addition, with the purpose of simplifying building dashboards even further.</span></p><p><span><a href="https://www.elastic.co/blog/kibana-lens-now-generally-available">Lens</a> is the easiest and most intuitive way to visualize data in Elasticsearch with a simple drag-and-drop interface that lets anyone instantly begin exploring data for insights, regardless of their previous Kibana experience, which we think is a great new addition that will allow reducing the barrier of entry for new users beginning with Kibana.</span></p><h2>Alerting</h2><p><span>For a very long while, the Elastic Stack lacked support for alerting. There was Watcher</span><span>, which still exists, but it always was very limited and not trivial to use. It&nbsp;did start receiving a lot of improvements in the last 2 years or so, and very much so in 2020 when Alerting has become more streamlined all throughout Kibana. In 2020, a lot of features were added that help creating alerts, and good alerts, from pretty much everywhere in Kibana. However, most of the new Alerting features are on the premium (paid) tiers, and still has a lot missing for it.</span><br></p><p>This is good progress, but we still think there is a lot to go. A couple of months ago we reviewed all the possibilities to enable alerting on top of Elasticsearch <a href="https://bigdataboutique.com/ask-me-anything/2020-05-06-alerting-with-elasticsearch-and-the-elastic-stack">in a webinar</a>, and this content is still relevant today as well:</p><div contenteditable="false">
	<figure>
		<div>
			<p><iframe width="560" height="315" src="//www.youtube.com/embed/hjQcON_HZAs" frameborder="0" allowfullscreen=""></iframe></p>
		</div>
	</figure>
	
</div><hr><p><i>Our team of experts has the most experienced Elasticsearch consultants out there, with over 8 years of experience with Elasticsearch and the Elastic Stack</i>. Find out if your cluster is fully optimized for spend, stability, and performance. <a href="https://bigdataboutique.com/contact">Contact us</a> for a quick, …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.bigdataboutique.com/2020/12/elasticsearch-new-features-2020-year-in-review-g5wyqy">https://blog.bigdataboutique.com/2020/12/elasticsearch-new-features-2020-year-in-review-g5wyqy</a></em></p>]]>
            </description>
            <link>https://blog.bigdataboutique.com/2020/12/elasticsearch-new-features-2020-year-in-review-g5wyqy</link>
            <guid isPermaLink="false">hacker-news-small-sites-25592273</guid>
            <pubDate>Thu, 31 Dec 2020 13:06:45 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What caused Shimano's Coasting-program to fail? (2010)]]>
            </title>
            <description>
<![CDATA[
Score 41 | Comments 93 (<a href="https://news.ycombinator.com/item?id=25591892">thread link</a>) | @wx196
<br/>
December 31, 2020 | https://yannigroth.com/2010/05/12/what-caused-shimanos-coasting-program-fail/ | <a href="https://web.archive.org/web/*/https://yannigroth.com/2010/05/12/what-caused-shimanos-coasting-program-fail/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		<p>A couple of weeks ago, <a title="Shimano and associated bicycle manufacturers drop the Coasting program - Yannig Roth's blog" href="https://yannigroth.wordpress.com/2010/03/24/shimano-and-associated-bicycle-manufacturers-drop-the-coasting-program/" target="_blank">I noticed</a> that the Coasting-website (coasting.com) was not online anymore and that the landing page was Shimano’s corporate website, <a title="Shimano.com" href="http://www.shimano.com/" target="_blank">Shimano.com</a>. Just before writing this, I <span>g</span><span>o</span><span>o</span><span>g</span><span>l</span><span>e</span>d it again and there is <a title="Shimano Coasting homepage" href="http://www.shimanocoasting.com/" target="_blank">shimanocoasting.com</a> again, on the bottom of the page, just behind the link to my blog post (results may vary from country to country) ! Did I make a mistake, in March, when I was looking for the website ? Did I just miss it ?</p>
<p>But more interestingly, what bugs me is : What caused the Coasting program to fail ?</p>
<div data-shortcode="caption" id="attachment_873"><p><a href="https://yannigroth.files.wordpress.com/2010/05/shimano_coasting.jpg"><img aria-describedby="caption-attachment-873" data-attachment-id="873" data-permalink="https://yannigroth.com/2010/05/12/what-caused-shimanos-coasting-program-fail/shimano_coasting/" data-orig-file="https://yannigroth.files.wordpress.com/2010/05/shimano_coasting.jpg" data-orig-size="500,188" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;}" data-image-title="shimano_coasting" data-image-description="" data-medium-file="https://yannigroth.files.wordpress.com/2010/05/shimano_coasting.jpg?w=300" data-large-file="https://yannigroth.files.wordpress.com/2010/05/shimano_coasting.jpg?w=500" title="shimano_coasting" src="https://yannigroth.files.wordpress.com/2010/05/shimano_coasting.jpg?w=730" alt="transmissions" srcset="https://yannigroth.files.wordpress.com/2010/05/shimano_coasting.jpg 500w, https://yannigroth.files.wordpress.com/2010/05/shimano_coasting.jpg?w=150 150w, https://yannigroth.files.wordpress.com/2010/05/shimano_coasting.jpg?w=300 300w" sizes="(max-width: 500px) 100vw, 500px"></a></p><p id="caption-attachment-873">Looks cool, but didn't sell. Why ? (photo from ohgizmo.com)</p></div>
<p>In a very interesting <a title="Bicycle Design - Blog" href="http://bicycledesign.net/2008/06/guest-post-by-mark-sanders/" target="_blank">guest post on BicycleDesign.net</a>, <strong>designer Mark Sanders</strong> basically talks about the cycling market as bunch of companies which sell high-priced bicycles to enthusiast cyclists (he calls them red oceans of enthusiasts). On the other hand, you have the mass-merchandisers selling very low-priced bikes in chain stores and supermarkets, targeting the mass of shoppers. Since these two approaches make companies compete on very “crowded” markets with low margins, we can indeed talk about red oceans that Kim &amp; Mauborgne’s describe in their theory on business strategy, the <a title="Blue Ocean Strategy - Wikipedia" href="http://en.wikipedia.org/wiki/Blue_Ocean_Strategy" target="_blank">Blue Ocean Strategy</a>. In this theory, companies achieve growth by creating innovative ways to satisfy customers’ needs (differentiation), thus avoiding the high costs that incurr in highly competitive markets, and also driving up value for these customers. So is the <strong>cycling industry an unattractive industry ?</strong> According to Sanders, yes. I also think about an interview (in Institutional Investor of April 2005) of Martin Schwartz, CEO of Dorel Industries that I read when I got interested in <a title="No hands: The rise and fall of the Schwinn Bicycles Company: an American institution, Judith Crown &amp; Glenn Coleman, Henry Holt&amp;Co. - Yannig Roth Blog" href="https://yannigroth.wordpress.com/2010/03/16/no-hands-the-rise-and-fall-of-the-schwinn-bicycles-company-an-american-institution-judith-crown-glenn-coleman-henry-holtco/">Schwinn’s history</a> ; he says that “<em>bikes, it’s true, is not a great industry, but someone has to be the best, and Pacific</em> (bike division of Dorel, ed) <em>is the best by far</em>“. Shimano seemed to having recognized that, and that’s where the industry-giant worked with IDEO, a global design consulting firm, to find <a title="Shimano Coasting, design-thinking applied to the cycling industry - Yannig Roth's blog" href="https://yannigroth.wordpress.com/2009/12/13/shimano-coasting-design-thinking-applied-to-the-cycling-industry/" target="_blank">a solution : Coasting</a>.</p>
<div data-shortcode="caption" id="attachment_874"><p><a href="https://yannigroth.files.wordpress.com/2010/05/cycling-market-blue-ocean-mark-sanders.jpg"><img aria-describedby="caption-attachment-874" data-attachment-id="874" data-permalink="https://yannigroth.com/2010/05/12/what-caused-shimanos-coasting-program-fail/cycling-market-blue-ocean-mark-sanders/" data-orig-file="https://yannigroth.files.wordpress.com/2010/05/cycling-market-blue-ocean-mark-sanders.jpg" data-orig-size="477,324" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;}" data-image-title="Cycling market blue ocean mark sanders" data-image-description="" data-medium-file="https://yannigroth.files.wordpress.com/2010/05/cycling-market-blue-ocean-mark-sanders.jpg?w=300" data-large-file="https://yannigroth.files.wordpress.com/2010/05/cycling-market-blue-ocean-mark-sanders.jpg?w=477" title="Cycling market blue ocean mark sanders" src="https://yannigroth.files.wordpress.com/2010/05/cycling-market-blue-ocean-mark-sanders.jpg?w=730" alt="pie-chart" srcset="https://yannigroth.files.wordpress.com/2010/05/cycling-market-blue-ocean-mark-sanders.jpg 477w, https://yannigroth.files.wordpress.com/2010/05/cycling-market-blue-ocean-mark-sanders.jpg?w=150 150w, https://yannigroth.files.wordpress.com/2010/05/cycling-market-blue-ocean-mark-sanders.jpg?w=300 300w" sizes="(max-width: 477px) 100vw, 477px"></a></p><p id="caption-attachment-874">Illustration by Mark Sanders (www.cyclelicio.us)</p></div>
<p>The previous paragraph relates to both the Blue Ocean theory (2005) and the Design Thinking theory (2008) to describe Shimano’s initiative. IDEO is even run by the guy who wrote <a title="Design Thinking (June 2008) - Harvard Business Review" href="http://hbr.org/2008/06/design-thinking/ar/1" target="_blank">the HBR-article on Design Thinking</a>, Tim Brown. So Shimano was basically advised by one of the leading strategists in the world, but about 3 years after the lauch of the Coasting product-line, <strong>the program was abandoned</strong> because it didn’t generate the expected commercial success that Shimano hoped for. The program thrilled the design-community (<a title="Giant receives Coasting honors - BRAIN" href="http://www.bicycleretailer.com/news/newsDetail/285.html" target="_blank">California Design Biennal Award for Giant</a> in 2007, <a title="Shimano's Coasting project wins award - BRAIN" href="http://www.bicycleretailer.com/news/newsDetail/1634.html" target="_blank">International Design Excellence Award</a> in 2008), was praised by journalists and commentators (<a title="With these bikes, easy does it - L.A. Times" href="http://www.latimes.com/features/health/la-he-gear4jun04,0,5314233.column" target="_blank">L.A. Times</a> or <a title="Trek Lime review - Cyclingnews.com" href="http://autobus.cyclingnews.com/tech.php?id=tech/2007/reviews/trek_lime07" target="_blank">Cyclingnews.com</a> in 2007), but sales didn’t follow. Why ?</p>
<p><strong>Several reasons</strong> cross my mind, and I’d like to have your feedback to contribute to the discussion…</p>
<ul>
<li><span><strong>Design process ?</strong></span></li>
</ul>
<p>Shimano’s brief for IDEO was more or less as follows : help it create a $1,000, tech-laden bike that would lure baby boomers  and their loose change off the couch (<a title="Coasting Bikes - bicycling.com" href="http://www.bicycling.com/article/1,6610,s1-1-324-15855-1-P,00.html" target="_blank">bicycling.com</a>). It is very common in the design process that the consulting firm<strong> reformulates this brief</strong>, and it indeed proved to be necessary. Aaron Slar, social engineer for IDEO, and David Lawrence, marketing manager for Shimano travelled to different U.S. cities to find out what people think about bikes and biking and discovered all these things about people being intimidated by technology and basically wanting to get the feel-good biking experience they remember from their childhood. The <strong>prototype</strong> had grinded lugs and cable routers, a coaster brake and, more importantly, an invisible shifting mechanism. When IDEO presented their findings and recommendations to Shimano in Japan, “<em>there was a long pause on the conference call. And it wasn’t just  because of the translation</em>“, says Lawrence. But the company rapidly got convinced, and started seeking partners within the industry.</p>
<div data-shortcode="caption" id="attachment_875"><p><a href="https://yannigroth.files.wordpress.com/2010/05/hbr-coasting-design-thinking.jpg"><img aria-describedby="caption-attachment-875" data-attachment-id="875" data-permalink="https://yannigroth.com/2010/05/12/what-caused-shimanos-coasting-program-fail/hbr-coasting-design-thinking/" data-orig-file="https://yannigroth.files.wordpress.com/2010/05/hbr-coasting-design-thinking.jpg" data-orig-size="826,296" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;}" data-image-title="hbr coasting design thinking" data-image-description="" data-medium-file="https://yannigroth.files.wordpress.com/2010/05/hbr-coasting-design-thinking.jpg?w=300" data-large-file="https://yannigroth.files.wordpress.com/2010/05/hbr-coasting-design-thinking.jpg?w=730" title="hbr coasting design thinking" src="https://yannigroth.files.wordpress.com/2010/05/hbr-coasting-design-thinking.jpg?w=730" alt="screenshot" srcset="https://yannigroth.files.wordpress.com/2010/05/hbr-coasting-design-thinking.jpg?w=730 730w, https://yannigroth.files.wordpress.com/2010/05/hbr-coasting-design-thinking.jpg?w=150 150w, https://yannigroth.files.wordpress.com/2010/05/hbr-coasting-design-thinking.jpg?w=300 300w, https://yannigroth.files.wordpress.com/2010/05/hbr-coasting-design-thinking.jpg?w=768 768w, https://yannigroth.files.wordpress.com/2010/05/hbr-coasting-design-thinking.jpg?w=800 800w, https://yannigroth.files.wordpress.com/2010/05/hbr-coasting-design-thinking.jpg 826w" sizes="(max-width: 730px) 100vw, 730px"></a></p><p id="caption-attachment-875">An extract from Tim Brown's HBR-article on Design Thinking. Inspiration, ideation &amp; implementation are represented here by examples</p></div>
<p>This <a title="Design Thinking process picture - Pferdt.de" href="http://www.pferdt.de/wp-content/uploads/2009/03/design-thinking-process-stanford2.jpg" target="_blank">design process</a> seems to have gone through the traditional steps, from understanding to prototyping and testing. Actually, I found <strong>few information about this “testing”-step</strong>. Who did Shimano and IDEO work with when they testes their prototype(s) ? Where there improved V2 and/or V3 versions based on customers’ feedback ? This would be interesting to know.</p>
<ul>
<li><strong><span>Industry involvement ?</span></strong></li>
</ul>
<p><a title="Coasting Bikes, The Revolution Will Be Simplified - bicycling.net" href="http://www.bicycling.com/article/1,6610,s1-1-324-15855-1-P,00.html" target="_blank">According to Daniel Gross</a>, manufacturers associated in the Coasting-project (3 in the first year, 10 the year after) were rapidly found and seemed <strong>enthusiatic about the idea</strong>. <a title="Giant-Bicycles.com (US)" href="http://www.giant-bicycles.com/en-US/" target="_blank">Giant</a> adapted bikes from its Suede product-line, <a title="Trek Bicycles Corporation" href="http://www.trekbikes.com/us/en/" target="_blank">Trek</a> &amp; <a title="Raleigh homepage (UK)" href="http://www.raleigh.co.uk/" target="_blank">Raleigh</a> created bikes, the Lime and the Coasting. Today, the Shimano Coasting <a title="Shimano Coasting homepage" href="http://www.shimanocoasting.com/" target="_blank">website</a> shows 7 models from 7 different brands : <a title="Schwinn Bicycles" href="http://www.schwinnbike.com/usa/eng/" target="_blank">Schwinn</a>, <a title="K2 Bikes" href="http://eccyclesupply.com/k2bikes/">K2</a>, <a title="Phat Cycles" href="http://www.phatcycles.com/" target="_blank">Phat</a>, <a title="Fuji Bikes" href="http://www.fujibikes.com/" target="_blank">Fuji</a> and the 3 brands that started with Shimano. I wonder what caused the number of manufacturers to drop ? They were indeed 10 in 2008, why did <a title="Sun Bicycles" href="http://www.sunbicycles.com/" target="_blank">Sun</a>, <a title="Jamis Bicycles USA" href="http://www.jamisbikes.com/usa/index.html" target="_blank">Jamis</a> &amp; <a title="Electra Bike" href="http://www.electrabike.com/" target="_blank">Electra</a> quit the program ? One possibility is that Shimano could not handle working closely with these 10 manufacturers and needed to <strong>skim off the least motivated</strong> ones… While some talk about a synergy between this major supplier and manufacturers, I wonder if the manufacturer’s didn’t think that Shimano would <strong>get too powerful</strong> if Coasting was a success ? Would have one single bike manufacturer have been more successful with the Coasting-approach ?</p>
<div data-shortcode="caption" id="attachment_884"><p><a href="https://yannigroth.files.wordpress.com/2010/05/coastinggroup_270x202.jpg"><img aria-describedby="caption-attachment-884" data-attachment-id="884" data-permalink="https://yannigroth.com/2010/05/12/what-caused-shimanos-coasting-program-fail/coastinggroup_270x202/" data-orig-file="https://yannigroth.files.wordpress.com/2010/05/coastinggroup_270x202.jpg" data-orig-size="270,202" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;}" data-image-title="Coasting-Group_270x202" data-image-description="" data-medium-file="https://yannigroth.files.wordpress.com/2010/05/coastinggroup_270x202.jpg?w=270" data-large-file="https://yannigroth.files.wordpress.com/2010/05/coastinggroup_270x202.jpg?w=270" title="Coasting-Group_270x202" src="https://yannigroth.files.wordpress.com/2010/05/coastinggroup_270x202.jpg?w=730" alt="group" srcset="https://yannigroth.files.wordpress.com/2010/05/coastinggroup_270x202.jpg 270w, https://yannigroth.files.wordpress.com/2010/05/coastinggroup_270x202.jpg?w=150 150w" sizes="(max-width: 270px) 100vw, 270px"></a></p><p id="caption-attachment-884">The Shimano Coasting automatic transmission-group (photo shimano.com)</p></div>
<p>Shimano’s goal was to get 1,000 U.S. retailers involved the first year. In 2008, two years after the lanch of the group, industry consultant Jay Townley of Gluskin Townley Group said <strong>retailers were still hesitant</strong> to adopt the new product. To improve this situation, Shimano sent them an explanatory DVD and did set up a dedicated website, sellingcoasting.com. But even this kind of initiatives did not make sales take off. When I talked to a bike dealer here in Pensacola he wasn’t very convinced by the Lime’s (Trek’s Coasting-model) ability to reach a new target of customers. If bike vendors don’t grasp it, the customer probably won’t either…</p>
<ul>
<li><strong><span>Marketing mix ?</span></strong></li>
</ul>
<p><span>PRODUCT :</span> Did the consumer know what was actually sold by Shimano ? The company only sells the transmission and shifting-system by its Coasting group. This product is then mounted on the bikes by manufacturers, who sell the bicycle through independent bicycle dealers (IBD) in the United States. But Coasting is also a concept, a lifestyle, a new way of designing riding experience. I think it was made <strong>too hard for the customer to identify what he was actually buying</strong> : did he buy a Trek ? a “Coasting” ? a Shimano ? Who made what on this bicycle ? Why change the shifting-system ? I think it was not Shimano’s role to directly adress the customer, it is still the bike brands’ job to sell their products.</p>
<p><span>PRICE : </span>The 3 initial Coasting bikes sold between 400$ and 700$. The Trek Lime’s retail price was roughly 500$, which is a fair price for a quality bicycle. It is half the price of what Shimano initially suggested to IDEO in the design brief. The aim of this pricing strategy was obviously to make bikes affordable to a large public who doesn’t ride bikes. I think the price was not a reason for failure, it was more that Shimano and, more importantly, the manufacturers were <strong>not able to communicate the benefits</strong> of Coasting to retailers and customers.</p>
<div data-shortcode="caption" id="attachment_888"><p><a href="https://yannigroth.files.wordpress.com/2010/05/k2-easy-roller-coasting-bike-review.jpg"><img loading="lazy" aria-describedby="caption-attachment-888" data-attachment-id="888" data-permalink="https://yannigroth.com/2010/05/12/what-caused-shimanos-coasting-program-fail/k2-easy-roller-coasting-bike-review/" data-orig-file="https://yannigroth.files.wordpress.com/2010/05/k2-easy-roller-coasting-bike-review.jpg" data-orig-size="491,694" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;}" data-image-title="k2-easy-roller-coasting-bike-review" data-image-description="" data-medium-file="https://yannigroth.files.wordpress.com/2010/05/k2-easy-roller-coasting-bike-review.jpg?w=212" data-large-file="https://yannigroth.files.wordpress.com/2010/05/k2-easy-roller-coasting-bike-review.jpg?w=491" title="k2-easy-roller-coasting-bike-review" src="https://yannigroth.files.wordpress.com/2010/05/k2-easy-roller-coasting-bike-review.jpg?w=212&amp;h=300" alt="bike" width="212" height="300" srcset="https://yannigroth.files.wordpress.com/2010/05/k2-easy-roller-coasting-bike-review.jpg?w=212&amp;h=300 212w, https://yannigroth.files.wordpress.com/2010/05/k2-easy-roller-coasting-bike-review.jpg?w=424&amp;h=600 424w, https://yannigroth.files.wordpress.com/2010/05/k2-easy-roller-coasting-bike-review.jpg?w=106&amp;h=150 106w" sizes="(max-width: 212px) 100vw, 212px"></a></p><p id="caption-attachment-888">The K2 Easy Roller is (was?) available at 600$. Quite a bit for a bike with no handlebar-brakes (photo from besportier.com)</p></div>
<p><span>PROMOTION :</span> The promotional strategy was intended to convey this feeling of freedom of riding a bicycle and to <strong>draw non-cyclists to the stores</strong> that sold Coasting. Newspaper advertising and guerilla marketing were used to increase awareness of Coasting, and the <strong>website <a title="Shimano Coasting homepage" href="http://www.shimanocoasting.com/" target="_blank">Coasting.com</a> was central</strong> to explain the concept and present bikes to consumers. The design of this flash-based website is fun and interactive, storytelling is used to involve the visitor (storytelling is part of the Design Thinking process, according to Tim Brown) and content encourages people to get on their bikes. Ideally Coasting bikes. Beside this, a <a title="Shimano Coasting Tour - Yannig Roth's Blog" href="https://yannigroth.files.wordpress.com/2010/03/shimano-coasting-tour-preview.jpg" target="_blank">demo-tour</a> was also organized in several U.S.-cities to bring the bikes to the poeple and encourage PR &amp; publicity.</p>
<div data-shortcode="caption" id="attachment_879"><p><a href="https://yannigroth.files.wordpress.com/2010/05/shimano3.jpg"><img aria-describedby="caption-attachment-879" data-attachment-id="879" data-permalink="https://yannigroth.com/2010/05/12/what-caused-shimanos-coasting-program-fail/shimano3/" data-orig-file="https://yannigroth.files.wordpress.com/2010/05/shimano3.jpg" data-orig-size="600,375" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;}" data-image-title="shimano-coasting-marketing" data-image-description="" data-medium-file="https://yannigroth.files.wordpress.com/2010/05/shimano3.jpg?w=300" data-large-file="https://yannigroth.files.wordpress.com/2010/05/shimano3.jpg?w=600" title="shimano-coasting-marketing" src="https://yannigroth.files.wordpress.com/2010/05/shimano3.jpg?w=730" alt="bike-lanes" srcset="https://yannigroth.files.wordpress.com/2010/05/shimano3.jpg 600w, https://yannigroth.files.wordpress.com/2010/05/shimano3.jpg?w=150 150w, https://yannigroth.files.wordpress.com/2010/05/shimano3.jpg?w=300 300w" sizes="(max-width: 600px) 100vw, 600px"></a></p><p id="caption-attachment-879">The Fineline used outdoor stencils (with environmentally friendly spray chalk) to create life sized coasting paths everywhere (photo from the-fineline.net)</p></div>
<p><span>PLACE : </span>Coasting was intended to the U.S.-market only, and it has been launched in cities like Orlando or Phoenix before the whole country was covered in 2008. Shimano and the bike brands chose to sell their products exclusively at IBDs. I think this is one of the reasons that caused Coasting’s failure : while the website is a good way of presenting the concept/product/bikes, poeple are often unfamiliar with the specialized bike stores and bike-enthusiastic vendors. Why not<strong> selling through the web ?</strong> Was the reliance on a retailing network so important ? It might have avoided some obstacles too… But more than seeing problems on the U.S. market, I think that Shimano should have tried to introduce Coasting (or a similar technology, with a different marketing approach) into<strong> less mature markets</strong> like China, India and other emerging countries. Or <strong>even (very) mature markets</strong> like Scandinavian countries and the Netherlands, where product acceptance might have been higher.</p>
<h2>VERDICT ?</h2>
<p>The future of Shimano’s Coasting is unclear. On the internet, Coasting.com vanished and ShimanoCoasting.com has appeared, the content is unchanged. As I said in a <a title="Shimano and associated bicycle manufacturers drop the Coasting program - Yannig Roth's blog" href="https://yannigroth.wordpress.com/2010/03/24/shimano-and-associated-bicycle-manufacturers-drop-the-coasting-program/" target="_blank">previous post</a>, the program has been abandoned by Shimano because sales never attained the expected figures. I think there was a huge potential in this approach, and this post explains some points that could have led to Coasting’s deceiving results.</p>
<p>What do you think ? Do you have more informations ? More ideas ?</p>
			</div></div>]]>
            </description>
            <link>https://yannigroth.com/2010/05/12/what-caused-shimanos-coasting-program-fail/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25591892</guid>
            <pubDate>Thu, 31 Dec 2020 12:01:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Big Little Guide to Message Queues]]>
            </title>
            <description>
<![CDATA[
Score 266 | Comments 107 (<a href="https://news.ycombinator.com/item?id=25591492">thread link</a>) | @sudhirj
<br/>
December 31, 2020 | https://sudhir.io/the-big-little-guide-to-message-queues/ | <a href="https://web.archive.org/web/*/https://sudhir.io/the-big-little-guide-to-message-queues/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            
<div>
    <main>
            <article>
    
    <div>
                <p>Message Queues are now fairly prevalent—there are so many of them showing up so fast you'd think they were <a href="https://www.rabbitmq.com/">rabbits</a> with an unlimited supply of <a href="https://docs.celeryproject.org/en/stable/">celery</a>, resulting in an <a href="https://kafka.apache.org/">kafkaesque</a> situation where making a decision is like trying to catch a <a href="https://redis.io/topics/streams-intro">stream</a> in your hands. If only there were fewer <a href="https://aws.amazon.com/sns">simple</a> <a href="https://aws.amazon.com/sqs/">services</a> that could help with <a href="https://cloud.google.com/pubsub">publishing and subscribing</a>, it would be so much easier to make a <a href="https://zeromq.org/">zero-effort</a> choice 😕</p><p>Whether we use them by themselves as-is to move data between parts of our application, or as an integral part of the architecture (like event driven systems), message queues are here to stay. In a way, they've been here all along—just without as many names. But what are they? Why are they useful? And how do we use them effectively? Which implementation do we pick? Does it even matter which one we use? And do we need to learn each of them individually, or are there more general concepts that apply to all message queues?</p><p>In this guide, we'll talk about:</p><ul><li>What message queues are and their history.</li><li>Why they're useful and what mental models to use when reasoning about them.</li><li>Delivery guarantees that the queuing systems make (at-least-once, at-most-once, and exactly-once semantics).</li><li>Ordering and FIFO guarantees and how they effect sequencing, parallelism and performance.</li><li>Patterns for fan-out and fan-in: delivering one message to many systems or messages from many systems into one.</li><li>Notes on the pros and cons of many popular systems available today.</li></ul><h2 id="what-are-message-queues">What are message queues?</h2><p>Message Queues are a way to transfer information between two systems. This information—a message—can be data, metadata, signals, or a combination of all three. The systems that are sending and receiving messages could be processes on the same computer, modules of the same application, services that might but running on different computers or technology stacks, or entirely different kinds of systems altogether—like transferring information from your software into an email or an SMS on the cellphone network.</p><p>The idea of a messaging system has been around a very long time, from the message boxes used for moving information between people or office departments (literally where the words <em>inbox </em>and <em>outbox</em> come from), to telegrams, to your local postal or courier service. The messaging systems in the physical world that come closest to what we have in computing are probably the <a href="https://en.wikipedia.org/wiki/Pneumatic_tube">pnuematic</a> <a href="https://www.google.com/search?q=pneumatic+tubes&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;biw=2560&amp;bih=1366">tubes</a> that moved messages through buildings and cities using compressed air until a few decades ago (and are still used in some places today).</p><p>The kinds of messages we transfer today might be a note that something technical happened, like CPU usage exceeding a limit; or a business event of interest, like a customer placing an order; or a signal, like a command that tells another service to do something. The contents of each message will be driven entirely by the architecture of your application and its purposes—so for the rest of this guide, we don't need to be concerned about what's inside a message—we're more concerned with how the message gets from the system where it originates (the <em>producer</em>, <em>source, publisher</em> or <em>sender</em>) to the system where's it's supposed to go (the <em>consumer</em>, <em>subscriber</em>, <em>destination</em> or <em>receiver</em>).</p><h2 id="and-why-do-we-need-them">And Why Do We Need Them?</h2><p>We need message queues because no system exists or works in isolation—all systems need to communicate with other systems in structured ways that they both can understand, and at a controlled speed that they both can handle. Any non-trivial process needs a way to move information between each stage of the process; any workflow needs a way to move the intermediate product between the stages of that workflow. Message queues are a great way to handle this movement. There are plenty of ways of getting these messages around using API calls, file systems, or many other abuses of the natural order of things; but all of these are ad-hoc implementations of the message queue that we sometimes refuse to acknowledge we need.</p><p>The simplest mental model for a message queue is a very long tube that you can roll a ball into. You write your message on a ball, roll it into the tube, and someone or something else receives it at the other end. There are a lot of interesting benefits with this model, some of which are:</p><ul><li>We don't need to worry about <em>who or what</em> is going to receive the message – that's one less responsibility for the sender to be concerned about.</li><li>We don't need to worry about <em>when</em> the receiver is going to pick up the message.</li><li>We can put <em>as many</em> messages as we want into the tube (let's assume we have a infinitely long tube) at whatever <em>speed</em> is comfortable to us.</li><li>The receiver will <em>never be impacted</em> by our actions—they will pull out as many messages as they want at whatever rate is comfortable to them.</li><li>Neither the sender nor the receiver are concerned with <em>how</em> the other works.</li><li>Neither the sender nor the receiver are concerned with the <em>capacity or load</em> of the other.</li><li>Neither system is concerned with <em>where</em> the other one is – they may or many not reside on the same computer, network, continent or even the same planet.</li></ul><p>Each of these advantages (and this isn't even an exhaustive list) has very important benefits in software development—what they all have in common is <em>decoupling</em>. One system is decoupled from the other in terms of responsibility, time, bandwidth, internal workings, load and geography. And decoupling is a very desirable part of any distributed or complex system—the more decoupled the parts of the system are, the easier it is to independently build, test, run, maintain and scale them.</p><p>Most systems interact with other outside or third-party systems as well—if we build a shopping site we might interact with a payment processor, and let’s say we attempt to directly communicate with the payment processor on each user click. If our system is under heavy load, we're also subjecting the other system to the same load. And vice versa—if our payment provider needs to send us millions of pieces of information about our past payment statues, our system better be ready. The two systems are now <em>coupled</em>. The decisions and actions made by one system have a significant impact on the other, so the needs of both need to be taken into account while making every decision. Add enough other systems into the mix, like logistics or delivery systems, and we quickly have a paralysing mess that makes it difficult to decide anything at all. If one system goes down, the other systems have effectively gone down as well, for no fault of their own.</p><p>We’re also in trouble if we want to switch out any one of these systems for another one, like a new payment processor or delivery system. We’d have to make deep changes in multiple places in our application, and it’s even more difficult to build code to split our messages between multiple providers—we may want to use a ratio to load balance them or split them by geography; or dynamically switch between them based on each provider’s availability or cost.</p><p>Message queues offer the decoupling that solves a lot of these problems. If we set up a queue between two systems that need to communicate with each other, they can now go about their work without having to worry about each other at all—we put our messages aimed at any system into a queue, and we expect information from the other system to come to us through another queue as well. We now have clear points at which we can add rules or make the changes we require, without either system knowing or caring about what's different.</p><h3 id="so-what-s-the-catch">So what's the catch?</h3><p>Are message queues the holy grail of computing, though? Do they solve all the world's problems? No, of course not. There are plenty of situations where we might not want to use them. And we certainly don't want to use a queue just because we have one easily available and think it might be fun. There are some systems that are really simple that just don't require it—a message queue is a way to reduce to complexity of communicating systems, but two communicating systems will always be more complex than one system that doesn't have to communicate. If you have a system that’s simple enough to not require communication with any others, there simply isn't any reason to reach for a queue.</p><p>There are also systems that communicate with each other, but where the complexity added by that communication added is insignificant and not worth worrying about. Or more often the systems are already coupled, in the sense that they all need to work together to function. A really common example is an application server and a data service (in an <em>OLTP</em> system). There's not much point in decoupling them with a queue, because neither can do anything useful without the direct involvement of the other.</p><p>Then there's performance to consider as well—the whole point of decoupling two systems with regards to time and load is so that they can each process information at their own pace—but we certainly would <em>not</em> want this to happen in performance sensitive applications or real-time systems. A queue might help us process more work at the same time (the receiver might have many processes working in parallel on the messages you send) but will remove any guarantees we need about the exact time taken for each piece of work. If predictability is more important than throughput, we're better off without a queue.</p><p>Using a queue might increase the time taken to process each <em>individual</em> message, but will allow you process many more messages at the same time across different computers—so your total number of messages processed per minute or hour, or <em>throughput</em>, will increase.</p><p>If we do have multiple systems that need to communicate, and that communication needs to be <em>durable </em>(if we’ve put a message into a queue, we want to be sure that the messaging system isn’t going to ‘forget’ about it) and decoupled, a message queue is indispensable.</p><h2 id="arguing-semantics">Arguing Semantics</h2><p>There's simply no way to learn about message queues without reading and/or arguing about delivery guarantees …</p></div></article></main></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://sudhir.io/the-big-little-guide-to-message-queues/">https://sudhir.io/the-big-little-guide-to-message-queues/</a></em></p>]]>
            </description>
            <link>https://sudhir.io/the-big-little-guide-to-message-queues/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25591492</guid>
            <pubDate>Thu, 31 Dec 2020 10:38:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Shamelessness as a Strategy (2019)]]>
            </title>
            <description>
<![CDATA[
Score 186 | Comments 202 (<a href="https://news.ycombinator.com/item?id=25591066">thread link</a>) | @etherio
<br/>
December 31, 2020 | https://nadiaeghbal.com/shameless | <a href="https://web.archive.org/web/*/https://nadiaeghbal.com/shameless">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div ?="">
        <p>I’ve enjoyed playing a game called Avalon recently. I won’t go too far into the rules, but it’s a <a href="https://www.bestplay.co/ultimate-guide-hidden-role-board-games/">hidden role game</a> in the vein of Secret Hitler or Werewolf, where one team is “good”, trying to uncover who among them is “evil”, before the evil team wins.</p>

<p>One of the characters you can play is Merlin. Merlin knows who the evil players are, but can’t reveal what he knows, because the evil team can kill Merlin and win the game. So Merlin relies on another character, Percival, to be his decoy.</p>

<p>Percival’s only power is that he knows who Merlin is. So he secretly watches Merlin’s actions throughout the game and amplifies those signals to the rest of the group. The typical strategy is for Percival to attract attention away from Merlin and towards himself.</p>

<p>But another, riskier strategy is for <em>Merlin</em> to play as though <em>he</em> is Percival. In this case, Merlin displays what he knows so shamelessly that he throws everyone off. The evil team, believing that no Merlin would be stupid enough to put himself out there like that, figures he must be Percival, and writes him off.</p>

<p>The Merlin-as-Percival strategy is bold, because it blatantly defies our expectations about how the game is won. To pull it off, Merlin must create confusion around his actions. He needs the other players to feel unsure about whether he’s being incredibly stupid or incredibly smart.</p>

<p>Increasingly, I think the “shameless” approach is becoming a dominant strategy today. It was first popularized in modern canon by Paris Hilton, who played the “dumb blonde heiress” stereotype so smoothly that everyone assumed she really was as stupid as she seemed.</p>

<p>Paris didn’t play by the “obvious” rules for famous people. She was widely derided by both media and her peers as at best, a train wreck, and at worst, a self-serving aggrandizer. And yet, people couldn’t stop talking about her. A decade later, Paris is now remembered as the mastermind behind the playbook that’s made the Kardashians, Jenners, and other celebrity socialites so successful.</p>

<p>It’s important to note that people were dismissive of Paris because validating her playbook would mean admitting that <em>they</em> were playing an inferior game. Everyone else had invested years into optimizing for the most legible version of the rules. They’d look silly if they were to admit she had found a better way of doing things.</p>

<p>Without getting into tiresome politics, the “shameless” strategy also defined the 2016 U.S. presidential elections. It was shouted down by people in both established political parties, because they were used to playing by the “obvious” rules, but I suspect that in a decade’s time, we’ll look back on that election and realize that it marked the beginning of an entirely new style of politics.</p>

<p>Ditto to, perhaps, the leadership styles of Mark Zuckerberg, who’s followed the “obvious” playbook for years, versus Jack Dorsey, who employs tactics that seem so obviously stupid (tweeting about fasting and meditation!) that we’re quick to write them off. And yet, I’d guess that Zuckerberg’s strategy makes him increasingly unlikeable and untrustworthy, in the same way that any major politician sticking to a pre-2016 playbook today is almost certainly not going to win.</p>

<p>The shameless strategy feels counterintuitive, because our first instinct is to want to punish that sort of behavior. And historically, those sanctions have been effective. Punishing outlandish behavior is an important aspect of cooperative governance: it preserves social order by ensuring that we all play by the same rules.</p>

<p>Today, it seems like punishing shamelessness only <em>increases</em> social rewards to the transgressor. What’s changed?</p>

<p>One explanation might be that it’s an expected effect of the blurring of social boundaries today. In the past, if the size of your community was finitely bounded (like a village, or an aristocratic social class), people didn’t enter or exit these communities as frequently. Under these conditions, sanctions are probably still effective, because members of the community want to be liked and accepted.</p>

<p>But the borders to online communities are much more fluid - perhaps even nonexistent. Under open borders, sanctions will backfire, because they just serve as a signaling boost for the transgressor, attracting outsiders who resonate with that person’s message. What’s meant to be punishment instead becomes a flare shot straight into the night sky.</p>

<p>The “establishment” mistakenly assumes that a shameless person wants the approval of their community, when it turns out that, much like any cult or counterculture, that person’s goal was to attract a following, regardless of who the members are. The disgust of one’s peers doesn’t matter anymore, because that disgust forms the basis for an entirely new community.</p>

<p>A common critique of shameless people is questioning their intelligence. But one of the most bizarre aspects here is it doesn’t actually matter how aware that person is of what they’re doing. The concept of a “genius mastermind” is itself outdated, because it assumes that someone needs to be in control. The shameless person is simply a host for a set of ideas, which, like any virus, will continue to propagate as long as there are willing hosts to receive it.</p>

<p>I’m not really sure what the long-term implications of shamelessness will be. I also don’t think that everybody has to employ this strategy to win (at least, I hope not!). But what I do know is when I see my peers rolling their eyes at someone or deriding them for being “shameless”, there’s a good chance that, instead of writing them off, we should examine their actions a bit more closely.</p>

    </div></div>]]>
            </description>
            <link>https://nadiaeghbal.com/shameless</link>
            <guid isPermaLink="false">hacker-news-small-sites-25591066</guid>
            <pubDate>Thu, 31 Dec 2020 09:26:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[RC3 talk: How to survive in spacecraft [video]]]>
            </title>
            <description>
<![CDATA[
Score 77 | Comments 13 (<a href="https://news.ycombinator.com/item?id=25590724">thread link</a>) | @hurlga
<br/>
December 31, 2020 | https://media.ccc.de/v/rc3-158638-how_to_survive_in_spacecraft | <a href="https://web.archive.org/web/*/https://media.ccc.de/v/rc3-158638-how_to_survive_in_spacecraft">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">



<div>

<p>
<span></span>
<a href="https://media.ccc.de/search?p=urs">urs</a>

</p>

<p><a href="https://media.ccc.de/c/rc3/Chaos-West" rel="tag">Chaos-West</a>
<a href="https://media.ccc.de/c/rc3/CWTV" rel="tag">CWTV</a>
Playlists:
<a href="https://media.ccc.de/v/rc3-158638-how_to_survive_in_spacecraft/playlist">'rc3' videos starting here</a>
/
<a data-method="get" href="https://media.ccc.de/v/rc3-158638-how_to_survive_in_spacecraft/audio">audio</a></p>
<!-- %h3 About -->
<p>If you pop out into space, you die. No oxygen to breathe, no ambient pressure makes your bodily fluids boil, UV radiation burns your skin to a crisp. It's not a good place to be for humans. So in order to survive, you need to bring a number of things along, commonly called the "life support system". This talk explains how this works!</p>

<p>How do oxygen generators and CO_2 scrubbers work? Do you need to heat or cool your craft? If you eat beans and fart a lot, do you ever get rid of the smell? Can you just fill your spacecraft with plants and live off them? <br> This talk goes through historic, present and future ways that life support is managed in spacecraft, spacesuits and future planetary outposts. It also explains why you have to breathe your own pee on the International Space Station. <br> (This is the logical followup to the two previous, german talks about how to fly spaceships and how to build them, from the GulaschProgrammierNacht 13 and 16)</p>

<p>Slides: http://urs.nerd2nerd.org/rC3-talk.svg</p>

<h3>Download</h3>

<!-- %h3 Embed/Share -->

<h3>Tags</h3>

</div>





</div>]]>
            </description>
            <link>https://media.ccc.de/v/rc3-158638-how_to_survive_in_spacecraft</link>
            <guid isPermaLink="false">hacker-news-small-sites-25590724</guid>
            <pubDate>Thu, 31 Dec 2020 08:26:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Factor Graph Grammars [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 39 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25590524">thread link</a>) | @luu
<br/>
December 30, 2020 | https://proceedings.neurips.cc/paper/2020/file/49ca03822497d26a3943d5084ed59130-Paper.pdf | <a href="https://web.archive.org/web/*/https://proceedings.neurips.cc/paper/2020/file/49ca03822497d26a3943d5084ed59130-Paper.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://proceedings.neurips.cc/paper/2020/file/49ca03822497d26a3943d5084ed59130-Paper.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-25590524</guid>
            <pubDate>Thu, 31 Dec 2020 07:42:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Linux Hardening Guide]]>
            </title>
            <description>
<![CDATA[
Score 441 | Comments 272 (<a href="https://news.ycombinator.com/item?id=25590079">thread link</a>) | @FlyMoreRockets
<br/>
December 30, 2020 | https://madaidans-insecurities.github.io/guides/linux-hardening.html | <a href="https://web.archive.org/web/*/https://madaidans-insecurities.github.io/guides/linux-hardening.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
    

    <p><i><time datetime="2020-12-25">Last edited: December 25, 2020</time></i></p>

    <div>
      <p><a href="https://madaidans-insecurities.github.io/linux.html">Linux is not a secure operating system</a>. However, there are steps you can take to improve it. This guide aims to explain
      how to harden Linux as much as possible for security and privacy. This guide attempts to be distribution-agnostic and is not tied to any specific one. </p><p>
      
      DISCLAIMER: Do not attempt to apply anything in this article if you do not know exactly what you are doing. This guide is focused purely on security and privacy,
      not performance, usability, or anything else. </p><p>
      
      All commands listed in this guide will require root privileges. Words beginning with "$" sign indicate a variable that may differ between users as to suit their
      setup.
    </p></div>

    <h2>Contents</h2>

    

    <h2 id="choosing-the-right-distro"><a href="#choosing-the-right-distro">1. Choosing the right Linux distribution</a></h2>

    <p>
      There are many factors that go into choosing a good Linux distribution.
    </p>

    <ul>
      <li>
        Avoid distributions that freeze packages as <a href="https://madaidans-insecurities.github.io/linux.html#debian">they are often quite behind on security updates</a>.
      </li>

      <li>
        Use a distribution with an init system other than <a href="https://systemd.io/">systemd</a>. systemd contains a lot of unnecessary
        attack surface; <a href="https://ewontfix.com/14/">it attempts to do far more things than necessary</a> and goes beyond what an
        init system should do. An init system should not need many lines of code to function properly.
      </li>

      <li>
        Use <a href="https://musl.libc.org/">musl</a> as the default C library. musl is heavily focused on minimality which <a href="https://github.com/NixOS/nixpkgs/issues/90147#issuecomment-643473182">results in very small attack surface</a> whereas other C libraries
        such as glibc are overly complex and prone to vulnerabilities. For example, <a href="https://www.cvedetails.com/vulnerability-list/vendor_id-72/product_id-767/GNU-Glibc.html">
        over a hundred vulnerabilities in glibc have been publicly disclosed</a> compared to the <a href="https://www.cvedetails.com/vulnerability-list/vendor_id-16859/product_id-39652/Musl-libc-Musl.html">
        very few in musl</a>. While counting CVEs by itself is often an inaccurate statistic, it can sometimes be used to represent an overaching issue such as
        in this case. musl also has <a href="https://www.dustri.org/b/security-features-of-musl.html"> decent exploit mitigations</a>, particularly its
        <a href="https://www.openwall.com/lists/musl/2020/05/13/1">new hardened memory allocator</a>.
      </li>

      <li>
        Preferably use a distribution that utilizes <a href="https://www.libressl.org/">LibreSSL</a> by default rather than <a href="https://www.openssl.org/">
        OpenSSL</a>. <a href="https://arstechnica.com/information-technology/2014/04/openssl-code-beyond-repair-claims-creator-of-libressl-fork/">OpenSSL contains
        tremendous amounts of totally unnecessary attack surface and follows poor security practices</a>. For example, it still maintains OS/2 and VMS support —
        ancient operating systems that are multiple decades old. These abhorrent security practices are what led to the dreaded <a href="https://en.wikipedia.org/wiki/Heartbleed">Heartbleed vulnerability</a>. LibreSSL is a fork of OpenSSL by the OpenBSD team that applies
        <a href="https://en.wikipedia.org/wiki/LibreSSL#Changes">superior programming practices</a> and <a href="https://opensslrampage.org/">eradicates
        a lot of attack surface</a>. Within LibreSSL's first year, <a href="https://www.openbsd.org/papers/libtls-fsec-2015/mgp00005.html">it mitigated a
        large number of vulnerabilities, including a few high severity ones</a>.
      </li>
    </ul>

    <div><p>
      The best distribution to use as a base for your hardened operating system would be <a href="https://www.gentoo.org/">Gentoo Linux</a> as it allows you to configure
      your system exactly how you want it to be which will be extremely useful, especially when we come to <a href="#hardened-compilation-flags">more secure compilation
      flags</a> later in the guide. </p><p>
      
      However, Gentoo may not be feasible for many people due to its significant usability pitfalls. In this case, <a href="https://voidlinux.org/">Void Linux</a>'s musl
      build is a good compromise.
    </p></div>

    <h2 id="kernel"><a href="#kernel">2. Kernels</a></h2>

    <p>
      The kernel is the core of the operating system and is unfortunately very prone to attacks. As Brad Spengler has once said, <a href="https://grsecurity.net/huawei_hksp_introduces_trivially_exploitable_vulnerability">it can be thought of as the largest,
      most vulnerable setuid root binary on the system</a>. Thus, it is very important for the kernel to be hardened as much as possible.
    </p>

    <h3 id="stable-vs-lts"><a href="#stable-vs-lts">2.1 Stable vs. LTS kernels</a></h3>

    <div><p>
      The Linux kernel is released under two main forms: stable and long-term support (LTS). Stable releases are more recent whereas LTS
      releases are an older stable release that is being supported for a long time. <a href="https://www.grsecurity.net/the_truth_about_linux_4_6">
      There are many consequences to choosing either of the aforementioned releases</a>. </p><p>
      
      The Linux kernel <a href="https://grsecurity.net/reports_of_cves_death_greatly_exaggerated">does not use CVEs to identify security
      vulnerabilities properly</a>. This means that fixes for most security vulnerabilities are not able to be backported to LTS kernels;
      but stable releases contain all security fixes made so far. </p><p>
      
      With those fixes however, a stable kernel includes a lot more new features, therefore vastly increasing the attack surface of the
      kernel and introducing a large amount of new bugs. On the contrary, LTS kernels have less attack surface because these features are
      not being constantly added. </p><p>
      
      Additionally, stable kernels include newer hardening features to mitigate certain exploits which LTS kernels do not. A few examples
      of such features are the <a href="https://mjg59.dreamwidth.org/55105.html">Lockdown LSM</a> and <a href="https://a13xp0p0v.github.io/2018/11/04/stackleak.html">STACKLEAK GCC plugin</a>. </p><p>
      
      To conclude, there is a trade-off when choosing a stable or LTS kernel. LTS kernels have less hardening features and not all public bug fixes
      at that point have been backported, but it generally has less attack surface and potentially a smaller chance of introducing unknown bugs.
      Stable kernels have more hardening features and all known bug fixes are included but it also has more attack surface and greater chances of
      introducing more unknown bugs. In the end though, a more recent LTS branch such as the 4.19 kernel would be preferred due to the much smaller
      attack surface.
    </p></div>

    <h3 id="sysctl"><a href="#sysctl">2.2 Sysctl</a></h3>

    <p>
      Sysctl is a tool that allows the user to configure certain kernel settings and enable various security features or disable dangerous
      features to reduce attack surface. To change settings temporarily you can execute:
    </p>

    <pre><code>sysctl -w $tunable = $value</code></pre>

    <div><p>
      To change sysctls permanently you can add the one you want to change to <code>/etc/sysctl.conf</code> or the corresponding files within
      <code>/etc/sysctl.d</code>, depending on your Linux distribution. </p><p>
      
      The following are the recommended sysctl settings that you should change.
    </p></div>

    <h4 id="sysctl-kernel"><a href="#sysctl-kernel">2.2.1 Kernel self-protection</a></h4>

    <pre><code>kernel.kptr_restrict=2</code></pre>

    <p>
      A kernel pointer points to a specific location in kernel memory. <a href="https://kernsec.org/wiki/index.php/Bug_Classes/Kernel_pointer_leak">
      These can be very useful in exploiting the kernel</a> but kernel pointers are not hidden by default — it is easy to uncover them by, for example,
      reading the contents of <code>/proc/kallsyms</code>. This setting aims to mitigate kernel pointer leaks. Alternatively, you can set
      <code>kernel.kptr_restrict=1</code> to only hide kernel pointers from processes without the <code>CAP_SYSLOG</code> <a href="#capabilities">capability</a>.
    </p>

    <pre><code>kernel.dmesg_restrict=1</code></pre>

    <p>
      <a href="https://en.wikipedia.org/wiki/Dmesg">dmesg</a> is the kernel log. It exposes a large amount of useful kernel debugging information but this
      can often leak sensitive information such as kernel pointers. Changing the above sysctl restricts the kernel log to the <code>CAP_SYSLOG</code>
      <a href="#capabilities">capability</a>.
    </p>

    <pre><code>kernel.printk=3 3 3 3</code></pre>

    <p>
      Despite the value of <code>dmesg_restrict</code>, the kernel log will still be displayed in the console during boot. Malware that is
      able to record the screen during boot may be able to abuse this to gain higher privileges. This option prevents those information
      leaks. This must be used in combination with certain boot parameters <a href="#boot-kernel">described below</a> to be fully effective.
    </p>

    <pre><code>kernel.unprivileged_bpf_disabled=1
net.core.bpf_jit_harden=2</code></pre>

    <p>
      <a href="https://madaidans-insecurities.github.io/linux.html#kernel">eBPF exposes quite large attack surface</a>. As such, it must be restricted. These sysctls restrict eBPF
      to the <code>CAP_BPF</code> <a href="#capabilities">capability</a> (<code>CAP_SYS_ADMIN</code> on kernel versions prior to 5.8) and enable
      JIT hardening techniques such as <a href="https://github.com/torvalds/linux/blob/9e4b0d55d84a66dbfede56890501dc96e696059c/include/linux/filter.h#L1039-L1070">constant blinding</a>.
    </p>

    <pre><code>dev.tty.ldisc_autoload=0</code></pre>

    <p>
      This <a href="https://lkml.org/lkml/2019/4/15/890">restricts loading TTY line disciplines</a> to the <code>CAP_SYS_MODULE</code>
      <a href="#capabilities">capability</a> to prevent unprivileged attackers from loading vulnerable line disciplines with the <code>TIOCSETD</code>
      ioctl which <a href="https://a13xp0p0v.github.io/2017/03/24/CVE-2017-2636.html">has been abused in a number of exploits before</a>.
    </p>

    <pre><code>vm.unprivileged_userfaultfd=0</code></pre>

    <p>
      The <code><a href="https://man7.org/linux/man-pages/man2/userfaultfd.2.html">userfaultfd()</a></code> syscall is <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=cefdca0a86be517bc390fc4541e3674b8e7803b0">often</a> <a href="https://duasynt.com/blog/linux-kernel-heap-spray">abused</a> to exploit use-after-free flaws. Due to this, this sysctl is used to restrict
      this syscall to the <code>CAP_SYS_PTRACE</code> <a href="#capabilities">capability</a>.
    </p>

    <pre><code>kernel.kexec_load_disabled=1</code></pre>

    <p>
      <a href="https://en.wikipedia.org/wiki/Kexec">kexec is a system call that is used to boot another kernel during runtime</a>. This functionality can
      be abused to load a malicious kernel and gain arbitrary code execution in kernel mode so this sysctl disables it.
    </p>

    <pre><code>kernel.sysrq=4</code></pre>

    <p>
      The <a href="https://www.kernel.org/doc/html/latest/admin-guide/sysrq.html">SysRq key</a> exposes a lot of potentially dangerous debugging functionality
      to unprivileged users. Contrary to common assumptions, SysRq is not only an issue for physical attacks as <a href="https://github.com/xairy/unlockdown">
      it can also be triggered remotely</a>. The value of this sysctl makes it so that a user can only use the <a href="https://www.kernel.org/doc/Documentation/SAK.txt">
      secure attention key</a> which will be necessary for <a href="#accessing-root-securely">accessing root securely</a>. Alternatively, you can simply set the
      value to <code>0</code> to disable SysRq completely.
    </p>

    <pre><code>kernel.unprivileged_userns_clone=0</code></pre>

    <div><p>
      User namespaces are a feature in the kernel which aim to improve sandboxing and make it easily accessible for unprivileged users however, <a href="https://madaidans-insecurities.github.io/linux.html#kernel">this feature exposes significant kernel attack surface for privilege escalation</a> so this sysctl restricts the
      usage of user namespaces to the <code>CAP_SYS_ADMIN</code> <a href="#capabilities">capability</a>. For unprivileged sandboxing,
      it is instead recommended to use a setuid binary with little attack surface to minimize the potential for privilege escalation. This topic is
      covered further in the <a href="#application-sandboxing">sandboxing section</a>. </p><p>
      
      Be aware though that this sysctl only exists on certain Linux distributions as it requires a kernel patch. If your kernel does not include
      this patch, you can alternatively disable user namespaces completely (including for root) by setting <code>user.max_user_namespaces=0</code>.
    </p></div>

    <pre><code>kernel.perf_event_paranoid=3</code></pre>

    

    <h4 id="sysctl-network"><a href="#sysctl-network">2.2.2 Network</a></h4>

    <pre><code>net.ipv4.tcp_syncookies=1</code></pre>

    <p>
      This helps protect against <a href="https://en.wikipedia.org/wiki/SYN_flood">SYN flood attacks</a> which are a form of denial of service attack
      in which an attacker sends a large amount of bogus SYN requests in an attempt to consume enough resources to make the system unresponsive to
      legitimate traffic.
    </p>

    <pre><code>net.ipv4.tcp_rfc1337=1</code></pre>

    <p>
      This protects against <a href="https://tools.ietf.org/html/rfc1337">time-wait assassination</a>…</p></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://madaidans-insecurities.github.io/guides/linux-hardening.html">https://madaidans-insecurities.github.io/guides/linux-hardening.html</a></em></p>]]>
            </description>
            <link>https://madaidans-insecurities.github.io/guides/linux-hardening.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25590079</guid>
            <pubDate>Thu, 31 Dec 2020 06:14:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Interview Transcript – Donald Knuth [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 162 | Comments 36 (<a href="https://news.ycombinator.com/item?id=25589619">thread link</a>) | @asicsp
<br/>
December 30, 2020 | https://philipkiely.com/assets/files/WfSD_Bonus_Interview_-_Donald_Knuth.pdf | <a href="https://web.archive.org/web/*/https://philipkiely.com/assets/files/WfSD_Bonus_Interview_-_Donald_Knuth.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://philipkiely.com/assets/files/WfSD_Bonus_Interview_-_Donald_Knuth.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-25589619</guid>
            <pubDate>Thu, 31 Dec 2020 04:30:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Bupstash]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25589167">thread link</a>) | @andrewchambers
<br/>
December 30, 2020 | https://acha.ninja/blog/introducing_bupstash/ | <a href="https://web.archive.org/web/*/https://acha.ninja/blog/introducing_bupstash/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
				
<p>You know backups right? Those things you never got around to setting up… well no need to feel guilty any longer, today
I’m excited to share my new backup tool - <a href="https://bupstash.io/">Bupstash</a>!</p>
<p>So why is bupstash cool? Bupstash lets you make encrypted, deduplicated and secure backups.
Bupstash is fast, focused, and places strong emphasis on both security and privacy. Backups can happen to local drives or over ssh. Bupstash can backup files, directories, and even arbitrary command output.</p>
<p>Bupstash was designed to have:</p>
<ul>
<li>
<p>Efficient deduplication - Bupstash can store hundreds of encrypted directory snapshots using a fraction of the space encrypted tarballs would require.</p>
</li>
<li>
<p>Offline decryption keys - Backups do not require the decryption key be anywhere near an at-risk server or computer.</p>
</li>
<li>
<p>Key/value tagging with search - all while keeping the tags fully encrypted.</p>
</li>
<li>
<p>Great performance on slow networks - Bupstash really strives to work well on high latency networks like cellular and connections to far-off lands.</p>
</li>
<li>
<p>Secure access controls - Ransomware and disgruntled business partners will be powerless to delete your backups, even after a
full system take over.</p>
</li>
<li>
<p>Efficient incremental backups - Bupstash knows what it backed up last time and skips that work.</p>
</li>
</ul>
<p>Sounds great right? How does it work?</p>

<p>Bupstash stores data as a kind of <a href="https://en.wikipedia.org/wiki/Merkle_tree">Merkle tree</a> with encrypted root nodes. Each
time a file is saved, it is split into data chunks, which are
encrypted (using crypto_box_curve25519xchacha20poly1305 from <a href="https://github.com/jedisct1/libsodium">libsodium</a>) and then sent to or saved in the backup repository if they have never been seen before.</p>
<p>To identify encrypted chunks for deduplication, we use an <a href="https://en.wikipedia.org/wiki/HMAC">HMAC</a> of the decrypted contents. The HMAC
key is a shared secret between the encryption key and the decryption key. This means
someone cannot guess a chunk’s contents based on the deduplication address in the backup
repository.</p>
<p>The end result is that many snapshots which share similar data also share encrypted chunks, resulting in very space-efficient backups. My personal backup repository
contains over 400 snapshots of my 40 GB home directory and weighs in at around 50 GB total.</p>

<p>In bupstash a key is either a ‘main key’ or a ‘put key’. Backups made by put keys can only be decrypted by the original
main key. With this setup, you can send backups to a bupstash repository without ever risking your decryption key.</p>
<p>You can imagine Bupstash’s model like when you send someone a <a href="https://en.wikipedia.org/wiki/GNU_Privacy_Guard">GPG</a>-encrypted email and you do not have access to their decryption key. Instead you use asymmetric cryptography and send data addressed
to their private key. Another benefit of the email-like model is that the email provider does not need access to your
decryption keys to store or forward your emails. Likewise, a remote bupstash repository never needs access
to your backup decryption keys to operate.</p>

<p>Bupstash maintains all backups in a mostly append-only log of encrypted backup metadata.
In order to allow searching that metadata, bupstash syncs the metadata log client-side before
performing decryption and searches client-side. This design sacrifices some performance for search and
listing in favour of fully encrypted metadata. In practice bupstash can easily search hundreds to thousands of snapshots
in seconds.</p>

<p>Bupstash focuses on backup and restore streaming, avoiding network round trips as much as possible.</p>
<p>When a user requests an encrypted snapshot, the
server walks the entire data structure server-side, and pushes
it to the client. The client then is able to verify the structure
and restore your data without any network round trips.</p>
<p>The bupstash <a href="https://bupstash.io/doc/man/bupstash-gc.html">‘garbage collector’</a> works
entirely server-side and without requiring the server to decrypt any data, avoiding
sending data to the client in costly and slow ways.</p>
<p>What does this all mean? In some benchmarks restoring backups from a distant
remote server, I was able to achieve 6x performance improvements over the
previous backup tool I was using (benchmarks coming soon).</p>

<p>Bupstash is designed to allow the use of ssh force commands to control whether
an ssh key has permission to make new backups, list backups or remove backups.</p>
<p>In my personal backup setup, my laptop can only add new backups via a vpn, but never remove
old backups from my backup repository. If my laptop were to be stolen, all backups are
safe from deletion.</p>
<p>When bupstash is configured with append-only access controls, making a backup is analagous to sending someone an email,
the recipient of the message is the one who decides when the message can be deleted.</p>
<p>You can see how to set this up in the <a href="https://bupstash.io/doc/guides/Remote%20Access%20Controls.html">access controls tutorial</a>.</p>

<p>Bupstash has the notion of a ‘send log’ for saving bandwidth and accelerating snapshot
speeds. Bupstash remembers which data chunks were
sent in the previous snapshot, allowing the client to avoid resending data pointlessly.</p>

<p>Below is a simple bupstash session:</p>
<pre><code>$ export BUPSTASH_REPOSITORY=ssh://bupstash.io/backups

$ bupstash put host="$(hostname)" name=home-backup.tar /home
ebb66f3baa5d432e9f9a28934888a23d

$ bupstash list host=$(hostname) and 'name=*.tar'
...
id="dbca49b072c0f94b9e72bf81e7716ff9" name="home-backup.tar" hostname="server1" timestamp="2020/08/03 15:47:32"

$ bupstash list-contents id="dbca*"
drwxr-xr-x 0     2020/10/30 13:32:04 .
-rw-r--r-- 1967  2020/10/30 13:32:04 data.txt
...

$ bupstash get id="dbca*" | tar -C ./restore -xvf -
...
$ bupstash get --pick data.txt id="dbca*"
data!

$ bupstash rm name=home-backup.tar and older-than 30d
$ bupstash gc

</code></pre><p>My goal with the bupstash user interface is letting people get on with their day
while having a simple and excellent backup insurance policy.</p>

<p>Bupstash is currently in alpha and ready for people to play with at their own
risk.</p>
<p>For more information and help:</p>
<ul>
<li>Visit the <a href="https://bupstash.io/">project website</a>.</li>
<li>Visit the <a href="https://github.com/andrewchambers/bupstash">project github repository</a>.</li>
<li>Visit the <a href="https://bupstash.io/doc/guides/Getting%20Started.html">quickstart guide</a> for an introductory tutorial.</li>
<li>Visit the <a href="https://bupstash.io/doc/guides/Filesystem%20Backups.html">filesystem backups guide</a> for examples of making backups.</li>
<li>Visit the <a href="https://bupstash.io/doc/man/bupstash.html">man pages</a> for more comprehensive documentation.</li>
<li>Visit the <a href="https://gitter.im/bupstash/community?utm_source=share-link&amp;utm_medium=link&amp;utm_campaign=share-link">community chat</a> to ask questions.</li>
</ul>
<p>Stay tuned for benchmarks and more interesting developments, and thank you for your time :).</p>

			</div></div>]]>
            </description>
            <link>https://acha.ninja/blog/introducing_bupstash/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25589167</guid>
            <pubDate>Thu, 31 Dec 2020 03:09:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Shortformer: Better Language Modeling using Shorter Inputs [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 63 | Comments 6 (<a href="https://news.ycombinator.com/item?id=25588675">thread link</a>) | @blast
<br/>
December 30, 2020 | https://ofir.io/shortformer.pdf | <a href="https://web.archive.org/web/*/https://ofir.io/shortformer.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://ofir.io/shortformer.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-25588675</guid>
            <pubDate>Thu, 31 Dec 2020 01:51:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[AWS Session Manager: A better way to SSH]]>
            </title>
            <description>
<![CDATA[
Score 15 | Comments 4 (<a href="https://news.ycombinator.com/item?id=25588535">thread link</a>) | @mooreds
<br/>
December 30, 2020 | http://sawers.com/blog/aws-session-manager-a-better-way-to-ssh/ | <a href="https://web.archive.org/web/*/http://sawers.com/blog/aws-session-manager-a-better-way-to-ssh/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div role="main">

    <article>


        <header>
        
        
        <p><time datetime="2020-12-10T15:00:39.00Z">...</time>
        <br>
        
        </p>
        </header>

        <section>
            <div><p>Secure Shell (SSH) is a solid remote access tool. IMO it's a key enabling technology for distributed systems. However it's effective security is not ideal. It's authentication scheme with RSA key pairs and wire-level encryption is great. But key management is tricky, and opening the firewall(s) for bidirectional SSH (port 22) increases the attack surface.</p>
<p>This article describes an AWS innovation introduced in 2019 called the session manager. Yes, you really can improve that mouse trap. The session manager adds to ssh a layer of authentication and authorization based on IAM and only requires HTTPS <em>outbound</em> on the server end. SSH rides on top of the Session Manager via SSH's proxy capability.</p>
<p>Now, remote host access might be on the wane. Cloud native is trending us towards managed platforms (cloud functions, serverless, container orchestrators), where it is discouraged, if not impossible, to start a shell. But for now, we still need it.</p>
<p>Let us level set first on SSH before we get into SSH proxied via the Session Manaager.</p>

<p>Straight, plain-vanilla SSH has a client and a server component, communicating over the SSH protocol. A shell session is initiated to a server-side user account, and authenticated either by a password or private key whose public key has been pre-authorized on the server:</p>
<p><img src="http://sawers.com/blog/content/images/2020/12/AWS-Session-Manager-Arch-straight-ssh.png" alt="AWS-Session-Manager-Arch-straight-ssh"></p>
<p>Note that ssh client is usually a bundle of tools: secure shell, file transfer and copy (ssh, sftp and scp). All three use the above architecture.</p>
<p>For reference, starting the session looks something like this:</p>
<pre><code>ssh -i ~/.ssh/my-ec2-instance.pem ec2-user@{public-ip-or-fqdn}
</code></pre>

<p>AWS offers session manager clients as part of the AWS CLI (with an add on) and the Console (Browser interface). The client and server communicate over HTTPS and secure web sockets, via the AWS Systems Manager (SSM) gateway:</p>
<p><img src="http://sawers.com/blog/content/images/2020/12/AWS-Session-Manager-Arch-direct.png" alt="AWS-Session-Manager-Arch-direct"></p>
<p>A few points to reemphasize here:</p>
<ol>
<li>There is effectively no risk of inbound attack. The firewall (security group and/or network acl) only needs an 443 outbound rule. The ssm agent on the EC2 Instances poll the gateway for session requests.</li>
<li>You can remove jumphosts altogether, or at least move them to private subnets. These instances need no public IP, and outbound access is enabled via a NAT gateway.</li>
<li>It's easier to harden authentication and manage credentials at scale. Console password rules (complexity, expiry), CLI access key rules (expiry) and use of MFA can be centralized. With AWS SSO or cross-account role assumption, each user has one set of credentials to use and rotate. Of course on and off-boarding is simplified as well.</li>
<li>You can more easily authorize access. SSH keys are often shared across hosts for convenience. IAM policies can be configured to limit access based on instance ids, tags, subnets, etc. on a per-user, per-role or per-group basis.</li>
<li>You can more easily audit access for forensics or integrate DevSecOps processes. Session lifecycle is logged in CloudTrail, and you can log to S3 the <em>full</em> shell history (both commands typed <em>and</em> responses displayed).</li>
</ol>

<h2 id="clientdevice">Client Device</h2>
<ol>
<li><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html">AWS CLI</a></li>
<li><a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html">Session Manager Plugin</a></li>
</ol>
<h2 id="iamuser">IAM User</h2>
<ol>
<li>An IAM policy. I like using to use this set:</li>
</ol>
<pre><code>{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Action": [
                "ssm:GetConnectionStatus",
                "ssm:DescribeInstanceInformation",
                "ssm:DescribeSessions",
                "ssm:StartSession",
                "ssm:DescribeInstanceProperties"
            ],
            "Resource": "*",
            "Effect": "Allow",
            "Sid": "SessionManagerStartDescribe"
        },
        {
            "Action": [
                "ssm:TerminateSession"
            ],
            "Resource": "arn:aws:ssm:*:*:session/${aws:username}-*",
            "Effect": "Allow",
            "Sid": "SessionManagerTerminate"
        }
    ]
}
</code></pre>
<p>Note that the above allows a user to list all current and historical sessions. Last I checked (Nov 2019), you cannot restrict DescribeInstances to those started by the user, but it does fortunately restrict entry termination to those the user has started.</p>
<p>You have to choose between users being able to view all current sessions (but not enter or terminate them) and viewing none at all. Same for historical sessions.</p>
<h2 id="ec2instance">EC2 Instance</h2>
<ol>
<li>
<p>An SSM agent. It's pre-installed with the Amazon Machine Images (AMI) for Windows Server, Ubuntu Server 16 and 18, Amazon Linux 1 and 2, and all the AL variants for Batch, ECS, ElasticBeanstalk, etc. However, it has taken AWS many months to roll out the latest agent that supports SSH Proxying. Last I checked (Nov 2020), Ubuntu 16 supports direct but not proxied ssh. (Run <code>snap refresh amazon-ssm-agent</code> in your user data or other bootstrap mechanism to update it.)</p>
</li>
<li>
<p>IAM policy via an ec2 instance profile (role). The AWS doc on this is a little scattered. I like to use this set:</p>
</li>
</ol>
<pre><code>{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "SessionManagerCore"
            "Effect": "Allow",
            "Action": [
                "ec2messages:AcknowledgeMessage",
                "ec2messages:DeleteMessage",
                "ec2messages:FailMessage",
                "ec2messages:GetEndpoint",
                "ec2messages:GetMessages",
                "ec2messages:SendReply",
                "ssm:UpdateInstanceInformation",
                "ssm:ListInstanceAssociations",
                "ssmmessages:OpenDataChannel",
                "ssmmessages:CreateDataChannel",
                "ssmmessages:OpenControlChannel",
                "ssmmessages:CreateControlChannel"
            ],
            "Resource": "*",
        }
}
</code></pre>
<p>If you want to log session data (shell history), you'll need another set of permissions, e.g. <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/getting-started-create-iam-instance-profile.html">documented here</a>.</p>
<p>Assign the profile (role) to the ec2 instance. If you assign the role after the instance started, bounce the ssm agent to get it connected to the backend.</p>

<p>Now let's bring in our trusty ssh, scp and sftp.</p>
<p><img src="http://sawers.com/blog/content/images/2020/12/AWS-Session-Manager-Arch-proxied-ssh.png" alt="AWS-Session-Manager-Arch-proxied-ssh"></p>
<p>You can also use this approach for:</p>
<ol>
<li>custom users with non-default authorized ssh keys</li>
<li>custom users with password only authentication</li>
</ol>
<p>The proxy config for Linux (<code>~/.ssh/config</code>):</p>
<pre><code># SSH over Session Manager
host i-* mi-*
  ProxyCommand sh -c "aws ssm start-session --target %h --document-name AWS-StartSSHSession --parameters 'portNumber=%p'"
</code></pre>
<p>For Windows/OpenSSH (<code>C:\Users\{username}\.ssh\config</code>):</p>
<pre><code># SSH over Session Manager
host i-* mi-*
  ProxyCommand C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe "aws ssm start-session --target %h --document-name AWS-StartSSHSession --parameters portNumber=%p"
</code></pre>
<p>If you have multiple aws profiles configured, export (set in Windows Powershell) the AWS_PROFILE variable prior to starting the session.</p>
<p>So now we can use the instance id, instead of the public ip or fqdn:</p>
<pre><code>ssh -i ~/.ssh/my-ec2-instance.pem ec2-user@{instance-id}
</code></pre>
<p>It will look and feel just like a straight ssh session. Occassionally starting the session takes a few seconds, but the performance from there on is just as good as ssh, in my experience.</p>
<p>All the other facilities, like scp and sftp, and remote execution of a command, are available as well. Also you can use the bundled ssh-add utility to store your keys in a cache and drop the -i option.</p>

<p>What about access to data stores, like private RDS or Elasticsearch/Kibana instance? You can use your client tools, like a MySQL Workbench in the case of RDS MySQL, or a browser in the case of Kibana. You connect them to a local port, e.g. 3306 or 8443, that is an open ssh tunnel riding on the session manager.</p>
<p>The following diagram depicts access from the MySQL CLI client to a MySQL RDS:</p>
<p><img src="http://sawers.com/blog/content/images/2020/12/AWS-Session-Manager-Arch-proxied-ssh-tunnel-1.png" alt="AWS-Session-Manager-Arch-proxied-ssh-tunnel-1"></p>

<p>You can amend the user policy to restrict access. My two favorites follow.</p>
<ol>
<li>Whitelist specific people in a common policy:</li>
</ol>
<pre><code>        ...
        {
            "Sid": "SessionManagerDenyRestricted",
            "Effect": "Deny",
            "Action": "ssm:StartSession",
            "Resource": [
              "arn:aws:ec2:*:*:instance/i-0cdbc0106ed03bba5",
              "arn:aws:ec2:*:*:instance/i-07e8b9fc88ee02bf8"
            ]
            "Condition": {
                "StringNotEquals": {
                    "aws:username": "first.last1",
                    "aws:username": "first.last2"
                }
            }
        }
</code></pre>
<p>Or you could use a group or role reference.</p>
<ol start="2">
<li>Whitelist categories of instances in a user- or group-specific policy:</li>
</ol>
<pre><code>        ...
        {
            "Sid": "StartSessionResourceTag",
            "Effect": "Allow",
            "Action": "ssm:StartSession",
            "Resource": "arn:aws:ec2:*:*:instance/*",
            "Condition": {
                "StringEquals": {
                    "ssm:resourceTag/Purpose": "jumpbox"
                }
            }
        }
</code></pre>
<p>Of course you then have to restrict ec2 instance tag updates to admins.</p>
<p>Refer to these <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/getting-started-restrict-access-quickstart.html">quick start policies</a> for more.</p>

<p>By default, all session start and end is logged to CloudTrail, like all AWS service activity. You could enable some DevSecOps process on using CloudWatch event rules, like looking for .</p>
<p>You can enable session data logging to an S3 bucket, but take care! The content is highly sensitive. For example, users may type passwords in shell command arguments and cat files with PHI data. Therefore the logs must be sent to a well guarded bucket, e.g. in an audit account that is only allowed temporarily access by forensics investigators.</p>

<p>Putting it all together:</p>
<p><img src="http://sawers.com/blog/content/images/2020/12/AWS-Session-Manager-Arch-system-1.png" alt="AWS-Session-Manager-Arch-system-1"></p>
<p>AWS Session Manager enables us to:</p>
<ol>
<li>harden our systems (reduce the attack surface, use multi-factor authentication and fine-grained authorization)</li>
<li>centralize identity and access management</li>
<li>centralize audit</li>
</ol>
<p>And all this with no degredation in the user experience.</p>
<p>IMO, it's a win-win for dev, ops and security teams.</p>
</div>
        </section>

        

        

        
	


    </article>

</div></div>]]>
            </description>
            <link>http://sawers.com/blog/aws-session-manager-a-better-way-to-ssh/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25588535</guid>
            <pubDate>Thu, 31 Dec 2020 01:31:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Leading someone with more years of experience than my age]]>
            </title>
            <description>
<![CDATA[
Score 97 | Comments 95 (<a href="https://news.ycombinator.com/item?id=25586883">thread link</a>) | @drojasug
<br/>
December 30, 2020 | https://danielrrojas.com/2020/12/27/leading-someone-with-more-years-of-experience-than-my-age/ | <a href="https://web.archive.org/web/*/https://danielrrojas.com/2020/12/27/leading-someone-with-more-years-of-experience-than-my-age/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
			
<p>It all started at my first job. I’ve been around 6 months in the company and was happy getting used to the ropes of my current job. In those 6 months, I quickly pushed to prod (without even knowing it) and was learning very fast. I still remember when my boss called me to his office: We are going to do some changes and you’ll lead this new 3 person team. I thought to myself: Cool, I’ve learned some books about leadership, this could be fun.</p>



<p>The tricky part was the members of the team. They were a couple of technicians who had more than ten years on the job and more than twenty years in the company ( I was twenty years old). One of them was even a team lead recently. I did not understand the mechanics of that re-org at the time and still don’t have all the information about what was happening. I wish I had some cool story about why I was chosen to lead the team, really don’t know.</p>



<p>It was not a walk in the park, things started to get ugly before they could get better. As expected they pushed back a lot, they did not like the change, me, or anything that was happening. It’s funny, looking back I think my ego should have been hurt based on all the times they tried to avoid working with me and change things. I guess I was so confused with everything that I had no time for that.</p>



<p>When we started to work together, one thing was clear: they were not in the mood to take orders from a kid. I was not in the mood to give orders to them. This particular situation helped me a lot and shaped the way I work ten years later.</p>



<p>Given that it was almost impossible to give orders and avoid starting a world war. I started listening, that’s what I did the most in the first weeks. I listened and asked questions. Not like interrogations, more like curious questions. I think the key to the questions what that I wanted to learn from them. I was not a trick, I was very interested in what they were doing.</p>



<p>I still remember some kind of pranks they pulled on me. They would tell me they had run out of a particular material they needed. I had made a lot of calls and research to try to find it for them, then they magically found some in the warehouse or the car they used. I did not know these were pranks, I learned later when they had another team lead (I laughed that time).</p>



<p>With some retrospective, I think these pranks were not just to pick on the new guy. I think they were testing me. They wanted to see what I did, would I forget about the problem, slack off, blame it on them, or take ownership and be part of the team. Most of the time I came with solutions and discussed alternatives with the team. Some weeks later I think they started to trust me.</p>



<p>There was a point where I started to notice that I could help with some things. Not so much in executing, but there were some things they needed help with. Mostly operational excellence. They were relieved to have someone handle that. Every week we were becoming a better team.</p>



<p>Patience was a foundation for this team. At least from my side. I did not rush things out (I was not even sure how to do that) and never try to impose my ideas or way of working. I trusted a lot the team and things started to look better.</p>



<p>Not everything was perfect. We had disagreements and sometimes we preferred different approaches. This is normal in all teams, the good part is that we started to have a process. We had a daily meeting, talked about what we needed to do that day and we talked briefly at the end of the day. Every side learned to cede sometimes and when months have passed we were playing by ear.</p>



<p>Even though we were a productive team and technically very respected, what I always treasure from these experiences is human relationships. I still have a great time whenever I talk to these two people and we have a blast remembering the good old days. Based on what they say, they learn a thing or two from me, but I learned a ton from them and that experience.</p>
					</div></div>]]>
            </description>
            <link>https://danielrrojas.com/2020/12/27/leading-someone-with-more-years-of-experience-than-my-age/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25586883</guid>
            <pubDate>Wed, 30 Dec 2020 22:20:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Clams filter the water and check whether the water is polluted or clean]]>
            </title>
            <description>
<![CDATA[
Score 311 | Comments 71 (<a href="https://news.ycombinator.com/item?id=25586861">thread link</a>) | @ta988
<br/>
December 30, 2020 | https://www.polishnews.co.uk/poznan-the-clams-filter-the-water-they-check-whether-the-water-is-polluted-or-clean/ | <a href="https://web.archive.org/web/*/https://www.polishnews.co.uk/poznan-the-clams-filter-the-water-they-check-whether-the-water-is-polluted-or-clean/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p>They are more accurate than complicated devices in the laboratory, they know “something is wrong” faster and cannot be fooled.  In Poznań, mussels have been keeping water purity for 26 years.  The TVN24 reporter checked what exactly their “work” is all about and whether the inconspicuous barks have raised the alarm. </p>
<p><span>In Poznań, 26 years ago, mussels were “employed” to check the safety of water, and more specifically large ones.  The capital of Greater Poland was the first Polish city to decide on such a solution. </span></p>
<p><span>– Working as a microbiologist, I always thought to introduce a system that would work independently and would be based on living organisms.  The idea was for such a system to give us information about the quality of the water.  When looking at chemical tests, you can check a lot of things, but for each type of test you need a separate device – says Grzegorz Podolski, senior technologist for water quality at Aquanet. </span></p>
<div>
<figure>

<p><span>Mussels have been “evaluating” the condition of water for 26 years</span><span>TVN24</span></p>
</figure>
</div>
<div>
<p><span>- Advertisement -</span>
<ins data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9526668220208198" data-ad-slot="5339701839"></ins>
</p><p><span>It is different with biomonitoring.  – Here one organism, in this case a clam, checks many parameters and if there is any chemical contamination, it lets you know.  And that’s enough to take a sample, take it to the laboratory and see what it is about: confirm or deny that something is happening to the water.  It is a system that ensures safety against pollution and even terrorist activities.  The work of the mussels is closely related to what the laboratory does, adds Podolski. </span></p>
</div>
<h2>Work for two months </h2>

<p><span>Clams nourish themselves by filtering the water.  They are extremely sensitive to all kinds of pollution and much more than humans.  That is why they belong to the indicators, i.e. species of plants and animals that have a low degree of tolerance to changes in conditions in the environment in which they live. </span></p>
<p><span>How many mussels were given a “job” and how long they can work was checked and described in the instruction by scientists from the Adam Mickiewicz University in Poznań.  – We have three measuring devices in the company and eight clams in each.  In total, we “employ” 200 individuals during the year – says Podolski. </span></p>
<p><span>Within an hour, one individual can filter 1.5 liters of water.  – It is a good cooperation.  We have full democracy and gender equality here, because we have both male and female individuals – says Dorota Wiśniewska, spokesman for Aquanet SA in Poznań. </span></p>
<p><span>Each clam is first prepared and fed.  Then it goes to a special flow-through aquarium.  And there, for two months, they are on “duty”.  – This is the time when he can work and live safely.  Then the “workers” return to their natural environment, that is, to water reservoirs – explains Wiśniewska. </span></p>

<h2>They filter and alarm </h2>

<p><span>Biomonitoring based on mussels consists in constant, round-the-clock observation and registration of their shell movements.  How it’s working? </span></p>
<p><span>– Mussels open the shells and every now and then take in a small amount of water, filtering out everything that is suitable for eating.  When the water is polluted, they do their best to separate from it, and everyone’s shells just close at the same time.  This happens within two minutes.  If two or three clams close, it doesn’t have to mean anything, but if there are eight, it’s an alarm.  Then our role is to find out what has upset them so much and find out if it is a real or a false alarm – says Podolski. </span></p>
<div>
<figure>
<p><span>How wide do the shells of clams open?</span><span>Paula Przetakowska / TVN24</span></p>
</figure>
</div>
<p><span>– Have they all shut down?  – the TVN24 reporter asks. </span></p>
<p><span>– There has not been such a situation for these 26 years.  The water that goes to the mussels is of very good quality – adds Podolski. </span></p>
<p><span>Scientists have translated these clam responses into ‘computer language’.  – The mussels are glued to the plastic pedestal.  In addition, a magnet disc is glued to the shell, and a probe is mounted nearby that detects changes in the magnetic field.  When the clam closes or opens, it touches the probe with this magnet.  And we translate it into an image of the degree of opening and closing – explains the Aquanet employee.  </span></p>
<div>
<figure>

<p><span>Mussels have been “keeping” the purity of water since 1994 </span><span>TVN24</span></p>
</figure>
</div>
<p><span>– During these 26 years, when we talk about the work of mussels during “open doors” or educational lessons, they always arouse positive emotions and great interest.  Visitors are always surprised that such small creatures play such an important role – adds Wiśniewska. </span></p>
<p><span>Water biomonitoring in Poland is carried out in several water supply companies, including in Łódź, Warsaw and Silesia. </span></p>
<p><span>Main photo source: </span>TVN24</p>
</div></div>]]>
            </description>
            <link>https://www.polishnews.co.uk/poznan-the-clams-filter-the-water-they-check-whether-the-water-is-polluted-or-clean/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25586861</guid>
            <pubDate>Wed, 30 Dec 2020 22:18:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Developer progression as a function of navigating complexity]]>
            </title>
            <description>
<![CDATA[
Score 53 | Comments 37 (<a href="https://news.ycombinator.com/item?id=25586471">thread link</a>) | @sid6376
<br/>
December 30, 2020 | https://www.siddharthsarda.com/p/developer-progression-as-a-function | <a href="https://web.archive.org/web/*/https://www.siddharthsarda.com/p/developer-progression-as-a-function">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>I came across this <a href="https://files.eric.ed.gov/fulltext/EJ1204031.pdf">paper</a> which looks at ways to teach students complex systems courtesy of Jessica Kerr’s <a href="https://jessitron.com/2020/10/11/clockwork-to-complexity-scale-in-time-and-software/">blog</a>.</p><p>Based on how students reason about complex systems, they were placed in 4 categories in order of increasing sophistication: <strong>Completely Clockwork</strong><em>, </em><strong>Somewhat Clockwork, Somewhat Complex and Completely Complex.</strong></p><blockquote><p><em>“Clockwork responses are those that show deterministic, linear, single-cause, non-networked, centralized, or static system interactions or states, whereas complex responses are those that demonstrate nondeterministic, nonlinear, multiple causes, networked, decentralized, or dynamic system interactions or states”.</em></p></blockquote><div><figure><a target="_blank" href="https://cdn.substack.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F325111ba-e7ab-4fb2-8bb1-743e63fe634d_1600x632.png"><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F325111ba-e7ab-4fb2-8bb1-743e63fe634d_1600x632.png" data-attrs="{&quot;src&quot;:&quot;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/325111ba-e7ab-4fb2-8bb1-743e63fe634d_1600x632.png&quot;,&quot;height&quot;:575,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null}" alt=""></a></figure></div><p>In my experience this translates extremely well to the progression of a developer and their understanding of the complexity of the ecosystem they operate in. So, I wanted to attempt to derive a learning progression for developers.</p><p>At each level of development, I recommend a few books. Each book hopefully is a thread you can pull on, if you want to go deeper into a particular topic.The book recommendations are subjective, but I believe that one can chart their own curriculum following the basic model. The recommendations that I make are just based on my own experience and aim to serve merely as guidance.</p><p>When it comes to progression to the next level, my general advice would be to master the level you are operating on and then aim to understand whats needed to operate at the next level.</p><p><strong>Completely Clockwork</strong></p><p>At this level most of the work is involved in making changes in a single service or component. This is where most of the <em>‘coding’</em> happens. The amount of time that will be spent reading your code will be multiples of the amount you would take to write it. You will work more with existing code rather than writing new code. A corollary of this fact is that you need to know how to make your code easy to change.So your focus should be on writing readable code and making it easy to change. </p><p>Your scope of work will probably within your team and its very likely that your circle of influence, impact and visibility would mostly be your team as well. The abstraction at which you operate in is your team. </p><p>The advice I would give at this level is to optimise for seeing problems solved through different <a href="https://charity.wtf/2020/11/01/questionable-advice-the-trap-of-the-premature-senior/">reference points</a>. </p><p>My recommendations for this level would be:</p><ul><li><p><a href="https://amzn.to/3rDymed">Refactoring</a></p></li><li><p><a href="https://amzn.to/2L4q3HJ">Clean Architecture</a></p></li></ul><p><strong>Somewhat Clockwork</strong></p><p>As you begin to build familiarity and also gain experience, you might see that increasingly you begin to look outward from the immediate scope of your team. You begin to try to understand how the surroundings affect the goals of your teams.  You start going on <a href="https://noidea.dog/blog/surviving-the-organisational-side-quest">organisational side quests</a> to achieve your team’s goals. The abstraction at which you operate is still typically your team but the way you look at things becomes more outward looking.</p><p>In modern software development, distributed systems are ubiquitous. Even when you are making a change to a single service, that service most likely lives in an ecosystem of other services and a plethora of other distributed tools. As you grow in seniority you need to understand how best to interact with other services  and also the tradeoffs involved with each tool.&nbsp;</p><p>Books for this level</p><ul><li><p><a href="https://amzn.to/3rFMkfH">Designing Data Intensive Applications&nbsp;</a></p></li><li><p><a href="https://amzn.to/3o1QDjf">Building Microservices</a></p></li></ul><p><strong>Somewhat Complex</strong></p><p>As you gain more experience, you would have ideally developed some <a href="https://blog.koehntopp.info/2020/08/31/on-touching-candles.html">calluses</a>, had a ring side view of  some <a href="https://twitter.com/StanTwinB/status/1336890442768547845">heart stopping close shaves</a>. This will prepare you to operate at next abstraction: teams of teams.  You would be advising on how to organise software and teams best to make teams successful in aggregate. You could be either leading <a href="https://lethain.com/migrations/">migrations to address technical debt</a> or <a href="https://lethain.com/reclaim-unreasonable-software/">reclaiming unreasonable software</a>. It will also probably be your call as to when to do what.</p><p>A practitioner operating mostly at this level needs to be able to use models to explain the  overall system or domain they are operating in and its interactions with its neighbouring domains. These models are not just to explain the software system but also the teams that surround that software. You need to understand the best models for organising teams to drive maximum impact. Additionally, as the operator of <a href="https://how.complexsystems.fail/">complex systems</a> they wear two hats : that of the producer and that of the protector against failure. The practitioner needs to be able to handle this duality well.&nbsp;</p><p>Books for this level</p><ul><li><p><a href="https://amzn.to/381eAl7">Domain Driven Design</a></p></li><li><p><a href="https://amzn.to/3o2KenM">Team Topologies</a></p></li><li><p><a href="https://amzn.to/3mYTWpZ">SRE Book&nbsp;</a></p></li><li><p><a href="https://amzn.to/381eWrX">Accelerate&nbsp;</a></p></li></ul><p><strong>Completely Complex</strong></p><p>The abstraction that you operate in now is the entire organisation or in bigger companies, an entire division or department. Your focus is primarily on what to build rather than the how.  You will be doing a lot of writing, <a href="https://www.linkedin.com/feed/update/urn:li:activity:6530173230102122496/">since you need to communicate at scale</a>.</p><p>According to the paper, a completely complex system is a dynamic process, which is constantly in a state of flux. Any patterns here are emergent. Changes have both short term and long term repercussions. You also realise that the system is self organised for the most part. This sounds a lot like the modern organisation. At this scope you are typically operating as the technical leadership. You need to be able to form technical strategies grounded in the needs of the business.&nbsp;</p><p>Books for this level</p><ul><li><p><a href="https://medium.com/wardleymaps/on-being-lost-2ef5f05eb1ec">Wardley Maps</a></p></li><li><p><a href="https://amzn.to/38Msirg">Enterprise Architecture as Strategy</a></p></li></ul><p>So to summarise, this is what we end up with as a progression plan for developers over varying degrees of complexity.&nbsp;</p><div><figure><a target="_blank" href="https://cdn.substack.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F3051da8e-aaca-477b-93d1-96e243d91b22_3846x1168.png"><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F3051da8e-aaca-477b-93d1-96e243d91b22_3846x1168.png" data-attrs="{&quot;src&quot;:&quot;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/3051da8e-aaca-477b-93d1-96e243d91b22_3846x1168.png&quot;,&quot;height&quot;:442,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:172810,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null}" alt=""></a></figure></div><p>There is a pithy saying - “<em><strong>All models are wrong, some are useful</strong></em>.” The model I have described here is not perfect. The skills and responsibilities needed at different levels are at a continuum, not discrete. I merely aim to expose you to the different abstractions that engineers operate in based on where they are in their career. I hope you found this useful.</p><p>If you are here, follow me on <a href="https://twitter.com/sidsarda">twitter</a>.</p></div></div>]]>
            </description>
            <link>https://www.siddharthsarda.com/p/developer-progression-as-a-function</link>
            <guid isPermaLink="false">hacker-news-small-sites-25586471</guid>
            <pubDate>Wed, 30 Dec 2020 21:39:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Ditching Excel for Python in a legacy industry]]>
            </title>
            <description>
<![CDATA[
Score 297 | Comments 260 (<a href="https://news.ycombinator.com/item?id=25586063">thread link</a>) | @afkmango
<br/>
December 30, 2020 | https://amypeniston.com/ditching-excel-for-python/ | <a href="https://web.archive.org/web/*/https://amypeniston.com/ditching-excel-for-python/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="wrapper">
  <div id="content">
    <div>
      

<p>I’ve been in a reflective mood lately, probably because it’s the end of a very eventful year. Change is all around us and technology is the enabler.</p>



<p>On that note, I’ve been thinking a lot about my own experiences with technology-driven change in the reinsurance industry, where I worked as an analyst from 2017 until recently.</p>



<p>During these three short years, I observed a radical shift in data analysis methodologies. Excel-based models, which had seemed top-of-the-line suddenly were too slow and too rigid; Integration with 3rd party data sources, which was once a luxury, became the norm; And analysts began to utilize scripts to accomplish many labor-intensive tasks typically performed by hand or in spreadsheets.</p>



<p>Enabling this change is a suite of accessible Python-powered tools. These technologies are rapidly displacing the old way of doing things, ushering in a new wave of reinsurance models and the talent needed to support them.</p>



<p>Admittedly, the following observations do come from a very niche industry. But I believe that the broader trends discussed here will also apply to other legacy companies and sectors.</p>



<p>In this post, I explore the following topics:</p>



<ul><li><strong>Section 1</strong> – An introduction to reinsurance</li><li><strong>Section 2 – </strong>The need for technological disruption in the reinsurance industry</li><li><strong>Sections 3 to 5</strong> – How Python is replacing Excel</li><li><strong>Section 6 </strong>– Arguments against adopting new technologies</li><li><strong>Section 7</strong> – The evolution of the reinsurance industry</li></ul>



<p>If you are curious about the transition from Excel to Python but aren’t interested in reinsurance, skip to section 3.</p>



<p>Without further ado, let’s get into it.</p>



<figure><img width="1024" height="406" src="https://amypeniston.com/downloads/ditching-excel-for-python-1024x406.jpg" data-src="https://amypeniston.com/downloads/ditching-excel-for-python-1024x406.jpg" alt="" data-srcset="https://amypeniston.com/downloads/ditching-excel-for-python-1024x406.jpg 1024w, https://amypeniston.com/downloads/ditching-excel-for-python-300x119.jpg 300w, https://amypeniston.com/downloads/ditching-excel-for-python-768x304.jpg 768w, https://amypeniston.com/downloads/ditching-excel-for-python.jpg 1500w" data-sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://amypeniston.com/downloads/ditching-excel-for-python-1024x406.jpg 1024w, https://amypeniston.com/downloads/ditching-excel-for-python-300x119.jpg 300w, https://amypeniston.com/downloads/ditching-excel-for-python-768x304.jpg 768w, https://amypeniston.com/downloads/ditching-excel-for-python.jpg 1500w"></figure>



<h2>1. Reinsurance, from an analyst’s perspective</h2>



<p>Most people understand insurance, but few have heard of its rather exotic sounding cousin: reinsurance. So, before I begin, here’s a quick intro:</p>



<p>Just as individuals transfer risk to insurers in exchange for a premium, insurers too must mitigate their risk by transferring some or all of their liabilities to one or more reinsurance companies. This enables insurers to protect themselves in the case of a large event, such as a hurricane, which affects many individual policyholders. Without reinsurers, insurance companies would not be able to survive catastrophes and would be much more risk averse, ultimately impacting the end consumer.</p>



<p>Reinsurance programs come in a variety of flavors to suit the need of the reinsured. I’ll spare you the details but suffice it to say that all potential reinsurance programs must first be analyzed. In industry speak, this is the process of “pricing a deal”.</p>



<p>For each deal, brokers gather relevant data from the insurance companies and send it to potential reinsurers as a “submission”. It is the underwriting analyst’s responsibility to parse this data, enter it into Excel-based models and produce a number.</p>



<p>This number, the loss ratio, represents the expected loss divided by the total premium and typically ranges between 10% to 150+%. LRs above 100% mean that the premium is not sufficient to cover the losses that we expect based on our model. In other words, we’d be writing the deal at a loss.</p>



<p>In reality, reinsurance companies have pricing hurdles well below 100% because they have other money outflows to account for such as brokerage (intermediary fees) and G&amp;A (general and administrative expenses).</p>



<p>The point is, Excel is the key piece of software that enables underwriting teams to assess new business. Throughout the company, different teams use different models, each with different processes and different pricing hurdles. But the one common theme is that all of the models are based on Excel spreadsheets. That’s just how the industry works. Everyone uses Excel for everything.</p>



<p>Well, until recently.</p>



<figure><img width="1024" height="190" src="https://amypeniston.com/downloads/Image-4-1024x190.jpg" data-src="https://amypeniston.com/downloads/Image-4-1024x190.jpg" alt="" data-srcset="https://amypeniston.com/downloads/Image-4-1024x190.jpg 1024w, https://amypeniston.com/downloads/Image-4-300x56.jpg 300w, https://amypeniston.com/downloads/Image-4-768x142.jpg 768w, https://amypeniston.com/downloads/Image-4.jpg 1500w" data-sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://amypeniston.com/downloads/Image-4-1024x190.jpg 1024w, https://amypeniston.com/downloads/Image-4-300x56.jpg 300w, https://amypeniston.com/downloads/Image-4-768x142.jpg 768w, https://amypeniston.com/downloads/Image-4.jpg 1500w"></figure>



<h2>2. Change is coming</h2>



<p>In an industry that is notoriously behind the times, a fundamental change is underway. This change is in response to new business demands, including:</p>



<ol><li>The desire to price increasingly complex deals with increasingly large datasets</li><li>The desire to integrate with 3rd party data to augment pricing models</li><li>The desire for faster models and robust codebases that adhere to software development best practices</li></ol>



<p>Excel fails miserably at these tasks.</p>



<p>First, expressing complex reinsurance deals requires tabs and tabs of structural details, interlinking formulas and limiting assumptions. It’s a mess to build and a headache to understand. Have a lot of data? That’s more tabs and formulas to add to the model. Performance slows dramatically and minutes of your life are wasted waiting for bloated spreadsheets to finally open.</p>



<p>Second, you’re forced to use the VBA programming language if you want to query external data or implement user-defined functionality. According to one Stack Overflow survey, VBA ranked “most dreaded” of all the languages, which wholly sums up my feelings. The development environment is not user friendly, the syntax confusing, there’s no support for unit testing –&nbsp;I could go on.</p>



<p>Third, Excel is fragile. Views and logic are intermingled, making it very hard to troubleshoot errors. Also, models aren’t put into source control, so you can’t restore an old version. Massive spreadsheets with dozens of tabs frequently crash without warning, much to the dismay of underwriting analysts (like myself).</p>



<p>During my three years in reinsurance, I witnessed a dire need for new tooling. And, from what I observed, it is clear that this tooling will be powered by Python.</p>







<figure><img width="1024" height="190" src="https://amypeniston.com/downloads/Image-2-1024x190.jpg" data-src="https://amypeniston.com/downloads/Image-2-1024x190.jpg" alt="" data-srcset="https://amypeniston.com/downloads/Image-2-1024x190.jpg 1024w, https://amypeniston.com/downloads/Image-2-300x56.jpg 300w, https://amypeniston.com/downloads/Image-2-768x142.jpg 768w, https://amypeniston.com/downloads/Image-2.jpg 1500w" data-sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://amypeniston.com/downloads/Image-2-1024x190.jpg 1024w, https://amypeniston.com/downloads/Image-2-300x56.jpg 300w, https://amypeniston.com/downloads/Image-2-768x142.jpg 768w, https://amypeniston.com/downloads/Image-2.jpg 1500w"></figure>



<h2>3. The future is Python</h2>



<p>As a technical underwriting analyst with programming skills, I was among the first to build and benefit from what I think are the next generation of pricing tools. These tools fall into two main categories:</p>



<ul><li>Excel models running Python code</li><li>Python notebooks in the browser</li></ul>



<p>Both options offer enhanced analysis capabilities while still catering to a non-technical or semi-technical end user.</p>



<p>Now, let’s explore each technology in more detail.</p>



<h2>4. Excel models running Python code</h2>



<p>The first category of new technology is based on augmentation. Rather than adding VBA code to your Excel spreadsheet, you can use Python instead. This is possible thanks to 3rd party Excel add-ins such <a href="https://www.pyxll.com/" target="_blank" rel="noreferrer noopener">PyXLL</a>, which brings the power of Python data analysis into the humble spreadsheet.</p>



<p>When you open Excel, the add-in makes your Python code accessible either as functions or as macros. This means that you can write Python code in the development environment of your choice, add unit tests, integrate with 3rd party libraries and push to source control.</p>



<p>PyXLL facilitated a step change in how we construct reinsurance models. Specifically, here’s how our setup looked before and after augmenting our model with Python:</p>



<figure><table><tbody><tr><td><strong>Before Python</strong></td><td><strong>After Python</strong></td></tr><tr><td>We used an Excel spreadsheet-based model with dozens of tabs containing complex formulas, endless pivot tables and unintelligible VBA code.</td><td>The tangled mess of VBA was re-written into independent Python modules, each of which performs a distinct function.</td></tr><tr><td>The spreadsheet took 30+ seconds to open.</td><td>The Excel spreadsheet is now just a view, so it is lightweight and quick to open.</td></tr><tr><td>There was no visibility into errors. “Debugging” meant manually breaking apart lengthy Excel formulas.</td><td>The new model logic is testable and can be upgraded independently.</td></tr><tr><td>We were limited by the assumptions made when the model was first created, with little ability to add new features.</td><td>The codebase lives in source control, enabling multiple collaborators to work in tandem.</td></tr><tr><td></td><td>Developers can use their preferred development environment.</td></tr><tr><td></td><td>A robust peer review process helps to perpetuate high quality code.</td></tr></tbody></table></figure>



<p>Using PyXLL, we built an underwriting pricing model powered entirely by Python code. We were able to express structural complexities of deals at a level never before achieved. And we were able to add simulation-based pricing techniques that simply cannot be done using spreadsheets alone.</p>



<p>The impact of PyXLL on how we build models and ultimately price business cannot be understated.</p>



<p>Which leads us to the second technology that is changing the way we perform underwriting data analysis…</p>



<figure><img width="1024" height="190" src="https://amypeniston.com/downloads/Image-3-1024x190.jpg" data-src="https://amypeniston.com/downloads/Image-3-1024x190.jpg" alt="" data-srcset="https://amypeniston.com/downloads/Image-3-1024x190.jpg 1024w, https://amypeniston.com/downloads/Image-3-300x56.jpg 300w, https://amypeniston.com/downloads/Image-3-768x142.jpg 768w, https://amypeniston.com/downloads/Image-3.jpg 1500w" data-sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://amypeniston.com/downloads/Image-3-1024x190.jpg 1024w, https://amypeniston.com/downloads/Image-3-300x56.jpg 300w, https://amypeniston.com/downloads/Image-3-768x142.jpg 768w, https://amypeniston.com/downloads/Image-3.jpg 1500w"></figure>



<h2>5. Python notebooks in the browser</h2>



<p>The second novel approach to reinsurance risk assessment and pricing is enabled via Python notebooks. These are web-based documents that can contain narrative text, live code, charts and visuals, plus results from your data analysis. </p>



<p>Python notebooks are all about collaboration, visualization and rapid iteration. They are a way to execute code with minimal setup and overhead, making it easier for new programmers to explore data outside of Excel. One of my favorite parts of notebooks is how easy it is to access your data, whether that’s from a file, SQL databases or an external source.</p>



<p>Let’s look at what a data analysis project looked like for me with and without Python notebooks:</p>



<figure><table><tbody><tr><td><strong>Without Python Notebooks</strong></td><td><strong>With Python Notebooks</strong></td></tr><tr><td>Manually query SQL databases and copy data into Excel. Keep data fresh by re-querying SQL and copying in new data.</td><td>Drop in a csv file, connect directly to an internal SQL database or utilize a 3rd party API to retrieve external data.</td></tr><tr><td>Perform analysis using Excel functions, pivot tables and VBA code. Functions quickly became unwieldy and difficult to troubleshoot.</td><td>Manipulate data easily and rapidly using Python libraries like <a href="https://pandas.pydata.org/" target="_blank" rel="noreferrer noopener">Pandas</a>.</td></tr><tr><td>Collaborate with a colleague by closing Excel and letting your colleague know that the spreadsheet is available for them to work on.</td><td>Collaborate with colleagues by sharing the notebook.</td></tr><tr><td>Copy tabular results and charts into Word or Powerpoint and add written narrative as necessary.</td><td>Export results to csv or generate professional-looking PDFs to give directly to key stakeholders.</td></tr><tr><td></td><td>Add explanatory narrative directly to the document alongside related code blocks.</td></tr><tr><td></td><td>Create interactive charts and static visuals using libraries like <a href="https://plotly.com/" target="_blank" rel="noreferrer noopener">Plotly</a>, <a href="https://seaborn.pydata.org/" target="_blank" rel="noreferrer noopener">seaborn</a> or <a href="https://matplotlib.org/" target="_blank" rel="noreferrer noopener">matplotlib</a>.</td></tr><tr><td></td><td>Leverage existing libraries like <a href="https://www.scipy.org/" target="_blank" rel="noreferrer noopener">SciPy</a> or <a href="https://scikit-learn.org/stable/" target="_blank" rel="noreferrer noopener">scikit-learn</a> to …</td></tr></tbody></table></figure></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://amypeniston.com/ditching-excel-for-python/">https://amypeniston.com/ditching-excel-for-python/</a></em></p>]]>
            </description>
            <link>https://amypeniston.com/ditching-excel-for-python/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25586063</guid>
            <pubDate>Wed, 30 Dec 2020 21:02:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Israeli startup claims Covid-19 likely originated in a lab, willing to bet on it]]>
            </title>
            <description>
<![CDATA[
Score 347 | Comments 347 (<a href="https://news.ycombinator.com/item?id=25585833">thread link</a>) | @delbarital
<br/>
December 30, 2020 | https://www.rootclaim.com/analysis/what-is-the-source-of-covid-19-sars-cov-2 | <a href="https://web.archive.org/web/*/https://www.rootclaim.com/analysis/what-is-the-source-of-covid-19-sars-cov-2">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.rootclaim.com/analysis/what-is-the-source-of-covid-19-sars-cov-2</link>
            <guid isPermaLink="false">hacker-news-small-sites-25585833</guid>
            <pubDate>Wed, 30 Dec 2020 20:41:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A little puzzle with printf() and C argument passing]]>
            </title>
            <description>
<![CDATA[
Score 11 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25584196">thread link</a>) | @emptybits
<br/>
December 30, 2020 | https://utcc.utoronto.ca/~cks/space/blog/programming/PrintfAndArgumentPassing | <a href="https://web.archive.org/web/*/https://utcc.utoronto.ca/~cks/space/blog/programming/PrintfAndArgumentPassing">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><h2>A little puzzle with <code>printf()</code> and C argument passing</h2>

	<p><small>December 28, 2020</small></p>
</div><div><p>In <a href="https://randomascii.wordpress.com/2020/08/30/the-easy-ones-three-bugs-hiding-in-the-open/">The Easy Ones â€“ Three Bugs Hiding in the Open</a>,
Bruce Dawson gave us a little C puzzle in passing:</p>

<blockquote><p>The <a href="https://en.wikipedia.org/wiki/Stdarg.h">variable arguments</a> in
printf formatting means that it is easy to get type mismatches. The
practical results vary considerably:</p>

<ol><li>printf(â€œ0x%08lxâ€�, p); // Printing a pointer as an int â€“ truncation or worse on 64-bit </li>
<li>printf(â€œ%d, %fâ€�, f, i); // Swapping float and int â€“ could print nonsense, or might actually work (!) </li>
<li>printf(â€œ%s %dâ€�, i, s); // Swapping the order of string and int â€“ will probably crash</li>
</ol>

<p>[...] (aside: understanding why #2 often
prints the desired result is a good <a href="https://en.wikipedia.org/wiki/Application_binary_interface">ABI</a> puzzle)</p>
</blockquote>

<p>I had to think about this for a bit, and then I realized why and
how it can work (and why similar integer versus float argument
confusion can also work for other functions, even ones with fixed
argument lists). What it comes down to is that in some <a href="https://en.wikipedia.org/wiki/Application_binary_interface">ABI</a>s,
arguments are passed in registers (at least early arguments, before
you run out of registers), and <strong>floating point arguments are passed
in different registers than integers (and pointers)</strong>.  This is
true even for functions that take variable arguments and will walk
through them using stdarg macros (or at least it can be, depending
on the ABI).</p>

<p>Because floating point and non floating point arguments are passed
in different sets of registers, what matters isn't the total order
of arguments but the order of floating point or non-fp arguments.
So here, regardless of where '%f' is in the printf format, it always
causes printf() to get the first floating point argument, which can
never be confused with an integer argument. Similarly, the first
'%d' causes printf() to look for the second non-fp argument,
regardless of where it was in the argument order; it could be at
the end of several floating point arguments and still work.</p>

<p>(The '%d' makes printf() look for the second non-fp argument because
the first one was the format string. In an ABI that passed pointers
in a separate place than integers, it would still work out, since now
the first '%d' would be looking for the first integer argument.)</p>

<p>Using the excellent services of godbolt.org, we can see this in
action on 64-bit x86 in <a href="https://godbolt.org/z/hYz9Gn">a very small example</a> (I used a very small example and a
decent optimization level to get clear, minimal assembly code). The
floating point argument is passed in <code>xmm0</code>, while the format string
and the integer argument are passed in <code>edi</code> and <code>esi</code> respectively
(I don't know what <code>eax</code> is doing, but it probably has something
to do with the ABI). A similar thing happens on 64-bit ARM v8 (aka
Aarch64), as we can also see on godbolt with <a href="https://godbolt.org/z/jrxz96">the same example on
Aarch64</a>.</p>

<p>(Based on <a href="https://wiki.cdot.senecacollege.ca/wiki/AArch64_Register_and_Instruction_Quick_Start">this page</a>,
the Aarch64 <code>x0</code> and <code>w1</code> are in the same set of registers. Apparently
<code>d0</code> is a 64-bit version of the first floating point register, from
<a href="https://armkeil.blob.core.windows.net/developer/Files/pdf/graphics-and-multimedia/ARMv8_InstructionSetOverview.pdf">here</a>
[pdf]. I wound up looking up all of this to be sure I understood
what was going on in the Aarch64 call, so I might as well write it
down here.)</p>

<p>Since pointers and integers are normally passed in the same set of
registers (at least on 64-bit x86 and Aarch64), we can also see why
the third example is very likely to fail. Since the same set of
registers is used for both argument types, it's possible to use an
integer argument as a pointer argument, with a segmentation fault
as the likely result. Similarly, we can predict that '<code>printf("%s
%f", f, s);</code>' might well work.</p>

<p>PS: This confusion can happen in any language that follows the C
ABI on a platform with this sort of split usage of registers (although
many languages may prevent this sort of argument type confusion).
Not all languages do; famously, Go currently passes all arguments
on the stack (as of Go 1.15 and soon Go 1.16).</p>
</div></div>]]>
            </description>
            <link>https://utcc.utoronto.ca/~cks/space/blog/programming/PrintfAndArgumentPassing</link>
            <guid isPermaLink="false">hacker-news-small-sites-25584196</guid>
            <pubDate>Wed, 30 Dec 2020 18:09:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Writing my first Gameboy Emulator]]>
            </title>
            <description>
<![CDATA[
Score 55 | Comments 18 (<a href="https://news.ycombinator.com/item?id=25583964">thread link</a>) | @RupertWiser
<br/>
December 30, 2020 | http://benwiser.com/blog/Writing-my-first-Gameboy-Emulator.html | <a href="https://web.archive.org/web/*/http://benwiser.com/blog/Writing-my-first-Gameboy-Emulator.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p id="h.f0zdx2p8r8sq"><span>Writing my first Gameboy Emulator</span></p><p><span>Okay so today’s post might be a bit of a cheat because I’m nowhere near complete on this project. But I’m really excited, because I just got the Tetris title screen working!</span></p><p><span><img alt="" src="https://lh6.googleusercontent.com/O9JwbvM5phtNcpgBj_2Un5C3QWVLTn24SWN43trTYG7ryH4enLNU6vbMzqMYwridlrhT8HswNBQNVUk19vTe87fsSwvJf0W-IsUEx6j8u13I1zKrktnzabBUzOf3lZcNor0lvGxV" title=""></span></p><p><span>This is the first time I’ve worked on an emulator and </span><span>oh boy</span><span>&nbsp;do I regret taking this long to get around to it. This has been one of the most rewarding projects I’ve worked on. Not only do I feel like I’m truly gaining a more fundamental understanding of the internals of a machine (which is sort of the point), but it is SO exciting suddenly seeing someone else’s software pop up on the screen.</span></p><p><span>I’m still working on this journey myself but I thought I’d share what I’ve done so far to hopefully encourage others to give this a go.</span></p><p><span>It all started with the bootrom. The gameboy didn’t have an operating system. It simply had a simple bootrom that showed you that famous Nintendo logo (which is actually </span><span><a href="https://www.youtube.com/watch?v=I1cUIGHZLGA">a novel DRM scheme</a></span><span>). It’s a very simple program that you can read line by line making it pretty easy to work out where I was going wrong. I started by making a “</span><span><a href="https://en.wikipedia.org/wiki/Central_processing_unit">CPU</a></span><span>” which was just a big ol switch statement going through </span><span><a href="https://meganesulli.com/generate-gb-opcodes/">each opcode</a></span><span>. This is definitely the most labour intensive part of the project. There are a lot of opcodes.</span></p><p><span>What you quickly discover while implementing opcodes is that the gameboy memory is basically just an array. So next I created registers and an “</span><span><a href="https://en.wikipedia.org/wiki/Memory_management_unit">MMU</a></span><span>” (the gameboy didn’t really have an MMU but this made things easier to manage). After around four days, I had the Nintendo logo rendering!</span></p><p><span><img alt="" src="https://lh6.googleusercontent.com/xRho4Dq1Fo1vUdM6BNTShSDwfBupG_CSlcrlkG2m9MhC_O75h1T1krLYA16RbOXUSH0BO-W_6u-2B6opnDkgzO3BYHmHJLxgrWbaPEJfbhumMPHAZp0acPT2iL_86tIv3zCLl6DB" title=""></span></p><p><span>Simple rendering is pretty straightforward. The Gameboy would write to a certain region of memory reserved for video so all you need to do is read from there to know what you should render. Once I got that far - I was completely hooked. My approach of just implementing more and more Gameboy hardware was working.</span></p><p><span>There are already a ton of resources that go into far more detail:</span></p><ul><li><span><a href="http://www.codeslinger.co.uk/pages/projects/gameboy.html">http://www.codeslinger.co.uk/pages/projects/gameboy.html</a></span></li><li><span><a href="http://imrannazar.com/GameBoy-Emulation-in-JavaScript:-The-CPU">http://imrannazar.com/GameBoy-Emulation-in-JavaScript:-The-CPU</a></span></li><li><span><a href="https://blog.ryanlevick.com/DMG-01/public/book/">https://blog.ryanlevick.com/DMG-01/public/book/</a></span></li></ul><p><span>If you have the time and you’re interested, I would strongly suggest you give this project a go. It is very fun. Happy coding!</span></p><p><span>You can find the code here:</span></p><p><span><a href="https://gitlab.com/BenWiser/gameboy-emulator">https://gitlab.com/BenWiser/gameboy-emulator</a></span></p></div></div>]]>
            </description>
            <link>http://benwiser.com/blog/Writing-my-first-Gameboy-Emulator.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25583964</guid>
            <pubDate>Wed, 30 Dec 2020 17:52:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Spirals, Snowflakes and Trees: Recursion in Pictures]]>
            </title>
            <description>
<![CDATA[
Score 105 | Comments 12 (<a href="https://news.ycombinator.com/item?id=25583631">thread link</a>) | @nbaksalyar
<br/>
December 30, 2020 | http://learn.hfm.io/fractals.html | <a href="https://web.archive.org/web/*/http://learn.hfm.io/fractals.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p>©2019 Applicative, Utrecht, The Netherlands. All Rights Reserved.</p>
<p>Apple, the Apple logo, Mac and OS X are trademarks of Apple Inc., registered in the U.S. and other countries. App Store is a service mark of Apple Inc.</p>
</div></div>]]>
            </description>
            <link>http://learn.hfm.io/fractals.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25583631</guid>
            <pubDate>Wed, 30 Dec 2020 17:27:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Riding the Indie Business Rollercoaster My 2020 year in review]]>
            </title>
            <description>
<![CDATA[
Score 32 | Comments 5 (<a href="https://news.ycombinator.com/item?id=25583543">thread link</a>) | @amrrs
<br/>
December 30, 2020 | https://www.coryzue.com/writing/2020/ | <a href="https://web.archive.org/web/*/https://www.coryzue.com/writing/2020/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
                <p><em>This is the fourth installment of my “year in review” series. 
For a recap, here’s <a href="https://www.coryzue.com/writing/master-plan/">2019</a>,
<a href="https://www.coryzue.com/writing/a-tale-of-two-years/">2018</a> 
and <a href="https://www.coryzue.com/writing/the-year-everything-changed/">2017</a>.</em></p>

<p>2020 was my fourth year of building my own internet businesses.
Like everyone else, my 2020 did <em>not</em> go according to plan.
And yet, things worked out in the end.</p>

<p>It was a year of big swings: starting with a taste of celebrity—followed by 
the collapse of my biggest business—and closing with record-breaking success.
Eventually I ended up almost exactly where I planned,
only the route was totally unexpected.</p>

<p>Here’s a recap of my 2020 in nine pictures.</p>

<h4 id="january-officially-an-indie-hacker">January: officially an Indie Hacker!</h4>

<p>In January, I met and recorded a podcast with <a href="https://twitter.com/csallen">Courtland Allen</a>,
founder of <a href="https://www.indiehackers.com/">Indie Hackers</a> and a hero of mine. 
When <a href="https://www.indiehackers.com/podcast/147-cory-zue-of-place-card-me">the podcast aired</a>,
I had a tiny taste of celebrity, hearing from people throughout the Twitter-verse
who were inspired by my story.
It was the most fun moment of my Indie Hacking career.</p>

<p><img src="https://www.coryzue.com/images/first-subscription/me-and-courtland.jpg" alt="Meeting Courtland Allen"></p>

<p>Me and Courtland Allen in his Cape Town Airbnb. January, 2020.</p>

<p>Courtland also convinced me to double down on my <a href="https://www.placecard.me/">wedding place card app</a>—called Place Card Me—leading
to <a href="https://www.coryzue.com/writing/first-subscription/">my first ever subscription revenue online</a>.</p>

<p>The year was looking good!</p>

<h4 id="march-the-pandemic-shakes-things-up">March: the pandemic shakes things up</h4>

<p>Fast forward to mid-March, and the world decided to take Covid-19 very seriously, very fast.</p>

<p>Place Card Me—my primary side-business—saw its revenue plummet to $0 almost overnight.
Not seeing a way to pivot, I decided to pause work on the project indefinitely—now
9 months and counting—and shift my focus to <a href="https://www.saaspegasus.com/">Pegasus, my Django boilerplate for SaaS apps</a>.
Sorry, Courtland!</p>

<p><img src="https://www.coryzue.com/images/retros/misc/place-card-me-5-weeks-corona.png" alt="Place Card Me Revenue Feb-March"></p>

<p>Place Card Me’s revenue, late Feb - April 1. It has sinced picked up a bit, but remains
well off 2019’s numbers.</p>

<p>Meanwhile, South Africa—where I live—introduced one of the strictest lockdowns in the world,
including banning alcohol sales and disallowing outdoor exercise.
I had to resort to running in circles around my flat.</p>

<p><img src="https://www.coryzue.com/images/2020/lockdown-run.png" alt="Lockdown Run"></p>

<p>My lockdown running route. Hundreds of circles around my small flat. March, 2020.</p>

<p>The lockdown also took away our childcare, so my wife and I split the work day in half.
My productive hours ended at noon, most of my time went to my day job,
and my side-businesses languished.</p>

<h4 id="may-my-first-record-breaking-month-of-the-year">May: my first record-breaking month of the year</h4>

<p>In May we got childcare back and for the first time in months I had time for proactive work.</p>

<p>I started by <a href="https://www.coryzue.com/writing/may-2020/">experimenting with some pricing changes</a> 
leading to Pegasus earning over $4,000—more than any of my products had ever earned in a single month.
I had to re-do the axes on my <a href="https://www.coryzue.com/open">side-project dashboard</a>—where I track
my product revenue and effort—to accommodate the new high.</p>

<p><img src="https://www.coryzue.com/images/retros/misc/pegasus-y-axis.png" alt="Pegasus Breaking the Chart"></p>

<p>Pegasus income breaks the chart on my <a href="https://www.coryzue.com/open/">side project dashboard</a>. May, 2020.</p>

<h4 id="july-august-distractions-and-failure">July-August: distractions and failure</h4>

<p>July and August saw my biggest divergence of the year.</p>

<p>Thinking it would be a good opportunity to exercise Pegasus, I decided to build and launch
a new product to provide <a href="https://repostory.app/">code review analytics for Github repositories</a>.</p>

<p>Unfortunately, before I finished MVP I realized the project was too ambitious for the 
amount of time I was willing to devote to it.
So, following a lackluster launch, and seeing a long road ahead, 
<a href="https://www.coryzue.com/writing/aug-2020/">I decided to stop working on it indefinitely</a>.</p>

<p><img src="https://www.coryzue.com/images/2020/repostory-social.png" alt="RepoStory"></p>

<p>RepoStory: my failed experiment building code review analytics product, launched to no one in August.</p>

<p>I still think the project has potential, but for now it’s lying idle.</p>

<h4 id="september-hello-world">September: hello world!</h4>

<p>September marked the arrival of our new son Victor into the world.
I learned that <a href="https://www.coryzue.com/writing/new-parent-again/">being a parent is easier the second time around</a>—except
for the <em>other</em> kid.</p>

<p><img src="https://www.coryzue.com/images/new-parent-again/victor-sleep.jpg" alt="Hello Victor"></p>

<p>Our new son Victor, born September 7, 2020.</p>

<p>Meanwhile, on paternity leave I stumbled upon a diagram labeled as <a href="https://en.wikipedia.org/wiki/Ikigai">Ikigai</a>—that 
I later learned was <em>not</em> Ikigai—that made me question about my chosen career.</p>

<p>Specifically, I felt like I was doing well with everything <a href="https://www.coryzue.com/writing/ikigai/">except possibly “what the world needs”</a>.</p>

<p><img src="https://www.coryzue.com/images/2020/not-ikigai.jpg" alt="Not Ikigai"></p>

<p>This diagram, often attributed as the Japanese concept of Ikigai, was actually
created by <a href="https://twitter.com/cosmograma">Andrés Zuzunaga</a>.</p>

<p>So, I devoted a chunk of the last three months of the year to trying to explore the topic of a “meaningful” life
and career more seriously.</p>

<p>But, <a href="https://www.coryzue.com/writing/how-to-save-the-world/">turns out this is hard</a>!</p>

<p>I’ll let you know if I figure it out.</p>

<h4 id="november-another-record-breaking-month">November: another record-breaking month</h4>

<p>Back on the business-side of things, at the end of November, I ran an impulse Black Friday sale,
leading to another record-breaking month for Pegasus and 
me—outstripping my previous monthly high by almost $3,000.</p>

<p><img src="https://www.coryzue.com/images/black-friday/total-profits-social.png" alt="Black Friday"></p>

<p>The massive spike from the Pegasus Black Friday sale. November, 2020.</p>

<p>A couple weeks later, <a href="https://www.coryzue.com/writing/black-friday/">my write-up on the sale</a> made 
the front page of <a href="https://news.ycombinator.com/">Hacker News</a>, resulting in about 10,000
visitors to my website and leading to another few Pegasus sales.</p>

<p>After the whole saga, I was suddenly within reach of my 2020 profit target of $42k that
I’d all-but abandoned post-Covid.</p>

<h4 id="december-rr">December: R&amp;R</h4>

<p>Finally, rounding out the year amidst another Covid surge and lockdown in South Africa
with the family and some time off.</p>

<p><img src="https://www.coryzue.com/images/2020/family-holidays.jpg" alt="Family Holidays"></p>

<p>While alcohol sales are again closed in South Africa, at least the national parks are open. December, 2020.</p>

<h2 id="profits">Profits</h2>

<p>When all was said and done, <strong>total profits on the year from personal projects came in just over $43,000</strong>—or
about $1k higher than <a href="https://www.coryzue.com/writing/master-plan/">my goal set in January</a>.
Given how hard the pandemic hit Place Card Me, I’m quite proud to have still hit that target.</p>

<p>Here’s the last four years of product income—broken out by product.</p>

<p><img src="https://www.coryzue.com/images/2020/profits-by-year.png" alt="Profits by year"></p>

<p>Annual profits by product. Now available on my <a href="https://www.coryzue.com/open/">side-project dashboard</a>.</p>

<p>Place Card Me ended up down about 42% on the year, but Pegasus more than made up for it,
growing from $4,000 to almost $30,000 in a single year—or about <em>double</em> 
what I had forecasted at the start of the year.</p>

<p>More on this later.</p>

<h2 id="time-spend">Time spend</h2>

<p>I logged just under 2,000 hours this year. 
This works out almost exactly to a standard 40-hour-a-week, 52-week work-year,
which makes it easier to think about the time distribution.</p>

<p><img src="https://www.coryzue.com/images/2020/2020-time.png" alt="2020 time"></p>

<p>In terms of a calendar year breakdown, about four months went to my day job at Dimagi,
three months went to Pegasus, six weeks went to email and writing,
another five weeks went to exercise(!), and then the rest fell into smaller buckets.</p>

<p>I’m happy with this breakdown, though I would prefer if the amount of “day job” time was a bit
less and the amount of “exploration” time was a bit more.
Something to think about for 2021.</p>

<p>Speaking of which…</p>

<h2 id="the-year-ahead">The year ahead</h2>

<p>If 2020 was the year of Pegasus then 2021 will be the year of…well…also Pegasus.</p>

<p>Yep, for the third year running, <strong>I’m planning for Pegasus to be my main hustle</strong>.</p>

<p>Why?</p>

<p><em>Because it still feels like Pegasus is in its first act</em>.</p>

<p>A year into Place Card Me the product felt basically complete.
I could add features, improve marketing, etc. but there weren’t any easy ways to grow it without 
fundamentally changing the product in some way.
Place Card Me made place cards well. Where do you go from there?</p>

<p>Pegasus on the other hand, seems to have limitless possibility.
The core product itself can continue getting better, with lots of features to add and improvements to 
make—some of which are already in flight. Plus, it’s fun as hell.</p>

<p>But even Pegasus itself is just the beginning.</p>

<p>Could Pegasus have a plug-in marketplace where other developers can earn money extending it?
Could Pegasus have a jobs board to connect Django developers to my customers who need help on their projects?
Could Pegasus offer Django courses or books?
Or a hosted way to deploy your Django apps to the cloud?</p>

<p>Much like <a href="https://www.indiehackers.com/podcast/183-chris-oliver-of-gorails">Chris Oliver has done for Ruby on Rails</a>, 
there appear to be an infinite amount of Pegasus-adjacent opportunities to create new products, offerings,
and build out the Pegasus ecosystem—all of which are aligned with each other.</p>

<p>So yeah. Already my most profitable product by a lot and still in act one.
Hopefully exciting times ahead!</p>

<h2 id="2021-targets">2021 Targets</h2>

<p>The other big decision I’ve made about 2021 is that it’s time to flip the narrative 
of what I’ve been doing.</p>

<p>For the last four years I’ve thought of myself as a professional developer/freelancer who also played around
on the internet trying to make money from side-hustles.</p>

<p>But barring an unexpected turn of events—<em>I expect 2021 to be the first year I make
the majority of my income from my own businesses</em>.
A change I hope just might hold for the rest of my life.</p>

<p>In other words, <em>the side hustles have become the main hustle.</em>
<strong>I’m no longer a <em>side-project</em> entrepreneur. I’m a mother-fucking <em>real entrepreneur</em>.</strong></p>

<p>So, here are my targets for 2020:</p>

<ol>
  <li>Earn $65k Profit from personal projects.</li>
  <li>Spend the majority of my time working for myself.</li>
</ol>

<p>Time to own this thing!
I’m looking forward to it.</p>

<hr>

<p>If you made it all the way here, thanks so much for reading. 
To see how this all works out, you can <a href="https://twitter.com/czue">follow me on Twitter</a> 
or subscribe for email updates below.</p>


            </div></div>]]>
            </description>
            <link>https://www.coryzue.com/writing/2020/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25583543</guid>
            <pubDate>Wed, 30 Dec 2020 17:18:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Betting the Company on ClojureScript]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25583170">thread link</a>) | @grzm
<br/>
December 30, 2020 | https://vouch.io/betting-the-company-on-clojurescript/ | <a href="https://web.archive.org/web/*/https://vouch.io/betting-the-company-on-clojurescript/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="primary">

    <article>

        

        <div>

            
<h2>Joy of Lisp.</h2>

<p>Ten years ago myself, Ray McDermott and Kristof Sajdak fell in love with functional programming; we marveled at its ease of expression, simplicity, and immutable data structures.</p>

<p>After reading the now classic <a href="https://web.mit.edu/alexmv/6.037/sicp.pdf" title="[Structure and Interpretation of Computer Programs]" target="new" rel="noopener noreferrer">Structure and Interpretation of Computer Programs</a>, this only made functional programming more attractive.  It seemed to be what we had been missing in the typical enterprise landscape, which at that time, was full of Java and .Net. It was a literal <em>where have you been all my life</em> moment as the beauty of it struck a chord with all of us.</p>

<p>From there, we never looked back – with our eyes now wide open, we had seen the promise of the future, and the current languages just wouldn’t cut it any longer.  Outside of our world, other factors that contributed to functional languages’ perfect timing for emergence included:</p>

<ul>
<li>Moore’s Law was topping out</li>
<li>Lower cost multi-core CPUs were now mainstream</li>
<li>Parallel architectures were appearing, and</li>
<li>Jaded developers, were frustrated with their languages</li>
</ul>

<p>Martin Odersky’s Scala programming language was the subject of significant press attention and turned many people like us onto the possibility of using functional programming for the enterprise, but it wasn’t quite right, it was’t a Lisp.</p>

<h2>Hello Clojure.</h2>

<pre><code>(ns hello-clojure.core)
(defn -main [&amp; args]
    (println "Hello, Clojure!"=))
</code>
</pre>

<p>Around this same period, Rich Hickey’s Clojure came to our attention, with the simplicity of Lisp, a REPL, immutability and, critically, first-class host language interop. With Interop, we were no longer in a walled garden that restricted so many other, purer implementations. Rich’s pragmatic choices and the resultant capabilities of Clojure ticked all the boxes. It also seemed to do the impossible: re-invigorating and exciting the development teams.</p>

<p>We started using Clojure where we could and where it proved viable.  Areas where we identified uses were primarily in applications where there was little or no existing code in place and no overriding requirement to adhere to a corporate standard. No going back now, we were all in.</p>

<h2>Enter ClojureScript.</h2>

<pre><code>
(ns todomvc.views
  (:require [reagent.core :as reagent]
            [re-frame.core :refer [subscribe dispatch]]
            [clojure.string :as str]))
</code>
</pre>

<p>ClojureScript goes everywhere; it can get to places that Clojure can’t go. It does this by piggybacking on the reach claim from JavaScript, and we can keep it functional.</p>

<p>We want our product to be able to reach any possible location, inside a car key fob, IoT devices, smart homes, and cities. ClojureScript is now mature enough to use everywhere, but it wasn’t always this way of course.</p>

<p>Looking back to 2010, I wanted to go way more mobile, and I had a desire to make the companies’ tech more ubiquitous for it to be deployed on iOS/Android/Tractors/Cars and we couldn’t do this in a functional programming way. Ray was using Clojure on Cloud PaaS and Web, continuing to leverage the JVM and Clojure to achieve great things.  Kristof and I worked on making connected cars “Restful” and idempotent, and JavaScript &amp; JSON made that happen for us; there just wasn’t a way to do this with functional programming.</p>

<p>As good as Clojure was we couldn’t use it where we wanted and felt like it was a vast chasm to cross for the reach that we desired to become a reality.</p>

<p>What we didn’t know then is that two future members of our team where actively solving this problem.</p>

<p>Mike Fikes built <a href="https://github.com/mfikes/goby" title="Goby" target="new" rel="noopener noreferrer">Goby</a>, a hybrid iOS app technology using ClojureScript and Objective-C and released it into the App Store. I understand that Facebook’s Lee Byron saw this, and it probably inspired Facebook towards going in this direction. Coincidently, David Nolen was asked by Facebook to speak at the React.JS conference around the same time. This led to both Mike and David being granted access to the React Native Github repository, which was closed to the public as it was still alpha.  Subsequently, Mike became the first person to get <a href="https://twitter.com/mfikes/status/573918846890938368?lang=en" title="ClojureScript working with React Native" target="new" rel="noopener noreferrer">ClojureScript working with React Native.</a></p>

<p>Separately &amp; together Mike and David worked on projects such as:</p>

<ul>
<li><a href="https://github.com/omcljs/om/" title="Om" target="new" rel="noopener noreferrer">Om</a></li>
<li><a href="https://github.com/mfikes/ambly" title="Ambly" target="new" rel="noopener noreferrer">Ambly</a></li>
<li><a href="https://github.com/replete-repl/replete-ios" title="Replete" target="new" rel="noopener noreferrer">Replete</a></li>
<li><a href="https://github.com/planck-repl/planck" title="Planck" target="new" rel="noopener noreferrer">Planck</a></li>
<li>and of course the <a href="https://github.com/clojure/clojurescript" title="ClojureScript" target="new" rel="noopener noreferrer">ClojureScript</a> compiler itself</li>
</ul>

<p>They blazed a trail that we now take for granted.</p>

<p>We came into Vouch with a long-held belief of consuming technology where no competitive advantage was needed and where differentiation is not a critical factor; this allows us to move quickly without us needing to become experts in commodity technologies.</p>
<p>Therefore we stand on the shoulders of many industry giants. Examples of this would be <a href="https://github.com/bhauman/lein-figwheel" title="Figwheel" target="new" rel="noopener noreferrer">Figwheel</a>, created by Bruce Hauman, which has revolutionized the way we build UI, and Blockchain, and provided a way to create absolute trust.  To make our platform work with these great technologies, we needed flexibility and modularity for our technology.</p>

<p>Our approach has always been to use the right tool for the right job, first and foremost, it just so happens that that has been ClojureScript.</p>

<h2>Attracting World-Class Talent.</h2>

<p>We started Vouch with a core team, myself, Ray and Kristof, who had worked together for many years before Vouch.  We quickly came to a point where we needed to expand the development team with skilled engineers who shared our vision and passion for building the company we wanted to create.</p>

<p>A company’s product vision, culture, and outcomes are not the only considerations for attracting world-class engineers to join a team; technology choices are just as critical, which has been one of my maxims for success over the years:</p>

<blockquote>
<p><strong>Great people want to work on great teams using great technologies, to build great products.</strong></p>
</blockquote>

<p>While our team shares a common interest in Clojure/ClojureScript, more importantly, we all wanted to work within a great team, using great technologies, to build great products.</p>

<p>The team is growing and attracting seriously world-class talent faster than we can onboard them.  It might just be the best problem I have ever had to solve for. Recently Mike commented, <em>“Wouldn’t it be great if we could build a team that could make all the tools we wanted to use to develop our products?”,</em> I could not have agreed more.</p>

<h2>Community.</h2>

<p>The Vouch team began getting deeper into the  Clojure community by first attending and then speaking at conferences. Ray started to host the <a href="https://soundcloud.com/defn-771544745" title="DEFN" target="new" rel="noopener noreferrer">DEFN</a>  podcast, which led to an introduction and later joining of Mike Fikes to the Vouch team.  Mike then introduced David Nolen who subsequently joined the team.</p>

<p>ClojureScript is here to stay, loved by the team and obviously, we have David and Mike who are the lead committers of the language and compiler respectively.  Ray hosts the <a href="https://www.patreon.com/defn" title="DEFN" target="new" rel="noopener noreferrer">DEFN</a> podcast and also started <a href="https://www.youtube.com/channel/UC1UxEQuBvfLJgWR5tk_XIXA" title="Apropos" target="new" rel="noopener noreferrer">Apropos</a>. Our team speaks publicly and regularly at ClojureScript or related conferences. We invest in this language, we craft solutions using its strengths, we speak publicly about it, we educate people about it and most of all, we care for it.</p>

<h2>So are we actually betting the company on ClojureScript?</h2>

<p>In just 18 months with a small but highly skilled team, we have been able to conceive of, prototype, design, build and implement a breakthrough product that we believe will fundamentally alter the way that people, devices, software and processes interact digitally based on improving trust between those parties. I can honestly say that ClojureScript has been a substantial contributing factor to making this possible and in many ways, our product has become a poster child for the language.</p>

<p>ClojureScript is one of the most valuable tools available to us, and we use it where it makes sense to do so.  I’m not sure if we even consider this as a bet, but if it is, then it’s the safest bet we will ever make.</p>

        </div>

    </article>

</div></div>]]>
            </description>
            <link>https://vouch.io/betting-the-company-on-clojurescript/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25583170</guid>
            <pubDate>Wed, 30 Dec 2020 16:42:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Banking on Status]]>
            </title>
            <description>
<![CDATA[
Score 15 | Comments 3 (<a href="https://news.ycombinator.com/item?id=25583029">thread link</a>) | @saadalem
<br/>
December 30, 2020 | https://julian.digital/2020/12/03/banking-on-status/ | <a href="https://web.archive.org/web/*/https://julian.digital/2020/12/03/banking-on-status/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
 		
<h2>How Neobanks Should Monetize Status Signaling</h2>



<p><span>01</span> Intro</p>



<p>If you’ve been following this blog for a while, you probably know by now that one of my favorite topics to think and write about is “status signaling”.</p>



<p>Signaling explains most of our everyday actions: what clothes we wear, which universities we pick and which religion we subscribe to. Everything has a hidden signaling component with which we communicate our desired tribal affiliation.</p>



<p>In <a href="http://julian.digital/2020/03/28/signaling-as-a-service/">Signaling-as-a-Service</a>, I described the implications signaling has on the monetization of software businesses. For many traditional industries, monetizing the display of status is not a new concept. A Rolex watch, for example, is not better at telling the time than a cheap Casio watch. But a Rolex reveals something about its owners’ wealth and, thus, their status in society. It’s that status message that explains the difference in price.</p>



<p><img src="https://julian.digital/wp-content/uploads/2020/10/equaltime.png"></p><p>Similarly, driving a Prius says something about your views on climate change. A <em>Make America Great Again</em> cap reveals something about your political affiliations. And Nike athletic wear signals a healthy, pro-active lifestyle.</p>



<p>Software is at a crucial disadvantage compared to these physical products because of its intangibility. A fitness app also signals a healthy, pro-active lifestyle, but no one can see it because it only lives on your phone. Everyone can see your Nike gear whenever you wear it in public. Software can’t offer the same benefit. It doesn’t have a signaling distribution channel.</p>



<p>This is why there is no software equivalent of a Rolex watch or a Louis Vuitton handbag. People aren’t willing to spend money on things other people can’t see they spent money on.</p>



<p>But it doesn’t have to be that way. As software is eating the world, the lines between physical and digital products are becoming increasingly blurry. As I have pointed out in my original essay, one way for software companies to solve the signaling distribution problem is to add a physical element to their software product.</p>



<p>In this post I want to explore this idea a little bit further. Specifically, we’ll look at neobanks – and their opportunity to monetize credit card signaling.</p>



<p><span>02</span> Neobanks</p>



<p>In the last couple of years we have witnessed the birth and rise of a new startup vertical: neobanks.</p>



<p>Neobanks differ from traditional banks in two ways:</p>



<p>1) Rather than relying on a physical branch network, the entire banking experience is managed via an app</p>



<p>2) Instead of the <a href="https://www.youtube.com/watch?v=C-q4bEULG64">“how do you do, fellow kids”</a>-cringiness that ad campaigns of traditional banks usually invoke when they try to appeal to a younger audience, neobanks are actually perceived as cool. In fact, many of them feel more like lifestyle brands than banks or tech companies.</p>



<p><img src="https://julian.digital/wp-content/uploads/2020/12/1_26qGBSGmB3yaPD7nZJrFIg.gif">



<img src="https://julian.digital/wp-content/uploads/2020/12/lifestylebrand-1.png"></p><p>Interestingly though, neobanks still use one very traditional banking element: physical cards.</p>



<p>At first glance, this might seem counterintuitive. If you are building a mobile-first bank, why not offer virtual cards and let users pay with their phone? Why go through the hassle of producing and shipping physical cards?</p>



<p>The answer is – you guessed it – signaling.</p>



<p>Think about it: Paying for things (offline) is a social activity. It’s an interaction between at least you and a cashier or waiter. But ideally, in a dinner scenario for example, you are surrounded by other people you want to impress: a date, a group of friends, or work colleagues.</p>



<p>This makes the moment you take out your card to pay the bill a great opportunity to make a statement and build social capital.</p>



<p>If you look at neobanks out there today, it’s pretty obvious that signaling is in fact one of the main benefits they offer – and almost the only thing they monetize <span>(apart from interchange, of course)</span>:</p>



<ul><li>The premium subscriptions neobanks offer usually don’t win on features but solely on nicer looking cards. The <a href="https://n26.com/metal">N26</a> or <a href="https://revolut.com/metal">Revolut</a> Metal plans, for example, don’t offer any additional features that <em>really</em> justify the ~€15 / month price tag. They do include a nice looking metal card though – that’s what people pay for.</li><li>Relatedly, it seems like most of the innovation in the industry is happening in card design. The actual banking products are more or less interchangeable, what differs is whether the card comes in <a href="https://www.apple.com/apple-card/">titanium</a>, <a href="https://www.treecard.org/">wood</a>, or <a href="https://twitter.com/cashapp/status/1290694734529400832">glow-in-the-dark yellow</a>.</li><li>You may have noticed that the credit card number has moved from the front to the back of the card. This makes it easier for users to share photos of their cards on social media as an additional signaling distribution channel.</li></ul>



<p><img src="https://julian.digital/wp-content/uploads/2020/11/nocardnumber-1.png"></p><p>Neobanks are popping up like mushrooms after the rain at the moment and it’s unlikely that this trend will end any time soon. Thanks to banking-as-a-service providers, we’ll likely see a lot of non-banking-companies add banking functionalities and cards to their product offering.</p>



<p>There’s an old Twitter joke that every app evolves until it eventually becomes a chat app. The 2020 version of that joke is that every app evolves until it eventually becomes a bank.</p>



<p>When <a href="https://twitter.com/lehrjulian/status/1295024066869567488">I did some research on credit card designs</a> recently, I was surprised by the sheer amount of different neobanks already in existance. And yet, even though almost all of them offer well-designed cards, it’s shocking how similar they all are. It seems like all of them are focusing on the same target audience instead of differentiating their signaling messages.</p>



<p>Let me explain.</p>



<p><span>03</span> In-Groups, Out-Groups and Artificial Scarcity</p>



<p>In every signaling scenario there are two possible target audiences: An in-group and an out-group.</p>



<p><img src="https://julian.digital/wp-content/uploads/2020/10/groups.png"></p><p>The in-group is the tribe you want to join and signal your affiliation to. The out-group is everyone else – people you want to distance yourself from.</p>



<p><a href="https://www.fastcompany.com/90391587/why-we-dont-want-you-and-your-android-green-bubbles-in-our-imessage-chat">iMessage is a great illustration of this</a>: the chat bubble colors clearly indicate who belongs to the in-group (blue = iOS) and who is part of the out-group (green = Android). </p>



<p>It’s important to note that signaling in iMessage is limited to the in-group since these color codes are only visible for iOS users – Android users can’t see who in the group is using which operating system. </p>



<p>Signaling, however, grows stronger the larger the out-group is – as long as the out-group knows about the in-group. This is why luxury car manufacturers deliberately extend their advertising campaigns to people who will never be able to afford their cars: they are increasing the size of the out-group by educating people about the in-group.</p>



<p>At the same time, brands need to control the size of the in-group. The more exclusive the in-group, the higher the signaling strength and, thus, the monetization potential of a customer. </p>



<p>The easiest control mechanism for the size of the in-group is price. If you set the price high enough, few people will be able to afford the product. Ironically, this, in turn, justifies the high price.</p>



<p><img src="https://julian.digital/wp-content/uploads/2020/10/priceloop.png"></p><p>Alternatively, companies create artificial scarcity by setting a hard number on supply. Limited supply creates FOMO and hype which increases the size of the out-group and results in higher social status for members of the in-group. Artificial scarcity explains the price of Bitcoin, Pokémon trading cards and why people spend hours queuing in front of Supreme shops.</p>



<p>The problem with keeping the in-group small is that it also limits the number of potential customers and, thus, overall revenue potential. Companies need to walk a fine line between maximizing the number of customers while simultaneously maximizing the number of people they can (afford to) exclude.</p>



<p><span>04</span> What Neobanks Should Build</p>



<p>The problem with neobanks today is that they all focus on the same in-group. Here are the premium cards of some of the largest European challenger banks – notice any difference?</p>



<p><img src="https://julian.digital/wp-content/uploads/2020/10/metalcards.png"></p><p>It seems like everyone is trying to become the Apple of Banking – including <a href="https://www.apple.com/apple-card/">Apple itself</a>. The signaling messages are all about displaying economic power.</p>



<p>But we are slowly seeing new banking apps that are focusing on different audiences. For example, there are now a <a href="https://www.tomorrow.one/">handful of</a> <a href="https://blog.gohenry.com/uk/gohenry-news/meet-our-new-biodegradable-eco-card/">“green”</a> <a href="https://www.treecard.org/">neobanks</a> that help users signal environmental altruism. </p>



<p>Or how about <a href="https://www.razer.com/razer-card">this Razer Card</a> targeted at the gamer community?</p>



<p><img src="https://julian.digital/wp-content/uploads/2020/12/environment.png"></p><p>The question for these companies and their investors is whether the in-group is big enough to justify building an entire bank around it. Making the unit economics of a bank work requires a certain amount of users, but as we discussed earlier, the signaling strength decreases as the size of in-group increases.</p>



<p>So how do you solve this problem?<br>By introducing multiple in-groups.</p>



<p>See, the current model looks like this:</p>



<p><img src="https://julian.digital/wp-content/uploads/2020/10/neogroup01.png"></p><p>(In fact, given how undifferentiated most of the offerings and cards are, there are actually multiple neobanks within the same small in-group bubble.)</p>



<p>But what if one bank would target multiple, different in-groups?</p>



<p><img src="https://julian.digital/wp-content/uploads/2020/10/neogroup02.png"></p><p>For example, what if N26 had dedicated cards for soccer fans, hip-hop enthusiasts and gamers? Instead of focusing on just one signaling audience, their total addressable market would massively increase. </p>



<p>The way they would target these audiences is via brand collaborations. N26 does not have the necessary reputation in any of the above-mentioned areas to build credible signaling messages. It would not be able to build attractive in-groups on its own – but other brands could lend N26 their social capital. </p>



<p>Apple has long worked with <a href="https://www.apple.com/lae/product-red/">RED</a>, IKEA recently <a href="https://www.highsnobiety.com/p/virgil-abloh-ikea-collaboration-best-look/">teamed up with Virgil Abloh</a>, and <a href="https://www.headspace.com/partners/nike-partnerships">Nike partners with Headspace</a>. Why wouldn’t this concept work for neobanks?</p>



<p>What would <strong>N26 x Manchester United</strong> look like? <br>Or <strong>Chime x Supreme</strong>? <br>Or <strong>Revolut x 100 Thieves</strong>?</p>



<p>Because of a bigger target audience overall, individual in-groups could be kept smaller. Cards could be <a href="https://thegeneralist.substack.com/p/scarcity-as-an-api">released as limited edition drops</a> transforming them into collectibles, which would justify a higher price tag per card.</p>



<p>It’s worth noting that different signaling audiences are not mutually exclusive. We don’t just subscribe to a single in-group – our <a href="http://julian.digital/2020/09/25/is-this-real-life/">identities are prismatic</a>. This means that some users might …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://julian.digital/2020/12/03/banking-on-status/">https://julian.digital/2020/12/03/banking-on-status/</a></em></p>]]>
            </description>
            <link>https://julian.digital/2020/12/03/banking-on-status/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25583029</guid>
            <pubDate>Wed, 30 Dec 2020 16:29:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Vaccines Are the Safest Medical Procedure We Have. Make Your Wager Wisely]]>
            </title>
            <description>
<![CDATA[
Score 66 | Comments 144 (<a href="https://news.ycombinator.com/item?id=25583025">thread link</a>) | @CapitalistCartr
<br/>
December 30, 2020 | http://m.nautil.us/blog/vaccines-are-the-safest-medical-procedure-we-have-make-your-wager-wisely | <a href="https://web.archive.org/web/*/http://m.nautil.us/blog/vaccines-are-the-safest-medical-procedure-we-have-make-your-wager-wisely">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
			

			<figure data-alt=""><img src="http://static.nautil.us/18054_51331fcd89d45304a118755678da4a8b.jpg" width="733" alt=""><figcaption><span><i>All drugs and treatments have side effects, but vaccines in general have the fewest.</i></span><span>Illustration by eamesBot / Shutterstock</span></figcaption></figure><p><span>I</span>n the late 1650’s, the French polymath and renowned scientist Blaise Pascal, having undergone a religious experience that transformed him into something of a zealot, suggested the following logical strategy regarding belief in God: If there is a God, then believing in him will ensure you an eternity of bliss, while not believing in him could earn you an eternal sentence to misery.&nbsp;<br></p><p>On the other hand, if there is no God, believing in him anyway will cost you very little, and not believing in him will mean nothing in the non-existent after life. Therefore, the only sensible bet is to believe in God. This has come to be known as <a href="http://nautil.us/blog/why-pascals-wager-is-eminently-modern" target="_blank">Pascal’s wager</a>.</p><p>It has a surprising number of applications beyond concerns for a comfortable afterlife. There are many things for which the value of believing something or not can be seen as a cost-versus-likely-benefit wager,&nbsp;often without regard to the actual truth of the matter. Since science does not profess to have a final truth, and in many areas freely admits its incomplete knowledge, Pascal’s wager can provide a useful method of deciding between two alternatives.</p><blockquote><p>All drugs and treatments have side effects, but vaccines in general have the fewest.</p> </blockquote><p>For example, it seems that a significant percentage of the population is suspicious of science, or so we are told. We often hear that some large number, approaching or exceeding half of Americans, do not believe in evolution. This seems remarkable on the face of it because there is no viable scientific opposition to evolution and it is widely accepted by biologists and other life scientists as being fundamental to understanding biology—from genetics to medicine.<br></p><p>What we are not often told is that most of those who answer negatively about believing in evolution nonetheless understand evolution—or at least the basics of it. They are not stupid, ignorant, or uninformed. They have simply made a Pascalian wager. What benefit, we might ask, is derived from believing in evolution rather than a <a href="http://nautil.us/blog/how-to-weed-creationism-out-of-schools" target="_blank">divine creation</a>? Unless you are a professional biologist, it is hard to see how this would affect your everyday life. On the other hand, professing a belief in Darwinian evolution over the biblical narrative will likely ostracize you from family, friends, co-workers, your church community—in short most of your social infrastructure. Place your bets.</p><p>Can we apply any of this to decisions over the current controversy surrounding vaccination—and in particular the newly arrived COVID-19 vaccine?</p><p>There are certainly reasons to be concerned about being vaccinated, and it would be a gross over-simplification to consider anyone who expresses reticence about taking a vaccine, this new vaccine in particular, as being just plain dumb or scientifically illiterate or gullible. They need be none of these things and still may be suspicious of the vaccine.<br></p><p>One issue is safety. The vaccine, any vaccine, is designed to mobilize your immune system, essentially to fool it into believing that there is an invading virus present and to mount an immune response. That way it will be ready when the real invasion comes, if it comes. This seems pretty sensible and preferable to going to war with an opponent you know nothing about. But still, it is fooling around with Mother Nature and some people are uneasy about that. Although it must be pointed out that the virus is not at all shy about fooling around with your immune system and many other parts of you, so letting it have its way is not good policy, either.</p><p>What about a vaccine made of genes? This vaccine is being produced by what is being touted as a new method using RNA—genes. While it is true that for entirely economic reasons, this is the first vaccine to be produced in this way, the method is not really new and the science that makes it possible has been developing over the last 40 years. So it’s not so radical as the press makes it seem.&nbsp;</p><p>But it is true that this method uses RNA, genetic material, to make the vaccine. We hear a lot about gene modification and the potential dangers associated with it. Why then am I going to allow RNA, genes, to be injected into me? The first thing to realize is that this is exactly what the virus does—so whether you get a vaccine or an infection, you are getting genes injected into you. The virus RNA encodes around 12 functional genes (by comparison humans and other mammals have around 25,000 genes). The virus only contains the genes to make a new virus—it does not have any of the capabilities of a normal cell to actually turn those genes into the proteins that make up the complete virus. It hijacks your cells to do this—and that’s how it sickens you, by forcing your cells to make new viruses instead of what they should be doing.</p><blockquote><p>Vaccines have fewer side effects than virtually any other drug you wouldn’t even think twice about taking.</p> </blockquote><p>Now the new vaccines have taken just one of those genes—the one that directs the production of the now infamous spike protein that appears on the surface of a normal virus—and injects just that one gene into your muscle cells, which then make that one single protein. Your immune system comes along and sees that weird protein and makes antibodies to it. These same antibodies will now recognize the spike protein on the surface of any viral particles that invade your body. We have effectively turned the virus into its own enemy.</p><p>The viral RNA that you are getting will decompose over a few days because RNA is not a stable molecule (that, by the way, is why the vaccine needs to be kept frozen) and it will no longer exist in your body. It could only become a permanent part of your genome if it were a DNA molecule instead of an RNA molecule—and even the chances of that happening would be chemically remote. So regardless of how it sounds, this may actually be the safest sort of vaccine to use. In the future it is likely that all vaccines will be made this way.</p><p><span>T</span>hen, of course, there is the issue of who is running this whole vaccine program—the government and the pharmaceutical industry. These are the guys who brought you opioid addiction, death by Vioxx, soaring drug prices, the worst health-care system in the developed world, regulations where you don’t need them and none where you do—am I really going to trust this cast of so-called “inept villains,” as some believe, to dictate my personal health choices? Do we know for sure that the claims of efficacy are real or just made up to sell some worthless procedure? It would not be the first time. (I would not, on the other hand, worry about Bill Gates having a chip inserted into you along with the vaccine—if you use any social media, navigational tools, or purchase anything online, then Bill Gates already knows more about you than he will get from any injectable chip. So that train has left the station.)</p><p>All this and a few lesser issues are worth a pause, for sure. But we must also look on the positive side of the ledger. Why trust science? Modern medicine and the science behind it has eliminated or dramatically lessened such scourges as smallpox, polio, cholera, chicken pox, measles, rabies, and dozens of other killer pathogens that had previously wiped out enormous numbers of people, in some cases significant parts of entire generations. Don’t we depend on science for much of the comfort and safety of our everyday lives? Isn’t science the way we heat our homes, drive to work, fly around the world, have dependable food? Yes, there is the bomb—but there is also anesthesia.<br></p><div id="inpagesub">
	<p>Get the <span>Nautilus</span> newsletter</p>
<p>
	The newest and most popular articles delivered right to your inbox!
</p>
			<!-- Begin MailChimp Signup Form -->
			




</div><p>When it comes to viruses, the only tool we have to fight them is vaccination. The only tool. Antibiotics are for bacteria, a completely different sort of creature. Sanitation beyond personal hand-washing is ineffective. Vaccines trick the immune system into recognizing the virus earlier than it would otherwise and protect normal cells from invasion by the virus. Tricking the immune system is understandably problematic for people who believe that their body knows best if it’s just kept healthy. This virus, as we have seen from the array of infected people that includes apparently healthy folks, unfortunately does not subscribe to that belief.</p><p>By a similar sort of reasoning, some people make the plausible error of calculating that the vaccine is 95 percent effective but the survival rate is 99 percent, so why not just let my natural resistance take care of this? Indeed, that might not be unreasonable thinking if we were talking about the common cold, but this virus has shown itself to be a tricky character, and we are not yet able to predict who gets a serious case and who a mild one. With those sorts of stakes, you shouldn’t wager on either of those numbers because they have nothing to do with&nbsp;<i>you</i>&nbsp;as an individual. Like flipping a coin, there is only a 1 percent chance of it coming up heads 6 times in a row. But if it has come up heads 5 times in a row, the probability of it coming up heads on the next flip is…still 50/50.&nbsp;</p><p>An even larger unknown is whether there may be long-term effects associated with SARS-Cov-2, as is the case for many viruses. The 1918 influenza virus has been linked to a subsequent two-three fold increase in Parkinson’s disease by a mechanism we still don’t understand. The virus that gives children chicken pox will hide out in a person’s body for 40 years or more, and then emerge as a painful, sometimes debilitating, case of shingles. The 99 percent survivability rate of this virus is meaningless if, 20 years from now, it causes some devastating pulmonary or brain disease.</p><p>The main upside to vaccines is that because they use your already existing defense system, they are surprisingly safe. Safer than antibiotics, which have numerous side effects, because they are not part of our normal make up and are …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://m.nautil.us/blog/vaccines-are-the-safest-medical-procedure-we-have-make-your-wager-wisely">http://m.nautil.us/blog/vaccines-are-the-safest-medical-procedure-we-have-make-your-wager-wisely</a></em></p>]]>
            </description>
            <link>http://m.nautil.us/blog/vaccines-are-the-safest-medical-procedure-we-have-make-your-wager-wisely</link>
            <guid isPermaLink="false">hacker-news-small-sites-25583025</guid>
            <pubDate>Wed, 30 Dec 2020 16:28:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Don't Use Protobuf for Telemetry]]>
            </title>
            <description>
<![CDATA[
Score 222 | Comments 185 (<a href="https://news.ycombinator.com/item?id=25582962">thread link</a>) | @simonpure
<br/>
December 30, 2020 | https://richardstartin.github.io/posts/dont-use-protobuf-for-telemetry | <a href="https://web.archive.org/web/*/https://richardstartin.github.io/posts/dont-use-protobuf-for-telemetry">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
    <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>Protobuf needs no introduction, but this post argues that you shouldn’t use it for telemetry.
The basic premise of this post is that a good telemetry library needs to be lightweight to avoid perturbing the application; inefficient diagnostic tools are self-defeating.
Unlike other formats, nested Protobuf messages cannot be written contiguously into a stream without significant buffering. 
The post doesn’t argue to never use Protobuf, but that the trade-off made by the <em>wire-format</em> itself, as opposed to any existing implementation, is unlikely to work for lightweight message senders.</p>

<h2 id="protobuf-java-is-a-little-heavy">Protobuf-java is a little heavy</h2>

<p>A few months ago I needed to become familiar with the Protobuf wire-format for a proof of concept.
The motivation for digging in to the wire-format, rather than just using <code>protobuf-java</code>, was the dimensions of the library, which I would need to bundle in an agent:</p>

<div><div><pre><code><span>$ </span><span>stat</span> <span>-c</span> %s protobuf-java-3.14.0.jar
1672950

<span>$ </span>jar <span>-tf</span> protobuf-java-3.14.0.jar | <span>grep</span> <span>'.class'</span> | <span>wc</span> <span>-l</span>
669
</code></pre></div></div>

<p>Just depending on the library adds 1.6MB and nearly 700 classes before you even generate your own message classes.
Since the deployment in question was an agent which can’t assume the presence of <code>protobuf-java</code> at runtime, there is no way to avoid bundling the extra 1.6MB.
Since the aforementioned agent implements <code>ClassLoader</code> isolation to avoid interfering with application class loading, even if <code>protobuf-java</code> <em>is</em> present at runtime, the classes would need to be loaded again by an isolated <code>ClassLoader</code>.</p>

<p>A tracer only needs to <em>produce</em> messages, so not all of those 669 classes (which doesn’t include your own generated classes) will get loaded, but a lot of them do.
Having since implemented library-neutral Protobuf serialisation in Datadog’s <a href="https://github.com/DataDog/sketches-java">sketches-java</a>, I have a reasonable <a href="https://github.com/DataDog/sketches-java/blob/master/src/jmh/java/com/datadoghq/sketch/ddsketch/benchmarks/Serialize.java">point of comparison</a> to show how many classes get loaded in a write-only context:</p>

<div><div><pre><code><span>@OutputTimeUnit</span><span>(</span><span>TimeUnit</span><span>.</span><span>MICROSECONDS</span><span>)</span>
<span>@BenchmarkMode</span><span>(</span><span>Mode</span><span>.</span><span>AverageTime</span><span>)</span>
<span>public</span> <span>class</span> <span>Serialize</span> <span>extends</span> <span>BuiltSketchState</span> <span>{</span>

  <span>@Benchmark</span>
  <span>public</span> <span>byte</span><span>[]</span> <span>serialize</span><span>()</span> <span>{</span>
    <span>return</span> <span>sketch</span><span>.</span><span>serialize</span><span>().</span><span>array</span><span>();</span>
  <span>}</span>

  <span>@Benchmark</span>
  <span>public</span> <span>byte</span><span>[]</span> <span>toProto</span><span>()</span> <span>{</span>
    <span>return</span> <span>DDSketchProtoBinding</span><span>.</span><span>toProto</span><span>(</span><span>sketch</span><span>).</span><span>toByteArray</span><span>();</span>
  <span>}</span>
<span>}</span>
</code></pre></div></div>

<blockquote>
  <p>Since I mention a Datadog library and am a Datadog employee, I make clear that none of the opinions presented in this post or elsewhere on this blog represent those of my employer.</p>
</blockquote>

<p>Each method produces identical bytes, and the purpose of the benchmark above is to compare speeds.
One of the methods relies on a single class consisting of fewer than 150 lines of code, including white-space, whereas the other depends on a large library.
For the record, the hand-written method <code>serialize</code> above is roughly 10x faster than using <code>protobuf-java</code>, but it’s not the point of this post. 
By running the benchmark for a single warmup iteration each, with the argument <code>-jvmArgsPrepend "-verbose:class"</code>, the classes which are loaded are logged, which I captured in separate files.
276 more classes are loaded when using <code>protobuf-java</code>:</p>

<div><div><pre><code><span>$ </span><span>wc</span> <span>-l</span> serialize.log 
1400 serialize.log
<span>$ </span><span>wc</span> <span>-l</span> to_proto.log 
1676 to_proto.log
</code></pre></div></div>

<p>If you work at a large organisation which has entirely embraced Protobuf, I would not suggest worrying about 1.6MB or a few hundred loaded classes; these costs quickly amortise as you use the library for more features.
However, your resource budget for a diagnostic agent which tells you what your application is doing and how it’s performing should be tiny, and I’m not sure <code>protobuf-java</code> can be made to fit in to it, given the isolation constraints for agents outlined above.</p>

<h2 id="length-delimiters-are-costly-to-produce">Length delimiters are costly to produce</h2>

<p>This meant that I needed to write my own (which is a lot easier than it sounds if you haven’t done this sort of thing before) so I had to read the only documentation there is on <a href="https://developers.google.com/protocol-buffers/docs/encoding">encoding</a>.
I couldn’t get the formatter I had written based on my first reading of this document to produce valid protobuf because I had skim-read the section on embedded messages, and because it includes a design decision that would never have occurred to me.
When I went back and read it again I was surprised to find that embedded messages are length-prefixed, but the length prefix is varint encoded, which means you don’t know how many bytes you need for the length until you’ve done the serialisation, and it’s recursive.</p>

<p>Length prefixes aren’t unusual in binary formats: BSON documents are prefixed by their sizes in bytes, meaning sub-documents need to be serialised recursively before their lengths can be written.
BSON makes this easy by not compressing the document length so you just leave 4 bytes for the length and come back and fill it in when popping document contexts (<a href="https://richardstartin.github.io/posts/shrinking-bson-documents">it can add up to a significant portion of your database though</a>).
Msgpack, for example, <em>does</em> apply prefix compression of embedded element lengths (e.g. maps and arrays) but the length is an element count, not a number of bytes, which makes streaming serialisation a lot easier to do.</p>

<p>Protobuf does both, and, consequently, there’s no way to produce nested Protobuf messages without doing something relatively expensive.
You must either maintain a stack and copy contents from frame to frame as they are popped, or pre-compute serialised lengths of nested elements recursively; it isn’t possible to simply write serialised output sequentially to a stream as it is with other formats. 
I abandoned the proof of concept when I found that a streaming zero-allocation msgpack codec I had written was around 6x faster than either <code>protobuf-java</code> or a handwritten Protobuf codec for messages with nesting.
Since I couldn’t remove the nesting in the messages I needed to produce, I blamed the wire-format and moved on.</p>

<p>People who actually know Protobuf already know this (it’s literally written in the encoding manual), and understand the benefits which arise from this cost elsewhere (e.g. implementing partial deserialisation is easy, easy to skip over sections of the message), but lots of people don’t seem to understand the cost model the wire-format imposes.
If they did, there would probably be a lot less nesting in Protobuf as used in the wild.</p>

<p>This more or less concludes my argument against using Protobuf for telemetry: if you find for yourself that producing Protobuf messages is costly, it’s not even a case of a third party library making the wrong trade-offs for your application; it’s the wire-format itself at fault.
If you want to ship telemetry data out of an application and aim to minimise the impact on the application, even if you implement your own zero-allocation, micro-optimised codec, you shouldn’t choose Protobuf.</p>

<p>This is a good opportunity to segue into describing the wire-format for Protobuf 3, filling in a couple of the gaps in <a href="https://developers.google.com/protocol-buffers/docs/encoding">Google’s encoding document</a>, but read the official document if you want to write your own.</p>

<h2 id="notes-on-the-wire-format">Notes on the wire format</h2>

<p>Protobuf’s wire format is really simple: it’s just a list of tagged key-value pairs. 
Since readers have a schema to refer to, ambiguity is permissible and advantageous.
The logical structure of a Protobuf message is as below, with each tag followed by some bytes associated with the tag.</p>

<div><div><pre><code>tag1:value1, tag3:value2, tag2:value3, ...
</code></pre></div></div>

<p>Here is a pseudo-Backus-Naur form of the wire format.</p>

<div><div><pre><code>body 	         ::= 	tagged_value*
tagged_value     ::=    tag value
tag              ::=    varint((field_number &lt;&lt; 3) | wire_type)
wire_type        ::=    VARINT | FIXED_64 | LENGTH_DELIMITED | GROUP_BEGIN | GROUP_END | FIXED_32
VARINT           ::=    0
FIXED_64         ::=    1
LENGTH_DELIMITED ::=    2
GROUP_BEGIN      ::=    3 (deprecated)
GROUP_END        ::=    4 (deprecated)
FIXED_32         ::=    5
value            ::=    varint | fixed_64 | length_delimited | fixed_32
fixed_64         ::=    double | long
length_delimited ::=    varint(N) byte{N}
fixed_32         ::=    float | int
</code></pre></div></div>

<p>Each data item has a tag, which contains the field number (as defined in the .proto file) and one of the four wire types still in use in Protobuf 3.
The tag is constructed by shifting the field number left by three bits and combining with the wire type, and then <em>varint-encoded</em> so it takes up less space.
Since there are only three bits for the wire type, there can only ever be eight wire types, and two have already been wasted on group begin and end markers (I don’t know the story behind these).
Given that <code>FIXED_32=5</code> with only two possible wire types left, I imagine that there were some tense meetings before deciding to add it.</p>

<p>The terminology above is my own, but notice that there are no terms like <code>repeated</code>, <code>oneof</code>, or <code>message</code>.
This is because they don’t exist at this level. 
<code>message</code> is just a length delimiter followed by some more protobuf, preceded by a <code>LENGTH_DELIMITED</code> tag; the schema has the necessary information to read the raw bytes.
<code>repeated</code> fields come in two kinds: packed and not packed. 
Packed <code>repeated</code> fields are indistinguishable from a <code>message</code> or a <code>string</code> on the wire.
<code>repeated</code> fields which aren’t packed are a list of tag-values with the same field number and the element type in each tag, and they don’t need to be contiguous within the message.
Incidentally, writers aren’t obliged not to repeat non-<code>repeated</code> fields, and as there is nothing to distinguish these fields over the wire, readers are obliged to take the <em>last value</em> for a non-<code>repeated</code> field (which makes some of the partial deserialisers I’ve seen illegal).</p>

<p><code>FIXED_32</code> corresponds to proto types <code>float</code>, <code>fixed32</code>, and <code>sfixed32</code>, whereas <code>FIXED_64</code> corresponds to <code>double</code>, <code>fixed64</code>, and <code>sfixed64</code>.
All other integers, which includes booleans, are <em>varint</em> encoded, which has the basic effect of removing leading zeros in order to save space.
Starting with the least significant bits, seven bits are taken at a time from the integer until no bits remain, and all but the last byte have their most significant bit set.
This allows the parser to detect the end of an integer by looking for a byte with the MSB unset. 
Whilst this saves space, it …</p></div></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://richardstartin.github.io/posts/dont-use-protobuf-for-telemetry">https://richardstartin.github.io/posts/dont-use-protobuf-for-telemetry</a></em></p>]]>
            </description>
            <link>https://richardstartin.github.io/posts/dont-use-protobuf-for-telemetry</link>
            <guid isPermaLink="false">hacker-news-small-sites-25582962</guid>
            <pubDate>Wed, 30 Dec 2020 16:20:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Donald Knuth on Writing and More (An Interview) [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25582712">thread link</a>) | @philipkiely
<br/>
December 30, 2020 | https://philipkiely.com/assets/files/WfSD_Bonus_Interview_-_Donald_Knuth.pdf | <a href="https://web.archive.org/web/*/https://philipkiely.com/assets/files/WfSD_Bonus_Interview_-_Donald_Knuth.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://philipkiely.com/assets/files/WfSD_Bonus_Interview_-_Donald_Knuth.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-25582712</guid>
            <pubDate>Wed, 30 Dec 2020 15:54:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Interesting Research Programs from the 2010s]]>
            </title>
            <description>
<![CDATA[
Score 53 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25582656">thread link</a>) | @wannabebarista
<br/>
December 30, 2020 | https://bcmullins.github.io/interesting-research-2010s/ | <a href="https://web.archive.org/web/*/https://bcmullins.github.io/interesting-research-2010s/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>The idea of this post is to introduce and discuss several interesting research programs from the past decade. A <a href="https://en.wikipedia.org/wiki/Research_program">research program</a> (or programme) refers to a common thread of research that shares similar assumptions, methodology, etc. The list below contains a variety of research programs: some on topics that have broad appeal e.g. <a href="#machine-learning-interpretability-and-explainability">explainable machine learning</a> and <a href="#the-disordered-mind-theory-of-mental-illness">mental disorder</a>; others moved the direction of entire industries e.g. advances in <a href="#image-recognition-and-object-detection">computer vision</a> and <a href="#blockchains-and-cryptocurrencies">cryptocurrencies</a>; and others still are more niche areas that I happen to be deeply interested in e.g. <a href="#topological-learning-theory">topological learning theory</a>, <a href="#privacy-attacks-on-machine-learning-models">privacy attacks on ML models</a>, and <a href="#the-graph-theoretic-approach-to-epistemic-justification">graph-theoretic approaches to epistemology</a>.</p>

<p>Obviously, a list of this variety can never be complete and is surely biased by what I happen to be reading. If I’ve missed something interesting that you enjoy, let me know at <a href="mailto:brettcmullins@gmail.com">brettcmullins@gmail.com</a>. Enjoy!</p>

<h2 id="image-recognition-and-object-detection">Image Recognition and Object Detection</h2>
<hr>

<p>It is difficult for me to begin this list without first talking about the area that most affected my professional career, led to (or at least accelerated) a boom in data science, and <a href="https://www.skynettoday.com/overviews/neural-net-history">potentially thawed an AI winter</a>. During the 2010s, <a href="https://bmk.sh/2019/12/31/The-Decade-of-Deep-Learning/">deep learning made enormous progress</a> in heuristics and applications. For <a href="https://en.wikipedia.org/wiki/Computer_vision">computer vision</a> in particular, a good starting point is <a href="https://papers.nips.cc/paper/2012/file/c399862d3b9d6b76c8436e924a68c45b-Paper.pdf">AlexNet</a> in 2012 which used a <a href="https://en.wikipedia.org/wiki/Convolutional_neural_network">convolutional neural network (CNN)</a> architecture to substantially surpass existing benchmarks for image recognition - the task of assigning a label such as <em>cat</em>, <em>dog</em>, or <em>tree</em> to an image - on the <a href="http://image-net.org/">ImageNet dataset</a>. Over the next few years, improvements would continue with architectures such as <a href="https://towardsdatascience.com/vgg-neural-networks-the-next-step-after-alexnet-3f91fa9ffe2c">VGG</a>, <a href="https://en.wikipedia.org/wiki/Residual_neural_network">ResNet</a>, and <a href="https://arxiv.org/pdf/1409.4842.pdf">Inception</a>.</p>

<figure>
  <img src="https://miro.medium.com/max/500/1*r9ELExnk1B1zHnRReDW9Ow.png" width="300" height="250">
  <figcaption> Example output from R-CNN. Source: <a href="https://arxiv.org/abs/1311.2524">the R-CNN paper.</a></figcaption>
</figure>

<p>With progress being made with recognition, other tasks such as object detection - finding and labeling objects (sometimes multiple objects) within images - became more feasible. One approach to object detection introduced in 2013 <a href="https://arxiv.org/abs/1311.2524">Regional CNNs (or R-CNNs)</a> combined a model that first produced promising bounding boxes then utilized the newly developed recognition models (starting with AlexNet) to classify or label the regions in the bounding boxes. Over the next few years, progress in this direction was realized with <a href="https://arxiv.org/abs/1504.08083">Fast R-CNN</a> and <a href="https://arxiv.org/abs/1504.08083">Faster R-CNN</a>. These frameworks not only employed better recognition models and found better bounding boxes, but they integrated the model components together so that they could be more efficiently trained or tailored to one’s application. <a href="https://blog.athelas.com/a-brief-history-of-cnns-in-image-segmentation-from-r-cnn-to-mask-r-cnn-34ea83205de4">Here is an excellent overview</a> of these models with a bit more detail.</p>

<p>Accompanying these new techniques and improvements was a large amount of software - with <a href="https://en.wikipedia.org/wiki/TensorFlow">TensorFlow</a>, <a href="https://en.wikipedia.org/wiki/Caffe_(software)">Caffe</a>, and <a href="https://en.wikipedia.org/wiki/Torch_(machine_learning)">Torch</a> at first then the more user friendly <a href="https://en.wikipedia.org/wiki/Keras">Keras</a> - allowing anyone to implement these models for their use cases. It’s also worth mentioning the proliferation of online courses such as <a href="https://fast.ai/">fast.ai’s</a> <a href="https://course.fast.ai/">Practical Deep Learning for Coders</a> that facilitated getting potential users up to speed to test out and deploy these tools.</p>

<h2 id="topological-learning-theory">Topological Learning Theory</h2>
<hr>

<p>Topological Learning Theory is the mathematical study of the learnability/solvability of hypotheses/problems that is informed by the <a href="https://en.wikipedia.org/wiki/Computability_theory">theory of computation</a> and <a href="https://en.wikipedia.org/wiki/Descriptive_set_theory">descriptive set theory</a> rather than <a href="https://en.wikipedia.org/wiki/Frequentist_inference">classical statistics</a> (with <a href="https://en.wikipedia.org/wiki/Statistical_learning_theory">statistical learning theory</a>). The idea of learning theory is to analyze the learnability of hypotheses as one incrementally receives information about the true state of the world.</p>

<p><img src="https://images.pexels.com/photos/3858127/pexels-photo-3858127.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=750&amp;w=1260" width="200" height="350"></p>

<p>A <a href="https://plato.stanford.edu/entries/learning-formal/#1.1">classic example</a> is to consider an ornithologist observing the color of ravens as, say, black or not. With each raven observed, the ornithologist gains information which rules out some hypotheses but is consistent with others. By coding a black raven as 1 and other ravens as 0, we can mathematically represent possible observation histories as infinite sequences of 0s and 1s, i.e. points in the <a href="https://en.wikipedia.org/wiki/Cantor_space">Cantor space</a>. The crux of this approach is that the <a href="http://www.personal.psu.edu/jsr25/Spring_11/Lecture_Notes/dst_lecture_notes_2011_lec_2.pdf">topology on the Cantor space and other such spaces</a> naturally <a href="http://www.andrew.cmu.edu/user/kk3n/kelly/learnreview.pdf">encodes the idea of information accumulation</a>. By considering the <a href="https://en.wikipedia.org/wiki/Borel_hierarchy">descriptive complexity of hypotheses</a>, identifying a hypothesis with the set of sequences that make it true, we can say things about the learnability of the hypothesis. For instance, the hypothesis “all ravens are black” is the set containing the single sequence of all 1s. We say that this hypothesis is falsifiable since if there is a non-black raven our ornithologist will eventually observe it; however, it is verifiable not in finite time but in the limit since the hypothesis is never conclusively true after any finite number of observations. This corresponds to the topological notion of properly being an <a href="https://en.wikipedia.org/wiki/F%CF%83_set">$F_{\sigma}$ or $\Sigma^{0}_{2}$ set</a>.</p>

<p><a href="https://www.cmu.edu/dietrich/philosophy/people/faculty/kevin-kelly.html">Kevin Kelly’s</a> 1996 <a href="https://global.oup.com/academic/product/the-logic-of-reliable-inquiry-9780195091953?cc=us&amp;lang=en&amp;"><em>The Logic of Reliable Inquiry</em></a> has been an authoritative text on formal learning theory in the Cantor space and other <a href="https://ncatlab.org/nlab/show/Polish+space">Polish spaces</a>. Advances in <a href="https://ncatlab.org/nlab/show/computable+analysis">computable analysis</a> beginning in the early 2000s have enabled the extension of these classical formal learning theory results to a more general topological setting throughout the 2010s. The paper <a href="https://www.sciencedirect.com/science/article/pii/S0890540109001631?via%3Dihub"><em>Topological Properties of Concept Spaces</em></a> from 2010 is the first to connect these computable analysis results to learning theory. By 2015, a pair of papers <a href="https://arxiv.org/abs/1606.07518"><em>On the Solvability of Inductive Problems</em></a> and <a href="https://www.imsc.res.in/tark/TARK2015-proceedings.pdf#page=119"><em>Theory Choice, Theory Change, and Inductive Truth-Conduciveness</em></a> - both presented at the <a href="https://www.imsc.res.in/tark/tark15.html">TARK 2015 conference</a> - provide complete topological characterizations of learnability/solvability in the limit as well as connections to <a href="https://plato.stanford.edu/entries/logic-belief-revision/">belief revision theory</a> and <a href="https://en.wikipedia.org/wiki/Occam%27s_razor">Ockham’s Razor</a> in this more general topological setting.</p>

<h2 id="the-disordered-mind-theory-of-mental-illness">The Disordered Mind Theory of Mental Illness</h2>
<hr>

<p>In a series of articles and books over the past decade, the philosopher <a href="https://mitpress.mit.edu/contributors/george-graham">George Graham</a> develops a theory of mental disorder with the following qualities: 1. is non-reductionist with respect to the mind and the brain; 2. is informed by the <a href="https://en.wikipedia.org/wiki/Philosophy_of_mind">philosophy of mind</a>; and 3. coheres with the experiences of patients and clinicians. Graham’s theory holds that mental illness is distinct from somatic/bodily illness though may co-occur or otherwise be bound up with so-called <a href="https://psycnet.apa.org/record/2008-07609-001">broken brains</a>. A helpful analogy for what is meant here by “the mental” or “the mind” is to view the brain as computer hardware, whereas the mind is software. On this picture, the mind and the brain are surely not independent; a hardware issue may impede the computation of some software. However, one may have bugs in one’s software - “gumming up the works” to use a common phrase of Graham - on perfectly functioning hardware.</p>

<p><img src="https://images.routledge.com/common/jackets/amazon/978036732/9780367322328.jpg" width="200" height="280"></p>

<p>This theory of mental disorder is developed in Graham’s text on mental illness in the context of the philosophy of mind: <a href="https://www.routledge.com/The-Disordered-Mind/Graham/p/book/9780367322328"><em>The Disordered Mind</em></a>. A follow-up book, <a href="https://global.oup.com/academic/product/the-abraham-dilemma-9780198728658?cc=us&amp;lang=en&amp;"><em>The Abraham Dilemma</em></a>, refines this theory for the case of delusion, religious delusion in particular (I discuss <em>The Abraham Dilemma</em> in greater detail in my <a href="https://bcmullins.github.io/top-books-2020/#the-abraham-dilemma-a-divine-delusion">Top Books in 2020</a>). Graham’s latest book <a href="https://global.oup.com/academic/product/hearing-voices-and-other-matters-of-the-mind-9780190091149?cc=us&amp;lang=en&amp;"><em>Hearing Voices and Other Matters of the Mind</em></a> explores the unique properties and challenges of mental disorders in the presence of religious content. The disordered mind theory <a href="https://ndpr.nd.edu/news/the-disordered-mind-an-introduction-to-philosophy-of-mind-and-mental-illness/">is not without its detractors</a> who hold that Graham goes too far in arguing that one need not situate and commit to positions in the philosophy of mind to reject the complete reduction of mental illness to neuroscience.</p>

<p>I took George Graham’s seminar on Philosophy and Mental Illness in 2014 at <a href="https://philosophy.gsu.edu/">Georgia State University</a> and had several interesting chats with him about the metaphysics and definability of mental disorders.</p>

<h2 id="machine-learning-interpretability-and-explainability">Machine Learning Interpretability and Explainability</h2>
<hr>

<p>The boom in data science and widespread use of machine learning models during the past decade was accelerated by innovations in model architectures as well as tools and software to train and deploy these models. In addition to the <a href="#image-recognition-and-object-detection">progress with neural networks and deep learning</a>, algorithms such as <a href="https://en.wikipedia.org/wiki/XGBoost">XGBoost</a> allowed users to achieve state-of-the-art classification and regression performance without much effort. XGBoost in particular became so prevalent in both industry and ML competitions - as had logistic regression and other GLMs in the past - that it was not unreasonable for some to wonder whether or not <a href="https://towardsdatascience.com/https-medium-com-vishalmorde-xgboost-algorithm-long-she-may-rein-edd9f99be63d">we should just use XGBoost all the time</a>.</p>

<p>For all that these models gained in performance, they lost ground in being able to provide answers to questions from stakeholders, developers, and so forth when things went wrong as to why a model’s prediction was so far off or why does the computer vision model <a href="https://arxiv.org/pdf/1712.09665.pdf">think a banana is a toaster</a>. Two approaches were offered as a solution (three if you count “Who cares?! Let’s do nothing!”): interpretability and explanations. The former offers constraints on model building such as limiting the number of features used and restricting to linear models so that the model is sufficiently simple to allow the developer/user to reliably predict the model’s behavior with a reasonable amount of effort. The latter is a set of methods for generating reasons for a model’s behavior for arbitrarily complex models. <a href="https://arxiv.org/abs/1606.03490"><em>The Mythos of Model Interpretability</em></a> is an early effort to disentangle these terms and map the landscape for understanding models. Also see <a href="https://bcmullins.github.io/economic_methodology_interpretable_ml_blackboxes/">my attempt here</a> as well as Christoph Molnar’s ever-evolving text <a href="https://christophm.github.io/interpretable-ml-book/"><em>Interpretable Machine Learning</em></a>.</p>

<p><img width="40%" height="40%" src="https://bcmullins.github.io/images/blog/best_articles_2018/anchor.png"></p>

<p>The approach that I find the most compelling stems from the <a href="https://arxiv.org/abs/1602.04938">LIME paper</a>. LIME (or local interpretable model-agnostic explanations) is a method of generating an interpretable, i.e. linear, approximation of a model in the neighborhood of a given point in the feature space. This new model is then used to generate explanations by virtue of its interpretability. A second approach for classifiers called <a href="https://homes.cs.washington.edu/~marcotcr/aaai18.pdf">Anchors</a> - both are developed by the <a href="https://homes.cs.washington.edu/~guestrin/group.html">same research group at UW</a> that also developed XGBoost - produces a simple region of the feature space (a rectangle) where the model’s prediction holds with high probability for a given point. This region or anchor acts as a sort of sufficiency condition for classification. The image to the right illustrates these ideas with the dotted line being a local linear approximation and the …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://bcmullins.github.io/interesting-research-2010s/">https://bcmullins.github.io/interesting-research-2010s/</a></em></p>]]>
            </description>
            <link>https://bcmullins.github.io/interesting-research-2010s/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25582656</guid>
            <pubDate>Wed, 30 Dec 2020 15:49:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Things I Learnt in 2020]]>
            </title>
            <description>
<![CDATA[
Score 212 | Comments 63 (<a href="https://news.ycombinator.com/item?id=25582269">thread link</a>) | @valzevul
<br/>
December 30, 2020 | https://drobinin.com/posts/things-i-learnt-in-2020/ | <a href="https://web.archive.org/web/*/https://drobinin.com/posts/things-i-learnt-in-2020/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>I am pretty much a knowledge addict.</p>
<p>I use Twitter, RSS, and numerous other mediums of information — from Telegram channels to standalone blogs.</p>
<p>Out of a thousand articles a hundred gets skimmed through. A few dozens make it to my "Read Later" list, and only a fraction I find worthy of sharing.</p>
<p>These worthy ones end up in <a href="https://drobinin.com/newsletter/">my weekly newsletter, the Tuesday Triage</a>, where I comment on the most intriguing articles I've read and share facts I learnt over the week.</p>
<p>Some of those trivia are not trivial at all, so I decided to condense this <em>crème de la crème of the Internet</em> in a subjective list of the best ones in no particular order.</p>
<hr>
<h4 id="solresol"><a href="https://en.wikipedia.org/wiki/Solresol">Solresol</a> <a href="#solresol">¶</a></h4>
<p>Most people know about the esperanto, an artificially created language. Way less people are aware of Solresol, another artificial language, built upon the musical grammar.</p>
<blockquote>
<p>Is your health good? - Redofafa?</p>
</blockquote>
<blockquote>
<p>Will you go to the countryside this year? - Fadoremi?</p>
</blockquote>
<blockquote>
<p>Will you go to the theatre tonight? - Soldoremi?</p>
</blockquote>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/5/56/Sol-resol.png" alt=""></p>
<hr>
<h4 id="logbook"><a href="https://en.wikipedia.org/wiki/Logbook">Logbook</a> <a href="#logbook">¶</a></h4>
<p>As developers we work with logs a lot. And the logs are stored in logbooks (or at least they were). What's the ethymology?</p>
<blockquote>
<p>The term originally referred to a book for recording readings from the chip log that was used to estimate a ship's speed through the water.</p>
</blockquote>
<p>So how come a chip log was used to estimate a ship's speed? In the absence of GPS and without any visible clues about the speed of a ship in the open water, sailors started to throw wooden pieces with a tied strope (hence the definition of knots as nautical miles per hour!) into water and then measure the relative speed against such logs, hence the name.</p>
<hr>
<h4 id="popcorn-in-the-1800s"><a href="https://en.wikipedia.org/wiki/Popcorn#Consumption">Popcorn in the 1800s</a> <a href="#popcorn-in-the-1800s">¶</a></h4>
<blockquote>
<p>Popcorn as a breakfast cereal was consumed by Americans in the 1800s and generally consisted of popcorn with milk and a sweetener.</p>
</blockquote>
<p>It doesn't surprise me when I think about this as a dish, and yet I'd probably never come up with that on my own.</p>
<hr>
<h4 id="danakil-depression"><a href="https://en.wikipedia.org/wiki/Danakil_Depression">Danakil Depression</a> <a href="#danakil-depression">¶</a></h4>
<blockquote>
<p>The Danakil Depression is the northern part of the Afar Triangle or Afar Depression in Ethiopia, a geological depression that has resulted from the divergence of three tectonic plates in the Horn of Africa.</p>
</blockquote>
<p><img src="https://live.staticflickr.com/3682/10387154385_32f2fdb136_b.jpg" alt=""></p>
<hr>
<h4 id="ansi-k-100.1-1974"><a href="https://groups.niso.org/apps/group_public/download.php/6140/K100.1-1974%20-%20American%20National%20Standard%20Safety%20Code%20%26%20Requirements%20for%20Dry%20Martinis%20.pdf">ANSI K 100.1-1974</a> <a href="#ansi-k-100.1-1974">¶</a></h4>
<p>The year is 1974. The American National Standards Institute introduces safety code and requirements for dry martinis, and boy-oh-boy are they good.</p>
<blockquote>
<p>Definitions</p>
<p><em>Gibson.</em><br>
An unpardonable form of perversion. See onion soup.</p>
</blockquote>
<p>or</p>
<blockquote>
<p>Test Methods</p>
<p>[...] In testing, the taster shall watch for lightness of color, absence of sediment, a delicate aroma that effectively combines the scent of the juniper with the herbal infusion in the vermouth, a taste that is both sharp and clean with a faint body, and a light delicate aftertaste.</p>
</blockquote>
<hr>
<h4 id="by-the-bye"><a href="https://english.stackexchange.com/questions/57078/by-the-bye-etymology-and-usage">By the bye</a> <a href="#by-the-bye">¶</a></h4>
<p>This example left me, to put it succinctly, flabbergasted for a brief moment.</p>
<blockquote>
<p>by the by or by the bye : INCIDENTALLY [defined as "by way of interjection or digression : by the way"]</p>
</blockquote>
<p>I wonder if it will help me to up the game of interrupting folks in conversations.</p>
<hr>
<h4 id="pie-barm"><a href="https://en.wikipedia.org/wiki/Barm_cake">Pie Barm</a> <a href="#pie-barm">¶</a></h4>
<p>Watch after my hands:</p>
<ol>
<li>
<p>We ferment a liquid (beer, wine, or stock)</p>
</li>
<li>
<p>We take the foam from the top of the liquid (this is called <strong>barm</strong>)</p>
</li>
<li>
<p>We use this foam to leaven a bread roll, and then put something inside it (now this is called a <strong>barm cake</strong>)</p>
</li>
</ol>
<p>And if we do all of that in Wigan, Greater Manchester, England, we most likely would put a pie as a filling (they also host the <a href="https://www.bbc.com/news/av/uk-england-manchester-46620294/world-pie-eating-champion-crowned-in-wigan">World Pie Eating Championship</a>, so no surprise). And here it is, the pie barm:</p>
<blockquote>
<p>In Wigan, a whole savoury pie is served in a barm cake, known locally as a "Wigan Kebab".</p>
</blockquote>
<p><img src="https://i2.wp.com/random-times.com/wp-content/uploads/2020/04/5813a857-4338-41ec-a2db-d751d986268c.jpeg?resize=878%2C659&amp;ssl=1" alt="The image by https://random-times.com/2020/04/24/pie-barm-an-unconventional-traditional-sandwich-from-wigan-england/"></p><hr>
<h4 id="two-spaces-after-period"><a href="https://www.cultofpedagogy.com/two-spaces-after-period/">Two spaces after period</a> <a href="#two-spaces-after-period">¶</a></h4>
<p>Back then people had to put two spaces after punctuation marks as typewriters had monospaced typesetting.</p>
<blockquote>
<p>Here’s why: Back when we used typewriters, every character was given the exact same amount of space on the page. That meant the letter i was given the same amount of space as the letter m, even though it clearly didn’t need it. This is called monospaced typesetting and it’s, well, spacey. We needed that extra space between sentences to make it easier to see the beginning of new sentences.</p>
</blockquote>
<p>These days quite a few still do that; usually one can easily assume they've learnt to type not on a computer.</p>
<p>Rarely, one encounters someone like me, with a typewriter next to the keyboard, and just thinks I am stupid and don't know thine grammar.</p>
<hr>
<h4 id="erstwhile"><a href="https://www.merriam-webster.com/dictionary/erstwhile">erstwhile</a> <a href="#erstwhile">¶</a></h4>
<p>Here is a beautiful word I unearthed recently:</p>
<blockquote>
<p>The adverb erstwhile has been part of English since the 16th century, but it is formed from two words that are much older. It comes from the Old English words ær, meaning "early", and hwīl, which has much the same meaning as the modern word while. (The English word ere, meaning "before," is also descendant of ær.)</p>
</blockquote>
<p>Used as a synonim to "former", e.g "erstwhile enemies".</p>
<hr>
<h4 id="children-used-to-be-sent-through-the-mail"><a href="https://www.smithsonianmag.com/smart-news/brief-history-children-sent-through-mail-180959372/">Children used to be sent through the Mail</a> <a href="#children-used-to-be-sent-through-the-mail">¶</a></h4>
<p>I am just surprised that this practice was eventually banned.</p>
<blockquote>
<p>Just a few weeks after Parcel Post began, an Ohio couple named Jesse and Mathilda Beagle “mailed” their 8-month-old son James to his grandmother, who lived just a few miles away in Batavia. According to Lynch, Baby James was just shy of the 11-pound weight limit for packages sent via Parcel Post, and his “delivery” cost his parents only 15 cents in postage (although they did insure him for $50).</p>
</blockquote>
<p>Postage was cheaper than train tickets back then (and still is, actually), so I can't really blame the parents.</p>
<hr>
<h4 id="ek-number"><a href="https://digg.com/2018/how-different-countries-laugh-online">ek number</a> <a href="#ek-number">¶</a></h4>
<p>Sometimes I realize that speaking in one (two, three, ...) languages means there are corners of the Internet and/or world you can't appreciate, in the first place because you can't understand them.</p>
<p>So while knowing both English and Russian is usually more than enough to find an answer to almost any question, I still miss the jewels like that:</p>
<blockquote>
<p>"ek number," which loosely translates to "I rate this number one" — the "ek" itself means "one" in Hindi — is commonly used as an affirmative response to a joke. If you find something to be funny, you could always type "haha" or "hehe" in India, but you can also signal your enjoyment by responding "ek number."</p>
</blockquote>
<hr>
<h4 id="remy-labesque-and-chocolate-chips"><a href="http://www.dandelionchocolate.com/2020/06/18/remy-chocolate-chip/">Remy Labesque and chocolate chips</a> <a href="#remy-labesque-and-chocolate-chips">¶</a></h4>
<p>Chocolate chips have a water drop's shape because it's easier to make that way. It's harder to use though.</p>
<p>Remy Labesque, one of Tesla's designers, helped Dandelion Chocolate to invent a machine to make ideal chocolate chips:</p>
<blockquote>
<p>The shape of a typical store-bought chocolate chip is an arbitrary result of the industrial manufacturing process used to make it. As you might expect, a drop of molten chocolate is deposited onto a flat surface and left to cool. Chocolate chip taste varies widely by brand, but the shape of the chips does not.</p>
<p>The shape of our chip is faceted: The edges of a Dandelion Chocolate chip taper to thin-as-we could-make-’em without compromising structure. This is because the thermal mass of a thin piece of chocolate melts more quickly on the palate. So when you put a Dandelion chip on your tongue, the thin, chiseled edges warm-to-melt nearly instantly.</p>
</blockquote>
<p><img src="https://i2.wp.com/www.dandelionchocolate.com/wp-content/uploads/2020/06/Remy-3d-drawing.jpg?zoom=2&amp;resize=794%2C613&amp;ssl=1" alt=""></p>
<p><img src="https://i1.wp.com/www.dandelionchocolate.com/wp-content/uploads/2020/06/IMG_3609-1.jpg?zoom=2&amp;resize=516%2C511&amp;ssl=1" alt=""></p>
<p>1 lb of these chips costs 30$, not bad.</p>
<hr>
<h4 id="ogden's-basic-english"><a href="http://ogden.basic-english.org/">Ogden's Basic English</a> <a href="#ogden's-basic-english">¶</a></h4>
<p>Apparently removing all redundancies, synonims, etc from the English language leaves us only with 850 words or so:</p>
<blockquote>
<p>We call this simplified language Basic English, the developer is Charles K. Ogden, and was released in 1930 with the book: Basic English: A General Introduction with Rules and Grammar. He founded the Orthological Institute to develop the tools for teaching Basic English. His most famous associate, I.A. Richards, led the effort in the Orient, which uses the techniques to this day.</p>
</blockquote>
<p>The most interesting bit is, that change doesn't affect the grammar, so one could learn only 850 words and yet converse in English by using its grammar to its full extent.</p>
<hr>
<h4 id="brick-pencil"><a href="http://gordonbrander.com/pattern/brick-pencil/">Brick pencil</a> <a href="#brick-pencil">¶</a></h4>
<p><a href="https://en.wikipedia.org/wiki/Douglas_Engelbart">Doug Engelbart</a>, one of the people behind the creation of a computer mouse, and then graphical interfaces, argued about interfaces in his paper "Augmenting Human Intellect: a Conceptual Framework" in 1962 and to proof his point came up with a brick pencil:</p>
<blockquote>
<p>Brains of power equal to ours could have evolved in an environment where the combination of artifact materials and muscle strengths were so scaled that the neatest scribing tool (equivalent to a pencil, possible had a shape and mass as manageable as a brick would be to us-assuming that our muscles were not specially conditioned to deal with it. We fastened a pencil to a brick and experimented. Figure 2 shows the results, compared with typewriting and ordinary pencil writing. With the brick pencil, we are slower and less precise. If we want to hurry the writing, we have to make it larger. Also, writing the passage twice with the brick-pencil tires the untrained hand and arm.</p>
</blockquote>
<p><img src="https://dougengelbart.org/pubs/papers/images/augment-3906/fig2.gif" alt=""></p>
<p>(and now users complain that they have to click a button twice; such a shame)</p>
<hr>
<h4 id="cosmic-latte"><a href="https://en.wikipedia.org/wiki/Cosmic_latte">Cosmic Latte</a> <a href="#cosmic-latte">¶</a></h4>
<p>Wikipedia sums it up well:</p>
<blockquote>
<p>Cosmic latte is the average colour of the universe, found by a team of astronomers from Johns Hopkins University.</p>
</blockquote>
<p>For those keen on putting this into their apps, here is the colour: #FFF8E7.</p>
<hr>
<h4 id="7-up's-history"><a href="https://en.wikipedia.org/wiki/7_Up#History">7-UP's history</a> <a href="#7-up's-history">¶</a></h4>
<p>In my childhood I used to love 7-UP a lot, mostly because it was nearly transparent hence felt less poisonous comparing to other sodas.</p>
<blockquote>
<p>It contained lithium citrate, a mood-stabilizing drug, until 1948</p>
</blockquote>
<p>Probably if I were to drink it until 1948 it'd be my favourite drink anyway, but not because of its (lack of) colour.</p>
<p>Also all myths about its name are hilarious.</p>
<blockquote>
<p>A myth exists that the 7 Up name comes from the drink having a pH over 7. That would make it neutral or basic on the scale; however, this is not the case, as the 7 Up pH is close to 3.79, making it acidic on the pH scale and similar to other drinks of this type. [...]<br>
The real origin of the name is unclear, though Britvic claims that the name comes from the seven main ingredients in the drink, while others have claimed that the number was a coded reference to the lithium contained in the original recipe, which has an atomic mass around 7.</p>
</blockquote>
<p>However, this one makes the most sense to me:</p>
<blockquote>
<p>Britvic also claims that the name is a result of the fact that 7 Up was bottled in 7-ounce bottles …</p></blockquote></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://drobinin.com/posts/things-i-learnt-in-2020/">https://drobinin.com/posts/things-i-learnt-in-2020/</a></em></p>]]>
            </description>
            <link>https://drobinin.com/posts/things-i-learnt-in-2020/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25582269</guid>
            <pubDate>Wed, 30 Dec 2020 15:07:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Better than Myers-Briggs? 2min assessment based on Stanford research]]>
            </title>
            <description>
<![CDATA[
Score 20 | Comments 11 (<a href="https://news.ycombinator.com/item?id=25581325">thread link</a>) | @superzadeh
<br/>
December 30, 2020 | https://www.notion.so/bunch2/Better-than-Myers-Briggs-2min-assessment-based-on-Stanford-research-8f46502eee3e42aa90cd2aa875ed628f | <a href="https://web.archive.org/web/*/https://www.notion.so/bunch2/Better-than-Myers-Briggs-2min-assessment-based-on-Stanford-research-8f46502eee3e42aa90cd2aa875ed628f">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.notion.so/bunch2/Better-than-Myers-Briggs-2min-assessment-based-on-Stanford-research-8f46502eee3e42aa90cd2aa875ed628f</link>
            <guid isPermaLink="false">hacker-news-small-sites-25581325</guid>
            <pubDate>Wed, 30 Dec 2020 13:08:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How Python attributes work]]>
            </title>
            <description>
<![CDATA[
Score 102 | Comments 12 (<a href="https://news.ycombinator.com/item?id=25581313">thread link</a>) | @r4victor
<br/>
December 30, 2020 | https://tenthousandmeters.com/blog/python-behind-the-scenes-7-how-python-attributes-work/ | <a href="https://web.archive.org/web/*/https://tenthousandmeters.com/blog/python-behind-the-scenes-7-how-python-attributes-work/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<!-- /.post-info -->      <p>What happens when we get or set an attribute of a Python object? This question is not as simple as it may seem at first. It is true that any experienced Python programmer has a good intuitive understanding of how attributes work, and the documentation helps a lot to strengthen the understanding. Yet, when a really non-trivial question regarding attributes comes up, the intuition fails and the documentation can no longer help. To gain a deep understanding and be able to answer such questions, one has to study how attributes are implemented. That's what we're going to do today.</p>
<p><strong>Note</strong>: In this post I'm referring to CPython 3.9. Some implementation details will certainly change as CPython evolves. I'll try to keep track of important changes and add update notes.</p>
<h2>A quick refresher</h2>
<p><a href="https://tenthousandmeters.com/blog/python-behind-the-scenes-6-how-python-object-system-works/">Last time</a> we studied how the Python object system works. Some of the things we've learned in that part are crucial for our current discussion, so let's recall them briefly.</p>
<p>A Python object is an instance of a C struct that has at least two members:</p>
<ul>
<li>a reference count; and</li>
<li>a pointer to the object's type.</li>
</ul>
<p>Every object must have a type because the type determines how the object behaves. A type is also a Python object, an instance of the <code>PyTypeObject</code> struct:</p>
<div><pre><span></span><span>// PyTypeObject is a typedef for "struct _typeobject"</span>

<span>struct</span> <span>_typeobject</span> <span>{</span>
    <span>PyVarObject</span> <span>ob_base</span><span>;</span> <span>// expansion of PyObject_VAR_HEAD macro</span>
    <span>const</span> <span>char</span> <span>*</span><span>tp_name</span><span>;</span> <span>/* For printing, in format "&lt;module&gt;.&lt;name&gt;" */</span>
    <span>Py_ssize_t</span> <span>tp_basicsize</span><span>,</span> <span>tp_itemsize</span><span>;</span> <span>/* For allocation */</span>

    <span>/* Methods to implement standard operations */</span>

    <span>destructor</span> <span>tp_dealloc</span><span>;</span>
    <span>Py_ssize_t</span> <span>tp_vectorcall_offset</span><span>;</span>
    <span>getattrfunc</span> <span>tp_getattr</span><span>;</span>
    <span>setattrfunc</span> <span>tp_setattr</span><span>;</span>
    <span>PyAsyncMethods</span> <span>*</span><span>tp_as_async</span><span>;</span> <span>/* formerly known as tp_compare (Python 2)</span>
<span>                                    or tp_reserved (Python 3) */</span>
    <span>reprfunc</span> <span>tp_repr</span><span>;</span>

    <span>/* Method suites for standard classes */</span>

    <span>PyNumberMethods</span> <span>*</span><span>tp_as_number</span><span>;</span>
    <span>PySequenceMethods</span> <span>*</span><span>tp_as_sequence</span><span>;</span>
    <span>PyMappingMethods</span> <span>*</span><span>tp_as_mapping</span><span>;</span>

    <span>/* More standard operations (here for binary compatibility) */</span>

    <span>hashfunc</span> <span>tp_hash</span><span>;</span>
    <span>ternaryfunc</span> <span>tp_call</span><span>;</span>
    <span>reprfunc</span> <span>tp_str</span><span>;</span>
    <span>getattrofunc</span> <span>tp_getattro</span><span>;</span>
    <span>setattrofunc</span> <span>tp_setattro</span><span>;</span>

    <span>/* Functions to access object as input/output buffer */</span>
    <span>PyBufferProcs</span> <span>*</span><span>tp_as_buffer</span><span>;</span>

    <span>/* Flags to define presence of optional/expanded features */</span>
    <span>unsigned</span> <span>long</span> <span>tp_flags</span><span>;</span>

    <span>const</span> <span>char</span> <span>*</span><span>tp_doc</span><span>;</span> <span>/* Documentation string */</span>

    <span>/* Assigned meaning in release 2.0 */</span>
    <span>/* call function for all accessible objects */</span>
    <span>traverseproc</span> <span>tp_traverse</span><span>;</span>

    <span>/* delete references to contained objects */</span>
    <span>inquiry</span> <span>tp_clear</span><span>;</span>

    <span>/* Assigned meaning in release 2.1 */</span>
    <span>/* rich comparisons */</span>
    <span>richcmpfunc</span> <span>tp_richcompare</span><span>;</span>

    <span>/* weak reference enabler */</span>
    <span>Py_ssize_t</span> <span>tp_weaklistoffset</span><span>;</span>

    <span>/* Iterators */</span>
    <span>getiterfunc</span> <span>tp_iter</span><span>;</span>
    <span>iternextfunc</span> <span>tp_iternext</span><span>;</span>

    <span>/* Attribute descriptor and subclassing stuff */</span>
    <span>struct</span> <span>PyMethodDef</span> <span>*</span><span>tp_methods</span><span>;</span>
    <span>struct</span> <span>PyMemberDef</span> <span>*</span><span>tp_members</span><span>;</span>
    <span>struct</span> <span>PyGetSetDef</span> <span>*</span><span>tp_getset</span><span>;</span>
    <span>struct</span> <span>_typeobject</span> <span>*</span><span>tp_base</span><span>;</span>
    <span>PyObject</span> <span>*</span><span>tp_dict</span><span>;</span>
    <span>descrgetfunc</span> <span>tp_descr_get</span><span>;</span>
    <span>descrsetfunc</span> <span>tp_descr_set</span><span>;</span>
    <span>Py_ssize_t</span> <span>tp_dictoffset</span><span>;</span>
    <span>initproc</span> <span>tp_init</span><span>;</span>
    <span>allocfunc</span> <span>tp_alloc</span><span>;</span>
    <span>newfunc</span> <span>tp_new</span><span>;</span>
    <span>freefunc</span> <span>tp_free</span><span>;</span> <span>/* Low-level free-memory routine */</span>
    <span>inquiry</span> <span>tp_is_gc</span><span>;</span> <span>/* For PyObject_IS_GC */</span>
    <span>PyObject</span> <span>*</span><span>tp_bases</span><span>;</span>
    <span>PyObject</span> <span>*</span><span>tp_mro</span><span>;</span> <span>/* method resolution order */</span>
    <span>PyObject</span> <span>*</span><span>tp_cache</span><span>;</span>
    <span>PyObject</span> <span>*</span><span>tp_subclasses</span><span>;</span>
    <span>PyObject</span> <span>*</span><span>tp_weaklist</span><span>;</span>
    <span>destructor</span> <span>tp_del</span><span>;</span>

    <span>/* Type attribute cache version tag. Added in version 2.6 */</span>
    <span>unsigned</span> <span>int</span> <span>tp_version_tag</span><span>;</span>

    <span>destructor</span> <span>tp_finalize</span><span>;</span>
    <span>vectorcallfunc</span> <span>tp_vectorcall</span><span>;</span>
<span>};</span>
</pre></div>


<p>The members of a type are called slots. Each slot is responsible for a particular aspect of the object's behavior. For example, the <code>tp_call</code> slot of a type specifies what happens when we call the objects of that type. Some slots are grouped together in suites. An example of a suite is the "number" suite <code>tp_as_number</code>. Last time we studied its <code>nb_add</code> slot that specifies how to add objects. This and all other slots are very well <a href="https://docs.python.org/3/c-api/typeobj.html">described</a> in the docs.</p>
<p>How slots of a type are set depends on how the type is defined. There are two ways to define a type in CPython:</p>
<ul>
<li>statically; or</li>
<li>dynamically.</li>
</ul>
<p>A statically defined type is just a statically initialized instance of <code>PyTypeObject</code>. All built-in types are defined statically. Here's, for example, the definition of the <code>float</code> type:</p>
<div><pre><span></span><span>PyTypeObject</span> <span>PyFloat_Type</span> <span>=</span> <span>{</span>
    <span>PyVarObject_HEAD_INIT</span><span>(</span><span>&amp;</span><span>PyType_Type</span><span>,</span> <span>0</span><span>)</span>
    <span>"float"</span><span>,</span>
    <span>sizeof</span><span>(</span><span>PyFloatObject</span><span>),</span>
    <span>0</span><span>,</span>
    <span>(</span><span>destructor</span><span>)</span><span>float_dealloc</span><span>,</span>                  <span>/* tp_dealloc */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_vectorcall_offset */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_getattr */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_setattr */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_as_async */</span>
    <span>(</span><span>reprfunc</span><span>)</span><span>float_repr</span><span>,</span>                       <span>/* tp_repr */</span>
    <span>&amp;</span><span>float_as_number</span><span>,</span>                           <span>/* tp_as_number */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_as_sequence */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_as_mapping */</span>
    <span>(</span><span>hashfunc</span><span>)</span><span>float_hash</span><span>,</span>                       <span>/* tp_hash */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_call */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_str */</span>
    <span>PyObject_GenericGetAttr</span><span>,</span>                    <span>/* tp_getattro */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_setattro */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_as_buffer */</span>
    <span>Py_TPFLAGS_DEFAULT</span> <span>|</span> <span>Py_TPFLAGS_BASETYPE</span><span>,</span>   <span>/* tp_flags */</span>
    <span>float_new__doc__</span><span>,</span>                           <span>/* tp_doc */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_traverse */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_clear */</span>
    <span>float_richcompare</span><span>,</span>                          <span>/* tp_richcompare */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_weaklistoffset */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_iter */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_iternext */</span>
    <span>float_methods</span><span>,</span>                              <span>/* tp_methods */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_members */</span>
    <span>float_getset</span><span>,</span>                               <span>/* tp_getset */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_base */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_dict */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_descr_get */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_descr_set */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_dictoffset */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_init */</span>
    <span>0</span><span>,</span>                                          <span>/* tp_alloc */</span>
    <span>float_new</span><span>,</span>                                  <span>/* tp_new */</span>
<span>};</span>
</pre></div>


<p>To dynamically allocate a new type, we call a metatype. A metatype is a type whose instances are types. It determines how types behave. In particular, it creates new type instances. Python has one built-in metatype known as <code>type</code>. It's the metatype of all built-in types. It's also used as the default metatype to create classes. When CPython executes the <code>class</code> statement, it typically calls <code>type()</code> to create the class. We can create a class by calling <code>type()</code> directly as well:</p>
<div><pre><span></span><span>MyClass</span> <span>=</span> <span>type</span><span>(</span><span>name</span><span>,</span> <span>bases</span><span>,</span> <span>namespace</span><span>)</span>
</pre></div>


<p>The <code>tp_new</code> slot of <code>type</code> is called to create a class. The implementation of this slot is the <code>type_new()</code> function. This function allocates the type object and sets it up.</p>
<p>Slots of a statically defined type are specified explicitly. Slots of a class are set automatically by the metatype. Both statically and dynamically defined types can inherit some slots from its bases.</p>
<p>Some slots are mapped to special methods. If a class defines a special method that corresponds to some slot, CPython automatically sets the slot to the default implementation that calls the special method. This is why we can add objects whose class defines <code>__add__()</code>. CPython does the reverse for a statically defined type. If such a type implements a slot that corresponds to some special method, CPython sets the special method to the implementation that wraps the slot. This is how the <code>int</code> type gets its <code>__add__()</code> special method.</p>
<p>All types must be initialized by calling the <code>PyType_Ready()</code> function. This function does a lot of things. For example, it does slot inheritance and adds special methods based on slots. For a class, <code>PyType_Ready()</code> is called by <code>type_new()</code>. For a statically defined type, <code>PyType_Ready()</code> must be called explicitly. When CPython starts, it calls <code>PyType_Ready()</code> for each built-in type.</p>
<p>With this in mind, let's turn our attention to attributes.</p>
<h2>Attributes and the VM</h2>
<p>What is an attribute? We might say that an attribute is a variable associated with an object, but it's more than that. It's hard to give a definition that captures all important aspects of attributes. So, instead of starting with a definition, let's start with something we know for sure.</p>
<p>We know for sure that in Python we can do three things with attributes:</p>
<ul>
<li>get the value of an attribute: <code>value = obj.attr</code></li>
<li>set an attribute to some value: <code>obj.attr = value</code></li>
<li>delete an attribute: <code>del obj.attr</code></li>
</ul>
<p>What these operations do depends, like any other aspect of the object's behavior, on the object's type. A type has certain slots responsible for getting, setting and deleting attributes. The VM calls these slots to execute the statements like <code>value = obj.attr</code> and <code>obj.attr = value</code>. To see how the VM does that and what these slots are, let's apply the familiar method:</p>
<ol>
<li>Write a piece of code that gets/sets/deletes an attribute.</li>
<li>Disassemble it to bytecode using the <a href="https://docs.python.org/3/library/dis.html"><code>dis</code></a> module.</li>
<li>Take a look at the implementation of the produced bytecode instructions in <a href="https://github.com/python/cpython/blob/3.9/Python/ceval.c"><code>ceval.c</code></a>.</li>
</ol>
<h3>Getting an attribute</h3>
<p>Let's first see what the VM does when we get the value of an attribute. The compiler produces the <a href="https://docs.python.org/3/library/dis.html#opcode-LOAD_ATTR"><code>LOAD_ATTR</code></a> opcode to load the value:</p>
<div><pre><span></span>$ echo 'obj.attr' | python -m dis
  1           0 LOAD_NAME           …</pre></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://tenthousandmeters.com/blog/python-behind-the-scenes-7-how-python-attributes-work/">https://tenthousandmeters.com/blog/python-behind-the-scenes-7-how-python-attributes-work/</a></em></p>]]>
            </description>
            <link>https://tenthousandmeters.com/blog/python-behind-the-scenes-7-how-python-attributes-work/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25581313</guid>
            <pubDate>Wed, 30 Dec 2020 13:07:22 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Wasmino = WASM and Arduino – Running Arduino Code in Browser]]>
            </title>
            <description>
<![CDATA[
Score 74 | Comments 13 (<a href="https://news.ycombinator.com/item?id=25581081">thread link</a>) | @gyf304
<br/>
December 30, 2020 | https://blog.yifangu.com/2020/12/30/wasmino-wasm-arduino-running-arduino-code-in-browser/ | <a href="https://web.archive.org/web/*/https://blog.yifangu.com/2020/12/30/wasmino-wasm-arduino-running-arduino-code-in-browser/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">

	<section id="primary">
		<main id="main">

			
<article id="post-365">

	

	
	<div>
		
<figure><img data-attachment-id="394" data-permalink="https://blog.yifangu.com/wasmino/" data-orig-file="https://yifangucom.files.wordpress.com/2020/12/wasmino.gif" data-orig-size="320,320" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wasmino" data-image-description="" data-medium-file="https://yifangucom.files.wordpress.com/2020/12/wasmino.gif?w=300" data-large-file="https://yifangucom.files.wordpress.com/2020/12/wasmino.gif?w=320" src="https://yifangucom.files.wordpress.com/2020/12/wasmino.gif?w=320" alt=""><figcaption>Wasmino Running the “Fade” example</figcaption></figure>



<p>Wasmino is an Arduino core fully compatible with the Arduino IDE. It allows you to compile your Arduino sketch to WebAssembly and run it in a browser, all using the Arduino IDE.</p>



<h2>Showcase</h2>



<p>This is the off-the-shelf “Fade” example in the Arduino IDE.</p>


<pre title="">/*
  Fade

  This example shows how to fade an LED on pin 9 using the analogWrite()
  function.

  The analogWrite() function uses PWM, so if you want to change the pin you're
  using, be sure to use another PWM capable pin. On most Arduino, the PWM pins
  are identified with a "~" sign, like ~3, ~5, ~6, ~9, ~10 and ~11.

  This example code is in the public domain.

  http://www.arduino.cc/en/Tutorial/Fade
*/

int led = 9;           // the PWM pin the LED is attached to
int brightness = 0;    // how bright the LED is
int fadeAmount = 5;    // how many points to fade the LED by

// the setup routine runs once when you press reset:
void setup() {
  // declare pin 9 to be an output:
  pinMode(led, OUTPUT);
}

// the loop routine runs over and over again forever:
void loop() {
  // set the brightness of pin 9:
  analogWrite(led, brightness);

  // change the brightness for next time through the loop:
  brightness = brightness + fadeAmount;

  // reverse the direction of the fading at the ends of the fade:
  if (brightness &lt;= 0 || brightness &gt;= 255) {
    fadeAmount = -fadeAmount;
  }
  // wait for 30 milliseconds to see the dimming effect
  delay(30);
}
</pre>


<p>You can see it compiled to WASM and running here:</p>



<p>(<strong>Click the “Run” button</strong> and the LED should start to animate)</p>



<p><a href="https://demo.wasmino.org/#src=gist%3A%2F%2F01734051e7ab5b82173ea947b882ad80&amp;pins=%7B%229%22%3A%7B%22type%22%3A%22led%22%7D%7D">https://demo.wasmino.org/#src=gist%3A%2F%2F01734051e7ab5b82173ea947b882ad80&amp;pins=%7B%229%22%3A%7B%22type%22%3A%22led%22%7D%7D</a></p>



<h2>Setting it up</h2>



<p>Disclaimer: The toolchain is only tested on Windows (x86-64) and Linux (x86-64), and probably will work for MacOS. It 100% won’t work on 32bit systems since some dependencies (WASI and Binaryen) are 64bit only.</p>



<p>You’ll need your Arduino IDE installed first.</p>



<p>Go to File -&gt; Preferences, and add <a href="https://github.com/wasmino/wasmino-core/releases/download/v0.0.1/package_wasmino_index.json">https://github.com/wasmino/wasmino-core/releases/download/v0.0.1/package_wasmino_index.json</a> to “Additional Boards Manager URLs”.</p>



<figure><img data-attachment-id="368" data-permalink="https://blog.yifangu.com/image-8/" data-orig-file="https://yifangucom.files.wordpress.com/2020/12/image.png" data-orig-size="969,725" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-medium-file="https://yifangucom.files.wordpress.com/2020/12/image.png?w=300" data-large-file="https://yifangucom.files.wordpress.com/2020/12/image.png?w=750" src="https://yifangucom.files.wordpress.com/2020/12/image.png?w=969" alt="" srcset="https://yifangucom.files.wordpress.com/2020/12/image.png 969w, https://yifangucom.files.wordpress.com/2020/12/image.png?w=150 150w, https://yifangucom.files.wordpress.com/2020/12/image.png?w=300 300w, https://yifangucom.files.wordpress.com/2020/12/image.png?w=768 768w" sizes="(max-width: 969px) 100vw, 969px"></figure>



<p>Install “Wasmino Virtual Boards” in Tools -&gt; Board -&gt; Board Manager. Select Wasmino as as target board.</p>



<p>Write some Arduino code, click upload, and an URL will be generated for you. (If you are uploading for the first time, it will ask you to login to your GitHub account. It uses GitHub Gist for saving the compiled WASM binary. The login times out in 60 seconds.)</p>



<figure><img data-attachment-id="402" data-permalink="https://blog.yifangu.com/image-1-4/" data-orig-file="https://yifangucom.files.wordpress.com/2020/12/image-1.png" data-orig-size="969,725" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-1" data-image-description="" data-medium-file="https://yifangucom.files.wordpress.com/2020/12/image-1.png?w=300" data-large-file="https://yifangucom.files.wordpress.com/2020/12/image-1.png?w=750" src="https://yifangucom.files.wordpress.com/2020/12/image-1.png?w=969" alt="" srcset="https://yifangucom.files.wordpress.com/2020/12/image-1.png 969w, https://yifangucom.files.wordpress.com/2020/12/image-1.png?w=150 150w, https://yifangucom.files.wordpress.com/2020/12/image-1.png?w=300 300w, https://yifangucom.files.wordpress.com/2020/12/image-1.png?w=768 768w" sizes="(max-width: 969px) 100vw, 969px"></figure>



<p>Paste that URL into your browser and use the UI to add LEDs or toggle switches. The URL will automatically update as you make changes. You can then copy the resulting URL in the browser and share it with other people.</p>



<h2>Caveats</h2>



<p>The Wasmino should be viewed as having an infinitely fast CPU, and operations other than <code>delay</code> and <code>delayMicroseconds</code> do not take any CPU time. Calling time functions <code>micros</code> and <code>millis</code> should reflect this. IO can only happen during sleep, therefore you cannot do</p>


<pre title="">while (!digitalRead(2)) {} // this will hang the browser tab
</pre>


<p>and should do this instead</p>


<pre title="">while (!digitalRead(2)) {
    delay(50);
}
</pre>


<p>Having a infinitely fast CPU also means that interrupts will only happen during <code>delay</code> and <code>delayMicroseconds</code>. It is still good practice to use <code>noInterrupts</code> and <code>interrupts</code> to protect critical sections if you plan to use your code on real hardware.</p>



<p>Other caveats exist such as the lack of <code>BUILTIN_LED</code> macro since Wasmino, being virtual, doesn’t have a built-in LED.</p>



<h2>What works and what doesn’t work</h2>



<pre><code>From: https://www.arduino.cc/reference/en/

y: working
n: not working

Digital I/O
y   digitalRead()
y   digitalWrite()
y   pinMode()
Analog I/O
y*  analogRead()
n   analogReference()
y   analogWrite()
Zero, Due &amp; MKR Family
n   analogReadResolution()
n   analogWriteResolution()
Advanced I/O
n   noTone()
n   pulseIn()
n   pulseInLong()
n   shiftIn()
n   shiftOut()
n   tone()
Time
y   delay()
y   delayMicroseconds()
y   micros()
y   millis()
Math
y   abs()
y   constrain()
y   map()
y   max()
y   min()
y   pow()
y   sq()
y   sqrt()
Trigonometry
y   cos()
y   sin()
y   tan()
Characters
n   isAlpha()
n   isAlphaNumeric()
n   isAscii()
n   isControl()
n   isDigit()
n   isGraph()
n   isHexadecimalDigit()
n   isLowerCase()
n   isPrintable()
n   isPunct()
n   isSpace()
n   isUpperCase()
n   isWhitespace()
Random Numbers
n   random()
n   randomSeed()
Bits and Bytes
y   bit()
y   bitClear()
y   bitRead()
y   bitSet()
y   bitWrite()
y   highByte()
y   lowByte()
External Interrupts
y   attachInterrupt()
y   detachInterrupt()
Interrupts
y   interrupts()
y   noInterrupts()
Communication
y*  Serial
y   Stream
USB
n   Keyboard
n   Mouse

*   Not exposed in the demo web app.
*   Not exposed in the demo web app.</code></pre>



<p>The Wasmino Arduino core is available at <a href="https://github.com/wasmino/wasmino-core">https://github.com/wasmino/wasmino-core</a>.</p>



<p>The runtime is also available at <a href="https://github.com/wasmino/wasmino-runtime">https://github.com/wasmino/wasmino-runtime</a>.</p>




	</div><!-- .entry-content -->

	<!-- .entry-footer -->

				
</article><!-- #post-${ID} -->

	<nav role="navigation" aria-label="Posts">
		<h2>Post navigation</h2>
		
	</nav>
<!-- #comments -->

		</main><!-- #main -->
	</section><!-- #primary -->


	</div></div>]]>
            </description>
            <link>https://blog.yifangu.com/2020/12/30/wasmino-wasm-arduino-running-arduino-code-in-browser/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25581081</guid>
            <pubDate>Wed, 30 Dec 2020 12:26:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Emotional headlines have an impact regardless of the credibility of the source]]>
            </title>
            <description>
<![CDATA[
Score 231 | Comments 84 (<a href="https://news.ycombinator.com/item?id=25581064">thread link</a>) | @rustoo
<br/>
December 30, 2020 | https://www.hu-berlin.de/en/press-portal/nachrichten-en/december-2020/nr-201221 | <a href="https://web.archive.org/web/*/https://www.hu-berlin.de/en/press-portal/nachrichten-en/december-2020/nr-201221">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><span><span><span><span lang="EN-GB" xml:lang="EN-GB">Neurocognitive studies by researchers at the Humboldt-Universität zu Berlin (HU) show that headlines with emotional content influence our judgments about other people even when we consider the media source to be untrustworthy.</span></span></span></span></p>

<p><span><span><span><span lang="EN-GB" xml:lang="EN-GB">Rumours, half-truths and misinformation can be consumed and shared non-stop online and have an enormous reach. Although their truthfulness is questionable, they can have a significant impact on personal opinions and public discourse. Until now, however, little was known about the consequences of confrontation with such information on how it is processed in our brains and to what extent this neural process influences our judgments. New findings from neurocognitive psychology show that emotionally charged headlines exert a major influence on the way we process information and form judgments of others, even when we do not consider the news source credible.&nbsp; </span></span></span></span></p>

<h3><span><span><span>Exposure to headlines from trustworthy and untrustworthy sources</span></span></span></h3>

<p><span><span><span><span lang="EN-GB" xml:lang="EN-GB">The credibility we ascribe to news sources seems to be a simple cue for judging or classifying the truthfulness of information. But does such classification also protect us from the influence of emotional headlines? To investigate this, subjects in the study by the Berlin School of Mind and Brain and the HU’s Department of Psychology were confronted with fictitious headlines in the particular online layouts of well-known German media sources. There, they read headlines with social-emotional or comparatively neutral information about fictitious persons. For example, one person was reported to have embezzled tax revenues and another, to have shown outstanding civil courage. After a short break, the brain activity of the subjects was measured while they judged the persons presented on the basis of their faces. </span></span></span></span></p>

<h3><span><span><span>Emotions influence our judgments – the credibility of the media source has no effect</span></span></span></h3>

<p><span><span><span><span lang="EN-GB" xml:lang="EN-GB">Although the participants rated the media sources as having different levels of credibility, these ratings did not play a role in the formation of their opinions. The emotional content of the headlines, on the other hand, had a strong impact on their judgments: even when subjects did not trust a news source, they made extreme judgments about people whose negative or positive behaviour was reported in the headlines. Participants rated people whose behaviour was described as negative as unlikable and negative, while they rated people who made headlines due to good deeds as very likable and positive.&nbsp; </span></span></span></span></p>

<h3><span><span><span>Brain activity shows the impact of emotional headlines</span></span></span></h3>

<p><span><span><span><span lang="EN-GB" xml:lang="EN-GB">The subjects' brain activity was recorded using an electroencephalogram (EEG) while they made judgments about the individuals. Fast, involuntary brain responses can be distinguished here from slower, more controlled responses. The researchers had expected the latter to involve consideration of the source's credibility in addition to emotion, and thus that credibility might factor into people’s judgments, whereas emotion should dominate in early and more involuntary responses. However, both late and early brain responses showed dominant influences of headline emotionality independent of credibility. </span></span></span></span></p>

<p><span><span><span><span lang="EN-GB" xml:lang="EN-GB">These new findings show that news content that triggers emotions such as excitement or outrage does not simply bounce off us, even when the trustworthiness of the source is judged to be low. Rather, reservations about the reliability of a source have no effect when emotional content dominates our judgment. Recognising and further exploring these consequences of emotionally charged news is an essential first step in protecting against the potentially damaging ramifications of rumours, half-truths, and misinformation. </span></span></span></span></p>

<h3><span><span><span>Publication </span></span></span></h3>

<p><span><span><span><span>Baum, J. &amp; Abdel Rahman, R. (2020). </span><span lang="EN-GB" xml:lang="EN-GB">Emotional news affects social judgments independent of perceived media credibility. <i>Social Cognitive and Affective Neuroscience</i>. <a href="http://doi.org/10.1093/scan/nsaa164">http://doi.org/10.1093/scan/nsaa164</a> </span></span></span></span></p>

<h3><span><span><span>Contact </span></span></span></h3>

<p><span><span><span><span lang="EN-GB" xml:lang="EN-GB"><strong>Prof. Dr Rasha Abdel Rahman</strong><br>
Neurocognitive Psychology<br>
Department of Psychology<br>
<a href="mailto:rasha.abdel.rahman@hu-berlin.de">rasha.abdel.rahman@hu-berlin.de</a> &nbsp;<br>
Tel.: 030 2093-9413</span></span></span></span></p>

<p><span><span><strong>Julia Baum</strong><br>
Neurocognitive Psychology<br>
Department of Psychology<br>
<a href="mailto:julia.baum@hu-berlin.de">julia.baum@hu-berlin.de</a></span></span></p>
</div></div>]]>
            </description>
            <link>https://www.hu-berlin.de/en/press-portal/nachrichten-en/december-2020/nr-201221</link>
            <guid isPermaLink="false">hacker-news-small-sites-25581064</guid>
            <pubDate>Wed, 30 Dec 2020 12:23:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[An Assange confidant in the sights of the CIA]]>
            </title>
            <description>
<![CDATA[
Score 21 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25580295">thread link</a>) | @tosh
<br/>
December 30, 2020 | https://www.golem.de/news/andy-mueller-maguhn-ein-assange-vertrauter-im-visier-der-cia-2012-153049.html | <a href="https://web.archive.org/web/*/https://www.golem.de/news/andy-mueller-maguhn-ein-assange-vertrauter-im-visier-der-cia-2012-153049.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="screen">

<div>
<div>
    
    <section>
        <h2>Mit Werbung weiterlesen</h2>
        <p>Besuchen Sie Golem.de wie gewohnt mit Werbung und Tracking, indem Sie der Nutzung aller Cookies zustimmen.
            Details zum Tracking finden Sie
            <!-- in der <a target="_blank" href="https://www.golem.de/sonstiges/Datenschutz.html">Datenschutz&shy;erkl&auml;rung</a> und -->
            im <span id="gsptextpc1">Privacy Center</span>.
        </p>
        <p id="loadhint">
                Skript wurde nicht geladen. Informationen zur Problembehandlung finden Sie
                <a href="https://www.golem.de/sonstiges/techinfo.html" target="_blank">hier</a>.
        </p>
        <div>
            
            <p id="gspcookiehint">Um der Nutzung von Golem.de mit Werbung zustimmen zu können,
                müssen Cookies in Ihrem Browser aktiviert sein. Weitere Informationen finden Sie
                <a href="https://www.golem.de/sonstiges/techinfo.html" target="_blank">hier</a>.
            </p>
            <p id="gspiframehint">Die Zustimmung in einem iFrame ist nicht möglich.<br>
                <a href="#" onclick="GolemConsent.redirectBack(true);">Seite in eigenem Fenster öffnen</a>.
            </p>
            <p id="fallbackhint">Der Zustimmungs-Dialog konnte nicht korrekt geladen werden,
                eine Zustimmung gilt nur vorläufig. Informationen zur Problem­behandlung finden Sie
                <a href="https://www.golem.de/sonstiges/techinfo.html" target="_blank">hier</a>.
            </p>
        </div>
        <p>
            Die Möglichkeit zum Widerruf finden Sie
            in unserer <a target="_blank" href="https://www.golem.de/sonstiges/Datenschutz.html#Widerruf">Datenschutz­erklärung</a>
            oder über den Link <span id="gsptextpc2">Cookies &amp; Tracking</span> am Ende jeder Seite.
        </p>
    </section>
    
    <section>
        <h2>… oder Golem pur bestellen</h2>
        <p>Mit Golem pur ab 3 Euro pro Monat können Sie Golem.de ohne Analyse- und
            Werbe­cookies nutzen, es kommen nur für unser Angebot erforderliche Cookies zum Einsatz.
        </p>
        <a target="_blank" href="https://redirect.golem.de/nl.php?id=account_cta_cmp">Zu Golem pur</a>
        <p id="loginhint">
        Bereits Pur-Leser?
        <a href="https://account.golem.de/user/login?redirect=https://www.golem.de/news/andy-mueller-maguhn-ein-assange-vertrauter-im-visier-der-cia-2012-153049.html">Hier anmelden</a>.            <span id="nosubhint">Kein aktives Abo vorhanden.</span>
        </p>
    </section>
    <div>
        
        <div>
            <details>
                <summary>Informationen auf einem Gerät speichern und/oder abrufen</summary>
                <p>Für die Ihnen angezeigten Verarbeitungszwecke können Cookies, Geräte-Kennungen
                    oder andere Informationen auf Ihrem Gerät gespeichert oder abgerufen werden.
                </p>
            </details>
            <details>
                <summary>Personalisierte Anzeigen und Inhalte, Anzeigen- und Inhaltsmessungen, Erkenntnisse über Zielgruppen und Produktentwicklungen</summary>
                <p>Anzeigen und Inhalte können basierend auf einem Profil personalisiert werden.
                    Es können mehr Daten hinzugefügt werden, um Anzeigen und Inhalte besser zu personalisieren.
                    Die Performance von Anzeigen und Inhalten kann gemessen werden.
                    Erkenntnisse über Zielgruppen, die die Anzeigen und Inhalte betrachtet haben, können abgeleitet werden.
                    Daten können verwendet werden, um Benutzerfreundlichkeit, Systeme und Software aufzubauen oder zu verbessern.
                </p>
            </details>
            <details>
                <summary>Genaue Standortdaten verwenden</summary>
                <p>Es können genaue Standortdaten verarbeitet werden,
                    um sie für einen oder mehrere Verarbeitungszwecke zu nutzen.
                </p>
            </details>
        </div>
    </div>
    
</div><!-- c2_content -->
</div><!-- c2_wrapper -->

</div></div>]]>
            </description>
            <link>https://www.golem.de/news/andy-mueller-maguhn-ein-assange-vertrauter-im-visier-der-cia-2012-153049.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25580295</guid>
            <pubDate>Wed, 30 Dec 2020 10:01:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Virtualize Your Network on FreeBSD with VNET]]>
            </title>
            <description>
<![CDATA[
Score 85 | Comments 21 (<a href="https://news.ycombinator.com/item?id=25580286">thread link</a>) | @vermaden
<br/>
December 30, 2020 | https://klarasystems.com/articles/virtualize-your-network-on-freebsd-with-vnet/ | <a href="https://web.archive.org/web/*/https://klarasystems.com/articles/virtualize-your-network-on-freebsd-with-vnet/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>




<div>
<h2><strong>FreeBSD Jails are a well-known feature and have become core to many excellent tools on FreeBSD such as the Poudriere package builder. Jails offer process and file system isolation, but for a long time they did not offer very satisfying network isolation. VIMAGE provides isolation for networking through virtual network stacks or VNET.</strong></h2>



<p>VIMAGE was first presented in the Paper <a href="https://papers.freebsd.org/2003/zec-vimage/">“Implementing a Clonable Network Stack in the FreeBSD Kernel” by Macro Zec in 2003</a> and VIMAGE code appeared first in FreeBSD 8.0, however it wasn’t until FreeBSD 12.0 that VIMAGE was built into FreeBSD GENERIC kernels and it is a bit of an overlooked feature.</p>



<p>If you have used jails before you might wonder what more VNET jails offer or why you would want to migrate from using localhost-based networking. VNET jails give each jail its own isolated copy of the network stack. They get everything from the IP layer up, creating a network stack that is entirely its own, almost anything you could do with a distinct host you can do with a jail and VNET.</p>



<p>VNET network stacks can be given interfaces from the host and once an interface has been delegated into a VNET jail it disappears from the view of the host, becoming only visible in the jail. FreeBSD offers the epair interface that acts as a virtual Ethernet cable. Give one end of an epair to a VNET jail and keep the other end in the host and you have a way to network between the host and the jail or even between multiple jails. Unlike normal jail networking a VNET jail is able to fully use the interface and once given the correct permissions it can perform packet captures and traces as if it were a full host.</p>



<p>VNET allows jails to be closer to full virtual machines with much less overhead and they offer the ability to test networking in isolation with a very similar environment to the jail host.</p>



<h4><strong>Using VNET with a jail</strong></h4>



<p>The best way to experiment with VNET is to create some test jails and play with their networks. With VNET it is easy and cheap to create a new separate network that will not interfere with the hosts configuration.</p>



<p>First to demonstrate the power the VNET provides we will create a simple jail that only isolates networking from the host. If we run the following three commands on a FreeBSD system we can create a simple jail:</p>



<pre><code>    host # jail -c name=emptyjail persist vnet
    host # jexec emptyjail /bin/sh
    emptyjail # ifconfig
    lo0: flags=8008&lt;LOOPBACK,MULTICAST&gt; metric 0 mtu 16384
    options=680003&lt;RXCSUM,TXCSUM,LINKSTATE,RXCSUM_IPV6,TXCSUM_IPV6&gt;
    groups: lo
    nd6 options=21&lt;PERFORMNUD,AUTO_LINKLOCAL&gt;
</code></pre>



<p>The important flags to the jail command here are <em>persist</em> and <em>vnet</em>, <em>persist</em> keeps the jail around even though nothing is running inside of it, <em>vnet</em> creates the jail with its own VIMAGE network stack.</p>



<p>The jail we have created contains a loop back interface (lo0) but cannot see any of the interfaces from the host, it has been isolated at the network and process level. Because we do not specify a new root to use for the jails file system, it can see everything on the host file system as before, this can be really handy when you are developing and running tests that take advantage of VNET.</p>



<p>For our jail to be useful we need to be able to access network interfaces, VNET jails can be given any interface and once given to a jail they vanish from the view of the host network stack. When we want to network between the host and the jail we can use an epair(4) device. epair devices are a pair of Ethernet-like interfaces connected back to back, sort of like an emulated patch cable. Each side is denoted with a letter, they come as an ‘a’ and a ‘b’ part. If we create an epair and move one half into the jail, once it is configured we can communicate from the host to the jail.</p>



<pre><code>    host # ja    host # ifconfig epair create
    epair0a
    host # ifconfig
    lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; metric 0 mtu 16384
            options=680003&lt;RXCSUM,TXCSUM,LINKSTATE,RXCSUM_IPV6,TXCSUM_IPV6&gt;
            inet6 ::1 prefixlen 128
            inet6 fe80::1%lo0 prefixlen 64 scopeid 0x2
            inet 127.0.0.1 netmask 0xff000000
            groups: lo
            nd6 options=21&lt;PERFORMNUD,AUTO_LINKLOCAL&gt;
    epair0a: flags=8842&lt;BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
            options=8&lt;VLAN_MTU&gt;
            ether 02:c5:7b:f8:1e:0a
            groups: epair
            media: Ethernet 10Gbase-T (10Gbase-T &lt;full-duplex&gt;)
            status: active
            nd6 options=29&lt;PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL&gt;
    epair0b: flags=8842&lt;BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
            options=8&lt;VLAN_MTU&gt;
            ether 02:c5:7b:f8:1e:0b
            groups: epair
            media: Ethernet 10Gbase-T (10Gbase-T &lt;full-duplex&gt;)
            status: active
            nd6 options=29&lt;PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL&gt;
</code></pre>



<p>This time when we create our jail we delegate one half of the epair to it. We need to configure the interface in the jail and on the host. Once we have the interfaces configured we can communicate between the host and jail (Note: when you delegate an interface to a jail all the configuration will be erased. You must configure the interface once it is inside the jail).</p>



<pre><code>    host # jail -c name=networkjail persist vnet vnet.interface=epair0b 
    host # jexec networkjail /bin/sh

    networkjail # ifconfig
    lo0: flags=8008&lt;LOOPBACK,MULTICAST&gt; metric 0 mtu 16384
            options=680003&lt;RXCSUM,TXCSUM,LINKSTATE,RXCSUM_IPV6,TXCSUM_IPV6&gt;
            groups: lo
            nd6 options=21&lt;PERFORMNUD,AUTO_LINKLOCAL&gt;
    epair0b: flags=8842&lt;BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
            options=8&lt;VLAN_MTU&gt;
            ether 02:c5:7b:f8:1e:0b
            groups: epair
            media: Ethernet 10Gbase-T (10Gbase-T &lt;full-duplex&gt;)
            status: active
            nd6 options=21&lt;PERFORMNUD,AUTO_LINKLOCAL&gt;
    networkjail # ifconfig epair0b inet 192.0.2.2/24 up     
    networkjail # exit

    host # ifconfig epair0a inet 192.0.2.1/24 up
    host # ping 192.0.2.2
    PING 192.0.2.2 (192.0.2.2): 56 data bytes
    64 bytes from 192.0.2.2: icmp_seq=0 ttl=64 time=0.143 ms
    64 bytes from 192.0.2.2: icmp_seq=1 ttl=64 time=0.069 ms
    ^C
    --- 192.0.2.2 ping statistics ---
    2 packets transmitted, 2 packets received, 0.0% packet loss
    round-trip min/avg/max/stddev = 0.069/0.106/0.143/0.037 ms
</code></pre>



<p>Python3 is installed on the host and as our jail doesn’t isolate the file system, all installed software is also available to the jail. We can use the http server built in to python3 to demonstrate a simple network service running inside the jail.</p>



<pre><code>    host # jexec networkjail sh -c "cd /usr/src; python3 -m http.server" 
    Serving HTTP on 0.0.0.0 port 8000 (http://0.0.0.0:8000/) ...
</code></pre>



<p>With this a web browser on the host machine can be pointed at 192.0.2.2:8000 and we can browse around the structure of the FreeBSD source tree that lives in /usr/src. We can run any service that will run on a FreeBSD host from within this VNET jail. The difference here between older jail networking is that we can do anything with the epair that we could do with a real network interface such as place add it to a bridge.</p>



<p>When we remove networkjail the half of the epair that was delegated is returned to the host:</p>



<pre><code>    host # ifconfig epair0b
    ifconfig: interface epair0b does not exist
    host # jls -v
       JID  Hostname                      Path
            Name                          State
            CPUSetID
            IP Address(es)
         1                                /
            networkjail                   ACTIVE
            3
    host # jail -r networkjail
    host # ifconfig epair0b
    epair0b: flags=8842&lt;BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
            options=8&lt;VLAN_MTU&gt;
            ether 02:c5:7b:f8:1e:0b
            groups: epair
            media: Ethernet 10Gbase-T (10Gbase-T &lt;full-duplex&gt;)
            status: active
            nd6 options=21&lt;PERFORMNUD,AUTO_LINKLOCAL&gt;
</code></pre>



<p>When we destroy either half of the epair both halves will be removed from the system, even if the side delegated to a jail.</p>



<p>VNET offers a facility for local testing with a network segment that is very similar to a real network. It is possible to perform any action from the host as you would on a non-virtual network interface such as adding it to a bridge or firewalling.</p>



<h4><strong>Using VNET to isolate networks</strong></h4>



<p>We are not limited to using virtual interfaces when using VNET, but are able to delegate any interface on the host into the VNET. VNET opens up the opportunity to isolate out chunks of networks allowing us to build complex topologies such as soft routers and firewalls.</p>



<p>We can also use the isolation offered by VNET to offer services from a host on a particular interface that might be undesirable or destructive or if the address space that a piece of equipment uses clashes with the network that the host is on.</p>



<p>On this development machine we have network interfaces on two different networks, one is in the development environment and the other lives in the sandbox testing environment. Never can packets go between the two. The sandbox testing network is where virtual machines live, normally these bhyve machines are configured with a tap interface and they join the network via a bridge interface on the host. VNET allows us to do the same thing, but with jails.</p>



<p>Before we start we need to load the kernel modules for epair and bridge on the host, they normally load automatically on the host when you try to use them, but the jail is unable to do this.</p>



<pre><code>    host # kldload if_epair if_bridge</code></pre>



<p>VNET also allows us to give a physical network interface on the development host to a jail and from that jail create further sub VNET jails that are isolated from the hosts network:</p>



<pre><code>    host # jail -c name=isojail persist vnet vnet.interface=em0 children.max=1</code></pre>



<p>This time we create …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://klarasystems.com/articles/virtualize-your-network-on-freebsd-with-vnet/">https://klarasystems.com/articles/virtualize-your-network-on-freebsd-with-vnet/</a></em></p>]]>
            </description>
            <link>https://klarasystems.com/articles/virtualize-your-network-on-freebsd-with-vnet/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25580286</guid>
            <pubDate>Wed, 30 Dec 2020 10:00:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[ACE: Apple Type-C Port Controller Secrets]]>
            </title>
            <description>
<![CDATA[
Score 274 | Comments 124 (<a href="https://news.ycombinator.com/item?id=25579286">thread link</a>) | @aunali1
<br/>
December 29, 2020 | https://blog.t8012.dev/ace-part-1/ | <a href="https://web.archive.org/web/*/https://blog.t8012.dev/ace-part-1/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
<div>
<article>

<figure>
<img srcset="https://blog.t8012.dev/content/images/size/w300/2020/12/s-l400.jpg 300w,
                            https://blog.t8012.dev/content/images/size/w600/2020/12/s-l400.jpg 600w,
                            https://blog.t8012.dev/content/images/size/w1000/2020/12/s-l400.jpg 1000w,
                            https://blog.t8012.dev/content/images/size/w2000/2020/12/s-l400.jpg 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://blog.t8012.dev/content/images/size/w2000/2020/12/s-l400.jpg" alt="ACE: Apple Type-C Port Controller Secrets | Part 1">
</figure>
<section>
<div>
<h2 id="introduction">Introduction</h2><p>After our team successfully <a href="https://www.theiphonewiki.com/wiki/T8012#Bootrom_Exploits">ported</a> the <a href="https://www.theiphonewiki.com/wiki/Checkm8_Exploit">checkm8</a> exploit to the AppleSilicon T2 chip, we began exploring methods for closed-case hardware debugging, or CCD, as found on other iDevices. On such devices, the <a href="https://developer.arm.com/architectures/cpu-architecture/debug-visibility-and-trace/coresight-architecture/serial-wire-debug">Serial Wire Debug</a> protocol can be muxed out across the Lightning connector, which we presumed was replicable across the USB Type-C connector. With some assistance from easily obtainable schematics for our MacBook models, we have determined that muxing is handled by an Apple/TI co-designed <a href="https://www.usb.org/document-library/usb-type-cr-port-controller-interface-specification">USB Type-C Port Controller</a>, colloquially known as "ACE". The following details our findings and the vendor defined protocol, termed AppleVDM, Apple has implemented over the USB Power Delivery standard for muxing out various internal peripherals.</p><p>A member of our team, @h0m3us3r has dumped the ACE firmware by attaching a SWD probe onto exposed test points on the logic board of a MacBook Pro. Thanks to this we were able to obtain both the ROM and the firmware payload patch applied over it and discover that the ACE chip contains a <code><a href="https://developer.arm.com/ip-products/processors/cortex-m/cortex-m0">Cortex-M0 r0p1</a></code> ARM core. Most of the static analysis was later conducted by @mrarm.</p><pre><code>Connecting to target via SWD
Found SW-DP with ID 0x0BC11477
DPIDR: 0x0BC11477
Scanning AP map to find all available APs
AP[1]: Stopped AP scan as end of AP map has been reached
AP[0]: AHB-AP (IDR: 0x04770031)
Iterating through AP map to find AHB-AP to use
AP[0]: Core found
AP[0]: AHB-AP ROM base: 0xE00FF000
CPUID register: 0x410CC601. Implementer code: 0x41 (ARM)
Found Cortex-M0 r0p1, Little endian.
FPUnit: 4 code (BP) slots and 0 literal slots
CoreSight components:
ROMTbl[0] @ E00FF000
ROMTbl[0][0]: E000E000, CID: B105E00D, PID: 000BB008 SCS
ROMTbl[0][1]: E0001000, CID: B105E00D, PID: 000BB00A DWT
ROMTbl[0][2]: E0002000, CID: B105E00D, PID: 000BB00B FPB
Cortex-M0 identified.
</code></pre>
<center>Segger J-Link Probe output when attached to ACE2 (CD3217).</center><h2 id="ace-overview">ACE Overview</h2><p>To better understand the inner-workings of ACE, we began looking for identifying information within the dumped firmware. We found the string <code>CD3217 &nbsp; HW0022 FW002.032.00 ZACE2-J213</code> and upon searching <code>CD3217</code> online resulted in the similar <a href="https://www.ti.com/lit/ds/symlink/tps65986.pdf">TI TPS65986</a>. Based on how similar the functional description of the aforementioned TI USB Type-C Controller is to ACE, and considering that TI co-designed ACE with Apple, it was reasonable to assume most of the technical information applies to ACE.</p><p>TI's USB Type-C Controllers expose an I²C interface for host management, for which we found the excellent <a href="https://www.ti.com/lit/ug/slvuan1a/slvuan1a.pdf">Host Interface Technical Reference Manual</a>, documenting a multitude of public I²C registers and commands.</p><figure><img src="https://blog.t8012.dev/content/images/2020/12/image.png" alt="" srcset="https://blog.t8012.dev/content/images/size/w600/2020/12/image.png 600w, https://blog.t8012.dev/content/images/size/w1000/2020/12/image.png 1000w, https://blog.t8012.dev/content/images/2020/12/image.png 1330w" sizes="(min-width: 720px) 720px"><figcaption>TPS65986 Functional Block Diagram</figcaption></figure><p>The primary component of focus based on the above block diagram is the digital core, which communicates directly with the host and runs the firmware we dumped previously. As mentioned, the core is based on a <code>Cortex-M0 r0p1</code>. Unfortunately, we were unable to create a complete memory map with peripherals as TI does not release public information on the core itself. Regardless, we have the basic memory layout as follows:</p><p>Since we weren't sure whether the code for muxing out things lives in the ACE or somewhere else (there are registers for receiving vendor messages and processing them on another chip), we also investigated the firmware of chips that can directly communicate with the ACE, the SMC, part of T2 SoC, and the Thunderbolt controller. While we obtained and analyzed the I2C usages in the SMC firmware and found no suspicious code whatsoever, we had issues with analyzing the Thunderbolt controller firmware and decided to only reverse engineer it as a last resort. We initially thought that the only way that we could talk with the ACE from Mac OS (Intel) was by modifying the SMC firmware to relay commands to the ACE. While we have successfully managed to edit the SMC firmware and talk with the ACE, it turned out that this effort wasn't needed. Later we stumbled upon the following project: <a href="https://github.com/osy/ThunderboltPatcher">https://github.com/osy/ThunderboltPatcher</a>, which uses the AppleHPM kext in order to communicate with the ACE.</p><p>The AppleHPM KEXT allows a user space program running as root to read and write ACE registers. It also has several interesting methods that seem to be intended for reading and writing registers on ACEs connected using a USB Type-C cable to the DUT. Unfortunately, while we tried invoking them, we didn't manage to get these methods working, suggesting that either they have been disabled on production hardware or need some more preparation work in order to work. We also discovered that there exists an EFI mode firmware updater for the ACE called <code>HPMUtil.efi</code>, which we also partially reverse engineered. There seems to be several methods of updating the ACEs depending on the hardware revision; the EFI program also seems to have an argument that makes it update externally connected ACEs, however at least for recent ACEs it seems to be broken; the only update route that would work on the firmware dump we obtained from our Mac (based on available commands) seems to be hardcoded in a few places to run commands on the local ACE.</p><p>There are at least 3 known revisions of the ACE chip. Based on hardware available to us, the first variant, ACE1, is known to be used in 2018 and older T2 models, the second, ACE2, in 2019 and newer T2 models, and the third in 2020 M1 enabled laptops. The software update method differs significantly between ACE1 and ACE2. At the time of writing the article, we have only successfully dumped a single ACE firmware (ACE2) and all the analysis here is based on that version.</p><h2 id="usb-pd">USB PD</h2><p>The logical channel for telling the Mac to mux out something other than USB from the chip would be USB PD, since ACE's main communication vector with external devices is USB PD and because controlling data lines using USB PD is a widespread practice (see: MIPI debug interface as well as this article on getting UART off an Samsung phone: <a href="https://ntnuopen.ntnu.no/ntnu-xmlui/bitstream/handle/11250/2632162/bookchapter.pdf">https://ntnuopen.ntnu.no/ntnu-xmlui/bitstream/handle/11250/2632162/bookchapter.pdf</a>). This TI-derived controller can be configured to support some variant of MIPI debug mode by default (and the MIPI debug ID is present in the Apple ACE firmware as well), however as we discovered later it is disabled in Apple's configuration and can not be used. As such, we decided to look for other Vendor Defined Messages that the ACE understands.</p><p>In the USB PD protocol, entering a vendor mode begins by sending a SVID (Standard ID or Vendor ID, usually the vendor's USB VID) and object position (think of it as a sub mode that the vendor can define). By analyzing the ACE firmware we found at least 3 possible object positions under the Apple SVID, however their availability is dynamic and by default only a single SVID and object position is available. This primary mode is, for example, used when the Apple's charger is connected. We are not sure when the other modes are activated and plan to do further work related to figuring out what the purpose of these other modes is.</p><p>Since it would be logical if there was a reply for the command for entering a mode and also because reverse engineering an embedded firmware with no context whatsoever is hard, we decided to look into the <code>VDMs</code> command, which can be used to send a VDM PD message. This allowed us to gather important information about the firmware's inner workings and also to find a few functions that sent a message with Apple's vendor ID. We investigated several of these, some of them were indeed related to the protocol used with the charger (which we aren't sure what the purpose of is; however from what it seems it can be only used to read some memory sections from the external device), but we also found another procedure that had three cases, two of which replied with 16-bit values (created from information from a particular memory area) in a similar way to the Discover SVIDs VDM, and one of them was complex and handled additional logic. We investigated it further and eventually managed to use it to mux things out of the controller.</p><p>Another possible use of the <code>VDMs</code> command can be found in the AppleHPM KEXT and the <code>HPLUtil.efi</code> program, which is reading registers from externally connected devices. Since we haven't given much attention to it as it was not our goal and our experiments were a failure, we are not going to describe it in this article.</p><p>Note that since SWD can also be muxed from the ACE, further reverse engineering ACE modes is not that interesting; you should be able to use the ACE's SWD to trigger any mux choice of your choosing and directly talk to all peripherals ACE has access to.</p><h2 id="dive-into-the-code">Dive into the code</h2><p>With @h0m3us3r's dump of ROM and RAM memory, we started by loading the ACE firmware in IDA. The reset handler address is present at <code>0x00000004</code> and can be used to get the address of the entrypoint.</p><p>The command table can be trivially found by looking for the 4 character codes. Register table requires a bit more effort but is also not hard to find (since there is a register that is a string, you can find what references it). In comparison to the public TI documentation, there are substantially more commands and registers available, some of which are Apple-specific additions. Since the firmware has barely any strings or debug information, the command list has been very helpful.</p><p>After initially exploring the firmware we quickly stumbled upon cursed looking trampolines such as the following:</p><pre><code>ROM:000266C2 _Command_HRST                           ; DATA XREF: ROM:commandsâ†“o
ROM:000266C2
ROM:000266C2
ROM:000266C2                 PUSH            {R4-R6,LR}
ROM:000266C4                 MOV             R4, R1
ROM:000266C6                 MOV             R5, R0
ROM:000266C8                 BL              sub_E4
ROM:000266CC                 LDR             R0, =dword_20041040
ROM:000266CE                 MOV             R1, R4
ROM:000266D0                 ADDS            R0, #0x40 ; '@'
ROM:000266D2                 LDR             R2, [R0]
ROM:000266D4                 MOV             R0, R5
ROM:000266D6                …</code></pre></div></section></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.t8012.dev/ace-part-1/">https://blog.t8012.dev/ace-part-1/</a></em></p>]]>
            </description>
            <link>https://blog.t8012.dev/ace-part-1/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25579286</guid>
            <pubDate>Wed, 30 Dec 2020 06:49:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Candymail – Email Automation for Node.js]]>
            </title>
            <description>
<![CDATA[
Score 85 | Comments 53 (<a href="https://news.ycombinator.com/item?id=25578834">thread link</a>) | @sssaini
<br/>
December 29, 2020 | https://saasbase.dev/candymail | <a href="https://web.archive.org/web/*/https://saasbase.dev/candymail">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><article id="block-candymail"><p><span><span>CandyMail makes it easy to trigger and send multi-step email sequences in Node.js using a single JSON file. Built for bootstrappers, indie makers with special care.</span></span></p><div id="block-a7a22de82c9f4f61a9581a647e597231"><div><p><img alt="image" src="https://saasbase.dev/_next/image?url=https%3A%2F%2Fapi.super.so%2Fasset%2Fsaasbase.dev%2F638675a6-a551-47cc-b24f-892b2cff969e.png&amp;w=1080&amp;q=100" srcset="https://saasbase.dev/_next/image?url=https%3A%2F%2Fapi.super.so%2Fasset%2Fsaasbase.dev%2F638675a6-a551-47cc-b24f-892b2cff969e.png&amp;w=640&amp;q=100 1x, https://saasbase.dev/_next/image?url=https%3A%2F%2Fapi.super.so%2Fasset%2Fsaasbase.dev%2F638675a6-a551-47cc-b24f-892b2cff969e.png&amp;w=1080&amp;q=100 2x" decoding="async"></p></div></div><h2 id="block-f23dcaeb10b744778d2080a9d073d409"><span id="f23dcaeb10b744778d2080a9d073d409"></span><span><span><strong>Features</strong></span></span></h2><ol><li id="block-45aa8049a4cf4dfa90441e2d4a931dc9"><span><span><strong>Portable</strong></span><span>: Create, share and reuse email marketing strategies between different products</span></span></li><li id="block-04009c38a7d743eb85e3206079018bf7"><span><span><strong>Simple to use</strong></span><span>: Time to send, subject, body of the emails can all be set up in a single JSON file</span></span></li><li id="block-a64766efe6574cc9b4c72db02135e034"><span><span><strong>Free</strong></span><span>: No need to pay for monthly Mailchimp etc. payments for email automation plans</span></span></li></ol><h2 id="block-5ab828b20084466c9a9655231ea704e7"><span id="5ab828b20084466c9a9655231ea704e7"></span><span><span><strong>Use Cases</strong></span></span></h2><ul><li id="block-c44e7c12446340988c153bfdfe2d4487"><span><span>Build better onboarding by guiding the user through the app with paced training emails</span></span></li><li id="block-04216dfc690441ccbc29f2c49eb56297"><span><span>Reduce churn by sending exciting community content every few days</span></span></li><li id="block-20f9940a1ef542958ad8c5faa7b5be4c"><span><span>Convert more customers to paid plans by offering discounts based on the user's usage activity</span></span></li></ul><h2 id="block-ebb2664d7aff451b83ee65168e44bbc8"><span id="ebb2664d7aff451b83ee65168e44bbc8"></span><span><span><strong>Installation</strong></span></span></h2><p><span><span>Install candymail using yarn:</span></span></p><p><span><span>Or npm:</span></span></p><div id="block-3b1e9c2a5b5442d99676426c2499d03f"><pre><code><span>npm install --save candymail</span></code></pre><figcaption><span></span></figcaption></div><h2 id="block-dafd20b6db8f4fa495bcc253547865b6"><span id="dafd20b6db8f4fa495bcc253547865b6"></span><span><span><strong>Getting Started</strong></span></span></h2><h3 id="block-427f998161b748f498f9b6cbc5ced03a"><span id="427f998161b748f498f9b6cbc5ced03a"></span><span><span><strong>Configuration</strong></span></span></h3><p><span><span>Create aÂ&nbsp;</span><span><code>candymail.automation.json</code></span><span>Â&nbsp;file on the root level of your project.</span></span></p><p><span><span>Here's a sample:</span></span></p><div id="block-e0c98a5f7c5241d4bbe3eb12f1e5696c"><pre><code><span>{</span><span>
</span><span>  </span><span>"automations"</span><span>:</span><span> </span><span>[</span><span>
</span><span>    </span><span>{</span><span>
</span><span>      </span><span>"name"</span><span>:</span><span> </span><span>"automation1"</span><span>,</span><span>
</span><span>      </span><span>"description"</span><span>:</span><span> </span><span>"tell users about pro features"</span><span>,</span><span>
</span><span>      </span><span>"trigger_name"</span><span>:</span><span> </span><span>"proplan"</span><span>,</span><span>
</span><span>      </span><span>"emails"</span><span>:</span><span> </span><span>[</span><span>
</span><span>        </span><span>{</span><span>
</span><span>          </span><span>"trigger"</span><span>:</span><span> </span><span>"time"</span><span>,</span><span>
</span><span>          </span><span>"sendDelay"</span><span>:</span><span> </span><span>1</span><span>,</span><span>
</span><span>          </span><span>"subject"</span><span>:</span><span> </span><span>"Have you tried Feature A?"</span><span>,</span><span>
</span><span>          </span><span>"body"</span><span>:</span><span> </span><span>"Feature A will let you do ABC things. Check it out!"</span><span>,</span><span>
</span><span>          </span><span>"from"</span><span>:</span><span> </span><span>"abc@gmail.com"</span><span>
</span><span>        </span><span>}</span><span>,</span><span>
</span><span>        </span><span>{</span><span>
</span><span>          </span><span>"trigger"</span><span>:</span><span> </span><span>"time"</span><span>,</span><span>
</span><span>          </span><span>"sendDelay"</span><span>:</span><span> </span><span>3</span><span>,</span><span>
</span><span>          </span><span>"subject"</span><span>:</span><span> </span><span>"Try our feature B!"</span><span>,</span><span>
</span><span>          </span><span>"body"</span><span>:</span><span> </span><span>"We released feature B just last week and can't wait for you to try it out :)"</span><span>,</span><span>
</span><span>          </span><span>"from"</span><span>:</span><span> </span><span>"abc@gmail.com"</span><span>
</span><span>        </span><span>}</span><span>
</span><span>      </span><span>]</span><span>
</span><span>    </span><span>}</span><span>
</span><span>  </span><span>]</span><span>
</span><span></span><span>}</span><span>
</span>
</code></pre><figcaption><span></span></figcaption></div><h3 id="block-4016925d0984430085d1ad2a72663cce"><span id="4016925d0984430085d1ad2a72663cce"></span><span><span><strong>Supported Email Providers</strong></span></span></h3><ul><li id="block-d88924222cb4409b9a8d37f5c3a28ed0"><span><span>Gmail</span></span></li><li id="block-1df81b4e29f54e25944ccc0e93ef641d"><span><span>Looking for more support? Send me a message.</span></span></li></ul><h3 id="block-82f3fafe4e084cb7af5c77bca9444d1d"><span id="82f3fafe4e084cb7af5c77bca9444d1d"></span><span><span><strong>Usage</strong></span></span></h3><div id="block-8d7360b2d2d045448baf1ed1063f3e13"><pre><code><span>const</span><span> path </span><span>=</span><span> </span><span>require</span><span>(</span><span>'path'</span><span>)</span><span>
</span><span></span><span>const</span><span> candymail </span><span>=</span><span> </span><span>require</span><span>(</span><span>'candymail'</span><span>)</span><span>
</span>
<span></span><span>const</span><span> automationPath </span><span>=</span><span> path</span><span>.</span><span>resolve</span><span>(</span><span>'candymail.automation.json'</span><span>)</span><span>
</span>
<span>candymail</span><span>.</span><span>init</span><span>(</span><span>automationPath</span><span>,</span><span> </span><span>{</span><span>
</span><span>  senderEmail</span><span>:</span><span> </span><span>**</span><span>GMAILEMAIL</span><span>**</span><span>,</span><span>
</span><span>  senderPassword</span><span>:</span><span> </span><span>**</span><span>GMAILPASSWORD</span><span>**</span><span>
</span><span></span><span>}</span><span>)</span><span>
</span>
<span>candymail</span><span>.</span><span>start</span><span>(</span><span>)</span><span>
</span>
<span></span><span>const</span><span> user </span><span>=</span><span> </span><span>'howivey729@chatdays.com'</span><span>
</span><span>candymail</span><span>.</span><span>runAutomation</span><span>(</span><span>'automation1'</span><span>,</span><span> user</span><span>)</span><span>
</span>
<span></span><span>console</span><span>.</span><span>log</span><span>(</span><span>'Emails added to queue'</span><span>,</span><span> candymail</span><span>.</span><span>getAllScheduledMessages</span><span>(</span><span>)</span><span>)</span><span>
</span>
</code></pre><figcaption><span></span></figcaption></div><p><span><span>Note: Having problems with Gmail? EnableÂ&nbsp;</span><span><code>Allow less secure apps</code></span><span>Â&nbsp;in Google Account settingsÂ&nbsp;</span><span><a href="https://myaccount.google.com/lesssecureapps" target="_blank" rel="noopener noreferrer">here</a></span><span>.</span></span></p><h2 id="block-8905c8f6ec90428290f752898c389144"><span id="8905c8f6ec90428290f752898c389144"></span><span><span><strong>Automation File Options</strong></span></span></h2><div id="block-92d9833cf5bd44c895eee0027a1111fc"><div><table><thead><tr><th>Property</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><p><span><span>trigger</span></span></p></td><td></td><td><p><span><span>Name of the trigger (Not usable)</span></span></p></td></tr><tr><td><p><span><span>sendDelay</span></span></p></td><td><div></div></td><td><p><span><span>Delay after which the email will be sent (in hours). From time 0, not from the last email</span></span></p></td></tr><tr><td><p><span><span>subject</span></span></p></td><td><div></div></td><td><p><span><span>Subject of the email</span></span></p></td></tr><tr><td><p><span><span>body</span></span></p></td><td><div></div></td><td><p><span><span>Body of the email</span></span></p></td></tr><tr><td><p><span><span>from</span></span></p></td><td><div></div></td><td><p><span><span>Sender's Email Address</span></span></p></td></tr></tbody></table></div></div><h2 id="block-9aac3da583924daf892d731f0ae707ed"><span id="9aac3da583924daf892d731f0ae707ed"></span><span><span><strong>Methods</strong></span></span></h2><h3 id="block-aa32ddc39a3949d99452397186c7f687"><span id="aa32ddc39a3949d99452397186c7f687"></span><span><span><strong>init (automationPath, config)</strong></span></span></h3><p><span><span>Initializes automations specified in the automation path and sets the configuration with sender's email and password.</span></span></p><ul><li id="block-1394bdb55dd148f9a9f5e08a65240a86"><span><span><strong>automationPath</strong></span><span>: Absolute path to the candymail.automation.json file. Example:Â&nbsp;</span><span><code>path.resolve('example', 'candymail.automation.json')</code></span><span>Â&nbsp;if the file is located atÂ&nbsp;</span><span><code>ROOT*/example/candymail.automation.json</code></span><span>.</span></span></li><li id="block-35edceb8c19b427fa7f45d1de635de7a"><span><span><strong>config</strong></span><span>:Â&nbsp;</span><span><code>{ senderEmail -&gt; Gmail Address of the sender, senderPassword -&gt; Gmail Password of the sender }</code></span></span></li></ul><h3 id="block-86ce155fe82047cbaed3aab4820b7c4b"><span id="86ce155fe82047cbaed3aab4820b7c4b"></span><span><span><strong>start()</strong></span></span></h3><p><span><span>Starts the internal timer that will send emails at appropriate times.</span></span></p><h3 id="block-ca0e460e1f5a4dc28c00e2234cbcbfce"><span id="ca0e460e1f5a4dc28c00e2234cbcbfce"></span><span><span><strong>runAutomation(automationName)</strong></span></span></h3><p><span><span>Triggers an automation based onÂ&nbsp;</span><span><code>name</code></span><span>Â&nbsp;specified in theÂ&nbsp;</span><span><code>candymail.automation.json</code></span><span>Â&nbsp;file. NeedsÂ&nbsp;</span><span><code>candymail.start()</code></span><span>Â&nbsp;to have been called.</span></span></p><ul><li id="block-9d31ffa059614958b3e26dab0fa275ae"><span><span><strong>automationName</strong></span><span>: Name ofÂ&nbsp;</span><span><code>automation</code></span><span>Â&nbsp;inÂ&nbsp;</span><span><code>candymail.automation.json</code></span><span>. Example: 'automation1'.</span></span></li></ul><h3 id="block-08de5de186f546e6b619a4028cd9b4d1"><span id="08de5de186f546e6b619a4028cd9b4d1"></span><span><span><strong>getAllScheduledMessages()</strong></span></span></h3><p><span><span>Get the list of all scheduled messages.</span></span></p><h3 id="block-7bfc9eff28bc4cbe8a2ae79733484e90"><span id="7bfc9eff28bc4cbe8a2ae79733484e90"></span><span><span><strong>getScheduledMessagesAtTime(time)</strong></span></span></h3><p><span><span>Get the list of scheduled messages for a particularÂ&nbsp;</span><span><code>time</code></span><span>.</span></span></p><ul><li id="block-4544cfeaf80c42e491a6400962124475"><span><span><strong>time</strong></span><span>: Time should be specified in this format:Â&nbsp;</span><span><code>MM/DD/YYYY:HH</code></span><span>. For Example:Â&nbsp;</span><span><code>8/20/2020:2</code></span><span>.</span></span></li></ul><h3 id="block-a3786a62f496404c9660f76ba08033ed"><span id="a3786a62f496404c9660f76ba08033ed"></span><span><span><strong>clearAllScheduledMessages()</strong></span></span></h3><p><span><span>Clears all scheduled messages.</span></span></p><h3 id="block-7de077481f3147fea4dba9619476641f"><span id="7de077481f3147fea4dba9619476641f"></span><span><span><strong>stop()</strong></span></span></h3><p><span><span>Stops the internal timer. Can be restarted withÂ&nbsp;</span><span><code>candymail.start()</code></span></span></p><h3 id="block-5d10311284a546dc80c3e57eb45c3392"><span id="5d10311284a546dc80c3e57eb45c3392"></span><span><span><strong>destroy()</strong></span></span></h3><p><span><span>Destroys the internal timer.</span></span></p><h2 id="block-1a98b5e65f4a41e28e4965b5d3d7de9b"><span id="1a98b5e65f4a41e28e4965b5d3d7de9b"></span><span><span><strong>Notes</strong></span></span></h2><ol><li id="block-6bdaea5d6e764e5da158efec480f2add"><span><span>Only the hour value will be used in the cron, minutes will be ignored. +1 hour at 11:58 is 12.</span></span></li><li id="block-d3354e8bdee045c69e7bb24dbd1bebec"><span><span>Object keys:Â&nbsp;</span><span><code>MM/DD/YYYY:HH</code></span><span>. Hours are specified in 24-hour format.</span></span></li><li id="block-ce94d7c86c894d17ab928f86fa776aef"><span><span>There is currently noÂ&nbsp;</span><span><code>Unsubscribe</code></span><span>Â&nbsp;option in the emails. Being worked on right now.</span></span></li><li id="block-129c9e22b7c84f48bbcc4d3f284ea196"><span><span>Only supports GMail. More providers being added right now.</span></span></li></ol><div id="block-a05319bc3972418aa5f409ef65943cd3"><p><span><span>Got Feeback? Hit me up atÂ&nbsp;</span><span><a href="mailto:sunnyashiin@gmail.com" target="_blank" rel="noopener noreferrer">sunnyashiin@gmail.com</a></span><span>Â&nbsp;Now available for freelance work.</span></span></p></div></article></div></div></div>]]>
            </description>
            <link>https://saasbase.dev/candymail</link>
            <guid isPermaLink="false">hacker-news-small-sites-25578834</guid>
            <pubDate>Wed, 30 Dec 2020 05:18:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Lifestyle Inflation. It's a wealth killer]]>
            </title>
            <description>
<![CDATA[
Score 41 | Comments 42 (<a href="https://news.ycombinator.com/item?id=25577821">thread link</a>) | @wackintosh
<br/>
December 29, 2020 | https://www.thriftythoughts.io/lifestyle-inflation/ | <a href="https://web.archive.org/web/*/https://www.thriftythoughts.io/lifestyle-inflation/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            
<div>
    <main>
            <article>
    
    <div>
                <h2 id="it-s-a-wealth-killer-">It's a wealth killer.</h2><p>More expensive cars, clothes, food, homes. The more money we make the more we allow ourselves to splurge. But how much does this cost in the long run?</p><figure><img src="https://www.thriftythoughts.io/content/images/2020/12/UNCLAIMED-PROPERTY--21-.png" alt="" srcset="https://www.thriftythoughts.io/content/images/size/w600/2020/12/UNCLAIMED-PROPERTY--21-.png 600w, https://www.thriftythoughts.io/content/images/2020/12/UNCLAIMED-PROPERTY--21-.png 800w" sizes="(min-width: 720px) 720px"></figure><h2 id="the-cost-of-your-rising-expenses">The cost of your rising expenses</h2><p>Let's assume you have a salary of $50,000 per year starting at age 25 and every year you are able to obtain a 5% raise. In Scenario A as you make more money you allow your expenses to increase by 4% per year. In Scenario B as you make more money you allow your expenses to increase by only 1% per year. By allowing your costs to inflate by 3% less, the result is you end up with $1.5M additional in the bank by age 65 (and this is assuming you aren't investing any of these savings over the years).</p><!--kg-card-begin: html--><!--kg-card-end: html-->
                            <section>
                                <h2>Enjoying these posts? Subscribe for more</h2>
                                
                                <br>
                                
                            </section>
    </div>
        
</article>                    
                </main>
</div>
        </div></div>]]>
            </description>
            <link>https://www.thriftythoughts.io/lifestyle-inflation/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25577821</guid>
            <pubDate>Wed, 30 Dec 2020 02:45:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Git email flow vs. GitHub flow]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25577733">thread link</a>) | @todsacerdoti
<br/>
December 29, 2020 | https://blog.brixit.nl/git-email-flow-versus-github-flow/ | <a href="https://web.archive.org/web/*/https://blog.brixit.nl/git-email-flow-versus-github-flow/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
                <div>
                    <p>So I've been using the Github flow for some years now from both the maintainer side and contributor side to open source projects. I've also been using the email workflow for git from both sides for about a year now. Using email for git sounded quite horrible before I actually started using it. Now I prefer it so I thought I would document my experience here.</p><h2 id="the-github-flow">The Github flow</h2><p>This isn't strictly for Github, it's the flow many developers are accustomed to:</p><ol><li>Fork the project repo</li><li>Make a change on your fork</li><li>Create a pull request from a branch on your fork to the main repository</li><li>Get comments on the pull request</li><li>Force-push to the same branch to update the state of the pull request</li><li>Somebody clicks merge</li></ol><p>Basically the same flow is also used on Gitlab and the other smaller git hosting services. This flow works reasonably well. It gets slightly more annoying after the first pull request because you actually have to keep your own local branch up to date.</p><p>In theory this also gives some nice discoverability of people working on the project by looking at the forks of the project. In practice this is a bunch of outdated copies of the project by people who have mistaken the fork button for a like button.</p><p>From a maintainer point of view this flow also works alright, unless your project starts to grow. For example when postmarketOS was still on Github we ran into the issue that the merge button isn't really useful. Once you have a reasonable volume of &nbsp;pull requests the branches of those pull requests get outdated quickly meaning they have to be rebased before merging or every change will have an extra merge commit in the history. </p><p>In the postmarketOS case it was decided that merge commits are extra noise in the git history we'd like to avoid so we'd need to rebase things, and to properly rebase we have to do it from the command line because Github can't deal at all with conflicts. Rebasing from the command line also gives a lot more flexibility with squashing and having a nice commit message. </p><p>The only reason that merge button was used on Github was because Github can't seem to mark the pull request as merged if it isn't done by the button. </p><figure><img src="https://blog.brixit.nl/content/images/2020/12/image.png"><figcaption>The all-knowing button from Github</figcaption></figure><p>The old workflow documentation postmarketOS had when Github was used can be read in the wiki history: <a href="https://wiki.postmarketos.org/index.php?title=Merge_Workflow&amp;oldid=3441">https://wiki.postmarketos.org/index.php?title=Merge_Workflow&amp;oldid=3441</a></p><p>Now we've moved to Gitlab we're basically dealing with the same issue, we have to mess with the commits before merging so we're always force-pushing to the git fork of the author of the pull request (which they have to enable on the merge request, if they don't we first have to tell them to enable that checkbox) and then finally merge them with the button in the web UI so Gitlab doesn't lose track of what happened.</p><h2 id="the-git-send-email-flow">The git-send-email flow</h2><p>The flow for pull requests in github isn't the original way to make pull requests. Since git was originally written for the development of the Linux kernel it has been designed with the workflow of the kernel in mind. The kernel uses mailing lists.</p><p>[insert image of horrified developers here]</p><p>The first patch I emailed was with the assistence of <a href="https://git-send-email.io/">https://git-send-email.io/</a>, I needed to learn how to use the email flow because at the time I was working on my very first kernel patch. This was quite a daunting task involing triple-checking everything against the <a href="https://www.kernel.org/doc/html/v4.17/process/submitting-patches.html">patch submission documentation</a> for Linux which describes the easy 16 step process.</p><p>Then after the final step the email gets sent out and you wait... for response emails.</p><p>Since then I've made contributions to projects hosted on Sourcehut, which also uses the email workflow, and now I also maintain some projects on this platform. For example <a href="https://git.sr.ht/~martijnbraam/megapixels">Megapixels</a>.</p><p>This is the workflow for submitting a patch to a project using the email flow:</p><ol><li>Clone the repository locally</li><li>Make your changes on your local checkout</li><li>Run <code>git send-email</code> with a ref pointing to one or a range of commits</li><li>Get comments as response to the patch as emails, mirrored on the webpage of the mailing list</li><li>Fix up your previous mistakes, run <code>git send-email</code> again with the <code>-v2</code> argument to send an updated version</li><li>The maintainer applies the patch from the email.</li></ol><p>As a maintainer getting the patches like this is quite nice since unless there's a conflict you don't have to merge branches or rebase things, the patches is just ... a patch, it only has the changes from the author, not the full git history.</p><p>Also, one thing to note about the process above is that, except for receiving the feedback, it will never touch your mail client. Git does SMTP itself and make sure the emails you send out are up-to-spec so maintainers can apply the changes directly by feeding the email into <code>git am</code></p><p>If your main complaint is that email is horrible to work with, the issue is most likely not email, it's probably your mail client.</p><p>One of the other main issues with the email workflow is that you can't just see the full state of the "pull request" because there's no nice pull request page to see what's happening. This is one of the main reasons I like the mailing lists on Sourcehut, the patch view fixes most of the visibility issues, for example this simple patch: <a href="https://lists.sr.ht/~martijnbraam/public-inbox/patches/14382">https://lists.sr.ht/~martijnbraam/public-inbox/patches/14382</a></p><figure><img src="https://blog.brixit.nl/content/images/2020/12/image-1.png"><figcaption>The overview of a patch submitted to a Sourcehut mailing list</figcaption></figure><p>There you see the patch description in the first block, which is in this case didn't have any extra text added in the <code>git send-email</code> stage, so it only shows a summary of the changes in this patch.</p><p>Below that is the actual patch, with the subject of the patch as header and then showing the full commit message below that if there were more lines and then the full diff. This patch can also be exported directly as a .patch file using the link right of the subject.</p><p>Finally, below the diff is a comment from Eyal who applied this patch to the development branch and thanked the author; the mailing list will generate a nice threaded view here if there's more discussion.</p><p>The block on the right will show the status of the patch, <code>APPLIED</code> in this case and gives some extra tools to get a copy of the full patchset that can be applied using <code>git am</code></p><h2 id="conclusion">Conclusion</h2><p>I personally prefer the e-mail workflow now, it saves me from keeping branches/forks up to date as with this workflow only diffs are sent around. Also after working in Gitlab for most of the things I do on postmarketOS I really like how quickly sourcehut pages load and that I just can get all info from the patch without clicking on tabs to switch between comments, diffs and commit messages with loading times in between.</p><p>Also one nice improvement is that instead of doing half the maintainer flow in the browser by clicking things and half by patching stuff up in my local git branch and force pushing that, it just lets me do everything in the shell and then just send an email back telling the author their patch got merged.</p><p>All together people are most likely already used to having all the comments and info emailed to them as notifications, it's just that in the gitlab/hub case it will send you a link to continue on their website and in the sourcehut/email flow case the email is everything you need to continue without ever opening the browser.</p>
                </div>
            </section></div>]]>
            </description>
            <link>https://blog.brixit.nl/git-email-flow-versus-github-flow/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25577733</guid>
            <pubDate>Wed, 30 Dec 2020 02:35:09 GMT</pubDate>
        </item>
    </channel>
</rss>
