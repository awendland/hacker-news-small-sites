<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 5]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 5. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Mon, 17 Aug 2020 12:25:33 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-5.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Mon, 17 Aug 2020 12:25:33 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[$200 PinePhone Linux smartphone comes with physical kill switch]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24167497">thread link</a>) | @vvpvijay
<br/>
August 15, 2020 | https://androidrookies.com/200-pinephone-linux-smartphone-comes-with-physical-kill-switch-to-turn-off-camera-microphone-bluetooth-and-wi-fi/ | <a href="https://web.archive.org/web/*/https://androidrookies.com/200-pinephone-linux-smartphone-comes-with-physical-kill-switch-to-turn-off-camera-microphone-bluetooth-and-wi-fi/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-10179"><div><div><div><h2>Pine64’s $199 PinePhone Linux smartphone comes with a physical kill switch in the back to turn off the camera, Wi-Fi, microphone, headphone, and Bluetooth transmitters</h2><p>Ever since Pine64 launched the PinePhone Linux smartphones, it has been a subject of debates, arguments, and counter-arguments. Some find the PinePhone Linux smartphone an experiment worth trying out while others critique its hardware which is closer to a budget Android smartphone. However, we have to handover to the Pine64 engineers for tackling privacy-related issues first hand.</p><p>Ever since <a href="https://androidrookies.com/taping-your-macbook-camera-to-prevent-it-from-spying-is-not-a-good-option-says-apple/">Apple issued an advisory to MacBook users</a> not to tape their webcam, many users have been demanding a physical kill switch to stop webcam/microphone/Wi-Fi/GPS being hacked or abused. The Pine64’s PinePhone smartphone comes with a neat physical kill switch to turn those on/off. Under the back cover of PinePhone users can find an array of kill switches that can be used to physically toggle the camera, Wi-Fi, microphone, and GPS transmitters on or off.</p><div id="attachment_10180"><p><img aria-describedby="caption-attachment-10180" loading="lazy" src="https://androidrookies.com/wp-content/uploads/2020/08/physical-switch.jpg" data-src="https://androidrookies.com/wp-content/uploads/2020/08/physical-switch.jpg" alt="Pine64's $200 PinePhone Linux smartphone comes with a physical switch in the back to turn off the camera, Wi-Fi, microphone, headphone, and Bluetooth transmitters" width="657" height="371" data-srcset="https://androidrookies.com/wp-content/uploads/2020/08/physical-switch.jpg 657w, https://androidrookies.com/wp-content/uploads/2020/08/physical-switch-300x169.jpg 300w" data-sizes="(max-width: 657px) 100vw, 657px" data-old-src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" srcset="https://androidrookies.com/wp-content/uploads/2020/08/physical-switch.jpg 657w, https://androidrookies.com/wp-content/uploads/2020/08/physical-switch-300x169.jpg 300w"></p><p id="caption-attachment-10180">Courtesy AndroidPolice</p></div><p>The neatly arranged stack of switches situated in the rear of the PinePhone lets you shut down the modem, Wi-Fi, Bluetooth, microphone, rear camera, front camera, and headphone with a small screwdriver.</p><h2>Specifications of Pine64’s PinePhone:</h2><p>The PinePhone comes with a 5.95-inch 1440×720 18:9 HD IPS capacitive touchscreen with 16M colors and runs on <a href="https://linux-sunxi.org/A64" target="_blank" rel="nofollow noopener noreferrer">Allwinner A64</a> (quad-core ARM Cortex A53, Mali 400 GPU) chipset. Many expected a better chip but then you are paying $200 for this smartphone. The PinePhone runs on 3GB RAM and has 32GB internal memory(eMMC) which can be extended up to 2TB via a microSD card. The PinePhone has a 5MP rear shooter with LED flash and a 2MP front camera for selfies.</p><p>For connectivity, the PinePhomes LTE, Wi-Fi 802.11 b/g/n, Bluetooth 4.0, and GPS. It also features other extras like Accelerometer, Gyro sensor, Proximity sensor, Ambient light sensor, Compass</p><p>The PinePhone comes with a removable 2,800mAh battery which is similar to the Samsung J7 battery. Unlike nano-SIM in the current lot of Android smartphones, PinePhone comes with a micro-SIM and has Type-C USB port for charging and data transfer.</p><p>The $199 PinePhone runs on PostmarketOS Linux distro and comes with a convergence package consisting of a compatible USB-C docking bar capable of charging, digital video output, dual USB 2.0 type-A host ports for peripherals (such as keyboard and mouse) and fast Ethernet.</p><p>You can place an order for the limited edition <a href="https://store.pine64.org/product/pinephone-community-edition-postmarketos-with-convergence-package-limited-edition-linux-smartphone/">PinePhone Community Edition: PostmarketOS with Convergence Package</a>&nbsp;bundle for $200. Or you can just<a href="https://store.pine64.org/product/pinephone-community-edition-postmarketos-limited-edition-linux-smartphone/"> order the phone itself for $150</a> which comes with 2GB RAM and 16GB internal memory. The Linux smartphone maker has promised deliveries by end of August 2020.</p><p>The $199 PinePhone “Community Edition: PostmarketOS With Convergence Package” does have a bit mid-range specs especially the 3GB RAM/32GB internal memory and the 5MP/2MP cameras but I did buy the PinePhone just for the physical kill switches to turn off the peripherals. If this physical security feature becomes popular we could one day be having it on flagship Android smartphones.</p> <br></div></div></div></article></div>]]>
            </description>
            <link>https://androidrookies.com/200-pinephone-linux-smartphone-comes-with-physical-kill-switch-to-turn-off-camera-microphone-bluetooth-and-wi-fi/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24167497</guid>
            <pubDate>Sat, 15 Aug 2020 09:40:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Types as axioms, or: playing god with static types]]>
            </title>
            <description>
<![CDATA[
Score 19 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24166594">thread link</a>) | @pcr910303
<br/>
August 14, 2020 | https://lexi-lambda.github.io/blog/2020/08/13/types-as-axioms-or-playing-god-with-static-types/ | <a href="https://web.archive.org/web/*/https://lexi-lambda.github.io/blog/2020/08/13/types-as-axioms-or-playing-god-with-static-types/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section role="main">
        <!-- Main column -->
        <div>



          <article>
  <header>
    
    
  </header>

<p>Just what exactly <em>is</em> a type?</p>

<p>A common perspective is that types are <em>restrictions</em>. Static types restrict the set of values a variable may contain, capturing some subset of the space of “all possible values.” Under this worldview, a typechecker is sort of like an oracle, predicting which values will end up where when the program runs and making sure they satisfy the constraints the programmer wrote down in the type annotations. Of course, the typechecker can’t <em>really</em> predict the future, so when the typechecker gets it wrong—it can’t “figure out” what a value will be—static types can feel like self-inflicted shackles.</p>

<p>But that is not the <em>only</em> perspective. There is another way—a way that puts you, the programmer, back in the driver’s seat. You make the rules, you call the shots, you set the objectives. You need not be limited any longer by what the designers of your programming language decided the typechecker can and cannot prove. You do not serve the typechecker; the typechecker serves <em>you.</em></p>

<p>…no, I’m not trying to sell you a dubious self-help book for programmers who feel like they’ve lost control of their lives. If the above sounds too good to be true, well… I won’t pretend it’s all actually as easy as I make it sound. Nevertheless, it’s well within the reach of the working programmer, and most remarkably, all it takes is a change in perspective.</p>
<!-- more-->



<p>Let’s talk a little about TypeScript.</p>

<p>TypeScript is a <em>gradually-typed</em> language, which means it’s possible to mix statically- and dynamically-typed code. The original intended use case of gradual typing was to <em>gradually</em> add static types to an existing dynamically-typed codebase, which imposes some interesting design constraints. For one, a valid JavaScript program must also be a valid TypeScript program; for another, TypeScript must be accommodating of traditional JavaScript idioms.</p>

<p>Gradually typed languages like TypeScript are particularly good illustrations of the way type annotations can be viewed as constraints. A function with no explicit type declarations<sup><a href="#2020-08-13-types-as-axioms-or-playing-god-with-static-types-footnote-1-definition" name="2020-08-13-types-as-axioms-or-playing-god-with-static-types-footnote-1-return">1</a></sup> can accept <em>any</em> JavaScript value, so adding a type annotation fundamentally restricts the set of legal values.</p>

<p>Furthermore, languages like TypeScript tend to have subtyping. This makes it easy to classify certain types as “more restrictive” than others. For example, a type like <code>string | number</code> clearly includes more values than just <code>number</code>, so <code>number</code> is a more restrictive type—a <em>subtype</em>.</p>

<p>An exceptionally concrete way to illustrate this “types are restrictions” mentality is to write a function with an unnecessarily specific type. Here’s a TypeScript function that returns the first element in an array of numbers:</p>

<div>
 <div>
  <pre><span></span><span>function</span> <span>getFirst</span><span>(</span><span>arr</span>: <span>number</span><span>[])</span><span>:</span> <span>number</span> <span>|</span> <span>undefined</span> <span>{</span>
  <span>return</span> <span>arr</span><span>[</span><span>0</span><span>];</span>
<span>}</span>
</pre></div>

</div>

<p>This function would work perfectly well given a list of strings, but if you write <code>getFirst(["hello", "world"])</code>, the typechecker will complain. Of course, in this example the restriction is thoroughly self-imposed—it would be easy to give this function a generic type—but sometimes it’s not quite so easy. For example, suppose we write a function where the return type depends upon the type of the argument:</p>

<div>
 <div>
  <pre><span></span><span>function</span> <span>emptyLike</span><span>(</span><span>val</span>: <span>number</span> <span>|</span> <span>string</span><span>)</span><span>:</span> <span>number</span> <span>|</span> <span>string</span> <span>{</span>
  <span>if</span> <span>(</span><span>typeof</span> <span>val</span> <span>===</span> <span>"number"</span><span>)</span> <span>{</span>
    <span>return</span> <span>0</span><span>;</span>
  <span>}</span> <span>else</span> <span>{</span>
    <span>return</span> <span>""</span><span>;</span>
  <span>}</span>
<span>}</span>
</pre></div>

</div>

<p>Now if we write <code>emptyLike(42) * 10</code>, the typechecker will once again complain, claiming the result could be a string—it can’t “figure out” that when we pass a number, we always get a number back.</p>

<p>When type systems are approached from this perspective, the result is often frustration. The programmer knows that the equivalent untyped JavaScript is perfectly well-behaved, so the typechecker comes off as being the highly unfortunate combination of stubborn yet dim-witted. What’s more, the programmer likely has little mental model of the typechecker’s internal operation, so when types like the above are inferred (not explicitly written), it can be unclear what solutions exist to make the error go away.</p>

<p>At this point, the programmer may give up. “Stupid typechecker,” they grumble, changing the return type of <code>emptyLike</code> to <code>any</code>. “If it can’t even figure this out, can it <em>really</em> be all that useful?”</p>

<p>Sadly, this relationship with the typechecker is all too common, and gradually-typed languages in particular tend to create a vicious cycle of frustration:</p>

<ul>
 <li>
  <p>Gradual type systems are intentionally designed to “just work” on idiomatic code as much as possible, so programmers may not think much about the types except when they get type errors.</p></li>
 <li>
  <p>Furthermore, many programmers using gradually-typed languages are already adept at programming in the underlying dynamically-typed language, so they have working mental models of program operation in terms of the dynamic semantics alone. They are much less likely to develop a rich mental model of the static semantics of the type system because they are used to reasoning without one.</p></li>
 <li>
  <p>Gradually typed languages must support idioms from their dynamically-typed heritage, so they often include ad-hoc special cases (such as, for example, special treatment of <code>typeof</code> checks) that obscure the rules the typechecker follows and make them seem semi-magical.</p></li>
 <li>
  <p>Builtin types are deeply blessed in the type system, strongly encouraging programmers to embrace their full flexibility, but leaving little recourse when they run up against their limits.</p></li>
 <li>
  <p>All this frustration breeds a readiness to override the typechecker using casts or <code>any</code>, which ultimately creates a self-fulfilling prophecy in which the typechecker rarely catches any interesting mistakes because it has been so routinely disabled.</p></li></ul>

<p>The end result of all of this is a defeatist attitude that views the typechecker as a minor tooling convenience at best (i.e. a fancy autocomplete provider) or an active impediment at worst. Who can really blame them? The type system has (unintentionally of course) been designed in such a way so as to lead them into this dead end. The public perception of type systems settles into that of a strikingly literal nitpicker we endure rather than as a tool we actively leverage.</p>



<p>After everything I said above, it may be hard to imagine seeing types any other way. Indeed, through the lens of TypeScript, the “types are restrictions” mentality is incredibly natural, so much so that it seems self-evident. But let’s move away from TypeScript for a moment and focus on a different language, Haskell, which encourages a somewhat different perspective. If you aren’t familiar with Haskell, that’s alright—I’m going to try to keep the examples in this blog post as accessible as possible whether you’ve written any Haskell or not.</p>

<p>Though Haskell and TypeScript are both statically-typed—and both of their type systems are fairly sophisticated—Haskell’s type system is almost completely different philosophically:</p>

<ul>
 <li>
  <p>Haskell does not have subtyping,<sup><a href="#2020-08-13-types-as-axioms-or-playing-god-with-static-types-footnote-2-definition" name="2020-08-13-types-as-axioms-or-playing-god-with-static-types-footnote-2-return">2</a></sup> which means that every value belongs to exactly one type.</p></li>
 <li>
  <p>While JavaScript is built around a small handful of flexible builtin datatypes (booleans, numbers, strings, arrays, and objects), Haskell has essentially no blessed, built-in datatypes other than numbers. Key types such as booleans, lists, and tuples are ordinary datatypes defined in the standard library, no different from types users could define.<sup><a href="#2020-08-13-types-as-axioms-or-playing-god-with-static-types-footnote-3-definition" name="2020-08-13-types-as-axioms-or-playing-god-with-static-types-footnote-3-return">3</a></sup></p></li>
 <li>
  <p>In particular, Haskell is built around the idea that datatypes can be defined with multiple <em>cases</em>, and branching is done via pattern-matching (more on this shortly).</p></li></ul>

<p>Let’s look at a basic Haskell datatype declaration. Suppose we want to define a type that represents a season:</p>

<div>
 <div>
  <pre><span></span><span>data</span> <span>Season</span> <span>=</span> <span>Spring</span> <span>|</span> <span>Summer</span> <span>|</span> <span>Fall</span> <span>|</span> <span>Winter</span>
</pre></div>

</div>

<p>If you are familiar with TypeScript, this may look rather similar to a union type; if you’re familiar with a C-family language, this may remind you more of an enum. Both are on the right track: this defines a new type named <code>Season</code> with four possible values, <code>Spring</code>, <code>Summer</code>, <code>Fall</code>, and <code>Winter</code>.</p>

<p>But what exactly <em>are</em> those values?</p>

<ul>
 <li>
  <p>In TypeScript, we’d represent this type with a union of strings, like this:</p>
  <div>
   <div>
    <pre><span></span><span>type</span> <span>Season</span> <span>=</span> <span>"spring"</span> <span>|</span> <span>"summer"</span> <span>|</span> <span>"fall"</span> <span>|</span> <span>"winter"</span><span>;</span>
</pre></div>

</div>
  <p>Here, <code>Season</code> is a type that can be one of those four strings, but nothing else.</p></li>
 <li>
  <p>In C, we’d represent this type with an enum, like this:</p>
  <div>
   <div>
    <pre><span></span><span>enum</span> <span>season</span> <span>{</span> <span>SPRING</span><span>,</span> <span>SUMMER</span><span>,</span> <span>FALL</span><span>,</span> <span>WINTER</span> <span>};</span>
</pre></div>

</div>
  <p>Here, <code>SPRING</code>, <code>SUMMER</code>, <code>FALL</code>, and <code>WINTER</code> are essentially defined to be global aliases for the integers <code>0</code>, <code>1</code>, <code>2</code>, and <code>3</code>, and the type <code>enum season</code> is essentially an alias for <code>int</code>.</p></li></ul>

<p>So in TypeScript, the values are strings, and in C, the values are numbers. What are they in Haskell? Well… they simply <em>are</em>.</p>

<p>The Haskell declaration invents four completely new constants out of thin air, <code>Spring</code>, <code>Summer</code>, <code>Fall</code>, and <code>Winter</code>. They aren’t aliases for numbers, nor are they symbols or strings. The compiler doesn’t expose anything about how it chooses to represent these values at runtime; that’s an implementation detail. In Haskell, <code>Spring</code> is now a value <em>distinct from all other values</em>, even if someone in a different module were to also use the name <code>Spring</code>. Haskell type declarations let us play god, creating something from nothing.</p>

<p>Since these values are totally unique, abstract constants, what can we actually do with them? The answer is one thing and <em>exactly</em> one thing: we can branch on them. For example, we can write a function that takes a <code>Season</code> as an argument and returns whether or not Christmas occurs during it:</p>

<div>
 <div>
  <pre><span></span><span>containsChristmas</span> <span>::</span> <span>Season</span> <span>-&gt;</span> <span>Bool</span>
<span>containsChristmas</span> <span>season</span> <span>=</span> <span>case</span> <span>season</span> <span>of</span>
  <span>Spring</span> <span>-&gt;</span> <span>False</span>
  <span>Summer</span> <span>-&gt;</span> <span>True</span>  <span>-- southern hemisphere</span>
  <span>Fall</span>   <span>-&gt;</span> <span>False</span>
  <span>Winter</span> <span>-&gt;</span> <span>True</span>  <span>-- northern hemisphere</span>
</pre></div>

</div>

<p><code>case</code> expressions are, to a first approximation, a lot like C-style <code>switch</code> statements (though they can do a lot more than this simple example suggests). Using <code>case</code>, we can also define conversions from our totally unique <code>Season</code> constants to other types, if we want:</p>

<div>
 <div>
  <pre><span></span><span>seasonToString</span> <span>::</span> <span>Season</span> <span>-&gt;</span> <span>S…</span></pre></div></div></article></div></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://lexi-lambda.github.io/blog/2020/08/13/types-as-axioms-or-playing-god-with-static-types/">https://lexi-lambda.github.io/blog/2020/08/13/types-as-axioms-or-playing-god-with-static-types/</a></em></p>]]>
            </description>
            <link>https://lexi-lambda.github.io/blog/2020/08/13/types-as-axioms-or-playing-god-with-static-types/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24166594</guid>
            <pubDate>Sat, 15 Aug 2020 06:44:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Using an old BlackBerry as a portable SSH or Telnet terminal]]>
            </title>
            <description>
<![CDATA[
Score 38 | Comments 22 (<a href="https://news.ycombinator.com/item?id=24166402">thread link</a>) | @todsacerdoti
<br/>
August 14, 2020 | https://rqsall.com/posts/using-an-old-blackberry-as-a-portable-ssh-terminal | <a href="https://web.archive.org/web/*/https://rqsall.com/posts/using-an-old-blackberry-as-a-portable-ssh-terminal">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main-copy">


<h2 id="using-an-old-blackberry-as-a-portable-ssh-or-telnet-terminal">Using an old BlackBerry as a portable SSH (or Telnet) terminal</h2>
<p>You used to see BlackBerries everywhere. Sites such as CrackBerry detailed sightings of celebrities using them constantly. Nowadays, not so much. However, I believe they still have some usecases today. One of these is as a portable terminal. Here's why one might want to use one of these devices as a terminal:</p>
<ul>
<li>Nice built-in physical keyboard</li>
<li>Long standby battery life
<ul>
<li>Easily swappable batteries (see my Altoids tin filled with batteries below!)</li>
<li>The 7290 I'm using reportedly has a 216 hour standby battery life, and unlike modern phones this number seems to hold up relatively well even with network enabled</li>
</ul></li>
<li>Affordable
<ul>
<li>You can easily find these devices for ~$20 on eBay</li>
<li>You can get a 100 MB data plan from US Mobile for $2/mo. not including fees (closer to $5/mo. with fees)</li>
</ul></li>
<li>Extremely portable
<ul>
<li>Much smaller than other devices one might use for this kind of thing
<ul>
<li>OpenPandora</li>
<li>GPD Pocket</li>
<li>etc.</li>
</ul></li>
<li>Much shorter than most modern phones</li>
<li>Cellular connection means you don't need a wireless router around</li>
</ul></li>
<li>Decently rugged
<ul>
<li>Not nearly as prone to failure after drops as modern smartphones (in my experience)
<ul>
<li>The screen is recessed, so it doesn't take the brunt of falls</li>
</ul></li>
</ul></li>
<li>Easy to setup
<ul>
<li>You can simply browse to <a href="http://xk72.com/wap">http://xk72.com/wap</a> on the phone itself to install an SSH client (MidpSSH) over the air</li>
</ul></li>
</ul>
<p>I've been using a BlackBerry 7290 on the US Mobile network, which still supports GSM for now. It's notable that the SSH negotiation is decently slow (~30-45 seconds), but is decently usable after connected (things are still a little sluggish however). Furthermore, I had to reenable the weak DSA public key algorithm as well. This doesn't bother me so much as I basically have a middleman server that allows this weak standard that I talk to everything else through rather than enabling it on every server.</p>
<p>To make things easier on myself, I wrote an <a href="https://rqsall.com/posts/files/postlogin.txt">interactive script</a> that is sourced by <code>.bashrc</code> upon logging in that asks what I actually want to connect to and then does so for me.</p>
<p>In the future, I might move to a BlackBerry 8700(c/g) as they support EDGE (much faster network speed), have much faster CPUs, and a higher standby time. I am not sure what I am going to do in the long run, as 2G networks in the US will probably all be shut down by the end of the year with 3G soon to follow. I guess I can just enjoy it while it lasts.</p>
<p>Here are the lines I added to my <code>sshd</code> config for the BlackBerry to be able to connect:</p>
<pre><code>HostKeyAlgorithms +ssh-dss
PubkeyAcceptedKeyTypes +ssh-dss
KexAlgorithms +diffie-hellman-group1-sha1
Ciphers +3des-cbc
</code></pre>
<p>And here are some pictures!</p>
<p><img src="https://rqsall.com/posts/files/connected.jpg"></p>
<p><em>Connected and at the interactive prompt</em></p>
<p><img src="https://rqsall.com/posts/files/top.jpg"></p>
<p><em><code>top</code> output from one server</em></p>
<p><img src="https://rqsall.com/posts/files/htop.jpg"></p>
<p><em><code>htop</code> output from another server</em></p>
<p><img src="https://rqsall.com/posts/files/altoids.jpg"></p>
<p><em>Spare batteries kept in an Altoids tin</em></p>


</div></div>]]>
            </description>
            <link>https://rqsall.com/posts/using-an-old-blackberry-as-a-portable-ssh-terminal</link>
            <guid isPermaLink="false">hacker-news-small-sites-24166402</guid>
            <pubDate>Sat, 15 Aug 2020 06:06:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Mozilla’s Uncertain Future]]>
            </title>
            <description>
<![CDATA[
Score 161 | Comments 138 (<a href="https://news.ycombinator.com/item?id=24166385">thread link</a>) | @jonathankoren
<br/>
August 14, 2020 | https://civilityandtruth.com/2020/08/13/mozillas-uncertain-future/ | <a href="https://web.archive.org/web/*/https://civilityandtruth.com/2020/08/13/mozillas-uncertain-future/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section itemprop="text">
        
        <figure>
  <p><a href="https://civilityandtruth.com/assets/images/mozilla-revenues-vs-expenses.png"><img src="https://civilityandtruth.com/assets/images/mozilla-revenues-vs-expenses.png" alt="Graph of Mozilla revenues compared to expenses"></a></p>
  <figcaption>The graph above shows the consolidated revenues and
expenses of the Mozilla Foundation and Mozilla Corporation from the
Foundation’s founding in 2003 through 2018. Almost all of the revenues
and expenses are associated with the Mozilla Corporation, and almost
all of the revenues of the Mozilla Corporation are from Google and
other search engine providers. Graph © 2020 Frank Hecker, made
available under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons
Attribution 4.0 International license</a>.</figcaption>
</figure>

<p><em>tl;dr: Some thoughts on Mozilla for people who don’t know Mozilla.</em></p>

<p>By now everyone in the tech world has heard of the major layoffs at
the Mozilla Corporation, the organization that creates and distributes
the Firefox web browser. (For those who haven’t heard, about 250
people were laid off, about a quarter of the work force.) Lots of
people in the tech world have spoken their piece about the
significance of this event and what it means for the future of
Mozilla, the web, and so on.</p>

<p>Rather than write something of and for the tech world, I wanted to
briefly explain what’s going on for those of my readers who don’t know
HTML from XML, and who are more familar with the worlds of nonprofits
and regular old businesses. I used to work for Mozilla, and have more
knowledge of it and (I hope) insight into it than most people, but
I’ve been gone from Mozilla for ten years now. Thus what I write below
is based on observing it from a distance, like seeing an old friend
whose life has long since diverged from mine.</p>

<p>Disclaimer: I work for a tech company, and I don’t usually write about
other tech companies. So I will strongly emphasize that what I write
here are my personal opinions only, and do not represent the positions
of my present employer or past employers.</p>

<h2 id="what-is-mozilla">What is Mozilla?</h2>

<p>Mozilla is actually two things, the Mozilla Foundation and the Mozilla
Corporation, which are often confused and conflated in public
discourse. (There’s actually at least one other piece, but these two
are the main ones.) The Mozilla Foundation, founded in 2003 to take
over development of the source code for the Netscape web browser, is a
501(c)(3) tax-exempt nonprofit organization, with a staff of 80 people
and a budget of about $27 million in 2018, the last year for which
figures are available. The Mozilla Corporation, founded in 2005, is a
for-profit business, wholly owned by the Mozilla Foundation, with a
staff of about a thousand and revenue of about $440 million, again
from the 2018 financials.</p>

<p>This organizational structure was designed to allow the Mozilla
Corporation to engage in business activities which would be
incompatible with 501(c)(3) status, with a portion of the revenues
from those activities directed to the Mozilla Foundation to help fund
its activities. Having a nonprofit parent also means that the
management and employees of the Mozilla Corporation can help serve the
public benefit goals of the Mozilla Foundation, while still having
interesting jobs, being paid reasonably well, and feeling themselves
to be part of the overall Silicon Valley high-tech milieu.</p>

<p>Second: The customers of the Mozilla Corporation are not the users of
Firefox (among whom you may count yourself). The Mozilla Corporation’s
customers are large corporations like Google that pay for things that
will help them make money, most notably having their Internet search
service be the default in the Firefox browser. And to complete the old
saying, “If you’re not the customer…”, then the 200+ million Firefox
users are the product, potential viewers of ads served up by Google or
others.</p>

<p>(The existence of the Firefox browser as a competitor to Google’s
Chrome browser also supposedly helps Google avoid unwelcome antitrust
attention, especially now that Microsoft has abandoned its own browser
development efforts to base its own browser on the Chrome code. But
it’s unclear how important this consideration actually is to Google
senior management.)</p>

<p>In the early days of the Mozilla Corporation these search engine
relationships proved extremely lucrative, jumping from less than $5
million in 2004 to over $50 million in 2005, the first year in which
the Mozilla Corporation reported financial results, and eventually
growing to a high of about $540 million in 2017.</p>

<p>But as the number of Firefox users decreases (due to the growing
market dominance of the Chrome browser), and those users click on
fewer online ads (for example, because they’re spending less during
the COVID-19 pandemic), the willingness of Google and other customers
to pay the Mozilla Corporation for those users decreases
accordingly. Thus the Mozilla Corporation cutting a quarter of its
workforce.</p>

<p>(In contrast, to my knowledge the Mozilla Foundation itself is not
laying off anyone, at least at this time. It gets its funding from a
combination of royalties from the Mozilla Corporation for use of the
Firefox and Mozilla trademarks, government and foundation grants, and
individual donations. For 2018 the royalties accounted for about half
of the Mozilla Foundation’s budget, with grants and individual donations
each accounting for about a quarter of the budget.)</p>

<p>So, if you’re an avid user of the Firefox browser and want to chip in
a few dollars to help support its development, there’s actually no way
for you to do so, at least not at present. Your donations will go to
the Mozilla Foundation, which will use them to help fund its outreach
and advocacy initiatives, of which it has several. The Mozilla
Foundation itself does not develop Firefox—or any other software, to
my knowledge.</p>

<h2 id="whence-mozilla">Whence Mozilla?</h2>

<p>How has Mozilla (or, more correctly, the Mozilla Corporation) come
to its present pass? The best way I can explain it is that the Mozilla
Corporation is not really a business in the way we’d normally think of
a business, profit-focused and subject to market discipline.</p>

<p>Instead you can think of the Mozilla Corporation as being analogous to
the Bell Labs or Xerox PARC of yore, R&amp;D organizations funded by a
seemingly-unending stream of profits earned by other businesses that
enjoyed dominant positions in their respective markets. In this sense
Google is to Mozilla as AT&amp;T was to Bell Labs, or Xerox to Xerox
PARC.</p>

<p>Like Bell Labs and Xerox PARC, the Mozilla Corporation provided a home
for some of the smartest software developers around. Like those
organizations, the Mozila Corporation has initiated a myriad of
projects ranging from the mundane and useful (like the Firefox
browser) to the esoteric and speculative. Like those organizations,
the Mozilla Corporation has given away much of what it has produced in
the form of public goods available to everyone at no charge.</p>

<p>Like Bell Labs and Xerox PARC, the Mozilla Corporation has indulged a
taste for “build it yourself” vertical integration, and in particular
for creating its own bespoke development tools and software stack. For
example, like those organizations the Mozilla Corporation has created
its own operating system (FirefoxOS), its own programming language
(Rust), and (of course) its own graphical user environment in the form
of the Firefox browser (not to mention yet another web browser, this
one more research-oriented, and various experiments in software for
virtual reality environments).</p>

<p>And finally, the Mozilla Corporation is engaged in the same struggle
that Bell Labs and Xerox PARC found themselves in: trying to convert a
research-oriented organization into an actual business, and capture
for itself more of the value that it has been providing to the world
(and to its past, present, and future competitors) for free.</p>

<h2 id="whither-mozilla">Whither Mozilla?</h2>

<p>What will happen to Mozilla, and to the Mozilla Corporation in
particular? The basic situation is that Mozilla has tried to be at
least three things simultaneously: an advocacy organization, a
developer and distributor of mass market consumer software and related
services, and (as noted above) a research lab.</p>

<p>Being an advocacy organization is relatively inexpensive, but the
other two functions are not: software development (including
research-related activities) and branding and marketing together
consumed almost three quarters of the combined Mozilla Corporation and
Foundation expense budget of $450 million in 2018. Thus when COVID-19
hit and the Mozilla Corporation hit a brick wall in terms of search
engine revenue, its choice was apparently either to stop being a
consumer software and services company, or to stop being a research
lab.</p>

<p>In the end Mozilla Corporation senior management apparently decided to
go for being a consumer software and services company, and to ditch
any activities not related to that, including research projects.
Having done so, the Mozilla Corporation faces a number of problems:</p>

<p>First, as noted above the Mozilla ethos is arguably more like that of
an R&amp;D lab than of a business proper. Just getting Mozilla
employees to think of themselves as working in the service of a
profit-driven business, and to act in accordance with that thought
every single day, may be an uphill battle.</p>

<p>Second, Mozilla is arguably becoming superfluous, at least as far as
its own largest customer, Google, is concerned. Google has its own
browser and browser development team, its own research lab, and
presumably an inclination to want to spend its R&amp;D money on things
it can control and direct itself. Google also has the ability and the
opportunity to capture the remaining base of Firefox users, at least
those that are monetizable.</p>

<p>There will always be a core of enthusiastic Firefox users, but a lot
of them switch their search engine to something other than Google, run
ad blockers, and don’t click on online ads. Thus they are for the most
part irrelevant from Google’s point of view. At some point the major
value Firefox has for Google will be as presumed insulation from
antitrust enforcement efforts targeting Chrome, but such insurance,
even if it’s of value to Google, doesn’t necessarily require a large
Firefox user base.</p>

<p>Finally, it’s …</p></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://civilityandtruth.com/2020/08/13/mozillas-uncertain-future/">https://civilityandtruth.com/2020/08/13/mozillas-uncertain-future/</a></em></p>]]>
            </description>
            <link>https://civilityandtruth.com/2020/08/13/mozillas-uncertain-future/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24166385</guid>
            <pubDate>Sat, 15 Aug 2020 06:03:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Write Your Own Virtual Machine]]>
            </title>
            <description>
<![CDATA[
Score 113 | Comments 12 (<a href="https://news.ycombinator.com/item?id=24166137">thread link</a>) | @ChankeyPathak
<br/>
August 14, 2020 | https://justinmeiners.github.io/lc3-vm/ | <a href="https://web.archive.org/web/*/https://justinmeiners.github.io/lc3-vm/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
<section>

<a name="1:1"></a>
<a name="1:2"></a><div><a name="1:2"><h4>2. Introduction</h4></a>
<p>In this tutorial, I will teach you how to write your own virtual machine (VM) that can run assembly language programs, such as my friend's <a href="https://github.com/rpendleton/lc3-2048">2048</a> or my <a href="https://github.com/justinmeiners/lc3-rogue">Roguelike</a>. If you know how to program, but would like to gain a deeper understanding of what is going on inside a computer and better understand how programming languages work, then this project is for you. Writing your own VM may sound a little scary, but I promise that you will find it to be surprisingly simple and enlightening.
</p>
<p>The final code is about 250 lines of C (<a href="https://justinmeiners.github.io/lc3-vm/src/lc3.c">unix</a>, <a href="https://justinmeiners.github.io/lc3-vm/src/lc3-win.c">windows</a>).
All you need to know is how to read basic C or C++ and how to do <a href="https://www.swarthmore.edu/NatSci/echeeve1/Ref/BinaryMath/BinaryMath.html">binary arithmetic</a>.
</p>
<blockquote><p> <strong>Note:</strong> This VM is a <a href="https://en.wikipedia.org/wiki/Literate_programming">literate program</a>. This means you are reading the source code right now! Each piece of code from the project will be shown and explained thoroughly, so you can be sure nothing is left out. The final code was created by <a href="https://github.com/zyedidia/Literate">"weaving"</a> the blocks of code together.
</p>
</blockquote>
<h3> What is a virtual machine?</h3>
<p>A VM is a program that acts like a computer. It simulates a CPU along with a few other hardware components, allowing it to perform arithmetic, read and write to memory, and interact with I/O devices, just like a physical computer. Most importantly, it can understand a machine language which you can use to program it.
</p>
<p>The amount of computer hardware the VM attempts to simulate depends on its purpose. Some VMs are designed to reproduce the behavior of some particular computer, such as video game emulators. Most people don't have an NES lying around anymore, but we can still play NES games by simulating the NES hardware in a program. These emulators must <a href="http://wiki.nesdev.com/w/index.php/Tricky-to-emulate_games">faithfully recreate</a> every <a href="http://wiki.nesdev.com/w/index.php/Emulator_tests">detail</a> and major hardware component of the original device.
</p>
<p>Other VMs don't act like any real computer and are entirely made up! This is primarily done to make software development easier. Imagine you wanted to create a program that ran on multiple computer architectures. A VM could offer a standard platform which provided portability for all of them. Instead of rewriting a program in different dialects of assembly for each CPU architecture, you would only need to write the small VM program in each assembly language. Each program would then be written only once in the VM's assembly language.
</p>
<p><img src="https://justinmeiners.github.io/lc3-vm/img/no_vm.gif" alt="architecture specific implementation">
</p>
<p><img src="https://justinmeiners.github.io/lc3-vm/img/vm.gif" alt="vm for each architecture">
</p>
<blockquote><p> <strong>Note:</strong> A compiler solves a similar problem by compiling a standard <em>high-level language</em> to several CPU architectures. A VM creates one standard <em>CPU architecture</em> which is simulated on various hardware devices. One advantage of a compiler is that it has no runtime overhead while a VM does. Even though compilers do a pretty good job, writing a new one that targets multiple platforms is very difficult, so VMs are still helpful here. In practice, VMs and compilers are mixed at various levels.
</p>
</blockquote>
<p>The <a href="https://en.wikipedia.org/wiki/Java_virtual_machine">Java Virtual Machine (JVM)</a> is a very successful example. The JVM itself is a moderately sized program that is small enough for one programmer to understand. This has made it possible to be written for thousands of devices including phones. Once the JVM is implemented on a new device, any Java, Kotlin, or Clojure program ever written can run on it without modification. The only cost is the overhead of the VM itself and the <a href="https://www.joelonsoftware.com/2002/11/11/the-law-of-leaky-abstractions/">further abstraction</a> from the machine. Most of the time, this is a pretty good tradeoff.
</p>
<p>A VM doesn't have to be large or pervasive to provide a similar benefit. Old <a href="https://fabiensanglard.net/anotherWorld_code_review/">video games</a> often used small VMs to provide simple <a href="https://sf2platinum.wordpress.com/page/1/">scripting systems</a>.
</p>
<p>VMs are also useful for executing code in a secure or isolated way. One application of this is garbage collection. There <a href="https://www.lua.org/pil/24.2.html">is no trivial way</a> to implement automatic garbage collection on top of C or C++ since a program cannot see its own stack or variables. However, a VM is “outside” the program it is running and can observe all of the <a href="https://en.wikipedia.org/wiki/Tracing_garbage_collection">memory references</a> on the stack.
</p>
<p>Another example of this behavior is demonstrated by <a href="https://solidity.readthedocs.io/en/v0.4.24/introduction-to-smart-contracts.html">Ethereum smart contracts</a>. Smart contracts are small programs which are executed by each validating node in the blockchain network. This requires the node operators to run programs on their machines that have been written by complete strangers, without any opportunity to scrutinize them beforehand. To prevent a contract from doing malicious things, they are run inside a <a href="http://ethdocs.org/en/latest/introduction/what-is-ethereum.html#ethereum-virtual-machine">VM</a> that has no access to the file system, network, disc, etc. Ethereum is also a good application of the portability features that result when using a VM. Since Ethereum nodes can be run on many kinds of computers and operating systems, the use of a VM allows smart contracts to be written without any consideration of the many platforms they run on.
</p>

</div>
<a name="1:3"></a><div><a name="1:3"><h4>3. LC-3 Architecture</h4></a>
<p>Our VM will simulate a fictional computer called the <a href="https://en.wikipedia.org/wiki/Little_Computer_3">LC-3</a>. The LC-3 is popular for teaching university students how to program in assembly language. It has a simplified instruction set <a href="http://ref.x86asm.net/coder64.html">compared to x86</a>, but contains all the main ideas used in modern CPUs.
</p>
<p>First, we need to simulate the essential hardware components of the machine. Try to understand what each component is, but don't worry right now if you are unsure of how it fits into the larger picture. Start by creating a C file. Each of the code snippets in this section should be placed in the global scope of this file.
</p>
<h3> Memory</h3>
<p>The LC-3 has 65,536 memory locations (the maximum that is addressable by a 16-bit unsigned integer <code>2^16</code>), each of which stores a 16-bit value. This means it can store a total of only 128kb, which is a lot smaller than you may be used to! In our program, this memory will be stored in a simple array:
</p>

<div>
<p><span>{Memory Storage <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:3">3</a>}</span></p><pre>/* 65536 locations */
uint16_t memory[UINT16_MAX];
</pre>


<p>Used in section <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:11">11</a></p>
</div>
<h3> Registers</h3>
<p>A register is a slot for storing a single value on the CPU. Registers are like the "workbench" of the CPU. For the CPU to work with a piece of data, it has to be in one of the registers. However, since there are just a few registers, only a minimal amount of data can be loaded at any given time. Programs work around this by loading values from memory into registers, calculating values into other registers, and then storing the final results back in memory.
</p>
<p>The LC-3 has 10 total registers, each of which is 16 bits. Most of them are general purpose, but a few have designated roles.
</p>
<ul>
<li>8 general purpose registers  (<code>R0</code>-<code>R7</code>)
</li>
<li>1 program counter (<code>PC</code>) register
</li>
<li>1 condition flags (<code>COND</code>) register
</li>
</ul>
<p>The general purpose registers can be used to perform any program calculations. The program counter is an unsigned integer which is the address of the next instruction in memory to execute. The condition flags tell us information about the previous calculation.
</p>

<div>
<p><span>{Registers <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:3">3</a>}</span></p><pre>enum
{
    R_R0 = 0,
    R_R1,
    R_R2,
    R_R3,
    R_R4,
    R_R5,
    R_R6,
    R_R7,
    R_PC, /* program counter */
    R_COND,
    R_COUNT
};
</pre>



</div>
<p>Just like the memory, we will store the registers in an array:
</p>

<div>
<p><span>{Register Storage <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:3">3</a>}</span></p><pre>uint16_t reg[R_COUNT];
</pre>


<p>Used in section <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:11">11</a></p>
</div>
<h3> Instruction Set</h3>
<p>An instruction is a command which tells the CPU to do some fundamental task, such as add two numbers. Instructions have both an <strong>opcode</strong> which indicates the kind of task to perform and a set of <strong>parameters</strong> which provide inputs to the task being performed.
</p>
<p>Each <strong>opcode</strong> represents one task that the CPU "knows" how to do. There are just 16 opcodes in LC-3. Everything the computer can calculate is some sequence of these simple instructions. Each instruction is 16 bits long, with the left 4 bits storing the opcode. The rest of the bits are used to store the parameters.
</p>
<p>We will discuss, in detail, what each instruction does later. For now, define the following opcodes. Make sure they stay in this order so that they are assigned the proper enum value:
</p>

<div>
<p><span>{Opcodes <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:3">3</a>}</span></p><pre>enum
{
    OP_BR = 0, /* branch */
    OP_ADD,    /* add  */
    OP_LD,     /* load */
    OP_ST,     /* store */
    OP_JSR,    /* jump register */
    OP_AND,    /* bitwise and */
    OP_LDR,    /* load register */
    OP_STR,    /* store register */
    OP_RTI,    /* unused */
    OP_NOT,    /* bitwise not */
    OP_LDI,    /* load indirect */
    OP_STI,    /* store indirect */
    OP_JMP,    /* jump */
    OP_RES,    /* reserved (unused) */
    OP_LEA,    /* load effective address */
    OP_TRAP    /* execute trap */
};
</pre>



</div>
<blockquote><p> <strong>Note:</strong> The Intel x86 architecture has hundreds of instructions, while others such as ARM and LC-3 have very few. Small instruction sets are referred to as <a href="https://en.wikipedia.org/wiki/Reduced_instruction_set_computer">RISCs</a> while larger ones are called <a href="https://en.wikipedia.org/wiki/Complex_instruction_set_computer">CISCs</a>. Larger instruction sets typically do not provide any fundamentally new possibilities, but they <a href="https://cs.stanford.edu/people/eroberts/courses/soco/projects/risc/risccisc/">often make it more convenient</a> to write assembly for. A single instruction in CISC might take the place of several in RISC. However, they tend to be more complex and expensive for engineers to design and manufacture. This and other tradeoffs cause the designs to come <a href="https://cs.stackexchange.com/questions/269/why-would-anyone-want-cisc">in and out of style</a>.
</p>
</blockquote>
<h3> Condition Flags</h3>
<p>The <code>R_COND</code> register stores condition flags which provide information about the most recently executed calculation. This allows programs to check logical conditions such as <code>if (x &gt; 0) { ... }</code>.
</p>
<p>Each CPU has a variety of condition flags to signal various situations. The LC-3 uses only 3 condition flags which indicate the sign of the previous calculation.
</p>

<div>
<p><span>{Condition Flags <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:3">3</a>}</span></p><pre>enum
{
    FL_POS = 1 &lt;&lt; 0, /* P */
    FL_ZRO = 1 &lt;&lt; 1, /* Z */
    FL_NEG = 1 &lt;&lt; 2, /* N */
};
</pre>



</div>
<blockquote><p> <strong>Note:</strong> (The <code>&lt;&lt;</code> symbol is called the <a href="https://msdn.microsoft.com/en-us/library/336xbhcz.aspx">left bitshift operator</a>. <code>(n &lt;&lt; k)</code> shifts the bits of <code>n</code> to the left <code>k</code> places. Thus <code>1 &lt;&lt; 2</code> will equal <code>4</code>. Read that link if you are not familiar. It will be important.)
</p>
</blockquote>
<p>We are finished setting up the hardware components of our VM! After adding standard includes (see reference), your file should look something like this:
</p>

<div>
<p><span>{<strong>lc3.c</strong> <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:3">3</a>}</span></p><pre><span>{Includes, <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:12">12</a>}</span>

<span>{Registers, <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:3">3</a>}</span>
<span>{Opcodes, <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:3">3</a>}</span>
<span>{Condition Flags, <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:3">3</a>}</span>
</pre>
<p>Added to in section <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:11">11</a></p>


</div>
</div>
<a name="1:4"></a><div><a name="1:4"><h4>4. Assembly Examples</h4></a>
<p>Now let's look at an LC-3 assembly program to get an idea of what the VM actually runs. You don't need to know how to program assembly or understand everything that is going on. Just try to get a general idea of what is going on. Here is a simple "Hello World":
</p>

<div>
<p><span>{Hello World Assembly <a href="https://justinmeiners.github.io/lc3-vm/index.html#1:4">4</a>}</span></p><pre>.O…</pre></div></div></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://justinmeiners.github.io/lc3-vm/">https://justinmeiners.github.io/lc3-vm/</a></em></p>]]>
            </description>
            <link>https://justinmeiners.github.io/lc3-vm/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24166137</guid>
            <pubDate>Sat, 15 Aug 2020 05:10:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Brain Oriented Programming]]>
            </title>
            <description>
<![CDATA[
Score 55 | Comments 35 (<a href="https://news.ycombinator.com/item?id=24165893">thread link</a>) | @pbw
<br/>
August 14, 2020 | https://tobeva.com/articles/brain-oriented-programming/ | <a href="https://web.archive.org/web/*/https://tobeva.com/articles/brain-oriented-programming/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <div>
        
        
        <main role="main">
          
<div>
	
	<p>Write code that’s compatible with how your brain works.</p>
	
	<p><strong>Video</strong>: <a href="https://youtu.be/D8Pb8TvYsCE">Philip reading this essay</a>.</p>
<p>The 1956 paper <em><a href="http://psychclassics.yorku.ca/Miller/">The Magical Number Seven, Plus or Minus
Two</a></em> is the most widely cited paper
in the 126 year history of the journal <em><a href="https://en.wikipedia.org/wiki/Psychological_Review">Psychological
Review</a></em>. The author
<a href="https://en.wikipedia.org/wiki/George_Armitage_Miller">George A. Miller</a> is
considered one of the founders in the field of cognitive science. His
historic claim is that you can only juggle <strong>between 5 and 9 things</strong> in
your brain at any one time.</p>
<p>To my knowledge, despite some
<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4486516/">controversy</a> over
the years, this 7 ± 2 figure has withstood the ongoing
<a href="https://www.nature.com/news/1-500-scientists-lift-the-lid-on-reproducibility-1.19970">reproducibility
crisis</a>
and it appears to capture a deep truth about how our brains actually
function.</p>
<p>Many people are skeptical of the claim because seven sounds like an
absurdly small number, surely if you are doing something complex like
writing software, or planning a wedding for that matter, you are juggling
dozens to hundreds of things? As it turns out you are not. At least not at
once.</p>







<div>
	<p><img src="https://tobeva.com/articles/brain-oriented-programming/pi_hu91e4edcab74d735c218b5a61e20b8fdd_76318_250x0_resize_q75_catmullrom.jpg" width="250" height="188"></p><p>
The first 225 digits of <a href="https://dancohen.org/2010/03/08/the-last-digit-of-pi/">Pi</a>.
</p>
	
</div>
<p>In 2005 <strong>Lu Chao</strong> recited <a href="https://www.livescience.com/50134-pi-day-memory-experts.html">67,890
digits</a> of
Pi, a mind-boggling demonstration of a gifted and well-trained mind. Yet
given a series of random single-digit numbers he can on average recall less
the than nine of them, to be exact he’s been measured to have a <a href="https://en.wikipedia.org/wiki/Memory_span#Digit-span">digit
span</a> of 8.83 which
fits perfectly within Miller’s finding. Amazing!</p>
<p>Chao memorizes Pi the same way story tellers once memorized long tales
about <a href="https://en.wikipedia.org/wiki/Gilgamesh">Gilgamesh</a>, yet he can only
juggle a handful of things at one time. I find this actually to be very
comforting, he is not a freak of nature, at least not as freaky as you
first thought.</p>
<p>The illusion we can hold many things in mind is almost identical to the
illusion that our field of view is high resolution everywhere. It’s
incredibly compelling because the instant we wonder <em>what’s over there</em> we
do a quick <a href="https://en.wikipedia.org/wiki/Saccade">saccade</a> and are
immediately rewarded with a high resolution view of exactly <em>what’s over
there</em>. We ask the question and we get an instant answer, so it feels like
the answer was there the whole time.</p>







<div>
	<p><img src="https://tobeva.com/articles/brain-oriented-programming/fovea_hu32924f3118f640732af8b68aadca9340_30500_512x0_resize_q75_catmullrom.jpg" width="512" height="227"></p><p> This picture exaggerates how big the
fovea is, it's actually only about as big as quarter held at arm's length.
</p>
	
</div>
<p>Thinking in general works very much like vision. This is not surprising
since it’s implemented using the same brain hardware. As we rapidly flit
from idea to idea, from concept to concept, we page in the necessary
details, but at no time do we have more than about nine individual things
in the front of our minds.</p>
<p>How do we navigate a complex world with this seemingly crippling limit on
the size of our working memory? Two of the primary tools that we use are
<a href="https://en.wikipedia.org/wiki/Chunking_(psychology)">chunking</a> and
<a href="https://en.wikipedia.org/wiki/Hierarchy">hierarchy</a>.</p>
<p>When we think of a car we naturally divide the car into a handful of high
level chunks like the <em>engine</em>, the <em>dashboard</em>, the <em>seats</em>, the <em>wheels</em>.
When we mentally zoom into the engine, however, it effortlessly resolves
into more parts: the <em>engine block</em>, the <em>pistons</em>, the <em>spark plugs</em>. And
we can keep zooming in, although how far we can zoom in highly depends on
how much we know about cars and the world in general.</p>
<p>In <a href="https://en.wikipedia.org/wiki/Object-oriented_programming">Object Oriented
Programming</a> one
of the simplest ways to tame complexity is to limit your objects to around
seven <em>attributes</em>. In some languages attributes are called <em>member
variables</em> or <em>fields</em>. Many programmers immediately balk at this
suggestion. Sure, that works for toy examples, but I’m writing serious
software and my objects sometimes need 10, 20 or 50 attributes. You must be
working on easy stuff, they will say. My problems are special, so my code
has to be different.</p>
<p>The biggest trap of software development is that it’s easy, trivial in
fact, to write software that you yourself cannot understand, and in turn no
one else can understand. Even a novice, <em>especially</em> a novice, can in a few
weeks write software that literally no one on the planet can easily think
or reason about. That’s depressing, but also kind of impressive in a way.
With great power comes great responsibility.</p>
<p>Objects which have too many attributes are a major cause of software that’s
too complicated to understand. Some people conclude the problem is Object
Oriented Programming itself. This is not a crazy idea, there are <a href="https://tobeva.com/resources/technical/programming/functional/">other
ways</a> to program, and they do
have advantages, but in my experience most of the flaws attributed to
Object Oriented Programming stem from having done it poorly, and boy is it
easy to do poorly.</p>







<div>
	<p><img src="https://tobeva.com/articles/brain-oriented-programming/complex_hua73d922edef0eeb6c3d75f190e4c0729_39455_350x0_resize_q75_catmullrom.jpg" width="350" height="197"></p><p>
Complexity grows without bound.
</p>
	
</div>
<p>The key thing to realize is a single object with a lot of attributes is
itself <em>not</em> Object Oriented. Instead, it’s a 1970s style <a href="https://en.wikipedia.org/wiki/Structured_programming">Structured
Program</a> in disguise.
The attributes of the object are the <strong>global variables</strong> of the program,
and the object’s methods are the program’s <strong>functions</strong>. Every function
can freely access every global variable which is what causes many of the
problems.</p>
<p>A structured program with more than seven global variables is trouble, and
if many objects in your program are effectively messy structured programs
themselves, you are in serious trouble indeed. At a high level you are
doing Object Oriented Programming, but at a low level you are right back in
the 1970s struggling to deal with one confusing program after the next.</p>
<p>How do we save this sinking ship? We save it by actively and aggressively
keeping the number of attributes per object <strong>at or below seven</strong>. If you
fail to do this you are punting the problem <em>to your future self</em>, a
problem that by definition your future self is going to have a hard time
solving.</p>
<p>Just today I had a <a href="https://www.python.org/">Python</a> class called
<code>PerfEvent</code> with these attributes:</p>
<div><pre><code data-lang="python">        <span>self</span><span>.</span><span>name</span> <span>=</span> <span>name</span>
        <span>self</span><span>.</span><span>start_ns</span> <span>=</span> <span>start_ns</span>
        <span>self</span><span>.</span><span>end_ns</span> <span>=</span> <span>end_ns</span>
        <span>self</span><span>.</span><span>category</span> <span>=</span> <span>category</span>
        <span>self</span><span>.</span><span>process_id</span> <span>=</span> <span>process_id</span>
        <span>self</span><span>.</span><span>thread_id</span> <span>=</span> <span>thread_id</span>
        <span>self</span><span>.</span><span>args</span> <span>=</span> <span>kwargs</span>
        <span>self</span><span>.</span><span>phase</span> <span>=</span> <span>phase</span></code></pre></div>
<p>That’s eight attributes, since eight is only one over the limit, should we
wait until the object grows bigger? No, let’s deal with it <em>now</em>. To reduce
the number of attributes we introduce two new classes or structs: <code>Span</code>
and <code>Origin</code>. Each only has two attributes, but now the original object has
been slimmed down to six attributes, all is well again:</p>
<div><pre><code data-lang="python">        <span>self</span><span>.</span><span>name</span> <span>=</span> <span>name</span>
        <span>self</span><span>.</span><span>span</span> <span>=</span> <span>Span</span><span>(</span><span>start_ns</span><span>,</span> <span>end_ns</span><span>)</span>
        <span>self</span><span>.</span><span>category</span> <span>=</span> <span>category</span>
        <span>self</span><span>.</span><span>origin</span> <span>=</span> <span>Origin</span><span>(</span><span>process_id</span><span>,</span> <span>thread_id</span><span>)</span>
        <span>self</span><span>.</span><span>args</span> <span>=</span> <span>kwargs</span>
        <span>self</span><span>.</span><span>phase</span> <span>=</span> <span>phase</span></code></pre></div>
<p>Although it’s a minor change, compare the two versions, the improved one
simply <em>looks</em> better, even if you stand far back and squint.</p>
<p>It seems minor, but if you don’t make these types of changes as you go it
will eventually lead to <em>intractable</em> complexity, the type of complexity
that causes projects and companies to fail, the type of complexity that
seduces humans into wasting <a href="https://spectrum.ieee.org/computing/software/why-software-fails">billions of
dollars</a>
every year writing software that does not work.</p>
<p>The benefits of introducing sub-objects goes far beyond just reducing the
number of attributes. While accessing the attributes is slightly more
verbose, I like the sound of <code>self.span.start_ns</code> compared to just
<code>self.start_ns</code>, but more importantly we can now pass <code>Span</code>'s and
<code>Owner</code>'s to functions, slimming down and chunking <em>their</em> argument lists.</p>
<p>We’ve introduced two natural and useful concepts that will pay ongoing
dividends, but even better don’t just think of how your code is today,
think about how it’s going to grow over time. Your single monolithic object
has sprouted two buds. You can now push functionality down into these buds,
and they can grow into branches, which later can sprout buds of their own.</p>
<p>For example we can now give <code>Span</code> a <code>get_duration_ns()</code> method. Again it seems
minor, but writing <code>span.get_duration_ns()</code> is better than writing
<code>span.end_ns - span.start_ns</code> especially if you are going to do that in
many different places.</p>
<p>The real magic though is that the benefits of being disciplined will accrue
like <a href="https://youtu.be/GtaoP0skPWc">compound interest</a> as you convert your
monolithic object into an intricately structured tree which buds and
sprouts and branches organically. You will benefit from this better design
every minute you are working on the software, and the software will benefit
greatly from your improved mood and ability to sustain focus.</p>







<div>
	<p><img src="https://tobeva.com/articles/brain-oriented-programming/featured-tree_hu59909ef0ac042e2e36ece8869e025722_141987_512x0_resize_q75_catmullrom.jpg" width="512" height="256"></p><p> 
A carefully tended <a href="https://en.wikipedia.org/wiki/Bonsai">Bonsai</a> tree.
</p>
	
</div>
<p>Code, like most human created artifacts, can be beautiful, so there is an
aesthetic pay off here, but the real jackpot is that if you assiduously
tend and groom this tree you will create a software design that slides into
your head with minimal fuss and friction, and slides similarly into the
heads of other people.</p>
<p>It’s no accident that we find natural environments to be more soothing than
the made world, than the concrete jungle. The design of the natural world
tends to be more in harmony with how our brains think about that world.
Game recognizes game.</p>
<p>Over time, you will grow a system that you and others can <strong>understand</strong>,
<strong>maintain</strong>, <strong>debug</strong> and <strong>extend</strong>. When people look at your code years
from now, maybe even in the <a href="https://archiveprogram.github.com/">far
future</a>, they will benefit from your
diligence and hard work. And the punchline is doing all this is not hard.
In fact, it’s <em>much easier</em> to do this work than not to not do it.</p>
<p>It’s easier and more pleasant to work with something that’s well crafted
and simpatico with your thinking. It’s hard and unpleasant to constantly
wrestle with something you don’t understand. Trim, prune and shape your
objects early and often. Your brain will thank you.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li>Hacker News <a href="https://news.ycombinator.com/item?id=24165893">comments</a> on this article.</li>
<li>Find your own digit span with this <a href="https://www.memorylosstest.com/digit-span/">Digit Span Memory Test</a>.</li>
<li>Some Chimpanzees have <a href="https://youtu.be/nTgeLEWr614?t=7">better working memory</a> than humans!</li>
</ul>
<p><strong>Postscript on APIs:</strong></p>
<p><em>The article discusses objects and attributes, not methods and APIs. NumPy’s</em>
<em><a href="https://numpy.org/doc/stable/reference/arrays.ndarray.html">ndarray</a> has</em>
<em>15 attributes but 50 methods. That’s totally fine, but imagine the</em>
<em>opposite, if it had 50 attributes? That would probably be a mess.</em></p>
<p><em>Attributes are global variables in the structured program that is the</em>
<em>object, so each additional attribute potentially complicates the</em>
<em>implementation of every other method in the object, present and future.</em></p>
<p><em>In contrast, adding a new …</em></p></div></main></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://tobeva.com/articles/brain-oriented-programming/">https://tobeva.com/articles/brain-oriented-programming/</a></em></p>]]>
            </description>
            <link>https://tobeva.com/articles/brain-oriented-programming/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24165893</guid>
            <pubDate>Sat, 15 Aug 2020 04:18:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Starlink Daily Coverage Estimates]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24164250">thread link</a>) | @trothamel
<br/>
August 14, 2020 | https://sebsebmc.github.io/starlink-coverage/index.html | <a href="https://web.archive.org/web/*/https://sebsebmc.github.io/starlink-coverage/index.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
    
    <p>
        I am now providing two different data sets: one that is calculated witha 25 degree minimum user terminal angle
        and one with a 35 degree minimum user terminal angle. The more recent SpaceX filings show that they are capable
        of using the 25 degree minimum but that they eventually want to increase that. The previous datasets were
        calculated with a 35 degree minimum as that was what I had found on file at the time. With the lower minimum
        angle and about 100 more satellites at operational altitudes the 25 degree dataset now shows bands with
        continuous coverage.
    </p>
    <p>
        Furthermore, I plan to calculate what I call the <em>satellite multiplicity</em>, the number of satellites
        overhead at any given time on average, since the number of overlapping satellites is relevant to some
        calculations for routing and bandwith.
    </p>
    <p>
        New Features: You can now double-click a cell to toggle showing more granular data.
        Cells with 100% uptime now display a gold star. Faster parsing, reduced battery drain,
        hopefully.
    </p>
    <p><label for="minAngleSelect">Choose a minimum angle to load the dataset:</label>
        
    </p>
    
    
    <div>
        <p>This renders the percentage of the day that a portion of the earth is covered by a Starlink satellite. (Red
            is no
            coverage, blue is all day coverage).</p>
        <p>Click on a cell to see how many minutes in a day a cell is covered by at least one satellite. Note that
            currently
            for performance reasons the cells are much larger than the resolution the data was simulated at. As such the
            error within a cell can be quite large, especially near the poles where the coverage drops off rapidly.
        </p>
        <p>In my opinion anything less than 1440 minutes (aka continuous coverage) means that SpaceX <em>should not</em>
            provide service in that area.</p><p>
        For more info about how it's calculated:
        <a href="https://github.com/sebsebmc/starlink-coverage">https://github.com/sebsebmc/starlink-coverage</a></p><h2> Changelog:</h2>
        <ul>
            <li>6-20-20 - Removed satellites that had low altitudes because they are not believed to be in operational
                orbits.</li>
            <li>6-21-20 - Fixed remaining issues with calculations at the antimerdian.</li>
            <li>7-31-20 - <ul>
                    <li>Added a double-click option to view higher resolution data. Double-click again to revert.</li>
                    <li>Added a 25 minimum degree dataset</li>
                    <li>Use gold star to mark cells with 100% uptime</li>
                    <li>Switched to new format and explicit rendering</li>
                </ul>
            </li>
        </ul>
        <p>
            Star image: Yakiv Gluck / CC BY-SA (https://creativecommons.org/licenses/by-sa/3.0)
        </p>
    </div>


</div>]]>
            </description>
            <link>https://sebsebmc.github.io/starlink-coverage/index.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24164250</guid>
            <pubDate>Fri, 14 Aug 2020 22:58:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[My best SEO tactic so far]]>
            </title>
            <description>
<![CDATA[
Score 200 | Comments 52 (<a href="https://news.ycombinator.com/item?id=24163658">thread link</a>) | @AlchemistCamp
<br/>
August 14, 2020 | https://questinglog.com/my-best-seo-tactic-so-far/ | <a href="https://web.archive.org/web/*/https://questinglog.com/my-best-seo-tactic-so-far/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody"><p>Over the years, I've worked on building search traffic for two kinds of sites.</p> <p>The first, was working for companies that already had hundreds of thousands or millions of monthly users and were trying to build their traffic via a team of writers. I did this first for Verbling (as a side component to my work as a full-time dev), and then later for Codementor, as a remote growth consultant.</p> <p>The second, was my own sites or apps where 100% of the content was produced by me. I've also helped several other independent solo-founders do essentially the same for their own projects. Today's advice is for 2nd type of site—the ones with just one writer.</p> <p>For a quick point of reference, I'll what I'm currently working on so you can get an idea of how applicable my experience is or isn't to you:  <a href="https://alchemist.camp/" target="_blank" rel="noopener noreferrer">Alchemist Camp</a>. It targets an extremely small programming niche and is hovering around Alexa 700k (10-15k uniques/month with decent visit time). I add new content about once a week. Previously, I built a considerably larger personal blog that peaked at about Alexa 300k, but it's no longer up.</p> <h2 id="work-with-the-search-engine"><a href="#work-with-the-search-engine">#</a> Work <em>with</em> the search engine</h2> <p>There's a lot of competition for attention from search engines and an entire industry of people trying to game them. It's possible to do that successfully in the short term, but people who do that generally get crushed when new search ranking updates. The more egregious marketers sometimes get penalized or banned entirely.</p> <p>There are certain technical SEO basics to pay attention to, such as having a reasonable site structure, a sitemap and appropriate meta-tags. I'm going to assume you've got that covered. WordPress or any other modern CMS will do an adequate job out of the box.</p> <p>So with the above assumptions, what's a good way to cut through the competition?</p> <h2 id="pay-attention-when-a-search-is-frustrating"><a href="#pay-attention-when-a-search-is-frustrating">#</a> Pay attention when a search is frustrating</h2> <p>The single most successful strategy I've found for getting search engine traffic for a more niche site has been to pay very close attention when something is difficult to find online. This isn't very difficult to do, since it's easy to notice when something is frustrating. The key is to be aware and take notes.</p> <p>Look at your browser history and write down <em>the exact queries</em> you typed into Google, Duckduckgo or your search engine of choice. Ask yourself <em>what</em> you were hoping to find online and why you tried each query after the first.</p> <h2 id="create-what-you-hoped-your-search-would-find"><a href="#create-what-you-hoped-your-search-would-find">#</a> Create what you hoped your search would find</h2> <p>Then, after you've learned what you were trying to learn during your frustrating search, create the very thing you were trying to find.</p> <p>Usually a search is difficult because the ideal answer doesn't exist in a single document online or video. Instead, finding the answer involves piecing the information together from numerous sources. If that was the case with your frustrating search, then the next step is to create the answer to the search and publish it.</p> <p>Occasionally after a long and frustrating search, you <em>will</em> find a single resource that answers exactly what you wanted. In this case the question is, "Why didn't my first several searches return this document?" Maybe it used different terminology than you did. Maybe it was comment on an ancient forum post. Maybe it was on an extremely slow site. Make your own version of the resource you finally found, but fix whatever issue made it difficult to find.</p> <h3 id="an-example"><a href="#an-example">#</a> An example</h3> <p>One direct example of using this strategy was when it took me about 20 minutes of searching to find out how to do a certain kind of query with Elixir's main DB-related library, Ecto. Elixir maps are stored in Postgres as JSONB fields, and I wanted to query fields within the JSONB.</p> <p>I saw I'd made 8 searches, starting with <em>"query nested fields of a map ecto"</em>. Ultimately the whole answer to what I was looking for was split between a Thoughtbot post, a Stack Overflow answer and a Postgres documentation page.</p> <p>Then I wrote a short article called, <a href="https://alchemist.camp/articles/querying-nested-map-ecto" target="_blank" rel="noopener noreferrer">Querying nested fields of a map with Ecto</a> that contained exactly the information I'd been looking for, and it's since brought in a thousand visitors from search in under a year.</p> <h2 id="why-does-this-work"><a href="#why-does-this-work">#</a> Why does this work?</h2> <p>This strategy tends to be stable because it works with the search engine and doesn't tend to get crushed by updates the way more aggressive techniques do. It leads to creating genuinely helpful resources for people to find online and Google has every incentive to return them in its results.</p> <p>Content created this way tends to rank well because the entire strategy revolves around escaping competition. If there is a lot of competition around a query, it's generally well-answered and you'll find an adequate (though possibly spammy, advertising-stuffed) result within a search or two. The searches that are <em>really</em> frustrating are usually not going to have much competition.</p> <p>Unless your interests are <strong>truly</strong> rare, others will search for what you did and find your page.</p>  <br></div></div>]]>
            </description>
            <link>https://questinglog.com/my-best-seo-tactic-so-far/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24163658</guid>
            <pubDate>Fri, 14 Aug 2020 21:44:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Sea of Nodes (2015)]]>
            </title>
            <description>
<![CDATA[
Score 22 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24163263">thread link</a>) | @ingve
<br/>
August 14, 2020 | https://darksi.de/d.sea-of-nodes/ | <a href="https://web.archive.org/web/*/https://darksi.de/d.sea-of-nodes/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://darksi.de/d.sea-of-nodes/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24163263</guid>
            <pubDate>Fri, 14 Aug 2020 21:05:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[^ NightShow HN: Have you seen this? The Real Real Good Product/Market fit.]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24162710">thread link</a>) | @martingalovic
<br/>
August 14, 2020 | https://pmfguru.com/superhuman-pmf-engine | <a href="https://web.archive.org/web/*/https://pmfguru.com/superhuman-pmf-engine">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<div>
<h4>TL;DR</h4>
<div><p>
Sean Ellis (early Dropbox, Eventbrite) found leading indicator for product/market fit.
<b>Just ask users "How would you feel if you could no longer use our product?" and measure the percent who answer "Very disappointed"</b></p><p>

If the percentage is above the 40%, you did it — you got to product/market fit.
</p></div>
<div>
<p>
<h4>
Start measuring your Product/Market Fit
</h4>
<h5>
<small>Built for startups. Setup in 2 minutes.</small>
</h5>
</p>

</div>

</div>
<p>
This article is by <a target="_blank" rel="noopener nofollow" href="https://www.linkedin.com/in/rahulvohra/">Rahul Vohra</a>, the founder and CEO of <a target="_blank" href="https://superhuman.com/">Superhuman</a> — a startup building the fastest email experience in the world.
</p>
<p>
We’ve all heard that product/market fit drives startup success — and that the lack thereof is what’s lurking behind
almost every failure.
</p>
<p>
For founders, achieving product/market fit is an obsession from day one. It’s both the hefty hurdle we’re racing
to clear and the festering fear keeping us up at night, worried that we’ll never make it.
But when it comes to understanding what product/market fit really is and how to get there, most of us quickly realize that
there isn’t a battle-tested approach.
</p>
<p>
In the summer of 2017, I was waist-deep in my search for a way to find product/market fit for my startup, Superhuman.
Turning to the classic blog posts and seminal thought pieces, a few observations stuck out to me.
Y Combinator founder Paul Graham described product/market fit as when you’ve <a target="_blank" href="http://www.paulgraham.com/13sentences.html">made something that people want</a>,
while Sam Altman <a href="http://blog.samaltman.com/before-growth">characterized</a> it as when users spontaneously tell other people to use your product.
But of course, the most cited description comes from this passage in Marc Andreessen’s 2007 blog post:
</p>
<p>
“You can always feel when product/market fit is <b>not</b> happening.
The customers aren't quite getting value out of the product, word of mouth isn't spreading, usage isn't growing that
fast, press reviews are kind of ‘blah,’ the sales cycle takes too long, and lots of deals never close.
</p>
<p>
And you can always feel product/market fit when it is happening. The customers are buying the product just as
fast as you can make it — or usage is growing just as fast as you can add more servers. Money from customers
is piling up in your company checking account. You're hiring sales and customer support staff as fast as you can.
Reporters are calling because they've heard about your hot new thing and they want to talk to you about it.
You start getting entrepreneur of the year awards from Harvard Business School.
Investment bankers are staking out your house.”
</p>
<p>
For me, this was the most vivid definition — and one that I stared at through tears.
</p>
<p>
We had set up shop and started coding Superhuman in 2015. A year later, our team had grown to seven and we were still furiously coding. By the summer of 2017, we had reached 14 people — and we were still coding. I felt intense pressure to launch, from the team and also from within myself. My previous startup, <a target="_blank" rel="noopener nofollow" href="http://rapportive.com/">Rapportive</a>, had launched, scaled and been acquired by LinkedIn in less time. Yet here we were, two years in, and we had not passed go.
</p>
<p>
But no matter how intense the pressure, I wasn’t ready to launch. Common practice would be to "throw it out there and see what sticks,” which may be fine after a few months of effort when the sunk cost is low. But the “launch and see what happens” method seemed irresponsible and reckless to me — especially given the years that that we had invested.
</p>
<p>
<img alt="Rahul Vohra, Founder of Superhuman" src="https://pmfguru.com/assets/blog/Rahul-Vohra-22cbde9d5bf1eefdec11bb9c0b818b2347fbfba9465266a1c73df5333c710d03.jpg">
</p><p><small>Handsome Rahul Vohra, Founder of Superhuman</small>
</p>

<p>
Further compounding the pressure, as a founder, I couldn’t just tell the team how I felt. These super-ambitious engineers had poured their hearts and souls into the product. I had no way of telling the team we weren’t ready, and worse yet, no strategy for getting out of the situation — which is not something they would want to hear. I wanted to find the right language or framework to articulate our current position and convey the next steps that would get us to product/market fit, but was struggling to do so.
</p>
<p>
That’s because the descriptions of product/market fit I found were immensely helpful for companies <em>post-launch</em>. If, after launch, revenue isn’t growing, raising money is tough, the press doesn't want to talk to you and user growth is anemic, then you can safely conclude you don't have product/market fit. But in practice, because of my previous success as a founder, we didn’t have problems raising money. We could have gotten press, but we were actively avoiding it. And user growth wasn't happening because we deliberately choosing not to onboard more users. We were pre-launch — and we didn’t have any indicators to clearly illustrate our situation.
</p>
<p>
The descriptions of product/market fit all seemed so post hoc, so unactionable. I had a clear understanding of where we stood, but I had no way of conveying that to others — and no plan for the part that should come next.
</p>
<p>
So I racked my brain for an answer on how to travel the distance between where Superhuman was and the high bar that we needed to hit. And I eventually started to wonder: <b>what if you could measure product/market fit?</b> Because if you could measure product/market fit, then maybe you could optimize it. And then maybe you could systematically increase product/market fit until you achieved it.
</p>
<p>
Reoriented around this purpose and reinvigorated by the new direction, I set out to reverse engineer a process for getting to product/market fit. Below, I outline the findings that followed, specifically unpacking the clarifying metric that made everything fall into place and the four-step process we used to build an engine that propelled Superhuman forward on the path to finding our fit.
</p>
<h5>
ANCHORING AROUND A METRIC: A LEADING INDICATOR FOR PRODUCT/MARKET FIT
</h5>
<p>
On my quest to understand product/market fit, I read all I could and spoke with every expert I could find. Everything changed when I found Sean Ellis, who ran early early growth in the early days of Dropbox, LogMeIn, and Eventbrite and later coined the term “growth hacker.”
</p>
<div>
<div>
<p>
<h4>
Start measuring your Product/Market Fit
</h4>
<h5>
<small>Built for startups. Setup in 2 minutes.</small>
</h5>
</p>

</div>

</div>
<p>
The product/market fit definitions I had found were vivid and compelling, but they were <em>lagging</em> indicators — by the time investment bankers are staking out your house, you already have product/market fit. Instead, Ellis had found a <em>leading</em> indicator: <b>just ask users “how would you feel if you could no longer use the product?” and measure the percent who answer “very disappointed.”</b>
</p>
<p>
After benchmarking nearly a hundred startups with his customer development survey, Ellis found that the magic number was 40%. Companies that struggled to find growth almost always had less than 40% of users respond “very disappointed,” whereas companies with strong traction almost always exceeded that threshold.
</p>
<p>
... Rest of the story on <a href="https://firstround.com/review/how-superhuman-built-an-engine-to-find-product-market-fit/?utm_source=pmf.guru" target="_blank" rel="noopener nofollow">FirstRound.com</a>
</p>
</div></div>]]>
            </description>
            <link>https://pmfguru.com/superhuman-pmf-engine</link>
            <guid isPermaLink="false">hacker-news-small-sites-24162710</guid>
            <pubDate>Fri, 14 Aug 2020 20:14:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Colorize Old Photos with DeOldify]]>
            </title>
            <description>
<![CDATA[
Score 55 | Comments 14 (<a href="https://news.ycombinator.com/item?id=24162561">thread link</a>) | @aliabd
<br/>
August 14, 2020 | https://www.gradio.app/hub/hub-deoldify | <a href="https://web.archive.org/web/*/https://www.gradio.app/hub/hub-deoldify">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.gradio.app/hub/hub-deoldify</link>
            <guid isPermaLink="false">hacker-news-small-sites-24162561</guid>
            <pubDate>Fri, 14 Aug 2020 20:01:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Faster queries on Parquet/ORC nested data in Presto]]>
            </title>
            <description>
<![CDATA[
Score 17 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24161857">thread link</a>) | @nitramt
<br/>
August 14, 2020 | https://prestosql.io/blog/2020/08/14/dereference-pushdown.html | <a href="https://web.archive.org/web/*/https://prestosql.io/blog/2020/08/14/dereference-pushdown.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<article itemscope="" itemtype="http://schema.org/BlogPosting">

<div itemprop="articleBody">
<p><a href="https://prestosql.io/docs/current/release/release-334.html">Presto 334</a>
adds significant performance improvements for queries
accessing nested fields inside struct columns. They have been optimized through
the pushdown of dereference expressions. With this feature, the query execution
prunes structural data eagerly, extracting the necessary fields.</p>

<p><code>RowType</code> is a built-in data type of Presto, storing the in-memory
representation of commonly used nested data types of the connectors, eg.
<code>STRUCT</code> type in Hive. Datasets often contain wide and deeply nested structural
columns, i.e. a struct column having hundreds of fields, with the fields being
nested themselves.</p>
<p>Although such <code>RowType</code> columns can contain plenty of data, most of the
analytical queries access just a few fields out of it. Without dereference
pushdown, Presto scans the whole column, and shuffles all that data around
before projecting the necessary fields. This suboptimal execution causes higher
CPU usage, higher memory usage and higher query latencies, than required. The
unnecessary operations get even more expensive with wider/deeper structs and
more complex query plans.</p>
<p>LinkedIn’s data ecosystem makes heavy usage of nested columns. It is common to
have 2-3 levels of nesting, and up to 50 fields in most of our tracking tables.
Because of the query execution inefficiency for nested fields, ETL pipelines
were set up at LinkedIn to copy the nested columns as a set of top-level columns
corresponding to subfields. This step added overhead in our ingestion process
and delayed data availability for analytics. It also caused ORC schemas to be
inconsistent with the rest of the infrastructure, making it harder to migrate
from existing flows on row-oriented formats.</p>
<p>Similarly, Lyft’s schemas make heavy use of nested data to decompose a ride
into its routes, riders, segments, modes, and geo-coordinates. Prior to the
performance improvements, analytical queries would either need to be run on
clusters with very long timeouts, or the data would have to be flattened before
being analyzed, adding an extra ETL step. Not only would this be costly, it
would also cause the original schema to diverge in our data warehouse making it
more difficult for data scientists to understand.</p>
<p>The dereference pushdown optimization in Presto is having a massive impact on
the ingestion story at both LinkedIn and Lyft. Nested data is now being made
available faster for consumption with a consistency of structure across all
stores, while maintaining performance parity for analytical queries.</p>

<p>Say we have a Hive table <code>jobs</code>, with a struct-typed column <code>job_info</code> in the
schema. The column <code>jobs</code> is wide and deeply nested, i.e. <code>ROW(company
varchar, requirements ROW(skills array(...), education ROW(...), salary ...) ,
...)</code>. Most queries would access a small percentage of data from this struct
using the dereference projection (the <code>.</code> operation). Consider such a query <code>Q</code>
below.</p>
<div><div><pre><code><span>SELECT</span> <span>A</span><span>.</span><span>appid</span> <span>id</span><span>,</span> <span>J</span><span>.</span><span>job_info</span><span>.</span><span>company</span> <span>c</span>
<span>FROM</span> <span>applications</span> <span>A</span> <span>JOIN</span> <span>jobs</span> <span>J</span>
<span>ON</span> <span>A</span><span>.</span><span>jobid</span> <span>=</span> <span>J</span><span>.</span><span>jobid</span>
<span>LIMIT</span> <span>100</span>
</code></pre></div></div>
<p>It should suffice to scan only one field <code>company</code> from <code>J.job_info</code> for
executing this query. But, without dereference pushdown, Presto scans and
shuffles everything from <code>job_info</code>, only to project a single field at the end.</p>
<p><img src="https://prestosql.io/assets/blog/dereference-pushdown/original_plan.png" alt=""></p>

<p>With dereference pushdown, Presto optimizes queries by extracting the sufficient
fields from a <code>ROW</code> as early as possible. This is enforced by modifying the
query plan through a set of optimizers, and can be broadly divided into two
parts.</p>
<p>First, dereference projections are extracted in the query plan and pushed as
close to the table scan as possible. This happens independent of what the
connector is. Secondly, there is a further improvement for Hive tables. The
Hive Connector and ORC/Parquet readers have been optimized to scan only the
sufficient subfield columns.</p>
<p>Pushdown of predicates on the subfields is also a crucial optimization. For
example, if a query has filters on subfields (i.e. <code>a.b &gt; 5</code>), they should be
utilized by ORC/Parquet readers while scanning files. The pushdown helps with
the pruning of files, stripes and row-groups based on column-level statistics.
This optimization is achieved as a byproduct of the above two optimizations.</p>
<p>With the dereference pushdown, queries observe significant performance gains in
terms of CPU/memory usage and query runtime, roughly proportional to the
relative size of nested columns compared to the accessed fields.</p>
<h2 id="pushdown-in-query-plan">Pushdown in Query Plan</h2>
<p>The goal here is to execute dereference projections as early as possible. This
usually means performing them right after the table scans.</p>
<p>A projection operation that performs dereferencing on input symbols (i.e.
<code>job_info.company</code>) reduces the amount of data going up the plan tree. Pushing
dereference projections down means that we are pruning data early. It reduces
the amount of data being processed and shuffled in query execution. For the
example query <code>Q</code>, the query plan looks like the following when dereference
pushdown is enabled.</p>
<p><img src="https://prestosql.io/assets/blog/dereference-pushdown/transformed_plan.png" alt=""></p>
<p>The projection <code>job_info.company</code> now directly follows the scan of <code>jobs</code> table,
avoiding the propagation the <code>job_info</code> through <code>Limit</code> and <code>Join</code> nodes. Note
that all of <code>job_info</code> is still being scanned, and pruning it in the reader
requires connector-dependent optimizations.</p>
<h2 id="pushdown-in-the-hive-connector">Pushdown in the Hive Connector</h2>
<p>In columnar formats like ORC and Parquet, the data is laid out in a columnar
fashion even for subfields. If we have a column <code>STRUCT(f1, f2, f3)</code>, the
subfields <code>f1</code>, <code>f2</code> and <code>f3</code> are stored as independent columns. An optimized
query engine should only scan the required fields through its ORC reader,
skipping the rest. This optimization has been added for Hive connector.</p>
<p>Dereference projections above a <code>TableScanNode</code> are pushed down in the Hive
connector as “virtual” (or “projected”) columns. The query plan is modified to
refer to these new columns. For the query <code>Q</code>, <code>jobs</code> table would be scanned
differently with this optimization, as shown below. The projection is now
embedded in the Hive connector. Here, <code>job_info#company</code> can be thought of as
a virtual column representing the subfield <code>job_info.company</code>.</p>
<p><img src="https://prestosql.io/assets/blog/dereference-pushdown/connector_pushdown.png" alt=""></p>
<p>The Hive connector handles the projections before returning columns to Presto’s
engine. It provides the required virtual columns to format-specific readers.
ORC and Parquet readers optimize their scans based on subfields required,
increasing their read throughput. Subfield pruning is not possible for
row-oriented format readers (e.g. AVRO). For them, Hive connector performs
adaptation to project the required fields.</p>
<h2 id="pushdown-of-predicates-on-subfields">Pushdown of Predicates on Subfields</h2>
<p>Columnar formats store per-column statistics in the data files, which can be
used by the readers for filtering. eg. if a query contains filter <code>y = 5</code> for a
top-level column <code>y</code>, Presto’s ORC reader can skip ORC stripes and files by
looking at the upper and lower bounds for <code>y</code> in the statistics.</p>
<p>The same concept of predicate-based pruning can work for filters involving
subfields, since the statistics are also stored for subfield columns. i.e.
Presto’s ORC/Parquet reader should be able to filter based on a constraint like
<code>x.f1 = 5</code> for more optimal scans. Good news! In the final optimized plan,
predicates on a subfield are pushed down to the hive connector as a constraint
on the corresponding virtual column, and later used for optimizing the scan.
The complete logic is a bit complicated to explain here, but can be illustrated
through the following example.</p>
<p>Given an initial plan with a predicate on a dereferenced field (<code>x.f1 = 5</code>), a
chain of optimizers transform it to a more optimal plan with reader-level
predicates. In the future, the same optimization will be added to the Parquet
reader.</p>
<p><img src="https://prestosql.io/assets/blog/dereference-pushdown/predicate_pushdown.png" alt=""></p>
<p>In the final plan, Hive connector knows to scan the column <code>y</code> and the subfield
<code>x.f1</code>. It also takes advantage of the “virtual” column constraint <code>x#f1 = 5</code>
for reader-level pruning.</p>
<h2 id="performance-improvement">Performance Improvement</h2>
<p>Dereference pushdown improves performance for queries accessing nested fields
in multiple ways. First, it increases the read throughput for table scans,
reducing the CPU time. The pruning of fields during the scan also means lesser
data to process for all downstream operators and tasks. So the early
projections result in more optimal execution for any operations that involve
shuffle or copy of data. Moreover, for ORC/Parquet, the read performance
improves in the case of selective filters on subfields.</p>
<p>Below are some experimental results on a production dataset at LinkedIn which
contains 3 <code>STRUCT</code> columns, having ~20-30 small subfields in each. The
example queries used in the analysis access only a few subfields. The queries
have been listed as their approximate query shape for the sake of brevity. The
plots compare CPU usage, peak memory usage and averaged query wall time.</p>

<p><img src="https://prestosql.io/assets/blog/dereference-pushdown/runtime_perf.png" alt=""></p>
<p>CPU usage and peak memory usage show orders-of-magnitude improvement in
presence of dereference pushdown. Query wall times also reduce considerably,
and this improvement is more drastic for the relatively complex <code>JOIN</code> query,
as expected.</p>
<p>Please note that these are not benchmarks! The performance improvement you’ll
see will vary depending on how many columns are contained in your nested data
versus how many you’ve referenced. At Lyft we saw improvements of <code>50x</code> for some
queries!</p>
<h2 id="future-work">Future Work</h2>
<p>The pushdown of dereference expressions can be extended to arrays. i.e.
dereference operations applied after unnesting an array should also get pushed
down to the readers. For example, using our jobs table from before, our
<code>jobs.job_info</code> structure may contain a repeating structure such as
<code>required_skills</code>. With the following query, the entire required_skills
structure would be read even though only a small part of it is being referenced.</p>
<div><div><pre><code><span>SELECT</span> <span>S</span><span>.</span><span>description</span>
<span>FROM</span> <span>jobs</span> <span>J</span>
<span>CROSS</span> <span>JOIN</span> <span>UNNEST</span> <span>(</span><span>job_info</span><span>.</span><span>required_skills</span><span>)</span> <span>S</span>
<span>WHERE</span> <span>S</span><span>.</span><span>years_of_experience</span> <span>&gt;=</span> <span>2</span>
</code></pre></div></div>
<p>The work for this improvement is being tracked in <a href="https://github.com/prestosql/presto/issues/3925">this issue</a>.</p>
<p>Similar to Hive Connector, connector-level dereference pushdown can be extended
to other connectors supporting nested types.</p>
<p>Another future improvement will be the pushdown of …</p></div></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://prestosql.io/blog/2020/08/14/dereference-pushdown.html">https://prestosql.io/blog/2020/08/14/dereference-pushdown.html</a></em></p>]]>
            </description>
            <link>https://prestosql.io/blog/2020/08/14/dereference-pushdown.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24161857</guid>
            <pubDate>Fri, 14 Aug 2020 18:58:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[8 Tips for Attending Virtual Conferences]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24161519">thread link</a>) | @vmbrasseur
<br/>
August 14, 2020 | https://www.fosslife.org/8-tips-attending-virtual-conferences | <a href="https://web.archive.org/web/*/https://www.fosslife.org/8-tips-attending-virtual-conferences">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <div>
              <div>
                <div id="region--article-content">
                  <div>

  <div>
          
            
              
      <div>
              <div>  <div>
          
            <div><p>It's conference season…virtually speaking. The health and safety of our community are more important than anything else, which means in-person events are a no-go in 2020 (and likely beyond). Rather than canceling, most tech events in 2020 have decided to go online. These very virtual venues aren't the only change. If you've attended conferences before, you're in for a completely different experience with an online event.</p>

<p>How can you make the most of this new world of virtual conferences? We have eight tips to help get you started.</p>

<ol><li><strong>Understand your goals.</strong> Before attending, make sure you know what you want to get out of the event. So many people attend conferences on autopilot. "It's just what you do" is not a valid reason for spending your valuable time. Think it through first.</li>
	<li><strong>Be selective.</strong> If you're there for training, select talks that will be most helpful for moving you toward your goals. This isn't different from an in-person event, but it's something I find few people actually do. Plan to spend your time on the things that matter most for you.</li>
	<li><strong>Adjust your expectations.</strong> If you're there for networking, you might be disappointed. Most online conferences fall short on this element. It's nearly impossible for online events to duplicate the serendipitous experience of walking around and hanging out at an in-person event. Most attempts to do so feel contrived at best and worryingly like Chatroulette at worst, leaving them ripe for abuse.</li>
	<li><strong>Be respectful.</strong> Speaking of abuse, don't be That Guy in the session chatroom. Just because typing in the chat may not interrupt the speaker's delivery, it doesn't give you license to type a bunch of “well actually”s during their session. The session chat is not the place to show off your knowledge or bring up a pet project that you feel the speaker should have mentioned. Just like at in-person events, legitimate questions are welcome but comments are not. If you want to show off your knowledge, do it the way the speaker did: by doing the hard work of getting a proposal accepted then writing and delivering a good talk.</li>
	<li><strong>Branch out.</strong> Because nearly every conference seems to be going virtual right now, you may find that these online events give you the opportunity to test the waters in a conference you'd never otherwise attend. Want to learn more about technical writing? Accessibility? Product management? HR? Robotics? Whatever the topic, you can find an online conference for it. A few introductory sessions may give you a lot of valuable perspective on other roles and industries.</li>
	<li><strong>Take a break.</strong> Many people find all-day video conferences even more exhausting than the real-life version of the event. Remember: You don't need to attend a session in every time slot. Take care of yourself by taking breaks to go for a walk, play with your pets or kids, stretch, read comic books, or whatever helps you relax. You'll get a lot more out of the event this way.</li>
	<li><strong>Make the format work for you.</strong> A lot of video conferencing systems allow you to join the video on one device and the audio on another, such as your phone. This can be really helpful to battle conference fatigue because, by using your phone for the audio, you're no longer chained to your workspace and can move around without missing much. At a real-life conference, it's typically bad form to move around a lot in the middle of a session, but not so when the event is virtual, and using your phone for the audio can maximize your flexibility in this regard. In a virtual conference, it's perfectly fine to go get another cup of tea, walk around the room, or take a bathroom break (just make sure you're on mute).</li>
	<li><strong>Choose wisely.</strong> The best conference may be the one you never attend. If you don't feel you'll be able to meet your goals or have a good experience at an online event, don't attend it. You may be able to select the content that's best for your needs by viewing recordings of talks or by setting up online networking video chats with colleagues and fellow community members.</li>
</ol></div>
      
      </div>
</div>
          </div>
  
      </div>
</div>
                </div>
              </div>
            </div>
          </div></div>]]>
            </description>
            <link>https://www.fosslife.org/8-tips-attending-virtual-conferences</link>
            <guid isPermaLink="false">hacker-news-small-sites-24161519</guid>
            <pubDate>Fri, 14 Aug 2020 18:31:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: I got a list of 2000 Venture Capitalist Firms]]>
            </title>
            <description>
<![CDATA[
Score 20 | Comments 5 (<a href="https://news.ycombinator.com/item?id=24159812">thread link</a>) | @artif4ct
<br/>
August 14, 2020 | https://blog.scraper.ai/getting-lists-of-venture-capitalist-firms/ | <a href="https://web.archive.org/web/*/https://blog.scraper.ai/getting-lists-of-venture-capitalist-firms/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p>When you're looking for funding, or you're looking to approach a VC it's always interesting to get a list of the different VCs out there. Now sadly enough this is not easy to find, or you need to manually select each record.</p><p>After looking a bit on the internet, I found a list of over <strong><a href="http://www.boogar.com/resources/venturecapital/index.htm">2.000 VC firms</a></strong> out there. So let's get started creating our up to date list!</p><p>I will name this list <a href="http://www.boogar.com/resources/venturecapital/angels.htm"><strong>"VC - All"</strong></a><strong> </strong>which I will update weekly.</p><p>Beside updating this list weekly, I also want to select all the records. So I utilize the pagination functionality to do just this!</p><figure><img src="https://blog.scraper.ai/content/images/2020/07/image-43.png" alt="" srcset="https://blog.scraper.ai/content/images/size/w600/2020/07/image-43.png 600w, https://blog.scraper.ai/content/images/size/w1000/2020/07/image-43.png 1000w, https://blog.scraper.ai/content/images/size/w1600/2020/07/image-43.png 1600w, https://blog.scraper.ai/content/images/2020/07/image-43.png 1920w" sizes="(min-width: 720px) 720px"></figure><figure><img src="https://blog.scraper.ai/content/images/2020/07/image-41.png" alt="" srcset="https://blog.scraper.ai/content/images/size/w600/2020/07/image-41.png 600w, https://blog.scraper.ai/content/images/size/w1000/2020/07/image-41.png 1000w, https://blog.scraper.ai/content/images/size/w1600/2020/07/image-41.png 1600w, https://blog.scraper.ai/content/images/2020/07/image-41.png 1920w" sizes="(min-width: 720px) 720px"></figure><p>Finally I put the pagination limit on 30, click Finish and sit back and relax!</p><blockquote>The engine will automatically take care of getting the links behind this!</blockquote><figure><img src="https://blog.scraper.ai/content/images/2020/07/image-44.png" alt="" srcset="https://blog.scraper.ai/content/images/size/w600/2020/07/image-44.png 600w, https://blog.scraper.ai/content/images/size/w1000/2020/07/image-44.png 1000w, https://blog.scraper.ai/content/images/size/w1600/2020/07/image-44.png 1600w, https://blog.scraper.ai/content/images/2020/07/image-44.png 1920w" sizes="(min-width: 720px) 720px"></figure>
</div></div>]]>
            </description>
            <link>https://blog.scraper.ai/getting-lists-of-venture-capitalist-firms/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24159812</guid>
            <pubDate>Fri, 14 Aug 2020 16:15:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Using 'this' incorrectly in C#]]>
            </title>
            <description>
<![CDATA[
Score 45 | Comments 121 (<a href="https://news.ycombinator.com/item?id=24158180">thread link</a>) | @jermaustin1
<br/>
August 14, 2020 | https://jeremyaboyd.com/post/you-are-using-this-incorrectly | <a href="https://web.archive.org/web/*/https://jeremyaboyd.com/post/you-are-using-this-incorrectly">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
        <div>
            <div>
                <div>
                    <p>I'm a highly opinionated developer. I've been doing it a little while, and worked with a few other developers, and this is a pet peeve of mine. The <code>this</code> keyword, at least in C#, is oft misused and abused. From henceforth, the context of this post is C# development.</p>
<p>This post seems to have caused a bit of controversy. More to my point, even in base Visual Studio, there are warnings to remove <code>this</code> from your code:
<img src="https://i.imgur.com/9F6Lyx8.png" alt="visual studio 2019"></p>
<p>I've had managers want developers to use <code>this</code> to signify calling a base class's method, which is incorrect. You should be using <code>base</code>.</p>
<pre><code>public class MyClass : YourClass {
    public void MyMethod() {
        if(!base.YourMethod()) return;
    }
}</code></pre>
<p>I've had coworkers who would put <code>this</code> before every method call, because...? When calling your own method, in your own class, that inherits/implements no other classes, why on earth would you decorate your own method call with <code>this</code>?</p>
<p>The only time I have seen prepending <code>this</code> to anything as <em>kind of</em> acceptable, is when you have parameters in a method that are the same as fields/properties on your class, and you need to access those fields/properties inside said method. I am still not a fan of this, but the closest I will get to accepting it is in a constructor where you are passing values that will be stored as <strong>private</strong> fields.</p>
<pre><code>public class SomeClass {
    int maxAmount;
    SomeClass(int maxAmount) =&gt; this.maxAmount = maxAmount;
    ValidateMe(int someValue) =&gt; someValue &lt;= maxAmount;
}</code></pre>
<p>But even in this case, you should really be using Pascal casing as per <a href="https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/capitalization-conventions">Microsoft's Capitalization Conventions</a>. I know, capitalization conventions change over time, and I could have <strong>sworn</strong> there was a time when camel casing was the recommended approach for fields (specifically private fields), but times they are a changing, and cleaner code will hopefully prevail, especially cleaner code without the misuse/abuse of <code>this</code>.</p>
<p>Maybe I'm the only one this matters for, or maybe I'm just having a bad day and came across <code>this</code> too many times this morning. I do hope you agree though.</p>

                </div>
            </div>
        </div>
    </article></div>]]>
            </description>
            <link>https://jeremyaboyd.com/post/you-are-using-this-incorrectly</link>
            <guid isPermaLink="false">hacker-news-small-sites-24158180</guid>
            <pubDate>Fri, 14 Aug 2020 14:11:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why I'm all in on Circle for online community building]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24157612">thread link</a>) | @JayClouse
<br/>
August 14, 2020 | https://jayclouse.com/how-to-build-an-online-community/ | <a href="https://web.archive.org/web/*/https://jayclouse.com/how-to-build-an-online-community/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="wtr-content" data-bg="#FFFFFF" data-fg="#00aeff" data-width="10" data-mute="" data-fgopacity="1.00" data-mutedopacity="0.80" data-placement="bottom" data-placement-offset="0" data-content-offset="0" data-placement-touch="bottom" data-placement-offset-touch="0" data-transparent="" data-touch="1" data-non-touch="1" data-comments="0" data-commentsbg="#ffcece" data-location="page" data-mutedfg="#00aeff" data-rtl=""><p>There’s never been a more relevant time to learn how to build an online community. I’ve spent a lot of time building community over the last seven years. It started in 2012 when I began attending, organizing, and facilitating dozens of Startup Weekend events across the country.</p>
<p>People <em>loved </em>Startup Weekend – especially in the days before the Techstars acquisition. And yes, some notable companies like Zaarly, Beardbrand, and Zapier were started at a Startup Weekend…but people didn’t love Startup Weekend for the “companies” that were started there.</p>
<p>People loved Started Weekend for the community.</p>
<p><picture><source data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-scaled.webp 2560w,https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-300x200.webp 300w,https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-1024x683.webp 1024w,https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-768x512.webp 768w,https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-1536x1024.webp 1536w,https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-2048x1366.webp 2048w,https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-100x67.webp 100w,https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-900x600.webp 900w,https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-1200x800.webp 1200w" sizes="(max-width: 2560px) 100vw, 2560px" type="image/webp"><source data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-scaled.jpg 2560w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-300x200.jpg 300w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-1024x683.jpg 1024w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-768x512.jpg 768w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-1536x1024.jpg 1536w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-2048x1366.jpg 2048w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-100x67.jpg 100w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-900x600.jpg 900w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-1200x800.jpg 1200w" sizes="(max-width: 2560px) 100vw, 2560px"><img src="https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-scaled.jpg" alt="Startup Weekend Group Photo 2018" height="1707" width="2560" srcset="https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-scaled.jpg 2560w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-300x200.jpg 300w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-1024x683.jpg 1024w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-768x512.jpg 768w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-1536x1024.jpg 1536w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-2048x1366.jpg 2048w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-100x67.jpg 100w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-900x600.jpg 900w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-1200x800.jpg 1200w" sizes="(max-width: 2560px) 100vw, 2560px" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%202560%201707'%3E%3C/svg%3E" data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-scaled.jpg 2560w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-300x200.jpg 300w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-1024x683.jpg 1024w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-768x512.jpg 768w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-1536x1024.jpg 1536w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-2048x1366.jpg 2048w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-100x67.jpg 100w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-900x600.jpg 900w, https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-1200x800.jpg 1200w" data-lazy-src="https://jayclouse.com/wp-content/uploads/2020/08/10781_ES_103-1-scaled.jpg"></picture></p>
<p>And I loved what it felt like to create that space for people. So I kept creating community: from organizing Startup Weekends in the early 2010s to throwing house concerts in 2014-2016.</p>
<p>Then in 2017, I started an online accelerator program, Unreal Collective. That program gave rise to its own online community and <a href="https://unrealcollective.com/community">it’s my favorite place</a> to spend time online.</p>
<p>And that all led to this year, when I was given the opportunity to work with Pat Flynn and the Smart Passive Income team to create their paid, online membership community, <a href="https://www.smartpassiveincome.com/pro">SPI Pro</a>, using <a href="https://jayclouse.com/circle" target="_blank" rel="noopener noreferrer">Circle</a> (more about that <a href="https://www.smartpassiveincome.com/podcasts/taking-business-next-level-spi-pro/">on SPI episode 429</a>).</p>

<p><picture><source data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM.webp 2210w,https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-300x176.webp 300w,https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-1024x600.webp 1024w,https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-768x450.webp 768w,https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-1536x899.webp 1536w,https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-2048x1199.webp 2048w,https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-100x59.webp 100w,https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-900x527.webp 900w,https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-1200x703.webp 1200w" sizes="(max-width: 2210px) 100vw, 2210px" type="image/webp"><source data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM.png 2210w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-300x176.png 300w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-1024x600.png 1024w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-768x450.png 768w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-1536x899.png 1536w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-2048x1199.png 2048w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-100x59.png 100w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-900x527.png 900w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-1200x703.png 1200w" sizes="(max-width: 2210px) 100vw, 2210px"><img src="https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM.png" alt="I really studied how to build an online community with SPI Pro" height="1294" width="2210" srcset="https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM.png 2210w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-300x176.png 300w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-1024x600.png 1024w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-768x450.png 768w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-1536x899.png 1536w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-2048x1199.png 2048w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-100x59.png 100w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-900x527.png 900w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-1200x703.png 1200w" sizes="(max-width: 2210px) 100vw, 2210px" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%202210%201294'%3E%3C/svg%3E" data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM.png 2210w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-300x176.png 300w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-1024x600.png 1024w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-768x450.png 768w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-1536x899.png 1536w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-2048x1199.png 2048w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-100x59.png 100w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-900x527.png 900w, https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM-1200x703.png 1200w" data-lazy-src="https://jayclouse.com/wp-content/uploads/2020/08/Screen-Shot-2020-08-09-at-10.35.43-PM.png"></picture></p>
<p>This opportunity to build an online community from the ground up gave me the excuse to really study what it means to build community (both online and offline) and validate a lot of my own assumptions.</p>
<p>And tl;dr: I’m all in on <a href="https://jayclouse.com/circle" target="_blank" rel="noopener noreferrer">Circle</a>, and I’ll explain why below.</p>
<p>But before I can share all the lessons learned, we need to start from the beginning.</p>

<h2>What is community?<span></span></h2>
<p>Community means a lot of different things to different people. To me, community is a group of people with commonality – shared interests, values, or beliefs.</p>
<p>With Startup Weekend, we all shared an interest in technology, but we also shared values like ambition, kindness, and generosity too.</p>
<p>At any given Startup Weekend event, I knew I’d leave with some new, lifelong friendships. And the connection I felt with other people at a Startup Weekend is what made that community so special.</p>
<p>In fact, connection is what makes <em>any </em>community special.</p>
<p>I believe people are drawn to community for three core reasons:</p>
<ol>
<li>Human connection</li>
<li>Transformation</li>
<li>Finding a sense of identity</li>
</ol>
<p>Let’s break each of those down.</p>
<h3>Human connection</h3>
<p>The experience of community goes back to the beginning of humans. We’re a social species and we relied on cooperation to survive.</p>
<p>Community was built into our lives when we lived in a tribal setting. Our community was the people we lived around day in and day out – the people we hunted and gathered with!</p>
<p>We felt that we <strong>belonged </strong>to that tribe. And there’s a lot of comfort in belonging.</p>
<p>As civilization evolved, humans became more socially isolated. Forget about living in tribes – we want to move out of our parents’ house and into our own studio apartments as quickly as we can!</p>
<p>But our brains haven’t actually evolved past that desire for close social connections – our lifestyle has. Our cultural expectations have.</p>
<p>And so we seek out that missing human, social connection elsewhere. We seek out that sense of belonging that we’re missing.</p>
<p>We seek out community.</p>
<h4>Connection through shared experience</h4>
<p>Often, one of the easiest ways to find connection is through shared experience. When we share an experience together, whether it’s a tailgate, an escape room, or starting at a new school, we start from a known commonality.</p>
<p>Commonalities give humans something to talk about and bond over. It’s that shared experience that starts conversation, creates a relationship, and ultimately makes us feel connected to one another.</p>
<h3>Transformation</h3>
<p>We also look to other humans to help us grow.</p>
<p>And when we’re looking to make a change, there are communities there to help.</p>
<p>A great example here is the Crossfit or any fitness-based community. When you join a fitness community, you’re seeking very tangible, physical transformation.</p>
<p>Physical transformations (gaining muscle, losing weight) are easy to recognize in ourselves. We seek out psychological and knowledge transformations too – though they may be a little little harder to recognize.</p>
<p>But when you join a coding bootcamp and leave being able to build a web app, you see the transformation.</p>
<p><picture><source data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-scaled.webp 2560w,https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-300x200.webp 300w,https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-1024x683.webp 1024w,https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-768x512.webp 768w,https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-1536x1024.webp 1536w,https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-2048x1365.webp 2048w,https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-100x67.webp 100w,https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-900x600.webp 900w,https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-1200x800.webp 1200w" sizes="(max-width: 2560px) 100vw, 2560px" type="image/webp"><source data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-scaled.jpg 2560w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-300x200.jpg 300w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-1024x683.jpg 1024w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-768x512.jpg 768w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-1536x1024.jpg 1536w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-2048x1365.jpg 2048w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-100x67.jpg 100w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-900x600.jpg 900w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-1200x800.jpg 1200w" sizes="(max-width: 2560px) 100vw, 2560px"><img src="https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-scaled.jpg" alt="Crossfit can teach us a lot about how to build an online community" height="1706" width="2560" srcset="https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-scaled.jpg 2560w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-300x200.jpg 300w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-1024x683.jpg 1024w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-768x512.jpg 768w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-1536x1024.jpg 1536w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-2048x1365.jpg 2048w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-100x67.jpg 100w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-900x600.jpg 900w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-1200x800.jpg 1200w" sizes="(max-width: 2560px) 100vw, 2560px" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%202560%201706'%3E%3C/svg%3E" data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-scaled.jpg 2560w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-300x200.jpg 300w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-1024x683.jpg 1024w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-768x512.jpg 768w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-1536x1024.jpg 1536w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-2048x1365.jpg 2048w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-100x67.jpg 100w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-900x600.jpg 900w, https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-1200x800.jpg 1200w" data-lazy-src="https://jayclouse.com/wp-content/uploads/2020/08/gym-connection-scaled.jpg"></picture></p>
<h3>A sense of identity</h3>
<p>Most of us are in a constant battle to understand ourselves. With social media and comparison traps around us all the time, a lot of us have a hard time really knowing who we are and what we care about.</p>
<p>When you ask someone to introduce themselves, they’ll probably launch right into their work. “I’m [position] at [company].”</p>
<p>Our work shouldn’t define our identity – but it gives us something to tether ourselves to when we don’t have a better sense of who we are.</p>
<p>Community provides an alternative.</p>
<p>When someone joins a community, connects with others or experiences transformation, they learn something about themselves. They learn more about their own interests, and those interests may be stronger than their day-to-day work.</p>
<p>That’s why we see so many people identify with Crossfit or Yoga or even volunteering for a nonprofit.</p>
<p><picture><source data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-scaled.webp 2560w,https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-300x169.webp 300w,https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-1024x576.webp 1024w,https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-768x432.webp 768w,https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-1536x864.webp 1536w,https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-2048x1152.webp 2048w,https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-100x56.webp 100w,https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-900x506.webp 900w,https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-1200x675.webp 1200w" sizes="(max-width: 2560px) 100vw, 2560px" type="image/webp"><source data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-scaled.jpg 2560w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-300x169.jpg 300w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-1024x576.jpg 1024w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-768x432.jpg 768w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-1536x864.jpg 1536w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-2048x1152.jpg 2048w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-100x56.jpg 100w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-900x506.jpg 900w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-1200x675.jpg 1200w" sizes="(max-width: 2560px) 100vw, 2560px"><img src="https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-scaled.jpg" alt="Social movements like the Womens March can teach us a lot about how to build an online community" height="1440" width="2560" srcset="https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-scaled.jpg 2560w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-300x169.jpg 300w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-1024x576.jpg 1024w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-768x432.jpg 768w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-1536x864.jpg 1536w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-2048x1152.jpg 2048w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-100x56.jpg 100w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-900x506.jpg 900w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-1200x675.jpg 1200w" sizes="(max-width: 2560px) 100vw, 2560px" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%202560%201440'%3E%3C/svg%3E" data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-scaled.jpg 2560w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-300x169.jpg 300w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-1024x576.jpg 1024w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-768x432.jpg 768w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-1536x864.jpg 1536w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-2048x1152.jpg 2048w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-100x56.jpg 100w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-900x506.jpg 900w, https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-1200x675.jpg 1200w" data-lazy-src="https://jayclouse.com/wp-content/uploads/2020/08/Womens-March-Movement-scaled.jpg"></picture></p>
<h4>Finding identity in a movement</h4>
<p>Sometimes, community offers us the opportunity to identify with an idea bigger than ourselves. These communities go beyond shared values and actually call their community members to action.</p>
<p>These communities become a movement. People join a movement because they want to see change, and every member of the community powering a movement has the same shared goal.</p>
<p>When we are part of a movement, we feel that same belonging and connection of other communities, but may even begin to identify with that movement.</p>
<p>And, of course, the best movements exist to create change (transformation) too.</p>
<p>So, any way you slice it, the most thriving communities help us find connection, facilitate transformation, or help us to better understand ourselves and our identity.</p>
<h2>Building community in real life<span></span></h2>
<p>We’ve been part of communities throughout our whole lives. Your graduating class, the clubs you joined in high school or college, your college dorm, local meetup groups…</p>
<p>Any group that you’ve belonged to through shared interests or shared experience is, on some level, a community.</p>
<p>A graduating class is a social cohort with a shared goal: complete your courses, graduate on time. You have the shared experience of joining that cohort at the same time, and you’re pursuing the same transformation: becoming a graduate.</p>
<p>Meetup groups are built around shared interests like painting, anime, yoga, or anything else. We go to these meetups because we feel like we belong there.</p>
<p>We’ve gotten <em>really good </em>at creating in person, analog communities – we’ve had all of evolutionary history to figure it out!</p>
<p>As long as we have a reason for gathering people into a common space, it’s easy to convey that reason and create a sense of belonging.</p>
<p><picture><source data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community.webp 1836w,https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-300x200.webp 300w,https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-1024x683.webp 1024w,https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-768x512.webp 768w,https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-1536x1024.webp 1536w,https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-100x67.webp 100w,https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-900x600.webp 900w,https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-1200x800.webp 1200w" sizes="(max-width: 1836px) 100vw, 1836px" type="image/webp"><source data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community.jpg 1836w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-300x200.jpg 300w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-1024x683.jpg 1024w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-768x512.jpg 768w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-1536x1024.jpg 1536w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-100x67.jpg 100w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-900x600.jpg 900w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-1200x800.jpg 1200w" sizes="(max-width: 1836px) 100vw, 1836px"><img src="https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community.jpg" alt="GiveBackHack Community" height="1224" width="1836" srcset="https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community.jpg 1836w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-300x200.jpg 300w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-1024x683.jpg 1024w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-768x512.jpg 768w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-1536x1024.jpg 1536w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-100x67.jpg 100w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-900x600.jpg 900w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-1200x800.jpg 1200w" sizes="(max-width: 1836px) 100vw, 1836px" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201836%201224'%3E%3C/svg%3E" data-lazy-srcset="https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community.jpg 1836w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-300x200.jpg 300w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-1024x683.jpg 1024w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-768x512.jpg 768w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-1536x1024.jpg 1536w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-100x67.jpg 100w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-900x600.jpg 900w, https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community-1200x800.jpg 1200w" data-lazy-src="https://jayclouse.com/wp-content/uploads/2020/08/givebackhack-community.jpg"></picture></p>
<p>But analog community is much easier than digital community, because <strong>physical space creates discomfort</strong>. When we show up to a space and may not immediately recognize anyone, we’re filled with equal parts fear and excitement.</p>
<p>We’re afraid to be alone. We’re afraid that the group will decide that we don’t belong. But at the same time, we’re eager for connection.</p>
<p>And that discomfort creates a healthy tension that we often solve by walking up to someone, extending our hand, and saying, “Hi, I’m Jay.”</p>
<p>That’s the magic of physical space. If we show up, we will usually push through the discomfort of feeling like we don’t belong until we feel like we do.</p>
<p>After all, it’s equally embarrassing to walk right back out the door in front of everyone. People who we may see again in our local community!</p>
<p>And in great communities, existing members will notice anyone feeling that discomfort and welcome them in.</p>
<h2><span id="why-many-online-communities-fail"></span>Why many online communities fail<span></span></h2>
<p>On its face, it seems like it should be easy to translate analog communities into digital communities. And even better, because they’re digital, they can scale! You don’t <em>need </em>to be in the same city to connect over your shared love of <em>Hamilton</em>.</p>
<p>But, very quickly, most online communities fall flat.</p>
<h3>The wrong motivation for building your online community</h3>
<p>Many online communities are started purely for selfish reasons. The creator thinks of it as purely an effort to build their audience.</p>
<p><em>If I create a community, it will self-govern, people will invite others in, and my brand will be at the center of their universe.</em></p>
<p>When creators follow <em>this </em>logic – when the online community is built to serve the creator – it’s doomed from the start.</p>
<p>Community has to be about serving people. If you aren’t serving people – if people aren’t finding connection, transformation, or identity within the space – then it will fail.</p>
<p>And any community managers will tell you, fostering online community is a LOT of time and a LOT of work.</p>
<p>If you aren’t planning to dedicate a huge amount of time and resources from the beginning…if you believe that the community will be so emergent that it will self-govern and thrive from day one, you’re wasting your time.</p>
<h3>Lack of intention in building your online community</h3>
<p>In the analog world, if we have a reason for gathering and a space to gather in, the hardest part is just bringing people into that space.</p>
<p>Because as I shared before, the discomfort of feeling like an outsider in a physical space will propel us into connecting with people until we no longer feel like an outsider.</p>
<p>So in the world of online communities, we overestimate the power of the platform. Tools like Discord, Discourse, Slack, Mighty Networks, and Facebook Groups all promise to give you the ROOM to gather your online community.</p>
<p>So creators pick their favorite tool and create an account.</p>
<p>Sometimes the creators of these communities do a really good job of configuring that digital space with specific channels and spaces for specific causes too.</p>
<p>In theory, that’s great! Of course a thriving online community would utilize all of these specific spaces so that they could have even more confidence that <em>this </em>area is …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://jayclouse.com/how-to-build-an-online-community/">https://jayclouse.com/how-to-build-an-online-community/</a></em></p>]]>
            </description>
            <link>https://jayclouse.com/how-to-build-an-online-community/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24157612</guid>
            <pubDate>Fri, 14 Aug 2020 13:24:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Unicode in five minutes (2013)]]>
            </title>
            <description>
<![CDATA[
Score 263 | Comments 31 (<a href="https://news.ycombinator.com/item?id=24157201">thread link</a>) | @jstanley
<br/>
August 14, 2020 | https://richardjharris.github.io/unicode-in-five-minutes.html | <a href="https://web.archive.org/web/*/https://richardjharris.github.io/unicode-in-five-minutes.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <!-- /.post-info -->      <h2>Why</h2>
<p>One encoding covering <em>most</em> of the world’s writing systems. Standard
encoding of the web, most operating systems, Java and .NET.</p>
<p>Before Unicode, each script (or script family) had its own encoding, or
worse, lots of different incompatible encodings. Unicode is a superset
of almost all of them, so can be used for interchange.</p>
<p>It’s been around for <a href="http://www.unicode.org/history/unicode88.pdf">over 30 years</a>.</p>
<p><em>Note: code examples are Perl-centric so far, because it has really good Unicode
support and I know it; if you have examples for other languages, please do post
a comment!</em></p>
<h2>What</h2>
<p><img alt="Unicode character examples" src="https://richardjharris.github.io/static/images/unichar-examples.png"></p>
<p>Unicode defines a <em>code point</em> (number) for every character, such as <span><span data-code="0061" data-name="LATIN SMALL LETTER A" title="LATIN SMALL LETTER A (U+0061)">a</span></span>, <span><span data-code="00E3" data-name="LATIN SMALL LETTER A WITH TILDE" title="LATIN SMALL LETTER A WITH TILDE (U+00E3)">ã</span></span>,
<span><span data-code="06D0" data-name="ARABIC LETTER E" title="ARABIC LETTER E (U+06D0)">ې</span></span>, <span><span data-code="4E0D" data-name="CJK UNIFIED IDEOGRAPH-4E0D" title="CJK UNIFIED IDEOGRAPH-4E0D (U+4E0D)">不</span></span> and <span><span data-code="2603" data-name="SNOWMAN" title="SNOWMAN (U+2603)">☃</span></span>. As of <a href="http://www.unicode.org/versions/Unicode6.2.0/">Unicode 6.2</a> there are <strong>109,976</strong> code points!
<em>(You can mouseover any highlighted character for more information.)</em></p>
<p>It also includes <em>combining characters</em> such as <span><span data-code="0300" data-name="COMBINING GRAVE ACCENT" title="COMBINING GRAVE ACCENT (U+0300)">◌̀</span></span> which can be added to
other characters; this way, Unicode does not need a code point for every possible
combination of letter and accent. On the other hand, Unicode <em>generally</em> doesn’t care
about fonts or stylistic differences: it gives <img alt="a (double-story)" src="https://richardjharris.github.io/static/images/a1.png">
and <img alt="a (single-story)" src="https://richardjharris.github.io/static/images/a2.png"> the same codepoint.</p>
<p>It’s <em>more than just a character set</em>: it also covers standard encodings such
as UTF-8; <nobr>lower/upper/title</nobr> case mapping; collation (sorting); line breaks;
rendering; right-to-left script handling, and more.</p>
<h2>Normalization</h2>
<p>For compatibility with other encodings Unicode sometimes includes <em>precomposed</em>
versions of characters, for example, these three:</p>
<ul>
<li><span><span data-code="00C5" data-name="LATIN CAPITAL LETTER A WITH RING ABOVE" title="LATIN CAPITAL LETTER A WITH RING ABOVE (U+00C5)">Å</span><span> LATIN CAPITAL LETTER A WITH RING ABOVE (U+00C5)</span></span></li>
<li><span><span data-code="212B" data-name="ANGSTROM SIGN" title="ANGSTROM SIGN (U+212B)">Å</span><span> ANGSTROM SIGN (U+212B)</span></span></li>
<li><span><span data-code="0041" data-name="LATIN CAPITAL LETTER A" title="LATIN CAPITAL LETTER A (U+0041)">A</span><span> LATIN CAPITAL LETTER A (U+0041)</span></span> + <span><span data-code="030A" data-name="COMBINING RING ABOVE" title="COMBINING RING ABOVE (U+030A)">◌̊</span><span> COMBINING RING ABOVE (U+030A)</span></span></li>
</ul>
<p>For these to be treated as the same string in equality tests etc. you should
run all input through <a href="http://unicode.org/reports/tr15/">Unicode normalisation</a>. The most common form is
<abbr title="Normalisation Form C (canonical decomposition + canonical composition)">NFC</abbr>, which uses pre<strong>C</strong>omposed characters where possible, and defines a strict ordering
of diacritics if more than one exists. <abbr title="Normalization Form D (canonical decomposition)">NFD</abbr> <strong>D</strong>ecomposes characters where possible.<sup id="fnref:gory"><a href="#fn:gory" rel="footnote">1</a></sup></p>
<p>It doesn’t matter what form you use as long as you are consistent; NFD is
faster in general (fewer codepoints) and <a href="http://stackoverflow.com/a/6163129/74496">tchrist</a> suggests running input
through NFD and output through NFC.</p>
<p><strong>Compatibility decomposition</strong> also maps characters such as <span><span data-code="FB03" data-name="LATIN SMALL LIGATURE FFI" title="LATIN SMALL LIGATURE FFI (U+FB03)">ﬃ</span></span>, <span><span data-code="2168" data-name="ROMAN NUMERAL NINE" title="ROMAN NUMERAL NINE (U+2168)">Ⅸ</span></span>
and even <span><span data-code="2075" data-name="SUPERSCRIPT FIVE" title="SUPERSCRIPT FIVE (U+2075)">⁵</span></span> to ‘ffi’, ‘IX’ and ‘5’ respectively. This <abbr title="Normalization Form KC (compatibility decomposition + canonical composition)">NFKC</abbr> normalisation
helps when searching for text.</p>
<div><pre><span>#!/usr/bin/perl</span>
<span>use</span> <span>Unicode::</span><span>Normalize</span><span>;</span>
<span>my</span> <span>$norm</span> <span>=</span> <span>NFD</span><span>(</span><span>$str</span><span>);</span>
</pre></div>


<hr>
<div><pre><span>#!/usr/bin/python</span>
<span>import</span> <span>unicodedata</span>
<span>norm</span> <span>=</span> <span>unicodedata</span><span>.</span><span>normalize</span><span>(</span><span>'NFC'</span><span>,</span> <span>string</span><span>)</span>
</pre></div>


<hr>
<div><pre><span>#!/usr/bin/ruby</span>
<span># gem install unicode_utils</span>
<span>require</span> <span>"unicode_utils/nfc"</span>
<span>norm</span> <span>=</span> <span>UnicodeUtils</span><span>.</span><span>nfc</span><span>(</span><span>string</span><span>)</span>
</pre></div>


<h2>Casefolding</h2>
<p>Casing is not so simple in the Unicode world:</p>
<ul>
<li>
<p>Some strings actually change length when they change case: <span><span data-code="00DF" data-name="LATIN SMALL LETTER SHARP S" title="LATIN SMALL LETTER SHARP S (U+00DF)">ß</span></span> uppercases
  to ‘SS’.</p>
</li>
<li>
<p><span><span data-code="017F" data-name="LATIN SMALL LETTER LONG S" title="LATIN SMALL LETTER LONG S (U+017F)">ſ</span><span> LATIN SMALL LETTER LONG S</span></span> should be seen as equal to ‘s’ and ‘S’ in case-insensitive comparisons.</p>
</li>
<li>
<p><span><span data-code="03A3" data-name="GREEK CAPITAL LETTER SIGMA" title="GREEK CAPITAL LETTER SIGMA (U+03A3)">Σ</span><span> GREEK CAPITAL LETTER SIGMA</span></span> has <em>two</em> lowercase forms: <span><span data-code="03C3" data-name="GREEK SMALL LETTER SIGMA" title="GREEK SMALL LETTER SIGMA (U+03C3)">σ</span></span> at the beginning or middle of the
  word, and <span><span data-code="03C2" data-name="GREEK SMALL LETTER FINAL SIGMA" title="GREEK SMALL LETTER FINAL SIGMA (U+03C2)">ς</span></span> at the end of a word.</p>
</li>
<li>
<p>Casing is <em>mostly</em> consistent across locales, but Turkish is an exception: it
  has both a <a href="https://en.wikipedia.org/wiki/Dotted_and_dotless_I">Dotted and dotless I</a>, in both lower and upper cases.</p>
</li>
</ul>
<p>To ensure your code handles these cases, and any new ones, Unicode provides a
<em>one-way</em> ‘casefold’ operation that allows case-insensitive comparison:</p>
<div><pre><span>#!/usr/bin/perl</span>
<span>use</span> <span>Unicode::</span><span>CaseFold</span><span>;</span>   <span># or: use v5.16;</span>
<span>sort</span> <span>{</span> <span>fc</span><span>(</span><span>$a</span><span>)</span> <span>cmp</span> <span>fc</span><span>(</span><span>$b</span><span>)</span> <span>}</span> <span>@stuff</span><span>;</span>
</pre></div>


<p>Casefolding does <em>not</em> include normalization, so do that too.</p>
<h2>Sorting</h2>
<p>Sorting (or <em>collation</em>) is <strong>locale specific</strong> and just as riddled with
pecularities as casing:</p>
<ul>
<li>
<p>German and Swedish both have ä and ö but sort them differently - German
    treats them as variants of the same letters without umlauts (i.e. ‘a<strong>ä</strong>bcdefghijklmno<strong>ö</strong>pqrstuvwxyz’)
    whereas Swedish considers them new letters, and puts them at the end (‘abcdefghijklmnopqrstuvwxyz<strong>äö</strong>‘)</p>
<p>It’s important that things are sorted in the order the user expects.</p>
</li>
<li>
<p>Sorting varies by application too; phonebooks are often sorted differently to book
    indices, for example.</p>
</li>
<li>
<p>For Chinese characters and other ideographs, there are many possible orders, e.g.
    pinyin (phonetic), by stroke count, etc.</p>
</li>
<li>
<p>Collations can be <em>tailored</em> based on user preferences, e.g. lower or upper-case first?</p>
</li>
</ul>
<p>It’s not enough to just sort by binary comparison. And codepoints aren’t generally in any
sensible order either. Fortunately Unicode specifies a <a href="http://www.unicode.org/reports/tr10/">Collation Algorithm</a>
that is immensely customisable, covers all the edge-cases, and does clever things to make
it reasonably fast. Here’s an example:<sup id="fnref:locale"><a href="#fn:locale" rel="footnote">2</a></sup></p>
<div><pre><span>#!/usr/bin/perl</span>
<span>use</span> <span>Unicode::Collate::</span><span>Locale</span><span>;</span>
<span>my</span> <span>$collator</span> <span>=</span> <span>Unicode::Collate::</span><span>Locale</span><span>-&gt;</span><span>new</span><span>(</span><span>locale</span> <span>=&gt;</span> <span>'DE'</span><span>);</span>
<span>my</span> <span>@sorted</span> <span>=</span> <span>$collator</span><span>-&gt;</span><span>sort</span><span>(</span><span>@array</span><span>);</span>
<span>$collator</span><span>-&gt;</span><span>cmp</span><span>(</span><span>$word</span><span>,</span> <span>$another_word</span><span>);</span>  <span># -&gt; -1, 0 or 1</span>
</pre></div>


<p>The <abbr title="Unicode Collation Algorithm">UCA</abbr> can do other clever things, such as sort ‘10’ after ‘2’ numerically, or sort
the character ‘?’ as if it was the string ‘question mark’.</p>
<h2>Encodings</h2>
<p>The big ones are <code>UTF-8</code>, <code>UTF-16</code> and <code>UTF-32</code>. Each one guarantees a reversible
mapping of almost every codepoint<sup id="fnref:every"><a href="#fn:every" rel="footnote">3</a></sup> to a byte sequence.</p>
<ul>
<li>
<p><strong>UTF-32</strong> is dead simple: each codepoint gets four bytes. Takes up tons of space,
  not recommended for interchange.</p>
</li>
<li>
<p><strong>UTF-8</strong> is very common the web. It’s byte-oriented (no endianness issues),
  handles corruption well, is ASCII-compatible and takes up minimal space for text
  that is mostly ASCII (e.g. HTML).</p>
<ul>
<li>
<p>Code points between U+0800 and U+FFFF, which includes commonly used <abbr title="Chinese, Japanese, Korean and Vietnamese">CJKV</abbr>
  characters, will take up 3 bytes instead of 2. So UTF-16 may be more space
  efficient.</p>
</li>
<li>
<p>ASCII-compatibility is helpful to allow UTF-8 to stealth its way through
  scripts and processes that are not Unicode-aware. But if such a system tries to
  do anything with the data (casing, sub-strings, regex), that data may be
  corrupted.</p>
</li>
</ul>
</li>
<li>
<p><strong>UTF-16</strong> is used by Java, .NET and Windows. It uses 2 bytes (16-bit) to
  represent the most common 63K codepoints, and 4 bytes for the less common 1M
  codepoints (using two ‘surrogate’ codepoints).</p>
<ul>
<li>
<p>Contrary to popular belief, UTF-16 is not a fixed-width encoding. But as
  long as it contains no surrogates, it can be treated as one, which can speed
  up string operations.</p>
</li>
<li>
<p>UTF-16 streams typically begin with <span><span data-code="FEFF" data-name="ZERO WIDTH NO-BREAK SPACE" title="ZERO WIDTH NO-BREAK SPACE (U+FEFF)">U+FEFF</span></span><sup id="fnref:bomnote"><a href="#fn:bomnote" rel="footnote">4</a></sup> to detect the endianness
  (byte order) of the stream. Otherwise, you can explicitly encode or decode
  via ‘UTF-16BE’ or ‘UTF-16LE’ to specify the endianness.</p>
</li>
</ul>
</li>
</ul>
<h2>Unicode and internationalised domain names</h2>
<p>International characters create a <a href="http://en.wikipedia.org/wiki/IDN_homograph_attack">big problem</a>
for domain names. Just as <span><span data-code="0049" data-name="LATIN CAPITAL LETTER I" title="LATIN CAPITAL LETTER I (U+0049)">I</span></span> and <span><span data-code="006C" data-name="LATIN SMALL LETTER L" title="LATIN SMALL LETTER L (U+006C)">l</span></span> look similar, Unicode multiplies that problem
by 1,000, in addition to adding numerous invisible control characters, spacing characters
and right-to-left text.</p>
<p>Browsers and registrars have implemented several measures against this:</p>
<ul>
<li>Many TLDs restrict which characters can be used in domain names.</li>
<li>Browsers may display the domain in Punycode (see below) if the domain includes characters
  from multiple scripts and/or characters not belonging to one of the user’s preferred languages.</li>
<li>Internationalised country codes such as .рф (Russia) only accept Cyrillic names.</li>
</ul>
<h3>nameprep/stringprep</h3>
<p><a href="http://tools.ietf.org/html/rfc3491">RFC 3491</a> defines <em>nameprep</em>, a mechanism
to case-fold, normalize and sanitize strings before they can be used in domain names. This
removes many invisible characters and throws an error if prohibited code points are in use.</p>
<p>It is implemented in terms of a wider framework called <em>stringprep</em>. In Perl, one can use
<a href="https://metacpan.org/module/Net::IDN::Encode">Net::IDN::Encode</a> which will also perform Punycode conversion.</p>
<h3>Punycode</h3>
<p>For legacy reasons DNS does not allow extended characters outside of ASCII, so Punycode
is an ASCII-compatible encoding scheme. For example, <code>café.com</code> becomes <code>xn--caf-dma.com</code>.
All Punycode-encoded domain components are instantly recognisable by their <code>xn--</code> prefix.</p>
<p>This goes for TLDs too: .中国 is really known as <em>xn—fiqs8s</em>.</p>
<h2>The problem of ‘user characters’</h2>
<p>In Perl at least, everything (<code>substr</code>, <code>length</code>, <code>index</code>, <code>reverse</code>…) works on the level
of codepoints. This is often not what you want, because what a user considers to be a
character such as ў is actually two codepoints (<span><span data-code="0079" data-name="LATIN SMALL LETTER Y" title="LATIN SMALL LETTER Y (U+0079)">y</span></span> + <span><span data-code="0306" data-name="COMBINING BREVE" title="COMBINING BREVE (U+0306)">◌̆</span></span>). Here’s a <a href="http://www.nntp.perl.org/group/perl.perl5.porters/2011/10/msg178687.html">really good
usenet post</a> on the subject.</p>
<p>Even seemingly innocuous things like <code>printf "%-10s", $str</code> breaks completely for combining characters,
double-width characters (e.g. Chinese/Japanese) or zero-width characters.</p>
<p>Fortunately Perl provides the <code>\X</code> regular expression metachar which matches exactly one
‘extended grapheme cluster’, i.e. what a user would consider a character to be. A more robust
solution is to install <a href="https://metacpan.org/module/Unicode::GCString">Unicode::GCString</a>:</p>
<div><pre><span>#!/usr/bin/perl</span>
<span>use</span> <span>Unicode::</span><span>GCString</span><span>;</span>
<span>use</span> <span>Unicode::</span><span>Normalize</span><span>;</span>
<span>use</span> <span>utf8</span><span>;</span>
<span>use</span> <span>open</span> <span>qw(:std :encoding(UTF-8))</span><span>;</span>

<span>my</span> <span>$s</span> <span>=</span> <span>NFD</span><span>(</span><span>"crème brûlée"</span><span>);</span>  <span># ensure combining marks get their own codepoint</span>
<span>my</span> <span>$g</span> <span>=</span> <span>Unicode::</span><span>GCString</span><span>-&gt;</span><span>new</span><span>(</span><span>$s</span><span>);</span>

<span>print</span> <span>$g</span><span>-&gt;</span><span>length</span><span>,</span> <span>"\n"</span><span>;</span>       <span># 12, not 15</span>
<span>print</span> <span>reverse</span><span>(</span><span>@$g</span><span>),</span> <span>"\n"</span><span>;</span>     <span># 'eélûrb emèrc', not 'éel̂urb em̀erc'</span>
<span>print</span> <span>$g</span><span>-&gt;</span><span>substr</span><span>(</span><span>0</span><span>,</span><span>5</span><span>),</span> <span>"\n"</span><span>;</span>  <span># 'crème', not 'crèm'</span>
<span>print</span> <span>$g</span><span>-&gt;</span><span>substr</span><span>(</span><span>0</span><span>,</span><span>3</span><span>),</span> <span>"\n"</span><span>;</span>  <span># 'crè', not 'cre'</span>

<span>print</span> <span>"1234512345123451234512345|\n"</span><span>;</span>
<span>printf</span> <span>"%s%*s|\n"</span><span>,</span> <span>$g</span><span>,</span> <span>(</span><span>25</span> <span>-</span> <span>$g</span><span>-&gt;</span><span>columns</span><span>),</span> <span>''</span><span>;</span>  <span># 25 columns long (ᵔᴥᵔ)</span>

<span>printf</span> <span>"%-25s|\n"</span><span>,</span> <span>$s</span><span>;</span>                          <span># 22 columns long (╯°□°）╯︵ ┻━┻</span>
</pre></div>


<h3>Line breaks</h3>
<p>Line breaking (or word wrapping) is another thing that becomes <a href="http://www.unicode.org/reports/tr14/">insanely complicated</a>
once Unicode is involved. You have to account for various non-breaking and breaking control
and spacing characters, punctuation in every language (e.g. <span><span data-code="00AB" data-name="LEFT-POINTING DOUBLE ANGLE QUOTATION MARK" title="LEFT-POINTING DOUBLE ANGLE QUOTATION MARK (U+00AB)">«</span></span> and <span><span data-code="00BB" data-name="RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK" title="RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK (U+00BB)">»</span></span> quotes, or the
full stop or comma being used in numerics such as <code>2,140</code>) and the width of each character.</p>
<p>In Perl, this has all been handled for you - just use <a href="https://metacpan.org/module/Unicode::LineBreak">Unicode::LineBreak</a>.</p>
<h2>Regular expressions</h2>
<p>Some useful Perl regular expression syntax:</p>
<dl>
<dt><code>\R</code></dt>
<dd>Match any Unicode linebreak sequence (including <code>\n</code>, <code>\r\n</code> and six others)</dd>
<dt><code>\p</code>, <code>\P</code></dt>
<dd>Match any codepoint possessing (or not possessing) a Unicode property.</dd>
<dd>Common ones are <code>\pL</code> (Letter), <code>\pU</code> (Uppercase), <code>\pS</code> (Symbol), or even <code>\p{script=Latin}</code>,
<code>\p{East_Asian_Width=Wide}</code>, <code>\p{Numeric_Value=4}</code>.</dd>
<dd>See <a href="http://perldoc.perl.org/perluniprops.html">perluniprops</a> for a big list.</dd>
<dd>Built-in character classes such as <code>\w</code>, <code>\b</code>, <code>\s</code> and <code>\d</code> are Unicode-aware since Perl
5.6 (though you need to make sure your string or pattern has the <code>UTF8</code> flag on!) Disable this
with the <code>/a</code> flag (see <a href="http://perldoc.perl.org/perlre.html#Character-set-modifiers">perlre</a>).</dd>
<dt><code>\X</code></dt>
<dd>Match an extended grapheme cluster, which is basically …</dd></dl></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://richardjharris.github.io/unicode-in-five-minutes.html">https://richardjharris.github.io/unicode-in-five-minutes.html</a></em></p>]]>
            </description>
            <link>https://richardjharris.github.io/unicode-in-five-minutes.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24157201</guid>
            <pubDate>Fri, 14 Aug 2020 12:51:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[JavaScript Code Plays Google Dinosaur/T-Rex Game Automatically]]>
            </title>
            <description>
<![CDATA[
Score 25 | Comments 17 (<a href="https://news.ycombinator.com/item?id=24156685">thread link</a>) | @truly_furqan
<br/>
August 14, 2020 | https://www.edopedia.com/blog/javascript-code-plays-google-dinosaur-t-rex-game-automatically/ | <a href="https://web.archive.org/web/*/https://www.edopedia.com/blog/javascript-code-plays-google-dinosaur-t-rex-game-automatically/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://www.edopedia.com/blog/javascript-code-plays-google-dinosaur-t-rex-game-automatically/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24156685</guid>
            <pubDate>Fri, 14 Aug 2020 11:53:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Precise Higher-Order Meshing of Curved 2D Domains]]>
            </title>
            <description>
<![CDATA[
Score 27 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24156522">thread link</a>) | @wowsig
<br/>
August 14, 2020 | http://graphics.cs.uos.de/bezierguarding.html | <a href="https://web.archive.org/web/*/http://graphics.cs.uos.de/bezierguarding.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>http://graphics.cs.uos.de/bezierguarding.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24156522</guid>
            <pubDate>Fri, 14 Aug 2020 11:26:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Redefining what sustainable fishing means]]>
            </title>
            <description>
<![CDATA[
Score 150 | Comments 109 (<a href="https://news.ycombinator.com/item?id=24156319">thread link</a>) | @dnetesn
<br/>
August 14, 2020 | http://oceans.nautil.us/article/600/its-time-to-redefine-what-sustainable-fishing-means | <a href="https://web.archive.org/web/*/http://oceans.nautil.us/article/600/its-time-to-redefine-what-sustainable-fishing-means">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
        <p><span>S</span>arah Dolman heard the porpoiseâ€™s cries not in the waters where the animalâ€™s voice was actually recorded, but on the sound system at a marine mammal conference held in late 2019. To Dolman, policy manager at the nonprofit UK-based conservation organization <a href="https://uk.whales.org/" target="_blank">Whale and Dolphin Conservation,</a> time and distance made the experience no less painful.</p>

<p>The porpoise was using its voice—which sounds alternately like a buzzing insect, a creaky door blowing open then clicking shut, and a high-frequency whistle that humans cannot hear without the aid of sound-amplifying technologies—to call to another porpoise who was caught in a fishing net. The entangled porpoise struggled to surface while trying to break free. That proved impossible, and the porpoise drowned. But the dead creatureâ€™s companion stayed nearby for hours, speaking in protracted clicks, buzzes and whistles—in mourning or perhaps confusion, alarmed by the sudden death of its friend.</p>
<p>Globally, fishing gear kills <a href="https://www.sciencedirect.com/science/article/pii/B9780123735539000444" target="_blank">at least 300,000 marine mammals</a> every year, and leaves many more individuals with scars both physical and psychological. Some governments, including those of the U.S. and E.U., may temporarily close fisheries or regulate gear after a specified number of marine mammals are killed, but those measures are limited. At a moment when the cruel captivity of several dozen orcas inspires public outrage and aquarium boycotts and new laws, the global fishing industry and its regulators generally accept the widespread killing and maiming of marine mammals as a part of doing business. And so we unwittingly continue to eat fish, in huge amounts, and marine mammals continue to suffer.</p>
<p>Dolman says present approaches, which focus on maintaining specific populations above a minimum size, still allow too much killing and preventable suffering. She says itâ€™s time for fisheries policies to consider the welfare of individual whales and dolphins and other marine mammals. â€œBeing caught in fishing gear is a horrible way to die,â€� says Dolman. â€œHow would the public feel about this when theyâ€™re eating fish and seafood, if they knew about these animalsâ€™ suffering? We need another solution.â€�</p>
<p>Dolman and her colleague Philippa Brakes, a research fellow at Whale and Dolphin Conservation, outlined their approach for regulating â€œbycatch,â€� as unintentionally caught animals are called, and preventing entanglement in fishing gear in a <a href="https://www.frontiersin.org/articles/10.3389/fvets.2018.00287/full" target="_blank">2018 paper</a> published in the journal <em>Frontiers in Veterinary Science</em>. They say that fisheries policies must account for the well-being of individuals, not just populations, ideally with zero tolerance for marine mammal bycatch.</p>
<p>They also argue for updating the definition of â€œsustainableâ€� fisheries, now set according to whether the exploitation of a given fish population can be continued without jeopardizing it, to include marine mammals killed as bycatch. In their paper, Dolman and Brakes point out that â€œbuying â€˜sustainableâ€™ fish or indeed some fish products labeled â€˜dolphin-friendlyâ€™ provide no guarantees that incidental bycatch of protected species does not occur alongside the targeted catch.â€�&nbsp; And not only should sustainability encompass mortality, but also the suffering of survivors—something thatâ€™s a bit more challenging to measure, though scientists acknowledge that itâ€™s real, and goes beyond the pain of scars and severed limbs caused by the constricting ropes of the gear they carry.</p><figure><img src="https://s3.amazonaws.com/nautilus-vertical/oceans_911411818e26b80488c996ad7cfe7d4d.jpg" alt="nautilus whale calf"><figcaption><span>A humpback whale mother swims with her newborn calf in their traditional breeding waters in the Hawaiian Islands Humpback Whale National Marine Sanctuary. </span><br><span>Credit: NOAA News</span></figcaption></figure><p>Even if we are quite far from fully understanding the experiences of animals who spend their lives primarily underwater, <a href="https://link.springer.com/chapter/10.1007/978-3-030-31011-0_10" target="_blank">research clearly reveals</a> that harbor porpoises like the one whose cries haunted Dolman and other marine mammals are, like us, highly intelligent and social creatures. Ecologist and author <a href="https://www.nytimes.com/2015/08/04/science/review-beyond-words-carl-safina.html" target="_blank">Carl Safina</a>, who has written extensively about the inner lives of nonhuman animals including orcas and sperm whales, says the loss of even one individual whale—particularly if she happens to be an adult female—can be catastrophic for others.<br></p>
<p>â€œSperm whales stay together their entire lives, very intentionally living together in a family the way elephants live together in a family,â€� says Safina. â€œIf you lose even one member of that female support group, you increase the risks and hazards to the young ones.â€�&nbsp;</p>
<p>Like baby humans, young marine mammals depend on their eldersâ€™ vigilance and protection, as well as their practical knowledge and cultural wisdom, for survival. Older animals in a family bestow younger members with all sorts of knowhow, such as what to eat and how to hunt for food. Scientists have discovered that <a href="https://science.sciencemag.org/content/337/6100/1313" target="_blank">orca grandmothers</a> play an outsized role in the lives of young orcas, boosting youngstersâ€™ chances of survival. Even for less family-oriented marine mammal species, like humpback whales, notes Safina, â€œthe death of a mother—or severe distress of a mother due to entanglement in fishing gear—can be, depending on age of a young one, completely devastating or very stressful.â€�
</p>
<p>Research like this â€œopens a rich seam of understanding,â€� Brakes says. â€œSuch understanding shows us that we can no longer treat marine mammals like a homogenous group or numbers on a spreadsheet.â€� She and Dolman propose a multi-pronged strategy of implementing fisheries closures and new fishing practices, as well as requiring new gear that minimizes bycatch and entanglements. Fisheries regulation would need to include enhanced monitoring and reporting systems that keep track of every harmed marine mammal. Right now basic data about bycatch and entanglements, much less the long-term physiological and psychological affects, are not being collected.</p>
<blockquote>â€œWe can no longer treat marine mammals like a homogenous group or numbers on a spreadsheet.â€�</blockquote>
<p>According to Dolman, the Marine Stewardship Council (MSC), a key independent labeler of sustainable seafood, has received much criticism in recent years about its inadequate consideration of bycatch. â€œMSC bycatch standards are under review at the moment,â€� Dolman said. â€œThis is something thatâ€™s long overdue. But, I have to say, Iâ€™m not feeling very positive about whatâ€™s coming. The fishing industry is very vocal and oppositional to regulatory change. Consumers and scientists must begin pushing for laws and certification schemes to seriously incorporate welfare into the â€˜sustainableâ€™ label. Most of the public feels comfortable when they see a dolphin-safe label—though really, right now, they shouldnâ€™t.â€�<strong>
</strong></p>
<p>Adding to marine mammalsâ€™ collective challenges is the fact that fishing isnâ€™t their only threat. In addition to depleting populations of the fish they eat, humans have made the oceans a much noisier place, with engine noise and seismic surveys and naval tests causing both chronic stress and acute damage. We push ship traffic into ever-more remote areas once only known to marine animals; disrupt marine life by developing coastlines and dredging channels; pollute with plastic and toxic chemicals; and cause ocean-warming climate change.
</p>
<p>These are not matters to frame purely in terms of populations and environments, but the lived experiences of animals who share many intellectual properties with us. â€œPeople need to understand that other living things can suffer and that these individuals donâ€™t want to suffer. They want to exist in a state of wellbeing. Thatâ€™s what they strive to do,â€� says Safina. â€œI think the big first step is for people to understand and talk about that and drive away from things that cause suffering.â€�</p>

<ul><li> is a writer, artist and wildlife rehabilitator who explores the intersection of the human and nonhuman worlds. She is currently writing a book about plastic pollution around the world and is a junior fellow at the not-for-profit conservation organization The Safina Center, with which Carl Safina is affiliated. See more of her work at <a href="https://www.ericacirino.com/">www.ericacirino.com</a>. </li></ul>
<p>Lead image:&nbsp;A male right whale entangled in heavy fishing rope off the coast of Florida. Biologists were able to remove the rope. Credit: Florida Fish and Wildlife Conservation Commission, taken under NOAA research permit #15488.</p>





            </article></div>]]>
            </description>
            <link>http://oceans.nautil.us/article/600/its-time-to-redefine-what-sustainable-fishing-means</link>
            <guid isPermaLink="false">hacker-news-small-sites-24156319</guid>
            <pubDate>Fri, 14 Aug 2020 10:54:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Duality of Vector Spaces (2017)]]>
            </title>
            <description>
<![CDATA[
Score 31 | Comments 9 (<a href="https://news.ycombinator.com/item?id=24156082">thread link</a>) | @hosolmaz
<br/>
August 14, 2020 | https://solmaz.io/notes/duality-vector-spaces/ | <a href="https://web.archive.org/web/*/https://solmaz.io/notes/duality-vector-spaces/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>



<p>When I was learning about Continuum Mechanics for the first time, the <em>covariance
and contravariance of vectors</em> confused the hell out of me. The concepts gain
meaning in the context of Riemannian Geometry, but it was surprising to find
that one doesn’t need to learn an entire subject to grasp the logic behind
co-/contravariance. An intermediate knowledge of linear algebra is enough—that
is, one has to be acquainted with the concept of vector spaces and one-forms.</p>
<p>The duality of co-/contravariance arises when one has to define vectors in terms
of a non-orthonormal basis. The reason such terminology doesn’t show up
in engineering education is that Cartesian coordinates are enough for most
engineering problems. But every now and then, a complex problem with funky
geometrical requirements show up, like one that requires measuring distances and
areas on non-flat surfaces. Then you end up with dual vector spaces. I’ll try to
give the basics of duality below.</p>
<p><strong>Definition:</strong> Let $\CV$ be a finite-dimensional real vector space.
The space $\CV^\ast = \CL(\CV,\IR)$,
defined as the
the space of all one-forms $\Balpha:\CV\to\IR$, is called the
<strong>dual space</strong> to $\CV$.</p>
<p>Let $B=\cbr{\Be_1,\dots,\Be_n}$ be a basis of $\CV$. Any vector $\Bv\in\CV$ can be written
in terms of $B$ as</p>

<p>with the components $a_1,\dots,a_n\in\IR$.
For any $i=1,\dots,n$, we can define the $i$-th component $a_i$ by a one-form as</p>

<p>These elements are linear and thus are in the space
$\CL(\CV,\IR)$<sup id="fnref:1"><a href="#fn:1">1</a></sup>.
Given any basis $B=\setveci{\Be}$, we call $B^\ast = \setveciup{\Be}$
the basis of $\CV^\ast$ <strong>dual</strong> to $B$.
The fact that $B^\ast$ really is a basis of $\CV^\ast$ can be proved
by showing that $\Be^i$ are linearly independent.
Then $\Bv$ has the following
representation</p>

<p>Instead of $a_i$, it is practical to denote the components of $\Bv$ as $v^i$,
lightface of the same symbol with a raised index corresponding to
the raised index of the dual basis:</p>

<p>In fact, this convention is more compatible with
the symmetry caused by the duality.
This point will be more clear after the introduction of
dual basis representation of one-forms.</p>
<p><strong>Proposition:</strong> Each $\Be^i \in \CL(\CV,\IR)$ can be identified by its action on the basis
$B$:</p>

<p><strong>Proof:</strong> For any $\Bv\in\CV$, $\Be^i(\Bv)$ must give $v^i$, the
$i$-th component of $\Bv$.
Setting $\Bv = \Be_j$, one sees that
$\Be^i(\Bv)=v^i = 1$ when $i=j$, and is zero otherwise.</p>
<p>Geometrically, \eqref{eq:dualbasis2} implies that a basis vector is
perpendicular to all the dual basis vectors, except its own dual.</p>
<h2 id="dual-basis-representation-of-one-forms">Dual Basis Representation of One-Forms</h2>
<p>Let $\Balpha$ be a one form in $\CV^\ast$ with the corresponding
dual basis $\setveciup{\Be}$. Then similar to a vector,
$\Balpha$ has the following representation</p>

<p>where the <strong>components of the one-form</strong> $\Balpha$
are defined as</p>

<p><strong>Proof:</strong> We substitute \eqref{eq:vectorrep2} and obtain</p>

<p>using $\Balpha$’s linearity.</p>
<p><strong>Notation:</strong>
Let $\CV$ be a finite-dimensional real vector space.
For $\Bv\in\CV$ and $\Balpha\in\CV^\ast$</p>

<p>denotes the action of $\Balpha$ on $\Bv$, and is called
a <strong>natural pairing</strong> or <strong>dual pairing</strong>
between a vector space and its dual.
<em>It is of the essence to understand that $\abrn{\cdot,\cdot}$ does not
denote an inner product in $\CV$</em>; that is,
$\abr{\Bv,\Balpha}$ means $\Balpha(\Bv)$.</p>
<p>With this notation, \eqref{eq:vectorrep2} can be written as</p>

<p>and \eqref{eq:dualbasis2} as</p>

<p>Using the convention that $\Be_i$ are column vectors and
$\Be^i$ are row vectors,
\eqref{eq:dualbasis1} can be rearranged in the following manner</p>

<p>which can be used to compute a dual basis.</p>
<p><strong>Example:</strong> Given a two-dimensional vector space $\CV$ with a basis
$\Be_1=[2,-0.5]\tra$, $\Be_2=[1,1]\tra$, we use
\eqref{eq:computedualbasis1} to compute</p>

<p>and obtain the dual basis vectors as
$\Be^1=[0.4,-0.4]$ and $\Be^2=[0.2,0.8]$.
The result is given in the
following figure,</p>
<figure>
<p><img src="https://solmaz.io/img/duality_vector_spaces/fig2.svg"></p>
</figure>
<p>where one can see that $\Be_1\perp\Be^2$, $\Be^1\perp\Be_2$.</p>
<figure>
<p><img src="https://solmaz.io/img/duality_vector_spaces/fig1.svg">
A body $\CB$ embedded in $\IR^2$ with curvilinear coordinates.
Every point $\CP$ at $\BX$ has an associated two-dimensional vector space,
called $\CB$’s tangent space at $\BX$, denoted $\tang_\BX\CB$. The basis
$\Be_i$ corresponding to coordinates $\theta_i$ are not necessarily
orthogonal and can admit corresponding duals $\Be^i$, due to
curvilinearity.
The coordinates appear to be affine at the point’s immediate vicinity,
and thus in the tangent space.</p>
</figure>
<p>The introduction of the dual space
allows us to reinterpret a one-form $\Balpha$
as an object residing in the dual space. In fact,
the <strong>canonical duality</strong> $\CV^{\ast\ast}=\CV$
states that every vector $\Bv$ can be interpreted as a functional
on the space $\CV^\ast$ via</p>


</article></div>]]>
            </description>
            <link>https://solmaz.io/notes/duality-vector-spaces/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24156082</guid>
            <pubDate>Fri, 14 Aug 2020 10:22:03 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to quickly create a Jamstack site]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24155601">thread link</a>) | @ndumai
<br/>
August 14, 2020 | https://www.stackbit.com/blog/create-a-jamstack-site-in-minutes/ | <a href="https://web.archive.org/web/*/https://www.stackbit.com/blog/create-a-jamstack-site-in-minutes/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="___gatsby"><div tabindex="-1" id="gatsby-focus-wrapper"><div id="page"><main id="content"><article><div><p><img src="https://www.stackbit.com/images/jamstack-site-minutes.png" alt="How to Create a Jamstack Website in Minutes!"></p><div><p>The Stackbit Site Builder created a CMS connected Jamstack site with just a few clicks and in just minutes. Let's explore how.</p><p>At Stackbit, we believe that the Jamstack can help make a better web for everyone because Jamstack sites are fast and secure. We want to make it easy for any developer to adopt the Jamstack for their next project. That's why one of the foundational elements that has defined Stackbit since day one has been the ability to generate a Jamstack site with just a few clicks. The basic steps are:</p><h2>1. Choose a theme</h2><p>We currently have eight themes to choose from, including our new, highly customizable theme called <a href="https://themes.stackbit.com/demos/starter/">Starter</a>. Plus, there are dozens of community themes available on GitHub, such as the popular <a href="https://github.com/snipcart/stackbit-theme-planty">Planty ecommerce theme</a> by Snipcart, or even more on <a href="https://jamstackthemes.dev/">JamstackThemes.dev</a>. You also have the ability to import a custom theme of your own (for details on how to configure that, you can <a href="https://docs.stackbit.com/site-builder/custom-themes/">check the docs</a>)</p><h2>2. Choose a static site generator (SSG)</h2><p>All of our themes can be generaed using Gatsby, Hugo or Jekyll (with additional support coming <em>very</em> soon...but I won't spoil the surprise). This gives you options to choose the tool and language you prefer to use for developing your Jamstack site. (Not sure which one to choose? <a href="https://www.stackbit.com/blog/choosing-your-ssg/">We have some advice here</a>.)</p><h2>3. Choose a headless content management system (CMS)</h2><p>One of the powerful things about buildng a site through the Stackbit site builder is that it is pre-configured for content management through your choice of <a href="https://www.stackbit.com/blog/what-is-a-headless-cms/">headless CMS</a>, including Sanity, Contentful, DataCMS, Forestry and NetilfyCMS. We've even added a new option for using files in your GitHub repository that can still get the full inline content editing features in Stackbit. (More on that in an upcoming post!)</p><p>One you've made these three choices, you are ready to go. Stackbit will build the site, place the source in GitHub and deploy to Netlify. Within minutes your site is ready and deployed!</p><p>Let's be honest though, telling you about this is far less exciting than simply showing you...so let's see what this looks like in action.</p><iframe width="560" height="315" src="https://www.youtube.com/embed/d1Xlr4L44KE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><h2>Make the site your own</h2><p>The really important thing you should know about your new Jamstack site is that <strong>the code is yours.</strong> The code ends up in a GitHub respository you own. You can edit and customize it as you wish. In fact, we've made it easy to get your site running on your local machine and start editing by providing the instructions in the project's <code>README.md</code> or via Stackbit's online editor. This gives you the ability to do things like:</p><ul><li><a href="https://www.stackbit.com/blog/stackbit-gatsby-site-improvements/">Add a favicon, analytics, social sharing and a sitemap</a></li><li><a href="https://www.stackbit.com/blog/gatsby-search/">Add site search using Algolia</a></li><li><a href="https://www.stackbit.com/blog/jamstack-gatsby-mailchimp/">Add a mailing list form that connects to Mailchimp</a></li><li><a href="https://www.stackbit.com/blog/complete-guide-netlify-forms/">Customize how your form submissions are handled</a></li></ul><p>...and anything else you can think of!</p><p>The best part is that everything I have described to you here is also available at no cost. Just head on over to the <a href="https://app.stackbit.com/create">Stackbit Site Builder</a> and start creating your Jamstack site!</p></div></div></article></main></div></div></div></div>]]>
            </description>
            <link>https://www.stackbit.com/blog/create-a-jamstack-site-in-minutes/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24155601</guid>
            <pubDate>Fri, 14 Aug 2020 09:11:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Using Rust Lambdas in Production]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24154506">thread link</a>) | @lukastyrychtr
<br/>
August 13, 2020 | https://www.cvpartner.com/blog/using-rust-lambdas-in-production | <a href="https://web.archive.org/web/*/https://www.cvpartner.com/blog/using-rust-lambdas-in-production">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><figure id="w-node-c687bec1ed8c-01d6604b"><p><img src="https://assets.website-files.com/56d31f469aaa616f5089a267/5f23ffebdba110f2cab1d06d_Rust%20Lambda.png" alt=""></p></figure><div><p>Update:&nbsp;Join the discussion over at <a href="https://news.ycombinator.com/item?id=24154506">HackerNews</a>! </p><p>We’ve written in the past about how the CV Partner web application is written in Ruby on Rails. The web application isn’t the whole story, though. Surrounding it are many supporting services, and we are increasingly using Rust to write these services.</p></div><p>We’re also using more Lambdas in our architecture, and we want to use Rust in those as well. The landscape for Rust lambdas isn’t barren, but it’s not well-trodden either.<br></p><p>This post is going to cover how we write, build, and deploy our Rust lambdas. Our lambdas have the following qualities that we’re proud of and want to share with you:<br></p><ol role="list"><li><strong>Fast, standardised build.</strong> All of our lambdas use the same Dockerfile to build, and make good use of Docker’s layer caching. Incremental builds in CI take under a minute.</li><li><strong>Run locally. </strong>If you’re working on a lambda, you don’t want to have to sit through a CI build to see if your changes work. All of our lambdas can run locally and in AWS using the same code.</li><li><strong>Private GitHub dependencies. There aren’t many options out there for private Cargo repositories, so we use private GitHub repositories for our internal libraries.</strong></li></ol><h2>The code<br></h2><p>The starting point for writing a Lambda in Rust is to use the official <a href="https://github.com/awslabs/aws-lambda-rust-runtime">Rust lambda runtime</a>. At the time of writing, the last release of this library is version 0.2, which doesn’t support async/await. Async/await support is present in master, though. Here’s how it looks in practice:</p><div><pre><code>
use lambda::{lambda, Context};
use serde_json::Value;

type Error = Box<dyn std::error::error="" +="" send="" sync="" 'static="">;

#[lambda]
#[tokio::main]
async fn main(event: Value, _: Context) -&gt; Result<value, error=""> {
    Ok(event)
}

</value,></dyn></code></pre></div><p>The problem with this is that you can’t run it locally. The #[lambda] attribute wraps your main function in another main function that calls in to the AWS lambda API.<br></p><p>To get around this, we write two main functions:<br></p><div><pre><code>

#[cfg(feature = "with-lambda")]
use lambda::{lambda, Context};
use serde::{Deserialize, Serialize};

type Error = Box<dyn std::error::error="" +="" send="" sync="" 'static="">;

#[derive(Deserialize, Debug)]
struct Input {
    name: String
}

#[derive(Serialize, Debug)]
struct Output {
    greeting: String
}

async fn handler(input: Input) -&gt; Result<output, error=""> {
    Ok(Output { greeting: format!(“Hello, {}!”, input.name) })
}

#[cfg(feature = "with-lambda")]
#[lambda]
#[tokio::main]
async fn main(input: Input, _: Context) -&gt; Result<output, error=""> {
    handler(input).await
}

#[cfg(not(feature = "with-lambda"))]
#[tokio::main]
async fn main() -&gt; Result&lt;(), Error&gt; {
    let input_str = std::env::args().nth(1);
    if input_str.is_none() {
        panic!(
            "you must pass an input parameter as the first argument, and it must be a JSON string"
        );
    }
    let input = serde_json::from_str(&amp;input_str.unwrap())?;
    let output = handler(input).await?;
    println!("{}", serde_json::to_string(&amp;output)?);
    Ok(())
}

</output,></output,></dyn></code></pre></div><p>We’re making use of Rust’s “feature” flags to compile a different harness around the handle function depending on whether we want to run locally or in AWS.</p><p>Here’s the Cargo.toml file:</p><div><pre><code>
[package]
name = "rust-lambda-template"
version = "0.1.0"
authors = ["Sam Rose <sam@cvpartner.com>"]
edition = "2018"

[dependencies]
lambda = { git = "https://github.com/awslabs/aws-lambda-rust-runtime/", rev = "c8dbcd39e0b1cf9ecf395e2b2f9df6c6c0d97780" }
tokio = { version = "0.2", features = ["full"] }
serde = { version = "1", features = ["derive"] }
serde_derive = "1"
serde_json = "1"

[features]
with-lambda = []

</sam@cvpartner.com></code></pre></div><p>Two noteworthy things:<br></p><ol role="list"><li>We’re using a version of the aws-lambda-rust-runtime that hasn’t officially been released. This isn’t ideal, and we’re eagerly awaiting a 0.3 release.</li><li>We have a features section, which is where we define the with-lambda feature we use in the Rust code shown above.<br></li></ol><p>Running our lambda now gives us the following:</p><div><pre><code>
$ cargo run -- ‘{ “name”: “Sam” }’
{ “message”: “Hello, Sam!” }

</code></pre></div><h2><strong>The Dockerfile</strong></h2><p>All of our lambdas build with the same Dockerfile. I’ll show it in all of its glory and then explain what’s going on bit by bit. Brace yourself.</p><div><pre><code>
# syntax=docker/dockerfile:experimental

FROM rust:latest as cargo-build
ARG name

RUN apt-get update
RUN apt-get install musl-tools -y
RUN rustup target add x86_64-unknown-linux-musl

WORKDIR /usr/src/${name}
COPY Cargo.toml Cargo.toml
RUN mkdir src/
RUN echo "fn main() {println!(\"if you see this, the build broke\")}" &gt; src/main.rs
RUN mkdir -p $HOME/.ssh
RUN ssh-keyscan github.com &gt; $HOME/.ssh/known_hosts
RUN test "$(cat $HOME/.ssh/known_hosts | ssh-keygen -lf -)" = "2048 SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8 github.com (RSA)"
RUN --mount=type=ssh RUSTFLAGS=-Clinker=musl-gcc cargo build --features with-lambda --release --target=x86_64-unknown-linux-musl

RUN rm src/main.rs
COPY src/* src
RUN touch src/**
RUN --mount=type=ssh RUSTFLAGS=-Clinker=musl-gcc cargo test --features with-lambda --release --target=x86_64-unknown-linux-musl
RUN --mount=type=ssh RUSTFLAGS=-Clinker=musl-gcc cargo build --features with-lambda --release --target=x86_64-unknown-linux-musl

FROM alpine:latest
ARG name
COPY --from=cargo-build /usr/src/${name}/target/x86_64-unknown-linux-musl/release/${name} /usr/local/bin/${name}

</code></pre></div><p>First of all, shout out to Shane Utt whose <a href="https://shaneutt.com/blog/rust-fast-small-docker-image-builds/">blog post</a> we used as a starting point for this.<br></p><p>The first line is a Docker directive that says we want to use some experimental Dockerfile syntax. The syntax in question is the --mount=type=ssh flag to the RUN commands, but we’ll talk about later.</p><div><pre><code>
FROM rust:latest as cargo-build
ARG name

</code></pre></div><p>This next bit says we want to use the latest Rust image, and we’re passing in a build arg called “name.” This is how we’re able to share this Dockerfile between all of our lambdas without having to modify it.</p><div><pre><code>
RUN apt-get update
RUN apt-get install musl-tools -y
RUN rustup target add x86_64-unknown-linux-musl

</code></pre></div><p>Next we run an update on the image, and we install <a href="https://musl.libc.org/">musl</a>. If you’re not familiar, musl is a libc replacement that you can link to statically. This means the resulting binary won’t depend on the system’s libc, which makes it more portable. It’s not a strict requirement for running on AWS Lambda, but it’s good practice.</p><div><pre><code>
WORKDIR /usr/src/${name}
COPY Cargo.toml Cargo.toml
RUN mkdir src/
RUN echo "fn main() {println!(\"if you see this, the build broke\")}" &gt; src/main.rs

</code></pre></div><p>The next few lines set up a pseudo project, where the only things we’re going to compile are our dependencies and a dummy main.rs. The idea behind this is to use Docker’s layer caching to avoid having to compile our dependencies every build. This leads to significantly faster incremental builds in Docker.</p><div><pre><code>
RUN mkdir -p $HOME/.ssh
RUN ssh-keyscan github.com &gt; $HOME/.ssh/known_hosts
RUN test "$(cat $HOME/.ssh/known_hosts | ssh-keygen -lf -)" = "2048 SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8 github.com (RSA)"

</code></pre></div><p>Up until now, we’ve done exactly what Shane Utt did in his version of this. These three lines, though, are new. Because we use SSH to fetch private dependencies (more on this later), we would sometimes find that our builds would fail with the error “host key verification failed.” To get around that we pull down GitHub’s host keys and make sure they’re what we expect them to be based on the values <a href="https://docs.github.com/en/github/authenticating-to-github/githubs-ssh-key-fingerprints">here</a>.</p><div><pre><code>
RUN mkdir -p $HOME/.ssh
RUN --mount=type=ssh RUSTFLAGS=-Clinker=musl-gcc cargo build --features with-lambda --release --target=x86_64-unknown-linux-musl

</code></pre></div><p>Our first bit of experimental syntax! The --mount flag is a new thing introduced with the BuildKit engine for Docker, you can read about it in depth <a href="https://medium.com/@tonistiigi/build-secrets-and-ssh-forwarding-in-docker-18-09-ae8161d066">here</a>. The type=ssh bit is us telling Docker that we want to use an SSH agent for this command. In the docker build invocation, which we’ll see later, we can tell Docker what keys to add to this SSH agent.</p><p>The reason we do this is because it was the only way we could find that let us depend on private GitHub repositories in our Cargo.toml file, in a way that worked both locally and in CI. It means we can do this in our Cargo.toml file:</p><div><pre><code>
[dependencies]
private-library = { git = "ssh://github.com/cvpartner/private-library", tag = "1.0" }

</code></pre></div><p>And it Just Works<strong>™</strong>.</p><p>The rest of the RUN command is our first cargo build. It looks a lot scarier than it is. Most of it is us telling rustc to link against musl instead of the default libc. The only other interesting bit is the --features with-lambda. This matches up with the code we saw earlier to produce a binary that’s going to work properly when deployed in AWS.</p><div><pre><code>
RUN rm src/main.rs
COPY src/* src
RUN touch src/**
RUN --mount=type=ssh RUSTFLAGS=-Clinker=musl-gcc cargo test --features with-lambda --release --target=x86_64-unknown-linux-musl
RUN --mount=type=ssh RUSTFLAGS=-Clinker=musl-gcc cargo build --features with-lambda --release --target=x86_64-unknown-linux-musl

</code></pre></div><p>Next up, we’re copying over our actual source code. The touch command is necessary for cargo to realise the files are new, because when we created our dummy main.rs file earlier we created a new file with a timestamp later than the one on the real main.rs file. This is different to the approach taken by Shane Utt, as we found that approach would often result in builds where the dummy main.rs file was the one that ended up in the final build.</p><p>Another addition is the cargo test invocation. Tests are good!</p><div><pre><code>
FROM alpine:latest
ARG name
COPY --from=cargo-build /usr/src/${name}/target/x86_64-unknown-linux-musl/release/${name} /usr/local/bin/${name}

</code></pre></div><p>Lastly we create a new build stage and copy over the final executable. The new build stage is in order to keep the final image small. Ours tend to clock in at around 8MB.<br></p><h2><strong>The build script</strong><br></h2><p>Invoking Docker is done in a shell script which is also identical for all of our lambdas.</p><div><pre><code>
#!/usr/bin/env bash

set -e
set -x

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &amp;&amp; pwd )"
cd $DIR

NAME=$(cat Cargo.toml | grep "name" | head -n 1 | sed -E 's/name = "(.*)"/\1/')
DOCKER_NAME="cvpartner/$NAME"

if [[ -z $BUILD_ID ]];
then
  TAG=$DOCKER_NAME
  SSH="--ssh default"
else
  TAG="our.private.docker.registry/$DOCKER_NAME"
  SSH="--ssh default=/home/ci/.ssh/id_rsa"
fi

DOCKER_BUILDKIT=1 docker build $SSH --cache-from $TAG …</code></pre></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.cvpartner.com/blog/using-rust-lambdas-in-production">https://www.cvpartner.com/blog/using-rust-lambdas-in-production</a></em></p>]]>
            </description>
            <link>https://www.cvpartner.com/blog/using-rust-lambdas-in-production</link>
            <guid isPermaLink="false">hacker-news-small-sites-24154506</guid>
            <pubDate>Fri, 14 Aug 2020 06:39:37 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Implementing a Type-safe printf in Rust]]>
            </title>
            <description>
<![CDATA[
Score 116 | Comments 57 (<a href="https://news.ycombinator.com/item?id=24154263">thread link</a>) | @lukastyrychtr
<br/>
August 13, 2020 | https://willcrichton.net/notes/type-safe-printf/ | <a href="https://web.archive.org/web/*/https://willcrichton.net/notes/type-safe-printf/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
  
  
  <p>
    
    Will Crichton
    
    &nbsp; — &nbsp;
    June 21, 2020
  </p>
  <p>I show how to use heterogeneous lists and traits to implement a type-safe printf in Rust. These mechanisms can ensure that two variadic argument lists share important properties, like the number of format string holes matches the number of printf arguments.</p>
  <p><em>Part of an ongoing series about type-level programming in Rust. Consider reading <a href="http://willcrichton.net/notes/type-level-programming/">part one</a> first! All code in this note can be found in <a href="https://gist.github.com/willcrichton/e7fcf1b0e84b4be7f172f0e0245cf149">this gist</a>.</em></p>

<p>Rust has a great printf function, <a href="https://doc.rust-lang.org/std/macro.println.html"><code>println!</code></a>. It has a rich formatting language, but also catches mistakes at compile-time. For example, <code>println!</code> will check that the number of arguments matches the number of holes in the format string:</p>

<div><div><pre><code>error: 2 positional arguments in format string, but there is 1 argument
  --&gt; src/printf.rs:36:13
   |
36 |   println!("{} {}", "Hello");
</code></pre></div></div>

<p>How does the Rust compiler make this check? Because both the format string and the argument are within the macro, Rust will check that the number of holes matches the number of arguments. Consequently, format strings <em>have</em> to be within the macro. If we write:</p>

<div><div><pre><code><span>let</span> <span>s</span> <span>=</span> <span>"{} {}"</span><span>;</span>
<span>println!</span><span>(</span><span>s</span><span>,</span> <span>"hi"</span><span>)</span>
</code></pre></div></div>

<p>This code fails to compile with the error:</p>

<div><div><pre><code>error: format argument must be a string literal
  --&gt; src/printf.rs:42:12
   |
42 |   println!(s, "hi");
</code></pre></div></div>

<p>I’ll show you how to implement type-safe printf without using procedural macros. More generally, this note contains a Rust recipe for functions where:</p>

<ol>
  <li>Arguments are variadic</li>
  <li>Each argument can be a different type (<code>Vec&lt;T&gt;</code> not allowed)</li>
  <li>Multiple variadic inputs share a parallel property, e.g. the number of arguments should match the number of format holes</li>
</ol>

<h2 id="core-mechanism-hlist">Core mechanism: HList</h2>

<p>First, we need to understand the main type-level mechanism: a heterogeneous list (or H-list). An H-list is a sequence of values of potentially different types. For example, <code>[1, "a", true]</code> is an H-list, but not a valid Rust vector. H-lists are implemented in Rust using a linked-list style:</p>

<div><div><pre><code><span>struct</span> <span>HNil</span><span>;</span>
<span>struct</span> <span>HCons</span><span>&lt;</span><span>Head</span><span>,</span> <span>Tail</span><span>&gt;</span> <span>{</span>
  <span>head</span><span>:</span> <span>Head</span><span>,</span>
  <span>tail</span><span>:</span> <span>Tail</span>
<span>}</span>

<span>let</span> <span>example</span><span>:</span> <span>HCons</span><span>&lt;</span><span>i32</span><span>,</span> <span>HCons</span><span>&lt;</span><span>bool</span><span>,</span> <span>HNil</span><span>&gt;&gt;</span> <span>=</span>
  <span>HCons</span><span>{</span><span>head</span><span>:</span> <span>1</span><span>,</span> <span>tail</span><span>:</span> <span>HCons</span><span>{</span><span>head</span><span>:</span> <span>true</span><span>,</span> <span>tail</span><span>:</span> <span>HNil</span><span>}};</span>
</code></pre></div></div>

<p>The key idea is that the type of an H-list changes every time you make a change to it. By contrast, if you push to a <code>Vec&lt;T&gt;</code>, the type of the vector stays the same.</p>

<p>Just like Rust has <code>vec![]</code>, we can use the <a href="https://github.com/lloydmeta/frunk#hlist">frunk</a> crate to get an <code>hlist!</code> macro.</p>

<div><div><pre><code><span>let</span> <span>example</span> <span>=</span> <span>hlist!</span><span>[</span><span>1</span><span>,</span> <span>true</span><span>];</span> <span>// same as above</span>
</code></pre></div></div>

<h2 id="setting-up-printf">Setting up printf</h2>

<p>Let’s go back to the ingredients of printf. We need a format string and an argument list. The key idea is to represent both with an H-list, and carefully use Rust’s traits to ensure our desired property: the number of arguments should match the number of holes.</p>

<p>First, to represent format strings, we will have a sequence of structs that represent each part of the string.</p>

<div><div><pre><code><span>pub</span> <span>struct</span> <span>FString</span><span>(</span><span>&amp;</span><span>'static</span> <span>str</span><span>);</span>
<span>pub</span> <span>struct</span> <span>FVar</span><span>;</span>

<span>// Assume that we compile "Hello {}! The first prime is {}" into this code.</span>
<span>// That would be a simple syntactic transformation.</span>
<span>let</span> <span>example</span> <span>=</span> <span>hlist!</span><span>[</span>
  <span>FString</span><span>(</span><span>"Hello "</span><span>),</span> <span>FVar</span><span>,</span> <span>FString</span><span>(</span><span>"! The first prime is "</span><span>),</span> <span>FVar</span>
<span>];</span>
</code></pre></div></div>

<p>To represent arguments, we will use a matching H-list of values. For example:</p>

<div><div><pre><code><span>let</span> <span>args</span> <span>=</span> <span>hlist!</span><span>[</span><span>"world"</span><span>,</span> <span>2</span><span>];</span>
</code></pre></div></div>

<p>Then, our goal is to create a function <code>format</code> such that this is true:</p>

<div><div><pre><code><span>assert_eq!</span><span>(</span>
  <span>example</span><span>.format</span><span>(</span><span>args</span><span>),</span>
  <span>"Hello world! The first prime is 2"</span>
<span>);</span>
</code></pre></div></div>

<p>And this should be a compile-time (NOT run-time) error:</p>

<div><div><pre><code><span>example</span><span>.format</span><span>(</span><span>hlist!</span><span>[</span><span>"Only one arg"</span><span>]);</span>
</code></pre></div></div>

<h2 id="the-format-trait">The Format trait</h2>

<p>In the spirit of type-level computation, we start by defining a trait.</p>

<div><div><pre><code><span>trait</span> <span>Format</span><span>&lt;</span><span>ArgList</span><span>&gt;</span> <span>{</span>
  <span>fn</span> <span>format</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>args</span><span>:</span> <span>ArgList</span><span>)</span> <span>-&gt;</span> <span>String</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Here, <code>self</code> is the H-list of the format directives, and <code>ArgList</code> is the H-list of the variadic arguments. <code>Format</code> need to take <code>ArgList</code> as a type parameter, because its type will change as we remove elements from the <code>ArgList</code> list.</p>

<p>Now, we proceed to implement the <code>Format</code> trait by cases. First, the base case for reaching the end of the format list <code>HNil</code>:</p>

<div><div><pre><code><span>impl</span> <span>Format</span><span>&lt;</span><span>HNil</span><span>&gt;</span> <span>for</span> <span>HNil</span> <span>{</span>
  <span>fn</span> <span>format</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>_</span><span>args</span><span>:</span> <span>HNil</span><span>)</span> <span>-&gt;</span> <span>String</span> <span>{</span>
    <span>""</span><span>.to_string</span><span>()</span>
  <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>This impl says that when we reach the end of a format list, just return the empty string. And the only argument we will accept is an empty argument list. Combined with the next impls, this inductively ensures that extra arguments are not accepted.</p>

<p>Next, we will implement <code>FString</code>. This implementation should use the string constant contained in the <code>FString</code> struct, and combine it recursively with the rest of the format list. We don’t use variadic arguments for <code>FString</code>, so they get passed along. In Rust, this English specification becomes:</p>

<div><div><pre><code><span>impl</span><span>&lt;</span><span>ArgList</span><span>,</span> <span>FmtList</span><span>&gt;</span> <span>Format</span><span>&lt;</span><span>ArgList</span><span>&gt;</span>
<span>for</span> <span>HCons</span><span>&lt;</span><span>FString</span><span>,</span> <span>FmtList</span><span>&gt;</span>
<span>where</span> <span>FmtList</span><span>:</span> <span>Format</span><span>&lt;</span><span>ArgList</span><span>&gt;</span>
<span>{</span>
  <span>fn</span> <span>format</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>args</span><span>:</span> <span>ArgList</span><span>)</span> <span>-&gt;</span> <span>String</span> <span>{</span>
    <span>self</span><span>.head</span><span>.</span><span>0</span><span>.to_owned</span><span>()</span> <span>+</span> <span>&amp;</span><span>self</span><span>.tail</span><span>.format</span><span>(</span><span>args</span><span>)</span>
  <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>Note that we have to add <code>FmtList: Format&lt;ArgList&gt;</code> to ensure the recursive call to <code>self.tail.format</code> works. Also note that we aren’t implementing <code>Format</code> directly on <code>FString</code>, but rather on an H-list containing <code>FString</code>.</p>

<p>Finally, the most complex case, <code>FVar</code>. We want this impl to take an argument from the <code>ArgList</code>, then format the remaining format list with the remaining arguments.</p>

<div><div><pre><code><span>impl</span><span>&lt;</span><span>T</span><span>,</span> <span>ArgList</span><span>,</span> <span>FmtList</span><span>&gt;</span> <span>Format</span><span>&lt;</span><span>HCons</span><span>&lt;</span><span>T</span><span>,</span> <span>ArgList</span><span>&gt;&gt;</span>
<span>for</span> <span>HCons</span><span>&lt;</span><span>FVar</span><span>,</span> <span>FmtList</span><span>&gt;</span>
<span>where</span>
  <span>FmtList</span><span>:</span> <span>Format</span><span>&lt;</span><span>ArgList</span><span>&gt;</span><span>,</span>
  <span>T</span><span>:</span> <span>ToString</span><span>,</span>
<span>{</span>
  <span>fn</span> <span>format</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>args</span><span>:</span> <span>HCons</span><span>&lt;</span><span>T</span><span>,</span> <span>ArgList</span><span>&gt;</span><span>)</span> <span>-&gt;</span> <span>String</span> <span>{</span>
    <span>args</span><span>.head</span><span>.to_string</span><span>()</span> <span>+</span> <span>&amp;</span><span>self</span><span>.tail</span><span>.format</span><span>(</span><span>args</span><span>.tail</span><span>)</span>
  <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>Be careful to observe which H-list is being accessed by <code>head</code> and <code>tail</code>. Here, the <code>args</code> H-list provides the data to fill the hole via <code>args.head</code>.</p>

<h2 id="checking-our-properties">Checking our properties</h2>

<p>With this implementation, our correct example successfully compiles and runs:</p>

<div><div><pre><code><span>let</span> <span>example</span> <span>=</span> <span>hlist!</span><span>[</span>
  <span>FString</span><span>(</span><span>"Hello "</span><span>),</span> <span>FVar</span><span>,</span> <span>FString</span><span>(</span><span>"! The first prime is "</span><span>),</span> <span>FVar</span>
<span>];</span>
<span>assert_eq!</span><span>(</span>
  <span>example</span><span>.format</span><span>(</span><span>hlist!</span><span>[</span><span>"world"</span><span>,</span> <span>2</span><span>]),</span>
  <span>"Hello world! The first prime is 2"</span>
<span>);</span>
</code></pre></div></div>

<p>What about our incorrect example? If we write this:</p>

<div><div><pre><code><span>example</span><span>.format</span><span>(</span><span>hlist!</span><span>[</span><span>"just one arg"</span><span>]);</span>
</code></pre></div></div>

<p>This code fails to compile with the error:</p>

<div><div><pre><code>error[E0308]: mismatched types
  --&gt; src/printf.rs:48:18
   |
48 |   example.format(hlist!["just one arg"]);
   |                  ^^^^^^^^^^^^^^^^^^^^^^
   |                  expected struct `Cons`, found struct `HNil`
   |
   = note: expected struct `HCons&lt;_, HNil&gt;`
              found struct `HNil`
</code></pre></div></div>

<p>While the error is enigmatic, our mistake is at least correctly caught at compile-time. This is because Rust deduces that <code>example.format()</code> expects an H-list of the shape <code>HCons&lt;_, HCons&lt;_, HNil&gt;&gt;</code>, but it finds <code>HNil</code> too soon in our 1-element H-list. A similar error occurs when providing too many args.</p>

<p>Stupendous! We have successfully implemented a type-safe printf using H-lists and traits.</p>

<h2 id="extending-our-abstraction">Extending our abstraction</h2>

<p>Right now, our <code>Format</code> function just checks that the format list and argument list are the same length. We could extend our format structures, for example to ensure that an <code>FVar</code> must be a particular type, or must use <code>Debug</code> vs. <code>Display</code>. Here’s the sketch of such a strategy:</p>

<div><div><pre><code><span>use</span> <span>std</span><span>::</span><span>marker</span><span>::</span><span>PhantomData</span><span>;</span>

<span>// Add flags for whether using Display or Debug</span>
<span>pub</span> <span>struct</span> <span>FDisplay</span><span>;</span>
<span>pub</span> <span>struct</span> <span>FDebug</span><span>;</span>

<span>// Use a type parameter with PhantomData to represent the intended type</span>
<span>pub</span> <span>struct</span> <span>FVar</span><span>&lt;</span><span>T</span><span>,</span> <span>Flag</span><span>&gt;</span><span>(</span><span>PhantomData</span><span>&lt;</span><span>(</span><span>T</span><span>,</span> <span>Flag</span><span>)</span><span>&gt;</span><span>);</span>

<span>// Now, T has to be the same between the format list and arg list</span>
<span>// Also, FDisplay flag requires that `T: Display`</span>
<span>impl</span><span>&lt;</span><span>T</span><span>,</span> <span>ArgList</span><span>,</span> <span>FmtList</span><span>&gt;</span> <span>Format</span><span>&lt;</span><span>HCons</span><span>&lt;</span><span>T</span><span>,</span> <span>ArgList</span><span>&gt;&gt;</span>
<span>for</span> <span>HCons</span><span>&lt;</span><span>FVar</span><span>&lt;</span><span>T</span><span>,</span> <span>FDisplay</span><span>&gt;</span><span>,</span> <span>FmtList</span><span>&gt;</span>
<span>where</span>
  <span>FmtList</span><span>:</span> <span>Format</span><span>&lt;</span><span>ArgList</span><span>&gt;</span><span>,</span>
  <span>T</span><span>:</span> <span>Display</span><span>,</span>
<span>{</span>
  <span>fn</span> <span>format</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>args</span><span>:</span> <span>HCons</span><span>&lt;</span><span>T</span><span>,</span> <span>ArgList</span><span>&gt;</span><span>)</span> <span>-&gt;</span> <span>String</span> <span>{</span>
    <span>// using format! is cheating, but you get the idea</span>
    <span>format!</span><span>(</span><span>"{}"</span><span>,</span> <span>args</span><span>)</span> <span>+</span> <span>&amp;</span><span>self</span><span>.tail</span><span>.format</span><span>(</span><span>args</span><span>.tail</span><span>)</span>
  <span>}</span>
<span>}</span>

<span>// Similar impl for `T: Debug` when `FDebug` is used</span>
</code></pre></div></div>

<p>With this approach, if our format list and arg list differ in type:</p>

<div><div><pre><code><span>let</span> <span>fmt</span> <span>=</span> <span>hlist!</span><span>[</span><span>FString</span><span>(</span><span>"n: "</span><span>),</span> <span>FVar</span><span>::</span><span>&lt;</span><span>i32</span><span>,</span> <span>FDisplay</span><span>&gt;</span><span>(</span><span>PhantomData</span><span>)];</span>
<span>fmt</span><span>.format</span><span>(</span><span>hlist!</span><span>[</span><span>"not a number"</span><span>]);</span>
</code></pre></div></div>

<p>Then the code will not compile with the error, <code>&amp;'static str is not i32</code>.</p>

<p>Shout-out to <a href="https://www.servant.dev/posts/2018-07-12-servant-dsl-typelevel.html">this blog post</a> from Haskell’s servant framework which got me thinking about adapting their strategy into Rust.</p>

</div></div>]]>
            </description>
            <link>https://willcrichton.net/notes/type-safe-printf/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24154263</guid>
            <pubDate>Fri, 14 Aug 2020 06:07:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Save the USPS]]>
            </title>
            <description>
<![CDATA[
Score 192 | Comments 236 (<a href="https://news.ycombinator.com/item?id=24153311">thread link</a>) | @mooreds
<br/>
August 13, 2020 | https://2pml.com/2020/08/10/usps/ | <a href="https://web.archive.org/web/*/https://2pml.com/2020/08/10/usps/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-12653">
	<!-- .entry-header -->

	<div>
		<p><img data-attachment-id="12682" data-permalink="https://2pml.com/2020/08/10/usps/cvbbjbi0/" data-orig-file="https://i0.wp.com/2pml.com/wp-content/uploads/2020/08/cVBbjbi0.jpg?fit=1600%2C1144&amp;ssl=1" data-orig-size="1600,1144" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="cVBbjbi0" data-image-description="" data-medium-file="https://i0.wp.com/2pml.com/wp-content/uploads/2020/08/cVBbjbi0.jpg?fit=300%2C215&amp;ssl=1" data-large-file="https://i0.wp.com/2pml.com/wp-content/uploads/2020/08/cVBbjbi0.jpg?fit=740%2C529&amp;ssl=1" loading="lazy" src="https://i0.wp.com/2pml.com/wp-content/uploads/2020/08/cVBbjbi0.jpg?resize=740%2C529&amp;ssl=1" alt="cVBbjbi0" width="740" height="529" srcset="https://i0.wp.com/2pml.com/wp-content/uploads/2020/08/cVBbjbi0.jpg?w=1600&amp;ssl=1 1600w, https://i0.wp.com/2pml.com/wp-content/uploads/2020/08/cVBbjbi0.jpg?resize=300%2C215&amp;ssl=1 300w, https://i0.wp.com/2pml.com/wp-content/uploads/2020/08/cVBbjbi0.jpg?resize=1024%2C732&amp;ssl=1 1024w, https://i0.wp.com/2pml.com/wp-content/uploads/2020/08/cVBbjbi0.jpg?resize=768%2C549&amp;ssl=1 768w, https://i0.wp.com/2pml.com/wp-content/uploads/2020/08/cVBbjbi0.jpg?resize=1536%2C1098&amp;ssl=1 1536w, https://i0.wp.com/2pml.com/wp-content/uploads/2020/08/cVBbjbi0.jpg?w=1480&amp;ssl=1 1480w" sizes="(max-width: 740px) 100vw, 740px" data-recalc-dims="1"></p>
<p>There are three types of infrastructure. One is visible: roads, dams and bridges. The second is invisible: broadband internet provisions and the entirety of our cellular infrastructure. Both are still vital in building our present. The third form of infrastructure is one being rebuilt in order to be repurposed for future use. I explained in <em>J-Curves and Agglomeration</em>:</p>
<blockquote><p>The U.S. Postal Service is a key component of the eCommerce economy. Packages are just 5% of its shipping volume but eCommerce accounts for nearly 30% of the agency’s revenue. Partnerships with vendors like Amazon (or providers like FedEx and UPS) provide a majority of its package volume but small businesses and direct-to-consumer brands rely on USPS’ pricing. Raising costs on retailers may lead to more attrition. […]</p>
<p>By raising prices to combat Amazon’s growing influence over the economy, disrupting the postal economy is no different than digging up paved roads before a period of heightened freight transit. [<a href="https://2pml.com/2020/05/18/agglomeration/">2PM, 1</a>]</p></blockquote>
<p>The U.S. Postal Service is all three. When an American institution is 250 years old, it may as well be the ground that we stand on. The service has contributed services and innovations that we don’t readily attribute to it. Consider its contribution to the middle class: the U.S. Postal Service is one the country’s biggest employers with nearly 330,000 career employees and an average salary of $50,000. They are building the future of eCommerce, a still-nascent industry.</p>
<p>Critics of the USPS will cite cost of labor as a reason for the service’s obsolescence. A common refrain is “Why couldn’t Amazon takeover the service?” Consider that in the fourth quarter of 2019, eCommerce was just 11.9% of all retail. Amazon constituted right under half of that volume. And without the postal service, Amazon would not exist. The market costs of shipment subsidized a number of Amazon’s operations, allowing it to capture market share.</p>
<h2>“The Ground We Stand On”</h2>
<p>The postal service began before the founding of the United States. Benjamin Franklin was fired from his role as postmaster due to his involvement with the American Revolution. Just one year later in 1775, the Continental Congress appointed Franklin the Postmaster General of the “United Colonies.” His tenure left a mail system that offered service between the then-colonies and Great Britain. By 1802, the first African-Americans to work for the Postal Service were enslaved mail carriers. Senator James Jackson of Georgia, Chairman of the Committee of the Senate on the Post Office Establishment, once wrote:</p>
<blockquote><p>… The most active and intelligent [slaves] are employed as post riders. By travelling from day to day, and hourly mixing with people […] they will acquire information. They will learn that a man’s rights do not depend on his color. They will, in time, become teachers to their brethren.</p></blockquote>
<p>Within two months of Senator Jackson’s proclamation, African-Americans would be banned from the postal service, lasting from 1802 to March 1865, just one month before the conclusion of the Civil War. This disbarment ended by congressional decree.</p>
<blockquote><p>No person, by reason of color, shall be disqualified from employment in carrying the mails. (13 Stat. 515)</p></blockquote>
<p>The next decades would see an unparalleled push for African-American financial stability. Nearly 800 would serve as postal employees prior to the 20th century. More than 200 African Americans are known to have served in the high rank of postmaster prior to the conclusion of Reconstruction and the Progressive Era (1863-1920). Of them, nearly 20 were women. The postal service has always been politicized.</p>
<p>Soon after, the U.S. Government expanded on the postal service’s role in democratizing America, both literally and figuratively. President Theodore “Teddy” Roosevelt expanded on this with the <em>Square Deal</em> in 1902, communicating a fairness policy in hiring and leadership. The result was momentous for many. Roosevelt stated:</p>
<blockquote>
<p>It is and should be my consistent policy in every State, where their numbers warranted it, to recognize colored men of good repute and standing in making appointments to office. […] I can not consent to take the position that the door of hope – the door of opportunity – is to be shut upon any man, no matter how worthy, purely upon the grounds of race or color. <a href="https://about.usps.com/who-we-are/postal-history/african-american-workers-20thc.htm#_edn2" name="_ednref2">[2]</a></p>
</blockquote>
<p>Today, 21% (or nearly 70,000) of the agency’s employees are African-American. However, the postal service was consequential beyond matters of social equity. By 1823, the U.S. Postal Service and the U.S. Government established 80,000 miles of “post roads” to help carriers navigate new rural areas. By 1860, these roads connected nearly 28,000 post offices. Today, the postal service maintains nearly 40,000 post offices, clearing 212 billion letters and mail to 144 million homes.</p>
<blockquote data-card-controls="1" data-card-align="center" data-card-theme="light" data-card-key="3101080c845e4679b6077080f81a573e">
<h4><a href="https://twitter.com/web/status/1292117127055519744">No Title</a></h4>
<p>Save the @USPS.There is no institution more critical to the next phases of our commerce economy.</p>
</blockquote>

<p>Today, the service is tasked with another generational shift: supporting online retail. The pandemic shifted the American consumer towards online retail, this while reducing the number of units shipped. As such, companies like UPS and FedEx have responded by hiking prices. In response to USPS’ distress, FedEx recently stated:</p>
<blockquote>
<p>The COVID-19 pandemic has negatively impacted mail volumes and mix resulting in a further decrease in revenues and negative financial impact for the USPS. Additionally, the USPS continues to experience budgetary uncertainty as well as increased political debate regarding potential privatization or restructuring of its operations.</p>
</blockquote>

<figure id="attachment_12683" aria-describedby="caption-attachment-12683"><img data-attachment-id="12683" data-permalink="https://2pml.com/2020/08/10/usps/sleikjxu/" data-orig-file="https://i2.wp.com/2pml.com/wp-content/uploads/2020/08/sLEikjXU-scaled.jpg?fit=2048%2C1259&amp;ssl=1" data-orig-size="2048,1259" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="sLEikjXU" data-image-description="" data-medium-file="https://i2.wp.com/2pml.com/wp-content/uploads/2020/08/sLEikjXU-scaled.jpg?fit=300%2C184&amp;ssl=1" data-large-file="https://i2.wp.com/2pml.com/wp-content/uploads/2020/08/sLEikjXU-scaled.jpg?fit=740%2C455&amp;ssl=1" loading="lazy" src="https://i2.wp.com/2pml.com/wp-content/uploads/2020/08/sLEikjXU-scaled.jpg?resize=740%2C455&amp;ssl=1" alt="sLEikjXU" width="740" height="455" srcset="https://i2.wp.com/2pml.com/wp-content/uploads/2020/08/sLEikjXU-scaled.jpg?w=2048&amp;ssl=1 2048w, https://i2.wp.com/2pml.com/wp-content/uploads/2020/08/sLEikjXU-scaled.jpg?resize=300%2C184&amp;ssl=1 300w, https://i2.wp.com/2pml.com/wp-content/uploads/2020/08/sLEikjXU-scaled.jpg?resize=1024%2C630&amp;ssl=1 1024w, https://i2.wp.com/2pml.com/wp-content/uploads/2020/08/sLEikjXU-scaled.jpg?resize=768%2C472&amp;ssl=1 768w, https://i2.wp.com/2pml.com/wp-content/uploads/2020/08/sLEikjXU-scaled.jpg?resize=1536%2C944&amp;ssl=1 1536w, https://i2.wp.com/2pml.com/wp-content/uploads/2020/08/sLEikjXU-scaled.jpg?w=1480&amp;ssl=1 1480w" sizes="(max-width: 740px) 100vw, 740px" data-recalc-dims="1"><figcaption id="caption-attachment-12683">The most popular government sites: June 18, 2020</figcaption></figure>
<p>Cost inflation is the most concerning obstacle ahead for digitally native retailers. Without the treatment that the United States’ oldest civilian service afforded Amazon in its infancy, it will be more difficult to build more businesses of Amazon’s scale. The economics were difficult enough as is; these added costs will only add pressure to pass along costs to consumers, many of whom are facing down one of the most economically vulnerable periods since 2008.We should consider the postal service an investment into our present and future and a monument to our past.</p>
<p>If our economy is to begin addressing the shortfalls caused by the overwhelming contraction in the traditional retail industry, it will need the support of the postal service. For eCommerce, their service is the industry’s last mile for thousands of direct-to-consumer small businesses. The postal service uniquely sits at the intersection of our physical roads and our digital infrastructure. There isn’t a direct substitute and we shouldn’t wait to find out the hard way. Save the USPS. We will need more companies like the the successful hundreds that were built on its 250 year old infrastructure. That includes Amazon.</p>
<p><strong>By Web Smith | Editor: Hilary Milnes | Art by Alex Remy | <a href="http://2pml.com/about">About 2PM</a></strong></p>
			</div><!-- .entry-content -->

	
	</article></div>]]>
            </description>
            <link>https://2pml.com/2020/08/10/usps/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24153311</guid>
            <pubDate>Fri, 14 Aug 2020 04:18:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Machine Learning of Sets]]>
            </title>
            <description>
<![CDATA[
Score 10 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24152216">thread link</a>) | @akosiorek
<br/>
August 13, 2020 | http://akosiorek.github.io/ml/2020/08/12/machine_learning_of_sets.html | <a href="https://web.archive.org/web/*/http://akosiorek.github.io/ml/2020/08/12/machine_learning_of_sets.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
    <p>In machine learning, we typically work with input pairs (x, y), and we try to figure out how x and y depend on each other.
To do so, we gather many such pairs and hope that the dependence will reveal itself if a) we have enough data, b) our model is expressive enough to approximate this dependency, and c) we get the hyperparameters right.
In the simplest case, both x and y are just scalar values (or vectors \(\mathbf{x}, \mathbf{y}\)); for example, given some measurements of a plant’s shape, we might want to predict its species. The measurements here are real vectors \(\mathbf{x} \in \mathcal{X}\), where the input space \(\mathcal{X} = \mathbb{R}^d\) is usually Euclidean, and the species is a label \(\mathbf{y} \in \mathcal{Y}\) (usually an integer or a one-hot vector), but it is common for \(\mathbf{x}\) and \(\mathbf{y}\) to have more structure.</p>

<p>One of the main assumptions we rely on is that the pairs of (x, y) points are <a href="https://en.wikipedia.org/wiki/Independent_and_identically_distributed_random_variables">independent and identically distributed (i.i.d.) random variables</a>.
Let us unpack this a bit, starting from the end,</p>

<ul>
  <li><code>random variable</code>: there exists some stochastic generative process from which the variables were randomly sampled,</li>
  <li><code>identically</code>: all samples come from the same probability distribution,</li>
  <li><code>independent</code>: the generative process has no memory of generated samples, and hence any generated sample does not change the distribution over future generated samples.</li>
</ul>

<p>Any structure in \(\mathbf{x}, \mathbf{y}\), or both introduces constraints, and a successful application of an algorithm to a particular problem does heavily depend on whether or not this algorithm takes the relevant constraints into account.
A common constraint in image-related problems is translation equivariance<sup id="fnref:cnnequiv" role="doc-noteref"><a href="#fn:cnnequiv">1</a></sup>—the output of the algorithm should shift with any shifts applied to the image (you can read more about equvariances in <a href="https://fabianfuchsml.github.io/equivariance1of2/">this excellent blog post</a>).
In natural language-related problems, a typical constraint is causality: a token at position t can depend on any previous tokens at position 1:t-1, but it cannot depend on any future tokens<sup id="fnref:languecausality" role="doc-noteref"><a href="#fn:languecausality">2</a></sup>.</p>

<p>In the above examples, the dependencies between points (e.g., autoregressive dependence in NLP) are clear from the context.
However, if a data point is not a vector, matrix, or a sequence of vectors, but it is a <strong>set of vectors</strong>, these dependencies become less clear.
In particular, elements in an input set resemble elements in a dataset (i.e., lack of order), but the critical difference is that they are <strong>not independent</strong>, therefore breaking the i.i.d. assumption.
Accounting for this specific structure in inputs or outputs of an ML model leads to a family of set learning problems, which have recently gained considerable attention in the machine learning community.
I thought it would be useful to delve into the machine learning of sets.
In the following, we will consider set-to-vector, vector-to-set, and set-to-set problems and provide implementations of simple algorithms in <a href="https://github.com/google/jax">JAX</a> and <a href="https://github.com/deepmind/dm-haiku">haiku</a>.</p>

<p>First some imports:</p>

<div><div><pre><code>import jax
import jax.numpy as jnp
import haiku as hk
</code></pre></div></div>


<p>Before we start, it is useful to introduce some notation.
Let \(\mathbf{x} \in \mathbb{R}^d\) be an input vector, \(\mathbf{y} \in \mathbb{R}^k\) the output vector, and let \(X = \{\mathbf{x}_i\}_{i=1}^M\) and \(Y = \{\mathbf{y}_j\}_{j=1}^N\) be sets of \(M\) and \(N\) elements, respectively.
Note that, until now, \(y\) or \(\mathbf{y}\) were simply labels.
From now on, however, \(\mathbf{x}\) and \(\mathbf{y}\) can live in the same space, and simply be elements of different sets.
I will also use \(\mathcal{L}(X, Y)\) as a loss function operating on two sets, and \(l(\mathbf{x}, \mathbf{y})\) will be a loss function for pairs of elements.</p>


<p>This is perhaps the simplest set-learning problem since it only requires permutation invariance.
A function \(f\) is invariant to permutations \(\pi\) if \(\forall \pi\): \(f(X) = f(\pi X)\).
Permutation invariance has always been known in machine learning, as loss functions we use almost never<sup id="fnref:acn" role="doc-noteref"><a href="#fn:acn">3</a></sup> depend on the ordering of elements in our datasets or minibatches.
This is not for the lack of order: to create a minibatch, we stack multiple data elements in an array; this pairs every element in the minibatch with its minibatch index, therefore implicitly creating an order.
Loss functions tend to discard information about the order, usually by taking the mean over data examples.
We can create permutation-invariant functions by following a similar logic.</p>

<p>Examples in a minibatch are processed independently (which reflects their i.i.d. nature), but if each entry in the minibatch contains more than just a single data point (many pixels in an image, points in a point cloud, tokens in a language sentence), then flattening these points into a vector and feeding it into an MLP or a CNN results in different parameters being used for processing different data points, and hence order is used implicitly; feeding the points into an RNN reuses parameters, but introduces an explicit dependence on the order.</p>

<p>A straightforward solution to this issue is to treat points in a single example in the same way we treat examples in the minibatch: treat them independently.
This approach, followed by a permutation-invariant pooling operation such as max or mean pooling, is explored in <a href="https://arxiv.org/abs/1703.06114">Zaheer et al., “Deep Sets”, NeurIPS 2017</a> and is proven to be a universal set-function approximator<sup id="fnref:deepsetdim" role="doc-noteref"><a href="#fn:deepsetdim">4</a></sup>.</p>

<div><div><pre><code>class DeepSet(hk.Module):

  def __init__(self, encoder, decoder):
    super().__init__()
    self._encoder = encoder
    self._decoder = decoder
    
  def __call__(self, x):
    """Compute the DeepSet embedding.

    Args:
      x: Tensor of shape [batch_size, n_elems, n_dim].
    """
    return self._decoder(self._encoder(x).mean(1))
</code></pre></div></div>

<p>While newer approaches with better empirical performance exist, they all draw from the Deep Sets framework<sup id="fnref:setembeddings" role="doc-noteref"><a href="#fn:setembeddings">5</a></sup>.
Another factor contributing to the fact that the set-to-vector problem is quite easy is that pooling operations naturally work with variable-sized sets–there is nothing extra we have to do to handle sets of variable cardinality.
This is not the case in the following two problems, where we have to take the set size into account explicitly.</p>


<p>In vector-to-set, the task is to generate a set of real vectors from some (usually vector-valued) conditioning.</p>

<p>The majority of approaches out there focus on generating ordered sequences instead of unordered sets, and usually of fixed or at least known size.
This allows using MLPs<sup id="fnref:setae" role="doc-noteref"><a href="#fn:setae">6</a></sup> and RNNs<sup id="fnref:order_matters" role="doc-noteref"><a href="#fn:order_matters">7</a></sup> to predict fixed- and variable-length sets, respectively, but at the price of having to learn permutation-equivariance from data.
Learning permutation-equivariance can be induced by data augmentation. It is easy to generate different permutations, but usually comes at a decreased performance and/or longer training times compared to truly permutation-equivariant methods<sup id="fnref:data_augmentation" role="doc-noteref"><a href="#fn:data_augmentation">8</a></sup>.</p>

<div><div><pre><code>  def set_mlp(conditioning, decoder, n_elements):
    """Predicts a set.

    Args:
      conditioning: tensor of shape [batch_size, n_dim].
      decoder: callable, e.g. an MLP.
      n_elements: int.
    """
    z = decoder(conditioning)
    batch_size = conditioning.shape[0]
    # all we can do here is reshape!
    return z.reshape(batch_size, n_elements, -1)

  def set_rnn(conditioning, state, rnn, n_elements):
    """Predicts a set.

    Args:
      conditioning: tensor of shape [batch_size, n_dim].
      state: initial state for the rnn.
      rnn: rnn core.
      n_elements: int.
    """
    zs = []
    for _ in range(n_elements):
      z, state = rnn(conditioning, state)
      zs.append(z[:, None])  # add an axis

    return jnp.concatenate(zs, 1)
</code></pre></div></div>

<h4 id="permutation-invariant-loss-functions">Permutation-Invariant Loss Functions</h4>
<p>Learning to generate sets based on some conditioning typically requires scoring that set against the conditioning.
If we have ground-truth sets at our disposal, we can compare the generated sets against the ground-truth ones for the same conditioning.
This can take the form of supervised learning (think of detecting objects in an image, where we need to generate a set of bounding boxes) or unsupervised learning (autoencoding point-clouds, say).
Since we generally have no guarantee that the generated sets will obey any ordering (why should they?), we have to apply losses invariant to that ordering.
We have two options here:</p>

<ul>
  <li>We can find an optimal matching between two sets<sup id="fnref:bipartite_matching" role="doc-noteref"><a href="#fn:bipartite_matching">9</a></sup>, which comes down to finding a permutation \(\pi\) of one of the sets that minimizes the computed loss, that is: \(\pi^\star = \arg \min_\pi \mathcal{L}( \pi X, Y)\), with \(\mathcal{L}( \pi X, Y) = \sum_i l(\mathbf{x}_{\pi(i)}, \mathbf{y}_i)\). This can be done exactly using the cubic <a href="https://en.wikipedia.org/wiki/Hungarian_algorithm">Hungarian matching</a> algorithm, or approximately using e.g. <a href="https://arxiv.org/abs/1106.1925">optimal-transport</a>- or <a href="https://web.stanford.edu/~bayati/papers/bpmwmIT.pdf">message-passing</a>-based algorithms.</li>
  <li>Instead of finding a matching, we can find a lower bound on what the matched loss would be. A popular choice here is the Chamfer loss<sup id="fnref:chamfer" role="doc-noteref"><a href="#fn:chamfer">10</a></sup>, which computes \(\sum_{x \in X} \min_{y \in Y} l(x, y) + \sum_{y \in Y} \min_{x \in X} l(x, y)\). For every element in one set, it finds the element in the other set that results in the lowest pairwise loss. This loss does not work for multisets as elements can be repeated.</li>
</ul>

<p>If we do not have ground-truth for each conditioning (we have just sets), or if we have many possible sets for each conditioning (e.g., a group of possible sets for one of a few labels), we can instead learn by matching distributions e.g., in the GAN setting.
If we take this approach, we have two problems, really: that of vector-to-set for the generator and set-to-vector for the discriminator. 
Fortunately, we know how to solve the set-to-vector problem with a permutation-invariant neural net, and shortly I am going to describe some permutation-equivariant methods for generation.
This is precisely what we recently explored in <a href="https://oolworkshop.github.io/program/ool_32.html">Stelzner et al., “Generative Adversarial Set Transformers”, ICML 2020 Object-Oriented Learning Workshop</a>.</p>

<p>Coincidentally, sometimes we have to deal with a set of latent variables inside a model. For example in …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://akosiorek.github.io/ml/2020/08/12/machine_learning_of_sets.html">http://akosiorek.github.io/ml/2020/08/12/machine_learning_of_sets.html</a></em></p>]]>
            </description>
            <link>http://akosiorek.github.io/ml/2020/08/12/machine_learning_of_sets.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24152216</guid>
            <pubDate>Fri, 14 Aug 2020 01:40:20 GMT</pubDate>
        </item>
    </channel>
</rss>
