<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 5]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 5. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Sat, 19 Dec 2020 12:43:28 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-5.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Sat, 19 Dec 2020 12:43:28 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[51% of 4M Docker images have critical vulnerabilities]]>
            </title>
            <description>
<![CDATA[
Score 25 | Comments 15 (<a href="https://news.ycombinator.com/item?id=25454207">thread link</a>) | @AnnieNma
<br/>
December 17, 2020 | https://thechief.io/c/news/51-4-million-docker-images-have-critical-vulnerabilities/ | <a href="https://web.archive.org/web/*/https://thechief.io/c/news/51-4-million-docker-images-have-critical-vulnerabilities/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://thechief.io/c/news/51-4-million-docker-images-have-critical-vulnerabilities/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25454207</guid>
            <pubDate>Thu, 17 Dec 2020 10:09:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Creative Code-Generated Art]]>
            </title>
            <description>
<![CDATA[
Score 71 | Comments 14 (<a href="https://news.ycombinator.com/item?id=25453252">thread link</a>) | @dzink
<br/>
December 16, 2020 | https://www.editorx.com/shaping-design/article/creative-coding | <a href="https://web.archive.org/web/*/https://www.editorx.com/shaping-design/article/creative-coding">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-hook="post-description"><article><div><div data-rce-version="8.7.1"><div dir="ltr"><div><p id="viewer-foo"><span><span>Have you ever experienced true novelty? Something so mind-altering that it questions your definition of what you‚Äôve known to be true for so long. I imagine the first people to watch a film or see an airplane felt this. It‚Äôs an inexplicable energy that has the power to redefine. In many ways, artists have been at the center of challenging commonly held beliefs, and using entirely new mediums to express speculative ideas. </span></span></p><p id="viewer-fa7pc"><span><span>While never the first thing to come to mind when discussing art, creative coding is revolutionizing what art is and can be. As we enter a more digital world, creative coding may be the contemporary art movement we need in order to articulate major societal challenges we are facing as technology advances. </span></span></p><p id="viewer-gar4"><span><span>Put simply, creative coding is an emerging specialty that utilizes code and programming as a medium to create art. Programming‚Äôs versatility and ubiquitous nature makes it especially expressive, allowing it to manifest itself as digital paintings, data visualization, or even robotics. </span></span></p><p id="viewer-aesrq"><span><span>Unlike the functional focus of most uses of code - like the code lines of a navigation app - creative coding uses programming languages for a solely artistic purpose.</span></span></p><p id="viewer-bg2ev"><span><span>As artists, we generally hold a stigma regarding coding having high barriers to entry, and as engineers, we also hold a stigma surrounding the difficulties of creative expression. However, these fields no longer need to be separate entities, as they are more closely tied than people expect. </span></span></p><p id="viewer-80qt3"><span>With programming resources being incredibly open-source and <a href="https://www.editorx.com/shaping-design/article/drawing-inspiration-for-designers" target="_blank" rel="noopener"><u>creative inspiration</u></a> democratized across the internet, getting into this field is as easy as watching some coding tutorials on Youtube and making a Pinterest board. </span></p><p id="viewer-2vgh3"><span>If you haven‚Äôt already, you can <a href="https://www.editorx.com/shaping-design/article/should-designers-code" target="_blank" rel="noopener"><u>learn to code</u></a> by picking up a coding language such as HTML, CSS, and JavaScript. There are many online resources available, such as:</span></p><ul><li id="viewer-27t6d"><p><a href="https://www.w3schools.com/" target="_blank" rel="noopener"><u>W3Schools</u></a></p></li><li id="viewer-5oukm"><p><a href="https://www.youtube.com/watch?v=2qDywOS7VAc" target="_blank" rel="noopener"><u>Youtube Tutorials</u></a></p></li><li id="viewer-4rsku"><p><a href="https://www.linkedin.com/learning/" target="_blank" rel="noopener"><u>LinkedIn Learning</u></a></p></li><li id="viewer-a6fsj"><p><a href="https://www.learnpython.org/" target="_blank" rel="noopener"><u>Learnpython.org</u></a></p></li><li id="viewer-8el3i"><p><a href="https://www.codecademy.com/?g_network=g&amp;g_device=c&amp;g_adid=459321005730&amp;g_keyword=codecademy&amp;g_acctid=243-039-7011&amp;g_adtype=search&amp;g_adgroupid=70946090375&amp;g_keywordid=kwd-41065460761&amp;g_campaign=US_Brand_Core_Exact_Net+New+%28Auto+Tagging%29&amp;g_campaignid=1955172604&amp;utm_id=t_kwd-41065460761:ag_70946090375:cp_1955172604:n_g:d_c&amp;utm_term=codecademy&amp;utm_campaign=US_Brand_Core_Exact_Net%20New%20(Auto%20Tagging)&amp;utm_source=google&amp;utm_medium=paid-search&amp;utm_content=459321005730&amp;hsa_acc=2430397011&amp;hsa_cam=1955172604&amp;hsa_grp=70946090375&amp;hsa_ad=459321005730&amp;hsa_src=g&amp;hsa_tgt=kwd-41065460761&amp;hsa_kw=codecademy&amp;hsa_mt=e&amp;hsa_net=adwords&amp;hsa_ver=3&amp;gclid=CjwKCAiAzNj9BRBDEiwAPsL0d6bnyHp-tuJuJPB6ESAc8vQsGp2os6n9SvJ_fN73bAazebYH-FcctRoCuOMQAvD_BwE" target="_blank" rel="noopener"><u>The Code Academy</u></a> </p></li><li id="viewer-6638e"><p><a href="https://processing.org/" target="_blank" rel="noopener"><u>Processing</u></a></p></li></ul><p id="viewer-cbn64"><span>From there, finding inspiration can be as simple as reading the rest of this article or exploring dedicated art-technology spaces such as <a href="https://www.artechouse.com/" target="_blank" rel="noopener"><u>Artechouse</u></a>.</span></p><p id="viewer-erafq"><span>Here are some interesting fields within creative coding that you can experiment with once you get started:</span></p><ul><li id="viewer-ehb6t"><p><span><strong>Machine learning:</strong> The development of computer algorithms that automatically learn and improve their performance through experience and data.</span>


</p></li><li id="viewer-32vc4"><p><span><strong>Projection mapping:</strong> A technique to project video on irregularly shaped surfaces, such as sculptures or buildings. </span>


</p></li><li id="viewer-f009e"><p><span><strong>Generative design:</strong> An iterative design process in which a program, usually using algorithms, generates a certain number of outputs based on a set of constraints.</span>


</p></li><li id="viewer-5n77p"><p><span><strong>Live coding:</strong> A form of performance art in which coders program in real-time. It usually involves sound, image and light design.</span></p></li></ul><p id="viewer-ep6sm"><span><span>To get some ideas flowing and inspire your own creative coding pieces, here are some examples of how expansive, stunning, and novel creative coding can be.</span></span></p><ol><li id="viewer-eeo5c"><p><span>Audience by Random International</span></p></li><li id="viewer-fha9v"><p><span>New Nature Digital Petting Zoo by Marpi Studio</span></p></li><li id="viewer-a5o8e"><p><span>Everything in Existence by fuse*</span></p></li><li id="viewer-8gq1n"><p><span>Infinite Command Team by Casey Reas </span></p></li><li id="viewer-4eu7u"><p><span>Land Lines by Zach Lieberman </span></p></li><li id="viewer-3unh"><p><span>ALGOBABEZ by Shelly Knotts</span></p></li><li id="viewer-538vu"><p><span>XYZT: Abstract Landscapes by Adrien M &amp; Claire B</span></p></li><li id="viewer-b7vhn"><p><span>Tecnicontrol by Bradley G Munkowitz (GMUNK)</span></p></li><li id="viewer-bprm6"><p><span>PEmbroider created at Frank-Ratchye STUDIO for Creative Inquiry</span></p></li><li id="viewer-akhtn"><p><span>Learning to See by Memo Akten</span></p></li></ol><p id="viewer-bahbh"><span><span>Random International is a London-based experimental art studio that has been pioneering the creative coding space for well over a decade now. Their work touches on deep social themes and has been exhibited internationally in spaces like the MoMa. </span></span></p><p id="viewer-fduu8"><span><span><em>Audience</em>, one of their earlier pieces of work from 2008, uses motion tracking software and creative coding to create an almost uncomfortable, anthropomorphic experience. As a gallery visitor steps in front of rows of individually dancing mirrors, they instantly synchronize and lock onto the viewer. With 100 mirrors now looking right back at you, you then become the focal point of your own onlooking. </span></span></p><p id="viewer-8dmeo"><span><span>Created by Marpi Studio, New Nature is a digitally interactive petting zoo that relies on gesture-based technology and programming to create virtual organisms. </span></span></p><p id="viewer-65ego"><span><span>Through machine learning, Marpi has forged a virtual terrarium of creatures and plants that rely on the physical interactions of the viewers to come alive. As viewers engage with the digital creatures, the artwork responds with real-time computer-generated motions, simulating the movement of an organic creature being pet. </span></span></p><p id="viewer-60ee9"><span><span><em>Everything in Existence</em> questions our perceptions of reality. Using real-time data processing tools and algorithmic software, fuse* creates a living piece of art that constantly evolves and adapts depending on its interactions with onlookers. </span></span></p><p id="viewer-bna5m"><span><span>The artworks are constantly generating new visuals in response to the viewers, their social networks, sound and more. This solo exhibition by fuse*, which premiered in Washington DC in 2019, creates digitally interactive experiences independently of an artist. Its self-sufficient and generative nature suggests an entirely new form of artistic expression.</span></span></p><p id="viewer-274p6"><span><span>Casey Reas‚Äô <em>Infinite Command Team</em> investigates the relationship between particles that are encoded to construct images, and the code that forges those particles. </span></span></p><p id="viewer-c3cum"><span><span>Using pixelation of different weights and sizes, the piece creates a digital mosaic of television signals that become abstract and collage-like, reminiscent of TV channel-surfing. The piece is a celebration of art and technology that showcases the potential of combining digital fragments into a holistic piece of work. </span></span></p><p id="viewer-fhi88"><span><span>One of the most exciting aspects of creative coding is that it‚Äôs so readily available. Regardless of where you go in the world, there will always be code present guiding new innovations or digital platforms. </span></span></p><p id="viewer-8344v"><span><span>Creative coder Zach Lieberman takes advantage of how constantly present code is in our lives by using Google Maps to create art. In his proj</span>ect <a href="https://lines.chromeexperiments.com/" target="_blank" rel="noopener"><em><u>Land Lines</u></em></a>, Lieberm<span>an uses machine learning, optimized algorithms, and card power to harness images from Google Maps and match them with viewers‚Äô drawings. </span></span></p><p id="viewer-ab3mh"><span><span>Lieberman asks his viewers to draw shapes and lines on the screen, which in turn are converted into real spaces on earth that resemble the line they drew. </span></span></p><div id="viewer-6292q"><a href="https://lines.chromeexperiments.com/" target="_blank" rel="noopener"><div data-hook="imageViewer"><div role="img" aria-label="Land Lines by Zach Lieberman website screenshot"><p><img data-pin-url="https://www.editorx.com/shaping-design/article/creative-coding" data-pin-media="https://static.wixstatic.com/media/5e5a34_37a32651df7f41128188147e18c73b6c~mv2.png/v1/fit/w_1000%2Ch_715%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/5e5a34_37a32651df7f41128188147e18c73b6c~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png" alt="Land Lines by Zach Lieberman website screenshot"></p></div></div></a></div><p id="viewer-8vtqk"><span><span>Shelly Knotts takes creative coding to an entirely new plane in her live-coding pop band, ALGOBABEZ. Based in the UK, Shelly collaborates with other musicians and programmers in her pseudo-improvised live-coded music performances. Her coded music has been played to international audiences and explores themes of data, music, networks, and code.</span></span></p><p id="viewer-5b9e7"><span><span>Created by the company Adrien M &amp; Claire B, <em>XYZT</em> explores the intersection of mathematics and imaginary landscapes. </span></span></p><p id="viewer-bstnp"><span><span>Leveraging technology, programming, and lighting design, <em>XYZT</em> allows visitors to explore the four primary planes of existence: horizontal (the X axis), vertical (Y), depth (Z), and time (T). The exhibit allows for unparalleled interactivity across each of the planes, responding to visitors‚Äô motion and creating new visuals in real time. </span></span></p><p id="viewer-3jqso"><span><span>In his creative coding work <em>Technicontrol</em>, Bradley Munkowitz, also known as GMUNK in the art community, investigates the ways in which robotics, code and screen content can result in a choreographed piece of work. </span></span></p><p id="viewer-b6arv"><span><span>Rather than using typical projection-mapped canvases, he pushed for LED-screen-wielding robots and a motion-controlled camera. The end result is a whimsical, technology-driven video piece with a truly marvelous storyline tracing the steps of a television abduction.</span></span></p><p id="viewer-178s8"><span><a href="https://github.com/CreativeInquiry/PEmbroider" target="_blank" rel="noopener"><em><u>PEmbroider</u></em></a> is a<span>n open-source computational embroidery library. The goal of the creative coding library is to empower artists and craftspeople to make generative embroidery work for free. </span></span></p><p id="viewer-2ua6k"><span><span>Usually, tools such as this would be costly, and oftentimes are inaccessible to most artists or hobbyists. By creating an open-source repository, PEmbroider allows anyone to forge new, generative embroidery work through code. </span></span></p><div id="viewer-ecl5u"><a href="https://github.com/CreativeInquiry/PEmbroider" target="_blank" rel="noopener"><div data-hook="imageViewer"><div role="img" aria-label="PEmbroider creative coding website screenshot"><p><img data-pin-url="https://www.editorx.com/shaping-design/article/creative-coding" data-pin-media="https://static.wixstatic.com/media/5e5a34_20ee1567d5a340ab973279c47312232e~mv2.png/v1/fit/w_1000%2Ch_661%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/5e5a34_20ee1567d5a340ab973279c47312232e~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png" alt="PEmbroider creative coding website screenshot"></p></div></div></a></div><p id="viewer-18rug"><span><span>Memo Akten is an artist and researcher who examines the nature of vision and perception through computational creativity and artificial intelligence. In his series of works, <em>Learning To See</em>, Akten has developed an artificial neural network to view and make sense of the world around us. </span></span></p><p id="viewer-bnqsf"><span><span>By comparing everyday objects with their interpretations through the eyes of neural networks, Memo Akten is able to digitally emulate the way we humans observe the world and make sense of objects.</span></span></p><p id="viewer-1q52f"><span><span>As he states, ‚Äúit can only see through the filter of what it already knows. Just like us. Because we too, see things not as they are, but as we are.‚Äù</span></span></p></div></div></div></div></article></div></div>]]>
            </description>
            <link>https://www.editorx.com/shaping-design/article/creative-coding</link>
            <guid isPermaLink="false">hacker-news-small-sites-25453252</guid>
            <pubDate>Thu, 17 Dec 2020 06:44:44 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[React's UseRef Deep Dive]]>
            </title>
            <description>
<![CDATA[
Score 51 | Comments 43 (<a href="https://news.ycombinator.com/item?id=25452146">thread link</a>) | @giovannibenussi
<br/>
December 16, 2020 | https://www.giovannibenussi.com/blog/a-complete-guide-to-useref/?id=1 | <a href="https://web.archive.org/web/*/https://www.giovannibenussi.com/blog/a-complete-guide-to-useref/?id=1">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><article itemscope="" itemtype="http://schema.org/Article"><header></header><p><code>useRef</code> allows you to keep a mutable value within a component, similar to <code>useState</code> or instance variables on a class, without triggering re-renders.</p><p>For example, this component stores the number of clicks for a button:</p><div data-language="jsx"><pre><code><span>function</span> <span>RefButton</span> <span>(</span><span>)</span> <span>{</span>
  <span>const</span> clicks <span>=</span> <span>useRef</span><span>(</span><span>0</span><span>)</span>

  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span>button</span> <span>onClick</span><span><span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>(</span>clicks<span>.</span>current <span>+=</span> <span>1</span><span>)</span><span>}</span></span><span>&gt;</span></span><span>
      Clicks: </span><span>{</span>clicks<span>.</span>current<span>}</span><span>
    </span><span><span><span>&lt;/</span>button</span><span>&gt;</span></span>
  <span>)</span>
<span>}</span></code></pre></div><p>This is how this component looks like (I added a re-render button so you can
actually test it out üòÑ):</p><div><h2>Interactive Example</h2><p>The example below is completely interactive, try clicking the "Clicks" button and then click on "Re-render".</p></div><p>As you can see, if you click the "Clicks" button it doesn't do anything. However, after click on "Re-render", it gets updated with the number of clicks we did previously.</p><h2>Difference with a variable</h2><p>You might wonder why not just use a simple variable as the example below:</p><div data-language="jsx"><pre><code><span>let</span> clicks <span>=</span> <span>0</span><span>;</span>

<span>function</span> <span>OutsideVariableButton</span><span>(</span><span>)</span> <span>{</span>
  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span>button</span> <span>onClick</span><span><span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>(</span>clicks <span>+=</span> <span>1</span><span>)</span><span>}</span></span><span>&gt;</span></span><span>
      Clicks: </span><span>{</span>clicks<span>}</span><span>
    </span><span><span><span>&lt;/</span>button</span><span>&gt;</span></span>
  <span>)</span>
<span>}</span></code></pre></div><p>And here's an interactive example for it:</p><div><h2>Interactive Example</h2><p><strong>Type</strong><strong>Result</strong><span>outside variable</span></p></div><p>The button works the same way that our previous example. However, the problem arises when you have multiple instances of the same component like the example below. Try clicking just one of the buttons and then click on re-render to see the result.</p><div><h2>Interactive Example</h2><p><strong>Type</strong><strong>Result</strong><span>outside variable</span><span>outside variable</span><span>outside variable</span></p></div><p>As you were able to see, the clicks are not isolated. In fact, all the examples
from this article uses the same button component, so if you click the button
from the first example and then click on "re-render" on the second example, the count it is gonna be
incremented! What a bug üêõ.</p><p>On the other hand, <code>useRef</code> values are completely isolated between components:</p><div><h2>Interactive Example</h2><p><strong>Type</strong><strong>Result</strong><span>ref</span><span>ref</span><span>ref</span></p></div><h2>Difference with&nbsp;useState</h2><blockquote><p>The main difference between useState and useRef, is that useState triggers a
re-render and useRef doesn't.</p></blockquote><p>In the following example I added two buttons: one that updates its count with <code>useRef</code> and the other one with <code>useState</code>. I added some labels so you can identify them easily.</p><div><h2>Interactive Example</h2><p><strong>Type</strong><strong>Result</strong><span>state</span><span>ref</span></p></div><p>You'll notice that clicking on the button with <code>useRef</code> doesn't trigger a re-render and thus, the view isn't updated. On the other side, when you click on the button that uses <code>useState</code>, it will update its clicks count immediately.</p><p>To perform imperative actions on DOM nodes, React provides a way to get a
reference to them via refs. All you have to do is to assign a <code>ref</code> property to
a node with a ref object like this:</p><div data-language="jsx"><pre><code><span>function</span> <span>CustomInput</span><span>(</span><span>)</span> <span>{</span>
  <span>const</span> inputRef <span>=</span> <span>useRef</span><span>(</span><span>)</span>

  <span>return</span> <span><span><span>&lt;</span>input</span> <span>ref</span><span><span>=</span><span>{</span>inputRef<span>}</span></span> <span>/&gt;</span></span>
<span>}</span></code></pre></div><p>The way to get a DOM reference using refs works (informally üòÖ) as follows:</p><div><p><span>Today</span></p><div><p>React</p><p>Hey, what's up?<span>12:00</span></p></div><div><p>Could you give me a reference to this dom node?<span>12:00<svg style="color:#34B7F1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg><svg style="color:#34B7F1;margin-left:-12px" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></span></p></div><div><p>React</p><p>Sure, I assigned it to the 'current' property of your ref.<span>12:00</span></p></div></div><p>On the first render, <code>inputRef</code>'s value will be <code>{ current: null }</code> and in the
following renders it will have its <code>current</code> property assigned to the specified DOM
node:</p><p>However, if you only reference <code>inputRef</code> inside <code>useEffect</code> then it'll always
reference the DOM node so you don't need to worry about it being undefined.</p><p>Let's update our example to get an idea of how this works:</p><div data-language="jsx"><pre><code><span>function</span> <span>AttachingToDomExample</span><span>(</span><span>)</span> <span>{</span>
  <span>const</span> inputRef <span>=</span> <span>useRef</span><span>(</span><span>)</span>

  console<span>.</span><span>log</span><span>(</span><span>"Render inputRef value:"</span><span>,</span> inputRef<span>)</span>

  <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> console<span>.</span><span>log</span><span>(</span><span>"useEffect inputRef value:"</span><span>,</span> inputRef<span>)</span><span>)</span>

  <span>return</span> <span><span><span>&lt;</span>input</span> <span>ref</span><span><span>=</span><span>{</span>inputRef<span>}</span></span> <span>/&gt;</span></span>
<span>}</span></code></pre></div><p>Here's the console output when rendering this component:</p><table><thead><tr><th>Render</th><th>Location</th><th>Value</th></tr></thead><tbody><tr><td>1</td><td>Render</td><td>{ current: undefined }</td></tr><tr><td></td><td>useEffect</td><td>{ current: &lt;input /<!-- -->&gt;<!-- --> }</td></tr><tr><td>2</td><td>Render</td><td>{ current: &lt;input /<!-- -->&gt;<!-- --> }</td></tr><tr><td></td><td>useEffect</td><td>{ current: &lt;input /<!-- -->&gt;<!-- --> }</td></tr><tr><td>3</td><td>Render</td><td>{ current: &lt;input /<!-- -->&gt;<!-- --> }</td></tr><tr><td></td><td>useEffect</td><td>{ current: &lt;input /<!-- -->&gt;<!-- --> }</td></tr></tbody></table><p>As you can see, if you access the <code>inputRef</code> inside <code>useEffect</code> then you don't
need to worry about it being <code>undefined</code> because React will assign it
automatically for you.</p><p>Let's start with a simple real-world application for refs: <code>usePrevious</code>. This
hook stores the previous value for a given state variable.
<a href="https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state" target="_blank" rel="nofollow">It is even referenced on React's docs</a> as a way to "get the previous props or state". Let's see it in
action first:</p><div data-language="jsx"><pre><code><span>function</span> <span>UsePreviousExample</span><span>(</span><span>)</span> <span>{</span>
  <span>const</span> <span>[</span>clicks<span>,</span> setClicks<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>0</span><span>)</span>
  
  <span>const</span> previousClicks <span>=</span> <span>usePrevious</span><span>(</span>clicks<span>)</span>

  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span>div</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>button</span> <span>onClick</span><span><span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>setClicks</span><span>(</span>clicks <span>+</span> <span>1</span><span>)</span><span>}</span></span><span>&gt;</span></span><span>
        Clicks: </span><span>{</span>clicks<span>}</span><span> - Before: </span><span>{</span>previousClicks<span>}</span><span>
      </span><span><span><span>&lt;/</span>button</span><span>&gt;</span></span><span>
    </span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span>
  <span>)</span>
<span>}</span></code></pre></div><p>Here's the output so you can play with it:</p><p>You can notice that the <code>previousClicks</code> variable stores the value for the previous render
for a given variable. Here's its implementation:</p><div data-language="jsx"><pre><code><span>function</span> <span>usePrevious</span><span>(</span><span>value</span><span>)</span> <span>{</span>
  <span>const</span> ref <span>=</span> <span>useRef</span><span>(</span><span>)</span>
  <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
    ref<span>.</span>current <span>=</span> value
  <span>}</span><span>)</span>
  <span>return</span> ref<span>.</span>current
<span>}</span></code></pre></div><p>Let's analyze how it works.</p><p>Let's simulate what happens on the first render. We can remove the call to
<code>useEffect</code> since it doesn't affect the return value on the first render:</p><div data-language="jsx"><pre><code>
<span>function</span> <span>usePrevious</span><span>(</span><span>value</span><span>)</span> <span>{</span>
  <span>const</span> ref <span>=</span> <span>useRef</span><span>(</span><span>)</span>
  <span>return</span> ref<span>.</span>current
<span>}</span></code></pre></div><p>On the first render it is called with a value of <code>0</code>:</p><div data-language="jsx"><pre><code>
<span>const</span> previousClicks <span>=</span> <span>usePrevious</span><span>(</span><span>0</span><span>)</span></code></pre></div><p>In this case, <code>usePrevious</code> will return <code>undefined</code>:</p><div data-language="jsx"><pre><code>
<span>function</span> <span>usePrevious</span><span>(</span><span>value</span><span>)</span> <span>{</span>
  <span>const</span> ref <span>=</span> <span>useRef</span><span>(</span><span>)</span>
  <span>return</span> ref<span>.</span>current 
<span>}</span></code></pre></div><p>After increase the value for count, here's how the <code>usePrevious</code> call will look:</p><div data-language="jsx"><pre><code>
<span>const</span> previousClicks <span>=</span> <span>usePrevious</span><span>(</span><span>1</span><span>)</span></code></pre></div><p>Since <code>usePrevious</code> is called again, its effect needs to run:</p><div data-language="jsx"><pre><code><span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  ref<span>.</span>current <span>=</span> <span>0</span>
<span>}</span><span>)</span></code></pre></div><p>After this, the <code>usePrevious</code> function is called again:</p><div data-language="jsx"><pre><code>
<span>function</span> <span>usePrevious</span><span>(</span><span>value</span><span>)</span> <span>{</span>
  <span>const</span> ref <span>=</span> <span>useRef</span><span>(</span><span>)</span>
  <span>return</span> ref<span>.</span>current 
<span>}</span></code></pre></div><p>And so on. Here's the value for each render for both variables:</p><table><thead><tr><th>Render</th><th>clicks</th><th>previousClicks</th></tr></thead><tbody><tr><td>1</td><td>0</td><td>undefined</td></tr><tr><td>2</td><td>1</td><td>0</td></tr><tr><td>3</td><td>2</td><td>1</td></tr><tr><td>4</td><td>3</td><td>2</td></tr></tbody></table><p>Callback Refs are a different way to set refs. It gives you a fine-grain control
over when refs are attached and detached because you provide a function instead
of a ref variable. This function gets called every time the component mounts and
unmounts.</p><p><a href="https://codesandbox.io/s/callback-ref-example-lqe8w?file=/src/App.js" target="_blank" rel="nofollow">Here's an example</a> that shows/hides an emoji every time you click its button.
The important thing here is the <code>ref</code> prop that we added. We use a function to log
the provided ref:</p><div data-language="jsx"><pre><code><span>const</span> <span>callback</span> <span>=</span> <span>(</span><span>ref</span><span>)</span> <span>=&gt;</span> console<span>.</span><span>log</span><span>(</span><span>"callback:"</span><span>,</span> ref<span>)</span>

<span>function</span> <span>App</span> <span>(</span><span>)</span> <span>{</span>
  <span>const</span> <span>[</span>show<span>,</span> setShow<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>true</span><span>)</span><span>;</span>

  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span>div</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>button</span> <span>onClick</span><span><span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>setShow</span><span>(</span><span>!</span>show<span>)</span><span>}</span></span><span>&gt;</span></span><span>
        </span><span>{</span>show <span>?</span> <span>"Hide"</span> <span>:</span> <span>"Show"</span><span>}</span><span>
      </span><span><span><span>&lt;/</span>button</span><span>&gt;</span></span><span>
      </span><span>{</span>show <span>&amp;&amp;</span> <span><span><span>&lt;</span>span</span> <span>ref</span><span><span>=</span><span>{</span>callback<span>}</span></span><span>&gt;</span></span><span>üëã</span><span><span><span>&lt;/</span>span</span><span>&gt;</span></span><span>}</span><span>
    </span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span>
  <span>)</span><span>;</span>
<span>}</span></code></pre></div><p>Here's an interactive version of the previous code (you can check the output in
the console to see that I'm not lying üôÉ):</p><p><em>Note: If you use callback refs as inline functions, it will be called
twice: one with <code>null</code> and another one with the DOM element.
This is because React needs to clear the previous ref every time the function is
created. A workaround for this is to use a class method.</em></p><div><h2>Warning</h2><p><a href="https://reactjs.org/docs/refs-and-the-dom.html#legacy-api-string-refs" target="_blank" rel="nofollow">String refs</a> are a legacy feature and they are likely to be removed in future React versions.</p></div><p>The way it works is that you provide a string as a ref value like <code>ref="exampleRef"</code> and it automatically gets assigned to <code>this.refs</code>.</p><p><em>Note: String refs can only be used with class components.</em></p><p>Here's an usage example:</p><div data-language="jsx"><pre><code><span>export</span> <span>default</span> <span>class</span> <span>App</span> <span>extends</span> <span>React<span>.</span>Component</span> <span>{</span>
  <span>render</span><span>(</span><span>)</span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>this</span><span>.</span>refs<span>)</span><span>;</span>

    <span>return</span> <span>(</span>
      <span><span><span>&lt;</span>div</span> <span>ref</span><span><span>=</span><span>"</span>exampleRef<span>"</span></span><span>&gt;</span></span><span>
        </span><span><span><span>&lt;</span>button</span> <span>onClick</span><span><span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> dummy<span>:</span> <span>0</span> <span>}</span><span>)</span><span>}</span></span><span>&gt;</span></span><span>Re-render</span><span><span><span>&lt;/</span>button</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span>
    <span>)</span><span>;</span>
  <span>}</span>
<span>}</span></code></pre></div><p>Here's the value for <code>this.refs</code> across renders:</p><table><thead><tr><th>Render</th><th>this.refs</th></tr></thead><tbody><tr><td>1</td><td><code>{}</code></td></tr><tr><td>2</td><td><code>{ exampleRef: &lt;div&gt;...&lt;/div&gt; }</code></td></tr><tr><td>3</td><td><code>{ exampleRef: &lt;div&gt;...&lt;/div&gt; }</code></td></tr><tr><td>4</td><td><code>{ exampleRef: &lt;div&gt;...&lt;/div&gt; }</code></td></tr></tbody></table><p>As you can see, on the first render <code>this.refs.exampleRef</code> will be undefined and
on the following renders it will point out to the specified DOM node.</p><p>We saw what <code>useRef</code> is, how it differentiates with a plain old variable and
state variables, and we saw real world examples that uses it. I hope that most
of the content makes sense to you!</p><p>I'd love to hear your feedback. You can <a href="https://twitter.com/giovannibenussi" target="_blank" rel="nofollow">reach out to me on
Twitter</a> at any time :-)</p><hr></article></div></div>]]>
            </description>
            <link>https://www.giovannibenussi.com/blog/a-complete-guide-to-useref/?id=1</link>
            <guid isPermaLink="false">hacker-news-small-sites-25452146</guid>
            <pubDate>Thu, 17 Dec 2020 03:36:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Passing of a Great Mind (1957)]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25451727">thread link</a>) | @unclefuzzy
<br/>
December 16, 2020 | https://qualiacomputing.com/2018/06/21/john-von-neumann/ | <a href="https://web.archive.org/web/*/https://qualiacomputing.com/2018/06/21/john-von-neumann/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		<h2>Passing of a Great Mind</h2>
<h3>John von Neumann, a Brilliant, Jovial Mathematician, was a Prodigious Servant of Science and his Country</h3>
<p><em>by Clary Blair Jr</em>. ‚Äì&nbsp;<em>Life Magazine</em>&nbsp;(February 25th, 1957)</p>
<p>The world lost one of its greatest scientists when Professor John von Neumann, 54, died this month of cancer in Washington, D.C. His death, like his life‚Äôs work, passed almost unnoticed by the public. But scientists throughout the free world regarded it as a tragic loss. They knew that Von Neumann‚Äôs brilliant mind had not only advanced his own special field, pure mathematics, but had also helped put the West in an immeasurably stronger position in the nuclear arms race. Before he was 30 he had established himself as one of the world‚Äôs foremost mathematicians. In World War II he was the principal discoverer of the implosion method, the secret of the atomic bomb.</p>
<p>The government officials and scientists who attended the requiem mass at the Walter Reed Hospital chapel last week were there not merely in recognition of his vast contributions to science, but also to pay personal tribute to a warm and delightful personality and a selfless servant of his country.</p>
<p>For more than a year Von Neumann had known he was going to die. But until the illness was far advanced he continued to devote himself to serving the government as a member of the Atomic Energy Commission, to which he was appointed in 1954. A telephone by his bed connected directly with his EAC office. On several occasions he was taken downtown in a limousine to attend commission meetings in a wheelchair. At Walter Reed, where he was moved early last spring, an Air Force officer, Lieut. Colonel Vincent Ford, worked full time assisting him. Eight airmen, all cleared for top secret material, were assigned to help on a 24-hour basis. His work for the Air Force and other government departments continued. Cabinet members and military officials continually came for his advice, and on one occasion Secretary of Defence Charles Wilson, Air Force Secretary Donald Quarles and most of the top Air Force brass gathered in Von Neumann‚Äôs suite to consult his judgement while there was still time. So relentlessly did Von Neumann pursue his official duties that he risked neglecting the treatise which was to form the capstone of his work on the scientific specialty, computing machines, to which he had devoted many recent years.</p>
<p><img data-attachment-id="26616" data-permalink="https://qualiacomputing.com/2018/06/21/john-von-neumann/von_neumann_1_1/" data-orig-file="https://i2.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_1_1.png?fit=1316%2C920&amp;ssl=1" data-orig-size="1316,920" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="von_neumann_1_1" data-image-description="" data-medium-file="https://i2.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_1_1.png?fit=300%2C210&amp;ssl=1" data-large-file="https://i2.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_1_1.png?fit=1000%2C699&amp;ssl=1" loading="lazy" src="https://i2.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_1_1.png?resize=1000%2C699&amp;ssl=1" alt="von_neumann_1_1" width="1000" height="699" data-recalc-dims="1" data-lazy-src="https://i2.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_1_1.png?resize=1000%2C699&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>
<p>His fellow scientists, however, did not need any further evidence of Von Neumann‚Äôs rank as a scientist ‚Äì or his assured place in history. They knew that during World War II at Los Alamos Von Neumann‚Äôs development of the idea of implosion speeded up the making of the atomic bomb by at least a full year. His later work with electronic computers quickened U.S. development of the H-bomb by months. The chief designer of the H-bomb, Edward Teller, once said with wry humor that Von Neumann was ‚Äúone of those rare mathematicians who could descend to the level of the physicist.‚Äù Many theoretical physicists admit that they learned more from Von Neumann in methods of scientific thinking than from any of their colleagues. Hans Bethe, who was director of the theoretical physics division at Los Alamos, says, ‚ÄúI have sometimes wondered whether a brain like Von Neumann‚Äôs does not indicate a species superior to that of man.‚Äù</p>
<p><img data-attachment-id="26617" data-permalink="https://qualiacomputing.com/2018/06/21/john-von-neumann/von_neumann_2/" data-orig-file="https://i2.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_2.png?fit=226%2C304&amp;ssl=1" data-orig-size="226,304" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="von_neumann_2" data-image-description="" data-medium-file="https://i2.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_2.png?fit=223%2C300&amp;ssl=1" data-large-file="https://i2.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_2.png?fit=226%2C304&amp;ssl=1" loading="lazy" src="https://i2.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_2.png?resize=226%2C304&amp;ssl=1" alt="von_neumann_2" width="226" height="304" data-recalc-dims="1" data-lazy-src="https://i2.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_2.png?resize=226%2C304&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>
<p>The foremost authority on computing machines in the U.S., Von Neumann was more than anyone else responsible for the increased use of the electronic ‚Äúbrains‚Äù in government and industry. The machine he called MANIAC (mathematical analyzer, numerical integrator and computer), which he built at the Institute for Advanced Study in Princeton, N.J., was the prototype for most of the advanced calculating machines now in use. Another machine, NORC, which he built for the Navy, can deliver a full day‚Äôs weather prediction in a few minutes. The principal adviser to the U.S. Air Force on nuclear weapons, Von Neumann was the most influential scientific force behind the U.S. decision to embark on accelerated production of intercontinental ballistic missiles. His ‚Äútheory of games,‚Äù outlined in a book which he published in 1944 in collaboration with Economist Oskar Morgenstern, opened up an entirely new branch of mathematics. Analyzing the mathematical probabilities behind games of chance, Von Neumann went on to formulate a mathematical approach to such widespread fields as economics, sociology and even military strategy. His contributions to the quantum theory, the theory which explains the emission and absorption of energy in atoms and the one on which all atomic and nuclear physics are based, were set forth in a work entitled <em>Mathematical Foundations of Quantum Mechanics</em>&nbsp;which he wrote at the age of 23. It is today one of the cornerstones of this highly specialized branch of mathematical thought.</p>
<p>For Von Neumann the road to success was a many-laned highway with little traffic and no speed limit. He was born in 1903 in Budapest and was of the same generation of <a href="http://slatestarcodex.com/2017/05/26/the-atomic-bomb-considered-as-hungarian-high-school-science-fair-project/">Hungarian physicists</a> as Edward Teller, Leo Szilard and Eugene Wigner, all of whom later worked on atomic energy development for the U.S.</p>
<p>The eldest of three sons of a well-to-do Jewish financier who had been decorated by the Emperor Franz Josef, John von Neumann grew up in a society which placed a premium on intellectual achievement. At the age of 6 he was able to divide two eight-digit numbers in his head. By the age of 8 he had mastered college calculus and as a trick could memorize on sight a column in a telephone book and repeat back the names, addresses and numbers. History was only a ‚Äúhobby,‚Äù but by the outbreak of World War I, when he was 10, his photographic mind had absorbed most of the contents of the 46-volume works edited by the German historian Oncken with a sophistication that startled his elders.</p>
<p>Despite his obvious technical ability, as a young man Von Neumann wanted to follow his father‚Äôs financial career, but he was soon dissuaded. Under a kind of supertutor, a first-rank mathematician at the University of Budapest named Leopold Fejer, Von Neumann was steered into the academic world. At 21 he received two degrees ‚Äì one in chemical engineering at Zurich and a PhD in mathematics from the University of Budapest. The following year, 1926, as Admiral Horthy‚Äôs rightist regime had been repressing Hungarian Jews, he moved to G√∂ttingen, Germany, then the mathematical center of the world. It was there that he published his major work on quantum mechanics.</p>
<h4>The young professor</h4>
<p>His fame now spreading, Von Neumann at 23 qualified as a <em>Privatdozent</em>&nbsp;(lecturer) at the University of Berlin, one of the youngest in the school‚Äôs history. But the Nazis had already begun their march to power. In 1929 Von Neumann accepted a visiting lectureship at Princeton University and in 1930, at the age of 26, he took a job there as professor of mathematical physics ‚Äì after a quick trip to Budapest to marry a vivacious 18-year-old named Mariette Kovesi. Three years later, when the Institute for Advanced Study was founded at Princeton, Von Neumann was appointed ‚Äì as was Albert Einstein ‚Äì to be one of its first full professors. ‚ÄúHe was so young,‚Äù a member of the institute recalls, ‚Äúthat most people who saw him in the halls mistook him for a graduate student.‚Äù</p>
<p><img data-attachment-id="26618" data-permalink="https://qualiacomputing.com/2018/06/21/john-von-neumann/von_neumann_3/" data-orig-file="https://i0.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_3.png?fit=1210%2C1028&amp;ssl=1" data-orig-size="1210,1028" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="von_neumann_3" data-image-description="" data-medium-file="https://i0.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_3.png?fit=300%2C255&amp;ssl=1" data-large-file="https://i0.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_3.png?fit=1000%2C850&amp;ssl=1" loading="lazy" src="https://i0.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_3.png?resize=1000%2C850&amp;ssl=1" alt="von_neumann_3" width="1000" height="850" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/qualiacomputing.com/wp-content/uploads/2018/06/von_neumann_3.png?resize=1000%2C850&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>
<p>Although they worked near each other in the same building, Einstein and Von Neumann were not intimate, and because their approach to scientific matters was different they never formally collaborated. A member of the institute who worked side by side with both men in the early days recalls, ‚ÄúEinstein‚Äôs mind was slow and contemplative. He would think about something for years. Johnny‚Äôs mind was just the opposite. It was lightning quick ‚Äì stunningly fast. If you gave him a problem he either solved it right away or not at all. If he had to think about it a long time and it bored him, hist interest would begin to wander. And Johnny‚Äôs mind would not shine unless whatever he was working on had his undivided attention.‚Äù But the problems he did care about, such as his ‚Äútheory of games,‚Äù absorbed him for much longer periods.</p>
<h4>‚ÄòProof by erasure‚Äô</h4>
<p>Partly because of this quicksilver quality Von Neumann was not an outstanding teacher to many of his students. But for the advanced students who could ascend to his level he was inspirational. His lectures were brilliant, although at times difficult to follow because of his way of erasing and rewriting dozens of formulae on the blackboard. In explaining mathematical problems Von Neumann would write his equations hurriedly, starting at the top of the blackboard and working down. When he reached the bottom, if the problem was unfinished, he would erase the top equations and start down again. By the time he had done this two or three times most other mathematicians would find themselves unable to keep track. On one such occasion a colleague at Princeton waited until Von Neumann had finished and said, ‚ÄúI see. Proof by erasure.‚Äù</p>
<p>Von Neumann himself was perpetually interested in many fields unrelated to science. Several years ago his wife gave him a 21-volume Cambridge History set, and she is sure he memorized every name and fact in the books. ‚ÄúHe is a major expert on all the royal family trees in Europe,‚Äù a friend said once. ‚ÄúHe can tell you who fell in love with whom, and why, what obscure cousin this or that czar married, how many illegitimate children he had and so on.‚Äù One night during the Princeton days a world-famous expert on Byzantine history came to the Von Neumann house for a party. ‚ÄúJohnny and the professor got into a corner and began discussing some obscure facet,‚Äù recalls a friend who was there. ‚ÄúThen an argument arose over a date. Johnny insisted it was this, the professor that. So Johnny said, ‚ÄòLet‚Äôs get the book.‚Äô They looked it up and Johnny was right. A few weeks later the professor was invited to the Von Neumann house again. He called Mrs. von Neumann and said jokingly, ‚ÄòI‚Äôll come if Johnny promises not to discuss Byzantine history. ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://qualiacomputing.com/2018/06/21/john-von-neumann/">https://qualiacomputing.com/2018/06/21/john-von-neumann/</a></em></p>]]>
            </description>
            <link>https://qualiacomputing.com/2018/06/21/john-von-neumann/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25451727</guid>
            <pubDate>Thu, 17 Dec 2020 02:37:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Sequoia PGP 1.0 Released: The Seedling Is a Sapling]]>
            </title>
            <description>
<![CDATA[
Score 146 | Comments 55 (<a href="https://news.ycombinator.com/item?id=25448533">thread link</a>) | @dannyobrien
<br/>
December 16, 2020 | https://sequoia-pgp.org/blog/2020/12/16/202012-1.0/ | <a href="https://web.archive.org/web/*/https://sequoia-pgp.org/blog/2020/12/16/202012-1.0/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="post-content">
                          <p>Version 1.0.  It‚Äôs here.  After three and a half years of development,
we are happy to announce the release of version 1.0 of Sequoia!</p>
<p>The release includes the low-level crate <a href="https://crates.io/crates/sequoia-openpgp"><code>sequoia-openpgp</code></a>, and a
program to verify detached signatures geared towards software
distribution systems called <a href="https://crates.io/crates/sequoia-sqv"><code>sqv</code></a>.</p>
<p>We will support this API with security updates for at least one year.
In 9 months, we will announce whether we will extend this commitment.
The two main criteria will be our financial situation (please
<a href="https://pep.foundation/support-pep/index.html">donate</a>, or sponsor a developer or two), and the number of users.</p>

<p>We actually <a href="https://mastodon.social/@sequoiapgp/103364362621954545">almost released</a> version 1.0 about a year ago.  All of the
features that we had planned for version 1.0 were implemented, we had
good test coverage, and we even had a few users.  But, we decided to
wait.  We decided to wait not because we thought of another feature,
or because we became aware of a significant bug, but because <a href="https://gitlab.com/sequoia-pgp/sequoia/-/issues/465">we</a>
<a href="https://gitlab.com/sequoia-pgp/sequoia/-/issues/466">decided</a> <a href="https://gitlab.com/sequoia-pgp/sequoia/-/issues/467">to</a> <a href="https://gitlab.com/sequoia-pgp/sequoia/-/issues/468">take</a> <a href="https://gitlab.com/sequoia-pgp/sequoia/-/issues/469">some</a> <a href="https://gitlab.com/sequoia-pgp/sequoia/-/issues/470">time</a> <a href="https://gitlab.com/sequoia-pgp/sequoia/-/issues/471">to</a> <a href="https://gitlab.com/sequoia-pgp/sequoia/-/issues/472">improve</a>
<a href="https://gitlab.com/sequoia-pgp/sequoia/-/issues/473">our</a> <a href="https://gitlab.com/sequoia-pgp/sequoia/-/issues/474">documentation</a>.</p>
<p>Our goal was to make sure that every module had a helpful
introduction, and all public methods had a useful description, a link
to <a href="https://tools.ietf.org/html/rfc4880">the standard</a>, when appropriate, and a meaningful example.
Dividing the task between five people, we figured it would delay the
release by a month, perhaps two.  In the end, well, it took nearly a
year, and we had to scale our ambitions back a bit.  Nevertheless,
we‚Äôre quite happy with <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/cert/index.html">the</a> <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/parse/stream/trait.DecryptionHelper.html">result</a>.</p>
<p>First, the documentation is much better.  It‚Äôs of course hard to
quantify its quality.  But, we can distill a few numbers.  When we
started our documentation effort shortly after we released version
0.14, the Sequoia library had just over 11k lines of comments
including 53 documentation tests, and 37 kSLOC including 12 kSLOC of
unit tests.  The 1.0 release has over 33k lines of comments (190%
more) including 464 documentation tests (780% more), and 44 kSLOC (21%
or 7.5 kSLOC more) including 8k SLOC of additional unit tests.</p>
<p>Second, in the process of documenting our public API and writing
examples, we discovered many minor annoyances, some inconsistencies,
and more than a few bugs.  Since we hadn‚Äôt yet commited to a stable
API, we could and did fix them.</p>
<p>Finally, as the rate of change of the API had decreased, more projects
were willing to try out Sequoia.  They provided additional useful
feedback, which we integrated.</p>
<p>All in all, we feel that with version 1.0 we‚Äôve not only checked the
<a href="https://www.tomsguide.com/news/cyberpunk-2077-is-a-disaster-on-ps4-and-xbox-one-and-it-gets-worse">right boxes</a>, but we also have a high-quality API and implementation
that we can be proud of.</p>

<p>Sequoia was started 3.5 years ago by Justus Winter, Kai Michaelis and
me, Neal Walfield.  Prior to working on Sequoia, the three of us had
worked together at <a href="http://www.g10code.de/">g10code</a> on <a href="https://gnupg.org/">GnuPG</a>.  The <a href="https://pep.foundation/">p‚â°p foundation</a> hired
us not only to create a new OpenPGP implementation using a new
architecture and programming language, but to improve the ecosystem
around privacy-preserving tools as a whole.</p>
<p>The Sequoia library is a first step in that direction.  But it is not
our end goal.  Indeed, over the past three years, we‚Äôve helped other
OpenPGP implementations.  We‚Äôve reported bugs that we‚Äôve found (thanks
in particular to our <a href="https://tests.sequoia-pgp.org/">OpenPGP interoperability test suite</a>), and even
contributed some fixes to other OpenPGP implementations.</p>
<p>And, we‚Äôve invested in tooling.  We developed <a href="https://gitlab.com/hagrid-keyserver/hagrid">Hagrid</a>, a new
verifying OpenPGP key server, which powers <a href="https://keys.openpgp.org/">keys.openpgp.org</a> and is
now maintained by Vincent Breitmoser.  We‚Äôve helped <a href="https://openpgp-ca.gitlab.io/openpgp-ca/">OpenPGP CA</a>, a
tool written by Heiko Schaefer to create <em>federated</em> CAs for groups
like activists, lawyers, and journalists, but also companies, who
don‚Äôt want to trust centralized infrastructure whose primary
incentives are monetary.  OpenPGP CA significantly simplifies key
discovery and authentication for unsophisticated OpenPGP users.  We‚Äôve
developed <a href="https://gitlab.com/koverto/koverto">Koverto</a>, an SMTP proxy, which makes it easy to sign and
encrypt mails sent by services that don‚Äôt support OpenPGP out of the
box, like most CMSes.  We developed a tool, <a href="https://gitlab.com/sequoia-pgp/keyring-linter"><code>sq-keyring-linter</code></a>
(<a href="https://packages.debian.org/sid/sq-keyring-linter">Debian</a>), to help users update their OpenPGP Certificates, so that
we can <a href="https://mailarchive.ietf.org/arch/msg/openpgp/Rp-inhYKT8A9H5E34iLTrc9I0gc/">finally get rid of SHA-1</a>.</p>
<p>We‚Äôre thinking big.  We‚Äôre thinking not only about mail encryption or
even encryption in general, but also about integrity and
authentication.  And, we‚Äôre thinking in particular, about <a href="https://en.wikipedia.org/wiki/Public_key_infrastructure">PKI</a>.  If
users can‚Äôt easily find the <strong>right</strong> certificate for a communication
partner, encryption and digital signatures are worthless, and possibly
even dangerous.</p>

<p>In designing Sequoia, we took a library-first approach.  Although we
have a command-line tool, <a href="https://docs.sequoia-pgp.org/sq/index.html"><code>sq</code></a>, which we are not yet releasing, we
intend for the library to always provide a richer, more expressive
interface.  We agree that there is value in process separation, but we
want to avoid the dangerous complexity of <em>safely</em> shelling out to
another program.</p>
<p>The sequoia-openpgp crate (Rust‚Äôs terminology for a library) is a
low-level, policy-free OpenPGP implementation.  Our goal was to
implement all of <a href="https://tools.ietf.org/html/rfc4880">RFC 4880</a>, and provide an API that can be used to
access and modify pretty much everything, but is simultaneously secure
by default.</p>
<p>We understand low-level to mean not only an API that provides getters
and setters, but an API that provides interfaces to parse and
serialize those fields, and can combine them in ways intended by the
standard, and needed by users.  For instance, the <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/struct.Cert.html"><code>Cert</code></a> data
structure encapsulates an OpenPGP certificate (casually referred to as
an OpenPGP key).  It canonicalizes the structure, and makes it easy to
<a href="https://docs.sequoia-pgp.org/sequoia_openpgp/cert/struct.ValidCert.html#method.revocation_status">query its properties</a>.  But, it does so in such a way that it is
still possible for a user to inspect and modify the low-level bits
themselves without reimplementing the rest of the functionality.
Another example is the <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/parse/stream/trait.DecryptionHelper.html"><code>DecryptionHelper</code></a>, which makes it easy to
parse and decrypt an OpenPGP message.</p>
<p>An example of how we make the API safe by default is that it is hard
to accidentally export secret key material.  In Sequoia, you have to
explicitly <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/struct.Cert.html#secret-keys">opt-in to export it</a>.  Similarly, when <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/packet/signature/struct.SignatureBuilder.html">updating a
signature</a>, the creation time, hash algorithm, and issuer are
automatically updated.  This is usually what the user wants, but is
easy to forget, and hard to debug when forgotten.  Critically, it is
easy to opt out when that behavior is not desired.</p>
<p>While developing Sequoia, we spent a lot of time thinking about
extremes and corner cases.  For instance, OpenPGP supports
notarizations (signatures over signatures), but as far as we know no
OpenPGP implementation supports them.  We implemented support for it
anyway, and it improved the ergonomics of the common case.</p>
<h2 id="notable-details">Notable Details</h2>
<p>The devel is in the details.  And while deviloping Sequoia, we paid
attention.  Here are a few noteworthy details:</p>
<p><a href="https://en.wikipedia.org/wiki/SHA-1">SHA-1</a> has been broken since 2005.  And, in 2011 NIST deprecated its
use.  Initially, we decided to simply reject any signature that used
SHA-1.  However, we were recently forced to <a href="https://mailarchive.ietf.org/arch/msg/openpgp/Rp-inhYKT8A9H5E34iLTrc9I0gc/">reevaluate</a> <a href="https://gitlab.com/sequoia-pgp/sequoia/-/issues/595">that
decision</a>: 22% of Debian developers use a certificate that relies on
SHA-1 as do 63% of Arch developers.  Even the Fedora release keys use
SHA-1.</p>
<p>We decided that we couldn‚Äôt simply reenable SHA-1.  After some
consideration, we‚Äôve opted to <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/policy/enum.HashAlgoSecurity.html">permit it</a> in contexts where collision
attacks similar to the one presented in <a href="https://sha-mbles.github.io/">SHA-1 is a Shambles</a> are
harder.  We also use a variant of SHA-1 called <a href="https://gitlab.com/sequoia-pgp/sha1collisiondetection">SHA1CD</a> (SHA-1
Collision Detection), which detects and neutralizes the known attacks
against SHA-1.  Among others, <a href="https://github.blog/2017-03-20-sha-1-collision-detection-on-github-com/">GitHub uses it</a>.  And, we have also
decided to <strong><a href="https://docs.sequoia-pgp.org/sequoia_openpgp/policy/struct.StandardPolicy.html#method.reject_hash_at">start rejecting SHA-1 by default</a> at the beginning of
2023</strong>, i.e., in a bit more than two years.  This will hopefully give
Debian developers and others sufficient time to <a href="https://gitlab.com/sequoia-pgp/keyring-linter">fix</a> or replace their
certificates.</p>
<p>When we create a signature, we include a <a href="https://gitlab.com/sequoia-pgp/sequoia/-/issues/597">salt</a>.  This makes it harder
for an attacker to predict what data a user will sign.  And, it foils
attacks where an attacker needs multiple signatures over the same
message.</p>
<p>Similar to <a href="https://www.undeadly.org/cgi?action=article;sid=20190621081455">OpenSSH</a>, we <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/crypto/mem/struct.Encrypted.html">encrypt secret key material</a> while it is in
memory.  This frustrates side-channel attacks.</p>
<p>Sequoia supports <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/serialize/stream/padding/index.html">padding messages</a> to obfuscate an encrypted
message‚Äôs length.  We include support for the <a href="https://bford.info/pub/sec/purb.pdf">padm√©</a> scheme, but
other schemes can be plugged in.</p>
<p>To allow users to control the policy while still using higher-level
functionality, Sequoia uses a <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/policy/index.html">policy object</a>.  A policy object is
passed to any method that checks something for validity.  For
instance, when a method needs to determine whether a binding signature
should be used, it invokes the policy object‚Äôs <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/policy/trait.Policy.html#method.signature"><code>signature</code> callback</a>.
Our experience suggests that this approach greatly simplifies dealing
with this <a href="https://en.wikipedia.org/wiki/Cross-cutting_concern">cross-cutting concern</a> in a highly flexible manner.</p>
<p>Policy objects can also be embedded in other objects.  For instance, a
<a href="https://docs.sequoia-pgp.org/sequoia_openpgp/cert/struct.ValidCert.html"><code>ValidCert</code></a> encapsulates a <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/struct.Cert.html"><code>Cert</code></a> and a policy object.  This
ensures that the application of the policy is consistent, and hard to
forget to apply.</p>
<p>In Sequoia, we prefer the use of formal grammars rather than ad-hoc
parsing when doing any non-trivial parsing.  For instance, when
verifying the structure of <a href="https://tools.ietf.org/html/rfc4880#section-11.1">OpenPGP Certificates</a> and <a href="https://tools.ietf.org/html/rfc4880#section-11.3">OpenPGP
Messages</a>, we use <a href="https://github.com/lalrpop/lalrpop">LALRPOP</a>, a parser generator, to generate the
parser.</p>
<p>Sequoia implements a streaming API.  If not careful, this can lead to
a consumer processing unauthenticated data, which was exploited by
<a href="https://efail.de/">EFAIL</a>.  To mitigate this type of failure, the <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/parse/stream/trait.DecryptionHelper.html"><code>DecryptionHelper</code></a>
withholds the last <code>O(1)</code> bytes of data, and only releases it if the
message can be authenticated.  This makes it harder for an attacker to
control what is released.  And for short messages, nothing is released
since the whole message is buffered.</p>
<p>We‚Äôve tried to ensure that data structures that may be used in a
side-channel sensitive context use constant time comparisons.</p>
<p>Where possible, we use a device driver-style API so that it is
straightforward to add new backends.  For instance, our <a href="https://docs.sequoia-pgp.org/sequoia_openpgp/crypto/trait.Signer.html"><code>Signer</code></a> and
<a href="https://docs.sequoia-pgp.org/sequoia_openpgp/parse/stream/struct.Decryptor.html"><code>Decryptor</code></a> traits make it easy to implement alternative signing and
decryption backends.  In addition to the in-memory implementations, we
already have implementations that use secret key material managed by
<a href="https://docs.sequoia-pgp.org/sequoia_ipc/gnupg/struct.KeyPair.html">gpg agent</a>.</p>
<p>We tried hard to provide helpful error messages.  This is particularly
difficult ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://sequoia-pgp.org/blog/2020/12/16/202012-1.0/">https://sequoia-pgp.org/blog/2020/12/16/202012-1.0/</a></em></p>]]>
            </description>
            <link>https://sequoia-pgp.org/blog/2020/12/16/202012-1.0/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25448533</guid>
            <pubDate>Wed, 16 Dec 2020 20:57:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[An Old New Adventure]]>
            </title>
            <description>
<![CDATA[
Score 60 | Comments 20 (<a href="https://news.ycombinator.com/item?id=25448248">thread link</a>) | @Ygg2
<br/>
December 16, 2020 | https://raphlinus.github.io/personal/2020/12/16/an-old-new-adventure.html | <a href="https://web.archive.org/web/*/https://raphlinus.github.io/personal/2020/12/16/an-old-new-adventure.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>After two and a half years of being independent, I am returning to Google.</p>

<p>The time off was really valuable. I was still feeling residual effects from burnout on the Android team in late 2015, and also drained by family and personal things that were happening and needed more time and energy. I got that, and return recharged and with some insights that I hope will be useful. I‚Äôll touch on a few of those in this post. Each could probably be its own blog post, but today I want to briefly note the event.</p>

<p>I am now a research software engineer on the Google Fonts team, working on a number of topics in font technology, including font design tools, GPU-accelerated font rendering, and evolution of font file formats to be more efficient and capable.</p>

<h2 id="on-open-source-sustainability">On open source sustainability</h2>

<p>Much has been written on open source sustainability, notably <a href="https://nadiaeghbal.com/">Nadia Eghbal</a>‚Äôs <em>Working in Public.</em> I won‚Äôt speak to open source more broadly (except to note how impressed I am with Blender and Krita), but for the specific task of building an ecosystem for a library, I think there is one model that actually works: being hired by a company that depends on that ecosystem.</p>

<p>To some extent, that‚Äôs an indictment of our capitalist system. In an ideal universe, there would be strong institutions dedicated to the public interest where open source developers could develop, researchers could research, and spend an absolute minimum of time and energy hustling for support. For software, in any case, universities are not that (as demonstrated by <a href="https://blog.cocalc.com/2019/04/12/should-i-resign-from-my-full-professor-job-to-work-fulltime-on-cocalc.html">William Stein‚Äôs experience with Cocalc at University of Washington</a>), otherwise I‚Äôd be quite tempted. In the actual world, working for a company like Google is about as close as you can come.</p>

<p>I remain skeptical of patronage-style platforms such as Patreon or Github Sponsors. I think it‚Äôs possible to make them work, but only for a small number of fortunate people, and even then, the incentives for creating maximum value aren‚Äôt that well aligned with the incentive structure of hustling on social media.</p>

<p>So me (re-)joining Google full time is basically a statement of confidence in this model of being employed to work on open source. Other models can work, and people should definitely find what works for them, but particularly for the projects I‚Äôm interested in, it makes sense.</p>

<h2 id="on-rust">On Rust</h2>

<p>I continue to love Rust, and believe it offers a stronger foundation for building software. I feel like I started my Rust journey in the early ‚Äô90s, when I was working on retrofitting <a href="https://theory.stanford.edu/~aiken/publications/papers/pldi95.pdf">static memory management</a> to ML, using explicit lifetime regions.</p>

<p>Rust adoption is trending up, including at Google. The language is in good shape, but the library ecosystem is still fairly immature, missing a number of critical pieces. Building up that ecosystem is an incredibly rewarding project.</p>

<p>I am particularly excited about Rust for font technology and infrastructure. Today, Python rules on the font design and production side, partly to the connection of typeface designer <a href="https://medium.com/type-thursday/learning-python-makes-you-a-better-designer-an-interview-with-just-van-rossum-8d4758c192d8">Just van Rossum</a> being Guido‚Äôs brother. The flexibility and expressiveness of Python makes it a good fit, but we‚Äôve also gotten to a place where the <em>production</em> of fonts is done in Python, and the <em>consumption</em> is in C++.</p>

<p>Rust lets us build reliable, performant code that can also be deployed in production, and can be the basis of fluidly interactive UI tools. I‚Äôm not the only one who sees this potential; YesLogic is building their next-generation font shaper <a href="https://github.com/yeslogic/allsorts">Allsorts</a> in Rust, for many of the same reasons.</p>

<p>The Google Fonts team has been interested in adopting more Rust for a while, and part of my role is to facilitate that. I‚Äôm really looking forward to it.</p>

<h2 id="on-research">On research</h2>

<p>I have rebranded myself somewhat as a researcher, but that doesn‚Äôt <em>quite</em> capture the whole story either. I have always loved research, and that love sustained the energy to complete my <a href="https://levien.com/phd/phd.html">PhD</a>, but I also love building real things, and actually feel that many of these practical problems are more interesting than many of the abstract topics fashionable in academia. Just as much as writing papers and so on, I‚Äôm trying to build open source software and community around that. There isn‚Äôt really a word for this role, but even without such a word I‚Äôm trying to consciously create it for myself, and am grateful that Google is allowing me to try.</p>

<h2 id="on-the-work">On the work</h2>

<p>This is the most exciting part for me. I have a very long-term interest in 2D graphics, font technology, and UI, and have been doing a bunch of interesting things on all these fronts. I expect to spend most of my time continuing to advance research on all these frontiers.</p>

<p>The scope of these projects is large, and more ambitious than one person could really do. That‚Äôs one reason I‚Äôve been consciously developing an open source community around them. That will continue.</p>

<p>Most of the day-to-day work on <a href="https://github.com/linebender/druid">Druid</a> and <a href="https://github.com/linebender/runebender">Runebender</a> will be done by Colin Rofls, though I very much enjoy getting my elbows in the code too and will be doing some of that.</p>

<p>A major focus will be building out the <a href="https://github.com/linebender/piet-gpu/blob/master/doc/vision.md">piet-gpu vision</a>. I believe a high-performance 2D rendering engine will be a great thing for the Rust ecosystem and with potential for large impact. It feels like good research; whether it goes into production at scale or not, I expect the things we learn from doing it will help inform the next generation of UI technology. That‚Äôs equally true for research into fundamental UI principles, for example the <a href="https://raphlinus.github.io/rust/druid/2020/09/25/principled-reactive-ui.html">Crochet</a> architecture for Druid.</p>

<p>There are also really exciting advances in <a href="https://github.com/linebender/spline">spline</a> technology in the pipeline. I think these have the potential to be a more appealing and productive basis for drawing fonts than cubic B√©ziers. The next big step is to validate whether they actually work as well as I‚Äôm hoping. That involves polishing the UX and integrating them into Runebender. If that turns out really well, a longer term (but more speculative) aspiration is to get them into a font format, where they could reduce binary size while increasing quality. It‚Äôs obvious the Google Fonts team is the best home for this work.</p>

<p>I have a lot of work in front of me, but am more excited than ever. On to an old new adventure, and may 2021 be a time of healing and renewed energy for all.</p>


  </div>
</article>

      </div>
    </div></div>]]>
            </description>
            <link>https://raphlinus.github.io/personal/2020/12/16/an-old-new-adventure.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25448248</guid>
            <pubDate>Wed, 16 Dec 2020 20:36:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Preview in macOS Big Sur is destroying PDFs]]>
            </title>
            <description>
<![CDATA[
Score 346 | Comments 296 (<a href="https://news.ycombinator.com/item?id=25447830">thread link</a>) | @matrixagent
<br/>
December 16, 2020 | https://annoying.technology/posts/86f4ea27e4cd90d0/ | <a href="https://web.archive.org/web/*/https://annoying.technology/posts/86f4ea27e4cd90d0/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><img src="https://d33wubrfki0l68.cloudfront.net/35f98c21da204421e81bcfcb709f0b9a2563fde5/a3843/media/previeweatingpdfs.png"></p><p>This <a href="https://annoying.technology/media/previeweatingpdfs.png">image</a> has three components: On the left is an OCR‚Äôed PDF from my ScanSnap iX500. I have selected most of the text, and on the right side you can see two copy&amp;paste results. In the upper half is the result directly after scanning, right after the bundled ABBYY FineReader that comes with the iX500 did its magic. In the lower half is the result <strong>after</strong> modifying (removed a blank page) and saving that same PDF in <em>Preview</em>.</p><p>Hard to believe, but that‚Äôs <a href="https://discourse.devontechnologies.com/t/odd-pdf-behavior/21400">not</a> <a href="http://www.documentsnap.com/ocr-text-macos-sierra-preview/">the</a> <a href="https://discussions.apple.com/thread/8010687">first</a> time Apple <a href="https://mjtsai.com/blog/2016/12/21/more-macos-preview-pdf-trouble/">messed this up</a>. Sure, even Apple can‚Äôt account for all use cases when changing complex stuff like internal PDF handling. But:</p><ul><li>The iX500 is an insanely popular and common scanner</li><li>I don‚Äôt know any OCR software that is more popular than ABBYY FineReader</li><li>macOS used to be the absolute best in class OS for dealing with PDFs by a <strong>long</strong> shot</li><li>IT HAPPENED BEFORE</li></ul><p>I wish Apple was still charging for OS updates, so I could at least refund it.<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup> This is such a nasty bug ‚Äì if you don‚Äôt already know to expect it, you will only find out months or possibly years later. I almost missed it this time, because even after modifying and saving the file it‚Äôs still not happening. You have to completely close the file and reopen it, only then will you realize that it has been destroyed.</p><section role="doc-endnotes"><hr><ol><li id="fn:1" role="doc-endnote"><p>Yes, I blame only Apple for this. I‚Äôll repeat what I told Philipp (noted Apple apologist!) when we argued about this last week after I discovered the problem: ABBYY says they don‚Äôt support Big Sur yet, that‚Äôs fine. But Apple didn‚Äôt tell me that I can‚Äôt upgrade to Big Sur when I use ABBYY. I‚Äôd be a lot less angry if there was a changelog or release notes <em>from Apple</em> where it says there is a known problem with OCR‚Äôed PDFs in Preview. <em>Their</em> software is broken, <em>they</em> need to tell me. I don‚Äôt care if it only worked because they had workarounds for super shitty PDFs that ABBYY possibly produces, I just need my OS to keep working for me. This bug could hit me without even owning a scanner at all ‚Äì someone sending me a PDF that I then unknowingly break before archiving it. That‚Äôs the part I‚Äôm mad about. <a href="#fnref:1" role="doc-backlink">‚Ü©Ô∏é</a></p></li></ol></section></div></div>]]>
            </description>
            <link>https://annoying.technology/posts/86f4ea27e4cd90d0/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25447830</guid>
            <pubDate>Wed, 16 Dec 2020 20:07:44 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Killing Our Help Center Improved CSAT and Revenue over 11%]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 4 (<a href="https://news.ycombinator.com/item?id=25446836">thread link</a>) | @tapneal
<br/>
December 16, 2020 | https://solitaired.com/killing-our-help-center-improved-customer-satisfaction-and-revenue | <a href="https://web.archive.org/web/*/https://solitaired.com/killing-our-help-center-improved-customer-satisfaction-and-revenue">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><center><img width="900" src="https://defbnszqe1hwm.cloudfront.net/images/Helpcenter.png"></center>
<p>Being card game geeks, we run <a href="https://solitaired.com/">our solitaire site</a> as a fun hobby. As we gained some users though over the last year and launched a subscription service to generate some side income, we had to make sure we had reasonable customer support. </p>
<p>It was a no brainer to create a help center because we didn√¢‚Ç¨‚Ñ¢t want to spend time managing customer support tickets, and having a workflow where users could be self-directed and answer questions on their own was ideal. </p>
<h2 id="whenirealizedihatedhelpcenters">When I realized I hated help centers</h2>
<p>I had an issue with one of our service providers, and went to their site to figure out how to solve the problem. For 30 minutes, I hopped around their own help center with no luck finding the answer to my question. </p>
<p>I then started looking for a support line. After digging through various questions and hitting √¢‚Ç¨≈ìNo, this did not answer my question,√¢‚Ç¨ÔøΩ I  found  that it was discontinued and the page redirected me back. </p>
<p>Needless to say, I wasn√¢‚Ç¨‚Ñ¢t happy. </p>
<p>It made me realize that instinctually, I always want to talk to someone. Whether it be over email, the phone, or chat, knowing that I was getting personalized attention would give me comfort and confidence that my issues will be resolved. </p>
<p>I decided then and there: We will get rid of our help center!</p>
<h2 id="removingourhelpcenterandimprovingourcustomersatisfactionscoreby12">Removing our help center and improving our customer satisfaction score by 12%</h2>
<p>We analyzed where users visited most in our help center. We found that three issues dominated 95% of requests:</p>
<ol>
<li>We had launched a subscription service and users wanted to understand how to cancel. Having run subscription businesses in the past, this wasn√¢‚Ç¨‚Ñ¢t too surprising. </li>
<li>How to report bugs in the game. Invariably, users came across some fringe bugs, especially for our <a href="https://solitaired.com/freecell">Freecell</a>, <a href="https://solitaired.com/klondike-solitaire">Klondike</a>, and <a href="https://solitaired.com/spider">Spider Solitaire</a> games, and wanted to report it. </li>
<li>Requests for more games. </li>
</ol>
<p>Addressing these questions were relatively simple, and we figured we can spend a few minutes a day responding to anything that came in. </p>
<p>We responded on average within two days and found that our customer satisfaction score (CSAT) improved from 65% to 73%. </p>
<h2 id="improvingcustomersatisfactionanother22">Improving customer satisfaction another 22%.</h2>
<p>We hypothesized that response time played a major role in improving customer satisfaction. </p>
<p>For the next week we decided to respond within 24 hours and we found that CSAT improved from 73% to 78%.</p>
<center><img width="900" src="https://defbnszqe1hwm.cloudfront.net/images/24hours.png"></center>
<p>Realizing that response time makes a difference, we promised and communicated on our site that we√¢‚Ç¨‚Ñ¢d respond within 2 hours during business hours. CAST went up 82%. </p>
<p>We didn√¢‚Ç¨‚Ñ¢t want to stop, and we decided to add live chat and respond immediately during business hours. CSAT shot up to 89%!</p>
<h2 id="improvingrevenueby11">Improving revenue by 11%</h2>
<p>As we started responding and talking to our customers, we learned that many users would cancel their subscription because they didn√¢‚Ç¨‚Ñ¢t know how to access certain games, customization features, and due to some unknown bugs. </p>
<p>Operating a help center only gave users instructions on how to cancel, and did not give us an opportunity to understand why and course correct.</p>
<p>When we started understanding all the reasons our users were canceling, we were able to address this, improving our retention. In the first month, this improved our very modest subscription revenue by 11%. If you compound the impact of retention, it will likely be more over time. </p>
<center><img width="900" src="https://defbnszqe1hwm.cloudfront.net/images/Retention.png"></center>
<h2 id="ourcustomersupportsetuptodayandidealsolutions">Our customer support set up today, and ideal solutions</h2>
<p>Because we run the site for fun, it√¢‚Ç¨‚Ñ¢s difficult for us to commit to a SLA when someone responds. Today, we just have a simple contact us page. We try to get back within a day generally, but sometimes we miss that and sometimes we√¢‚Ç¨‚Ñ¢re able to respond earlier depending on competing priorities. </p>
<p>This has taught us though that many consumers want to talk to someone and want a response right away. With that said, some people are totally fine skipping the human interaction. We think an ideal set up is to:</p>
<ol>
<li>Have a help center that covers very simple questions, like how to use certain features. On those pages, there should be an option to quickly talk to a customer service agent. </li>
<li>Have a page on cancellation, but have a CTA talk to someone with a quick response. This will help you understand issues for paying customers and address it</li>
<li>Have a chatbot in lieu of a help center with similar works flow described above. However, set it up in a way where users understand they are talking to a bot, and at any point they can talk to someone</li>
</ol>
<p>Naturally, everyone has resource limitations. If you were to protoize KPIs like revenue, as I imagine you would, find a way to quickly talk to your paying customers or those most likely to pay to support your business goals.</p></div></div></div></div>]]>
            </description>
            <link>https://solitaired.com/killing-our-help-center-improved-customer-satisfaction-and-revenue</link>
            <guid isPermaLink="false">hacker-news-small-sites-25446836</guid>
            <pubDate>Wed, 16 Dec 2020 19:00:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Risk8s Business: Risk Analysis of Kubernetes Clusters]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25444866">thread link</a>) | @clintgibler
<br/>
December 16, 2020 | https://tldrsec.com/guides/kubernetes/ | <a href="https://web.archive.org/web/*/https://tldrsec.com/guides/kubernetes/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section itemprop="text">
        
        <p><strong>On this page</strong>: A zero-to-hero guide for assessing the security risk of your Kubernetes cluster and hardening it.</p>

<p>Kubernetes is a container orchestrator that has seen year-after-year exponential growth in adoption.</p>

<p>While many organizations have adopted Kubernetes because of its hyped ability to
scale, extensibility, and multi-cloud support, many security teams have been
left playing catch-up.</p>

<blockquote>
  <p>This guide will help you rapidly ramp on what Kubernetes is and what it does
(and doesn‚Äôt do).</p>

  <p>You‚Äôll learn how to understand the current state of your
Kubernetes deployment, hone in on what‚Äôs most risky, and how to mitigate that
risk.</p>

  <p>We‚Äôll link to the best tools and other resources to learn more, and
include plenty of handy CLI one-liners to get the job done.</p>
</blockquote>

<h2 id="guide-structure">Guide Structure</h2>

<p>The structure of this guide, which you can also quickly navigate by the navbar
links on the left hand side, is the following:</p>

<h3 id="introduction">Introduction</h3>

<p>First we‚Äôll give you an <a href="https://tldrsec.com/guides/kubernetes/overview">overview</a> of Kubernetes, discuss what it means to <a href="https://tldrsec.com/guides/kubernetes/secure-cluster-looks-like">secure a
cluster</a>, and talk about the end
goal here.</p>

<p>We‚Äôll list a number of <a href="https://tldrsec.com/guides/kubernetes/tooling-up">solid tools</a> to get you
started, which will be used throughout this guide.</p>

<h3 id="understanding-your-environment">Understanding Your Environment</h3>

<p>You need to <a href="https://tldrsec.com/guides/kubernetes/understanding-your-environment">understand your environment</a> before you can secure it, so we start
there. We‚Äôll quickly dive in to ways that you can collect information, and which information is relevant in the big picture.</p>

<p>We want to see what your cluster looks like, how you‚Äôre <a href="https://tldrsec.com/guides/kubernetes/how-deploying">deploying it</a> (managed vs self-hosted), what‚Äôs running
<a href="https://tldrsec.com/guides/kubernetes/whats-running-in-cluster">inside</a> and <a href="https://tldrsec.com/guides/kubernetes/whats-running-nearby-cluster">nearby</a>, and what services are at risk of being compromised throughout the cluster‚Äôs lifetime.</p>

<h3 id="understanding-your-risk">Understanding Your Risk</h3>

<p>With all this information we will run through a simple risk analysis that helps us determine how likely an exploit would occur and determine how your cluster will hold up. Finally building
an overall risk baseline for the environment.</p>

<p>We‚Äôll examine:</p>
<ul>
  <li><a href="https://tldrsec.com/guides/kubernetes/understanding-your-risk">Access controls</a>: who can deploy and how are workloads being deployed?</li>
  <li>Which <a href="https://tldrsec.com/guides/kubernetes/services-exposed">services are exposed</a> publicly or internally?</li>
  <li>Do we have visibility into the cluster, and is our <a href="https://tldrsec.com/guides/kubernetes/how-vulnerable-is-cluster">cluster vulnerable</a> due to configuration mistakes or networking-related vulnerabilities?</li>
</ul>

<p>We‚Äôll conclude by discussing <a href="https://tldrsec.com/guides/kubernetes/common-compromise-scenarios">common compromise
scenarios</a>: a pod being
compromised, a developer compromising a cluster, and a developer being
compromised by an attacker. And some stories of what I‚Äôve seen in the real world
during my consulting work, for good measure üòé</p>

<h3 id="wrapping-up">Wrapping Up</h3>
<p>In the end, we‚Äôll <a href="https://tldrsec.com/guides/kubernetes/putting-it-together">put it all together</a>,
and you will hopefully have enough information to get started reviewing your
cluster environment to identify gaps, vulnerabilities, and just questionable
areas that will need further inspection.</p>

<p>Once you have a risk assessment complete, it‚Äôll be your job to continue onto the
risk management phase and find out what mitigations will best fit in to address
all the issues you found.</p>

<p>And of course, we conclude with a variety of <a href="https://tldrsec.com/guides/kubernetes/further-reading">further
resources</a> on Kubernetes threat modeling,
additional tools, and some of our favorite conference talks.</p>



<p>My name is Mark Manning and I‚Äôm currently a security architect at <a href="https://www.snowflake.com/">Snowflake</a>. I‚Äôve spent years as a security consultant for a global security consulting firm where I assessed, reviewed, attacked, and sometimes, helped fix problems on a wide range of Kubernetes projects (among other types of projects). I was excited for the opportunity to collaborate with <em>tl;dr sec</em> and write about a topic I‚Äôve dealt with repeatedly over the last 4 years, Kubernetes risk.</p>

<p>I‚Äôve worked with customers just getting started with Kubernetes, cloud providers deploying their own Kubernetes platforms, and large organizations that have invested much of their business into embracing the ‚Äúdigital transformation.‚Äù</p>

<p>Today I‚Äôm working with Snowflake by focusing some of my experiences and offensive skills towards helping solve some really interesting security challenges. Part of that is Risk Management of Kubernetes clusters at scale.</p>

<p>I‚Äôve seen how things can go right, and wrong, in the real world, in a vast variety of companies. While I don‚Äôt have all the answers, I enjoy sharing what I do know with the public, and <a href="https://www.twitter.com/antitree">on Twitter</a> or at <a href="https://www.shmoocon.org/speakers/#kubectl">hacker conferences</a>.</p>

<p>My hope is that some of us will continue to work heavily on Kubernetes security so that even if we don‚Äôt fix everything, the rest of the infosec industry can level-up to meet the challenges of securing these modern platforms.</p>










<!-- Begin MailChimp Signup Form -->



<!--End mc_embed_signup-->
        
      </section></div>]]>
            </description>
            <link>https://tldrsec.com/guides/kubernetes/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25444866</guid>
            <pubDate>Wed, 16 Dec 2020 16:57:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[SaaSy Math: A Resource of SaaS Metrics for Your Startup]]>
            </title>
            <description>
<![CDATA[
Score 134 | Comments 8 (<a href="https://news.ycombinator.com/item?id=25444277">thread link</a>) | @randrews543
<br/>
December 16, 2020 | https://www.talkinsaasy.com/saasy-math | <a href="https://web.archive.org/web/*/https://www.talkinsaasy.com/saasy-math">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p><h2 data-ix="fade-in-on-scroll-2">A collection of simple, easy to use SaaS metrics with formulas, sample calculations, and examples of how to find this data in your own tech stack</h2></p><div><div><p>Net Revenue Retention (NRR)</p><p><img src="https://uploads-ssl.webflow.com/5fac0bd027bf86766ba40837/5fbe4ad78fde0b0a238a1870_Net%20Revenue%20Retention.png" loading="lazy" alt=""></p></div><div><div><p>Net Revenue Retention represents how well you are <strong>retaining</strong> and <strong>expanding</strong> your existing recurring revenue. NRR is most typically measured either annually or month-to-month, but you are always comparing a cohort (a group of customers acquired at the same time) to see how their subscription revenue fares over the given time period. Think about your Netflix subscription, when you first signed up, are you still subscribed? And are you paying the same about as before?</p><p>‚Äç<strong>Quick and SaaSy Way To Calculate:</strong> Go into your billing/subscription management system such as <a href="https://stripe.com/" target="_blank">Stripe</a> or <a href="https://www.zuora.com/" target="_blank">Zuora</a>. Go back twelve months and find all of the customers you acquired in that month, total their MRR and save their Subscription ID (Look for all subscriptions with a created date in that month). Then, go to the most recent full month of billing data and pull all of the invoices the match the Subscription ID for all the new customers 12 months ago (the subscription ID lives on the invoice object and you can join the data using these IDs to only get the invoices tied to those subscriptions). Once you have them all you can calculate the total MRR in the most recent month, then just divide that number by previous years MRR number and you have your annual net revenue retention. If you want to take this analysis to the next level shoot me an <a href="https://www.talkinsaasy.com/contact">email</a> and we can discuss how to segment and find how Net Revenue Retention can differ throughout your customer base.</p><p>Related Blog Posts: <a href="https://www.talkinsaasy.com/blog/net-revenue-retention" target="_blank">Net Revenue Retention</a></p></div></div></div><div><div><p>Gross Revenue Retention (GRR)</p><p><img src="https://uploads-ssl.webflow.com/5fac0bd027bf86766ba40837/5fbe4aa6b26ad627a4efeb0f_Gross%20Revenue%20Retention.png" loading="lazy" alt=""></p></div><div><div><p>Gross Revenue Retention represents how well you are <strong>retaining</strong> your revenue and DOES NOT include how well you are expanding them. Similar to NRR, GRR measures customer cohorts aver a given time period to see how much of the initial MRR still remains over the given time period.</p><p><strong>Quick and SaaSy Way To Calculate:</strong> Similar to NRR, go into your billing/subscription management system such as <a href="https://stripe.com/" target="_blank">Stripe</a> or <a href="https://www.zuora.com/" target="_blank">Zuora</a>. Go back twelve months and find all of the customers you acquired in that month, total their MRR and save their Subscription ID (Look for all subscriptions with a created date in that month). Then, go to the most recent full month of billing data and pull all of the invoices the match the Subscription ID for all the new customers 12 months ago (the subscription ID lives on the invoice object and you can join the data using these IDs to only get the invoices tied to those subscriptions). Once you have them all you can calculate the total MRR in the most recent month but in the case of GRR, any customers who‚Äôs revenue expanded, you need to take out the additional revenue and just keep their original MRR. Then just divide that number by previous years MRR number and you have your annual gross revenue retention. If you want to take this analysis to the next level shoot me an <a href="https://www.talkinsaasy.com/contact">email</a> and we can discuss how to segment and find how Gross Revenue Retention can differ throughout your customer base.</p><p>Related Blog Posts: <a href="https://www.talkinsaasy.com/blog/net-vs-gross-revenue-retention" target="_blank">Net vs Gross Revenue Retention</a></p></div></div></div><div><div><p>Customer Churn</p><p><img src="https://uploads-ssl.webflow.com/5fac0bd027bf86766ba40837/5fca548eec3a202105d82b1e_Customer%20Churn.png" loading="lazy" alt=""></p></div><div><div><p>Customer Churn is the measure of how many customers cancel over time from a given cohort. While the goal is to always minimize churn as best possible, SaaS/Subscription will have some churn and tracking it is crucial for success. Similar to Revenue Retention</p><p><strong>Quick and SaaSy Way To Calculate: </strong>Go into your billing/subscription management system such as <a href="https://stripe.com/" target="_blank">Stripe</a> or <a href="https://www.zuora.com/" target="_blank">Zuora</a>, or go into your CRM such as <a href="https://www.salesforce.com/" target="_blank">Salesforce</a> or <a href="https://www.hubspot.com/" target="_blank">HubSpot</a>. From either system you want to look for the Customer/Account table from the systems API. From that table you want to look up and count all of the unique customer ID‚Äôs that where created in a given month. Then month-to-month you want to run a check on those same ID‚Äôs to see how many of them are still active customers and then divide that number by the initial number in their first month. Typically, startups will look at churn on a monthly and annual basis and we highly recommend you track the changes in churn over time (ie. If the rate of churn is decreasing or increasing over time). If you want to take this analysis to the next level shoot me us <a href="https://www.talkinsaasy.com/contact">email</a> and we can discuss how to segment and find how customer churn can differ throughout your customer base.</p><p>Related Blog Posts: <a href="https://www.talkinsaasy.com/blog/churn-isnt-always-bad" target="_blank">Churn Isn‚Äôt Always Bad</a>, <a href="#https://www.talkinsaasy.com/blog/revenue-churn-vs-customer-churn">Revenue Churn vs Customer Churn</a><br><a href="https://www.talkinsaasy.com/blog/net-vs-gross-revenue-retention" target="_blank"></a></p></div></div></div><div><div><p>Customer Acquisition Cost (CAC)</p><p><img src="https://uploads-ssl.webflow.com/5fac0bd027bf86766ba40837/5fca549a64abc2d9c6dfb094_Customer%20Acquisition%20Cost.png" loading="lazy" alt=""></p></div><div><div><p>Customer Acquisition Cost, or CAC, is the measure of how much a company must spend in order to acquire a new customer. Typically you look at CAC over a period of time (annually and/or month-to-month) to understand how it is trending for your business.<br>‚Äç<br><strong>Quick and SaaSy Way To Calculate: </strong>To get your expenses you will need to go into your accounting/financial system such as Quickbooks or Xero, and track down your sales and marketing expenses for a time frame. This will include salaries, tech spend, marketing spend and any other expenses that go into your customer acquisition funnel. You then want to go into your CRM or billing and subscription management system and run a count of all the unique customer ID‚Äôs that have a created date in the same time period. You then divide the cost by your new customer count and you have your average CAC. If you want to take this analysis to the next level shoot us an <a href="https://www.talkinsaasy.com/contact">email</a> and we can discuss how to segment and find how customer acquisition cost can differ throughout your customer base.</p><p>Related Blog&nbsp;Posts:<a href="https://www.talkinsaasy.com/blog/dont-get-fooled-by-cac"> Don't Get Fooled By CAC</a></p></div></div></div><div><div><p>Retention Margin</p><p><img src="https://uploads-ssl.webflow.com/5fac0bd027bf86766ba40837/5fd6a337e1ad8f8787d82e4d_Retention%20Margins.png" loading="lazy" alt=""></p></div><div><div><p>Retention Margins is a measurement of the % of top-line revenue that is left over each month once you have taken out the cost of revenue (Gross Margins) and the cost of keeping (retaining) your recurring revenue customers. Think of retention margins as the the home profit on a per customer basis after you have retained them month-over-month<br>‚Äç<br><strong>Quick and SaaSy Way To Calculate: </strong>First you need to calculate your Gross Margin (Revenue-Cost of Revenue/Revenue). Then go into your accounting system like Quickbooks or Xero. You want to total up the amount of spend (payroll, overhead, etc.) for your customer service and success teams. You then want to add that number to your Cost of Revenue number and subtract that from your top-line revenue. That number is your retention profit (Take home $$$) after retaining your customers. Take your retention profit and divide it by your top-line revenue number and that will give you your retention margin.</p><p>Related Blog Posts: <a href="https://www.talkinsaasy.com/blog/why-net-and-gross-revenue-retention-matter">Why Net AND&nbsp;Gross Revenue Retention Matter</a></p></div></div></div></div></div></div>]]>
            </description>
            <link>https://www.talkinsaasy.com/saasy-math</link>
            <guid isPermaLink="false">hacker-news-small-sites-25444277</guid>
            <pubDate>Wed, 16 Dec 2020 16:14:52 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I Regret Quitting Astrophysics]]>
            </title>
            <description>
<![CDATA[
Score 186 | Comments 124 (<a href="https://news.ycombinator.com/item?id=25444069">thread link</a>) | @petschge
<br/>
December 16, 2020 | http://www.marcelhaas.com/index.php/2020/12/16/i-regret-quitting-astrophysics/ | <a href="https://web.archive.org/web/*/http://www.marcelhaas.com/index.php/2020/12/16/i-regret-quitting-astrophysics/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-223">
	
	<!-- .entry-header -->

	<div>
		
<p>In 2013 I decided to quit my career in astrophysics, move back ‚Äúhome‚Äù and become a data scientist. The <a href="http://www.marcelhaas.com/index.php/2018/03/30/leaving-the-field-becoming-an-extronomer/">blog post</a> I wrote about my decision was probably my best read publication as a professional astronomer and it was moving to read all the reactions from people who were struggling with similar decisions. I meant every word in that blog post and I still agree with most of what I said. Now, 7 years after the fact, it is time to confess: I deeply regret quitting.</p>



<p>This post is meant to give my point of view. Many people who left academia are very happy that they did. Here I present some arguments why one might not want to leave, which I hope will be of help for people facing decisions like these.</p>



<p><span>I miss being motivated.</span> In the first few years after jumping ship many people asked me why I would ever wanted to <em>not</em> be a professional astronomer. I have always said that my day-to-day work wasn‚Äôt too different, except that what I did with data was about financial services or some other business I was in, rather than about galaxies and the Universe, but that the ‚Äúcore activities‚Äù of work were quite similar. That is kind of true. On an hour by hour basis, often I‚Äôm just writing (Python) code to figure things out or build a useful software product. The motivation to do what you do, though, is very <em>very</em> different. The duty cycle and technical depth of projects are short and shallow and the emphasis of projects is much more on getting working products than on understanding. I am doing quite well (in my own humble opinion), but it is hard to get satisfaction out of my current job.</p>



<p><img loading="lazy" width="546" height="340" src="http://www.marcelhaas.com/wp-content/uploads/2020/12/academic_hat.png" alt="" srcset="http://www.marcelhaas.com/wp-content/uploads/2020/12/academic_hat.png 546w, http://www.marcelhaas.com/wp-content/uploads/2020/12/academic_hat-300x187.png 300w" sizes="(max-width: 546px) 100vw, 546px"></p>



<p><span>I miss academic research.</span> The seeds of astronomy were planted at very young age (8, if I remember correctly). The fascination for the wonders of the cosmos has changed somewhat in nature while growing up but hasn‚Äôt faded. Being at the forefront of figuring things out about the workings of the Universe is amazing, and unparalleled in any business setting. Having the freedom to pick up new techniques that may be useful for your research is something that happened to me only sporadically after the academic years. The freedom to learn and explore are valuable for creative and investigative minds and it doesn‚Äôt fit as well in most business settings that I have seen.</p>



<p><span>I miss working at academic institutions.</span> The vibe of being at a large research institute, surrounded by people who are intrinsically motivated to do what they do was of great value to me. Having visitors over from around the globe with interesting, perhaps related work was a big motivator. That journal clubs, coffee discussions, lunch talks, colloquiums etc. are all ‚Äúpart of the job‚Äù is something that even most scientists don‚Äôt always seem to fully appreciate. Teaching, at the depth of university level classes, as a part of the job is greatly rewarding (I do teach nowadays!).</p>



<p><span>I miss passion and being proud of what I do.</span> The <a href="https://www.google.nl/search?hl=nl&amp;q=sexiest+job+of+the+21st+century">internet </a>says I have ‚Äùthe sexiest job of the 21<sup>st</sup> century‚Äù, but I think my previous job was more enjoyable to brag about at birthday parties. I can do astro as a hobby, but that simply doesn‚Äôt give you enough time to do something substantial enough.</p>



<p><span>I don‚Äôt miss ‚Ä¶</span> Indeed, the academic career also had its downsides. There is strong competition and people typically experience quite some pressure to achieve. The culture wasn‚Äôt always very healthy and diversity and equality are in bad shape in academia. Success criteria of your projects and of you as a person are typically better motivated in business. The obligatory nomadic lifestyle that you are bound to have as an early career scientist were a very enjoyable and educational experience, but it can easily become a burden on your personal life. The drawbacks and benefits of any career path will balance out differently for everybody. If you get to such a point, don‚Äôt take the decision lightly.</p>



<div><figure><img loading="lazy" src="http://www.marcelhaas.com/wp-content/uploads/2020/12/decision.png" alt="" width="89" height="89" srcset="http://www.marcelhaas.com/wp-content/uploads/2020/12/decision.png 200w, http://www.marcelhaas.com/wp-content/uploads/2020/12/decision-150x150.png 150w" sizes="(max-width: 89px) 100vw, 89px"></figure></div>



<p>The people who questioned my decision to become an extronomer were right. I was wrong. It seems too late to get back in. I think I have gained skills and experience that can be very valuable to the astronomical community, but I know that that is simply not what candidates for academic positions are selected on. On top of that, being geographically bound doesn‚Äôt help. At least I will try to stay close to the field and who knows what might once cross my path.</p>
	</div><!-- .entry-content -->

	
	<!-- .entry-footer -->

</article></div>]]>
            </description>
            <link>http://www.marcelhaas.com/index.php/2020/12/16/i-regret-quitting-astrophysics/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25444069</guid>
            <pubDate>Wed, 16 Dec 2020 15:56:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A year's worth of learnings from adopting Mob programming]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25443874">thread link</a>) | @dinispeixoto
<br/>
December 16, 2020 | https://www.farfetchtechblog.com/en/blog/post/a-year-s-worth-of-learnings-from-adopting-mob-programming/ | <a href="https://web.archive.org/web/*/https://www.farfetchtechblog.com/en/blog/post/a-year-s-worth-of-learnings-from-adopting-mob-programming/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>At FARFETCH, teams are encouraged to try new development methodologies so that they can deliver even better results while also improving productivity. As a fairly new team, we have continuously been looking for different methodologies that best fit our needs, such as avoiding knowledge silos or a slow-paced reviewing process. Although not every approach that we have tried has worked, the ones that did are now part of our daily development workflow and play a key role in the outcome of the tasks that we deliver.</p><p>A year ago, our team was first introduced to <a href="https://mobprogramming.org/" target="_blank">Mob Programming</a>, and we have been using it since then. The concept that was once hard to fathom is now the go-to approach when dealing with most of our sprint tasks. Although being able to use Mob Programming daily has come with many different types of challenges, the results have been surprisingly good.&nbsp;</p><p>When using Mob Programming, instead of having each team element working on its own task, the whole team gathers together to tackle the same task. It includes using a single workstation and only one person typing - <span>the Driver</span> - while the remaining people are describing the path that should be taken.</p><blockquote><p><span>It√¢‚Ç¨‚Ñ¢s a software development approach where the whole team works on the same thing, at the same time, in the same space, and at the same computer. - Woody Zuill (2014)</span></p></blockquote><p>Mob Programming is somewhat similar to Pair Programming. While the latter consists of having two team members sharing the same workstation, Mob Programming goes a bit further and implies having the entire team focused on a single task. Even though Pair Programming is a great tool to share knowledge, improve communication and even bring better outcomes (as a consequence of having multiple people thinking about the same problem), it confines these advantages to only two elements on a team. On the other hand, Mob Programming can amplify these benefits to the whole team.</p><p>Yet, having an entire team working on the same problem brings its own challenges. It's imperative that the team establishes a set of well-defined procedures and rules. Furthermore, Mob Programming may not be suitable for all kinds of tasks or teams. Depending on the task the team is tackling, it should first be established whether Mob, Pair or Solo Programming is the appropriate methodology. None of the three is suitable for all situations. It's up to the teams to give them a try and figure out when to use them.</p><p>A typical Mob Programming setup consists of moving the team to an isolated space (e.g. a meeting room) and bringing one computer that should be connected to either a large monitor or a projector. Having a whiteboard to write down possible solutions and describe the next steps is great to empower collaborative brainstorming. Seats and tables for everyone is a must, as everyone should be comfortable during the session, this is particularly relevant as these sessions tend to be time-consuming. Since the beginning of the Covid-19 pandemic, we have adapted our ways of working to facilitate Remote Mob Programming sessions - but more to come on that later.&nbsp;</p><p><img src="https://www.farfetchtechblog.com/fotos/editor2/Dinis_Peixoto/Image_01.png" alt=""></p><p>Two key roles must be considered when using Mob Programming: the Driver and the Navigator. The Driver is the person at the keyboard, responsible for moving the codebase forward. The Navigator understands what the group has decided to aim for and provides instructions to the Driver. The Navigator shouldn't dictate the actual code that the Driver has to write down, only the expected solution. Sometimes, the Navigator role may not be needed. It is up to the Driver to opt-in or out. Nonetheless, when there's no Navigator, the Driver may get lost by having multiple people explaining what to do. These roles should rotate between all team members at regular intervals (usually monitored by a timer).</p><p>The session should be held continuously until the task is done. Quick breaks, like coffee or bathroom, are allowed and shouldn't require the session to stop. Some longer breaks like lunch must be agreed between the team so that everyone does it at the same time to prevent distractions and absences.</p><div><p>The first thing that may come to one's mind is that Mob Programming jeopardizes the team's overall productivity. After all, having an entire team working on the same task certainly means that both the team's velocity and throughput will be compromised, right?</p></div><div><p>More often than not, people tend to forget that delivering a task includes a lot more than just writing code. It's common that most of the time spent on a particular task is on coming up with the right solution or waiting for the team to review what was done. In our case, each task requires approval from 3 different people, which implies that they stop what they are doing, get up to speed, and finally review the result.</p></div><div><p>When using a development workflow like Solo Programming, once a developer puts the task up for review, the team has to understand all the requirements and review what was done, while also trying to identify what was the problem-solving process that the author took. The fact that the team has to go through someone else√¢‚Ç¨‚Ñ¢s work without being completely aware of the decisions behind the proposed solution might take longer and prevent some mistakes from being identified.</p></div><p>Whereas when using Mob Programming, taking advantage of insights and knowledge from the whole team may lead to the task being delivered quicker while also with a better solution. When it comes to the review process, it will also be straightforward as everyone owns the decisions that were made and the solution path that was taken.&nbsp;</p><p>We have been using Mob Programming for over a year. Over this period, we have been trying to refine our methodology so that we can make the most out of our sessions. Some of the phases that have improved our workflow are described below.</p><ol><li><span>Task scouting:</span> each team member should, individually, check the task details prior to the session. Investing time on exploring the task beforehand will considerably shorten the time required on the next phase.</li><li><span>Purpose clarification: </span>at the beginning of the session, someone should present the problem at hand and make sure that everyone has a clear grasp of what the team is trying to achieve. Any questions about the purpose of the task should be raised at this time.</li><li><span>Work breakdown:</span> with the purpose of clarified, it's now time to identify the work blocks that have to be monitored during the session. The different tasks that result from this analysis should be prioritized and can be split into even smaller tasks if needed.</li><li><span>Execution:</span> based on the tasks identified previously, the team must try to work on each task by following the agreed order. The team should expect new tasks to surface throughout the session. If it happens, the order of the tasks can be adjusted.</li><li><span>Debriefing:</span> at the end of the session, the team will need to look at the initially defined tasks and check if everything was tackled. The solution should be carefully reviewed together before submitting it for team review. It's highly recommended to provide some time for an individual review to address groupthink problems.</li></ol><p>Equally important are the rules that our team has defined so far. Periodically, we revisit them and discuss whether or not some updates are required. Trying to make this an iterative process is extremely important to enhance the overall experience of our Mob Programming sessions over time.</p><ol><li><span>Driving/navigation time:</span> each team member will be in the Driver/Navigator role for 15 minutes. If a discussion comes up, the timer should stop so that both the Driver and Navigator can participate.</li><li><span>Complete focus on the session:</span> everyone in the room has to be focused on the session. If someone needs to work on something else, they must leave the room to avoid distracting the team.</li><li><span>Mandatory and optional breaks:</span> there are three mandatory breaks where the session must be stopped: morning coffee, lunch and afternoon coffee. Additional breaks are allowed but should be minimized to reduce the impact on focus. These sessions are very demanding on every team member so, if one cannot focus on the current tasks, taking a break is completely acceptable.</li><li><span>Research time:</span> whenever research is required, it should be done primarily by the Driver with the help of the team. Parallel research streams are allowed, as long as the team is aware of them.</li><li><span>Identify Mob Programming tasks ahead of time:</span> we always try to decide upon whether a specific task is going to be tackled through Mob Programming or not. It facilitates any coordination required during our sprint.</li></ol><p>Due to the COVID-19 global pandemic, we had a new challenge ahead of us: <a href="https://www.remotemobprogramming.org/" target="_blank">Remote Mob Programming</a>. As a consequence, we had to go through the rules above and update them as a means to adapt to the reality of having the whole team working remotely.</p><ol><li><span>Driving/navigation time:</span> this should be increased, in our case, we adjusted it to 45 minutes, due to the extra work required when changing the Driver (e.g. setting up the environment, sync with git's remote repository). It might take up to 5 minutes and wouldn't be worth it to do it every 15 minutes.</li><li><span>Video sharing:</span> everyone should keep the camera on during the session and, when possible, look directly at it. It√¢‚Ç¨‚Ñ¢s as close as we can get to face-to-face interaction.</li><li><span>Driver handover:</span> every time a Driver handover is required, the current Driver has to ensure that changes made during their turn are properly committed and pushed to the remote repository. To have a better sense of the changes and their history, usually, the Driver's name is kept on the commit description.</li></ol><p>When it comes to the tools that we use during our mob sessions, it depends on if we are doing it in-person or remotely. When having in-person sessions, the only tool that we make use of is <a href="https://github.com/dillonkearns/mobster" target="_blank">Mobster</a>, which allows us to keep track of the Driver timer, the active and next up Drivers. Whereas when having remote sessions, on top of Mobster we also benefit from <a href="https://slack.com/" target="_blank">Slack</a> for video/screen sharing and live annotations (i.e. being able to ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.farfetchtechblog.com/en/blog/post/a-year-s-worth-of-learnings-from-adopting-mob-programming/">https://www.farfetchtechblog.com/en/blog/post/a-year-s-worth-of-learnings-from-adopting-mob-programming/</a></em></p>]]>
            </description>
            <link>https://www.farfetchtechblog.com/en/blog/post/a-year-s-worth-of-learnings-from-adopting-mob-programming/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25443874</guid>
            <pubDate>Wed, 16 Dec 2020 15:42:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Guide to Effective Linux and Bash for Data Scientists]]>
            </title>
            <description>
<![CDATA[
Score 41 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25443415">thread link</a>) | @tolstoyevsky
<br/>
December 16, 2020 | http://dagshub.com/blog/effective-linux-bash-data-scientists/ | <a href="https://web.archive.org/web/*/http://dagshub.com/blog/effective-linux-bash-data-scientists/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
              
              <p>In November 2020, DAGsHub gave a series of guest lectures to the excellent <a href="https://yandexdataschool.com/israel/">Y-DATA</a> course for aspiring data scientists, which we would now like to share with whoever finds it useful, in blog form!</p><h2 id="cut-to-the-chase-">Cut to the chase!</h2><ul><li><a href="#basics">Shell basics</a></li><li><a href="#the-shell">Background on shells</a></li><li><a href="#shell-variables">Shell variables</a></li><li><a href="#pipes">Pipes</a></li><li><a href="#redirects">Redirects</a></li><li><a href="#filesystem">Filesystem</a></li><li><a href="#runnable-files">Runnable files</a></li><li><a href="#package-managers">Package managers</a> (e.g. brew and apt)</li><li><a href="#shell-commands-inside-jupyter-notebooks">Shell commands inside Jupyter notebooks</a></li><li><a href="#text-editors-in-the-terminal">Text editors in the terminal</a></li><li><a href="#other-useful-commands">Other useful commands</a></li><li><a href="#ssh">SSH</a></li><li><a href="#tmux">tmux</a></li><li><a href="#running-commands-in-the-background">Running commands in the background</a></li><li><a href="#symbolic-links">Symbolic links</a></li><li><a href="#zsh-oh-my-zsh-powerlevel10k">Oh-my-zsh</a></li></ul><h2 id="intro">Intro</h2><p>The topic - system, IT, DevOps, MLOps, whatever other name you want to call it - how do you make the computer do what you want, outside the context of Python (or R or Matlab etc., we don't discriminate)? How do you get that beautiful neural network of yours to run on an actual server in the cloud, so that it can serve actual users?</p><blockquote>What to do when the bubble bursts, and you have to step outside the Jupyter notebook to fix things?</blockquote><p>Of course, this is a wide open question which requires a lot of previous knowledge to answer. In our lectures, we wanted to start by building a solid foundation for the students to stand on. So, we went to the classics - what is Linux? Why do people use it? What is Bash? How to use the terminal? How to exit vim?!</p><figure><img src="https://images.unsplash.com/photo-1507245921392-e902673ca772?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MXwxMTc3M3wwfDF8c2VhcmNofDZ8fHxlbnwwfHx8&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000" alt="It's all about that base, no trouble!" srcset="https://images.unsplash.com/photo-1507245921392-e902673ca772?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MXwxMTc3M3wwfDF8c2VhcmNofDZ8fHxlbnwwfHx8&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=600 600w, https://images.unsplash.com/photo-1507245921392-e902673ca772?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MXwxMTc3M3wwfDF8c2VhcmNofDZ8fHxlbnwwfHx8&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=1000 1000w, https://images.unsplash.com/photo-1507245921392-e902673ca772?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MXwxMTc3M3wwfDF8c2VhcmNofDZ8fHxlbnwwfHx8&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=1600 1600w, https://images.unsplash.com/photo-1507245921392-e902673ca772?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MXwxMTc3M3wwfDF8c2VhcmNofDZ8fHxlbnwwfHx8&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2400 2400w" sizes="(min-width: 720px) 720px"><figcaption>It's all about that base, no trouble! Photo by <a href="https://unsplash.com/@arstyy?utm_source=ghost&amp;utm_medium=referral&amp;utm_campaign=api-credit">Austin Neill</a> / <a href="https://unsplash.com/?utm_source=ghost&amp;utm_medium=referral&amp;utm_campaign=api-credit">Unsplash</a></figcaption></figure><p>Instead of creating yet-another-tutorial on how to move and copy files in terminals, we wanted to bring perspective: </p><ul><li>Why would you use Linux, Bash, and other system tools?</li><li>What's the smart way to do it, based on our subjective experience? </li><li>What common problems will you come across, and how to solve them?</li><li>What's the mental framework for working with these tools, to gain understanding and learn more by playing?</li></ul><p>So, this guide/cheatsheet is more about our tips and tricks, and is definitely not exhaustive. On the contrary - we wanted to make the most of students' time, and only talk about what's interesting. Other things can be learned on an as-needed basis.</p><h3 id="who-is-this-for">Who is this for?</h3><p>The curriculum and some of the tips are aimed at data scientists who want an introduction to the topics of Linux &amp; Bash. However, the data science orientation mainly comes into play in a few domain specific tips, and in the stated motivations to learn these things - if you're an aspiring web developer, there's no reason not to benefit from this guide as well!</p><h2 id="linux">Linux</h2><h3 id="what-is-linux">What is linux?</h3><ul><li>A family of open source operating systems.</li><li>Developed by Linus Torvalds, who also invented Git to manage the source code for Linux.</li><li>An operating system is a program that takes over a bit after your computer turns on.</li><li>For the first few seconds after your computer switches on, the motherboard runs a small hard-coded operating system called the BIOS, but it quickly hands control over to some operating system<em> kernel</em>, which is installed on one of the hard drives, a USB stick or CD.</li><li>From that point on, the kernel decides which programs to run when, and how to control physical devices (via drivers).</li><li>An <em>operating system</em> is a bundle of programs that come packaged together. The kernel is the most important part, but it comes with more programs which help the users communicate with the kernel.</li><li>e.g. File explorers are part of the OS, but not the kernel - they're just graphical interfaces which sit between the user and the kernel.</li><li>Operating systems normally also handle file systems, user permissions, memory management, and many other things.</li><li>The thing that unites all the different operating systems in the Linux family is they all use the same Linux kernel - other parts differ. More on that later in the section about distributions.</li></ul><figure><img src="https://images.unsplash.com/photo-1573480813647-552e9b7b5394?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MXwxMTc3M3wwfDF8c2VhcmNofDM3fHx8ZW58MHx8fA&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000" alt="Penguins" srcset="https://images.unsplash.com/photo-1573480813647-552e9b7b5394?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MXwxMTc3M3wwfDF8c2VhcmNofDM3fHx8ZW58MHx8fA&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=600 600w, https://images.unsplash.com/photo-1573480813647-552e9b7b5394?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MXwxMTc3M3wwfDF8c2VhcmNofDM3fHx8ZW58MHx8fA&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=1000 1000w, https://images.unsplash.com/photo-1573480813647-552e9b7b5394?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MXwxMTc3M3wwfDF8c2VhcmNofDM3fHx8ZW58MHx8fA&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=1600 1600w, https://images.unsplash.com/photo-1573480813647-552e9b7b5394?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MXwxMTc3M3wwfDF8c2VhcmNofDM3fHx8ZW58MHx8fA&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2400 2400w" sizes="(min-width: 720px) 720px"><figcaption>Photo by <a href="https://unsplash.com/@topcools?utm_source=ghost&amp;utm_medium=referral&amp;utm_campaign=api-credit">topcools tee</a> / <a href="https://unsplash.com/?utm_source=ghost&amp;utm_medium=referral&amp;utm_campaign=api-credit">Unsplash</a></figcaption></figure><h3 id="what-is-linux-good-for">What is Linux good for?</h3><p>An operating system is, surprisingly, just a type of system. Systems are designed by humans, and better designs lead to better performance, stability, and flexibility. <strong>Linux is simply a better designed operating system</strong>. It's super flexible and stable - "blue screens of death" are exceedingly rare in production Linux servers, and their performance is very reliable. <strong>Which is why a vast majority of production systems run on Linux</strong>, and that's also why it's good for anyone working in tech to be Linux literate. That includes you, dear reader.</p><p>Being open source leads to high quality, as bugs have fewer dark places to hide in. Developers can peer under the covers to make sure their Linux applications will work well, rather than guessing and relying on questionable documentation from closed source operating system developers.</p><p>But with great power and flexibility comes a great ability to shoot yourself in the foot. Linux makes that easy as well.</p><h3 id="what-do-the-different-types-of-linux-mean">What do the different types of Linux mean?</h3><p>One of the confusing things when entering the Linux world is the giant jargon which is thrown in your face. It feels like the explanations expect you to already know and understand a bunch of other terms, without building understanding step by step. So, I'd like to give you a very brief summary of terms you might come across and what they mean.</p><h3 id="linux-like-systems">Linux-like systems</h3><p>Mac and Unix are very similar to, but are not Linux technically. You will have a hard time telling the difference, unless you dive deep.</p><p>Unix is older than Linux and extremely similar - In fact, Linux is an open source re-implementation of Unix (which was closed source, but very good). This is pretty much historic trivia, as Unix is rarely seen nowadays, but know that some people use the words Unix and Linux interchangeably.</p><p>In general, there‚Äôs a name for operating systems that look and feel like Unix ‚Äì POSIX compliant, or *nix. When you see these words, translate them as ‚Äúfollows the conventions of Linux, such as basic commands for file manipulation (ls, cd, mkdir) and "/" as the root of the file system etc.‚Äù</p><p>GNU is a large set of free software which is the foundation for much of Linux ‚Äì compilers, C libraries, programs to zip files, and many others. It's also the name of an independent POSIX operating system, with more hardcore ideology around free software than Linux.</p><p>All of the above systems, as well as Linux itself, are examples of POSIX compliant or *nix systems.</p><h3 id="linux-distributions-distros">Linux Distributions / Distros</h3><p>There are (too?) many flavours of ‚Äúreal Linux‚Äù, called distros or distributions. It can be a headache to differentiate them.</p><p>A distribution is like a "company", which invents a new operating system. They wrap the Linux Kernel with a new bundle of peripheral programs - i.e. they may use a different mix of GUI programs, support different hardware by default, etc. They release new versions occasionally.</p><p><strong>The bottom line ‚Äì unless you know what you‚Äôre doing, <a href="https://ubuntu.com/download/desktop">just use Ubuntu</a></strong>. It‚Äôs the most user friendly, widely supported, and easy to install.</p><p><a href="https://www.redhat.com/en/technologies/linux-platforms/enterprise-linux">Red Hat Enterprise Linux</a>, or RHEL, is a different distro which is used sometimes in heavy duty production servers. <a href="https://getfedora.org/">Fedora</a> is the desktop equivalent of RHEL - usually, developers aiming to run their applications on RHEL servers will use Fedora for their development computers, to avoid compatibility issues.</p><p><a href="https://alpinelinux.org/">Alpine</a> is a super minimal distro which is used for many Docker images. <a href="https://dagshub.com/blog/setting-up-data-science-workspace-with-docker/">Read our blog post about Docker for more information</a>.</p><h2 id="interfaces">Interfaces</h2><p>When people think of Linux, they usually associate it with a scary terminal (plus attached Anonymous hacker with a hoodie üë©‚Äçüíª).</p><p>Don't Panic ‚Äì it‚Äôs not so scary! Today, it‚Äôs really easy to install Linux on a computer, with a regular GUI wizard, if you pick a distro that cares about that sort of thing (for example, Ubuntu).</p><p>We'll focus on terminals / shells in this lecture, since that is always available, and generally where "real work" is done. Production servers will rarely have GUIs. Don't let that discourage you - after you get used to it, using the shell can become much more convenient than GUIs!</p><figure><img src="https://dagshub.com/blog/content/images/2020/12/image.png" alt="The Wizard will now install your software."><figcaption>The Wizard will now install your software.</figcaption></figure><h2 id="basics">Basics</h2><p>The following actions are very basic file manipulation commands - moving, copying, deleting, viewing, etc.<br>I think there are enough sources online to learn these basic commands, and so I won't be re-explaining them here. Below the list, I provide my recommended way to learn about them, so don't worry!</p><ul><li>ls</li><li>mv</li><li>cp</li><li>rm</li><li>pwd</li><li>cd</li><li>mkdir</li><li>echo</li><li>cat</li></ul><p><strong>The most convenient way I found to learn about these commands, even if you don't have a Linux terminal available, is to follow these tutorials:</strong></p><ol><li><a href="https://www.webminal.org/terminal/">https://www.webminal.org/terminal/</a><br><strong>Do up to and including lesson 3.</strong><br>Webminal includes an interactive terminal in the browser, which you can play with and use for the next tutorial (which doesn't have an interactive shell, only text and quizzes).</li><li><a href="https://linuxjourney.com/lesson/the-shell">https://linuxjourney.com/lesson/the-shell</a></li></ol><h2 id="the-shell">The Shell</h2><p>The shell (AKA terminal) is itself a program! It's in charge of things like: </p><ul><li>Taking keystrokes from the user</li><li>Displaying text output to the user.</li><li>Remembering what directory you're in currently (changed using <code>cd</code>, shown using <code>pwd</code>)</li><li>Turning your commands into <strong>new</strong> <strong>running programs &nbsp;- processes,</strong> by sending appropriate messages to the kernel</li></ul><p>For example, what does the shell do when I type <code>python hello_world.py</code> and press enter?</p><ul><li>It's in charge of knowing where the actual program called "python" is located in the file system - probably something like <code>/usr/bin/python</code>. In the end, the kernel is the only thing that can run new programs, and it expects absolute paths to files.</li><li>I can check where the shell is actually finding "python" by running <code>which python</code>. &nbsp;The <code>which</code> command outputs the full path found by the shell. How does it know? More on that later, in the section on runnable scripts.</li><li><code>which</code> is a useful command! Maybe you have several conflicting versions of python installed, and you're not sure which one is actually running and giving you problems. <code>which python</code> to the rescue!</li><li>Or maybe I have some runnable script, and I want to edit, delete or rename it, but I forgot where it's located. <code>which</code> to the rescue!</li><li>So, what actually happens is that the shell tells the kernel program: "Please take the program file located at <code>/usr/bin/python</code>, and turn that into a new running process with a single argument <code>/absolute/path/to/hello_world.py</code> , running inside the current ‚Ä¶</li></ul></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://dagshub.com/blog/effective-linux-bash-data-scientists/">http://dagshub.com/blog/effective-linux-bash-data-scientists/</a></em></p>]]>
            </description>
            <link>http://dagshub.com/blog/effective-linux-bash-data-scientists/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25443415</guid>
            <pubDate>Wed, 16 Dec 2020 15:08:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Static Calls in Linux 5.10]]>
            </title>
            <description>
<![CDATA[
Score 13 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25442991">thread link</a>) | @woodruffw
<br/>
December 16, 2020 | https://blog.yossarian.net/2020/12/16/Static-calls-in-Linux-5-10 | <a href="https://web.archive.org/web/*/https://blog.yossarian.net/2020/12/16/Static-calls-in-Linux-5-10">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">


<h2><em>Programming, philosophy, pedaling.</em></h2>

<ul>
    <li><a href="https://blog.yossarian.net/">Home</a></li>
    <li><a href="https://blog.yossarian.net/tags">Tags</a></li>
    <li><a href="https://blog.yossarian.net/favorites">Favorites</a></li>
    <li><a href="https://blog.yossarian.net/archive">Archive</a></li>
    
      <li><a href="https://yossarian.net/">Main Site</a></li>
    
</ul>

<hr>



<h2>
  <em>Dec 16, 2020</em>
</h2>

  <p>Tags:
  
    
    <a href="https://blog.yossarian.net/tags#programming">programming</a>,
    
  
    
    <a href="https://blog.yossarian.net/tags#c">c</a>,
    
  
    
    <a href="https://blog.yossarian.net/tags#curiosity">curiosity</a>,
    
  
    
    <a href="https://blog.yossarian.net/tags#security">security</a>,
    
  
    
    <a href="https://blog.yossarian.net/tags#x86">x86</a>
    
  
  </p>


<p>I was reading the
<a href="https://kernelnewbies.org/Linux_5.10">Linux 5.10 release summary on KernelNewbies</a>, and a
section stood out to me:</p>

<blockquote>
  <p>1.6. Static calls for improved post-Spectre performance</p>

  <p>Static calls are a replacement for global function pointers. They use code patching to allow
direct calls to be used instead of indirect calls. They give the flexibility of function pointers,
but with improved performance. This is especially important for cases where retpolines would
otherwise be used, as retpolines can significantly impact performance.</p>
</blockquote>

<p>I‚Äôve spent a lot of time looking at the Linux kernel, but never directly at its indirect call
setup or post-<a href="https://spectreattack.com/">Spectre</a> mitigations. These changes sound very cool,
so I‚Äôm going to use this post to try and explain and understand them (both to myself and others).</p>

<p><strong>Update</strong>: One of the original authors of the patchset has emailed me with some corrections
and answers to the questions that I ask below. I‚Äôve marked each with either ‚ÄúCorrection‚Äù or
‚ÄúUpdate.‚Äù Thanks, Peter!</p>

<h2 id="background-indirect-calls-spectre-and-retpolines">Background: indirect calls, Spectre, and retpolines</h2>

<h3 id="indirect-calls">Indirect calls</h3>

<p>Indirect calls are one of C‚Äôs most powerful language features, and are critical for writing
higher-order code without a supplementary object or function/method dispatch system.</p>

<p>Most C programmers are familiar with the basics of indirect calls, thanks to standard and POSIX
functions like <code>qsort</code> and <code>pthread_create</code>: each takes a <em>function pointer</em>, which it then
calls internally to complete the functionality of the surrounding call:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td><pre><span>#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;stdio.h&gt;
</span>
<span>/* qsort_strcmp is just the normal stdlib strcmp, with a bit of extra parameter
 * munging to match qsort's API.
 */</span>
<span>static</span> <span>int</span> <span>qsort_strcmp</span><span>(</span><span>const</span> <span>void</span> <span>*</span><span>a</span><span>,</span> <span>const</span> <span>void</span> <span>*</span><span>b</span><span>)</span> <span>{</span>
    <span>return</span> <span>strcmp</span><span>(</span><span>*</span><span>(</span><span>const</span> <span>char</span> <span>**</span><span>)</span><span>a</span><span>,</span> <span>*</span><span>(</span><span>const</span> <span>char</span> <span>**</span><span>)</span><span>b</span><span>);</span>
<span>}</span>

<span>int</span> <span>main</span><span>(</span><span>void</span><span>)</span> <span>{</span>
    <span>const</span> <span>char</span> <span>*</span><span>strings</span><span>[]</span> <span>=</span> <span>{</span><span>"foo"</span><span>,</span> <span>"bar"</span><span>,</span> <span>"baz"</span><span>};</span>

    <span>/* qsort is a generic sorting function:
     * you give it the a pointer to the base address of things to sort,
     * their number and individual sizes, and a *function* that can compare
     * any two members and provide an ordering between them.
     *
     * in this case, we tell qsort to sort an array of strings, using
     * `qsort_strcmp` for the ordering.
     */</span>
    <span>qsort</span><span>(</span><span>&amp;</span><span>strings</span><span>,</span> <span>3</span><span>,</span> <span>sizeof</span><span>(</span><span>char</span> <span>*</span><span>),</span> <span>qsort_strcmp</span><span>);</span>

    <span>printf</span><span>(</span><span>"%s %s %s</span><span>\n</span><span>"</span><span>,</span> <span>strings</span><span>[</span><span>0</span><span>],</span> <span>strings</span><span>[</span><span>1</span><span>],</span> <span>strings</span><span>[</span><span>2</span><span>]);</span>
    <span>return</span> <span>0</span><span>;</span>
<span>}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><em>(View it on <a href="https://godbolt.org/z/vbn7zW">Godbolt</a>).</em></p>

<p>In this case, the indirect call occurs within <code>qsort</code>. But we can see it directly if
we implement our own function that does an indirect call:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td><pre><span>static</span> <span>uint32_t</span> <span>good_rand</span><span>()</span> <span>{</span>
    <span>uint32_t</span> <span>x</span><span>;</span>
    <span>getrandom</span><span>(</span><span>&amp;</span><span>x</span><span>,</span> <span>sizeof</span><span>(</span><span>x</span><span>),</span> <span>GRND_NONBLOCK</span><span>);</span>
    <span>return</span> <span>x</span><span>;</span>
<span>}</span>

<span>static</span> <span>uint32_t</span> <span>bad_rand</span><span>()</span> <span>{</span>
    <span>return</span> <span>rand</span><span>();</span>
<span>}</span>

<span>/* munge takes a function pointer, rand_func, which it calls
 * as part of its returned result.
 */</span>
<span>static</span> <span>uint32_t</span> <span>munge</span><span>(</span><span>uint32_t</span> <span>(</span><span>*</span><span>rand_func</span><span>)(</span><span>void</span><span>))</span> <span>{</span>
    <span>return</span> <span>rand_func</span><span>()</span> <span>&amp;</span> <span>0xFF</span><span>;</span>
<span>}</span>

<span>int</span> <span>main</span><span>(</span><span>void</span><span>)</span> <span>{</span>
    <span>uint32_t</span> <span>x</span> <span>=</span> <span>munge</span><span>(</span><span>good_rand</span><span>);</span>
    <span>uint32_t</span> <span>y</span> <span>=</span> <span>munge</span><span>(</span><span>bad_rand</span><span>);</span>

    <span>printf</span><span>(</span><span>"%ul, %ul</span><span>\n</span><span>"</span><span>,</span> <span>x</span><span>,</span> <span>y</span><span>);</span>

    <span>return</span> <span>0</span><span>;</span>
<span>}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>where <code>munge</code> boils down to:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td><pre><span>munge:</span>
  <span>push</span>    <span>rbp</span>
  <span>mov</span>     <span>rbp</span><span>,</span> <span>rsp</span>
  <span>sub</span>     <span>rsp</span><span>,</span> <span>16</span>
  <span>mov</span>     <span>qword</span> <span>ptr</span> <span>[</span><span>rbp</span> <span>-</span> <span>8</span><span>],</span> <span>rdi</span>  <span>; load rand_func</span>
  <span>call</span>    <span>qword</span> <span>ptr</span> <span>[</span><span>rbp</span> <span>-</span> <span>8</span><span>]</span>       <span>; call rand_func</span>
  <span>and</span>     <span>eax</span><span>,</span> <span>255</span>
  <span>add</span>     <span>rsp</span><span>,</span> <span>16</span>
  <span>pop</span>     <span>rbp</span>
  <span>ret</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><em>(View it on <a href="https://godbolt.org/z/P44Ghq">Godbolt</a>).</em></p>

<p>Observe: our <code>call</code> goes through a memory or register operand (<code>[rbp - 8]</code>)<sup id="fnref:opt" role="doc-noteref"><a href="#fn:opt">1</a></sup> to get the target,
instead of a direct target specified by the operand value itself (like, say,
<code>call 0xacabacab ; @good_rand</code>). That‚Äôs what makes it indirect.</p>

<p>But we can go even further than this! Indeed, a common pattern in C is to declare
entire <em>structures</em> of operations, using each to parametrize a lower level set of behaviors
(for example, the core POSIX I/O APIs) over independent implementations.</p>

<p>This is exactly how <a href="https://github.com/libfuse/libfuse">FUSE</a> works: every FUSE client
creates its own <a href="https://github.com/libfuse/libfuse/blob/cd4aae2de6aacad31a15791bbb52adf173561a6d/include/fuse.h#L299-L790"><code>fuse_operations</code></a>:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td><pre><span>struct</span> <span>fuse_operations</span> <span>{</span>
  <span>int</span> <span>(</span><span>*</span><span>getattr</span><span>)</span> <span>(</span><span>const</span> <span>char</span> <span>*</span><span>,</span> <span>struct</span> <span>stat</span> <span>*</span><span>,</span> <span>struct</span> <span>fuse_file_info</span> <span>*</span><span>fi</span><span>);</span>
  <span>int</span> <span>(</span><span>*</span><span>readlink</span><span>)</span> <span>(</span><span>const</span> <span>char</span> <span>*</span><span>,</span> <span>char</span> <span>*</span><span>,</span> <span>size_t</span><span>);</span>
  <span>int</span> <span>(</span><span>*</span><span>mknod</span><span>)</span> <span>(</span><span>const</span> <span>char</span> <span>*</span><span>,</span> <span>mode_t</span><span>,</span> <span>dev_t</span><span>);</span>
  <span>int</span> <span>(</span><span>*</span><span>mkdir</span><span>)</span> <span>(</span><span>const</span> <span>char</span> <span>*</span><span>,</span> <span>mode_t</span><span>);</span>
  <span>int</span> <span>(</span><span>*</span><span>unlink</span><span>)</span> <span>(</span><span>const</span> <span>char</span> <span>*</span><span>);</span>
  <span>int</span> <span>(</span><span>*</span><span>rmdir</span><span>)</span> <span>(</span><span>const</span> <span>char</span> <span>*</span><span>);</span>
  <span>int</span> <span>(</span><span>*</span><span>symlink</span><span>)</span> <span>(</span><span>const</span> <span>char</span> <span>*</span><span>,</span> <span>const</span> <span>char</span> <span>*</span><span>);</span>
  <span>int</span> <span>(</span><span>*</span><span>rename</span><span>)</span> <span>(</span><span>const</span> <span>char</span> <span>*</span><span>,</span> <span>const</span> <span>char</span> <span>*</span><span>,</span> <span>unsigned</span> <span>int</span> <span>flags</span><span>);</span>
  <span>int</span> <span>(</span><span>*</span><span>link</span><span>)</span> <span>(</span><span>const</span> <span>char</span> <span>*</span><span>,</span> <span>const</span> <span>char</span> <span>*</span><span>);</span>
  <span>/* ... */</span>
  <span>int</span> <span>(</span><span>*</span><span>open</span><span>)</span> <span>(</span><span>const</span> <span>char</span> <span>*</span><span>,</span> <span>struct</span> <span>fuse_file_info</span> <span>*</span><span>);</span>
  <span>int</span> <span>(</span><span>*</span><span>read</span><span>)</span> <span>(</span><span>const</span> <span>char</span> <span>*</span><span>,</span> <span>char</span> <span>*</span><span>,</span> <span>size_t</span><span>,</span> <span>off_t</span><span>,</span>
         <span>struct</span> <span>fuse_file_info</span> <span>*</span><span>);</span>
  <span>int</span> <span>(</span><span>*</span><span>write</span><span>)</span> <span>(</span><span>const</span> <span>char</span> <span>*</span><span>,</span> <span>const</span> <span>char</span> <span>*</span><span>,</span> <span>size_t</span><span>,</span> <span>off_t</span><span>,</span>
          <span>struct</span> <span>fuse_file_info</span> <span>*</span><span>);</span>
  <span>int</span> <span>(</span><span>*</span><span>statfs</span><span>)</span> <span>(</span><span>const</span> <span>char</span> <span>*</span><span>,</span> <span>struct</span> <span>statvfs</span> <span>*</span><span>);</span>
  <span>/* ... */</span>
<span>}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Unsurprisingly, this technique isn‚Äôt limited to userspace: the Linux kernel itself makes
aggressive use of indirect calls, particularly in architecture-agnostic interfaces
(like the <a href="https://www.kernel.org/doc/html/latest/filesystems/vfs.html">VFS</a> and sub-specializations
like <code>procfs</code>) and the architecture-specific internals of subsystems like
<a href="https://perf.wiki.kernel.org/index.php/Main_Page"><code>perf_events</code></a>.</p>

<p>So that‚Äôs neat. It‚Äôs so neat that CPU engineers got all
<a href="https://en.wikipedia.org/wiki/Branch_predictor#Indirect_branch_predictor">hot in the pants</a> trying
to squeeze extra performance out of them<sup id="fnref:perf" role="doc-noteref"><a href="#fn:perf">2</a></sup>, and we ended up with
<a href="https://spectreattack.com/spectre.pdf">Spectre v2</a>.</p>

<h3 id="spectre-v2">Spectre (v2)</h3>

<p><img src="https://blog.yossarian.net/assets/spectre.png" alt="The Spectre logo"></p>

<p>The exact mechanism that Spectre v2 (also known as
<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-5715">CVE-2017-5715</a>) exploits is
<em>slightly</em> out of scope of this post, but at a high level:</p>

<ol>
  <li>
    <p>Modern (x86) CPUs contain an <em>indirect branch predictor</em>, which attempts to guess the target
of an indirect call or jump.</p>

    <p>To actually speed things up, the CPU <strong>speculatively executes</strong> the
 predicted branch:</p>

    <ul>
      <li>
        <p>A correct prediction means that the indirect call completes significantly faster
 (since it‚Äôs already executing or has finished executing speculatively);</p>
      </li>
      <li>
        <p>A misprediction <strong>should</strong> result in a slower (but still
 successful) indirect call with <strong>no side effects from the incorrect speculation.</strong></p>
      </li>
    </ul>

    <p>In other words: the CPU is responsible for <strong>rolling back</strong> any side effects associated
 with any misprediction and subsequent speculation. Mis-speculation is a <em>microarchitectural</em>
 detail that should not manifest in <em>architectural</em> changes, like modified registers.</p>
  </li>
  <li>
    <p><strong>Rolling back</strong> any mis-speculated state is a relatively expensive operation, with a lot of
microarchitectural implications: cache lines and other bits of state need to be fixed up so that
the <em>actual</em> program control flow isn‚Äôt tainted by failed speculations.</p>

    <p>In practice, rolling back the entire speculated state would undo most of the advantages
 of speculating in the first place. Instead of doing that, x86 and other ISAs will just mark
 (many) of the bits of speculated state (like cache lines) as stale.</p>
  </li>
  <li>
    <p>This fixup behavior (either reverting or marking speculated state) results in a
<a href="https://en.wikipedia.org/wiki/Side-channel_attack"><em>side-channel</em></a>: an attacker can
<em>train</em> the branch predictor to speculatively execute a bit of code
(not unlike a <a href="https://en.wikipedia.org/wiki/Return-oriented_programming">ROP gadget</a>) that modifies
a piece of microarchitectural state in a data-dependent manner, such as a cache entry
whose address is dependent on a secret value that was speculatively fetched.</p>

    <p>The attacker can then <em>probe</em> that microarchitectural state by <strong>timing</strong> access to it:
 fast accesses indicate a speculatively modified state, disclosing the secret.</p>
  </li>
</ol>

<p>The original Spectre v2 attack focused on cache lines since they‚Äôre relatively easy to time, even
from high level (and sandboxed!) languages that don‚Äôt have access to
<a href="https://c9x.me/x86/html/file_module_x86_id_30.html"><code>clflush</code></a> or other cache-line
primitives on x86. But the concept is a general one: it‚Äôs difficult to execute speculatively without
leaking <em>some</em> information, and subsequent vulnerabilities (like <a href="https://mdsattacks.com/">MDS</a> and
<a href="https://zombieloadattack.com/">ZombieLoad</a>) have exposed information leaks in other
microarchitectural features.</p>

<p>This is bad news: an attacker running one of the <strong>safest</strong> contexts (JavaScript or other managed
code, in a sandbox, in userspace) can conceivably train the indirect branch predictor to
speculatively execute a gadget in kernelspace, potentially
<a href="https://cyber.wtf/2017/07/28/negative-result-reading-kernel-memory-from-user-mode/">disclosing kernel memory</a>.</p>

<p>So, the kernel needed a new mitigation. That mitigation is <em>retpolines</em>.</p>

<h3 id="retpolines">Retpolines</h3>

<p>To mitigate Spectre v2, the kernel needs to prevent the CPU from speculating on an attacker
controlled indirect branch.</p>

<p>A retpoline (short for <em>ret</em>urn
<a href="https://en.wikipedia.org/wiki/Trampoline_(computing)"><em>trampoline</em></a>) does exactly that: indirect
jumps and calls are surrounded by a little <a href="https://en.wikipedia.org/wiki/Thunk">thunk</a> that
effectively traps the speculated execution in an infinite loop, spinning it until the misprediction
is resolved.</p>

<p>Intel‚Äôs
<a href="https://software.intel.com/security-software-guidance/api-app/sites/default/files/Retpoline-A-Branch-Target-Injection-Mitigation.pdf">Retpoline whitepaper</a>
has some helpful illustrations:</p>

<p><img src="https://blog.yossarian.net/assets/retpoline.png" alt="A visualization of speculative execution with and without a retpoline."></p>

<p>This works by converting the indirect control flow from an <em>indirect branch</em> to an
<em>indirect return</em><sup id="fnref:allreturns" role="doc-noteref"><a href="#fn:allreturns">3</a></sup>, hence the ‚Äúret‚Äù in retpoline. Returns are <em>also</em> predicted,
but with an additional mechanism given priority: the
<a href="https://blog.stuffedcow.net/2018/04/ras-microbenchmarks/">Return Stack Buffer</a><sup id="fnref:rsb" role="doc-noteref"><a href="#fn:rsb">4</a></sup>. To ensure that
the RSB can‚Äôt be maliciously trained away from the infinite loop, the retpoline begins with a
direct <code>CALL</code> that primes the RSB to always<sup id="fnref:notalways" role="doc-noteref"><a href="#fn:notalways">5</a></sup> predict the infinite loop.</p>

<p>Here‚Äôs what an indirect call retpoline <em>actually</em> looks like<sup id="fnref:ool" role="doc-noteref"><a href="#fn:ool">6</a></sup>, simplified significantly from
the <a href="https://elixir.bootlin.com/linux/v5.9.14/source/arch/x86/lib/retpoline.S">kernel</a>
<a href="https://elixir.bootlin.com/linux/v5.9.14/source/arch/x86/include/asm/nospec-branch.h">source</a>:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
</pre></td><td><pre><span>__x86_retpoline_rax:</span>
  <span>call</span> <span>.Ldo_rop_0</span>
<span>.Lspec_trap_0:</span>
  <span>pause</span>
  <span>lfence</span>
  <span>jmp</span> <span>.Lspec_trap_0</span>
<span>.Ldo_rop_0:</span>
  <span>mov</span> <span>[</span><span>rsp</span><span>],</span> <span>rax</span>
  <span>ret</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>‚Ä¶all of that to replace a simple <code>call [rax]</code>!</p>

<h3 id="consequences">Consequences</h3>

<p>There are repercussions for this kind of trickery:</p>

<ul>
  <li>
    <p>It‚Äôs slow when correctly predicted: we‚Äôve replaced a single indirect <code>CALL</code> with at least two
direct <code>CALL</code>s, plus a <code>RET</code>.</p>
  </li>
  <li>
    <p>It‚Äôs <em>really</em> slow when mispredicted: we <em>literally</em> spin in place using <code>PAUSE</code> and <code>LFENCE</code>.</p>
  </li>
  <li>
    <p>It‚Äôs a ROP gadget, so it <em>looks</em> like an exploit primitive. That means it screws with Intel‚Äôs
<a href="https://software.intel.com/sites/default/files/managed/4d/2a/control-flow-enforcement-technology-preview.pdf">CET</a>
and similar protections on other platforms. Intel claims that newer hardware will support ‚Äúenhanced
IBRS‚Äù<sup id="fnref:ibrs" role="doc-noteref"><a href="#fn:ibrs">7</a></sup> that will replace the ‚Ä¶</p></li></ul></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.yossarian.net/2020/12/16/Static-calls-in-Linux-5-10">https://blog.yossarian.net/2020/12/16/Static-calls-in-Linux-5-10</a></em></p>]]>
            </description>
            <link>https://blog.yossarian.net/2020/12/16/Static-calls-in-Linux-5-10</link>
            <guid isPermaLink="false">hacker-news-small-sites-25442991</guid>
            <pubDate>Wed, 16 Dec 2020 14:38:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Gloo Mesh Enterprise Beta Release ‚Äì Solo.io Service Mesh Management Plane]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25442825">thread link</a>) | @ilackarms
<br/>
December 16, 2020 | https://www.solo.io/blog/gloo-mesh-enterprise-beta-release/ | <a href="https://web.archive.org/web/*/https://www.solo.io/blog/gloo-mesh-enterprise-beta-release/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p><img src="https://www.solo.io/wp-content/uploads/2020/11/Gloo-Mesh-Enterprise-B.png" data-src="https://www.solo.io/wp-content/uploads/2020/11/Gloo-Mesh-Enterprise-B.png" alt="" width="1781" height="397" data-srcset="https://www.solo.io/wp-content/uploads/2020/11/Gloo-Mesh-Enterprise-B.png 1781w, https://www.solo.io/wp-content/uploads/2020/11/Gloo-Mesh-Enterprise-B-300x67.png 300w, https://www.solo.io/wp-content/uploads/2020/11/Gloo-Mesh-Enterprise-B-1024x228.png 1024w, https://www.solo.io/wp-content/uploads/2020/11/Gloo-Mesh-Enterprise-B-768x171.png 768w, https://www.solo.io/wp-content/uploads/2020/11/Gloo-Mesh-Enterprise-B-1536x342.png 1536w" data-sizes="(max-width: 1781px) 100vw, 1781px" srcset="https://www.solo.io/wp-content/uploads/2020/11/Gloo-Mesh-Enterprise-B.png 1781w, https://www.solo.io/wp-content/uploads/2020/11/Gloo-Mesh-Enterprise-B-300x67.png 300w, https://www.solo.io/wp-content/uploads/2020/11/Gloo-Mesh-Enterprise-B-1024x228.png 1024w, https://www.solo.io/wp-content/uploads/2020/11/Gloo-Mesh-Enterprise-B-768x171.png 768w, https://www.solo.io/wp-content/uploads/2020/11/Gloo-Mesh-Enterprise-B-1536x342.png 1536w"></p><p><span>From day one, our mission with Gloo Mesh has been to provide a service mesh command center that will give users indispensable features to manage a ‚Äúglooed‚Äù together mix of environments, and today I am excited to announce that Gloo Mesh Enterprise is now available in Beta. We are asking the Gloo community and customers to <a href="https://lp.solo.io/request-trial">request a trial</a>, <a href="https://docs.solo.io/gloo-mesh/latest/">get started</a> and provide <a href="https://slack.solo.io/">feedback</a> via Slack on this latest Gloo Mesh Enterprise Beta so that our teams can continue to improve the features for its upcoming general availability. In addition, Gloo Mesh Enterprise has released its accompanying long term support for Istio, Istio on ARM and FIPS compliant Istio in general availability today with a license.&nbsp;</span></p><p><span>Originally launched in early 2019, Gloo Mesh (previously Service Mesh Hub) aims to provide organizations with a command center for all their service mesh needs, from a single cluster with Istio to stitching together and providing consistency for multiple clusters running different service meshes.&nbsp;</span></p><p><img src="https://www.solo.io/wp-content/uploads/2020/11/Gloo_Mesh_Diagram-Flat_110320-V2.png" data-src="https://www.solo.io/wp-content/uploads/2020/11/Gloo_Mesh_Diagram-Flat_110320-V2.png" alt="" width="7272" height="3440" data-srcset="https://www.solo.io/wp-content/uploads/2020/11/Gloo_Mesh_Diagram-Flat_110320-V2.png 7272w, https://www.solo.io/wp-content/uploads/2020/11/Gloo_Mesh_Diagram-Flat_110320-V2-300x142.png 300w, https://www.solo.io/wp-content/uploads/2020/11/Gloo_Mesh_Diagram-Flat_110320-V2-1024x484.png 1024w, https://www.solo.io/wp-content/uploads/2020/11/Gloo_Mesh_Diagram-Flat_110320-V2-768x363.png 768w, https://www.solo.io/wp-content/uploads/2020/11/Gloo_Mesh_Diagram-Flat_110320-V2-1536x727.png 1536w" data-sizes="(max-width: 7272px) 100vw, 7272px" srcset="https://www.solo.io/wp-content/uploads/2020/11/Gloo_Mesh_Diagram-Flat_110320-V2.png 7272w, https://www.solo.io/wp-content/uploads/2020/11/Gloo_Mesh_Diagram-Flat_110320-V2-300x142.png 300w, https://www.solo.io/wp-content/uploads/2020/11/Gloo_Mesh_Diagram-Flat_110320-V2-1024x484.png 1024w, https://www.solo.io/wp-content/uploads/2020/11/Gloo_Mesh_Diagram-Flat_110320-V2-768x363.png 768w, https://www.solo.io/wp-content/uploads/2020/11/Gloo_Mesh_Diagram-Flat_110320-V2-1536x727.png 1536w"></p><p><span>Some of the exciting features you will find in the Enterprise Beta release includes:</span></p><ul><li><b>A Single Pane of Glass for Every Service Mesh On Every Cluster ‚Äì </b><span>Gloo Mesh helps users manage similar or mixed service meshes such as Istio and Open Service Mesh (originally from Microsoft) over multiple clusters.&nbsp;&nbsp;</span></li><li><b>Ability to Create a Virtual Mesh that Connects Multiple Clusters </b><span>‚Äì&nbsp; Join similar meshes, such as Istio, together in a virtual mesh that makes services discoverable and policies easy to manage anywhere, even across clusters. With Gloo Mesh Enterprise the promise of federated workloads is finally here!&nbsp;</span></li><li><b>Enhanced Security Across Your Mesh ‚Äì </b><span>Gloo Mesh includes end-to-end security across clusters and meshes and forms a virtual, zero trust, mesh.&nbsp;</span></li><li><b>WebAssembly Modules to Increase Engineer Productivity </b><span>‚Äì Extend your service mesh control plane to allow developers to declaratively initialize, build, push, and deploy Wasm filters to Istio workloads over multiple clusters.&nbsp;</span></li><li><b>Easy User Management </b><span>‚Äì No more wrangling of users with complex RBAC permissions across clusters and meshes. With Gloo Mesh Enterprise you can now define a single user policy for your service mesh or virtual mesh, and propagate that policy to all your environments.&nbsp;</span></li><li><b>Simplified Failover and Traffic Polices</b><span> ‚Äì Easy to define policies for service failover and traffic limits that are effortless to migrate throughout your service mesh environments.&nbsp;</span></li></ul><p><span>Istio Support Features:</span></p><ul><li><b>Long Term Enterprise Support for Istio</b><span> ‚Äì Gloo Mesh enterprise license includes support for N-3 versions of Istio. This long term support aligns Istio support with the underlying Kubernetes cluster and gives organizations the peace of mind that break fixes, security patches, and other Istio issues will be fixed with the type of enterprise support they require.&nbsp;</span></li><li><b>Istio for ARM</b><span> ‚Äì With new cloud providers releasing ARM instances that boost performance while decreasing cost, organizations‚Äô ARM portfolio has become increasingly important and Solo.io has listened with ARM build.&nbsp;</span></li><li><b>Istio with FIPS ‚Äì </b><span>&nbsp;Federal government agencies and those organizations serving them often need to comply with the Federal Information Processing Standard (FIPS-2) to maintain a minimum level of security. Solo.io has the option for FIPS-2 compliant build of Istio‚Äôs data plane.&nbsp;</span></li></ul><p><span>What‚Äôs Next for Gloo Mesh? The </span><span>Gloo Mesh team is working tirelessly on the new set of features based on what our customers and the community require in an Enterprise service mesh.&nbsp;</span></p><ul><li><span>Routing locality rules for cross cluster service failover and ability to access closest geographical workload ‚Äì e.g. one housed on east coast cluster vs. Asia.</span></li><li><span>Upstream enhancements for Istio</span></li><li><span>Full AWS App Mesh Support</span></li><li><span>Metrics for a single or multiple clusters</span></li><li><span>Virtual Mesh that includes AppMesh and Istio in a single logical mesh.&nbsp;</span></li><li><span>Istio lifecycle management&nbsp;</span></li></ul><p><span>To learn more about the features in the Beta release of Gloo Mesh please see the</span> <a href="https://www.solo.io/products/gloo-mesh/"><span>website</span></a><span>, </span><a href="https://docs.solo.io/gloo-mesh/main/"><span>documentation</span></a><span> and the public </span><a href="https://github.com/solo-io/gloo-mesh"><span>Github</span></a><span>.&nbsp;&nbsp;&nbsp;</span></p><p>You can also read about Making Web Assembly a first-class citizen on Gloo Mesh Enterprise Beta <span><a href="https://www.solo.io/blog/making-web-assem%E2%80%A6-enterprise-beta/">blog.</a></span></p><p><span>You can request a free trial of Gloo Mesh today <a href="https://lp.solo.io/request-trial">here</a>. To connect, join the </span><a href="https://solo-io.slack.com/archives/CJQGK5TQ8"><span>#gloo-mesh</span></a><span> channel in the Solo.io Slack.</span></p></div></div></div>]]>
            </description>
            <link>https://www.solo.io/blog/gloo-mesh-enterprise-beta-release/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25442825</guid>
            <pubDate>Wed, 16 Dec 2020 14:26:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[SolarWinds leaked FTP credentials through a public GitHub repo since 2018]]>
            </title>
            <description>
<![CDATA[
Score 179 | Comments 90 (<a href="https://news.ycombinator.com/item?id=25442734">thread link</a>) | @hackerpain
<br/>
December 16, 2020 | https://www.savebreach.com/solarwinds-exposed-ftp-credentials-back-in-2018-says-security-researcher-vinoth/ | <a href="https://web.archive.org/web/*/https://www.savebreach.com/solarwinds-exposed-ftp-credentials-back-in-2018-says-security-researcher-vinoth/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://www.savebreach.com/content/images/size/w300/2020/12/ss_solar.png 300w,
                            https://www.savebreach.com/content/images/size/w600/2020/12/ss_solar.png 600w,
                            https://www.savebreach.com/content/images/size/w1000/2020/12/ss_solar.png 1000w,
                            https://www.savebreach.com/content/images/size/w2000/2020/12/ss_solar.png 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://www.savebreach.com/content/images/size/w2000/2020/12/ss_solar.png" alt="SolarWinds Leaked FTP Credentials through a Public GitHub Repo &quot;mib-importer&quot; since 2018">
            </figure>

            <section>
                <div>
                    <h2 id="what-could-go-wrong-when-your-employees-commit-internal-information-to-public-github-repos">What could go wrong when your employees commit internal information to public GitHub repos? </h2><p>While <a href="https://savebreach.com/solarwinds-credentials-exposure-led-to-us-government-fireye-breach/">we were the first to report on the SolarWinds security vulnerability that possibly could have exposed their Downloads FTP server</a> credentials letting attackers to push malicious binaries and attack the US government and <a href="https://solarwinds.com/">SolarWinds</a>' other high profile clients, some more information has surfaced regarding the SolarWinds security vulnerability since then, that gives more insight into what possibly was exposed and whether it could have led to this massive breach of the US government. While majority of security researchers are of the opinion that this wasn't the main reason of the breach, and that there was a complex and sophisticated supply chain attack targeting <a href="https://solarwinds.com/">SolarWinds</a>, we believe<strong> these small security lapses could have given the attackers a larger attack surface to carry out their attacks</strong> and eventually might have helped strengthen their foothold into the SolarWinds infrastructure, to perform reconnaissance and evade detection.</p><h3 id="plain-old-ftp-to-the-blame">Plain old FTP to the blame?</h3><p>As per the screenshot posted by Vinoth, which we wrote about in our previous <a href="https://savebreach.com/solarwinds-credentials-exposure-led-to-us-government-fireye-breach/">post</a>, SolarWinds were possibly using unencrypted plain FTP server for their Downloads server in the age of global CDN technologies. However, not a direct attack vector its very likely that the FTP server had more vulnerabilities and unencrypted communication can always be intercepted, and modified. But we don't believe this maybe something as concerning as the FTP password leak.</p><h2 id="solarwinds-credentials-were-possibly-leaking-since-2018">SolarWinds Credentials were possibly leaking since 2018</h2><p>Security researcher Vinoth Kumar, told us that "SolarWinds had been possibly exposing the FTP credentials to the Download server since at least 2018". To corroborate his claim, Vinoth shared the the following link to the Configuration file exposed that was exposed in the mib-importer GitHub repo possibly belonging to a <a href="https://github.com/xkozus00">SolarWinds employee</a>, <a href="https://github.com/xkozus00/mib-importer/blob/master/Src/Lib/PurgeApp/PurgeApp.exe.config">https://github.com/xkozus00/mib-importer/blob/master/Src/Lib/PurgeApp/PurgeApp.exe.config</a> and he further added that, upon supplying the <a href="https://github.com/xkozus00/mib-importer">repo base url</a> to the Web Archive, it shows Web Archive had first archived the page back in June 2018, and that was the last time the page was archived. So we concluded that the credentials to the FTP server and other potentially sensitive information in that exposed repository possibly existed for more than 1 year in the public domain until Vinoth reported it to the SolarWinds PSIRT.</p><figure><img src="https://savebreach.com/content/images/2020/12/image-3.png" alt="" srcset="https://savebreach.com/content/images/size/w600/2020/12/image-3.png 600w, https://savebreach.com/content/images/size/w1000/2020/12/image-3.png 1000w, https://savebreach.com/content/images/2020/12/image-3.png 1411w" sizes="(min-width: 720px) 720px"><figcaption>Screenshot of the SolarWinds GitHub repository archived by Web Archive</figcaption></figure><p>This shows that SolarWinds might have been exposing their sensitive internal credentials since a fairly long time before it was brought to their notice, which in turn might have given its attackers an opportunity to steal certificates and other valuable internal information about SolarWinds to carry out the large scale attack against US government and other top organizations using the backdoored SolarWinds Orion software.</p><h2 id="the-mib-importer-github-repository">The mib-importer GitHub repository</h2><p>A "mib-importer" public GitHub repository, possibly belonging to a SolarWinds employee with secrets (like FTP username and password) exposed, was found on GitHub by the security researcher in November 2019, which is said to have existed from around June 2018</p><p>Upon analyzing, the SaveBreach team found out that SolarWinds Orion lets users import MIB files into it. MIB files are used for monitoring network devices. Apparently, the mib-importer tool was developed by SolarWinds to import MIB files into Orion. We found the following data from the <strong><a href="https://support.solarwinds.com/SuccessCenter/s/article/Add-MIBs-to-the-SolarWinds-MIB-database">SolarWinds documentation pages</a> </strong>regarding importing &nbsp;MIB files (Reference ‚Äì <a href="https://support.solarwinds.com/SuccessCenter/s/article/Upload-MIB-in-Orion-Universal-Device-Poller">1</a>, <a href="https://thwack.solarwinds.com/t5/NPM-Discussions/Adding-MIBs-to-Orion/m-p/113474">2</a>, <a href="https://thwack.solarwinds.com/t5/NPM-Discussions/Adding-MIBs-to-Orion/m-p/113474">3</a>)</p><p><a href="https://documentation.solarwinds.com/en/Success_Center/orionplatform/Content/Core-Management-Information-Base--MIB--sw1730.htm">From SolarWinds website</a> ‚Äì </p><blockquote>Management Information Base (MIB) is a structure that describes all objects a device can report on, such as CPU, fan, or temperature. MIB contains the name, datatype, and the object identifier (OID). MIB is a hierarchical structure, displayed as a navigation tree. Every entry in the MIB tree is a value for a specific component on a specific device.</blockquote><blockquote>SolarWinds maintains a MIB database that serves as a repository for the OIDs used to monitor a wide variety of network devices. The MIB database is updated regularly.</blockquote><h2 id="qa-with-cybersecurity-researcher-vinoth">Q&amp;A with cybersecurity researcher Vinoth</h2><p>From our most recent conversation with Vinoth, it appears that the credentials and possibly more sensitive data about SolarWinds was lying in public domain for a long time before finally being taken down. Vinoth doubts that the data might have also included certificates and not just FTP credentials, which was alone sufficient to sign the malicious binaries and upload them to the FTP server while passing off as legitimate software.</p><p><strong>Q: Since when do you think the GitHub repo might have been exposed? Do you think the attackers could have gained persistence into their infrastructure for almost 3 years to carry out the attack?</strong></p><p><strong><a href="https://twitter.com/vinodsparrow">Vinoth</a></strong>: I‚Äôm not sure, even on June 2018, 40 commits were there (in that repo). There was only one page available on archive couldn‚Äôt find anything else.</p><p><strong>Q: The Attackers had put signed binaries on the Download server. What was the process the attackers might have followed after getting access to the file upload server to sign the binaries?</strong></p><p><strong><a href="https://twitter.com/vinodsparrow">Vinoth</a></strong>: Not sure, but I could have missed checking the repo which could have had the certificate in it.</p><p><strong>Vinoth had tweeted that the GitHub repo was open to public since 17th June, 2018</strong></p><figure><blockquote data-width="550"><p lang="en" dir="ltr">That Github repo was open to the public since 17 Jun 2018 üò± <a href="https://t.co/SHUWaPXIeK">pic.twitter.com/SHUWaPXIeK</a></p>‚Äî Vinoth Kumar (@vinodsparrow) <a href="https://twitter.com/vinodsparrow/status/1338956534147993601?ref_src=twsrc%5Etfw">December 15, 2020</a></blockquote>

<figcaption>Tweet by Vinod about the web archived GitHub repository page</figcaption></figure><h2 id="certificates-used-to-sign-malicious-binaries-exposed-through-github-repo">Certificates used to sign malicious binaries exposed through GitHub repo?</h2><p>This raises many questions. Were the certificates used to sign the binaries obtained from that public GitHub repository or, from any other information leaked publicly? &nbsp;Exposed certificate could have allowed hackers to sign their malicious SolarWinds Orion binaries and pass them off as legitimate software developed by SolarWinds, subsequently uploading them to the Downloads server with the previously found leaked FTP credentials.</p><h2 id="was-this-how-solarwinds-got-hacked">Was this How SolarWinds got hacked?</h2><p>We can come to a partial conclusion that the internal information exposed on GitHub was there for a sufficiently long time for the attackers to have already exploited them to gain their initial foothold. Although unclear at this point, as there maybe a more sophisticated and complex attack chain with evasion techniques as being claimed by FireEye and security researchers, but we do feel this might have been a precursor to the SolarWinds breach and the widespread cyber attack against the US Government.</p>
                </div>
            </section>

                <section>
    <h3>Subscribe to SaveBreach | Cyber Security, Bug Hunting &amp; Domain Acquisitions</h3>
    <p>Get the latest posts delivered right to your inbox</p>
    <form data-members-form="subscribe">
        
        <p><strong>Great!</strong> Check your inbox and click the link to confirm your subscription.
        </p>
        <p>
            Please enter a valid email address!
        </p>
    </form>
</section>

        </article>

    </div>
</div></div>]]>
            </description>
            <link>https://www.savebreach.com/solarwinds-exposed-ftp-credentials-back-in-2018-says-security-researcher-vinoth/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25442734</guid>
            <pubDate>Wed, 16 Dec 2020 14:19:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Tig ‚Äì Text-mode interface for Git]]>
            </title>
            <description>
<![CDATA[
Score 290 | Comments 95 (<a href="https://news.ycombinator.com/item?id=25442510">thread link</a>) | @lemonspat
<br/>
December 16, 2020 | https://jonas.github.io/tig/ | <a href="https://web.archive.org/web/*/https://jonas.github.io/tig/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p>Tig is an ncurses-based text-mode interface for git. It functions mainly
as a Git repository browser, but can also assist in staging changes for
commit at chunk level and act as a pager for output from various Git
commands.</p>
</div></div>]]>
            </description>
            <link>https://jonas.github.io/tig/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25442510</guid>
            <pubDate>Wed, 16 Dec 2020 14:00:03 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Getting started with C programming a lightning-fast start for absolute beginners]]>
            </title>
            <description>
<![CDATA[
Score 51 | Comments 39 (<a href="https://news.ycombinator.com/item?id=25442165">thread link</a>) | @hdante
<br/>
December 16, 2020 | https://not.cafe/2020/10/12/getting-started-with-c-programming.html | <a href="https://web.archive.org/web/*/https://not.cafe/2020/10/12/getting-started-with-c-programming.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div>
      <article>
    

  <h5>Posted at <time>2020-10-13 00:32+0000</time>
  
          , <em>last edit: <time>2020-12-14 18:47+0000</time></em>
  
  </h5>

  
  

  <p><span>!‚òï</span> This tutorial will guide you through writing the
‚ÄúHello World‚Äù program in the C programming language. You‚Äôll use Unix-style terminal
emulators and command-line tools to execute commands, Linux-style package managers to
install programs and libraries, the GNU nano text editor to write C code, the meson build
system to build executable programs and the Gtk+ library to write portable, cross-platform
graphical programs.</p>

<figure>
  <a href="https://commons.wikimedia.org/wiki/File:Ken_Thompson_(sitting)_and_Dennis_Ritchie_at_PDP-11_(2876612463).jpg" target="_blank">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Ken_Thompson_%28sitting%29_and_Dennis_Ritchie_at_PDP-11_%282876612463%29.jpg/599px-Ken_Thompson_%28sitting%29_and_Dennis_Ritchie_at_PDP-11_%282876612463%29.jpg" alt="Ken Thompson (sitting) and Dennis Ritchie at PDP-11">
  </a>
  <figcaption>
    <a href="https://en.wikipedia.org/wiki/Dennis_Ritchie" target="_blank">
    Dennis Ritchie
    </a> (standing), the creator of the C programming language, with
    <a href="https://en.wikipedia.org/wiki/Ken_Thompson" target="_blank">Ken Thompson</a>, the
    creator of Unix. Ken is using a
    <a href="https://en.wikipedia.org/wiki/Teleprinter" target="_blank">teletypewriter</a>
    (known as a tty on Unix) typewriter-style
    <a href="https://en.wikipedia.org/wiki/Computer_terminal" target="_blank">physical terminal</a>.
    Behind is the <a href="https://en.wikipedia.org/wiki/PDP-11" target="_blank">DEC PDP-11</a>
    minicomputer.
  </figcaption>
</figure>

<p>Instructions&nbsp;for&nbsp;three operating systems are provided: macOS, Ubuntu Linux and
Windows. The selected tools are personal favorites and were hand picked to allow the
fastest development and to allow identical development flows (and thus seamless
environment switching) on the three operating systems. All tools used in this tutorial are
<a href="https://en.wikipedia.org/wiki/Free_and_open-source_software" target="_blank">free, open source software</a>
and can be downloaded and used without any issues. No programming experience is required,
as this tutorial is for absolute beginners.</p>

<h3 id="before-we-start-terminals">Before we start: terminals</h3>

<p>There are a few notes for absolute beginners that will make our path easier and faster to
understand: to stay short, the tutorial will only guide through the setup process, but
will not teach the C language; references for next steps will be given at the end; some
program downloads may be large and take some time.</p>

<p>Programming languages and textual commands are very different from spoken languages:
programs must be written in a very strict way. Miss a comma and the program will stop
working. The most important rule for a beginner is that the C language, like most other
programming languages, is case sensitive, that is, upper case letters are considered
distinct from lower case letters and one can‚Äôt be swapped for the other. Keep this in mind
when typing the code and when in doubt copy and paste it to make sure all symbols are
correctly written.</p>

<figure>
  <a href="https://www.sydney.edu.au/science/psychology/pdp-11/terminals.html" target="_blank">
    <img src="https://not.cafe/assets/2020/terminals.jpeg" alt="PDP-11 terminals">
  </a>
  <figcaption>
    The <a href="https://en.wikipedia.org/wiki/VT52#VT55" target="_blank">DEC VT55</a>
    (display-style terminal, left side), the
    <a href="https://en.wikipedia.org/wiki/DECwriter" target="_blank">DECwriter</a>
    (dot-matrix printer-style terminal) and the
    <a href="https://en.wikipedia.org/wiki/Teletype_Model_33" target="_blank">Teletype ASR-33</a>
    (typewriter-style terminal).
  </figcaption>
</figure>

<p>We‚Äôll&nbsp;use&nbsp;the terminal emulator application to type textual commands. I‚Äôll
succintly explain what each command does and will show each command written after a dollar
sign. The dollar sign represents the terminal emulator‚Äôs prompt symbol, and that‚Äôs the
usual symbol that the command line input program, called the shell, displays when waiting
for a command. For example:</p>

<pre><code>$ ls -l
</code></pre>

<p>In the above example, we type after the prompt symbol: <code>ls[space][minus]l</code>, then press
<code>[enter]</code> to execute. In this example, we execute the <code>ls</code> program (list directory) with
the <code>-l</code> parameter (a specific parameter for the program, changes the output mode to long,
or more descriptive). Same example, but also showing the resulting output in my computer:</p>

<pre>$ ls -l
total 7344
-rw-r--r-- 1 hdante users    9999 set 19 19:12 coffee-34251.svg
-rw-r--r-- 1 hdante users     347 set 19 19:12 coffee-34251.svg.license
-rw-r--r-- 1 hdante users   16805 set 19 19:12 favicon.ico
-rw-r--r-- 1 hdante users    3253 set 19 19:12 favicon.svg
-rw-r--r-- 1 hdante users   11665 out  2 18:49 index.html
-rw-r--r-- 1 hdante users   17833 set 19 19:12 not-coffee.svg
-rw-r--r-- 1 hdante users 2372085 set 19 19:12 radio.caf
-rw-r--r-- 1 hdante users 2656465 set 19 19:12 radio.mka
-rw-r--r-- 1 hdante users 2401864 set 19 19:12 radio.opus
-rw-r--r-- 1 hdante users    3263 out  2 16:48 site.css
-rw-r--r-- 1 hdante users    2166 set 19 19:12 square.svg
$ </pre>

<p>So,&nbsp;after&nbsp;running the <code>ls</code> program with the <code>-l</code> parameter, it shows the long
description of current directory and another dollar symbol appears at the end, it‚Äôs
waiting for a new command. Don‚Äôt worry about understanding this example, I‚Äôll also add
references at the end for learning more about using Unix-style command-line tools.</p>

<h3 id="installation">Installation</h3>

<figure>
  <a href="https://not.cafe/assets/2020/macos-terminal-app.jpeg" target="_blank">
    <img src="https://not.cafe/assets/2020/macos-terminal-app.jpeg" alt="macOS Terminal App">
  </a>
  <figcaption>
    The
    <a href="https://en.wikipedia.org/wiki/Terminal_(macOS)" target="_blank">
    macOS Terminal.app
    </a> is a
    <a href="https://en.wikipedia.org/wiki/Terminal_emulator" target="_blank">terminal emulator</a>.
    Modern terminals are software that emulate physical terminals.
  </figcaption>
</figure>

<p>Different&nbsp;procedures&nbsp;are required for each operating system. Pick the best one
for you. After installing, writing and running code will work the same way. We‚Äôll write a
single cross-platform program that works on all three systems and build it using the same
cross-platform build tools.</p>

<h4 id="macos">macOS</h4>

<p>For macOS, only the terminal emulator comes installed with the operating system. The Apple
provided C compiler is the
<a href="https://en.wikipedia.org/wiki/Clang" target="_blank">LLVM clang compiler</a>,
contained in the ‚ÄúXcode command line tools‚Äù package. To install it, open the Terminal
application by opening the Spotlight search input, then typing Terminal (or find it in the
Utilities folder inside Applications). In the terminal emulator, type:</p>

<pre><code>$ xcode-select --install
</code></pre>

<p>The Xcode installation program will start. Follow the instructions that will appear and in
the end, the LLVM clang C compiler will be installed. You can check if it‚Äôs working by
executing it with the <code>--version</code> parameter:</p>

<pre><code>$ clang --version
</code></pre>

<p>For installing packages like build tools, text editors and libraries, we‚Äôll install the
<a href="https://en.wikipedia.org/wiki/Homebrew_(package_manager)" target="_blank">Homebrew package manager</a>,
which is the main Linux-style package manager for macOS. The package manager allows
single-command installing, configuring, upgrading and removing of packages from the
command line. Go to <a href="https://brew.sh/" target="_blank">brew.sh</a> and access the
instructions there, or simply execute this command to download and install it:</p>

<pre><code>$ /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"
</code></pre>

<p>Notice that this command is already more complex than the previous ones, downloading and
executing the install script from the Homebrew source code repository, and gives a hint on
the power and efficiency of the command line. Don‚Äôt worry trying to understand it, we‚Äôre
installing Homebrew exactly to make it easy to execute complex package installations.
[<strong>edit 20201214</strong>: It might be necessary to restart the Terminal App and configure the
search path after installing <code>brew</code> to be able to use it. When in doubt, check the
<a href="https://docs.brew.sh/">Homebrew documentation</a>.]</p>

<p>Now that Homebrew is installed, you may install packages with <code>brew install</code> and search
packages with <code>brew search</code>. Search and install the GNU nano text editor with:</p>

<pre><code>$ brew search nano
$ brew install nano
</code></pre>

<h4 id="linux">Linux</h4>

<figure>
  <a href="https://not.cafe/assets/2020/gcc-on-ubuntu.png" target="_blank">
    <img src="https://not.cafe/assets/2020/gcc-on-ubuntu.png" alt="gcc on Ubuntu">
  </a>
  <figcaption>
    Installing gcc on Ubuntu Linux.
  </figcaption>
</figure>

<p>We‚Äôll&nbsp;use&nbsp;the apt package manager available in
<a href="https://ubuntu.com/" target="_blank">Ubuntu Linux</a> from the Debian family, but
other Linux distributions using, for example,
<a href="https://www.redhat.com/sysadmin/how-manage-packages" target="_blank">yum</a>,
<a href="https://docs.fedoraproject.org/en-US/quick-docs/dnf/" target="_blank">dnf</a>,
<a href="https://wiki.archlinux.org/index.php/Pacman" target="_blank">pacman</a>,
etc. will work in pretty much the same way. On Linux the
<a href="https://gcc.gnu.org/" target="_blank">GNU Compiler Collection</a>
usually comes preinstalled, so we‚Äôll use it instead of clang, but they work the same way.
Open a terminal by clicking the activities menu on the top left of the screen and writing
terminal in the search input (or click on the terminal icon in the favorites bar). In the
terminal emulator, write:</p>

<pre><code>$ sudo apt-get install gcc
</code></pre>

<p>Ubuntu Linux and most other distributions require switching to administrator (root) mode
to install programs, so we use the <code>sudo</code> program to execute <code>apt-get</code> in root mode (you
may also use the <code>su</code> program, if <code>sudo</code> is not installed). Type your password and follow
the instructions. In the end, check gcc:</p>

<pre><code>$ gcc --version
</code></pre>

<p>You may install packages with <code>sudo apt-get install</code> and search packages with <code>apt-cache
search</code>:</p>

<pre><code>$ apt-cache search nano
$ sudo apt-get install nano
</code></pre>

<p>For other Linux distributions, use the appropriate package manager:</p>

<pre><code>$ yum search nano         # for RedHat Linux/CentOS
$ sudo yum install nano   # for RedHat Linux/CentOS
</code></pre>

<h4 id="windows">Windows</h4>

<figure>
  <a href="https://www.msys2.org/" target="_blank">
    <img src="https://not.cafe/assets/2020/msys2-website.jpeg" alt="MSYS2 website">
  </a>
  <figcaption>
    <a href="https://www.msys2.org/" target="_blank">MSYS2 website</a>. MSYS2 is a
    toolkit for Windows development that contains Unix-style tools.
  </figcaption>
</figure>

<p>For Windows we‚Äôll use the
<a href="https://en.wikipedia.org/wiki/Mingw-w64#MSYS2" target="_blank">MSYS2 toolkit</a>,
which provides a terminal emulator, the pacman package manager and a complete set of
Unix-style command line tools. Download the MSYS2 installer from
<a href="https://www.msys2.org/" target="_blank">www.msys2.org</a> and follow the
instructions to install the package. When installed, MSYS2 will provide three sets of
programs, which are selected whenever opening the terminal emulator. They are called the
MSYS2 shell, the MINGW64 shell (pronounced mingwee 64) and the MINGW32 shell. The MINGW64
shell is the appropriate one to develop Windows programs. The MSYS2 is appropriate for
managing MSYS2 itself and the MINGW32 is the 32-bit version that shouldn‚Äôt be used
anymore. After installing MSYS2 it‚Äôs necessary to immediatelly upgrade it. Open the MSYS2
shell and type:</p>

<pre><code>$ pacman -Syu
</code></pre>

<p>Follow the instructions and if requested restart the terminal emulator. On Windows we‚Äôll
use the <a href="https://gcc.gnu.org/" target="_blank">GNU Compiler Collection</a> C
compiler (gcc):</p>

<pre><code>$ pacman -S mingw-w64-x86_64-toolchain
</code></pre>

<p>After installing, to test gcc, you must use a MINGW64 shell. If you‚Äôre running the MSYS2
shell for executing pacman, open another terminal running the MINGW64 shell and type:</p>

<pre><code>$ gcc --version
</code></pre>

<p>From now on, we‚Äôll assume that the MINGW64 shell is being used. Notice that pacman runs
normally both on MSYS2 and MINGW64 shells. You may install packages with <code>pacman -S</code> and
search packages with <code>pacman -Ss</code>:</p>

<pre><code>$ pacman -Ss nano
$ pacman -S nano
</code></pre>

<h3 id="hello-world-">Hello, World !</h3>

<figure>
  <a href="https://not.cafe/assets/2020/nano-on-macos.jpeg" target="_blank">
    <img src="https://not.cafe/assets/2020/nano-on-macos.jpeg" alt="GNU nano on macOS">
  </a>
  <figcaption>
    Writing the Hello World program using GNU nano on macOS.
  </figcaption>
</figure>

<p>After installing the compilers, remember installing the
<a href="https://en.wikipedia.org/wiki/GNU_nano" target="_blank">GNU nano</a> text editor:</p>

<pre><code>$ brew install nano    # (or apt-get, or pacman)
</code></pre>

<p>Now, let‚Äôs create a new root directory to store this project and all future code:</p>

<pre><code>$ mkdir code
$ cd code
</code></pre>

<p>The first command above creates a new directory called <code>code</code>. If it already exists, it
will complain. Change the name if you prefer something else. The second command changes
the current directory to the <code>code</code> directory (the current directory is the directory used
when file operations specify file names without ‚Ä¶</p></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://not.cafe/2020/10/12/getting-started-with-c-programming.html">https://not.cafe/2020/10/12/getting-started-with-c-programming.html</a></em></p>]]>
            </description>
            <link>https://not.cafe/2020/10/12/getting-started-with-c-programming.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25442165</guid>
            <pubDate>Wed, 16 Dec 2020 13:21:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Experiments on a $50 DIY air purifier that takes 30s to assemble]]>
            </title>
            <description>
<![CDATA[
Score 113 | Comments 52 (<a href="https://news.ycombinator.com/item?id=25442097">thread link</a>) | @dyno-might
<br/>
December 16, 2020 | https://dyno-might.github.io/2020/12/15/some-real-data-on-a-DIY-box-fan-air-purifier/ | <a href="https://web.archive.org/web/*/https://dyno-might.github.io/2020/12/15/some-real-data-on-a-DIY-box-fan-air-purifier/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div>
        <div>
            
            <p><strong>Dec 15, 2020</strong></p>
            
            



<p>Bad air is bad for you. The air purifier market, though, is a mess. Every purifier uses incompatible proprietary filters, presumably to lock you into buying replacements. How do we know these actually work? Few seem to publish lab tests. And why does it cost $100-$300 for a big plastic box with a fan and a filter inside?</p>

<p>It‚Äôs common to build DIY air purifiers by basically strapping a filter to a fan. I like the idea of these, but again, it‚Äôs hard to be confident they really work. There‚Äôs a few experiments out there, but not enough to make me comfortable. So I decided to do some experimenting of my own. I made a purifier, generated smoke, and measured how well it removes tiny particles.</p>



<p>If you‚Äôre in a hurry, this post says that if you strap two HEPA filters to a box fan, it will clear the air of basically all the particles we can measure, and it will do it faster than a commercial filter that costs twice as much.</p>

<p><img src="https://dyno-might.github.io/img/purifier/smallroom_log.jpg" alt="in a large room the DIY filter does slightly better than the commercial filter"></p>



<h3 id="diy-purifier">DIY purifier</h3>

<p>My DIY purifier was <em>very</em> simple. (I don‚Äôt want to promote any particular brands here. Contact me if you want the exact products.)</p>

<ul>
  <li>A standard box fan. (Cost: $19)</li>
  <li>Two HEPA air filters, each approximately 32 cm x 22 cm and 5cm thick. (Cost: $35 for both)</li>
  <li>A bungie cord. (Cost: Free)</li>
</ul>

<p>Assembly takes about 30s. You put the filters on the intake side of the fan and strap them on with the bungie cord. Here‚Äôs a picture:</p>

<p><img src="https://dyno-might.github.io/img/purifier/filter_notape.jpg" alt="DIY purifier" max-width="60%" min-width="35%"></p>

<p>Timeless elegance and grace, it is not. I get the shakes just looking at that bit of crinkled filter.</p>

<h3 id="commercial-purifier">Commercial purifier</h3>

<p>As a comparison, I got a $100 air purifier from a well-known brand that‚Äôs intended for small rooms. It uses uses a single HEPA filter that‚Äôs about 25cm x 12cm and 4cm thick. Replacement filters currently cost around $25.</p>

<h3 id="smoke">Smoke</h3>

<p>It‚Äôs surprisingly hard to repeatedly generate a consistent amount of smoke. I tried burning various things (paper, cardboard) and found that the number of particles generated can vary by an order of magnitude, depending on the burn pattern. This is difficult to control and effectively random.</p>

<p>Ideally, I‚Äôd have liked to burn some food product like oil, since the kitchen is usually the biggest source of indoor air pollution. I couldn‚Äôt figure out a good way of doing this, either: You‚Äôd need to have the same amount of oil distributed in the same way and heated to the same temperature.</p>

<p>I finally settled on using incense. I cut sticks to the length of a standard credit card and then attached the ends horizontal to the ground. This seemed to be pretty consistent. In retrospect, I bet that burning toast in a toaster would work well. (I didn‚Äôt have one on hand.)</p>

<h3 id="measurements">Measurements</h3>

<p>I borrowed a cheap-ish ($100) air quality monitor from a friend. I think it‚Äôs made by some company in China and then re-sold by various white-label brands. I can‚Äôt figure out who the original manufacturer is. Based on data I‚Äôve seen for the reliability of other air quality monitors, I wouldn‚Äôt trust the absolute numbers, but the I think the <em>relative</em> measurements should still be OK.</p>

<p>The typical measurement for particulate pollution is ‚ÄúPM 2.5‚Äù which is in units of Œºg/m¬≥. This is intended to measure what you‚Äôd get if you did the following:</p>
<ul>
  <li>Take a cubic meter of air.</li>
  <li>Filter all the solid particles out of the air.</li>
  <li>Keep only the solid particles that are are 2.5 micrometers (Œºm) or smaller.</li>
  <li>Weigh all the particles you kept in micrograms (Œºg).</li>
</ul>

<p>Here are some ways to interpret these numbers:</p>
<ul>
  <li>The EPA says yearly averages should be below 12 and daily averages below 35.</li>
  <li>The average outdoor level ranges from 6 in Finland to almost 100 in Nepal. Rich countries are typically under 15. The highest levels are typically found in Asia and Africa.</li>
  <li>Cooking can easily cause PM 2.5 measurements to spike into the hundreds. I‚Äôve observed myself that this can happen with only a small amount of visible smoke.</li>
</ul>

<h3 id="logging">Logging</h3>

<p>Since the air quality monitor doesn‚Äôt log data, I used an ultra-hacky alternative: I set the monitor next to a laptop running a stopwatch. I then aimed a tabet at both of those screens and took a timelapse video. Finally, I manually transcribed the data by going to each minute marker in the data. (This was even more tedious than it sounds.)</p>



<p>I ran a first experiment in a tiny room of around 8 „é•. Due to worries that wind from the purifiers might change the speed the incense burned, I placed it on the opposite side of a wall, with a gap of around 20 cm near the ceiling.</p>

<p><img src="https://dyno-might.github.io/img/purifier/setup_tinyroom.jpg" alt="tiny room setup"></p>

<p>I repeated the experiment once with no filter, once with a commercial filter, and once with the DIY filter. Here are the results:</p>

<p><img src="https://dyno-might.github.io/img/purifier/smallroom_linear.jpg" alt="smallroom measurements in linear space"></p>

<p>Things are a bit random around the beginning, probably due to the drifting of the smoke before it‚Äôs equalized in the room. With no filter at all, this spikes all the way to 1000 Œºg/m¬≥, the maximum the instrument can show.</p>

<p>If we make the y-axis logarithmic, it becomes quite clear that the DIY filter is cleaning the air at a better rate. (This is the picture from the top of this page.)</p>

<p><img src="https://dyno-might.github.io/img/purifier/smallroom_log.jpg" alt="smallroom measurements in log space"></p>

<p>If we take the EPA‚Äôs threshold of 12 Œºg/m¬≥, the DIY filter gets there in around 15 minutes, while the commercial filter take around 25 minutes.</p>



<p>Thankfully, I don‚Äôt spend most of my time in an 8 „é• room. Thus, I repeated the experiment in a large room of around 100 „é•. Here there was no wall between incense and purifier. Instead I left around a meter of distance between the incense and purifier and the purifier and the monitor.</p>

<p><img src="https://dyno-might.github.io/img/purifier/setup_largeroom.jpg" alt="large room setup"></p>

<p>Here are the results:</p>

<p><img src="https://dyno-might.github.io/img/purifier/largeroom_linear.jpg" alt="large room measurements in linear space"></p>

<p>There‚Äôs even more randomness around the beginning, probably just due to how the smoke drifts around. Based on the room volume we‚Äôd expect a peak concentration with no filter of around 80 Œºg/m¬≥ = 1000 Œºg/m¬≥ * (8/100). Reassuringly, this is pretty close to what we see.</p>

<p>The DIY purifier looks a bit better. If we plot in log space, it‚Äôs more clear that it is indeed filtering at a better rate:</p>

<p><img src="https://dyno-might.github.io/img/purifier/largeroom_log.jpg" alt="large room measurements in log space"></p>



<p>It‚Äôs common advice for DIY purifiers like this to seal around the edges of the filter so that all air must pass through it.  I share the intuition that this would help, but it‚Äôs hard to be sure: If you block airflow, you slow down the fan. This could be counterproductive.</p>

<p>In this case at least, experiment is easier than theory. I took packing tape and carefully sealed around the intake side.</p>

<p><img src="https://dyno-might.github.io/img/purifier/filter_tape.jpg" alt="DIY purifier with tape" max-width="60%" min-width="35%"></p>

<p>And the results are‚Ä¶</p>

<p><img src="https://dyno-might.github.io/img/purifier/taping.jpg" alt="taping around the filter has no effect"></p>

<p>‚Ä¶nothing!?</p>

<p>This was unexpected. I thought the tape would help, but I wouldn‚Äôt have been surprised if it hurt instead. Instead, there‚Äôs basically no difference at all. I don‚Äôt know enough about fluid dynamics to even speculate about what‚Äôs happening here, so I won‚Äôt try.</p>

<p>There could be some weird quirk in how I ran this experiment. This doesn‚Äôt necessarily mean that all the advice to tape around the filter is <em>wrong</em>. However, I‚Äôve never seen any experriments that show taping helps either.</p>



<p><strong>Cost.</strong> The DIY purifier isn‚Äôt dramatically cheaper than the commercial one, but I expect the filters would need to be replaced much less often. The commercial purifier uses a single filter with an area of 300 cm¬≤, whereas the DIY purifier uses two filters with a total area of around 1400 cm¬≤, and also slightly thicker. It‚Äôs reasonable to assume the DIY filters could remove ~4 times as many particles before replacement.</p>

<p><strong>Durability.</strong> One concern is that box fans aren‚Äôt meant to be used with filters attached and could wear out. This is reasonable. However, box fans are much cheaper than commercial purifiers, and I‚Äôve been using this particular fan with various filters attached for several years now without issue.</p>

<p><strong>Electricity.</strong> The cost of electricity is another factor. Typical box fans seem to use around 55W, whereas commercial purifiers typically use 30-45W. If electricity costs $0.13 / kWh, the box fan would cost around $62 to operate 24 hours a day for a year, while a 30-watt purifier would cost around $34. Obviously, these numbers decrease if you run the purifier less. Some (more expensive) commercial purifiers have air quality sensors built in and automatically turn on only when needed.</p>

<p><strong>MERV or HEPA?</strong> Most people who build box-fan purifiers use <a href="https://en.wikipedia.org/wiki/Minimum_efficiency_reporting_value">MERV</a>-rated filters intended for furnaces. Commercial air purifiers use <a href="https://en.wikipedia.org/wiki/HEPA">HEPA</a>-rated filters. Roughly speaking, HEPA filters are ‚Äúbetter‚Äù in that they are rated to remove a higher percentage of particles in one pass. It‚Äôs not clear that HEPA filter will actual perform better when attached to a fan, though: A filter that catches fewer particles in one pass might still be better if it allows for faster airflow.</p>

<p><strong>That one video.</strong> If you‚Äôre reading this article after it was linked from some forum, I‚Äôd bet you that someone in the comments links to <a href="https://www.youtube.com/watch?v=kH5APw_SLUU">this video</a> from the Michigan Sinus Center. I found this inspirational, but note a couple of things: First, while the description says they use HEPA filter, the video clearly indicates a MERV filter. Again, that‚Äôs not necessarily bad! They claim that around 90% of particles sized 0.3 microns are larger are eliminated in a single pass. That‚Äôs good, but not totally reassuring. The question is, does it remove 99% in two passes? If 90% of the particles in the ambient air were large and the filter only catches large particles, then additional passes would never get rid of the most dangerous small particles. This is why I trust HEPA filters a bit more: since they remove almost all particles in one pass, I‚Äôm confident they should remove almost all particles eventually. This is also why I strongly prefer experiments that actually measure particles removed from the air in a room, rather than just the air coming out of the purifier.</p>

<p><strong>Further questions.</strong> There‚Äôs a lot of things that further experiments could look at:</p>

<ol>
  <li>Does the fan speed make a huge difference?</li>
  <li>How does the purifier compare to larger commercial purifiers?</li>
  <li>How do MERV-rated furnace-type filters compare under the same conditions?</li>
  <li>How can it not matter if there‚Äôs tape around the filters!?</li>
  <li>Does fan speed matter? (I always ran the box fan at maximum speed.)</li>
  <li>Is it better to put the filters on the intake or outtake side of the ‚Ä¶</li></ol></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://dyno-might.github.io/2020/12/15/some-real-data-on-a-DIY-box-fan-air-purifier/">https://dyno-might.github.io/2020/12/15/some-real-data-on-a-DIY-box-fan-air-purifier/</a></em></p>]]>
            </description>
            <link>https://dyno-might.github.io/2020/12/15/some-real-data-on-a-DIY-box-fan-air-purifier/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25442097</guid>
            <pubDate>Wed, 16 Dec 2020 13:15:03 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[For e-mobility 2020 brought significant progress, this is an extensive overview]]>
            </title>
            <description>
<![CDATA[
Score 14 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25441956">thread link</a>) | @Pabloemm
<br/>
December 16, 2020 | https://solidstudio.io/blog/growing-concept-e-mobility-as-a-service.html | <a href="https://web.archive.org/web/*/https://solidstudio.io/blog/growing-concept-e-mobility-as-a-service.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                <p><a href="https://solidstudio.io/index.html">Solidstudio</a>
                    &gt;&gt;
                    <a href="https://solidstudio.io/blog/blog.html">Blog</a>
                    &gt;&gt;
                    &gt;The growing concept of e-Mobility as a Service
                </p>

                

                <h2 id="research-explanation">Research explanation of e-Mobility as a
                    Service</h2>

                <h3 id="emergence-of-emobility">Emergence of mobility concepts</h3>

                <p>
                    Before the digital revolution and user-centric approach, the concept of accessible, new forms of
                    transportation was the future vision of what life could be like. With the rapid growth of
                    technology, mobile devices, enhanced battery capacities, wide Internet connection, investments in
                    new unexplored forms of service delivery, and quick social adaptation in the last ten years we have
                    witnessed a great transformation.
                </p>
                <p>
                    Raising enthusiasm boosted consumption and proved that rapid adaptation is possible and widely
                    accepted. New economic models have begun to take into account sharing concepts and value the
                    tangible benefits of such solutions. In a sharing economy, not used assets such as parked cars and
                    extra bedrooms can be rented out. We transferred from owning to renting. And this concept widely
                    approved first by Uber users moved to other transport areas offering new possibilities. In the
                    Alternative Journal article,
                    <a href="https://www.alternativesjournal.ca/science-and-solutions/ours-better-yours" target="_blank" rel="nofollow">
                        ‚ÄòOurs is Better than Yours‚Äô
                    </a>
                    , Ray Tumulty (2014) the sharing economy is
                    described as a clearly urban phenomenon. To achieve economies of scale for shared economy services
                    satisfactory population density is required. Moreover, these services are seen as an extra option,
                    not a replacement for traditional sectors. Ridesharing is used along with public transportation in
                    cities.
                </p>
                <p>
                    With the growing success of rented items and services, new forms of transportation options come to
                    the market. The mobility concept grew to form a comprehensive ecosystem offering numerous moving
                    variants, such as city bikes, electric scooters, car rides, ticket purchasing options, city traffic
                    monitoring, planning the most convenient route, parking options, integrated payments, and available
                    charging options for ‚Äòe‚Äô users. All available in real-time from the mobile app on one‚Äôs phone. This
                    progress developed the term
                    <a href="https://solidstudio.io/blog/from-maas-to-emaas-how-e-is-taking-a-charge-over-the-markets.html" target="_blank" rel="nofollow">
                        Mobility as a service
                    </a>
                    , which covers a wide range of mobility services
                    available on the market, and its integral part becomes a shared economy providing extra value for
                    participants.
                </p>
                <p>
                    On a high-level, the MaaS ecosystem includes transport infrastructure, transportation services,
                    transport information, and payment services. Within the ecosystem, the common objective is the
                    delivery of a seamless mobility experience and transportation network improvement by utilizing the
                    benefits of each service - public and private. Besides, other participants such as local authorities
                    or data administration companies can collaborate to smooth the operation of the services and improve
                    their profitability.
                </p>
                <p>
                    MaaS as a definition is described as
                </p>
                <p><img src="https://solidstudio.io/img/blog/emobility-ebook/6.jpg" alt="MaaS definition" width="100%" height="auto">
                </p>
                <p>
                    One of the MaaS ecosystem examples was presented by the Siemens Mobility Division in 2016 for
                    Tampere City, Finland. The ecosystem is build of 4 main elements: service providers; a
                    business-to-business (B2B) platform; mobility retailers; and the users. The intention of the project
                    was to unite the existing and upcoming transport services with the operations of the local
                    paratransit services.
                </p>
                <p>
                    A similar approach on a high level was presented by K√∂nig project ‚ÄòMobility As A Service for Linking
                    Europe‚Äô. Four different levels define the public and regulatory level, the transport and logistics
                    service providers level, the mobility service level, and the end-user level. On the basis of similar
                    concepts and definitions, a framework for Mobility as a service was developed.
                </p>
                <p>
                    From a business perspective, MaaS is described by Kamargianni and Matyas in the paper ‚ÄòThe Business
                    Ecosystem of Mobility-as-a-Service‚Äô[1](2017) as ‚Äòthe wider network of enterprises that influences how a
                    dominant company, in this case, the MaaS provider, creates and capture value‚Äô.
                </p>
                <p><img src="https://solidstudio.io/img/blog/emobility-ebook/7.jpg" alt="MaaS definition" width="100%" height="auto">
                </p>

                <p>
                    To support theoretical premises on shared mobility, a survey conducted by McKinsey&amp;Company (2017)
                    provides some insight into the consumer‚Äôs opinion on ride-hailing and car-sharing. Respondents were
                    asked how their usage of ride-hailing and car-sharing services will change within the next two
                    years. In both cases, over 60% responded that it will increase or increase significantly. Shared
                    mobility is mostly favored in urban areas, but seems to be less attractive for running errands or
                    multi-stop shopping trips.
                </p>

                <h3 id="what-is-e">What is ‚Äòe‚Äô all about?</h3>

                <p>
                    We are an integral part of the next global transformation, where alternative fuels and green energy
                    takes charge. The concept explained above has been extended with ‚Äòe‚Äô - a possibility to travel in an
                    eco-friendly way, where ‚Äòe‚Äô stands for electric solutions.
                </p>
                <p>
                    Electric Mobility as a service combines Mobility as a Service (MaaS), Electric Mobility Systems
                    (EMS), and Shared Electric Mobility Services (SEMS) [2]. As a concept eMaaS operates upon MaaS,
                    where the last one became one of the complementary components. With that defined, all MaaS
                    participants become, as a consequence, eMaaS attendees. Providing they offer electric mobility
                    solutions.
                </p>

                <p><img src="https://solidstudio.io/img/blog/emobility-ebook/8.jpg" alt="MaaS definition" width="100%" height="auto">
                </p>

                <p>
                    Electric Mobility System (EMS) covers technologies (batteries, charging technologies, drivetrains,
                    and EVs), infrastructure (physical and organizational of charging stations, electricity grid,
                    information and communication technology), and users (manufacturers, suppliers, end-users, service
                    providers, governments, and agents).
                </p>
                <p>
                    Shared Electric Mobility Services‚Äô (SEMS) applies to a new economy implementation, where instead of
                    ownership there is an on-a-need basis share connected by the technology with users and providers.
                    SEMS replies to the environmental, social, financial, and transportation-related benefits that had
                    already been correlated to emobility and shared mobility practice connecting both. Five business
                    approaches are proposed:
                </p>
                <ul>
                    <li>
                        Membership-based (e.g. e-bike sharing, e-car sharing, e-ridesharing, e-ride hailing, e-scooter
                        sharing, e-bus sharing),
                    </li>
                    <li>
                        Peer-to-Peer(e.g. e-car sharing, e-bike sharing, e-scooter sharing),
                    </li>
                    <li>
                        Non-membership-based (e.g. e-car rental, elimousine rental),
                    </li>
                    <li>
                        For-hire (e.g. e-car/bike/scooter sharing, e-ridesharing e-carpooling),
                    </li>
                    <li>
                        Mass transit systems (e.g. e-Public Transport, airport autonomous shuttles).
                    </li>
                </ul>
                <p>
                    As a part of a wider concept, combined with two other components MaaS &amp; EMS, together provides
                    multiple eco-friendly transportation possibilities. Successful implementation of such a concept
                    requires multi-level support, well-designed system architecture, and an extensive network in public
                    structures.
                </p>

                <h3 id="user-centric">User-centric approach</h3>

                <p>
                    The user-centric approach will always be foreground. It applies to the development of the widely
                    recognized concept of e-mobility as a service. From accessible payment methods for single ticket
                    purchasing, subscriptions, to well-developed charging networks and various means of transport
                    access. At each stage of the proposition should be declared value.
                </p>
                <p>
                    We are still in the early stages of what could be called e-Mobility as a service. Most customer
                    journeys are under development, and achieving overall flow is still in its infancy. There is a lot
                    of research to be done, but there is room for the general necessary approaches. Each of the
                    participants, in order to achieve success and remain successful in this growing market, ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://solidstudio.io/blog/growing-concept-e-mobility-as-a-service.html">https://solidstudio.io/blog/growing-concept-e-mobility-as-a-service.html</a></em></p>]]>
            </description>
            <link>https://solidstudio.io/blog/growing-concept-e-mobility-as-a-service.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25441956</guid>
            <pubDate>Wed, 16 Dec 2020 12:59:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[PerceptiLabs ‚Äì A simple tool to build machine learning models]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25441955">thread link</a>) | @Xubeqi
<br/>
December 16, 2020 | https://perceptilabs.com/product | <a href="https://web.archive.org/web/*/https://perceptilabs.com/product">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-v-b80770e6=""><div xs="12" data-v-b80770e6=""> <p data-v-b80770e6="">
          PerceptiLabs is a dataflow driven, visual API for TensorFlow,
          carefully designed to make machine learning (or deep learning)
          modeling as intuitive as possible.
        </p></div></div></div>]]>
            </description>
            <link>https://perceptilabs.com/product</link>
            <guid isPermaLink="false">hacker-news-small-sites-25441955</guid>
            <pubDate>Wed, 16 Dec 2020 12:59:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: ThinkType ‚Äì Write and Search Notes at the Same Time]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 8 (<a href="https://news.ycombinator.com/item?id=25441662">thread link</a>) | @amadeuspagel
<br/>
December 16, 2020 | https://thinktype.app/resubmit | <a href="https://web.archive.org/web/*/https://thinktype.app/resubmit">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://thinktype.app/resubmit</link>
            <guid isPermaLink="false">hacker-news-small-sites-25441662</guid>
            <pubDate>Wed, 16 Dec 2020 12:13:31 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: I made a crate for creating interactive chord diagrams in Rust]]>
            </title>
            <description>
<![CDATA[
Score 47 | Comments 21 (<a href="https://news.ycombinator.com/item?id=25440590">thread link</a>) | @DataCrayon
<br/>
December 16, 2020 | https://datacrayon.com/posts/programming/rust-notebooks/visualisation-of-co-occurring-types/ | <a href="https://web.archive.org/web/*/https://datacrayon.com/posts/programming/rust-notebooks/visualisation-of-co-occurring-types/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<pre>[[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]]</pre>
</div></div>]]>
            </description>
            <link>https://datacrayon.com/posts/programming/rust-notebooks/visualisation-of-co-occurring-types/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25440590</guid>
            <pubDate>Wed, 16 Dec 2020 09:31:15 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Elderly patients 23% more likely to die if surgery is on the surgeon‚Äôs birthday]]>
            </title>
            <description>
<![CDATA[
Score 349 | Comments 204 (<a href="https://news.ycombinator.com/item?id=25440322">thread link</a>) | @whx23
<br/>
December 16, 2020 | https://www.psychnewsdaily.com/elderly-emergency-surgery-patients-23-more-likely-to-die-if-operation-takes-place-on-surgeons-birthday/ | <a href="https://web.archive.org/web/*/https://www.psychnewsdaily.com/elderly-emergency-surgery-patients-23-more-likely-to-die-if-operation-takes-place-on-surgeons-birthday/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-5563" role="main"><div><div><div><p>A <a href="https://www.bmj.com/content/371/bmj.m4381" target="_blank" rel="noreferrer noopener">new study has found</a> that elderly patients who underwent emergency surgery on their surgeon‚Äôs birthday had significantly higher 30-day mortality rates than patients whose surgery took place on any other day of the year. <span data-ez-name="psychnewsdaily_com-medrectangle-3"></span></p><p>The 30-day mortality rate (defined as death within 30 days after surgery)&nbsp;for the ‚Äúsurgeon‚Äôs birthday‚Äù group was 6.9%. This was 23% higher than the 5.6% rate for the ‚Äúother day‚Äù group.</p><p>The study, which appears today in the <em>British Medical Journal</em> (<a href="https://www.bmj.com/" target="_blank" rel="noreferrer noopener">BMJ</a>),&nbsp;looked at 980,876 procedures performed in US hospitals by 47,489 surgeons.&nbsp;Of those procedures, 2,064 (0.2%) took place on a surgeon‚Äôs birthday.&nbsp;The patients were all Medicare beneficiaries aged 65 to 99. They had all undergone one of 17 common emergency surgical procedures between 2011 and 2014.</p><h2>Distractions during the most common emergency surgery types</h2><p>Examples of those 17 procedures included cardiovascular surgeries, hip and femur fracture, appendectomy, and small bowel resection. The study focused on&nbsp;emergency surgery, so as to&nbsp;minimize the potential selection bias. For example, surgeons might otherwise choose patients based on their illness severity, or patients might choose their surgeon.</p><p>As the authors write, ‚ÄúThe effect size of surgeons‚Äô birthday observed in our analysis (1.3 percentage point increase or a 23% increase in mortality), though substantial, is comparable to the impact of other events, including holidays (e.g., Christmas and New Year) and weekends.‚Äù <span data-ez-name="psychnewsdaily_com-medrectangle-4"></span></p><p>In fact, the <a href="https://amzn.to/3m5rimG" target="_blank" rel="noreferrer noopener">history of surgery</a> has often demonstrated that external factors can influence surgical outcomes. The authors refer to a 2014 study showing that <a href="https://pubmed.ncbi.nlm.nih.gov/23345314/" target="_blank" rel="noreferrer noopener">patients admitted to Scottish emergency rooms on&nbsp;public holidays had a 27% increase</a> in 30-day mortality.&nbsp;Other research has found, for example,&nbsp;that doctors are more likely to <a href="https://jamanetwork.com/journals/jamainternalmedicine/fullarticle/1910546" target="_blank" rel="noreferrer noopener">prescribe antibiotics</a> and <a href="https://jamanetwork.com/journals/jamanetworkopen/fullarticle/2749268" target="_blank" rel="noreferrer noopener">opioids</a> ‚Äî and <a href="https://jamanetwork.com/journals/jamanetworkopen/fullarticle/2733171" target="_blank" rel="noreferrer noopener">less likely to order&nbsp;cancer screening tests</a> ‚Äî as the workday progresses. This is most likely because the ‚Äúcumulative cognitive demand‚Äù of such decisions gradually takes its toll.&nbsp;</p><p>Research on judges has yielded similar results. It has found, for example, that external factors as diverse as outdoor temperatures and sports results can influence judges‚Äô decisions.&nbsp;</p><h2>A natural experiment: ER surgery on the doctor‚Äôs birthday</h2><p>But the authors say the ‚Äúnatural experiment‚Äù in the present study is more revealing than, for example, holiday-related mortality rates. That is because ‚Äúthose events not only affect physicians‚Äô performance but also influence patients‚Äô decision to seek care (i.e., patients seeking care on these special days might be sicker than those seeking care on other days), as well as hospital staffing.‚Äù Unless, of course, the patients know their surgeon‚Äôs birthday, which is unlikely (though that may change if this study becomes widely known).&nbsp;</p><p>The 1.3% effect size was the result after a very through series of controls. These included, for example, excluding those surgeons with the highest patient mortality rates. Other controls included assigning a random ‚Äúpseudo-birthday‚Äù to surgeons to see whether the results still held up, or checking whether the surgeon did an above-average number of procedures on their birthday. <span data-ez-name="psychnewsdaily_com-box-4"></span></p><p>Likewise, the researchers controlled for ‚Äúmilestone‚Äù birthdays (such as 40 or 50). They also controlled for whether a birthday fell on a Friday, which might make after-work birthday festivities more likely.&nbsp;Their findings also held up when the analysis was restricted to procedures with the highest average mortality, or to only the most ill patients.&nbsp;In fact, without these adjustments, the 30-day mortality rate difference between the birthday and non-birthday groups (the unadjusted rate) was even higher (7.0% vs. 5.6%, or a 1.4% difference).</p><h2><strong>Why</strong> does emergency surgery suffer on surgeon‚Äôs birthday?</h2><p>The authors propose a few potential explanations for this ‚Äúbirthday effect.‚Äù&nbsp;</p><p>These include hurrying through an emergency surgery to be on time for after-work birthday events; <a href="https://www.psychnewsdaily.com/study-finds-users-not-notifications-initiate-89-of-smartphone-interactions/" target="_blank" rel="noreferrer noopener">distracting</a> birthday-related phone calls or text messages; more conversations with well-wishing staff members; and a decreased likelihood to go back to the hospital that evening if a patient‚Äôs condition deteriorates.</p><p>They also found that some surgeons did not work on their birthdays. While 2,144 surgeons in this study performed procedures one day before their birthday, and 2,027 did so one day after their birthday, only 1,805 surgeons carried out procedures on their actual birthday. This does not affect the results of the study‚Äôs analyses. But it does suggest ‚Äúthat birthdays are an important enough factor for some surgeons to choose not to operate on that day, which supports the credibility of our assumption that a birthday could be a distracting factor for those surgeons who choose to operate on that day,‚Äù the authors write.&nbsp;</p><h2><strong>Limitations</strong> <strong>and future directions</strong></h2><p>The researchers emphasized that this study focused on common procedures, and on older Medicare patients. This means that the findings may not apply to other types of patients, or to other surgical procedures.</p><p>Still, the authors write, these results may lead to ‚Äúadditional support for surgeons who have potentially distracting events,‚Äù such as birthdays, ‚Äúto make sure that patients receive high quality surgical care regardless of when undergo surgery.‚Äù</p><hr><p><strong>Study: </strong>‚Äú<a href="https://dx.doi.org/10.1136/bmj.m4381" target="_blank" rel="noreferrer noopener">Patient mortality after surgery on the surgeon‚Äôs birthday: observational study</a>‚Äú<br><strong>Authors:</strong> Hirotaka Kato, Anupam B. Jena, and Yusuke Tsugawa<br><strong>Published in:</strong> <a href="https://www.bmj.com/" target="_blank" rel="noreferrer noopener"><em>The BMJ</em></a><br><strong>Publication date: </strong>December 10, 2020<br><strong>DOI:</strong> <a href="https://dx.doi.org/10.1136/bmj.m4381" target="_blank" rel="noreferrer noopener">https://dx.doi.org/10.1136/bmj.m4381</a><br><strong>Photo: </strong>by&nbsp;<a href="https://pixabay.com/users/theshiv76-1022681/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=766166">Jason Shivers</a>&nbsp;from&nbsp;<a href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=766166">Pixabay</a>&nbsp;</p><p>For a weekly summary of the latest psychology news, subscribe to our <a href="https://www.psychnewsdaily.com/the-psych-news-weekly-newsletter/" target="_blank" rel="noreferrer noopener">Psych News Weekly newsletter</a>.</p></div></div></div></article></div>]]>
            </description>
            <link>https://www.psychnewsdaily.com/elderly-emergency-surgery-patients-23-more-likely-to-die-if-operation-takes-place-on-surgeons-birthday/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25440322</guid>
            <pubDate>Wed, 16 Dec 2020 08:38:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Research in Programming Languages (2012)]]>
            </title>
            <description>
<![CDATA[
Score 59 | Comments 25 (<a href="https://news.ycombinator.com/item?id=25439629">thread link</a>) | @swyx
<br/>
December 15, 2020 | http://tagide.com/blog/academia/research-in-programming-languages/ | <a href="https://web.archive.org/web/*/http://tagide.com/blog/academia/research-in-programming-languages/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
						<p><strong>Is there still research to be done in Programming Languages?</strong> This essay touches both on the topic of programming languages and on the nature of research work. I am mostly concerned in analyzing this question in the context of Academia, i.e. within the expectations of academic programs and research funding agencies that support research work in the STEM disciplines (<span>Science, Technology, Engineering, and Mathematics</span>). This is not the only possible perspective, but it is the one I am taking here.</p>
<p><span id="more-416"></span>PLs are dear to my heart, and a considerable chunk of my career was made in that area. As a designer, there is something fundamentally interesting in designing a language of any kind. It‚Äôs even more interesting and gratifying when people actually start exercising those languages to create non-trivial software systems. As a user, I love to use programming languages that I haven‚Äôt used before, even when the languages in question make me curse every other line.</p>
<p>But the truth of the matter is that ever since I finished <a href="ftp://ftp.ccs.neu.edu/pub/people/crista/publications/thesis/index.html">my Ph.D.</a> in the late 90s, and especially since I joined the ranks of Academia, I have been having a hard time convincing myself that research in PLs is a worthy endeavor. I feel really bad about my rational arguments against it, though. Hence this essay. Perhaps by the time I am done with it I will have come to terms with this dilemma.</p>
<p>Back in the 50s, 60s and 70s, programming languages were a BigDeal, with large investments, upfront planning, and big drama on standardization committees (Ada was the epitome of that model). Things have changed dramatically during the 80s. Since the 90s, a considerable percentage of new languages that ended up being very popular were designed by lone programmers, some of them kids with no research inclination, some as a side hobby, and without any grand goal other than either making some routine activities easier or for plain hacking fun. Examples:</p>
<ul>
<li>PHP, by Rasmus Lerdorf circa 1994, ‚Äúoriginally used for tracking visits to his online resume, he named the suite of scripts ‚ÄòPersonal Home Page Tools,‚Äô more frequently referenced as ‚ÄòPHP Tools.‚Äô ‚Äù [<a href="http://www.php.net/manual/en/history.php.php">1</a>] PHP is a marvel of how a horrible language can become the foundation of large numbers of applications‚Ä¶ for a second time! <a href="http://www.dreamsongs.com/RiseOfWorseIsBetter.html">Worse is Better</a> redux. According one <a href="http://langpop.com/">informal but interesting survey</a>, PHP is now the 4th most popular programming language out there, losing only to C, Java and C++.</li>
<li>JavaScript, by Brendan Eich circa 1995, ‚ÄúPlus, I had to be done in ten days or something worse than JS would have happened.‚Äù [<a href="http://www.jwz.org/blog/2010/10/every-day-i-learn-something-new-and-stupid/#comment-1021">2</a>] According to that same survey, JavaScript is the 5th most popular language, and I suspect it is climbing up that rank really fast. It may be #1 by now.</li>
<li>Python, by Guido van Rossum circa 1990, ‚ÄúI was looking for a ‚Äòhobby‚Äô programming project that would keep me occupied during the week around Christmas.‚Äù [<a href="http://www.python.org/doc/essays/foreword/">3</a>] Python comes at #6, and its strong adoption by scientific computing communities is well know.</li>
<li>Ruby, by Yukihiro ‚ÄúMatz‚Äù Matsumoto circa 1994, ‚ÄúI wanted a scripting language that was more powerful than Perl, and more object-oriented than Python. That‚Äôs why I decided to design my own language.‚Äù [<a href="http://linuxdevcenter.com/pub/a/linux/2001/11/29/ruby.html">4</a>] At #10 in that survey.</li>
</ul>
<p>Compare this mindset with the context in which the the older well-known programming languages emerged:</p>
<ul>
<li>Fortran, 50s, originally developed by IBM as part of their core business in computing machines.</li>
<li>Cobol, late 50s, designed by a large committee from the onset, sponsored by the DoD.</li>
<li>Lisp, late 50s, main project occupying 2 professors at MIT and their students, with the grand goal of producing an algebraic list processing language for artificial intelligence work, also funded by the DoD.</li>
<li>C, early 70s, part of the large investment that Bell Labs was doing in the development of Unix.</li>
<li>Smalltalk, early 70s, part of a large investment that Xerox did in ‚Äúinventing the future‚Äù of computers.</li>
</ul>
<p>Back then, developing a language processor was, indeed, a very big deal. Computers were slow, didn‚Äôt have a lot of memory, the language processors had to be written in low-level assembly languages‚Ä¶ it wasn‚Äôt something someone would do in their rooms as a hobby, to put it mildly. Since the 90s, however, with the emergence of PCs and of decent low-level languages like C, developing a language processor is no longer a BigDeal. Hence, languages like PHP and JavaScript.</p>
<p>There is a lot of fun in designing new languages, but this fun is not an exclusive right of researchers with, or working towards, Ph.Ds. Given all the knowledge about programming languages these days, anyone can do it. And many do. And here‚Äôs the first itchy point: <em>there appears to be no correlation between the success of a programming language and its emergence in the form of someone‚Äôs doctoral or post-doctoral work. </em>This bothers me a lot, as an academic. It appears that deep thoughts, consistency, rigor and all other things we value as scientists aren‚Äôt that important for mass adoption of programming languages. But then again, <a href="http://www.dreamsongs.com/RiseOfWorseIsBetter.html">I‚Äôm not the first to say it</a>. It‚Äôs just that this phenomenon is hard to digest, and if you really grasp it, it has tremendous consequences. If people (the potential users) don‚Äôt care about conceptual consistency, why do we keep on trying to achieve that?</p>
<p>To be fair, some of those languages designed in the 90s as side projects, as they became important, eventually became more rigorous and consistent, and attracted a fair amount of academic attention and industry investment. For example, the Netscape JavaScript hacks quickly fell on Guy Steele‚Äôs lap resulting in the <a href="http://en.wikipedia.org/wiki/ECMAScript">ECMAScript specification</a>. Python was never a hack even if it started as a Christmas hobby. Ruby is a fun language and quite elegant from the beginning. PHP‚Ä¶ well‚Ä¶ it‚Äôs fun for possibly the wrong reasons. But the core of the matter is that ‚Äúthe right thing‚Äù was not the goal. It seems that <span><em>a reliable implementation of a language that addresses an important practical need</em></span> is the key for the popularity of a programming language. But being opportunistic isn‚Äôt what research is supposed to be about‚Ä¶ (or is it?)</p>
<p>Also to be fair, not all languages designed in the 90s and later started as side projects. For example, Java was a relatively large investment by Sun Microsystems. So was .NET later by Microsoft.</p>
<p>And, finally, all of these new languages, even when created over a week as someone‚Äôs pet project, sit on the shoulders of all things that existed before. This leads me to the second itch: <em>one striking commonality in all modern programming languages, especially the popular ones, is how little innovation there is in them</em>! Without exception, including the languages developed in research groups, they all feel like mashups of concepts that already existed in programming languages in 1979, wrapped up in their own idiosyncratic syntax. (I lied: exceptions go to aspects and monads both of which came in the 90s)</p>
<p><a href="http://tagide.com/blog/?attachment_id=544" rel="attachment wp-att-544"><img title="PLs" src="http://tagide.com/blog/wp-content/uploads/2011/09/PLs-300x225.jpg" alt="" width="300" height="225"></a>So one pertinent question is: given that not much seems to have emerged since 1979 (that‚Äôs 30+ years!), is there still anything to <em>innovate</em> in programming languages? Or have we reached the asymptotic plateau of innovation in this area?</p>
<p>I need to make an important detour here on the nature of research.</p>
<h3>&lt;Begin Detour&gt;</h3>
<p>Perhaps I‚Äôm completely off; perhaps <em>producing innovative new software</em> <em>is not a goal of [STEM] research</em>. Under this approach, any software work is dismissed from STEM pursuits, unless it is necessary for some specific goal ‚Äî like if you want to study some far-off galaxy and you need an IT infrastructure to collect the data and make simulations (S for Science); or if you need some glue code for piecing existing systems together (T for Technology); or if you need to improve the performance of something that already exists (E for Engineering); or if you are a working on some Mathematical model of computation and want to make your ideas come to life in the form of a language (M for Mathematics). This is an extreme submissive view of software systems, one that places software in the back sit of STEM and that denies the existence of value in research in/by software itself. If we want to lead something on our own, let‚Äôs just‚Ä¶ do empirical studies of technology or become biologists/physicists/chemists/mathematicians or make existing things perform better or do theoretical/statistical models of universes that already exist or that are created by others. Right?</p>
<p>I confess I have a dysfunctional relationship with this idea. Personally, I can‚Äôt be happy without creating software things, but I have been able to make my scientist-self function both as a cold-minded analyst and, at times, as an expert passenger in someone else‚Äôs research project. The design work, for me, has moved to sabbatical time, evenings and weekends; I don‚Äôt publish it [much] other than the code itself and some informal descriptions. And yet, I loathe this situation.</p>
<p>I loathe it because it‚Äôs is clear to me that software systems are something very, <em>very</em> special. Software revolutionized everything in unexpected ways, including the methods and practices that our esteemed colleagues in the ‚Äúhard‚Äù sciences hold near and dear for a very long time. The evolution of information technology in the past 60 years has been _way_ off from what our colleagues thought they needed. Over and over again, software systems have been created that weren‚Äôt part of any scientific project, as such, and that ended up playing a central role in Science. Instead of trying to mimic our colleagues‚Äô traditional practices, ‚Äúcomputer scientists‚Äù ought to be showing the way to a new kind of science ‚Äî maybe <em>that </em><a href="http://www.wolframscience.com/nksonline/page-1?firstview=1">new kind of science</a> or <a href="http://www.amazon.com/Sciences-Artificial-Herbert-Simon/dp/0262691914">that one</a> or maybe something else. I dare to suggest that the something else is related to the design of things that have software in them. It should not be called Science. It is a bit like Engineering, but it‚Äôs not it either because we‚Äôre not dealing [just] with physical things. Technology doesn‚Äôt cut it either. It needs a new name, something that denotes ‚Äúthe design of things with software in them.‚Äù I will call it Design for short, ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://tagide.com/blog/academia/research-in-programming-languages/">http://tagide.com/blog/academia/research-in-programming-languages/</a></em></p>]]>
            </description>
            <link>http://tagide.com/blog/academia/research-in-programming-languages/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25439629</guid>
            <pubDate>Wed, 16 Dec 2020 06:10:47 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Daniel Stenberg: How my Twitter hijacks happened]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25438660">thread link</a>) | @sohkamyung
<br/>
December 15, 2020 | https://daniel.haxx.se/blog/2020/12/15/how-my-twitter-hijacks-happened/ | <a href="https://web.archive.org/web/*/https://daniel.haxx.se/blog/2020/12/15/how-my-twitter-hijacks-happened/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		
<p>You might recall that my Twitter account was <a href="https://daniel.haxx.se/blog/2020/11/16/i-lost-my-twitter-account/" data-type="post" data-id="15196">hijacked</a> and then <a href="https://daniel.haxx.se/blog/2020/12/03/twitter-lockout-again/" data-type="post" data-id="15287">again</a> just two weeks later.</p>



<h2>The first: brute-force</h2>



<p>The  first take-over was most likely a case of brute-forcing my weak password while not having 2FA enabled. I have no excuse for either of those lapses. I had convinced myself I had 2fa enabled which made me take a (too) lax attitude to my short 8-character password that was possible to remember. Clearly, 2fa was not enabled and then the only remaining wall against the evil world was that weak password.</p>



<h2>The second time</h2>



<p>After that first hijack, I immediately changed password to a strong many-character one and I made really sure I enabled 2fa with an authenticator app and I felt safe again. Yet it would only take seventeen days until I <em><strong>again</strong></em> was locked out from my account. This second time, I could see how <em>someone had managed to change the email address</em> associated with my account (displayed when I wanted to reset my password). With the password not working and the account not having the correct email address anymore, I could not reset the password, and my 2fa status had no effect. I was locked out. Again.</p>



<p>It felt related to the first case because I‚Äôve had my Twitter account since May 2008. I had never lost it before and then suddenly after 12+ years, within a period of three weeks, it happens twice?</p>



<h2>Why and how</h2>



<p>How this happened was a complete mystery to me. The account was restored fairly swiftly but I learned nothing from that.</p>



<p>Then someone at Twitter contacted me. After they investigated what had happened and how, I had a chat with a responsible person there and he explained for me exactly how this went down.</p>



<p>Had Twitter been hacked? Is there a way to circumvent 2FA? Were my local computer or phone compromised? No, no and no.</p>



<p>Apparently, an agent at Twitter who were going through the backlog of issues, where my previous hijack issue was still present, accidentally changed the email on my account by mistake, probably confusing it with another account in another browser tab.</p>



<p><strong>There was no outside intruder, it was just a user error.</strong></p>



<p>Okay, the cynics will say, this is what he <em>told</em> me and there is no evidence to back it up. That‚Äôs right, I‚Äôm taking his words as truth here but I also think the description matches my observations. There‚Äôs just no way for me or any outsider to verify or fact-check this.</p>



<h2>A brighter future</h2>



<p>They seem to already have identified things to improve to reduce the risk of this happening again and Michael also mentioned a few other items on their agenda that should make hijacks harder to do and help them detect suspicious behavior earlier and faster going forward. I was also happy to provide my feedback on how I think they could‚Äôve made my lost-account experience a little better.</p>



<p>I‚Äôm relieved that the second time at least wasn‚Äôt my fault and neither of my systems are breached  or hacked (as far as I know).</p>



<p>I‚Äôve also now properly and thoroughly gone over all my accounts on practically all online services I use and made really sure that I have 2fa enabled on them. On some of them I‚Äôve also changed my registered email address to one with 30 random letters to make it truly impossible for any outsider to guess what I use.</p>



<p>(I‚Äôm also positively surprised by this extra level of customer care Twitter showed for me and my case.)</p>



<h2>Am I a target?</h2>



<p>I don‚Äôt think I am. I think maybe my Twitter account could be interesting to scammers since I have almost 25K followers and I have a verified account. Me personally, I work primarily with open source and most of my works is already made public. I don‚Äôt deal in business secrets. I don‚Äôt think my personal stuff attracts attackers more than anyone else does.</p>



<div><figure><img loading="lazy" src="https://daniel.haxx.se/blog/wp-content/uploads/2017/08/please-use-backdoor.jpg" alt="" width="184" height="183" srcset="https://daniel.haxx.se/blog/wp-content/uploads/2017/08/please-use-backdoor.jpg 471w, https://daniel.haxx.se/blog/wp-content/uploads/2017/08/please-use-backdoor-200x200.jpg 200w, https://daniel.haxx.se/blog/wp-content/uploads/2017/08/please-use-backdoor-450x448.jpg 450w" sizes="(max-width: 184px) 100vw, 184px"></figure></div>



<p>What about the risk or the temptation for bad guys in trying to backdoor curl? It is after all installed in some 10 <em>billion</em> systems world-wide. I‚Äôve <a href="https://daniel.haxx.se/blog/2017/09/12/the-backdoor-threat/">elaborated on that before</a>. Summary: I think it is terribly hard for someone to actually manage to do it. Not because of the security of my personal systems perhaps, but because of the entire setup and all processes, signings, reviews, testing and scanning that are involved.</p>



<p>So no. I don‚Äôt think my personal systems are a valued singled out target to attackers.</p>



<p>Now, back to work!</p>



<h2>Credits</h2>



<p>Image by <a href="https://pixabay.com/users/geralt-9301/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3319619">Gerd Altmann</a> from <a href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3319619">Pixabay</a></p>
	</div></div>]]>
            </description>
            <link>https://daniel.haxx.se/blog/2020/12/15/how-my-twitter-hijacks-happened/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25438660</guid>
            <pubDate>Wed, 16 Dec 2020 03:19:47 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Far Cry: How the Fire Burns and Spreads (2012)]]>
            </title>
            <description>
<![CDATA[
Score 163 | Comments 28 (<a href="https://news.ycombinator.com/item?id=25437800">thread link</a>) | @fctorial
<br/>
December 15, 2020 | https://jflevesque.com/2012/12/06/far-cry-how-the-fire-burns-and-spreads/ | <a href="https://web.archive.org/web/*/https://jflevesque.com/2012/12/06/far-cry-how-the-fire-burns-and-spreads/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            
			
<h2>INTRO</h2>



<p>A few years ago, I got the opportunity to architect and code the fire propagation system in Far Cry 2. &nbsp;At that time, &nbsp;it was a gigantic task and it scared the hell out of me. Luckily, it turned out well enough.</p>



<p>With the upcoming Far Cry 3, several people recently asked me how the system worked. I realized that I never took the time to write it down. So, before I forget and also because it might be useful to somebody out there, here‚Äôs a high level overview of its inner workings. &nbsp;Pretty programmer art included as a bonus.</p>



<p><em>Disclaimer: Although Far Cry 3 uses the same system I wrote, I was not involved in the project. They may or may not have changed / adapted or modified the algorithms. What I describe below is accurate for Far Cry 2.</em></p>



<figure><p>
<iframe title="Far Cry 3 incredible fire demo video" width="640" height="360" src="https://www.youtube.com/embed/zcmbWqJjCN4?feature=oembed" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</p></figure>



<h2>BASE STRUCTURE</h2>



<div><figure><img src="http://jflevesque.com/wp-content/uploads/2020/01/ACell1.jpg" alt="" srcset="https://jflevesque.com/wp-content/uploads/2020/01/ACell1.jpg 600w, https://jflevesque.com/wp-content/uploads/2020/01/ACell1-300x206.jpg 300w" sizes="(max-width: 600px) 100vw, 600px"><figcaption>A 2D Grid good for grass fire. &nbsp;Here, a fire cell has 50 hitpoints</figcaption></figure></div>



<p>At the core, the fire propagation system is quite simple. Since gameplay is what‚Äôs important, we&nbsp;sacrifice some of the realism for fun. The fire propagation in&nbsp;Far Cry 2 &nbsp;(and Far Cry 3) has just enough realism to maintain the player‚Äôs&nbsp;<a href="http://web.archive.org/web/20160114121147/http://en.wikipedia.org/wiki/Suspension_of_disbelief">suspension of disbelief</a>,&nbsp;but certainly not enough to get published anytime soon. Because I like to&nbsp;<a href="http://web.archive.org/web/20160114121147/http://en.wikipedia.org/wiki/KISS_principle">keep things simple</a>, it doesn‚Äôt involve any complicated mathematics, physics or fluid dynamics. That has the additional advantage to be fast to simulate and easy to understand.</p>



<p>The secret sauce is an&nbsp;equally spaced grid. It is true for grass, for objects as well as for trees. The only difference is that we use a 2D grid for grass and a 3D grid for objects and trees.</p>



<p>Each cell of the grid has a position in the world, a radius and&nbsp;<strong>hitpoints</strong>. The cells have a plethora of&nbsp;properties, but these three are the bare minimum to propagate fire.</p>



<h2>LIGHT MY FIRE! HOW TO START ONE?</h2>



<p>The game engine tracks all damage done in the game, might it be bullet shots, impacts or fire damage. When a game entity is damaged, it is notified by an event. The damage event includes how much damage was done, what kind it was and what caused it.&nbsp;&nbsp;If the kind of damage was fire based and the entity is flammable, then at least two things happen:</p>



<ul><li>Firstly, the fire grid is dynamically created for the damaged entity. We create them dynamically because we don‚Äôt want those grids&nbsp;to exist in the wild for no reasons. That would take memory, disk space, etc, so we create them as we go. But, once created, it remains as long as the game entity exists.</li></ul>



<ul><li>Secondly, we figure out which cell in the grid is closest to the damage source. That cell then takes the damage and its hitpoints are reduced accordingly.</li></ul>



<p>That‚Äôs where things get interesting ‚Äì When a cell has been damaged by fire and has lost all its hitpoints;&nbsp;<strong>it catches fire</strong>.</p>



<p>While burning, the cell becomes a damager itself. It deals damage to its neighbour cells on the grid; cells that share an edge with it. By doing so, it reduces their hitpoints and when in turns these cells have lost all their hitpoints, they catch fire. That‚Äôs how the propagation is created.<br></p>



<div><figure><img src="http://jflevesque.com/wp-content/uploads/2020/01/2DGridBiggerFire1.jpg" alt="" srcset="https://jflevesque.com/wp-content/uploads/2020/01/2DGridBiggerFire1.jpg 700w, https://jflevesque.com/wp-content/uploads/2020/01/2DGridBiggerFire1-300x220.jpg 300w" sizes="(max-width: 700px) 100vw, 700px"><figcaption>Fire propagating from left to right. The cells on the fire front are being damaged.</figcaption></figure></div>



<p>Lastly, a cell from the grid as a finite lifetime. Otherwise, it would burn forever. It can be seen as the amount of energy given by the material that is burning. &nbsp;For instance,&nbsp;a piece of paper would most likely burn faster than a wood log, so it would be given a shorter lifetime value.</p>



<p>That‚Äôs it. A fully functional fire propagation system good enough for a AAA game!</p>



<h2>TECHNICALITIES</h2>



<p><strong>Simulate wet jungle VS dry patch of grass</strong><br>How to simulate a wet jungle versus a dry patch of grass? They behave differently. Quite easily!<br>Increase the fire cell‚Äôs hitpoints and it‚Äôs difficult to set it on fire and it‚Äôs slow to propagate.&nbsp;Decrease its burning lifetime and the fire dies out quickly. There, you just simulated a wet jungle environment.</p>



<p><strong>How to create the propagation grids</strong></p>



<p><strong><em>Grass / Land</em></strong><br>For grass wildfire, &nbsp;an axis-aligned 2D grid is built in realtime and projected on a 3D terrain. For each of the cell, we take care to determine if the cell position is underwater, or under an object such as a rock or a building. In which case, we disable that cell and it can no longer catch fire. We wouldn‚Äôt want to have fire propagating under rock, would we?<br></p>



<div><figure><img src="http://jflevesque.com/wp-content/uploads/2020/01/2DGridDisabled.jpg" alt="" srcset="https://jflevesque.com/wp-content/uploads/2020/01/2DGridDisabled.jpg 512w, https://jflevesque.com/wp-content/uploads/2020/01/2DGridDisabled-300x220.jpg 300w" sizes="(max-width: 512px) 100vw, 512px"><figcaption>2D grid projected on a terrain. The cells under the rock are disabled.</figcaption></figure></div>



<p><strong><em>Objects</em></strong><br>For objects, it‚Äôs a little bit more complicated. First, we create an&nbsp;<a href="http://web.archive.org/web/20160114121147/http://en.wikipedia.org/wiki/Bounding_volume">AABB</a>&nbsp;that entirely surrounds the object. &nbsp;Second, we somehow&nbsp;need to detect the shape of that object. After all, it could be a chair, an oil barrel or a whole house for all we know. To accomplish that, the &nbsp;bounding box is divided in equally spaced cubes.&nbsp;The size of each cube depends of the object size, the number of fire emitter we want to have, performance, memory, etc.</p>



<p>An iterative algorithm then go through all those cubes and test their location against the collision shape of the object.&nbsp;If the test return a positive result, this cube is kept, otherwise it is discarded. At the end, we have a collection of cubes that approximately&nbsp;represent the shape of the object to be burned. That‚Äôs our propagation grid.<br></p>



<div><figure><img src="http://jflevesque.com/wp-content/uploads/2020/01/3DGrid.jpg" alt="" srcset="https://jflevesque.com/wp-content/uploads/2020/01/3DGrid.jpg 800w, https://jflevesque.com/wp-content/uploads/2020/01/3DGrid-300x183.jpg 300w, https://jflevesque.com/wp-content/uploads/2020/01/3DGrid-768x469.jpg 768w" sizes="(max-width: 800px) 100vw, 800px"><figcaption>Detection of the shape of an object</figcaption></figure></div>



<h2><strong>WIND EFFECT</strong></h2>



<p>The wind is an important disruptive factor for a wildfire and it adds a great layer of realism for the player. &nbsp;Here it could be tempting to&nbsp;over-think&nbsp;the design and go with a very complicated system. After all, it‚Äôs an active area of research and&nbsp;<a href="http://web.archive.org/web/20160114121147/http://www.sciencedirect.com/science/article/pii/S1540748912001988">several</a>&nbsp;<a href="http://web.archive.org/web/20160114121147/http://www.sciencedirect.com/science/article/pii/S0378475407002030">papers</a>&nbsp;on the subject are available online.</p>



<div><figure><img src="http://jflevesque.com/wp-content/uploads/2020/01/1-s2.0-S0378475407002030-gr3-300x235-1.jpg" alt=""></figure></div>



<div><figure><img src="http://jflevesque.com/wp-content/uploads/2020/01/1-s2.0-S1540748912001988-gr3.jpg" alt=""></figure></div>



<p>Luckily, with what have been explained thus far, it‚Äôs quite easy to simulate if we accept to cut corners a bit.</p>



<p>In our system, the fire propagates by damaging the&nbsp;neighbor&nbsp;cells on a grid. And it is generally accepted that a fire should spread faster in the direction of the wind than against&nbsp;the wind? Then, with that in mind, we can create a rule where a burning cell deals more damage to its&nbsp;neighbor&nbsp;cells if that neighbor is in the direction of the wind.</p>



<p>We do that by getting the&nbsp;<a href="http://web.archive.org/web/20160114121147/http://en.wikipedia.org/wiki/Dot_product">dot product</a>&nbsp;between the wind direction&nbsp;vector and the direction of the&nbsp;neighbor&nbsp;cell to damage.&nbsp;If the result is greater than zero, then that node is dealt greater damage. &nbsp;Likewise, if the result is negative, &nbsp;the node is against the wind and should be dealt less damage. To be fancy, the amount of damage is interpolated with the dot product result as shown in the picture below.<br></p>



<div><figure><img src="http://jflevesque.com/wp-content/uploads/2020/01/ACellWindEffect1.jpg" alt="" srcset="https://jflevesque.com/wp-content/uploads/2020/01/ACellWindEffect1.jpg 600w, https://jflevesque.com/wp-content/uploads/2020/01/ACellWindEffect1-300x206.jpg 300w" sizes="(max-width: 600px) 100vw, 600px"><figcaption>The cell on fire causes more damage to its neighbor cells if they are in the direction of the wind.</figcaption></figure></div>



<p>With that rule alone, you will get a nice bell shaped fire front that propagates in the direction of the wind. Simple, yet believable&nbsp;enough to get the player‚Äôs stamp of approval.</p>



<p>It‚Äôs worth noting that we simulate gravity the exact same way.</p>



<h2>PROPAGATING TO THINGS AROUND AND CHAIN REACTIONS</h2>



<p>When a cell burns, it sends a ‚ÄúI‚Äôm on fire and I burn this much in this radius‚Äù message down&nbsp;the game event pipeline. This event is caught by objects, AI and other game systems that are in that area. They react&nbsp;to this message their own specific ways. The AI freaks out, the flammable objects get damaged and eventually catch fire. And, &nbsp;it is also true for dynamic objects. &nbsp;For example, if a burning oil barrel goes flying through the map, every step of the way, &nbsp;it will send that ‚Äúi‚Äôm burning‚Äù message and a lot of things around might hear it.<br></p>



<div><figure><img src="http://jflevesque.com/wp-content/uploads/2020/01/2DGridDmgZone.jpg" alt="" srcset="https://jflevesque.com/wp-content/uploads/2020/01/2DGridDmgZone.jpg 719w, https://jflevesque.com/wp-content/uploads/2020/01/2DGridDmgZone-300x284.jpg 300w" sizes="(max-width: 719px) 100vw, 719px"><figcaption>In the absence of wind, a cell on fire damages equally all its neighbors.</figcaption></figure></div>







<p>This causes a chain reaction effect where trees, explosive items, &nbsp;objects and patches of grass set each others on fire. &nbsp;It‚Äôs completely&nbsp;systemic and it makes it much more believable. It &nbsp;also scores pretty high on the&nbsp;player‚Äôs&nbsp;fun meter because it behaves as one would expect, yet as real fire, it sometimes gets totally out of control.</p>



<h2>OPTIMISATION</h2>



<p><strong>The Hair Transplant Strategy</strong></p>



<p>In an ideal world, we would have access to enough memory to hold&nbsp;an infinite number of particle emitters and we could display an infinite number of particles on screen.&nbsp;Unfortunately, the reality is that those numbers are actually pretty low.</p>



<p>To do more with less, we have to put our emitters where it really counts. Enters the hair transplant strategy! &nbsp;In Far Cry 2, the fire emitters are constantly being teleported around, most importantly, from the back of the camera to the front. The player‚Äôs point of view is monitored at all time and emitters that are burning out of sight are moved to a better location where they are also needed.</p>



<p>In addition, the emitters‚Äôs density is higher in close proximity of the player and lower as the distance increases. A kind of fire&nbsp;<a href="http://web.archive.org/web/20160114121147/http://en.wikipedia.org/wiki/Level_of_detail">LOD&nbsp;</a>if you will.&nbsp;If things are getting bad and we still need more emitters but none are available, we increase the particle sizes to give them more volume and fill more space on screen.</p>



<p>With this strategy, and some others, we can simulate a wildfire that is several meters wide with a relatively low number of particle emitters.<br></p>



<div><figure><img src="http://jflevesque.com/wp-content/uploads/2020/01/farc2.jpg" alt="" srcset="https://jflevesque.com/wp-content/uploads/2020/01/farc2.jpg 600w, https://jflevesque.com/wp-content/uploads/2020/01/farc2-300x169.jpg 300w" sizes="(max-width: 600px) 100vw, 600px"><figcaption>Credits: http://www.rockpapershotgun.com</figcaption></figure></div>



<p><strong>Event Pipeline</strong><br>Since the described system tried to avoid all complicated maths, generally speaking we will be GPU bound before being&nbsp;CPU bound.</p>



<p>That being said, the event pipeline could be a bottleneck. It works well when you have just a few cells on fire. But, it‚Äôs another story when you have thousands of them burning and&nbsp;advertising&nbsp;their state to the world. That will likely clog your CPU‚Äôs arteries.</p>



<p>The trick for me was to regroup the cells that were burning into&nbsp;<a href="http://web.archive.org/web/20160114121147/http://en.wikipedia.org/wiki/Axis-aligned_bounding_box#Axis-aligned_minimum_bounding_box" target="_blank" rel="noreferrer noopener">AABB</a>&nbsp;groups. These groups would constantly merge, split and&nbsp;change shape to follow the evolution of the fire. The events would then be sent per AABB instead of per cell, which saves&nbsp;a significant amount of processing power. Additionally, the events would be spread out across several frames in order to distribute the load and avoid framerate spikes.</p>



<p><strong>Keeping things under control.</strong><br>In your game, if you don‚Äôt constrain the propagation somehow, it will either</p>



<ul><li>Burn the entire map and kill all the NPCs</li><li>Fill out the ‚Ä¶</li></ul></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://jflevesque.com/2012/12/06/far-cry-how-the-fire-burns-and-spreads/">https://jflevesque.com/2012/12/06/far-cry-how-the-fire-burns-and-spreads/</a></em></p>]]>
            </description>
            <link>https://jflevesque.com/2012/12/06/far-cry-how-the-fire-burns-and-spreads/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25437800</guid>
            <pubDate>Wed, 16 Dec 2020 01:13:40 GMT</pubDate>
        </item>
    </channel>
</rss>
