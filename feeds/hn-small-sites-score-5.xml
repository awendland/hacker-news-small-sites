<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 5]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 5. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Thu, 15 Oct 2020 08:30:21 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-5.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Thu, 15 Oct 2020 08:30:21 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[The Niche I am Looking to Fill]]>
            </title>
            <description>
<![CDATA[
Score 31 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24763209">thread link</a>) | @DoreenMichele
<br/>
October 13, 2020 | http://www.eclogiselle.com/2020/10/the-niche-i-am-looking-to-fill.html | <a href="https://web.archive.org/web/*/http://www.eclogiselle.com/2020/10/the-niche-i-am-looking-to-fill.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<div id="post-body-206541096419142738"><p>
Eclogiselle is intended to be a compendium of free resources for small communities with paid services available below $5000. In fact, I hope to be able to offer some services for well under a thousand dollars.

</p><p>


I am looking to serve small communities that would have trouble hiring someone at all to do planning and economic development work for them. I am hoping to find creative ways to provide useful resources for communities who often either cannot afford paid staff or cannot find someone willing to work for them for what they can afford to pay.

</p><hr><p>
The small town I live in made an offer to a candidate for their city manager position and the candidate turned them down and took a higher paying job elsewhere. That seems to be par for the course.

</p><p>

Years ago when I was looking to become a professional planner, I haunted the online job listings. A lot of small communities kept the same job openings available for months at a time because of the challenges they face in filling such positions at all.

</p><p>
I have first-hand experience with my local <a href="https://www.reddit.com/r/CitizenPlanners/comments/duf6ae/main_street_america/">Main Street America</a> program. This is the leading voice for preservation-based economic development and community revitalization across the US. 
</p><p>
It is aimed at revitalizing small towns. In order to be an accredited Main Street program, you need to have an executive director: 

</p><ul><li>0-2500 people = half time volunteer Executive Director</li>

  <li>2500-5000 = half time paid Executive Director</li>

  <li>5000+ = full time paid Executive Director</li></ul><p>

So this well-established program doesn't expect a town of less than 2500 people to be able to pay their economic development director <i>at all</i>. It's a part-time, volunteer position for such communities. It's basically a labor of love. 
</p><p>
For towns between 2500 and 5000 people, they only expect them to be able to pay for a part-time director. It's only for communities above 5000 that they expect you to have a full-time paid executive director for this non-profit economic development entity.

</p><p>
Please note that if they have a full-time executive director, this is probably their only paid employee. There will also be a board running the non-profit and those are all unpaid positions.

</p><p>
So all the evidence suggests that small communities have trouble hiring planning and economic development staff <i>at all</i>, whether it is a city job or a job at a local non-profit trying to fill in the gaps in their small town. And when <a href="https://www.reddit.com/r/urbanplanning/comments/j5a0vr/dark_side_question_typical_services_and_prices_at/">I asked around</a>, the answers I got suggest small communities face additional challenges when they look to contract out services instead of hiring paid staff to serve them.
</p><p>
In one reply to my query, I was given a link to <a href="https://patch.com/new-jersey/triboro/kinnelon-council-members-fear-environmental-resource-e348f325fc">an article</a> from 2012 where The Land Conservancy of New Jersey was offering to do an Environmental Resources Inventory (ERI) for Kinnelon, a burrough in New Jersey. They were offering it at a discount and the price was expected to be $10,000 (back in 2012 -- no doubt, prices have gone up since then).
</p><p>
<a href="https://tlc-nj.org/">The Land Conservancy of New Jersey</a> is apparently a <i>non-profit</i> land trust that has a goal of protecting open space. The person who left the link implied that this is probably a typical fee for non-profits and universities serving this space for small communities.

</p><p>

Non-profits and universities are supposed to be the good guys, the affordable option, the folks doing it out of idealism and not to make a quick buck. But it doesn't take much digging to be suspicious of this $10,000 ERI and why it is being pushed.
</p><p>
In the article, one person objecting to paying for the ERI said, in part, <i>All we do is keep spending money and no ones giving us money.</i> so I pulled up the <a href="https://en.wikipedia.org/wiki/Kinnelon,_New_Jersey">Wikipedia page for Kinnelon</a>, New Jersey and, unsurprisingly, this is a wealthy suburb.
</p><p>
According to Wikipedia, in 2012 they were among the top 500 most expensive zip codes in the US. It lists them as at number 462.
</p><p>
A quick search tells me there are nearly 42,000 zip codes in the US. If you pull out a calculator and divide 462 by 42,000, the result is 0.011. So we are talking about people who are just outside of the One Percent. 
</p><p>
I read this article and I see vague, hand-wavy claims that this ERI is "useful for planning efforts" and I also see people complaining about a pattern of being bled for money over the years without getting results. I can readily believe they are being taken advantage of. 

</p><p>
I can believe that people keep going to Kinnelon burrough, selling them services "at a discount" (because "we are the good guys") for thousands of dollars -- because these people can come up with the money -- and the services aren't actually useful for development.
</p><p>
The other thing I was told was that most for-profit, private planning firms do not actively seek out projects that are below about $5k. If you approach them, they might do a small project for you, but chasing it down isn't worth it. It doesn't pay well enough.

</p><p>

Before life got in the way, I wanted to be a professional planner. I've spent years around online planning forums and attending local meetings and what not and I think I would have trouble finding a private planning firm. 
</p><p>
They seem to me to not be very visible. I'm not exactly an insider because I never got the career I wanted, but you would think this would be less opaque to me.
</p><p>

So my impression is that planning firms are hard to identify by small communities, aren't actively seeking business from small communities because it doesn't pay well enough and may not even take a bid from you even if you approach them. If it's only a few thousand dollars, they seem to feel like they are doing you some kind of favor if they are willing to work with you.

</p><p>

I am in Aberdeen, Washington. It is in a region I have dubbed The Pacific Coastal Region of Washington State or <a href="https://www.reddit.com/r/CoastalWA/">CoastalWA</a>. 

</p><p><a href="https://1.bp.blogspot.com/-bGDP0jo2muo/X4Tk73UfcOI/AAAAAAAAGyU/ng7YAFlb8jEcNG137qzgwJx-WcKRulB5QCLcBGAsYHQ/s0/CoastalWA256sq.png"><img alt="" data-original-height="256" data-original-width="256" src="https://1.bp.blogspot.com/-bGDP0jo2muo/X4Tk73UfcOI/AAAAAAAAGyU/ng7YAFlb8jEcNG137qzgwJx-WcKRulB5QCLcBGAsYHQ/s0/CoastalWA256sq.png"></a></p><p>



This is a region with a sparse number of small towns and a large number of unincorporated communities. There is at least a half million people, two or three dozen incorporated small towns and probably upwards of 200 unincorporated communities.

</p><p>
And most likely an influx of people will be coming here in the next few years because it is a relative safe haven from things like climate change. So I think the many small communities in this region need to begin preparing for growth if they don't want a bunch of well-heeled outsiders to come in and run rough-shod over the people who are already here.

</p><ul><li><a href="https://www.reddit.com/r/CoastalWA/comments/j4u0by/welcome/">
  Welcome to CoastalWA</a></li><li>
<a href="https://www.reddit.com/r/CoastalWA/comments/izecag/counties_of_coastal_wa/">Counties of CoastalWA</a></li><li>
<a href="https://www.reddit.com/r/CoastalWA/comments/iztsji/coastal_wa_is_a_relative_safe_haven_in_2020/">CoastalWA is A Relative Safehaven</a></li></ul><p>

So I think there is tremendous need for free and low cost economic development and planning resources and services that would work well for small communities. The only question in my mind is if I can figure out how to package up offerings that make sense for both me and them and find a way to connect with the people who need it.





</p><blockquote>The
  Map on this page is by <a href="http://stamen.com/">Stamen Design</a> and is being used under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Map Data by <a href="http://openstreetmap.org/">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>. It has been edited by <a href="https://doreenmichele.blogspot.com/">Doreen Traylor</a>.</blockquote>


<p>
<a href="https://news.ycombinator.com/item?id=24763209">Hacker News Discussion</a></p></div>
</div></div>]]>
            </description>
            <link>http://www.eclogiselle.com/2020/10/the-niche-i-am-looking-to-fill.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24763209</guid>
            <pubDate>Tue, 13 Oct 2020 07:40:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Predict a Reddit user's Myer Briggs type from their profile]]>
            </title>
            <description>
<![CDATA[
Score 31 | Comments 52 (<a href="https://news.ycombinator.com/item?id=24762449">thread link</a>) | @ragnarkar
<br/>
October 12, 2020 | https://gimmeserendipity.com/mbtimodel/reddit/ | <a href="https://web.archive.org/web/*/https://gimmeserendipity.com/mbtimodel/reddit/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
  

<title>Predict a Reddit User's MBTI Personality</title>

<form method="POST" action="/mbtimodel/reddit/" enctype="multipart/form-data">



<br>
<label for="message"><h4>Enter username here: </h4></label>


</form>
<p>Please be patient, this could take up to a minute to process.</p>


</div></div>]]>
            </description>
            <link>https://gimmeserendipity.com/mbtimodel/reddit/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24762449</guid>
            <pubDate>Tue, 13 Oct 2020 05:05:37 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[At Home Covid-19 Testing for Pirates – Hello Virology]]>
            </title>
            <description>
<![CDATA[
Score 30 | Comments 5 (<a href="https://news.ycombinator.com/item?id=24761208">thread link</a>) | @nikoftime
<br/>
October 12, 2020 | https://www.hellovirology.com/2020/10/at-home-covid-testing-for-pirates.html?hn | <a href="https://web.archive.org/web/*/https://www.hellovirology.com/2020/10/at-home-covid-testing-for-pirates.html?hn">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<div id="post-body-6021876468798783801">

<p>
In the age of COVID, we are all worried all the time. Am I sick? Did he just breathe on me? Will I kill my parents? I’m not even worried for myself, I say, but am I going to be the asshole that infects everyone? Every decision feels so heavy<sup id="fnref1"><a href="#fn1" rel="footnote">1</a></sup> all of the time. It’s exhausting.
</p>
<p>
A friend told me one day: a group of friends planned a get-together, and everyone got tested in the morning at a nearby center with a turnaround of a couple hours.
</p>
<p>
Brilliant. Testing. How obvious a salve! If I could know with reasonable confidence before and after an event that I was safe, I wouldn’t have to worry so much about killing my friends and parents, and I could do more things and see more humans. 
</p>
<p>
But, of course, in my area, I couldn’t find a testing center that would even test me without symptoms, much less give a sub-day turnaround. And, given the timeline of infection, I would really want frequent access to testing to make sure I wasn’t missing the onset of an infection. Alas.
</p>
<p>
I admit I raged against the machine a little— how can we not have better testing infrastructure at this point<sup id="fnref2"><a href="#fn2" rel="footnote">2</a></sup>? Why isn’t every PCR in the country running around the clock? Heck, I ran tests like that all the time in the lab— how hard could it be?
</p>
<p>
“How hard could it be?” — famous last words in tech. But I decided to find out, and it turns out that the answer is… not that hard. It’s actually surprisingly easy to set up, and I now have an at-home COVID testing rig that I have been using to test myself and my family. There are many caveats to that statement, and I will get to those, but, first— let me tell you a little bit more about how I set everything up.
</p>
<h3>What is a PCR, anyway?</h3>


<p>
There are a number of new technologies being developed to make testing for COVID easier, faster, and cheaper<sup id="fnref3"><a target="_blank" href="#fn3" rel="footnote">3</a></sup>, but the gold-standard is still a PCR-based test that looks for fragments of RNA from the virus. PCR stands for “polymerase chain reaction,” and it refers to the well-established process by which scientists can make copies of a given piece of DNA: a sample containing the target DNA, special DNA fragments called “primers,” and special enzymes are run through a temperature cycling program that replicates the target DNA sequence, doubling the number of target fragments with each pass through the program.
</p>

<table><tbody><tr><td><img height="413" src="https://lh4.googleusercontent.com/uBntKNqjM4N2JygvtofhLXkS0i1bDYqRg0rqiuUj9cE8y3IDyYQHK8j5RtLcGasq2-Bd54U16PK0vuiLbyi4apbmnHQmSrf10tt0uOsVPweazD5yc9sgdFFjsKqnLxMs85P1FAfQ=w640-h413" width="640"></td></tr><tr><td>Through a thermal cycling program, DNA is replicated. The magic of science.&nbsp;<br></td></tr></tbody></table><p>
PCR is run on a PCR machine. The simplest versions of these are thermal cyclers: there are little holes to put lab-sized plastic tubes in, and the machine runs programmed temperature patterns. These machines are used extensively in labs and clinics to create libraries of DNA fragments being studied for any number of reasons. 
</p>
<p>
A variation on the PCR theme is what’s called a “real-time PCR machine”<sup id="fnref4"><a target="_blank" href="#fn4" rel="footnote">4</a></sup>: a thermal cycler with the ability to measure fluorescence. Instead of just replicating the DNA fragment, a real-time PCR replicates the fragment via its thermal program while also measuring the amount of fluorescent signal created by the process of replicating each fragment in the presence of special fluorescent molecules<sup id="fnref5"><a target="_blank" href="#fn5" rel="footnote">5</a></sup>. A real-time PCR machine thus enables scientists to run a process called quantitative PCR, or qPCR, which answers the critical question, “How much of a given DNA fragment exists in this sample?” 
</p>
<p>
<a target="_blank" href="https://www.fda.gov/media/134922/download">The CDC protocol for COVID testing</a> relies on qPCR: collect a sample from the patient, extract the DNA and RNA from the sample, add special DNA fragments called “primers” that match the genetic sequence of SARS-CoV-2, and run qPCR to measure the amount of DNA in the sample that matched the SARS-CoV-2 primers. 
</p>
<p>
So, clearly, the first thing I needed to run an at-home COVID test was a real-time PCR. There are a number of major manufacturers, including <a target="_blank" href="https://lifescience.roche.com/en_us/brands/realtime-pcr-overview.html#qpcr-instruments">Roche</a> and <a target="_blank" href="https://www.bio-rad.com/en-us/category/real-time-pcr-systems?ID=059db09c-88a4-44ad-99f8-78635d8d54db">Bio-Rad</a>, but new top-of-the-line real-time PCR machines cost upwards of $20,000, which is more than I am willing to commit. There are also <a target="_blank" href="https://www.alibaba.com/trade/search?fsb=y&amp;IndexArea=product_en&amp;CatId=&amp;SearchText=real-time+pcr+system">manufacturers in China that sell on Alibaba</a>, but I couldn’t tell which machines would actually be real-time PCRs with software sufficiently in English for me to operate. Plus, after contacting several companies, it seemed they were reticent to ship to the US given regulations anyhow.
</p>
<p>
Which left the resale market. I was skeptical I could find anything given what I assumed would be a worldwide shortfall of PCRs, but I was happy to discover that the market for used real-time PCRs is robust: in addition to dedicated <a target="_blank" href="https://www.biosurplus.com/">used lab supply retailers</a>, there are a <a target="_blank" href="https://www.ebay.com/sch/i.html?_from=R40&amp;_trksid=p2380057.m570.l1311&amp;_nkw=real+time+pcr&amp;_sacat=0">wide range of systems available on eBay</a>. I watched the inventory cycle for a while, and soon enough found a good deal on the machine I wanted, the Applied Biosystems StepOne<sup id="fnref6"><a href="#fn6" rel="footnote">6</a></sup>. That was the machine I had used in the lab when getting my PhD, so I knew that it had the capabilities I needed and that the software would be ye olde and Windows-only, but usable. 
</p>



<h3>A lab to call my own</h3>


<p>
And so, for $5,000, I became the happy owner of a <strong>real</strong> real-time PCR. COVID-testing aside, real-time PCRs are workhorses of genomics labs, useful for any number of experiments, so I figured if nothing else, I was one step closer to having my own private lab space. But, reading through the CDC protocol, I realized how much standard equipment is assumed in a lab or clinic: freezer, centrifuge, eppies, tube racks, pipettes, ethanol, distilled water, and much more, even before you get to actual reagents (that is, the consumable chemicals).
</p>
<p>
Luckily, <a target="_blank" href="https://www.ebay.com/">eBay</a> and <a target="_blank" href="https://www.amazon.com/">Amazon</a> are here to help. I was quite impressed by how easy it was to quickly stock my lab with everything from pipette tips to saline. The centrifuge and pipettes I bought used; I first tried cheap new pipettes from Alibaba, but they were clearly inaccurate and inconsistent. That left the reagents and consumables. Most, including the expensive enzymes required for qPCR, came from <a target="_blank" href="https://www.thermofisher.com/">ThermoFisher</a>, and the rest came from any number of lab supply companies that turn up in Google searches.
</p>
<p>
All in all, I got everything I needed for less than $8,000 (the final supply list is <a target="_blank" href="https://docs.google.com/spreadsheets/d/1-3OBo0eH2512aYwh1O4uRNhoznlhtOHyqC2SRx1Mx1c/edit?usp=sharing">here</a>). Finding a place to put it all was tricky, especially while we’re all in our apartment all the time, but I had one dresser’s worth of space to spare. And so, in our guest bedroom above our linens and next to our assortment of exercise equipment, I now have my very own COVID-testing facility.
</p><table><tbody><tr><td><img height="480" src="https://lh6.googleusercontent.com/aYjbyGzxesocl7eDklxE_ScwNnLrlc3Bl4sMe7-yWzVCpWNmZo2X96efzQgEnj8D9atBv-qdqrgnns7JnBPhzZUh8YZohFdgiGORXWWOh_jifkzJE1Co8PMwtTVWMilDiYslbvam=w640-h480" width="640"></td></tr><tr><td>Don’t mind the hand towels I’m using to line the dresser.<br></td></tr></tbody></table>

<h3>Running an at-home COVID test</h3>


<p>
It takes me about two hours of hands-on time to collect and prep samples, plus an hour to run the PCR and analyze results. I’m intentionally not going to go through the details of the testing protocol itself; I used the <a target="_blank" href="https://www.fda.gov/media/134922/download">published CDC protocol</a>, and if you are not familiar enough with RNA extraction and qPCR to follow that protocol, then I can’t be held responsible for what you do. But, at a high level:
</p>
<ol>

<li>Nasal swabbing seems gross, so I collect a <a target="_blank" href="https://www.cdc.gov/flu/pdf/professionals/flu-specimen-collection-poster.pdf">throat swab</a>. This is the most dangerous part of the process for me as the “clinician”; reaching into the mouth of a potentially infected person is foolhardy. So, I only run the test for people who I am willing to die for<sup id="fnref7"><a href="#fn7" rel="footnote">7</a></sup>, and I have people self-swab for good measure.

</li><li>I use an <a target="_blank" href="https://www.thermofisher.com/order/catalog/product/12280050#/12280050">Invitrogen viral extraction kit</a> to lyse cells and collect RNA and DNA.

</li><li>Starting at the cell lysis step, I introduce a SARS-CoV-2 positive control (a fragment of the SARS-CoV-2 genome as a DNA plasmid) alongside the real human samples.

</li><li>I run reverse transcription (the process of turning RNA, either from the patient or the virus, into DNA) and qPCR in one go with a <a target="_blank" href="https://www.thermofisher.com/order/catalog/product/4444432#/4444432">TaqMan 1-step master mix</a> and each of three primers: two for SARS-CoV-2 genome targets and one negative control (a common human gene, RnaseP). I typically run two replicates per primer per sample to guard against my own imprecision.

</li>
  <li>In theory, qPCR would allow me to run comparative analyses, to determine how much SARS-CoV-2 is detectable in samples relative to the internal controls. However, all I really care about is the binary result, as ANY positive signal for the SARS-CoV-2 would warrant an official clinical test.

</li>
</ol>

<table><tbody><tr><td><img height="640" src="https://lh6.googleusercontent.com/URxJhR4w9LRMYyTacShsf_FDxIZtGt1WvBb3rrKG_4yi1rEdy8BiHXnfiHvyk6Mx6OhFVTrYfE-ySW0HczAawHITkE1zjDMCh7jxE_aTOwhIdVdwXsF2Im7uSs3D3fQ-NXRPZQtZ=w480-h640" width="480"></td></tr><tr><td>We have a lax shoe policy in our lab.<br></td></tr></tbody></table>

<table><tbody><tr><td><img height="366" src="https://lh4.googleusercontent.com/fzWQtnZX3bZ5CYpw4lo25PbQGaP67MhjKOnYf2JW-18GCmaFd8b07KAyH5CAL4gTOvv94dWd6uFGZWm8ItwCkRGuHbhfDTyyj8J00dn_msxjlA0Enmu4TVumDSmuTzVGTdidPtSn=w640-h366" width="640"></td></tr><tr><td>The software runs in Parallels on my Mac laptop, so that I can watch the happy rainbows of successful qPCR form as the program runs.</td></tr></tbody></table>

<table><tbody><tr><td><img height="410" src="https://lh6.googleusercontent.com/gmRHZ8UWYylh9Jj9X5eHqRYKMqAW3RucinRhLGhzBPbl2uTBtpqJARgZ32Xr9_G3_G7yIu2z1ZhDAr7A55klsomI0VPrzegxoXyOoxYIC62wtGj3AFvrK33h7jW56YYo1u3BiRcy=w640-h410" width="640"></td></tr><tr><td>The first two sets of bars represent signal from SARS-CoV-2 genes, while the third set is a common human gene used as a control. The y-axis represents the number of cycles of the thermal program required to detect signal for the target sequence, with bars at zeroish for no signal detected. The hardest part was getting Google Sheets to draw error bars, which proved impossible. Luckily, I only need the binary answer.<br></td></tr></tbody></table>

<h3>How reliable is testing?</h3>
<p>
I have now run a number of tests for myself and my family. Notably, I have not tested a COVID-positive person so far as I know, so I am not sure yet if any of this works at all. But the internal controls give me some confidence; I figure if I can successfully scrape human RNA off the inside of your throat, but not any viral RNA, chances are you’re not shedding a ton of viral particles in any case.
</p>
<p>
That said— I’m doing this in my house. Barefoot. Even if it were 100% accurate, there would still be a fourish day incubation window to contend with, during which someone could test negative but still be a threat. And I am of course not 100% accurate; even the official clinical tests have an error rate, and can return false positives (that is, return a positive result when the patient is uninfected) or false negatives (that is, return a negative result when the patient is infected). 
</p>
<p>
My lower-bound estimate is that my test is 90% accurate, so I use the 10% chance I am wrong to scale the base risk percentage. For example:
</p>
<ul>

<li>Marla is very conservative about her COVID risk, and for the two weeks prior to testing, she goes to the market twice, with a mask. She has not experienced any symptoms of COVID in relevant memory. We can ball-park Marla’s risk as 0.1% chance she has COVID. If we additionally test her and she comes back negative, there is 10% …</li></ul></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.hellovirology.com/2020/10/at-home-covid-testing-for-pirates.html?hn">https://www.hellovirology.com/2020/10/at-home-covid-testing-for-pirates.html?hn</a></em></p>]]>
            </description>
            <link>https://www.hellovirology.com/2020/10/at-home-covid-testing-for-pirates.html?hn</link>
            <guid isPermaLink="false">hacker-news-small-sites-24761208</guid>
            <pubDate>Tue, 13 Oct 2020 00:50:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Learning Haskell – Miscellaneous Enlightenments]]>
            </title>
            <description>
<![CDATA[
Score 43 | Comments 21 (<a href="https://news.ycombinator.com/item?id=24760007">thread link</a>) | @ducaale
<br/>
October 12, 2020 | https://sras.me/haskell/miscellaneous-enlightenments.html | <a href="https://web.archive.org/web/*/https://sras.me/haskell/miscellaneous-enlightenments.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <div>
        <div>
        
<!-- Main Content -->
<div>
  
  
  
  
  <hr>
  
    <p>The following are some of the so called 'Aha!' moments I have experienced
while learning Haskell. I am sharing them here so that it might help someone
spare the hopeless frustration that precedes them.</p>
<h3 id="about-the-idea-of-purely-functional-programming">About the idea of purely functional programming</h3>
<p>For a long time I didn't understand why 'functional programming' was considered better than "regular" imperative programming. So I continued to make programs in the
"regular" imperative fashion. And one day it hit me.</p>
<p>I saw the true nature of what I was doing. I saw how imperative program was
really about arranging a sequence of side effects, the majority of time the
side effect being the mutation of a variable. I saw how an invisible web of
dependencies between statements, that can span, not only spatial but also temporal dimensions, grow
inside my imperative functions with each statement I add to it. I saw how breaking
even one strand of this invisible web, can silently break function behavior and hence the whole program. And I was enlightened...</p>
<p>Enough with the Zen talk. The point is that an imperative programming language, like Python or C, allows the programmer to
create variables. It also allows the programmer refer these variables in the
future and also allows them to change their values during the runtime.</p>
<p>This is very powerful, but with that power (yea, you guessed it), comes a great
responsibility. The responsibility of tracking states of variables while
writing and reading the program. Because each statement that you add to a program depends on a state (state of all variables in scope) that was created by the statements surrounding it.</p>
<p>Purely functional programming takes away this difficult responsibility from the
programmers without taking away the associated powers. It does this by
providing a different set of tools. By this new set of tools, the programmer
can be just as or even more powerful. It takes away variable state changes and
loops and gives us continuation passing, folds, zips, filters and maps. The
enlightenment here is simple. It is that what ever you can express with state
changes and loops in an imperative language can be expressed with this new
vocabulary in a functional style.</p>
<h3 id="about-learning-haskell">About learning Haskell</h3>
<p>People say that Haskell is not complex, and that It is just different.  But I think
that is a useless statement. When the thing you are dealing with is vastly different from what
you are used to, it can appear complex no matter how simple it actually is.</p>
<p>I would say that there are parts of Haskell that are different but straight
forward, and parts that are different and not-so-straight-forward that it
will appear to be hopelessly complex when you are new to it. But bit by bit, topics that you once considered beyond your grasp will turn
approachable. When it happens, it is like unlocking a new level of a video
game; New wonders await. This is why learning Haskell is so much worth the
effort. There is enough depth and breadth to cover to keep you interested long
enough, at the same time being a very good general purpose language with an
excellent community behind it. And now it is even gaining popularity!</p>
<h4 id="about-the-terminology-you-might-encounter-while-learning-haskell">About the terminology you might encounter while learning Haskell</h4>
<p>Following is an excerpt from the script of the movie 'The Good Dinosaur'.</p>
<pre>Daddy T-Rex:
  I need you to keep on the dodge 
  and sidle up the lob lolly past them 
  hornheads , just hootin’ and hollerin’
  to score off them rustlers. We’ll cut dirt 
  and get the bulge on ‘em.
ARLO:
  What?
Son T-Rex:
  He just wants you to get on that rock and scream.
</pre>

<p>Point is, don't be fazed by the unfamiliar terminology.  Most of the time the
whole thing means something a lot simpler than it appears to be.</p>
<h3 id="about-haskell-functions">About Haskell functions</h3>
<p>Haskell functions do not have a statement to return a value to the calling
code. In hindsight, this is pretty obvious, Haskell programs does not have
statements, at all. Instead Haskell functions are expressions that evaluate to
a value, and this value is implicitly the "return" value of that function.
Despite this, you will see people say things like "this function returns x". By
that they just mean that the function evaluate to x. </p>
<h4 id="let-expressions">Let expressions</h4>
<p>If there was one thing that could have single handedly eased my mind as an
imperative programmer coming to functional programming, it is the 'let'
expression.  Because as soon as I found that Haskell functions are limited to
single expression, I am like, "there is only so much you can do with an
expression, how can one do anything useful with it?". My problem was that I was
thinking of expressions in imperative languages. The enlightenment here is that expressions in Haskell can be really elaborate, and Haskell's "let" expression allows you to define any number of intermediate expressions or functions that are required by your final expression. This brings us very close to an imperative style of programming, even though the execution is completely different, as we will see below.</p>
<pre><code>
  sumOfDoubleAndTriple :: Int -&gt; Int
  sumOfDoubleAndTriple x = let
    double = 2 * x
    triple = 3 * x 
  in double + triple
</code></pre>

<p>In the above function, we used the let expression to define two intermediate
results 'double' and 'triple' before adding them both and returning them as the
value of the function.</p>
<p>Note that these are not variable definitions. These bindings cannot change.
You won't be allowed to redefine a symbol within the same let expression. Also
the scope of the bindings are limited to the expression after the 'in' and any
other definitions nested in the same let block. Even though bindings cannot change,
bindings in a syntactically deeper level can shadow bindings coming from
levels above.</p>
<p>One important thing here is that the bindings in a let expressions are not like
assignment statements in an imperative language. They are not 'executed' from
top down. Instead one can think of the execution as starting from the expression after the
'in' clause, and the required values being looked up in the bindings and evaluated as required.</p>
<h3 id="typeclasses">Typeclasses</h3>
<p>There is something very simple about Haskell typeclasses that I took a while to
completely grasp. It is just that Haskell must be able to figure out the
matching instance from the place from which a call to a typeclass function is
made.  If it cannot, then it will be an error.</p>
<p>Without this understanding and keeping this simple thing in mind, you will not
be able to understand a lot of advanced type system features.  For example,
<code>FunctionalDependencies</code> extension. It also helps understanding a lot of
errors that the typechecker ends up throwing at you.</p>
<h3 id="return-type-polymorphism">Return type Polymorphism</h3>
<p>If you ask, this was the biggest enlightenment for me, and one that snapped
a lot things into place. The simple fact, that it is possible for Haskell functions to return
different type of values depending on the type that is required at the call
site. In other words, Haskell functions can be polymorphic in the return type.
The simplest example I can think of is the 'read' function of type <code>String -&gt;
a</code>.  The call to this function in <code>(1::Int) + (read "2")</code> will return an <code>Int</code>
and in <code>(1::Float) + (read "2")</code> will return a Float.</p>
<h3 id="about-io">About IO</h3>
<p>When I was starting with Haskell, I remember trying to take a value wrapped in
IO out of it, purely. After a while, I realized that there is no way to take a
value out of an <code>IO</code> purely, that is, you cannot have a function <code>IO a -&gt; a</code>.
It is not because <code>IO</code> is a Monad and Monads are special cased magic, but
simply because the constructor of <code>IO</code> is not exported out of its module. This
feels so obvious now, but it wasn't once.</p>
<h3 id="wrapper-confusion">Wrapper confusion</h3>
<p>When I was still new to Haskell, I some how ended up with an intution that
types of the form <code>Xyz a</code> have tiny values of <code>a</code> wrapped inside them. And one day
I came across this function of type that looked like <code>(b -&gt; a) -&gt; SomeType a -&gt; SomeType b</code>.</p>
<p>And I am like "W.T.F !? Can GHC reverse engineer functions and make them work in reverse?"
How else can you convert a <code>b</code> wrapped in <code>f</code> to an <code>a</code> when all you have is a function that
can convert from <code>a</code> to <code>b</code>?</p>
<p>Well, the SomeType was defined as something like <code>data SomeType a = SomeType (a -&gt; Int)</code>
So the function can be easily defined as something like.</p>
<pre><code>
fn1 :: (b -&gt; a) -&gt; SomeType a -&gt; SomeType b
fn1 bToA (SomeType aToInt) = SomeType (\b -&gt; aToInt $ bToA b) -- SomeType $ aToInt.bToA
</code></pre>

<p>The point is, type of the form <code>Xyz a</code> need not be 'wrappers' or sandwiches or
anything. A type does not tell you nothing about the structure of the data
without it's definition. </p>
<p>Point is, If you have flawed ideas at the a more fundamental level, it will limit your ability to wrap your head around advanced concepts.</p>
<h3 id="the-do-notation">The 'do' notation</h3>
<p>A do block such as,</p>
<pre><code>
do
  a &lt;- expression1
  expression2
  expression3
</code></pre>

<p>DOES NOT desugar to</p>
<pre><code>
  expression1 &gt;&gt;= expression2 &gt;&gt;= expression3
</code></pre>

<p>or to..</p>
<pre><code>
  expression1 &gt;&gt;= (\a -&gt; expression2) &gt;&gt;= (\_ -&gt; expression3)
</code></pre>

<p>but something equivalent to</p>
<pre><code>
  expression1 &gt;&gt;= (\a -&gt; expression2 &gt;&gt;= (\_ -&gt; expression3))
</code></pre>

<p>Even though I was aware of this, I have often caught myself holding the
preceeding two wrong intutions time to time. So I now remember it as desugaring
to 'first expression in block &gt;&gt;= rest of block wrapped in a lambda'</p>
<p>If you recall the signature of <code>&gt;&gt;=</code> from the <code>Monad</code> class, it is <code>&gt;&gt;= :: m a -&gt; (a -&gt; mb) -&gt; mb</code>
So the arguments to <code>&gt;&gt;=</code> matches with the desugared parts as follows.</p>
<pre><code>
   expression1 &gt;&gt;= (\a -&gt; expression2 &gt;&gt;= (\_ -&gt; expression3))
-- |-- m a --| &gt;&gt;= | --------- (a -&gt; mb) --------------------|
</code></pre>

<p>Another persistent, wrong intuition I had a hard time getting rid of is that it
is the Monad's context that the lambdas in the RHS of <code>&gt;&gt;=</code> get as their argument.</p>
<p>But it is not. Instead it is what ever value that came out of the Monad on the
LHS of <code>&gt;&gt;=</code>, after it was extracted by the code in <em>the Monads
implementation</em>.  It is possible to set up the monad's value in such a way so
as to make the <code>&gt;&gt;=</code> implementation in the monad's instance to do something specific.</p>
<p>For …</p></div></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://sras.me/haskell/miscellaneous-enlightenments.html">https://sras.me/haskell/miscellaneous-enlightenments.html</a></em></p>]]>
            </description>
            <link>https://sras.me/haskell/miscellaneous-enlightenments.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24760007</guid>
            <pubDate>Mon, 12 Oct 2020 22:09:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Art of Oatmeal]]>
            </title>
            <description>
<![CDATA[
Score 13 | Comments 11 (<a href="https://news.ycombinator.com/item?id=24759886">thread link</a>) | @hugodutka
<br/>
October 12, 2020 | https://vasilishynkarenka.com/the-art-of-oatmeal/ | <a href="https://web.archive.org/web/*/https://vasilishynkarenka.com/the-art-of-oatmeal/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://images.unsplash.com/photo-1598048851887-0263d4f43e73?ixlib=rb-1.2.1&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb&amp;w=2000&amp;fit=max&amp;ixid=eyJhcHBfaWQiOjExNzczfQ 300w,
                            https://images.unsplash.com/photo-1598048851887-0263d4f43e73?ixlib=rb-1.2.1&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb&amp;w=2000&amp;fit=max&amp;ixid=eyJhcHBfaWQiOjExNzczfQ 600w,
                            https://images.unsplash.com/photo-1598048851887-0263d4f43e73?ixlib=rb-1.2.1&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb&amp;w=2000&amp;fit=max&amp;ixid=eyJhcHBfaWQiOjExNzczfQ 1000w,
                            https://images.unsplash.com/photo-1598048851887-0263d4f43e73?ixlib=rb-1.2.1&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb&amp;w=2000&amp;fit=max&amp;ixid=eyJhcHBfaWQiOjExNzczfQ 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://images.unsplash.com/photo-1598048851887-0263d4f43e73?ixlib=rb-1.2.1&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb&amp;w=2000&amp;fit=max&amp;ixid=eyJhcHBfaWQiOjExNzczfQ" alt="The art of oatmeal">
            </figure>

            <section>
                <div>
                    <p>Breakfast is not the most important meal of the day, but it’s the one most people screw up badly. Over the years, I’ve come to understand what my ideal breakfast should look like:</p><ul><li>Fast to cook and fast to eat. If I spend too much time on stuff that doesn’t matter in the morning, then the whole day gets infected with laziness.</li><li>Light enough to support creative work afterward. I begin writing immediately after I finish eating. And if I devoured a giant omelet with cheese and shrimp, I can’t think clearly.</li><li>Nutritious enough to provide energy until lunch. I don’t want to think about food when I’m working, so the breakfast must power me for at least 3h of deep work before lunch.</li></ul><p>Half a year ago, I stumbled upon oatmeal. For a no-carb fan, it didn’t seem like a big deal at first. But I gave it a shot.</p><p>I’ve tried microwaving oatmeal, boiling it with milk, and even chilling oats overnight. I’ve experimented with berries, fruit, and nuts. I’ve tested ten different types of milk, including oat drink, which is not milk at all.</p><p>I couldn’t resist.</p><figure><iframe width="612" height="344" src="https://www.youtube.com/embed/lNGnrO3thMY?start=150&amp;feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><figcaption>Oatmeal is like shrimp.</figcaption></figure><p>Here are two best combos I’ve discovered:</p><h2 id="almond-coco-coconut-milk-almonds-raisins">Almond-Coco: coconut milk, almonds, raisins</h2><figure><img src="https://vasilishynkarenka.com/content/images/2020/10/IMG_1441-Copy-1.JPG" alt="" srcset="https://vasilishynkarenka.com/content/images/size/w600/2020/10/IMG_1441-Copy-1.JPG 600w, https://vasilishynkarenka.com/content/images/size/w1000/2020/10/IMG_1441-Copy-1.JPG 1000w, https://vasilishynkarenka.com/content/images/size/w1600/2020/10/IMG_1441-Copy-1.JPG 1600w, https://vasilishynkarenka.com/content/images/size/w2400/2020/10/IMG_1441-Copy-1.JPG 2400w" sizes="(min-width: 720px) 720px"><figcaption>A glass of milk helps to cope with the tongue-burning oatmeal right from the microwave.</figcaption></figure><p>First things first: coconut milk is not <em>really</em> coconut milk. It’s not one of those cheap drinks people sell for a pound or two. The drink is a mix of crushed coconut and some water. This makes it fatty and high in calories, which is perfect for someone who wants their breakfast to be small but nutritious. It also has a natural sweetness because of the coconut itself.</p><p>Coconut milk turns oatmeal into something totally different. Oats become soft and change their structure. The density of the milk also prevents oats from getting dry quickly. This means that you can enjoy “wet” oatmeal for longer and don’t have to bother adding more milk before cooking.</p><p>Also, almonds behave differently if you use coconut milk. They become soft enough so that you don’t have to crack your teeth to bite them. Pro tip: if you’re boiling your oatmeal with milk, add almonds just 2-3 minutes before turning the heat off. This will do the trick.</p><p>Finally, raisins add sweetness and complement the taste of coconut milk nicely. Together, the two provide a sweet but not bitterly sweet taste. Just enough sweet to not add any sugar.</p><h2 id="blue-banana-oat-drink-banana-blueberries-raspberries-walnuts">Blue-Banana: oat drink, banana, blueberries, raspberries, walnuts</h2><figure><img src="https://vasilishynkarenka.com/content/images/2020/10/IMG_2718.jpg" alt="" srcset="https://vasilishynkarenka.com/content/images/size/w600/2020/10/IMG_2718.jpg 600w, https://vasilishynkarenka.com/content/images/size/w1000/2020/10/IMG_2718.jpg 1000w, https://vasilishynkarenka.com/content/images/size/w1600/2020/10/IMG_2718.jpg 1600w, https://vasilishynkarenka.com/content/images/size/w2400/2020/10/IMG_2718.jpg 2400w" sizes="(min-width: 720px) 720px"><figcaption>I buy my berries at Sainsbury's; they always have fresh ones.</figcaption></figure><p>That’s my current favorite one. I use <a href="https://www.amazon.co.uk/Oatly-Original-Drink-Litre-Pack/dp/B0168UVSPG">Oatly Original Oat Drink</a> as a foundation here; that’s something I’ve only been able to find in the UK. It’s a nicely designed drink made from 80% water and 10% rolled oats. I loved it from the first try, and now I drink about 1L every day. And there’s something special in using oat drink for cooking oatmeal. It just feels right.</p><p>The blueberries-banana-raspberries combo is worth a few words. First, it’s a perfect mix of sweetness and acidity. I usually do about 50g of blueberries and raspberries, and one banana per portion. Berries complement banana nicely and also add those tiny bursts of juice when you bite them. I love it so much.</p><p>Lastly, walnuts make this one more nutritious. If you microwave them with the oats at 900w for 1m40s, they also become soft and perfectly match mushy banana.</p><figure><img src="https://vasilishynkarenka.com/content/images/2020/10/IMG_5795.jpg" alt="" srcset="https://vasilishynkarenka.com/content/images/size/w600/2020/10/IMG_5795.jpg 600w, https://vasilishynkarenka.com/content/images/size/w1000/2020/10/IMG_5795.jpg 1000w, https://vasilishynkarenka.com/content/images/size/w1600/2020/10/IMG_5795.jpg 1600w, https://vasilishynkarenka.com/content/images/size/w2400/2020/10/IMG_5795.jpg 2400w" sizes="(min-width: 720px) 720px"><figcaption>Watching the sunrise at 6 a.m. from the 29th floor in Minsk, Belarus. Looks like a nuclear bomb.</figcaption></figure><p>The mornings are special to me. </p><p>If I waste a second in the morning, I feel like the day is not going well already. This leads to anxiety, stress, and busyness of mind.</p><p>But if I win the morning, I almost always win the day. That’s why I move through those precious morning hours almost like a robot, performing the same routine over and over again. I only break the habit on some exceptional occasions. For example, last week, I’d been helping a friend with a YC application until 3 am and woke up at about 9.</p><hr><p>I wake up at 5:30 and go straight to the bathroom. I wash my face, clean my teeth, and go to the toilet. At 5:40, I put up training clothes and begin working out. After about 50 minutes of HIIT, I take a shower and go downstairs to have breakfast. I turn on some music like Christmas Jazz on Spotify (it’s September, I know, but so what?) and begin cooking my breakfast.</p><p>First, I get my dishes ready. I open the cupboard and take one deep plate and one flat. I also bring two spoons and a cup to pour some oat drink. This may sound like a hell of a process, but you’d be surprised if you saw how automatic it is.</p><p>Once the dishes are out there, I grab the ingredients. I take the oatmeal and nuts from the cupboard and bring fruit, berries, and oat drink from the fridge. </p><p>I open the oatmeal pack and pour some rolled oats into the deep dish. About 2/3 is enough; more will not leave enough space for fruit and berries. Next, I add some walnut pieces on top of the rolled oats and begin pouring the thing with oat drink. I add the liquid gradually, giving oats the time to soak some of the liquid so that the whole thing becomes consistent. Once pouring is done, I mix the oatmeal with a large spoon and bring it to the microwave.</p><p>I set the microwave for 900W and 2 minutes; that’s the best mode of cooking oatmeal I’ve found so far. Once the microwave starts heating the oatmeal, I begin washing banana and blueberries, my current favorite mix. Usually, I try to do it in parallel and manage to get the banana cut in small circles right before 1:20-1:30 hits. At this time, I throw the knife away and jump to the microwave to save the oatmeal.</p><p>Sometimes I fail.</p><figure><img src="https://vasilishynkarenka.com/content/images/2020/10/IMG_0684.jpg" alt="" srcset="https://vasilishynkarenka.com/content/images/size/w600/2020/10/IMG_0684.jpg 600w, https://vasilishynkarenka.com/content/images/size/w1000/2020/10/IMG_0684.jpg 1000w, https://vasilishynkarenka.com/content/images/size/w1600/2020/10/IMG_0684.jpg 1600w, https://vasilishynkarenka.com/content/images/size/w2400/2020/10/IMG_0684.jpg 2400w" sizes="(min-width: 720px) 720px"><figcaption>There’s no way to mastery without mistakes.</figcaption></figure><p>But in most cases, it’s okay. I <em>feel</em> when it’s ready and usually pause the microwave at about 1:20. I open the microwave and mix the oatmeal with a large spoon. I’ve found mixing to be necessary for rolled oats to become soft enough to not get stuck between my teeth and not too soft to turn into porridge. Just right. After I’m done with mixing, I close the microwave and resume heating.</p><p>After two minutes are done, the microwave stops. I grab my small flat plate and cover the oatmeal. This helps to steam cook rolled oats a bit more to make them soft.</p><p>Once I get the oatmeal covered, I begin preparing fruit and berries. If you ever played fruit ninja, you know exactly what I mean. I tried all sorts of forms but found banana to be the most delicious when cut into medium width circles, about .3 inches wide. Once the banana is ready, I uncover the oatmeal plate and put banana in there. Then I mix it up with the oatmeal with a large spoon. </p><p>By this point, the oatmeal is already great. But I’ve found that mixing it up with banana and leaving covered for another 30 seconds makes it just perfect. The oats soften even more and the whole thing becomes more consistent and viscous, and I love it that way.</p><p>After the oatmeal is ready, I add berries on top. I used to mix them with oats, but now I just add them on top because berries look nicer if they’re not covered with the oatmeal mucus.</p><p>I pour a cup of oat drink, bring the dish to my table, take a picture, and begin eating.</p><p>You just spent five minutes reading about how I cook oatmeal for breakfast. Or you didn’t. In both cases, you might be wondering why I am telling you all of this. And how on Earth can a person be so stoked about microwaving oatmeal for breakfast; it doesn’t sound very exciting. He seems to be very passionate about it.</p><p>When I began practicing, I wasn’t. All I wanted was to find an easy to cook breakfast, and nothing more.</p><p>But day after day, I was getting better at cooking oatmeal. I started being curious about it and began experimenting with ingredients, milk and oats. Months later, I stopped thinking about cooking when I was doing it. My body was in perfect sync with my mind, and I started moving like a dancer around the kitchen. I was in the flow.</p><p>That’s when passion came. I became passionate about oatmeal <em>after</em> I’ve become good at it. And if you told me a year ago that I’d be passionate about putting a bunch of oats in the microwave, I’d never believed you.</p><p>So don’t believe people who sell you on the idea of following your passion. It’s very seductive because all the cool guys seem to be very passionate about what they do. But if you think about it, there are two ways to this place. You can begin with passion and develop greatness. Or you can become a master and pick up some passion <a href="https://youtu.be/uaSqh4DiQSw">along the way</a>.</p><p>And as most people preach the first one, I naturally think the opposite is true. Here’s a quick thought experiment to try. Play back your childhood and try to understand <em>why</em> you became passionate about some things and not the others. You were likely naturally good at them. Or you figured them out way faster than other kids did. In any case, you tried lots of stuff.</p><p>Now, apply this passion discovery idea to the present. Instead of following your small set of existing passions, try to broaden them a little bit first. <a href="https://vasilishynkarenka.com/learning/">Learn a bunch of things</a>. Experiment. Become a master at something. No matter if you succeed or fail, you’ll discover something amusing about yourself. And I bet that passion will follow.</p>
                </div>
            </section>

                <section>
    <h3>Subscribe to Vasili Shynkarenka</h3>
    <p>Get the latest posts delivered right to your inbox</p>
    <form data-members-form="subscribe">
        
        <p><strong>Great!</strong> Check your inbox and click the link to confirm your subscription.
        </p>
        <p>
            Please enter a valid email address!
        </p>
    </form>
</section>

        </article>

    </div>
</div></div>]]>
            </description>
            <link>https://vasilishynkarenka.com/the-art-of-oatmeal/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24759886</guid>
            <pubDate>Mon, 12 Oct 2020 21:54:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Towards Tactic Metaprogramming in Haskell]]>
            </title>
            <description>
<![CDATA[
Score 178 | Comments 34 (<a href="https://news.ycombinator.com/item?id=24759649">thread link</a>) | @headalgorithm
<br/>
October 12, 2020 | https://reasonablypolymorphic.com/blog/towards-tactics/index.html | <a href="https://web.archive.org/web/*/https://reasonablypolymorphic.com/blog/towards-tactics/index.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <center>
<img src="https://reasonablypolymorphic.com/images/fmaptree.gif">
</center>
<p>Isn’t it weird that we treat source code as text? That is, we have this extremely well-structured and strongly-typed object — the abstract syntax tree — that exists conceptually in our minds, and in actuality inside of our compiler, but for some reason we pretend it’s just a pile of bytes and edit it byte-by-byte rather than semantically?</p>
<p>When you stop and think about it, that’s like the stupidest idea ever. We as the authors don’t think of our code as bytes, nor does our interpreter or compiler. But instead we take the semantic understanding inside of our heads, serialize it into bytes, and then get the compiler to parse and rediscover the ideas inside our head. What a waste of effort.</p>
<p>Instead, you can use the incredible <a href="https://totbwf.github.io/">TOTBWF</a> and my new Tactics Plugin for the <a href="https://github.com/haskell/haskell-language-server">Haskell Language Server</a>, which will automatically and intelligently fill holes in your Haskell programs.</p>
<p>This blog post describes what a tactics engine is and why you want one, and is a good introduction to how in the hell we can automatically write your code for you.</p>
<h2 id="tactics">Tactics</h2>
<p>Imagine you’re pair programming with a junior engineer. In the navigator seat, you’ll be guiding your partner through the implementation, guiding them through the high-level strokes and letting them actually do the coding part. In order to implement <code>foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b</code>, for example, the guidance you give your partner might be:</p>
<ol type="1">
<li>Bind the function arguments</li>
<li>Case split on the <code>[a]</code> parameter</li>
<li>If it’s <code>[]</code>, do the obvious thing</li>
<li>Otherwise call your function and recurse.</li>
</ol>
<p>These instructions aren’t a real program by any means, but you might call them a “program sketch.” The hard part of programming (thinking about what to do) is captured here, but <em>actually doing it</em> is left as an exercise to the reader.</p>
<p>A tactics engine transforms a program sketch like the above into an actual program. Tactics free us from the tyranny of text editing and pedantic details, allowing us to work at a higher semantic level of programming.</p>
<p>Tactics correspond to semantic operations over our program. Much like how the primitive commands in text editors (delete to end of line, insert parentheses, etc) can be composed to refine the textual representation of one program into the textual representation of another, we can compose small tactics in order to build larger ideas.</p>
<p>As an example, consider how we can fill in the following hole:</p>
<div id="cb1"><pre><code><span id="cb1-1"><span>data</span> <span>Id</span> a <span>=</span> <span>Id</span> a</span>
<span id="cb1-2"></span>
<span id="cb1-3"><span>instance</span> <span>Functor</span> <span>Id</span> <span>where</span></span>
<span id="cb1-4"><span>  fmap ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Id</span> a <span>-&gt;</span> <span>Id</span> b</span>
<span id="cb1-5">  <span>fmap</span> <span>=</span> _</span></code></pre></div>
<p>Rather than writing this function all at once, we can instead build it, one idea at a time. The first step is obviously to bind function arguments (the <code>intros</code> tactic), which results in the refined expression:</p>
<div id="cb2"><pre><code><span id="cb2-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Id</span> a <span>-&gt;</span> <span>Id</span> b</span>
<span id="cb2-2"><span>fmap</span> <span>=</span> \fab ida <span>-&gt;</span> _</span></code></pre></div>
<p>We’re left with a new hole, but this one is “smaller” than the old one; we’ve refined the previous hole, filling in some of its structure. As a result, the type of our new hole is <code>Id b</code>, and we now have both <code>fab :: a -&gt; b</code> and <code>ida :: Id a</code> in scope. We can simplify the hole further by now pattern matching on <code>ida</code> (the <code>destruct ida</code> tactic):</p>
<div id="cb3"><pre><code><span id="cb3-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Id</span> a <span>-&gt;</span> <span>Id</span> b</span>
<span id="cb3-2"><span>fmap</span> <span>=</span> \fab ida <span>-&gt;</span> <span>case</span> ida <span>of</span></span>
<span id="cb3-3">  <span>Id</span> a <span>-&gt;</span> _</span></code></pre></div>
<p>The resulting hole still has type <code>Id b</code>, but we’ve now introduced <code>a :: a</code> in scope. Our next step is to build an <code>Id</code> value, which we can do by producing its data constructor (the <code>split</code> tactic):</p>
<div id="cb4"><pre><code><span id="cb4-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Id</span> a <span>-&gt;</span> <span>Id</span> b</span>
<span id="cb4-2"><span>fmap</span> <span>=</span> \fab ida <span>-&gt;</span> <span>case</span> ida <span>of</span></span>
<span id="cb4-3">  <span>Id</span> a <span>-&gt;</span> <span>Id</span> _</span></code></pre></div>
<p>Again we’ve shrunk the problem — now our hole has type <code>b</code>. At this point we can call the <code>fab</code> function to produce a <code>b</code> (via the <code>apply fab</code> tactic):</p>
<div id="cb5"><pre><code><span id="cb5-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Id</span> a <span>-&gt;</span> <span>Id</span> b</span>
<span id="cb5-2"><span>fmap</span> <span>=</span> \fab ida <span>-&gt;</span> <span>case</span> ida <span>of</span></span>
<span id="cb5-3">  <span>Id</span> a <span>-&gt;</span> <span>Id</span> (fab _)</span></code></pre></div>
<p>All that’s left is a hole with type <code>a</code>. Fortunately, we have <code>a :: a</code> in scope, so we can just plop that in to the hole via the <code>assumption</code> tactic:</p>
<div id="cb6"><pre><code><span id="cb6-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Id</span> a <span>-&gt;</span> <span>Id</span> b</span>
<span id="cb6-2"><span>fmap</span> <span>=</span> \fab ida <span>-&gt;</span> <span>case</span> ida <span>of</span></span>
<span id="cb6-3">  <span>Id</span> a <span>-&gt;</span> <span>Id</span> (fab a)</span></code></pre></div>
<p>And just like that, we’ve produced an implementation of our desired function! By thinking in terms of the semantic operations we’d like to perform at each hole (instead of how to manipulate the bytes of text), we’ve changed the level of abstraction at which we think about editing. The implications of this might not be immediately obvious, so let’s explore them together.</p>
<p>Let’s list the tactic steps we took to derive <code>fmap</code>:</p>
<div id="cb7"><pre><code><span id="cb7-1">intros</span>
<span id="cb7-2">destruct ida</span>
<span id="cb7-3">split</span>
<span id="cb7-4">apply fab</span>
<span id="cb7-5">assumption</span></code></pre></div>
<p>Up to alpha renaming, this composition of tactics is sufficient to derive <code>fmap</code> for any sum or product type that doesn’t do anything “exciting” with its type variable. By running the same steps, we can implement <code>fmap</code> for any of the following types:</p>
<div id="cb8"><pre><code><span id="cb8-1">(a, b)</span>
<span id="cb8-2"><span>Either</span> a b</span>
<span id="cb8-3"><span>Maybe</span> a</span>
<span id="cb8-4"><span>Const</span> a b</span></code></pre></div>
<p>Let’s convince ourselves of this by quickly running through the derivation for <code>Maybe a</code>. We start again with <code>fmap</code> and its type:</p>
<div id="cb9"><pre><code><span id="cb9-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Maybe</span> a <span>-&gt;</span> <span>Maybe</span> b</span>
<span id="cb9-2"><span>fmap</span> <span>=</span> _</span></code></pre></div>
<p>After running <code>intros</code>:</p>
<div id="cb10"><pre><code><span id="cb10-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Maybe</span> a <span>-&gt;</span> <span>Maybe</span> b</span>
<span id="cb10-2"><span>fmap</span> <span>=</span> \fab ma <span>-&gt;</span> _</span></code></pre></div>
<p>and then <code>destruct ma</code></p>
<div id="cb11"><pre><code><span id="cb11-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Maybe</span> a <span>-&gt;</span> <span>Maybe</span> b</span>
<span id="cb11-2"><span>fmap</span> <span>=</span> \fab ma <span>-&gt;</span> <span>case</span> ma <span>of</span></span>
<span id="cb11-3">  <span>Nothing</span> <span>-&gt;</span> _</span>
<span id="cb11-4">  <span>Just</span> a  <span>-&gt;</span> _</span></code></pre></div>
<p>Applying <code>split</code> here is a little tricky; technically it will force us to try both <code>Nothing</code> and <code>Just _</code> at each hole in a weird sort of quantum superposition. Let’s ignore this detail for right now, and come back to it immediately after finishing the derivation. Assuming we pick the right data cons, after <code>split</code> our program looks like this:</p>
<div id="cb12"><pre><code><span id="cb12-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Maybe</span> a <span>-&gt;</span> <span>Maybe</span> b</span>
<span id="cb12-2"><span>fmap</span> <span>=</span> \fab ma <span>-&gt;</span> <span>case</span> ma <span>of</span></span>
<span id="cb12-3">  <span>Nothing</span> <span>-&gt;</span> <span>Nothing</span></span>
<span id="cb12-4">  <span>Just</span> a  <span>-&gt;</span> <span>Just</span> _</span></code></pre></div>
<p>Now we run <code>apply fab</code>. Because <code>Nothing</code> doesn’t take any arguments, it didn’t produce any holes, so we need look only at the <code>Just</code> case:</p>
<div id="cb13"><pre><code><span id="cb13-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Maybe</span> a <span>-&gt;</span> <span>Maybe</span> b</span>
<span id="cb13-2"><span>fmap</span> <span>=</span> \fab ma <span>-&gt;</span> <span>case</span> ma <span>of</span></span>
<span id="cb13-3">  <span>Nothing</span> <span>-&gt;</span> <span>Nothing</span></span>
<span id="cb13-4">  <span>Just</span> a  <span>-&gt;</span> <span>Just</span> (fab _)</span></code></pre></div>
<p>and finally we run <code>assumption</code> to fill in the hole:</p>
<div id="cb14"><pre><code><span id="cb14-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Maybe</span> a <span>-&gt;</span> <span>Maybe</span> b</span>
<span id="cb14-2"><span>fmap</span> <span>=</span> \fab ma <span>-&gt;</span> <span>case</span> ma <span>of</span></span>
<span id="cb14-3">  <span>Nothing</span> <span>-&gt;</span> <span>Nothing</span></span>
<span id="cb14-4">  <span>Just</span> a  <span>-&gt;</span> <span>Just</span> (fab a)</span></code></pre></div>
<p>Look at that! Even though it would require significantly different editing commands to write the syntax of these two functor instances, they are both descried by the same composition of tactics. This is what I mean by “semantic editing,” we’re moving the algorithm for producing functor instances out of our heads and reifying it into something the computer understands. In essence, by writing <code>fmap</code> once, we can teach the computer how to write it for us in the future.</p>
<p>I mentioned earlier that <code>split</code> gives us some issues here. Reading closely, you’ll notice that there is nothing in our tactics that say we need to <code>split</code> the same data constructor that we just <code>destruct</code>ed. In actuality there are four different, valid programs that can be produced by the above set of tactics:</p>
<div id="cb15"><pre><code><span id="cb15-1"><span>fmap</span> <span>=</span> \fab ma <span>-&gt;</span> <span>case</span> ma <span>of</span></span>
<span id="cb15-2">  <span>Nothing</span> <span>-&gt;</span> <span>Nothing</span></span>
<span id="cb15-3">  <span>Just</span> a  <span>-&gt;</span> <span>Nothing</span></span>
<span id="cb15-4"></span>
<span id="cb15-5"><span>fmap</span> <span>=</span> \fab ma <span>-&gt;</span> <span>case</span> ma <span>of</span></span>
<span id="cb15-6">  <span>Nothing</span> <span>-&gt;</span> <span>Nothing</span></span>
<span id="cb15-7">  <span>Just</span> a  <span>-&gt;</span> <span>Just</span> (fab a)</span>
<span id="cb15-8"></span>
<span id="cb15-9"><span>fmap</span> <span>=</span> \fab ma <span>-&gt;</span> <span>case</span> ma <span>of</span></span>
<span id="cb15-10">  <span>Nothing</span> <span>-&gt;</span> <span>Just</span> _</span>
<span id="cb15-11">  <span>Just</span> a  <span>-&gt;</span> <span>Nothing</span></span>
<span id="cb15-12"></span>
<span id="cb15-13"><span>fmap</span> <span>=</span> \fab ma <span>-&gt;</span> <span>case</span> ma <span>of</span></span>
<span id="cb15-14">  <span>Nothing</span> <span>-&gt;</span> <span>Just</span> _</span>
<span id="cb15-15">  <span>Just</span> a  <span>-&gt;</span> <span>Just</span> (fab a)</span></code></pre></div>
<p>Choosing the “best” implementation of these possibilities is largely a matter of heuristics, which I plan to describe in a later post. For now, let’s just assume our tactics engine is smart enough to come up with the one you had in mind.</p>
<p>Of course, the real issue here is that nothing forces our <code>destruct</code> and <code>split</code> tactics to use the same data constructor. We can eliminate this ambiguity by noticing that in <code>fmap</code>, we’re not actually trying to destruct and then split, but instead we’re trying to implement a homomorphism (a structure-preserving function.) In order to preserve structure, we’d better map a data constructor to itself. So instead, let’s use the <code>homo</code> tactic instead of <code>destruct</code> and <code>split</code>. Our new tactics metaprogram for writing functor instances is thus:</p>
<div id="cb16"><pre><code><span id="cb16-1">intros</span>
<span id="cb16-2">homo ida</span>
<span id="cb16-3">apply fab</span>
<span id="cb16-4">assumption</span></code></pre></div>
<p>This new version now can no longer generate any of the pathological <code>fmap</code> implementations for <code>Maybe</code>, as they are not structure preserving. We’re left only with the good implementation. Let’s do one more derivation, this time for <code>Either c a</code>. After <code>intros</code> and <code>homo eca</code>, we’re left with:</p>
<div id="cb17"><pre><code><span id="cb17-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Either</span> c a <span>-&gt;</span> <span>Either</span> c b</span>
<span id="cb17-2"><span>fmap</span> <span>=</span> \fab ma <span>-&gt;</span> <span>case</span> eca <span>of</span></span>
<span id="cb17-3">  <span>Left</span>  c <span>-&gt;</span> <span>Left</span> _</span>
<span id="cb17-4">  <span>Right</span> a <span>-&gt;</span> <span>Right</span> _</span></code></pre></div>
<p>For the first time, we’re now left with <em>two</em> holes. The default behavior is for a tactic to apply to all holes (although there are combinators for “zipping” holes), meaning that the <code>apply fab</code> tactic will be run on both holes. For the <code>Left</code> case, our hole has type <code>c</code>, but <code>fab _</code> has type <code>b</code>, so this tactic <em>fails to apply here.</em> Tactic failure is per-hole, so we can still apply it to the other hole, resulting in:</p>
<div id="cb18"><pre><code><span id="cb18-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Either</span> c a <span>-&gt;</span> <span>Either</span> c b</span>
<span id="cb18-2"><span>fmap</span> <span>=</span> \fab ma <span>-&gt;</span> <span>case</span> eca <span>of</span></span>
<span id="cb18-3">  <span>Left</span>  c <span>-&gt;</span> <span>Left</span> _</span>
<span id="cb18-4">  <span>Right</span> a <span>-&gt;</span> <span>Right</span> (fab _)</span></code></pre></div>
<p>And finally, <code>assumption</code> fills the hole with whatever would typecheck. In the first hole that’s <code>c</code>, and in the second it’s <code>a</code> as before.</p>
<div id="cb19"><pre><code><span id="cb19-1"><span>fmap</span><span> ::</span> (a <span>-&gt;</span> b) <span>-&gt;</span> <span>Either</span> c a <span>-&gt;</span> <span>Either</span> c b</span>
<span id="cb19-2"><span>fmap</span> <span>=</span> \fab ma <span>-&gt;</span> <span>case</span> eca <span>of</span></span>
<span id="cb19-3">  <span>Left</span>  c <span>-&gt;</span> <span>Left</span> c</span>
<span id="cb19-4">  <span>Right</span> a <span>-&gt;</span> <span>Right</span> (fab a)</span></code></pre></div>
<p>Amazing! Three different functor implementations, with different numbers of data constructors, type variables, and cardinalities. By programming at the level of tactics rather than bytes, we can ignore the superficial differences between these implementations, focusing instead on the fact that they’re all derived the same way.</p>
<p>Hopefully this post has given you some insight into what tactics are and why they’re valuable. In the next post we’ll look at how this stuff is implemented behind the scenes, and the difficulties we’ve had integrating it into the language server. Stay tuned!</p>

<p>
    <span>
        <a href="https://reasonablypolymorphic.com/blog/algebra-driven-design">←</a>
    </span>
</p>

</div></div>]]>
            </description>
            <link>https://reasonablypolymorphic.com/blog/towards-tactics/index.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24759649</guid>
            <pubDate>Mon, 12 Oct 2020 21:30:45 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Kubernetes: Curated List of Tools and Resources]]>
            </title>
            <description>
<![CDATA[
Score 23 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24759091">thread link</a>) | @sharjeelsayed
<br/>
October 12, 2020 | https://devopsunlocked.com/kubernetes-curated-list-of-tools-and-resources/ | <a href="https://web.archive.org/web/*/https://devopsunlocked.com/kubernetes-curated-list-of-tools-and-resources/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="page">
				<div id="content">
			
	<div id="primary">
		<main id="main">
			
<article id="post-1233" itemtype="https://schema.org/CreativeWork" itemscope="">
	<div>
					
			
		<div itemprop="text">
			
<figure><img loading="lazy" width="1024" height="467" src="https://i2.wp.com/devopsunlocked.com/wp-content/uploads/2020/10/k8s-tools-mini-pic.jpg?resize=1024%2C467&amp;ssl=1" alt="" srcset="https://i2.wp.com/devopsunlocked.com/wp-content/uploads/2020/10/k8s-tools-mini-pic.jpg?resize=1024%2C467&amp;ssl=1 1024w, https://i2.wp.com/devopsunlocked.com/wp-content/uploads/2020/10/k8s-tools-mini-pic.jpg?resize=300%2C137&amp;ssl=1 300w, https://i2.wp.com/devopsunlocked.com/wp-content/uploads/2020/10/k8s-tools-mini-pic.jpg?resize=768%2C350&amp;ssl=1 768w, https://i2.wp.com/devopsunlocked.com/wp-content/uploads/2020/10/k8s-tools-mini-pic.jpg?w=1280&amp;ssl=1 1280w" sizes="(max-width: 1024px) 100vw, 1024px" data-recalc-dims="1"></figure>



<p>Below is a large, curated list of Kubernetes tools and resources. This is an “active” post which means as new tools are identified I will add to this and provide the update here. </p>



<h3>Command Line Tools</h3>



<ul><li><a href="https://github.com/astefanutti/kubebox">Kubebox</a>  – Terminal and Web console for Kubernetes</li><li><a href="https://github.com/derailed/k9s">K9s</a> – K9s provides a terminal UI to interact with your Kubernetes clusters. <strong>[Highly Recommend]</strong></li><li><a href="https://github.com/weaveworks/kubediff">kubediff</a> – Kubediff is a tool for Kubernetes to show you the differences between your running configuration and your version controlled configuration.</li><li><a href="https://github.com/helm/helm">Helm</a> – Helm is a tool for managing Charts. Charts are packages of pre-configured Kubernetes resources.</li><li><a href="https://github.com/jlesquembre/kubeprompt">kubeprompt</a> – Isolates KUBECONFIG in each shell and shows the current Kubernetes context/namespace in your prompt</li><li><a href="https://github.com/ahmetb/kubectx">kubectx + kubens</a> – Kubectx helps you switch between clusters back and forth, and <code>kubens</code> helps you switch between Kubernetes namespaces smoothly.</li><li><a href="https://github.com/cloudnativelabs/kube-shell">kube-shell</a> – Kube-shell: An integrated shell for working with the Kubernetes CLI.</li><li><a href="https://github.com/omrikiei/ktunnel">Ktunnel</a>  – Ktunnel is a CLI tool that establishes a reverse tunnel between a kubernetes cluster and your local machine.</li><li><a href="https://github.com/ahmetb/kubectl-aliases">kubectl-aliases</a>  – This repository contains a script to generate hundreds of convenient shell aliases for kubectl.</li><li><a href="https://github.com/johanhaleby/kubetail">Kubetail</a> – Bash script that enables you to aggregate (tail/follow) logs from multiple pods into one stream.</li><li><a href="https://github.com/wercker/stern">stern</a>  – Stern allows you to tail multiple pods on Kubernetes and multiple containers within the pod.</li><li><a href="https://github.com/ahmetb/kubectl-tree">kubectl tree</a> – A kubectl plugin to explore ownership relationships between Kubernetes objects through owners.</li><li><a href="https://github.com/FairwindsOps/nova/">nova</a> – Nova scans your cluster for installed Helm charts, then cross-checks them against all known Helm repositories.</li></ul>



<h3><a href="https://github.com/tomhuang12/awesome-k8s-resources#cluster-provisioning"></a></h3>



<h3>Cluster Provisioning</h3>



<ul><li><a href="https://github.com/kubernetes-sigs/kind">kind</a> – kind is a tool for running local Kubernetes clusters using Docker container “nodes”.</li><li><a href="https://github.com/rancher/k3s">k3s</a>  – Lightweight Kubernetes. Easy to install, half the memory, all in a binary less than 100 MB.</li><li><a href="https://github.com/weaveworks/eksctl">eksctl</a>  – eksctl is a simple CLI tool for creating clusters on EKS – Amazon’s new managed Kubernetes service for EC2.</li><li><a href="https://github.com/kubernetes-sigs/kubespray">kubespray</a>  – Deploy a production ready Kubernetes cluster</li><li><a href="https://github.com/kubernetes/kops">kops</a> – kops helps you create, destroy, upgrade and maintain production-grade, highly available, Kubernetes clusters from the command line.</li><li><a href="https://github.com/kubernetes-sigs/bootkube">Bootkube</a>  – Bootkube is a tool for launching self-hosted Kubernetes clusters.</li><li><a href="https://github.com/kubernetes-incubator/kube-aws">kube-aws</a> – <code>kube-aws</code> is a command-line tool to create/update/destroy Kubernetes clusters on AWS.</li><li><a href="https://github.com/kubernetes/minikube">Minikube</a> – minikube implements a local Kubernetes cluster on macOS, Linux, and Windows.</li><li><a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm/">Kubeadm</a> – kubeadm performs the actions necessary to get a minimum viable cluster up and running.</li><li><a href="https://conjure-up.io/" target="_blank" rel="noreferrer noopener">Conjure-Up</a> – A tool provided by Canonical that will allow you to deploy Kubernetes to Ubuntu.</li></ul>







<h3>Automation and CI/CD</h3>



<ul><li><a href="https://github.com/fluxcd/flux">Flux</a> – Flux is a tool that automatically ensures that the state of a cluster matches the config in git.</li><li><a href="https://github.com/argoproj/argo-cd">Argo CD</a> – Argo CD is a declarative, GitOps continuous delivery tool for Kubernetes.</li><li><a href="https://github.com/argoproj/argo-rollouts">Argo Rollouts</a> – Argo Rollouts controller, uses the Rollout custom resource to provide additional deployment strategies such as Blue Green and Canary to Kubernetes.</li><li><a href="https://github.com/fluxcd/helm-operator">Helm Operator</a> – The Helm Operator is a Kubernetes operator, allowing one to declaratively manage Helm chart releases.</li><li><a href="https://github.com/weaveworks/flagger">Flagger</a> – Flagger is a progressive delivery tool that automates the release process for applications running on Kubernetes.</li><li><a href="https://github.com/argoproj/argo">Argo Workflows</a> – Argo Workflows is an open source container-native workflow engine for orchestrating parallel jobs on Kubernetes.</li><li><a href="https://github.com/kedacore/keda">KEDA</a> – KEDA allows for fine grained autoscaling (including to/from zero) for event driven Kubernetes workloads.</li><li><a href="https://github.com/kubesphere/kubesphere">KubeSphere</a> – KubeSphere is a distributed operating system providing cloud native stack with Kubernetes as its kernel, and aims to be plug-and-play architecture for third-party applications seamless integration to boost its ecosystem.</li><li><a href="https://github.com/GoogleContainerTools/skaffold">Skaffold</a> – Skaffold is a command line tool that facilitates continuous development for Kubernetes applications.</li><li><a href="https://github.com/logzio/apollo">Apollo</a> – Apollo is a simple, lightweight, Continuous Deployment (CD) solution on top of Kubernetes.</li><li><a href="https://github.com/spinnaker/spinnaker">Spinnaker</a> – Spinnaker is an open-source continuous delivery platform for releasing software changes with high velocity and confidence.</li><li><a href="https://github.com/argoproj/argo-events">Argo Events</a> – Argo Events is an event-driven workflow automation framework for Kubernetes which helps you trigger K8s objects, Argo Workflows, Serverless workloads, etc.</li><li><a href="https://github.com/stakater/Reloader">Reloader</a> – Reloader can watch changes in <code>ConfigMap</code> and <code>Secret</code> and do rolling upgrades on Pods with their associated <code>DeploymentConfigs</code>, <code>Deployments</code>, <code>Daemonsets</code> and <code>Statefulsets</code>.</li></ul>



<h3><a href="https://github.com/tomhuang12/awesome-k8s-resources#cluster-resources-management"></a></h3>



<h3>Cluster Resources Management</h3>



<ul><li><a href="https://github.com/openkruise/kruise">Kruise</a> – Kruise consists of several controllers which extend and complement the Kubernetes core controllers for workload management.</li><li><a href="https://github.com/grafana/tanka">Grafana Tanka</a>– The clean, concise and super flexible alternative to YAML for your Kubernetes cluster.</li><li><a href="https://github.com/bluek8s/kubedirector">KubeDirector</a> – KubeDirector uses standard Kubernetes (K8s) facilities of custom resources and API extensions to implement stateful scaleout application clusters.</li><li><a href="https://github.com/kubernetes-sigs/multi-tenancy/tree/master/incubator/hnc">The Hierarchical Namespace Controller</a> – Hierarchical namespaces make it easier to share your cluster by making namespaces more powerful.</li></ul>



<h3><a href="https://github.com/tomhuang12/awesome-k8s-resources#secrets-management"></a></h3>



<h3>Secrets Management</h3>



<ul><li><a href="https://github.com/godaddy/kubernetes-external-secrets">Kubernetes External Secrets</a> – Kubernetes External Secrets allows you to use external secret management systems, like AWS Secrets Manager or HashiCorp Vault, to securely add secrets in Kubernetes.</li><li><a href="https://github.com/bitnami-labs/sealed-secrets">Sealed Secrets</a> – Encrypt your Secret into a SealedSecret, which is safe to store – even to a public repository.</li></ul>



<h3><a href="https://github.com/tomhuang12/awesome-k8s-resources#networking"></a></h3>



<h3>Networking</h3>



<ul><li><a href="https://github.com/kubernetes/ingress-nginx">ingress-nginx</a> – <code>ingress-nginx</code> is an Ingress controller for Kubernetes using NGINX as a reverse proxy and load balancer.</li><li><a href="https://github.com/nginxinc/kubernetes-ingress">kubernetes-ingress</a> – An implementation of an Ingress controller for NGINX and NGINX Plus (commercial).</li><li><a href="https://github.com/projectcalico/calico">Calico Networking</a>  – Calico is an open source networking and network security solution for containers, virtual machines, and bare-metal workloads</li><li><a href="https://github.com/coredns/coredns">CoreDNS</a>  – CoreDNS is a fast and flexible DNS server that works on Kubernetes.</li><li><a href="https://github.com/Kong/kubernetes-ingress-controller">Kong for Kubernetes</a> – Configure plugins, health checking, load balancing and more in Kong for Kubernetes Services.</li><li><a href="https://github.com/jetstack/cert-manager">cert-manager</a> – cert-manager is a Kubernetes add-on to automate the management and issuance of TLS certificates from various issuing sources.</li><li><a href="https://github.com/eldadru/ksniff">ksniff</a>  – A kubectl plugin that utilize tcpdump and Wireshark to start a remote capture on any pod in your Kubernetes cluster.</li><li><a href="https://github.com/iovisor/kubectl-trace">kubectl trace</a>  – <code>kubectl trace</code> is a kubectl plugin that allows you to schedule the execution of bpftrace programs in your Kubernetes cluster.</li></ul>



<h3><a href="https://github.com/tomhuang12/awesome-k8s-resources#storage"></a></h3>



<h3>Storage</h3>



<ul><li><a href="https://github.com/rook/rook">Rook</a> – Rook is an open source cloud-native storage orchestrator for Kubernetes.</li><li><a href="https://github.com/openebs/openebs">OpenEBS</a> – OpenEBS is the most widely deployed and easy to use open-source storage solution for Kubernetes.</li><li><a href="https://github.com/longhorn/longhorn">Longhorn</a> – Longhorn is a distributed block storage system for Kubernetes.</li><li><a href="https://github.com/kubernetes-sigs/aws-ebs-csi-driver">Amazon EBS CSI Driver</a> – The Amazon Elastic Block Store Container Storage Interface (CSI) Driver provides a CSI interface used by Container Orchestrators to manage the lifecycle of Amazon EBS volumes.</li><li><a href="https://github.com/kubernetes-sigs/aws-efs-csi-driver">Amazon EFS CSI Driver</a> – The Amazon Elastic File System Container Storage Interface (CSI) Driver implements the CSI specification for container orchestrators to manage the lifecycle of Amazon EFS filesystems.</li><li><a href="https://github.com/kubernetes-sigs/aws-fsx-csi-driver">Amazon FSx for Lustre CSI Driver</a> – The Amazon FSx for Lustre Container Storage Interface (CSI) Driver implements CSI specification for container orchestrators (CO) to manage lifecycle of Amazon FSx for Lustre filesystems.</li></ul>



<h3><a href="https://github.com/tomhuang12/awesome-k8s-resources#testing-and-troubleshooting"></a></h3>



<h3>Testing and Troubleshooting</h3>



<ul><li><a href="https://github.com/asobti/kube-monkey">kube-monkey</a> – It randomly deletes Kubernetes (k8s) pods in the cluster encouraging and validating the development of failure-resilient services.</li><li><a href="https://github.com/vapor-ware/kubetest">Kubetest</a>– Kubetest is a pytest plugin that makes it easier to manage a Kubernetes cluster within your integration tests.</li><li><a href="https://github.com/litmuschaos/litmus">Litmus</a> – Litmus provides tools to orchestrate chaos on Kubernetes to help SREs find weaknesses in their deployments.</li><li><a href="https://github.com/bloomberg/powerfulseal">PowerfulSeal</a> – PowerfulSeal injects failure into your Kubernetes clusters, so that you can detect problems as early as possible. It is very Similar to Kube-Monkey.</li><li><a href="https://github.com/aylei/kubectl-debug">Kubectl-debug</a> – Kubectl-debug an out-of-tree solution for troubleshooting running pods, which allows you to run a new container in running pods for debugging purpose.</li><li><a href="https://github.com/eldadru/ksniff">ksniff</a> – A kubectl plugin that utilize tcpdump and Wireshark to start a remote capture on any pod in your Kubernetes cluster.</li><li><a href="https://github.com/loadimpact/k6">k6</a> – k6 is a modern load testing tool, building on Load Impact’s years of experience in the load and performance testing industry.</li><li><a href="https://github.com/open-policy-agent/conftest">Conftest</a> – Conftest helps you write tests against structured configuration data.</li><li><a href="https://github.com/linki/chaoskube">chaoskube</a> – <code>chaoskube</code> periodically kills random pods in your Kubernetes cluster.</li><li><a href="https://github.com/pingcap/chaos-mesh">Chaos Mesh</a> – Chaos Mesh® is a cloud-native Chaos Engineering platform that orchestrates chaos on Kubernetes environments.</li><li><a href="https://popeyecli.io/">popeye</a> – Popeye is a utility that scans live Kubernetes cluster and reports potential issues with deployed resources and configurations.</li><li><a href="https://github.com/zegl/kube-score">kube-score</a> – <code>kube-score</code> is a tool that performs static code analysis of your Kubernetes object definitions.</li><li><a href="https://github.com/lucky-sideburn/KubeInvaders">KubeInvaders</a> – Through KubeInvaders you can stress Kubernetes cluster in a fun way and check how it is resilient.</li></ul>



<h3><a href="https://github.com/tomhuang12/awesome-k8s-resources#monitoring-alerts-and-visualization"></a></h3>



<h3>Monitoring, Alerts, and Visualization</h3>



<ul><li><a href="https://github.com/prometheus/prometheus">Prometheus</a> – Prometheus, a Cloud Native Computing Foundation project, is a systems and service monitoring system.</li><li><a href="https://github.com/grafana/grafana">Grafana</a> – Grafana allows you to query, visualize, alert on and understand your metrics no matter where they are stored.</li><li><a href="https://github.com/kubernetes/kube-state-metrics">kube-state-metrics</a>  – kube-state-metrics is a simple service that listens to the Kubernetes API server and generates metrics about the state of the objects.</li><li><a href="https://github.com/kubernetes-sigs/metrics-server">Kubernetes Metrics Server</a> – Metrics Server is a scalable, efficient source of container resource metrics for Kubernetes built-in autoscaling pipelines.</li><li><a href="https://github.com/hjacobs/kube-ops-view">Kubernetes Operational View</a> –  A tool that aims to provide a common operational picture for multiple Kubernetes clusters.</li><li><a href="https://github.com/kubernetes/dashboard">Kubernetes Dashboard</a> – Kubernetes Dashboard is a general purpose, web-based UI for Kubernetes clusters.</li><li><a href="https://github.com/thanos-io/thanos">Thanos</a> – Thanos is a set of components that can be composed into a highly available metric system with unlimited storage capacity.</li><li><a href="https://github.com/cortexproject/cortex">Cortex</a> – Cortex provides horizontally scalable, highly available, multi-tenant, long term storage for Prometheus.</li><li><a href="https://github.com/FairwindsOps/goldilocks">Goldilocks</a>  – This tool creates a vertical pod autoscaler for each deployment in a namespace …</li></ul></div></div></article></main></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://devopsunlocked.com/kubernetes-curated-list-of-tools-and-resources/">https://devopsunlocked.com/kubernetes-curated-list-of-tools-and-resources/</a></em></p>]]>
            </description>
            <link>https://devopsunlocked.com/kubernetes-curated-list-of-tools-and-resources/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24759091</guid>
            <pubDate>Mon, 12 Oct 2020 20:27:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Top Bay-Area AI startups that are actively hiring (Fall 2020)]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24758830">thread link</a>) | @achalshah
<br/>
October 12, 2020 | https://www.pujaarajan.com/writing/my-top-4-bay-area-ai-startups-that-are-actively-hiring-fall-2020 | <a href="https://web.archive.org/web/*/https://www.pujaarajan.com/writing/my-top-4-bay-area-ai-startups-that-are-actively-hiring-fall-2020">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-layout-label="Post Body" data-type="item" data-updated-on="1602384410610" id="item-5f826ae6fa00313a7c5f7c5c"><div><div><div data-block-type="2" id="block-3f39fe93219ab4d869a7"><div><p>When I was job hunting, the best job recommendation came via word of mouth from people in my network. I remember when I was leaving Wall Street for my first job in tech, and I didn’t know anyone in the industry to help. Because of this, I wanted to share the my top startups out of all the ones that were recommended to me. I would work at all of them while working at Stripe if I could.  </p><p>The companies below are in no particular order. I won’t bore you about what the company does because you can find that out on their website. Instead, I’ll focus on my personal experiences with the company.</p><p>1. <a href="https://www.tecton.ai/">Tecton</a></p><p>Tecton is a feature store for machine learning by the creators of <a href="https://eng.uber.com/michelangelo-machine-learning-platform/">Michelangelo</a>. Uber’s state of the art machine learning platform. I finagled a interview here after requesting a free trial using my email on their website, and then replying back to the first email they sent me asking for a job. I met with the founders <a href="https://www.linkedin.com/in/michaeldelbalso/">Mike Del Blasio</a> and <a href="https://www.linkedin.com/in/kevinstumpf/">Kevin Stumpf</a> three, maybe more, times. I walked away impressed and inspired every time. They take culture seriously having learned from their experience at Uber. Case in point, they had the longest interview process really trying to find a mutual fit. Tecton offers the opportunity to become an expert in machine learning infrastructure at a high-growth company, founded and led by people who already have the answer key because they’ve done it before.</p><p>2. <a href="https://www.viaduct.ai/">Viaduct</a></p><p>Viaduct is a machine learning platform to empower automakers and their partners to make safer, personalized and reliable vehicles. I decided to apply after <a href="https://twitter.com/sh_reya">Shreya Shankar</a>, recommended applying. I reached out to her because I was intrigued a <a href="https://github.com/shreyashankar/gpt3-sandbox">GPT-3 project</a> that she built with her colleague, <a href="https://twitter.com/notsleepingturk">Bora Uyumazturk</a>. The founder, <a href="https://www.linkedin.com/in/david-hallac-593a5987/">David Hallac</a>, spoke with me multiple times, and he was an obviously expert in the startup’s field. I was starstruck by his cofounder and advisor, <a href="https://cs.stanford.edu/people/jure/">Jure Lescovec</a>. Jure is not only a Stanford CS professor, <a href="http://www.pinterest.com/">Pinterest</a>’s Chief Scientist, a <a href="https://www.czbiohub.org/">Chan Zuckerberg Biohub</a> investigator, but also a pioneer in the field of graph neural networks, whose work I’ve read since my undergraduate days. Viaduct offers the opportunity to work with a fun team and learn from experts while developing domain expertise with cars and IoT devices.</p><p>3. <a href="https://www.fiddler.ai/">Fiddler.ai</a></p><p>Fiddler is an explainable AI Platform for enterprises that helps not only explain, but also monitor, your machine learning models in production. They are one of the few startups that not only talk about, but also build ethical AI. <a href="https://www.linkedin.com/in/krishnagade/">Krishna Gade</a>, founder and CEO, was previously an engineering manager working on the Newsfeed at Facebook, whicher he learned what not to do…(my words, not his). Their mission is to make AI trustworthy, and I felt like the founders, <a href="https://www.linkedin.com/in/cheenath/">Krishna Gade</a>, <a href="https://www.linkedin.com/in/amitpaka/">Amit Paka</a> and <a href="https://www.linkedin.com/in/cheenath/">Manoj Cheenath</a>, had created a culture of trust within the company too. Fiddler offers the opportunity to become an expert in explainable AI while building a product everyone wants and needs in an open environment.</p><p>4. <a href="https://su-sea.github.io/jobs/">Susea.ai</a></p><p>Susea is using the latest NLP and AI technology to help our users confidently make better decisions. I was starstruck by the founders, <a href="https://www.socher.org/">Richard Socher</a>, who was previously the founder MetaMind and the Chief Scientist at Salesforce, and&nbsp;<a href="https://bmccann.github.io/">Bryan McCann</a>, who was previously an early employee MetaMind and a research lead at Salesforce. I can’t believe I had an opportunity to meet via the interviews. This is a unique opportunity because it’s an extremely early stage company with only 4 employees who’ve worked together from at Metamind and Salesforce. Susea offers the opportunity to build a new company as the 5th employee with people who have built, led, and sold companies before.</p></div></div></div></div></div></div>]]>
            </description>
            <link>https://www.pujaarajan.com/writing/my-top-4-bay-area-ai-startups-that-are-actively-hiring-fall-2020</link>
            <guid isPermaLink="false">hacker-news-small-sites-24758830</guid>
            <pubDate>Mon, 12 Oct 2020 20:03:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Real-Time Analytics on DynamoDB: The Ultimate Guide]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24758794">thread link</a>) | @box2A1
<br/>
October 12, 2020 | https://rockset.com/real-time-analytics-dynamodb-ebook | <a href="https://web.archive.org/web/*/https://rockset.com/real-time-analytics-dynamodb-ebook">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>Amazon DynamoDB is optimized for real-time transactions but does not provide strong performance for analytical workloads. That’s why it’s a best practice to pair DynamoDB with an analytics solution like Athena, Hive/Spark, Elasticsearch, Redshift and more. In this ebook, we compare analytics solutions on query and data latency, concurrency and ease of use.</p><div><p>Amazon DynamoDB has been one of the most popular NoSQL databases in the cloud since its
introduction in 2012. It is central to many modern applications in ad tech, gaming, IoT, and
financial services. As opposed to a traditional RDBMS , like PostgreSQL, DynamoDB scales
horizontally, obviating the need for careful capacity planning, resharding, and database
maintenance.</p><p>Companies turn to DynamoDB for building event-driven architectures and user-friendly,
performant applications at scale. As an operational database, DynamoDB is optimized for
real-time transactions even when deployed across multiple geographic locations. However, it
does not provide strong performance for analytics workloads. In this ebook, we discuss the 
analytical query performance of DynamoDB and compare different options for ETL and analytics 
tools including Athena, Hive/Spark, Elasticsearch, ElasticCache for Redis, Redshift and Rockset.</p>
</div></div>]]>
            </description>
            <link>https://rockset.com/real-time-analytics-dynamodb-ebook</link>
            <guid isPermaLink="false">hacker-news-small-sites-24758794</guid>
            <pubDate>Mon, 12 Oct 2020 20:00:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Our New Machine Learning Visualization IDE]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24758672">thread link</a>) | @slewis
<br/>
October 12, 2020 | https://wandb.ai/wandb/posts/reports/Announcing-the-W-B-Machine-Learning-Visualization-IDE--VmlldzoyNjk3Nzg | <a href="https://web.archive.org/web/*/https://wandb.ai/wandb/posts/reports/Announcing-the-W-B-Machine-Learning-Visualization-IDE--VmlldzoyNjk3Nzg">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://wandb.ai/wandb/posts/reports/Announcing-the-W-B-Machine-Learning-Visualization-IDE--VmlldzoyNjk3Nzg</link>
            <guid isPermaLink="false">hacker-news-small-sites-24758672</guid>
            <pubDate>Mon, 12 Oct 2020 19:48:23 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Durability: Linux File APIs]]>
            </title>
            <description>
<![CDATA[
Score 89 | Comments 38 (<a href="https://news.ycombinator.com/item?id=24758024">thread link</a>) | @zdw
<br/>
October 12, 2020 | https://www.evanjones.ca/durability-filesystem.html | <a href="https://web.archive.org/web/*/https://www.evanjones.ca/durability-filesystem.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<h3>[ 2020-October-12 10:26 ]</h3>
<p>As part of investigating the durability provided by cloud systems, I wanted to make sure I understood the basics. I started by <a href="https://www.evanjones.ca/durability-nvme.html">reading the NVMe specification, to understand the guarantees provided by disks</a>. The summary is that you should assume your data is corrupt between when a write is issued until after a flush or force unit access write completes. However, most programs use system calls to write data. This article looks at the guarantees provided by the Linux file APIs. It seems like this should be simple: a program calls <code>write()</code> and after it completes, the data is durable. However, <code>write()</code> only copies data from the application into the kernel's cache in memory. To force the data to be durable you need to use some additional mechanism. This article is a messy collection of notes about what I've learned. (The really brief summary: use fdatasync or open with O_DSYNC.) For a better and clearer overview, see LWN's <a href="https://lwn.net/Articles/457667/">Ensuring data reaches disk</a>, which walks from application code through to the disk.</p>


<h2>The semantics of write()</h2>

<p>The write system call is defined in the <a href="https://en.wikipedia.org/wiki/POSIX">IEEE POSIX standard</a> as attempting to write data to a file descriptor. After it successfully returns, reads are required to return the bytes that were written, even when read or written by other processes or threads (<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html#tag_16_685_08">POSIX standard write(); Rationale</a>). There is an addition note under <a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_09_07">Thread Interactions with Regular File Operations</a> that says "If two threads each call one of these functions, each call shall either see all of the specified effects of the other call, or none of them." This suggests that all file I/O must effectively hold a lock.</p>

<p>Does that mean write is atomic? Technically, yes: future reads must return the entire contents of the write, or none of it. However, write is not required to be <em>complete</em>, and is allowed to only transfer <em>part</em> of the data. For example, we could have two threads, each appending 1024-bytes to a single file descriptor. It would be acceptable for the two writes to each only write a single byte. This is still "atomic", but also results in undesirable interleaved output. There is a great <a href="https://stackoverflow.com/a/42442926/413438">StackOverflow answer with more details</a>.</p>


<h2>fsync/fdatasync</h2>

<p>The most straightforward way to get your data on disk is to call <a href="https://man7.org/linux/man-pages/man2/fsync.2.html">fsync()</a>. It requests the operating system to transfer all modified blocks in cache to disk, along with all file metadata (e.g. access time, modification time, etc). In my opinion, that metadata is rarely useful, so you should use fdatasync unless you know you need the metadata. The <a href="https://man7.org/linux/man-pages/man2/fdatasync.2.html">fdatasync man page</a> says it is required to flush as much metadata as necessary "for a subsequent data read to be handled correctly", which is what most applications care about.</p>

<p>One issue is this is not guaranteed to ensure you can <em>find</em> the file again. In particular, when you first create a file, you need to call fsync on the directory that contains it, otherwise it might not exist after a failure. The reason is basically that in UNIX, a file can exist in multiple directories due to hard links, so when you call fsync on a file, there is no way to tell which directories should be written out (<a href="https://www.quora.com/When-should-you-fsync-the-containing-directory-in-addition-to-the-file-itself">more details</a>). It appears that ext4 may actually <a href="https://lwn.net/Articles/799807/">fsync the directory automatically, but that might not be true for other filesystems</a>.</p>

<p>The way this is implemented will vary depending on the file system. I used <a href="https://git.kernel.org/pub/scm/linux/kernel/git/axboe/blktrace.git/tree/README">blktrace</a> to examine what disk operations ext4 and xfs use. They both issue normal disk writes for both the file data and the file system journal, use a cache flush, then finish with a FUA write to the journal, probably to indicate the operation has committed. On disks that do not support FUA, this involves two cache flushes. My experiments show that fdatasync is slightly faster than fsync, and blktrace shows fdatasync tends to write a bit less data (ext4: 20 kiB for fsync vs 16 kiB for fdatasync). My experiments also show that xfs is slightly faster than ext4, and again blktrace shows it tends to flush less data (xfs: 4 kiB for fdatasync).</p>


<h2>fsync controversies</h2>

<p>In my professional career, I can remember three fsync-related controversies. The first, in 2008, was that Firefox 3's UI would hang when lots of files were being written. The problem is the UI used the SQLite database to save state, which provides strong durability guarantees by calling fsync after each commit. On the ext3 filesystem of the time, fsync wrote out <em>all</em> dirty pages on the system, rather than just the relevant file. This meant that clicking a button in Firefox could wait for many megabytes of data to be written on magnetic disks, which could take seconds. The solution, as I understand <a href="http://shaver.off.net/diary/2008/05/25/fsyncers-and-curveballs/">from a blog</a>, was to move many database commits to asynchronous background tasks. This means Firefox was previously using stronger durability guarantees than it needed, although the problem was made much worse by the ext3 filesystem.</p>

<p>The second controversy, in 2009, was that after a system crash, users of the new ext4 filesystem found many recently created files would have zero length, which did not happen with the older ext3 filesystem. In the previous controversy, ext3 was flushing too much data, which caused really slow fsync calls. To fix it, ext4 flushes only the relevant dirty pages to disk. For other files, it keeps them in memory for much longer to improve performance (defaulting to 30 seconds, configured with <a href="https://www.kernel.org/doc/Documentation/sysctl/vm.txt">dirty_expire_centiseconds</a>; <a href="https://www.spinics.net/lists/linux-ext4/msg68941.html">note</a>). This means after a crash, lots of data might be missing. The solution is to add fsyncs to applications that want to ensure data will survive crashes, since fsyncs are much more efficient with ext4. The downside is this still makes operations like installing software slower. For more details, see <a href="https://lwn.net/Articles/322823/">LWN's article</a>, or <a href="https://thunk.org/tytso/blog/2009/03/12/delayed-allocation-and-the-zero-length-file-problem/">Ted Ts'o's explaination</a>.</p>

<p>The third controversy, in 2018, is that Postgres discovered that when fsync encounters an error, it can mark dirty pages as "clean", so future calls to fsync do nothing. This leaves modified pages in memory that are never written to disk. This is pretty catastrophic, since the application thinks some data has been written, but it has not. There are very few things an application can do in this rare case when fsync fails. Postgres and many other applications now crash when it happens. A paper titled <a href="https://www.usenix.org/conference/atc20/presentation/rebello">Can Applications Recover from fsync Failures?</a> published in USENIX ATC 2020 investigates the issue in detail. The best solution at the moment is to use Direct I/O with O_SYNC or O_DSYNC, which will report errors on specific write operations, but requires the application to manage buffers itself. For more details, see the <a href="https://lwn.net/Articles/752063/">LWN article</a> or the <a href="https://wiki.postgresql.org/wiki/Fsync_Errors">Postgres wiki page about fsync errors</a>.</p>


<h2>open with O_SYNC/O_DSYNC</h2>

<p>Back to system calls for durability. Another option is to use the O_SYNC or O_DSYNC options with the <a href="https://man7.org/linux/man-pages/man2/open.2.html">open() system call</a>. This causes every write to have the same semantics as a write followed by fsync/fdatasync, respectively. The POSIX specification calls this <a href="https://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap03.html#tag_03_373">Synchronized I/O File Integrity Completion and Data Integrity Completion</a>. The main advantage of this approach is that you need a single system call, instead of write followed by fdatasync. The biggest disadvantage is that all writes using that file descriptor will be synchronized, which may limit how the application code is structured.</p>


<h2>Direct I/O with O_DIRECT</h2>

<p>The open() system call has an O_DIRECT option which is intended to bypass the operating system's cache, and instead do I/O directly with the disk. This means in many cases, an application's write call will translate directly into a disk command. However, in general this is not a replacement for fsync or fdatasync, since the <a href="https://www.evanjones.ca/durability-nvme.html">disk itself is free to delay or cache those writes</a>. Even worse, there are <a href="https://ext4.wiki.kernel.org/index.php/Clarifying_Direct_IO%27s_Semantics">edge cases that mean O_DIRECT I/O falls back to traditional buffered I/O</a>. The easiest solution is to also use the O_DSYNC option to open, which means each write is effectively followed by fdatasync.</p>

<p>It turns out that XFS somewhat recently added a "fast path" for O_DIRECT|O_DSYNC writes. If you are overwriting blocks with O_DIRECT|O_DSYNC, XFS will issue a FUA write if the device supports it, rather than using a cache flush. I used blktrace to confirm this happens on my Linux 5.4/Ubuntu 20.04 system. This should be more efficient, since it writes the minimum amount of data to disk, and uses a single operation instead of a write followed by a cache flush. I found a link to the <a href="https://patchwork.kernel.org/patch/10250257/">kernel patch that implemented this in 2018</a>, which has some discussion about implementing this optimization for other filesystems, but as far as I know XFS is the only one that does.</p>


<h2>sync_file_range</h2>

<p>Linux also has <a href="https://man7.org/linux/man-pages/man2/sync_file_range.2.html">sync_file_range</a>, which can allow flushing <em>part</em> of a file to disk, rather than the entire file, and triggering an asynchronous flush, rather than waiting for it. However, the man page states that it is "extremely dangerous" and discourages its use. The best description of some of the differences and dangers with sync_file_range is <a href="http://yoshinorimatsunobu.blogspot.com/2014/03/how-syncfilerange-really-works.html">Yoshinori Matsunobu's post about how it works</a>. Notably, it seems that RocksDB uses this to control when the kernel flushes dirty data to disk, and still uses fdatasync to ensure durability. It <a href="https://github.com/facebook/rocksdb/search?q=sync_file_range">has some interesting comments in its source code</a>. For example, it appears that with zfs, the sync_file_range call does not actually flush data. Given my experience that code that is rarely used probably has bugs, I would recommend avoiding this system call without very good reasons.</p>


<h2>System calls for durable I/O</h2>

<p>My conclusion is there are basically three approaches for durable I/O. All of them require you to call fsync() on the containing directory when you first create a file.</p>

<ol>
<li>fdatasync or fsync after a write (prefer fdatasync).</li>
<li>write on a file descriptor opened with O_DSYNC or O_SYNC (prefer O_DSYNC).</li>
<li>pwritev2 with the RWF_DSYNC or RWF_SYNC flag (prefer RWF_DSYNC).</li>
</ol>


<h2>Some random performance observations</h2>

<p>I have not measured these carefully, and many of these differences are very small, which means they could be false, or are highly likely to change. These are roughly ordered from …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.evanjones.ca/durability-filesystem.html">https://www.evanjones.ca/durability-filesystem.html</a></em></p>]]>
            </description>
            <link>https://www.evanjones.ca/durability-filesystem.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24758024</guid>
            <pubDate>Mon, 12 Oct 2020 18:55:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Advice to my young self: forget side projects and focus on your job]]>
            </title>
            <description>
<![CDATA[
Score 409 | Comments 337 (<a href="https://news.ycombinator.com/item?id=24758020">thread link</a>) | @megalomanu
<br/>
October 12, 2020 | https://manuel.darcemont.fr/posts/focus-on-jour-job/ | <a href="https://web.archive.org/web/*/https://manuel.darcemont.fr/posts/focus-on-jour-job/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>I’ve always been suspicious of the idea of being attached to a company.</p><p>It could be because of the leftist spirit of my generation in France, or because of my readings during my student years, or because of my familial history (which saw way more self-employed, farmers, nurses or teachers than company employees), but I’ve never accepted the idea of giving even a tiny portion of my independence of mind to a company. When I was a student, I wasn’t dreaming about joining a company like Google, who seemed too sectarian to me, to rather prefer boring companies, where we only expect you to work well. Keeping a distance from my company was, I thought, the way to stay <em>who I am</em>, without being infected by an external force.</p><p>It doesn’t mean that I didn’t care about my job. I’ve always been involved in my work, being proactive in bringing new technologies, mentoring the other developers, helping the team to grow, but I was doing this just because I liked my job. I was not considering this as something important in my career, simply because I didn’t want too. To develop my career, I was spending a lot of time outside work reading technical books, doing toy projects, going to meetups, browsing Hacker News. I was finding here what my company was fundamentally unable to give me, and I was feeling holding my fate in my own hands. I thought it was the best recipe to end with a successful career, while remaining free and protected from the meanders of corporate culture (or corporate politics, actually).</p><p>I was wrong.</p><p>First, most recruiters don’t care about your personal projects or how many meetups you went during the year.
What matters the most is your current company - and by that I mean the name of your current company. It was saddening me before, but now that I’m on the other side today, with a manager position, I better understand this. This is plain common sense. You can generally assume that a developer coming from a cutting-edge company has better chances to be a great developer than a developer coming from a Java 1.4 shop. He may not be smarter, but he has been hired by a company with a most demanding hiring process, and has been surrounded by some of the smartest developers.</p><p>Worse, having too many personal projects can raise a flag and be scary for the recruiter. When my entrepreneurial experience has been over, I was disappointed and somewhat regretful of some of our choices, but generally proud of everything we did and excited to share my story to recruiters. I was surprised to see that most of them were only asking questions about my previous experiences as an employee. My CTO experience was an anomaly, at best two lost years, at worst a sign that I was too independent, too individualistic, not a good team player. Only relatively small and ambitious startups, like the one I’m in today, were valuing this experience.<br>Today, I recommend not hiding your side projects, but to not displaying them as a primary part of your identity, to not scare the recruiter and let him feel that you have a secondary plan.</p><p>Secondly, I don’t think that multiplying the side projects is useful unless they are substantial.
Side projects that we consider futile, that we do just to get away from our daily work, don’t make us better in our job. The things that make us progress are the issues we want to avoid and that generally come only when your toy project has been transformed into a product and when you have to deal with users, production issues, and money (your money). Basically, all the things that no one wants to do on his free time. Even from a purely technical point of view, you will not really understand a library or a framework by just sticking to the tutorial or its basic features. You’ll have to dig into and to face its most painful aspects to deeply understand it.</p><p>Shallow side projects are useful to develop a first opinion about a technology that will need to be confirmed with a more elaborate project. I’d compare them to school.<br>When I was a teenager, I remember what we were saying about it: <em>it will never help us in our future job</em>. After all, how teachings about antiderivatives, Rimbaud’s poetry or Napoleonic wars could be useful for our future adult life? We were right. Most of what we learned is pretty useless today, whether you are a cook, a hairdresser or a developer.<br>But this formed a complete package that infuses our adult life. Junior school is great because you don’t learn to find a job. You’re at school to grow as a citizen, not to prepare to your future life, and actually you’re better not to think about your future if you don’t want to question yourself about the meaning of your existence. This is the same thing for side projects. See them as a way to discover a new topic and enlarge your horizon, not as something that you could action in your current position or to find a new job. Otherwise, you expose yourself to severe disillusions.</p><p>The best way to dig a new technology is to practice it in your daily job. You’ll spend seven hours a day on it and will quickly become infinitely more proficient than if you just barely used it on nights and weekends. You may tell me that we face a chicken or egg problem here. How to get a job where you’ll work on a really attractive technology if you never used it before? Well, instead of spending nights superficially learning this technology, spend your nights preparing interviews. Read “Cracking the code interview”, learn everything you need to know about algorithms and binary trees. As we all know, the interview process is broken. Instead of deploring it, take advantage of it.</p><p>I don’t want to make this blog post a rant against side projects. In fact, I’m advocating the exact opposite. Continue to do as many side projects as ever, code on nights and weekends if you want to, but don’t do them because you think they could be useful to you to get a new job. This is wrong. I know too many developers who are stuck into this pipe dream. This is an illusion and this leads to a waste of time and energy.</p><p>Don’t create a project just to prove that you know Vue.js, but use this weird technology that you saw yesterday on Hacker News and that intrigues you. Don’t think about what are the best (and boring) blog post topics that could expand your personal branding, but write poetry or a review of the last movie you saw. Create the apps, services, websites, or video games you want to use. These side-projects are truly great. They may not make your portfolio or your public image convincing for the next recruiter you’ll meet, but this is how you will be able to express all that you have in you and end up affirming yourself. At least, you should end having something meaningful to show, something to be proud about.</p><p>You want to feel free and have time for your projects? Focus your efforts on joining a great company. This will make your career considerably easier and will make you as free as you wanted to be initially. The link you’ll develop with your company will be a source of discomfort sometimes, but it will protect you from the never-ending competition on the job market. The satisfaction of seeing your career flourishing while you will use all your free time to do what you like (including… side projects) will give you a valuable peace of mind.<br>By trading a little bit of what you think is your independence, you’ll get the real one.</p></div></div>]]>
            </description>
            <link>https://manuel.darcemont.fr/posts/focus-on-jour-job/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24758020</guid>
            <pubDate>Mon, 12 Oct 2020 18:55:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Zheap – Reinvented PostgreSQL Storage]]>
            </title>
            <description>
<![CDATA[
Score 242 | Comments 63 (<a href="https://news.ycombinator.com/item?id=24757333">thread link</a>) | @PhilipTrauner
<br/>
October 12, 2020 | https://cybertec-postgresql.github.io/zheap/ | <a href="https://web.archive.org/web/*/https://cybertec-postgresql.github.io/zheap/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        <p>
  <img width="500px" src="https://media.githubusercontent.com/media/cybertec-postgresql/zheap/master/img/zheap.png">
  <br>
  <i>Reinvented PostgreSQL Storage</i>
</p>

<hr>

<p>
  <a href="#about">About</a> •
  <a href="#contributing">Contributing</a> •
  <a href="#status">Status</a> •
  <a href="#documentation">Documentation</a> •
  <a href="#benchmarks">Benchmarks</a> •
  <a href="#contact">Contact</a>
</p>

<p><a href="https://github.com/postgres/postgres/tree/REL_13_STABLE"><img src="https://img.shields.io/badge/postgres-13-blue.svg" alt="Postgres 13"></a>
<a href="https://github.com/cybertec-postgresql/postgres/tree/REL_13_ZHEAP"><img src="https://img.shields.io/badge/status-early%20development-orange" alt="Status"></a></p>

<h2 id="about">About</h2>

<p><em>zheap</em> is a way to <strong>keep table bloat under control</strong> by implementing a new PostgreSQL storage engine capable of running <strong><code>UPDATE</code>-intense workloads</strong> more efficiently. The project was originally started by <a href="https://www.enterprisedb.com/">EnterpriseDB</a>.</p>

<p>To make <em>zheap</em> ready for production, we are proud to announce that our partners at <a href="https://heroiclabs.com/">Heroic Labs</a> have committed to <strong>fund the development</strong> of <em>zheap</em> and <strong>release all code to the community</strong>. <a href="https://www.cybertec-postgresql.com/en/">CYBERTEC</a> has decided to <strong>double the funding amount</strong>, and to put up additional expertise and manpower to move <em>zheap</em> forward.</p>

<h3 id="why">Why?</h3>

<p>Table bloat describes the phenomenon of tables and / or indices growing in size, even if the amount of data stored in the database stays constant. If one wants to support transactions it is necessary not to overwrite data in case it is rolled back.</p>

<p>PostgreSQL copies rows on <code>UPDATE</code> and stores them in the same table. Stale rows are periodically garbage-collected by an automatic process called <a href="https://www.postgresql.org/docs/current/sql-vacuum.html">VACUUM</a>. Problems start to crop up in <code>UPDATE</code>-heavy workloads, as VACUUM might not always be able to keep up.</p>

<h3 id="how">How?</h3>

<p>CYBERTEC has started a <a href="https://www.cybertec-postgresql.com/en/zheap-reinvented-postgresql-storage/">series of blog posts</a> that go into the design-goals of <em>zheap</em>.</p>

<h2 id="contributing">Contributing</h2>

<p>There are a number of active branches that will be merged together once they reach maturity.</p>

<ul>
  <li><a href="https://github.com/cybertec-postgresql/postgres/tree/zheap_logical_decoding">Logical decoding</a></li>
  <li><a href="https://github.com/cybertec-postgresql/postgres/tree/undo-record-set-ah">Undo record set</a></li>
  <li><a href="https://github.com/cybertec-postgresql/postgres/tree/REL_13_ZHEAP">Rebase on PostgreSQL 13</a></li>
</ul>

<h2 id="status">Status</h2>

<ul>
  <li>12-10-2020: <a href="https://github.com/cybertec-postgresql/postgres/blob/REL_13_ZHEAP/src/test/README.md">Most regression tests are passing</a>, but write-speeds are still low.</li>
</ul>

<h2 id="documentation">Documentation</h2>

<p>Managed through <a href="https://github.com/cybertec-postgresql/zheap/wiki">GitHub Wiki</a>.</p>

<h2 id="benchmarks">Benchmarks</h2>

<p>Will be conducted at a later date, as no attempts at performance tuning have been made yet.</p>



<ul>
  <li><a href="https://github.com/cybertec-postgresql/postgres/issues">Development</a></li>
  <li><a href="https://www.cybertec-postgresql.com/en/contact/">Business</a></li>
</ul>

    </div></div>]]>
            </description>
            <link>https://cybertec-postgresql.github.io/zheap/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24757333</guid>
            <pubDate>Mon, 12 Oct 2020 18:00:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: I made a list of 9 thought experiments for making hard decisions]]>
            </title>
            <description>
<![CDATA[
Score 41 | Comments 4 (<a href="https://news.ycombinator.com/item?id=24757176">thread link</a>) | @flreln
<br/>
October 12, 2020 | https://vasilishynkarenka.com/how-to-make-hard-decisions/ | <a href="https://web.archive.org/web/*/https://vasilishynkarenka.com/how-to-make-hard-decisions/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://vasilishynkarenka.com/content/images/size/w300/2020/09/burst-aoN3HWLbhdI-unsplash.jpg 300w,
                            https://vasilishynkarenka.com/content/images/size/w600/2020/09/burst-aoN3HWLbhdI-unsplash.jpg 600w,
                            https://vasilishynkarenka.com/content/images/size/w1000/2020/09/burst-aoN3HWLbhdI-unsplash.jpg 1000w,
                            https://vasilishynkarenka.com/content/images/size/w2000/2020/09/burst-aoN3HWLbhdI-unsplash.jpg 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://vasilishynkarenka.com/content/images/size/w2000/2020/09/burst-aoN3HWLbhdI-unsplash.jpg" alt="How to make hard decisions">
            </figure>

            <section>
                <div>
                    <p>Decision-making is easy. In most cases, we already know what to do. And then we spend weeks, convincing ourselves it’s the best option. Sometimes, we never get to make the call.</p><p>Why are we doing this to ourselves?</p><ol><li>First, because we expect serious decision-making to be really hard. Maybe we even <em>want</em> it to be hard. Because if we spend weeks instead of minutes on deciding and fuck it up anyways, we’ll have a sound excuse for ourselves — “But I tried my best!”</li><li>Second, we always try to come up with the very best option. Because the stakes are damn high. This is a straight path to a weird world called Analysis-Paralysis, where we get stuck for ages.</li></ol><p>This year, I’ve made more tough decisions than ever in my life. I decided to shut down the startup we were working on, <a href="https://vasilishynkarenka.com/3-weeks-of-shaolin-kung-fu-in-china/">fly to China to study Shaolin Kung-Fu</a>, and pass on a dream job offer to start a new venture and move to London.</p><p>And I would never have made them without thought experiments.</p><h2 id="what-are-thought-experiments">What are thought experiments</h2><p>In its simplest, thought experiments are questions. Very well-structured hypothetical questions that employ our subjunctive reasoning, like <em>“What might happen if...?”</em></p><p>By using these hypothetical questions, we get two things:</p><ol><li>We gain new information. Just by looking at already known empirical data from a different and unusual perspective, we can draw new (a priori) inferences for our decision.</li><li>We invoke intuition. This is more important and less obvious. For many decisions, we already know the right answer. It just <em>feels</em> right. We need the guts to make the call.</li></ol><p>To improve my decision-making, I’ve carefully explored and tested hundreds of thought experiments. To save you months on doing the same, I’ve collected the best nine in this post. They come from brilliant people, whom I credit gratefully for their work.</p><p>Please don’t think about these experiments as a checklist to go through when making a decision. Think for yourself which one might be a good fit and apply it wisely.</p><h2 id="1-the-simulation-by-tim-urban">1. <a href="https://waitbutwhy.com/2015/11/the-cook-and-the-chef-musks-secret-sauce.html">The Simulation, by Tim Urban</a></h2><p>This is my favorite thought experiment (and most powerful).</p><p>Here’s how Tim describes it:</p><p>If someone gave you a perfect simulation of today’s world to play in and told you that it’s all fake with no actual consequences—with the only rules being that you can’t break the law or harm anyone, and you still have to make sure to support your and your family’s basic needs — what would you do?</p><hr><p>It works is by removing risk from the equation — if I have one more life anyway, why not try this crazy thing? It took me a few weeks to realize how deep is the thought behind it: there’s no difference whatsoever between the simulation and real life. </p><p>Once you accept that truth, your most risky desires start popping up.</p><h2 id="2-the-movie-guy-by-joe-rogan">2. <a href="https://youtu.be/ysTGb27yCcc?t=191">The Movie Guy, by Joe Rogan</a></h2><p>Here’s how Joe describes it:</p><p>Live your life like you’re the hero in your movie. And right now is when the fucking movie starts and your life is a shit bag disaster. Pretend you are, right now, you’re in the part of the movie that starts and it shows you as a fucking loser. And just decide not to be a loser.</p><p>Live your life like this is a documentary crew following you around, analyzing you. Do what you want to do so your kids one day will look back at it and see that documentary and look on it with pride, like, wow, my dad was a bad motherfucker, he really did what he had to do. Wow, my mom really got her shit together.</p><p>I’d love a success story, but even more than a success story I like a dude who fucks his life up and then gets it back together again story; those are my favorite stories. And the way to do that — you gotta write shit down, you gotta think that you are the hero in your own fucking movie, and then you gotta sit down, and you gotta write shit down. Write down what you need to do.</p><hr><p>The question:</p><blockquote>What would the movie guy do? – Joe Rogan</blockquote><h2 id="3-the-deathbed-me-by-tim-urban">3. <a href="https://waitbutwhy.com/2018/04/picking-career.html">The Deathbed Me, by Tim Urban</a></h2><p>Here’s how Tim describes it:</p><p>The deathbed test is casting yourself into the distant future, imagining yourself lying on your deathbed and asking what your future self would want you to do at the current juncture of your life.</p><p>To stay on the 'default' path you’re travelling now – complete with its comfort, certainty, status and security – or to take the road less travelled? To go with the convenient 'less hassle' option, or to dig deep and to veer onto a path that tugs at your heart, despite the comforts you have to give up in the process?</p><p>Let’s face it, there will always be many reasons to justify taking the easier path, sticking with the status quo and avoiding the possibility of failure. Yet the longer I am alive, the more firmly I believe that living a life that nurtures our souls, and not just a short-term sense of comfort or security or status, will often require trading comfort for inconvenience, security for uncertainty, and going that extra mile (or 10,000!) when you can easily justify not bothering.</p><p>So what about you? As you think about the big decisions in your career and life, and perhaps a few of the smaller ones, are you currently on a path that puts you at risk of one day looking back and wondering, perhaps regretfully, <em>‘What if I’d tried?’</em></p><hr><p>The question:</p><blockquote>Am I currently on a path that puts me at risk of one day looking back and wondering, perhaps regretfully, “what if I’d tried?” – Tim Urban</blockquote><h2 id="4-the-regret-minimization-framework-by-jeff-bezos">4. <a href="https://www.youtube.com/watch?v=jwG_qR6XmDQ">The Regret Minimization Framework, by Jeff Bezos</a></h2><p>Here’s how Jeff describes it:</p><p>The framework I found, which made the decision incredibly easy, was what I called — which only a nerd would call — a “regret minimization framework.” So I wanted to project myself forward to age 80 and say, “Okay, now I’m looking back on my life. I want to have minimized the number of regrets I have.”</p><p>I knew that when I was 80 I was not going to regret having tried this. I was not going to regret trying to participate in this thing called the Internet that I thought was going to be a really big deal. I knew that if I failed I wouldn’t regret that, but I knew the one thing I might regret is not ever having tried. I knew that that would haunt me every day, and so, when I thought about it that way it was an incredibly easy decision.</p><p>And I think that’s a very good if you can project yourself out to age 80 and think, <em>“What will I think at that time?”</em> it gets you away from some of the daily pieces of confusion. You know, I left this Wall Street firm in the middle of the year. When you do that, you walk away from your annual bonus and that’s the kind of thing where there short-term can confuse you but if you think about the long-term then you can really make good life decisions that you won’t regret later.</p><hr><p>Sam Altman also <a href="https://blog.samaltman.com/the-days-are-long-but-the-decades-are-short">adds on this</a>:</p><p>If you think you’re going to regret not doing something, you should probably do it. &nbsp;Regret is the worst, and most people regret far more things they didn’t do than things they did do. When in doubt, kiss the boy/girl.</p><p>Gary Vee also <a href="https://youtu.be/KFYolTZXidA">adds on this</a>:</p><p>What kids struggle with is the decision they want to do versus the decision that they think they’re supposed to do based on the other voices. Nobody old and about to die talks about what they did. They talk about what they <em>didn’t</em> do. Don’t not do what you wanna do.</p><p>The question:</p><blockquote>At the age of 80, will I regret not doing this? – Jeff Bezos</blockquote><h2 id="5-fear-setting-by-tim-ferris">5. <a href="https://tim.blog/2017/05/15/fear-setting/">Fear-Setting, by Tim Ferris</a></h2><p>Here’s how Tim describes it:</p><p>I do an exercise called “fear-setting” at least once a quarter, often once a month. It is the most powerful exercise I do. Fear-setting has produced my biggest business and personal successes, as well as repeatedly helped me to avoid catastrophic mistakes.</p><p>If you are nervous about making the jump or simply putting it off out of fear of the unknown, here is your antidote. Write down your answers, and keep in mind that thinking a lot will not prove as fruitful or as prolific as simply brain vomiting on the page. Write and do not edit—aim for volume. Spend a few minutes on each answer.</p><ol><li>Define your nightmare, the absolute worst that could happen if you did what you are considering. What doubt, fears, and “what-ifs” pop up as you consider the big changes you can—or need—to make? Envision them in painstaking detail. Would it be the end of your life? What would be the permanent impact, if any, on a scale of 1–10? Are these things really permanent? How likely do you think it is that they would actually happen?</li><li>What steps could you take to repair the damage or get things back on the upswing, even if temporarily? Chances are, it’s easier than you imagine. How could you get things back under control?</li><li>What are the outcomes or benefits, both temporary and permanent, of more probable scenarios? Now that you’ve defined the nightmare, what are the more probable or definite positive outcomes, whether internal (confidence, self-esteem, etc.) or external? What would the impact of these more likely outcomes be on a scale of 1–10? How likely is it that you could produce at least a moderately good outcome? Have less intelligent people done this before and pulled it off?</li><li>If you were fired from your job today, what would you do to get things under financial control? Imagine this scenario and run through questions 1–3 above. If you quit your job to test other options, how could you later get back on the same career track if you absolutely had to?</li><li>What are you putting off out of fear? Usually, what we most fear doing is what we most need to do. That phone call, that conversation, whatever the action might be—it is fear of unknown outcomes that prevents us from doing what we need to do. Define the worst case, accept it, and do it. I’ll repeat something you might consider tattooing on your forehead: What we fear doing most is usually what we most need to do. As I have heard said, a person’s success in life can usually be measured by the number of uncomfortable conversations he or she is willing to have. Resolve to do one thing every day that you fear. I got into this habit by attempting to contact celebrities and famous business people for advice.</li><li>What is it costing …</li></ol></div></section></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://vasilishynkarenka.com/how-to-make-hard-decisions/">https://vasilishynkarenka.com/how-to-make-hard-decisions/</a></em></p>]]>
            </description>
            <link>https://vasilishynkarenka.com/how-to-make-hard-decisions/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24757176</guid>
            <pubDate>Mon, 12 Oct 2020 17:48:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why Software Developers Suck at UX]]>
            </title>
            <description>
<![CDATA[
Score 59 | Comments 78 (<a href="https://news.ycombinator.com/item?id=24756902">thread link</a>) | @arvando
<br/>
October 12, 2020 | http://www.cakewalklabs.com/blog/2020/10/12/why-software-developers-suck-at-ux | <a href="https://web.archive.org/web/*/http://www.cakewalklabs.com/blog/2020/10/12/why-software-developers-suck-at-ux">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div data-layout-label="Post Body" data-type="item" data-updated-on="1602523706766" id="item-5f8491cd13e290350fb22d87"><div><div><div data-block-type="2" id="block-131cb583c4d6196dd9ed"><div><p><em>Note: “Generally speaking” should be placed in front of basically every sentence in this post. These conclusions are completely based on my own subjective experiences of working in Silicon Valley for 3 years, running a startup for 2 and freelancing for 5.</em></p><p>I get brought into a lot of projects where the engineering team had created user flows and user interfaces, then either pre launch through user testing or post launch through user feedback, the client discovered those designs were far too complex for their end users. So why do those engineers suck at design? They’re far smarter than me, they understand their domain much better than me, and they’ve been working on that specific problem for many months or years. In fact, it’s so rare for a good engineer to be a great UX designer that they're called ‘unicorns’.</p><p>One of the more obvious reasons is that because they’ve been working on the specific problem for so long they have blinders on, and can no longer view it from a 30,000 ft view. There might be emotional attachment to already existing solutions that were thought up months ago. But the reason I wanna mainly talk about is that engineers, developers, whatever you want to call them, function in a different way than the general population, who tend to be the end users. When engineers are developing products strictly for other engineers, like a Chrome extension for debugging code or some sort of command line tool for example, their UX is fantastic. This is where the idea of building something for yourself comes from. So that means they don’t actually suck at design.</p><p>But when they have to design something for someone whose mind doesn’t work like an engineer, it’s a different story. They feel like things are getting “dumbed down” too much, and that “obviously this makes sense”, when for their end user it does not. There is too much of a disconnect between their understanding and mental framework of technology compared with the common person, and a larger amount of empathy is needed to bridge that gap. And that amount of empathy is hard to fake. I imagine that it’s like when you’re trying to explain something technologically mundane in your world, say, Instagram Stories, to your grandma who can barely send email. Bridging that gap requires a larger amount of empathy and patience, not because your grandma is dumb, but because her mental framework of technology is quite different than yours.</p><p>So why is it that UX designers supposedly have the ability to bridge that gap with everyone? I think great UX designers just grew up naturally having much more empathy towards others and having a much better ability to place themselves in others shoes and see the world from their eyes. I would argue that generally speaking in the real world this is a burden, when others can’t empathize with you but all you can do is empathize with them… makes it really difficult to not take on other’s pain, to not be the one who bends their rules to accommodate others, to not have solid boundaries, to not be as defensive in arguments. But in the technology world, that allows for great user friendly designs.</p></div></div></div></div></div></div></div>]]>
            </description>
            <link>http://www.cakewalklabs.com/blog/2020/10/12/why-software-developers-suck-at-ux</link>
            <guid isPermaLink="false">hacker-news-small-sites-24756902</guid>
            <pubDate>Mon, 12 Oct 2020 17:29:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Kautilya Arthashastra and its relevance to Urban Planning Studies [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 52 | Comments 38 (<a href="https://news.ycombinator.com/item?id=24756863">thread link</a>) | @jelliclesfarm
<br/>
October 12, 2020 | http://www.itpi.org.in/uploads/journalfiles/jan8_10.pdf | <a href="https://web.archive.org/web/*/http://www.itpi.org.in/uploads/journalfiles/jan8_10.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>http://www.itpi.org.in/uploads/journalfiles/jan8_10.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-24756863</guid>
            <pubDate>Mon, 12 Oct 2020 17:25:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to implement Lambda Edge functions in Terraform]]>
            </title>
            <description>
<![CDATA[
Score 13 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24756558">thread link</a>) | @giacaglia
<br/>
October 12, 2020 | https://transcend.io/blog/lambda-edge-functions-in-terraform/ | <a href="https://web.archive.org/web/*/https://transcend.io/blog/lambda-edge-functions-in-terraform/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><div><p><a target="_blank" rel="noopener noreferrer" href="https://aws.amazon.com/cloudfront/">AWS CloudFront</a> is a global Content Delivery Network (CDN) that gives developers extensive controls over their frontends. CloudFront comes with many configuration options for controlling caching, dynamic origins, geographic restrictions, and much more. But the greatest control that CloudFront offers comes from a service called <a target="_blank" rel="noopener noreferrer" href="https://aws.amazon.com/lambda/edge/">Lambda@Edge</a>. </p><p>With Lambda@Edge, you can run serverless functions through AWS Lambda on any of four event hooks that happen during a request for our origin content. These functions run at the edge locations of the CDN, meaning that Lambda@Edge promises a way to have a multi-region active-active backend where you only pay for the compute time that you use.</p><div><p><img src="https://images.ctfassets.net/zp9m00phuodm/5OL4rRqx7pi05JnCYDNt8g/756bfb4b66a5ec4fdf521161b646060f/cloudfront-events-that-trigger-lambda-functions.png" alt="XKCD: Compiling"></p><figcaption>Lambda@Edge hooks (Image via Amazon AWS)</figcaption></div><p>That sounds wonderful, but implementing these functions in practice can be challenging and error-prone. Terraform makes provisioning most cloud infrastructure a breeze, but Lambda functions have a number of challenges with them. </p><p>In a typical modern codebase, a tool like Terraform will manage infrastructure only, while your CI/CD pipeline deploys the application code. But Lambda functions blur those lines, being a serverless service that integrates with other pieces of infrastructure, while itself containing application code.</p><p><strong>This blog post aims to show that not only are making Lambda@Edge functions in Terraform possible, but that it can actually be a pleasant experience.</strong></p><p>At Transcend, these functions have enabled us to create consistently secure frontends without needing to update our frontend application code at all, which has been a wonderful experience.</p><p><em>Pro tip: If you want to host a frontend in AWS, CloudFront with an S3 origin is the recommended method. And if you want to get started with setting up a frontend with Terraform, <a href="https://transcend.io/blog/hassle-free-frontends-in-aws">check out our recent blog post on how to do so</a>.</em></p><h2 id="getting-started">Getting started</h2><p>For the purposes of this tutorial, let’s assume we have a very basic frontend that we’d like to deploy. And as a security-conscious organization, we’d like to add a Lambda@Edge function to ensure we are properly setting security headers (such as a Content Security Policy) in our responses.</p><p>To begin with, let’s start with a Terraform file that declares a frontend on AWS using S3 and Cloudfront. For an overview of how this works, check out <a href="https://transcend.io/blog/hassle-free-frontends-in-aws">our blog post here</a></p><div><pre><p><span>1</span><span>provider</span><span> "aws" </span><span>{</span><span></span></p><p><span>2</span><span>  </span><span>version</span><span> </span><span>=</span><span> </span><span>"~&gt; 2.0"</span><span></span></p><p><span>3</span><span>  </span><span>region</span><span>  </span><span>=</span><span> </span><span>"us-east-1"</span><span></span></p><p><span>4</span><span></span><span>}</span><span></span></p><p><span>5</span><span></span></p><p><span>6</span><span></span><span>module</span><span> "cloudfront-s3-cdn" </span><span>{</span><span></span></p><p><span>7</span><span>  </span><span>source</span><span>  </span><span>=</span><span> </span><span>"cloudposse/cloudfront-s3-cdn/aws"</span><span></span></p><p><span>8</span><span>  </span><span>version</span><span> </span><span>=</span><span> </span><span>"0.34.1"</span><span></span></p><p><span>9</span><span></span></p><p><span>10</span><span>  </span><span>name</span><span>               </span><span>=</span><span> </span><span>"edge-acme-example"</span><span></span></p><p><span>11</span><span>  </span><span>encryption_enabled</span><span> </span><span>=</span><span> </span><span>true</span><span></span></p><p><span>12</span><span></span></p><p><span>13</span><span>  </span><span></span></p><p><span>14</span><span>  </span><span>default_ttl</span><span> </span><span>=</span><span> </span><span>300</span><span></span></p><p><span>15</span><span>  </span><span>compress</span><span>    </span><span>=</span><span> </span><span>true</span><span></span></p><p><span>16</span><span></span></p><p><span>17</span><span>  </span><span></span></p><p><span>18</span><span>  </span><span>website_enabled</span><span> </span><span>=</span><span> </span><span>true</span><span></span></p><p><span>19</span><span>  </span><span>index_document</span><span>  </span><span>=</span><span> </span><span>"index.html"</span><span></span></p><p><span>20</span><span>  </span><span>error_document</span><span>  </span><span>=</span><span> </span><span>"index.html"</span><span></span></p><p><span>21</span><span></span><span>}</span><span></span></p><p><span>22</span><span></span></p><p><span>23</span><span></span><span>output</span><span> s3_bucket </span><span>{</span><span></span></p><p><span>24</span><span>  </span><span>description</span><span> </span><span>=</span><span> </span><span>"Name of the S3 origin bucket"</span><span></span></p><p><span>25</span><span>  </span><span>value</span><span>       </span><span>=</span><span> module.cloudfront-s3-cdn.s3_bucket</span></p><p><span>26</span><span></span><span>}</span><span></span></p><p><span>27</span><span></span></p><p><span>28</span><span></span><span></span></p><p><span>29</span><span></span><span>terraform</span><span> </span><span>{</span><span></span></p><p><span>30</span><span>  </span><span>backend</span><span> "remote" </span><span>{</span><span></span></p><p><span>31</span><span>    </span><span>hostname</span><span>     </span><span>=</span><span> </span><span>"app.terraform.io"</span><span></span></p><p><span>32</span><span>    </span><span>organization</span><span> </span><span>=</span><span> </span><span>"transcend-io"</span><span></span></p><p><span>33</span><span></span></p><p><span>34</span><span>    </span><span>workspaces</span><span> </span><span>{</span><span></span></p><p><span>35</span><span>      </span><span>name</span><span> </span><span>=</span><span> </span><span>"edge-blog-frontend"</span><span></span></p><p><span>36</span><span>    </span><span>}</span><span></span></p><p><span>37</span><span>  </span><span>}</span><span></span></p><p><span>38</span><span></span><span>}</span></p></pre></div><p>This sets up a complete frontend, with an S3 bucket origin, and a CloudFront distribution on top of it <a target="_blank" rel="noopener noreferrer" href="https://d3h5cy7by9ugu9.cloudfront.net/">like we have available here</a>. To create a Lambda function, we just need to point a module towards some application code we’ve written. </p><p>In this example, we’ve written a simple function that updates a response to include the security headers we want:</p><div><pre><p><span>1</span><span>exports</span><span>.</span><span>handler</span><span> </span><span>=</span><span> </span><span>(</span><span>event</span><span>,</span><span> context</span><span>,</span><span> callback</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></p><p><span>2</span><span>  </span><span></span></p><p><span>3</span><span>  </span><span>const</span><span> response </span><span>=</span><span> event</span><span>.</span><span>Records</span><span>[</span><span>0</span><span>]</span><span>.</span><span>cf</span><span>.</span><span>response</span><span>;</span><span></span></p><p><span>4</span><span>  </span><span>const</span><span> headers </span><span>=</span><span> response</span><span>.</span><span>headers</span><span>;</span><span></span></p><p><span>5</span><span></span></p><p><span>6</span><span>  </span><span></span></p><p><span>7</span><span>  headers</span><span>[</span><span>'strict-transport-security'</span><span>]</span><span> </span><span>=</span><span> </span><span>[</span><span>{</span><span>key</span><span>:</span><span> </span><span>'Strict-Transport-Security'</span><span>,</span><span> value</span><span>:</span><span> </span><span>'max-age= 63072000; includeSubdomains; preload'</span><span>}</span><span>]</span><span>;</span><span></span></p><p><span>8</span><span>  headers</span><span>[</span><span>'content-security-policy'</span><span>]</span><span> </span><span>=</span><span> </span><span>[</span><span>{</span><span>key</span><span>:</span><span> </span><span>'Content-Security-Policy'</span><span>,</span><span> value</span><span>:</span><span> </span><span>"default-src 'self' cdnjs.cloudflare.com style-src 'self' 'unsafe-inline';"</span><span>}</span><span>]</span><span>;</span><span></span></p><p><span>9</span><span>  headers</span><span>[</span><span>'x-frame-options'</span><span>]</span><span> </span><span>=</span><span> </span><span>[</span><span>{</span><span>key</span><span>:</span><span> </span><span>'X-Frame-Options'</span><span>,</span><span> value</span><span>:</span><span> </span><span>'DENY'</span><span>}</span><span>]</span><span>;</span><span></span></p><p><span>10</span><span>  headers</span><span>[</span><span>'x-xss-protection'</span><span>]</span><span> </span><span>=</span><span> </span><span>[</span><span>{</span><span>key</span><span>:</span><span> </span><span>'X-XSS-Protection'</span><span>,</span><span> value</span><span>:</span><span> </span><span>'1; mode=block'</span><span>}</span><span>]</span><span>;</span><span></span></p><p><span>11</span><span>  headers</span><span>[</span><span>'referrer-policy'</span><span>]</span><span> </span><span>=</span><span> </span><span>[</span><span>{</span><span>key</span><span>:</span><span> </span><span>'Referrer-Policy'</span><span>,</span><span> value</span><span>:</span><span> </span><span>'same-origin'</span><span>}</span><span>]</span><span>;</span><span></span></p><p><span>12</span><span></span></p><p><span>13</span><span>  </span><span></span></p><p><span>14</span><span>  </span><span>callback</span><span>(</span><span>null</span><span>,</span><span> response</span><span>)</span><span>;</span><span></span></p><p><span>15</span><span></span><span>}</span><span>;</span></p></pre></div><p>And then to create the Lambda function, we add the Terraform module:</p><div><pre><p><span>1</span><span>module</span><span> "security_header_lambda" </span><span>{</span><span></span></p><p><span>2</span><span>  </span><span>source</span><span>                 </span><span>=</span><span> </span><span>"transcend-io/lambda-at-edge/aws"</span><span></span></p><p><span>3</span><span>  </span><span>version</span><span>                </span><span>=</span><span> </span><span>"0.0.2"</span><span></span></p><p><span>4</span><span>  </span><span>name</span><span>                   </span><span>=</span><span> </span><span>"security_headers"</span><span></span></p><p><span>5</span><span>  </span><span>description</span><span>            </span><span>=</span><span> </span><span>"Adds security headers to the response"</span><span></span></p><p><span>6</span><span>  </span><span>runtime</span><span>                </span><span>=</span><span> </span><span>"nodejs12.x"</span><span></span></p><p><span>7</span><span>  </span><span>lambda_code_source_dir</span><span> </span><span>=</span><span> </span><span>"</span><span>$</span><span>{</span><span>path</span><span>.</span><span>module</span><span>}</span><span>/../../src/security_headers"</span><span></span></p><p><span>8</span><span></span><span>}</span></p></pre></div><p>The last step is to connect that Lambda function to one of the four CloudFront events. To do so, we update the CloudFront module to add the field:</p><div><pre><p><span>1</span><span>lambda_function_association</span><span> </span><span>=</span><span> </span><span>[</span><span>{</span><span></span></p><p><span>2</span><span>  </span><span>event_type</span><span>   </span><span>=</span><span> </span><span>"origin-response"</span><span>   </span></p><p><span>3</span><span>  </span><span>include_body</span><span> </span><span>=</span><span> </span><span>false</span><span></span></p><p><span>4</span><span>  </span><span>lambda_arn</span><span>   </span><span>=</span><span> module.security_header_lambda.arn</span></p><p><span>5</span><span></span><span>}</span><span>]</span></p></pre></div><p>You can use up to four functions per CloudFront cache behavior, one for each of the hooks.</p><p>To validate that response headers are updated, we can run:</p><div><pre><p><span>1</span><span>curl</span><span> -D - https://d3h5cy7by9ugu9.cloudfront.net/ -o /dev/null</span></p></pre></div><p>And we will see that the headers include our new security settings:</p><div><pre><p><span>1</span><span>strict-transport-security: max-age= 63072000; includeSubdomains; preload</span></p><p><span>2</span><span>content-security-policy: default-src 'self' cdnjs.cloudflare.com style-src 'self' 'unsafe-inline';</span></p><p><span>3</span><span>x-frame-options: DENY</span></p><p><span>4</span><span>x-xss-protection: 1; mode=block</span></p><p><span>5</span><span>referrer-policy: same-origin</span></p></pre></div><h2 id="beyond-the-basics">Beyond the basics</h2><div><p><img src="https://images.ctfassets.net/zp9m00phuodm/2vPyPbkZDJFxEWgDmHDkFA/16214e2d4c210278969b1c01686fbee1/susan-holt-simpson-Rd01U0tPmQI-unsplash.jpg" alt="XKCD: Compiling"></p><figcaption>Building with the right building blocks blocks blockers in the future.(Susan Holt Smith via Unsplash)</figcaption></div><p>In the remaining sections, we will expand our Terraform code to handle some common real-world use cases when dealing with Lambda@Edge functions.</p><h3 id="setting-up-a-cicd-pipeline">Setting up a CI/CD pipeline</h3><p>As mentioned before, Lambda@Edge blurs some lines between application code and infrastructure. Because of this, your CI pipelines will need to do application code tasks, like building your code from source, while your pipeline will also need to deploy your infrastructure with Terraform commands.</p><p>As an example, here is an example of a Github Action workflow that can build and deploy a Lambda@Edge function from scratch using our module we made above:</p><div><pre><p><span>1</span><span>name</span><span>:</span><span> Deploy a Lambda@Edge function and website</span></p><p><span>2</span><span></span></p><p><span>3</span><span></span><span>on</span><span>:</span><span></span></p><p><span>4</span><span>  </span><span>push</span><span>:</span><span></span></p><p><span>5</span><span>    </span><span>branches</span><span>:</span><span></span></p><p><span>6</span><span>    </span><span>-</span><span> master</span></p><p><span>7</span><span></span></p><p><span>8</span><span></span><span>jobs</span><span>:</span><span></span></p><p><span>9</span><span>  </span><span>deploy</span><span>:</span><span></span></p><p><span>10</span><span>    </span><span>runs-on</span><span>:</span><span> ubuntu</span><span>-</span><span>latest</span></p><p><span>11</span><span>    </span><span>defaults</span><span>:</span><span></span></p><p><span>12</span><span>      </span><span>run</span><span>:</span><span></span></p><p><span>13</span><span>        </span><span>working-directory</span><span>:</span><span> infra/lambda_at_edge_example</span></p><p><span>14</span><span>    </span><span>steps</span><span>:</span><span></span></p><p><span>15</span><span>    </span><span></span></p><p><span>16</span><span>    </span><span>-</span><span> </span><span>uses</span><span>:</span><span> actions/checkout@master</span></p><p><span>17</span><span></span></p><p><span>18</span><span>    </span><span></span></p><p><span>19</span><span>    </span><span>-</span><span> </span><span>uses</span><span>:</span><span> hashicorp/setup</span><span>-</span><span>terraform@v1</span></p><p><span>20</span><span>      </span><span>with</span><span>:</span><span></span></p><p><span>21</span><span>        </span><span>terraform_version</span><span>:</span><span> 0.13.3</span></p><p><span>22</span><span>        </span><span>cli_config_credentials_token</span><span>:</span><span> $</span><span>{</span><span>{</span><span> secrets.TF_API_TOKEN </span><span>}</span><span>}</span><span></span></p><p><span>23</span><span>        </span><span>terraform_wrapper</span><span>:</span><span> </span><span>false</span><span></span></p><p><span>24</span><span></span></p><p><span>25</span><span>    </span><span></span></p><p><span>26</span><span>    </span><span>-</span><span> </span><span>name</span><span>:</span><span> Configure AWS Credentials</span></p><p><span>27</span><span>      </span><span>uses</span><span>:</span><span> aws</span><span>-</span><span>actions/configure</span><span>-</span><span>aws</span><span>-</span><span>credentials@v1</span></p><p><span>28</span><span>      </span><span>with</span><span>:</span><span></span></p><p><span>29</span><span>        </span><span>aws-access-key-id</span><span>:</span><span> $</span><span>{</span><span>{</span><span> secrets.AWS_ACCESS_KEY_ID </span><span>}</span><span>}</span><span></span></p><p><span>30</span><span>        </span><span>aws-secret-access-key</span><span>:</span><span> $</span><span>{</span><span>{</span><span> secrets.AWS_SECRET_ACCESS_KEY </span><span>}</span><span>}</span><span></span></p><p><span>31</span><span>        </span><span>role-to-assume</span><span>:</span><span> $</span><span>{</span><span>{</span><span> secrets.AWS_ROLE_TO_ASSUME </span><span>}</span><span>}</span><span></span></p><p><span>32</span><span>        </span><span>role-skip-session-tagging</span><span>:</span><span> </span><span>true</span><span></span></p><p><span>33</span><span>        </span><span>role-duration-seconds</span><span>:</span><span> </span><span>1200</span><span></span></p><p><span>34</span><span>        </span><span>aws-region</span><span>:</span><span> us</span><span>-</span><span>east</span><span>-</span><span>1</span><span></span></p><p><span>35</span><span></span></p><p><span>36</span><span>    </span><span></span></p><p><span>37</span><span>    </span><span>-</span><span> </span><span>uses</span><span>:</span><span> actions/setup</span><span>-</span><span>node@v2</span><span>-</span><span>beta</span></p><p><span>38</span><span>      </span><span>with</span><span>:</span><span></span></p><p><span>39</span><span>        </span><span>node-version</span><span>:</span><span> </span><span>'12'</span><span></span></p><p><span>40</span><span>    </span><span>-</span><span> </span><span>run</span><span>:</span><span> yarn</span></p><p><span>41</span><span>      </span><span>working-directory</span><span>:</span><span> src/security_headers</span></p><p><span>42</span><span></span></p><p><span>43</span><span>    </span><span></span></p><p><span>44</span><span>    </span><span>-</span><span> </span><span>run</span><span>:</span><span> terraform init</span></p><p><span>45</span><span>    </span><span>-</span><span> </span><span>run</span><span>:</span><span> terraform validate</span></p><p><span>46</span><span>    </span><span>-</span><span> </span><span>run</span><span>:</span><span> terraform plan </span><span>-</span><span>out planfile</span></p><p><span>47</span><span>    </span><span>-</span><span> </span><span>run</span><span>:</span><span> terraform apply planfile</span></p><p><span>48</span><span></span></p><p><span>49</span><span>    </span><span></span></p><p><span>50</span><span>    </span><span>-</span><span> </span><span>name</span><span>:</span><span> Deploy static site to S3 bucket</span></p><p><span>51</span><span>      </span><span>run</span><span>:</span><span> aws s3 sync ../../public s3</span><span>:</span><span>//$(terraform output s3_bucket) </span><span>-</span><span>-</span><span>delete</span></p></pre></div><p>There’s nothing terribly fancy in this action. It checks out the repository, downloads dependencies, sets up credentials, builds the code, deploys the terraform to create the Lambda function and CloudFront distribution, then deploys the static site to the CloudFront origin.</p><p>Even if you don’t use Github actions, these steps should be straightforward enough to port to your CI/CD platform of choice. For a complete example of a working repo with this pipeline set up, check out <a target="_blank" rel="noopener noreferrer" href="https://github.com/transcend-io/blog-frontend">https://github.com/transcend-io/blog-frontend</a>.</p><h3 id="using-typescript">Using Typescript</h3><div><p><img src="https://images.ctfassets.net/zp9m00phuodm/3Bes3hDYJCCTon9Rm280k8/33354b28fb5dae34c04127077bb8f1cb/anthony-delanoix-vmrCxMRdq58-unsplash__1_.jpg" alt="XKCD: Compiling"></p><figcaption>Fancy drinks for a fancy language. (Anthony Delanoix via Unsplash)</figcaption></div><p>When you upload a Lambda function artifact, the artifact should contain runnable Javascript. That means that the Lambda runtime environment will not compile down your code, nor will it install node_modules. It’s up to you to package your code so it is ready to run.</p><p>First, let’s add a <code>tsconfig.json</code> to our package. For this example, I’ll keep things with most of the defaults from running <code>tsc --init</code>:</p><div><pre><p><span>1</span><span>{</span><span></span></p><p><span>2</span><span>  </span><span>"compilerOptions"</span><span>:</span><span> </span><span>{</span><span></span></p><p><span>3</span><span>    </span><span>"target"</span><span>:</span><span> </span><span>"ES2017"</span><span>,</span><span>                      </span></p><p><span>4</span><span>    </span><span>"module"</span><span>:</span><span> </span><span>"commonjs"</span><span>,</span><span>                  </span></p><p><span>5</span><span>    </span><span>"strict"</span><span>:</span><span> </span><span>true</span><span>,</span><span>                 </span></p><p><span>6</span><span>    </span><span>"noImplicitAny"</span><span>:</span><span> </span><span>true</span><span>,</span><span></span></p><p><span>7</span><span>    </span><span>"esModuleInterop"</span><span>:</span><span> </span><span>true</span><span>,</span><span>                 </span></p><p><span>8</span><span>    </span><span>"forceConsistentCasingInFileNames"</span><span>:</span><span> </span><span>true</span><span> </span><span>,</span><span></span></p><p><span>9</span><span>    </span><span>"outDir"</span><span>:</span><span> </span><span>"dist"</span><span>,</span><span></span></p><p><span>10</span><span>  </span><span>}</span><span></span></p><p><span>11</span><span></span><span>}</span></p></pre></div><p>Next, we will update our <code>package.json</code> to install a specific typescript version and to know how to build our code with <code>tsc</code>:</p><div><pre><p><span>1</span><span>{</span><span></span></p><p><span>2</span><span>  </span><span>"author"</span><span>:</span><span> </span><span>"Transcend Inc."</span><span>,</span><span></span></p><p><span>3</span><span>  </span><span>"name"</span><span>:</span><span> </span><span>"@main/security_headers"</span><span>,</span><span></span></p><p><span>4</span><span>  </span><span>"license"</span><span>:</span><span> </span><span>"UNLICENSED"</span><span>,</span><span></span></p><p><span>5</span><span>  </span><span>"main"</span><span>:</span><span> </span><span>"index.js"</span><span>,</span><span></span></p><p><span>6</span><span>  </span><span>"dependencies"</span><span>:</span><span> </span><span>{</span><span>}</span><span>,</span><span></span></p><p><span>7</span><span>  </span><span>"scripts"</span><span>:</span><span> </span><span>{</span><span></span></p><p><span>8</span><span>    </span><span>"build"</span><span>:</span><span> </span><span>"tsc --build"</span><span></span></p><p><span>9</span><span>  </span><span>}</span><span>,</span><span></span></p><p><span>10</span><span>  </span><span>"devDependencies"</span><span>:</span><span> </span><span>{</span><span></span></p><p><span>11</span><span>    </span><span>"@types/aws-lambda"</span><span>:</span><span> </span><span>"^8.10.62"</span><span>,</span><span></span></p><p><span>12</span><span>    </span><span>"typescript"</span><span>:</span><span> </span><span>"^4.0.3"</span><span></span></p><p><span>13</span><span>  </span><span>}</span><span></span></p><p><span>14</span><span></span><span>}</span></p></pre></div><p>Notice that we included a dev dependency on some AWS Lambda types so that we can strongly type our code as we write it. Outside of adding types, our JavaScript code stays mostly the same. Here’s the new <code>index.ts</code>:</p><div><pre><p><span>1</span><span>import</span><span> </span><span>{</span><span></span></p><p><span>2</span><span>  </span><span>CloudFrontResponseEvent</span><span>,</span><span></span></p><p><span>3</span><span>  </span><span>CloudFrontResponseHandler</span><span>,</span><span></span></p><p><span>4</span><span>  </span><span>Context</span><span>,</span><span></span></p><p><span>5</span><span>  </span><span>CloudFrontResponseCallback</span><span>,</span><span></span></p><p><span>6</span><span></span><span>}</span><span> </span><span>from</span><span> </span><span>'aws-lambda'</span><span>;</span><span></span></p><p><span>7</span><span></span></p><p><span>8</span></p><p><span>9</span></p><p><span>10</span><span></span></p><p><span>11</span><span></span><span>export</span><span> </span><span>const</span><span> handler</span><span>:</span><span> </span><span>CloudFrontResponseHandler</span><span> </span><span>=</span><span> </span><span>(</span><span></span></p><p><span>12</span><span>  event</span><span>:</span><span> </span><span>CloudFrontResponseEvent</span><span>,</span><span></span></p><p><span>13</span><span>  _</span><span>:</span><span> </span><span>Context</span><span>,</span><span></span></p><p><span>14</span><span>  callback</span><span>:</span><span> </span><span>CloudFrontResponseCallback</span><span>,</span><span></span></p><p><span>15</span><span></span><span>)</span><span>:</span><span> </span><span>void</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span></span></p><p><span>16</span><span>  </span><span></span></p><p><span>17</span><span>  </span><span>const</span><span> response </span><span>=</span><span> event</span><span>.</span><span>Records</span><span>[</span><span>0</span><span>]</span><span>.</span><span>cf</span><span>.</span><span>response</span><span>;</span><span></span></p><p><span>18</span><span>  </span><span>const</span><span> headers </span><span>=</span><span> response</span><span>.</span><span>headers</span><span>;</span><span></span></p><p><span>19</span><span></span></p><p><span>20</span><span>  </span><span></span></p><p><span>21</span><span>  headers</span><span>[</span><span>'strict-transport-security'</span><span>]</span><span> </span><span>=</span><span> </span><span>[</span><span>{</span><span>key</span><span>:</span><span> </span><span>'Strict-Transport-Security'</span><span>,</span><span> value</span><span>:</span><span> </span><span>'max-age= 63072000; includeSubdomains; preload'</span><span>}</span><span>]</span><span>;</span><span></span></p><p><span>22</span><span>  headers</span><span>[</span><span>'content-security-policy'</span><span>]</span><span> </span><span>=</span><span> </span><span>[</span><span>{</span><span>key</span><span>:</span><span> </span><span>'Content-Security-Policy'</span><span>,</span><span> value</span><span>:</span><span> </span><span>"default-src 'self' cdnjs.cloudflare.com style-src 'self' 'unsafe-inline';"</span><span>}</span><span>]</span><span>;</span><span></span></p><p><span>23</span><span>  headers</span><span>[</span><span>'x-frame-options'</span><span>]</span><span> </span>…</p></pre></div></div></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://transcend.io/blog/lambda-edge-functions-in-terraform/">https://transcend.io/blog/lambda-edge-functions-in-terraform/</a></em></p>]]>
            </description>
            <link>https://transcend.io/blog/lambda-edge-functions-in-terraform/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24756558</guid>
            <pubDate>Mon, 12 Oct 2020 17:00:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Don’t pay for 95% (2016)]]>
            </title>
            <description>
<![CDATA[
Score 245 | Comments 369 (<a href="https://news.ycombinator.com/item?id=24755614">thread link</a>) | @PascLeRasc
<br/>
October 12, 2020 | https://5kids1condo.com/dont-pay-for-95/ | <a href="https://web.archive.org/web/*/https://5kids1condo.com/dont-pay-for-95/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="container">
	
		

		
		
	<div id="main">	
			
	<div>	
<div id="content">
	
			
<div>
<article id="post-793">
	
	
			
				
		<div>				
			<p>Your car sits idle over <a href="http://www.reinventingparking.org/2013/02/cars-are-parked-95-of-time-lets-check.html">95% of the time</a>.</p>
<p>Your guest bedroom is occupied&nbsp;one week out of every 52.</p>
<p>Your kids use the yard less than <a href="http://www.usatoday.com/story/opinion/2012/10/04/backyards-overrated-outdoors-indoors/1613815/">40 minutes a week</a>.</p>
<p>Yet we consumers love to envision the maximum usage for a particular item – like a house or a car – then buy the item with a capacity high enough to accommodate our visions.&nbsp;It makes us feel prepared, it feeds our egos, and it feels as though we got more value for our money than if we’d bought something smaller.</p>
<p>We do this despite knowing that we won’t be boarding&nbsp;guests year ’round, driving groups of eight&nbsp;in our minivan, and hosting lavish backyard parties, nightly.</p>
<p>But rather than buy for peak usage, I prefer to stay flexible.</p>
<div id="attachment_810"><p><a href="http://5kids1condo.com/wp-content/uploads/2016/04/IMG_20160415_152650new.jpg"><img aria-describedby="caption-attachment-810" src="http://5kids1condo.com/wp-content/uploads/2016/04/IMG_20160415_152650new-1024x681.jpg" alt="" width="1024" height="681" srcset="https://5kids1condo.com/wp-content/uploads/2016/04/IMG_20160415_152650new-1024x681.jpg 1024w, https://5kids1condo.com/wp-content/uploads/2016/04/IMG_20160415_152650new-300x199.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p><p id="caption-attachment-810">The kids in front of the Modo minivan we book every couple weeks or so. Just $8 an hour!</p></div>
<p>I scale my solutions up and down in response to my needs at the time.</p>
<p>Friends visiting from out of town? I’ll pay for their hotel, so I can live in a smaller, cheaper, better located condo for the rest of the year.</p>
<p>I have to schlep a bunch of kids far away? I’ll get a <a href="http://modo.coop/">Modo minivan</a>, a local car share, for a few hours. Let someone else maintain that gorgeous van.</p>
<p>Need some outdoors time? Walk a couple blocks to a park. I’m not interested in mowing something I only use a couple hours a week.</p>
<p>When I tell people this, they&nbsp;usually&nbsp;recoil at the cost. “Hotels are expensive!” “You RENT a car?!” They see only the short term price&nbsp;of my solutions.</p>
<p>They don’t see the other 95% of the time. The time when I didn’t need and therefore didn’t own or maintain those items.&nbsp;It’s in that 95% that I rack up huge savings. I make that 95% work <em>for me</em>, not against me.</p>
<p>Meanwhile, they’re living further out to afford that guest bedroom and yard, driving the $50,000 8-seater minivan, and paying for 5% usage,&nbsp;100% of the time.</p>
<div id="attachment_796"><p><a href="http://5kids1condo.com/wp-content/uploads/2016/04/IMG_20160327_114527-1.jpg"><img aria-describedby="caption-attachment-796" src="http://5kids1condo.com/wp-content/uploads/2016/04/IMG_20160327_114527-1-1024x766.jpg" alt="Being car-free, we're more likely to opt for active transportation modes - like biking. But we can scale up to vehicles when needed too." width="1024" height="766" srcset="https://5kids1condo.com/wp-content/uploads/2016/04/IMG_20160327_114527-1-1024x766.jpg 1024w, https://5kids1condo.com/wp-content/uploads/2016/04/IMG_20160327_114527-1-300x224.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p><p id="caption-attachment-796">Being car-free, we’re more likely to opt for active transportation modes – like biking. But we can scale up to vehicles when needed too.</p></div>
<p>Not owning the high capacity solution also gives me huge flexibility. Do I need a two-seater car? Or a five-seater? Minivan, cargo van, sports car? I can access them all, only when I need them.</p>
<p>So what motivates&nbsp;people to plan for occasional peaks and idealized usage, rather than actual daily utilization?</p>
<p>Ego is part of it. A large SUV or huge house is still a sign of success to many. Your neighbours won’t congratulate you in your driveway for scaling up and&nbsp;down your transportation needs in a responsible, real-time fashion.</p>
<div id="attachment_797"><p><a href="http://5kids1condo.com/wp-content/uploads/2016/04/IMG_20160406_073653.jpg"><img aria-describedby="caption-attachment-797" src="http://5kids1condo.com/wp-content/uploads/2016/04/IMG_20160406_073653-1024x768.jpg" alt="For daily kid hauling, nothing beats the bus for price, independence and level of engagement." width="1024" height="768" srcset="https://5kids1condo.com/wp-content/uploads/2016/04/IMG_20160406_073653-1024x768.jpg 1024w, https://5kids1condo.com/wp-content/uploads/2016/04/IMG_20160406_073653-300x225.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p><p id="caption-attachment-797">For daily kid hauling, nothing beats the bus for price, independence and level of engagement.</p></div>
<p>A mistaken sense of “value” is also at play. We’re often taught that “more is more,” up-selling ourselves to a larger house or car on the premise of “just in case.” It’s something we’ve all been guilty of at one time or another.</p>
<p>But&nbsp;next time a big decision comes up, try forgoing your ego and asking yourself if more really means more. Account for the hidden costs: longer commutes to a big house, higher&nbsp;expenses, more maintenance, etc. Try making a rational, needs-based decision. A decision&nbsp;based not on anticipated peaks, but on actual&nbsp;daily usage.</p>
<p><strong>In short, don’t pay for the 95% you won’t use.</strong></p>
<p>You’ll save a ton of money and gain a better quality of life.</p>
<div id="ts-fab-below"><p><span>The following two tabs change content below.</span></p><ul><li><a href="#ts-fab-bio-below">Bio</a></li><li><a href="#ts-fab-latest-posts-below">Latest Posts</a></li></ul><div>
	<div id="ts-fab-bio-below">
		<div><p><img src="https://secure.gravatar.com/avatar/ad8dc0b6838480ef540933f51be16685?s=80&amp;d=mm&amp;r=g" width="80" height="80" alt="Avatar"></p>
		</div>
		
		<div>
			<!-- /.ts-fab-header -->
			<p>Adrian Crook is a father of five living in beautiful downtown Vancouver, Canada. He's an advocate for rental housing and public transit.</p>
		</div>
	</div>
	<div id="ts-fab-latest-posts-below">
		<div><p><img src="https://secure.gravatar.com/avatar/ad8dc0b6838480ef540933f51be16685?s=80&amp;d=mm&amp;r=g" width="80" height="80" alt="Avatar"></p>
		</div>
		
	</div>
		</div>
	</div>					</div><!-- /entry-content -->
		
		
		
	</article><!-- /post-793 -->

</div><!-- /post-wrap -->		

		
			
</div><!-- /content -->

 
	<!-- /sidebar -->	
		</div><!-- /content-wrap -->
	</div><!-- /main -->
</div></div>]]>
            </description>
            <link>https://5kids1condo.com/dont-pay-for-95/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24755614</guid>
            <pubDate>Mon, 12 Oct 2020 15:45:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Escape Analysis in PyPy, LuaJIT, V8, C++, Go and More]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24754861">thread link</a>) | @kipply
<br/>
October 12, 2020 | https://carolchen.me/blog/escape-analysis/ | <a href="https://web.archive.org/web/*/https://carolchen.me/blog/escape-analysis/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section id="js-article">
    
<p>With software engineering, speed and memory are the basic measurement-benchmarks. For programming language implementations, the two affect each other heavily. In JIT compilers, that means storing more things in memory to speed up the program drastically. It also means putting time into garbage collection to keep memory down, spending time to try to eliminate allocations and deciding where to put some piece of data. </p>
<p>Escape Analysis is a technique that determines the behaviour of how a variable (more specifically, a pointer) is used in a certain scope, and whether it not it escapes that scope (the scope is usually a function). Escape analysis allows the program to stack allocate (here is an article on <a href="https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap/80113#80113">Stack vs Heap </a>allocations) when it's determined the variable will not be used outside of the scope or in other cases, try to eliminate the allocation completely. </p>
<blockquote>
<h4 id="thank-you-box">Thank You Box<a href="#thank-you-box" aria-label="Anchor link for: thank-you-box"> <i></i></a>
</h4>
<p>I'm writing this away from family during (Canadian) Thanksgiving so thank you kind and curious friends for coming to read this!</p>
<p>Also thanks to <a href="https://chrisseaton.com/">Chris Seaton</a> who was my intern mentor back when I actually worked on compilers and taught me sooo much, and <a href="https://jfbastien.com/">JF Bastien</a> who showed me how to look into <code>clang</code> and has just been generally helpful. Props to <a href="https://alberto.donizetti.eu/">Alberto</a> who fixed a bug  in Go I ran into while investigating escape analysis in Go in a matter of hours after I opened an issue, and thanks to <a href="https://blog.janestreet.com/author/lwhite/">Leo White</a> who answered my question about the lack of escape analysis in OCaml.</p>
</blockquote>
<p>For a little background on how programming languages work, skim through my post <a href="https://carolchen.me/blog/jits-intro">A Deep Introduction to JIT Compilers: JITs are not very Just-in-time</a>. </p>
<h2 id="highlights">Highlights<a href="#highlights" aria-label="Anchor link for: highlights"> <i></i></a>
</h2>
<ul>
<li><a href="https://carolchen.me/blog/escape-analysis/#pypy-escapes-boxing">Escaping Boxing</a></li>
<li><a href="https://carolchen.me/blog/escape-analysis/#luajit-allocation-sinking">Allocation Sinking</a></li>
<li><a href="https://carolchen.me/blog/escape-analysis/#some-security-escaped-v8">Chrome had a Security Incident because of Escape Analysis</a></li>
<li><a href="https://carolchen.me/blog/escape-analysis/#escape-analysis-with-llvm-backed-languages">Escape Analysis with LLVM backed languages</a></li>
<li><a href="https://carolchen.me/blog/escape-analysis/#go">Escape Analysis in Go</a></li>
<li><a href="https://carolchen.me/blog/escape-analysis/#other-compilers-that-do-escape-analysis">Other Compilers that do Escape Analysis</a></li>
</ul>
<h3 id="pypy-escapes-boxing">Pypy Escapes Boxing<a href="#pypy-escapes-boxing" aria-label="Anchor link for: pypy-escapes-boxing"> <i></i></a>
</h3>
<p>Pypy puts a lot of work into minimizing <em>boxing</em>, which is done through escape analysis. Boxing is when a primitive is boxed into an object wrapper type, such as an <code>int</code> to <code>Integer</code> in Java. Object oriented language implementations often utilize boxing (sometimes called auto-boxing), including JavaScript, C#, Haskell and others! Computers natively understands types like booleans and integers, but not objects, and unfortunately many languages need to store most of their data as an object and not the primitive. For example, <code>314</code> as a constant can be stored as a primitive on the stack, but when <code>314.toString()</code> is executed, <code>314</code> has to be boxed so that the method can be run on the object. Unboxing is performed to extract the value. </p>
<p>Boxing and unboxing is an expensive operation, with .NET citing 20x the time for boxed assignment and 4x the time for unboxing assignment (when you explicitly cast back). Pypy also has expensive boxing operations, as it's not just assigning/computing more values but organizing them into a heap structure. </p>
<p>Pypy considers this to be its second most important problem, and uses "virtual objects", also called virtualisation. It's a fancy term that means they avoid creating the entire heap structure, store the primitive value (not on the heap) and mock any object-operations that need to happen. While the virtual object is used in some applicable scope, read and writes are done to the virtual object without the expense of boxing/unboxing. Even more computation is saved as since the virtual object exists and no guards need to exist to verify information about the value in the object, whereas guards are usually in place to check the class after loading a value. </p>
<p>Pypy will virtualise onto the stack optimistically and then allocate later should it become necssary. Escape analysis is really powerful in JITs mostly because jitted langauges tend to be more dynamic, but also because they can very aggressively stack allocate.  Languages that compile once have to be completely confident that the escape analysis is valid (or also compile code in case of failure) <em>and</em> make decisions about how far it should look to determine a scope. JITs can kind of just hope it'll work and then actually do the allocation if it doesn't -- and remember what happened for next time (though that makes it sound a lot easier than it actually is). </p>
<p>For example;</p>
<pre><code><span>x </span><span>= </span><span>0
</span><span>for </span><span>i </span><span>in </span><span>range</span><span>(</span><span>10000</span><span>):
  </span><span># Integer.random() is not an actual stdlib operation in Python, I used it to indicate a non-primitive object is created
  </span><span>y </span><span>= </span><span>Integer</span><span>.</span><span>random</span><span>() </span><span>+ </span><span>x
  x </span><span>+= </span><span>y </span><span>* </span><span>4 </span><span># this would also involves boxing without escape analysis, since operators are implemented as methods
</span><span>print</span><span>(x)
</span></code></pre>
<p>There are two cases of virtualisation here. The first is <code>y</code>, which will be virtualised as it does not escape. Thus in the second line of the loop, Pypy would no longer need a guard for the value of <code>y</code>. This saves us a lot more than just constructing and traversing the heap structure. When boxed, Pypy has to check the class types of <code>y</code> and <code>x</code> due to the dynamic-ness of Python -- can these values be added? If they can, where is the method to describe how they are added (Python allows operator overloading). It also has to recreate a boxed object to reassign to <code>y</code> and in more complex cases could leave behind additional garbage for the GC. </p>
<p><code>x</code> on the other hand, does escape, but it's still valuable to virtualise it, for that allocation is in a loop and the escape is outside the loop. When a jump instruction comes in (loop ends), it’ll come with code that actually allocates <code>x</code> for the garbage collector and future use. Another case of escape analysis can be found in methods;</p>
<pre><code><span>def </span><span>foo</span><span>():
  x </span><span>= </span><span>{</span><span>"A"</span><span>: </span><span>1</span><span>, </span><span>"B"</span><span>: </span><span>2</span><span>}
  </span><span>return </span><span>x[</span><span>"A"</span><span>]
</span></code></pre>
<p>In this case, <code>x</code> will likely never escape and the allocation isn't even needed to execute the rest of the function. This particular case may actually be constant-folded away (the constant is replicated at usage sites), but abstractions of this pattern will use escape analysis. Escape analysis also often takes place for language-internal operations, and I'll describe how Javascript features and internals makes escape analysis very important. </p>
<h3 id="how-javascript-uses-escape-analysis-in-language-internals">How Javascript Uses Escape Analysis in Language Internals<a href="#how-javascript-uses-escape-analysis-in-language-internals" aria-label="Anchor link for: how-javascript-uses-escape-analysis-in-language-internals"> <i></i></a>
</h3>
<p>The most complex question about escape analysis (other than maybe "how do I implement it") is probably "is this only beneficial to very shortlived variables, and if so how does it help much?". As mentioned in the Pypy example, it is sometimes to protect allocations that are made by the language implementation rather than the programmer. Here's a quick example in Javascript (example token from <a href="https://www.jfokus.se/jfokus18/preso/Escape-Analysis-in-V8.pdf">this PDF</a>, which has a <a href="https://www.youtube.com/watch?v=KiWEWLwQ3oI">corresponding talk</a> that might be elementary at this point in the blog post). </p>
<pre><code><span>function </span><span>bar</span><span>(</span><span>o</span><span>) </span><span>{
  </span><span>return </span><span>Math</span><span>.</span><span>sqrt</span><span>(</span><span>o</span><span>.</span><span>x</span><span>*</span><span>o</span><span>.</span><span>x </span><span>+ </span><span>o</span><span>.</span><span>y</span><span>*</span><span>o</span><span>.</span><span>y)
</span><span>}

</span><span>function </span><span>foo</span><span>(</span><span>i</span><span>) </span><span>{
  </span><span>return </span><span>bar</span><span>(</span><span>{</span><span>x: </span><span>i</span><span>, y: </span><span>i}</span><span>)
</span><span>}
</span></code></pre>
<p>One might not expect anything to allocate even without escape analysis, but when you create the object to pass into <code>bar</code> it is created and allocated by default since it now exists for <code>bar</code> and can escape <code>bar</code>. This is a good example of a full allocation elimination, the allocation isn't just moved into the stack, rarther <code>bar</code> is inlined and then the usage of any object at all can be optimized away. </p>
<h3 id="luajit-allocation-sinking">LuaJIT Allocation Sinking<a href="#luajit-allocation-sinking" aria-label="Anchor link for: luajit-allocation-sinking"> <i></i></a>
</h3>
<p>In most languages that box, essentially everything gets a box (except <code>null</code> and <code>undefined</code> types, though <code>NaN</code> in Javascript is boxed into a <code>Number</code> so terms and conditions may apply). LuaJIT is smarter off the bat and manages to not box floats and is good at not allocating (when I say "allocate", I mean to the heap) constants. </p>
<p>LuaJIT's does something called <a href="http://wiki.luajit.org/Allocation-Sinking-Optimization"><em>Allocation Sinking</em></a>, which is based on escape analysis and the result is very powerful allocation removals, doing things that even the age-old Hotspot can't do. Pypy implemented a vast majority of the things that LuaJIT did (see this <a href="http://www1.maths.lth.se/matematiklth/vision/publdb/reports/pdf/ardo-bolz-etal-dls-12.pdf">2012 paper</a>) though I'd want to describe some of these optimizations in the context of LuaJIT rather than Pypy because LuaJIT gave me free examples. </p>
<p>When data is allocated, there's typically a "store" and then a "load" later on. Store-to-load forwarding is essentially what it sounds like, getting the subsequent "load" function to receive data directly from the location of storing. This is used to have powerful allocation sinking, more commonly called "code motion" (or specifically, loop-invariant code motion as JITs tend to be concerned with loop optimizations). This examples do not use executable Lua code</p>
<pre><code><span>local </span><span>x </span><span>= </span><span>0
</span><span>for </span><span>i</span><span>=</span><span>1</span><span>,</span><span>1000 </span><span>do
  </span><span>x </span><span>= </span><span>y </span><span>+ </span><span>z </span><span>-- i don't think this actually allocates in lua, but let’s pretend it does
  </span><span>local </span><span>a </span><span>= </span><span>i </span><span>+ </span><span>x
</span><span>end
</span></code></pre>
<p>What we want is for <code>x</code> to be declared outside of the loop, as it saves us that allocation every time we iterate. This could be done through code motion. </p>
<pre><code><span>local </span><span>x </span><span>= </span><span>y </span><span>+ </span><span>z 
</span><span>for </span><span>i</span><span>=</span><span>1</span><span>,</span><span>1000 </span><span>do
  </span><span>a </span><span>= </span><span>i </span><span>+ </span><span>x
</span><span>end
</span></code></pre>
<p>In the example below, the allocation of <code>i</code> to <code>y</code> should be moved to be inside the conditional. Note that this optimization is not quite covered by the base strategy described for Pypy.</p>
<pre><code><span>for </span><span>i</span><span>=</span><span>1</span><span>,</span><span>1000 </span><span>do  
  local </span><span>y </span><span>= </span><span>i
  </span><span>if </span><span>random</span><span>() </span><span>&gt; </span><span>0.5</span><span>:  </span><span>-- but does not escape this if statement
    </span><span>x </span><span>= </span><span>y </span><span>+ </span><span>z
  </span><span>local </span><span>a </span><span>= </span><span>i </span><span>+ </span><span>x
</span><span>end
</span><span>-- should become
</span><span>for </span><span>i</span><span>=</span><span>1</span><span>,</span><span>1000 </span><span>do  
  if </span><span>random</span><span>() </span><span>&gt; </span><span>0.5</span><span>: 
    </span><span>local</span><span> </span><span>y </span><span>= </span><span>i
    x </span><span>= </span><span>y </span><span>+ </span><span>z
  </span><span>local </span><span>a </span><span>= </span><span>i </span><span>+ </span><span>x
</span><span>end
</span></code></pre>
<p>Here, LuaJIT defers the write and <em>forwards</em> the data to the read. As a result, the allocation and read is very much removed. The forwarding destination is the point of escape, which is where the escape analysis comes in. </p>
<p>LuaJIT has an explicit mark-and-sweep pass to do sinks. For an example that highlights the allocation sinking, LuaJIT performed on par with C++ and 700x faster than Lua. Specifically (taken from the <a href="http://wiki.luajit.org/Allocation-Sinking-Optimization#implementation%5B">LuaJIT Blog</a>): </p>
<pre><code><span>local </span><span>ffi </span><span>= </span><span>require</span><span>(</span><span>"ffi"</span><span>)
</span><span>local </span><span>point
point </span><span>= </span><span>ffi</span><span>.</span><span>metatype</span><span>(</span><span>"struct { double x, y; }"</span><span>, </span><span>{
  </span><span>__add </span><span>= </span><span>function</span><span>(</span><span>a</span><span>, </span><span>b</span><span>)
   </span><span>return </span><span>point</span><span>(</span><span>a</span><span>.</span><span>x </span><span>+ </span><span>b</span><span>.</span><span>x, </span><span>a</span><span>.</span><span>y </span><span>+ </span><span>b</span><span>.</span><span>y)
  </span><span>end
</span><span>}</span><span>)
</span><span>local </span><span>a</span><span>, </span><span>b </span><span>= </span><span>point</span><span>(</span><span>1.5</span><span>, </span><span>2.5</span><span>), </span><span>point</span><span>(</span><span>3.25</span><span>, </span><span>4.75</span><span>)
</span><span>for </span><span>i</span><span>=</span><span>1</span><span>,</span><span>100000000 </span><span>do </span><span>a </span><span>= </span><span>(</span><span>a </span><span>+ </span><span>b</span><span>) </span><span>+ </span><span>b </span><span>end
</span><span>print</span><span>(</span><span>a</span><span>.</span><span>x, </span><span>a</span><span>.</span><span>y)
</span></code></pre>
<p>This example does some things that are familiar from the Pypy example -- it creates temporary objects while performing the arithmetic (<code>point(a.x + b.x, a.y + b.y)</code>). These two under-the-hood allocations are expensive, but LuaJIT optimizes …</p></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://carolchen.me/blog/escape-analysis/">https://carolchen.me/blog/escape-analysis/</a></em></p>]]>
            </description>
            <link>https://carolchen.me/blog/escape-analysis/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24754861</guid>
            <pubDate>Mon, 12 Oct 2020 14:48:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I Tried to Reduce Pylint Memory Usage]]>
            </title>
            <description>
<![CDATA[
Score 241 | Comments 29 (<a href="https://news.ycombinator.com/item?id=24754397">thread link</a>) | @zdw
<br/>
October 12, 2020 | https://rtpg.co/2020/10/12/pylint-usage.html | <a href="https://web.archive.org/web/*/https://rtpg.co/2020/10/12/pylint-usage.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <div>
        
<div>

  

  <article>
    <p>Through work I have to deal with a pretty huge codebase, and run Pylint on it during our continuous integration process. It's always been a bit slow, but recently I also noticed that it was consuming a <em>lot</em> of memory, causing OOM failures if we tried to run it too much in parallel.</p>
<p>I decided to roll up my sleeves and figure out:</p>
<ul>
<li>What exactly was consuming so much memory?</li>
<li>Is there a way to avoid doing this?</li>
</ul>
<p>This is a log of how I went about these two questions, as future reference for when I do other profiling work in Python.</p>
<p>Looking at Pylint from the entrypoint(<code>pylint/__main__.py</code>), I end up digging downwards and finding the "quintessential" <code>for</code> loop that you would expect in a program that checks a bunch of files for errors:</p>
<pre><code>    def _check_files(self, get_ast, file_descrs):
            # in pylint/lint/pylinter.py
            with self._astroid_module_checker() as check_astroid_module:
                for name, filepath, modname in file_descrs:
                    self._check_file(get_ast, check_astroid_module, name, filepath, modname)
</code></pre>
<p>First I just threw in a <code>print("HI")</code> statement in there to confirm that this is indeed what's being run when I do <code>pylint my_code</code>, and that goes off without a hitch.</p>
<p>First is to try and figure out what's being held in memory, so I do a really basic "heap dump" with heapy to see if anything stands out</p>
<pre><code>        from guppy import hpy
        hp = hpy()
        i = 0
        for name, filepath, modname in file_descrs:
            self._check_file(get_ast, check_astroid_module, name, filepath, modname)
            i += 1
            if i % 10 == 0:
                print("HEAP")
                print(hp.heap())
            if i == 100:
                raise ValueError("Done")
</code></pre>
<p>My heap profiles end up being almost entirely "frame types" (which I was kind of expecting, for some reason), but also holding ont a bunch of tracebacks. Enough of these kinds of objects that I told myself "surely this is more than is needed".</p>
<pre><code>    Partition of a set of 2751394 objects. Total size = 436618350 bytes.
    Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
        0 429084  16 220007072  50 220007072  50 types.FrameType
        1 535810  19 30005360   7 250012432  57 types.TracebackType
        2 516282  19 29719488   7 279731920  64 tuple
        3 101904   4 29004928   7 308736848  71 set
        4 185568   7 21556360   5 330293208  76 dict (no owner)
        5 206170   7 16304240   4 346597448  79 list
        6 117531   4  9998322   2 356595770  82 str
        7  38582   1  9661040   2 366256810  84 dict of astroid.node_classes.Name
        8  76755   3  6754440   2 373011250  85 tokenize.TokenInfo
</code></pre>
<p>It's at this point that I discovered heapy's <a href="https://zhuyifei1999.github.io/guppy3/pbscreen.jpg">Profile Browser</a>, which seemed like a bit of a nicer way to look at this data</p>
<p>I switched up the heap mechanism to dump to a file every 10 iterations, then graph the entire runtime behaviour</p>
<pre><code>    for name, filepath, modname in file_descrs:
        self._check_file(get_ast, check_astroid_module, name, filepath, modname)
        i += 1
        if i % 10 == 0:
            hp.heap().stat.dump("/tmp/linting.stats")
        if i == 100:
            hp.pb("/tmp/linting.stats")
            raise ValueError("Done")
</code></pre>
<p>I get the following result, confirming that frames and tracebacks are a big deal in this run of Pylint:</p>
<p><a href="https://rtpg.co/files/pylint/browser-profile-1.png">
  <img src="https://rtpg.co/files/pylint/browser-profile-1.png">
</a></p>
<p>My next step is to actually look at the frame objects. Because Python is reference coutned, things are held in memory because <em>something</em> is pointing at them, so I'm going to try and find out which one.</p>
<p>The wonderful <code>objgraph</code> library takes advantage of the Python memory manager to let you look at all objects still in memory, as well as lookup references to an object.</p>
<p>It's actually very amazing that you can do this. Just have an object reference and you can find everything <em>pointing towards</em> that reference (there's some asterisks around C extensions but close enough). This is just wonderful technology for debugging, and another thing that makes Python a joy to work with, thanks to how much of CPython's internals are exposed for these kinds of tools.</p>
<p>First I struggled to find objects because <code>objgraph.by_type('types.TracebackType')</code> wasn't finding any objects, despite me having records of having half a million of them. Turns out the name to use was <code>traceback</code>. Didn't quite nail down why...</p>
<p><code>random.choice(objgraph.by_type('traceback'))</code></p>
<p>Gives me a "random traceback". <code>objgraph.show_backrefs</code> will draw a graph of objects referencing this traceback. </p>
<p>So I put an <code>import pdb; pdb.set_trace()</code> into the for loop after 100 iterations instead of just raising an exception, and I started looking at random tracebacks </p>
<pre><code>def exclude(obj):
    return 'Pdb' in str(type(obj))

def f(depth=7):
    objgraph.show_backrefs([random.choice(objgraph.by_type('traceback'))],
                            max_depth=depth,
                            filter=lambda elt: not exclude(elt))
</code></pre>
<p>Originally I was just seeing a chain of tracebacks, so I went for a depth of 100 and....</p>
<p><a href="https://rtpg.co/files/pylint/traceback-stack.png">
 <img src="https://rtpg.co/files/pylint/traceback-stack.png">
    </a>
  So a bunch of tracebacks referencing other tracebacks. Cool. So many of them were like this.</p>
<p>I ended up just trying a bunch and failing, so I went after a secondary target: the <code>frame</code> types. These also seemed suspicious to me, and whatI end up finding is something like the following:</p>
<p><a href="https://rtpg.co/files/pylint/traceback-nest.png">
 <img src="https://rtpg.co/files/pylint/traceback-nest.png">
 </a></p>
<p>So tracebacks are holding onto frames (hence some similar cardinality). It's all a big mess, but the frames were at least pointing to lines of code. And this made me realize something silly: <em>I had never bothered to actually look at the data using up so much memory</em>. I totally should have just looked at the traceback objects themselves.</p>
<p>So for this I ended up doing this in the most convoluted way possible, which is look at the addresses in the <code>objgraph</code> image dump, seeing the memory addresses, searching the web for "how do I get a Python object from its address" and ending up finding the neat trick that I had noted:</p>
<pre><code>ipdb&gt; import ctypes
ipdb&gt; ctypes.cast(0x7f187d22b880, ctypes.py_object)
py_object(&lt;traceback object at 0x7f187d22b880&gt;)
ipdb&gt; ctypes.cast(0x7f187d22b880, ctypes.py_object).value
&lt;traceback object at 0x7f187d22b880&gt;
ipdb&gt; my_tb = ctypes.cast(0x7f187d22b880, ctypes.py_object).value
ipdb&gt; traceback.print_tb(my_tb, limit=20)
</code></pre>
<p>You can just tell Python "hey look at this memory, it's definitely at least a python object" and it will work.</p>
<p>Later I realized I had references to these objects through <code>objgraph</code> and could just use that.</p>
<p>It looks like Astroid is building up tracebacks through exception handling code a bit all over the place. I feel like most "cool tricks" are gotten to by forgetting about the easy way to do something, so I won't complain too much.</p>
<p>The traceback itself had a bunch of lines going through Astroid, the AST parser backing Pylint. Progress! Astroid does seem like a program that might hold onto a lot of stuff in memory as its parsing files.</p>
<p>I look around and end up seeing the following line in <code>astroid/manager.py</code></p>
<pre><code>except Exception as ex:
    raise exceptions.AstroidImportError(
    "Loading {modname} failed with:\n{error}",
    modname=modname,
    path=found_spec.location,
) from ex
</code></pre>
<p>"Aha!" Itell myself. This is what I'm lookign for! Some sort of exception chain that would generate super long tracebacks. Plus it's file parsing so there's reccursion, etc... <code>raise thing from other_thing</code> would chain them together!</p>
<p>I remove this <code>from ex</code> and .... nothing. Memory usage is still basically the same, and the tracebacks are still here.</p>
<p>I remember that exceptions hold their local bindings in the tracebacks, so the <code>ex</code> is still accessible. It can't be garbage colleceted just yet! </p>
<p>I do a bunch of refactorings to try and remove the <code>except</code> block for the most part, at least to avoid the reference to <code>ex</code>. Again, nothing!</p>
<p>For the life of me I can't get these tracebacks to garbage collect, despite there being no references to them. At least I thought this was the remaining reference.</p>
<p>Really though, this was all a red herring. I don't know if this actually had anything to do with my memory leak, because at one point I started noticing that <strong>I had no evidence</strong> backing up this entire exception chaining theory. Just a bunch of hunches, plus half a million tracebacks. </p>
<p>I started just kind of randomly looking at tracebacks looking for any extra clues. I tried going up the chain of references by hand but was getting nowhere. </p>
<p>Then I had the revelation: these tracebacks are all stacked on top of each other, but there will be a traceback that is above all these other ones. There is a traceback that doesn't just have another traceback pointing to it! </p>
<p>the references were through the <code>tb_next</code> property, as a simple chain. So I decided to look for the tracebacks at the end of their respective chains:</p>
<p><code>bottom_tbs = [tb for tb in objgraph.by_type('traceback') if tb.tb_next is None]</code></p>
<p>There's something magical about one-lining your way through 500,000 stack traces to find the one you actually care about.</p>
<p>This led me to what I was actually looking for: the reason why Python really wanted to keep these objects around in the first place.</p>
<p><a href="https://rtpg.co/files/pylint/traceback-filecache.png">
<img src="https://rtpg.co/files/pylint/traceback-filecache.png">
</a>
We had a file cache! </p>
<p>Basically Astroid will cache the results of loading a module, so that if some part of the code asks for the same module/file again, it can just provide the previous result. It will also reproduce the errors as well, by holding onto thrown exceptions.</p>
<p>This is where I made a bit of a judgement call. Caching the "error-ness" makes sense, but for me it's not at all worth holding onto the number of tracebacks our code is generating. </p>
<p>Instead I decided to throw away the exception, store a custom <code>Error</code> class, and then just re-building exceptions when they are asked for. The details can be found over at <a href="https://github.com/PyCQA/astroid/pull/837">this PR</a>, though it's not super interesting.</p>
<p>The end result: we went from 500MB memory usage to 100MB for the codebase I was working against</p>
<p><a href="https://rtpg.co/files/pylint/bp-post-fix.png">
    <img src="https://rtpg.co/files/pylint/bp-post-fix.png">
</a>
80% improvement's not bad, if I do say so myself.</p>
<p>The PR itself, I'm not sure if it will actually …</p></article></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://rtpg.co/2020/10/12/pylint-usage.html">https://rtpg.co/2020/10/12/pylint-usage.html</a></em></p>]]>
            </description>
            <link>https://rtpg.co/2020/10/12/pylint-usage.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24754397</guid>
            <pubDate>Mon, 12 Oct 2020 14:01:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Automated fractal generation based on user feedback]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24754292">thread link</a>) | @jackholt
<br/>
October 12, 2020 | https://thefractalproject.com/explore | <a href="https://web.archive.org/web/*/https://thefractalproject.com/explore">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://thefractalproject.com/explore</link>
            <guid isPermaLink="false">hacker-news-small-sites-24754292</guid>
            <pubDate>Mon, 12 Oct 2020 13:48:21 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Exposing covert surveillance backdoors in children’s smartwatches]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24754127">thread link</a>) | @chillax
<br/>
October 12, 2020 | https://www.mnemonic.no/blog/exposing-backdoor-consumer-products | <a href="https://web.archive.org/web/*/https://www.mnemonic.no/blog/exposing-backdoor-consumer-products">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
                                




<p><em>By Harrison Sand and Erlend Leiknes, Security Researchers, mnemonic</em></p>

<h2><strong>TL;DR</strong></h2>
<p>This blog post provides a technical description of how we discovered a backdoor in a smartwatch made for children. The device is a wearable smartphone, and the backdoor enables remote and covert surveillance through wiretapping, taking pictures, and location tracking.</p>
<p>The backdoor appears to be authored by the manufacturer of the watch, the Chinese technology company Qihoo 360. The watch is re-branded and sold to European and US markets by the Norwegian firm Xplora, who claim to have sold more than 350 000 smartwatches for children globally.</p>
<p>The backdoor itself is not a vulnerability. It is a feature set developed with intent, with function names that include remote snapshot, send location and wiretap. The backdoor is activated by sending SMS commands to the watch.</p>
<p>To trigger the backdoor, knowledge of a secret encryption key is required. Our research leads us to believe that the functionality cannot be used without knowledge of the key. However, as the technical run-through will show, there are several parties with the necessary access, including Xplora and Qihoo 360.</p>
<p>Qihoo 360 and the US government have a documented history, with accusations that include foreign espionage and imposing export sanctions.</p>
<p>All technical findings have been shared with Xplora and relevant authorities prior to publication.</p>

<p><em> Update 13.10.2020: Specified that the watch communicates directly with the Qihoo 360 domain 360.cn</em></p>

<h2><strong>Background</strong></h2>
<p>Children’s smartwatches are designed to enable parents to locate, track and communicate with their children. While they may look like a smartwatch, they are in fact and marketed as a child’s first phone.</p>
<p>The exact features and functions will vary amongst providers, but the primary functions typically include:</p>
<ul>
<li>SIM card with 3G/4G connectivity, including a phone number</li>
<li>GPS for location data</li>
<li>Microphone and speaker for two-way audio communication</li>
<li>Camera for still images or video communication</li>
<li>An accompanying app for parents to locate, track and communicate with the smartwatch and child</li>
</ul>
<p>Children’s smartwatches have had a checkered past, to put it lightly. In 2017, mnemonic worked together with the Norwegian Consumer Council on <a href="https://www.mnemonic.no/news/2017/watchout/" target="_blank" rel="noopener">the #WatchOut project</a>. The study investigated the data handling and security mechanisms of four children’s smartwatches that were popular at the time. The full report can be found <a href="https://www.forbrukerradet.no/undersokelse/2017/watchout/" target="_blank" rel="noopener">here</a>.</p>
<p>The investigation in general revealed serious gaps in security across the market. The most serious finding at the time was that it was effectively possible to take control over some of the watches. Hence, an adversary could find the location of a child, or communicate directly with the child through the watch without the parent noticing.</p>
<p>The project resulted, among other things, in:</p>
<ul>
<li><a href="https://www.bbc.com/news/technology-42030109" target="_blank" rel="noopener">Germany banning the watches and asking consumers to destroy the devices.</a></li>
<li>The Norwegian Consumer Council being invited to <a href="https://www.forbrukerradet.no/side/demand-safe-iot-products-for-children/" target="_blank" rel="noopener">present suggestions at the 2018 G20 meeting</a>, aiming to improve the security in connected/IoT devices targeted at children.</li>
<li><a href="https://www.mnemonic.no/news/2019/watchout-european-commission/" target="_blank" rel="noopener">The European Commission aiming to expand the EU’s Radio Equipment Directive</a> to adopt a new regulation that includes security requirements for IoT products. The proposal directly pointed to the findings from the #WatchOut project.</li>
</ul>
<p>Amongst the four watches included in the #WatchOut study was one produced by Xplora.</p>

<h2><strong>Who is Xplora? </strong></h2>
<p>Xplora is a line of children’s smartwatches sold by the Norwegian company XPLORA Mobile AS (and XPLORA Technologies AS outside of the Nordics). Their watches are sold throughout the Nordics, UK, Spain, Germany, France and Poland, and from mid-September 2020, the United States. On their website, they claim to have sold over <a href="https://xplora.no/" target="_blank" rel="noopener">350 000 devices</a> and have <a href="https://myxplora.co.uk/" target="_blank" rel="noopener">more than 400 000 users</a>, and in <a href="https://finansavisen.no/lordag/gruender-intervju/2019/09/27/7012425/ukjent-tronder-inntar-hollywood" target="_blank" rel="noopener">an interview with a local newspaper</a> in 2019, they state that they had a turnover of over $9 million USD last year.</p>
<p>Since the #WatchOut study, Xplora is emerging as one of the leaders in their geographical markets, and expanding into new territories.</p>
<p>With this in mind, we thought it was a worthwhile endeavor to look at their updated model, the Xplora 4. In our previous assessment, our scope and focus was limited to the communication between the watch and the local servers, and the parental application. This time around decided to take a deeper look at the watch itself.</p>



<div>
        <a href="https://www.mnemonic.no/globalassets/blog-bilder/picture-1-watch-in-box.jpg?width=1600&amp;quality=60">
    <figure>
        <img src="https://www.mnemonic.no/globalassets/blog-bilder/picture-1-watch-in-box.jpg?width=790&amp;factor=2&amp;quality=60" alt="" itemprop="image">
    </figure>
        </a>
</div>
<p><em>The Xplora 4</em></p>


<h2><strong>Accessing the watch software</strong></h2>
<p>To figure out how the Xplora worked, the first thing we needed to do was gain access to its software.</p>
<p>Browsing through the menus on the watch revealed it was running Android Nougat, and that it had a Qualcomm Snapdragon Wear 2100 processor. As with any Android-based device, getting access as root is a good place to start. Root access would allow us to browse through the file system and look at the code it was running. With root, we would also be able set up a man-in-the-middle proxy and inspect its network traffic and communication.</p>
<p>Enabling root access on an Android device usually starts with modifying the file system. If we wanted to do this, a USB was going to be helpful. Though after a quick look at the USB cable that came with the Xplora, it was apparent we needed something different.</p>



<div>
        <a href="https://www.mnemonic.no/globalassets/blog-bilder/picture-2-included-cable.jpg?width=1600&amp;quality=60">
    <figure>
        <img src="https://www.mnemonic.no/globalassets/blog-bilder/picture-2-included-cable.jpg?width=790&amp;factor=2&amp;quality=60" alt="" itemprop="image">
    </figure>
        </a>
</div>
<p><em>The Xplora 4 with provided USB cable missing two pins</em></p>

<p>Some light soldering and two data lines later, we had a functioning USB cable.</p>



<div>
        <a href="https://www.mnemonic.no/globalassets/blog-bilder/picture-3-custom-cable.jpg?width=1600&amp;quality=60">
    <figure>
        <img src="https://www.mnemonic.no/globalassets/blog-bilder/picture-3-custom-cable.jpg?width=790&amp;factor=2&amp;quality=60" alt="" itemprop="image">
    </figure>
        </a>
</div>
<p><em>Modified USB cable</em></p>

<p>Qualcomm chipsets have an “EDL” mode, short for ‘emergency download’. Basically, this is a feature that allows manufacturers to flash new firmware to a device. It also conveniently allows you to download everything that is stored in the device’s flash memory. Using EDL mode we could take a snapshot of the device’s storage, inspect its contents, and make the necessary modifications to gain root.</p>
<p>We found that holding both buttons on the side of the watch forced it into Android’s fastboot mode. From there you could issue the “fastboot oem edl” command to enter EDL mode. Alternatively, there are special USB cables that can be used to accomplish the same task. A quick Google search for “edl cable” returns a number of options.</p>
<p>We used a somewhat interesting piece of software called Miracle Box that allows you to upload and download data through Qualcomm’s EDL interface.</p>



<div>
        <a href="https://www.mnemonic.no/globalassets/blog-bilder/picture-4.png?width=1600&amp;quality=60">
    <figure>
        <img src="https://www.mnemonic.no/globalassets/blog-bilder/picture-4.png?width=790&amp;factor=2&amp;quality=60" alt="" itemprop="image">
    </figure>
        </a>
</div>
<p><em>Screenshot from Miracle Box</em></p>

<p>After reading the flash storage, Miracle Box saves each partition as an individual file. These partitions can be easily modified in Linux with the standard mount utilities. Editing the build.prop file in the system partition allowed us to enable the Android Debug Bridge (ADB). It was as simple as uncommenting a configuration option left in by the watch developers:</p>
<p><code>#Set composition for USB</code><br><code>persist.sys.usb.config=diag,serial_smd,rmnet_qti_bam,adb</code></p>
<p>We uploaded the newly modified system partition, booted up the watch, and root!</p>



<div>
        <a href="https://www.mnemonic.no/globalassets/blog-bilder/picture-5.png?width=1600&amp;quality=60">
    <figure>
        <img src="https://www.mnemonic.no/globalassets/blog-bilder/picture-5.png?width=790&amp;factor=2&amp;quality=60" alt="" itemprop="image">
    </figure>
        </a>
</div>
<p><em>Command Prompt showing root access</em></p>

<h2><strong>Investigating the apps</strong></h2>
<p>The next step was to start looking through the apps installed on the watch. Listing all packages with the “pm list packages” command returned a total of 90 applications. As you would expect, most were related to the Android OS or Qualcomm.</p>
<p>However, 19 of the apps were authored by the original equipment manufacturer Qihoo 360, the earlier mentioned technology company based in China.</p>
<p>It was a bit surprising to us that none of applications on the watch appeared to be authored by Xplora &nbsp;themselves. After some light research we discovered a nearly identical watch for sale in China, sold directly by Qihoo 360.</p>



<div>
        <a href="https://www.mnemonic.no/globalassets/blog-bilder/picture-6.png?width=1600&amp;quality=60">
    <figure>
        <img src="https://www.mnemonic.no/globalassets/blog-bilder/picture-6.png?width=790&amp;factor=2&amp;quality=60" alt="" itemprop="image">
    </figure>
        </a>
</div>
<p><em>Screenshot of website selling a nearly identical watch in China</em></p>

<p>The watch sold directly from Qihoo 360 is branded as the “360 Kids Guard”. Googling this term results in pages of articles on the product dating back as far as 2013, and the watch brand is also mentioned in past Securities and Exchange Commission (SEC) filings for Qihoo 360 Technology Co Ltd.</p>
<p>A browse through the Terms of Service for the Xplora App also makes several references to a company named “360 Kids Guard Co., Ltd.”, including them being a data processor:</p>



<div>
        <a href="https://www.mnemonic.no/globalassets/blog-bilder/picture-7.png?width=1600&amp;quality=60">
    <figure>
        <img src="https://www.mnemonic.no/globalassets/blog-bilder/picture-7.png?width=790&amp;factor=2&amp;quality=60" alt="" itemprop="image">
    </figure>
        </a>
</div>
<p><a href="https://support.myxplora.com/hc/en-gb/articles/360003182654-TERMS-OF-SERVICE-XPLORA-APP" target="_blank" rel="noopener"><em>Terms of Service for the Xplora App</em></a></p>

<p>This led us to the conclusion that while Xplora had developed their own backend server infrastructure and parental companion app, the majority of the watch itself was developed by Qihoo 360.</p>

<p><em>Qihoo 360</em></p>
<p>Qihoo 360 and the US government have a documented history, with accusations that include foreign espionage and imposing export sanctions.</p>
<p>In June 2020, Qihoo 360’s Chinese and UK business entities (Qihoo 360 Technology Company and Qihoo 360 Technology Co. Ltd. respectively) were added to an export sanctions list by the US Department of Commerce, thereby placing restrictions on the companies from using exported US technology in their products. As documented in the official records from <a href="https://www.federalregister.gov/documents/2020/06/05/2020-10869/addition-of-entities-to-the-entity-list-revision-of-certain-entries-on-the-entity-list" target="_blank" rel="noopener">the Office of the Federal Register</a>, it’s not revealed exactly why they were placed on the list, but the official wording is “there is reasonable cause to believe that these entities pose a significant risk of becoming involved in activities—the procurement of commodities and technologies for military end-use in China—that are contrary to the national security interests of the United States.”</p>
<p>Meanwhile in March 2020, <a href="https://blogs.360.cn/post/APT-C-39_CIA_EN.html" target="_blank" rel="noopener">Qihoo 360 published findings accusing the CIA of an 11-year espionage campaign against several Chinese industries</a>. The report cites evidence of the CIA hacking toolset "Vault 7" that was leaked in 2017.</p>

<h2><strong>A backdoor for covert surveillance?</strong></h2>
<p>After poking around a bit, we noticed a suspicious looking package <em>APTly</em> named “Persistent Connection Service”. The application starts automatically at boot and iterates through all applications installed on the watch. As it goes through each application, it creates a list of …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.mnemonic.no/blog/exposing-backdoor-consumer-products">https://www.mnemonic.no/blog/exposing-backdoor-consumer-products</a></em></p>]]>
            </description>
            <link>https://www.mnemonic.no/blog/exposing-backdoor-consumer-products</link>
            <guid isPermaLink="false">hacker-news-small-sites-24754127</guid>
            <pubDate>Mon, 12 Oct 2020 13:29:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Giving up on wlroots-rs (2019)]]>
            </title>
            <description>
<![CDATA[
Score 53 | Comments 29 (<a href="https://news.ycombinator.com/item?id=24753626">thread link</a>) | @dgellow
<br/>
October 12, 2020 | http://way-cooler.org/blog/2019/04/29/rewriting-way-cooler-in-c.html | <a href="https://web.archive.org/web/*/http://way-cooler.org/blog/2019/04/29/rewriting-way-cooler-in-c.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
      <section>
        

<p><a href="https://github.com/way-cooler/way-cooler">Way Cooler</a> is a Wayland compositor
that was written in Rust using <a href="https://github.com/Cloudef/wlc">wlc</a>. Since
<a href="https://github.com/way-cooler/way-cooler/pull/516">last April</a> I’ve been
rewriting it to use <a href="https://github.com/swaywm/wlroots">wlroots</a>. In order to do
that however I had to wrap the library so that it could be used in Rust. I
worked on <a href="https://github.com/swaywm/wlroots-rs">wlroots-rs</a> and put Way Cooler
on the back burner for a long time. After over 1,000 commits I’m giving up on it.</p>

<h2 id="problems-with-wlroots-rs-in-detail">Problems with wlroots-rs in detail</h2>

<h3 id="ownership-with-handles">Ownership with handles</h3>

<p>wlroots-rs was going to be the safe Rust wrapper for the very complicated
<a href="https://github.com/swaywm/wlroots">wlroots library</a>. wlroots implements large
parts of a Wayland compositor and provides pluggable modules that most
compositors will want.</p>

<p>The biggest problem when wrapping wlroots was defining the ownership model of
the objects that wlroots exposes. To demonstrate this I will focus on a single
resource that illustrates the problem: an output.</p>

<p>A Wayland “output” is the resource that represents a display device. Commonly
this means it handles a computer monitor. This resource could disappear at any
time in the life cycle of the application. This is easy enough to imagine: all
it takes is a yank of the display’s power cord and the monitor goes away. This
is basically the exact opposite of the Rust memory model. Rust likes to own
things and give compile-time defined borrows of that memory. This is runtime
lifetime management that must be managed in some way.</p>

<p>You cannot simply define it like so:</p>

<div><div><pre><code><span>struct</span> <span>Output</span> <span>{</span>
    <span>output_c_ptr</span><span>:</span> <span>*</span><span>mut</span> <span>wlr_output</span>
<span>}</span>

<span>impl</span> <span>Output</span> <span>{</span>
    <span>// Forward all the calls to the c pointer</span>
<span>}</span>
</code></pre></div></div>

<p>If this was done then it would be possible to leak the memory using <code>Box::leak</code>
and say that an output will live forever – even though it can’t.</p>

<p>The simplest way to achieve this safely would be to use reference counted
pointers and expose only weak pointers. Here is a (fake) example of how this
could look:</p>

<div><div><pre><code><span>// This is a _very_ simple example for clarity.</span>
<span>// wlroots-rs is not implemented like this.</span>

<span>struct</span> <span>RealOutput</span> <span>{</span>
    <span>lifeline</span><span>:</span> <span>Rc</span><span>&lt;*</span><span>mut</span> <span>wlr_output</span><span>&gt;</span>
<span>}</span>

<span>struct</span> <span>Output</span> <span>{</span>
    <span>lifeline</span><span>:</span> <span>Weak</span><span>&lt;*</span><span>mut</span> <span>wlr_output</span><span>&gt;</span>
<span>}</span>

<span>impl</span> <span>Output</span> <span>{</span>
    <span>/// Changes the mode (resolution) of an output.</span>
    <span>pub</span> <span>fn</span> <span>change_mode</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>,</span> <span>mode</span><span>:</span> <span>Mode</span><span>)</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>(),</span> <span>()</span><span>&gt;</span> <span>{</span>
        <span>unsafe</span> <span>{</span>
            <span>let</span> <span>output_ptr</span> <span>=</span> <span>lifeline</span><span>.upgrade</span><span>()</span><span>.ok_or</span><span>(())</span><span>?</span><span>;</span>
            <span>wlr_output_change_mode</span><span>(</span><span>output_ptr</span><span>,</span> <span>mode</span><span>.into</span><span>());</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>This naive style implementation could work, however it would cause a lot of
branching code. Each call to wlroots will require a check to see if the handle
has been dropped, even though it almost certainly has not been dropped (it can
only be dropped between event callbacks, wlroots/Wayland is callback based).
This means there will be unnecessary paths (that are hopefully marked cold) that
either panic or return an error.</p>

<p>This is obviously not wanted so the next best thing is define a range where it
is safe to use the reference to the resource: i.e. we want to be able to define
a lifetime for a code block. This leads us to the <em>actual</em> design of wlroots-rs,
using handles (note that this <em>is</em> actual code):</p>

<div><div><pre><code><span>/// A non-owned reference counted handle to a resource.</span>
<span>///</span>
<span>/// The resource could be destroyed at any time, it depends on the resource.</span>
<span>///</span>
<span>/// For example an output is destroyed when its physical output is</span>
<span>/// "disconnected" on DRM. "disconnected" depends on the output (e.g. sometimes</span>
<span>/// turning it off counts as "disconnected").</span>
<span>/// However, when the backend is instead headless an output lives until it is</span>
<span>/// destroyed explicitly by the library user.</span>
<span>///</span>
<span>/// Some resources are completely controlled by the user. For example although</span>
<span>/// you refer to a `Seat` with handles it is only destroyed when you call the</span>
<span>/// special destroy method on the seat handle.</span>
<span>///</span>
<span>/// Please refer to the specific resource documentation for a description of</span>
<span>/// the lifetime particular to that resource.</span>
<span>pub</span> <span>struct</span> <span>Handle</span><span>&lt;</span><span>D</span><span>:</span> <span>Clone</span><span>,</span> <span>T</span><span>,</span> <span>W</span><span>:</span> <span>Handleable</span><span>&lt;</span><span>D</span><span>,</span> <span>T</span><span>&gt;</span> <span>+</span> <span>Sized</span><span>&gt;</span> <span>{</span>
    <span>pub</span><span>(</span><span>crate</span><span>)</span> <span>ptr</span><span>:</span> <span>NonNull</span><span>&lt;</span><span>T</span><span>&gt;</span><span>,</span>
    <span>pub</span><span>(</span><span>crate</span><span>)</span> <span>handle</span><span>:</span> <span>Weak</span><span>&lt;</span><span>Cell</span><span>&lt;</span><span>bool</span><span>&gt;&gt;</span><span>,</span>
    <span>pub</span><span>(</span><span>crate</span><span>)</span> <span>_</span><span>marker</span><span>:</span> <span>PhantomData</span><span>&lt;</span><span>W</span><span>&gt;</span><span>,</span>
    <span>pub</span><span>(</span><span>crate</span><span>)</span> <span>data</span><span>:</span> <span>Option</span><span>&lt;</span><span>D</span><span>&gt;</span>
<span>}</span>


<span>impl</span><span>&lt;</span><span>D</span><span>:</span> <span>Clone</span><span>,</span> <span>T</span><span>,</span> <span>W</span><span>:</span> <span>Handleable</span><span>&lt;</span><span>D</span><span>,</span> <span>T</span><span>&gt;&gt;</span> <span>Handle</span><span>&lt;</span><span>D</span><span>,</span> <span>T</span><span>,</span> <span>W</span><span>&gt;</span> <span>{</span>
    <span>/// Upgrades a handle to a reference to the backing object.</span>
    <span>///</span>
    <span>/// # Safety</span>
    <span>/// This returns an "owned" value when really you don't own it all.</span>
    <span>/// Depending on the type, it's possible that the resource will be freed</span>
    <span>/// once this returned value is dropped, causing a possible double free.</span>
    <span>/// Potentially it instead is just unbound, it depends on the resource.</span>
    <span>///</span>
    <span>/// Regardless, you should not use this interface. Use the `run` method.</span>
    <span>#[doc(hidden)]</span>
    <span>pub</span> <span>unsafe</span> <span>fn</span> <span>upgrade</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>HandleResult</span><span>&lt;</span><span>W</span><span>&gt;</span> <span>{</span>
        <span>self</span><span>.handle</span><span>.upgrade</span><span>()</span>
            <span>.ok_or</span><span>(</span><span>HandleErr</span><span>::</span><span>AlreadyDropped</span><span>)</span>
            <span>// NOTE</span>
            <span>// We drop the Rc here because having two would allow a dangling</span>
            <span>// pointer to exist!</span>
            <span>.and_then</span><span>(|</span><span>check</span><span>|</span> <span>{</span>
                <span>if</span> <span>check</span><span>.get</span><span>()</span> <span>{</span>
                    <span>return</span> <span>Err</span><span>(</span><span>HandleErr</span><span>::</span><span>AlreadyBorrowed</span><span>)</span>
                <span>}</span>
                <span>let</span> <span>wrapper_obj</span> <span>=</span> <span>W</span><span>::</span><span>from_handle</span><span>(</span><span>self</span><span>)</span><span>?</span><span>;</span>
                <span>check</span><span>.set</span><span>(</span><span>true</span><span>);</span>
                <span>Ok</span><span>(</span><span>wrapper_obj</span><span>)</span>
            <span>})</span>
    <span>}</span>

    <span>/// Run a function with a reference to the resource if its still alive.</span>
    <span>///</span>
    <span>/// Returns the result of the function, if successful.</span>
    <span>///</span>
    <span>/// # Safety</span>
    <span>/// By enforcing a rather harsh limit on the lifetime of the resource</span>
    <span>/// to a short lived scope of an anonymous function,</span>
    <span>/// this function ensures the resource does not live longer</span>
    <span>/// than it exists.</span>
    <span>///</span>
    <span>/// # Panics</span>
    <span>/// This function will panic if multiple mutable borrows are detected.</span>
    <span>/// This will happen if you call `upgrade` directly within this callback,</span>
    <span>/// or if a handle to the same resource was upgraded some where else up the</span>
    <span>/// stack.</span>
    <span>pub</span> <span>fn</span> <span>run</span><span>&lt;</span><span>F</span><span>,</span> <span>R</span><span>&gt;</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>runner</span><span>:</span> <span>F</span><span>)</span> <span>-&gt;</span> <span>HandleResult</span><span>&lt;</span><span>R</span><span>&gt;</span>
    <span>where</span>
        <span>F</span><span>:</span> <span>FnOnce</span><span>(</span><span>&amp;</span><span>mut</span> <span>W</span><span>)</span> <span>-&gt;</span> <span>R</span>
    <span>{</span>
        <span>let</span> <span>mut</span> <span>wrapped_obj</span> <span>=</span> <span>unsafe</span> <span>{</span> <span>self</span><span>.upgrade</span><span>()</span><span>?</span> <span>};</span>
        <span>// We catch panics here to deal with an extreme edge case.</span>
        <span>//</span>
        <span>// If the library user catches panics from the `run` function then their</span>
        <span>// resource used flag will still be set to `true` when it should be set</span>
        <span>// to `false`.</span>
        <span>let</span> <span>res</span> <span>=</span> <span>panic</span><span>::</span><span>catch_unwind</span><span>(</span><span>panic</span><span>::</span><span>AssertUnwindSafe</span><span>(||</span> <span>runner</span><span>(</span><span>&amp;</span><span>mut</span> <span>wrapped_obj</span><span>)));</span>
        <span>if</span> <span>let</span> <span>Some</span><span>(</span><span>check</span><span>)</span> <span>=</span> <span>self</span><span>.handle</span><span>.upgrade</span><span>()</span> <span>{</span>
            <span>// Sanity check that it hasn't been tampered with. If so, we should</span>
            <span>// just panic. If we are currently</span>
            <span>// panicking this will abort.</span>
            <span>if</span> <span>!</span><span>check</span><span>.get</span><span>()</span> <span>{</span>
                <span>wlr_log!</span><span>(</span><span>WLR_ERROR</span><span>,</span> <span>"After running callback, mutable lock was false"</span><span>);</span>
                <span>panic!</span><span>(</span><span>"Lock in incorrect state!"</span><span>);</span>
            <span>}</span>
            <span>check</span><span>.set</span><span>(</span><span>false</span><span>);</span>
        <span>}</span>
        <span>match</span> <span>res</span> <span>{</span>
            <span>Ok</span><span>(</span><span>res</span><span>)</span> <span>=&gt;</span> <span>Ok</span><span>(</span><span>res</span><span>),</span>
            <span>Err</span><span>(</span><span>err</span><span>)</span> <span>=&gt;</span> <span>panic</span><span>::</span><span>resume_unwind</span><span>(</span><span>err</span><span>)</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>The full implementation can be found
<a href="https://github.com/swaywm/wlroots-rs/blob/91a18bd541a6ec565d6ef78d18ee5cc6a413f684/src/utils/handle.rs">here</a>,
its far too long and complicated to paste into a blog post.</p>

<p>This code is very complicated, which isn’t what you want for the defining
abstraction of your safe library. As far as I’m aware though it is correct. It’s
also incredibly ugly to use in practice:</p>

<div><div><pre><code><span>fn</span> <span>some_wlroots_callback</span><span>(</span><span>output_handle</span><span>:</span> <span>OutputHandle</span><span>,</span>
                         <span>surface_handle</span><span>:</span> <span>SurfaceHandle</span><span>)</span> <span>{</span>
    <span>output_handle</span><span>.run</span><span>(|</span><span>output</span><span>|</span> <span>{</span>
        <span>surface_handle</span><span>.run</span><span>(|</span><span>surface</span><span>|</span> <span>{</span>
            <span>// maybe some more nested layers...</span>
        <span>})</span><span>.unwrap</span><span>()</span>
    <span>})</span><span>.unwrap</span><span>()</span>
<span>}</span>
</code></pre></div></div>

<p>To avoid this callback hell, I defined two macros to help: <a href="https://github.com/swaywm/wlroots-rs/blob/91a18bd541a6ec565d6ef78d18ee5cc6a413f684/src/macros.rs#L355">one normal
macro</a>
and a very complicated <a href="https://github.com/swaywm/wlroots-rs/blob/91a18bd541a6ec565d6ef78d18ee5cc6a413f684/wlroots-dehandle/src/lib.rs">procedural
macro</a>.
Here’s what the procedural macro looks like:</p>

<div><div><pre><code><span>// This does the same thing as the above code, but nicer.</span>
<span>#[wlroots_dehandle]</span>
<span>fn</span> <span>some_wlroots_callback</span><span>(</span><span>output_handle</span><span>:</span> <span>OutputHandle</span><span>,</span>
                         <span>surface_handle</span><span>:</span> <span>SurfaceHandle</span><span>)</span> <span>{</span>
    <span>#[dehandle]</span> <span>let</span> <span>output</span> <span>=</span> <span>output</span><span>;</span>
    <span>#[dehandle]</span> <span>let</span> <span>surface</span> <span>=</span> <span>surface_handle</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>This expands out the lines to use the non-proc macro, which in turn becomes the
callback hell mess. The only problem with this scheme is now that the control
flow is all wrong:</p>

<div><div><pre><code><span>// this is actual code I had to write (simplified)</span>
<span>for</span> <span>shell</span> <span>in</span> <span>mapped_shells</span> <span>{</span>
    <span>#[dehandle]</span>
    <span>let</span> <span>surface</span> <span>=</span> <span>shell</span><span>.surface</span><span>();</span>
    <span>// If not ready to render, don't render it yet</span>
    <span>if</span> <span>!</span><span>surface</span><span>.is_mapped</span><span>()</span> <span>{</span>
        <span>// What we _want_ to write</span>
        <span>// break</span>

        <span>// What we have to write because this is actually in a callback...</span>
        <span>return</span> <span>// actually goes to the next shell in the mapped_shells...</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>So this solution “works” but it’s not great. Ultimately it’s very confusing for
users. It was too confusing for <a href="https://puri.sm/posts/end-of-year-librem-5-update/">purism to get
working</a> (this
<a href="https://www.youtube.com/watch?v=oX5yVyLbLZE">video</a> was very painful for me to
watch - the library was unusable). <a href="https://github.com/buffet/kiwmi">Kiwmi</a>
initially tried using wlroots-rs but swiftly gave up and used wlroots itself.</p>

<h3 id="the-sheer-amount-of-api-to-wrap">The sheer amount of API to wrap</h3>

<p>Currently there is 11 <strong>THOUSAND</strong> lines of Rust in wlroots-rs. <em>All</em> of this
code is just wrapper code, it doesn’t do anything but memory management. This
isn’t just repeated code either, I defined a <a href="https://github.com/swaywm/wlroots-rs/blob/91a18bd541a6ec565d6ef78d18ee5cc6a413f684/src/macros.rs#L201">very complicated and ugly
macro</a>
to try to make it easier.</p>

<p>This wrapper code doesn’t cover even half of the API surface of wlroots. It’s
exhausting writing wlroots-rs code, memory management is constantly on my mind
because that’s the whole purpose of the library. It’s a very boring problem and
it’s always at odds with usability - see the motivation for the escape from
callback hell described above.</p>

<p>To do all of this, and then go write Way Cooler, already a big undertaking, is too
much for me to commit to. When the benefit at the end of the day is just so I
don’t have to write C, that doesn’t really make it worth it. If I got this out
of the box by simply linking to the library, like I can in C++, then it would be
much more tenable.</p>

<p>I can always just use unsafe bindings to wlroots, just like I would with any
other language. However, the <em>entire point</em> of Rust is that it’s safe. Doing
that is not an option because at that point you lose the entire …</p></section></div></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://way-cooler.org/blog/2019/04/29/rewriting-way-cooler-in-c.html">http://way-cooler.org/blog/2019/04/29/rewriting-way-cooler-in-c.html</a></em></p>]]>
            </description>
            <link>http://way-cooler.org/blog/2019/04/29/rewriting-way-cooler-in-c.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24753626</guid>
            <pubDate>Mon, 12 Oct 2020 12:17:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Microsoft is not rebasing Windows to Linux]]>
            </title>
            <description>
<![CDATA[
Score 246 | Comments 299 (<a href="https://news.ycombinator.com/item?id=24753564">thread link</a>) | @sunbum
<br/>
October 12, 2020 | https://boxofcables.dev/no-microsoft-is-not-rebasing-windows-to-linux/ | <a href="https://web.archive.org/web/*/https://boxofcables.dev/no-microsoft-is-not-rebasing-windows-to-linux/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://boxofcables.dev/content/images/size/w300/2020/10/Screenshot-2020-10-11-184607.png 300w,
                            https://boxofcables.dev/content/images/size/w600/2020/10/Screenshot-2020-10-11-184607.png 600w,
                            https://boxofcables.dev/content/images/size/w1000/2020/10/Screenshot-2020-10-11-184607.png 1000w,
                            https://boxofcables.dev/content/images/size/w2000/2020/10/Screenshot-2020-10-11-184607.png 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://boxofcables.dev/content/images/size/w2000/2020/10/Screenshot-2020-10-11-184607.png" alt="No, Microsoft is not rebasing Windows to Linux">
            </figure>

            <section>
                <div>
                    <p>There have been a <a href="http://esr.ibiblio.org/?p=8764">string</a> <a href="https://www.zdnet.com/article/linux-based-windows-makes-perfect-sense/">of</a> <a href="https://www.techrepublic.com/article/could-microsoft-be-en-route-to-dumping-windows-in-favor-of-linux/?ftag=COS-05-10aaa0g&amp;taid=5f814f0d8911f90001eb9436&amp;utm_campaign=trueAnthem:+Twitter+Card&amp;utm_medium=trueAnthemCard&amp;utm_source=twitterCard">pieces</a> wondering aloud whether Microsoft is going to rebase Windows on the Linux kernel in the future.</p><p>I have a unique perspective on Microsoft's Linux involvement. I help deliver Ubuntu on Windows Subsystem for Linux in my job on the Desktop team at Canonical. I regularly talk to many Microsoft employees working on Linux and various open source projects. I also get briefings on Microsoft products and strategy as an MVP. Note though, these are my personal thoughts, and I am not sharing anything here that is not public.</p><p>I have become somewhat of an intermediary between the Microsoft and Linux communities. It is something I am glad to do. There are creative, kind, and fascinating people in both communities. Interesting things happen when the lines between them blur. Fostering cross-pollination will make computing better for everyone.</p><figure><blockquote data-width="550"><p lang="en" dir="ltr">WSL does not by default do unattended upgrades, there is no traditional init like systemd to do them in the background. You can set a Basic Task in Windows Task Scheduler to run apt update as root on login, then add an action to that task that runs apt upgrade: <a href="https://t.co/jvaJIwfaqs">pic.twitter.com/jvaJIwfaqs</a></p>— Hayden Barnes (@unixterminal) <a href="https://twitter.com/unixterminal/status/1314688641877315586?ref_src=twsrc%5Etfw">October 9, 2020</a></blockquote>

<figcaption>Using Windows Scheduler to run automated updates on Ubuntu on WSL</figcaption></figure><p>I am deeply skeptical of the notion that Microsoft is going to shift the core of the Windows operating system to the Linux kernel, for both product and engineering reasons, any time soon. Let me explain why.</p><p>First, the reasons why I think this fantasy this keeps cropping up on Slashdot and Hacker News.</p><ol><li>It is effective clickbait.</li><li>It is a long-held fantasy for open source and Linux advocates.</li><li>The role of Windows is changing in a world where the pie of operating systems powering devices is now shared with Android, iOS, macOS, Chrome OS, and Ubuntu.</li><li>The perceived plausibility of something like this is increasing, with things like Linux usage on Azure and WSL. The Overton Window has shifted.</li></ol><figure><blockquote data-width="550"><p lang="en" dir="ltr">Windows and Linux exist is an cosmic duality. Two opposing yet complimentary forces, we cannot have one without the other. Knowing how to blend the two is to conjure magic. <a href="https://t.co/Eoh22Rn4Fn">https://t.co/Eoh22Rn4Fn</a></p>— Hayden Barnes (@unixterminal) <a href="https://twitter.com/unixterminal/status/1276895377430634498?ref_src=twsrc%5Etfw">June 27, 2020</a></blockquote>

<figcaption>"Competition with Windows and macOS makes Linux a better operating system."</figcaption></figure><p>The reasons I do not think Windows will be rebasing to a Linux kernel are as followed:</p><ol><li>The NT kernel in Windows offers a degree of backward compatibility, long-term support, and driver availability that Linux is just now approaching. It would cost millions of dollars to replicate these in Linux. Microsoft has plenty of paying customers to continue supporting Windows as-is, some for decades. Windows is not a drain on Microsoft that would justify the expense of rebasing to Linux for savings, as <a href="http://esr.ibiblio.org/?p=8764">Raymond</a> has argued. <a href="https://www.arcanoae.com/">Lots</a> of <a href="https://www.oracle.com/solaris/solaris11/">profitable</a> <a href="https://vmssoftware.com/">companies</a> <a href="https://www.xinuos.com/">exist</a> solely to service existing operating systems. Even if it came down to rebasing to Linux, it could result in an undesirable kernel monoculture. Competition with Windows and macOS makes Linux a better operating system. The more desirable outcome is that open source innovation continues spreading across and between <em>all</em> operating systems. That Windows and Linux open source contributors share the best of both ecosystems.</li><li>It is unclear if the Windows user space could even be rebased from NT to the Linux kernel and maintain the compatibility that Windows is known for, specifically what enterprise clients with mission-critical applications are paying to get. Windows does not have the same strict division between kernel space and user space that Linux does. The NT kernel has about 400 documented syscalls plus about 1700 documented Win32 API calls. That would be a huge amount of re-implementation to ensure precise compatibility that Windows developers and their tools expect. It goes beyond contributing some fixes to Wine. Linux only has 313 syscalls on amd64 and, even then, part of the reason Microsoft switched from a syscall translation layer in WSL 1 to a virtualized kernel in WSL 2 is because re-implementing the dozens of non-standard ways developers had come to exploit the Linux ABI was <a href="https://github.com/microsoft/WSL/discussions/4022">a pain in the ass</a>. It is one thing to provide a NT-related compatibility layer for <a href="https://cloudblogs.microsoft.com/sqlserver/2016/12/16/sql-server-on-linux-how-introduction/">SQL Server on Linux</a>, which Microsoft owns, it is another to guarantee it for millions of other developer's applications.</li><li>Microsoft has doubled down on Windows in recent years. Microsoft has invested in usability, new features, and performance improvements for Windows 10 that have paid off. These improvements, <a href="https://www.windowscentral.com/what-are-microsoft-precision-touchpad-drivers">collaborations with OEMs</a>, and the Surface <a href="https://thejournal.com/articles/2020/01/29/traditional-pcs-seeing-resurgence-after-7-years-of-decline.aspx">helped revitalize</a> a PC market that at one point <a href="https://www.usatoday.com/story/tech/2013/03/06/apple-google-microsoft-hewlett-packard-dell-ipad-iphone-android-ios-samsung-galaxy/1946325/">looked in danger of falling</a> to iPads and Chromebooks. Microsoft has been working hard to make Windows an excellent development platform, with projects like Windows Terminal, <a href="https://github.com/microsoft/PowerToys">PowerToys</a>, Windows Subsystem for Linux, and Visual Studio 2019. The Insiders program is <a href="https://www.zdnet.com/article/microsoft-weve-got-10-million-insiders-testing-windows-10-to-keep-bugs-at-bay/">remarkably successful</a>. Windows powers most of the Surface device lineup, a key focus of Microsoft right now. Internal reorganizations in 2018 and <a href="https://www.geekwire.com/2020/microsoft-brings-windows-ux-surface-teams-together-exec-panos-panay-latest-reorg/">2020</a> show that the future of the Surface and Windows are now inextricably linked. Windows powers the Xbox and we are in a <a href="https://www.pcgamer.com/the-state-of-pc-gaming-in-2020/">resurgence</a> of mostly Windows-based PC gaming. Microsoft also has ideas for <a href="https://www.windowscentral.com/windows-10x">Windows 10X</a>, the next operating system concept following Windows 10 (that I think we will <a href="https://www.windowscentral.com/windows-10x-out-box-experienced-shown-leaked-video">get in gradual pieces</a>), with future hardware like the <a href="https://www.techradar.com/news/microsoft-confirms-its-dual-screen-surface-neo-has-been-delayed">Surface Neo</a> in mind.</li><li>Microsoft does not have to rebase to Linux to stay relevant. Microsoft is aware of a changing device landscape after losing on Windows in mobile. They recognize a more diverse set of operating systems and platforms are powering the computing devices we use, which now includes Android, Ubuntu, iOS, macOS, Alexa, Chrome OS, and not just x86 but ARM. Microsoft has shown they are able to adapt by making relevant products and services available on those other platforms while simultaneously keeping their own platform, Windows, competitive in its traditional footholds. Microsoft is now driving innovation on Android in the mobile space, not just with ported Office apps, but a home screen launcher, and now the Surface Duo. On Ubuntu, they offer their tools that would make sense for Linux workstations, such as Code, .NET, Azure tools, Teams, PowerShell, Sysinternals for Linux, and soon Edge, which comes with Microsoft's custom <a href="https://docs.microsoft.com/en-us/microsoft-edge/devtools-guide">web dev tools</a>. Do you want to run Ubuntu on Azure? Microsoft has you covered and works closely with Canonical to make that a wonderful experience. </li></ol><p>The much more interesting question is not whether Microsoft is planning to rebase Windows to Linux, but how far Windows will go on open source. We are already seeing components like <a href="https://github.com/Microsoft/Terminal">Windows Terminal</a>, PowerToys, and other Windows <a href="https://devblogs.microsoft.com/commandline/windows-command-line-introducing-the-windows-pseudo-console-conpty/">components</a> either begin life as or go open source. The more logical and realistic goal here is a continued opening of Windows components and the <a href="https://github.com/microsoft/WinDev">Windows development</a> process, even beyond the Insiders program, in a way that benefits other operating systems.</p><p>After all, Windows has already adopted the Ubuntu release cadence, of six-month releases in April and October with set releases getting extended support. Windows 2004 and Ubuntu 20.04 landed within days of each other. I kid.</p><p>Raymond is correct in one key part of his blog. I do think the era of the desktop OS wars is ending. We are entering a new era where your high-end workstation will run multiple operating systems simultaneously, like runtimes, and not necessarily all locally. The choice will not really be Windows or Linux, it will be whether you boot Hyper-V or KVM first, and Windows and Ubuntu stacks will be tuned to run well on the other. Microsoft contributes patches to the Linux kernel to <a href="https://www.zdnet.com/article/microsoft-these-patches-aim-to-make-linux-run-as-root-partition-on-hyper-v/">run Linux well on Hyper-V</a> and tweaks Windows to <a href="https://www.theregister.com/2019/03/11/windows_10_on_kvm/">play nicely on KVM</a>.</p><p>The best parts of Ubuntu will come to Windows and the best open source parts of Windows will come to Ubuntu, thanks to an increasing trend <a href="https://boxofcables.dev/microsoft-and-open-source-an-unofficial-timeline/">towards open source across Microsoft</a>.</p><figure><blockquote data-width="550"><p lang="en" dir="ltr">Check out this sneak preview of our work on adding Linux GUI application support to WSL! <a href="https://t.co/lcx4WWwxTo">pic.twitter.com/lcx4WWwxTo</a></p>— Craig Loewen (@craigaloewen) <a href="https://twitter.com/craigaloewen/status/1308452901266751488?ref_src=twsrc%5Etfw">September 22, 2020</a></blockquote>

</figure><p>The key take-away though is that <a href="https://boxofcables.dev/microsoft-and-open-source-an-unofficial-timeline/">open source has won</a>. And Raymond can be proud of helping to <a href="http://www.catb.org/~esr/writings/cathedral-bazaar/cathedral-bazaar/index.html">articulate the case</a> for the open source development model when he did.</p><figure><iframe width="612" height="344" src="https://www.youtube.com/embed/dLZRY3uLJ4s?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><figcaption>Excerpt from 'Revolution OS'&nbsp;</figcaption></figure><p>Neither Windows nor Ubuntu are going anywhere. They are just going to keep getting better through open source. Each will play to their relative strengths. Just now with more open source collaboration than imaginable before.</p><figure><blockquote data-width="550"><p lang="en" dir="ltr">Word on Ubuntu 20.04. Very usable on an i5-6300U with just integrated graphics. It is not WINE, remote/cloud, or GNOME on WSL. It is something else I put together. Next, I plan to add working file associations. <a href="https://t.co/nGQ8USeR0m">pic.twitter.com/nGQ8USeR0m</a></p>— Hayden Barnes (@unixterminal) <a href="https://twitter.com/unixterminal/status/1255919797692440578?ref_src=twsrc%5Etfw">April 30, 2020</a></blockquote>

<figcaption><em>The work being done for GUI support on WSL has the potentially to dramatically improve the remote desktop and Windows virtualization experience on Linux.</em></figcaption></figure><p><a href="https://pastebin.ubuntu.com/p/HHR4sVFn2S/">π</a></p>
                </div>
            </section>



        </article>

    </div>
</div></div>]]>
            </description>
            <link>https://boxofcables.dev/no-microsoft-is-not-rebasing-windows-to-linux/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24753564</guid>
            <pubDate>Mon, 12 Oct 2020 12:09:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A tool that increased my typing speed]]>
            </title>
            <description>
<![CDATA[
Score 117 | Comments 146 (<a href="https://news.ycombinator.com/item?id=24753493">thread link</a>) | @chipz
<br/>
October 12, 2020 | https://vasilishynkarenka.com/how-to-type-3x-faster/ | <a href="https://web.archive.org/web/*/https://vasilishynkarenka.com/how-to-type-3x-faster/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://vasilishynkarenka.com/content/images/size/w300/2020/10/https___bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com_public_images_9d6b9df3-d665-43a4-bbd7-8cdf5910d6cb_599x409.jpeg 300w,
                            https://vasilishynkarenka.com/content/images/size/w600/2020/10/https___bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com_public_images_9d6b9df3-d665-43a4-bbd7-8cdf5910d6cb_599x409.jpeg 600w,
                            https://vasilishynkarenka.com/content/images/size/w1000/2020/10/https___bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com_public_images_9d6b9df3-d665-43a4-bbd7-8cdf5910d6cb_599x409.jpeg 1000w,
                            https://vasilishynkarenka.com/content/images/size/w2000/2020/10/https___bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com_public_images_9d6b9df3-d665-43a4-bbd7-8cdf5910d6cb_599x409.jpeg 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://vasilishynkarenka.com/content/images/size/w2000/2020/10/https___bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com_public_images_9d6b9df3-d665-43a4-bbd7-8cdf5910d6cb_599x409.jpeg" alt="How to type 3x faster">
            </figure>

            <section>
                <div>
                    <p>In the last post, I’ve explained how the speed of symbol manipulation <a href="https://vasilishynkarenka.com/writing-as-a-tool-for-thought/">augments our intellect</a>. Today, I will describe an interface I’ve designed that increased my typing speed 3x, changed how I plan projects, and helped me develop a growth mindset.</p><p>Here’s what’s coming:</p><ul><li>How QWERTY was invented</li><li>Why Dvorak keyboard failed despite being more efficient</li><li>The sausage theory of innovation</li><li>How to type 3x faster</li><li>How shortcuts help to discover new knowledge, plan projects in minutes and develop a growth mindset</li><li>What comes after shortcuts</li></ul><p>You can find references at the end of the post.</p><p>I hope you’ll enjoy your reading.</p><hr><h2 id="how-qwerty-was-invented"><strong><strong>How QWERTY was invented</strong></strong></h2><p>Most people type one symbol at a time.</p><p>That’s because our keyboard is designed that way. No matter how much time you spend in the gym, weightlifting your left thumb, there’s an apparent speed limit beyond which you can’t go. You’ve only got ten fingers.</p><p>But very few people know <em>why</em> the keyboard is designed that way. And if we want to go beyond the speed of the keyboard, we need to first understand how we ended up here.</p><p>So let’s travel back in time.</p><hr><figure><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F94fd314f-be54-46cf-9f08-759ae1975b7d_1500x1786.jpeg" alt=""></figure><p>On July 1, 1874, the first typewriter hit the market.</p><p>You’re probably now scratching the back of your head and thinking:</p><p><em>“Well, I’ve seen this keyboard somewhere..”</em></p><p>That’s right. The very first “Type-Writer,” designed by Christopher Sholes 146 years ago, used the exact same QWERTY keyboard that‘s in front of you.</p><p>Here’s how it worked.</p><p>His machine had a mechanism with characters at the end of a bar. When a key was struck, a linkage would swing the bar into a tape coated with ink. And when the character hit the tape, the impression of the character was transferred onto the paper.</p><p>The problem was that bars were colliding with each other and jamming. That’s why Christopher arranged the keys with the most common letters in hard to reach spots. He decided to slow typists down to prevent bars from jamming.</p><p>But that’s excusable. Christopher couldn’t have imagined one-third of humankind using his invention every day for hours. He lived 150 years ago when typing was not even a skill because typewriters didn’t exist.</p><p>And for the next 68 years after the “Type-Writer” hit the market, nobody cared about the speed.</p><p>But then one American professor tried to go faster.</p><h2 id="why-dvorak-keyboard-failed-despite-being-more-efficient"><strong><strong>Why Dvorak keyboard failed despite being more efficient</strong></strong></h2><p>By the 1930s, the typewriters started getting traction.</p><p>The Underwood typewriter was selling like hotcakes. They reached 5 million units sold by 1939, and that was just the beginning.</p><p>On May 12th, 1936, August Dvorak and his brother-in-law, William, submitted a patent for a better-designed keyboard that decreased typing errors, advanced typing speed, and lessened typist fatigue.</p><p>Here’s how it looked:</p><figure><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F7358b134-c94b-42d2-b51b-ceb79676f87a_1232x723.jpeg" alt=""></figure><p>Their idea was to minimize the distance traveled by the fingers. To do that, August placed all the most commonly used letters in the home row—so that your fingers don’t have to move at all to hit these keys.</p><p>August and William also improved how vowels and consonants are located. They put all the vowels to be used by the left hand and made the right hand to manipulate only consonants. This enabled at least 2x speed improvement as there are very few words in the English language that can be typed with only one hand on the Dvorak keyboard (for the curious, the two are “papaya” and “opaque”).</p><p>Below you can see how much work each of the fingers does when typing on Dvorak instead of QWERTY:</p><figure><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F9d6b9df3-d665-43a4-bbd7-8cdf5910d6cb_599x409.jpeg" alt=""></figure><p>But Dvorak’s keyboard never took off.</p><p>The timing was terrible. Amid the Great Depression, most companies didn’t have the cash to buy new typewriters. And when World War II started, many typewriter plants shut down manufacturing of all typewriters—including ones with Dvorak layouts.</p><p>But the most important reason was psychological.</p><p>Despite Dvorak-trained typists getting banned from typing contests for “unfair advantage,” the QWERTY layout got deep into people’s minds as “normal.” And as soon as something gets “normal,” we forget <em>why</em> we do the thing in the first place.</p><p>I call it the sausage theory.</p><h2 id="the-sausage-theory-of-innovation"><strong>The sausage theory of innovation</strong></h2><p>Here’s how the story goes.</p><p><em>The daughter-in-law is cooking dinner. She’s got some sausages from the local grocery store and is ready to boil them. But as soon as she takes the first one to throw it into the pot, the husband’s mom shows up.</em></p><p><em>The mother pulls the sausage from the daughter’s hands, cuts it in half, and throws into the boiling pot.</em></p><p><em>The daughter is shocked.</em></p><figure><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F4bc6031b-c728-43b4-892a-fd1091d1d4df_1536x954.png" alt=""></figure><p><strong>D:</strong> “Why are you doing this?”</p><p><strong>M:</strong> “Because that’s how you cook sausages right.”</p><p><strong>D:</strong> “Why so?”</p><p><strong>M:</strong> “Because if you cut them in half, they end up being soft and juicy. And my mom has been doing that all the time, and she can’t be wrong<em>.”</em></p><p><em>So the daughter goes to the grandma.</em></p><figure><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F618d05a3-0ab6-4ff4-9369-8548ec7ddfa9_1536x732.png" alt=""></figure><p><strong>D:</strong> “Hey grandma, we were cooking some sausages last night, and mom started cutting them in half. I asked why and she said that’s because you’ve been doing that for years. What’s the point of cutting them in half??”</p><p><strong>G:</strong> “Well, dear, that’s because how you cook sausages right.”</p><p><strong>D:</strong> “Oh, really... Okay. And why is this the right way to cook them?”</p><p><strong>G:</strong> “You know, if you cut them in half, they don’t end up being dry and tough to bite. But as I remember, my mom has been doing that for decades, so I just picked it up from her. Mom can’t be wrong.”</p><p><em>To discover the ultimate why, the daughter goes to the grand-grandmother, a 103-year-old woman living hundreds of miles away from the town.</em></p><figure><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F7e7b283b-6706-4c2c-af23-ba5992384437_1536x852.png" alt=""></figure><p><strong>D:</strong> “Hey granny, we were doing sausages for dinner, and mom started cutting them in half. I’ve asked what’s the point, but she doesn’t know, and even your daughter said that she picked it up from you. WHY IN THE HELL DID YOU CUT SAUSAGES IN HALF???”</p><p><strong>GG:</strong> “Oh honey, are you still doing that? I had to cut them in half because they didn’t fit in my tiny pot…”</p><h2 id="how-to-type-3x-faster"><strong>How to type 3x faster</strong></h2><p>The first typewriter had only one symbol per key because of its mechanical nature. You couldn’t program it to type one word, a combination of words, or an entire sentence for one press of a key. It had to be universal so that everybody could type what they want.</p><p>In other words, the pot was tiny.</p><p>But 146 years later, we are still cutting sausages in half.</p><hr><p>The way to type faster is not to increase the typing speed but to rethink what typing actually is.</p><p>Here’s a demo of myself outlining this article:</p><figure><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fcd09c3ea-88ce-4a89-a422-93365264a3f2_600x450.gif" alt=""></figure><p><em>If your email client doesn’t support GIF, click on the image, and it will open in your browser.</em></p><p>40 words; 23 seconds in total. I don’t know if you noticed but I actually stopped for a second to sip my coffee.</p><p>Without shortcuts, it took me 62 seconds to type the same 40 words:</p><figure><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F774c5e6a-97b7-46a2-972b-c61c1135c0bc_600x450.gif" alt=""></figure><p>My method is built on two principles:</p><ol><li>You can’t go fast by typing one symbol at a time</li><li>Most words you type are exactly the same</li></ol><p>You can 3x your typing speed if you set up shortcuts for most frequently used words to decrease the number of symbols you have to type.</p><p>Here’s how it works on Mac OS or iOS. When you type a symbol, i.e., “rr” or “wd,” and press a space bar, the system transforms your input into “remember” or “would be” accordingly. You can set up these pairs in Settings/Keyboard/Text Replacement.</p><p>But it’s not only the speed that matters:</p><ul><li><em>Shortcuts work on your iPhone.</em> As you spend 2-4h a day with your iPhone and type at least a few times slower, it’s useful to have shortcuts to speed up your input process.</li><li><em>Shortcuts take care of apostrophes.</em> You can have a “dont” shortcut that turns into “don’t.” This removes the necessity to press the apostrophe key at all.</li><li><em>Shortcuts prevent typos.</em> Typos come from the word type, which means pressing keys one after another. When you do shortcuts, you don’t type. And if you don’t type, then you don’t have typos.</li><li><em>Shortcuts simplify blind typing.</em> Getting all eleven symbols of the word “progressive” right when staring at a screen requires deliberate practice and exceptional motor skills. But if you type two symbols, “pg,” instead of eleven, you will make fewer errors.</li><li><em>Shortcuts let you instantly look up relevant information.</em> If you have an iPad with a keyboard, you can look up stuff from Notes and other apps by pressing Cmd+Space and hitting your shortcut. Here’s how it works:</li></ul><figure><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_lossy/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fe06b0035-b3f8-4979-9bc2-9aef3ace58ed_600x450.gif" alt=""></figure><ul><li><em>Shortcuts speed up your handwriting.</em> When you start using shortcuts extensively, you’ll notice that you also use them in handwriting. This happens because you remember the meaning behind the symbol. And as handwriting is even slower than typing on a 146-year-old keyboard, this yields enormous speed benefits compared to scribbling full words and sentences.</li><li><em>Shortcuts speed up your thinking.</em> Inevitably, you will start thinking in shortcuts as well. Thoughts such as “Can I TTS this OL?” (“Can I use my three three screens writing method for this essay outline?”) begin to pop up.</li></ul><p>I can speculate that after three years of using shortcuts every single day for 5-10 hours, my thought process became significantly faster. That’s not only because of smaller symbols but also because shortcuts compress knowledge. They serve as dynamic pointers to the territory in my brain where the meaning is stored.</p><p>This means that I’m climbing up the ladder of information just like a chess player does when he progresses from being an amateur to a grandmaster.</p><p>The between the two is that an amateur calculates moves of individual figures on the board, and the grandmaster can play blind chess with ten people because he operates different information units. The grandmaster thinks not only in combinations and positions but even in entire games.</p><hr><p>Here’s how to integrate shortcuts into your workflow:</p><ul><li><em>Go bottoms-up.</em> Don’t just download 300 most popular English words but make shortcuts based on your unique needs. This means,</li><li><em>Look for big words.</em> You must become the Sherlock of your own typing. Whenever you catch a big word that you type often, go ahead and set up a shortcut for it. The bigger the word, the more benefit you get. For example, you can take the word “progressive” and turn it into a “pg” shortcut. This reduces the number of symbols you need to type 5x and …</li></ul></div></section></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://vasilishynkarenka.com/how-to-type-3x-faster/">https://vasilishynkarenka.com/how-to-type-3x-faster/</a></em></p>]]>
            </description>
            <link>https://vasilishynkarenka.com/how-to-type-3x-faster/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24753493</guid>
            <pubDate>Mon, 12 Oct 2020 11:56:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[MIVD boss: Meet without a smartphone, risk of espionage too great]]>
            </title>
            <description>
<![CDATA[
Score 201 | Comments 119 (<a href="https://news.ycombinator.com/item?id=24753290">thread link</a>) | @jacquesm
<br/>
October 12, 2020 | https://www.nu.nl/tech/6083317/mivd-baas-vergader-zonder-smartphone-risico-op-spionage-te-groot.html | <a href="https://web.archive.org/web/*/https://www.nu.nl/tech/6083317/mivd-baas-vergader-zonder-smartphone-risico-op-spionage-te-groot.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="block-359449" data-id="block-359449" data-position="" data-type="article.body" data-sac-marker="block.article.body">
    <div>
        <div>
            <p>Jan Swillens, de directeur van de Militaire Inlichtingen- en Veiligheidsdienst (MIVD), adviseert grote organisaties niet met een smartphone of tablet op tafel te vergaderen. Het risico op spionage is dan te groot, zegt hij in een maandag verschenen interview met <a href="https://www.telegraaf.nl/nieuws/1347006281/mivd-baas-jan-swillens-prijst-tophackers-die-ons-land-veilig-houden" target="_blank"><em>De Telegraaf</em></a>.</p>

<p>"Ik denk dat geen raad van bestuur van een grote organisatie meer moet vergaderen over bedrijfsgeheimen met de smartphone of iPad op tafel", aldus Swillens.</p><p>In Nederland wordt de dreiging volgens hem onderschat. De MIVD-directeur noemt de cyberbeveiliging in Nederland nog niet goed genoeg. "Kennis wordt gestolen, vitale systemen en infrastructuur worden aangevallen en er worden pogingen gedaan om onze samenleving via desinformatie te beïnvloeden."</p><p>Swillens kan niet ingaan op recente grote zaken, waarbij werd gepoogd informatie te stelen. Ook legt hij niet uit hoe hackers organisaties via smartphones kunnen afluisteren.</p><p>In 2018 werden spionnen van de Russische inlichtingendienst op heterdaad betrapt door de MIVD. De spionnen probeerden op dat moment het wifinetwerk van de organisatie voor het verbod op chemische wapens (OPCW) binnen te dringen. De vier Russen kregen daarom dit jaar <a href="https://www.nu.nl/tech/6067694/eu-legt-vier-russen-sancties-op-voor-hackaanval-op-opcw-in-den-haag.html" target="_blank">sancties</a> opgelegd.</p>
        </div>
    </div>
</div></div>]]>
            </description>
            <link>https://www.nu.nl/tech/6083317/mivd-baas-vergader-zonder-smartphone-risico-op-spionage-te-groot.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24753290</guid>
            <pubDate>Mon, 12 Oct 2020 11:20:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Using an iPhone as a Mac Webcam]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24753024">thread link</a>) | @rofrischmann
<br/>
October 12, 2020 | https://weser.io/blog/using-an-iphone-as-a-mac-webcam | <a href="https://web.archive.org/web/*/https://weser.io/blog/using-an-iphone-as-a-mac-webcam">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><p><a href="https://weser.io/blog">← Back</a></p><p>12<!-- --> <!-- -->Oct<!-- -->, <!-- -->2020<!-- --> -<!-- --> <!-- -->15<!-- -->min<!-- --> read </p><p><img src="https://weser.io/posts/using-an-iphone-as-a-mac-webcam/teaser.jpg"></p><p><strong>Disclaimer</strong>: This post becomes quite technical at some point where we're using developer tools such as a terminal and Xcode. We also fiddle with security mechanisms, so try it at your own risk!</p><p>If you're working from home due to Corona, chances are that you're participating in way more online meetings than you'd usually do.
I've been working remotely for almost 2 years now and the number of online meetings has grown rapidly.</p><p>While meeting online is quite effective, one can quickly miss the in-person interaction; especially when you don't have an active webcam.
I usually use a single big display to work on, so my Macbook is closed and I can't use its built-in webcam, which has a bad quality anyway.</p><p>I already considered buying an external webcam, when my friend and co-worker <a href="https://www.webcloud.se/">Daniel</a> told me about his experiments with OBS and his iPhone camera.
After some research, we found an <a href="https://joshspicer.com/quarantine-cam">article</a> by <a href="https://joshspicer.com/">Josh Spicer</a> who used <a href="https://obsproject.com/">OBS</a> and <a href="https://github.com/johnboiles/obs-mac-virtualcam">obs-mac-virtualcam</a> to utilize his old iPhone as a mac webcam.</p><p>Since the article already is a couple of months old and outdated to some degree, I decided to write my own blog post about it! We're also not enrolled in the <a href="https://developer.apple.com/programs/">Apple Developer Program</a> which lead to some extra work on our side.</p><h2>OBS Setup</h2><p>First of all, we need to setup <a href="https://obsproject.com/">OBS</a>, so we can access our phone screen. The fastest way is to <a href="https://obsproject.com/download">download the installer</a>.<br>
<!-- -->Once installed, open the app and choose the default settings.</p><p>Now, in order to see our phone screen, we need to add a <strong>Video Capture Device</strong> in the <strong>Sources</strong> Tab at the bottom.
<img src="https://weser.io/posts/using-an-iphone-as-a-mac-webcam/1.jpg"></p><p>Make sure that your iPhone is connected to your Mac via USB or else it won't show up in the <strong>Device</strong> dropdown.
Select your iPhone and make sure to choose <strong>High</strong> from the <strong>Preset</strong> dropdown to ensure the best possible output quality.</p><p><img src="https://weser.io/posts/using-an-iphone-as-a-mac-webcam/2.jpg"></p><p>You should now be able to see your iPhone screen inside the scene preview. Next, we want to rotate and center it so that it fills the preview.
<strong>Right-click</strong> on the source and navigate to <strong>Transform</strong>. Here we'll be able to do all kinds of manipulations.</p><p>I usually start with <strong>Fit to screen</strong> followed by <strong>Rotate 90 degrees CW</strong>.<br>
<!-- -->Then I use the cropping tools to scale my screen all the way up until it fully covers the preview box.</p><p>Note: We need to cut some pixels on both ends in order to make it fit the box.</p><p>In the end it should look something like this:</p><p><img src="https://weser.io/posts/using-an-iphone-as-a-mac-webcam/3.jpg"></p><p>Don't worry about the details right away, because we'll need to adjust the screen once again anyways.</p><h3>Virtual Cam</h3><p>We can now see our phone screen in OBS, but we can't use it as a webcam just yet.<br>
<!-- -->To achieve that, we need to somehow export our video output as a virtual cam for apps to recognize it as an actual webcam.</p><p>Luckily, there's an OBS plugin called <a href="https://github.com/johnboiles/obs-mac-virtualcam">obs-mac-virtualcam</a> which does exactly that.
Jump over to the <a href="https://github.com/johnboiles/obs-mac-virtualcam/releases">Releases</a> section and download the latest <code>.pkg</code> installer.<br>
<!-- -->Once installed, you should see a <strong>Start Virtual Cam</strong> option under <strong>Tools</strong> in the OBS menubar.</p><p>Start the virtual cam and your OBS scene is now available as an external webcam!<br>
<!-- -->Let's test it: Head over to <strong>QuickTime Player</strong> and try <strong>File &gt; New Movie Recording</strong> and you should be able to select your <strong>OBS Virtual Cam</strong> right next to the <strong>"Record"</strong>-button.</p><p>If there's no <strong>OBS Virtual Cam</strong> option, something went wrong in the setup process. Maybe restart OBS or try a clean setup once again.</p><p><img src="https://weser.io/posts/using-an-iphone-as-a-mac-webcam/4.jpg"></p><h2>iPhone Setup</h2><p>We can see our iPhone screen in OBS, but it's not really a good webcam quite yet.<br>
<!-- -->We could open the native camera app, to get the camera input. But, since OBS <em>just</em> mirrors the phone screen, you'll quickly find that there's a lot of distracting UI which we'd have to crop in order to get a real webcam feeling.</p><p>So, ideally we'd want a "camera" app that has little or no UI.<br>
<!-- -->There are plently of options in the App Store, but I found an app which I personally like a lot: <a href="https://apps.apple.com/us/app/shuttercast/id1510249252">ShutterCast</a>.<br>
<!-- -->It has no UI elements and we only need to crop away some padding on both ends.</p><p>Once the camera app of your choice is active, go over to OBS and manipulate the scene until it nicely fits all edges.</p><p><img src="https://weser.io/posts/using-an-iphone-as-a-mac-webcam/5.jpg"></p><p>Tip: I use a <a href="https://www.amazon.de/-/en/gp/product/B06XZK9XKL">flexible camera stand</a> which is attached to my desk and sits behind my external display.<br>That way I can adjust my desk height without having to readjust the phone stand every time.</p><h2>App Support</h2><p>Alright, now we are all setup with OBS and got a nice webcam output. One might think we're already done at that point, but it turns out to be way more complicated.
Most apps won't initially support or even recognize the virtual cam and the reason is <a href="https://joshspicer.com/quarantine-cam#the-problem">Apple's security policy</a>: The operating system is not allowing any libraries not signed by the same App ID.</p><p>So what we ultimately need to do, is resigning our apps with our own certificates.</p><p><strong>Warning!</strong> Resigning applications actively disables security mechanisms that are there for a reason. I take no responsibility from here on. <strong>Try it at your own risk</strong>.</p><h3>Code Signing</h3><p>In order to be able to use the <code>codesign</code> CLI, <a href="https://developer.apple.com/Xcode/">Xcode</a> including its <strong>Command Line Tools</strong> need to be installed on your machine.</p><h4>Generating a Apple Developer certificate</h4><p>Before we're able to sign apps, we need our own Appler Developer certificate.<br>
<strong>If you have a paid Apple Developer account, you should be able to skip this part entirely.</strong></p><p>Note: This does <strong>NOT</strong> require a paid Apple Developer account.</p><p>Open Xcode and navigate to <strong>File &gt; Preferences</strong> in the menubar.<br>
<!-- -->Select the <strong>"Account"</strong> tab and follow these steps:</p><ol><li>Add your <strong>Apple ID</strong> if not already present.</li><li>Select your <strong>Personal Team</strong> in the <strong>Teams</strong> table.</li><li>Click the <strong>"Manage Certificates..."</strong> button in the bottom right corner.</li></ol><p><img src="https://weser.io/posts/using-an-iphone-as-a-mac-webcam/6.jpg"></p><p>If there's no certificate present already, go ahead and create a new <strong>Apple Development</strong> certificate.</p><p><img src="https://weser.io/posts/using-an-iphone-as-a-mac-webcam/7.jpg"></p><p>Last but not least, we need to get the full title of the certificate we just created.</p><ol><li>Open the <strong>Keychain Access</strong> app and search for <strong>Apple Development</strong>.</li><li>Select the latest with type <strong>certificate</strong> and copy the full title.<br> e.g. <code>Apple Development: foo@bar.com (ABCD123)</code></li><li>Safe it or check back later since we'll need it for some specific apps.</li></ol><p><img src="https://weser.io/posts/using-an-iphone-as-a-mac-webcam/8.jpg"></p><p>Now we should be all setup to finally start signing our apps and see some results!</p><h3>Zoom</h3><p>Edit: The latest version of Zoom now officially supports third-party virtual cameras, so we shouldn't need to sign it anymore.</p><p><a href="https://zoom.us/">Zoom</a> can be signed with a single command:</p><pre><div><pre><code><p><span>sudo</span><span> codesign -dv </span><span>"/Applications/zoom.us.app"</span></p></code></pre></div></pre><p>Et voilà, we can now select our <strong>OBS Virtual Cam</strong> in the video settings!</p><p><img src="https://weser.io/posts/using-an-iphone-as-a-mac-webcam/9.jpg"></p><h3>Teams</h3><p><a href="https://teams.microsoft.com/">Microsoft Teams</a> is similarly easy, although we need to sign both the actual <strong>Microsoft Teams.app</strong> as well as its <strong>Helper.app</strong> which runs in the backround.</p><pre><div><pre><code><p><span>sudo</span><span> codesign --remove-signature </span><span>"/Applications/Microsoft Teams.app"</span><span> </span></p><p><span> </span><span>sudo</span><span> codesign --remove-signature </span><span>"/Applications/Microsoft Teams.app/Contents/Frameworks/Microsoft Teams Helper.app"</span></p></code></pre></div></pre><p><img src="https://weser.io/posts/using-an-iphone-as-a-mac-webcam/10.jpg"></p><h3>Skype</h3><p>Same company, same procedure.<br>
<a href="https://www.skype.com/en/">Skype</a> also has a <strong>Helper.app</strong> which needs to be signed as well.</p><pre><div><pre><code><p><span>sudo</span><span> codesign -f -s - </span><span>"/Applications/Skype.app"</span><span> </span></p><p><span> </span><span>sudo</span><span> codesign --remove-signature </span><span>"/Applications/Skype.app/Contents/Frameworks/Skype Helper (Renderer).app"</span></p></code></pre></div></pre><p><img src="https://weser.io/posts/using-an-iphone-as-a-mac-webcam/11.jpg"></p><h3>Slack</h3><p>Trying to codesign <a href="https://slack.com/">Slack</a> the same way as the other apps above, I ran into some issues. Slack is based on <a href="https://www.electronjs.org/">Electron</a> and thus needs additional steps.<br>
<!-- -->I came across <a href="https://github.com/electron/electron-osx-sign">electron-osx-sign</a> which is a wrapper around the <code>codesign</code> CLI specifically built for signing Electron-based apps.</p><p>One can install it with <a href="https://www.npmjs.com/">npm</a> running:</p><pre><div><pre><code><p><span>npm</span><span> </span><span>install</span><span> -g electron-osx-sign</span></p></code></pre></div></pre><p>If you do not have Node.js/npm installed on your machine already, go ahead and get the <a href="https://nodejs.org/en/download/">latest version</a>.</p><p>Additionally, we'll be using a minimal <code>entitlements.xml</code> file to sign those apps.<br>
<!-- -->I created mine under <code>/Users/USERNAME/</code> or respectively <code>~</code>.</p><p>Let's create a new file <code>~/entitlements.xml</code>:</p><pre><div><pre><code><p><span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span> </span></p><p><span> </span><span>&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span><span> </span></p><p><span> </span><span>&lt;</span><span>plist</span><span> </span><span>version</span><span>=</span><span>"</span><span>1.0</span><span>"</span><span>&gt;</span><span> </span></p><p><span> </span><span>&lt;</span><span>dict</span><span>&gt;</span><span> </span></p><p><span>    </span><span>&lt;</span><span>key</span><span>&gt;</span><span>com.apple.security.cs.disable-library-validation</span><span>&lt;/</span><span>key</span><span>&gt;</span><span> </span></p><p><span>    </span><span>&lt;</span><span>true</span><span>/&gt;</span><span> </span></p><p><span> </span><span>&lt;/</span><span>dict</span><span>&gt;</span><span> </span></p><p><span> </span><span>&lt;/</span><span>plist</span><span>&gt;</span></p></code></pre></div></pre><p>Now we can use the <code>electron-osx-sign</code> CLI to sign any Electron-based app.<br>
<!-- -->Here's where we also need that <strong>certificate title</strong> which we already got earlier.</p><pre><div><pre><code><p><span>electron-osx-sign </span><span>"/Applications/Slack.app"</span><span> </span><span>\</span><span> </span></p><p><span>--type</span><span>=</span><span>development </span><span>\</span><span> </span></p><p><span>--entitlements</span><span>=</span><span>"~/entitlements.xml"</span><span> </span><span>\</span><span> </span></p><p><span>--gatekeeper-assess</span><span>=</span><span>false </span><span>\</span><span> </span></p><p><span>--identity</span><span>=</span><span>"YOUR_CERTIFICATE_TITLE"</span></p></code></pre></div></pre><p>If you have a paid Apple Developer account, you can leave the <code>--identity</code> parameter as that should be pre-filled with your paid certificate automatically.</p><p><img src="https://weser.io/posts/using-an-iphone-as-a-mac-webcam/12.jpg"></p><h4>Other Electron-based Apps</h4><p>If you're using other Electron-based messenger tools like e.g. <a href="https://stationhq.com/">Station</a> or <a href="https://meetfranz.com/">Franz</a>, just replace the application name in the first line and you're ready to go!</p><h2>Conclusion</h2><p>With a little bit of extra work, we can now use our iPhone in every major meeting software!<br>
<!-- -->While I usually disabled my video in the past, I'm nowadays almost looking forward to my next meeting just because I enjoy the setup that much 🤷‍♂️.</p><p>If you run into trouble, please let me know via <a href="https://twitter.com/robinweser">Twitter</a> and I'll try to update the article accordingly.</p><h2>Credits</h2><p>Thanks to my wife and to my friend and co-worker <a href="https://www.webcloud.se/">Daniel</a> for reviewing this article.<br>
<!-- -->Credits to <a href="https://joshspicer.com/">Josh Spicer</a> for his <a href="https://joshspicer.com/quarantine-cam">article</a> which served as a basis for this post.</p><div><p><img src="https://weser.io/avatar.jpg"></p><div><p>Thanks for <!-- -->reading<!-- -->!</p><p>I’m Robin, Freelancer &amp; Frontend Architect from Germany.<br>Any question regarding this <!-- -->article<!-- -->? Reach out to me on<!-- --> <a href="https://twitter.com/robinweser">Twitter</a>!<br>You can also find me on<!-- --> <a href="https://github.com/robinweser">GitHub</a>.</p></div></div></div></div></div></div>]]>
            </description>
            <link>https://weser.io/blog/using-an-iphone-as-a-mac-webcam</link>
            <guid isPermaLink="false">hacker-news-small-sites-24753024</guid>
            <pubDate>Mon, 12 Oct 2020 10:24:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[GPU-accelerated ODE solving in R with Julia]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24752823">thread link</a>) | @fanf2
<br/>
October 12, 2020 | http://www.stochasticlifestyle.com/gpu-accelerated-ode-solving-in-r-with-julia-the-language-of-libraries/ | <a href="https://web.archive.org/web/*/http://www.stochasticlifestyle.com/gpu-accelerated-ode-solving-in-r-with-julia-the-language-of-libraries/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="post-1449">
    <!--end post header-->
    <div>
                <p><a href="https://www.r-project.org/">R</a> is a widely used language for data science, but due to performance most of its underlying library are written in C, C++, or Fortran. <a href="https://julialang.org/">Julia</a> is a relative newcomer to the field which has busted out since its 1.0 to become <a href="https://spectrum.ieee.org/static/interactive-the-top-programming-languages-2020">one of the top 20 most used languages</a> due to its high performance libraries for scientific computing and machine learning. Julia's value proposition has been its high performance in high level language, known as solving the two language problem, which has allowed allowed the language to build <a href="https://juliahub.com/ui/Home">a robust, mature, and expansive package ecosystem</a>. While this has been a major strength for package developers, the fact remains that there are still large and robust communities in other high level languages like R and Python. Instead of spawning distracting language wars, we should ask the question: can Julia become a language of libraries to accelerate these other languages as well?</p>
<p>This is definitely not the first time this question was asked. The statistics libraries in Julia were developed by individuals like <a href="http://128.105.7.173/~bates/">Douglas Bates who built some of R's most widely used packages like lme4 and Matrix</a>. Doug had <a href="https://rpubs.com/dmbates/377897">written a blog post in 2018 showing how to get top notch performance in linear mixed effects model fitting via JuliaCall</a>. In 2018 the JuliaDiffEq organization had <a href="https://sciml.ai/news/2018/04/30/Jupyter/"> written a blog post demonstrating the use of DifferentialEquations.jl in R and Python (the Jupyter of Diffrential Equations)</a>. Now rebranded as <a href="https://sciml.ai/">SciML</a> for <a href="https://sciml.ai/roadmap/">Scientific Machine Learning</a>, we looked to expand our mission and bring <a href="https://arxiv.org/abs/2001.04385">automated model discovery and acceleration</a> include other languages like R and Python with Julia as the base.</p>
<p>With the release of <a href="https://cran.r-project.org/web/packages/diffeqr/index.html">diffeqr</a> v1.0, we can now demonstrate many advances in R through the connection to Julia. Specifically, I would like to use this blog post to showcase:</p>
<ol>
<li>The new direct wrapping interface of diffeqr</li>
<li>JIT compilation and symbolic analysis of ODEs and SDEs in R using Julia and <a href="https://github.com/SciML/ModelingToolkit.jl">ModelingToolkit.jl</a></li>
<li>GPU-accelerated simulations of ensembles using Julia's <a href="https://github.com/SciML/DiffEqGPU.jl">DiffEqGPU.jl</a></li>
</ol>
<p>Together we will demonstrate how models in R can be accelerated by 1000x without a user ever having to write anything but R.</p>
<h2>A Quick Note Before Continuing</h2>
<p>Before continuing on with showing all of the features, I wanted to ask for support so that we can continue developing these bridged libraries. Specifically, I would like to be able to support developers interested in providing a fully automated Julia installation and static compilation so that calling into Julia libraries is just as easy as any Rcpp library. To show support, the easiest thing to do is to star our libraries. The work of this blog post is build on <a href="https://github.com/SciML/DifferentialEquations.jl">DifferentialEquations.jl</a>, <a href="https://github.com/SciML/diffeqr">diffeqr</a>, <a href="https://github.com/SciML/ModelingToolkit.jl">ModelingToolkit.jl</a>, and <a href="https://github.com/SciML/DiffEqGPU.jl">DiffEqGPU.jl</a>. Thank you for your patience and now back to our regularly scheduled program.</p>
<h2>diffeqr v1.0: Direct wrappers for Differential Equation Solving in R</h2>
<p>First let me start with the new direct wrappers of differential equations solvers in R. In the previous iterations of diffeqr, we had relied on specifically designed high level functions, like "ode_solve", to compensate for the fact that one could not directly use Julia's original DifferentialEquations.jl interface directly from R. However, the new diffeqr v1.0 directly exposes the entirety of the Julia library in an easy to use framework.</p>
<p>To demonstrate this, let's see how to define the Lorenz ODE with diffeqr. In Julia's DifferentialEquations.jl, we would start by defining an "ODEProblem" that contains the initial condition u0, the time span, the parameters, and the f in terms of `u' = f(u,p,t)` that defines the derivative. In Julia, this would look like:</p>


<div><div><div><div><div><div><div><pre><span>using</span> DifferentialEquations
<span>function</span> lorenz<span>(</span>du,u,p,t<span>)</span>
  du<span>[</span><span>1</span><span>]</span> = p<span>[</span><span>1</span><span>]</span><span>*</span><span>(</span>u<span>[</span><span>2</span><span>]</span>-u<span>[</span><span>1</span><span>]</span><span>)</span>
  du<span>[</span><span>2</span><span>]</span> = u<span>[</span><span>1</span><span>]</span><span>*</span><span>(</span>p<span>[</span><span>2</span><span>]</span>-u<span>[</span><span>3</span><span>]</span><span>)</span> - u<span>[</span><span>2</span><span>]</span>
  du<span>[</span><span>3</span><span>]</span> = u<span>[</span><span>1</span><span>]</span><span>*</span>u<span>[</span><span>2</span><span>]</span> - p<span>[</span><span>3</span><span>]</span><span>*</span>u<span>[</span><span>3</span><span>]</span>
<span>end</span>
u0 = <span>[</span><span>1.0</span>,<span>1.0</span>,<span>1.0</span><span>]</span>
tspan = <span>(</span><span>0.0</span>,<span>100.0</span><span>)</span>
p = <span>[</span><span>10.0</span>,<span>28.0</span>,<span>8</span>/<span>3</span><span>]</span>
prob = ODEProblem<span>(</span>lorenz,u0,tspan,p<span>)</span>
sol = solve<span>(</span>prob,saveat=<span>1.0</span><span>)</span></pre></div></div></div></div></div></div></div>


<p>With the new diffeqr, diffeq_setup() is a function that does a few things:</p>
<ol>
<li>It instantiates a Julia process to utilize as its underlying compute engine</li>
<li>It first checks if the correct Julia libraries are installed and, if not, it installs them for you</li>
<li>Then it exposes all of the functions of DifferentialEquations.jl into its object</li>
</ol>
<p>What this means is that the following is the complete diffeqr v1.0 code for solving the Lorenz equation is:</p>


<div><div><div><div><div><div><div><pre>library(diffeqr)
de &lt;- diffeqr::diffeq_setup()
f &lt;- function(u,p,t) {
  du1 = p[1]*(u[2]-u[1])
  du2 = u[1]*(p[2]-u[3]) - u[2]
  du3 = u[1]*u[2] - p[3]*u[3]
  return(c(du1,du2,du3))
}
u0 &lt;- c(1.0,1.0,1.0)
tspan &lt;- c(0.0,100.0)
p &lt;- c(10.0,28.0,8/3)
prob &lt;- de$ODEProblem(f, u0, tspan, p)
sol &lt;- de$solve(prob,saveat=1.0)</pre></div></div></div></div></div></div></div>


<p>This then carries on through SDEs, DDEs, DAEs, and more. Through this direct exposing form, the whole library of DifferentialEquations.jl is at the finger tips of any R user, making it a truly cross-language platform.</p>
<p>(Note that the only caveat is that diffeq_setup requires that the user has already installed Julia and julia is included in the path. We hope that future developments can eliminate this need.)</p>
<h2>JIT compilation and symbolic analysis of ODEs and SDEs in R via ModelingToolkit.jl</h2>
<p>The reason for Julia is speed (well and other things, but here, SPEED!). Using the pure Julia library, we can solve the Lorenz equation 100 times in about 0.05 seconds:</p>


<div><div><div><div><div><div><div><pre>@<span>time</span> <span>for</span> i <span>in</span> <span>1</span>:<span>100</span> solve<span>(</span>prob,saveat=<span>1.0</span><span>)</span> <span>end</span>
<span>0.048237</span> seconds <span>(</span><span>156.80</span> k allocations: <span>6.842</span> MiB<span>)</span>
<span>0.048231</span> seconds <span>(</span><span>156.80</span> k allocations: <span>6.842</span> MiB<span>)</span>
<span>0.048659</span> seconds <span>(</span><span>156.80</span> k allocations: <span>6.842</span> MiB<span>)</span></pre></div></div></div></div></div></div></div>


<p>Using diffeqr connected version, we get:</p>


<div><div><div><div><div><div><div><pre>lorenz_solve &lt;- function (i){
  de$solve(prob,saveat=1.0)
}
&nbsp;
&gt; system.time({ lapply(1:100,lorenz_solve) })
   user  system elapsed
   6.81    0.02    6.83
&gt; system.time({ lapply(1:100,lorenz_solve) })
   user  system elapsed
   7.09    0.00    7.10
&gt; system.time({ lapply(1:100,lorenz_solve) })
   user  system elapsed
   6.78    0.00    6.79</pre></div></div></div></div></div></div></div>


<p>That's not good, that's about 100x difference! In <a href="https://www.stochasticlifestyle.com/why-numba-and-cython-are-not-substitutes-for-julia/">this blog post I described that interpreter overhead and context switching</a> are the main causes of this issue. We've also demonstrated that <a href="https://gist.github.com/ChrisRackauckas/cc6ac746e2dfd285c28e0584a2bfd320">ML accelerators like</a> <a href="https://gist.github.com/ChrisRackauckas/6a03e7b151c86b32d74b41af54d495c6">PyTorch</a> generally do not perform well in this regime since those kinds of accelerators rely on heavy array operations, unlike the scalarized nonlinear interactions seen in a lot of differential equation modeling. For this reason we cannot just slap any old JIT compiler onto the f call and then put it into the function since there would still be left over. So we need to do something a bit tricky.</p>
<p>In my <a href="https://www.youtube.com/watch?v=UNkXNZZ3hSw">JuliaCon 2020 talk, Automated Optimization and Parallelism in DifferentialEquations.jl</a> I demonstrated how <a href="https://github.com/SciML/ModelingToolkit.jl">ModelingToolkit.jl</a> can be used to trace functions and generate <a href="https://mtk.sciml.ai/dev/tutorials/auto_parallel/">highly optimized sparse and parallel code</a> for scientific computing all in an automated fashion. It turns out that JuliaCall can do a form of tracing on R functions, something that exploited to allow <a href="https://github.com/Non-Contradiction/autodiffr">autodiffr to automatically differentiate R code with Julia's AD libraries</a>. Thus it turns out that the same <a href="https://github.com/SciML/AutoOptimize.jl">modelingtoolkitization methods used in AutoOptimize.jl</a> can be used on a subset of R codes which includes a large majority of differential equation models.</p>
<p>In short, we can perform automated acceleration of R code by turning it into sparse parallel Julia code. This was exposed in diffeqr v1.0 as the `jitoptimize_ode(de,prob)` function (also `jitoptimize_sde(de,prob)`). Let's try it out on this example. All you need to do is give it the ODEProblem which you wish to accelerate. Let's take the last problem and turn it into a pure Julia defined problem and then time it:</p>


<div><div><div><div><div><div><div><pre>fastprob &lt;- diffeqr::jitoptimize_ode(de,prob)
fast_lorenz_solve &lt;- function (i){
  de$solve(fastprob,saveat=1.0)
}
&nbsp;
system.time({ lapply(1:100,fast_lorenz_solve) })
&nbsp;
&gt; system.time({ lapply(1:100,fast_lorenz_solve) })
   user  system elapsed
   0.05    0.00    0.04
&gt; system.time({ lapply(1:100,fast_lorenz_solve) })
   user  system elapsed
   0.07    0.00    0.06
&gt; system.time({ lapply(1:100,fast_lorenz_solve) })
   user  system elapsed
   0.07    0.00    0.06</pre></div></div></div></div></div></div></div>


<p>And there you go, an R user can get the full benefits of Julia's optimizing JIT compiler without having to write lick of Julia code! This function also did a few other things, like automatically defined the <a href="https://diffeq.sciml.ai/stable/tutorials/advanced_ode_example/#Automatic-Sparsity-Detection">Jacobian code to make implicit solving of stiff ODEs much faster as well</a>, and it can perform sparsity detection and automatically optimize computations on that.</p>
<p>To see how much of an advance this is, note that this Lorenz equation is the same from the <a href="http://desolve.r-forge.r-project.org/">deSolve examples page</a>. So let's take their example and see how well it performs:</p>


<div><div><div><div><div><div><div><pre>library(deSolve)
Lorenz &lt;- function(t, state, parameters) {
  with(as.list(c(state, parameters)), {
    dX &lt;-  a * X + Y * Z
    dY &lt;-  b * (Y - Z)
    dZ &lt;- -X * Y + c * Y - Z
    list(c(dX, dY, dZ))
  })
}
&nbsp;
parameters &lt;- c(a = -8/3, b = -10, c = 28)
state      &lt;- c(X = 1, Y = 1, Z = 1)
times      &lt;- seq(0, 100, by = 1.0)
out &lt;- ode(y = state, times = times, func = Lorenz, parms = parameters)
&nbsp;
desolve_lorenz_solve &lt;- function (i){
  state      &lt;- c(X = runif(1), Y = runif(1), Z = runif(1))
  parameters &lt;- c(a = -8/3 * runif(1), b = -10 * runif(1), c = 28 * runif(1))
  out &lt;- ode(y = state, times = times, func = Lorenz, parms = parameters)
}
&nbsp;
&gt; system.time({ lapply(1:100,desolve_lorenz_solve) })
   user  system elapsed
   5.03    0.03    5.07
&gt;
&gt; system.time({ lapply(1:100,desolve_lorenz_solve) })
   user  system elapsed
   5.42    0.00    5.44
&gt; system.time({ lapply(1:100,desolve_lorenz_solve) })
   user  system elapsed
   5.41    0.00    5.41</pre></div></div></div></div></div></div></div>


<p>Thus we see 100x acceleration over the leading R library without users having to write anything but R code. This is the true promise in action of a "language of libraries" helping to extend all other high level languages!</p>
<h2>What about writing C?</h2>
<p>What about writing C code and directly calling it with deSolve? It turns out that's still not as efficient as this JIT. Following <a href="https://tpetzoldt.github.io/deSolve-compiled/deSolve-compiled.html">the tutorial from deSolve on how to write an …</a></p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://www.stochasticlifestyle.com/gpu-accelerated-ode-solving-in-r-with-julia-the-language-of-libraries/">http://www.stochasticlifestyle.com/gpu-accelerated-ode-solving-in-r-with-julia-the-language-of-libraries/</a></em></p>]]>
            </description>
            <link>http://www.stochasticlifestyle.com/gpu-accelerated-ode-solving-in-r-with-julia-the-language-of-libraries/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24752823</guid>
            <pubDate>Mon, 12 Oct 2020 09:43:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Hacking together a USB-C charger for a cheap Chromebook]]>
            </title>
            <description>
<![CDATA[
Score 167 | Comments 64 (<a href="https://news.ycombinator.com/item?id=24752714">thread link</a>) | @laktak
<br/>
October 12, 2020 | https://blog.filippo.io/usb-c-charger-for-a-cheap-chromebook/ | <a href="https://web.archive.org/web/*/https://blog.filippo.io/usb-c-charger-for-a-cheap-chromebook/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
            <p>The era of USB-C has come. The other day I threw all other cables into a box, and bought a set of USB-C to USB-C, Lightning, and microUSB cables. USB-C chargers around the house, USB-C PD power bank, even a nice small USB-C dock that works with the Nintendo Switch if the charger can do the right voltage. It's glorious.</p><p>Only one thing won't charge with USB-C, my awfully cheap ($190 for 4GB of RAM) Samsung Chromebook 3, a machine I use when I want the extra security of the Chrome OS platform. Instead, this laptop charges from an old-school 12V barrel connector, forcing me to carry around an extra brick. 😢</p><figure><img src="https://blog.filippo.io/content/images/2020/04/zypds----1.jpeg" alt="side view of the laptop with round charging connector"></figure><p>USB traditionally delivers 5V of power, but with the introduction of the USB Power Delivery standard, devices can negotiate higher voltages with capable power bricks. Indeed, 12V is an option, and at least a couple of my chargers support it.</p><figure><img src="https://blog.filippo.io/content/images/2020/04/zypds----3.jpeg" alt="USB charger with 12V marking amongst others"></figure><p>It should be possible to hack together a USB-C charger for my cheap Chromebook!</p><p>What we need is called a "USB-C PD trigger", a little board that negotiates a specific PD voltage with a charger. There are a few variants, including ones with a button to select the voltage, but the most common one is a tiny board with a female USB-C connector called ZYPDS.</p><p>They are so cheap that I suspect the reason the laptops don't come with them is that 1) it requires a charger that can deliver that specific voltage, and people are already confused enough by USB-C and 2) the USB-C charger side is probably more expensive.</p><p>They usually support 15V/20V (selected by soldering a bridge), and while I suspect 15V would have worked too, I found one on eBay claiming 9V/12V. It has the same model name, but a different PCB color. Perfect!</p><figure><img src="https://blog.filippo.io/content/images/2020/04/Screen-Shot-2020-04-18-at-15.39.38.png" alt="an order for a blue 9V/12V ZYPDS for $4.42"></figure><p>This thing is small enough to fit in a cable (or even in the laptop, but I wanted to keep this as uninvasive as possible) so I also got a short cable with a barrel connector, and some heat shrink tubing.</p><p>When it arrived it was already configured for 12V, and delivered more or less on the spot.</p><figure><img src="https://blog.filippo.io/content/images/2020/04/zypds----7.jpeg" alt="multimeter connected to the ZYPDS showing 12.17V"></figure><p>The only tricky thing was figuring out the polarity of the cable and the connector. I learned that the polarity of the connector is the marking on the charger that looks a little like <code>⊖--Ｃ●--⊕</code>, and commonly the outer surface of the barrel is the negative. I figured out which wire connected to the outer surface with the multimeter continuity mode.</p><figure><img src="https://blog.filippo.io/content/images/2020/04/zypds----8.jpeg" alt="multimeter connected to the barrel connector and a wire from the cable"></figure><p>A mediocre soldering job later I had a short adaptor from USB-C to a barrel connector.</p><figure><img src="https://blog.filippo.io/content/images/2020/04/zypds----9-1.jpeg" alt="ZYPDS with two wires soldered to the connector pads"></figure><p>And it successfully charges the laptop!</p><figure><img src="https://blog.filippo.io/content/images/2020/04/zypds----11.jpeg" alt="the adaptor connected to a charging laptop"></figure><p>The only snag was that the barrel connector I got wasn't a perfect fit for the laptop, so it would lose connection if not pulled downwards. Knowing the setup worked, I just cut the stock charger and used its connector instead. It was more annoying to solder because it's a concentric cable, but it works perfectly.</p><p>With the heat shrink tubing on it doesn't even look that bad, and definitely beats carrying an extra charger around! (By the way, heat shrink tubing is amazing.)</p><figure><img src="https://blog.filippo.io/content/images/2020/04/zypds----2.jpeg" alt="the adaptor charging a laptop"></figure><p>For more hacks, <a href="https://twitter.com/FiloSottile">follow me on Twitter</a>.</p>
        </section></div>]]>
            </description>
            <link>https://blog.filippo.io/usb-c-charger-for-a-cheap-chromebook/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24752714</guid>
            <pubDate>Mon, 12 Oct 2020 09:20:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Overloading by Return Type in C++]]>
            </title>
            <description>
<![CDATA[
Score 91 | Comments 50 (<a href="https://news.ycombinator.com/item?id=24752527">thread link</a>) | @fanf2
<br/>
October 12, 2020 | https://artificial-mind.net/blog/2020/10/10/return-type-overloading | <a href="https://web.archive.org/web/*/https://artificial-mind.net/blog/2020/10/10/return-type-overloading">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main" role="main">
    <div>

        <article>

            

            
            <figure>
            </figure>
            

            <section>
                <div>
                    <div><div><pre><code><span>// this is OK</span>
<span>std</span><span>::</span><span>string</span> <span>to_string</span><span>(</span><span>int</span> <span>i</span><span>);</span>
<span>std</span><span>::</span><span>string</span> <span>to_string</span><span>(</span><span>bool</span> <span>b</span><span>);</span>

<span>std</span><span>::</span><span>string</span> <span>si</span> <span>=</span> <span>to_string</span><span>(</span><span>0</span><span>);</span>
<span>std</span><span>::</span><span>string</span> <span>sb</span> <span>=</span> <span>to_string</span><span>(</span><span>true</span><span>);</span>

<span>// this is not OK</span>
<span>int</span> <span>from_string</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>);</span>
<span>bool</span> <span>from_string</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>);</span>

<span>int</span> <span>i</span> <span>=</span> <span>from_string</span><span>(</span><span>"7"</span><span>);</span>
<span>bool</span> <span>b</span> <span>=</span> <span>from_string</span><span>(</span><span>"false"</span><span>);</span>
</code></pre></div></div>

<p>Overloading by argument types is a pretty straightforward feature of many imperative languages.
However, most of them don’t support overloading by return types.
In particular, C++ does not.
For example, <a href="https://godbolt.org/z/ddWcE8">clang complains</a>:</p>

<div><div><pre><code><span>&lt;</span><span>source</span><span>&gt;:</span><span>4</span><span>:</span><span>6</span><span>:</span> <span>error</span><span>:</span> <span>functions</span> <span>that</span> <span>differ</span> <span>only</span> <span>in</span> <span>their</span> <span>return</span> <span>type</span> <span>cannot</span> <span>be</span> <span>overloaded</span>
<span>bool</span> <span>from_string</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>);</span>
<span>~~~~</span> <span>^</span>

<span>&lt;</span><span>source</span><span>&gt;:</span><span>3</span><span>:</span><span>5</span><span>:</span> <span>note</span><span>:</span> <span>previous</span> <span>declaration</span> <span>is</span> <span>here</span>
<span>int</span> <span>from_string</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>);</span>
<span>~~~</span> <span>^</span>
</code></pre></div></div>

<p>So… what if I told you we actually <em>can</em> overload by return type in C++?</p>

<p>…</p>

<p>By a slight misuse of user-defined conversion operators.</p>

<h2 id="a-proof-of-concept">A Proof-of-Concept</h2>

<p><a href="https://en.cppreference.com/w/cpp/language/cast_operator">Conversion operators can be user-defined</a> in C++.
They allow us to add custom implicit or explicit conversion to our types.
These conversions themselves can also be overloaded, which leads us to a simple prototype:</p>

<div><div><pre><code><span>struct</span> <span>to_string_t</span>
<span>{</span>
    <span>std</span><span>::</span><span>string_view</span> <span>s</span><span>;</span>

    <span>operator</span> <span>int</span><span>()</span> <span>const</span><span>;</span>  <span>// int  from_string(std::string_view s);</span>
    <span>operator</span> <span>bool</span><span>()</span> <span>const</span><span>;</span> <span>// bool from_string(std::string_view s);</span>
<span>};</span>

<span>int</span> <span>i</span> <span>=</span> <span>to_string_t</span><span>{</span><span>"7"</span><span>};</span>
<span>bool</span> <span>b</span> <span>=</span> <span>to_string_t</span><span>{</span><span>"true"</span><span>};</span>
</code></pre></div></div>

<p><a href="https://godbolt.org/z/f3chze">Looking at godbolt</a>, this compiles and calls the desired conversion operators.
An important point to note here is that the compiler needs to know the <em>target</em> type for the conversion.
Thus, <code>auto i = to_string_t{"7"};</code> does not work as intended.
<code>i</code> will be of type <code>to_string_t</code> and not <code>int</code>.</p>

<h2 id="packaging-and-usage">Packaging and Usage</h2>

<p>We can achieve the original goal of an overloaded function by simply returning <code>to_string_t</code>:</p>

<div><div><pre><code><span>to_string_t</span> <span>from_string</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>)</span> <span>{</span> <span>return</span> <span>to_string_t</span><span>{</span><span>s</span><span>};</span> <span>}</span>

<span>int</span> <span>i</span> <span>=</span> <span>from_string</span><span>(</span><span>"7"</span><span>);</span>
<span>bool</span> <span>b</span> <span>=</span> <span>from_string</span><span>(</span><span>"true"</span><span>);</span>
</code></pre></div></div>

<p>Alternatively, one can adhere to <a href="https://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/">almost always auto</a> and write:</p>

<div><div><pre><code><span>auto</span> <span>i</span> <span>=</span> <span>int</span><span>(</span><span>from_string</span><span>(</span><span>"7"</span><span>));</span>
<span>auto</span> <span>b</span> <span>=</span> <span>bool</span><span>(</span><span>from_string</span><span>(</span><span>"true"</span><span>));</span>
</code></pre></div></div>

<p>This technique also works when calling other functions:</p>

<div><div><pre><code><span>void</span> <span>foo</span><span>(</span><span>bool</span> <span>b</span><span>,</span> <span>int</span> <span>i</span><span>);</span>

<span>foo</span><span>(</span><span>from_string</span><span>(</span><span>"false"</span><span>),</span> <span>from_string</span><span>(</span><span>"0"</span><span>));</span>
</code></pre></div></div>

<p>And even interacts properly with more complex, potentially templated objects:</p>

<div><div><pre><code><span>std</span><span>::</span><span>vector</span><span>&lt;</span><span>int</span><span>&gt;</span> <span>vec</span><span>;</span>
<span>std</span><span>::</span><span>map</span><span>&lt;</span><span>int</span><span>,</span> <span>bool</span><span>&gt;</span> <span>map</span><span>;</span>

<span>vec</span><span>.</span><span>push_back</span><span>(</span><span>from_string</span><span>(</span><span>"11"</span><span>));</span>
<span>map</span><span>[</span><span>from_string</span><span>(</span><span>"3"</span><span>)]</span> <span>=</span> <span>from_string</span><span>(</span><span>"true"</span><span>);</span>
<span>vec</span><span>.</span><span>emplace_back</span><span>(</span><span>from_string</span><span>(</span><span>"5"</span><span>));</span>
</code></pre></div></div>

<p>Note how <a href="https://en.cppreference.com/w/cpp/container/vector/emplace_back"><code>emplace_back</code> is templated</a> and internally constructs an <code>int</code> from our <code>to_string_t</code>.</p>

<p>Finally, <code>if (cond)</code> tries to convert <code>cond</code> to <code>bool</code> and thus also works:</p>

<div><div><pre><code><span>if</span> <span>(</span><span>from_string</span><span>(</span><span>"true"</span><span>))</span>
    <span>on_true</span><span>();</span>
<span>else</span>
    <span>on_false</span><span>();</span>
</code></pre></div></div>

<p>These examples can be seen in action <a href="https://godbolt.org/z/1x5de4">at godbolt</a>.</p>

<h2 id="where-it-doesnt-work">Where It Doesn’t Work</h2>

<p>While we can achieve overloading by return type in many cases using the conversion operator technique, it doesn’t always apply.
As previously mentioned, the compiler needs to know the target type to choose the proper conversion operator and will not convert unless forced to.
We already saw the simplest case where no conversion is applied:</p>

<div><div><pre><code><span>auto</span> <span>i</span> <span>=</span> <span>to_string</span><span>(</span><span>"7"</span><span>);</span>
<span>// decltype(i) is to_string_t, not int</span>
</code></pre></div></div>

<p>Another problematic case arises when paired with normal overloading that leads to ambiguities:</p>

<div><div><pre><code><span>void</span> <span>bar</span><span>(</span><span>int</span><span>);</span>
<span>void</span> <span>bar</span><span>(</span><span>bool</span><span>);</span>

<span>bar</span><span>(</span><span>from_string</span><span>(</span><span>"true"</span><span>));</span>
</code></pre></div></div>

<p>Which results in:</p>

<div><div><pre><code><span>error:</span> <span>call</span> <span>to</span> <span>'</span><span>bar</span><span>'</span> <span>is</span> <span>ambiguous</span>
<span>bar</span><span>(</span><span>from_string</span><span>(</span><span>"true"</span><span>));</span>
<span>^~~</span>
<span>&lt;</span><span>source</span><span>&gt;:</span><span>41</span><span>:</span><span>6</span><span>:</span> <span>note</span><span>:</span> <span>candidate</span> <span>function</span>
<span>void</span> <span>bar</span><span>(</span><span>int</span><span>);</span>
     <span>^</span>
<span>&lt;</span><span>source</span><span>&gt;:</span><span>42</span><span>:</span><span>6</span><span>:</span> <span>note</span><span>:</span> <span>candidate</span> <span>function</span>
<span>void</span> <span>bar</span><span>(</span><span>bool</span><span>);</span>
     <span>^</span>
</code></pre></div></div>

<p>Similarly, this means that <code>std::cout &lt;&lt; from_string("2") &lt;&lt; std::endl;</code> does not work.
(The error message for that is slightly ghastly as we have at least 16 candidate overloads.)</p>

<p>Finally, only one user-defined conversion can be applied implicitly, so the following <a href="https://godbolt.org/z/Gxq1rb">doesn’t work</a>:</p>

<div><div><pre><code><span>struct</span> <span>bar</span> 
<span>{</span>
    <span>bar</span><span>(</span><span>int</span> <span>i</span><span>);</span>
<span>};</span>

<span>void</span> <span>test_bar</span><span>(</span><span>bar</span> <span>b</span><span>);</span>

<span>test_bar</span><span>(</span><span>from_string</span><span>(</span><span>"3"</span><span>));</span>
</code></pre></div></div>

<p>The compiler only tries to directly convert <code>to_string_t</code> to <code>bar</code>:</p>

<div><div><pre><code><span>&lt;</span><span>source</span><span>&gt;:</span><span>22</span><span>:</span><span>5</span><span>:</span> <span>error</span><span>:</span> <span>no</span> <span>matching</span> <span>function</span> <span>for</span> <span>call</span> <span>to</span> <span>'</span><span>test_bar</span><span>'</span>
    <span>test_bar</span><span>(</span><span>from_string</span><span>(</span><span>"3"</span><span>));</span>
    <span>^~~~~~~~</span>
<span>&lt;</span><span>source</span><span>&gt;:</span><span>18</span><span>:</span><span>6</span><span>:</span> <span>note</span><span>:</span> <span>candidate</span> <span>function</span> <span>not</span> <span>viable</span><span>:</span> <span>no</span> <span>known</span> <span>conversion</span> <span>from</span> <span>'</span><span>to_string_t</span><span>'</span> <span>to</span> <span>'</span><span>bar</span><span>'</span> <span>for</span> <span>1s</span><span>t</span> <span>argument</span>
<span>void</span> <span>test_bar</span><span>(</span><span>bar</span> <span>b</span><span>);</span>
     <span>^</span>
</code></pre></div></div>

<p>All these cases can be resolved by explicitly adding a cast to the desired type, e.g. <code>int(to_string("10"))</code>.</p>

<h2 id="extensibility">Extensibility</h2>

<p>One important aspect of normal function overloading in C++ is the extensibility of the overload set.
Independent authors and libraries can add to the same overload set simply by providing a function with the proper name in the same namespace.
We might also add to the overload set via <a href="https://en.cppreference.com/w/cpp/language/adl">argument-dependent lookup</a>, though if this should be considered feature or bug is slightly controversial.</p>

<p>In its base form, our conversion operator approach is not extensible.
User-defined conversion functions must be member functions and we cannot add members to other classes post-hoc.
Thus, if our library defines</p>

<div><div><pre><code><span>struct</span> <span>to_string_t</span>
<span>{</span>
    <span>std</span><span>::</span><span>string_view</span> <span>s</span><span>;</span>

    <span>operator</span> <span>int</span><span>()</span> <span>const</span><span>;</span>  <span>// int  from_string(std::string_view s);</span>
    <span>operator</span> <span>bool</span><span>()</span> <span>const</span><span>;</span> <span>// bool from_string(std::string_view s);</span>
<span>};</span>
</code></pre></div></div>

<p>Then this means “overload for return types <code>int</code> and <code>bool</code>” and other libraries / files cannot add to that.</p>

<p>There is a way to fix this and add extensibility.
This will add some implementation complexity and for more specialized use cases, extensibility might not actually be desired.
However, I would argue that <code>from_string</code> should be designed with extensibility in mind.</p>

<blockquote>
  <p>Note: the rest of this section focuses more on metaprogramming and API design than the return-type overloading.
You can skip to the next section to see the final version.</p>
</blockquote>

<p>The solution here is that conversion functions can be templated.
We will use that to delegate the conversion to a template specialization, which is then properly extensible:</p>

<div><div><pre><code><span>template</span> <span>&lt;</span><span>class</span> <span>T</span><span>&gt;</span>
<span>struct</span> <span>to_string_impl</span> 
<span>{</span>
    <span>static_assert</span><span>(</span><span>always_false</span><span>&lt;</span><span>T</span><span>&gt;</span><span>,</span> <span>"conversion to T not supported"</span><span>);</span>
<span>};</span>

<span>struct</span> <span>to_string_t</span>
<span>{</span>
    <span>std</span><span>::</span><span>string_view</span> <span>s</span><span>;</span>

    <span>template</span> <span>&lt;</span><span>class</span> <span>T</span><span>&gt;</span>
    <span>operator</span> <span>T</span><span>()</span> <span>const</span> <span>{</span> <span>return</span> <span>to_string_impl</span><span>&lt;</span><span>T</span><span>&gt;::</span><span>from_string</span><span>(</span><span>s</span><span>);</span> <span>}</span>
<span>};</span>

<span>to_string_t</span> <span>from_string</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>)</span> <span>{</span> <span>return</span> <span>to_string_t</span><span>{</span><span>s</span><span>};</span> <span>}</span>
</code></pre></div></div>

<p>The conversion in <code>to_string_t</code> is now templated and always calls <code>to_string_impl&lt;T&gt;::from_string(s)</code>.
<code>to_string_impl&lt;T&gt;</code> is a class template that is specialized for all supported conversions.
Should a non-supported conversion be called, the <a href="https://artificial-mind.net/blog/2020/10/03/always-false"><code>always_false&lt;T&gt;</code> produces a nice(-ish) error message</a>.
We can now add our supported conversions via:</p>

<div><div><pre><code><span>template</span> <span>&lt;</span><span>&gt;</span>
<span>struct</span> <span>to_string_impl</span><span>&lt;</span><span>int</span><span>&gt;</span>
<span>{</span>
    <span>static</span> <span>int</span> <span>from_string</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>);</span>
<span>};</span>

<span>template</span> <span>&lt;</span><span>&gt;</span>
<span>struct</span> <span>to_string_impl</span><span>&lt;</span><span>bool</span><span>&gt;</span>
<span>{</span>
    <span>static</span> <span>bool</span> <span>from_string</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>);</span>
<span>};</span>
</code></pre></div></div>

<p>And similarly, other authors or the end user can add conversions for custom types.
Sometimes, it is useful to conditionally add conversions.
For example <code>my_range&lt;T&gt;</code> might only be supported if <code>T</code> itself supports <code>from_string</code>.
Thus, it is customary to add a second template argument to the base template:</p>

<div><div><pre><code><span>template</span> <span>&lt;</span><span>class</span> <span>T</span><span>,</span> <span>class</span> <span>=</span> <span>void</span><span>&gt;</span>
<span>struct</span> <span>to_string_impl</span> 
<span>{</span>
    <span>static_assert</span><span>(</span><span>always_false</span><span>&lt;</span><span>T</span><span>&gt;</span><span>,</span> <span>"conversion to T not supported"</span><span>);</span>
<span>};</span>
</code></pre></div></div>

<p>This enables our imaginary end user to write:</p>

<div><div><pre><code><span>template</span> <span>&lt;</span><span>class</span> <span>T</span><span>&gt;</span>
<span>struct</span> <span>to_string_impl</span><span>&lt;</span><span>my_range</span><span>&lt;</span><span>T</span><span>&gt;</span><span>,</span> <span>std</span><span>::</span><span>enable_if_t</span><span>&lt;</span><span>has_from_string</span><span>&lt;</span><span>T</span><span>&gt;&gt;&gt;</span>
<span>{</span>
    <span>static</span> <span>my_range</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>from_string</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>);</span> <span>// e.g. "[1, 2, 3]"</span>
<span>};</span>
</code></pre></div></div>

<p>The partial specialization is only “active”, if <code>T</code> itself satisfies <code>has_from_string&lt;T&gt;</code>.
(This, of course, is an example of <a href="https://en.cppreference.com/w/cpp/language/sfinae">SFINAE</a>).</p>

<p>Such a <code>has_from_string&lt;T&gt;</code> might look like this:</p>

<div><div><pre><code><span>template</span> <span>&lt;</span><span>class</span> <span>T</span><span>&gt;</span>
<span>auto</span> <span>impl_has_from_string</span><span>(</span><span>int</span><span>)</span> <span>-&gt;</span> <span>decltype</span><span>(</span>
    <span>to_string_impl</span><span>&lt;</span><span>T</span><span>&gt;::</span><span>from_string</span><span>(</span><span>std</span><span>::</span><span>declval</span><span>&lt;</span><span>std</span><span>::</span><span>string_view</span><span>&gt;</span><span>()),</span> 
    <span>std</span><span>::</span><span>true_type</span><span>{});</span>

<span>template</span> <span>&lt;</span><span>class</span> <span>T</span><span>&gt;</span>
<span>std</span><span>::</span><span>false_type</span> <span>impl_has_from_string</span><span>(</span><span>char</span><span>);</span>

<span>template</span> <span>&lt;</span><span>class</span> <span>T</span><span>&gt;</span>
<span>constexpr</span> <span>bool</span> <span>has_from_string</span> <span>=</span> <span>decltype</span><span>(</span><span>impl_has_from_string</span><span>&lt;</span><span>T</span><span>&gt;</span><span>(</span><span>0</span><span>))</span><span>::</span><span>value</span><span>;</span>
</code></pre></div></div>

<p>Here, we use <a href="https://en.cppreference.com/w/cpp/language/sfinae#Expression_SFINAE">Expression SFINAE</a> to disable the first <code>impl_has_from_string</code> overload if <code>to_string_impl&lt;T&gt;::from_string</code> does not exist.
<code>impl_has_from_string</code> itself is overloaded on <code>int</code> and <code>char</code> and called via <code>impl_has_from_string&lt;T&gt;(0)</code>.
This is a cheap way to say “try the <code>int</code> overload first and if it doesn’t apply, take the <code>char</code> overload”.
However, if we try to check <code>has_from_string&lt;T&gt;</code> for some type that has no <code>from_string</code>, we trigger the <code>static_assert(always_false&lt;T&gt;);</code> in the base template.
Thus, we move the <code>static_assert</code> to <code>to_string_t::operator T()</code> (see next section).</p>

<p>Note that the templated <code>to_string_impl</code> class is not the only option.
We could also use <a href="https://arne-mertz.de/2016/10/tag-dispatch/">tag dispatch</a> or even normal overloading, e.g. by delegating to (a user-extensible) <code>void convert_to(std::string_view s, T&amp; v)</code> that is overloaded on the second parameter.</p>

<h2 id="final-version">Final Version</h2>

<p>For reference, our extensible and checkable version of return-type overloading in C++:</p>

<div><div><pre><code><span>// base template, specialize and provide a static from_string method</span>
<span>template</span> <span>&lt;</span><span>class</span> <span>T</span><span>,</span> <span>class</span> <span>=</span> <span>void</span><span>&gt;</span>
<span>struct</span> <span>to_string_impl</span> 
<span>{</span>
<span>};</span>

<span>namespace</span> <span>detail</span> <span>// hide impl detail</span>
<span>{</span>
<span>template</span> <span>&lt;</span><span>class</span> <span>T</span><span>&gt;</span>
<span>auto</span> <span>has_from_string</span><span>(</span><span>int</span><span>)</span> <span>-&gt;</span> <span>decltype</span><span>(</span>
    <span>to_string_impl</span><span>&lt;</span><span>T</span><span>&gt;::</span><span>from_string</span><span>(</span><span>std</span><span>::</span><span>declval</span><span>&lt;</span><span>std</span><span>::</span><span>string_view</span><span>&gt;</span><span>()),</span> 
    <span>std</span><span>::</span><span>true_type</span><span>{});</span>

<span>template</span> <span>&lt;</span><span>class</span> <span>T</span><span>&gt;</span>
<span>std</span><span>::</span><span>false_type</span> <span>has_from_string</span><span>(</span><span>char</span><span>);</span>
<span>}</span>

<span>// check if T has a from_string</span>
<span>template</span> <span>&lt;</span><span>class</span> <span>T</span><span>&gt;</span>
<span>constexpr</span> <span>bool</span> <span>has_from_string</span> <span>=</span> <span>decltype</span><span>(</span><span>detail</span><span>::</span><span>has_from_string</span><span>&lt;</span><span>T</span><span>&gt;</span><span>(</span><span>0</span><span>))</span><span>::</span><span>value</span><span>;</span>

<span>// return-type overload mechanism</span>
<span>struct</span> <span>to_string_t</span>
<span>{</span>
    <span>std</span><span>::</span><span>string_view</span> <span>s</span><span>;</span>

    <span>template</span> <span>&lt;</span><span>class</span> <span>T</span><span>&gt;</span>
    <span>operator</span> <span>T</span><span>()</span> <span>const</span> 
    <span>{</span>
        <span>static_assert</span><span>(</span><span>has_from_string</span><span>&lt;</span><span>T</span><span>&gt;</span><span>,</span> <span>"conversion to T not supported"</span><span>);</span>
        <span>return</span> <span>to_string_impl</span><span>&lt;</span><span>T</span><span>&gt;::</span><span>from_string</span><span>(</span><span>s</span><span>);</span> 
    <span>}</span>
<span>};</span>

<span>// convenience wrapper to provide a "return-type overloaded function"</span>
<span>to_string_t</span> <span>from_string</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>)</span> <span>{</span> <span>return</span> <span>to_string_t</span><span>{</span><span>s</span><span>};</span> <span>}</span>
</code></pre></div></div>

<p>Anyone can register new types, optionally using SFINAE to conditionally support them:</p>

<div><div><pre><code><span>template</span> <span>&lt;</span><span>&gt;</span>
<span>struct</span> <span>to_string_impl</span><span>&lt;</span><span>int</span><span>&gt;</span>
<span>{</span>
    <span>static</span> <span>int</span> <span>from_string</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>);</span>
<span>};</span>

<span>template</span> <span>&lt;</span>…</code></pre></div></div></div></section></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://artificial-mind.net/blog/2020/10/10/return-type-overloading">https://artificial-mind.net/blog/2020/10/10/return-type-overloading</a></em></p>]]>
            </description>
            <link>https://artificial-mind.net/blog/2020/10/10/return-type-overloading</link>
            <guid isPermaLink="false">hacker-news-small-sites-24752527</guid>
            <pubDate>Mon, 12 Oct 2020 08:43:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Microsoft SharePoint is being used to send spam]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24751422">thread link</a>) | @chmaynard
<br/>
October 11, 2020 | https://utcc.utoronto.ca/~cks/space/blog/spam/SharepointSpam | <a href="https://web.archive.org/web/*/https://utcc.utoronto.ca/~cks/space/blog/spam/SharepointSpam">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><h2>Microsoft SharePoint is being used to send spam</h2>

	<p><small>October 11, 2020</small></p>
</div><div><p>I'm paying more attention to what our mail system detects as spam
and where it's coming from than usual, so I'm getting to notice
things (or, in the alternate phrasing, being forced to notice
things). Today's thing that I noticed is that to no one's surprise,
Microsoft SharePoint is currently being used as a spam sending
vector. I say 'to no one's surprise' because it's a long standing
rule that <a href="https://utcc.utoronto.ca/~cks/space/blog/spam/FirstFreemailRule">anything that can be used to send email to random people
with any user supplied content will be exploited for spam</a> (<a href="https://utcc.utoronto.ca/~cks/space/blog/spam/GoogleAccountNotificationSpam">eg</a>).</p>

<p>The email we see is genuine SharePoint email sent from Microsoft,
DKIM signed by both sharepointonline.com and 'spoapaceop.onmicrosoft.com',
with the envelope address of no-reply@sharepointonline.com and sent
to us by outlook.com machines.  Typical headers look like:</p>

<blockquote><p>From: Katholina Keth &lt;no-reply@sharepointonline.com&gt; <br>
Subject: Katholina Keth shared "â�¤Unsatisfied women Need a  guy â�¤" with you.</p>
</blockquote>

<p>The header samples I've seen have a long list of To: addresses at
all sorts of places (not just our university subdomain or even the
university as a whole). Some messages have a Reply-To: pointing to
various addresses at a legitimate domain, which may be a signal
that the spammer has compromised a part of that organization so
that they can either hijack accounts there or register their own,
then use them to register in SharePoint.</p>

<p>(I only have access to some message headers, so I can't tell what
is in the body of the email. Hopefully Microsoft doesn't allow
SharePoint emails to include substantial amounts of user-supplied
content, so all people get is a link to where the spam is.)</p>

<p>At one level all of this is unsurprising. As a product feature,
it's attractive to let SharePoint users share their files and other
SharePoint materials with people who haven't already signed up with
SharePoint, and when you do that of course SharePoint has to tell
the target something about what is being shared. The title is an
obvious thing to include, and you have to let users change the title
of their documents. But now Microsoft has given spammers the ability
to send some amount of relatively arbitrary text to relatively
arbitrary email addresses.</p>

<p>(I would like to say 'and now Microsoft has a problem', but of
course they don't. Very few people are in a position where they can
block SharePoint email over this.)</p>
</div></div>]]>
            </description>
            <link>https://utcc.utoronto.ca/~cks/space/blog/spam/SharepointSpam</link>
            <guid isPermaLink="false">hacker-news-small-sites-24751422</guid>
            <pubDate>Mon, 12 Oct 2020 04:34:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Case 001 – The Stolen Szechuan Sauce]]>
            </title>
            <description>
<![CDATA[
Score 80 | Comments 11 (<a href="https://news.ycombinator.com/item?id=24751122">thread link</a>) | @wglb
<br/>
October 11, 2020 | https://dfirmadness.com/the-stolen-szechuan-sauce/ | <a href="https://web.archive.org/web/*/https://dfirmadness.com/the-stolen-szechuan-sauce/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
          <p><span><span>Reading Time: </span> <span>5</span> <span>minutes</span></span></p><h2>The Case of the Stolen Szechuan Sauce</h2>
<div id="attachment_533"><p><img aria-describedby="caption-attachment-533" loading="lazy" src="https://i1.wp.com/dfirmadness.com/wp-content/uploads/2020/09/stolen-szechuan-sauce.jpg?resize=1024%2C930&amp;ssl=1" alt="The Stolen Szechuan Sauce" width="1024" height="930" srcset="https://i1.wp.com/dfirmadness.com/wp-content/uploads/2020/09/stolen-szechuan-sauce.jpg?w=1024&amp;ssl=1 1024w, https://i1.wp.com/dfirmadness.com/wp-content/uploads/2020/09/stolen-szechuan-sauce.jpg?resize=300%2C272&amp;ssl=1 300w, https://i1.wp.com/dfirmadness.com/wp-content/uploads/2020/09/stolen-szechuan-sauce.jpg?resize=768%2C698&amp;ssl=1 768w" sizes="(max-width: 1024px) 100vw, 1024px" data-recalc-dims="1"></p><p id="caption-attachment-533">The Stolen Szechuan Sauce [image courtesy of <a href="https://www.deviantart.com/artwork-tee/art/Mulan-Szechuan-McNugget-Sauce-683650185" target="_blank" rel="noopener noreferrer">artwork-tee</a>]</p></div><p>Your bedroom door bursts open, shattering your pleasant dreams. Your mad scientist of a boss begins dragging you out of bed by the ankle. He simultaneously explains between belches that the FBI contacted him. They found his recently-developed Szechuan sauce recipe on the dark web. As you careen past the door frame you are able to grab your incident response “Go-Bag”. Inside is your trusty incident thumb drive and laptop.</p>
<p>Resources for getting started will be provided at the <em><span>bottom of the post</span></em>. <em><span>Additionally</span><span>, i</span><span>ndividual articles on working through the artifacts and solving the case will be posted in the coming weeks!</span></em> So be sure to check back soon.</p>
<h3>Purpose</h3>
<p>This lab is for learning and practicing forensics obviously! We will also be providing training for free through a series of upcoming posts on how to solve the case!</p>
<h3>Target Audience</h3>
<p>Experienced digital forensics Jedi Masters who want a fun case as well as aspiring forensics folks who want to learn and practice.</p>
<p>Teachers, Professors, Mentors, and Students are welcome to use these materials so long as credit is given to this site and its authors.</p>
<h3>Game-isms</h3>
<p>With training in mind, there are intentional (not to mention unintentional) mistakes in the data. Consequently, the timelines are sometimes compressed. For example, the time between the victim’s notification and when someone acquired the images does not make sense in the real world. Likewise, some of the adversary activities are stealthy, funny, or enable training efforts. However, the attack mirrors real-world adversary tactics, techniques, tools, and procedures. Consequently, it will support training and real-world incident preparedness.</p>
<h3>Questions to Answer / Goals</h3>
<ol>
<li>What’s the Operating System of the Server?</li>
<li>What’s the Operating System of the Desktop?</li>
<li>What was the local time of the Server?</li>
<li>Was there a breach?</li>
<li>What was the initial entry vector (how did they get in)?</li>
<li>Was malware used? If so what was it? If there was malware answer the following:
<ol>
<li>What process was malicious?</li>
<li>Identify the IP Address that delivered the payload.</li>
<li>What IP Address is the malware calling to?</li>
<li>Where is this malware on disk?</li>
<li>When did it first appear?</li>
<li>Did someone move it?</li>
<li>What were the capabilities of this malware?</li>
<li>Is this malware easily obtained?</li>
<li>Was this malware installed with persistence on any machine?
<ol>
<li>When?</li>
<li>Where?</li>
</ol>
</li>
</ol>
</li>
<li>What malicious IP Addresses were involved?
<ol>
<li>Were any IP Addresses from known adversary infrastructure?</li>
<li>Are these pieces of adversary infrastructure involved in other attacks around the time of the attack?</li>
</ol>
</li>
<li>Did the attacker access any other systems?
<ol>
<li>How?</li>
<li>When?</li>
<li>Did the attacker steal or access any data?
<ol>
<li>When?</li>
</ol>
</li>
</ol>
</li>
<li>What was the network layout of the victim network?</li>
<li>What architecture changes should be made immediately?<strong><br>
</strong></li>
<li>Did the attacker steal the Szechuan sauce? If so, what time?</li>
<li>Did the attacker steal or access any other sensitive files? If so, what times?</li>
<li>Finally, when was the last known contact with the adversary?</li>
</ol>
<h3>Advanced and Bonus Questions</h3>
<ol>
<li>What CIS Top 20 or SANS Top 20 Controls would have <em>directly </em>prevented this breach?</li>
<li>What major architecture improvement could be made that would have prevented this breach?</li>
<li>Can you identify policy improvements or controls that should be implemented to secure this environment?</li>
<li>Which users have actually logged onto the DC?</li>
<li>Which users have actually logged onto the Desktop machine?</li>
<li>What are the passwords for the users in the domain?</li>
<li>Can you recover the original file about Beth’s Secrets?
<ol>
<li>What was the original name?</li>
<li>Original Contents?</li>
</ol>
</li>
<li>Finally, what file was time stomped?</li>
</ol>
<p>The answers for the Stolen Szechuan Sauce are here. A humble recommendation: require that students produce screenshots with their names in a report explaining their findings since the answers are here.</p>
<h3>Client Interview</h3>
<p><img loading="lazy" src="https://i1.wp.com/dfirmadness.com/wp-content/uploads/2020/09/RickSanchez.jpg?resize=600%2C338&amp;ssl=1" alt="Rick Sanchez and The Stolen Szechuan Sauce" width="600" height="338" srcset="https://i1.wp.com/dfirmadness.com/wp-content/uploads/2020/09/RickSanchez.jpg?w=600&amp;ssl=1 600w, https://i1.wp.com/dfirmadness.com/wp-content/uploads/2020/09/RickSanchez.jpg?resize=300%2C169&amp;ssl=1 300w" sizes="(max-width: 600px) 100vw, 600px" data-recalc-dims="1"></p>
<p>This interview was conducted while retrieving the artifacts from the system using FTK Imager Lite and a Redline Collector.</p>
<p><strong>Where were the files in question stored?</strong></p>
<p>On the <em>bellllcchhhh</em> File Server on the Domain Controller.</p>
<p><strong>What was the Operating System version of this server?</strong></p>
<p><em>Belch</em> Whatever that idiot Jerry put on there a few years back.</p>
<p><strong>May I have a network map where the affected systems were located?</strong></p>
<p>Sure. All the systems were loc-<em>bellllch</em>-ated in 10.42 something something</p>
<p><strong>Were there any other systems or files you are concerned about?</strong></p>
<p>Yeah, certainly. Morty is ramble <em>belllch</em> rambling on about something he might have had on there. Also, there was a secret about Be<em>belllech</em> …. Beth on the server. So if you find it, and YOU TELL ANYBODY I WILL KILL YOU!</p>
<p>(The threat here matches a character from a popular cartoon character and not any real threat so stay calm).</p>

<p><strong>Note:</strong> This incident occurred at an organization located in Colorado in September. So, this places the incident at UTC -6. Keep this in mind when looking at the output of various tools.</p>

<p><strong>The questions here are not a full example of what to ask during a breach.</strong> It’s part of the training scenario as much as anything else here. It’s also a decent starting point to your investigation would be going through the questions for the exercise and trying to answer those and use them as pivots.</p>
<h3>Potential Questions You May Have</h3>
<p><strong>Why (outdated) Windows 2012?</strong></p>
<p>Its end of life isn’t until 2023 and plenty of people still use it. In fact, investigations reveal that even Windows 2008r2 shows high usage despite an End of Life date of January 2020.</p>
<p><strong>Windows 10?</strong></p>
<p>This will contrast nicely with 2012 for the Memory Forensics as it uses compressed memory. There will also be a difference in Disk Artifacts to explore between the two.</p>
<p><strong>I Don’t Know Forensics! Where do I start?</strong></p>
<p>That’s specifically the point of this training set! We will teach you how to approach this investigation, how to set-up your environment, analyze artifacts, and then to generate a great report!</p>
<h3>The Artifacts</h3>
<p>Separate posts will start appearing soon on how to approach these artifacts, and how to answer the questions above.</p>
<h4>Estimated Difficulty Levels:</h4>
<p><strong>Nightmare</strong> – Disk Image Only</p>
<p><strong>Ultra-Violence</strong> – Disk and Memory</p>
<p><strong>Hurt Me Plenty</strong> – Disk, Memory, and Autoruns</p>
<p><strong>I’m Too Young to Die</strong> – Disk, Memory, Autoruns, and PCAPS.</p>
<p>Also, for a fun twist, try and solve as much of the case as you can without the artifacts from the Desktop.</p>
<hr>
<p><strong>To get the E01’s you may need to use Firefox in a Private Window, hit the back button, select the file, and hit Download.</strong></p>
<p>However, if you are worried about storage and bandwidth ditch the <code>protected files</code> and the <code>pagefiles</code> for now.</p>
<hr>
<p>DC01 <a href="https://dfirmadness.com/case001/DC01-E01.zip">Disk Image (EO1)</a></p>
<p>DC01 <a href="https://dfirmadness.com/case001/DC01-memory.zip">Memory</a> and <a href="https://dfirmadness.com/case001/DC01-pagefile.zip">PageFile</a></p>
<p>DC01 <a href="https://dfirmadness.com/case001/DC01-autorunsc.zip"><span>Autoruns</span></a></p>
<p>DC01 <a href="https://dfirmadness.com/case001/DC01-ProtectedFiles.zip"><span>Protected Files</span></a></p>
<p>Case001 <a href="https://dfirmadness.com/case001/case001-pcap.zip"><span>PCAP</span></a></p>
<p>Desktop <a href="https://dfirmadness.com/case001/DESKTOP-E01.zip">Disk Image (E01)</a></p>
<p>Desktop <a href="https://dfirmadness.com/case001/DESKTOP-SDN1RPT-memory.zip">Memory</a> and <a href="https://dfirmadness.com/case001/Desktop-SDN1RPT-pagefile.zip"><span>PageFile</span></a></p>
<p>Desktop <a href="https://dfirmadness.com/case001/DESKTOP-SDN1RPT-autorunsc.zip"><span>Autoruns</span></a></p>
<p>Desktop <a href="https://dfirmadness.com/case001/DESKTOP-SDN1RPT-Protected%20Files.zip"><span>Protected Files</span></a></p>
<p>To verify file integrity in Windows Powershell, from the Download Dir: Get-FileHash -Algorithm md5 *</p>
<p>To verify file integrity in Linux, from the Download Dir: md5sum *</p>
<p>MD5 422046B753CF8A4DF49D2C4CE892DB16&nbsp;&nbsp;&nbsp; case001-pcap.zip<br>
MD5 964F2D710687D170C77C94947DA29E66&nbsp;&nbsp;&nbsp; DC01-autorunsc.zip<br>
MD5 E57FC636E833C5F1AB58DFACE873BBDE&nbsp;&nbsp;&nbsp;&nbsp; DC01-E01.zip<br>
MD5 64A4E2CB47138084A5C2878066B2D7B1 &nbsp;&nbsp; DC01-memory.zip<br>
MD5 964EEAF0009D08CC101DE4A83A4E5D23&nbsp;&nbsp;&nbsp; DC01-pagefile.zip<br>
MD5 AD29830A583EFE49C8C1C35FAFFD264F&nbsp;&nbsp;&nbsp; DC01-ProtectedFiles.zip<br>
MD5 71C5C3509331F472ABCDF81EB6EFFF07&nbsp;&nbsp;&nbsp;&nbsp; DESKTOP-E01.zip<br>
MD5 3627DCAFA54E1365489A4EC0CC3D6A1C&nbsp;&nbsp; DESKTOP-SDN1RPT-autrunsc.zip<br>
MD5 CF31E2635C77811AAA1BB04A92A721E2&nbsp;&nbsp;&nbsp; DESKTOP-SDN1RPT-memory.zip<br>
MD5 45C096F2688A0B5DE0346FB72391B245&nbsp;&nbsp;&nbsp; Desktop-SDN1RPT-pagefile.zip<br>
MD5 3E1A358D50003A9351AC2160AE6F0495&nbsp;&nbsp;&nbsp; DESKTOP-SDN1RPT-Protected Files.zip</p>
<hr>
<h3>Choose Your Next Move</h3>
<p><a href="https://dfirmadness.com/case-001-memory-analysis/" target="_blank" rel="noopener noreferrer">Learn how to look at the memory!</a></p>
<p>How to look at the autoruns!</p>
<p><a href="https://dfirmadness.com/case-001-pcap-analysis/">Show me how to look at the PCAP</a>!</p>
<p>I want to learn how to look at the Disks!</p>
<p><a href="https://dfirmadness.com/answers-to-szechuan-case-001/" target="_blank" rel="noopener noreferrer">Give me the answers!</a></p>
<h3>That’s The Case of the Stolen Szechuan Sauce, in conclusion, please feel free to leave your thoughts in the comments.</h3>
                <div>
                    
                                        
        <div>

                <p><a href="https://dfirmadness.com/author/smithsjames/"><img alt="" src="https://secure.gravatar.com/avatar/7cdd754f0eabaed51cf5b298c8e0f5bb?s=150&amp;r=pg" srcset="https://secure.gravatar.com/avatar/7cdd754f0eabaed51cf5b298c8e0f5bb?s=300&amp;r=pg 2x" height="150" width="150" loading="lazy"></a>
                </p>
                
        </div>

                                            </div>
                
                              

        </div></div>]]>
            </description>
            <link>https://dfirmadness.com/the-stolen-szechuan-sauce/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24751122</guid>
            <pubDate>Mon, 12 Oct 2020 03:24:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[PySDR: A Guide to SDR and DSP Using Python]]>
            </title>
            <description>
<![CDATA[
Score 194 | Comments 13 (<a href="https://news.ycombinator.com/item?id=24750588">thread link</a>) | @sohkamyung
<br/>
October 11, 2020 | https://pysdr.org/index.html | <a href="https://web.archive.org/web/*/https://pysdr.org/index.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
  <div>
    
      <div role="navigation" aria-label="main navigation">
        <div>
<p>
  <a href="#">
    <img src="https://pysdr.org/_static/logo.svg" alt="Logo">
    
    </a></p>



<p>By <a href="https://www.cs.umd.edu/people/sdr">Dr. Marc Lichtman</a></p>






<h3>Navigation</h3>
<ul>
<li><a href="https://pysdr.org/content/intro.html">1. Introduction</a></li>
<li><a href="https://pysdr.org/content/frequency_domain.html">2. Frequency Domain</a></li>
<li><a href="https://pysdr.org/content/sampling.html">3. IQ Sampling</a></li>
<li><a href="https://pysdr.org/content/digital_modulation.html">4. Digital Modulation</a></li>
<li><a href="https://pysdr.org/content/pluto_intro.html">5. PlutoSDR Basics</a></li>
<li><a href="https://pysdr.org/content/pluto_advanced.html">6. PlutoSDR Advanced Topics</a></li>
<li><a href="https://pysdr.org/content/noise.html">7. Noise and dB</a></li>
<li><a href="https://pysdr.org/content/filters.html">8. Filters</a></li>
<li><a href="https://pysdr.org/content/link_budgets.html">9. Link Budgets</a></li>
<li><a href="https://pysdr.org/content/channel_coding.html">10. Channel Coding</a></li>
<li><a href="https://pysdr.org/content/iq_files.html">11. IQ Files</a></li>
<li><a href="https://pysdr.org/content/multipath_fading.html">12. Multipath Fading</a></li>
<li><a href="https://pysdr.org/content/pulse_shaping.html">13. Pulse Shaping</a></li>
<li><a href="https://pysdr.org/content/sync.html">14. Synchronization</a></li>
<li><a href="https://pysdr.org/content/appendix_text_comparison.html">15. Textbook Comparison</a></li>
<li><a href="https://pysdr.org/content/about_author.html">16. About the Author</a></li>
</ul>


<hr>
<ul>
    
    <li><a href="https://repl.it/languages/python3">Online Python Console</a></li>
    
</ul>
<div>
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
      <li>Next: <a href="https://pysdr.org/content/intro.html" title="next chapter"><span>1. </span>Introduction</a></li>
  </ul></li>
</ul>
</div>


        </div>
      </div>
      <div>
        <div>
              <div>
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          <a href="https://pysdr.org/content/intro.html" title="Next document"><span>1. </span>Introduction</a>
          →
        </li>
    </ul>
  </nav>
              </div>
          

          <div role="main">
            
  <div id="pysdr-a-guide-to-sdr-and-dsp-using-python">

<p>by <a href="https://www.cs.umd.edu/people/sdr/" rel="noopener noreferrer" target="_blank">Dr. Marc Lichtman</a></p>
<div>
<ul>
<li><a href="https://pysdr.org/content/intro.html">1. Introduction</a><ul>
<li><a href="https://pysdr.org/content/intro.html#purpose-and-target-audience">Purpose and Target Audience</a></li>
<li><a href="https://pysdr.org/content/intro.html#contributing">Contributing</a></li>
<li><a href="https://pysdr.org/content/intro.html#acknowledgements">Acknowledgements</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/frequency_domain.html">2. Frequency Domain</a><ul>
<li><a href="https://pysdr.org/content/frequency_domain.html#fourier-series">Fourier Series</a></li>
<li><a href="https://pysdr.org/content/frequency_domain.html#time-frequency-pairs">Time-Frequency Pairs</a></li>
<li><a href="https://pysdr.org/content/frequency_domain.html#fourier-transform">Fourier Transform</a></li>
<li><a href="https://pysdr.org/content/frequency_domain.html#time-frequency-properties">Time-Frequency Properties</a></li>
<li><a href="https://pysdr.org/content/frequency_domain.html#fast-fourier-transform-fft">Fast Fourier Transform (FFT)</a></li>
<li><a href="https://pysdr.org/content/frequency_domain.html#negative-frequencies">Negative Frequencies</a></li>
<li><a href="https://pysdr.org/content/frequency_domain.html#order-in-time-doesn-t-matter">Order in Time Doesn’t Matter</a></li>
<li><a href="https://pysdr.org/content/frequency_domain.html#fft-in-python">FFT in Python</a></li>
<li><a href="https://pysdr.org/content/frequency_domain.html#windowing">Windowing</a></li>
<li><a href="https://pysdr.org/content/frequency_domain.html#fft-sizing">FFT Sizing</a></li>
<li><a href="https://pysdr.org/content/frequency_domain.html#spectrogram-waterfall">Spectrogram/Waterfall</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/sampling.html">3. IQ Sampling</a><ul>
<li><a href="https://pysdr.org/content/sampling.html#sampling-basics">Sampling Basics</a></li>
<li><a href="https://pysdr.org/content/sampling.html#nyquist-sampling">Nyquist Sampling</a></li>
<li><a href="https://pysdr.org/content/sampling.html#quadrature-sampling">Quadrature Sampling</a></li>
<li><a href="https://pysdr.org/content/sampling.html#complex-numbers">Complex Numbers</a></li>
<li><a href="https://pysdr.org/content/sampling.html#receiver-side">Receiver Side</a></li>
<li><a href="https://pysdr.org/content/sampling.html#receiver-architectures">Receiver Architectures</a></li>
<li><a href="https://pysdr.org/content/sampling.html#carrier-and-downconversion">Carrier and Downconversion</a></li>
<li><a href="https://pysdr.org/content/sampling.html#baseband">Baseband</a></li>
<li><a href="https://pysdr.org/content/sampling.html#dc-spike-and-offset-tuning">DC Spike and Offset Tuning</a></li>
<li><a href="https://pysdr.org/content/sampling.html#sampling-using-the-plutosdr">Sampling Using the PlutoSDR</a></li>
<li><a href="https://pysdr.org/content/sampling.html#calculating-average-power">Calculating Average Power</a></li>
<li><a href="https://pysdr.org/content/sampling.html#calculating-power-spectral-density">Calculating Power Spectral Density</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/digital_modulation.html">4. Digital Modulation</a><ul>
<li><a href="https://pysdr.org/content/digital_modulation.html#symbols">Symbols</a></li>
<li><a href="https://pysdr.org/content/digital_modulation.html#wireless-symbols">Wireless Symbols</a></li>
<li><a href="https://pysdr.org/content/digital_modulation.html#amplitude-shift-keying-ask">Amplitude Shift Keying (ASK)</a></li>
<li><a href="https://pysdr.org/content/digital_modulation.html#phase-shift-keying-psk">Phase Shift Keying (PSK)</a></li>
<li><a href="https://pysdr.org/content/digital_modulation.html#iq-plots-constellations">IQ Plots/Constellations</a></li>
<li><a href="https://pysdr.org/content/digital_modulation.html#quadrature-amplitude-modulation-qam">Quadrature Amplitude Modulation (QAM)</a></li>
<li><a href="https://pysdr.org/content/digital_modulation.html#frequency-shift-keying-fsk">Frequency Shift Keying (FSK)</a></li>
<li><a href="https://pysdr.org/content/digital_modulation.html#python-example">Python Example</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/pluto_intro.html">5. PlutoSDR Basics</a><ul>
<li><a href="https://pysdr.org/content/pluto_intro.html#software-drivers-install">Software/Drivers Install</a></li>
<li><a href="https://pysdr.org/content/pluto_intro.html#python-exercises">Python Exercises</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/pluto_advanced.html">6. PlutoSDR Advanced Topics</a><ul>
<li><a href="https://pysdr.org/content/pluto_advanced.html#automatic-gain-control">Automatic Gain Control</a></li>
<li><a href="https://pysdr.org/content/pluto_advanced.html#transmitting-over-the-air-legally">Transmitting Over the Air Legally</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/noise.html">7. Noise and dB</a><ul>
<li><a href="https://pysdr.org/content/noise.html#gaussian-noise">Gaussian Noise</a></li>
<li><a href="https://pysdr.org/content/noise.html#decibels-db">Decibels (dB)</a></li>
<li><a href="https://pysdr.org/content/noise.html#noise-in-frequency-domain">Noise in Frequency Domain</a></li>
<li><a href="https://pysdr.org/content/noise.html#complex-noise">Complex Noise</a></li>
<li><a href="https://pysdr.org/content/noise.html#awgn">AWGN</a></li>
<li><a href="https://pysdr.org/content/noise.html#snr">SNR</a></li>
<li><a href="https://pysdr.org/content/noise.html#external-resources">External Resources</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/filters.html">8. Filters</a><ul>
<li><a href="https://pysdr.org/content/filters.html#filter-basics">Filter Basics</a></li>
<li><a href="https://pysdr.org/content/filters.html#filter-representation">Filter Representation</a></li>
<li><a href="https://pysdr.org/content/filters.html#filter-implementation">Filter Implementation</a></li>
<li><a href="https://pysdr.org/content/filters.html#filter-design-tools">Filter Design Tools</a></li>
<li><a href="https://pysdr.org/content/filters.html#convolution">Convolution</a></li>
<li><a href="https://pysdr.org/content/filters.html#filter-design-in-python">Filter Design in Python</a></li>
<li><a href="https://pysdr.org/content/filters.html#intro-to-pulse-shaping">Intro to Pulse Shaping</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/link_budgets.html">9. Link Budgets</a><ul>
<li><a href="https://pysdr.org/content/link_budgets.html#intro">Intro</a></li>
<li><a href="https://pysdr.org/content/link_budgets.html#signal-power-budget">Signal Power Budget</a></li>
<li><a href="https://pysdr.org/content/link_budgets.html#noise-power-budget">Noise Power Budget</a></li>
<li><a href="https://pysdr.org/content/link_budgets.html#snr">SNR</a></li>
<li><a href="https://pysdr.org/content/link_budgets.html#example-link-budget-ads-b">Example Link Budget: ADS-B</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/channel_coding.html">10. Channel Coding</a><ul>
<li><a href="https://pysdr.org/content/channel_coding.html#why-we-need-channel-coding">Why We Need Channel Coding</a></li>
<li><a href="https://pysdr.org/content/channel_coding.html#types-of-codes">Types of Codes</a></li>
<li><a href="https://pysdr.org/content/channel_coding.html#code-rate">Code-Rate</a></li>
<li><a href="https://pysdr.org/content/channel_coding.html#modulation-and-coding">Modulation and Coding</a></li>
<li><a href="https://pysdr.org/content/channel_coding.html#hamming-code">Hamming Code</a></li>
<li><a href="https://pysdr.org/content/channel_coding.html#soft-vs-hard-decoding">Soft vs Hard Decoding</a></li>
<li><a href="https://pysdr.org/content/channel_coding.html#shannon-limit">Shannon Limit</a></li>
<li><a href="https://pysdr.org/content/channel_coding.html#state-of-the-art-codes">State of the Art Codes</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/iq_files.html">11. IQ Files</a><ul>
<li><a href="https://pysdr.org/content/iq_files.html#binary-files">Binary Files</a></li>
<li><a href="https://pysdr.org/content/iq_files.html#python-examples">Python Examples</a></li>
<li><a href="https://pysdr.org/content/iq_files.html#max-values-and-saturation">Max Values and Saturation</a></li>
<li><a href="https://pysdr.org/content/iq_files.html#annotating-iq-files">Annotating IQ Files</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/multipath_fading.html">12. Multipath Fading</a><ul>
<li><a href="https://pysdr.org/content/multipath_fading.html#multipath">Multipath</a></li>
<li><a href="https://pysdr.org/content/multipath_fading.html#fading">Fading</a></li>
<li><a href="https://pysdr.org/content/multipath_fading.html#mitigating-multipath-fading">Mitigating Multipath Fading</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/pulse_shaping.html">13. Pulse Shaping</a><ul>
<li><a href="https://pysdr.org/content/pulse_shaping.html#inter-symbol-interference-isi">Inter-Symbol-Interference (ISI)</a></li>
<li><a href="https://pysdr.org/content/pulse_shaping.html#matched-filter">Matched Filter</a></li>
<li><a href="https://pysdr.org/content/pulse_shaping.html#splitting-a-filter-in-half">Splitting a Filter in Half</a></li>
<li><a href="https://pysdr.org/content/pulse_shaping.html#specific-pulse-shaping-filters">Specific Pulse Shaping Filters</a></li>
<li><a href="https://pysdr.org/content/pulse_shaping.html#roll-off-factor">Roll-off Factor</a></li>
<li><a href="https://pysdr.org/content/pulse_shaping.html#python-exercise">Python Exercise</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/sync.html">14. Synchronization</a><ul>
<li><a href="https://pysdr.org/content/sync.html#introduction">Introduction</a></li>
<li><a href="https://pysdr.org/content/sync.html#simulating-wireless-channel">Simulating Wireless Channel</a></li>
<li><a href="https://pysdr.org/content/sync.html#time-synchronization">Time Synchronization</a></li>
<li><a href="https://pysdr.org/content/sync.html#time-synchronization-with-interpolation">Time Synchronization with Interpolation</a></li>
<li><a href="https://pysdr.org/content/sync.html#coarse-frequency-synchronization">Coarse Frequency Synchronization</a></li>
<li><a href="https://pysdr.org/content/sync.html#fine-frequency-synchronization">Fine Frequency Synchronization</a></li>
<li><a href="https://pysdr.org/content/sync.html#frame-synchronization">Frame Synchronization</a></li>
</ul>
</li>
<li><a href="https://pysdr.org/content/appendix_text_comparison.html">15. Textbook Comparison</a></li>
<li><a href="https://pysdr.org/content/about_author.html">16. About the Author</a></li>
</ul>
</div>
</div>


          </div>
              <div>
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          <a href="https://pysdr.org/content/intro.html" title="Next document"><span>1. </span>Introduction</a>
          →
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    
  </div>
    <p>
      ©2020, Marc Lichtman.
      
    </p>

    

    
  
</div>]]>
            </description>
            <link>https://pysdr.org/index.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24750588</guid>
            <pubDate>Mon, 12 Oct 2020 01:19:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Basic Concepts in Unity for Software Engineers]]>
            </title>
            <description>
<![CDATA[
Score 263 | Comments 115 (<a href="https://news.ycombinator.com/item?id=24750263">thread link</a>) | @Eyas
<br/>
October 11, 2020 | https://blog.eyas.sh/2020/10/unity-for-engineers-pt1-basic-concepts/ | <a href="https://web.archive.org/web/*/https://blog.eyas.sh/2020/10/unity-for-engineers-pt1-basic-concepts/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>If you’re trying to get into game development as a Software Engineer, finding
learning materials with the right level of context can be challenging. You’ll
likely face a choice between following materials introducing you to basic C# and
OOP concepts while also describing Unity concepts, or starting with advanced
tutorials and be left to figure out the core concepts deductively.</p><p>To fill that gap, I’m writing a series called
<strong><a href="https://blog.eyas.sh/tag/unity-for-software-engineers">Unity for Software Engineers</a></strong>. This is
the first piece, and I’ll be releasing additional installments over the next few
weeks, so <a href="http://eepurl.com/gVgusL">make sure to subscribe</a> for updates. The
series is intended for folks already comfortable with programming and software
architecture, especially those who learn best as I do: starting with first
principles and working your way upwards.</p><hr><p>I started my programming journey around 17 years ago by picking up
<a href="https://www.yoyogames.com/gamemaker">Game Maker</a>. Countless hours spent coding
little games and tools led me to a bigger passion for programming. Eventually, I
was at a point where I focused mainly on Software Engineering. From my peers, I
know this is quite a common path that many of us took to find programming.</p><p>Yet the game development scene has changed significantly from those days. When I
went to pick up Unity after a long absence from game development, I was mostly
interested in understanding the basic concepts: what are the fundamental
building blocks of a game? What do I need to know about how these building
blocks are represented in memory or on disk? How is idiomatic code organized?
What patterns are preferred?</p><p>In the first article in the series, we’ll focus on those first two questions.</p><h2 id="scene">Scenes</h2><p>A <strong>Scene</strong> is the largest unit of organizing your objects in-memory. Scenes
contain the objects making up your game.</p><p>In basic use, one scene represents a <strong>single level</strong> in your game, where one
scene is loaded at any given point. In more “advanced” use, you can have two or
more active scenes at a time. Scenes can be loaded additively and unloaded <sup id="fnref-1"><a href="#fn-1">1</a></sup>.
Having multiple scenes loaded during gameplay comes especially handy when
building a massive world; keeping far-away areas on-disk rather than in-memory
will help you stay within your performance budget.</p><div><figure><p><span>
      <a href="https://blog.eyas.sh/static/8a63c592f9c8efe7c6fe5027f8075845/20a35/empty-scene.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.eyas.sh/static/8a63c592f9c8efe7c6fe5027f8075845/28a80/empty-scene.webp 400w,https://blog.eyas.sh/static/8a63c592f9c8efe7c6fe5027f8075845/8d2ea/empty-scene.webp 800w,https://blog.eyas.sh/static/8a63c592f9c8efe7c6fe5027f8075845/e1ffd/empty-scene.webp 1016w" sizes="(max-width: 1016px) 100vw, 1016px" type="image/webp">
        <source srcset="https://blog.eyas.sh/static/8a63c592f9c8efe7c6fe5027f8075845/a3397/empty-scene.png 400w,https://blog.eyas.sh/static/8a63c592f9c8efe7c6fe5027f8075845/a331c/empty-scene.png 800w,https://blog.eyas.sh/static/8a63c592f9c8efe7c6fe5027f8075845/20a35/empty-scene.png 1016w" sizes="(max-width: 1016px) 100vw, 1016px" type="image/png">
        <img src="https://blog.eyas.sh/static/8a63c592f9c8efe7c6fe5027f8075845/20a35/empty-scene.png" alt="A scene editor showing an empty scene in 3D Mode." title="A scene editor showing an empty scene in 3D Mode." loading="lazy">
      </picture>
  </a>
    </span></p><figcaption><p>Unity Scene editor opening a default empty scene in 3D mode. Empty Scenes in
Unity3D will by default include <em>Main Camera</em> and <em>Directional light</em> objects.</p></figcaption></figure><figure><p><span>
      <a href="https://blog.eyas.sh/static/3663ec5a133582da273a56e10f2811b6/02ee0/scene-with-objects.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.eyas.sh/static/3663ec5a133582da273a56e10f2811b6/28a80/scene-with-objects.webp 400w,https://blog.eyas.sh/static/3663ec5a133582da273a56e10f2811b6/8d2ea/scene-with-objects.webp 800w,https://blog.eyas.sh/static/3663ec5a133582da273a56e10f2811b6/97a89/scene-with-objects.webp 1014w" sizes="(max-width: 1014px) 100vw, 1014px" type="image/webp">
        <source srcset="https://blog.eyas.sh/static/3663ec5a133582da273a56e10f2811b6/a3397/scene-with-objects.png 400w,https://blog.eyas.sh/static/3663ec5a133582da273a56e10f2811b6/a331c/scene-with-objects.png 800w,https://blog.eyas.sh/static/3663ec5a133582da273a56e10f2811b6/02ee0/scene-with-objects.png 1014w" sizes="(max-width: 1014px) 100vw, 1014px" type="image/png">
        <img src="https://blog.eyas.sh/static/3663ec5a133582da273a56e10f2811b6/02ee0/scene-with-objects.png" alt="A scene editor showing a heavily populated scene in 3DM mode." title="A scene editor showing a heavily populated scene in 3DM mode." loading="lazy">
      </picture>
  </a>
    </span></p><figcaption><p>Unity Scene editor showing an example scene, with a few objects selected. You
can use the scene view to edit levels in your game.</p></figcaption></figure></div><p>Every <a href="#gameobject"><em>game object</em></a> in Unity needs to be <em>in</em> a scene.</p><h2 id="gameobject">Game Objects</h2><p>A <strong>Game Object</strong> (in code, <code>GameObject</code>) is one of the basic building blocks of
a game.</p><p>Game Objects can represent both <em>physical</em> things you see in the game (e.g., a
player, the ground, a tree, a terrain, lights, a weapon, a bullet, an explosion)
<em>as well as</em> <em>metaphysical</em> things (e.g., an inventory manager, a multiplayer
controller, etc.) in your game.</p><p>Every Game Object has a position and rotation. For metaphysical objects, this
doesn’t matter.</p><p>Game Objects can nest under each other. Each object’s position and rotation is
relative to its parent object. An object directly in the scene is relative to
“world space” coordinates.</p><figure><p><span>
      <a href="https://blog.eyas.sh/static/1fa53e027dc03e25490512c1ad1b4e93/d1176/nested-objects-organizational.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.eyas.sh/static/1fa53e027dc03e25490512c1ad1b4e93/28a80/nested-objects-organizational.webp 400w,https://blog.eyas.sh/static/1fa53e027dc03e25490512c1ad1b4e93/8d2ea/nested-objects-organizational.webp 800w,https://blog.eyas.sh/static/1fa53e027dc03e25490512c1ad1b4e93/43d96/nested-objects-organizational.webp 1600w,https://blog.eyas.sh/static/1fa53e027dc03e25490512c1ad1b4e93/b5638/nested-objects-organizational.webp 2045w" sizes="(max-width: 1600px) 100vw, 1600px" type="image/webp">
        <source srcset="https://blog.eyas.sh/static/1fa53e027dc03e25490512c1ad1b4e93/a3397/nested-objects-organizational.png 400w,https://blog.eyas.sh/static/1fa53e027dc03e25490512c1ad1b4e93/a331c/nested-objects-organizational.png 800w,https://blog.eyas.sh/static/1fa53e027dc03e25490512c1ad1b4e93/1a152/nested-objects-organizational.png 1600w,https://blog.eyas.sh/static/1fa53e027dc03e25490512c1ad1b4e93/d1176/nested-objects-organizational.png 2045w" sizes="(max-width: 1600px) 100vw, 1600px" type="image/png">
        <img src="https://blog.eyas.sh/static/1fa53e027dc03e25490512c1ad1b4e93/1a152/nested-objects-organizational.png" alt="Screenshot showing nested objects for organizational purposes" title="Screenshot showing nested objects for organizational purposes" loading="lazy">
      </picture>
  </a>
    </span></p><figcaption><p>A group of objects nested together in a scene under an empty “Interior_Props”
object, for organizational purposes.</p></figcaption></figure><p>You might choose to nest your objects for many reasons. For example, you might
decide it organizationally makes sense to put all your “environment” (e.g.,
individual pieces that make up a city or village) objects under an empty parent
object. This way, it can be collapsed in the scene view and easily moved
together when building your game.</p><figure><p><span>
      <a href="https://blog.eyas.sh/static/c5e377de23f2c41444e43b1dee3b86a7/171d2/nested-objects-functional.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.eyas.sh/static/c5e377de23f2c41444e43b1dee3b86a7/28a80/nested-objects-functional.webp 400w,https://blog.eyas.sh/static/c5e377de23f2c41444e43b1dee3b86a7/8d2ea/nested-objects-functional.webp 800w,https://blog.eyas.sh/static/c5e377de23f2c41444e43b1dee3b86a7/71c32/nested-objects-functional.webp 1106w" sizes="(max-width: 1106px) 100vw, 1106px" type="image/webp">
        <source srcset="https://blog.eyas.sh/static/c5e377de23f2c41444e43b1dee3b86a7/a3397/nested-objects-functional.png 400w,https://blog.eyas.sh/static/c5e377de23f2c41444e43b1dee3b86a7/a331c/nested-objects-functional.png 800w,https://blog.eyas.sh/static/c5e377de23f2c41444e43b1dee3b86a7/171d2/nested-objects-functional.png 1106w" sizes="(max-width: 1106px) 100vw, 1106px" type="image/png">
        <img src="https://blog.eyas.sh/static/c5e377de23f2c41444e43b1dee3b86a7/171d2/nested-objects-functional.png" alt="Screenshot showing nested objects for functional purposes" title="Screenshot showing nested objects for functional purposes" loading="lazy">
      </picture>
  </a>
    </span></p><figcaption><p>A group of objects nested under the player. These include the player’s weapon,
avatar, and various UI elements rendered around the player.</p></figcaption></figure><p>Game Object nesting can also have <em>functional significance</em>. For example, a
“Car” can be an object, with code that controls the car’s speed and rotation as
a whole. But individual child objects might represent the four wheels (these
would spin independently), the car body, windows, etc. Moving the parent car
object would move all the child objects, keeping their relative orientation to
the parent (and each other). We might want the player to interact with a door
separately from the rest of the car, for instance.</p><h2 id="component">Components (&amp; MonoBehaviors)</h2><figure><p><span>
      <a href="https://blog.eyas.sh/static/6c13139bed0d3e0340ef8308a17e47fd/faa4f/inspector-with-components.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.eyas.sh/static/6c13139bed0d3e0340ef8308a17e47fd/28a80/inspector-with-components.webp 400w,https://blog.eyas.sh/static/6c13139bed0d3e0340ef8308a17e47fd/8d2ea/inspector-with-components.webp 800w,https://blog.eyas.sh/static/6c13139bed0d3e0340ef8308a17e47fd/e432d/inspector-with-components.webp 878w" sizes="(max-width: 878px) 100vw, 878px" type="image/webp">
        <source srcset="https://blog.eyas.sh/static/6c13139bed0d3e0340ef8308a17e47fd/a3397/inspector-with-components.png 400w,https://blog.eyas.sh/static/6c13139bed0d3e0340ef8308a17e47fd/a331c/inspector-with-components.png 800w,https://blog.eyas.sh/static/6c13139bed0d3e0340ef8308a17e47fd/faa4f/inspector-with-components.png 878w" sizes="(max-width: 878px) 100vw, 878px" type="image/png">
        <img src="https://blog.eyas.sh/static/6c13139bed0d3e0340ef8308a17e47fd/faa4f/inspector-with-components.png" alt="Screenshot showing the inspector window on an object." title="Screenshot showing the inspector window on an object." loading="lazy">
      </picture>
  </a>
    </span></p><figcaption><p>The Warrior object from the previous screenshot is shown above in Unity’s
“Inspector” window. Each illustrated section (e.g., Animator, Rigidbody,
Collider) are <em>Components</em> making up this object.</p></figcaption></figure><p>Every Game Object is comprised of <strong>Components</strong>.</p><p>A Component implements a well-defined set of behaviors for a GameObject to
execute. Everything that makes an object what it is would come from the
components that make it up:</p><ul><li>A single “visible” piece of a car will have a <em>Renderer</em> component that
paints it, and likely a <em>Collider</em> component that sets up its collision
bounds.</li><li>If a car represents the player, the car object itself might have a <em>Player
Input Controller</em> that takes key input events and translates these to code
moving the car around.</li></ul><p>While you can write large and complex Components that correspond 1:1 to an
object (e.g., a player component codes the entire player, while an enemy
component codes the enemy as a whole), it’s typically common to factor out your
logic into streamlined pieces corresponding to individual <em>traits</em>. For example:</p><ul><li>All objects with <em>health</em>, whether a Player or an Enemy, might have a
<code>LivingObject</code> component that sets an initial health value, takes damage,
and triggers a death event once it dies.</li><li>A player might additionally have an input component controlling its
movement, while the enemy might have an AI component that controls its
movement instead.</li></ul><p>Components receive various callbacks throughout their lifetime, known in Unity
as <em>Messages</em>. Examples of Messages include <code>OnEnable</code>/<code>OnDisable</code>, <code>Start</code>,
<code>OnDestroy</code>, <code>Update</code>, and others. If an object implements an <code>Update()</code> method,
this method will automagically be called by Unity in every frame of the game
loop while the object is active, and the given component is enabled. These
methods can be marked <code>private</code>; the Unity engine will still call them.</p><p>Components can also expose public methods as you’d expect. Other components can
take a reference to a component and call these public methods.</p><h2 id="asset">Assets</h2><p><strong>Assets</strong> are the on-disk resources that make up your game project. These
include meshes (models), textures, sprites, sounds, and other resources.</p><p>When serialized to the disk, your scenes are represented as assets made up of
the Game Objects inside of them. We’ll also discuss in the next section how you
can make Game Objects that are reused often into an asset known as a
<a href="#prefab">Prefab</a>.<sup id="fnref-2"><a href="#fn-2">2</a></sup></p><figure><p><span>
      <a href="https://blog.eyas.sh/static/65a370888c3e5f061718bfab6daec6eb/3c2e3/assets-in-project-view.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.eyas.sh/static/65a370888c3e5f061718bfab6daec6eb/28a80/assets-in-project-view.webp 400w,https://blog.eyas.sh/static/65a370888c3e5f061718bfab6daec6eb/8d2ea/assets-in-project-view.webp 800w,https://blog.eyas.sh/static/65a370888c3e5f061718bfab6daec6eb/cedc5/assets-in-project-view.webp 1291w" sizes="(max-width: 1291px) 100vw, 1291px" type="image/webp">
        <source srcset="https://blog.eyas.sh/static/65a370888c3e5f061718bfab6daec6eb/a3397/assets-in-project-view.png 400w,https://blog.eyas.sh/static/65a370888c3e5f061718bfab6daec6eb/a331c/assets-in-project-view.png 800w,https://blog.eyas.sh/static/65a370888c3e5f061718bfab6daec6eb/3c2e3/assets-in-project-view.png 1291w" sizes="(max-width: 1291px) 100vw, 1291px" type="image/png">
        <img src="https://blog.eyas.sh/static/65a370888c3e5f061718bfab6daec6eb/3c2e3/assets-in-project-view.png" alt="Unity Asset view showing visual assets in a game project" title="Unity Asset view showing visual assets in a game project" loading="lazy">
      </picture>
  </a>
    </span></p></figure><p>Assets can also represent less tangible things, such as Input Control Maps,
Graphics Settings, i18n string databases, and more. You can also create your own
custom asset types
<a href="https://unity.com/how-to/architect-game-code-scriptable-objects">using ScriptableObjects</a>.
I wrote about how these are saved
<a href="https://blog.eyas.sh/2020/09/where-scriptableobjects-live/">here</a>.</p><p>For your in-development project, assets form the key representation of your
project’s codebase, alongside your code.</p><p>Your built-and-bundled game will include <em>most</em><sup id="fnref-3"><a href="#fn-3">3</a></sup> of your assets. These assets
will be saved on disk on the device where the game is installed.</p><h2 id="prefab">Prefabs</h2><figure><p><span>
      <a href="https://blog.eyas.sh/static/c795152ffc6beb8afcfe8b85fbb6886a/af8d6/container-homes.jpg" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://blog.eyas.sh/static/c795152ffc6beb8afcfe8b85fbb6886a/28a80/container-homes.webp 400w,https://blog.eyas.sh/static/c795152ffc6beb8afcfe8b85fbb6886a/8d2ea/container-homes.webp 800w,https://blog.eyas.sh/static/c795152ffc6beb8afcfe8b85fbb6886a/43d96/container-homes.webp 1600w,https://blog.eyas.sh/static/c795152ffc6beb8afcfe8b85fbb6886a/f3ff0/container-homes.webp 1920w" sizes="(max-width: 1600px) 100vw, 1600px" type="image/webp">
        <source srcset="https://blog.eyas.sh/static/c795152ffc6beb8afcfe8b85fbb6886a/4cda9/container-homes.jpg 400w,https://blog.eyas.sh/static/c795152ffc6beb8afcfe8b85fbb6886a/c60e9/container-homes.jpg 800w,https://blog.eyas.sh/static/c795152ffc6beb8afcfe8b85fbb6886a/56dca/container-homes.jpg 1600w,https://blog.eyas.sh/static/c795152ffc6beb8afcfe8b85fbb6886a/af8d6/container-homes.jpg 1920w" sizes="(max-width: 1600px) 100vw, 1600px" type="image/jpeg">
        <img src="https://blog.eyas.sh/static/c795152ffc6beb8afcfe8b85fbb6886a/56dca/container-homes.jpg" alt="Photo of rows of container homes" title="Photo of rows of container homes" loading="lazy">
      </picture>
  </a>
    </span></p></figure><p>Game Objects, their Components, and their input parameters exist as individual
<em>instances</em> in a scene. But what if a particular class of objects is commonly
repeated? Such objects can be made into a <strong>Prefab</strong>, which is effectively the
object in asset form.</p><p>Instances of a prefab in a scene can have local modifications that distinguish
it (e.g., if a <em>tree</em> object is a prefab, you can have tree instances of
different heights). Instances of a prefab all inherit and override data from
their prefab.</p><h3>Nested Prefabs</h3><p>Starting with Unity 2018.3, Prefabs can be nested just as you expect:</p><ol><li>A parent object with prefab child objects can be a prefab itself. In the
parent prefab, the child prefab instance can have its own modifications. In
the scene, the entire prefab hierarchy is instantiated, and scene-specific
modifications can layer on top.</li><li>A prefab instance in a scene with its own local modifications can be saved as
its own “Prefab Variant” asset. A variant is a prefab asset that inherits
from another prefab, applying additional modifications on top.</li></ol><p>These concepts compose; a prefab variant of a nested prefab, or a prefab variant
of a prefab variant, for instance.</p><h2 id="serialization">Serialization &amp; Deserialization</h2><p>Your project’s assets, scenes, and objects are all persisted on-disk. When
editing your game, these objects are loaded in memory and saved back to disk
using
<a href="https://blogs.unity3d.com/2014/06/24/serialization-in-unity/">Unity’s serialization system</a>.
When playtesting your game, the objects and scenes in-memory are loaded through
the same serialization system. This system also maps between assets in your
compiled bundle and the loaded/unloaded scene objects in-memory.</p><p>The Unity Engine’s Serialization/Deserialization flow loads on-disk assets into
memory (in your project: for editing/playtesting; in-game, when loading a scene)
and is responsible for saving the state of your edited objects &amp; components back
into their scenes and prefabs.</p><p>Therefore, the serialization system is also at the core of the Unity Editor
experience itself. For a <code>MonoBehavior</code> to take an input on construction when
instantiated in a scene, those fields must be <em>serialized</em>.</p><p>Most core Unity types such as <code>GameObject</code>s, <code>MonoBehavior</code>s, and asset
resources are
<a href="https://docs.microsoft.com/en-us/dotnet/api/system.serializableattribute">Serializable</a>
and can receive initial values on creation from within the Unity Editor. Public
fields on your <code>MonoBehavior</code> are serialized by default (if they’re of a
serializable type), and private fields need to be marked with Unity’s
<a href="https://docs.unity3d.com/ScriptReference/SerializeField.html"><code>[SerializeField]</code></a>
attribute to be serialized as well.</p><figure><p><span>
      <a href="https://blog.eyas.sh/static/d0cfe39b333b7b70ede27e286ad3be48/7d442/chaos-reborn-screenshot.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
   …</picture></a></span></p></figure></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.eyas.sh/2020/10/unity-for-engineers-pt1-basic-concepts/">https://blog.eyas.sh/2020/10/unity-for-engineers-pt1-basic-concepts/</a></em></p>]]>
            </description>
            <link>https://blog.eyas.sh/2020/10/unity-for-engineers-pt1-basic-concepts/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24750263</guid>
            <pubDate>Mon, 12 Oct 2020 00:14:45 GMT</pubDate>
        </item>
    </channel>
</rss>
