<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 5]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 5. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Tue, 03 Nov 2020 04:23:52 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-5.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Tue, 03 Nov 2020 04:23:52 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[I No Longer Tell My Friends about Anki/SuperMemo]]>
            </title>
            <description>
<![CDATA[
Score 57 | Comments 74 (<a href="https://news.ycombinator.com/item?id=24957617">thread link</a>) | @kioleanu
<br/>
October 31, 2020 | https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/ | <a href="https://web.archive.org/web/*/https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><p>This article <a href="https://www.lesswrong.com/posts/6NvbSwuSAooQxxf7f/beware-of-other-optimizing">Beware of Other-Optimizing</a> by Eliezer Yudkowsky is highly illuminating. I recommend you read it through the lens of ‚Äúrecommending Anki to a friend.‚Äù This article is about the problems of giving advice on how to learn.</p>
<h2>Spreading the ‚Äúgospel‚Äù to the world</h2>
<p>If you deeply believe something, along the lines of ‚Äúif everyone did it, the world would be much better off.‚Äù and have tried convincing other people to do that thing, then you will realize it‚Äôs almost impossible to change others‚Äô opinions or behaviors.</p>
<p>Maybe you‚Äôre not that ambitious to convince everyone, so you start small: you share it with your friends, but then discovered nobody actually cares or realizes its significance. A mild version is like <a href="https://www.deathbulge.com/comics/206">showing your favorite TV show and they don‚Äôt care</a>:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/acb04/deathbulge.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="deathbulge" title="deathbulge" src="https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/1c72d/deathbulge.jpg" srcset="https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/a80bd/deathbulge.jpg 148w,
https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/1c91a/deathbulge.jpg 295w,
https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/1c72d/deathbulge.jpg 590w,
https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/acb04/deathbulge.jpg 750w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>My faith in evidence-based learning strategies is informed by my personal experience and <a href="https://www.masterhowtolearn.com/2020-02-25-how-to-learn-about-meta-learning-my-resource-list">my meta-learning list</a>. I wholeheartedly believe Spaced Repetition Software (SRS) like SuperMemo and Anki is the key to effective and efficient learning. If you believe education is the future, then the knowledge about evidence-based learning strategies is one big key to unlocking that future, both individually and collectively.</p>
<h2>‚ÄúDoing this every day seems very tiring.‚Äù</h2>
<p>Two years ago I was doing my Anki reps. One friend glanced over and was interested in what I was doing.</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/ee745/myTime.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="My time has come" title="My time has come" src="https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/1c72d/myTime.jpg" srcset="https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/a80bd/myTime.jpg 148w,
https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/1c91a/myTime.jpg 295w,
https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/1c72d/myTime.jpg 590w,
https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/ee745/myTime.jpg 660w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>We ate lunch together while I was giving her a little presentation. I talked <em>very enthusiastically</em> about spaced repetition, basic memory science and Anki operations. Of course I had to show her the infamous forgetting curve:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/8aab1/forgetting-curve-wired-wozniak.webp" target="_blank" rel="noopener">
    <span></span>
  <img alt="forgetting-curve" title="forgetting-curve" src="https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/5ca24/forgetting-curve-wired-wozniak.webp" srcset="https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/cbe2e/forgetting-curve-wired-wozniak.webp 148w,
https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/3084c/forgetting-curve-wired-wozniak.webp 295w,
https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/5ca24/forgetting-curve-wired-wozniak.webp 590w,
https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/8aab1/forgetting-curve-wired-wozniak.webp 630w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>She sounded excited about the possibility of finally mastering a second language. But at one point she was confused:</p>
<blockquote>
<p>‚ÄúIf I hadn‚Äôt learned it how could I recall it from memory?‚Äù</p>
</blockquote>
<p>So I explained that assessment <strong>for</strong> learning (testing as a means of learning) is different from assessment <strong>of</strong> learning (finding out what you‚Äôve learned). The act of ‚Äúrecalling from memory‚Äù is itself a learning process. Then I was aware that her confusion was probably due to a common misconception about memory: human memory works like computer memory:</p>
<blockquote>
<p>The functional architecture of how humans forget, remember, and learn is <strong>unlike</strong> the corresponding processes in man-made devices [‚Ä¶] We think of ourselves as working like computers, we become prone to assuming that exposing ourselves to information and procedures will lead to storage (i.e., recording) of such information or procedures in our memories‚Äîthat the information will write itself in one‚Äôs memory.</p>
<p>If we think of human memory equals to memory in a computer, we are unlikely to appreciate that retrieving information from our memory increases the subsequent accessibility of that information, while retrieving information from computer memory leaves the status of that information unperturbed. <a href="https://www.taylorfrancis.com/books/e/9780203842539/chapters/10.4324%2F9780203842539-6">On the Symbiosis of Remembering, Forgetting, and Learning</a></p>
</blockquote>
<p>Side note: this story might give you the impression that I liked to show off what I know. No not really. I like to be convinced with evidence, and I thought others were the same. I was wrong. Also, I included the above quotes for the sake of convincing you, the reader. I didn‚Äôt obfuscate the subject matter further with phrases like assessment <strong>for</strong> learning and assessment <strong>of</strong> learning.</p>
<p>She looked‚Ä¶ befuddled. Sort of like this:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/c08c5/AwkwardSmile.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="awkwardSmile" title="awkwardSmile" src="https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/1c72d/AwkwardSmile.jpg" srcset="https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/a80bd/AwkwardSmile.jpg 148w,
https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/1c91a/AwkwardSmile.jpg 295w,
https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/1c72d/AwkwardSmile.jpg 590w,
https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/c08c5/AwkwardSmile.jpg 640w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>I remember I was so excited and nervous at the same time that I was fumbling for words, trying to simplify it as much as I could. In retrospect, I was making things worse.</p>
<p>She‚Äôd listen to me quite intently, signaling that she was thinking and trying to figure it out, but I could tell she was still confused. And the more I explained, the deeper the rabbit hole went (like keep clicking hyperlinks in Wikipedia), and the more confused she became, so I stopped talking to stop making the whole situation uncomfortable. The following monologue is how I imagine what she was thinking at the time:</p>
<blockquote>
<p>‚ÄúHe‚Äôs so passionate about this stuff and so sure of himself that I guess he‚Äôs right.‚Äù</p>
</blockquote>
<blockquote>
<p>‚ÄúI‚Äôm not really sure what he means. I do want to learn Japanese but the stuff he‚Äôs talking about is so confusing‚Ä¶‚Äù</p>
</blockquote>
<blockquote>
<p>‚ÄúI was indeed interested in the beginning, but I don‚Äôt really care at this point. I‚Äôm just going to pretend I understand and end this whole conversation asap.‚Äù</p>
</blockquote>
<p>I will never forget what she said at one point,</p>
<blockquote>
<p>‚ÄúDoing this every day seems very tiring.‚Äù</p>
</blockquote>
<p>I was like ‚ÄúYeah‚Ä¶‚Äù I never followed up on her progress. I figured if she was truly interested, when she bumped into problem she would ask for my help. As expected, we never talked about it and I never mentioned Anki again.</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/0b533/sadFrog.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="sadFrog" title="sadFrog" src="https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/0b533/sadFrog.png" srcset="https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/12f09/sadFrog.png 148w,
https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/e4a3f/sadFrog.png 295w,
https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/0b533/sadFrog.png 500w" sizes="(max-width: 500px) 100vw, 500px" loading="lazy">
  </a>
    </span></p>
<p>These has happened countless times. I usually look nonchalant on the outside but dying on the inside. People looked interested (probably due to my enthusiasm and it‚Äôs impolite to look otherwise) and then never actually bothered to use Anki. Some would actually try, make a few cards, do the reps for a few days and then say, ‚ÄúI tried and Anki doesn‚Äôt work.‚Äù</p>
<p>I‚Äôm probably over my head, but sometimes it feels like I‚Äôm personally attacked, that what I‚Äôm saying is not valuable. I understand it‚Äôs not true, but it took me years to study the learning science and to gain the experience with Anki/SuperMemo. The fact that they‚Äôre dismissing the software feels like they‚Äôre dismissing my knowledge and experience.</p>
<h2>The problems of giving advice on how to learn</h2>
<h3>#1. Nobody cares <em>that</em> much, alright?</h3>
<p>When I first discovered Anki I was like, ‚ÄúHow come no one around me knows this?! I need to share this to everyone!‚Äù So I would tell my friends about Anki but nobody was interested. I‚Äôve introduced Anki to people and every time it‚Äôs a very frustrating experience. (Surprise surprise, not SuperMemo. The learning curve of Anki is much lower. What chance do I have if I preached SuperMemo when they even think Anki is too hard to use?)</p>
<p>Update: I was never a missionary and randomly went out my way to tell people about Anki all the time like this:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/737f1/thejenkinscomicVim.webp" target="_blank" rel="noopener">
    <span></span>
  <img alt="vim" title="vim" src="https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/737f1/thejenkinscomicVim.webp" srcset="https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/cbe2e/thejenkinscomicVim.webp 148w,
https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/3084c/thejenkinscomicVim.webp 295w,
https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/737f1/thejenkinscomicVim.webp 585w" sizes="(max-width: 585px) 100vw, 585px" loading="lazy">
  </a>
    </span></p>
<p><a href="https://thejenkinscomic.wordpress.com/">Source</a></p>
<p>Very early on I did give unsolicited advice once to my best friend by intentionally bringing up Anki. Then I did bring up Anki on multiple occasions, but only when the opportunity presented itself, like the story above.</p>
<p>People may be interested in how you‚Äôve developed a skill or become fluent in a foreign language, but just not <strong>that</strong> interested. And they certainly don‚Äôt expect to be suddenly lectured on how learning and memory work.</p>
<p>I never liked following up to people with questions like ‚ÄúSo how‚Äôs Anki? Have you used it?‚Äù It feels like pushing an agenda to them. Also, since most would not even bother buying and downloading the app, their response is usually, ‚ÄúI forgot about it. I‚Äôll do it later.‚Äù and the conversation would end in an awkward tone.</p>
<h3>#2. I‚Äôm not sure if I actually want it, alright?</h3>
<p>Sometimes people keep lamenting ‚ÄúI want to learn X or I want to get better grades.‚Äù How many times do you hear people say they want to learn a second language? This is like that friend who keeps saying ‚ÄúI want to lose weight‚Äù. Probably after all, they‚Äôre just lamenting and not yet ready to put in the effort to change.</p>
<p>Trying to convince others to use Anki/SuperMemo is like trying to convince your friends to go to the gym regularly. You can talk about the benefits of exercising/weight-lifting, how good you‚Äôll feel afterwards, how much more productive you‚Äôll be and so on. But nothing will work if they don‚Äôt try it in the first place, and it doesn‚Äôt help that spaced repetition doesn‚Äôt work in the short-term since using Spaced Repetition Software is a life-long pursuit (just as learning is):</p>
<blockquote>
<p>This long term focus may explain why explicit spaced repetition is an uncommon studying technique: the pay-off is distant &amp; counterintuitive, the cost of self-control near &amp; vivid. <a href="https://www.gwern.net/Spaced-repetition">Gwern‚Äôs Spaced Repetition for Efficient Learning</a></p>
</blockquote>
<h3>#3. Why are you so hyped about it?</h3>
<p>It‚Äôs rare if people could understand and realize the significance and application of Spaced Repetition Software in a casual 10-min chat. It‚Äôs not about the complexity (it‚Äôs not rocket science after all), but rather it‚Äôs about awareness: problems with current learning approaches and how Anki/SuperMemo could solve the problems. In other words, if I don‚Äôt see the problems, why bother changing?</p>
<p>I have a friend who was learning German. She copied German vocabulary on one side and the equivalent English on the other in a notebook. I showed her my Korean Anki cards: ‚ÄúTake a look at these beautiful images! Gifs! Sentence cards! Audio clips! Mass Immersion Approach! (Former: All Japanese All The Time (AJATT)), Stephen Krashen‚Äôs Input Hypothesis!‚Äù Then I had another friend who was studying to become a nurse. I told him about Anki: ‚ÄúImage occlusion for anatomy!‚Äù It felt wrong of me to be hiding Anki (<a href="https://ankiweb.net/shared/info/1374772155">Image Occlusion</a> to be specific) from him. Deep down I want to shove their faces to this table:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/91608/UtilityAssessment.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="UtilityAssessment" title="UtilityAssessment" src="https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/fcda8/UtilityAssessment.png" srcset="https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/12f09/UtilityAssessment.png 148w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/e4a3f/UtilityAssessment.png 295w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/fcda8/UtilityAssessment.png 590w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/efc66/UtilityAssessment.png 885w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/c83ae/UtilityAssessment.png 1180w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/91608/UtilityAssessment.png 1251w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>(Image source: <a href="https://journals.sagepub.com/stoken/rbtfl/Z10jaVH/60XQM/full">Improving Students‚Äô Learning With Effective Learning Techniques</a>)</p>
<p>I was exaggerating but you get the point: it‚Äôs not possible to convey the significance and application of it all in a casual 10-min chat. With the benefit of hindsight, all my attempts could‚Äôve been a lot better:</p>
<ul>
<li>Maybe I was so convinced and have so much faith in Spaced Repetition Software that I came off as condescending, giving off the impression like ‚Äúyou don‚Äôt know how to study; let me teach you.‚Äù</li>
<li>Maybe it‚Äôs the bold claims: ‚ÄúYou‚Äôll get 2x results with half the study time.‚Äù (How many are really true whenever you hear such claim?)</li>
<li>Maybe it‚Äôs the situation: all he or she wants is someone to listen about the difficulty of studying, not some real advice or suggestions.</li>
</ul>
<p>Here‚Äôs the guy from <a href="http://brianjx.altervista.org/">How I Passed the Demanding [‚Ä¶] Italian Language Exam Without Going to Italy ‚Äì Here‚Äôs a Hint: the 326,538 Flashcard Reviews Helped a Lot.</a></p>
<blockquote>
<p>Like many language teachers, V. had never heard of Anki (but she did know Reverso Context). I showed her how I studied Italian ‚Ä¶</p></blockquote></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/">https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/</a></em></p>]]>
            </description>
            <link>https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957617</guid>
            <pubDate>Sun, 01 Nov 2020 06:33:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Visualizing Git Concepts with D3]]>
            </title>
            <description>
<![CDATA[
Score 47 | Comments 5 (<a href="https://news.ycombinator.com/item?id=24957280">thread link</a>) | @gilad
<br/>
October 31, 2020 | https://onlywei.github.io/explain-git-with-d3/ | <a href="https://web.archive.org/web/*/https://onlywei.github.io/explain-git-with-d3/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div id="ExplainGitCommit-Container">
      <p>
        We are going to skip instructing you on how to add your files for commit in this explanation.
        Let's assume you already know how to do that. If you don't, go read some other tutorials.
      </p>
      <p>
        Pretend that you already have your files staged for commit and enter <span>git commit</span>
        as many times as you like in the terminal box.
      </p>
      
    </div>
    <div id="ExplainGitTag-Container">
      <p>
        <span>git tag name</span> will create a new tag named "name".
        Creating tags just creates a new tag pointing to the currently checked out commit.
      </p>
      <p>
        Tags can be deleted using the command <span>git tag -d name</span> (coming soon).
      </p>
      <p>
        Type <span>git commit</span> and <span>git tag</span> commands
        to your hearts desire until you understand this concept.
      </p>
      
    </div>
    <div id="ExplainGitBranch-Container">
      <p>
        <span>git branch name</span> will create a new branch named "name".
        Creating branches just creates a new tag pointing to the currently checked out commit.
      </p>
      <p>
        Branches can be deleted using the command <span>git branch -d name</span>.
      </p>
      <p>
        Type <span>git commit</span> and <span>git branch</span> commands
        to your hearts desire until you understand this concept.
      </p>
      
    </div>
    <div id="ExplainGitCheckout-Container">
      <p>
        <span>git checkout</span> has many uses,
        but the main one is to switch between branches.<br>
        For example, to switch from master branch to dev branch,
        I would type <span>git checkout dev</span>.
        After that, if I do a git commit, notice where it goes. Try it.
      </p>
      <p>
        In addition to checking out branches, you can also checkout individual commits. Try it.<br>
        Make a new commit and then type <span>git checkout bb92e0e</span>
        and see what happens.
      </p>
      <p>
        Type <span>git commit</span>, <span>git branch</span>,
        and <span>git checkout</span> commands to your hearts desire
        until you understand this concept.
      </p>
      
    </div>
    <div id="ExplainGitCheckout-b-Container">
      <p>
        You can combine <span>git branch</span> and <span>git checkout</span>
        into a single command by typing <span>git checkout -b branchname</span>.
        This will create the branch if it does not already exist and immediately check it out.
      </p>
      
    </div>
    <div id="ExplainGitReset-Container">
      <p>
        <span>git reset</span> will move HEAD and the current branch back to wherever
        you specify, abandoning any commits that may be left behind. This is useful to undo a commit
        that you no longer need.
      </p>
      <p>
        This command is normally used with one of three flags: "--soft", "--mixed", and "--hard".
        The soft and mixed flags deal with what to do with the work that was inside the commit after
        you reset, and you can read about it <a href="http://git-scm.com/2011/07/11/reset.html">here</a>.
        Since this visualization cannot graphically display that work, only the "--hard" flag will work
        on this site.
      </p>
      <p>
        The ref "HEAD^" is usually used together with this command. "HEAD^" means "the commit right
        before HEAD. "HEAD^^" means "two commits before HEAD", and so on.
      </p>
      <p>
        Note that you must <b>never</b> use <span>git reset</span> to abandon commits
        that have already been pushed and merged into the origin. This can cause your local repository
        to become out of sync with the origin. Don't do it unless you really know what you're doing.
      </p>
      
    </div>
    <div id="ExplainGitRevert-Container">
      <p>
        To undo commits that have already been pushed and shared with the team, we cannot use the
        <span>git reset</span> command. Instead, we have to use <span>git revert</span>.
      </p>
      <p>
        <span>git revert</span> will create a new commit that will undo all of the work that
        was done in the commit you want to revert.
      </p>
      
    </div>
    <div id="ExplainGitMerge-Container">
      <p>
        <span>git merge</span> will create a new commit with two parents. The resulting
        commit snapshot will have the all of the work that has been done in both branches.
      </p>
      <p>
        If there was no divergence between the two commits, git will do a "fast-forward" method merge.<br>
        To see this happen, checkout the 'ff' branch and then type <span>git merge dev</span>.
      </p>
      
    </div>
    <div id="ExplainGitRebase-Container">
      <p>
        <span>git rebase</span> will take the commits on this branch and "move" them so that their
        new "base" is at the point you specify.
      </p>
      <p>
        You should pay close attention to the commit IDs of the circles as they move when you do this exercise.
      </p>
      <p>
        The reason I put "move" in quotations because this process actually generates brand new commits with
        completely different IDs than the old commits, and leaves the old commits where they were. For this reason,
        you never want to rebase commits that have already been shared with the team you are working with.
      </p>
      
    </div>
    <div id="ExplainGitFetch-Container">
      <p>
        <span>git fetch</span> will update all of the "remote tracking branches" in your local repository.
        Remote tracking branches are tagged in grey.
      </p>
      
    </div>
    <div id="ExplainGitPull-Container">
      <p>
        A <span>git pull</span> is a two step process that first does a <span>git fetch</span>,
        and then does a <span>git merge</span> of the remote tracking branch associated with your current branch.
        If you have no current branch, the process will stop after fetching.
      </p>
      <p>
        If the argument "--rebase" was given by typing <span>git pull --rebase</span>, the second step of
        pull process will be a rebase instead of a merge. This can be set to the default behavior by configuration by typing:
        <span>git config branch.BRANCHNAME.rebase true</span>.
      </p>
      
    </div>
    <div id="ExplainGitPush-Container">
      <p>
        A <span>git push</span> will find the commits you have on your local branch that the corresponding branch
        on the origin server does not have, and send them to the remote repository.
      </p>
      <p>
        By default, all pushes must cause a fast-forward merge on the remote repository. If there is any divergence between
        your local branch and the remote branch, your push will be rejected. In this scenario, you need to pull first and then
        you will be able to push again.
      </p>
      
    </div>
    <div id="ExplainGitClean-Container">
      <p>
        One simple example of the use of <span>git reset</span> is to completely restore your local repository
        state to that of the origin.<br>
        You can do so by typing <span>git reset origin/master</span>.
      </p>
      <p>
        Note that this won't delete untracked files, you will have to delete those separately with
        the command <span>git clean -df</span>.
      </p>
      
    </div>
    <div id="ExplainGitFetchRebase-Container">
      <p>
        Below is a situation in which you are working in a local branch that is all your own. You want to receive the latest code
        from the origin server's master branch. To update your local branch, you can do it without having to switch branches!
      </p>
      <p>
        First do a <span>git fetch</span>, then type <span>git rebase origin/master</span>!
      </p>
      
    </div>
    <div id="ExplainGitDeleteBranches-Container">
      <p>
        <span>git branch -d</span> is used to delete branches.
        I have pre-created a bunch of branches for you to delete in the playground below.
        Have at it.
      </p>
      
    </div>
    <div id="ExplainGitFree-Container">
      <p>
        Do whatever you want in this free playground.
      </p>
      
    </div>
  </div></div>]]>
            </description>
            <link>https://onlywei.github.io/explain-git-with-d3/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957280</guid>
            <pubDate>Sun, 01 Nov 2020 04:43:47 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Toronto-area lawyer had to flee Canada after taking on the tow truck industry]]>
            </title>
            <description>
<![CDATA[
Score 200 | Comments 87 (<a href="https://news.ycombinator.com/item?id=24957200">thread link</a>) | @walterbell
<br/>
October 31, 2020 | https://www.ctvnews.ca/w5/this-toronto-area-lawyer-had-to-flee-the-country-after-taking-on-the-tow-truck-industry-1.5167869 | <a href="https://web.archive.org/web/*/https://www.ctvnews.ca/w5/this-toronto-area-lawyer-had-to-flee-the-country-after-taking-on-the-tow-truck-industry-1.5167869">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <p>TORONTO -- 
	Lisa Carr never thought her work would lead to armed threats, a firebombing, a shooting and a conspiracy to kill her.</p>
<p>
	The Carr Law office is in a nondescript strip mall in Vaughan, Ont., north of Toronto. It‚Äôs closed now, after the litigation lawyer says police told her they could no longer protect her.</p>
<p>
	She was shuttled to another country where she spent five long months in hiding. Carr has never before told her story, but agreed to meet for an interview as part of a W5 investigation into the shady underbelly of an industry that forced her to give up her business and almost cost her, her life: The tow truck industry.</p>
<p>
	Over the last number of years, criminal elements have been battling for lucrative control of the major highways around the Toronto area. It has resulted in more than 50 arsons, multiple shootings and at least four murders.</p>
<p>
	So why is there so much violence over a couple of hundred-dollar tows at the side of the road? Because that one tow can net tens of thousands of dollars.</p>
<p>
	Here‚Äôs how it works: The tow truck driver gets a kickback from an unscrupulous auto body shop, which then submits wildly inflated repair fees to an insurance company.</p>
<p>
	<img alt="york police" src="https://www.ctvnews.ca/polopoly_fs/1.4954903!/httpImage/image.jpg_gen/derivatives/landscape_960/image.jpg"></p>
<p>
	The insurance industry estimates that fake repair bills tally up to $2 billion a year in Canada. And that‚Äôs why Carr was in the crosshairs. She was hired by an insurance company to challenge bogus claims.</p>
<p>
	Over the course of a number of months, Carr‚Äôs law firm was the target of increasingly violent attacks. First a firebombing and then her office was set on fire.</p>
<p>
	Months later, in broad daylight, a colleague leaving work had a gun put to her head and was told, ‚ÄúStop suing our friends.‚Äù Shortly after that, again in broad daylight, someone opened fire through the front door of the busy office.</p>
<p>
	Carr says it is incredible no one was struck by the flurry of bullets.</p>
<p>
	‚ÄúI looked down the hall and I saw my receptionist on her hands and knees surrounded by glass. And one of the other girls came running at me saying, ‚ÄòShots fired, shots fired. Call 911.‚Äô‚Äù</p>
<p>
	While the violence surrounding the tow truck industry has made headlines in the Greater Toronto Area, the story that has never been told is that York Regional Police (YRP) uncovered a plot to kill Carr.</p>
<p>
	It was such a credible threat that they gave her an hour to pack up her belongings and leave her home. Carr and her husband were then whisked out of the country and spent five months in hiding.</p>
<p>
	Three separate police services ‚Äì YRP, Toronto Police Service and Ontario Provincial Police ‚Äì joined forces to launch Project Platinum to investigate the violence associated with the tow truck industry.</p>
<p>
	They carried out a series of raids this past spring, which netted dozens of high-powered weapons and led to the arrests of 35 people who face almost 500 charges, including the attempted murder of Carr.</p>
<p>
	<img alt="weapon" src="https://www.ctvnews.ca/polopoly_fs/1.4954983!/httpImage/image.jpg_gen/derivatives/landscape_960/image.jpg"></p>
<p>
	Now back in Canada, Carr says police have told her she is likely no longer in danger, but with one caveat.</p>
<p>
	‚ÄúThe police said we believe the risk is low. As long as you don't go back to work, as long as you don't restart the firm,‚Äù she says.</p>
<p>
	‚ÄúSo they have effectively ended my career. We lost everything. They won.‚Äù</p>
                                              </div></div>]]>
            </description>
            <link>https://www.ctvnews.ca/w5/this-toronto-area-lawyer-had-to-flee-the-country-after-taking-on-the-tow-truck-industry-1.5167869</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957200</guid>
            <pubDate>Sun, 01 Nov 2020 04:20:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Simple Image Vectorization]]>
            </title>
            <description>
<![CDATA[
Score 44 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24957120">thread link</a>) | @thesephist
<br/>
October 31, 2020 | https://wordsandbuttons.online/simple_image_vectorization.html | <a href="https://web.archive.org/web/*/https://wordsandbuttons.online/simple_image_vectorization.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    
    <p>
Vectorization is when you take some minecraft-style raster image and make a crisp vector picture out of it.
    </p>
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/Bitmap_VS_SVG.svg">
    
    <p>
It's especially useful when you want to turn a satellite photo into a map. Or if you want to scan some blueprint and turn it into a CAD model. Or if you want to reissue an old game and you don't want to redraw all the artwork from scratch.
    </p>
    <p>
The algorithm I'm going to show you has nothing to do with all these things. It's a basic vectorization technique which, in its original form, has little to none applications in the industry.
    </p>
    <p>
On the plus side, it illustrates the approach rather well. It shows how things like bilinear interpolation, gradient descent, and parametric splines work together to solve a real-world problem. At the very least, it makes learning about all these things a little more compelling.
    </p>

    <h2>
An input image
    </h2>
    <p>
A raster image is essentially a rectangular table of things. If it's a full-color RGB, then it's a table of color pixels. Color pixels are the triplets of 8-bit integer values where each value represents an amount of red, green, and blue color.
    </p>
    <p>
Medical images, such as obtained from computed tomography, are usually the tables of 12-bit or 16-bit integers. It's not a color really since the values come from invisible X-ray radiation, but they are called gray values nevertheless.
    </p>
    <p>
Satellite images may have a lot of channels. Apart from the colors of the visible specter they may contain ultra-violet and infra-red luminosity. Channels may be represented by integers or floating point values.
    </p>
    <p>
Our image will be a simple gray-scale bitmap.
    </p>
    <canvas id="greyscale_canvas" width="640" height="640"></canvas>
    <p>
Technically, we can already turn it into vectors rather easily. Let's just agree on some threshold, and mark the contour of all the pixels that have the values exceeding this threshold.
    </p>
    <canvas id="greyscale_canvas_contour" width="640" height="640"></canvas>
    <p>
Well, it's simple, but it's not what we wanted. We want curves, not corners. And for that, we have to make our image less cornery.
    </p>
    <h2>
<span id="index_image_interpolation">Image interpolation</span>
    </h2>
    <p>
Let's say our image is not a table of values. Let's say we only know the values in the centers of the pixels, and we have to guess the values between them somehow.
    </p>
    <p>
This is called interpolation. The simplest case would be the nearest neighbor interpolation, where for every point on an image, the value is the value from the nearest pixel's center. But this simply turns it back into a table.
    </p>
    <p>
A little more advanced is the <span id="index_bilinear_interpolation">bilinear interpolation</span>. The value is the linear sum of the four neighboring values. It looks like this.
    </p>
    <div>
    <pre id="code_1">// pixel value with out of bounds checks
function pixel_in(pixels, i, j) {
    if(i &gt;= pixels.length)
        return pixel_in(pixels, pixels.length-1, j);
    if(i &lt; 0)
        return pixel_in(pixels, 0, j);
    if(j &gt;= pixels[0].length)
        return pixel_in(pixels, i, pixels[0].length-1);
    if(j &lt; 0)
        return pixel_in(pixels, i, 0);
    return pixels[i][j];
}

// linear interpolation
function value_in(pixels, x, y) {
    var j = Math.floor(x - 0.5);
    var tj = x - 0.5 - j;
    var i = Math.floor(y - 0.5);
    var ti = y - 0.5 - i;
    return pixel_in(pixels, i, j) * (1 - ti) * (1 - tj)
         + pixel_in(pixels, i, j+1) * (1 - ti) * (tj)
         + pixel_in(pixels, i+1, j+1) * (ti) * (tj)
         + pixel_in(pixels, i+1, j) * (ti) * (1 - tj);
}
    </pre>
    </div>
    <p>
If we darken the pixels where the interpolated value meets the threshold, we'll get some kind of a contour.
    </p>
    <canvas id="interpolation_canvas" width="640" height="640"></canvas>
    
    <p>
There are other methods. Plenty of them. But linear interpolation solves the cornery border problem just fine. Although, the border we see is just the borderline of some threshold. It's not a vector representation yet.
    </p>

    <h2>
Turning an interpolated image into a contour
    </h2>
    <p>
We can borrow an idea from the <a href="https://wordsandbuttons.online/the_simplest_possible_smooth_contouring_algorithm.html">simplest possible smooth contouring</a> algorithm. We'll build an initial border from the source pixels, and then we'll use our linearly interpolated image to find the best place to put each contour point so the image value will meet the threshold value.
    </p>
    <p>
When you have a <span id="index_distance_field">distance field</span>, it's easy. A distance field is when for any point in space you can tell how far it lies from the surface you want. It's basically a function from point in space to distance.
    </p>
    <p>
You take its gradient, take the difference between the value you have and the threshold value. Since it's the distance field, the value difference is exactly the distance you should move your point for. And the gradient is the exact opposite direction. You just inverse, multiply, add‚Ää‚Äî‚Ääand you're there.
    </p>
    <p>
Unfortunately, we don't have a distance field. We have a continuous image which only resembles one.
    </p>
    <p>
But the principle still works. If you traverse against the gradient, you will get closer to the threshold value. And the more the difference, the further you have to go. It's just you wouldn't always get there in one try.
    </p>
    <p>
So let's try several times then. Let's make an <a href="https://wordsandbuttons.online/interactive_introduction_to_iterative_algorithms.html">iterative algorithm</a> out of it.
    </p>
    <div>
    <pre id="code_2">// gradient
function gradient(pixels, x, y) {
    const eps = 1e-5;
    return [(value_in(pixels, x + eps, y) - value_in(pixels, x, y)) / eps,
            (value_in(pixels, x, y + eps) - value_in(pixels, x, y)) / eps];
}

// how far should you shift the point to meet the isoline
// if value_in were a distance function
function gradient_shift(pixels, threshold, x, y) {
    var g = gradient(pixels, x, y);
    var g_norm = Math.sqrt(g[0]*g[0] + g[1]*g[1]);
    var d = threshold - value_in(pixels, x, y);
    return [g[0] * d / g_norm / g_norm, g[1] * d / g_norm / g_norm];
}

// brings a point closer to the threshold isoline
function fit_point_better(pixels, threshold, point) {
    const ok_error = 1/255;
    if(Math.abs(value_in(pixels, point[0], point[1]) - threshold) &lt; ok_error)
        return point;
    gs = gradient_shift(pixels, threshold, point[0], point[1])
    var new_point = [point[0] + gs[0], point[1] + gs[1]];
    return fit_point_better(pixels, threshold, new_point);
}
    </pre>
    </div>
    <p>
We'll move our contour points against the gradient until we're close enough to the threshold
    </p>
    <canvas id="fitting_canvas" width="640" height="640"></canvas>
        
    <p>
That's good but we can do better. Let's make the contour smooth.
    </p>

    <h2>
Cubic splines
    </h2>
    <p>
All we have to do to make the contour smooth is to turn each line segment into a parametric cubic curve.
    </p>
    <p>
It's probably sounds more complicated than it is. A parametric cubic curve is just a pair of polynomials. If you have the points and partial derivatives in this points, you can get the coefficients for them from this pair of <a href="https://wordsandbuttons.online/programmers_introduction_to_linear_equations.html">linear systems</a>:
    </p>
    <div><p>
Px(t<sub>1</sub>)' = 3a<sub>x</sub>t<sub>1</sub><sup>2</sup> + 2b<sub>x</sub>t<sub>1</sub> + c = dx<sub>1</sub>/dt
<br>
Px(t<sub>1</sub>) = a<sub>x</sub>t<sub>1</sub><sup>3</sup> + b<sub>x</sub>t<sub>1</sub><sup>2</sup> + c<sub>x</sub>t<sub>1</sub> + d = x<sub>1</sub>
<br>
Px(t<sub>2</sub>) = a<sub>x</sub>t<sub>2</sub><sup>3</sup> + b<sub>x</sub>t<sub>2</sub><sup>2</sup> + c<sub>x</sub>t<sub>2</sub> + d = x<sub>2</sub>
<br>
Px(t<sub>2</sub>)' = 3a<sub>x</sub>t<sub>2</sub><sup>2</sup> + 2b<sub>x</sub>t<sub>2</sub> + c = dx<sub>2</sub>/dt
    </p><p>
    
Py(t<sub>1</sub>)' = 3a<sub>y</sub>t<sub>1</sub><sup>2</sup> + 2b<sub>y</sub>t<sub>1</sub> + c = dy<sub>1</sub>/dt
<br>
Py(t<sub>1</sub>) = a<sub>y</sub>t<sub>1</sub><sup>3</sup> + b<sub>y</sub>t<sub>1</sub><sup>2</sup> + c<sub>y</sub>t<sub>1</sub> + d = y<sub>1</sub>
<br>
Py(t<sub>2</sub>) = a<sub>y</sub>t<sub>2</sub><sup>3</sup> + b<sub>y</sub>t<sub>2</sub><sup>2</sup> + c<sub>y</sub>t<sub>2</sub> + d = y<sub>2</sub>
<br>
Py(t<sub>2</sub>)' = 3a<sub>y</sub>t<sub>2</sub><sup>2</sup> + 2b<sub>y</sub>t<sub>2</sub> + c = dy<sub>2</sub>/dt
    </p></div>
    <p>
The curve itself will then look like this.
    </p>
    <canvas id="cubic_canvas" width="640" height="640"></canvas>
    <p>
Even more, since we get to choose the parameter range, we can make it [0..1]. This greatly simplifies our system and makes it really easy to solve.
    </p>
    <p>
Here is the function that makes one array of polynomial coefficients from two pairs of point and tangent values.
    </p>
    <div>
    <pre id="code_3">// solver specific to [0..1] parametrized splines
function spline_for(p1, p1d, p2, p2d) {
//     A = [
//         [1, 0, 0, 0],
//         [0, 1, 0, 0],
//         [1, 1, 1, 1],
//         [0, 1, 2, 3]];
//     B = [p1, p1d, p2, p2d]
    return [
        p1,
        p1d,
        3*p2 - p2d - 3*p1 - 2*p1d,
        p2d + p1d - 2*p2 + 2*p1
    ];
}
    </pre>
    </div>
    <p>
The polynomial is then computed in every <i>t</i> with this function.
    </p>
    <div>
    <pre id="code_4">// polynomial
function polynomial_in_t(A, t){
    var pt = 0.0;
    for(var i = 0; i &lt; A.length; ++i){
        pt += A[i] * Math.pow(x, i);
    }
    return pt;
}
    </pre>
    </div>
    <p>
So for every line segment with tangents, we can make a parametric polynomial. There is one problem though. We don't have tangents.
    </p>
    <p>
We have the gradient, which is orthogonal to the tangent, but there are two possible tangents in every point. The tangent can be oriented left or right from the gradient.
    </p>
    <p>
But this is solvable. Let's just pick the direction we like and keep it consistent.
    </p>
    <p>
Let the curves that originally come from horizontally oriented segments always have both tangents that way that <i>dx &gt; 0</i>. And the ones that come from vertically oriented segments, will have <i>dy &gt; 0</i>.
    </p>
    <p>
It looks like we have enough parts to assemble an algorithm.
    </p>
    <h2>
Creating splines from the pixels
    </h2>
    <p>
Let's split our vectorization into two parts. First, we'll get points and tangents for every line segment from the pixels. Then we'll turn it all into polynomial splines.
    </p>
    <p>
The function that does the first part looks like this.
    </p>
    <div>
    <pre id="code_5">function turn_pixels_into_points_and_tangents(pixels, threshold) {
    var points = [];
    var tangents = [];

    // "horizontal" pieces
    for(var i = 0; i &lt;= pixels.length; i += 1) {
        var old_point = [];
        var old_tangent = [];
        for(var j = 0; j &lt;= pixels[0].length; j += 1) {
            // if right, left, top, and bottom pixels have a sign change,
            // there should be a spline there
            var sign_change_on_the_right  =
                (pixel_in(pixels, i-1, j+0) - threshold) *
                (pixel_in(pixels, i+0, j+0) - threshold) &lt; 0;
            var sign_change_on_the_left   =
                (pixel_in(pixels, i-1, j-1) - threshold) *
                (pixel_in(pixels, i+0, j-1) - threshold) &lt; 0;
            var sign_change_on_the_bottom =
                (pixel_in(pixels, i+0, j-1) - threshold) *
                (pixel_in(pixels, i+0, j+0) - threshold) &lt; 0;
            var sign_change_on_the_top    =
                (pixel_in(pixels, i-1, j-1) - threshold) *
                ‚Ä¶</pre></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://wordsandbuttons.online/simple_image_vectorization.html">https://wordsandbuttons.online/simple_image_vectorization.html</a></em></p>]]>
            </description>
            <link>https://wordsandbuttons.online/simple_image_vectorization.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957120</guid>
            <pubDate>Sun, 01 Nov 2020 03:57:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Stanford paper on Covid-19 spread from large Trump rallies [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24957094">thread link</a>) | @adamsea
<br/>
October 31, 2020 | https://sebotero.github.io/papers/COVIDrallies_10_30_2000.pdf | <a href="https://web.archive.org/web/*/https://sebotero.github.io/papers/COVIDrallies_10_30_2000.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://sebotero.github.io/papers/COVIDrallies_10_30_2000.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957094</guid>
            <pubDate>Sun, 01 Nov 2020 03:51:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Science of Blockchains]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24956642">thread link</a>) | @emrehan
<br/>
October 31, 2020 | https://hantuzun.com/posts/the-science-of-blockchains/ | <a href="https://web.archive.org/web/*/https://hantuzun.com/posts/the-science-of-blockchains/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content"><div><p>‚Å†<time>October 31, 2020</time></p><p><img src="https://hantuzun.com/static/cover.b5a07491de.jpg" alt="Cover"></p><p>I‚Äôm starting my blog with a blog series to celebrate the 12th anniversary of the Bitcoin white paper. üéÇ</p><p>I‚Äôll introduce an extensive technical foundation to comprehend Bitcoin, Ethereum, and the future of blockchains.</p><p>The series is based on selected fundamental papers.</p><hr><h2 id="why-i-start-this-series">Why I Start This Series?</h2><p>I like to have a comprehension of the primary sources when learning about a subject.</p><p>When I‚Äôve been teaching at <a href="https://twitter.com/blockchainokulu" target="_blank" rel="noreferrer noopener">@BlockchainOkulu</a>
, I structured my lessons around primary sources such as the Bitcoin white paper and the Ethereum yellow paper.</p><p>This way, my students learned not only what I know, but also what‚Äôs the source of the knowledge. Now that they‚Äôre graduated, they know where to look for when they have questions.</p><p>Even though the course was four weeks long for each batch I could not answer some excellent questions in detail. Instead, I had to resort to black boxes.</p><p>How do digital signatures work? A black box.</p><p>What about ZK-STARKs? Another black box.</p><p>Black boxes help to teach a subject. Not so much for understanding in detail.</p><p>To understand Bitcoin, Ethereum, and more on a deeper level, one should know the pillars they are built on.</p><p>You understand the strength of the Bitcoin network when you know how does SHA-256 work.</p><p>You understand how your contracts run once you know the inner-working of the EVM.</p><p>You understand the security of the protocols you invest in when you, well, know a lot.</p><p>Thus, as you understand these subjects, you will realize how important blockchain really is. You will probably want to contribute to these exciting projects.</p><p>The more you will know, the more you will be able to participate in the governance of blockchains.</p><p>What should be the block size?</p><p>What‚Äôre your opinions on various layer 2 protocols?</p><p>How can you help us approaching the open questions on scalability?</p><p>All you need to do is to join the conversations, as long as you know about the subject in depth.</p><p>I recently realized that the most technical issues are getting the least participation.</p><p>Then, I decided to create this blog series with the goal of having new voices on the future of blockchain governances.</p><p>New voices that understand the contemporary issues very well.</p><p>This is one of the best things I can do for crypto.</p><blockquote data-dnt="true"><p lang="en" dir="ltr">One bull market to learn the lesson. Second bull market to make retirement money. Third bull market to ask not what crypto can do for you but what you can do for crypto.</p>‚Äî Qiao Wang (@QwQiao) <a href="https://twitter.com/QwQiao/status/1299500501604667396?ref_src=twsrc%5Etfw">August 29, 2020</a></blockquote><h2 id="intended-audience">Intended Audience</h2><p>The series will demand the reader to be comfortable with computer science papers. In fact, the content will be the papers.</p><p>My job is to curate the papers, explain their contexts in the blockchain space, and clarify them with my reading notes.</p><p>Ultimately, the series will offer a fundamental understanding of blockchain technologies to eager readers, be it economics students or CS professors.</p><h2 id="the-papers">The Papers</h2><p>I‚Äôm proud to present you 67 primary sources on the science of blockchains. Wish me plenty of free time for covering some of them in this blog series!</p><h3 id="cryptography">Cryptography</h3><p><strong>Fundementals</strong></p><ul><li><p>Bloom, B. 1970. Space/Time Trade-offs in Hash Coding with Allowable Errors. <a href="http://crystal.uta.edu/~mcguigan/cse6350/papers/Bloom.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Rivest R. L., Shamir A., Adleman L. 1978. A Method for Obtaining Digital Signatures and Public-Key Cryptosystems. <a href="https://people.csail.mit.edu/rivest/Rsapaper.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Merkle, R. C. 1980. Protocols for public key cryptosystems. IEEE Symposium on Security and Privacy. <a href="http://www.merkle.com/papers/Protocols.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Penard W., van Werkhoven, T. 2001. On the Secure Hash Algorithm family. <a href="https://web.archive.org/web/20160330153520/http://www.staff.science.uu.nl/~werkh108/docs/study/Y5_07_08/infocry/project/Cryp08.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><p><strong>Elliptic-curve Cryptography</strong></p><ul><li><p>Koblitz, N. 1987. Elliptic curve cryptosystems. <a href="https://www.ams.org/journals/mcom/1987-48-177/S0025-5718-1987-0866109-5/S0025-5718-1987-0866109-5.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Miller, V. 1985. Use of elliptic curves in cryptography. <a href="https://link.springer.com/content/pdf/10.1007%2F3-540-39799-X_31.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Boneh, D., Lynn, B., Shacham, H. 2004. Short signatures from the Weil pairing. <a href="https://www.iacr.org/archive/asiacrypt2001/22480516.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>ANSI. 2005. Public Key Cryptography for the Financial Services Industry: The Elliptic Curve Digital Signature Algorithm (ECDSA). <a href="https://webstore.ansi.org/Standards/ASCX9/ANSIX91422020" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Bernstein D. J. 2006. Curve25519: new Diffie-Hellman speed records. <a href="https://cr.yp.to/ecdh/curve25519-20060209.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Brown D. R. L. 2010. SEC 2: Recommended Elliptic Curve Domain Parameters. <a href="https://www.secg.org/sec2-v2.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Kate, A. et al. 2010. Constant-Size Commitments to Polynomials and Their Applications. <a href="https://www.iacr.org/archive/asiacrypt2010/6477178/6477178.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Wang D. 2014. Secure Implementation of ECDSA Signatures in Bitcoin. <a href="http://www.nicolascourtois.com/bitcoin/thesis_Di_Wang.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Schnorr, C. 1990. Efficient identification and signatures for smart cards. <a href="https://link.springer.com/chapter/10.1007/0-387-34805-0_22" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><p><strong>Quantum Cryptography</strong></p><ul><li><p>Shor, P. W. 1996. Polynomial-Time Algorithms for Prime Factorization and Discrete Logarithms on a Quantum Computer. <a href="https://arxiv.org/pdf/quant-ph/9508027.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Aggarwal, D. et al. 2017. Quantum attacks on Bitcoin, and how to protect against them. <a href="https://arxiv.org/pdf/1710.10377.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><p><strong>Zero Knowledge</strong></p><ul><li><p>Goldreich O. 1991. Proofs that Yield Nothing But Their Validity All Languages in NP Have Zero-Knowledge Proof Systems. <a href="https://people.csail.mit.edu/silvio/Selected%20Scientific%20Papers/Zero%20Knowledge/Proofs_That_Yield_Nothing_But_Their_Validity_or_All_Languages_in_NP_Have_Zero-Knowledge_Proof_Systems.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Reitwiessner, C. 2016. zkSNARKs in a Nutshell. <a href="https://chriseth.github.io/notes/articles/zksnarks/zksnarks.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Bunz, B. et al. 2017. Bulletproofs: Short Proofs for Confidential Transactions and More. <a href="https://eprint.iacr.org/2017/1066.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Ben-Sasson, E. et al. 2018. Scalable, transparent, and post-quantum secure computational integrity. <a href="https://eprint.iacr.org/2018/046.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Gabizon, A. et al. 2020. PLONK: Permutations over Lagrange-bases for Oecumenical Noninteractive arguments of Knowledge. <a href="https://eprint.iacr.org/2019/953.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="distributed-computing-and-consensus">Distributed Computing and Consensus</h3><ul><li><p>Schneider F. B. 1990. Implementing Fault-Tolerant Services Using the State Machine Approach: A Tutorial. <a href="https://nakamotoinstitute.org/static/docs/implementing-fault-tolerant-services.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Lamport, L., et al. 1982. The Byzantine Generals Problem. ACM Transactions on Programming Languages and Systems 4(3): 382-401. <a href="https://dl.acm.org/citation.cfm?id=357176" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Castro, M., Liskov, B. 1999. Practical Byzantine fault tolerance. Proceedings of the Third Symposium on Operating Systems Design and Implementation. <a href="http://pmg.csail.mit.edu/papers/osdi99.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Lamport, L. 2001. Paxos made simple. <a href="http://lamport.azurewebsites.net/pubs/paxos-simple.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Szabo, N. 2003. Advances in Distributed Security. <a href="https://nakamotoinstitute.org/advances-in-distributed-security/" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Aspnes, J., et al. 2005. Exposing computationally challenged Byzantine imposters. Yale University Department of Computer Science. <a href="http://cs.yale.edu/publications/techreports/tr1332.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Stutzbach, D., Rejaie, R. 2006. Understanding Churn in Peer-to-Peer Networks; <a href="http://www.barsoom.org/papers/imc-2006-churn.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Berman, P., Juan A. 1993. Cloture Votes: n/4-resilient Distributed Consensus in t + 1 rounds. <a href="https://link.springer.com/article/10.1007%2FBF01187072" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="timestamping">Timestamping</h3><ul><li><p>Haber, S., Stornetta, W. S. 1997. Secure names for bit-strings. <a href="http://dl.acm.org/citation.cfm?id=266430" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Massias, H., Avila X. S., Quisquater, J.-J. 1999. Design of a secure timestamping service with minimal trust requirements. <a href="https://nakamotoinstitute.org/static/docs/secure-timestamping-service.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Just, M. 1998. Some timestamping protocol failures. <a href="https://www.ndss-symposium.org/wp-content/uploads/2017/09/Some-Timestamping-Protocol-Failures_0.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Bonnecaze, A. et al. 2002. Improving Time Stamping Schemes: A Distributed Point of View. <a href="http://pages.upf.pf/Alban.Gabillon/articles/AnnalTelecom.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="digital-money">Digital Money</h3><ul><li><p>Chaum, D., et al. 1988. Untraceable electronic cash. Advances in Cryptology: 319-327. <a href="https://dl.acm.org/citation.cfm?id=88969" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Dai, W. 1998. <a href="http://www.weidai.com/bmoney.txt" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Szabo, N. 2008. Bit gold. <a href="https://unenumerated.blogspot.com/2005/12/bit-gold.html" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="proof-of-work">Proof of Work</h3><ul><li><p>Back, A. 2002. Hashcash‚Äîa denial of service counter measure. <a href="http://www.hashcash.org/papers/hashcash.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Douceur, J. R. 2002. The Sybil attack. <a href="https://dl.acm.org/citation.cfm?id=687813" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Szabo, N. 1999. Intrapolynomial Cryptography. <a href="https://nakamotoinstitute.org/intrapolynomial-cryptography/" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="bitcoin">Bitcoin</h3><ul><li><p>Nakamoto, S. 2008. Bitcoin: a peer-to-peer electronic cash system. <a href="https://bitcoin.org/bitcoin.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Wuille, P. 2012. BIP 32: Hierarchical Deterministic Wallets. <a href="https://en.bitcoin.it/wiki/BIP_0032" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Rosenfeld M. 2012. Overview of Colored Coins. <a href="https://bitcoil.co.il/BitcoinX.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Biryukov, A. et al. 2014 Deanonymisation of clients in Bitcoin P2P network. <a href="https://arxiv.org/pdf/1405.7418.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Poon, J., Dryja, T. 2016. The Bitcoin Lightning Network: Scalable Off-Chain Instant Payments. <a href="https://lightning.network/lightning-network-paper.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Pass, R., et al. 2017. Analysis of the blockchain protocol in asynchronous networks. <a href="https://link.springer.com/chapter/10.1007/978-3-319-56614-6_22" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="smart-contracts">Smart Contracts</h3><ul><li><p>Turing, A. M. 1937. On Computable Numbers, with an Application to the Entscheidungsproblem. <a href="https://londmathsoc.onlinelibrary.wiley.com/doi/abs/10.1112/plms/s2-42.1.230" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Szabo, N. 1994. Smart contracts. <a href="http://www.fon.hum.uva.nl/rob/Courses/InformationInSpeech/CDROM/Literature/LOTwinterschool2006/szabo.best.vwh.net/smart.contracts.html" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Bhargavan, K. et al. 2016. Short Paper: Formal Verification of Smart Contracts. <a href="https://www.cs.umd.edu/~aseem/solidetherplas.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="proof-of-stake">Proof of Stake</h3><ul><li><p>Poelstra, A. 2015. On Stake and Consensus. <a href="https://download.wpsoftware.net/bitcoin/pos.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Bentov, I. 2017. Cryptocurrencies without Proof of Work. <a href="https://arxiv.org/pdf/1406.5694.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="ethereum">Ethereum</h3><ul><li><p>Sompolinsky, Y., Zohar, A. 2013. Secure High-Rate Transaction Processing in Bitcoin. <a href="https://web.archive.org/web/20150402122229/https://eprint.iacr.org/2013/881.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Eth Wiki. Modified Merkle Patricia Trie Specification. <a href="https://eth.wiki/fundamentals/patricia-tree" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Buterin, V. 2013. Ethereum White Paper: A Next Generation Smart Contract &amp; Decentralized Application Platform. <a href="https://ethereum.org/en/whitepaper/" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Dameron, M. 2019. Beigepaper: An Ethereum Technical Specification. <a href="https://github.com/chronaeon/beigepaper/blob/master/beigepaper.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Wood, G. 2020. Ethereum: A Secure Decentralised Generalised Transaction Ledger. <a href="https://ethereum.github.io/yellowpaper/paper.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Solidity Documentation. <a href="https://buildmedia.readthedocs.org/media/pdf/solidity/develop/solidity.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="scaling">Scaling</h3><ul><li><p>Croman, K. et al. 2016. On Scaling Decentralized Blockchains. <a href="https://www.comp.nus.edu.sg/~prateeks/papers/Bitcoin-scaling.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Kalonde, H. et al. 2018. Arbitrum: Scalable, private smart contracts. <a href="https://www.usenix.org/system/files/conference/usenixsecurity18/sec18-kalodner.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Dang H. et al. 2019. Towards Scaling Blockchain Systems via Sharding. <a href="https://arxiv.org/pdf/1804.00399.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Buterin, V. Serenity Design Rationale. <a href="https://notes.ethereum.org/s/rkhCgQteN" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Buterin, V. et al. 2020. Combining GHOST and Casper. <a href="https://arxiv.org/pdf/2003.03052.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Adler, J., Quintyne-Collins, M. 2020. Building Scalable Decentralized Payment Systems. <a href="https://arxiv.org/pdf/1904.06441.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="other-blockchains">Other Blockchains</h3><ul><li><p>Namecoin. 2011. Merged mining. <a href="https://en.bitcoin.it/wiki/Merged_mining_specification" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Van Saberhagen, N. 2013. CryptoNote v 2.0 (Annotated by the Monero Team). <a href="https://web.getmonero.org/resources/research-lab/pubs/whitepaper_annotated.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Ben-Sasson, E. et al. 2014. Zerocash: Decentralized Anonymous Payments from Bitcoin. <a href="http://zerocash-project.org/media/pdf/zerocash-extended-20140518.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Poelstra, A. 2016. Mimblewimble. <a href="https://download.wpsoftware.net/bitcoin/wizardry/mimblewimble.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Team Rocket et al. 2019. Scalable and Probabilistic Leaderless BFT Consensus through Metastability. <a href="https://arxiv.org/pdf/1906.08936v1.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Bonneau, J. et al. 2020. Mina: Decentralized Cryptocurrency at Scale. <a href="https://minaprotocol.com/static/pdf/technicalWhitepaper.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h2 id="priority-requests">Priority Requests!</h2><p>Let me know which papers would you like to read first in Twitter. Please reply to this thread:</p><blockquote data-dnt="true"><div lang="en" dir="ltr"><p>1/14</p><p>üî≠ ùóßùóµùó≤ ùó¶ùó∞ùó∂ùó≤ùóªùó∞ùó≤ ùóºùó≥ ùóïùóπùóºùó∞ùó∏ùó∞ùóµùóÆùó∂ùóªùòÄ</p><p>I'm starting my blog with a blog series to celebrate the 12th anniversary of the Bitcoin white paper. üéÇ<a href="https://t.co/Bsc5R0FDqX">https://t.co/Bsc5R0FDqX</a></p></div>‚Äî Han Tuzun (@hantuzn) <a href="https://twitter.com/hantuzn/status/1322710239653875712?ref_src=twsrc%5Etfw">November 1, 2020</a></blockquote></div></div></div>]]>
            </description>
            <link>https://hantuzun.com/posts/the-science-of-blockchains/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24956642</guid>
            <pubDate>Sun, 01 Nov 2020 01:40:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Yet another alternative to floating-point numbers]]>
            </title>
            <description>
<![CDATA[
Score 23 | Comments 15 (<a href="https://news.ycombinator.com/item?id=24956184">thread link</a>) | @okaleniuk
<br/>
October 31, 2020 | https://wordsandbuttons.online/yet_another_alternative_to_floating_point_numbers.html | <a href="https://web.archive.org/web/*/https://wordsandbuttons.online/yet_another_alternative_to_floating_point_numbers.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
	
	<p>
Floating-point numbers are fine. They are decently designed and well standardized, they provide a good compromise between performance and precision. They work great most of the time. Until the day when they suddenly don't and nobody knows why.
	</p>
	<p>
For me, that day came when I encountered a bug in the Taubin estimator. <a href="https://graphics.stanford.edu/courses/cs468-01-fall/Papers/taubin-smoothing.pdf">Taubin smoothing</a> takes a triangle mesh, a pair of magic numbers called Œª and Œº, a little time to think, and it makes the input mesh smooth. It also makes sure that the mesh isn't reduced to a perfectly smooth but rather uninteresting sphere or a point.
	</p>
	<p>
The first magic number Œª is something between 0 and 1. When it's 0‚Ää‚Äî‚Äänothing happens at all, and when it's 1‚Ää‚Äî‚Äänothing good happens either. It should be somewhere in between. Nobody really knows how to pick this number but an experienced engineer can at least make an educated guess. 
	</p>
	<p>
The second magic number governs shrinkage compensation. It's a negative number slightly greater than Œª in its absolute value. Nobody knows how to pick it either but this time even an educated guess is a challenge.
	</p>
	<p>
That's why you need an estimator. Something that picks the Œº for you. And we have one. And it was bugged. And I was the one to fix it.
	</p>
	<p>
The first day of the investigation showed that the estimator is in fact entirely correct. The second day of the investigation  showed that the tests covering the bug are correct just as well. The third day of the investigation brought a promising hypothesis that the whole story is just a bad dream and all it takes to solve the mystery is to wake up. The fourth morning killed that hypothesis and left me completely clueless.
	</p>
	<p>
Luckily I have a friend who is smarter than me and he advised to fuzz the input a little and see what happens then. I did. And something happened. The bug didn't go away but the Œº changed a lot. Way unproportionally to the small changes in the input. Fascinating!
	</p>
	<p>
We can expect a computation to work with some error. It's fine, we get input data from sensors and they embed some error, to begin with. We print out our finished models, and the printers have some limited precision as well so a small error doesn't upset anyone. It's all good while the error is small. But what if it isn't?
	</p>
	<p>
As it turns out, in my case, a completely correct algorithm had a computational error of about 1. Not 1e-16 or 1e-5 but 1. Just 1. So if you expect your Œº to be somewhat close to -0.7, and the estimator says it's 0.3, it is in fact correct. It is still a correct estimation within its error range.
	</p>
	<p>
Correct but entirely useless.
	</p>
	<h2>
Challenge your intuition with a ‚ÄúGuess the Error‚Äù game
	</h2>
	<p>
Ok, so it's not the computational error per se that causes trouble but only the unexpected and unpredictable error. Can we predict it though?
	</p>
	<p>
Well, of course, we can. There is a whole field of numerical error analysis for that but let's be honest, most of the time we use our intuition instead. So how good is our intuition exactly?
	</p>
	<p>
I propose a game to find out. Let's take a cubic equation solver. It's a relatively complex computation with a very simple way to validate its precision. We will pick some roots first and then we will generate the cubic equation for these roots. Then we'll make the cubic solver find our roots back through the computation. The difference between the original and the computed value for each root will be our measurable error. This error divided by the original value will be our relative error.
	</p>
	<p>
Here is the exact code for the experiment. It's also <a href="https://github.com/akalenuk/wordsandbuttons/blob/master/exp/rational_bounds/rationale/cubic_solver_example.cpp">available on GitHub</a>.
	</p>
	
	
	
	<p>
Now if we pick our roots as 1, 2, and 3, the equation produced will be:
	</p>
	<p>
(x - 1) (x - 2) (x - 3) = 0
	</p>
	<p>
Expanding the brackets we get this:
	</p>
	<p>
x<sup>3</sup> - 6x<sup>2</sup> + 11x - 6 = 0
	</p>
	<p>
And when we run our solver we get:
	</p>
	<p>
x = 1, x = 2, x = 3
	</p>
	<p>
Well, yes. On the equation this simple there is no error whatsoever. The computation works flawlessly. So let's start making it worse.
	</p>
	<h2>Round 1</h2>
	<p>
The slider below lets you pick an interval in the logarithmic scale. The interval may start at 10<sup>-12</sup> and end at 10<sup>12</sup>. It's impossible to predict the exact error up to a single number so you should just pick an appropriate interval that covers the error<span id="shown_note_1"><u onclick="show('note_1')">*</u>.</span>
	</p>
	<p>
Let's say we have the roots of 0.001, 2, 3‚Ää000. So to which interval, in your opinion, the maximum relative error for a cubic solver belongs?
	</p>
	<canvas id="interval_1" width="608" height="84"></canvas>
	
	

	<h2>Round 2</h2>
	<p>
Now let's make our roots even more diverse in magnitude. How about 1e-6, 2, and 3e6?
	</p>
	<p>
Where do you think the error might be?
	</p>
	<canvas id="interval_2" width="608" height="84"></canvas>
	
	

	<h2>Round 3</h2>
	<p>
And what about 1e-9, 2, and 3e9?
	</p>
	<canvas id="interval_3" width="608" height="84"></canvas>
	
	
	<h2>Meet the <span id="index_rational_bounds">rational bounds</span></h2>
	<p>
It's not the error per se that is bad. Error is omnipresent. Every measuring device has its error, every 3D printer and every milling machine has its maximal precision. The error is fine.
	</p>
	<p>
It's only the unpredictability that makes it unpleasant.
	</p>
	<p>
People address errors in multiple ways. In metrology, a measured value is supplemented with its absolute error. You don't say that the temperature outside is 10¬∞, you say it's 10¬∞‚Ää¬±‚Ää0.5¬∞. This might seem redundant since this is a small error for the weather outside, but in some other context, this very error might become significant. If you're measuring body temperature, a 1-degree difference is enough to tell a sick person from a perfectly healthy one. You can not afford a whole 1-degree error in this scenario.
	</p>
	<p>
If you have this input error written down, you can pull it through your computation to see if the resulting error is still tolerable. To do that, you need to exchange your measured numbers for intervals. A number with error becomes an interval: 10¬∞‚Ää¬±‚Ää0.5¬∞ becomes [9.5, 10.5]¬∞.
	</p>
	<p>
You can sum these intervals just as you add numbers:
	</p>
<canvas id="interval_4" width="608" height="84"></canvas>
	<p>
+
	</p>
<canvas id="interval_5" width="608" height="84"></canvas>
	<p>
=
	</p>
<canvas id="interval_6" width="608" height="84"></canvas>
	<p>
You can multiply them as well.
	</p>
<canvas id="interval_7" width="608" height="84"></canvas>
	<p>
√ó
	</p>
<canvas id="interval_8" width="608" height="84"></canvas>
	<p>
=
	</p>
<canvas id="interval_9" width="608" height="84"></canvas>
	<p>
So with intervals, you can accommodate the input error. You can drag it through the computation and see how it plays with other values with their own error. In the end, you will have your computed value within some interval and the size of this interval will indicate the output error. But what about the error of the computation itself?
	</p>
	<p>
A computational error occurs when we can't store the operation result in the same types we keep our operands in and we're forced to throw some data away. Let's say we have Python-style ‚Äúunlimited‚Äù length integers. This means that if our computation only consists of addition, subtraction, and multiplication, we would never face any computational error.
	</p>
	<p>
Of course, with division, things get a little bit different. E. g. we can't store <nobr>16‚Ää¬æ</nobr> in integers so we have to truncate it into 16. In this case, the whole fractional part becomes our error.
	</p>
	<p>
We can use pairs of integers to represent rational numbers. This will solve the division issue. However, this type of rational number, while does not accumulate errors, accumulates digits. The more digits it has, the slower the computation goes. At some point, it may simply become impractically slow. Just like with the uncontrollable error, uncontrollable size becomes an issue.
	</p>
	<p>
We want a compromise. Some entity that grows error controllably yet still operates in constant speed. And we can get it, for example, by merging two ideas: intervals and rational numbers together.
	</p>
	<p>
Let's say, we want to write a number as an interval of its tenths. We can do that most intuitively by throwing away all the digits after the first one.
	</p>
	<table><tbody><tr>
	<td></td>
	<td>‚â§</td>
	<td></td>
	<td>‚â§</td>
	<td></td>
	</tr></tbody></table>
	<p>
Just like we can do this with decimal fraction, we can do this with any rational number. We can put it between a pair of rational numbers made by finite integers. In this case, every integer is in the range [0, 1, ..., 99].
	</p>
	<table><tbody><tr>
	<td></td>
	<td rowspan="2">‚â§</td>
	<td></td>
	<td rowspan="2">‚â§</td>
	<td></td>
	</tr><tr>
	<td></td>
	<td></td>
	<td></td>
	</tr></tbody></table>
	<p>
Ok, this is not entirely true. If the number is greater than 99, then we can't really store it in our tiny rationals but we can say that it's larger than 99 by assigning the 0 divisor to its upper bound. Of course, it's just a dirty hack but let's leave it like that.
	</p>
	<p>
Now if we want to accommodate both input error and computational error, all we have to do is to represent an input interval in its finite rational numbers. A finite rational lower bound of this interval and a finite rational upper bound of the same interval.
	</p>
	<table><tbody><tr>
	<td></td>
	<td rowspan="2">‚â§</td>
	<td></td>
	<td rowspan="2">‚â§</td>
	<td></td>
	<td rowspan="2">‚â§</td>
	<td></td>
	</tr><tr>
	<td></td>
	<td></td>
	<td></td>
	<td></td>
	</tr></tbody></table>
	<p>
This entity‚Ää‚Äî‚Ääa pair of finite rational bounds, represents a real number along with both its input error and representational error. It also grows computational error explicitly while the size of the entity remains constant.
	</p>
	<p>
The implementation example is <a href="https://github.com/akalenuk/wordsandbuttons/tree/master/exp/rational_bounds/sketch_in_cpp">available on GitHub</a>. Please note that it's just a proof of concept and not the best possible solution in terms of neither error minimization nor speed.
	</p>

	<h2>Conclusion</h2>
	<p>
The computational error may become a problem at the least appropriate moment. Both rational numbers and intervals are well-known alternatives for floating-point numbers when the error becomes an issue.
	</p>
	<p>
Rational bounds, being a chimeric product of both ideas, let you manage both measurement error and computational error in a coherent way without compromising performance all that much.
	</p>


	

	
	</div></div>]]>
            </description>
            <link>https://wordsandbuttons.online/yet_another_alternative_to_floating_point_numbers.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24956184</guid>
            <pubDate>Sat, 31 Oct 2020 23:43:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[NAT Slipstreaming]]>
            </title>
            <description>
<![CDATA[
Score 360 | Comments 99 (<a href="https://news.ycombinator.com/item?id=24955891">thread link</a>) | @todsacerdoti
<br/>
October 31, 2020 | https://samy.pl/slipstream/ | <a href="https://web.archive.org/web/*/https://samy.pl/slipstream/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p><a href="https://samy.pl/slipstream/">NAT Slipstreaming</a> allows an attacker to remotely access any TCP/UDP service bound to a victim machine, bypassing the victim's NAT/firewall (arbitrary firewall pinhole control), just by the victim visiting a website.</p><p><em>animation generated with my <a target="_blank" href="https://github.com/samyk/drawio">fork</a> of <a target="_blank" href="https://draw.io/">draw.io</a>, allowing exportable edge context flow &amp; control in animations</em></p><p>NAT Slipstreaming exploits the user's browser in conjunction with the Application Level Gateway (ALG) connection tracking mechanism built into NATs, routers, and firewalls by chaining internal IP extraction via timing attack or WebRTC, automated remote MTU and IP fragmentation discovery, TCP packet size massaging, TURN authentication misuse, precise packet boundary control, and protocol confusion through browser abuse. As it's the NAT or firewall that opens the destination port, this bypasses any browser-based port restrictions.</p><p>This attack takes advantage of arbitrary control of the data portion of some TCP and UDP packets <i>without</i> including HTTP or other headers; the attack performs this new packet injection technique across all major modern (and older) browsers, and is a modernized version to my original <a target="_blank" href="https://samy.pl/natpin/">NAT Pinning technique from 2010</a> (presented at DEFCON 18 + Black Hat 2010). Additionally, new techniques for local IP address discovery are included.</p><p>This attack requires the NAT/firewall to support ALG (Application Level Gateways), which are mandatory for protocols that can use multiple ports (control channel + data channel) such as SIP and H323 (VoIP protocols), FTP, IRC DCC, etc.</p><div>
  <li>victim visits malicious site (or site with malicious advertisement)<!-- eg <a target=_blank href="https://samy.pl/slipstream/server">https://samy.pl/slipstream/server</a>--></li>
<li>internal IP of victim first must be extracted by browser and sent to server

<ul>
<li>internal IP attempted to be extracted via <a target="_blank" href="https://www.w3.org/TR/webrtc/">WebRTC</a> data channel over https</li>
<ul>
<li>some browsers (Chrome) only divulge the local IP via WebRTC over HTTPS but some of our attacks require HTTP so we first redirect to the HTTPS version of the attack software to extract the local IP</li>
<li>we then redirect to the HTTP version with the local IP included in the URL if we were able to obtain it to bypass other cross-origin protection mechanisms (the <code>.local</code> mDNS/Bonjour address presented will not be useful for the attack)</li>
</ul>
<li>if internal IP not divulged by WebRTC (Safari) or no WebRTC (&lt;= IE11), <strong>web-based TCP timing attack performed</strong>

<ul>
<li>hidden <code>img</code> tags to all common gateways (eg <code>192.168.0.1</code>) are loaded in background</li>
<li><code>onerror/onsuccess</code> events attached to <code>img</code> tags</li>
<li>if any TCP RST (oneror) returned by gateway, or SYN + HTTP response (onsuccess), within a few seconds (before TCP timeout triggers onerror), we've detected valid subnet</li>
<li>re-perform timing attack across all IPs on detected subnets (/24), measuring time to onerror/onsuccess firing</li>
<li>fastest response is likely internal IP, though all responses are considered victim internal IP candidates and attacked</li>
</ul></li>
</ul></li>
<li>large TCP beacon sent via hidden form and automatic HTTP POST to attacker "HTTP server" bound to a non-standard port to force TCP segmentation and maximum MTU size discovery of the victim's IP stack
<ul>
<li>attacker TCP server sends <a target="_blank" href="https://tools.ietf.org/html/rfc793#section-3.1">Maximum Segment Size</a> TCP Option to massage victim outbound packet sizes (<a target="_blank" href="https://tools.ietf.org/html/rfc793#section-3.1">RFC 793 x3.1</a>), allowing control of how large browser TCP packets will be</li>
</ul></li>
<li>large UDP beacon sent from browser via WebRTC TURN authentication mechanism to non-standard port to attacker's server to force IP fragmentation with TURN <code>username</code> field stuffed
<ul>
<li>we perform a similar attack as our TCP segmentation, but over UDP as IP fragmentation will occur and provide different values than TCP segmentation</li>
<li>victim MTU size, IP header size, IP packet size, TCP header size, TCP segment sizes detected by server and sent back to victim's browser, used later for packet stuffing</li>
</ul></li>
<li>"SIP packet" in new hidden form generated, containing internal IP to trigger Application Level Gateway connection tracking
<ul>
<li>"HTTP POST" to server on TCP port 5060 (SIP port) initiated, avoiding <a target="_blank" href="https://github.com/samyk/chromium/blob/2d57e5b8afc6d01b344a8d95d3470d46b35845c5/net/base/port_util.cc#L20-L90">restricted browser ports</a></li>
<li>POST data is "stuffed" to exact TCP segment size / packet boundary, then ‚ÄúSIP packet‚Äù appended and posted via web form</li>
<li><b>victim IP stack breaks the POST into multiple TCP packets, leaving the "SIP packet" (as part of POST data) in its own TCP packet without any accompanying HTTP headers</b></li>
<li>if browser alters size of multipart/form boundary (Firefox) or packet size changes for any other reason, size change is communicated back to client and client auto-resends with new size</li>
<li>when opening UDP port, SIP packet is sent over TURN protocol inside specially crafted <code>username</code> field forcing IP fragmentation and precise boundary control</li>
</ul></li>
<li>victim NAT sees proper SIP REGISTER packet on SIP port (with no HTTP data), triggering ALG to open any TCP/UDP port defined in packet back to victim
<ul>
<li>victim NAT rewrites SIP packet, replacing internal IP with public IP, hinting to attacker exploit was successful</li>
<li>even if victim NAT normally rewrites source ports, the ALG will still be forced to port forward to the attacker's port of choice as it believes victim machine opened that port and attacker sees new source port in arriving SIP packet </li>
<li><b>attacker can now bypass victim NAT and connect directly back to any port on victim's machine, exposing previously protected/hidden services</b></li>
</ul></li>
<li><i>to investigate...perhaps by you?</i>
<ul>
  <li>non-malicious usage: this technique essentially gives browsers full TCP and UDP socket capability to communicate to any protocol locally on the system; the connection can be abstracted through a cloud server that connects back but the browser just talks to the cloud server as if it's the socket and makes browsers much more powerful to communicate on non-web-friendly protocols</li>
  <li>if testing in a virtual machine (VM) using shared networking (used to protect a host from attacks by routing it through the host, not letting it directly onto the network), if the packets make it out, the parent host machine is where the ports end up getting opened, not the VM ;)</li>
  <li>IP fragmentation allows full control of all data in the IP data section, meaning full control of the <b>UDP header</b>, including source/dest ports in the overflowed packet...what else could this abuse?</li>
</ul></li>

<p><a target="_blank" href="https://raw.githubusercontent.com/samyk/slipstream/main/img/pinpkt2.png"><img src="https://raw.githubusercontent.com/samyk/slipstream/main/img/pinpkt2.png" alt="successful packet broken into valid SIP packet"></a></p>



<h2 id="network-address-translation-nat">Network Address Translation (NAT)</h2>

<p>We use NATs (Network Address Translation) for several reasons. The most useful feature of NAT is that it allows a single public IP address to be shared among multiple systems. It does this by creating a local network, providing local IP addresses to all machines that connect, and when one of those systems reaches out to the Internet, it rewrites packets going out to use the public IP so responses come back to the NAT, and vice versa, rewriting desination IP to specific client's IP. </p>

<p>It's the responsibility of the NAT to differentiate connections to the same addresses/ports (google.com:443) from internal hosts as ultimately their outbound port, destination ip and source ip will all be the same. If two different internal peers attempt to connect from the same source port, modern NATs will alter one of the source ports (some networks do this to all TCP/UDP source ports).</p>

<p><img src="https://raw.githubusercontent.com/samyk/slipstream/main/img/lan.png" alt="NAT"></p>

<h3 id="connection-tracking">Connection Tracking</h3>

<p>From <a target="_blank" href="https://www.wikiwand.com/en/Netfilter">Wikipedia ala Wikiwand</a>:</p>

<div><pre><code>One of the important features built on top of the Netfilter 
framework is connection tracking. Connection tracking 
allows the kernel to keep track of all logical network 
connections or sessions, and thereby relate all of the packets
which may make up that connection. NAT relies on this 
information to translate all related packets in the same way, 
and iptables can use this information to act as a stateful 
firewall.</code></pre></div>

<p>If a machine behind your NAT sends a packet out and your router expects the remote host may respond, it keeps track of information, specifically the source and destination ports, source and destination IP addresses, and your internal IP, then returns any packets matching it back to your internal IP.</p>

<p>If another host on your LAN attempts to make the same connection with the same source and destination ports + IPs, your NAT wouldn't be able to discriminate it (the source IPs are different on your LAN but are rewritten to the same public IP on the WAN side), so it alters the source port, but rewrites it when sending back to you.</p>

<h3 id="application-level-gateway">Application Level Gateway</h3>

<p>ALGs allow NAT to track a multi-port protocol like FTP to go out from your system to an FTP server, then track when you request a file to be sent to your internal IP on a specific port, the ALG can rewrite the packet to include your public IP, then forward the FTP's server connection back to you. Had it not rewritten your IP, the FTP server would try to connect back to you on your internal IP (or not try at all if it expects the source IP to be the same as the signaling connection).</p>

<p>From <a target="_blank" href="https://www.wikiwand.com/en/Application-level_gateway">Wikipedia</a>:</p>

<div><pre><code>In the context of computer networking, an application-level 
gateway consists of a security component that augments a 
firewall or NAT employed in a computer network. It allows 
customized NAT traversal filters to be plugged into the 
gateway to support address and port translation for certain 
application layer "control/data" protocols such as FTP, 
BitTorrent, SIP, RTSP, file transfer in IM applications, etc. 
In order for these protocols to work through NAT or a 
firewall, either the application has to know about an address/
port number combination that allows incoming packets, or the 
NAT has to monitor the control traffic and open up port 
mappings (firewall pinhole) dynamically as required. 
Legitimate application data can thus be passed through the 
security checks of the firewall or NAT that would have 
otherwise restricted the traffic for not meeting its limited 
filter criteria.</code></pre></div>

<h2 id="router-investigation--firmware-dumping">Router Investigation / Firmware Dumping</h2>

<p>I'd first like to see how common gateways actually treat packets and multi-port protocols like FTP, SIP, etc. To do this, we‚Äôll want to reverse engineer the firmware from common routers. We could dump the flash from physical routers, however if we can get unencrypted firmware from the manufacturers, we‚Äôll be able to investigate more router models and much faster.</p>

<p>We'll start with a common router, the Netgear Nighthawk R7000. A <a target="_blank" href="http://bfy.tw/NjZh">quick search</a> helps us ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://samy.pl/slipstream/">https://samy.pl/slipstream/</a></em></p>]]>
            </description>
            <link>https://samy.pl/slipstream/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24955891</guid>
            <pubDate>Sat, 31 Oct 2020 22:57:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Homicide victim found in burnt-out SUV ID'd as man behind spam-email empire]]>
            </title>
            <description>
<![CDATA[
Score 150 | Comments 77 (<a href="https://news.ycombinator.com/item?id=24955454">thread link</a>) | @goodcanadian
<br/>
October 31, 2020 | https://www.cbc.ca/news/canada/british-columbia/davis-wolfgang-hawke-missing-dead-1.5782107 | <a href="https://web.archive.org/web/*/https://www.cbc.ca/news/canada/british-columbia/davis-wolfgang-hawke-missing-dead-1.5782107">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>More than three years after his death, a man who was shot dead and found in a burnt-out SUV near Squamish, B.C., has been identified as a U.S. citizen known for spreading racist, neo-Nazi ideologies&nbsp;and for a massive spam email campaign that led to a $12.8-million US lawsuit.</p><div><figure><div><p><img loading="lazy" alt="" srcset="" sizes="" src="https://i.cbc.ca/1.5782212.1604017727!/fileImage/httpImage/image.jpeg_gen/derivatives/16x9_780/davis-wolfgang-hawke.jpeg"></p></div><figcaption>Davis Wolfgang Hawke was found dead in a burnt-out SUV in Squamish, B.C., on June 14, 2017. Police said his death was a homicide.<!-- --> <!-- -->(IHIT)</figcaption></figure><p><span><p>More than three years after his death, a man who was shot dead and found in a burnt-out SUV near Squamish, B.C., has been identified as a U.S. citizen known for spreading racist, neo-Nazi ideologies&nbsp;and for a massive spam email campaign that led to a $12.8-million US lawsuit.</p>  <p>Police found Davis Wolfgang Hawke dead on the Cheekye Forest Road, off the Sea to Sky Highway east of&nbsp;Paradise Valley, around 9:30 a.m. on June 14, 2017. Officers had been called about a burnt,&nbsp;red&nbsp;2000&nbsp;GMC&nbsp;Yukon XL on the side of the road.</p>  <p>An autopsy later confirmed the man had been shot dead,&nbsp;but&nbsp;for years&nbsp;the RCMP could not confirm his real name.</p>  <p>The Integrated Homicide Investigation Team (IHIT) only knew he&nbsp;went by the alias&nbsp;Jesse James, and that he was well known as an&nbsp;avid climber&nbsp;in Squamish, which is around 50 kilometres north of Vancouver.</p>  <p>But with IHIT's confirmation of his identity on Thursday, details about Hawke's past ‚Äî&nbsp;including his fascist sympathies and a lucrative&nbsp;spam empire he built hawking loans, pornography, jewelry and prescription drugs ‚Äî have come to light thanks to the work of an investigative journalist.</p>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5782321.1604000520!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/britt-greenbaum.jpg 300w,https://i.cbc.ca/1.5782321.1604000520!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/britt-greenbaum.jpg 460w,https://i.cbc.ca/1.5782321.1604000520!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/britt-greenbaum.jpg 620w,https://i.cbc.ca/1.5782321.1604000520!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/britt-greenbaum.jpg 780w,https://i.cbc.ca/1.5782321.1604000520!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/britt-greenbaum.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5782321.1604000520!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/britt-greenbaum.jpg"></p></div><figcaption>Andrew Britt Greenbaum (aka Davis Hawke) at his grandparents' home in the U.S. in this undated picture. In posts online, his late mother said her son had been missing for years and that this was a cherished photo of her lost boy.<!-- --> <!-- -->(Facebook)</figcaption></figure></span></p>  <p>Brian McWilliams, author of the book <em>Spam Kings</em>, spent years tracking the young man, who&nbsp;he says lived a nomadic, risk-taking existence. He often travelled with half-wolf dogs, which were the only thing he appeared to be loyal to, according to McWilliams.</p>  <p>"It doesn't surprise me that this guy died in an inglorious and maybe a violent way. He was always living on the edge," McWilliams said.</p>    <p>McWilliams said Hawke,&nbsp;born Andrew Britt Greenbaum, changed his name many times and was&nbsp;evasive when the journalist was chasing him for a story on his junk-email&nbsp;empire.</p>  <p>He said Hawke and his associates bragged about making up to $300,000 in a year in the spam business, after dropping out of college.</p>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5782537.1604017307!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/andrew-britt-greenbaum.jpg 300w,https://i.cbc.ca/1.5782537.1604017307!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/andrew-britt-greenbaum.jpg 460w,https://i.cbc.ca/1.5782537.1604017307!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/andrew-britt-greenbaum.jpg 620w,https://i.cbc.ca/1.5782537.1604017307!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/andrew-britt-greenbaum.jpg 780w,https://i.cbc.ca/1.5782537.1604017307!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/andrew-britt-greenbaum.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5782537.1604017307!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/andrew-britt-greenbaum.jpg"></p></div><figcaption>Greenbaum, who would later change his name to Hawke, grew up in a suburb of Boston and excelled at chess, before he branched into online spamming and vanished.<!-- --> <!-- -->(Facebook)</figcaption></figure></span></p>  <p>While IHIT&nbsp;said they had little information on Hawke, other than he was 38 when he died and was originally from the U.S.,&nbsp;McWilliams&nbsp;has gathered a lot of information about the "puzzling" young man who grew up in an affluent Boston suburb and was a chess prodigy.</p>  <p>McWilliams, who interviewed Hawke and his family, learned how he was bullied as a child&nbsp;for being small and Jewish ‚Äî&nbsp;before he rejected&nbsp;his Jewish background,&nbsp;changed&nbsp;his name to Hawke&nbsp;and soon after became known to anti-racism groups as a neo-Nazi.</p>  <p>"At some point, he just became infatuated with this white supremacy notion," said McWilliams.</p>  <p>"He brought that mentality of everybody being inferior to him into the rest of his life," he said.</p>  <p>He organized a failed anti-government march in Washington, D.C., in 1999, and was written about in the New York Times and Rolling Stone magazine.</p>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5782374.1604017399!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/davis-wolfgang-hawke-forest-road.jpg 300w,https://i.cbc.ca/1.5782374.1604017399!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/davis-wolfgang-hawke-forest-road.jpg 460w,https://i.cbc.ca/1.5782374.1604017399!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/davis-wolfgang-hawke-forest-road.jpg 620w,https://i.cbc.ca/1.5782374.1604017399!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/davis-wolfgang-hawke-forest-road.jpg 780w,https://i.cbc.ca/1.5782374.1604017399!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/davis-wolfgang-hawke-forest-road.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5782374.1604017399!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/davis-wolfgang-hawke-forest-road.jpg"></p></div><figcaption>The entrance to the Cheekye Forest Road as seen from the Sea to Sky Highway in Squamish, B.C. Hawke was found dead inside a burnt-out SUV along the road on June 14, 2017.<!-- --> <!-- -->(Google Street View)</figcaption></figure></span></p>  <p>Later he used his writing talents to trick people into sending him cash, and his spam email venture took off,&nbsp;according to court documents.</p>  <p>"He was a con man. He felt that he could convince anybody to buy herbal Viagra, just writing some clever email text. This guy was super intelligent and thought there was a sucker born every minute ‚Äî and he was real good at finding them," said McWilliams.</p>    <p>In 2005, internet company AOL won a $12.8-million US judgment in federal court in Virginia against Hawke, who was accused of breaking federal law by sending massive amounts of unwanted spam emails to its customers. Hawke never showed for the trial.</p>  <p>Investigators believed he and his partners earned more than $600,000 on the spam sales pitches.</p>  <p>AOL also won a court order to dig up two properties owned by Hawke's relatives&nbsp;in Massachusetts to recoup costs, because&nbsp;Hawke had&nbsp;once bragged he buried gold and platinum in the yards, according to U.S. district court documents.</p>  <p>The company&nbsp;ultimately decided&nbsp;not to search the properties, which belonged to Hawke's grandmother and parents.</p>  <p>The family said no money was ever there.</p>    <p>A warrant for Hawke's arrest remained active.</p>  <p>Lawyers who worked on the case for AOL told CBC&nbsp;News on Thursday they hunted Hawke for years, and learned he'd escaped the&nbsp;U.S. by sneaking on board fishing trawlers, spending time in Belize.</p>  <p>After warrants for his arrest expired, the search wound down.&nbsp;But Hawke kept living like a fugitive and never returned home, according to his family.</p>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.4172626.1498106495!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/ihit-truck-stock.jpg 300w,https://i.cbc.ca/1.4172626.1498106495!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/ihit-truck-stock.jpg 460w,https://i.cbc.ca/1.4172626.1498106495!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/ihit-truck-stock.jpg 620w,https://i.cbc.ca/1.4172626.1498106495!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/ihit-truck-stock.jpg 780w,https://i.cbc.ca/1.4172626.1498106495!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/ihit-truck-stock.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.4172626.1498106495!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/ihit-truck-stock.jpg"></p></div><figcaption>A stock photo of a 2000 red GMC Yukon XL, the same type of vehicle where the body of Hawke was found.<!-- --> <!-- -->(IHIT)</figcaption></figure></span></p>  <p>McWilliams said he always wondered if Hawke would settle down one day and "sell insurance," but said, "It sounds like he stayed kind of a wild man."</p>  <p>Hawke's uncle Raleigh Davis said his nephew's death was communicated to the family last week. He said nobody had seen Hawke in 20 years, and confirmation of his death at least offered some closure.</p>  <p>"He was really smart and really&nbsp;clever and really confident in a lot of ways.&nbsp;I think he had a really insecure side, though," said Davis.</p>  <p>"It's just sad."</p>  <p>Anyone with more information about Hawke's death is asked to phone IHIT&nbsp;at 1-877-551-4448&nbsp;or email ihitinfo@rcmp-grc.gc.ca&nbsp;or call Crime Stoppers at 1-800-222-8477&nbsp;if they want to remain anonymous.</p>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5782109.1604017467!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/davis-wolfgang-hawke.jpg 300w,https://i.cbc.ca/1.5782109.1604017467!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/davis-wolfgang-hawke.jpg 460w,https://i.cbc.ca/1.5782109.1604017467!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/davis-wolfgang-hawke.jpg 620w,https://i.cbc.ca/1.5782109.1604017467!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/davis-wolfgang-hawke.jpg 780w,https://i.cbc.ca/1.5782109.1604017467!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/davis-wolfgang-hawke.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5782109.1604017467!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/davis-wolfgang-hawke.jpg"></p></div><figcaption>IHIT Sgt. Frank Jang holds a photo of Hawke.<!-- --> <!-- -->(CBC)</figcaption></figure></span></p></span></p></div></div>]]>
            </description>
            <link>https://www.cbc.ca/news/canada/british-columbia/davis-wolfgang-hawke-missing-dead-1.5782107</link>
            <guid isPermaLink="false">hacker-news-small-sites-24955454</guid>
            <pubDate>Sat, 31 Oct 2020 21:47:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Essays on Programming I Think About a Lot]]>
            </title>
            <description>
<![CDATA[
Score 10 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24951923">thread link</a>) | @jwworth
<br/>
October 31, 2020 | https://www.jakeworth.com/essays-on-programming-i-think-about-a-lot/ | <a href="https://web.archive.org/web/*/https://www.jakeworth.com/essays-on-programming-i-think-about-a-lot/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Programming is a game of abstractions, and we programmers traffic in ideas.
When I find an idea that resonates with me, I turn into an evangelist for it to
everyone who works with me.</p>
<p>Here are some of my favorites. There‚Äôs a recency bias; I can‚Äôt remember some of
the formative essays from my early years as a programmer. </p>
<p>Thanks to <a href="https://www.benkuhn.net/progessays/">Ben Kuhn</a> for this idea!</p>
<h3>Essays</h3>
<p>Jeff Atwood, <a href="https://blog.codinghorror.com/the-first-rule-of-programming-its-always-your-fault/">The First Rule of Programming: It‚Äôs Always Your Fault</a>. I
like to answer questions on Stack Overflow, and an amazing amount of questions
on that website have a title like ‚ÄúFound a bug in React?‚Äù paired with an
introductory sentence: ‚ÄúI‚Äôm brand new to React.‚Äù It‚Äôs human to assume there‚Äôs a
problem with your tools or materials. To me, this essay‚Äôs point is that it‚Äôs
more profitable to assume the opposite, because your code hasn‚Äôt stood up to
anything close to the scrutiny of the code from a popular software project.</p>
<blockquote>
<p>If you truly aspire to being a humble programmer, you should have no qualms
about saying ‚Äúhey, this is my fault‚Äî and I‚Äôll get to the bottom of it.‚Äù
‚Äî Jeff Atwood</p>
</blockquote>
<hr>
<p>Shawn Wang, <a href="https://www.swyx.io/writing/learn-in-public/">Learn in Public</a>. Be public, leverage the encouragement and
criticism of others, and build a footprint for yourself on the internet. There
are a bunch of detours you can take as a junior developer that waste time and
potentially graduate you to <a href="https://daedtech.com/how-developers-stop-learning-rise-of-the-expert-beginner/">expert beginner</a> status; one of
them is hiding your work in an attempt to avoid criticism. I think one of the
smartest parts of argument this can be summed up in the adage: ‚ÄúThe fastest way
to get the right answer to a question is to post the wrong answer on the
internet.‚Äù</p>
<blockquote>
<p>People think you suck? Good. You agree. Ask them to explain, in detail, why
you suck. You want to just feel good or you want to be good? No objections, no
hurt feelings. Then go away and prove them wrong.
‚Äî Shawn Wang</p>
</blockquote>
<hr>
<p>Elisabeth Hendrickson, <a href="https://testobsessed.com/2020/02/momentum-urgency/">Momentum &gt;
Urgency</a>. I found this post
recently, and it describes the best teams I‚Äôve worked with. Effective teams
focus on process, not outcome. Managers of such teams know that a team member
being blocked isn‚Äôt a frustrating detail that that team member will have to
remedy, but rather a process failure that was luckily exposed while many more
remain hidden. They‚Äôll use their managerial clout to fight with you against
that obstacle, considering it a top priority.</p>
<blockquote>
<p>What I‚Äôve learned is that if we want things to go fast, a sense of momentum
is much more effective than a sense of urgency.
‚Äî Elisabeth Hendrickson</p>
</blockquote>
<hr>
<p>Scott Hanselman, <a href="https://www.hanselman.com/blog/do-they-deserve-the-gift-of-your-keystrokes">Do they deserve the gift of your
keystrokes?</a>.
This post isn‚Äôt just for programmers, but the statistical nature of it
resonated with me. Since reading it, I often consider the reach of my chosen
communication method, and whether I‚Äôm making efficient use of time.</p>
<blockquote>
<p>Assuming you want your message to reach as many people as possible, blog it. You only have so many hours in the day.
‚Äî Scott Hanselman</p>
</blockquote>
<hr>
<p>Joel Spolsky, <a href="https://www.joelonsoftware.com/2002/02/13/the-iceberg-secret-revealed/">The Iceberg Secret,
Revealed</a>.
Programmers know that what we can see on a web page can represent a small
fraction or none of the true functionality, completeness, and complexity of the
application. People who don‚Äôt write software don‚Äôt automatically know that.
Factor this into all communication.</p>
<blockquote>
<p> Customers Don‚Äôt Know What They Want. Stop Expecting Customers to Know What
They Want. It‚Äôs just never going to happen. Get over it.
‚Äî Joel Spolsky</p>
</blockquote>
<blockquote>
<p>Understand that any demos you do in a darkened room with a projector are
going to be all about pixels. If you can, build your UI in such a way that
unfinished parts look unfinished.
‚Äî Joel Spolsky</p>
</blockquote>
<hr>
<p><a href="http://xyproblem.info/">XY Problem</a>. When you‚Äôre asking for programming help
from someone, start by easing them into your situation, stating the problem,
your assumptions, and what you‚Äôve tried and learned. Give them the chance to
poke holes in your logic.</p>
<blockquote>
<p>Remember that if your diagnostic theories were accurate, you wouldn‚Äôt be asking for help right?</p>
</blockquote>
<hr>
<p>Jon Evans, <a href="https://techcrunch.com/2011/05/07/why-the-new-guy-cant-code/">Why The New Guy Can‚Äôt
Code</a>. The truth
of this argument has confirmed itself to me over and over again. I think that I
became a programmer on the job. But you can become a programmer right now by
doing just one hard thing: committing to a meaningful project, no matter how
small, and finishing it, in spite of the obstacles you will face.</p>
<blockquote>
<p>So what should a real interview consist of? Let me offer a humble proposal:
don‚Äôt interview anyone who hasn‚Äôt accomplished anything. Ever. Certificates and
degrees are not accomplishments; I mean real-world projects with real-world
users.
‚Äî Jon Evans</p>
</blockquote>
<hr>
<p>Paul Slaughter, <a href="https://conventionalcomments.org/">Conventional comments</a>. I
believe in code reviews as a technique to raise quality, share information, and
help people grow. But they can go wrong in so many ways and have an almost
opposite effect. This technique‚Äì labeling comments to help the recipient
contextualize your feedback‚Äì has had a positive impact on several teams I‚Äôve
been a part of.</p>
<blockquote>
<p>Labeling comments saves hours of undercommunication and misunderstandings.
They are also parseable by machines!
‚Äî Paul Slaughter</p>
</blockquote>
<hr>
<p>Zed Shaw via Abhishek Nagekar, <a href="https://www.nagekar.com/2018/06/advice-from-an-old-programmer-zed-shaw.html">Advice From An Old Programmer</a>. There will
likely come a day when you find programming to be a little bit boring. It will
cease to be joyful as a pure exercise. What do you do then? It‚Äôs a question I‚Äôm
grappling with. I‚Äôm choosing to use that skill to build things I care about,
and help others become programmers through volunteering.</p>
<blockquote>
<p>Programming as a profession is only moderately interesting. It can be a good
job, but you could make about the same money and be happier running a fast food
joint. You‚Äôre much better off using code as your secret weapon in another
profession.
‚Äî Zed Shaw</p>
</blockquote>
<!-- TODO -->
<!-- Dan McKinley, [Choose Boring Technology](https://mcfunley.com/choose-boring-technology) -->
<!-- Kent C. Dodds, [AHA Programming](https://kentcdodds.com/blog/aha-programming). -->
<h3>Conclusion</h3>
<p>I plan to keep this list updated as I continue to read. Send me the essays you
keep returning to via <a href="https://twitter.com/jwworth">Twitter</a>!</p></div></div>]]>
            </description>
            <link>https://www.jakeworth.com/essays-on-programming-i-think-about-a-lot/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24951923</guid>
            <pubDate>Sat, 31 Oct 2020 14:52:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What makes entrepreneurship so difficult?]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24951824">thread link</a>) | @rjyoungling
<br/>
October 31, 2020 | http://younglingfeynman.com/essays/artofbusiness | <a href="https://web.archive.org/web/*/http://younglingfeynman.com/essays/artofbusiness">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-block-type="2" id="block-1cced88d6a399edc0c5b"><div><p><em>TLDR: Science relies in large part on replicability. Business does not. Copying is a zero-sum game and all participating players will compete profits away until they reach a Nash-equilibrium, where a further lowering of price, and thus margins, is unsustainable. Innovation is always new and therefore never formulaic. There are certain guidelines successful businesses seem to use but in the end, you‚Äôll still have to go with your gut and make a judgment call according to your own ethical values.</em></p><p>Arguably, replicating findings is one of the best tools we have in our scientific arsenal in order to test the validity of a conclusion.</p><p>Which is why the psychology community was not amused when the methodological crisis now known as the <a href="https://en.wikipedia.org/wiki/Replication_crisis" target="_blank">Replication crisis</a> started, where it was discovered that many studies weren‚Äôt replicable (Nosek et al., 2015).</p><p>Even some of the most cited and well-known studies such as the study that power posing makes you act bolder (Carney, Cuddy &amp; Yap, 2010).</p><p>Which, incidentally, is why it‚Äôs so important to not just reference research (instead of parroting some YouTube influencer or blogger) but to also carefully analyze the literature and its limitations yourself. *1</p><p>This doesn‚Äôt guarantee perfection, but it does decrease obvious and preventable mistakes.</p><p>JP Ioannidis pointed out serious problems with published research in ‚Äò‚ÄôWhy most published research findings are false.‚Äô‚Äô</p><blockquote><p>‚Äò‚Äô Simulations show that for most study designs and settings, it is more likely for a research claim to be false than true. Moreover, for many current scientific fields, claimed research findings may often be simply accurate measures of the prevailing bias.‚Äô‚Äô (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC1182327/" target="_blank">Ioannidis, 2005</a>).</p></blockquote><p>Methodological issues aside, replication matters.</p><p>Well, that‚Äôs all fine and dandy weren‚Äôt it for the pesky fact that our field relies on innovation.</p><p>Even if you extract all the knowledge from the brains of <a href="https://en.wikipedia.org/wiki/Kevin_Systrom" target="_blank">Kevin Systrom</a> and <a href="https://en.wikipedia.org/wiki/Mike_Krieger" target="_blank">Mike Krieger </a>and build Instagram, you‚Äôd get the complete opposite result because Instagram already exists.</p><p>Even Kevin and Mike can‚Äôt replicate it because the variables have changed.</p><p>The entire environment and current social climate (regarding privacy, advertising, users as the product, and social media addiction) are different, and even if it weren‚Äôt, no user is gonna switch to an IG clone when IG already exists.</p><p>There are some guidelines that most successful companies seem to follow, however, you can‚Äôt formulate a step-by-step plan for the reasons laid out above.</p><p><a href="https://en.wikipedia.org/wiki/Peter_Thiel" target="_blank">Peter Thiel</a> was one of the first to point out this distinction between companies that go from 0 to 1, innovation, and companies that go from 1 to n (copying), in his book <a href="https://www.amazon.com/Zero-One-Notes-Startups-Future/dp/0804139296" target="_blank">Zero to One</a>.</p><p>Companies that do copy and thus employ a formula they copied from another company open themselves up to fierce competition.</p><p>As more players participate in this zero-sum game, the fixed pie of users and profits will get competed away because there are too many mouths to feed with finite resources. *2</p><p>If you copy each other with no (or no meaningful) distinctions then price will be the only thing you can compete on, which is exactly what we see in commodity markets.</p><p>Player B will lower prices in order to steal market share from Player A. Player A lowers them still. Player C lowers it below both of them. Player D goes too low and goes bankrupt.</p><p>Over time, price will collapse into a <a href="https://en.wikipedia.org/wiki/Nash_equilibrium" target="_blank">Nash-equilibrium</a>.</p><p>A point where no player can do better by unilaterally changing their strategy. Go below the current price point and you go out of business because the unit economics fail. Go above the current price point and you go out of business because there‚Äôs no good reason for users to pay more for the exact same product. *3</p><p>Unless one player, usually a new one, sufficiently innovates and thus creates a whole new business model. In effect, changing the game. This is essentially the raison d‚Äôetre of a startup, and it‚Äôs why <a href="https://steveblank.com/about/">Steve Blank</a> defined a startup as: ‚Äò‚Äòa temporary organization <strong>used to search</strong> for a repeatable and scalable business model.‚Äô‚Äô</p><p>This problem is further exacerbated by the fact that we go through traditional education by&nbsp;default.</p><p>A system that‚Äôs not designed to teach independent thinking but rather to reward obedience and implementing rules.</p><p>If you think that‚Äôs my opinion instead of the facts, then watch this to get a better understanding of how our modern education system was formed:</p></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1560851539916_31181"><div><p>If you‚Äôll allow me, I‚Äôd like to take a short trip with you to use mathematics as an analogy.</p><p>In mathematical set theory, there‚Äôs something called the axiom of choice&nbsp;(AoC).</p><p>Without making the <a href="https://en.wikipedia.org/wiki/Axiom_of_choice" target="_blank">AoC</a> too complex, picture this:</p><p>Suppose you have 3 jars: Jar 1, Jar 2, Jar 3.</p><p>Each jar contains a piece of paper with a few whole numbers written on it.</p><p>Jar 1: 4, 8, 45</p><p>Jar 2: 646, 23</p><p>Jar 3: 894, 7, 45649, 54, 76</p><p>Now I can make a new jar: Jar 4, which contains one element from each of the jars.</p></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1560851539916_34730"><div><p>Okay‚Ä¶ in order to do that we need to build some machine where we can put something in and it spits something out (a function).</p><p>Let‚Äôs create a function that just ‚Äò‚Äôchooses‚Äô‚Äô the smallest element in each jar.</p><p>So it picks: 4 from Jar 1, 23 from Jar 2 and 7 from Jar 3.</p><p>So now we can put a piece of paper in Jar 4 with 4, 23, 7 on it.</p><p>We‚Äôve created a choice function ‚Äò‚Äôpick the smallest element out of each jar‚Äô‚Äô that creates a new set (Jar 4) with the chosen elements.</p><p>Even if we had infinite jars, this function always works.</p><p>Because with natural numbers (whole numbers 1 and up), there‚Äôs always ‚Äòa smallest‚Äô.</p><p>But what if we have an interval in Jar 2 such as (3,5].</p><p>The symbol ( means 3 is not included.</p><p>This creates a problem because what‚Äôs the smallest element we should pick now?</p><p>3.1? Well, what about half that 3.05?</p><p>Well, what about half of that again 3.025?</p><p>No matter how close we get to 3 we can always choose a smaller element so our choice function doesn‚Äôt work here.</p><p>When you invoke the AoC you claim that even though we don‚Äôt know what the choice function is, you‚Äôre going to assume there is one.&nbsp;</p><p>(That there is a way to pick one element out of each jar and create a new jar with those elements.)</p><p>An analogy <a href="https://en.wikipedia.org/wiki/Bertrand_Russell" target="_blank">Bertrand Russell</a> came up with is that if you have an infinite pair of shoes you can create a choice function: Pick the left shoe from every pair.</p><p>But if you have an infinite pair of identical socks, there‚Äôs no such thing as right or left, so you can‚Äôt create a choice function to pick one sock from each pair and therefore have to invoke the AoC.</p><p>The AoC is something that can not be proven or disproven, you either invoke it or you don‚Äôt.</p><p>If you use it, it allows you to do certain kinds of mathematics but also creates paradoxes such as the Banach-Tarski paradox.&nbsp;</p><p><em>Hard to explain without mathematics but a sketchy way to think about it is that it‚Äôs possible to break a sphere into pieces, rotated them and you get your sphere back, rotate them differently and you have two spheres with the same volume as the original.</em></p><p>And if you don‚Äôt invoke the AoC, there‚Äôs certain mathematics you can‚Äôt do.</p></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1560851539916_43081"><div><p>Just like not knowing the existence of a choice function and invoking the Axiom of Choice, we often can‚Äôt know the best way to proceed in business under the current market and technology circumstances.</p><p>We often can‚Äôt prove or disprove our hypotheses, especially when you‚Äôre innovating, so reason fails us to some extent.</p><p>We talked about the limitations of reason and the upside of using a more Darwinian approach in the essay series: ‚Äò‚Äò<a href="https://www.younglingfeynman.com/essays/illogical" target="_blank">Why Your Business Needs More Weird Ideas.</a>‚Äô‚Äô</p><p>In essence, you‚Äôre saying: ‚Äò‚ÄòIt‚Äôs fundamentally impossible to determine what the best way to innovate is, but I‚Äôm just gonna assume there is a way.‚Äô‚Äô</p><p>It‚Äôs an enigmatic problem so you just have to take a stance and make a decision according to your ethical values.</p><p>I want to end with an excerpt from the interview with Andrew Mason, the Founder and early CEO of&nbsp;Groupon.</p><p><a href="http://nymag.com/intelligencer/2018/10/andrew-mason-on-groupon.html" target="_blank">The Quick Rise and Even Faster Fall of Groupon, Through the Eyes of Its CEO.</a></p><blockquote><p><strong>There was one other part of the letter that says your biggest regrets are the moments that you let a lack of data override your intuition of what‚Äôs best for the customers. What did you mean by that?</strong></p><p><strong><br></strong>Groupon started out with these really tight principles about how the site was going to work, really being pro-customer. And as we expanded people in the company would say, ‚ÄúHey, why don‚Äôt we try running two deals a day?‚Äù ‚ÄúWhy don‚Äôt we start sending two emails a day?‚Äù And I‚Äôd think, <em>That sounds awful. Who wants to get two emails every single day from a company. </em>And they‚Äôd be like, <em>Sure, it sounds awful to you. But we‚Äôre a data-driven company, so why don‚Äôt we let the data decide? Why don‚Äôt we do a test?</em> And we‚Äôd do a test, and it would show that maybe people would unsubscribe at a slightly higher rate, but the increase in purchasing would more than make up for it. You‚Äôd get in a situation where it doesn‚Äôt feel right, but it does seem like a rational decision.</p><p>The problem was when you‚Äôre in hypergrowth like this, you don‚Äôt have time to see what is going to happen to the data in the long term. The churn would catch up with you. People would unsubscribe at higher rates, and then, before you know it, the service has just turned into something‚Ää‚Äî‚Ääif you look at Groupon now, it‚Äôs just this vestige of what it once was. There‚Äôs no real copywriting. It‚Äôs a marketplace of coupons. It‚Äôs still a service that a lot of people get a lot of value out of, but it doesn‚Äôt have the spirit it once did.</p><p>There are certain things you have to be religious about in the company. That‚Äôs what I‚Äôve taken away from that: There are some things where you have to say, ‚ÄúI‚Äôm sorry. I‚Äôm not going to look at the data on that. This is just what we‚Äôre going to do. We know that it‚Äôs right, and there‚Äôs nothing that‚Äôs going to shake us from that.‚Äù (Blumberg, 2018).</p></blockquote><p><em>*1 The fact that almost everyone is lazy and assume others have done their homework vs. doing the hard work of checking it themselves is a cognitive error known as </em><a href="https://en.wikipedia.org/wiki/Diffusion_of_responsibility" target="_blank"><em>diffusion of responsibility</em></a><em>. ‚Äò‚ÄôThe individual assumes that others either are responsible for taking action or have already done so.‚Äô‚Äô</em></p><p><em>*2 This is often ‚Ä¶</em></p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://younglingfeynman.com/essays/artofbusiness">http://younglingfeynman.com/essays/artofbusiness</a></em></p>]]>
            </description>
            <link>http://younglingfeynman.com/essays/artofbusiness</link>
            <guid isPermaLink="false">hacker-news-small-sites-24951824</guid>
            <pubDate>Sat, 31 Oct 2020 14:38:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Using Windows Explorer as a Git IDE]]>
            </title>
            <description>
<![CDATA[
Score 19 | Comments 5 (<a href="https://news.ycombinator.com/item?id=24951741">thread link</a>) | @todsacerdoti
<br/>
October 31, 2020 | http://john.ankarstrom.se/explorer-git-ide/ | <a href="https://web.archive.org/web/*/http://john.ankarstrom.se/explorer-git-ide/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
          <td colspan="3">
            
            <div id="content">
              <p>I have a couple of different stationary computers. A
                custom-built PC running Windows, an iMac G3 running Mac
                OS 9 and an old HP microtower running Alpine Linux,
                acting as a home server of sorts. Out of all these, I
                spend most of my time on the Windows PC. I use Windows
                for the majority of my work, including a large part of
                the programming that I do.<br>
              </p>
              <p>Even though I mainly use Windows, most of my
                web/software development is grounded in or at least
                inspired by Unix in some way: most obviously, I use Git,
                which is a tool designed for the Unix shell. This turns
                out to be a rather awkward match: on the one hand, I use
                Windows Explorer to manage the files; on the other hand,
                I have a command prompt open to manage the repository.</p>
              <p>For my workflow, it would be much better if the Git
                commands were integrated into Explorer itself. So I
                added what amounts to the following code to <a href="http://git.ankarstrom.se/ahk.git/">my AutoHotKey
                  script</a>: <br>
              </p>
              <pre>GroupAdd, Explorer, ahk_class CabinetWClass<br>GroupAdd, Explorer, ahk_class ExploreWClass<p>#IfWinActive ahk_group Explorer</p><p>!a::Run, % "cmd /c cd "qp()" &amp; git add "qip()" &amp;&amp; git status &amp; pause"<br>!c::Run, % "cmd /c cd "qp()" &amp; git commit &amp; pause"<br>!+c::Run, % "cmd /c cd "qp()" &amp; git commit --amend &amp; pause"<br>!f::Run, % "cmd /c cd "qp()" &amp; git diff &amp; pause"<br>!+f::Run, % "cmd /c cd "qp()" &amp; git diff "qip()" &amp; pause"<br>!i::Run, % "cmd /c cd "qp()" &amp; git diff HEAD~1 HEAD &amp; pause"<br>!+i::Run, % "cmd /c cd "qp()" &amp; git diff HEAD~1 HEAD "qip()" &amp; pause"<br>!l::Run, % "cmd /c cd "qp()" &amp; git log &amp; pause"<br>!+l::Run, % "cmd /c cd "qp()" &amp; git log "qip()" &amp; pause"<br>!p::Run, % "cmd /c cd "qp()" &amp; git push &amp; pause"<br>!r::Run, % "cmd /c cd "qp()" &amp; git reset "qip()" &amp;&amp; git status &amp; pause"<br>!s::Run, % "cmd /c cd "qp()" &amp; git status &amp; pause"</p><p>#IfWinActive</p><p>Explorer(hwnd := "")<br>{<br>  ShellApp := ComObjCreate("Shell.Application")<br>  if (hwnd = "")<br>    WinGet, hwnd, id, A<br>  for window in ShellApp.Windows<br>    if (window.hwnd = hwnd)<br>      return window<br>  return -1<br>}</p><p>qp()<br>{<br>  return """" Explorer().Document.Folder.Self.path """"<br>}</p><p>qip()<br>{<br>  return """" Explorer().Document.FocusedItem.path """"<br>}</p></pre>
              <p>(The actual code is contained in <a href="http://git.ankarstrom.se/ahk.git/tree/tt.programs.explorer.ahk">this

                  file</a>, most of it near the bottom.) </p>
              <p>This adds a bunch of hotkeys to any Explorer window:</p>
              <dl>
                <dt><b>Alt-A</b></dt>
                <dd>"git add" the selected file; then "git status"<br>
                </dd>
                <dt><b>Alt-C</b></dt>
                <dd>"git commit"</dd>
                <dt><b>Alt-Shift-C</b></dt>
                <dd>"git commit --amend"</dd>
                <dt><b>Alt-F</b></dt>
                <dd>"git diff"</dd>
                <dt><b>Alt-Shift-F</b></dt>
                <dd>"git diff" the selected file</dd>
                <dt><b>Alt-I</b></dt>
                <dd>"git diff", comparing the previous and current
                  commit</dd>
                <dt><b>Alt-Shift-I</b></dt>
                <dd>"git diff" the selected file, comparing the previous
                  and current commit</dd>
                <dt><b>Alt-L</b></dt>
                <dd>"git log"</dd>
                <dt><b>Alt-Shift-L</b></dt>
                <dd>"git log" the selected file<br>
                </dd>
                <dt><b>Alt-P</b></dt>
                <dd>"git push"</dd>
                <dt><b>Alt-R</b></dt>
                <dd>"git reset" the selected file; then "git status"</dd>
                <dt><b>Alt-S</b></dt>
                <dd>"git status"</dd>
              </dl>
              <p>All of these hotkeys open a new command prompt window,
                displaying the results of the Git command, which the
                user can close by pressing any key.</p>
              <p>In my experience, these hotkeys make it incalculably
                less bothersome to work with Git on Windows, and I think
                it shows how incredibly useful even very simple
                AutoHotKey scripts can be. If you have any suggestions
                on other hotkeys, please write a comment below.<br>
              </p>
            </div>
            <hr> </td>
          <td rowspan="14">&nbsp;</td>
          <td rowspan="14" id="links">
            <p> <small> Published&nbsp;by John&nbsp;Ankarstr√∂m on
                2020-10-31. </small> </p>
            <!--?php include('../1/links.partial.php') ?--> </td>
        </div></div>]]>
            </description>
            <link>http://john.ankarstrom.se/explorer-git-ide/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24951741</guid>
            <pubDate>Sat, 31 Oct 2020 14:28:23 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How Python bytecode is executed]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24951649">thread link</a>) | @r4victor
<br/>
October 31, 2020 | https://tenthousandmeters.com/blog/python-behind-the-scenes-4-how-python-bytecode-is-executed/ | <a href="https://web.archive.org/web/*/https://tenthousandmeters.com/blog/python-behind-the-scenes-4-how-python-bytecode-is-executed/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<!-- /.post-info -->      <p>We started this series with <a href="https://tenthousandmeters.com/blog/python-behind-the-scenes-1-how-the-cpython-vm-works/">an overview of the CPython VM</a>. We learned that to run a Python program, CPython first compiles it to bytecode, and we studied how the compiler works in <a href="https://tenthousandmeters.com/blog/python-behind-the-scenes-2-how-the-cpython-compiler-works/">part two</a>. <a href="https://tenthousandmeters.com/blog/python-behind-the-scenes-3-stepping-through-the-cpython-source-code/">Last time</a> we stepped through the CPython source code starting with the <code>main()</code> function until we reached the evaluation loop, a place where Python bytecode gets executed. The main reason why we spent time studying these things was to prepare for the discussion that we start today. The goal of this discussion is to understand how CPython does what we tell it to do, that is, how it executes the bytecode to which the code we write compiles.</p>
<p><strong>Note</strong>: In this post I'm referring to CPython 3.9. Some implementation details will certainly change as CPython evolves. I'll try to keep track of important changes and add update notes.</p>
<h3>Starting point</h3>
<p>Let's briefly recall what we learned in the previous parts. We tell CPython what to do by writing Python code. The CPython VM, however, understands only Python bytecode. This is the job of the compiler to translate Python code to bytecode. The compiler stores bytecode in a code object, which is a structure that fully describes what a code block, like a module or a function, does. To execute a code object, CPython first creates a state of execution for it called a frame object. Then it passes a frame object to a frame evaluation function to perform the actual computation. The default frame evaluation function is <code>_PyEval_EvalFrameDefault()</code> defined in <a href="https://github.com/python/cpython/blob/3.9/Python/ceval.c#L889">Python/ceval.c</a>. This function implements the core of the CPython VM. Namely, it implements the logic for the execution of Python bytecode. So, this function is what we're going to study today.</p>
<p>To understand how <code>_PyEval_EvalFrameDefault()</code> works, it is crucial to have an idea of what its input, a frame object, is. A frame object is a Python object defined by the following C struct:</p>
<div><pre><span></span><span>// typedef struct _frame PyFrameObject; in other place</span>
<span>struct</span> <span>_frame</span> <span>{</span>
    <span>PyObject_VAR_HEAD</span>
    <span>struct</span> <span>_frame</span> <span>*</span><span>f_back</span><span>;</span>      <span>/* previous frame, or NULL */</span>
    <span>PyCodeObject</span> <span>*</span><span>f_code</span><span>;</span>       <span>/* code segment */</span>
    <span>PyObject</span> <span>*</span><span>f_builtins</span><span>;</span>       <span>/* builtin symbol table (PyDictObject) */</span>
    <span>PyObject</span> <span>*</span><span>f_globals</span><span>;</span>        <span>/* global symbol table (PyDictObject) */</span>
    <span>PyObject</span> <span>*</span><span>f_locals</span><span>;</span>         <span>/* local symbol table (any mapping) */</span>
    <span>PyObject</span> <span>**</span><span>f_valuestack</span><span>;</span>    <span>/* points after the last local */</span>
    <span>/* Next free slot in f_valuestack.  Frame creation sets to f_valuestack.</span>
<span>       Frame evaluation usually NULLs it, but a frame that yields sets it</span>
<span>       to the current stack top. */</span>
    <span>PyObject</span> <span>**</span><span>f_stacktop</span><span>;</span>
    <span>PyObject</span> <span>*</span><span>f_trace</span><span>;</span>          <span>/* Trace function */</span>
    <span>char</span> <span>f_trace_lines</span><span>;</span>         <span>/* Emit per-line trace events? */</span>
    <span>char</span> <span>f_trace_opcodes</span><span>;</span>       <span>/* Emit per-opcode trace events? */</span>

    <span>/* Borrowed reference to a generator, or NULL */</span>
    <span>PyObject</span> <span>*</span><span>f_gen</span><span>;</span>

    <span>int</span> <span>f_lasti</span><span>;</span>                <span>/* Last instruction if called */</span>
    <span>int</span> <span>f_lineno</span><span>;</span>               <span>/* Current line number */</span>
    <span>int</span> <span>f_iblock</span><span>;</span>               <span>/* index in f_blockstack */</span>
    <span>char</span> <span>f_executing</span><span>;</span>           <span>/* whether the frame is still executing */</span>
    <span>PyTryBlock</span> <span>f_blockstack</span><span>[</span><span>CO_MAXBLOCKS</span><span>];</span> <span>/* for try and loop blocks */</span>
    <span>PyObject</span> <span>*</span><span>f_localsplus</span><span>[</span><span>1</span><span>];</span>  <span>/* locals+stack, dynamically sized */</span>
<span>};</span>
</pre></div>


<p>The <code>f_code</code> field of a frame object points to a code object. A code object is also a Python object. Here's its definition:</p>
<div><pre><span></span><span>struct</span> <span>PyCodeObject</span> <span>{</span>
    <span>PyObject_HEAD</span>
    <span>int</span> <span>co_argcount</span><span>;</span>            <span>/* #arguments, except *args */</span>
    <span>int</span> <span>co_posonlyargcount</span><span>;</span>     <span>/* #positional only arguments */</span>
    <span>int</span> <span>co_kwonlyargcount</span><span>;</span>      <span>/* #keyword only arguments */</span>
    <span>int</span> <span>co_nlocals</span><span>;</span>             <span>/* #local variables */</span>
    <span>int</span> <span>co_stacksize</span><span>;</span>           <span>/* #entries needed for evaluation stack */</span>
    <span>int</span> <span>co_flags</span><span>;</span>               <span>/* CO_..., see below */</span>
    <span>int</span> <span>co_firstlineno</span><span>;</span>         <span>/* first source line number */</span>
    <span>PyObject</span> <span>*</span><span>co_code</span><span>;</span>          <span>/* instruction opcodes */</span>
    <span>PyObject</span> <span>*</span><span>co_consts</span><span>;</span>        <span>/* list (constants used) */</span>
    <span>PyObject</span> <span>*</span><span>co_names</span><span>;</span>         <span>/* list of strings (names used) */</span>
    <span>PyObject</span> <span>*</span><span>co_varnames</span><span>;</span>      <span>/* tuple of strings (local variable names) */</span>
    <span>PyObject</span> <span>*</span><span>co_freevars</span><span>;</span>      <span>/* tuple of strings (free variable names) */</span>
    <span>PyObject</span> <span>*</span><span>co_cellvars</span><span>;</span>      <span>/* tuple of strings (cell variable names) */</span>
    <span>/* The rest aren't used in either hash or comparisons, except for co_name,</span>
<span>       used in both. This is done to preserve the name and line number</span>
<span>       for tracebacks and debuggers; otherwise, constant de-duplication</span>
<span>       would collapse identical functions/lambdas defined on different lines.</span>
<span>    */</span>
    <span>Py_ssize_t</span> <span>*</span><span>co_cell2arg</span><span>;</span>    <span>/* Maps cell vars which are arguments. */</span>
    <span>PyObject</span> <span>*</span><span>co_filename</span><span>;</span>      <span>/* unicode (where it was loaded from) */</span>
    <span>PyObject</span> <span>*</span><span>co_name</span><span>;</span>          <span>/* unicode (name, for reference) */</span>
    <span>PyObject</span> <span>*</span><span>co_lnotab</span><span>;</span>        <span>/* string (encoding addr&lt;-&gt;lineno mapping) See</span>
<span>                                   Objects/lnotab_notes.txt for details. */</span>
    <span>void</span> <span>*</span><span>co_zombieframe</span><span>;</span>       <span>/* for optimization only (see frameobject.c) */</span>
    <span>PyObject</span> <span>*</span><span>co_weakreflist</span><span>;</span>   <span>/* to support weakrefs to code objects */</span>
    <span>/* Scratch space for extra data relating to the code object.</span>
<span>       Type is a void* to keep the format private in codeobject.c to force</span>
<span>       people to go through the proper APIs. */</span>
    <span>void</span> <span>*</span><span>co_extra</span><span>;</span>

    <span>/* Per opcodes just-in-time cache</span>
<span>     *</span>
<span>     * To reduce cache size, we use indirect mapping from opcode index to</span>
<span>     * cache object:</span>
<span>     *   cache = co_opcache[co_opcache_map[next_instr - first_instr] - 1]</span>
<span>     */</span>

    <span>// co_opcache_map is indexed by (next_instr - first_instr).</span>
    <span>//  * 0 means there is no cache for this opcode.</span>
    <span>//  * n &gt; 0 means there is cache in co_opcache[n-1].</span>
    <span>unsigned</span> <span>char</span> <span>*</span><span>co_opcache_map</span><span>;</span>
    <span>_PyOpcache</span> <span>*</span><span>co_opcache</span><span>;</span>
    <span>int</span> <span>co_opcache_flag</span><span>;</span>  <span>// used to determine when create a cache.</span>
    <span>unsigned</span> <span>char</span> <span>co_opcache_size</span><span>;</span>  <span>// length of co_opcache.</span>
<span>};</span>
</pre></div>


<p>The most important field of a code object is <code>co_code</code>. It's a pointer to a Python bytes object representing the bytecode. The bytecode is a sequence of two-byte instructions: one byte for an opcode and one byte for an argument.</p>
<p>Don't worry if some members of the above structures are still a mystery to you. We'll see what they are used for as we move forward in our attempt to understand how the CPython VM executes the bytecode.</p>
<h3>Overview of the evaluation loop</h3>
<p>The problem of executing Python bytecode may seem a no-brainer to you. Indeed, all the VM has to do is to iterate over the instructions and to act according to them. And this is what essentially <code>_PyEval_EvalFrameDefault()</code> does. It contains an infinite <code>for (;;)</code> loop that we refer to as the evaluation loop. Inside that loop there is a giant <code>switch</code> statement over all possible opcodes. Each opcode has a corresponding <code>case</code> block containing the code for executing that opcode. The bytecode is represented by an array of 16-bit unsigned integers, one integer per instruction. The VM keeps track of the next instruction to be executed using the <code>next_instr</code> variable, which is a pointer to the array of instructions. At the start of each iteration of the evaluation loop, the VM calculates the next opcode and its argument by taking the least significant and the most significant byte of the next instruction respectively and increments <code>next_instr</code>. The <code>_PyEval_EvalFrameDefault()</code> function is nearly 3000 lines long, but its essence can be captured by the following simplified version:</p>
<div><pre><span></span><span>PyObject</span><span>*</span>
<span>_PyEval_EvalFrameDefault</span><span>(</span><span>PyThreadState</span> <span>*</span><span>tstate</span><span>,</span> <span>PyFrameObject</span> <span>*</span><span>f</span><span>,</span> <span>int</span> <span>throwflag</span><span>)</span>
<span>{</span>
    <span>// ... declarations and initialization of local variables</span>
    <span>// ... macros definitions</span>
    <span>// ... call depth handling</span>
    <span>// ... code for tracing and profiling</span>

    <span>for</span> <span>(;;)</span> <span>{</span>
        <span>// ... check if the bytecode execution must be suspended,</span>
        <span>// e.g. other thread requested the GIL</span>

        <span>// NEXTOPARG() macro</span>
        <span>_Py_CODEUNIT</span> <span>word</span> <span>=</span> <span>*</span><span>next_instr</span><span>;</span> <span>// _Py_CODEUNIT is a typedef for uint16_t</span>
        <span>opcode</span> <span>=</span> <span>_Py_OPCODE</span><span>(</span><span>word</span><span>);</span>
        <span>oparg</span> <span>=</span> <span>_Py_OPARG</span><span>(</span><span>word</span><span>);</span>
        <span>next_instr</span><span>++</span><span>;</span>

        <span>switch</span> <span>(</span><span>opcode</span><span>)</span> <span>{</span>
            <span>case</span> <span>TARGET</span><span>(</span><span>NOP</span><span>)</span> <span>{</span>
                <span>FAST_DISPATCH</span><span>();</span> <span>// more on this later</span>
            <span>}</span>

            <span>case</span> <span>TARGET</span><span>(</span><span>LOAD_FAST</span><span>)</span> <span>{</span>
                <span>// ... code for loading local variable</span>
            <span>}</span>

            <span>// ... 117 more cases for every possible opcode</span>
        <span>}</span>

        <span>// ... error handling</span>
    <span>}</span>

    <span>// ... termination</span>
<span>}</span>
</pre></div>


<p>To get a more realistic picture, let's discuss some of the omitted pieces in more detail.</p>
<h4>reasons to suspend the loop</h4>
<p>From time to time, the currently running thread stops executing the bytecode to do something else or to do nothing. This can happen due to one of the four reasons:</p>
<ul>
<li>There are signals to handle. When you register a function as a signal handler using <a href="https://docs.python.org/3/library/signal.html#signal.signal"><code>signal.signal()</code></a>, CPython stores this function in the array of handlers. The function that will actually be called when a thread receives a signal is <code>signal_handler()</code> (it's passed to the <a href="https://www.man7.org/linux/man-pages/man2/sigaction.2.html"><code>sigaction()</code></a> library function on Unix-like systems). When called, <code>signal_handler()</code> sets a boolean variable telling that the function in the array of handlers corresponding to the received signal has to be called. Periodically, the main thread of the main interpreter calls the tripped handlers.</li>
<li>There are pending calls to call. Pending calls is a mechanism that allows to schedule a function to be executed from the main thread. This mechanism is exposed by the Python/C API via the <a href="https://docs.python.org/3/c-api/init.html#c.Py_AddPendingCall"><code>Py_AddPendingCall()</code></a> function.</li>
<li>The asynchronous exception is raised. The asynchronous exception is an exception set in one thread from another. This can be done using the <a href="https://docs.python.org/3/c-api/init.html#c.PyThreadState_SetAsyncExc"><code>PyThreadState_SetAsyncExc()</code></a> function provided by the Python/C API.</li>
<li>The currently running thread is requested to drop the GIL. When it sees such a request, it drops the GIL and waits until it acquires the GIL again.</li>
</ul>
<p>CPython has indicators for each of these events. The variable indicating that there are handlers to call is a member of <code>runtime-&gt;ceval</code>, which is a <code>_ceval_runtime_state</code> struct:</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://tenthousandmeters.com/blog/python-behind-the-scenes-4-how-python-bytecode-is-executed/">https://tenthousandmeters.com/blog/python-behind-the-scenes-4-how-python-bytecode-is-executed/</a></em></p>]]>
            </description>
            <link>https://tenthousandmeters.com/blog/python-behind-the-scenes-4-how-python-bytecode-is-executed/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24951649</guid>
            <pubDate>Sat, 31 Oct 2020 14:15:21 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why Dark Mode Matters]]>
            </title>
            <description>
<![CDATA[
Score 27 | Comments 57 (<a href="https://news.ycombinator.com/item?id=24951606">thread link</a>) | @desoga
<br/>
October 31, 2020 | https://thecodeangle.com/5-reasons-why-dark-mode-matters/ | <a href="https://web.archive.org/web/*/https://thecodeangle.com/5-reasons-why-dark-mode-matters/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-1527" itemtype="https://schema.org/CreativeWork" itemscope="itemscope">

	
	
<div>

	
	<!-- .entry-header -->

	
	<div itemprop="text">

		
		<blockquote><p><em>When it is dark enough, you can see the stars.</em><br>
<em>‚Äï&nbsp;</em></p></blockquote>
<h2>Table of Contents</h2>
<ul>
<li><em><strong><a href="#introduction">Introduction</a></strong></em></li>
<li><em><strong><a href="#reasons-for-dark-mode">Reasons for Dark Mode</a></strong></em>
<ul>
<li><em><strong><a href="#visual-attraction">Visual Attraction</a></strong></em></li>
<li><em><strong><a href="#user-experience">User Experience</a></strong></em></li>
<li><em><strong><a href="#eye-strain">Eye Strain &amp;&nbsp;</a></strong></em><em><strong>Blue Light Removal</strong></em></li>
<li><em><strong><a href="#reduction-of-photophobia">Reduction of Photophobia</a></strong></em></li>
<li><em><strong><a href="#battery-saver">Battery Saver</a></strong></em></li>
</ul>
</li>
<li><em><strong><a href="#factors-to-consider">Factors to Consider When Selecting Dark Mode</a></strong></em></li>
<li><em><strong><a href="#conclusion">Conclusion</a></strong></em></li>
</ul>

<h2>Introduction</h2>
<p>According to an <a href="https://en.wikipedia.org/wiki/Screen_time#Statistics" target="_blank" rel="noopener noreferrer">American survey,</a> children&nbsp;between the ages of 8-12 and 13-18 spend a daily average of 4 hours, 44 minutes and 7 hours, 22 minutes respectively, staring at screens.</p>
<p>The data for these numbers were collected in 2019. For adults, this figure is higher and according to an article on the <a href="https://www.washingtonpost.com/technology/2020/03/24/screen-time-iphone-coronavirus-quarantine-covid/" target="_blank" rel="noopener noreferrer">Washington Post </a>earlier this year, the amount of screen time increased considerably during the quarantine period due to <strong>COVID-19</strong></p>
<p>Today, mobile devices take a large percentage of the amount of time people spend staring at screens, this is why there is a need for applications to have a <strong>Dark Mode</strong> option for its users.</p>
<p><strong>Dark Mode</strong> according to <strong>Wikipedia,</strong><em> is a color scheme that uses light-coloured text, icons, and graphical user interface elements on a dark background and is often discussed in terms of computer user interface design and web design.</em></p>
<p>Now, let us look at the 5 reasons why <strong>Dark Mode</strong> really matters for the end-users of an application!<br>
<a name="reasons-for-dark-mode"></a></p>
<h2>Reasons For Dark Mode</h2>
<p><img src="https://thecodeangle.com/wp-content/uploads/2020/10/visual_apeal-300x200.jpg" alt="visual appeal" width="1055" height="703" srcset="https://thecodeangle.com/wp-content/uploads/2020/10/visual_apeal-300x200.jpg 300w, https://thecodeangle.com/wp-content/uploads/2020/10/visual_apeal-1024x683.jpg 1024w, https://thecodeangle.com/wp-content/uploads/2020/10/visual_apeal-768x512.jpg 768w, https://thecodeangle.com/wp-content/uploads/2020/10/visual_apeal-1536x1024.jpg 1536w, https://thecodeangle.com/wp-content/uploads/2020/10/visual_apeal.jpg 1920w" sizes="(max-width: 1055px) 100vw, 1055px"><br>
<a name="visual-attraction"></a></p>
<h3>1). Visual Attraction</h3>
<p><strong>Dark Mode</strong> when applied in the right manner always looks really appealing to the eye. It provides the opportunity to present a unique user interface to the end-users of an application.</p>
<p>Also, in terms of data presentation for graphical contents like dashboards that contain graphs and charts, <strong>Dark Mode</strong> brings out the elegance in the design as shown below.</p>
<p><img src="https://thecodeangle.com/wp-content/uploads/2020/10/darkmode-300x156.png" alt="Dark Mode" width="1106" height="575" srcset="https://thecodeangle.com/wp-content/uploads/2020/10/darkmode-300x156.png 300w, https://thecodeangle.com/wp-content/uploads/2020/10/darkmode-1024x531.png 1024w, https://thecodeangle.com/wp-content/uploads/2020/10/darkmode-768x398.png 768w" sizes="(max-width: 1106px) 100vw, 1106px"></p>
<p>Unlike the drab white look that most applications have, the above image shows how <strong>Dark Mode</strong> can bring a significantly deeper and more attractive visual perception to an application.<br>
<a name="user-experience"></a></p>
<h3>2). User Experience</h3>
<p>Providing the users of a product with the option of a <strong>Dark Mode</strong> is a good business decision, especially if the application requires users to spend lots of time on the application. A streaming site, for example, implementing a dark mode feature is a good business decision.</p>
<p>Streaming a video in <strong>light-mode</strong> under a dark environment or at night may not be a good experience for the eyes. Hence, applications that require people spending lots of screen time should provide an option for <strong>Dark Mode</strong> for a better user experience.</p>
<p>Above all, it is worthy to note that context is a key factor in making decisions on whether to implement the option of a <strong>Dark Mode</strong>.<br>
<a name="eye-strain"></a></p>
<h3>3). Eye Strain &amp; Blue Light Removal</h3>
<p>By default, <strong>Dark Mode</strong> helps to reduce overall screen brightness. Although no study has outrightly confirmed that <strong>Dark Mode</strong> reduces eye strain, it can, however, be effective in low-light conditions.</p>
<p>Also, <strong>Dark Mode</strong> helps to reduce exposure to <strong>Blue Light.</strong>&nbsp;Blue light is a high-frequency colour in the ‚Äúvisible light spectrum‚Äù that can be seen by the human eye.</p>
<p><img src="https://thecodeangle.com/wp-content/uploads/2020/10/blue-light-300x200.jpg" alt="blue-light" width="990" height="660" srcset="https://thecodeangle.com/wp-content/uploads/2020/10/blue-light-300x200.jpg 300w, https://thecodeangle.com/wp-content/uploads/2020/10/blue-light-1024x683.jpg 1024w, https://thecodeangle.com/wp-content/uploads/2020/10/blue-light-768x512.jpg 768w, https://thecodeangle.com/wp-content/uploads/2020/10/blue-light-1536x1024.jpg 1536w, https://thecodeangle.com/wp-content/uploads/2020/10/blue-light.jpg 1920w" sizes="(max-width: 990px) 100vw, 990px"></p>
<p><strong>Blue Light&nbsp;</strong>can be found almost everywhere, from smartphones to computers and other digital devices. Another source of Blue Light is the sun, so by stepping out of your house, you are exposed to a certain degree of blue light.</p>
<p>Too many exposures to Blue Light can lead to digital eye strain.</p>
<p>Since not everyone can see well with <strong>Dark Mode</strong>, some mobile devices provide the option for Blue Light filters. This can be found in the display settings area and can be easily adjusted to the level of blue light exposure you want.<br>
<a name="reduction-of-photophobia"></a></p>
<h3>4). Reduction of Photophobia</h3>
<p>Photophobia is a symptom of abnormal intolerance to the visual perception of light. The source of this light could be any form of light source including sunlight.</p>
<p>There are so many things that can cause photophobia, some of which includes:</p>
<ul>
<li>Excessive light entering the eyes</li>
<li>Eye infection</li>
<li>Medications</li>
<li>Meningitis</li>
<li>Lack of eye pigment (Albinism)</li>
<li>Wearing contact lenses for an extended period of time, or wearing it wrongly.</li>
<li>Post Eye Surgery</li>
</ul>
<p>Photophobia usually disappears once the underlying cause is treated. A good way to deal with photophobia is making use of the <strong>Dark Mode </strong>of a mobile device or an application. This helps to reduce the amount of bright light that goes directly into the eyes.</p>
<p>An extension you may consider installing on your desktop browser is &nbsp;<a href="https://nighteye.app/" target="_blank" rel="noopener noreferrer">Night Eye</a>. It is supported by almost all major web browsers. It helps you enable <strong>Dark Mode </strong>and other features across almost all the websites you view, to help cope with the light sensitivity.</p>
<p>However, if light sensitivity persists, you may want to see your doctor!<br>
<a name="battery-saver"></a></p>
<h3>5). Battery Saver</h3>
<p>Another positive impact of <strong>Dark Mode</strong> is the impact it has on the battery life of mobile devices. <strong>Dark Mode </strong>can significantly help reduce the battery drain on devices which use OLED(Organic Light-Emitting Diode) screens.</p>
<p><img src="https://thecodeangle.com/wp-content/uploads/2020/10/battery-saver-205x300.jpg" alt="battery-saver" width="952" height="1393" srcset="https://thecodeangle.com/wp-content/uploads/2020/10/battery-saver-205x300.jpg 205w, https://thecodeangle.com/wp-content/uploads/2020/10/battery-saver-699x1024.jpg 699w, https://thecodeangle.com/wp-content/uploads/2020/10/battery-saver-768x1125.jpg 768w" sizes="(max-width: 952px) 100vw, 952px"></p>
<p>Numerous studies have confirmed the fact that <strong>Dark Mode</strong> saves battery life. In an<a href="https://www.youtube.com/watch?v=UljafaxRcEE" target="_blank" rel="noopener noreferrer"> Android Dev Summit</a> in November of 2018, Google also confirmed that themes on android devices have a significant impact on the battery life of a mobile device.</p>
<p>If you are using an Android device, you should consider using <strong>Dark Mode</strong>, especially at night. Not only is it easy on the eyes, but it also helps save your battery life.<br>
<a name="factors-to-consider"></a></p>
<h3>Factors To Consider When Selecting Dark Mode</h3>
<p>In as much as <strong>Dark Mode</strong> seems trendy, it is necessary to consider some factors before deciding to implement it in an application. Some of these factors are discussed below:</p>
<p><strong>Readability and Visibility:&nbsp;</strong>Readability simply means the ease at which a reader can easily understand or perceive a written text. Applications that contain lots of text in their interface will have to be careful about how <strong>Dark Mode</strong> is implemented.</p>
<p>If the <strong>Dark Mode</strong> is not well implemented, this will lead to a poor user experience with the users struggling to read the texts. This defeats one of the purposes for which <strong>Dark Mode</strong> is created and could lead to eye strain.</p>
<p>Lots of research must go into how the backgrounds, text colour and font will work together.</p>
<p><strong>Test Before Implementation:&nbsp;&nbsp;</strong>Testing helps to discover the strength and weakness of the Color scheme used in an application. <strong>Dark Mode</strong> does not work well for all applications. A website that contains lots of elements(text, images, tables) may make it difficult for <strong>Dark Mode</strong> to be implemented.</p>
<p>Other factors to consider include:</p>
<ul>
<li>Determination of the target audience</li>
<li>Providing an option to switch between Light Mode and Dark Mode</li>
<li>The Environment</li>
<li>Accessibility</li>
</ul>

<h3>Conclusion</h3>
<p>The decision to always use <strong>Dark Mode </strong>should always be a relative one. For users of an application, knowing when to use light mode and <strong>Dark Mode </strong>at different times of the day is very essential for the eye.</p>

		
		
			</div><!-- .entry-content .clear -->
</div>

	
</article></div>]]>
            </description>
            <link>https://thecodeangle.com/5-reasons-why-dark-mode-matters/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24951606</guid>
            <pubDate>Sat, 31 Oct 2020 14:10:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[FreeCAD BIM development news]]>
            </title>
            <description>
<![CDATA[
Score 80 | Comments 21 (<a href="https://news.ycombinator.com/item?id=24951311">thread link</a>) | @buovjaga
<br/>
October 31, 2020 | https://yorik.uncreated.net/blog/2020-011-freecad-september | <a href="https://web.archive.org/web/*/https://yorik.uncreated.net/blog/2020-011-freecad-september">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="wrapper">

        
    

    <div id="main">

         
        

        <div>
            
            
            <p><img src="https://yorik.uncreated.net/images/2020/freecad-09-01.jpg" alt=""></p>
<p>Hi all,</p>
<p>After a very, very long delay, here comes finally another development report about the <a href="https://github.com/yorikvanhavre/BIM_Workbench">BIM tools</a> for <a href="https://www.freecadweb.org/">FreeCAD</a>. Awfully sorry about the black-out during these last months, lots of things <a href="https://www.rtbf.be/info/regions/liege/detail_circuit-de-spa-francorchamps-80-millions-d-investissements-et-le-retour-de-la-moto?id=10604892">happened</a> (all the 3D&amp;BIM done with FreeCAD and Blender) and  of course the pandemic didn't ease things either. Anyway, that doesn't mean nothing happened on the FreeCAD front, on the contrary, bugs still get addressed, things get fin-tuned, ideas get discussed, and FreeCAD gets everyday better.</p>
<p>This last month we also had a hectic turnover, because Autodesk changed the terms of the free version of  their <a href="https://www.autodesk.com/products/fusion-360/overview">Fusion360</a>. There is a full load of new limitations that restrain much the use for personal/hobby users. For example, the g-code you export from Fusion360 to CNC machines (that cut objects out of a block of material), is now making the machine running slower (and therefore raising the production costs), for no apparent reason other than nagging the users into buying a subscription. As a result, we saw a massive migration of users to FreeCAD, and it's really thrilling to see people discovering FreeCAD and learning it and liking it.</p>
<p>Thanks once more to everybody who contributes to my <a href="https://www.patreon.com/yorikvanhavre">Patreon</a> or <a href="https://liberapay.com/yorik/">Liberapay</a> campaigns, I'm really grateful you guys didn't just drop me away when I fail to write for 3 months.</p>
<p>Also, for who didn't notice, FreeCAD now has a proper <a href="https://liberapay.com/FreeCAD/">Liberapay teams account</a> where all money received is divided equally between the FreeCAD developers registered there (currently 7). This account has seen a huge raise of donations these last weeks (it receives around 1000 USD/month at the moment), thanks to the flow of new ex-Fusion360 users, and the impressive job Kunda1 is doing on <a href="https://twitter.com/FreeCADNews">the official FreeCAD twitter account</a> (subscribe to it if you are a twitter user, that account used to be just a mirror of the FreeCAD Facebook page, but is now very, very well maintained) and the campaigning of other people (special thanks to my <a href="https://www.twitter.com/beatnikqueen">girlfriend</a>, the most awesome person in the world).</p>
<p>So, no more loitering, to the news! Here is what we got this month:</p>
<h3>Customizable section color</h3>
<p><img src="https://yorik.uncreated.net/images/2020/freecad-09-02.jpg" alt=""></p>
<p><a href="https://wiki.freecadweb.org/Arch_SetMaterial">Materials</a> now have a new <strong>Section Color</strong> property, which allows to give a different color when the material is viewed and when it is cut through. So for example you can now have your walls appear white when viewed, but black when cut and seen on a TechDraw page.</p>
<p>This is a small improvement so far, but it laid the structure to have more advanced things, such as supporting hatch patterns. The main problem for this, is that, although the SVG format has an excellent support for hatch patterns (anything can become a hatch pattern, even bitmap images), the Qt implementation of the SVG format lacks support for it (it has its own <a href="https://doc.qt.io/Qt-5/qbrush.html#details">system</a> but it's not very practical to make that compatible with SVG). Therefore at the moment we have no clear idea of how to go further.</p>
<p><a href="https://wiki.freecadweb.org/TechDraw_Module">TechDraw</a>'s implementation of hatch patterns internally recreates OpenCasCade geometry, which works very well but might be heavy for large BIM models. In any case, that's a track I'm <a href="https://github.com/yorikvanhavre/FreeCAD/tree/td-makedrawgeomhatch">exploring</a> too.</p>
<h3>Default windows are now openable</h3>
<p><img src="https://yorik.uncreated.net/images/2020/freecad-09-03.jpg" alt=""></p>
<p>Another very small fix, but the default door and windows created with the <a href="https://wiki.freecadweb.org/Arch_Window">Door and windows tools</a> now have a hinge edge defined, so their <strong>Opening</strong> property now works out-of-the-box. It might not open in the direction you want, though, so you might still need to tweak this. But next items on my list are adding a couple of controls to easily switch opening directions.</p>
<h3>Default pattern size option</h3>
<p><img src="https://yorik.uncreated.net/images/2020/freecad-09-04.jpg" alt=""></p>
<p>The Draft patterns system is now working again (hatch patterns can be added to all closed Draft objects such as rectangles, polylines, circles, etc). I also added a preferences option under <em>Edit -&gt; Preferences -&gt; Draft -&gt; Visual settings</em> to set a default hatch pattern scale, which is useful when you always work with objects of a similar size range, for example building plans. I still have to experiment a bit (0.0025 seems like a very good default setting for BIM), but will add that to the BIM setup screen once I found a couple of good settings.</p>
<h3>Section plane label</h3>
<p><img src="https://yorik.uncreated.net/images/2020/freecad-09-05.jpg" alt=""></p>
<p><a href="https://wiki.freecadweb.org/Arch_SectionPlane">Section planes</a> now have a <strong>Show Label</strong> property, which, when turned on, show the section plane label on the plane in the 3D view. This is useful to easily identify these section planes when there are many in your document. The text size currently depends on the arrow size, but I'll make all this better customizable later on.</p>
<p>We have further plans too for the section planes, such as be able to double-click or activate them somehow, and find yourself in a separate 2D view with all needed geometry cut or turned off, where you can still work on the model in a 2D environment. This would be a bit like an intermediary step between the full 3D model and a TechDraw view. You can see a first draft of that coded by Carlo Pavan on the experimental tools palette in the BIM workbench.</p>
<h3>TechDraw tools in BIM workbench</h3>
<p><img src="https://yorik.uncreated.net/images/2020/freecad-09-06.jpg" alt=""></p>
<p>Among the annotation tools on the BIM workbench, you'll now find two TechDraw tools, <strong>Create page</strong> and <strong>Create view</strong>. The first one is the same of the <a href="https://wiki.freecadweb.org/TechDraw_PageTemplate">Create page from template</a> TechDraw tool, except that it remembers the last template you used and gets you right there when you use the tool again, so it gives a little bit faster workflow. The second tool is currently the same as the <a href="https://wiki.freecadweb.org/TechDraw_ArchView">TechDraw ArchView tool</a> but I plan to make it a bit more flexible in the future so it would become a mix of TechDraw's ArchView and DraftView tools, depending on the selected objects.</p>
<h3>TSV export</h3>
<p>The <a href="https://wiki.freecadweb.org/Arch_Schedule">Schedule</a> tool has been extended to now allow to export results to the .tsv (Tab-Separated Values) format, which is basically the same as the .csv (Comma-Separated Values) format, but using tab characters to separate columns, instead of commas. The big problem of csv, of course, is if there are commas in the columns texts. Usually spreadsheet apps are pretty tolerant with .csv files, they will usually ask you what character to consider as column separator on import, but others (for example GitHub) doesn't display them correctly if they don't use a comma as separator. So from now on there is a correct way to please everybody <i></i></p>
<h3>Blender exporter upgrade</h3>
<p><img src="https://yorik.uncreated.net/images/2020/freecad-09-07.jpg" alt=""></p>
<p>The <a href="https://gist.github.com/yorikvanhavre/029f6fcce9f4d0e62fb6163804b7f80d">FreeCAD exporter for Blender</a> has seen several small fixes, it now automatically adds the .FCStd extension to the generated file if you haven't added it yourself, it now correctly handles object rotation and scaling, and it applies modifiers before exporting. It now also supports faceless objects (wireframe objects).</p>
<p>This coupled with the <a href="https://blenderbim.org/">BlenderBIM</a> improvements, it now becomes increasingly easy to work on BIM models in Blender, or parts of BIM models, and when needed, integrate everything seamlessly in FreeCAD. There are many more joint FreeCAD/Blender developments going on, such as the new <a href="https://forum.freecadweb.org/viewtopic.php?style=4&amp;t=51069&amp;p=438881">Sverchok nodes</a> that use FreeCAD internally, literally creating a kind of new interface for FreeCAD withing Blender.</p>
<h3>Detect and suggest development version</h3>
<p>The BIM workbench will now detect your FreeCAD version on the setup screen, and suggest you to install a development version if you are not using one. This will help people to be aware of the existence of development versions, and become more used to them and how to install and mange them.</p>
<h3>Grid extension setting in Working Plane panel</h3>
<p>The overall size of the grid is now settable directly from the <a href="https://wiki.freecadweb.org/Draft_SelectPlane">Working Plane</a> task panel.</p>
<h3>Multiple custom folders on start page</h3>
<p><img src="https://yorik.uncreated.net/images/2020/freecad-09-08.jpg" alt=""></p>
<p>The <a href="https://wiki.freecadweb.org/Start_Workbench">start page</a> can now show multiple custom folders. To achieve that, go to the start page preferences under menu <em>Edit -&gt; Preferences -&gt; Start</em> and instead of choosing one custom folder, type manually several folder paths, separated by ;;</p>
<p>For example: <code>/home/yorik;;/home/yorik/Examples;;/home/yorik/FreeCAD/Examples</code></p>
<h3>Image Plane scaling</h3>
<p><img src="https://yorik.uncreated.net/images/2020/freecad-09-09.jpg" alt=""></p>
<p>The <a href="https://wiki.freecadweb.org/Draft_Scale">Draft Scale</a> tool now support image planes created with the <a href="https://wiki.freecadweb.org/Image_Module">Image workbench</a>. So it is now easy to import reference images such as scanned floor plans, position them on a common reference point, and scale them to the desired size.</p>
<h3>Unit and Show Unit in Draft dimension preferences</h3>
<p>You can now set default value for these two settings under <em>Edit -&gt; Preferences -&gt; Draft -&gt; Dimensions and Texts</em>, that will affect all newly created dimensions.</p>
<h3>Manual upgrade</h3>
<p>And last but not least, I started upgrading the <a href="https://wiki.freecadweb.org/Manual">manual</a> to FreeCAD 0.19, and this time I intend well to produce a printed book with it. To be continued!</p>
<p>That's it for this month I guess, I promise to do everything I can to resume posting once per month!</p>
<p>Cheers</p>
<p>Yorik</p>
            
        </div>

                
            </div>


        
    
    </div></div>]]>
            </description>
            <link>https://yorik.uncreated.net/blog/2020-011-freecad-september</link>
            <guid isPermaLink="false">hacker-news-small-sites-24951311</guid>
            <pubDate>Sat, 31 Oct 2020 13:30:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Spectre Is Haunting Unicode]]>
            </title>
            <description>
<![CDATA[
Score 262 | Comments 113 (<a href="https://news.ycombinator.com/item?id=24951130">thread link</a>) | @polm23
<br/>
October 31, 2020 | https://www.dampfkraft.com/ghost-characters.html | <a href="https://web.archive.org/web/*/https://www.dampfkraft.com/ghost-characters.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>In 1978 Japan's <a href="https://ja.wikipedia.org/wiki/%E7%B5%8C%E6%B8%88%E7%94%A3%E6%A5%AD%E7%9C%81">Ministry of Economy, Trade and
Industry</a>
established the encoding that would later be known as JIS X 0208, which still
serves as an important reference for all Japanese encodings. However, after the
JIS standard was released people noticed something strange - several of the
added characters had no obvious sources, and nobody could tell what they meant
or how they should be pronounced. Nobody was sure where they came from. These
are what came to be known as the ghost characters
(<a href="https://ja.wikipedia.org/wiki/%E5%B9%BD%E9%9C%8A%E6%96%87%E5%AD%97">ÂπΩÈúäÊñáÂ≠ó</a>).</p>
<figure><a href="https://www.dampfkraft.com/by-id/a824aa10/ghostcanvas.jpg"><img src="https://www.dampfkraft.com/by-id/a824aa10/img/ghostcanvas.jpg.l.jpg"></a><figcaption>Be careful what you write. <a href="http://dl.ndl.go.jp/info:ndljp/pid/1312837">via the NDL</a>
</figcaption></figure>
<p>For a long time the ghost characters remained an unexplained and mostly
forgotten curiosity, but in 1997 an investigation was launched to discover
where they had come from.  While all characters in the JIS standard were
supposed to have a record of their sources, even when it existed it
wasn't very specific, typically just listing the document it was sourced from.</p>
<p>You'd think that listing the source would make tracking down the origins of the
characters easy, but it's important to clarify what counts as a "source" - one
of the more common sources for the ghost characters was the "Overview of
National Administrative Districts" (ÂõΩÂúüË°åÊîøÂå∫ÁîªÁ∑èË¶ß), a comprehensive list of
place names in Japan. You might, as I initially did, imagine this to be a kind
of atlas, an oversize book with at most a few hundred pages. It turns out the
<a href="http://kokudo.or.jp/books/index.html">latest edition</a> is a seven volume set
with each volume having roughly nine hundred pages. Imagine tracking down a
single character without a page reference.</p>
<p>Despite the difficulty, the investigation into the ghost characters was
successful in discovering their origins - mostly. By interviewing the
catalogers involved in the creation of the standard, the investigators
established that some characters were inadvertently invented as mistakes in the
cataloging process. For example, Â¶õ was an error introduced while trying to
record "Â±± over Â•≥". "Â±± over Â•≥" occurs in the name of a particular place and
was thus suitable for inclusion in the JIS standard, but because they couldn't
print it as one character yet, Â±± and Â•≥ were printed separately, cut out, and
pasted onto a sheet of paper, and then copied. When reading the copy, the line
where the two little pieces of paper met looked like a stroke and was added to
the character by mistake. The original character
(<a href="https://ja.wiktionary.org/wiki/%F0%A1%9A%B4">°ö¥</a>) was not added to JIS or
Unicode until much later and doesn't display on most sites for me.</p>
<figure><a href="https://www.dampfkraft.com/by-id/a824aa10/yuureimoji.png"><img src="https://www.dampfkraft.com/by-id/a824aa10/img/yuureimoji.png.l.png"></a><figcaption>The core ghost characters: Â¶õÊåßÊöÉÊ§¶ÊßûËüêË¢ÆÈñ†Èß≤Â¢∏Â£•ÂΩÅ
</figcaption></figure>
<p>In the end only one character had neither a clear source nor any historical
precedent: ÂΩÅ. The most likely explanation is that it was created as a
misreading of the ÂΩä character, but no specific incident was uncovered.</p>
<p>Following the general adoption of the JIS standards these characters all made
their way into Unicode, which has its own <a href="https://ja.wikipedia.org/wiki/CJK%E7%B5%B1%E5%90%88%E6%BC%A2%E5%AD%97#%E5%B9%BD%E9%9C%8A%E6%BC%A2%E5%AD%97">separate set of ghost
characters</a>
introduced during CJK unification.</p>
<p>To sum up - in 1978 a series of small mistakes created some characters out of
nothing. The errors went undiscovered just long enough to be set in stone, and
now these ghosts are, at least in potential, a part of every computer on the
planet, lurking in the dark corners of character tables.</p>
<p>At this rate they'll presumably be with humanity forever. Œ®</p>
<p>References / related links:</p>
<ul>
<li><a href="https://www.wdic.org/w/WDIC/%E5%B9%BD%E9%9C%8A%E6%96%87%E5%AD%97">ÂπΩÈúäÊñáÂ≠ó ‚Äê ÈÄö‰ø°Áî®Ë™û„ÅÆÂü∫Á§éÁü•Ë≠ò</a> - the most thorough online source, with citations from the 1997 investigation.</li>
<li><a href="http://www.asahi.com/special/kotoba/archive2015/moji/2011082400019.html">Â§ßÊ≠£ÂçÅ‰∫åÂπ¥„ÅÆÂπΩÈúäÊñáÂ≠ó - „Åì„Å®„Å∞„Éû„Ç¨„Ç∏„É≥ÔºöÊúùÊó•Êñ∞ËÅû„Éá„Ç∏„Çø„É´</a> - an example of ÂΩÅ mistakenly used in a digitized Taisho newspaper due to a faded printing of ÂΩä.</li>
<li><a href="http://dic.nicovideo.jp/a/%E5%B9%BD%E9%9C%8A%E6%96%87%E5%AD%97">Nico Nico Douga's Wiki</a> treats each of them as the name of a youkai.</li>
<li><a href="http://www.xubing.com/cn/work/details/206?year=1991&amp;type=year#206">Â§©‰π¶</a> or <a href="https://en.wikipedia.org/wiki/A_Book_from_the_Sky">A Book from the Sky</a>, a hand-printed book by Xu Bing using only made-up Chinese characters.</li>
</ul>
</div></div>]]>
            </description>
            <link>https://www.dampfkraft.com/ghost-characters.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24951130</guid>
            <pubDate>Sat, 31 Oct 2020 13:07:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[LIL: Little Interpreted Language]]>
            </title>
            <description>
<![CDATA[
Score 54 | Comments 5 (<a href="https://news.ycombinator.com/item?id=24949515">thread link</a>) | @marttt
<br/>
October 30, 2020 | http://runtimeterror.com/tech/lil/ | <a href="https://web.archive.org/web/*/http://runtimeterror.com/tech/lil/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">



<p><b>LIL</b> (stands for <b>L</b>ittle <b>I</b>nterpreted <b>L</b>anguage)
is a small highly dynamic scripting language inspired by Tcl and
unix shells. LIL has two implementations, one written in <b>C</b>,
which consists of a pair of <tt>.c</tt> and <tt>.h</tt> files
and one in <b><a href="http://freepascal.org/">Free Pascal</a></b>,
which consists of a single <tt>pas</tt> file (a unit). Also a
<a href="http://lazarus-ide.org/">Lazarus</a> package for the
latter is provided.</p>

<h2>Contents</h2>

<menu>
  <li><a href="#downloads">Downloads</a>
  <menu>
    <li><a href="#latestversion">Latest version</a>
    </li><li><a href="#olderversions">Older versions</a>
    </li><li><a href="#winlil">WinLIL</a>
    </li><li><a href="#lilgui">LILGUI</a>
  </li></menu>
  </li><li><a href="#stability">API stability and compatibility</a>
  </li><li><a href="#documentation">Documentation</a>
  </li><li><a href="#status">Status</a>
  </li><li><a href="#license">License</a>
</li></menu>

<h2><a name="downloads"></a>Downloads</h2>

<p>LIL is currently available as source code snapshots of both
the C and the Free Pascal version combined in a single ZIP file.
These snapshots are versioned using their release date. Note that
the interpreter's reflect version command will report <i>0.1</i>
regardless of date versioning. Both of these will change at some
point in the future to provide proper versioned releases.</p>

<h3><a name="latestversion"></a>Latest version</h3>

<p>The latest version of LIL is <a href="http://runtimeterror.com/tech/lil/lil20190821.zip">lil20190821.zip</a>
(159KB). This is an extract from my private Fossil repository
(the files are mostly the same as the older archives, but this
also includes a full changelog from the repository going back
to 2010 and the LIL logo as an XCF image which can be opened with
GIMP).</p>

<p>Please note that <b>20190821</b> contains slightly altered
behavior for line breaking during list parsing that <i>could</i>
affect some scripts, especially with lists that contain code inside
square brackets, however the previous behavior was completely
broken (e.g. having multiple commands inside brackets in a list
would merge all commands into a single one and if a semicolon
was used for the multiple commands, the entire command wouldn't
be parsed properly). Because of that i expect any reliance on
the previous behavior to be accidental (and in practice i do not
really expect any such script to even exist). Also in the same
version a Bash script is introduced to check the differences between
different executables by running the same scripts under both and
comparing the results, which show that FPLIL contains a few incompatibilities
with C LIL. At this moment FPLIL doesn't implement the changes
mentioned so far - all these incompatibilities and changes will
be fixed in a later release.</p>

<h3><a name="olderversions"></a>Older versions</h3>

<p>Some older versions are also available in case you need them.
LIL should be mostly backwards compatible (see below), but right
now there is no promise for strict API or ABI compatibility.</p>

<ul>
  <li><a href="http://runtimeterror.com/tech/lil/lil20190819.zip">lil20190819.zip</a> (155KB)<a href="http://runtimeterror.com/tech/lil/lil20190818.zip"></a>
  </li><li><a href="http://runtimeterror.com/tech/lil/lil20190818.zip">lil20190818.zip</a> (154KB)
  </li><li><a href="http://runtimeterror.com/tech/lil/lil20190114.zip">lil20190114.zip</a> (91KB)
  </li><li><a href="http://runtimeterror.com/tech/lil/lil20161129.zip">lil20161129.zip</a> (88KB)
  </li><li><a href="http://runtimeterror.com/tech/lil/lil20160812.zip">lil20160812.zip</a> (88KB)
  </li><li><a href="http://runtimeterror.com/tech/lil/lil20160603.zip">lil20160603.zip</a> (88KB)
</li></ul>

<h3><a name="winlil"></a>WinLIL</h3>

<p>If you are using Windows you can also download <b>WinLIL</b>,
a small Windows-based environment with editor, console and extra
graphics functions that can be used to experiment with LIL. It
is self-contained in a single executable, including the LIL documentation.</p>

<p>The latest version is <a href="http://runtimeterror.com/tech/lil/winlil14.zip">WinLIL 1.4</a>
(204KB) based on <i>C LIL 20190821</i>. <a href="http://runtimeterror.com/tech/lil/winlil.png">Here
is a screenshot</a> of it in action. Also a small doodle program
can be <a href="http://runtimeterror.com/tech/lil/doodle.lil">downloaded here</a> and a <a href="http://runtimeterror.com/tech/lil/doodle.gif">screenshot
seen here</a>. <a href="http://runtimeterror.com/tech/lil/winlil20190821231511.zip">This archive</a>
(45KB) contains the source code, but note that it uses the original
Borland C++ Builder and to compile with a newer version (such
as the free Community Edition) you'll need to recreate the project
file and make a few modifications to the code.</p>

<p>Older versions of WinLIL can be found in these files: <a href="http://runtimeterror.com/tech/lil/winlil13.zip">winlil13.zip</a>
(1.3 binary), <a href="http://runtimeterror.com/tech/lil/winlil20190524200539.zip">winlil20190524200539.zip</a>
(1.3 source), <a href="http://runtimeterror.com/tech/lil/winlil20170425.zip">winlil20170424.zip</a>
(binary), <a href="http://runtimeterror.com/tech/lil/winlilsrc20161220.7z">winlilsrc20161220.7z</a>
(source).</p>

<h3><a name="lilgui"></a>LILGUI</h3>

<p><b>LILGUI</b> is an experimental API specification for GUI
applications that provide scripting functionality through LIL
to expose a simple GUI API. It is mainly intended for creating
embeddable GUIs (e.g. a panel in a sidebar) although it can also
be used for popup windows and dialogs. Currently the only implementation
for LILGUI is <b>LazLILGUI</b>, which is a component for Lazarus
that uses LCL to provide the actual GUI functionality.</p>

<p>The latest version of LILGUI files (which include the API spec,
LazLILGUI and a couple of examples) can be <a href="http://runtimeterror.com/tech/lil/lilgui20190708215135.zip">downloaded
here</a> (85KB). A 64bit windows binary for <b>LazLILGUI Notepad</b>,
a text editor that provides a sidebar to try out LILGUI code,
can be <a href="http://runtimeterror.com/tech/lil/llgnotepad20190708.zip">downloaded here</a> (1.3MB).
Also you can see the screenshots of program in action under <a href="http://runtimeterror.com/tech/lil/llgnotepadwin.png">Windows</a>, <a href="http://runtimeterror.com/tech/lil/llgnotepadlin.png">Linux</a>
and <a href="http://runtimeterror.com/tech/lil/llgnotepadosx.png">Mac OS X</a> and also the <a href="http://runtimeterror.com/tech/lil/llgcce.png">Custom Control Example</a> under Windows.</p>

<h2><a name="stability"></a>API stability and compatibility</h2>

<p>Generally speaking, both the C and Free Pascal implementation
APIs are stable <i>for the most part</i>. The <b>C API</b> was
broken only once in middle 2010 when <code>lil_command_t</code>
was renamed to <code>lil_func_t</code> and the <b>C ABI</b> for
the Windows DLL is also backwards compatible since late 2010.
The <b>Free Pascal</b> implementation has a less stable API but
as Free Pascal itself does not support ABI stability, this is
less of a concern.</p>

<p>In the foreseeable future the C API should be stable, but i'd
recommend <i>against</i> building a system-wide shared version
of the library before a proper versioned release is made. Once
a versioned release is made, both the API and ABI will remain
stable for as long as it is technically possible.</p>

<p>Script code should be backwards compatible even as new commands
are introduced since scripts and host applications will redefine
any conflicting functions anyway. The only time script code was
broken was in 2012 when the multiline comments were introduced
so any script that used a comment line like <code>#####</code>
was broken. This was addressed in a fix in 2014 that added a special
check for such cases so that multiline comments can only start
and end with two <code>#</code>s but not three or more (while
this could have broken any script that used three or more <code>#</code>s
to start and end multiline comments, the chances for such a script
are very slim).</p>

<p>Like with the C API, the script backwards compatibility currently
is mostly stable, but minor changes (like the multiline comment
changes mentioned above) might be made until a versioned release
is made or fixes to the script behavior to be closer to what is
described in the documentation or simply fix broken behavior.
At that point no changes will be made that may affect backwards
compatibility.</p>

<p>LILGUI and LazLILGUI are more experimental and may see backwards
incompatible changes in the future.</p>

<h2><a name="documentation"></a>Documentation</h2>

<p>Currently the only documentation is the (lengthy) <tt>readme.txt</tt>
file that <a href="http://runtimeterror.com/tech/lil/readme.txt">you can read here</a> or as part
of the archive containing the source code. At some point i'll
write better formatted documentation. Free Pascal has its own
API documentation <a href="http://runtimeterror.com/tech/lil/pasreadme.txt">readable here</a> and
also as a part of the archive containing the source code.</p>

<p>The LILGUI API can be <a href="http://runtimeterror.com/tech/lil/api.txt">found here</a> and
the documentation for LazLILGUI can be <a href="http://runtimeterror.com/tech/lil/llgreadme.txt">found
here</a>. Both are also part of the LILGUI archive.</p>

<p>Also <a href="http://www.slideshare.net/badsectoracula/lil-presentation">an
old LIL presentation can be found on SlideShare</a>. Please note
that the URLs in the presentation are not valid anymore.</p>

<h2><a name="status"></a>Status</h2>

<p>LIL is practically <i>feature-complete</i> and i do very little
development of it. I do not plan on making it a big and bloated
library that tries to provide everything - if anything, in the
future i might add some conditionals to remove bits of the library
for users who do not need, e.g, the string or list functions.</p>

<p>Further work is mostly "around" LIL and not on the
language itself: improving the documentation, writing a test suite
(currently there are several examples which i run after making
changes and almost half of them come from bug fixes, but i'd like
somethnig more automated), fixing some issues with the Free Pascal
implementation, adding more functions on the C API to access LIL's
state, etc.</p>

<h2><a name="license"></a>License</h2>

<p>Both the C and Free Pascal implementations as well as WinLIL
are licensed under the zlib license below:</p>

<blockquote>
  <pre>LIL - Little Interpreted Language
Copyright (C) 2010-2019 Kostas Michalopoulos

This software is provided 'as-is', without any express or implied
warranty.  In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; you must not
   claim that you wrote the original software. If you use this software
   in a product, an acknowledgment in the product documentation would be
   appreciated but is not required.
2. Altered source versions must be plainly marked as such, and must not be
   misrepresented as being the original software.
3. This notice may not be removed or altered from any source distribution.</pre>
</blockquote>



</div>]]>
            </description>
            <link>http://runtimeterror.com/tech/lil/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24949515</guid>
            <pubDate>Sat, 31 Oct 2020 06:20:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Everything you need to know about windsocks]]>
            </title>
            <description>
<![CDATA[
Score 51 | Comments 14 (<a href="https://news.ycombinator.com/item?id=24949514">thread link</a>) | @oftenwrong
<br/>
October 30, 2020 | https://www.hollandaviation.nl/en/windsock-everything-you-need-to-know-about-windsocks/ | <a href="https://web.archive.org/web/*/https://www.hollandaviation.nl/en/windsock-everything-you-need-to-know-about-windsocks/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://www.hollandaviation.nl/en/windsock-everything-you-need-to-know-about-windsocks/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24949514</guid>
            <pubDate>Sat, 31 Oct 2020 06:19:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Specifications for the Interconnection of a Host and an IMP (1976) [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 17 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24949100">thread link</a>) | @tjalfi
<br/>
October 30, 2020 | https://walden-family.com/impcode/BBN1822_Jan1976.pdf | <a href="https://web.archive.org/web/*/https://walden-family.com/impcode/BBN1822_Jan1976.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>√®l√®[mxEB√∞c∆í√üg√û≈°‚Äû{
LÔøΩ√é‚Äö√´:√∏5T√ú√¢vu~e ¬≠√èww√£¬´Sr≈°√≠√≤;B¬•√ó6√æ√∫S√à√ù.$¬∏}‚Ä†¬°√ã1¬≠
‚Ä∫2=√â¬ø√ñ¬≥;qKÀú√ö%‚Ä†`
√¶`√Ä`,¬®:≈ΩkW‚Äò√° Àú0a√Çh¬¢I‚Ä∞‚Ä†√π'Ck¬±101\√¢√´√†d!√Ü√Ä√á√å√Ä¬¨ √¨√†√ãÀú√Å¬∫@¬¨!
‚Ñ¢:√çÀú√É¬∫‚Ä¶: √é√ÉX0J‚ÄòG√Ö2‚Äì¬∞ÔøΩ√π¬Ø∆í√Ä¬°√∏20¬∞‚Äöb`b2√∂\‚Äò
endstream
endobj
1237 0 obj
677 
endobj
1023 0 obj
&lt;&lt; 
/Contents 1232 0 R 
/Parent 1019 0 R 
/Resources &lt;&lt; /XObject &lt;&lt; /ImA 1235 0 R &gt;&gt; /ProcSet [ /PDF /ImageB ] &gt;&gt; 
/MediaBox [ 0 0 612 792 ] 
/Type /Page 
/CropBox [ 0 0 612 792 ] 
/Rotate 0 
&gt;&gt; 
endobj
1024 0 obj
&lt;&lt; 
/Count -207 
/Last 1025 0 R 
/First 1026 0 R 
&gt;&gt; 
endobj
1025 0 obj
&lt;&lt; 
/Prev 1231 0 R 
/Parent 1024 0 R 
/Dest [ 1014 0 R /Fit ] 
/Title (H-28)
&gt;&gt; 
endobj
1026 0 obj
&lt;&lt; 
/Next 1027 0 R 
/Parent 1024 0 R 
/Dest [ 1023 0 R /Fit ] 
/Title (0001)
&gt;&gt; 
endobj
1027 0 obj
&lt;&lt; 
/Next 1028 0 R 
/Prev 1026 0 R 
/Parent 1024 0 R 
/Dest [ 1 0 R /Fit ] 
/Title (0002)
&gt;&gt; 
endobj
1028 0 obj
&lt;&lt; 
/Next 1029 0 R 
/Prev 1027 0 R 
/Parent 1024 0 R 
/Dest [ 6 0 R /Fit ] 
/Title (0003)
&gt;&gt; 
endobj
1029 0 obj
&lt;&lt; 
/Next 1030 0 R 
/Prev 1028 0 R 
/Parent 1024 0 R 
/Dest [ 11 0 R /Fit ] 
/Title (001)
&gt;&gt; 
endobj
1030 0 obj
&lt;&lt; 
/Next 1031 0 R 
/Prev 1029 0 R 
/Parent 1024 0 R 
/Dest [ 16 0 R /Fit ] 
/Title (002)
&gt;&gt; 
endobj
1031 0 obj
&lt;&lt; 
/Next 1032 0 R 
/Prev 1030 0 R 
/Parent 1024 0 R 
/Dest [ 21 0 R /Fit ] 
/Title (003)
&gt;&gt; 
endobj
1032 0 obj
&lt;&lt; 
/Next 1033 0 R 
/Prev 1031 0 R 
/Parent 1024 0 R 
/Dest [ 26 0 R /Fit ] 
/Title (004)
&gt;&gt; 
endobj
1033 0 obj
&lt;&lt; 
/Next 1034 0 R 
/Prev 1032 0 R 
/Parent 1024 0 R 
/Dest [ 31 0 R /Fit ] 
/Title (005)
&gt;&gt; 
endobj
1034 0 obj
&lt;&lt; 
/Next 1035 0 R 
/Prev 1033 0 R 
/Parent 1024 0 R 
/Dest [ 36 0 R /Fit ] 
/Title (006)
&gt;&gt; 
endobj
1035 0 obj
&lt;&lt; 
/Next 1036 0 R 
/Prev 1034 0 R 
/Parent 1024 0 R 
/Dest [ 41 0 R /Fit ] 
/Title (007)
&gt;&gt; 
endobj
1036 0 obj
&lt;&lt; 
/Next 1037 0 R 
/Prev 1035 0 R 
/Parent 1024 0 R 
/Dest [ 46 0 R /Fit ] 
/Title (008)
&gt;&gt; 
endobj
1037 0 obj
&lt;&lt; 
/Next 1038 0 R 
/Prev 1036 0 R 
/Parent 1024 0 R 
/Dest [ 49 0 R /Fit ] 
/Title (1-01)
&gt;&gt; 
endobj
1038 0 obj
&lt;&lt; 
/Next 1039 0 R 
/Prev 1037 0 R 
/Parent 1024 0 R 
/Dest [ 54 0 R /Fit ] 
/Title (1-02)
&gt;&gt; 
endobj
1039 0 obj
&lt;&lt; 
/Next 1040 0 R 
/Prev 1038 0 R 
/Parent 1024 0 R 
/Dest [ 59 0 R /Fit ] 
/Title (1-03)
&gt;&gt; 
endobj
1040 0 obj
&lt;&lt; 
/Next 1041 0 R 
/Prev 1039 0 R 
/Parent 1024 0 R 
/Dest [ 64 0 R /Fit ] 
/Title (1-04)
&gt;&gt; 
endobj
1041 0 obj
&lt;&lt; 
/Next 1042 0 R 
/Prev 1040 0 R 
/Parent 1024 0 R 
/Dest [ 69 0 R /Fit ] 
/Title (1-05)
&gt;&gt; 
endobj
1042 0 obj
&lt;&lt; 
/Next 1043 0 R 
/Prev 1041 0 R 
/Parent 1024 0 R 
/Dest [ 74 0 R /Fit ] 
/Title (1-06)
&gt;&gt; 
endobj
1043 0 obj
&lt;&lt; 
/Next 1044 0 R 
/Prev 1042 0 R 
/Parent 1024 0 R 
/Dest [ 79 0 R /Fit ] 
/Title (1-07)
&gt;&gt; 
endobj
1044 0 obj
&lt;&lt; 
/Next 1045 0 R 
/Prev 1043 0 R 
/Parent 1024 0 R 
/Dest [ 84 0 R /Fit ] 
/Title (1-08)
&gt;&gt; 
endobj
1045 0 obj
&lt;&lt; 
/Next 1046 0 R 
/Prev 1044 0 R 
/Parent 1024 0 R 
/Dest [ 87 0 R /Fit ] 
/Title (2-01)
&gt;&gt; 
endobj
1046 0 obj
&lt;&lt; 
/Next 1047 0 R 
/Prev 1045 0 R 
/Parent 1024 0 R 
/Dest [ 92 0 R /Fit ] 
/Title (2-02)
&gt;&gt; 
endobj
1047 0 obj
&lt;&lt; 
/Next 1048 0 R 
/Prev 1046 0 R 
/Parent 1024 0 R 
/Dest [ 97 0 R /Fit ] 
/Title (2-03)
&gt;&gt; 
endobj
1048 0 obj
&lt;&lt; 
/Next 1049 0 R 
/Prev 1047 0 R 
/Parent 1024 0 R 
/Dest [ 102 0 R /Fit ] 
/Title (2-04)
&gt;&gt; 
endobj
1049 0 obj
&lt;&lt; 
/Next 1050 0 R 
/Prev 1048 0 R 
/Parent 1024 0 R 
/Dest [ 107 0 R /Fit ] 
/Title (2-05)
&gt;&gt; 
endobj
1050 0 obj
&lt;&lt; 
/Next 1051 0 R 
/Prev 1049 0 R 
/Parent 1024 0 R 
/Dest [ 112 0 R /Fit ] 
/Title (2-06)
&gt;&gt; 
endobj
1051 0 obj
&lt;&lt; 
/Next 1052 0 R 
/Prev 1050 0 R 
/Parent 1024 0 R 
/Dest [ 117 0 R /Fit ] 
/Title (2-07)
&gt;&gt; 
endobj
1052 0 obj
&lt;&lt; 
/Next 1053 0 R 
/Prev 1051 0 R 
/Parent 1024 0 R 
/Dest [ 122 0 R /Fit ] 
/Title (2-08)
&gt;&gt; 
endobj
1053 0 obj
&lt;&lt; 
/Next 1054 0 R 
/Prev 1052 0 R 
/Parent 1024 0 R 
/Dest [ 127 0 R /Fit ] 
/Title (2-09)
&gt;&gt; 
endobj
1054 0 obj
&lt;&lt; 
/Next 1055 0 R 
/Prev 1053 0 R 
/Parent 1024 0 R 
/Dest [ 132 0 R /Fit ] 
/Title (2-10)
&gt;&gt; 
endobj
1055 0 obj
&lt;&lt; 
/Next 1056 0 R 
/Prev 1054 0 R 
/Parent 1024 0 R 
/Dest [ 137 0 R /Fit ] 
/Title (2-11)
&gt;&gt; 
endobj
1056 0 obj
&lt;&lt; 
/Next 1057 0 R 
/Prev 1055 0 R 
/Parent 1024 0 R 
/Dest [ 142 0 R /Fit ] 
/Title (2-12)
&gt;&gt; 
endobj
1057 0 obj
&lt;&lt; 
/Next 1058 0 R 
/Prev 1056 0 R 
/Parent 1024 0 R 
/Dest [ 147 0 R /Fit ] 
/Title (2-13)
&gt;&gt; 
endobj
1058 0 obj
&lt;&lt; 
/Next 1059 0 R 
/Prev 1057 0 R 
/Parent 1024 0 R 
/Dest [ 152 0 R /Fit ] 
/Title (2-14)
&gt;&gt; 
endobj
1059 0 obj
&lt;&lt; 
/Next 1060 0 R 
/Prev 1058 0 R 
/Parent 1024 0 R 
/Dest [ 157 0 R /Fit ] 
/Title (3-01)
&gt;&gt; 
endobj
1060 0 obj
&lt;&lt; 
/Next 1061 0 R 
/Prev 1059 0 R 
/Parent 1024 0 R 
/Dest [ 162 0 R /Fit ] 
/Title (3-02)
&gt;&gt; 
endobj
1061 0 obj
&lt;&lt; 
/Next 1062 0 R 
/Prev 1060 0 R 
/Parent 1024 0 R 
/Dest [ 167 0 R /Fit ] 
/Title (3-03)
&gt;&gt; 
endobj
1062 0 obj
&lt;&lt; 
/Next 1063 0 R 
/Prev 1061 0 R 
/Parent 1024 0 R 
/Dest [ 172 0 R /Fit ] 
/Title (3-04)
&gt;&gt; 
endobj
1063 0 obj
&lt;&lt; 
/Next 1064 0 R 
/Prev 1062 0 R 
/Parent 1024 0 R 
/Dest [ 177 0 R /Fit ] 
/Title (3-05)
&gt;&gt; 
endobj
1064 0 obj
&lt;&lt; 
/Next 1065 0 R 
/Prev 1063 0 R 
/Parent 1024 0 R 
/Dest [ 182 0 R /Fit ] 
/Title (3-06)
&gt;&gt; 
endobj
1065 0 obj
&lt;&lt; 
/Next 1066 0 R 
/Prev 1064 0 R 
/Parent 1024 0 R 
/Dest [ 187 0 R /Fit ] 
/Title (3-07)
&gt;&gt; 
endobj
1066 0 obj
&lt;&lt; 
/Next 1067 0 R 
/Prev 1065 0 R 
/Parent 1024 0 R 
/Dest [ 192 0 R /Fit ] 
/Title (3-08)
&gt;&gt; 
endobj
1067 0 obj
&lt;&lt; 
/Next 1068 0 R 
/Prev 1066 0 R 
/Parent 1024 0 R 
/Dest [ 197 0 R /Fit ] 
/Title (3-09)
&gt;&gt; 
endobj
1068 0 obj
&lt;&lt; 
/Next 1069 0 R 
/Prev 1067 0 R 
/Parent 1024 0 R 
/Dest [ 202 0 R /Fit ] 
/Title (3-10)
&gt;&gt; 
endobj
1069 0 obj
&lt;&lt; 
/Next 1070 0 R 
/Prev 1068 0 R 
/Parent 1024 0 R 
/Dest [ 207 0 R /Fit ] 
/Title (3-11)
&gt;&gt; 
endobj
1070 0 obj
&lt;&lt; 
/Next 1071 0 R 
/Prev 1069 0 R 
/Parent 1024 0 R 
/Dest [ 212 0 R /Fit ] 
/Title (3-12)
&gt;&gt; 
endobj
1071 0 obj
&lt;&lt; 
/Next 1072 0 R 
/Prev 1070 0 R 
/Parent 1024 0 R 
/Dest [ 217 0 R /Fit ] 
/Title (3-13)
&gt;&gt; 
endobj
1072 0 obj
&lt;&lt; 
/Next 1073 0 R 
/Prev 1071 0 R 
/Parent 1024 0 R 
/Dest [ 222 0 R /Fit ] 
/Title (3-14)
&gt;&gt; 
endobj
1073 0 obj
&lt;&lt; 
/Next 1074 0 R 
/Prev 1072 0 R 
/Parent 1024 0 R 
/Dest [ 227 0 R /Fit ] 
/Title (3-15)
&gt;&gt; 
endobj
1074 0 obj
&lt;&lt; 
/Next 1075 0 R 
/Prev 1073 0 R 
/Parent 1024 0 R 
/Dest [ 232 0 R /Fit ] 
/Title (3-16)
&gt;&gt; 
endobj
1075 0 obj
&lt;&lt; 
/Next 1076 0 R 
/Prev 1074 0 R 
/Parent 1024 0 R 
/Dest [ 237 0 R /Fit ] 
/Title (3-17)
&gt;&gt; 
endobj
1076 0 obj
&lt;&lt; 
/Next 1077 0 R 
/Prev 1075 0 R 
/Parent 1024 0 R 
/Dest [ 242 0 R /Fit ] 
/Title (3-18)
&gt;&gt; 
endobj
1077 0 obj
&lt;&lt; 
/Next 1078 0 R 
/Prev 1076 0 R 
/Parent 1024 0 R 
/Dest [ 247 0 R /Fit ] 
/Title (3-19)
&gt;&gt; 
endobj
1078 0 obj
&lt;&lt; 
/Next 1079 0 R 
/Prev 1077 0 R 
/Parent 1024 0 R 
/Dest [ 252 0 R /Fit ] 
/Title (3-20)
&gt;&gt; 
endobj
1079 0 obj
&lt;&lt; 
/Next 1080 0 R 
/Prev 1078 0 R 
/Parent 1024 0 R 
/Dest [ 257 0 R /Fit ] 
/Title (3-21)
&gt;&gt; 
endobj
1080 0 obj
&lt;&lt; 
/Next 1081 0 R 
/Prev 1079 0 R 
/Parent 1024 0 R 
/Dest [ 262 0 R /Fit ] 
/Title (3-22)
&gt;&gt; 
endobj
1081 0 obj
&lt;&lt; 
/Next 1082 0 R 
/Prev 1080 0 R 
/Parent 1024 0 R 
/Dest [ 267 0 R /Fit ] 
/Title (3-23)
&gt;&gt; 
endobj
1082 0 obj
&lt;&lt; 
/Next 1083 0 R 
/Prev 1081 0 R 
/Parent 1024 0 R 
/Dest [ 272 0 R /Fit ] 
/Title (3-24)
&gt;&gt; 
endobj
1083 0 obj
&lt;&lt; 
/Next 1084 0 R 
/Prev 1082 0 R 
/Parent 1024 0 R 
/Dest [ 277 0 R /Fit ] 
/Title (3-25)
&gt;&gt; 
endobj
1084 0 obj
&lt;&lt; 
/Next 1085 0 R 
/Prev 1083 0 R 
/Parent 1024 0 R 
/Dest [ 282 0 R /Fit ] 
/Title (3-26)
&gt;&gt; 
endobj
1085 0 obj
&lt;&lt; 
/Next 1086 0 R 
/Prev 1084 0 R 
/Parent 1024 0 R 
/Dest [ 287 0 R /Fit ] 
/Title (3-27)
&gt;&gt; 
endobj
1086 0 obj
&lt;&lt; 
/Next 1087 0 R 
/Prev 1085 0 R 
/Parent 1024 0 R 
/Dest [ 292 0 R /Fit ] 
/Title (3-28)
&gt;&gt; 
endobj
1087 0 obj
&lt;&lt; 
/Next 1088 0 R 
/Prev 1086 0 R 
/Parent 1024 0 R 
/Dest [ 297 0 R /Fit ] 
/Title (3-29)
&gt;&gt; 
endobj
1088 0 obj
&lt;&lt; 
/Next 1089 0 R 
/Prev 1087 0 R 
/Parent 1024 0 R 
/Dest [ 302 0 R /Fit ] 
/Title (3-30)
&gt;&gt; 
endobj
1089 0 obj
&lt;&lt; 
/Next 1090 0 R 
/Prev 1088 0 R 
/Parent 1024 0 R 
/Dest [ 307 0 R /Fit ] 
/Title (3-31)
&gt;&gt; 
endobj
1090 0 obj
&lt;&lt; 
/Next 1091 0 R 
/Prev 1089 0 R 
/Parent 1024 0 R 
/Dest [ 312 0 R /Fit ] 
/Title (3-32)
&gt;&gt; 
endobj
1091 0 obj
&lt;&lt; 
/Next 1092 0 R 
/Prev 1090 0 R 
/Parent 1024 0 R 
/Dest [ 317 0 R /Fit ] 
/Title (3-33)
&gt;&gt; 
endobj
1092 0 obj
&lt;&lt; 
/Next 1093 0 R 
/Prev 1091 0 R 
/Parent 1024 0 R 
/Dest [ 322 0 R /Fit ] 
/Title (3-34)
&gt;&gt; 
endobj
1093 0 obj
&lt;&lt; 
/Next 1094 0 R 
/Prev 1092 0 R 
/Parent 1024 0 R 
/Dest [ 327 0 R /Fit ] 
/Title (3-35)
&gt;&gt; 
endobj
1094 0 obj
&lt;&lt; 
/Next 1095 0 R 
/Prev 1093 0 R 
/Parent 1024 0 R 
/Dest [ 332 0 R /Fit ] 
/Title (3-36)
&gt;&gt; 
endobj
1095 0 obj
&lt;&lt; 
/Next 1096 0 R 
/Prev 1094 0 R 
/Parent 1024 0 R 
/Dest [ 337 0 R /Fit ] 
/Title (3-37)
&gt;&gt; 
endobj
1096 0 obj
&lt;&lt; 
/Next 1097 0 R 
/Prev 1095 0 R 
/Parent 1024 0 R 
/Dest [ 342 0 R /Fit ] 
/Title (3-38)
&gt;&gt; 
endobj
1097 0 obj
&lt;&lt; 
/Next 1098 0 R 
/Prev 1096 0 R 
/Parent 1024 0 R 
/Dest [ 347 0 R /Fit ] 
/Title (4-01)
&gt;&gt; 
endobj
1098 0 obj
&lt;&lt; 
/Next 1099 0 R 
/Prev 1097 0 R 
/Parent 1024 0 R 
/Dest [ 352 0 R /Fit ] 
/Title (4-02)
&gt;&gt; 
endobj
1099 0 obj
&lt;&lt; 
/Next 1100 0 R 
/Prev 1098 0 R 
/Parent 1024 0 R 
/Dest [ 357 0 R /Fit ] 
/Title (4-03)
&gt;&gt; 
endobj
1100 0 obj
&lt;&lt; 
/Next 1101 0 R 
/Prev 1099 0 R 
/Parent 1024 0 R 
/Dest [ 362 0 R /Fit ] 
/Title (4-04)
&gt;&gt; 
endobj
1101 0 obj
&lt;&lt; 
/Next 1102 0 R 
/Prev 1100 0 R 
/Parent 1024 0 R 
/Dest [ 367 0 R /Fit ] 
/Title (4-05)
&gt;&gt; 
endobj
1102 0 obj
&lt;&lt; 
/Next 1103 0 R 
/Prev 1101 0 R 
/Parent 1024 0 R 
/Dest [ 372 0 R /Fit ] 
/Title (4-06)
&gt;&gt; 
endobj
1103 0 obj
&lt;&lt; 
/Next 1104 0 R 
/Prev 1102 0 R 
/Parent 1024 0 R 
/Dest [ 377 0 R /Fit ] 
/Title (4-07)
&gt;&gt; 
endobj
1104 0 obj
&lt;&lt; 
/Next 1105 0 R 
/Prev 1103 0 R 
/Parent 1024 0 R 
/Dest [ 382 0 R /Fit ] 
/Title (4-08)
&gt;&gt; 
endobj
1105 0 obj
&lt;&lt; 
/Next 1106 0 R 
/Prev 1104 0 R 
/Parent 1024 0 R 
/Dest [ 387 0 R /Fit ] 
/Title (4-09)
&gt;&gt; 
endobj
1106 0 obj
&lt;&lt; 
/Next 1107 0 R 
/Prev 1105 0 R 
/Parent 1024 0 R 
/Dest [ 392 0 R /Fit ] 
/Title (4-10)
&gt;&gt; 
endobj
1107 0 obj
&lt;&lt; 
/Next 1108 0 R 
/Prev 1106 0 R 
/Parent 1024 0 R 
/Dest [ 397 0 R /Fit ] 
/Title (4-11)
&gt;&gt; 
endobj
1108 0 obj
&lt;&lt; 
/Next 1109 0 R 
/Prev 1107 0 R 
/Parent 1024 ‚Ä¶</div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://walden-family.com/impcode/BBN1822_Jan1976.pdf">https://walden-family.com/impcode/BBN1822_Jan1976.pdf</a></em></p>]]>
            </description>
            <link>https://walden-family.com/impcode/BBN1822_Jan1976.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-24949100</guid>
            <pubDate>Sat, 31 Oct 2020 04:20:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: TypeScript Hack ‚Äì Type System Text Adventure]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24948911">thread link</a>) | @ricksharp
<br/>
October 30, 2020 | https://ricklove.me/typescript-type-system-adventure | <a href="https://web.archive.org/web/*/https://ricklove.me/typescript-type-system-adventure">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p><span><span>title</span><span>Typescript Type System Adventure</span></span><span><span>date</span><span>2020-10-24</span></span><span><span>path</span><span>/typescript-type-system-adventure</span></span><span><span>author</span><span>Rick Love</span></span><span><span>excerpt</span><span>Text Adventure implemented in the Typescript Type System and Vscode JsDoc Viewer</span></span><span><span>image</span><span>game-screenshot-06-large.png</span></span><span><span>tags</span><span>typescript, type-system, vscode, jsdoc, markdown, hacks, demo, games, text-adventure</span></span></p><div><div><p>tl;dr: Play a text adventure in vscode with the typescript type system.</p><h3>Update - Added Typescript 4.1 Template String Literals</h3><p><span><img src="https://ricklove.me/blog-content/posts/2020-10-24-typescript-type-system-adventure/typescript-4-1-features.png"></span></p><ul><li><a href="https://github.com/ricklove/rick-love-master/blob/70644a0f6cebf48132fc029e484e6f8db9e3fc19/code/typescript-type-system-adventure/game-type-system.ts#L123">Source on Github</a></li></ul><h3>Summary</h3><p>I've always been a fan of text adventures since I first played Space Quest 1 when I was about 6 (though it was a graphical text adventure technically).</p><p>I've also always been a huge fan of typescript since it came out in 2012.</p><p>Now, since Typescript 4.1 is adding the powerful template-literal-types, I figured I could do something fun with them.</p><p>(I got the idea from here: <a href="https://github.com/codemix/ts-sql">https://github.com/codemix/ts-sql</a>)</p><p>It occured to me, "Hey! Why not a text adventure!"</p><p>Now, it turns out that the way I implemented this game, I don't need the 4.1 features. I'll probably add that in the future to support more dynamic command parsing.</p><p>If you have <code>vscode</code>, you can play now with a quick <code>npm install</code> into any node project. (See below for full installation instructions.)</p><h3>So What?</h3><p>This is a level 99 typescript wizardry demo. </p><p>If you aren't a typescript nerd, you might miss the significance of this, but here is the basic idea:</p><p>First of all, everything you see here is running in the vscode code editor (without any program running). In fact, you can't even run my code. If you compile it to javascript, this is what you will get:</p><div><div><div><div><pre><code><span>export</span> <span>const</span> gameStart = <span>null</span>;</code></pre></div></div></div><p><span>‚ûñ</span></p><p><span>‚ûï</span></p></div><p>(There might be a little more debris then that, but you get the idea.)</p><p>This screenshot should make it clear that the typescript type system is doing all the work:</p><p><span><img src="https://ricklove.me/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-04-type-only.png"></span></p><p>However, it's not very convenient to declare all those StepNN types, so I made a fluent mode that reduces the need for those:</p><p><span><img src="https://ricklove.me/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-01.png"></span></p><p>There is also an easy mode that uses only an object tree. It was very easy to make, but autocomplete ruins the fun by giving all the answers away. </p><p><span><img src="https://ricklove.me/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-05-easy.png"></span></p><p>In the process of making the game, I discoved that vscode supports jsdoc markdown. So I decided to use that for the game output since it is so rich. It even supports images:</p><p><span><img src="https://ricklove.me/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-03.png"></span></p><h3>Features</h3><ul><li>Play in vscode using autocomplete and tooltips</li><li>Game output displayed in tooltips using jsdoc3 with markdown (including gifs)</li><li>Implemented using conditional types, string literals, and a minimal state machine</li></ul><h3>How to play</h3><ul><li><code>npm i @ricklove/typescript-type-system-adventure</code></li><li>Create a new <code>play.ts</code> file and add the below code</li><li>Hover over <code>execute</code> to see game output (see screenshots for examples)</li></ul><div><div><div><div><pre><code><span>import</span> { gameStart } <span>from</span> <span>'@ricklove/typescript-type-system-adventure'</span>;

<span>const</span> play = <span><span>()</span> =&gt;</span> {

    <span>return</span> gameStart
        .command(<span>'look'</span>).execute
};</code></pre></div></div></div><p><span>‚ûñ</span></p><p><span>‚ûï</span></p></div><h3>Tips:</h3><ul><li><code>.command('look').execute</code> will give you an idea of what to do next</li><li><code>.command('help').execute</code> if you get stuck</li><li>If you really get stuck, just hit F12 and read the source code</li><li>You can also play the easy mode with this starter:</li></ul><div><div><div><div><pre><code><span>import</span> { gameStartEasy } <span>from</span> <span>'@ricklove/typescript-type-system-adventure'</span>;

<span>const</span> playEasyMode = <span><span>()</span> =&gt;</span> {
    gameStartEasy
        .begin()
        .look()
};</code></pre></div></div></div><p><span>‚ûñ</span></p><p><span>‚ûï</span></p></div><h3>Screenshots</h3><p><span><img src="https://ricklove.me/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-01.png"></span></p><p><span><img src="https://ricklove.me/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-02.png"></span></p><p><span><img src="https://ricklove.me/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-03.png"></span></p><p><span><img src="https://ricklove.me/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-04-type-only.png"></span></p><p><span><img src="https://ricklove.me/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-05-easy.png"></span></p><p><span><img src="https://ricklove.me/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-06-large.png"></span></p><h3>Source Code</h3><p><a href="https://github.com/ricklove/rick-love-master/tree/master/code/typescript-type-system-adventure">https://github.com/ricklove/rick-love-master/tree/master/code/typescript-type-system-adventure</a></p></div></div></div>]]>
            </description>
            <link>https://ricklove.me/typescript-type-system-adventure</link>
            <guid isPermaLink="false">hacker-news-small-sites-24948911</guid>
            <pubDate>Sat, 31 Oct 2020 03:22:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Better Mousetrap ‚Äì Converting WebPages to Web APIs]]>
            </title>
            <description>
<![CDATA[
Score 63 | Comments 21 (<a href="https://news.ycombinator.com/item?id=24948779">thread link</a>) | @shanselman
<br/>
October 30, 2020 | https://turnerj.com/blog/a-better-mousetrap | <a href="https://web.archive.org/web/*/https://turnerj.com/blog/a-better-mousetrap">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div role="article">
<p>Today is a big day for me as after many months (or years depending how you look at it), I've <a href="https://www.producthunt.com/posts/brandvantage">finally launched the first product for my business, BrandVantage</a>.
This post is the story of how I started with one idea and ended up launching with a different one.</p>
<h2>The Original Idea: Let's build a digital brand expert!</h2>
<p>I worked as a web developer for a local web development agency for a number of years and in that time, I learnt a lot about how a variety of different businesses operated online.</p>
<p>There were a few key "problems" I found in common across many of those businesses:</p>
<ul>
<li>Under-utilising analytics</li>
<li>Misunderstanding analytics</li>
<li>Not keeping on top of industry information</li>
<li>Lack of competitor analysis/understanding</li>
<li>Difficulty with Search Engine Optimization (SEO)</li>
</ul>
<p>In moderate-to-large companies where you have marketing departments, most of this stuff can be covered by one or more staff dedicated to these things.
In smaller companies, the business owner is normally the one where these tasks fall on to, but they are already wearing many different hats.
It felt like something was here - if I could automate some of these tasks in different ways, I could both help business owners and earn myself some money along the way.</p>
<p>Automation of tasks, especially ones in analytics or SEO spaces, isn't a new idea.
In fact, I've seen many businesses in a similar space launch on Product Hunt over the years since starting, but that didn't deter me.
I was building <a href="https://idioms.thefreedictionary.com/a+better+mousetrap"><em>a better mousetrap</em></a> and wanting to launch it at a lower price, not something truly innovative so it was going to be an uphill battle.
This area though, helping small businesses online be as efficient in tasks as some bigger businesses can, is something I felt passionately about so I proceeded anyway.</p>
<h3>Attempt One: Very Hacky (in PHP)</h3>
<p>Way back in 2015/16/17, while still at my full-time job, I spent nights and weekends building and tinkering on solutions to the problems business owners face.
It was a hacky PHP solution pulling real-time information from sources like Twitter, Google Analytics and Facebook.
A hacky approach seemed like a good idea as that seemed to be the way people launched things, do the quickest and hackiest thing you can to get it out the door.</p>
<p>While working on it, I had a few interested parties though what I built could barely be considered a prototype.
The thing was a mess.
I could do some basic queries, but it wasn't what I considered sellable and definitely not user-friendly, something I considered key to the product.
I was also running into technical problems with scale - any sufficiently complex query was performed real-time, which was getting more complicated.
Real-time processing had to be out.
I needed to pre-compute and store it in a database.</p>
<p>I wanted to take this more seriously and I didn't feel like a "quick and hacky" approach to building a product was right for me.
With this in mind, it seemed like a good opportunity to change the tech stack to something that would be better long term.</p>
<h3>Attempt Two: Slightly Less Hacky (in .NET)</h3>
<p>Moving to .NET felt like the smart move for me as at my job I had spent a lot more time working in .NET than PHP, plus I vastly prefered the tooling in .NET vs PHP.
That said, the .NET code I had worked on to-date would definitely be considered "legacy code".</p>
<p>My first version in .NET (specifically .NET Framework), predating my use of version control, was trying to keep costs low by using MySQL through Entity Framework.
After a lot of pain and suffering with that, I had a short stint of MSSQL before I settled upon MongoDB.</p>
<p>MongoDB might seem like a weird choice - there are some people that have very strong opinions about which type of database you should use.
Honestly it came down to a gut feel after messing around with it - it seemed more compatible to the way I was approaching problems than a relational database would.
I liked the code-first approach to Entity Framework so much though that I recreated the "feel" of Entity Framework for MongoDB with some custom code.
This later became an open source project of mine called <a href="https://www.mongoframework.com/">MongoFramework</a>.</p>
<p>I'm not going to lie, progress was... slow.
While I was putting quite a lot of time into working on it, it was still an extremely ambitious project.
I have strong feelings about building "MVPs" where some people focus too much on the "minimum" without enough focus on the "viable".
At the end of the day people buy products that meet their needs, and cutting too much out would meet no-ones needs.
If someone was going to use this, in a market with many competitors of varying quality, it had to do its job well.
There didn't seem much I could reasonably cut to make it any more minimal if I wanted people to buy it.</p>
<p>I kept working at it every night, building pieces to extract and store data from a variety of sources.
I was pulling in data from Google Analytics, Google Webmaster Tools (now called Google Search Console), Twitter, Facebook, IP Geolocation, DNS information and also from news articles.
What I thought I could do is once I had the different data sources together, I would write custom rules that could infer insights from individual or combined data sets.
These insights would form the basis of the "digital brand expert".
After all, that was the goal of the idea, something that could help out small business owners.</p>
<p>After 2 years of working on this in my spare time, it felt the right time to leave my job and go into this full time.
I felt like I was <em>so close</em> to launching and I just needed something more than the same day-to-day work.
So I did it - <a href="https://turnerj.com/blog/i-left-my-job-today-after-seven-years">I left my job after 7 years</a>.</p>
<h3>Going Full-time into the Idea</h3>
<p>Right out of the gate, I had moved from .NET Framework to .NET Core, was working on UI/UX improvements for the application and launched the website for it.
I worked with an accountant and a lawyer to setup the business, bought a trade mark for the product name, and I felt good like I was only a few months away from launching.
This feeling didn't last though...</p>
<p>Over time, it felt like I was taking two steps forward then one step back - some technical, some business related.
Sure, that is still progress, but having new issues crop up every day or so can really crush your motivation.</p>
<p>My best/happiest/most productive days were days I ignored or avoided different issues I had.
If I had a problem with the login system, I would focus on how the UX of the menus worked.
If I had a problem with data gathering, I would add more tests to the codebase.
While I didn't entirely ignore the problem, I would wait a week or two before I looked at it again, somewhat hoping it would solve itself - unfortunately that isn't how things work.</p>
<p>In time though, I got to a stage where it felt like I could launch and was hyping myself up until reality struck: I didn't actually build what I set out to build.</p>
<p>The UI/UX was good, I had strategies for deployment and plans for next steps, but it wasn't a "digital brand expert".
It was instead a glorified data store for information that people could better access through existing tools.
That's kinda a big problem!</p>
<p><img src="https://turnerj.com/blog/2020/images/a-better-mousetrap-ive-made-a-huge-mistake.gif" alt="Gob Bluth saying &quot;I've made a huge mistake.&quot; from the TV Show &quot;Arrested Development&quot;"></p>
<p>When realising this I poured time into fixing that huge lapse in judgement, but I couldn't do it.
No matter how I tried, I just couldn't figure out how to build this rules engine.
It was like my entire thought process was just clouded.
I couldn't see the solution to the problem like I can for most other things.</p>
<p>This was depressing and I ended up having a month or so hiatus from working on it.
When I have had stints of not feeling like or not being able to do programming in the past, I try and spur it on again by watching some show or movie which has some strong relation to technology (fictional or not).
My go-to is usually something like <a href="https://www.imdb.com/title/tt0371746/">Iron Man</a>, but this time I was rewatching <a href="https://www.imdb.com/title/tt2543312/">Halt and Catch Fire</a> where I found some inspiration.</p>
<h2>The Pivot: An API to the Internet</h2>
<p>Later in the series a lot of the focus is around the Web, and it was in these episodes where my thoughts about the Internet and the data on it have changed.
There is a quote from one of the main characters at the end of Season 3 that resonates with me:</p>
<div>
<blockquote>
<p>"The moment we decide what the Web is, we've lost. The moment we try to tell people what to do with it, we've lost.
All we have to do is build a door and let them inside."</p>
<p>- Joe MacMillan (Season 3, Episode 10)</p>
</blockquote>
</div>
<p>The Internet is a treasure trove of information, it is searchable but generally unstructured.
People have managed to create all sorts of different pages in HTML, but in the process of making a website everything is designed for a human user.
It is this way for obvious reasons, <em>we</em> are the consumers of web pages after all... aren't we?</p>
<p>Behind these user-friendly web pages are usually other specific bits of markup, providing some level of structured data for specific situations.
Sometimes it is a description metatag for search engines, other times it might be <a href="https://ogp.me/">Open Graph</a> metatags for social media links.
We build these things to help aid computers processing our web pages.</p>
<p>In 2011, <a href="https://schema.org/">Schema.org</a> was created.
This was a collaborative effort between Google, Bing and Yahoo (later that year, Yandex as well) with the mission to "create, maintain, and promote schemas for structured data on the Internet, on web pages, in email messages, and beyond".
Through 3 different encodings (<a href="https://turnerj.com/blog/what-is-microdata-and-why-should-i-care">Microdata</a>, <a href="http://rdfa.info/">RDFa</a> and <a href="https://json-ld.org/">JSON-LD</a>), websites could express detailed structured data.</p>
<p>There is another quote from Halt and Catch Fire which I like:</p>
<div>
<blockquote>
<p>"Computers aren't the thing. They're the thing that gets us to the thing."</p>
<p>- Joe MacMillan (Season 1, Episode 1)</p>
</blockquote>
</div>
<p>As much as I like computers and programming, they are used to help us achieve other goals.
From my attempts of trying to build a "digital brand expert", I knew that data is fundamental to help build more advanced systems and give new insights.
Having easier access to other forms of data from web pages around the world may allow new and different tools to be built.</p>
<p>So I decided rather than try and solve a problem that I was clouded by, I ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://turnerj.com/blog/a-better-mousetrap">https://turnerj.com/blog/a-better-mousetrap</a></em></p>]]>
            </description>
            <link>https://turnerj.com/blog/a-better-mousetrap</link>
            <guid isPermaLink="false">hacker-news-small-sites-24948779</guid>
            <pubDate>Sat, 31 Oct 2020 02:49:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: The Onion for Crypto]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24948746">thread link</a>) | @npguy
<br/>
October 30, 2020 | http://doublespend.io/index.php | <a href="https://web.archive.org/web/*/http://doublespend.io/index.php">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main">
				<div>
			<div>
		<div>
			<section id="colormag_featured_posts_widget-4">
		<div>
			<div>
				<figure><a href="https://doublespend.io/2020/11/02/cryptotwitter-busy-finalizing-positive-bitcoin-tweets-for-tuesday/" title="CryptoTwitter Busy Finalizing Positive Bitcoin Tweets For Tuesday"><img width="390" height="205" src="https://doublespend.io/wp-content/uploads/2020/11/CT-390x205.png" alt="CryptoTwitter Busy Finalizing Positive Bitcoin Tweets For Tuesday" loading="lazy" title="CryptoTwitter Busy Finalizing Positive Bitcoin Tweets For Tuesday"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/bitcoin/" rel="category tag">Bitcoin</a>&nbsp;<a href="https://doublespend.io/category/top-stories/" rel="category tag">TOP STORY</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/11/02/cryptotwitter-busy-finalizing-positive-bitcoin-tweets-for-tuesday/" title="CryptoTwitter Busy Finalizing Positive Bitcoin Tweets For Tuesday">
				CryptoTwitter Busy Finalizing Positive Bitcoin Tweets For Tuesday			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/11/02/cryptotwitter-busy-finalizing-positive-bitcoin-tweets-for-tuesday/" title="5:59 am" rel="bookmark"><i></i> <time datetime="2020-11-02T05:59:43+00:00">November 2, 2020</time><time datetime="2020-11-02T05:59:45+00:00">November 2, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/hoddler/" title="Matt Hoddler">
					Matt Hoddler				</a>
			</span>
		</span>

		
		</p></div>
											<p>‚ÄúWe need to get it back to 20K so we can get out. Its actually a simple process ‚Äì Get it to 20K, Talk about 100K and Get out as fast as you can‚Äù </p>
									</div>

			</div>
			</div><div>
			<div>
				<figure><a href="https://doublespend.io/2020/10/31/coinbase-card-users-to-get-a-headache-treatment-pack-free-with-every-transaction/" title="Coinbase Card Users To Get A Headache Treatment Pack Free With Every Transaction"><img width="130" height="90" src="https://doublespend.io/wp-content/uploads/2020/10/headachepill-2-130x90.jpeg" alt="Coinbase Card Users To Get A Headache Treatment Pack Free With Every Transaction" loading="lazy" title="Coinbase Card Users To Get A Headache Treatment Pack Free With Every Transaction" srcset="https://doublespend.io/wp-content/uploads/2020/10/headachepill-2-130x90.jpeg 130w, https://doublespend.io/wp-content/uploads/2020/10/headachepill-2-392x272.jpeg 392w" sizes="(max-width: 130px) 100vw, 130px"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/top-stories/" rel="category tag">TOP STORY</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/31/coinbase-card-users-to-get-a-headache-treatment-pack-free-with-every-transaction/" title="Coinbase Card Users To Get A Headache Treatment Pack Free With Every Transaction">
				Coinbase Card Users To Get A Headache Treatment Pack Free With Every Transaction			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/31/coinbase-card-users-to-get-a-headache-treatment-pack-free-with-every-transaction/" title="5:45 am" rel="bookmark"><i></i> <time datetime="2020-10-31T05:45:19+00:00">October 31, 2020</time><time datetime="2020-11-01T03:44:34+00:00">November 1, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/nakaboto/" title="Sat Nakaboto">
					Sat Nakaboto				</a>
			</span>
		</span>

		
		</p></div>
									</div>

			</div>
			
			<div>
				<figure><a href="https://doublespend.io/2020/10/28/breaking-object-floating-in-atlantic-could-be-carrying-funds-raised-in-eos-ico/" title="Object Floating In Atlantic Ocean Could Contain EOS‚Äô ICO Funds: Sources"><img width="130" height="90" src="https://doublespend.io/wp-content/uploads/2020/10/eos-130x90.jpg" alt="Object Floating In Atlantic Ocean Could Contain EOS‚Äô ICO Funds: Sources" loading="lazy" title="Object Floating In Atlantic Ocean Could Contain EOS‚Äô ICO Funds: Sources" srcset="https://doublespend.io/wp-content/uploads/2020/10/eos-130x90.jpg 130w, https://doublespend.io/wp-content/uploads/2020/10/eos-392x272.jpg 392w" sizes="(max-width: 130px) 100vw, 130px"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/ico/" rel="category tag">ICO</a>&nbsp;<a href="https://doublespend.io/category/top-stories/" rel="category tag">TOP STORY</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/28/breaking-object-floating-in-atlantic-could-be-carrying-funds-raised-in-eos-ico/" title="Object Floating In Atlantic Ocean Could Contain EOS‚Äô ICO Funds: Sources">
				Object Floating In Atlantic Ocean Could Contain EOS‚Äô ICO Funds: Sources			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/28/breaking-object-floating-in-atlantic-could-be-carrying-funds-raised-in-eos-ico/" title="5:12 am" rel="bookmark"><i></i> <time datetime="2020-10-28T05:12:46+00:00">October 28, 2020</time><time datetime="2020-10-29T20:16:23+00:00">October 29, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/nakaboto/" title="Sat Nakaboto">
					Sat Nakaboto				</a>
			</span>
		</span>

					<span>
				<i></i><a href="https://doublespend.io/2020/10/28/breaking-object-floating-in-atlantic-could-be-carrying-funds-raised-in-eos-ico/#respond">0</a>			</span>
		
		</p></div>
									</div>

			</div>
			
			<div>
				<figure><a href="https://doublespend.io/2020/10/28/kayaking-adventurous-sport/" title="PayPal CEO Praises Regulatory Scenario In Crypto"><img width="130" height="90" src="https://doublespend.io/wp-content/uploads/2015/03/paypal-130x90.jpg" alt="PayPal CEO Praises Regulatory Scenario In Crypto" loading="lazy" title="PayPal CEO Praises Regulatory Scenario In Crypto" srcset="https://doublespend.io/wp-content/uploads/2015/03/paypal-130x90.jpg 130w, https://doublespend.io/wp-content/uploads/2015/03/paypal-392x272.jpg 392w" sizes="(max-width: 130px) 100vw, 130px"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/regulation/" rel="category tag">Regulation</a>&nbsp;<a href="https://doublespend.io/category/top-stories/" rel="category tag">TOP STORY</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/28/kayaking-adventurous-sport/" title="PayPal CEO Praises Regulatory Scenario In Crypto">
				PayPal CEO Praises Regulatory Scenario In Crypto			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/28/kayaking-adventurous-sport/" title="4:20 am" rel="bookmark"><i></i> <time datetime="2020-10-28T04:20:23+00:00">October 28, 2020</time><time datetime="2020-11-02T18:20:07+00:00">November 2, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/p2pai/" title="p2pai">
					p2pai				</a>
			</span>
		</span>

					<span>
				<i></i><a href="https://doublespend.io/2020/10/28/kayaking-adventurous-sport/#respond">0</a>			</span>
		
		</p></div>
									</div>

			</div>
			</div></section>		</div>

		<div>
			<section id="colormag_featured_posts_vertical_widget-7">
		<div>
			<div>
				<figure><a href="https://doublespend.io/2020/10/27/its-official-ohios-basket-building-is-smaller-than-tushar-jains-arweave-bag/" title="Is This Building Bigger Than Tushar Jain‚Äôs Arweave Bag?"><img width="390" height="205" src="https://doublespend.io/wp-content/uploads/2020/10/Bigbag-390x205.jpg" alt="Is This Building Bigger Than Tushar Jain‚Äôs Arweave Bag?" loading="lazy" title="Is This Building Bigger Than Tushar Jain‚Äôs Arweave Bag?"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/analysis/" rel="category tag">Analysis</a>&nbsp;<a href="https://doublespend.io/category/people/" rel="category tag">People</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/27/its-official-ohios-basket-building-is-smaller-than-tushar-jains-arweave-bag/" title="Is This Building Bigger Than Tushar Jain‚Äôs Arweave Bag?">
				Is This Building Bigger Than Tushar Jain‚Äôs Arweave Bag?			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/27/its-official-ohios-basket-building-is-smaller-than-tushar-jains-arweave-bag/" title="6:15 am" rel="bookmark"><i></i> <time datetime="2020-10-27T06:15:00+00:00">October 27, 2020</time><time datetime="2020-10-29T16:41:06+00:00">October 29, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/nakaboto/" title="Sat Nakaboto">
					Sat Nakaboto				</a>
			</span>
		</span>

					<span>
				<i></i><a href="https://doublespend.io/2020/10/27/its-official-ohios-basket-building-is-smaller-than-tushar-jains-arweave-bag/#respond">0</a>			</span>
		
		</p></div>
											<p>While decentralized storage is indeed a huge space, the sheer size of Tushar‚Äôs bag has come as a surprise to many in the crypto space.</p>
									</div>

			</div>
			</div></section>		</div>
	</div>

	<div>
		
		<div id="primary">
			<div id="content">

										<div>
							<section id="colormag_featured_posts_vertical_widget-2">
		<h3><span>DoubleSpend Exclusives</span></h3><div>
			<div>
				<figure><a href="https://doublespend.io/2020/10/28/man-continues-reading-crypto-white-paper-after-first-mathematical-equation/" title="Man Continues Reading Crypto White Paper After First Math Equation"><img width="390" height="205" src="https://doublespend.io/wp-content/uploads/2020/10/comp-390x205.jpg" alt="Man Continues Reading Crypto White Paper After First Math Equation" loading="lazy" title="Man Continues Reading Crypto White Paper After First Math Equation"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/blockchain/" rel="category tag">Blockchain</a>&nbsp;<a href="https://doublespend.io/category/exclusives/" rel="category tag">Exclusives</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/28/man-continues-reading-crypto-white-paper-after-first-mathematical-equation/" title="Man Continues Reading Crypto White Paper After First Math Equation">
				Man Continues Reading Crypto White Paper After First Math Equation			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/28/man-continues-reading-crypto-white-paper-after-first-mathematical-equation/" title="7:20 pm" rel="bookmark"><i></i> <time datetime="2020-10-28T19:20:55+00:00">October 28, 2020</time><time datetime="2020-10-31T03:20:59+00:00">October 31, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/nakaboto/" title="Sat Nakaboto">
					Sat Nakaboto				</a>
			</span>
		</span>

					<span>
				<i></i><a href="https://doublespend.io/2020/10/28/man-continues-reading-crypto-white-paper-after-first-mathematical-equation/#respond">0</a>			</span>
		
		</p></div>
											<p>The video footage has been analyzed with WebGazeAnalyzer.</p>
									</div>

			</div>
			</div><div>
			<div>
				<figure><a href="https://doublespend.io/2020/10/28/breakthrough-mathematicians-estimate-ethereum-2-0-launch-date/" title="Breakthrough: Mathematicians Estimate Ethereum 2.0 Launch Date"><img width="130" height="90" src="https://doublespend.io/wp-content/uploads/2020/10/eth2-130x90.jpg" alt="Breakthrough: Mathematicians Estimate Ethereum 2.0 Launch Date" loading="lazy" title="Breakthrough: Mathematicians Estimate Ethereum 2.0 Launch Date" srcset="https://doublespend.io/wp-content/uploads/2020/10/eth2-130x90.jpg 130w, https://doublespend.io/wp-content/uploads/2020/10/eth2-392x272.jpg 392w" sizes="(max-width: 130px) 100vw, 130px"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/blockchain/" rel="category tag">Blockchain</a>&nbsp;<a href="https://doublespend.io/category/exclusives/" rel="category tag">Exclusives</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/28/breakthrough-mathematicians-estimate-ethereum-2-0-launch-date/" title="Breakthrough: Mathematicians Estimate Ethereum 2.0 Launch Date">
				Breakthrough: Mathematicians Estimate Ethereum 2.0 Launch Date			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/28/breakthrough-mathematicians-estimate-ethereum-2-0-launch-date/" title="6:25 am" rel="bookmark"><i></i> <time datetime="2020-10-28T06:25:21+00:00">October 28, 2020</time><time datetime="2020-10-31T03:23:07+00:00">October 31, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/nakaboto/" title="Sat Nakaboto">
					Sat Nakaboto				</a>
			</span>
		</span>

					<span>
				<i></i><a href="https://doublespend.io/2020/10/28/breakthrough-mathematicians-estimate-ethereum-2-0-launch-date/#respond">0</a>			</span>
		
		</p></div>
									</div>

			</div>
			
			<div>
				<figure><a href="https://doublespend.io/2020/10/28/coffee-is-health-food-myth-or-fact/" title="Crypto Executive Fired For Not Saying ‚ÄòLike The Internet‚Äô"><img width="130" height="90" src="https://doublespend.io/wp-content/uploads/2015/03/fired-130x90.jpg" alt="Crypto Executive Fired For Not Saying ‚ÄòLike The Internet‚Äô" loading="lazy" title="Crypto Executive Fired For Not Saying ‚ÄòLike The Internet‚Äô" srcset="https://doublespend.io/wp-content/uploads/2015/03/fired-130x90.jpg 130w, https://doublespend.io/wp-content/uploads/2015/03/fired-392x272.jpg 392w" sizes="(max-width: 130px) 100vw, 130px"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/exclusives/" rel="category tag">Exclusives</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/28/coffee-is-health-food-myth-or-fact/" title="Crypto Executive Fired For Not Saying ‚ÄòLike The Internet‚Äô">
				Crypto Executive Fired For Not Saying ‚ÄòLike The Internet‚Äô			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/28/coffee-is-health-food-myth-or-fact/" title="5:33 am" rel="bookmark"><i></i> <time datetime="2020-10-28T05:33:52+00:00">October 28, 2020</time><time datetime="2020-10-28T20:11:55+00:00">October 28, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/nakaboto/" title="Sat Nakaboto">
					Sat Nakaboto				</a>
			</span>
		</span>

					<span>
				<i></i><a href="https://doublespend.io/2020/10/28/coffee-is-health-food-myth-or-fact/#respond">0</a>			</span>
		
		</p></div>
									</div>

			</div>
			
			<div>
				<figure><a href="https://doublespend.io/2020/10/28/destruction-in-montania/" title="‚ÄúWe Are All About DeePhi‚Äù: SupariCoin Founder"><img width="130" height="90" src="https://doublespend.io/wp-content/uploads/2015/03/Defi-130x90.jpg" alt="‚ÄúWe Are All About DeePhi‚Äù: SupariCoin Founder" loading="lazy" title="‚ÄúWe Are All About DeePhi‚Äù: SupariCoin Founder" srcset="https://doublespend.io/wp-content/uploads/2015/03/Defi-130x90.jpg 130w, https://doublespend.io/wp-content/uploads/2015/03/Defi-392x272.jpg 392w" sizes="(max-width: 130px) 100vw, 130px"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/defi/" rel="category tag">DeFi</a>&nbsp;<a href="https://doublespend.io/category/exclusives/" rel="category tag">Exclusives</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/28/destruction-in-montania/" title="‚ÄúWe Are All About DeePhi‚Äù: SupariCoin Founder">
				‚ÄúWe Are All About DeePhi‚Äù: SupariCoin Founder			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/28/destruction-in-montania/" title="4:39 am" rel="bookmark"><i></i> <time datetime="2020-10-28T04:39:41+00:00">October 28, 2020</time><time datetime="2020-10-29T19:47:47+00:00">October 29, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/p2pai/" title="p2pai">
					p2pai				</a>
			</span>
		</span>

					<span>
				<i></i><a href="https://doublespend.io/2020/10/28/destruction-in-montania/#respond">0</a>			</span>
		
		</p></div>
									</div>

			</div>
			</div></section>						</div>

						<div>
							<section id="colormag_featured_posts_vertical_widget-3">
		<h3><span>Opinion</span></h3><div>
			<div>
				<figure><a href="https://doublespend.io/2020/10/29/fastest-plane-in-the-world/" title="Crypto Teams Should Refer To ‚ÄòMainnet Launch‚Äô As ‚ÄòMoney Transfer‚Äô"><img width="390" height="205" src="https://doublespend.io/wp-content/uploads/2015/03/money-390x205.jpg" alt="Crypto Teams Should Refer To ‚ÄòMainnet Launch‚Äô As ‚ÄòMoney Transfer‚Äô" loading="lazy" title="Crypto Teams Should Refer To ‚ÄòMainnet Launch‚Äô As ‚ÄòMoney Transfer‚Äô"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/opinion/" rel="category tag">Opinion</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/29/fastest-plane-in-the-world/" title="Crypto Teams Should Refer To ‚ÄòMainnet Launch‚Äô As ‚ÄòMoney Transfer‚Äô">
				Crypto Teams Should Refer To ‚ÄòMainnet Launch‚Äô As ‚ÄòMoney Transfer‚Äô			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/29/fastest-plane-in-the-world/" title="7:45 pm" rel="bookmark"><i></i> <time datetime="2020-10-29T19:45:32+00:00">October 29, 2020</time><time datetime="2020-10-30T06:21:43+00:00">October 30, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/p2pai/" title="p2pai">
					p2pai				</a>
			</span>
		</span>

					<span>
				<i></i><a href="https://doublespend.io/2020/10/29/fastest-plane-in-the-world/#respond">0</a>			</span>
		
		</p></div>
											<p>This will help address the criticism that the crypto industry uses language that is not understood by all.</p>
									</div>

			</div>
			</div><div>
			<div>
				<figure><a href="https://doublespend.io/2020/10/29/teens-use-apps-to-keep-secrets/" title="Ledger Should Open Up Its Crypto Holdings Dataset As Well"><img width="130" height="90" src="https://doublespend.io/wp-content/uploads/2015/03/ledger-130x90.jpg" alt="Ledger Should Open Up Its Crypto Holdings Dataset As Well" loading="lazy" title="Ledger Should Open Up Its Crypto Holdings Dataset As Well" srcset="https://doublespend.io/wp-content/uploads/2015/03/ledger-130x90.jpg 130w, https://doublespend.io/wp-content/uploads/2015/03/ledger-392x272.jpg 392w" sizes="(max-width: 130px) 100vw, 130px"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/gadgets/" rel="category tag">Gadgets</a>&nbsp;<a href="https://doublespend.io/category/opinion/" rel="category tag">Opinion</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/29/teens-use-apps-to-keep-secrets/" title="Ledger Should Open Up Its Crypto Holdings Dataset As Well">
				Ledger Should Open Up Its Crypto Holdings Dataset As Well			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/29/teens-use-apps-to-keep-secrets/" title="5:19 pm" rel="bookmark"><i></i> <time datetime="2020-10-29T17:19:58+00:00">October 29, 2020</time><time datetime="2020-10-31T05:14:15+00:00">October 31, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/p2pai/" title="p2pai">
					p2pai				</a>
			</span>
		</span>

		
		</p></div>
									</div>

			</div>
			
			<div>
				<figure><a href="https://doublespend.io/2020/10/28/womens-relay-competition/" title="A Sprint Race Should Decide Which Bagholder Gets To Dump Coins First"><img width="130" height="90" src="https://doublespend.io/wp-content/uploads/2015/03/relay-race-655353_1280-130x90.jpg" alt="A Sprint Race Should Decide Which Bagholder Gets To Dump Coins First" loading="lazy" title="A Sprint Race Should Decide Which Bagholder Gets To Dump Coins First" srcset="https://doublespend.io/wp-content/uploads/2015/03/relay-race-655353_1280-130x90.jpg 130w, https://doublespend.io/wp-content/uploads/2015/03/relay-race-655353_1280-392x272.jpg 392w" sizes="(max-width: 130px) 100vw, 130px"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/markets/" rel="category tag">Markets</a>&nbsp;<a href="https://doublespend.io/category/opinion/" rel="category tag">Opinion</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/28/womens-relay-competition/" title="A Sprint Race Should Decide Which Bagholder Gets To Dump Coins First">
				A Sprint Race Should Decide Which Bagholder Gets To Dump Coins First			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/28/womens-relay-competition/" title="7:57 pm" rel="bookmark"><i></i> <time datetime="2020-10-28T19:57:24+00:00">October 28, 2020</time><time datetime="2020-10-29T16:50:27+00:00">October 29, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/p2pai/" title="p2pai">
					p2pai				</a>
			</span>
		</span>

					<span>
				<i></i><a href="https://doublespend.io/2020/10/28/womens-relay-competition/#respond">0</a>			</span>
		
		</p></div>
									</div>

			</div>
			
			<div>
				<figure><a href="https://doublespend.io/2020/10/28/coinmarketcap-should-just-be-a-brain-chip-implant/" title="CoinMarketCap Should Just Be A Brain Chip Implant"><img width="130" height="90" src="https://doublespend.io/wp-content/uploads/2020/10/coinmarketcap-130x90.png" alt="CoinMarketCap Should Just Be A Brain Chip Implant" loading="lazy" title="CoinMarketCap Should Just Be A Brain Chip Implant" srcset="https://doublespend.io/wp-content/uploads/2020/10/coinmarketcap-130x90.png 130w, https://doublespend.io/wp-content/uploads/2020/10/coinmarketcap-392x272.png 392w" sizes="(max-width: 130px) 100vw, 130px"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/opinion/" rel="category tag">Opinion</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/28/coinmarketcap-should-just-be-a-brain-chip-implant/" title="CoinMarketCap Should Just Be A Brain Chip Implant">
				CoinMarketCap Should Just Be A Brain Chip Implant			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/28/coinmarketcap-should-just-be-a-brain-chip-implant/" title="6:09 am" rel="bookmark"><i></i> <time datetime="2020-10-28T06:09:19+00:00">October 28, 2020</time><time datetime="2020-10-28T06:09:20+00:00">October 28, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/nakaboto/" title="Sat Nakaboto">
					Sat Nakaboto				</a>
			</span>
		</span>

					<span>
				<i></i><a href="https://doublespend.io/2020/10/28/coinmarketcap-should-just-be-a-brain-chip-implant/#respond">0</a>			</span>
		
		</p></div>
									</div>

			</div>
			</div></section>						</div>

						
						<section id="colormag_featured_posts_widget-2">
		<h3><span>The Future: A DoubleSpend Special</span></h3><div>
			<div>
				<figure><a href="https://doublespend.io/2020/10/31/man-refuses-to-do-anything-quoting-navals-tweets/" title="Man Refuses To Do Anything, Says ‚ÄúI am following Naval‚Äôs Tweets‚Äù"><img width="390" height="205" src="https://doublespend.io/wp-content/uploads/2020/10/naval-390x205.jpg" alt="Man Refuses To Do Anything, Says ‚ÄúI am following Naval‚Äôs Tweets‚Äù" loading="lazy" title="Man Refuses To Do Anything, Says ‚ÄúI am following Naval‚Äôs Tweets‚Äù"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/future/" rel="category tag">Future</a>&nbsp;<a href="https://doublespend.io/category/people/" rel="category tag">People</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/31/man-refuses-to-do-anything-quoting-navals-tweets/" title="Man Refuses To Do Anything, Says ‚ÄúI am following Naval‚Äôs Tweets‚Äù">
				Man Refuses To Do Anything, Says ‚ÄúI am following Naval‚Äôs Tweets‚Äù			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/31/man-refuses-to-do-anything-quoting-navals-tweets/" title="3:13 am" rel="bookmark"><i></i> <time datetime="2020-10-31T03:13:53+00:00">October 31, 2020</time><time datetime="2020-10-31T05:54:42+00:00">October 31, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/nakaboto/" title="Sat Nakaboto">
					Sat Nakaboto				</a>
			</span>
		</span>

		
		</p></div>
											<p>The man has reportedly set an aspirational rate of USD 1,000 per hour, following Naval‚Äôs advice.</p>
									</div>

			</div>
			</div><div>
			<div>
				<figure><a href="https://doublespend.io/2020/10/29/ancient-history-provides-clues-for-securing-crypto-keys/" title="Ancient History Provides Clues For Securing Crypto Keys"><img width="130" height="90" src="https://doublespend.io/wp-content/uploads/2020/10/ancient-130x90.jpg" alt="Ancient History Provides Clues For Securing Crypto Keys" loading="lazy" title="Ancient History Provides Clues For Securing Crypto Keys" srcset="https://doublespend.io/wp-content/uploads/2020/10/ancient-130x90.jpg 130w, https://doublespend.io/wp-content/uploads/2020/10/ancient-392x272.jpg 392w" sizes="(max-width: 130px) 100vw, 130px"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/future/" rel="category tag">Future</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/29/ancient-history-provides-clues-for-securing-crypto-keys/" title="Ancient History Provides Clues For Securing Crypto Keys">
				Ancient History Provides Clues For Securing Crypto Keys			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/29/ancient-history-provides-clues-for-securing-crypto-keys/" title="8:27 pm" rel="bookmark"><i></i> <time datetime="2020-10-29T20:27:42+00:00">October 29, 2020</time><time datetime="2020-10-31T03:36:06+00:00">October 31, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/hoddler/" title="Matt Hoddler">
					Matt Hoddler				</a>
			</span>
		</span>

					<span>
				<i></i><a href="https://doublespend.io/2020/10/29/ancient-history-provides-clues-for-securing-crypto-keys/#respond">0</a>			</span>
		
		</p></div>
									</div>

			</div>
			
			<div>
				<figure><a href="https://doublespend.io/2020/10/29/million-dollar-hackathon-winner-vc-robot/" title="Million Dollar Hackathon Winner: ‚ÄòVC Robot‚Äô"><img width="130" height="90" src="https://doublespend.io/wp-content/uploads/2020/10/robot-130x90.jpg" alt="Million Dollar Hackathon Winner: ‚ÄòVC Robot‚Äô" loading="lazy" title="Million Dollar Hackathon Winner: ‚ÄòVC Robot‚Äô" srcset="https://doublespend.io/wp-content/uploads/2020/10/robot-130x90.jpg 130w, https://doublespend.io/wp-content/uploads/2020/10/robot-392x272.jpg 392w" sizes="(max-width: 130px) 100vw, 130px"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/future/" rel="category tag">Future</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2020/10/29/million-dollar-hackathon-winner-vc-robot/" title="Million Dollar Hackathon Winner: ‚ÄòVC Robot‚Äô">
				Million Dollar Hackathon Winner: ‚ÄòVC Robot‚Äô			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2020/10/29/million-dollar-hackathon-winner-vc-robot/" title="8:05 pm" rel="bookmark"><i></i> <time datetime="2020-10-29T20:05:47+00:00">October 29, 2020</time><time datetime="2020-10-29T20:05:49+00:00">October 29, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/hoddler/" title="Matt Hoddler">
					Matt Hoddler				</a>
			</span>
		</span>

					<span>
				<i></i><a href="https://doublespend.io/2020/10/29/million-dollar-hackathon-winner-vc-robot/#respond">0</a>			</span>
		
		</p></div>
									</div>

			</div>
			
			<div>
				<figure><a href="https://doublespend.io/2015/03/24/mosquito-borne-diseases-has-threaten-world/" title="Jack Dorsey Founds Two More Companies, To Be CEO There As Well"><img width="130" height="90" src="https://doublespend.io/wp-content/uploads/2015/03/jack-130x90.jpg" alt="Jack Dorsey Founds Two More Companies, To Be CEO There As Well" loading="lazy" title="Jack Dorsey Founds Two More Companies, To Be CEO There As Well" srcset="https://doublespend.io/wp-content/uploads/2015/03/jack-130x90.jpg 130w, https://doublespend.io/wp-content/uploads/2015/03/jack-392x272.jpg 392w" sizes="(max-width: 130px) 100vw, 130px"></a></figure>
				<div>
					<div><p><span><a href="https://doublespend.io/category/exclusives/" rel="category tag">Exclusives</a>&nbsp;<a href="https://doublespend.io/category/future/" rel="category tag">Future</a>&nbsp;<a href="https://doublespend.io/category/news/" rel="category tag">News</a>&nbsp;</span></p></div>		<h3>
			<a href="https://doublespend.io/2015/03/24/mosquito-borne-diseases-has-threaten-world/" title="Jack Dorsey Founds Two More Companies, To Be CEO There As Well">
				Jack Dorsey Founds Two More Companies, To Be CEO There As Well			</a>
		</h3>
		<div><p><span><a href="https://doublespend.io/2015/03/24/mosquito-borne-diseases-has-threaten-world/" title="9:57 am" rel="bookmark"><i></i> <time datetime="2015-03-24T09:57:18+00:00">March 24, 2015</time><time datetime="2020-10-31T05:57:52+00:00">October 31, 2020</time></a></span>
		<span>
			<span>
				<i></i>
				<a href="https://doublespend.io/author/p2pai/" title="p2pai">
					p2pai				</a>
			</span>
		</span>

					<span>
				<i></i><a href="https://doublespend.io/2015/03/24/mosquito-borne-diseases-has-threaten-world/#respond">0</a>			</span>
		
		</p></div>
									</div>

			</div>
			</div></section>			</div>
		</div>

		

	</div>

		</div><!-- .inner-wrap -->
				</div></div>]]>
            </description>
            <link>http://doublespend.io/index.php</link>
            <guid isPermaLink="false">hacker-news-small-sites-24948746</guid>
            <pubDate>Sat, 31 Oct 2020 02:43:22 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Thread-per-Core Buffer Management for a Modern Kafka-API Storage System]]>
            </title>
            <description>
<![CDATA[
Score 10 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24947251">thread link</a>) | @fpina
<br/>
October 30, 2020 | https://vectorized.io/tpc-buffers/ | <a href="https://web.archive.org/web/*/https://vectorized.io/tpc-buffers/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><div><div><div><main><section><p><a href="https://vectorized.io/redpanda-raison-detre">As I have previously observed</a>, software does not run on category theory, it runs on superscalar CPUs with wide, multi-channel GB/s memory units and NVMe SSD access times in the order of 10-100‚Äôs of microseconds. The reason some software written a decade ago - on a different hardware platform - feels slow is because it fails to exploit the advances in modern hardware.</p>
<p>The new bottleneck in storage systems is the CPU. SSD devices are 100-1000x faster than spinning disks and are 10x cheaper today[1] than they were a decade ago, from $2,500 down to $200 per Terabyte. Networks have 100x higher throughput in public clouds from 1Gbps to 100Gbps.</p>
<p>Although computers did, in fact, get faster, single-core speeds remain roughly the same. The reason being that CPU frequency has a cubic dependency on power consumption, and we‚Äôve hit a wall. Instruction level parallelism, prefetching, speculative execution, branch prediction, deep hierarchy of data caches and instruction caches, etc, have contributed to programs <em>feeling</em> faster when you interact with them, but in the datacenter, the material improvements have come from the rise in core count. While the instructions per clock are 3x higher than a decade ago, core count is up 20x.</p>
<p>This is all to say that the rise of readily available, many-core systems necessitates a different approach for building infrastructure. Case in point[9]: in order to take full advantage of 96 vCPUs on a i3en.metal on AWS, you‚Äôll need to find a way to exploit sustained CPU clock speed of 3.1 GHz, 60 TB of total NVMe instance storage, 768 GiB of memory and NVMe devices capable of delivering up to 2 million random IOPS at 4 KB block sizes. This kind of beast necessitates a new kind of storage engine and threading model that leverages these hardware advances.</p>
<p><a href="https://vectorized.io/tpc-buffers/vectorized.io/redpanda">Redpanda</a> - a Kafka-API compatible system for mission critical workloads[3] - addresses all of these issues. It uses a thread-per-core architecture with Structured Message Passing (SMP) to communicate between these pinned threads. Threading is a foundational decision for any application, whether you are using a thread-pool, pinned threads with a network of Single Producer Single Consumer SPSC[7] queues, or any other of the advanced Safe Memory Reclamation (SMR) techniques, threading is your ring-0, the true kernel of your application. It tells you what your sensitivity is for blocking - which for Redpanda is less than 500 microseconds - otherwise, Seastar‚Äôs[4] reactor will print a stack trace warning you of the blocking since it effectively injects latency on the network poller.</p>
<p>Once you have decided on your threading model, the next step is your memory model and ultimately, for storage engines, your buffer management. In this post, we‚Äôll cover the perils of buffer management in a thread-per-core environment and describe <code>iobuf</code>, our solution for a 0-copy memory management in the world of Seastar.</p>
<h2 id="Request-Flow-Architecture">Request Flow Architecture<a href="#Request-Flow-Architecture" aria-label="Request Flow Architecture permalink"></a></h2>
<p>As mentioned earlier, Redpanda uses a <em>single</em> pinned thread per core architecture to do everything. Network polling, submitting async IO to the kernel, reaping events, triggering timers, scheduling compute tasks, etc. Structurally, it means nothing can block for longer than 500 microseconds, or you‚Äôll be introducing latency in other parts of your stack. This is an incredibly strict programming paradigm, but this opinionated idea forces a truly asynchronous system, whether you like it or not as the programmer.</p>
<p><img src="https://vectorized.io/31d1a730c507b605e6c1ebea60eb1e56/flow.svg" alt="Kafka request flow">
<small>
Figure 1: request flow architecture. Core-0 accepts the connection from the Kafka Java client and becomes the source core. After the request goes through the metadata cache(valid request) it filters through the partition router which decides to send the request to core-1, the destination core. Core-1 then accepts the write through the Raft-log interface and saves it to disk.
</small></p>
<p>The challenge in a TpC (thread-per-core) architecture[8] is that all communication between cores is explicit. This muscles the programmer into implementing algorithms that favor core-locality (d-cache, i-cache) over the straightforward multi-threaded implementations via mutexes. This imperative has to be co-designed with the asynchronicity of a <strong>future&lt;&gt;</strong>-based implementation.</p>
<p>For our Kafka-API implementation as shown in Figure 1, we explicitly trade memory usage to reduce latency and increase throughput by materializing key components. The metadata Cache is materialized on every core since every request has to know if the partition exists, and that that particular machine is, in fact, the leader of the partition. The Partition Router maintains a map of which logical core actually owns the underlying Kafka partition on the machine. Other things like Access Control Lists (ACLs) are deferred until the request reaches the destination core since they can get unwieldy in memory footprint.  We have no hard and fast rule of what we materialize on every core vs. what is deferred for the destination core, and it‚Äôs often a function of memory (smaller data structures are good candidates for broadcast), computation (how much time is spent deciding) and frequency of access (very likely operations tend to get materialized on every core).</p>
<p>One question remaining is how, exactly, does memory management work in a TpC architecture? How does data actually travel from L-core-0 to L-core-66 safely using a network of SPSC queues within a fully asynchronous execution model where things can suspend at any point in time?</p>
<h2 id="struct-iobuf--">struct iobuf { };<a href="#struct-iobuf--" aria-label="struct iobuf   permalink"></a></h2>
<h3 id="Redpandas-0-copy-buffer-management-for-TpC">Redpanda‚Äôs 0-copy buffer management for TpC<a href="#Redpandas-0-copy-buffer-management-for-TpC" aria-label="Redpandas 0 copy buffer management for TpC permalink"></a></h3>
<p>To understand <strong>iobuf</strong>, we need to understand the actual memory constraints of Seastar, our TpC framework. During program bootstrap, Seastar allocates the full memory of the computer and splits it evenly across all the cores. It consults the hardware to understand what memory belongs to each particular core, reducing inter-core traffic to main memory.</p>
<p><img src="https://vectorized.io/efa273909c5b695bf7f978f77b32c12b/seastar_model.svg" alt="Seastar mental model">
<small>
Figure 2: Copy from alexgallego.org (<a href="https://www.alexgallego.org/concurrency/smf/2017/12/16/future.html" target="_self" rel="nofollow">https://www.alexgallego.org/concurrency/smf/2017/12/16/future.html</a>) Seastar threading model. Seastar uses a network of SPS queues to send messages to neighboring cores. Similar to other message passing or actor models like Erlang, Orleans and Pony, once a function is futurized, transitive functions too will become futurized. Both approaches, however, are intrinsically safe. The programmer worries about correctness and construction while the frameworks worry about efficient execution. Counter to general wisdom, it is actually faster and more scalable than the synchronous approach. While the machine does more work, it is executing your code simultaneously. This simultaneity is the key to finishing work sooner.
</small></p>
<p>As Figure 2 suggests, memory allocated on core-0, <em>must</em> be deallocated on core-0. However, there is no way to guarantee that a Java or Go client connecting to Redpanda will actually communicate with the exact core that owns the data.</p>
<p>At its core, an iobuf is a ref-counted, fragmented-buffer-chain with deferred deletes that allows Redpanda to simply share a view of a remote core‚Äôs parsed messages as the fragments come in, without incurring a copy overhead.</p>
<p><img src="https://vectorized.io/6df6fc00e05201d068dc5d03e080606a/iobuf.svg" alt="iobuf architecture"></p>
<p>The fragmented buffers abstraction is not new. The linux kernel has <strong>sk_buff</strong>[5] and the freebsd kernel has an <strong>mbuf</strong>[6] which are roughly similar. The additional extension of an iobuf is that it works in the TCP model leveraging Seastar‚Äôs network of SPSC queues to have proper deletes in addition to being able to share sub-views arbitrarily, tailored for a storage-like workload.</p>
<p>Removing the C++ templates, allocators, pooling, pointer caching, etc, one could think of an iobuf as being equivalent to:</p>
<div data-language="cpp"><pre><code><span>struct</span> <span>fragment</span> <span>{</span>
    <span>void</span> <span>*</span> data<span>;</span>
    size_t ref_count<span>;</span>
    size_t capacity<span>;</span>
    size_t size<span>;</span>

    fragment<span>*</span> next<span>;</span>  
    fragment<span>*</span> prev<span>;</span>
<span>}</span>
<span>struct</span> <span>iobuf</span> <span>{</span>
    fragment<span>*</span> head<span>;</span>
<span>}</span><span>;</span></code></pre></div>
<p>The origins of iobuf are rooted in one of our central product tenets for building a Kafka¬Æ replacement for mission critical systems - giving users 10x lower tail latencies for most workloads. Aside from a thread-per-core architecture, the memory management would have been our second bottleneck if not designed from the ground up for latency. On long running storage systems, memory fragmentation is a real problem, and one that is eventually either met with a proper solution (iobuf), stalls or an OOM.</p>
<p>Like its predecessors skbuff and mbuff, iobuf allows us to optimize and train our memory allocator with predictable memory sizes. Here is our iobuf allocation table logic:</p>
<div data-language="cpp"><pre><code><span>struct</span> <span>io_allocation_size</span> <span>{</span>
   <span>static</span> <span>constexpr</span> size_t max_chunk_size <span>=</span> <span>128</span> <span>*</span> <span>1024</span><span>;</span>
   <span>static</span> <span>constexpr</span> size_t default_chunk_size <span>=</span> <span>512</span><span>;</span>

   
   
   
   
   
   
   <span>static</span> <span>constexpr</span> std<span>::</span>array<span>&lt;</span><span>uint32_t</span><span>,</span> <span>15</span><span>&gt;</span> alloc_table <span>=</span>
     
     <span>{</span><span>{</span><span>512</span><span>,</span>
       <span>768</span><span>,</span>
       <span>1152</span><span>,</span>
       <span>1728</span><span>,</span>
       <span>2592</span><span>,</span>
       <span>3888</span><span>,</span>
       <span>5832</span><span>,</span>
       <span>8748</span><span>,</span>
       <span>13122</span><span>,</span>
       <span>19683</span><span>,</span>
       <span>29525</span><span>,</span>
       <span>44288</span><span>,</span>
       <span>66432</span><span>,</span>
       <span>99648</span><span>,</span>
       <span>131072</span><span>}</span><span>}</span><span>;</span>

   <span>static</span> size_t <span>next_allocation_size</span><span>(</span>size_t data_size<span>)</span><span>;</span>
<span>}</span><span>;</span>   </code></pre></div>
<p>Predictability, memory pooling, fixed sizes, size capping, fragmented traversal, etc, are all known techniques to reduce latency. Asking for contiguous and variably sized memory could cause the allocator to compact all of the arenas and reshuffle a lot of bytes for what could be a short-lived request, not only injecting latency on the request path, but for the entire system since we have exactly one thread performing all operations.</p>
<p>Hardware is the platform. When we ask the network layer to give us exactly 11225 bytes in contiguous memory, we are simply asking the allocator to linearize an empty buffer of that exact size and for the network layer to copy bytes as the fragments come from the hardware into the destination buffer. There is ultimately no free lunch when it comes to trying to squeeze every single ounce of performance of your hardware and often it requires re-architecting from zero.</p>
<p>If you made it this far, I encourage you to sign up for our <a href="https://vectorized.io/slack" target="_self" rel="nofollow">Community Slack (here!)</a> and ask us questions directly or engage with us on twitter via <a href="https://twitter.com/vectorizedio" target="_self" rel="nofollow">@vectorize‚Ä¶</a></p></section></main></div></div></div></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://vectorized.io/tpc-buffers/">https://vectorized.io/tpc-buffers/</a></em></p>]]>
            </description>
            <link>https://vectorized.io/tpc-buffers/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24947251</guid>
            <pubDate>Fri, 30 Oct 2020 21:56:02 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Complexity in Operating Systems]]>
            </title>
            <description>
<![CDATA[
Score 23 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24945856">thread link</a>) | @fcambus
<br/>
October 30, 2020 | https://x86.lol/generic/2020/10/30/complexity-in-operating-systems.html | <a href="https://web.archive.org/web/*/https://x86.lol/generic/2020/10/30/complexity-in-operating-systems.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>Over the last years I‚Äôve been working on very different operating
systems. Operating systems are usually incredibly complex beasts. I
think there are mainly three drivers of this complexity. Surprisingly
enough, neither of these is having to deal with hardware.</p>

<p>The first one is resource <strong>discovery</strong>, i.e. figuring out how the
computer the OS is running on actually looks like. On x86, this
involves parsing countless bitfields, tables, executing byte code
provided by the firmware, probing individual features, etc. The most
painful example of this I‚Äôve seen so far is figuring out which
interrupt a particular PCI interrupt line is routed to. It‚Äôs worth a
set of posts, but until then, feel free to checkout <a href="https://habr.com/en/post/501912/">this
description</a>. (If it‚Äôs down, it‚Äôs
also cached by
<a href="https://webcache.googleusercontent.com/search?q=cache:CXZUV61m7hwJ:https://habr.com/en/post/501912/+&amp;cd=1&amp;hl=en&amp;ct=clnk">Google</a>.)</p>

<p>The second issue is <strong>resource management</strong>. Essentially, how do you
hand out and eventually reclaim all the resources you discovered. For
some workloads performance matters here, so this code is usually
written with speed in mind.</p>

<p>The third reason is that at compile time the <strong>workload</strong> is
unclear. So the kernel has to assume the worst. It must be ready to
start a couple of hundred VMs or create a thousand TCP sockets in a
blink of an eye, because there is no way to know what‚Äôs going to
happen or what the actual requirements are.</p>

<p>A fun exercise is to checkout the <a href="https://elixir.bootlin.com/linux/v5.9.1/source/virt/kvm/kvm_main.c#L739">KVM code for creating
VMs</a>. Try
to follow
<a href="https://elixir.bootlin.com/linux/v5.9.1/source/arch/x86/kvm/x86.c#L9904">the</a>
<a href="https://elixir.bootlin.com/linux/v5.9.1/source/arch/x86/kvm/vmx/vmx.c#L7059">code</a>
to where the actual VM is created in hardware. <em>Spoiler:</em> There is
none. It‚Äôs all figuring out what the platform can do and then setting
up a bunch of spinlock, mutexes, lists, arrays, structs, ‚Ä¶</p>

<p>I don‚Äôt want to pick on KVM in particular. I think it‚Äôs pretty ok as
far as Linux kernel code goes. Operating System kernel code is mostly
like this: A lot of really mind numbing platform discovery and
resource management code written for speed assuming the worst case
requirements in a language that doesn‚Äôt do parsing, resource
management or concurrency well (among other things).</p>

<p>People take this all for granted. But when I look around, I see many
systems that don‚Äôt need this complexity and where it is only a safety
and security burden. Consider most appliance-type products, e.g. a
Wi-Fi router. Or a system that runs one service on a cloud VM. You
know everything in advance!</p>

<p>If you read until this point, you are probably asking yourself, where
I am going with this. If you think <a href="https://en.wikipedia.org/wiki/Separation_kernel">separation
kernel</a>, you are
right. My rough plan to write a couple of more posts to flesh out the
idea of doing all the complicated OS parts at compile time and how
this results in an incredibly simple, secure, and efficient system at
runtime. There will be <a href="https://riscv.org/">RISC-V</a>,
<a href="https://www.haskell.org/">Haskell</a>, <a href="https://dhall-lang.org/">Dhall</a>,
and <a href="https://www.rust-lang.org/">Rust</a> content.</p>

<p>Stay tuned.</p>

  </div>
</article>

      </div>
    </div></div>]]>
            </description>
            <link>https://x86.lol/generic/2020/10/30/complexity-in-operating-systems.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24945856</guid>
            <pubDate>Fri, 30 Oct 2020 19:20:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Scientists Take Over: George Orwell Reviews ‚ÄúThat Hideous Strength‚Äù (1945)]]>
            </title>
            <description>
<![CDATA[
Score 89 | Comments 55 (<a href="https://news.ycombinator.com/item?id=24945608">thread link</a>) | @benbreen
<br/>
October 30, 2020 | http://lewisiana.nl/orwell/index.htm | <a href="https://web.archive.org/web/*/http://lewisiana.nl/orwell/index.htm">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>







<p><b><span lang="EN-US">George
Orwell‚Äôs review of C. S. Lewis, <i>That
Hideous Strength</i> (1945)<o:p></o:p></span></b></p>



<p><span lang="EN-US">THE SCIENTISTS TAKE OVER<o:p></o:p></span></p>

<p><b><i><span lang="EN-US">Manchester Evening News</span></i></b><b><span lang="EN-US">, 16 August 1945. </span></b><span lang="EN-US">Reprinted in <i>The Complete Works of George Orwell</i>, ed. Peter Davison,
Vol. XVII (1998), No. 2720 (first half), pp. 250‚Äì251<o:p></o:p></span></p>











<p><span lang="EN-GB">On</span><span lang="EN-US"> the whole, novels are better when there are no
miracles in them. Still, it is possible to think of a fairly large number of worth-while
books in which ghosts, magic, second-sight, angels, mermaids, and what-not play
a part.<o:p></o:p></span></p>

<p><span lang="EN-US">Mr. C. S. Lewis‚Äôs ‚ÄúThat Hideous Strength‚Äù can be included in their number ‚Äì
though, curiously enough, it would probably have been a better book if the
magical element had been left out. For in essence it is a crime story, and the
miraculous happenings, though they grow more frequent towards the end, are not
integral to it.<o:p></o:p></span></p>

<p><span lang="EN-US">In general outline, and to some extent in atmosphere, it rather resembles
G. K. Chesterton‚Äôs ‚ÄúThe Man Who Was Thursday.‚Äù<o:p></o:p></span></p>

<p><span lang="EN-US">Mr. Lewis probably owes something to Chesterton as a writer, and certainly
shares his horror of modern machine <span>civilisation</span> (the
title of the book, by the way, is taken from a poem about the Tower of Babel)
and his reliance on the ‚Äúeternal verities‚Äù of the Christian Church, as against
scientific materialism or nihilism.<o:p></o:p></span></p>

<p><span lang="EN-US">His book describes the struggle of a little group of sane people against a
nightmare that nearly conquers the world. A company of mad scientists ‚Äì or,
perhaps, they are not mad, but have merely destroyed in themselves all human
feeling, all notion of good and evil ‚Äì are plotting to conquer Britain, then
the whole planet, and then other planets, until they have brought the universe
under their control.<o:p></o:p></span></p>

<p><span lang="EN-US">All superfluous life is to be wiped out, all natural forces tamed, the
common people are to be used as slaves and vivisection subjects by the ruling
caste of scientists, who even see their way to conferring immortal life upon
themselves. Man, in short, is to storm the heavens and overthrow the gods, or
even to become a god himself.<o:p></o:p></span></p>

<p><span lang="EN-US">There is nothing outrageously improbable in such a conspiracy. Indeed, at a
moment when a single atomic bomb ‚Äì of a type already pronounced ‚Äúobsolete‚Äù ‚Äì
has just blown probably three hundred thousand people to fragments, it sounds
all too topical. Plenty of people in our age do entertain the monstrous dreams
of power that Mr. Lewis attributes to his characters, and we are within sight
of the time when such dreams will be <span>realisable</span>.<o:p></o:p></span></p>

<p><span lang="EN-US">His description of the N.I.C.E. (National Institute of Co-ordinated
Experiments), with its world-wide ramifications, its private army, its secret
torture chambers, and its inner ring of adepts ruled over by a mysterious
personage known as The Head, is as exciting as any detective story.<o:p></o:p></span></p>

<p><span lang="EN-US">It would be a very hardened reader who would not experience a thrill on
learning that The Head is actually ‚Äì however, that would be giving the game
away.<o:p></o:p></span></p>

<p><span lang="EN-US">One could recommend this book unreservedly if Mr. Lewis had succeeded in keeping
it all on a single level. Unfortunately, the supernatural keeps breaking in,
and it does so in rather confusing, undisciplined ways. The scientists are <span>endeavouring</span>, among other things, to get hold of the body
of the ancient Celtic magician Merlin, who has been buried ‚Äì not dead, but in a
trance ‚Äì for the last 1,500 years, in hopes of learning from him the secrets of
pre-Christian magic.<o:p></o:p></span></p>

<p><span lang="EN-US">They are frustrated by a character who is only doubtfully a human being,
having spent part of his time on another planet where he has been gifted with
eternal youth. Then there is a woman with second sight, one or two ghosts, and
various superhuman visitors from outer space, some of them with rather tiresome
names which derive from earlier books of Mr. Lewis‚Äôs. The book ends in a way
that is so preposterous that it does not even succeed in being horrible in
spite of much bloodshed.<o:p></o:p></span></p>

<p><span lang="EN-US">Much is made of the fact that the scientists are actually in touch with
evil spirits, although this fact is known only to the inmost circle. Mr. Lewis
appears to believe in the existence of such spirits, and of benevolent ones as
well. He is entitled to his beliefs, but they weaken his story, not only
because they offend the average reader‚Äôs sense of probability but because in
effect they decide the issue in advance. When one is told that God and the
Devil are in conflict one always knows which side is going to win. The whole
drama of the struggle against evil lies in the fact that one does not have
supernatural aid. However, by the standard of the novels appearing nowadays
this is a book worth reading.<o:p></o:p></span></p>







</div></div>]]>
            </description>
            <link>http://lewisiana.nl/orwell/index.htm</link>
            <guid isPermaLink="false">hacker-news-small-sites-24945608</guid>
            <pubDate>Fri, 30 Oct 2020 18:55:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Neighbourly Solution to the 'X Is Deprecated? ' Conundrum]]>
            </title>
            <description>
<![CDATA[
Score 58 | Comments 33 (<a href="https://news.ycombinator.com/item?id=24945538">thread link</a>) | @zdw
<br/>
October 30, 2020 | https://www.divergent-desktop.org/blog/2020/10/29/improving-x/ | <a href="https://web.archive.org/web/*/https://www.divergent-desktop.org/blog/2020/10/29/improving-x/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      
      <div>
        <article lang="en">
          
          <p>Recent posts about the state of Xorg and its future has been stirring the
internets as of late and, as almost always, it is best to stay clear of the
comments sections. The more insightful post is <a href="https://ajaxnwnk.blogspot.com/2020/10/on-abandoning-x-server.html">On Abandoning the X Server</a>.</p>

<p>There are a few details in it that should be emphasised before we move on.</p>

<div><div><pre><blockquote>Though the code happens to implement an unfortunate
specification, the code itself is quite well structured, easy to hack on, and
not far off from being easily embeddable.</blockquote></pre></div></div>

<p>From my own experiences with Xorg internals, I agree completely. A whole lot
of the code there is noticably better than corresponding paths in certain
Wayland compositors. There is more thought; domain expertise; engineering and
pure elbow grease behind it than you might have been led to believe -- if you
have only listened in to the collective moans in various discussion groups.</p>

<div><div><pre><blockquote>So is Xorg abandoned? To the extent that means using it to actually
control the display, and not just keep X apps running, I'd say yes. But xserver
is more than xfree86. Xwayland, Xwin, Xephyr, Xvnc, Xvfb: these are projects
with real value that we should not give up. A better way to say it is that we
can finally abandon xfree86.</blockquote></pre></div></div>

<p>There are some nuances here that many will miss as it requires you to know
something about the architecture of the X server. The main thing is to not
conflate ‚Äòxfree86‚Äô with rest of what you think of as X, hence why the blog post
separates out XFree86-the-project from 'xfree86 the hardware driver'. It is
unfortunate that the predecessor to Xorg was also called XFree86. Naming
things is hard and all that.</p>

<p>If you look at the xorg code, recommended reading for many who can
understand the language, you will see that the device-dependent code used to
drive displays (hw/ in the source tree) has a few backends, mentioned above.
Venture into the hw/xfree86 part and you will hopefully see why Adam Jackson
and others deserve the software engineering equivalent of a Purple Heart for
their service to your desktop, possibly alongside anyone that ever had to work
on ASN.1.</p>

<p>
<i>Rightfully throw Xorg-xfree86 into the fires of Mt. Doom. If you
still need Xorg-xfree86 to be your graphics card driver, you have bigger things
to worry about, such as plain old bitrot.</i></p>

<p>Is there something else? Yes. I‚Äôm not going to say <a href="https://arcan-fe.com/">Arcan</a> ‚Äì it is <i>very</i> likely that there
is only a small percentage of the stakeholders we would ever get along with.
That is fine. The goals and agenda reach much further than many will ever care
to travel -- unless you really want to push the boundaries of computing, or you
are actively targeted by nefarious individuals; our funding is not based on
popularity or mass adoption, but rather sticking to the shadows.</p>

<h2>The Compromise</h2>
<p>So what can we do instead? The current Wayland maintainer has
<a href="https://github.com/emersion/libliftoff">libliftoff</a> for smoothing
over the rather ‚Äòunergonomic‚Äô APIs that are used to get the open, modern,
graphics stack up and running. <em>Write a DDX backend that uses it.
hw/liftoff!</em></p>

<p>This will get liftoff the lift-off and mileage it needs to become good
enough for Wayland compositors to use as their default, and as a slightly more
polite migration path in order for NVIDIA to be less contemptible in the
unlikely event that they are one day struck by some capitalist version of
religious insight. Thus, it improves parts of the Wayland compositor situation
that is, politely put, chaotic.</p>

<p>Those that don‚Äôt care about what Wayland tries to achieve can stay with X and
not worry about their graphics breaking after a kernel update, or well, more
than usual -- Linux gotta Linux. NVIDIA blob users can continue down that path
and stop bothering Wayland developers, yet still run their Steam games without
submitting to open source ideals.</p>

<p>Next steps. This is for the window managers. Take libarcan-shmif-server and
embed as a module in Xorg, fork it off even. If you are unaware, this is the
IPC system part of Arcan. Both the server and the client sides of it are fairly
trivial to use and are written with developers, not toolkits, in mind.</p>

<p>It is beyond feature parity with the rest of X, but has a comparable view on
capabilities and division of responsibility. You will only get a fraction of
the benefits of Arcan as a display server, but without other dependencies or
friction - many of the problems that X clients are plagued with can be worked
around while leaving the X11 protocol and its family of extensions to rest.
Hacks relying on facilities like uinput can be put down.</p>

<p>The security around these clients will be much tighter and they can be
gradually tuned to the specification of the developer. It lets XFCE, AwesomeWM,
WindowMaker and the tens to hundreds of others WM projects to continue to
improve their respective ecosystems, specialized widgets and other tools,
rather than to burn resources they don't have to rewrite themselves with bugs
that won't be discovered or fixed in time to matter.</p>

<p>It also gives the conservative side of BSDs a portable way of improving
their use of the graphics stack without reworking fundamentals they care little
about. The OpenBSD fork 'Xenocara' can be dropped.</p>

<p>This way, the heritage is preserved and kept alive, with a band aid to live
out another decade or three. It will still work for the marginalized that have
little interest- or option- in going elsewhere. It will be less painful to
maintain and work with.</p>

<h2>The Reality</h2>
<p>Wayland only is not an option that will ever work across the board. It is
not a replacement, it is a fundamental change of principles. Stop trying to
market it as some kind of inevitable transition. There are strong differences
that will not get smoothed over regardless of how many 'protocols' you define;
<i>Wayland is Policy over Mechanism, X11 is Mechanism over Policy</i>. This is
the real barrier. Not unsubstantiated claims of 'security'. It is a tectonic
shift and no matter your feelings about that, we won't all be in the same
country or continent anymore.</p>

<p>Heralding a 'Screenshot Protocol' and similar exercises as the fix that will
bridge this gap will only serve to distract from the fact that the power of all
these little tools and hacks from the crowd of X11 users comes from the
'screenshot' being just one case of <i>'give me the contents of a specific
window and all of its children'</i> or <i>'composite these windows to an
offscreen buffer and send me the results'</i> as the building blocks
available to be creative with.

</p><p>The mechanism approach provides a huge set of possibilities and opens up for
experimentation and 'works for me' kind of hacks. The downside is that it
surrenders control on the server side and are much harder to make robust.</p>

<p>The policy aproach will only do what both sides agree to, and <i>that
	agreement has the final say</i>. If you violate this contract, you are to be
blamed. However, that contract has to be bikeshedded to near state-space
exhaustion and carefully screened for conflicts as more contracts are added to
the pile.</p>

<p>The current trajectory is Gnomelanders and Swaylanders and Kwinners and so
on continuing to lock down singular uses cases and with political gunplay try
to push that as the one solution that will convince a few more bread crumbs.
The hand that controls the toolkit will eventually just decide. <i> This will
erode the strength of the policy contract</i>.</p>

<p>This has already led to a substantial amount of dissonance -- it turns out
that the 'opting-server-side decoration protocol' in the mix had implications
for how to interpret the 'subsurface protocol' and the 'redshift gamma
protocol' will clash with whatever 'color management protocol' that materialize
and so on. To get a feel for how involved such policies become, just <a href="https://github.com/wayland-project/wayland-protocols/blob/3a74660e94d85fde24f504cc9d4375d42192e84a/stable/xdg-shell/xdg-shell.xml#L402">
read the specification</a> and you will see why no implementation arrives at
the same calculation.</p>

<p>Take the perspective of a client developer chasing after the tumbleweed of
'protocols' drifting around and try to answer 'what am I supposed to implement
and use'? To me it looked like like a Picasso painting of ill-fitting- and
internally conflicted ideas. Let this continue a few cycles more and X11 will
look clean and balanced by comparison. Someone should propose a desktop icon
protocol for the sake of it, then again, someone probably already has.</p>

<h2>In Conclusion</h2>
<p>This approach will force Wayland to demonstrate its worth through the
virtues of its properties alone or by inventing actually compelling features
rather than by throwing shade on the elderly; or reimplementing the past
through rebranded and traced outlines from shadows cast by grander window
managers of yore.</p>

<p>The proposal leaves us with three well-defined paths.</p>

<ul>
<li>Wayland lets your own solipsist thiefdoms expand towards the horizon,
while trying to save embedded from the Android expanse.</li>
<li>People that have invested their hearts and souls into the X ecosystem can
continue to use their computers without fear of a kernel upgrade leaving them
with broken graphics, or a switch of display server paradigm leaving them with
an incompatible mental model of how system graphics work, and perhaps, one day,
stop whining about Wayland ruining their day and leave the devs alone.</li>
<li>Arcan lets you play with crazy ideas at a low initial cost. The ones
that might revolutionise your world or fail miserably. It will continue to
pushing things towards whatever is beyond the Twilight Zone in order to answer
profound questions such as 'what happens to productivity if your heartbeat
aligns with the blink rate of the cursor' (well that's actually be done since
forever and the RESULTS WOULD SHOCK YOU! - but it still illustrates the
point).</li>
</ul>

<p>It might even turn out so well that one of these paths will have a
fighting chance against the open desktop being further marginalised as a thin
client in the Azure clouded future; nothing more than a silhouette behind
unwashed Windows, a virtualized ghost of its former self.</p>

        </article>
	     </div>
     </div></div>]]>
            </description>
            <link>https://www.divergent-desktop.org/blog/2020/10/29/improving-x/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24945538</guid>
            <pubDate>Fri, 30 Oct 2020 18:45:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[New social media platform, Lighf, looking forward to welcoming its future users]]>
            </title>
            <description>
<![CDATA[
Score 11 | Comments 4 (<a href="https://news.ycombinator.com/item?id=24945358">thread link</a>) | @imanonymous
<br/>
October 30, 2020 | https://lighf.com/request-lighf/ | <a href="https://web.archive.org/web/*/https://lighf.com/request-lighf/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div text-align:="" center;"=""><p><span>lighf</span> doesn‚Äôt store your IP address or any other identifiable data about you. By default your layers (privacy) are to set to <em>None</em> but you can add additional layers.</p>
<p><em>Encrypted</em>, means your email address is encrypted the second you create an account and only unencrypted, with your permission, at times when you need to recover your password.√Ç&nbsp; The draw back is you won‚Äôt be able to get <span>lighf</span> updates by email, only In-App and Push (coming soon).</p>
<p>To go <em>Email-less</em> means no email address is linked to your <span>lighf</span> Account. Like the Encrypted option, you won‚Äôt receive any updates by email, only In-App and Push (coming soon). The draw back is that you won‚Äôt be able to reset your password or <span>lighf</span>Name (username) or recover your Account.</p>
<p><a title="Tap this link to close." href="#">Got It!</a></p>
</div>
</div></div>]]>
            </description>
            <link>https://lighf.com/request-lighf/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24945358</guid>
            <pubDate>Fri, 30 Oct 2020 18:25:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Use Scala in your early stage startup]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24945145">thread link</a>) | @vlehuger
<br/>
October 30, 2020 | https://www.actiondesk.io/blog/why-use-scala | <a href="https://web.archive.org/web/*/https://www.actiondesk.io/blog/why-use-scala">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p>Why use Scala? We listed the advantages of Scala we see in our startup. See whether the benefits of Scala could help you too.</p><p>1. Focus on what matters: Expressiveness + High order functions</p><p>2. Get less bugs: Statically typed + Clean error management by design</p><p>3. Benefit from JVM ecosystem: Performant libraries + Good tooling environment</p><p>4. Attract talents</p><p>‚Äç</p><p>‚Äç</p><p>Scala is a JVM based language. It‚Äôs flexible, you can write code in both imperative or functional styles. Scala is a pragmatic language that mixes the best of functional and object-oriented programming. It basically means that you can create classes to encapsulate state and methods but you can‚Äôt mutate them.</p><p>‚Äç</p><p>‚Äç</p><p>The main power of Scala is to let the developers focus on what‚Äôs most important.</p><p>‚Äç</p><h2><strong>Expressiveness</strong></h2><p>Running on the JVM, Scala is as powerful as Java but it is way clearer and more concise. It makes the code easier (and faster) to write and read!</p><p>For example, look at how we create a list of string in Java vs Scala:</p><h4><strong>Java:</strong></h4><figure id="w-node-069225ecd5f7-d0a68507"><p><img src="https://uploads-ssl.webflow.com/5de53075747d4101db8251cb/5f8df66d44ec7c4592663ddc_20201019%20Scala%20Article_1.png" loading="lazy" alt="how we create a list of string in Java"></p></figure><h4><strong>Scala:</strong></h4><figure id="w-node-713e2fe2bca1-d0a68507"><p><img src="https://uploads-ssl.webflow.com/5de53075747d4101db8251cb/5f8df6bca2fdb8e00bb006a6_20201019%20Scala%20Article_2.png" loading="lazy" alt="how we create a list of string in Scala"></p></figure><h2><strong>High order function</strong></h2><p>High order functions are functions that abstract some control structure like a loop to update every element of an array.</p><p>They‚Äôre the functions we use most in Scala. They work by taking a function as a parameter. Used with anonymous functions, they‚Äôre perfect to focus on implementing the business logic instead of juggling with indexes to increment and stop conditions.</p><p>Look at how we can convert this list of string into a list of integers:</p><figure id="w-node-b9f12ec503cb-d0a68507"><p><img src="https://uploads-ssl.webflow.com/5de53075747d4101db8251cb/5f8df77fa26c394e0b5e18b1_20201019%20Scala%20Article_3.png" loading="lazy" alt="how to convert a list of string into a list of ints in Scala"></p></figure><p>‚Äç</p><p>We can also compute the sum of it by using the high-order function fold:</p><figure id="w-node-dc33ae72b25f-d0a68507"><p><img src="https://uploads-ssl.webflow.com/5de53075747d4101db8251cb/5f8df7b68e690322a1f2341e_20201019%20Scala%20Article_4.png" loading="lazy" alt="How to compute the sum by using the high-order function fold in Scala"></p></figure><p>‚Äç</p><p>‚Äç</p><p>‚Äç</p><h2><strong>Statically typed</strong></h2><p>By checking the type during the compilation, Scala type system reduces considerably the amount of bugs caused by type errors.</p><p>Type inference allows typing without being too verbose:</p><p>def square(x: Int) = x * x&nbsp;</p><p>Here the type of square (Int) is inferred from the * operator which multiplies an Int by an Int giving an Int in output.</p><p>And thanks to pattern matching, we can still write flexible code:</p><figure id="w-node-5d4c922f320c-d0a68507"><p><img src="https://uploads-ssl.webflow.com/5de53075747d4101db8251cb/5f8df82d19cead6575ed2edd_20201019%20Scala%20Article_5.png" loading="lazy" alt="How to decompose an object to pattern match on its attributes, add pattern guards, pattern match a regex or the elements of a List in Scala"></p></figure><p>Here we can even decompose an object to pattern match on its attributes. We can even add pattern guards (if condition in a case), pattern match a regex or the elements of a List.</p><p>‚Äç</p><h2><strong>Clean error management by design</strong></h2><h3><strong>Option and Either</strong></h3><p>There are some useful standard types in Scala to manage errors. The most commonly used are Option and Either. An Option can either be a class Some containing a value or a None object. So we can associate a valid result to Some and an error to None. Let's write a function to safely update a String to Int.</p><figure id="w-node-60c03b54f3c2-d0a68507"><p><img src="https://uploads-ssl.webflow.com/5de53075747d4101db8251cb/5f8df92687207e98effd9699_20201019%20Scala%20Article_6.png" loading="lazy" alt="How to to safely update a String to Int in Scala"></p></figure><p>‚Äç</p><p>And if we need an error message we can use the Either class that will return a Right containing the value or a Left with an error type.</p><figure id="w-node-b021a222808e-d0a68507"><p><img src="https://uploads-ssl.webflow.com/5de53075747d4101db8251cb/5f8dfb98068c68637d53699d_20201019%20Scala%20Article_7.png" loading="lazy" alt="If we need an error message we can use the Either class that will return a Right containing the value or a Left with an error type in Scala"></p></figure><p>‚Äç</p><p>Try is also a great type to manage error, especially to encapsulate every call to Java functions that can throw errors.</p><p>‚Äç</p><h3><strong>Combine them with for-comprehension</strong></h3><p>Option, Either or Try allow us to return a result or an error and not throw it to whatever will catch it. And thanks to a special Scala control structure, the ‚Äúfor-comprehension‚Äù, we can easily combine them to return the first error encountered.</p><figure id="w-node-c336c52f22b2-d0a68507"><p><img src="https://uploads-ssl.webflow.com/5de53075747d4101db8251cb/5f8df9f519cead4e10ed589d_20201019%20Scala%20Article_8.png" loading="lazy" alt="The Scala control structure ‚Äúfor-comprehension‚Äù allows to easily combine Option, Either and Try to return the first error encountered."></p></figure><p>dividend on the left part of dividend &lt;- convertStringToInt(dividendStr) is the value in the Right of the convertStringToInt(dividendStr) result. If convertStringToInt(dividendStr) returns an error, it will stop immediately and return that error in a Left for safeStringDivision.</p><p>‚Äç</p><h3><strong>Perfect to handle asynchronous code</strong></h3><p>‚Äúfor-comprehension‚Äù are also amazing to work with asynchronous code like HTTP calls encapsulated in a Future. We can combine them and return an error for the first error we encounter.</p><figure id="w-node-6dcad4d139cc-d0a68507"><p><img src="https://uploads-ssl.webflow.com/5de53075747d4101db8251cb/5f8dfab1a0c47639e33ad40f_20201019%20Scala%20Article_9.png" loading="lazy" alt="In Scala, for-comprehension are also amazing to work with asynchronous code like HTTP calls encapsulate in a Future."></p></figure><p>‚Äç</p><p>We can even combine Future with other error types like Either by using functional libraries like <a href="https://typelevel.org/cats/datatypes/eithert.html" target="_blank">cats</a>.</p><p>‚Äç</p><p>‚Äç</p><p>‚Äç</p><h2><strong>JVM allows to use powerful java libraries</strong></h2><p>For example we use db connectors, libraries to manage timestamps, logging &amp; monitoring clients and more!</p><p>‚Äç</p><h2><strong>Good tooling environment</strong></h2><p>There is a great IDE with Intellij Idea. The community also built a very efficient alternative Metals, a plugin that can transform your VS Code in Scala IDE.</p><p>Another useful tool we use is sbt-docker. It allows you to simply build a docker container embedding your application.</p><p>‚Äç</p><p>Such powerful language attracts skilled engineers who are curious and keen to test new tools, who have the willingness to discover new paradigms, new perspectives to see the world of programming... And this is the perfect mindset to join a startup as Engineer 1 to 10!</p><p>By the way, <a href="https://angel.co/company/actiondesk/jobs" target="_blank">we‚Äôre hiring</a> if you want to join us at <a href="http://actiondesk.io/" target="_blank">Actiondesk</a>.</p><p>‚Äç</p></div></div></div>]]>
            </description>
            <link>https://www.actiondesk.io/blog/why-use-scala</link>
            <guid isPermaLink="false">hacker-news-small-sites-24945145</guid>
            <pubDate>Fri, 30 Oct 2020 18:07:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Recovering Lost Roam Notes]]>
            </title>
            <description>
<![CDATA[
Score 20 | Comments 12 (<a href="https://news.ycombinator.com/item?id=24944574">thread link</a>) | @jchen42
<br/>
October 30, 2020 | https://jeffchen.dev/posts/Recovering-Lost-Roam-Notes/ | <a href="https://web.archive.org/web/*/https://jeffchen.dev/posts/Recovering-Lost-Roam-Notes/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>This post dives deep into a scary data loss scenario - we'll cover identifying the data loss, investigating the root cause, and finally recovering the data.</p>
<p><strong>This bug affected Readwise users who exported their highlights (both manually &amp; automatically) to Roam on 10/27. If you are one of those users, you should contact Roam support &amp; use <a href="https://github.com/jchen1/roam-restore" target="_blank" rel="nofollow noopener noreferrer">my recovery code</a> ASAP!</strong></p>
<!-- excerpt -->
<h2>Background</h2>
<p><a href="https://roamresearch.com/" target="_blank" rel="nofollow noopener noreferrer">Roam</a> is a "note-taking tool for networked thought". It supports all sorts of cool things - what's relevant here is that it automatically creates a new page for every day, your Daily Notes. Recently, I started using <a href="https://readwise.io/" target="_blank" rel="nofollow noopener noreferrer">Readwise</a>, which ingests Kindle highlights and uses <a href="https://en.wikipedia.org/wiki/Spaced_repetition" target="_blank" rel="nofollow noopener noreferrer">spaced repetition</a> to help you remember what you read. Readwise has a Roam integration, which automatically adds Kindle highlights to Roam. Unfortunately, since Roam doesn't have a public API yet, Readwise's integration seems to be effectively using Selenium - clicking on elements and pasting highlights which is inherently flaky.</p>
<p>Yesterday, I woke up without my Daily Notes from the day before. Disaster! Fortunately, with the help of the Roam Slack group and Tristan from Readwise, I was able to isolate the cause of note deletion and even restore my lost data. Here's what happened:</p>
<h2>Roam architecture</h2>
<p>Roam uses <a href="https://github.com/tonsky/datascript" target="_blank" rel="nofollow noopener noreferrer">Datascript</a> for its client-side database. Like Datomic, Datascript stores data as a <code>datom</code>, defined as <code>[e a v tx]</code>, or <code>entity</code>, <code>attribute</code>, <code>value</code>, and <code>transaction-id</code> (incrementing integer). If you're interested in learning more, <a href="https://tonsky.me/blog/datascript-internals/" target="_blank" rel="nofollow noopener noreferrer">Datascript's author has an excellent overview</a>.</p>
<p>Importantly for us, Roam differs from other webapps in that it doesn't store all state and history in its backend. Instead, Roam's backend just stores a snapshotted Datascript database (updated ~daily as far as I can tell) and the list of transactions since that last snapshot. If we can download those two things before Roam's next snapshot, we have two breadcrumbs towards recovery: 1. We can find the transaction that deleted my Daily Notes page 2. We can also reconstruct our Datascript database, replaying transactions up until the point of deletion, and recover our Daily Notes from that!</p>
<h2>Capturing state</h2>
<p>Our first step is to store Roam's database snapshot and transaction list. Instead of REST API calls, Roam uses a Websocket connection to send these to its web client. This complicates things for us: instead of just saving API responses with <code>curl</code>, we need to download a <a href="https://en.wikipedia.org/wiki/HAR_%28file_format%29" target="_blank" rel="nofollow noopener noreferrer">HAR file</a>, which, fortunately for us, includes Websocket traffic with more recent Chrome versions. HAR files are just JSON archives stored in chronological order - it's easy to select just the Websocket traffic:</p>
<pre><code>(<span><span>defn</span></span> parse-har
  [harfile]
  (<span><span>let</span></span> [json (<span>json/parse-string</span> (<span><span>slurp</span></span> harfile) <span>true</span>)
        ws-messages (<span><span>-&gt;&gt;</span></span> json <span>:log</span> <span>:entries</span> (<span><span>filter</span></span> #(<span>some?</span> (<span>:_webSocketMessages</span> %))) second <span>:_webSocketMessages</span>)
        ws-data (<span><span>map</span></span> <span>:data</span> ws-messages)]
    ws-data))</code></pre>
<p>Inspecting this data more closely, it appears that Roam's websocket messages are generally JSON strings (and occasionally numbers). When a message is more than 16KB, it's split into multiple messages without wrapping - so we'll need to stitch these bigger messages together. One way to detect a non-split-message is to just try and parse it as JSON - if it's valid, we can say it's non-split. (There's an edge case we're unlikely to hit here: if the 16KB chunk just so happens to be valid JSON as well we'll be out of luck. Lucky for us, I didn't run into this!) Now, we can extend <code>parse-har</code> as follows:</p>
<pre><code>(<span><span>defn</span></span> parse-har
  [harfile]
  (<span><span>let</span></span> [json (<span>json/parse-string</span> (<span><span>slurp</span></span> harfile) <span>true</span>)
        ws-messages (<span><span>-&gt;&gt;</span></span> json <span>:log</span> <span>:entries</span> (<span><span>filter</span></span> #(<span>some?</span> (<span>:_webSocketMessages</span> %))) second <span>:_webSocketMessages</span>)
        ws-data (<span><span>map</span></span> <span>:data</span> ws-messages)
        try-parse #(<span><span>try</span></span> (<span>json/parse-string</span> % <span>true</span>)
                        (<span>catch</span> Throwable _ <span>nil</span>))
        
        
        
        ws-json (<span><span>reduce</span></span> (<span><span>fn</span></span> [{<span>:keys</span> [done partial]} next]
                          (<span><span>let</span></span> [potential-json-str (<span><span>str</span></span> partial next)]
                            (<span><span>if-let</span></span> [json (<span>try-parse</span> potential-json-str)]
                              {<span>:done</span> (<span><span>conj</span></span> done json)
                               <span>:partial</span> <span>""</span>}
                              {<span>:done</span> done
                               <span>:partial</span> potential-json-str})))
                        {<span>:done</span> [] <span>:partial</span> <span>""</span>}
                        ws-data)]
    (<span><span>assert</span></span> (<span><span>=</span></span> (<span>:partial</span> ws-json) <span>""</span>))
    (<span>:done</span> ws-json)))</code></pre>
<h2>Finding the culprit</h2>
<p>Armed with our parsed websocket messages, we can see that many of them look like transactions. One that looks particularly suspicious has a nested field named <code>tx-meta</code> with the value <code>delete-page</code>! The transaction looks something like this:</p>
<pre><code>{<span>:app-version</span> <span>"0.7.4"</span>,
 <span>:email</span> <span>"hello@jeff.yt"</span>,
 <span>:session-id</span> <span>"uuid95d98efd-c8fa-4412-87a4-e7b7201bee24"</span>,
 <span>:t</span> <span>1603947791561</span>,
 <span>:time</span> <span>1603947791542</span>,
 <span>:tx</span> <span>"[[\"^ \",\"~:block/uid\",\"ogCRjInhE\",\"~:block/string\",\"some-text-here\",\"~:edit/time\",1603947791363,\"~:edit/email\",\"hello@jeff.yt\"],[\"^ \",\"^0\",\"4CpSytRnt\",\"^1\",\"Highlights first synced by #Readwise October 28th, 2020\",\"^2\",1603947791364,\"^3\",\"hello@jeff.yt\"],[\"^ \",\"^0\",\"C-IOsE50G\",\"^1\",\"New highlights added October 28th, 2020 at 11:03 PM\",\"^2\",1603947791364,\"^3\",\"hello@jeff.yt\"],[\"~:db.fn/retractEntity\",[\"^0\",\"hLBqaz4gS\"]],[\"^4\",[\"^0\",\"vwD08rqdT\"]],[\"^4\",[\"^0\",\"6VWOGgeAd\"]],[\"^4\",[\"^0\",\"P56-fWN2O\"]],[\"^4\",[\"^0\",\"SffV3NfN2\"]],[\"^4\",[\"^0\",\"qnZBZCGCv\"]],[\"^4\",[\"^0\",\"10-28-2020\"]]]"</span>,
 <span>:tx-meta</span> {<span>:event-id</span> <span>"uuid719b009f-b969-47b6-b2db-41542d10b328"</span>,
           <span>:event-name</span> <span>"delete-page"</span>,
           <span>:tx-id</span> <span>"uuid289e80fc-4c27-4d54-9df4-d83ac0ceeaed"</span>,
           <span>:tx-name</span> <span>"delete-page"</span>}}</code></pre>
<p>I omitted ~90% of the transaction to save space - but it's more of the same. This definitely looks like the transaction that deleted my Daily Notes page: I see <code>db.fn/retractEntity</code> as well as <code>10-28-2020</code> in the transaction. Interestingly, this transaction captures two Readwise interactions as well. It's not a smoking gun, but it's definitely suspicious that Readwise was operating on my database at the <strong>exact same time</strong> that my page was mysteriously deleted!</p>
<p>Let's pause here, and check in with the Roam Slack group. Someone else has already started a thread about data loss! They and others quickly confirm that they also all have Readwise's auto-export enabled. Again, it's not confirmation that Readwise is to blame, but it's enough for me to stop what I'm doing and disable my Readwise integration! We'll also share our knowledge in the Slack thread and ask affected users to save their Roam HAR file like we did.</p>
<p>Later, <a href="https://twitter.com/homsiT" target="_blank" rel="nofollow noopener noreferrer">Tristan, founder of Readwise</a>, pops into Slack and quickly confirms that <a href="https://twitter.com/homsiT/status/1321856588022513665" target="_blank" rel="nofollow noopener noreferrer">a recent Roam behavior change combined with the Readwise integration can cause deleted pages</a>. Huge props to Tristan who responds perfectly: he triages the issue, disables the feature to prevent any more users from hitting it, and fixes &amp; re-enables auto-export all within a couple hours! Tristan also remains communicative and takes full responsibility, even offering refunds, though I'd argue that these hiccups are bound to happen when Roam still hasn't opened up their public API.</p>
<h2>Deserializing the database</h2>
<p>Peeking again at our parsed HAR file, we see what appears to be our serialized database - it's stored like this:</p>
<pre><code>{<span>:split-db</span> {<span>0</span> <span>"transit-encoded-str-0"</span>
            <span>1</span> <span>"transit-encoded-str-1"</span>
            ...}}</code></pre>
<p>Each string looks something like this:</p>
<pre><code>[\\\"^P\\\",[1641,\\\"^H\\\",\\\"zeciaTJfg\\\",536877373]],[\\\"^P\\\",[1641,\\\"^17\\\",\\\"hello@jeff.yt\\\",536877373]],[\\\"^P\\\",[1641,\\\"^18\\\",1583270770601,536877373]],[\\\"^P\\\",[1641,\\\"^R\\\",\\\"hello@jeff.yt\\\",536877373]],[\\\"^P\\\",[1641,\\\"^S\\\",1583270784121,536877377]],[\\\"^P\\\",[1642,\\\"^E\\\",1643,536877384]]
</code></pre>
<p>This looks like Transit! <a href="https://github.com/cognitect/transit-format" target="_blank" rel="nofollow noopener noreferrer">Transit</a> is a JSON-like format for sending data between applications (<a href="https://blog.klipse.tech/clojure/2016/09/22/transit-clojure.html" target="_blank" rel="nofollow noopener noreferrer">this post</a> is a good introduction). Datascript has its own <a href="https://github.com/tonsky/datascript-transit/" target="_blank" rel="nofollow noopener noreferrer">set of Transit handlers</a> - let's import that and see if we get a working database! Of course, we'll also need to combine <code>split-db</code> by smashing the Transit-encoded strings together.</p>
<pre><code>(<span>require</span> '[datascript.transit <span>:as</span> dt])

(<span><span>defn</span></span> parse-db
  [parsed-har]
  (<span><span>let</span></span> [db-str (<span><span>-&gt;&gt;</span></span> parsed-har
                    
                    (<span><span>filter</span></span> #(<span>some-&gt;</span> % <span>:d</span> <span>:b</span> <span>:d</span> <span>:split-db</span>))
                    first <span>:d</span> <span>:b</span> <span>:d</span> <span>:split-db</span>
                    vals
                    (<span>string/join</span> <span>""</span>))]
    (<span>dt/read-transit-str</span> db-str)))</code></pre>
<p>Voila - a real Datascript database! We can confirm it's my Roam database by querying it:</p>
<pre><code>(<span>require</span> '[datascript.core <span>:as</span> d])
(<span><span>let</span></span> [db (<span><span>-&gt;</span></span> harfile (<span>parse-har</span>) (<span>parse-db</span>))
      conn (<span>d/conn-from-db</span> db)]
  (<span>d/q</span> '[<span>:find</span> ?e <span>:where</span> [?e <span>:node/title</span> <span>"Daily Template"</span>]] @conn))

</code></pre>
<p>With a working Roam database, our next step is to apply all of the transactions we have up until the deletion event. Transactions are Transit-encoded, and we'll have to do quite a bit of data manipulation to get a list of them. Once we have that list, we can sort the transactions and apply them sequentially:</p>
<pre><code>(<span><span>defn</span></span> apply-transactions-until
  [db parsed-har until-time]
  (<span><span>let</span></span> [transactions-to-apply (<span><span>-&gt;&gt;</span></span> parsed-har
                                   (<span><span>map</span></span> #(<span>some-&gt;</span> % <span>:d</span> <span>:b</span> <span>:d</span>))
                                   (<span><span>filter</span></span> seqable?)
                                   (<span><span>apply</span></span> concat)
                                   (<span><span>filter</span></span> #(<span>string/starts-with?</span> (<span><span>-&gt;</span></span> % first name) <span>"-MK"</span>))
                                   (<span><span>map</span></span> second)
                                   (<span><span>filter</span></span> #(<span><span>&lt;</span></span> (<span>:time</span> %) until-time))
                                   (<span><span>sort-by</span></span> <span>:time</span>)
                                   (<span><span>map</span></span> <span>:tx</span>)
                                   (<span><span>map</span></span> dt/read-transit-str))
        conn (<span>d/conn-from-db</span> db)]
    (<span><span>doseq</span></span> [tx transactions-to-apply]
      (<span>d/transact!</span> conn tx))
    (<span>d/db</span> conn)))</code></pre>
<p>Here, <code>until-time</code> is the time of the deletion transaction. We're so close now! We've managed to materialize my Roam database from <strong>right before my notes were deleted</strong>! All we need to do now is pull that deleted page, and we'll be done!</p>
<h2>Recoverin‚Ä¶</h2></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://jeffchen.dev/posts/Recovering-Lost-Roam-Notes/">https://jeffchen.dev/posts/Recovering-Lost-Roam-Notes/</a></em></p>]]>
            </description>
            <link>https://jeffchen.dev/posts/Recovering-Lost-Roam-Notes/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24944574</guid>
            <pubDate>Fri, 30 Oct 2020 17:21:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[KDE.org migrated to Hugo]]>
            </title>
            <description>
<![CDATA[
Score 187 | Comments 78 (<a href="https://news.ycombinator.com/item?id=24944537">thread link</a>) | @ognarb
<br/>
October 30, 2020 | https://carlschwan.eu/2020/10/30/kde-org-hugo.html | <a href="https://web.archive.org/web/*/https://carlschwan.eu/2020/10/30/kde-org-hugo.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><p><img src="https://carlschwan.eu/assets/img/heading_hugo.png" alt="Screenshot KDE.org"></p>

<p><a href="https://kde.org/">KDE.org</a> now uses <a href="https://gohugo.io/">Hugo</a>. Hugo is a fast and modern static site
generator written in Go. It provides a few improvements over the old system that was
using plain PHP. A large part of the work was done by Anuj during GSoC 2020. This
was a massive work, converting the repository storing more than 20 years of KDE
history.</p>

<p>The website is now generated once and no longer uses PHP to generate itself at runtime.
This improves the loading speed of the website, but the speed boost is not significant,
since the PHP code used before was quite small and KDE‚Äôs servers are powerful.</p>

<p>But the biggest improvement is in terms of features. We are now working with markdown
files instead of raw HTML files, this makes the life of the promo team much easier.</p>

<p>The internationalization of the website now creates a unique URL per language, this
should allow Google to link to the version of the website using the correct language.
A <a href="https://kde.org/fr/">French</a>, <a href="https://kde.org/uk/">Ukrainian</a>,
<a href="https://kde.org/ca/">Catalan</a>, <a href="https://kde.org/nl/">Dutch</a>, and a few more languages
are already available. There is also a proper language selector! We also don‚Äôt need
to manually tag each string for translations.</p>

<p>There is also now an <a href="https://kde.org/announcements/index.xml">RSS feed</a> with all the
latest announcements. Another big improvement is that the announcements list is
autogenerated and no longer modified by hand and with the help of the release scripts.</p>

<p>Another nice change for website developers is that now the SCSS code for the individual
pages is located in the kde-org repository itself instead of another repository.
Overall the developer experience is much better, there is no need to set up an apache
server and to the PHP configs to include the <a href="https://invent.kde.org/websites/capacity">capacity framework</a>, just to get the
website running locally. Now you only need to download the Hugo binary from their
release page and run it on the repo.</p>

<h2 id="hugo-and-gettext">Hugo and Gettext</h2>

<p>The internationalization of KDE.org was quite a challenge. When working on a multilingual
website with Hugo, Hugo expects a markdown document per language for each translated
page.</p>

<div><div><pre><code>plasma-desktop.md
plasma-desktop.es.md
plasma-desktop.fr.md
plasma-desktop.uk.md
...
</code></pre></div></div>

<p>The problem is that traditional translations workflow rely on a string-based approach,
where a document is split in paragraphs and translated individually. So I couldn‚Äôt
just put each file markdown file as big blobs in the po files. To solve this problem,
I created a python script splitting the markdown files in paragraphs, simplifying
the markdown syntax (removing leading <code>#</code> and <code>+</code> for heading and list item). This
script also handles Hugo shortcodes transforming:</p>

<div><div><pre><code>
{{&lt; img caption="My figure caption" alt="My accessible description" src="..." &gt;}}

</code></pre></div></div>

<p>in two strings:</p>

<ul>
  <li>My figure caption</li>
  <li>My accessible description</li>
</ul>

<p>The script can obliviously put the individual strings back in place. The scripts also
handle the menu translation, and the translations of the strings in the footers.
For now, the script is just a file in the kde-org repository, but I would like to
transform it to a standalone library so that other gettext and Hugo users can
translate their website.</p>

<p>Using Hugo API, the language selector was trivial to write:</p>

<div><div><pre><code>
&lt;ul class="navbar-nav ml-auto"&gt;
  {{ if .IsTranslated }}
    &lt;li class="nav-item dropdown" aria-describedby="language-picker-description"&gt;
      &lt;p class="sr-only" id="language-picker-description"&gt;{{ i18n "Select-your-language" }}&lt;/p&gt;
      &lt;a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"&gt;
        &lt;img src="/Language-Icons/icon20x24px-exported-transparent.png" alt="" /&gt;
        &lt;span&gt;{{ i18n "translations" }}&lt;/span&gt;
      &lt;/a&gt;
      &lt;div class="dropdown-menu dropdonw-trans" role="listbox"&gt;
        &lt;a class="dropdown-item" aria-selected="true" hreflang="{{ .Site.Language.Lang }}" role="option" lang="{{ .Site.Language.Lang }}" href="{{ .Permalink }}"&gt;{{ .Site.Language.LanguageName }}&lt;/a&gt;
        {{ range .Translations }}
          &lt;a class="dropdown-item" hreflang="{{ .Language.Lang }}" role="option" lang="{{ .Language.Lang }}" href="{{ .Permalink }}"&gt;{{ .Language.LanguageName }}&lt;/a&gt;
        {{ end }}
      &lt;/div&gt;
    &lt;/li&gt;
  {{ end }}
&lt;/ul&gt;

</code></pre></div></div>

<p>This is a bit verbose because this selector is also fully accessible for screen readers.</p>

<p>There are a few more tricks employed in kde.org to improve the internationalization, for
example when a page doesn‚Äôt exist in a language, there is an Apache rule redirecting it
to the English version. Another nice trick is that there is a special Hugo shortcode
called <code>i18n_var</code> and used to parametrize the strings. For example:</p>

<div><div><pre><code>
{{&lt; i18n_var "Today KDE releases a bugfix update to KDE Plasma 5, versioned %[1]s" "5.20.2" &gt;}}

</code></pre></div></div>

<p>And the extractor is clever and only extract the part that needs to be translated.</p>

<p><a href="https://invent.kde.org/websites/kde-org/-/blob/master/translations.py">The script</a></p>

<p>You can comment this post on <a href="https://www.reddit.com/r/kde/comments/jl1pim/kdeorg_migrated_to_hugo/?">r/kde</a>
and <a href="https://news.ycombinator.com/item?id=24944537">HN</a>.</p>
</section></div>]]>
            </description>
            <link>https://carlschwan.eu/2020/10/30/kde-org-hugo.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24944537</guid>
            <pubDate>Fri, 30 Oct 2020 17:19:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Mendoza: Use stack machines to compute efficient JSON diffs]]>
            </title>
            <description>
<![CDATA[
Score 114 | Comments 33 (<a href="https://news.ycombinator.com/item?id=24943775">thread link</a>) | @evenw
<br/>
October 30, 2020 | https://www.sanity.io/blog/mendoza | <a href="https://web.archive.org/web/*/https://www.sanity.io/blog/mendoza">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p>When we started work on the recently released feature <a href="https://www.sanity.io/blog/review-changes">Review Changes</a>, we needed a way to keep a significant part of the edit history of a document in the browser memory to be able to respond quickly to different user interface states. As the user picked various document versions to compare we wanted to be able to quickly reconstruct a specific section of the history of a document. </p><figure><div role="button"><div data-has-aspect="false"></div></div><figcaption>Review Changes for Sanity Studio. Powered by Mendoza.</figcaption></figure><p>For text diffs, we use the <a href="https://github.com/google/diff-match-patch">diff-match-patch format</a>, and we just assumed someone would have implemented a similarly efficient and compact diff format for JSON documents, but no such luck. If we wanted a general JSON diff format that was super compact and fast to apply, we would have to invent it ourselves. And thus, Mendoza, the totally non-human readable diff format for structured JSON documents, was born.</p><p>Mendoza is:</p><ul><li>Lightweight JSON format</li><li>A flexible format that can accommodate more advanced encodings in the future</li><li>As a Go library for encoding and decoding</li><li>A JavaScript library for decoding</li><li>Efficient handling of the renaming of fields</li><li>Efficient handling of reordering of arrays</li><li>Not designed to be human-readable</li></ul><p>Mendoza differs (hah!) from normal diffs as they are:</p><ul><li>Made for humans to read and understand and based on simple operations (like keep, insert, and delete text)</li><li>Possible to apply even if the source has changed a bit by including some of the contexts around every part that has changed</li><li>Designed for text, and not structured documents</li></ul><p>Now, this is great when you are collaborating with humans on code development and use something like git to track your changes. What it isn√¢‚Ç¨‚Ñ¢t great for, however, is expressing differences between structured documents (such as JSON) in a compact manner that can be efficiently transferred over the network and parsed in JavaScript inside of browsers.</p><div data-block-key="27e85758c59a"><h2><a id="most-diffs-arent-meant-for-machines-27e85758c59a"></a><a href="#most-diffs-arent-meant-for-machines-27e85758c59a"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 24"><path d="M0 0h24v24H0z" fill="none"></path><path fill="currentColor" d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a>Most diffs aren't meant for machines</h2></div><p>Most diff formats are made to be human-readable. Take these two documents, where a key and the array have some changes between them:</p><p>If these where two commits, the Git diff between them would be expressed like this:</p><p>This makes it somewhat practical for humans to understand what is going on when the latter change is applied. But as you can see, in terms of pure data, there is a lot of repetition going on. and expressing all changes with only plusses and minuses isn't very efficient.</p><p>The same diff with Mendoza is expressed like this:</p><p>Mendoza constructs a minimal recipe for transforming a document into another. All it really does is to compare two JSON documents and figure out the most minimal way to express their difference as strings and integers in an array. You can use this difference to reconstruct the first document to the other.</p><div data-block-key="308db67aa205"><h2><a id="how-to-read-a-mendoza-patch-even-though-you-shouldnt-308db67aa205"></a><a href="#how-to-read-a-mendoza-patch-even-though-you-shouldnt-308db67aa205"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 24"><path d="M0 0h24v24H0z" fill="none"></path><path fill="currentColor" d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a>How to read a Mendoza patch (even though you shouldn't)</h2></div><p>A Mendoza patch consists of an array of integers and strings. The integers are <em>opcodes</em> (short for √¢‚Ç¨≈ìoperation codes√¢‚Ç¨ÔøΩ), 8-bit numbers that correspond to an operation. Opcodes take parameters as strings, positive numbers, or JSON values (that is: the actual data that is changing). The list of available opcodes is as follows, notice that 10-18 are composites of the preceding ones:</p><ul><li>0 <code>Value<!-- -->√¢‚Ç¨‚Äπ </code></li><li>1 <code>Copy<!-- -->√¢‚Ç¨‚Äπ </code></li><li>2 <code>Blank<!-- -->√¢‚Ç¨‚Äπ</code></li><li>3 <code>ReturnIntoArray<!-- -->√¢‚Ç¨‚Äπ </code></li><li>4 <code>ReturnIntoObject<!-- -->√¢‚Ç¨‚Äπ </code></li><li>5 <code>ReturnIntoObjectSameKey<!-- -->√¢‚Ç¨‚Äπ </code></li><li>6 <code>PushField<!-- -->√¢‚Ç¨‚Äπ </code></li><li>7 <code>PushElement<!-- -->√¢‚Ç¨‚Äπ </code></li><li>8 <code>PushParent<!-- -->√¢‚Ç¨‚Äπ </code></li><li>9 <code>Pop<!-- -->√¢‚Ç¨‚Äπ </code></li><li>10 <code>PushFieldCopy</code></li><li>11 <code>PushFieldBlank</code></li><li>12 <code>PushElementCopy</code></li><li>13 <code>PushFieldBlank</code></li><li>14 <code>ReturnIntoObjectPop</code></li><li>15 <code>ReturnIntoObjectSameKeyPop</code></li><li>16 <code>ReturnIntoArrayPop</code></li><li>17 <code>ObjectSetFieldValue</code></li><li>18 <code>ObjectCopyField</code></li><li>19 <code>ObjectDeleteField</code>√¢‚Ç¨‚Äπ </li><li>20 <code>ArrayAppendValue</code>√¢‚Ç¨‚Äπ </li><li>21 <code>ArrayAppendSlice<!-- -->√¢‚Ç¨‚Äπ</code></li><li>22 <code>StringAppendString<!-- -->√¢‚Ç¨‚Äπ</code></li></ul><p>Mendoza reads these opcodes from the patch and produces the resulting document from them. Depending on the patch, Mendoza might choose not to strictly follow the opcodes but take a simpler path. If every field and value has changed, for example, it√¢‚Ç¨‚Ñ¢s more efficient just to replace the whole document with the new data without going through all the operations. Or if you have a list of objects where one has moved to another position and changed a key-value, Mendoza will manage to go back to the original and represent the change in a cheap way.</p><p>Mendoza is implemented in Go and can be found in this <a href="https://github.com/sanity-io/mendoza">GitHub repository</a>. We have also made <a href="https://github.com/sanity-io/mendoza-js">a parser for Mendoza patches in JavaScript</a>, that you can use in your own application. </p><p>Of course, you can dive into <a href="https://github.com/sanity-io/sanity/blob/a3f7158016d63728a9b435e6ab444ff2b90fd424/packages/%40sanity/desk-tool/src/panes/documentPane/documentHistory/history/timeline.ts#L421">the source code for the Sanity Studio</a> and explore how Mendoza is used there. If you want a slightly simpler use-case, you can also <a href="https://github.com/sanity-io/groq-store/blob/main/src/patch.ts">check out how we√¢‚Ç¨‚Ñ¢re using Mendoza to simulate a part of Sanity√¢‚Ç¨‚Ñ¢s real-time datastore</a> in the browser to power the <a href="https://github.com/sanity-io/next-sanity">real-time preview for Next.js</a>. </p><p>Naming a project is always difficult. Since this project is focused on representing changes between <em>JSON</em> documents I naturally started thinking about names like "JSON differ, JSON changes, JSON patch, √¢‚Ç¨¬¶". However, most of these names have already been used by existing projects. While I was muttering "JSON, JSON, JSON" it suddenly turned into "JSON, JSON, Jason, Jason Mendoza".</p><p>Jason Mendoza is a character from the show The Good Place, and while this project has little in common with the stupidest DJ from Florida, at least it's short and catchy.</p><p>Since a Mendoza patch is just describing the effect of a change it is also limited to work for the documents it was based on. It doesn√¢‚Ç¨‚Ñ¢t come with guarantees for consistency if the document you apply it on has changed from the original in meanwhile. This is one of the tradeoffs that we needed to do to make it really compressed. </p></div></div></div>]]>
            </description>
            <link>https://www.sanity.io/blog/mendoza</link>
            <guid isPermaLink="false">hacker-news-small-sites-24943775</guid>
            <pubDate>Fri, 30 Oct 2020 16:15:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Pondering Amazon's Manyrepo Build System]]>
            </title>
            <description>
<![CDATA[
Score 20 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24943737">thread link</a>) | @nephics
<br/>
October 30, 2020 | http://beza1e1.tuxen.de/amazon_manyrepo_builds.html | <a href="https://web.archive.org/web/*/http://beza1e1.tuxen.de/amazon_manyrepo_builds.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
<p>A while ago,
<a href="http://beza1e1.tuxen.de/monorepo_vcs.html">I pondered monorepo version control systems</a>.
This article is at the opposite end of the spectrum: Manyrepos.</p>
<h2>Why Manyrepo?</h2>
<p>Monorepos are alluring since Google, Facebook, and Microsoft use that approach.
Is that a part of their secret sauce or accidental?
There is another big tech company which does the opposite.
At Amazon, teams work more independently.
Some use different version control systems which are not git
like Subversion and Perforce.
I guess that most companies do <em>not</em> have a monorepo
because it is really easy to split of a separate project
but hard to merge them just from an organizational point of view.
So maybe we can learn more from Amazon than Google?</p>
<p>A common pattern is that Amazon like the others built its own infrastructure
and engineers love it and miss it after they leave.</p>
<blockquote>
<p>I've heard descriptions and seen blog entries about many other large companies build systems, but to be honest, nothing even comes close to the amazing technology Amazon has produced.
I would probably argue that what Google, Facebook, and most other companies of comparable size and larger do is at best objectively less good and at worst wasting millions of dollars of lost productivity.
‚Äì<a href="https://gist.github.com/terabyte/15a2d3d407285b8b5a0a7964dd6283b0">terabyte</a></p>
<p>Once you understand the build and deployment tools you first wonder how you ever did anything before and then start to fear how you'll do anything once you leave.
‚Äì<a href="https://gist.github.com/terabyte/15a2d3d407285b8b5a0a7964dd6283b0#gistcomment-3356000">hohle</a></p>
</blockquote>
<p>Just like Ex-Googlers reinvented their build system on the outside
with <a href="https://www.pantsbuild.org/docs">Pants</a>
and <a href="https://buck.build/">Buck</a>.
Likewise <a href="https://qbtbuildtool.com/">QBT</a> reinvents the Amazon build system.
Unfortunately, QBT is less known and less mature.</p>
<h2>Amazon's Build System</h2>
<p>There is less information about Amazon unfortunately.
Mine is from <a href="https://gist.github.com/terabyte/15a2d3d407285b8b5a0a7964dd6283b0">this gist</a>
and discussions on 
<a href="https://news.ycombinator.com/item?id=24722214">HN</a> and
<a href="https://lobste.rs/s/ykk54d/amazon_s_build_system">lobste.rs</a>.
If I got something wrong, please tell me.
The short version is that Amazon's "Brazil" tool is
more of a package system than a build system.
It is closer to Nix than to Bazel.</p>
<p><a href="https://gist.github.com/terabyte/15a2d3d407285b8b5a0a7964dd6283b0#gistcomment-3356000">Brazil delegates the actual build process to language-specific tools</a>.
Tools, like tmux, are also packaged with Brazil.
The interesting part is how packages are managed
and the core concept to understand is <em>version set</em>.</p>
<p>If you create a package at Amazon,
you specify an <em>interface version</em> like "1.1".
As long as changes are backwards-compatible,
the interface version is not changed.
When Brazil builds a package,
it appends an additional number to turn it into a <em>build version</em>
like "1.1.3847523".
You can only specify dependencies on interface versions.</p>
<p>Another thing Brazil does when building a package
is to record the transitive closure of dependencies
with their build versions.
Modern packaging tools differ between
"dependencies you want"
and "dependencies you actually used".
For example, <a href="https://doc.rust-lang.org/cargo/guide/cargo-toml-vs-cargo-lock.html">Cargo.toml and Cargo.lock in Rust</a>.</p>
<p>A <em>version set</em> is a collection of packages.
The "live" package is the special global one
which corresponds to a trunk branch in version control.
When you build a package "against" a version set,
the tests of all packages in the version set are executed,
and the version set is incremented.
Thus the individual package is updated
(or published if it was not part of the version set before).</p>
<p>Brazil dependencies are classified as runtime, build, and test dependencies.
So for deployment, it can strip everything but the runtime dependencies
from a version set.</p>
<p>Dependencies must be carefully managed in this environment
as a "dependency hell" scenario is possible.</p>
<blockquote>
<p>One of the biggest ways that brazil was misused was around handling of major versions [aka interface version].
For context, only a single major version of a package is allowed to exist in a versionset at a time. If you tried to merge in a different major version of a package into your versionset, your pipeline would fail to build due to "Major version conflicts". One of the biggest sins was around bumping the major versions of the dependencies in a library without bumping the major version of that library at the same time. This would lead to many broken pipelines. Let's say you have a library Foo-1.0 with a bunch of users on other teams. You decide to bump up the Guava version from 25 to 29 and publish the new version of Foo-1.0. Anyone consuming Foo-1.0 would automatically pick up the new version of that lib because it's just a minor version change, however the merge would fail with a "major version conflict" because the major version of Guava they're using in their versionset is still 25. This means you would either have to pin that library back at a previous version, or bump your dependency on Guava in all of you packages to 29.
‚Äì<a href="https://news.ycombinator.com/item?id=24731537">pentlander</a></p>
</blockquote>
<p>This is an insight that generalizes:
Updating a dependency major version is a breaking change
even if your API is stable.</p>
<h2>The Point?</h2>
<p>Overall, it sounds a lot like a distribution package manager like apt or Nix.
The difference of version sets is
that they provide a branching mechanism
and this is how teams can work independently.
How is that unique though?
You can fork with apt and Nix as well.
In a monorepo, it would be a branch.
It must be about something different.</p>
<p>One advantage of monorepos is that one can track all users.
Version sets in Brazil provide a similar mechanism
since it is a <em>central</em> database.
This is important in case of security updates, for example.
Unfortunately, in manyrepo environments this information is usually not available
and when an issue arise it must be arduously researched.
So maybe companies should build such infrastructure
instead of dreaming about monorepos?</p>
<p>Coming back to the advantage of manyrepos,
refering to Amazon we can describe it concretely:
Version sets allow you to use multiple interface versions of the same package
at once (not multiple build versions though).
This mixture is not technically possible with a git monorepo
(but with Subversion or Perforce).
This is at least one example of the general tradeoff.</p>
<blockquote>
<p>I don‚Äôt really think there‚Äôs a better or worse between the Amazon and Google/FB style build/deploy/source control systems, it‚Äôs primarily a reflection of the org/team structure and what they prioritize - there‚Äôs tension between team independence/velocity and crosscutting changes that optimize the whole codebase.
‚Äì<a href="https://lobste.rs/s/ykk54d/amazon_s_build_system#c_fzyzg6">revert</a></p>
</blockquote>
<p>I would like to see more discussion online about this.
Many companies should value the team independence over the crosscutting changes.
So the question is:
How to get the advantages we currently uniquely attribute to monorepos
in a manyrepo setting?
Amazon's Brazil has valuable ideas to contribute
and should be more widely known.</p>

</article><p>Amazon's build system provides valuable insights for manyrepo environments.</p></div>]]>
            </description>
            <link>http://beza1e1.tuxen.de/amazon_manyrepo_builds.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24943737</guid>
            <pubDate>Fri, 30 Oct 2020 16:12:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Goodbye IFTTT]]>
            </title>
            <description>
<![CDATA[
Score 347 | Comments 152 (<a href="https://news.ycombinator.com/item?id=24943685">thread link</a>) | @todsacerdoti
<br/>
October 30, 2020 | https://benjamincongdon.me/blog/2020/10/30/Goodbye-IFTTT/ | <a href="https://web.archive.org/web/*/https://benjamincongdon.me/blog/2020/10/30/Goodbye-IFTTT/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <p>I was a power user of <a href="https://ifttt.com/">IFTTT</a> for many years, so I had mixed
feelings recently about <a href="https://archive.is/zpx2r">their decision</a> to change
their pricing model. Under IFTTT's new pricing, you can only have 3 ‚Äúcustom‚Äù
actions created/enabled at any time ‚Äì which is quite a downgrade from the
current unlimited free plan. On the one hand, I'm glad to see IFTTT take
necessary steps to ensure it has long-term financial stability, but on the other
hand, I don't personally get enough value from their service anymore to justify
a recurring cost. (The plan will likely be
$4/month<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup>, but if you sign up before a deadline, you
can lock in a price as low as $2/month)</p>
<p>IFTTT was an awesome and uniquely easy-to-use service when it first came out,
but now there are better options for personal automation for people like me, who
like to tinker with this sort of thing. Systems like
<a href="https://nodered.org/">node-red</a> and iOS shortcuts can be self hosted or run on
device, and they provide more sophisticated logic for workflows than IFTTT.</p>
<p>I stayed on IFTTT this long mostly due to inertia, and it's fantastically long
list of supported services. If I needed to throw together a quick
spreadsheet-recording automation, or cron-like trigger, IFTTT was a great
starting place. However, it does have limitations. Until now (though it seems
like this might change with their premium offering), IFTTT basically only did
what its name implied: ‚Äúif this, then that‚Äù. No ‚Äúif X then Y else Z‚Äù, no ‚Äúif X
and Z then Y‚Äù, etc. Often times, you don't need any complicated logic or
filtering, but it was frustrating that there wasn't the option for more advanced
automation. Ultimately, IFTTT had a great ‚Äúon-ramp‚Äù, but once you were on board
with their system, you realize how shallow it is. Excellent breadth, mediocre
depth.</p>
<p>Similarly, in the past couple years IFTTT's UI has leaned heavily into the
‚Äúapplet‚Äù metaphor, with these big goofy toggle switches to enable/disable
automations. The site also transitioned towards a focus on community- (or, more
often corporate-) created automations, at the expense of the experience for
creating your own applets. Like seriously, why is 30% of the UI for an applet
<em>details page</em> (!) taken up by the connection status toggle?</p>
<figure>
    
    <a href="https://benjamincongdon.me/blog/2020/10/30/Goodbye-IFTTT/ifttt.png">
        
            
                
                
            
        
        <img src="https://benjamincongdon.me/blog/2020/10/30/Goodbye-IFTTT/ifttt_hu1a43e8a517283105e03bcbb0c4894a01_37903_0x300_resize_lanczos_2.png" loading="lazy"> 
        </a>
</figure>

<p>The settings page, too, is woefully information sparse. As a user, this makes me
feel that desktop-usability was not high on IFTTT's design priorities. You have
to scroll the page to begin to start to see what the automation is doing:</p>
<figure>
    
    <a href="https://benjamincongdon.me/blog/2020/10/30/Goodbye-IFTTT/ifttt-settings.png">
        
            
                
                
            
        
        <img src="https://benjamincongdon.me/blog/2020/10/30/Goodbye-IFTTT/ifttt-settings_hub4acc09d90c5c0c4cbf3054a07fa3040_91989_0x400_resize_lanczos_2.png" loading="lazy"> 
        </a>
</figure>

<p>Eventually, the UI got to the point where it felt like using
<a href="https://en.wikipedia.org/wiki/Lego_Duplo">Duplos</a> or something. It didn't have
to be this way! There are great low-to-no-code tools that have much more usable
interfaces, like
<a href="https://en.wikipedia.org/wiki/Scratch_(programming_language)">Scratch</a>.</p>
<figure>
    
    <a href="https://benjamincongdon.me/blog/2020/10/30/Goodbye-IFTTT/scratch.png">
        
            
        
        <img src="https://benjamincongdon.me/blog/2020/10/30/Goodbye-IFTTT/scratch.png" loading="lazy"> 
        </a>
</figure>

<p>So, I decided to migrate away, since the move to premium was already going to
substantially limit what I could do with IFTTT. In going through my catalog of
IFTTT ‚Äúapplets‚Äù, I identified 3 main patterns of automations that I used IFTTT
for: (1) triggering an action to happen at a specific time, (2) triggering an
action to happen in response to a location change (i.e. geofencing), or (3)
triggering an action to happen in response to an event in a web service.</p>
<p>Of these 3 buckets, iOS shortcuts readily handles the first 2: as of iOS 14,
Shortcuts can be triggered in the background at a specific time of day, or in
response to entering/leaving a geofence. Shortcuts also has a much more
sophisticated integration with iOS than any of IFTTT's apps, so more exciting
mobile automation becomes possible ‚Äì for example, setting my phone to Low Power
Mode once the battery drops below a certain threshold. Of course, you are
restricted to apps/services that support Shortcuts, and the number of supported
services is considerably smaller than IFTTT.</p>
<p>Node-red handles buckets 1 and 3: it has good support for time-based actions,
and can receive webhooks to respond to events from external services. It also
has a great plugin ecosystem, so it's support begins to rival IFTTT's impressive
selection of supported services. Additionally, node-red has many ‚Äúescape
hatches‚Äù that IFTTT does not: you can use it to make raw HTTP requests and write
your own plugins/logic in Javascript, allowing for much more complex automation.</p>
<p>Neither node-red nor iOS shortcuts are as easy to use as IFTTT for putting
together a simple automation, which is a shame. However, between them (and other
alternative automation frameworks that I've trialed, like <a href="https://n8n.io/">n8n</a>
and <a href="https://github.com/huginn/huginn">huginn</a>), I've more than covered my
personal automation needs.</p>
<p>And so, goodbye IFTTT! √∞≈∏‚Äò‚Äπ I'm not put off by them charging for their service; I
think charging for software is a good thing! It's just that this was the nudge I
needed to move my automations to infrastructure that I have more control over,
which has other benefits outside the scope of this article. I'm thankful that a
service like IFTTT continues to exist; I still think it's a fantastic tool to
‚Äúon-ramp‚Äù less technical folks into automation and no-code tools.</p>
<p><em>Cover art:
<a href="https://artvee.com/dl/the-village-of-murnau/">The Village Of Murnau (1908)</a></em></p>
<section role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>A previous version of this article stated that the price for IFTTT Pro was
$10/month. While the original press release, as covered <a href="https://www.theverge.com/2020/9/10/21430265/ifttt-pro-subscriptions-free-controversy">here</a> indicated a $10/month
price, and the current suggested price for IFTTT Pro on their signup form is
$10/month, it seems like going forward the Pro price will be $4/month. I
apologize for the inaccuracy. <a href="#fnref:1" role="doc-backlink">‚Ü©Ô∏é</a></p>
</li>
</ol>
</section>

        </div></div>]]>
            </description>
            <link>https://benjamincongdon.me/blog/2020/10/30/Goodbye-IFTTT/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24943685</guid>
            <pubDate>Fri, 30 Oct 2020 16:07:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Peer Assessment Bias]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 6 (<a href="https://news.ycombinator.com/item?id=24943216">thread link</a>) | @rmulholland21
<br/>
October 30, 2020 | https://www.ryansmulholland.com/writing/peer-assessment-bias | <a href="https://web.archive.org/web/*/https://www.ryansmulholland.com/writing/peer-assessment-bias">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-block-type="2" id="block-63067710b8dc43d7e49b"><div><p><strong>What‚Äôs the difference between you and an expert?</strong></p><p>It‚Äôs kind of obvious, isn‚Äôt it? Television appearances, thousands of dollars, and an audience of fans that accept ideas as thought leadership.</p><p>But seriously, what even <em>is</em> an expert?</p><p>Experts are peers who‚Äôve had their ideas catch on through hard work, exhibition of talent, or luck.</p><p>I believe that statement, but it drastically simplifies everything that‚Äôs gone into someone establishing themselves as an expert. It‚Äôs not easy to get to the place where people assume you know what you‚Äôre talking about. It takes time, effort, and passion to get there. Overnight experts only exist in viral moments, it takes real expertise to have staying power.</p><p>The experts of the pre-internet age almost always hailed from academia. Earning credentials and conducting research was the only way to prove to others that you know what the hell you‚Äôre talking about. There was a gatekeeper to every distribution vessel and no public forum where a great idea from anyone could win the day.</p><p>Now we have that forum. The internet is full of people who are trying to be experts ‚Äî people who think they‚Äôre experts ‚Äî and as a result, there‚Äôs a monsoon of content on any given topic. And with access to information on anything, it‚Äôs the top 1% of information that we rely on, which usually belongs to...experts.</p><p>But experts are peers, remember? Just really fancy ones.</p></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1604023959443_6131"><div><p>So why don‚Äôt we consider the ideas of our peers in the same way we adopt the ideas of established thinkers?</p><p>To you, my peers, I‚Äôd like to present Peer Assessment Bias.</p><h3><strong>Peer Assessment Bias</strong></h3><p>Peer Assessment Bias is why this essay won‚Äôt be read tens of thousands of times. It‚Äôs why your best original ideas aren‚Äôt being talked about in bestselling books. It‚Äôs why you read something that a friend wrote and thought, ‚Äúhmm, that was pretty good,‚Äù but not, ‚Äúpress the pause button on life, I need to take notes!‚Äù</p><p><strong>Peer Assessment Bias is the natural inclination to be more skeptical of the ideas of those perceived as peers, more so than the ideas of those perceived as experts.</strong></p><p>Simply put, when it‚Äôs your friend‚Äôs idea it‚Äôs solid, but when it‚Äôs coming from Peter Thiel, it‚Äôs genius.</p><p>There‚Äôs an overlap here with another bias that you may be familiar with. Survivorship Bias.</p><p>Survivorship Bias is a cognitive error that occurs when a successful subgroup is mistaken as an <em>entire</em> group due to the visibility of the successful group and the invisibility of the unsuccessful group (<a href="https://fs.blog/2020/10/sharks-survivorship-bias/" target="_blank">link here to illustrate</a>).</p><p>As it applies here, most of the ideas we consume come from experts. This is because they‚Äôve already defeated the gatekeeper and have been elevated to the point where their thoughts matter more than others. They‚Äôre the successful survivors.</p><p>So what‚Äôs the difference between my idea of Peer Assessment Bias and good old Survivorship Bias? And how do they overlap?</p><p>Survivorship Bias is a layer of Peer Assessment Bias, but they‚Äôre not the same.</p><p>Survivorship Bias, as it relates to assessment, would lead us to believe that the best ideas come from the people who have the largest audiences. We perceive these successful survivors as experts and give more weight to the ideas they produce, even those unrelated to why they became successful in the first place. This doesn‚Äôt explain what happens on the peer side of the equation.</p><p>Peer Assessment Bias is about how we perceive those ‚Äúat the same level‚Äù as us, and it‚Äôs especially focused on those who are unestablished. ‚ÄúExperts‚Äù were once peers and have now moved on to an evolved state. Becoming an expert takes time, and many of the strong ideas that experts share are ideated during the time when they were an unheard of ‚Äúpeer.‚Äù</p><p>Peer Assessment Bias has less to do with the success of the idea and more to do with the source of it. It‚Äôs different because we may very well look a great idea straight in the face and treat it as a commoner instead of as the royalty that it is.</p><h3><strong>PAB Awareness</strong></h3><p>Why does any of this matter?</p><p>Because it‚Äôs important to recognize good ideas when you hear them.</p><p>There are two sides to Peer Assessment Bias to be aware of.</p><ol data-rte-list="default"><li><p><strong>Don‚Äôt automatically elevate ideas from experts</strong></p></li><li><p><strong>Don‚Äôt automatically dismiss ideas from peers</strong></p></li></ol><p>Experts, the people we look up to, are placed on a pedestal. They‚Äôre given status as infallible.&nbsp;</p><p>This is wrong.</p><p>Yes, the people who‚Äôve earned their expertise are most likely to keep producing thoughts or content that‚Äôs worth consuming, but never blindly. ‚ÄúBecause Musk said it,‚Äù is not reason enough to accept an idea.</p></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1604023959443_8762"><div><p>But you know this already, you‚Äôre a responsible human. So let‚Äôs take a look at the other side of Peer Assessment Bias, the side that doesn‚Äôt come naturally.</p><p><strong>Don‚Äôt automatically dismiss ideas from peers.</strong></p><p>Pay attention to those around you. They can have ideas that are just as strong as those who‚Äôve already earned the world‚Äôs attention. Often it‚Äôs not perfectly polished, not precisely explained, and never published in the Washington Post, but it could be just as good.</p><p>Allow me to illustrate.</p><p>This is Ayomide:</p></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1604023959443_10888"><div><p>Sure, he‚Äôs a doctor, so he‚Äôs a proven smart guy, but the point is that you don‚Äôt know him. Ayomide is in my writing community, <a href="https://writersblochq.com/" target="_blank">Writer‚Äôs Bloc</a>, and I‚Äôve had the pleasure of reading some of his work in the draft phase.</p><p>In August, he wrote this essay called ‚Äú<a href="https://docayomide.com/love/" target="_blank">Love Your Neighbor Doesn‚Äôt Mean What We Think</a>.‚Äù It‚Äôs excellent, you should read it. But to summarize, it comes down to this one sentence:</p><blockquote><p>‚ÄúAct in your neighbor‚Äôs interest as if it was your own.‚Äù</p></blockquote><p>That‚Äôs an objectively brilliant way of reframing ‚Äúlove your neighbor as yourself.‚Äù It may not seem like it, but that little tweak makes things click mentally in a different way than we‚Äôre used to.</p><p>Ayomide isn‚Äôt an established personality. He‚Äôs not looked upon by thousands as a brilliant mind to be listened to or read each week.</p><p>But he has some fantastic ideas worth reading, and so do your peers.&nbsp;</p><h3><strong>Empower Your Peers</strong></h3><p>The moral of this story is to cut your peers some slack.</p><p>The path to expertise is filled with early days of thoughts sent out into an empty void and then slowly adopted by a group of early fans. Those early fans are peers, and peer fans are the most important fans you can have. A show of support, a reliable voice for feedback, or a bit of help from someone promoting your work is sometimes all you need to keep pushing on to the point where you become an expert.</p><p>I‚Äôm no scientist, but there‚Äôs no doubt we‚Äôre harsher critics of our peers than we are of others we don‚Äôt know. Does this stem from personal self-doubt (I couldn‚Äôt do that, so they couldn‚Äôt do it either), a hint of jealousy, or another psychological misplacement? Maybe. But it does happen.</p><p>We have a mental bias to keep peers as peers and experts as experts. This is a bias like any other. One worthy of acknowledging and defeating.</p><p>Cut your peers some slack. Read their work. Promote their content. Champion their ideas. Stand behind them. Encourage their efforts.</p><p>To steal from my peer Ayomide; believe in your peer‚Äôs work the same way you believe in your own.</p><p>Now, go forth and lift up your peers.</p></div></div></div>]]>
            </description>
            <link>https://www.ryansmulholland.com/writing/peer-assessment-bias</link>
            <guid isPermaLink="false">hacker-news-small-sites-24943216</guid>
            <pubDate>Fri, 30 Oct 2020 15:25:21 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Dish-o-tron ‚Äì an ironic (hopefully) fun deep learning tutorial]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24942115">thread link</a>) | @mamikl
<br/>
October 30, 2020 | https://blog.codecentric.de/en/2020/09/dish-o-tron-no-more-dirty-dishes-ai/ | <a href="https://web.archive.org/web/*/https://blog.codecentric.de/en/2020/09/dish-o-tron-no-more-dirty-dishes-ai/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><em>Sadly, to tell you the truth, doing dishes is still a thing. However, so far most of our readers still like our non-standard Deep Learning tutorial.</em></p><p>Typically, AI is demonstrated as solving various toy problems. AI plays chess and Go, AI plays video games, AI makes people dance. It is time to stop this madness and finally apply AI in a meaningful way. Therefore, we proudly present the dish-o-tron. The dish-o-tron is an AI system designed to solve an actual real-world problem impacting millions of people around the world every day: facing dirty dishes in the community kitchen sink.</p><div id="attachment_77683"><p><a href="https://blog.codecentric.de/files/2020/09/real_world_problem.png"><img aria-describedby="caption-attachment-77683" loading="lazy" src="https://blog.codecentric.de/files/2020/09/real_world_problem-250x107.png" alt="dirty dishes in the community kitchen sink" width="250" height="107" srcset="https://blog.codecentric.de/files/2020/09/real_world_problem-250x107.png 250w, https://blog.codecentric.de/files/2020/09/real_world_problem-700x300.png 700w, https://blog.codecentric.de/files/2020/09/real_world_problem-768x329.png 768w, https://blog.codecentric.de/files/2020/09/real_world_problem-1536x659.png 1536w, https://blog.codecentric.de/files/2020/09/real_world_problem-120x51.png 120w, https://blog.codecentric.de/files/2020/09/real_world_problem.png 1600w" sizes="(max-width: 250px) 100vw, 250px"></a></p><p id="caption-attachment-77683">dirty dishes in the community kitchen sink ‚Äì a real-world problem</p></div><p>Reading this blog series will equip you with the ultimate power to solve this long-lasting problem in your community kitchen once and for all by using state-of-the-art AI technology.</p><h2>The dish-o-tron</h2><p>At first glance, the dish-o-tron is an inconspicuous, well-positioned webcam in the kitchen observing the shared kitchen sink. In its natural state the dish-o-tron is just happy and enjoys life. The dish-o-tron doesn‚Äôt care whether you prefer tea or coffee and it likes all kinds of kitchen talk. However, there is one single thing that the dish-o-tron absolutely hates: watching someone put dirty dishes in the community sink.</p><p>Detecting dirty dishes in the sink enrages the peace-loving dish-o-tron so much that it starts beeping. The only way to return it to its natural peaceful state and thus stopping the noise is to admit one‚Äôs mistake and remove all dirty dishes from the community sink, leaving it neat and clean again.</p><div id="attachment_78576"><p><a href="https://blog.codecentric.de/files/2020/09/surveillance_in_kitchen.png"><img aria-describedby="caption-attachment-78576" loading="lazy" src="https://blog.codecentric.de/files/2020/09/surveillance_in_kitchen-250x166.png" alt="respect privacy in the kitchen" width="250" height="166" srcset="https://blog.codecentric.de/files/2020/09/surveillance_in_kitchen-250x166.png 250w, https://blog.codecentric.de/files/2020/09/surveillance_in_kitchen-700x465.png 700w, https://blog.codecentric.de/files/2020/09/surveillance_in_kitchen-768x510.png 768w, https://blog.codecentric.de/files/2020/09/surveillance_in_kitchen-1536x1020.png 1536w, https://blog.codecentric.de/files/2020/09/surveillance_in_kitchen-120x80.png 120w, https://blog.codecentric.de/files/2020/09/surveillance_in_kitchen.png 1984w" sizes="(max-width: 250px) 100vw, 250px"></a></p><p id="caption-attachment-78576">privacy in the kitchen has to be respected.</p></div><p>Building the dish-o-tron requires three high-level steps:</p><ul><li>Gathering and preparing data</li><li>Training an AI model</li><li>Deployment of the model</li></ul><p>In the following, we will discuss these steps further.</p><h2>Gathering and preparing data</h2><p>Trying to solve real-world problems with AI often starts with the realisation that there is little or even no data available. This issue prevents many problem solvers from actually solving the problem. ‚ÄúIf only data collection had started years ago!‚Äù, they say, ‚Äúthen we could now actually solve the problem‚Äù. While this is a reasonable thought, it simply doesn‚Äôt help.</p><p>Consoling users currently facing a problem by saying that it is necessary to gather lots of data for quite some time before we can start building a solution is at least challenging. Typically a more promising approach is to build a system addressing the problem which is able to improve over time.</p><p>In this way, we will not solve the problem completely in the first step; however, we will tackle the problem right away and put ourselves in a position to iteratively adjust the solution to match the requirements which also become more and more clear while working on the problem.</p><p>Since our problem is unique in a sense that there is no Kaggle dataset readily available, we start our journey to building the dish-o-tron by doing our best to collect a suitable dataset for a first working system. Here, we will make videos of various kitchen sinks clean and not clean and split them up into a first labeled dataset.</p><p>In this way, we started collecting the DIRTY-DISHES-DATASET with thousands of pictures that we will share with you in the next article.</p><div id="attachment_77687"><p><a href="https://blog.codecentric.de/files/2020/09/dirty_dishes_dataset.png"><img aria-describedby="caption-attachment-77687" loading="lazy" src="https://blog.codecentric.de/files/2020/09/dirty_dishes_dataset-250x151.png" alt="sample images from the dirty-dishes dataset" width="250" height="151" srcset="https://blog.codecentric.de/files/2020/09/dirty_dishes_dataset-250x151.png 250w, https://blog.codecentric.de/files/2020/09/dirty_dishes_dataset-700x424.png 700w, https://blog.codecentric.de/files/2020/09/dirty_dishes_dataset-768x465.png 768w, https://blog.codecentric.de/files/2020/09/dirty_dishes_dataset-120x73.png 120w, https://blog.codecentric.de/files/2020/09/dirty_dishes_dataset.png 1004w" sizes="(max-width: 250px) 100vw, 250px"></a></p><p id="caption-attachment-77687">sample images from the dirty-dishes dataset</p></div><h2>Training an AI model</h2><p>Not so long ago, training an AI model was tedious and required expert knowledge. In many cases this is still true today. Depending on the problem, we have to figure out a suitable model architecture and feature engineering and this requires some experimentation before we can train a suitable AI model. This is another issue which prevents problem solvers from building a solution tackling the whole problem even if data is available.</p><p>Fortunately, image classification is one of the best understood use cases in AI. There are lots of established best practices regarding model architectures and training of models. Among others this led to two things:</p><ul><li>High-level software libraries such as fast.ai which abstract away lots of the nitty-gritty details of image classification, providing a black-box kind of approach where state-of-the-art practises are simply utilised without burdening the user with the details.</li><li>Machine Learning as a service offerings from various public cloud providers such as automl and rekognition allowing training of image classification models on custom data in a few simple steps.</li></ul><p>Both approaches will typically not lead to the absolutely best solution. However, most of the time this is not necessary and ‚Äògood enough‚Äô will be just fine and a nice trade-off between time &amp; money spent vs. result. For our first version of the dish-o-tron, we will employ the <a href="https://cloud.google.com/automl" target="_blank" rel="noopener noreferrer">AutoML Service</a> from Google Cloud to train a first model.</p><p>We can use various tools to inspect the model and try to explain if the black box learns what we expect.</p><div id="attachment_77689"><p><a href="https://blog.codecentric.de/files/2020/09/explain_model.png"><img aria-describedby="caption-attachment-77689" loading="lazy" src="https://blog.codecentric.de/files/2020/09/explain_model-250x191.png" alt="visualizing what the dish-o-tron model has actually learned" width="250" height="191" srcset="https://blog.codecentric.de/files/2020/09/explain_model-250x191.png 250w, https://blog.codecentric.de/files/2020/09/explain_model-700x535.png 700w, https://blog.codecentric.de/files/2020/09/explain_model-768x587.png 768w, https://blog.codecentric.de/files/2020/09/explain_model-120x92.png 120w, https://blog.codecentric.de/files/2020/09/explain_model.png 1412w" sizes="(max-width: 250px) 100vw, 250px"></a></p><p id="caption-attachment-77689">Visualizing what the model has actually learned.</p></div><p>The training of the AI model with AutoML and its technical details will be discussed in a follow-up blog post.</p><h2>Deployment of the model</h2><p>Having an AI model generally will not solve an actual real-life problem. For a viable solution, the AI model has to be integrated into a suitable context. Many times, this is the key step to generating any value at all. Nevertheless, this step is often postponed to the distant future after ‚Äúcollecting high quality data‚Äù and ‚Äúbuilding the best AI model‚Äù. This is, more often than not, a mistake because integrating the model into its context poses various challenges on its own. Hence, it should not be ignored and instead tackled early in order to learn and identify the associated challenges.</p><p>While building the dish-o-tron, we tried multiple options to run the model. We deployed it on a Pi Zero which is a really small and cheap device that can be glued anywhere with a small powerbank. But it is rather slow. We ran the model in the browser using our notebook‚Äôs webcam with TensorFlow.js. We used the Google AIY Kit, which is much faster than the Pi Zero and also comes with a beeper and blinking lights (but it is quite old and deploying state-of-the-art models is hacky). Finally, we used the Google Coral device, which is made for this kind of workload and well-integrated into Google AutoML but comes with a price tag.</p><p>The community kitchen is a special place. It‚Äôs a place where rumors are born, where gossip is produced and where you can openly chat about the most secret secrets of your company! That‚Äôs why dish-o-tron is living on the edge. Edge devices enable you to run audio and video analytics AND respect the privacy of your community kitchen. No image is transferred to the cloud. Nothing is saved. Dish-o-tron sees and forgets.</p><div id="attachment_77691"><p><a href="https://blog.codecentric.de/files/2020/09/various_edge_devices.png"><img aria-describedby="caption-attachment-77691" loading="lazy" src="https://blog.codecentric.de/files/2020/09/various_edge_devices-250x85.png" alt="various edge devices" width="250" height="85" srcset="https://blog.codecentric.de/files/2020/09/various_edge_devices-250x85.png 250w, https://blog.codecentric.de/files/2020/09/various_edge_devices-700x237.png 700w, https://blog.codecentric.de/files/2020/09/various_edge_devices-768x261.png 768w, https://blog.codecentric.de/files/2020/09/various_edge_devices-1536x521.png 1536w, https://blog.codecentric.de/files/2020/09/various_edge_devices-2048x695.png 2048w, https://blog.codecentric.de/files/2020/09/various_edge_devices-120x41.png 120w" sizes="(max-width: 250px) 100vw, 250px"></a></p><p id="caption-attachment-77691">Various edge devices</p></div><p>Moreover, the hardware we consider and buy in order to actually build the dish-o-tron will establish basic conditions for our solution space. In other words, we have to mind that it is possible to painlessly deploy the AI model on our preferred edge device. For the first version of the dish-o-tron, we decided to use a Google AIY kit (see video below). For the next version, we chose a Google Coral edge device, which allows us to run advanced computer vision tasks on a Raspberry-size mini computer. Fortunately, AutoML allows us to export models in a viable format.</p><div id="attachment_77693"><p><a href="https://blog.codecentric.de/files/2020/09/google_coral_device.png"><img aria-describedby="caption-attachment-77693" loading="lazy" src="https://blog.codecentric.de/files/2020/09/google_coral_device-250x131.png" alt="Google coral device" width="250" height="131" srcset="https://blog.codecentric.de/files/2020/09/google_coral_device-250x131.png 250w, https://blog.codecentric.de/files/2020/09/google_coral_device-700x366.png 700w, https://blog.codecentric.de/files/2020/09/google_coral_device-768x401.png 768w, https://blog.codecentric.de/files/2020/09/google_coral_device-1536x803.png 1536w, https://blog.codecentric.de/files/2020/09/google_coral_device-120x63.png 120w, https://blog.codecentric.de/files/2020/09/google_coral_device.png 1600w" sizes="(max-width: 250px) 100vw, 250px"></a></p><p id="caption-attachment-77693">Google coral device</p></div><p>The construction of the dish-o-tron including the deployment of the model on the Coral device and its technical details will be discussed in an upcoming blog post.</p><h2>Conclusion</h2><p>AI research has brought us new technology that can solve problems that couldn‚Äôt be solved before. Have you read the book <em>AI superpowers</em> by Kai-Fu Lee? He says that you don‚Äôt need to be one of the best AI researchers any more to apply AI and find new business opportunities. You need to collect (lots of) data and can ‚Äújust‚Äù use existing algorithms, services and open source frameworks. Well, in our opinion building AI solutions is not easy ‚Äì but it is indeed getting easier and easier every day.</p><p>See the first prototype running on the google AIY kit here (mind the green/red LED at the box):</p><p>Follow this blog series if you want to know how to build and run such a model on an edge device yourself. Building the dish-o-tron will fundamentally change the way you experience the community kitchen. Instead of being a place of constant anger and hostility, the community kitchen will become a peaceful meeting ground for sharing ideas and connecting with co-workers.</p><p>In the upcoming blog posts, we will guide you through the process of building your own dish-o-tron for your community kitchen sink. Hence, we will tackle a real-world problem and playfully learn how to build and improve an AI system from scratch. Stay tuned!</p><p>Continue with the <a href="https://blog.codecentric.de/en/2020/09/dish-o-tron-gather-that-data-you-must/">the second part of our series</a> where we start with gathering data.</p></div></div>]]>
            </description>
            <link>https://blog.codecentric.de/en/2020/09/dish-o-tron-no-more-dirty-dishes-ai/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24942115</guid>
            <pubDate>Fri, 30 Oct 2020 13:46:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Brazil will launch its first nationwide digital instant-payment system]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24942060">thread link</a>) | @imartin2k
<br/>
October 30, 2020 | https://restofworld.org/2020/cash-debit-or-pix/ | <a href="https://web.archive.org/web/*/https://restofworld.org/2020/cash-debit-or-pix/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
			
<p>Next month, Brazil will launch its first nationwide digital instant-payment system. On November 16, Pix will go live on banking apps, digital wallets, and other services throughout Latin America‚Äôs largest financial market.&nbsp;</p>



<p>Pix was created by Brazil‚Äôs <a href="https://content.next.westlaw.com/w-006-8837?transitionType=Default&amp;contextData=(sc.Default)&amp;__lrTS=20191105091102789&amp;firstPage=true">Central Bank</a>, which has the power of life and death over all Brazilian financial institutions. The system is virtually free to use, a novelty in a country with a very efficient but expensive banking system.</p>



<p>Although it will be mandatory only for the largest banks, Pix will be available for all Brazilians whose bank or credit union opts in. Already, people are embracing the new system; on the first registration day ahead of launch, <a href="https://neofeed.com.br/blog/home/no-pix-uma-lista-e-a-chave-da-discordia-entre-bancos-e-fintechs/">millions of users</a> signed up for the service.&nbsp;</p>



<p>But not everyone is so enthusiastic. Pix‚Äôs simplicity and low cost will eat into the revenue streams of big banks, which typically charge users for fast transfers. It also complicates the business models of some of Brazil‚Äôs most successful startups. And by combining these features with a countrywide mandate, Pix might finally accomplish something that up until a few years ago was unthinkable: killing cash transactions in Brazil.</p>



<h3><strong>Why did the Brazilian Central Bank create Pix?</strong></h3>



<p>Pix has been in the works<a href="https://www.bcb.gov.br/estabilidadefinanceira/gtpaginst_reunioes"> since mid-2018</a>. Back then, there were a few instant-payment systems available in Brazil. Yet those that did exist were either limited to a specific bank‚Äôs clientele or had been launched by startups.&nbsp;</p>



<div><p>‚ÄúWe had been signaling the need for instant payments to the market since 2013,‚Äù said Mayara Yano, an analyst at the Central Bank. But, according to Yano, there were too many barriers and not enough incentives for a private company to create a service to be adopted by the banking system as a whole.</p><p>With Pix, the Central Bank also means to restrain the use of paper money, still popular in everyday life. It‚Äôs typical of mom and pop shops to offer 5% to 10% discounts for cash payments to avoid card-processing fees, for example.</p></div>



<p>Limiting paper currency with Pix would help the Central Bank with two other problems: limit its expenses with producing and distributing bills and coins, and boost the government‚Äôs investigations of financial fraud, <a href="https://www.bloomberg.com/news/articles/2020-10-07/bolsonaro-declares-brazil-corruption-free-and-ends-carwash-probe">a hot-button issue in Brazil</a>. After all, cash transactions are almost impossible to track, but Pix payments will be all saved in their users‚Äô banking apps.<br></p>



<p>Pix isn‚Äôt the first government-imposed payment mandate in Brazil‚Äôs history. In 2002, the Central Bank created a money transfer mechanism that took less than one hour on weekdays and would be completed by the next working day on weekends and holidays. The mechanism, called TED, was mandatory for all banks.</p>



<p><br>Pix, of course, isn‚Äôt mandatory for everybody. But it may as well be, since it is mandatory for banks with more than 500,000 clients; the group comprises 34 banks, which serve 90% of the <a href="https://www1.folha.uol.com.br/mercado/2020/10/pandemia-leva-a-bancarizacao-de-quase-10-milhoes-de-pessoas.shtml">175.4 million Brazilians who own bank accounts</a>. It is optional for smaller banks, fintech startups, credit unions, and other financial service providers.</p>



<h3><strong>How will it work?</strong></h3>



<div><p>Pix relies on identifiers like QR codes, email addresses, and telephone numbers to perform money transfers in up to 10 seconds, including on weekends and holidays. It will be incorporated into banking and payment apps, digital wallets, and other kinds of financial services. Once available, Pix will provide an alternative to existing fast money transfers, which cost an average of 10 Brazilian reais each in fees ($2).</p><p>The system functions virtually for free<strong>; </strong>the Central Bank charges financial institutions just 1 Brazilian centavo ($0.0018) for every 10 Pix transactions, and it‚Äôs up to them if they will pass along that cost to their clients.</p><p>To sign up, a user must submit up to five pieces of personal information, such as an email address, a cell phone number, or a tax ID, that will be used as a ‚ÄúPix key‚Äù to identify them in a money transfer. Users will also be given a QR code, which can be used to send or receive payments. If they have a bank account, they can use their checking account information to process a Pix transaction, much like a traditional bank transfer.</p></div>


		<figure>
			<div>
				<p><img src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/10/pix-registry3-40x79.jpg" data-src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/10/pix-registry3-600x1066.jpg" data-srcset="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/10/pix-registry3-400x786.jpg 400w, https://restofworld.org/wp-content/uploads/2020/10/pix-registry3-600x1180.jpg 600w, " sizes="300px" alt="During the sign-up, users need to enroll a key (" chaves="" pix")="" consisting="" of="" a="" piece="" personal="" information."="">
					
				</p>
			</div>
						<figcaption itemprop="caption description">
				
				
			</figcaption>
		</figure>


<h3><strong>How will Pix affect Brazilian banks and fintech startups?</strong></h3>



<p>The government hasn‚Äôt disclosed any studies of how Pix could impact Brazil‚Äôs economy. But it‚Äôs clear that the new technology will hit big banks the hardest, as well as big-name payment intermediaries, like point-of-sale and card-machine operators Cielo and Rede. German consulting group Roland Berger forecasts that the latter could lose up to <a href="https://valorinveste.globo.com/mercados/renda-variavel/empresas/noticia/2020/07/03/pix-tira-ate-r-13-bi-de-credenciadoras.ghtml"></a><a href="https://valorinveste.globo.com/mercados/renda-variavel/empresas/noticia/2020/07/03/pix-tira-ate-r-13-bi-de-credenciadoras.ghtml">13 billion reais</a> ($2.6 billion).&nbsp;</p>



<p>Pix also threatens what has been a lucrative revenue stream for Brazil‚Äôs ‚ÄúBig Five‚Äù banks ‚Äî Ita√∫, Bradesco, Santander, Banco do Brasil, and Caixa Econ√¥mica Federal ‚Äî which collectively make 2.2 billion reais ($440 million) a year from fees for same-day money transfers.</p>







<p>But a potential loss in transfer revenues isn‚Äôt the only danger to the Big Five. Now that they‚Äôre on the same footing when it comes to transfer fees, they risk losing clients to digital wallets and online-only banks. As of 2019, more than <a href="https://www.bcb.gov.br/content/publicacoes/relatorioeconomiabancaria/REB_2019.pdf">80% of Brazil‚Äôs total credit operations</a>, valued at 2.90 trillion reais ($580 billion), were concentrated in the Big Five. ‚ÄúPix will challenge the entire market to provide quality digital services at lower prices,‚Äù said Cl√°udio Guimar√£es J√∫nior, executive director of the Brazilian Association of Banks.&nbsp;</p>



<p>Traditional banks such as Ita√∫ e Bradesco<a href="https://einvestidor.estadao.com.br/ultimas-noticias/itau-e-do-bradesco-chamam-atencao-para-seguranca-e-defendem-pix"> have voiced concerns</a> about the system‚Äôs security and complained that the launch date is too early. ‚Äú[Battling Pix] is like trying to stop the wind with your hands,‚Äù said Jo√£o Bragan√ßa, specialist in payment methods at Roland Berger.&nbsp;</p>



<div><p>But the effects of Pix could cut both ways. Established digital payment startups like <a href="https://labsnews.com/en/news/business/brazilian-instant-payment-pix-will-allow-withdrawals-in-retail-stores/">PicPay</a>, with its 20 million active users, and <a href="https://www.nasdaq.com/articles/brazils-pagseguro-digital-raises-23-billion-ipo-stock-jumps-2018-01-24">PagSeguro</a>, which raised about 13.2 billion reais ($2.3 billion) during its initial public offering on Nasdaq, may be in trouble. One of their services is instant digital payments, something Pix will provide universally and for free.</p><p>But whether you‚Äôre a big bank or a small fintech firm, there‚Äôs no fighting the Central Bank. The Brazilian government will also allow big retailers to adopt Pix as a payment option, often with cashback offers, a novelty in Brazil. In order to compete, PicPay and other digital-payment companies will need to diversify their services.&nbsp;</p></div>






		<figure>
			<div>
				<p><img src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/10/Screen-Shot-2020-10-23-at-9.38.44-AM-40x20.png" data-src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/10/Screen-Shot-2020-10-23-at-9.38.44-AM-768x432.png" data-srcset="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/10/Screen-Shot-2020-10-23-at-9.38.44-AM-400x200.png 400w, https://restofworld.org/wp-content/uploads/2020/10/Screen-Shot-2020-10-23-at-9.38.44-AM-600x299.png 600w, https://restofworld.org/wp-content/uploads/2020/10/Screen-Shot-2020-10-23-at-9.38.44-AM-1000x499.png 1000w, https://restofworld.org/wp-content/uploads/2020/10/Screen-Shot-2020-10-23-at-9.38.44-AM-1600x798.png 1600w, https://restofworld.org/wp-content/uploads/2020/10/Screen-Shot-2020-10-23-at-9.38.44-AM-2800x1397.png 2800w, " sizes="(max-width: 640px) 100vw, (max-width: 992px) calc(100vw - 40px), (max-width: 1140px) calc(100vw - 290px), calc(100vw - ((100vw - 640px)/2))" alt="The system will mitigate cost for end-users and charge 0.001 reais per transaction from the banks and fintech.">
					
				</p>
			</div>
						<figcaption itemprop="caption description">
				
				<span itemprop="copyrightHolder"><a href="https://www.bcb.gov.br/estabilidadefinanceira/negociopix" target="_blank" rel="noopener noreferrer">https://www.bcb.gov.br</a></span>
			</figcaption>
		</figure>


<h3><strong>What will change for Brazilians?</strong></h3>



<p>Even with Brazilians being as fond of cash as they are now, financial experts are expecting Pix to gain a stranglehold on non-cash payments and money transfers within the next few years. An analysis by Accenture anticipates some <a href="https://labsnews.com/en/articles/technology/brazils-instant-payments-system-can-reach-20-million-users-in-its-first-year/">48 billion reais</a> ($9.6 billion) to move through the Pix system by the end of its first year.&nbsp;</p>



<p>The study predicts that Pix will achieve mass adoption (i.e., be used for 25% of all household payments) within five years and move between 1 trillion reais ($200 billion) and 1.5 trillion reais ($300 billion) per year. That‚Äôs close to 20% of Brazil‚Äôs current GDP of 7.3 trillion reais ($1.46 trillion). ‚ÄúThe Brazilian card industry, both debit and credit, moved 1.8 trillion reais ($360 billion) in 2019. So Pix can have practically that same size in 2025,‚Äù said Ricardo Pandur, payment specialist at Accenture.</p>



<p>But it remains to be seen who exactly will turn to Pix. The Central Bank is betting on its appeal to the <a href="https://www1.folha.uol.com.br/mercado/2020/10/pandemia-leva-a-bancarizacao-de-quase-10-milhoes-de-pessoas.shtml">36 million Brazilians</a> with no bank accounts. For them, Pix could serve as an entry point to financial services.</p>


<div>

<div>

<div>
<table>
<tbody>
<tr><td>Name:</td><td>Pix</td></tr>
<tr><td>Owner:</td><td>Brazil‚Äôs Central Bank</td></tr>
<tr><td>Start date:</td><td>November 16, 2020</td></tr>
<tr><td>Number of users expected by the end of first year:</td><td>30 million</td></tr>
<tr><td>Total payments processed (forecast):</td><td>$200 billion (R$1 trillion) by the end of 2025
</td></tr>
<tr><td>*Source:</td><td>Accenture</td></tr>
</tbody></table>
</div>
</div>
</div>


<div><p>For consumers, Pix will be an alternative to cash and debit cards, a cheap, fast method of money transfer, and even an easy way to pay taxes. For retailers, Pix will be cheaper than card operators, with potentially zero cost to them or their customers.</p><p>But access to Pix is conditional on access to a smartphone or a computer as well as a stable data connection. Even with increased connectivity and phone use, <a href="https://www.pewresearch.org/global/wp-content/uploads/sites/2/2019/02/Pew-Research-Center_Global-Technology-Use-2018_2019-02-05.pdf">40% of all Brazilian adults</a> still don‚Äôt have a smartphone. Potential users might have trouble understanding the system of personal keys and QR codes. ‚ÄúUnderstanding a payment mechanism is not as simple as learning to use social media,‚Äù said Ricardo Rocha, a professor of finance at Insper in S√£o Paulo.</p></div>



<div><p>With new technology comes new vulnerabilities to scams and phishing attempts. Pix will be incorporated into banks‚Äô native apps and websites and have the added benefit of encrypted transactions. But it will be up to the same banks to explain the risks while pushing for widespread adoption.</p><p>Some startups might have been pushing for adoption a little too far.&nbsp;Clients of online banks <a href="https://restofworld.org/2020/david-velez-nubank/">Nubank</a> and C6 and digital wallets PagSeguro and MercadoPago took to social media to complain that the companies registered their keys <a href="https://g1.globo.com/economia/noticia/2020/10/19/procon-notifica-nubank-e-mercado-pago-sobre-cadastramento-de-chaves-no-pix.ghtml">without their explicit consent</a>. The Central Bank started a <a href="https://exame.com/seu-dinheiro/bc-investiga-denuncia-de-cadastramento-indevido-das-chaves-do-pix/">formal investigation</a> and Brazil‚Äôs primary consumer defense entity <a href="https://g1.globo.com/economia/noticia/2020/10/19/procon-notifica-nubank-e-mercado-pago-sobre-cadastramento-de-chaves-no-pix.ghtml">questioned</a> their methods, but the corporations claimed they followed all guidelines and that their clients were notified via apps.</p></div>



<p>Even so, the future of Pix looks promising. Between October 5, when the Central Bank started to allow users to enroll their Pix keys ahead of the November launch date, and October 22, there have been 50 million enrollments. On the first day alone, 3.5 million keys entered the system, and the demand was so high that many banking apps crashed.</p>
		</div></div>]]>
            </description>
            <link>https://restofworld.org/2020/cash-debit-or-pix/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24942060</guid>
            <pubDate>Fri, 30 Oct 2020 13:40:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Learn setting up Google Tag Manager with this tutorial]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24941974">thread link</a>) | @arctic-hunter
<br/>
October 30, 2020 | https://bluerivermountains.com/en/google-tag-manager-setup | <a href="https://web.archive.org/web/*/https://bluerivermountains.com/en/google-tag-manager-setup">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="___gatsby"><div tabindex="-1" id="gatsby-focus-wrapper"><div><main role="main"><div><figure><div></div></figure><p>As a <a href="https://bluerivermountains.com/en/google-tag-manager-consultant">Google Tag Manager consultant</a>, I've set up GTM on <b>100+ client websites</b>. This Google Tag Manager tutorial is where I teach you the process I've refined over the years, step by step, with examples and videos for you to learn.</p><p>Further down, you can <a href="https://bluerivermountains.com/en/google-tag-manager-setup#download-gtm-config-container-file">download a GTM setup configuration file</a> with all of the following best practices to import into your container.</p><p>If you can't wait, jump right into the <a href="https://bluerivermountains.com/en/google-tag-manager-setup#install-google-tag-manager-on-your-website">installation</a> tutorial or learn <a href="https://bluerivermountains.com/en/google-tag-manager-setup#how-to-set-up-google-tag-manager">how to set up Google Tag Manager</a>. But if you are a <b>beginner</b> it is important to first understand <em>how</em> to use a <a href="https://bluerivermountains.com/en/tag-management">tag management system</a> together with other tools.</p><p>So keep on reading below first.</p><h2 id="how-to-use-google-tag-manager"><a href="#how-to-use-google-tag-manager" aria-label="How to use Google Tag Manager?" title="Right click to copy link to paragraph"></a>How to use Google Tag Manager?</h2><p>I assume you already know <a href="https://bluerivermountains.com/en/what-is-google-tag-manager">what Google Tag Manager is</a>. So lets talk about how GTM works and how to use it.</p><p>Ideally, you only want to have <b>one</b> 3rd-party tag in the source code of your website or web app.</p><a href="https://twitter.com/intent/tweet?text=The%20only%203rd-party%20tag%20on%20your%20website%20should%20be%20the%20Google%20Tag%20Manager%20code%20snippet.%20-%20via%20undefined" target="_blank"><section><p><b>The only 3rd-party tag on your website should be the Google Tag Manager code snippet.</b></p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiAgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxnPg0KCQk8cGF0aCBkPSJNNTEyLDk3LjI0OGMtMTkuMDQsOC4zNTItMzkuMzI4LDEzLjg4OC02MC40OCwxNi41NzZjMjEuNzYtMTIuOTkyLDM4LjM2OC0zMy40MDgsNDYuMTc2LTU4LjAxNg0KCQkJYy0yMC4yODgsMTIuMDk2LTQyLjY4OCwyMC42NC02Ni41NiwyNS40MDhDNDExLjg3Miw2MC43MDQsMzg0LjQxNiw0OCwzNTQuNDY0LDQ4Yy01OC4xMTIsMC0xMDQuODk2LDQ3LjE2OC0xMDQuODk2LDEwNC45OTINCgkJCWMwLDguMzIsMC43MDQsMTYuMzIsMi40MzIsMjMuOTM2Yy04Ny4yNjQtNC4yNTYtMTY0LjQ4LTQ2LjA4LTIxNi4zNTItMTA5Ljc5MmMtOS4wNTYsMTUuNzEyLTE0LjM2OCwzMy42OTYtMTQuMzY4LDUzLjA1Ng0KCQkJYzAsMzYuMzUyLDE4LjcyLDY4LjU3Niw0Ni42MjQsODcuMjMyYy0xNi44NjQtMC4zMi0zMy40MDgtNS4yMTYtNDcuNDI0LTEyLjkyOGMwLDAuMzIsMCwwLjczNiwwLDEuMTUyDQoJCQljMCw1MS4wMDgsMzYuMzg0LDkzLjM3Niw4NC4wOTYsMTAzLjEzNmMtOC41NDQsMi4zMzYtMTcuODU2LDMuNDU2LTI3LjUyLDMuNDU2Yy02LjcyLDAtMTMuNTA0LTAuMzg0LTE5Ljg3Mi0xLjc5Mg0KCQkJYzEzLjYsNDEuNTY4LDUyLjE5Miw3Mi4xMjgsOTguMDgsNzMuMTJjLTM1LjcxMiwyNy45MzYtODEuMDU2LDQ0Ljc2OC0xMzAuMTQ0LDQ0Ljc2OGMtOC42MDgsMC0xNi44NjQtMC4zODQtMjUuMTItMS40NA0KCQkJQzQ2LjQ5Niw0NDYuODgsMTAxLjYsNDY0LDE2MS4wMjQsNDY0YzE5My4xNTIsMCwyOTguNzUyLTE2MCwyOTguNzUyLTI5OC42ODhjMC00LjY0LTAuMTYtOS4xMi0wLjM4NC0xMy41NjgNCgkJCUM0ODAuMjI0LDEzNi45Niw0OTcuNzI4LDExOC40OTYsNTEyLDk3LjI0OHoiLz4NCgk8L2c+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8L3N2Zz4NCg==" alt="share on twitter" height="24px"></section></a><p>All other tags are then implemented through the tag manager itself. Other marketing and tracking tags are e.g. Google Analytics (GA), Facebook, Twitter, Linkedin, AdWords, DoubleClick and god knows what.</p><p>The primary reason are the <a href="https://bluerivermountains.com/en/google-tag-manager-benefits">advantages of Google Tag Manager</a>:</p><ul><li><b>easier &amp; faster</b> implementation of marketing tags</li><li>scalability on every page and across multiple domains</li><li><b>built-in triggers</b> for form submissions, scroll tracking&nbsp;&amp; video tracking</li><li>manage users with multiple gtm accounts</li><li>a bit <a rel="noopener" target="_blank" href="https://marketingland.com/audit-of-online-retailer-sites-shows-tag-management-systems-improve-load-times-reduce-errors-62173">faster site load speed</a></li></ul><p>Due to these advantages, already <a target="_blank" href="https://w3techs.com/technologies/overview/tag_manager">30% of all websites on the internet use a tag manager</a>. And among them Google Tag Manager has a market share of <a target="_blank" rel="noopener" href="https://trends.builtwith.com/analytics/tag-management/traffic/Entire-Internet">94%</a>.</p><p>So, unless you have a solid reason not to add a tag to GTM, as a general rule of thumb, <b>add all tags to the GTM container</b>.</p><a href="https://twitter.com/intent/tweet?text=Use%20GTM%20like%20a%20connecting%20layer%20between%20your%20website%20and%203rd-party%20tags.%20-%20via%20undefined" target="_blank"><section><p><b>Use GTM like a connecting layer between your website and 3rd-party tags.</b></p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiAgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxnPg0KCQk8cGF0aCBkPSJNNTEyLDk3LjI0OGMtMTkuMDQsOC4zNTItMzkuMzI4LDEzLjg4OC02MC40OCwxNi41NzZjMjEuNzYtMTIuOTkyLDM4LjM2OC0zMy40MDgsNDYuMTc2LTU4LjAxNg0KCQkJYy0yMC4yODgsMTIuMDk2LTQyLjY4OCwyMC42NC02Ni41NiwyNS40MDhDNDExLjg3Miw2MC43MDQsMzg0LjQxNiw0OCwzNTQuNDY0LDQ4Yy01OC4xMTIsMC0xMDQuODk2LDQ3LjE2OC0xMDQuODk2LDEwNC45OTINCgkJCWMwLDguMzIsMC43MDQsMTYuMzIsMi40MzIsMjMuOTM2Yy04Ny4yNjQtNC4yNTYtMTY0LjQ4LTQ2LjA4LTIxNi4zNTItMTA5Ljc5MmMtOS4wNTYsMTUuNzEyLTE0LjM2OCwzMy42OTYtMTQuMzY4LDUzLjA1Ng0KCQkJYzAsMzYuMzUyLDE4LjcyLDY4LjU3Niw0Ni42MjQsODcuMjMyYy0xNi44NjQtMC4zMi0zMy40MDgtNS4yMTYtNDcuNDI0LTEyLjkyOGMwLDAuMzIsMCwwLjczNiwwLDEuMTUyDQoJCQljMCw1MS4wMDgsMzYuMzg0LDkzLjM3Niw4NC4wOTYsMTAzLjEzNmMtOC41NDQsMi4zMzYtMTcuODU2LDMuNDU2LTI3LjUyLDMuNDU2Yy02LjcyLDAtMTMuNTA0LTAuMzg0LTE5Ljg3Mi0xLjc5Mg0KCQkJYzEzLjYsNDEuNTY4LDUyLjE5Miw3Mi4xMjgsOTguMDgsNzMuMTJjLTM1LjcxMiwyNy45MzYtODEuMDU2LDQ0Ljc2OC0xMzAuMTQ0LDQ0Ljc2OGMtOC42MDgsMC0xNi44NjQtMC4zODQtMjUuMTItMS40NA0KCQkJQzQ2LjQ5Niw0NDYuODgsMTAxLjYsNDY0LDE2MS4wMjQsNDY0YzE5My4xNTIsMCwyOTguNzUyLTE2MCwyOTguNzUyLTI5OC42ODhjMC00LjY0LTAuMTYtOS4xMi0wLjM4NC0xMy41NjgNCgkJCUM0ODAuMjI0LDEzNi45Niw0OTcuNzI4LDExOC40OTYsNTEyLDk3LjI0OHoiLz4NCgk8L2c+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8L3N2Zz4NCg==" alt="share on twitter" height="24px"></section></a><p>Use GTM like a <b>middle-layer</b> between your website and 3rd-party services. Without it, your site and 3rd party tags are not in direct connection. Those services are mostly JavaScript libraries for marketing or tracking tools that are implemented with a tag. But any other tags apply as well.</p><p>The only exception to the rule applies when you do&nbsp;conversion optimization&nbsp;with split-testing tools.</p><p>Because during conversion rate optimization, A/B tests are going to load different variants of a page. So the visitor may see how the content is re-rendered for a split-second.</p><p>To avoid CSS flicker and ensure that variant tests load fast, a split-testing tag may also go directly into the source code.</p><p>Now that we have this out of the way, let‚Äôs look at the implementation.</p><h2 id="install-google-tag-manager-on-your-website"><a href="#install-google-tag-manager-on-your-website" aria-label="Install Google Tag Manager on your website" title="Right click to copy link to paragraph"></a>Install Google Tag Manager on your website</h2><p>Let's start the Google Tag Manager tutorial by showing you where to get the Google Tag Manager code snippet and then where to install it on the website. You can log in just by using your usual Google account.</p><ol><li><h3 id="create-a-google-tag-manager-account"><a href="#create-a-google-tag-manager-account" aria-label="Create a Google Tag Manager account" title="Right click to copy link to paragraph"></a>Create a Google Tag Manager account</h3>To install GTM, you first have to go to the <a rel="noopener" target="_blank" href="https://tagmanager.google.com/">official website</a> and create a new Google Tag Manager account.<br><figure><div></div><figcaption>First, create a Google Tag Manager account, and choose a container name, like your website name and then get the code snippet.</figcaption></figure></li><li><h3 id="create-a-web-property"><a href="#create-a-web-property" aria-label="Create a web-property" title="Right click to copy link to paragraph"></a>Create a web-property</h3>Select the <b>Web</b> property to get a code for a website or web app.<br><figure><div></div><figcaption>There are multiple types of containers available in a GTM account. For websites, choose web. Note that there are other tag manager container types for AMP pages, iOS and Android too.</figcaption></figure></li><li><h3 id="implement-the-google-tag-manager-code"><a href="#implement-the-google-tag-manager-code" aria-label="Implement the Google Tag Manager code" title="Right click to copy link to paragraph"></a>Implement the Google Tag Manager code</h3><ul>Afterwards, you will be shown the Google Tag Manager code to implement on your website.<br><figure><div></div><figcaption>This is the Google Tag Manager container tag. It has two parts. The instructions how to implement the script tags are written above each part.</figcaption></figure><li>Take the <b>first part</b> of the container tag and put it as high as possible in the <b>head</b> tag on every page of your website. This ensures that you can fire tags early during page loads.</li><li>The <b>second part</b> is an iframe to run in browsers that have JavaScript disabled. Install the tag as high as possible in the <b>body</b> tag on each page of your website.<br><figure><div></div><figcaption>The first tag in the &lt;head&gt; is a data layer. Don't worry if you don't know yet what that is (first arrow). Next is the first part of the GTM tag (second arrow). Finally, the other part of the GTM tag is implemented high up in the &lt;body&gt; element.  or JavaScript code can be implemented in between, but a data layer is always implemented before the GTM tag and the &lt;noscript&gt; GTM tag is always last.</figcaption></figure></li></ul></li></ol><p>This is the common method to implement GTM.</p><p>Do you use a popular content management system? If yes, you can also use a <b>plugin</b> that takes care of the Google Tag Manager installation.</p><p>That said:</p><a href="https://twitter.com/intent/tweet?text=If%20your%20CMS%20also%20offers%20you%20a%20plugin%20to%20install%20other%20tags,%20don%27t%20use%20yet%20another%20plugin%20to%20install%20Google%20Analytics,%20Facebook%20or%20Google%20Ads.%20Instead,%20use%20GTM%20to%20install%20those%20tags.%20-%20via%20undefined" target="_blank"><section type="info"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCI+PGc+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyNCIgd2lkdGg9IjI0Ii8+PC9nPjxnPjxnPjxnPjxwYXRoIGQ9Ik05LDIxYzAsMC41NSwwLjQ1LDEsMSwxaDRjMC41NSwwLDEtMC40NSwxLTF2LTFIOVYyMXogTTEyLDJDOC4xNCwyLDUsNS4xNCw1LDljMCwyLjM4LDEuMTksNC40NywzLDUuNzRWMTcgYzAsMC41NSwwLjQ1LDEsMSwxaDZjMC41NSwwLDEtMC40NSwxLTF2LTIuMjZjMS44MS0xLjI3LDMtMy4zNiwzLTUuNzRDMTksNS4xNCwxNS44NiwyLDEyLDJ6IE0xNCwxMy43VjE2aC00di0yLjMgQzguNDgsMTIuNjMsNywxMS41Myw3LDljMC0yLjc2LDIuMjQtNSw1LTVzNSwyLjI0LDUsNUMxNywxMS40OSwxNS40OSwxMi42NSwxNCwxMy43eiIvPjwvZz48L2c+PC9nPjwvc3ZnPg==" alt="tip" height="42px"><p><b>If your CMS also offers you a plugin to install other tags</b></p><div><p>Don't use yet another plugin to install Google Analytics, Facebook or Google Ads.</p><p>Instead, <b>use GTM to install those tags</b>.</p><br><ol><li>It will result in a faster page load speed</li><li>It gives you more options to configure the tag</li></ol></div><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiAgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxnPg0KCQk8cGF0aCBkPSJNNTEyLDk3LjI0OGMtMTkuMDQsOC4zNTItMzkuMzI4LDEzLjg4OC02MC40OCwxNi41NzZjMjEuNzYtMTIuOTkyLDM4LjM2OC0zMy40MDgsNDYuMTc2LTU4LjAxNg0KCQkJYy0yMC4yODgsMTIuMDk2LTQyLjY4OCwyMC42NC02Ni41NiwyNS40MDhDNDExLjg3Miw2MC43MDQsMzg0LjQxNiw0OCwzNTQuNDY0LDQ4Yy01OC4xMTIsMC0xMDQuODk2LDQ3LjE2OC0xMDQuODk2LDEwNC45OTINCgkJCWMwLDguMzIsMC43MDQsMTYuMzIsMi40MzIsMjMuOTM2Yy04Ny4yNjQtNC4yNTYtMTY0LjQ4LTQ2LjA4LTIxNi4zNTItMTA5Ljc5MmMtOS4wNTYsMTUuNzEyLTE0LjM2OCwzMy42OTYtMTQuMzY4LDUzLjA1Ng0KCQkJYzAsMzYuMzUyLDE4LjcyLDY4LjU3Niw0Ni42MjQsODcuMjMyYy0xNi44NjQtMC4zMi0zMy40MDgtNS4yMTYtNDcuNDI0LTEyLjkyOGMwLDAuMzIsMCwwLjczNiwwLDEuMTUyDQoJCQljMCw1MS4wMDgsMzYuMzg0LDkzLjM3Niw4NC4wOTYsMTAzLjEzNmMtOC41NDQsMi4zMzYtMTcuODU2LDMuNDU2LTI3LjUyLDMuNDU2Yy02LjcyLDAtMTMuNTA0LTAuMzg0LTE5Ljg3Mi0xLjc5Mg0KCQkJYzEzLjYsNDEuNTY4LDUyLjE5Miw3Mi4xMjgsOTguMDgsNzMuMTJjLTM1LjcxMiwyNy45MzYtODEuMDU2LDQ0Ljc2OC0xMzAuMTQ0LDQ0Ljc2OGMtOC42MDgsMC0xNi44NjQtMC4zODQtMjUuMTItMS40NA0KCQkJQzQ2LjQ5Niw0NDYuODgsMTAxLjYsNDY0LDE2MS4wMjQsNDY0YzE5My4xNTIsMCwyOTguNzUyLTE2MCwyOTguNzUyLTI5OC42ODhjMC00LjY0LTAuMTYtOS4xMi0wLjM4NC0xMy41NjgNCgkJCUM0ODAuMjI0LDEzNi45Niw0OTcuNzI4LDExOC40OTYsNTEyLDk3LjI0OHoiLz4NCgk8L2c+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8L3N2Zz4NCg==" alt="share on twitter" height="24px"></section></a><p>The GTM user interface also receives updates with new features regularly, so you are almost always better off implementing other marketing tags directly with it than with another integration.</p><p>Plus, the gains in load time are good for your bounce rate and help SEO.</p><h3 id="use-a-plugin-to-implement-gtm"><a href="#use-a-plugin-to-implement-gtm" aria-label="Use a plugin to implement GTM" title="Right click to copy link to paragraph"></a>Use a plugin to implement GTM</h3><p>Below a list of the most common content management systems and their plugins to install Google Tag Manager.</p><h4 id="wordpress"><a href="#wordpress" aria-label="WordPress" title="Right click to copy link to paragraph"></a>WordPress</h4><p>There are two WordPress plugins to implement GTM that I would use. <b>First</b>, there is the classic option called <a rel="noopener" target="_blank" href="https://wordpress.org/plugins/duracelltomi-google-tag-manager/">Google Tag Manager for WordPress</a>.<br>The <b>second</b> option is <a rel="noopener" target="_blank" href="https://wordpress.org/plugins/google-site-kit/">Site Kit by Google</a>. It primarily allows you to add a dashboard to your Worpress backend showing information from your Google Analytics account and Google Search Console data - which is pretty sweet. And it also allows you to install GTM.</p><h4 id="shopify"><a href="#shopify" aria-label="Shopify" title="Right click to copy link to paragraph"></a>Shopify</h4><p>For Shopify, there is a <b>free</b> plugin for GTM installation creatively called <em><a rel="noopener" target="_blank" href="https://apps.shopify.com/trafficguard?surface_detail=google+tag+manager&amp;surface_inter_position=1&amp;surface_intra_position=6&amp;surface_type=search">Google Tag Manager Installer</a></em>.</p><h4 id="squarespace"><a href="#squarespace" aria-label="Squarespace" title="Right click to copy link to paragraph"></a>Squarespace</h4><p>For Squarespace, there is no GTM extension or plugin. But you can add the GTM tag manually, by visiting <b>sidebar</b> &gt; <b>settings</b> &gt; <b>advanced</b> &gt; <b>code injection</b>.</p><figure><div></div><figcaption>In Squarespace you can implement GTM under Settings &gt; Advanced &gt; Code Injection</figcaption></figure><p>Next, you paste the GTM tag into the form fields like this:</p><figure><div></div><figcaption>Put the first part of the GTM code in the header field. The Second part goes into the footer field.</figcaption></figure><h4 id="wix"><a href="#wix" aria-label="Wix" title="Right click to copy link to paragraph"></a>Wix</h4><p>Visit the main menu for your Wix website on the left sidebar. From there visit <b>Marketing &amp; SEO</b> and then click on <b>Marketing Integrations</b> further down in the sidebar.<br>Then you will find multiple Wix integrations for Google Analytics, the Facebook pixel and also one Wix extension to implement Google Tag Manager.</p><figure><div></div><figcaption>In Wix use the marketing integration for Google Tag Manager.</figcaption></figure><p>Click on connect and get Google Tag Manager installed.</p><h2 id="how-to-check-if-gtm-is-working"><a href="#how-to-check-if-gtm-is-working" aria-label="How to check if GTM is working?" title="Right click to copy link to paragraph"></a>How to check if GTM is working?</h2><a href="https://twitter.com/intent/tweet?text=When%20you%20first%20log%20in%20to%20GTM...Go%20to%20the%20submit%20button%20and%20publish%20an%20empty%20container.%20Otherwise,%20once%20you%20test%20if%20GTM%20works,%20the%20script%20will%20return%20a%20400%20response%20error%20and%20you%20will%20spend%20hours%20debugging%20why.%20%F0%9F%98%AD%20-%20via%20undefined" target="_blank"><section type="info"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCI+PGc+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSIyNCIgd2lkdGg9IjI0Ii8+PC9nPjxnPjxnPjxnPjxwYXRoIGQ9Ik05LDIxYzAsMC41NSwwLjQ1LDEsMSwxaDRjMC41NSwwLDEtMC40NSwxLTF2LTFIOVYyMXogTTEyLDJDOC4xNCwyLDUsNS4xNCw1LDljMCwyLjM4LDEuMTksNC40NywzLDUuNzRWMTcgYzAsMC41NSwwLjQ1LDEsMSwxaDZjMC41NSwwLDEtMC40NSwxLTF2LTIuMjZjMS44MS0xLjI3LDMtMy4zNiwzLTUuNzRDMTksNS4xNCwxNS44NiwyLDEyLDJ6IE0xNCwxMy43VjE2aC00di0yLjMgQzguNDgsMTIuNjMsNywxMS41Myw3LDljMC0yLjc2LDIuMjQtNSw1LTVzNSwyLjI0LDUsNUMxNywxMS40OSwxNS40OSwxMi42NSwxNCwxMy43eiIvPjwvZz48L2c+PC9nPjwvc3ZnPg==" alt="tip" height="42px"><p><b>When you first log in to GTM</b></p><div><p>Go to the submit button and publish an <b>empty container</b>.</p><div><p>Otherwise, once you test if GTM works, the script will return a <b>400 response error</b> and you will spend hours debugging why. üò≠ </p><p>It's a classic üòâ</p></div></div><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiAgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxnPg0KCQk8cGF0aCBkPSJNNTEyLDk3LjI0OGMtMTkuMDQsOC4zNTItMzkuMzI4LDEzLjg4OC02MC40OCwxNi41NzZjMjEuNzYtMTIuOTkyLDM4LjM2OC0zMy40MDgsNDYuMTc2LTU4LjAxNg0KCQkJYy0yMC4yODgsMTIuMDk2LTQyLjY4OCwyMC42NC02Ni41NiwyNS40MDhDNDExLjg3Miw2MC43MDQsMzg0LjQxNiw0OCwzNTQuNDY0LDQ4Yy01OC4xMTIsMC0xMDQuODk2LDQ3LjE2OC0xMDQuODk2LDEwNC45OTINCgkJCWMwLDguMzIsMC43MDQsMTYuMzIsMi40MzIsMjMuOTM2Yy04Ny4yNjQtNC4yNTYtMTY0LjQ4LTQ2LjA4LTIxNi4zNTItMTA5Ljc5MmMtOS4wNTYsMTUuNzEyLTE0LjM2OCwzMy42OTYtMTQuMzY4LDUzLjA1Ng0KCQkJYzAsMzYuMzUyLDE4LjcyLDY4LjU3Niw0Ni42MjQsODcuMjMyYy0xNi44NjQtMC4zMi0zMy40MDgtNS4yMTYtNDcuNDI0LTEyLjkyOGMwLDAuMzIsMCwwLjczNiwwLDEuMTUyDQoJCQljMCw1MS4wMDgsMzYuMzg0LDkzLjM3Niw4NC4wOTYsMTAzLjEzNmMtOC41NDQsMi4zMzYtMTcuODU2LDMuNDU2LTI3LjUyLDMuNDU2Yy02LjcyLDAtMTMuNTA0LTAuMzg0LTE5Ljg3Mi0xLjc5Mg0KCQkJYzEzLjYsNDEuNTY4LDUyLjE5Miw3Mi4xMjgsOTguMDgsNzMuMTJjLTM1LjcxMiwyNy45MzYtODEuMDU2LDQ0Ljc2OC0xMzAuMTQ0LDQ0Ljc2OGMtOC42MDgsMC0xNi44NjQtMC4zODQtMjUuMTItMS40NA0KCQkJQzQ2LjQ5Niw0NDYuODgsMTAxLjYsNDY0LDE2MS4wMjQsNDY0YzE5My4xNTIsMCwyOTguNzUyLTE2MCwyOTguNzUyLTI5OC42ODhjMC00LjY0LTAuMTYtOS4xMi0wLjM4NC0xMy41NjgNCgkJCUM0ODAuMjI0LDEzNi45Niw0OTcuNzI4LDExOC40OTYsNTEyLDk3LjI0OHoiLz4NCgk8L2c+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8L3N2Zz4NCg==" alt="share on twitter" height="24px"></section></a><p>After you implemented the GTM script and <b>published a container</b> version (important), you can test if Google Tag Manager is working by doing any of these checks:</p><ol><li><h3 id="preview-and-debug-mode"><a href="#preview-and-debug-mode" aria-label="Preview and debug mode" title="Right click to copy link to paragraph"></a>Preview and debug mode</h3>Log into your GTM account and click on <b>preview</b>. Then, open a new tab in the browser and visit your website. The GTM debugger window should pop open on the bottom of the window if GTM works correctly.<br><figure><div></div><figcaption>Activate the GTM debugger mode to check if GTM is working correctly.</figcaption></figure></li><li><h3 id="chrome-developer-tools"><a href="#chrome-developer-tools" aria-label="Chrome Developer Tools" title="Right click to copy link to paragraph"></a>Chrome Developer Tools</h3><b>Open Chrome Developer Tools</b> with a right-click on any page of your site and select <em>inspect</em> (Alternatively F12 on Windows and Shift+CTRL+J on Mac).<br>Then you go to the <b>network</b> tab and <b>simultaneously reload the web page</b> (F5 on Windows and CMD+Shift+R on Mac). The network tab will fill with all network requests necessary to load the page.<br>In the filter field in the top-left, type <em>gtm.js</em> to find the request for your JavaScript code and verify it has a <b>status code of 200</b>.<p>Let me show you:</p><video loading="lazy" title="Check if Google Tag Manager is working" loop="" controls=""><source src="https://bluerivermountains.com/video/check-if-gtm-is-working.mp4" type="video/mp4"></video><br><b>If you don‚Äôt have a 200 status code, maybe you forgot to submit and publish a container first in GTM?</b></li><li><h3 id="google-tag-assistant"><a href="#google-tag-assistant" aria-label="Google Tag Assistant" title="Right click to copy link to paragraph"></a>Google Tag Assistant</h3>Install the <a rel="noopener" target="_blank" href="https://chrome.google.com/webstore/detail/tag-assistant-by-google/kejbdjndbnbjgmefkgdddjlbokphdefk">Google Tag Assistant</a> Chrome extension and start it on your site. It should call out a GTM container ID.<br><div width="452px"><figure><div></div><figcaption>You can also use the Chrome Extension Google Tag Assistant to ensure Google Tag Manager is working correctly.</figcaption></figure></div></li></ol><h2 id="how-to-set-up-google-tag-manager"><a href="#how-to-set-up-google-tag-manager" aria-label="How to set up Google Tag Manager?" title="Right click to copy link to paragraph"></a>How to set up Google Tag Manager?</h2><p>When setting up Google Tag Manager you can make many advanced configurations. So <b><em>how</em></b> you set up GTM, depends on what other tools you plan to use in your <a href="https://bluerivermountains.com/en/tag-management">tag management system</a>.</p><p>That's why I brought together all relevant tutorials that cover whatever you could possibly want to set up in your GTM account - with examples. Simply follow this Google Tag&nbsp;Manager guide and thereby create a solid tag management foundation for your site.</p><p>Only the tutorial on implementing a data layer requires coding skills or potentially web developers.</p><p><b>Note</b>: In this Google Tag Manager tutorial, we will use GTM by <b>manually</b> setting up new tags and triggers for each event. The approach is not super scalable, but it is fast enough and easy, while meeting most tracking ambitions and still being applicable to other advanced setups.</p><p>Larger websites and e-commerce stores require a <b>scalable tag management solution</b>. Therefore a <a href="https://bluerivermountains.com/en/datalayer">data layer</a> is implemented as the central piece to track events. With such a setup, you can use event handlers instead of setting up tags, triggers and variables for each event.</p><ol><li><h3 id="set-up-google-analytics-tracking"><a href="#set-up-google-analytics-tracking" aria-label="Set up Google Analytics tracking" title="Right click to copy link to paragraph"></a>Set up Google Analytics tracking</h3><p>This is the first step for everybody. Learn in this guide how to implement solid Google Analytics tracking, with Goals, Funnels, and your own visits excluded from the traffic. Plus more best practices.</p><a href="https://bluerivermountains.com/en/google-analytics-setup"></a></li><li><h3 id="set-up-event-tracking"><a href="#set-up-event-tracking" aria-label="Set up event tracking" title="Right click to copy link to paragraph"></a>Set up event tracking</h3><p>Once the fundamental tracking implementation is running as it should, you will also want to learn tracking user engagement. How often, for example, does a visitor send form submissions and click on a submit button or another HTML element? My <a href="https://bluerivermountains.com/en/event-tracking">event tracking</a> guide explains exactly that for a <b>button click</b> and you can use the same method for any other click tracking.</p><a href="https://bluerivermountains.com/en/event-tracking"></a></li><li><p>The most common use-case for GTM <em>after</em> installing GA is adding remarketing tags to a website. After all, they make the majority of 3rd-party marketing tags and tracking codes that ‚Ä¶</p></li></ol></div></main></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://bluerivermountains.com/en/google-tag-manager-setup">https://bluerivermountains.com/en/google-tag-manager-setup</a></em></p>]]>
            </description>
            <link>https://bluerivermountains.com/en/google-tag-manager-setup</link>
            <guid isPermaLink="false">hacker-news-small-sites-24941974</guid>
            <pubDate>Fri, 30 Oct 2020 13:29:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Mastering TorchScript: Tracing vs. Scripting, Device Pinning, Graph Modification]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24941642">thread link</a>) | @briggers
<br/>
October 30, 2020 | https://paulbridger.com/posts/mastering-torchscript/ | <a href="https://web.archive.org/web/*/https://paulbridger.com/posts/mastering-torchscript/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
  
  
  <h5>October 29, 2020</h5>



  
  
  

  


  <h2 id="intro">
  Intro
  <a href="#intro">#</a>
</h2>
<p>TorchScript is one of the most important parts of the Pytorch ecosystem, allowing portable, efficient and nearly seamless deployment. With just a few lines of <code>torch.jit</code> code and some simple model changes you can export an asset that runs anywhere <code>libtorch</code> does. It‚Äôs an important toolset to master if you want to run your models outside the lab at high efficiency.</p>
<p>Good <a href="https://pytorch.org/tutorials/beginner/Intro_to_TorchScript_tutorial.html">introductory material</a> is already available for starting to work with <a href="https://pytorch.org/docs/stable/jit.html">TorchScript</a> including <a href="https://pytorch.org/tutorials/advanced/cpp_export.html">execution in the C++ <code>libtorch</code> runtime</a>, and <a href="https://pytorch.org/docs/stable/jit_language_reference.html">reference material</a> is also provided. This article is a collection of topics going beyond the basics of your first export.</p>
<h2 id="tracing-vs-scripting">
  Tracing vs Scripting
  <a href="#tracing-vs-scripting">#</a>
</h2>
<p>Pytorch provides two methods for generating TorchScript from your model code ‚Äî tracing and scripting ‚Äî but which should you use? Let‚Äôs recap how they work:</p>
<ul>
<li>
<p><a href="https://pytorch.org/docs/stable/generated/torch.jit.trace.html"><strong>Tracing.</strong></a> When using <code>torch.jit.trace</code> you‚Äôll provide your model and sample input as arguments. The input will be fed through the model as in regular inference and the executed operations will be traced and recorded into TorchScript. Logical structure will be frozen into the path taken during this sample execution.</p>
</li>
<li>
<p><a href="https://pytorch.org/docs/stable/generated/torch.jit.script.html"><strong>Scripting.</strong></a> When using <code>torch.jit.script</code> you‚Äôll simply provide your model as an argument. TorchScript will be generated from the static inspection of the <code>nn.Module</code> contents (recursively).</p>
</li>
</ul>
<p>It‚Äôs not obvious from the tutorial documentation, but choosing which method to use is a fairly simple and fluid choice:</p>
<h3 id="use-scripting-by-default">
  Use Scripting by Default
  <a href="#use-scripting-by-default">#</a>
</h3>
<p>Because <code>torch.jit.script</code> captures both the operations and full conditional logic of your model, it‚Äôs a great place to start. If your model doesn‚Äôt need any <a href="https://pytorch.org/docs/stable/jit_unsupported.html">unsupported Pytorch functionality</a> and has logic restricted to the <a href="https://pytorch.org/docs/stable/jit_builtin_functions.html#python-built-in-functions">supported subset of Python functions</a> and <a href="https://pytorch.org/docs/stable/jit_python_reference.html">syntax</a>, then <code>torch.jit.script</code> should be all you need.</p>
<p>One major advantage of scripting over tracing is that an export is likely to either fail for a well-defined reason ‚Äî implying a clear code modification ‚Äî or succeed without warnings.</p>
<blockquote>
  <p><strong>Unlike Python, TorchScript is Statically Typed</strong></p>
<p>You will need to be consistent about container element datatypes, and be wary of implicit function signatures. A useful practice is to use type hints in method signatures.</p>

</blockquote>

<p>Despite TorchScript‚Äôs ability to capture conditional logic it does not allow you to run arbitrary Python within <code>libtorch</code> ‚Äî a popular misconception.</p>
<h3 id="use-tracing-if-you-must">
  Use Tracing if You Must
  <a href="#use-tracing-if-you-must">#</a>
</h3>
<p>There are a few special cases in which <code>torch.jit.trace</code> may be useful:</p>
<ul>
<li>If you are unable to modify the model code ‚Äî because you do not have access or ownership ‚Äî you may find scripting the model simply will not work because it uses unsupported Pytorch/Python functionality.</li>
<li>In pursuit of performance or to bake in architectural decisions the logic freezing behavior of tracing might be preferable ‚Äî similar to inlining C/C++ code.</li>
</ul>
<blockquote>
  <p><strong>Pay Close Attention to Tracer Warnings</strong></p>
<p>Due to how tracing can simplify model behavior, each warning should be fully understood and only then ignored (or fixed). Also, be sure to trace in eval mode if you are exporting a model for production inference!</p>

</blockquote>

<h3 id="use-both-together">
  Use Both Together
  <a href="#use-both-together">#</a>
</h3>
<p>Scripted and traced code can be freely mixed, and this is often a great choice. See the existing <a href="https://pytorch.org/">pytorch.org</a> documentation for <a href="https://pytorch.org/docs/stable/jit.html#mixing-tracing-and-scripting">details</a> and <a href="https://pytorch.org/tutorials/beginner/Intro_to_TorchScript_tutorial.html#mixing-scripting-and-tracing">examples</a>.</p>
<h2 id="device-pinning">
  Device Pinning
  <a href="#device-pinning">#</a>
</h2>
<p>If you find yourself using <code>torch.jit.trace</code> on some code, you‚Äôll have to actively deal with some of the gotchas or face performance and portability consequences. Besides addressing any warnings Pytorch emits, you‚Äôll also need to keep an eye out for device pinning. Just like <code>torch.jit.trace</code> records and freezes conditional logic, it will also trace and make constant the values resulting from this logic ‚Äî this can include device constants.</p>
<p>Using this sample code:</p>
<div><pre><code data-lang="python"><span>def</span> <span>forward</span><span>(</span><span>X</span><span>):</span>
    <span>return</span> <span>torch</span><span>.</span><span>arange</span><span>(</span><span>X</span><span>.</span><span>size</span><span>(</span><span>0</span><span>))</span></code></pre></div>
<p>If we trace while executing on CPU or GPU we get this TorchScript (scroll to the right on mobile):</p>
<div><pre><code data-lang="python"><span>def</span> <span>forward</span><span>(</span><span>X</span><span>:</span> <span>Tensor</span><span>)</span> <span>-&gt;</span> <span>Tensor</span><span>:</span>
  <span>_0</span> <span>=</span> <span>ops</span><span>.</span><span>prim</span><span>.</span><span>NumToTensor</span><span>(</span><span>torch</span><span>.</span><span>size</span><span>(</span><span>X</span><span>,</span> <span>0</span><span>))</span>
  <span>_1</span> <span>=</span> <span>torch</span><span>.</span><span>arange</span><span>(</span><span>annotate</span><span>(</span><span>number</span><span>,</span> <span>_0</span><span>),</span> <span>dtype</span><span>=</span><span>None</span><span>,</span> <span>layout</span><span>=</span><span>0</span><span>,</span> <span>device</span><span>=</span><span>torch</span><span>.</span><span>device</span><span>(</span><span>"cpu"</span><span>),</span> <span>pin_memory</span><span>=</span><span>False</span><span>)</span>
  <span>return</span> <span>_1</span></code></pre></div>
<!-- raw HTML omitted -->
<p>You can see that <code>torch.device("cpu")</code> has been inserted as a constant into the generated TorchScript. If we try to get clever with this code:</p>
<div><pre><code data-lang="python"><span>def</span> <span>forward</span><span>(</span><span>X</span><span>):</span>
    <span>return</span> <span>torch</span><span>.</span><span>arange</span><span>(</span><span>X</span><span>.</span><span>size</span><span>(</span><span>0</span><span>),</span> <span>device</span><span>=</span><span>X</span><span>.</span><span>device</span><span>)</span></code></pre></div>
<p>Tracing will now result in TorchScript that is pinned to the tracing device. When traced on GPU, we see this:</p>
<div><pre><code data-lang="python"><span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span>
    <span>X</span><span>:</span> <span>Tensor</span><span>)</span> <span>-&gt;</span> <span>Tensor</span><span>:</span>
  <span>_0</span> <span>=</span> <span>ops</span><span>.</span><span>prim</span><span>.</span><span>NumToTensor</span><span>(</span><span>torch</span><span>.</span><span>size</span><span>(</span><span>X</span><span>,</span> <span>0</span><span>))</span>
  <span>_1</span> <span>=</span> <span>torch</span><span>.</span><span>arange</span><span>(</span><span>annotate</span><span>(</span><span>number</span><span>,</span> <span>_0</span><span>),</span> <span>dtype</span><span>=</span><span>None</span><span>,</span> <span>layout</span><span>=</span><span>0</span><span>,</span> <span>device</span><span>=</span><span>torch</span><span>.</span><span>device</span><span>(</span><span>"cuda:0"</span><span>),</span> <span>pin_memory</span><span>=</span><span>False</span><span>)</span>
  <span>return</span> <span>_1</span></code></pre></div>
<!-- raw HTML omitted -->
<blockquote>
  <p><strong>Tensors Created During Tracing Will Have Their Device Pinned</strong></p>
<p>This can be a significant performance and portability problem.</p>

</blockquote>

<h3 id="performance-and-portability">
  Performance and Portability
  <a href="#performance-and-portability">#</a>
</h3>
<p>If we later deserialize and run this TorchScript in <code>libtorch</code> the <code>arange</code> tensor will always be created on the device that is pinned ‚Äî <code>torch.device("cpu")</code> or <code>torch.device("cuda:0")</code> in the examples above. If the rest of the model is running on a different device this can result in costly memory transfers and synchronization.</p>
<p>This device pinning issue extends to multi-GPU scenarios as well. If you have traced and exported a model on <code>cuda:0</code> and then run it on <code>cuda:1</code> you‚Äôll see transfers and synchronization between the devices. Not good. Perhaps even worse, if such a model is run in an environment without any CUDA-capable device it will fail since <code>cuda:0</code> doesn‚Äôt exist.</p>
<blockquote>
  <p><strong>Replace Tensors Created During Execution With Parameters</strong></p>
<p>Tensors created in the execution path while tracing will have their device pinned. Depending on model logic, these can often be turned into Parameters created during construction.</p>

</blockquote>

<p>An example of the problem looks like this in Nsight Systems:</p>








<a href="https://paulbridger.com/posts/mastering-torchscript/images/pinned_devices.png">
    <figure>
        <img src="https://paulbridger.com/posts/mastering-torchscript/images/pinned_devices_hub20c76c57b334a1bd11edec46dac0166_414004_896x580_fill_box_top_2.png" width="896" height="580">
        <figcaption><small></small></figcaption>
    </figure>
</a>

<h3 id="tensor-subscript-mask-and-indexing-will-pin-devices">
  Tensor Subscript Mask and Indexing Will Pin Devices
  <a href="#tensor-subscript-mask-and-indexing-will-pin-devices">#</a>
</h3>
<p>Unlike their more explicit counterparts (<code>masked_select</code> and <code>index_select</code>), using tensor subscripting will pin the mask or indexes to the tracing device:</p>
<div><pre><code data-lang="python"><span>def</span> <span>forward</span><span>(</span><span>X</span><span>):</span>
    <span>return</span> <span>X</span><span>[</span><span>X</span> <span>&gt;</span> <span>1</span><span>]</span></code></pre></div>
<p>Generates this TorchScript:</p>
<div><pre><code data-lang="python"><span>def</span> <span>forward</span><span>(</span><span>X</span><span>:</span> <span>Tensor</span><span>)</span> <span>-&gt;</span> <span>Tensor</span><span>:</span>
  <span>_0</span> <span>=</span> <span>torch</span><span>.</span><span>to</span><span>(</span><span>torch</span><span>.</span><span>gt</span><span>(</span><span>X</span><span>,</span> <span>1</span><span>),</span> <span>dtype</span><span>=</span><span>11</span><span>,</span> <span>layout</span><span>=</span><span>0</span><span>,</span> <span>device</span><span>=</span><span>torch</span><span>.</span><span>device</span><span>(</span><span>"cpu"</span><span>),</span> <span>pin_memory</span><span>=</span><span>False</span><span>,</span> <span>non_blocking</span><span>=</span><span>False</span><span>,</span> <span>copy</span><span>=</span><span>False</span><span>,</span> <span>memory_format</span><span>=</span><span>None</span><span>)</span>
  <span>_1</span> <span>=</span> <span>annotate</span><span>(</span><span>List</span><span>[</span><span>Optional</span><span>[</span><span>Tensor</span><span>]],</span> <span>[</span><span>_0</span><span>])</span>
  <span>return</span> <span>torch</span><span>.</span><span>index</span><span>(</span><span>X</span><span>,</span> <span>_1</span><span>)</span></code></pre></div>
<!-- raw HTML omitted -->
<p>Whereas:</p>
<div><pre><code data-lang="python"><span>def</span> <span>forward</span><span>(</span><span>X</span><span>):</span>
    <span>return</span> <span>X</span><span>.</span><span>masked_select</span><span>(</span><span>X</span> <span>&gt;</span> <span>1</span><span>)</span></code></pre></div>
<p>Generates this TorchScript:</p>
<div><pre><code data-lang="python"><span>def</span> <span>forward</span><span>(</span><span>X</span><span>:</span> <span>Tensor</span><span>)</span> <span>-&gt;</span> <span>Tensor</span><span>:</span>
  <span>_0</span> <span>=</span> <span>torch</span><span>.</span><span>masked_select</span><span>(</span><span>X</span><span>,</span> <span>torch</span><span>.</span><span>gt</span><span>(</span><span>X</span><span>,</span> <span>1</span><span>))</span>
  <span>return</span> <span>_0</span></code></pre></div>
<!-- raw HTML omitted -->
<p>The same pattern holds for <code>tensor[indexes]</code> and <code>tensor.index_select(0, indexes)</code>. This device pinning carries the same performance and portability risks as noted above.</p>
<blockquote>
  <p><strong>Replace Tensor Subscripting With <code>masked_select</code> and <code>indexed_select</code></strong></p>
<p>Subscript-based masking and indexing will always pin the tracing device into generated TorchScript. :(</p>

</blockquote>

<h2 id="direct-graph-modification">
  Direct Graph Modification
  <a href="#direct-graph-modification">#</a>
</h2>
<p>Once we‚Äôve used <code>torch.jit.script</code> or <code>torch.jit.trace</code> to generate a ScriptModule or ScriptFunction we can use <code>.graph</code>, <code>.inlined_graph</code> or <code>.code</code> to understand exactly what TorchScript has been generated. Though it has an entirely undocumented interface it is possible (and fun) to access and modify the generated TorchScript AST directly via the <code>.graph</code> method.</p>
<p>The most useful parts of the API are defined in <a href="https://github.com/pytorch/pytorch/blob/master/torch/csrc/jit/python/python_ir.cpp">torch/csrc/jit/python/python_ir.cpp</a>. As you can see, all the basic functionality is present for finding and changing the graph nodes you want. If you change nodes or arguments and then persist the module your subsequent TorchScript load and inference will reflect your changes, though modules cannot be changed recursively in this way (<code>torch.jit.freeze</code> can be useful here).</p>
<p>An example of the kind of graph modification that is possible:</p>
<div><pre><code data-lang="python"><span>def</span> <span>undevice</span><span>(</span><span>tsc</span><span>):</span>
    <span># use ::to variant which does not hardcode device</span>
    <span>for</span> <span>to_node</span> <span>in</span> <span>tsc</span><span>.</span><span>graph</span><span>.</span><span>findAllNodes</span><span>(</span><span>'aten::to'</span><span>):</span>
        <span>i</span><span>,</span> <span>dtype</span><span>,</span> <span>layout</span><span>,</span> <span>device</span><span>,</span> <span>pin_mem</span><span>,</span> <span>non_blocking</span><span>,</span> <span>copy</span><span>,</span> <span>mem_format</span> <span>=</span> <span>list</span><span>(</span><span>to_node</span><span>.</span><span>inputs</span><span>())</span>
        <span>to_node</span><span>.</span><span>removeAllInputs</span><span>()</span>
        <span>for</span> <span>a</span> <span>in</span> <span>[</span><span>i</span><span>,</span> <span>dtype</span><span>,</span> <span>non_blocking</span><span>,</span> <span>copy</span><span>,</span> <span>mem_format</span><span>]:</span>
            <span>to_node</span><span>.</span><span>addInput</span><span>(</span><span>a</span><span>)</span>

    <span>for</span> <span>constant</span> <span>in</span> <span>tsc</span><span>.</span><span>graph</span><span>.</span><span>findAllNodes</span><span>(</span><span>'prim::Constant'</span><span>):</span>
        <span>if</span> <span>not</span> <span>constant</span><span>.</span><span>hasUses</span><span>():</span>
            <span>constant</span><span>.</span><span>destroy</span><span>()</span></code></pre></div>
<p>The above code will modify a traced graph, changing <code>aten::to</code> to use an overload which doesn‚Äôt change memory location.</p>
<p>But what is this really useful for? As an undocumented API you‚Äôd be unwise to use this capability in a production pipeline unless you like maintenance coding. I would only recommend it for research, as in the above example which I used to understand and profile the transfer/synchronization behavior of tensor subscripting.</p>
<blockquote>
  <p><strong>Don‚Äôt Bother With Direct Graph Modification</strong></p>
<p>For legitimate production use-cases you can almost always find a way to modify your model code to generate the TorchScript you want.</p>

</blockquote>

<h2 id="rewrite-for-onnxtensorrt-export">
  Rewrite for ONNX/TensorRT Export
  <a href="#rewrite-for-onnxtensorrt-export">#</a>
</h2>
<p>You can get some <a href="https://paulbridger.com/posts/video-analytics-deepstream-pipeline/#stage-3-hacked-deepstream-mdash-80-tensorrt-20-torchscript">awesome results with TensorRT</a> but exporting a model from Pytorch to TensorRT is far from a sure thing. The export path to ONNX and then to TensorRT can fail due to missing or incompatible operations at either step and this can be frustrating.</p>
<p>After the obligatory Google search, I‚Äôve found a reasonable hail-mary approach is to rewrite your tensor processing code to avoid unsupported operators. I can‚Äôt give general advice for this but let me show you an example of how this can be possible: <code>repeat_interleave</code>.</p>
<div><pre><code data-lang="python"><span>class</span> <span>RI</span><span>(</span><span>torch</span><span>.</span><span>nn</span><span>.</span><span>Module</span><span>):</span>
    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>X</span><span>,</span> <span>repeat</span><span>):</span>
        <span>return</span> <span>X</span><span>.</span><span>repeat_interleave</span><span>(</span><span>repeat</span><span>,</span> <span>dim</span><span>=</span><span>0</span><span>)</span>

<span>inputs</span> <span>=</span> <span>(</span><span>torch</span><span>.</span><span>arange</span><span>(</span><span>5</span><span>),</span> <span>torch</span><span>.</span><span>tensor</span><span>(</span><span>3</span><span>))</span>
<span>torch</span><span>.</span><span>onnx</span><span>.</span><span>export</span><span>(</span><span>RI</span><span>(),</span> <span>inputs</span><span>,</span> <span>'please_work.onnx'</span><span>,</span> <span>opset_version</span><span>=</span><span>11</span><span>)</span></code></pre></div>
<p>Doesn‚Äôt work:</p>
<div><pre><code data-lang="bash">RuntimeError: Exporting the operator repeat_interleave to ONNX opset version <span>11</span> is not supported. Please open a bug to request ONNX <span>export</span> support <span>for</span> the missing operator.</code></pre></div>
<p>However, the behavior of <code>repeat_interleave</code> with a fixed <code>dim</code> argument can be replicated in a form that will export to ONNX ‚Ä¶</p></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://paulbridger.com/posts/mastering-torchscript/">https://paulbridger.com/posts/mastering-torchscript/</a></em></p>]]>
            </description>
            <link>https://paulbridger.com/posts/mastering-torchscript/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24941642</guid>
            <pubDate>Fri, 30 Oct 2020 12:46:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Human-Centered Programming]]>
            </title>
            <description>
<![CDATA[
Score 18 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24941429">thread link</a>) | @todsacerdoti
<br/>
October 30, 2020 | http://codepunk.io/human-centered-programming/ | <a href="https://web.archive.org/web/*/http://codepunk.io/human-centered-programming/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <!-- Begin MailChimp Signup Form -->
            
            
            
            <!--End mc_embed_signup-->
            <blockquote>
  <p>Michael,</p>
  
  <p>Thanks for your interest in L3-AI! We're excited to feature your presentation. </p>
  
  <p>Would you be able to condense your proposal into a 5 minute lightning talk?  If this sounds good to you, I'll schedule next steps [...]</p>
</blockquote>

<p>Actually... I submitted to do a lightning talk, so no problem, right? I've <a href="https://codepunk.io/why-i-love-lightning-talks/">mentioned before</a> that too often people see lightning talks as a consolation price, but I use them to test out new ideas, and it requires a special set of skills to get those ideas across in a short amount of time.</p>

<p>Unlike in the past where my focus was explicitly on the Microsoft Bot Framework, I had recently expanded to a greater analysis of frameworks like <a href="https://rasa.com/">Rasa</a> and <a href="https://www.botkit.ai/">Ben Brown's Botkit</a>. After conversations with Chris Mullins at Microsoft, I really started applying a more critical eye towards the frameworks I'd been using, but was taking for granted.</p>

<p>Specifically, I was unconvinced that the way frameworks were being built constituted an appropriate approach. We're not talking about programming-centric frameworks. Conversational software is about a conversation-first approach, and the frameworks for building conversational software should allow the programmer to program in a way that represents how a conversation flows. (Brown's Botkit does a good job of this with the names of its methods and classes.)</p>

<p>I decided to built a chatbot framework from scratch in order to explore these ideas and settled on conversation analysis as a theory to apply. This led to several presentations over the course of the Summer, including Rasa's L3-AI. I expanded on this presentation in latter virtual conferences, and being influenced by the pandemic, politics, and the overall despair of the state of affairs, this expanded presentation took quite an unexpected turn.</p>

<hr>

<p>LinkedIn can be a valuable tool and a painful platform all in the same minute. The more active you become, the more noticed you are, and the more likely you'll start getting random InMail's and connection invites from people you don't know. If you're lucky recruiters will use the InMail feature where they have a limited number of cold requests. Mostly, though, they just send you a random connection request and put their message in the invite to try to avoid burning their InMails.</p>

<p>I have a general rule: If I don't know you and you send a connection request without a personal message, I ignore it outright. If it does have a personal message, I hope it's relevant.</p>

<p>When I received an invite from <a href="https://www.linkedin.com/in/brian-greenwald-108/">Brian Greenwald</a>, he at least followed the appropriate etiquette. The Vice President of Business Development for <a href="https://generateimpact.com/">Generate Impact</a>, Brian was a new addition to the unfolding story of Chiedo Labs‚Äîa local Harrisonburg development shop spawned from the machinations of James Madison University student Chiedo John. I was familiar Chiedo Labs from some local tech circles and was connected to Chiedo and a few employees through LinkedIn. Chiedo and I both spoke at Nation JS in Washington, DC the previous year and had exchanged a few emails.</p>

<p>Chiedo was always a faith-based person, while Chiedo Labs‚Äîalthough a good group of people‚Äîwas fighting an uphill battle trying to distinguish itself in custom development where its a race to the bottom on client pricing. So it made sense when the company converted from Chiedo Labs to Generate Impact and began a concentrated effort towards focusing on helping non-profits.</p>

<p>But it wasn't long before Chiedo jumped ship to greener pastures at GitHub, while Brian and Mike Forster (Generate Impact president) were piloting the transformation of the company.</p>

<hr>

<blockquote>
  <p>Hi Michael! That‚Äôs awesome that you know Chiedo! He was one of my clients and [as] fortune would have it we ended up merging what I do with Generate Impact. [...] I would love to meet for coffee - seems like it will be a while unfortunately. We are hunkered down here in Earlysville. Would love to learn about what you are doing...maybe we can schedule a zoom call sometime.</p>
</blockquote>

<p>I agreed.</p>

<p>I also didn't expect a Zoom call to be scheduled immediately for the following week. It smelled a little of a cold call, which I'm never receptive to. Still, I was familiar with the company and some of the team members, so at worst, I would fly into the meeting with little need to put a lid on my opinions or personality.</p>

<p>My conversation with Brian came just after the COVID-19 pandemic began shutting down much of the United States, and I had already begun reading articles about the reshaping of economic needs and drivers. What started as a discussion of engineering proficiency, DevOps, and business-oriented IT processes escalated into the public good side of non-profits, B-corps, and the fundamentally optimistic assumption that <em>something has to give</em>. Corporations cannot continue on an infinite growth curve, and the pandemic represented an unprecedented opportunity to hit reset on corporate values and strive for something more than the upwards extraction of wealth.</p>

<p>Having previously interviewed enterprise architect Bryan Betts‚Äîsomeone who has spend most of his career in public service‚ÄîI remember my colleague asking him about a hypothetical situation of communicating to leadership the ROI of certain better processes and planning.</p>

<blockquote>
  <p>Sometimes its not about the return on investment; Sometimes its just about doing the right thing, and there's value in that alone.</p>
</blockquote>

<p>From Brian Greenwald's side, he had been working for quite some time on the concept of a benevolent business model‚Äîan economic and business planning model that focused on success through the lens of greater inclusiveness and understanding of externalities rather than pure financial extraction‚Äîa model that seeks sustainability and equitability over exponential growth. Brian and I connected enough on a philosophical level that he introduced me to Generate Impact president Mike Forster to further the discuss on the positive technological impact on local businesses and communities. What emerged was a vision of enabling public good through technology, but from the local-first, sustainability approach that has permeated environmental movements‚Äîan acknowledgement that a successful path forward in the new normal consisted of an interrelated approach combining people, processes, and technology.</p>

<blockquote>
  <p>The Benevolent Business Model is anchored in the principle that all human activity exists (or SHOULD exist) to fulfill benevolent human needs. By that principle, a business exists to first CONTRIBUTE to the community it exists in and is building as opposed to focusing on gathering and EXTRACTING as many resources as possible. In other words, profit becomes the enabler of a collective vision of well-being as opposed to the end goal itself.</p>
  
  <p>Of course, the irony of this approach, particularly in the world we are living in today, is that focusing on the benevolence of EVERY member of the business community is MORE likely to be a strategic advantage and thus lead to more success and profit than the traditional "business as an army going to battle" approach, where victory is possible, but in the long run the cost to society is high.</p>
</blockquote>

<p>We can't forget about the people.</p>

<hr>

<p><img src="http://codepunk.io/content/images/2020/10/hcp-1.png" alt="Open Sector"></p>

<p>Typically when we talk about economic sectors, the focus is generally on the public and private sectors, and most don't consider if there is anything else on the outer boundaries. But recent analyses by market-watchers like <a href="https://www.exponentialview.co/">Azeem Azar</a> have pointed out the ever-growing sector (and importance) of open source software and technology. We‚Äôre used to hearing about the public sector and the private sector, what has been continuing to gain stream is this idea of an "open" sector.</p>

<p>COVID-19 has shown us the value of open data, and how that sharing can speed up understanding and innovation. In fact, open source software, open data, crowd-sourcing solutions, and crowd-funding projects, combined with efforts like GitHub Sponsors, Patreon, and Ko-Fi are carving out a sector that isn‚Äôt quite public, but isn‚Äôt private either. It‚Äôs an open, more democratic sector for a society looking to advance common goals.</p>

<p>This open sector is more prevalent in the technology industry than anywhere else, and it feeds both the private and public sector, such as open source software enabling and enhancing companies in either or those sectors. In fact, it feels like we've come full circle back to the original hackers of the 70's and 80's‚Äîproducing software in a left-libertarian form of mutualism.</p>

<p>But oftentimes, our technology accelerates faster than our morality, and we occasionally need to step back and reevaluate our positions. For example, there is a disconnect between the programmers and researchers working hard on facial recognition software for the advancement of the theories and technology, and the fundamentally immoral use of facial recognition software in racial profiling and identifying protesters.</p>

<p>If you're at all familiar with <a href="https://logicmag.io/">Logic Magazine</a>, you've read some of the more significant techno-societal ponderings that are invading Silicon Valley's philosophical outlook, such as Astra Taylor's take down of the "security" of capitalism in <a href="https://logicmag.io/security/the-insecurity-machine/"><em>The Insecurity Machine</em></a>, which shows how technology is applied not to create more security for individuals, but to enhance greater security for ownership.</p>

<p><img src="http://codepunk.io/content/images/2020/10/hcp-2.png" alt="Human-Centered Programming"></p>

<p>Human-centered programming is a way of thinking about software that is different from the traditional <em>programmers can do whatever they want because technology is agnostic</em> view. To this respect, programming and technology consist of three important components: code, culture, and conscience. These three components can best be viewed in the traditional triangle trope of related ideas. Like all other triangle diagrams, it implies an interconnectedness between elements.</p>

<p>Code enables culture and culture defines how we code, but without conscience, we won‚Äôt fully understand the impact of the code that we write or the negative directions that our culture ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://codepunk.io/human-centered-programming/">http://codepunk.io/human-centered-programming/</a></em></p>]]>
            </description>
            <link>http://codepunk.io/human-centered-programming/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24941429</guid>
            <pubDate>Fri, 30 Oct 2020 12:17:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[MCS-48: The quest for 16-bit division on the 8-bit CPU which can‚Äôt divide]]>
            </title>
            <description>
<![CDATA[
Score 39 | Comments 29 (<a href="https://news.ycombinator.com/item?id=24941189">thread link</a>) | @noexani
<br/>
October 30, 2020 | http://tech.mattmillman.com/mcs-48-the-quest-for-16-bit-division-on-the-8-bit-cpu-which-cant-divide-anything/ | <a href="https://web.archive.org/web/*/http://tech.mattmillman.com/mcs-48-the-quest-for-16-bit-division-on-the-8-bit-cpu-which-cant-divide-anything/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-4862">
	
	<!-- .entry-header -->

		<div>
		
<p>Recently while working on my <a href="http://tech.mattmillman.com/projects/an-intel-mcs-48-based-dual-temperature-sensor/">MCS-48 temperature sensor</a> project I had to confront one of the largest challenges, which is to implement an option where changing a jumper displayed Fahrenheit instead of Celsius. The output from the DS18B10 temperature sensors is Celsius only, as it should be, so a conversion would need to be performed.</p>



<figure><img src="http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/CodeCogsEqn.gif" alt=""><figcaption>A quick reminder of the conversion needed to be performed</figcaption></figure>



<p>In my case it‚Äôs +320 as I‚Äôm using fixed point arithmetic i.e. 15.3¬∞ = 153. This is a tough conversion to perform on an MCS-48 as a slew of different operations are required:</p>



<ul><li>16-bit negate (more about that below)</li><li>16-bit unsigned multiply</li><li>16-bit unsigned divide</li><li>16-bit add with wrap-around</li></ul>



<p>A tall order for a CPU which has just <em>one </em>math instruction: 8-bit add. To perform all of this, one must sling a long sequence of primitive instructions together. Since this is an assembly language only architecture, I couldn‚Äôt cheat by compiling it in C and pinching the resulting instructions as I have done for PIC16 in the past.</p>



<p><em>Edit: Since publishing this a cornucopia of different approaches to this problem have been proposed to me. I‚Äôm happy with implementation as it currently stands. It works, it makes very efficient use of program memory, the improved performance is not required, and the above math routines are re-used for other tasks in the project.</em></p>



<p>The best place to find such examples is in the MCS-48 assembly language manual:</p>



<figure><a href="http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/manual.jpg"><img src="http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/manual-800x638.jpg" alt="" srcset="http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/manual-800x638.jpg 800w, http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/manual-300x239.jpg 300w, http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/manual-150x120.jpg 150w, http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/manual-768x612.jpg 768w, http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/manual-1536x1224.jpg 1536w, http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/manual-2048x1633.jpg 2048w" sizes="(max-width: 800px) 100vw, 800px"></a></figure>



<p>(A scan of it can be viewed <a href="http://www.nj7p.org/Manuals/PDFs/Intel/9800255D.pdf">here</a>). Everything I needed was in there, except how to divide. There is no mention whatsoever in that manual of how to perform any kind of division operation, <em>but</em>, tacked in the back of the 1980 edition MCS-48 handbook, I found this:</p>



<figure><a href="http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/isisdiv.png"><img src="http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/isisdiv-623x800.png" alt="" srcset="http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/isisdiv-623x800.png 623w, http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/isisdiv-233x300.png 233w, http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/isisdiv-117x150.png 117w, http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/isisdiv-768x987.png 768w, http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/isisdiv-1195x1536.png 1195w, http://techmattmillman.s3.amazonaws.com/wp-content/uploads/2020/10/isisdiv.png 1263w" sizes="(max-width: 623px) 100vw, 623px"></a><figcaption>Woohoo! A working divide routine for MCS-48. It wouldn‚Äôt OCR, so I typed it up.</figcaption></figure>



<p>Unfortunately that routine only has an 8-bit quotient, which isn‚Äôt much use for my application because it would overflow in most cases.</p>



<p>I was easily able to work around that with the following implementation (pseudo code):</p>



<pre><code>if (celsius &lt; 0)
{   // If negative, note it, and make it positive
    // so we can work with simpler unsigned routines below
    celsius = -celsius;
    is_negative = 1;
}

fahrenheit = multiply_16x8r16(celsius, 9);

// Divide by 50 so the result of divide_16x8r8 doesn't overflow
fahrenheit = divide_16x8r8(fahrenheit, 50, &amp;remainder);

// Multiply it back up
fahrenheit = multiply_16x8r16(fahrenheit, 10);

// Factor remainder
remainder = multiply_16x8r16(remainder, 10);

// Divide and add remainder
fahrenheit += divide_16x8r8(remainder, 50, NULL);

if (is_negative)
{   // Make it negative again, if it was previously
    is_negative = 1;
}

// Add 32. Requires a 16-bit add with wrap around to
// correctly handle negative temperatures
fahrenheit += 320</code></pre>



<p>While that does the job, it‚Äôs poo poo. What I really want is that complicated looking divide routine to have a 16-bit quotient, so I can do the division in a single operation. To help me understand it, I translated it to C code:</p>



<pre><code>uint8_t mcs48_divide(uint16_t dividend, uint8_t divisor, uint8_t *remainder)
{
    if ((dividend &gt;&gt; 8) &gt;= divisor)
        goto mcs48_div_exit; // Impossible. Result would
                             // overflow. Bail.

    for (int i = 0; i &lt; 8; i++) // One pass for each bit of result
    {
        uint8_t msb;
        uint8_t bit15_was_set = 0;

        if (dividend &amp; 0x8000)
            bit15_was_set = 1; // Note if this was set,

        dividend &lt;&lt;= 1; // Next bit

        msb = (dividend &gt;&gt; 8);
        if (msb &gt;= divisor || bit15_was_set)
        {
            // Subtract remainder from MSB,
            // preserve and increment quotient
            dividend = (((msb - divisor) &lt;&lt; 8) | (dividend &amp; 0xFF)) + 1;
        }
    }

mcs48_div_exit:
    *remainder = (dividend &gt;&gt; 8);
    return (dividend &amp; 0xFF);
}</code></pre>



<p>It‚Äôs immediately clear that it‚Äôs a <a href="https://www.wikihow.com/Divide-Binary-Numbers">binary division</a> implementation. What wasn‚Äôt immediately clear is how to make the change I wanted. I put the question to <a href="https://stackoverflow.com/questions/64544654/can-anyone-figure-out-how-to-extend-this-software-divide-routine-to-have-a-16-bi/64549557#64549557">stack overflow</a>, and on the face of it, it looked like a dumb question, i.e. just double the integer type sizes, <em>stupid</em>. predictably I got punished with a bunch of down-votes.</p>



<p>Yes we can do that, but it‚Äôs not what I want to do to the assembly routine that I‚Äôm trying to modify, so perhaps I didn‚Äôt quite ask the question as well as I could have done. The answer provided sent me in the right direction, in that the working accumulator needs to be larger, 24-bits in my case, and the 16-bit shift needs to be a 24-bit.</p>



<pre><code>uint16_t mcs48_div16(uint16_t dividend, uint8_t divisor, uint8_t *remainder)
{
    uint32_t accumulator = dividend;

    for (int i = 0; i &lt; 16; i++) // One pass for each bit of result
    {
        uint8_t msb;
        uint8_t bit24_was_set = 0;

        if (accumulator &amp; 0x800000)
            bit24_was_set = 1; // Note if this was set,
                               // can't check if after shift.

        accumulator &lt;&lt;= 1; // Next bit
        accumulator &amp;= 0xFFFFFF; // Simulate 24 bit type

        msb = (accumulator &gt;&gt; 16);
        if (msb &gt;= divisor || bit24_was_set)
        {
            // Subtract remainder from MSB,
            // preserve and increment quotient
            accumulator = (((msb - divisor) &lt;&lt; 16) | (accumulator &amp; 0xFFFF)) + 1;
        }
    }

mcs48_div_ext_exit:
    *remainder = (accumulator &gt;&gt; 16);
    return (accumulator &amp; 0xFFFF);
}</code></pre>



<p>Above is the pseudo code of my routine after the changes. In the final implementation registers A, R1 and R2 hold the 24-bit accumulator, so this doesn‚Äôt translate too well to C because there isn‚Äôt a 24-bit integer type.</p>



<p>The final changes to the routine can be viewed <a href="https://github.com/inaxeon/mcs48temp/compare/e006467..a531d32">here</a>.</p>



<p>Ah, that‚Äôs better.</p>
	</div><!-- .entry-content -->
	
	</article></div>]]>
            </description>
            <link>http://tech.mattmillman.com/mcs-48-the-quest-for-16-bit-division-on-the-8-bit-cpu-which-cant-divide-anything/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24941189</guid>
            <pubDate>Fri, 30 Oct 2020 11:39:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Awk: `Begin { ` Part 1]]>
            </title>
            <description>
<![CDATA[
Score 215 | Comments 101 (<a href="https://news.ycombinator.com/item?id=24940661">thread link</a>) | @quyleanh
<br/>
October 30, 2020 | https://jemma.dev/blog/awk-part-1 | <a href="https://web.archive.org/web/*/https://jemma.dev/blog/awk-part-1">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>The other day, I was watching Bryan Cantrill‚Äôs 2018 talk, <a href="https://www.youtube.com/watch?v=2wZ1pCpJUIM">Rust, and Other Interesting Things</a>, and he made an offhanded comment while discussing values of different programming languages and communities. He said, ‚ÄúIf you get the <a href="https://www.gnu.org/software/gawk/manual/gawk.html">awk programming language manual</a>‚Ä¶you‚Äôll read it in about two hours and then you‚Äôre done. That‚Äôs it. You know all of awk.‚Äù</p>

<p>Only two hours to learn an entire language?! ‚Ä¶. Challenge accepted!</p>

<p>I had previously used snippets of awk here and there. Most of them were given to me by Stack Overflow answers when googling for niche data file manipulations. But, I did not know enough to successfully write an awk program from scratch. I definitely did not have a real grasp on the language nor its power. And, a couple of hours sounded like a relatively small time investment to learn what Bryan Cantrill said was a language he used three times a day.</p>

<p>It turns out it takes more than two hours to learn awk, and I am by no means an expert‚Ä¶ yet (growth mindset!). But, I now know enough to write a little about the essentials. Here goes!</p>

<h3 id="what-is-awk-useful-for">What is awk useful for?</h3>

<p>Awk is useful for data file manipulation. Already, having used it for a few days only, I wish I had invested time in learning it earlier. My usual workflow when encountering a data file is to import it into Google Sheets and use their builtin functions. If those weren‚Äôt enough, I would write little code snippets to somewhat awk..wardly get the information I want. Awk is way more powerful than what I was doing before. Let‚Äôs take a look:</p>

<h3 id="running-awk-programs">Running awk programs</h3>

<p>If we‚Äôre going to learn awk, we need to know how to run an awk program. The syntax to run an awk program in a shell is:</p>
<div><div><pre><code><span>$ </span><span>awk</span> <span>'awk_program_contents'</span> data-file-1 data-file-2
</code></pre></div></div>
<p>We can also write a longer awk program to run instead of writing the awk code inline. We could write a file with awk codeand then pass inline to awk with <code>-f &lt;awk-program-filename&gt;</code></p>
<div><div><pre><code><span>$ </span><span>awk</span> <span>-f</span> awk-program.awk data-file-1 data-file-2
</code></pre></div></div>

<h3 id="awk-program-contents">awk program contents</h3>

<p>Well, what is an awk program? We know it is best used for simple data reformatting or manipulation. The way it does this is by performing different actions on different patterns within a data file. The basic syntax of an awk program depends on these pattern and actions.</p>

<div><div><pre><code>pattern <span>{</span> action <span>}</span>
pattern <span>{</span> action <span>}</span>
...
</code></pre></div></div>

<p>We can give as many <code>pattern { action }</code> pairs as we want. Each pair will be executed independently of the others. This means if a line matches more than one pattern, it will have more than one corresponding action. In the example above we use newlines to separate distinct pairs. Similar to bash, we can also use <code>;</code> to separate commands and put everything on one line: <code>pattern { action }; pattern { action }</code></p>

<h3 id="awk-with-data-files">awk with data files</h3>

<p>But, it turns out awk is much more useful (and fun!) with a data file. The UN has a few <a href="https://data.un.org/">publicly available datasets</a>. I picked <a href="https://data.un.org/_Docs/SYB/CSV/SYB62_309_201906_Education.csv">this one</a> on education at the primary, secondary and tertiary levels to delve into first.</p>

<p>Let‚Äôs start by using awk to get a sense of what the data looks like.  <code>NR</code> is a predefined variable which records the number of rows read in a file so far. We can use it to look at the first few lines of a program. In this case, our pattern will be <code>NR &lt;= 5</code>, and by not including an action, the implied action will be <code>print</code>:</p>
<div><div><pre><code><span>$ </span><span>awk</span> <span>'NR &lt;= 5'</span> education.csv
T07,<span>"Enrolment in primary, secondary and tertiary education levels"</span>,,,,,
Region/Country/Area,,Year,Series,Value,Footnotes,Source
1,<span>"Total, all countries or areas"</span>,2005,Students enrolled <span>in </span>primary education <span>(</span>thousands<span>)</span>,<span>"678,991.6070"</span>,,<span>"United Nations Educational, Scientific and Cultural Organization (UNESCO), Montreal, the UNESCO Institute for Statistics (UIS) statistics database, last accessed March 2019."</span>
1,<span>"Total, all countries or areas"</span>,2005,Gross enrollement ratio - Primary <span>(</span>male<span>)</span>,104.9360,,<span>"United Nations Educational, Scientific and Cultural Organization (UNESCO), Montreal, the UNESCO Institute for Statistics (UIS) statistics database, last accessed March 2019."</span>
1,<span>"Total, all countries or areas"</span>,2005,Gross enrollment ratio - Primary <span>(</span>female<span>)</span>,99.9214,,<span>"United Nations Educational, Scientific and Cultural Organization (UNESCO), Montreal, the UNESCO Institute for Statistics (UIS) statistics database, last accessed March 2019."</span>
</code></pre></div></div>
<p>Okay, so looks like this is giving us a bit of information about our file. Notably:</p>
<ol>
  <li>There are two header rows: a title row, and a row telling us what the fields are</li>
  <li>The file is comma separated</li>
  <li>‚Ä¶ except there are sometimes commas within double quoted strings: <code>"Total, all countries or areas"</code></li>
</ol>

<p>Let‚Äôs address these one by one!</p>



<p>We can ignore the first two header rows by using our nifty <code>NR</code> moving forward. We can pattern match that <code>NR &gt; 2</code>. Note: awk is 1-indexed.</p>
<div><div><pre><code><span>$ </span><span>awk</span> <span>'NR &gt; 2'</span> education.csv
</code></pre></div></div>

<h3 id="field-separators">Field Separators</h3>

<p>awk‚Äôs <a href="https://www.gnu.org/software/gawk/manual/gawk.html#Default-Field-Splitting">default field separator</a> is a space. We can actually see this by printing the first field. To access the value of a field, we use <code>$&lt;field_index&gt;</code>. So <code>$1</code> is the first field, <code>$2</code> the second, and so on. <code>$0</code> refers to the entire row.</p>

<p>If we try this:</p>
<div><div><pre><code><span>$ </span><span>awk</span> <span>'NR &lt;= 5 { print $1 }'</span> education.csv
T07,<span>"Enrolment
Region/Country/Area,,Year,Series,Value,Footnotes,Source
1,"</span>Total,
1,<span>"Total,
1,"</span>Total,
</code></pre></div></div>
<p>we can confirm that we‚Äôre splitting on spaces. awk has the option to specify a different field separator with the <code>-F 'separator'</code> flag:</p>
<div><div><pre><code><span>$ </span><span>awk</span> <span>-F</span> <span>','</span> <span>'NR &lt;= 5 { print $1 }'</span> education.csv
T07
Region/Country/Area
1
1
1
</code></pre></div></div>

<p>Great! But‚Ä¶. we had commas embedded within strings with double quotes. Sure enough, if we print the second field (<code>$2</code>), we see:</p>

<div><div><pre><code><span>$ </span><span>awk</span> <span>-F</span> <span>','</span> <span>'NR &lt;= 5 { print $2 }'</span> education.csv
<span>"Enrolment in primary

"</span>Total
<span>"Total
"</span>Total
</code></pre></div></div>

<p>Hmmm. What we want here is to split fields by <em>content</em>. Which awk does not have, but gawk (GNU awk) does: <a href="https://www.gnu.org/software/gawk/manual/gawk.html#Splitting-By-Content">FPAT</a>! From the gawk manual: ‚ÄúAll properly written awk programs should work with gawk. So most of the time, we don‚Äôt distinguish between gawk and other awk implementations.‚Äù</p>

<p>Sounds like we can use gawk here instead then. Let‚Äôs try pattern matching. I‚Äôm not going to go into regex here, but the pattern we want, defined by <code>"[^,]*|\"[^\"]+\""</code> is anything that either starts with a non-comma character, or starts with a double quote, contains only non-quote characters, and ends with a double quote:</p>

<div><div><pre><code><span>$ </span>gawk <span>'BEGIN { FPAT = "[^,]*|\"[^\"]+\"" } NR &lt;= 5 { print $2 }'</span> education.csv
<span>"Enrolment in primary, secondary and tertiary education levels"</span>

<span>"Total, all countries or areas"</span>
<span>"Total, all countries or areas"</span>
<span>"Total, all countries or areas"</span>
</code></pre></div></div>

<p>I snuck a <code>BEGIN</code> in there without explaining it. Let‚Äôs go on a brief tangent‚Ä¶</p>

<h3 id="begin--tangent-">BEGIN { tangent }</h3>

<p>Beyond the pattern and actions, awk also has a concept of <code>BEGIN</code> and <code>END</code> blocks. The <code>BEGIN</code> is executed before any of the data is processed. It can be useful for declaring variables or printing text to appear at the beginning. Analogously, the <code>END</code> is executed after the data is processed. It can be useful for performing manipulations on aggregates of the data, like averaging a sum.</p>

<p>This means if we wanted to write a little ‚ÄúHello, awk!‚Äù program, we could do it without even needing a data file.</p>

<div><div><pre><code><span>$ </span><span>awk</span> <span>'BEGIN { print "Hello, awk!" }'</span>
Hello, <span>awk</span><span>!</span>
</code></pre></div></div>

<h3 id="end--tangent-">END { tangent }</h3>

<p>‚Ä¶back to our example. In our case, we used a <code>BEGIN</code> block to declare the <code>FPAT</code> <em>before</em> reading our data file.</p>

<p>But, we‚Äôve only looked at the first 5 lines. For all we know, the rest of the file could look completely different. Let‚Äôs use <code>NR</code> again to see some more of the file. First, let‚Äôs figure out how long the file is. We can use the <code>END</code> block here. After we‚Äôve parsed the whole file, we can see what the value of <code>NR</code> is, and that‚Äôll tell us how many lines it is:</p>

<div><div><pre><code><span>$ </span><span>awk</span> <span>'END { print NR }'</span> education.csv
8630
</code></pre></div></div>

<p>Okay, so maybe if we print every 500 lines, we‚Äôll get a sense of what data we‚Äôre looking at. We can set our pattern to be only if <code>NR</code> is a multiple of <code>500</code>:</p>
<div><div><pre><code><span>$ </span><span>awk</span> <span>'NR % 500 == 0'</span> education.csv
</code></pre></div></div>

<p>‚Ä¶ and I‚Äôm going to leave this blog post on a real cliff hanger. Mostly because it already feels too long! There‚Äôs <a href="https://jemma.dev/blog/awk-part-2">a second post</a> about awk actually looking at the data and manipulating it to figure out which countries have stark differences in number of males and females that they educate.</p>

<h3 id="tldr-or-tlskimmed-far-enough-to-get-here-please-give-me-the-shorter-version">TL;DR or TL;Skimmed far enough to get here, please give me the shorter version:</h3>
<p>To rehash what we‚Äôve learned about awk:</p>
<ul>
  <li>awk is run using <code>awk 'awk_program' data-file</code></li>
  <li>awk programs have the form <code>pattern { action }; pattern { action };</code></li>
  <li><code>BEGIN</code> blocks are executed before reading data files</li>
  <li><code>END</code> blocks are executed after reading data files</li>
  <li><code>NR</code> is a variable that tells us the number of rows read</li>
  <li><code>-F '&lt;separator&gt;'</code> is how we can define a field separator for a file</li>
  <li>Space is the default field separator</li>
  <li><code>FPAT="..."</code> is a way to use regex to define a pattern for each field</li>
  <li><code>FPAT</code> is only defined in gawk</li>
</ul>


  </div>
</article>

      </div>
    </div></div>]]>
            </description>
            <link>https://jemma.dev/blog/awk-part-1</link>
            <guid isPermaLink="false">hacker-news-small-sites-24940661</guid>
            <pubDate>Fri, 30 Oct 2020 09:51:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Backtest Trading Strategies: A Quantopian Alternative]]>
            </title>
            <description>
<![CDATA[
Score 30 | Comments 11 (<a href="https://news.ycombinator.com/item?id=24940644">thread link</a>) | @hydershykh
<br/>
October 30, 2020 | https://www.tradytics.com/backtester | <a href="https://web.archive.org/web/*/https://www.tradytics.com/backtester">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

        <div>
          <p>
            <h4>Trading Strategies Backtester</h4>
            <h5>Backtest your favorite technical analysis based strategies with our backtester.</h5>
          </p>
          
        </div>

        <div>
          

          <div>
            <div>
              <p>
                <h5>Buy Strategy</h5>
              </p>
              <div>
                <div>
                  
                  <div aria-labelledby="dropdownMenuButtonBuy">
                    <p onclick="make_current_ta('RSI')">RSI</p>
                    <p onclick="make_current_ta('CCI')">CCI</p>
                    <p onclick="make_current_ta('MFI')">MFI</p>
                    <p onclick="make_current_ta('MACD')">MACD</p>
                    <p onclick="make_current_ta('ATR')">ATR</p>
                    <p onclick="make_current_ta('ADX')">ADX</p>
                    <p onclick="make_current_ta('STOCHS')">STOCHS</p>
                  </div>
                </div>
                
                
                </div>
              <div>
                <h6>Pre-made</h6>
                <div>
                  <div aria-labelledby="dropdownMenuButtonPremade">
                    <p onclick="make_current_strategy('EMA9 > EMA20')">9EMA &gt; 20EMA</p>
                    <p onclick="make_current_strategy('EMA20 > EMA50')">20EMA &gt; 50EMA</p>
                    <p onclick="make_current_strategy('EMA9 < EMA20')">9EMA &lt; 20EMA</p>
                    <p onclick="make_current_strategy('EMA20 < EMA50')">20EMA &lt; 50EMA</p>
                    <p onclick="make_current_strategy('EMA20 > Price')">20EMA &gt; Price</p>
                    <p onclick="make_current_strategy('EMA50 > Price')">50EMA &gt; Price</p>
                    <p onclick="make_current_strategy('EMA20 < Price')">20EMA &lt; Price</p>
                    <p onclick="make_current_strategy('EMA50 < Price')">50EMA &lt; Price</p>
                    <p onclick="make_current_strategy('obv_slope > 0')">Pos OBV Slope</p>
                    <p onclick="make_current_strategy('obv_slope < 0')">Neg OBV Slope</p>
                    <p onclick="make_current_strategy('VWAP > Price')">VWAP &gt; Price</p>
                    <p onclick="make_current_strategy('VWAP < Price')">VWAP &lt; Price</p>
                    <p onclick="make_current_strategy('SIGNAL > MACD')">Signal &gt; MACD</p>
                    <p onclick="make_current_strategy('SIGNAL < MACD')">Signal &lt; MACD</p>
                    <p onclick="make_current_strategy('hband > Price')">UpperBollinger &gt; Price</p>
                    <p onclick="make_current_strategy('lband < Price')">LowerBollinger &lt; Price</p>
                    <!--<p class="dropdown-item" onclick="make_current_strategy('At Support')">At Support</p>
                    <p class="dropdown-item" onclick="make_current_strategy('At Resistance')">At Resistance</p>-->
                  </div>
                </div>
                </div>
            </div>
          </div>



          <div>
            <div>
              <p>
                <h5>Sell Strategy</h5>
              </p>
              <div>
                <div>
                  
                  <div aria-labelledby="dropdownMenuButtonSell">
                    <p onclick="make_current_ta_sell('RSI')">RSI</p>
                    <p onclick="make_current_ta_sell('CCI')">CCI</p>
                    <p onclick="make_current_ta_sell('MFI')">MFI</p>
                    <p onclick="make_current_ta_sell('MACD')">MACD</p>
                    <p onclick="make_current_ta_sell('ATR')">ATR</p>
                    <p onclick="make_current_ta_sell('ADX')">ADX</p>
                    <p onclick="make_current_ta_sell('STOCHS')">STOCHS</p>
                  </div>
                </div>
                
                
                </div>
              <div>
                <h6>Pre-made</h6>
                <div>
                  <div aria-labelledby="dropdownMenuButtonPremadeSell">
                    <p onclick="make_current_strategy_sell('EMA9 > EMA20')">9EMA &gt; 20EMA</p>
                    <p onclick="make_current_strategy_sell('EMA20 > EMA50')">20EMA &gt; 50EMA</p>
                    <p onclick="make_current_strategy_sell('EMA9 < EMA20')">9EMA &lt; 20EMA</p>
                    <p onclick="make_current_strategy_sell('EMA20 < EMA50')">20EMA &lt; 50EMA</p>
                    <p onclick="make_current_strategy_sell('EMA20 > Price')">20EMA &gt; Price</p>
                    <p onclick="make_current_strategy_sell('EMA50 > Price')">50EMA &gt; Price</p>
                    <p onclick="make_current_strategy_sell('EMA20 < Price')">20EMA &lt; Price</p>
                    <p onclick="make_current_strategy_sell('EMA50 < Price')">50EMA &lt; Price</p>
                    <p onclick="make_current_strategy_sell('obv_slope > 0')">Pos OBV Slope</p>
                    <p onclick="make_current_strategy_sell('obv_slope < 0')">Neg OBV Slope</p>
                    <p onclick="make_current_strategy_sell('VWAP > Price')">VWAP &gt; Price</p>
                    <p onclick="make_current_strategy_sell('VWAP < Price')">VWAP &lt; Price</p>
                    <p onclick="make_current_strategy_sell('SIGNAL > MACD')">Signal &gt; MACD</p>
                    <p onclick="make_current_strategy_sell('SIGNAL < MACD')">Signal &lt; MACD</p>
                    <p onclick="make_current_strategy_sell('hband > Price')">UpperBollinger &gt; Price</p>
                    <p onclick="make_current_strategy_sell('lband < Price')">LowerBollinger &lt; Price</p>
                  </div>
                </div>
                </div>
            </div>
          </div>
          
          
        </div> <!-- row -->


         <!-- row -->

         <!-- row -->

         <!-- row -->

        <div>
          <div>
            <div>
              <div>
                <p>
                  <h6><i data-feather="activity"></i> Win Rate</h6>
                </p>
                <p>Win rate of this strategy.</p>
                
                
              </div>
            </div>
          </div>
          <div>
            <div>
              <div>
                <p>
                  <h6><i data-feather="corner-right-down"></i> Biggest Drawdown</h6>
                </p>
                <p>Highest loss incurred in a trade.</p>
                
              </div>
            </div>
          </div>
          <div>
            <div>
              <div>
                <p>
                  <h6><i data-feather="navigation-2"></i> Biggest Win</h6>
                </p>
                <p>Highest profit gained in a trade.</p>
                
              </div>
            </div>
          </div>
        </div> <!-- row -->


        <div>
          <div>
            <div>
              <div>
                <p>
                  <h6><i data-feather="arrow-up"></i> Long Only</h6>
                </p>
                <p>Profits and losses from long positions.</p>
                
              </div> 
            </div>
          </div>

          <div>
            <div>
              <div>
                <p>
                  <h6><i data-feather="arrow-down"></i> Short Only</h6>
                </p>
                <p>Profits and losses from short positions.</p>
                
              </div> 
            </div>
          </div>
        </div> <!-- row -->

        
        

      </div></div>]]>
            </description>
            <link>https://www.tradytics.com/backtester</link>
            <guid isPermaLink="false">hacker-news-small-sites-24940644</guid>
            <pubDate>Fri, 30 Oct 2020 09:48:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Notes on Nailing Your First Launch by Adam Wathan]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24940629">thread link</a>) | @reconquestio
<br/>
October 30, 2020 | https://samizdat.dev/notes-on-nailing-your-first-launch-by-adam-wathan/ | <a href="https://web.archive.org/web/*/https://samizdat.dev/notes-on-nailing-your-first-launch-by-adam-wathan/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">
<article>
    <p>I‚Äôve just watched the talk ¬´Nailing Your First Launch¬ª (MicroConf Starter 2018) by Adam Wathan and I
took notes that I‚Äôd like to share and re-visit them in the future. Some of them are just text from his screens, some thoughts are mine.</p>
<p>But don‚Äôt let me steal the video from you by providing a digested summary.
In my humble opinion, the main idea of watching talks or reading something is to change your mind
model of seeing this topic.
Don‚Äôt hesitate and start watching the video before proceeding to notes.
The notes are here just to come back from time to time and re-call some especially useful highlights.</p>
<p><a href="https://www.youtube.com/watch?v=ajrDxZRpP9M">https://www.youtube.com/watch?v=ajrDxZRpP9M</a></p>
<hr>

<h3 id="one-time-purchase-products-are-way-easier-to-sell">One-time purchase products are way easier to sell</h3>
<ul>
<li>Harder to convince people that for $9 dollars per month they‚Äôd have value.</li>
<li>But it‚Äôs a very frequent case when people buy $100 courses and don‚Äôt even watch them.</li>
<li>One-time payments are much easier to go away with.</li>
</ul>
<h3 id="they-can-be-done">They can be ‚Äúdone‚Äù</h3>
<ul>
<li>You don‚Äôt have to maintain them forever.</li>
<li>A course can be finished. A book can be finished.</li>
</ul>
<h3 id="you-can-put-one-together-in-3-months-of-nights-and-weekends">You can put one together in 3 months of nights and weekends</h3>
<ul>
<li>Easier to plan.</li>
</ul>
<h3 id="they-put-money-in-the-bank-fast-then-drop-off-opposite-to-saas">They put money in the bank fast then drop off (opposite to SAAS)</h3>
<ul>
<li>One-time projects do have a more clear cliff of death, but they produce more money than saas during
launch days.</li>
</ul>
<hr>

<h3 id="building-an-audience">Building an audience</h3>
<ul>
<li>
<p>Having a big audience can compensate for almost any mistake made in marketing/sales.</p>
</li>
<li>
<p>Huge audience + bad sales plan produces way more profit than no audience + good sales plan.</p>
</li>
<li>
<p>Produce blog posts, tutorials, podcasts, screencasts, interview people</p>
</li>
<li>
<p>You should be worth following (provide a value for your audience)</p>
</li>
<li>
<p>Help people where they already are (Wes Bos)</p>
</li>
<li>
<p>Specific tactics for tech guys: tweet your hacks (like some tricks with css) that save you time.</p>
</li>
</ul>
<h3 id="picking-the-right-idea">Picking the right idea</h3>
<ul>
<li>Have an idea
<ul>
<li>what are you already putting out there that peoeple seem excited about?</li>
<li>what are you excited about that you think others will get excited about?</li>
<li>what do people think you‚Äôre better at than they are?</li>
<li>what have you learned outside your community would benefit from?</li>
<li>what did you have to figure out yourself but was really helpful to learn?</li>
</ul>
</li>
<li>Test it
<ul>
<li>
<p>¬´First thing to do is to put a landing page and start emailing.¬ª</p>
<p>It‚Äôs not a bad way, but it‚Äôs not the first thing that you should do.
Especially it doesn‚Äôt work if you have no audience. People wouldn‚Äôt trust you.</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>Collect feedback from tweets, have a catalog of them. Can be used later for your landing/sales pages.</p>
</blockquote>
<h3 id="define-the-product">Define the product</h3>
<ul>
<li>Plan small, it will end up bigger than you think anyway
<ul>
<li>Don‚Äôt worry about size. A short book is still a book.</li>
<li>3 hours of a video course is plenty.</li>
<li>Actually, not everyone is looking for a full knowledge base on a specific topic and read
500 pages on that. Collection of great ideas (like tweets) on that specific topic works
too.</li>
</ul>
</li>
</ul>
<blockquote>
<p>In general, courses are easier to sell at higher prices because people expect products such as
books to be in a specific cost range, even if they understand that it brings a high value.</p>
</blockquote>
<h3 id="landing-page">Landing page</h3>
<p>The goal is to collect e-mail addresses.</p>
<p>Example of Adam‚Äôs landing page can be seen on 19:33 - 22:25</p>
<ul>
<li>Promise something in advance (sign up for free screencasts and a big discount)</li>
<li>You can put your catalog of feedback on your landing page to earn more trust.</li>
</ul>
<h3 id="pre-sell">Pre-sell</h3>
<h4 id="advantages">Advantages</h4>
<ul>
<li>Best form of product validation</li>
<li>You‚Äôll make more money</li>
<li>More motivation to finish</li>
<li>Can buy you the time to focus on the product</li>
</ul>
<h4 id="disadvantages">Disadvantages</h4>
<ul>
<li>Selling multiple tiers is trickier</li>
<li>Can‚Äôt easily change scope</li>
<li>Like taking on debt, can be extremely stressful. People paid you 50k$ and you have to return
it as the value in N months. (impostor syndrome?)</li>
</ul>
<h3 id="building-your-email-list">Building Your Email List</h3>
<ul>
<li>Always tell your audience.</li>
</ul>
<blockquote>
<p>Announce the announcement ‚Äî ¬´about to announce the next big project I‚Äôm working on; if you check
it out and are excited about it, I‚Äôd love any help spreading the word!¬ª</p>
</blockquote>
<ul>
<li>Share progress. Send an update every week or so.</li>
<li>Repurpose content (Take a chapter from a book, make it a blog post and share it)</li>
</ul>
<h3 id="getting-it-finished">Getting it finished</h3>
<p>A few strategies to finally finish it:</p>
<ul>
<li>Make promises (¬´this week I‚Äôm going to deliver a screencast¬ª)</li>
<li>Email on a schedule</li>
<li>Reduce scope. (the project/book gets bigger and bigger, the best way to cross the finish line</li>
</ul>
<h3 id="figuring-pricing">Figuring pricing</h3>
<ul>
<li>It‚Äôs hard to sell tiers during pre-sales.</li>
<li>Sell pre-orders with top tier price.</li>
</ul>
<h4 id="single-tier">Single tier</h4>
<ul>
<li>Can be fine if you can charge enough</li>
<li>Often necessary if pre-selling</li>
<li>Nice if you can‚Äôt figure out a way to add additional tiers that actually feel valuable</li>
<li>In general, prefer multiple tiers</li>
</ul>
<h4 id="two-tiers">Two tiers</h4>
<ul>
<li>Usually a price anchoring strategy, first tier makes second tier look like better deal</li>
<li>Second tier is usually the ‚Äúreal‚Äù product</li>
<li>Prices are often close-ish, maybe 1x and 1.5x</li>
<li>Works well with video courses where easy to cut content for budget version</li>
</ul>
<h4 id="three-tiers">Three tiers:</h4>
<ul>
<li>Great for books if you can come up with the bonus content (videos?)</li>
<li>Makes it easier to evaluate as its own product instead of compring to Amazon book prices</li>
<li>Prices are usually 1x, ~2x, ~5x</li>
<li>This will make you a lot more money from a book than just selling the book on its own</li>
</ul>
<blockquote>
<p><strong>Adam‚Äôs case</strong></p>
<ul>
<li>First tier: The Bare Essentials, $39
<ul>
<li>The 158-page book in pdf format</li>
<li>Comprehensive set of exercises</li>
</ul>
</li>
<li>Second tier: The Premium Training Package, $79
<ul>
<li>Over 4 hours of screencasts, covering all of the book examples</li>
<li>Three additional advanced tutorials</li>
</ul>
<ul>
<li>all from first tier</li>
</ul>
</li>
<li>Third tier: The complete Reference Package, $179
<ul>
<li>The source code of Nitpick CI, a production Laravel application that makes heavy
use of collection pipelines</li>
</ul>
<ul>
<li>all from second tier</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="launch-discounts">Launch discounts</h3>
<ul>
<li>Discount it by enough to be appealing, at least 30%</li>
<li>Use stepped discounts; lower discount on cheaper tiers and better discount on higher tiers</li>
<li>Reverse engineer non-discounted price from your planned discounted price, it‚Äôll help you charge more</li>
</ul>
<h3 id="nailing-the-launch">Nailing the launch</h3>
<ul>
<li>
<p>Build the sales page 39:13</p>
<ul>
<li>Still include an email sign up that sends preview content for new traffic (sign up to get
four free preview lessons)</li>
<li>Testimonials and social proof are important; use feedback from preview content to start</li>
<li>Sort tiers from highest price to lower price, use visuals to communicate value of higher
tiers (ui/ux hacks, make more important text bold, more physical things on a picture)</li>
</ul>
</li>
<li>
<p>Announce the launch details</p>
<ul>
<li>Include all package and pricing details</li>
<li>Complete TOC or content list</li>
<li>Final free content preview if possible</li>
</ul>
</li>
<li>
<p>Launch it</p>
<ul>
<li>Easiest part. Send an email ‚Äî ‚Äúxxx is now available!‚Äù, include discount</li>
<li>Launch on tuesday, no evidence, but it seems at least as good as any other day for Adam</li>
<li>Morning EST works well too</li>
</ul>
</li>
<li>
<p>Leverage early feedback</p>
<ul>
<li>Collect and catalog feedback after the launch.</li>
<li>Send new reviews to other people who hasn‚Äôt bought the course/book yet. Send them preview
of another chapter.</li>
</ul>
</li>
<li>
<p>Closing the launch</p>
<ul>
<li>Close the discount. Announce closing it. (‚ÄúHey, this is the last week of the launch‚Äù)</li>
<li>But don‚Äôt specify a closing date in advance</li>
</ul>
</li>
</ul>
<hr>
<h3 id="links">Links</h3>
<ul>
<li><a href="https://gist.github.com/adamwathan/30dc4230ac575cfa3425b39ca11ea859">Gist with useful links by Adam</a></li>
<li><a href="https://twitter.com/adamwathan">Twitter: @adamwathan</a></li>
<li><a href="https://adamwathan.me/">Blog: adamwathan.me</a></li>
<li><a href="https://www.youtube.com/watch?v=ajrDxZRpP9M">Talk on youtube</a></li>
</ul>
<p>
    Follow me on Twitter:
    <a target="_blank" href="https://twitter.com/reconquestio">@reconquestio</a>
    </p>

    <hr>
    <b>Comments</b>
    
    
</article>

        </div></div>]]>
            </description>
            <link>https://samizdat.dev/notes-on-nailing-your-first-launch-by-adam-wathan/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24940629</guid>
            <pubDate>Fri, 30 Oct 2020 09:46:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Java Concurrency ‚Äì Understanding the Basics of Threads]]>
            </title>
            <description>
<![CDATA[
Score 134 | Comments 69 (<a href="https://news.ycombinator.com/item?id=24940545">thread link</a>) | @turkogluc
<br/>
October 30, 2020 | https://turkogluc.com/java-concurrency-basics-of-threads/ | <a href="https://web.archive.org/web/*/https://turkogluc.com/java-concurrency-basics-of-threads/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                
                <p>Java <code>Thread</code> objects allow us to run our code in separate threads. When an application starts JVM creates the initial thread named <code>main</code>. The main method is run on the main thread. Inside the application we can create new threads to execute other tasks in parallel with the main thread.</p><p>Java uses native operating system threads. So one java thread is mapped by one OS thread.</p><h3 id="creating-threads">Creating Threads</h3><p>The constructor of the <code>Thread</code> class takes a <code>Runnable</code> object. Runnable interface has an abstract <code>run</code> method which is called by <code>Thread#start()</code> method. It object can be instantiated by a lambda, anonymous class or a class which implements Runnable method. </p><figure><img src="https://turkogluc.com/content/images/2020/10/Screenshot-2020-10-29-at-20.03.52.png"></figure><p>Using lambdas are generally easier and more compact:</p><pre><code>Thread thread = new Thread(() -&gt; {
    // content of run command
});
thread.start();</code></pre><p>Thread lives as long as the its run hook method has not returned. The scheduler can suspend and run the Thread many times. For a thread to execute forever, it needs an infinite loop that prevents it from returning. </p><p><code>Join</code> method allows one thread to wait for the completion of another. This is a simple form of barrier synchronisation.</p><figure><img src="https://turkogluc.com/content/images/2020/10/Screenshot-2020-10-29-at-20.19.19.png"></figure><h3 id="java-thread-types-user-and-daemon-threads">Java Thread Types: User and Daemon Threads</h3><p>When JVM start it contains a single User thread, named Main thread. The main difference between User and Daemon threads are what happens when they exit.</p><ul><li>A user thread continues its lifecycle even if the main thread exits.</li><li>However all Daemon threads terminates when all the user threads exits.</li><li>JVM itself exits when all the user threads has exited.</li></ul><p>Thread class contains boolean <code>daemon</code> field to specify whether the thread is daemon. It can be set at the time of creation by the constructor or by setter method.</p><pre><code>Thread thread = new Thread(getRunnable());
thread.setDaemon(true);
thread.start();</code></pre><p>By default daemon field is false, so most of the Threads that we generate is a User Thread. Threads copy the <code>isDaemon</code> status of the parent threat if it is not specified. Java uses Daemon thread in some places such as <code>ForkJoinPool</code> and <code>Timer</code>. To illustrate we can use the following example:</p><pre><code>public class Main {

    public static void main(String[] args) throws InterruptedException, ExecutionException {
//        runDeamonThread();
        runUserThread();
        System.out.println(getCurrentThreadName() + " exits");
    }

    private static void runDeamonThread() throws ExecutionException, InterruptedException {
        ExecutorService executorService = Executors.newWorkStealingPool(10);
        executorService.execute(getRunnable());
    }

    private static void runUserThread() {
        Thread thread = new Thread(getRunnable());
        thread.start();
    }

    private static Runnable getRunnable() {
        return () -&gt; {
            for (int i = 0; i &lt;= 200; i++) {
                System.out.print(".");
                Thread.yield();
            }
            System.out.println(getCurrentThreadName() + " exits. isDeamon: " + isDaemon());
        };
    }

    private static boolean isDaemon() {
        return Thread.currentThread().isDaemon();
    }

    private static String getCurrentThreadName() {
        return Thread.currentThread().getName();
    }
}</code></pre><ul><li>When we invoke <code>runUserThread</code> method it show the following example output:</li></ul><pre><code>................................................
main exits
........................................................................................
Thread-0 exits. isDeamon: false</code></pre><ul><li>The second case is invoking the <code>runDeamonThread</code> which uses <code>ForkJoinPool</code> as an example of Daemon Threads. I could simply use <code>setDaemon(true)</code> method, but wanted to give an example usage. Output:</li></ul><pre><code>main exits</code></pre><p>So when the main method exits, all the user threads are terminated and JVM exits and kills all daemon threads, so that we did not even have a chance to see output from daemon threads.</p><h3 id="stopping-threads">Stopping Threads</h3><p>Compared to creating, stopping a thread is quite hard thing. Once thread starts running it diverges from the caller and it has it is own lifecycle anymore. It can either complete the task and exits or if it does a long running operation it can work forever. Java does not provides us a method (non-deprecated) to stop the thread voluntarily. </p><ol><li>A naive approach could be using a stop flag:</li></ol><pre><code>volatile boolean isStopped = false;

public void test() {
    new Thread(() -&gt; {
        while (!isStopped) {
            System.out.print(".");
        }
        System.out.println("Child Exits");
    }).start();

    try {
        Thread.sleep(100);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    isStopped = true;
    System.out.println("Main exits");
}</code></pre><p>Note that the flag is <code>volatile</code> in order to make its up-to-date value visible for both threads. However this approach fails if the thread is doing blocking operations such as <code>sleep</code>, <code>wait</code>, <code>join</code> or blocking I/O operations.</p><p>2. Another way to stop the tread is to use <code>interrupt()</code> method of the thread. </p><blockquote>An interrupt request to a thread is an indication that it should stop what it is doing and do something else. It is up to the programmer to decide exactly how a thread responds to an interrupt but it is very common for the tread to terminate.</blockquote><p>For the interrupt mechanism to work correctly, the interrupted thread must support its own interruption mechanism. There are 2 cases we can examine for interruption:</p><ul><li>Non Blocking and Long Running Tasks</li></ul><p>In this case calling the <code>thread.interrupt()</code> method will set the interrupt flag of the that thread but if the task itself does not check the status of the interrupted flag it will not have any impact. For example:</p><pre><code>public void test() throws InterruptedException {
    Thread thread = new Thread(() -&gt; {
        System.out.println("Child Starts");
        while (true) {
            System.out.print(".");
        }
    });

    thread.start();
    thread.interrupt();
    
    thread.join();
    System.out.println("Main exits");
}</code></pre><p>In order for the thread to catch the interrupt, it should iteratively check the status of the interrupt flag so that it can understand if there are any pending interruption request and handle the request accordingly. </p><p>So we can check the flag in our while loop in if it is true we can return or break the loop. In the lambda expression it is not possible to throw an exception but in appropriate places we can throw <code>InterruptedException</code> as well.</p><pre><code>public void test() throws InterruptedException {
    Thread thread = new Thread(() -&gt; {
        System.out.println("Child Starts");
        while (true) {
            if (Thread.interrupted()) {
                break;
            }
            System.out.print(".");
        }
        System.out.println("Child exits");
    });

    thread.start();
    thread.interrupt();

    thread.join();
    System.out.println("Main exits");
}</code></pre><p>Note the <code>Thread.interrupted()</code> method returns the value of the flag and clears it if it has been true. So if we want to keep the state of the Thread as interrupted for the upper level of stack, we can set it back with <code>Thread.currentThread().interrupt();</code> </p><ul><li>Blocking Tasks</li></ul><p>If a thread frequently calls the blocking methods such as <code>wait</code>, <code>join</code>, <code>sleep</code>, <code>blocking I/O</code> which are all run interruptively, these methods internally check if they have been interrupted and if so they automatically throw <code>InterruptedException</code>. This exception should be caught and handled in the appropriate context. The following example uses the interruption to break the loop in a blocking <code>sleep</code> operation:</p><pre><code>public void test() throws InterruptedException {
    Thread thread = new Thread(() -&gt; {
        System.out.println("Child Starts");
        try {
            while (true) {
                Thread.sleep(10000);
            }
        } catch (InterruptedException e) {
            System.out.println("Thread interrupted: " + e.getMessage());
        }
        System.out.println("Child Exits");
    });

    thread.start();
    thread.interrupt();

    thread.join();
    System.out.println("Main exits");
}</code></pre><p>There are patterns for dealing with Java <code>InterruptedException</code>:</p><ul><li>One approach is propagating the exception to the callers, so higher layer would be responsible.</li><li>Before re-throwing, we can do task specific clean up.</li><li>If it is not possible to re-throw, we can set the interrupted status to true again with <code>Thread.currentThread().interrupt()</code> to preserve the evidence if the higher layers want to check it.</li></ul><p>So as a conclusion if we want to implement cancellable tasks we need to periodically check the status of the interrupt status and handle the interruption in a way that thread will exit.</p><h3 id="thread-groups">Thread Groups</h3><p>In order to simplify thread management, multiple threads &nbsp;can be organised with <code>java.lang.ThreadGroup</code> objects that group related threads. Each Thread Group needs to have a parent group. In the hierarchy, there is the <code>Main</code> group which is the parent of the other groups or threads we create in the program. We can create <code>ThreadGroup</code> by calling its constructor with a parent group and/or name. To add the Threads in a group we need to specify the group in the Thread's constructor.</p><pre><code>public void test() {
    ThreadGroup tg1 = new ThreadGroup("Thread-group-1");
    ThreadGroup tg2 = new ThreadGroup(tg1, "Thread-group-2");

    Thread thread1 = new Thread(tg1,"thread-1");
    Thread thread2 = new Thread(tg2,"thread-2");
    Thread thread3 = new Thread(tg2,"thread-3");

    thread1.start();
    thread2.start();
    thread3.start();
    
    Thread[] threads = new Thread[tg2.activeCount()];
    tg2.enumerate(threads);

    Arrays.asList(threads).forEach(t -&gt; System.out.println(t.getName()));
    tg1.list();
}</code></pre><p>We can iterate over the threads by calling the <code>enumerate</code> method, which fills the given array with the thread references of the group.</p><p>We can implement a Thread Pool by making use of Thread Groups:</p><pre><code>public class ThreadPool {
    // Create a thread group field
    private final ThreadGroup group = new ThreadGroup("ThreadPoolGroup");
    // Create a LinkedList field containing Runnable
    private final List&lt;Runnable&gt; tasks = new LinkedList&lt;&gt;();

    public ThreadPool(int poolSize) {
   ‚Ä¶</code></pre></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://turkogluc.com/java-concurrency-basics-of-threads/">https://turkogluc.com/java-concurrency-basics-of-threads/</a></em></p>]]>
            </description>
            <link>https://turkogluc.com/java-concurrency-basics-of-threads/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24940545</guid>
            <pubDate>Fri, 30 Oct 2020 09:32:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[For Complex Applications, Rust Is as Productive as Kotlin]]>
            </title>
            <description>
<![CDATA[
Score 79 | Comments 21 (<a href="https://news.ycombinator.com/item?id=24939875">thread link</a>) | @quyleanh
<br/>
October 30, 2020 | https://ferrous-systems.com/blog/rust-as-productive-as-kotlin/ | <a href="https://web.archive.org/web/*/https://ferrous-systems.com/blog/rust-as-productive-as-kotlin/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div id="preamble">
<div>
<p>In this article, we will compare one apple (IntelliJ Rust) to one orange (rust-analyzer) to reach general and sweeping conclusions.
Specifically, I want to present a case study supporting the following claim:</p>
<p>For complex applications, Rust is as productive as Kotlin.</p>
<p>For me, this is an unusual claim to argue: I always thought exactly the opposite, but I am not so sure now.
I came to Rust from C++.
I was of the opinion that this is a brilliant low-level language and always felt puzzled at people writing higher-level things in Rust.
Clearly, choosing Rust means taking a productivity hit, and using Kotlin, C# or Go just makes much more sense if you can afford GC.
My <a href="https://matklad.github.io/2020/09/20/why-not-rust.html">list of Rust criticisms</a> starts with this objection.</p>
<p>What moved my position in the other direction was my experience as the lead developer of rust-analyzer and IntelliJ Rust.
Let me introduce the two projects.</p>
<p><a href="https://github.com/intellij-rust/intellij-rust"><strong>IntelliJ Rust</strong></a> is the plugin for IntelliJ Platform, providing Rust support.
In effect, it is a Rust compiler front-end, written in Kotlin and making use of language-support features of the platform.
These features include lossless syntax trees, a parser generator, persistence and indexing infrastructure, among others.
Nonetheless, as programming languages differ lot, the bulk of logic for analyzing Rust is implemented in the plugin itself.
Presentational features like completion list come from the platform, but most of the language semantics is hand-written.
IntelliJ Rust also includes a bit of a Swing GUI.</p>
<p><a href="https://github.com/rust-analyzer/rust-analyzer"><strong>rust-analyzer</strong></a> is an implementation of
<a href="https://microsoft.github.io/language-server-protocol/">Language Server Protocol</a> for Rust.
It is a Rust compiler front-end written from scratch with an eye towards IDE support.
It makes heavy use of <a href="https://github.com/salsa-rs/salsa">salsa</a> library for incremental computations.
Beyond the compiler itself, rust-analyzer includes code for managing long-lived multithreaded process of the language server itself.</p>
<p>The projects are essentially equivalent in scope‚Äâ‚Äî‚Äârust compiler front-ends suitable for IDEs.
The two biggest differences are:</p>
<div>
<ul>
<li>
<p>IntelliJ Rust is a plugin, so it can re-use code and design patterns of the surrounding platform.</p>
</li>
<li>
<p>rust-analyzer is the second system, so it leverages experience of IntelliJ Rust for a from-scratch design.</p>
</li>
</ul>
</div>
<p>The internal architecture of the two projects also differs a lot.
In terms of <a href="https://rust-analyzer.github.io/blog/2020/07/20/three-architectures-for-responsive-ide.html">Three Architectures</a>, IntelliJ Rust is map-reduce, and rust-analyzer is query-based.</p>
<p>Writing an IDE-ready compiler is a high-level task.
You don‚Äôt need to talk to the operating system directly.
There are some fancy data structures and concurrency here and there, but they are also high-level.
It‚Äôs not about implementing crazy lock-free schemes, it‚Äôs about maintaining application state and sanity in the multithreaded world.
The bulk of the compiler is symbolic manipulation, arguably best suited for lisp.
Picking a VM-based language for such task (for example, OCaml), doesn‚Äôt have any intrinsic downsides.</p>
<p>At the same time, the task is pretty complex and unique.
The ratio of ‚Äúyour code‚Äù vs ‚Äúframework code‚Äù when implementing features is much higher than in a typical CRUD backend.</p>
<p>Now that the projects are introduced, lets take two roughly equivalent slices of history.</p>

<p>Both are about 2 years old, with 1-1.5 developers working full time and vibrant and thriving community of open-source contributors.
There are 52k lines of Kotlin and 66k lines of Rust.</p>
<p>Both delivered roughly equivalent feature sets at that time.
To be honest, I still don‚Äôt really believe this :)
rust-analyzer started from zero, it didn‚Äôt have a decade worth of Java classes to bootstrap from, and the productivity drop between Kotlin and Rust is supposed to be huge.
But it‚Äôs hard to argue with reality.
Instead, let me try to reflect on my experience building both, and to try to explain Rust‚Äôs surprising productivity.</p>
</div>
</div>
<div>
<h2 id="_learning_curve">Learning Curve</h2>
<div>
<p>It‚Äôs easy to characterize Kotlin‚Äôs learning curve‚Äâ‚Äî‚Äâit is nearly zero.
I‚Äôve started IntelliJ Rust without Kotlin experience and never felt that I need to specifically learn Kotlin.</p>
<p>When I switched to rust-analyzer, I was pretty experienced with Rust.
I would say that one definitely needs to deliberately learn Rust, it‚Äôs hard to pick it up on the go.
Ownership and aliasing control are novel concepts (even if you come from C++), and taking holistic approach to learning them pays off.
After the initial learning step the ride is generally smooth.</p>
<p>By the way, this is the perfect place to plug our Rust courses and tailor-made <a href="https://ferrous-systems.com/training/">trainings</a> :-)
The next <a href="https://ferrous-systems.com/training/#package-intro-training">introduction to Rust</a> is happening this December!</p>
</div>
</div>
<div>
<h2 id="_modularity">Modularity</h2>
<div>
<p>This I think is the biggest factor.
Both projects are moderately large in terms of scope as well as in terms of amount of source code.
I believe that the only way to ship big things is to split them in independent-ish chunks and implement the chunks separately.</p>
<p>I also find most of the languages I am familiar with to be pretty horrible with respect to modularity.
More generally, I am amused with FP vs OO debate, as it seems that ‚Äúwhy no one does modules right?‚Äù is a more salient issue.</p>
<p>Rust is one of the few languages which has first-class concept of libraries.
Rust code is organized on two levels:</p>
<div>
<ul>
<li>
<p>as a tree of inter-dependent modules inside a crate</p>
</li>
<li>
<p>and as a directed acyclic graph of crates</p>
</li>
</ul>
</div>
<p>Cyclic dependencies are allowed between the modules, but not between the crates.
Crates are units of reuse and privacy: only crate‚Äôs public API matters, and it is crystal clear what crate‚Äôs public API is.
Moreover, crates are anonymous, so you don‚Äôt get name conflicts and dependency hell when mixing several versions of the same crate in a single crate graph.</p>
<p>This makes it very easy to make two pieces of code <strong>not</strong> depend on each other (non-dependencies are the essence of modularity): just put them in separate crates.
During code review, only changes to Cargo.tomls need to be monitored carefully.</p>
<p>At the time of comparison, rust-analyzer is split into 23 internal crates, with a handful general-purposed ones released on crates.io.
In contrast, IntelliJ Rust is a single Kotlin module, where everything can depend on everything else.
Although internal organization of IntelliJ Rust is pretty clean, it‚Äôs not reflected in the file system layout and build system, and needs constant maintenance.</p>
</div>
</div>
<div>
<h2 id="_build_system">Build System</h2>
<div>
<p>Managing project‚Äôs build takes significant amount of times, and has multiplicative effect on everything else.</p>
<p>Rust‚Äôs build system, <a href="https://doc.rust-lang.org/cargo/index.html">Cargo</a>, is very good.
It‚Äôs not perfect, but it is a breath of fresh air after Java‚Äôs <a href="https://gradle.org/">Gradle</a>.</p>
<p>Cargo‚Äôs trick is that it doesn‚Äôt try to be a general purpose build system.
It can only build Rust projects, and it has rigid expectation about the project structure.
It‚Äôs impossible to opt out of the core assumptions.
Configuration is a static non-extensible TOML file.</p>
<p>In contrast, Gradle allows free-form project structure, and is configured via a Turing complete language.
I feel like I‚Äôve spend more time learning Gradle than learning Rust!
Running <code>wc -w</code> gives 182_817 words for Rust book, and 280_506 for Gradle‚Äôs user guide.</p>
<p>Additionally, Cargo is just faster than Gradle in most cases.</p>
<p>Of course, the biggest downside is that custom build logic is not expressible in Cargo.
Both projects needs substantial amount of logic beyond mere compilation to deliver the final result to the user.
For rust-analyzer, this is handled by hand-written Rust script, which works perfectly at this scale.</p>
</div>
</div>
<div>
<h2 id="_ecosystem">Ecosystem</h2>
<div>
<p>Language-level support for libraries and top-notch build system/package manager allow for a thriving ecosystem.
rust-analyzer relies on third-party libraries much more than IntelliJ Rust.
Some parts of rust-analyzer are also published to crates.io for other projects to reuse.</p>
<p>Additionally, low-level nature of the Rust programming language often allows for ‚Äúperfect‚Äù library interfaces.
Interfaces which exactly reflect the underlying problem, without imposing intermediate language-level abstractions.</p>
</div>
</div>
<div>
<h2 id="_basic_conveniences">Basic Conveniences</h2>
<div>
<p>I feel that Rust is significantly more productive when it comes to basic language nuts and bolts‚Äâ‚Äî‚Äâstructs, enums, functions, etc.
This is not specific to Rust‚Äâ‚Äî‚Äâany ML-family language has them.
However, Rust is the first industrial language which wraps these features in a nice package, not constrained by backwards compatibility.
I want to list specific features which I think allow producing maintainable code faster in Rust</p>
<p><em>Emphasis on data over behavior</em>.
Aka, Rust is not an OOP language.
The core idea of OOP is that of dynamic dispatch‚Äâ‚Äî‚Äâwhich code is invoked by a function call is decided at runtime (late binding).
This is a powerful pattern which allows for flexible and extensible system.
The problem is, extensibility is costly!
It‚Äôs better only to apply it in certain designated areas.
Designing for extensibility by default is not cost effective.
Rust puts static dispatch front and center: it is mostly clear whats going on by just reading the code, as it is independent of runtime types of the objects.</p>
<p>One small syntactic thing I enjoy about Rust is how it puts fields and methods into different blocks syntactically:</p>
<div>
<div>
<pre><code data-lang="rust"><span>struct</span> <span>Person</span> <span>{</span>
  <span>first_name</span><span>:</span> <span>String</span><span>,</span>
  <span>last_name</span><span>:</span> <span>String</span><span>,</span>
<span>}</span>

<span>impl</span> <span>Person</span> <span>{</span>
    <span>fn</span> <span>full_name</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>String</span> <span>{</span>
        <span>...</span>
    <span>}</span>
<span>}</span></code></pre>
</div>
</div>
<p>Being able to see at a glance all the fields makes understanding the code much simpler.
Fields convey much more information than methods.</p>
<p><em>Sum types</em>.
Rust‚Äôs humbly named enums are full algebraic data types.
This means that you can express the idea of disjoint union:</p>
<div>
<div>
<pre><code data-lang="rust"><span>enum</span> <span>Either</span><span>&lt;</span><span>A</span><span>,</span> <span>B</span><span>&gt;</span> <span>{</span> <span>A</span><span>(</span><span>A</span><span>),</span> <span>B</span><span>(</span><span>B</span><span>)</span> <span>}</span></code></pre>
</div>
</div>
<p>This is hugely useful in day-to-day programming in the small, and some times during programming in the large as well.
To give one example, one of the core concepts for an IDE are references and definitions.
A definition a like <code>let foo = 92;</code> assigns a name to an entity which can be used down a line.
A reference like <code>foo + 90</code> <em>refers</em> to some definition.
When you ctrl-click on reference, you go to the definition.</p>
<p>Natural way to model that in Kotlin is by adding <code>interface Definition</code> and <code>interface Reference</code>.
The problem is, some things are ‚Ä¶</p></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://ferrous-systems.com/blog/rust-as-productive-as-kotlin/">https://ferrous-systems.com/blog/rust-as-productive-as-kotlin/</a></em></p>]]>
            </description>
            <link>https://ferrous-systems.com/blog/rust-as-productive-as-kotlin/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24939875</guid>
            <pubDate>Fri, 30 Oct 2020 07:10:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[SM2 (Chinese) National Secret algorithm is accepted into Linux kernel]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24938686">thread link</a>) | @hyiltiz
<br/>
October 29, 2020 | https://www.codetd.com/en/article/12031985 | <a href="https://web.archive.org/web/*/https://www.codetd.com/en/article/12031985">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                        
                        <p><span>
                            <a href="https://www.codetd.com/en/cat/17746/1">News</a>
                        </span>
                            <span>2020-10-27 14:44:54</span>
                            <span>views: null</span>
                        </p>

                    </div><div><div> 
  
 <p><span><span>On October 25, a developer posted that the SM2 national secret algorithm was finally accepted by the Linux kernel community. </span><span>The author stated that the SM2 patch has been updated to version v7. This version of the patch was finally accepted by the community. It has been </span></span><a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/log/?qt=author&amp;q=Tianjia+Zhang"><span><span>merged into the 5.10-rc1 of the Linux mainline</span></span></a><span><span> . If nothing </span><a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/log/?qt=author&amp;q=Tianjia+Zhang"><span>else</span></a><span> , it will be officially released in the 5.10 kernel version.</span></span></p> 
 <p><span><span>National Secret is the abbreviation of National Commercial Encryption. The National Encryption Administration Bureau formulates algorithm standards, and it also formulates a large number of product and interface specifications and application scenarios. </span><span>Since 2012, the State Cryptography Administration has successively published SM2/SM3/SM4 and other cryptographic algorithm standards and their application specifications in the form of the "People's Republic of China Password Industry Standards". </span><span>Among them, "SM" stands for "commercial secret", which is a cryptographic technology used for commercial use that does not involve state secrets.</span></span></p> 
 <p><span><span>According to the author, the current Linux kernel has well supported the SM3 and SM4 algorithms, thanks to the widespread use of wireless LAN standards. </span><span>However, the SM2 algorithm and the national secret certificate have not been supported for a long time, and it is impossible to establish full-stack trust and integrity verification in the kernel based on the national secret. Therefore, it has become urgent to support this system in the kernel.</span></span></p> 
 <p><span><span>It took 7 rounds for the kernel community to accept SM2. </span><span>The initial consideration was to migrate from openssl, but the openssl architecture and infrastructure code needed to be ported because of the huge workload. </span><span>After several rounds of discussion and testing, I found that the existing libgcrypt already has a complete elliptic curve basic algorithm, so I tried to implement SM2 in libgcrypt first, and finally the SM2 algorithm was accepted by the community as a sub-algorithm of ECC. </span><span>After that, SM2 was gradually accepted by the kernel community.</span></span></p> 
 <p><span><span>At present, libgcrypt has fully supported the national secret algorithm SM2/3/4, and these implementations will be officially released in the next version 1.9.0. </span><span>At the same time, as a user-mode tool for IMA integrity signatures, ima-evm-utils' support for national secrets has not fallen. </span><span>Click to view </span></span><a href="https://sourceforge.net/p/linux-ima/ima-evm-utils/ci/ceecb28d3b5267c7d32c6e9401923c94f5786cfb/log/?path="><span><span>related submissions</span></span></a><span><span> .</span></span></p> 
 <p><span><span>Finally, the author also summarizes the known issues of SM2:</span></span></p> 
 <ul> 
  <li><span><span>To support national secret certificate verification, SM2 either does not compile, or it must be built-in compilation, and does not support compilation into modules. </span><span>Of course, SM2, as an asymmetric algorithm, only signs a hash or IMA verification based on national secrets, and there is no such limitation.</span></span></li> 
  <li><span><span>The IMA signature tool ima-evm-utils and the national secret algorithm used by the kernel to calculate the SM3 hash of the file do not add Za. This is a little difference from the specification.</span></span></li> 
 </ul> 
 <p><a href="https://linux.cn/article-12751-1.html"><span><span>Reference reading</span></span></a></p> 
</div></div></div>]]>
            </description>
            <link>https://www.codetd.com/en/article/12031985</link>
            <guid isPermaLink="false">hacker-news-small-sites-24938686</guid>
            <pubDate>Fri, 30 Oct 2020 03:01:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why Clojure?]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24938484">thread link</a>) | @simonpure
<br/>
October 29, 2020 | https://jeffchen.dev/posts/Why-Clojure/ | <a href="https://web.archive.org/web/*/https://jeffchen.dev/posts/Why-Clojure/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>One piece of unattributed wisdom that's stuck with me is "don't take more than one technology bet". At <a href="https://www.ladderlife.com/" target="_blank" rel="nofollow noopener noreferrer">Ladder</a>, our big bet is using <a href="https://clojure.org/" target="_blank" rel="nofollow noopener noreferrer">Clojure</a> for fullstack app development. Ladder's used Clojure since day 1 in 2015, and we wouldn't want it any different! In particular, Clojure's Lisp heritage, focus on pure functions and immutable data structures, unified client-server support, and superior developer experience have helped us write higher quality code faster.</p>
<p><strong>Ladder is hiring! If you're interested, please check out our job description <a href="https://grnh.se/5cebfb331us" target="_blank" rel="nofollow noopener noreferrer">here</a>!</strong></p>
<!-- excerpt -->
<h2>Pure functions and immutability</h2>
<p>One of the challenges with ordinary, imperative programming languages like Javascript or Python is the increasing complexity of state management. As your application grows, it becomes harder and harder to isolate where in the codebase specific changes to your application state occur. This is because with typical application architectures in those languages, any function can perform <a href="https://en.wikipedia.org/wiki/Side_effect_%28computer_science%29" target="_blank" rel="nofollow noopener noreferrer">side effects</a> or modify incoming or global state. On the other hand, Clojure strongly emphasizes working with <a href="https://en.wikipedia.org/wiki/Pure_function" target="_blank" rel="nofollow noopener noreferrer">pure functions</a> (well, if you discount I/O...) and <a href="https://clojure.org/about/state" target="_blank" rel="nofollow noopener noreferrer">immutable data structures</a>. A Clojure programmer must be explicit when defining and modifying mutable state - this helps minimize its usage and makes it easier to reason about.</p>
<p>Immutable data structures and pure functions also lend themselves well to concurrent programming. We rarely find ourselves worrying about locks and shared data in a multi-threaded environment, because our functions are rarely modifying shared state. And when we do, Clojure provides <code>atom</code>, a thread-safe wrapper around ordinary data structures. Behind the scenes, setting an <code>atom</code>'s value calls <code>compare-and-set!</code>. That means no fussing around with locks or mutexes and no worrying about your data changing before you modify it. With this one simple construct, Clojure removes 99% of our concurrency headaches.</p>
<h2>Clojure is a Lisp</h2>
<p>There are probably enough Lisp arguments on the Internet already - I'll defer to <a href="https://clojure.org/about/rationale#_lisp_is_a_good_thing" target="_blank" rel="nofollow noopener noreferrer">Rich Hickey</a> (Clojure's creator) and <a href="http://www.paulgraham.com/avg.html" target="_blank" rel="nofollow noopener noreferrer">Paul Graham</a> instead of adding another rehash. That said, Clojure provides some advantages over other Lisps like Common Lisp and Scheme:</p>
<ul>
<li>CL only includes lists in its core language spec. Clojure introduces vectors, sets, and maps which makes reading and writing code so much less tedious. Of course Scheme has all of these except sets.</li>
<li>Clojure's core data structures are immutable which, as discussed above, makes reasoning about code, especially concurrent code, much easier.</li>
</ul>
<h2>Clojure runs everywhere</h2>
<p>Clojure provides first class support for sharing code between platforms with <a href="https://clojure.org/guides/reader_conditionals" target="_blank" rel="nofollow noopener noreferrer">reader conditionals</a>. Most of our namespaces at Ladder take advantage of this and are shared across our client (Clojurescript) and server (Clojure). In fact, all of our client React code (aside from browser-specific API calls like clipboard, input handlers, etc) supports being run on the JVM. This lets us run what we call "full-stack tests" entirely within a Java process. For example, we can run full user flows like "user can accept a life insurance policy" and assert against both client and server state <strong>in the same test</strong>. The closest analogue without this superpower would be running a Selenium test against a running webserver, which introduces all sorts of potential flakiness. For more on full-stack tests, check out <a href="https://www.youtube.com/watch?v=qijWBPYkRAQ&amp;t=346s" target="_blank" rel="nofollow noopener noreferrer">this talk</a> two of our engineers gave at Clojure West in 2017.</p>
<p>Clojure also provides easy <a href="https://clojure.org/guides/reader_conditionals#_host_interop" target="_blank" rel="nofollow noopener noreferrer">host interop</a> for each supported platform. This lets us leverage the full JVM (and Javascript) ecosystem. For example, we use popular Java libraries like <a href="https://www.eclipse.org/jetty/" target="_blank" rel="nofollow noopener noreferrer">Jetty</a>, <a href="https://mvnrepository.com/artifact/org.apache.kafka/kafka-clients" target="_blank" rel="nofollow noopener noreferrer">kafka-clients</a>, <a href="https://github.com/google/tink" target="_blank" rel="nofollow noopener noreferrer">Tink</a>, and more. On the frontend, we use React, and can easily include other Javascript libraries for analytics, error handling, and session replays.</p>
<h2>Developer experience</h2>
<p>When I‚Äôve worked with Typescript and Python in the past, I was constantly waiting for my development server to reload. Clojure makes updating code on your local server as simple as reloading the updated namespace in your REPL. If you want, you can even <a href="https://github.com/nrepl/nrepl" target="_blank" rel="nofollow noopener noreferrer">update remote, (hopefully) non-production webservers</a>! Being able to evaluate code in a REPL and have your running web server update in less than a second makes exploration and iteration on your actual backend so much faster. Instant feedback makes developers more playful and experimental. Ultimately, it helps them write better code faster.</p>
<p>It‚Äôs also super easy to run small chunks of code in the REPL. Ladder, like other Clojure shops, has a convention of documenting namespace usage with a <code>comment</code> block at the bottom. Developers can use the code within to learn the namespace‚Äôs API, run commonly used procedures, or test changes to the rest of the namespace - all without leaving their editor!</p>
<h2>Why not Clojure?</h2>
<p>While we're extremely satisfied with our choice of Clojure, we've had our fair share of headaches. First, Clojure processes take a long time to start up - especially as the size of the application grows. Our webserver at Ladder takes a full minute before it can accept web requests. This makes autoscaling in response to load more challenging - some of our load can spike in well under a minute, so we have to be consistently overprovisioned to handle it. Second, Clojure produces pretty big artifacts. This matters less on the backend, where our webserver JAR is over 1.5GB, but hurts us on the frontend. We still have work to do here, but our initial bundle is 7.2MB uncompressed (1.0MB gzipped)! If raw performance or bundle size is your primary concern, you might be better off choosing another language.</p>
<h2>Conclusion</h2>
<p>As a small company, we have more ideas to try than we have bandwidth to implement. Using Clojure has helped our team be more iterative and more productive, so we can ship more experiments and projects than we would otherwise be able to. I feel super lucky that Ladder introduced me to Clojure - and I'm excited to see how Clojure and our use of it continues to evolve!</p>
</div></div>]]>
            </description>
            <link>https://jeffchen.dev/posts/Why-Clojure/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24938484</guid>
            <pubDate>Fri, 30 Oct 2020 02:23:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Getting Audio Visualizations Working with Web Audio API]]>
            </title>
            <description>
<![CDATA[
Score 50 | Comments 15 (<a href="https://news.ycombinator.com/item?id=24938292">thread link</a>) | @arcatech
<br/>
October 29, 2020 | https://dwayne.xyz/post/audio-visualizations-web-audio-api | <a href="https://web.archive.org/web/*/https://dwayne.xyz/post/audio-visualizations-web-audio-api">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <h2>Web Audio API</h2>
<p>I‚Äôve been working on getting WebRTC video chat working here on the website for a few weeks now. I finally got to the point where both text, video chat, and screen sharing all work really well, but somewhere in the back of my mind I kept thinking about complaints about ‚Äú<a href="https://www.psychologytoday.com/us/blog/brain-waves/202007/why-zoom-fatigue-is-real-and-what-you-can-do-about-it">Zoom fatigue</a>‚Äù during the pandemic:</p>
<blockquote>
<p>Zoom fatigue, Hall argues now, is real. ‚ÄúZoom is exhausting and lonely because you have to be so much more attentive and so much more aware of what‚Äôs going on than you do on phone calls.‚Äù If you haven‚Äôt turned off your own camera, you are also watching yourself speak, which can be arousing and disconcerting. The blips, delays and cut off sentences also create confusion. Much more exploration needs to be done, but he says, ‚Äúmaybe this isn‚Äôt the solution to our problems that we thought it might have been.‚Äù Phone calls, by comparison, are less demanding. ‚ÄúYou can be in your own space. You can take a walk, make dinner,‚Äù Hall says.</p>
</blockquote>

<p>It‚Äôs kind of an interesting thing to have on your mind while spending weeks writing/debugging/testing video chat code.</p>
<p>So I decided to add an audio-only mode. And if I was gonna do that, I had to show something cool in place of the video. So I figured I would try to add audio visualizations when one or both of the users didn‚Äôt have video on. Using the relatively recent<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API">Web Audio API</a> seemed like the right way to go.</p>
<p>Here‚Äôs what I came up with:</p>
<div><video controls="" muted="" autoplay="" playsinline="" loop=""><source src="https://media.dwayne.xyz/blog/audio-visualization.mp4" type="video/mp4"></video><p>Screen recording of the local audio visualization. I cycle through bar graph in light mode, bar graph in dark mode, sine wave in dark mode, then sine wave in light mode.</p></div>
<h2>Creating and hooking up an AnalyserNode</h2>
<p>To create audio visualizations, the first thing you‚Äôll need is an <code>AnalyserNode</code>, which you can get from the <code>createAnalyser</code> method of a <code>BaseAudioContext</code>. You can get both of these things pretty easily<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup> like this:</p>
<pre><span>1</span><span>const</span> audioContext <span>=</span> <span>new</span> <span>window</span>.AudioContext();
<span>2</span><span>const</span> analyser <span>=</span> audioContext.createAnalyser();
</pre><p>Next, create a <code>MediaStreamAudioSourceNode</code> from an existing data stream (I use either the local or remote data streams from either <code>getUserMedia</code> or from the ‚Äòtrack‚Äô event of <code>RTCPeerConnection</code> respectively) using <code>AudioContext.createMediaStreamSource</code>. Then you can connect that audio source to the analyser object like this:</p>
<pre><span>1</span><span>const</span> audioSource <span>=</span> <span>this</span>.audioContext.createMediaStreamSource(stream);
<span>2</span>audioSource.connect(analyser);
</pre>
<h2>Using requestAnimationFrame</h2>
<p><code>window.requestAnimationFrame</code> is nice. Call it, passing in your drawing function, and then inside that function call <code>requestAnimationFrame</code> again. Get yourself a nice little recursive loop going that‚Äôs automatically timed properly by the browser.</p>
<p>In my situation, there will either be 0, 1, or 2 visualizations running, since either side can choose either video chat, audio-only (‚Ä¶except during screen sharing), or just text chat. So I have one loop that draws both. It looks like this:</p>
<pre><span>1</span><span>const</span> drawAudioVisualizations <span>=</span> () =&gt; {
<span>2</span>    audioCancel <span>=</span> <span>window</span>.requestAnimationFrame(drawAudioVisualizations);
<span>3</span>    localAudioVisualization.draw();
<span>4</span>    remoteAudioVisualization.draw();
<span>5</span>};
</pre><p>I created the class for those visualization objects, and they handle whether or not to draw. They each contain the analyser, source, and context objects for their visualization.</p>
<p>Then when I detect that loop doesn‚Äôt have to run anymore, I can cancel it using that <code>audioCancel</code> value:</p>
<pre><span>1</span><span>window</span>.cancelAnimationFrame(audioCancel);
<span>2</span>audioCancel <span>=</span> <span>0</span>;
</pre>
<h2>Configuring the Analyser</h2>
<p>Like in the <a href="https://github.com/mdn/voice-change-o-matic/blob/gh-pages/scripts/app.js">example you‚Äôll see a lot</a> if you look at the MDN documentation for this stuff, I provide options for two audio visualizations: frequency bars and a sine wave. Here‚Äôs how I configure the analyser for each type:</p>
<pre><span> 1</span><span>switch</span> (<span>this</span>.type) {
<span> 2</span>    <span>case</span> <span>'frequencybars'</span><span>:</span>
<span> 3</span>        <span>this</span>.analyser.minDecibels <span>=</span> <span>-</span><span>90</span>;
<span> 4</span>        <span>this</span>.analyser.maxDecibels <span>=</span> <span>-</span><span>10</span>;
<span> 5</span>        <span>this</span>.analyser.smoothingTimeConstant <span>=</span> <span>0.85</span>;
<span> 6</span>        <span>this</span>.analyser.fftSize <span>=</span> <span>256</span>;
<span> 7</span>        <span>this</span>.bufferLength <span>=</span> <span>this</span>.analyser.frequencyBinCount;
<span> 8</span>        <span>this</span>.dataArray <span>=</span> <span>new</span> Uint8Array(<span>this</span>.bufferLength);
<span> 9</span>        <span>break</span>;
<span>10</span>    <span>default</span><span>:</span>
<span>11</span>        <span>this</span>.analyser.minDecibels <span>=</span> <span>-</span><span>90</span>;
<span>12</span>        <span>this</span>.analyser.maxDecibels <span>=</span> <span>-</span><span>10</span>;
<span>13</span>        <span>this</span>.analyser.smoothingTimeConstant <span>=</span> <span>0.9</span>;
<span>14</span>        <span>this</span>.analyser.fftSize <span>=</span> <span>1024</span>;
<span>15</span>        <span>this</span>.bufferLength <span>=</span> <span>this</span>.analyser.fftSize;
<span>16</span>        <span>this</span>.dataArray <span>=</span> <span>new</span> Uint8Array(<span>this</span>.bufferLength);
<span>17</span>        <span>break</span>;
<span>18</span>}
</pre><div><p>I‚Äôve adjusted these numbers a lot, and I‚Äôm gonna keep doing it. A note about <code>fftSize</code> and <code>frequencyBinCount</code>: <code>frequencyBinCount</code> is set right after you set <code>fftSize</code> and it‚Äôs usually just half the <code>fftSize</code> value. These values are about the amount of data you want to receive from the main analyser functions I‚Äôm about to talk about next. As you can see, they directly control the size of the data array that you‚Äôll use to store the audio data on each draw call.
</p></div>
<h2>Using the Analyser</h2>
<p>On each draw call, depending on the type of visualization, call either <code>getByteFrequencyData</code> or <code>getByteTimeDomainData</code> with the array that was created above, and it‚Äôll be filled with data. Then you run a simple loop over each element and start drawing. Here‚Äôs my sine wave code:</p>
<pre><span> 1</span><span>this</span>.analyser.getByteTimeDomainData(<span>this</span>.dataArray);
<span> 2</span><span>this</span>.ctx.lineWidth <span>=</span> <span>2</span>;
<span> 3</span><span>this</span>.ctx.strokeStyle <span>=</span> audioSecondaryStroke;
<span> 4</span>
<span> 5</span><span>this</span>.ctx.beginPath();
<span> 6</span>
<span> 7</span><span>let</span> v, y;
<span> 8</span><span>for</span> (<span>let</span> i <span>=</span> <span>0</span>; i <span>&lt;</span> <span>this</span>.bufferLength; i<span>++</span>) {
<span> 9</span>    v <span>=</span> <span>this</span>.dataArray[i] <span>/</span> <span>128.0</span>;
<span>10</span>    y <span>=</span> v <span>*</span> height <span>/</span> <span>2</span>;
<span>11</span>
<span>12</span>    <span>if</span> (i <span>===</span> <span>0</span>) {
<span>13</span>        <span>this</span>.ctx.moveTo(x, y);
<span>14</span>    } <span>else</span> {
<span>15</span>        <span>this</span>.ctx.lineTo(x, y);
<span>16</span>    }
<span>17</span>
<span>18</span>    x <span>+=</span> width <span>*</span> <span>1.0</span> <span>/</span> <span>this</span>.bufferLength;
<span>19</span>}
<span>20</span>
<span>21</span><span>this</span>.ctx.lineTo(width, height <span>/</span> <span>2</span>);
<span>22</span><span>this</span>.ctx.stroke();
</pre><div><p>The fill and stroke colors are dynamic based on the website color scheme.
</p></div>
<h2>Good ol' Safari</h2>
<p>So I did all of this stuff I just talked about, but for <strong>days</strong> I could <em>not</em> get this to work in Safari. Not because of errors or anything, but because both <code>getByteFrequencyData</code> and <code>getByteTimeDomainData</code> just filled the array with 0s every time. No matter what I did. I was able to get the audio data in Firefox just fine.</p>
<p>So at first, I figured it just didn‚Äôt work at all in Safari and I would just have to wait until Apple fixed it. But then I came across <a href="https://mdn.github.io/voice-change-o-matic/">this sample audio project</a> and noticed it worked just fine in Safari.</p>
<div><p>So I studied the code for an hour trying to understand what was different about my code and theirs. I made a lot of changes to my code to make it more like what they were doing. One of the big differences is that they‚Äôre connecting the audio source to different audio distortion nodes to actually change the audio. I just want to create a visualization so I wasn‚Äôt using any of those objects.
</p></div>
<h3>Audio Distortion Effects</h3>
<p>The <code>BaseAudioContext</code> has a few methods you can use to create audio distortion objects.</p>
<ul>
<li><code>WaveShaperNode</code>: Use <code>BaseAudioContext.createWaveShaper</code> to create a non-linear distortion. You can use a custom function to change the audio data.</li>
<li><code>GainNode</code>: Use <code>BaseAudioContext.createGain</code> to control the overall gain (volume) of the audio.</li>
<li><code>BiquadFilterNode</code>: Use <code>BaseAudioContext.createBiquadFilter</code> to apply some common audio effects.</li>
<li><code>ConvolverNode</code>: Use <code>BaseAudioContext.createConvolver</code> to apply reverb effects to audio.</li>
</ul>
<p>Each one of these objects has a <code>connect</code> function where you pass another context, output, or filter. Each one has a certain number of inputs and outputs. Here‚Äôs an example from that sample project of connecting all of them:</p>
<pre><span>1</span>source <span>=</span> audioCtx.createMediaStreamSource(stream);
<span>2</span>source.connect(distortion);
<span>3</span>distortion.connect(biquadFilter);
<span>4</span>biquadFilter.connect(gainNode);
<span>5</span>convolver.connect(gainNode);
<span>6</span>gainNode.connect(analyser);
<span>7</span>analyser.connect(audioCtx.destination);
</pre><p><strong>Note</strong>: Don‚Äôt connect to your audio context <code>destination</code> if you‚Äôre just trying to create a visualization for a call. The user will hear themselves talking.</p>
<div><p>Anyway, I tried adding these things to my code to see if that would get it working in Safari, but I had no luck.
</p></div>
<h2>Figuring out the Safari issue</h2>
<p>I was starting to get <em>real</em> frustrated trying to figure this out. I was gonna let it go when I thought Safari was just broken (because it usually is), but since I knew it <em>could</em> work in Safari, I couldn‚Äôt leave it alone.</p>
<p>Eventually I downloaded the actual HTML and Javascript files from that sample and started removing shit from their code, running it locally and seeing if it worked. Which it did. So now I‚Äôm editing my own code, and <em>their code</em>, to get them to be pretty much the same. Which I did. And <strong>still</strong> theirs worked and mine didn‚Äôt.</p>
<p>Next I just started desperately logging every single object at different points in my code to figure out what the fuck was going on. Then I noticed something.</p>
<div><p><img src="https://media.dwayne.xyz/blog/audio-context-suspended.png" alt="Dev console showing the output of logging this.audioContext. The state attribute is shown as suspended"></p><p>Output of logging the audio context object.</p></div>
<p>The <code>state</code> is ‚Äúsuspended‚Äù? Why? I don‚Äôt know. I did the same log in the sample code (that I had downloaded and was running on my machine) and it was ‚Äúrunning‚Äù.</p>
<p>This is the code that fixes it:</p>
<pre><span>1</span><span>this</span>.audioSource <span>=</span> <span>this</span>.audioContext.createMediaStreamSource(<span>this</span>.stream);
<span>2</span><span>this</span>.audioSource.connect(<span>this</span>.analyser);
<span>3</span><span>this</span>.audioContext.resume(); <span>// Why??????
</span></pre><div><p>Calling <code>resume</code> changes the state and then everything works. To this day I still don‚Äôt know why the sample code didn‚Äôt need that line.
</p></div>
<h2>Drawing the image and supporting light/dark modes</h2>
<p>Like everything else on my site, all of this must support different color schemes (and screen sizes, and mobile devices). That was surprisingly difficult when trying to draw an SVG on the canvas.</p>
<p>I‚Äôm using <a href="https://fontawesome.com/">FontAwesome</a> for all my icons on the site. I wanted to use one of them for these visualizations. The FontAwesome files are all SVGs (which is great), but I didn‚Äôt know how to draw the image in different colors in Javascript. The way I decided to do this was to load the SVG file into a Javascript <code>Image</code> object, then draw that onto the canvas each draw call.</p>
<p>That worked, but it only drew it black even after changing the fill and stroke colors. So after some web searching I read about someone deciding to draw out an image on an offscreen canvas, reading all the image data, and ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://dwayne.xyz/post/audio-visualizations-web-audio-api">https://dwayne.xyz/post/audio-visualizations-web-audio-api</a></em></p>]]>
            </description>
            <link>https://dwayne.xyz/post/audio-visualizations-web-audio-api</link>
            <guid isPermaLink="false">hacker-news-small-sites-24938292</guid>
            <pubDate>Fri, 30 Oct 2020 01:55:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Quantbase ‚Äì Deploy your own algo trader in 5 minutes with 0 code]]>
            </title>
            <description>
<![CDATA[
Score 11 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24938082">thread link</a>) | @tjs8rj
<br/>
October 29, 2020 | https://areyouinterested.co/site/quantbase/ | <a href="https://web.archive.org/web/*/https://areyouinterested.co/site/quantbase/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="hero-1"><p id="subheading">Deploy algorithms from top hedge funds,<br> rank and use 100s of users‚Äô algorithms,<br> or create new algo-traders effortlessly</p>

              <div id="interested">
                <h3>Are you interested?</h3>
                <div id="buttons">
                  <p><a href="https://areyouinterested.co/site/quantbase/yes" id="yes">Yes</a>
                  <a href="https://areyouinterested.co/site/quantbase/no" id="no">No</a>
                </p></div>
              </div>

            </div></div>]]>
            </description>
            <link>https://areyouinterested.co/site/quantbase/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24938082</guid>
            <pubDate>Fri, 30 Oct 2020 01:11:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Vega-Lite: A Grammar of Interactive Graphics]]>
            </title>
            <description>
<![CDATA[
Score 227 | Comments 50 (<a href="https://news.ycombinator.com/item?id=24937954">thread link</a>) | @tosh
<br/>
October 29, 2020 | https://vega.github.io/vega-lite/ | <a href="https://web.archive.org/web/*/https://vega.github.io/vega-lite/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
  <section>
    <p>
  <strong>Vega-Lite</strong> is a high-level grammar of interactive graphics. It provides a concise, declarative JSON syntax to create an expressive range of visualizations for data analysis and presentation.
</p>

<p><span>
  <span>
    Vega-Lite specifications describe visualizations as encoding mappings from data to <strong>properties of graphical marks</strong> (e.g., points or bars).
    The Vega-Lite compiler <strong>automatically produces visualization components</strong> including axes, legends, and scales.
    It determines default properties of these components based on a set of <strong>carefully designed rules</strong>.
    This approach allows Vega-Lite specifications to be concise for quick visualization authoring, while giving user control to override defaults and customize various parts of a visualization.
    As we also designed Vega-Lite to support data analysis, Vega-Lite supports both <strong>data transformations</strong> (e.g., aggregation, binning, filtering, sorting) and <strong>visual transformations</strong> (e.g., stacking and faceting).
    Moreover, Vega-Lite specifications can be <strong>composed</strong> into layered and multi-view displays, and made <strong>interactive with selections</strong>.
  </span>
  <span>
  <a href="https://vega.github.io/vega-lite/tutorials/getting_started.html">Get started<br><small>Latest Version: 4.17.0</small></a>
  <a href="https://vega.github.io/editor/#/custom/vega-lite">Try online</a>
  </span>
</span></p>

<p>Compared to <a href="https://vega.github.io/vega">Vega</a>, Vega-Lite provides a more concise and convenient form to author common visualizations. As Vega-Lite can compile its specifications to Vega specifications, users may use Vega-Lite as the <em>primary</em> visualization tool and, if needed, transition to use the lower-level Vega for advanced use cases.</p>

<p>For more information, read our <a href="https://medium.com/@uwdata/de6661c12d58">introduction article to Vega-Lite v2 on Medium</a>, watch our <a href="https://www.youtube.com/watch?v=9uaHRWj04D4">OpenVis Conf talk about the new features in Vega-Lite v2</a>, see the <a href="https://vega.github.io/vega-lite/docs/">documentation</a> and take a look at our <a href="https://vega.github.io/vega-lite/examples/">example gallery</a>. Follow us on <a href="https://twitter.com/vega_vis">Twitter at @vega_vis</a> to stay informed about updates.</p>

<h2 id="example">Example</h2>



<h2 id="additional-links">Additional Links</h2>

<ul>
  <li>Award winning <a href="https://idl.cs.washington.edu/papers/vega-lite">research paper</a> and <a href="https://www.youtube.com/watch?v=9uaHRWj04D4">video of our OpenVis Conf talk</a> on the design of Vega-Lite</li>
  <li>Listen to a Data Stories episode about <a href="http://datastori.es/121-declarative-visualization-with-vega-lite-and-altair-with-dominik-moritz-jacob-vanderplas-kanit-ham-wongsuphasawat/">Declarative Visualization with Vega-Lite and Altair</a>
</li>
  <li>
<a href="http://json-schema.org/">JSON schema</a> specification for <a href="https://github.com/vega/schema">Vega-Lite</a> (<a href="https://vega.github.io/schema/vega-lite/v4.json">latest</a>)</li>
  <li>Ask questions about Vega-Lite on <a href="https://stackoverflow.com/tags/vega-lite">Stack Overflow</a> or <a href="https://bit.ly/join-vega-slack-2020">Slack</a>
</li>
  <li>Fork our <a href="https://bl.ocks.org/domoritz/455e1c7872c4b38a58b90df0c3d7b1b9">Vega-Lite Block</a>, or <a href="https://beta.observablehq.com/@domoritz/vega-lite-demo">Observable Notebook</a>.</li>
</ul>

<h2 id="users">Users</h2>

<p>Vega-Lite is used by thousands of data enthusiasts, developers, journalists, data scientists, teachers, and researchers across many organizations. Here are some of them. Learn about integrations on our <a href="https://vega.github.io/vega-lite/ecosystem.html">ecosystem page</a>.</p>



<h2 id="team">Team</h2>

<p>The development of Vega-Lite is led by the alumni and members of the <a href="https://idl.cs.washington.edu/">University of Washington Interactive Data Lab</a> (UW IDL), including <a href="https://twitter.com/kanitw">Kanit ‚ÄúHam‚Äù Wongsuphasawat</a> (now at Apple), <a href="https://twitter.com/domoritz">Dominik Moritz</a> (now at CMU / Apple), <a href="https://twitter.com/arvindsatya1">Arvind Satyanarayan</a> (now at MIT), and <a href="https://twitter.com/jeffrey_heer">Jeffrey Heer</a> (UW IDL).</p>

<p>Vega-Lite gets significant contributions from its community‚Äìin particular <a href="https://willium.com/">Will Strimling</a>, <a href="https://github.com/YuhanLu">Yuhan (Zoe) Lu</a>, <a href="https://github.com/invokesus">Souvik Sen</a>, <a href="https://github.com/chanwutk">Chanwut Kittivorawong</a>, <a href="https://github.com/mattwchun">Matthew Chun</a>, <a href="https://github.com/AkshatSh">Akshat Shrivastava</a>, <a href="https://github.com/Saba9">Saba Noorassa</a>, <a href="https://github.com/sirahd">Sira Horradarn</a>, <a href="https://github.com/donghaoren">Donghao Ren</a>, and <a href="https://github.com/haldenl">Halden Lin</a>. Please see the <a href="https://github.com/vega/vega-lite/graphs/contributors">contributors page</a> for the full list of contributors.</p>

  </section>
</div></div>]]>
            </description>
            <link>https://vega.github.io/vega-lite/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24937954</guid>
            <pubDate>Fri, 30 Oct 2020 00:52:18 GMT</pubDate>
        </item>
    </channel>
</rss>
