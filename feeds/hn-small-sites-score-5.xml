<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 5]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 5. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Fri, 02 Oct 2020 12:44:25 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-5.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Fri, 02 Oct 2020 12:44:25 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[It Is Never a Compiler Bug Until It Is]]>
            </title>
            <description>
<![CDATA[
Score 60 | Comments 7 (<a href="https://news.ycombinator.com/item?id=24636326">thread link</a>) | @nullc
<br/>
September 30, 2020 | http://r6.ca/blog/20200929T023701Z.html | <a href="https://web.archive.org/web/*/http://r6.ca/blog/20200929T023701Z.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p>Last week I was trying to add some <a href="https://github.com/bitcoin-core/secp256k1/pull/822/commits/aa833603a6b4c947c21da04aeac40d80444ebcc1#diff-b04459e37839cd223176618536295715R425">testing code to libsecp256k1</a> and I was pulling out my hair trying to get it to work.
No amount of <code>printf</code> was working to illuminate what I was doing wrong.
Finally, out of desperation, I thought I would do a quick check to see if there are any compiler bugs related to <code>memcmp</code>, and lo and behold, I found <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=95189">GCC bug #95189: memcmp being wrongly stripped like strcmp</a>.</p><p>Honestly this was a pretty horrifying bug to read about.
Under some circumstances GCC 9 and 10 will cause <code>memcmp</code> to return an incorrect value when one of the inputs is statically known array that contains <code>NULL</code> bytes.
As I rushed to <a href="https://gist.githubusercontent.com/roconnor/2b8e22e829ed80088ed6690cc3c7f3a8/raw/455571a6d9053c597c1585debe6f9dbd6af85071/gistfile1.txt">recompile my computer system using GCC 8</a>, I contemplated the vast consequences of such a bug could be, and pondered how it was possible that computers could function at all.</p><p>However over the week, with the help of my colleagues, we managed to get a better understanding of the scope of the bug.
The bug can only convert non-zero values to zero values.
The static array needs to have a <code>NULL</code> byte within the first 4 bytes.
Most importantly, the <code>memcmp</code> result must not immediately be compared to <code>0</code> for equality or inequality, or any equivalent test.
A different code path is taken in the compiler in that case.
That explained why computers were still functioning.
I expect the vast majority of the uses of <code>memcmp</code> does an immediate test for equality with <code>0</code>.</p><p>I still wondered though, how much code was being affected. My colleague Tim suggested that it would be possible to instrument GCC to emit a message when it was about to miscompile a program.
Together we came up with <a href="https://gcc.gnu.org/bugzilla/attachment.cgi?id=49276&amp;action=diff">a patch</a> to GCC 9 and 10 that would print a debugging message.
Once again, I recompiled my entire system, to see what GCC was miscompiling.
This is what I found:</p><ul>
<li><a href="https://github.com/unicode-org/icu/blob/4fb47b12a70737ee12326220e71c2d73c5ec658f/icu4c/source/common/uniset_props.cpp#L709">https://github.com/unicode-org/icu/blob/4fb47b12a70737ee12326220e71c2d73c5ec658f/icu4c/source/common/uniset_props.cpp#L709</a></li>
<li><a href="https://github.com/xiph/flac/blob/ce6dd6b5732e319ef60716d9cc9af6a836a4011a/src/flac/decode.c#L1310">https://github.com/xiph/flac/blob/ce6dd6b5732e319ef60716d9cc9af6a836a4011a/src/flac/decode.c#L1310</a></li>
<li><a href="https://github.com/torvalds/linux/blob/fb0155a09b0224a7147cb07a4ce6034c8d29667f/drivers/atm/zatm.c#L1172">https://github.com/torvalds/linux/blob/fb0155a09b0224a7147cb07a4ce6034c8d29667f/drivers/atm/zatm.c#L1172</a></li>
<li><a href="https://github.com/nss-dev/nss/blob/1f3746f5107535a47bb4e3969f561e1bd1314bab/gtests/pk11_gtest/pk11_chacha20poly1305_unittest.cc#L425">https://github.com/nss-dev/nss/blob/1f3746f5107535a47bb4e3969f561e1bd1314bab/gtests/pk11_gtest/pk11_chacha20poly1305_unittest.cc#L425</a></li>
<li><a href="https://github.com/GNOME/glib/blob/010569b3734f864fcf584f771915b78bd391eb5f/glib/tests/refstring.c#L70">https://github.com/GNOME/glib/blob/010569b3734f864fcf584f771915b78bd391eb5f/glib/tests/refstring.c#L70</a></li>
<li><a href="https://github.com/heimdal/heimdal/blob/7ae2dfd853c87f9cbecb6f399de4dad09bad4606/lib/gssapi/krb5/arcfour.c#L390">https://github.com/heimdal/heimdal/blob/7ae2dfd853c87f9cbecb6f399de4dad09bad4606/lib/gssapi/krb5/arcfour.c#L390</a>, <a href="https://github.com/heimdal/heimdal/blob/7ae2dfd853c87f9cbecb6f399de4dad09bad4606/lib/gssapi/krb5/arcfour.c#L661">https://github.com/heimdal/heimdal/blob/7ae2dfd853c87f9cbecb6f399de4dad09bad4606/lib/gssapi/krb5/arcfour.c#L661</a>, <a href="https://github.com/heimdal/heimdal/blob/7ae2dfd853c87f9cbecb6f399de4dad09bad4606/lib/gssapi/krb5/arcfour.c#L1279">https://github.com/heimdal/heimdal/blob/7ae2dfd853c87f9cbecb6f399de4dad09bad4606/lib/gssapi/krb5/arcfour.c#L1279</a></li>
<li><a href="https://github.com/zeromq/libzmq/blob/22d218a182855f28038e865cb75bf5897ff0c786/tests/test_mock_pub_sub.cpp#L203">https://github.com/zeromq/libzmq/blob/22d218a182855f28038e865cb75bf5897ff0c786/tests/test_mock_pub_sub.cpp#L203</a></li>
<li><a href="https://github.com/pigoz/mplayer-svn/blob/8d651873a9eb193f5155ffb51ece206f187cf00f/sub/sub_cc.c#L391-L412">https://github.com/pigoz/mplayer-svn/blob/8d651873a9eb193f5155ffb51ece206f187cf00f/sub/sub_cc.c#L391-L412</a></li>
</ul>
<p>On my entire system I only found 10 lines of code that were miscompiled.
Three lines are tests.
All of the lines could be rewritten as a comparison to 0.
None of the lines looked that serious.
I am not sure which one is the worse: the reduced message integrity code(?) from some ARCFOUR implementation or the something something from an ATM driver?</p><p>The mplayer miscompilation is the most mysterious.
The code surrounding that function all appears to be immediately compare <code>memcmp</code> with <code>0</code>.
And given that my debug message refused to point to exactly what line is being miscompiled in that function, I fear some set of optimizations has happened to allow this code to be miscompiled in some way.</p><p>With more hardware I could do <a href="https://hydra.nixos.org/jobset/nixpkgs/trunk#tabs-jobs">a more thorough investigation</a> of the consequences of this GCC bug.
Until then I am going to stick with GCC 8 until GCC 9 and 10 have a new point releases.

</p></div></div>]]>
            </description>
            <link>http://r6.ca/blog/20200929T023701Z.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24636326</guid>
            <pubDate>Wed, 30 Sep 2020 07:01:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Apple‚Äôs T2 security chip jailbreak]]>
            </title>
            <description>
<![CDATA[
Score 283 | Comments 105 (<a href="https://news.ycombinator.com/item?id=24636166">thread link</a>) | @Yeri
<br/>
September 29, 2020 | https://reportcybercrime.com/hackers-jailbreak-apples-t2-security-chip-powered-by-bridgeos/ | <a href="https://web.archive.org/web/*/https://reportcybercrime.com/hackers-jailbreak-apples-t2-security-chip-powered-by-bridgeos/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p>The Apple T2 security chip has finally been jailbroken! Here‚Äôs all you need to know about it.&nbsp; &nbsp; &nbsp;</p>
<h2><span id="The_Apple_T2_Security_chip_now_has_a_jailbreak"><strong>The Apple T2 Security chip now has a jailbreak</strong><span></span></span></h2>
<p>The <a href="https://yalujailbreak.net/checkra1n-jailbreak-ios-14/">latest update of checkra1n</a> adds support for bridgeOS ‚Äì the operating system that powers the Apple T2 security chip.</p>
<p>For what it‚Äôs worth, the T2 chip is not A10 per se but it is derived from the Apple A10 Fusion architecture.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>
<p><strong>bridgeOS</strong> is a proprietary operating system created by Apple for its hardware. It is responsible for operating the Touch Bar and managing secure data.&nbsp;&nbsp;&nbsp;</p>
<p>Here‚Äôs what hacker Jamie Bishop had to say about this development.&nbsp;&nbsp;</p>
<blockquote data-width="550" data-dnt="true">
<p lang="en" dir="ltr">With <a href="https://twitter.com/checkra1n?ref_src=twsrc%5Etfw" target="_blank" rel="nofollow noopener noreferrer">@checkra1n</a> 0.11.0, you can now jailbreak the T2 chip in your Mac. An incredible amount of work went into this and it required changes at multiple levels.</p>
<p>There‚Äôs too many people to tag, but shoutout to everyone who worked on getting this incredible feature shipped.</p>
<p>‚Äî Jamie Bishop (@jamiebishop123) <a href="https://twitter.com/jamiebishop123/status/1308355178307948545?ref_src=twsrc%5Etfw" target="_blank" rel="nofollow noopener noreferrer">September 22, 2020</a></p>
</blockquote>
<p>Since checkra1n is still in beta, there are a few issues you need to be aware of. Firstly, you might have to reconnect your device after jailbreaking for bootstrap upload.</p>
<p>Secondly, macOS takes over the USB connection and blocks communication after bootup.&nbsp;</p>
<p>If you are interested in jailbreaking the T2 chip, download checkra1n jailbreak v0.11 from this <a href="https://yalujailbreak.net/checkra1n-jailbreak-ios-14/">link</a>.&nbsp;</p>
<h2><span id="What_can_a_bridgeOS_jailbreak_be_used_for"><strong>What can a bridgeOS jailbreak be used for?&nbsp;</strong><span></span></span></h2>
<p>The T2 security processor and the Touch Bar can run while the operating system is shutdown.</p>
<p>Apparently, jailbreak tweak developers could develop tweaks for the Touch Bar if it gets Substrate support in the future.</p>
<p>At present, there are no publicly dumped headers available for bridgeOS. It lacks a MobileSubstrate port too. However, that could change in the future because it shares some of the components of watchOS and iOS frameworks.</p>
<p>Once we get Substrate working, <strong>tweaking and theming could become possible.</strong></p>

<p>The ability to exploit the T2 processor could also allow you to bypass the anti-repair mechanism built into the Touch Bar. Further, it may allow hackers to get rid of the password or unlock MDM-locked systems.&nbsp;</p>
<p>As far as the OS goes, we could also add secure boot certificates like Microsoft‚Äôs secure boot signing or a self-signed Linux certificate.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>
<p>It will definitely be interesting to see what the future holds for the <em>T2 security chip</em> following the release of checkra1n.&nbsp; &nbsp; &nbsp;</p>
<p>Don‚Äôt forget to follow us on Twitter and Facebook for the latest jailbreak news and updates.&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p>
</div></div>]]>
            </description>
            <link>https://reportcybercrime.com/hackers-jailbreak-apples-t2-security-chip-powered-by-bridgeos/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24636166</guid>
            <pubDate>Wed, 30 Sep 2020 06:19:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[From zero to main(): How to write a bootloader from scratch]]>
            </title>
            <description>
<![CDATA[
Score 206 | Comments 20 (<a href="https://news.ycombinator.com/item?id=24635383">thread link</a>) | @tigerlily
<br/>
September 29, 2020 | https://interrupt.memfault.com/blog/how-to-write-a-bootloader-from-scratch | <a href="https://web.archive.org/web/*/https://interrupt.memfault.com/blog/how-to-write-a-bootloader-from-scratch">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

        <p>This is the third post in our <a href="https://interrupt.memfault.com/blog/tag/zero-to-main">Zero to main() series</a>,
where we bootstrap a working firmware from zero code on a
cortex-M series microcontroller.</p>

<p>Previously, <a href="https://interrupt.memfault.com/blog/zero-to-main-1">we wrote a startup file to bootstrap our C environment</a>, and <a href="https://interrupt.memfault.com/blog/how-to-write-linker-scripts-for-firmware">a linker
script to get the right data at the right addresses</a>. These two will allow us to
write a monolithic firmware which we can load and run on our microcontrollers.</p>

<p>In practice, this is not how most firmware is structured. Digging through vendor
SDKs, you‚Äôll notice that they all recommend using a <em>bootloader</em> to load your
applications. A bootloader is a small program which is responsible for loading
and starting your application.</p>

<!-- excerpt start -->
<p>In this post, we will explain why you may want a
bootloader, how to implement one, and cover a few advanced techniques you may
use to make your bootloader more useful.
<!-- excerpt end --></p>

<p>Like Interrupt? <a href="http://eepurl.com/gpRedv" target="_blank">Subscribe</a> to get our latest posts straight to your mailbox.</p>



<h2 id="why-you-may-need-a-bootloader">Why you may need a bootloader</h2>

<p>Bootloaders serve many purposes, ranging from security to software architecture.</p>

<p>Most commonly, you may need a bootloader to load your software. Some
microcontrollers like Dialog‚Äôs
<a href="https://www.dialog-semiconductor.com/products/connectivity/bluetooth-low-energy/smartbond-da14580-and-da14583">DA14580</a>
have little to no onboard flash and instead rely on an external device to store
firmware code. In that case, it is the bootloader‚Äôs job to copy code from
non-executable storage, such as a SPI flash, to an area of memory that can be
executed from, such as RAM.</p>

<p>Bootloaders also allow you to decouple parts of the program that are mission
critical, or that have security implications, from application code which
changes regularly.  For example, your bootloader may contain firmware update
logic so your device can recover no matter how bad a bug ships in your
application firmware.</p>

<p>Last but certainly not least, bootloaders are an essential component of a
trusted boot architecture.  Your bootloader can, for example, verify a
cryptographic signature to make sure the application has not been replaced or
tampered with.</p>

<h2 id="a-minimal-bootloader">A minimal bootloader</h2>
<p>Let‚Äôs build a simple bootloader together. To start, our bootloader must do two
things:</p>

<ol>
  <li>Execute on MCU boot</li>
  <li>Jump to our application code</li>
</ol>

<p>We‚Äôll need to decide on a memory map, write some bootloader code, and update our
application to make it bootload-able.</p>

<h3 id="setting-the-stage">Setting the stage</h3>

<p>For this example, we‚Äôll be using the same setup as we did in our previous Zero
to Main posts:</p>
<ul>
  <li>Adafruit‚Äôs <a href="https://www.adafruit.com/product/3505">Metro M0 Express</a> as our
development board,</li>
  <li>a simple <a href="https://www.adafruit.com/product/2764">CMSIS-DAP Adapter</a></li>
  <li>OpenOCD (the <a href="https://github.com/arduino/OpenOCD">Arduino fork</a>) for
programming</li>
</ul>

<h3 id="deciding-on-a-memory-map">Deciding on a memory map</h3>

<p>We must first decide on how much space we want to dedicate to our bootloader.
Code space is precious - your application may come to need more of it - and you
will not be able to change this without updating your bootloader, so make
this as small as you possibly can.</p>

<p>Another important factor is your flash sector size: you want to make sure you
can erase app sectors without erasing bootloader data, or vice versa.
Consequently, your bootloader region must end on a flash sector boundary
(typically 4kB).</p>

<p>I decided to go with a 16kB region, leading to the following memory map:</p>

<div><div><pre><code>        0x0 +---------------------+
            |                     |
            |     Bootloader      |
            |                     |
     0x4000 +---------------------+
            |                     |
            |                     |
            |     Application     |
            |                     |
            |                     |
    0x30000 +---------------------+
</code></pre></div></div>

<p>We can transcribe that memory into a linker script:</p>

<div><div><pre><code>/* memory_map.ld */
MEMORY
{
  bootrom  (rx)  : ORIGIN = 0x00000000, LENGTH = 0x00004000
  approm   (rx)  : ORIGIN = 0x00004000, LENGTH = 0x0003C000
  ram      (rwx) : ORIGIN = 0x20000000, LENGTH = 0x00008000
}

__bootrom_start__ = ORIGIN(bootrom);
__bootrom_size__ = LENGTH(bootrom);
__approm_start__ = ORIGIN(approm);
__approm_size__ = LENGTH(approm);
</code></pre></div></div>

<p>Since linker scripts are composable, we will be able to <code>include</code> that memory
map into the linker scripts we write for our bootloader and our application.</p>

<p>You‚Äôll notice that the linker script above declares some variables. We‚Äôll need
those for our bootloader to know where to find the application. To make them
accessible in C code, we declare them in a header file:</p>

<div><div><pre><code><span>/* memory_map.h */</span>
<span>#pragma once
</span>
<span>extern</span> <span>int</span> <span>__bootrom_start__</span><span>;</span>
<span>extern</span> <span>int</span> <span>__bootrom_size__</span><span>;</span>
<span>extern</span> <span>int</span> <span>__approm_start__</span><span>;</span>
<span>extern</span> <span>int</span> <span>__approm_size__</span><span>;</span>
</code></pre></div></div>

<h3 id="implementing-the-bootloader-itself">Implementing the bootloader itself</h3>
<p>Next up, let‚Äôs write some bootloader code. Our bootloader needs to start
executing on boot and then jump to our app.</p>

<p>We know how to do the first part from our previous post: we need a valid stack
pointer at address <code>0x0</code> , and a valid <code>Reset_Handler</code>  function setting up our
environment at address <code>0x4</code>. We can reuse our previous startup file and linker
script, with one change: we use  <code>memory_map.ld</code> rather than define our own
<code>MEMORY</code> section.</p>

<p>We also need to put our code in the <code>bootrom</code> region from our memory rather than
the <code>rom</code> region in our previous post.</p>

<p>Our linker script therefore looks like this:</p>

<div><div><pre><code>/* bootloader.ld */
INCLUDE memory_map.ld

/* Section Definitions */
SECTIONS
{
    .text :
    {
        KEEP(*(.vectors .vectors.*))
        *(.text*)
        *(.rodata*)
        _etext = .;
    } &gt; bootrom
  ...
}
</code></pre></div></div>

<p>To jump into our application, we need to know where the <code>Reset_Handler</code> of the
app is, and what stack pointer to load.  Again, we know from our previous post
that those should be the first two 32-bit words in our binary, so we just need
to dereference those addresses using the <code>__approm_start__</code> variable from our
memory map.</p>

<div><div><pre><code><span>/* bootloader.c */</span>
<span>#include &lt;inttypes.h&gt;
#include "memory_map.h"
</span>
<span>int</span> <span>main</span><span>(</span><span>void</span><span>)</span> <span>{</span>
  <span>uint32_t</span> <span>*</span><span>app_code</span> <span>=</span> <span>(</span><span>uint32_t</span> <span>*</span><span>)</span><span>__approm_start__</span><span>;</span>
  <span>uint32_t</span> <span>app_sp</span> <span>=</span> <span>app_code</span><span>[</span><span>0</span><span>];</span>
  <span>uint32_t</span> <span>app_start</span> <span>=</span> <span>app_code</span><span>[</span><span>1</span><span>];</span>
  <span>/* TODO: Start app */</span>
  <span>/* Not Reached */</span>
  <span>while</span> <span>(</span><span>1</span><span>)</span> <span>{}</span>
<span>}</span>
</code></pre></div></div>

<p>Next we must load that stack pointer and jump to the code. This will require a
bit of assembly code.</p>

<p>ARM MCUs use the <a href="http://www.keil.com/support/man/docs/armasm/armasm_dom1361289882044.htm"><code>msr</code> instruction
</a> to
load immediate or register data into system registers, in this case the MSP
register or ‚ÄúMain Stack Pointer‚Äù.</p>

<p>Jumping to an address is done with a branch, in our case with a <a href="http://www.keil.com/support/man/docs/armasm/armasm_dom1361289866466.htm"><code>bx</code>
instruction</a>.</p>

<p>We wrap those two into a <code>start_app</code> function which accepts our <code>pc</code> and <code>sp</code> as
arguments, and get our minimal bootloader:</p>

<div><div><pre><code><span>/* app.c */</span>
<span>#include &lt;inttypes.h&gt;
#include "memory_map.h"
</span>
<span>static</span> <span>void</span> <span>start_app</span><span>(</span><span>uint32_t</span> <span>pc</span><span>,</span> <span>uint32_t</span> <span>sp</span><span>)</span> <span>__attribute__</span><span>((</span><span>naked</span><span>))</span> <span>{</span>
    <span>__asm</span><span>(</span><span>"           </span><span>\n</span><span>\
          msr msp, r1 /* load r1 into MSP */</span><span>\n</span><span>\
          bx r0       /* branch to the address at r0 */</span><span>\n</span><span>\
    "</span><span>);</span>
<span>}</span>

<span>int</span> <span>main</span><span>(</span><span>void</span><span>)</span> <span>{</span>
  <span>uint32_t</span> <span>*</span><span>app_code</span> <span>=</span> <span>(</span><span>uint32_t</span> <span>*</span><span>)</span><span>__approm_start__</span><span>;</span>
  <span>uint32_t</span> <span>app_sp</span> <span>=</span> <span>app_code</span><span>[</span><span>0</span><span>];</span>
  <span>uint32_t</span> <span>app_start</span> <span>=</span> <span>app_code</span><span>[</span><span>1</span><span>];</span>
  <span>start_app</span><span>(</span><span>app_start</span><span>,</span> <span>app_sp</span><span>);</span>
  <span>/* Not Reached */</span>
  <span>while</span> <span>(</span><span>1</span><span>)</span> <span>{}</span>
<span>}</span>
</code></pre></div></div>

<blockquote>
  <p>Note: hardware resources initialized in the bootloader must be de-initialized
before control is transferred to the app. Otherwise, you risk breaking
assumptions the app code is making about the state of the system</p>
</blockquote>

<h3 id="making-our-app-bootloadable">Making our app bootloadable</h3>

<p>We must update our app to take advantage of our new memory map. This is again
done by updating our linker script to include <code>memory_map.ld</code> and changing our
sections to go to the <code>approm</code> region rather than <code>rom</code>.</p>

<div><div><pre><code>/* app.ld */
INCLUDE memory_map.ld

/* Section Definitions */
SECTIONS
{
    .text :
    {
        KEEP(*(.vectors .vectors.*))
        *(.text*)
        *(.rodata*)
        _etext = .;
    } &gt; approm
  ...
}
</code></pre></div></div>

<p>We also need to update the <a href="https://developer.arm.com/docs/dui0552/latest/the-cortex-m3-processor/exception-model/vector-table"><em>vector
table</em></a>
used by the microcontroller. The vector table contains the address of every
exception and interrupt handler in our system. When an interrupt signal comes
in, the ARM core will call the address at the corresponding offset in the vector
table.</p>

<p>For example, the offset for the Hard fault handler is <code>0xc</code>, so when a hard
fault is hit, the ARM core will jump to the address contained in the table at
that offset.</p>

<p>By default, the vector table is at address <code>0x0</code>, which means that when our chip
powers up, only the bootloader can handle exceptions or interrupts! Fortunately, ARM
provides the <a href="https://developer.arm.com/docs/dui0552/latest/cortex-m3-peripherals/system-control-block/vector-table-offset-register">Vector Table Offset
Register</a>
to dynamically change the address of the vector table. The register is at
address <code>0xE000ED08</code> and has a simple layout:</p>

<div><div><pre><code>31                                  7              0
+-----------------------------------+--------------+
|                                   |              |
|              TBLOFF               |   Reserved   |
|                                   |              |
+-----------------------------------+--------------+
</code></pre></div></div>

<p>Where <code>TBLOFF</code> is the address of the vector table. In our case, that‚Äôs the start
of our text section, or <code>_stext</code>. To set it in our app, we add the following to
our <code>Reset_Handler</code>:</p>

<div><div><pre><code><span>/* startup_samd21.c */</span>
<span>/* Set the vector table base address */</span>
<span>uint32_t</span> <span>*</span><span>vector_table</span> <span>=</span> <span>(</span><span>uint32_t</span> <span>*</span><span>)</span> <span>&amp;</span><span>_stext</span><span>;</span>
<span>uint32_t</span> <span>*</span><span>vtor</span> <span>=</span> <span>(</span><span>uint32_t</span> <span>*</span><span>)</span><span>0xE000ED08</span><span>;</span>
<span>*</span><span>vtor</span> <span>=</span> <span>((</span><span>uint32_t</span><span>)</span> <span>vector_table</span> <span>&amp;</span> <span>0xFFFFFFF8</span><span>);</span>
</code></pre></div></div>

<p>One quirk of the ARMv7-m architecture is the alignment requirement for the
vector table, as specified in section B1.5.3 of the <a href="https://static.docs.arm.com/ddi0403/eb/DDI0403E_B_armv7m_arm.pdf">reference
manual</a>:</p>

<blockquote>
  <p>The Vector table must be naturally aligned to a power of two whose alignment value is greater than or equal
to (Number of Exceptions supported x 4), with a minimum alignment of 128 bytes.The entry at offset 0 is
used to initialize the value for SP_main, see The SP registers on page B1-8. All other entries must have bit
[0] set, as the bit is used to define the EPSR T-bit on exception entry (see Reset behavior on page B1-20 and
Exception entry behavior on page B1-21 for details).</p>
</blockquote>

<p>Our SAMD21 MCU has 28 interrupts on top of the 16 system reserved exceptions,
for a total of 44 entries in the table. Multiply that by 4 and you get 176. The
next power of 2 is 256, so our vector table must be 256-byte aligned.</p>

<h3 id="putting-it-all-together">Putting it all together</h3>

<p>Because it is hard to witness the bootloader execute, we add a print line to
each of our programs:</p>

<div><div><pre><code><span>/* boootloader.c */</span>
<span>#include &lt;inttypes.h&gt;
#include "memory_map.h"
</span>
<span>static</span> <span>void</span> <span>s‚Ä¶</span></code></pre></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://interrupt.memfault.com/blog/how-to-write-a-bootloader-from-scratch">https://interrupt.memfault.com/blog/how-to-write-a-bootloader-from-scratch</a></em></p>]]>
            </description>
            <link>https://interrupt.memfault.com/blog/how-to-write-a-bootloader-from-scratch</link>
            <guid isPermaLink="false">hacker-news-small-sites-24635383</guid>
            <pubDate>Wed, 30 Sep 2020 03:19:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Nobody seems to give a crap about Google‚Äôs monopoly on search, not even Google]]>
            </title>
            <description>
<![CDATA[
Score 22 | Comments 6 (<a href="https://news.ycombinator.com/item?id=24635322">thread link</a>) | @pcr910303
<br/>
September 29, 2020 | https://thejollyteapot.com/2020/09/29/nobody-seems-to-give-a-crap-about-google-s-monopoly-on-search-not-even-google | <a href="https://web.archive.org/web/*/https://thejollyteapot.com/2020/09/29/nobody-seems-to-give-a-crap-about-google-s-monopoly-on-search-not-even-google">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
          <p><a href="https://thejollyteapot.com/2020/09/29/nobody-seems-to-give-a-crap-about-google-s-monopoly-on-search-not-even-google">29 September 2020</a></p>
<p>Quick summary of the situation, from the <a href="https://www.android.com/choicescreen/">Choice Screen webpage on the Android website</a>:</p>
<blockquote>
<p>On August 2, 2019, following the European Commission‚Äôs July 2018 Android decision, Google announced that it would implement a choice screen for general search providers on all new Android phones and tablets shipped into the European Economic Area (<span>EEA</span>) where the Google Search app is pre-installed. This updated Help Center article describes a modified choice screen design that was developed in consultation with the European Commission.</p>
<p>The choice screen will appear during initial device setup and will feature multiple search providers, including Google. An illustrative version of the choice screen follows. Providers may vary by country. [‚Ä¶]</p>
<p>Eligible search providers will need to fill out an application form and can bid for inclusion based on an auction. The auction process is explained in greater detail below.</p>
</blockquote>
<p>Considering how much this farce has been <a href="https://www.neowin.net/news/duckduckgo-blasts-googles-android-choice-screen-says-it-incentivizes-ads">covered</a> <a href="https://techcrunch.com/2020/07/30/googles-no-choice-screen-on-android-isnt-working-says-ecosia-querying-the-eus-approach-to-antitrust-enforcement/">already</a>, I will not repeat what <a href="https://www.businessinsider.com/google-android-choice-screen-eu-duckduckgo-2020-9?IR=T">everybody knows</a>. Instead I will just point out how Google announced the result of the auctions <a href="https://www.android.com/choicescreen-winners/">on the Android website</a>: four sentences, two footnotes, a table listing the<span></span> <span>‚Äú</span>winners‚Äù per country, a title that reads do-not-give-a-shit, and that‚Äôs it.</p>
<p>Also, I don‚Äôt think I have ever heard of ‚Äî <em>check notes</em> ‚Äî PrivacyWall and info.com.<span></span> <span>‚Äô</span>What are they?‚Äô, you may ask: they are search engines apparently, and they are the only two search engine options offered to Android users in France that are not Google or Bing. And yes, in case you‚Äôre wondering, <a href="https://www.youtube.com/watch?v=nfHuZ5qrYX4">Bing is still around</a>. Ecosia, DuckDuckGo, barely appear on the list.</p>
<p>If anything, this whole thing will reinforce Google‚Äôs monopoly on search. Users will see this<span></span> <span>‚Äô</span>choice screen‚Äô and think:<span></span> <span>‚Äú</span><span>OK</span>, so two shady things I don‚Äôt know, Bing (laughs), and yep, Google. Why would they even ask me to choose?‚Äù</p>
<p>It‚Äôs like asking kids who have only ever watched the movie <em>Ratatouille</em> if they want to watch Ratatouille again, or another movie from this list: <a href="https://www.imdb.com/title/tt2120120/?ref_=fn_al_tt_1"><em>Pixels</em></a> (even the kids would know it sucks), <em><a href="https://www.imdb.com/title/tt0257778/?ref_=ttls_li_tt">The Hunchback of Notre Dame <span>II</span>: The Secret of the Bell</a></em> (you‚Äôre lucky if the kids even know about the first one), and <em><a href="https://www.imdb.com/title/tt0083630/?ref_=nv_sr_srsg_0">The Beastmaster</a></em>.</p>

          
          <p>
            <a href="https://thejollyteapot.com/tagged/technology">Technology</a>
          </p>

          
          


      

          <a href="https://thejollyteapot.com/2020/08/18/samsung-commits-to-deliver-three-years-of-android-updates-for-its-phones">
            <h5>Previous post</h5>
            <span>Samsung commits to deliver three years of Android updates for its phones</span>
            
          </a>

          <a href="https://thejollyteapot.com/2020/10/1/looking-back-at-my-short-list-of-apple-wishes-from-april">
            <h5>Next post</h5>
            <span>Looking back at my short list of Apple wishes from April</span>
          </a>

        </div></div>]]>
            </description>
            <link>https://thejollyteapot.com/2020/09/29/nobody-seems-to-give-a-crap-about-google-s-monopoly-on-search-not-even-google</link>
            <guid isPermaLink="false">hacker-news-small-sites-24635322</guid>
            <pubDate>Wed, 30 Sep 2020 03:07:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I tracked and analyzed 13,159 Hacker News posts. Here's what I learned]]>
            </title>
            <description>
<![CDATA[
Score 15 | Comments 4 (<a href="https://news.ycombinator.com/item?id=24634991">thread link</a>) | @mellosouls
<br/>
September 29, 2020 | https://www.ankle.io/posts/hacker-news-analysis | <a href="https://web.archive.org/web/*/https://www.ankle.io/posts/hacker-news-analysis">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><h2 id="motivation"><a href="#motivation" aria-label="motivation permalink"></a>Motivation</h2>
<p>Hitting the front page of Hacker News is an incredible source of short-term traffic to your website or article.</p>
<p>According to this <a href="https://thehftguy.com/2017/09/26/hitting-hacker-news-front-page-how-much-traffic-do-you-get" rel="nofollow">article</a>, in 2017, being on the front page brings a sudden influx of between 10k and 30k visitors to your website/article, something many content marketers, product people, and entrepreneurs undoubtedly salivate over, including me.</p>
<p>I occasionally post to Hacker News (with random things and personal stuff) but have never reached the front page before. Therefore, I decided to dig a little deeper into the mechanics of Hacker News and the best approach to take if the sole goal is to hit the front page.</p>
<p>Obviously, a critical part of hitting the front page is submitting an interesting article which resonates with the HN audience. But beyond this, there are other factors at play‚Äîtiming, title, upvotes, etc.</p>
<h2 id="methodology-a-unique-approach"><a href="#methodology-a-unique-approach" aria-label="methodology a unique approach permalink"></a>Methodology: A unique approach</h2>
<p>I am not the only person to want to know the best approach to hitting the front page. A few people have analyzed data from <a href="https://console.cloud.google.com/marketplace/details/y-combinator/hacker-news" target="_blank" rel="nofollow noopener noreferrer">Google‚Äôs Hacker News Dataset</a> on BigQuery to find the best time to submit to Hacker News.</p>
<p>The problem with this approach is that BigQuery doesn‚Äôt know how long a post spent on the front page, nor how long it was there for or what position it reached. It can only provide the total number of upvotes.</p>
<p>With this in mind, I wrote a small NodeJS script to poll Hacker News every 2 minutes. Using a Postgres database, I stored every post, user, and upvote over two weeks.</p>
<p>With this information, I compiled a list of useful information and insights below.</p>
<p>Note: To filter out posts that are either flagged or transiently featured, I set an arbitrary duration of 60+ minutes as a time requirement in the top for a post to be considered a ‚Äúfront page post.‚Äù</p>
<h2 id="limitations"><a href="#limitations" aria-label="limitations permalink"></a>Limitations</h2>
<p>Obviously, the lack of data (13,159 posts) and time spent collecting data (2 weeks) is the most significant limitation of my results. Nonetheless, I believe the results are still relatively useful, at least for the next few weeks or months.</p>
<h2 id="results"><a href="#results" aria-label="results permalink"></a>Results</h2>
<h3 id="basic-stats"><a href="#basic-stats" aria-label="basic stats permalink"></a>Basic stats</h3>
<ul>
<li>I tracked a total of 13,159 posts over two weeks.</li>
<li>Of these, 1,073 made the front page for more than 60 minutes.</li>
<li>That‚Äôs a hit rate of 8.15%</li>
<li>Frontpage posts stayed at the top for an average of 483.3 minutes (8 hours)</li>
<li>30% of posts reaching the front page were posted by users who posted more than once over the two weeks.</li>
</ul>
<p><strong>Takeaway:</strong> In my opinion, more posts reach the front page than expected and for longer than expected.</p>
<h3 id="types-of-posts-breakdown"><a href="#types-of-posts-breakdown" aria-label="types of posts breakdown permalink"></a>Types of posts breakdown</h3>

<h3 id="hit-rate--of-different-post-types-making-the-front-page"><a href="#hit-rate--of-different-post-types-making-the-front-page" aria-label="hit rate  of different post types making the front page permalink"></a>Hit rate % of different post types making the front page</h3>

<p><strong>Takeaway:</strong> Interestingly, ‚ÄúShow HN‚Äù posts make the front page by proportion very slightly less than ‚ÄúLinks,‚Äù which goes against previous thought that ‚ÄúShow HN‚Äù posts perform better due to an algorithm bias. That being said, there may well be an algorithm bias, just many ‚ÄúShow HN‚Äù posts are simply not worth upvoting.</p>
<h3 id="when-is-the-best-day-to-post-to-hacker-news-in-2020"><a href="#when-is-the-best-day-to-post-to-hacker-news-in-2020" aria-label="when is the best day to post to hacker news in 2020 permalink"></a>When is the best day to post to Hacker News in 2020?</h3>

<p>The chart above shows that you should post on the weekend to stand the best chance of reaching the front page of Hacker News. The difference from the worst to the best day is only 3.2%, so there‚Äôs not a lot in it.</p>
<p>The weekend likely gives you a higher chance to reach the front page because fewer posts are submitted, probably due to lower traffic.</p>
<p><strong>Takeaway</strong>: If your goal is to reach the front page regardless of traffic, posting on the weekend is your best bet. However, because the difference in chance is relatively low throughout the week, posting on a more popular day might be a better risk-reward ratio based on the considerable difference in the traffic you‚Äôd likely receive.</p>
<h3 id="when-is-the-best-time-to-post-to-hacker-news-in-2020"><a href="#when-is-the-best-time-to-post-to-hacker-news-in-2020" aria-label="when is the best time to post to hacker news in 2020 permalink"></a>When is the best time to post to Hacker News in 2020?</h3>

<p>Taking a more granular look at the combined hours of all the posts submitted, the chart above highlights a much more significant difference (10.9%) between the chance of reaching the front page of Hacker News.</p>
<p>The best time to post to Hacker News is between 6 am‚Äî12 pm UTC (11 pm‚Äî5 am PDT). Again, the reason is likely because this is when the website traffic is at it‚Äôs lowest, and therefore the competition is relatively low.</p>
<p>I imagine the US is responsible for most of Hacker News‚Äôs web traffic, which lines up with the results above. Therefore, if you are posting a link for a US-specific audience to HN, it‚Äôs probably best to pick a different time like 4 pm UTC (9 am PDT), or midnight UTC (5 pm PDT).</p>
<p><strong>Takeaway:</strong> If your link requires a US-specific audience, post at 4 pm UTC (9 am PDT / 12 pm EDT), or midnight UTC (5 pm PDT). Otherwise, post between 6 am‚Äî12 pm UTC (11 pm‚Äî5 am PDT) for the best chance of reaching the front page of Hacker News.</p>
<h3 id="when-in-the-best-day-and-time-to-post-to-hacker-news-in-2020"><a href="#when-in-the-best-day-and-time-to-post-to-hacker-news-in-2020" aria-label="when in the best day and time to post to hacker news in 2020 permalink"></a>When in the best day and time to post to Hacker News in 2020?</h3>
<p>Combining both days and hours into a total weekly picture is even more evident when it is best to post. However, please note, the lack of data makes this chart vulnerable to skewed results.</p>

<p>The chart above illustrates wild fluctuations between the different hours of the week. The lowest chance of reaching the front page is 1-2%, and the highest is 18%-27%. That‚Äôs a massive difference.</p>
<p>Looking at the chart, below are generally the best days &amp; times to post to Hacker News:</p>
<ul>
<li><strong>Monday:</strong> 1 am‚Äî4 pm UTC (6 pm‚Äî9 am PDT)</li>
<li><strong>Tuesday, Wednesday &amp; Thursday:</strong> 12 am‚Äî6 am &amp; 9 am‚Äî12 pm UTC (5 pm‚Äî11 pm &amp; 2 am‚Äî5 am PDT)</li>
<li><strong>Friday:</strong> 5 am‚Äî12 pm UTC (10 pm‚Äî5 am PDT)</li>
<li><strong>Saturday:</strong> 4 am‚Äî9 am UTC (9 pm‚Äî2 am PDT)</li>
<li><strong>Sunday:</strong> 3 am‚Äî8 am &amp; 10 am‚Äî6 pm UTC (8 pm‚Äî1 am &amp; 3 am‚Äî11 am PDT)</li>
</ul>
<p>And here are the best times specifically (bear in mind these may not be the case week-in-week-out because the amount of data limits the results):</p>
<ul>
<li><strong>Monday:</strong> 12 pm UTC (5 am PDT)</li>
<li><strong>Tuesday:</strong> 9 am UTC (2 am PDT)</li>
<li><strong>Wednesday:</strong> 10 am UTC (3 am PDT)</li>
<li><strong>Thursday:</strong> 12 pm UTC (5 pm PDT)</li>
<li><strong>Friday:</strong> 8 am UTC (1 am PDT)</li>
<li><strong>Saturday:</strong> 9 am UTC (2 am PDT)</li>
<li><strong>Sunday:</strong> 5 am OR 1 pm (10 pm OR 6 am PDT)</li>
</ul>
<p><strong>Takeaway:</strong> It‚Äôs pretty clear that the best times to post on Hacker News to reach the front page are usually around 6 am UTC (11 pm PDT), 9 am UTC (2 am PDT), or 12 pm UTC (5 am PDT), when the US is asleep.</p>
<p>However, given that 8 hours is the average time spent on the front page, it‚Äôs probably best to post at 12 pm UTC on Monday, Thursday, Saturday or Sunday to maximize traffic for when the US wakes up.</p>
<h3 id="how-many-votes-does-a-post-need-to-reach-the-front-page-of-hacker-news-in-2020"><a href="#how-many-votes-does-a-post-need-to-reach-the-front-page-of-hacker-news-in-2020" aria-label="how many votes does a post need to reach the front page of hacker news in 2020 permalink"></a>How many votes does a post need to reach the front page of Hacker News in 2020?</h3>
<p>5.22 is the average number of votes a post needed within an average time of 27.1 minutes to reach the front page for the first time.</p>
<p>Below is a chart of box plots to illustrate the variation of votes required over 24 hours.</p>

<p>Interestingly, this graph clearly shows every post, regardless of time, required at least three upvotes, and for 75% of posts, they never needed more than eight votes to reach the front page of Hacker News.</p>
<p>Expectedly, the range of upvotes required is lower for the first half of the day than the second half, roughly matching up to the timings above.</p>
<p>In some cases, posts required a lot more votes to reach the front page. Presumably, because either the time it took to get these votes was over more time, or there was a lot of competition.</p>
<p><strong>Takeaway:</strong> The votes required to be seen on the front page is relatively small. For the best chance of getting on the front page, you‚Äôll need between 4-6 votes in about 30 minutes, posting in the first half of the day (12 am‚Äî12pm UTC).</p>
<h3 id="how-much-karma-do-you-need-to-reach-the-front-page-of-hacker-news-in-2020"><a href="#how-much-karma-do-you-need-to-reach-the-front-page-of-hacker-news-in-2020" aria-label="how much karma do you need to reach the front page of hacker news in 2020 permalink"></a>How much karma do you need to reach the front page of Hacker News in 2020?</h3>
<p>Finally, I thought it would be interesting to see the relationship between karma and reaching the front page of Hacker News.</p>
<p>This first pie chart demonstrates the proportion of posts being posted by users with varying levels of karma.</p>

<p>Surprisingly, over 50% of posts are submitted by users with over 1,000 karma points. However, the largest single segment is by users with little to no karma.</p>

<p>The chart above shows that newer users (0-50 karma) make the front page proportionally less than more experienced users. Interestingly, really experienced users (over 10,000 karma) reached the front page significantly more than experienced users.</p>
<p><strong>Takeaway:</strong> It‚Äôs hard to say whether karma has anything to do with rankings. Likely, users with more karma are just better at posting content that resonates with the Hacker News audience.</p></div></div>]]>
            </description>
            <link>https://www.ankle.io/posts/hacker-news-analysis</link>
            <guid isPermaLink="false">hacker-news-small-sites-24634991</guid>
            <pubDate>Wed, 30 Sep 2020 01:43:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Stop API Bugs by Inferring Data Formats]]>
            </title>
            <description>
<![CDATA[
Score 10 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24634262">thread link</a>) | @jeanyang
<br/>
September 29, 2020 | https://www.akitasoftware.com/blog/2020/9/29/taking-types-to-the-next-level-stop-api-bugs-by-inferring-data-formats | <a href="https://web.archive.org/web/*/https://www.akitasoftware.com/blog/2020/9/29/taking-types-to-the-next-level-stop-api-bugs-by-inferring-data-formats">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
          

          <main>
            
              <section data-content-field="main-content">
                <article id="post-5f739975679d4246c3a8f013" data-item-id="5f739975679d4246c3a8f013">

    
      
    

    <div data-layout-label="Post Body" data-type="item" data-updated-on="1601411504262" id="item-5f739975679d4246c3a8f013"><div><div><div data-block-type="2" id="block-ec1b34ef166efd6e8b4c"><div><p>If you work on web apps, you‚Äôve probably been bitten by a sneaky bug. You know, the kind that takes a long time to debug, but is not glamorous to explain. The whitespace errors; the data format errors. The kind of bug that might torment you for a whole weekend, that you emerge with no victorious war story to tell. This is the kind of bug that types have largely solved in languages like TypeScript and MyPy‚Ä¶ but that still lurk at the boundaries of APIs.</p><p>In our <a href="https://www.akitasoftware.com/blog/2020/9/22/faster-better-earlier-catch-breaking-changes-by-diffing-api-behavior?utm_campaign=2020_pre_launch&amp;utm_medium=blog&amp;utm_source=2020_09_29_product_update">last blog post</a>, we talked about how to catch cross-service bugs by watching API traffic. In this blog post, we show specifically how checking data formats across APIs can catch some nasty bugs.</p><h2>üòà An Error that Evades Any Type Checker</h2><p>You finish implementing a new feature. Your unit tests pass and you get that rush of excitement. The integration tests go green; you think today is a good day. Your co-worker and #bff Aki give your changes a +1 and your pull request gets merged. For one moment, everything seems right with the world.</p><p>And then, hours later, DISASTER! You‚Äôre playing online games with Aki‚Äîand doing better than you ever have before‚Äîwhen you get a page. Customer support creates an incident that has to do with&nbsp; your new code. Customers are irate that they can‚Äôt log into your website.&nbsp;</p><p>You rush home and, after spending the rest of your night combing through logs and writing more tests, you figure it out. It turns out that you accidentally used phone.ToString() instead of phone.ToInternationalString(), causing you to send a domestic phone number instead of an international phone number as a string to a third-party API. The integration tests didn‚Äôt cover this because they mocked out this third-party API. But now you‚Äôve lost your rare chance to beat Aki at Fall Guys‚Äîand you‚Äôve also tripped up some of your customers.</p></div></div><div data-block-type="5" id="block-yui_3_17_2_1_1601411332549_54474"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5b6f6c558ab722caa37858bf/1601411677399-5IDG23VYLQXROLTDUU55/ke17ZwdGBToddI8pDm48kPpDoBIqNy1gGho9uyT02YZZw-zPPgdn4jUwVcJE1ZvWEtT5uBSRWt4vQZAgTJucoTqqXjS3CfNDSuuf31e0tVFMU71HPrJlrka-k3KdzI_LQkclrYoo_JyQT2V0r-tdNKQvevUbj177dmcMs1F0H-0/taylor_sad.gif" data-image="https://images.squarespace-cdn.com/content/v1/5b6f6c558ab722caa37858bf/1601411677399-5IDG23VYLQXROLTDUU55/ke17ZwdGBToddI8pDm48kPpDoBIqNy1gGho9uyT02YZZw-zPPgdn4jUwVcJE1ZvWEtT5uBSRWt4vQZAgTJucoTqqXjS3CfNDSuuf31e0tVFMU71HPrJlrka-k3KdzI_LQkclrYoo_JyQT2V0r-tdNKQvevUbj177dmcMs1F0H-0/taylor_sad.gif" data-image-dimensions="474x264" data-image-focal-point="0.5,0.5" alt="taylor_sad.gif" data-load="false" data-image-id="5f739a4eee510b07270a2163" data-type="image">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-yui_3_17_2_1_1601411332549_54774"><div><div><p>After the incident, you do a postmortem and you become worried. Aki pointed out that even if you adopt language-level type-checking (like TypeScript or MyPy) to catch simple errors, application-level type checking can‚Äôt prevent these kinds of errors because it doesn‚Äôt check across APIs.&nbsp; And once the type-checked values hit the wire they all get flattened to the same thing, so you would need some sort of magical tool to check across APIs. But what if such a tool existed!</p></div><h2>‚úÖ Find Bugs by Inferring Data Formats</h2><p>Worry no more! We‚Äôve designed Akita to solve exactly this problem of spotting mismatched data formats across the API. With Akita, you can use our data format detection to easily detect issues like this phone number change, without requiring code changes or proxies, simply by allowing Akita to watch your API.&nbsp;</p></div></div><div data-block-type="5" id="block-yui_3_17_2_1_1601411332549_59847"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5b6f6c558ab722caa37858bf/1601411952800-JK2S67YP5CF31NPWCLI6/ke17ZwdGBToddI8pDm48kMyRRiflT06lnOxwOXunTyhZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZamWLI2zvYWH8K3-s_4yszcp2ryTI0HqTOaaUohrI8PIA6t7DZobKPBVSOztKpfySwZxaCI6SYU1XSvACXqsgGM/Screenshot+from+2020-09-28+22-15-02+cropped.png" data-image="https://images.squarespace-cdn.com/content/v1/5b6f6c558ab722caa37858bf/1601411952800-JK2S67YP5CF31NPWCLI6/ke17ZwdGBToddI8pDm48kMyRRiflT06lnOxwOXunTyhZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZamWLI2zvYWH8K3-s_4yszcp2ryTI0HqTOaaUohrI8PIA6t7DZobKPBVSOztKpfySwZxaCI6SYU1XSvACXqsgGM/Screenshot+from+2020-09-28+22-15-02+cropped.png" data-image-dimensions="913x327" data-image-focal-point="0.5,0.5" alt="Screenshot from 2020-09-28 22-15-02 cropped.png" data-load="false" data-image-id="5f739b7077323e2df7bfc2db" data-type="image" src="https://images.squarespace-cdn.com/content/v1/5b6f6c558ab722caa37858bf/1601411952800-JK2S67YP5CF31NPWCLI6/ke17ZwdGBToddI8pDm48kMyRRiflT06lnOxwOXunTyhZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZamWLI2zvYWH8K3-s_4yszcp2ryTI0HqTOaaUohrI8PIA6t7DZobKPBVSOztKpfySwZxaCI6SYU1XSvACXqsgGM/Screenshot+from+2020-09-28+22-15-02+cropped.png">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-yui_3_17_2_1_1601411332549_60146"><p>Because Akita doesn‚Äôt require code changes or proxying, our client is flexible enough to run in either production or test, allowing you to compare cross-API data formats in production with cross-API data formats in test. In this case, Akita would alert you that the data format it observed differed from what it‚Äôs been observing, alerting you to the fact that something doesn‚Äôt check out, allowing this change to never ever hit production in the first place.</p></div><div data-block-type="5" id="block-yui_3_17_2_1_1601411332549_64928"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5b6f6c558ab722caa37858bf/1601412109060-KGP84JD9ODP52RRUX779/ke17ZwdGBToddI8pDm48kJpyheux0nskDQnuBO6NswxZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZUJFbgE-7XRK3dMEBRBhUpzOPLDh9C41HHctUU2yVgyeUpUWeQq1WB4LsiaPpGbT1yQsc-5Y5TXjYGqI9wQD6R0/taylor_never_ever.gif" data-image="https://images.squarespace-cdn.com/content/v1/5b6f6c558ab722caa37858bf/1601412109060-KGP84JD9ODP52RRUX779/ke17ZwdGBToddI8pDm48kJpyheux0nskDQnuBO6NswxZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZUJFbgE-7XRK3dMEBRBhUpzOPLDh9C41HHctUU2yVgyeUpUWeQq1WB4LsiaPpGbT1yQsc-5Y5TXjYGqI9wQD6R0/taylor_never_ever.gif" data-image-dimensions="500x256" data-image-focal-point="0.5,0.5" alt="taylor_never_ever.gif" data-load="false" data-image-id="5f739c09679d4246c3a99af4" data-type="image">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-yui_3_17_2_1_1601411332549_65227"><div><p><br>Akita is able to identify:</p><ul data-rte-list="default"><li><p><strong>Simple Types:</strong> Strings, Integers, Booleans, Floats</p></li><li><p><strong>Countries</strong> - 2 and 3 Letter Country Codes, Names and TLDs</p></li><li><p><strong>Currencies</strong> - Names and Abbreviations</p></li><li><p><strong>Dates and Times</strong> - ISO 8601, RFC 822, RFC 3339, RFC 850, Unix Timestamps and many more</p></li><li><p><strong>Email Address </strong>- RFC 5322 Address and Names</p></li><li><p><strong>Languages</strong> - Language names and ISO 639 2 and 3 Letter abbreviations</p></li><li><p><strong>Phone Numbers -</strong> International and US formatting</p></li><li><p><strong>URLs</strong> - HTTP and HTTPs URLs</p></li></ul><p>Akita works for traffic both to other internal services and for third-party SaaS APIs you might call, like Stripe or Twilio. We‚Äôll talk more in an upcoming blog post about Akita‚Äôs specific mechanism for watching outbound API traffic.</p><h2>‚ö°Ô∏è Powered By API-Level Data Format Inference</h2><p>Under the hood, Akita is automatically inferring data formats from the API traffic that it sees. When Akita sees a request hit your service, it infers the data format for each argument as part of the automated API spec generation we described in the <a href="https://www.akitasoftware.com/blog/2020/9/22/faster-better-earlier-catch-breaking-changes-by-diffing-api-behavior?utm_campaign=2020_pre_launch&amp;utm_medium=blog&amp;utm_source=2020_09_29_product_update">last post.</a></p></div></div><div data-block-type="5" id="block-yui_3_17_2_1_1601411332549_99871"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5b6f6c558ab722caa37858bf/1601412377516-AVPK5MR1GWHX5VZQDXKS/ke17ZwdGBToddI8pDm48kKabkCx_A6_n5l8sjGWuzexZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZamWLI2zvYWH8K3-s_4yszcp2ryTI0HqTOaaUohrI8PIN_WYAvM0X0a_DzWYffUj58M1ML9geH0aEkZDHcuKpmg/Screen+Shot+2020-09-28+at+10.19.01+PM.png" data-image="https://images.squarespace-cdn.com/content/v1/5b6f6c558ab722caa37858bf/1601412377516-AVPK5MR1GWHX5VZQDXKS/ke17ZwdGBToddI8pDm48kKabkCx_A6_n5l8sjGWuzexZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZamWLI2zvYWH8K3-s_4yszcp2ryTI0HqTOaaUohrI8PIN_WYAvM0X0a_DzWYffUj58M1ML9geH0aEkZDHcuKpmg/Screen+Shot+2020-09-28+at+10.19.01+PM.png" data-image-dimensions="915x476" data-image-focal-point="0.5,0.5" alt="Screen Shot 2020-09-28 at 10.19.01 PM.png" data-load="false" data-image-id="5f739d19fd31ed0454ae3504" data-type="image" src="https://images.squarespace-cdn.com/content/v1/5b6f6c558ab722caa37858bf/1601412377516-AVPK5MR1GWHX5VZQDXKS/ke17ZwdGBToddI8pDm48kKabkCx_A6_n5l8sjGWuzexZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZamWLI2zvYWH8K3-s_4yszcp2ryTI0HqTOaaUohrI8PIN_WYAvM0X0a_DzWYffUj58M1ML9geH0aEkZDHcuKpmg/Screen+Shot+2020-09-28+at+10.19.01+PM.png">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-yui_3_17_2_1_1601411332549_105841"><div><p>It turns out inferring data formats is not as simple as just watching each argument. There might be multiple data formats that a field is eligible for. For instance, `18001112222` could be either a phone number or a time stamp, but a second call to the same endpoint with `1-800-333-4444` makes it clear that parameter is a phone number. A field that accepts strings may accept the occasional email. To infer the most accurate type, Akita compares data from <em>all </em>requests to the same endpoint and identifies the data formats common across all calls.&nbsp; We also use a bit of secret sauce to compare data formats across <em>data flows</em> we detect across your API, but that's the topic of another post.</p><p>Of course, there's always the chance that your API successfully accepts, say, phone numbers and timestamps (or email addresses, country codes, and so on) in the same parameter.&nbsp; In that case, we'll let you know all the data formats that fit the data.</p><p>There are a couple of cool things about how we‚Äôre inferring data formats. First, we‚Äôre using type inference to infer types at the API level, rather than analyzing source code. Second, we‚Äôre inferring specific data formats, with the ability to tell the difference between different phone number formats, on top of simple types like string or int. A bonus is that since Akita automatically infers the entire API spec under the hood, our type inference can use the structure of that spec. More on this in a later post!</p></div></div><div data-block-type="5" id="block-yui_3_17_2_1_1601411332549_107297"><div>








  

    
  
    <div data-test="image-block-inline-outer-wrapper">

      

      
        <figure>
          
        
        

        
          
            
          <p><img data-src="https://images.squarespace-cdn.com/content/v1/5b6f6c558ab722caa37858bf/1601412447877-RPBWJLV50EOV6NNQMLXQ/ke17ZwdGBToddI8pDm48kIisVeufsLaqPYS75OuX1FxZw-zPPgdn4jUwVcJE1ZvWEtT5uBSRWt4vQZAgTJucoTqqXjS3CfNDSuuf31e0tVGUIyZMpo6jDvOlV8ELZznZDi-rr9EJ6o3n8IpvEJDIMaEcAfnVBrEqrgp1UxUHGkY/taylor_never_find_another.gif" data-image="https://images.squarespace-cdn.com/content/v1/5b6f6c558ab722caa37858bf/1601412447877-RPBWJLV50EOV6NNQMLXQ/ke17ZwdGBToddI8pDm48kIisVeufsLaqPYS75OuX1FxZw-zPPgdn4jUwVcJE1ZvWEtT5uBSRWt4vQZAgTJucoTqqXjS3CfNDSuuf31e0tVGUIyZMpo6jDvOlV8ELZznZDi-rr9EJ6o3n8IpvEJDIMaEcAfnVBrEqrgp1UxUHGkY/taylor_never_find_another.gif" data-image-dimensions="480x270" data-image-focal-point="0.5,0.5" alt="taylor_never_find_another.gif" data-load="false" data-image-id="5f739d4d556a54782e7388f8" data-type="image">
          </p>
        
          
        

        
      
        </figure>
      

    </div>
  


  


</div></div><div data-block-type="2" id="block-yui_3_17_2_1_1601411332549_107596"><div><h2>üëÄ What‚Äôs next?</h2><p>We‚Äôve recently released type inference and would love to have you try it out. We believe we have a one-of-a-kind tool and would love your help in making it as useful as possible in helping developers build great software.</p><ul data-rte-list="default"><li><p><a href="https://www.akitasoftware.com/get-invite?utm_campaign=2020_pre_launch&amp;utm_medium=blog&amp;utm_source=2020_09_29_product_update">Sign up for our private beta</a> if you‚Äôre interested in trying things out!</p></li><li><p>We‚Äôre constantly trying to make our tool better! If change analysis is an issue for you, please <a href="https://akitasoftware.typeform.com/to/iAbs1tB5?utm_campaign=2020_pre_launch&amp;utm_medium=blog&amp;utm_source=2020_09_29_product_update">fill out this survey</a>‚Äîand the opportunity to win a $50 Amazon gift card.</p></li><li><p>Have data formats you‚Äôd like us to support? <a href="https://akitasoftware.typeform.com/to/lNd7IT7g?utm_campaign=2020_pre_launch&amp;utm_medium=blog&amp;utm_source=2020_09_29_data_type_survey">Fill out this survey</a> to tell us what you care about.</p></li><li><p>Please spread the word! We‚Äôd love all the feedback we can get.</p></li></ul></div></div></div></div></div>

    

    

    <section id="comments-5f739975679d4246c3a8f013">
      
  


    </section>

  </article>





  <nav>

    

    
      <a href="https://www.akitasoftware.com/blog/2020/9/22/faster-better-earlier-catch-breaking-changes-by-diffing-api-behavior">
        <div>
          <p>Next</p>
          <h4>Earlier, Faster, Better, Stronger: Catch Breaking Changes by Diffing API Behavior</h4>
          <div>
            <!--

            Categories

            --><p><span>Approach, Releases</span></p><!--

            Author

            --><p><span>Jean Yang</span></p><!--

            Date

            --><p><time datetime="2020-09-22">September 22, 2020</time></p><!--

            Tags

            --><p><span>semantic diffs, API spec generation</span>
          </p></div>
        </div><!--
        --><svg viewBox="0 0 23 48">
          <g>
            <polyline fill="none" stroke-miterlimit="10" points="1.5,45.7 20.4,23.5 1.5,1.3 "></polyline>
          </g>
        </svg>
      </a>
    

  </nav>
              </section>
            
          </main>

        </div></div>]]>
            </description>
            <link>https://www.akitasoftware.com/blog/2020/9/29/taking-types-to-the-next-level-stop-api-bugs-by-inferring-data-formats</link>
            <guid isPermaLink="false">hacker-news-small-sites-24634262</guid>
            <pubDate>Tue, 29 Sep 2020 23:28:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How India Censors the Web]]>
            </title>
            <description>
<![CDATA[
Score 150 | Comments 43 (<a href="https://news.ycombinator.com/item?id=24633490">thread link</a>) | @srean
<br/>
September 29, 2020 | http://iamkush.me/how-india-censors-the-web/ | <a href="https://web.archive.org/web/*/http://iamkush.me/how-india-censors-the-web/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
				<p><b>Update (11th April 2020): This paper has been accepted at <a href="https://websci20.webscience.org/">ACM Web Science 2020</a>. A preprint can be accessed on <a href="https://arxiv.org/pdf/1912.08590.pdf" target="_blank">arXiv</a>.</b></p>

<p>Nation states around the world engage in web censorship using a variety of legal and technical methods. India is no different in this regard: the Government of India can legally order internet service providers (ISPs) operating in its jurisdiction to block access to certain websites for its users. This makes the situation different from jurisdictions like Iran and China, where internet censorship is largely centralised. Legal provisions in India, namely Section 69A and Section 79 of the Information Technology (IT) Act, allow the Central Government and the various courts in the country to issue website-blocking orders that ISPs are legally bound to comply with. <strong>Most of these orders are not publically available</strong>.</p>

<p>Recent events and the opaque nature of internet censorship in India motivated us at <a href="https://cis-india.org/" target="_blank">The Center for Internet and Society</a> to study India's censorship mechanism in detail. We spent the last year trying to answer two questions pertaining to how internet users in India experience web censorship:</p>

<ol>  
<li>What are the technical methods of censorship used by ISPs in India?</li>  
<li>Are all ISPs blocking the same websites?</li>  
</ol>

<p><strong>Our work has been so far the largest study of web censorship in India</strong>, both in terms of the number of censorship mechanisms that we test for and the number of potentially-blocked websites (PBWs). </p>

<h3 id="datacuration">Data curation</h3>

<p>We compiled a list of PBWs from three sources:  </p>

<ul>  
<li><b>Government orders</b>: A website/URL blocking order may come from the Government of India (Section 69A, IT Act). These orders are usually not in the public domain, as a confidentiality clause prevents any party from disclosing its contents. We collect published and leaked Government orders.</li>  
<li><b>Court orders</b>: The various courts in India also have the power to issue website blocking orders (Section 79, IT Act). Not all such orders are available in the public domain. However, the Government and BSNL (a public company operating as an ISP) have provided portions of this list when under pressure to respond to Right to Information (RTI) requests.</li>  
<li><b>User reports</b>: <a href="https://internetfreedom.in/" target="_blank">The Internet Freedom Foundation</a> collects and publishes reports from internet users who notice blocked websites.</li>  
</ul>

<p>Collecting data from these sources led to a total of 9673 unique URLs, which yielded 5798 unique websites. To limit ourselves to active websites, we exclude all websites for which we could not resolve via Tor circuits, culminating in a corpus of 4379 PBWs.</p>

<h3 id="networktestsfordetectingcensorship">Network tests for detecting censorship</h3>

<p>We designed four network tests that probe the existence of censorship at the DNS, TCP, HTTP, and TLS level. For the sake of brevity, I'll skip elaborating on the tests in this post; the details can be found in our <a href="https://arxiv.org/pdf/1912.08590.pdf" target="_blank">preprint</a>.</p>

<p>We run these tests for each website in our corpus from connections of six different ISPs (Jio, Airtel, Vodafone, MTNL, BSNL, and ACT), <strong>which together serve more than 98% of Internet users in India</strong>. Our findings not only confirm that ISPs are using different techniques to block websites, but also demonstrate that different ISPs are not blocking the same websites.</p>

<h3 id="results">Results</h3>

<p>In terms of censorship methods, our results confirm that ISPs in India are at liberty to use any technical filtering mechanism they wish: there was, in fact, no single mechanism common across ISPs. </p>

<p>We observe ISPs to be using a melange of techniques for blocking access, such as DNS poisoning and HTTP host header inspection. <b>Our tests also discern the use of SNI inspection being employed by the largest ISP in India (Jio) to block HTTPS communication, the use of which is previously undocumented in the Indian context</b>.</p>

<p><img src="https://i.imgur.com/vDAgGnf.png" alt="img">
</p><center>Censorship techniques employed by Indian ISPs</center>

<p>Further, we notice that all ISPs using multiple censorship mechanisms are not blocking the same websites with each mechanism. For instance, ACT uses only DNS censorship for blocking 233 websites, only HTTP censorship for 1873 websites, and both to block 1615 websites. Such irregularities are illustrated below.</p>

<p><img src="https://i.imgur.com/azWaVJW.png" alt="img">
</p><center>Censorship techniques used by (i) ACT, (ii) Airtel, and (iii) Jio for blocking websites. We notice the same ISP using multiple techniques for blocking different websites.</center>

<h3 id="somealarmingdiscoveries">Some alarming discoveries</h3>

<p>Our study has recorded large inconsistencies in website blocklists of different Indian ISPs. From our list of 4379 PBWs, we find that 4033 are being blocked by at least one ISP‚Äôs blocklist. In terms of absolute numbers, we notice that ACT blocks the maximum number of websites (3721). Compared to ACT, Airtel blocks roughly half the number of websites (1892).</p>

<p>Perhaps most surprisingly, we find that only 1115 websites out of the 4033 (just 27.64%) are blocked by all six ISPs. <b>Simply stated, we find conclusive proof that Internet users in India can have wildly different experiences of web censorship.</b></p>

<p><img src="https://i.imgur.com/XXaRpuf.png" alt="img"></p>

<p>Analysing inconsistencies in blocklists also makes it clear that ISPs in India are:</p>

<ol>  
<li>Not properly complying with website blocking (or subsequent unblocking orders), and/or </li>  
<li>Arbitrarily blocking websites without the backing of a legal order.</li>  
</ol>

<p>This has important legal ramifications: <b>India‚Äôs <a href="https://bit.ly/netneutralityframework" target="_blank">Net Neutrality regulations</a>, codified in the license agreements that ISPs enter with the Government of India, explicitly prohibit such behaviour</b>.</p>

<p>Our study also points to how the choice of technical methods used by ISPs to censor websites can decrease transparency about state-ordered censorship in India. While some ISPs were serving censorship notices, other ISPs made no such effort. For instance, Airtel responded to DNS queries for websites it wishes to block with <strong>NXDOMAIN</strong>. Jio used <strong>SNI-inspection</strong> to block websites, a choice which makes it <strong>technically impossible for them to serve censorship notices</strong>. Thus, the selection of certain technical methods by ISPs exacerbates the concerns created by the opaque legal process that allows the Government to censor websites.</p>

<h3 id="summingup">Summing up</h3>

<p>Web censorship is a curtailment of the right to freedom of expression guaranteed to all Indians. There is an urgent need to reevaluate the legal and technical mechanisms of web censorship in India to make sure the curtailment is transparent, and the actors accountable. </p>

<p>The whimsical attitude towards web censorship from both ISPs and the Government necessitates the development of a crowdsourced tool to <strong>monitor and measure such censorship from different vantage points in the country</strong>. This will shed further light into the geographical variation of censorship practices by ISPs across India, which is still unclear.</p>

<p>To probe this further we have ported our network tests into an android application, and are looking for volunteers who are willing to run it on their mobile networks. The entire process will be <strong>completely anonymous</strong>; we will not be collecting any user-specific information. If you live in India, please consider running <a href="https://play.google.com/store/apps/details?id=com.censorwatch.netprobesapp">Censorwatch</a>.</p>

<p><strong>Acks</strong> - This study was done in collaboration with <a href="https://gurshabad.github.io/" target="_blank">Gurshabad Grover</a> and <a href="https://www.linkedin.com/in/bansalvarun96/" target="_blank">Varun Bansal</a> at <a href="https://cis-india.org/" target="_blank">The Center for Internet and Society</a>, graciously supported by the <a href="https://www.macfound.org/" target="_blank">MacArthur Foundation</a>.</p>
			</section></div>]]>
            </description>
            <link>http://iamkush.me/how-india-censors-the-web/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24633490</guid>
            <pubDate>Tue, 29 Sep 2020 21:55:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A request to a YouTube video downloads the title 14 times and displays it twice]]>
            </title>
            <description>
<![CDATA[
Score 75 | Comments 57 (<a href="https://news.ycombinator.com/item?id=24631698">thread link</a>) | @anderspitman
<br/>
September 29, 2020 | https://apitman.com/25/#a-request-to-a-youtube-video-downloads-the-title-14-times-and-displays-it-twice | <a href="https://web.archive.org/web/*/https://apitman.com/25/#a-request-to-a-youtube-video-downloads-the-title-14-times-and-displays-it-twice">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            
            <div>
              <p>I have a project idea that could involve doing some scraping of YouTube videos, so I started poking
around the HTML output of curling YT links. These things are a site (sp) to behold. If you curl the following
well-known URL and store it in a file:</p>
<p><code>https://www.youtube.com/watch?v=dQw4w9WgXcQ</code></p>
<p>Just searching for the title yields 14 results, spread throughout random HTML and JS. But it's only actually
displayed to the user once on the page, and probably again in the browser tab. It's not just the title
either, there's a ton of duplicated data and bloat throughout the file. I'm guessing it compresses well. I
checked a few other files and they all had between 10 and 18 copies of the title.</p>
<p>I'm not sure what conclusions to draw from this. A lot of them are obviously intended to be
machine-readable for things like <a href="https://ogp.me/">ogp</a>, but do you really need 14 identical copies?</p>
<p>EDIT:</p>
<p>Since this errant observation somehow made it to the <a href="https://news.ycombinator.com/item?id=24631698">Hacker News front page</a>, and eventually got flagged, I have a few more thoughts:</p>
<ul>
<li><p>Sorry the title ended up more clickbatey than intended. It's not making 14 extra HTTP requests just for the title. It originally started with "An HTTP request" but it was a few characters too long for HN, and I didn't spend much time rethinking it.</p>
</li>
<li><p>I agree the extra text isn't a problem (like I said, that'll compress well). I'm more concerned about the underlying complexity it signals. There is more obvious evidence of this complexity (it makes 70 network requests when you load the page even if you pause the video immediately), this is just a novel one for me.</p>
</li>
<li><p>I appreciate the copies which are intended to interoperate with other systems like Twitter and OGP.</p>
</li>
<li><p>I actually appreciate the fact that a JSON blob of all the video metadata is embedded in the HTML. It'll make my scraping task much simpler.</p>
</li>
</ul>

            </div>
          </div></div>]]>
            </description>
            <link>https://apitman.com/25/#a-request-to-a-youtube-video-downloads-the-title-14-times-and-displays-it-twice</link>
            <guid isPermaLink="false">hacker-news-small-sites-24631698</guid>
            <pubDate>Tue, 29 Sep 2020 19:08:52 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[We built an app to fix our own meeting fatigue]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24631659">thread link</a>) | @tylertreat
<br/>
September 29, 2020 | https://witful.com/our-story/ | <a href="https://web.archive.org/web/*/https://witful.com/our-story/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section data-id="4a8b33e4" data-element_type="section">
						<div>
							<div>
					<div data-id="4f865481" data-element_type="column">
			<div>
							<div>
						<div data-id="5c040c31" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<div>
<h2><strong>How we built an app to fix our own meeting fatigue</strong><img loading="lazy" src="https://witful.com/wp-content/uploads/2020/09/Witful-Evolution-1024x374.png" alt="" width="580" height="212" srcset="https://witful.com/wp-content/uploads/2020/09/Witful-Evolution-1024x374.png 1024w, https://witful.com/wp-content/uploads/2020/09/Witful-Evolution-300x109.png 300w, https://witful.com/wp-content/uploads/2020/09/Witful-Evolution-768x280.png 768w, https://witful.com/wp-content/uploads/2020/09/Witful-Evolution-1536x561.png 1536w, https://witful.com/wp-content/uploads/2020/09/Witful-Evolution-1200x438.png 1200w, https://witful.com/wp-content/uploads/2020/09/Witful-Evolution.png 1918w" sizes="(max-width: 580px) 100vw, 580px"></h2>


<p>We‚Äôre not building a generic notes app. We‚Äôre also not building an app for everyone. We are building a product that reduces the cognitive load for people with lots of meetings. Something that enables people with lots of context switching to ensure they don‚Äôt miss follow-ups. Something that makes relevant information immediately accessible. We care about being on point in our meetings. This means clearing away all the clutter and noise to help us be prepared and focused.</p>


<p>The idea for Witful started when I was managing a large team of people. I believe one-on-one meetings are a crucial part of being an effective manager, and I take lots of notes in my one-on-ones. I like to track what is happening with my coworkers and reports because it allows me to better support them. As I was managing larger and larger teams across diverse products and projects, I noticed how difficult it was to keep this all organized and feel in touch with my teams.</p>


<p>When we started <a href="https://realkinetic.com/">Real Kinetic</a>, I focused on&nbsp;the administrative tasks of starting and running a consulting business in addition to being responsible for our business development and sales. I quickly realized that the same need existed in these roles. I was in several meetings with various attorneys and accountants each week. I was on calls with multiple clients and sales prospects daily. I was on calls with our team internally. <em>I was constantly switching contexts, jumping from one meeting to the next.</em></p>


<p>Then, in an effort to develop leads and grow our client base, I started developing relationships with investors and other networkers. This added a new level of complexity to my note organization because I wanted to associate notes from these calls with that person, but also with other clients. I tried every note-taking solution on the market and none met my needs.</p>


<p>After a lot of fruitless searching for the right solution, I began sketching mockups on my whiteboard. These sketches quickly evolved into code, resulting in a simple prototype that let me play with the idea. It was immediately obvious that it was something worth pursuing.</p>


<p>In early 2019, we decided to have Alex dedicate time to build out the prototype. He translated the rough prototype into a usable product by the end of August 2019. Mike, Tyler, Nick, and myself started using Witful in our day-to-day consulting work. The value of our idea was clear, and we started getting excited. I showed Witful to my wife who was responsible for project management and managing client relationships at a software development consulting group. In her role managing a large number of client and internal relationships, the value of the product was even more apparent. After a couple weeks of using it, she came home and told me, ‚ÄúI no longer stress missing follow-ups because they‚Äôre just there.‚Äù</p>


<p>We decided to invest in developing the product and hired Coury to accelerate development. Through the fall, Coury and I worked to build and deploy features that helped us, as actual users, do our <em>real jobs</em> more efficiently.&nbsp;</p>


<p>We have continued to both add and remove features as we iterate on the product. We are constantly finding that some features seem like clear and certain must-haves, but after they have been implemented everyone uses it for a day and then never again. We realized smart organization, intelligent layout, intuitive user experience, and search are far more important than one-off home run features.</p>


<p>What has been most exciting for me is seeing how seemingly minor additions, revisions, and touches have been the most impactful to the experience.</p>


<p>We‚Äôre real users of our product and we‚Äôre excited to share it with you. We are hopeful that Witful can improve your work and restore sanity to your day as it has for us. Our vision for Witful is to build the product that lets you be brilliant at what you do.</p>
<p><img loading="lazy" src="https://witful.com/wp-content/uploads/2020/09/2020-09-24-171018_570x266_scrot-300x140.png" alt="" width="176" height="82" srcset="https://witful.com/wp-content/uploads/2020/09/2020-09-24-171018_570x266_scrot-300x140.png 300w, https://witful.com/wp-content/uploads/2020/09/2020-09-24-171018_570x266_scrot.png 570w" sizes="(max-width: 176px) 100vw, 176px"></p>


<p>‚Äì Robert&nbsp;&nbsp;</p>
</div>
				</div>
				</div>
						</div>
					</div>
		</div>
								</div>
					</div>
		</section></div>]]>
            </description>
            <link>https://witful.com/our-story/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24631659</guid>
            <pubDate>Tue, 29 Sep 2020 19:04:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Rust 2021: GUI]]>
            </title>
            <description>
<![CDATA[
Score 342 | Comments 205 (<a href="https://news.ycombinator.com/item?id=24631611">thread link</a>) | @clarkmoody
<br/>
September 29, 2020 | https://raphlinus.github.io/rust/druid/2020/09/28/rust-2021.html | <a href="https://web.archive.org/web/*/https://raphlinus.github.io/rust/druid/2020/09/28/rust-2021.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>This is a response to the Rust <a href="https://blog.rust-lang.org/2020/09/03/Planning-2021-Roadmap.html">call for blogs 2021</a> and also a followup to <a href="https://raphlinus.github.io/rust/druid/2019/10/31/rust-2020.html">last year‚Äôs entry</a>. It will be entirely focused on GUI.</p>

<p>There is considerable interest in GUI toolkits for Rust. As one data point, it was the 6th highest rated challenge for adoption in the <a href="https://blog.rust-lang.org/2020/04/17/Rust-survey-2019.html#rust-adoption---a-closer-look">2019 Rust survey</a>, just behind async I/O. There is also a fair amount of activity towards this goal, though as a community it still feels a bit unfocused. A characteristic sign is that a new GUI toolkit seems to pop up every couple of months or so.</p>

<p>I believe there is great potential for a high-quality GUI toolkit in Rust. At the same time, it‚Äôs an incredibly ambitious task. Subtasks within it, for example accelerated GPU drawing and text layout, are in and of themselves incredibly ambitious tasks. I wouldn‚Äôt consider a toolkit ‚Äúready‚Äù for production use until it supported accessibility, and as far as I know there is nothing in the Rust space even starting to work on this.</p>

<p>Yet, perhaps against my better judgment, I find myself devoting most of my time and energy towards building GUI in Rust. In this post I will set out my hopes but also frankly discuss the challenges.</p>

<h2 id="why-gui-in-rust">Why GUI in Rust?</h2>

<p>Simply put, I believe that the strengths of Rust translate well to writing GUI applications, and that the missing piece is the existence of a good toolkit. One strength is Rust‚Äôs wide ‚Äúdynamic range‚Äù ‚Äì the ability to describe application logic in high level terms while still being attentive to low level details. Another is <em>strong</em> cross-platform compatibility. The increasingly rich crate ecosystem is compelling in many domains. And don‚Äôt lose sight of the importance of safety. In traditional object-oriented GUI in C++ especially, object lifetimes can be complicated, and it‚Äôs not hard to cause crashes, especially on takeoffs and landings.</p>

<p>I do pay attention to the competitive space, and one thing I see is Electron being used more and more, because it solves real problems. But I also believe that the success of Electron creates a real opportunity for a higher performance, lighter weight alternative. And in general for the projects I see in other languages, I find myself <em>wanting</em> to compete against them.</p>

<h2 id="about-druid">About Druid</h2>

<p>The <a href="https://github.com/linebender/druid">Druid</a> toolkit has made impressive progress in the last year, but is still nowhere near stable or complete. If you are looking for a GUI toolkit to develop your application today, Druid is not it.</p>

<p>We are developing the font editor <a href="https://github.com/linebender/runebender">Runebender</a> as the primary motivating application, but, while a lot of pieces are in place, it is sadly not yet usable for day to day font creation work. One of my goals for the rest of the year is to start creating a font in it.</p>

<p>That said, I am very proud of the work that‚Äôs been done in the last year. To hit on some of the highlights, we‚Äôre just landing basic but capable <a href="https://www.cmyr.net/blog/piet-text-work.html">rich text layout</a>. The keyboard event is close to browser quality (based on <a href="https://crates.io/crates/keyboard-types">keyboard-types</a>). There is incremental painting based on damage regions. Multi-window support is solid, with support for controlling window placement and dynamic hi-dpi. There is tab-focusing between text boxes. All of these are hard problems. Even more so, I am pleased that a lot of the work came from people in the community.</p>

<h2 id="converging-a-vision">Converging a vision</h2>

<p>Imagine a thought experiment for a bit. Obviously Rust is promising for implementing async, but there isn‚Äôt a consensus on the best way to do it. Some people feel it should be done with callbacks, and invest considerable effort into overcoming the serious problems with that approach. Others feel it should be done with a polling future trait, but there are multiple versions of that trait: some get the context from thread local storage, others pass it into the poll method. And of course some people feel the syntax should be <code>future.await</code> while others insist on <code>await!(future)</code>. Every couple of months somebody pops up on /r/rust with a new crate that promises to solve ‚Äúthe async problem,‚Äù complete with a nice-looking echo server demo.</p>

<p>That‚Äôs about where we are today with GUI toolkits. In many ways, I think converging on a single vision in GUI is a harder problem than for async. For one, people have different things they want to do. I‚Äôm personally most interested in things that resemble document editors. Others want 3D or video content. In the future, there might be commercial interest in enterprise line-of-business apps or interfaces for medical devices. These all have quite different requirements in the best ways to express UI logic, and how to build them. Not to mention the endless opportunities to bikeshed.</p>

<p>I am not (yet) proposing Druid as the singular vision that the Rust community should converge on. I‚Äôm enjoying reading codebases and learning from other Rust GUI projects. In particular, I‚Äôm finding lots to like about <a href="https://github.com/hecrj/iced">Iced</a>: it has good solutions to async, 3D graphics (through wgpu), being able to function in a guest window (important for VST plug-ins), among other problems. And I‚Äôm getting the sense that it‚Äôs easier for developers. The Elm-like reactive architecture maps nicely to Rust, and depending on exactly what you‚Äôre trying to do, it‚Äôs not hard to figure out how to express your app-specific logic. By contrast, Druid‚Äôs reactive model, while efficient and powerful in many ways, has complex concepts such as Haskell-like lenses, and places a burden on the developer to carefully design the ‚Äúapp data‚Äù to fit the Druid model. The <a href="https://raphlinus.github.io/rust/druid/2020/09/25/principled-reactive-ui.html">Crochet research prototype</a> is an active exploration into making that simpler. I am thankful to Iced (and other toolkits) for being a model to study.</p>

<p>The work to build consensus is complex and multifaceted, and it cannot be rushed. From my side, I hope to improve the designs and implementations to the point where they are compelling. I also hope to listen to criticisms, many of which are valid. I also think there is more work the community can be doing here. I‚Äôd love to see more active effort in trying to learn from the ongoing work and try to synthesize it. The GUI-related threads on /r/rust are sadly not a place where that happens; they most often consist of a statement of requirements (usually presented very informally), followed by a bit of bikeshedding. I don‚Äôt have a good answer for how to improve this situation, but put it out there as a problem I‚Äôm feeling.</p>

<p>While I think a converged vision is an admirable and ambitious goal, it may not be necessary for a successful GUI ecosystem in Rust. It‚Äôs possible that different types of GUI programs will simply require different infrastructure, so even in the long term it makes sense to have ecosystem diversity. Certainly that‚Äôs the case in the short and medium term as well, just to explore the space. And even without a grand unifying vision, there is lots of scope to work on infrastructural crates for important pieces of the GUI story, including text layout and related problems.</p>

<h2 id="learning-and-community">Learning and community</h2>

<p>Many Rust projects these days come with what‚Äôs basically a marketing pitch: ‚Äúadopt this codebase, it‚Äôs awesome.‚Äù I am starting to see the Druid project in a somewhat different light. I consider its primary mission to be <em>teaching and learning</em> the knowledge required to build GUI. To that extent, the community we‚Äôre building, hosted on <a href="https://xi.zulipchat.com/">our Zulip instance,</a> is just as important as the code.</p>

<p>The knowledge needed to build GUI has many aspects, and is at all levels. Some of it is at a high level, like the best way to express reactive UI. Some of it is at a low level, like the keyboard event processing. A common thread is that a lot of it is very arcane, not really written down properly anywhere. Fortunately, a lot of it is accessible through reading the code of other open source projects, whether in Rust or in other languages (I‚Äôve found both Chromium and Gecko to be especially useful).</p>

<p>So I consider this a goal, a success criterion, of the Druid project. If somebody wants to know how to solve a problem in GUI, the Druid codebase should be one of the best places to look for answers.</p>

<p>I love research more than most anything, and a lot of my own work has a strong research flavor. That has caused some confusion; some of the things I‚Äôm exploring are very speculative and will likely take years to come to fruition. Certainly my research into compute-centric GPU rendering is of that nature; I‚Äôm excited about the fact that it promises dramatic performance improvements over the current state of the art, but it‚Äôs nowhere near ready to put into production yet. I‚Äôm striving for clearer communication so people can have a better idea what is speculative, based on grand futuristic visions, and what is on track to being usable reasonably soon. But both are important aspects of what I consider to be the main mission: fostering learning about how to build GUI.</p>

<h2 id="baby-steps">Baby steps</h2>

<p>While I am driven by a long-term, ambitious vision, the goal of Druid in 2021 is not to deliver a general UI toolkit. Rather, we are deliberately continuing to follow a narrow scope. The primary goal remains the font editor project, and we plan to re-focus attention on that. I do think this is an attainable goal. I also think that what we learn from trying to build a real application with users will be extremely valuable to the more ambitious task.</p>

<p>One project management technique that is proving effective is ‚Äúcycles.‚Äù Instead of trying to solve the most ambitious version of a problem, we choose up front what to push to a future cycle, reducing the scope for the current implementation cycle. An example is the choice to defer BiDi from our recent text work. This is obviously an essential feature for a real GUI toolkit, but we also know it could take weeks or months to get it right. To have any chance of shipping, we have to carefully budget our time and energy on subprojects that easily could expand to absorb our full attention.</p>

<p>A common development pattern for a fledgling GUI toolkit is to have a ‚Äúhero app‚Äù that drives development. It really helps clarify requirements, and also makes it ‚Ä¶</p></div></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://raphlinus.github.io/rust/druid/2020/09/28/rust-2021.html">https://raphlinus.github.io/rust/druid/2020/09/28/rust-2021.html</a></em></p>]]>
            </description>
            <link>https://raphlinus.github.io/rust/druid/2020/09/28/rust-2021.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24631611</guid>
            <pubDate>Tue, 29 Sep 2020 19:00:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why Music Is Helpful for Concentration]]>
            </title>
            <description>
<![CDATA[
Score 11 | Comments 14 (<a href="https://news.ycombinator.com/item?id=24629356">thread link</a>) | @pavelegorkin
<br/>
September 29, 2020 | https://tinnire.app/blog/why-music-is-helpful-for-concentration/ | <a href="https://web.archive.org/web/*/https://tinnire.app/blog/why-music-is-helpful-for-concentration/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>Discover the best music for focusing. Read the article to learn how to improve the efficiency of your work.</p>
    <h2>Content</h2>
    <ol>
        <li>What is concentration?</li>
        <li>Ways to improve focus and concentration</li>
        <li>What kind of music disrupts focusing</li>
        <li>Flow state music</li>
    </ol>

    <h2>What is Concentration?</h2>

    <p>There are several meanings of the word concentration. If we talk about focusing attention, then this is keeping the interest on one aspect while ignoring other things.</p>
    <p>In English language, this word came in the 1630s <a href="https://www.etymonline.com/word/concentrate?ref=etymonline_crossreference#etymonline_v_17305" target="_blank">from Italian</a> <i>concentrare</i>. Its origin is Latin: <i>com</i> ‚Äòwith, together‚Äô + <i>centrum</i> ‚Äòcenter‚Äô. This literally means ‚Äòaction of bringing to a central point‚Äô.</p>
    <p>Our ability to concentrate is important because the human body has limited resources. If we work being constantly distracted, then we will not be able to complete the task.</p>
    <p>Since ancient times, people have developed various techniques to stay focused. Let's dwell on the most popular methods.</p>

    <h2>Ways to Improve Focus and Concentration</h2>
    <ul>
        <li>
            <b>Choose the most productive working hours.</b> The early birds and late rasers have their peaks of activity at completely different times of the day. So, for the top-priority tasks, choose the time according to your individual characteristics.
        </li>
        <li>
            <b>Minimize the number of simultaneous tasks.</b> Scientists at <a href="https://news.stanford.edu/news/2009/august24/multitask-research-study-082409.html" target="_blank">Stanford University</a> have found that multitasking lowers human performance. Therefore, you should reduce the number of tasks and focus on one or two.
        </li>
        <li>
            <b>Make a clear plan and stick to it.</b> Until you complete one of the items, do not pay attention to anything else. Between plan items, you can take small breaks and change in the type of activity. If you are a computer worker, look out of the window or do a few push-ups.
        </li>
        <li>
            <b>Avoid checking your email and phone at work.</b> According to the
            <a href="http://www.fieldworksmarketing.co.uk/wellness/how-to-reduce-stress-for-international-stress-awareness-week/" target="_blank">International Journal of Information Management</a>, it takes us approximately 64 seconds to come back to the working process after checking email. If your job is not directly related to making calls and writing letters, put the phone away. Adopt a rule to check email and messengers before work and after work. Mute all notifications the rest of the time.
        </li>
        <li>
            <b>Use background music for concentration or white noise.</b> If you can't find a quiet place to work, you can use background sounds to drown out any distracting noises and keep your attention on the main thing.
        </li>
    </ul>
    <p>However, it happens that music does not help to focus. Let's find out why.</p>

    <h2>What Kind of Music Disrupts Focusing</h2>

    <p>Loud or fast-paced music. In general, any soundtrack that grabs your attention distracts you from your work. Dance music is created with the intention of fascinating you, creating a sense of celebration and encouraging you to dance.</p>
    <p>At the same time, if you put a song that you actively dislike, it will also not help your concentration, because you will think about your feelings.</p>
    <p>Songs with lyrics or commercials are also a bad choice for focusing. The brain will try to understand and process the text it hears.</p>

    <h2>Flow State Music</h2>
    <p>There is a particular type of music that is specifically designed to help you focus as much as possible. It calls flow state music.</p>
    <p>The term <i>flow state</i> was coined by the American psychologist <a href="https://en.wikipedia.org/wiki/Mihaly_Csikszentmihalyi" target="_blank">Mihaly Csikszentmihalyi</a>. He described this state as a maximum motivation and focusing on completing work. A person in the flow state feels freedom, joy and total satisfaction.</p>
    <p>Probably anyone who has been doing what they love has experienced the flow state. The Tinnire App offers an endless amount of music tracks that will help you stay in this state all day long. This AI-assisted music has been created specifically for concentrating. Visit
        the <a href="https://tinnire.app/">Tinnire website</a> and try it for free.</p>

</div></div>]]>
            </description>
            <link>https://tinnire.app/blog/why-music-is-helpful-for-concentration/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24629356</guid>
            <pubDate>Tue, 29 Sep 2020 15:55:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Fourier Filtering]]>
            </title>
            <description>
<![CDATA[
Score 13 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24629172">thread link</a>) | @gus_massa
<br/>
September 29, 2020 | http://bigwww.epfl.ch/demo/ip/demos/FFT-filtering/ | <a href="https://web.archive.org/web/*/http://bigwww.epfl.ch/demo/ip/demos/FFT-filtering/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>Running ...</p><div id="main">
    
    <p>
        Your browser does not support the HTML5 canvas element. Please, try with a newer browser.<br>
    </p>
    

    <div id="imageChooser">
        <div id="imagesContainer">
            <p><img src="http://bigwww.epfl.ch/demo/ip/demos/icons/open_file.png">
                <span>from disk</span>
            </p>

            <p><img src="http://bigwww.epfl.ch/demo/ip/demos/icons/open_url.png">
                <span>from url</span>
            </p>
            
        </div>
        </div>

    
    

     <p id="animationBlock">Steps<br>
         <progress id="animationSteps" min="0" value="1" max="10"></progress> <span>0/5</span>
    </p>

    <div>
        

        <div title="SNR">
            <div>
                <p>SNR:</p>
                <p>0.0</p>
            </div>
        </div>

        <!-- <div class="container-item" title="save a screenshot">
            <a id="export1">
                <div id="export_container">
                    <img id="export_img" src="http://bigwww.epfl.ch/demo/ip/demos/icons/screenshot.png"/>
                </div>
            </a>
        </div>

        <div class="container-item" title="save a screenshot">
            <a id="export2">
                <div id="export_container">
                    <img id="export_img" src="http://bigwww.epfl.ch/demo/ip/demos/icons/screenshot.png"/>
                </div>
            </a>
        </div> -->
    </div>

</div><p>
	¬© 2018 Image Processing Online Demonstration, Biomedical Imaging Group, EPFL.
	<br>
	The Javascript/HTML5/ImageAccess library (<a href="http://bigwww.epfl.ch/publications/sage0303.html">Reference</a>) 
	was written by <b>Cyril Favre</b>, <b>Robin Lang</b>, and <a href="mailto:daniel.sage@epfl.ch">Daniel Sage</a>.
	</p></div>]]>
            </description>
            <link>http://bigwww.epfl.ch/demo/ip/demos/FFT-filtering/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24629172</guid>
            <pubDate>Tue, 29 Sep 2020 15:42:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Double Digit Decline in Infectious Disease Research During Coronavirus Pandemic]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24628957">thread link</a>) | @KaiserSanchez
<br/>
September 29, 2020 | https://www.medifind.com/news/post/double-digit-decline-in-infectious-disease-research-during-coronavirus-pandemic | <a href="https://web.archive.org/web/*/https://www.medifind.com/news/post/double-digit-decline-in-infectious-disease-research-during-coronavirus-pandemic">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><div><div><div><div>
<p>As featured on <a rel="noreferrer noopener" href="https://www.contagionlive.com/news/double-digit-decline-infectious-disease-research-coronavirus-pandemic" target="_blank">Contagion Live</a></p>



<p>As resources have been poured into the COVID-19 response, other infectious disease priorities have been displaced. Patrick Howie, CEO of a firm which aggregates useful clinical data/analysis, explains.</p>



<figure><p>
<iframe title="Double Digit Decline in Infectious Disease Research During Coronavirus Pandemic" width="500" height="281" src="https://www.youtube.com/embed/fpZbcASIbYs?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</p></figure>



<div><p><em>‚ÄúThe areas of research most negatively affected by COVID-19 include other infectious diseases, many types of cancer&nbsp;and neurological diseases. The impact is potentially dire in all categories, but in somewhat different ways.‚Äù&nbsp;<p>&nbsp;‚ÄúFailing to make advances against infectious diseases could have&nbsp;a&nbsp;global impact in the future,&nbsp;given their ability to spread quickly&nbsp;and&nbsp;indiscriminately. Slowdowns in research here may severely limit our ability to counteract outbreaks of&nbsp;both&nbsp;known infectious diseases and novel ones, given the fact that learnings are often relevant across different vectors of disease.&nbsp;</p></em></p><p><em>‚ÄúUnfortunately, the way our medical research system is structured means there are limited resources, and thus clear winners and losers in the face of crisis. Progress against COVID-19 comes at the expense of many other important diseases, with implications that could last years. A researcher&nbsp;diverting&nbsp;their focus to COVID-19 may have a difficult time regaining funding, employees and resources when the time comes. Patients who were candidates for a clinical trial that was delayed due to&nbsp;the pandemic may&nbsp;have pursued&nbsp;other options that&nbsp;could&nbsp;later disqualify&nbsp;them, or&nbsp;faced even more dire consequences of these delays. With clinical trials unable to proceed as normal, and recruitment and retention becoming problematic, the delays in new research may be far-reaching and long-lasting.&nbsp;<br>&nbsp;</em><br><em>‚ÄúCOVID-19 was an unprecedented challenge and call-to-arms for the global medical research community. The speed and size of the response has been stunning, serving as evidence of our ability to scale up global collaboration in record time, across borders and boundaries. The response stands as a&nbsp;monument to the work we&nbsp;can&nbsp;do together when necessary. This reality offers hope not only for future pandemics, but also points to possibilities for more purposeful and progressive collaboration in the thousands of other diseases that rely on continued research. Disease isn‚Äôt limited by geopolitical boundaries, and our response can‚Äôt be either.&nbsp;&nbsp;<p>&nbsp;‚ÄúCOVID-19 has also put a new spotlight on the numerous issues in the healthcare system, including technological barriers like limited data interoperability. It‚Äôs become clear that no single&nbsp;person&nbsp;(or even group) can conduct research on the scale required for&nbsp;a&nbsp;challenge&nbsp;like&nbsp;COVID-19. To succeed, we desperately need to accelerate our ability to use tools like artificial intelligence and machine learning to amplify human effort.&nbsp;&nbsp;</p></em><br><em>‚ÄúCOVID-19, like SARS and MERS before it,&nbsp;has&nbsp;naturally relied heavily on the talents of infectious disease specialists. In all cases, these experts had to divert their attention, time, energy and perhaps even funding, given that they were best equipped to tackle these new threats. What‚Äôs different about COVID-19 is the scale of the impact. COVID-19 has impacted the entire world in dramatic numbers, leaving no country unscathed. The scale of increase in coronavirus research, and the related scale of decrease in all other research, is novel.‚Äù&nbsp;</em></p></div>
</div></div></div></div></div></div></div></div>]]>
            </description>
            <link>https://www.medifind.com/news/post/double-digit-decline-in-infectious-disease-research-during-coronavirus-pandemic</link>
            <guid isPermaLink="false">hacker-news-small-sites-24628957</guid>
            <pubDate>Tue, 29 Sep 2020 15:26:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Benchmarking TensorFlow on Nvidia GeForce RTX 3090]]>
            </title>
            <description>
<![CDATA[
Score 99 | Comments 101 (<a href="https://news.ycombinator.com/item?id=24628189">thread link</a>) | @rkwasny
<br/>
September 29, 2020 | https://www.evolution.ai/post/benchmarking-deep-learning-workloads-with-tensorflow-on-the-nvidia-geforce-rtx-3090 | <a href="https://web.archive.org/web/*/https://www.evolution.ai/post/benchmarking-deep-learning-workloads-with-tensorflow-on-the-nvidia-geforce-rtx-3090">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><p>NVIDIA recently released the much-anticipated GeForce RTX 30 Series of Graphics cards, with the largest and most powerful, the RTX 3090, boasting 24GB of memory and 10,500 CUDA cores. This is the natural upgrade to 2018‚Äôs 24GB RTX Titan and we were eager to benchmark the training performance performance of the latest GPU against the Titan with modern deep learning workloads.</p><p>Based on the specs alone, the 3090 RTX offers a great improvement in the number of CUDA cores, which should give us a nice speed up on FP32 tasks. However, NVIDIA decided to cut the number of tensor cores in GA102 (compared to GA100 found in A100 cards) which might impact FP16 performance.<br></p><p>‚Äç<br></p><div>
<table>
  <tbody><tr>
    <th></th>
    <th>Titan RTX</th>
    <th>3090 RTX</th>
  </tr>
  <tr>
    <td><i>Architecture</i></td>
    <td>Turing TU102</td>
    <td>Ampere GA102</td>
  </tr>
  <tr>
    <td><i>Cuda cores</i></td>
    <td>4,609</td>
    <td>10,496</td>
  </tr>
  <tr>
    <td><i>Tensor cores</i></td>
    <td>576</td>
    <td>328</td>
  </tr>
  <tr>
    <td><i>Memory</i></td>
    <td>24GB</td>
    <td>24GB</td>
  </tr>
  <tr>
    <td><i>Memory bandwidth</i></td>
    <td>672 GB/sec</td>
    <td>936 GB/sec</td>
  </tr>
  <tr>
    <td><i>TDP (watts)</i></td>
    <td>285</td>
    <td>350</td>
  </tr>
</tbody></table></div><p>System:<br></p><p><em>Ubuntu 18.04.3</em></p><p><em>Driver Version: 455.23.05</em></p><p><em>CUDA Version: 11.1</em></p><p><em>Tensorflow: tf-nightly 2.4.0.dev20200928</em></p><p>It is very important to use the latest version of CUDA (11.1) and latest tensorflow, some features&nbsp;like TensorFloat are not yet available in a stable release at the time of writing.</p><p><br>We use our own fork of the <a href="https://github.com/lambdal/lambda-tensorflow-benchmark/tree/tf2">Lambda Tensorflow Benchmark</a> which measures the training performance for several deep learning models trained on ImageNet.</p><p>‚Äç</p><div>


<table>
	<caption>Training performance in images processed per second</caption>
  <thead>
    <tr>
      <th></th>
      <th colspan="2">FP16</th>
      <th colspan="2">FP32</th>
    </tr>
    <tr>
      <th></th>
      <th>Titan RTX</th>
      <th>RTX 3090</th>
      <th>Titan RTX</th>
      <th>RTX 3090</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><i>AlexNet</i></td>
      <td>6634.31</td>
      <td>8255.43</td>
      <td>4448.46</td>
      <td>6493.16</td>
    </tr>
    <tr>
      <td><i>Inception3</i></td>
      <td>656.13</td>
      <td>616.25</td>
      <td>222.95</td>
      <td>337.31</td>
    </tr>
    <tr>
      <td><i>Inception4</i></td>
      <td>298.11</td>
      <td>132.73</td>
      <td>99.74</td>
      <td>143.65</td>
    </tr>
    <tr>
      <td><i>ResNet152</i></td>
      <td>423.92</td>
      <td>484.02</td>
      <td>134.47</td>
      <td>203.58</td>
    </tr>
    <tr>
      <td><i>ResNet150</i></td>
      <td>966.77</td>
      <td>1259.95</td>
      <td>335.96</td>
      <td>525.88</td>
    </tr>
    <tr>
      <td><i>VGG16</i></td>
      <td>339.73</td>
      <td>442.49</td>
      <td>212.06</td>
      <td>325.60</td>
    </tr>
  </tbody>
</table></div><p>‚Äç</p><p>‚Äç</p><p>‚Äç</p><figure id="w-node-81c38bb21f8c-a8a0c0ce"><p><img src="https://assets.website-files.com/5f286b01a607cf5cd1531aa9/5f731993be0980f19dfb79a2_gpu_benchmark.svg" loading="lazy" alt=""></p><figcaption>Speedup of RTX 3090 over Titan RTX</figcaption></figure><p>‚Äç</p><p>We're able to achieve a 1.4-1.6x training speed-up for all the models training with FP32! As expected, the FP16 is not quite as significant, with a 1.0-1.2x speed-up for most models and a drop for Inception.</p><p>‚Äç</p><p>Please get in touch at <a href="mailto:hello@evolution.ai">hello@evolution.ai</a> with any questions or comments!</p></div></div></div></div>]]>
            </description>
            <link>https://www.evolution.ai/post/benchmarking-deep-learning-workloads-with-tensorflow-on-the-nvidia-geforce-rtx-3090</link>
            <guid isPermaLink="false">hacker-news-small-sites-24628189</guid>
            <pubDate>Tue, 29 Sep 2020 14:24:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Audrey Tang on her ‚Äúconservative-anarchist‚Äù vision for Taiwan‚Äôs future]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24627208">thread link</a>) | @leoschwartz
<br/>
September 29, 2020 | https://restofworld.org/2020/audrey-tang-the-conservative-anarchist/ | <a href="https://web.archive.org/web/*/https://restofworld.org/2020/audrey-tang-the-conservative-anarchist/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
			
<p>‚ÄúCivil Rap Song,‚Äù a <a href="https://www.billboard.com/articles/news/international/9392471/japan-dos-monos-civil-rap-song-taiwan-digital-minister-audrey-tang-watch-new-video">track</a> by the Japanese hip-hop trio Dos Monos, begins not with an MC‚Äôs rhymes but a faraway voice speaking slow, bureaucratic English. The deconstructed audio is sampled over gloomy synth:<em> ‚ÄúIf you overemphasize ‚Ä¶ amplifying the public and private sector ‚Ä¶ where is the civic sector? ‚Ä¶ where is the social sector?‚Äù</em> Made in less than a week during Japan‚Äôs state of emergency over Covid-19, the track was intended to be ‚Äúculturally empowering,‚Äù according to a band member ‚Äî a way to remind the public that it still had choices, even in the midst of a crisis.</p>



<p>The speaker in the song is 39-year-old Audrey Tang, a prodigy hacker turned activist turned digital minister in the Taiwanese government. Tang, who wears rimless glasses and dark, baggy clothes by Issey Miyake, does not fit the profile of a rapper‚Äôs muse. Yet over the course of the coronavirus pandemic, which her country has managed with singular, tech-enabled ease, she has become an international messenger of Taiwan‚Äôs ‚Äúradically transparent‚Äù ‚Äúdigital democracy.‚Äù For Tang, the Taiwanese model offers an imitable middle ground: between the internet and personal privacy; between corporate interests and the welfare state.</p>



<p>Before Covid-19, you may have heard of Tang if you followed Taiwanese news, tech gossip, or transgender politics. She is considered one of Taiwan‚Äôs top coders, having taught herself the programming languages Haskell and Perl before developing software for Apple that would be used in Siri. In the spring of 2014, when news that Taiwan‚Äôs then-president Ma Ying-jeou had threatened the island nation‚Äôs independence by attempting to force through a trade deal with China, Tang quit a job at Socialtext, where she worked on Google Suite‚Äìlike productivity software, to join a scrum of hackers gathered outside the main government building in Taipei. This was the beginning of the Sunflower Movement, a popular uprising against the prospect of national absorption, and Tang helped broadcast the protests and debates online. After a nearly monthlong occupation, Ma was forced to abandon the pact, and the Sunflower activists turned to political organizing. They successfully ran progressive candidates in the 2014 local elections and, in 2016, elected Tsai Ing-wen as president. Tsai‚Äôs administration recruited Tang to become the first out transgender person in Taiwan‚Äôs executive cabinet.</p>



<p>While Tang‚Äôs title is ‚Äúdigital minister,‚Äù she is a minister without a ministry. As one of nine <a href="http://www.politicseastasia.com/research/audrey_tang_interview/">‚Äúhorizontal ministers,‚Äù</a> she advises other parts of the government on all things tech ‚Äî and, because she happens to be obsessed with the U.N.‚Äôs Sustainable Development Goals ‚Äî environmental overlaps. In 2017, for instance, she and her staff worked with the Ministry of the Interior and a risk-management agency to combine separate systems used to prevent and respond to natural disasters. Upon Tang‚Äôs recommendation, the government agreed to implement a new cloud-based interface to trim costs and give the public quick, easy access to information on floods, fires, and extreme weather. Last year, during the second <a href="https://www.roc-taiwan.org/uk_en/post/6295.html">‚Äúpresidential hackathon,‚Äù</a> an annual event that invites startup-style ideas for governance, she helped facilitate the development of a solar-powered device that can measure and log water-pollution levels on an open-source blockchain. Soon, any citizen worried about downstream industrial waste will be able to buy a few of these monitors, drop them in a creek, and create a dataset to hold corporations and local officials accountable to environmental regulations.</p>



<p>This is clearly government work, but Tang, at her core a hacker iconoclast, bristles at the notion that she works <em>for </em>Taipei. She still prefers to see herself as a liaison, or, in her words, ‚Äúa moderator or editor,‚Äù between the public and the state. This explains why Tang ‚Äî though not a doctor or epidemiologist ‚Äî found herself at the center of Taiwan‚Äôs response to Covid-19.&nbsp;</p>


		<figure>
			<div>
				<p><img src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/09/ARX_ROW_AT_00054-40x27.jpg" data-src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/09/ARX_ROW_AT_00054-768x432.jpg" data-srcset="https://149346090.v2.pressablecdn.com/wp-content/uploads/2020/09/ARX_ROW_AT_00054-400x267.jpg 400w, https://restofworld.org/wp-content/uploads/2020/09/ARX_ROW_AT_00054-600x400.jpg 600w, https://restofworld.org/wp-content/uploads/2020/09/ARX_ROW_AT_00054-1000x667.jpg 1000w, https://restofworld.org/wp-content/uploads/2020/09/ARX_ROW_AT_00054-1600x1067.jpg 1600w, https://restofworld.org/wp-content/uploads/2020/09/ARX_ROW_AT_00054-2800x1867.jpg 2800w, " sizes="(max-width: 640px) 100vw, (max-width: 992px) calc(100vw - 40px), (max-width: 1140px) calc(100vw - 290px), calc(100vw - ((100vw - 640px)/2))" alt="">
					
				</p>
			</div>
						<figcaption itemprop="caption description">
				
				
			</figcaption>
		</figure>


<hr>



<p>When rumors of a dangerous flu emerged from Wuhan, China, last December, the Taiwanese reacted fast. Carrying the memory of the 2003 SARS epidemic, they rushed to buy face masks, threatening to deplete local supplies. In the city of Tainan, an engineer named Howard Wu created a fix: a mapping system to track available masks, using Google GPS and Places API. The platform was an immediate hit. Tang reached out to Wu and secured funding from Google to support and extend the project, which eventually inspired a similar system in South Korea. By spring, the Taiwanese government was managing the supply and distribution of cheap N95-type masks through neighborhood pharmacies. All 24 million residents of Taiwan could buy a certain number per week, at any pharmacy, based on their national health insurance card. Long lines got shorter, and people went about social distancing with confidence. The success of this model ‚Äî Taiwan has had fewer than 500 total cases and just seven deaths ‚Äî was what attracted the Dos Monos rappers to Tang.</p>



<p>It helped that, in East Asia, masks were ‚Äúalready ‚Äònatural‚Äô before the pandemic; we didn‚Äôt have to invent new things,‚Äù Tang said. In response to the common, mostly Western critique that East Asian technocracy relies too much on digital surveillance, Tang explained that Taiwan‚Äôs containment method involved ‚Äúa deep but very narrow and time-limited privacy infringement: You either, when flying back, go to the quarantine hotel for 14 days, or you can choose the digital fence,‚Äù that is, submit to strict tracking. ‚ÄúWe do not collect new data,‚Äù she added. ‚ÄúIt‚Äôs not a new app. It‚Äôs not GPS. People understand it‚Äôs proportional.‚Äù Taiwan also invested in fact-checking startups and enlisted comedians to craft lighthearted responses to Covid-19 disinformation and consumer misbehavior. In a public-service announcement intended to stem panic-buying of toilet paper, a cartoon version of Tang‚Äôs boss, Premier Su Tseng-chang, shimmies his rear end beneath the <a href="https://qz.com/1863931/taiwan-is-using-humor-to-quash-coronavirus-fake-news/">words</a>, ‚ÄúYou only have one butt.‚Äù</p>



<p>When I spoke with Tang via Skype in July, she referred to Taiwan as ‚Äúpost-pandemic.‚Äù The country had never shut down completely, and its streets, markets, and schools were beginning to feel normal. She had just made her morning commute in downtown Taipei, a 15-minute walk from Da‚Äôan Park, past the Jianguo flower market, to a broad concrete complex surrounded by lush trees. There, in an open-air arcade that once belonged to the air force, is the Social Innovation Lab, the headquarters of Tang‚Äôs digital non-ministry. She dialed in from her office, which resembled the lounge of a coworking space. A vertical Chinese scroll hung over her right shoulder: ‚ÄúMore and more graceful every day.‚Äù</p>



<p>Tang had been holding public ‚Äúoffice hours‚Äù on Tuesdays and Wednesdays and was booked through September to chat with locals about tech and government policy, entrepreneurship, and sustainability. Nearly all her interactions, including media interviews and meetings with lobbyists, are subject to a ‚Äúradical transparency‚Äù policy: They are recorded, transcribed, and posted online for all to see. Tang also holds regular virtual visits with communities all over Taiwan.</p>



<figure><blockquote><p>‚Äú<strong>Any top-down, coercion, whether it‚Äôs from the capitalists or from the state, is equally bad.‚Äù</strong></p></blockquote></figure>



<p>During a recent one, entrepreneurs from Taiwan‚Äôs indigenous community pressed for changes to the business code. Tang listened and recalled a solution she helped devise last year, when Taiwan became the first Asian country to legalize same-sex marriage. Many older, conservative Taiwanese could accept that gay people should have equal rights but felt reluctant to have their extended-family registries ‚Äî official, patrilineal records stretching back to the early 20th century ‚Äî reflect LGBT unions. The fix was a ‚Äúhyperlink act‚Äù that, with a single click, would amend relevant sections of the civil code to give queer couples the same rights and duties as anyone else but would not, as with straight marriages, ‚Äúhyperlink to the in-laws,‚Äù meaning that the families of the same-sex couple wouldn‚Äôt be permanently bonded in the eyes of the state. ‚ÄúTheir families don‚Äôt wed. It‚Äôs the individuals that wed,‚Äù she told me. ‚ÄúIt‚Äôs a social innovation that convinced both generations that the values that they cherish are not disrupted when we pass marriage equality. It‚Äôs marriage equality with intergenerational solidarity.‚Äù</p>



<p>It‚Äôs also a compromise. Tang, whose mother was active in Taiwan‚Äôs cooperative movement before the country transitioned to democracy, much prefers collaboration to battle. This might relate as well to another aspect of Tang‚Äôs childhood: she was born with a heart defect and often talks about the virtues of unhurried observation. ‚ÄúIf you‚Äôre slow in your motion, you tend to notice other, nonhuman beings,‚Äù she told me ‚Äî trees, rivers, computers. As digital minister, she invoked this cooperative ideal to implement Pol.is, an online discussion board where Taiwanese people can engage in a ‚Äúrough-consensus process‚Äù about social issues, such as what sorts of rules should govern Uber or how best to combat the spread of revenge porn. To prevent trolling, the platform functions without a reply button.</p>



<p>Taiwan‚Äôs constitution prohibits private businesses from acting against ‚Äúthe balanced development of national wealth and people‚Äôs livelihood,‚Äù yet the country‚Äôs most famous corporation is high-tech Apple supplier Foxconn, which gained notoriety for driving its mainland Chinese factory workers to suicide. I asked whether the cruelties of big businesses hadn‚Äôt dimmed Tang‚Äôs faith in the possibility of social equilibrium. ‚ÄúThe manufacturing companies, they learned, of course, not to do [things with] adverse effects within Taiwan proper,‚Äù she replied, referring to Foxconn‚Äôs compounds in mainland China. But the next generation of Taiwanese entrepreneurs, she said, will use robotics to reduce worker exploitation, embrace ‚Äúworker associations,‚Äù and pursue ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://restofworld.org/2020/audrey-tang-the-conservative-anarchist/">https://restofworld.org/2020/audrey-tang-the-conservative-anarchist/</a></em></p>]]>
            </description>
            <link>https://restofworld.org/2020/audrey-tang-the-conservative-anarchist/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24627208</guid>
            <pubDate>Tue, 29 Sep 2020 13:00:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Identifying Airtel middleboxes that censor HTTPS traffic]]>
            </title>
            <description>
<![CDATA[
Score 375 | Comments 121 (<a href="https://news.ycombinator.com/item?id=24626388">thread link</a>) | @justDankin
<br/>
September 29, 2020 | http://iamkush.me/sni-airtel/ | <a href="https://web.archive.org/web/*/http://iamkush.me/sni-airtel/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
				<p>Back in November 2019, <a target="blank" href="https://cis-india.org/internet-governance/blog/reliance-jio-is-using-sni-inspection-to-block-websites">we reported</a> that Reliance Jio is able to block HTTPS internet traffic by means of a deep packet inspection (DPI) technique. In response, some readers messaged us saying that they ran our test and were able to reproduce similar behaviour on Airtel mobile networks. According to <a href="https://trai.gov.in/sites/default/files/PIR_08012020_0.pdf" target="_blank">TRAI's Performance Indicators report for Jul-Sep 2019</a>, Reliance Jio and Airtel serve roughly 52% and 23% of internet subscribers in India respectively. <strong>This essentially means that SNI inspection based censorship is now impacting every 3 out of 4 internet connections in India.</strong></p>

<p>Although the previous test was able to detect the presence of SNI inspection based censorship, it was not very insightful. In this post, we delve into a more informative test which not only confirms the presence of SNI inspection based censorship, but also helps us identify the exact mechanism. Furthermore, it also allows us to identify middleboxes which are actively inspecting SNI in TLS handshakes and censoring requests. <strong>Using this method, we were able to discover 25 different middleboxes registered to Airtel, which are actively censoring HTTPS traffic.</strong></p>

<p>Quick links to different sections of this post: <br>
1. <a href="#secTLS">Transport Layer Security</a> <br>
1.1 <a href="#secSNI">Server Name Indication</a> <br>
2. <a href="#secSNICensor">SNI Inspection based censorship</a> <br>
3. <a href="#secINT">Iterative Network Tracing</a> <br>
4. <a href="#secData">Data Preparation</a> <br>
5. <a href="#secMethod">Methodology</a> <br>
6. <a href="#secAirtel">Examining Airtel's behaviour</a> <br>
7. <a href="#secRef">References</a></p>

<p>All the code for replicating this experiment, as well as the logs from our test runs can be found in <a target="_blank" href="https://github.com/kush789/INT-SNI">this repository</a>. Big shout-out to <a href="https://ipinfo.io/" target="_blank">IPinfo</a> for giving us access to their IP address dataset, and <a href="https://gurshabad.github.io/" target="_blank">Gurshabad Grover</a> for his suggestions while ideating the methodology and for editing this post.</p>





<p>Transport Layer Security (TLS) is a cryptographic protocol for providing communication confidentiality and authenticity, commonly used for encrypting web traffic (as done in HTTPS). Normally TLS is used over TCP, as it requires a reliable in-order data stream. A <a href="https://www.cloudflare.com/learning/ssl/transport-layer-security-tls" target="_blank">quick refresher</a> on TLS by Cloudflare.</p>

<p><img src="https://i.imgur.com/OlMYujg.png" alt="img">
</p><center>A TCP handshake followed by a TLS Handshake. The ClientHello is a message sent by the client, which initiates the TLS handshake. This message can contain extensions such as SNI. Image credits - <a href="https://www.cloudflare.com/learning/ssl/what-happens-in-a-tls-handshake/">Cloudflare</a></center>



<h3 id="servernameindication">Server Name Indication</h3>

<p>Server Name Indication (SNI), defined first in <a href="https://tools.ietf.org/html/rfc4366" target="_blank">RFC4366</a> and then in <a href="https://tools.ietf.org/html/rfc6066" target="_blank">RFC6066</a>, is a TLS extension designed to facilitate the hosting of multiple HTTPS websites on the same IP address. While sending a <code>ClientHello</code> message (which initiates the establishment of a secure connection), the client is expected to fill in the SNI attribute with the hostname of the website it wishes to connect to. SNI, unfortunately, travels on the network in cleartext, i.e. <strong>network operators can not only see the websites you‚Äôre visiting, but also filter traffic based on this information.</strong></p>

<hr>





<p>Since the SNI present is in cleartext, anyone in the network can inspect and filter traffic based on its value. As seen in other countries, ISPs can leverage this to deny access to certain websites. We can observe the same by attempting a TLS connection using openssl and monitoring packets to the host.  </p>

<pre><code>openssl s_client -state -connect 103.224.212.222:443 -servername fullhd720.com  
</code></pre>

<p><img src="https://raw.githubusercontent.com/kush789/INT-SNI/master/images/airtel_103.224.212.222_fullhd720.com.png" alt="img">
</p><center>An attempted TLS connection to <code>103.224.212.222</code>, with SNI <code>fullhd720.com</code>. We observe a RST packet immediately after the ClientHello message containing the SNI is sent.</center>

<p>For instance, using Airtel, we can see that the client receives a TCP RST packet when it tries to connect to a blocked website "fullhd720.com". The RST packet seems to be originating from the actual host, and is received right after the ClientHello message containing the SNI is sent. <a href="https://github.com/kush789/INT-SNI/blob/master/pcaps/airtel_103.224.212.222_fullhd720.com.pcap" target="_blank">PCAP</a>.</p>

<p>To confirm that the connection termination was indeed due to the SNI, we can reattempt the connection with a different SNI which we don't expect to be blocked (in this case we use <code>facebook.com</code>).</p>

<pre><code>openssl s_client -state -connect 103.224.212.222:443 -servername facebook.com  
</code></pre>

<p><img src="https://raw.githubusercontent.com/kush789/INT-SNI/master/images/airtel_103.224.212.222_facebook.com.png" alt="img">
</p><center>An attempted TLS connection to <code>103.224.212.222</code> with a different SNI, <code>facebook.com</code>. In this case, we observe a successful TLS handshake</center>

<p>This time we notice a successful connection, indicating that the RST in the previous attempt was indeed due to the specified SNI. <a href="https://github.com/kush789/INT-SNI/blob/master/pcaps/airtel_103.224.212.222_facebook.com.pcap" target="_blank">PCAP</a>.</p>

<p>Although this test does demonstrate the presence of SNI inspection based censorship, the packet dumps are not sufficient to prove that the RST packet was actually forged by a middlebox belonging to the ISP.</p>

<hr>  





<p>For a given host, let's call the minimum Time to Live (<a href="https://packetpushers.net/ip-time-to-live-and-hop-limit-basics/" target="_blank">TTL</a>) required for a packet to reach from the client to the host, <code>min_ttl</code>. Any packet where the TTL set is less than <code>min_ttl</code> would expire in transit, and never reach the host. Ideally, the router at which the TTL of the packet expired should respond with an ICMP Time Exceeded (<a href="http://www.networksorcery.com/enp/protocol/icmp/msg11.htm" target="_blank">ICMP message type 11</a>) message. However, this is not guaranteed, and some routers are even configured to not send them (in order to hide the topology of the network).</p>

<p><img src="https://i.imgur.com/aSrR375.png" alt="img">
</p><center>Iterative Network Tracing; we send ClientHello messages with increasing TTL. In this particular case, the minimum TTL required is 9. A middlebox which censors requests would send back a censored response even when the TTL is less than 9. Image credits - <a href="#cite1">Yadav et al.</a></center>

<p>So if the RST received is forged by a middlebox, we should receive it even when we send the ClientHello message with TTL less than <code>min_ttl</code>. This approach, known as Iterative Network Tracing (INT), has been previously used to ascertain the presence of middleboxes which censor DNS and HTTP traffic in India [<a href="#cite1">Yadav et al.</a>] and China <a href="#cite2">Xu et al.</a> Similar to these studies, we use INT to detect censorship of TLS traffic (explained further in the <a href="#secMethod">methodology</a> section).</p>

<hr>  





<p>We run our tests using a list of potentially blocked websites (PBWs), curated from leaked court and government orders. The list and more information pertaining to it can be found <a href="https://github.com/kush789/How-India-Censors-The-Web-Data" target="_blank">here</a>.</p>

<p>Using Google's DNS over HTTPS (DoH) <a href="https://developers.google.com/speed/public-dns/docs/doh" target="_blank">service</a>, each hostname was resolved to its correct IP address. Using DoH here is important as it ensures that no DNS based censorship intervenes with the test. This resulted in roughly 5000 (hostname, ip) pairs. Next we selected a random subset and checked for TCP connectivity to port 443 to each of those ips (since not all would support HTTPS traffic), filtering our list down to 1370 pairs.</p>

<p>For each of these test points, we establish a TCP connection with the resolved_ip, and send a TLS ClientHello with the SNI set as the correct_hostname. We sniff and save these ClientHello packets (just the SSL layer) for use later. Similarly, we save the ClientHello packet with the SNI set as <code>facebook.com</code>. These sniffed packets can be found <a href="https://github.com/kush789/INT-SNI/tree/master/tls_client_hellos" target="_blank">here</a>.</p>

<hr>  





<p>The input to the test is a 2-tuple, (<code>correct_hostname</code>, <code>resolved_ip</code>). We would like to understand the behaviour of a middlebox when it observes a ClientHello message containing an SNI for a website it wishes to block.</p>

<p>First, we calculate the <code>min_ttl</code> for a given test point. We begin by establishing a TCP connection with <code>resolved_ip</code>.</p>

<pre><code>import socket  
import random  
from scapy.all import *

resolved_ip = "103.224.212.222"  
dport = 443 # TLS connection  
sport = random.randint(1024, 65535) # Random source port

def create_connection(resolved_ip):  
    s = socket.socket(socket.AF_PACKET, socket.SOCK_RAW)
    s.bind(("usb0", 0)) # Was using a tethered mobile connection for the experiment

    IP_PACKET = IP(dst = resolved_ip)

    seq = random.randint(12345, 67890) # Randomise initial seq number
    SYN = TCP(sport = sport, dport = dport, flags = "S", seq = seq)
    SYNACK = sr1(IP_PACKET / SYN)
    ACK = TCP(sport = sport, dport = dport, flags = "A", seq = seq + 1, ack = SYNACK.seq + 1)
    send(IP_PACKET / ACK)
    return IP_PACKET, ACK
</code></pre>

<p><strong>Note</strong>: When the linux kernel feature gets a TCP packet to an unknown socket, it sends a RST back to the originator. Since we'll be creating our own raw sockets, we need to suppress these outbound RSTs from the kernel using iptables before running experiments.</p>

<pre><code>sudo iptables -A OUTPUT -p tcp --tcp-flags RST RST -j DROP  
</code></pre>

<p>Once the TCP connection has been established, we send ClientHello messages (containing <code>facebook.com</code> in SNI) after updating the TTL (<code>probe_ttl</code>) in the underlying IP header. We specify <code>facebook.com</code> in the SNI so that the middlebox doesn't attempt to terminate the connection. <code>min_ttl</code> would be the minimum TTL at which we receive a TLS ServerHello or TLS Alert from the host.</p>

<pre><code># Load ClientHello with garbled hostname in SNI (sniffed earlier, read Data Preparation)
max_ttl = 35

def find_min_ttl(resolved_ip)

    with open("tls_client_hellos/facebook.com", 'rb') as fp:
        tls_client_hello_facebook_com_sni = fp.read()

    for probe_ttl in range(1, max_ttl):
        IP_PACKET, ACK = create_connection(resolved_ip)
        IP_PACKET.ttl = probe_ttl
        del IP_PACKET.chksum # Will force scapy to recalculate checksum after TTL update

        resp, _ = sr(IP_PACKET / ACK / tls_client_hello_facebook_com_sni, timeout = 2, retry = 0, multi = True)

        for _, ans_packet in resp:
            tls_alert = ans_packet.get(tls.TLS, {}).get(tls.TLSAlert)
            tls_server_hello = ans_packet.get(tls.TLS, {}).get(tls.TLSHandshakes, {}).get(tls.TLSServerHello)

            if tls_alert or tls_server_hello:
                return probe_ttl # min_ttl found!
</code></pre>

<p>Next, we send ClientHello messages containing the <code>correct_hostname</code> in the SNI with TTL increasing from 1 to <code>min_ttl</code> - 1. If there is no middlebox interfering with the connection, all such requests should receive either an ICMP Time Exceeded in response or no response at all. If at any point we receive an RST packet which seems to be originating from <code>resolved_ip</code>, we can say with certainty that the packet was forged by a middlebox.</p>

<pre><code>min_ttl = find_min_ttl(resolved_ip, tls_client_hello)

with open("tls_client_hellos/fullhd720.com", 'rb') as fp:  
    tls_client_hello_correct_sni = fp.read()

for probe_ttl in range(1, min_ttl):  
    IP_PACKET, ACK = create_connection(resolved_ip)
    IP_PACKET.ttl ‚Ä¶</code></pre></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://iamkush.me/sni-airtel/">http://iamkush.me/sni-airtel/</a></em></p>]]>
            </description>
            <link>http://iamkush.me/sni-airtel/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24626388</guid>
            <pubDate>Tue, 29 Sep 2020 11:33:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Designing an accessible color palette with magic numbers]]>
            </title>
            <description>
<![CDATA[
Score 15 | Comments 12 (<a href="https://news.ycombinator.com/item?id=24624914">thread link</a>) | @darekkay
<br/>
September 29, 2020 | https://darekkay.com/blog/accessible-color-palette/ | <a href="https://web.archive.org/web/*/https://darekkay.com/blog/accessible-color-palette/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p>A low text contrast is the <a href="https://webaim.org/projects/million/" target="_blank" rel="noopener">most common accessibility issue</a>. 86% of the top 1,000,000 websites have at least one contrast ratio violation, which may lead to a bad user experience. Our favorite orange website isn‚Äôt leading by example, either. Some comments are almost unreadable:</p><figure><picture><img src="https://darekkay.com/blog/accessible-color-palette/hacker-news.png" srcset="https://darekkay.com/blog/accessible-color-palette/hacker-news.png, https://darekkay.com/blog/accessible-color-palette/hacker-news-2x.png 2x" alt="Insufficient contrast ratio on Hacker News"></picture><figcaption>Insufficient contrast ratio on Hacker News</figcaption></figure><p>There are various tools that help us <em>identify</em> and <em>fix</em> contrast ratio issues on our websites. This post presents an approach for designing and structuring color palettes so that we can prevent such issues <em>before</em> they arise: ‚Äúmagic numbers‚Äù.</p><h2 id="Which-contrast-ratio-is-accessible"><a href="#Which-contrast-ratio-is-accessible" title="Which contrast ratio is accessible?"></a>Which contrast ratio is accessible?</h2><p>How do we know whether the contrast ratio between a text and its background is sufficient? The <em>Web Content Accessibility Guidelines</em> (WCAG) <a href="https://www.w3.org/TR/WCAG20-TECHS/G18.html" target="_blank" rel="noopener">define</a> minimum required contrast ratios, based on colors, text properties (size, boldness) and conformance levels (AA vs. AAA):</p><figure><table><thead><tr><th></th><th>Level AA</th><th>Level AAA</th></tr></thead><tbody><tr><td><strong>small text</strong></td><td>4.5+</td><td>7+</td></tr><tr><td><strong>large text</strong></td><td>3+</td><td>4.5+</td></tr></tbody></table><figcaption>Minimum required contrast ratio values</figcaption></figure><p>Note: <em>large text</em> is defined as <em>19px+ bold</em> or <em>24px+ normal</em>.</p><p>As a rule of thumb, try to go for a <strong>4.5:1</strong> minimum contrast ratio, which will pass <strong>WCAG AA</strong> independent of the text size. This provides a good cost-value trade-off and is often the legal accessibility requirement.</p><p>Calculating the accessibility conformance manually is tedious. Instead, I suggest using a tool like <a href="https://contrast-ratio.com/" target="_blank" rel="noopener">contrast-ratio.com</a>. DevTools in <a href="https://developer.mozilla.org/en-US/docs/Tools/Accessibility_inspector#Color_contrast" target="_blank" rel="noopener">Firefox</a> and <a href="https://umaar.com/dev-tips/236-accessible-colour-suggestions/" target="_blank" rel="noopener">Chrome</a> provide great built-in browser support. Finally, <a href="https://github.com/dequelabs/axe-cli" target="_blank" rel="noopener">axe-core</a> will scan a website for all kinds of accessibility violations.</p><p>Those tools are a great way to find contrast ratio issues, but let me describe a technique to prevent them in the first place.</p><h2 id="Magic-numbers"><a href="#Magic-numbers" title="Magic numbers"></a>Magic numbers</h2><p>Most color palettes divide their colors into grades (e.g. <code>pink-10</code> ‚Ä¶ <code>pink-90</code>).</p><p>Let‚Äôs define a <em>difference between two color grades</em> as <strong>magic number</strong>, e.g.:</p><ul><li>Colors: <code>blue-80</code> and <code>orange-30</code></li><li>Magic number: <code>80 - 30</code> = <code>50</code></li></ul><p>What if we could find a magic number for the whole palette that ensures a sufficient color contrast between two colors? The first time I‚Äôve heard about this concept was in a <a href="https://pspeter3.com/blog/2020/02/19/accessible-contrast-shades/" target="_blank" rel="noopener">blog post</a> from Phips Peter. I‚Äôve learned about the <a href="https://designsystem.digital.gov/design-tokens/color/overview/" target="_blank" rel="noopener">U.S. Web Design System</a> and was immediately hooked. The color system provides the following magic numbers:</p><ul><li>A magic number of <strong>40+</strong> ensures a contrast ratio of <strong>3+</strong></li><li>A magic number of <strong>50+</strong> ensures a contrast ratio of <strong>4.5+</strong></li><li>A magic number of <strong>70+</strong> ensures a contrast ratio of <strong>7+</strong></li></ul><p>By looking at the color names, I know that <code>red-40</code> and <code>gray-90</code> (= <code>50</code>) will definitely pass <em>WCAG AA</em> (required contrast ratio <code>4.5+</code>), while <code>red-60</code> and <code>gray-90</code> (= <code>30</code>) will not. This leads to a <em>fantastic</em> designer/developer experience. I don‚Äôt have to use a contrast checker or look anything up to ensure a sufficient contrast ratio. A difference of 50 or more is all I care about.</p><h2 id="Calculating-magic-numbers-for-an-existing-color-palette"><a href="#Calculating-magic-numbers-for-an-existing-color-palette" title="Calculating magic numbers for an existing color palette"></a>Calculating magic numbers for an existing color palette</h2><p>Some libraries define their magic numbers in the documentation, but what about others?</p><p>I have written <a href="https://github.com/darekkay/a11y-contrast" target="_blank" rel="noopener">a11y-contrast</a> to calculate the magic numbers for any color palette that follows a grade naming pattern (e.g. <code>red-20</code>). This tool also finds all violations for any given magic number. This way you can prevent regression issues after adding or adjusting a color value.</p><figure><picture><img src="https://darekkay.com/blog/accessible-color-palette/a11y-contrast.png" srcset="https://darekkay.com/blog/accessible-color-palette/a11y-contrast.png, https://darekkay.com/blog/accessible-color-palette/a11y-contrast-2x.png 2x" alt="CLI output with magic numbers and a list of violations"></picture><figcaption>CLI output with magic numbers and a list of violations</figcaption></figure><p>I‚Äôve calculated the magic numbers for some common color palettes:</p><table><thead><tr><th></th><th>3+</th><th>4.5+</th><th>7+</th></tr></thead><tbody><tr><td><a href="https://designsystem.digital.gov/design-tokens/color/system-tokens/" target="_blank" rel="noopener">USWDS</a></td><td>40</td><td>50</td><td>70</td></tr><tr><td><a href="https://www.ibm.com/design/v1/language/resources/color-library/" target="_blank" rel="noopener">IBM v1</a></td><td>50</td><td>60</td><td>70</td></tr><tr><td><a href="https://github.com/carbon-design-system/carbon/tree/master/packages/colors" target="_blank" rel="noopener">IBM Carbon v2.1</a></td><td>50</td><td>50</td><td>70</td></tr><tr><td><a href="https://tailwindcss.com/docs/customizing-colors/#default-color-palette" target="_blank" rel="noopener">Tailwind v1</a></td><td>60</td><td>70</td><td>80</td></tr><tr><td><a href="https://github.com/tailwindlabs/tailwindcss/pull/2132" target="_blank" rel="noopener">Tailwind v2</a> (proposal)</td><td>50</td><td>60</td><td>80</td></tr><tr><td><a href="https://yeun.github.io/open-color/" target="_blank" rel="noopener">Open Color</a></td><td>-</td><td>-</td><td>-</td></tr></tbody></table><p>Here are my takeaways:</p><ul><li><strong>USWDS</strong> defines <em>by far</em> the most colors (461!), and yet it uses the smallest magic numbers. This leads to a much wider spectrum of allowed color combinations than any of the other color palettes I‚Äôve checked.</li><li><strong>Open color</strong> doesn‚Äôt have <em>any</em> magic numbers. This means I cannot reliably derive the contrast ratio from the color naming (e.g., <code>gray-90/red-20</code> is fine, but <code>red-90/red-20</code> is not).</li><li>Both <a href="https://github.com/uswds/uswds/issues/3329" target="_blank" rel="noopener">USWDS</a> and <a href="https://github.com/carbon-design-system/carbon/issues/6130" target="_blank" rel="noopener">IBM Carbon</a> previously contained minor violations, showing the importance of automatic tests.</li></ul><h2 id="Defining-luminance-bounds-with-fixed-magic-numbers"><a href="#Defining-luminance-bounds-with-fixed-magic-numbers" title="Defining luminance bounds with fixed magic numbers"></a>Defining luminance bounds with fixed magic numbers</h2><p>Predefined color palettes are great, but what if we want to change or add a color? What grade does a certain color map to?</p><p>Because the contrast ratio between two colors depends only on their <a href="https://www.w3.org/TR/WCAG20-TECHS/G17.html" target="_blank" rel="noopener">luminance values</a>, it is possible to create a mapping from a color to a grade between 0 and 100. For the USWDS color palette, here are the <a href="https://github.com/uswds/uswds/issues/3329#issuecomment-594762982" target="_blank" rel="noopener">luminance bounds</a>:</p><table><thead><tr><th>grade</th><th>min luminance (%)</th><th>max luminance (%)</th></tr></thead><tbody><tr><td>0</td><td>100</td><td>100</td></tr><tr><td>5</td><td>85</td><td>93</td></tr><tr><td>10</td><td>75</td><td>82</td></tr><tr><td>20</td><td>50</td><td>65</td></tr><tr><td>30</td><td>35</td><td>45</td></tr><tr><td>40</td><td>25</td><td>30</td></tr><tr><td>50</td><td>17.5</td><td>18.3</td></tr><tr><td>60</td><td>10</td><td>12.5</td></tr><tr><td>70</td><td>5</td><td>7</td></tr><tr><td>80</td><td>2</td><td>4</td></tr><tr><td>90</td><td>0.05</td><td>1.5</td></tr><tr><td>100</td><td>0</td><td>0</td></tr></tbody></table><p><a href="https://github.com/thisisdano" target="_blank" rel="noopener">Dan O. Williams</a> ‚Äî a USWDS maintainer ‚Äî optimized those values for <em>consistency</em> instead of <em>coverage</em>. This means there are more colors that don‚Äôt fit into <em>any</em> bound, even though they would technically pass the WCAG contrast ratio. While this setup is more constraining, I agree with the consistency benefits.</p><blockquote><p>It‚Äôs important that our color system be consistent and predictable, that users know what they‚Äôre getting when they choose a color of a certain grade. This makes us inclined to favor smaller, more equal ranges, and consistent spacing between ranges.</p></blockquote><p>If you want to calculate the luminance value and the potential USWDS grade of any color, check out my <a href="https://darekkay.com/dev/color-tools.html">Color Tools</a>.</p><picture><source type="image/webp" srcset="https://darekkay.com/blog/accessible-color-palette/color-palette.webp, https://darekkay.com/blog/accessible-color-palette/color-palette-2x.webp 2x"><img src="https://darekkay.com/blog/accessible-color-palette/color-palette.jpg" srcset="https://darekkay.com/blog/accessible-color-palette/color-palette.jpg, https://darekkay.com/blog/accessible-color-palette/color-palette-2x.jpg 2x" alt=""></picture><h2 id="Conclusion"><a href="#Conclusion" title="Conclusion"></a>Conclusion</h2><p>Let me summarize all the theory into some <strong>actionable advice</strong>. There are two ways to create an accessible color palette with <em>magic numbers</em>:</p><ol><li>Create a color palette first and calculate the magic numbers with <a href="https://github.com/darekkay/a11y-contrast" target="_blank" rel="noopener">a11y-contrast</a>. Depending on the colors, the magic numbers might be rather high or even non-existent (see Open Color).</li><li>Define luminance bounds with fixed magic numbers and use only colors that can be mapped. This approach is more constraining and requires more work, but the result is a future-proof and consistent color palette.</li></ol><p>If you don‚Äôt want to go through all the work, I suggest you try out the <a href="https://designsystem.digital.gov/design-tokens/color/system-tokens/" target="_blank" rel="noopener">USWDS color palette</a>.</p></div></div></div>]]>
            </description>
            <link>https://darekkay.com/blog/accessible-color-palette/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24624914</guid>
            <pubDate>Tue, 29 Sep 2020 07:09:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Fun Yet Effective Meetings]]>
            </title>
            <description>
<![CDATA[
Score 80 | Comments 42 (<a href="https://news.ycombinator.com/item?id=24624819">thread link</a>) | @thesnide
<br/>
September 28, 2020 | https://blog.pwkf.org/2020/09/27/we-should-only-have-fun-meetings.html | <a href="https://web.archive.org/web/*/https://blog.pwkf.org/2020/09/27/we-should-only-have-fun-meetings.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <blockquote>
  <p>‚ö†Ô∏è This article is extreme &amp; satirical on the purpose of being thought-provoking. Therefore, please, do take it with some grain of salt.</p>

  <p>This is a followup of my <a href="https://blog.pwkf.org/2020/09/26/remote-working-is-a-paradigm-shift.html">Remote-mostly working is a paradigm shift</a>.</p>
</blockquote>



<p>My #1 advice about distributed teams is actually even the case in colocated teams:
<strong>Try as hard as possible to avoid meetings, use textual IM instead</strong> as <a href="https://blog.codinghorror.com/meetings-where-work-goes-to-die/">meetings are where work goes to die</a>.
I know it sounds pretty dull, but if you really think about it you‚Äôll see that it‚Äôs usually wasted time.
The usual pattern of decision taking is:</p>

<div><div><pre><code>1. if you don‚Äôt have a clue, ask someone else.
2. to ask him, schedule a meeting
3. to schedule a meeting, you have to find a slot
4. that usually postpones the decision
</code></pre></div></div>

<p>Postponing the decision is usually what one really wants, even unknowingly: ‚Äú<em>to be able to have an excuse not to decide at once</em>‚Äù.</p>

<p>It‚Äôs a very very fair humane reaction, I also fell myself into that trap.</p>

<p><img src="https://blog.pwkf.org/assets/images/out-of-window.jpg" alt="Thrown out of the fence for proposing an textual chat"></p>



<p>I end up having the following workflow:</p>

<ul>
  <li>Avoid email loops. Those have too much overhead, and will divide your audience pretty quickly.</li>
  <li>Create a slack channel instead of the email loop. This will retain the whole conversation in 1 central place.</li>
  <li>Systematically push back on any meetings. Accept them only if you have a clear statement of who will drive it.</li>
  <li>
    <p>Meetings should be a broadcast mode. All the Q&amp;A should go back to the slack channel.</p>

    <ul>
      <li>Having everything searchable makes it super easy for
        <ul>
          <li>newcomers that can simply scroll back</li>
          <li>old timers such as me that forget and can also simply scroll back</li>
        </ul>
      </li>
      <li>
        <p>Even recorded meetings are a vast of time if you need to find an information, as it‚Äôs not indexed.</p>
      </li>
      <li>If not recorded, sending the minutes afterwards are usually a loss of information.
        <ul>
          <li>It‚Äôs still very important to extract ‚Äúexecutive summaries‚Äù from those meetings, even only textual. As can be posted on a public place for massive &amp; broad sharing.</li>
          <li>Yet, the real context on those summaries will be kept inside the whole meeting</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong>Context effectively fights Cargo Cult</strong></p>

  <p>Usually the why of decisions are not provided in a ‚Äú<a href="https://english.stackexchange.com/questions/120739/a-peek-into-the-sausage-factory">build the sausage</a>‚Äù manner. But after a while, the hypothesis of the decision are not true anymore, and therefore another decision has to be taken.</p>

  <p>This is not possible when loss of information occurs and that‚Äôs when <a href="https://en.wikipedia.org/wiki/Cargo_cult_programming">Cargo cult</a> begins to creep in.</p>
</blockquote>

<p>In a record-everything scenario, context switch is just a matter of reading back some previous messages. Otherwise you‚Äôll spend numerous times ‚Äúexplaining the context‚Äù in a meeting to everyone. And then everyone will just move to something else, and you‚Äôll have pitiful engagement, while still spending time on it.</p>

<p><strong>A company that use its time effectively, is a company that moves much faster than its competitors</strong>, no matter the skillsets in that company. Even if you have the brightest minds, if you waste their talents in boring activities, you‚Äôll dry them up. And either they‚Äôll leave, or worse, they <a href="https://www.sbnonline.com/article/the-quit-and-stay-syndrome-a-business-epidemic-thats-a-silent-profit-killer/">quit &amp; stay</a>.</p>

<blockquote>
  <p>üí° This enabled me to scale to a reasonable multitasking ability while curbing its overhead to a manageable level</p>
</blockquote>

<p><strong>That‚Äôs why ‚Äústartups‚Äù are so effective</strong> : they are small and therefore very fast. Being fast brings capacity to try &amp; fail, and therefore agility.</p>

<blockquote>
  <p>üí° <strong>time is the only really scarse resource in a company</strong> : you can‚Äôt buy it back, no matter the price.</p>
</blockquote>

<h2 id="why-you-should-only-have-fun-ones">Why you should only have fun ones</h2>

<p>That said, I do agree that travelling is necessary. But we should name the real usecase of travelling : having <em>fun</em> <strong>together</strong>.</p>

<p>The nicest part of that purpose is :</p>

<ul>
  <li>you can plan it far in advance</li>
  <li>you can also budget it in advance</li>
  <li>you can mentally map yourself in those fun times, and focus on actual work right now.</li>
</ul>



<p>The most used reason for meetings is ‚Äúalignments‚Äù, but it is very usually wasted as :</p>

<ul>
  <li>There‚Äôs always someone missing for that meeting</li>
  <li>No-one really wants to write the minutes out of it</li>
  <li>If written nonetheless, those minutes are only seldom capturing the <em>why</em> the decision is reached. Which is the most important part!</li>
</ul>

<p>The ‚Äú<em>there‚Äôs always someone missing from that meeting</em>‚Äù is the worst part, as usually, that is the one that says ‚Äúwhat you decided cannot be done‚Äù. And you‚Äôll end up with yet another round of thinking at best. At worst you‚Äôll try to shoehorn your precious alignment (that did sink a huge travel budget) into the needs of that missing person.</p>

<blockquote>
  <p>üí° We can draw a parallel to the paradigm shift I mentioned earlier:</p>
</blockquote>

<ul>
  <li><strong>F2F</strong> Meetings are the <strong>monolith</strong> way.</li>
  <li>Informal, dedicated &amp; <strong>textual meetings</strong> are the <strong>micro-services</strong> way.</li>
</ul>

<p>Now, one immediately notices the following:</p>

<ul>
  <li><strong>People are very much at ease with monoliths</strong>. It takes a huge mental leap to go micro-services.</li>
  <li><strong>Micro-services have an overhead</strong>. But no-one will argue that they can scale way better.</li>
  <li>Monoliths can seldomly be distributed the way micro-services can : you‚Äôll quickly end up with that infamous distributed monolith pattern.</li>
</ul>

<blockquote>
  <p>üí° Now, let‚Äôs travel only for ‚Äúteam building‚Äù purposes.</p>

  <p>You can plan them in advance, and you won‚Äôt have over-budget ones. As their outcome is predictable, and if there‚Äôs someone missing, it won‚Äôt jeopardy the whole travelling.</p>
</blockquote>

<p>A final word of caution, the reference to scaling is <strong>not about runtime performance</strong>. It‚Äôs more about <strong>organisation size</strong>. As Martin Fowler said : <em>don‚Äôt even consider microservices unless you have a system that‚Äôs too complex to manage as a monolith</em>.</p>

<p>So, it usually makes very much sense to start with a small, colocated team, that has traditional meetings. The trick is to recognize the need to change the paradigm when the team grows, as it always done smoothly over the months. Just don‚Äôt forget to have good meeting hygiene (written inputs &amp; outputs), as <strong>even monoliths should be nicely modular</strong>.</p>

<blockquote>
  <p>I posted those 2 articles (<a href="https://blog.pwkf.org/2020/09/26/remote-working-is-a-paradigm-shift.html">Remote-mostly working</a>, <a href="https://blog.pwkf.org/2020/09/27/we-should-only-have-fun-meetings.html">Effective Meetings</a>) internally to my company some years ago, but I‚Äôm republishing those publicly to help others the same way it helped us.</p>
</blockquote>

  </div>
</article>

      </div>
    </div></div>]]>
            </description>
            <link>https://blog.pwkf.org/2020/09/27/we-should-only-have-fun-meetings.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24624819</guid>
            <pubDate>Tue, 29 Sep 2020 06:54:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Blur attacks bypass Bluetooth Classic and BLE security mechanisms CVE-2020-15802]]>
            </title>
            <description>
<![CDATA[
Score 10 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24624206">thread link</a>) | @a5withtrrs
<br/>
September 28, 2020 | https://hexhive.epfl.ch/BLURtooth/ | <a href="https://web.archive.org/web/*/https://hexhive.epfl.ch/BLURtooth/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      
      
      

      <h2 id="blur-attacks">BLUR attacks</h2>

<p>BLURtooth (the BLUR attacks) exploits the lack of cross-transport key
validation, allowing an attacker to bypass Bluetooth Classic and Bluetooth Low
Energy security mechanisms.</p>

<p>Bluetooth‚Äôs cross-transport key derivation (CTKD) is vulnerable to attacks
enabling to attack Bluetooth Classic from Bluetooth Low Energy and vice versa.
A remote attacker in Bluetooth range may impersonate, man-in-the-middle, and
establish malicious sessions with arbitrary devices.</p>

<ul>
  <li><strong><em>Security Impact:</em></strong> device impersonation, man-in-the-middle, malicious
session establishment with arbitrary devices</li>
  <li><strong><em>Affected Devices:</em></strong> the attack is standard compliant, so all BT/BLE
devices supporting CTKD are likely vulnerable; all our tested devices are
vulnerable</li>
  <li>BLURtooth is tracked under <a href="https://kb.cert.org/vuls/id/589825">CVE-2020-15802</a></li>
  <li><strong><em>Credit:</em></strong> Daniele Antonioli and Mathias Payer
from √âcole Polytechnique F√©d√©rale de Lausanne (EPFL),
Nils Ole Tippenhauer from Helmholtz Center for Information Security (CISPA),
and Kasper Rasmussen from University of Oxford.</li>
  <li><strong><em>Contacts at EPFL:</em></strong>
<a href="mailto:daniele.antonioli@epfl.ch,mathias.payer@nebelwelt.net">Daniele Antonioli and Mathias Payer</a></li>
</ul>

<h2 id="summary">Summary</h2>

<p>Here, we provide more details about a set of novel and standard-compliant
Bluetooth vulnerabilities affecting both Bluetooth Classic (BT) and Bluetooth
Low Energy (BLE).  The uncovered vulnerabilities affect a security mechanism
called cross-transport key derivation (CTKD). CTKD is used to improve the
usability of Bluetooth pairing by allowing to generate BT and BLE pairing keys
just by pairing two devices either on BT or BLE (rather than pairing them two
times).</p>

<p>However, we find that CTKD introduces cross-transport security issues and that
an attacker can abuse those issues to attack BT from BLE and vice versa.  In
particular, our attacks enable to impersonate, man-in-the-middle, and establish
malicious sessions with arbitrary devices by abusing CTKD, while defeating all
the security mechanisms put in place by BT and BLE.  Our work is named BLURtooth
and the related attacks are called BLUR attacks as they blur the security
boundary between BT and BLE.</p>

<p>The team behind this work consists of
<a href="https://francozappa.github.io/">Daniele Antonioli</a>
and
<a href="https://nebelwelt.net/">Mathias Payer</a>
from the <a href="https://hexhive.epfl.ch/">HexHive group</a> at
√âcole Polytechnique F√©d√©rale de Lausanne (EPFL),
<a href="https://tippenhauer.de/">Nils Ole Tippenhauer</a>
from Helmholtz Center for Information Security (CISPA), and
<a href="https://www.cs.ox.ac.uk/people/kasper.rasmussen/">Kasper Rasmussen</a>
from the University of Oxford.</p>

<p>In the remainder of this document, we provide information on
technical details, disclosure, impact, our proposed mitigation, the response
from the Bluetooth SIG.</p>

<h2 id="technical-details">Technical Details</h2>

<p>The Bluetooth standard includes two technologies <em>Bluetooth Classic (BT)</em> (also
known as Bluetooth BR/EDR) and <em>Bluetooth Low Energy (BLE)</em>. The majority of
mobile devices, including laptops, smartphones, tablets, headphones, and
smartwatches, support both and are defined as <em>dual-mode</em> Bluetooth devices. To
securely use dual-mode devices over BT and BLE a user has to pair her devices
two times, once for BT and once for BLE. As pairing the same device is
considered <em>user-unfriendly</em>, in 2014, with the release of Bluetooth version
4.2, the Bluetooth standard introduced a security mechanism that allows a user
to pair dual-mode Bluetooth devices once (either over BT or BLE) and then
securely use them both over BT and BLE. This security mechanism is called
<em>cross-transport key derivation (CTKD)</em>, and, as the name implies, it enables
deriving pairing keys across different transports (i.e.  derive a BT pairing key
from BLE and vice versa).</p>

<p>Despite being a security-critical mechanism, CTKD is not part of the Bluetooth
threat model and there are no security evaluations of CTKD. Those reasons
motivated us to perform a security analysis of CTKD, resulting in our findings.
In particular, CTKD is affected by 5 major issues (i.e.  vulnerabilities)
enabling an attacker to abuse Bluetooth roles, association, security modes,
keys, and pairing states across BT and BLE. Such issues derive from the <em>lack of
a cross-transport threat model</em> in the Bluetooth standard. The standard
considers BT and BLE with separate threat models and security architectures
while, through CTKD, opens avenues for cross-transport attacks (i.e., attacks
that exploit BT by taking advantage of a vulnerability in BLE or vice versa).</p>

<p>We demonstrate that the identified CTKD issues can be exploited by a remote
attacker in Bluetooth range with the victims. In particular, the attacker can
perform impersonation, man-in-the-middle, and malicious session establishment
attacks while bypassing all the security mechanisms provided by BT and BLE
(including Secure Connections or strong association).  Those are very serious
attacks that violate the security guarantees promised by Bluetooth.  We
confirmed the feasibility of our attacks by testing them on 13 common Bluetooth
devices using 10 unique Bluetooth chips. All of them were vulnerable.</p>

<p>You will find technical details about CTKD, our security analysis, a detailed
discussion of the threads, a discussion, and potential mitigations in our
<a href="https://arxiv.org/abs/2009.11776">BLURtooth preprint</a>.</p>

<h2 id="disclosure">Disclosure</h2>

<p>We discovered the vulnerability in March 2020 and responsibly disclosed our
findings along with suggested countermeasures to the Bluetooth SIG in May 2020.
We kept our findings private and the Bluetooth SIG publicly disclosed them,
without informing us, on the 10th of September of 2020.  Our work is assigned
<em><a href="https://kb.cert.org/vuls/id/589825">CVE-2020-15802</a></em>.</p>

<h2 id="impact">Impact</h2>

<p>The BLUR attacks are a <em>significant threat for all Bluetooth users and
the related vulnerabilities remain 0-days</em>. Our claim
is backed up by our experimental results where we successfully conducted
impersonation, man-in-the-middle, and malicious sessions establishment attacks
on 13 different devices. Our device sample include manufacturers such as
Dell, Google, Lenovo, Samsung, and Sony, operating systems, such as Windows
10, Linux, and Android, and Bluetooth chip manufacturers such as Cypress,
Qualcomm, Intel, Broadcom, and Cambridge Silicon Radio (CSR).</p>

<h2 id="our-mitigations">Our Mitigations</h2>

<p>As part of our disclosure, we provided <em>concrete fixes to combat the BLUR
attacks</em>. In particular, we recommended disabling the capability to overwrite
keys via CTKD in certain circumstances, enforce strong association and Secure
Connections and roles across BT and BLE, disable pairing over BT and/or BLE when
not needed, and add user notifications in case of odd behaviors. Our fixes can
be implemented at the standard level and do not require vendor-specific
features.</p>

<h2 id="response-from-the-bluetooth-sig">Response from the Bluetooth SIG</h2>

<p>At the time of writing, there are <em>no deployed patches</em> to address the BLUR
attacks on actual devices.  The Bluetooth SIG suggested that version 5.1 of the
standard will contain guidelines to mitigate the BLUR attacks (e.g., disable key
overwrites in certain circumstances as proposed in our countermeasures), but
such guidelines are not (yet) public and we cannot comment on them.  The
Bluetooth SIG provides a <a href="https://www.bluetooth.com/learn-about-bluetooth/bluetooth-technology/bluetooth-security/blurtooth/">public statement about BLURtooth and the BLUR
attacks</a>.</p>


      
    </div></div>]]>
            </description>
            <link>https://hexhive.epfl.ch/BLURtooth/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24624206</guid>
            <pubDate>Tue, 29 Sep 2020 04:43:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[City of Amsterdam‚Äôs Algorithm Register]]>
            </title>
            <description>
<![CDATA[
Score 101 | Comments 20 (<a href="https://news.ycombinator.com/item?id=24623639">thread link</a>) | @cpeterso
<br/>
September 28, 2020 | https://algoritmeregister.amsterdam.nl/en/ai-register/ | <a href="https://web.archive.org/web/*/https://algoritmeregister.amsterdam.nl/en/ai-register/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-pm="normal" data-desktopportraitmargin="5|*|0|*|65|*|0|*|px+" data-tabletportraitmargin="0|*|0|*|0|*|0|*|px+" data-mobileportraitmargin="-20|*|0|*|0|*|0|*|px+" data-desktopportraitheight="0" data-has-maxwidth="1" data-desktopportraitmaxwidth="520" data-tabletportraitmaxwidth="430" data-mobileportraitmaxwidth="295" data-cssselfalign="inherit" data-desktopportraitselfalign="inherit" data-sstype="layer" data-rotation="0" data-desktopportrait="1" data-desktoplandscape="1" data-tabletportrait="1" data-tabletlandscape="1" data-mobileportrait="1" data-mobilelandscape="1" data-adaptivefont="0" data-desktopportraitfontsize="100" data-tabletportraitfontsize="90" data-mobileportraitfontsize="120" data-plugin="rendered"><div><p><br>The Algorithm Register is an overview of the artificial intelligence systems and algorithms used by the City of Amsterdam. Through the register, you can get acquainted with the quick overviews of the city's algorithmic systems or examine their more detailed information based on your own interests. You can also give feedback and thus participate in building human-centered algorithms in Amsterdam. The register is still under development.</p></div></div></div>]]>
            </description>
            <link>https://algoritmeregister.amsterdam.nl/en/ai-register/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24623639</guid>
            <pubDate>Tue, 29 Sep 2020 02:27:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[OpenBSD on the Desktop (Part I)]]>
            </title>
            <description>
<![CDATA[
Score 85 | Comments 49 (<a href="https://news.ycombinator.com/item?id=24622788">thread link</a>) | @upofadown
<br/>
September 28, 2020 | https://paedubucher.ch/articles/2020-09-05-openbsd-on-the-desktop-part-i.html | <a href="https://web.archive.org/web/*/https://paedubucher.ch/articles/2020-09-05-openbsd-on-the-desktop-part-i.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Let's install OpenBSD on a Lenovo Thinkpad X270. I used this computer for my
computer science studies. It has both Arch Linux and Windows 10 installed as
dual boot. Now that I'm no longer required to run Windows, I can ditch the dual
boot and install an operating system of my choice.</p>

<p>First, I grab my work Thinkpad running Arch Linux and some USB dongle big enough
for the <a href="https://cdn.openbsd.org/pub/OpenBSD/6.7/amd64/miniroot67.fs">amd64 miniroot
image</a> (roughly
five megabytes, that is). This small image does not include the file sets, which
will be downloaded during installation instead. I also download the <a href="https://mirror.ungleich.ch/pub/OpenBSD/6.7/amd64/SHA256">SHA256
checksums</a> from the
Swiss mirror, and verify the downloaded image, before I copy it on my dongle:</p>
<pre><code>$ sha256sum -c --ignore-missing SHA256 
miniroot67.fs: OK
$ sudo dd if=miniroot67.fs of=/dev/sda bs=1M
</code></pre>

<p>The Thinkpad X270 is connected to my network through Ethernet. The WiFi firmware
usually needs to be installed separately, so only Ethernet will work out of the
box. The BIOS has UEFI activated. OpenBSD and UEFI has issues on older hardware
(at least on a 2014 Dell laptop I have), but let's try it on this laptop,
anyway.</p>
<p>I plug in the dongle prepared before, and start the computer. I interrupt
the regular boot with Enter and pick an alternative boot method by pressing F12.
Now I pick my USB dongle. After roughly a minute, the installer has been
started. Now I follow these steps:</p>
<ul>
<li>I choose the option <code>I</code> to install OpenBSD.</li>
<li>For the keyboard layout, I pick <code>sg</code>, for Swiss German.</li>
<li>As a hostname, I simply pick <code>x270</code>, because it's a Thinkpad X270, and I'm not
  very creative when it comes to naming things.</li>
<li>From the available network options (<code>iwm0</code>: WiFi, <code>em0</code>: Ethernet, and
  <code>vlan0</code>: Virtual LAN), I pick <code>em0</code>.</li>
<li>I try to get an IPv4 address over DHCP, which seems to work very quickly.</li>
<li>Next, I type in my very secret root password twice.</li>
<li>I do <em>not</em> start <code>sshd</code> by default, because I don't need to connect to this
  machine through SSH. It's supposed to be a workstation, not a server.</li>
<li>The X Window System should not be started by <code>xnodm(1)</code>, so I leave it to
  <code>no</code>.</li>
<li>Neither do I want to change the default to <code>com0</code>.</li>
<li>I set up my user <code>patrick</code> with my proper name <code>Patrick Bucher</code>, and a decent
  password.</li>
<li>The time zone has been detected properly as <code>Europe/Zurich</code>, which I just
  leave the way it is.</li>
<li>The installer detected two disks: <code>sd0</code> and <code>sd1</code>. Since <code>sd0</code> is the detected
  SSD in my laptop, the UEFI issue from my Dell laptop doesn't exist on this
  computer. I pick <code>sd0</code> for the root disk, since <code>sd1</code> is my USB dongle.</li>
<li>I choose to use the whole disk with a GPT partitioning schema, because it's
  2020.</li>
<li>An auto-allocated layout for <code>sd0</code> is presented. It looks decent to me, so I
  just go with that auto layout.</li>
<li>I don't want to initialize another disk, so I just press Enter (<code>done</code>).</li>
<li>Since the miniroot image does not come with the file sets, I pick <code>http</code> as
  the location for the sets.</li>
<li>I don't use a proxy, and use the mirror <code>mirrog.ungleich.ch</code> and the server
  directory <code>pub/OpenBSD/6.7/amd64</code> as proposed.</li>
<li>Next, I unselect the game sets by entering <code>-game*</code>. (I heard that they're not
  much fun to play.) I leave all the other sets activated, including the <code>x</code>
  sets, which will be required for the GUI later on.</li>
<li>After those sets are installed, I press Enter (<code>done</code>). Now the installer
  performs various tasks, after which I choose to <code>halt</code> the computer. This
  gives me time to remove the USB dongle.</li>
</ul>

<p>I now restart my laptop, and OpenBSD boots. This takes more time than booting
Arch Linux, which uses <code>systemd</code>, whereas OpenBSD uses <code>rc</code>, which performs the
startup tasks sequentially.</p>
<p>There's a message showing up that various firmware (<code>intel-firmware</code>,
<code>iwm-firmware</code>, <code>inteldrm-firmware</code>, <code>uvideo-firmware</code>, and <code>vmm-firmware</code>) has
been installed automatically. Very nice, indeed.</p>
<h2>WiFi Connection</h2>
<p>Now that the <code>iwm-firmware</code> has been installed, I can connect right away to my
WiFi network <code>frzbxpdb5</code>. I create a file called <code>/etc/hostname.iwm0</code>, wich
<code>hostname</code> being a literal string, and <code>iwm0</code> being the WiFi network card. The
connection to my WiFi network consists of a single line:</p>
<pre><code>dhcp nwid frzbxpdb5 wpakey [my-wpakey]
</code></pre>
<p>Whereas <code>frzbxpdb5</code> is my WiFi network's ESSID, and <code>[my-wpakey]</code> needs to be
replaced by the actual WPA key.</p>
<p>Then the networking can be restarted for that device:</p>
<pre><code># sh /etc/netstart iwm0
</code></pre>
<p>This script is kind enough to set the file permissions of <code>/etc/hostname.iwm0</code>
to <code>640</code>, and then connects to my WiFi network.</p>
<p>I unplug the Ethernet cable and <code>ping openbsd.org</code>, which works fine, even after
a restart.</p>

<p>My GUI on Unix-like systems is based on the Dynamic Window Manager (<code>dwm</code>) and a
couple of other tools, such as <code>dmenu</code>, <code>st</code>, <code>slstatus</code>, <code>slock</code>, all created and
maintained by the <a href="http://suckless.org/">Suckless</a> community.</p>
<p>This software doesn't come with configuration facilities, but needs to be
configured in the respective C header file <code>config.h</code>, and then re-compiled.
Even though OpenBSD offers <code>dwm</code> as a package, customizing and configuring that
window manager requires to build it from source.</p>
<h2>Building <code>dwm</code> and Friends</h2>
<p>First, I need to install <code>git</code> to fetch the source code:</p>
<pre><code># pkg_add git
</code></pre>
<p>Then I fetch the source code for <code>dwm</code>, <code>dmenu</code>, <code>st</code>, and <code>slstatus</code> from <a href="http://suckless.org/">Suckless</a>:</p>
<pre><code>$ git clone https://git.suckless.org/dwm
$ git clone https://git.suckless.org/dmenu
$ git clone https://git.suckless.org/st
$ git clone https://git.suckless.org/slstatus
</code></pre>
<h3>Building <code>dwm</code></h3>
<p>Next, I try to build <code>dwm</code>:</p>
<pre><code>$ cd dwm
$ make
</code></pre>
<p>This fails with an error message (<code>'ft2build.h' file not found</code>), which reminds
me of building <code>dwm</code> on FreeBSD roughly a month before. Since I can finde the
header file at another location:</p>
<pre><code># find / -type f -name ft2build.h
/usr/X11R6/include/freetype2/ft2build.h
</code></pre>
<p>I simply can modify the <code>config.mk</code> accordingly by changing</p>
<pre><code>FREETYPEINC = /usr/include/freetype2
</code></pre>
<p>to</p>
<pre><code>FREETYPEINC = $(X11INC}/freetype2
</code></pre>
<p>Actually, I only need to comment the above line, and uncomment the line below</p>
<pre><code># OpenBSD (uncomment)
</code></pre>
<p>The Suckless folks obviously are friendly towards OpenBSD, which is also
noticable in other places (more evidence to be shown further below).</p>
<p>The next compilation attempt succeeds:</p>
<pre><code>$ make
</code></pre>
<p>So let's install <code>dwm</code>, too:</p>
<pre><code># make install
</code></pre>
<p>By default, and as to be seen in <code>config.h</code>, the keyboard combination
<code>[Alt]+[Shift]+[Enter]</code> (deeply engraved into the muscle memories of many <code>dwm</code>
users) starts the <code>st</code> terminal. This will be built in a while. However, I
prefer to use the <em>Super</em> or <em>Windows</em> key instead of <code>Alt</code>, since the former
is of no use in OpenBSD, and the latter still comes in handy when working with
the emacs readline mode. Therefore, I change the <code>MODKEY</code> from</p>
<pre><code>#define MODKEY Mod1Mask
</code></pre>
<p>to</p>
<pre><code>#define MODKEY Mod4Mask
</code></pre>
<p>Then I rebuild and reinstall <code>dwm</code>:</p>
<pre><code># make install
</code></pre>
<h3>Building <code>st</code></h3>
<p>Let's switch over to the <code>st</code> source directory and just try to compile it:</p>
<pre><code>$ cd ../st
$ make
</code></pre>
<p>Here, we get a warning that the function <code>pledge</code> (an OpenBSD mitigation, which
is built into the <code>master</code> branch, but surrounded by an <code>ifdef</code> preprocessor
statement, so that it will only be compiled for OpenBSD) is imported implicitly.
Let's just ignore this warning for now.</p>
<p>What's worse, the compilation fails with the error message:</p>
<pre><code>ld: error: unable to find library -lrt
</code></pre>
<p>Here, the FAQ comes in handy, stating that</p>
<pre><code>If you want to compile st for OpenBSD you have to remove -lrt from
config.mk, ...
</code></pre>
<p>Having done so in <code>config.mk</code>, <code>st</code> compiles without any further issues, and,
thus, can be rebuilt and installed:</p>
<pre><code># make install
</code></pre>
<h3>Building <code>dmenu</code></h3>
<p>Even OpenBSD users with Suckless tools have to open another GUI application than
a terminal emulator once in a while. For this purpose, Suckless offers <code>dmenu</code>.
Let's switch over to it and compile it:</p>
<pre><code>$ cd ../dmenu
$ make
</code></pre>
<p>Again, we have the issue with <code>ft2build.h</code>, which can be resolved as above with
<code>dwm</code>: by using the proper path for <code>FREETYPEINC</code> in <code>config.mk</code>. Afterwards,
the build succeeds, and <code>dmenu</code> can be installed:</p>
<pre><code># make install
</code></pre>
<h3>Building <code>slstatus</code></h3>
<p><code>dwm</code> has a status bar on the top right, which can be used to show various
information. I used to write some shell commands in <code>.xinitrc</code> to compose such a
status line, and then set it by <code>xset -b</code> once every five seconds or so. This
approach generates a multitude of processes every couple of seconds.</p>
<p><code>slstatus</code> is a C programm that is capable of showing various kinds of more or
less useful information. Let's switch over to <code>slstatus</code> and see, what is
available in <code>config.def.h</code>:</p>
<pre><code>$ cd ../slstatus
$ less config.def.h
</code></pre>
<p>The comments section lists different functions (<code>battery_perc</code> for the battery
percentage, <code>datetime</code> for date and time information, <code>temp</code> for thermal
information, etc.). I usually display the CPU load, the battery percentage, the
memory usage, the current keyboard layout, and the current date and time.</p>
<p>Before configuring those, let's try to compile <code>slstatus</code>:</p>
<pre><code>$ make
</code></pre>
<p>This worked fine, so let's configure the information to be displayed in
<code>config.h</code>:</p>
<pre><code>static const struct arg args[] = {
    /* function    format    argument */
    { datetime,    "%s",     "%F %T" },
};
</code></pre>
<p>This renders the current date as follows:</p>
<pre><code>$ date +"%F %T"
2020-09-05 19:26:38
</code></pre>
<p>I also like to have the weekday included, but not the seconds, so I define a
different argument string:</p>
<pre><code>$ date +"%a %Y-%m-%d %H:%M"
Sat 2020-09-05 19:27
</code></pre>
<p>That's better, so let's use it in <code>config.h</code> (surrounded with some spaces in the
format string):</p>
<pre><code>static const struct arg args[] = {
    /* function    format    argument */
    { datetime,    " %s ",   "%a %Y-%m-%d %H:%M" },
};
</code></pre>
<p>The other settings I like to have do not require any arguments, at least not on
OpenBSD, so I only need to define a decent format string (with <code>|</code> as a
seperator) for those:</p>
<pre><code>static const struct arg args[] = {
    /* function    format           argument */
    { cpu_perc,     " cpu: %s%% |", NULL },
    { battery_perc, " bat: %s%% |", NULL },
    { ram_used,     " mem: %s |",   NULL },
    { keymap,       " %s |"         NULL },
    { datetime,     " %s ",         "%a %Y-%m-%d %H:%M" },
};
</code></pre>
<p>This actually compiles, so let's install it:</p>
<pre><code># make install
</code></pre>
<h2>Configuring X Startup</h2>
<p>Now that all software is compiled and installed, let's run X. To do so, a file
<code>.xinitrc</code> in the user's directory is ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://paedubucher.ch/articles/2020-09-05-openbsd-on-the-desktop-part-i.html">https://paedubucher.ch/articles/2020-09-05-openbsd-on-the-desktop-part-i.html</a></em></p>]]>
            </description>
            <link>https://paedubucher.ch/articles/2020-09-05-openbsd-on-the-desktop-part-i.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24622788</guid>
            <pubDate>Tue, 29 Sep 2020 00:23:20 GMT</pubDate>
        </item>
    </channel>
</rss>
