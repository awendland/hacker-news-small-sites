<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 5]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 5. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Wed, 04 Nov 2020 12:25:49 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-5.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Wed, 04 Nov 2020 12:25:49 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[Finding hardcoded keys and Secrets in Mobile Apps for fun and profit]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24966263">thread link</a>) | @alaeddine
<br/>
November 2, 2020 | https://blog.ostorlab.co/hardcoded-secrets.html | <a href="https://web.archive.org/web/*/https://blog.ostorlab.co/hardcoded-secrets.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <p>Hardcoded secret keys are a convenient target to Bug Bounty hunters and Attackers. They are easy to spot and they can
open a wide gate to sensitive data and privileged access.</p>
<p>Hardcoded secrets caused several high profile breaches in the past, notable ones are:</p>
<ul>
<li>
<p><strong>MyCar</strong>: MyCar is a vehicle telematics systems. The maker  left hardcoded credentials inside its Android and iOS
mobile apps. This left tens of thousands of cars vulnerable to hackers, who could locate car, identify them, unlock them,
start the car or trigger the alarm.</p>
</li>
<li>
<p><strong>Uber</strong>: An Uber employee published plaintext credentials within source code that was then posted on Github. 
An attacker found the embedded credentials on GitHub, then used them to gain privileged access on Uber‚Äôs Amazon
AWS Instances. The attacker then demanded a 100k$ ransom, that Uber did pay.
 The Uber breach resulted in the exposure of information of 57 million customers, plus roughly 600,000 drivers. Once the
 story became public, Uber paid a settlement of 148M$ and had to delay its IPO.</p>
</li>
<li>
<p><strong>Uniguest</strong>: Uniguest provides kiosks (PC, iMac, tablet) available in hotel lobbies (and other places). User can use
them to run simple tasks, such as browsing the web or printing boarding passes.
The API credentials were hardcoded within the application and were used to dump all the data in the Uniguest
cloud database. The data included admin credentials, router and BIOS passwords, product keys and various other sensitive information.</p>
</li>
</ul>
<p>Hardcoded secrets are also commonly reported by Bug Bounty hunters. If you check any of the different Bug Bounty programs, you will
find many disclosed reports pointing to the hardcoded keys in the <code>AndroidManifest.xml</code>, <code>Info.plist</code> or some resource file. </p>
<p>Depending on the permissions and use of the key, these vulnerabilities might be awarded up to 1k$. The severity ranges from
elevating privileges, accessing sensitive information, over-bill/theft of a service or conducting a denial of service attack.</p>
<h2>How to find and validate secrets?</h2>
<p>Secrets can be found either statically or dynamically. A common static approach is to search known patterns, for instance
searching for strings matching the following regular expression <code>AIza[0-9A-Za-z\\-_]{35}</code>:</p>
<div><pre><span></span><code>$ app8 egrep -r <span>'AIza[0-9A-Za-z\\-_]{35}'</span> . 
Binary file ./resources.arsc correspondant
Binary file ./app.apk correspondant
Binary file ./classes.dex correspondant                                
./assets/google-services-desktop.json:          <span>"current_key"</span>: <span>"AIzaSy....................."</span>
</code></pre></div>
<p>You can find in this repo <a href="https://github.com/l4yton/RegHex">l4yton/RegHex</a> a list of regular expressions to use.</p>
<p>Because not all API keys and secrets are bad or dangerous, and not all pattern outputs are correct; the keys must be checked and the
permissions, roles, scopes, and restrictions (more on that latter) must be enumerated and verified.
<code>streaak</code> published a repo <a href="https://github.com/streaak/keyhacks">streaak/keyhacks</a> listing <code>curl</code> commands to check a wide range of keys.</p>
<p>Below are some examples for Firebase keys and Facebook secrets:</p>
<div><pre><span></span><code>$ curl -s -X POST --header <span>"Authorization: key=AIzaS........."</span> --header <span>"Content-Type:application/json"</span> <span>'https://fcm.googleapis.com/fcm/send'</span> -d <span>'{"registration_ids":["1"]}'</span>
&lt;HTML&gt;
&lt;HEAD&gt;
&lt;TITLE&gt;INVALID_KEY_TYPE&lt;/TITLE&gt;
&lt;/HEAD&gt;
&lt;BODY <span>BGCOLOR</span><span>=</span><span>"#FFFFFF"</span> <span>TEXT</span><span>=</span><span>"#000000"</span>&gt;
&lt;H1&gt;INVALID_KEY_TYPE&lt;/H1&gt;
&lt;H2&gt;Error <span>401</span>&lt;/H2&gt;
&lt;/BODY&gt;
&lt;/HTML&gt;
</code></pre></div>
<div><pre><span></span><code>$ curl https://graph.facebook.com/oauth/access_token<span>\?</span>client_id<span>\=</span>51XXXX<span>\&amp;</span>client_secret<span>\=</span>0cbd4XXXXX<span>\&amp;</span>redirect_uri<span>\=\&amp;</span>grant_type<span>\=</span>client_credentials
<span>{</span><span>"access_token"</span>:<span>"5181XXXXXXXXXXXXXX"</span>,<span>"token_type"</span>:<span>"bearer"</span><span>}</span>% 
</code></pre></div>
<p>Once a key is found, the API documentation should be your best-friend to determine what permissions does it have and what
sort of actions can be performed. Take for instance instance a facebook application, you can then use the <code>https://graph.facebook.com/v8.0/{applicationId}/permissions</code> endpoint to list permissions:</p>
<div><pre><span></span><code>$ curl <span>"https://graph.facebook.com/v8.0/51XXXXXXXX/permissions?access_token=51XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span>
<span>{</span><span>"data"</span>:<span>[{</span><span>"permission"</span>:<span>"email"</span>,<span>"status"</span>:<span>"live"</span><span>}</span>,<span>{</span><span>"permission"</span>:<span>"pages_show_list"</span>,<span>"status"</span>:<span>"live"</span><span>}</span>,<span>{</span><span>"permission"</span>:<span>"pages_messaging"</span>,<span>"status"</span>:<span>"live"</span><span>}</span>,<span>{</span><span>"permission"</span>:<span>"groups_show_list"</span>,<span>"status"</span>:<span>"live"</span><span>}</span>,<span>{</span><span>"permission"</span>:<span>"pages_read_engagement"</span>,<span>"status"</span>:<span>"live"</span><span>}</span>,<span>{</span><span>"permission"</span>:<span>"public_profile"</span>,<span>"status"</span>:<span>"live"</span><span>}]}</span>%   
</code></pre></div>
<p>Another CLI friendly tool is Yelp's <code>detect-secret</code>: <a href="https://github.com/Yelp/detect-secrets">Yelp/detect-secrets</a>.
The tool detects a smaller subset of keys and implements validation for some a well.</p>
<p>Ostorlab automates the process of finding and checking keys and secrets and covers 53 secret types at time this article is written. 
A secret agent collects keys matching patterns or used dynamically by specific APIs or intercepted over the wire. The agent
then checks these keys to confirm if valid by iterating over all known services. </p>
<p>This a screenshot showing an example confirming a valid key and the matching service**.</p>
<p><img alt="Hardcoded secrets" src="https://blog.ostorlab.co/static/img/hardcoded_secret_keys/secret_finding.png" title="Ostorlab's report: Hardcoded Secret"></p>
<p>Just out of the last 10k apps scanned, we have reported over 200 valid secrets granting access to highly sensitive data
or critical services, like Payment or Source Code. Below are some statistics of the number of keys found per service:</p>
<table>
<thead>
<tr>
<th>Service Name</th>
<th>Count</th>
</tr>
</thead>
<tbody>
<tr>
<td>Firebase</td>
<td>35/1000</td>
</tr>
<tr>
<td>Google Cloud Platform</td>
<td>31/1000</td>
</tr>
<tr>
<td>Twitter</td>
<td>22/1000</td>
</tr>
<tr>
<td>Facebook</td>
<td>21/1000</td>
</tr>
<tr>
<td>Instagram</td>
<td>18/1000</td>
</tr>
<tr>
<td>AWS</td>
<td>18/1000</td>
</tr>
<tr>
<td>GitHub</td>
<td>14/1000</td>
</tr>
<tr>
<td>PayPal</td>
<td>5/1000</td>
</tr>
<tr>
<td>slack</td>
<td>1/1000</td>
</tr>
</tbody>
</table>
<h2>How to fix it?</h2>
<ul>
<li><strong>Embedding is Acceptable, nothing to do here</strong>: Most services provide best practices for how to use the API or secret. Some APIs are acceptable if embedded in an application. Firebase is an example:</li>
</ul>
<div><pre><span></span><code>Unlike how API keys are typically used, API keys for Firebase services are not used to control access to backend resources; 
that can only be done with Firebase Security Rules. 
Usually, you need to fastidiously guard API keys (for example, by using a vault service or setting the keys as environment variables); 
however, API keys for Firebase services are ok to include in code or checked-in config files.
</code></pre></div>
<ul>
<li><strong>Alternatives are encouraged, I should switch</strong>: Some services offer more secure alternatives to embedding credentials (such as Amazon and Google, example from <a href="https://docs.aws.amazon.com/general/latest/gr/aws-access-keys-best-practices.html">AWS recommendation</a>):</li>
</ul>
<div><pre><span></span><code>You have a mobile app. Do not embed access keys with the app, even in encrypted storage. 
Instead, use Amazon Cognito to manage user identities in your app. This service lets you authenticate users using Login with Amazon, Facebook, Google, or any OpenID Connect (OIDC)‚Äìcompatible identity provider. 
You can then use the Amazon Cognito credentials provider to manage credentials that your app uses to make requests to AWS. For more information, see Using the Amazon Cognito Credentials Provider on the AWS Mobile Blog. 
</code></pre></div>
<ul>
<li><strong>Embedding is Dangerous, delegate the actions to the Server</strong>: For some services, embedding keys is an invitation to get hacked, see for instance <a href="https://stripe.com/docs/keys#safe-keys">Stripe documentation</a>. In these cases, having the server must perform the interaction with the service.</li>
</ul>
<div><pre><span></span><code>Your secret API key can be used to make any API call on behalf of your account, such as creating charges or performing refunds. 
Treat your secret API key as you would any other password. Grant access only to those who need it. 
Ensure it is kept out of any version control system you may be using. 
Control access to your key using a password manager or secrets management service.

In live mode, new secret keys are only visible the first time you access them. 
After that, the Dashboard redacts the API key. When the key is revealed, you can leave a note on the Dashboard describing the location on your own systems where you‚Äôve copied it. 
If you lose your secret key, you can‚Äôt recover it from the Dashboard and must roll the key or create another one.
</code></pre></div>
<ul>
<li><strong>Hardening through Remote Key fetching and Key Pinning</strong>: For services that don't provide a per-user authentication service, and
need to be embedded in the application, it‚Äôs recommended to retrieve the
key from the server. It is also best practice to restrict the key's permissions (principle of least privilege).
Some service provide the possibility to PIN keys to an application or domain name. Because this 
protection is not perfect, rotating the keys is recommended to limit exposure.</li>
</ul>
<p><img alt="API Restrictions" src="https://blog.ostorlab.co/static/img/hardcoded_secret_keys/restrictions.png" title="API Restrictions"></p>
    </div></div>]]>
            </description>
            <link>https://blog.ostorlab.co/hardcoded-secrets.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24966263</guid>
            <pubDate>Mon, 02 Nov 2020 09:45:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Build a Collaborative Chatbot with Google Sheets and TensorFlow]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 1 (<a href="https://news.ycombinator.com/item?id=24966013">thread link</a>) | @jonathanbgn
<br/>
November 2, 2020 | https://jonathanbgn.com/nlp/2020/09/29/chatbot-universal-sentence-encoder.html | <a href="https://web.archive.org/web/*/https://jonathanbgn.com/nlp/2020/09/29/chatbot-universal-sentence-encoder.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p><img src="https://jonathanbgn.com/assets/images/taipei.jpg" alt="Taipei"></p>

<p>Currently living in Taiwan, I recently joined the <a href="https://github.com/taiwangoldcard/taiwan-bot">Taiwan Bot ü§ñ</a> project along with <a href="https://www.linkedin.com/in/shawn-lim-0a307550">Shawn</a> and <a href="https://erickhun.com/about/">Eric</a>. The idea is to build a go-to assistant to help foreigners answer their questions about moving to, working, and living in Taiwan (pro-tip: ask the bot where to find cheese or chocolate).</p>

<p>Building a functional and useful chatbot is a non-trivial project. Fortunately, there has been impressive progress in the fields of machine learning and <strong>natural language processing (NLP)</strong> in the past few years. Moreover, the democratization and open-source sharing of cutting-edge deep learning models from research work at large tech companies like Google or Facebook is making it possible for anyone to implement the latest state-of-the-art solutions.</p>

<p>The <a href="https://ai.googleblog.com/2018/05/advances-in-semantic-textual-similarity.html">Universal Sentence Encoder</a>, recently released by Google AI, is one of these new models available via <a href="https://tfhub.dev/google/universal-sentence-encoder/4">Tensorflow Hub</a>. Trained in a <strong>multi-tasking</strong> fashion, the model can encode sentences into meaningful continuous representations that work well on a range of different tasks. It is thus ideal for <strong>transfer learning</strong> and performs competitively with more complex models like <a href="https://en.wikipedia.org/wiki/BERT_(language_model)">BERT</a>. Moreover, it can run much faster than BERT or other similar <a href="https://en.wikipedia.org/wiki/Transformer_(machine_learning_model)">Transformer</a> models and is thus more applicable to real-world problems. There is even a <a href="https://tfhub.dev/google/universal-sentence-encoder-lite/2">Lite version</a> of the model, small enough to run in Javascript on the client-side.</p>

<h2 id="the-project">The project</h2>

<p>Despite being an amazing place to live, <strong>Taiwan is still misunderstood by most foreigners</strong>. We think that a fun and approachable chatbot could help people understand a lot more about all the great things this place has to offer, as well as answer most of the questions they might have about living here.</p>

<p>We decided to start with a limited scope first and to focus on answering practical questions about moving to and living in Taiwan. Specifically, we chose to focus on visa issues and the recently created <a href="https://taiwangoldcard.com/">Gold Card program</a>. We plan to expand the bot capabilities in future versions.</p>

<p>When it comes to chatbots, there are a lot of ways to go, and many tools and libraries out there to help you make your plan a reality. However, being just a small team of 3 doing this in our spare time, we didn‚Äôt have enough resources and time to build something very sophisticated. We also didn‚Äôt want to spend a lot of time to compile a large training dataset. So we looked for the best way to build a system that would be:</p>

<ul>
  <li>üß© Easy and quick to build</li>
  <li>‚ö°Ô∏è Lightweight and runnable on a small server</li>
  <li>üîß Iterable and easy to improve</li>
  <li>üß† Focused on finding relevant answers</li>
</ul>

<p>We chose to build our bot with Microsoft‚Äôs <a href="https://github.com/microsoft/botframework-sdk">Bot Framework SDK</a> for easy development, user management and to be able to easily publish it to multiple platforms like Messenger or Line, the most popular messaging platform in Taiwan. <strong>The only thing remaining was to build the brain behind the messages.</strong></p>

<h2 id="understanding-the-meaning-behind-a-question">Understanding the meaning behind a question</h2>

<p>The main challenge when building a bot is <strong>relevancy</strong>, and this starts by having a clear understanding of what the user‚Äôs intention is. There are many approaches possible to make sense of what the user wants. At the most simple, one could simply look for some keywords such as <code>hello</code>, <code>restaurant</code>, or <code>visa</code>. However, this doesn‚Äôt take at all into account all the nuances of the language.</p>

<p>We didn‚Äôt have the resources to build a full-scale bot that could recognize the user intention among thousands of possibilities, yet we wanted to create something that could be relevant enough so that people would find it useful. So we needed to find an ideal middle ground between complexity and performance.</p>

<p>One of the most important concepts in NLP is one of <strong>distributed representations</strong>, inspired by the linguistic field of <a href="https://en.wikipedia.org/wiki/Distributional_semantics">distributional semantics</a>. The core idea is to encode linguistic items (words, sentences) into <strong>embeddings</strong> (vectors in a large dimensional space) such that items with similar properties should be closer in the resulting space.</p>

<blockquote>
  <p>You shall know a word by the company it keeps.</p>

  <p><em>- John Rupert Firth (1957)</em></p>
</blockquote>

<p>For example, similar words will cluster together in the vector space:</p>

<p><img src="https://jonathanbgn.com/assets/images/word-embeddings.png" alt="Word Embeddings"></p>

<p><em>Image from <a href="https://blog.tensorflow.org/2020/08/introducing-semantic-reactor-explore-nlp-sheets.html">TensorFlow Blog</a></em></p>

<p>You could do the same as the above but with sentences, effectively encoding them into large vectors which can be compared between themselves using <strong>similarity functions</strong>. Hence sentences with similar vector representations are sentences with similar meaning, topic, syntax‚Ä¶</p>

<h2 id="encoding-questions-with-the-universal-sentence-encoder">Encoding questions with the Universal Sentence Encoder</h2>

<p>The <a href="https://arxiv.org/abs/1803.11175">Universal Sentence Encoder</a> is a powerful Transformer model (in its large version) allowing to extract <a href="https://developers.google.com/machine-learning/crash-course/embeddings/video-lecture">embeddings</a> directly from sentences instead of from individual words. It already powers some impressive Google projects such as <a href="https://books.google.com/talktobooks/">Talk to Books</a> or <a href="https://google.github.io/mysteryofthreebots/">Mystery of the Three Bots</a>.</p>

<p>For our chatbot project, we are first using the model to encode all the questions that we think users would want to ask to the bot. This can be done in a few lines of code thanks to the convenient TensorFlow Hub library:</p>

<div><div><pre><code><span>import</span> <span>tensorflow</span> <span>as</span> <span>tf</span>
<span>import</span> <span>tensorflow_hub</span> <span>as</span> <span>tfhub</span>

<span>model</span> <span>=</span> <span>tfhub</span><span>.</span><span>load</span><span>(</span><span>"https://tfhub.dev/google/universal-sentence-encoder/4"</span><span>)</span>

<span>questions</span> <span>=</span> <span>[</span> <span>...</span> <span>]</span>  <span># questions most likely to be asked to the bot
</span><span>answers</span> <span>=</span> <span>[</span> <span>....</span> <span>]</span>  <span># all answers to the questions above
</span>
<span>batch_size</span> <span>=</span> <span>10</span>
<span>embeddings</span> <span>=</span> <span>[]</span>
<span>for</span> <span>i</span> <span>in</span> <span>range</span><span>(</span><span>0</span><span>,</span> <span>len</span><span>(</span><span>questions</span><span>),</span> <span>batch_size</span><span>):</span>
    <span>embeddings</span><span>.</span><span>append</span><span>(</span><span>model</span><span>(</span><span>questions</span><span>[</span><span>i</span><span>:</span><span>i</span><span>+</span><span>batch_size</span><span>]))</span>
<span>questions_embeddings</span> <span>=</span> <span>tf</span><span>.</span><span>concat</span><span>(</span><span>embeddings</span><span>,</span> <span>axis</span><span>=</span><span>0</span><span>)</span>
</code></pre></div></div>

<p>Then whenever a user asks a question, we can just extract its embedding and find the most similar question in our database of embeddings. In our case we use a simple vector dot product as a similary function:</p>

<div><div><pre><code><span>def</span> <span>find_best_answer</span><span>(</span><span>question</span><span>:</span> <span>str</span><span>)</span> <span>-&gt;</span> <span>str</span><span>:</span>
    <span>embedding</span> <span>=</span> <span>model</span><span>([</span><span>question</span><span>,])</span>
    <span># compute dot product with each question:
</span>    <span>scores</span> <span>=</span> <span>questions_embeddings</span> <span>@</span> <span>tf</span><span>.</span><span>transpose</span><span>(</span><span>embedding</span><span>)</span>

    <span>return</span> <span>answers</span><span>[</span><span>np</span><span>.</span><span>argmax</span><span>(</span><span>tf</span><span>.</span><span>squeeze</span><span>(</span><span>scores</span><span>).</span><span>numpy</span><span>())]</span>
</code></pre></div></div>

<h2 id="google-sheets-as-a-collaborative-database">Google Sheets as a collaborative database</h2>

<p>We built our dataset using a simple Google spreadsheet with 2 columns: questions and answers. Whenever a user asks a question, we just find the most relevant question and return the appropriate answer.</p>

<p><img src="https://jonathanbgn.com/assets/images/taiwan-bot-database.png" alt="Questions Answers Dataset"></p>

<p>This approach, while relatively simple, is a flexible enough for efficiently working together. Querying the data is done once during startup with a few lines of code:</p>

<div><div><pre><code><span>client</span> <span>=</span> <span>gspread</span><span>.</span><span>authorize</span><span>(</span>
    <span>ServiceAccountCredentials</span><span>.</span><span>from_json_keyfile_dict</span><span>(</span><span>SERVICE_ACCOUNT_INFO_DICT</span><span>,</span>
        <span>[</span><span>'https://spreadsheets.google.com/feeds'</span><span>,</span><span>'https://www.googleapis.com/auth/drive'</span><span>])</span>
<span>)</span>
<span>sheet</span> <span>=</span> <span>client</span><span>.</span><span>open</span><span>(</span><span>SPREADSHEET_FAQ_FILE</span><span>).</span><span>worksheet</span><span>(</span><span>SPREADSHEET_SHEET_NAME</span><span>)</span>
<span>questions</span> <span>=</span> <span>list</span><span>(</span><span>map</span><span>(</span><span>str</span><span>.</span><span>strip</span><span>,</span> <span>sheet</span><span>.</span><span>col_values</span><span>(</span><span>1</span><span>)[</span><span>1</span><span>:]))</span>
<span>answers</span> <span>=</span> <span>list</span><span>(</span><span>map</span><span>(</span><span>str</span><span>.</span><span>strip</span><span>,</span> <span>sheet</span><span>.</span><span>col_values</span><span>(</span><span>2</span><span>)[</span><span>1</span><span>:]))</span>
</code></pre></div></div>

<p>Here is an example of a conversation with the bot:</p>

<p><img src="https://jonathanbgn.com/assets/images/taiwan-bot-conversation.jpg" alt="Conversation with the bot"></p>

<h2 id="continuous-improvement">Continuous improvement</h2>

<p>We did our best to think about what would be the most commonly asked questions but, of course, we cannot predict everything people will ask. This is why if you ask a question that is not present in our database, the bot can answer with something completely unrelated. To prevent this, we built a small logging system to be able to track the questions asked to the bot and which question it thought was the most similar (along with the similarity score).</p>

<p>For example, here is what happened behind the scenes during the small conversation above. The first column is the user message. The second column is the most similar question (as based on the embeddings similarity). The third column is the best answer and the last column the computed similarity score. If the similarity score is not good enough, the bot will answer with a generic reply <em>‚Äù Sorry, I cannot help with that yet ‚Äú</em>.</p>

<p><img src="https://jonathanbgn.com/assets/images/taiwan-bot-logs.png" alt="Conversation Logs"></p>

<p>This logging system will also help us improve our answers as more people use the bot and new edge cases are found. Still, no chatbot is perfect, and we think the bot will be most useful in a context where humans can take over when the bot fails. For example, on Slack, we added the bot to a general FAQ channel where people can get assistance from both the bot and humans for more specific information.</p>

<p><img src="https://jonathanbgn.com/assets/images/taiwan-bot-slack.png" alt="Chatbot on Slack"></p>

<h2 id="conclusion">Conclusion</h2>

<p>Building an effective chatbot doesn‚Äôt have to be a complex project. As long as the scope is relatively narrow, it is possible to use a general encoder model like the Universal Sentence Encoder to build something useful. The hard part is collecting enough questions/answers for the bot to be able to answer most questions. It is also important to regularly monitor what users are asking and complement new data whenever the bot can‚Äôt find a relevant answer.</p>

<p>If you are also living or considering to move to Taiwan, you can <a href="https://m.me/thetaiwanbot">chat with Taiwan bot on Messenger here</a>!</p>

<h3 id="read-next">Read next</h3>

<p><a href="https://jonathanbgn.com/nlp/2020/08/30/gpt2-gpt3-creativity.html">Unleash GPT-2 (and GPT-3) Creativity through Decoding Strategies</a></p>

<p><a href="https://jonathanbgn.com/speech/2020/10/31/emotion-recognition-transfer-learning-wav2vec.html">Detecting Emotions from Voice with Very Few Training Data</a></p>

  </div>
  
  
</article>

      </div>
    </div></div>]]>
            </description>
            <link>https://jonathanbgn.com/nlp/2020/09/29/chatbot-universal-sentence-encoder.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24966013</guid>
            <pubDate>Mon, 02 Nov 2020 09:05:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[You might not need to store plaintext email addresses]]>
            </title>
            <description>
<![CDATA[
Score 58 | Comments 31 (<a href="https://news.ycombinator.com/item?id=24965671">thread link</a>) | @danielskogly
<br/>
November 2, 2020 | https://blog.klungo.no/2020/11/01/you-might-not-need-to-store-plaintext-emails/ | <a href="https://web.archive.org/web/*/https://blog.klungo.no/2020/11/01/you-might-not-need-to-store-plaintext-emails/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Earlier this year, when I went from having only Facebook-login on <a href="https://wishy.gift/">Wishy.gift</a> to allow registrations with email address and password, one of my concerns was how to implement this is a way that protects the data and privacy of my users. I don‚Äôt have any ads or analytics on the site, the users can select whatever display name they want, and I never stored the email addresses I got from Facebook when a user registered or logged in - only a hashed<sup><a href="#fn1" id="fnref1">[1]</a></sup> version of the ID. Email addresses and passwords, on the other hand, are a whole other beast, and the consequences of a database breach much worse.</p>
<p>Considering that the only kind of emails I ever need to send out are transactional - no newsletters or other kinds of notifications - the only thing I need to store them for are as identifiers, and can safely be hashed.</p>
<p>For every transactional email I need to send out - registration, account recovery, and email change verification - the user always initiates this by submitting their email address, and it will at that time be available to the backend to perform the needed action.</p>
<p>In conclusion, if you only use email addresses for transactional emails, you might be able to only store hashed versions of them. For <a href="https://wishy.gift/">Wishy.gift</a> I use SHA512 with a fixed salt, and this has been working perfectly since implementation in June.</p>
<p>Thank you for reading this! I would love to hear your thoughts and ideas too. Join the discussion on <a href="https://news.ycombinator.com/item?id=24959734">Hacker News</a>, or feel free to email me at <code>daniel</code> at the domain this blog is on.</p>
<hr>
<section>
<ol>
<li id="fn1"><p>I discovered that, even though the ID was unique to my FB-app, it was still possible to go to <a href="http://facebook.com/%7Bid%7D">facebook.com/{id}</a> and be redirected to the user‚Äôs FB-profile. <a href="#fnref1">‚Ü©Ô∏é</a></p>
</li>
</ol>
</section>
</div></div>]]>
            </description>
            <link>https://blog.klungo.no/2020/11/01/you-might-not-need-to-store-plaintext-emails/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24965671</guid>
            <pubDate>Mon, 02 Nov 2020 08:11:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Supabase.js 1.0 Released]]>
            </title>
            <description>
<![CDATA[
Score 10 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24965071">thread link</a>) | @awalias
<br/>
November 1, 2020 | https://supabase.io/blog/2020/10/30/improved-dx | <a href="https://web.archive.org/web/*/https://supabase.io/blog/2020/10/30/improved-dx">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><header><p><time datetime="2020-10-30T00:00:00.000Z">October 30, 2020  ¬∑ 3 min read</time></p><div><p><a href="https://github.com/kiwicopple" target="_blank" rel="noreferrer noopener"><img src="https://avatars2.githubusercontent.com/u/10214025?s=400&amp;u=c6775be2ae667e2acae3ccd347fed62bb3f5b3e7&amp;v=4" alt="Paul Copplestone"></a></p></div></header><section><p>Today we're releasing <a href="https://github.com/supabase/supabase-js" target="_blank" rel="noopener noreferrer">supabase-js</a> version 1.0, and it comes with some major Developer Experience improvements.</p><h3>New Docs</h3><p>Before digging into the improvements, we're excited to point out our new <a href="https://supabase.io/docs/client/supabase-client">developer docs</a>. While they're still a work in progress, here are some things we think you'll like:</p><ul><li>The <a href="https://supabase.io/docs/client/supabase-client">Reference Docs</a> are auto-generated from our Typescript definitions and then enriched with examples. This forces us to document our code and makes it easier to keep everything in sync.</li><li>We added placeholders for the other languages that the community is developing. They have already started with Python, C#, Dart, Rust, and Swift. Expect to see the docs filling up soon!</li><li>We've added sections for all of the open source tools we use, including <a href="https://supabase.io/docs/postgres/server/about">Postgres</a>, <a href="https://supabase.io/docs/postgrest/server/about">PostgREST</a>, <a href="https://supabase.io/docs/gotrue/server/about">GoTrue</a>, and <a href="https://supabase.io/docs/realtime/server/about">Realtime</a>. We'll be filling these with lots of valuable information including self-hosting, benchmarks, and simple guides.</li></ul><h3>Errors are returned, not thrown</h3><p>We attribute this improvement to community feedback. This has significantly improved the developer experience. Previously we would throw errors:</p><div><div><div><div><p><span>try</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>const</span><span> </span><span>{</span><span> body </span><span>}</span><span> </span><span>=</span><span> supabase</span><span>.</span><span>from</span><span>(</span><span>'todos'</span><span>)</span><span>.</span><span>select</span><span>(</span><span>'*'</span><span>)</span><span></span></p><p><span></span><span>}</span><span></span></p><p><span></span><span>catch</span><span> </span><span>(</span><span>error</span><span>)</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>console</span><span>.</span><span>log</span><span>(</span><span>error</span><span>)</span><span></span></p><p><span></span><span>}</span></p></div></div></div></div><p>And now we simply return them:</p><div><div><div><div><p><span>const</span><span> </span><span>{</span><span> data</span><span>,</span><span> error </span><span>}</span><span> </span><span>=</span><span> supabase</span><span>.</span><span>from</span><span>(</span><span>'todos'</span><span>)</span><span>.</span><span>select</span><span>(</span><span>'*'</span><span>)</span><span></span></p><p><span></span><span>if</span><span> </span><span>(</span><span>error</span><span>)</span><span> </span><span>console</span><span>.</span><span>log</span><span>(</span><span>error</span><span>)</span><span></span></p></div></div></div></div><p>After testing this for a while we're very happy with this pattern. Errors are handled next to the offending function. Of course you can always rethrow the error if that's your preference.</p><h3>We created <code>gotrue-js</code></h3><p>Our goal for <code>supabase-js</code> is to tie together many sub-libaries. Each sub-library is a standalone implementation for a single external system. This is one of the ways we support existing open source tools.</p><p>To maintain this philosophy, we created <a href="https://github.com/supabase/gotrue-js" target="_blank" rel="noopener noreferrer"><code>gotrue-js</code></a>, a library for Netlify's GoTrue auth server. This libary includes a number of new additions, including third-party logins.</p><p>Previously:</p><div><div><div><div><p><span>const</span><span> </span><span>{</span><span></span></p><p><span>  body</span><span>:</span><span> </span><span>{</span><span> user </span><span>}</span><span>,</span><span></span></p><p><span></span><span>}</span><span> </span><span>=</span><span> </span><span>await</span><span> supabase</span><span>.</span><span>auth</span><span>.</span><span>signup</span><span>(</span><span></span></p><p><span>  </span><span>'someone@email.com'</span><span>,</span><span></span></p><p><span>  </span><span>'password'</span><span></span></p><p><span></span><span>)</span></p></div></div></div></div><p>Now:</p><div><div><div><div><p><span>const</span><span> </span><span>{</span><span> user</span><span>,</span><span> error </span><span>}</span><span> </span><span>=</span><span> </span><span>await</span><span> supabase</span><span>.</span><span>auth</span><span>.</span><span>signUp</span><span>(</span><span>{</span><span></span></p><p><span>  email</span><span>:</span><span> </span><span>'someone@email.com'</span><span>,</span><span></span></p><p><span>  password</span><span>:</span><span> </span><span>'password'</span><span></span></p><p><span></span><span>}</span><span>)</span></p></div></div></div></div><h3>Enhancements and fixes</h3><ul><li>Native Typescript. All of our libraries are now natively built with Typescript: <a href="https://github.com/supabase/supabase-js" target="_blank" rel="noopener noreferrer"><code>supabase-js</code></a>, <a href="https://github.com/supabase/postgrest-js" target="_blank" rel="noopener noreferrer"><code>postgrest-js</code></a>, <a href="https://github.com/supabase/gotrue-js" target="_blank" rel="noopener noreferrer"><code>gotrue-js</code></a>, and <a href="https://github.com/supabase/realtime-js" target="_blank" rel="noopener noreferrer"><code>realtime-js</code></a>.</li><li>Better realtime scalability: we only generate one socket connection per Supabase client. Previously we would create a connection for every subscription.</li><li>We've added support for OAuth providers.</li><li>60% of minor bugs outstanding for <code>supabase-js</code> have been <a href="https://github.com/supabase/supabase-js/pull/50" target="_blank" rel="noopener noreferrer">solved</a>.</li><li>You can use <code>select()</code> instead of <code>select(*)</code></li></ul><h3>Breaking changes</h3><p>We've bumped the major version because there are a number of breaking changes. We've detailed these in the <a href="https://github.com/supabase/supabase-js/releases/tag/v1.0.1" target="_blank" rel="noopener noreferrer">release notes</a>, but here are a few to be aware of:</p><ul><li><code>signup()</code> is now <code>signUp()</code> and <code>email</code> / <code>password</code> is passed as an object</li><li><code>logout()</code> is now <code>signOut()</code></li><li><code>login()</code> is now <code>signIn()</code></li><li><code>ova()</code> and <code>ovr()</code> are now just <code>ov()</code></li><li><code>body</code> is now <code>data</code></li></ul><p>Previously:</p><div><div><div><div><p><span>const</span><span> </span><span>{</span><span> body </span><span>}</span><span> </span><span>=</span><span> supabase</span><span>.</span><span>from</span><span>(</span><span>'todos'</span><span>)</span><span>.</span><span>select</span><span>(</span><span>'*'</span><span>)</span></p></div></div></div></div><p>Now:</p><div><div><div><div><p><span>const</span><span> </span><span>{</span><span> data </span><span>}</span><span> </span><span>=</span><span> supabase</span><span>.</span><span>from</span><span>(</span><span>'todos'</span><span>)</span><span>.</span><span>select</span><span>(</span><span>)</span></p></div></div></div></div><h3>Upgrading</h3><p>We have documented all of the changes in the <a href="https://github.com/supabase/supabase-js/releases/tag/v1.0.1" target="_blank" rel="noopener noreferrer">release notes</a>. </p><p>To summarise the steps:</p><ol><li>Install the new version: <code>npm install @supabase/supabase-js@latest</code></li><li>Update all your <code>body</code> constants to <code>data</code></li><li>Update all your <code>supabase.auth</code> functions with the new <a href="https://supabase.io/docs/client/auth-signup">Auth interface</a></li></ol><h3>Get started</h3><ul><li>Start using Supabase today: <a href="https://app.supabase.io/" target="_blank" rel="noopener noreferrer">app.supabase.io</a></li><li>Make sure to <a href="https://github.com/supabase/supabase" target="_blank" rel="noopener noreferrer">star us on GitHub</a></li><li>Follow us <a href="https://twitter.com/supabase_io" target="_blank" rel="noopener noreferrer">on Twitter</a></li><li>Become a <a href="https://github.com/sponsors/supabase" target="_blank" rel="noopener noreferrer">sponsor</a></li></ul></section></article></div>]]>
            </description>
            <link>https://supabase.io/blog/2020/10/30/improved-dx</link>
            <guid isPermaLink="false">hacker-news-small-sites-24965071</guid>
            <pubDate>Mon, 02 Nov 2020 05:36:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What Does It Take to Resolve a Hostname]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24965056">thread link</a>) | @todsacerdoti
<br/>
November 1, 2020 | https://venam.nixers.net/blog/unix/2020/11/01/resolving-a-hostname.html | <a href="https://web.archive.org/web/*/https://venam.nixers.net/blog/unix/2020/11/01/resolving-a-hostname.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
  <article>
    <p><img src="https://venam.nixers.net/blog/assets/resolving_hostname/What_Does_It_Take_To_Resolve_A_Hostname.jpg" alt="slide1"></p>

<ul>
  <li><a href="#resolving-a-name-is-complex">Resolving A Name Is Complex</a></li>
  <li><a href="#nih">NIH</a></li>
  <li><a href="#historic">Historic</a></li>
  <li><a href="#resolver3">resolver(3)</a></li>
  <li><a href="#gethostbyname3-and-getaddrinfo3">gethostbyname(3) and getaddrinfo(3)</a></li>
  <li><a href="#nss5">nss(5)</a></li>
  <li><a href="#resolvconf8">resolvconf(8)</a></li>
  <li><a href="#caching">Caching</a></li>
  <li><a href="#how-to-debug">How To Debug</a></li>
  <li><a href="#big-picture">Big Picture</a></li>
  <li><a href="#references">References</a></li>
</ul>

<p>Can also be found in presentation format <a href="https://youtu.be/Hd8Nc8ZRkNM">here</a></p>



<p><img src="https://venam.nixers.net/blog/assets/resolving_hostname/What_Does_It_Take_To_Resolve_A_Hostname2.jpg" alt="slide2"></p>

<p>Resolving a domain name is complex.  It‚Äôs not limited to the DNS, the
Domain Name System ‚Äî A decentralized and hierarchical system to associate
names and other information to IP addresses.<br>
It‚Äôs not something we, as users, usually pay attention to.  We notice
it only when we‚Äôre facing an issue. It normally works out of the box
but really nobody get the crux.<br>
You search online for clarifications but they barely help and add more
confusion.</p>

<p>Here are some schemas trying to decipher the mystery that domain name
resolution came to be.</p>

<p><img src="https://venam.nixers.net/blog/assets/resolving_hostname/What_Does_It_Take_To_Resolve_A_Hostname3.jpg" alt="slide3"></p>

<p>One, two, and three, I think you get me, it is not easy.  It‚Äôs never as
simple as taking a hostname as a string, getting the DNS address in the
<code>/etc/resolv.conf</code> config, then sending a request to the DNS on port 53
to be greeted back with the IP.<br>
Behind the scene there are ton of files and libraries involved, all of
this to get a domain name solved.</p>

<p>So in this talk we‚Äôll try to create some order to try to understand thing
as an end-user. Let‚Äôs make sense and reason behind this mess even if I
have to say, I don‚Äôt get it much myself.<br>
I can‚Äôt assess I haven‚Äôt made mistakes but if I did, please correct me,
that would be great!</p>



<p><img src="https://venam.nixers.net/blog/assets/resolving_hostname/What_Does_It_Take_To_Resolve_A_Hostname4.jpg" alt="slide4"></p>

<p>Let‚Äôs start with the misfits, the ones that don‚Äôt follow the rules,
the not-invented-here syndrome found within our tools.<br>
When it comes to DNS resolution, there‚Äôs no one-size fit all
solution. Obviously, many of us don‚Äôt want to deal with all the
complexity, so we say, ‚Äúlet‚Äôs pack these bytes ourselves, and forget
the hassle‚Äù.<br>
That‚Äôs pure heresy though. We‚Äôd prefer everything to work the same way,
so that it‚Äôs easier to follow. It would be preferable that they all use
the same lib, to all have the same behavior. That is, in our case to rely
on the C standard lib, or the POSIX API our savior.</p>

<p>In all cases, let‚Äôs note some software that don‚Äôt rely on it, as we said,
all the misfits.</p>

<ul>
  <li>The ISC/BSD BIND tools: from host, to dig, to drill, to nslookup,
and more, used for debugging chores.</li>
  <li>Firefox/Chrome/Chromium: There are the browsers, because they are one
of a kind, bypassing libc and POSIX mechanism, implementing their own
DNS API for performance reasons and perfectionism.</li>
  <li>Any applications needing advanced DNS features, other than simple name to IP.</li>
  <li>Language that don‚Äôt wrap around a libc: The Go programming language
comes to mind. It implements it‚Äôs own resolver API.</li>
</ul>

<p>Fortunately, I can ease your mind by letting you know that all
of these will at least respect <code>/etc/resolv.conf</code> and <code>/etc/hosts</code>
configurations. Files that we‚Äôll see in the next sections.</p>



<p><img src="https://venam.nixers.net/blog/assets/resolving_hostname/What_Does_It_Take_To_Resolve_A_Hostname5.jpg" alt="slide5"></p>

<p>I‚Äôve taken a look at over a dozen different technologies and I think the
best way to understand them is through their archaeologies. There‚Äôs a
lot that can be explained about DNS resolution simply based on all the
historic reasons.<br>
The main thing you need to understand, is that there‚Äôs not a single
clean library call to resolve a hostname. Standards and new specs have
pilled up over the years, with some software that haven‚Äôt followed,
but risking to disappear.</p>

<p>Overall, libc and POSIX provide multiple resolution APIs:</p>

<ul>
  <li>There‚Äôs the historic, low level one provided by ISC/BSD BIND resolver
implementation within libc. Accessed though <code>libresolv/resolv.h</code>
incantation.</li>
  <li>The <code>gethostbyname(3)</code> and related functions, implementing an obsolete
POSIX C specification.</li>
  <li>The <code>getaddrinfo(3)</code>, that is the modern POSIX C API for name
resolution.</li>
</ul>

<p>All these combinations, ladies and gentlemen, are the standard ways
to resolve a name.<br>
Newer applications will use <code>getaddrinfo</code> while older ones will use
<code>gethostbyname</code>. Both of these 2 will often rely on something called
NSS and another part to manage <code>resolv.conf</code> access.</p>

<p>Now let‚Äôs dive into each of these and you‚Äôll get them like a breeze.</p>



<p><img src="https://venam.nixers.net/blog/assets/resolving_hostname/What_Does_It_Take_To_Resolve_A_Hostname6.jpg" alt="slide6"></p>

<p>The resolver layer is the oldest and most stable in our quest. It
originates from 1983, today almost 37 years ago, at Berkeley university.</p>

<p>It comes from a project called BIND, Berkely Internet Name Domain, which
was sponsored by a DARPA grants. And like the Berkeley socket that gave
rise to the internet, it has now turned into much much pain.<br>
It was the very first implementation of the DNS specifications. It got
released in BSD4.3 and today the BIND project is maintained by the
Internet Systems Consortium, aka ISC.</p>

<p>It not only offers servers and clients, and the debug tools which we
mentioned earlier, but also offers a library called ‚Äúlibbind‚Äù. This
library is the defacto implementation, the standard resolver, the one
of a kind. It is initially based on all the original RFC discussions,
namely RFC 881, 882, and 883.<br>
The BSD people wrote technical papers assessing its feasibility, and
went on recommending and implementing it within BSD.</p>

<p>At that point BIND wasn‚Äôt a standard yet, it was an optionally-compiled
code for those who wanted to get their feet wet, those who wanted to
try DNS.<br>
Then it got part of the C standard library interface through <code>resolver</code>,
<code>libresolv</code>, <code>-lresolv</code>, <code>resolv.h</code>, and closed the case</p>

<p>If you take a look at most Unix-like systems today, from MacOS, to
OpenBSD, to Linux, and company, you‚Äôll see clearly in <code>resolv.h</code>, the
copyright going back to 1983, to that very date. But obviously, it depends
on the choice of the implementer, a case by case</p>

<p>So then the code diverged, there‚Äôs the libresolv provided
by the C standardization and the libbind provided by the BIND
implementation. However, most Unix only add small specific changes to
their needs. For example, resolver in glibc is baselined off libbind
from BIND version 8.2.3.</p>

<p>This layer is normally used for low level DNS interactions because it‚Äôs
missing the goodies we‚Äôll see later in this presentation.</p>

<p>Now let‚Äôs talk about environments and configurations.</p>

<p>The resolver configuration file</p>

<p>The resolver configuration files were mentioned in BIND first release,
in section 4.2.2.2 of ‚ÄúThe Design and Implementation of ‚ÄòDomain Name
Resolver‚Äô‚Äù by Mark Painter based on RFC883, part of the DNS RFC series.</p>

<p>This particular file being <code>/etc/resolv.conf</code>, you‚Äôll see it hardcoded in
<code>resolv.h</code> and if that file is missing, it‚Äôll fall back to the localhost
as the DNS, just to be safe.<br>
Additionally, there‚Äôs <code>/etc/host.conf</code>, according to the manpage also
‚Äúthe resolver configuration file‚Äù, it‚Äôs so appropriately named. It‚Äôs a
conf that dictates the working of <code>/etc/hosts</code>, the ‚Äústatic table lookup
for hostsnames‚Äù.</p>

<p>So what‚Äôs in these files.<br>
<code>resolv.conf</code> takes care of how to resolve names and which <code>nameserver</code>
to use for that, while <code>hosts</code> simply has a list of known host aliases,
ip + name, as simple as that.</p>

<p>Within <code>resolv.conf</code> you can also have a <code>search</code> list for domains.
That‚Äôs if a name you‚Äôre searching for doesn‚Äôt have the minimum number
of dots in it then it‚Äôll add one of these TLD to it, top-level-domains,
and keep searching until it finds something that fits.<br>
This can also be manipulated in an environment variable <code>LOCALDOMAIN</code>.</p>

<figure><pre><code data-lang="shell"><span>$ </span><span>echo</span> <span>'example www.example.com'</span> <span>&gt;</span> ./host_aliases
<span>$ HOSTALIASES</span><span>=</span><span>"./host_aliases"</span> getent hosts example
93.184.216.34   www.example.com</code></pre></figure>

<p>There can also be a sortlist IP netmask, for when there‚Äôs many results
to match but you don‚Äôt want to give priority to the cloud VPS that lives
only for cash.</p>

<p>Finally, there‚Äôs the <code>option</code> field, also overriden on the command
line by the <code>RES_OPTIONS</code> environment variable. It manipulates the minimum
number of dots we mentioned and also if you want can set debug as enabled.</p>

<p>Meanwhile, the <code>hosts</code> file is but a key-value db, simply made of domain
names and IPs.</p>

<p>Its config also lets you change the order of results and for the rest
you have <code>host.conf</code> to consult.</p>

<p>So remember, that all of these are mostly used everywhere because it‚Äôs
the lowest layer.  So it‚Äôs used by libbind and libresolv but also the
custom NIH syndrome</p>

<p>Alright, so far that‚Äôs all classic clean stuff. Let‚Äôs move on to the
next sections, you‚Äôll scratch your head until there‚Äôs no dandruff.</p>



<p><img src="https://venam.nixers.net/blog/assets/resolving_hostname/What_Does_It_Take_To_Resolve_A_Hostname7.jpg" alt="slide7"></p>

<p>The C library POSIX specs create a superset over the C standard
library. They add a few simpler calls to resolve hostnames and make it
easy. These focus on returning A and AAAA records only, ipV4 and ipV6
respsectively.<br>
There‚Äôs <code>gethostbyname(3)</code> which is deprecated, and there‚Äôs the newer
<code>getaddrinfo(3)</code> defined in IEEE Std 1003.1g-2000, which mainly adds
RFC3493 aka ipV6 is now supported.  So applications are recommended to
use this updated version unless they want to divert from mainland.</p>

<p>There are functions to resolve IP addresses to host names, but let‚Äôs
focus only on name to ip for today, I know it‚Äôs lame.</p>

<p>Apart from ipV6 support being added, some internal structures have been
updated as they weren‚Äôt so safe between subsequent calls and thus could
be your demise and your fall.</p>

<p>Obviously they both return different structures.</p>

<p><code>hostent</code> struct is returned to <code>gethostbyname</code> function caller.
while <code>getaddrinfo</code> returns an <code>addrinfo</code> structure.
Both being defined in the <code>netdb.h</code> header.</p>

<figure><pre><code data-lang="c"><span>struct</span> <span>hostent</span> <span>{</span>
	<span>char</span>  <span>*</span><span>h_name</span><span>;</span>            <span>/* official name of host */</span>
	<span>char</span> <span>**</span><span>h_aliases</span><span>;</span>         <span>/* alias list */</span>
	<span>int</span>    <span>h_addrtype</span><span>;</span>        <span>/* host address type */</span>
	<span>int</span>    <span>h_length</span><span>;</span>          <span>/* length of address */</span>
	<span>char</span> <span>**</span><span>h_addr_list</span><span>;</span>       <span>/* list of addresses */</span>
<span>}</span></code></pre></figure>

<figure><pre><code data-lang="c"><span>struct</span> <span>addrinfo</span> <span>{</span>
	<span>int</span>              <span>ai_flags</span><span>;</span>
	<span>int</span>              <span>ai_family</span><span>;</span>
	<span>int</span>              <span>ai_socktype</span><span>;</span>
	<span>int</span>              <span>ai_protocol</span><span>;</span>
	<span>socklen_t</span>        <span>ai_addrlen</span><span>;</span>
	<span>struct</span> <span>sockaddr</span> <span>*</span><span>ai_addr</span><span>;</span>
	<span>char</span>            <span>*</span><span>ai_canonname</span><span>;</span>
	<span>struct</span> <span>addrinfo</span> <span>*</span><span>ai_next</span><span>;</span>
<span>};</span></code></pre></figure>

<p>Some libc implementations will get fancy and add their own modified
versions of <code>gethostbyname</code>. For instance in glibc they add support for
ipV6 in their modified <code>gethostbyname2</code> for backward compatibility.</p>

<p>Regarding configuration files, <code>getaddrinfo</code> will consult <code>/etc/gai.conf</code>
which takes care of the precedence of the addresses returned in the
results. And now, you‚Äôre going to brandish your ‚Ä¶</p></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://venam.nixers.net/blog/unix/2020/11/01/resolving-a-hostname.html">https://venam.nixers.net/blog/unix/2020/11/01/resolving-a-hostname.html</a></em></p>]]>
            </description>
            <link>https://venam.nixers.net/blog/unix/2020/11/01/resolving-a-hostname.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24965056</guid>
            <pubDate>Mon, 02 Nov 2020 05:28:31 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Rendering photo-realistic glass in the browser]]>
            </title>
            <description>
<![CDATA[
Score 151 | Comments 46 (<a href="https://news.ycombinator.com/item?id=24965005">thread link</a>) | @anonytrary
<br/>
November 1, 2020 | https://domenicobrz.github.io/webgl/projects/SSRefractionDepthPeeling/ | <a href="https://web.archive.org/web/*/https://domenicobrz.github.io/webgl/projects/SSRefractionDepthPeeling/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://domenicobrz.github.io/webgl/projects/SSRefractionDepthPeeling/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24965005</guid>
            <pubDate>Mon, 02 Nov 2020 05:13:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why Leaders Need to Learn the Skill of Writing]]>
            </title>
            <description>
<![CDATA[
Score 25 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24964730">thread link</a>) | @mooreds
<br/>
November 1, 2020 | https://fromthegreennotebook.com/2020/10/03/why-leaders-need-to-learn-the-skill-of-writing/ | <a href="https://web.archive.org/web/*/https://fromthegreennotebook.com/2020/10/03/why-leaders-need-to-learn-the-skill-of-writing/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">

	<section id="primary">
		<main id="main" role="main">

		
			<article id="post-6068">
	
	
		

	<div>
		<p><img data-attachment-id="6071" data-permalink="https://fromthegreennotebook.com/2020/10/03/why-leaders-need-to-learn-the-skill-of-writing/shutterstock_55915930-e1415052560114-2/" data-orig-file="https://i0.wp.com/fromthegreennotebook.com/wp-content/uploads/2020/10/shutterstock_55915930-e1415052560114-2.jpg?fit=3862%2C1974&amp;ssl=1" data-orig-size="3862,1974" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="shutterstock_55915930-e1415052560114-2" data-image-description="" data-medium-file="https://i0.wp.com/fromthegreennotebook.com/wp-content/uploads/2020/10/shutterstock_55915930-e1415052560114-2.jpg?fit=300%2C153&amp;ssl=1" data-large-file="https://i0.wp.com/fromthegreennotebook.com/wp-content/uploads/2020/10/shutterstock_55915930-e1415052560114-2.jpg?fit=723%2C369&amp;ssl=1" loading="lazy" src="https://i0.wp.com/fromthegreennotebook.com/wp-content/uploads/2020/10/shutterstock_55915930-e1415052560114-2.jpg?resize=715%2C365&amp;ssl=1" alt="" width="715" height="365" srcset="https://i0.wp.com/fromthegreennotebook.com/wp-content/uploads/2020/10/shutterstock_55915930-e1415052560114-2.jpg?w=3862&amp;ssl=1 3862w, https://i0.wp.com/fromthegreennotebook.com/wp-content/uploads/2020/10/shutterstock_55915930-e1415052560114-2.jpg?resize=300%2C153&amp;ssl=1 300w, https://i0.wp.com/fromthegreennotebook.com/wp-content/uploads/2020/10/shutterstock_55915930-e1415052560114-2.jpg?resize=1024%2C523&amp;ssl=1 1024w, https://i0.wp.com/fromthegreennotebook.com/wp-content/uploads/2020/10/shutterstock_55915930-e1415052560114-2.jpg?resize=768%2C393&amp;ssl=1 768w, https://i0.wp.com/fromthegreennotebook.com/wp-content/uploads/2020/10/shutterstock_55915930-e1415052560114-2.jpg?resize=1536%2C785&amp;ssl=1 1536w, https://i0.wp.com/fromthegreennotebook.com/wp-content/uploads/2020/10/shutterstock_55915930-e1415052560114-2.jpg?resize=2048%2C1047&amp;ssl=1 2048w, https://i0.wp.com/fromthegreennotebook.com/wp-content/uploads/2020/10/shutterstock_55915930-e1415052560114-2.jpg?w=1446&amp;ssl=1 1446w, https://i0.wp.com/fromthegreennotebook.com/wp-content/uploads/2020/10/shutterstock_55915930-e1415052560114-2.jpg?w=2169&amp;ssl=1 2169w" sizes="(max-width: 715px) 100vw, 715px" data-recalc-dims="1"></p>
<p>By Joe Byerly</p>
<p>Anyone who has worked directly for a battalion commander or above probably has experience writing ‚Äúghost notes.‚Äù These are emails a subordinate writes and addresses for their boss to send to other people. Ghost notes can be weekly or monthly sitreps, updates on an ongoing situation or emails asking for additional resources. No matter the type, they are the ‚Äúeasy button‚Äù for the commander because all they have to do is hit ‚Äúsend.‚Äù</p>
<p>Recently, I worked for a senior Army leader who encouraged his subordinate commanders to own their communications‚Äîmeaning, write their own emails. As I reflected on his guidance, I realized there are benefits to communications ownership. I witnessed many of these benefits firsthand as I watched him communicate with senior military leaders, senior civilian leaders and his own commanders.<span data-ez-name="fromthegreennotebook_com-medrectangle-3"></span></p>

<p><strong>Greatness and Writing</strong></p>
<p>One of the best ways to work through a problem is to write it down. Throughout history, leaders who found themselves in tough situations sat alone with their thoughts and worked through them using pen and paper.<span data-ez-name="fromthegreennotebook_com-medrectangle-4"></span></p>
<p>Marcus Aurelius, who served as Roman emperor for almost two decades, wrote his <em>Meditations</em> to work through daily leadership challenges, wars and a pandemic. In the week leading up to the D-Day landings, Gen. Dwight Eisenhower wrote himself letters to help work through risks, opportunities and necessities of operations.</p>
<p>Both Marcus and Eisenhower used writing to achieve clarity of thought. This point is underscored by author Stephen King, who has said writing is ‚Äúrefined thinking.‚Äù In our minds, our thoughts are clear, but real clarity doesn‚Äôt come until those thoughts are solidified in writing. The process of framing an email, capturing important points and discarding nonessential elements helps us gain more clarity.</p>
<p><strong>Sound Authentic</strong></p>
<p>Over the years, I have worked under multiple commanders while in staff positions, and the best ones never let me draft their intent for operations orders. They wanted to own those. At the time, I didn‚Äôt understand it‚Äîthinking it was one more staff drill I could handle for them. But as I gained experience, I realized they wanted that section of the operations order to reflect their voice.<span data-ez-name="fromthegreennotebook_com-box-4"></span></p>
<p>We all have a voice when we write. This voice is our certificate of authenticity. When commanders write their own correspondence, their voice comes through. When someone else drafts an email, using words and phrases the commander wouldn‚Äôt normally use, others can tell someone else wrote it.</p>
<p>Authenticity in communications is important for two reasons. First, subordinates will know if the intent, the guidance, the policy, etc., is the commander‚Äôs, or if it is another product produced by staff. They are more likely to follow it and adhere to it when they know it comes directly from the commander‚Äôs mind and is not a draft by a random staff officer.</p>
<p>Also, commanders who write their own communications tend to reinforce the message by repeating what they wrote. The senior Army leader I worked for occasionally wrote guidance that he sent out in an email. He then repeated key words and phrases from the document in meetings, during battlefield circulation and in one-on-one discussions. Everyone knew he wrote the email because he owned it and talked about it; his guidance didn‚Äôt become memorandums left on a bulletin board in a headquarters.</p>
<p>The second reason authenticity in communications is important is that it signals leader involvement in an issue. I have learned that many senior leaders can tell when a subordinate commander‚Äôs email is authentic or a staff-produced ghost note.</p>
<p>Every time there was a change or inflection point in the strategic situation, my boss would provide a one- or two-page update to his commanders. He always wrote these himself, for the reasons mentioned above. I found out from those commanders‚Äô staff members that their bosses read these emails because they knew it was from him, and that if he took the time to write it, they should take the time to read it.</p>
<p>Communication can be frustrating. Sometimes it is like tapping out a song you have in your head and expecting another person to immediately know the tune. It is hard to convey an idea in your head to someone who may not have the same background or experiences as you, or who wasn‚Äôt in the same room when you had a conversation.</p>
<p>Communication is a skill that takes practice. We need repetition. Leaders who write their own emails gain needed communication experience when it matters. I have also learned that speed comes with practice. I can write in hours what used to take days.</p>
<p><strong>Honing the Skill</strong></p>
<p>I recognize that commanders have a lot on their plates, and it isn‚Äôt feasible for them to spend hours writing and responding to emails. There are many ghost notes best produced by staff in the interest of time. However, when it comes to communicating up or down the chain of command on key issues, or writing guidance on important topics, it is best for commanders to own those.</p>
<p>Great leaders are also great communicators, but the ability to communicate effectively and efficiently takes time to develop. By owning communications, commanders refine and hone this skill. They also have an opportunity to work through problems and refine their thinking through the process of writing. Finally, they gain authenticity in their communications‚Äîan important factor in ensuring that ‚Äúmessage sent‚Äù is ‚Äúmessage received.‚Äù</p>
<p>This article was first published in <a href="https://www.ausa.org/articles/leaders-subject-write-your-own-emails">ARMY Magazine</a> and reprinted with their permission.</p>



	





		
		
					</div><!-- .entry-content -->

	<!-- .entry-footer -->

</article><!-- #post-## -->

			
<!-- #comments -->

		
		</main><!-- #main -->
	</section><!-- #primary -->

	<!-- #secondary --></div></div>]]>
            </description>
            <link>https://fromthegreennotebook.com/2020/10/03/why-leaders-need-to-learn-the-skill-of-writing/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24964730</guid>
            <pubDate>Mon, 02 Nov 2020 04:03:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Names are not type safety]]>
            </title>
            <description>
<![CDATA[
Score 186 | Comments 71 (<a href="https://news.ycombinator.com/item?id=24963821">thread link</a>) | @azhenley
<br/>
November 1, 2020 | http://lexi-lambda.github.io/blog/2020/11/01/names-are-not-type-safety/ | <a href="https://web.archive.org/web/*/http://lexi-lambda.github.io/blog/2020/11/01/names-are-not-type-safety/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section role="main">
        <!-- Main column -->
        <div>



          <article>
  <header>
    
    
  </header>

<p>Haskell programmers spend a lot of time talking about <em>type safety</em>. The Haskell school of program construction advocates ‚Äúcapturing invariants in the type system‚Äù and ‚Äúmaking illegal states unrepresentable,‚Äù both of which sound like compelling goals, but are rather vague on the techniques used to achieve them. Almost exactly one year ago, I published <a href="http://lexi-lambda.github.io/blog/2019/11/05/parse-don-t-validate/">Parse, Don‚Äôt Validate</a> as an initial stab towards bridging that gap.</p>

<p>The ensuing discussions were largely productive and right-minded, but one particular source of confusion quickly became clear: Haskell‚Äôs <code>newtype</code> construct. The idea is simple enough‚Äîthe <code>newtype</code> keyword declares a wrapper type, nominally distinct from but representationally equivalent to the type it wraps‚Äîand on the surface this <em>sounds</em> like a simple and straightforward path to type safety. For example, one might consider using a <code>newtype</code> declaration to define a type for an email address:</p>

<div>
 <div>
  <pre><span></span><span>newtype</span> <span>EmailAddress</span> <span>=</span> <span>EmailAddress</span> <span>Text</span>
</pre></div>

</div>

<p>This technique can provide <em>some</em> value, and when coupled with a smart constructor and an encapsulation boundary, it can even provide some safety. But it is a meaningfully distinct <em>kind</em> of type safety from the one I highlighted a year ago, one that is far weaker. On its own, a newtype is just a name.</p>

<p>And names are not type safety.</p>
<!-- more-->



<p>To illustrate the difference between constructive data modeling (discussed at length in my <a href="http://lexi-lambda.github.io/blog/2020/08/13/types-as-axioms-or-playing-god-with-static-types/">previous blog post</a>) and newtype wrappers, let‚Äôs consider an example. Suppose we want a type for ‚Äúan integer between 1 and 5, inclusive.‚Äù The natural constructive modeling would be an enumeration with five cases:</p>

<div>
 <div>
  <pre><span></span><span>data</span> <span>OneToFive</span>
  <span>=</span> <span>One</span>
  <span>|</span> <span>Two</span>
  <span>|</span> <span>Three</span>
  <span>|</span> <span>Four</span>
  <span>|</span> <span>Five</span>
</pre></div>

</div>

<p>We could then write some functions to convert between <code>Int</code> and our <code>OneToFive</code> type:</p>

<div>
 <div>
  <pre><span></span><span>toOneToFive</span> <span>::</span> <span>Int</span> <span>-&gt;</span> <span>Maybe</span> <span>OneToFive</span>
<span>toOneToFive</span> <span>1</span> <span>=</span> <span>Just</span> <span>One</span>
<span>toOneToFive</span> <span>2</span> <span>=</span> <span>Just</span> <span>Two</span>
<span>toOneToFive</span> <span>3</span> <span>=</span> <span>Just</span> <span>Three</span>
<span>toOneToFive</span> <span>4</span> <span>=</span> <span>Just</span> <span>Four</span>
<span>toOneToFive</span> <span>5</span> <span>=</span> <span>Just</span> <span>Five</span>
<span>toOneToFive</span> <span>_</span> <span>=</span> <span>Nothing</span>

<span>fromOneToFive</span> <span>::</span> <span>OneToFive</span> <span>-&gt;</span> <span>Int</span>
<span>fromOneToFive</span> <span>One</span>   <span>=</span> <span>1</span>
<span>fromOneToFive</span> <span>Two</span>   <span>=</span> <span>2</span>
<span>fromOneToFive</span> <span>Three</span> <span>=</span> <span>3</span>
<span>fromOneToFive</span> <span>Four</span>  <span>=</span> <span>4</span>
<span>fromOneToFive</span> <span>Five</span>  <span>=</span> <span>5</span>
</pre></div>

</div>

<p>This would be perfectly sufficient for achieving our stated goal, but you‚Äôd be forgiven for finding it odd: it would be rather awkward to work with in practice. Because we‚Äôve invented an entirely new type, we can‚Äôt reuse any of the usual numeric functions Haskell provides. Consequently, many programmers would gravitate towards a newtype wrapper, instead:</p>

<div>
 <div>
  <pre><span></span><span>newtype</span> <span>OneToFive</span> <span>=</span> <span>OneToFive</span> <span>Int</span>
</pre></div>

</div>

<p>Just as before, we can provide <code>toOneToFive</code> and <code>fromOneToFive</code> functions, with identical types:</p>

<div>
 <div>
  <pre><span></span><span>toOneToFive</span> <span>::</span> <span>Int</span> <span>-&gt;</span> <span>Maybe</span> <span>OneToFive</span>
<span>toOneToFive</span> <span>n</span>
  <span>|</span> <span>n</span> <span>&gt;=</span> <span>1</span> <span>&amp;&amp;</span> <span>n</span> <span>&lt;=</span> <span>5</span> <span>=</span> <span>Just</span> <span>$</span> <span>OneToFive</span> <span>n</span>
  <span>|</span> <span>otherwise</span>        <span>=</span> <span>Nothing</span>

<span>fromOneToFive</span> <span>::</span> <span>OneToFive</span> <span>-&gt;</span> <span>Int</span>
<span>fromOneToFive</span> <span>(</span><span>OneToFive</span> <span>n</span><span>)</span> <span>=</span> <span>n</span>
</pre></div>

</div>

<p>If we put these declarations in their own module and choose not to export the <code>OneToFive</code> constructor, these APIs might appear entirely interchangeable. Na√Øvely, it seems that the newtype version is both simpler and equally type-safe. However‚Äîperhaps surprisingly‚Äîthis is not actually true.</p>

<p>To see why, suppose we write a function that consumes a <code>OneToFive</code> value as an argument. Under the constructive modeling, such a function need only pattern-match against each of the five constructors, and GHC will accept the definition as exhaustive:</p>

<div>
 <div>
  <pre><span></span><span>ordinal</span> <span>::</span> <span>OneToFive</span> <span>-&gt;</span> <span>Text</span>
<span>ordinal</span> <span>One</span>   <span>=</span> <span>"first"</span>
<span>ordinal</span> <span>Two</span>   <span>=</span> <span>"second"</span>
<span>ordinal</span> <span>Three</span> <span>=</span> <span>"third"</span>
<span>ordinal</span> <span>Four</span>  <span>=</span> <span>"fourth"</span>
<span>ordinal</span> <span>Five</span>  <span>=</span> <span>"fifth"</span>
</pre></div>

</div>

<p>The same is not true given the newtype encoding. The newtype is opaque, so the only way to observe it is to convert it back to an <code>Int</code>‚Äîafter all, it <em>is</em> an <code>Int</code>. An <code>Int</code> can of course contain many other values besides <code>1</code> through <code>5</code>, so we are forced to add an error case to satisfy the exhaustiveness checker:</p>

<div>
 <div>
  <pre><span></span><span>ordinal</span> <span>::</span> <span>OneToFive</span> <span>-&gt;</span> <span>Text</span>
<span>ordinal</span> <span>n</span> <span>=</span> <span>case</span> <span>fromOneToFive</span> <span>n</span> <span>of</span>
  <span>1</span> <span>-&gt;</span> <span>"first"</span>
  <span>2</span> <span>-&gt;</span> <span>"second"</span>
  <span>3</span> <span>-&gt;</span> <span>"third"</span>
  <span>4</span> <span>-&gt;</span> <span>"fourth"</span>
  <span>5</span> <span>-&gt;</span> <span>"fifth"</span>
  <span>_</span> <span>-&gt;</span> <span>error</span> <span>"impossible: bad OneToFive value"</span>
</pre></div>

</div>

<p>In this highly contrived example, this may not seem like much of a problem to you. But it nonetheless illustrates a key difference in the guarantees afforded by the two approaches:</p>

<ul>
 <li>
  <p>The constructive datatype captures its invariants in such a way that they are <em>accessible</em> to downstream consumers. This frees our <code>ordinal</code> function from worrying about handling illegal values, as they have been made unutterable.</p></li>
 <li>
  <p>The newtype wrapper provides a smart constructor that <em>validates</em> the value, but the boolean result of that check is used only for control flow; it is not preserved in the function‚Äôs result. Accordingly, downstream consumers cannot take advantage of the restricted domain; they are functionally accepting <code>Int</code>s.</p></li></ul>

<p>Losing exhaustiveness checking might seem like small potatoes, but it absolutely is not: our use of <code>error</code> has punched a hole right through our type system. If we were to add another constructor to our <code>OneToFive</code> datatype,<sup><a href="#2020-11-01-names-are-not-type-safety-footnote-1-definition" name="2020-11-01-names-are-not-type-safety-footnote-1-return">1</a></sup> the version of <code>ordinal</code> that consumes a constructive datatype would be immediately detected non-exhaustive at compile-time, while the version that consumes a newtype wrapper would continue to compile yet fail at runtime, dropping through to the ‚Äúimpossible‚Äù case.</p>

<p>All of this is a consequence of the fact that the constructive modeling is <em>intrinsically</em> type-safe; that is, the safety properties are enforced by the type declaration itself. Illegal values truly are unrepresentable: there is simply no way to represent <code>6</code> using any of the five constructors. The same is not true of the newtype declaration, which has no intrinsic semantic distinction from that of an <code>Int</code>; its meaning is specified extrinsically via the <code>toOneToFive</code> smart constructor. Any semantic distinction intended by a newtype is thoroughly invisible to the type system; it exists only in the programmer‚Äôs mind.</p>

<h2 id="revisiting-non-empty-lists">Revisiting non-empty lists</h2>

<p>Our <code>OneToFive</code> datatype is rather artificial, but identical reasoning applies to other datatypes that are significantly more practical. Consider the <code>NonEmpty</code> datatype I‚Äôve repeatedly highlighted in recent blog posts:</p>

<div>
 <div>
  <pre><span></span><span>data</span> <span>NonEmpty</span> <span>a</span> <span>=</span> <span>a</span> <span>:|</span> <span>[</span><span>a</span><span>]</span>
</pre></div>

</div>

<p>It may be illustrative to imagine a version of <code>NonEmpty</code> represented as a newtype over ordinary lists. We can use the usual smart constructor strategy to enforce the desired non-emptiness property:</p>

<div>
 <div>
  <pre><span></span><span>newtype</span> <span>NonEmpty</span> <span>a</span> <span>=</span> <span>NonEmpty</span> <span>[</span><span>a</span><span>]</span>

<span>nonEmpty</span> <span>::</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>Maybe</span> <span>(</span><span>NonEmpty</span> <span>a</span><span>)</span>
<span>nonEmpty</span> <span>[]</span> <span>=</span> <span>Nothing</span>
<span>nonEmpty</span> <span>xs</span> <span>=</span> <span>Just</span> <span>$</span> <span>NonEmpty</span> <span>xs</span>

<span>instance</span> <span>Foldable</span> <span>NonEmpty</span> <span>where</span>
  <span>toList</span> <span>(</span><span>NonEmpty</span> <span>xs</span><span>)</span> <span>=</span> <span>xs</span>
</pre></div>

</div>

<p>Just as with <code>OneToFive</code>, we quickly discover the consequences of failing to preserve this information in the type system. Our motivating use case for <code>NonEmpty</code> was the ability to write a safe version of <code>head</code>, but the newtype version requires another assertion:</p>

<div>
 <div>
  <pre><span></span><span>head</span> <span>::</span> <span>NonEmpty</span> <span>a</span> <span>-&gt;</span> <span>a</span>
<span>head</span> <span>xs</span> <span>=</span> <span>case</span> <span>toList</span> <span>xs</span> <span>of</span>
  <span>x</span><span>:</span><span>_</span> <span>-&gt;</span> <span>x</span>
  <span>[]</span>  <span>-&gt;</span> <span>error</span> <span>"impossible: empty NonEmpty value"</span>
</pre></div>

</div>

<p>This might not seem like a big deal, since it seems unlikely such a case would ever happen. But that reasoning hinges entirely on trusting the correctness of the module that defines <code>NonEmpty</code>, while the constructive definition only requires trusting the GHC typechecker. As we generally trust that the typechecker works correctly, the latter is a much more compelling proof.</p>



<p>If you are fond of newtypes, this whole argument may seem a bit troubling. It may seem like I‚Äôm implying newtypes are scarcely better than comments, albeit comments that happen to be meaningful to the typechecker. Fortunately, the situation is not quite that grim‚Äînewtypes <em>can</em> provide a sort of safety, just a weaker one.</p>

<p>The primary safety benefit of newtypes is derived from abstraction boundaries. If a newtype‚Äôs constructor is not exported, it becomes opaque to other modules. The module that defines the newtype‚Äîits ‚Äúhome module‚Äù‚Äîcan take advantage of this to create a <em>trust boundary</em> where internal invariants are enforced by restricting clients to a safe API.</p>

<p>We can use the <code>NonEmpty</code> example from above to illustrate how this works. We refrain from exporting the <code>NonEmpty</code> constructor, and we provide <code>head</code> and <code>tail</code> operations that we trust to never actually fail:</p>

<div>
 <div>
  <pre><span></span><span>module</span> <span>Data.List.NonEmpty.Newtype</span>
  <span>(</span> <span>NonEmpty</span>
  <span>,</span> <span>cons</span>
  <span>,</span> <span>nonEmpty</span>
  <span>,</span> <span>head</span>
  <span>,</span> <span>tail</span>
  <span>)</span> <span>where</span>

<span>newtype</span> <span>NonEmpty</span> <span>a</span> <span>=</span> <span>NonEmpty</span> <span>[</span><span>a</span><span>]</span>

<span>cons</span> <span>::</span> <span>a</span> <span>-&gt;</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>NonEmpty</span> <span>a</span>
<span>cons</span> <span>x</span> <span>xs</span> <span>=</span> <span>NonEmpty</span> <span>(</span><span>x</span><span>:</span><span>xs</span><span>)</span>

<span>nonEmpty</span> <span>::</span> <span>[</span><span>a</span><span>]</span> <span>-&gt;</span> <span>Maybe</span> <span>(</span><span>NonEmpty</span> <span>a</span><span>)</span>
<span>nonEmpty</span> <span>[]</span> <span>=</span> <span>Nothing</span>
<span>nonEmpty</span> <span>xs</span> <span>=</span> <span>Just</span> <span>$</span> <span>NonEmpty</span> <span>xs</span>

<span>head</span> <span>::</span> <span>NonEmpty</span> <span>a</span> <span>-&gt;</span> <span>a</span>
<span>head</span> <span>(</span><span>NonEmpty</span> <span>(</span><span>x</span><span>:</span><span>_</span><span>))</span> <span>=</span> <span>x</span>
<span>head</span> <span>(</span><span>NonEmpty</span> <span>[]</span><span>)</span>    <span>=</span> <span>error</span> <span>"impossible: empty NonEmpty value"</span>

<span>tail</span> <span>::</span> <span>NonEmpty</span> <span>a</span> <span>-&gt;</span> <span>[</span><span>a</span><span>]</span>
<span>tail</span> <span>(</span><span>NonEmpty</span> <span>(</span><span>_</span><span>:</span><span>xs</span><span>))</span> <span>=</span> <span>xs</span>
<span>tail</span> <span>(</span><span>NonEmpty</span> <span>[]</span><span>)</span>     <span>=</span> <span>error</span> <span>"impossible: empty NonEmpty value"</span>
</pre></div>

</div>

<p>Since the only way to construct or consume <code>NonEmpty</code> values is to use the functions in <code>Data.List.NonEmpty.Newtype</code>‚Äôs exported API, the above implementation makes it impossible for clients to violate the non-emptiness invariant. In a sense, values of opaque newtypes are like <em>tokens</em>: the implementing module issues tokens via its constructor functions, and those tokens have no intrinsic value. The only way to do anything useful with them is to ‚Äúredeem‚Äù them to the issuing module‚Äôs accessor functions, in this case <code>head</code> and <code>tail</code>, to obtain the values contained within.</p>

<p>This approach is significantly weaker than using a constructive datatype, since it is theoretically possible to screw up and accidentally provide a means to construct an invalid <code>NonEmpty []</code> value. For this reason, the newtype approach to type safety does not on its own constitute a <em>proof</em> that a desired invariant holds. However, it restricts the ‚Äúsurface area‚Äù where an invariant violation can occur to the defining module, so reasonable confidence the invariant really does hold can be achieved by thoroughly testing the module‚Äôs API using fuzzing or property-based testing techniques.<sup><a href="#2020-11-01-names-are-not-type-safety-footnote-2-definition" name="2020-11-01-names-are-not-type-safety-footnote-2-return">2</a></sup></p>

<p>This tradeoff may not seem all that bad, and indeed, it is often a very good one! Guaranteeing invariants using ‚Ä¶</p></article></div></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://lexi-lambda.github.io/blog/2020/11/01/names-are-not-type-safety/">http://lexi-lambda.github.io/blog/2020/11/01/names-are-not-type-safety/</a></em></p>]]>
            </description>
            <link>http://lexi-lambda.github.io/blog/2020/11/01/names-are-not-type-safety/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24963821</guid>
            <pubDate>Mon, 02 Nov 2020 00:27:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Collision]]>
            </title>
            <description>
<![CDATA[
Score 128 | Comments 14 (<a href="https://news.ycombinator.com/item?id=24963131">thread link</a>) | @vijayr02
<br/>
November 1, 2020 | https://fiftytwo.in/story/collision/ | <a href="https://web.archive.org/web/*/https://fiftytwo.in/story/collision/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-v-154a69ab=""><div data-v-154a69ab=""><p>
              T
            </p> <div data-v-154a69ab=""><p>hat November evening, the people of Charkhi Dadri town, about 100km west of Delhi, were done with the day‚Äôs work out in the fields. Some of them heard the sky detonate with thunder and erupt into flames. On the ground, doors and windows crumbled. Glass shards flew through the air.</p><p>Mistaking it for an earthquake, residents streamed out of their homes, only to find over 500 tonnes of material pouring out from the sky‚Äîwhat an <em>India Today</em> story vividly described as ‚Äúthe equivalent of 600 Maruti cars‚Äù. The planes plunged into the mustard and cotton fields, miraculously hitting no one on the ground. There were rumours of a few survivors found in the wreckage, but none were ever brought to a hospital.&nbsp;</p></div></div><p>At about 9pm, as Prannoy Roy finished reading for <em>The News Tonight</em>, the daily English bulletin on Doordarshan, wire services broke the story of a mid-air collision just outside Delhi. Most journalists had already left for the day, and the crowd at the studios of NDTV, a private news production company, was thinning. Writer and film-maker Natasha Badhwar, then a 25-year-old cameraperson two years out of Jamia Millia Islamia University, quickly volunteered herself for the story. Along with reporter Radhika Bordia and camera assistant Kanan Patra, she got into an office vehicle and headed towards Charkhi Dadri. As they approached the site, they saw a massive inferno raging in the distance, ringed by smaller fires. </p><p>They got out of the car and began to walk through the debris and darkness. When Badhwar struck something, the group stopped and switched on the camera light. A stiff body swam into view, dead, but not burnt or broken. The man looked in death as he might have in life. How do you film a dead body, Badhwar wondered. ‚ÄúThere was a sense of horror I could not shut out,‚Äù she said. ‚ÄúThere was a sense of incredulity: How could this happen? How could two planes collide?‚Äù</p><p>Through the night, journalists arrived to scenes of damage and disarray. Passports, bags of food, toys, slippers, wallets, wrenched-open suitcases and airplane seats were flung around. Disembodied human limbs lay scattered like confetti. The full horror would not be apparent until sunrise, but the acrid stench of burning fuselage and singed remains had already begun choking the air.</p><p>At one point, the grandson of a prominent politician waltzed in,<a href="" onclick="return!1"><sup id="2pzmabfu9t5s">[4]</sup></a> chaperoned by a group of sidekicks and handlers. He had no reason to be there but quickly became the centre of attention. When asked what he was doing there, he smarmily replied, ‚ÄúPlane curiosity.‚Äù&nbsp;</p><p>Through the night, villagers tried to find survivors as emergency services arrived. By the morning, several bodies were moved into a school which had been converted to a makeshift morgue. Debris had scattered over a radius of several kilometres, complicating search and rescue operations. </p><p>KPS Nair was among the first team of investigators and diplomats to reach the scene as dawn broke. Then a Deputy Director with the Directorate General of Civil Aviation (DGCA), Nair had been in a meeting on air safety when news filtered in the previous evening. The irony was inescapable. ‚ÄúMy first thought was, my god!‚Äù he recalled over the phone in June 2020. ‚ÄúWhy do such things happen in spite of the efforts of human beings to make better flying machines and systems?‚Äù</p><p>As lead investigator, his first impulse was to locate the ‚Äúblack boxes‚Äù, vermilion-coloured crash-proof casings that held the cockpit voice recorder (CVR) and the flight data recorder (FDR). The CVR, which saved the last 30 minutes of cockpit conversation, could provide precious insight into what the crew had said to each other. The FDR would provide readings on altitude, speed, flight path and engine power to help build a picture of both planes‚Äô vital parameters. ‚ÄúThis,‚Äù Nair explained, ‚Äúis the most important tool in the hands of an investigator from the accident site.‚Äù</p><div data-v-154a69ab=""><p>Both black boxes were found before nightfall on the day following the accident. The cockpit of the Saudi aircraft was stuck deeper in the ground, irrevocably damaged, none of its instruments readable. All three of its altimeters were destroyed in the fire.&nbsp;</p><p>The Kazakh plane had suffered less damage and yielded four altimeters. Two of them, curiously, showed different readings: 4,443m (14,576 feet) and 4,540m (14,895 feet). The other two were unreadable.&nbsp;</p></div><p>Nair scoured the fields, analysing the debris scattered across two sites seven kilometres apart, searching for clues in the carcasses of the two planes. ‚ÄúWe approach any accident with an open mind,‚Äù he said. ‚ÄúWe ask, did everyone involved apply the necessary procedures? The contributing factors we look at include the ATC communications, pilot error, engineering and maintenance aspects.‚Äù </p><p>AK Chopra, then head of air safety for the North region at the DGCA, also reached the site with his team. Chopra sensed something puzzling, even counter-intuitive. The frontal structure of the Kazakh flight was mostly intact, which indicated that this hadn‚Äôt been a head-on collision. If the Kazakh plane was supposed to have been higher (15,000 feet), why did a primary assessment suggest that it had hit the Saudi plane from below? </p><p>By mid-afternoon, just 19 bodies had been claimed from the morgue. Rescue workers tried to pick through the debris, retrieving limbs and luggage. Badhwar even encountered the studio in-charge from Jamia‚Äôs Mass Communication Research Centre, mourning the loss of a younger brother who had been on the flight.&nbsp;</p><p>For at least 15 hours after the crash, there was little sense of sanctity about the site, which was only cordoned off much later.<a href="" onclick="return!1"><sup id="z5s3bz6hivmy">[5]</sup></a> Some people rifled through the wreckage and corpses, trying to make off with the spoils. But for the most part, people were kind and helpful, bringing sheets from their homes for the bodies, volunteering tractors in search efforts, and offering tea to families. </p><p>Over time, the horror of losing a loved one morphed into the numbing pain of dealing with paperwork. Relatives scrambling to apply for compensation and obtain death certificates shuttled from one office to another. The Saudis announced compensation of up to GBP 12,000 for the families of passengers, and some compensation<a href="" onclick="return!1"><sup id="k4yf7bl2nlj4">[6]</sup></a> for the villagers in whose fields the flights had crashed.&nbsp;</p><p>In the end, 94 bodies were charred beyond recognition or totally mutilated. They lay piled up in the morgue, their limbs on ice. Many of the dead were from mofussil areas. Their families would hear about the tragedy only much later, particularly since some didn‚Äôt even know their relatives were on board.<a href="" onclick="return!1"><sup id="xjunwbq7ccht">[7]</sup></a> Others, perhaps, never found out at all, given the underhand manner in which agents and touts recruited people for jobs abroad.<a href="" onclick="return!1"><sup id="am1u2ycez0x2">[8]</sup></a></p><p>After 15 days in the morgue, the unclaimed bodies were divided in proportion to the Hindus and Muslims on board according to the passenger manifest, a compromise between community leaders following an initial dispute. First, everyone went to the Muslim burial ground; later they went to the crematorium. Badhwar, still processing the disaster she had covered, attended the mass funerals and filmed them. ‚ÄúThe smell of burning flesh still haunted me,‚Äù she said. ‚ÄúI felt I had some undone mourning to do.‚Äù</p></div></div>]]>
            </description>
            <link>https://fiftytwo.in/story/collision/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24963131</guid>
            <pubDate>Sun, 01 Nov 2020 22:33:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Algebraic Effects for React Developers]]>
            </title>
            <description>
<![CDATA[
Score 122 | Comments 72 (<a href="https://news.ycombinator.com/item?id=24962842">thread link</a>) | @reesew
<br/>
November 1, 2020 | https://reesew.io/posts/react-algebraic-effects | <a href="https://web.archive.org/web/*/https://reesew.io/posts/react-algebraic-effects">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><blockquote>
<p>It‚Äôs in words that the magic is‚ÄîAbracadabra, Open Sesame, and the rest‚Äîbut the magic words in one story aren‚Äôt magical in the next.
The real magic is to understand which words work, and when, and for what; the trick is to learn the trick.</p>
<p>- John Barth, <em>Chimera</em></p>
</blockquote>
<p>It‚Äôs been quite some time since Hooks were officially stabilized in <a href="https://reactjs.org/blog/2019/02/06/react-v16.8.0.html" target="_blank" rel="nofollow noopener noreferrer">React 16.8</a>, and with them came a fundamentally different way of understanding the way our applications work.
This is both a blessing and a curse: Hooks are much closer to the React programming model and help avoid a certain class of subtle and confusing bugs, but some developers have also expressed concerns that <a href="https://jaredpalmer.com/blog/react-is-becoming-a-black-box" target="_blank" rel="nofollow noopener noreferrer">React is becoming a black box</a>.
These concerns are completely valid; Hooks can often seem ‚Äúmagical,‚Äù since most of the complexities are hidden away in React‚Äôs internals.</p>
<p>Much of that ‚Äúmagical‚Äù feeling is simply due to the fact that Hooks are based on some <a href="https://reactjs.org/docs/hooks-faq.html#what-is-the-prior-art-for-hooks" target="_blank" rel="nofollow noopener noreferrer">prior art</a> and programming language research that many developers simply aren‚Äôt familiar with.
Understanding some of the motivations and inspirations for Hooks can help build a mental model for what‚Äôs happening behind the scenes.
While there are several sources of influence on the original Hooks proposal, arguably the most important is the notion of algebraic effects.</p>
<blockquote>
<p>‚ùó‚ùó Note that this article is <em>not</em> an introduction into how to <em>use</em> Hooks or how Hooks work internally.
This is merely a way to <em>think</em> about Hooks. For more information about how to use them, I suggest
starting with <a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="nofollow noopener noreferrer">the docs</a>.</p>
</blockquote>
<p>Before diving into the details of algebraic effects, let‚Äôs first take a step back.</p>
<h2 id="why-do-we-need-hooks"><a href="#why-do-we-need-hooks" aria-label="why do we need hooks permalink"></a>Why Do We Need Hooks?</h2>
<p>Class components seemed to be working well enough, why add <em>another</em> way of writing components that, at least at face value, do the same thing?</p>
<p><img src="https://reesew.io/media/DysfunctionalClassComponents.png" alt="First tweet by @rickhanlonii: &quot;The existence of functional components implies the existence of dysfunctional components&quot;. Reply tweet by @sebmarkbage: &quot;We call those 'class components'.&quot;"></p>
<p>One of React‚Äôs core principles is the idea that an application‚Äôs user interface is a pure function of that application‚Äôs state.
Here, ‚Äústate‚Äù can refer to any combination of local component state and global state, such as a Redux store.
When that state changes and propagates through your component tree, the output represents your new UI after that state change.
This is, of course, an abstraction over the nuts and bolts of how that update actually happens, since React handles the actual reconciliation and DOM updates that are necessary, but this core principle means, at least in theory, that our UI is always synchronized with our data.</p>
<p>Of course, this isn‚Äôt always true.
Class components expose certain scenarios that allow us to ignore changes in state if we don‚Äôt effectively handle those state changes in our lifecycle methods.
Dan Abramov wrote an <a href="https://overreacted.io/writing-resilient-components/#dont-stop-the-data-flow-in-side-effects" target="_blank" rel="nofollow noopener noreferrer">excellent article</a> on some common pitfalls related to this that‚Äôs worth a read for more detail.
In short, class components use different lifecycle methods to handle side effects, but that maps side effects to DOM operations, <em>not</em> state changes.
This means that while the visual elements of our UI may respond to state changes, our side effects might not.</p>
<p>Because class components have to do these internal updates to synchronize their internal state when props change, they are by definition <em>impure</em>.
<em>But wait</em>, you say, <em>I thought we said that UI was a <em>pure</em> function of state</em>.</p>
<p><em>Precisely</em>.
This is where Hooks come into play.</p>
<p>Hooks represent a different way of thinking about effects.
Instead of thinking about the entire lifecycle of a component, Hooks allow us to narrow our focus to only the current state.
We can then <em>declare</em> the states in which we want our effects to run, ensuring that those state changes are reflected in our effects.
Of course, an ‚Äúeffect‚Äù can be many things, from handling state with <code>useState</code>, making network requests or manually updating the DOM with <code>useEffect</code>, or calculating expensive callback functions with <code>useCallback</code>.</p>
<p>But how do we reason about those side effects within a pure function?
I‚Äôm glad you asked!</p>
<h2 id="an-introduction-to-algebraic-effects"><a href="#an-introduction-to-algebraic-effects" aria-label="an introduction to algebraic effects permalink"></a>An Introduction to Algebraic Effects</h2>
<p><em>Algebraic effects</em> are a generalized approach to reasoning about computational effects in pure contexts by defining an <em>effect</em>, a set of operations, and an effect <em>handler</em>, which is responsible for handling the semantics of how to implement effects.<sup id="fnref-1"><a href="#fn-1">1</a></sup>
Algebraic effects generalize over a whole host of potential uses, like input and output, handling state, <code>async</code>/<code>await</code>, and many more.</p>
<p>This is a little abstract, so let‚Äôs write some code to see how this works in practice.
Unfortunately, JavaScript doesn‚Äôt actually support algebraic effects, although React might mimic them internally.
While there are a few different languages<sup id="fnref-2"><a href="#fn-2">2</a></sup> that support algebraic effects, we‚Äôre going to use <a href="https://github.com/matijapretnar/eff" target="_blank" rel="nofollow noopener noreferrer">Eff</a>, a functional programming language designed specifically around algebraic effects.
Don‚Äôt worry, <em>most</em> people won‚Äôt know Eff, so I‚Äôll explain some syntax as we go along<sup id="fnref-3"><a href="#fn-3">3</a></sup>.</p>
<p>A common use case for algebraic effects is handling stateful computations.
Remember that effects are just in an interface with a set of operations.
In Eff, we defined effects with the <code>effect</code> keyword and a type signature:</p>
<!---
I'm using OCaml tags in the markdown here because there's obviously
no highlighting options for Eff.
-->
<div data-language="ocaml"><pre><code>


<span>type</span> user <span>=</span> string <span>*</span> int

effect <span>Get</span><span>:</span> user
effect <span>Set</span><span>:</span> user <span>-&gt;</span> unit</code></pre></div>
<p>Once we‚Äôve defined what effects our effects will look like, we can define how our effects are handled by using the <code>handler</code> keyword.</p>
<div data-language="ocaml"><pre><code><span>let</span> state <span>=</span> handler
  <span>|</span> y <span>-&gt;</span> <span>fun</span> currentState <span>-&gt;</span> <span>(</span>y<span>,</span> currentState<span>)</span>
  <span>|</span> effect <span>Get</span> k <span>-&gt;</span> <span>(</span><span>fun</span> currentState <span>-&gt;</span> <span>(</span>continue k currentState<span>)</span> currentState<span>)</span>
  <span>|</span> effect <span>(</span><span>Set</span> newState<span>)</span> k <span>-&gt;</span> <span>(</span><span>fun</span> <span>_</span> <span>-&gt;</span> <span>(</span>continue k <span>(</span><span>)</span><span>)</span> newState<span>)</span>
<span>;</span><span>;</span></code></pre></div>
<p>Hmm, this looks a little trickier ‚Äî let‚Äôs break it down a bit.
We have a <code>handler</code> with three branches, and all of them return a function.
That function will be used to handle some effect (or lack thereof).</p>
<p>The first branch, <code>y -&gt; fun currentState -&gt; (y, currentState)</code>, represents <em>no</em> effect, which happens when we reach the end of the block we‚Äôre handling (which we‚Äôll see shortly). <code>y</code> here is the return value of the function, so this simply returns a tuple of the inner return and the state.</p>
<p>The second and third branches match our effects, but there‚Äôs a suspicious argument <code>k</code>.
<code>k</code> here is a <em>continuation</em>, which represents the rest of the computation <em>after</em> where we perform an effect.</p>
<div><p>GOTO, but better</p><div><blockquote>
<p>At my heart, I am something like the goto instruction; my creation sets the label, and my methods do the jump. However, this is a really powerful kind of goto instruction. If your hair is turning green at this point, don‚Äôt worry as you will probably only deal with users of continuations, rather than with the concept itself.</p>
</blockquote><p>This little gem comes from the GNU Smalltalk <a href="https://www.gnu.org/software/smalltalk/manual-base/html_node/Continuation.html" target="_blank" rel="nofollow noopener noreferrer"><code>Continuation</code> documentation</a>.
For some of you, the reference to <code>GOTO</code> might make you a little nauseated, but there‚Äôs a reason that continuations still have their place as a control flow, which is about <em>context</em>.
One of the more treacherous aspects of <code>GOTO</code> is getting plopped into an invalid context, but with continuations, you‚Äôre really storing an in-flight <em>process</em>, so the variables, pointers, and so on will all be valid.<sup id="fnref-5"><a href="#fn-5">5</a></sup></p></div></div>
<p>Because continuations represent the entire process in action, they‚Äôre essentially a snapshot of the call stack at the time of the effect.
When we get to an effect, it‚Äôs almost as if we hit a giant pause button on the computation until we properly handle the effect.
Calling <code>continue k</code><sup id="fnref-4"><a href="#fn-4">4</a></sup> is like hitting the play button again.</p>
<p>Alright, I think we‚Äôre ready to see our effect handlers in action.
Right now, we have a user in state; let‚Äôs wish them well on their birthday:</p>
<div data-language="ocaml"><pre><code><span>let</span> celebrate <span>=</span> <span>with</span> state handle
  <span>let</span> <span>(</span>name<span>,</span> age<span>)</span> <span>=</span> perform <span>Get</span> <span>in</span>

  print<span>_</span>string <span>"Happy Birthday, "</span><span>;</span>
  print<span>_</span>string name<span>;</span>
  print<span>_</span>endline <span>"!"</span><span>;</span>

  perform <span>(</span><span>Set</span> <span>(</span>name<span>,</span> age<span>+</span><span>1</span><span>)</span><span>)</span><span>;</span>
  perform <span>Get</span>
<span>;</span><span>;</span>

celebrate<span>(</span><span>(</span><span>"Henry"</span><span>,</span> <span>39</span><span>)</span><span>)</span><span>;</span><span>;</span></code></pre></div>
<p>When we start off this computation, we first <code>Get</code> our user from state, which runs the second branch in our handler.
At this point, we‚Äôve hit the pause button, so the function has stopped running while we get this from state.
The handler gives us back a function, which calls <code>continue k currentState</code>, resuming our computation with the value of <code>currentState</code>.</p>
<p>This same flow happens every time we <code>perform</code> an effect.
Hit pause, do some work, hit play.</p>
<p><img src="https://reesew.io/media/CelebrateToBeContinued.png" alt="Our code for the celebrate function, overlaid with the &quot;To Be Continued&quot; meme from Jojo's Bizarre Adventure."></p>
<!-- markdownlint-disable MD033 -->
<figcaption>I'm so sorry</figcaption>
<p>And here, dear reader, is where the power of algebraic effects really shines.
You see, it doesn‚Äôt really <em>matter</em> how we hold state.
Sure, right now it‚Äôs just an object in memory, but what if it was in a database?
What if it was stored in a browser‚Äôs <code>localStorage</code>?
As far as <code>celebrate</code> knows, these are <em>all the same</em>.
If we wanted, we could swap out our <code>state</code> handler with a <code>redisState</code> handler that stored state in a key-value store.</p>
<p>In JavaScript, your code has to be aware of what‚Äôs synchronous and what‚Äôs not.
If this were to change in the future, and state was handled asynchronously, we would need to start handling Promises, which would require changes across <em>everything</em> that touches this function.
But with algebraic effects, instead of maintaining a running process that holds a reference to a <em>different</em> process, we can simply stop the current process altogether until our effects are finished.</p>
<p>Of course, state isn‚Äôt the only thing that we can handle with algebraic effects.
Let‚Äôs say we have some network request we want to make or cleanup we want to execute, but we only want to do it <em>after</em> our function is done.
We‚Äôll call it a <code>Defer</code> effect.</p>
<div data-language="ocaml"><pre><code>effect <span>Defer</span><span>:</span> <span>(</span>unit <span>-&gt;</span> unit<span>)</span> <span>-&gt;</span> unit

<span>let</span> defer <span>=</span> handler
    <span>|</span> y <span>-&gt;</span> <span>fun</span> <span>(</span><span>)</span> <span>-&gt;</span> <span>(</span><span>)</span>
    <span>|</span> effect <span>(</span><span>Defer</span> effectFunc<span>)</span> k <span>-&gt;</span>
        <span>(</span><span>fun</span> <span>(</span><span>)</span> <span>-&gt;</span>
            continue k <span>(</span><span>)</span><span>;</span>
            effectFunc <span>(</span><span>)</span>
        <span>)</span>
<span>;</span><span>;</span></code></pre></div>
<p>Notice that <code>continue k ()</code> doesn‚Äôt have to be the last part of the handler, as it was in our <code>state</code> handler.
We can call continuations <em>whenever</em> we want and however many times we want ‚Äî remember, they‚Äôre just representations of a process.</p>
<p>To make sure this works as intended, let‚Äôs make a quick sketch of how this might work in practice:</p>
<div data-language="ocaml"><pre><code><span>let</span> runWithCleanup <span>=</span> <span>with</span> defer handle
    print<span>_</span>endline <span>"Starting our computation"</span><span>;</span>
    perform <span>(</span><span>Defer</span> <span>fun</span> <span>(</span><span>)</span> <span>-&gt;</span> print<span>_</span>endline <span>"Running cleanup"</span><span>)</span><span>;</span>
    
    print<span>_</span>endline <span>"Finishing computation"</span>
<span>;</span><span>;</span>

runWithCleanup<span>(</span><span>)</span><span>;</span><span>;</span></code></pre></div>
<p>When we run this, we get the following in our terminal:</p>
<div data-language="shell"><pre><code>$ eff defer.eff</code></pre></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://reesew.io/posts/react-algebraic-effects">https://reesew.io/posts/react-algebraic-effects</a></em></p>]]>
            </description>
            <link>https://reesew.io/posts/react-algebraic-effects</link>
            <guid isPermaLink="false">hacker-news-small-sites-24962842</guid>
            <pubDate>Sun, 01 Nov 2020 21:51:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Winamp for Windows 10]]>
            </title>
            <description>
<![CDATA[
Score 261 | Comments 136 (<a href="https://news.ycombinator.com/item?id=24962823">thread link</a>) | @zindera
<br/>
November 1, 2020 | http://www.mywinamp.com/winamp-for-windows-10-download/ | <a href="https://web.archive.org/web/*/http://www.mywinamp.com/winamp-for-windows-10-download/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>



<p>Last updated: November 01, 2020<br>
File Size: 22.00 MB</p>
<p>Winamp has remained a firm favourite for many tech geeks and music lovers alike. It had appeared to lose its way for a while, as it was slow in coming forward with newer versions, which could be supported by more modern software. This all looks set to change and could be the revival that Winamp truly deserves. The new update, BETA version 5.8, seems to have found its way onto the internet, hinting that this could be a step towards this fan favourite being supported by Windows 10. Although its Belgian owners, Radionomy, are yet to make a formal release statement.</p>
<p><a href="http://www.mywinamp.com/wp-content/uploads/2015/07/Winamp-Windows-101.jpg"><img loading="lazy" src="http://www.mywinamp.com/wp-content/uploads/2015/07/Winamp-Windows-101-300x225.jpg" alt="Download Winamp for Windows 10" width="300" height="225" srcset="http://www.mywinamp.com/wp-content/uploads/2015/07/Winamp-Windows-101-300x225.jpg 300w, http://www.mywinamp.com/wp-content/uploads/2015/07/Winamp-Windows-101.jpg 1024w, http://www.mywinamp.com/wp-content/uploads/2015/07/Winamp-Windows-101-541x406.jpg 541w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
<p>Support for Windows Audio seems to be one of the key developments and this change allows for complete compatibility with Windows 10. No doubt, it will have the usual teething problems, but as has been shown before, it‚Äôs the fans and enthusiasts who have helped to push the software in the right direction when it comes to tweaks and apps. Winamp has launched their own forum for just this purpose and it‚Äôs great to see fans new and old being able to discuss both their excitement and, as to be expected at this early stage, some of their frustrations.</p>
<p>The goal of this new set of developers has been clearly defined as, the intention to make Winamp the player of today and provide an up to date and complete listening experience. One of the best things they‚Äôve done so far is to remove any old pro licences, making Winamp 100% free to use again. There are also some other current fixes which have been included in the new version, these fixes include, resolved ‚Äì slow loading issue, improved ‚Äì updated scroll bar and buttons, fixed ‚Äì various memory leaks. There are tons more additions and you can see the complete list of updates, fixes and resolutions within the new BETA version.</p>
<p>The go-to functions of customisable skins, visualisation, plugins and the ability to design and make your media player unique to you, are all still high on the agenda and remain some of the software‚Äôs key features. The fact that it can now be supported by Windows 10 has also opened up other new avenues. There are more advanced video plugins which can now be supported whereas previously there were some issues with this. There is no multinational version available with Lang packs as yet, but they‚Äôre working on the language packs, with Spanish and Polish currently available on the BETA version.</p>
<p>For more avid users of Winamp, they‚Äôll be pleased to know the CD playback and ripping functions now use native Windows API instead of Sonic. The AAC decoder now uses Media foundation, Vista and higher and the H.264 decoder is now also using Media foundation, Vista and higher. These technical changes demonstrate that Winamp is taking itself seriously and has finally understood there is still a huge legion of fans who will willingly support and promote this unequalled media player. There is still nothing as flexible, yet as technically delightful as Winamp when it comes to creating and building your own individual home for music.</p>
<p>Back in October 2018, Radionomy‚Äôs CEO, Alexandre Saboundjan hinted that we could expect to see a version 6 available in 2019. 5 months into the year there have been no further corporate updates, including whether or not it will be able to support newer services or how it might integrate with the big players such as Apple Music and Spotify. However, the fact that the owners of Winamp are starting to understand the true potential behind this awesome media player can surely be nothing but good a sign for hardcore Winamp enthusiasts.</p>
<p>The beauty of Winamp is that you experience all of your music in a single place and this makes it a singular experience. There‚Äôs no need to go switching between platforms and getting lost in remembering where dedicated playlists are saved. The visualization aspect of Winamp and its spectrum analyser has always allowed people to bring their music to life. To see and feel it. It‚Äôs fantastic to see the BETA version available, and the input this is allowing fans and users alike to generate.</p>
<p>We‚Äôve touched on some of the updates but there are a few others that deserve a mention. You can slow down the pop-up buttons, so they don‚Äôt overtake the screen and they‚Äôve also improved the browse path and edit title functions in Editor. The OpenMPT-base module player has also been improved and they‚Äôve replaced the MikMod player. The added functionality which can now be supported by Windows 10 is set to continue and we can expect to see more and advances over the coming months.</p>
<p>With only the BETA version being released so far, it‚Äôs safe to say, this is a work in progress, but I for one look forward to being a part of the continuing journey to restoring Winamp to its former and well-deserved glory.</p>
<p>Here you can find the Winamp for Windows 10 (Windows media player) with contain required update patches. Windows 10 had backward compatibility with Winamp skins and popular plugins. Compatibility Winamp updates for security&nbsp;support are have already installed. Winamp works perfectly well with Windows 10.</p>
<p><a href="http://www.mywinamp.com/downloads/Winamp-5.666-MULTI.zip">Download Winamp for Windows 10</a></p>
<p>Winamp Essentials Pack 5.6 &amp; 5.7 <a href="http://www.mywinamp.com/winamp-essentials-pack/">Download page</a></p>
 </div></div>]]>
            </description>
            <link>http://www.mywinamp.com/winamp-for-windows-10-download/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24962823</guid>
            <pubDate>Sun, 01 Nov 2020 21:48:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[ARM ecosystem disintegration and the rise of RISC-V]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24962692">thread link</a>) | @ingve
<br/>
November 1, 2020 | https://www.reflectionsofthevoid.com/2020/11/arm-ecosystem-disintegration-and-rise.html | <a href="https://web.archive.org/web/*/https://www.reflectionsofthevoid.com/2020/11/arm-ecosystem-disintegration-and-rise.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="post-body-5235483455562909851" itemprop="description articleBody"><p>
#ARM acquisition by #Nvidia is making people uneasy.&nbsp;</p><div><p>And the early sign of the unravelling of the #ARM ecosystem start to appear:&nbsp;<a href="https://www.servethehome.com/impact-of-marvell-thunderx3-general-purpose-skus-canceled/" target="_blank">ThunderX3 general-purpose ARM CPU has been cancelled</a>.</p><p>One would ask why spending $$ to build a better product and increase its number of consumers if, for that, it will have to use the Nvidia IP and compete directly against the IP owner. <br>If you combine this with the difficult viability of putting together a general-purpose #ARM alternative to #Intel / #AMD as #ARM vendors are effectively competing on cost with much lower volumes. </p><p>We start to understand why Marvell decided to shift toward the much <a href="https://seekingalpha.com/article/4374263-marvell-technology-group-ltd-mrvl-ceo-matt-murphy-presents-deutsche-bank-2020-virtual">more trendy IPU/PDU/Smartnic market</a>. </p><p>On the other hand, I think we will see an acceleration of RISC-V adoption. Eating away at the traditional #ARM market share. This will be driven by the large scale edge deployment of #riscv sees chips with a RISC-V core and an #NPU (neural processing unit). These chips can be churned out at incredibly cheap cost, less than $10, and these will become ubiquitous really rapidly. </p><p>It might take 10-15 years but ultimately this will seal the fate of the ARM franchise. </p><p><a href="https://1.bp.blogspot.com/-QxQI2JLX7HU/X58CBfN4RAI/AAAAAAAAWi4/0TkyizvfCecI4ADDf-D3N7CjCRZmtZnqACLcBGAsYHQ/s680/ElBuUPDXUAI1ePq.png" imageanchor="1"><img data-original-height="655" data-original-width="680" src="https://1.bp.blogspot.com/-QxQI2JLX7HU/X58CBfN4RAI/AAAAAAAAWi4/0TkyizvfCecI4ADDf-D3N7CjCRZmtZnqACLcBGAsYHQ/s320/ElBuUPDXUAI1ePq.png" width="320"></a></p><br></div>

</div></div>]]>
            </description>
            <link>https://www.reflectionsofthevoid.com/2020/11/arm-ecosystem-disintegration-and-rise.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24962692</guid>
            <pubDate>Sun, 01 Nov 2020 21:33:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Flutter Web: A Fractal of Bad Design]]>
            </title>
            <description>
<![CDATA[
Score 104 | Comments 71 (<a href="https://news.ycombinator.com/item?id=24962504">thread link</a>) | @adrian_mrd
<br/>
November 1, 2020 | https://hugotunius.se/2020/10/31/flutter-web-a-fractal-of-bad-design.html | <a href="https://web.archive.org/web/*/https://hugotunius.se/2020/10/31/flutter-web-a-fractal-of-bad-design.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main"><article>
  
  <div><p>The web has a long and rich history dating back to the nineties at CERN. Back then <a href="https://twitter.com/timberners_lee">Tim Berners-Lee</a> laid the foundation of HTML that is still around today. There have been attempts to replace it with varying success but none have been successful, for good reason. HTML and the later invention of CSS are a remarkably powerful set of tools to build all kinds of experiences on the web. People are still trying to replace HTML, which brings us to the topic of this post: Flutter Web.</p>

<p><a href="https://flutter.dev/web">Flutter Web</a> is part of Google‚Äôs <a href="https://flutter.dev/">Flutter</a> framework for building cross platform UI. Hailed by many developers as the best thing since sliced bread, my opinion of it lacks the rose coloured glasses. I haven‚Äôt looked at Flutter for other platforms than web so I cannot comment on it other than that the general principle of Flutter is a terrible idea. Flutter works by throwing away the native UI toolkits provided by the platform and rendering everything from scratch using OpenGL et al. This translates extremely poorly to the web platform in particular. It‚Äôs worth noting that Flutter for Web is currently in beta and the problems I am about to detail could be addressed. However, I believe these issues are fundamental to Flutter‚Äôs design choices so I feel confident in my criticism.</p>

<h2 id="semantic-html">Semantic HTML</h2>

<p>Anyone learning HTML these days would have encountered the term ‚ÄúSemantic HTML‚Äù because it is such an important part of modern web. <a href="https://www.petelambert.com/">Pete Lambert</a> describes why this is important in the excellent blog post <a href="https://www.petelambert.com/journal/html-is-the-web">HTML is the Web</a>. In short, the visible portion of a website, i.e. presentation, is only half the story. To take an example Pete used, a <code>div</code> with an <code>onClick</code> handler might be clickable and can be styled to look like a button, but that doesn‚Äôt make it a button. The semantic structure of a document matters because that‚Äôs how machines, not humans, understand the web. A <code>div</code> with an <code>onClick</code> handler doesn‚Äôt look like a link or a button to a screen reader, search engine crawler, or accessibility extension, it looks like a <code>div</code>.</p>

<p>Most importantly, semantic HTML is key for accessibility and other tools that let a user experience the web as they wish.</p>

<h2 id="a-fractal-of-bad-design">A Fractal of Bad Design</h2>

<p>Does Flutter Web generate semantic HTML? Not even close. It generates a patchwork of <code>canvas</code> elements, custom elements, and a few other HTML elements. In the demo app <a href="https://gallery.flutter.dev/#/reply">Reply</a>, how many buttons and links are there? If you guessed <strong>zero</strong>, congratulations you are as jaded and cynical as me. Let me reiterate that, an email app with no buttons and links! Because there are no links in particular, features like cmd/ctrl clicking to open a new tab, hovering links to see the URL, and using the context menu do not work.</p>

<p>I use the browser extension <a href="https://vimium.github.io/">Vimium</a> to navigate the web, it‚Äôs an amazingly powerful tool that relies on, you guessed it, semantic HTML. Does it work on pages built with Flutter Web? Fuck no. It doesn‚Äôt work because it tries to find things that are semantically clickable, like <code>button</code> or <code>a</code> elements, of which, as we have established, Flutter Web generates none. Vimium works on almost all websites I use because most developers, thankfully, don‚Äôt just stick <code>onClick</code> handlers on <code>div</code>s. However, whatever crazy shit Flutter Web does, doesn‚Äôt look clickable. Things being clickable that don‚Äôt look clickable is a good proxy for poor accessibility. For example, screen readers can navigate by landmarks, such as headings, <strong>links</strong>, forms, and other semantic elements, does any of this work with Flutter Web? Fuck no.</p>

<p>Even worse, unless you use special ‚Äúselectable‚Äù text, Flutter Web doesn‚Äôt even support selecting text. No joke, their own code examples have a ‚Äúcopy all‚Äù button to get around this.</p>

<p><a href="https://hugotunius.se/img/flutter-web-a-fractal-of-bad-design/code-example.png"><img src="https://hugotunius.se/img/flutter-web-a-fractal-of-bad-design/code-example.png?1604348346" alt="Screenshot of Flutter's Navigation Bar component with preview, code, and &quot;copy all&quot; button"></a></p>

<p>How did anyone look at this and say ‚Äúyeah nah, selecting text isn‚Äôt an important use case on the web‚Äù? Why does selecting text matter you ask? Some people use it to aid with reading by selecting the text they are currently reading, other people use it to(and I know this is wild) copy parts of the text, people with dyslexia use tools that read out selected portions of the text to help them read. Does any of this work with Flutter‚Äôs default, unselectable text? Fuck no!</p>

<p>While we are talking about dyslexia, another useful feature that help people who suffer from it is the ability to change the fonts of web pages to one they find easier to read, such as <a href="https://www.opendyslexic.org/">OpenDyslexic</a>. There are many tools that help with this and they all rely on the ability to inject custom CSS in a web page, to my surprise this actually looked to work when I tried it on some of the Flutter Web demos. However, looks deceive and while the font does apply it causes text to get cut off in almost all instances because of the terrible HTML Flutter generates. For example, in the ‚ÄúReply‚Äù email client here‚Äôs the tag for the word ‚ÄúReply‚Äù in the upper right</p>

<figure><pre><code data-lang="html"><span>&lt;p</span> <span>style=</span><span>"font-size: 18px; font-weight: normal; font-family: WorkSans_regular, -apple-system, BlinkMacSystemFont, sans-serif; color: rgb(255, 255, 255); letter-spacing: 0px; position: absolute; white-space: pre-wrap; overflow-wrap: break-word; overflow: hidden; height: 27px; width: 54px; transform-origin: 0px 0px 0px; transform: matrix(1, 0, 0, 1, 59, 3.5); left: 0px; top: 0px;"</span><span>&gt;</span>REPLY<span>&lt;/p&gt;</span></code></pre></figure>

<p>Cleaned up a bit and these are the attributes</p>

<figure><pre><code data-lang="plain">font-size: 18px;
font-weight: normal;
font-family: WorkSans_regular, -apple-system, BlinkMacSystemFont, sans-serif; color: rgb(255, 255, 255);
letter-spacing: 0px;
position: absolute;
white-space: pre-wrap;
overflow-wrap: break-word;
overflow: hidden;
height: 27px;
width: 54px;
transform-origin: 0px 0px 0px;
transform: matrix(1, 0, 0, 1, 59, 3.5);
left: 0px;
top: 0px;</code></pre></figure>

<p>Flutter Web generates absolutely positioned fixed sized HTML which instead of adopting to the text layout specified by the browser just cuts the text off.</p>

<p>Another useful feature that is common in accessibility extensions is making links stand out more. This works by injecting global CSS rules that target <code>a</code> tags on the page.</p>

<p><a href="https://hugotunius.se/img/flutter-web-a-fractal-of-bad-design/link-underlines.png"><img src="https://hugotunius.se/img/flutter-web-a-fractal-of-bad-design/link-underlines.png?1604348346" alt="Screenshot of links with link emphasis turned on which underlines them in multiple colours"></a></p>

<p>Does this work with Flutter Web (this questions is starting to feel redundant because the answer is almost always ‚ÄúNo‚Äù)? Fuck no! In general, users use custom stylesheets for a multitude of reasons not limited to accessibility. As a ‚Äúfun‚Äù exercise try this <a href="https://ssb22.user.srcf.net/css/">low vision stylesheet</a> on one of the <a href="https://gallery.flutter.dev/">Flutter Web demos</a> and see how readable the content is.</p>

<p>Another one of the <a href="https://gallery.flutter.dev/#/fortnightly">demos</a> in the Flutter Web Gallery is a news site. On news sites, I like to use the built-in ‚Äúreader mode‚Äù in my browser to get a reading experience that is free from clutter and better suites me. For example, when reading in bed late at night (which I know I shouldn‚Äôt do) it‚Äôs nice to have a soft, dark mode experience instead of the glaring black text on pure white that many publications use. Does reader mode work with Flutter Web website? Nope. It doesn‚Äôt work because, you guessed it, it relies on semantic HTML.</p>

<p><a href="https://hugotunius.se/img/flutter-web-a-fractal-of-bad-design/enable-accessibility.png"><img src="https://hugotunius.se/img/flutter-web-a-fractal-of-bad-design/enable-accessibility.png?1604348346" alt="Screenshot of Firefox accessibility inspector showing a single button with the text &quot;Enable accessibility&quot;"></a></p>

<p>Like any good writer, I‚Äôve saved the best for last: the screen reader experience with Flutter Web. When you first focus on  one of the Flutter Web demos with a screen reader you are greeted with a ‚Äúbutton‚Äù that says ‚ÄúEnable accessibility‚Äù. Admittedly, when you click this button there is a resemblance of screen reader content but it‚Äôs terrible. In the ‚ÄúReply‚Äù app things are read out with unnecessarily high detail in the list view, things that can be clicked aren‚Äôt identified as such, you cannot even get to the menu as far as I can tell, and as previously identified there are almost no landmarks which are used for navigation.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Flutter is a misguided attempt to achieve the impossible: quality cross platform experiences. Flutter Web in particular is fundamentally flawed and needs to be rebuilt from the ground up if it has any hopes of being viable tech that generates semantic, accessible, and modern web experiences. I have serious doubt that when Flutter Web leaves beta any of this will be addressed properly, unless the whole approach is reconsidered. If you see Flutter Web, turn around and run in the opposite direction.</p>

<p>Developers, designers, and product people all love cross platform solutions because it saves them time and energy while achieving the ‚Äúsame‚Äù outcome as the costlier alternatives. Flutter Web nicely illustrates that the outcomes aren‚Äôt the same, the visible part of a product is only one part of the puzzle.</p>

<p>I‚Äôm merely an accessibility novice and I didn‚Äôt even mention SEO in this post. I didn‚Äôt stop writing because I stopped finding flaws, but because this post was getting too long and I have other things to do. I‚Äôm sure accessibility users and experts can find even more issues than I have presented here(feel free to DM me on <a href="https://twitter.com/k0nserv">Twitter</a> and I‚Äôll include them).</p>

<p>To end I‚Äôd like to leave you with a <a href="https://www.youtube.com/watch?v=mRNX6XJOeGU">quote</a> from <a href="https://www.imdb.com/title/tt0107290/characters/nm0000156?ref_=tt_cl_t3">Dr. Ian Malcolm</a>.</p>

<blockquote>
  <p>Your scientists were so preoccupied with whether or not they could, they didn‚Äôt stop to think if they should.</p>
</blockquote>
</div>
  
    
</article>
</div></div>]]>
            </description>
            <link>https://hugotunius.se/2020/10/31/flutter-web-a-fractal-of-bad-design.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24962504</guid>
            <pubDate>Sun, 01 Nov 2020 21:06:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Open letter to founders: entrepreneurship is not physics]]>
            </title>
            <description>
<![CDATA[
Score 45 | Comments 37 (<a href="https://news.ycombinator.com/item?id=24962232">thread link</a>) | @rjyoungling
<br/>
November 1, 2020 | https://www.younglingfeynman.com/essays/physicsenvy | <a href="https://web.archive.org/web/*/https://www.younglingfeynman.com/essays/physicsenvy">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-block-type="2" id="block-yui_3_17_2_1_1570824304254_14431"><div><p><em>TLDR: In areas like classical physics where degrees of freedom are low, a comparatively small amount of data can enable you to accurately predict how the macro will react. E.g. I don‚Äôt need to know the quantum state of every single subatomic particle in a baseball in order to calculate how long it takes to reach the floor if I drop it. I need merely two variables (the downward acceleration caused by Earth‚Äôs gravitational field and the height from the ball to the floor), resulting in a simple yet accurate model. In highly complex systems such as business, things like butterfly effects can cause massive distortions rendering our models flawed. Pretending, as we (correctly) do in physics, that there‚Äôs a near-perfect bijection between our simple model and reality often causes major mistakes. We must caution against an over-reliance on numbers and the easily measurable because for us, the valuable and the (easily) measurable aren‚Äôt always synonymous. Until we have better models or are able to collect enough of the right data points (big and minute), it‚Äôs often preferable, as well as faster, to simply try things out on a small scale in the real world and use a feedback loop to iterate.</em></p><blockquote><p>The specific anticipative understanding of the conditions of the uncertain future defies any rules and systematization. It can be neither taught nor learned. If it were different, everybody could embark upon entrepreneurship with the same prospect of success. What distinguishes the successful entrepreneur and promoter from other people is precisely the fact that he does not let himself be guided by what was and is, but arranges his affairs on the ground of his opinion about the future. He sees the past and the present as other people do; but he judges the future in a different way. In his actions he is directed by an opinion about the future which deviates from that held by the crowd.</p><p>- Ludwig von Mises (1949).</p></blockquote><p>It used to be a very contrarian thing to say that business plans have virtually no value.</p><p>That‚Äôs not true anymore.</p><p>Most people now agree that business plans are mostly useless.</p><p>But if we think about it‚Ä¶ that seems extremely counterintuitive, doesn‚Äôt it?</p><p>We have more ways to capture data, visualize data, and use data to guide decisions.</p><p>How on earth is it possible that with such an abundance of data, we don‚Äôt see an extremely high correlation between being highly data-driven, doing years of market research, using complex mathematics to make projections and a successful business outcome?&nbsp;<em>Or if anything an inversely proportionate relationship?</em></p><p>It just doesn‚Äôt seem to add up‚Ä¶</p><p>I think the answer can be found in long- and medium-range forecasting in meteorology.</p><blockquote><p><em>‚Ä¶a forecast for 5 days out is typically less reliable than a forecast for the next day. This occurs since small changes and small size phenomena are more likely to influence observed weather events as time advances (Butterfly Effect). It is more difficult to analyze phenomena as the size gets smaller, thus it is difficult to know how the extreme multitude of tiny phenomena will impact observed weather as time moves forward. (</em><a href="http://www.theweatherprediction.com/hardtoforecast/" target="_blank"><em>Haby, 2019</em></a><em>)</em></p></blockquote><p>In order to perfectly predict the weather, you‚Äôd need incredible amounts of data and an equally overwhelming number of data points and then somehow synthesize that into an accurate prediction.</p><p>That‚Äôs hard.</p><p>But when you‚Äôre dealing with business plans which involve competitors, the pace of innovation, markets (which are made up of many individuals each with their own mind), and are often projecting many, many years into the future‚Ä¶ we‚Äôre probably dealing with an order of magnitude more difficulty.</p><p>It quickly becomes an exercise of the imagination of the author as it starts to resemble a fantasy novel behind a pseudo-scientific facade.</p><p>It‚Äôs like trying to predict the exact place on the floor a crumpled up piece of paper will land if it‚Äôs thrown‚Ä¶</p><p>If that piece of paper is a hundred dollar bill‚Ä¶</p><p>And it‚Äôs placed in the middle of Times Square‚Ä¶</p><p>The day before NY‚Äôs Eve‚Ä¶</p><p>With elementary Newtonian physics, we can just calculate how far a person will throw it and then we‚Äôll have our answer.</p><p>Except‚Ä¶</p><p>Who‚Äôs gonna throw a hundred dollar bill away?</p><p>Someone will find it and might use it to buy some fireworks of a sketchy dude who only sells snakes and sparklers.</p></div></div><div data-block-type="2" id="block-yui_3_17_2_1_1570824304254_23343"><div><p><em>Always laugh at this scene because we, as entrepreneurs, have a tendency to almost fight the market about what they want to buy, because we‚Äôre so invested in what we want to sell.</em></p><p>Now our fireworks fella has the $100 bill, gets into a cab, leaves NYC and drops the bill while trying to hand it over.</p><p>If we somehow had all the information in the universe, we might be able to calculate the exact place that bill will touch the floor*1.</p><p>But we don‚Äôt.</p><p><em>And Big Data too but more on that later.</em></p><p>There are just too many degrees of freedom.</p><p><em>Think of degrees of freedom as ‚Äòmoving parts‚Äô. In statistics, it‚Äôs the number of variables that are allowed to vary.</em></p><p><em>If you have a set of five numbers that average out to a certain integer, then four numbers are free to change but the last one can not because that one is needed to create the right average. So you have n-1 = 4 degrees of freedom in this example.</em></p><p><em>In physics (and biomechanics), it‚Äôs the minimum number of variables required to completely describe how something can move.</em></p><p><em>Your arm (excluding your hand) has seven degrees of freedom. An iPhone that‚Äôs wirelessly charging has two (x and y axes).</em></p><p>The way I see it, there are two ways to view or use complicated mathematical models on reality, be it in economics or in our entrepreneurial world.</p><p>Option 1: Employ those select few people who truly and therefore deeply understand the possibilities and limitations of mathematical tools.</p><p>Think of people with Ph.D.‚Äôs or more generally, anyone who has a deep understanding from first principles.</p><p>Option 2: Have a childlike perspective and ask why a lot. Eventually, you might realize that the people who don‚Äôt belong in the first category don‚Äôt really understand the foundation.</p><p>Therefore, any mistake in the foundation renders everything that‚Äôs built on top of it useless.</p><p>They have enough understanding to make it seem like they‚Äôre knowledgeable but too little to actually understand what they‚Äôre doing, resulting in overconfidence in their models.*2</p><p>One such mistake can be seen in standard economic theory.</p><p>I‚Äôll borrow an example given by&nbsp;<a href="https://twitter.com/ole_b_peters?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" target="_blank">Ole Peters</a>&nbsp;(of the&nbsp;<a href="http://www.lml.org.uk/" target="_blank">London Mathematical Laboratory</a>) which he gives in his lecture,&nbsp;<a href="https://youtu.be/f1vXAHGIpfc" target="_blank">Time for a Change: Introducing irreversible time in economics</a> (Peters, 2012).</p><p>Suppose you have a coin and $100 and you‚Äôre going to play a game of heads or tails.</p><p>If it lands on heads you‚Äôll win 50%, if it lands on tails you‚Äôll lose 40%.</p><p>The chance that it lands on heads or tails is P(heads) = P(tails)=0.5, so this seems like a good bet.</p><p>Some quick back of the envelope mathematics suggests that the</p><p>Expected Value = win 50% at 0.5 probability ‚Äî lose 40% at 0.5 probability</p><p>= (50%*.5)‚Äì(40%*.5)=25%-20% = +5%</p><p>We‚Äôll likely end up with more money than we started with. Sweet! But before we start picking out brand new cars with our imaginary winnings‚Ä¶ let‚Äôs double-check to see if the math works out.</p><p>If we play enough times, the number of heads will start to roughly equal the number of tails.</p><p>Let‚Äôs see what happens when we play four times and we get HHTT:</p><p>$100*1.5*1.5*0.6*0.6 = $81</p><p>Hmm... That‚Äôs weird.</p><p>If we play 100 times we get $100*1.5‚Åµ‚Å∞*0.6‚Åµ‚Å∞=$0.51</p><p>In fact, the more we play, the closer we get to zero.</p><p>If we play N times, we should get half of that as heads and half of that as tails:</p><p>$100*1.5^(n/2)*0.6^(n/2)</p><p>= $100*(1.5*0.6)^(n/2)</p><p>= $100*0.9^(n/2)</p><p>This implies that if we play long enough we‚Äôll eventually lose all of our money.</p><p><em>This isn‚Äôt completely accurate because I make it seem like order doesn‚Äôt matter. It doesn‚Äôt in mathematics because we won‚Äôt run out of small integers. In the real world, the smallest unit of money is one cent, so if you lose that bet there‚Äôs no bouncing back. So in my example, 50 losses followed by 50 wins will get you to the same outcome as the reverse, while in reality, you‚Äôd lose your last penny after you‚Äôd lose for the 19th time in a row, starting with $100. (N&gt;Log0.6 ($0.01/$100) = 18.03).</em></p><p><em>Turns out that if we lose 40% we have $100*0.6 = $60. In order to break even, we need to win at least 66,66..%, $60*1.66.. = $100.</em></p><p>And our imaginary cars?!</p><p>Suppose we had a group of 10.000 people, each with $100, playing this game once.</p><p>The group then has $1.000.000 collectively.</p><p>With the probability of both heads and tails being 50%, suppose 5000 people win and 5000 people lose.</p><p>That means 5000 people now have $150 and 5000 people have $60.</p><p>This gives us 5000*$150 = $750.000</p><p>And 5000*$60 = $300.000</p><p>Giving us a total of $1.050.000.</p><p>And tada‚Ä¶ we‚Äôve got our +5% Expected Value back. *3</p><p><em>As it turns out, it‚Äôs not just the odds of the bet that matters but also the bet size. Imagine a scenario where if you win you win 300% but if you lose, you lose 100%. Betting all your capital is not a good strategy because while you‚Äôll grow fast when you win, all it takes is one loss to lose everything. On the other side of that extreme is betting the smallest amount possible, one cent. Now you won‚Äôt lose much but it‚Äôll take forever to make some serious money. And as a wise woman once said: ‚Äò‚ÄôAin‚Äôt nobody got time for that!‚Äô‚Äô.</em></p><p><em>So the ideal bet size is somewhere in that $0.01 ‚Äî $100 range. In order to determine the right % of your capital that you should bet in order to grow as quickly as possible and not so aggressively that you lose it all, there‚Äôs something called the Kelly Criterion. It suggests that the ideal percentage of our capital that we should be betting is: Kelly % = (50/100)-((100‚Äì50)/300)*100% = 33% of our capital. If you‚Äôre interested you can&nbsp;</em><a href="https://blogs.cfainstitute.org/investor/2018/06/14/the-kelly-criterion-you-dont-know-the-half-of-it/" target="_blank"><em>read more about it here</em></a><em>.</em></p><p><em>Quick side note, in our original bet (40% when we lose a bet, 50% when we win a bet) the Kelly Criterion was 25%. Betting all our capital (100%) for exceeds our KC which is why we go broke in our time perspective.</em></p><p>This is this essence of our little conundrum, winning or losing depends ‚Ä¶</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.younglingfeynman.com/essays/physicsenvy">https://www.younglingfeynman.com/essays/physicsenvy</a></em></p>]]>
            </description>
            <link>https://www.younglingfeynman.com/essays/physicsenvy</link>
            <guid isPermaLink="false">hacker-news-small-sites-24962232</guid>
            <pubDate>Sun, 01 Nov 2020 20:29:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The missing explanation of ZK-SNARKs: Part 1]]>
            </title>
            <description>
<![CDATA[
Score 66 | Comments 10 (<a href="https://news.ycombinator.com/item?id=24962049">thread link</a>) | @gbrown_
<br/>
November 1, 2020 | https://www.cryptologie.net/article/507/the-missing-explanation-of-zk-snarks/ | <a href="https://web.archive.org/web/*/https://www.cryptologie.net/article/507/the-missing-explanation-of-zk-snarks/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>

<p>What are ZK-SNARKs and how do they work? This is a question I‚Äôve had for years, and always felt like the resources I found gave no clear intuition as to how all of that stuff worked. So today, after a breakthrough in my own understanding, I thought it would be good to re-share what I‚Äôve learned in a more understandable picture. Something that tells you what is the right way of thinking about these things, and what are the gaps that you can fill for yourself if you want to.</p>
<h2>Getting terminology out of the way</h2>
<p>The first part of the question is pretty easy to answer. ZK-SNARKs, no matter what their funny name might imply, are simply <strong>zero-knowledge proofs</strong> that are:</p>
<ul>
<li><strong>non interactive</strong></li>
<li><strong>general purpose</strong></li>
<li>and <strong>succinct</strong></li>
</ul>
<p>Huh, what are all these words? you ask, intimidated by their vagueness.</p>
<p>Well first, <strong>zero-knowledge proofs</strong> are cryptographic proofs that you know something, without revealing the something (zero-knowledgeness). That ‚Äúsomething‚Äù is usually called the <strong>witness</strong>, but this detail doesn‚Äôt matter much. There are a lot of resources about zero-knowledge proofs so I won‚Äôt explain much about how they work, or what their exact cryptographic properties are (completeness, soundness, zero-knowledgeness).
Zero-knowledge proofs are often seen used to prove that you know the discrete logarithm in some base of an element of some group (e.g. what is $x$ in $g^x \mod p$), or similarly-limited statements.<br>
‚Äú<em>Limited yes, but still useful!</em>‚Äù yells Schnorr, inventor of the Schnorr signature scheme which is fabricated by taking a zero-knowledge proof of the knowledge of a discrete logarithm, and making it <strong>non-interactive</strong>. A zero-knowledge proof or <strong>ZKP</strong> is an interactive protocol between a prover (who knows the <strong>witness</strong>) and a verifier (who has to be convinced). An interactive protocol sucks in the real world, as it often limits the number of potential use-cases of the primitive, and slows down protocols depending on the number of round trips that need to happen between the prover and the verifier. Fortunately, some ZKPs can be constructed without interaction with a verifier. In other words, a prover can simply create a proof, and that proof can be verified by anyone at any point in time later without further help from the prover. When ZKPs are made non-interactive, we simply call them non-interactive zero-knowledge proofs or <strong>NIZKs</strong>. I talk more about <a href="https://www.cryptologie.net/article/193/schnorrs-signature-and-non-interactive-protocols/">the link between signatures and zero-knowledge proofs here</a>.<br>
ZKPs and NIZKs can also be constructed on much more general statements like ‚ÄúI know an input to some function such that the execution gives some output‚Äù, or more specifically ‚ÄúI know $a$ in $f(a, b) = c$‚Äù. If this still doesn‚Äôt make sense think about the usual example given to illustrate general-purpose ZKPs: ‚ÄúI know the solution of the sudoku‚Äù. <br>
We‚Äôre almost there: <strong>ZK-SNARKs</strong> are general-purpose non-interactive zero-knowledge proofs, and more! They are also <strong>succinct</strong>, meaning that the proofs they produce are small in size and are fast to verify, which makes them so special they deserve to be called ZK-SNARKs. Not every modern proof systems deserve that special classification, for example STARKs don‚Äôt :(</p>
<p>As a recap:</p>
<ul>
<li>zero-knowledge proof: a cryptographic proof that you know something, without revealing the something</li>
<li>non interactive: a proof that was constructed without the help of a verifier</li>
<li>general purpose: a proof of a more general statement, like the knowledge of secret inputs or outputs of a program</li>
<li>succinct: a small proof that is fast to verify</li>
</ul>
<p>But not only did you ask, what are ZK-SNARKs, but you also asked about how they work.</p>
<h2>The actual stuff</h2>
<p>And oh boy, this is a complex subject to answer. First and foremost, there are many many schemes, too many of them, and so I‚Äôm not sure exactly how to answer that question. But I have some idea of how some of them work, and so I imagine that most of them follow that pattern, or improve on it, so let me explain‚Ä¶</p>
<p>There‚Äôs two parts to your typical ZK-SNARK: </p>
<ol>
<li>The proving system, which I'll explain in this post.</li>
<li>The translation or compilation of a program to something the proving system can prove, which I'll explain in part 2 of this post.</li>
</ol>
<p>The first part is not too hard to understand, while the second sort of requires a graduate course into the subject‚Ä¶</p>
<h3>Proving your knowledge of a constrained polynomial</h3>
<p>Here it is, remember that one: ZK-SNARKs are all about proving that you know some polynomial $f(x)$ that has some roots.
By roots I mean that the verifier has some values in mind (e.g. $1$ and $2$) and the prover must prove that the secret polynomial they have in mind evaluates to $0$ for this values (e.g. $f(1) = f(2) = 0$).
By the way, a polynomial that has 1 and 2 as roots (in our example) can be written as $f(x)=(x-1)(x-2)h(x)$ for some polynomial $h(x)$. (If you‚Äôre not convinced try to evaluate that at $x=1$ and $x=2$.)
So we say that the prover must prove that they know an $f(x)$ and $h(x)$ such that $f(x) = t(x)h(x)$ for some target polynomial $t(x) = (x-1)(x-2)$ (in the example that $1$ and $2$ are the roots that the verifier wants to check).</p>
<p>But that‚Äôs it, that‚Äôs what ZK-SNARKs proving systems usually provide: something to prove that you know some polynomial. I‚Äôm repeating this because the first time I learned about that it made no sense to me: how can you prove that you know some secret input to a program, if all you can prove is that you know a polynomial. Well, that‚Äôs why part 2 of this explanation is so difficult: it‚Äôs about translating a program into a polynomial. But more on that later.</p>
<p>Back to our proving system, how does one prove that they know such a function $f(x)$? Well they just have to prove that they know an $h(x)$ such that you can write $f(x)$ as $f(x) = t(x)h(x)$. Ugh‚Ä¶ Not so fast here. We‚Äôre talking about <strong>zero-knowledge</strong> proofs right? How can we prove this without giving out $f(x)$? Well, by using three tricks!</p>
<ol>
<li><strong>homomorphic commitments</strong></li>
<li><strong>bilinear pairings</strong></li>
<li><strong>different polynomials evaluate to different values most of the time</strong></li>
</ol>
<p>So let's go through each of them shall we?</p>
<h3>Homomorphic commitments</h3>
<p>The first trick is to use <strong>commitments</strong> to hide the values that we‚Äôre sending to the prover. But not only do we hide them, we also want to allow the <strong>verifier</strong> to perform some operations on them so that they can verify the proof. Specifically verify that if the prover commits on their polynomial $f(x)$ as well as $h(x)$, then we have
$$
com(f(x)) = com(t(x)) com(h(x)) = com(t(x)h(x))
$$ </p>
<p>where $com(t(x))$ is computed by the verifier as these are the known constraints on the polynomial.
These operations are called <strong>homomorphic operations</strong> and we can‚Äôt perform them if we use hash functions as commitment mechanisms. Instead, we can simply ‚Äúhide the values in the exponent‚Äù (e.g. for a value $v$ then send the commitment $g^v \mod{p}$) as these are commitments that allow for these homomorphic operations. (To convince yourself, observe that if $a = bc$ then $g^a = g^b g^c = g^{b+c}$. </p>
<p>Wait, this is not what we wanted‚Ä¶ we wanted $g^a = g^{bc}$.</p>
<h3>Bilinear pairings</h3>
<p>$g^a = (g^b)^c = g^{bc}$ gets us there, but only if $c$ is a known value and not a commitment (e.g. $g^c$). Unfortunately this is a limitation for our proving protocol, as there will be multiplication operations between commitments. This is where <strong>bilinear pairings</strong> can be used to unblock us, and this is the <em>sole reason</em> why we use bilinear pairings in a ZK-SNARK (really just to be able to multiply the values inside the commitments).
I don‚Äôt want to go too deep into what bilinear pairings are, but just know that it is just another tool in our toolkit that:</p>
<ul>
<li>Takes two values of our group (the values generates by $g$ raised to different powers modulo $p$) and place them in another group.</li>
<li>By moving stuff from one group to the other, <strong>we can multiply things that couldn't be multiplied previously</strong>.</li>
</ul>
<p>So using $e$ as the typical way of writing a bilinear pairing, we have $e(g_1, g_2) = h_3$ and we can use it to perform multiplications hidden in the exponent via this one equation:</p>
<p>$$
e(g^b, g^c) = e(g)^{bc}
$$</p>
<p>But no more about bilinear pairings! Again that‚Äôs the only reason why we use these in ZK-SNARKs. It‚Äôs just a trick to make our homomorphic commitments more homomorphic, to allow us to do:</p>
<p>$$
com(f(x)) = com(t(x)) com(h(x)) = com(t(x)h(x))
$$</p>
<h3>Where does the succinctness comes from?</h3>
<p>Finally, the <strong>succinctness</strong> of ZK-SNARKs come from the fact that two functions that differ will evaluate to different points most of the time.
What this means for us is that if my $f(x)$ is not really equal to $t(x)h(x)$, meaning that I don‚Äôt have a polynomial $f(x)$ that really has the roots we‚Äôve chosen with the verifier, then evaluating $f(x)$ and $t(x)h(x)$ at a random point $r$ will not give out the same result (most of the time). In other words for almost all $r$, $f(r) \neq t(r)h(r)$.</p>
<p>This is known as the <strong>Schwartz-Zippel lemma</strong>, which I pictured in the following illustration.</p>
<p><img alt="schwartz zippel lemma" src="https://www.cryptologie.net/upload/Screen_Shot_2020-11-01_at_11.48_.47_AM_.png"></p>
<p>Knowing this, it is enough to prove that $com(f(r)) = com(t(r)h(r))$ for some random point $r$. This is why ZK-SNARKs are so small; by comparing points in a group you end up comparing entire polynomials!</p>
<p>But this is also why there is a ‚Äútrusted setup‚Äù needed before most ZK-SNARKs can work. If a prover learns the random point $r$, then they can forge bad polynomials that will verify. So a trusted setup is about:</p>
<ol>
<li>creating a random value $r$</li>
<li>committing different exponentiation of it $g^r, g^{r^2}, g^{r^3}, \ldots$ so that they can be used by the prover to compute their polynomial without knowing the point $r$</li>
<li>destroying the value $r$</li>
</ol>
<p>Does the second point makes sense? If my polynomial as the prover is $f(x) = x^2 + x$ then all I have to do is compute $g^{r^2} g^r$ to obtain a commitment of my polynomial evaluated at that random point $r$.</p>
<p>Next, I'll write the second part of this blogpost and you'll have to wait until I'm done.</p>
</article></div>]]>
            </description>
            <link>https://www.cryptologie.net/article/507/the-missing-explanation-of-zk-snarks/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24962049</guid>
            <pubDate>Sun, 01 Nov 2020 20:03:45 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Notion's Onboarding Experience: A Case of Simplicity and Delightfulness]]>
            </title>
            <description>
<![CDATA[
Score 32 | Comments 8 (<a href="https://news.ycombinator.com/item?id=24961797">thread link</a>) | @moeminm
<br/>
November 1, 2020 | https://blog.moeminmamdouh.com/notions-onboarding-experience-a-case-of-simplicity-and-delightfulness | <a href="https://web.archive.org/web/*/https://blog.moeminmamdouh.com/notions-onboarding-experience-a-case-of-simplicity-and-delightfulness">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section itemprop="articleBody mainEntityOfPage"><meta itemprop="thumbnailUrl image" content="https://cdn.hashnode.com/res/hashnode/image/upload/v1604258661806/KVY5KlQih.png?w=1600&amp;h=840&amp;fit=crop&amp;crop=entropy&amp;auto=format&amp;q=60"><div><div><div><div><p>Subscribe to <!-- -->my<!-- --> newsletter and never miss <!-- -->my<!-- --> upcoming articles</p></div></div></div><div itemprop="text"><p>Notion‚Äôs onboarding experience is simply great. The use of simple language and illustrations allows the user to feel immersed, and unlike most onboardings, this one actually feels like something you want to complete.</p>

<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1604257176685/iDr0l8w8s.png?auto=format&amp;q=60" alt="https___bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com_public_images_b0900c00-f378-440a-8fc4-91135e388bf3_551x730.png"></p>
<p>Right off the bat, you‚Äôre greeted with clear questions, descriptions, and illustrations. One of the mistakes a lot of people make when choosing/making illustrations is the lack of relevance. The illustration may look pretty, but it can do more harm than good if it‚Äôs irrelevant to your main headline.</p>
<p>They tell you explicitly at the top of the page that each choice comes with a personalized onboarding experience.</p>
<p><code>We‚Äôll streamline your setup experience accordingly.</code></p>
<p>It makes sense. People using Notion for their own personal use will have their own way of using Notion, while teams will more likely require more collaboration.</p>
<p>Let‚Äôs choose For <em>myself</em>.</p>

<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1604257276107/NtsQ5huBR.png?auto=format&amp;q=60" alt="Mask Group 1.png"></p>
<p>Once you click ‚ÄòTake me to Notion‚Äô, you aren‚Äôt just kept waiting. They provide you with feedback. ‚ÄòGetting ready‚Äô. This is a concept called Idleness Aversion and it‚Äôs present in hundreds of apps. Uber being one of the famous examples all around the internet.</p>
<p>When you call in an Uber, you‚Äôre provided with real-time graphics of where the driver currently is. This is much better practice than just showing a static image of a car. This simply removes the anxiety of not knowing where the driver is and whether you‚Äôre going to be late or not.</p>
<p>This applies to any loading message you receive, it gives you feedback so you don‚Äôt have to wait around not knowing what‚Äôs going on.</p>

<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1604257330845/qp10RA2O2.png?auto=format&amp;q=60" alt="https___bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com_public_images_75f6a6ab-0b11-40f2-89fb-93d7a0f961e5_1900x977.png"></p>
<p><code>We know trying out a new platform can be scary. Here are a few templates you can choose from to test out Notion with.</code></p>
<p>Everything else is blurred out to keep you focused on what Notion is trying to accomplish here. After you‚Äôve selected a template, chances are, you still need some training to do. Here‚Äôs where the ‚ÄòGetting Started‚Äô page comes in handy.</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1604257365105/t29bWYhSi.png?auto=format&amp;q=60" alt="https___bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com_public_images_a3c14591-7737-47f6-9df7-d8cde125098e_1900x977.png"></p>
<p>The <em>Getting Started</em> page contains 4 tutorials to help you get started and a link at the end to their Youtube channel with more than 50 tutorials to help you even more.</p>

<p>Their Personal Onboarding experience is that simple. They use simple language, simple illustrations, and simple design to guide you through the most important stage of any online service. It‚Äôs a make-or-break point and Notion‚Äôs got it right.</p>
</div></div></section></div>]]>
            </description>
            <link>https://blog.moeminmamdouh.com/notions-onboarding-experience-a-case-of-simplicity-and-delightfulness</link>
            <guid isPermaLink="false">hacker-news-small-sites-24961797</guid>
            <pubDate>Sun, 01 Nov 2020 19:24:45 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Cowering to Genocide: Uighur Persecution and the World‚Äôs Last Hope]]>
            </title>
            <description>
<![CDATA[
Score 11 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24961697">thread link</a>) | @willbobaggins
<br/>
November 1, 2020 | https://www.willdjarvis.com/2020/10/31/cowering-to-genocide-uighur-persecution-and-the-worlds-last-hope/ | <a href="https://web.archive.org/web/*/https://www.willdjarvis.com/2020/10/31/cowering-to-genocide-uighur-persecution-and-the-worlds-last-hope/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-127">
		
	
	<div>
		<div>
<div>
<div>
<div>
<p>If you could stop a genocide-would you?&nbsp;</p>
<p>In western China, right now, more than a million men, women, and children sit in reeducation camps. Mothers separated from children, forced marriages, forced sterilizations-Margaret Atwood‚Äôs fiction made a reality.&nbsp;</p>
<p>What‚Äôs to be done? Have we learned nothing? From Rwanda, from the Holocaust, from the Holomodor? The cat‚Äôs out of the bag, and the End of history is over. Finally, we can acknowledge that the future is not just greyed out liberal democracy, 2% a year GDP growth, easing ourselves into decadence. In reality, our dark 20th century never really left us after all.&nbsp;</p>
<p>Modernity and the belief in bad people are incompatible.&nbsp; The enlightenment has swept conflict under the rug and right out the Overton window. Hobbes, banished from the lexicon. To even conceive a world with people who are themselves, <i>bad,</i> is a heretical assumption. To understand the aspects of human nature that are deeply problematic is to understand the true nature of reality. American culture lulled to sleep by narcotics and video games, our senses dulled by ultra-palatable foods and 2-hour delivery. In some sense, things are better than they ever have been before; in another sense, they‚Äôre much worse. Something is rotten in the state of Denmark. Americans are depressed, fat, and lead lives bereft of meaning. We are reduced to larping real revolutionary change on the streets, with bats, shields, and batons. A simulacra of revolution, a cry for meaning in a world gone mad.&nbsp;</p>
<p>I recall a cool October night in 2018. Joe Biden spoke softly to a crowd I was a part of. Bathed in dim light, he rambled. He wove soft, slow, soliloquies on American Greatness. He remarked on the magnificence of our landmass. That we are surrounded by vast oceans, blessed by great mineral reserves, possessing unrivalled food production capability, the mightiest navy the world has ever seen. The Zeihan-Esque supposition? Geography is destiny. Our geopolitical rivals? Nothing to worry about. China-why worry about China‚Ä¶&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ‚Äúc‚Äômon man.‚Äù&nbsp;</p>
<p>This theory is seductive because it is easy. It‚Äôs a denial of agency-the idea that nothing can be done to challenge us. This makes our position precarious. You can‚Äôt fix problems you can‚Äôt see. If, like Biden says-we‚Äôre the greatest country in the world, why can‚Äôt we stop Uighur persecution in Xinjiang? The reason, I posit here, is that for all our technical capability, we lack the will and imagination to see it through.&nbsp;</p>
<p>In the farthest reaches of eastern North Carolina sits a massive dune of sand. Jockey‚Äôs Ridge rises out of the warm waters of the Pamlico Sound. Here, a century ago, two men from Ohio made history with the first powered flight.&nbsp; Wilbur and Orville Wright were bicycle mechanics-yet they were the first to fly. Imagine the expectations for a bicycle mechanic today. Produce a plane-are you kidding me? <i>That‚Äôs for the experts, the technocrats.</i> The institutionalization of science, of technology, of politics, has eroded our capability to achieve the American greatness we, as a people, are destined for. Science, once&nbsp; a process of obtaining truth-has become a bloated bureaucratic institution, a tool for politicians. . When our ruling class says ‚Äútrust science‚Äù they don‚Äôt mean ‚Äútrust the process of inquiry‚Äù, they mean ‚Äútrust our experts.‚Äù Somehow, we have gone from a culture that encourages bicycle mechanics to invent an airplane to American institutions that can no longer prevent planes many times more advanced from diving <a href="https://en.wikipedia.org/wiki/Boeing_737_MAX"><u>straight into the ground</u></a>. (Really like this bit.)</p>
<p>The belief, the conceit, is that only experts can manipulate reality. But while experts have gotten us into this mess, they won‚Äôt get us out. This is not to denigrate experts, but the bureaucracies in which they work have become sick-sick enough that our planes fall out of the sky, and our factories that produce life-saving PPE have been shipped off our continent long ago. Their bureaucracies and their selection mechanisms have become corrupt, and sclerotic. What is to be done?</p>
<h3>Stopping a genocide.&nbsp;</h3>
<p>American military might is now too far behind to stop the genocide. Our carriers can be shot out of the water, with advanced surface to surface Chinese missiles. Tariffs won‚Äôt work either-just look at North Korea. but with a little imagination-a plan from me, a 26-year-old technologist emerges.&nbsp;</p>
<p>First, we need to visualize the problem as a chessboard. Each player has strategic pieces-some are stronger than others. Here, we want to understand how to incentivize the PRC to close the camps and allow Xinjiang a level of autonomy it rightly deserves. Bludgeoning them into submission won‚Äôt work. Attacking the PRC, whether rhetorically or physically will get us nowhere. The only way for us to avert a genocide is to alter the incentive structure, in such a way that it is easy and graceful for the PRC to change course. Attacking will just lead to path dependence for the CCP.&nbsp;</p>
<p>First, our strengths. Currently, America‚Äôs most powerful institutions are our worldwide entertainment and corporations. Hollywood, the NBA, Disney. These institutions have soft power that matters to a lot of people overseas. When I worked in China, I was always amazed at how popular the NBA was. The finals played on almost every TV and billboard I saw. With over 600 million viewers in China, the NBA is a cultural behemoth. It is important to note that China is a rising power, with a burgeoning middle class. This middle class finally has time to consume entertainment-and what a luxury it is.&nbsp;</p>
<p>America has a monopoly on the best basketball played anywhere. It‚Äôs quality is unsurpassed. Paragraph 1.1 of the Wikipedia page on Olympic basketball is aptly entitled ‚ÄúAmerican Dominance.‚Äù A monopoly gives you market power. You can squash competitors, and you can force people to obey your will. In this way, the NBA has power, and I propose that it use it to solve a genocide.&nbsp;</p>
<p>The plan is quite simple. Adam Silver contacts the CCP, and requests that they start treating Uighurs decently, with a list of specific demands- let everyone go, and start over as if nothing ever happened. There is no need for this to be violent: everyone who was involved (police officers, bureaucrats, administrators) will be given new positions elsewhere and taken care of appropriately. The camps will be demolished, and each individual sent home. Mr Silver will do this respectfully, there is no need to be ugly, and without disrespect to the CCP‚Äôs power in mainland China.</p>
<p>If they refuse, the commissioner‚Äôs next move will be to offer alternatives.<i> A full-scale PR nightmare. We will publicly embrace the CCP, and Chinese people. No hate for either (or Xi himself), but we will pack our stands with Uighur refugees, and activists. We will put #freeuighurs on the court at every game, and we will continue to do this until the situation resolves to our liking.</i>&nbsp;</p>
<p>The CCP can try to ban the NBA, but it will face serious backlash. The party has experienced this before. When things are very unpopular, they try to fix them. 600 million fans of the NBA <i>want </i>to watch basketball, and even only a minority are diehard fans, those diehard fans will make their displeasure known, and it would hardly prove expedient to throw half the country into camps if they disagree with you.&nbsp;</p>
<p>As I like to say, ‚Äúhell hath no fury like a consumer scorned.‚Äù&nbsp;</p>
<p>The worst-case scenario here is that China really does successfully ban the league. I find this eventuality unlikely, but this is where the State Department enters. We can organize a group that writes an insurance policy for the NBA-you lose revenue, we‚Äôll cover your costs. Putting this together, we could make it a no-lose situation for the NBA.&nbsp;</p>
<p>This strategy, if implemented, has a high chance of success- in fact, it may have the highest chance of success that currently exists in the problem space. Tariffs don‚Äôt work, sanctions don‚Äôt work, military force won‚Äôt work, but maybe, just maybe, asking nicely, while carrying cultural clout of American basketball might.</p>
</div>
</div>
</div>
</div>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->

				
</article></div>]]>
            </description>
            <link>https://www.willdjarvis.com/2020/10/31/cowering-to-genocide-uighur-persecution-and-the-worlds-last-hope/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24961697</guid>
            <pubDate>Sun, 01 Nov 2020 19:10:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What Every Manager Has to Know About Developer Happiness]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 2 (<a href="https://news.ycombinator.com/item?id=24961306">thread link</a>) | @morchen
<br/>
November 1, 2020 | https://swimm.io/blog/2020-08-25-what-every-manager-must-know-about-developer-happiness/ | <a href="https://web.archive.org/web/*/https://swimm.io/blog/2020-08-25-what-every-manager-must-know-about-developer-happiness/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section data-v-61c0ab88=""> <!----> <div data-v-2ee12136="" data-v-61c0ab88=""><div><p>A demo with a client this week got me thinking again about happiness. More Specifically, developer happiness and the story of Swimm. When we founded  <a href="https://swimm.io/">Swimm</a>  it was clear we came to solve a pain that any developer or engineering manager was more than happy to confirm: It‚Äôs a hard and long process to onboard a new dev team, and a new codebase. It takes time, a long time (we‚Äôve heard from managers that in some cases it takes up to a year!), and it is‚Ä¶well, painful.</p>
<p>We surveyed engineers in over 80 companies and quickly did the math*:* if you are an organization that onboards 100 developers a year and it takes an average of 4 months to onboard them, then as the engineering manager in charge of those developers, you‚Äôll lose approximately 30 years of contribution, which sounds astronomic by all measures.</p>
<p>Armed with this simple but efficient formula we started working on the concept of Swimm, we raised initial funding and built our MVP. Once we started being in touch with CTOs and engineering managers, we pitched our magic formula and started to test Swimm with design partners.</p>
<p>A CTO of one of these partnering companies said something that made us, the founders, move uncomfortably in our chairs. When it was time to set up the KPIs for this pilot, we were (as well trained entrepreneurs seldom are) ready for the classic sales formula‚Ä¶ but then he threw this curve ball: ‚ÄòDeveloper Happiness‚Äô.</p>
<p>Of course it was important for him to reduce the ramp-up time for his new hires, of course it made sense for him to find a better solution than the classic code documentation that becomes so quickly obsolete, and of course he wanted to find a solution to streamline their remote onboarding process. But these were not his main concerns. First on his list, was actually the very reason why we envisioned Swimm: Developer Happiness.</p>
<p>Simply put, we almost missed calling it by its name. Yes, of course it was part of our ‚Äò<em>why‚Äô</em> when we began this journey, but without noticing we almost morphed this ‚Äòwhy‚Äô into a math formula. Because developer happiness is hard to quantify and pin down, it‚Äôs easily overlooked and forgotten. But it is directly linked  <a href="https://stackoverflow.blog/2017/10/20/developer-happiness-right-tools-job/">to the tools that ease your everyday work</a> .</p>
<p>To this CTO though, it was clearly at highest priority. His cyber-security start-up had recently hired a few developers and for some of them, the process had been far from ‚Äòhappy‚Äô. Being onboarded onto a new codebase, on a new team is a tough human journey. How difficult can it be? Don‚Äôt just take our word for it, ask your developers.</p>
<blockquote><div lang="en" dir="ltr"><p>Tomorrow is my first day on the job.</p><p>Excited to meet the codebase and feel totally overwhelmed and incompetent.</p><p>Such is the life of a developer. üòé</p></div>‚Äî Martha Sharpe (@SharpeMartha) <a href="https://twitter.com/SharpeMartha/status/1277432600966180864?ref_src=twsrc%5Etfw">June 29, 2020</a></blockquote> 
<blockquote><p lang="en" dir="ltr">ME: learning takes time and it's important to be kind to yourself<br>ALSO ME: wow it's been 2 weeks and I can't recite every moving part of this sprawling legacy codebase, throw me into the trash</p>‚Äî bletchley punk is a fullmetal engineer (@alicegoldfuss) <a href="https://twitter.com/alicegoldfuss/status/1278074600618778624?ref_src=twsrc%5Etfw">June 30, 2020</a></blockquote> 
<p>But we entrepreneurs and managers invest so much time and money to source and hire the very best developers. We pay them the highest salaries, invest in their personal growth, present the swaggiest swag, the most photogenic happy hours and really the best food. And there is a reason for that: they are the magic-makers, the builders, the ones who execute our vision.</p>
<p>As in any relationship, true happiness is achieved through real, deep, meaningful investment. While it‚Äôs true that bringing your spouse flowers will get you a nice evening (though not guaranteed), or a fun vacation will create nice memories, it‚Äôs only through day-to-day dedication, deep investment in another person‚Äôs well being, and personal development, that they will flourish in a long-term relationship. The same goes for your developers, you can‚Äôt expect them to be on the front of your company, to fight your most important battles and not to truly and meaningfully invest in them.</p>
<p>Building the right training for your new hires is truthfully no fun at all, (the swag is an upside, I‚Äôll admit), but building tutorials on your codebase for example is a hassle. However, throwing them in at the deep-end and asking them to swim without the right tools for success is another way of saying: ‚Äúwe want you to do your very best while we do what‚Äôs easy for us ‚Äî paying you and hoping for the best‚Äù.</p>
<p>If you do invest in the happiness of your developers, they will pay it forward. Not only by being efficient and by contributing better code, but by becoming truly devoted to the company and its goals, because in a true long-term and happy relationship, you are ready to fight to make it work and <em>when it gets hard, you don‚Äôt break.</em></p>
<p>...</p>
<p><strong>Oren Toledano</strong> is Co-Founder of  <a href="applewebdata://1EDC3395-EBEC-47AA-AA94-BD6FDA23D8AB/swimm.io">Swimm</a> , and the former CEO and Co-Founder of  <a href="https://www.itc.tech/">ITC.tech</a>  and has lead various international technological training hubs.</p>
</div></div> </section></div>]]>
            </description>
            <link>https://swimm.io/blog/2020-08-25-what-every-manager-must-know-about-developer-happiness/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24961306</guid>
            <pubDate>Sun, 01 Nov 2020 18:14:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[SQL X-to-Y]]>
            </title>
            <description>
<![CDATA[
Score 55 | Comments 27 (<a href="https://news.ycombinator.com/item?id=24961028">thread link</a>) | @panda17
<br/>
November 1, 2020 | https://www.damirsystems.com/sql-x-to-y/ | <a href="https://web.archive.org/web/*/https://www.damirsystems.com/sql-x-to-y/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-2056">

<div>
<p>What is the correct way to model one-to-one, one-to-many, many-to-many? Where do foreign keys go? What criteria to use? How to decide? I see these questions repeated on StackOverflow time and again.</p>
<p>The particular implementation should be based on <em>logic</em>. In most cases, <em>verbalizing</em> the constraint in <em>natural language</em> reveals the correct solution.</p>
<p>The following example uses two entities: <em>thing</em> <strong>T</strong>, and <em>category</em> <strong>C</strong>. Defining relationship with four most common multiplicities results in <tt>4x4=16</tt> possible constraints.</p>
<pre>Term                    Multiplicity
------------------------------------
is     in exactly one       [1]
is     in at most one       [0,1]
is     in at least one      [1,*]
may be in more than one     [0,*]
</pre>
<h2>Easy</h2>
<p>The following 11 cases can be declaratively defined in SQL using standard constraints <tt>(FK, PK, AK)</tt>. No need for triggers, deferred constraints, stored procedures, nor special application code.</p>
<hr>
<p><strong>T</strong> <tt>|-[1]------------[1]-|</tt> <strong>C</strong></p>
<p>1. Each thing <em>is</em> in <em>exactly one</em> category;<br>
for each category: <em>exactly one</em> thing <em>is</em> in that category.</p>
<pre>thing {T, C}
   PK {T}
   AK {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,1]----------[1]-|</tt> <strong>C</strong></p>
<p>2. Each thing <em>is</em> in <em>exactly one</em> category;<br>
for each category: <em>at most one</em> thing <em>is</em> in that category.</p>
<pre>thing {T, C}
   PK {T}
   AK {C}

   FK {C} REFERENCES category {C}


category {C}
      PK {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[1]----------[0,1]-|</tt> <strong>C</strong></p>
<p>3. Each thing <em>is</em> in <em>at most one</em> category;<br>
for each category: <em>exactly one</em> thing <em>is</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C, T}
      PK {C}
      AK {T}

      FK {T} REFERENCES thing {T}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,*]----------[1]-|</tt> <strong>C</strong></p>
<p>4. Each thing <em>is</em> in <em>exactly one</em> category;<br>
for each category: <em>more than one</em> thing <em>may be</em> in that category.</p>
<pre>thing {T, C}
   PK {T}

   FK {C} REFERENCES category {C}


category {C}
      PK {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[1]----------[0,*]-|</tt> <strong>C</strong></p>
<p>5. Each thing <em>may be</em> in <em>more than one</em> category;<br>
for each category: <em>exactly one</em> thing <em>is</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C, T}
      PK {C}

      FK {T} REFERENCES thing {T}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,*]--------[0,*]-|</tt> <strong>C</strong></p>
<p>6. Each thing <em>may be</em> in <em>more than one</em> category;<br>
for each category: <em>more than one</em> thing <em>may be</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C}
      PK {C}


thing_category {T, C}
            PK {T, C}

           FK1 {T} REFERENCES thing    {T}
           FK2 {C} REFERENCES category {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,*]--------[0,1]-|</tt> <strong>C</strong></p>
<p>7. Each thing <em>is</em> in <em>at most one</em> category;<br>
for each category: <em>more than</em> one thing <em>may be</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C}
      PK {C}


thing_category {T, C}
            PK {T}

           FK1 {T} REFERENCES thing    {T}
           FK2 {C} REFERENCES category {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,1]--------[0,*]-|</tt> <strong>C</strong></p>
<p>8. Each thing <em>may be</em> in <em>more than one</em> category;<br>
for each category: <em>at most one</em> thing <em>is</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C}
      PK {C}


thing_category {T, C}
            PK {C}

           FK1 {T} REFERENCES thing    {T}
           FK2 {C} REFERENCES category {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,1]--------[0,1]-|</tt> <strong>C</strong></p>
<p>9. Each thing <em>is</em> in <em>at most one</em> category;<br>
for each category: <em>at most one</em> thing <em>is</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C}
      PK {C}


thing_category {T, C}
            PK {T}
            AK {C}

           FK1 {T} REFERENCES thing    {T}
           FK2 {C} REFERENCES category {C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[1,*]--------[0,*]-|</tt> <strong>C</strong></p>
<p>10. Each thing <em>may be</em> in <em>more than one</em> category;<br>
for each category: <em>at least one</em> thing <em>is</em> in that category.</p>
<pre>thing {T}
   PK {T}


category {C, T}
      PK {C}

      FK {T} REFERENCES thing {T}


thing_cat {T, C}
       PK {T, C}

      FK1 {T} REFERENCES thing    {T}
      FK2 {C} REFERENCES category {C}


VIEW thing_category {T, C}
AS
category  {T, C}
UNION
thing_cat {T, C}
</pre>
<hr>
<p><strong>T</strong> <tt>|-[0,*]--------[1,*]-|</tt> <strong>C</strong></p>
<p>11. Each thing <em>is</em> in <em>at least one</em> category;<br>
for each category: <em>more than one</em> thing <em>may be</em> in that category.</p>
<pre>thing {T, C}
   PK {T}

   FK {C} REFERENCES category {C}


category {C}
      PK {C}


thing_cat {T, C}
       PK {T, C}

      FK1 {T} REFERENCES thing    {T}
      FK2 {C} REFERENCES category {C}


VIEW thing_category {T, C}
AS
thing {T, C}
UNION
thing_cat {T, C}
</pre>
<h2>Not Easy</h2>
<p>Cases from 12 to 16 require use of triggers, stored procedures, deferred constraints, or application code to enforce the constraint.</p>
<p>12. <strong>T</strong> <tt>|-[1,*]----------[1]-|</tt> <strong>C</strong><br>
Each thing <em>is</em> in <em>exactly one</em> category;<br>
for each category: <em>at least one</em> thing <em>is</em> in that category.</p>
<p>13. <strong>T</strong> <tt>|-[1]----------[1,*]-|</tt> <strong>C</strong><br>
Each thing <em>is</em> in <em>at least one</em> category;<br>
for each category: <em>exactly one</em> thing <em>is</em> in that category.</p>
<p>14. <strong>T</strong> <tt>|-[1,*]--------[0,1]-|</tt> <strong>C</strong><br>
Each thing <em>is</em> in <em>at most one</em> category;<br>
for each category: <em>at least one</em> thing <em>is</em> in that category.</p>
<p>15. <strong>T</strong> <tt>|-[0,1]--------[1,*]-|</tt> <strong>C</strong><br>
Each thing <em>is</em> in <em>at least one</em> category;<br>
for each category: <em>at most one</em> thing <em>is</em> in that category.</p>
<p>16. <strong>T</strong> <tt>|-[1,*]--------[1,*]-|</tt> <strong>C</strong><br>
Each thing <em>is</em> in <em>at least one</em> category;<br>
for each category: <em>at least one</em> thing <em>is</em> in that category.</p>
<h3>The Problem</h3>
<p>The main problem is lack of assertions (DB-wide constraints) in main SQL implementations. SQL standard actually defines them (<tt>CREATE ASSERTION</tt>), but no luck yet. Hence, not every business constraint can be elegantly defined in SQL. Often some creativity, compromise, and awkwardness is required.</p>
<hr>
<p>Note:</p>
<pre>All attributes (columns) NOT NULL

PK = Primary Key
AK = Alternate Key (Unique)
FK = Foreign Key
</pre>
</div>

</article></div>]]>
            </description>
            <link>https://www.damirsystems.com/sql-x-to-y/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24961028</guid>
            <pubDate>Sun, 01 Nov 2020 17:34:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Danish military intelligence uses XKEYSCORE to tap cables in co-op with the NSA]]>
            </title>
            <description>
<![CDATA[
Score 575 | Comments 190 (<a href="https://news.ycombinator.com/item?id=24960994">thread link</a>) | @XzetaU8
<br/>
November 1, 2020 | https://www.electrospaces.net/2020/10/danish-military-intelligence-uses.html | <a href="https://web.archive.org/web/*/https://www.electrospaces.net/2020/10/danish-military-intelligence-uses.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="post-body-7080478453343339184" itemprop="description articleBody">
<p>
Last August, it came out that a whistleblower accused the Danish military and signals intelligence service (<a href="https://en.wikipedia.org/wiki/Danish_Defence_Intelligence_Service" target="_blank"><i>Forsvarets Efterretningstjeneste</i></a> or FE) of unlawful activities and deliberately misleading the intelligence oversight board. </p><p>

Meanwhile, the Danish press was able to paint a surprisingly comprehensive and detailed picture of how the FE cooperated with the NSA in <a href="#cabletapping"><b>cable tapping</b></a> on Danish soil.</p><p>

It was further revealed that the Americans provided Denmark with a sophisticated <a href="#spysystem"><b>new spy system</b></a> which includes the NSA's data processing system <a href="#xkeyscore"><b>XKEYSCORE</b></a>.</p><p>

A Danish paper also disclosed that the accusation of <a href="#unlawful"><b>unlawful collection</b></a> came from a young FE employee who reminds of Edward Snowden. A newly established investigation commission now has to clarify whether he was driven by fears or by facts.</p><p><a href="https://1.bp.blogspot.com/-FEhoYi_a0EI/X3lHJbfeSlI/AAAAAAAAEyk/urOidzARWswgJstbeNFiU8CRo38JQMufACPcBGAYYCw/s800/fe-xks-header.jpg"><img alt="" data-original-height="420" data-original-width="800" src="https://1.bp.blogspot.com/-FEhoYi_a0EI/X3lHJbfeSlI/AAAAAAAAEyk/urOidzARWswgJstbeNFiU8CRo38JQMufACPcBGAYYCw/s800/fe-xks-header.jpg" width="600"></a></p>
<p><span size="2">
The Sandagerg√•rd complex of the FE on the island of Amager, where a new<br> 
data center was built for its deployment of the XKEYSCORE system<br>
</span>
</p>


<p><span size="+2">Cable tapping</span></p><p>

In an extensive piece from September 13, the renowned Danish newspaper <a href="https://www.berlingske.dk/samfund/et-pengeskab-paa-kastellet-har-i-aartier-gemt-paa-et-dybt-fortroligt" target="_blank"><i>Berlingske</i></a> (founded in 1749) describes how the FE, in cooperation with the NSA, started to tap an international telecommunications cable in order to gather foreign intelligence.</p><p>
  
  In the mid-1990s, the NSA had found out that somewhere under Copenhagen there was a backbone cable containing phone calls, e-mails and text messages from and to countries like China and Russia, which was of great interest for the Americans.</p><p>
  
Tapping that cable, however, was almost impossible without the help of the Danes, so the NSA asked the FE for access to the cable, but this request was denied, according to Berlingske.</p><p>
  
  
  <b>Agreement with the United States</b></p><p>
  
  The US government did not give up, and in a letter sent directly to the Danish prime minister Poul Nyrup Rasmussen, US president Clinton asked his Danish colleague to reconsider the decision. And Nyrup, who was a sworn supporter of a close relationship with the US, said yes. </p><p>
  
  The cooperation was laid down in a document, which, according to Berlingske, all Danish defense ministers had to sign "so that any new minister could see that his predecessor - and his predecessors before his predecessors - with their signatures had been part of this small, exclusive circle of people who knew one of the kingdom's biggest secrets."</p><p> 
    
  The code name for this cooperation is not known, but it's most likely part of the NSA's umbrella program <a href="https://www.electrospaces.net/2014/10/the-german-operation-eikonal-as-part-of.html#rampart-a">RAMPART-A</a>. Under this program, which started in 1992, foreign partners <a href="https://s3.amazonaws.com/s3.documentcloud.org/documents/1200864/tssinframpartaoverview-v1-0-redacted-information.pdf" target="_blank">provide</a> access to high-capacity international fiber-optic cables, while the US provides the equipment for transport, processing and analysis:</p><p><a href="https://1.bp.blogspot.com/-VQv_x5OW4VM/VD2MIOzUWkI/AAAAAAAAB8o/rxZgVvQ4hmI/s1600/rampart-a-2010-diagram.jpg" imageanchor="1" target="_blank"><img src="https://1.bp.blogspot.com/-VQv_x5OW4VM/VD2MIOzUWkI/AAAAAAAAB8o/rxZgVvQ4hmI/s1600/rampart-a-2010-diagram.jpg" title="Slide from an NSA presentation about the RAMPART-A program" width="450"></a></p>
   
  <p>

  <b>Agreement with a cable operator</b></p><p>
  
To make sure that tapping the cable was as legal as possible, the government asked approval of the private Danish company that operated the cable. The company agreed, but only when it was approved at the highest level, and so the agreement was signed by prime minister Rasmussen, minister of defense H√¶kkerup and head of department Troldborg. </p><p>
  
  Because the cable contained international telecommunications it was considered to fall within the FE's foreign intelligence mandate. The agreement was prepared in only one copy, which was shown to the company and then locked in a safe at the FE's headquarters at the <a href="https://web.archive.org/web/20200811152740/https://fe-ddis.dk/om-os/Organisation/lokaliteter-i-dk/Pages/Kastellet.aspx" target="_blank">Kastellet</a> fortress in Copenhagen, according to Berlingske.</p><p>

 This Danish agreement is very similar to the <a href="http://download.krone.at/pdf/VertragWZschwarz.pdf" target="_blank">Transit Agreement</a> between the German foreign intelligence service BND and Deutsche Telekom, in which the latter agreed to provide access to international transit cables at its switching center in Frankfurt am Main. The BND then tapped these cables with help from the NSA under <a href="https://www.electrospaces.net/2015/05/new-details-about-joint-nsa-bnd.html">operation Eikonal</a> (2004-2008).</p><p>
  
  
    <b>Processing at Sandagerg√•rd</b></p><p>
  
  Berlingske reported that the communications data that were extracted from the backbone cable in Copenhagen were sent from the Danish company's technical hub to the <a href="https://web.archive.org/web/20200811153920/https://fe-ddis.dk/om-os/Organisation/lokaliteter-i-dk/Pages/Sandagergaard.aspx" target="_blank">Sandagerg√•rd complex</a> of the FE on the island of <a href="https://en.wikipedia.org/wiki/Amager" target="_blank">Amager</a>. The US had paid for a cable between the two locations.</p><p>
  
  At Sandagerg√•rd, the "NSA made sure to install the technology that made it possible to enter keywords and translate the huge amount of information, so-called raw data from the cable tapping, into "readable" information."</p><p>
  
The filter system was not only fed by keywords from the FE, but the NSA also provided "the FE with a series of keywords that are relevant to the United States. The FE then reviews them - and checks that there are basically no Danes among them - and then enters the keywords" according to sources cited by Berlingske.</p><p>
  
  Besides this filtering with keywords and selectors, the FE and the NSA will also have used the metadata for <a href="https://edwardsnowden.com/docs/doc/B17-TDB-Knowledge-Sharing.pdf" target="_blank">contact-chaining</a>, which means reconstructing which phone numbers and e-mail addresses had been in contact with each other, in order to create social network graphs - something the sources apparently didn't want to disclose to Berlingske.</p><p><a href="https://1.bp.blogspot.com/-zFJ49f56CXY/X5PXqIaouqI/AAAAAAAAEzY/TJwURx3Jn6oCxN9s4I3LqKKu1EhtLPEAACPcBGAYYCw/s1351/dk-cables.JPG"><img alt="" data-original-height="830" data-original-width="1351" src="https://1.bp.blogspot.com/-zFJ49f56CXY/X5PXqIaouqI/AAAAAAAAEzY/TJwURx3Jn6oCxN9s4I3LqKKu1EhtLPEAACPcBGAYYCw/s1351/dk-cables.JPG" width="550"></a></p>
  <p><span size="2">
  Map of the current backbone cables around the Danish capital Copenhagen<br>
  and the Sandagerg√•rd complex of the FE on the island of Amager<br>
  (source: <a href="https://live.infrapedia.com/app" target="_blank">Infrapedia</a> - click to enlarge)<br>
</span>
</p>

  <p>
  
      <b>Trusted partners</b></p><p>
  
  Part of the agreement between the US and Denmark was that "the USA does not use the system against Danish citizens and companies. And the other way around". Similar words can be found in an <a href="https://www.documentcloud.org/documents/1200860-odd-s3-overviewnov2011-v1-0-redacted-information.html" target="_blank">NSA presentation</a> from 2011: "No US collection by Partner and No Host Country collection by US" - although this is followed by "there ARE exceptions!"</p><p>
  
  The latter remark may have inspired Edward Snowden to accuse the NSA of abusing these cooperations with foreign partner agencies to spy on European citizens, but as a source told Berlingske: </p><p>
  
  "I can not at all imagine in my imagination that the NSA would betray that trust. I consider it completely and utterly unlikely. If the NSA had a desire to obtain information about Danish citizens or companies, the United States would simply turn to [the domestic security service] PET, which would then provide the necessary legal basis."</p><p>
  
The source also said that "the NSA wanted to jump and run for Denmark. The agency did everything Denmark asked for, without discussion. The NSA continuously helped Denmark - because of this cable access. [...] Denmark was a very, very close and valued partner."</p><p>
    
This close and successful cooperation was apparently one of the reasons for the visit of president Bill Clinton to Denmark in July 1997, according to Berlingske.</p><p><a href="https://1.bp.blogspot.com/-1-v3T8EQqk0/X3gIQLWgChI/AAAAAAAAEyE/j-yGk3qiStcS3Y692bc25UT6WG1_B_2BACLcBGAsYHQ/s0/clinton-rasmussen.jpg"><img alt="" src="https://1.bp.blogspot.com/-1-v3T8EQqk0/X3gIQLWgChI/AAAAAAAAEyE/j-yGk3qiStcS3Y692bc25UT6WG1_B_2BACLcBGAsYHQ/s0/clinton-rasmussen.jpg" width="550"></a></p>
  <p><span size="2">
Danish prime minister Poul Nyrup Rasmussen and US president Bill Clinton<br>
  during his visit to Denmark in July 1997 (photo: Linda Kastrup)<br>
</span>
</p>

<p><span size="+2">A new spy system</span></p><p>
  
  In the wake of the FE scandal even more recent developments have been revealed: a <a href="https://www.dr.dk/nyheder/indland/ny-afsloering-fe-masseindsamler-oplysninger-om-danskere-gennem-avanceret-spionsystem" target="_blank">report</a> by the Danish broadcaster DR from September 24, 2020 provides interesting details about how the Americans provided Denmark with a sophisticated new "spy system".</p><p>
  
After the FE got a new head of procurement in 2008, NSA employees frequently traveled to Denmark for quite some time to build the necessary hardware and install the required software for the new system, which DR News describes as extremely advanced. It also has a special internal code name, which the broadcaster decided not to publish. It's also this new system through which the alleged illegal collection of Danish data took place.</p><p>
  
  According to DR News, the NSA technicians were also involved in the construction of a new data center at the FE's <a href="https://web.archive.org/web/20200811153920/https://fe-ddis.dk/om-os/Organisation/lokaliteter-i-dk/Pages/Sandagergaard.aspx" target="_blank">Sandagerg√•rd complex</a> on Amager that was specifically built to house the new spy system, which was taken into use somewhere between 2012 and 2014. The cooperation between the FE and the NSA on this specific system was based upon a Memorandum of Understanding (MoU) signed by then FE chief <a href="https://da.wikipedia.org/wiki/Thomas_Ahrenkiel" target="_blank">Thomas Ahrenkiel</a>.</p><p>

  
  
  <b>Filter systems</b></p><p>
  
The DR News <a href="https://www.dr.dk/nyheder/indland/ny-afsloering-fe-masseindsamler-oplysninger-om-danskere-gennem-avanceret-spionsystem" target="_blank">report</a> also goes into more detail about the interception process. It says that first, the intelligence service identifies a data stream that may be interesting, after which they "mirror" the light that passes through the particular fiber-optic cables. In this way, they copy both metadata and content, like text messages, chat conversations, phone calls and e-mails, and send them to the FE's data center at Sandagerg√•rd.</p><p>

  
According to DR News, the FE tried to develop a number of filters to ensure that data from Danish citizens and companies is sorted out and not made searchable by the new spy system. The former Danish minister of defense Claus Hjort Frederiksen recently <a href="http://www.weekendavisen.dk/2020-37/samfund/landsskadeligt" target="_blank">said</a> that there was indeed an attempt to develop such filters, but at the same time he admitted that there can be no guarantee that no Danish information will pass through.</p><p><span size="+2">XKEYSCORE</span></p><p>

  DR News also reported that the heart of the new spy system is formed by <a href="https://en.wikipedia.org/wiki/XKeyscore" target="_blank">XKEYSCORE</a>, which was developed by the NSA and the existence of which was first <a href="https://www.theguardian.com/world/2013/jul/31/nsa-top-secret-program-online-data" target="_blank">revealed</a> by The Guardian in June 2013.</p><p> 
  
  The NSA's British counterpart GCHQ incorporated XKEYSCORE in its own system for processing bulk internet data codenamed <a href="https://en.wikipedia.org/wiki/Tempora" target="_blank">TEMPORA</a> and it can be assumed that the other <a href="https://www.electrospaces.net/2014/09/nsas-foreign-partnerships.html#2ndparty">Second Party</a> partners (also known as the Five Eyes) also use this system, whether or not under a different codename.</p><p><a href="https://1.bp.blogspot.com/-t6LWjnPz3Wo/X3LLi61rZzI/AAAAAAAAExc/-F5vREaIi4oBCAZ_LNhvOOJFVnHnLlFbgCLcBGAsYHQ/s0/xks%2Bintro.JPG" target="_blank"><img alt="" src="https://1.bp.blogspot.com/-t6LWjnPz3Wo/X3LLi61rZzI/AAAAAAAAExc/-F5vREaIi4oBCAZ_LNhvOOJFVnHnLlFbgCLcBGAsYHQ/s0/xks%2Bintro.JPG" width="500"></a></p>
  <p>
  
From the Snowden documents we know that the NSA also provided XKEYSCORE to some of its <a href="https://www.electrospaces.net/2014/09/nsas-foreign-partnerships.html#3rdparty">Third Party</a> partners: the German <a href="https://www.electrospaces.net/2016/09/secret-report-reveals-german-bnd-also.html">foreign intelligence service BND</a> and domestic security service BfV, the Swedish signals intelligence service FRA and the Japanese Directorate for SIGINT. It is new though that the Danish military intelligence service FE uses the system too.</p><p>

  
Some press reports seem to suggest that these partner agencies "gain access to XKEYSCORE" as if it would allow them to connect to a huge global mass surveillance system. The latter may be the case for the NSA's Second Party partners, but the Third Party partners are using XKEYSCORE only to process and analyze data from their own tapping points and are not able to access data from Five Eyes collection platforms.</p><p>
  
  Likewise, NSA analysts using XKEYSCORE don't have direct ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.electrospaces.net/2020/10/danish-military-intelligence-uses.html">https://www.electrospaces.net/2020/10/danish-military-intelligence-uses.html</a></em></p>]]>
            </description>
            <link>https://www.electrospaces.net/2020/10/danish-military-intelligence-uses.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24960994</guid>
            <pubDate>Sun, 01 Nov 2020 17:30:02 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[C/C++ vs. Rust Performance]]>
            </title>
            <description>
<![CDATA[
Score 91 | Comments 125 (<a href="https://news.ycombinator.com/item?id=24960108">thread link</a>) | @krizhanovsky
<br/>
November 1, 2020 | http://tempesta-tech.com/blog/fast-programming-languages-c-c++-rust-assembly | <a href="https://web.archive.org/web/*/http://tempesta-tech.com/blog/fast-programming-languages-c-c++-rust-assembly">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div> <p><i>Posted on October 28, 2020</i></p><p>This article isn't about which programming language is better, instead it discusses the most powerful tool set for development of the fastest server-side system software, such as database engines and HTTPS servers. There are several specific properties of this type of software: </p><ul><li>Relatively large code base, 100,000 lines of C or C++ code and more. While it's possible to write particular, the most 'hot' functions, in Assembly language, it's impractical to write the whole program in Assembly. </li><li>Databases and web servers are mission-critical software - we all got used that our Linux systems with MySQL and Nginx processes work for months and years. There are <a href="https://github.com/tempesta-tech/tempesta/wiki/High-availability">simple high availability</a> best practices mitigating the downtime due to possible crashes, but they're the subject for another article. Meantime, it's worth mentioning that if you really-really care about high availability, then you should build you infrastructure with an assumption that any component of your system may crash at any time, just like <a href="https://lwn.net/Articles/801871/">Facebook does this</a> -the company deploys the recent versions of the Linux kernel as soon as they're available. </li></ul><p>We've been developing the <a href="http://tempesta-tech.com/c++-services">fastest software in C, C++, and Assembly</a> for ages. It's not a surprise that since Rust is <a href="https://en.wikipedia.org/wiki/Rust_(programming_language)">"focused on performance"</a> we're very interested in it. With a bit of skepticism though. Just remember the rise of Java programming language: there were a lot of reports that the JIT compilation produced code faster than C++. Now it's hard to find a case, when C++ is slower than Java, see for example the <a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/fastest/java.html">benchmark game</a>. It's also worth mentioning that the memory garbage collection (GC) in Java leads to high tail latencies and it's hard or even impossible to do anything with the problem. Golang can not be considered for high performance programming also due to the GC. </p><h2>C or C++? Or both of them?</h2><p> The C programming language dominates in the system programming. An operating system kernel is an example of one of the most sophisticated system software, not only because it deals with hardware directly, but also due to strict performance requirements. The Linux and FreeBSD kernels are written in C, as well as the other UNIX'es and Windows kernels. Let's start the discussion from this bright example of high-performance system software. </p><h3>C++ for operating systems kernel development</h3><p> FreeBSD <a href="https://forums.freebsd.org/threads/driver-building-in-c.35701/">has been supporting C++ modules</a> for a while. While the Linux kernel never supported C++, there was <a href="https://pdos.csail.mit.edu/papers/click:tocs00/paper.pdf">the Click modular router</a> written in C++ and working as a Linux kernel module. If you're interested in C++ applicability for the operating systems kernel development, then you can find quite good discussions in the <a href="https://wiki.osdev.org/C++">C++</a> and <a href="https://wiki.osdev.org/C++_Bare_Bones">Bare bones</a> articles. However, there are fundamental reasons against using C++ for operating system kernel development: </p><ul><li>You do not have <code>libstdc++</code> with <a href="https://en.wikipedia.org/wiki/Run-time_type_information">RTTI</a> and exceptions in the kernel space. Actually, <code>dynamic_cast</code> isn't so frequently used and there are a lot of C++ projects compiled without RTTI. If you need exceptions, then you have to port them into the kernel. <code>libstdc++</code> uses basic C allocations, so it must be significantly reworked for the kernel. </li><li>You can't use the STL and Boost libraries and, in fact, all kernels already have their own libraries. C++ introduces filesystem, threading and networking libraries, which are senseless in an OS kernel. From the other hand, the modern OSes provide advanced synchronization primitives, which are still not available in standard C++ (e.g. there is still no read-write spinlocks in C++). </li><li>The Linux kernel provides number of memory allocators (SLAB, page, <code>vmalloc()</code>, <code>kmalloc()</code>, and so on), thus you have to use <a href="https://en.cppreference.com/w/cpp/language/new"><code>placement new</code></a> and/or just use the C functions for memory allocation and freeing. Aligned memory is crucial for the performance, but you need to write special wrappers to get aligned memory with <code>new</code>. </li><li>Strong type safety isn't so comfortable for system programming when raw memory pointers are frequently casted to some data structures. This is debatable though: while some people are uncomfortable with frequent <code>reinterpret_cast&lt;Foo *&gt;(ptr)</code> instead of short <code>(Foo *)ptr</code>, the others are good with more typing and more type safety. </li><li>C++ <a href="https://en.wikipedia.org/wiki/Name_mangling">name mangling</a>, required for namespaces and function overloading, makes function hard to call from Assembly, so you need to use <code>extern "C"</code>. </li><li>You have to make special code sections for static objects constructors and destructors, <code>.ctor</code> and <code>.dtor</code> correspondingly. </li><li>C++ exceptions can not cross <i>context</i> boundaries, i.e. you can not throw an exception in one thread and catch it in another. The operating system kernel deals with much more complex context model: there are kernel threads, user space processes entering into the kernel, deferred and hardware interruptions. The contexts can preempt each other in voluntarily or cooperative manner, so exception handling of current context could be preempted by another context. There are also memory management and contexts switching code which could conflict with exception handling code. Just like for RTTI, it's possible to implement the mechanism in kernel, but the current standard library can not be used. </li><li>While Clang and G++ support <code>__restrict__</code> extension, the official C++ standard <a href="https://www.quora.com/Why-doesnt-C++-have-an-equivalent-of-Cs-restrict-specifier">does not support</a> it. </li><li>Variable length arrays (VLA) are <a href="https://lwn.net/Articles/749064/">discouraged</a> in the Linux kernel, they are still handy in some scenarios, but are <a href="https://groups.google.com/g/comp.std.c++/c/K_4lgA1JYeg?pli=1">completely unavailable in C++</a>. </li></ul><p> Thus, with C++ in the kernel space you basically have only templates, classes inheritance and some syntax sugar like lambda functions. Since system code is quite rarely requires complicated abstractions and inheritances, then does it still have sense to make effort to use C++ in the kernel space? </p><h3>C++ exceptions</h3><p> This is one of the most <a href="https://herbsutter.com/2010/03/13/trip-report-march-2010-iso-c-standards-meeting/">debatable</a> C++ feature and it deserves a separate chapter. For example, the MySQL project, following to the <a href="https://google.github.io/styleguide/cppguide.html#Exceptions">Google coding style</a>, <a href="https://dev.mysql.com/doc/dev/mysql-server/latest/PAGE_CODING_GUIDELINES.html">doesn't use exceptions</a>. The Google coding style provides the good lists of pros and cons of using exceptions. Here we focus on performance aspects only. </p><p>Exceptions can improve performance when we have to handle error codes in too may places, e.g. (let the functions be inlined and very small) </p><pre><code>
        if (func_1())
            return -EINVAL;
        if (func_2())
            return -EINVAL;
        ....
        if (func_100())
            return -EINVAL;
    </code></pre><p> The problem with the code is that there are extra conditional jumps. Modern CPU are pretty good with branch prediction, but it still hurts performance. In C++ we can just write </p><pre><code>
        try {
            func_1();
            func_2();
            ...
            func_100();
        } catch (...) {
            return -EINVAL;
        }
    </code></pre><p> , so there are no extra conditions in the <i>hot</i> path. However, this isn't for free: most of the functions in your C++ code have to have extra epilogues with a table of exceptions, which these functions can catch, and an appropriate cleanup table. The function epilogues aren't executed in normal workflow, but they increase the size of code causing extra pollution in the CPU instruction cache. You can find great details about C++ exception handling internals in the <a href="https://monoinfinito.wordpress.com/series/exception-handling-in-c/">Nico Brailovsky's blog</a>. </p><h3>Is C++ still good?</h3><p> Yes, it is. Firstly, not the whole code actually must be as fast as possible and in most of the places we don't need custom memory allocation and don't care about exceptions overhead. The most of the projects are developed in the user space and benefit, especially the new ones, from relatively rich C++ standard and Boost libraries (not so rich as Java's though). </p><p>Secondly, the killing feature of C++ is that <b>it is C</b>. If you don't want to use exceptions or RTTI, then you can just switch the features off. Most of C programs can be just compiled with a C++ compiler with very small changes or without any changes at all. As an example, we need only this trivial change </p><pre><code>
    $ diff -up nbody.c nbody-new.cc
        @@ -112,9 +112,9 @@ static void advance(body bodies[]){
             // ROUNDED_INTERACTIONS_COUNT elements to simplify one of the following
             // loops and to also keep the second and third arrays in position_Deltas
             // aligned properly.
        -    static alignas(__m128d) double
        -      position_Deltas[3][ROUNDED_INTERACTIONS_COUNT],
        -      magnitudes[ROUNDED_INTERACTIONS_COUNT];
        +    static double
        +      position_Deltas[3][ROUNDED_INTERACTIONS_COUNT] __attribute__((aligned(16))),
        +      magnitudes[ROUNDED_INTERACTIONS_COUNT] __attribute__((aligned(16)));

             // Calculate the position_Deltas between the bodies for each interaction.
             for(intnative_t i=0, k=0; i &lt; BODIES_COUNT-1; ++i)
    </code></pre><p> to compile <a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/program/nbody-clang-8.html">the C program</a> with G++ compiler. The modern C++ compilers provide C compatibility extensions like the <code>__restrict__</code> keyword. You always can write the most performance critical code of a C++ program in C style. If you don't like the <a href="https://250bpm.com/blog:8/">STL containers with an overhead</a>, then you can use <a href="https://www.boost.org/doc/libs/1_74_0/doc/html/intrusive.html">Boost.intrusive</a> or even port a similar container from the Linux kernel or other fast C project -in most of the cases this won't be painful. See for example how a hash table from PostgreSQL, HTrie from <a href="https://github.com/tempesta-tech/tempesta/tree/master/tempesta_db">Tempesta DB</a>, and the Linux kernel read/write spinlocks (all are written in C) were used in a C++ <a href="https://github.com/tempesta-tech/blog/tree/master/htrie">benchmark</a>. </p><p>The last thing which must be mentioned about development of high performance programs in C++ is <a href="https://en.wikipedia.org/wiki/Template_metaprogramming">template metaprogramming</a>. It's very exciting about the modern C++ standards that using templates you can write quite sophisticated logic which is fully computed in the compile time and costs nothing in the run time. </p><h2>GOTO - the power of C</h2> <p><b>A professional tool must allow you to work with it in the most efficient way.</b> The goal of the high-level and high-performance programming languages is to generate the most efficient machine code. Each hardware architecture supports <i>jumps</i>, which means that you can jump to any address by any condition. The closest abstraction for the jumps in the C and C++ programming languages is <code>goto</code> operator. It's not so flexible ‚Ä¶</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://tempesta-tech.com/blog/fast-programming-languages-c-c++-rust-assembly">http://tempesta-tech.com/blog/fast-programming-languages-c-c++-rust-assembly</a></em></p>]]>
            </description>
            <link>http://tempesta-tech.com/blog/fast-programming-languages-c-c++-rust-assembly</link>
            <guid isPermaLink="false">hacker-news-small-sites-24960108</guid>
            <pubDate>Sun, 01 Nov 2020 15:33:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: A JavaScript SDK to reduce video streaming costs]]>
            </title>
            <description>
<![CDATA[
Score 64 | Comments 50 (<a href="https://news.ycombinator.com/item?id=24959519">thread link</a>) | @Anil1331
<br/>
November 1, 2020 | https://api.peervadoo.com/test | <a href="https://web.archive.org/web/*/https://api.peervadoo.com/test">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                <div>
                    <p><label for="url">Url:</label></p><!--<input type="text" class="form-control" id="url", placeholder="Please enter video url", value="https://d34mbcqhk5ge1k.cloudfront.net/index.m3u8">-->
                    </div>
                </div></div>]]>
            </description>
            <link>https://api.peervadoo.com/test</link>
            <guid isPermaLink="false">hacker-news-small-sites-24959519</guid>
            <pubDate>Sun, 01 Nov 2020 13:57:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[7GUIs]]>
            </title>
            <description>
<![CDATA[
Score 455 | Comments 51 (<a href="https://news.ycombinator.com/item?id=24958725">thread link</a>) | @dsego
<br/>
November 1, 2020 | https://eugenkiss.github.io/7guis/tasks/ | <a href="https://web.archive.org/web/*/https://eugenkiss.github.io/7guis/tasks/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>The tasks were selected by the following criteria. The task set should be as small as possible yet reflect as many typical (or fundamental or representative) challenges in GUI programming as possible. Each task should be as simple and self-contained as possible yet not too artificial. Preferably, a task should be based on existing examples as that gives the task more justification to be useful and there already will be at least one reference implementation.</p><p>Below, a description of each task highlighted with the challenges it reflects and a screenshot of the resulting GUI application in Java/Swing is given.</p><p>For a live version of the tasks see my<!-- --> <a target="_blank" href="https://eugenkiss.github.io/7guis-React-TypeScript-MobX/">React/MobX</a> <!-- -->implementation.</p><h2>Counter</h2><p><em>Challenge:</em> Understanding the basic ideas of a language/toolkit.</p><p><img src="https://eugenkiss.github.io/7guis/static/counter.9cd92091.png"></p><p>The task is to build a frame containing a label or read-only textfield<!-- --> <em>T</em> and a button <em>B</em>. Initially, the value in <em>T</em> is ‚Äú0‚Äù and each click of <em>B</em> increases the value in <em>T</em> by one.</p><p>Counter serves as a gentle introduction to the basics of the language, paradigm and toolkit for one of the simplest GUI applications imaginable. Thus, Counter reveals the required scaffolding and how the very basic features work together to build a GUI application. A good solution will have almost no scaffolding.</p><h2>Temperature Converter</h2><p><em>Challenges:</em> bidirectional data flow, user-provided text input.</p><p><img src="https://eugenkiss.github.io/7guis/static/tempconv.de9aff1f.png"></p><p>The task is to build a frame containing two textfields <em>T<sub>C</sub></em> <!-- -->and <em>T<sub>F</sub></em> representing the temperature in Celsius and Fahrenheit, respectively. Initially, both <em>T<sub>C</sub></em> and <em>T<sub>F</sub></em> are empty. When the user enters a numerical value into <em>T<sub>C</sub></em> the corresponding value in <em>T<sub>F</sub></em> is automatically updated and vice versa. When the user enters a non-numerical string into <em>T<sub>C</sub></em> the value in <em>T<sub>F</sub></em> is <em>not</em> updated and vice versa. The formula for converting a temperature <em>C</em> in Celsius into a temperature <em>F</em> in Fahrenheit is <em>C = (F - 32) * (5/9)</em> and the dual direction is <em>F = C * (9/5) + 32</em>.</p><p>Temperature Converter increases the complexity of Counter by having bidirectional data flow between the Celsius and Fahrenheit inputs and the need to check the user input for validity. A good solution will make the bidirectional dependency very clear with minimal boilerplate code.</p><p>Temperature Converter is inspired by the<!-- --> <a target="_blank" href="https://www.artima.com/pins1ed/gui-programming.html#32.4">Celsius/Fahrenheit converter</a> <!-- -->from the book <em>Programming in Scala</em>. It is such a widespread example‚Äîsometimes also in the form of a currency converter‚Äîthat one could give a thousand references. The same is true for the Counter task.</p><h2>Flight Booker</h2><p><em>Challenge:</em> Constraints.</p><p><img src="https://eugenkiss.github.io/7guis/static/bookflight.a5434663.png"></p><p>The task is to build a frame containing a combobox <em>C</em> with the two options ‚Äúone-way flight‚Äù and ‚Äúreturn flight‚Äù, two textfields <em>T<sub>1</sub></em> and<!-- --> <em>T<sub>2</sub></em> representing the start and return date, respectively, and a button <em>B</em> for submitting the selected flight. <em>T<sub>2</sub></em> is enabled iff <em>C</em>‚Äôs value is ‚Äúreturn flight‚Äù. When <em>C</em> has the value ‚Äúreturn flight‚Äù and <em>T<sub>2</sub></em>‚Äôs date is strictly before <em>T<sub>1</sub></em>‚Äôs then <em>B</em> is disabled. When a non-disabled textfield <em>T</em> has an ill-formatted date then <em>T</em> is colored red and <em>B</em> is disabled. When clicking <em>B</em> a message is displayed informing the user of his selection (e.g. ‚ÄúYou have booked a one-way flight on 04.04.2014.‚Äù). Initially, <em>C</em> has the value ‚Äúone-way flight‚Äù and <em>T<sub>1</sub></em> as well as <em>T<sub>2</sub></em> have the same (arbitrary) date (it is implied that <em>T<sub>2</sub></em> is disabled).</p><p>The focus of Flight Booker lies on modelling constraints between widgets on the one hand and modelling constraints within a widget on the other hand. Such constraints are very common in everyday interactions with GUI applications. A good solution for Flight Booker will make the constraints clear, succinct and explicit in the source code and not hidden behind a lot of scaffolding.</p><p>Flight Booker is directly inspired by the<!-- --> <a target="_blank" href="http://blog.reactiveprogramming.org/?p=21">Flight Booking Java example in Sodium</a> <!-- -->with the simplification of using textfields for date input instead of specialized date picking widgets as the focus of Flight Booker is not on specialized/custom widgets.</p><h2>Timer</h2><p><em>Challenges:</em> concurrency, competing user/signal interactions, responsiveness.</p><p><img src="https://eugenkiss.github.io/7guis/static/timer.ed46b6b4.png"></p><p>The task is to build a frame containing a gauge <em>G</em> for the elapsed time <em>e</em>, a label which shows the elapsed time as a numerical value, a slider <em>S</em> by which the duration <em>d</em> of the timer can be adjusted while the timer is running and a reset button <em>R</em>. Adjusting<!-- --> <em>S</em> must immediately reflect on <em>d</em> and not only when<!-- --> <em>S</em> is released. It follows that while moving <em>S</em> the filled amount of <em>G</em> will (usually) change immediately. When <em>e ‚â• d</em> is true then the timer stops (and <em>G</em> will be full). If, thereafter, <em>d</em> is increased such that <em>d &gt; e</em> will be true then the timer restarts to tick until <em>e ‚â• d</em> is true again. Clicking <em>R</em> will reset <em>e</em> to zero.</p><p>Timer deals with concurrency in the sense that a timer process that updates the elapsed time runs concurrently to the user‚Äôs interactions with the GUI application. This also means that the solution to competing user and signal interactions is tested. The fact that slider adjustments must be reflected immediately moreover tests the responsiveness of the solution. A good solution will make it clear that the signal is a timer tick and, as always, has not much scaffolding.</p><p>Timer is directly inspired by the timer example in the paper<!-- --> <a target="_blank" href="http://cs.brown.edu/~sk/Publications/Papers/Published/ick-adapt-oo-fwk-frp/paper.pdf">Crossing State Lines: Adapting Object-Oriented Frameworks to Functional Reactive Languages</a>.</p><h2>CRUD</h2><p><em>Challenges:</em> separating the domain and presentation logic, managing mutation, building a non-trivial layout.</p><p><img src="https://eugenkiss.github.io/7guis/static/crud.515ce94b.png"></p><p>The task is to build a frame containing the following elements: a textfield<!-- --> <em>T<sub>prefix</sub></em>, a pair of textfields <em>T<sub>name</sub></em> and<!-- --> <em>T<sub>surname</sub></em>, a listbox <em>L</em>, buttons <em>B<sub>C</sub></em>,<!-- --> <em>B<sub>U</sub></em> and <em>B<sub>D</sub></em> and the three labels as seen in the screenshot. <em>L</em> presents a view of the data in the database that consists of a list of names. At most one entry can be selected in <em>L</em> at a time. By entering a string into <em>T<sub>prefix</sub></em> the user can filter the names whose surname start with the entered prefix‚Äîthis should happen immediately without having to submit the prefix with enter. Clicking <em>B<sub>C</sub></em> <!-- -->will append the resulting name from concatenating the strings in<!-- --> <em>T<sub>name</sub></em> and <em>T<sub>surname</sub></em> to <em>L</em>.<!-- --> <em>B<sub>U</sub></em> and <em>B<sub>D</sub></em> are enabled iff an entry in <em>L</em> is selected. In contrast to <em>B<sub>C</sub></em>, <em>B<sub>U</sub></em> <!-- -->will not append the resulting name but instead replace the selected entry with the new name. <em>B<sub>D</sub></em> will remove the selected entry. The layout is to be done like suggested in the screenshot. In particular, <em>L</em> must occupy all the remaining space.</p><p>CRUD (Create, Read, Update and Delete) represents a typical graphical business application. The primary challenge is the separation of domain and presentation logic in the source code that is more or less forced on the implementer due to the ability to filter the view by a prefix. Traditionally, some form of MVC pattern is used to achieve the separation of domain and presentation logic. Also, the approach to managing the mutation of the list of names is tested. A good solution will have a good separation between the domain and presentation logic without much overhead (e.g. in the form of toolkit specific concepts or language/paradigm concepts), a mutation management that is fast but not error-prone and a natural representation of the layout (layout builders are allowed, of course, but would increase the overhead).</p><p>CRUD is directly inspired by the crud example in the blog post<!-- --> <a target="_blank" href="http://apfelmus.nfshost.com/blog/2012/03/29-frp-three-principles-bidirectional-gui.html">FRP - Three principles for GUI elements with bidirectional data flow</a>.</p><h2>Circle Drawer</h2><p><em>Challenges:</em> undo/redo, custom drawing, dialog control*.</p><p><img src="https://eugenkiss.github.io/7guis/static/circledraw.235dfd8b.png"></p><p>The task is to build a frame containing an undo and redo button as well as a canvas area underneath. Left-clicking inside an empty area inside the canvas will create an unfilled circle with a fixed diameter whose center is the left-clicked point. The circle nearest to the mouse pointer such that the distance from its center to the pointer is less than its radius, if it exists, is filled with the color gray. The gray circle is the selected circle <em>C</em>. Right-clicking <em>C</em> will make a popup menu appear with one entry ‚ÄúAdjust diameter..‚Äù. Clicking on this entry will open another frame with a slider inside that adjusts the diameter of <em>C</em>. Changes are applied immediately. Closing this frame will mark the last diameter as significant for the undo/redo history. Clicking undo will undo the last significant change (i.e. circle creation or diameter adjustment). Clicking redo will reapply the last undoed change unless new changes were made by the user in the meantime.</p><p>Circle Drawer‚Äôs goal is, among other things, to test how good the common challenge of implementing an undo/redo functionality for a GUI application can be solved. In an ideal solution the undo/redo functionality comes for free resp. just comes out as a natural consequence of the language / toolkit / paradigm. Moreover, Circle Drawer tests how dialog control*, i.e. keeping the relevant context between several successive GUI interaction steps, is achieved in the source code. Last but not least, the ease of custom drawing is tested.</p><p><small>* Dialog control is explained in more detail in the paper<!-- --> <a target="_blank" href="http://ceur-ws.org/Vol-610/paper11.pdf">Developing GUI Applications: Architectural Patterns Revisited</a> <!-- -->starting on page seven. The term describes the challenge of retaining context between successive GUI operations.</small></p><h2>Cells</h2><p><em>Challenges:</em> change propagation, widget customization, implementing a more authentic/involved GUI application.</p><p><img src="https://eugenkiss.github.io/7guis/static/cells.9544a72f.png"></p><p>The task is to create a simple but usable spreadsheet application. The spreadsheet should be scrollable. The rows should be numbered from 0 to 99 and the columns from A to Z. Double-clicking a cell <em>C</em> lets the user change <em>C</em>‚Äôs formula. After having finished editing the formula is parsed and evaluated and its updated value is shown in <em>C</em>. In addition, all cells which depend on <em>C</em> must be reevaluated. This process repeats until there are no more changes in the values of any cell (change propagation). Note that one should not just recompute the value of every cell but only of those cells that depend on another cell‚Äôs changed value. If there is an already provided spreadsheet widget it should not be used. Instead, another similar widget (like JTable in Swing) should be customized to become a reusable spreadsheet widget.</p><p>Cells is a more authentic and involved task that tests if a particular ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://eugenkiss.github.io/7guis/tasks/">https://eugenkiss.github.io/7guis/tasks/</a></em></p>]]>
            </description>
            <link>https://eugenkiss.github.io/7guis/tasks/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24958725</guid>
            <pubDate>Sun, 01 Nov 2020 11:20:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Building Containers Without Docker]]>
            </title>
            <description>
<![CDATA[
Score 95 | Comments 18 (<a href="https://news.ycombinator.com/item?id=24957887">thread link</a>) | @kiyanwang
<br/>
November 1, 2020 | https://blog.alexellis.io/building-containers-without-docker/ | <a href="https://web.archive.org/web/*/https://blog.alexellis.io/building-containers-without-docker/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div role="main">
    <article>

        

        <section>
            <div><p>In this post I'll outline several ways to build containers without the need for Docker itself. I'll use <a href="https://github.com/openfaas/">OpenFaaS</a> as the case-study, which uses OCI-format container images for its workloads. The easiest way to think about OpenFaaS is as a CaaS platform for <a href="https://kubernetes.io/">Kubernetes</a> which can run microservices, and add in FaaS and event-driven tooling for free.</p>
<p>See also <a href="https://openfaas.com/">OpenFaaS.com</a></p>
<p>The first option in the post will show how to use the built-in buildkit option for Docker's CLI, then <a href="https://github.com/moby/buildkit">buildkit</a> stand-alone (on Linux only), followed by Google's container builder, <a href="https://github.com/GoogleContainerTools/kaniko">Kaniko</a>.</p>
<p>This post covers tooling which can build an image from a Dockerfile, and so anything which limits the user to only Java (jib) or Go (ko) for instance is out of scope. I'll then wrap things up and let you know how to get in touch with suggestions, feedback and your own stories around wants and needs in container tooling.</p>
<h2 id="sowhatswrongwithdocker">So what's wrong with Docker?</h2>
<p>Nothing as such, Docker runs well on armhf, arm64, and on <code>x86_64</code>. The main Docker CLI has become a lot more than build/ship/run, and also lugs around several years of baggage, it now comes bundled with Docker Swarm and EE features.</p>
<blockquote>
<p>Update for Nov 2020: anyone using Docker's set of official base-images should also read: <a href="https://inlets.dev/blog/2020/10/29/preparing-docker-hub-rate-limits.html">Preparing for the Docker Hub Rate Limits</a></p>
</blockquote>
<h3 id="alternativestodocker">Alternatives to Docker</h3>
<p>There are a few efforts that attempt to strip "docker" back to its component pieces, the original UX we all fell in love with:</p>
<ul>
<li>
<p><a href="https://github.com/docker/docker">Docker</a> - docker itself now uses containerd to run containers, and has support for enabling buildkit to do highly efficient, caching builds.</p>
</li>
<li>
<p><a href="https://podman.io/">Podman</a> and <a href="https://github.com/containers/buildah">buildah</a> combination - RedHat / IBM's effort, which uses their own OSS toolchain to generate OCI images. Podman is marketed as being daemonless and rootless, but still ends up having to mount overlay filesystems and use a UNIX socket.</p>
</li>
<li>
<p><a href="https://github.com/alibaba/pouch">pouch</a> - from Alibaba, pouch is billed as "An Efficient Enterprise-class Container Engine". It uses containerd just like Docker, and supports both container-level isolation with <a href="https://github.com/opencontainers/runc">runc</a> and "lightweight VMs" such as <a href="https://github.com/hyperhq/runv">runV</a>. There's also more of a <a href="https://github.com/alibaba/pouch/blob/master/docs/architecture.md">focus on image distribution and strong isolation</a>.</p>
</li>
<li>
<p>Stand-alone buildkit - buildkit was started by <a href="https://twitter.com/tonistiigi?lang=en">T√µnis Tiigi</a> from Docker Inc as a brand new container builder with caching and concurrency in mind. buildkit currently only runs as a daemon, but you will hear people claim otherwise. They are forking the daemon and then killing it after a build.</p>
</li>
<li>
<p><a href="https://github.com/genuinetools/img">img</a> - img was written by <a href="https://github.com/jessfraz">Jess Frazelle</a> and is often quoted in these sorts of guides and is a wrapper for buildkit. That said, I haven't seen traction with it compared to the other options mentioned. The project was quite active <a href="https://github.com/genuinetools/img/commits/master">until late 2018 and has only received a few patches since</a>. img claims to be daemonless, but it uses buildkit so is probably doing some trickery there. I hear that <code>img</code> gives a better UX than buildkit's own CLI <code>buildctr</code>, but it should also be noted that img is only released for <code>x86_64</code> and there are no binaries for armhf / arm64.</p>
</li>
</ul>
<blockquote>
<p>An alternative to <code>img</code> would be <code>k3c</code> which also includes a runtime component and plans to support ARM architectures.</p>
</blockquote>
<ul>
<li><a href="https://github.com/ibuildthecloud/k3c">k3c</a> - Rancher's latest experiment which uses containerd and buildkit to re-create the original, classic, vanilla, lite experience of the original Docker version.</li>
</ul>
<p>Out of all the options, I think that I like k3c the most, but it is very nascient and bundles everything into one binary which is likely to conflict with other software, at present it runs its own embedded containerd and buildkit binaries.</p>
<blockquote>
<p>Note: If you're a RedHat customer and paying for support, then you really should use their entire toolchain to get the best value for your money. I checked out some of the examples and saw one that used my "classic" blog post on multi-stage builds. See for yourself which style you prefer <a href="https://github.com/containers/buildah/blob/master/demos/buildah_multi_stage.sh">the buildah example</a> vs. <a href="https://blog.alexellis.io/mutli-stage-docker-builds">Dockerfile example</a>.</p>
</blockquote>
<p>So since we are focusing on the "build" piece here and want to look at relativelt stable options, I'm going to look at:</p>
<ul>
<li>buildkit in Docker,</li>
<li>buildkit stand-alone</li>
<li>and kaniko.</li>
</ul>
<p>All of the above and more are now possible since the OpenFaaS CLI can output a standard "build context" that any builder can work with.</p>
<h2 id="buildatestapp">Build a test app</h2>
<p>Let's start with a Golang HTTP middleware, this is a cross between a function and a microservice and shows off how versatile OpenFaaS can be.</p>
<pre><code>faas-cli template store pull golang-middleware

faas-cli new --lang golang-middleware \
  build-test --prefix=alexellis2
</code></pre>
<ul>
<li><code>--lang</code> specifies the build template</li>
<li><code>build-test</code> is the name of the function</li>
<li><code>--prefix</code> is the Docker Hub username to use for pushing up our OCI image</li>
</ul>
<p>We'll get the following created:</p>
<pre><code>./
‚îú‚îÄ‚îÄ build-test
‚îÇ   ‚îî‚îÄ‚îÄ handler.go
‚îî‚îÄ‚îÄ build-test.yml

1 directory, 2 files
</code></pre>
<p>The handler looks like this, and is easy to modify. Additional dependencies can be added through vendoring or <a href="https://blog.golang.org/using-go-modules">Go modules</a>.</p>
<pre><code>package function

import (
	"fmt"
	"io/ioutil"
	"net/http"
)

func Handle(w http.ResponseWriter, r *http.Request) {
	var input []byte

	if r.Body != nil {
		defer r.Body.Close()

		body, _ := ioutil.ReadAll(r.Body)

		input = body
	}

	w.WriteHeader(http.StatusOK)
	w.Write([]byte(fmt.Sprintf("Hello world, input was: %s", string(input))))
}
</code></pre>
<h3 id="buildthenormalway">Build the normal way</h3>
<p>The normal way to build this app would be:</p>
<pre><code>faas-cli build -f build-test.yml
</code></pre>
<p>A local cache of the template and Dockerfile is also available at <code>./template/golang-middleware/Dockerfile</code></p>
<p>There are three images that are pulled in for this template:</p>
<pre><code>FROM openfaas/of-watchdog:0.7.3 as watchdog
FROM golang:1.13-alpine3.11 as build
FROM alpine:3.12
</code></pre>
<p>With the traditional builder, each of the images will be pulled in sequentially.</p>
<p>The wait a few moments and you're done, we now have that image in our local library.</p>
<p>We can also push it up to a registry with <code>faas-cli push -f build-test.yml</code>.</p>
<p><img src="https://blog.alexellis.io/content/images/2020/01/seq.png" alt="seq"></p>
<h3 id="buildwithbuildkitanddocker">Build with Buildkit and Docker</h3>
<p>This is the easiest change of all to make, and gives a fast build too.</p>
<pre><code>DOCKER_BUILDKIT=1 faas-cli build -f build-test.yml
</code></pre>
<p>We'll see that with this approach, the Docker daemon automatically switches out its builder for buildkit.</p>
<p>Buildkit offers a number of advantages:</p>
<ul>
<li>More sophisticated caching</li>
<li>Running later instructions first, when possible - i.e. downloading the "runtime" image, before the build in the "sdk" layer is even completed</li>
<li>Super fast when building a second time</li>
</ul>
<p>With buildkit, all of the base images can be pulled in to our local library at once, since the FROM (download) commands are not executed sequentially.</p>
<pre><code>FROM openfaas/of-watchdog:0.7.3 as watchdog
FROM golang:1.13-alpine3.11 as build
FROM alpine:3.11
</code></pre>
<p>This option works even on a Mac, since buildkit is proxied via the Docker daemon running in the VM.</p>
<p><img src="https://blog.alexellis.io/content/images/2020/01/dkit.png" alt="dkit"></p>
<h3 id="buildwithbuildkitstandalone">Build with Buildkit standalone</h3>
<p>To build with Buildkit in a stand-alone setup we need to run buildkit separately on a Linux host, so we can't use a Mac.</p>
<p><code>faas-cli build</code> would normally execute or fork <code>docker</code>, because the command is just a wrapper. So to bypass this behaviour we should write out a build context, that's possible via the following command:</p>
<pre><code>faas-cli build -f build-test.yml --shrinkwrap

[0] &gt; Building build-test.
Clearing temporary build folder: ./build/build-test/
Preparing ./build-test/ ./build/build-test//function
Building: alexellis2/build-test:latest with golang-middleware template. Please wait..
build-test shrink-wrapped to ./build/build-test/
[0] &lt; Building build-test done in 0.00s.
[0] Worker done.

Total build time: 0.00
</code></pre>
<p>Our context is now available in the <code>./build/build-test/</code> folder with our function code and the template with its entrypoint and Dockerfile.</p>
<pre><code>./build/build-test/
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ function
‚îÇ   ‚îî‚îÄ‚îÄ handler.go
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ main.go
‚îî‚îÄ‚îÄ template.yml

1 directory, 5 files
</code></pre>
<p>Now we need to run buildkit, we can build from source, or grab upstream binaries.</p>
<pre><code>curl -sSLf https://github.com/moby/buildkit/releases/download/v0.6.3/buildkit-v0.6.3.linux-amd64.tar.gz | sudo tar -xz -C /usr/local/bin/ --strip-components=1
</code></pre>
<p>If you checkout the releases page, you'll also find buildkit available for armhf and arm64, which is great for multi-arch.</p>
<p>Run the buildkit daemon in a new window:</p>
<pre><code>sudo buildkitd 
WARN[0000] using host network as the default            
INFO[0000] found worker "l1ltft74h0ek1718gitwghjxy", labels=map[org.mobyproject.buildkit.worker.executor:oci org.mobyproject.buildkit.worker.hostname:nuc org.mobyproject.buildkit.worker.snapshotter:overlayfs], platforms=[linux/amd64 linux/386] 
WARN[0000] skipping containerd worker, as "/run/containerd/containerd.sock" does not exist 
INFO[0000] found 1 workers, default="l1ltft74h0ek1718gitwghjxy" 
WARN[0000] currently, only the default worker can be used. 
INFO[0000] running server on /run/buildkit/buildkitd.sock 
</code></pre>
<p>Now let's start a build, passing in the shrink-wrapped location as the build-context. The command we want is <code>buildctl</code>, buildctl is a client for the daemon and will configure how to build the image and what to do when it's done, such as exporting a tar, ignoring the build or pushing it to a registry.</p>
<pre><code>buildctl build --help
NAME:
   buildctl build - build

USAGE:
   
  To build and push an image using Dockerfile:
    $ buildctl build --frontend dockerfile.v0 --opt target=foo --opt build-arg:foo=bar --local context=. --local dockerfile=. --output type=image,name=docker.io/username/image,push=true
  

OPTIONS:
   --output value, -o value  Define exports for build result, e.g. --output type=image,name=docker.io/username/image,push=true
   --progress value          Set type of progress (auto, plain, tty). Use plain to show container output (default: "auto")
   --trace value             Path to trace file. Defaults to no tracing.
   --local value             Allow build access to the local directory
   --frontend value          Define frontend used for build
   --opt value               Define custom options for frontend, e.g. --opt target=foo --opt build-arg:foo=bar
   --no-cache                Disable cache for all the vertices
   --export-cache value      Export build cache, e.g. --export-cache type=registry,ref=example.com/foo/bar, or ‚Ä¶</code></pre></div></section></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.alexellis.io/building-containers-without-docker/">https://blog.alexellis.io/building-containers-without-docker/</a></em></p>]]>
            </description>
            <link>https://blog.alexellis.io/building-containers-without-docker/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957887</guid>
            <pubDate>Sun, 01 Nov 2020 07:54:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I No Longer Tell My Friends about Anki/SuperMemo]]>
            </title>
            <description>
<![CDATA[
Score 63 | Comments 82 (<a href="https://news.ycombinator.com/item?id=24957617">thread link</a>) | @kioleanu
<br/>
October 31, 2020 | https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/ | <a href="https://web.archive.org/web/*/https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><p>This article <a href="https://www.lesswrong.com/posts/6NvbSwuSAooQxxf7f/beware-of-other-optimizing">Beware of Other-Optimizing</a> by Eliezer Yudkowsky is highly illuminating. I recommend you read it through the lens of ‚Äúrecommending Anki to a friend.‚Äù This article is about the problems of giving advice on how to learn.</p>
<h2>Spreading the ‚Äúgospel‚Äù to the world</h2>
<p>If you deeply believe something, along the lines of ‚Äúif everyone did it, the world would be much better off.‚Äù and have tried convincing other people to do that thing, then you will realize it‚Äôs almost impossible to change others‚Äô opinions or behaviors.</p>
<p>Maybe you‚Äôre not that ambitious to convince everyone, so you start small: you share it with your friends, but then discovered nobody actually cares or realizes its significance. A mild version is like <a href="https://www.deathbulge.com/comics/206">showing your favorite TV show and they don‚Äôt care</a>:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/acb04/deathbulge.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="deathbulge" title="deathbulge" src="https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/1c72d/deathbulge.jpg" srcset="https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/a80bd/deathbulge.jpg 148w,
https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/1c91a/deathbulge.jpg 295w,
https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/1c72d/deathbulge.jpg 590w,
https://www.masterhowtolearn.com/static/26c8c80614f9b9a1a0a8f6e2ff1e17c2/acb04/deathbulge.jpg 750w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>My faith in evidence-based learning strategies is informed by my personal experience and <a href="https://www.masterhowtolearn.com/2020-02-25-how-to-learn-about-meta-learning-my-resource-list">my meta-learning list</a>. I wholeheartedly believe Spaced Repetition Software (SRS) like SuperMemo and Anki is the key to effective and efficient learning. If you believe education is the future, then the knowledge about evidence-based learning strategies is one big key to unlocking that future, both individually and collectively.</p>
<h2>‚ÄúDoing this every day seems very tiring.‚Äù</h2>
<p>Two years ago I was doing my Anki reps. One friend glanced over and was interested in what I was doing.</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/ee745/myTime.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="My time has come" title="My time has come" src="https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/1c72d/myTime.jpg" srcset="https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/a80bd/myTime.jpg 148w,
https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/1c91a/myTime.jpg 295w,
https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/1c72d/myTime.jpg 590w,
https://www.masterhowtolearn.com/static/443ff24d4c08fb6e97f3db4438a49b2e/ee745/myTime.jpg 660w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>We ate lunch together while I was giving her a little presentation. I talked <em>very enthusiastically</em> about spaced repetition, basic memory science and Anki operations. Of course I had to show her the infamous forgetting curve:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/8aab1/forgetting-curve-wired-wozniak.webp" target="_blank" rel="noopener">
    <span></span>
  <img alt="forgetting-curve" title="forgetting-curve" src="https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/5ca24/forgetting-curve-wired-wozniak.webp" srcset="https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/cbe2e/forgetting-curve-wired-wozniak.webp 148w,
https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/3084c/forgetting-curve-wired-wozniak.webp 295w,
https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/5ca24/forgetting-curve-wired-wozniak.webp 590w,
https://www.masterhowtolearn.com/static/2abe95310027f94ad36981994f56c65d/8aab1/forgetting-curve-wired-wozniak.webp 630w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>She sounded excited about the possibility of finally mastering a second language. But at one point she was confused:</p>
<blockquote>
<p>‚ÄúIf I hadn‚Äôt learned it how could I recall it from memory?‚Äù</p>
</blockquote>
<p>So I explained that assessment <strong>for</strong> learning (testing as a means of learning) is different from assessment <strong>of</strong> learning (finding out what you‚Äôve learned). The act of ‚Äúrecalling from memory‚Äù is itself a learning process. Then I was aware that her confusion was probably due to a common misconception about memory: human memory works like computer memory:</p>
<blockquote>
<p>The functional architecture of how humans forget, remember, and learn is <strong>unlike</strong> the corresponding processes in man-made devices [‚Ä¶] We think of ourselves as working like computers, we become prone to assuming that exposing ourselves to information and procedures will lead to storage (i.e., recording) of such information or procedures in our memories‚Äîthat the information will write itself in one‚Äôs memory.</p>
<p>If we think of human memory equals to memory in a computer, we are unlikely to appreciate that retrieving information from our memory increases the subsequent accessibility of that information, while retrieving information from computer memory leaves the status of that information unperturbed. <a href="https://www.taylorfrancis.com/books/e/9780203842539/chapters/10.4324%2F9780203842539-6">On the Symbiosis of Remembering, Forgetting, and Learning</a></p>
</blockquote>
<p>Side note: this story might give you the impression that I liked to show off what I know. No not really. I like to be convinced with evidence, and I thought others were the same. I was wrong. Also, I included the above quotes for the sake of convincing you, the reader. I didn‚Äôt obfuscate the subject matter further with phrases like assessment <strong>for</strong> learning and assessment <strong>of</strong> learning.</p>
<p>She looked‚Ä¶ befuddled. Sort of like this:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/c08c5/AwkwardSmile.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="awkwardSmile" title="awkwardSmile" src="https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/1c72d/AwkwardSmile.jpg" srcset="https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/a80bd/AwkwardSmile.jpg 148w,
https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/1c91a/AwkwardSmile.jpg 295w,
https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/1c72d/AwkwardSmile.jpg 590w,
https://www.masterhowtolearn.com/static/e459a547d1aa99ea034a06ea3f4f1f13/c08c5/AwkwardSmile.jpg 640w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>I remember I was so excited and nervous at the same time that I was fumbling for words, trying to simplify it as much as I could. In retrospect, I was making things worse.</p>
<p>She‚Äôd listen to me quite intently, signaling that she was thinking and trying to figure it out, but I could tell she was still confused. And the more I explained, the deeper the rabbit hole went (like keep clicking hyperlinks in Wikipedia), and the more confused she became, so I stopped talking to stop making the whole situation uncomfortable. The following monologue is how I imagine what she was thinking at the time:</p>
<blockquote>
<p>‚ÄúHe‚Äôs so passionate about this stuff and so sure of himself that I guess he‚Äôs right.‚Äù</p>
</blockquote>
<blockquote>
<p>‚ÄúI‚Äôm not really sure what he means. I do want to learn Japanese but the stuff he‚Äôs talking about is so confusing‚Ä¶‚Äù</p>
</blockquote>
<blockquote>
<p>‚ÄúI was indeed interested in the beginning, but I don‚Äôt really care at this point. I‚Äôm just going to pretend I understand and end this whole conversation asap.‚Äù</p>
</blockquote>
<p>I will never forget what she said at one point,</p>
<blockquote>
<p>‚ÄúDoing this every day seems very tiring.‚Äù</p>
</blockquote>
<p>I was like ‚ÄúYeah‚Ä¶‚Äù I never followed up on her progress. I figured if she was truly interested, when she bumped into problem she would ask for my help. As expected, we never talked about it and I never mentioned Anki again.</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/0b533/sadFrog.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="sadFrog" title="sadFrog" src="https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/0b533/sadFrog.png" srcset="https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/12f09/sadFrog.png 148w,
https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/e4a3f/sadFrog.png 295w,
https://www.masterhowtolearn.com/static/7a936abffcd1a452478dca75a9f1ec62/0b533/sadFrog.png 500w" sizes="(max-width: 500px) 100vw, 500px" loading="lazy">
  </a>
    </span></p>
<p>These has happened countless times. I usually look nonchalant on the outside but dying on the inside. People looked interested (probably due to my enthusiasm and it‚Äôs impolite to look otherwise) and then never actually bothered to use Anki. Some would actually try, make a few cards, do the reps for a few days and then say, ‚ÄúI tried and Anki doesn‚Äôt work.‚Äù</p>
<p>I‚Äôm probably over my head, but sometimes it feels like I‚Äôm personally attacked, that what I‚Äôm saying is not valuable. I understand it‚Äôs not true, but it took me years to study the learning science and to gain the experience with Anki/SuperMemo. The fact that they‚Äôre dismissing the software feels like they‚Äôre dismissing my knowledge and experience.</p>
<h2>The problems of giving advice on how to learn</h2>
<h3>#1. Nobody cares <em>that</em> much, alright?</h3>
<p>When I first discovered Anki I was like, ‚ÄúHow come no one around me knows this?! I need to share this to everyone!‚Äù So I would tell my friends about Anki but nobody was interested. I‚Äôve introduced Anki to people and every time it‚Äôs a very frustrating experience. (Surprise surprise, not SuperMemo. The learning curve of Anki is much lower. What chance do I have if I preached SuperMemo when they even think Anki is too hard to use?)</p>
<p>Update: I was never a missionary and randomly went out my way to tell people about Anki all the time like this:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/737f1/thejenkinscomicVim.webp" target="_blank" rel="noopener">
    <span></span>
  <img alt="vim" title="vim" src="https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/737f1/thejenkinscomicVim.webp" srcset="https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/cbe2e/thejenkinscomicVim.webp 148w,
https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/3084c/thejenkinscomicVim.webp 295w,
https://www.masterhowtolearn.com/static/e160326dcc1a72ba87b79f26f888d457/737f1/thejenkinscomicVim.webp 585w" sizes="(max-width: 585px) 100vw, 585px" loading="lazy">
  </a>
    </span></p>
<p><a href="https://thejenkinscomic.wordpress.com/">Source</a></p>
<p>Very early on I did give unsolicited advice once to my best friend by intentionally bringing up Anki. Then I did bring up Anki on multiple occasions, but only when the opportunity presented itself, like the story above.</p>
<p>People may be interested in how you‚Äôve developed a skill or become fluent in a foreign language, but just not <strong>that</strong> interested. And they certainly don‚Äôt expect to be suddenly lectured on how learning and memory work.</p>
<p>I never liked following up to people with questions like ‚ÄúSo how‚Äôs Anki? Have you used it?‚Äù It feels like pushing an agenda to them. Also, since most would not even bother buying and downloading the app, their response is usually, ‚ÄúI forgot about it. I‚Äôll do it later.‚Äù and the conversation would end in an awkward tone.</p>
<h3>#2. I‚Äôm not sure if I actually want it, alright?</h3>
<p>Sometimes people keep lamenting ‚ÄúI want to learn X or I want to get better grades.‚Äù How many times do you hear people say they want to learn a second language? This is like that friend who keeps saying ‚ÄúI want to lose weight‚Äù. Probably after all, they‚Äôre just lamenting and not yet ready to put in the effort to change.</p>
<p>Trying to convince others to use Anki/SuperMemo is like trying to convince your friends to go to the gym regularly. You can talk about the benefits of exercising/weight-lifting, how good you‚Äôll feel afterwards, how much more productive you‚Äôll be and so on. But nothing will work if they don‚Äôt try it in the first place, and it doesn‚Äôt help that spaced repetition doesn‚Äôt work in the short-term since using Spaced Repetition Software is a life-long pursuit (just as learning is):</p>
<blockquote>
<p>This long term focus may explain why explicit spaced repetition is an uncommon studying technique: the pay-off is distant &amp; counterintuitive, the cost of self-control near &amp; vivid. <a href="https://www.gwern.net/Spaced-repetition">Gwern‚Äôs Spaced Repetition for Efficient Learning</a></p>
</blockquote>
<h3>#3. Why are you so hyped about it?</h3>
<p>It‚Äôs rare if people could understand and realize the significance and application of Spaced Repetition Software in a casual 10-min chat. It‚Äôs not about the complexity (it‚Äôs not rocket science after all), but rather it‚Äôs about awareness: problems with current learning approaches and how Anki/SuperMemo could solve the problems. In other words, if I don‚Äôt see the problems, why bother changing?</p>
<p>I have a friend who was learning German. She copied German vocabulary on one side and the equivalent English on the other in a notebook. I showed her my Korean Anki cards: ‚ÄúTake a look at these beautiful images! Gifs! Sentence cards! Audio clips! Mass Immersion Approach! (Former: All Japanese All The Time (AJATT)), Stephen Krashen‚Äôs Input Hypothesis!‚Äù Then I had another friend who was studying to become a nurse. I told him about Anki: ‚ÄúImage occlusion for anatomy!‚Äù It felt wrong of me to be hiding Anki (<a href="https://ankiweb.net/shared/info/1374772155">Image Occlusion</a> to be specific) from him. Deep down I want to shove their faces to this table:</p>
<p><span>
      <a href="https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/91608/UtilityAssessment.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="UtilityAssessment" title="UtilityAssessment" src="https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/fcda8/UtilityAssessment.png" srcset="https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/12f09/UtilityAssessment.png 148w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/e4a3f/UtilityAssessment.png 295w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/fcda8/UtilityAssessment.png 590w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/efc66/UtilityAssessment.png 885w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/c83ae/UtilityAssessment.png 1180w,
https://www.masterhowtolearn.com/static/50f60f43bbd89353f63423035d211043/91608/UtilityAssessment.png 1251w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<p>(Image source: <a href="https://journals.sagepub.com/stoken/rbtfl/Z10jaVH/60XQM/full">Improving Students‚Äô Learning With Effective Learning Techniques</a>)</p>
<p>I was exaggerating but you get the point: it‚Äôs not possible to convey the significance and application of it all in a casual 10-min chat. With the benefit of hindsight, all my attempts could‚Äôve been a lot better:</p>
<ul>
<li>Maybe I was so convinced and have so much faith in Spaced Repetition Software that I came off as condescending, giving off the impression like ‚Äúyou don‚Äôt know how to study; let me teach you.‚Äù</li>
<li>Maybe it‚Äôs the bold claims: ‚ÄúYou‚Äôll get 2x results with half the study time.‚Äù (How many are really true whenever you hear such claim?)</li>
<li>Maybe it‚Äôs the situation: all he or she wants is someone to listen about the difficulty of studying, not some real advice or suggestions.</li>
</ul>
<p>Here‚Äôs the guy from <a href="http://brianjx.altervista.org/">How I Passed the Demanding [‚Ä¶] Italian Language Exam Without Going to Italy ‚Äì Here‚Äôs a Hint: the 326,538 Flashcard Reviews Helped a Lot.</a></p>
<blockquote>
<p>Like many language teachers, V. had never heard of Anki (but she did know Reverso Context). I showed her how I studied Italian ‚Ä¶</p></blockquote></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/">https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/</a></em></p>]]>
            </description>
            <link>https://www.masterhowtolearn.com/2020-10-31-why-i-no-longer-tell-my-friends-about-anki-supermemo/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957617</guid>
            <pubDate>Sun, 01 Nov 2020 06:33:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Visualizing Git Concepts with D3]]>
            </title>
            <description>
<![CDATA[
Score 241 | Comments 25 (<a href="https://news.ycombinator.com/item?id=24957280">thread link</a>) | @gilad
<br/>
October 31, 2020 | https://onlywei.github.io/explain-git-with-d3/ | <a href="https://web.archive.org/web/*/https://onlywei.github.io/explain-git-with-d3/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div id="ExplainGitCommit-Container">
      <p>
        We are going to skip instructing you on how to add your files for commit in this explanation.
        Let's assume you already know how to do that. If you don't, go read some other tutorials.
      </p>
      <p>
        Pretend that you already have your files staged for commit and enter <span>git commit</span>
        as many times as you like in the terminal box.
      </p>
      
    </div>
    <div id="ExplainGitTag-Container">
      <p>
        <span>git tag name</span> will create a new tag named "name".
        Creating tags just creates a new tag pointing to the currently checked out commit.
      </p>
      <p>
        Tags can be deleted using the command <span>git tag -d name</span> (coming soon).
      </p>
      <p>
        Type <span>git commit</span> and <span>git tag</span> commands
        to your hearts desire until you understand this concept.
      </p>
      
    </div>
    <div id="ExplainGitBranch-Container">
      <p>
        <span>git branch name</span> will create a new branch named "name".
        Creating branches just creates a new tag pointing to the currently checked out commit.
      </p>
      <p>
        Branches can be deleted using the command <span>git branch -d name</span>.
      </p>
      <p>
        Type <span>git commit</span> and <span>git branch</span> commands
        to your hearts desire until you understand this concept.
      </p>
      
    </div>
    <div id="ExplainGitCheckout-Container">
      <p>
        <span>git checkout</span> has many uses,
        but the main one is to switch between branches.<br>
        For example, to switch from master branch to dev branch,
        I would type <span>git checkout dev</span>.
        After that, if I do a git commit, notice where it goes. Try it.
      </p>
      <p>
        In addition to checking out branches, you can also checkout individual commits. Try it.<br>
        Make a new commit and then type <span>git checkout bb92e0e</span>
        and see what happens.
      </p>
      <p>
        Type <span>git commit</span>, <span>git branch</span>,
        and <span>git checkout</span> commands to your hearts desire
        until you understand this concept.
      </p>
      
    </div>
    <div id="ExplainGitCheckout-b-Container">
      <p>
        You can combine <span>git branch</span> and <span>git checkout</span>
        into a single command by typing <span>git checkout -b branchname</span>.
        This will create the branch if it does not already exist and immediately check it out.
      </p>
      
    </div>
    <div id="ExplainGitReset-Container">
      <p>
        <span>git reset</span> will move HEAD and the current branch back to wherever
        you specify, abandoning any commits that may be left behind. This is useful to undo a commit
        that you no longer need.
      </p>
      <p>
        This command is normally used with one of three flags: "--soft", "--mixed", and "--hard".
        The soft and mixed flags deal with what to do with the work that was inside the commit after
        you reset, and you can read about it <a href="http://git-scm.com/2011/07/11/reset.html">here</a>.
        Since this visualization cannot graphically display that work, only the "--hard" flag will work
        on this site.
      </p>
      <p>
        The ref "HEAD^" is usually used together with this command. "HEAD^" means "the commit right
        before HEAD. "HEAD^^" means "two commits before HEAD", and so on.
      </p>
      <p>
        Note that you must <b>never</b> use <span>git reset</span> to abandon commits
        that have already been pushed and merged into the origin. This can cause your local repository
        to become out of sync with the origin. Don't do it unless you really know what you're doing.
      </p>
      
    </div>
    <div id="ExplainGitRevert-Container">
      <p>
        To undo commits that have already been pushed and shared with the team, we cannot use the
        <span>git reset</span> command. Instead, we have to use <span>git revert</span>.
      </p>
      <p>
        <span>git revert</span> will create a new commit that will undo all of the work that
        was done in the commit you want to revert.
      </p>
      
    </div>
    <div id="ExplainGitMerge-Container">
      <p>
        <span>git merge</span> will create a new commit with two parents. The resulting
        commit snapshot will have the all of the work that has been done in both branches.
      </p>
      <p>
        If there was no divergence between the two commits, git will do a "fast-forward" method merge.<br>
        To see this happen, checkout the 'ff' branch and then type <span>git merge dev</span>.
      </p>
      
    </div>
    <div id="ExplainGitRebase-Container">
      <p>
        <span>git rebase</span> will take the commits on this branch and "move" them so that their
        new "base" is at the point you specify.
      </p>
      <p>
        You should pay close attention to the commit IDs of the circles as they move when you do this exercise.
      </p>
      <p>
        The reason I put "move" in quotations because this process actually generates brand new commits with
        completely different IDs than the old commits, and leaves the old commits where they were. For this reason,
        you never want to rebase commits that have already been shared with the team you are working with.
      </p>
      
    </div>
    <div id="ExplainGitFetch-Container">
      <p>
        <span>git fetch</span> will update all of the "remote tracking branches" in your local repository.
        Remote tracking branches are tagged in grey.
      </p>
      
    </div>
    <div id="ExplainGitPull-Container">
      <p>
        A <span>git pull</span> is a two step process that first does a <span>git fetch</span>,
        and then does a <span>git merge</span> of the remote tracking branch associated with your current branch.
        If you have no current branch, the process will stop after fetching.
      </p>
      <p>
        If the argument "--rebase" was given by typing <span>git pull --rebase</span>, the second step of
        pull process will be a rebase instead of a merge. This can be set to the default behavior by configuration by typing:
        <span>git config branch.BRANCHNAME.rebase true</span>.
      </p>
      
    </div>
    <div id="ExplainGitPush-Container">
      <p>
        A <span>git push</span> will find the commits you have on your local branch that the corresponding branch
        on the origin server does not have, and send them to the remote repository.
      </p>
      <p>
        By default, all pushes must cause a fast-forward merge on the remote repository. If there is any divergence between
        your local branch and the remote branch, your push will be rejected. In this scenario, you need to pull first and then
        you will be able to push again.
      </p>
      
    </div>
    <div id="ExplainGitClean-Container">
      <p>
        One simple example of the use of <span>git reset</span> is to completely restore your local repository
        state to that of the origin.<br>
        You can do so by typing <span>git reset origin/master</span>.
      </p>
      <p>
        Note that this won't delete untracked files, you will have to delete those separately with
        the command <span>git clean -df</span>.
      </p>
      
    </div>
    <div id="ExplainGitFetchRebase-Container">
      <p>
        Below is a situation in which you are working in a local branch that is all your own. You want to receive the latest code
        from the origin server's master branch. To update your local branch, you can do it without having to switch branches!
      </p>
      <p>
        First do a <span>git fetch</span>, then type <span>git rebase origin/master</span>!
      </p>
      
    </div>
    <div id="ExplainGitDeleteBranches-Container">
      <p>
        <span>git branch -d</span> is used to delete branches.
        I have pre-created a bunch of branches for you to delete in the playground below.
        Have at it.
      </p>
      
    </div>
    <div id="ExplainGitFree-Container">
      <p>
        Do whatever you want in this free playground.
      </p>
      
    </div>
  </div></div>]]>
            </description>
            <link>https://onlywei.github.io/explain-git-with-d3/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957280</guid>
            <pubDate>Sun, 01 Nov 2020 04:43:47 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Toronto-area lawyer had to flee Canada after taking on the tow truck industry]]>
            </title>
            <description>
<![CDATA[
Score 416 | Comments 232 (<a href="https://news.ycombinator.com/item?id=24957200">thread link</a>) | @walterbell
<br/>
October 31, 2020 | https://www.ctvnews.ca/w5/this-toronto-area-lawyer-had-to-flee-the-country-after-taking-on-the-tow-truck-industry-1.5167869 | <a href="https://web.archive.org/web/*/https://www.ctvnews.ca/w5/this-toronto-area-lawyer-had-to-flee-the-country-after-taking-on-the-tow-truck-industry-1.5167869">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <p>TORONTO -- 
	Lisa Carr never thought her work would lead to armed threats, a firebombing, a shooting and a conspiracy to kill her.</p>
<p>
	The Carr Law office is in a nondescript strip mall in Vaughan, Ont., north of Toronto. It‚Äôs closed now, after the litigation lawyer says police told her they could no longer protect her.</p>
<p>
	She was shuttled to another country where she spent five long months in hiding. Carr has never before told her story, but agreed to meet for an interview as part of a W5 investigation into the shady underbelly of an industry that forced her to give up her business and almost cost her, her life: The tow truck industry.</p>
<p>
	Over the last number of years, criminal elements have been battling for lucrative control of the major highways around the Toronto area. It has resulted in more than 50 arsons, multiple shootings and at least four murders.</p>
<p>
	So why is there so much violence over a couple of hundred-dollar tows at the side of the road? Because that one tow can net tens of thousands of dollars.</p>
<p>
	Here‚Äôs how it works: The tow truck driver gets a kickback from an unscrupulous auto body shop, which then submits wildly inflated repair fees to an insurance company.</p>
<p>
	<img alt="york police" src="https://www.ctvnews.ca/polopoly_fs/1.4954903!/httpImage/image.jpg_gen/derivatives/landscape_960/image.jpg"></p>
<p>
	The insurance industry estimates that fake repair bills tally up to $2 billion a year in Canada. And that‚Äôs why Carr was in the crosshairs. She was hired by an insurance company to challenge bogus claims.</p>
<p>
	Over the course of a number of months, Carr‚Äôs law firm was the target of increasingly violent attacks. First a firebombing and then her office was set on fire.</p>
<p>
	Months later, in broad daylight, a colleague leaving work had a gun put to her head and was told, ‚ÄúStop suing our friends.‚Äù Shortly after that, again in broad daylight, someone opened fire through the front door of the busy office.</p>
<p>
	Carr says it is incredible no one was struck by the flurry of bullets.</p>
<p>
	‚ÄúI looked down the hall and I saw my receptionist on her hands and knees surrounded by glass. And one of the other girls came running at me saying, ‚ÄòShots fired, shots fired. Call 911.‚Äô‚Äù</p>
<p>
	While the violence surrounding the tow truck industry has made headlines in the Greater Toronto Area, the story that has never been told is that York Regional Police (YRP) uncovered a plot to kill Carr.</p>
<p>
	It was such a credible threat that they gave her an hour to pack up her belongings and leave her home. Carr and her husband were then whisked out of the country and spent five months in hiding.</p>
<p>
	Three separate police services ‚Äì YRP, Toronto Police Service and Ontario Provincial Police ‚Äì joined forces to launch Project Platinum to investigate the violence associated with the tow truck industry.</p>
<p>
	They carried out a series of raids this past spring, which netted dozens of high-powered weapons and led to the arrests of 35 people who face almost 500 charges, including the attempted murder of Carr.</p>
<p>
	<img alt="weapon" src="https://www.ctvnews.ca/polopoly_fs/1.4954983!/httpImage/image.jpg_gen/derivatives/landscape_960/image.jpg"></p>
<p>
	Now back in Canada, Carr says police have told her she is likely no longer in danger, but with one caveat.</p>
<p>
	‚ÄúThe police said we believe the risk is low. As long as you don't go back to work, as long as you don't restart the firm,‚Äù she says.</p>
<p>
	‚ÄúSo they have effectively ended my career. We lost everything. They won.‚Äù</p>
                                              </div></div>]]>
            </description>
            <link>https://www.ctvnews.ca/w5/this-toronto-area-lawyer-had-to-flee-the-country-after-taking-on-the-tow-truck-industry-1.5167869</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957200</guid>
            <pubDate>Sun, 01 Nov 2020 04:20:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Simple Image Vectorization]]>
            </title>
            <description>
<![CDATA[
Score 124 | Comments 14 (<a href="https://news.ycombinator.com/item?id=24957120">thread link</a>) | @thesephist
<br/>
October 31, 2020 | https://wordsandbuttons.online/simple_image_vectorization.html | <a href="https://web.archive.org/web/*/https://wordsandbuttons.online/simple_image_vectorization.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    
    <p>
Vectorization is when you take some minecraft-style raster image and make a crisp vector picture out of it.
    </p>
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/Bitmap_VS_SVG.svg">
    
    <p>
It's especially useful when you want to turn a satellite photo into a map. Or if you want to scan some blueprint and turn it into a CAD model. Or if you want to reissue an old game and you don't want to redraw all the artwork from scratch.
    </p>
    <p>
The algorithm I'm going to show you has nothing to do with all these things. It's a basic vectorization technique which, in its original form, has little to none applications in the industry.
    </p>
    <p>
On the plus side, it illustrates the approach rather well. It shows how things like bilinear interpolation, gradient descent, and parametric splines work together to solve a real-world problem. At the very least, it makes learning about all these things a little more compelling.
    </p>

    <h2>
An input image
    </h2>
    <p>
A raster image is essentially a rectangular table of things. If it's a full-color RGB, then it's a table of color pixels. Color pixels are the triplets of 8-bit integer values where each value represents an amount of red, green, and blue color.
    </p>
    <p>
Medical images, such as obtained from computed tomography, are usually the tables of 12-bit or 16-bit integers. It's not a color really since the values come from invisible X-ray radiation, but they are called gray values nevertheless.
    </p>
    <p>
Satellite images may have a lot of channels. Apart from the colors of the visible specter they may contain ultra-violet and infra-red luminosity. Channels may be represented by integers or floating point values.
    </p>
    <p>
Our image will be a simple gray-scale bitmap.
    </p>
    <canvas id="greyscale_canvas" width="640" height="640"></canvas>
    <p>
Technically, we can already turn it into vectors rather easily. Let's just agree on some threshold, and mark the contour of all the pixels that have the values exceeding this threshold.
    </p>
    <canvas id="greyscale_canvas_contour" width="640" height="640"></canvas>
    <p>
Well, it's simple, but it's not what we wanted. We want curves, not corners. And for that, we have to make our image less cornery.
    </p>
    <h2>
<span id="index_image_interpolation">Image interpolation</span>
    </h2>
    <p>
Let's say our image is not a table of values. Let's say we only know the values in the centers of the pixels, and we have to guess the values between them somehow.
    </p>
    <p>
This is called interpolation. The simplest case would be the nearest neighbor interpolation, where for every point on an image, the value is the value from the nearest pixel's center. But this simply turns it back into a table.
    </p>
    <p>
A little more advanced is the <span id="index_bilinear_interpolation">bilinear interpolation</span>. The value is the linear sum of the four neighboring values. It looks like this.
    </p>
    <div>
    <pre id="code_1">// pixel value with out of bounds checks
function pixel_in(pixels, i, j) {
    if(i &gt;= pixels.length)
        return pixel_in(pixels, pixels.length-1, j);
    if(i &lt; 0)
        return pixel_in(pixels, 0, j);
    if(j &gt;= pixels[0].length)
        return pixel_in(pixels, i, pixels[0].length-1);
    if(j &lt; 0)
        return pixel_in(pixels, i, 0);
    return pixels[i][j];
}

// linear interpolation
function value_in(pixels, x, y) {
    var j = Math.floor(x - 0.5);
    var tj = x - 0.5 - j;
    var i = Math.floor(y - 0.5);
    var ti = y - 0.5 - i;
    return pixel_in(pixels, i, j) * (1 - ti) * (1 - tj)
         + pixel_in(pixels, i, j+1) * (1 - ti) * (tj)
         + pixel_in(pixels, i+1, j+1) * (ti) * (tj)
         + pixel_in(pixels, i+1, j) * (ti) * (1 - tj);
}
    </pre>
    </div>
    <p>
If we darken the pixels where the interpolated value meets the threshold, we'll get some kind of a contour.
    </p>
    <canvas id="interpolation_canvas" width="640" height="640"></canvas>
    
    <p>
There are other methods. Plenty of them. But linear interpolation solves the cornery border problem just fine. Although, the border we see is just the borderline of some threshold. It's not a vector representation yet.
    </p>

    <h2>
Turning an interpolated image into a contour
    </h2>
    <p>
We can borrow an idea from the <a href="https://wordsandbuttons.online/the_simplest_possible_smooth_contouring_algorithm.html">simplest possible smooth contouring</a> algorithm. We'll build an initial border from the source pixels, and then we'll use our linearly interpolated image to find the best place to put each contour point so the image value will meet the threshold value.
    </p>
    <p>
When you have a <span id="index_distance_field">distance field</span>, it's easy. A distance field is when for any point in space you can tell how far it lies from the surface you want. It's basically a function from point in space to distance.
    </p>
    <p>
You take its gradient, take the difference between the value you have and the threshold value. Since it's the distance field, the value difference is exactly the distance you should move your point for. And the gradient is the exact opposite direction. You just inverse, multiply, add‚Ää‚Äî‚Ääand you're there.
    </p>
    <p>
Unfortunately, we don't have a distance field. We have a continuous image which only resembles one.
    </p>
    <p>
But the principle still works. If you traverse against the gradient, you will get closer to the threshold value. And the more the difference, the further you have to go. It's just you wouldn't always get there in one try.
    </p>
    <p>
So let's try several times then. Let's make an <a href="https://wordsandbuttons.online/interactive_introduction_to_iterative_algorithms.html">iterative algorithm</a> out of it.
    </p>
    <div>
    <pre id="code_2">// gradient
function gradient(pixels, x, y) {
    const eps = 1e-5;
    return [(value_in(pixels, x + eps, y) - value_in(pixels, x, y)) / eps,
            (value_in(pixels, x, y + eps) - value_in(pixels, x, y)) / eps];
}

// how far should you shift the point to meet the isoline
// if value_in were a distance function
function gradient_shift(pixels, threshold, x, y) {
    var g = gradient(pixels, x, y);
    var g_norm = Math.sqrt(g[0]*g[0] + g[1]*g[1]);
    var d = threshold - value_in(pixels, x, y);
    return [g[0] * d / g_norm / g_norm, g[1] * d / g_norm / g_norm];
}

// brings a point closer to the threshold isoline
function fit_point_better(pixels, threshold, point) {
    const ok_error = 1/255;
    if(Math.abs(value_in(pixels, point[0], point[1]) - threshold) &lt; ok_error)
        return point;
    gs = gradient_shift(pixels, threshold, point[0], point[1])
    var new_point = [point[0] + gs[0], point[1] + gs[1]];
    return fit_point_better(pixels, threshold, new_point);
}
    </pre>
    </div>
    <p>
We'll move our contour points against the gradient until we're close enough to the threshold
    </p>
    <canvas id="fitting_canvas" width="640" height="640"></canvas>
        
    <p>
That's good but we can do better. Let's make the contour smooth.
    </p>

    <h2>
Cubic splines
    </h2>
    <p>
All we have to do to make the contour smooth is to turn each line segment into a parametric cubic curve.
    </p>
    <p>
It's probably sounds more complicated than it is. A parametric cubic curve is just a pair of polynomials. If you have the points and partial derivatives in this points, you can get the coefficients for them from this pair of <a href="https://wordsandbuttons.online/programmers_introduction_to_linear_equations.html">linear systems</a>:
    </p>
    <div><p>
Px(t<sub>1</sub>)' = 3a<sub>x</sub>t<sub>1</sub><sup>2</sup> + 2b<sub>x</sub>t<sub>1</sub> + c = dx<sub>1</sub>/dt
<br>
Px(t<sub>1</sub>) = a<sub>x</sub>t<sub>1</sub><sup>3</sup> + b<sub>x</sub>t<sub>1</sub><sup>2</sup> + c<sub>x</sub>t<sub>1</sub> + d = x<sub>1</sub>
<br>
Px(t<sub>2</sub>) = a<sub>x</sub>t<sub>2</sub><sup>3</sup> + b<sub>x</sub>t<sub>2</sub><sup>2</sup> + c<sub>x</sub>t<sub>2</sub> + d = x<sub>2</sub>
<br>
Px(t<sub>2</sub>)' = 3a<sub>x</sub>t<sub>2</sub><sup>2</sup> + 2b<sub>x</sub>t<sub>2</sub> + c = dx<sub>2</sub>/dt
    </p><p>
    
Py(t<sub>1</sub>)' = 3a<sub>y</sub>t<sub>1</sub><sup>2</sup> + 2b<sub>y</sub>t<sub>1</sub> + c = dy<sub>1</sub>/dt
<br>
Py(t<sub>1</sub>) = a<sub>y</sub>t<sub>1</sub><sup>3</sup> + b<sub>y</sub>t<sub>1</sub><sup>2</sup> + c<sub>y</sub>t<sub>1</sub> + d = y<sub>1</sub>
<br>
Py(t<sub>2</sub>) = a<sub>y</sub>t<sub>2</sub><sup>3</sup> + b<sub>y</sub>t<sub>2</sub><sup>2</sup> + c<sub>y</sub>t<sub>2</sub> + d = y<sub>2</sub>
<br>
Py(t<sub>2</sub>)' = 3a<sub>y</sub>t<sub>2</sub><sup>2</sup> + 2b<sub>y</sub>t<sub>2</sub> + c = dy<sub>2</sub>/dt
    </p></div>
    <p>
The curve itself will then look like this.
    </p>
    <canvas id="cubic_canvas" width="640" height="640"></canvas>
    <p>
Even more, since we get to choose the parameter range, we can make it [0..1]. This greatly simplifies our system and makes it really easy to solve.
    </p>
    <p>
Here is the function that makes one array of polynomial coefficients from two pairs of point and tangent values.
    </p>
    <div>
    <pre id="code_3">// solver specific to [0..1] parametrized splines
function spline_for(p1, p1d, p2, p2d) {
//     A = [
//         [1, 0, 0, 0],
//         [0, 1, 0, 0],
//         [1, 1, 1, 1],
//         [0, 1, 2, 3]];
//     B = [p1, p1d, p2, p2d]
    return [
        p1,
        p1d,
        3*p2 - p2d - 3*p1 - 2*p1d,
        p2d + p1d - 2*p2 + 2*p1
    ];
}
    </pre>
    </div>
    <p>
The polynomial is then computed in every <i>t</i> with this function.
    </p>
    <div>
    <pre id="code_4">// polynomial
function polynomial_in_t(A, t){
    var pt = 0.0;
    for(var i = 0; i &lt; A.length; ++i){
        pt += A[i] * Math.pow(x, i);
    }
    return pt;
}
    </pre>
    </div>
    <p>
So for every line segment with tangents, we can make a parametric polynomial. There is one problem though. We don't have tangents.
    </p>
    <p>
We have the gradient, which is orthogonal to the tangent, but there are two possible tangents in every point. The tangent can be oriented left or right from the gradient.
    </p>
    <p>
But this is solvable. Let's just pick the direction we like and keep it consistent.
    </p>
    <p>
Let the curves that originally come from horizontally oriented segments always have both tangents that way that <i>dx &gt; 0</i>. And the ones that come from vertically oriented segments, will have <i>dy &gt; 0</i>.
    </p>
    <p>
It looks like we have enough parts to assemble an algorithm.
    </p>
    <h2>
Creating splines from the pixels
    </h2>
    <p>
Let's split our vectorization into two parts. First, we'll get points and tangents for every line segment from the pixels. Then we'll turn it all into polynomial splines.
    </p>
    <p>
The function that does the first part looks like this.
    </p>
    <div>
    <pre id="code_5">function turn_pixels_into_points_and_tangents(pixels, threshold) {
    var points = [];
    var tangents = [];

    // "horizontal" pieces
    for(var i = 0; i &lt;= pixels.length; i += 1) {
        var old_point = [];
        var old_tangent = [];
        for(var j = 0; j &lt;= pixels[0].length; j += 1) {
            // if right, left, top, and bottom pixels have a sign change,
            // there should be a spline there
            var sign_change_on_the_right  =
                (pixel_in(pixels, i-1, j+0) - threshold) *
                (pixel_in(pixels, i+0, j+0) - threshold) &lt; 0;
            var sign_change_on_the_left   =
                (pixel_in(pixels, i-1, j-1) - threshold) *
                (pixel_in(pixels, i+0, j-1) - threshold) &lt; 0;
            var sign_change_on_the_bottom =
                (pixel_in(pixels, i+0, j-1) - threshold) *
                (pixel_in(pixels, i+0, j+0) - threshold) &lt; 0;
            var sign_change_on_the_top    =
                (pixel_in(pixels, i-1, j-1) - threshold) *
                ‚Ä¶</pre></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://wordsandbuttons.online/simple_image_vectorization.html">https://wordsandbuttons.online/simple_image_vectorization.html</a></em></p>]]>
            </description>
            <link>https://wordsandbuttons.online/simple_image_vectorization.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957120</guid>
            <pubDate>Sun, 01 Nov 2020 03:57:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Talk to Yourself]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24957116">thread link</a>) | @lettergram
<br/>
October 31, 2020 | https://austingwalters.com/talk-to-yourself/ | <a href="https://web.archive.org/web/*/https://austingwalters.com/talk-to-yourself/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-3377">

<div>
<p>If you were born mid-90‚Äôs or earlier, you probably remember being bored. We used to talk to ourselves, play ‚Äúmake believe‚Äù, taking walks, listening to records, etc. We learned to entertain ourselves, imagine, and create.</p>
<p>Today, my children and children born into the age of the virtual world have not experienced boredom, at least not in the same way. In a sense, those who grew up in the 24-hour news cycle, with social media have never and will never experience being alone. They‚Äôve rarely experience the <a href="https://austingwalters.com/the-last-free-generation/" target="_blank" rel="noopener noreferrer">sense of freedom</a> that comes from thinking to oneself.</p>
<p>A personal concern, is that children‚Äôs personalities appear to develop in the absence of technology. They play with toys and make their world come to life. My two year old believes, with all his heart, that his toys are sentient. That our Roomba has feelings and needs to be ‚Äúfed‚Äù. He‚Äôs learning reason, learning to manipulate the world, talking to us, and so much more.</p>
<h2>Tools of Gods</h2>
<p>Throughout all human history technology has been an extension of ourselves. Part of childhood is learning to use and create tools. However, today we don‚Äôt need to build tools. With phones, we have near infinite information, entertainment, and communication at our finger tips, we can connect to anyone or anything ‚Äì instantly. Capture audio, video and picture with a tap. Search our memories with a voice command. Calculate any/all the math equations we can think of, etc. Our technology makes us ever more godlike.</p>
<p>To provide this godlike device to a child is irresponsible. Arguably, even in hands of adults, our devices do more harm than good.</p>
<p>The difference between adults and children, is that children need to <em>learn-to-learn</em>. It‚Äôs the most important thing a child can learn. How well a child <em>learns-to-learn </em>will shape their entire life, their potential is defined by how well they can learn. There are several important lessons in learning how to learn:</p>
<ul>
<li>Learning to self-reflect</li>
<li>Nurturing curiosity</li>
<li>Defining ones goals</li>
<li>Indexing knowledge</li>
<li>Finding motivation</li>
</ul>
<p>There is probably more than goes into learning-to-learn, but that‚Äôs a good list for now.</p>
<p>For me, a defining moment was learning to sculpt my character in an effort to find motivation. I spent quite a bit of time reflecting on who I was and who I wanted to be. I defined myself and found the motivation I needed, with constant self-reflection to change. Without my time riding bikes, running, playing in the woods, soccer, walking alone, I wouldn‚Äôt be who I am today.</p>
<h2>Empathy is Derived from Self</h2>
<p>Having a godlike tool able solve most problems is a double edge sward. A phone is addictive by design. Mobile phones track us and companies learn everything about us, with that information being weaponized against us to maximize ‚Äúscreen time‚Äù. Is social media useful? Quite frankly, I‚Äôd argue no, social media has a net negative effect. Importantly, social media and games on your mobile device keep you constantly stimulated and often push others agenda(s)[<a href="https://www.pnas.org/content/111/24/8788.full" target="_blank" rel="noopener noreferrer">1</a>].</p>
<p>I question if most of the newer generations, born into their environment, have really learned to live in the physical world. Has the newer generation(s) learned to live with and identify themselves? Is there self-reflection and growth? Without an internal dialog, a lot of things break down: personality, autonomy, comfort with being alone, understanding alternative viewpoints‚Ä¶ empathy.</p>
<p>Perhaps, [even more concerning] without an internal identity / dialog one doesn‚Äôt develop a ‚Äúclassic‚Äù ego. If a self-image is typically defined by an internal image and that internal image doesn‚Äôt develop, what guides us? Likes? Karma?</p>
<p>This would explain the rise in more extreme moral stances. Such as building a hierarchy based on gender, race, etc. Lack of empathy for others, at the same time garnering more karma, for karma is the value system people can hold themselves to. We no longer need to contemplate who we want to be, because we can receive instant feedback on our actions.</p>
<p>Unfortunately, I suspect this optimizes for short-term gain, but long-term loss to society.</p>
<p>We‚Äôve seen the start of the incredibly destructive cycle, where contemplating or a nuanced opinion is simply not acceptable, because others can‚Äôt relate.</p>
<center><iframe data-lazy-type="iframe" data-src="https://www.youtube.com/embed/2cMYfxOFBBM?start=314" width="560" height="315" frameborder="0" allowfullscreen="allowfullscreen"></iframe></center>
<h2>Who are you?</h2>
<blockquote><p>I am free, no matter what rules surround me. If I find them tolerable, I tolerate them; if I find them too obnoxious, I break them. I am free because I know that I alone am morally responsible for everything I do.</p>
<p>‚Äì Robert A. Heinlein</p></blockquote>
<p>I‚Äôm a firm believer that life is and should be tough. Growth comes from adaptation, confidence is derived from overcoming challenges. When life is tough, you have to create goals and blaze a trail to somewhere better. This is what it means to be ‚Äúfree‚Äù, free to have self-determination, which few embrace.</p>
<p>I wasn‚Äôt born to my current ‚Äúclass‚Äù. I would say, I was born ‚Äúbig-mac‚Äù rich, where you could buy a ‚Äúbig-mac‚Äù once a month without worrying about budget. My parents provided shelter, food and clothes, but I started mowing lawns at 12 and working a job by 14 to buy anything I needed beyond food and shelter. Yet today, (14 years &amp; a couple kids later), I‚Äôd call myself ‚ÄúiPhone‚Äù rich, I can buy something of equivalent cost monthly without worrying about it.</p>
<p>This doesn‚Äôt happen in a vacuum.</p>
<p>My wife and I regularly create two and five year plans. These goals provide motivation. We can ask ourselves,</p>
<blockquote><p>Does this activity help hit our five year objective?</p></blockquote>
<p>If the answer is no, then it‚Äôs probably not worth doing it. We work hard, we reflect regularly and we try to improve; always iterating towards something better.</p>
<p>To have self-determination, people need to think for themselves. They need to contemplate what they want from life. They need to talk to themselves. Self-determination requires goals, it also requires grappling (or ignoring) others and importantly saying ‚Äúno‚Äù and ‚Äúyes‚Äù based on <em>objectives</em> not <em>desires</em>. In the end, this will make people happier.</p>
<p>It all starts with talking to ones-self, spending time alone and deciding what <em>you</em> want.</p>
<h2>A Bleak Outlook</h2>
<p>Unfortunately, the god-like tools we‚Äôve all grown accustom to (especially, when given to kids), seem to disrupt the ability to talk to one-self. In a sense, our phones, media, and general virtual world has taken all our time; this leaves us without time for self-reflection, self-thought, self-actualization. In this stunted world, the AI which manipulates our news replaces the ego we once had.</p>
<p>Complex discussions, real empathy, motivation ‚Äî are going to be something most of us lose. I‚Äôm not sure if society is ready for what we created. It‚Äôs a mob of people who‚Äôve never experienced real hardship, who‚Äôve learned a social system designed by virtue signaling (aka trying to game the ‚Äúkarma‚Äù systems) and not really learning to live in the real world. Then again, these people will be shaping the real world, for better or worse.</p>

</div>

</article></div>]]>
            </description>
            <link>https://austingwalters.com/talk-to-yourself/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957116</guid>
            <pubDate>Sun, 01 Nov 2020 03:56:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Stanford paper on Covid-19 spread from large Trump rallies [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 10 | Comments 0 (<a href="https://news.ycombinator.com/item?id=24957094">thread link</a>) | @adamsea
<br/>
October 31, 2020 | https://sebotero.github.io/papers/COVIDrallies_10_30_2000.pdf | <a href="https://web.archive.org/web/*/https://sebotero.github.io/papers/COVIDrallies_10_30_2000.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://sebotero.github.io/papers/COVIDrallies_10_30_2000.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-24957094</guid>
            <pubDate>Sun, 01 Nov 2020 03:51:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Science of Blockchains]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24956642">thread link</a>) | @emrehan
<br/>
October 31, 2020 | https://hantuzun.com/posts/the-science-of-blockchains/ | <a href="https://web.archive.org/web/*/https://hantuzun.com/posts/the-science-of-blockchains/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content"><div><p>‚Å†<time>October 31, 2020</time></p><p><img src="https://hantuzun.com/static/cover.b5a07491de.jpg" alt="Cover"></p><p>I‚Äôm starting my blog with a blog series to celebrate the 12th anniversary of the Bitcoin white paper. üéÇ</p><p>I‚Äôll introduce an extensive technical foundation to comprehend Bitcoin, Ethereum, and the future of blockchains.</p><p>The series is based on selected fundamental papers.</p><hr><h2 id="why-i-start-this-series">Why I Start This Series?</h2><p>I like to have a comprehension of the primary sources when learning about a subject.</p><p>When I‚Äôve been teaching at <a href="https://twitter.com/blockchainokulu" target="_blank" rel="noreferrer noopener">@BlockchainOkulu</a>
, I structured my lessons around primary sources such as the Bitcoin white paper and the Ethereum yellow paper.</p><p>This way, my students learned not only what I know, but also what‚Äôs the source of the knowledge. Now that they‚Äôre graduated, they know where to look for when they have questions.</p><p>Even though the course was four weeks long for each batch I could not answer some excellent questions in detail. Instead, I had to resort to black boxes.</p><p>How do digital signatures work? A black box.</p><p>What about ZK-STARKs? Another black box.</p><p>Black boxes help to teach a subject. Not so much for understanding in detail.</p><p>To understand Bitcoin, Ethereum, and more on a deeper level, one should know the pillars they are built on.</p><p>You understand the strength of the Bitcoin network when you know how does SHA-256 work.</p><p>You understand how your contracts run once you know the inner-working of the EVM.</p><p>You understand the security of the protocols you invest in when you, well, know a lot.</p><p>Thus, as you understand these subjects, you will realize how important blockchain really is. You will probably want to contribute to these exciting projects.</p><p>The more you will know, the more you will be able to participate in the governance of blockchains.</p><p>What should be the block size?</p><p>What‚Äôre your opinions on various layer 2 protocols?</p><p>How can you help us approaching the open questions on scalability?</p><p>All you need to do is to join the conversations, as long as you know about the subject in depth.</p><p>I recently realized that the most technical issues are getting the least participation.</p><p>Then, I decided to create this blog series with the goal of having new voices on the future of blockchain governances.</p><p>New voices that understand the contemporary issues very well.</p><p>This is one of the best things I can do for crypto.</p><blockquote data-dnt="true"><p lang="en" dir="ltr">One bull market to learn the lesson. Second bull market to make retirement money. Third bull market to ask not what crypto can do for you but what you can do for crypto.</p>‚Äî Qiao Wang (@QwQiao) <a href="https://twitter.com/QwQiao/status/1299500501604667396?ref_src=twsrc%5Etfw">August 29, 2020</a></blockquote><h2 id="intended-audience">Intended Audience</h2><p>The series will demand the reader to be comfortable with computer science papers. In fact, the content will be the papers.</p><p>My job is to curate the papers, explain their contexts in the blockchain space, and clarify them with my reading notes.</p><p>Ultimately, the series will offer a fundamental understanding of blockchain technologies to eager readers, be it economics students or CS professors.</p><h2 id="the-papers">The Papers</h2><p>I‚Äôm proud to present you 67 primary sources on the science of blockchains. Wish me plenty of free time for covering some of them in this blog series!</p><h3 id="cryptography">Cryptography</h3><p><strong>Fundementals</strong></p><ul><li><p>Bloom, B. 1970. Space/Time Trade-offs in Hash Coding with Allowable Errors. <a href="http://crystal.uta.edu/~mcguigan/cse6350/papers/Bloom.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Rivest R. L., Shamir A., Adleman L. 1978. A Method for Obtaining Digital Signatures and Public-Key Cryptosystems. <a href="https://people.csail.mit.edu/rivest/Rsapaper.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Merkle, R. C. 1980. Protocols for public key cryptosystems. IEEE Symposium on Security and Privacy. <a href="http://www.merkle.com/papers/Protocols.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Penard W., van Werkhoven, T. 2001. On the Secure Hash Algorithm family. <a href="https://web.archive.org/web/20160330153520/http://www.staff.science.uu.nl/~werkh108/docs/study/Y5_07_08/infocry/project/Cryp08.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><p><strong>Elliptic-curve Cryptography</strong></p><ul><li><p>Koblitz, N. 1987. Elliptic curve cryptosystems. <a href="https://www.ams.org/journals/mcom/1987-48-177/S0025-5718-1987-0866109-5/S0025-5718-1987-0866109-5.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Miller, V. 1985. Use of elliptic curves in cryptography. <a href="https://link.springer.com/content/pdf/10.1007%2F3-540-39799-X_31.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Boneh, D., Lynn, B., Shacham, H. 2004. Short signatures from the Weil pairing. <a href="https://www.iacr.org/archive/asiacrypt2001/22480516.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>ANSI. 2005. Public Key Cryptography for the Financial Services Industry: The Elliptic Curve Digital Signature Algorithm (ECDSA). <a href="https://webstore.ansi.org/Standards/ASCX9/ANSIX91422020" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Bernstein D. J. 2006. Curve25519: new Diffie-Hellman speed records. <a href="https://cr.yp.to/ecdh/curve25519-20060209.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Brown D. R. L. 2010. SEC 2: Recommended Elliptic Curve Domain Parameters. <a href="https://www.secg.org/sec2-v2.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Kate, A. et al. 2010. Constant-Size Commitments to Polynomials and Their Applications. <a href="https://www.iacr.org/archive/asiacrypt2010/6477178/6477178.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Wang D. 2014. Secure Implementation of ECDSA Signatures in Bitcoin. <a href="http://www.nicolascourtois.com/bitcoin/thesis_Di_Wang.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Schnorr, C. 1990. Efficient identification and signatures for smart cards. <a href="https://link.springer.com/chapter/10.1007/0-387-34805-0_22" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><p><strong>Quantum Cryptography</strong></p><ul><li><p>Shor, P. W. 1996. Polynomial-Time Algorithms for Prime Factorization and Discrete Logarithms on a Quantum Computer. <a href="https://arxiv.org/pdf/quant-ph/9508027.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Aggarwal, D. et al. 2017. Quantum attacks on Bitcoin, and how to protect against them. <a href="https://arxiv.org/pdf/1710.10377.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><p><strong>Zero Knowledge</strong></p><ul><li><p>Goldreich O. 1991. Proofs that Yield Nothing But Their Validity All Languages in NP Have Zero-Knowledge Proof Systems. <a href="https://people.csail.mit.edu/silvio/Selected%20Scientific%20Papers/Zero%20Knowledge/Proofs_That_Yield_Nothing_But_Their_Validity_or_All_Languages_in_NP_Have_Zero-Knowledge_Proof_Systems.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Reitwiessner, C. 2016. zkSNARKs in a Nutshell. <a href="https://chriseth.github.io/notes/articles/zksnarks/zksnarks.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Bunz, B. et al. 2017. Bulletproofs: Short Proofs for Confidential Transactions and More. <a href="https://eprint.iacr.org/2017/1066.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Ben-Sasson, E. et al. 2018. Scalable, transparent, and post-quantum secure computational integrity. <a href="https://eprint.iacr.org/2018/046.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Gabizon, A. et al. 2020. PLONK: Permutations over Lagrange-bases for Oecumenical Noninteractive arguments of Knowledge. <a href="https://eprint.iacr.org/2019/953.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="distributed-computing-and-consensus">Distributed Computing and Consensus</h3><ul><li><p>Schneider F. B. 1990. Implementing Fault-Tolerant Services Using the State Machine Approach: A Tutorial. <a href="https://nakamotoinstitute.org/static/docs/implementing-fault-tolerant-services.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Lamport, L., et al. 1982. The Byzantine Generals Problem. ACM Transactions on Programming Languages and Systems 4(3): 382-401. <a href="https://dl.acm.org/citation.cfm?id=357176" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Castro, M., Liskov, B. 1999. Practical Byzantine fault tolerance. Proceedings of the Third Symposium on Operating Systems Design and Implementation. <a href="http://pmg.csail.mit.edu/papers/osdi99.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Lamport, L. 2001. Paxos made simple. <a href="http://lamport.azurewebsites.net/pubs/paxos-simple.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Szabo, N. 2003. Advances in Distributed Security. <a href="https://nakamotoinstitute.org/advances-in-distributed-security/" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Aspnes, J., et al. 2005. Exposing computationally challenged Byzantine imposters. Yale University Department of Computer Science. <a href="http://cs.yale.edu/publications/techreports/tr1332.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Stutzbach, D., Rejaie, R. 2006. Understanding Churn in Peer-to-Peer Networks; <a href="http://www.barsoom.org/papers/imc-2006-churn.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Berman, P., Juan A. 1993. Cloture Votes: n/4-resilient Distributed Consensus in t + 1 rounds. <a href="https://link.springer.com/article/10.1007%2FBF01187072" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="timestamping">Timestamping</h3><ul><li><p>Haber, S., Stornetta, W. S. 1997. Secure names for bit-strings. <a href="http://dl.acm.org/citation.cfm?id=266430" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Massias, H., Avila X. S., Quisquater, J.-J. 1999. Design of a secure timestamping service with minimal trust requirements. <a href="https://nakamotoinstitute.org/static/docs/secure-timestamping-service.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Just, M. 1998. Some timestamping protocol failures. <a href="https://www.ndss-symposium.org/wp-content/uploads/2017/09/Some-Timestamping-Protocol-Failures_0.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Bonnecaze, A. et al. 2002. Improving Time Stamping Schemes: A Distributed Point of View. <a href="http://pages.upf.pf/Alban.Gabillon/articles/AnnalTelecom.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="digital-money">Digital Money</h3><ul><li><p>Chaum, D., et al. 1988. Untraceable electronic cash. Advances in Cryptology: 319-327. <a href="https://dl.acm.org/citation.cfm?id=88969" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Dai, W. 1998. <a href="http://www.weidai.com/bmoney.txt" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Szabo, N. 2008. Bit gold. <a href="https://unenumerated.blogspot.com/2005/12/bit-gold.html" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="proof-of-work">Proof of Work</h3><ul><li><p>Back, A. 2002. Hashcash‚Äîa denial of service counter measure. <a href="http://www.hashcash.org/papers/hashcash.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Douceur, J. R. 2002. The Sybil attack. <a href="https://dl.acm.org/citation.cfm?id=687813" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Szabo, N. 1999. Intrapolynomial Cryptography. <a href="https://nakamotoinstitute.org/intrapolynomial-cryptography/" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="bitcoin">Bitcoin</h3><ul><li><p>Nakamoto, S. 2008. Bitcoin: a peer-to-peer electronic cash system. <a href="https://bitcoin.org/bitcoin.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Wuille, P. 2012. BIP 32: Hierarchical Deterministic Wallets. <a href="https://en.bitcoin.it/wiki/BIP_0032" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Rosenfeld M. 2012. Overview of Colored Coins. <a href="https://bitcoil.co.il/BitcoinX.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Biryukov, A. et al. 2014 Deanonymisation of clients in Bitcoin P2P network. <a href="https://arxiv.org/pdf/1405.7418.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Poon, J., Dryja, T. 2016. The Bitcoin Lightning Network: Scalable Off-Chain Instant Payments. <a href="https://lightning.network/lightning-network-paper.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Pass, R., et al. 2017. Analysis of the blockchain protocol in asynchronous networks. <a href="https://link.springer.com/chapter/10.1007/978-3-319-56614-6_22" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="smart-contracts">Smart Contracts</h3><ul><li><p>Turing, A. M. 1937. On Computable Numbers, with an Application to the Entscheidungsproblem. <a href="https://londmathsoc.onlinelibrary.wiley.com/doi/abs/10.1112/plms/s2-42.1.230" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Szabo, N. 1994. Smart contracts. <a href="http://www.fon.hum.uva.nl/rob/Courses/InformationInSpeech/CDROM/Literature/LOTwinterschool2006/szabo.best.vwh.net/smart.contracts.html" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Bhargavan, K. et al. 2016. Short Paper: Formal Verification of Smart Contracts. <a href="https://www.cs.umd.edu/~aseem/solidetherplas.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="proof-of-stake">Proof of Stake</h3><ul><li><p>Poelstra, A. 2015. On Stake and Consensus. <a href="https://download.wpsoftware.net/bitcoin/pos.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Bentov, I. 2017. Cryptocurrencies without Proof of Work. <a href="https://arxiv.org/pdf/1406.5694.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="ethereum">Ethereum</h3><ul><li><p>Sompolinsky, Y., Zohar, A. 2013. Secure High-Rate Transaction Processing in Bitcoin. <a href="https://web.archive.org/web/20150402122229/https://eprint.iacr.org/2013/881.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Eth Wiki. Modified Merkle Patricia Trie Specification. <a href="https://eth.wiki/fundamentals/patricia-tree" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Buterin, V. 2013. Ethereum White Paper: A Next Generation Smart Contract &amp; Decentralized Application Platform. <a href="https://ethereum.org/en/whitepaper/" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Dameron, M. 2019. Beigepaper: An Ethereum Technical Specification. <a href="https://github.com/chronaeon/beigepaper/blob/master/beigepaper.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Wood, G. 2020. Ethereum: A Secure Decentralised Generalised Transaction Ledger. <a href="https://ethereum.github.io/yellowpaper/paper.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Solidity Documentation. <a href="https://buildmedia.readthedocs.org/media/pdf/solidity/develop/solidity.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="scaling">Scaling</h3><ul><li><p>Croman, K. et al. 2016. On Scaling Decentralized Blockchains. <a href="https://www.comp.nus.edu.sg/~prateeks/papers/Bitcoin-scaling.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Kalonde, H. et al. 2018. Arbitrum: Scalable, private smart contracts. <a href="https://www.usenix.org/system/files/conference/usenixsecurity18/sec18-kalodner.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Dang H. et al. 2019. Towards Scaling Blockchain Systems via Sharding. <a href="https://arxiv.org/pdf/1804.00399.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Buterin, V. Serenity Design Rationale. <a href="https://notes.ethereum.org/s/rkhCgQteN" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Buterin, V. et al. 2020. Combining GHOST and Casper. <a href="https://arxiv.org/pdf/2003.03052.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Adler, J., Quintyne-Collins, M. 2020. Building Scalable Decentralized Payment Systems. <a href="https://arxiv.org/pdf/1904.06441.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h3 id="other-blockchains">Other Blockchains</h3><ul><li><p>Namecoin. 2011. Merged mining. <a href="https://en.bitcoin.it/wiki/Merged_mining_specification" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Van Saberhagen, N. 2013. CryptoNote v 2.0 (Annotated by the Monero Team). <a href="https://web.getmonero.org/resources/research-lab/pubs/whitepaper_annotated.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Ben-Sasson, E. et al. 2014. Zerocash: Decentralized Anonymous Payments from Bitcoin. <a href="http://zerocash-project.org/media/pdf/zerocash-extended-20140518.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Poelstra, A. 2016. Mimblewimble. <a href="https://download.wpsoftware.net/bitcoin/wizardry/mimblewimble.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Team Rocket et al. 2019. Scalable and Probabilistic Leaderless BFT Consensus through Metastability. <a href="https://arxiv.org/pdf/1906.08936v1.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li><li><p>Bonneau, J. et al. 2020. Mina: Decentralized Cryptocurrency at Scale. <a href="https://minaprotocol.com/static/pdf/technicalWhitepaper.pdf" target="_blank" rel="noreferrer noopener">üìÉ</a></p></li></ul><h2 id="priority-requests">Priority Requests!</h2><p>Let me know which papers would you like to read first in Twitter. Please reply to this thread:</p><blockquote data-dnt="true"><div lang="en" dir="ltr"><p>1/14</p><p>üî≠ ùóßùóµùó≤ ùó¶ùó∞ùó∂ùó≤ùóªùó∞ùó≤ ùóºùó≥ ùóïùóπùóºùó∞ùó∏ùó∞ùóµùóÆùó∂ùóªùòÄ</p><p>I'm starting my blog with a blog series to celebrate the 12th anniversary of the Bitcoin white paper. üéÇ<a href="https://t.co/Bsc5R0FDqX">https://t.co/Bsc5R0FDqX</a></p></div>‚Äî Han Tuzun (@hantuzn) <a href="https://twitter.com/hantuzn/status/1322710239653875712?ref_src=twsrc%5Etfw">November 1, 2020</a></blockquote></div></div></div>]]>
            </description>
            <link>https://hantuzun.com/posts/the-science-of-blockchains/</link>
            <guid isPermaLink="false">hacker-news-small-sites-24956642</guid>
            <pubDate>Sun, 01 Nov 2020 01:40:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Google Sheets as a Database Service for Web Applications]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 3 (<a href="https://news.ycombinator.com/item?id=24956638">thread link</a>) | @hieunc229
<br/>
October 31, 2020 | https://hieunc.com/posts/vm3TjRrE73Y-google-sheets-as-a-database-service-for-web-applications | <a href="https://web.archive.org/web/*/https://hieunc.com/posts/vm3TjRrE73Y-google-sheets-as-a-database-service-for-web-applications">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-id="str-vOKpYe5nW" data-connect-field="content"><p>Spreadsheet services like Google Sheets or Airtable have already used by many people, teams, and companies. What makes them more interesting is, they introduce non-tech users to the no-code movement, open doors for interesting possibilities.</p><p>No-code is like Starbuck, a kind of coffee also for people who don‚Äôt drink coffee. What great about Starbuck isn‚Äôt the taste, but it allows more people to enjoy coffee. In other words, <strong>no-code is a programming language for non-programmers</strong>.</p><p>Recently, I‚Äôve examined using Google Sheet as a database service when integrating to <a href="https://medium.com/r/?url=https%3A%2F%2Finverr.com">Inverr</a> ‚Äî‚Ääa no-code builder. It can possibly operate for sites or apps with less than 5M visits/month, with big enough data storage for small apps. Though, it comes with some limitations.</p><p>In this post, I‚Äôll address a few technical issues when using Google Sheets as a database service, its effects, and how to overcome it.</p><h3 id="1-search-is-inconvenient">1. Search is Inconvenient</h3><p>The main functions of the database are store, retrieve, and search for data. While Google Sheets is doing excellent at storing and retrieving data, the searching part in Google Sheets is a bit tricky.</p><p>On many apps, search provides discoverability. For example, when you‚Äôre building a movie discovery app, users search a movie by name, filter by a category, or popularity. Without search, the movie app is no different than a movie list.</p><p>To use the searching feature, Google Sheets APIs provide a property called ‚ÄúdeveloperMetadata‚Äù. It‚Äôs an additional data on each cell, and invisible to Google Sheets users. When searching, it will use these additional data.</p><p>‚ÄúdeveloperMetadata‚Äù has a <a href="https://medium.com/r/?url=https%3A%2F%2Fdevelopers.google.com%2Fsheets%2Fapi%2Fguides%2Fmetadata%23metadata_storage_limits">limit</a> of 30,000 characters for each spreadsheet. It‚Äôs too small to do anything great. Though, you can optimize for sentence, paragraph by only store important terms.</p><h3 id="2-quota-and-storagenbsplimits">2. Quota and Storage&nbsp;Limits</h3><p>Google Sheets has a storage limit at 5,000,000 cells (including blank ones), and up to 256 columns per sheet.</p><p>Let‚Äôs take an example as a movie discovery app, it needs at least 6 properties (id, title, description, release date, rating, category). As a rough estimation, you can only store up to 5,000,000 / 6 = <strong>~833k movies</strong>. Since there are currently <a href="https://medium.com/r/?url=https%3A%2F%2Fwww.imdb.com%2Fpressroom%2Fstats%2F">555,913 movies</a> released, in theory, it‚Äôs still acceptable.</p><p>Another limitation when using Google Sheet APIs is its request quota. Starting at 500 requests per 100 seconds (or 5 requests per second), and start charging when excessed. In many cases, using proper caching techniques will reduce the number of requests to Google Cloud APIs services.</p><h3 id="3-acceptable-performance-on-a-largenbspdataset">3. Acceptable Performance on a Large&nbsp;Dataset</h3><p><img src="https://cdn-images-1.medium.com/max/800/1*HrJxokwIWMsvLqb_4KFB6Q.png" alt=""></p><p><em>Query Performance Google&nbsp;Sheets</em></p><p>This is an unrealistic measure, but to test the limit and get a better overview, I tried getting data from a spreadsheet with a large dataset.</p><p>The above graph demonstrates the performance of retrieving thousands of cells per second from Google Sheets. It took around 2 seconds when getting 100k cells all at once, which 100k / 6 = ~16k movies. This is acceptable performance, and grows as the number of cells grows.</p><h3 id="4-no-schema-and-proper-restriction">4. No Schema and Proper Restriction</h3><p>Google Sheets is like a database with its own presentation. For example, you have a spreadsheet for monthly expenses. It contains a list of expenses, their category. And in the end, it can have a <strong>total expense value</strong> by the sum of all expenses in the month.</p><p>The layout freedom is convenient when using it as a spreadsheet, but a nightmare for a database. Because there is always some kind of fixed layout that the database follows. It allows the database engine to calculate the distance and navigate between rows of data. And no database designed without a layout.</p><p>Besides, unless you decided that no-one will ever touch the spreadsheet, someone might accidentally screw it up by renaming the tab or remove it.</p><hr><p>To conclude, Google Sheets is widely used as a tool. But as a database, it comes with some limitations. With proper caching and optimization, it is safe to use it as a database for webs/apps with &lt; 5.000.000 visits monthly.</p><p>Besides, its search limitation can be a huge bottleneck in many scenarios. You can use ‚ÄúdeveloperMetadata‚Äù to enable data lookup. With 30k characters limits, it‚Äôs a good practice to store only ‚Äúmeta‚Äù data.</p><p><a href="https://medium.com/r/?url=https%3A%2F%2Finverr.com">Try to build a website with Google Sheet, or your own database ‚Üí</a></p></div></div>]]>
            </description>
            <link>https://hieunc.com/posts/vm3TjRrE73Y-google-sheets-as-a-database-service-for-web-applications</link>
            <guid isPermaLink="false">hacker-news-small-sites-24956638</guid>
            <pubDate>Sun, 01 Nov 2020 01:39:38 GMT</pubDate>
        </item>
    </channel>
</rss>
