<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 5]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 5. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Sat, 27 Jun 2020 12:16:31 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-5.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Sat, 27 Jun 2020 12:16:31 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[Big Sur on Unsupported Macs]]>
            </title>
            <description>
<![CDATA[
Score 18 | Comments 3 (<a href="https://news.ycombinator.com/item?id=23650031">thread link</a>) | @todsacerdoti
<br/>
June 26, 2020 | https://parrotgeek.com/bigsur/ | <a href="https://web.archive.org/web/*/https://parrotgeek.com/bigsur/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p><span face="Helvetica, Arial, sans-serif"><b><u>Compatibility
            status</u></b> <br>
        Note: these instructions only support computers<b> </b>that
        have a Metal-capable GPU <i>and</i> native APFS boot support.<br>
      </span></p><div>
      <tbody>
        <tr>
          <td><span face="Helvetica,
              Arial, sans-serif"><b>Model Identifier</b><br>
            </span></td>
          <td><span face="Helvetica,
              Arial, sans-serif"><b>Human-Readable Name</b><br>
            </span></td>
          <td><span face="Helvetica,
              Arial, sans-serif"><b>Status</b><br>
            </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacBookAir5,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">MacBook








              Air (11-inch, Mid 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacBookAir5,2<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">MacBook








              Air (13-inch, Mid 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacBookPro9,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">MacBook








              Pro (15-inch, Mid 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacBookPro9,2<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">MacBook








              Pro (13-inch, Mid 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacBookPro10,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">MacBook








              Pro (Retina, 15-inch, Mid 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacBookPro10,2<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">MacBook








              Pro (Retina, 13-inch, Early 2013)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">Macmini6,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">Mac
              mini (Late 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">Everything








              except Wi-Fi works<br>
            </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">Macmini6,2<br>
            </span></td>
          <td>
            <meta charset="utf-8">
            <span face="Helvetica, Arial, sans-serif">Mac mini (Late
              2012) quad-core<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">iMac13,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">iMac








              (21.5-inch, Late 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">iMac13,2<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">iMac








              (27-inch, Late 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif"><span face="Helvetica, Arial, sans-serif">Everything except
                Wi-Fi works</span> </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">iMac14,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">iMac








              (21.5-inch, Late 2013) integrated GPU<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">Everything





              works<br>
            </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">iMac14,2<br>
            </span></td>
          <td>
            <meta charset="utf-8">
            <span face="Helvetica, Arial, sans-serif">iMac (27-inch,
              Late 2013)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">Everything





              works<br>
            </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">iMac14,3<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">iMac








              (21.5-inch, Late 2013) discrete GPU</span><br>
          </td>
          <td><span face="Helvetica, Arial, sans-serif">Everything





              works<br>
            </span></td>
        </tr>
        <tr>
          <td><span face="Helvetica, Arial, sans-serif">MacPro5,1<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">Mac
              Pro (Mid 2010/Mid 2012)<br>
            </span></td>
          <td><span face="Helvetica, Arial, sans-serif">WiFi

              does not work; sleep issues<br>
            </span></td>
        </tr>
      </tbody>
    </div></div>]]>
            </description>
            <link>https://parrotgeek.com/bigsur/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23650031</guid>
            <pubDate>Fri, 26 Jun 2020 08:56:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[3K, 60fps, 130ms: achieving it with Rust]]>
            </title>
            <description>
<![CDATA[
Score 32 | Comments 22 (<a href="https://news.ycombinator.com/item?id=23649534">thread link</a>) | @lukastyrychtr
<br/>
June 26, 2020 | https://blog.tonari.no/why-we-love-rust?ref=twtr | <a href="https://web.archive.org/web/*/https://blog.tonari.no/why-we-love-rust?ref=twtr">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>How we chose the Rust programming language to advance the state-of-the-art in real-time communication</p><div><p><i>T</i><m><i>his post was written collectively with Ryo Kawaguchi, </i></m><m><m><i>Andrea Law, Brian Schwind</i></m></m><m><i>.</i></m></p><p><m>Our goal for tonari is to build a virtual doorway to another space that allows for truly natural human interactions. Nearly two years in development, tonari is, to the best of our knowledge, the lowest-latency high resolution production-ready "teleconferencing" (we are truly not fond of that word) product available. </m></p><ul><li><b>130ms</b> glass-to-glass latency (the time from light hitting the camera to when it appears on-screen on the other side)</li><li><b>3K, 60fps</b> video transmission</li><li>High-bitrate 48kHz stereo audio</li></ul><p>Compare this to the typical <b>315-500ms</b> latency for Zoom and <m>WebRTC</m>, as measured between two laptops (X1 Carbon and MacBook Pro) on the same network at our office. It's a huge difference. It's the difference between constantly interrupting each other versus having a natural flow of conversation. It's the difference between a blurry face from a camera seemingly pointed up someone's nose versus a wide-view high fidelity image that smoothly transfers all the subtle body language of an in-person conversation.</p><div><picture><source srcset="https://blog.tonari.no/images/ea56c74d-a55d-4183-9a7b-d697954c5159-tonari-frontier-2.png.optimized.webp" type="image/webp"><source srcset="https://blog.tonari.no/images/ea56c74d-a55d-4183-9a7b-d697954c5159-tonari-frontier-2.png.optimized.jpg"><img src="https://blog.tonari.no/images/ea56c74d-a55d-4183-9a7b-d697954c5159-tonari-frontier-2.png.optimized.jpg"></picture></div><p>Since launching <a href="https://blog.tonari.no/changing-communication-and-culture-in-an-organization" rel="noopener" target="_blank">our first pilot</a> in February, we've experienced no software-related downtime (tripping over ethernet cables is a different story). A<m>nd as much as we would love to think we're infallible engineers, we truly don't believe we could have achieved these numbers with this level of stability without Rust.</m></p><a href="#in-the-beginning-(or-why-we're-not-webrtc)" id="in-the-beginning-(or-why-we're-not-webrtc)"><h2>In the beginning (or: why we're not WebRTC)</h2></a><p>The <m>very</m> first tonari proof-of-concept used a basic projector, bluetooth speakers, and a website running on top of vanilla WebRTC (JavaScript). We've come a long way since those days.</p><p>While that prototype (and our opinionated vision of the future) got us grant funding, we knew that tonari would be dead on arrival unless we could<m> achieve </m><i>significantly</i> lower latency and higher fidelity than <m>WebRTC</m>—two things that aren't currently associated with video chat in 2020.</p><p>We figured, “Okay<i>, so we can just </i><m><i>modify</i></m><i> WebRTC directly and wrap it up with a slick UI in C++ and launch it in no time</i>.”</p><p>A week of struggling with WebRTC’s nearly 750,000 LoC <i>behemoth</i> of a codebase revealed just how painful a single small change could be — how hard it was to test, and feel truly <i>safe,</i> with the code you were dealing with.</p><a href="#let-there-be-light...weight-code" id="let-there-be-light...weight-code"><h3>Let there be light...weight code</h3></a><p>So in a furious (read: calm and thoroughly-discussed) rage quit we decided it was easier to re-implement the whole stack from scratch. We wanted to <i>know and understand every line of code</i> being run on our hardware, and it should be designed for the <i>exact</i> hardware we wanted.</p><p>Thus began our journey to the depths beyond high-level interfaces like a browser or existing RTC project, and into the world of low-level systems and hardware interaction from scratch.</p><p>We needed it to <m>be inherently </m><b><m><i>secure</i></m></b><m> to </m>protect the privacy of those who use tonari.  We needed it to be <b><i>performant</i></b> to make it feel as human and real-time as possible.  And we needed it to be <b><i>maintainable</i></b> as the code becomes more mature, as new brains show up and have to learn our work and expand on it.</p><p><m>We discussed and ruled out a handful of alternative approaches:</m></p><ul><li><b><i>Security: </i></b>C and C++ are memory- and concurrency-unsafe, and their disparate and seemingly infinite build systems make it hard to have a consistent and simple development experience.</li><li><i><b>Performance: </b></i>Java, <m>C#, and Go'</m>s memory management is opaque and can be difficult to work with in latency-sensitive applications where you want full control over your memory.</li><li><i><b>Maintainability: </b></i>Haskell, Nim, D, and a handful of other more bespoke languages tend to be more limited in tooling, community, and hire-ability.</li></ul><p>Rust is really the only production-ready language that we found confidently satisfies these needs.</p><a href="#finding-beauty-in-rust" id="finding-beauty-in-rust"><h2>Finding beauty in Rust</h2></a><p>Rust's beauty lies in the countless decisions made by the development community that constantly make you feel like you <m>can have</m> ten cakes and eat all of them too.</p><ul><li>Its build system is opinionated, and cleanly designed. It is itself a complete ecosystem that makes introducing new engineers to your project and setting up dev environments remarkably simple.</li><li>The memory and concurrency safety guarantees cannot be over-appreciated. We're confident that we wouldn't have done our first deployment yet if we had continued this in C++ - we'd still probably be stuck on subtle snags.</li><li>Our ability to interact at the lowest level with hardware via APIs like CUDA, oftentimes through existing <a href="https://crates.io/" rel="noopener" target="_blank"><m>crates</m></a> (Rust's term for a code library), has allowed us to have higher standards about the latency we want from our first production release.</li></ul><p>As tonari is getting more advanced, we're now choosing embedded microcontrollers whose firmware can be written in Rust so we don't have to leave our idyllic utopia into the old world of unsafe system programming.</p><a href="#crates-we-rely-on" id="crates-we-rely-on"><h2>Crates we rely on</h2></a><p>We're not going to <code>cat Cargo.toml</code> here, instead focusing on some select crates that have earned the prestigious award of a lifetime invitation to each of our birthday parties forever.</p><a href="#&quot;better-than-std&quot;-crates" id="&quot;better-than-std&quot;-crates"><h3>"Better-than-std" crates</h3></a><ul><li><a href="https://github.com/crossbeam-rs/crossbeam" rel="noopener" target="_blank"><code>crossbeam</code></a> is better for inter-thread communication than <code>std::sync::mpsc</code> in almost every way, and may be merged into <code>std</code> eventually.</li><li><a href="https://github.com/Amanieu/parking_lot" rel="noopener" target="_blank"><code>parking_lot</code></a> has a mutex implementation better than <code>std::sync::Mutex</code> in almost every way, and may be merged into the standard library (one day). It also provides many other useful synchronization primitives.</li><li><a href="https://github.com/tokio-rs/bytes" rel="noopener" target="_blank"><code>bytes</code></a> is a more robust, and often more performant, way to play with bytes compared to <code>Vec&lt;u8&gt;</code>.</li><li><a href="https://github.com/alexcrichton/socket2-rs" rel="noopener" target="_blank"><code>socket2</code></a> is what you will end up at if you are ever doing lower-level networking optimizations.</li></ul><a href="#beauty-supply" id="beauty-supply"><h3>Beauty supply</h3></a><ul><li><a href="https://github.com/daboross/fern" rel="noopener" target="_blank"><code>fern</code></a> is a dead-simple way to customize and prettify your logging output. We use it to keep our logs readable and internally standardized.</li><li><a href="https://github.com/TeXitoi/structopt" rel="noopener" target="_blank"><code>structopt</code></a> is how you always dreamed CLI arguments would be handled. There's no reason not to use it unless you're going for bare-minimum dependencies.</li></ul><a href="#cargo-cult-classics" id="cargo-cult-classics"><h3>Cargo cult classics</h3></a><ul><li><a href="https://github.com/sunng87/cargo-release" rel="noopener" target="_blank"><code>cargo-release</code></a> allows us to cut internal releases painlessly.</li><li><a href="https://github.com/est31/cargo-udeps" rel="noopener" target="_blank"><code>cargo-udeps</code></a> identifies unused dependencies and allows us to keep our build times minimal.</li><li><code>cargo tree</code> (recently integrated in cargo) shows a dependency tree that's useful in many ways, but <m>mainly</m> in identifying ways to minimize dependencies.</li><li><a href="https://github.com/rust-secure-code/cargo-geiger" rel="noopener" target="_blank"><code>cargo-geiger</code></a> helps us quickly evaluate external dependencies for possible security (or correctness) concerns.</li><li><a href="https://github.com/flamegraph-rs/flamegraph" rel="noopener" target="_blank"><code>cargo-flamegraph</code></a> helps us enormously when tracking down performance hot-spots in our code.</li></ul><a href="#project-structure" id="project-structure"><h2>Project structure</h2></a><p>The tonari codebase is a monorepo. At its root we have a Cargo workspace with a <code>binaries</code> crate, and a number of supporting library crates.</p><p>Having our crates in one repo makes them easy to reference in our <code>binaries</code> crate without needing to publish to <a href="https://crates.io/" rel="noopener" target="_blank">crates.io</a> or get too fancy with specifying git dependencies in our <code>Cargo.toml</code>. When the time comes to publish these libraries as open source, it's trivial to break it out into its own repo.</p><a href="#library,-binary,-why-not-both" id="library,-binary,-why-not-both"><h3>Library, binary, why not both?</h3></a><p>We have one main library crate that contains a unified API for talking to hardware, media codecs, network protocols, etc. Outside of that private API, we also have standalone crates in our workspace that we consider candidates for open-sourcing. For example, we’ve written our own actor framework fit for long-running high-throughput actors, as well as our own network protocol for reliable, high-bandwidth, low-latency media streaming.

We use separate binaries for different parts of the tonari system and each of these lives in <code>binaries</code>, a combination library/binary crate. Its library modules contains a set of reusable actors that combine our private API with our actor system, and then a collection of individual binaries that consume these actors and define the plumbing between them.</p><a href="#flags-as-far-as-the-eye-can-see" id="flags-as-far-as-the-eye-can-see"><h3>Flags as far as the eye can see</h3></a><p>We make extensive use of feature flags to allow development of our project on different OSes (like Brian's 1970s-era MacBook Pro) or different hardware configurations. This allows us to easily swap out camera hardware without extra runtime checks or using awful <code>sed</code> hacks.

For example, Linux uses <code>v4l2</code> (Video For Linux...2) to access most webcams, but other webcams might have their own SDK.  To compile for platforms that don't use <code>v4l2</code> or when an SDK isn't available for a particular OS, we can put those SDKs behind feature flags and export a common interface.

As a (simplified) concrete example, let's say we have a common camera interface defined as a trait:</p><pre><code><span>pub</span> <span>trait</span> Capture <span>{</span>
    
    <span>fn</span> <span>capture</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>)</span> <span>-&gt;</span> Vec<span>&lt;</span>u8<span>&gt;</span><span>;</span>
<span>}</span></code></pre><p>Let's also say we have three different camera interfaces - <code>v4l2</code>, <code>corevideo</code>, and <code>polaroid.</code> We can make our binaries work exclusively with this trait to be flexible, and we can swap in different implementations of <code>Capture</code> with feature flags.</p><pre><code><span>#[cfg(feature = "v4l2")]</span>
<span>mod</span> v4l2 <span>{</span>
    <span>pub</span> <span>struct</span> V4l2Capture <span>{</span>
        <span>...</span>
    <span>}</span>

    <span>impl</span> Capture <span>for</span> V4l2Capture <span>{</span>
        <span>fn</span> <span>capture</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>)</span> <span>-&gt;</span> Vec<span>&lt;</span>u8<span>&gt;</span> <span>{</span>
            <span>...</span>
        <span>}</span>
    <span>}</span>
<span>}</span>

<span>#[cfg(feature = "corevideo")]</span>
<span>mod</span> corevideo <span>{</span>
    <span>pub</span> <span>struct</span> CoreVideoCapture <span>{</span>
        <span>...</span>
    <span>}</span>

    <span>impl</span> Capture <span>for</span> CoreVideoCapture <span>{</span>
        <span>fn</span> <span>capture</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>)</span> <span>-&gt;</span> Vec<span>&lt;</span>u8<span>&gt;</span> <span>{</span>
            <span>...</span>
        <span>}</span>
    <span>}</span>
<span>}</span>

<span>#[cfg(feature = "polaroid")]</span>
<span>mod</span> polaroid <span>{</span>
    <span>pub</span> <span>struct</span> PolaroidCapture <span>{</span>
        <span>...</span>
    <span>}</span>

    <span>impl</span> Capture <span>for</span> PolaroidCapture <span>{</span>
        <span>fn</span> <span>capture</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>)</span> <span>-&gt;</span> Vec<span>&lt;</span>u8<span>&gt;</span> <span>{</span>
            <span>...</span>
        <span>}</span>
    <span>}</span>
<span>}</span>

<span>#[cfg(feature = "v4l2")]</span>
<span>pub</span> <span>type</span> VideoCapture <span>=</span> v4l2<span>::</span>V4l2Capture<span>;</span>

<span>#[cfg(feature = "corevideo")]</span>
<span>pub</span> <span>type</span> VideoCapture <span>=</span> corevideo<span>::</span>CoreVideoCapture<span>;</span>

<span>#[cfg(feature = "polaroid")]</span>
<span>pub</span> <span>type</span> VideoCapture <span>=</span> polaroid<span>::</span>PolaroidCapture<span>;</span></code></pre><p>If we make our code work with things which implement the <code>Capture</code> trait instead of concrete types, we can now compile on and target various platforms by simply toggling feature flags. For example, we can have a struct which has a field - <code>video_capture: Box&lt;dyn Capture&gt;</code> which will let us store any type which can <code>Capture</code> from a camera.

An example <code>Cargo.toml</code> file to support the capture implementations we wrote above might look something like …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.tonari.no/why-we-love-rust?ref=twtr">https://blog.tonari.no/why-we-love-rust?ref=twtr</a></em></p>]]>
            </description>
            <link>https://blog.tonari.no/why-we-love-rust?ref=twtr</link>
            <guid isPermaLink="false">hacker-news-small-sites-23649534</guid>
            <pubDate>Fri, 26 Jun 2020 07:12:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The War on Upstart Fiber Internet Providers]]>
            </title>
            <description>
<![CDATA[
Score 23 | Comments 1 (<a href="https://news.ycombinator.com/item?id=23647609">thread link</a>) | @joecool1029
<br/>
June 25, 2020 | http://chrishacken.com/the-war-on-upstart-fiber-optic-internet-providers/ | <a href="https://web.archive.org/web/*/http://chrishacken.com/the-war-on-upstart-fiber-optic-internet-providers/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>                                
                                    <div> 
                                        <p>As someone who grew up throughout the 90's and 00's, some of my fondest memories stem from progressive advancements in internet and computing technologies.  Upgrading from Dial-Up internet to DSL was a grand event in our house.  I remember my brother and I fighting over the computer day in and day out to play games like Wolfenstein - Enemy Territory, which was released in 2003. (I'm convinced that this will be the all-time best FPS game ever created.)  At around the same time, we upgraded to one of the best Dell computer's available at the time. It had 512MB of RAM and a Pentium 4 processor.  This was a major upgrade from our Compaq Celeron, which had something like 64MB of RAM. <br>
<img src="http://chrishacken.com/content/images/2020/03/MV5BOGFmNjMzZTktNDg2ZS00ZjllLTlkMTAtZTAzMzBkN2UyMzk2XkEyXkFqcGdeQXVyMjU3MzI1NzI@._V1_.jpg" alt="Wolfenstein - Enemy Territory"></p>

<p>Eventually, the grandeur of DSL faded as the rest of the world began to adopt Cable and Fiber internet.  It wasn't until I briefly moved to Philadelphia that I was finally able to experienced what I had been missing out on.  In college I lived in a neighborhood that was one of Verizon's first Fios builds.  I was absolutely blown away by the 25 Mbps connection.  This was in 2009. I'm amazed that over a decade later, in 2020, some households still don't have access to cable or fiber internet yet.</p>

<p>Like many of our customers do now, I could never figure out why it was so difficult to get us fiber service.  The cable is cheap, just throw it up on a pole and give me internet! Right?  Well, not so fast... <br>
<img src="http://chrishacken.com/content/images/2020/03/1849761.jpg" alt="Fiber Spaghetti"></p>

<p>A quick overview of how utility services are run and the challenges involved...</p>

<p>As most people know, there are primarily two ways to deliver utility services to a home or business.  Aerial and underground.  Water, gas, and sewer are always serviced underground for obvious reasons.  Electric, telephone, cable, and fiber have the ability to either be above or below ground.</p>

<h3 id="aerial">Aerial.</h3>

<p>As with anything else, aerial has pro's and con's.</p>

<p>The pro's are primarily upfront costs (this is debatable) and speed of deployment (this is also debatable).</p>

<p>The con's are that contrary to it being cheaper to physically deploy, the pole owners generally charge up-front make ready fee's.  These fees can range from $0 to upwards of $50,000/mile.  It's essentially pay to play.  If we want to attach to 50 poles, the pole owner might determine that 10 of those poles are old and need to be replaced before we can attach to them.  Rather than fork up the cash themselves, they'll force us to pay to replace their poles in order to approve the attachment.</p>

<p>In addition to that, there are the annual pole fee's.  Depending on your agreement, we've seen pole fee's ranging anywhere from $7/pole per year all the way up to $43/pole per year with 10% annual increases (I'm looking at you PPL.  This ridiculous rate was purely intended to keep us from attaching to their poles, IMO.  It's impossible to make money with these rates). <br>
<img src="http://chrishacken.com/content/images/2020/03/Screenshot-2020-03-10-22.04.34.png" alt="Pole Rates"></p>

<p>Another con is that even though installing the cable on poles is faster, it usually takes the pole owner around 6 months just to review applications and to determine make ready requirements and costs.  As an example, if we have fiber on a pole that's 1 pole short from being able to service your house, it would take at least 6 months just to run fiber to that one additional pole. So close, yet so far.</p>

<h3 id="underground">Underground.</h3>

<p>Like aerial, underground has its own list of pro's and con's.</p>

<p>When you install a service underground, you own it for life.  There are no annual fee's.  You pay one time to install it and you're set for life.  This sounds like a pro, but it's also a con.  When we run metro conduit, it generally costs us between $15-25/ft (not including customer drops).  For the sake of argument, let's assume we're at the high-end of our costs.  If we install 1,000ft of conduit, that's $25,000 that we need to pay out of pocket upfront.  Some blocks have upwards of 30 customers, but others have as little as 5.  Let's average it out at 20 customers per block, that's $1,250 upfront per customer, assuming we get every single customer.  Conservatively, we're initially looking at a 50% take rate.  This could grow to 100% overtime, but we never make that assumption. So that's $2,500/customer.  Imagine spending $2,500 per house/building and then have them tell you that your $69/m service is too expensive.  Generally speaking, we won't do a street unless our numbers look better than this, but this is a realistic scenario as we scale and get access to cheaper capital, etc.</p>

<p><img src="http://chrishacken.com/content/images/2020/03/enorthampton01.jpg" alt="Underground Construction">
<img src="http://chrishacken.com/content/images/2020/03/enorthampton02.jpg" alt="Underground Construction Restoration"></p>

<h3 id="politics">Politics</h3>

<p>Cost issues aside, there are a number of other hurdles one needs to get past just to begin the process of building out a network.  You'd think that risking everything you have in an effort to bring your local economy into the 21st Century would be a welcome sight.  That's what I thought too; was I wrong.  While there are plenty of supporters (I truly appreciate you all), there are just as many, if not more, critics.</p>

<p>We've been fortunate enough to have had a handful of people get behind us overtime and give us a shot.  I'm sure others haven't had it so easy.  I know this because even after we've become an established player in our city throughout the past 4 years, neighboring townships and municipalities haven't been as opened armed to welcome us into their communities as I had anticipated or would have liked.</p>

<p>I'll go into more detail on small government policies that really hamper our ability to deploy underground later below.</p>

<h3 id="toomanyopinions">Too Many Opinions</h3>

<p>I'm generally a big fan of individual citizens trying to make an impact in their communities.  However, in too many cases these contributions seem to be made in the form of unproductive complaints rather than productive feedback or action.  Far too many people have a say in things that they probably shouldn't.</p>

<p><strong><em>Case A.</em></strong></p>

<p>A new customer had recently signed an agreement with us to run fiber into their building.  This is a non-profit who's members are selflessly donating their time to restore a landmark in the community.  Upon receiving their signature, I notified the city that we would be pulling a permit to connect the building in question to our underground network.  They said okay; that was that.  Our nearest existing hand hole is approximately 90ft to the right of the new customer's property; in front of another property.  As a courtesy, I notified the manager of that establishment to let her know that we would be performing work over the weekend, from Friday into Saturday.  They're closed Saturday and Sunday so I had assumed they would appreciate the notice and possibly even sign up with us.  The project would involve removing 90ft of sidewalk, running conduit, and then restoring the sidewalk with brand spankin' new concrete.  The total timespan that this would occur, from when our shovel hit the ground to having new sidewalks in place, would be 48 hrs.  The response that I received from a member of their organization made me facepalm.</p>

<p><img src="http://chrishacken.com/content/images/2020/03/Screenshot-2020-03-10-18.53.55-copy.png" alt="Sidewalk Issues"></p>

<p>Not long after receiving this email, I became aware that they didn't even own the building in question, nevermind the sidewalk.  They lease it.  This was eventually "resolved" after a series of negotiations between the non-profit's president and the establishment in question.  Often times we aren't as lucky.</p>

<p>We initially planned to have this new customer installed within a week of them signing the contract.  Now it will end up being around 2 months from start to finish.  Long story short, I learned my lesson in trying to be courteous.</p>

<p><strong><em>Case B.</em></strong></p>

<p>Last year we were installing conduit for our fiber optic network.  There were countless instances where people would literally stop their cars, roll down their windows, and yell profanities at us.  In what world is that acceptable behavior for an adult? I can't imagine being so far off my rocker that I would feel the need to yell at a bunch of construction workers trying to build a fiber optic network (not that they had any idea what we were doing).  If these are the types of people influencing decisions, there's something wrong.</p>

<p>City workers have a tough job fielding complaints from people like this and I commend them for it.  It shouldn't affect policy though.</p>

<p><strong><em>Case C.</em></strong></p>

<p>In another incident that took place not long, maybe a day or two, after <em>Case B</em> above.  A local store owner came back to us as we're swinging pick axes in 95 degree heat telling us we need to hurry up and we should hire more workers.  "My customers keep calling saying there's no where to park."  Mind you, we're standing right next to a massive parking lot that is approximately 1/3rd full.  I made my best attempt to kindly explain that paying 3 guys to stand around a hole to watch one person hand-dig to expose a utility isn't going to make our work go any faster.  I don't think he liked my response.</p>

<h3 id="theconsequences">The Consequences</h3>

<p>In many cases, resident complaints are justified.  Utility providers need to be held accountable for shitty restoration work.  However, the way in which bad restoration work is being combated is counter productive.  There has been a huge increase in curb-to-curb restoration requirements by local governments.  Essentially what these rules state is that anytime a utility cuts asphalt beyond a predetermined length, say 100ft, they are then responsible for replacing the entire road surface from the curb on the left side of the street to the curb on the right side of the street.  I believe some municipalities are also trying to introduce these measures to offload the costs of repaving roads themselves, similar to how pole owners force you to replace their aging utility poles under their make-ready requirements.  (One municipality told me as much when I attended a local council meeting in an effort to get them to waive this ridiculous ordinance for us.)</p>

<p>These policies will ultimately do more harm than good.  For us, these are the one and only thing preventing us from providing superior fiber internet services in these areas.  Forcing curb-to-curb asphalt …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://chrishacken.com/the-war-on-upstart-fiber-optic-internet-providers/">http://chrishacken.com/the-war-on-upstart-fiber-optic-internet-providers/</a></em></p>]]>
            </description>
            <link>http://chrishacken.com/the-war-on-upstart-fiber-optic-internet-providers/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23647609</guid>
            <pubDate>Fri, 26 Jun 2020 00:55:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Santa Cruz bans predictive policing]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 2 (<a href="https://news.ycombinator.com/item?id=23647504">thread link</a>) | @wturner
<br/>
June 25, 2020 | https://www.santacruzworks.org/news/santa-cruz-is-the-first-city-to-city-ban-predictive-policing | <a href="https://web.archive.org/web/*/https://www.santacruzworks.org/news/santa-cruz-is-the-first-city-to-city-ban-predictive-policing">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-block-type="2" id="block-01f39fcbb7868f9a53a1"><div><div><p>As officials mull steps to tackle police brutality and racism, California’s Santa Cruz has become the first&nbsp;U.S. city to ban predictive policing, which digital rights experts said could spark similar moves across the&nbsp;country.&nbsp;</p><p>“Understanding how predictive policing and facial recognition can be disportionately biased against&nbsp;people of color, we officially banned the use of these technologies in the city of Santa Cruz,” Mayor&nbsp;Justin Cummings said on Wednesday.&nbsp;</p><p>His administration will work with the police to “help eliminate racism in policing”, the seaside city’s first&nbsp;male African-American mayor said on his Facebook page, following a vote on Tuesday evening.&nbsp;</p><p>Used by police across the United States for almost a decade, predictive policing relies on algorithms to&nbsp;interpret police records, analyzing arrest or parole data to send officers to target chronic offenders, or&nbsp;identifying places where crime may occur.&nbsp;</p><p>But critics says it reinforces racist patterns of policing - low-income, ethnic minority neighbourhoods&nbsp;have historically been overpoliced so the data shows them as crime hotspots, leading to the deployment&nbsp;of more police to those areas.&nbsp;</p><p>“As Santa Cruz rightly recognized, predictive policing and facial recognition are dangerous, racially&nbsp;biased technologies that should never be used by our government,” said Matt Cagle, a lawyer with the&nbsp;ACLU.</p></div><p>PredPol Inc, the Santa Cruz-headquartered firm that pioneered the technology, said that it supported the city resolution’s requirement that predictive policing “will not perpetuate bias”, among other criteria. </p><p>  “Given the institutionalized state of racial inequality in America, this is a legitimate filter to be applied to any new technology acquired by a public entity, whether used for public safety or not,” it said on Twitter on Tuesday.   </p><p>Boston’s city council on Wednesday voted to ban face surveillance technology, a move also welcomed by digital rights activists.</p><p>Continue reading <a href="https://www.reuters.com/article/us-usa-police-tech-trfn/california-city-bans-predictive-policing-in-u-s-first-idUSKBN23V2XC">here</a></p></div></div></div>]]>
            </description>
            <link>https://www.santacruzworks.org/news/santa-cruz-is-the-first-city-to-city-ban-predictive-policing</link>
            <guid isPermaLink="false">hacker-news-small-sites-23647504</guid>
            <pubDate>Fri, 26 Jun 2020 00:39:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Draft of my perf book is ready – Easyperf]]>
            </title>
            <description>
<![CDATA[
Score 17 | Comments 3 (<a href="https://news.ycombinator.com/item?id=23647025">thread link</a>) | @todsacerdoti
<br/>
June 25, 2020 | https://easyperf.net/blog/2020/06/24/Draft-Of-Perf-Book | <a href="https://web.archive.org/web/*/https://easyperf.net/blog/2020/06/24/Draft-Of-Perf-Book">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
				<hr>
<p><strong>Subscribe to my <a href="https://easyperf.net/blog/2020/06/24/Draft-Of-Perf-Book#mc_embed_signup">mailing list</a> and support me on <a href="https://www.patreon.com/dendibakh">Patreon</a>.</strong></p>

<hr>

<p><strong>It has been a long journey!</strong> I was silent for a while, haven’t posted regularly on my blog. But don’t worry, I’m fine. Instead, I took this situation around coronavirus and focused on writing a book “<em>Performance Analysis and Tuning on Modern CPU</em>”. I started writing this book almost a year ago, so I’m happy I finally can show something to the people. Right now, the <strong>early draft is ready and I’m welcoming everybody to review the book and maybe even add something to it</strong>. I know a lot of people are struggling right now, so I decided to make the book <strong>FREE</strong> for all. Eventually, everyone will be able to download PDF version of it.</p>

<p><strong>Why I started it?</strong> I started this book with one simple goal in mind: educate developers to better understand performance of their applications running on modern HW. Most of developers are used to look no further than the source code of their application without trying to understand performance implications of the changes they make. I know for many of us what happens under the hood is sort of black matter. I know it’s hard, but hopefully with this book, performance world of modern HW will become more accessible.</p>

<p><strong>What is the book about?</strong> Have you ever debated with a coworker about performance of a certain piece of code? Then you probably know how hard it is to predict which version is going to work best. With so many moving parts inside the modern processors even a small tweak to the code can trigger significant performance change. Besides all its complexity, HW has many features that support performance analysis. That’s right, CPUs are capable of telling us what performance bottlenecks are and where they occur. Thus, the book focuses on how your code looks like from the CPU perspective and provides recipes for HW specific optimizations. The core of the book is centered around how to find the right place in the code to improve performance.</p>

<p>Below I present the sweetest parts of the book contents:</p>
<div><div><pre><code>1. Introduction
2. Measuring Performance
3. CPU Microarchitecture 101
4. Terminology And Metrics In Performance Analysis
5. Performance Analysis Approaches
  5.1. Code Instrumentation
  5.2. Tracing
  5.3. Workload Characterization
  5.4. Sampling
  5.5. Static Performance Analysis
  5.6. Compiler Optimization Reports
6. CPU Features For Performance Analysis
  6.1. Top-Down Microarchitecture Analysis (TMAM)
  6.2. Last Branch Record (LBR)
  6.3. Processor Event-Based Sampling (PEBS)
  6.4. Intel Processor Traces (PT)
7. Source Code Tuning For CPU
  7.1. Data-Driven Optimizations
  7.2. CPU Front-End Optimizations
  7.3. CPU Back-End Optimizations
  7.4. Optimizing Bad Speculation
  7.5. Other Tuning Areas
8. Optimizing Multithreaded Applications
</code></pre></div></div>

<p><strong>Who is this book for?</strong> Primarily, this book is written for developers working in performance critical projects. This includes the following areas: High performance computing (HPC), High Frequency Trading (HFT), GameDev, Data Centers (Facebook, Google, etc), and other areas. But I hope it will be useful for any C++ developer: you can use this book to learn performance analysis which will stack up nicely with other skills you might have. All examples in the book are written in C/C++, but to the large extent they are applicable to any native programming language (like C, C++, Rust, Go and even Fortran). While this book is fairly low-level, I hope, it will be accessible even to developers that are just starting performance related work.</p>

<p>I gave this book all my knowledge and experience and I’m eager to share it with community. I decided to make this book open to everyone and <strong>I welcome everyone to review and contribute to the book</strong>. I hope, this way we can combine best performance practices and expertise from people in different areas.</p>

<p><strong>Shoot me an email or leave a comment if you are interested.</strong></p>


			</div></div>]]>
            </description>
            <link>https://easyperf.net/blog/2020/06/24/Draft-Of-Perf-Book</link>
            <guid isPermaLink="false">hacker-news-small-sites-23647025</guid>
            <pubDate>Thu, 25 Jun 2020 23:35:44 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Data Integrity Protection in Presto]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=23646838">thread link</a>) | @findepi
<br/>
June 25, 2020 | https://prestosql.io/blog/2020/06/25/data-integrity-protection.html | <a href="https://web.archive.org/web/*/https://prestosql.io/blog/2020/06/25/data-integrity-protection.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>It all started on an Thursday afternoon in March, when <a href="https://github.com/sopel39">Karol Sobczak</a>
was grilling Presto with heavy rounds of benchmarks, as we were ramping up to Starburst Enterprise
Presto 332-e release. Karol discovered what seemed to be a serious regression, and turned out to be even more
serious Cloud environment issue.</p>

<!--more-->



<p>At the Presto project, we take serious care of stability and efficiency, so releases undergo
rigorous performance benchmarks. The intention is to safe guard against any performance regressions
or stability problems. Usually, the performance improvements are benchmarked separately when they
are being added to the codebase. At Starburst, those benchmarks are even more important, especially
for the Starburst Enterprise Presto LTS releases.</p>

<p>On a side note, we use <a href="https://github.com/prestosql/benchto/">Benchto</a> for organizing
<a href="https://github.com/prestosql/presto/tree/master/presto-benchto-benchmarks">Presto benchmark suites</a>,
executing them and collecting the results. We use managed <a href="https://kubernetes.io/">Kubernetes</a> in a public
cloud for provisioning Presto clusters, along with <a href="https://www.starburstdata.com/presto-on-kubernetes/">Starburst Enterprise Presto Kubernetes</a>.
We use <a href="https://jupyter.org/">Jupyter</a> for producing result reports in HTML and PDF formats.</p>



<p>It all started in March, when <a href="https://github.com/sopel39">Karol Sobczak</a>
was grilling Presto with heavy rounds of benchmarks for the Starburst Enterprise Presto 332-e release.
On one Thursday afternoon he reported stability problems, with few benchmark runs failing with
exceptions similar to:</p>

<div><div><pre><code>Query failed (#20200326_150852_00338_dj225): Unknown block encoding:
LONG_ARRAY� � �� � @@@���� �@  @ � �@@@ @@� @�@D�� @@��@ `� @@� @#�@ � 0�
... (9550 more bytes)
</code></pre></div></div>

<p>In Presto, a block encoding is a way of encoding a particular Block type (here, a <code>LongArrayBlock</code>).
They are used when exchanging blocks of data between Presto nodes, or in spill to disk.
Blocks form a polymorphic class hierarchy, so every time a block is encoded, we need
to also store the encoding identifier. The encoding identifier (here, the <code>LONG_ARRAY</code> string)
is written as <code>&lt;string length&gt;</code> (4-byte, signed integer in little-endian) followed by
<code>&lt;string bytes&gt;</code> containing the UTF-8 representation of the encoding id. Clearly, in the case above,
the receiver read the <code>&lt;encoding id length&gt;</code> as 9623 instead of 10! How could that be ever possible?</p>

<p>Presto 332 brought a lot of good changes and upgrade to Java 11 was one of them.
Therefore, Starburst Enterprise Presto 332-e was the first Starburst release using Java 11 by default.
For earlier releases, we ran benchmarks using AWS EC2 machines orchestrated with <a href="https://www.starburstdata.com/presto-aws-cloud/">Starburst’s Presto
CloudFormation Template (CFT)</a>. This was also the first time we did
Presto release benchmarks running on Kubernetes clusters, with AWS EKS. We could suspect many different factors
as being the cause. We started to sift through the code, search team’s “collective brain” and
the Internet for any ideas. One of the important sources was Vijay Pandurangan’s writeup on <a href="https://tech.vijayp.ca/linux-kernel-bug-delivers-corrupt-tcp-ip-data-to-mesos-kubernetes-docker-containers-4986f88f7a19">data
corruption bug discovered by Twitter in 2015</a>. Of course, we also repeated benchmark runs. Seeing is believing.</p>



<p>On the next day, a customer reported similar problems with their Presto cluster. Of course, they
were not running a yet-to-be-released version that we were still benchmarking. They run into what seemed to
be a very serious regression in a Starburst Enterprise Presto 323-e release line. The customer was also using
the AWS cloud, but not the Kubernetes deployment. They were using <a href="https://www.starburstdata.com/presto-aws-cloud/">CFT-based deployment</a>
– the same stack we were using for all our release benchmarks so far – and we had never run into issues like this before.
As the customer was using a fresh-off-press latest minor release, we decided (in spirit of global health care trend)
to “quarantine” that release and roll back the customer installation to the previous version.</p>

<p>However, the fact that a small bug fix release triggered data problems was unnerving. The fact that we
did not discover any of these problems before, was even more unnerving.</p>



<p>As we were running more and more, and even more test runs, we discovered new failure modes.
For example:</p>
<div><div><pre><code>Query failed (#20200327_001931_00020_8di4r): Cannot cast DECIMAL(7, 2) '18734974449861284.67' to DECIMAL(12, 2)
</code></pre></div></div>
<p>Well, this message is not <em>wrong</em>. It’s not possible to cast <code>18734974449861284.67</code> to <code>DECIMAL(12, 2)</code>.
Except that it is <em>also</em> not possible to have a <code>DECIMAL(7, 2)</code> with such value. Something wrong happened to the
data. At that moment, we realized the problem was very serious, because data could become corrupted.
This corrupted data could lead to a failure (like above), but it could also lead to incorrect query results,
or incorrect data being persisted (in case of <code>INSERT</code> or <code>CREATE TABLE AS</code> queries). We created
a virtual War Room (that is, a Slack channel), got together all Presto experts and our experienced field team
to discuss potential causes, further diagnostics and mitigation strategies.</p>

<p>Since the problem was affecting data exchanges between Presto nodes, we listed the following strategies
to try to dissect the problem:</p>

<ul>
  <li>determining which query (queries) is (are) causing failures,</li>
  <li>running with HTTP/2,</li>
  <li>reverting to running on Java 8,</li>
  <li>enabling exchange compression (as decompression is very sensitive to data corruption),</li>
  <li>trying to upgrade Jetty,</li>
  <li>determining whether failures correlate with JVM GC activity,</li>
  <li>inspecting the source code.</li>
</ul>



<p>We were able to quickly prototype and verify some of the ideas. Switching to HTTP/2 or
upgrading Jetty to the latest version did not help. Nor did downgrading to Jetty version
that had been using for a long time. We also verified that problem was reproducible with Java 8,
so we concluded Java 11 was not the cause of it.</p>



<p>We identified the problem occurs somewhere within exchanges, between one Presto worker
node serializing a <code>Page</code> object (basic unit of data processing in Presto) and another node
deserializing it.</p>

<p>While decimal cast failure didn’t directly point at the data corruption problem (there could
be many other reasons for it), there was no other explanation for the <code>Unknown block encoding</code> exceptions.
The serialization is done in <code>PagesSerde.serialize</code> (used by <code>TaskOutputOperator</code>, the data sender) and
deserialization is done in <code>PagesSerde.deserialize</code> (used by <code>ExchangeOperator</code>, the
receiver of the data). As the logic is nicely encapsulated in <code>PagesSerde</code> class, we
added checksums to the serialized data: <code>&lt;checksum&gt; &lt;serialized page&gt;</code>.
This felt like a smart move – except that it gave us nothing more than a confirmation that
there is a problem (“checksum failure”).
This we already knew.</p>

<p>We considered adding logging to capture data going out from one node and going in on
another node, but that would be huge amount of logs. One run of benchmarks transfers
hundreds of terabytes of data between the nodes.</p>

<p>We went ahead and created a Presto build that added data redundancy to be able to reconstruct
the data on the receiving side.
There are many <a href="https://en.wikipedia.org/wiki/Erasure_code">well-known error-correction codes</a>
(e.g. <a href="https://en.wikipedia.org/wiki/Reed%E2%80%93Solomon_error_correction">Reed–Solomon error correction</a>
available in Hadoop 3). In our case, speed of <em>implementation</em> (a.k.a. simplicity) was a deciding factor,
so we added data mirroring: <code>&lt;checksum&gt; &lt;serialized page&gt; &lt;serialized page&gt;</code>.
In order to avoid logging of all the data exchanges, we added the deserialized pages (both copies)
to the exceptions being raised.</p>

<div><div><pre><code>java.sql.SQLException: Query failed (#20200401_113622_00676_p7qp7): Hash mismatch, read: 1251072184702746109, calculated: 7591448164918409110
	Suppressed: java.lang.RuntimeException: Slice, first half: 040000000A0000004C4F4E475F415252.... (945 kilobytes)
    Suppressed: java.lang.RuntimeException: Slice, secnd half: 040000000A0000004C4F4E475F415252.... (945 kilobytes)
</code></pre></div></div>

<p>The exception told us the first part was changed, since read checksum did not match the calculated
checksum (it was calculated based on the first copy of the data and was different than the checksum
calculated on the sending side).
Having the encoded data in the exception like that, it was easy to extract the actual data and compare,
so now we could see <em>how</em> the data was changed.</p>

<div><div><pre><code>cat failure.txt | grep 'Slice, first half' | cut -d: -f4- | sed 's/^ *//' | xxd -r -p &gt; changed
cat failure.txt | grep 'Slice, secnd half' | cut -d: -f4- | sed 's/^ *//' | xxd -r -p &gt; original
</code></pre></div></div>

<p>Comparing binary files is fun, but in practice it can be more convenient to compare <code>hexdump</code> output.
The output below was created with <code>vimdiff &lt;(hexdump -Cv original) &lt;(hexdump -Cv changed)</code>.</p>
<div><div><pre><code>++--6064 lines: 00000000  04 00 00 00 0a 00 00 00  4c 4f 4...|+ +--6064 lines: 00000000  04 00 00 00 0a 00 00...
 00017b00  00 cb 6a 25 00 00 00 00  00 cb 6a 25 00 00 00 00  |  00 cb 6a 25 00 00 00 00  00 cb 6a 25 00 00 00 00
 00017b10  00 cb 6a 25 00 00 00 00  00 cb 6a 25 00 00 00 00  |  00 cb 6a 25 00 00 00 00  00 cb 6a 25 00 00 00 00
 00017b20  00 cb 6a 25 00 00 00 00  00 e1 67 25 00 00 00 00  |  00 cb 6a 25 00 00 00 00  00 e1 67 25 00 00 00 00
 00017b30  00 e1 67 25 00 00 00 00  00 e1 67 25 00 00 00 00  |  00 e1 67 25 00 00 00 00  00 e1 67 25 00 00 00 00
 00017b40  00 e1 67 25 00 00 00 00  00 e1 67 25 00 00 00 00  |  00 e1 67 25 00 00 00 00  00 e1 67 25 00 00 00 00
 00017b50  00 e1 67 25 00 00 00 00  00 e1 67 25 00 00 00 00  |  00 e1 67 25 00 00 00 00  00 e1 67 25 00 00 00 00
 00017b60  00 e1 67 25 00 00 00 00  00 e1 67 25 00 00 00 00  |  00 e1 67 25 00 00 00 00  e1 67 25 00 00 00 00 00
 00017b70  00 e1 67 25 00 00 00 00  00 fb 69 25 00 00 00 00  |  e1 67 25 00 00 00 00 00  fb 69 25 00 00 00 00 00
 00017b80  00 fb 69 25 00 00 00 00  00 fb 69 25 00 00 00 00  |  fb 69 25 00 00 00 00 00  fb 69 25 00 00 00 00 00
 00017b90  00 fb 69 25 00 00 00 00  00 fb 69 25 00 00 00 00  |  fb 69 25 00 00 00 00 00  fb 69 25 00 00 00 00 00
 00017ba0  00 fb 69 25 00 00 00 00  00 fb 69 25 00 00 00 00  |  fb 69 25 00 00 00 00 00  fb 69 25 00 00 00 00 00
 00017bb0  00 fb 69 25 00 00 00 00  00 fb 69 25 00 00 00 00  |  fb 69 25 00 00 00 00 00  fb 69 25 00 00 00 00 00
 00017bc0  00 fb 69 25 00 00 00 00  00 fb 69 25 00 00 00 00  |  fb 69 25 00 00 00 00 00  fb 69 25 00 00 00 00 00
 00017bd0  00 fb 69 25 00 00 00 00  00 fb 69 25 00 00 00 00  |  fb 69 25 00 00 00 00 00  fb 69 25 00 00 …</code></pre></div></div></div></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://prestosql.io/blog/2020/06/25/data-integrity-protection.html">https://prestosql.io/blog/2020/06/25/data-integrity-protection.html</a></em></p>]]>
            </description>
            <link>https://prestosql.io/blog/2020/06/25/data-integrity-protection.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23646838</guid>
            <pubDate>Thu, 25 Jun 2020 23:11:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Foam, a personal knowledge management and sharing system for VSCode]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=23646507">thread link</a>) | @radus
<br/>
June 25, 2020 | https://foambubble.github.io/foam/ | <a href="https://web.archive.org/web/*/https://foambubble.github.io/foam/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      

      

<p><strong>Foam</strong> is a personal knowledge management and sharing system inspired by <a href="https://roamresearch.com/">Roam Research</a>, built on <a href="https://code.visualstudio.com/">Visual Studio Code</a> and <a href="https://github.com/">GitHub</a>.</p>

<p>You can use <strong>Foam</strong> for organising your research, keeping re-discoverable notes, writing long-form content and, optionally, publishing it to the web.</p>

<p><strong>Foam</strong> is free, open source, and extremely extensible to suit your personal workflow. You own the information you create with Foam, and you’re free to share it, and collaborate on it with anyone you want.</p>

<blockquote>
  <p><strong>In a rush?</strong> You <em>could</em> jump to <a href="#getting-started">Getting started</a>, but I highly recommend reading the introductory sections first. <strong>Foam</strong> isn’t obvious.</p>
</blockquote>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="#foam">Foam</a>
    <ul>
      <li><a href="#table-of-contents">Table of Contents</a></li>
      <li><a href="#how-do-i-use-foam">How do I use Foam?</a></li>
      <li><a href="#whats-in-a-foam">What’s in a Foam?</a></li>
      <li><a href="#getting-started">Getting started</a></li>
      <li><a href="#features">Features</a></li>
      <li><a href="#call-to-adventure">Call To Adventure</a></li>
      <li><a href="#thanks-and-attribution">Thanks and attribution</a></li>
      <li><a href="#license">License</a></li>
    </ul>
  </li>
</ul>

<h2 id="how-do-i-use-foam">How do I use Foam?</h2>

<p><strong>Foam</strong> is a tool that supports creating relationships between thoughts and information to help you think better.</p>

<p><img src="https://foambubble.github.io/foam/assets/images/foam-navigation-demo.gif" alt="Short video of Foam in use"></p>

<p>Whether you want to build a <a href="https://www.buildingasecondbrain.com/">Second Brain</a> or a <a href="https://zettelkasten.de/posts/overview/">Zettelkasten</a>, write a book, or just get better at long-term learning, <strong>Foam</strong> can help you organise your thoughts if you follow these simple rules:</p>

<ol>
  <li><a href="https://github.com/foambubble/foam-template/generate">Create a single <strong>Foam</strong> workspace</a> for all your knowledge and research.</li>
  <li>Write your thoughts in markdown documents (I like to call them <strong>Bubbles</strong>, but that might be more than a little twee). These documents should be atomic: Put things that belong together into a single document, and limit its content to that single topic. (<a href="https://zettelkasten.de/posts/overview/#principles">source</a>)</li>
  <li>Use Foam’s shortcuts and autocompletions to link your thoughts together with <code>[[wiki-links]]</code>, and navigate between them to explore your knowledge graph.</li>
  <li>Get an overview of your <strong>Foam</strong> workspace using a [<a href="https://foambubble.github.io/foam/graph-visualisation" title="Graph visualisation">graph-visualisation</a>] (⚠️ WIP), and discover relationships between your thoughts with the use of [<a href="https://foambubble.github.io/foam/backlinking" title="Backlinking">backlinking</a>].</li>
</ol>

<p>Foam is a like a bathtub: <em>What you get out of it depends on what you put into it.</em></p>

<h2 id="whats-in-a-foam">What’s in a Foam?</h2>

<p>Like the soapy suds it’s named after, <strong>Foam</strong> is mostly air.</p>

<ol>
  <li>The editing experience of <strong>Foam</strong> is powered by VS Code, enhanced by workspace settings that glue together [<a href="https://foambubble.github.io/foam/recommended-extensions" title="Recommended Extensions">recommended-extensions</a>] and preferences optimised for writing and navigating information.</li>
  <li>To back up, collaborate on and share your content between devices, Foam pairs well with <a href="http://github.com/">GitHub</a>.</li>
  <li>To publish your content, you can set it up to publish to <a href="https://pages.github.com/">GitHub Pages</a> with zero code and zero config, or to any website hosting platform like <a href="http://netlify.com/">Netlify</a> or <a href="https://foambubble.github.io/foam/vercel">Vercel</a>.</li>
</ol>

<blockquote>
  <p><strong>Fun fact</strong>: This documentation was researched, written and published using <strong>Foam</strong>.</p>
</blockquote>

<h2 id="getting-started">Getting started</h2>

<blockquote>
  <p>⚠️ Foam is still in preview. Expect the experience to be a little rough.</p>
</blockquote>

<p>These instructions assume you have a GitHub account, and you have Visual Studio Code installed.</p>

<ol>
  <li><a href="https://github.com/foambubble/foam-template/generate">Create a GitHub repository from foam-template</a>. If you want to keep your thoughts to yourself, remember to set the repository private.</li>
  <li>Clone the repository and open it in VS Code.</li>
  <li>When prompted to install recommended extensions, click <strong>Install all</strong> (or <strong>Show Recommendations</strong> if you want to review and install them one by one)</li>
</ol>

<p>After setting up the repository, open <a href="https://foambubble.github.io/foam/.vscode/settings.json">.vscode/settings.json</a> and edit, add or remove any settings you’d like for your Foam workspace.</p>

<p>To learn more about how to use <strong>Foam</strong>, read the [<a href="https://foambubble.github.io/foam/recipes" title="Recipes">recipes</a>].</p>

<p>There are [<a href="https://foambubble.github.io/foam/known-issues" title="Known Issues">known-issues</a>], and I’m sure, many unknown issues! Please <a href="http://github.com/foambubble/foam/issues">report them on GitHub</a>!</p>

<h2 id="features">Features</h2>

<p><strong>Foam</strong> doesn’t have features in the traditional sense. Out of the box, you have access to all features of VS Code and all the [<a href="https://foambubble.github.io/foam/recommended-extensions" title="Recommended Extensions">recommended-extensions</a>] you choose to install, but it’s up to you to discover what you can do with it!</p>

<p>Head over to [<a href="https://foambubble.github.io/foam/recipes" title="Recipes">recipes</a>] for some useful patterns and ideas, and</p>

<h2 id="call-to-adventure">Call To Adventure</h2>

<p>The goal of <strong>Foam</strong> is to be your personal companion on your quest for knowledge.</p>

<p>It’s is currently about “10% ready” relative to all the features I’ve thought of, but I’ve only thought of ~1% of the features it could have, and I’m excited to learn from others.</p>

<p>I am using it as my personal thinking tool. By making it public, I hope to learn from others not only how to improve Foam, but also to improve how I learn and manage information.</p>

<p>If that sounds like something you’re interested in, I’d love to have you along on the journey.</p>

<ul>
  <li>Check out [<a href="https://foambubble.github.io/foam/roadmap" title="Roadmap">roadmap</a>] to see what’s in the plans</li>
  <li>Read about our [<a href="https://foambubble.github.io/foam/principles" title="Principles">principles</a>] to understand Foam’s philosophy and direction</li>
  <li>Read the [<a href="https://foambubble.github.io/foam/contribution-guide" title="Contribution Guide">contribution-guide</a>] guide to learn how to participate.</li>
  <li>Feel free to open <a href="https://github.com/foambubble/foam/issues">GitHub issues</a> to give me feedback and ideas for new features.</li>
</ul>

<h2 id="thanks-and-attribution">Thanks and attribution</h2>

<p><strong>Foam</strong> is built by <a href="https://github.com/jevakallio">Jani Eväkallio</a> (<a href="https://twitter.com/jevakallio">@jevakallio</a>).</p>

<p><strong>Foam</strong> was inspired by <a href="https://roamresearch.com/">Roam Research</a> and the <a href="https://zettelkasten.de/posts/overview">Zettelkasten methodology</a></p>

<p><strong>Foam</strong> wouldn’t be possible without <a href="https://code.visualstudio.com/">Visual Studio Code</a> and <a href="https://github.com/">GitHub</a>, and relies heavily on our fantastic open source [<a href="https://foambubble.github.io/foam/recommended-extensions" title="Recommended Extensions">recommended-extensions</a>] and all their contributors:</p>

<h2 id="license">License</h2>

<p>Foam is licensed under the <a href="https://foambubble.github.io/foam/license">MIT license</a>.</p>






      
      
      
    </div></div>]]>
            </description>
            <link>https://foambubble.github.io/foam/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23646507</guid>
            <pubDate>Thu, 25 Jun 2020 22:29:47 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Real-time bandpass filter bank audio spectogram]]>
            </title>
            <description>
<![CDATA[
Score 13 | Comments 2 (<a href="https://news.ycombinator.com/item?id=23645711">thread link</a>) | @afgho
<br/>
June 25, 2020 | https://grz0zrg.github.io/WABSP2/ | <a href="https://web.archive.org/web/*/https://grz0zrg.github.io/WABSP2/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://grz0zrg.github.io/WABSP2/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23645711</guid>
            <pubDate>Thu, 25 Jun 2020 21:07:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Re-creating some of Hey's features using Fastmail]]>
            </title>
            <description>
<![CDATA[
Score 29 | Comments 1 (<a href="https://news.ycombinator.com/item?id=23645657">thread link</a>) | @nunodonato
<br/>
June 25, 2020 | https://www.nunodonato.com/2020/06/25/a-guide-on-re-creating-heys-features/ | <a href="https://web.archive.org/web/*/https://www.nunodonato.com/2020/06/25/a-guide-on-re-creating-heys-features/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://www.nunodonato.com/2020/06/25/a-guide-on-re-creating-heys-features/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23645657</guid>
            <pubDate>Thu, 25 Jun 2020 21:01:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Using NLP to build a sarcasm classifier – Machine Learning]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 1 (<a href="https://news.ycombinator.com/item?id=23644966">thread link</a>) | @JimPD
<br/>
June 25, 2020 | https://techplanet.today/post/machine-learning-foundations-part-10-using-nlp-to-build-a-sarcasm-classifier | <a href="https://web.archive.org/web/*/https://techplanet.today/post/machine-learning-foundations-part-10-using-nlp-to-build-a-sarcasm-classifier">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
                    
                    <p>Previous: Part 9 - <a href="https://techplanet.today/post/machine-learning-foundations-part-9-using-the-sequencing-apis" rel="nofollow noopener">Using the Sequencing APIs</a></p>
<p>Over the last few parts, we haven't done much machine learning. Instead, we looked at how you can preprocess text data to get it ready for training machine learning models. In this part, you're going to put that knowledge to use in training a text classifier, a model, which, when given a piece of text, will understand the contents of that text.</p>
<p>You'll be working with the Sarcasm in News Headlines data set by Rishabh Misra, which is available on his website <a href="https://www.kaggle.com/rmisra/news-headlines-dataset-for-sarcasm-detection/home" target="_blank" rel="nofollow noopener">here</a>. This is a really fun data set, which collects news headlines from normal news sources, as well as some more comedic ones from spoof news sites.</p>
<p>The data set is a JSON file with three columns. The <code>is_sarcastic</code> one is 1 if the record is sarcastic. Otherwise, it's 0. The <code>headline</code> is the headline of the article, and the <code>article_link</code> is a URL to the text of the article. We're just going to deal with the headlines here. So we have a super easy data set to work with. The headline is our feature, and the <code>is_sarcastic</code> is our label.</p>
<p>The data in JSON looks a bit like this.</p>
<pre>{
    "article_link": "https://www.huffingtonpost.com/entry/versace-black-code_us_5861fbefe4b0de3a08f600d5",
    "headline": "former versace store clerk sues over secret 'black code' for minority shoppers",
    "is_sarcastic": 0
}</pre>
<p>Each entry is a JSON field with the name-value pairs showing the column and associated data.</p>
<p>Here's the code to load it in Python when it's structured like that.</p>
<pre>import json

with open("sarcasm.json", 'r') as f:
    datastore = json.load(f)<br>
sentences = [] 
labels = []
urls = []
for item in datastore:
    sentences.append(item['headline'])
    labels.append(item['is_sarcastic'])
    urls.append(item['article_link'])</pre>
<p>I'll go through this piece by piece. First, we'll <code>import json</code> so that we can use the json parsers in Python. Then we'll open the <code>sarcasm.json</code> file.&nbsp; Using <code>json.load()</code>, we can load and parse the entire thing. I'll initialize arrays for the sentences, labels, and URLs. And I can now simply iterate through the datastore. And, for each item, I can append its headline, the sarcasm label, and URL to the appropriate array.</p>
<p>And that's it for loading the data. In previous parts, you may recall that we had hard-coded sentences into an array of strings. We now have exactly the same data structure for the headline sentences, despite that there are now over 25,000 of them. So, for the next code, despite us using this real data set, it will look very familiar. So let's dive in.</p>
<p>So here's the code to tokenize and sequence the sarcasm data set.</p>
<pre>from tensorflow.keras.preprocessing.text import Tokenizer
from tensorflow.keras.preprocessing.sequence import pad_sequences
tokenizer = Tokenizer(oov_token="")
tokenizer.fit_on_texts(sentences)
word_index = tokenizer.word_index<br>
print(len(word_index))
print(word_index)<br>
sequences = tokenizer.texts_to_sequences(sentences)
padded = pad_sequences(sequences, padding='post')<br>
print(padded[0])
print(padded.shape)</pre>
<p>We create a tokenizer and fit it on the sentences. In this case, the sentences are the large array of 25,000-plus sentences that we read from the sarcasm data set. We can use the tokenizer to show us the <code>word_index</code> so we can see what words it learned from the data set.&nbsp;And here's an example of some of the words.</p>
<pre>... 'blowing': 4064, 'packed': 4065, 'deficit': 4066, 'essential': 4067, 'explaining': 4068, 'pollution': 4069, 'braces': 4070, 'protester': 4071, 'uncle': 4072 ...</pre>
<p>Remember from earlier that the words with the lower number tokens are the ones that are more common, and the ones with the higher numbers, was less commonly used in the data set. So, of all of the words here, hurting is the one that was found most often.</p>
<p>We can now turn all of our sentences into sequences where, instead of words, we have the tokens representing those words. We'll pad them post, which means that all of the sentences will be the length of whatever the longest one is. And anything shorter than that will be padded with zeros at the end of the sentences in order to keep them all the same length. If we want to inspect them, we can then print out one of them, and we can print out the shape of the entire padded data structure. You'll see output like this.</p>
<pre>[  308 15115   679  3337  2298    48   382  2576 15116     6  2577  8434
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0]<p>(26709, 40)</p></pre>
<p>This is the first sentence in our corpus after tokenizing and padding. It's a shorter sentence. So it ends with a bunch of zeros. And this is the shape of the data structure for the padding. This tells us that we have 26,709 padded sentences, and each of these is 40 values long.</p>
<p>With just a few lines of code, you've loaded the data from sarcasm into sentence arrays, tokenized, and padded them.</p>
<p>First, in the code, you'll see a number of commonly used variables. Each of these will be used throughout the code. You've seen many of them so far, but others, like the embedding dimension, will be clear later. The <code>training_size</code> of 20,000 will be used next.</p>
<pre>vocab_size = 10000
embedding_dim = 16
max_length = 100
trunc_type='post'
padding_type='post'
oov_tok = ""
training_size = 20000</pre>
<p>We have a corpus of many thousands of sentences and labels. And, moments ago, we specified 20,000 as the <code>training_size</code>. So that many sentences and labels will be the training set. And we'll hold back the other 6,000 or so as a validation set.</p>
<p>So our <code>training_sentences</code> will be the complete corpus from 0 to the <code>training_size</code>. And our <code>testing_sentences</code> will be from the <code>training_size</code> to the end of the set. We can do similar with the labels. The training will be the first batch, and the testing will be the last ones.</p>
<pre>training_sentences = sentences[0:training_size]
testing_sentences = sentences[training_size:]
training_labels = labels[0:training_size]
testing_labels = labels[training_size:]</pre>
<p>As we've split the data into training and testing sets, we should do the same for the padded sets, instead of having that one large master one that we had earlier on.</p>
<pre>tokenizer = Tokenizer(num_words=vocab_size, oov_token=oov_tok)
tokenizer.fit_on_texts(training_sentences)

word_index = tokenizer.word_index

training_sequences = tokenizer.texts_to_sequences(training_sentences)
training_padded = pad_sequences(training_sequences, maxlen=max_length, padding=padding_type, truncating=trunc_type)

testing_sequences = tokenizer.texts_to_sequences(testing_sentences)
testing_padded = pad_sequences(testing_sequences, maxlen=max_length, padding=padding_type, truncating=trunc_type)</pre>
<p>First, we'll create a tokenizer, and we'll specify the number of words that we want and what the out-of-vocabulary token should be. We'll fit the tokenizer to just the training_sentence corpus. This will help us accurately reflect any real-world usage. Our testing_sentences can be tested against the vocab that was learned from the training set. Now we can create a set of <code>training_sequences</code> from just the <code>training_sentences</code>. And we can pad these to get a set of padded training sentences. And then we can just do the same thing for the <code>testing_sentences</code> and for all the labels.</p>
<p>So before we can train a model with this, let's take a look at the concept of embeddings, which help us turn the sentiment of a word into a number in much the same way as we tokenized words earlier. In this case, an embedding is a vector pointing in a direction, and we can use those directions to establish meanings in words. I know this is all very vague. So let me explain it visually.</p>
<p>For example, consider the words <strong>bad</strong> and <strong>good</strong>. Now we know they have opposite meanings. So we could draw them as arrows pointing in opposite directions.<img src="https://techplanet.today/storage/posts/2020/06/5ef4f49f02367.webp" data-src="/storage/posts/2020/06/5ef4f49f02367.webp" alt="Machine Learning Foundations: Part 10 - Using NLP to build a sarcasm classifier" width="826" height="91"> We could then describe the word <strong>meh</strong> as being sort of bad, but not really that bad. So it might be an arrow like this. <img src="https://techplanet.today/storage/posts/2020/06/5ef4f4c9ea586.webp" data-src="/storage/posts/2020/06/5ef4f4c9ea586.webp" alt="Machine Learning Foundations: Part 10 - Using NLP to build a sarcasm classifier" width="797" height="349">And then the phrase not bad, it's not as strong as good, but it's more or less in the same direction as good. So we could draw it with an arrow like this.<img src="https://techplanet.today/storage/posts/2020/06/5ef4f501a791f.webp" data-src="/storage/posts/2020/06/5ef4f501a791f.webp" alt="Machine Learning Foundations: Part 10 - Using NLP to build a sarcasm classifier" width="800" height="343"> If we then plot these on a chart, we could then get coordinates for these arrows. These coordinates could then be seen as embeddings for the sentiment of those words. <img src="https://techplanet.today/storage/posts/2020/06/5ef4f5343248c.webp" data-src="/storage/posts/2020/06/5ef4f5343248c.webp" alt="Machine Learning Foundations: Part 10 - Using NLP to build a sarcasm classifier" width="969" height="491">There's no absolute meaning, but, relative to each other, we can establish sentiment.</p>
<p>To do this in code, we can simply use a Keras layer called an Embedding.</p>
<pre>model = tf.keras.Sequential([
    tf.keras.layers.Embedding(vocab_size, embedding_dim, input_length=max_length),
    tf.keras.layers.GlobalAveragePooling1D(),
    tf.keras.layers.Dense(24, activation='relu'),
    tf.keras.layers.Dense(1, activation='sigmoid')
])
model.compile(loss='binary_crossentropy',optimizer='adam',metrics=['accuracy'])</pre>
<p>Our Embedding should be defined as a vector for every word. So we're going to take vocab-sized words and then specify how many dimensions we want the arrow direction to use.&nbsp; In this case, it's 16 that we created earlier. So the Embedding layer will learn 10,016 dimension vectors where the direction of the vector establishes the sentiment of the word. By matching the words to the labels, it'll have a direction that it can then start learning from.</p>
<p>Once we've defined the model, we can then train it like this.</p>
<pre>num_epochs = 30
history = model.fit(training_padded, training_labels, epochs=num_epochs, validation_data=(testing_padded, testing_labels), verbose=2)</pre>
<p>We simply specify the training_padded features and labels, as well as the validation ones.</p>
<p>Now you can try it for yourself. Here's the <a href="https://www.youtube.com/redirect?q=https%3A%2F%2Fgoo.gle%2F3d6sIJY&amp;redir_token=ONe-_plC_prURgXQYxiQIX-HJVJ8MTU5MzE4OTQ0OEAxNTkzMTAzMDQ4&amp;event=video_description&amp;v=-8XmD2zsFBI" target="_blank" rel="nofollow noopener">URL</a>.</p>
<p>Hopefully that was an interesting exploration for you into the beginnings of NLP with TensorFlow. And that brings us to the end of this 10-part series on foundations of machine learning. I hope you've enjoyed these series, and I hope you've been able to learn from them.</p>
<p><iframe src="https://techplanet.today/storage/settings/April2020/08rLYcVZG5uspJE5KPCf.jpg" data-src="https://www.youtube.com/embed/-8XmD2zsFBI" width="720" height="404" allowfullscreen="allowfullscreen"></iframe></p>
                    
                </article></div>]]>
            </description>
            <link>https://techplanet.today/post/machine-learning-foundations-part-10-using-nlp-to-build-a-sarcasm-classifier</link>
            <guid isPermaLink="false">hacker-news-small-sites-23644966</guid>
            <pubDate>Thu, 25 Jun 2020 20:04:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Racial Diversity In Tech By The Numbers]]>
            </title>
            <description>
<![CDATA[
Score 15 | Comments 17 (<a href="https://news.ycombinator.com/item?id=23644796">thread link</a>) | @stephen_greet
<br/>
June 25, 2020 | https://www.beamjobs.com/diversity/racial-diversity-in-tech | <a href="https://web.archive.org/web/*/https://www.beamjobs.com/diversity/racial-diversity-in-tech">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.beamjobs.com/diversity/racial-diversity-in-tech</link>
            <guid isPermaLink="false">hacker-news-small-sites-23644796</guid>
            <pubDate>Thu, 25 Jun 2020 19:51:15 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Laura Deming, founder of the Longevity Fund, on being homeschooled]]>
            </title>
            <description>
<![CDATA[
Score 106 | Comments 183 (<a href="https://news.ycombinator.com/item?id=23644762">thread link</a>) | @mksm
<br/>
June 25, 2020 | https://blog.withprimer.com/laura-deming/ | <a href="https://web.archive.org/web/*/https://blog.withprimer.com/laura-deming/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div role="main">
	<article>
		<div>

			<section>
				<p>Laura Deming is a biologist and founder of The Longevity Fund, the first VC firm to focus on companies that work on extending healthy human lifespan and addressing age-related diseases through biotechnology. She grew her roots in biology as a homeschooling student in New Zealand, and moved to the US to work in a <a href="https://hillblomcenter.ucsf.edu/#:~:text=The%20mission%20of%20the%20Hillblom,diseases%20have%20similar%20molecular%20causes.">UCSF biology lab</a> at age 12. By age 14, she was a student at MIT, then became a <a href="https://thielfellowship.org/">Thiel Fellow</a>. We asked Laura to share how her education prepared her to lead and build today.</p><figure><img src="https://blog.withprimer.com/content/images/2020/06/Frame-2.png" alt="" srcset="https://blog.withprimer.com/content/images/size/w600/2020/06/Frame-2.png 600w, https://blog.withprimer.com/content/images/size/w1000/2020/06/Frame-2.png 1000w, https://blog.withprimer.com/content/images/size/w1600/2020/06/Frame-2.png 1600w, https://blog.withprimer.com/content/images/size/w1754/2020/06/Frame-2.png 1754w"><figcaption>Laura Deming. Illustration by <a href="https://www.ne-oh.com/">Annie Oh</a>.</figcaption></figure><h3 id="what-are-you-working-on-and-thinking-about-this-week">What are you working on and thinking about this week?</h3><p>How long do you have? I normally have a few key focuses at work (right now, immune aging from a bunch of different angles), and then a billion other small ideas that float in and out of my cranium. My most persistent focus is something that I can’t talk about yet because it would sound slightly insane, but right now, I’m pursuing these more coherent questions: &nbsp;<br></p><ol><li>Is there a flywheel effect with biological tools? Will biological discoveries become the tools for next-generation discovery? How might we predict progress in biology?</li><li>Why does it normally take about a year for the best proto-entrepreneurs I know to reach full conviction about starting a company? What are ways to accelerate that process?</li><li>Is there an immortal cell that doesn’t replicate anywhere on earth? (We presumably wouldn’t see it if there was.)</li></ol><p>I’m really obsessed with <a href="http://book.bionumbers.org/">Cell Biology by the Numbers</a>. I think quantitative intuitive models of biology are the best thing ever. Also <a href="https://www.cornell.edu/video/nima-arkani-hamed-morality-fundamental-physics">this Nima Arkani-Hamed</a> video is literally the best thing ever.</p><h3 id="what-was-your-education-like">What was your education like?</h3><p>I grew up homeschooled in NZ with a hilariously small amount of context for what the real world was like. In retrospect, it was totally ideal. I had two strong memes deeply implanted in my cranium early in life - <em>I love science </em>and <em>it’s my job to do something really important </em>and<em> I can do it, too. </em>I have no clue who I’d be without those memes, and I’m also not sure that the latter was actually true! My dad just always told me that I was exceptional and could work out a way whatever I wanted to do in the world and I believed him. I still do, in a funny way, despite about a decade of evidence to the contrary and realizing how actually hard it is to make drugs for complex diseases. It’s extraordinarily sad how many otherwise brilliant kids might not do things they could because they don’t have a similarly supportive environment — I’m really excited for things like <a href="https://dcgross.com/">Daniel Gross</a>’s <a href="https://pioneer.app/">Pioneer</a> for that reason. </p><figure><img src="https://blog.withprimer.com/content/images/2020/06/image.png" alt="" srcset="https://blog.withprimer.com/content/images/size/w600/2020/06/image.png 600w, https://blog.withprimer.com/content/images/size/w1000/2020/06/image.png 1000w, https://blog.withprimer.com/content/images/size/w1600/2020/06/image.png 1600w, https://blog.withprimer.com/content/images/size/w2000/2020/06/image.png 2000w"><figcaption>Laura as a child, drawing DNA on the pavement outside of her house in chalk, an anecdote from a talk that she gave for <a href="https://www.youtube.com/watch?v=YwslKJut8eM">TedxYouth@Tallinn</a>. Illustration by <a href="https://www.ne-oh.com/">Annie Oh</a>.</figcaption></figure><p>I feel like it was a lot of puzzle solving and doing obvious stuff. And then starting to think more independently in college, and to try to figure out what problems I wanted to work on. But I had this moment around that time where a friend and I were driving to a camping site, and I was trying to explain a math concept to him, and he abruptly turned to me and said “I’m feeling very frustrated right now because you honestly have absolutely no idea what you are talking about.”<em> </em></p><p>It’s really hard to explain without context how actually useful that comment was. As he explained it, I was just parroting off the definition of something. The real way to understand things is to be able to see, explore, feel the concept from a bunch of different angles, and to be able to rigorously prove things about it. I still struggle with the latter, but having an intuition for what <em>real, deep </em>understanding of a concept looks like has been a great guidepost. For example, I realized I didn’t understand what entropy was, and now kind of do, after a summer of being in near tears with frustration about it. </p><h3 id="where-and-when-did-your-mission-to-improve-longevity-originate">Where and when did your mission to improve longevity originate?</h3><p>It’s funny, because I get asked that question a lot. I think of it like this: if you were to watch a million people jump off a bridge every day and just suffer in a really extreme way throughout all of it, How would we respond as a society? An overwhelming number of people would be inspired to take action and help. When you think of it in acute, immediate terms, viscerally shocking and moving. But with longevity and other deeply existential problems, the horror of what’s happening has been tragically normalized.</p><p>I really just wanted to work on the biggest problem possible. At first I thought that was cancer, but after a variety of experiences, aging just seemed like a bigger deal.</p><p>I have a much less antagonistic relationship with death now than I did when I was a kid. I understand more that we are a species, that there’s something beyond us as individuals — but despite that, I absolutely cannot square the idea of sobbing when a relative gets cancer and then being totally fine with another debilitating degenerative disease also caused by aging that we somehow have collectively decided is natural and normal.</p><h3 id="how-has-the-way-you-learned-as-a-kid-shaped-the-way-you-learn-and-make-decisions-at-the-helm-of-the-longevity-fund">How has the way you learned as a kid shaped the way you learn and make decisions at the helm of The Longevity Fund?</h3><p>I’ve had to un-learn a bunch of stuff I learned when I first came to the professional world. As a kid, I was deeply joyous about science. I loved it directly and with a passion, and I absolutely believed I was going to grow up to be like Michael Faraday (his story about <a href="https://artsandculture.google.com/exhibit/people-of-science-michael-faraday-the-royal-society/HQLyLIo6MWpoKw?hl=en">getting an apprenticeship with Humphrey Davy</a> is amazing, by the way). When I entered the world of finance with my fund, I was totally scared to seem like I didn’t know what I was doing, and I felt like it was really important to hide who I was to seem more ‘adult’. Now, in retrospect, I think that was both understandable and a bit of a mistake.</p><p>One thing I learned as a kid that I keep on forgetting so easily is how not to care about what anyone else thinks (with a few close exceptions). It’s funny - even in Silicon Valley, hypothetically the vanguard of independent thought, I feel like that’s extremely hard to do. In part, because what other people think constrains your access to resources. So it’s an interesting balance. </p><h3 id="i-ve-heard-you-talk-about-your-dad-telling-you-at-12-years-old-to-make-sure-that-everyone-was-a-little-bit-happier-because-you-were-in-the-lab-each-day-what-role-did-your-parents-play-in-your-life-and-education">I’ve heard you talk about your dad telling you at 12 years old to make sure that everyone was a little bit happier because you were in the lab each day. What role did your parents play in your life and education?</h3><p>Oh, man. My Dad had so much good advice as a kid — I really felt like I got a cheat code to life early on. It was like being Ben Franklin’s daughter or something. I’m probably exaggerating, but it felt that way. </p><p>One thing he told me was ‘action comes before motivation’ - that’s always been an incredibly powerful thing in my life. He taught me a lot about putting your head down and working hard and not believing anyone who tells you you are great, having that come mostly from your own self-judgment. Being extremely humble around people who know more, finding any way on earth to help them. </p><p>My dad also taught me a lot about humor and how ridiculous the world was in so many different ways. Almost too much - I think I take things more seriously now. But it’s kind of the Mark Twain effect - the world and everyone in it is a hilarious, self-sabotaging, foolhardy place that is also one of the most deeply joyous and interesting things going on in the galaxy. He used to say you can either look at what’s going on in the world and cry or laugh. Why not pick the latter?</p><p>My mom taught me about kindness and empathy and wanting to help others. She’s probably the most giving person I know. </p><p>When I first met Cynthia Kenyon, who literally changed my and many other lives – she’s amazing – I had this very extreme mental conceit that I would beg her to scrub floors in her lab and somehow work my way up on the academic ladder. I was 12. She very kindly offered for me to just work in her lab as a normal intern, which was so kind in retrospect. It changed my life, to be taken seriously like that at a young age. </p><h3 id="i-love-how-you-describe-the-way-the-longevity-fund-removes-limits-on-who-can-participate-in-biomedical-entrepreneurship-how-can-we-translate-some-of-what-you-ve-learned-about-diverse-participation-in-science-to-the-way-that-kids-learn">I love how you describe the way The Longevity Fund removes limits on who can participate in biomedical entrepreneurship. How can we translate some of what you’ve learned about diverse participation in science to the way that kids learn?</h3><p>I think there’s something about being absolutely delighted when you meet someone who doesn’t know something. That feeling is the best thing in the world because <em>you get to be the first person to tell them about some incredibly cool natural phenomenon</em>. That’s pretty great. I still remember being a preteen in Cynthia’s lab when Marc McCormick described how SVMs (<a href="https://en.wikipedia.org/wiki/Support_vector_machine">Support Vector Machines</a>) worked for handwriting recognition in the postal system. He was just so good at explaining things, and that really stuck. Encourage people to own ideas, be skeptical of them, and learn to delight in poking holes in things.<br></p><p>When thinking about diverse participation, it’s funny – before I came to the Valley, I had absolutely no idea that being a girl was in any way a handicap. To me, it was an obvious advantage – in a sea of people who all looked the same way, I’d stick out like a sore thumb! If I could make it, wouldn’t I obviously be an amazing role model? Being in the valley for a while, it kind of wore off, and the more articles I read about how much it sucked to be a girl in science, the more I believed it. I’m not sure what to think about all of that, really. </p><h3 id="what-s-something-you-believe-that-most-people-don-t">What’s something you believe that most people don’t?</h3><p>I can give you a few!</p><ol><li>That we will see the first drug to measurably affect <a href="https://publichealth.wustl.edu/heatlhspan-is-more-important-than-lifespan-so-why-dont-more-people-know-about-it/">human healthspan</a> tested in the next decade, and that this is one of the biggest deals in how we thinking about disease. It’s not just hype and rhetoric.</li><li>That original thinkers are so darn much more rare to find than I thought they’d be growing up. <br></li></ol><hr><p><em>Primer is a new education company whose goal is to help kids engage in limitless learning, starting with homeschoolers. </em><strong>Homeschooled:</strong><em> is a regular series about homeschooling alumni who have gone on to do amazing things. We're just getting started, so we'd love to hear what you think!</em></p><p>Sign up for …</p></section></div></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.withprimer.com/laura-deming/">https://blog.withprimer.com/laura-deming/</a></em></p>]]>
            </description>
            <link>https://blog.withprimer.com/laura-deming/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23644762</guid>
            <pubDate>Thu, 25 Jun 2020 19:48:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Query-Based Compiler Architectures]]>
            </title>
            <description>
<![CDATA[
Score 104 | Comments 23 (<a href="https://news.ycombinator.com/item?id=23644391">thread link</a>) | @matt_d
<br/>
June 25, 2020 | https://ollef.github.io/blog/posts/query-based-compilers.html | <a href="https://web.archive.org/web/*/https://ollef.github.io/blog/posts/query-based-compilers.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
        <p>Note: This is an old post originally from the documentation of the <a href="https://github.com/ollef/sixten">Sixten</a> programming language, that I've touched up and fleshed out. After the time that it was written I've found out about <a href="https://github.com/salsa-rs/salsa">Salsa</a>, a Rust library with very similar goals to my Rock library, which is definitely worth checking out as well!</p>
<h2 id="background">Background</h2>
<p>Compilers are no longer just black boxes that take a bunch of source files and produce assembly code. We expect them to:</p>
<ul>
<li>Be incremental, meaning that if we recompile a project after having made a few changes we only recompile what is affected by the changes.</li>
<li>Provide editor tooling, e.g. through a <a href="https://langserver.org/">language server</a>, supporting functionality like going to definition, finding the type of the expression at a specific location, and showing error messages on the fly.</li>
</ul>
<p>This is what Anders Hejlsberg talks about in <a href="https://www.youtube.com/watch?v=wSdV1M7n4gQ">his video on modern compiler construction</a> that some of you might have seen.</p>
<p>In this post I will cover how this is achieved in <a href="https://github.com/ollef/sixten">Sixten</a> by building the compiler around a query system.</p>
<p>For those of you that don't know, Sixten is an experimental functional programming language created to give the programmer more control over memory layout and boxing than most other high-level languages do. The most recent development of Sixten is being done in the <a href="https://github.com/ollef/sixty">Sixty</a> repository, and is completely query-based. Here's a little video giving a taste of what its language server can do, showing type-based completions:</p>

<h2 id="traditional-pipeline-based-compiler-architectures">Traditional pipeline-based compiler architectures</h2>
<p>A traditional compiler pipeline might look a bit like this:</p>
<div id="cb1"><pre><code><span id="cb1-1"><a href="#cb1-1"></a>+-----------+            +-----+                +--------+               +--------+</span>
<span id="cb1-2"><a href="#cb1-2"></a>|           |            |     |                |        |               |        |</span>
<span id="cb1-3"><a href="#cb1-3"></a>|source text|---parse---&gt;| AST |---typecheck-+-&gt;|core AST|---generate---&gt;|assembly|</span>
<span id="cb1-4"><a href="#cb1-4"></a>|           |            |     |       ^        |        |               |        |</span>
<span id="cb1-5"><a href="#cb1-5"></a>+-----------+            +-----+       |        +--------+               +---------</span>
<span id="cb1-6"><a href="#cb1-6"></a>                                       |</span>
<span id="cb1-7"><a href="#cb1-7"></a>                                 read and write</span>
<span id="cb1-8"><a href="#cb1-8"></a>                                     types</span>
<span id="cb1-9"><a href="#cb1-9"></a>                                       |</span>
<span id="cb1-10"><a href="#cb1-10"></a>                                       v</span>
<span id="cb1-11"><a href="#cb1-11"></a>                                  +----------+</span>
<span id="cb1-12"><a href="#cb1-12"></a>                                  |          |</span>
<span id="cb1-13"><a href="#cb1-13"></a>                                  |type table|</span>
<span id="cb1-14"><a href="#cb1-14"></a>                                  |          |</span>
<span id="cb1-15"><a href="#cb1-15"></a>                                  +----------+</span></code></pre></div>
<p>There are many variations, and often more steps and intermediate representations than in the illustration, but the idea stays the same:</p>
<p>We push source text down a pipeline and run a fixed set of transformations until we finally output assembly code or some other target language. Along the way we often need to read and update some state. For example, we might update a type table during type checking so we can later look up the type of entities that the code refers to.</p>
<p>Traditional compiler pipelines are probably quite familiar to many of us, but how query-based compilers should be architected might not be as well-known. Here I will describe one way to do it.</p>
<h2 id="going-from-pipeline-to-queries">Going from pipeline to queries</h2>
<p>What does it take to get the type of a qualified name, such as <code>"Data.List.map"</code>? In a pipeline-based architecture we would just look it up in the type table. With queries, we have to think differently. Instead of relying on having updated some piece of state, we do it as if it was done from scratch.</p>
<p>As a first iteration, we do it <em>completely</em> from scratch. It might look a little bit like this:</p>
<div id="cb2"><pre><code><span id="cb2-1"><a href="#cb2-1"></a><span>fetchType ::</span> <span>QualifiedName</span> <span>-&gt;</span> <span>IO</span> <span>Type</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>fetchType (<span>QualifiedName</span> moduleName name) <span>=</span> <span>do</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>  fileName <span>&lt;-</span> moduleFileName moduleName</span>
<span id="cb2-4"><a href="#cb2-4"></a>  sourceCode <span>&lt;-</span> <span>readFile</span> fileName</span>
<span id="cb2-5"><a href="#cb2-5"></a>  parsedModule <span>&lt;-</span> parseModule sourceCode</span>
<span id="cb2-6"><a href="#cb2-6"></a>  resolvedModule <span>&lt;-</span> resolveNames parsedModule</span>
<span id="cb2-7"><a href="#cb2-7"></a>  <span>let</span> definition <span>=</span> <span>lookup</span> name resolvedModule</span>
<span id="cb2-8"><a href="#cb2-8"></a>  inferDefinitionType definition</span></code></pre></div>
<p>We first find out what file the name comes from, which might be <code>Data/List.vix</code> for <code>Data.List</code>, then read the contents of the file, parse it, perhaps we do name resolution to find out what the names in the code refer to given what is imported, and last we look up the name-resolved definition and type check it, returning its type.</p>
<p>All this for just for getting the type of an identifier? It seems ridiculous because looking up the type of a name is something we'll do loads of times during the type checking of a module. Luckily we're not done yet.</p>
<p>Let's first refactor the code into smaller functions:</p>
<div id="cb3"><pre><code><span id="cb3-1"><a href="#cb3-1"></a><span>fetchParsedModule ::</span> <span>ModuleName</span> <span>-&gt;</span> <span>IO</span> <span>ParsedModule</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>fetchParsedModule moduleName <span>=</span> <span>do</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>  fileName <span>&lt;-</span> moduleFileName moduleName</span>
<span id="cb3-4"><a href="#cb3-4"></a>  sourceCode <span>&lt;-</span> <span>readFile</span> fileName</span>
<span id="cb3-5"><a href="#cb3-5"></a>  parseModule moduleName</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span>fetchResolvedModule ::</span> <span>ModuleName</span> <span>-&gt;</span> <span>IO</span> <span>ResolvedModule</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>fetchResolvedModule moduleName <span>=</span> <span>do</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>  parsedModule <span>&lt;-</span> fetchParsedModule moduleName</span>
<span id="cb3-10"><a href="#cb3-10"></a>  resolveNames parsedModule</span>
<span id="cb3-11"><a href="#cb3-11"></a></span>
<span id="cb3-12"><a href="#cb3-12"></a><span>fetchType ::</span> <span>QualifiedName</span> <span>-&gt;</span> <span>IO</span> <span>Type</span></span>
<span id="cb3-13"><a href="#cb3-13"></a>fetchType (<span>QualifiedName</span> moduleName name) <span>=</span> <span>do</span></span>
<span id="cb3-14"><a href="#cb3-14"></a>  resolvedModule <span>&lt;-</span> fetchResolvedModule moduleName</span>
<span id="cb3-15"><a href="#cb3-15"></a>  <span>let</span> definition <span>=</span> <span>lookup</span> name resolvedModule</span>
<span id="cb3-16"><a href="#cb3-16"></a>  inferDefinitionType definition</span></code></pre></div>
<p>Note that each of the functions do everything from scratch on their own, i.e. they're each doing a (longer and longer) prefix of the work you'd do in a pipeline. I've found this to be a common pattern in my query-based compilers.</p>
<p>One way to make this efficient would be to add a memoisation layer around each function. That way, we do some expensive work the first time we invoke a function with a specific argument, but subsequent calls are cheap as they can return the cached result.</p>
<p>This is essentially what we'll do, but we won't use a separate cache per function, but instead have a central cache, indexed by the query. This functionality is provided by <a href="https://github.com/ollef/rock">Rock</a>, a library that packages up some functionality for creating query-based compilers.</p>
<h2 id="the-rock-library">The Rock library</h2>
<p><a href="https://github.com/ollef/rock">Rock</a> is an experimental library heavily inspired by <a href="https://github.com/ndmitchell/shake">Shake</a> and the <a href="https://www.microsoft.com/en-us/research/publication/build-systems-la-carte/">Build systems à la carte paper</a>. It essentially implements a build system framework, like <code>make</code>.</p>
<p>Build systems have a lot in common with modern compilers since we want them to be incremental, i.e. to take advantage of previous build results when building anew with few changes. But there's also a difference: Most build systems don't care about the <em>types</em> of their queries since they work at the level of files and file systems.</p>
<p><em>Build systems à la carte</em> is closer to what we want. There the user writes a bunch of computations, <em>tasks</em>, choosing a suitable type for keys and a type for values. The tasks are formulated assuming they're run in an environment where there is a function <code>fetch</code> of type <code>Key -&gt; Task Value</code>, where <code>Task</code> is a type for describing build system rules, that can be used to fetch the value of a dependency with a specific key. In our above example, the key type might look like this:</p>
<div id="cb4"><pre><code><span id="cb4-1"><a href="#cb4-1"></a><span>data</span> <span>Key</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span>=</span> <span>ParsedModuleKey</span> <span>ModuleName</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span>|</span> <span>ResolvedModuleKey</span> <span>ModuleName</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span>|</span> <span>TypeKey</span> <span>QualifiedName</span></span></code></pre></div>
<p>The build system has control over what code runs when we do a <code>fetch</code>, so by varying that it can do fine-grained dependency tracking, memoisation, and incremental updates.</p>
<p><em>Build systems à la carte</em> is also about exploring what kind of build systems we get when we vary what <code>Task</code> is allowed to do, e.g. if it's a <code>Monad</code> or <code>Applicative</code>. In Rock, we're not exploring <em>that</em>, so our <code>Task</code> is a thin layer on top of <code>IO</code>.</p>
<p>A problem that pops up now, however, is that there's no satisfactory type for <code>Value</code>. We want <code>fetch (ParsedModuleKey "Data.List")</code> to return a <code>ParsedModule</code>, while <code>fetch (TypeKey "Data.List.map")</code> should return something of type <code>Type</code>.</p>
<h3 id="indexed-queries">Indexed queries</h3>
<p>Rock allows us to index the key type by the return type of the query. The <code>Key</code> type in our running example becomes the following <a href="https://en.wikipedia.org/wiki/Generalized_algebraic_data_type">GADT</a>:</p>
<div id="cb5"><pre><code><span id="cb5-1"><a href="#cb5-1"></a><span>data</span> <span>Key</span> a <span>where</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span>ParsedModuleKey</span><span> ::</span> <span>ModuleName</span> <span>-&gt;</span> <span>Key</span> <span>ParsedModule</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span>ResolvedModuleKey</span><span> ::</span> <span>ModuleName</span> <span>-&gt;</span> <span>Key</span> <span>ResolvedModule</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span>TypeKey</span><span> ::</span> <span>QualifiedName</span> <span>-&gt;</span> <span>Key</span> <span>Type</span></span></code></pre></div>
<p>The <code>fetch</code> function gets the type <code>forall a. Key a -&gt; Task a</code>, so we get a <code>ParsedModule</code> when we run <code>fetch (ParsedModuleKey "Data.List")</code>, like we wanted, because the return type depends on the key we use.</p>
<p>Now that we know what <code>fetch</code> should look like, it's also worth revealing what the <code>Task</code> type looks like in Rock, more concretely. As mentioned, it's a thin layer around <code>IO</code>, providing a way to <code>fetch</code> <code>key</code>s (like <code>Key</code> above):</p>
<div id="cb6"><pre><code><span id="cb6-1"><a href="#cb6-1"></a><span>newtype</span> <span>Task</span> key a <span>=</span> <span>Task</span> {<span> unTask ::</span> <span>ReaderT</span> (<span>Fetch</span> key) <span>IO</span> a }</span>
<span id="cb6-2"><a href="#cb6-2"></a><span>newtype</span> <span>Fetch</span> key <span>=</span> <span>Fetch</span> (<span>forall</span> a<span>.</span> key a <span>-&gt;</span> <span>IO</span> a)</span></code></pre></div>
<p>The rules of our compiler, i.e. its "Makefile", then becomes the following function, reusing the functions from above:</p>
<div id="cb7"><pre><code><span id="cb7-1"><a href="#cb7-1"></a><span>rules ::</span> <span>Key</span> a <span>-&gt;</span> <span>Task</span> a</span>
<span id="cb7-2"><a href="#cb7-2"></a>rules key <span>=</span> <span>case</span> key <span>of</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span>ParsedModuleKey</span> moduleName <span>-&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>    fetchParsedModule moduleName</span>
<span id="cb7-5"><a href="#cb7-5"></a></span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span>ResolvedModuleKey</span> moduleName <span>-&gt;</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>    fetchResolvedModule moduleName</span>
<span id="cb7-8"><a href="#cb7-8"></a></span>
<span id="cb7-9"><a href="#cb7-9"></a>  <span>TypeKey</span> qualifiedName <span>-&gt;</span></span>
<span id="cb7-10"><a href="#cb7-10"></a>    fetchType qualifiedName</span></code></pre></div>
<h3 id="caching">Caching</h3>
<p>The most basic way to run a <code>Task</code> in Rock is to directly call the <code>rules</code> function when a <code>Task</code> fetches a key. This results in an inefficient build system that recomputes every query from scratch.</p>
<p>But the <code>Rock</code> library lets us layer more functionality onto our <code>rules</code> function, and one thing that we can add is memoisation. If we do that Rock caches the result of each fetched key by storing the key-value pairs of already performed fetches in a <a href="https://hackage.haskell.org/package/dependent-hashmap">dependent hashmap</a>. This way, we perform each query at most once during a single run of the compiler.</p>
<h3 id="verifying-dependencies-and-reusing-state">Verifying dependencies and reusing state</h3>
<p>Another kind of functionality that can be layered onto the <code>rules</code> function is incremental updates. When it's used, Rock keeps track of what dependencies a task used when it was executed (much like Shake) in a table, i.e. what keys it fetched and what the values were. Using this information it's able to determine when it's safe to reuse the cache <em>from a previous run of the compiler</em> even though there might be changes in other parts of the dependency graph.</p>
<p>This fine-grained dependency tracking also allows reusing the cache when a dependency of a task changes in a way that has no effect. For example, whitespace changes might trigger a re-parse, but since the AST is the same, the cache can be reused in queries that depend on the …</p></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://ollef.github.io/blog/posts/query-based-compilers.html">https://ollef.github.io/blog/posts/query-based-compilers.html</a></em></p>]]>
            </description>
            <link>https://ollef.github.io/blog/posts/query-based-compilers.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23644391</guid>
            <pubDate>Thu, 25 Jun 2020 19:17:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[ASGI from scratch – Let's build an ASGI web framework]]>
            </title>
            <description>
<![CDATA[
Score 69 | Comments 11 (<a href="https://news.ycombinator.com/item?id=23644252">thread link</a>) | @lukastyrychtr
<br/>
June 25, 2020 | https://shenli.dev/2020/06/20/asgi-from-scratch.html | <a href="https://web.archive.org/web/*/https://shenli.dev/2020/06/20/asgi-from-scratch.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    
<p>The first time I used <a href="https://asgi.readthedocs.io/">ASGI</a>(<em>Asynchronous Server Gateway Interface</em>) was through <a href="https://github.com/django/channels">Channels</a> 1.0 when ASGI spec was still a draft. It was my first interview project which helped me get my current job at <a href="https://fellow.app/">Fellow</a>. It felt magical at that time how easy it is to add WebSocket functionality to my Django app and handles authentication and other Django related things for me seamlessly.</p>

<p>ASGI specification is now at version 3 at the time of writing and both ASGI and Channels became part of Django Software Foundation. Compared to the draft version, it has matured a lot with added lifecycle calls and better application format, etc. Most excitingly, a healthy and fast-growing community is forming and we are seeing more and more ASGI servers running in production environments. At my company, we are serving a few million requests per day through ASGI running on <a href="https://github.com/django/daphne">Daphne</a>, Netflix’s <a href="https://netflixtechblog.com/introducing-dispatch-da4b8a2a8072">Dispatch</a> is based on <a href="https://fastapi.tiangolo.com/">FastAPI</a>, a popular ASGI web application framework, and apparently, Microsoft is <a href="https://github.com/tiangolo/fastapi/pull/26">using it</a> too.</p>

<p>I would humbly advise anyone building web services in Python to learn about ASGI. And the best way to learn something is to built things with it, so in this blog post, I’ll walk through the steps to build a micro web application framework that speaks ASGI. I hope it can help explain how ASGI works.</p>


<p>Before writing the first line of code, we need to have a basic understanding of what ASGI is and what we are building towards.</p>
<h2 id="how-asgi-works">How ASGI works</h2>
<p>Here’s a simple diagram showing how ASGI works at a high level.</p>
<pre><code>graph TD
	A[Client] --&gt;|HTTP, WebSocket, ...| B(ASGI Server)
	B --&gt; |scope, send, receive| C(ASGI application)
</code></pre>
<p>To put it in simple words, A browser(client), establishes a connection to ASGI server with a certain type of request (HTTP or WebSocket), the ASGI server then calls ASGI  application with information about the connection, encapsulated in a python dictionary called <code>scope</code>, and two callbacks, named <code>send</code> and <code>receive</code>, that the application can use to send and receive messages between server and client.</p>

<p>Here’s an example HTTP request scope</p>
<div><div><pre><code><span>{</span>
    <span>"type"</span><span>:</span> <span>"http"</span><span>,</span>
    <span>"http_version"</span><span>:</span> <span>"1.1"</span><span>,</span>
    <span>"server"</span><span>:</span> <span>(</span><span>"127.0.0.1"</span><span>,</span> <span>8000</span><span>),</span>
    <span>"client"</span><span>:</span> <span>(</span><span>"127.0.0.1"</span><span>,</span> <span>60457</span><span>),</span>
    <span>"scheme"</span><span>:</span> <span>"http"</span><span>,</span>
    <span>"method"</span><span>:</span> <span>"GET"</span><span>,</span>
    <span>"root_path"</span><span>:</span> <span>""</span><span>,</span>
    <span>"path"</span><span>:</span> <span>"/hello/a"</span><span>,</span>
    <span>"raw_path"</span><span>:</span> <span>b"/hello/a"</span><span>,</span>
    <span>"query_string"</span><span>:</span> <span>b""</span><span>,</span>
    <span>"headers"</span><span>:</span> <span>[</span>
        <span>(</span><span>b"host"</span><span>,</span> <span>b"localhost:8000"</span><span>),</span>
        <span>(</span><span>b"connection"</span><span>,</span> <span>b"keep-alive"</span><span>),</span>
        <span>(</span>
            <span>b"user-agent"</span><span>,</span>
            <span>b"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.106 Safari/537.36"</span><span>,</span>
        <span>),</span>
        <span>(</span>
            <span>b"accept"</span><span>,</span>
            <span>b"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"</span><span>,</span>
        <span>),</span>
        <span>(</span><span>b"accept-encoding"</span><span>,</span> <span>b"gzip, deflate, br"</span><span>),</span>
        <span>(</span><span>b"accept-language"</span><span>,</span> <span>b"en-US,en;q=0.9"</span><span>),</span>
        <span>(</span>
            <span>b"cookie"</span><span>,</span>
            <span>b'csrftoken=dDA2IAPrvgPc7hkyBSyctxDk78KmhHAzUqR0LUpjXI3Xgki0QrGEWazE3RGZuLGl'</span><span>,</span>
        <span>),</span>
    <span>],</span>
<span>}</span>
</code></pre></div></div>

<p>You might notice that <code>scope</code> is not too different from a WSGI <code>environ</code>. In fact, ASGI interface is very similar to WSGI interface, but instead of getting a <code>environ</code> and <code>start_response</code> to send headers and using the return value of WSGI application as the response body, ASGI interfaces with the connection and allows us to receive and send messages multiple times during the lifecycle of the connection <strong>asynchronously</strong> until the connection is closed.  This allows a nice interface for both WebSocket and HTTP.</p>

<p>It’s also totally possible to wrap a WSGI application inside an ASGI application, just prepare a WSGI <code>environ</code> and <code>start_response</code> based on <code>scope</code>, <code>receive</code>, and <code>send</code> then call the WSGI application and it would work. If you delegate that call into a thread pool or something similar, you just made your WSGI application asynchronous. This is roughly how Channels wraps around Django.</p>

<h2 id="define-asgi-framework">Define ASGI framework</h2>
<p>When I say ASGI framework I refer it as a framework that makes building ASGI application easier and this does not include the ASGI server part. I’m mentioning this because some of the earlier Python asynchronous web frameworks have their own server implementation that also takes over tasks such as parsing  HTTP requests, handles network connections, etc. We are not doing those in ASGI web framework. As a spiritual successor to WSGI, where web servers, such as Gunicorn and uwsgi, and web frameworks, such as Flask and Django, are separated, ASGI has this separation too.</p>

<p>So, what does an ASGI application look like?</p>

<h3 id="asgi-hello-world">ASGI Hello World</h3>
<p>A simple ASGI hello world application can be written as:</p>
<div><div><pre><code><span>async</span> <span>def</span> <span>application</span><span>(</span><span>scope</span><span>,</span> <span>receive</span><span>,</span> <span>send</span><span>):</span>
    <span>name</span> <span>=</span> <span>scope</span><span>[</span><span>"path"</span><span>].</span><span>split</span><span>(</span><span>"/"</span><span>,</span> <span>1</span><span>)[</span><span>-</span><span>1</span><span>]</span> <span>or</span> <span>"world"</span>
    <span>await</span> <span>send</span><span>(</span>
        <span>{</span>
            <span>"type"</span><span>:</span> <span>"http.response.start"</span><span>,</span>
            <span>"status"</span><span>:</span> <span>200</span><span>,</span>
            <span>"headers"</span><span>:</span> <span>[[</span><span>b"content-type"</span><span>,</span> <span>b"text/plain"</span><span>],],</span>
        <span>}</span>
    <span>)</span>
    <span>await</span> <span>send</span><span>(</span>
        <span>{</span>
            <span>"type"</span><span>:</span> <span>"http.response.body"</span><span>,</span>
            <span>"body"</span><span>:</span> <span>f"Hello, </span><span>{</span><span>name</span><span>}</span><span>!"</span><span>.</span><span>encode</span><span>(),</span>
            <span>"more_body"</span><span>:</span> <span>False</span><span>,</span>
        <span>}</span>
    <span>)</span>
</code></pre></div></div>
<p><code>http.response.start</code> starts an HTTP response sending status code and response headers. In this example, it responds with the 200 OK status code and  has <code>content-type</code> set to <code>text/plain</code> in the headers.  <code>http.response.body</code> sends the response body, the <code>more_body</code> key tells the server if the response is finished. ASGI server might use this to know if a connection should be closed or automatically decide between a <code>content-length</code> header or a chunked encoding.</p>

<p>We can run the application with <a href="https://www.uvicorn.org/">uvicorn</a>:</p>
<div><div><pre><code>uvicorn asgi-hello:application
</code></pre></div></div>
<p>And you should be able to visit <code>http://localhost:8000/</code> and get <code>Hello, world</code>.Visiting <code>http://localhost:8000/tom</code> would get you <code>Hello, tom</code>.</p>

<blockquote>
  <p>By the way, uvicorn is pretty fast, a simple benchmark with <code>wrk -d10s http://localhost:8000/hi</code> on a 2018 lowest spec MacBook Air yields <code>Requests/sec:  27857.87</code>.</p>
</blockquote>

<p>Although this approach works with a simple hello world example, it’s not exactly convenient to write a more complex application this way. For one, it doesn’t do routing, if you want to respond differently for different paths, you’ll probably end up with a huge  <code>if ... else if ... else</code> clause. Secondly, having to write the ASGI message every time in the form of a python dict is quite arduous. Third, in a complex application, it gets harder to track the status of the connection, such as is the response started, is the response ended, should I start the response here, etc.</p>

<h3 id="goal">Goal</h3>
<p>With the new framework, I hope to be able to write an ASGI application like this:</p>
<div><div><pre><code><span>import</span> <span>asyncio</span>
<span>from</span> <span>aaf</span> <span>import</span> <span>aaf</span> <span># Another ASGI framework
</span><span>from</span> <span>aaf.routing</span> <span>import</span> <span>Router</span>
<span>from</span> <span>aaf.response</span> <span>import</span> <span>HttpResponse</span>

<span>router</span> <span>=</span> <span>Router</span><span>()</span>

<span>@</span><span>router</span><span>.</span><span>route</span><span>(</span><span>'/'</span><span>)</span>
<span>@</span><span>router</span><span>.</span><span>route</span><span>(</span><span>'/&lt;name&gt;'</span><span>)</span>
<span>async</span> <span>def</span> <span>hello</span><span>(</span><span>connection</span><span>,</span> <span>name</span><span>=</span><span>'world'</span><span>):</span>
	<span>return</span> <span>HttpResponse</span><span>(</span><span>f"Hello, </span><span>{</span><span>name</span><span>}</span><span>"</span><span>)</span>


<span>@</span><span>router</span><span>.</span><span>route</span><span>(</span><span>'/count'</span><span>)</span>
<span>@</span><span>router</span><span>.</span><span>route</span><span>(</span><span>'/count/&lt;int:number&gt;'</span><span>)</span>
<span>async</span> <span>def</span> <span>count</span><span>(</span><span>connection</span><span>,</span> <span>number</span><span>=</span><span>10</span><span>):</span>
	<span>for</span> <span>i</span> <span>in</span> <span>range</span><span>(</span><span>number</span><span>):</span>
		<span>await</span> <span>connection</span><span>.</span><span>send</span><span>(</span><span>f'count </span><span>{</span><span>i</span><span>}</span><span>\n</span><span>'</span><span>,</span> <span>finish</span><span>=</span><span>False</span><span>)</span>
		<span>await</span> <span>asyncio</span><span>.</span><span>sleep</span><span>(</span><span>1</span><span>)</span>
	<span>await</span> <span>connection</span><span>.</span><span>send</span><span>(</span><span>''</span><span>,</span> <span>finish</span><span>=</span><span>True</span><span>)</span>


<span>@</span><span>router</span><span>.</span><span>route</span><span>(</span><span>'/echo'</span><span>)</span>
<span>async</span> <span>def</span> <span>echo</span><span>(</span><span>connection</span><span>):</span>
	<span>body</span> <span>=</span> <span>await</span> <span>connection</span><span>.</span><span>body</span><span>()</span>
	<span>await</span> <span>connection</span><span>.</span><span>send</span><span>(</span><span>body</span><span>,</span> <span>finish</span><span>=</span><span>True</span><span>)</span>


<span>app</span> <span>=</span> <span>aaf</span><span>([</span><span>router</span><span>])</span>
</code></pre></div></div>
<p>I hope this snippet of how I want the framework to look like is self-explanatory. But here are some of the key things I want to achieve:</p>
<ol>
  <li>It should be able to handle HTTP response declaratively and imperatively.</li>
  <li>It should support Flask style routing with parameter parsing.</li>
</ol>


<h2 id="connection-class">Connection class</h2>
<p>The <code>Connection</code> class will represent an ASGI HTTP or WebSocket connection. It’s a class that encapsulates the three basic elements in ASGI, namely <code>scope</code>, <code>send</code> and <code>receive</code>, and expose some convenient methods and properties so that users don’t need to verbosely write out all the ASGI messages and parse everything, such as cookies and headers, from <code>scope</code>. But it should allow users to access the original <code>scope</code>, <code>send</code> and <code>receive</code> when they want to, so that the composability of ASGI applications is maintained. For example, it should allow user to delegate certain <code>connection</code>s to another ASGI application by calling <code>another_asgi_app(connection.scope, connectionn.asgi_send, connection.asgi_receive)</code>.</p>

<p>Here’s a simple implementation of the <code>Connection</code> class.</p>
<div><div><pre><code><span>from</span> <span>enum</span> <span>import</span> <span>Enum</span>
<span>from</span> <span>functools</span> <span>import</span> <span>cached_property</span>
<span>from</span> <span>http.cookies</span> <span>import</span> <span>SimpleCookie</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Any</span><span>,</span> <span>Awaitable</span><span>,</span> <span>Callable</span><span>,</span> <span>Optional</span><span>,</span> <span>Union</span>
<span>from</span> <span>urllib.parse</span> <span>import</span> <span>parse_qsl</span><span>,</span> <span>unquote_plus</span>

<span>from</span> <span>werkzeug.datastructures</span> <span>import</span> <span>Headers</span><span>,</span> <span>MultiDict</span>

<span>CoroutineFunction</span> <span>=</span> <span>Callable</span><span>[[</span><span>Any</span><span>],</span> <span>Awaitable</span><span>]</span>


<span>class</span> <span>ConnectionType</span><span>(</span><span>Enum</span><span>):</span>
    <span>HTTP</span> <span>=</span> <span>"HTTP"</span>
    <span>WebSocket</span> <span>=</span> <span>"WebSocket"</span>


<span>class</span> <span>Connection</span><span>:</span>
    <span>def</span> <span>__init__</span><span>(</span>
        <span>self</span><span>,</span> <span>scope</span><span>:</span> <span>dict</span><span>,</span> <span>*</span><span>,</span> <span>send</span><span>:</span> <span>CoroutineFunction</span><span>,</span> <span>receive</span><span>:</span> <span>CoroutineFunction</span>
    <span>):</span>
        <span>self</span><span>.</span><span>scope</span> <span>=</span> <span>scope</span>
        <span>self</span><span>.</span><span>asgi_send</span> <span>=</span> <span>send</span>
        <span>self</span><span>.</span><span>asgi_receive</span> <span>=</span> <span>receive</span>

        <span>self</span><span>.</span><span>started</span> <span>=</span> <span>False</span>
        <span>self</span><span>.</span><span>finished</span> <span>=</span> <span>False</span>
        <span>self</span><span>.</span><span>resp_headers</span> <span>=</span> <span>Headers</span><span>()</span>
        <span>self</span><span>.</span><span>resp_cookies</span><span>:</span> <span>SimpleCookie</span> <span>=</span> <span>SimpleCookie</span><span>()</span>
        <span>self</span><span>.</span><span>resp_status_code</span><span>:</span> <span>Optional</span><span>[</span><span>int</span><span>]</span> <span>=</span> <span>None</span>

        <span>self</span><span>.</span><span>http_body</span> <span>=</span> <span>b""</span>
        <span>self</span><span>.</span><span>http_has_more_body</span> <span>=</span> <span>True</span>
        <span>self</span><span>.</span><span>http_received_body_length</span> <span>=</span> <span>0</span>

    <span>@</span><span>cached_property</span>
    <span>def</span> <span>req_headers</span><span>(</span><span>self</span><span>)</span> <span>-&gt;</span> <span>Headers</span><span>:</span>
        <span>headers</span> <span>=</span> <span>Headers</span><span>()</span>
        <span>for</span> <span>(</span><span>k</span><span>,</span> <span>v</span><span>)</span> <span>in</span> <span>self</span><span>.</span><span>scope</span><span>[</span><span>"headers"</span><span>]:</span>
            <span>headers</span><span>.</span><span>add</span><span>(</span><span>k</span><span>.</span><span>decode</span><span>(</span><span>"ascii"</span><span>),</span> <span>v</span><span>.</span><span>decode</span><span>(</span><span>"ascii"</span><span>))</span>
        <span>return</span> <span>headers</span>

    <span>@</span><span>cached_property</span>
    <span>def</span> <span>req_cookies</span><span>(</span><span>self</span><span>)</span> <span>-&gt;</span> <span>SimpleCookie</span><span>:</span>
        <span>cookie</span> <span>=</span> <span>SimpleCookie</span><span>()</span>
        <span>cookie</span><span>.</span><span>load</span><span>(</span><span>self</span><span>.</span><span>req_headers</span><span>.</span><span>get</span><span>(</span><span>"cookie"</span><span>,</span> <span>{}))</span>
        <span>return</span> <span>cookie</span>

    <span>@</span><span>cached_property</span>
    <span>def</span> <span>type</span><span>(</span><span>self</span><span>)</span> <span>-&gt;</span> <span>ConnectionType</span><span>:</span>
        <span>return</span> <span>(</span>
            <span>ConnectionType</span><span>.</span><span>WebSocket</span>
            <span>if</span> <span>self</span><span>.</span><span>scope</span><span>.</span><span>get</span><span>(</span><span>"type"</span><span>)</span> <span>==</span> <span>"websocket"</span>
            <span>else</span> <span>ConnectionType</span><span>.</span><span>HTTP</span>
        <span>)</span>

    <span>@</span><span>cached_property</span>
    <span>def</span> <span>method</span><span>(</span><span>self</span><span>)</span> <span>-&gt;</span> <span>str</span><span>:</span>
        <span>return</span> <span>self</span><span>.</span><span>scope</span><span>[</span><span>"method"</span><span>]</span>

    <span>@</span><span>cached_property</span>
    <span>def</span> <span>path</span><span>(</span><span>self</span><span>)</span> <span>-&gt;</span> <span>str</span><span>:</span>
        <span>return</span> <span>self</span><span>.</span><span>sc…</span></code></pre></div></div></div></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://shenli.dev/2020/06/20/asgi-from-scratch.html">https://shenli.dev/2020/06/20/asgi-from-scratch.html</a></em></p>]]>
            </description>
            <link>https://shenli.dev/2020/06/20/asgi-from-scratch.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23644252</guid>
            <pubDate>Thu, 25 Jun 2020 19:04:52 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Testers vs. TDD]]>
            </title>
            <description>
<![CDATA[
Score 26 | Comments 45 (<a href="https://news.ycombinator.com/item?id=23644228">thread link</a>) | @ohjeez
<br/>
June 25, 2020 | https://www.functionize.com/blog/testers-vs-tdd | <a href="https://web.archive.org/web/*/https://www.functionize.com/blog/testers-vs-tdd">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
          <p><img width="1080" height="634" src="https://3laqvw22wekb3ykm8z4dbnq8-wpengine.netdna-ssl.com/wp-content/uploads/2020/06/TDD-vs-Testers2.jpg" alt="Testers vs TDD" srcset="https://www.functionize.com/wp-content/uploads/2020/06/TDD-vs-Testers2.jpg 1080w, https://www.functionize.com/wp-content/uploads/2020/06/TDD-vs-Testers2-300x176.jpg 300w, https://www.functionize.com/wp-content/uploads/2020/06/TDD-vs-Testers2-1024x601.jpg 1024w, https://www.functionize.com/wp-content/uploads/2020/06/TDD-vs-Testers2-768x451.jpg 768w" sizes="(max-width: 1080px) 100vw, 1080px">      </p>	  
    
        <blockquote><p>Test-driven development was supposed to eliminate the need for independent testing. Alas, it doesn’t go far enough.</p></blockquote>
<p>Test-driven development (TDD) earned a reputation of making software more robust. Does that mean you can fire all the testers? Spoiler: No.</p>
<p><a href="https://martinfowler.com/bliki/TestDrivenDevelopment.html" target="blank" rel="noopener noreferrer">Test-driven development</a> is a method for writing software in small chunks. You start with a test, then write functional code to make the test pass, and finally refactor the functional code to clean it up. The idea of TDD was proposed by <a href="https://amzn.to/3doabIA" target="blank" rel="noopener noreferrer">Kent Beck</a> in the early 1990s, as part of Extreme Programming, an Agile software development methodology.</p>
<p>TDD is sometimes summarized as “Red, Green, Refactor.” The interfaces on many testing harnesses, such as JUnit (for Java) and NUnit (for .NET), show red lights when tests fail and green lights when tests pass. There’s another step to consider, however. You need to think about the desired behavior and carve out a small chunk of code – typically five lines – to implement next.</p>
<p>As proposed by Beck, in TDD you never write functional code until you have a failing test. Yet, it takes practice to learn to write the tests first (rather than after the fact); developers often have trouble shifting their habitual way of working. Writing the tests before the functional code just feels <em>wrong.</em> You do get used to it, though it may take months; by then it starts feeling <em>right</em>.</p>
<p>The <a href="https://www.functionize.com/blog/what-is-test-driven-development-tdd/">biggest benefit of TDD</a> is that it removes the fear of breaking your code. As you add unit tests and functional code, you also build <a href="https://www.functionize.com/blog/dont-fail-your-next-interview-know-what-differentiates-regression-testing-from-retesting/">a library of regression tests</a> that you run frequently. When you add a new feature, fix a bug, or refactor to clean up your code, running the tests again reassures you that you didn’t break anything. Or at least it confirms that you didn’t break any of the tests that <em>you</em> wrote.</p>
<h3>What do testers bring to the table?</h3>
<p>Software managers are sometimes tempted to eliminate or reduce software QA departments when the coders adopt TDD, on the grounds that the programmers are also writing tests. That decision usually is a mistake, because <a href="https://www.functionize.com/blog/five-must-have-skills-to-look-for-in-a-qa-tester/">testers provide value</a> outside of the developers’ unit tests.</p>
<p>Unit tests are only one of the kinds of tests needed to adequately cover modern code. TDD developers rarely write end-to-end integration tests. They may avoid writing unit tests that require significant setup or that rely on other software components, such as a populated database.</p>
<p>Dedicated testers are more likely than coders to take the time to perform exploratory (ad-hoc) testing, which can find bugs that weren’t imagined during the development of the code. Testers also come to the product with fresh eyes compared to the coders who have been immersed in the software for long hours.</p>
<p>Additionally, software developers often are not interested in setting up CI/CD tooling or in organizing the team’s tests into a master regression test. Testers consider all of that to be part of the job. Developers may not be involved in implementing shift left testing beyond TDD. &nbsp;For shift left testing, testers can gather information, help with requirements management, and help to define the acceptance criteria, before a single test or line of functional code is complete.</p>
<h3>What bugs do testers find that TDD doesn’t?</h3>
<p>Security is one large, important testing area that isn’t normally addressed by writing unit tests. Testers look for security flaws with automated vulnerability testing tools, manual security assessments, penetration tests, security audits, and security reviews.</p>
<p>It’s difficult for developers to write <a href="https://www.functionize.com/blog/the-challenges-of-testing-guis/">unit tests to test GUIs</a>. Instead, testers use automation tools specific to the supported application environments, such as browsers, desktop applications, and mobile apps.</p>
<p>Developers can have a hard time with hardware-dependent bugs, as the dominant way of working is for a coder to work on a single machine. QA departments often collect rooms full of varied computers and devices, as well as images of many operating system versions. An alternative way of testing on many different model devices is to use a crowd-sourced testing service.</p>
<p>While TDD can theoretically catch bugs in edge cases, they are called “edge cases” for a good reason. When a coder designs the tests for a function point, obscure edge cases may escape notice in the heat of the moment. Testers are more likely to find these than are the coders who wrote the software.</p>
<p>Similarly, cross-module flaws can sometimes escape scrutiny in unit tests. They can easily arise when one programmer misunderstands the interface or boundary conditions of another programmer’s module. Cross-module bugs are often found during end-to-end testing and ad-hoc testing.</p>
<p>In summary, while there’s a lot to be said for TDD as a development practice, it doesn’t usually provide complete test coverage of your code. For that, you still need testers.</p>
<blockquote><p>Whoever writes the test cases, it makes sense to follow established guidelines. <a href="https://www.functionize.com/project/best-practices-for-effective-test-case-writing/">These</a> might help.</p></blockquote>
<div>
<div>
<p><img src="https://3laqvw22wekb3ykm8z4dbnq8-wpengine.netdna-ssl.com/wp-content/uploads/2020/02/author-Martin-Heller.jpg" alt="Martin Heller"></p>
<div>
<p><span>by</span> Martin Heller</p>
<p>Martin Heller is a freelance writer. Formerly a web and Windows programming consultant, he developed databases, software, and websites from 1986 to 2010. More recently, he has served as VP of technology and education at Alpha Software and chairman and CEO at Tubifi.</p>
</div>

</div>
</div>
<!-- AddThis Advanced Settings above via filter on the_content --><!-- AddThis Advanced Settings below via filter on the_content --><!-- AddThis Advanced Settings generic via filter on the_content --><!-- AddThis Share Buttons above via filter on the_content --><!-- AddThis Share Buttons below via filter on the_content --><!-- AddThis Share Buttons generic via filter on the_content -->  </div></div>]]>
            </description>
            <link>https://www.functionize.com/blog/testers-vs-tdd</link>
            <guid isPermaLink="false">hacker-news-small-sites-23644228</guid>
            <pubDate>Thu, 25 Jun 2020 19:02:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to Build a Culture of Delivery with Lean DevOps]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 1 (<a href="https://news.ycombinator.com/item?id=23643341">thread link</a>) | @jacksonpollock
<br/>
June 25, 2020 | https://cto.ai/blog/build-a-culture-of-delivery-with-lean-devops/ | <a href="https://web.archive.org/web/*/https://cto.ai/blog/build-a-culture-of-delivery-with-lean-devops/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
			<!-- .cover -->
			<div>
				<p>You've probably heard of a Lean Startup approach to building a business, but what about a Lean DevOps approach to scaling your development team?</p><p>To explain the difference between traditional DevOps and Lean DevOps, let's start at a cloud's eye view and work our way down.</p><p>The definition of traditional DevOps, as defined by <a href="https://aws.amazon.com/devops/what-is-devops/#:~:text=DevOps%20is%20the%20combination%20of,development%20and%20infrastructure%20management%20processes.">AWS</a>, is:</p><blockquote>DevOps is the combination of cultural philosophies, practices, and tools that increases an organization’s ability to deliver applications and services at high velocity: evolving and improving products at a faster pace than organizations using traditional software development and infrastructure management processes.</blockquote><!--kg-card-begin: image--><figure><img src="https://cto.ai/blog/content/images/2020/06/traditional-devopscycle-cto.ai.png"></figure><!--kg-card-end: image--><p>Lean DevOps makes a key distinction in the fact that it aims to not just bring velocity to the surface, but also simplicity. As such, Lean DevOps is defined as:</p><blockquote><em>Lean DevOps is a development philosophy that focuses on both velocity and simplicity via a combination of culture, best practices, and workflow automation tools.</em></blockquote><!--kg-card-begin: image--><figure><img src="https://cto.ai/blog/content/images/2020/06/lean-devops-cto.ai.png"></figure><!--kg-card-end: image--><p>Not only is traditional DevOps a major challenge for small companies trying to compete for skilled people, but those same startups also have the most promising opportunity to scale DevOps as part of their organizational structure and culture. In doing so, DevOps can be optimized using a lattice-style team philosophy where generalists and specialists are both leveraged and nurtured.</p><p>And Lean DevOps works. The <a href="https://puppet.com/resources/report/state-of-devops-report/">2019 State of DevOps Report</a> showed that companies who have high performing DevOps programs deploy software not only <strong>200 times more frequently</strong>, but also have <strong>2,555 times faster lead times</strong> for their projects. In addition, they also <strong>recover 24 times faster from failed changes</strong>, with <strong>three times lower change fail rates</strong>.</p><p>That equates to not just faster development, but faster business. You’ll reach milestones, OKRs, and goals earlier, and before your competition does. Thus, bringing developer tools into the realm of revenue generation and not just cost savings.</p><h2 id="-300b-in-lost-developer-productivity">$300B in Lost Developer Productivity</h2><!--kg-card-begin: image--><figure><img src="https://cto.ai/blog/content/images/2020/06/dev-productivity_cto.ai-2.png"></figure><!--kg-card-end: image--><p>Currently, DevOps is fragmented across innumerable tools and technologies. Developers have also been tasked with workflow automation, but this burns valuable time that could be used to build features for paying customers.</p><h3 id="often-you-ll-see-two-main-devops-challenges-">Often you’ll see two main DevOps challenges:</h3><ol><li><strong>Many companies struggle to adopt DevOps practices.</strong></li><li><strong>DevOps tools are far more complex than ever before.</strong></li></ol><p>That’s why <a href="https://stripe.com/reports/developer-coefficient-2018">$300 billion in developer productivity is lost every single year</a> within growing development teams.</p><p>Technical leaders know that, as their teams grow, it is critical to invest in the workflows that their teams require to work. However, it can be too time-consuming to allocate their critical internal resources.</p><p>That’s why a Lean DevOps approach is so important. It allows teams to remain lean, automate repeated workflows, and use tools and behaviors that increase simplicity and velocity.</p><h2 id="the-10x-engineer-is-dead">The 10X Engineer Is Dead</h2><!--kg-card-begin: image--><figure><img src="https://cto.ai/blog/content/images/2020/06/10x-engineer-cto.ai.png"></figure><!--kg-card-end: image--><p>And that’s why the 10X engineer is dead. Or, more appropriately, they never existed. However, a team’s ability to have a 10X impact is still very much alive.</p><p>Taking a Lean DevOps philosophy can work the same magic, but instead, focus on making a team of five engineers 2X as productive.</p><p>All they need to do is build the right culture, utilize industry best practices, and implement the best tools.</p><p>You can also consider building an organizational structure that unblocks your team like a lattice formation (pictured above) or holocracy-style team makeup that promotes a flat organization with limited bureaucracy and decentralized management.</p><p>These are frameworks for encoding autonomy, agility, and purpose-alignment into your organization's DNA.</p><h2 id="5-ways-to-build-a-culture-of-delivery">5 Ways to Build a Culture of Delivery</h2><!--kg-card-begin: image--><figure><img src="https://cto.ai/blog/content/images/2020/06/teamvelocity-process-cto.ai.png"></figure><!--kg-card-end: image--><p>So, how do I move to the Lean DevOps light, you ask? Well, here are five steps to follow while implementing and scaling your lean culture.</p><ol><li><strong>Stick with lean process for as long as possible.</strong> Don’t give in until it’s the right moment. Stay lean allows you to move quickly in the early stages of a company.</li><li><strong><strong><strong>Choose boring technology, invest wisely. </strong></strong></strong>Take time to pick the tools that increase simplicity in your workflows.</li><li><strong><strong><strong>Onboarding sets expectations. </strong></strong></strong>Don’t just drop a new tool at your team’s feet. Implement a rollout plan and lay out the education with it.</li><li><strong><strong><strong>Create a platform for success. </strong></strong></strong>Lead by example to live and breath your new-found Lean DevOps philosophy.</li><li><strong><strong><strong>ICE: Impact + Confidence / Effort. </strong></strong></strong>Balance your workload by debating with data and leveraging your highest value initiatives.</li></ol><p>Take the time necessary to get buy-in for a culture shift from your team. It's never easy, but if you do it right in the beginning the effects will become much more ingrained in your sprints.</p><h2 id="scaling-with-lean-devops">Scaling with Lean DevOps</h2><!--kg-card-begin: image--><figure><img src="https://cto.ai/blog/content/images/2020/06/devops-over-time-cto.ai.png"></figure><!--kg-card-end: image--><p>Remember, as your team scales you’ll move from a flatter organization to an Agile matrix one.</p><p>This will also affect your team velocity as process complexity increases.</p><p>So, as you scale, here are ways to stay within the Lean DevOps methodology:</p><ul><li><strong><strong><strong>Stay flat, fewer managers. </strong></strong></strong>Maintain accountability through transparency via tools like Slack and its companion app marketplace.</li><li><strong><strong><strong>Strategic vertical workstreams. </strong></strong></strong>Track product milestones in tools like Jira to provide visibility and a longer-term vision.</li><li><strong><strong><strong>Holistic horizontal specialization. </strong></strong></strong>Think about research and development, security, and codebase specialization as wide thoughts that span business functions.</li><li><strong><strong><strong>Don’t lose the ability to build a generalist culture. </strong></strong></strong>A team of polymaths will aide your problem solving and creative thinking.</li></ul><p>At the end of the day, there is no perfect process, but a combination of assets.</p><p>Tools with bottom-up adoption, a flat organizational structure to speed things up, adaptability, and a balance between velocity and stability are your targets.</p><p>Welcome to the delivery culture of Lean DevOps. Your team will thank you.</p><p>***</p><p><em>To learn about Lean DevOps in video form press play below.</em></p><!--kg-card-begin: embed--><figure><iframe width="480" height="270" src="https://www.youtube.com/embed/-4Q6xEeVYSY?feature=oembed" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></figure><!--kg-card-end: embed-->
			</div><!-- .post-content -->
			<!-- .post-footer -->
		</article></div>]]>
            </description>
            <link>https://cto.ai/blog/build-a-culture-of-delivery-with-lean-devops/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23643341</guid>
            <pubDate>Thu, 25 Jun 2020 17:43:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A mathematical formula that predicts US elections with 87.5% accuracy]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 27 (<a href="https://news.ycombinator.com/item?id=23643050">thread link</a>) | @bnveg
<br/>
June 25, 2020 | https://turingbotsoftware.com/posts/us-election-prediction.html | <a href="https://web.archive.org/web/*/https://turingbotsoftware.com/posts/us-election-prediction.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>              <p>ceil(cos(0.996479*x*((-0.0830122)*(log(x)*(1.58953e-05-x)))))</p>              <p>The formula above, obtained using a Symbolic Regression procedure, has an out-of-sample accuracy of 87.5% in predicting which party will win the US presidential elections in a given year.</p>              </div><div>              <h2>How it was generated</h2><p>The rationale behind this formula was to try to obtain a mathematical expression that classifies which party (Democrat or Republican) will win the US presidential elections in a given election year.</p><p>To train the model, we looked at all the US elections in the last 100 years, and generated a table where at each row the first column is the year, and the second is 0 if the winning candidate was a Democrat and 1 if the candidate was a Republican. These are the last rows in that table:</p><pre>1992 0
1996 0
2000 1
2004 1
2008 0
2012 0
2016 1
</pre><p>The full table can be found <a href="https://turingbotsoftware.com/data/presidents_numbers.txt">here</a>.</p><p>Then, to generate the model, we used the Symbolic Regression software TuringBot. The chosen search metric was classification accuracy, and a 70/30 train/test split was used to reduce the chance of overfitting. The split was sequential: the oldest years were used for the training, and the most recent ones were used for the cross-validation.</p><p>These are the models that were found, along with their corresponding out-of-sample classification accuracies:</p>              <p><img src="https://turingbotsoftware.com/images/president_model.png"></p><p>In these formulas, x is the election year (2012, 2016, 2020, etc). The best formula turned out to be <span>ceil(cos(0.996479*x*((-0.0830122)*(log(x)*(1.58953e-05-x)))))</span>. Its accuracy in the training split is 94.11%, and in the test split 87.5%.</p>              <h2>The prediction for 2020</h2><p>Calculating the formula above at x = 2020, we find that the result is 1. This means that the formula predicts that a Republican is likely to win the elections.</p>              <h2>The prediction for the next elections</h2><p>We can also calculate the formula for the next elections. These are the results:</p><pre>2024: Democrat
2028: Republican
2032: Republican
</pre><p>It should be noted that the accuracy of the model is expected to degrade the further you go into the future.</p>              </div></div>]]>
            </description>
            <link>https://turingbotsoftware.com/posts/us-election-prediction.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23643050</guid>
            <pubDate>Thu, 25 Jun 2020 17:22:31 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A UX approach to video meeting fatigue]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=23642756">thread link</a>) | @dxchester
<br/>
June 25, 2020 | https://team.video/blog/camera | <a href="https://web.archive.org/web/*/https://team.video/blog/camera">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <p><img src="https://team.video/uploads/camera-on-or-off.jpg" alt=""></p>

<section data-level="1" id="camera-on-or-off-a-ux-approach-to-video-meeting-fatigue">

<section data-level="3" id="video-conferencing-is-the-new-office-living-room-dinner-table-doctors-office-"><h3>Video conferencing is the new office / living room / dinner table / doctors office...</h3>
<p>As the spaces of our social lives have transitioned to a limited number of software interfaces, fatigue and burnout has skyrocketed taxing our mental health and productivity. While video conferencing apps are keeping us employed and connected, they are not prepared to handle this mass shift in our daily routines and social interactions. </p>

</section>
<section data-level="3" id="what-makes-video-conferencing-so-different-"><h3>What makes video conferencing so different?</h3>
<p>When we spend our days sitting in our makeshift offices and personal spaces staring at our coworkers, friends, doctors, teachers and families (and don’t forget ourselves!) in little boxes on our screens we miss so much of the social experience of real face to face interactions. We’re unable to read body language, engage in normal social rituals, have serendipitous conversations—to move!</p>
<p>We’re also responding to a unending amount of new information that our brains need to process—our personal lives surrounding us at home, the apartments and houses of our coworkers and their personal lives happening around them, the host of distractions on our desktops and the lure of almost unnoticeable multitasking. </p>
<p><img src="https://team.video/uploads/camera-ui.jpg" alt=""></p>

</section>
<section data-level="3" id="can-the-design-of-our-meeting-software-help-"><h3>Can the design of our meeting software help?</h3>
<p>As a UX designer working to build a video conferencing platform, it’s been crucial to acknowledge the limitations of the medium in hopes of easing some of the fatigue with features designed not to replicate in person communication but to uncover and build on the strengths of a relatively new space.    </p>

</section>
<section data-level="3" id="improving-our-new-space-the-meeting-room"><h3>Improving our new space - The meeting room</h3>
<p>We spend so much care and effort creating the physical spaces we occupy, and these spaces have a known effect on our mental health as well as our productivity, creativity and sociablility. A black box filled with poor quality images littered with icons can feel like spending all day in a messy room with no windows—of course we’re exhausted after a day of video meetings! But what can we do to make these new rooms feel like  sleek, light filled rooms with all the personal touches that we invest so much thought into? </p>
<p><img src="https://team.video/uploads/camera-meetingroom.jpg" alt=""></p>
<p>The furniture, if you will, of these new spaces is entirely different. Instead of tables, whiteboards and light switches we have new furniture that has to replicate everything else missing from in person interaction—all those icons littered about. Unmute is the desk of a virtual meeting room.</p>
<p>Designing meetings rooms for Team.video has strived to take into account interior design principles as well as UX best practices. Does a glaring red mute icon create more stress and visual clutter than it provides important functional information? Our process has been one of many iterations, focusing on light colors, subtle gradients and subdued accents.</p>

</section>
<section data-level="3" id="camera-on-or-off-"><h3>Camera on or off?</h3>
<p>We’ve never been more aware of the green light at the top of our screens. In almost daily research sessions over the past few months I've yet to encounter a team that has found the golden solution to the camera on or off question. </p>
<p>Companies that had a camera on policy have switched to camera optional and those with a camera optional approach have switched to camera on. Some teams use cameras only for smaller meetings or only require those speaking to use video. </p>
<p>Camera off can feel less personal but also removes the need to process so many different faces and backgrounds at once. While being on camera for the majority of a day is incredibly exhausting and not always necessary for productive work meetings. </p>
<ul>
<li>There is probably no golden solution, but some design attention can greatly improve both sides of the coin. </li>
<li>A more aesthetically pleasing camera off view that still includes the face of a coworker and a signal when/that they are speaking. </li>
<li>Flexible layouts for different scenarios—one speaker, a handful of speakers, screenshare brainstorm etc. </li>
<li>The option to hide or minimize your own video. </li>
<li>Blurred or custom backgrounds for camera on mode—which can be a lot of fun and also a potential new distraction. </li>
</ul>
<p><img src="https://team.video/uploads/cameraonoroff.png" alt=""></p>

</section>

<section data-level="3" id="meetings-start-very-abruptly"><h3>Meetings start VERY abruptly</h3>
<p>All of a sudden you’re face to face with an unfamiliar coworker, from your bedroom...and the person who called the meeting is running late. This scenario is unique to telecommuting. Maybe you regularly walk to the conference room with a coworker, or you introduce yourself politely and take the first few minutes of a meeting to fill your water bottle while everyone else arrives. </p>
<p>All of this is much more awkward over video. Small talk is less natural with mute/unmute issues, lack of non verbal cues and often bandwidth time delays. Widespread goals to keep meetings efficient encourage us to get straight to the point, which can be jarring. </p>
<p>How can UX help those first few meeting minutes? </p>
<ul>
<li>It’s important to know who is already in the meeting before you join so you can decide if you want to be one on one with a C level you’ve never met. </li>
<li>Arrive looking (and sounding!) your best with a pre-meeting ‘haircheck’ where meeting goers can check their audio/video before entering the meeting</li>
<li>Low effort social interaction built in to the welcome minutes. At team.video we’ve implemented an optional word game that early arrivers can play against each other in lieu of or in addition to any amount of small talk. </li>
</ul>
<p><img src="https://team.video/uploads/camera-haircheck.jpg" alt=""></p>
<p><img src="https://team.video/uploads/camera-game.jpg" alt=""></p>

</section>
<section data-level="3" id="keep-trying-new-things-"><h3>Keep trying new things!</h3>
<p>Design is always about observing, trying and testing. With team.video we’ve been able to explore some ideas larger companies have not and we’d love to hear any thoughts or issues that you’ve encountered in our software or others! </p>
<p>Try us out at <a href="https://team.video/">Team.Video</a></p>

</section>
</section>
    </div></div>]]>
            </description>
            <link>https://team.video/blog/camera</link>
            <guid isPermaLink="false">hacker-news-small-sites-23642756</guid>
            <pubDate>Thu, 25 Jun 2020 16:57:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How we launched our MVP in 3 weeks]]>
            </title>
            <description>
<![CDATA[
Score 47 | Comments 62 (<a href="https://news.ycombinator.com/item?id=23642739">thread link</a>) | @adamthewan
<br/>
June 25, 2020 | https://adamthewan.com/blog/meetbutter/how-we-built-meetbutter-three-weeks/ | <a href="https://web.archive.org/web/*/https://adamthewan.com/blog/meetbutter/how-we-built-meetbutter-three-weeks/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAADWElEQVQozxWT21MaBxTG95/oUx/71ulDM2msjk2nLRgcjZHEiRgpiQmiIVgUlmyAhb3Ccr8srMsdFpQFuQaQBBMTBLWY6Ux0Js3UNu3YPnQy0z+gY966fT5n5vu+8/0OwFLNsK2hVyQQTRTTciGy7oWr61TTj1Rdxi2WapXS/Q12l7E1AkgtHewkfU8rmX4+8iIV6AAhok7jda8lGiJZy4OkDaRJXQJfzbtNJQrkfZZKxNGMOBsvW697nZO3x2cnr/4Ikw27ng+Rj4EG/9PZu9edWoWyriLmzw0qC41vMfaWx1wWlClD3gmVaWyXYwYJ/0GW2a9m+x64LFiLedpA98mbEldDtTYYvIpaP7FocYeh7oG3PHCpmOim/AcRdymfflDM3SznZ7z4HUjJuYxFO8iTujwA3UuszUdtIFPJ/vh8e4exR2mkJYzNy1wx1X1cdpz9Lvpw/umT9se7ux9tcJ9ZNSmTKmPTbzJkAyBBXnbNu3I/W6gfRJotjXtdrvLoFtMRdysT/eHD+Y3zf794//fUu9+g/R7pd/jvSZ3626xwlKT/KbB4NykWuS9esI4pLTMO83Uc/k6KjYzYKaLFsZk4q0jHR/Z7NyNeBlri0sHa4Yt+LJiGV9ij7ikwLnVMLhBDw8jQEDqxiImniWkJI5Xio5ehWalFPg7Lpx7JJbBiGuYjeVSNbwbT/5z+lVnnc+wOcG3RNqnEL11Ev5lCpXp88j4qvkWMjC6Pjq2JrtogZUqnYMHbybSv0Mm1VPNzQYQ4qh52O2Wt3A+IRc4vL+CiWcTMs9ZCTBawyGn0soicGA/eWYiZVnJZ+plBGSfU4Vq48ufR4dnhyUErx4a/tmpigEjkGL6Ea/F4utlRm6LXH2FXZomvJEgmt/fr6ftB75ds+BlLbRuX44a7bo8p4rPGQKXdrA4L/ACjI6T4BoFns1AgNSdjr4y5hoexGQPZe3s8eHXqs1Yx7UZ/503M1V6S0msKtrk1IHS8eYn7v2cpiMoo9JYXlUGUZNw1MW9XOXxC+NUQAy7FoYWEQFIAqyOarLAdc7f56EujMomscDHPNjDnxGROdM6FyezYtxJC/3Bzp3+sUIeU39OW5Qz1sOgylgT+C4luMbknPAON1e1gIeFrD/Z+/g9UCcPcvxQNXAAAAABJRU5ErkJggg==" alt="Cover"></p></div><div><div><div><p>This should be </p><!-- --><p>an</p><!-- --> <!-- --><p>11 min read</p><p>June 12, 2020</p></div></div><p><img src="https://adamthewan.com/static/adam-head-0b2b466e69071c2bd52efa9911165bc6.png"></p></div><p>Usually, when people think about building and launching a startup, they plan it out a few weeks in advance. In my experience doing software consulting, I’ve seen and worked on some projects where the founders take 2 - 3 months to launch the first version of their product. That’s too much time and effort sunk into a project that may not work.</p><h2>Why you need to get your Minimum Viable Product out ASAP</h2><p>The problem is that most people are not comfortable with launching a minimum viable product. Founders are often creative people who love to explore and dive into “wouldn’t it be cool if”s. This habit can result in a continuous loop of adding features, even before the first version of your product is released.</p><p>Perfectionism can often get in the way of execution, and I’ve fallen for this trap many times. My first product (SideQuest) took me four months to build and launch. To continue developing an untested product is, to put it bluntly, arrogant. Here’s why: it assumes that what you are making is vital for your customer. It assumes that you know what’s best for your user. You don’t.</p><figure>
    <span>
      <a href="https://adamthewan.com/static/bf4b544235b8f033c381798a61ce5e33/c1b63/reiterations.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="Image: What your startup journey will probably look like" title="Image: What your startup journey will probably look like" src="https://adamthewan.com/static/bf4b544235b8f033c381798a61ce5e33/fcda8/reiterations.png" srcset="https://adamthewan.com/static/bf4b544235b8f033c381798a61ce5e33/12f09/reiterations.png 148w,https://adamthewan.com/static/bf4b544235b8f033c381798a61ce5e33/e4a3f/reiterations.png 295w,https://adamthewan.com/static/bf4b544235b8f033c381798a61ce5e33/fcda8/reiterations.png 590w,https://adamthewan.com/static/bf4b544235b8f033c381798a61ce5e33/efc66/reiterations.png 885w,https://adamthewan.com/static/bf4b544235b8f033c381798a61ce5e33/c83ae/reiterations.png 1180w,https://adamthewan.com/static/bf4b544235b8f033c381798a61ce5e33/c1b63/reiterations.png 1200w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span>
    <figcaption>Image: What your startup journey will probably look like</figcaption>
  </figure><p>No founder knows until they launch their startup and get feedback from people. Your first version is likely going to suck; it might even miss the mark or be utterly irrelevant to the market. You need to get any negative and positive signals from your target market as soon as possible.</p><p>That was what we tried to do with MeetButter. Everyone on our team has had experience getting burnt by wasting time, runway, effort, and emotion building products or features that were inconsequential in the larger picture.</p><p>Here’s the story of how we managed to build and ship MeetButter in three weeks.</p><h3>Step 1 - Identification</h3><figure>
    <span>
      <a href="https://adamthewan.com/static/bb7bc5be7eb59accce1ffcd6b43444df/c1b63/slack-discussion.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="It started with a thread" title="It started with a thread" src="https://adamthewan.com/static/bb7bc5be7eb59accce1ffcd6b43444df/fcda8/slack-discussion.png" srcset="https://adamthewan.com/static/bb7bc5be7eb59accce1ffcd6b43444df/12f09/slack-discussion.png 148w,https://adamthewan.com/static/bb7bc5be7eb59accce1ffcd6b43444df/e4a3f/slack-discussion.png 295w,https://adamthewan.com/static/bb7bc5be7eb59accce1ffcd6b43444df/fcda8/slack-discussion.png 590w,https://adamthewan.com/static/bb7bc5be7eb59accce1ffcd6b43444df/efc66/slack-discussion.png 885w,https://adamthewan.com/static/bb7bc5be7eb59accce1ffcd6b43444df/c83ae/slack-discussion.png 1180w,https://adamthewan.com/static/bb7bc5be7eb59accce1ffcd6b43444df/c1b63/slack-discussion.png 1200w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span>
    <figcaption>It started with a thread</figcaption>
  </figure><p>The first spark for MeetButter was a Slack thread discussing the pains teachers and educators were dealing with transitioning their classrooms from offline to online. We found that there was a very human problem with online video conferencing - they only allowed the focus to one speaker at a time. It was awkward interrupting the speaker, and this caused some participants to feel reluctant to engage. The discussion thread grew, with more anecdotes and feedback from our friends and family.</p><p>Identifying the problem is the first step. It’s crucial to figure out the groups of people that are facing the same issues and gathering feedback from them. </p><h3>Step 2 - Investigation</h3><p>We decided to take this asynchronous discussion and organize a synchronous brainstorm session. During this particular session, we discussed three significant problems that we had identified and were interested in solving. On the list was the aforementioned “video conferencing” - which eventually became MeetButter.</p><figure>
    <span>
      <a href="https://adamthewan.com/static/a39386985de85513d6f9d5134921e3f4/c1b63/brainstorm.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="Breaking down the current video conferencing experience" title="Breaking down the current video conferencing experience" src="https://adamthewan.com/static/a39386985de85513d6f9d5134921e3f4/fcda8/brainstorm.png" srcset="https://adamthewan.com/static/a39386985de85513d6f9d5134921e3f4/12f09/brainstorm.png 148w,https://adamthewan.com/static/a39386985de85513d6f9d5134921e3f4/e4a3f/brainstorm.png 295w,https://adamthewan.com/static/a39386985de85513d6f9d5134921e3f4/fcda8/brainstorm.png 590w,https://adamthewan.com/static/a39386985de85513d6f9d5134921e3f4/efc66/brainstorm.png 885w,https://adamthewan.com/static/a39386985de85513d6f9d5134921e3f4/c83ae/brainstorm.png 1180w,https://adamthewan.com/static/a39386985de85513d6f9d5134921e3f4/c1b63/brainstorm.png 1200w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span>
    <figcaption>Breaking down the current video conferencing experience</figcaption>
  </figure><p>Some significant points were brought up by everyone on the team, and we found that these were problems that each one of us had faced while doing online video conferencing:</p><ol><li>It’s difficult to indicate an interest in speaking, reply to the current conversation, or add to the discussion without feeling like you’re interrupting the current speaker.</li><li>It’s impossible to transition smoothly between one speaker to the next. Sometimes mid-sentence pauses are met with several speakers trying to enter into the conversation at once. Combined with lag, this can get quite awkward.</li><li>The avoidance of awkwardness causes some people to remain quiet.</li><li>The loudest voice in the room problem - some people naturally dominated discussions.</li><li>Social cues are almost non-existent when your entire team gets boxed into tiny windows on-screen and are only visible from their shoulder up.</li></ol><p>The purpose of this brainstorm was not to narrow down into solutions, but it was to dive deep into the problems.</p><div><p>Adam is typing something... (Click to reveal)</p><p><img src="https://adamthewan.com/static/adam-head-0b2b466e69071c2bd52efa9911165bc6.png"></p></div><h3>Step 3 - Sketching</h3><p>After the brainstorm session, we discussed some ideas on how to tackle the problem. Solutions can seem pretty vague, and usually, what happens is that several keywords get thrown around. For us, it was “queue,” “overlay,” and “polls.” It’s good to note that people often visualize keywords differently and form very different concepts in their heads. </p><p>A picture is worth a thousand words. Sketching is an essential skill to learn for any founder, as it’s the best medium to transfer your ideas with a low signal-noise ratio. People often misunderstand your words. If you’re not good at drawing, it’s good to learn how to sketch out a prototype digitally using free tools like Figma. I have even used Google Slides to build a low fidelity prototype for a client once! Sometimes I even screenshot parts of other apps and combine them into a Frankenstein of an image - anything to help bridge the gap between your vision and their imagination.</p><figure>
    <span>
      <a href="https://adamthewan.com/static/ac5ea0b862d651aee09be122cf1e3d76/07a9c/prototype-sketch.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="Sketch of the app that turned into MeetButter" title="Sketch of the app that turned into MeetButter" src="https://adamthewan.com/static/ac5ea0b862d651aee09be122cf1e3d76/fcda8/prototype-sketch.png" srcset="https://adamthewan.com/static/ac5ea0b862d651aee09be122cf1e3d76/12f09/prototype-sketch.png 148w,https://adamthewan.com/static/ac5ea0b862d651aee09be122cf1e3d76/e4a3f/prototype-sketch.png 295w,https://adamthewan.com/static/ac5ea0b862d651aee09be122cf1e3d76/fcda8/prototype-sketch.png 590w,https://adamthewan.com/static/ac5ea0b862d651aee09be122cf1e3d76/efc66/prototype-sketch.png 885w,https://adamthewan.com/static/ac5ea0b862d651aee09be122cf1e3d76/c83ae/prototype-sketch.png 1180w,https://adamthewan.com/static/ac5ea0b862d651aee09be122cf1e3d76/07a9c/prototype-sketch.png 1440w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span>
    <figcaption>Sketch of the app that turned into MeetButter</figcaption>
  </figure><p>Based on the feedback and ideas from the team, this was the very first sketch for MeetButter that I built using Figma. After sharing it on our team Slack, we held a meeting to discuss the steps moving forward. We decided to cut out some features and instead focus on the queuing functionality as we were able to test it internally during our daily standup calls.</p><h3>Step 4 - Prototyping</h3><p>I won’t go into too much detail about how we built the prototype. This step will be different for every team: some teams will opt to do a no-code prototype using tools like AirTable and Google Forms; some will choose to do a “simulated” prototype using Figma or Zeplin; some will opt to build a fully functioning albeit minimal prototype using code. We decided to do the latter as it was the fastest for me to code something quickly.</p><figure>
    <span>
      <a href="https://adamthewan.com/static/2bbc76946aa01d921cf2ae13d7aeaeee/c1b63/hackathon.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="Developers during a hackathon weekend" title="Developers during a hackathon weekend" src="https://adamthewan.com/static/2bbc76946aa01d921cf2ae13d7aeaeee/fcda8/hackathon.png" srcset="https://adamthewan.com/static/2bbc76946aa01d921cf2ae13d7aeaeee/12f09/hackathon.png 148w,https://adamthewan.com/static/2bbc76946aa01d921cf2ae13d7aeaeee/e4a3f/hackathon.png 295w,https://adamthewan.com/static/2bbc76946aa01d921cf2ae13d7aeaeee/fcda8/hackathon.png 590w,https://adamthewan.com/static/2bbc76946aa01d921cf2ae13d7aeaeee/efc66/hackathon.png 885w,https://adamthewan.com/static/2bbc76946aa01d921cf2ae13d7aeaeee/c83ae/hackathon.png 1180w,https://adamthewan.com/static/2bbc76946aa01d921cf2ae13d7aeaeee/c1b63/hackathon.png 1200w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span>
    <figcaption>Developers during a hackathon weekend</figcaption>
  </figure><p>The purpose of our prototype was to test:</p><ol><li><p>If the core hypothesis works. In this case, we wanted to test if allowing participants to queue would help meetings flow better.</p></li><li><p>If we could build the tech. Founders often underestimate the technical work that goes into creating their vision. Building a prototype allows you to do a mini feasibility test.</p></li></ol><div><p>Adam is typing something... (Click to reveal)</p><p><img src="https://adamthewan.com/static/adam-head-0b2b466e69071c2bd52efa9911165bc6.png"></p></div><h3>Step 5 - Testing and Feedback</h3><figure>
    <span>
      <a href="https://adamthewan.com/static/8282a9af1ca9ee66ef4e2591a938b2d3/c1b63/mvp.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="It's alive!" title="It's alive!" src="https://adamthewan.com/static/8282a9af1ca9ee66ef4e2591a938b2d3/fcda8/mvp.png" srcset="https://adamthewan.com/static/8282a9af1ca9ee66ef4e2591a938b2d3/12f09/mvp.png 148w,https://adamthewan.com/static/8282a9af1ca9ee66ef4e2591a938b2d3/e4a3f/mvp.png 295w,https://adamthewan.com/static/8282a9af1ca9ee66ef4e2591a938b2d3/fcda8/mvp.png 590w,https://adamthewan.com/static/8282a9af1ca9ee66ef4e2591a938b2d3/efc66/mvp.png 885w,https://adamthewan.com/static/8282a9af1ca9ee66ef4e2591a938b2d3/c83ae/mvp.png 1180w,https://adamthewan.com/static/8282a9af1ca9ee66ef4e2591a938b2d3/c1b63/mvp.png 1200w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span>
    <figcaption>It's alive!</figcaption>
  </figure><p>Once you have your prototype, you need to get it in front of some test users. Finding test users can be tricky.  Ideally, the test users should be from within your team; this was the case for us with MeetButter. It meant that we were building a product for ourselves, that we were part of our target market. Building a product to solve your problems has some apparent benefits: </p><ol><li>It creates a shorter and more efficient feedback loop.</li><li>It’s easier to innovate on issues you face</li><li>It somewhat validates your market.</li></ol><p>If you are building a product that’s not for yourself, I’d suggest finding at least ten people within your networks who can become your loyal test users.</p><p>MeetButter was also super easy to integrate into our daily workflow. All we had to do was open up the web app during our regular standup calls. It’s essential to build some sort of feedback loop. I sent a Google Form to the participants of the meeting to gather initial feedback as soon as the meeting ended - it’s best to strike while the iron is hot. We also had several Slack threads discussing additional ideas that came up as we continued testing.</p><h3>Step 6 - Reiteration</h3><p>After testing our prototype, we collected the feedback and went back to the drawing board. At this point, you have to make a clear decision with your prototype - do you continue to reiterate, or do you kill the project? We found that our prototype worked quite well, and although we were skeptical, there was a sense that we were onto something. We started using the prototype in every meeting, so it was hard to deny that our team internally found it useful.</p><figure>
    <span>
      <a href="https://adamthewan.com/static/e766445b8bfa6e293cbb0db6b23fedef/c1b63/feedback-loop.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="The typical product development feedback loop" title="The typical product development feedback loop" src="https://adamthewan.com/static/e766445b8bfa6e293cbb0db6b23fedef/fcda8/feedback-loop.png" srcset="https://adamthewan.com/static/e766445b8bfa6e293cbb0db6b23fedef/12f09/feedback-loop.png 148w,https://adamthewan.com/static/e766445b8bfa6e293cbb0db6b23fedef/e4a3f/feedback-loop.png 295w,https://adamthewan.com/static/e766445b8bfa6e293cbb0db6b23fedef/fcda8/feedback-loop.png 590w,https://adamthewan.com/static/e766445b8bfa6e293cbb0db6b23fedef/efc66/feedback-loop.png 885w,https://adamthewan.com/static/e766445b8bfa6e293cbb0db6b23fedef/c83ae/feedback-loop.png 1180w,https://adamthewan.com/static/e766445b8bfa6e293cbb0db6b23fedef/c1b63/feedback-loop.png 1200w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span>
    <figcaption>The typical product development feedback loop</figcaption>
  </figure><p>We repeated the process of designing, reiterating, and receiving feedback several times. Our testing group grew from our internal team of five people out to our friends within our social circles.</p><h3>Final Step - Launch</h3><p>After a few rounds of iterations, our prototype slowly shed its pieces and morphed into something resembling a product. As soon as we exhausted our immediate networks, we knew that the next step was to launch MeetButter beyond internal test users.</p><p>I began to lay the groundwork for a codebase that could grow into a scalable project. Our tech stack ended up being the following:</p><ul><li>Frontend - NextJS with Redux and GraphQL</li><li>Backend - A mix of Firebase and an Express server that’s powered by Apollo GraphQL and Sequelize</li><li>Infrastructure - We used Netlify and AWS to deployment</li></ul><figure>
    <span>
      <a href="https://adamthewan.com/static/ab6b779f27ff6765213b06367efeec87/c1b63/pmf.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="Why it's important to fail fast" title="Why it's important to fail fast" src="https://adamthewan.com/static/ab6b779f27ff6765213b06367efeec87/fcda8/pmf.png" srcset="https://adamthewan.com/static/ab6b779f27ff6765213b06367efeec87/12f09/pmf.png 148w,https://adamthewan.com/static/ab6b779f27ff6765213b06367efeec87/e4a3f/pmf.png 295w,https://adamthewan.com/static/ab6b779f27ff6765213b06367efeec87/fcda8/pmf.png 590w,https://adamthewan.com/static/ab6b779f27ff6765213b06367efeec87/efc66/pmf.png 885w,https://adamthewan.com/static/ab6b779f27ff6765213b06367efeec87/c83ae/pmf.png 1180w,https://adamthewan.com/static/ab6b779f27ff6765213b06367efeec87/c1b63/pmf.png 1200w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span>
    <figcaption>Why it's important to fail fast</figcaption>
  </figure><p>Several factors allowed us to build and ship MeetButter quickly.</p><p>Firstly, we were fortunate to have had the experience and the skills to execute quickly. We didn’t run into many technical limitations, as each one of us had filled the significant roles that were needed. These roles include design/UI UX, software development, and marketing/networking.</p><p>Secondly, we tried to follow the best practices for idea generation. The brainstorm that led to MeetButter wasn’t the first one that we had together. It was probably our fifth brainstorm session after getting together as a team as Project Phoenix. With a lot of practice, we were able to build a set of best practices to have productive brainstorm sessions, get feedback, and reiterate.</p><p>Thirdly, we were close to our target market, which allowed us to test fast and slowly expand our test userbase.</p><p>Fourth, we threw perfection out the window. Our prototype didn’t work 100% of the time, had a bunch of bugs, and built with the bare minimum UI. Despite this, we still used it every single day for our video calls. It was good …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://adamthewan.com/blog/meetbutter/how-we-built-meetbutter-three-weeks/">https://adamthewan.com/blog/meetbutter/how-we-built-meetbutter-three-weeks/</a></em></p>]]>
            </description>
            <link>https://adamthewan.com/blog/meetbutter/how-we-built-meetbutter-three-weeks/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23642739</guid>
            <pubDate>Thu, 25 Jun 2020 16:55:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[ARM Mac: Why I'm Worried About Virtualization]]>
            </title>
            <description>
<![CDATA[
Score 147 | Comments 283 (<a href="https://news.ycombinator.com/item?id=23642178">thread link</a>) | @bmalehorn
<br/>
June 25, 2020 | https://bmalehorn.com/arm-mac/ | <a href="https://web.archive.org/web/*/https://bmalehorn.com/arm-mac/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>It's late 2020 and you just got a brand-new Mac with Apple's own ARM processors. Exciting! But what will development be like?</p><h2>Docker</h2><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKwAAACSCAYAAADYQSEFAAAM6klEQVR4Ae2de4wVVx3Hf/fOfe0CC5SlQMujKNsC8qhtKTEtwdKqTbQNmphq/EurRk0M0cbEP7S1rYmmpTHRGh+tsbWtUi0lURSpbVoKtDzEUlgWWJ5lgS2wu7wW7vuO+c1l2Mtyd++dc2fmnDPznWQzs/feOed3vr/PnTvnnN/8TuSeFf0mYYMCmigQ1cROmAkFLAUALEDQSgEAq5W7YCyABQNaKQBgtXIXjAWwYEArBQCsVu6CsQAWDGilAIDVyl0wFsCCAa0UALBauQvGAlgwoJUCAFYrd8FYAAsGtFIAwGrlLhgLYMGAVgoAWK3cBWMBLBjQSgEAq5W7YCyABQNaKQBgtXIXjAWwYEArBQCsVu6CsQAWDGilAIDVyl0wFsCCAa0UALBauQvGAlgwoJUCAFYrd8FYAAsGtFIAwGrlLhgLYMGAVgoAWK3cBWNjkMA9BVqSEVq5tFmowP2nS/Tt19JC54bpJFxhw+TtALQVwAbAiWFqAoANk7cD0FYAGwAnhqkJADZM3g5AWwFsAJwYpiYA2DB5OwBtBbABcGKYmgBgw+TtALQVwAbAiWFqAoANk7cD0FYAGwAnhqkJCH5x0dvZgkkvdeSFSuxNm0Lnhe0kAOuix7NFoud25lwsEUUNVgC3BIMVwf9KK6D9FXbG2CgtuzUpJPKW7gK9sKv8E/7VuQm6ZYIhVM5TW7N0+GyJRsQj9PPFKaEyus6X6InNWaFzw3SS9sA2xyM0c5zYD8XR8wPnXT9KvJymSyoaURK2JTZgSpj4c9xWyORYMpwgUwEAK1N9BesemYgoaNWASQB2QIvQH908waCX7mui+9vipCq2ADb0mJYF4PvwhxYkqTkWoe/ekqAn70rRhBHqYQtgAaylwDfmJ2hiBaDzrzXo159qopnXqIWIWtYAHikKfGRMlD770fhVdY9ORmj5kia6fZLYcN9VBbrwAoB1QUTdi/ja3ARFh/j1TxpEjy1K0b3T1RgBBbC609ag/XPHG7TwuuGvoEaE6KHbk3T3NPnQAtgGHa776V+adfWtwFBt+t6CJPHMosxNbu0yW466ralkJ9PRfHvwyB0p4pRMsjYAK0t5Ber9xPUGOZ0S5pGEHy4Ui91wo8nyb0oabEV/zqRtHxaFSuGAFXs7eKZEI+Ni5Vy4FAJbKJGwLcf7B2yxbfJ6v2iymPsXTDLo1omGcFsbaVfknhX9iBxuREGNz31laTPx0JXI1tFbomWv+59tEbcEIt4KwDkMqiis3PzZ46J028ThRxe8kEnsN8ElS748K05jU2Lf8N+/nyP+Cb5uZISWttXf0600fW9fid74oGC99OnpMZoxRuz7u7IzTycumMSdkgfnJSqrqPu4J23SX/eU7y0YBNHB+jePFGh3b+3biymjxNpa2aDP3xin/wrejlWW4+RYKrB33xCjaS1iwv1xZxnY1uYosXAi2+uHC5eBZUAWTxGTgyGxgI1FhG3hhMY2sBzfK9qmQ2dL9QHbInahqNR53niDeIy26ONNpRgtlVbjWEsFRrkQRpiKEd3kc6yB2CVFSxfBaC8U4CAZ7oDxlfaapgiNS0WInwLhBzIzBfPyvi9jUsmFKzGA9cKLISrzgVlxWnpjnMYkI0PGI7Ac3N/o7i/RvtMl2nmqSJu7i3TqonOCAWyI4KpsqnNUKs8eOOYHL0fU0YXgCYopLVHrb8m0GHH9O04W6cWOPG0/Uf/4N4Ad0D5UR+eybiErJht3+fh2gv/WHy3QL7fl6Eymtk3odInprf1ZR8/XHvryq5E84/bsvU30yam1r58A1i+vKFYPD6PxfaUqG09ifHN+wuq8DWcTgB1OnQC/x734vX313zv6IcXLe/I1x3QBrB+eULSOt7vUAbYvbdKag7UT6QFYRWHywyyeoXNjbNQNW/+yO0+5Or4/ANYNtTUt43TGJJ6elr3x2Ow/9te+urKdtbtlHrYmXSC6WKg9lFHNBPusYkm8DL6Pszc+FrXFvkqZpngZmYoJ+XwDtjjtSD3XnrN65wn/A68s6dne5VuyNe9dbT8hHtZWIoR7Hsy/a2rM6p2PEYyaa1Q2zh75p/b6c+pKvcI22lic71yBeJRozniDFk026M7JMeHwTuc1X30GPyny5476YeUSXAeWwwU5MQM2uQpwngFOP8SBKE2xiJV2iJ94ndoSrTnW6YflW7uL9JONGcdjwa4Dy8HUn5vherF+aIg6fFLg3eNFenxjhvICExeuk8WJgbFBgWoKcKf2me05+ueBghX8Uu0ztV5zHdjWZgBbS/Swvc+jKBuOFui323NCIYWVerkObIsLkeyVBuJYXwV49mrt4YI1xioS+1qt5a4Dy71QbOFSgK+gZ7MmcW6F7n6T9vSVrBjXD84J3KTWkM51YGNDpcGrYQje1keBP+zI0b8OFqws3fZjMH5Z7wGwfpmOemQocCFv0t/3FYRnBRu12fUf8MopxkaNw/nqKbB6vzxYWQ3Xgb3gbOJCPY/AoiEV4Hn/VfvqC1IZspAG33Af2LwdltKgZThdOQU4S47MRZx55g7AKoeFmgbxSICdmUaWhZwNx3Vg3RpvkyUK6q2uwNpDBTriwTBV9dqqv8qRZa4DewzZO6urrfGrHCv8vIMQQC+aymuG3TA66j6wKj0+7IVwYSxz5d681HtX1nzhpPIIrPtXWIWedw8jXG63mWewXt4td2SA2/TxCWVUXQe26zxGCdyGRmZ5z7fnpU0SVLa7tckjYHnNAS/mkCuNx7E/CuzqKdLqA/KvrtxaO/G161dYLpyTfGHTWwEOrn5qa474wUoVNm+BPeV+lI4KooXJhhfac9QleRjL1ptT8dtP9eIKa6uC/WUFKtPXX35R4gEPq9lJNjwBlrMtyx5klqiv1lUzGE86yBPgV2M56QdvngDLBXMaHGz6KfCrbVniRfZU205fymfrGbCcAkeR+3XVtFfWnn8fKhD/qbj1Xix/iTwD9sMLJrWfwmiBis6vZtOBMyV6elu22ltKvPbeSY+B5Vb+R4FEY0qorbgR/XmTHtuYtVZ8UdXUTcfLV37PrrDc8HVdRaVFUNU5ftrFnayH12etBwj9rNdpXbxwH09IeQrsxbxJq+tMo+i0Afh84wpwjOvPNmWtZYgaL837Et46UvAWWG4CJ6pNC6bU9F6CcNfw9P9yVoILXVR4tdMHYDnaZ1Wnmj1PXRzlhZ0v7srXnUTYi/pFyuRfbE9vCWyj/rYnT+dzGOSy9ZC955yssgOyRTXwBVjuhTK02OQr8LvtOUcJhOVbfKUFvgDLVb7amadjCO6+Un0f/+MO1i+2ZumVvXpfOHwDlgMYlm/JKbNqiY+sSK+KQwV5NIDTC+m++QYsC9XeU6RVnXp/w3VzeE/apO+/kSYeEgrC5iuwLNizO3LU0atecEUQnDm4DXyB+M5raSub4OD3dP3fd2A53Q2nC69n5WZdRVXBbl736gdvZsgOy1PBJjds8B1YNpp/pn68IYMJBTc8OKiMczmTfvpO1lrO3emaXYOKUvJfKcCyEnt6S/Sj9WoHXCjpsWGMevdYkb6+Jk3ruoJxv1qtqdKAZWP4YcVHBZa+qdaQML/GOVuf2JylhzcE7xZgsF+lAsvG8HpNj7+TQVTXYM/U8T/PHXII54Nr0qEJ5VRm6c62sVF69M4UjccqNHWgWh4i/M17OersC9eIizLAspf42fNH7kjSx1olrdRbFypyP8RPcjzzfo7eDvB96nAKKwUsG8oL9n7r5gTd3xa3Fn0YzvgwvcfBy5zjih/uDGLvv15fKgesbficVoOW3ZawUizar4Vxv7u3RCt254hHABDvRqQssAwnX22/ODNOX5mdIM7+EZaN4y7WdxWsuf+deJDzCrcrDaxtKSezfWBmnD4zPX45ZY39XpD2PGW99mCe3uoqEgcrY7taAS2Atc0ek4rQF9ridF9bjEbG9V/TlpHc21eizccLtO5IkboQfmm7esi9VsDarWiORWjJNIMWT4nRvGsN0mnxxUyBaNuJIm06VqDN3cXAzfXbPvJqryWwlWLwVXfR5BgtnmLQnPEGGYpdeE9eNKmjp2hFqPGeE1aEuZdf6TuRY+2BrWw0d8xuGmfQ7HFRms371iiNTvpDME+Pdp0zrZ91TlPJyfB4kWCZ61pVahOUY9fXmpUpDPeuOT6hnFC5HCje2hShCSOiNHFExPrjY+7E8T1wMkaUNCKUMohSsYjVoeNHSXIlk/KXUjzmS6aV6pF/yjkhGYdFcsie/ceZGnkhkqCF8cn043B1BwrYag3lUMaedJF29VR7F6/ppoD04BfdBIO9chUAsHL1R+0OFQCwDgXDx+UqAGDl6o/aHSoAYB0Kho/LVQDAytUftTtUAMA6FAwfl6sAgJWrP2p3qACAdSgYPi5XAQArV3/U7lABAOtQMHxcrgL/Bwz56cFDxXoZAAAAAElFTkSuQmCC" width="150"></p><p>I would <strong>expect about a 5x slowdown running Docker images.</strong></p><p>Docker on a Mac utilizes a <strong>hypervisor</strong>. Hypervisors rely on running the <strong>same architecture on the host as the guest</strong>, and are about about 1x - 2x as slow as running natively.</p><p>Since you're running ARM Mac, these hypervisors can only run ARM Linux. They can't run x86_64 Linux.</p><p>What will happen instead? These tools will fall back on <strong>emulators</strong>. Emulators can run <strong>a different architecture between the host and the guest</strong>, but simulate the guest operating system at about 5x-10x slowdown.</p><div><p><img src="https://bmalehorn.com/static/perf-267ab9cfc29b6f68078fbe19892bce23.png"></p><p>A basic performance test comparing gzip performance on amd64 (hypervisor) and arm64v8 (emulator). Note that the emulator is over 6x slower. On an ARM Mac, the amd64 image will instead be 6x slower.</p></div><p>Why can't you update the Docker image to also support ARM? You theoretically could switch your backend to run ARM Linux. However, this would take months - renting out ARM instances, re-building all repositories, and a tense switch over. What if your hosting provider doesn't offer ARM instances with the same system requirements as x86_64? What if you complete this migration and find it runs at half the speed?</p><p>Worse, it might be impossible if your images include files downloaded off the internet, as those are often only compiled for x86_64.</p><div><p><img src="https://bmalehorn.com/static/phantomjs-615e9c8bc9d2deb5ca62a4533c1299d6.png"></p><p>An example of a Docker command that will only work on x86_64. PhantomJS does not release an arm build.</p></div><p>While moving your backend to ARM is far from impossible, it's a serious migration that you shouldn't take lightly. Getting a new laptop isn't enough justification to switch your backend architecture.</p><p>Another option is to <strong>run Docker remotely</strong>. You set up an x86_64 Linux server, then allow Docker to connect to it remotely. From then on, all Docker commands instead run on the server. This is also supported in Docker, <a href="https://www.digitalocean.com/community/tutorials/how-to-use-a-remote-docker-server-to-speed-up-your-workflow">here</a> is a tutorial on setting it up. This is what heavy Docker users will want to do.</p><h2>VirtualBox</h2><p><img src="https://bmalehorn.com/static/virtualbox-c37e4cc82b13d3c1c080f7ced273ae45.png" width="150"></p><p><strong>VirtualBox won't work.</strong></p><p>VirtualBox is a <strong>hypervisor</strong>. Therefore, <strong>it won't be able to run x86 Windows or x86 Linux</strong>.</p><p>You could use VirtualBox to run ARM Windows. Windows already supports ARM, and has a similar binary translation system to Apple's, so it can run x86 binaries. However, VirtualBox only supports x86 hosts and guests and is <a href="https://forums.virtualbox.org/viewtopic.php?f=8&amp;t=98742">unlikely to be ported by ARM</a>.</p><p>VMWare Fusion similarly is a hypervisor that only support x86, but <a href="https://twitter.com/VMwareFusion/status/1275483803536908288?s=20">they're thinking about supporting ARM</a>.</p><p>Instead of VirtualBox you might use QEMU, an emulator. However, QEMU is pretty low level and not often used to emulate Windows.</p><h2>Boot Camp</h2><p><img src="https://bmalehorn.com/static/boot-camp-f05493e57b0fe815dbc1d989ada98dd0.png" width="150"></p><p><strong>Boot Camp won't work.</strong></p><p><a href="https://support.apple.com/boot-camp">Boot Camp</a> is an Apple-approved way to dual-boot Mac OS and Windows. <a href="https://www.theverge.com/2020/6/24/21302213/apple-silicon-mac-arm-windows-support-boot-camp?utm_campaign=theverge&amp;utm_content=chorus&amp;utm_medium=social&amp;utm_source=twitter">Boot Camp will definitely not be available on ARM Macs</a>. It might be added later with the ability to run ARM Windows, though Microsoft <a href="https://www.theverge.com/2020/6/24/21302213/apple-silicon-mac-arm-windows-support-boot-camp">would have to approve</a>.</p><h2>Should I get an ARM Mac?</h2><p>The point of this post isn't to say that ARM Mac is a bad idea, but to give a realistic idea of what developing on one would look like assuming nothing changes. It's possible Apple could release more virtualization tools before the ARM Mac launches.</p><p>Should you get an ARM Mac if you're a developer? If you work largely on frontend, mobile, or native apps, you'll probably be fine. But if you use virtualization often, I wouldn't recommend it. There will be a lot of problems early on, and not all of them will have solutions. My biggest concern is getting an ARM Mac and realizing I simply can't run an essential application on it.</p><p>However if you like troubleshooting these issues and are excited about ARM Mac, go for it! My plan is for those kinds of people to fix these issues.</p><p>Know something I don't? Have questions? Email me at <a href="mailto:bmalehorn@gmail.com">bmalehorn@gmail.com</a>.</p></div></div>]]>
            </description>
            <link>https://bmalehorn.com/arm-mac/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23642178</guid>
            <pubDate>Thu, 25 Jun 2020 16:01:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[BLEU Score: Bilingual Evaluation Understudy]]>
            </title>
            <description>
<![CDATA[
Score 56 | Comments 12 (<a href="https://news.ycombinator.com/item?id=23641791">thread link</a>) | @keyboardman
<br/>
June 25, 2020 | https://leimao.github.io/blog/BLEU-Score/ | <a href="https://web.archive.org/web/*/https://leimao.github.io/blog/BLEU-Score/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <h3 id="introduction">Introduction</h3>

<p>BLEU is a standard algorithm for evaluating the machine translations against the human translations. At first I thought it should be very straightforward to use. However, it turns out that there are a lot of caveats.</p>



<p>In this blog post, I am going to show the BLEU algorithm in detail and talk about the caveats.</p>

<h3 id="english-translation-example">English Translation Example</h3>

<p>We will use the following examples to illustrate how to compute the BLEU scores.</p>

<h4 id="example-1">Example 1</h4>

<p>Chinese: 猫坐在垫子上</p>

<p>Reference 1: the cat is on the mat</p>

<p>Reference 2: there is a cat on the mat</p>

<p>Candidate: the cat the cat on the mat</p>

<h4 id="example-2">Example 2</h4>

<p>Chinese: 猫坐在垫子上</p>

<p>Reference 1: the cat is on the mat</p>

<p>Reference 2: there is a cat on the mat</p>

<p>Candidate: the the the the the the the the</p>

<h3 id="precision">Precision</h3>

<p>We count each of the ngram in the candidate sentence whether it has shown in any of the reference sentences, gather the total counts for each of the unique ngram, sum up the total counts for each of the unique ngram, and divided by the number of ngrams in the candidate sentence.</p>

<h4 id="example-1-1">Example 1</h4>

<p>We first compute the unigram precision for example 1. All the unigrams in the candidate sentences have shown in the reference sentences.</p>



<table>
  <tbody><tr>
    <th>Unigram</th>
    <th>Shown?</th>
  </tr>
  <tr>
    <td>the</td>
    <td>1</td>
  </tr>
  <tr>
    <td>cat</td>
    <td>1</td>
  </tr>
  <tr>
    <td>the</td>
    <td>1</td>
  </tr>
  <tr>
    <td>cat</td>
    <td>1</td>
  </tr>
  <tr>
    <td>on</td>
    <td>1</td>
  </tr>
  <tr>
    <td>the</td>
    <td>1</td>
  </tr>
  <tr>
    <td>mat</td>
    <td>1</td>
  </tr>
</tbody></table>

<p>We then merge the unigram counts.</p>



<table>
  <tbody><tr>
    <th>Unique Unigram</th>
    <th>Count</th>
  </tr>
  <tr>
    <td>the</td>
    <td>3</td>
  </tr>
  <tr>
    <td>cat</td>
    <td>2</td>
  </tr>
  <tr>
    <td>on</td>
    <td>1</td>
  </tr>
  <tr>
    <td>mat</td>
    <td>1</td>
  </tr>
</tbody></table>

<p>The total number of counts for the unique unigrams in the candidate sentence is 7, and the total number of unigrams in the candidate sentence is 7. The unigram precision is 7/7 = 1.0 for example 1.</p>



<p>We then try to compute the bigram precision for example 1.</p>



<table>
  <tbody><tr>
    <th>Bigram</th>
    <th>Shown?</th>
  </tr>
  <tr>
    <td>the cat</td>
    <td>1</td>
  </tr>
  <tr>
    <td>cat the</td>
    <td>0</td>
  </tr>
  <tr>
    <td>the cat</td>
    <td>1</td>
  </tr>
  <tr>
    <td>cat on</td>
    <td>1</td>
  </tr>
  <tr>
    <td>on the</td>
    <td>1</td>
  </tr>
  <tr>
    <td>the mat</td>
    <td>1</td>
  </tr>
</tbody></table>

<p>We then merge the bigram counts.</p>



<table>
  <tbody><tr>
    <th>Unique Bigram</th>
    <th>Count</th>
  </tr>
  <tr>
    <td>the cat</td>
    <td>2</td>
  </tr>
  <tr>
    <td>cat the</td>
    <td>0</td>
  </tr>
  <tr>
    <td>cat on</td>
    <td>1</td>
  </tr>
  <tr>
    <td>on the</td>
    <td>1</td>
  </tr>
  <tr>
    <td>the mat</td>
    <td>1</td>
  </tr>
</tbody></table>

<p>The total number of counts for the unique bigrams in the candidate sentence is 5, and the total number of bigrams in the candidate sentence is 6. The bigram precision is 5/6 = 0.833 for example 1.</p>

<h4 id="example-2-1">Example 2</h4>

<p>We first compute the unigram precision for example 2. All the unigrams in the candidate sentences have shown in the reference sentences.</p>



<table>
  <tbody><tr>
    <th>Unigram</th>
    <th>Shown?</th>
  </tr>
  <tr>
    <td>the</td>
    <td>1</td>
  </tr>
  <tr>
    <td>the</td>
    <td>1</td>
  </tr>
  <tr>
    <td>the</td>
    <td>1</td>
  </tr>
  <tr>
    <td>the</td>
    <td>1</td>
  </tr>
  <tr>
    <td>the</td>
    <td>1</td>
  </tr>
  <tr>
    <td>the</td>
    <td>1</td>
  </tr>
  <tr>
    <td>the</td>
    <td>1</td>
  </tr>
  <tr>
    <td>the</td>
    <td>1</td>
  </tr>
</tbody></table>

<p>We then merge the unigram counts.</p>



<table>
  <tbody><tr>
    <th>Unique Unigram</th>
    <th>Count</th>
  </tr>
  <tr>
    <td>the</td>
    <td>8</td>
  </tr>
</tbody></table>

<p>The total number of counts for the unique unigrams in the candidate sentence is 8, and the total number of unigrams in the candidate sentence is 8. The unigram precision is 8/8 = 1.0 for example 2.</p>



<p>We then try to compute the bigram precision for example 2.</p>



<table>
  <tbody><tr>
    <th>Bigram</th>
    <th>Shown?</th>
  </tr>
  <tr>
    <td>the the</td>
    <td>0</td>
  </tr>
  <tr>
    <td>the the</td>
    <td>0</td>
  </tr>
  <tr>
    <td>the the</td>
    <td>0</td>
  </tr>
  <tr>
    <td>the the</td>
    <td>0</td>
  </tr>
  <tr>
    <td>the the</td>
    <td>0</td>
  </tr>
  <tr>
    <td>the the</td>
    <td>0</td>
  </tr>
  <tr>
    <td>the the</td>
    <td>0</td>
  </tr>
</tbody></table>

<p>We then merge the bigram counts.</p>



<table>
  <tbody><tr>
    <th>Unique Bigram</th>
    <th>Count</th>
  </tr>
  <tr>
    <td>the the</td>
    <td>0</td>
  </tr>
</tbody></table>

<p>The total number of counts for the unique bigrams in the candidate sentence is 0, and the total number of bigrams in the candidate sentence is 7. The bigram precision is 0/7 = 0 for example 2.</p>

<h4 id="drawbacks">Drawbacks</h4>

<p>We can see from example 1 and 2 that unigram precision is very easy to be over-confident about the quality of the machine translation. To overcome this, clipped count and modified precision were proposed.</p>

<h3 id="modified-precision">Modified Precision</h3>

<p>For each unique ngram, we count its maximum frequency in each of the reference sentences. The minimum of this special count and the original count is called the clipped the count. That is to say, the clipped count is no greater than the original count. We then use this clipped count, in place of the original count, for computing the modified precision.</p>

<h4 id="example-1-2">Example 1</h4>



<table>
  <tbody><tr>
    <th>Unique Unigram</th>
    <th>Count</th>
    <th>Clipped Count</th>
  </tr>
  <tr>
    <td>the</td>
    <td>3</td>
    <td>2</td>
  </tr>
  <tr>
    <td>cat</td>
    <td>2</td>
    <td>1</td>
  </tr>
  <tr>
    <td>on</td>
    <td>1</td>
    <td>1</td>
  </tr>
  <tr>
    <td>mat</td>
    <td>1</td>
    <td>1</td>
  </tr>
</tbody></table>

<p>The total number of clipped counts for the unique unigrams in the candidate sentence is 5, and the total number of unigrams in the candidate sentence is 7. The unigram modified precision is 5/7 = 0.714 for example 1.</p>



<table>
  <tbody><tr>
    <th>Unique Bigram</th>
    <th>Count</th>
    <th>Clipped Count</th>
  </tr>
  <tr>
    <td>the cat</td>
    <td>2</td>
    <td>1</td>
  </tr>
  <tr>
    <td>cat the</td>
    <td>0</td>
    <td>0</td>
  </tr>
  <tr>
    <td>cat on</td>
    <td>1</td>
    <td>1</td>
  </tr>
  <tr>
    <td>on the</td>
    <td>1</td>
    <td>1</td>
  </tr>
  <tr>
    <td>the mat</td>
    <td>1</td>
    <td>1</td>
  </tr>
</tbody></table>

<p>The total number of clipped counts for the unique bigrams in the candidate sentence is 4, and the total number of unigrams in the candidate sentence is 6. The bigram modified precision is 4/6 = 0.667 for example 1.</p>

<h4 id="example-2-2">Example 2</h4>



<table>
  <tbody><tr>
    <th>Unique Unigram</th>
    <th>Count</th>
    <th>Clipped Count</th>
  </tr>
  <tr>
    <td>the</td>
    <td>8</td>
    <td>2</td>
  </tr>
</tbody></table>

<p>The total number of clipped counts for the unique bigrams in the candidate sentence is 0, and the total number of unigrams in the candidate sentence is 8. The unigram modified precision is 2/8 = 0.25 for example 2.</p>



<table>
  <tbody><tr>
    <th>Unique Bigram</th>
    <th>Count</th>
    <th>Clipped Count</th>
  </tr>
  <tr>
    <td>the the</td>
    <td>0</td>
    <td>0</td>
  </tr>
</tbody></table>

<p>The total number of clipped counts for the unique bigrams in the candidate sentence is 0, and the total number of bigrams in the candidate sentence is 7. The bigram precision is 0/7 = 0 for example 2.</p>

<h4 id="advantages">Advantages</h4>

<p>Compared to precision, we found that modified precision is a better metric, at least for unigrams.</p>

<h3 id="bleu">BLEU</h3>

<h4 id="algorithm">Algorithm</h4>

<p>BLEU is computed using a couple of ngram modified precisions. Specifically,</p>



<p>where $p_n$ is the modified precision for $n$gram, the base of $\log$ is the natural base $e$, $w_n$ is weight between 0 and 1 for $\log p_n$ and $\sum_{n=1}^{N} w_n = 1$, and BP is the brevity penalty to penalize short machine translations.</p>



<p>where $c$ is the number of unigrams (length) in all the candidate sentences, and $r$ is the best match lengths for each candidate sentence in the corpus. Here the best match length is the closest reference sentence length to the candidate sentences. For example, if there are three references with lengths 12, 14, and 17 words and the candidate translation is a terse 13 words, ideally the best match length could be either 12 or 14, but we arbitrary choose the shorter one which is 12.</p>



<p>Usually, the BLEU is evaluated on corpus where there are many candidate sentences translated from different source texts and each of them has several reference sentences. Then $c$ is the total number of unigrams (length) in all the candidate sentences, and $r$ is the sum of the best match lengths for each candidate sentence in the corpus.</p>



<p>It is not hard to find that BLEU is always a value between 0 and 1. It is because BP, $w_n$, and $p_n$ are always between 0 and 1, and</p>



<p>Usually, BLEU uses $N = 4$ and $w_n = \frac{1}{N}$.</p>

<h4 id="example-1-3">Example 1</h4>

<p>We have computed the modified precision for some of the ngrams. It is not hard to compute the others. Concretely, we have</p>





<p>Because the corpus only has one translation set and thus $c = 7$ and $r = 7$</p>



<p>We plugin these values to the BLEU equation, the BLEU is</p>



<p>We further compare the BLEU to the BLEU computed using <a href="https://www.nltk.org/">NLTK</a>.</p>

<div><div><pre><code><span>&gt;&gt;&gt;</span> <span>import</span> <span>nltk</span>
<span>&gt;&gt;&gt;</span> <span>reference_1</span> <span>=</span> <span>"the cat is on the mat"</span><span>.</span><span>split</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>reference_2</span> <span>=</span> <span>"there is a cat on the mat"</span><span>.</span><span>split</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>candidate</span> <span>=</span> <span>"the cat the cat on the mat"</span><span>.</span><span>split</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>bleu</span> <span>=</span> <span>nltk</span><span>.</span><span>translate</span><span>.</span><span>bleu_score</span><span>.</span><span>sentence_bleu</span><span>(</span><span>references</span><span>=</span><span>[</span><span>reference_1</span><span>,</span> <span>reference_2</span><span>],</span> <span>hypothesis</span><span>=</span><span>candidate</span><span>,</span> <span>weights</span><span>=</span><span>(</span><span>0.25</span><span>,</span><span>0.25</span><span>,</span><span>0.25</span><span>,</span><span>0.25</span><span>))</span>
<span>&gt;&gt;&gt;</span> <span>print</span><span>(</span><span>bleu</span><span>)</span>
<span>0.4671379777282001</span>
</code></pre></div></div>

<p>The value of <code>bleu</code> is 0.467 which is exactly matching to the BLEU we computed manually.</p>

<h4 id="example-2-3">Example 2</h4>

<p>Similarly,</p>





<p>Because the corpus only has one translation set and thus $c = 8$ and $r = 7$</p>



<p>When we plugin these values to the BLEU equation, actually we would need to compute $\log 0$ which is not mathematically defined. We use a small number $10^{-100}$ instead of $0$ for $p_2$, $p_3$ and $p_4$. The BLEU is</p>



<p>We further also compare the BLEU to the BLEU computed using <a href="https://www.nltk.org/">NLTK</a>.</p>

<div><div><pre><code><span>&gt;&gt;&gt;</span> <span>import</span> <span>nltk</span>
<span>&gt;&gt;&gt;</span> <span>reference_1</span> <span>=</span> <span>"the cat is on the mat"</span><span>.</span><span>split</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>reference_2</span> <span>=</span> <span>"there is a cat on the mat"</span><span>.</span><span>split</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>candidate</span> <span>=</span> <span>"the the the the the the the the"</span><span>.</span><span>split</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>bleu</span> <span>=</span> <span>nltk</span><span>.</span><span>translate</span><span>.</span><span>bleu_score</span><span>.</span><span>sentence_bleu</span><span>(</span><span>references</span><span>=</span><span>[</span><span>reference_1</span><span>,</span> <span>reference_2</span><span>],</span> <span>hypothesis</span><span>=</span><span>candidate</span><span>,</span> <span>weights</span><span>=</span><span>(</span><span>0.25</span><span>,</span><span>0.25</span><span>,</span><span>0.25</span><span>,</span><span>0.25</span><span>))</span>
<span>&gt;&gt;&gt;</span> <span>print</span><span>(</span><span>bleu</span><span>)</span>
<span>1.2882297539194154e-231</span>
</code></pre></div></div>

<p>The value of <code>bleu</code> is 0 which is exactly matching to the BLEU we computed manually.</p>

<p>Note that in the above two examples, due to the candidate sentence is long and we only have one translation in the corpus, thus $\text{BP} = 1$. In practice, there could be scenarios where $\text{BP} &lt; 1$.</p>

<h3 id="caveats">Caveats</h3>

<p>In some scenarios, BLEU does not score the translation very well, especially for those short translations with few reference sentences. For example,</p>



<p>Chinese: 你准备好了吗？</p>

<p>Reference 1: are you ready ?</p>

<p>Candidate: you are ready ?</p>

<div><div><pre><code><span>&gt;&gt;&gt;</span> <span>import</span> <span>nltk</span>
<span>&gt;&gt;&gt;</span> <span>reference_1</span> <span>=</span> <span>"are you ready ?"</span><span>.</span><span>split</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>candidate</span> <span>=</span> <span>"you are ready ?"</span><span>.</span><span>split</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>bleu</span> <span>=</span> <span>nltk</span><span>.</span><span>translate</span><span>.</span><span>bleu_score</span><span>.</span><span>sentence_bleu</span><span>(</span><span>references</span><span>=</span><span>[</span><span>reference_1</span><span>],</span> <span>hypothesis</span><span>=</span><span>candidate</span><span>,</span> <span>weights</span><span>=</span><span>[</span><span>0.25</span><span>,</span><span>0.25</span><span>,</span><span>0.25</span><span>,</span><span>0.25</span><span>])</span>
<span>&gt;&gt;&gt;</span> <span>print</span><span>(</span><span>bleu</span><span>)</span>
<span>1.133422688662942e-154</span>
</code></pre></div></div>

<p>This is actually a very good machine translation to me. However, the BLEU score is 0, which means that the machine translation is totally wrong.</p>



<p>In NLTK, you are allowed to provide <a href="https://www.nltk.org/api/nltk.translate.html#nltk.translate.bleu_score.SmoothingFunction">smoothing functions</a>. For example,</p>

<div><div><pre><code><span>&gt;&gt;&gt;</span> <span>import</span> <span>nltk</span>
<span>&gt;&gt;&gt;</span> <span>reference_1</span> <span>=</span> <span>"are you ready ?"</span><span>.</span><span>split</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>candidate</span> <span>=</span> <span>"you are ready ?"</span><span>.</span><span>split</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>bleu</span> <span>=</span> <span>nltk</span><span>.</span><span>translate</span><span>.</span><span>bleu_score</span><span>.</span><span>sentence_bleu</span><span>(</span><span>references</span><span>=</span><span>[</span><span>reference_1</span><span>],</span> <span>hypothesis</span><span>=</span><span>candidate</span><span>,</span> <span>weights</span><span>=</span><span>[</span><span>0.25</span><span>,</span><span>0.25</span><span>,</span><span>0.25</span><span>,</span><span>0.25</span><span>],</span> <span>smoothing_function</span><span>=</span><span>nltk</span><span>.</span><span>translate</span><span>.</span><span>bleu_score</span><span>.</span><span>SmoothingFunction</span><span>().</span><span>method7</span><span>)</span>
<span>&gt;&gt;&gt;</span> <span>print</span><span>(</span><span>bleu</span><span>)</span>
<span>0.4002926439114545</span>
</code></pre></div></div>

<p>This time, the value of <code>bleu</code> is 0.4, which is magically higher than the vanilla one we computed without using smoothing functions.</p>



<p>However, one should be always cautious about the smoothing function used in BLEU computation. At least we have to make sure that the BLEU scores we are comparing against are using no smoothing function or the exact same smoothing function.</p>

<h3 id="references">References</h3>

<ul>
  <li><a href="https://www.aclweb.org/anthology/P02-1040/">BLEU: a Method for Automatic Evaluation of Machine Translation</a></li>
  <li><a href="https://www.youtube.com/watch?v=DejHQYAGb7Q">BLEU - Andrew Ng</a></li>
</ul>

      <hr>
      
    </div></div>]]>
            </description>
            <link>https://leimao.github.io/blog/BLEU-Score/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23641791</guid>
            <pubDate>Thu, 25 Jun 2020 15:27:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Permacomputing]]>
            </title>
            <description>
<![CDATA[
Score 44 | Comments 18 (<a href="https://news.ycombinator.com/item?id=23641719">thread link</a>) | @ibobev
<br/>
June 25, 2020 | http://viznut.fi/texts-en/permacomputing.html | <a href="https://web.archive.org/web/*/http://viznut.fi/texts-en/permacomputing.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">



<p>This is a collection of random thoughts regarding the application of
permacultural ideas to the computer world.</p>

<p>Some have tried to connect these worlds before (<a href="http://wiki.c2.com/?PermaCulture">WikiWikiWeb's Permaculture
article</a>; <a href="https://en.wikipedia.org/wiki/Kent_Beck">Kent
Beck</a>'s short-lived idea of <a href="https://www.softwarequotes.com/showquotes.aspx?id=559&amp;name=Kent%20Beck">Permaprogramming</a>),
but these have mostly concentrated on enhancing software engineering
practices with some ideas from gardening. I am more interested in the aspect
of cultural and ecological permanence. That is, how to give computers a
meaningful and sustainable place in a human civilization that has a
meaningful and sustainable place in the planetary biosphere.</p>

<h2>1. Problem</h2>

<p>Over the last few hundred years of human civilization, there has been a
dramatic increase in the consumption of artificially produced energy. In the
overarching story, this is often equated with "progress".</p>

<p>In the computer world, this phenomenon gets multiplied by itself:
"progress" facilitates ever greater densities of data storage and digital
logic, thus dramatically exploding the availability of computing resources.
However, the abundance has also caused an equivalent explosion in
wastefulness, which shows in things like mindblowingly ridiculous hardware
requirements for even quite trivial tasks.</p>

<p>At the same time, computers have been failing their <a href="https://en.wikipedia.org/wiki/Computer_Lib/Dream_Machines">utopian
expectations</a>. Instead of amplifying the users' intelligence, they rather
amplify their stupidity. Instead of making it possible to scale down the
resource requirements of the material world, they have instead become a
major part of the problem. Instead of making the world more comprehensible,
they rather add to its incomprehensibility. And they often even manage to
become slower despite becoming faster.</p>

<p>In both computing and agriculture, a major issue is that problems are too
often "solved" by increasing controllability and resource use. Permaculture
takes another way, advocating methods that "let nature do the work" and thus
minimize the dependence on artificial energy input. Localness and
decentralization are also major themes in the thought.</p>

<p>What makes permacultural philosophy particularly appealing (to me) is
that it does not advocate "going back in time" despite advocating a dramatic
decrease in use of artificial energy. Instead, it trusts in human ingenunity
in finding clever hacks for turning problems into solutions, competition
into co-operation, waste into resources. Very much the same kind of creative
thinking I appreciate in computer hacking.</p>

<p>The presence of intelligent life in an ecosystem can be justified by its
strengthening effect. Ideally, humans could make ecosystems more flexible
and more resilient because of their ability to take leaps that are difficult
or impossible for "unintelligent" natural processes. The existence of
computers in a human civilization can be justified by their ability to
augment this potential.</p>

<h2>2. Physical resources</h2>

<h3>2.1. Energy</h3>

<p>Permaculture emphasizes resource-sensitivity. Computers primarily use
electricity, so to them resource-sensitivity primarily means 1) adapting to
changes in energy conditions and 2) using the available energy wisely.
Today's computers, even mobile ones, are surprisingly bad at this. This is
partially due to their legacy as "calculation factories" that are constantly
guaranteed all the resources they "need".</p>

<p>Intense non-urgent computation (such as long machine learning batches)
would take place only when a lot of surplus energy is being produced or
there is a need for electricity-to-heat conversion. This requires that the
computer is aware of the state of the surrounding energy system.</p>

<p>At times of low energy, both hardware and software would prefer to scale
down: background processes would freeze, user interfaces would become more
rudimentary, clock frequencies would decrease, unneeded processors and
memory banks would power off. At these times, people would prefer to do
something else than interact with computers.</p>

<p>It is often wise to store energy for later use. <a href="https://en.wikipedia.org/wiki/Flywheel_energy_storage">Flywheels</a>
are a potential alternative to chemical batteries. They have similar <a href="https://en.wikipedia.org/wiki/Energy_density">energy densities</a>
(MJ/kg) but require no rare-earth materials and last for decades or
centuries instead of mere years.</p>

<h3>2.2. Silicon</h3>

<p>IC fabrication requires large amounts of energy, highly refined machinery
and poisonous substances. Because of this sacrifice, the resulting
microchips should be treasured like gems or rare exotic spices. Their active
lifespans would be maximized, and they would never be reduced to their raw
materials until they are thoroughly unusable.</p>

<p>Instead of planned obsolescence, there should be planned longevity.</p>

<p>Broken devices would be repaired. If the community needs a kind of device
that does not exist, it should preferrably be built from existing components
that have fallen out of use. Chips should be designed open and flexible, so
that they can be reappropriated even for purposes they were never intended
for.</p>

<p>Complex chips should have enough redundancy and bypass mechanisms to keep
them working even after some of their internals wear out. (In a multicore
CPU, for instance, many partially functioning cores could combine into one
fully functioning one.)</p>

<p>Chips that work but whose practical use cannot be justified can find
artistic and other psychologically meaningful use. They may also be stored
away until they are needed again (especially if the fabrication quality and
the storage conditions allow for decades or centuries of "shelf life").</p>

<p>Use what is available. Even chips that do "evil" things are worth
considering if there's a landfill full of them. Crack their DRM locks,
reverse-engineer their black boxes, deconstruct their philosophies. It might
even be possible to reappropriate something like Bitcoin-mining ASICs for
something artistically interesting or even useful.</p>

<p>Minimized on-chip feature size makes it possible to do more computation
with less energy but it often also means increased fragility and shorter
lifespans. Therefore, the densest chips should be primarily used for
purposes where more computation actually yields more. (In entertainment use,
for example, a large use of resources is nothing more than a decadent
esthetic preference.)</p>

<p><a href="https://en.wikipedia.org/wiki/Unconventional_computing">Alternatives
to semiconductors</a> should be actively researched. <a href="https://www.researchgate.net/publication/328395242_Towards_fungal_computer">Living
cells</a> might be able to replace microchips in some tasks sometime in the
future.</p>

<p>Once perfectly clean ways of producing microchip equivalents have been
taken to use, the need for "junk fetishism" will probably diminish.</p>

<h3>2.3. Miscellaneous</h3>

<p>Whenever bright external light is available, displays should be able to
use it instead of competing against it with their own backlight. (See: <a href="https://en.wikipedia.org/wiki/Transflective_liquid-crystal_display">Transflective
LCD</a>)</p>

<p>Personally-owned computers are primarily for those who dedicate
themselves to the technology and thus spend considerable amounts of time
with it. Most other people would be perfectly happy with shared hardware.
Even if the culture and society embraced computers more than anything else,
requiring everyone to own one would be an overkill.</p>

<h2>3. Observation and interaction</h2>

<p>The first item in many lists of permacultural principles is "Observe and
interact." I interpret this as primarily referring to a bidirectional and
co-operative relationship with natural systems: you should not expect your
garden to be easily top-down controllable like an army unit but accept its
quirkiness and adapt to it.</p><h3>3.1. Observation</h3>

<p>Observation is among the most important human skills computers can augment.
Things that are difficult or impossible for humans to observe can be brought
within human cognitive capacity by various computational processes. Gathered
information can be visualized, slight changes and pattern deviances
emphasized, slow processes sped up, forecasts calculated. In Bill Mollison's
words, "Information is <em>the</em> critical potential resource. It becomes
a resource only when obtained and acted upon."</p>

<p>Computer systems should also make their own inner workings as observable as
possible. If the computer produces visual output, it would use a fraction of
its resources to visualize its own intro- and extrospection. A computer that
communicates with radio waves, for example, would visualize its own view of
the surrounding radio landscape.</p>

<p>Current consumer-oriented computing systems often go to ridiculous
lengths to actually prevent the user from knowing what is going on. Even
error messages have become unfashionable; many websites and apps just
pretend everything is fine even if it isn't. This kind of extreme
unobservability is a major source of technological alienation among computer
users.</p>

<p>The visualizations intended for casual and passive observation would be
pleasant and tranquil while making it easy to see the big picture and notice
the small changes. Tapping into the inborn human tendency to observe the
natural environment may be a good idea when designing visualizers. When the
user wants to observe something more closely, however, there is no limit in
how flashy, technical and "non-natural" the presentation can be, as long as
the observer prefers it that way.</p>

<h3>3.2. Yin and yang hacking</h3>

<p>Traditional computer hacking is often very "yang". A total understanding and
control of the target system is valued. Changing a system's behavior is
often an end in itself. There are predefined goals the system is pushed
towards. Optimization tends to focus on a single measurable parameter.
Finding a system's absolute limits is more important than finding its
individual strengths or essence.</p>

<p>In contrast, "yin" hacking accepts the aspects that are beyond rational
control and comprehension. Rationality gets supported by intuition. The
relationship with the system is more bidirectional, emphasizing
experimentation and observation. The "personality" that stems from
system-specific peculiarities gets more attention than the measurable specs.
It is also increasingly important to understand when to hack and when just
to observe without hacking.</p>

<p>The difference between yin and yang hacking is similar to the difference
between permaculture and …</p></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://viznut.fi/texts-en/permacomputing.html">http://viznut.fi/texts-en/permacomputing.html</a></em></p>]]>
            </description>
            <link>http://viznut.fi/texts-en/permacomputing.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23641719</guid>
            <pubDate>Thu, 25 Jun 2020 15:20:23 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Apple is systematically erasing our stories]]>
            </title>
            <description>
<![CDATA[
Score 10 | Comments 1 (<a href="https://news.ycombinator.com/item?id=23641646">thread link</a>) | @egocentric
<br/>
June 25, 2020 | https://www.flicktype.com/ResolutionKit/ | <a href="https://web.archive.org/web/*/https://www.flicktype.com/ResolutionKit/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<div>
<div>
<h2>ResolutionKit</h2>
<p>
A framework for change.
</p>
<blockquote><p lang="en" dir="ltr">For the longest time, I've been afraid to speak up about my story with App Review, fearing I'd put my popular app at risk. I've now decided that being transparent and sharing my experience to help others is worth it, so here it goes:👇</p>— Kosta Eleftheriou (@keleftheriou) <a href="https://twitter.com/keleftheriou/status/1274356729224892416?ref_src=twsrc%5Etfw">June 20, 2020</a></blockquote> 

<p>
I admire Apple, and I believe the world is a better place because of them. As a developer, I’ve made my career on their platform and I’m grateful for it.
But I have some criticism. I’m&nbsp;<b>not</b>&nbsp;here to talk about my story, the 30% Apple developer cut, the App Review process, or to challenge any of their guidelines.
I want to talk about&nbsp;<em>transparency</em>, and <em>accountability</em>.
</p>
<p>
For far too long, developers have been discouraged from being able to share their rejection stories with the world.
"If you run to the press and trash us, it never helps", used to be the official guidance.
The risk too great for most, the fear of retribution overwhelming.
And so the stories have largely remained in the shadows, with only a few exceptions.
But there’s another, critical reason why such stories rarely see the light of day, one that hasn’t received enough attention:
</p>
<blockquote><b>Apple is systematically erasing our stories.</b></blockquote>

<p>
Unless we’re talking about your most recent submission, all communication you have <em>ever</em> sent or received through the "Resolution Center" is inaccessible to you.
Rejection notices, appeal results, anything you might want to reference to better understand previous about your product - it's all gone.
Unless you have meticulously and manually kept copies of all correspondence, what happened in the past will forever stay in the past. But why should it?
</p>
<p>
It’s not hard to see why Apple is doing this.
It <em>is</em> hard, however, to see a reason that benefits anyone but Apple.
In doing so, they gain more peace of mind, less worry about consistency and correctness in applying the public guidelines.
The appeal mechanism helps them improve, but only to the extent that Apple deems necessary.
If we ever wanted to know how well Apple is enforcing the guidelines, we have to take their word for it.
But who guards the guardians, when App Review’s accountability to the world has been intentionally reduced to the bare minimum?
</p>
<p>
Transparency is not always the solution.
We can’t expect Apple to be open about their future product plans, for example.
But when they communicate with developers, they should do so like everyone is watching - every time.
And to get there, the <em>possibility</em> that everyone might find out needs to always be on the table.
</p>
<p>
So Apple, please help us see App Review as a reliable ally.
Let us access our past communications with you - including phone call records if we choose to.
Show us that you want to be accountable for what you communicate to developers. There may be some legal challenges, but transparency is a prerequisite to accountability.
It’s only then that we can begin to have a fair and honest discussion with you about the actual process and guidelines.
Because until then, we’re in the shadows.
</p>
<p>
<a href="https://www.change.org/p/apple-let-us-browse-all-our-past-resolution-center-communications">Sign the petition</a>
</p>
<p>
⌚️<i>Thursday, 25 June 2020</i>
</p>
</div>
</div>
<div>
<h2>Are you a developer?</h2>
<p>
<a href="https://twitter.com/keleftheriou">Reach out</a> and share your story with <a href="mailto:kostas.eleftheriou@gmail.com">me</a>.
</p>
<h2>✌️</h2>
</div>
</div></div>]]>
            </description>
            <link>https://www.flicktype.com/ResolutionKit/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23641646</guid>
            <pubDate>Thu, 25 Jun 2020 15:13:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How coding.blog JAMStack blogs became effortlessly fast]]>
            </title>
            <description>
<![CDATA[
Score 18 | Comments 0 (<a href="https://news.ycombinator.com/item?id=23641457">thread link</a>) | @lorean_victor
<br/>
June 25, 2020 | https://coding.blog/blog/jamstack | <a href="https://web.archive.org/web/*/https://coding.blog/blog/jamstack">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="-codedoc-container"><div><p><img src="https://coding.blog/img/under-the-hood-dark.svg" alt="Banner"></p><p><img src="https://coding.blog/img/under-the-hood.svg" alt="Banner"></p></div><p>Basics of providing content over the internet are fairly straight-forward: Browsers will send requests to your
server, and your server responds with some HTML potentially linked to some JS and CSS.</p><marker><br>

</marker><p>How and when you generate those HTML, CSS and JS content is however an entirely different thing. You might want
to prepare them all in advance and have your server just serve them (pre-rendering), 
you might have your server generate them on the fly (SSR), 
or you might have your server ship some code to the browser that will then generate them (client-side rendering, SPAs). 
You might even generate requested content on the server and ship it with the code that 
would generate subsequently requested content on the browser (isomorphic).</p><marker><br>

</marker><p>There is one particular approach pretty suitable for blogs: you prepare most of the content before hand, then
serve it alongside code that would wire-in interactive bits and generate fully dynamic components. This is called
the <a href="https://jamstack.org/">JAMStack</a>, and it is the approach used by <a href="https://coding.blog/"><code>coding.blog</code></a> and
<a href="https://codedoc.cc/"><strong>CODEDOC</strong></a> for content generation. In this post, we go through the reasons we chose this
approach, and how we implemented it.</p><hr><p>To better understand why we chose <em>JAMStack</em> for <code>coding.blog</code> and how we set our further design goals, its good
to first have a general overview of methods of web content generation/delivery:</p><marker><br>

</marker><p>Pre-Rendering</p><p>Pre-rendering simply means preparing your content before-hand, i.e. in the <em>build stage</em>. This is the fastest
delivery method, and allows you to simply use a CDN instead of writing a server for serving your content.</p><div><p><img src="https://coding.blog/img/blogs/pre-rendering-dark.svg" alt="Pre-Rendering"></p><p><img src="https://coding.blog/img/blogs/pre-rendering.svg" alt="Pre-Rendering"></p></div><p>Server Side Rendering (SSR)</p><p>Instead of preparing the content, you can generate them on-the fly on your server, in response to each request.
This is perhaps useful when your content needs to change based on incoming requests, and perhaps you need to
get some data from some API to be able to create the content. However, this approach is obviously much slower
than pre-rendering.</p><div><p><img src="https://coding.blog/img/blogs/ssr-dark.svg" alt="SSR"></p><p><img src="https://coding.blog/img/blogs/ssr.svg" alt="SSR"></p></div><p>Client-Side Rendering and SPAs</p><p>Highly interactive and dynamic content means you need to generate content on the client-side. To avoid having
content-generation code in multiple places (which is hard to maintain / scale), you could instead conduct all
content generation on the client browser, having your server just ship the content generation code.</p><p>To avoid shipping the content generation code for each page of your site, you can also take control of the 
navigation on the client side, which leads to a <em>Single Page Application</em> (SPA for short). This is the basis
of all modern front-end frameworks.</p><div><p><img src="https://coding.blog/img/blogs/csr-dark.svg" alt="CSR &amp; SPA"></p><p><img src="https://coding.blog/img/blogs/csr.svg" alt="CSR &amp; SPA"></p></div><p>Client-side rendering means the user should wait extra time for being able to see the content, since typically
servers are faster at generating content. It also messes up with SEO, since crawlers might not be able to even
get the content in its full form (since they are not browsers) and so might not be able to properly index it.</p><marker><br>

</marker><p>Isomorphic Apps</p><p>To overcome these issues without spreading the content generation code in multiple places, the concept of <em>isomorphic apps</em>
was introduced. The idea is to basically run the same code both on the server and on the client, while also shipping
the code itself to the client alongside content rendered on the server.</p><div><p><img src="https://coding.blog/img/blogs/isomorphic-dark.svg" alt="Isomorphic Apps"></p><p><img src="https://coding.blog/img/blogs/isomorphic.svg" alt="Isomorphic Apps"></p></div><p>The complexity of isomorphic apps inevitably brings extra constraints and overheads. For example, you need to re-hydrate
the content on client-side, which means you are limited on how you manipulate that content (e.g. for React SSR, React needs
to maintain full control of the DOM tree). These complexities also make it harder to optimize performance since many more
components and their interactions are affecting it.</p><marker><br>

</marker><p>JAMStack Apps</p><p>Another approach would be to pre-render all your static content and then ship the code for filling in dynamic/interactive
parts to the client. This would allow for the same delivery speed of pre-rendering without sacrificing interactivity
of the content. It also implies a clear separation in the code-base as opposed to isomorphic apps: there is code that
pre-renders stuff, and there is code that goes to client and makes stuff interactive.</p><div><p><img src="https://coding.blog/img/blogs/jamstack-dark.svg" alt="JAMStack"></p><p><img src="https://coding.blog/img/blogs/jamstack.svg" alt="JAMStack"></p></div><p>The JAMStack architecture is specifically suitable for mostly static content, which makes it a perfect choice
for likes of <strong>CODEDOC</strong> (which is for documentation / guides about codes) and <code>coding.blog</code> (which is for blogs about
coding / programming). The simplicity of the workflow allows for easy optimization and high degrees of interoperability
and extensibility.</p><hr><p>While the JAMStack architecture was the most suitable for <a href="https://codedoc.cc/"><strong>CODEDOC</strong></a> and <a href="https://coding.blog/"><code>coding.blog</code></a>,
it mandates a split of content generation code into bits that are executed at build stage and bits that are
shipped to the client. This can quickly add a lot of complexity/overhead for any growing project, so we had to
find a solution that addressed this particular issue.</p><p>In other words, we needed to:</p><ul><li>have a shared component system</li><li>easily mark client-side components so that they are not pre-rendered</li><li>seamlessly where these components were to be rendered in the DOM tree</li><li>conveniently and efficiently collect and bundle the code of these clients</li><li>conveniently attach these bundles to pre-rendered content</li></ul><marker><br>

</marker><p>Additionally, we wanted a minimal toolchain and stack with maximum extensibility and interoperability. Generally
we wanted knowledge of HTML/JS/CSS to suffice for serious customization, which made a <a href="https://reactjs.org/docs/introducing-jsx.html">JSX</a>-based 
syntax an optimal choice for our component system (specifically as Typescript supports it out of the box).</p><p>However, we couldn't use a library like React (or any VirtualDOM based solution) since its sensitivity to external changes to 
the DOM tree meant limitations on how the DOM is manipulated by extensions, either during pre-rendering or on the client.
Besides, we needed our content to be as light-weight as possible, which simply prohibited relatively heavy-weight
operations such as VirtualDOM diffing.</p><hr><p>To satisfy our design goals, we created a JSX-based rendering tool which directly sits on top of DOM APIs.
This is called <a href="https://github.com/CONNECT-platform/connective-html">CONNECTIVE HTML</a>, and on a basic level
is merely a wrapper of DOM APIs that allows using them via JSX:</p><pre><code tabindex="0"><span><span></span><span></span><span></span><span></span></span><p><span>1</span><span>import</span> <span>{</span> Renderer <span>}</span> <span>from</span> <span>'@connectv/html'</span><span>;</span></p><p><span>2</span></p><p><span>3</span><span>const</span> renderer <span>=</span> <span>new</span> <span>Renderer</span><span>(</span><span>)</span><span>;</span></p><p><span>4</span>renderer<span>.</span><span>render</span><span>(</span><span><span><span>&lt;</span>div</span><span>&gt;</span></span><span>Hellow World!</span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span><span>)</span><span>.</span><span>on</span><span>(</span>document<span>.</span>body<span>)</span><span>;</span></p><br></code></pre><p>For more dynamic/reactive content, we simply added plugins to allow rendering 
<a href="https://rxjs-dev.firebaseapp.com/guide/observable">RxJS Observables</a>:</p><pre><code tabindex="0"><span><span></span><span></span><span></span><span></span></span><p><span>1</span><span>import</span> <span>{</span> Renderer <span>}</span> <span>from</span> <span>'@connectv/html'</span><span>;</span></p><p><span>2</span><span>import</span> <span>{</span> timer <span>}</span> <span>from</span> <span>'rxjs'</span><span>;</span></p><p><span>3</span></p><p><span>4</span><span>const</span> renderer <span>=</span> <span>new</span> <span>Renderer</span><span>(</span><span>)</span><span>;</span></p><p><span>5</span>renderer<span>.</span><span>render</span><span>(</span><span><span><span>&lt;</span>div</span><span>&gt;</span></span><span>You have been here for </span><span>{</span><span>timer</span><span>(</span><span>0</span><span>,</span> <span>1000</span><span>)</span><span>}</span><span> second(s).</span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span><span>)</span></p><p><span>6</span>        <span>.</span><span>on</span><span>(</span>document<span>.</span>body<span>)</span><span>;</span></p><br></code></pre><p>This of course meant that for interactive components familiarity with <a href="https://www.learnrxjs.io/">RxJS</a> was required, 
however, you generally do require familiarity with some reactive state management library to be able to 
properly create interactive components. RxJS might not be the easiest such library for people to dive in, but
considering its widespread usage and the overall performance gain, we felt this was a compromise well worth it.</p><blockquote><p>Fun fact: Historically CONNECTIVE HTML was developed first and CODEDOC as a tool to document it. However
as a result of popularity of CODEDOC and subsequently <code>coding.blog</code>, I haven't found the time to use it 
for its original purpose yet.</p></blockquote><hr><p>To meet the remainder of our design goals, we created a tool named <a href="https://github.com/CONNECT-platform/connective-sdh">CONNECTIVE SDH</a>. 
SDH stands for <em>Static/Dynamic HTML</em>, which means this library allowed us to seamlessly create both static (pre-rendered) 
and dynamic (rendered on client-side) HTML content.</p><p>This is how CONNECTIVE SDH works:</p><marker><br>

</marker><h2 id="static-content"><span data-ignore-text=""><span data-ignore-text="">link</span></span>Static Content</h2><p>For pre-rendering (or even SSR), the fact that CONNECTIVE HTML is pretty thin meant that we could simply combine it
with <a href="https://github.com/jsdom/jsdom">JSDOM</a> and add some nice functions for storing the results:</p><pre><code tabindex="0"><span><span></span><span></span><span></span><span></span></span><p><span>1</span><span>import</span> <span>{</span> compile <span>}</span> <span>from</span> <span>'@connectv/sdh'</span><span>;</span></p><p><span>2</span></p><p><span>3</span><span>compile</span><span>(</span><span>renderer</span> <span>=&gt;</span> </p><p><span>4</span>  <span><span><span>&lt;</span>html</span><span>&gt;</span></span><span></span></p><p><span>5</span>    <span><span><span>&lt;</span>head</span><span>&gt;</span></span><span></span></p><p><span>6</span>      <span><span><span>&lt;</span>title</span><span>&gt;</span></span><span>Hellow World Example</span><span><span><span>&lt;/</span>title</span><span>&gt;</span></span><span></span></p><p><span>7</span>    <span><span><span>&lt;/</span>head</span><span>&gt;</span></span><span></span></p><p><span>8</span>    <span><span><span>&lt;</span>body</span><span>&gt;</span></span><span></span></p><p><span>9</span>      <span><span><span>&lt;</span>h1</span><span>&gt;</span></span><span>Hellow World!</span><span><span><span>&lt;/</span>h1</span><span>&gt;</span></span><span></span></p><p><span>10</span>    <span><span><span>&lt;/</span>body</span><span>&gt;</span></span><span></span></p><p><span>11</span>  <span><span><span>&lt;/</span>html</span><span>&gt;</span></span></p><p><span>12</span><span>)</span><span>.</span><span>save</span><span>(</span><span>'dist/index.html'</span><span>)</span><span>;</span></p><br></code></pre><marker><br>

</marker><p>Or for a more <em>component oriented</em> example:</p><div><div data-tab-title="Main Code" data-tab-id="Main Code"><pre><code tabindex="0"><span><span></span><span></span><span></span><span>main.tsx</span></span><p><span>1</span><span>import</span> <span>{</span> compile <span>}</span> <span>from</span> <span>'@connectv/sdh'</span><span>;</span></p><p><span>2</span><span>import</span> <span>{</span> Card <span>}</span> <span>from</span> <span>'./card'</span><span>;</span> </p><p><span>3</span></p><p><span>4</span><span>compile</span><span>(</span><span>renderer</span> <span>=&gt;</span> </p><p><span>5</span>  <span><span><span>&lt;</span>fragment</span><span>&gt;</span></span><span></span></p><p><span>6</span>    <span><span><span>&lt;</span>h1</span><span>&gt;</span></span><span>List of stuff</span><span><span><span>&lt;/</span>h1</span><span>&gt;</span></span><span></span></p><p><span>7</span>    <span><span><span>&lt;</span><span>Card</span></span> <span>title</span><span><span>=</span><span>'</span>🥕Carrots<span>'</span></span> <span>text</span><span><span>=</span><span>'</span>they are pretty good for you.<span>'</span></span><span>/&gt;</span></span><span></span></p><p><span>8</span>  <span><span><span>&lt;/</span>fragment</span><span>&gt;</span></span></p><p><span>9</span><span>)</span><span>.</span><span>save</span><span>(</span><span>'dist/index.html'</span><span>)</span><span>;</span></p><br></code></pre></div><div data-tab-title="Component Code" data-tab-id="comp"><pre><code tabindex="0"><span><span></span><span></span><span></span><span>card.tsx</span></span><p><span>1</span><span>const</span> style <span>=</span> <span><span>`</span><span></span></span></p><p><span>2</span>  display: inline-block;</p><p><span>3</span>  vertical-align: top;</p><p><span>4</span>  padding: 8px;</p><p><span>5</span>  border-radius: 8px;</p><p><span>6</span>  margin: 8px;</p><p><span>7</span>  box-shadow: 0 2px 6px rgba(0, 0, 0, .2);</p><p><span>8</span><span>`</span><span>;</span></p><p><span>9</span></p><p><span>10</span><span>export</span> <span>function</span> <span>Card</span><span>(</span><span><span>{</span> title<span>,</span> text <span>}</span><span>,</span> renderer</span><span>)</span> <span>{</span></p><p><span>11</span>  <span>return</span> <span><span><span>&lt;</span>div</span> <span>style</span><span><span>=</span><span>{</span>style<span>}</span></span><span>&gt;</span></span><span></span></p><p><span>12</span>      <span><span><span>&lt;</span>h2</span><span>&gt;</span></span><span>{</span>title<span>}</span><span><span><span>&lt;/</span>h2</span><span>&gt;</span></span><span></span></p><p><span>13</span>      <span><span><span>&lt;</span>p</span><span>&gt;</span></span><span>{</span>text<span>}</span><span><span><span>&lt;/</span>p</span><span>&gt;</span></span><span></span></p><p><span>14</span>    <span><span><span>&lt;/</span>div</span><span>&gt;</span></span></p><p><span>15</span><span>}</span></p><br></code></pre></div></div><marker><br>

</marker><h2 id="dynamic-content"><span data-ignore-text=""><span data-ignore-text="">link</span></span>Dynamic Content</h2><p>For dynamic components, i.e. components that are to be rendered on the client side, we needed to:</p><ul><li>Collect and bundle their code</li><li>Attach that bundle to pre-rendered content</li><li>Create placeholders to maintain their position in the DOM tree</li></ul><p>With CONNECTIVE SDH, this process looks like this:</p><div><div data-tab-title="Main Code" data-tab-id="Main Code"><pre><code tabindex="0"><span><span></span><span></span><span></span><span>main.tsx</span></span><p><span>1</span><span>import</span> <span>{</span> compile<span>,</span> save<span>,</span> Bundle <span>}</span> <span>from</span> <span>'@connectv/sdh'</span><span>;</span></p><p><span>2</span><span>import</span> <span>{</span> $Counter <span>}</span> <span>from</span> <span>'./counter'</span><span>;</span> </p><p><span>3</span></p><p><span>4</span><span>const</span> bundle <span>=</span> <span>new</span> <span>Bundle</span><span>(</span><span>'./bundle.js'</span><span>,</span> <span>'dist/bundle.js'</span><span>)</span><span>;</span></p><p><span>5</span></p><p><span>6</span><span>compile</span><span>(</span><span>renderer</span> <span>=&gt;</span></p><p><span>7</span>  <span><span><span>&lt;</span>fragment</span><span>&gt;</span></span><span></span></p><p><span>8</span>    <span><span><span>&lt;</span>p</span><span>&gt;</span></span><span></span></p><p><span>9</span>      So this content will be prerendered, but the following component will be</p><p><span>10</span>      rendered on the client side.</p><p><span>11</span>    <span><span><span>&lt;/</span>p</span><span>&gt;</span></span><span></span></p><p><span>12</span>     &lt;$Counter/&gt;</p><p><span>13</span>  <span><span><span>&lt;/</span>fragment</span><span>&gt;</span></span></p><p><span>14</span><span>)</span></p><p><span>15</span> <span>.</span><span>post</span><span>(</span>bundle<span>.</span><span>collect</span><span>(</span><span>)</span><span>)</span>                    </p><p><span>16</span><span>.</span><span>save</span><span>(</span><span>'dist/index.html'</span><span>)</span></p><p><span>17</span> <span>.</span><span>then</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>save</span><span>(</span>bundle<span>)</span><span>)</span>                  </p><br></code></pre></div><div data-tab-title="Component Code" data-tab-id="comp"><pre><code tabindex="0"><span><span></span><span></span><span></span><span>counter.tsx</span></span><p><span>1</span><span>import</span> <span>{</span> state <span>}</span> <span>from</span> <span>"@connectv/core"</span><span>;</span></p><p><span>2</span> <span>import</span> <span>{</span> transport <span>}</span> <span>from</span> <span>"@connectv/sdh/transport"</span><span>;</span></p><p><span>3</span></p><p><span>4</span><span>const</span> style <span>=</span> <span><span>`</span><span></span></span></p><p><span>5</span>  border-radius: 3px;</p><p><span>6</span>  background: #424242;</p><p><span>7</span>  cursor: pointer;</p><p><span>8</span>  padding: 8px;</p><p><span>9</span>  color: white;</p><p><span>10</span>  display: inline-block;</p><p><span>11</span>  box-shadow: 0 2px 6px rgba(0, 0, 0, .12);</p><p><span>12</span><span>`</span><span>;</span></p><p><span>13</span></p><p><span>14</span><span>export</span> <span>function</span> <span>Counter</span><span>(</span><span>_<span>,</span> renderer</span><span>)</span> <span>{</span></p><p><span>15</span>  <span>const</span> count <span>=</span> <span>state</span><span>(</span><span>0</span><span>)</span><span>;</span></p><p><span>16</span>  <span>return</span> <span>(</span></p><p><span>17</span>    <span><span><span>&lt;</span>div</span> <span>style</span><span><span>=</span><span>{</span>style<span>}</span></span> <span>onclick</span><span><span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> count<span>.</span>value<span>++</span><span>}</span></span><span>&gt;</span></span><span></span></p><p><span>18</span>      You have clicked <span>{</span>count<span>}</span><span> times!</span></p><p><span>19</span>    <span><span><span>&lt;/</span>div</span><span>&gt;</span></span></p><p><span>20</span>  <span>)</span><span>;</span></p><p><span>21</span><span>}</span></p><p><span>22</span></p><p><span>23</span> <span>export</span> <span>const</span> $Counter <span>=</span> <span>transport</span><span>(</span>Counter<span>)</span><span>;</span> </p><br></code></pre></div></div><marker><br>

</marker><h3 id="placeholders"><span data-ignore-text=""><span data-ignore-text="">link</span></span>Placeholders</h3><p>In this example, <code>Counter</code> is a component that needs to be rendered on the client-side, i.e. it needs
to be <em>transported</em> to the client. This is done via …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://coding.blog/blog/jamstack">https://coding.blog/blog/jamstack</a></em></p>]]>
            </description>
            <link>https://coding.blog/blog/jamstack</link>
            <guid isPermaLink="false">hacker-news-small-sites-23641457</guid>
            <pubDate>Thu, 25 Jun 2020 14:54:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Angular 10 Now Available]]>
            </title>
            <description>
<![CDATA[
Score 26 | Comments 7 (<a href="https://news.ycombinator.com/item?id=23640966">thread link</a>) | @theodorejb
<br/>
June 25, 2020 | https://blog.angular.io/version-10-of-angular-now-available-78960babd41 | <a href="https://web.archive.org/web/*/https://blog.angular.io/version-10-of-angular-now-available-78960babd41">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><section><div><div><div><div><div><div><p><a href="https://blog.angular.io/@stephenfluin?source=post_page-----78960babd41----------------------" rel="noopener"><img alt="Stephen Fluin" src="https://miro.medium.com/fit/c/96/96/1*y_L34o3bW0QELQm1KOFMTw.jpeg" width="48" height="48"></a></p></div></div></div></div><p id="0c65">Version 10.0.0 is here! This is a <a href="https://semver.org/#spec-item-8" target="_blank" rel="noopener">major</a> release that spans the entire platform, including the framework, Angular Material, and the CLI. This release is smaller than typical; it has only been 4 months since we released version 9.0 of Angular.</p><figure><div><div><div><div><p><img src="https://miro.medium.com/max/60/1*NW08J81iLpExTFTz4wnWHQ.jpeg?q=20" width="2048" height="1365" role="presentation"></p><p><img src="https://miro.medium.com/max/4096/1*NW08J81iLpExTFTz4wnWHQ.jpeg" width="2048" height="1365" srcset="https://miro.medium.com/max/552/1*NW08J81iLpExTFTz4wnWHQ.jpeg 276w, https://miro.medium.com/max/1104/1*NW08J81iLpExTFTz4wnWHQ.jpeg 552w, https://miro.medium.com/max/1280/1*NW08J81iLpExTFTz4wnWHQ.jpeg 640w, https://miro.medium.com/max/1400/1*NW08J81iLpExTFTz4wnWHQ.jpeg 700w" sizes="700px" role="presentation"></p></div></div></div></div><figcaption>Photo of Butterfly Beach by Minko Gechev</figcaption></figure><p id="346b">We try to release two major versions each year to keep Angular synchronized with the rest of the JavaScript ecosystem and to have a predictable schedule. We plan to release version 11 this fall.</p><p id="156d"><strong>New Date Range Picker</strong></p><p id="ba59">Angular Material now includes a new date range picker.</p><figure><div><div><div><p><img src="https://miro.medium.com/max/60/0*ruU5G-8_hqEp3UBY?q=20" width="410" height="94" role="presentation"></p><p><img src="https://miro.medium.com/max/820/0*ruU5G-8_hqEp3UBY" width="410" height="94" srcset="https://miro.medium.com/max/552/0*ruU5G-8_hqEp3UBY 276w, https://miro.medium.com/max/820/0*ruU5G-8_hqEp3UBY 410w" sizes="410px" role="presentation"></p></div></div></div><figcaption>Image of the new date range picker</figcaption></figure><p id="f310">To use the new date range picker, you can use the <code>mat-date-range-input</code> and <code>mat-date-range-picker</code> components.</p><p id="5add">See <a href="https://stackblitz.com/angular/nknyovevygv?file=src%2Fapp%2Fdate-range-picker-overview-example.html" target="_blank" rel="noopener">this example on StackBlitz</a>.</p><p id="41ba">Learn more about <a href="https://next.material.angular.io/components/datepicker/overview#date-range-selection" target="_blank" rel="noopener">date range selection</a>.</p><p id="16c4"><strong>Warnings about CommonJS imports</strong></p><p id="aadf">When you use a dependency that is packaged with CommonJS, it can result in <a href="https://web.dev/commonjs-larger-bundles/" target="_blank" rel="noopener">larger slower applications</a>.</p><p id="9444">Starting with version 10, we now warn you when your build pulls in one of these bundles. If you’ve started seeing these warnings for your dependencies, let your dependency know that you’d prefer an ECMAScript module (ESM) bundle.</p><figure><div><div><div><div><p><img src="https://miro.medium.com/max/60/0*udjNtSSP-495QNzL?q=20" width="1600" height="357" role="presentation"></p><p><img src="https://miro.medium.com/max/3200/0*udjNtSSP-495QNzL" width="1600" height="357" srcset="https://miro.medium.com/max/552/0*udjNtSSP-495QNzL 276w, https://miro.medium.com/max/1104/0*udjNtSSP-495QNzL 552w, https://miro.medium.com/max/1280/0*udjNtSSP-495QNzL 640w, https://miro.medium.com/max/1400/0*udjNtSSP-495QNzL 700w" sizes="700px" role="presentation"></p></div></div></div></div><figcaption>CommonJS or AMD dependencies can cause optimization bailouts</figcaption></figure><p id="dde5"><strong>Optional Stricter Settings</strong></p><p id="7e3d">Version 10 offers a more strict project setup when you create a new workspace with <code>ng new</code>.</p><pre><span id="4b6e">ng new --strict</span></pre><p id="9fa5">Enabling this flag initializes your new project with a few new settings that improve maintainability, help you catch bugs ahead of time, and allow the CLI to perform advanced optimizations on your app. Specifically, the <code>strict</code> flag does the following:</p><ul><li id="0ab9">Enables strict mode in TypeScript</li><li id="0f1b">Turns template type checking to Strict</li><li id="6313">Default bundle budgets have been reduced by ~75%</li><li id="855e">Configures linting rules to <a href="https://palantir.github.io/tslint/rules/no-any/" target="_blank" rel="noopener">prevent declarations of type </a><code><a href="https://palantir.github.io/tslint/rules/no-any/" target="_blank" rel="noopener">any</a></code></li><li id="cb7d">Configures your app as side-effect free to enable more advanced tree-shaking</li></ul><p id="2213"><strong>Keeping Up to Date with the Ecosystem</strong></p><p id="e568">As usual, we have made a few updates to the dependencies of Angular to stay synchronized with the JavaScript ecosystem.</p><ul><li id="0658">TypeScript bumped to <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-9.html" target="_blank" rel="noopener">TypeScript 3.9</a></li><li id="498e">TSLib has been updated to v<a href="https://github.com/microsoft/tslib/releases/tag/2.0.0" target="_blank" rel="noopener">2.0</a></li><li id="50e3">TSLint has been updated to v6</li></ul><p id="fcf0">We’ve also updated our project layout. Starting with version 10 you will see a new <code>tsconfig.base.json</code>. This additional <code><a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html" target="_blank" rel="noopener">tsconfig.json</a></code><a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html" target="_blank" rel="noopener"> file</a> better supports the way that IDEs and build tooling resolve type and package configurations.</p><p id="948c"><strong>New Default Browser Configuration</strong></p><p id="eb51">We’ve updated the browser configuration for new projects to exclude older and less used browsers.</p><p id="686d"><strong>v9 Defaults</strong></p><figure><div><div><div><div><p><img src="https://miro.medium.com/max/46/0*jhzqz-biEH3Bd7zQ?q=20" width="787" height="1036" role="presentation"></p><p><img src="https://miro.medium.com/max/1574/0*jhzqz-biEH3Bd7zQ" width="787" height="1036" srcset="https://miro.medium.com/max/552/0*jhzqz-biEH3Bd7zQ 276w, https://miro.medium.com/max/1104/0*jhzqz-biEH3Bd7zQ 552w, https://miro.medium.com/max/1280/0*jhzqz-biEH3Bd7zQ 640w, https://miro.medium.com/max/1400/0*jhzqz-biEH3Bd7zQ 700w" sizes="700px" role="presentation"></p></div></div></div></div></figure><p id="8574"><strong>v10 Defaults</strong></p><figure><div><div><div><p><img src="https://miro.medium.com/max/60/0*kLsNxh2hOj_aQ8HV?q=20" width="685" height="479" role="presentation"></p><p><img src="https://miro.medium.com/max/1370/0*kLsNxh2hOj_aQ8HV" width="685" height="479" srcset="https://miro.medium.com/max/552/0*kLsNxh2hOj_aQ8HV 276w, https://miro.medium.com/max/1104/0*kLsNxh2hOj_aQ8HV 552w, https://miro.medium.com/max/1280/0*kLsNxh2hOj_aQ8HV 640w, https://miro.medium.com/max/1370/0*kLsNxh2hOj_aQ8HV 685w" sizes="685px" role="presentation"></p></div></div></div></figure><p id="a101">This has the side effect of disabling ES5 builds by default for new projects. To enable ES5 builds and differential loading for browsers that require it (such as IE or UC Browser), simply <a href="https://github.com/browserslist/browserslist#browserslist-" target="_blank" rel="noopener">add the browsers you need to support</a> in the <code>.browserslistrc</code> file.</p><p id="df1c"><strong>Angular Team Fixit</strong></p><p id="4207">We’ve dramatically increased our investment in working with the community. In the last three weeks our open issue count has decreased by over 700 issues across <a href="https://github.com/angular/angular/issues" target="_blank" rel="noopener">framework</a>, <a href="https://github.com/angular/angular-cli/issues" target="_blank" rel="noopener">tooling</a>, and <a href="https://github.com/angular/components/issues" target="_blank" rel="noopener">components</a>. We’ve touched over 2,000 issues, and we plan to make large investments over the next few months, working with the community to do even more.</p><p id="c357"><strong>Deprecations and Removals</strong></p><p id="6e18">We’ve made several new deprecations and removals from Angular.</p><p id="61da">The <a href="https://g.co/ng/apf" target="_blank" rel="noopener">Angular Package Format</a> no longer includes ESM5 or FESM5 bundles, saving you 119MB of download and install time when running <code>yarn</code> or <code>npm install</code> for Angular packages and libraries. These formats are no longer needed as any downleveling to support ES5 is done at the end of the build process.</p><p id="a660">Based on heavy consultation with the community, we are deprecating support for older browsers including IE 9, 10, and <a href="https://en.wikipedia.org/wiki/Internet_Explorer_Mobile" target="_blank" rel="noopener">Internet Explorer Mobile</a>.</p><p id="4190">You can <a href="http://v10.angular.io/guide/deprecations" target="_blank" rel="noopener">read more about our deprecations and removals</a>.</p><p id="792e">Visit <a href="https://update.angular.io/" target="_blank" rel="noopener">update.angular.io</a> for detailed information and guidance. To have the best update experience, we recommend always upgrading one major release at a time.</p><p id="4859">To update:</p><pre><span id="d24d">ng update @angular/cli @angular/core</span></pre><p id="e72b">You can read more about this update in our <a href="https://v10.angular.io/guide/updating-to-version-10" target="_blank" rel="noopener">Updating to version 10 guide</a>.</p></div></div></section></div></div>]]>
            </description>
            <link>https://blog.angular.io/version-10-of-angular-now-available-78960babd41</link>
            <guid isPermaLink="false">hacker-news-small-sites-23640966</guid>
            <pubDate>Thu, 25 Jun 2020 14:13:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Logistic regression from scratch]]>
            </title>
            <description>
<![CDATA[
Score 144 | Comments 52 (<a href="https://news.ycombinator.com/item?id=23640762">thread link</a>) | @pmuens
<br/>
June 25, 2020 | https://philippmuens.com/logistic-regression-from-scratch/ | <a href="https://web.archive.org/web/*/https://philippmuens.com/logistic-regression-from-scratch/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		<p>You can find working code examples (including this one) in my <a href="https://github.com/pmuens/lab">lab repository</a> on <a href="https://github.com/pmuens">GitHub</a>.</p><p>Sometimes it's necessary to split existing data into several classes in order to predict new, unseen data. This problem is called <a href="https://en.wikipedia.org/wiki/Statistical_classification">classification</a> and one of the algorithms which can be used to learn those classes from data is called Logistic Regression.</p><p>In this article we'll take a deep dive into the Logistic Regression model to learn how it differs from other regression models such as <a href="https://en.wikipedia.org/wiki/Linear_regression">Linear-</a> or <a href="https://en.wikipedia.org/wiki/Linear_regression#Simple_and_multiple_linear_regression">Multiple Linear Regression</a>, how to think about it from an intuitive perspective and how we can translate our learnings into code while implementing it from scratch.</p><h2 id="linear-regression-vs-logistic-regression">Linear Regression vs. Logistic Regression</h2><p>If you've read the post about <a href="https://philippmuens.com/linear-and-multiple-regression-from-scratch/">Linear- and Multiple Linear Regression</a> you might remember that the main objective of our algorithm was to find a best fitting line or <a href="https://en.wikipedia.org/wiki/Hyperplane">hyperplane</a> respectively.</p><p>To recap real quick, a line can be represented via the slop-intercept form as follows:</p><p>\[ y = mx + b \]</p><p>Here, \(m\) represents the slope and \(b\) the y-intercept.</p><p>In Linear Regression we've used the existing data to find a line in slope-intercept form (a \(m\) and \(b\) combination) which "best-fitted through" such data.</p><p>Extending the slope-intercept form slightly to support multiple \(x\) values and multiple slopes (we'll use \(\beta_n\) instead of \(m_n\)) yields the following:</p><p>\[ y = &nbsp;\beta_1x_1 + ... + \beta_nx_n + b \]</p><p>This "scaled-up" slope-intercept formula was used in the <a href="https://en.wikipedia.org/wiki/Linear_regression#Simple_and_multiple_linear_regression">Multiple Linear Regression</a> model to find the \(\beta\) and \(b\) values for the <a href="https://en.wikipedia.org/wiki/Hyperplane">hyperplane</a> which "best-fitted" the data. Once found we were able to use it for predictions by plugging in \(x\) values to get respective \(y\) values.</p><p>Linear Regression models always map a set of \(x\) values to a resulting \(y\) value on a <a href="https://en.wikipedia.org/wiki/Continuous_function">continuous</a> scale. This means that the \(y\) value can e.g. be \(0\), \(42\) or \(5.023.212\). How would we use such a Regression model if our \(y\) value is categorical such as a binary value which is either \(0\) or \(1\)? Is there a way to define a threshold so that a value such as \(42\) is assigned to the category \(1\) while a small value such as \(0.002\) gets assigned to the category \(0\)?</p><p>That's where Logistic Regression comes into play. With Logistic Regression we can map any resulting \(y\) value, no matter its magnitude to a value between \(0\) and \(1\).</p><p>Let's take a closer look into the modifications we need to make to turn a Linear Regression model into a Logistic Regression model.</p><h2 id="sigmoid-functions">Sigmoid functions</h2><p>At the very heart of Logistic Regression is the so-called <a href="https://en.wikipedia.org/wiki/Sigmoid_function">Sigmoid function</a>. A Sigmoid function is a class of functions which follows an S-shape when plotted.</p><p>The most prominent Sigmoid function is the so-called <a href="https://en.wikipedia.org/wiki/Logistic_function">Logistic function</a> which was developed by <a href="https://en.wikipedia.org/wiki/Pierre_Fran%C3%A7ois_Verhulst">Pierre Francois Verhulst</a> to model <a href="https://en.wikipedia.org/wiki/Population_growth">population grown</a>. It's mathematically described via this formula:</p><p>\[ f(x) = \frac{1}{1+e^{-x}} \]</p><p>Don't be intimidated by the math! Right now all you need to know is that this function takes any \(x\) value and maps it to a \(y\) value which ranges from \(0\) to \(1\).</p><p>Plotting the function for a range of \(x\) values proofs this claim and results in the aforementioned S-shape curve:</p><figure><img src="https://philippmuens.com/content/images/2020/06/zsigmoid_result.png"></figure><p>Note that the function gets closer and closer to the \(y\) value \(0\) or \(1\) as the \(x\) values get smaller or larger respectively. Also note that the \(x\) value \(0\) results in the \(y\) value \(0.5\).</p><p>This is exactly what we need. with this function we're able to "squish" any number, no matter its magnitude into a value ranging from \(0\) to \(1\). This makes the function outcome predictable which is useful when we later on define threshold values to associate function outputs with classes.</p><p>Let's turn the function into code:</p><pre><code>def sigmoid(x: float) -&gt; float:
    return 1 / (1 + exp(-x))

assert sigmoid(0) == 0.5</code></pre><p><strong><u>Note</u></strong>: Although there are many <a href="https://en.wikipedia.org/wiki/Sigmoid_function#Examples">different Sigmoid functions</a> to choose from, a lot of people use the name "Sigmoid function" when talking about the Logistic function. We'll adhere to this convention and use the term "Sigmoid function" as a synonym for Logistic function.</p><h2 id="from-linear-regression-to-logistic-regression">From Linear Regression to Logistic Regression</h2><p>Now that we've learned about the "mapping" capabilities of the Sigmoid function we should be able to "wrap" a Linear Regression model such as <a href="https://en.wikipedia.org/wiki/Linear_regression#Simple_and_multiple_linear_regression">Multiple Linear Regression</a> inside of it to turn the regressions raw output into a value ranging from \(0\) to \(1\).</p><p>Let's translate this idea into Math. Recall that our Multiple Linear Regression model looks like this:</p><p>\[ y = &nbsp;\beta_1x_1 + ... + \beta_nx_n + b \]</p><p>"Wrapping" this in the Sigmoid function (we use \(\sigma\) to represent the Sigmoid function) results in the following:</p><p>\[ y = \sigma(\beta_1x_1 + ... + \beta_nx_n + b) \]</p><p>Easy enough! Let's turn that into code.</p><p>The first thing we need to do is to implement the underlying Multiple Linear Regression model. Looking at the Math it seems to be possible to use the <a href="https://en.wikipedia.org/wiki/Dot_product">dot-product</a> to calculate the \(\beta\) and \(x\) part to which we then add the single \(b\) value.</p><p>To make everything easier to calculate and implement we'll use a small trick. Multyping a value by the identify \(1\) yields the value so we prepend \(1\) to the \(x\) values and \(b\) to the \(\beta\) values. This way we can solely use the dot-product calculation without the necessity to add \(b\) separately later on. Here's the mathematical formulation of that trick:</p><p>\[ \vec{x} = \begin{pmatrix} 1 \\ x_1 \\ ... \\ x_n \end{pmatrix} \vec{\beta} = \begin{pmatrix} b \\ \beta_1 \\ ... \\ \beta_n \end{pmatrix} \]</p><p>\[ y = \vec{x} \cdot \vec{m} = \sum_{i=1}^n x_i \beta_i = x_1 \times \beta_1 + ... + x_n \times \beta_n \]</p><p>Once we've calculated the dot-product we need to pass it into the Sigmoid function such that its result is translated ("squished") into a value between \(0\) and \(1\).</p><p>Here's the implementation for the <code>dot</code> function which calculates the <a href="https://en.wikipedia.org/wiki/Dot_product">dot-product</a>:</p><pre><code>def dot(a: List[float], b: List[float]) -&gt; float:
    assert len(a) == len(b)
    return sum([a_i * b_i for a_i, b_i in zip(a, b)])

assert dot([1, 2, 3, 4], [5, 6, 7, 8]) == 70</code></pre><p>And here's the <code>squish</code> function which takes as parameters the \(x\) and \(\beta\) values (remember that we've prepended a \(1\) to the \(x\) values and the \(b\) to the \(\beta\) values), uses the <code>dot</code> function to calculate the dot-product of \(x\) and \(\beta\) and then passes this result into the Sigmoid function to map it to a value between \(0\) and \(1\):</p><pre><code>def squish(beta: List[float], x: List[float]) -&gt; float:
    assert len(beta) == len(x)
    # Calculate the dot product
    dot_result: float = dot(beta, x)
    # Use sigmoid to get a result between 0 and 1
    return sigmoid(dot_result)

assert squish([1, 2, 3, 4], [5, 6, 7, 8]) == 1.0</code></pre><h2 id="the-intuition-behind-the-0-1-range">The intuition behind the 0-1 range</h2><p>We've talked quite a lot about how the Sigmoid function is our solution to make the function outcome predictable as all values are mapped to a \(0\) - \(1\) range. But what does a value in that range represent? Let's take a look at an example.</p><p>The following is a data set which describes how long students have studied for an exam and whether they've passed the exam given the hours they've studied.</p><!--kg-card-begin: html--><table>
    <thead>
        <tr>
            <th>Hours studied</th>
            <th>Exam Passed</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>0,5</td>
            <td>0</td>
        </tr>
        <tr>
            <td>1,0</td>
            <td>0</td>
        </tr>
        <tr>
            <td>1,5</td>
            <td>0</td>
        </tr>
        <tr>
            <td>2,0</td>
            <td>0</td>
        </tr>
        <tr>
            <td>2,5</td>
            <td>1</td>
        </tr>
        <tr>
            <td>3,0</td>
            <td>0</td>
        </tr>
        <tr>
            <td>3,5</td>
            <td>1</td>
        </tr>
        <tr>
            <td>4,0</td>
            <td>1</td>
        </tr>
        <tr>
            <td>4,5</td>
            <td>0</td>
        </tr>
        <tr>
            <td>5,0</td>
            <td>1</td>
        </tr>
        <tr>
            <td>5,5</td>
            <td>1</td>
        </tr>
        <tr>
            <td>6,0</td>
            <td>1</td>
        </tr>
    </tbody>
</table><!--kg-card-end: html--><p>Taking a glance at the data it seems to be that the more hours the students studied, the more likely they were to pass the exam. Intuitively that makes sense.</p><p>Let's plot the data to ensure that our intuition is correct:</p><figure><img src="https://philippmuens.com/content/images/2020/06/zmock_student_data.png"></figure><p>Looking at the plotted data we can immediately see that the values seem to "stick" to either the bottom or top of the graph. Given that it seems to be infeasible to use a Linear Regression model to find a line which best describes the data. How would this line be fitted through the data if the values we'd expect this line should produce are either \(o\) or \(1\)?</p><p>Let's try a thought experiment. What would happen if we've somehow found some coefficients \(\beta\) for the Linear Regression model which "best" describe the data and pass the result it computes through the Sigmoid function? Here's the graph from above with the Sigmoid function added to it:</p><figure><img src="https://philippmuens.com/content/images/2020/06/zmock_student_data_w_sigmoid.png"></figure><p>Looking at the plotting above we can see that the Sigmoid function ensures that the result from the "underlying" Linear Regression model is mapped onto a scale between \(0\) and \(1\), which in turn makes it possible to e.g. define a threshold at \(0.5\) to say that a value which is greater than \(0.5\) might be a predictor for a student passing the exam while a value less than \(0.5\) might mean that she'll fail the exam.</p><p>Note that the wording in the last sentence isn't a coincidence. The value the Signoid function produces can be interpreted as a probability where \(0\) means \(0%\) probability and \(1\) means a \(100%\) probability.</p><h2 id="the-probability-density-function">The Probability Density Function</h2><p>As it turns out we can translate our findings from the previous section into a function called <a href="https://en.wikipedia.org/wiki/Probability_density_function">Probability density function</a> or (PDF for short).</p><p>In particular we can define a <a href="https://en.wikipedia.org/wiki/Conditional_probability">conditional probability</a> which states that given some \(\beta\) and \(x_i\), each corresponding \(y_i\) should equal \(1\) with probability \(\sigma(\beta x_i)\) and \(0\) with probability \(1-\sigma(\beta x_i)\):</p><p>\[ P(y_i \mid \beta x_i) = \sigma(\beta x_i)^{y_i} \times (1-\sigma(\beta x_i))^{1-y_i} \]</p><p>Looking at the formula above it might be a mystery how we deduced it from our verbal description from above. Here's something I want you to try: Please apply the formula by setting \(y_i\) to \(0\) and after that to \(1\) and see what happens. What you'll notice is that depending on what value you set \(y_i\) to, only one part of the formula stays the same while the other is canceled out.</p><p>Here's what we'll end up with if we set \(y_i\) to \(0\) and \(1\):</p><p>\[ 1-\sigma(\beta x_i) \quad \textrm{if} &nbsp;y_i = 0 \]</p><p>\[ \sigma(\beta x_i) \quad \textrm{if} &nbsp;y_i = 1 \]</p><p>And that's exactly the desired behavior we described above.</p><h2 id="deriving-a-loss-function">Deriving a Loss function</h2><p>With Logistic Regression our main objective is to find the models \(\beta\) parameters which maximize the likelihood that for a pair of \(x\) values the \(y\) value …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://philippmuens.com/logistic-regression-from-scratch/">https://philippmuens.com/logistic-regression-from-scratch/</a></em></p>]]>
            </description>
            <link>https://philippmuens.com/logistic-regression-from-scratch/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23640762</guid>
            <pubDate>Thu, 25 Jun 2020 13:54:15 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What vertical farming and ag startups don't understand about agriculture, part 2]]>
            </title>
            <description>
<![CDATA[
Score 120 | Comments 118 (<a href="https://news.ycombinator.com/item?id=23640011">thread link</a>) | @kickout
<br/>
June 25, 2020 | http://thinkingagriculture.io/what-sv-doesnt-understand-about-agriculture-part-ii/ | <a href="https://web.archive.org/web/*/http://thinkingagriculture.io/what-sv-doesnt-understand-about-agriculture-part-ii/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-20">
		
	
	<div>
		
<p>Some commenters (/u/coderintherye chain notably) on the <a href="https://news.ycombinator.com/item?id=23630201">HN post</a> of the <a href="https://thinkingagriculture.io/what-silicon-valley-doesnt-understand-about-agriculture/">original article</a> brought up good points that I wanted to expand on and provide some additional context. Also for clarification: although farming is truly global, most ‘farming’ I refer to pertains to the United States (<a href="https://en.wikipedia.org/wiki/Agriculture_in_the_United_States">which is an agriculture juggernaut</a>), but in my experience should reasonably translate across agriculture zones (pending equivalent laws and climatic factors).</p>



<p><strong><em>There is ample VC money for Ag startups</em></strong></p>



<p>The original intention of the article wasn’t to bemoan the lack of capital available for <a href="https://agiowa.com/portfolio/">founders focused on agriculture</a> (there is actually plenty of capital–check out <a href="https://agfundernews.com/">AgFunderNews</a> for examples of successful raises). Instead, it is a recommendation for anyone entering the space to understand the industry and its history to harness existing synergies rather than try and swim upstream. Watching capital go to ‘solved’ problems is painful, because there are many opportunities for a unicorn ag startup if aimed in the correct space. Vertical farming for non-vegetables (or fruits) is likely dead-on-pitch. Yes, vertical farming <em>is</em> and <em>could be</em> successful, but those markets are very specific and probably 10x smaller than people think. Nice businesses no doubt, but not market shaping behemoths VCs are after. Agriculture is rightfully a commodity and the market will brutalize ideas/companies that can’t turn a profit. One bad year (droughts in 2011 and 2012 in the US Midwest) from external forces can absolutely put farmers out of business. Indoor farming has all of the risks of outdoor ag–and more! Indoor farming requires water (whose source can dry up and get shut off unexpectedly, just like a drought), has pests, and requires artificial lighting (power outage for 5 days? Uh oh). Herbicides (and sometimes pesticides) are actually an example of innovation pre-SV. Alternate technologies (i.e mechanical) didn’t work or were uneconomical for the time period; thus, chemical solutions seemed to thrive (glyphosate/glufosinate resistant corn/soy/wheat/cotton/sugar beets &amp; <a href="https://agrilife.org/lubbock/files/2020/02/BtTraitTable_FEB_2020.pdf">BT resistance for insects</a>). I predict in next 5-20 years we see that flip, where chemical and biological solutions fall out in favor of mechanized solutions (who wouldn’t want a semi-autonomous robot pulling weeds in fields in favor of a chemical solution that is <a href="https://www.nbcnews.com/news/us-news/bayer-reaches-10-5-billion-settlement-roundup-cancer-lawsuits-n1232026">open to litigation</a>)? We just have too little understanding of 2nd and 3rd order effects of disrupting nature at this scale (<a href="https://www.nature.com/articles/s41598-019-49660-6">gene drives included</a>, as promising as they appear) using these incredibly effective chemicals.</p>



<p><strong><em>Financing in the Heartland</em></strong></p>



<p>I won’t speak of financing agricultural operations in a municipality not located in the United States, as even understanding the US situation takes time and effort. Let’s be clear though: Most farmers <em>need</em> to borrow capital just to operate for a given year (hence, there is a note called an ‘operating loan’) and financing agriculture operations is more and more important as the size of farms increases. They buy seed, fertilizer, feed, chemicals, etc. to be able to produce an output to then (hopefully) sell at a profit–all to rinse and repeat. Buying big expensive new tractors ($300k+ USD), buildings to store the machines, grain storage, fencing, animal houses–all generally require a loan. Because of the huge cost to purchase these necessities, financing institutions generally need to have a <em>very</em> thorough understanding of the operation (Only farm 160 acres of corn,soy,or wheat? Good luck buying equipment). So bankers have become very good (not perfect) at evaluating and swaying farming practices to ensure maximum likelihood of repayment. Seriously, check of the used auction prices of ag machinery sometime–<a href="https://www.bigiron.com/Lots/2011JohnDeere8335RMFWDTractor-3">this tractor</a> is 10 years old and commands the price of a new Tesla. Is ag financing a place that needs disruption? Likely no because ag lending has evolved hand-in-hand in rural communities where agricultural production is the predominant industry. Because they evolved with ag, they likely have already captured the +EV that startups tend to seek because their very existence depends on it. So where <em>are</em> the value proposition? I know nothing of their founding, but the previous auction link is from <a href="https://www.bigiron.com/">Big Iron Auctions</a> and those founders likely understood ag (“hey, there is a robust secondary market for farm machinery”) and created on-line version of it–with what appears to be great success. I’d imagine these on-line secondary markets exist in Brazil and Eastern Europe given there agriculture exposure. </p>



<p><strong><em>Success Stories</em></strong></p>



<p>There are some truly incredible examples of engineering and innovation in agriculture that focus on the mechanization and scale <em>that already exists</em>. Transplanting vegetables in the Central Valley (CA) used to be labor intensive–<a href="https://www.planttape.com/">this brilliant solution solved that</a>. Auto-steer <a href="https://www.fieldbee.com/blog/fieldbee-tractor-autosteer-versus-other-systems/">systems</a> that leverage machinery that already exists. Sometimes the innovation is statistical/computation (<a href="https://www.annualreviews.org/doi/full/10.1146/annurev-animal-021815-111422">genomic prediction has revolutionized dairy cattle</a>) Starting businesses is hard and agriculture is no different.</p>



<p>Stay away from vertical farming–unless you plan on growing saffron or figure out a way to cultivate morel mushrooms!</p>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->

				
</article></div>]]>
            </description>
            <link>http://thinkingagriculture.io/what-sv-doesnt-understand-about-agriculture-part-ii/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23640011</guid>
            <pubDate>Thu, 25 Jun 2020 12:44:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Java's Stream Implementation with Go Generics]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 0 (<a href="https://news.ycombinator.com/item?id=23639960">thread link</a>) | @shagabutdinov
<br/>
June 25, 2020 | https://snake-ci.com/blog/go2go-stream/ | <a href="https://web.archive.org/web/*/https://snake-ci.com/blog/go2go-stream/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
									<div>
										
										<p>The Go team recently released a new post in the Go blog called
<a href="https://blog.golang.org/generics-next-step">Â«The Next Step in GenericsÂ»</a> and updated the design draft on
<a href="https://go.googlesource.com/proposal/+/refs/heads/master/design/go2draft-type-parameters.md">Â«Type ParametersÂ»</a> (a long one).</p>

<p>In the current post I’m going to describe how to port Java’s Stream to Go 2 Generics.</p>

<p>Let’s make it straightforward â€” define the Stream:</p>

<pre><code>type Stream(type Type) struct {
	slice    []Type
	parallel bool
}
</code></pre>

<p>Here we declare a new type using type parameter <code>Type</code> with underlying slice <code>[]Type</code>.</p>

<p>And let’s have a constructor:</p>

<pre><code>func Of(type Type)(slice []Type) *Stream(Type) {
	return &amp;Stream(Type){
		slice: slice,
	}
}
</code></pre>

<p>The parameter <code>(type Type)</code> after name of function and in type declaration is Type Parameter.
The type parameter is required whenever we are going to use generics.</p>

<p>Now we can implement core functions of a typical stream:</p>

<ul>
<li>Filter</li>
<li>Map</li>
<li>Reduce</li>
<li>ForEach</li>
<li>Collect</li>

<li><p>AnyMatch/AllMatch/NoneMatch</p>

<pre><code>func (stream *Stream(Type)) Filter(predicate func(Type) bool) *Stream(Type) {
	filtered := []Type{}
	for _, item := range stream.slice {
		if predicate(item) {
			filtered = append(filtered, item)
		}
	}
	stream.slice = filtered
	return stream
}

func Map(type Type, R)(stream *Stream(Type), predicate func(Type) R) *Stream(R) {
	slice := make([]R, len(stream.slice))
	for i, item := range stream.slice {
		slice[i] = predicate(item)
	}
	return Of(slice)
}

func Reduce(type Type, R)(stream *Stream(Type), predicate func(R, Type) R) R {
	var result R
	for _, item := range stream.slice {
		result = predicate(result, item)
	}
	return result
}

func (stream *Stream(Type)) ForEach(predicate func(Type)) *Stream(Type) {
	for _, item := range stream.slice {
		predicate(item)
	}
	return stream
}
</code></pre></li>
</ul>

<p>Notice that Map and Reduce functions are not declared on <code>Stream(Type)</code>. It’s one of unsolved problems of current generics
design draft â€” parametrized methods are not permitted.</p>

<p>It means that we can have a function that receives type <code>A</code> and returns type <code>B</code>:</p>

<pre><code>func foo(type A, B) (a A) B
</code></pre>

<p>But we can’t declare a parametrized method on type <code>Struct(A)</code> like this:</p>

<pre><code>func (s Struct(A)) foo(type B) (a A) B
</code></pre>

<blockquote>
<p>This design draft does not permit methods to declare type parameters that are specific to the method. The receiver may
have type parameters, but the method not add any type parameters.
<a href="https://go.googlesource.com/proposal/+/refs/heads/master/design/go2draft-type-parameters.md#no-parameterized-methods">Quote from the updated design draft</a></p>
</blockquote>

<p>It’s time for the cherry on top â€” <code>Stream(Type).Collect()</code>.</p>

<p>The signature of Collect function will be pretty simple:</p>

<pre><code>func Collect(type Type, Col)(
	stream *Stream(Type),
	collector collector.Collector(Type, Col),
) Col
</code></pre>

<p>Notice that now we have two type parameters â€” one for original type that was used for creating a stream and another one
for resulting collection.</p>

<p>Here is a interface for a typical collector that consists of four functions:</p>

<ul>
<li><code>Supply()</code> â€” a function that creates and returns a new result container.</li>
<li><code>Accumulate()</code> â€” a function that folds a value into a mutable result container.</li>
<li><code>Combine()</code> â€” a function that accepts two partial results and merges them. This is going to be used only in parallel mode.</li>

<li><p><code>Finish()</code> â€” while in Java this method converts from an intermediate type to the final result type, but in order to save
the simplicity of the implementation, it will return the same type.</p>

<pre><code>type Collector(type Type, Col) interface {
	Supply() Col
	Accumulate(Col, Type) Col
	Finish(Col) Col
	Combine(Col, Col) Col
}
</code></pre></li>
</ul>

<p>Now we have the interface, we need an implementation. But since we want to allow developers to add
their own implementations without declaring new types, we need a constructor that will accept functions, think of it
like <code>http.HandleFunc()</code> which is often used to wrap functions and returns <code>http.Handler</code>.</p>

<p>We will declare a new constructor for <code>Collector(Type, Col)</code> like we did for <code>Stream(Type)</code> that will return unexported
implementation of <code>Collector(Type, Col)</code> that will just call the given functions:</p>

<pre><code>func Of(type Type, Col)(
	supply func() Col,
	accumulate func(Col, Type) Col,
	finish func(Col) Col,
	combine func(Col, Col) Col,
) Collector(Type, Col) {
	return impl(Type, Col){
		supply:     supply,
		accumulate: accumulate,
		finish:     finish,
		combine:    combine,
	}
}
</code></pre>

<p>Notice that we also have to specify <code>(Type, Col)</code> for <code>Collector</code> even though we specified it later <code>impl(Type, Col)</code>.</p>

<p>The <code>impl(Type, Col)</code> type is going to be a holder of functions that implements the <code>Collector(Type, Col)</code> interface:</p>

<pre><code>type impl(type Type, Col) struct {
	supply     func() Col
	accumulate func(Col, Type) Col
	finish     func(Col) Col
	combine    func(Col, Col) Col
}

func (collector impl(Type, Col)) Supply() Col {
	return collector.supply()
}

func (collector impl(Type, Col)) Accumulate(collection Col, item Type) Col {
	return collector.accumulate(collection, item)
}

func (collector impl(Type, Col)) Finish(collection Col) Col {
	if collector.finish == nil {
		return collection
	}
	return collector.finish(collection)
}

func (collector impl(Type, Col)) Combine(collection1, collection2 Col) Col {
	return collector.combine(collection1, collection2)
}
</code></pre>

<p>Here we’re good, now let’s declare a simple collector that is going to convert a <code>Type</code> to <code>Map[Key]Value</code> â€” <code>ToMap</code>:</p>

<pre><code>func ToMap(type Type interface{}, Key comparable, Value interface{})(
	mapper func(Type) (Key, Value),
	accumulator func(Value, Value) Value,
) Collector(Type, map[Key]Value) {
	return Of(
		func() map[Key]Value {
			return map[Key]Value{}
		},
		func(table map[Key]Value, item Type) map[Key]Value {
			key, value := mapper(item)
			now, _ := table[key]
			table[key] = accumulator(now, value)
			return table
		},
		func(table map[Key]Value) map[Key]Value {
			return table
		},
		func(table1, table2 map[Key]Value) map[Key]Value {
			for k2, v2 := range table2 {
				v1, _ := table1[k2]
				table1[k2] = accumulator(v1, v2)
			}
			return table1
		},
	)
}
</code></pre>

<p>An interesting thing about this function is that while it has three separated type parameters, it returns
<code>Collector(Type, map[Key]Value)</code> that uses only two type parameters.</p>

<p>Note that we need to specify Type Constraint for Key <code>comparable</code> in order to use it as key of a map otherwise it just
wouldn’t work.</p>

<p><code>ToMap</code> expects two functions on input:</p>

<ul>
<li>Mapper <code>func(Type) (Key, Value)</code> â€” receives an original element and returns two values: first one is going to be used as key
of the map, and the second one is going to be used as the value of the map[key]</li>
<li>Accumulator <code>func(now Value, update Value) Value</code> â€” receives current value of map[key] and new value <code>update</code> that have to be
somehow accumulated into <code>now</code>.</li>
</ul>

<p>Let’s see how it will work out on practice:</p>

<ol>
<li><p>Declare a simple type that will describe a movie and a score that a user gave to the movie:</p>

<pre><code>type MovieVote struct {
	Name  string
	Score int
}
</code></pre></li>

<li><p>Create a stream of slice of some movies and user votes:</p>

<pre><code>items := stream.Of(
	[]MovieVote{
		{Name: "A", Score: 1},
		{Name: "A", Score: 2},
		{Name: "B", Score: 9},
		{Name: "B", Score: 10},
		{Name: "B", Score: 8},
		{Name: "C", Score: 7},
		{Name: "C", Score: 8},
		{Name: "C", Score: 7},
	},
)
</code></pre></li>

<li><p>Now let’s convert them into <code>map[Name]SumOfScore</code>:</p>

<pre><code>result := stream.Collect(
	items,
	collector.ToMap(MovieVote, string, int)(
		func(movie MovieVote) (string, int) {
			return movie.Name, movie.Score
		},
		func(total, score int) int {
			return total + score
		},
	),
)
fmt.Println(result)
</code></pre></li>
</ol>

<ul>
<li>The mapper returns name as key and score as value</li>
<li>The accumulator sums total and current score</li>
</ul>

<p>Output:</p>

<pre><code>map[A:3 B:27 C:22]
</code></pre>

<p>By the way, this collector also works in Parallel mode, check it out in the source code:</p>

<ul>
<li><a href="https://github.com/reconquest/goava/blob/master/stream/examples_test.go2#L91">how to use with Parallel()</a></li>
<li><a href="https://github.com/reconquest/goava/blob/master/stream/stream.go2#L148">implementation of concurrent Collect() using Combine()</a></li>
</ul>

<p>Source Code is available on GitHub: <a href="https://github.com/reconquest/goava">github.com/reconquest/goava</a></p>

<p>And a big shout-out to Matt Layher for his article about <a href="https://mdlayher.com/blog/go-generics-draft-design-building-a-hashtable/">building a hashtable with new Go generics</a>!</p>

<p>Cool stuff, heh!</p>

									</div>
								</div></div>]]>
            </description>
            <link>https://snake-ci.com/blog/go2go-stream/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23639960</guid>
            <pubDate>Thu, 25 Jun 2020 12:38:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Faster Integer Parsing]]>
            </title>
            <description>
<![CDATA[
Score 155 | Comments 39 (<a href="https://news.ycombinator.com/item?id=23639486">thread link</a>) | @fanf2
<br/>
June 25, 2020 | https://kholdstare.github.io/technical/2020/05/26/faster-integer-parsing.html | <a href="https://web.archive.org/web/*/https://kholdstare.github.io/technical/2020/05/26/faster-integer-parsing.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
        <p>Back with a post after 6 years of silence. If you had to parse a microsecond-resolution epoch timestamp as quickly as possible, how would you do it?  We’ll take a look at using compiler intrinsics to do it in log(n) time.</p>


        <h3 id="the-problem">The problem</h3>

<p>Let’s say, theoretically, you have some text-based protocol, or file that
contains microsecond timestamps. You need to parse these timestamps as quickly
as possible. Maybe it’s json, maybe it’s a csv file, maybe something else
bespoke. It’s 16 characters long, and this could also apply to credit card
numbers.</p>

<figure><pre><code data-lang="csv">timestamp,event_id
1585201087123567,a
1585201087123585,b
1585201087123621,c</code></pre></figure>

<p>In the end you have to implement a function similar to this:</p>

<figure><pre><code data-lang="cpp"><span>std</span><span>::</span><span>uint64_t</span> <span>parse_timestamp</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>)</span>
<span>{</span>
  <span>// ???</span>
<span>}</span></code></pre></figure>

<hr>

<h3 id="the-native-solution">The native solution</h3>

<p>Let’s start with what’s available, and compare. We have
<a href="https://en.cppreference.com/w/cpp/string/byte/atoi"><code>std::atoll</code></a> , a function
inherited from C,
<a href="https://en.cppreference.com/w/cpp/io/basic_stringstream"><code>std::stringstream</code></a>
, the newer C++17
<a href="https://en.cppreference.com/w/cpp/header/charconv"><code>&lt;charconv&gt;</code></a> header, and
by request
<a href="https://www.boost.org/doc/libs/1_73_0/libs/spirit/doc/html/spirit/qi/reference/basics.html"><code>boost::spirit::qi</code></a>.
I’ll be using <a href="https://github.com/google/benchmark">Google Benchmark</a> to
measure the performance, and to have a baseline let’s compare against loading
the final result into a register - i.e. no actual parsing involved.</p>

<p>Let’s run the benchmarks! The code is not important here, it just shows what is being benchmarked.</p>

<figure><pre><code data-lang="cpp"><span>static</span> <span>void</span> <span>BM_mov</span><span>(</span><span>benchmark</span><span>::</span><span>State</span><span>&amp;</span> <span>state</span><span>)</span> <span>{</span>
  <span>for</span> <span>(</span><span>auto</span> <span>_</span> <span>:</span> <span>state</span><span>)</span> <span>{</span>
    <span>benchmark</span><span>::</span><span>DoNotOptimize</span><span>(</span><span>1585201087123789</span><span>);</span>
  <span>}</span>
<span>}</span>

<span>static</span> <span>void</span> <span>BM_atoll</span><span>(</span><span>benchmark</span><span>::</span><span>State</span><span>&amp;</span> <span>state</span><span>)</span> <span>{</span>
  <span>for</span> <span>(</span><span>auto</span> <span>_</span> <span>:</span> <span>state</span><span>)</span> <span>{</span>
    <span>benchmark</span><span>::</span><span>DoNotOptimize</span><span>(</span><span>std</span><span>::</span><span>atoll</span><span>(</span><span>example_timestamp</span><span>));</span>
  <span>}</span>
<span>}</span>

<span>static</span> <span>void</span> <span>BM_sstream</span><span>(</span><span>benchmark</span><span>::</span><span>State</span><span>&amp;</span> <span>state</span><span>)</span> <span>{</span>
  <span>std</span><span>::</span><span>stringstream</span> <span>s</span><span>(</span><span>example_timestamp</span><span>);</span>
  <span>for</span> <span>(</span><span>auto</span> <span>_</span> <span>:</span> <span>state</span><span>)</span> <span>{</span>
    <span>s</span><span>.</span><span>seekg</span><span>(</span><span>0</span><span>);</span>
    <span>std</span><span>::</span><span>uint64_t</span> <span>i</span> <span>=</span> <span>0</span><span>;</span>
    <span>s</span> <span>&gt;&gt;</span> <span>i</span><span>;</span>
    <span>benchmark</span><span>::</span><span>DoNotOptimize</span><span>(</span><span>i</span><span>);</span>
  <span>}</span>
<span>}</span>
<span>static</span> <span>void</span> <span>BM_charconv</span><span>(</span><span>benchmark</span><span>::</span><span>State</span><span>&amp;</span> <span>state</span><span>)</span> <span>{</span>
  <span>auto</span> <span>s</span> <span>=</span> <span>example_timestamp</span><span>;</span>
  <span>for</span> <span>(</span><span>auto</span> <span>_</span> <span>:</span> <span>state</span><span>)</span> <span>{</span>
    <span>std</span><span>::</span><span>uint64_t</span> <span>result</span> <span>=</span> <span>0</span><span>;</span>
    <span>std</span><span>::</span><span>from_chars</span><span>(</span><span>s</span><span>.</span><span>data</span><span>(),</span> <span>s</span><span>.</span><span>data</span><span>()</span> <span>+</span> <span>s</span><span>.</span><span>size</span><span>(),</span> <span>result</span><span>);</span>
    <span>benchmark</span><span>::</span><span>DoNotOptimize</span><span>(</span><span>result</span><span>);</span>
  <span>}</span>
<span>}</span>

<span>static</span> <span>void</span> <span>BM_boost_spirit</span><span>(</span><span>benchmark</span><span>::</span><span>State</span><span>&amp;</span> <span>state</span><span>)</span> <span>{</span>
  <span>using</span> <span>boost</span><span>::</span><span>spirit</span><span>::</span><span>qi</span><span>::</span><span>parse</span><span>;</span>
  <span>for</span> <span>(</span><span>auto</span> <span>_</span> <span>:</span> <span>state</span><span>)</span> <span>{</span>
    <span>std</span><span>::</span><span>uint64_t</span> <span>result</span> <span>=</span> <span>0</span><span>;</span>
    <span>parse</span><span>(</span><span>s</span><span>.</span><span>data</span><span>(),</span> <span>s</span><span>.</span><span>data</span><span>()</span> <span>+</span> <span>s</span><span>.</span><span>size</span><span>(),</span> <span>result</span><span>);</span>
    <span>benchmark</span><span>::</span><span>DoNotOptimize</span><span>(</span><span>result</span><span>);</span>
  <span>}</span>
<span>}</span></code></pre></figure>

<figure>
    <canvas id="benchmark-canvas-native">
    </canvas>

</figure>

<p>Wow, <code>stringstream</code> is pretty bad. Not that it’s a fair comparison but parsing
a single integer using <code>stringstream</code> is 391 times slower than just loading our
integer into a register.  <code>&lt;charconv&gt;</code> and <code>boost::spirit</code> do a lot better by
comparison.</p>

<p>Since we know our string contains the number we’re trying to parse, and we
don’t need to do any whitespace skipping, can we be faster?  Just how much time
is spent in validation?</p>

<hr>

<h3 id="the-naive-solution">The naive solution</h3>

<p>Let’s write a good old for loop. Read the string character by character, and
build up the result.</p>

<figure><pre><code data-lang="cpp"><span>inline</span> <span>std</span><span>::</span><span>uint64_t</span> <span>parse_naive</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>)</span> <span>noexcept</span>
<span>{</span>
  <span>std</span><span>::</span><span>uint64_t</span> <span>result</span> <span>=</span> <span>0</span><span>;</span>
  <span>for</span><span>(</span><span>char</span> <span>digit</span> <span>:</span> <span>s</span><span>)</span>
  <span>{</span>
    <span>result</span> <span>*=</span> <span>10</span><span>;</span>
    <span>result</span> <span>+=</span> <span>digit</span> <span>-</span> <span>'0'</span><span>;</span>
  <span>}</span>
  <span>return</span> <span>result</span><span>;</span>
<span>}</span></code></pre></figure>

<figure>
    <canvas id="benchmark-canvas-naive">
    </canvas>

</figure>

<p>That’s actually not bad for a simple for loop. If such a simple solution is
able to beat a standard-library implementation, it means there’s quite a lot of
effort that goes into input validation. As a sidenote - if you know your input,
or can do simpler validation you can get some significant speedups.</p>

<p>For further solutions and benchmarks, let’s ignore the standard library
functions. We should be able to go much faster than this.</p>

<hr>

<h3 id="the-brute-force-solution">The brute force solution</h3>

<p>If we know it’s 16 bytes, why even have a forloop? Let’s unroll it!</p>

<figure><pre><code data-lang="cpp"><span>inline</span> <span>std</span><span>::</span><span>uint64_t</span> <span>parse_unrolled</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>)</span> <span>noexcept</span>
<span>{</span>
  <span>std</span><span>::</span><span>uint64_t</span> <span>result</span> <span>=</span> <span>0</span><span>;</span>

  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>0</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>1000000000000000ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>1</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>100000000000000ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>2</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>10000000000000ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>3</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>1000000000000ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>4</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>100000000000ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>5</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>10000000000ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>6</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>1000000000ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>7</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>100000000ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>8</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>10000000ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>9</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>1000000ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>10</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>100000ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>11</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>10000ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>12</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>1000ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>13</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>100ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>14</span><span>]</span> <span>-</span> <span>'0'</span><span>)</span> <span>*</span> <span>10ULL</span><span>;</span>
  <span>result</span> <span>+=</span> <span>(</span><span>s</span><span>[</span><span>15</span><span>]</span> <span>-</span> <span>'0'</span><span>);</span>

  <span>return</span> <span>result</span><span>;</span>
<span>}</span></code></pre></figure>

<figure>
    <canvas id="benchmark-canvas-brute-force">
    </canvas>

</figure>

<p>Ok, that’s slightly better again, but we’re still processing a character at a time.</p>

<hr>

<h3 id="the-byteswap-insight">The byteswap insight</h3>

<p>Let’s draw out the operations in the unrolled solution as a tree, on a
simplified example of parsing ‘1234’ into a 32-bit integer:</p>

<figure>
    <img width="100%" height="100%" src="https://kholdstare.github.io/diagrams/parse-unrolled.png">

<figcaption><p>Unrolled solution graph of operations for ‘1234’</p>
</figcaption>

</figure>

<p>We can see that the amount of multiplications and additions is linear with the
amount of characters. It’s hard to see how to improve this, because every
multiplication is by a different factor (so we can’t multiply “in one go”), and at
the end of the day we need to add up all the intermediate results.</p>

<p>However, it’s still very regular. For one thing, the first character in the
string is multiplied by the largest factor, because it is the most significant
digit.</p>

<blockquote>
  <p>On a little-endian machine (like x86), an integer’s first byte contains the
least significant digits, while the first byte in a string contains the most
significant digit.</p>
</blockquote>

<figure>
    <img width="100%" height="100%" src="https://kholdstare.github.io/diagrams/parse-byteswap-insight.png">

<figcaption><p>Looking at the string as an integer we can get closer to
the final parsed state in fewer operations - see how the hex representation is
<strong>almost</strong> what we want</p>
</figcaption>

</figure>

<p>Now to reinterpret the bytes of a string as an integer we have to use
<code>std::memcpy</code> (<a href="https://blog.regehr.org/archives/1307">to avoid strict-aliasing
violations</a>), and we have compiler
instrinsic <code>__builtin_bswap64</code> to swap the bytes in one instruction. The
<code>std::memcpy</code> will get optimized out, so this is a win so far.</p>

<figure><pre><code data-lang="cpp"><span>template</span> <span>&lt;</span><span>typename</span> <span>T</span><span>&gt;</span>
<span>inline</span> <span>T</span> <span>get_zeros_string</span><span>()</span> <span>noexcept</span><span>;</span>

<span>template</span> <span>&lt;</span><span>&gt;</span>
<span>inline</span> <span>std</span><span>::</span><span>uint64_t</span> <span>get_zeros_string</span><span>&lt;</span><span>std</span><span>::</span><span>uint64_t</span><span>&gt;</span><span>()</span> <span>noexcept</span>
<span>{</span>
  <span>std</span><span>::</span><span>uint64_t</span> <span>result</span> <span>=</span> <span>0</span><span>;</span>
  <span>constexpr</span> <span>char</span> <span>zeros</span><span>[]</span> <span>=</span> <span>"00000000"</span><span>;</span>
  <span>std</span><span>::</span><span>memcpy</span><span>(</span><span>&amp;</span><span>result</span><span>,</span> <span>zeros</span><span>,</span> <span>sizeof</span><span>(</span><span>result</span><span>));</span>
  <span>return</span> <span>result</span><span>;</span>
<span>}</span>

<span>inline</span> <span>std</span><span>::</span><span>uint64_t</span> <span>parse_8_chars</span><span>(</span><span>const</span> <span>char</span><span>*</span> <span>string</span><span>)</span> <span>noexcept</span>
<span>{</span>
  <span>std</span><span>::</span><span>uint64_t</span> <span>chunk</span> <span>=</span> <span>0</span><span>;</span>
  <span>std</span><span>::</span><span>memcpy</span><span>(</span><span>&amp;</span><span>chunk</span><span>,</span> <span>string</span><span>,</span> <span>sizeof</span><span>(</span><span>chunk</span><span>));</span>
  <span>chunk</span> <span>=</span> <span>__builtin_bswap64</span><span>(</span><span>chunk</span> <span>-</span> <span>get_zeros_string</span><span>&lt;</span><span>std</span><span>::</span><span>uint64_t</span><span>&gt;</span><span>());</span>

  <span>// ...</span>
<span>}</span></code></pre></figure>

<p>But now that we have an integer that kind of, sort of looks like what we want,
how do we get it across the finish line without too much work?</p>

<hr>

<h3 id="the-divide-and-conquer-insight">The divide and conquer insight</h3>

<p>From the previous step, we end up with an integer whose bit representation 
has each digit placed in a separate byte. I.e. even though one byte can
represent up to 256 values, we have values 0-9 in each byte of the integer.
They are also in the right little endian order. Now we just need to “smash”
them together somehow.</p>

<p>We know that doing it linearly would be too slow, what’s the next possibility?
<strong>O(log(n))</strong>! We need to combine every adjacent digit into a pair in one step,
and then each pair of digits into a group of four, and so on, until we have the
entire integer.</p>

<p>After I posted the first version of this article, <a href="https://www.reddit.com/r/cpp/comments/gr18ig/faster_integer_parsing/frx9agb">Sopel97 on
reddit</a>
pointed out that the byteswap is not necessary. Combining adjacent digits works
either way - their order doesn’t matter.  I realized that it helped me with the
next insight, but could be omitted for the final code.</p>

<blockquote>
  <p>The key is working on adjacent digits simultaneously. This allows a tree of
operations, running in O(log(n)) time.</p>
</blockquote>

<p>This involves multiplying the even-index digits by a power of 10 and leaving the
odd-index digits alone. This can be done with bitmasks to selectively apply
operations</p>

<figure>
    <img width="100%" height="100%" src="https://kholdstare.github.io/diagrams/parse-mask-insight.png">

<figcaption><p>By using bitmasking, we can apply operations to more than one digit at a time, to combine them into a larger group</p>
</figcaption>

</figure>

<p>Let’s finish the <code>parse_8_chars</code> function we started earlier by employing this
masking trick. As a neat side-effect of the masking, we don’t need to subtract
<code>'0'</code>, since it will be masked away.</p>

<figure><pre><code data-lang="cpp"><span>inline</span> <span>std</span><span>::</span><span>uint64_t</span> <span>parse_8_chars</span><span>(</span><span>const</span> <span>char</span><span>*</span> <span>string</span><span>)</span> <span>noexcept</span>
<span>{</span>
  <span>std</span><span>::</span><span>uint64_t</span> <span>chunk</span> <span>=</span> <span>0</span><span>;</span>
  <span>std</span><span>::</span><span>memcpy</span><span>(</span><span>&amp;</span><span>chunk</span><span>,</span> <span>string</span><span>,</span> <span>sizeof</span><span>(</span><span>chunk</span><span>));</span>

  <span>// 1-byte mask trick (works on 4 pairs of single digits)</span>
  <span>std</span><span>::</span><span>uint64_t</span> <span>lower_digits</span> <span>=</span> <span>(</span><span>chunk</span> <span>&amp;</span> <span>0x0f000f000f000f00</span><span>)</span> <span>&gt;&gt;</span> <span>8</span><span>;</span>
  <span>std</span><span>::</span><span>uint64_t</span> <span>upper_digits</span> <span>=</span> <span>(</span><span>chunk</span> <span>&amp;</span> <span>0x000f000f000f000f</span><span>)</span> <span>*</span> <span>10</span><span>;</span>
  <span>chunk</span> <span>=</span> <span>lower_digits</span> <span>+</span> <span>upper_digits</span><span>;</span>

  <span>// 2-byte mask trick (works on 2 pairs of two digits)</span>
  <span>lower_digits</span> <span>=</span> <span>(</span><span>chunk</span> <span>&amp;</span> <span>0x00ff000000ff0000</span><span>)</span> <span>&gt;&gt;</span> <span>16</span><span>;</span>
  <span>upper_digits</span> <span>=</span> <span>(</span><span>chunk</span> <span>&amp;</span> <span>0x000000ff000000ff</span><span>)</span> <span>*</span> <span>100</span><span>;</span>
  <span>chunk</span> <span>=</span> <span>lower_digits</span> <span>+</span> <span>upper_digits</span><span>;</span>

  <span>// 4-byte mask trick (works on pair of four digits)</span>
  <span>lower_digits</span> <span>=</span> <span>(</span><span>chunk</span> <span>&amp;</span> <span>0x0000ffff00000000</span><span>)</span> <span>&gt;&gt;</span> <span>32</span><span>;</span>
  <span>upper_digits</span> <span>=</span> <span>(</span><span>chunk</span> <span>&amp;</span> <span>0x000000000000ffff</span><span>)</span> <span>*</span> <span>10000</span><span>;</span>
  <span>chunk</span> <span>=</span> <span>lower_digits</span> <span>+</span> <span>upper_digits</span><span>;</span>

  <span>return</span> <span>chunk</span><span>;</span>
<span>}</span></code></pre></figure>

<hr>

<h3 id="the-trick">The trick</h3>

<p>Putting it all together, to parse our 16-digit integer, we break it up into two
chunks of 8 bytes, run <code>parse_8_chars</code> that we have just written, and benchmark it!</p>

<figure><pre><code data-lang="cpp"><span>inline</span> <span>std</span><span>::</span><span>uint64_t</span> <span>parse_trick</span><span>(</span><span>std</span><span>::</span><span>string_view</span> <span>s</span><span>)</span> <span>noexcept</span>
<span>{</span>
  <span>std</span><span>::</span><span>uint64_t</span> <span>upper_digits</span> <span>=</span> <span>parse_8_chars</span><span>(</span><span>s</span><span>.</span><span>data</span><span>());</span>
  <span>std</span><span>::</span><span>uint64_t</span> <span>lower_digits</span> <span>=</span> <span>parse_8_chars</span><span>(</span><span>s</span><span>.</span><span>data</span><span>()</span> <span>+</span> <span>8</span><span>);</span>
  <span>return</span> <span>upper_digits</span> <span>*</span> <span>100000000</span> <span>+</span> <span>lower_digits</span><span>;</span>
<span>}</span>

<span>static</span> <span>void</span> <span>BM_trick</span><span>(</span><span>benchmark</span><span>::</span><span>State</span><span>&amp;</span> <span>state</span><span>)</span> <span>{</span>
  <span>for</span> <span>(</span><span>auto</span> <span>_</span> <span>:</span> <span>state</span><span>)</span> <span>{</span>
    <span>benchmark</span><span>::</span><span>DoNotOptimize</span><span>(</span><span>parse_trick</span><span>(</span><span>example_stringview</span><span>));</span>
  <span>}</span>
<span>}</span></code></pre></figure>

<figure>
    <canvas id="benchmark-canvas-trick">
    </canvas>

</figure>

<p>Not too shabby, we shaved almost 56% off of the unrolled loop benchmark! Still,
it feels like we are manually doing a bunch of masking and elementwise
operations. Maybe we can just let the CPU do all the hard work?</p>

<hr>

<h3 id="the-simd-trick">The SIMD trick</h3>

<p>We have the main insight:</p>

<ul>
  <li>Combine groups of digits simultaneously to achieve O(log(n)) time</li>
</ul>

<p>We also have a 16-character, or 128-bit string to parse - can we use SIMD? Of
course we can! <a href="https://en.wikipedia.org/wiki/SIMD">SIMD stands for Single Instruction Multiple
Data</a>, and is exactly what we are looking
for. SSE and AVX instructions are supported on both Intel and AMD CPUs, and
 they typically work with wider registers.</p>

<p>I used the <a href="https://software.intel.com/sites/landingpage/IntrinsicsGuide/">Intel Intrinsics
Guide</a> to find
the right compiler intrinsics for the right SIMD CPU instructions.</p>

<p>Let’s set up the digits in each of the 16 bytes first:</p>

<figure><pre><code data-lang="cpp"><span>inline</span> <span>std</span><span>::</span><span>uint64_t</span> <span>parse_1…</span></code></pre></figure></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://kholdstare.github.io/technical/2020/05/26/faster-integer-parsing.html">https://kholdstare.github.io/technical/2020/05/26/faster-integer-parsing.html</a></em></p>]]>
            </description>
            <link>https://kholdstare.github.io/technical/2020/05/26/faster-integer-parsing.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23639486</guid>
            <pubDate>Thu, 25 Jun 2020 11:43:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Gopherspace in the Year 2020]]>
            </title>
            <description>
<![CDATA[
Score 10 | Comments 3 (<a href="https://news.ycombinator.com/item?id=23639411">thread link</a>) | @sT370ma2
<br/>
June 25, 2020 | https://cheapskatesguide.org/articles/gopherspace.html | <a href="https://web.archive.org/web/*/https://cheapskatesguide.org/articles/gopherspace.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

   <!-- Title -->
   
   <p><img src="https://cheapskatesguide.org/pics/gopher-240.jpg" alt="Gopher">
      I first had access to the early Internet--what there was of 
      it--through the university I attended.  I remember how different 
      the Internet was back in the mid-to-late 1980's.  We had 
      electronic mail, but almost no one used it.  We logged onto 
      remote computers with telnet and transferred files with FTP.  
      All this was done at the command line.  If I remember correctly, 
      very few graphical user interfaces existed then.  Those that 
      did were composed of ASCII characters.  The first web browser was 
      not released until 1991.  Remembering causes me some sadness, 
      though in some ways the Internet is better now.  It certainly 
      has many more users, and that is a good thing.  I just wish it had 
      more Internet-savvy users.</p>

   <p>I remember that many of the early computer networks and websites on 
      the Internet were run by imaginative people with great senses of 
      humor.  For example, the computer network that I used at the second 
      engineering company for which I worked in the late 1980's had seven 
      sun workstations named after the seven dwarves.  As you may imagine, 
      that provided us with no end of entertainment.  "Dopey is down, 
      AGAIN!"  "Grumpy is acting up."  "Sneezy died yesterday.  When is 
      the funeral?"</p>

   <p>Back then, computers were something special.  They were wondrous.  
      Individuals who owned them were mavericks in a sense.  Buying a 
      personal computer then was the same as painting the word "nerd" in big 
      red letters across your forehead, and being known as a nerd back then was 
      not something you wanted.  One of my highschool friends built a 
      Heathkit computer.  The only display it had was in the form of 
      one-inch, red LED digits on the front.</p>

   <p>Now, that computers permeate our society, no one bothers giving them 
      interesting names.  They've nearly become fungible commodities that we 
      use up and then throw away when they have outlived their usefulness.  
      Nearly everyone uses the Internet at least occassionally.  And, 
      strangely enough, being called a nerd is seen as a good thing.</p>
   <h2>Gopherspace</h2>
   <p>The Gopher protocol was released by the University of Minnesota in 
      1991.  Gopher servers provided users with access to various types 
      of files, including text, binary, image, sound, and GIF.  But the 
      milieu of gopherspace was text.   Text was mostly what Gopher users 
      saw.  Users could also access FTP, telnet, and 
      Usenet servers.  Back in the 1990's, Veronica search engines
      tied together the network of Gopher servers in a similar way as 
      modern search engines do today with the webservers of the
      modern Internet.  In the 1990's, Jughead search engines were designed 
      to search individual Gopher servers.  And, Archie was an FTP search 
      engine.  Archie, Veronica, and Jughead search engines were named 
      after characters in the Archie comics that first appeared in print in
      1941.  Back in the 1980's and early 1990's, when people who loved 
      computers still ran much of the Internet, it reflected their 
      personalities.  Now, the Internet is more a beige and gray  
      reflection of the corporate world.</p> 
  
   <p>Today the Gopher protocol has been supplanted almost completely 
      by the HTTP protocol upon which the World Wide Web is based.
      Though the Internet has changed considerably, Gopher servers are 
      still around.  Text is still mostly what users see 
      in gopherspace, and it can still be navigated with 
      gopher-capable Internet browsers.  Sadly, only one Veronica search 
      engine appears to operate today.  Now, When a user navigates through
      gopherspace with the Veronica search engine, by following links, or
      by entering URL's into his browser, he has an experience in many 
      ways similar to surfing the modern Internet.</p>
   
   <p>Though about <a href="https://en.wikipedia.org/wiki/Gopher_(protocol)"> 
      two dozen Internet browsers</a> can still access gopherspace, either 
      natively or with plugins, I will only talk about one.  I'll focus on the 
      Lynx browser, because it is readily available, easy to use, and 
      powerful.  The Lynx browser also runs on all the major 
      operating systems.  I'll show readers how to use the Lynx browser 
      to get into gopherspace and have a look around.</p>
   <h2>Installing and Using the Lynx Browser</h2>
   <p>The Lynx browser is a text-only Internet browser that has native 
      support for gopherspace.  Lynx allows a user to seamlessly navigate 
      around the Internet and gopherspace using only the keys on his computer's 
      keyboard.  Lynx does not use a mouse or touchpad.  Windows computer 
      users can download the Lynx browser from the 
      <a href="https://lynx.browser.org/">Lynx website</a>.</p>
 
   <div><p>Most Linux users can install Lynx simply by opening a Linux 
      terminal window and typing:
   </p></div><div>
<pre>sudo apt-get install lynx
</pre>
   </div>
   <p>

   Then, type "lynx" (without the quotes) at the command line to start 
   the Lynx browser.</p>

   <p>To go to a Gopher address using the Lynx browser, hit the "g" 
      key on your keyboard.  Near the bottom of the Lynx window, the 
      prompt "URL to open:" will appear.  Now, begin typing the Gopher 
      address.  Gopher URL's can also be copied and pasted from other 
      applications.  First, copy the URL from the other application, 
      then select the Lynx window, hit the right mouse button, and 
      select "paste".  Try going to this Gopher address for practice: 
      gopher://infinitelyremote.com/0/books/Internet_Gopher_Users_Guide.txt.  
      After you hit the "Enter" key, the text file entitled "Internet 
      Gopher Users Guide" should be visible in your Lynx window.</p>

   <p>Lynx has three user modes.  At this point, you are in the novice 
      user mode, so at the bottom of the page, the following instructions 
      should be visible: "-- press space for next page --  Arrow keys: 
      Up and Down to move.  Right to follow a link; Left to go back.  
      H)elp O)ptions P)rint G)o M)ain screen Q)uit /=search 
      [delete]=history list".</p>

   <p>At a basic level, Lynx is very easy to use, so a user does not 
      have to know much to navigate around gopherspace and read text 
      files.  I will go over the basic commands, and leave it to you 
      to learn more later.  To navigate around inside a text file that 
      contains no hyperlinks, press the space bar or the down arrow on 
      your keyboard to move down one page and the up arrow to move back 
      up one page.  The left arrow is like the back button in a modern 
      Internet browser; it takes you to the previous text file that you 
      visited.  In a text file with hyperlinks, pressing the up or down 
      arrow moves the cursor to the hyperlink above or below the 
      cursor's present position.  When the cursor is on a hyperlink, 
      pressing the "Enter" key or the right arrow takes you to the 
      document pointed to by the hyperlink.</p>

   <p>Some Gopher pages contain forms similar to HTML forms.  For 
      example, links to search engines may appear as a search line.  Use 
      the left or right arrow to move the cursor to the search line.  
      Then, type the key words you want to search for and hit the 
      "Enter" key.  This will take you to a search results page.</p>

   <p>To display the Gopher URL of the file you are currently reading, 
      hit the "=" key.  Then, hit the left arrow key to get back to the 
      file you were just reading.</p>

   <p>Exit from Lynx by hitting the "q" key.  By the way, most 
      command-line Linux programs that take control of a terminal 
      window can be exited by hitting either the "q" key or by typing 
      ":q".</p>

   <p>This is all the information you need to know to navigate around 
      in gopherspace (or on the rest of the Internet) using the Lynx 
      browser.  For additional instructions on the use of Lynx, bring 
      up Lynx and hit the "h" key.</p>
   <h2>Exploring Gopherspace</h2>
   <p>Now the fun begins.  Perhaps the best place to enter gopherspace 
      is gopher://gopher.floodgap.com/1/world.  There you will find 
      links to dozens of Gopher servers.  Floodgap claims that it 
      hosts the last Veronica search engine in existence.  So, from 
      Floodgap you can use the Veronica search engine to search 
      gopherspace by key words, or you can go to individual Gopher 
      user sites by following links to the Gopher servers that host them.</p>

   <p>One of the largest collections of Gopher user sites can be found 
      by following the Link on Floodgap labeled "'Greatest hits': most 
      recently verified Gopher servers".  From there, follow the link 
      labeled "sdf.org:70" to the Super-Dimensional Fortress (URL: 
      gopher://sdf.org/1).  There you will find many interesting phlogs 
      and files.  Gopher blogs are called phlogs.  One interesting 
      phlogger is Tomasino (gopher://sdf.org/1/users/tomasino/).  
      Another is solderpunk (gopher://sdf.org/1/users/solderpunk/).  
      There are also may others.  So, have fun and explore!</p>

   <p>For more interesting reading in gopherspace, try these:</p>
   <br>
   <ul>
      <li>gopher://gopher.floodgap.com/0/gopher/relevance.txt</li>
      <li>gopher://sdf.org/1/users/d1337/1990s-life</li>
      <li>gopher://gopherpedia.com/1/</li>
      <li>gopher://gopherddit.com/1/</li>
      <li>gopher://sdf.org/0/users/developer/PHLOG/earlydays.txt</li>
      <li>gopher://tilde.team/1/~ubergeek/news/</li>
      <li>gopher://hngopher.com/1</li>
      <li>gopher://sdf.org/1/users/sysdharma/phlog</li>
      <li>gopher://sdf.org/0/users/dbucklin/posts/2017-12-31-plain-text.txt</li>
      <li>gopher://sdf.org/0/users/dbucklin/posts/2016-03-11-mechanical-keyboards.txt</li>
      <li>gopher://tilde.town/</li>
      <li>gopher://1436.ninja/1/Port70News</li>
      <li>gopher://codevoid.de/1/cnn</li>
      <li>gopher://gopher.floodgap.com/1/feeds/today</li>
      <li>gopher://vger.cloud/1/pubnix</li>
      <li>gopher://sdfeu.org/1/</li>
      <li>gopher://zaibatsu.circumlunar.space/1/%7etfurrows/phlog</li>
      <li>gopher://1436.ninja/1/Phlog</li>
      <li>gopher://baud.baby</li>
      <li>gopher://sdf.org/1/users/xmanmonk/</li>
      <li>gopher://sdf.org/1/users/tokyogringo/</li>
      <li>gopher:/…</li></ul></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://cheapskatesguide.org/articles/gopherspace.html">https://cheapskatesguide.org/articles/gopherspace.html</a></em></p>]]>
            </description>
            <link>https://cheapskatesguide.org/articles/gopherspace.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23639411</guid>
            <pubDate>Thu, 25 Jun 2020 11:33:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Foam]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=23639161">thread link</a>) | @neilkakkar
<br/>
June 25, 2020 | https://foambubble.github.io/foam/ | <a href="https://web.archive.org/web/*/https://foambubble.github.io/foam/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      

      

<p><strong>Foam</strong> is a personal knowledge management and sharing system inspired by <a href="https://roamresearch.com/">Roam Research</a>, built on <a href="https://code.visualstudio.com/">Visual Studio Code</a> and <a href="https://github.com/">GitHub</a>.</p>

<p>You can use <strong>Foam</strong> for organising your research, keeping re-discoverable notes, writing long-form content and, optionally, publishing it to the web.</p>

<p><strong>Foam</strong> is free, open source, and extremely extensible to suit your personal workflow. You own the information you create with Foam, and you’re free to share it, and collaborate on it with anyone you want.</p>

<blockquote>
  <p><strong>In a rush?</strong> You <em>could</em> jump to <a href="#getting-started">Getting started</a>, but I highly recommend reading the introductory sections first. <strong>Foam</strong> isn’t obvious.</p>
</blockquote>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="#foam">Foam</a>
    <ul>
      <li><a href="#table-of-contents">Table of Contents</a></li>
      <li><a href="#how-do-i-use-foam">How do I use Foam?</a></li>
      <li><a href="#whats-in-a-foam">What’s in a Foam?</a></li>
      <li><a href="#getting-started">Getting started</a></li>
      <li><a href="#features">Features</a></li>
      <li><a href="#call-to-adventure">Call To Adventure</a></li>
      <li><a href="#thanks-and-attribution">Thanks and attribution</a></li>
      <li><a href="#license">License</a></li>
    </ul>
  </li>
</ul>

<h2 id="how-do-i-use-foam">How do I use Foam?</h2>

<p><strong>Foam</strong> is a tool that supports creating relationships between thoughts and information to help you think better.</p>

<p><img src="https://foambubble.github.io/foam/assets/images/foam-navigation-demo.gif" alt="Short video of Foam in use"></p>

<p>Whether you want to build a <a href="https://www.buildingasecondbrain.com/">Second Brain</a> or a <a href="https://zettelkasten.de/posts/overview/">Zettelkasten</a>, write a book, or just get better at long-term learning, <strong>Foam</strong> can help you organise your thoughts if you follow these simple rules:</p>

<ol>
  <li><a href="https://github.com/foambubble/foam-template/generate">Create a single <strong>Foam</strong> workspace</a> for all your knowledge and research.</li>
  <li>Write your thoughts in markdown documents (I like to call them <strong>Bubbles</strong>, but that might be more than a little twee). These documents should be atomic: Put things that belong together into a single document, and limit its content to that single topic. (<a href="https://zettelkasten.de/posts/overview/#principles">source</a>)</li>
  <li>Use Foam’s shortcuts and autocompletions to link your thoughts together with <code>[[wiki-links]]</code>, and navigate between them to explore your knowledge graph.</li>
  <li>Get an overview of your <strong>Foam</strong> workspace using a [<a href="https://foambubble.github.io/foam/graph-visualisation" title="Graph visualisation">graph-visualisation</a>] (⚠️ WIP), and discover relationships between your thoughts with the use of [<a href="https://foambubble.github.io/foam/backlinking" title="Backlinking">backlinking</a>].</li>
</ol>

<p>Foam is a like a bathtub: <em>What you get out of it depends on what you put into it.</em></p>

<h2 id="whats-in-a-foam">What’s in a Foam?</h2>

<p>Like the soapy suds it’s named after, <strong>Foam</strong> is mostly air.</p>

<ol>
  <li>The editing experience of <strong>Foam</strong> is powered by VS Code, enhanced by workspace settings that glue together [<a href="https://foambubble.github.io/foam/recommended-extensions" title="Recommended Extensions">recommended-extensions</a>] and preferences optimised for writing and navigating information.</li>
  <li>To back up, collaborate on and share your content between devices, Foam pairs well with <a href="http://github.com/">GitHub</a>.</li>
  <li>To publish your content, you can set it up to publish to <a href="https://pages.github.com/">GitHub Pages</a> with zero code and zero config, or to any website hosting platform like <a href="http://netlify.com/">Netlify</a> or <a href="https://foambubble.github.io/foam/vercel">Vercel</a>.</li>
</ol>

<blockquote>
  <p><strong>Fun fact</strong>: This documentation was researched, written and published using <strong>Foam</strong>.</p>
</blockquote>

<h2 id="getting-started">Getting started</h2>

<blockquote>
  <p>⚠️ Foam is still in preview. Expect the experience to be a little rough.</p>
</blockquote>

<p>These instructions assume you have a GitHub account, and you have Visual Studio Code installed.</p>

<ol>
  <li><a href="https://github.com/foambubble/foam-template/generate">Create a GitHub repository from foam-template</a>. If you want to keep your thoughts to yourself, remember to set the repository private.</li>
  <li>Clone the repository and open it in VS Code.</li>
  <li>When prompted to install recommended extensions, click <strong>Install all</strong> (or <strong>Show Recommendations</strong> if you want to review and install them one by one)</li>
</ol>

<p>After setting up the repository, open <a href="https://foambubble.github.io/foam/.vscode/settings.json">.vscode/settings.json</a> and edit, add or remove any settings you’d like for your Foam workspace.</p>

<p>To learn more about how to use <strong>Foam</strong>, read the [<a href="https://foambubble.github.io/foam/recipes" title="Recipes">recipes</a>].</p>

<p>There are [<a href="https://foambubble.github.io/foam/known-issues" title="Known Issues">known-issues</a>], and I’m sure, many unknown issues! Please <a href="http://github.com/foambubble/foam/issues">report them on GitHub</a>!</p>

<h2 id="features">Features</h2>

<p><strong>Foam</strong> doesn’t have features in the traditional sense. Out of the box, you have access to all features of VS Code and all the [<a href="https://foambubble.github.io/foam/recommended-extensions" title="Recommended Extensions">recommended-extensions</a>] you choose to install, but it’s up to you to discover what you can do with it!</p>

<p>Head over to [<a href="https://foambubble.github.io/foam/recipes" title="Recipes">recipes</a>] for some useful patterns and ideas, and</p>

<h2 id="call-to-adventure">Call To Adventure</h2>

<p>The goal of <strong>Foam</strong> is to be your personal companion on your quest for knowledge.</p>

<p>It’s is currently about “10% ready” relative to all the features I’ve thought of, but I’ve only thought of ~1% of the features it could have, and I’m excited to learn from others.</p>

<p>I am using it as my personal thinking tool. By making it public, I hope to learn from others not only how to improve Foam, but also to improve how I learn and manage information.</p>

<p>If that sounds like something you’re interested in, I’d love to have you along on the journey.</p>

<ul>
  <li>Check out [<a href="https://foambubble.github.io/foam/roadmap" title="Roadmap">roadmap</a>] to see what’s in the plans</li>
  <li>Read about our [<a href="https://foambubble.github.io/foam/principles" title="Principles">principles</a>] to understand Foam’s philosophy and direction</li>
  <li>Read the [<a href="https://foambubble.github.io/foam/contribution-guide" title="Contribution Guide">contribution-guide</a>] guide to learn how to participate.</li>
  <li>Feel free to open <a href="https://github.com/foambubble/foam/issues">GitHub issues</a> to give me feedback and ideas for new features.</li>
</ul>

<h2 id="thanks-and-attribution">Thanks and attribution</h2>

<p><strong>Foam</strong> is built by <a href="https://github.com/jevakallio">Jani Eväkallio</a> (<a href="https://twitter.com/jevakallio">@jevakallio</a>).</p>

<p><strong>Foam</strong> was inspired by <a href="https://roamresearch.com/">Roam Research</a> and the <a href="https://zettelkasten.de/posts/overview">Zettelkasten methodology</a></p>

<p><strong>Foam</strong> wouldn’t be possible without <a href="https://code.visualstudio.com/">Visual Studio Code</a> and <a href="https://github.com/">GitHub</a>, and relies heavily on our fantastic open source [<a href="https://foambubble.github.io/foam/recommended-extensions" title="Recommended Extensions">recommended-extensions</a>] and all their contributors:</p>

<h2 id="license">License</h2>

<p>Foam is licensed under the <a href="https://foambubble.github.io/foam/license">MIT license</a>.</p>






      
      
      
    </div></div>]]>
            </description>
            <link>https://foambubble.github.io/foam/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23639161</guid>
            <pubDate>Thu, 25 Jun 2020 10:53:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Beautiful Visualisations with the Chord Package]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=23638474">thread link</a>) | @shahinrostami
<br/>
June 25, 2020 | https://shahinrostami.com/posts/statistics/data-is-beautiful/animal-crossing-villagers-species-and-personalities/ | <a href="https://web.archive.org/web/*/https://shahinrostami.com/posts/statistics/data-is-beautiful/animal-crossing-villagers-species-and-personalities/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div role="alert">
        <p><a href="https://stamilabs.com/">
        <img src="https://shahinrostami.com/images/stami-labs/cat.jpg"></a>
            <a href="https://stamilabs.com/">Join our Stami Labs Patreon</a> to get <b>Exclusive Downloads</b>, <b>Direct Support</b>, <b>Early Access</b>, <b>Voting Access</b>, our <b>Books for Free</b>, and so much more!
        </p>
    </div><div role="alert">
        <p><a href="https://store.shahinrostami.com/product/data-is-beautiful/">
        <img src="https://shahinrostami.com/images/data-is-beautiful/front.jpg"></a>
            Enjoying these notebooks and want to support the work?
            Get the <a href="https://store.shahinrostami.com/product/data-is-beautiful/">Data is Beautiful Book</a> or check out the <a href="https://www.youtube.com/playlist?list=PLwWiU_ClpuYpC1tEY47k_-CTzDKz1UYIN">Complementary Videos</a>.
        </p>
        </div></div>]]>
            </description>
            <link>https://shahinrostami.com/posts/statistics/data-is-beautiful/animal-crossing-villagers-species-and-personalities/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23638474</guid>
            <pubDate>Thu, 25 Jun 2020 09:04:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to get your first 100 users as a SaaS startup founder?]]>
            </title>
            <description>
<![CDATA[
Score 35 | Comments 19 (<a href="https://news.ycombinator.com/item?id=23638173">thread link</a>) | @nathanganser
<br/>
June 25, 2020 | https://blog.nat.app/how-to-get-your-first-100-users-as-a-saas-startup-founder-ckbnjyv6v00oajps1v7082imx | <a href="https://web.archive.org/web/*/https://blog.nat.app/how-to-get-your-first-100-users-as-a-saas-startup-founder-ckbnjyv6v00oajps1v7082imx">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="text"><p>You've got to start somewhere right. You've got your landing page and maybe even an MVP, but no one is visiting your website! How do you actually get those first 100 users? I've been there myself with  <a target="_blank" rel="noopener noreferrer" href="https://nat.app/">my startup</a>, and I would have loved to read such an article when I got started, so here it is! In honour of my past self and to help all fellow startup founders! </p>
<h2 id="get-started">Get started</h2>
<p>Here are a few basic tips you should get started with. They will pay off in the coming months. </p>
<h3 id="start-with-seo">Start with SEO</h3>
<p>SEO will not get you users overnight, but it's an amazing long term investment. Do it. 
Obviously, don't try to rank for super general keywords, instead, focus on niche keywords your audience is interested in. Here are a few examples from our own startup: </p>
<ul>
<li><a target="_blank" rel="noopener noreferrer" href="https://medium.com/@nathanganser/which-contacts-am-i-losing-touch-with-find-out-now-25f2db1320c3">Which contacts am I losing touch with? Find out now</a> </li>
<li><a target="_blank" rel="noopener noreferrer" href="https://medium.com/nat-personal-relationship-manager/what-is-a-gmail-metadata-integration-and-why-you-should-use-it-57b37fe54dbe">What is a Gmail Metadata integration and why you should use it</a></li>
<li><a target="_blank" rel="noopener noreferrer" href="https://medium.com/nat-personal-relationship-manager/how-i-created-an-automated-relationship-management-tool-using-coda-zapier-8a31a6d2ebe2">How I created an Automated Relationship Management tool using Coda &amp; Zapier</a>  </li>
<li><a target="_blank" rel="noopener noreferrer" href="https://medium.com/nat-personal-relationship-manager/the-ultimate-personal-relationship-manager-list-2ae87acf5070">Top 6 Best Personal CRM apps</a> </li>
</ul>
<p><em>Like passive income, those articles are generating a steady (albeit small) traffic to our app. But what's powerful about this traffic is that its super high-quality people. Only passionate people will find your articles, and when they do, they'll check out your app as well. </em></p>
<h3 id="quora-twitter-answer-to-questions">Quora &amp; Twitter: Answer to questions</h3>
<p>Create a company account and start replying to questions related to what you're doing. Twitter has a really good advanced search feature and Quora will suggest you more than enough questions you can reply to. If you spend a few hours each week generating good content on those platforms, you'll get a steady stream of clicks to your landing page as well. </p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1592240101831/sk3gE249t.png?auto=format&amp;q=60" alt="quora-answers-stats.png"></p>
<h3 id="pioneer-app">Pioneer.app</h3>
<p> <a target="_blank" rel="noopener noreferrer" href="https://pioneer.app/">Pioneer</a>  is an online accelerator that you can join for free. Every week, you submit a progress update and other users will give you feedback. This is a free way to get a few clicks to your app from startup founders. </p>
<h3 id="get-listed-on-10words-betalist">Get listed on 10words &amp; Betalist</h3>
<p> <a target="_blank" rel="noopener noreferrer" href="https://10words.io/">10words</a> and  <a target="_blank" rel="noopener noreferrer" href="https://blog.nat.app/betalist.com">BetaList</a> are like a small Product Hunts. They are much smaller, you can expect around 50 clicks to your website for each. Still worth something! </p>
<h3 id="list-your-startup-on-indie-hacker-makerlog">List your startup on Indie Hacker &amp; Makerlog</h3>
<p>Those are two cool communities. If you're active, you'll definitely get some attention and users! </p>
<ul>
<li><a target="_blank" rel="noopener noreferrer" href="https://getmakerlog.com/">MakerLog</a> </li>
<li><a target="_blank" rel="noopener noreferrer" href="https://blog.nat.app/indiehackers.com">Indie Hacker</a></li>
</ul>
<h3 id="product-hunt-ship">Product Hunt Ship</h3>
<p>Product Hunt has a place for upcoming apps called <strong> <a target="_blank" rel="noopener noreferrer" href="https://www.producthunt.com/ship">Ship</a> </strong>, I've not found it to be very useful, but it can get you a few additional users. </p>
<h2 id="growth-hacks">Growth hacks</h2>
<p>That's where stuff gets exciting. Use these growth hacks with moderation, there is a fine line between marketing and spamming. </p>
<h3 id="product-hunt-phantombuster-twitter">Product Hunt + PhantomBuster + Twitter</h3>
<p>If there are already a few apps on ProductHunt that are similar to what you're building, consider using  <a target="_blank" rel="noopener noreferrer" href="https://www.indiehackers.com/post/how-i-growth-hacked-my-way-to-500-waiting-list-subscribers-9612933fd3">this growth hack</a>. I've used it extensively myself. </p>
<h3 id="buy-targeted-email-lists">Buy targeted email lists</h3>
<p>I've built a tool myself that lets me scrape email addresses from founders on Indie Hacker. What's powerful is that you can filter by every filter available on Indie Hacker (revenue, location, business model, ...). You can use it to buy an email list here and use a tool like <a target="_blank" rel="noopener noreferrer" href="https://gmass.com/">Gmass</a> or Streak to reach out.  <a target="_blank" rel="noopener noreferrer" href="https://scrapeindiehacker.app/">Buy a list here</a>.</p>
<p>I don't recommend just sending the same email to everyone as this will impact your reputation. Instead, send personalized mass emails. It does take a bit longer, but it's worth every second considering the impact it will have on response rate and trust.</p>

<p>There are many chrome extensions out there that have tons of users but that are not maintained anymore. You can buy one for very cheap that is related to what you do and advertise your business on there. I bought  <a target="_blank" rel="noopener noreferrer" href="https://chrome.google.com/webstore/detail/google-contacts-opener/pjpambjkhcilibnmeihhfgdkhfelbdkj">Google Contacts Opener</a>  and it's been generating significant traffic to our website ever since. </p>
<h2 id="what-you-should-not-be-doing">What you should not be doing</h2>
<h3 id="advertising">Advertising</h3>
<p>It will cost you too much. Just don't think about it. In the early days, ads are not the way to go.</p>
<h3 id="launch-on-product-hunt">Launch on Product Hunt</h3>
<p>You've got only one shot at this, it better be big. You don't want to launch on Product Hunt before having built a mature product. Product Hunt is not for the launching phase, it's for the growth phase.  <a target="_blank" rel="noopener noreferrer" href="https://betalist.com/">BetaList</a> is a better place to start.</p>
<h3 id="my-startup-s-traffic">My startup's traffic</h3>
<p>Here is a breakdown of who visited our website recently. This will give you a better idea of what you should focus on. 
<img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1592241905463/7LrJ4YdmB.png?auto=format&amp;q=60" alt="website visitor origin.png"></p>
</div></div>]]>
            </description>
            <link>https://blog.nat.app/how-to-get-your-first-100-users-as-a-saas-startup-founder-ckbnjyv6v00oajps1v7082imx</link>
            <guid isPermaLink="false">hacker-news-small-sites-23638173</guid>
            <pubDate>Thu, 25 Jun 2020 08:21:02 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How Zoom works [slides]]]>
            </title>
            <description>
<![CDATA[
Score 186 | Comments 143 (<a href="https://news.ycombinator.com/item?id=23638116">thread link</a>) | @Spidery
<br/>
June 25, 2020 | https://builtformars.co.uk/how-zoom-works/ | <a href="https://web.archive.org/web/*/https://builtformars.co.uk/how-zoom-works/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-elementor-type="single" data-elementor-id="2530" data-elementor-settings="[]">
		<div>
			<div>
						<section data-id="c26fc93" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="28a6896" data-element_type="column">
			<div>
					<div>
				
				<div data-id="b04b2c1" data-element_type="widget" data-widget_type="theme-post-excerpt.default">
				<p>
			Zoom is a significant challenger in the video conferencing space, but is their UX any better than Skype or Cisco?		</p>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="052a335" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="4224d77" data-element_type="column">
			<div>
					<div>
				<div data-id="5ad8739" data-element_type="widget" data-widget_type="theme-post-featured-image.default">
				<div>
					<p><img width="720" height="410" src="https://builtformars.co.uk/wp-content/uploads/2020/04/Zoom.png" alt="Zoom UX case study" srcset="https://builtformars.co.uk/wp-content/uploads/2020/04/Zoom.png 1018w, https://builtformars.co.uk/wp-content/uploads/2020/04/Zoom-300x171.png 300w, https://builtformars.co.uk/wp-content/uploads/2020/04/Zoom-768x438.png 768w, https://builtformars.co.uk/wp-content/uploads/2020/04/Zoom-100x57.png 100w, https://builtformars.co.uk/wp-content/uploads/2020/04/Zoom-700x399.png 700w" sizes="(max-width: 720px) 100vw, 720px">											</p>
				</div>
				</div>
						</div>
			</div>
		</div>
				<div data-id="a001539" data-element_type="column">
			<div>
					<div>
				
				<div data-id="724633a" data-element_type="widget" data-widget_type="post-info.default">
				<div>
					<ul>
					<li itemprop="datePublished">
										<span>
															</span>
									<span>
							<span>📅 Added on</span>
										April 15, 2020					</span>
								</li>
				</ul>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="2643ed8" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="a995590" data-element_type="column">
			<div>
					<div>
				<div data-id="c9f06a8" data-element_type="widget" data-widget_type="theme-post-featured-image.default">
				<div>
					<p><img width="720" height="410" src="https://builtformars.co.uk/wp-content/uploads/2020/04/Zoom.png" alt="Zoom UX case study" srcset="https://builtformars.co.uk/wp-content/uploads/2020/04/Zoom.png 1018w, https://builtformars.co.uk/wp-content/uploads/2020/04/Zoom-300x171.png 300w, https://builtformars.co.uk/wp-content/uploads/2020/04/Zoom-768x438.png 768w, https://builtformars.co.uk/wp-content/uploads/2020/04/Zoom-100x57.png 100w, https://builtformars.co.uk/wp-content/uploads/2020/04/Zoom-700x399.png 700w" sizes="(max-width: 720px) 100vw, 720px">											</p>
				</div>
				</div>
						</div>
			</div>
		</div>
				
						</div>
			</div>
		</section>
				<section data-id="ca3ca43" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
							
							<div>
				<div>
				<div data-id="ec20c55" data-element_type="column">
			<div>
					<div>
				<div data-id="682e138" data-element_type="widget" data-widget_type="theme-post-content.default">
				<div>
					<div data-elementor-type="wp-post" data-elementor-id="3204" data-elementor-settings="[]">
			<div>
				<div>
							<section data-id="7b73c3c" data-element_type="section">
						<div>
				<div>
				<div data-id="d0a7d7b" data-element_type="column">
			<div>
					<div>
				<div data-id="cd0bf0c" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<div><div><div role="region" aria-label="Slider"><p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjkwMCIgPjwvc3ZnPg==" alt="Slider"></p></div></div></div>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
						</div>
			</div>
		</div>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="375357f" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="353f855" data-element_type="column">
			<div>
					<div>
				<div data-id="891920c" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>💡<strong>Tip:</strong> Try using the ⬅️ <span>➡️arrows on your keyboard to navigate the slides.</span></p>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="9ffc41b" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="5f2393c" data-element_type="column">
			<div>
					<div>
				<div data-id="b2a958e" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p><strong>Mobile tip:</strong> Try swiping ⬅️<span>👆➡️ left and right to navigate the slides.</span></p>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="5094e89" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="4d0fdca" data-element_type="column">
			<div>
					<div>
				
				<div data-id="560b6f9" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>New case studies—packed with UX lessons—are published every <strong>14 days</strong>.</p>
				</div>
				</div>
				<div data-id="c135888" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p><span>📮 No spam, ever.&nbsp; &nbsp;</span><span>📅 1 email a week.&nbsp; &nbsp;</span><span>👋 Unsubscribe anytime.</span></p>
				</div>
				</div>
				
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="3daa393" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="4876312" data-element_type="column">
			<div>
					<div>
				<section data-id="05a68ee" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="09ef108" data-element_type="column" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
			<div>
							
					<div>
				<div data-id="31901c7" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Subscribe and get a new case study like this every <strong>14 days</strong>!</p>
				</div>
				</div>
						</div>
			</div>
		</div>
				
						</div>
			</div>
		</section>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="94d99dd" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						<div>
				<div>
				<div data-id="3a870f9" data-element_type="column">
			<div>
					<div>
				<div data-id="91f57f2" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>There’s always more to learn</p>
				</div>
				</div>
				<div data-id="2f5c033" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<p>Dive into other case studies. They’re typically a <strong>5 minute read</strong>.</p>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="c62cabd" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
						
		</section>
					</div>
		</div>
		</div></div>]]>
            </description>
            <link>https://builtformars.co.uk/how-zoom-works/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23638116</guid>
            <pubDate>Thu, 25 Jun 2020 08:13:43 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[No code tools for each stage of application development]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 0 (<a href="https://news.ycombinator.com/item?id=23637671">thread link</a>) | @GeneloJ
<br/>
June 25, 2020 | https://www.testcraft.io/no-code-tools-application-development/ | <a href="https://web.archive.org/web/*/https://www.testcraft.io/no-code-tools-application-development/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
				<div id="mk-page-id-6013">
					<div itemprop="mainEntityOfPage">
							
	<article id="6013" itemscope="itemscope" itemprop="blogPost" itemtype="http://schema.org/BlogPosting">

					<h2 itemprop="headline">17 no-code tools for each stage of application development [Infographic]</h2>
	







<div itemprop="mainEntityOfPage">
	
<p>It seems that coding skills are becoming less and less of a barrier to building and launching a successful application.</p>
<p>No-code tools have offered everyone from small businesses to enterprises the opportunity to achieve digital transformation both simply and sustainably. In the <a href="https://www.forbes.com/sites/johneverhard/2019/01/15/what-really-is-low-codeno-code-development/#61935a6f2a8e" target="_blank" rel="noopener noreferrer">words of Forbes contributor John Everhard</a>, no-code, as well as often-associated low-code, solutions help “build powerful applications that can scale for any organization—without writing any code.”</p>
<p>Everhard further discussed in his article the powerful impact that no-code tools, also known as codeless tools, can have. With these types of software, IT teams no longer need to spend 60% of their time keeping their current systems working. Instead, no-code solutions help companies maintain a competitive edge over their peers with up to a 75% improvement on time to market.</p>
<p>Industry analysts have taken note of the “no-code movement” as well, with <a href="https://www.salesforce.com/blog/2019/08/gartner-lcap.html" target="_blank" rel="noopener noreferrer">Gartner predicting</a> that low-code application platforms (LCAP) will account for 65% of application development activity by 2024. Enterprises seem to be taking note as well, whether by <a href="https://www.testcraft.io/testcraft-joins-perforce/" target="_blank" rel="noopener noreferrer">acquiring codeless tools</a> or by releasing no-code capabilities of their own.</p>
<p>With that in mind, here is a list of different tools to keep on your radar in the no-code space. These tools cover every stage of application development, although there are other solutions that are not covered here, such as industry-specific solutions and payment applications.</p>

<h2><a href="https://www.testcraft.io/wp-content/uploads/2020/06/copy-of-17-no-code-tools-for-each-stage-of-application-development.pdf"><img src="https://www.testcraft.io/wp-content/uploads/2020/06/copy-of-17-no-code-tools-for-each-stage-of-application-development1-1-410x1024.png" alt="17 no-code tools for each stage of application development infographic" width="410" height="1024" srcset="https://www.testcraft.io/wp-content/uploads/2020/06/copy-of-17-no-code-tools-for-each-stage-of-application-development1-1-410x1024.png 410w, https://www.testcraft.io/wp-content/uploads/2020/06/copy-of-17-no-code-tools-for-each-stage-of-application-development1-1-120x300.png 120w, https://www.testcraft.io/wp-content/uploads/2020/06/copy-of-17-no-code-tools-for-each-stage-of-application-development1-1-768x1920.png 768w, https://www.testcraft.io/wp-content/uploads/2020/06/copy-of-17-no-code-tools-for-each-stage-of-application-development1-1.png 800w" sizes="(max-width: 410px) 100vw, 410px"></a></h2>
<h2>No-code web &amp; mobile application development tools</h2>
<ul>
<li><strong><a href="https://bubble.io/" target="_blank" rel="noopener noreferrer">Bubble</a></strong>: A visual programming language that helps anyone build a web application without coding knowledge.</li>
<li><strong><a href="https://www.glideapps.com/" target="_blank" rel="noopener noreferrer">Glide</a></strong>: A free no-code tool that allows users to build a mobile application in five minutes from Google Sheets.</li>
<li><strong><a href="https://www.voiceflow.com/" target="_blank" rel="noopener noreferrer">Voiceflow</a></strong>: A codeless way to develop voice apps for Amazon Alexa and Google Assistant.</li>
<li><strong><a href="https://webflow.com/" target="_blank" rel="noopener noreferrer">Webflow</a></strong>: An online visual editor platform that allows users to design, build, and launch responsive websites.</li>
<li><strong><a href="https://carrd.co/" target="_blank" rel="noopener noreferrer">Carrd</a></strong>: A free platform for building simple, fully responsive one-page web sites without code.</li>
</ul>
<h2>Codeless testing tools</h2>
<ul>
<li><strong><a href="https://www.testcraft.io/product/" target="_blank" rel="noopener noreferrer">TestCraft</a></strong>: A codeless Selenium test automation platform for continuous and regression testing of web applications.</li>
<li><strong><a href="https://www.accelq.com/codeless_api" target="_blank" rel="noopener noreferrer">AccelQ API</a></strong>: A no-code API test automation tool that allows companies to test REST APIs.</li>
<li><strong><a href="https://www.pcloudy.com/" target="_blank" rel="noopener noreferrer">pCloudy</a></strong>: A mobile test automation platform that helps users build and execute mobile tests without code.</li>
</ul>
<h2>No-code content and data management tools</h2>
<ul>
<li><strong><a href="https://airtable.com/" target="_blank" rel="noopener noreferrer">Airtable</a></strong>: A spreadsheet-database hybrid that helps teams manage content, projects, and other initiatives.</li>
<li><strong><a href="https://www.notion.so/" target="_blank" rel="noopener noreferrer">Notion</a></strong>: A no-code tool for managing documents, notes, tasks, spreadsheets, and databases.</li>
</ul>
<h2>Visual task automation tools</h2>
<ul>
<li><strong><a href="https://zapier.com/" target="_blank" rel="noopener noreferrer">Zapier</a></strong>: A codeless tool for connecting your applications and automating your workflows.</li>
<li><strong><a href="https://tryretool.com/" target="_blank" rel="noopener noreferrer">Retool</a></strong>: A platform for building internal tools without code.</li>
<li><strong><a href="https://www.actiondesk.io/" target="_blank" rel="noopener noreferrer">ActionDesk</a></strong>: A spreadsheet software that lets you import data from SQL, Stripe, Salesforce, HubSpot, and others to automate a variety of tasks.</li>
<li><strong><a href="https://build.stdlib.com/" target="_blank" rel="noopener noreferrer">Standard Library</a></strong>: A no-code library that helps users build automated workflows and APIs.</li>
</ul>
<h2>Codeless communication tools</h2>
<ul>
<li><strong><a href="https://www.typeform.com/" target="_blank" rel="noopener noreferrer">Typeform</a></strong>: A tool for designing surveys and other responsive forms without code.</li>
<li><strong><a href="https://mailchimp.com/" target="_blank" rel="noopener noreferrer">Mailchimp</a></strong>: A no-code email marketing service that gives users the ability to create professional, designed emails visually.</li>
<li><strong><a href="https://anchor.fm/" target="_blank" rel="noopener noreferrer">Anchor</a></strong>: A codeless platform for creating, hosting, and distributing podcast episodes.</li>
</ul>

<p><!--HubSpot Call-to-Action Code --><span id="hs-cta-wrapper-6302584c-b0f6-4c2f-b1f8-c05e4cede1aa"><span id="hs-cta-6302584c-b0f6-4c2f-b1f8-c05e4cede1aa"><!-- [if lte IE 8]>


<div id="hs-cta-ie-element"></div>


<![endif]--><a href="https://cta-redirect.hubspot.com/cta/redirect/2539507/6302584c-b0f6-4c2f-b1f8-c05e4cede1aa" target="_blank" rel="noopener noreferrer"><img id="hs-cta-img-6302584c-b0f6-4c2f-b1f8-c05e4cede1aa" src="https://no-cache.hubspot.com/cta/default/2539507/6302584c-b0f6-4c2f-b1f8-c05e4cede1aa.png" alt="Selenium Testing eBook" width="800" height="160"></a></span></span><!-- end HubSpot Call-to-Action Code --></p>
</div>



    
</article>

							
											</div>
					
					
				</div>
			</div></div>]]>
            </description>
            <link>https://www.testcraft.io/no-code-tools-application-development/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23637671</guid>
            <pubDate>Thu, 25 Jun 2020 07:02:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[On Liberty (1859) [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 165 | Comments 101 (<a href="https://news.ycombinator.com/item?id=23636407">thread link</a>) | @mrfusion
<br/>
June 24, 2020 | https://socialsciences.mcmaster.ca/econ/ugcm/3ll3/mill/liberty.pdf | <a href="https://web.archive.org/web/*/https://socialsciences.mcmaster.ca/econ/ugcm/3ll3/mill/liberty.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div p="">&gt; 
endobj
379 0 obj
&lt;&lt; /S 964 /O 1045 /Filter /FlateDecode /Length 380 0 R &gt;&gt; 
stream
ì+ªýc„-ÌéEÎØµ«°L½÷Ëÿé;ÄÛxÃ¼to•F$ˆ¡)•ãz§%u­ÌP¬5,‚|)äìº„H”˜Ïk‚Æ&nbsp;s˜Z‡}8kxgF¼�Ew�‰	ÕìC¸‡2÷¨ÿ&gt;JùwãÏ@ãù«z‰7s¹vëëœEªœ:Øy±cˆ[°ÅÄ§ÁôCEb´.&gt;øõ½ó¶B�š:DØ´×¸æ¢¬aqäÁ"Õ&gt;(¿ìøzF|ñlçJ´W‘~|‹§	|hÓwÎ�&gt;|³¹Žö™&amp;¬frË�/^@¦Šà°GM4mejD›ê²õ`X–Þrm¯ð²ÝUdñØ"LjÝÁ{um]4tÈj»­)6qbÕ<v%aÁ£œps1�l`Ôbä2[›;� qhu'…„+~€úmÿÓ‚Ámïx="£ËÝfÊÙÁš¨Ìâ|â3É5¸æ£gøÕû‘jªãt" Øl4ï="ù2Jd·”õ" ŠÖö*uxi«Áx4ãõ€�´�+otx‰³ö÷ö,¼Þ1¢fçÐ¾›ûødÝ^h¸ÚdÎÌ4bÅs×Çê†~k%’î¦—¦¨éå6xª+§qÔÒ„†hÐ[s¹="ˆžµ—QäyÀ½fî¤u*�su$ØÐwrg" endstream="" endobj="" 380="" 0="" obj="" 488="" 352="" <<="" type="" page="" parent="" 336="" r="" resources="" 366="" contents="" 371="" mediabox="" [="" 432="" 648="" ]="" cropbox="" rotate="">&gt; 
endobj
353 0 obj
&lt;&lt; 
/Count 1 
/First 354 0 R 
/Last 354 0 R 
&gt;&gt; 
endobj
354 0 obj
&lt;&lt; 
/Title (T¬Þô¯ø1n)
/Dest [ 4 0 R /Fit ] 
/Parent 353 0 R 
/First 355 0 R 
/Last 356 0 R 
/Count -11 
&gt;&gt; 
endobj
355 0 obj
&lt;&lt; 
/Title (š[ÌBe°†à0úg)
/Dest [ 20 0 R /Fit ] 
/Parent 354 0 R 
/Next 365 0 R 
&gt;&gt; 
endobj
356 0 obj
&lt;&lt; 
/Title (‘'G`iŸ)
/Dest [ 320 0 R /Fit ] 
/Parent 354 0 R 
/Prev 357 0 R 
&gt;&gt; 
endobj
357 0 obj
&lt;&lt; 
/Title (°DÞ—9³Ùí+ Šk¹)
/Dest [ 260 0 R /Fit ] 
/Parent 354 0 R 
/Prev 358 0 R 
/Next 356 0 R 
&gt;&gt; 
endobj
358 0 obj
&lt;&lt; 
/Title (ø“€·+Š*—ÜI)
/Dest [ 260 0 R /Fit ] 
/Parent 354 0 R 
/Prev 359 0 R 
/Next 357 0 R 
&gt;&gt; 
endobj
359 0 obj
&lt;&lt; 
/Title (*I“KP8iÃ]3¨ŒÎÙÝÊÜ®%zÙ3k&gt;g’Bn~|‹Û°.¦7Z#Ð\(Ü²ÄÃhÿ"SÀv7�K/J\()
/Dest [ 209 0 R /Fit ] 
/Parent 354 0 R 
/Prev 360 0 R 
/Next 358 0 R 
&gt;&gt; 
endobj
360 0 obj
&lt;&lt; 
/Title (D7A­­*!P])
/Dest [ 209 0 R /Fit ] 
/Parent 354 0 R 
/Prev 361 0 R 
/Next 359 0 R 
&gt;&gt; 
endobj
361 0 obj
&lt;&lt; 
/Title (õËÃª5tT±ZOJR¨�»[¿5&lt;¿j+æN*œ§h4èÉÄo	É»W'±WßK¥ÞZ_š¦&amp;-M)
/Dest [ 158 0 R /Fit ] 
/Parent 354 0 R 
/Prev 362 0 R 
/Next 360 0 R 
&gt;&gt; 
endobj
362 0 obj
&lt;&lt; 
/Title (’›­öëQ“uö)
/Dest [ 158 0 R /Fit ] 
/Parent 354 0 R 
/Prev 363 0 R 
/Next 361 0 R 
&gt;&gt; 
endobj
363 0 obj
&lt;&lt; 
/Title (-hs~FD»M„íM±VleÁŸï!Å¤Ÿpnt­ô6qñ‡-Œí*üKª©)
/Dest [ 56 0 R /Fit ] 
/Parent 354 0 R 
/Prev 364 0 R 
/Next 362 0 R 
&gt;&gt; 
endobj
364 0 obj
&lt;&lt; 
/Title (:Gû¹ÀS ˜&nbsp;2)
/Dest [ 56 0 R /Fit ] 
/Parent 354 0 R 
/Prev 365 0 R 
/Next 363 0 R 
&gt;&gt; 
endobj
365 0 obj
&lt;&lt; 
/Title (²ú"0P“ºSf÷–wn&lt;)
/Dest [ 20 0 R /Fit ] 
/Parent 354 0 R 
/Prev 355 0 R 
/Next 364 0 R 
&gt;&gt; 
endobj
366 0 obj
&lt;&lt; 
/ProcSet [ /PDF /Text ] 
/Font &lt;&lt; /F5 368 0 R /F6 372 0 R /F7 375 0 R &gt;&gt; 
/ExtGState &lt;&lt; /GS1 378 0 R /GS2 377 0 R &gt;&gt; 
&gt;&gt; 
endobj
367 0 obj
&lt;&lt; 
/Type /FontDescriptor 
/Ascent 0 
/CapHeight 0 
/Descent 0 
/Flags 4 
/FontBBox [ -146 -274 1207 909 ] 
/FontName /HDDGLC+MSTT31c6b7 
/ItalicAngle 0 
/StemV 0 
/CharSet (ì»µ”±ßhZ\)0UŠ	wå*‹*Àá&nbsp;|B¬=ŠÉš¬b_Øö1ÈÖ2a¼-Sè�bœ”¿r«áÞ„’nòj"<tøþ˜Ì\ ¬ØtrùÇ;f[û<="" {²h[r)="" fontfile="" 369="" 0="" r="">&gt; 
endobj
368 0 obj
&lt;&lt; 
/Type /Font 
/Subtype /Type1 
/Name /F5 
/FirstChar 31 
/LastChar 255 
/Widths [ 750 260 320 380 520 520 900 740 220 440 440 500 520 260 333 260 580 
556 556 556 556 556 556 556 556 556 556 260 260 520 520 520 400 
820 660 640 680 740 620 540 740 820 360 340 660 620 880 760 820 
580 800 660 520 660 780 640 900 740 520 600 440 260 440 520 500 
360 556 556 556 611 500 444 611 667 333 333 556 500 722 611 611 
500 611 556 444 556 611 556 778 611 556 500 280 260 280 520 750 
750 750 300 520 400 1000 500 500 420 1300 520 320 1000 750 750 750 
750 300 300 400 400 460 556 1000 420 980 444 320 833 880 750 520 
750 320 520 520 611 520 260 500 380 740 340 480 520 750 740 400 
400 520 312 312 360 580 600 320 300 312 360 480 780 780 780 400 
660 660 660 660 660 660 880 680 620 620 620 620 360 360 390 370 
740 760 820 820 820 820 820 520 820 780 780 780 780 520 580 888 
556 556 556 556 556 556 722 556 500 500 500 500 347 347 377 357 
611 611 611 611 611 611 611 520 611 611 611 611 611 556 500 556 
] 
/Encoding 370 0 R 
/BaseFont /HDDGLC+MSTT31c6b7 
/FontDescriptor 367 0 R 
&gt;&gt; 
endobj
369 0 obj
&lt;&lt; /Length 10526 /Length1 4144 /Length2 6380 /Length3 0 &gt;&gt; 
stream
zv¥gjQkÜuùxúõüó½�ÕñQÇ9;Õê¡ƒÀÉd¾Ñ®ôQÛçFeœ5íNRAžW!evÔ=Ë½ý™îžÍ8g(XmØpJe*åº0bÝæÆ¡]ó�úqÐÁÊ©OíiÂåt/x�Ò¿ÖUÑS3P¸43G`œŽZŽBª„zïùÖ§¶«X™Åe3?»¹ÏébÃè¦sQŒ–«;îWßê¾ý„ÆaçXOˆn&amp;7¸}ÃŠÈ�Æ³ed½‚$/´ñ?þ2ÿÓ#øKˆÖl%Ù“—0ñ‡ €Eê„†4áN-.‚ÑJHÊr	Ž×+«2¦wDqV/{±gp“™|Mú:4µ$�”yC¿¹
•ÞžœN:sâ-Ú¹(}4,O™�Ù€¡í½MMùcƒÂ–¯­.N¥UwîÈ#G‹©šÕÜ­Š�)~D<a€â-ÑÔší³’È¯=¬Éky÷Ãßm~•‚ 7µl¥”÷á’dï*§yc="" $="">�»‰NHÞVý×ÙpW{5 ÞCžYìg6´Ì�9BUÐñ1Ë^t^8ûªøo#žÞv“–†mEK["ˆ03IBè3F÷Éº ŒB°È:ô•\ˆ÷Gñx?½(Å’=c×ø†Ÿ$h‡ò0KÄqÛÍ°·Ú‘<a}×¨¦’mÑ2uýúsþã¶µf”�[g` dØhhœmí×¹Ä”Žýçfç’Ž’“g›‹%†�ËiÓí="" f{¹õûâð*¾o¶¡e�u©o‚‰Ïß="" %hÌ8ìr1³1<ÁÑ_?dqï½×°˜âÞ%»bb="" œll4beb="A§#Æ‘ìŠá°Fr×i1€" l‰²[r½$ï¨ð*lîn(0vq„Ý="" Ý�="" 5ºð²¢¤m}_‡pü&8r¡äÿu©)›r“boÏ%¶tÀpkÇr$e!óp¾éj”��.\˜þÏÎÌdå$«båý+��'b…wvÎØ.ºõ b£jt3mñ»-}ø¹¤é–Ývoàéƒg¡ìiõ*h0-n¬býá*cÀÍá›®á\="">ÔÅ¨
‚°ôæ‰Ä¦Š¬‡ìäóËp¯;tPÿúÿ$	ÿrëK[Õeœ15X&nbsp;Ñ—åûê	‘3º(uÕ•ÙÛ¯.W6¤Å3r®êÞí´&nbsp;MQtêã}ñ|µ²ÔSùòP^°êéËuÿi•”‚ï¼�Ë‘Ý[Í_Ký@¾Onj³ûö
Ç	âƒ
`IRùÁY…µlt‰¼õ;�(QAr­èz¹LÇœµ.:Ô�#@+‰71.�pU¤ØÄy
D|ÕˆÝ)ÛŸ¸ýáv»ƒo´{œs^áœ,:ïË£óéqžËJ4t¯Dp³ÐzzÑ8þ›+Vpó‘lºÓ±#Q¾Ø¬ªC©ºƒÉ«€{³¶&nbsp;c\tÇ6�OÍ¸A�ÇbXöÃ&amp;4¢­3)³1Ëì\hçÃ|£:’G?£¡¬:zrL{µ¹zÕ÷|b}Oƒ`(uš7êø0s!Ñø ¼Ne�8Ìütr|LYtc”ü†‡}Ñÿ$'Í?XÓœ&nbsp;f/¨•39
PÃál²®sY”0—�2xøZ*úÝÏêt°S?ê2•=¦bAPMóïtØÀªÁìµ¼™à}ZyÙ@	ÕD°—ÚhÄ©Í÷µÇ&gt;9²”0¼çáãB»Ûzû�‹L¾&amp;ãæjÂ¥L–1»#²=çsv)érÁb8A(jóO�o1L‹*Ì*âÃ
¨Ñý—ô”õq7™Ã�Q‰Â`“6Ù-óû/w¯-meèL�´\]
‹c’"øGÇw[®†#úr¯7 ŸFÂ·§°ŸCÀç´§
X¢+F£ŒKôxœŒcye�æÖÖÛ€õ&nbsp;Ã–˜š®[ø
}¿
N5åù?wúmÔ&amp;UZvfc¼“d¼š´ÖÁÕyÝ¥#b¥ôhÑéöÖš]�&amp;QóÞ¸tÄ�*Vù\ÿ~#BÿÛñeóÙuˆ/gÃØ2báwP¿,mÙ¦¥«õ)ã™‰™}°YWó¨ÞP`rÝN½¡ÎVè¸c}'œUà­&gt;?2G�±HÎh¸º¬x’6»î9ÏºÉÐØÓê=ø=ØR'ý‚7¨°}s;mÀ:ÿïp°6…!¬np‰·»Â¼7_ê»-ær?]«tí%I¡8òWÇðf¯?Zö++vÇo#Ò2¼±3Ùú×UP_XkÊGæ¨]8„ÈÞDTœý&amp;˜ðï³{Ô[_²�”‰Å%Z4Y†òvÛØãWááá„¿Œ‡kß(–×\�&nbsp;Ó&lt;¢c.æUp	YíÄª4æ¤g»¥�º%ö?UžÖ´Iõ§7²ø«{xÓóõˆxQ8L†™ÝÑìˆF~•TbÈÚf¥TGKoc	1Q$¯¾iÄFXÏ½¡øiÆÃZMÊ™õõh`3‰Ã}~}&nbsp;)â‡Žáåg¿ƒ«“ÁËÏÊŸ,«“–Ô&nbsp;5$Øe„w‚)î©'Íq‡WÌœìæLÒÅ8Î…6±¾¥6{f¾C&amp;l€@'´%LºJëº&lt;Ç8{;ÏÌ¶à5�\„_öotÝœNxí9NŒTNøÓ‚YVqN¥‰Â³'÷‹‘	€f¸Cù­¸‰Î{)À­ªã^vO/=0”º÷Å£VòŒÜ½þÇv4µÒO9Ôž„Qaœ%0t|'³]±Ý¥
åîSÛÞ9W^ì|�KwAKôpZ—ÚŽÒç.Ÿ@®[;œªc{e]`·h;ïý(¼ËTpÏí¾”éÉ.ïlŒšÖî3%@ö¥n¡Niƒ¦rg\¿°&lt;¥&gt;\î‚RðÆ?ÒO’×ôm“Å‚Þ»ûxæFX·áÛþ0ØË¬ûu5îîlPÁp:�ÖòsŽ#€¹žgv»ÞR—â¯”{È�	ÿ„O˜òþñŒ+i“Ú&nbsp;aJÙ¢aæ@¯ì-zØ ¬”`Úû˜Ã»§vñª¼ ;p9ý”¾!æ¡«Þ”9²&gt;&lt;Nž²Dc^Ìç7òÒý B€³§'×Ýš¬±�5Ã}I©ö¸gWªe´ÀÔââBùˆôç•o¾‘¸åw,TJlY¶�ŠS†×§ÄS/çÇµ-»PÏó¬T¥ÜäåÐÚômüçd›}_öû`$N;_l;Í�€ COH(WÃˆÙ»
¯ºzÒö/¦ç¦P®ð"z#oÈÅŒuà-K—AøXÁ�¿®SàB˜YÅDmŒþƒCÅ/‹Áp¶vø€qã¹ÔPsš3(‹Pïñ+LÒv7W¦&lt;Ô!¶²á+Áw{ml°Pç®r@nsuuTg°ÅHì0ÞG¸¬E/:|Ì�ûÀgGEl=²ìÑQÇF5_ô`Ct˜L&amp;r×ŠàÛãN¨çßIôÙ¯ÎÑÔrDì·³ütr6H›W³©á5Py†¸)´ FFdúøµê¤ö¿¼Ís&amp;XAÖÖ±\Ì6æ¬Ub:iÈ_1œ·´mb;½Šq•ñîË¯Í»8Í9ÊfKÅ³×[u&amp;âÛnª¦&amp;Ë"é¢õB·�˜ïuŸø©EîŸaà8qëÊ	ãíø*¿&lt;Ï *‹´fS15÷î¨©:â©Å¦-3öÈù´�ñEãÓ�A½}šd
Î™Òü= RGW?ÖUì˜U¿»²áŠÊNÇ…�(á­}b¢/WnT	Ï_DgòÝûnÌ¡”/EŒaç¢êÆV`�rø„BšOî|ŠÚ­TàìšÜyá‰»PPáûË £?T’Í¡CÊðs¡µì5x†y×�ñæáÜÏ_'§L´Ãx-(§�U&nbsp;bû[ír&gt;Co™»†j²	Býúç†íO,ô×‰²¬Œ•‰È�—T&nbsp;SæÂÖý²'‘|ã[0}&gt;vE&nbsp;âÐÚa†7LÉtàù0ÒÄH6nx×”ŒÚ¦E…è„žßÍC�³ˆ#”lÇ4ç&nbsp;}ÏG=x=í'´æ#árýÕtƒ,‚ÔÃŸp;¹ïÚrf¶Å[Î¡ÕH?”‚-ê'Ì¦ÜX¶Á-é‡dìõžIV
[�±	ƒ5Úñ¾d&lt;ÆŽž·L/î9þSGæOŒq;«T^�…œå�@¶x•ââñäïŸxœ0ë³­'ƒXòOaÐð‰³´+š“
®ˆ[ˆø;igV`Ôz}á±„n&gt;Éõ&gt;â¬@‚ù‡ç(ÏNwSF~›¨H¶;P’ñˆî´Õç)b½øG–�—ÂU–ÀQ/§Ð^Û¼d„vÚË–N?7½ùj¤‰Îï¼Y
kG–ˆ½À“ÊBÆç€EC`ÙîŸ?.„þù5âêEÉé&lt;¦Hªþ^øÔ!µÎÛe19ü,âlÝœITw sPÇFí�=µœÍ?Rn'Ds‡vK‹7m^„Ù¿p–ŒÑX
ÉÎb§R&nbsp;%ì))åðà gF©_¿Ðþ9ÌCÖúWGÂ@¹!~Ýã}rÂK÷¢Öµs5e[þIBn-É3ú*AUIž­±Š]�#l81nfŸc)ôLß¡g�
ˆ¼£¯FŠ\¸Ç^ïÒ¬�wÌ—0;öÑêä§GEóÓ"Ë³fó
øX*`‰{ˆÌB«3ÝŠmX¨&amp;ñþ·mÕŠ²©š]ºì�Ëó üˆqXi’“çñ(†aÜ
@0ö�.Díz«+êŒœ'µqX]&gt;�8óšª¤r(¤�ßW(¢eã‹‡‚YA,±õ/É–�hizjGž�,m.×Üˆ¯.Y+„nÈT‚7þp¯:|Goª‡­
‹X°¨‡Zø6&amp;L²×ú#Ÿ­Ÿí §sØ&nbsp;žä½×ùÃ
ÕJW$ç
8aY&nbsp;”†êkÿ²X=­ïIrd¯€ÃËÊ¤ž˜.•ÿä¶‹g™$Š^«&lt;Þø¥Ÿ•*ˆÐxEødèriR5YÖÏi‘+âÔ«x‰¶\®ÓÅ{
ŸîVå?B‡�&lt;ë] ëËî:Xå$÷SBáKN[F�¬ê¬è=C…‚³NƒO(ÞåÐPW&amp;ƒÃâ}Ã8wž¸3éJI”×9G#8NmW„ª±iI‰ûœÏ¤$ÍïNgr11§8‘É
îÐ–ÿ¹lžG­ƒÚËÔ3\x—HSâx˜ð"S…�á4@Wâ’•Ì@Õ(jE„ª
dã{8·2œŒþVŒÍð9q¬�ÏOtÅfyš%ÜpL\Öb±Õ„¥Ú™Žzåmí~þí¡Ö78R�âªË‹ÐÉúýÊ¨%&gt;L²È¶Õ™Žl–ý~ö
Ž\Å“#SöläQáù@z9ÒvÃ°�FZÕâU†“ç†c%†=þEdµ;¨£ÚCó•¥sf7OŒC�‹Û€€¾rqÁ([ü±‡X\•[Z›õmUõŸæîwk4³†	]?ÿY_áŠÀéj&amp;¬UáÃ(dW‡f¿%V†G"{ÏÛUdÑ×„W¿À„¡c&lt;•ˆUW.ùÂ<wemj%º‹Ü#‡øÚ\þf�Ïbàn…Ìçzq.hÚaŠš¸Ž+‚¦«Ú%¯ˆ¿’�i*‘¸ïžÇßrß†í£Ê²¦>#OZy?ªD½qÝfK¼cŸlÔ'åGÑºýõ‚Å-x²´ÎZGr—ôé‚÷óÄé+?XÝ#_[¤ì½	Å„6üsl5
ð‰Œ÷±ÌÑ~ù»ñàvÂ3ûÕï�HT¹OöMùˆƒ¹eL¤Âl™Y«(ê‘3mðbBO)Ï˜ø
æÍYb–&lt;î~óÖ¿x¡°S�ƒ
2âQÛTM±áÂæð¸¢Õÿ_:nºðÜ9ÒVŽA¨6¸&gt;ó½�h�H6¹™Ô±A²7NÕ¥žäæ|�Ìû.€rlêMsÐ•�läÛ(f0Û0Œ^€ªö·�¥áûsnÁ\._àñløÈ.�Qò¬à=e‘i¯Ä$Û½ÞN‘wIKÛ³”“ä›|iŽ1?ÆØÂ!n…øú¬ƒÁ(Iè ¶IÞ�'ÓîýêàCãþÜY€VÔ(œ,JV°ý�ÙYšWbÅé§»3?!äà”Òè5…ÕÍ…z?ï,GÀ°]úä±®+¨gùFÙ¿€qÝÐg¯Xç`ñý‘H|žZóëNGòŒ@×nù�ë!(Bå‚{XÊ(!‡ŽXó§ï$c[P$ßb¨Û/!lyîH�âi€1˜´NAbËåt;êN‘§éÐö`ô
Îj•ÓŽŠ¬SüËÜŸŽur!!«�)Sß£¹y¢¾i±iŽG³ŸÐwW×CµˆSc¬;ð–7íB-™“¢^ÂÈ ‚«O
{wã½„J§×üøŒó¤9�ZæÉb8£\‡Ï±™—¼^kO;YU,‚/ª°Xå¼ÌD‰+¼˜Àý¥&amp;q™&lt;1V&nbsp;Bhû3Ê… EùI®¨�±’gÐxeÚƒxK‡Ž^�«Cé¸q9WËñ§X["(ÓbQ·bÐs€4ûZ…º±Þžì»ëûU%*�nºi½&lt;Á®†·Gô»W†öõP‹³^¡9È¤K¯œ˜FCÒÏgó*s²ÁFç+ÒÍ°Pôe#÷a8›1òêOöë=ÕZÂ›Žw?¿Ò"™´f¤¼¿ƒÙ&nbsp;…â&gt;¾–Ly¨›¥˜Úýœ§sh¨?’9Þ×¤ƒ(ÕúfB�¬S×ùÉÏÍÞ„‚$Á�)Ø:&amp;…‰1oÛXÑÖ±òÜÂÇNï
œ±�þµðaØŽ`öâôãLò›Ñ�i„täj?Â�RBUF7+à%žÕ	î@š­ÌãBºšæ‚&amp;"À‹f&amp;ýµlÀ²MÓd-)nÐÅïWèùf[¨Ëä¤„…K!ê›Î =›s(æäæ¢ŽhZ?°àê,ˆOè]Ìé_YÝùäÙÉôÏ«X#«=Ãig‘Â8U³Èg~¸Y’þ•hx1Q6P!§}âj³)ÿÀzÐwÒÛG
&gt;\oÔ$
S�€´¾^ÔMmPÍjqË|QoÄ°áÒp£¡ÑVqAÑ—Ü)

˜eù)­€5¯£€�zè\^…ìýš3ãì*Á¹îí!]Oó„3Š9Ó^àø55È„È“—×¶t™R@„¯Ä®¦uŒéÖwÈV4,ª£Éœlïá)U[J¤Ù;aÑn�H‰Ž
y&lt;£«¹rÜû2ø�k4z®‚¢+¶¿&nbsp;èØñX×žÏ—Kÿe“zvIU­›»ÓaÕ&lt;Ô3®ÜÞæŸ|ÏvE€e&nbsp;]Ö1ú¨HÆÄ^êÄÐ\¥v™E=üPM&lt;Æé’ÉÅi¯„êœ1Ù,t‘rê0iìIø}âsI¦¤N|÷2˜è]€T½3;Ùã`{amPcÞád€ÏT˜N%&amp;Ô×G	¿ýHÍU~=@‚vœ0”9qØ@ˆ}ÆÐ­H°õfÞ—º‰ç½µúIiKØf�mOW¿“�ãì,lÁ¦¡S.C"bx*ú¥j}º–å›Vj¶´Ô§G@–]˜•5â£,³ü&nbsp;ºPÖ�GÉè"Ê�Àxó¯_d`�Á�Vtý¶&lt;ÛYýø,µ80ÖÔ§yœÓE5“v©4Œˆ_©—Œž¬ü¨÷l±2&lt;‡˜ÛÔ•Á„�&amp;�àÏ²‡u'ÖÍ\ü¥Ü.?àðšñ}ølá©¼#�·S‹enê2õo­Û«ïå`é—‡°,ËMµ�
¢T�ŽS“Ä9œæ¥£ôÐÎ–ÂMøèßb�6üú”fr3Á ÓYc�d£b¥•à±LŽ$«Æ†ˆ7ôQ³à�OU–uÕó7Neÿ*ókâØÅÿ`×©¿‘öÇxñtøpfã+Ýv'“^¥œ�èµìF
»~È9Þguq`ø™ü9î-BÉè³qâ¡Ì%h-Ûn…JF_¦[£Èw¥`&lt;\U.lÞZ´!(‡€âÙ²ÛDZ0®´*§ë›&nbsp;ÞÚ–še¡Õ"ÁÐy¥§~§TÒÅlÇ0SüxÄsG�8®�SS*5çó;†2JT»Ø‘UB&amp;f|î<púß¶¿93žg”tÏö|nº•×4|¨zx+vÖ]‰´)c‘¼ât¬› ðuÒ¥ãlà×‡j<¤îh="" ·^káqµt€èb}+lÑ©_="" ÍÃÈx‚¥þ£2üo0¦hc0«Ëô·z£="" e3©nt±”ÀÄlsq ¾l3§›š6k^Ü:ƒûìi…É"ü6ù×'¯c×Í®<p4Žêxspez1@¼¿²ÑÓ‚°âdàØiÐe¾À«»ˆlå†)–~ÛhgËf›@ºÏ°fãp†f="" %Ä2µk5aùÔi9nÀ"~ŸÄ­9}gqçz]%Çô±!15zvŸô-ezr)Æóiè:•còñ¾j3Ô%h="" ã�\à8îv¼›¦©“v§òñ‘“•~="" Ê6Ð="" mtft03="" i:¡‹ÿh¬akêt*& ="" {�ÕªÚôùù="" ·£Æ(ìÖ9üük#ðïŠwobi±l�(Ðœ?ñêˆ—Ôsq¡-r˜xÃ‹px%÷‰v}¼5‹•¡‹ùû„¸Ûho-¤ï„¢ÿŒÙuáe©øþ‰¤a`,a€m7ªi–rÛ÷�fez¬Ð…k.}sñÁ’¥8²�Óo'é?]?,¥-áºaÕ´vòfj�¼žÆÆ6_Ãé(u!ù3guùåólücr)3žzø59à�°6$øâ’ïÕ©§4ñÆhsñ‰�oµ»noÆ2="�ŒiêR‡#ÆµYª+hQJwCçBy/A´H&nbsp;Â" q¥u"„‹øé:c�ÆÑwòqx1p°?Ð+©™æx²�b|Üf="ŽªÄ²,q`”Õba}n•ñ|yŸYó;íÆÔEB­¿á�é¶L§’’8HÑÜÑµò‘jÎ�g­µLŒ&nbsp;¾`™Mºªhw™õò•·šÅæwT—†³Î�»R]3ºî�²Îúè/|‰°ˆ§vr1û£6ÎB¸´<<™»°ãLˆöˆ�×çS1·6ø!¼ñ—›" šv="">Í€½±1¨T5w¤Ò4öªV¶-_;­_÷üÀ¢càCò9V8äÈ‹Éw�àµ¦u1ÐCÒÍªþ3N†Üoˆ@#�ÙÈªÖ%ÎO¥ˆ¹
c?ÿOl2t¨»(–˜°1#*«QqÈ&gt;ä«ÇJø¸ƒJ¦SÝþùcåpÿ–Ãà�•ÓÎ-ÀŽ¢Ê”ÓF¥0Båò0¬ì&nbsp;/‡U�d"žŸéPebFX)ÞXx&amp;¢¤Ñh›ç&gt;PÌƒž³))ŒÚ÷`R&gt;†j=çtQå~Â;b£Ò{îyÊUÆ­+:mLbzi8…‘°AÙ~‰“OñËÿV½ooB•cQ­¾ÆRÞöÊ°/tI�­ü¹¹³ü
ç:Â;)û§{¡€RsÙ÷aß"Õ+¹I¼O#…Eº&nbsp;¯€*¦rudêdI/ÁÿØ†¿ößuÏ�!w†U2×Ì—`§ëgúÑv¿]¢&lt;+ÑrCË}É{‹	&gt;‚ýT¾I)¦E9Å®Tvý�ëÙ‰øÃó§¸@Yþù!¨Ø:n~H~ÜÖ3-£ýOL.-‡@}f„* ¹b2J6HyŠGHOª}É½«±à¬œ¤8RB°"úâ6zµNÖiu%eœM×uGŒåÅôµ‹p=£j²ö»_È°/_Œé oGªßFo_–HÑR1Ò€yNlê÷•[úûk€‡KÓdÏèvuSÉØïâ^®À‰Akü‰"y£9ÃJ+ÚLùòóË.ú»ÐMèŸvŒû¾Ëö7zOKvròF½Š#PF:ñ[k"ˆ°_/¡ÅîÇßþþ-ò+u�®�F•sMa•	òVëØ¨úúB+WÛFšÙ;(Ô&amp;4"Hë4'uÃ4C&amp;hfqÎ½&gt;k†ŒÕ"áÃ^†W_o	—·Äñ.OÓ&amp;ƒáº–g-éHvs8CÖñfµB$�âÛ:H=OþãJ¹¦Éú,Òœ?=™SëélË†;ðFÁ’ªàì†µ 5(hN„;™™;;³Û•SJN”þêd²kõM[Dq=p‹Æ©Á‚�
,Nò�ùœÝ!m|´y}QƒLX¼V 
#Aµ½)7•&gt;˜Ý+xÀó:4&gt;ªìÜçå=Mãt~LIÓJ‡´’„M|›’¤*0±	ñCË»–†éFç4ÕˆPüâ¤(…7Õ›Ð«qäá~ìA‹“´÷8ƒôUê`P&gt;</púß¶¿93žg”tïö|nº•×4|¨zx+vö]‰´)c‘¼ât¬›></wemj%º‹ü#‡øú\þf�ïbàn…ìçzq.húašš¸ž+‚¦«ú%¯ˆ¿’�i*‘¸ïžçßrß†í£ê²¦></a}×¨¦’mñ2uýúsþã¶µf”�[g`></a€â-ñôší³’è¯=¬éky÷ãßm~•‚></tøþ˜ì\></v%aá£œps1�l`ôbä2[›;�></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://socialsciences.mcmaster.ca/econ/ugcm/3ll3/mill/liberty.pdf">https://socialsciences.mcmaster.ca/econ/ugcm/3ll3/mill/liberty.pdf</a></em></p>]]>
            </description>
            <link>https://socialsciences.mcmaster.ca/econ/ugcm/3ll3/mill/liberty.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-23636407</guid>
            <pubDate>Thu, 25 Jun 2020 02:54:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to write PureScript react components to replace JavaScript]]>
            </title>
            <description>
<![CDATA[
Score 99 | Comments 72 (<a href="https://news.ycombinator.com/item?id=23636336">thread link</a>) | @JacksonGariety
<br/>
June 24, 2020 | https://thomashoneyman.com/articles/replace-react-components-with-purescript/ | <a href="https://web.archive.org/web/*/https://thomashoneyman.com/articles/replace-react-components-with-purescript/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
  

  

<p>I have twice migrated large JavaScript apps to PureScript. At CitizenNet we replaced Angular with Halogen, and at Awake Security we’ve replaced most of a React application with PureScript React. Both companies have seen a dramatic drop in bugs in production.</p>

<p>It’s relatively easy to replace React due to PureScript’s <code>react</code> and <code>react-basic</code> libraries. The React mental model fits well with a strongly-typed, pure functional language like PureScript (or Reason), and using the same underlying library means that components can be shared between languages with little modification.</p>

<p>At Awake Security we share internationalization, a Redux store and middleware, and much more in an code base where PureScript regularly imports JavaScript and JavaScript regularly imports PureScript.</p>

<p>The best way to rewrite a significant app from one language to another is incrementally, while it runs. At first the new language can take over logically isolated parts of the app: the management dashboard, or the chat window, or a form. But eventually you must mix components from both languages together – for example, to support shared global state.</p>

<p>At this point you can’t just let the new language take over a DOM node. You need to support simple, clear features for intermixing the languages. Fortunately, you can transform the interface of idiomatic PureScript code into idiomatic JavaScript (and vice versa). With <code>react</code> and <code>react-basic</code> you can write business logic in PureScript but easily interoperating with the larger React ecosystem and your existing code.</p>

<p>In this article I will demonstrate how to replace part of a React application with simple components written in PureScript. Along the way, I’ll share best practices for making this interop convenient and dependable. The examples will be simple, but the same techniques also apply to complex components.</p>

<h4 id="sections">Sections</h4>

<ol>
<li><a href="#let-s-write-a-react-app-in-javascript">Write a tiny React application in JavaScript</a></li>
<li><a href="#setting-up-a-shared-purescript-javascript-project">Update the application to support PureScript</a></li>
<li><a href="#replacing-a-react-component-with-purescript-react">Replace a React component with PureScript React, with the same interface and behavior as the original</a></li>
<li><a href="#replacing-a-react-component-with-purescript-react-basic">Replace the component again with React Basic</a></li>
</ol>

<p>I encourage you to code along with this article; no code is omitted and dependencies are pinned to help ensure the examples are reproducible. This code uses Node <code>v11.1.0</code>, Yarn <code>v1.12.0</code>, and NPX <code>v6.5.0</code> installed globally, and PureScript tooling installed locally.</p>

<p>Peter Murphy has <a href="https://github.com/ptrfrncsmrph/purescript-react-tutorial">implemented the ideas in this article using React Hooks</a> if you’d like to see this in action.</p>




<h2 id="let-s-write-a-react-app-in-javascript">Let’s write a React app in JavaScript</h2>

<p>We are going to write a tiny React application which shows a few counters, and then we’re going to replace its components with PureScript. The resulting JavaScript code will be indistinguishable, aside from imports, from the original, and yet it will all be PureScript under the hood.</p>

<p>Let’s follow the official React docs in using <code>create-react-app</code> to initialize the project and then trim our source code to the bare minimum.</p>
<div><pre><code data-lang="sh"><span># Create the app</span>
npx create-react-app my-app <span>&amp;&amp;</span> <span>cd</span> my-app</code></pre></div>
<p>At the time of writing, <code>create-react-app</code> produces these React dependencies:</p>
<div><pre><code data-lang="json"><span>"dependencies"</span><span>:</span> <span>{</span>
    <span>"react"</span><span>:</span> <span>"^16.8.6"</span><span>,</span>
    <span>"react-dom"</span><span>:</span> <span>"^16.8.6"</span><span>,</span>
    <span>"react-scripts"</span><span>:</span> <span>"3.0.1"</span>
  <span>}</span></code></pre></div>
<p>We have a handful of source files under <code>src</code>, but our application will need just two of them: <code>index.js</code>, the entrypoint for Webpack, and <code>App.js</code>, the root component of our application. We can delete the rest:</p>
<div><pre><code data-lang="sh"><span># Delete all the source files except for the entrypoint and</span>
<span># root app component</span>
find src -type f -not <span>\(</span> -name <span>'index.js'</span> -or -name <span>'App.js'</span> <span>\)</span> -delete</code></pre></div>
<p>Finally, let’s replace the contents of those two files with the bare minimum we’ll need for this article. From here on out I’ll supply diffs that you can supply to <code>git apply</code> to apply the same changes I did.</p>

<p>First, our entrypoint:</p>
<div><pre><code data-lang="jsx"><span>// src/index.js
</span><span></span><span>import</span> <span>React</span> <span>from</span> <span>"react"</span><span>;</span>
<span>import</span> <span>ReactDOM</span> <span>from</span> <span>"react-dom"</span><span>;</span>
<span>import</span> <span>App</span> <span>from</span> <span>"./App"</span><span>;</span>

<span>ReactDOM</span><span>.</span><span>render</span><span>(&lt;</span><span>App</span> <span>/&gt;,</span> <span>document</span><span>.</span><span>getElementById</span><span>(</span><span>"root"</span><span>));</span></code></pre></div>
<p>Then our main app component:</p>
<div><pre><code data-lang="jsx"><span>// src/App.js
</span><span></span><span>import</span> <span>React</span> <span>from</span> <span>"react"</span><span>;</span>

<span>function</span> <span>App</span><span>()</span> <span>{</span>
  <span>return</span> <span>(</span>
    <span>&lt;</span><span>div</span><span>&gt;</span>
      <span>&lt;</span><span>h1</span><span>&gt;</span><span>My</span> <span>App</span><span>&lt;/</span><span>h1</span><span>&gt;</span>
    <span>&lt;/</span><span>div</span><span>&gt;</span>
  <span>);</span>
<span>}</span>

<span>export</span> <span>default</span> <span>App</span><span>;</span></code></pre></div>
<h3 id="writing-a-react-component">Writing a React component</h3>

<p>Let’s write our first React component: a counter. This is likely the first example of a React component you ever encountered; it’s the first example in the PureScript React libraries as well. It’s also small and simple enough to be replaced twice over the course of this article.</p>

<p>The counter will be a button which maintains the number of times it has been clicked. It will accept, as its only prop, a label to display on the button.</p>
<div><pre><code data-lang="jsx"><span>// src/Counter.js
</span><span></span><span>import</span> <span>React</span> <span>from</span> <span>"react"</span><span>;</span>

<span>class</span> <span>Counter</span> <span>extends</span> <span>React</span><span>.</span><span>Component</span> <span>{</span>
  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>
    <span>super</span><span>(</span><span>props</span><span>);</span>
    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>
      <span>count</span><span>:</span> <span>0</span>
    <span>};</span>
  <span>}</span>

  <span>render</span><span>()</span> <span>{</span>
    <span>return</span> <span>(</span>
      <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{()</span> <span>=</span><span>&gt;</span> <span>this</span><span>.</span><span>setState</span><span>({</span> <span>count</span><span>:</span> <span>this</span><span>.</span><span>state</span><span>.</span><span>count</span> <span>+</span> <span>1</span> <span>})}</span><span>&gt;</span>
        <span>{</span><span>this</span><span>.</span><span>props</span><span>.</span><span>label</span><span>}</span><span>:</span> <span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>count</span><span>}</span>
      <span>&lt;/</span><span>button</span><span>&gt;</span>
    <span>);</span>
  <span>}</span>
<span>}</span>

<span>export</span> <span>default</span> <span>Counter</span><span>;</span></code></pre></div>
<p>Then, we’ll import our new counters into our main application:</p>
<div><pre><code data-lang="diff"><span>--- a/src/App.js
</span><span></span><span>+++ b/src/App.js
</span><span></span><span>@@ -1,9 +1,13 @@
</span><span></span> import React from "react";
<span>+import Counter from "./Counter";
</span><span></span>
 function App() {
   return (
     &lt;div&gt;
       &lt;h1&gt;My App&lt;/h1&gt;
<span>+      &lt;Counter label="Count" /&gt;
</span><span>+      &lt;Counter label="Clicks" /&gt;
</span><span>+      &lt;Counter label="Interactions" /&gt;
</span><span></span>     &lt;/div&gt;
   );
 }
</code></pre></div>
<p>With <code>yarn start</code> we can run the dev server and see our app in action.</p>

<p><img src="https://thomashoneyman.com/images/2019/running-app.gif" alt="running app"></p>



<p>We’ve written entirely too much JavaScript. Let’s support PureScript in this project as well. Our goal is to write code in either language and freely import in either direction without friction. To accomplish that, we will install PureScript tooling, create a separate PureScript source directory, and rely on the compiler to generate JavaScript code.</p>

<h3 id="1-install-the-compiler-and-package-manager">1. Install the compiler and package manager</h3>

<p>First we must install PureScript tooling. I recommend installing versions of the compiler and Spago (a package manager and build tool) which match those used in this article. I’ll use NPX to ensure all commands are run using local copies.</p>
<div><pre><code data-lang="sh"><span># Install the compiler and the Spago package manager however you prefer;</span>
<span># since we're already in a React project I'll use Yarn</span>
yarn add -D purescript@0.13.2 spago@0.8.4</code></pre></div>
<h3 id="2-initialize-the-project-and-package-set">2. Initialize the project and package set</h3>

<p>We can create a new PureScript project with <code>spago init</code>. As of version 0.8.4, Spago always initializes with the same package set, which means you should have identical package versions to those used to write this article. I’m using the <code>psc-0.13.0-20190607</code> package set.</p>
<div><pre><code data-lang="sh"><span># npx ensures we're using our local copy of Spago installed in node_modules.</span>
npx spago init</code></pre></div>
<p>Spago has created a <code>packages.dhall</code> file which points at the set of packages which can be installed and a <code>spago.dhall</code> file which lists the packages we’ve actually installed. We can now install any dependencies we need and we’ll know for sure the versions are all compatible.</p>

<p>Before installing anything, let’s update the existing <code>.gitignore</code> file to cover PureScript. For a Spago-based project this will work:</p>
<div><pre><code data-lang="sh"><span>echo</span> -e <span>"\noutput\n.psc*\n.purs*\.spago"</span> &gt;&gt; .gitignore</code></pre></div>
<h3 id="3-adjust-the-directory-structure">3. Adjust the directory structure</h3>

<p>Finally, let’s organize our source code. It’s typical to separate JavaScript source from PureScript source except when writing an FFI file for PureScript. Since we aren’t doing that in this project, our source files will be entirely separated. Let’s move all JavaScript code into a <code>javascript</code> subdirectory and create a new <code>purescript</code> folder next to it.</p>
<div><pre><code data-lang="sh">mkdir src/javascript src/purescript
mv src/App.js src/Counter.js src/javascript</code></pre></div>
<p>Next, we’ll adjust <code>index.js</code> to the new location of our root component:</p>
<div><pre><code data-lang="diff"><span>--- a/src/index.js
</span><span></span><span>+++ b/src/index.js
</span><span></span><span>@@ -1,5 +1,5 @@
</span><span></span> import React from "react";
 import ReactDOM from "react-dom";
<span>-import App from "./App";
</span><span></span><span>+import App from "./javascript/App";
</span><span></span>
 ReactDOM.render(&lt;App /&gt;, document.getElementById("root"));
</code></pre></div>
<p>We’ve just one task left. The PureScript compiler generates JavaScript into a directory named <code>output</code> in the root of the project. But <code>create-react-app</code> disables importing anything outside the <code>src</code> directory. While there are fancier solutions, for this project we’ll get around the restriction by symlinking the <code>output</code> directory into the <code>src</code> directory.</p>
<div><pre><code data-lang="sh"><span># we can now import compiled PureScript from src/output/...</span>
ln -s <span>$PWD</span>/output <span>$PWD</span>/src</code></pre></div>
<p>Your <code>src</code> directory should now look like this:</p>
<div><pre><code data-lang="sh">src
├── index.js
├── javascript
│ ├── App.js
│ └── Counter.js
├── output -&gt; ../output
└── purescript</code></pre></div>
<h2 id="replacing-a-react-component-with-purescript-react">Replacing a React component with PureScript React</h2>

<p>I like to follow four simple steps when replacing a JavaScript React component with a PureScript one:</p>

<ol>
<li>Write the component in idiomatic PureScript.</li>
<li>Write a separate interop module for the component. This module provides the JavaScript interface and conversion functions between PureScript and JavaScript types and idioms.</li>
<li>Use the PureScript compiler to generate JavaScript</li>
<li>Import the resulting code as if it were a regular JavaScript React component.</li>
</ol>

<p>We’ll start with the <code>react</code> library, which we use at Awake Security. It’s similar to <code>react-basic</code> but maps more directly to the underlying React code and is less opinionated. Later, we’ll switch to <code>react-basic</code>, which will demonstrate some differences between them.</p>

<p>As we take each step in this process I’ll explain more about why it’s necessary and some best practices to keep in mind. Let’s start: install the <code>react</code> library and prepare to write our component:</p>
<div><pre><code data-lang="sh"><span># install the purescript-react library</span>
npx spago install react

<span># build the project so editors can pick up the `output` directory</span>
npx spago build

<span># create the component source file</span>
touch src/purescript/Counter.purs</code></pre></div>
<h3 id="1-write-the-react-component-in-idiomatic-purescript">1. Write the React component in idiomatic PureScript</h3>

<p>Even though we are writing a component to be used from JavaScript, we should still write ordinary PureScript. As we’ll soon see, it’s possible to adjust only the interface of the component for JavaScript but leave the internals untouched. This is especially important if this component is meant to be used by both PureScript and …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://thomashoneyman.com/articles/replace-react-components-with-purescript/">https://thomashoneyman.com/articles/replace-react-components-with-purescript/</a></em></p>]]>
            </description>
            <link>https://thomashoneyman.com/articles/replace-react-components-with-purescript/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23636336</guid>
            <pubDate>Thu, 25 Jun 2020 02:40:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Stop Sabotaging Your Career with Short Stints]]>
            </title>
            <description>
<![CDATA[
Score 27 | Comments 29 (<a href="https://news.ycombinator.com/item?id=23636077">thread link</a>) | @gmays
<br/>
June 24, 2020 | https://staysaasy.com/engineering/2020/06/16/Stop-Sabotaging.html | <a href="https://web.archive.org/web/*/https://staysaasy.com/engineering/2020/06/16/Stop-Sabotaging.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>Life before a software engineering career is commonly a series of time-bound efforts to gain competency in a new area. This semester you learn geometry. That semester you learn history. Next semester you learn calculus. And so on.</p>

<p>As a result, most people entering the software engineering workforce equate learning with learning a brand new topic. I didn’t know ruby, I learned ruby. I didn’t know SQL, now I know SQL.</p>

<p>This kind of thinking leads people to 2 year cycles. On most modern software teams, it takes roughly one year to really feel like you have your feet under you. By that time the kind of learning novelty people are used to isn’t there. By 16 months they’re restless. By 24 months they’re gone.</p>

<p>This is a problem. It’s a problem because the majority of durable and transferable knowledge comes after achieving basic competency. Mastery of a skillset, understanding and learning from the outcomes of decisions made years ago, architecture and design, leading projects - these all come well after basic competency.</p>

<p>Not only does a life of cyclic learning work against reaching these next levels, but your ego and willpower also work against you. Those next-level skills are harder to learn. And once you’ve gained competency you lose the excuse of “I’m onboarding” or “still ramping up” when something goes wrong.</p>

<p>I always challenge engineers that want to make big changes in what they’re working on to consider whether they’re simply at the end of a novelty cycle. I always encourage them to go after those next level skills.</p>

<p>On the hiring front, I see a lot of people who have a career’s worth of 2-year stints. You can do that successfully for an entire career, and there are even some people that’ll tell you it’s a way to optimize earnings over time. If it does, I believe it only optimizes earnings for people who can’t get to those next level skills. The biggest earnings come from building and growing with a winning company.</p>

<p>24-monthers never deeply learn how things work. They’ll typically add value to a new company by carrying a collection of things they’ve seen before and shallowly applying them to similar problems. But when faced with a new problem that doesn’t map easily to the solutions they’ve seen, things start to break down.</p>

<p>The end-games for both careers are very different.</p>

<p>24-monthers eventually can get into C-level positions where it’s not uncommon to bring in someone who can just apply the common solutions to the similar task at hand. Their stints usually end right around the time where they’ve upleveled the company in some way and don’t know how to grow their team or evolve their strategy or deal with the short-comings of some of their decisions.</p>

<p>People who learn next level skills and how to deeply understand and react to the tasks at hand lead companies to uniquely successful outcomes. The best CEOs, the best CTOs, the best C-level anything - their careers are often a small handful of long-duration roles where they didn’t apply rote practices but innovated and reacted to change and created novel solutions based on deep understanding.</p>

<h2 id="conclusion">Conclusion</h2>

<p>I’m not saying you should stay with any given job. There are bad roles and bad bosses and everything in between. And skill diversification is important. But every job has problems. If you’re leaving because you’re chasing novelty or avoiding tackling your company’s challenges, you’ll start over in the cycle. Leave enough places for these reasons and you’ll find you’ve seriously limited your opportunities and earnings over time.</p>


    




  </div></div>]]>
            </description>
            <link>https://staysaasy.com/engineering/2020/06/16/Stop-Sabotaging.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23636077</guid>
            <pubDate>Thu, 25 Jun 2020 01:59:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I deleted my Facebook, WhatsApp, and Instagram accounts, and felt great since]]>
            </title>
            <description>
<![CDATA[
Score 414 | Comments 228 (<a href="https://news.ycombinator.com/item?id=23634788">thread link</a>) | @shog_hn
<br/>
June 24, 2020 | https://www.shogan.co.uk/life/how-i-deleted-my-facebook-whatsapp-and-instagram-accounts-and-felt-great-since/ | <a href="https://web.archive.org/web/*/https://www.shogan.co.uk/life/how-i-deleted-my-facebook-whatsapp-and-instagram-accounts-and-felt-great-since/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-2503">
	<!-- .entry-header -->

	<div>
		
<blockquote><p>I estimate that over the last 3 years, I’ve collectively <strong>saved around 2920 hours</strong> of time that would have otherwise been spent mindless scrolling through mostly uninteresting content.</p></blockquote>



<h2>The human problem</h2>



<p>It started with an urge to delete Facebook around 3 years ago.</p>



<p>I had noticed how Facebook was mostly just a highly filtered stream of content. Everyone’s happy thoughts and high moments in life, delivered to me in an algorithmically curated form.</p>



<p>I was part of the problem too. I posted things I was proud of, or the happy moments in my life. Very rarely anything else.</p>



<p>Facebook is for the most part, just a small, narrowly defined window into people’s lives.</p>



<p>We see the full picture of our own lives, but end up comparing what we have to this small, ‘happy’ slither of other people’s lives.</p>



<p>For those who don’t notice this unfair comparison, it can lead to moments of envy, anger, or even depression.</p>



<p>Don’t forget about the fake news, agendas, and other drivel that is posted around Facebook either. Scrolling through this kind of stuff on a daily basis will numb the mind and lead to one becoming complacant and perhaps even completely mislead.</p>



<p>One only has to look at how entire countries have been divided and swayed by lies posted to social media platforms to see how poisonous they can be.</p>



<p>The poison runs broad and deep on these platforms. There are many bad actors that wreak havoc, from state sponsored, to criminals and scam artists. They all have agendas to propagate, or nefarious goals to accomplish.</p>



<h2>The data problem</h2>



<p>The number one question to ask yourself whenever signing up for a ‘free’ account of any type is “<strong>Why is this free?</strong>“</p>



<p>A free product, is <a href="https://fee.org/articles/the-hidden-costs-of-free-social-media/" target="_blank" rel="noreferrer noopener" aria-label="not really free (opens in a new tab)">not really free</a>. There is always a catch. In the case of Facebook, you are paying with your own data.</p>



<p>Your own private life, details, habits, information and more is being collected in the background and used to make money for Facebook. They sell your data, and you pay with your privacy.</p>



<h2>Deleting Facebook</h2>



<p>As I mentioned at the start of this post, the urge to delete Facebook began around 3 years ago. It took me year of thinking about it before I took the plunge.</p>



<p>I exported all of my data as a .zip file, and uploaded it to some encrypted cloud storage for safe keeping.</p>



<p>Then I logged in, went to my account settings and requested that my account and data be deleted.</p>



<p>Facebook leaves your account in a ‘to be deleted’ state. They say that if you login again in the next week or so, it’ll automatically be re-enabled. This is a sneaky attempt at catching people out who have a habit of using Facebook on a daily basis.</p>



<p>I was diligent, and after a week or so my account was permanently deleted. Good riddance.</p>



<h2>Instagram purge</h2>



<p>Next up was <strong>Instagram</strong>. Facebook owns a bunch of products of course, Instagram being one of them. My Instagram account had been up and running from when the product had first launched, and was not a part of the Facebook group, but now that it was owned by Facebook, it had to go too.</p>



<p>The same reasons apply as I listed them above for Facebook.</p>



<p>Instagram was the easy one to delete, I didn’t really interact on the platform, and had just kept a bunch of interesting photos on my account. On a rare occasion I would browse through photos that others posted and that was about it.</p>



<p>The account was purged from my life with little fuss or care. More time cumulated over years to come for me to use on more <a href="https://www.shogan.co.uk/kubernetes/building-a-raspberry-pi-kubernetes-cluster-part-1-routing/" target="_blank" rel="noreferrer noopener" aria-label="useful endeavours (opens in a new tab)">useful endeavours</a>!</p>



<h2>Killing WhatsApp with fire</h2>



<p>WhatsApp hung around for a long time. This one was more difficult to get rid of. I had my family contacts and many friends on WhatsApp, and it had become my primary messaging platform.</p>



<p>I started using Telegram alongside WhatsApp and convinced quite a few friends to join.</p>



<p>Telegram is by far a superior product to WhatsApp. I’m not convinced it’s perfect, (hey it’s free too). But at least it’s not in the hands of a massive entity like Facebook. Less power to monopolies is a good thing.</p>



<p>About 9 months or so ago, I sent out a message to most of my WhatsApp contacts telling them I was deleting my account and telling them where to find me on Telegram if they joined there.</p>



<p>Shortly afterwards I deleted my WhatsApp account and have not looked back since.</p>



<p>Telegram offers far superior group chat options, more chat features, bots, and more. I’ve been very happy with it as a replacement for WhatsApp.</p>



<h2>Post Facebook, WhatsApp and Instagram</h2>



<p>I really feel happier without these three apps in my life. Facebook was a time sink, where I wasted time that could have been better used directly interacting with family and friends, or working on hobbies.</p>



<p>Instagram wasn’t too much of an issue, but there was (as with the others) the problem with my data being sold off.</p>



<p>WhatsApp was useful for messaging, but Telegram replaced that and gave me way more useful features.</p>



<p>I feel happier knowing that my data from WhatsApp is no longer up for sale, even though it was of course just a blip in a massive ocean of data.</p>



<p>I estimate that over the last 3 years, I’ve collectively <strong>saved around 2920 hours</strong> of time that would have otherwise been spent mindless scrolling through mostly uninteresting content. Simply as a result of me having deleted my Facebook, WhatsApp and Instagram accounts.</p>



<p>That’s 121 days of my life I have had available to use on better things already.</p>



<p>So that is the story of how I deleted my Facebook, WhatsApp, and Instagram accounts.</p>



<p>I encourage everyone reading this to take the plunge and delete your social media accounts wherever possible. Whether it be to save time in your lives, or to stop allowing your private data to be sold, you’ll be happier for it.</p>



<p>This is post #3 in my effort towards <a rel="noreferrer noopener" href="https://twitter.com/hashtag/100DaysToOffload" target="_blank">100DaysToOffload</a>.</p>
			</div><!-- .entry-content -->

		<!-- .entry-meta -->
	</article></div>]]>
            </description>
            <link>https://www.shogan.co.uk/life/how-i-deleted-my-facebook-whatsapp-and-instagram-accounts-and-felt-great-since/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23634788</guid>
            <pubDate>Wed, 24 Jun 2020 22:55:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Experts warn parts of U.S. on verge of being overwhelmed by Covid-19 resurgence]]>
            </title>
            <description>
<![CDATA[
Score 48 | Comments 66 (<a href="https://news.ycombinator.com/item?id=23634517">thread link</a>) | @awnird
<br/>
June 24, 2020 | https://www.cbc.ca/news/world/coronavirus-covid19-world-june24-1.5624885 | <a href="https://web.archive.org/web/*/https://www.cbc.ca/news/world/coronavirus-covid19-world-june24-1.5624885">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>Here's what's happening around the world with COVID-19 on Wednesday.</p><div><p><span><span><span></span><span>Isolating COVID-19 cases and quarantining contacts is necessary in the Americas in order to prevent further lockdowns, says the World Health Organization.<!-- --> <!-- -->2:52</span></span></span></p><p><span><p><strong><em>The latest:</em></strong></p>  <ul>   <li><em><strong>IMF <a href="https://www.cbc.ca/news/business/img-downgrades-outlook-global-economy-1.5625010">sharply downgrades outlook</a> for global economy in face of COVID-19.</strong></em></li>   <li><strong><em>EU travel recommendations may <a href="https://www.cbc.ca/news/world/european-union-travel-americans-russians-coronavirus-1.5624911">impede Americans and Russians</a>.</em></strong></li>   <li><strong><em>Australia scrambles to <a href="https://www.cbc.ca/news/world/australia-scrambles-to-prevent-2nd-covid-19-wave-after-1st-death-in-a-month-1.5624963">prevent 2nd&nbsp;wave</a> after 1st death in a month.</em></strong></li>   <li><strong><em>Beware 2nd wave of coronavirus, <a href="https://www.cbc.ca/news/world/warning-second-wave-coronavirus-britain-1.5625074">medics warn Britain</a>.</em></strong></li>   <li><strong><em>Russia holds coronavirus-delayed <a href="https://www.cbc.ca/news/world/russia-victory-day-parade-1.5624914">Victory Day parade</a>.</em></strong></li>   <li><em><strong>Some countries <a href="https://www.cbc.ca/news/health/2-metres-coronavirus-covid-distancing-1.5624439">reconsider 2-metre rule</a> for physical distancing, but not Canada.</strong></em></li>   <li><em><strong>How Canada got into a pandemic economy — <a href="https://www.cbc.ca/news/politics/pandemic-covid-coronavirus-economy-debt-canada-1.5622374">and how it might get out</a>.</strong></em></li>   <li><em><strong>INTERACTIVE | <a href="https://newsinteractives.cbc.ca/coronavirustracker/">Tracking the coronavirus</a> in Canada and around the world.</strong></em></li>  </ul>  <p>A coronavirus resurgence is wiping out two months of progress <strong>in the U.S.</strong> and sending infections to dire new levels across the country's South and West, with hospital administrators and health experts warning Wednesday that politicians and a tired-of-being-cooped-up public are letting a disaster unfold.</p>  <p>The U.S. recorded a one-day total of 34,700 new COVID-19 cases, just short of the nation's late-April peak of 36,400, according to the count kept by Johns Hopkins University.</p>  <p>While new cases have been declining steadily in early U.S.&nbsp;hotspots such as New York and New Jersey, several other states set single-day case records this week, including Arizona, California, Mississippi, Nevada,&nbsp;Texas and Oklahoma. Some of them also broke hospitalization records, as did North Carolina and South Carolina.</p>  <p>"People got complacent," said Dr. Marc Boom, CEO of the Houston Methodist hospital system. "And it's coming back and biting us, quite frankly."</p>  <p><em><strong>WATCH |&nbsp;Long lines at COVID-19 test sites in U.S.:</strong></em></p>  <p><span><span><span></span><span>Traffic is seen at a standstill as drivers wait at drive-thru COVID-19 test sites in the U.S.<!-- --> <!-- -->1:11</span></span></span></p>  <p>The stock market slid sharply Wednesday as the virus's resurgence clouded investors' hopes for a relatively quick economic turnaround. The virus&nbsp;has been blamed for more than 120,000 deaths in the U.S. — the highest toll in the world — and more than 2.3 million confirmed infections there.</p>  <p>California, the most populous state, reported over 7,100 new cases, a record.&nbsp;Florida's single-day count of new confirmed cases surged Wednesday to 5,500&nbsp;—&nbsp;a 25 per cent jump from the record set last week.</p>  <p>In Texas, which began lifting its shutdowns on May 1, hospitalizations have doubled and new cases have tripled in two weeks. Gov. Greg Abbott told KFDA-TV that the state is facing a "massive outbreak" and might need new local restrictions to preserve hospital space.</p>  <p>The Houston area's intensive care units are nearly full, and two public hospitals are running at capacity, Mayor Sylvester Turner said. Houston Methodist's Boom said Texans need to "behave perfectly and work together perfectly" to slow the infection rate.</p>  <p>"When I look at a restaurant or a business where people ... are not following the guidelines, where people are just throwing caution to the wind, it makes me angry."</p>  <p><span><figure><div><p><img alt="" srcset="https://i.cbc.ca/1.5625848.1593031612!/cpImage/httpImage/image.jpg_gen/derivatives/original_300/virus-outbreak-texas.jpg 300w,https://i.cbc.ca/1.5625848.1593031612!/cpImage/httpImage/image.jpg_gen/derivatives/original_460/virus-outbreak-texas.jpg 460w,https://i.cbc.ca/1.5625848.1593031612!/cpImage/httpImage/image.jpg_gen/derivatives/original_620/virus-outbreak-texas.jpg 620w,https://i.cbc.ca/1.5625848.1593031612!/cpImage/httpImage/image.jpg_gen/derivatives/original_780/virus-outbreak-texas.jpg 780w,https://i.cbc.ca/1.5625848.1593031612!/cpImage/httpImage/image.jpg_gen/derivatives/original_1180/virus-outbreak-texas.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5625848.1593031612!/cpImage/httpImage/image.jpg_gen/derivatives/original_780/virus-outbreak-texas.jpg"></p></div><figcaption>A health-care worker takes down a patient's information at a COVID-19 testing site in Houston on Wednesday.<!-- --> <!-- -->(David J. Phillip/The Associated Press)</figcaption></figure></span></p>  <p>Just 17 percent of intensive-care beds were available Wednesday in Alabama — including just one in Montgomery — though hospitals can add more, said Dr. Don Williamson, head of the Alabama Hospital Association.</p>  <p>"There is nothing that I'm seeing that makes me think we are getting ahead of this," he said.</p>  <p>In Arizona, emergency rooms are seeing about 1,200 suspected COVID-19 patients a day, compared with around 500 a month ago. If the trends continue, hospitals will probably exceed capacity within the next several weeks, said Dr. Joseph Gerald, a University of Arizona public health policy professor.</p>  <p><span><figure><div><p><img alt="" srcset="https://i.cbc.ca/1.5625503.1593036438!/cpImage/httpImage/image.jpg_gen/derivatives/original_300/virus-outbreak-florida.jpg 300w,https://i.cbc.ca/1.5625503.1593036438!/cpImage/httpImage/image.jpg_gen/derivatives/original_460/virus-outbreak-florida.jpg 460w,https://i.cbc.ca/1.5625503.1593036438!/cpImage/httpImage/image.jpg_gen/derivatives/original_620/virus-outbreak-florida.jpg 620w,https://i.cbc.ca/1.5625503.1593036438!/cpImage/httpImage/image.jpg_gen/derivatives/original_780/virus-outbreak-florida.jpg 780w,https://i.cbc.ca/1.5625503.1593036438!/cpImage/httpImage/image.jpg_gen/derivatives/original_1180/virus-outbreak-florida.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5625503.1593036438!/cpImage/httpImage/image.jpg_gen/derivatives/original_780/virus-outbreak-florida.jpg"></p></div><figcaption>Volunteers prepare packages of personal protective equipment and sanitizers to be donated in Orlando, Fla., on Wednesday.<!-- --> <!-- -->(John Raoux/The Associated Press)</figcaption></figure></span></p>  <p>"We are in deep trouble," said Gerald, urging the state to impose new restrictions on businesses, which Gov. Doug Ducey has refused to do.</p>  <p>Infectious-disease expert Dr. Peter Hotez said he worries that the states will squander what time they have to head off a much larger crisis.</p>  <ul>   <li><strong><a href="http://cbc.ca/1.5626006">Democrats to hold mostly virtual presidential nomination convention due to pandemic</a></strong></li>  </ul>  <p>"We're still talking about subtlety, still arguing whether or not we should wear masks, and still not understanding that a vaccine is not going to rescue us," said Hotez, of the Baylor College of Medicine in Texas.</p>  <p>Texas Gov. Greg Abbott initially barred local officials from fining or penalizing anyone for not wearing a mask as the state reopened. After cases began spiking, he said last week that cities and counties could allow businesses to require masks. Both Abbott and Ducey are Republicans.</p>  <p><span><figure><div><p><img alt="" srcset="https://i.cbc.ca/1.5625948.1593034776!/cpImage/httpImage/image.jpg_gen/derivatives/original_300/virus-outbreak-texas-daily-life.jpg 300w,https://i.cbc.ca/1.5625948.1593034776!/cpImage/httpImage/image.jpg_gen/derivatives/original_460/virus-outbreak-texas-daily-life.jpg 460w,https://i.cbc.ca/1.5625948.1593034776!/cpImage/httpImage/image.jpg_gen/derivatives/original_620/virus-outbreak-texas-daily-life.jpg 620w,https://i.cbc.ca/1.5625948.1593034776!/cpImage/httpImage/image.jpg_gen/derivatives/original_780/virus-outbreak-texas-daily-life.jpg 780w,https://i.cbc.ca/1.5625948.1593034776!/cpImage/httpImage/image.jpg_gen/derivatives/original_1180/virus-outbreak-texas-daily-life.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5625948.1593034776!/cpImage/httpImage/image.jpg_gen/derivatives/original_780/virus-outbreak-texas-daily-life.jpg"></p></div><figcaption>A sign requiring face coverings at a business is seen in San Antonio, Texas, on Wednesday.<!-- --> <!-- -->(Eric Gay/The Associated Press)</figcaption></figure></span></p>  <p>North Carolina Gov. Roy Cooper, a Democrat, ordered people to wear masks in public as the daily count of hospitalizations and new cases hovered near records. In Florida, several counties and cities have recently started requiring masks in public places and cracking down on businesses that don't enforce social distancing rules.</p>  <p>In a sign of the shift in the outbreak, New York, Connecticut and New Jersey announced they will require visitors from states with high coronavirus infection rates to quarantine themselves for 14 days. That is a turnaround from March, when Florida Gov. Ron DeSantis issued such an order for visitors from the New York City area, where cases were surging at the time.</p>  <p>Cases are also surging in some other parts of the world. <strong>India </strong>reported a record daily increase of nearly 16,000 new cases, with an outbreak in the capital city of New Delhi becoming a rising concern. <strong>Mexico</strong>, where testing rates have been low, also set a record with more than 6,200 new cases.</p>  <p><span><figure><div><p><img alt="" srcset="https://i.cbc.ca/1.5625473.1593025804!/cpImage/httpImage/image.jpg_gen/derivatives/original_300/aptopix-virus-outbreak-india.jpg 300w,https://i.cbc.ca/1.5625473.1593025804!/cpImage/httpImage/image.jpg_gen/derivatives/original_460/aptopix-virus-outbreak-india.jpg 460w,https://i.cbc.ca/1.5625473.1593025804!/cpImage/httpImage/image.jpg_gen/derivatives/original_620/aptopix-virus-outbreak-india.jpg 620w,https://i.cbc.ca/1.5625473.1593025804!/cpImage/httpImage/image.jpg_gen/derivatives/original_780/aptopix-virus-outbreak-india.jpg 780w,https://i.cbc.ca/1.5625473.1593025804!/cpImage/httpImage/image.jpg_gen/derivatives/original_1180/aptopix-virus-outbreak-india.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5625473.1593025804!/cpImage/httpImage/image.jpg_gen/derivatives/original_780/aptopix-virus-outbreak-india.jpg"></p></div><figcaption>A health worker conducts a COVID-19 test on a patient as others wait in New Delhi on Wednesday.<!-- --> <!-- -->(Manish Swarup/The Associated Press)</figcaption></figure></span></p>  <p>But <strong>China </strong>appears to have tamed a new outbreak in Beijing, once again demonstrating its ability to quickly mobilize its vast resources by testing nearly 2.5 million people in 11 days. China on Wednesday reported 12 cases nationwide, down from 22 the day before.</p>  <p>In Europe, countries are both easing and increasing restrictions as the outbreaks evolve. <strong>Slovenia </strong>reintroduced mandatory use of face masks in public transportation and other enclosed public spaces after cases spiked in recent days, while <strong>Belgium </strong>said theatres and swimming pools could reopen next month. Infections there have nosedived over the past two months.</p>  <p><em><strong>WATCH |&nbsp;Belgian entrepreneur gives coronavirus masks the human touch:</strong></em></p>  <p><span><span><span></span><span>Photo booth operator makes custom masks to show the lower half of the wearer's face.<!-- --> <!-- -->1:59</span></span></span></p>  <p><strong>In Africa</strong>, the head of the Ethiopia-based Africa&nbsp;Centers for Disease Control and Prevention,&nbsp;John Nkengasong, said the outbreak is "picking up speed very quickly," with a steep increase in cases and deaths as more countries loosen lockdowns. Africa has seen nearly 325,000 cases and over 8,600 deaths.</p>  <p>Worldwide, more than 9.3&nbsp;million people have been confirmed infected, and more than 479,000 have died, <a href="https://coronavirus.jhu.edu/map.html">according to the Johns Hopkins&nbsp;count</a>.</p>  <hr>  <h2>What's happening with COVID-19 in Canada</h2>  <p>As of 7&nbsp;p.m. ET on Wednesday, Canada had 102,241 confirmed and presumptive coronavirus cases. Provinces and territories listed 65,091 of the cases as recovered or resolved. A CBC News tally of deaths based on provincial reports, regional health information and CBC's reporting stood at 8,530.</p>  <p>In Ontario, patios and hair salons were back in business in <a href="https://www.cbc.ca/news/canada/toronto/covid-coronavirus-ontario-toronto-peel-1.5624924" target="_blank">Toronto and Peel Region</a> on Wednesday.</p>  <p>Premier Doug&nbsp;Ford also announced&nbsp;a plan to&nbsp;<a href="https://www.cbc.ca/news/canada/windsor/ontario-government-announcement-plan-june24-windsor-essex-1.5625150" target="_blank">reopen&nbsp;parts of Windsor-Essex,</a>&nbsp;which until now has been the&nbsp;only region not cleared to move to the next phase of reopening, due to stubbornly high COVID-19 case numbers among migrant workers on farms in the region.</p>  <p><span><figure><div><p><img alt="" srcset="https://i.cbc.ca/1.5625871.1593083182!/cumulusImage/httpImage/image.jpg_gen/derivatives/original_300/covid-coronavirus-ottawa-mask.jpg 300w,https://i.cbc.ca/1.5625871.1593083182!/cumulusImage/httpImage/image.jpg_gen/derivatives/original_460/covid-coronavirus-ottawa-mask.jpg 460w,https://i.cbc.ca/1.5625871.1593083182!/cumulusImage/httpImage/image.jpg_gen/derivatives/original_620/covid-coronavirus-ottawa-mask.jpg 620w,https://i.cbc.ca/1.5625871.1593083182!/cumulusImage/httpImage/image.jpg_gen/derivatives/original_780/covid-coronavirus-ottawa-mask.jpg 780w,https://i.cbc.ca/1.5625871.1593083182!/cumulusImage/httpImage/image.jpg_gen/derivatives/original_1180/covid-coronavirus-ottawa-mask.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5625871.1593083182!/cumulusImage/httpImage/image.jpg_gen/derivatives/original_780/covid-coronavirus-ottawa-mask.jpg"></p></div><figcaption>People are seen wearing protective face coverings in Ottawa on Wednesday.<!-- --> <!-- -->(Andrew Lee/CBC)</figcaption></figure></span></p>  <p>British Columbia is <a href="https://www.cbc.ca/news/canada/british-columbia/covid-19-bc-phase-three-john-horgan-1.5625598">further easing restrictions</a>, meaning residents will be allowed to travel within the province as hotels, motels, resorts, spas&nbsp;and RV parks look to reopen.</p>  <p>Premier John Horgan announced Wednesday that B.C.&nbsp;will gradually be&nbsp;moving into Phase 3 of its restart plan, after the province managed&nbsp;to increase activity without seeing a spike in the number of COVID-19 cases in recent weeks.</p>  <p>Phase 3 of B.C.'s restart plan also means residents can travel within the province&nbsp;"safely and respectfully."</p>  <p><span><figure><div><p><img alt="" srcset="https://i.cbc.ca/1.5626141.1593040455!/cumulusImage/httpImage/image.jpg_gen/derivatives/original_300/senior-covid-survivor-walking-laps.jpg 300w,https://i.cbc.ca/1.5626141.1593040455!/cumulusImage/httpImage/image.jpg_gen/derivatives/original_460/senior-covid-survivor-walking-laps.jpg 460w,https://i.cbc.ca/1.5626141.1593040455!/cumulusImage/httpImage/image.jpg_gen/derivatives/original_620/senior-covid-survivor-walking-laps.jpg 620w,https://i.cbc.ca/1.5626141.1593040455!/cumulusImage/httpImage/image.jpg_gen/derivatives/original_780/senior-covid-survivor-walking-laps.jpg 780w,https://i.cbc.ca/1.5626141.1593040455!/cumulusImage/httpImage/image.jpg_gen/derivatives/original_1180/senior-covid-survivor-walking-laps.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5626141.1593040455!/cumulusImage/httpImage/image.jpg_gen/derivatives/original_780/senior-covid-survivor-walking-laps.jpg"></p></div><figcaption>People speak through a glass barrier at the Lynn Valley Care Centre in North Vancouver on Tuesday.<!-- --> <!-- -->(Ben Nelms/CBC)</figcaption></figure></span></p>  <p>Canada's Atlantic provinces announced Wednesday they will move forward with <a href="http://www.cbc.ca/news/canada/prince-edward-island/pei-atlantic-bubble-covid19-1.5625133">a so-called travel bubble</a> as of July 3, allowing travellers in Prince Edward Island, New Brunswick, Nova Scotia and Newfoundland and Labrador to move between provinces without self-isolating.</p>  <p>Visitors from provinces and territories outside the region will still be required to self-isolate for 14 days and adhere to the local entry requirements in each of the four jurisdictions. However, once the self-isolation period has passed, these visitors will also be allowed to travel within the Atlantic region.</p>  <ul>   <li><strong><a href="https://www.cbc.ca/news/politics/cerb-recipients-payments-ei-1.5623923">Why some CERB recipients are getting smaller payments this month</a></strong></li>   <li><strong><a href="http://cbc.ca/1.5625811">Yukon to open borders to B.C., N.W.T., and Nunavut residents July 1</a></strong></li>   <li><strong><a href="https://www.cbc.ca/news/canada/british-columbia/bc-covid-update-june-23-1.5624328">B.C. runs risk of rapid rebound in COVID-19 cases if contacts exceed 65% of normal, health officials say</a></strong></li>   <li><strong><a href="https://www.cbc.ca/news/canada/saskatoon/saskatchewan-interprovincial-travel-covid-19-1.5625045">Sask. working on 'more permissive approach' to interprovincial travel</a></strong></li>   <li><a href="https://www.cbc.ca/news/canada/edmonton/alberta-invests-10m-in-serology-testing-to-help-track-spread-of-covid-19-1.5623785"><strong>Alberta invests $10M in serology testing to help track spread of COVID-19</strong></a></li>   <li><strong><a href="https://www.cbc.ca/news/canada/manitoba/intellectual-disabilities-visits-manitoba-covid19-1.5624387">'Pure joy' as Manitoba adults with intellectual disabilities allowed to have loved ones over for visits</a></strong></li>   <li><strong><a href="https://www.cbc.ca/news/canada/north/nwt-extends-state-of-emergency-1.5624556">N.W.T. extends state of emergency, public health emergency for 7th time</a></strong></li>  </ul></span></p></div></div>]]>
            </description>
            <link>https://www.cbc.ca/news/world/coronavirus-covid19-world-june24-1.5624885</link>
            <guid isPermaLink="false">hacker-news-small-sites-23634517</guid>
            <pubDate>Wed, 24 Jun 2020 22:19:31 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Understand WebAssembly in 5 Minutes]]>
            </title>
            <description>
<![CDATA[
Score 35 | Comments 11 (<a href="https://news.ycombinator.com/item?id=23634033">thread link</a>) | @jesuisundev
<br/>
June 24, 2020 | https://www.jesuisundev.com/en/understand-webassembly-in-5-minutes/ | <a href="https://web.archive.org/web/*/https://www.jesuisundev.com/en/understand-webassembly-in-5-minutes/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

			
<!-- Horizontal Top Article -->
<p>WebAssembly joined HTML, CSS and Javascript as a web standard on December 5, 2019. This will be useful for many things, and in terms of performance, it’s something never seen before in a browser. If you’ve got five minutes, I need to explain the little revolution that’s going on.</p>



<h3>Once upon a time</h3>



<p>In 1995, Javascript was created <a rel="noreferrer noopener" href="https://thenewstack.io/brendan-eich-on-creating-javascript-in-10-days-and-what-hed-do-differently-today/" target="_blank">within 10 days</a> by <a rel="noreferrer noopener" href="https://twitter.com/BrendanEich" target="_blank">Brendan Eich</a>. And at that time, Javascript was not designed to be fast. <strong>It’s basically for form validation and it’s slow like crazy.</strong> As time went by it got better.</p>



<p>In 2008, Google came out of nowhere and put on the table its new browser: Google Chrome. Inside Chrome was a Javascript engine called V8. <strong>And the revolution of V8 was the Just in Time (JIT) compilation of Javascript.</strong> This change from interpreted code to  JIT compilation monstrously accelerated the performance of Javascript, and thus of browsers in general. This speed was going to allow the birth of technology like NodeJS or Electron and the explosion of popularity of Javascript.</p>



<figure><img src="https://i.imgur.com/YHJMavH.jpg" data-src="https://i.imgur.com/YHJMavH.jpg" alt="webassembly"></figure>



<p>In 2015, WebAssembly is announced for the first time with a <a href="https://www.eteknix.com/gaming-in-your-browser-is-about-to-get-interesting-with-webassembly/" target="_blank" rel="noreferrer noopener">small demo of a game</a> running under Unity. The game runs directly in the browser!</p>



<p>In 2019, the W3C made WebAssembly a new web standard. Just as the V8 engine was in its day, <strong>WebAssembly is shaping up to be the new performance revolution</strong>. So WebAssembly is already here, and it’s off to a flying start.</p>



<h3>What is WebAssembly?</h3>



<p>WebAssembly, abbreviated to wasm, is a way to use non-Javascript code and run it in your browser. This code can be C, C++, Rust and many others. <strong>It will be compile and run in your browser at near native speed on your CPU.</strong> This code is in the form of a binary file that you can use directly from Javascript as a module.</p>



<p><strong>WebAssembly is not there to replace Javascript</strong>. On the contrary, these two technologies are made to work together. By using the <a rel="noreferrer noopener" href="https://developer.mozilla.org/en-US/docs/WebAssembly/Using_the_JavaScript_API" target="_blank">Javascript API</a> you can load WebAssembly modules into your page. This means that you can take advantage of the performance of compiled code via WebAssembly with the flexibility of Javascript.</p>



<div><figure><img src="https://i.imgur.com/gbBMTTf.jpg" data-src="https://i.imgur.com/gbBMTTf.jpg" alt="internet"></figure></div>



<p>The name WebAssembly is a bit misleading. <strong>WebAssembly does indeed work for the Web, but it is not limited to it!</strong> The team that made WebAssembly has gone to a lot of trouble to make it generic so that it can be used everywhere. We’re starting to see <a href="https://github.com/wasmerio/wasmer" target="_blank" rel="noreferrer noopener">examples of this</a>.</p>



<p>Also, there’s a misconception that comes up all the time. <strong>WebAssembly is not a programming language.</strong> WebAssembly is an intermediate format, a <a href="https://en.wikipedia.org/wiki/Bytecode" target="_blank" rel="noreferrer noopener">bytecode</a>, which acts as a compilation target for other languages. Okay, it’s not clear, let’s make some drawings.</p>



<h3>How does it work?</h3>



<div><figure><img src="https://i.imgur.com/EHwFHv0.jpg" data-src="https://i.imgur.com/EHwFHv0.jpg" alt="webassembly"></figure></div>



<p>Did you see that? Another work of art. Do you believe me if I tell you I use Photoshop? Anyway !</p>



<ul><li><strong>Step 1</strong> : It’s you and your developer skills. <strong>You produce source code in C, C++</strong> (you can use others languages). This code is supposed to fix a problem or make a process too intensive for Javascript in the browser.</li></ul>



<ul><li><strong>Step 2 </strong>: you will use <a rel="noreferrer noopener" href="https://emscripten.org/index.html" target="_blank">Emscripten</a> to do the translation. <strong>Emscripten is a tool chain, built with <a rel="noreferrer noopener" href="https://en.wikipedia.org/wiki/LLVM" target="_blank">LLVM</a>, that will compile your source code into WebAssembly</strong>. You can install it and compile whatever you want <a rel="noreferrer noopener" href="https://webassembly.org/getting-started/developers-guide/" target="_blank">in a few quick steps</a>, we’ll look at it later. At the end of this step, you will have a WASM file.</li></ul>



<ul><li><strong>Step 3</strong> : You will use the WASM file on your web page. <strong>If you come from the future, you can load this file like any ES6 module.</strong> Right now, the usage is slightly more complex, but nothing fancy.</li></ul>



<p>OK, let’s get our hands dirty.</p>



<h3>Show me the code</h3>



<p>First of all, we need a small piece of C++ code to compile. Where some people will offer you the whole <a href="https://d07riv.github.io/diabloweb/" target="_blank" rel="noreferrer noopener">Diablo 1  game in the browser</a> as an example, <strong>I’ll keep it simple with a function that adds two digits</strong>. We’re not going to prove the speed of C++ with that, it’s for the example.</p>



<pre data-enlighter-language="cpp" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">int add(int firstNumber, int secondNumber) {
  return firstNumber + secondNumber;
}</pre>



<p>Then go to the Linux distribution of your choice. We will start by downloading and installing emscripten.</p>



<pre data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group=""># installing dependencies (yes, you can use newer version of python)
sudo apt-get install python2.7 git

# gettin emscripten via a git clone.
git clone https://github.com/emscripten-core/emsdk.git

# downloading, installing and activating the sdk
cd emsdk
./emsdk install latest
./emsdk activate latestl
source ./emsdk_env.sh

# make sure the installation worked
emcc --version

# compiling the c++ file to a webassembly template
emcc helloWebassembly.cpp -s WASM=1 -o helloWebassembly.html

# we serve the HTML and look at the result
emrun helloWebassembly.html</pre>



<p>That was the hackerman way of doing the wasm. There’s a simpler way. </p>



<p>You can go to <a rel="noreferrer noopener" href="https://mbebenita.github.io/WasmExplorer/" target="_blank">this site</a> and put your C++ code on the left. Then you get the name of the exported function in the WAT part. <strong>Using the add function code showed before i got : “_Z3addii” as function name, we’ll use that just after</strong>. You just have to click on download and you will get your WASM file back. Easy !</p>



<p><strong>Now we can make WebAssembly work directly in the browser without all the annoying noise around.</strong> </p>



<pre data-enlighter-language="generic" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;WASM test&lt;/title&gt;
    &lt;link rel="stylesheet" href="/stylesheets/style.css" /&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;script&gt;
      const getRandomNumber = () =&gt; Math.floor(Math.random() * 10000);

      WebAssembly.instantiateStreaming(
        fetch("https://012q1.sse.codesandbox.io/wasm/add.wasm")
      )
        .then(obj =&gt; obj.instance.exports._Z3addii)
        .then(add =&gt; {
          document.getElementById("addTarget").textContent = add(
            getRandomNumber(),
            getRandomNumber()
          );
        });
    &lt;/script&gt;

    &lt;h1&gt;Résultat du C++&lt;/h1&gt;
    &lt;p id="addTarget"&gt;&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>



<p>This is it. This html web page allows you to use C++ compiled into WebAssembly ! I skip all the HTML and obvious stuff to go directly to line 11 with the <strong>InstantiateStreaming </strong>function. As the <a rel="noreferrer noopener" href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/WebAssembly/instantiateStreaming" target="_blank">Mozilla documentation</a> says, this function allows you to compile and instantiate our WebAssembly module via a simple fetch.</p>



<p>Then, I use the add function via the function name we retrieved earlier and use it to replace a piece of DOM. And voila ! <strong>C++ via Javascript inside your browser.</strong> How crazy is that? Look, I even made you a <a rel="noreferrer noopener" href="https://codesandbox.io/s/webassembly-en-5-minutes-012q1?fontsize=14&amp;hidenavigation=1&amp;module=%2Fpublic%2Findex.html&amp;theme=dark" target="_blank">codesandbox</a> with a working demo. I’m embedding it right here, play with it !</p>







<p>You’re gonna tell me it’s complicated just to do this, and you’re right. <strong>They’re working to replace the instantiation javascript bit with a simple import into the future.</strong> So be patient, it’s coming. </p>



<figure><img src="https://i.imgur.com/4FjTgL7.jpg" data-src="https://i.imgur.com/4FjTgL7.jpg" alt="fast"></figure>



<h3>Epilogue</h3>



<p>We’ve already been talking for five minutes, so I’ll stop here. If you want to know more about WebAssembly and you have time in front of you : i<strong> recommend this <a rel="noreferrer noopener" href="https://www.javascriptjanuary.com/blog/webassembly-neither-web-nor-assembly-but-revolutionary" target="_blank">excellent article</a> to go deeper in the subject.</strong> For the rest of the story, I’m looking forward to what this opening of the Web to other languages will bring. There’s a lot of potential and i can’t wait for the web to get even faster !</p>

			<!-- clearfix -->
			

			
		</div></div>]]>
            </description>
            <link>https://www.jesuisundev.com/en/understand-webassembly-in-5-minutes/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23634033</guid>
            <pubDate>Wed, 24 Jun 2020 21:23:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[My 10 Year Game Development Journey]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 4 (<a href="https://news.ycombinator.com/item?id=23633738">thread link</a>) | @cedricr
<br/>
June 24, 2020 | http://nicotuason.com/10years.html | <a href="https://web.archive.org/web/*/http://nicotuason.com/10years.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		<p>My 10 Year Game Development Journey</p>
		<h4>June 24, 2020</h4>
        <hr>
	
		<p>Hello! My name is Nico Tuason and I'm an indie game developer from the Philippines. This year marks the 10th year of my game development journey. I'd like to share my entire story with you - my failures, triumphs, and major life events. I hope it will be worth your time.</p>
		<h2>2010 - A Leap of Faith</h2>
		<p>At the start of the decade, I was 23 years old and had just left my job at a local web development company. I had been working there for a year and was making about <strong>22,000 PHP</strong> or <strong>440 USD</strong> a month. The pay was not bad for a fresh grad, but I was unproductive and unhappy. Additionally, my girlfriend of 4 years was dropping plenty of hints of her desire to get married, and 20k pesos just wasn't going to cut it.</p>
		<p>Being Asian (Filipinos are Asian too!) it was not acceptable for my parents that I was not either working or studying, so I applied for a post-grad Multimedia course in Singapore. Little did my parents know, shortly after applying I had received a rejection letter. I would keep telling them that "my application was pending", because I was secretly working on a passion project - my first game.</p>
		<p>To me, video games were more than a fun past-time. They were my refuge during hard and lonely times growing up. I spent almost all my free time playing games on the family PC. One of the first video games I ever received was Star Wars Rebel Assault II, a short but cinematic game. I played through it on every difficulty multiple times. After that, my parents bought me Command and Conquer and my fate was sealed. Growing up, I spent all my money on upgrading the family PC and buying boxed copies of games.</p>
		<p>Being in web development, I learned to use Flash to create banner ads and menu navigation for our clients. Out of necessity, I also had to learn how to create attractive UI and graphic design. While researching, I stumbled across a website called FGL.com (Flash Game License) that allowed anyone in the world to upload a Flash game and have sponsor websites bid on the right to put their logo on the game. They showed what some of the games were bidding for - <strong>3000 USD</strong>,  <strong>5000 USD</strong>! To me this looked like an incredible amount of money. There were even some mythical games going for <strong>10,000 - 20,000 USD</strong>! I devoured all the tutorials I could find. Before I had an idea for a game, I wanted to see if I could do a basic animation.</p>

		<div><p><img src="http://nicotuason.com/img/10years/male1_walk_side.gif"></p><p>My first animation</p>
		</div>
		
		<p>It looked good! But I knew I wanted to make a game in the isometric perspective. I had fallen in love with classic isometric RPGs like Baldur's Gate, and I was sure that any game I made had to be in isometric view. So, I repeated the animation but from different angles.</p>

		<div><p><img src="http://nicotuason.com/img/10years/male1_sheet.gif"></p><p>My first spritesheet</p>
		</div>

		<div><p><img src="http://nicotuason.com/img/10years/iso_walk.gif"></p><p>Resulting animation</p>
		</div>

		<p>The next step was to see if it actually looked good moving around a surface.</p>

		<div><p><img src="http://nicotuason.com/img/10years/walk_test1.gif"></p><p>Yes!</p>
		</div>

		
		<p>I didn't know any game math, but I knew from tutorials that in an isometric perspective, a square is twice as wide as it is tall. So, any movement along the y-axis had to be halved. This made for a very simple isometric transform:</p>
		<div>
		<p>screen_x = x;</p>
		<p>screen_y = y*0.5;</p>
		</div>
		<p>Ok, after I got the basics down, It was time for a stress test.</p>

		<div><p><img src="http://nicotuason.com/img/10years/walk_test2.gif"></p><p>Stress me out</p>
		</div>
		
		<p>By now I was waking up at 6am and jumping right into the computer to make more sprite sheets. It was intoxicating. Every day I felt a step closer to realizing my dream of making a game.</p>
		<p>I did a bunch more tests and I found the fastest way to draw stuff on screen using Flash was to use a method called "copyPixels". The tutorials called it "bitmap blitting" but I only cared that it was super fast. Most flash games those days used Vector graphics - very sharp and smooth shapes. This was a huge burden on CPUs around the world (and eventually led to Flash's demise), but by using copyPixels my game could have way more stuff onscreen than other Flash games.</p>

		<div><p><img src="http://nicotuason.com/img/10years/walk_test3.gif"></p><p>Walk all over me</p>
		</div>
		
		<p>Ok, the tech looked good, so it was time to start thinking about what kind of game this was going to be. At the time, tower defense was a very popular genre, and I loved RTS games. I decided that the simplest route was to make a bunch of enemies walk in one direction while you try to stop them, with lasers. Taking heavy influence from Starship Troopers and Starcraft, I created a suitable enemy that you could have fun slaughtering by the hundreds.</p>

		<div><p><img src="http://nicotuason.com/img/10years/walk_test4.gif"></p><p>Blizzard dont sue pls</p>
		</div>
		
		<p>I kept developing the game like this, working on one thing at a time and making sure it was acceptable before moving on to the next thing. If I don't stop myself, I could probably talk about every little detail that went into making the game, but we still have a long way to go.</p>
		<p><strong>7 months later...</strong></p>
		<p>I had a small but complete game on my hands. I called it "Desert Moon".</p>

		<div><p><img src="http://nicotuason.com/img/10years/desert_moon.gif"></p><p>C'mon you apes, you wanna live forever!?</p>
		</div>

		
		<p>It was time to put the game up for bidding. I uploaded the game to FGL.com and proceeded to not sleep for the next few days. I wish I took more screenshots of this process. I think at the time the bidding period lasted 1 month. After many tens-of-thousands of "reload page" clicks later, there was finally a winning bid. It was <strong>8500 USD</strong>! I don't know how to describe how I felt, but my head must have grown very large. I showed my girlfriend and my parents, the latter finally accepting that I wasn't going to grad school.</p>
		<p>My girlfriend, Terry, also loved Tower Defense games and she was the main play-tester during development. This was a very happy time for us.</p>
		<p>All I had to do was slap the Sponsor's logo onto the game and we could release it to the world.</p>


		<div><p><img src="http://nicotuason.com/img/10years/maxgames_intro.gif"></p><p>Thank you business daddy!</p>
		</div>

		<p>The game launched on the major Flash game portals (Kongregate, Newgrounds, Armorgames, etc.) on December 11, 2010, and thus began my gamedev career.</p>
		


		<h2>2011 - Indie to Employee</h2>
		<p>Flash games are free, so once a game is out there's not much you can do to make more money besides make another game. It takes a while before securing a sponsor and the game finally being released so I immediately started on another game called "Solarmax".</p>

		<div><p><img src="http://nicotuason.com/img/10years/solarmax_test.gif"></p><p>First prototype</p>
		</div>
		
		<p>One of my favorite games of all time is Homeworld. There's just nothing like the epic feeling of the fate of your entire race, your entire <em>history</em>, resting on your shoulders. I couldn't do anything near a 3D RTS like Homeworld, but there was a popular genre of Flash game called "Swarm" defense / strategy. I think Phage Wars was the most popular of these. I thought it would work well translated into epic space battles.</p>

		<div><p><img src="http://nicotuason.com/img/10years/solarmax.gif"></p><p>Scientifically accurate depiction of orbital mechanics</p>
		</div>
		
		<p>I spent some time learning 3D modeling software for this game. I was quite tired of pixel art after doing all the spritesheets for Desert Moon and exporting 3D models as a png sequence seemed like a good way to get all the angles needed for an isometric perspective without having to manually draw every frame.</p>

		<div><p><img src="http://nicotuason.com/img/10years/solarmaxb.gif"></p><p>pew pew!</p>
		</div>
		
		<p>The game was completed in 3 months, much faster than my first project! I was able to get it sponsored for <strong>6000 USD</strong>. A bit less than before, but it was a "non-exclusive" sponsorship meaning I could still sell "sitelocked" versions of the game. This was a common practice back then of having 1 version that would spread to all the portals, and many "sitelocked" versions that had a different site's branding but could only be played on their site.</p>
		<p>I planned to keep building small games like this as my skills grew, but then something unexpected happened. I got a job!</p>
		<p>I got an email from the CEO of a tech company in the U.S. who had seen my games and was looking for a flash programmer for a game they were making. Who knew CEOs were randomly playing flash games and emailing the developer?</p>
		<p>My first response was actually to decline the offer, because number 1 - I'm a dunce, and number 2 - I thought I could just make small flash games forever. Luckily this guy was persistent and I would still get to work on Flash games, but with more team members! And and... they were going to fly me out to the States to attend <strong>GDC</strong>!!!</p>

		<div><p><img src="http://nicotuason.com/img/10years/gdc1.jpg"></p><p>I'm in GDC!</p>
		</div>

		<div><p><img src="http://nicotuason.com/img/10years/gdc2.jpg"></p><p>I'm in San Francisco!</p>
		</div>

		<div><p><img src="http://nicotuason.com/img/10years/gdc4.jpg"></p><p>Another time, baby</p>
		</div>
		
		<p>I'm so grateful to the people who made this happen! As a young game dev, going to GDC is like going to see the Vatican if you're ultra-Catholic. I was over the moon.</p>
		<p>Plus, the salary... it was <strong>3000 USD</strong> a month! A U.S.-based salary for someone living in the Philippines! I have to tell you, I really thought I was hot shit at the time.</p>
		<p>After I got my first paycheck, I proposed to my girlfriend Terry, who I was sure would say yes because the year before her lawyer-auntie cornered me and demanded a deposition on why I had not married her niece yet.</p>
		<p>Things were going great!</p>



		<h2>2012 - Life... finds a way</h2>
		<p>In January, Terry and I got married! I was imagining that the next few years would be just the two of us, traveling together to different countries... making up for all the times we weren't allowed to travel together because the Philippines is a conservative country and it would be scandalous.</p>

		<div><p><img src="http://nicotuason.com/img/10years/wedding.jpg"></p><p>Our wedding Jeepney</p>
		</div>
		
		<p>Instead, 9 months later we had our first child! Which is great too I guess haha... ha.</p>

		<div><p><img src="http://nicotuason.com/img/10years/andres.jpg"></p><p>Yup, that's a baby alright</p>
		</div>
		
		<p>Becoming a dad mostly just means that a full-night's sleep is a thing of the past, at least in the beginning. I was working from home anyway so the arrangement was very doable.</p>
		<p>Meanwhile, work as an employee started out great and we produced lots of small games in a short time frame. Over the months though things started to drag. I felt myself becoming less and less productive. I missed the feeling of always learning something new and putting what I learned into a game. Maybe I'm just a bad employee?</p>
		<p>To prove how bad of an employee I was, here are some prototypes I made <em>mostly</em> during my free time.</p>
		<p>An isometric aerial dogfighting game in a fantasy WW1 setting:</p>
		
		<div><p><img src="http://nicotuason.com/img/10years/dogfight.gif"></p><p>I challenge you to a duel, good sir!</p>
		</div>
		
		<p>A pixel-ly survival game where you explore a …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://nicotuason.com/10years.html">http://nicotuason.com/10years.html</a></em></p>]]>
            </description>
            <link>http://nicotuason.com/10years.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23633738</guid>
            <pubDate>Wed, 24 Jun 2020 20:52:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Developers are artists not factory workers]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 1 (<a href="https://news.ycombinator.com/item?id=23633493">thread link</a>) | @doorknobguy
<br/>
June 24, 2020 | https://usehaystack.io/blog/post/software-development-metrics-measuring-what-matters-2/ | <a href="https://web.archive.org/web/*/https://usehaystack.io/blog/post/software-development-metrics-measuring-what-matters-2/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-w-id="0ea0c8ae-8333-a516-8908-f86a85ef9373"><h2>Most teams don't know what or how to measure. You're not alone.</h2><p>After advising hundreds of CTOs - I noticed a set of questions that consistently came up. They seem simple at face value but in reality they are some of the hardest questions to answer as an engineering leader.</p><p>‍</p><h2>Common Questions:</h2><ol role="list"><li>Are we getting better?</li><li>Where can we improve?</li><li>Are we even good at all?</li></ol><p>‍</p><p>As a manager it can be incredibly frustrating to not have the answers to these questions - &nbsp;even more so when you have to answer to outside stakeholders.</p><p>We often rely on trust and culture - but even in the best cases these questions largely go unanswered. It's incredibly difficult to quantify a team's progress and many go so far as to say "it's impossible" and "wrong to even try".</p><p>The end result? </p><p>‍</p><h3><em>"We're flying blind. And we know it."</em></h3><p>‍</p><p>‍</p><h2>Software Metrics are incredibly hard.</h2><p>The history of software development metrics has shown many (flawed) attempts at measuring developer productivity. Half baked metrics can ruin teams, destroy culture and make developers live miserable. We've seen it time and time again from lines of code to coding days per week - failed after failed attempt.</p><p>‍</p><h3>Common Metrics That Fail - Output Metrics</h3><ol role="list"><li>Commits</li><li>Lines of Code</li><li>Pull Request Count</li><li>Velocity Points</li><li>"Impact"</li></ol><p>‍</p><h3>Output Cannot Be Measured Accurately</h3><p>These metrics fail because they attempt to measure output - but software development isn't a factory assembly line where we can count up the number of widgets produced and quickly determine how much they cost.</p><p>‍</p><h3>Software Development is more like art</h3><p>Throwing more paint on the canvas is often more harmful than helpful. More lines of code or commits is often the opposite of what we want and just as it may take an artist a full day to find out the perfect brush stroke - a single line of code can take an immense amount of effort to get right.</p><p>‍</p><h3><em>"There are many things we can measure but very few things we should."</em></h3><p>‍</p><p>‍</p><h2>So what should we measure?</h2><p>To answer that, we need to think about why we're measuring at all. Most of us simply want to drive improvement and express our efforts in a tangible way. </p><p>‍</p><p>Ultimately what we want is a productive, happy team. But what does developer productivity look like? What do you imagine when you think of a productive team? </p><p>‍</p><p>Are you imagining a lot of lines written? A ton of pull requests created? What about a super high velocity count? Probably not. You're probably imagining a team that's responsive to one another, collaborating effectively, and has a really efficient process - and the metrics you use should reflect that.</p><p>‍</p><p>‍</p><h2>Measure what matters - Process Metrics</h2><p>Use software development metrics that enable productivity. </p><p>‍</p><p>Measuring <strong>responsiveness, collaboration, and process</strong> allows the team to improve how they work together. What's great about process metrics is - as developers - we really care about this stuff. They directly impact our day to day and allow us to improve while having concrete numbers to show our organization.</p><p>‍</p><p>When we measure process we drive productivity - ultimately giving leaders quantitative ways to express improvement while enabling developers to drive meaningful change in their day-to-day experience.</p><p>‍</p><h3><em>"Process metrics enhance culture. Not hurt it."</em></h3><p>‍</p><p>‍</p><h2>What are process metrics?</h2><p><a href="https://usehaystack.io/engineering-management-ebook.html?utm_source=blog&amp;utm_medium=measure%20what%20matters&amp;utm_campaign=inside%20blog">Download our Book of Engineering</a> for a <strong>full list of process metrics</strong> and how you can use them on your team.</p><p>You can also subscribe to our newsletter or reach out to us directly at <a href="mailto:julian@usehaystack.io?subject=I%20just%20read%20your%20blog%20and%20want%20to%20connect!">julian@usehaystack.io</a>. We'd be happy to help you design what metrics are best for your team.</p><p>‍</p><p>‍</p><figure id="w-node-18b2bd14c5bd-0cbffd4a"><p><img src="https://uploads-ssl.webflow.com/5ed57622ee14fb96d022d544/5ef130052901e5cad8432b81_Haystack_Designed_Presentation.png" alt=""></p></figure><p><a href="https://usehaystack.io/?utm_source=blog&amp;utm_medium=measure%20what%20matters&amp;utm_campaign=inside%20blog">Haystack</a> helps engineering leaders identify blockers and trends. Instead of guessing if you're improving, or constantly bothering your team for progress updates, simply use Haystack to get alerts in your inbox every morning. Plus a dashboard to track improvements over time.</p><p><a href="https://usehaystack.io/?utm_source=blog&amp;utm_medium=measure%20what%20matters&amp;utm_campaign=inside%20blog">Try it for free</a></p><p>‍</p></div></div>]]>
            </description>
            <link>https://usehaystack.io/blog/post/software-development-metrics-measuring-what-matters-2/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23633493</guid>
            <pubDate>Wed, 24 Jun 2020 20:31:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Google blew a 10 years lead – Because they only seek to hit competitors]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 1 (<a href="https://news.ycombinator.com/item?id=23633440">thread link</a>) | @snird
<br/>
June 24, 2020 | https://snir.dev/blog/google-10-years-lead | <a href="https://web.archive.org/web/*/https://snir.dev/blog/google-10-years-lead">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><p>An interesting essay caught my eye today at HN about how <a href="https://secondbreakfast.co/google-blew-a-ten-year-lead">google blew a 10 years lead </a> , mostly in services. The essay described how most services that were the peak of innovation 10 years ago have subsequently stood stagnant and lost their technology edge to small companies. </p> <p>Gmail is less innovative than HEY (and superhuman and many others). Google docs is not as good as Notion for knowledge sharing and collaboration. And the list goes on. </p> <p>Initially, I thought it was because Google targets only big business customers, competing with Microsoft 365. Other product innovations do not scare them, they still offer a package with mail, video conferencing, docs, sheets, drive, etc. This is great for big business collaboration tools. Competitors like Notion and HEY are too small for Google business to care. </p> <p>Docs, sheets, drive, mail are all products targeted at corporate collaboration. These are directly competing with Microsoft alone. What about Google Cloud? What about Android? What happened there? </p> <p>Google consistently follows the market preventing its competitors from achieving market control. And in Google's case, "the market" is Amazon, Microsoft, Apple, and Facebook. </p> <img alt="google logo" src="https://snir.dev/blog/google-10-years-lead/google.png"> <p>We'll start with Microsoft since they were the first. And beating them down took place ~10 years ago, that's why it seems like the tech from back then never progressed much. Because the hit had already struck. </p> <p>Microsoft dominated the corporate world with its mail software Outlook, and with its Office suite, Word, Excel, etc. Google is native to the web and they leveraged their position to slowly hit Microsoft in this spot. Gmail first, then Google Drive, and then Chrome to kill IE as a final strike. And it was successful. </p> <p>Amazon got big into the tech business through AWS. Google brought Google Cloud to the fight. The offering is no only cheaper, it also provides technologies that can't be explained any other way than as a way to hit AWS. Kubernetes as an open platform is against any business textbook rukes to lock in customers. But it will allow for an easy way out of AWS in the long run, preferably to GCP, but it can be any other cloud provider that provides Kubernetes service as well. It is strategically more of a hit to the front runner, Amazon, than a benefit to GCP. </p> <p>Google's first priority is to hit the front runner, then everything else. This can also be seen with the Apple case. Android came after the iPhone. It has a much larger market share, and yet, generates far less revenue to Google than the iPhone is to Apple. That's because the main goal is to prevent Apple from winning the market. And in that, it is successful. </p> <p>Google Buzz. Ouch. Google Plus. Double ouch. Google spent so much effort into hitting Facebook as hard as they can. They were not succeful here, but from the history of things it is obvious how Google try to hit Facebook. They did not try to create a new social platform, no. Otherwise they would come up with something that is not.. well, exactly like facebook. </p> <p>Google home initially released at 2016. Amazon Alexa in 2014.</p> <p>I have so many more examples that comes to mind as I write, but the point is already clear. </p> <p>On a final note, I'll say, Google is not only trying to bend down competitors. Google Glass is one new product market they tried to create. The self-driving cars initiative is another example the comes to mind. They do innovate. </p> <p>They just have so much money, blocking out other big tech companies is a strategy they are not willing to give up. And when this is the strategy, well, Google sheets already took a huge chunk from Microsoft, what more does it need? </p> <form action="https://snir.substack.com/api/v1/free?nojs=true" method="post" min-width="400 500 600 700 800"> <div data-style="minimal">  <ul data-element="errors" data-group="alert"></ul>  <p>I wont send you spam. Unsubscribe at any time.</p></div> </form></article></div>]]>
            </description>
            <link>https://snir.dev/blog/google-10-years-lead</link>
            <guid isPermaLink="false">hacker-news-small-sites-23633440</guid>
            <pubDate>Wed, 24 Jun 2020 20:26:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Device Firmware Update Cookbook]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 1 (<a href="https://news.ycombinator.com/item?id=23631985">thread link</a>) | @fra
<br/>
June 24, 2020 | https://interrupt.memfault.com/blog/device-firmware-update-cookbook | <a href="https://web.archive.org/web/*/https://interrupt.memfault.com/blog/device-firmware-update-cookbook">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

        <p>Implementing OTA (Over The Air) firmware updates is a rite of passage for
firmware engineers. Device firmware update is a key component of most hardware
projects. Often, it is also one of the more complicated components.</p>

<p>I have worked on multiple firmware update systems over the year, and every time
I have learned something new. How do I package my images? How do I make sure I
don’t brick the device? How do I share information between my bootloader and my
application? Little by little all firmware engineers accumulate answers to
those questions and develop favored design patterns.</p>

<!-- excerpt start -->
<p>In this post, I share the device firmware update architecture I would implement
knowing everything I know now. I also highlight a few design patterns that are
particularly useful. The example comes with a fully functional example of a
multi-stage bootloader with DFU functionality.
<!-- excerpt end --></p>

<p>I learned some of these lessons in this post the hard way, and I hope I can spare
you and your colleagues a few sleepless nights spent debugging firmware update
problems in the wild!</p>

<p><em>Like Interrupt? <a href="http://eepurl.com/gpRedv">Subscribe</a> to get our latest posts
straight to your mailbox</em></p>

<h2 id="table-of-contents">Table of Contents</h2>

<!-- prettier-ignore -->
<ul id="markdown-toc">
  <li><a href="#table-of-contents" id="markdown-toc-table-of-contents">Table of Contents</a></li>
  <li><a href="#setup" id="markdown-toc-setup">Setup</a>    <ul>
      <li><a href="#renode" id="markdown-toc-renode">Renode</a></li>
      <li><a href="#toolchain" id="markdown-toc-toolchain">Toolchain</a></li>
      <li><a href="#building--running-the-example" id="markdown-toc-building--running-the-example">Building &amp; Running the Example</a></li>
    </ul>
  </li>
  <li><a href="#high-level-architecture" id="markdown-toc-high-level-architecture">High-Level Architecture</a>    <ul>
      <li><a href="#dfu-should-be-separate-from-the-application" id="markdown-toc-dfu-should-be-separate-from-the-application">DFU should be separate from the application</a></li>
      <li><a href="#dfu-code-should-be-updatable" id="markdown-toc-dfu-code-should-be-updatable">DFU code should be updatable</a></li>
      <li><a href="#dfu-should-use-minimal-code-space" id="markdown-toc-dfu-should-use-minimal-code-space">DFU should use minimal code space</a></li>
      <li><a href="#dfu-failures-should-not-brick-the-device" id="markdown-toc-dfu-failures-should-not-brick-the-device">DFU failures should not brick the device</a></li>
    </ul>
  </li>
  <li><a href="#design-patterns--recipes" id="markdown-toc-design-patterns--recipes">Design Patterns &amp; Recipes</a>    <ul>
      <li><a href="#image-metadata" id="markdown-toc-image-metadata">Image Metadata</a></li>
      <li><a href="#loading-images" id="markdown-toc-loading-images">Loading Images</a></li>
      <li><a href="#writing--committing-images" id="markdown-toc-writing--committing-images">Writing &amp; Committing Images</a></li>
      <li><a href="#shared-memory" id="markdown-toc-shared-memory">Shared Memory</a></li>
      <li><a href="#boot-stability" id="markdown-toc-boot-stability">Boot Stability</a></li>
    </ul>
  </li>
  <li><a href="#closing" id="markdown-toc-closing">Closing</a></li>
</ul>

<h2 id="setup">Setup</h2>

<p>All the code in this post was written for the STM32F429 MCU by ST Micro. While
the examples run fine on the STM32F429i discovery board they were developed in
Renode, a popular MCU emulation platform.</p>

<p>You can find the complete code example for this blog post in the <a href="https://github.com/memfault/interrupt/tree/master/example/fwup-architecture">Interrupt
Github repository</a></p>

<h3 id="renode">Renode</h3>

<p>Since writing about Renode for Interrupt, I’ve been looking for an opportunity
to use it for another project. This blog post was the perfect pretext. If you
are not familiar with Renode, I recommend reading <a href="https://interrupt.memfault.com/intro-to-renode">my previous blog post</a> on
the topic.</p>

<p>Because we use true firmware images <code>.bin</code>’s rather than <code>elf</code> files in this post, I had to make two
change to the Renode configuration:</p>

<ol>
  <li>I used <code>sysbus LoadBinary $bin 0x8000000</code> rather than <code>LoadELF</code> to load the
firmware.</li>
  <li>I manually set the Vector Table Offset with <code>sysbus.cpu VectorTableOffset
0x8000000</code>. By default, Renode looks for the vector table at <code>0x0</code> which
different from the default behavior of the STM32.</li>
</ol>

<p>Additionally, I had to modify Renode slightly to enable software-controlled
resets. Cortex-M microcontrollers can be reset by writing to the AICR register,
which was not fully implemented in the emulator. As of this writing, this change
is still in review and not yet merged into the emulator. You can find the pull
request <a href="https://github.com/renode/renode-infrastructure/pull/15/files">on Github</a>.</p>

<p>Thankfully, building our own version of Renode is relatively
straightforward using <a href="https://renode.readthedocs.io/en/latest/advanced/building_from_sources.html">their
instructions</a>.</p>

<p>I updated my <code>start.sh</code> script to run my home-built Renode instance rather than
the installed binary:</p>

<div><div><pre><code><span>#!/bin/sh</span>

<span>RENODE_EXE_PATH</span><span>=</span>~/code/renode/output/bin/Release/Renode.exe

mono64 <span>$RENODE_EXE_PATH</span> renode-config.resc
</code></pre></div></div>

<p>You will have to update this script to point at your own <code>Renode.exe</code>.</p>

<h3 id="toolchain">Toolchain</h3>

<p>I used the following tools to build my firmware:</p>
<ul>
  <li>GNU Make 4.2.1 as the build system</li>
  <li><code>arm-none-eabi-gcc</code> version 9.2.1 20191025 (release) as compiler</li>
</ul>

<p>Rather than the STM32Cube HAL, I used an open source MCU HAL called <code>libopencm3</code>
with excellent support for the STM32. I find it easier to use, and like that it
is open source and on Github. The included <code>Makefile</code> will clone <code>libopencm3</code>
during your first build.</p>

<h3 id="building--running-the-example">Building &amp; Running the Example</h3>

<p>The example can be built with Make. From the <code>examples/fwup-architecture</code>
directory:</p>

<div><div><pre><code><span>$</span> make
<span>  LD            build/fwup-example-boot.elf
  OBJCOPY       build/fwup-example-boot.bin
  LD            build/fwup-example-app.elf
  OBJCOPY       build/fwup-example-app.bin
  XXD           build/app_bin.c
  LD            build/fwup-example-loader.elf
  OBJCOPY       build/fwup-example-loader.bin
  CAT           build/fwup-example.bin
</span></code></pre></div></div>

<p>After which you can call <code>./start.sh</code> to start Renode. You will need to type the
<code>start</code> command in the Renode window to get the emulation going.</p>

<p><img src="https://interrupt.memfault.com/img/fwup-architecture/renode-running.png" alt=""></p>

<h2 id="high-level-architecture">High-Level Architecture</h2>

<p>Over the years, I’ve come up with a set of basic requirements most DFU systems
should fulfill. Let’s walk through these one by one and iteratively design our
system.</p>

<p>We start with the simplest possible description of what we want to achieve with
DFU: an application that updates itself.</p>



<p>
  <svg viewBox="0 0 256 120" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs id="defs_block">
    <filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-0.07875" y="-0.252">
      <feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2"></feGaussianBlur>
    </filter>
  </defs>
  <title>blockdiag</title>
  <desc>
blockdiag {
   // Set labels to nodes.
   A [label = "Application"];
   A -&gt; A [label = "Updates", fontsize=8];
}
</desc>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="46"></rect>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="40"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="66" x="128" y="66">Application</text>
  <path d="M 192 60 L 208 60" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 208 60 L 208 25" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 128 25 L 208 25" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 128 25 L 128 32" fill="none" stroke="rgb(0,0,0)"></path>
  <polygon fill="rgb(0,0,0)" points="128,39 124,32 132,32 128,39" stroke="rgb(0,0,0)"></polygon>
  <rect fill="white" height="12" stroke="rgb(0,0,0)" width="46" x="153" y="4"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="8" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="176" y="14">Updates</text>
</svg>

</p>

<p>This is not a practical design. For one, self-modifying code is easy
to mess up. Let’s see how we might modify this architecture to get to something
we’re happy with.</p>

<h3 id="dfu-should-be-separate-from-the-application">DFU should be separate from the application</h3>

<p>The only time I ever broke DFU on a device, I did it without changing a line of
code related to DFU. Unbeknownst to me, our DFU processes accidentally depended on an
uninitialized variable which up until then had always ended up being <code>0</code>.
Inevitably a new version reshuffled the content of the stack, and all of a
sudden our uninitialized variable held a “1”. This prevented DFU from taking
place.<sup id="fnref:chris-dfu-debug"><a href="#fn:chris-dfu-debug">1</a></sup></p>

<p>The moral to this story: keep your DFU process and your application code
separate. Firmware update code is critical and should not be changed unless
absolutely necessary. Separating application code from firmware update code
allows us to update our application code without risking problems with DFU.</p>

<p>How do we modify our architecture to meet this requirement? We simply split the
firmware into a “Loader” and an “Application”. The loader verifies the
application, runs it, and can update it.</p>



<p>
  <svg viewBox="0 0 556 120" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs id="defs_block">
    <filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-0.07875" y="-0.252">
      <feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2"></feGaussianBlur>
    </filter>
  </defs>
  <title>blockdiag</title>
  <desc>
blockdiag {
    span_width = 100;
    // Set labels to nodes.
    A [label = "App Loader"];
    B [label = "Application"];
    A -&gt; B [label = "Loads, Updates", fontsize=8];
}
</desc>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="103" y="46"></rect>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="331" y="46"></rect>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="100" y="40"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="60" x="164" y="66">App Loader</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="328" y="40"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="66" x="392" y="66">Application</text>
  <path d="M 228 60 L 320 60" fill="none" stroke="rgb(0,0,0)"></path>
  <polygon fill="rgb(0,0,0)" points="327,60 320,56 320,64 327,60" stroke="rgb(0,0,0)"></polygon>
  <rect fill="white" height="12" stroke="rgb(0,0,0)" width="77" x="240" y="39"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="8" font-style="normal" font-weight="normal" text-anchor="middle" textLength="61" x="278" y="49">Loads, Updates</text>
</svg>

</p>

<h3 id="dfu-code-should-be-updatable">DFU code should be updatable</h3>

<p>While we want to update our DFU code as little as possible, updating it should
still be <em>possible</em>. Inevitably we will find a bug in our firmware update code
which we must fix. We may want to change our memory map to allocate more code
space to our app, or to rotate a security key baked into our Loader.</p>

<p>But where should the code that updates our Loader live? It cannot be in the
application, or else we would violate the previous principle. It cannot be in
the Loader itself either. That leaves one option: a third program tasked with
updating the loader. We’ll call it the “Updater”.</p>

<p>The Updater is loaded by the Loader, perhaps when a specific input is received.
All it knows how to do is update the Loader.</p>



<p>
  <svg viewBox="0 0 556 200" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs id="defs_block">
    <filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-0.07875" y="-0.252">
      <feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2"></feGaussianBlur>
    </filter>
  </defs>
  <title>blockdiag</title>
  <desc>
blockdiag {
    span_width = 100;
    // Set labels to nodes.
    A [label = "App Loader"];
    B [label = "Application"];
    A -&gt; B [label = "Loads, Updates", fontsize=8];

    E [label = "Updater"];
    A -&gt; E [label = "Loads, Updates", fontsize=8];
    E -&gt; A [label = "Updates", fontsize=8];
}
</desc>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="103" y="46"></rect>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="331" y="46"></rect>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="331" y="126"></rect>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="100" y="40"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="60" x="164" y="66">App Loader</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="328" y="40"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="66" x="392" y="66">Application</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="328" y="120"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="42" x="392" y="146">Updater</text>
  <path d="M 228 60 L 320 60" fill="none" stroke="rgb(0,0,0)"></path>
  <polygon fill="rgb(0,0,0)" points="327,60 320,56 320,64 327,60" stroke="rgb(0,0,0)"></polygon>
  <path d="M 228 60 L 278 60" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 278 60 L 278 140" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 278 140 L 320 140" fill="none" stroke="rgb(0,0,0)"></path>
  <polygon fill="rgb(0,0,0)" points="327,140 320,136 320,144 327,140" stroke="rgb(0,0,0)"></polygon>
  <path d="M 456 140 L 481 140" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 481 140 L 481 25" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 164 25 L 481 25" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 164 25 L 164 32" fill="none" stroke="rgb(0,0,0)"></path>
  <polygon fill="rgb(0,0,0)" points="164,39 160,32 168,32 164,39" stroke="rgb(0,0,0)"></polygon>
  <rect fill="white" height="12" stroke="rgb(0,0,0)" width="77" x="240" y="39"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="8" font-style="normal" font-weight="normal" text-anchor="middle" textLength="61" x="278" y="49">Loads, Updates</text>
  <rect fill="white" height="12" stroke="rgb(0,0,0)" width="77" x="240" y="119"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="8" font-style="normal" font-weight="normal" text-anchor="middle" textLength="61" x="278" y="129">Loads, Updates</text>
  <rect fill="white" height="12" stroke="rgb(0,0,0)" width="46" x="458" y="104"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="8" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="481" y="114">Updates</text>
</svg>

</p>

<h3 id="dfu-should-use-minimal-code-space">DFU should use minimal code space</h3>

<p>Every firmware project I’ve ever worked on has run out of code space. At Pebble,
we spent months porting our 3.0 firmware to the original watch; most of that
time was spent slimming down the code so it could fit within the 512KB of Flash
available on that device<sup id="fnref:pebble-3"><a href="#fn:pebble-3">2</a></sup>.</p>

<p>With that in mind, we should make sure our Loader and Updater do not take more
code space than absolutely necessary. Are there ways we can update our design to
use less code space? Absolutely!</p>

<p>The key insight here is that the Updater needs to run very rarely and that it
never needs to coexist with the application. We can, therefore, use the same
“slot” in flash for both the Updater and the Application. The main tradeoff here
is that our Loader update flow becomes more complicated as we need to do a DFU
to get the Updater, then another to update the loader, then a third to load the
application back. In other words:</p>

<p>Go to Loader → DFU Updater in the Application’s place → Load Updater →
DFU the new Loader → Reboot into Loader → DFU the Application back in its slot</p>

<p>We can tolerate this complexity because it should not be used often.</p>

<p>
  <svg viewBox="0 0 556 200" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs id="defs_block">
    <filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-0.07875" y="-0.252">
      <feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2"></feGaussianBlur>
    </filter>
  </defs>
  <title>blockdiag</title>
  <desc>
blockdiag {
    span_width = 100;
    // Set labels to nodes.
    A [label = "App Loader"];
    B [label = "Application"];
    A -&gt; B [label = "Loads, Updates", fontsize=8];

    E [label = "Updater"];
    A -&gt; E [label = "Loads, Updates", fontsize=8];
    E -&gt; A [label = "Updates", fontsize=8];

    group {
        label = "Slot 1";
        color = "LightPink";
        A;
    }
    group {
        label = "Slot 2";
        color = "LemonChiffon";
        B; E;
    }
}
</desc>
  <rect fill="rgb(255,182,193)" height="60" style="filter:url(#filter_blur)" width="152" x="88" y="30"></rect>
  <rect fill="rgb(255,250,205)" height="140" style="filter:url(#filter_blur)" width="152" x="316" y="30"></rect>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="103" y="46"></rect>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="331" y="46"></rect>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="331" y="126"></rect>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="100" y="40"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="60" x="164" y="66">App Loader</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="328" y="40"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="66" x="392" y="66">Application</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="328" y="120"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="42" x="392" y="146">Updater</text>
  <path d="M 228 60 L 320 60" fill="none" stroke="rgb(0,0,0)"></path>
  <polygon fill="rgb(0,0,0)" points="327,60 320,56 320,64 327,60" stroke="rgb(0,0,0)"></polygon>
  <path d="M 228 60 L 278 60" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 278 60 L 278 140" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 278 140 L 320 140" fill="none" stroke="rgb(0,0,0)"></path>
  <polygon fill="rgb(0,0,0)" points="327,140 320,136 320,144 327,140" stroke="rgb(0,0,0)"></polygon>
  <path d="M 456 140 L 481 140" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 481 140 L 481 25" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 164 25 L 481 25" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 164 25 L 164 32" fill="none" stroke="rgb(0,0,0)"></path>
  <polygon fill="rgb(0,0,0)" points="164,39 160,32 168,32 164,39" stroke="rgb(0,0,0)"></polygon>
  <rect fill="white" height="12" stroke="rgb(0,0,0)" width="77" x="240" y="39"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="8" font-style="normal" font-weight="normal" text-anchor="middle" textLength="61" x="278" y="49">Loads, Updates</text>
  <rect fill="white" height="12" stroke="rgb(0,0,0)" width="77" x="240" y="119"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="8" font-style="normal" font-weight="normal" text-anchor="middle" textLength="61" x="278" y="129">Loads, Updates</text>
  <rect fill="white" height="12" stroke="rgb(0,0,0)" width="46" x="458" y="104"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="8" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="481" y="114">Updates</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="36" x="164" y="36">Slot 1</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="36" x="392" y="36">Slot 2</text>
</svg>

</p>

<h3 id="dfu-failures-should-not-brick-the-device">DFU failures should not brick the device</h3>

<p>This one should be obvious. Whether there is a bug in our DFU process, or a power loss event while we are
writing firmware, the device should be able to recover. It may operate in a
degraded mode for a bit, but it should at least be able to update itself back to
a good state.</p>

<p>Our design already does a reasonable job of this: if we lose power in the middle
of an Application update, we can reboot into our Loader and start our update
again. There are however two failure modes we must deal with.</p>

<p>First, in the event we lose power while updating the Loader, we could find
ourselves with no valid image at the address the chip boots from (<code>0x0</code> by
default for Cortex-M, but aliased to <code>0x80000000</code> on STM32). The solution is to
add a small, immutable bootloader whose sole job is to sit at the start address
and load our Loader.</p>

<p>Second, what happens if we find ourselves without a functional Loader? We would
want to fall back to the Updater. Here again, the small bootloader is the
solution. In the event no valid Loader is found, it should try to load whatever
is found in the “Application” slot.</p>



<p>
  <svg viewBox="0 0 784 280" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs id="defs_block">
    <filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-0.07875" y="-0.252">
      <feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2"></feGaussianBlur>
    </filter>
  </defs>
  <title>blockdiag</title>
  <desc>
blockdiag {
    span_width = 100;
    // Set labels to nodes.
    C [label = "Bootloader"];
    A [label = "App Loader"];
    B [label = "Application"];
    C -&gt; A [label = "Loads", fontsize=8];
    A -&gt; B [label = "Ld, Updt", fontsize=8];

    E [label = "Updater"];
    A -&gt; E [label = "Ld, Updt", fontsize=8];
    E -&gt; A [label = "Updates", fontsize=8];
    C -&gt; E [label = "Loads", style=dashed, fontsize=8];

    group {
        label = "Slot 0";
        color = "PaleGreen";
        C;
    }
    group {
        label = "Slot 1";
        color = "LightPink";
        A;
    }
    group {
        label = "Slot 2";
        color = "LemonChiffon";
        B; E;
    }
}
</desc>
  <rect fill="rgb(152,251,152)" height="60" style="filter:url(#filter_blur)" width="152" x="88" y="30"></rect>
  <rect fill="rgb(255,182,193)" height="60" style="filter:url(#filter_blur)" width="152" x="544" y="30"></rect>
  <rect fill="rgb(255,250,205)" height="140" style="filter:url(#filter_blur)" width="152" x="316" y="110"></rect>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="103" y="46"></rect>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="559" y="46"></rect>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="331" y="126"></rect>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="331" y="206"></rect>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="100" y="40"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="60" x="164" y="66">Bootloader</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="556" y="40"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="60" x="620" y="66">App Loader</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="328" y="120"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="66" x="392" y="146">Application</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="328" y="200"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="42" x="392" y="226">Updater</text>
  <path d="M 228 60 L 548 60" fill="none" stroke="rgb(0,0,0)"></path>
  <polygon fill="rgb(0,0,0)" points="555,60 548,56 548,64 555,60" stroke="rgb(0,0,0)"></polygon>
  <path d="M 228 60 L 278 60" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4"></path>
  <path d="M 278 60 L 278 220" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4"></path>
  <path d="M 278 220 L 320 220" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4"></path>
  <polygon fill="rgb(0,0,0)" points="327,220 320,216 320,224 327,220" stroke="rgb(0,0,0)"></polygon>
  <path d="M 620 80 L 620 100" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 392 100 L 527 100" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 527.0 100.0 A4,4 0 0 1 535.0 100.0" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 535 100 L 620 100" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 392 100 L 392 112" fill="none" stroke="rgb(0,0,0)"></path>
  <polygon fill="rgb(0,0,0)" points="392,119 388,112 396,112 392,119" stroke="rgb(0,0,0)"></polygon>
  <path d="M 620 80 L 620 180" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 392 180 L 527 180" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 527.0 180.0 A4,4 0 0 1 535.0 180.0" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 535 180 L 620 180" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 392 180 L 392 192" fill="none" stroke="rgb(0,0,0)"></path>
  <polygon fill="rgb(0,0,0)" points="392,199 388,192 396,192 392,199" stroke="rgb(0,0,0)"></polygon>
  <path d="M 456 220 L 531 220" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 531 220 L 531 60" fill="none" stroke="rgb(0,0,0)"></path>
  <path d="M 531 60 L 548 60" fill="none" stroke="rgb(0,0,0)"></path>
  <polygon fill="rgb(0,0,0)" points="555,60 548,56 548,64 555,60" stroke="rgb(0,0,0)"></polygon>
  <rect fill="white" height="12" stroke="rgb(0,0,0)" width="37" x="374" y="39"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="8" font-style="normal" font-weight="normal" text-anchor="middle" textLength="21" x="392" y="49">Loads</text>
  <rect fill="white" height="12" stroke="rgb(0,0,0)" width="37" x="260" y="199"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="8" font-style="normal" font-weight="normal" text-anchor="middle" textLength="21" x="278" y="209">Loads</text>
  <rect fill="white" height="12" stroke="rgb(0,0,0)" width="50" x="424" y="84"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="8" font-style="normal" font-weight="normal" text-anchor="middle" textLength="34" x="449" y="94">Ld, Updt</text>
  <rect fill="white" height="12" stroke="rgb(0,0,0)" width="50" x="424" y="164"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="8" font-style="normal" font-weight="normal" text-anchor="middle" textLength="34" x="449" y="174">Ld, Updt</text>
  <rect fill="white" height="12" stroke="rgb(0,0,0)" width="46" x="483" y="184"></rect>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="8" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="506" y="194">Updates</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="36" x="164" y="36">Slot 0</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="36" x="620" y="36">Slot 1</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="36" x="392" y="116">Slot 2</text>
</svg>

</p>

<p>In summary, we end up with four programs:</p>

<ol>
  <li>An immutable Bootloader whose sole job is to load the Loader, and fallback to
another image if the Loader is invalid.</li>
  <li>A Loader that can verify our Application image, load it, and update it.</li>
  <li>An Application which does not do any updates itself</li>
  <li>An Updater that temporarily replaces the Application and can update the
Loader.</li>
</ol>

<p>This is not the only valid firmware update architecture, but it avoids many of
the pitfalls of DFU without consuming too much code space.</p>

<h2 id="design-patterns--recipes">Design Patterns &amp; Recipes</h2>

<p>I have put together a full implementation of the Bootloader, the Loader, and the
Application in the <a href="https://github.com/memfault/interrupt/tree/master/example/fwup-architecture">Interrupt
Github
repository</a>.
While discussing every line in detail is outside of the scope of this
conversation, I want to highlight a few patterns I have learned over the years.
These include ways to package firmware images, write them to flash, share data
between programs, and more!</p>

<p>This post builds upon many ideas previously written about on Interrupt. If you
haven’t read them already, I recommend the following:</p>
<ul>
  <li><a href="https://interrupt.memfault.com/how-to-write-a-bootloader-from-scratch">How to Write a Bootloader from Scratch</a></li>
  <li><a href="https://interrupt.memfault.com/how-to-write-linker-scripts-for-firmware">How to Write Linker Scripts for Firmware</a></li>
  <li><a href="https://interrupt.memfault.com/gnu-build-id-for-firmware">GNU Build IDs for Firmware</a></li>
  <li><a href="https://interrupt.memfault.com/firmware-shell">Building a Tiny CLI Shell for Tiny Firmware</a></li>
</ul>

<h3 id="image-metadata">Image Metadata</h3>

<p>Firmware images typically …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://interrupt.memfault.com/blog/device-firmware-update-cookbook">https://interrupt.memfault.com/blog/device-firmware-update-cookbook</a></em></p>]]>
            </description>
            <link>https://interrupt.memfault.com/blog/device-firmware-update-cookbook</link>
            <guid isPermaLink="false">hacker-news-small-sites-23631985</guid>
            <pubDate>Wed, 24 Jun 2020 18:33:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Harm of Studying Abroad]]>
            </title>
            <description>
<![CDATA[
Score 85 | Comments 109 (<a href="https://news.ycombinator.com/item?id=23631503">thread link</a>) | @jeffreyrogers
<br/>
June 24, 2020 | https://www.readingthechinadream.com/zhang-yongle-the-harm-of-studying-abroad.html | <a href="https://web.archive.org/web/*/https://www.readingthechinadream.com/zhang-yongle-the-harm-of-studying-abroad.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.readingthechinadream.com/zhang-yongle-the-harm-of-studying-abroad.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23631503</guid>
            <pubDate>Wed, 24 Jun 2020 17:59:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Linux is Most Used OS in Microsoft Azure]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 1 (<a href="https://news.ycombinator.com/item?id=23631370">thread link</a>) | @crpietschmann
<br/>
June 24, 2020 | https://build5nines.com/linux-is-most-used-os-in-microsoft-azure-over-50-percent-fo-vm | <a href="https://web.archive.org/web/*/https://build5nines.com/linux-is-most-used-os-in-microsoft-azure-over-50-percent-fo-vm">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main-content">
		<div>
		<div id="content-area">
			<div id="left-area">
											<article id="post-28288">
											 <!-- .et_post_meta_wrapper -->
				
					<div>
					
<p>For the last few years, Microsoft has stated during event keynotes and in other places that Linux is a rapidly growing operating system (OS) being used within Microsoft Azure. They had proudly stated that 50% of new VMs running in Azure were running Linux. (This is the latest stat I remember Microsoft saying publicly a while back already.) Well, I came across an interesting<a href="https://www.linkedin.com/posts/adirron_linuxonazure-progress-activity-6665502370795003905-DY1G" target="_blank" rel="noopener"> infographic recently (thanks to Adir Ron) </a>that gives some statistics and other information regarding the percentage and overall usage of the Linux OS in Microsoft Azure.</p>



<p>Based on the past growth of Linux adoption in Microsoft Azure, I’ve long suspected that Microsoft Azure hosts more Linux VMs than Windows VMs. This infographic looks to shed some light on this most likely being true, as it states “More than 50% of VM cores runs Linux on Azure”.</p>



<p>Before you look at the infographic itself, here are a few stats listed in it that I’d like to point out:</p>



<ul><li>More than 50% of VM cores runs Linux on Azure</li><li>Linux-based images comprise 60% of Azure Marketplace images</li><li>Top 100 Microsoft customers deploy Linux workloads on Azure</li><li>Azure Tuned Kernels provide 25% faster network throughput</li><li>Microsoft supports all major Linux distros, like: Red Hat, SUSE, Ubuntu, Oracle Linux, Debian, CentOS, CoreOS, and OpenSUSE <em>(Related: Azure also supports FreeBSD)</em></li><li>Azure offers two natively supported managed Kubernetes orchestration services: Azure Kubernetes Service, and Azure Red Hat OpenShift</li></ul>



<p>Here’s the “Did you know? Linux is the fastest growing platform on Azure” <a href="https://build5nines.com/tag/infographic/">infographic</a> below:</p>



<figure><a href="https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?ssl=1" target="_blank" rel="noopener noreferrer"><img data-attachment-id="28289" data-permalink="https://build5nines.com/linux-is-most-used-os-in-microsoft-azure-over-50-percent-fo-vm-cores/linux-fastest-growing-platform-on-microsoft-azure-2020-05-11/" data-orig-file="https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?fit=1200%2C4464&amp;ssl=1" data-orig-size="1200,4464" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11" data-image-description="" data-medium-file="https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?fit=81%2C300&amp;ssl=1" data-large-file="https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?fit=275%2C1024&amp;ssl=1" src="https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?fit=275%2C1024&amp;ssl=1" alt="Linux is Most Used OS in Microsoft Azure - over 50 percent of VM cores 1" width="275" height="1024" srcset="https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?w=1200&amp;ssl=1 1200w, https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?resize=275%2C1024&amp;ssl=1 275w, https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?resize=768%2C2857&amp;ssl=1 768w, https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?resize=413%2C1536&amp;ssl=1 413w, https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?resize=1080%2C4018&amp;ssl=1 1080w, https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?resize=980%2C3646&amp;ssl=1 980w, https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?resize=480%2C1786&amp;ssl=1 480w" sizes="(max-width: 275px) 100vw, 275px" title="Linux is Most Used OS in Microsoft Azure - over 50 percent of VM cores 1" data-lazy-srcset="https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?w=1200&amp;ssl=1 1200w, https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?resize=275%2C1024&amp;ssl=1 275w, https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?resize=768%2C2857&amp;ssl=1 768w, https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?resize=413%2C1536&amp;ssl=1 413w, https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?resize=1080%2C4018&amp;ssl=1 1080w, https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?resize=980%2C3646&amp;ssl=1 980w, https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?resize=480%2C1786&amp;ssl=1 480w" data-lazy-src="https://i1.wp.com/build5nines.com/wp-content/uploads/2020/05/Linux-fastest-growing-platform-on-microsoft-azure-2020-05-11.jpg?fit=275%2C1024&amp;ssl=1&amp;is-pending-load=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></a></figure>



<p>Happy running Linux in Azure!</p>



<blockquote><p>P.S. If you’re looking to save money hosting VMs in Microsoft Azure (both Windows and Linux), you should read my article showing you how to <a href="https://build5nines.com/properly-shutdown-azure-vm-to-save-money/">properly shutdown Azure VMs to save money</a>!</p></blockquote>

<br><h3>Article Author</h3>
					<div id="author-info">
						<p><img alt="" src="https://secure.gravatar.com/avatar/d565ce4d3fdf8007e1d707362cca9465?s=128&amp;d=identicon&amp;r=g" srcset="https://secure.gravatar.com/avatar/d565ce4d3fdf8007e1d707362cca9465?s=256&amp;d=identicon&amp;r=g 2x" height="128" width="128" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">																						<img id="author-img-mvp" src="https://build5nines.com/wp-content/uploads/2019/08/mvp_logo_horizontal_preferred_cyan300_rgb_300ppi_163x65.png" alt="Microsoft MVP">
													</p>
						
						<p id="author-desc">Chris is a <strong>Microsoft MVP</strong> and has 20 years of experience designing and building Cloud &amp; Enterprise systems. He is also a <strong>Microsoft Certified: Azure Solutions Architect</strong>, developer, <strong>Microsoft Certified Trainer</strong> (MCT), and Cloud Advocate. He has a passion for technology and sharing what he learns with others to help enable them to learn faster and be more productive.</p>
						
					</div>
					
						
										</div> <!-- .entry-content -->
					 <!-- .et_post_meta_wrapper -->
				</article> <!-- .et_pb_post -->

						</div> <!-- #left-area -->

				 <!-- end #sidebar -->
		</div> <!-- #content-area -->
	</div> <!-- .container -->
	</div></div>]]>
            </description>
            <link>https://build5nines.com/linux-is-most-used-os-in-microsoft-azure-over-50-percent-fo-vm</link>
            <guid isPermaLink="false">hacker-news-small-sites-23631370</guid>
            <pubDate>Wed, 24 Jun 2020 17:51:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What vertical farming and ag startups don't understand about agriculture]]>
            </title>
            <description>
<![CDATA[
Score 341 | Comments 311 (<a href="https://news.ycombinator.com/item?id=23630201">thread link</a>) | @kickout
<br/>
June 24, 2020 | http://thinkingagriculture.io/what-silicon-valley-doesnt-understand-about-agriculture/ | <a href="https://web.archive.org/web/*/http://thinkingagriculture.io/what-silicon-valley-doesnt-understand-about-agriculture/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-5">
		
	
	<div>
		
<p>I was browsing HackerNews recently and a (rare) agriculture news story popped up, <a href="https://news.ycombinator.com/item?id=23208954">this one to be specific</a>, <a href="https://news.ycombinator.com/item?id=20899721">but there are others</a>. As these are of interest to me I clicked and read through the comments. These linked articles aren’t all that note-worthy, but they are indicative of a trend. As a casual follower of the Ag startup scene and witnessing the vertical farming fascination for the past ~10 years grow, I’ve been genuinely confused as to some of the approaches founders are taking with their startups. For the longest time, I believed the hype that vertical farming was <em>needed</em> and more importantly, coming to a city near you™. This implies and inherent inefficiency in both current food production and its distribution chains.</p>



<p>I can only conclude Silicon Valley thinks agriculture lacks innovation or is in need of ‘disruption’ and efficiency boosting and the truth couldn’t be more opposite. The truth is, modern agriculture as most people understand it <em>already have</em> the things SV-types desire and crave: massive scale, incredible automation, hyper-efficiency. Because we live in an urban based society (roughly 20% of people in America are classified into ‘rural’ aread <a href="https://www.census.gov/newsroom/press-releases/2016/cb16-210.html">according to the census</a>), most people don’t realize just how big agriculture is. The Midwest in the United States has close to 90M acres of corn, <a href="https://observablehq.com/@kickout/untitled">85M acres of soybean</a>, and 30M acres of wheat. Brazil has as much, and usually more, soybean acreage grown every year in their breadbasket (centered in Mato Grosso, Sorriso, Brazil). Truly incomprehensible scale. All of this is accomplished outdoors using soil that already exists, using the most cheapest energy source available–the sun–to convert carbon to a human usable form. To be clear, soil is a natural resource that will become endangered if we do not mitigate the severe erosion problems that stem from single species field that are barren (re: nothing actively growing) for 30-40% of the calendar year (in North America).</p>



<p>Modern agriculture is scaled and the modern row crop farmer is equally scaled–mostly enabled by robust automation (auto-steer tractors, precision planting machines, etc.). The average farm size is increasing and has been for quite sometime. As farm size increases, the number of people <em>directly</em> involved in agriculture for their livelihood continues to be <a href="https://www.nass.usda.gov/Publications/Todays_Reports/reports/fnlo0419.pdf">exceedingly small</a> (there are only about ~ million farms in the United States). Sophisticated and (and generally physically massive) machines–with varying degrees of automation–have continuously driven the efficiency of a single farmer higher and higher requiring less hand labor and obtaining efficiencies of scale for cost. Farmers are the original innovators and scaled agricultural production has largely enabled the population growth seen in the last ~150 years (humans domesticated crops ~10,000 BC, well before written communication). Farmers have always been smart and savvy when evaluating decisions that affect their livelihood. They can detect when a company is trying to sell them something that actually holds no value. Why? Because if a farmer is continuously spending money on things that do not return value, they can (and do) go <a href="https://www.fb.org/market-intel/farm-bankruptcies-rise-again">out of business</a> quickly. There are no VC-funded farmers, so positive cash flow isn’t merely a good thing, its the only thing. So if a company is trying to sell a product for ~$15 an acre, a wise farmer will ensure they are getting &gt;$15 on profit from said product. This is a primary reason companies like The Climate Corporation has struggled to monetize ‘farm data’. <a href="https://www.theverge.com/2013/10/10/4823004/monsanto-bets-the-farm-on-big-data">Big bets largely haven’t panned out as expected</a>. SV companies often claim data is worth <em>$x</em>, but that value generally only exists in the abstract and has poor basis on the farm and the lack of adoption suggest the product isn’t working as intended or its severely mispriced from its value. Compounding that and in addition to, University extension programs, <a href="https://en.wikipedia.org/wiki/Land-grant_university">mostly from Land Grant Universities</a>, have traditionally filled the role of keeping farmers up-to-date on the latest methods and profitability studies (e.g. <a href="https://coolbean.info/">Cool Bean</a>) using grant money (often funded via taxes or through ‘<a href="https://ncga.com/stay-informed/media/in-the-news/article/2020/03/corn-checkoff-assisting-teachers-with-online-curriculum-">check-off</a>‘ programs). These types of programs represent an already existing framework of farmers ‘paying’ for this type of knowledge. This model has proven scalable, even more so with the internet and social media making information readily available. Note this doesn’t prevent <em>bad</em> information from being shared, but since savvy farmers will try and eventually ignore unprofitable methods, one can assume this is an efficient system.</p>



<p>So why am I not worried about vertical farming or startups that are trying to reinvent the wheel? They are busy fighting battles that simply don’t exist for their competition (outdoor/field-based agriculture). Current agriculture doesn’t need an artificial energy source and the automation that exists <em>today</em> is breathtaking. It is completely reasonable for a single human, with assistance from machines, to comfortably farm 1,000 acres or more of traditional rows crops. It generally doesn’t matter if a vertical farm can ‘produce’ 365 days a year, the existing agriculture infrastructure in the breadbaskets of the world (United States, Brazil/Argentina/Eastern Europe) make any indoor advantage disappear, and quickly. These centers are ‘connected’ as well, with existing GPS and cellular networks available today. </p>



<p>The free advice I would give anyone looking to enter the ag startup scene: take advantage of the existing pros (scale, automation, mechanization). Startups that try to hitch along to already existing scale rather than trying to re-invent it present a much better opportunity for success.</p>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->

				
</article></div>]]>
            </description>
            <link>http://thinkingagriculture.io/what-silicon-valley-doesnt-understand-about-agriculture/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23630201</guid>
            <pubDate>Wed, 24 Jun 2020 16:36:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[New technology for aluminum production promises zero CO2 emission]]>
            </title>
            <description>
<![CDATA[
Score 145 | Comments 67 (<a href="https://news.ycombinator.com/item?id=23629859">thread link</a>) | @dagurp
<br/>
June 24, 2020 | https://icelandmonitor.mbl.is/news/news/2020/06/24/iceland_s_co2_emissions_could_be_reduced_by_a_third/ | <a href="https://web.archive.org/web/*/https://icelandmonitor.mbl.is/news/news/2020/06/24/iceland_s_co2_emissions_could_be_reduced_by_a_third/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        
  
    

        
          <p>
 A new Icelandic technology intended for aluminum production offers hopes of eliminating CO2 emissions from the production,
 <em>
  <a href="https://www.mbl.is/frettir/innlent/2020/06/22/gaeti_minnkad_losun_co2_um_thridjung/" target="_blank">
   mbl.is
  </a>
 </em>
 reports.
</p>

        
          <p>
 The company Arctus Metals, in cooperation with Innovation Center Iceland, reached a milestone recently, when it successfully produced aluminum with this new method in a large pot. Instead of creating CO2 emissions, the process emits oxygen.
</p>

        
          <p>
 The main part of the innovation consists of using multiple,&nbsp;vertical inert metal-alloy anodes and ceramic cathodes, instead of using electrodes made of carbon.
</p>

        
          <p>
 This innovation could potentially eliminate CO2 emissions from aluminum smelters in Iceland and elsewhere.
</p>

        
          
  
  

  



        
          <p>
 “Iceland’s three aluminum smelters produce more than 800,000 tons of aluminum a year and emit more than 1.6 million tons of CO2 a year,” states Arctus Metals CEO Jón Hjaltalín Magnússon. “Their emissions make up 30 percent of Iceland’s total CO2 emissions.”
</p>

        
          <p>
 “If all our aluminum smelters adopted this new technology, Iceland’s CO2 emissions would be reduced by 30 percent,
 <span>
  ”
 </span>
 he adds,
 <span>
  “
 </span>
 enabling us to fulfill our international obligations and more. Using the new Arctus Metals method, an aluminum smelter, the size of [Rio Tinto’s] in Straumsvík [Southwest Iceland] would produce as much oxygen as a forest covering 500 square kilometers.”
</p>

        
          <p>
 Jón reports that a cooperation agreement has been signed between the German company Trimet Aluminum, one of the world’s largest producers of aluminum, which will continue the development process by starting production in larger pots, and planning to eventually convert production in their four smelters to this method.
</p>

        
          <p>
 The project was presented to Icelandic President Guðni Th. Jóhannesson yesterday at the offices of Innovation Center Iceland.
</p>

        
          <p>
 In the video above, you can see the first chunk of aluminum processed in this new way, presented by CEO Jón Hjaltalín Magnússon.
</p>

        
          <p>
 You can read more about the company and the project
 <a href="http://www.sustainordic.com/portfolio/items/arctus-metals/" target="_blank">
  here
 </a>
 .
</p>

    

  

  

      </div></div>]]>
            </description>
            <link>https://icelandmonitor.mbl.is/news/news/2020/06/24/iceland_s_co2_emissions_could_be_reduced_by_a_third/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23629859</guid>
            <pubDate>Wed, 24 Jun 2020 16:19:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Relay by Puppet: IFTTT for DevOps]]>
            </title>
            <description>
<![CDATA[
Score 22 | Comments 0 (<a href="https://news.ycombinator.com/item?id=23629644">thread link</a>) | @bradhe
<br/>
June 24, 2020 | https://relay.sh/blog/relay-public-beta/ | <a href="https://web.archive.org/web/*/https://relay.sh/blog/relay-public-beta/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><p>Today we announce <a href="https://relay.sh/">Relay</a>, an event-driven automation platform. <a href="https://app.relay.sh/signup">Sign up now</a> and try it out! Relay connects infrastructure and operations platforms, APIs, and tools together into a cohesive, easy-to-automate whole. Relay is simple enough for you to start automating common, <em>if-this-then-that</em> (IFTTT) style DevOps tasks in minutes and powerful enough to model multi-step, branching, parallelized DevOps processes when the need arises.</p>
<p>Why bother? Because for all the progress we’ve made as builders and operators, <a href="https://landscape.cncf.io/">things are more complicated than ever</a>. Modern applications comprise a growing variety of runtimes, clouds, infrastructure platforms, 3rd party services, and APIs. Mounting sophistication (<a href="https://www.youtube.com/watch?v=dtI5dMpBmQo">and complexity</a>) of how applications are constructed complicates how we operate and manage them. As a result, accomplishing many basic operational tasks can involve touching many different components, with different APIs, different semantics, from different upstreams, vendors and dev teams. Connecting all of these components together is tough, and automating anything across them all can range from tedious to nightmare fuel.</p>
<p>At layers above the plumbing, <a href="https://relay.sh/blog/rise-of-the-apis/">managing infrastructure stops looking like classic configuration management and starts looking like orchestrating workflows</a>. However, workflows can be tricky. Connectivity, secrets handling, event listening, ordering, parallelism, error handling, and control flow all conspire to make writing workflows from scratch pretty gnarly. The complexity adds up fast. We can do better!</p>
<blockquote>
<p>“Automated workflows are the bedrock of all software organizations.”<br>
— Jason Warner, CTO @ GitHub</p>
</blockquote>
<p>Relay lets you represent any DevOps workflow as code, composed of triggers that listen for incoming events, and steps that define the task you’re automating. Relay does not limit what you can talk to. A single workflow could listen for alerts from PagerDuty, query metrics from DataDog, reconfigure infrastructure with Terraform, and send a notification via Slack. It’s easy to leverage pre-existing triggers, steps, and workflows, and it’s simple to make your own if the need arises.</p>
<p>As a hosted service, Relay supervises things on your behalf. It will automatically trigger your workflow based on incoming events, execute your workflow’s steps in parallel, notify you if you need to intervene, and keep meticulous records of everything done. Relay does this all automatically, so you don’t have to.</p>
<p>Today, we’re proud to announce <a href="https://relay.sh/">beta availability</a> for Relay. Read on to see how it works!</p>
<h2>Workflows</h2>
<p>Relay’s core method of automation is <a href="https://relay.sh/docs/using-workflows/"><em>the workflow</em></a>. Workflows combine useful activities together to accomplish a particular task:</p>
<ul>
<li>When we detect an unused Azure Disk, delete it <em>(so we can save money)</em></li>
<li>When they go unused, nuke any AWS authentication keypairs <em>(so we can reduce our attack surface)</em></li>
<li>When a PagerDuty alert fires with a certain severity, create tickets in Jira and a room in Slack <em>(so we can more quickly troubleshoot issues)</em></li>
</ul>
<p>Relay lets you succinctly express these types of workflows, and beyond, <a href="https://relay.sh/docs/reference/relay-workflows/">as code</a>. And like code, workflows can be versioned, reviewed, refactored, and reused. We’re Puppet; <a href="https://www.google.com/search?hl=en&amp;q=puppet%20infrastructure%20as%20code">we wouldn’t have it any other way</a>.</p>
<p>Running your first workflow is easy, and should only take you about a minute. As tradition demands, here’s “Hello, world” (<a href="https://app.relay.sh/login">log in</a> and follow along!):</p>
<p><img src="https://relay.sh/debec11953b60317076234251dc8c4f0/hello-world.gif" alt="Hello, world!"></p>
<p>Because workflows are code, you can treat them like code. Modifying a workflow is straightforward. Let’s change the workflow, adding a step to emit the current date:</p>
<p><img src="https://relay.sh/2105fe13ad95afadea7d0e9dc45e3976/cli.gif" alt="Change the workflow using the CLI"></p>
<p>That covered <a href="https://relay.sh/docs/getting-started/#install-the-cli">getting the CLI installed</a>, authenticating against the service, downloading your workflow, modifying the logic, and then letting Relay know the code is updated.</p>
<h2>Triggers and steps</h2>
<p>Workflows contain <em>triggers</em> and <em>steps</em>: Triggers determine when Relay should execute your workflow: manually, on a schedule, or when pinged by an external source. Steps represent the set of actions and activities necessary to make your workflow accomplish its goals. Steps are just <a href="https://www.docker.com/resources/what-container">containers</a>, so you’re pretty unconstrained when it comes to what a step can do. Both triggers and steps <a href="https://relay.sh/docs/integrating-with-relay/">are easy to create, remix, and share</a>. With these building blocks, Relay is capable of modeling a huge variety of workflows, and executing them on your behalf. There are a bunch already written, and it’s straightforward to <a href="https://relay.sh/docs/getting-started/">make your own</a>.</p>
<p>Here’s a more interesting example workflow that <a href="https://relay.sh/workflows/ec2-reaper/">cleans up some unneeded EC2 instances</a>. It has more steps, including some that consume AWS credentials, and one which represents a <em>manual approval</em> gate:</p>
<p><img src="https://relay.sh/18f91058f6a39345a357bc6d72855ed8/ec2-reaper.gif" alt="Cleaning up some EC2 instances"></p>
<p>It’s easy to add, remove, or replace triggers and steps to suit your liking. Some modifications for the preceding example could include adding a webhook-based trigger for the workflow, adding a notification step at the end, or better integrating it into your GitOps setup. Perhaps a step that takes the list of terminated instances, computes their money you just saved, then buys an equivalent amount of stuff from your Amazon wish list? Ops is hard work - treat yourself!</p>
<p>Our examples thus far have shown short, linear sequences of steps but you can also express some pretty elaborate processes just as easily. Here’s a picture of the execution graph of one of workflows we use to manage Relay itself:</p>
<p><span>
      <a href="https://relay.sh/static/ed787c9f007e7856c5846c98c4c7f6fa/065ce/relay-graph.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="A more complex workflow graph" title="A more complex workflow graph" src="https://relay.sh/static/ed787c9f007e7856c5846c98c4c7f6fa/64756/relay-graph.png" srcset="https://relay.sh/static/ed787c9f007e7856c5846c98c4c7f6fa/a8a0d/relay-graph.png 300w,
https://relay.sh/static/ed787c9f007e7856c5846c98c4c7f6fa/dface/relay-graph.png 600w,
https://relay.sh/static/ed787c9f007e7856c5846c98c4c7f6fa/64756/relay-graph.png 1200w,
https://relay.sh/static/ed787c9f007e7856c5846c98c4c7f6fa/28bdc/relay-graph.png 1800w,
https://relay.sh/static/ed787c9f007e7856c5846c98c4c7f6fa/98e2c/relay-graph.png 2400w,
https://relay.sh/static/ed787c9f007e7856c5846c98c4c7f6fa/065ce/relay-graph.png 2680w" sizes="(max-width: 1200px) 100vw, 1200px" loading="lazy">
  </a>
    </span></p>
<h2>The Relay service</h2>
<p>Listening for events and running workflows might appear conceptually simple, but there are a lot of practical details that need to be worked out. Relay’s execution environment (and <a href="https://github.com/puppetlabs/relay-core">underlying engine</a>):</p>
<ul>
<li>Manages <a href="https://relay.sh/docs/using-workflows/adding-connections/">connections</a> to upstream/downstream APIs and services, making them securely available to the workflows that need them</li>
<li>Automatically creates <a href="https://relay.sh/docs/reference/relay-workflows/#push"><em>push triggers</em></a> for your workflows, complete with workflow-specific security tokens, so you can easily kick it off from all kinds of other tools</li>
<li>Automatically constructs an environment for running webhooks, so your workflows can respond to events from webhook-only services</li>
<li>Sandboxes workflow and step execution, for fault isolation</li>
<li>Manages your workflows with all the necessary <em>ops accoutrements</em> (e.g. monitoring, logging, error handling)</li>
<li>Supervises the execution of your workflows, invoking steps in the right order (with automatic parallelization)</li>
<li>Standardizes the interfaces between all these pieces so steps, triggers, and connections are reusable and remixable across workflows</li>
</ul>
<p>Relay takes care of this stuff so you don’t have to. Instead, you can focus on the logic of your workflow, the core of what you’re trying to automate.</p>
<p>After all, isn’t that the point?</p>
<h2>Automation for everyone</h2>
<p>How many unique applications are running out there across the planet (<a href="https://twitter.com/lkanies/status/1182350689529298944">or above it</a>)? Thousands? Millions? <a href="https://www.merriam-webster.com/dictionary/bajillion">Bajillions</a>? How many of them are running on identical infrastructure stacks, built with identical technology stacks, managed in identical ways at an identical scale? There’s a truly staggering variety of approaches and constraints.</p>
<p>If there’s no <em>One True Stack</em>, then there’s no <em>One True Way To Manage It</em>. The tools you employ should thrive in this sort of world because that’s the world we’ve got.</p>
<p>Relay’s core value lies in letting you tie a <a href="https://relay.sh/integrations/">wide variety of services, APIs, and platforms</a> together. It’s constructed in a deliberately pluggable way. Users can readily extend the system to talk to new technologies, respond to new kinds of events, and take action in new ways…no CS degree required. Those extensions should be easy to share, so the entire user community can benefit. The ecosystems around the tools we use are every bit as important as the tools themselves.</p>
<p>Even though it’s early days, Relay can already do quite a lot. The future holds many possibilities: new workflows, more integrations with more tools and platforms, higher-level workflow syntax, a more streamlined authoring experience, simplified input/output from steps, and more. Early users have already given us a ton of great suggestions, and we’d love to hear yours!</p>
<h2>Next steps</h2>
<p>The next step (and best step) is to <a href="https://relay.sh/">try it out</a>! And if you’d like to learn more about Relay, you can check out:</p>
<ul>
<li><a href="https://relay.sh/blog/relay-and-open-source/">How to get involved</a>, extend Relay to better meet your needs, and become part of Relay community</li>
<li><a href="https://relay.sh/docs/">The documentation</a> does a great job of introducing Relay, its usage, core concepts, and extension points</li>
<li><a href="https://relay.sh/workflows/">Peruse some workflows</a> to see what they can do. The code and its graphical execution plan are available on every workflow’s page.</li>
<li><a href="https://puppetcommunity.slack.com/archives/CMKBMAW2K">Slack</a> - come linger in the #relay channel! The more the merrier</li>
</ul>
<p>Thanks, and let a thousand workflows bloom!</p></section></div>]]>
            </description>
            <link>https://relay.sh/blog/relay-public-beta/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23629644</guid>
            <pubDate>Wed, 24 Jun 2020 16:07:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Advanced Active Record: Using Subqueries in Rails]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=23629450">thread link</a>) | @moritzplassnig
<br/>
June 24, 2020 | https://pganalyze.com/blog/active-record-subqueries-rails | <a href="https://web.archive.org/web/*/https://pganalyze.com/blog/active-record-subqueries-rails">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p>Active Record provides a great balance between the ability to perform simple queries simply, and also the ability to access the raw SQL sometimes required to get our jobs done. In this article, we will see a number of real-life examples of business needs that may arise at our jobs.</p>
<p>They will come in the form of a request for data from someone else at the company, where we will first translate the request into SQL, and then into the Rails code necessary to find those records. We will be covering five different types of subqueries to help us find the requested data.</p>
<p>Let's take a look at why subqueries matter:</p>
<!-- -->

<svg version="1.1" xmlns:xl="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns="http://www.w3.org/2000/svg" viewBox="29.5 167 879.5 452" width="879.5" height="452">
  <defs>
    <font-face font-family="Helvetica Neue" font-size="16" panose1="2 0 8 3 0 0 0 9 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="0" x-height="524" cap-height="722" ascent="975.0061" descent="-216.99524" font-weight="700">
      <font-face-src>
        <font-face-name name="HelveticaNeue-Bold"></font-face-name>
      </font-face-src>
    </font-face>
    <marker orient="auto" overflow="visible" markerUnits="strokeWidth" id="FilledArrow_Marker" strokelinejoin="miter" strokemiterlimit="10" viewBox="-1 -4 10 8" markerWidth="10" markerHeight="8" color="#cc0102">
      <g>
        <path d="M 8 0 L 0 -3 L 0 3 Z" fill="currentColor" stroke="currentColor" stroke-width="1"></path>
      </g>
    </marker>
    <marker orient="auto" overflow="visible" markerUnits="strokeWidth" id="Arrow_Marker" strokelinejoin="miter" strokemiterlimit="10" viewBox="-1 -4 10 8" markerWidth="10" markerHeight="8" color="#346591">
      <g>
        <path d="M 8 0 L 0 -3 L 0 3 Z" fill="none" stroke="currentColor" stroke-width="1"></path>
      </g>
    </marker>
    <marker orient="auto" overflow="visible" markerUnits="strokeWidth" id="FilledArrow_Marker_2" strokelinejoin="miter" strokemiterlimit="10" viewBox="-1 -4 10 8" markerWidth="10" markerHeight="8" color="#cb0200">
      <g>
        <path d="M 8 0 L 0 -3 L 0 3 Z" fill="currentColor" stroke="currentColor" stroke-width="1"></path>
      </g>
    </marker>
    <font-face font-family="Monaco" font-size="14" units-per-em="1000" underline-position="-37.597656" underline-thickness="75.68359" slope="0" x-height="545.41016" cap-height="757.8125" ascent="1000" descent="-250" font-weight="400">
      <font-face-src>
        <font-face-name name="Monaco"></font-face-name>
      </font-face-src>
    </font-face>
    <font-face font-family="Monaco" font-size="13" units-per-em="1000" underline-position="-37.597656" underline-thickness="75.68359" slope="0" x-height="545.41016" cap-height="757.8125" ascent="1000" descent="-250" font-weight="400">
      <font-face-src>
        <font-face-name name="Monaco"></font-face-name>
      </font-face-src>
    </font-face>
  </defs>
  <g id="Canvas_1" style="stroke-dasharray:none" fill-opacity="1" fill="none" stroke-opacity="1" stroke="none">
    <title>Canvas 1</title>
    <g id="Canvas_1: Layer 1">
      <title>Layer 1</title>
      <g id="Graphic_2">
        <rect x="765.5" y="177" width="133.5" height="43.75" fill="#326691"></rect>
        <text transform="translate(770.5 189.14294)" fill="white">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="700" fill="white" x="27.67" y="16">Postgres</tspan>
        </text>
      </g>
      <g id="Graphic_3">
        <rect x="39.5" y="177" width="133.5" height="43.75" fill="#cc0100"></rect>
        <text transform="translate(44.5 189.14294)" fill="white">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="700" fill="white" x="42.958" y="16">Rails</tspan>
        </text>
      </g>
      <g id="Graphic_9">
        <text transform="translate(309.538 466.27576)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="700" fill="black" x="0" y="16">Advanced Active Record with Subqueries:</tspan>
        </text>
      </g>
      <g id="Line_12">
        <line x1="106.25" y1="220.75" x2="106.25" y2="608.5" stroke="#c00" style="stroke-dasharray:4.0,4.0" stroke-width="1"></line>
      </g>
      <g id="Line_13">
        <line x1="831.75" y1="220.75" x2="831.75" y2="608.5" stroke="#326690" style="stroke-dasharray:4.0,4.0" stroke-width="1"></line>
      </g>
      <g id="Line_15">
        <line x1="117.5" y1="296.5" x2="811.1" y2="296.5" marker-end="url(#FilledArrow_Marker)" stroke="#cc0102" stroke-width="1"></line>
      </g>
      <g id="Line_17">
        <line x1="821" y1="328" x2="127.4" y2="328" marker-end="url(#Arrow_Marker)" stroke="#346591" style="stroke-dasharray:4.0,4.0" stroke-width="1"></line>
      </g>
      <g id="Line_18">
        <line x1="117.5" y1="375" x2="811.1" y2="376.97186" marker-end="url(#FilledArrow_Marker_2)" stroke="#cb0200" stroke-width="1"></line>
      </g>
      <g id="Graphic_20">
        <text transform="translate(350.01 224.35327)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" font-weight="700" fill="black" x="0" y="16">Simple usage of Active Record:</tspan>
        </text>
      </g>
      <g id="Graphic_21">
        <rect x="94.5" y="293" width="22.5" height="119" fill="#cc0100"></rect>
      </g>
      <g id="Graphic_25">
        <rect x="821" y="293" width="22.5" height="38.25049" fill="#326691"></rect>
      </g>
      <g id="Graphic_40">
        <text transform="translate(320.5 273.54273)" fill="black">
          <tspan font-family="Monaco" font-size="14" font-weight="400" fill="black" x="0" y="14">SELECT AVG(salary) FROM employees</tspan>
        </text>
      </g>
      <g id="Graphic_43">
        <text transform="translate(431.8181 309.16504)" fill="black">
          <tspan font-family="Monaco" font-size="13" font-weight="400" fill="black" x="0" y="13">99306.4</tspan>
        </text>
      </g>
      <g id="Graphic_44">
        <text transform="translate(265.8911 352.83105)" fill="black">
          <tspan font-family="Monaco" font-size="14" font-weight="400" fill="black" x="0" y="14">SELECT * FROM employees WHERE salary &gt; 99306.4</tspan>
        </text>
      </g>
      <g id="Line_48">
        <line x1="821" y1="408.7495" x2="127.4" y2="408.7495" marker-end="url(#Arrow_Marker)" stroke="#346591" style="stroke-dasharray:4.0,4.0" stroke-width="1"></line>
      </g>
      <g id="Graphic_47">
        <rect x="821" y="372.64905" width="22.5" height="38.25049" fill="#326691"></rect>
      </g>
      <g id="Graphic_46">
        <text transform="translate(435.71875 389.91455)" fill="black">
          <tspan font-family="Monaco" font-size="13" font-weight="400" fill="black" x="0" y="13">Result</tspan>
        </text>
      </g>
      <g id="Line_53">
        <line x1="117.5" y1="534" x2="811.1" y2="534" marker-end="url(#FilledArrow_Marker_2)" stroke="#cb0200" stroke-width="1"></line>
      </g>
      <g id="Graphic_52">
        <text transform="translate(151.27197 511.0972)" fill="black">
          <tspan font-family="Monaco" font-size="14" font-weight="400" fill="black" x="0" y="14">SELECT * FROM employees WHERE salary &gt; (SELECT AVG(salary) FROM employees)</tspan>
        </text>
      </g>
      <g id="Line_51">
        <line x1="821" y1="565.0156" x2="127.4" y2="565.0156" marker-end="url(#Arrow_Marker)" stroke="#346591" style="stroke-dasharray:4.0,4.0" stroke-width="1"></line>
      </g>
      <g id="Graphic_50">
        <rect x="821" y="529.76514" width="22.5" height="38.25049" fill="#326691"></rect>
      </g>
      <g id="Graphic_49">
        <text transform="translate(438.71875 546.1807)" fill="black">
          <tspan font-family="Monaco" font-size="13" font-weight="400" fill="black" x="0" y="13">Result</tspan>
        </text>
      </g>
      <g id="Graphic_54">
        <rect x="94.5" y="530.0156" width="22.5" height="38.25049" fill="#cc0100"></rect>
      </g>
    </g>
  </g>
</svg>
<p>In the first case, without subqueries, we are going to the database twice: First to get the average salary, and then again to get the result set. With a subquery, we can avoid the extra roundtrip, getting the result directly with a single query.</p>
<h2 id="working-with-active-record-in-rails"><a href="#working-with-active-record-in-rails" aria-label="working with active record in rails permalink"></a>Working with Active Record in Rails</h2>
<p>Active Record is a little like a walled garden. It protects us as developers (and our users) from the harsh realities of what lies beyond those walls: Differences in SQL between databases (MySQL, Postgres, SQLite), knowing how to properly escape strings to avoid <a href="https://en.wikipedia.org/wiki/SQL_injection">SQL injection attacks</a>, and generally providing an elegant abstraction to interact with our database using the language of our choice, Ruby.</p>
<p>But, SQL is extremely powerful! By understanding the SQL that Active Record is executing, we can open the gate in our walled garden to <strong>reach beyond what you may think is possible to accomplish in Rails</strong>, taking advantage of optimizations and flexibility that may be difficult to achieve otherwise.</p>
<h2 id="what-are-subqueries-in-rails"><a href="#what-are-subqueries-in-rails" aria-label="what are subqueries in rails permalink"></a>What are Subqueries in Rails</h2>
<p>In this article, we will be learning how to use subqueries in Active Record. Subqueries are what their name implies: A query within a query. We will look at how to embed subqueries into the <code>SELECT</code>, <code>FROM</code>, <code>WHERE</code>, and <code>HAVING</code> clauses of SQL, to meet the demands of our business counterparts who are asking to view data in different and interesting ways.</p>
<p>We'll be playing the role of a developer fielding questions from HR. They are asking for reports about our employees at BCE (Best Company Ever), and we'll do our best to find the data they need using Active Record.</p>
<p>The <a href="https://github.com/pganalyze/subqueries-rails-example">source code for this article</a> is available on GitHub.</p>
<h2 id="an-overview-of-our-data"><a href="#an-overview-of-our-data" aria-label="an overview of our data permalink"></a>An Overview of our Data</h2>
<p>Our database has 4 tables:</p>
<ul>
<li><strong>roles</strong>: The job roles of our employees (Finance, Engineering, Sales, HR, etc...)</li>
<li><strong>employees</strong>: The people that work for BCE</li>
<li><strong>performance_reviews</strong>: Performance reviews carried out by an employee's manager, giving them a score between 0 and 100</li>
<li><strong>vacations</strong>: Keeping track of when employees have taken vacation</li>
</ul>
<p>Using <a href="https://dbdiagram.io/">https://dbdiagram.io/</a> we're able to see how these tables relate to each other:</p>
<p>
<span>
      <a href="https://pganalyze.com/static/544de74e19f0479f8d32a99abbac1d1a/c2d9c/subqueries-rails-diagram-dark.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="An Overview of how 4 tables in our database relate to each other" title="An Overview of how 4 tables in our database relate to each other" src="https://pganalyze.com/static/544de74e19f0479f8d32a99abbac1d1a/8c557/subqueries-rails-diagram-dark.png" srcset="https://pganalyze.com/static/544de74e19f0479f8d32a99abbac1d1a/4edbd/subqueries-rails-diagram-dark.png 175w, https://pganalyze.com/static/544de74e19f0479f8d32a99abbac1d1a/13ae7/subqueries-rails-diagram-dark.png 350w, https://pganalyze.com/static/544de74e19f0479f8d32a99abbac1d1a/8c557/subqueries-rails-diagram-dark.png 700w, https://pganalyze.com/static/544de74e19f0479f8d32a99abbac1d1a/e996b/subqueries-rails-diagram-dark.png 1050w, https://pganalyze.com/static/544de74e19f0479f8d32a99abbac1d1a/c2d9c/subqueries-rails-diagram-dark.png 1326w" sizes="(max-width: 700px) 100vw, 700px" loading="lazy">
  </a>
    </span>
</p>
<p>If you are following along, the <code>rails db:seed</code> command will generate 1,000 employees, 1,000 vacations, and 10,000 performance reviews.</p>
<h2 id="the-where-subquery"><a href="#the-where-subquery" aria-label="the where subquery permalink"></a>The Where Subquery</h2>
<p>Now that we have our data set and we’re ready to go let’s help our HR team with their first request:</p>
<blockquote>
<p>Leigh, could you find us all the employees that make <em>more than the average salary</em> at BCE?</p>
</blockquote>
<p>Here we will use a subquery within the <code>WHERE</code> clause to find the employees that match HR's request:</p>
<div data-language="sql"><pre><code><span>SELECT</span> <span>*</span>
<span>FROM</span> employees
<span>WHERE</span>
  employees<span>.</span>salary <span>&gt;</span> <span>(</span>
    <span>SELECT</span> <span>avg</span><span>(</span>salary<span>)</span>
    <span>FROM</span> employees<span>)</span></code></pre></div>
<p>My first attempt at replicating the query above looked like this:</p>
<div data-language="ruby"><pre><code><span>Employee</span><span>.</span>where<span>(</span><span>'salary &gt; :avg'</span><span>,</span> avg<span>:</span> <span>Employee</span><span>.</span>average<span>(</span><span>:salary</span><span>)</span><span>)</span></code></pre></div>
<p><em>But what it produced was two queries</em>: One to find the average, and a second to query employees with a salary greater than that number. Not technically wrong, but <strong>it doesn't line up with the SQL we were going for.</strong> There is also a potential performance impact of two round-trip requests to the database server, along with potential inconsistencies if a new employee making $1B/year is hired between queries one and two. Although this is unlikely in this particular scenario, it’s something to consider as a potential risk.</p>
<div data-language="sql"><pre><code>
<span>SELECT</span> <span>AVG</span><span>(</span><span>"employees"</span><span>.</span><span>"salary"</span><span>)</span> <span>FROM</span> <span>"employees"</span>

<span>SELECT</span> <span>"employees"</span><span>.</span><span>*</span> <span>FROM</span> <span>"employees"</span> <span>WHERE</span> <span>(</span>salary <span>&gt;</span> <span>99306.4</span><span>)</span></code></pre></div>
<p>What we shouldn’t forget about <a href="https://guides.rubyonrails.org/active_record_querying.html">Active Record</a> is that certain methods, such as <code>average(:salary)</code>, actually execute the query and return a result, while other methods implement <a href="https://en.wikipedia.org/wiki/Method_chaining">Method Chaining</a>, allowing you to chain multiple Active Record methods together, building up more complex SQL statements prior to their execution.</p>
<div data-language="ruby"><pre><code><span>Employee</span><span>.</span>where<span>(</span><span>'salary &gt; (:avg)'</span><span>,</span> avg<span>:</span> <span>Employee</span><span>.</span>select<span>(</span><span>'avg(salary)'</span><span>)</span><span>)</span></code></pre></div>
<p>This produces the SQL we want, but note that we had to wrap the placeholder condition <code>:avg</code> in brackets, because the database wants subqueries wrapped in brackets as well.</p>
<p>Because the seed data is generated randomly, your results will vary from mine, but I am seeing <em>487</em> matching employees, getting a result that looks like this:</p>
<div data-language="text"><pre><code>#&lt;ActiveRecord::Relation [#&lt;Employee id: 4, role_id: 5, name: "Bob Williams", salary: 127053.0, created_at: "2020-04-26 18:42:53", updated_at: "2020-04-26 18:42:53"&gt;, #&lt;Employee id: 5, role_id: 4, name: "Bob Florez", salary: 149218.0, created_at: "2020-04-26 18:42:53", updated_at: "2020-04-26 18:42:53"&gt;, ...]&gt;</code></pre></div>
<h3 id="where-not-exists"><a href="#where-not-exists" aria-label="where not exists permalink"></a>Where Not Exists</h3>
<blockquote>
<p>Leigh, we would like to encourage employees to have a healthy work-life balance, and were hoping you could provide us with a list of all the <em>employees who have yet to take any vacation time</em>.</p>
</blockquote>
<p>For this case, <code>NOT EXISTS</code> is a perfect fit, since it only matches records that <strong>do not</strong> have a match in the subquery. An alternative is to perform a left outer join, only choosing the records with no matches on the right side. This is referred to as an <a href="https://gerardnico.com/data/type/relation/sql/anti_join">anti-join</a>, where the purpose of the join is to find records that <strong>do not</strong> have a matching record.</p>
<div data-language="sql"><pre><code><span>SELECT</span> <span>*</span>
<span>FROM</span> employees
<span>WHERE</span>
  <span>NOT</span> <span>EXISTS</span> <span>(</span>
    <span>SELECT</span> <span>1</span>
    <span>FROM</span> vacations
    <span>WHERE</span> vacations<span>.</span>employee_id <span>=</span> employees<span>.</span>id<span>)</span></code></pre></div>
<p>If you're interested in the <strong>LEFT OUTER JOIN</strong> equivalent, it might look like this:</p>
<div data-language="sql"><pre><code><span>SELECT</span> employees<span>.</span><span>*</span>
<span>FROM</span>
  employees
  <span>LEFT</span> <span>OUTER</span> <span>JOIN</span> vacations <span>ON</span> vacations<span>.</span>employee_id <span>=</span> employees<span>.</span>id
<span>WHERE</span> vacations<span>.</span>id <span>IS</span> <span>NULL</span></code></pre></div>
<p>The subquery depends on a match between the <code>employees.id</code> column and the <code>vacations.employee_id</code> column, making it a <a href="https://learnsql.com/blog/correlated-sql-subqueries-newbies/">correlated subquery</a>. Because Rails follows standard naming conventions when querying (the downcased plural form of our model), we can add the above condition into our subquery without too much difficulty.</p>
<div data-language="ruby"><pre><code><span>Employee</span><span>.</span>where<span>(</span>
  <span>'NOT EXISTS (:vacations)'</span><span>,</span>
  vacations<span>:</span> <span>Vacation</span><span>.</span>select<span>(</span><span>'1'</span><span>)</span><span>.</span>where<span>(</span><span>'employees.id = vacations.employee_id'</span><span>)</span>
<span>)</span></code></pre></div>
<p>Using my seed data, I am seeing <em>369</em> employees that have yet to take any vacations.</p>
<div data-language="text"><pre><code>#&lt;ActiveRecord::Relation [#&lt;Employee id: 2, role_id: 2, name: "Alice Florez", salary: 86920.0, created_at: "2020-04-26 18:42:53", updated_at: "2020-04-26 18:42:53"&gt;, #&lt;Employee id: 5, role_id: 4, name: "Bob Florez", salary: 149218.0, created_at: "2020-04-26 18:42:53", updated_at: "2020-04-26 18:42:53"&gt;, ...]&gt;</code></pre></div>
<h2 id="the-select-subquery"><a href="#the-select-subquery" aria-label="the select subquery permalink"></a>The Select Subquery</h2>
<blockquote>
<p>Leigh, could you provide us with a list of employees, <em>including the average salary</em> of a BCE employee, and how much this <em>employee's salary differs from the average</em>?</p>
</blockquote>
<div data-language="sql"><pre><code><span>SELECT</span>
  <span>*</span><span>,</span>
  <span>(</span><span>SELECT</span> <span>avg</span><span>(</span>salary<span>)</span>
    <span>FROM</span> employees<span>)</span> avg_salary<span>,</span>
  salary <span>-</span> <span>(</span>
    <span>SELECT</span> <span>avg</span><span>(</span>salary<span>)</span>
    <span>FROM</span> employees<span>)</span> above_avg
<span>FROM</span> employees</code></pre></div>
<p>Because the subquery is repeated, we can save ourselves a little bit of hassle by placing the subquery SQL into a variable that we'll embed into the outer query. The <code>to_sql</code> method is perfect for this, but it's also fantastic to peak into the SQL that Rails is producing without actually executing the query.</p>
<div data-language="ruby"><pre><code>avg_sql <span>=</span> <span>Employee</span><span>.</span>select<span>(</span><span>'avg(salary)'</span><span>)</span><span>.</span>to_sql

<span>Employee</span><span>.</span>select<span>(</span>
  <span>'*'</span><span>,</span>
  <span>"(<span><span>#{</span>avg_sql<span>}</span></span>) avg_salary"</span><span>,</span>
  <span>"salary - (<span><span>#{</span>avg_sql<span>}</span></span>) avg_difference"</span>
<span>)</span></code></pre></div>
<p>This query does not limit the results in any way, but instead selects two additional columns (<code>avg_salary</code> and <code>avg_difference</code>). Looking at the first three results, I am seeing:</p>
<div data-language="ruby"><pre><code><span>[</span>
  <span>{</span><span>"id"</span><span>=</span><span>&gt;</span><span>1</span><span>,</span> <span>"role_id"</span><span>=</span><span>&gt;</span><span>1</span><span>,</span> <span>"name"</span><span>=</span><span>&gt;</span><span>"Joe Serna"</span><span>,</span> <span>"salary"</span><span>=</span><span>&gt;</span><span>86340.0</span><span>,</span> <span>"avg_salary"</span><span>=</span><span>&gt;</span><span>99306.4</span><span>,</span> <span>"avg_difference"</span><span>=</span><span>&gt;</span><span>-</span><span>12966.399999999994</span><span>}</span><span>,</span> 
  <span>{</span><span>"id"</span><span>=</span><span>&gt;</span><span>2</span><span>,</span> <span>"role_id"</span><span>=</span><span>&gt;</span><span>2</span><span>,</span> <span>"name"</span><span>=</span><span>&gt;</span><span>"Alice Florez"</span><span>,</span> <span>"salary"</span><span>=</span><span>&gt;</span><span>86920.0</span><span>,</span> <span>"avg_salary"</span><span>=</span><span>&gt;</span><span>99306.4</span><span>,</span> <span>"avg_difference"</span><span>=</span><span>&gt;</span><span>-</span><span>12386.399999999994</span><span>}</span><span>,</span> 
  <span>{</span><span>"id"</span><span>=</span><span>&gt;</span><span>3</span><span>,</span> <span>"role_id"</span><span>=</span><span>&gt;</span><span>3</span><span>,</span> <span>"name"</span><span>=</span><span>&gt;</span><span>"Amanda Florez"</span><span>,</span> <span>"salary"</span><span>=</span><span>&gt;</span><span>93600.0</span><span>,</span> <span>"avg_salary"</span><span>=</span><span>&gt;</span><span>99306.4</span><span>,</span> <span>"avg_difference"</span><span>=</span><span>&gt;</span><span>-</span><span>5706.399999999994</span><span>}</span>
<span>]</span></code></pre></div>
<p>As with any SQL query, there are often many ways to arrive at the same result. In this example we used subqueries to find the average employee salary, but it may have been better to use <a href="https://www.postgresql.org/docs/current/tutorial-window.html">window functions</a> instead. They give us the same result, but provide a simpler query which is actually more performant as well. Even on a small dataset of 1000 employees, this query takes approximately 12ms vs 18ms for the subquery equivalent.</p>
<div data-language="sql"><pre><code><span>SELECT</span>
  <span>*</span><span>,</span>
  <span>avg</span><span>(</span>salary<span>)</span> <span>OVER</span> <span>(</span><span>)</span> <span>AS</span> avg_salary<span>,</span>
  salary <span>-</span> <span>avg</span><span>(</span>salary<span>)</span> <span>OVER</span> <span>(</span><span>)</span> <span>AS</span> avg_salary
<span>FROM</span>
  employees</code></pre></div>
<p>The window function approach is actually easier to write in Rails as well!</p>
<div data-language="ruby"><pre><code><span>Employee</span><span>.</span>select<span>(</span>
  <span>'*'</span><span>,</span>
  <span>"avg(salary) OVER () avg_salary"</span><span>,</span>
  <span>"salary - avg(salary) OVER () avg_difference"</span>
<span>)</span></code></pre></div>
<h2 id="the-from-subquery"><a href="#the-from-subquery" aria-label="the from subquery permalink"></a>The From Subquery</h2>
<blockquote>
<p>Leigh, we'd like to know the <em>average performance review score</em> given across all our managers.</p>
</blockquote>
<p>After clarifying with HR, they are looking to take the average score each manager has given, and then take the average of those averages. In other words, the average average. When you are dealing with an <strong>aggregate of aggregates</strong>, it needs to be accomplished in two steps. This can be done using a subquery as the <code>FROM</code> clause, essentially giving us a temporary table to then select from, allowing us to find the average of those averages.</p>
<div data-language="sql"><pre><code><span>SELECT</span> <span>avg</span><span>(</span>avg_score<span>)</span> reviewer_avg
<span>FROM</span> <span>(</span>
  <span>SELECT</span> reviewer_id<span>,</span> <span>avg</span><span>(</span>score<span>)</span> avg_score
  <span>FROM</span> performance_reviews
  <span>GROUP</span> <span>BY</span> reviewer_id<span>)</span> reviewer_avgs</code></pre></div>
<p>To keep our Ruby code clean, we'll place the subquery into a variable which can then be embedded into the main query.</p>
<div data-language="ruby"><pre><code>from_sql <span>=</span>
  <span>PerformanceReview</span><span>.</span>select<span>(</span><span>:reviewer_id</span><span>,</span> <span>'avg(score) avg_score'</span><span>)</span><span>.</span>group<span>(</span>
    <span>:reviewer_id</span>
  <span>)</span><span>.</span>to_sql

<span>PerformanceReview</span><span>.</span>select<span>(</span><span>'avg(avg_score) reviewer_avg'</span><span>)</span><span>.</span>from<span>(</span>
  <span>"(<span><span>#{</span>from_sql<span>}</span></span>) as reviewer_avgs"</span>
<span>)</span><span>.</span>take<span>.</span>reviewer_avg</code></pre></div>
<p>The result of this query is <code>50.652</code>. This makes sense given that the seed data …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://pganalyze.com/blog/active-record-subqueries-rails">https://pganalyze.com/blog/active-record-subqueries-rails</a></em></p>]]>
            </description>
            <link>https://pganalyze.com/blog/active-record-subqueries-rails</link>
            <guid isPermaLink="false">hacker-news-small-sites-23629450</guid>
            <pubDate>Wed, 24 Jun 2020 15:55:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Google Blew a Ten-Year Lead]]>
            </title>
            <description>
<![CDATA[
Score 834 | Comments 542 (<a href="https://news.ycombinator.com/item?id=23628761">thread link</a>) | @secondbreakfast
<br/>
June 24, 2020 | https://secondbreakfast.co/google-blew-a-ten-year-lead | <a href="https://web.archive.org/web/*/https://secondbreakfast.co/google-blew-a-ten-year-lead">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
	  <div>
        
          



<p>Back when there were rumors of Google building an operating system, I thought<span></span> <span>“</span>Lol.”</p>
<p>Then I watched then-PM Sundar Pichai <a href="https://www.youtube.com/watch?v=0QRO3gKj3qw">announce Chrome <span>OS</span></a>. My heart raced. It was perfect.</p>
<p>I got my email through Gmail, I wrote documents on Docs, I listened to Pandora, I viewed photos on TheFacebook. Why did I need all of Windows Vista?</p>
<p>In 2010, I predicted that by 2020 Chrome <span>OS</span> would be the most popular desktop <span>OS</span> in the world. It was fast, lightweight, and $0.</p>
<p><span>“</span>Every Windows and <span>OS</span> X app will be re-built for the browser!” I thought. Outlook-&gt;Gmail. Excel-&gt;Sheets. Finder-&gt;Dropbox. Photoshop-&gt;Figma. Terminal-&gt;Repl.it.</p>
<p>All of your files would be accessible by whoever you wanted, wherever you wanted, all the time. It was obvious. Revolutionary.</p>
<p>I haven’t installed <span>MSFT</span> Office on a machine since 2009. Sheets and Docs have been good enough for me. The theoretical unlimited computing power and collaboration features meant Google Docs was better than Office (and free!).</p>
<p>Then something happened at Google. I’m not sure what. But they stopped innovating on cloud software.</p>
<p>Docs and Sheets haven’t changed in a decade. Google Drive remains impossible to navigate. Sharing is complicated. Sheets freezes up. I can’t easily interact with a Sheets <span>API</span> (I’ve tried!). Docs still shows page breaks by default! <span>WTF</span>!</p>
<p>Even though I have an iPhone and a MacBook, I’ve been married to Google services. I browse Chrome. I use Gmail. I get directions and lookup restaurants on Maps. I’m a YouTube addict.</p>
<p>Yet I’ve been ungluing myself from Google so far this year. Not because of Google-is-reading-my-emails-and-tracking-every-keystroke reasons, but because I like other software so much more that it’s worth switching.</p>
<p>At <span>WWDC</span>, Apple shared Safari stats for macOS Big Sur. It reminded me how much Chrome makes my machine go <span>WHURRRRRR</span>. Yesterday, I made Safari my default browser again.</p>
<p>My Gmail inbox has become a mailbox stuffed with clothing flyers, SaaS mailers, and Rollbar alerts. I love when people respond to Second Breakfast, but their responses get lost amid a sea of plastic bottles. I started using <span>HEY</span> last week. My new email is <a href="mailto:billy@hey.com">billy@hey.com</a>. I love it so far.</p>
<p>I’ve given up on Google Docs. I can never find the documents Andy shares with me. The formatting is tired and stuck in the you-might-print-this-out paradigm. Notion is a much better place to write and brainstorm with people.</p>
<p>The mobile Google results page is so cluttered that I switched my iPhone’s default search to DuckDuckGo. The results are a tad worse, but I’m never doing heavy-duty searches on the go. And now I don’t have to scroll past 6 ads to get the first result. DuckDuckGo’s privacy is an added bonus.</p>
<p>I still use Google Sheets heavily. But wow, Airtable makes Sheets feel decrepit. Where’s the easy API? New ways of formatting? Better collaboration? Simple sheet-as-a-database?</p>
<p>My new usage patterns:</p>
<ul>
<li>Email: <del>Gmail</del> <span>HEY</span></li>
<li>Search: <del>Google</del> DuckDuckGo (mobile) and Google (desktop)</li>
<li>Maps: Google</li>
<li>Docs: <del>Google</del> Notion</li>
<li>Sheets: Google</li>
<li>Video: YouTube (but increasingly I’m noticing other people use Twitch, Instagram, and TikTok)</li>
<li>Video Calls: <del>Google Meet</del> Zoom</li>
</ul>
<p>I’m a long shareholder of Google. It’s amazing how they have four monopolies and only monetize one of them. I’m confident they have a bright future ahead.</p>
<p>But the lack of innovation is frustrating. The product goals are all over the place. Microsoft has a new clear mission: The Cloud. What’s Google’s clear mission?</p>
<p>It feels like they blew a 10 year lead.</p>

          
          
          
          <div>
            <div>
              <p>
                I write almost every day. Subscribe to get new posts as you sip your coffee each morning.
                <span>When you join I'll also send you the posts that've made the front page of HN.</span>
              </p>
            </div>
            
          </div>
                
          
      

      </div>
    </div></div>]]>
            </description>
            <link>https://secondbreakfast.co/google-blew-a-ten-year-lead</link>
            <guid isPermaLink="false">hacker-news-small-sites-23628761</guid>
            <pubDate>Wed, 24 Jun 2020 15:12:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Stock Analysis in Python]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=23628196">thread link</a>) | @rbanffy
<br/>
June 24, 2020 | https://beta.deepnote.com/article/stock-analysis-in-python | <a href="https://web.archive.org/web/*/https://beta.deepnote.com/article/stock-analysis-in-python">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-cy="project"><div><div><div><p>Exploring financial data with object-oriented programming and additive models
</p><p><img src="https://miro.medium.com/max/1400/1*MAgqFZnhWemDyzXLXEUUTw.jpeg" alt="Stock Analysis in Python - preview image"></p></div><div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>It’s easy to get carried away <span>with</span> the wealth of data <span>and</span> free <span>open</span><span>-</span>source tools available <span>for</span> data science<span>.</span> After spending a little bit of time <span>with</span> the <span>&lt;</span>a href<span>=</span><span>"https://www.quandl.com/tools/python"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span>quandl financial library<span>&lt;</span><span>/</span>a<span>&gt;</span> <span>and</span> the <span>&lt;</span>a href<span>=</span><span>"https://facebook.github.io/prophet/docs/quick_start.html"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span>prophet modeling library<span>&lt;</span><span>/</span>a<span>&gt;</span><span>,</span> I decided to <span>try</span> some simple stock data exploration<span>.</span> Several days <span>and</span> <span>1000</span> lines of Python later<span>,</span> I ended up <span>with</span> a complete stock analysis <span>and</span> prediction tool<span>.</span> Although I am <span>not</span> confident <span>&lt;</span>a href<span>=</span><span>"http://www.businessinsider.com/foolish-advice-about-selling-stocks-2013-1"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span><span>(</span><span>or</span> foolish<span>)</span><span>&lt;</span><span>/</span>a<span>&gt;</span> enough to use it to invest <span>in</span> individual stocks<span>,</span> I learned a ton of Python <span>in</span> the process <span>and</span> <span>in</span> the spirit of <span>open</span><span>-</span>source<span>,</span> want to share my results <span>and</span> code so others can benefit<span>.</span><span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>This article will show how to use Stocker<span>,</span> a Python <span>class</span><span>-</span>based tool <span>for</span> stock analysis <span>and</span> prediction <span>(</span>the name was originally arbitrary<span>,</span> but I decided after the fact it nicely stands <span>for</span> “stock explorer”<span>)</span><span>.</span> I had tried several times to conquer classes<span>,</span> the foundation of <span>&lt;</span>a href<span>=</span><span>"https://python.swaroopch.com/oop.html"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span><span>object</span><span>-</span>oriented programming<span>&lt;</span><span>/</span>a<span>&gt;</span> <span>in</span> Python<span>,</span> but <span>as</span> <span>with</span> most programming topics<span>,</span> they never quite made sense to me when I read the books<span>.</span> It was only when I was deep <span>in</span> a project faced <span>with</span> a problem I had <span>not</span> solved before that the concept <span>finally</span> clicked<span>,</span> showing once again that experience beats theoretical explanations! In addition to an exploration of Stocker<span>,</span> we will touch on some important topics including the basics of a Python <span>class</span> <span>and</span> additive models<span>.</span> For anyone wanting to use Stocker<span>,</span> the <span>&lt;</span>a href<span>=</span><span>"https://github.com/WillKoehrsen/Data-Analysis/tree/master/stocker"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span>complete code can be found on GitHub<span>&lt;</span><span>/</span>a<span>&gt;</span> along <span>with</span> documentation <span>for</span> usage<span>.</span> Stocker was designed to be easy to use <span>(</span>even <span>for</span> those new to Python<span>)</span><span>,</span> <span>and</span> I encourage anyone reading to <span>try</span> it out<span>.</span> Now<span>,</span> let’s take a look at the analysis capabilities of Stocker!<span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>figure<span>&gt;</span><span>&lt;</span>div<span>&gt;</span><span>&lt;</span>div<span>&gt;</span><span>&lt;</span>div<span>&gt;</span><span>&lt;</span>div<span>&gt;</span><span>&lt;</span>div<span>&gt;</span><span>&lt;</span><span>/</span>div<span>&gt;</span><span>&lt;</span>noscript<span>&gt;</span><span>&lt;</span>img height<span>=</span><span>"467"</span> role<span>=</span><span>"presentation"</span> sizes<span>=</span><span>"690px"</span> src<span>=</span><span>"https://miro.medium.com/max/1380/1*eDR_Jh0yvep3ds6wv4KQ5A.png"</span> srcset<span>=</span><span>"https://miro.medium.com/max/552/1*eDR_Jh0yvep3ds6wv4KQ5A.png 276w, https://miro.medium.com/max/1104/1*eDR_Jh0yvep3ds6wv4KQ5A.png 552w, https://miro.medium.com/max/1280/1*eDR_Jh0yvep3ds6wv4KQ5A.png 640w, https://miro.medium.com/max/1380/1*eDR_Jh0yvep3ds6wv4KQ5A.png 690w"</span> width<span>=</span><span>"690"</span><span>/</span><span>&gt;</span><span>&lt;</span><span>/</span>noscript<span>&gt;</span><span>&lt;</span><span>/</span>div<span>&gt;</span><span>&lt;</span><span>/</span>div<span>&gt;</span><span>&lt;</span><span>/</span>div<span>&gt;</span><span>&lt;</span><span>/</span>div<span>&gt;</span><span>&lt;</span><span>/</span>figure<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>After installing the required libraries<span>,</span> the first thing we do <span>is</span> <span>import</span> the Stocker <span>class</span> <span>into</span> our Python session<span>.</span> We can do this <span>from</span> an interactive Python session <span>or</span> a Jupyter Notebook started <span>in</span> the directory <span>with</span> the script<span>.</span><span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><div data-cy="code-cell"><div><p>!pip install quandl
!pip install fbprophet
!pip install plotly</p></div></div></div></div></div></div></div></div><div><div><div><div><div><div><div data-cy="code-cell"><div><p><span>from</span> stocker <span>import</span> Stocker</p></div></div></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>We now have the Stocker <span>class</span> <span>in</span> our Python session<span>,</span> <span>and</span> we can use it to create an instance of the <span>class</span><span>.</span> <span>&lt;</span>a href<span>=</span><span>"https://docs.python.org/3/tutorial/classes.html"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span>In Python<span>,</span> an instance of a <span>class</span><span>&lt;</span><span>/</span>a<span>&gt;</span> <span>is</span> called an <span>object</span><span>,</span> <span>and</span> the act of creating an <span>object</span> <span>is</span> sometimes called instantiation <span>or</span> construction<span>.</span> In order to make a Stocker <span>object</span> we need to <span>pass</span> <span>in</span> the name of a <span>&lt;</span>a href<span>=</span><span>"http://www.nasdaq.com/screening/company-list.aspx"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span>valid stock ticker<span>&lt;</span><span>/</span>a<span>&gt;</span> <span>(</span><span>&lt;</span>strong<span>&gt;</span>bold <span>&lt;</span><span>/</span>strong<span>&gt;</span>indicates output<span>)</span><span>.</span><span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><div data-cy="code-cell"><div><p>
microsoft <span>=</span> Stocker<span>(</span><span>'MSFT'</span><span>)</span></p></div></div></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>Now<span>,</span> we have a <span>&lt;</span>code<span>&gt;</span>microsoft<span>&lt;</span><span>/</span>code<span>&gt;</span><span>object</span> <span>with</span> <span>all</span> the properties of the Stocker <span>class</span><span>.</span> Stocker <span>is</span> built on the <span>&lt;</span>a href<span>=</span><span>"https://www.quandl.com/databases/WIKIP/documentation/about"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span>quandl WIKI database<span>&lt;</span><span>/</span>a<span>&gt;</span> which gives us access to over <span>3000</span> US stocks <span>with</span> years of daily price data <span>(</span><span>&lt;</span>a href<span>=</span><span>"https://media.githubusercontent.com/media/WillKoehrsen/Data-Analysis/master/stocker/data/stock_list.csv"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span>full <span>list</span><span>&lt;</span><span>/</span>a<span>&gt;</span><span>)</span><span>.</span> For this example<span>,</span> we will stick to Microsoft data<span>.</span> Although Microsoft might be seen <span>as</span> the opposite of <span>open</span><span>-</span>source<span>,</span> they have recently made some changes that make me optimist they are <span>&lt;</span>a href<span>=</span><span>"https://open.microsoft.com/"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span>embracing the <span>open</span><span>-</span>source community<span>&lt;</span><span>/</span>a<span>&gt;</span> <span>(</span>including Python<span>)</span><span>.</span><span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>A <span>class</span> <span>in</span> Python <span>is</span> comprised of two main parts<span>:</span> <span>&lt;</span>a href<span>=</span><span>"https://jeffknupp.com/blog/2014/06/18/improve-your-python-python-classes-and-object-oriented-programming/"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span>attributes <span>and</span> methods<span>&lt;</span><span>/</span>a<span>&gt;</span><span>.</span> Without going into too much detail<span>,</span> attributes are values <span>or</span> data associated either <span>with</span> the <span>class</span> <span>as</span> a whole <span>or</span> <span>with</span> specific instances <span>(</span>objects<span>)</span> of the <span>class</span><span>.</span> Methods are functions contained <span>in</span> the <span>class</span> <span>which</span> can act on that data<span>.</span> One attribute of a Stocker <span>object</span> <span>is</span> stock data <span>for</span> a specific company that <span>is</span> attribute <span>is</span> associated <span>with</span> the <span>object</span> when we construct it<span>.</span> We can access the attribute <span>and</span> assign it to another variable <span>for</span> inspection<span>:</span><span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><div data-cy="code-cell"><div><p>
stock_history <span>=</span> microsoft<span>.</span>stock
stock_history<span>.</span>head<span>(</span><span>)</span></p></div></div></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>The benefit of a Python <span>class</span> <span>is</span> that the methods <span>(</span>functions<span>)</span> <span>and</span> the data they act on are associated <span>with</span> the same <span>object</span><span>.</span> We can use a method of the Stocker <span>object</span> to plot the entire history of the stock<span>.</span><span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>The default value plotted <span>is</span> the Adjusted Closing price<span>,</span> which accounts <span>for</span> splits <span>in</span> the stock <span>(</span>when<span>&lt;</span>a href<span>=</span><span>"https://www.investopedia.com/terms/s/stocksplit.asp"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span> one stock <span>is</span> split into multiple stocks<span>&lt;</span><span>/</span>a<span>&gt;</span><span>,</span> say <span>2</span><span>,</span> <span>with</span> each new stock worth <span>1</span><span>/</span><span>2</span> of the original price<span>)</span><span>.</span><span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>This <span>is</span> a pretty basic plot that we could have found <span>from</span> a Google Search<span>,</span> but there <span>is</span> something satisfying about doing it ourselves <span>in</span> a few lines of Python! The <span>&lt;</span>code<span>&gt;</span>plot_stock<span>&lt;</span><span>/</span>code<span>&gt;</span>function has a number of optional arguments<span>.</span> By default<span>,</span> this method plots the Adjusted Closing price <span>for</span> the entire date <span>range</span><span>,</span> but we can choose the <span>range</span><span>,</span> the stats to plot<span>,</span> <span>and</span> the <span>type</span> of plot<span>.</span> For example<span>,</span> <span>if</span> we want to compare the Daily Change <span>in</span> price <span>with</span> the Adjusted Volume <span>(</span>number of shares<span>)</span> traded<span>,</span> we can specify those <span>in</span> the function call<span>.</span><span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><div data-cy="code-cell"><div><p>microsoft<span>.</span>plot_stock<span>(</span>start_date <span>=</span> <span>'2000-01-03'</span><span>,</span>  end_date <span>=</span> <span>'2018-01-16'</span><span>,</span>  stats <span>=</span> <span>[</span><span>'Daily Change'</span><span>,</span> <span>'Adj. Volume'</span><span>]</span><span>,</span>  plot_type<span>=</span><span>'pct'</span><span>)</span></p></div></div></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>Notice the y<span>-</span>axis <span>is</span> <span>in</span> percentage change relative to the average value <span>for</span> the statistic<span>.</span> This scale <span>is</span> necessary because the daily volume <span>is</span> originally <span>in</span> shares<span>,</span> <span>with</span> a <span>range</span> <span>in</span> the hundreds of millions<span>,</span> <span>while</span> daily price change typically <span>is</span> a few dollars! By converting to percentage change we can look at both datasets on a similar scale<span>.</span> The plot shows there <span>is</span> no correlation between the number of shares traded <span>and</span> the daily change <span>in</span> price<span>.</span> This <span>is</span> surprising <span>as</span> we might have expected more shares to be traded on days <span>with</span> larger price changes <span>as</span> people rush to take advantage of the swings<span>.</span> However<span>,</span> the only real trend seems to be that the volume traded decreases over time<span>.</span> There <span>is</span> also a significant decrease <span>in</span> price on December <span>4</span><span>,</span> <span>2017</span> that we could <span>try</span> to correlate <span>with</span> news stories about Microsoft<span>.</span> A quick news search <span>for</span> December <span>3</span> yields the following<span>:</span><span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>figure<span>&gt;</span><span>&lt;</span>div<span>&gt;</span><span>&lt;</span>div<span>&gt;</span><span>&lt;</span>div<span>&gt;</span><span>&lt;</span>div<span>&gt;</span><span>&lt;</span><span>/</span>div<span>&gt;</span><span>&lt;</span>noscript<span>&gt;</span><span>&lt;</span>img height<span>=</span><span>"217"</span> role<span>=</span><span>"presentation"</span> sizes<span>=</span><span>"588px"</span> src<span>=</span><span>"https://miro.medium.com/max/1176/1*ZkOCEqTzfB_EQ8rBx3Ek5w.png"</span> srcset<span>=</span><span>"https://miro.medium.com/max/552/1*ZkOCEqTzfB_EQ8rBx3Ek5w.png 276w, https://miro.medium.com/max/1104/1*ZkOCEqTzfB_EQ8rBx3Ek5w.png 552w, https://miro.medium.com/max/1176/1*ZkOCEqTzfB_EQ8rBx3Ek5w.png 588w"</span> width<span>=</span><span>"588"</span><span>/</span><span>&gt;</span><span>&lt;</span><span>/</span>noscript<span>&gt;</span><span>&lt;</span><span>/</span>div<span>&gt;</span><span>&lt;</span><span>/</span>div<span>&gt;</span><span>&lt;</span><span>/</span>div<span>&gt;</span><span>&lt;</span>figcaption<span>&gt;</span>Not sure about the reliability of these sources Google<span>&lt;</span><span>/</span>figcaption<span>&gt;</span><span>&lt;</span><span>/</span>figure<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>There certainly does <span>not</span> seem to be <span>any</span> indication that Microsoft stock <span>is</span> due <span>for</span> its largest price decrease <span>in</span> <span>10</span> years the <span>next</span> day! In fact<span>,</span> <span>if</span> we were playing the stock market based on news<span>,</span> we might have been tempted to buy stock because a deal <span>with</span> the NFL <span>(</span>second result<span>)</span> sounds like a positive!<span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>Using <span>&lt;</span>code<span>&gt;</span>plot_stock<span>&lt;</span><span>/</span>code<span>&gt;</span><span>,</span>we can investigate <span>any</span> of the quantities <span>in</span> the data across <span>any</span> date <span>range</span> <span>and</span> look <span>for</span> correlations <span>with</span> real<span>-</span>world events <span>(</span><span>if</span> there are <span>any</span><span>)</span><span>.</span> For now<span>,</span> we will move on to one of the more enjoyable parts of Stocker<span>:</span> making fake money!<span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>Let’s pretend <span>for</span> a moment we had the presence of mind to invest <span>in</span> <span>100</span> shares of Microsoft at the <span>&lt;</span>a href<span>=</span><span>"https://techcrunch.com/2017/08/08/a-look-back-in-ipo-microsoft-the-software-success/"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span>company’s Initial Public Offering<span>&lt;</span><span>/</span>a<span>&gt;</span> <span>(</span>IPO<span>)</span><span>.</span> How much richer would we be now?<span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><div data-cy="code-cell"><div><p>microsoft<span>.</span>buy_and_hold<span>(</span>start_date<span>=</span><span>'1986-03-13'</span><span>,</span> end_date<span>=</span><span>'2018-01-16'</span><span>,</span> nshares<span>=</span><span>100</span><span>)</span></p></div></div></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>In addition to making us feel better<span>,</span> using these results will allow us to plan our trips back <span>in</span> time to maximize profits<span>.</span><span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>Additive models are a powerful tool <span>for</span> analyzing <span>and</span> predicting time series<span>,</span> one of the most common types of real world data<span>.</span> The concept <span>is</span> straightforward<span>:</span> <span>&lt;</span>a href<span>=</span><span>"https://research.fb.com/prophet-forecasting-at-scale/"</span> rel<span>=</span><span>"noopener nofollow"</span> target<span>=</span><span>"_blank"</span><span>&gt;</span>represent a time series <span>as</span> a combination of patterns on different time scales <span>and</span> an overall trend<span>.</span><span>&lt;</span><span>/</span>a<span>&gt;</span> We know the <span>long</span><span>-</span>term trend of Microsoft stock <span>is</span> a steady increase<span>,</span> but there could also be patterns on a yearly <span>or</span> daily basis<span>,</span> such <span>as</span> an increase every Tuesday<span>,</span> that would be economically beneficial to know<span>.</span> A great library <span>for</span> analyzing time series <span>with</span> daily observations <span>(</span>such <span>as</span> stocks<span>)</span> <span>is</span> Prophet<span>,</span> developed by Facebook<span>.</span> Stocker does <span>all</span> the modeling work <span>with</span> Prophet behind the scenes <span>for</span> us<span>,</span> so we can use a simple method call to create <span>and</span> inspect a model<span>.</span><span>&lt;</span><span>/</span>p<span>&gt;</span></p></div></div></div></div></div></div><div><div><div><div><div><div><div data-cy="code-cell"><div><p>model<span>,</span> model_data <span>=</span> microsoft<span>.</span>create_prophet_model<span>(</span><span>)</span></p></div></div></div></div></div></div></div></div><div><div><div><div><div><div><p><span>&lt;</span>p<span>&gt;</span>The additive model smooths out the noise <span>in</span> the data<span>,</span> which <span>is</span> why the modeled line does <span>not</span> exactly line up <span>with</span> the …</p></div></div></div></div></div></div></div></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://beta.deepnote.com/article/stock-analysis-in-python">https://beta.deepnote.com/article/stock-analysis-in-python</a></em></p>]]>
            </description>
            <link>https://beta.deepnote.com/article/stock-analysis-in-python</link>
            <guid isPermaLink="false">hacker-news-small-sites-23628196</guid>
            <pubDate>Wed, 24 Jun 2020 14:23:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Tuvalu Makes $4M a Year]]>
            </title>
            <description>
<![CDATA[
Score 18 | Comments 15 (<a href="https://news.ycombinator.com/item?id=23627010">thread link</a>) | @jwdmsd1
<br/>
June 24, 2020 | https://factinator.com/tuvalu-island/ | <a href="https://web.archive.org/web/*/https://factinator.com/tuvalu-island/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="page">
		<div id="content">
	<div id="primary">
		<main id="main">

		
<article id="post-14">
	<!-- .entry-header -->



	<div>
		<p>Tuvalu, a tiny island midway between Hawaii and Australia with a population of just 9,860, receives yearly payment of almost $4 million for literally doing nothing at all. The reason? This is the money that the Tuvalu government receives from royalties from the country’s domain name, <strong>.tv</strong>!</p>
<p><img src="https://factinator.com/wp-content/uploads/2014/01/tv.jpg" alt="tv" width="268" height="175"></p>
<p><span id="more-14"></span>Before you all fire up your calculator, let me burst your bubble that the money comes down to just about $405 per person and also that this money goes to the Tuvalu’s government. Tuvalu commercialized its internet TLD, .tv, in 1988 and started receiving royalties which now account for almost 10% of the government’s total revenue.</p>

<p><img src="https://factinator.com/wp-content/uploads/2014/01/Tuvalu.jpg" alt="Tuvalu" width="600" height="380" srcset="https://factinator.com/wp-content/uploads/2014/01/Tuvalu.jpg 600w, https://factinator.com/wp-content/uploads/2014/01/Tuvalu-300x190.jpg 300w" sizes="(max-width: 600px) 100vw, 600px"></p>
<p>Isn’t it amazing that a country that’s merely a speck in ocean (10 sq miles to be exact) with nothing but hundreds of miles of water around it controls something so crucial to the internet world?! [via: Neeharika Palaka on <a href="mailto:http://www.quora.com/Neeharika-Palaka/answers?share=1">Quora</a> ]</p>


	</div><!-- .entry-content -->

<!--	<footer class="entry-footer">
		<span class="cat-links">Posted in <a href="https://factinator.com/category/read/" rel="category tag">Read Something</a></span><span class="tags-links">Tagged <a href="https://factinator.com/tag/facts/" rel="tag">facts</a>, <a href="https://factinator.com/tag/internet-facts/" rel="tag">internet facts</a>, <a href="https://factinator.com/tag/tuvalu-tv/" rel="tag">Tuvalu tv</a></span>	</footer>--><!-- .entry-footer -->
</article><!-- #post-14 -->

		
			
	
			
		

<ins data-ad-format="autorelaxed" data-ad-client="ca-pub-4948218261801237" data-ad-slot="8302572482"></ins>


			
                            
	
		</main><!-- #main -->
	</div><!-- #primary -->


<!-- #secondary -->
	</div><!-- #content -->
</div></div>]]>
            </description>
            <link>https://factinator.com/tuvalu-island/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23627010</guid>
            <pubDate>Wed, 24 Jun 2020 12:19:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Text-Only Websites]]>
            </title>
            <description>
<![CDATA[
Score 291 | Comments 113 (<a href="https://news.ycombinator.com/item?id=23626929">thread link</a>) | @lcnmrn
<br/>
June 24, 2020 | https://sjmulder.nl/en/textonly.html | <a href="https://web.archive.org/web/*/https://sjmulder.nl/en/textonly.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">

<p>By <a href="https://sjmulder.nl/en/">Sijmen J. Mulder</a></p>

<p>This is a directory of websites that <strong>primarily stick with
simple, marked up, hyperlinked text</strong>. I appreciate these sites
because they load quickly, scroll smoothly, spare my battery, are more
compact, and lack the usual nonsense that infects many websites.</p>

<p><small><sup>*</sup> not <em>quite</em> text-only, see preceding
parapgraph. See <a href="#notquite">Honorable mentions</a> below
for sites that aren't quite ‘text-only’ but lightweight
and worth visiting nonetheless.</small></p>

<h3>News</h3>

<ul>
  <li><a href="http://thin.npr.org/">NPR</a></li>
  <li><a href="http://lite.cnn.io/en">CNN</a></li>
  <li>
    <a href="https://www.csmonitor.com/layout/set/text/textedition">
      The Christian Science Monitor
    </a>
  </li>
  <li><a href="https://noslite.nl/">NOS</a> (Dutch)</li>
  <li><a href="https://legiblenews.com/">Legible News</a></li>
  <li><a href="https://lite.poandpo.com/">POST Online Media</a></li>
  <li><a href="https://www.ard-text.de/mobil/">ARD Teletext</a></li>
</ul>

<h3>Social</h3>

<ul>
  <li><a href="https://lobste.rs/">Lobsters</a></li>
  <li>
    <a href="https://rawtext.club/">rawtext.club</a>
    – “<em>Resist</em> the dazzling spectacle”
  </li>
</ul>

<h3>Technology</h3>

<ul>
  <li><a href="https://news.ycombinator.com/">Hacker News</a></li>
  <li>
    <a href="https://www.rfc-editor.org/rfc-index-100a.html">
      RFC index
    </a>
  </li>
  <li>
    <a href="https://www.freesoft.org/CIE/Topics/index.htm">Connected</a>,
    an internet encyclopedia.
  </li>
  <li>
    <a href="https://bearblog.dev/">Bear Blog</a>,
    text-first blogging platform
  </li>
  <li>
    <a href="https://mataroa.blog/">Mataroa blog</a>,
    another text-first blogging platform
  </li>
  <li>
    <a href="http://manpages.bsd.lv/index.html">Practical UNIX Manuals</a>,
    on <em>mdoc</em> and history
  </li>
</ul>

<h3>Blogs &amp; Personal</h3>

<ul>
  <li>
    <a href="http://idlewords.com/talks/">Maciej Cegłowski</a>
    (talks on various topics, not quite text only)
  </li>
  <li>
    <a href="http://sommarskog.se/">Erland Sommarskog</a> (mostly SQL)
  </li>
  <li>
    <a href="http://bactra.org/">Cosma's Home Page</a>
  </li>
  <li>
    <a href="http://blog.fefe.de/" hreflang="de">Fefes Blog</a>
    (German)
  </li>
  <li>
    <a href="https://gir.st/">Tobias Girstmair</a>,
    <a href="https://gir.st/blog">blog</a>
    (hardware &amp; software hacker)
  </li>
  <li>
    <a href="http://verisimilitudes.net/">verisimilitudes.net</a>
  </li>
  <li><a href="https://lukesmith.xyz/blogindex">Luke Smith</a></li>
  <li><a href="http://www.tomcooks.com/">Tom Cooks</a></li>
  <li><a href="http://danluu.com/">Dan Luu</a></li>
  <li>
    <a href="https://www.artemix.org/">Artemix</a>
    (back end and UX)
  </li>
  <li>
    <a href="https://idle.nprescott.com/">Nolan Prescott</a>,
    or “Idle Thoughts” (tech &amp; thinking)
  </li>
  <li>
    <a href="https://prog21.dadgum.com/">Programming in the Twenty-First Century</a>
  </li>
  <li>
     <a href="https://nullprogram.com/">null program</a>
     by Chris Wellons
  </li>
  <li>
    <a href="https://greghendershott.com/">Greg Hendershott</a>
    (mostly Racket)
  </li>
  <li><a href="https://terkel.com/">Terkel</a></li>
  <li><a href="https://brokensandals.net/">Jacob Williams</a></li>
  <li>
    <a href="http://www.jaruzel.com/">Jaruzel’s Home</a>
    of Retro and Other Curios
  </li>
  <li><a href="https://allstead.dev/">Willis Allstead</a></li>
  <li><a href="https://www.thomasjost.com/">Thomas Jost</a></li>
  <li><a href="https://wildauer.io/">Manuel Wildauer</a></li>
  <li>
    <a href="https://rgz.ee/">Roman Zolotarev</a>
    (<a href="https://www.openbsd.org/">OpenBSD</a> enthousiast)
  </li>
  <li>
    <a href="https://drewdevault.com/">Drew DeVault</a>,
    creator of <a href="https://sourcehut.org/">SourceHut</a>
  </li>
  <li>
    <a href="http://jrm4.com/">John R. Marks, IV</a>
    (created with <a href="http://zim-wiki.org/">Zim</a>)
  </li>
  <li>
    <a href="https://creativegood.com/">Creative Good</a>
    <span>– Since 1997</span>
  </li>
  <li><a href="https://patrickcollison.com/">Patrick Collison</a></li>
  <li><a href="http://eradman.com/">Eric Radman</a> (BSD &amp; SQL)</li>
</ul>

<h3>Music &amp; Podcasts</h3>

<ul>
  <li>
    <a href="https://vulfpeck.com/">Vulfpeck</a>,
    an American funk band
  </li>
  <li><a href="https://techtonic.fm/">Techtonic</a></li>
  <li><a href="https://19hz.info/">Electronic Music Calendars</a></li>
</ul>

<h3>Misc</h3>

<ul>
  <li>
    <a href="https://gopherpedia.com/">Gopherpedia</a>
    (<a href="https://en.wikipedia.org/wiki/Gopher_(protocol)">Gopher</a> interface to Wikipedia)
  </li>
  <li><a href="http://wttr.in/">wttr</a> (weather)</li>
  <li>
    <a href="http://rate.sx/">rate.sx</a>
    (crypto rates, same author)
  </li>
  <li>
    <a href="https://yarchive.net/">Usenet Archives</a>
    by Norman Yarvin
  </li>
  <li>
    <a href="https://every.sdf.org/">every.sdf.org</a>,
    a collection of plain-text files
  </li>
  <li><a href="https://www.craigslist.org/">Craigslist</a>
</li></ul>

<p>Please send me suggestions on <a href="mailto:ik@sjmulder.nl">ik@sjmulder.nl</a>.</p>

<p><a href="#top">Back to top</a></p>

<hr>

<h2 id="notquite">Honorable mentions</h2>

<p>Note quite as ‘text-only’ but lightweight and worth
visiting nonetheless!</p>

<h3>News</h3>

<ul>
  <li>
    <a href="https://readspike.com/">Readspike</a>
    "Simple news aggregator"
  </li>
  <li><a href="https://spidr.today/">Spidr</a> (aggregator)</li>
  <li>
    <a href="https://www.svt.se/svttext/web/pages/100.html">SVT Text</a>
    (Swedish teletext service)
  </li>
  <li><a href="https://radfi.com/">Radio Fidelity</a> (aggregator)</li>
</ul>

<h3>Social</h3>

<ul>
  <li>
    <a href="https://subreply.com/">Subreply</a>
    (social network)
  </li>
  <li>
    <a href="https://needgap.com/">Needgap</a>
    (“problem validation”)
  </li>
  <li>
    <a href="https://midnight.pub/">midnight</a>
    (“networked writing” platform)
  </li>
</ul>

<h3>Technology</h3>

<ul>
  <li>
    <a href="https://sourcehut.org/">SourceHut</a>
    (git, mailing lists, etc)
  </li>
  <li>
    <a href="https://archive.vn/">archive.today</a>
    (web archiving)
  </li>
</ul>

<h3>Blogs &amp; Personal</h3>

<ul>
  <li>
    <a href="https://engineeringblogs.xyz/">Engineering Blogs</a>,
    a curated collection
  </li>
  <li>
    <a href="http://lucumr.pocoo.org/">Armin Ronacher</a> (mostly Rust)
  </li>
  <li>
    <a href="https://www.gwern.net/">Gwern Branwen</a> (various topics)
  </li>
  <li>
    <a href="https://hugotunius.se/">Hugo Tunius</a> (programming)
  </li>
  <li><a href="https://usmanity.com/">Muhammad Usman</a></li>
  <li>
    <a href="https://sgolem.com/">Stjepan Golemac</a>
    (JS, React, Node, Rust)
  </li>
  <li>
    <a href="http://maddox.xmission.com/">”The Best Page in the Universe”</a>
  </li>
  <li><a href="https://lawzava.com/">Law Zava</a></li>
  <li><a href="https://hitstartup.com/">hitstartup</a></li>
  <li><a href="https://jvns.ca/">Julia Evans</a> (tech)</li>
  <li>
    <a href="https://wingolog.org/">Wingolog</a>
    (mostly functional programming)
  </li>
  <li>
    <a href="http://matt.might.net/">Matt Might</a>
    (medicine and computer science)
  </li>
  <li><a href="https://mnmlist.com/">mnmlist</a></li>
  <li>
    <a href="https://neil.computer/">Neil Panchal</a>
    – “quantum integrated circuits”!
  </li>
  <li>
    <a href="https://www.imperialviolet.org/">ImperialViolet</a>
    by adam Langley (mostly crypto)
  </li>
  <li><a href="https://sirodoht.com/">sirodoht</a></li>
  <li><a href="https://sheep.horse/">Andrew Stephens</a></li>
  <li><a href="https://fnune.com/">Fausto</a></li>
  <li>
    <a href="https://noncombatant.org/">Noncombatant</a>
    (tech, music, more)
  </li>
  <li>
    <a href="https://daringfireball.net/">Daring Fireball</a>
    (predominantly Apple)
  </li>
  <li>
    <a href="https://inessential.com/">Inessential</a>
    by Brent Simmons, author of NetNewsWire
  </li>
</ul>

<h3>Misc</h3>

<ul>
  <li>
    <a href="https://wiby.me/">Wiby</a>,
    a search engine for these kinds of sites
  </li>
  <li><a href="http://www.jimmyr.com/">JimmyR</a> (aggregator)</li>
  <li>
    <a href="http://amasci.com/">Science Hobbyist</a>
    (90s design warning!)
  </li>
  <li>
    <a href="https://tilde.pt/~fimdomeio/index2.html">Web 0.5</a>
    (only for text browsers!)
  </li>
  <li>
    <a href="http://gutenberg.net.au/">Project Gutenberg Australia</a>
  </li>
  <li>
    <a href="http://www.rowlingindex.org/">The J.K. Rowling Index</a>
  </li>
  <li><a href="https://copypastelist.com/">Copy Paste List</a></li>
</ul>

<p><a href="#top">Back to top</a></p>
</div>]]>
            </description>
            <link>https://sjmulder.nl/en/textonly.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23626929</guid>
            <pubDate>Wed, 24 Jun 2020 12:08:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Python should not be taught as a foundational language]]>
            </title>
            <description>
<![CDATA[
Score 16 | Comments 79 (<a href="https://news.ycombinator.com/item?id=23626768">thread link</a>) | @illuminated
<br/>
June 24, 2020 | https://thedropout.dev/why-python-should-not-be-taught-in-colleges/ | <a href="https://web.archive.org/web/*/https://thedropout.dev/why-python-should-not-be-taught-in-colleges/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://thedropout.dev/content/images/size/w300/2019/07/chris-ried-ieic5Tq8YMk-unsplash.jpg 300w,
                            https://thedropout.dev/content/images/size/w600/2019/07/chris-ried-ieic5Tq8YMk-unsplash.jpg 600w,
                            https://thedropout.dev/content/images/size/w1000/2019/07/chris-ried-ieic5Tq8YMk-unsplash.jpg 1000w,
                            https://thedropout.dev/content/images/size/w2000/2019/07/chris-ried-ieic5Tq8YMk-unsplash.jpg 2000w" sizes="(max-width: 800px) 400px,
                            (max-width: 1170px) 700px,
                            1400px" src="https://thedropout.dev/content/images/size/w2000/2019/07/chris-ried-ieic5Tq8YMk-unsplash.jpg" alt="Why Python should not be taught as a foundational language">
            </figure>

            <section>
                <div>
                    <p>Let me preface by adding "to Computer Science/Engineering majors". I think Python is a fine language and that it is very useful in a lot of situations, but I also think using Python as a foundational language is setting students up for a lot of unnecessary headache later on.</p><h3 id="syntax-and-semantics">Syntax and semantics</h3><p>My main gripe with Python is the syntax and semantics. Python looks something like this:</p><!--kg-card-begin: code--><pre><code>def some_func(var_one, var_two):
	for i in range(10):
    	num = i
    	print(i)
    # we can still see num here
    print(num)
    
some_func("thing1", "thing2")</code></pre><!--kg-card-end: code--><p>Right off the bat you should notice a few things, the lack of types, functional scope, and the lack of curly braces. The typing issue I can get over, Python is meant to be dynamically typed, and it is not as weird about it as <a href="https://thedropout.dev/javascript-the-bad-parts/">JavaScript is</a> and it recently added support for defining variable types in function parameters so it's OK in my book. </p><p>However Python does suffer from the same scoping issue as JavaScript, and scoping is done on a functional, rather than block, level. This can be confusing, especially since Python takes the insanity a step further and gets rid of the <code>var</code> ,<code>let</code> ,<code>const</code> keywords entirely, meaning there is not even a concept of a constant variable in Python. </p><p>Lastly, the most obvious difference from most languages you have likely seen is that there are no curly braces. This is because Python decided it would be a fun idea to govern blocks using whitespace, instead of wrapping everything in braces. In theory this might seem OK since you should already be properly indenting blocks of code, however in practice I find that it is much less legible and more kludgy to work with.</p><h3 id="naming-quirks">Naming Quirks</h3><p>Python also decided to go above and beyond and do things differently from most other languages. Part of this is the break from C-Style syntax, and they also name things differently. For instance, what is called an "Array" in pretty much every mainstream language, is instead called a "List" in Python. Key-Value stores that are usually called a "Map" or a "HashMap" are instead referred to as a "Dictionary".</p><h3 id="strings">Strings</h3><p>Then there are Strings, Strings in Python are horribly over-complicated. In most languages you have a <code>char</code> which is a single character, you can have a <code>char[]</code> or just an array of characters, and then a <code>String</code> that is usually some fancy wrapper around a regular <code>char[]</code>. When creating a string in most mainstream languages you can usually just do something along the lines of <code>var s = "string"</code> or for a <code>char</code> you usually use single quotes <code>var c = 'c'</code>. Python decided this was too simple and not specific enough. You can create a string the "normal" way, <code>s = "string"</code> or you can use single quotes <code>s = 'string'</code> or if you want a unicode string you would do <code>uni = u'unicode'</code> or you can craft a binary string <code>bin = b'some binary'</code>. You can also tell it directly what encoding you want to use, <code>utf = "some string".encode("utf-8")</code>. And you can also cast to string using <code>string = str("something")</code> because why not add another way to do things? Now I'm not saying its bad to specify what encoding you're using, but maybe if you could make it a bit more clear or use a syntax that is more common. </p><h3 id="version-split">Version split</h3><p>Another issue with Python is that it is essentially two different languages, there's Python 2.7 and Python 3+. Code written using Python &lt;= 2.7 will <em>sometimes </em>work on Python 3+, and code written using Python 3+ will <em>sometimes</em> work with Python &lt;= 2.7. This is because there were quite a few breaking changes introduced, that make many features that worked in 2.7, no longer work, or work differently in 3+. This as simple as the <code>print</code> function now work differently, for instance:</p><!--kg-card-begin: code--><pre><code>print 'Hello World'</code></pre><!--kg-card-end: code--><p>will work using Python &lt;= 2.7, however with Python 3+ this will raise a SyntaxError as you have to do</p><!--kg-card-begin: code--><pre><code>print('Hello World')</code></pre><!--kg-card-end: code--><p>Another popular feature in Python 2 was <code>xrange</code> which basically created an iterable object that is useful, and a bit quicker than <code>range</code>, in for loops. However, it was simply removed in Python 3. So, if I wanted to write the same code as above to be compatible for python 2.7, I would do something like this:</p><!--kg-card-begin: code--><pre><code>def some_func(var_one, var_two):
	for i in xrange(10):
    	num = i
    	print i
    # we can still see num here
    print num
    
some_func("thing1", "thing2")</code></pre><!--kg-card-end: code--><p>It is very common for languages to introduce new, backwards incompatible features. Especially with major revisions. However it is fairly uncommon to break so many widely used parts of the language that most code written before 3 simply cannot be run on the newer interpreter. The fact is that so much was broken that the community essentially split, and many people are staying on Python 2.7 as their libraries wont work on 3+ or they don't want to maintain 2 version of their codebase for backwards compatibility. This means that even though you are coding in 'Python', depending on which version you pick you are isolating yourself to a subset of the possible libraries or dependencies you can use. </p><p>All of these issues, and more, contribute to some serious headaches for new programmers. If you start by learning Python as a foundational language, when you inevitably switch to another language like C++ or Java, you have to learn an entire new vocabulary and grammar on top of the more difficult concepts as well. And Python's many quirks and irregularities don't make it the simplest language to learn from the get-go either.</p>
                </div>
            </section>

            <section>
                <h3>Subscribe to The Dropout Dev</h3>
                <p>Get the latest posts delivered right to your inbox</p>
                


            </section>

            

<!--            <section class="post-full-comments">-->
<!--                <div id="disqus_thread"></div>-->
<!--                <script>-->

<!--                    /**-->
<!--                     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.-->
<!--                     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/-->
<!--                    var disqus_config = function () {-->
<!--                    this.page.url = "https://thedropout.dev/why-python-should-not-be-taught-in-colleges/";  // Replace PAGE_URL with your page's canonical URL variable-->
<!--                    this.page.identifier = "ghost-5d1fc5f9114174269e1bf2b1"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable-->
<!--                    };-->
<!--                    (function() { // DON'T EDIT BELOW THIS LINE-->
<!--                        var d = document, s = d.createElement('script');-->
<!--                        s.src = 'https://the-dropout-dev.disqus.com/embed.js';-->
<!--                        s.setAttribute('data-timestamp', +new Date());-->
<!--                        (d.head || d.body).appendChild(s);-->
<!--                    })();-->
<!--                </script>-->
<!--                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>-->
<!--            </section>-->

        </article>

    </div>
</div></div>]]>
            </description>
            <link>https://thedropout.dev/why-python-should-not-be-taught-in-colleges/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23626768</guid>
            <pubDate>Wed, 24 Jun 2020 11:46:52 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[HEY Email is a niche offering masquerading as a category disruptor]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=23626542">thread link</a>) | @latc
<br/>
June 24, 2020 | https://4thquadrant.io/exclusive/hey-can-a-ui-ux-makeover-disrupt-the-free-email/ | <a href="https://web.archive.org/web/*/https://4thquadrant.io/exclusive/hey-can-a-ui-ux-makeover-disrupt-the-free-email/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-td-block-uid="tdi_29_695">

<div>
<div id="slimcalltoaction"><p>This is box title</p><p>All content, including this exclusive article, is free to access during the launch month of June. View our subscription options <a href="https://4thquadrant.io/subscribe">here.</a></p></div>



<p>HEY is the new email client pledging to make email great again, it’s landing page is an open letter detailing the failed state of current email services, naming Gmail, Yahoo, Outlook and Apple as the service providers that simply “let it happen”. Along with its ‘reinvention’ of email, HEY is also introducing a $99 annual subscription model – with 2 character emails costing up to $999 per user. Its justification for the pricing is that free email charges users in the form of data mining and advertising, acknowledging that while $99 is expensive for certain (developing) markets it is the price tag of a private, ad-free email space.&nbsp;</p>



<p>From the outset it’s obvious that HEY is targeted at a niche user base, the aim here isn’t to be a ‘fresh start’ for the hundreds of millions of people using free email at the moment. In fact moving away from a ubiquitous, free model toward a premium subscription model is akin to the friction of returning to SMS texting rather than Whatsapp or Messenger. HEY’s premium user experience is a product strategy used to target niche high-frequency users. While this limited user base is willing to move away from ingrained digital habits, the true disruption of email would require a widely accessible innovation of its core utility.</p>



<h3>Returning to the ‘wonder’ of emails: necessity or marketing</h3>



<p>UI/UX differentiation is a competitive method used to service saturated markets, it is targeted at carving out segments of the existing market rather than creating new demand. HEY is addressing the ‘experience problem’ of emails, hoping to make it more effective, personable and enjoyable. The idea is that email has devolved into a heap of spam and unwanted contact, becoming a chore to wade through. HEY’s vision statement implies that it wants to get back to the days when email used to be a “wonder”, tapping into the nostalgia of what snail-mail used to represent.&nbsp;</p>



<p>Let’s address this first: is email supposed to be enjoyable? Maybe at the outset it was a replication of snail mail, holiday cards from family or the primary way of keeping in contact with long-distance friends. While these are still things we treasure, social media, instant messaging and niche applications have replaced the need for email to serve this function. Email has very much become a practical function of our lives, aggregating bills and newsletters – that isn’t necessarily a ‘problem’.&nbsp;</p>



<h3>Converting free users into subscription users</h3>



<p>In a saturated market like email services, capturing a niche comes at the cost of servicing the masses. Where HEY cannot preserve its private and ad-free proposition while maintaining a free or even a more affordable subscription model, it opts to provide a premium service. A profit making alternative to the currently free email model is yet to emerge.&nbsp;</p>



<p>The conversion of free users into subscription users hinges on HEY’s ability to convince these users that its features are more value adding than the $99 fee. From the user’s end there is also the need to relearn email habits – even when these are seemingly more efficient habits, this is a big ask in the world of user services. This leaves HEY with access to a smaller set of users who are already looking to renovate their email habits – their marketing strategy needing to play a big role in expanding this user pool.</p>



<p>Hey is basically targeting two focus areas, improved user experience (ad-free, organisational features) and better privacy. These can act as two separate user desires, users may be drawn in on the premise of either or both. The privacy based niche is already being competed for by several contenders. HEY’s premium pricing might prompt users to opt for other privacy focused email services, free or subscription-based, like Protonmail or Fastmail. This makes HEY’s UI/UX offering all the more important, their one point of unique potential to win customer loyalty. Given that UI/UX improvements – no matter how great – are only marginal improvements in the eyes of the user (as opposed to product innovation) this strategy often falls back on aggressive marketing efforts.&nbsp;</p>



<p>In this scenario there are two ways that this business model can extract value:</p>



<ul><li>Subscription model that is more suitable for a niche market&nbsp;</li><li>Free service that banks on similar monetisation avenues available in the existing services&nbsp;</li></ul>



<p>UI/UX solutions for ubiquitous and free services tend to opt for a subscription-based offering as a form of capturing value, reaping the rewards of a more condensed user base and opting out of the tradeoffs necessary for disrupting the ubiquitous forms of use. However, a subscription model, as we discussed earlier, creates a ceiling on adoption – relegating it in the near term to a novel solution.</p>



<p>Regardless of speculation on the true motive behind it, HEY’s recent and very public dispute with Apple over its IOS App store listing was a boon for the product’s virality. HEY’s strategy initially started with an invite-only exclusive approach, but the apparent struggle with Apple has had much further reaching impact on product awareness. As HEY leans into the anti-big-tech narrative to leverage its marketing potential, it needs to tread carefully such that it doesn’t risk seeming intellectually dishonest – especially given that it is not providing a truly accessible alternative to the large email service providers it claims to be competing with.&nbsp;</p>



<p>HEY’s ability to retain users on the platform will become dependent on their ability to continue convincing users that there is value in the experience of an email – especially where functionality remains abundant on much larger competing platforms. HEY’s annual subscription is an intentional habit building funnel, user’s who subscribe will have a year to become familiar with – and hopefully attached to – the service’s features. Given that there is always the potential for habits to be transferred across platforms though, it will be imperative that HEY continues innovating its unique proposition.</p>



<p><span>Down the Rabbit Hole</span>
</p>



<h3>1. Red ocean traps demonstrate the pitfalls faced by founders attempting to find or create fertile grounds for products and services</h3>



<p>As market power increasingly moves from companies to consumers, competition intensifies. Long-term success will increasingly “depend on the ability to generate new demand and create and capture new markets.” “Red ocean traps” are pitfalls that hinder the creation or identification of new markets.</p>



<p>“We have come to think of them as red ocean traps, because they effectively anchor managers in red oceans—crowded market spaces where companies engage in bloody competition for market share—and prevent them from entering blue oceans, previously unknown and uncontested market spaces with ample potential.”</p>



<p>Red ocean traps confuse strategies for competitive advantages with creating new markets.</p>



<p><strong>Trap one: seeing market-creating strategies as customer-oriented approaches</strong></p>



<p>Focusing on existing customers keeps companies mired in red oceans.&nbsp;</p>



<p><strong>“</strong>an organization needs to turn its focus to noncustomers and why they refuse to patronize an industry’s offering. Noncustomers, not customers, hold the greatest insight into the points of pain and intimidation that limit the boundary of an industry.”</p>



<p><strong>Trap two: treating market-creating strategies as niche strategies</strong></p>



<p>Segmenting existing markets into finer segments to identify niches is not the same as creating new markets.</p>



<p>“Successful market-creating strategies don’t focus on finer segmentation. More often, they “desegment” markets by identifying key commonalities across buyer groups that could help generate broader demand.”</p>



<p><strong>Trap three: confusing technology innovation with market-creating strategies</strong></p>



<p>“Value innovation, not technology innovation, is what launches commercially compelling new markets. Successful new products or services open market spaces by offering a leap in productivity, simplicity, ease of use, convenience, fun, or environmental friendliness. But when companies mistakenly assume that market creation hinges on breakthrough technologies, their organizations tend to push for products or services that are too “out there,” too complicated, or, like the Segway, lacking a necessary ecosystem.“</p>



<p><strong>Trap four: equating creative destruction with market creation</strong></p>



<p>Creative destruction refers to a new invention replacing an existing product or technology. But creating new markets does not always require creative destruction.&nbsp;</p>



<p>“Many market-creating moves are nondestructive, because they offer solutions where none previously existed. We’ve also seen this happen with the social networking and crowdfunding industries. And even when a certain amount of destruction is involved in market creation, nondestructive creation is often a larger element than you might think. Nintendo’s Wii game player, for example, complemented more than replaced existing game systems, because it attracted younger children and older adults who hadn’t previously played video games.”</p>



<p><strong>Trap five: equating market-creating strategies with differentiation</strong></p>



<p>Differentiation is when a competitor stands out from the competition by providing premium value and the trade-off is higher costs for both the consumer and the competitor.</p>



<p>“In reality, a market-creating move breaks the value-cost trade-off. It is about pursuing differentiation and low cost simultaneously… A market-creating move is a “both-and,” not an “either-or,” strategy. …when companies mistakenly assume that market creation is synonymous with differentiation, they often focus on what to improve or create to stand apart and pay scant heed to what they can eliminate or reduce to simultaneously achieve low cost.”</p>



<p><strong>Trap six: equating market-creating strategies with low-cost strategies</strong></p>



<p>“This …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://4thquadrant.io/exclusive/hey-can-a-ui-ux-makeover-disrupt-the-free-email/">https://4thquadrant.io/exclusive/hey-can-a-ui-ux-makeover-disrupt-the-free-email/</a></em></p>]]>
            </description>
            <link>https://4thquadrant.io/exclusive/hey-can-a-ui-ux-makeover-disrupt-the-free-email/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23626542</guid>
            <pubDate>Wed, 24 Jun 2020 11:08:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Software Entropy]]>
            </title>
            <description>
<![CDATA[
Score 50 | Comments 17 (<a href="https://news.ycombinator.com/item?id=23626253">thread link</a>) | @1penny42cents
<br/>
June 24, 2020 | https://camhashemi.com/2020/06/23/software-entropy/ | <a href="https://web.archive.org/web/*/https://camhashemi.com/2020/06/23/software-entropy/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-195">
			<!-- .entry-header -->
		<div>
		
<h2>Defining Entropy</h2>



<p>Entropy is a measure of chaos, or disorder, in a system.</p>



<p>My college physics professor described entropy using two shoe closets.</p>



<p>Imagine a clean shoe closet, where all shoes are paired and sorted by color. The closet’s entropy is the total number of arrangements its shoes can have. A clean closet’s entropy is relatively small. There may be a few pairs of grey or blue shoes that can be switched around – but this doesn’t add much complexity. In a closet with low entropy, it’s easy to add or remove shoes from that closet as needed.</p>



<p>Now imagine a messy shoe closet. None of the shoes are paired, and they’re all tangled in a big pile. How many possible combinations can these shoes be in? You can quickly find out by trying to pull out the pair you want. The messy shoe closet has a much greater entropy than the clean one.</p>



<p>In short, we measure entropy by counting the number of possible states a system can be in. More states mean more entropy.</p>



<h2>Entropy in Software</h2>



<p>In software, our building blocks are simple enough for us to measure entropy in a crude way. Take this model for example:</p>


<pre title="">Transaction(
  createdAt: String
  buyerId: String,
  sellerId: String
  amount: Int
)
</pre>


<p>As simple as it seems, this model is like our messy shoe closet. There are many more ways for this model to be wrong than there are for it to be right. We can see that by comparing it to an organized shoe closet:</p>


<pre title="">Transaction(
  createdAt: DateTime,
  buyerId: UserId,
  sellerId: UserId,
  amount: Price
)
</pre>


<p>When `createdAt` was an arbitrary string, it could take on invalid values “foo” and “bar” just as easily as a valid value “06-23-2020”. There are many more possible states that the field can be in, and most of them are invalid. This choice of a broad data type allows chaos into our model. This unwanted chaos leads to misunderstandings, bugs, and wasted energy.</p>



<p>When each model is strongly typed to a strict set of values, this chaos is minimized. DateTime, UserId, and Price are typed such that all possible values are valid. Accordingly, these types are more predictable, easier to manipulate, and lead to less surprises in practice.</p>



<p>As in life, entropy is not all bad – some of it is desirable and some of it is not. In software, we need entropy to a certain extent: our code is valuable <em>because </em>it supports a variety of possible dates, users, and prices. But when this chaos grows beyond the value it adds, our software becomes painful to use and painful to maintain.</p>



<h2>Modeling Software Entropy</h2>



<p>Given our observations, we can describe a simple rule:</p>



<p><code>complexity = number of total possible states</code></p>



<p>A construct with only a few possible states is simple. Booleans and enums are much simpler than strings. A system with one moving piece is much simpler than a system with many moving pieces.</p>



<p>Sometimes, our problems are essentially complex. In these cases, our solutions need some essential complexity to match. But when does essential complexity become unnecessary? In these cases, we can use another rule:</p>



<p><code>cleanliness = number of <strong>valid</strong> possible states / number of <strong>total</strong> possible states</code></p>



<p>If there are thousands of total possible states, but only two of them are valid: it’s a messy solution. A simple example of this is representing a boolean value as a string.</p>


<pre title="">if value == "true": do this
else if value == "false": do that
else: throw error
</pre>


<p>There are many ways for this code to go wrong; not just in execution but also in interpretation. Keeping our solutions clean improves correctness, readability, and maintainability. It’s one of the primary measures of “quality” in my view.</p>



<h2>Minimizing Software Entropy</h2>



<p>Given these definitions, we can ask ourselves some questions to guide our software decisions:</p>



<ol><li>How many possible states does this solution have?</li><li>How many of those states are invalid?</li><li>Is there any way to make the solution simpler, by trimming the number of <em>total</em> possible states?</li><li>Is there any way to make the solution cleaner, by trimming the number of <em>invalid</em> possible states?</li></ol>



<p>The power of this concept is that it smoothly scales up and down the ladder of abstraction. It applies to basic data types just as well as it does to solution architecture and product development.</p>



<p>How many moving pieces does our solution need? When an unimaginable requirement flies in and tries to blow our solution to the ground, how many pieces can be left standing? When an unexpected input arrives, do invalid states propagate across the system, or are they contained and eliminated on sight? In short, how clean is our solution?</p>



<p>To make life possible, we utilize chaos by creating complex systems that support a diversity of people and their use cases. To make life predictable, we combat undesirable chaos by keeping those systems as clean and orderly as possible.</p>



<p>In software, we work in a world where chaos is measurable and cleanliness is achievable. We just need the right set of signals and responses to make it happen.</p>
			</div><!-- .entry-content -->

	<!-- .entry-footer -->
</article></div>]]>
            </description>
            <link>https://camhashemi.com/2020/06/23/software-entropy/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23626253</guid>
            <pubDate>Wed, 24 Jun 2020 10:20:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Empty Ubuntu to Live Reload: Haskell IHP Web Framework and Nix]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=23625978">thread link</a>) | @_query
<br/>
June 24, 2020 | https://codygman.dev/posts/2020-06-24-Haskell-IHP-Web-Framework-and-Nix.html | <a href="https://web.archive.org/web/*/https://codygman.dev/posts/2020-06-24-Haskell-IHP-Web-Framework-and-Nix.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
    
    <section>
        <p>I came across <a href="https://www.reddit.com/r/haskell/comments/hee4r4/ihp_is_a_modern_batteriesincluded_web_framework/">IHP is a modern batteries-included Web Framework, built on top of Haskell and Nix</a> today and being about web frameworks <em>and</em> nix it immediately caught my eye. I read the comments first, got mildly annoyed at the first comment being about “it’s nix only”, and kept scrolling until I saw a comment (you’ll see in the stream) that properly motivated me to actually read the link attached :D</p>
<p>I then resolved to stream playing around with this cool framework and also to do it from an ubuntu vm in virtualbox to show how seamless nix can make the setup (or can it?!?). Here’s a video of the stream in case you missed it:</p>
<center><iframe src="https://player.twitch.tv/?video=659859279&amp;parent=codygman.dev" frameborder="0" allowfullscreen="true" scrolling="no" height="378" width="620"></iframe></center>
<p>If this generates much interest, I’ll try doing a follow up soon where we get to the more complex pieces like adding custom Haskell packages (or even in Hackage or nixpkgs).</p>
    </section>
</article></div>]]>
            </description>
            <link>https://codygman.dev/posts/2020-06-24-Haskell-IHP-Web-Framework-and-Nix.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23625978</guid>
            <pubDate>Wed, 24 Jun 2020 09:40:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Improving API Performance with Telnet]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 1 (<a href="https://news.ycombinator.com/item?id=23625795">thread link</a>) | @tosh
<br/>
June 24, 2020 | https://blog.teller.io/2020/06/23/improving-api-performance-with-telnet.html | <a href="https://web.archive.org/web/*/https://blog.teller.io/2020/06/23/improving-api-performance-with-telnet.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><article><header><img src="https://blog.teller.io/images/authors/stevegraham.jpg"></header><p>As you may or may not know, banks do not generally provide third party developers with API access. This is because providing developers with easy API access to customer accounts means actual competition and ultimately compressed margins. In fairness to banks, building a new API channel costs a lot of money and if all it does is increase competitive pressure why would you spend any time or money on it? It's a rational response given their incentives.</p>

<p>Despite this people still want to connect their bank accounts to services they trust, and companies still want to build those services.</p>

<p>So, where does this leave us? Thankfully the market has stepped in to provide solutions that enable us all to connect trusted apps with our financial accounts, despite this banks still actively block third party access by blocking their traffic.</p>

<h2 id="all-ip-addresses-are-not-created-equal">All IP addresses are not created equal</h2>

<p>The way we have solved this is to route our financial institution traffic onto the public internet via mobile phone carrier networks.</p>

<p>The great thing about carrier IP ranges is that carriers have significantly more customers than they have IP addresses, meaning public internet breakout is heavily <a href="https://en.wikipedia.org/wiki/Network_address_translation">NAT</a>-ed, i.e. a single address is shared and used by many customers simultaneously. The other great thing is there is good chance you're on mobile data when you use your bank's mobile app and your IP address is in the carrier’s IP range.</p>

<p>By sending our traffic onto the internet using the same IP addresses shared by millions of a bank’s own customers using the bank’s mobile app, we both make it significantly more difficult to identify and subsequently block our traffic and we also increase the collateral damage of any hostile action a bank might take against us and our users, i.e. erroneously blocking their own customers using their mobile banking app.</p>

<svg width="405px" height="279px" viewBox="0 0 405 279" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 52.6 (67491) - http://www.bohemiancoding.com/sketch -->
    <title>Untitled 4</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="linearGradient-1">
            <stop stop-color="#FBFBFB" offset="0%"></stop>
            <stop stop-color="#FFFFFF" offset="100%"></stop>
        </linearGradient>
        <rect id="path-2" x="0" y="0" width="83" height="85" rx="11"></rect>
        <filter x="-6.0%" y="-4.7%" width="112.0%" height="111.8%" filterUnits="objectBoundingBox" id="filter-3">
            <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
            <feGaussianBlur stdDeviation="1.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>
        </filter>
        <rect id="path-4" x="0" y="0" width="83" height="85" rx="11"></rect>
        <filter x="-6.0%" y="-4.7%" width="112.0%" height="111.8%" filterUnits="objectBoundingBox" id="filter-5">
            <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
            <feGaussianBlur stdDeviation="1.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>
        </filter>
        <linearGradient x1="50%" y1="2.30762283%" x2="50%" y2="100%" id="linearGradient-6">
            <stop stop-color="#F4F4F4" offset="0%"></stop>
            <stop stop-color="#FFFFFF" offset="100%"></stop>
        </linearGradient>
        <rect id="path-7" x="0" y="0" width="83" height="85" rx="11"></rect>
        <filter x="-6.0%" y="-4.7%" width="112.0%" height="111.8%" filterUnits="objectBoundingBox" id="filter-8">
            <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
            <feGaussianBlur stdDeviation="1.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>
        </filter>
        <rect id="path-9" x="0" y="0" width="83" height="85" rx="11"></rect>
        <filter x="-6.0%" y="-4.7%" width="112.0%" height="111.8%" filterUnits="objectBoundingBox" id="filter-10">
            <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
            <feGaussianBlur stdDeviation="1.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>
        </filter>
    </defs>
    <g id="Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Direct" transform="translate(3.000000, 2.000000)">
            <g id="Teller">
                <g id="Rectangle">
                    <use fill="black" fill-opacity="1" filter="url(#filter-3)" xlink:href="#path-2"></use>
                    <use fill="url(#linearGradient-1)" fill-rule="evenodd" xlink:href="#path-2"></use>
                </g>
                <g id="logo-icon" transform="translate(19.462069, 19.931034)">
                    <path d="M14.8827586,31.6551724 L32.6275862,42.3854528 C29.5320561,44.1410729 25.9869012,45.137931 22.2194476,45.137931 C19.6460127,45.137931 17.1762988,44.6728122 14.8827586,43.8184589 L14.8827586,31.6551724 Z" id="Path" fill="#7985F2"></path>
                    <path d="M0,25.873964 L10.8758621,20.5172414 L10.8758621,42.2068966 C5.10335134,38.7926982 0.978977218,32.8443874 0,25.873964 Z" id="Path" fill="#F279D2"></path>
                    <path d="M0,21.6896552 C0.271210478,15.10675 3.30641844,9.24809514 7.95952004,5.27586207 L18.8896552,11.6748484 L11.488822,16.0076248 L0,21.6896552 Z" id="Path" fill="#F27979"></path>
                    <path d="M21.7854166,0 C24.5975441,0 27.2879935,0.532858373 29.7655172,1.5052445 L29.7655172,14.0689655 L10.8758621,2.91406436 C14.1003847,1.05844846 17.8220523,0 21.7854166,0 Z" id="Path" fill="#FFD780"></path>
                    <path d="M43.5034483,19.4519397 L33.2,25.2068966 L33.2,3.51724138 C38.6814991,6.95475181 42.5720341,12.7258567 43.5034483,19.4519397 Z" id="Path" fill="#91E673"></path>
                    <path d="M44.0758621,24.0344828 C43.7596445,30.6495208 40.6674041,36.5184923 35.9655559,40.4482759 L25.7586207,34.4203712 L44.0758621,24.0344828 Z" id="Path" fill="#79DEF2"></path>
                </g>
            </g>
            <g id="Bank" transform="translate(316.000000, 1.000000)">
                <g id="Rectangle">
                    <use fill="black" fill-opacity="1" filter="url(#filter-5)" xlink:href="#path-4"></use>
                    <use fill="url(#linearGradient-1)" fill-rule="evenodd" xlink:href="#path-4"></use>
                </g>
                <text id="🏦" font-family="AppleColorEmoji, Apple Color Emoji" font-size="42" font-weight="normal" fill="#616161">
                    <tspan x="21" y="56">🏦</tspan>
                </text>
            </g>
            <path d="M84.5,43.4482759 L310,43.4482759" id="Line" stroke="#DC6F6F" stroke-width="3" stroke-linecap="square"></path>
            <polygon id="Triangle" fill="#DC6F6F" transform="translate(307.000000, 43.000000) rotate(-270.000000) translate(-307.000000, -43.000000) " points="307 35 315 51 299 51"></polygon>
            <text id="😤" font-family="AppleColorEmoji, Apple Color Emoji" font-size="30" font-weight="normal" fill="#616161">
                <tspan x="306" y="92">😤</tspan>
            </text>
            <path d="M183,57.9974594 C182.925417,57.9991501 182.850628,58 182.775641,58 C177.376704,58 173,53.5942914 173,48.1595745 C173,42.7248575 177.376704,38.3191489 182.775641,38.3191489 C182.918809,38.3191489 183.061258,38.322247 183.202926,38.3283802 C183.803357,28.6569802 191.785809,21 201.544872,21 C208.207767,21 214.042526,24.5691708 217.265242,29.9117828 C218.12594,29.7462314 219.014455,29.6595745 219.923077,29.6595745 C227.697547,29.6595745 234,36.0037948 234,43.8297872 C234,51.6557796 227.697547,58 219.923077,58 C219.270736,58 218.628759,57.9553331 218,57.8688719 L218,58 L183,58 L183,57.9974594 Z" id="Cloud" stroke="#979797" stroke-width="3" fill="url(#linearGradient-6)"></path>
            <text id="Cloud-traffic-is-eas" font-family="HelveticaNeue, Helvetica Neue" font-size="14" font-weight="normal" fill="#2D2D2D">
                <tspan x="38.278" y="117.551724">Cloud traffic is easily detectable and trivial to block</tspan>
            </text>
        </g>
        <g id="Telnet" transform="translate(3.000000, 158.000000)">
            <g id="Teller">
                <g id="Rectangle">
                    <use fill="black" fill-opacity="1" filter="url(#filter-8)" xlink:href="#path-7"></use>
                    <use fill="url(#linearGradient-1)" fill-rule="evenodd" xlink:href="#path-7"></use>
                </g>
                <g id="logo-icon" transform="translate(19.462069, 19.931034)">
                    <path d="M14.8827586,31.6551724 L32.6275862,42.3854528 C29.5320561,44.1410729 25.9869012,45.137931 22.2194476,45.137931 C19.6460127,45.137931 17.1762988,44.6728122 14.8827586,43.8184589 L14.8827586,31.6551724 Z" id="Path" fill="#7985F2"></path>
                    <path d="M0,25.873964 L10.8758621,20.5172414 L10.8758621,42.2068966 C5.10335134,38.7926982 0.978977218,32.8443874 0,25.873964 Z" id="Path" fill="#F279D2"></path>
                    <path d="M0,21.6896552 C0.271210478,15.10675 3.30641844,9.24809514 7.95952004,5.27586207 L18.8896552,11.6748484 L11.488822,16.0076248 L0,21.6896552 Z" id="Path" fill="#F27979"></path>
                    <path d="M21.7854166,0 C24.5975441,0 27.2879935,0.532858373 29.7655172,1.5052445 L29.7655172,14.0689655 L10.8758621,2.91406436 C14.1003847,1.05844846 17.8220523,0 21.7854166,0 Z" id="Path" fill="#FFD780"></path>
                    <path d="M43.5034483,19.4519397 L33.2,25.2068966 L33.2,3.51724138 C38.6814991,6.95475181 42.5720341,12.7258567 43.5034483,19.4519397 Z" id="Path" fill="#91E673"></path>
                    <path d="M44.0758621,24.0344828 C43.7596445,30.6495208 40.6674041,36.5184923 35.9655559,40.4482759 L25.7586207,34.4203712 L44.0758621,24.0344828 Z" id="Path" fill="#79DEF2"></path>
                </g>
            </g>
            <g id="Bank" transform="translate(316.000000, 1.000000)">
                <g id="Rectangle">
                    <use fill="black" fill-opacity="1" filter="url(#filter-10)" xlink:href="#path-9"></use>
                    <use fill="url(#linearGradient-1)" fill-rule="evenodd" xlink:href="#path-9"></use>
                </g>
                <text id="🏦" font-family="AppleColorEmoji, Apple Color Emoji" font-size="42" font-weight="normal" fill="#616161">
                    <tspan x="21" y="56">🏦</tspan>
                </text>
            </g>
            <path d="M84.5,43.4482759 L310,43.4482759" id="Line" stroke="#9EDC6F" stroke-width="3" fill="#9EDC6F" stroke-linecap="square"></path>
            <polygon id="Triangle" fill="#9EDC6F" transform="translate(307.000000, 43.000000) rotate(-270.000000) translate(-307.000000, -43.000000) " points="307 35 315 51 299 51"></polygon>
            <text id="📱" font-family="AppleColorEmoji, Apple Color Emoji" font-size="45" font-weight="normal" fill="#616161">
                <tspan x="178" y="61">📱</tspan>
            </text>
            <text id="😌" font-family="AppleColorEmoji, Apple Color Emoji" font-size="30" font-weight="normal" fill="#616161">
                <tspan x="306" y="92">😌</tspan>
            </text>
            <text id="Traffic-routed-via-c" font-family="HelveticaNeue, Helvetica Neue" font-size="14" font-weight="normal" fill="#2D2D2D">
                <tspan x="5.728" y="117.551724">Traffic routed via carrier networks passes through undetected</tspan>
            </text>
        </g>
    </g>
</svg>

<p>Until recently we used a third party provider for mobile carrier network transit, but suddenly without warning their performance and availabilty degraded to unacceptable levels. Requests occasionally took 20-30 seconds to complete. A single Teller API transaction might actually involve several requests to the financial institution, and even if we can parallelize some of these it's a disaster for us if any of them take 30 seconds.</p>

<p>Teller provides live access to financial accounts. <strong>When you request an account balance, Teller synchronously fetches that data live from the financial institition and returns it to you</strong>. Fast and reliable network access is an absolute must in order for us to provide that level of access. Other providers can get away with lesser network performance because they don't actually ever return live data in an API call. They periodically poll the institution a couple of times a day, and give you the most recent data they have when you make your API call.</p>

<p>We immediately began to design and build an in house solution to solve this problem once and for all.</p>

<h2 id="introducing-telnet">Introducing Telnet</h2>

<p>Telnet is our propietary mobile carrier proxy network. The name is a portmanteau of Teller Network, but if we're honest it began as an internal joke as it's built on top of <a href="https://en.wikipedia.org/wiki/Secure_Shell">SSH</a>, the remote access protocol that obsoleted the original <a href="https://en.wikipedia.org/wiki/Telnet">Telnet</a>.</p>

<p>Telnet is composed of a large number of edge nodes, which are single board Linux computers with LTE modems attached running our own software written using <a href="https://www.nerves-project.org/">Nerves</a>. When nodes boot they reverse SSH into our network and register themselves as available to route API traffic. Our infrastructure then routes our financial institution traffic via our Telnet edge nodes, egressing onto the internet on carrier IP ranges.</p>

<svg width="362px" height="360px" viewBox="0 0 362 360" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 52.6 (67491) - http://www.bohemiancoding.com/sketch -->
    <title>Graph</title>
    <desc>Created with Sketch.</desc>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Graph" transform="translate(1.000000, -3.000000)">
            <g id="Vendor" transform="translate(16.000000, 39.000000)">
                <text id="Vendor-A" font-family="HelveticaNeue, Helvetica Neue" font-size="14" font-weight="normal" fill="#616161">
                    <tspan x="21" y="323">Vendor A</tspan>
                </text>
                <rect id="Rectangle" fill="#DDE8FF" x="0" y="0" width="100" height="300"></rect>
            </g>
            <g id="Telnet" transform="translate(129.000000, 312.000000)">
                <text font-family="HelveticaNeue, Helvetica Neue" font-size="14" font-weight="normal" fill="#616161">
                    <tspan x="32" y="50">Telnet</tspan>
                </text>
                <rect id="Rectangle" fill="#DDE8FF" x="0" y="0" width="100" height="27"></rect>
            </g>
            <g id="Direct" transform="translate(242.000000, 327.000000)">
                <text font-family="HelveticaNeue, Helvetica Neue" font-size="14" font-weight="normal" fill="#616161">
                    <tspan x="32" y="35">Direct</tspan>
                </text>
                <rect id="Rectangle" fill="#DDE8FF" x="0" y="0" width="100" height="12"></rect>
            </g>
            <g id="Axes" transform="translate(0.000000, 36.000000)" stroke="#979797" stroke-linecap="square" stroke-width="3">
                <path d="M0.5,0.5 L0.5,302.5" id="Line"></path>
                <path d="M0.5,302.5 L359.100943,302.5" id="Line-2"></path>
            </g>
            <text id="Request-latency" font-family="HelveticaNeue, Helvetica Neue" font-size="14" font-weight="normal" fill="#2D2D2D">
                <tspan x="130.065" y="13">Request latency</tspan>
            </text>
        </g>
    </g>
</svg>

<p><strong>It works amazingly well</strong>. We have not only cut the latency overhead to the bone, according to our logs requests failing due to proxy errors have become a thing of the past too.</p>

<p>Credit goes to the team for shipping this so quickly. They went from bare git repo to production deployment of a fleet of embedded devices with OTA software updates in weeks. I'm very proud of them.</p>

<p>Follow <a href="https://twitter.com/tellerapi">@tellerapi</a> for a future blog post on how we built Telnet.</p>

<p>Think this is cool? <a href="https://jobs.lever.co/teller">We're hiring</a>.</p>
</article></div></div>]]>
            </description>
            <link>https://blog.teller.io/2020/06/23/improving-api-performance-with-telnet.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-23625795</guid>
            <pubDate>Wed, 24 Jun 2020 09:08:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Don’t Fly During Ramadan (2013)]]>
            </title>
            <description>
<![CDATA[
Score 172 | Comments 101 (<a href="https://news.ycombinator.com/item?id=23625215">thread link</a>) | @luu
<br/>
June 24, 2020 | https://adityamukerjee.net/2013/08/22/dont-fly-during-ramadan/ | <a href="https://web.archive.org/web/*/https://adityamukerjee.net/2013/08/22/dont-fly-during-ramadan/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p>A couple of weeks ago, I was scheduled to take a trip from New York (JFK) to Los Angeles on JetBlue. Every year, my family goes on a one-week pilgrimage, where we put our work on hold and spend time visiting temples, praying, and spending time with family and friends. To my Jewish friends, I often explain this trip as vaguely similar to the <a href="https://en.wikipedia.org/wiki/Sabbath" target="_blank" rel="noopener">Sabbath</a>, except we take one week of rest per year, rather than one day per week.</p>
<p>Our family is not Muslim, but by coincidence, this year, our trip happened to be during the last week of <a href="https://en.wikipedia.org/wiki/Ramadan" target="_blank" rel="noopener">Ramadan</a>.</p>
<p>By further coincidence, this was <em>also</em> the same week that I was moving out of my employer-provided temporary housing (at NYU) and moving into my new apartment. The night before my trip, I enlisted the help of two friends and we took most of my belongings, in a couple of suitcases, to my new apartment. The apartment was almost completely unfurnished – I planned on getting new furniture upon my return – so I dropped my few bags (one containing an air mattress) in the corner. Even though I hadn’t decorated the apartment yet, in accordance with Hindu custom, I taped a single photograph to the wall in my bedroom — a long-haired saint with his hands outstretched in <em><a href="https://www.google.com/search?q=pronam&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ei=fR8WUre0GIG28wSH94DwCw&amp;ved=0CAcQ_AUoAQ&amp;biw=1046&amp;bih=733" target="_blank" rel="noopener">pronam</a></em> (a sign of reverence and respect).</p>
<p>The next morning, I packed the rest of my clothes into a suitcase and took a cab to the airport. I didn’t bother to eat breakfast, figuring I would grab some yogurt in the terminal while waiting to board.</p>
<p>I got in line for security at the airport and handed the agent my ID. Another agent came over and handed me a paper slip, which he said was being used to track the length of the security lines. He said, “just hand this to someone when your stuff goes through the x-ray machines, and we’ll know how long you were in line.’ I looked at the timestamp on the paper: 10:40.</p>
<p>When going through the security line, I opted out (as I always used to) of the millimeter wave detectors. I fly often enough, and have opted out often enough, that I was prepared for what comes next: a firm pat-down by a TSA employee wearing non-latex gloves, who uses the back of his hand when patting down the inside of the thighs.</p>
<p>After the pat-down, the TSA agent swabbed his hands with some cotton-like material and put the swab in the machine that supposedly checks for explosive residue. The machine beeped. “We’re going to need to pat you down again, this time in private,” the agent said.</p>
<p>Having been selected before for so-called “random” checks, I assumed that this was another such check.</p>
<p>“What do you mean, ‘in private’? Can’t we just do this out here?”</p>
<p>“No, this is a different kind of pat-down, and we can’t do that in public.” When I asked him why this pat-down was different, he wouldn’t tell me. When I asked him specifically why he couldn’t do it in public, he said “Because it would be obscene.”</p>
<p>Naturally, I balked at the thought of going somewhere behind closed doors where a person I just met was going to touch me in “obscene” ways. I didn’t know at the time (and the agent never bothered to tell me) that the TSA has a policy that requires two agents to be present during every private pat-down. I’m not sure if that would make me feel more or less comfortable.</p>
<p>Noticing my hesitation, the agent offered to have his supervisor explain the procedure in more detail. He brought over his supervisor, a rather harried man who, instead of explaining the pat-down to me, rather rudely explained to me that I could either submit immediately to a pat-down behind closed-doors, or he could call the police.</p>
<p>At this point, I didn’t mind having to leave the secure area and go back through security again (this time not opting out of the machines), but I didn’t particularly want to get the cops involved. I told him, “Okay, fine, I’ll leave”.</p>
<p>“You can’t leave here.”</p>
<p>“Are you detaining me, then?” I’ve been through enough “<a href="https://www.flexyourrights.org/" target="_blank" rel="noopener">know your rights</a>” training to know how to handle police searches; however, TSA agents are not law enforcement officials. Technically, they don’t even have the right to detain you against your will.</p>
<p>“We’re not detaining you. You just can’t leave.” My jaw dropped.</p>
<p>“Either you’re detaining me, or I’m free to go. Which one is it?” I asked.</p>
<p>He glanced for a moment at my backpack, then snatched it out of the conveyor belt. “Okay,” he said. “You can leave, but I’m keeping your bag.”</p>
<p>I was speechless. My bag had both my work computer and my personal computer in it. The only way for me to get it back from him would be to snatch it back, at which point he could simply claim that I had assaulted him. I was trapped.</p>
<p>While we waited for the police to arrive, I took my phone and quickly tried to call my parents to let them know what was happening. Unfortunately, my mom’s voicemail was full, and my dad had never even set his up.</p>
<p>“Hey, what’s he doing?” One of the TSA agents had noticed I was touching my phone.<br>
“It’s probably fine; he’s leaving anyway,” another said.</p>
<p>The cops arrived a few minutes later, spoke with the TSA agents for a moment, and then came over and gave me one last chance to submit to the private examination. “Otherwise, we have to escort you out of the building.” I asked him if he could be present while the TSA agent was patting me down.</p>
<p>“No,” he explained, “because when we pat people down, it’s to lock them up.”</p>
<p>I only realized the significance of that explanation later. At this point, I didn’t particularly want to miss my flight. Foolishly, I said, “Fine, I’ll do it.”</p>
<p>The TSA agents and police escorted me to a holding room, where they patted me down again – this time using the front of their hands as they passed down the front of my pants. While they patted me down, they asked me some basic questions.</p>
<p>“What’s the purpose of your travel?”</p>
<p>“Personal,” I responded, (as opposed to business).</p>
<p>“Are you traveling with anybody?”</p>
<p>“My parents are on their way to LA right now; I’m meeting them there.”</p>
<p>“How long is your trip?”</p>
<p>“Ten days.”</p>
<p>“What will you be doing?”</p>
<p>Mentally, I sighed. There wasn’t any other way I could answer this next question.</p>
<p>“We’ll be visiting some temples.” He raised his eyebrow, and I explained that the next week was a religious holiday, and that I was traveling to LA to observe it with my family.</p>
<p>After patting me down, they swabbed not only their hands, but also my backpack, shoes, wallet, and belongings, and then walked out of the room to put it through the machine again. After more than five minutes, I started to wonder why they hadn’t said anything, so I asked the police officer who was guarding the door. He called over the TSA agent, who told me,</p>
<p>“You’re still setting off the alarm. We need to call the explosives specialist”.</p>
<p>I waited for about ten minutes before the specialist showed up. He walked in without a word, grabbed the bins with my possessions, and started to leave. Unlike the other agents I’d seen, he wasn’t wearing a uniform, so I was a bit taken aback.</p>
<p>“What’s happening?” I asked.</p>
<p>“I’m running it through the x-ray again,” he snapped. “Because I can. And I’m going to do it again, and again, until I decide I’m done”. He then asked the TSA agents whether they had patted me down. They said they had, and he just said, “Well, try again”, and left the room. Again I was told to stand with my legs apart and my hands extended horizontally while they patted me down all over before stepping outside.</p>
<p>The explosives specialist walked back into the room and asked me why my clothes were testing positive for explosives. I told him, quite truthfully, “I don’t know.” He asked me what I had done earlier in the day.</p>
<p>“Well, I had to pack my suitcase, and also clean my apartment.”</p>
<p>“And yesterday?”</p>
<p>“I moved my stuff from my old apartment to my new one”.</p>
<p>“What did you eat this morning?”</p>
<p>“Nothing,” I said. Only later did I realize that this made it sound like I was fasting, when in reality, I just hadn’t had breakfast yet.</p>
<p>“Are you taking any medications?”</p>
<p>The other TSA agents stood and listened while the explosives specialist and asked every medication I had taken “recently”, both prescription and over-the-counter, and asked me to explain any medical conditions for which any prescription medicine had been prescribed. Even though I wasn’t carrying any medication on me, he still asked for my complete “recent” medical history.</p>
<p>“What have you touched that would cause you to test positive for certain explosives?”</p>
<p>“I can’t think of anything. What does it say is triggering the alarm?” I asked.</p>
<p>“I’m not going to tell you! It’s right here on my sheet, but I don’t have to tell you what it is!” he exclaimed, pointing at his clipboard.</p>
<p>I was at a loss for words. The first thing that came to my mind was, “Well, I haven’t touched any explosives, but if I don’t even know what chemical we’re talking about, I don’t know how to figure out why the tests are picking it up.”</p>
<p>He didn’t like this answer, so he told them to run my belongings through the x-ray machine and pat me down again, then left the room.</p>
<p>I glanced at my watch. Boarding would start in fifteen minutes, and I hadn’t even had anything to eat. A TSA officer in the room noticed me craning my neck to look at my watch on the table, and he said, “Don’t worry, they’ll hold the flight.”</p>
<p>As they patted me down for the fourth time, a female TSA agent asked me for my baggage claim ticket. I handed it to her, and she told me that a woman from JetBlue corporate security needed to ask me some questions as well. I was a bit surprised, but agreed. After the pat-down, the JetBlue representative walked in and cooly introduced herself by name.</p>
<p>She explained, “We have some questions for you to determine whether or not you’re permitted to fly today. Have you flown on JetBlue before?”</p>
<p>“Yes”</p>
<p>“How often?”</p>
<p>“Maybe about ten times,” I guessed.</p>
<p>“Ten what? Per month?”</p>
<p>“No, ten times total.”</p>
<p>She paused, then asked,</p>
<p>“Will you have any trouble following the instructions of the crew and flight attendants on board the flight?”</p>
<p>“No.” I had no idea why this would even be in doubt.</p>
<p>“We have some female …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://adityamukerjee.net/2013/08/22/dont-fly-during-ramadan/">https://adityamukerjee.net/2013/08/22/dont-fly-during-ramadan/</a></em></p>]]>
            </description>
            <link>https://adityamukerjee.net/2013/08/22/dont-fly-during-ramadan/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23625215</guid>
            <pubDate>Wed, 24 Jun 2020 07:43:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Good Ideas, Through the Looking Glass  (2005) [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 14 | Comments 1 (<a href="https://news.ycombinator.com/item?id=23624575">thread link</a>) | @peter_d_sherman
<br/>
June 23, 2020 | https://people.inf.ethz.ch/wirth/Articles/GoodIdeas_origFig.pdf | <a href="https://web.archive.org/web/*/https://people.inf.ethz.ch/wirth/Articles/GoodIdeas_origFig.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://people.inf.ethz.ch/wirth/Articles/GoodIdeas_origFig.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-23624575</guid>
            <pubDate>Wed, 24 Jun 2020 05:58:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Staring into the COM Abyss]]>
            </title>
            <description>
<![CDATA[
Score 76 | Comments 66 (<a href="https://news.ycombinator.com/item?id=23623994">thread link</a>) | @todsacerdoti
<br/>
June 23, 2020 | https://cmpct.info/~calvin/Articles/COMAbyss/ | <a href="https://web.archive.org/web/*/https://cmpct.info/~calvin/Articles/COMAbyss/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
		
		<p>
			If you're aware of how software is developed on Windows, chances are you're eventually going to run into COM. While Windows exposes some simple C APIs (and these APIs were much better than its contemporaries like Toolbox, X, or Intuition), pretty much anything more complex than USER32 is exposed through COM interfaces, from Internet Explorer to DirectX. COM is also used to <em>extend</em> applications too: Office, Visual Studio, even the Windows shell provide COM interfaces to applications to hook into. Microsoft loves using COM for everything in Windows, even if third-parties don't like it as much (Usually, out of portability/complexity reasons.). Using COM to its full extent can <a href="https://www.joelonsoftware.com/2009/09/23/the-duct-tape-programmer/">make your application 34% sparklier</a>, but it's a lot of work to properly use those interfaces (and there's a lot of them!).
		</p>
		<p>
			Unfortunately not many were able to take advantage of COM, let alone in more obscure scenarios such as extending the shell. The people who could do so were quite rare, as Spolsky pointed out. Naturally, I was <a href="https://xkcd.com/356/">nerd sniped</a> by a friend to write a <a href="https://docs.microsoft.com/en-us/windows/win32/shell/nse-works">shell namespace extension</a>, one of the more obscure (little documentation, few did it, few know they exist) categories of COM extension. A shell namespace extension adds a "namespace" (basically virtual folder) to the shell, which has further objects represented in it. Common use cases for them include MTP for phones, inline ZIP file viewing, etc.
		</p>
		<p>
			My extension was simple enough I thought I could implement it (and I did... with difficulty, as you'll see) myself. It would enumerate all the open Windows Explorer windows, and put links to them in a namespace. The point of this is that this was accessible from the stock system file dialogs, which is useful if you have a bunch of Explorer windows open, but want to save to one of them quickly. This was inspired by an OS/2 Workplace Shell feature (the one good feature of OS/2!). The challenge was going from a bare minimum knowledge of COM to knowing just enough to be <del>dangerous</del> able to make a shell namespace extension that works.
		</p>
		<img src="https://cmpct.info/~calvin/Articles/COMAbyss/os2-version.jpg" alt="The OS/2 feature" title="The OS/2 feature">
		<h2>A Brief Primer on COM</h2>
		<p>
			For something with a near-legendary reputation of complexity, it turns out COM is actually based on some very simple primitives. COM is based on interfaces (in the C++ manner) that implement vtables (a structure full of functions). These interfaces have a fixed shape, so they can be used from C. Every COM class implements the interface <code>IUnknown</code>, which implements three functions:
		</p>
		<ul>
			<li><code>AddRef</code>, which increments the reference count. Every COM object is reference counted, so you'll use this when you make a copy of a held-on reference.</li>
			<li><code>Release</code>, which decrements the reference count. The object frees itself when the count hits zero.</li>
			<li><code>QueryInterface</code>, which gives you the vtable of another interface if the object implements it (casting). The interfaces are identified by a GUID.</li>
		</ul>
		<p>
			This isn't so bad. Of course, objects can implement a <em>lot</em> of interfaces, and because interfaces have a fixed shape, to extend an interface later, you have to create another interface. Microsoft ends up numbering them, so you get into situations where you have an <a href="https://docs.microsoft.com/en-us/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishellfolder2"><code>IShellFolder2</code></a>. And as Microsoft implements more features that require more interfaces, a class can get unwieldy if you're not careful. And then you have to assume the interfaces are well documented! And for extensibility, debugging isn't (as far as I'm aware) very great beyond printf macros.
		</p>
		<p>
			COM classes are registered (that's what REGSVR32 is for), where they become known by other applications. A <a href="https://docs.microsoft.com/en-us/windows/win32/midl/com-dcom-and-type-libraries">type library</a> provides metadata, and is usually generated by an IDL file.
		</p>
		<p>
			While you can use COM from C, it can get a bit unwieldy, because COM benefits from an environment of RAII and scoped destructors. ATL provides a template-based wrapper around COM for C++, and is what Microsoft recommends for COM development. Visual Studio greatly assists in terms of generating the boilerplate for categories of COM classes.
		</p>
		<h2>Do You Eat Your Burgers With or Without the Shell?</h2>
		<p>
			The beautiful part of Windows is how extensible it is. The ugly part of Windows is how no one can extend it properly. Trying to write a shell namespace extension from scratch is a Sisyphean endeavour. I don't think anyone's done it. Instead, you have to do things like your average Windows programmer in 2002 would have done - read someone much smarter than you's <a href="https://www.codeproject.com/Articles/1649/The-Complete-Idiot-s-Guide-to-Writing-Namespace-Ex">article on CodeProject</a>, the site people copied and pasted from <em>before</em> Stack Overflow. His examples are helpful, but they have a critical flaw - they implement the list view on their own, instead of delegating out to the interface which handles using the stock one and its default behaviours for you. (For example, the example will crash on XP and newer because it doesn't handle the new ListView views.) Insightful, but back to the drawing board.
		</p>
		<p>
			Round two. The <a href="https://www.codeproject.com/Articles/7973/An-almost-complete-Namespace-Extension-Sample">example by Pascal Hurni</a> is while slightly rougher, closer to what we want. His example uses the system ShellView, which gives you default behaviours and the ability to use it from a stock file dialog, which is what we want. The example enumerates through the registry (specifically, favourites for the file manager <a href="https://www.gpsoft.com.au/">Directory Opus</a>) and represents real filesystem entities, which is close to what we want - just swap out the enumerator.
		</p>
		<p>
			I took some code I wrote for experimenting with actually listing Explorer windows. First I thought I'd have to enumerate all visible windows and filter on <code>CabinetWClass</code>, then figure out what messages to send to it in order to get useful information out, but it turns out an easier way was possible through COM. You create an instance of <code>IShellWindows</code>, then call <code>get_Count</code> and <code>Item</code>, which returns an <code>IDispatch</code> representing your window. <code>IDispatch</code> is essentially <code>IUnknown</code> with reflection, intended for situations like VBA where you want to enumerate methods and properties. We can cast it to an <code>IWebBrowser</code> (a remnant of when Internet Explorer and Windows Explorer were welded together), and get the location from there. Grafting it onto Pascal's example (and ripping out what code I didn't need for clarity), I had a working MVP (with bugs, of course)
		</p>
		<img src="https://cmpct.info/~calvin/Articles/COMAbyss/explorer-windows.png" alt="Windows XP, opened Explorer windows" title="Windows XP, opened Explorer windows">
		<h2>PIDLy Details</h2>
		<p>
			I <del>cargo-culted (first step of learning)</del> learned some things about the shell, and there's still a lot more I don't know about. Tip of the iceberg as follows:
		</p>
		<ul>
			<li>A PIDL is basically an ID used by Explorer to represent items, since entities may not have real FS representation. A PIDL is basically a free-form struct that has what you want tagged with its size, and what your NSE will use to identify items. They can be absolute or relative (where it only matters to you), like a path.</li>
			<li>It likes to request wrapped PIDLs in the form of <code>IDataObject</code>, one of those can-contain-anything OLE structures usually used for the clipboard.</li>
			<li>Namespaces can be registered at a <em>junction point</em>, which makes it accessible from places other than making a shortcut to its CLSID (GUID). There's also some ceremony in registering the namespace at all; there's a registry resource script that gets called whenever the DLL is registered to make it easier. Some information on creating namespaces (but from a customizer's perspective, so pointing it at existing locations) and making it known in places is available <a href="http://virtualplastic.net/html/ui_shell.html">here</a>.</li>
			<li>Some software (cough, Office) requires an NSE represent a real location before it'll show it. The example works around this by using the temporary directory as a physical manifestation. This can result in weird behaviour, but it's the price to pay to have it work.</li>
			<li>Late in XP's lifecycle and especially Vista, Microsoft extended the column scheme to have property keys. These represent metadata more faithfully, can be extended, and is actively used for search. Namespace extensions can of course, implement these. However, it's not clear on what's the bare minimum you implement to get things like tile view subtitles working. You're almost led to believe you need an <code>IPropertyStore</code> and XML file representing custom metadata columns, but I was seemingly lucky enough I could just use built-in property keys and (I believe) the real filesystem entities have their metadata fill in. I just had to map the (most; I didn't notice anything bad from not mapping everything) column IDs I was using to the system included property keys and handle the property keys that resolve to other property keys for what to display on tiles and such.</li>
		</ul>
		<p>
			The real sad part is for things like this, because the documentation is so lacking/missing, is that you may run into issues where not even Stack Overflow can help you. Experimentation or blind trust in ancient Usenet posts may be required. Or maybe you can be lucky enough to know someone who was there, remembers, and still cares. Remember, not many at the time knew how to use these effectively, and the number of people who do dwindles, to a point of extinction, another point to the <a href="https://www.devever.net/~hl/windowsdefeat">cultural defeat of Windows</a>.
		</p>
		<p>
			I also found <a href="https://www.viksoe.dk/code/regfolder.htm">someone who implemented a wrapper class library and a bunch of samples around them</a>, which probably would be handy if I didn't discover it <em>after</em> actually managing to make it. It might have been useful, but it does a lot for you, so perhaps it was for the best to understand how the shell/COM works at a lower level.
		</p>
		<h2>IActuallyDidIt2</h2>
		<p>
			I managed to actually write the extension. It's available <a href="https://github.com/NattyNarwhal/OpenWindows">on GitHub</a>, and I hope it provides a clearer example of a shell namespace extension (since you're likely not going to find many, let alone many who know it) as well as be useful to Explorer freaks. I had also contacted Pascal about the licensing ambiguities (since people just did open source in Windows circles by the edge of their seats back then) - it's MIT licensed for sure. Now you know how the ISausage is made, and it is delicious - if only people could figure out the best way to eat it.
		</p>
		<img src="https://cmpct.info/~calvin/Articles/COMAbyss/save-dialog.png" alt="Windows Vista, save dialog" title="Windows Vista, save dialog">
	

</div>]]>
            </description>
            <link>https://cmpct.info/~calvin/Articles/COMAbyss/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23623994</guid>
            <pubDate>Wed, 24 Jun 2020 04:08:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Prescriptions Are a Dead End]]>
            </title>
            <description>
<![CDATA[
Score 44 | Comments 29 (<a href="https://news.ycombinator.com/item?id=23623306">thread link</a>) | @gbasin
<br/>
June 23, 2020 | https://garybasin.com/prescriptions-are-a-dead-end/ | <a href="https://web.archive.org/web/*/https://garybasin.com/prescriptions-are-a-dead-end/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-1988">
		<div>
		<!-- .entry-header -->

		<div>
			
<p>I love to read about how great people accomplish great things. It’s similar to getting advice — I’m left with a high. I imagine that if I can follow the instructions, then I too will accomplish what they have. It’s a logical and tantalizing idea: follow the prescription, get the reward. In practice, it tends to fall short.</p>



<p>Kapil Gupta and Naval did a <a href="https://youtu.be/sBtuqpNZwio" data-rel="lightbox-video-0">great interview</a> where they touched on this pitfall. </p>



<p>The catch is, to achieve something truly remarkable, you have to do something new. It’s practically in the definition. Copying others can help you learn a domain. Imitation is good practice. But to do something new — to create art — you inevitably have to write your own script.</p>



<p>I expanded on these thoughts in a <a href="https://twitter.com/garybasin/status/1274859897826488322?s=19">Twitter thread here</a>, also touching on how prescriptions can act like false Gods.</p>
					</div><!-- .entry-content -->

		<!-- .entry-meta -->
	</div>

	
</article></div>]]>
            </description>
            <link>https://garybasin.com/prescriptions-are-a-dead-end/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23623306</guid>
            <pubDate>Wed, 24 Jun 2020 02:30:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why People Become Internet Trolls]]>
            </title>
            <description>
<![CDATA[
Score 15 | Comments 11 (<a href="https://news.ycombinator.com/item?id=23623017">thread link</a>) | @rchaudhary
<br/>
June 23, 2020 | https://dradambell.com/why-people-become-internet-trolls/ | <a href="https://web.archive.org/web/*/https://dradambell.com/why-people-become-internet-trolls/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-id="1c056633" data-element_type="widget" data-widget_type="text-editor.default">
				<div>
					<div>
<p><span>When I was 10 years old and first introduced to the miracle of the World Wide Web, chat rooms were by far my favorite thing. Talking to random people from all over the world about anything you want — what more could a bored kid ask for?</span></p>

<p><span>I’d spend hours in these chat rooms, asking my new friends how old they were, what they had for breakfast, and how much pocket money their parents gave them. I shared this experience with a friend who didn’t own a computer and had never used the internet.</span></p>

<p><span>He asked if he could have a go. “Sure!” I said, excited for him to experience the wonder of the internet. Without hesitation, he began typing the worst insults and swear words he could think of. Horrified I had awoken a dark and malevolent force, and fearing he had forever ruined my friendship with strawberry88, I shut down my computer and didn’t invite him to play on the internet again.</span></p>

<p><span>To this day, I remain baffled by this behavior. When faced with the endless possibility of the internet, my childhood friend’s first impulse was to verbally abuse strangers. This innocent 10-year-old had become a troll.</span></p>

<h4 id="02ff"><span>Wretched impulses</span></h4>

<p><span>John Oliver once described the internet as a “dark carnival of humanity’s most wretched impulses.” Was it these wretched impulses that had consumed my childhood friend?</span></p>

<p><span>The act of trolling is best described from where its name&nbsp;<a href="https://www.etymonline.com/word/troll" target="_blank" rel="noreferrer noopener">may have come from</a>&nbsp;— the form of fishing where a lure is dangled off a moving boat.</span></p>

<figure><span><img src="https://miro.medium.com/max/3200/0*f3HYZpvSGgrg1vHC" alt=""></span></figure>

<p><span>The troll casts his bait (the offensive comment) into the water of the internet. An unsuspecting fish (the targeted user) sees the bait and feels compelled to go for it (the defensive comment). Soon they are hooked and reeled in without mercy. But unlike trolling for fish, which delivers a clear and edible reward, the troll’s reward isn’t entirely clear.</span></p>

<p><span>Trolling is a hard concept to define because there are various methods of trolling and differing degrees of depravity. Some are abhorrent, like “suicide baiting,” where trolls encourage vulnerable users to kill themselves, or “RIP trolls” who vandalize Facebook memorial sites of the recently deceased. But others, like “griefers” who play online games in a manner that purposely disrupts other players, are more of a nuisance.</span></p>

<p><span>Who are these trolls, and what drives them?</span></p>

<h4 id="4d5f"><span>The dark tetrad</span></h4>

<p><span>Psychologists have found&nbsp;<a href="https://www.sciencedirect.com/science/article/abs/pii/S0191886914000324" target="_blank" rel="noreferrer noopener">a link between trollish behavior</a>&nbsp;and a set of personality traits called “the dark tetrad.”</span></p>

<figure><span><img src="https://miro.medium.com/max/2974/0*sAMy6kU4hSsBKYQy" alt=""></span></figure>

<p><span>The dark tetrad comprises:</span></p>

<ul>
<li><span>Sadism — deriving pleasure from another’s pain</span></li>
<li><span>Psychopathy — impairment of empathy and remorse</span></li>
<li><span>Machiavellianism — manipulative and emotionally “cold” behavior</span></li>
<li><span>Narcissism — self-involvement and a need for admiration</span></li>
</ul>

<p><span><a href="https://www.academia.edu/41115419/Loneliness_moderates_the_relationship_between_Dark_Tetrad_personality_traits_and_internet_trolling" target="_blank" rel="noreferrer noopener">In a recent study</a>, trolls were positively correlated with three of the four dark tetrad traits, with narcissism being the odd one out. They found trolls were manipulative, lacked empathy, and enjoyed hurting others. Men exhibited these traits more commonly than women and were more likely to troll. Loneliness was also a significant predictor of trolling when in the presence of Machiavellianism or psychopathy.</span></p>

<p><span>Most studies on trolls use internet surveys to collect data, which is questionable: Can we really trust trolls to complete surveys accurately? This method may also not account for those who don’t consider their behavior to be trollish or those unaware of their trollish behavior.</span></p>

<p><span>In the book&nbsp;<a href="https://www.hardiegrant.com/au/publishing/bookfinder/book/troll-hunting-by-ginger-gorman/9781743794357" target="_blank" rel="noreferrer noopener"><em>Troll Hunting</em></a>, journalist Ginger Gorman spends years building relationships with the worst trolls she can find in an attempt to understand what drives them. To her surprise, trolls were not uneducated lost souls who lacked social skills and lived in their mother’s basement. These trolls had partners, children, and full-time jobs. They showed leadership skills as commanders of&nbsp;<a href="https://www.theguardian.com/books/2019/jan/28/it-was-like-being-skinned-alive-ginger-gorman-goes-hunting-for-trolls" target="_blank" rel="noreferrer noopener">large trolling syndicates</a>. They were socially intelligent and able to pinpoint users’ weaknesses with vicious precision. But what was driving them?</span></p>

<p><span>Many saw trolling as a hobby — something that entertained or amused. Some were ideologically driven, attacking anybody opposing their belief system. But both types of troll tended to engage users that threatened their beliefs or sense of self.</span></p>

<p><span>Some of the trolls exhibited dark tetrad traits. In these trolls, she saw a common pattern — excessive internet use with little to no parental supervision between the ages of 11 and 16. But some trolls didn’t fit the dark tetrad personality type. These trolls were pleasant, friendly, and compassionate when she engaged them directly. How could these trolls behave so antisocially online yet appear to function as typical members of society offline?</span></p>

<h4 id="7160"><span>Empathy deficit</span></h4>

<p><span>The human brain was primarily designed for face-to-face interaction. It hasn’t had time to adapt to communication over the internet.</span></p>

<p><span>Nonverbal communication — facial expressions, gestures, and voice qualities — provides the precise social context of an interaction. While the claim that 93% of communication being nonverbal is&nbsp;<a href="https://cornerstone.lib.mnsu.edu/cgi/viewcontent.cgi?article=1000&amp;context=ctamj" target="_blank" rel="noreferrer noopener">inaccurate</a>, it is a crucial part of how we communicate. Words alone can only go so far. Even if we used the full&nbsp;<a href="https://englishlive.ef.com/blog/language-lab/many-words-english-language/" target="_blank" rel="noreferrer noopener">170,000 words</a>&nbsp;currently in use in the English language, we still couldn’t convey what an expressive face or a suggestive voice could.</span></p>

<p><span>Most internet discussions only allow words. Well, words and emojis and GIFs and stickers and all the other substitutes created to replace nonverbal cues.</span></p>

<p><span>If you say something mean to my face and make me cry, you will probably start to feel uncomfortable. Unless you’re especially mean or psychopathic, my distress will trigger an empathic response and lead you to have mercy. If you tweet something mean and make me cry, no amount of emojis can convey what the sight of a grown man weeping can. If there is no social cue to elicit an empathic response, you might continue your tirade of meanness.</span></p>

<p><span>The absence of nonverbal feedback leads to an “empathy deficit,” and this is what sociopaths suffer from.</span></p>

<h4 id="53a2"><span>Toxic disinhibition</span></h4>

<p><span>When you combine an empathy deficit with the anonymity of online interactions, you get “<a href="https://en.wikipedia.org/wiki/Online_disinhibition_effect" target="_blank" rel="noreferrer noopener">toxic disinhibition</a>,” which is more than just the phenomenon of being rude to bar staff after that fifth shot of tequila.</span></p>

<p><span>Anonymity can lead to “<a href="https://en.wikipedia.org/wiki/Deindividuation" target="_blank" rel="noreferrer noopener">deindividuation</a>” — a temporary loss of one’s identity leading to behavior incongruent with one’s character. It explains why groups of civilized people can engage in riots. It also explains trolling. If a lack of nonverbal cues is what makes us detached from the other person’s suffering, deindividuation is what makes us detached from the awareness of our misconduct.</span></p>

<p><span>True anonymity offers protection from real-world social repercussions, and this has profound effects on human behavior. The image-based bulletin board 4chan, where registration isn’t possible and users remain anonymous, has been&nbsp;<a href="https://theconversation.com/4chan-raids-how-one-dark-corner-of-the-internet-is-spreading-its-shadows-68394" target="_blank" rel="noreferrer noopener">infamous as a troll incubator</a>&nbsp;for this reason. When there are no real-world consequences to your actions, it liberates you from a lifetime of societally inhibited behaviors. Society discourages antisocial behavior and encourages prosocial behavior, so it is antisocial behavior that seeks liberation.</span></p>

<p><span>We are a delicate balance between prosocial humans and antisocial primates. When society cannot enforce prosocial human behavior, the antisocial primate may come back into power. And thus the troll is created.</span></p>

<h4 id="f597"><span>Troll begets troll</span></h4>

<p><span>Researchers at Stanford and Cornell universities performed a large-scale data analysis on&nbsp;<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5791909/" target="_blank" rel="noreferrer noopener">over 16 million comments</a>&nbsp;from December 2012 to August 2013 on CNN.com and found 1 in 4 posts flagged as abusive were from users with no prior record of trollish behavior. This suggests trolling isn’t always a full-time occupation and that one may indulge sporadically.</span></p>

<p><span>The researchers could predict the likelihood of trolling based on the nature of other comments in the discussion and the user’s mood. If earlier comments were negative, the propensity to troll was greater. Like a bad mood, trolling is contagious. All it takes is another user’s trollish comment and a bad mood to create an environment in which our inner troll can blossom.</span></p>

<h4 id="b294"><span>The inner troll</span></h4>

<p><span>It is easier to view trolls as bad apples than see them as something inside all of us, waiting for the right environment to let loose. But when we condemn trolls as inherently malicious individuals, we limit our understanding of what may drive these behaviors.</span></p>

<p><span>While RIP trolls or suicide baiters are likely to be dark tetrad personality types who use the internet as an outlet to indulge their darkest impulses, lesser trolls may be part-time participants who will engage with the right combination of a bad day and a noxious environment. We have only begun to scratch the surface in our understanding of trolls, but the evidence we have suggests we may all be vulnerable.</span></p>

<p><span>Is anyone exempt from toxic disinhibition? Few respond to a tweet that offends them with “Excuse me, I really don’t want to be rude, but if I may could I please respectfully disagree with your opinion for these reasons …” While an offhand remark may appear harmless, the less empathic our online interactions collectively become, the greater risk we all stand of becoming trolls. The gentle ripples of impolite tweets may become crashing toxic waves of disinhibited hatred.</span></p>

<p><span>Trolling isn’t black and white, it is somewhere in the grey between prosocial human and antisocial primate. Ultimately, our propensity for antisocial behavior in the physical world is likely to predict similar online behavior.</span></p>

<h4 id="9272"><span>How can we manage our inner trolls?</span></h4>

<p><span>The more accountable we are for our behavior, the less potential we have of becoming trolls. Employing&nbsp;<a href="https://scholarspace.manoa.hawaii.edu/bitstream/10125/41373/1/paper0224.pdf" target="_blank" rel="noreferrer noopener">less anonymity may help</a>, but this raises privacy concerns for many. Anonymity can also be a good thing. Benign disinhibition — the friendly sibling of toxic disinhibition — is where users freely discuss their deepest insecurities and concerns with other users. This can be very therapeutic and shouldn’t be discouraged. But by using anonymity only where it is necessary, we reduce the likelihood of toxic disinhibition.</span></p>

<p><span>Empathy doesn’t come …</span></p></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://dradambell.com/why-people-become-internet-trolls/">https://dradambell.com/why-people-become-internet-trolls/</a></em></p>]]>
            </description>
            <link>https://dradambell.com/why-people-become-internet-trolls/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23623017</guid>
            <pubDate>Wed, 24 Jun 2020 01:51:37 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Elon Musk and the Value of Localism-What We Should Do Instead of Going to Mars]]>
            </title>
            <description>
<![CDATA[
Score 10 | Comments 9 (<a href="https://news.ycombinator.com/item?id=23622970">thread link</a>) | @richeyrw
<br/>
June 23, 2020 | https://wearenotsaved.com/2020/06/24/elon-musk-and-the-value-of-localism-or-what-we-should-do-instead-of-going-to-mars/ | <a href="https://web.archive.org/web/*/https://wearenotsaved.com/2020/06/24/elon-musk-and-the-value-of-localism-or-what-we-should-do-instead-of-going-to-mars/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
						<p><span>If you prefer to listen rather than read, this blog is available as a podcast <a href="https://itunes.apple.com/us/podcast/we-are-not-saved/id1175122428">here</a>. Or if you want to listen to just this post:</span></p>

<p><span><a href="https://traffic.libsyn.com/secure/wearenotsaved/Elon_Musk_and_the_Value_of_Localism_or_What_We_Should_Do_Instead_of_Going_to_Mars.mp3">Or download the MP3</a></span></p>
<hr>
<p><strong>I.</strong></p>
<p><span>Elon Musk has asserted, accurately in my opinion, that unless humanity becomes a two planet species that we are eventually doomed (absent some greater power out there which saves us, which could </span><a href="https://wearenotsaved.com/2016/08/27/fermis-paradox-as-a-proof-of-the-existence-of-god/"><span>include either God or aliens</span></a><span>). And he has built an entire company, SpaceX, around making sure that this happens (the two planet part, not the doomed part). As I mentioned, I think this is an accurate view of how things will </span><em><span>eventually</span></em><span> work out, but it’s also </span><a href="https://wearenotsaved.com/2017/01/14/how-to-save-humanity/"><span>incredibly costly and difficult</span></a><span>. Is it possible that in the short term we can achieve most of the benefits of a Mars colony with significantly less money and effort? Might this be yet another 80/20 situation, where 80% of the benefits can be achieved for only 20% of the resources?</span></p>
<p><span>In order to answer that question, it would help to get deeper into Musk’s thinking and reasoning behind his push for a self-sustaining outpost on Mars. To quote from the man himself:</span></p>
<p><em><span>I think there are really two fundamental paths. History is going to bifurcate along two directions. One path is we stay on Earth forever, and then there will be some eventual extinction event — I don’t have an immediate doomsday prophecy … just that there will be some doomsday event. The alternative is to become a space-faring civilization and a multiplanet species.</span></em></p>
<p><span>While I agree with Musk that having a colony on Mars will prevent some doomsday scenarios, I’m not sure I agree with his implied assertion that it will prevent all of them, that if we choose the alternative of being a space-faring civilization, that it forever closes off the other alternative of doomsday events. To see why that might be, we need to get into a discussion of what potential doomsdays await us, or to use the more common term, what existential risks, or x-risks are we likely to face?</span></p>
<p><span>If you read my round up of the </span><a href="https://wearenotsaved.com/2020/06/05/books-i-finished-in-may/"><span>books I finished in May</span></a><span>, one of my reviews covered </span><a href="https://www.amazon.com/Precipice-Existential-Risk-Future-Humanity/dp/0316484911"><span>Toby Ord’s book, The Precipice: Existential Risk and the Future of Humanity</span></a><span> which was entirely dedicated to a discussion of this very subject. For those who don’t remember, Ord produced a chart showing what he thought the relative odds were for various potential x-risks. Which I’ll once again include.</span></p>
<table>
<tbody>
<tr>
<td><strong>Existential catastrophe via</strong></td>
<td><strong>Chance within the next 100 years</strong></td>
</tr>
<tr>
<td><span>Asteroid/comet Impact</span></td>
<td><span>~1 in 1,000,000</span></td>
</tr>
<tr>
<td><span>Supervolcanic eruption</span></td>
<td><span>~1 in 10,000</span></td>
</tr>
<tr>
<td><span>Stellar explosion</span></td>
<td><span>~1 in 1,000,000</span></td>
</tr>
<tr>
<td><em><span>Total natural risk</span></em></td>
<td><span>~1 in 10,000</span></td>
</tr>
<tr>
<td><span>Nuclear war</span></td>
<td><span>~1 in 1,000</span></td>
</tr>
<tr>
<td><span>Climate change</span></td>
<td><span>~1 in 1,000</span></td>
</tr>
<tr>
<td><span>Other environmental damage</span></td>
<td><span>~1 in 1,000</span></td>
</tr>
<tr>
<td><span>Naturally arising pandemics</span></td>
<td><span>~1 in 10,000</span></td>
</tr>
<tr>
<td><span>Engineered pandemics</span></td>
<td><span>~1 in 30</span></td>
</tr>
<tr>
<td><span>Unaligned artificial intelligence</span></td>
<td><span>~1 in 10</span></td>
</tr>
<tr>
<td><span>Unforeseen anthropogenic risks</span></td>
<td><span>~1 in 30</span></td>
</tr>
<tr>
<td><span>Other anthropogenic risks</span></td>
<td><span>~1 in 50</span></td>
</tr>
<tr>
<td><em><span>Total anthropogenic risks</span></em></td>
<td><span>~1 in 6</span></td>
</tr>
<tr>
<td><em><span>Total existential risk</span></em></td>
<td><span>~1 in 6</span></td>
</tr>
</tbody>
</table>
<p><span>Reviewing this list, which x-risks are entirely avoided by having a self-sustaining colony on Mars? The one it most clearly prevents is the asteroid/comet impact, and indeed that’s the one everyone thinks of. I assume it would also be perfect for protecting humanity from a supervolcanic eruption and a naturally arising pandemic. I’m less clear on how well it would do at protecting humanity from a stellar explosion, but I’m happy to toss that in as well. But you can instantly see the problem with this list, particularly if you read my book review. These are all naturally arising risks, and as a category they’re all far less likely (at least according to Ord) to be the cause of our extinction. What we really need to be hedging against is the category of anthropogenic risks. And it’s not at all clear that a Mars colony is the cheapest or even the best way to do that.&nbsp;</span></p>
<p><span>The risks we’re trying to prevent are often grouped into the general category of “having all of our eggs in one basket”. But just as we don’t want all of our eggs in the “basket” of Earth, I don’t think we want all of our risk mitigation to end up in the “basket” of a Mars colony. To relate it to my </span><a href="https://wearenotsaved.com/2020/06/13/dont-make-the-second-mistake/"><span>last post</span></a><span>, this is very similar to my caution against a situation where we all make the same mistake. Only this time rather than a bunch of independent actors all deciding to independently take the same ultimately catastrophic action, here the consensus happens a little more formally, with massive time and effort put into one great effort. One of the reasons this effort seems safe is that it’s designed to reduce risk, but that doesn’t really matter, it could still be a mistake. A potential mistake which is aggravated by focusing on only one subset of potential x-risks, naturally occurring ones, and this one method for dealing with them, a Mars Colony. In other words in attempting to avoid making a mistake we risk making a potentially different mistake. The mistake of having too narrow a focus. Surviving the next few hundred years is a hugely complicated problem (one I hope to bring greater attention to by </span><a href="https://wearenotsaved.com/2019/12/14/i-finally-figure-out-what-i-want-to-be-when-i-grow-up-an-eschatologist/"><span>expanding the definition and discipline of eschatology</span></a><span>). And the mistakes we could make are legion. But, in my opinion, focusing on a Mars Colony, as the best and first step in preventing those mistakes </span><em><span>turns out to be a mistake itself</span></em><span>.&nbsp;</span></p>
<p><strong>II.</strong></p>
<p><span>At this point it’s only natural to ask what I would recommend instead. And as a matter of fact I do have a proposal:</span></p>
<p><span>Imagine that instead of going to Mars that we built a couple of large underground bunkers, something similar to NORAD. In fact we might even be able to repurpose, or piggyback on NORAD for one of them. Ideally the other one would be built at roughly the opposite spot on the globe from the first. So maybe something in Australia. Now imagine that you paid a bunch of people to live there for two years. You would of course supply them with everything they needed, entertainment, food, power, etc. In fact as far as food and power you’d want to have as robust a supply of those on hand as you could manage. But as part of it they would be </span><em><span>completely cut off from everything</span></em><span> for those two years, no internet connection, no traffic in our out, no inbound communication of any sort. You would of course have plenty of ways to guarantee the necessities like air, food and water. Basically you make this place as self-contained and robust as possible.&nbsp;</span></p>
<p><span>When I say “a bunch of people”, you’d want as many as you could afford, but in essence you want to have enough people in either bunker that </span><em><span>by themselves</span></em><span> they could regenerate humanity if, after some unthinkable tragedy, they were all that remained. The minimum number I’ve seen is 160, with 500 seeming closer to ideal. Also if you wanted to get fancy/clever you could have 80% of the population be female, with lots of frozen sperm. Also it should go without saying that these people should be of prime child bearing age, with a fertility test before they went in.</span></p>
<p><span>Every year you’d alternate which of the bunkers was emptied and refilled with new people. This ensures that neither bunker is empty at the same time and that the period where even one bunker was empty would only be a week or so.</span></p>
<p><span>Beyond all of the foregoing, I’m sure there are many other things one could think of to increase the robustness of these bunkers, but I think you get the idea. So now let’s turn to Ord’s list of x-risks and compare my bunker idea to Musks’ Mars plan.&nbsp;</span></p>
<p><span>All natural risks: Mars is definitely superior, but two things to note, first, even if you combine all possible natural risks together, they only have a 1 in 10,000 chance, according to Ord, of causing human extinction in the next century. I agree that you shouldn’t build a bunker just to protect against natural x-risks, but it also seems like a weak reason to go to Mars as well. Second, don’t underestimate the value the bunker provides even if Ord is wrong and the next giant catastrophe we have to worry about is natural. There are a whole host of disasters one could imagine where having the bunker system I described would be a huge advantage. But, even if it’s not, we’re mostly worried about anthropogenic risks, and it’s when we turn to considering them that the bunker system starts to look like the superior option.&nbsp;</span></p>
<p><span>Taking each anthropogenic risk in turn:</span></p>
<p><span>Nuclear war- Bunkers as a protection against nuclear weapons is an idea almost as old as the weapons themselves. Having more of them, and making sure they’re constantly occupied, could only increase their protective value. Also Ord only gives nuclear war a 1 in 1000 chance of being the cause of our extinction, mostly because it would be so hard to </span><strong>completely</strong><span> wipe humanity out. The bunker system would make that even harder. A Mars colony doesn’t seem necessarily any better as a protection against this risk, for one thing how does it end up escaping this hypothetical war? And if it doesn’t, it would seem to be very vulnerable to attack. At least as vulnerable as a hardened bunker and perhaps far more so given the precariousness of any Martian existence.</span></p>
<p><span>Climate Change- I don’t deny the reality of climate change, but I have a hard time picturing how it wipes out every last human. Most people when pressed on this issue say that the disruption it causes leads to Nuclear War, which just takes us back to the last item.&nbsp;</span></p>
<p><span>Environmental Damage- Similar to climate change, also if we’re too dumb to prevent these sorts of slow moving extinction events on Earth, what makes you think we’ll do any better on Mars?&nbsp;</span></p>
<p><span>Engineered Pandemics- The danger of the engineered pandemic is the malevolent actor behind it, preventing this x-risk means keeping this malevolent actor from infecting everyone, in such a way that we all die. Here the advantage Mars has is its great distance from Earth, meaning you’d have to figure out a way to have a simultaneous outbreak on both planets. The advantage the bunker has is that it’s whole function is to avoid x-risks. Meaning anything that might protect from this sort of threat is not only allowed but expected. The kind of equipment necessary to synthesis a disease? Not allowed in the …</span></p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://wearenotsaved.com/2020/06/24/elon-musk-and-the-value-of-localism-or-what-we-should-do-instead-of-going-to-mars/">https://wearenotsaved.com/2020/06/24/elon-musk-and-the-value-of-localism-or-what-we-should-do-instead-of-going-to-mars/</a></em></p>]]>
            </description>
            <link>https://wearenotsaved.com/2020/06/24/elon-musk-and-the-value-of-localism-or-what-we-should-do-instead-of-going-to-mars/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23622970</guid>
            <pubDate>Wed, 24 Jun 2020 01:44:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[OneDev 3.2 – Self-Hosted All-in-One DevOps Platform]]>
            </title>
            <description>
<![CDATA[
Score 11 | Comments 1 (<a href="https://news.ycombinator.com/item?id=23622908">thread link</a>) | @robinshen
<br/>
June 23, 2020 | https://www.onedev.io/v3.2.0 | <a href="https://web.archive.org/web/*/https://www.onedev.io/v3.2.0">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section><p>Got bunch of feedbacks from OneDev users and this major version ships some of them. Thank you for getting OneDev even better! </p>
<h3>OpenID connect integration</h3>
<p>With OIDC integration, it is now possible to login via GitHub, Gmail, Okta, or any other OIDC compliant identify providers. Besides authentication, this integration can also authorize users with appropriate permissions based on group claims. Check usage scenarios <a href="https://code.onedev.io/projects/onedev-manual/blob/3.2/pages/okta-sso.md">here</a> and <a href="https://code.onedev.io/projects/onedev-manual/blob/3.2/pages/github-sso.md">here</a> for details</p>
<p><span>
      <a href="https://www.onedev.io/static/84ad90df8004dc795401cee246cbd5d5/25c1c/oidc.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="OpenID connect integration" title="OpenID connect integration" src="https://www.onedev.io/static/84ad90df8004dc795401cee246cbd5d5/fcda8/oidc.png" srcset="https://www.onedev.io/static/84ad90df8004dc795401cee246cbd5d5/12f09/oidc.png 148w,
https://www.onedev.io/static/84ad90df8004dc795401cee246cbd5d5/e4a3f/oidc.png 295w,
https://www.onedev.io/static/84ad90df8004dc795401cee246cbd5d5/fcda8/oidc.png 590w,
https://www.onedev.io/static/84ad90df8004dc795401cee246cbd5d5/efc66/oidc.png 885w,
https://www.onedev.io/static/84ad90df8004dc795401cee246cbd5d5/25c1c/oidc.png 1047w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<h3>Clone with custom credential in CI job</h3>
<p>For security reason, OneDev clones source in CI job with a default credential which does not have permission to access other projects, or push back commits. To get additional permissions, one has to define custom job secrets accessible to certain branches, and use these secrets in CI job to clone source. Refer to usage scenario <a href="https://code.onedev.io/projects/onedev-manual/blob/3.2/pages/clone-submodules-via-ssh.md">here</a> for example setup</p>
<p><span>
      <a href="https://www.onedev.io/static/d907b034a8cc26e7ec0c7703a54baee6/25c1c/custom-clone-credential.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="clone with custom credential" title="clone with custom credential" src="https://www.onedev.io/static/d907b034a8cc26e7ec0c7703a54baee6/fcda8/custom-clone-credential.png" srcset="https://www.onedev.io/static/d907b034a8cc26e7ec0c7703a54baee6/12f09/custom-clone-credential.png 148w,
https://www.onedev.io/static/d907b034a8cc26e7ec0c7703a54baee6/e4a3f/custom-clone-credential.png 295w,
https://www.onedev.io/static/d907b034a8cc26e7ec0c7703a54baee6/fcda8/custom-clone-credential.png 590w,
https://www.onedev.io/static/d907b034a8cc26e7ec0c7703a54baee6/efc66/custom-clone-credential.png 885w,
https://www.onedev.io/static/d907b034a8cc26e7ec0c7703a54baee6/25c1c/custom-clone-credential.png 1047w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<h3>Reworked pull request workflow</h3>
<p>Instead of merging pull requests automatically after getting all approvals from revewers, assignee has to merge them manually to ensure responsibilities, as well as crafting commit message if necessary. Also merged commits from target branch will be excluded when displaying incremental pull request changes to make it easier to understand</p>
<p><span>
      <a href="https://www.onedev.io/static/753c01e3ffb458db46a31ef3f7a4d77f/25c1c/pull-request-assignees.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="pull request assignees" title="pull request assignees" src="https://www.onedev.io/static/753c01e3ffb458db46a31ef3f7a4d77f/fcda8/pull-request-assignees.png" srcset="https://www.onedev.io/static/753c01e3ffb458db46a31ef3f7a4d77f/12f09/pull-request-assignees.png 148w,
https://www.onedev.io/static/753c01e3ffb458db46a31ef3f7a4d77f/e4a3f/pull-request-assignees.png 295w,
https://www.onedev.io/static/753c01e3ffb458db46a31ef3f7a4d77f/fcda8/pull-request-assignees.png 590w,
https://www.onedev.io/static/753c01e3ffb458db46a31ef3f7a4d77f/efc66/pull-request-assignees.png 885w,
https://www.onedev.io/static/753c01e3ffb458db46a31ef3f7a4d77f/25c1c/pull-request-assignees.png 1047w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<h3>Show review and build status in pull request list</h3>
<p>To help users getting a better glance of what happened in pull requests, review and build status now get displayed in pull request list</p>
<p><span>
      <a href="https://www.onedev.io/static/7a7d35672c53b7c09c14953278093fc8/25c1c/pull-request-list.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="pull request list status" title="pull request list status" src="https://www.onedev.io/static/7a7d35672c53b7c09c14953278093fc8/fcda8/pull-request-list.png" srcset="https://www.onedev.io/static/7a7d35672c53b7c09c14953278093fc8/12f09/pull-request-list.png 148w,
https://www.onedev.io/static/7a7d35672c53b7c09c14953278093fc8/e4a3f/pull-request-list.png 295w,
https://www.onedev.io/static/7a7d35672c53b7c09c14953278093fc8/fcda8/pull-request-list.png 590w,
https://www.onedev.io/static/7a7d35672c53b7c09c14953278093fc8/efc66/pull-request-list.png 885w,
https://www.onedev.io/static/7a7d35672c53b7c09c14953278093fc8/25c1c/pull-request-list.png 1047w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<h3>UI to compose complex sorts</h3>
<p>Previously one has to use <em>order by</em> clause to sort issues, builds and pull requests. Now this task is easier via a smart sort widget. Just select fields to order, and OneDev will compose the query automatically </p>
<p><img src="https://www.onedev.io/5818d4a1f54412d7be2f8292473840a0/orderby.gif" alt="order by widget"></p>
<h3>Publish and render markdown in build</h3>
<p>Besides ordinary artifacts and html reports, one can also publish markdown in a build process and get it rendered in a separate build tab to make important information explicit</p>
<p><span>
      <a href="https://www.onedev.io/static/aba8d21dfc88d7be1f6ba80bfac9a2c6/25c1c/markdown-report.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="markdown report" title="markdown report" src="https://www.onedev.io/static/aba8d21dfc88d7be1f6ba80bfac9a2c6/fcda8/markdown-report.png" srcset="https://www.onedev.io/static/aba8d21dfc88d7be1f6ba80bfac9a2c6/12f09/markdown-report.png 148w,
https://www.onedev.io/static/aba8d21dfc88d7be1f6ba80bfac9a2c6/e4a3f/markdown-report.png 295w,
https://www.onedev.io/static/aba8d21dfc88d7be1f6ba80bfac9a2c6/fcda8/markdown-report.png 590w,
https://www.onedev.io/static/aba8d21dfc88d7be1f6ba80bfac9a2c6/efc66/markdown-report.png 885w,
https://www.onedev.io/static/aba8d21dfc88d7be1f6ba80bfac9a2c6/25c1c/markdown-report.png 1047w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<h3>Rule to transit inactive issues to specified state</h3>
<p>Sometimes it is desirable to transit inactive issues to a certain state, for instance to mark it idle and notify relevant participants, and finally close it if no one cares about it. Now this is possible via a custom state transition rule</p>
<p><span>
      <a href="https://www.onedev.io/static/fe1e5fa89bb15733cae5977fd7cae3fa/25c1c/inactive-transition.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="idle-issue-transition" title="idle-issue-transition" src="https://www.onedev.io/static/fe1e5fa89bb15733cae5977fd7cae3fa/fcda8/inactive-transition.png" srcset="https://www.onedev.io/static/fe1e5fa89bb15733cae5977fd7cae3fa/12f09/inactive-transition.png 148w,
https://www.onedev.io/static/fe1e5fa89bb15733cae5977fd7cae3fa/e4a3f/inactive-transition.png 295w,
https://www.onedev.io/static/fe1e5fa89bb15733cae5977fd7cae3fa/fcda8/inactive-transition.png 590w,
https://www.onedev.io/static/fe1e5fa89bb15733cae5977fd7cae3fa/efc66/inactive-transition.png 885w,
https://www.onedev.io/static/fe1e5fa89bb15733cae5977fd7cae3fa/25c1c/inactive-transition.png 1047w" sizes="(max-width: 590px) 100vw, 590px" loading="lazy">
  </a>
    </span></p>
<h3><a href="https://code.onedev.io/projects/onedev-server/builds/797/fixed-issues?query=%22State%22+is+%22Released%22+order+by+%22Type%22+asc+and+%22Priority%22+desc">And many more</a></h3></section></div>]]>
            </description>
            <link>https://www.onedev.io/v3.2.0</link>
            <guid isPermaLink="false">hacker-news-small-sites-23622908</guid>
            <pubDate>Wed, 24 Jun 2020 01:35:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Bastions on demand in an AWS VPC]]>
            </title>
            <description>
<![CDATA[
Score 34 | Comments 31 (<a href="https://news.ycombinator.com/item?id=23622728">thread link</a>) | @mooreds
<br/>
June 23, 2020 | https://theconsultingcto.com/posts/bastions-on-demand/ | <a href="https://web.archive.org/web/*/https://theconsultingcto.com/posts/bastions-on-demand/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <p>Any time you have a VPC, you’ll likely need some way to gain access to the resources within the VPC from your local box. Typically, the way to do that is to run a bastion (or jumpbox) which you and your team can SSH into. The downside is that you are exposing an entry point into your network that is accessible by multiple people and running 24x7. And depending on how you manage permissions, you may not be able to restrict access to the box via IAM. Obviously, this is not ideal.</p>
<p>Luckily, we have <a href="https://aws.amazon.com/fargate/">Fargate</a>.</p>
<p>With Fargate, we no longer need to maintain permanent bastion instances—we can create bastions when needed and tear them down when no longer in use. We can lock down bastion instances to an individual user both in terms of SSH keys and IP address. And we can restrict access via IAM to both the API used to manage bastions and to which SSH keys are used to log into an instance.</p>
<p>All in all, we save on infrastructure spend while reducing our attack surface.</p>
<p>Throughout this guide, I’ll be referencing the code from my <a href="https://github.com/jdhollis/bastions-on-demand/"><code>bastions-on-demand</code></a> repo. If you want to skip the explanation, just clone it and follow the directions in the <a href="https://github.com/jdhollis/bastions-on-demand/blob/master/README.md">README.md</a> to get started.</p>
<p>If you run into any trouble, <a href="https://github.com/jdhollis/bastions-on-demand/issues/new/choose">create an issue</a>, and I’ll respond as best I can.</p>
<p>Otherwise, buckle up. This is going to be a bit in-depth.</p>
<h2 id="architecture">Architecture</h2>
<p>There are two key components to bastions on demand—<a href="https://github.com/jdhollis/bastions-on-demand/tree/master/bastion">the infrastructure for managing the bastion image</a> and <a href="https://github.com/jdhollis/bastions-on-demand/tree/master/service">the bastion service itself</a>.</p>
<p>The <a href="#container-infrastructure">container infrastructure</a> consists of an <a href="https://aws.amazon.com/ecr/">ECR</a> repository, a Docker container, an IAM role for fetching a user’s public keys, and scripts for building and pushing images. Typically, I share this infrastructure across multiple services because the requirements don’t vary much. But if a team wants complete service isolation or needs to customize their bastion image, it’s trivial to make that work.</p>
<p>The <a href="#bastion-service">bastion service</a> consists of an <a href="https://aws.amazon.com/ecs/">ECS</a> task, a task role that enables access to any required resources, an API to create and destroy bastion instances, and a set of scripts to make it easy for team members to do just that. The bastion service module should be included in any service that needs bastions—keep it in the service’s repository for ease of access and deploy it alongside the parent service.</p>
<p>Naturally, all of this infrastructure is managed with <a href="https://www.terraform.io/">Terraform</a>.</p>
<p>I owe a debt of gratitude to the following authors as they provided valuable examples that helped me develop this approach:</p>
<ul>
<li><a href="https://ig.nore.me/2018/07/serverless-bastions-on-demand/">Serverless Bastions on Demand</a> &amp; <a href="https://github.com/ArjenSchwarz/workshop-fargate-bastion">ArjenSchwarz/workshop-fargate-bastion</a></li>
<li><a href="https://github.com/alex0ptr/fargate-bastion">alex0ptr/fargate-bastion</a></li>
<li><a href="https://cloudonaut.io/manage-aws-ec2-ssh-access-with-iam/">Manage AWS EC2 SSH access with IAM</a></li>
</ul>
<p>While I recommend using multiple AWS accounts for security and isolation, in this guide, I’m going to use a single account so that we can focus on the essentials. If there’s interest, I will address how to modify this approach for use with multiple accounts in a separate guide. Everything in this guide assumes you’re using the <code>default</code> profile, but you can override via the <code>AWS_PROFILE</code> environment variable.</p>
<p>I’m also deliberately not using <a href="https://www.terraform.io/docs/state/remote.html">Terraform remote state</a> in this guide to make it easier for you to try out my code. If you’re going to use this in a live account, you absolutely should use remote state—insert your own backend configuration where appropriate. And if you don’t have a remote backend, have a look at my <a href="https://github.com/jdhollis/remote-state">remote-state</a> repo for an example of how to set one up on S3 with DynamoDB and KMS.</p>
<p>Now, let’s get started.</p>
<h2 id="initial-setup">Initial Setup</h2>
<p>If you haven’t already, create a role for API Gateway logging:</p>
<section>
<div><pre><code data-lang="hcl"><span>data</span> <span>"aws_iam_policy_document" "assume_role"</span> {
  <span>statement</span> {
    actions <span>=</span> [<span>"sts:AssumeRole"</span>]

    <span>principals</span> {
      identifiers <span>=</span> [<span>"apigateway.amazonaws.com"</span>]
      type        <span>=</span> <span>"Service"</span>
    }
  }
}

<span>data</span> <span>"aws_iam_policy_document" "logger"</span> {
  <span>statement</span> {
    actions <span>=</span> [
      <span>"logs:CreateLogGroup"</span>,
      <span>"logs:CreateLogStream"</span>,
      <span>"logs:DescribeLogGroups"</span>,
      <span>"logs:DescribeLogStreams"</span>,
      <span>"logs:FilterLogEvents"</span>,
      <span>"logs:GetLogEvents"</span>,
      <span>"logs:PutLogEvents"</span>,
    ]

    resources <span>=</span> [<span>"*"</span>]
  }
}

<span>resource</span> <span>"aws_iam_role" "logger"</span> {
  name               <span>=</span> <span>"api-gateway-cloudwatch-logger"</span>
  assume_role_policy <span>=</span> <span>data</span>.<span>aws_iam_policy_document</span>.<span>assume_role</span>.<span>json</span>
}

<span>resource</span> <span>"aws_iam_role_policy" "logger"</span> {
  name   <span>=</span> <span>"api-gateway-cloudwatch-logger"</span>
  policy <span>=</span> <span>data</span>.<span>aws_iam_policy_document</span>.<span>logger</span>.<span>json</span>
  role   <span>=</span> <span>aws_iam_role</span>.<span>logger</span>.<span>name</span>
}

<span>resource</span> <span>"aws_api_gateway_account" "global"</span> {
  cloudwatch_role_arn <span>=</span> <span>aws_iam_role</span>.<span>logger</span>.<span>arn</span>
}
</code></pre></div>  
</section>
<p>Logging API Gateway access is a good idea in general. Unfortunately, this is a global account setting, so use with caution. API Gateway has a lot of stateful corners. I typically manage this logger in a separate repository since it’s shared across all services running in an account.</p>
<h2 id="container-infrastructure">Container Infrastructure</h2>
<p>Creating the ECR repository is straightforward:</p>
<section>
<div><pre><code data-lang="hcl"><span>resource</span> <span>"aws_ecr_repository" "bastion"</span> {
  name <span>=</span> <span>"bastion"</span>
}
</code></pre></div>  
</section>
<p>Next we need to create a role that can fetch a user’s public keys.</p>
<section>
<div><pre><code data-lang="hcl"><span>data</span> <span>"aws_caller_identity" "env"</span> {}<span>
</span><span>
</span><span># …
</span><span></span>
<span>data</span> <span>"aws_iam_policy_document" "assume_role"</span> {
  <span>statement</span> {
    actions <span>=</span> [<span>"sts:AssumeRole"</span>]

    <span>principals</span> {
      identifiers <span>=</span> [<span>"arn:aws:iam::${data.aws_caller_identity.env.account_id}:root"</span>]
      type        <span>=</span> <span>"AWS"</span>
    }
  }
}

<span>data</span> <span>"aws_iam_policy_document" "public_key_fetcher"</span> {
  <span>statement</span> {
    actions <span>=</span> [
      <span>"iam:GetSSHPublicKey"</span>,
      <span>"iam:ListSSHPublicKeys"</span>,
    ]

    resources <span>=</span> [<span>"arn:aws:iam::${data.aws_caller_identity.env.account_id}:user/*"</span>]
  }
}

<span>resource</span> <span>"aws_iam_role" "public_key_fetcher"</span> {
  name               <span>=</span> <span>"public-key-fetcher"</span>
  assume_role_policy <span>=</span> <span>data</span>.<span>aws_iam_policy_document</span>.<span>assume_role</span>.<span>json</span>
}

<span>resource</span> <span>"aws_iam_role_policy" "public_key_fetcher"</span> {
  name   <span>=</span> <span>"public-key-fetcher"</span>
  policy <span>=</span> <span>data</span>.<span>aws_iam_policy_document</span>.<span>public_key_fetcher</span>.<span>json</span>
  role   <span>=</span> <span>aws_iam_role</span>.<span>public_key_fetcher</span>.<span>id</span>
}
</code></pre></div>  
</section>
<p>This role will be used by the bastion instance to fetch a user’s keys when the user attempts to SSH into the instance, as we’ll see below.</p>
<h3 id="dockerfile">Dockerfile</h3>
<p>Creating the container image is fairly straightforward. We start with <a href="https://alpinelinux.org/">Alpine Linux</a> because it’s small and security-oriented and add the scripts we’ll need to start <code>sshd</code> and handle login.</p>
<section>
<div><pre><code data-lang="dockerfile"><span>FROM</span><span> alpine:3.11</span><span>
</span><span>
</span><span></span><span>WORKDIR</span><span> /root</span><span>
</span><span>
</span><span></span><span>ADD</span> fetch_authorized_keys.sh /usr/local/bin/fetch_authorized_keys.sh<span>
</span><span></span><span>ADD</span> entrypoint.sh /usr/local/bin/entrypoint.sh<span>
</span></code></pre></div>  
</section>
<p>Next, we install dependencies including the <a href="https://aws.amazon.com/cli/">AWS CLI</a>. If you typically need any other packages for your bastion, add ‘em to the list. (It still bugs me that AWS doesn’t provide checksums for its CLI bundle. Oh well.)</p>
<section>
<div><pre><code data-lang="dockerfile"><span>RUN</span> <span>echo</span> <span>"Installing dependencies..."</span> <span>&amp;&amp;</span> <span>\
</span><span></span>  apk --no-cache <span>\
</span><span></span>    add <span>\
</span><span></span>      bash <span>\
</span><span></span>      curl <span>\
</span><span></span>      openssh <span>\
</span><span></span>      python <span>\
</span><span></span>      tini <span>\
</span><span></span>  <span>&amp;&amp;</span> <span>\
</span><span></span>  <span>echo</span> <span>"Installing AWS CLI..."</span> <span>&amp;&amp;</span> <span>\
</span><span></span>  wget https://s3.amazonaws.com/aws-cli/awscli-bundle.zip <span>&amp;&amp;</span> <span>\
</span><span></span>  unzip awscli-bundle.zip <span>&amp;&amp;</span> <span>\
</span><span></span>  rm awscli-bundle.zip <span>&amp;&amp;</span> <span>\
</span><span></span>  ./awscli-bundle/install -i /usr/local/aws -b /usr/local/bin/aws <span>&amp;&amp;</span> <span>\
</span><span></span>  rm -R awscli-bundle <span>&amp;&amp;</span> <span>\
</span><span></span>  /usr/local/bin/aws --version<span>
</span></code></pre></div>  
</section>
<p>Now we need a user to log in as.</p>
<p>You could use <code>root</code>. I have in the past with small teams that needed the additional flexibility. But if you’re providing an image to teams that are independent of whoever handles security, you don’t necessarily want people making changes to the bastion that could open up holes in your network.</p>
<p>Instead, we create a user named <code>ops</code> and unlock the account for login.</p>
<section>
<div><pre><code data-lang="dockerfile"><span>RUN</span> <span>echo</span> <span>"Creating user \"ops\"..."</span> <span>&amp;&amp;</span> <span>\
</span><span></span>  adduser ops --disabled-password<span>
</span><span>
</span><span></span><span>RUN</span> <span>echo</span> <span>"Unlocking \"ops\"..."</span> <span>&amp;&amp;</span> <span>\
</span><span></span>  sed -i <span>"s/ops:!:/ops:*:/g"</span> /etc/shadow<span>
</span></code></pre></div>  
</section>
<p>With that out of the way, we now configure <code>sshd</code>.</p>
<section>
<div><pre><code data-lang="dockerfile"><span>RUN</span> <span>echo</span> <span>"Configuring sshd..."</span> <span>&amp;&amp;</span> <span>\
</span><span></span>  sed -i <span>"s:#AuthorizedKeysCommand none:AuthorizedKeysCommand /usr/local/bin/fetch_authorized_keys.sh:g"</span> /etc/ssh/sshd_config <span>&amp;&amp;</span> <span>\
</span><span></span>  sed -i <span>"s:#AuthorizedKeysCommandUser nobody:AuthorizedKeysCommandUser nobody:g"</span> /etc/ssh/sshd_config <span>&amp;&amp;</span> <span>\
</span><span></span>  sed -i <span>"s:#GatewayPorts no:GatewayPorts yes:g"</span> /etc/ssh/sshd_config <span>&amp;&amp;</span> <span>\
</span><span></span>  sed -i <span>"s:#PasswordAuthentication yes:PasswordAuthentication no:g"</span> /etc/ssh/sshd_config <span>&amp;&amp;</span> <span>\
</span><span></span>  sed -i <span>"s:#PermitTunnel no:PermitTunnel yes:g"</span> /etc/ssh/sshd_config <span>&amp;&amp;</span> <span>\
</span><span></span>  sed -i <span>"s:AllowTcpForwarding no:AllowTcpForwarding yes:g"</span> /etc/ssh/sshd_config <span>&amp;&amp;</span> <span>\
</span><span></span>  sed -i <span>"s:AuthorizedKeysFile .ssh/authorized_keys:AuthorizedKeysFile none:g"</span> /etc/ssh/sshd_config<span>
</span></code></pre></div>  
</section>
<p>We’re configuring <code>sshd</code> to do a few different things.</p>
<p>We’re setting the <code>AuthorizedKeysCommand</code> to use <code>fetch_authorized_keys.sh</code>, and we’re disabling both password logins and the ability to use an <code>AuthorizedKeysFile</code> on the instance. The intention here is to make it possible to only use the logic in <code>fetch_authorized_keys.sh</code> to authenticate the user.</p>
<p>We’re also setting <code>sshd</code> up for proxying.</p>
<p>Finally, we configure the <code>ENTRYPOINT</code>:</p>
<section>
<div><pre><code data-lang="dockerfile"><span>ENTRYPOINT</span> [ <span>"/sbin/tini"</span>, <span>"--"</span> ]<span>
</span><span></span><span>CMD</span> [ <span>"/bin/sh"</span>, <span>"/usr/local/bin/entrypoint.sh"</span> ]<span>
</span></code></pre></div>  
</section>
<p>The only interesting thing here is we’re using <a href="https://github.com/krallin/tini"><code>tini</code></a>. If you’re interested in why, check out <a href="https://github.com/krallin/tini/issues/8">this GitHub issue</a>.</p>
<h3 id="entrypointsh">entrypoint.sh</h3>
<p>On container startup, the first thing we need to do is generate host keys.</p>
<section>
  
</section>
<p>Then we export the global environment which includes the AWS credentials injected into the container, the role for fetching SSH keys, and the user name of the person for whom this bastion instance is intended.</p>
<section>
<div><pre><code data-lang="sh"><span>echo</span> <span>"export AWS_CONTAINER_CREDENTIALS_RELATIVE_URI=</span><span>$AWS_CONTAINER_CREDENTIALS_RELATIVE_URI</span><span>"</span> &gt; /etc/profile.d/authorized_keys_configuration.sh
<span>echo</span> <span>"export AWS_DEFAULT_REGION=</span><span>$AWS_DEFAULT_REGION</span><span>"</span> &gt;&gt; /etc/profile.d/authorized_keys_configuration.sh
<span>echo</span> <span>"export AWS_EXECUTION_ENV=</span><span>$AWS_EXECUTION_ENV</span><span>"</span> &gt;&gt; /etc/profile.d/authorized_keys_configuration.sh
<span>echo</span> <span>"export AWS_REGION=</span><span>$AWS_REGION</span><span>"</span> &gt;&gt; /etc/profile.d/authorized_keys_configuration.sh
<span>echo</span> <span>"export ECS_CONTAINER_METADATA_URI=</span><span>$ECS_CONTAINER_METADATA_URI</span><span>"</span> &gt;&gt; /etc/profile.d/authorized_keys_configuration.sh
<span>echo</span> <span>"export ASSUME_ROLE_FOR_AUTHORIZED_KEYS=</span><span>$ASSUME_ROLE_FOR_AUTHORIZED_KEYS</span><span>"</span> &gt;&gt; /etc/profile.d/authorized_keys_configuration.sh
<span>echo</span> <span>"export USER_NAME=</span><span>$USER_NAME</span><span>"</span> &gt;&gt; /etc/profile.d/authorized_keys_configuration.sh
</code></pre></div>  
</section>
<p>Because <code>fet…</code></p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://theconsultingcto.com/posts/bastions-on-demand/">https://theconsultingcto.com/posts/bastions-on-demand/</a></em></p>]]>
            </description>
            <link>https://theconsultingcto.com/posts/bastions-on-demand/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23622728</guid>
            <pubDate>Wed, 24 Jun 2020 01:11:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How effective communication can be achieved in a digital work environment]]>
            </title>
            <description>
<![CDATA[
Score 38 | Comments 2 (<a href="https://news.ycombinator.com/item?id=23622241">thread link</a>) | @markshepard
<br/>
June 23, 2020 | https://www.airsend.io/blog/index.php/2020/05/24/1-tip-on-how-effective-communication-can-be-achieved-in-a-digital-work-environment/ | <a href="https://web.archive.org/web/*/https://www.airsend.io/blog/index.php/2020/05/24/1-tip-on-how-effective-communication-can-be-achieved-in-a-digital-work-environment/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-1668">
	

	




	<div>
		
<div><figure><img src="https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_Group_chat_unwm-3-1024x692.png" alt="" width="412" height="278" srcset="https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_Group_chat_unwm-3-1024x692.png 1024w, https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_Group_chat_unwm-3-300x203.png 300w, https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_Group_chat_unwm-3-768x519.png 768w, https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_Group_chat_unwm-3.png 1384w" sizes="(max-width: 412px) 100vw, 412px"><figcaption>Source: unDraw</figcaption></figure></div>



<p>A multi-billion dollar company. A winning presidential
campaign. A happy marriage. What do these three things have in common? The
foundation of success in each is effective communication. </p>



<p>Effective communication has the power to amass riches and
make history. With it, governments have been transformed, along with the lives
of billions of people. With it, enterprises like Amazon, Apple, and Alibaba
rise from obscurity. </p>



<p>It’s no wonder that all successful businesses need strong
communication infrastructures in order to grow and prosper. But that’s not what
this article is about. The topic of communication is so vast that you can get a
Ph.D. in it. This article would have to be a book, maybe three, to properly
cover the topic. </p>



<p>What this article focuses on is a single concept that, if
grasped, can give your organization a big push in the right direction towards
effective communication in a digital work environment. The concept is this:</p>



<blockquote><p><em>Chat is like a river; Wiki is like a dam.</em></p></blockquote>



<h2>River? Dam?</h2>



<div><figure><img src="https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_chat_1wo5-1024x734.png" alt="" width="357" height="255" srcset="https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_chat_1wo5-1024x734.png 1024w, https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_chat_1wo5-300x215.png 300w, https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_chat_1wo5-768x551.png 768w, https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_chat_1wo5.png 1109w" sizes="(max-width: 357px) 100vw, 357px"><figcaption>Source: unDraw</figcaption></figure></div>



<p>A while ago, we published an article that dives into
synchronous and asynchronous communication. Synchronous communication is communication
that happens in real time. It’s a company meeting on Zoom or an active chat
room. Asynchronous communication is communication that happens… not in real
time. It’s that email you send to a client which you know you won’t get a
response to until weeks later, or notes on that Zoom company meeting posted to
an online bulletin. Both are important because different types of information
do best in different formats. </p>



<p>Synchronous communication is fast, immediate, brief. Information
flows like a river — as it does in a chat. This format is best for times of uncertainty
and/or urgency. It’s good for exploring ideas together, having discussions to
make decisions, and addressing crisis situations. </p>



<p>Asynchronous communication is slower, usually more
considered and voluminous. Information gathers like a dam — as it does in a
Wiki. This format is best for adding context to real time communication after
it has happened, putting together detailed information, and explaining complex
concepts.</p>



<p>When used properly, synchronous and asynchronous
communication together form effective communication.</p>



<h2>Increasing Effective Communication in Your Organization</h2>



<div><figure><img src="https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_online_collaboration_7pfp.png" alt="" width="364" height="291" srcset="https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_online_collaboration_7pfp.png 1000w, https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_online_collaboration_7pfp-300x240.png 300w, https://www.airsend.io/blog/wp-content/uploads/2020/05/undraw_online_collaboration_7pfp-768x615.png 768w" sizes="(max-width: 364px) 100vw, 364px"><figcaption>Source: unDraw</figcaption></figure></div>



<p>When synchronous and asynchronous communication are used
appropriately in an organization, communication is at its best and collaboration
is smooth and easy. In a digital work environment, some of the most common modes
of communication are chat and Wiki. As mentioned before, chat facilitates
synchronous communication and a Wiki facilitates asynchronous communication. </p>



<p>Increasing effective communication in your organization is
as simple as having both chat and a Wiki available to everyone and then making
it clear which medium to use for each type of interaction. In other words, the
roadmap to achieving effective communication in a digital work environment is:</p>



<ol><li><strong>Provide
the right tools</strong> – Have chat and a Wiki available to all team members and
get everyone accustomed to using them. </li><li><strong>Ensure the tools are used correctly</strong> – Do
this by training management on the concept of synchronous and asynchronous
communication (or “<em>Chat is like a river;
Wiki is like a dam.”) </em>and have them lead by example so the rest of your organization
follows.</li></ol>



<h2>Chat and Wiki in AirSend</h2>



<p>In AirSend, each channel has both a chat section and a Wiki
section. The chat is great for quickly discussing new developments, exchanging links
to articles or tidbits of information, and scheduling calls for further
discussion. The Wiki is great for storing, sharing, and collaborating on more detailed,
complex items.</p>



<p>Having the chat and Wiki together in one place makes communication
much smoother and more efficient than the previous model of emailing back and
forth with document links or attachments. </p>



<figure><video controls="" src="https://www.airsend.io/blog/wp-content/uploads/2020/05/Chat-Wiki-GIF-S10.mp4"></video></figure>



<h2>Finding Balance </h2>



<p>Effective communication is powerful, and one of the key factors of communicating effectively in a digital environment is finding the balance between synchronous and asynchronous communication. When used together correctly, chat and Wiki can streamline the communication process for clutter-free collaboration, resulting in increased productivity. </p>



<p>Just remember: <em>Chat is like a river; Wiki is like a dam.</em></p>
	</div><!-- .entry-content -->

	 <!-- .entry-footer -->
</article></div>]]>
            </description>
            <link>https://www.airsend.io/blog/index.php/2020/05/24/1-tip-on-how-effective-communication-can-be-achieved-in-a-digital-work-environment/</link>
            <guid isPermaLink="false">hacker-news-small-sites-23622241</guid>
            <pubDate>Wed, 24 Jun 2020 00:18:52 GMT</pubDate>
        </item>
    </channel>
</rss>
