<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>
<![CDATA[Hacker News - Small Sites - Score >= 2]]>
        </title>
        <description>
<![CDATA[Hacker News stories from domains that aren't in the top 1M and that have a score of at least 2. Updated nightly via https://github.com/awendland/hacker-news-small-sites]]>
        </description>
        <link>https://news.ycombinator.com</link>
        <generator>RSS for Node</generator>
        <lastBuildDate>Mon, 22 Feb 2021 08:32:12 GMT</lastBuildDate>
        <atom:link href="https://raw.githubusercontent.com/awendland/hacker-news-small-sites/generated/feeds/hn-small-sites-score-2.xml" rel="self" type="application/rss+xml"></atom:link>
        <pubDate>Mon, 22 Feb 2021 08:32:12 GMT</pubDate>
        <language>
<![CDATA[en-US]]>
        </language>
        <managingEditor>
<![CDATA[me@alexwendland.com (Alex Wendland)]]>
        </managingEditor>
        <ttl>240</ttl>
        <item>
            <title>
<![CDATA[Art of Finishing Things (or how to stop the never-ending perfectionism loop)]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=26202468">thread link</a>) | @mjoksimovic
<br/>
February 20, 2021 | https://unstructed.tech/2021/02/20/art-of-finishing-things/ | <a href="https://web.archive.org/web/*/https://unstructed.tech/2021/02/20/art-of-finishing-things/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
				












<h2>Background</h2>



<p>You would think that starting or sustaining at anything is hard enough, right? But once you do start and once you do keep doing it, assuming that there‚Äôs an actual end to it, you‚Äôd expect it to be easy, no? Since you overcame the static friction and (hopefully) managed to do it for long enough to bring it to closure, finalizing the thing (whatever the thing is) should be a no brainer, right?</p>



<p>WRONG! </p>



<p>I can tell you, firsthand, that you are so damn wrong. Doubly so if you are somewhere high on the perfectionist spectrum.</p>



<p>Finishing a task, finalizing a project or wrapping up your bachelor thesis ‚Äì they all come with specific set of issues. And this article is all about tackling them.</p>



<h2>Real-life story</h2>



<p>I finished all my exams and was discussing with my mentor which subject to tackle for my thesis work. Everything run by so fast and I just felt like I never gave my 100%. I did pretty good overall but I just felt like I never demonstrated my best. This was a time to make up for that.</p>



<p>‚ÄúHow much time do I actually have to submit this thesis?‚Äù. It was around late February.</p>



<p>‚ÄúWell, the latest you have is by October, but I‚Äôd strongly suggest you to aim for June. No need to drag it any further than that‚Äù.</p>



<p>Almost eight months in worst case. Hell, even if I wrote half a page a day, I could tackle this in three months. EASILY.</p>



<p>Now, you have to understand that, by being a perfectionist and if you‚Äôre reading this ‚Äì you probably are one, <span>you tend to categorize tasks in two categories ‚Äî ULTRA IMPORTANT or NOT IMPORTANT AT ALL</span>. The latter ones are fine ‚Äì you probably don‚Äôt need this article to have those tackled. But the ones that you categorize as ULTRA IMPORTANT, well hell‚Äôs bells, <span>unless you apply some tools of the trade, those tasks are doomed to last FOREVER</span>.</p>



<p>Needless to say in which category did my thesis end up, right? It was my personal work of art, expressed by letters being grouped into words. Every chapter would be a mind blowing one. Every comma had a pure holistic reasoning behind it. It was my terrestrial legacy to all of the readers and all future generations to come.</p>



<p>Two months and, I kid you not, all I had was a title. Well, a rather good one I should say ‚Äì ‚ÄúUsing audio-fingerprinting technique for the purpose of identification and categorization of an audio sample‚Äù. But still, it‚Äôs ALL I had in TWO months. And it wasn‚Äôt even written in a required format, but rather hanging in my notes app. At least it ticked all of my shitboxes ‚Äì it sounded holistic and I‚Äôm sure the academia would fall over it‚Äôs butt once I released it to wilderness ‚Ä¶</p>



<p>‚ÄúOkay‚Äù, I thought, ‚Äúat least I have a month to wrap it up. I can do two pages a day or so and I‚Äôll be good to go‚Äù. What a dumb-ass thinking it was ‚Ä¶</p>



<p>I‚Äôd like to say that it took me a month to finish, but that‚Äôd be a lie. It took me seven months and twenty eight days of randomly writing thoughts here and there, widening and narrowing down all the topics that I‚Äôd love to cover ‚Ä¶ And the clock was actively working against me. The paranoia started kicking in. Frankly, I probably would never even have finished it if it wasn‚Äôt for my professor who contacted me in late September to tell me that I have two days to deliver a finished and printed version. He loved the progress and he approved everything that I covered so far, but he needed it finished. F*ck!</p>



<p>Not only did I finish the whole thesis in 48 hours (I was literally writing the day and night; the only time when I wasn‚Äôt writing was during the 8 hours when I had work to attend to), but it turned out pretty good! Probably not how I envisioned it, but regardless. And I liked it.</p>



<p>Now, I would love to say that I learned my lesson here and that my master thesis took a different course. Not exactly. However, I‚Äôve learned a trick ‚Äì <span>I wrote the intro and conclusion before I wrote the middle part</span>. Combined with a fixed deadline, it actually did wonders. And I‚Äôll elaborate on that now ‚Ä¶</p>



<h2>The ‚ÄúLife‚Äôs Work‚Äù problem</h2>



<p>You know, I‚Äôm not exactly sure if this is just my problem or a rather generic one. I would bet on the latter.</p>



<p><span>Be it a thesis, a short-term task or a whole project that you are working on, we tend to believe that it just has to be perfect. Good enough is not good enough</span>. But, why so?</p>



<p>I can‚Äôt speak for everyone, but when it comes to me, I actually think that I‚Äôm afraid of being judged. Especially for something that I do care about. I‚Äôm afraid that someone is going to look at what I did and just be like ‚Äúmeh, it‚Äôs okay‚Äù, or ‚Äúmeh, it could have been better‚Äù. The sheer thought of that scares the living shit out of me.</p>



<p>Obviously, the only way of preventing someone from judging you (yes, YOU!) is to make it your life‚Äôs work. Pour all time and energy into it, trying to make it perfect.</p>



<p>And you know what‚Äôs the problem with ‚Äúlife‚Äôs work‚Äù? You either drop dead before you‚Äôre finished, or you give up on it. But one thing is guaranteed ‚Äì they take shitload of time and you probably miss bunch of other opportunities in the process. Worst of all? <span>Once you do do finish (assuming that you do so), and once the initial excitement wears of, you realize that it wasn‚Äôt even that important in the first place</span>. It becomes yet another ‚Äúmeh, it‚Äôs okay‚Äù on your shelf. And you move on, determined not to repeat the same mistake again.</p>



<h2>Deadline as a medium of creative drive</h2>



<p>You know, I‚Äôm a programmer. And I‚Äôve been so my whole life. And <span>if there is ONE thing that is guaranteed to trigger my vomit reflex it has to be the mention of a ‚Äúdeadline‚Äù</span>. Seriously.</p>



<p>Yet, <span>I would lie if I told you that there‚Äôs been anything remotely more efficient than having a fixed deadline</span>. The date when you have to have your project finished, or the date when you have to turn your homework or thesis in.</p>



<p>You would assume that NOT having a deadline is a proper way to fire up your creative juices, right? Because, putting a TIMELINE on a creative work beats the purpose of creativity, right? </p>



<p>Wrong. Partially, at least.</p>



<p>If you haven‚Äôt done so already, I‚Äôd strongly suggest you go and read <a href="https://www.goodreads.com/book/show/18077903-creativity-inc?ac=1&amp;from_search=true&amp;qid=UIM1mGMSpj&amp;rank=1" target="_blank" rel="noreferrer noopener">Creativity, Inc</a>. It‚Äôs written by Ed Catmull, a guy who happens to be a brain behind 3D graphics and many of the Pixar‚Äôs cartoons. He also happens to be a President of Disney‚Äôs animation studio. </p>



<p>He argues that the deadlines are THE BEST way to bring your creativity to anything that is useful. Like, you know, a Toy Story for example. And how so? Well, by treating it as a medium, and not as a whip. You set a deadline for a check-up, but you don‚Äôt threaten people with being beaten if they miss it. You have people commit to deliver SOMETHING by the fixed date and then you decide how to proceed. Rinse &amp; repeat until it‚Äôs perfect!</p>



<p><span>But, what do you do if you DON‚ÄôT have a fixed deadline (e.g. you‚Äôre working on your personal pet project, like, a blog post for example)? Well, you MAKE one</span>! And just to ensure that you do have actual stakeholders waiting for the ‚Äúoutcome‚Äù, you make a public commitment!</p>



<h2>Public Commitment as a viable alternative</h2>



<p>If you‚Äôve been following my ‚Äúwork‚Äù on Instagram or LinkedIn, you probably have noticed that I usually publish a screenshot of the new article that I‚Äôm starting to work on. And you might have been wondering, and rightfully so, WHY am I doing that? What‚Äôs the purpose of publishing a screenshot of an unpublished article?</p>



<p>That is my public commitment! That is how I make an artificial deadline and how I make you a stakeholder. By publishing the screenshot, I‚Äôm passively announcing that I‚Äôm working on something new and that you should expect the final version soon. And there it is. My artificial 5-days deadline is set and my creative juices are on fire now!</p>



<p><span>So, in case that you want to work on ANYTHING that doesn‚Äôt have a strong deadline, go and make one</span>! If you‚Äôre about to embark on a diet ‚Äì announce that you are planning to ‚Äúlose X kilograms by ‚Ä¶..‚Äù. If you‚Äôre working on a task, tell your boss that you will be finished by next week. Or, if you‚Äôre about to start blogging ‚Ä¶ well, announce it! Make your public commitment and then, the only thing that you‚Äôll be left with is ‚Äì having to do it üôÇ Because, you wouldn‚Äôt want to be a liar, wouldn‚Äôt you? üôÇ</p>



<h2>Your turn!</h2>



<p>Whatever it is that you are working on (or planning to do), go and announce WHEN will it be finished! Make a PUBLIC COMMITMENT. Make artificial stakeholders.</p>



<p><strong>You don‚Äôt have to make it PUBLIC PUBLIC</strong> though. Sharing it with your inner circle, your family or, you know, your boss, is absolutely OK as well. <span>What‚Äôs important is that<strong> you commit to at least one person </strong>and that person has to keep you accountable</span>!</p>



<p>I guarantee that once you scratch the power that lies under the surface of public commitment, you‚Äôll have hard time NOT finishing anything ever again!</p>



<h2>Conclusion</h2>



<p>Be it a task, a project, a thesis or a general goal that you want to achieve, putting end to what you started is as complex as starting and sustaining at it is. Combined with a ‚Äúlife‚Äôs work‚Äù problem where we tend to categorize things as ultimate expression of our creativity and skilfulness, we have a perfect recipe for a never-ending crusade.</p>



<p>One of the best ways to tackle this is a battle tested method of a deadline and commitment. Commit yourself either to your best friend or by announcing it publicly, and do make sure to create stakeholders and set expectations. This, in turn, will be one of the best driving forces both to keep you on track of what matters and to ensure that you are actually going to close.</p>



<p>Good luck and let me know how you did!</p>



<h2>Useful resources</h2>



<p>Unfortunately, I don‚Äôt have that many resources directly related to the subject of ‚Äúfinishing‚Äù things. Hence, I will recommend some of the things that, among other things, tackle some of the topics that I wrote about:</p>



<ul><li>Creativity, Inc. by Ed Catmull ‚Äì it‚Äôs not a self-help book but it deals with the topic of creativity and how Pixar achieved it. You‚Äôll get to ‚Ä¶</li></ul></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://unstructed.tech/2021/02/20/art-of-finishing-things/">https://unstructed.tech/2021/02/20/art-of-finishing-things/</a></em></p>]]>
            </description>
            <link>https://unstructed.tech/2021/02/20/art-of-finishing-things/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26202468</guid>
            <pubDate>Sat, 20 Feb 2021 08:03:28 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Mastodon Is Bound to Fail]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 3 (<a href="https://news.ycombinator.com/item?id=26202281">thread link</a>) | @todsacerdoti
<br/>
February 19, 2021 | https://raccoon.onyxbits.de/blog/mastodon-social-network-review/ | <a href="https://web.archive.org/web/*/https://raccoon.onyxbits.de/blog/mastodon-social-network-review/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

<p>I have a problem with this blog. It used to be powered by Wordpress, but the <bbr title="Content Management System">CMS pissed me off without end over the years, so I migrated to Hugo. That fixed a lot of the problems, except the main one: it is still (mostly) a Wordpress style blog, in which posts are fat content pieces of content, consisting of a  title and at least one paragraph of text. This is utterly unsuitable for things like posting status updates or sharing thoughts. Twitter does way better here, but it‚Äôs a proprietary platform, I‚Äôm not willing to bind myself to.</bbr></p>

<p>So, how about Mastodon then? Looks like Twitter, works like Twitter, but is federated and sadly, also a lost cause.</p>

<h2 id="the-thing-mastodon-gets-wrong">The thing, Mastodon gets wrong</h2>

<p>To me, it seems like Mastodon is trying to be a social network, while, ironically, completely failing to understand the network effect. It‚Äôs the right tool for the wrong people (or the wrong tool for the right people? I don‚Äôt know).</p>

<p>Let‚Äôs face it, what we want is a platform where you can have an intelligent conversation, where our privacy is respected and where we stay in control. But that‚Äôs not at all the audience, social media is build for. The ecosystem is entirely structured around all those gone gaga self promoters and would be celebrities that have nothing to contribute except ‚Äúthemselves‚Äù and are willing to sacrifice any last piece of dignity, if only it increases their following, so they have a number to show to their sponsors. The deal influencers enter is simple: bring in two new followers to the platform, get (an old) one for free. Keep any of the money, you may make from sponsors. Now go and post pictures of your lunch before (and after) you eat it.</p>

<p>
  
  <span>An ugly truth about building a better mousetrap</span>
  
  
It's the shitty parts, that made the original design so successful.

</p>
                             
                             

<p>And that in a nutshell is why Mastodon is going to fail: it simply is not build for the people who bring in other people, as it lacks any reward mechanism for multipliers. Social media is (and has to be) inherently anti-privacy in order to allow for monetizing ‚Äúmy personal life‚Äù. A commodity, available to everyone without any skill requirement to exploit, so there‚Äôs no shortage of dipshits, willing to take the deal. Most fail, but even in doing so, still promote the networks.</p>

<h2 id="quo-vadis">Quo vadis</h2>

<p>So, Mastodon has a choice. Either continue on the path of mimicking Twitter (without getting the crucial part right) and stay a niche product. Or (actively) attract marketeers, influencers and other attention whores, by promising them an audience while becoming a federated ad platform.</p>

<p>Either way, it‚Äôs not for me.</p>
</div></div>]]>
            </description>
            <link>https://raccoon.onyxbits.de/blog/mastodon-social-network-review/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26202281</guid>
            <pubDate>Sat, 20 Feb 2021 07:16:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Skeptics Introduction to Crypto Art and NFTs]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26202152">thread link</a>) | @zuhayeer
<br/>
February 19, 2021 | https://justincone.com/posts/nft-skeptics-guide/ | <a href="https://web.archive.org/web/*/https://justincone.com/posts/nft-skeptics-guide/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p><img src="https://justincone.com/images/warning.png" alt="Warning"></p><p>Since writing this guide, I‚Äôve become increasingly concerned about <a href="https://memoakten.medium.com/the-unreasonable-ecological-cost-of-cryptoart-2221d3eb2053" target="_blank">the enormous environmental impact of cryptoart</a>, which currently relies on the Ethereum blockchain.</p><p><strong>The energy usage of Ethereum is ludicrous.</strong> Yes, there are solutions <a href="https://spectrum.ieee.org/computing/networks/ethereum-plans-to-cut-its-absurd-energy-consumption-by-99-percent" target="_blank">in the works</a>, but they‚Äôre going to take a lot of time to implement.</p><p>I‚Äôm going to leave the contents below online for reference, but I might decide to take them down (or radically alter them) soon.</p><p>Please be responsible. Don‚Äôt jump into this scene until a clear, viable, environmentally-responsible pathway has opened up.</p><p>‚Äî<strong>2021.01.20</strong></p><h2 id="who-is-this-guide-for">Who is this guide for?</h2><p>This guide is for digital artists and designers curious about cryptoart and NFTs.</p><p>If you‚Äôre reading this, you‚Äôve probably‚Ä¶</p><ul><li><p>heard about <a href="https://decrypt.co/51270/beeple-nft-sale" target="_blank">Beeple selling $582,000 USD of cryptoart in 5 minutes</a>.</p></li><li><p>been confused by what NFTs are.</p></li><li><p>wondered if you could get in on this whole thing before it disappears.</p></li></ul><p>This guide has been intentionally written as a high-level introduction for general audiences.</p><h2 id="what-this-guide-isnt">What this guide isn‚Äôt</h2><p>This is not a technical guide.</p><p>I‚Äôm not going to explain the details of the technology involved. You can visit the <a href="#further-reading">further reading</a> section below if you want to go deep.</p><p>If you‚Äôre the type of person who likes to start sentences with, ‚ÄúWell, <em>actually‚Ä¶</em>‚Äù then <strong>this guide is not for you.</strong> Please go away.</p><p><img src="https://justincone.com/images/cryptopunks.png" alt="Cryptopunks"><em><a href="https://larvalabs.com/cryptopunks" target="_blank">Cryptopunks</a>, a beloved cryptoart experiment and early NFT</em></p><h3 id="this-is-unotu-an-endorsement-of-cryptoart">This is <u>not</u> an endorsement of cryptoart</h3><p>While the cryptoart scene is interesting and sometimes exciting, it currently has <a href="https://digiconomist.net/ethereum-energy-consumption/" target="_blank">a massive energy consumption problem</a>.</p><p>We‚Äôll get into this <a href="#isnt-crypto-really-bad-for-the-environment">later</a>, but please understand that the environmental impacts of the cryptoart market are sizable.</p><h2 id="who-am-i">Who am I?</h2><p>I‚Äôve been a designer, technologist, and communicator for over 20 years.</p><p>Many guides to cryptoart and NFTs are written by a) groups that stand to benefit from them or b) zealous individuals who drank an entire gallon of crypto kool-aid in one sitting.</p><p>I am neither.</p><p>I‚Äôll shoot straight, and I‚Äôll skip the jargon and acronyms when I can.</p><p>(And trust me: I haven‚Äôt been drinking the kool-aid. I find this topic fascinating, but I‚Äôm a skeptic‚Äîas you‚Äôll see below.)</p><h3 id="disclaimer">Disclaimer</h3><p>I‚Äôm not a cryptoart expert. I‚Äôm a nerd who saw a need for this guide, and I filled it.</p><p>I‚Äôll regularly correct and update this guide, keeping track of major changes and giving credit for contributions in the <a href="#changelog">Changelog</a> below.</p><p>‚úâÔ∏è <em><a href="mailto:me@justincone.com">Contact me</a> with questions or ideas. Don‚Äôt be shy! I‚Äôm nice.</em></p><h3 id="why-did-i-create-this-guide">Why did I create this guide?</h3><p>I don‚Äôt know. It was fun? I‚Äôm weird.</p><h2 id="what-is-cryptoart">What is cryptoart?</h2><p>There‚Äôs no universally accepted definition of cryptoart. For now, let‚Äôs use this:</p><blockquote><p>Cryptoart is art that uses blockchain technology in its creation and/or distribution.</p></blockquote><h2 id="okay-so-what-is-blockchain-technology">Okay, so what is blockchain technology?</h2><p>Think of blockchains as giant spreadsheets<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup> that can be viewed by anyone. I know: <em>Boooring!</em></p><p>But wait! These spreadsheets have ‚ú®special rules‚ú®.</p><ul><li><p>You‚Äôre not allowed to delete or change rows in the spreadsheet.</p></li><li><p>You can only add a new row after the last row. (Weird, right?)</p></li><li><p>When you add a row to the spreadsheet, a network of computers do a bunch of super complex math to confirm that what you added is okay. (Even weirder.)</p></li><li><p>If you try to sneak a change into the spreadsheet‚Äîlike, I don‚Äôt know, give yourself a million bucks‚Äîthat change will be rejected by the network.<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup></p></li></ul><p>Just like normal spreadsheets, blockchains are great for keeping track of transactions.</p><h3 id="um-transactions">Um‚Ä¶ transactions?</h3><p>Yeah, you know: I give you something, you give me something in return. Transactions.</p><p>Blockchains store transactions in a way that is viewable by anyone but editable only under certain conditions.</p><p>(See the <a href="#okay-so-what-is-blockchain-technology">special spreadsheet rules above</a>, in case you already forgot them.)</p><h2 id="what-are-nfts">What are NFTs?</h2><p>Now we‚Äôre getting to the juicy stuff. üçã</p><p>NFT stands for Non-Fungible Token. But what does that mean?</p><p><em>Don‚Äôt worry about it.</em> Seriously. Other guides try to explain fungibility, but I‚Äôm not going to. It‚Äôs boring and too technical for our purposes.<sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup></p><p>The keyword to remember is <strong>token.</strong> We‚Äôll come back to it in a minute.</p><p>For now, let‚Äôs <strong>think of NFTs as digital collectibles.</strong> In the real world, pretty much anything can be collectible, given the right conditions: stamps, books, Pok√©mon cards, spoons.</p><p>(No really, <a href="https://www.ebay.com/b/Souvenir-Spoons/bn_7006309973" target="_blank">people collect spoons</a>.)</p><p>The same is true in the digital world. <strong>NFTs are a <a href="#okay-so-what-is-blockchain-technology">blockchain technology</a></strong> that allow people to collect and trade just about anything, including‚Ä¶ wait for it‚Ä¶ <em>art.</em></p><p><img src="https://justincone.com/images/mona.jpg" alt="Modern Mona Lisa"><em>This terrible thing, which I created in five minutes, could totally be an NFT.</em></p><p>Theoretically, NFTs can be used for lots of other stuff, too: issuing movie tickets, selling video game items, or even proving ownership of real estate.</p><p>But let‚Äôs stay focused: we‚Äôre talking about digital art here.</p><h2 id="what-is-digital-art">What is ‚Äúdigital art‚Äù?</h2><p>Oh no, we‚Äôre not going down <em>that</em> rabbit hole.</p><p>You‚Äôll have to define digital art for yourself. Whatever definition you have in your head is probably good enough for our purposes.</p><p>Let‚Äôs keep moving.</p><p>There are two basic steps to creating an NFT:</p><ol><li>Make a thing.</li><li>Tokenize the thing.</li></ol><h2 id="1-make-a-thing">1. Make a thing</h2><p>NFTs start as digital art (i.e. stuff you already know how to make):</p><ul><li>still images</li><li>GIFs</li><li>video loops (with or without audio)</li><li>music</li></ul><h3 id="what-about-physical-art-cant-i-turn-a-sculpture-or-a-painting-into-an-nft">‚ÄúWhat about physical art? Can‚Äôt I turn a sculpture or a painting into an NFT?‚Äù</h3><p>Kind of. It‚Äôs trickier than you think. We‚Äôll get to it in a second.</p><p>(If you really can‚Äôt wait, <a href="#creating-physical-objects">jump ahead</a>. But don‚Äôt get mad at me if you‚Äôre confused.)</p><h2 id="2-tokenize-the-thing">2. Tokenize the thing</h2><p>Remember <a href="#what-are-nfts">earlier</a> that we said NFTs are tokens? Follow along:</p><ul><li><p>For our purposes, think of a token as a digital link to something you‚Äôve made.</p></li><li><p>Tokens live on blockchains, which we‚Äôve <a href="#okay-so-what-is-blockchain-technology">already established</a> are great for keeping track of transactions.</p></li><li><p>When you ‚Äútokenize‚Äù a digital artwork, you‚Äôre linking something you‚Äôve made to a blockchain, which can be useful for proving ownership of that thing (among other things).</p></li></ul><h3 id="wait-there-are-_multiple_-blockchains">‚ÄúWait, there are <em>multiple</em> blockchains?‚Äù</h3><p>Oh yeah, there are loads of blockchains. You can even <a href="https://dzone.com/articles/how-to-create-your-own-cryptocurrency-blockchain-i" target="_blank">create your own</a>.</p><p>For NFTs, Ethereum is currently the most popular blockchain.<sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup></p><p>This is important: <strong>the token by itself is not cryptoart.</strong></p><p>The NFT (remember: T is for token) merely <em>points</em> to something else and says, ‚ÄúHey, this thing and I are joined at the hip. We‚Äôre inseparable. Think of us as <strong>one</strong>.‚Äù</p><p><img src="https://justincone.com/images/nft-diagram.jpg" alt="Diagram showing the relationship between an NFT and a hosted digital image."><em>Token + media = cryptoart</em></p><h3 id="how-do-you-link-a-token-to-a-digital-thing">How do you link a token to a digital thing?</h3><p>Typically, you link a token to a digital thing you‚Äôve made by attaching some extra information (metadata) to the NFT. That extra info includes a link to an image, video, GIF, song, etc. that‚Äôs hosted somewhere else.<sup id="fnref:5"><a href="#fn:5" role="doc-noteref">5</a></sup></p><p>This arrangement begs a few questions:</p><ul><li>Where will the ‚Äúofficial‚Äù digital asset be hosted?</li><li>How can collectors ensure that the asset won‚Äôt be changed by the artist?</li><li>What happens if the asset host goes down? Or disappears?</li></ul><p>There are solutions to these problems in the works,<sup id="fnref:6"><a href="#fn:6" role="doc-noteref">6</a></sup> and some of them get technical pretty fast<sup id="fnref:7"><a href="#fn:7" role="doc-noteref">7</a></sup>. This topic goes beyond the introductory level, so let‚Äôs keep moving for now.</p><h2 id="understanding-ownership">Understanding ‚Äúownership‚Äù</h2><h4 id="if-the-nft-isnt-the-actual-image-animation-music-etc-that-i-created-cant-people-just-copy-my-artwork">‚ÄúIf the NFT isn‚Äôt the actual image, animation, music, etc. that I created, can‚Äôt people just copy my artwork?‚Äù</h4><p>Remember: <strong>The complete cryptoart is the token <em>and</em> the media you created.</strong> So they can copy your image or your GIF or whatever‚Ä¶ but it doesn‚Äôt really matter.</p><p>Depending on how you see things, this is either great news or a big problem.</p><p><em>(By the way, the inherently copiable nature of digital art is the #1 thing I see NFT newbies struggling with‚Äîand for good reason. It‚Äôs confusing.)</em></p><h3 id="okay-lets-work-through-this-together">Okay, let‚Äôs work through this together.</h3><p>An NFT says that one specific copy of your digital media‚Äîthe one listed in the NFT‚Äôs metadata‚Äîis the one that matters.</p><p><em>We discussed this above. If you missed it, <a href="#token--media--cryptoart">go back</a> and make sure you understand it before moving on.</em></p><p>So you could have literally millions of copies of your sweet CG teapot floating around the web, but the owner of your cryptoart only cares about the ‚Äúofficial‚Äù copy linked to the NFT.</p><h4 id="im-sorry-but-thats-insane">‚ÄúI‚Äôm sorry, but that‚Äôs insane.‚Äù</h4><p>At first blush, <em>I agree.</em> But let‚Äôs step back for a second.</p><p>For a few bucks, you can find and print a high-resolution copy of Cindy Sherman‚Äôs ‚ÄúUntitled #96.‚Äù Here‚Äôs a copy of it <em>right here:</em></p><p><img src="https://justincone.com/images/sherman.jpeg" alt="Cindy Sherman's 'Untitled #96'"><em>‚ÄúUntitled #96‚Äù by Cindy Sherman (1981)</em></p><p>In 2011, a print of that photograph <a href="https://en.wikipedia.org/wiki/Untitled_96" target="_blank">sold for $3.89 million USD during a Christie's auction</a>‚Äîsetting a record for the most expensive photo ever sold (at that time).&nbsp;</p><p>Then, as now, people could easily reproduce the photo. Somehow, though, this didn‚Äôt stop the photo from selling for a boatload of cash.</p><h4 id="thats-different-people-were-buying-one-specific-print-of-the-photograph-one-created-by-the-artist-and-it-was-a-print-of-the-highest-quality">‚ÄúThat‚Äôs different. People were buying one specific print of the photograph, one created by the artist. And it was a print of the highest quality.‚Äù</h4><p>What if we broke into Cindy Sherman‚Äôs private studio, stole the original negative of the photograph, and then produced a print that was identical in quality to the one sold during the 2011 auction?</p><p>Would we be able to sell it for the same amount? Or more?</p><h4 id="no">‚ÄúNo.‚Äù</h4><p>Why not?</p><h4 id="it-wouldnt-be-official-it-wouldnt-be-from-the-artist">‚ÄúIt wouldn‚Äôt be official. It wouldn‚Äôt be from the artist.‚Äù</h4><p>Ah! Interesting. So we need to be able to trace the print back to the artist somehow?</p><h4 id="okay-i-see-where-youre-going-an-nft-traces-the-official-artwork-back-to-the-artist-and-the-blockchain-can-show-all-the-subsequent-owners-including-the-current-one">‚ÄúOkay, I see where you‚Äôre going. An NFT traces the official artwork back to the artist, and the blockchain can show all the subsequent owners, including the current one.‚Äù</h4><p>Exactly.</p><h4 id="but-what-if-we-hung-our-copy-right-next-to-the-official-print-in-an-identical-frame">‚ÄúBut what if we hung our copy right next to the official print in an identical frame?‚Äù</h4><p>It wouldn‚Äôt matter.</p><h4 id="what-yes-it-would-you-wouldnt-be-able-to-tell-them-apart">‚ÄúWhat?! Yes, it would! You wouldn‚Äôt be able to tell them apart.‚Äù</h4><p>The owner would know that the official version is the one in that <em>exact</em> spot on the wall, in that specific building.</p><p>It‚Äôs the same with NFTs: They point to a specific copy of a digital artwork ‚Äúhanging‚Äù in a specific place on the internet.</p><h4 id="i-still-think-its-crazy-that-people-can-copy-my-images-that-devalues-the-art">‚ÄúI still think it‚Äôs crazy that people can copy my images. That devalues the art!‚Äù</h4><p>Maybe. But it doesn‚Äôt <em>always</em> work that way.</p><p>I bet your mother or your uncle has a magnet on their refrigerator of one of Monet‚Äôs famous Water Lilies paintings.</p><p>Amazon currently returns nearly 800 items when you search for ‚ÄúMonet Water Lilies,‚Äù including neckties, mouse pads, and face masks.</p><p><img src="https://justincone.com/images/mask.jpeg" alt="Monet face mask"><em>A horrendous idea for a face mask. And yet, there it is.</em></p><p>Despite these countless copies, Monet‚Äôs Water Lilies paintings <a href="https://en.wikipedia.org/wiki/Water_Lilies_%28Monet_series%29#The_paintings_at_auction" target="_blank">routinely fetch tens of millions of dollars</a> at auctions.&nbsp;</p><p>Perhaps the prevalence of reproductions in our culture has ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://justincone.com/posts/nft-skeptics-guide/">https://justincone.com/posts/nft-skeptics-guide/</a></em></p>]]>
            </description>
            <link>https://justincone.com/posts/nft-skeptics-guide/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26202152</guid>
            <pubDate>Sat, 20 Feb 2021 06:38:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What on Earth is this Encryption Scheme?]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26201723">thread link</a>) | @soopurman
<br/>
February 19, 2021 | https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/ | <a href="https://web.archive.org/web/*/https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody" id="content"><p>I have taken a couple terabytes of photos over the years, and have a mild phobia of deleting data, so I keep my photos on a <a href="https://www.synology.com/en-global">Synology DiskStation NAS</a>. I‚Äôve got all the files on the thing:</p><ul><li>backed up to the cloud</li><li>encrypted,</li></ul><p>because back in 2016, my <a href="https://www.instagram.com/p/BMpgY9zAGbD/">apartment was broken into and thieves took all the electronics</a>. I‚Äôve been slightly paranoid ever since.</p><p>The Synology NAS generally works pretty well, but the interface for decrypting a drive after booting is <em>extremely</em> painful. It‚Äôs about 10 clicks, a username, two different passwords, and a UI that is kinda wonky (it‚Äôs a desktop in a web browser)? Here‚Äôs a screengrab:</p><figure><video alt="Unlocking an encrypted drive in the Synology DiskStation UI" src="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/decrypt.mp4" width="588" muted="" autoplay="" loop="" playsinline=""></video><figcaption><p>22 seconds is my personal speed record.</p></figcaption></figure><p>There are alternative solutions to this ‚Äì you can set it up so that it <a href="https://www.synology.com/en-au/knowledgebase/DSM/tutorial/File_Sharing/How_to_encrypt_and_decrypt_shared_folders_on_my_Synology_NAS#t4_1">reads the encryption key from a USB disk on startup, for example</a> ‚Äì but, if I‚Äôm worried about the whole thing being stolen, it‚Äôs not a good idea to leave the encryption keys plugged into the thing, and it‚Äôs also not a nice UX to find and plug in a USB before turning the thing on.</p><p>This‚Ä¶ seems kinda silly to me, and something that should be solvable with ‚ú® <em>technology</em> ‚ú®. I‚Äôm only ever accessing this from one computer, for example, and every modern operating system has a good credential storage system (think <a href="https://support.apple.com/guide/keychain-access/what-is-keychain-access-kyca1083/mac"><em>Keychain Access</em></a> on OSX or <a href="https://support.microsoft.com/en-us/windows/accessing-credential-manager-1b5c916a-6a16-889f-8581-fc16e8165ac0"><em>Credential Manager</em></a> on Windows 10). So, maybe my computer could take care of supplying encryption keys to the DiskStation!</p><p>I went looking for options, and discovered that the DiskStation Software has a <a href="https://global.download.synology.com/download/Document/Software/DeveloperGuide/Package/FileStation/All/enu/Synology_File_Station_API_Guide.pdf">publicly-documented web API (pdf)</a>. At least, a <em>mostly</em> publicly documented web API ‚Äì there‚Äôs no documentation for the methods to mount and unmount encrypted shares.</p><p>That web API is <em>also</em> used by the desktop software though! So it should theoretically be possible to use <a href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_are_browser_developer_tools">browser devtools</a> to see exactly <em>what</em> is being sent to the DiskStation. ü§î</p><p>So, I clicked on all the right things in the Web UI, got to the bit where you type in the password, opened the devtools to the ‚ÄúNetwork Requests‚Äù tab, typed in <code>abc123</code> as my password, hit ‚Äúsend‚Äù and then watched for the requests:</p><figure><img src="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/encryption-dot-cgi.png" alt="Firefox devtools screenshot, showing a request to an ominously-named 'encryption.cgi'"><figcaption><p>hmmmmmmmmmmm</p></figcaption></figure><p>Hmmm, that <code>encryption.cgi</code> looks a little ominous. I wonder what‚Äôs in it?</p><figure><img src="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/public-key.png" alt="Firefox devtools screenshot, showing huge blob of base16-encoded public-key"><figcaption><p>Yep, looks like encryption, alright</p></figcaption></figure><p>Ok, a public key. And then the web interface loads a spinner, and makes a request to <code>entry.cgi</code>. Let‚Äôs take a look at the contents of that request:</p><figure><img src="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/ciphertext.png" alt="A devtools screenshot, showing a jumbled blob of base64-encoded data with the phrases 'rsa' and 'aes' sprinkled throughout."><figcaption><p>HMMMMMMMMMMMMMMMM</p></figcaption></figure><p>Ok, so if we want to send a magic request to mount the encrypted share, it‚Äôs not going to be enough to supply the encryption password; we‚Äôre also going to need to figure out how to <em>correctly</em> supply it ‚Äì how to <em>encrypt</em> the encryption password, so to speak.</p><h2 id="so-what-is-this-crypto-system">So, what is this crypto system?</h2><p>Right. Here‚Äôs a high-level overview:</p><ul><li>First, we fetch the <code>public_key</code> from the server. That‚Äôs the call to the <code>encryption.cgi</code> endpoint we saw earlier. This isn‚Äôt actually the entire public key, it‚Äôs only <em>part</em> of it. In fact, this is a 4096-bit integer, encoded in base-16. The <em>other</em> part of the public key is the number <code>0x10001 == 65537</code>, which is hardcoded into the JavaScript.</li><li>Then, we generate 501 bytes worth of random text from the charset <code>0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ~!@#$%^&amp;*()_+-/</code> (that‚Äôs 77 different possible characters; I have no idea why this set was chosen though!).</li><li>We encrypt that random text using our public key. The encryption method is <a href="https://tools.ietf.org/html/rfc3447#section-7.2">RSA with PKCS1.5 padding</a>.</li><li>We MD5-hash that random text a bunch of times with an 8-byte salt. The end result of this is 48 bytes which certainly <em>look</em> pretty random to the naked eye.</li><li>We split those 48 bytes into two components ‚Äì a 32-byte (== 256-bit) key, and a 16-byte initialisation vector.</li><li>Remember the password we typed in? Yeah, I‚Äôd forgotten about it too! But now, we <em>finally</em> take that password, and encrypt it with AES in Cipher Block Chaining (CBC) mode with PKCSv7 padding, using the 256-bit key and 16-byte IV we derived in the previous step.</li><li>We bundle the RSA ciphertext, the 8-byte salt, and the AES ciphertext together and ship them across to the DiskStation.</li></ul><p>Still with me? It‚Äôs ok if that didn‚Äôt all make loads of sense yet; we‚Äôll now go over the interesting bits more closely.</p><h3 id="symmetric--asymmetric-ciphers">Symmetric / Asymmetric Ciphers</h3><p>Fundamentally, we‚Äôre using two cryptographic algorithms in concert:</p><ul><li><strong>RSA</strong>: RSA is an <em>asymmetric</em> cryptographic algorithm. Asymmetric cryptographic systems have two <em>keys</em> ‚Äì a public key, which allows only for encryption of the data, and a private key, which allows for both encryption <em>and</em> decryption.</li><li><strong>AES</strong>: AES is a <em>symmetric</em> cryptographic algorithm. In symmetric cryptography, all parties have the same key, and that key allows you to both encrypt and decrypt.</li></ul><p>It seems weird that we‚Äôre using both of these at the same time, right? But both systems have weaknesses, and mixing them together is an attempt at minimising the disadvantages of both schemes.</p><p>The problem with <em>symmetric</em> crypto systems by themselves is that you need a way to get that one key to every party that needs it. But you can‚Äôt just <em>send</em> it to them, because you don‚Äôt have a secure channel yet! Your options are:</p><ul><li>Share the key over a different trusted channel beforehand, or</li><li>have both parties derive the same shared key (from e.g. some partial data that they negotiate over the wire beforehand).</li></ul><p>Asymmetric crypto doesn‚Äôt have this problem ‚Äì if you‚Äôre able to share a key that can only be used for encrypting and not for decrypting, then the decryption keys never have to leave the recipient machine. You can then encrypt some text, and nobody except for the recipient can decrypt it ‚Äì not even you! Put it on the internet, write it on a banner attached to the back of a propeller plane ‚Äì the message will only be readable by the intended recipient.</p><figure><img src="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/your-ciphertext-here.jpg" alt="A propeller plane with a banner reading 'your ciphertext here'"></figure><p>Asymmetric cryptography is <em>slow</em>, though, so doing it for lots of data is going to really hurt performance.</p><p>A common solution is to simply <em>make up</em> a symmetric key, perform some symmetric encryption using that key, then encrypt <em>that</em> key using asymmetric cryptography, and deliver both to the remote party. Then, the remote party can:</p><ul><li>First, perform asymmetric decryption to obtain the symmetric key</li><li>Then, use that symmetric key to decrypt the rest.</li></ul><p>That‚Äôs what <em>this</em> particular system is doing. ‚ú®</p><h3 id="a-quick-note-about-rsa">A quick note about RSA</h3><p>I don‚Äôt know much about how RSA works, but as part of researching this article I discovered that it‚Äôs pretty easy to implement badly, and <a href="https://blog.trailofbits.com/2019/07/08/fuck-rsa/">extremely difficult to implement well</a>.</p><figure><img src="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/rsa-correct.gif" alt="Two developers correctly implement RSA, 2010, colorised"><figcaption><p><a href="https://www.youtube.com/watch?v=vPwzHm6buB8">Two developers correctly implement RSA</a>, 2010, colorised</p></figcaption></figure><p>As software developers, we spend a lot of time shipping things once they get to a point of ‚Äúit looks like it works‚Äù. <strong>You can‚Äôt take that approach with cryptography</strong>, and because everything is so opaque, it‚Äôs a lot easier to declare that your implementation works without realising that it‚Äôs missing fundamentals. Like correctness, for example.</p><h3 id="lets-talk-about-random-keyslets-talk-about-you-and-me">Let‚Äôs talk about random keys<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup></h3><p>Recall that this algorithm is generating 501 random bytes from a 77-character set, and encrypting that with RSA. 501 seemed like an oddly specific number to me; here‚Äôs the specific set of circumstances that characterise <em>why</em> we‚Äôre generating a string of this length.</p><p>RSA is a <a href="https://en.wikipedia.org/wiki/Block_cipher"><em>block cipher</em></a>, which means it operates on distinct fixed-size blocks of input and produces fixed-size blocks of output. How big can each block be? Well, RSA public keys are made up of two numbers: a (very large) modulus <code>n</code>, and a much smaller exponent <code>e</code>. RSA is capable of encrypting any message that‚Äôs smaller than <code>n</code> if you convert it to a number. In our case, we said that our modulus was a seemingly-random 4096-bit integer ‚Äì that means (approximately) that we can encrypt 512-byte blocks.</p><p>There‚Äôs an important implication here: if you don‚Äôt have enough input for a block, you need to fill it up somehow. Normally this is called a <em>padding scheme</em><sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup> in block-based cryptography.</p><p>Now, the system on this NAS in particular uses <a href="https://tools.ietf.org/html/rfc3447#section-7.2.1">PKCS1-v1.5 padding</a>, which prepends the message (before encryption) with 3 bytes of headers <em>plus</em> a minimum of 8 bytes<sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup> of random garbage. That makes 11 bytes out of a 512 byte block, which means we‚Äôve got‚Ä¶ 501 bytes left for our message. ‚ú®</p><h3 id="lo-fi-key-derivation">Lo-fi key derivation</h3><p>So‚Ä¶ we‚Äôve got this 501-byte string, with each character being one of 77 possibilities, and we think we know <em>why</em> it was chosen to be 501 bytes long. But that‚Äôs not going to work for AES-encrypting the password:</p><ul><li>AES requires a key size of 128, 192, or 256 bits. That‚Äôs 16, 24, or 32 bytes respectively, but we‚Äôve got <em>lots</em> more than that.</li><li>We can‚Äôt, however, just take a subset of bytes from the text and go from there ‚Äì because they‚Äôre selected from a narrow subset of possible bytes (77 out of 255!), you‚Äôd be losing an <em>enormous</em> amount of entropy in the key, making the encrypted text about 44,000,000,000,000,000 times<sup id="fnref:5"><a href="#fn:5" role="doc-noteref">5</a></sup> easier to break.</li></ul><p>These constraints need to be managed. We can smooth over both by applying a <a href="https://en.wikipedia.org/wiki/Key_derivation_function">key derivation function</a>, based on repeated rounds of MD5 hashing and concatenating. Hash algorithms, in general, are good for this because they map input data to‚Ä¶ not random, but random-<em>looking</em> output data.</p><p>I like to think of hashing as ‚Äúentropy laundering‚Äù ‚Äì if you‚Äôve got 256 bits of entropy in a 16kB file, taking the first 256 bits will give you only 64 bits of entropy. If you hash the whole 16kB file, then the entropy goes back up to the maximum of the entropy in the file and the entropy provided by the hash algorithm. This works because hash algorithms are designed to exhibit an <a href="https://en.wikipedia.org/wiki/Avalanche_effect">avalanche effect</a>.</p><p>I do <em>not</em> have the tools or experience to evaluate whether this specific scheme is secure or not (this one seems esoteric, and the <a href="https://security.stackexchange.com/questions/19906/is-md5-considered-insecure">use of MD5 is scary</a>!)‚Ä¶ so let‚Äôs move briskly on.</p><h3 id="aes-encryption">AES-encryption</h3><p>Finally, after a bunch of outdated and somewhat esoteric primitives, we‚Äôre back to something that is <em>good</em> and <em>works</em> and <em>only slightly</em> a <a href="https://en.wiktionary.org/wiki/footgun">loaded footgun</a> and is <em>still recommended for widespread use!</em> It‚Äôs AES with a 256-bit key.</p><p>AES is our symmetric cipher. Like RSA, it operates on blocks of fixed length. <a href="https://crypto.stackexchange.com/questions/66314/whats-the-best-block-cipher-mode-of-operation-for-rsa/66321#66321">Unlike RSA</a>, these blocks can be chained together. The strategies to do this are called <a href="https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation">‚ÄúBlock cipher modes of operation‚Äù</a>, and AES implementations ship with a number of them. The problem is, this means you have access ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/">https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/</a></em></p>]]>
            </description>
            <link>https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26201723</guid>
            <pubDate>Sat, 20 Feb 2021 05:00:46 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Fixing EKS DNS]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26201292">thread link</a>) | @mooreds
<br/>
February 19, 2021 | https://www.vladionescu.me/posts/eks-dns/ | <a href="https://web.archive.org/web/*/https://www.vladionescu.me/posts/eks-dns/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
                <p>Got to blog on the AWS Containers Blog: <a href="https://aws.amazon.com/blogs/containers/eks-dns-at-scale-and-spikeiness/">EKS DNS at scale and spikeiness</a>! üéâ</p>
<p>I usually just get to mentor people, and they get to post stuff publicly, so this is a nice change!</p>
<hr>
<blockquote>
<p>The AWS Containers Blog now <a href="https://github.com/aws/containers-roadmap/issues/303">seems to be missing my blog post</a>, so here‚Äôs a copy:</p>
</blockquote>
<h2 id="eks-dns-at-scale-and-spikeiness">EKS DNS at scale and spikeiness</h2>
<p><em>This is a guest post by&nbsp;Vlad Ionescu for Ownzones.</em></p>
<p>In his post we will discuss the issue of DNS errors at scale, that is, several hundreds to thousands of nodes, showing how the problems can be mitigated. This was an obstacle that affected Ownzones for several months and a problem that we expect everybody at scale will encounter. Two solutions will be proposed and their implementation will be discussed. Troubleshooting steps are shared for easy identification of the problem.</p>
<p>Ownzones is a pioneering technological force that‚Äôs transforming the OTT industry with ground-breaking innovations. Our product Ownzones Connect is a cloud-native platform, which leverages our proprietary technology as well as the best tools in the industry to provide studios an agile, low-cost solution for global distribution and localization. Some of the key features include the world‚Äôs first fully cloud-based, parallel processing IMF transcoder.</p>
<h3 id="problem">Problem</h3>
<p>At Ownzones, we run our applications in containers for increased developer velocity. Due to rather intense scaling requirements ‚Äî a multi-TB movie comes in and needs to be processed as soon as possible ‚Äî the decision was made to use Kubernetes for container orchestration. Since we are running in AWS, we make use of the amazing <a href="https://aws.amazon.com/eks/">Amazon Elastic Kubernetes Service</a> or EKS for short. We leverage other AWS services such as <a href="https://aws.amazon.com/rds/">Amazon Relational Database Service</a>, <a href="https://aws.amazon.com/elasticache/">Amazon ElastiCache</a>, and more. We manage all the services and infrastructure configuration in code with <a href="https://www.terraform.io/">Terraform</a> and we practice gitops with <a href="https://www.runatlantis.io/">Atlantis</a>.</p>
<p>The EKS clusters are running version 1.12 and we are in the process of upgrading all our clusters to 1.13. Each cluster has a different configuration depending on the customer needs for scale, but all of them scale a lot. As soon as jobs come in ‚Äî be they transcoding jobs, media analysis jobs, deliveries, or anything else ‚Äî the EKS clusters are scaled up by cluster-autoscaler. At peak, clusters may scale to hundreds or thousands of nodes to process the work as soon as possible.</p>
<p>The problems started to appear when customers or internal testing teams were scaling the system to higher limits, such as when transcoding or using FrameDNA to analyze large films or libraries of content. When the Kubernetes cluster was doing intense work and scaling above several hundreds of nodes, the processing time was stagnating or increasing. Having built a cloud native solution, the expectation was that adding additional processing power would lower the processing time.</p>
<p>We quickly established a cross-functional task force to investigate this issue.</p>
<p>A multitude of tools are used for observability at Ownzones: <a href="https://honeycomb.io/">Honeycomb</a> for events and traces, Sysdig for monitoring, Papertrail for logs, <a href="https://sentry.io/">Sentry</a> for error tracking, and more. Investigation into traces from Honeycomb showcased DNS resolution times taking seconds or more:</p>
<figure>
    <img src="https://www.vladionescu.me/posts/eks-dns/1-DNS-lookup-to-s3-taking-1-second.png" alt="A screenshot of a Honeycomb trace showing the DNS lookup for an S3 connection taking almost one second."> <figcaption>
            <p>A DNS lookup for S3 taking almost 1 second</p>
        </figcaption>
</figure>

<p>In some cases DNS lookups were taking multiple seconds:</p>
<figure>
    <img src="https://www.vladionescu.me/posts/eks-dns/2-DNS-lookup-to-s3-taking-2-seconds.png" alt="A screenshot of a Honeycomb trace showing the DNS lookup for an S3 connection taking more than 2 seconds"> <figcaption>
            <p>Sometimes DNS resulution spiked to multiple seconds</p>
        </figcaption>
</figure>

<p>Looking further into network metrics showed DNS errors spiking while work was being processed and recovering when the work was finished:</p>
<figure>
    <img src="https://www.vladionescu.me/posts/eks-dns/3-graph-showing-2-spikes-in-DNS-errors.png" alt="A screenshot of a Sysdig DNS errors graph showing spies in DNS errors"> <figcaption>
            <p>DNS errors spiking when work was happening</p>
        </figcaption>
</figure>

<p>The culprit was identified: when reaching a certain scale, a significant number of DNS errors (<code>EAI_AGAIN</code> and <code>ENOTFOUND</code>) that were leading to a lot of retries. Operations that were supposed to take a couple minutes were taking orders or magnitude longer. For example, transcoding a single 4K feature film in Ownzones Connect takes around 16 minutes. During this time, the EKS cluster is scaled to hundreds of nodes, which are peaking at 1.64 TB/s network traffic to S3 and 8.55k requests per second to S3.&nbsp;&nbsp;And that is for a single video track! Processing files in massively parallel ways is where cloud native approaches shine and Ownzones Connect is fully taking advantage of that. The result is a massive spike of work and DNS traffic. Having multi-second lookup times when doing 8.550 requests per second to S3 adds up to quite a lot.</p>
<p>Since the cause was narrowed down to DNS, the next step was to contact AWS Support.&nbsp;The DNS issues were appearing at scale and spiky workloads were especially affected. After investigation by AWS it was confirmed that the VPC networking was not experiencing elevated error rates, nor was S3.&nbsp;It was pointed out that due to the <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html#vpc-dns-limits">Amazon VPC DNS Limits</a> of 1024 packets per second per network interface the EKS-default 2 CoreDNS pods can be quickly overloaded. Each CoreDNS pod has to serve DNS traffic from the host through its own elastic network interface, which is limited to 1024 packets per second.</p>
<h3 id="attempt-one-increasing-coredns-pods">Attempt one: increasing CoreDNS pods</h3>
<p>The first and easiest improvement for DNS failures was to increase the number of CoreDNS pods. By default EKS has two replicas and that can be increased:</p>
<pre><code data-lang="console">kubectl scale deployment/coredns \
    --namespace kube-system \
    --current-replicas=2 \
    --replicas=10
</code></pre><p>At Ownzones, we run both on On-Demand Instances as well as on Spot Instances. This is not ideal as CoreDNS pods could be scheduled on a Spot Instance, which may be terminated at any time and potentially add disruption.</p>
<p>To work around this we edited the CoreDNS deployment to only run on On-Demand EC2 instances which we have tagged with the <code>stable</code> label:</p>
<pre><code data-lang="console">kubectl --namespace kube-system edit deployment/coredns

    ...
    spec:
        affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
                - key: beta.kubernetes.io/os
                operator: In
                values:
                - linux
                - key: beta.kubernetes.io/arch
                operator: In
                values:
                - amd64
                - key: nodegroup
                operator: In
                values:
                - stable
        containers:
            ...

</code></pre><p>Scaling the CoreDNS pods was an improvement, but we still saw significant error rates. We had thousands of nodes sending network traffic to 10 CoreDNS pods, which were spread on significantly fewer On-Demand nodes.</p>
<h3 id="attempt-two-node-local-dns">Attempt two: Node-local DNS</h3>
<p>Kubernetes developers have an addon that addresses the DNS problem: <a href="https://github.com/kubernetes/kubernetes/tree/master/cluster/addons/dns/nodelocaldns">NodeLocal DNS Cache</a>. Using this addon, a new CoreDNS DaemonSet can be configured so it runs on each node. Those new CoreDNS pods will act as a DNS cache: all pods on a specific node would have their requests sent to the local CoreDNS pod which would either serve a result from cache or forward the request upstream to the main CoreDNS pods.</p>
<p>This massively lowers the volume of DNS queries and makes spike handling a breeze and follows <a href="https://aws.amazon.com/premiumsupport/knowledge-center/dns-resolution-failures-ec2-linux/?nc1=h_ls">the AWS recommendation to cache DNS</a>.&nbsp;The first step is to decide which IP will be used for NodeLocal DNS. Typically <code>169.254.20.10</code> is chosen.</p>
<p>With the IP address decided, the YAML files from <a href="https://github.com/kubernetes/kubernetes/tree/release-1.15/cluster/addons/dns/nodelocaldns">k/k/cluster/addons/dns/nodelocaldns</a> need to be acquired. They cannot be applied directly as some values need to be replaced:</p>
<ul>
<li><code>__PILLAR__DNS__DOMAIN__</code> with <code>cluster.local</code> as per <a href="https://github.com/awslabs/amazon-eks-ami/blob/28845f97c05dacaf699a102faa690a4238b79f02/files/kubelet-config.json#L24">amazon-eks-ami‚Äôs kubelet-config.json.</a></li>
<li><code>__PILLAR__LOCAL__DNS__</code> with <code>169.254.20.10</code>, which is like the default address chosen above that the Node-local DNS will bind to on each node.</li>
<li><code>__PILLAR__DNS__SERVER__</code> with <code>10.100.0.10</code> or <code>172.20.0.10</code> depending on the VPC CIDR. <a href="https://github.com/awslabs/amazon-eks-ami/blob/ca61cc2bb6ef6fe982cc71ede7552a4a2c6b93e9/files/bootstrap.sh#L167-L170">On EKS</a>, the DNS Service is running at one of the two IPs and the relevant one needs to be chosen. The value can be seen by running <code>kubectl -n kube-system get service kube-dns</code> and checking the cluster IP.</li>
</ul>
<p>After the values are replaced the files have to be applied:</p>
<pre><code data-lang="console">kubectl apply -f nodelocaldns.yaml
</code></pre><p>This is not enough: Node-local DNS was installed, but it is not used by the pods! To actually have the pods use Node-local DNS the kubelet running on each node needs to be configured. The DNS resolver for the pods needs to point to the newly created Node-local DNS server running at <code>169.254.20.10</code> on each node.</p>
<p>Users of the amazing <a href="https://eksctl.io/">eksctl</a> project can easily configure this since <a href="https://github.com/weaveworks/eksctl/pull/550">support was added in February</a> by editing the node group definition:</p>
<div><pre><code data-lang="yaml">
...
<span>nodeGroups</span>:
- <span>name</span>: <span>mygroup</span>
    <span>clusterDNS</span>: <span>169.254.20.10</span>
...

</code></pre></div><p>Users of <a href="https://github.com/terraform-aws-modules/terraform-aws-eks">the Terraform community EKS module</a> have to send an extra parameter to the <code>kubelet</code> binary in the worker group definition:</p>
<div><pre><code data-lang="hcl">
...
worker_groups_launch_template <span>=</span> [
    {
        ...
        name <span>=</span> <span>"mygroup"</span>
        kubelet_extra_args <span>=</span> "--node-labels<span>=</span>kubernetes.io/lifecycle<span>=</span>spot,nodegroup<span>=</span>mygroup --cluster-dns<span>=</span><span>169</span>.<span>254</span>.<span>20</span>.<span>10</span><span>"</span>
        ...
    },
    {
        ...
    },
]
...

</code></pre></div><p>That‚Äôs all!</p>
<p>At Ownzones, we have been running the above setup in production for more than 2 months on Amazon EKS and Kubernetes 1.12 with very good results. DNS errors have fallen drastically with 99% of DNS queries resolved in less than 2ms during stress-testing:</p>
<figure>
    <img src="https://www.vladionescu.me/posts/eks-dns/4-DNS-p99-during-stress-testing.png" alt="A screenshot of a Honeycomb query showing consistent low DNS resolution"> <figcaption>
            <p>Dramatic improvement in DNS resolution</p>
        </figcaption>
</figure>

<h3 id="troubleshooting-tips">Troubleshooting tips</h3>
<p>Identifying the need for a more in-depth DNS configuration is not straightforward. Debugging Node-local DNS is a task in itself that requires networking experience and familiarity with networking in Kubernetes.</p>
<p>To lower the time investment, we can share two pointers that would have helped us a lot when starting the investigation.</p>
<h4 id="visibility">Visibility</h4>
<p>Knowing how many CoreDNS replicas to use and knowing if NodeLocal DNS is needed are both two very hard questions. Prometheus and Grafana can showcase the relevant metrics on the <a href="https://grafana.com/grafana/dashboards/7279">CoreDNS dashboard</a>.</p>
<p>While at Ownzones we debugged resolution issues with <a href="https://www.honeycomb.io/">Honeycomb</a>, a tracing solution combined with a rich monitoring setup will likely reach the same depth. An important point is for the investigation to happen ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.vladionescu.me/posts/eks-dns/">https://www.vladionescu.me/posts/eks-dns/</a></em></p>]]>
            </description>
            <link>https://www.vladionescu.me/posts/eks-dns/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26201292</guid>
            <pubDate>Sat, 20 Feb 2021 03:38:37 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Embracing Functional Programming in Ruby (2017)]]>
            </title>
            <description>
<![CDATA[
Score 18 | Comments 3 (<a href="https://news.ycombinator.com/item?id=26201237">thread link</a>) | @mooreds
<br/>
February 19, 2021 | https://kellysutton.com/2017/09/13/embracing-functional-programming-in-ruby.html | <a href="https://web.archive.org/web/*/https://kellysutton.com/2017/09/13/embracing-functional-programming-in-ruby.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <div>
        <div>

  

  <article>
    <p>At <a href="https://gusto.com/">Gusto</a>, we‚Äôve been knee-deep in a substantial refactor of our system for running payrolls.</p>

<p>Running a payroll requires taking several different inputs such as how much an employee should get paid, where did they work, how much did they work, how much taxes should they pay, how much taxes have they paid this year, and so on and so on.</p>

<p>As a company that offers a payroll service, keeping this piece of the system in tip-top shape is important for the business. Customers love Gusto for its simplicity and speed when it comes to running payroll.</p>

<p>Over the years, this system grew beyond its original mandate. Rather than just serve payroll for one state, it now serves them for all 50 states and the District of Columbia. Although customers love our payroll, internally new engineers had a difficult time understanding the code and making changes safely. This system needed a tune up, so we embarked on a sizable refactor.</p>

<p>Because the process of calculating what you need for a payroll is one big formula, we set the goal of making this system ‚Äúmore functional‚Äù as in functional programming. We wanted to take the process of calculating a payroll and make it one big stateless operation.</p>

<p>The server-side code at Gusto is written in Ruby, a language usually known for its object-oriented and metaprogrammatic roots. Nonetheless, we wanted to integrate some more functional concepts into our code in the hopes of increasing the system‚Äôs safety and clarity. The result has been maintainable code that is easier to reason about and safer to change.</p>

<h2 id="embracing-the-pfaao">Embracing the PFaaO</h2>

<p>Ruby is an expressive language, but it does not lend itself to some common functional practices. Although Ruby allows for closures and first-class functions via <code>Proc</code>s, one does not see many <code>Proc</code>s passed around as objects in idiomatic Ruby.</p>

<p>Throughout our work, we discovered that you can create expressive interfaces with clean internals by embracing both OO and functional aspects of Ruby.</p>

<p>To do this, we used a pattern called <a href="https://www.tomdalling.com/blog/ruby/pure-function-as-an-object-PFAAO-pattern/">Pure Function as an Object (PFaaO)</a>. Essentially, you design objects as you would a <a href="https://en.wikipedia.org/wiki/Pure_function">pure function</a> but dress them up as Ruby classes.</p>

<p>A pure function is a function without observable side effects that always returns the same value for a given set of inputs. That means no talking to the database, no modifying the state of other objects, no accessing the system clock, etc. When we write a PFaaO in Ruby, we want to build an object that has no side effects.</p>

<p>A simple PFaaO might look like the following:</p>

<div><div><pre><code><span>class</span> <span>PayrollCalculator</span>
  <span>def</span> <span>self</span><span>.</span><span>calculate</span><span>(</span><span>payroll</span><span>)</span>
    <span>new</span><span>(</span><span>payroll</span><span>).</span><span>calculate</span>
  <span>end</span>

  <span>def</span> <span>initialize</span><span>(</span><span>payroll</span><span>)</span>
    <span>@payroll</span> <span>=</span> <span>payroll</span>
  <span>end</span>
  <span>private_class_method</span> <span>:new</span>

  <span>def</span> <span>calculate</span>
    <span>PayrollResult</span><span>.</span><span>new</span><span>(</span>
      <span>payroll: </span><span>payroll</span><span>,</span>
      <span>paystubs: </span><span>paystubs</span><span>,</span>
      <span>taxes: </span><span>taxes</span><span>,</span>
      <span>debits: </span><span>debits</span>
    <span>)</span>
  <span>end</span>

  <span>def</span> <span>paystubs</span>
    <span># ...</span>
  <span>end</span>

  <span>def</span> <span>taxes</span>
    <span># ...</span>
  <span>end</span>

  <span>def</span> <span>debits</span>
    <span># ...</span>
  <span>end</span>
<span>end</span>
</code></pre></div></div>

<p>There‚Äôs quite a bit going on here, so let‚Äôs break it down bit by bit.</p>

<p>First, our class has only one effective public interface: <code>PayrollCalculator.calculate</code>. Because we‚Äôve declared the constructor private using <code>private_class_method :new</code>, the instance method <code>#calculate</code> is effectively private.<sup id="fnref:1" role="doc-noteref"><a href="#fn:1">1</a></sup></p>

<p>This means that all of the other instance methods we declare are implicitly private, even though there is no explicit <code>private</code> block within this class. Because there‚Äôs no way to <code>.new</code> up an instance, there is not a vector to call any instance methods.</p>

<p>Our method only has one public interface and its designed operation is effectively stateless, therefore we only need to exercise one interface in our tests. Put some data in, assert that the data coming out is what we expected.</p>

<h2 id="referential-transparency-for-free">Referential Transparency for Free</h2>

<p>In our above example, let‚Äôs say that the process of calculating taxes is expensive from a time perspective.<sup id="fnref:2" role="doc-noteref"><a href="#fn:2">2</a></sup> Thus, we want to make a time/space tradeoff to consume more memory to minimize the number of times we need to compute taxes. In our example, calculating both <code>#paystubs</code> and <code>#debits</code> will require the result of <code>#taxes</code>.</p>

<p>Now because each of these private methods is a pure function, we have referential transparency. This means we can replace a method and its parameters with its return value. Think of it like algebra: Given the function <code>f(x) = x + 5</code>, you can safely replace any occurrence of <code>f(2)</code> with the value <code>7</code>.</p>

<p>What does this mean for a Rubyist? Free and safe memoization:</p>

<div><div><pre><code><span>def</span> <span>paystubs</span>
  <span>calculate_paystubs</span><span>(</span><span>taxes</span><span>,</span> <span>...</span><span>)</span>
<span>end</span>

<span>def</span> <span>debits</span>
  <span>calculate_debits</span><span>(</span><span>taxes</span><span>,</span> <span>...</span><span>)</span>
<span>end</span>

<span>def</span> <span>taxes</span>
  <span>@taxes</span> <span>||=</span> <span>calculate_taxes</span><span>(</span><span>@payroll</span><span>)</span>
<span>end</span>
</code></pre></div></div>

<p>Memoization is a form of caching, and can be fraught with issues if the memoized value does not actually come from a pure function. But because we make everything within the PFaaO pure, we can safely memoize this method call.</p>

<p>This is interesting because it looks like this class is no longer stateless: it now assigns local values. However the only interface is the single <code>.calculate</code> class method, each instance of our PFaaO is single-use. Any intermediate state can never be accessed by externally. Because this cached state is not observable externally, our function is still technically pure.</p>

<p>Much in the way a developer can abstract synchronous and asynchronous behavior, you can do the same with functional purity. Any local state changes are irrelevant in the lifecycle of the PFaaO. These local state changes are not observable from the outside world.</p>

<h2 id="expanding-pfaaos">Expanding PFaaOs</h2>

<p>As I‚Äôve grown in my career, I have become less interested in how software is written but how it is maintained. Software maintenance is the blessing and the curse of any successful project: <em>Congratulations!</em> You have a business with lasting value. <em>Our condolences!</em> You must now pay for all of your mistakes. Nonetheless, it is always preferred to have a business that exists with technical debt, than to have a bankrupt company with a pristine code base.</p>

<p>PFaaOs in Ruby are great because they are easy to maintain. Not only are they easy to test, but they are predisposed to healthy growth.</p>

<p>What do I mean by that?</p>

<p>Let‚Äôs again take the example of our <code>#taxes</code> method. Early in Gusto‚Äôs history (back when it was still known as ZenPayroll), we only offered payroll services in California. Thus, we only needed to worry about payroll taxes for California.</p>

<p>In the grand scheme of things, California is a simple state when it comes to payroll taxes. Our taxes method might have looked like nothing more than the following:</p>

<div><div><pre><code><span>def</span> <span>taxes</span>
  <span>federal_taxes</span><span>(</span><span>@payroll</span><span>)</span> <span>+</span>
    <span>california_taxes</span><span>(</span><span>@payroll</span><span>)</span> <span>+</span>
    <span>local_taxes</span><span>(</span><span>@payroll</span><span>)</span>
<span>end</span>
</code></pre></div></div>

<p>Now let‚Äôs say we expanded into a new state, New York. Now our method grows a little bit:</p>

<div><div><pre><code><span>def</span> <span>taxes</span>
  <span>federal_taxes</span><span>(</span><span>@payroll</span><span>)</span> <span>+</span>
    <span>california_taxes</span><span>(</span><span>@payroll</span><span>)</span> <span>+</span>
    <span>new_york_taxes</span><span>(</span><span>@payroll</span><span>)</span> <span>+</span>
    <span>local_california_taxes</span><span>(</span><span>@payroll</span><span>)</span> <span>+</span>
    <span>local_new_york_taxes</span><span>(</span><span>@payroll</span><span>)</span>
<span>end</span>
</code></pre></div></div>

<p>As we expand into every state,<sup id="fnref:3" role="doc-noteref"><a href="#fn:3">3</a></sup> this method will grow to be quite large! Furthermore, each of these methods adds to the length of our <code>PayrollCalculator</code> class. Without constant gardening, the class could become difficult to understand.</p>

<p>But because each of our methods within a PFaaO is itself a pure function, we are able to extract classes as we see fit and make each one a new PFaaO. We can safely replace our growing methods with new PFaaOs:</p>

<div><div><pre><code><span>def</span> <span>taxes</span>
  <span>PayrollCalculator</span><span>::</span><span>Taxes</span><span>.</span><span>calculate</span><span>(</span><span>@payroll</span><span>)</span>
<span>end</span>
</code></pre></div></div>

<p>As we tease apart these different PFaaOs, we also get a much better idea of the input requirements for these service classes. Our <code>@payroll</code> is a large parameter object, and each extracted PFaaO probably only needs a subset of its data.</p>

<p>So we can get away with something like:</p>

<div><div><pre><code><span>def</span> <span>taxes</span>
  <span>PayrollCalculator</span><span>::</span><span>Taxes</span><span>.</span><span>calculate</span><span>(</span>
    <span>@payroll</span><span>.</span><span>only_pay_and_location_data</span>
  <span>)</span>
<span>end</span>
</code></pre></div></div>

<p>Here we assume that the <code>Payroll#only_pay_and_location_data</code> returns a slice of the total data within the instance as a new <a href="https://martinfowler.com/bliki/ValueObject.html">Value Object</a>. This Value Object represents only the data required to calculate the taxes part of running a payroll.</p>

<h2 id="data-is-immutable-by-default">Data is Immutable by Default</h2>

<p>Another important ingredient for scalable PFaaOs is the requirement that all data be immutable by default. <em>This is a drastic change from how most folks traditionally write Ruby.</em></p>

<p>Every time you reach for your <code>=</code>, you‚Äôll need to replace it with a <code>#set</code> or <code>#put</code>. Rather than modifying objects in place, you will get used to returning new copies with new values. (<a href="https://github.com/hamstergem/hamster/">Hamster</a>, which provides great immutable data structures, can help you from having to hand-roll FP functionality.)</p>

<p>What does this mean for Rails? It will often mean creating functions or classes that take <code>ActiveRecord</code> objects and convert them into immutable value objects. For us, we carve out these value objects into the namespace of what we‚Äôre doing. For example, here are the two representations of a payroll in our system:</p>

<div><div><pre><code><span># app/models/payroll.rb</span>
<span>class</span> <span>Payroll</span> <span>&lt;</span> <span>ActiveRecord</span><span>::</span><span>Base</span>
<span>end</span>

<span># app/services/payroll_calculator/payroll.rb</span>
<span>class</span> <span>PayrollCalculator::Payroll</span> <span>&lt;</span> <span>ValueObject</span>
<span>end</span>
</code></pre></div></div>

<p>The <code>ActiveRecord</code> version of a payroll represents the data that lives in the database. It is a superset of the data required for actually running a payroll. Although they have the same name, they do not have the same attributes. For example, the <code>ActiveRecord</code> version of <code>Payroll</code> will have a <code>processed_at</code> attribute, whereas the <code>Payroll</code> that lives in the calculation domain does not.</p>

<p>In the words of <a href="https://kellysutton.com/2017/06/07/domain-driven-design.html"><em>Domain-Driven Design</em></a>, each namespace here is a different Bounded Context. We implement adapters to take <code>ActiveRecord</code> payrolls and turn them into <code>PayrollCalculator</code> payrolls, and vice versa.</p>

<p>The upside of this is the same that you might see in any other large system with well-defined abstractions; changes in models don‚Äôt cross domains. In our example, we can change the structure of the <code>Payroll</code> in our database without needing to change the calculation code. We would only need to change our adapter. Furthermore, this context is entirely separate from the machinations of Rails. We could easily and safely pull this into its own ‚Ä¶</p></article></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://kellysutton.com/2017/09/13/embracing-functional-programming-in-ruby.html">https://kellysutton.com/2017/09/13/embracing-functional-programming-in-ruby.html</a></em></p>]]>
            </description>
            <link>https://kellysutton.com/2017/09/13/embracing-functional-programming-in-ruby.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26201237</guid>
            <pubDate>Sat, 20 Feb 2021 03:30:23 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Draw an iceberg and see how it would float in water]]>
            </title>
            <description>
<![CDATA[
Score 695 | Comments 88 (<a href="https://news.ycombinator.com/item?id=26201160">thread link</a>) | @raldi
<br/>
February 19, 2021 | https://joshdata.me/iceberger.html | <a href="https://web.archive.org/web/*/https://joshdata.me/iceberger.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

    
    <p>Draw an iceberg and see how it will float.</p>
    <p>(Inspired by a <a href="https://twitter.com/GlacialMeg/status/1362557149147058178?ref_src=twsrc%5Etfw">tweet by @GlacialMeg</a>)</p>

    <canvas id="canvas">
    </canvas>

    <p>In reality, an iceberg wouldn‚Äôt float <i>exactly</i> like this. Its three-dimensional distribution of mass and its relative density compared to the water are both significant factors that are only approximated here.</p>

    <hr>

    <p>Inspired by a tweet by @GlacialMeg:</p>
    <blockquote data-partner="tweetdeck"><div lang="en" dir="ltr"><p>Today I channeled my energy into this very unofficial but passionate petition for scientists to start drawing icebergs in their stable orientations. I went to the trouble of painting a stable iceberg with my watercolors, so plz hear me out.</p><p>(1/4) <a href="https://t.co/rtkCYub38b">pic.twitter.com/rtkCYub38b</a></p></div>‚Äî Megan Thompson-Munson (@GlacialMeg) <a href="https://twitter.com/GlacialMeg/status/1362557149147058178?ref_src=twsrc%5Etfw">February 19, 2021</a></blockquote>
    


    </div></div>]]>
            </description>
            <link>https://joshdata.me/iceberger.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26201160</guid>
            <pubDate>Sat, 20 Feb 2021 03:16:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[My Life in E-Ink]]>
            </title>
            <description>
<![CDATA[
Score 143 | Comments 77 (<a href="https://news.ycombinator.com/item?id=26200630">thread link</a>) | @HaoZeke
<br/>
February 19, 2021 | https://rgoswami.me/posts/my-life-in-eink/ | <a href="https://web.archive.org/web/*/https://rgoswami.me/posts/my-life-in-eink/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><blockquote><p>Collection of odds and ends relating to e-readers including personal reminisces</p></blockquote><h2 id="background">Background</h2><p>Reading has been a huge part of my life. The written word has had arguably more of an impact on my life than anything I have experienced in person. As a kid back in early 2000‚Äôs; this meant a lot of library trips and saving for paperbacks. I also caught the first wave of the e-ink revolution. Nothing beats a real book, in terms of textures and scents; but e-ink devices and the fantastic tools outlined here should make reading digital books much more palpable&nbsp;<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup>.</p><p>I have been reading on my <a href="https://en.wikipedia.org/wiki/Kobo%5FAura%5FHD">Kobo Aura HD</a> for almost a decade now, ever since its release. This means my setup is about as stable as its going to get in the near future. As good a time as any to collect my thoughts&nbsp;<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup>. The focus is on e-ink devices and auxiliary tools; not on all digital content; so there are no mentions of syncing or reading on the go (with a phone) or of monitors which are good for reading on.</p><h3 id="the-content">The Content</h3><p>In general; my e-ink reading habits can be broadly broken into the following categories:</p><dl><dt>Light Reading</dt><dd>Practically this includes <a href="https://www.goodreads.com/user/show/33462912-rohit-goswami">anything I review on Goodreads</a>; these are not often re-read; nor read very deeply; since they are read for pleasure. They are however, rarely deleted</dd><dt>Required Reading</dt><dd>Anything which typically requires me to take notes or practice / write out proofs; these are most often considered to be either coursework (for someone somewhere) or research monographs. These are typically large (in size) and unwieldy (in that they often lack TOCs) and are read multiple times; with a focus on highlights and notes</dd><dt>Active Research</dt><dd>These are the most ephemeral of my reading habits; and also the most numerous; I do not typically store these on my e-reader; and rarely need to make notes on the reader&nbsp;<sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup>. These are often tiny; but require special work due to the metadata involved</dd></dl><table><thead><tr><th>Content Type</th><th>Software Stack</th><th>Deletion Rate</th></tr></thead><tbody><tr><td>Light Reading</td><td>Calibre</td><td>Rare</td></tr><tr><td>Required Reading</td><td>Calibre</td><td>Never</td></tr><tr><td>Active Research</td><td>Calibre + Zotero</td><td>Frequent</td></tr></tbody></table><p>Though I am a huge proponent of RSS feeds (with <a href="https://gitlab.com/news-flash/news%5Fflash%5Fgtk">Newsflash</a>) and read online content voraciously with both a <a href="https://app.getpocket.com/">Pocket</a> and <a href="https://www.diigo.com/user/rgoswami">Diigo</a> subscription<sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup>; I sincerely do not believe blog stuff or anything tailored for the web should have a presence on an e-ink device; so there shall be no mention of those parts of my reading habits<sup id="fnref:5"><a href="#fn:5" role="doc-noteref">5</a></sup>.</p><h2 id="hardware">Hardware</h2><p>My primary e-reader is still my <a href="https://www.kobo.com/koboaurahd?%5F%5F%5Fstore=au&amp;style=onestore">Kobo Aura HD</a> (complete with a snazzy <a href="https://www.amazon.com/Cover-Up-eReader-Natural-Cover-Function/dp/B00DZJ5VM0">hemp sleep-cover</a>), and has been my go to for almost a decade now since its release. Recently I have augmented my workflow with the <a href="https://remarkable.com/store/remarkable-2">reMarkable 2</a>; though I have yet to break it in very well; mostly because I tend to gravitate towards typing out my thoughts&nbsp;<sup id="fnref:6"><a href="#fn:6" role="doc-noteref">6</a></sup> instead of writing.</p><p>The Kobo Aura HD is still the pinnacle of reading technology to me; mostly because the firmware is easy to bypass; and there is a vibrant community of developers on the <a href="https://www.mobileread.com/forums/showthread.php?t=210800">MobileRead Forums</a>. Display and spec aside; the biggest reason for never replacing it has been been the simple fact that most modern e-readers no longer support SD cards; and much of my workflow depends on storing insane amounts of material offline&nbsp;<sup id="fnref:7"><a href="#fn:7" role="doc-noteref">7</a></sup>.</p><figure><img src="https://d33wubrfki0l68.cloudfront.net/d393a91160884052b7717a31a565283336a03ccf/eb437/ox-hugo/2021-02-20_01-39-20_screenshot.png" alt="Figure 1: Primary reading device with Koreader"><figcaption><p>Figure 1: Primary reading device with Koreader</p></figcaption></figure><p>Personally, I never use Nickel (the default Kobo interface), and it would probably choke trying to scan my 200 GB of content; so I haven‚Äôt updated the firmware in forever. My interactions are almost always in <a href="https://koreader.rocks/">Koreader</a>; and my launching poison of choice is the now no longer developed <a href="https://www.mobileread.com/forums/showthread.php?t=293804">Kobo start menu</a>&nbsp;<sup id="fnref:8"><a href="#fn:8" role="doc-noteref">8</a></sup>.</p><h2 id="software">Software</h2><p>Broadly speaking; the main parts of the software pipeline from digital book to brain are simply the syncing mechanism and the UI/UX/OS of the device in question; though it is often best to consider pre-processing books for devices too. These are covered in the order used.</p><h3 id="k2pdfopt">k2pdfopt</h3><p>The thought of reflowing text for an optimal reading experience, especially given the slightly limited processing power of my primary reading device is an enticing prospect. <a href="https://www.willus.com/k2pdfopt/">K2pdfopt or the Kindle 2 PDF Optimizer</a> is as criminally underrated as it is fantastic. An approach which works well for my device involves setting up <a href="https://github.com/HaoZeke/Dotfiles/blob/master/dotfiles/common/.local/bin/fileHelpers/docK2pdf">a simple shell script</a> (part <a href="https://github.com/HaoZeke/Dotfiles">of my Dotfiles</a>) for optimizing files on the fly before sending them through <code>calibre</code>.</p><div><pre><code data-lang="bash"><span>#!/usr/bin/env bash
</span><span></span><span># Get a filename</span>
<span>case</span> <span>"</span><span>$#</span><span>"</span> in
0<span>)</span>
      <span>echo</span> <span>"No arguments, so enter the filename, WITH the extension"</span>
      <span>read</span> -p <span>'Document: '</span> docfile
      <span>;;</span>
1<span>)</span>
      <span>echo</span> <span>"OK, using the filename"</span>
      <span>docfile</span><span>=</span><span>"</span><span>$1</span><span>"</span>
      <span>;;</span>
*<span>)</span>
      <span>echo</span> <span>"Illegal number of parameters"</span>
      <span>exit</span>
      <span>;;</span>
<span>esac</span>
<span># Get basename</span>
<span>basename</span><span>=</span><span>"</span><span>${</span><span>docfile</span><span>%.*</span><span>}</span><span>"</span>
<span>ext</span><span>=</span><span>"</span><span>${</span><span>docfile</span><span>##*</span><span>\.</span><span>}</span><span>"</span>
<span>echo</span> <span>"Basename </span><span>${</span><span>basename</span><span>}</span><span> with </span><span>$ext</span><span> from </span><span>$docfile</span><span>"</span>
<span>echo</span> <span>"Making a local store for the outputs"</span>
mkdir -p <span>"</span><span>$HOME</span><span>/auraHDopt"</span>

<span>case</span> <span>"</span><span>$ext</span><span>"</span> in
<span>"djvu"</span><span>)</span>
      <span>echo</span> <span>"Converting djvu to pdf via ps and running k2pdfopt"</span>
      djvups <span>"</span><span>${</span><span>basename</span><span>}</span><span>.djvu"</span> <span>"</span><span>${</span><span>basename</span><span>}</span><span>.ps"</span>
      ps2pdf <span>"</span><span>${</span><span>basename</span><span>}</span><span>.ps"</span> <span>"</span><span>${</span><span>basename</span><span>}</span><span>.pdf"</span>
      <span># The newline is for simulating the Enter key</span>
      <span>echo</span> <span>|</span> k2pdfopt <span>"</span><span>${</span><span>basename</span><span>}</span><span>.pdf"</span> -wrap -hy -ws -0.2 -dev kbhd -x
      <span>echo</span> <span>"Cleaning up"</span>
      mv <span>"</span><span>${</span><span>basename</span><span>}</span><span>_k2opt.pdf"</span> <span>"</span><span>$HOME</span><span>/auraHDopt"</span>
      rm -rf <span>"</span><span>${</span><span>basename</span><span>}</span><span>.{ps,pdf}"</span>
      <span>;;</span>
<span>"pdf"</span><span>)</span>
      <span>echo</span> <span>"Converting pdf with gs and running k2pdfopt"</span>
      gs -sDEVICE<span>=</span>pdfwrite -dCompatibilityLevel<span>=</span>1.4 -dPDFSETTINGS<span>=</span>/screen <span>\
</span><span></span>              -dNOPAUSE -dQUIET -dBATCH -sOutputFile<span>=</span><span>"</span><span>${</span><span>basename</span><span>}</span><span>gs.pdf"</span> <span>"</span><span>${</span><span>basename</span><span>}</span><span>.pdf"</span>
      <span>echo</span> <span>|</span> k2pdfopt <span>"</span><span>${</span><span>basename</span><span>}</span><span>gs.pdf"</span> -wrap -hy -ws -0.2 -dev kbhd -x
      <span>echo</span> <span>"Cleaning up"</span>
      rm <span>"</span><span>${</span><span>basename</span><span>}</span><span>gs.pdf"</span> -rf
      mv <span>"</span><span>${</span><span>basename</span><span>}</span><span>gs_k2opt.pdf"</span> <span>"</span><span>$HOME</span><span>/auraHDopt"</span>
      <span>;;</span>
*<span>)</span>
      <span>echo</span> <span>"Illegal file type"</span>
      <span>exit</span>
      <span>;;</span>
<span>esac</span>
</code></pre></div><p>The outputs can also be further processed with an <a href="https://github.com/HaoZeke/Dotfiles/blob/master/dotfiles/common/.local/bin/fileHelpers/isOcr">OCR (Optical Character Recognition) script</a> if required, and then edited in <a href="https://code-industry.net/masterpdfeditor/">Master PDF Editor</a> or something similar to add the table of contents interactively as well.</p><div><pre><code data-lang="bash"><span>#!/bin/bash
</span><span></span><span># Use as  find . -type f -name "*.pdf" -exec isOcr '{}' \;</span>

<span># Shamelessly kanged from here:</span>
<span># https://stackoverflow.com/questions/7997399/bash-script-to-check-pdfs-are-ocrd</span>
<span># Only searches for text on the first 5 pages</span>
<span># Modified to have red text. Also to possibly ocr the thing.</span>

<span># -*- mode: shell-script-mode -*-</span>

<span>MYFONTS</span><span>=</span><span>$(</span>pdffonts -l <span>15</span> <span>"</span><span>$1</span><span>"</span> <span>|</span> tail -n +3 <span>|</span> cut -d<span>' '</span> -f1 <span>|</span> sort <span>|</span> uniq<span>)</span>
<span>if</span> <span>[</span> <span>"</span><span>$MYFONTS</span><span>"</span> <span>=</span> <span>''</span> <span>]</span> <span>||</span> <span>[</span> <span>"</span><span>$MYFONTS</span><span>"</span> <span>=</span> <span>'[none]'</span> <span>]</span><span>;</span> <span>then</span>
    <span>echo</span> <span>"</span><span>$(</span>tput setaf 1<span>)</span><span>NOT OCR'ed: </span><span>$1</span><span>"</span>
    <span>if</span> <span>[[</span> -x <span>"</span><span>$(</span>which ocrmypdf<span>)</span><span>"</span> <span>]]</span><span>;</span> <span>then</span>
        <span>echo</span> <span>"</span><span>$(</span>tput setaf 4<span>)</span><span>"</span>
        <span>echo</span> <span>"Converting to </span><span>${</span><span>1</span><span>%.*</span><span>}</span><span>_ocr.pdf with ocrmypdf"</span>
        <span>echo</span> <span>"</span><span>$(</span>tput setaf 7<span>)</span><span>"</span>
        ocrmypdf --deskew --clean --rotate-pages <span>\
</span><span></span>            --jobs <span>4</span> -v --output-type pdfa <span>"</span><span>$1</span><span>"</span> <span>"</span><span>${</span><span>1</span><span>%.*</span><span>}</span><span>_ocr.pdf"</span>
    <span>elif</span> <span>[[</span> -x <span>"</span><span>$(</span>which pypdfocr<span>)</span><span>"</span> <span>]]</span><span>;</span> <span>then</span>
        <span>echo</span> <span>"</span><span>$(</span>tput setaf 2<span>)</span><span> Looking for config files at </span><span>$XDG_CONFIG_HOME</span><span>/pypdfocr/config.yml"</span>
        <span>echo</span> <span>"</span><span>$(</span>tput setaf 3<span>)</span><span>"</span>
        <span>if</span> <span>[[</span> -e <span>$XDG_CONFIG_HOME</span>/pypdfocr/config.yml <span>]]</span><span>;</span> <span>then</span>
            <span>echo</span> <span>"Using configuration settings"</span>
            <span>echo</span> <span>"</span><span>$(</span>tput setaf 4<span>)</span><span>"</span>
            pypdfocr -c <span>$XDG_CONFIG_HOME</span>/pypdfocr/config.yml <span>"</span><span>$1</span><span>"</span>
        <span>else</span>
            <span>echo</span> <span>"Using default settings"</span>
            <span>echo</span> <span>"</span><span>$(</span>tput setaf 4<span>)</span><span>"</span>
            pypdfocr <span>"</span><span>$1</span><span>"</span>
        <span>fi</span>
        <span>echo</span> <span>"</span><span>$(</span>tput setaf 2<span>)</span><span> You might want to get pypdfocr"</span>
    <span>fi</span>
<span>else</span>
    <span>echo</span> <span>"</span><span>$1</span><span> is OCR'ed."</span>
<span>fi</span>
</code></pre></div><p>The end result is:</p><ul><li>A directory with perfectly <code>pdf</code> files re-flowed text<ul><li>Possibly OCR‚Äôed for string searches</li></ul></li></ul><p>TOC editing is still rather janky; but this is also because the OCR process is still rather spotty.</p><h3 id="calibre">Calibre</h3><p><a href="https://calibre-ebook.com/">Calibre</a> is an excellent library software, and there are very few alternatives which offer all the salient features:</p><dl><dt>Syncing</dt><dd>Apart from working well with a plethora of official devices, Koreader is also pretty well supported, and mounting folders allows for easy management of a secret library (e.g. <code>.Library</code>) on an SD card to prevent Nickel from reading and choking on large libraries</dd><dt>Multiple Libraries</dt><dd>I personally keep one for fiction, one for non-fiction, and one (transiently populated) one for papers</dd><dt>Good metadata collection</dt><dd>Nothing beats rich metadata, and with third party plugins, all the best content providers can be leveraged for blurbs; plus most purchased books come with metadata which <code>calibre</code> can read</dd></dl><p>It isn‚Äôt perfect, there are far better <a href="https://opds.io/">OPDS (Open Publication Distribution System)</a> servers like the fantastic <a href="https://github.com/seblucas/cops">COPS (Calibre OPDS)</a> project, and there have been <a href="https://anarc.at/software/desktop/calibre/">some security concerns in the past</a>, but it is really usable and is <a href="https://github.com/kovidgoyal/calibre">under active development</a>; plus it has a <a href="https://kovidgoyal.net/">fun developer</a>. I also personally find the file conversion lacking, compared to <code>k2pdfopt</code>, but as a library management system it is really good.</p><h3 id="zotero-sync">Zotero Sync</h3><p>Calibre provides a handy <a href="https://www.mobileread.com/forums/showthread.php?p=3339191#poststop">ZMI (Zotero Metadata Importer) plugin</a> which allows for exported papers to be imported into <code>calibre</code> and from then into the e-reader as expected. Combined with the folder mounts facilitated by <code>calibre</code> this allows for a painless way to ensure a quick export; optimize; sync; read and delete workflow.</p><h3 id="koreader">Koreader</h3><p>Koreader is probably the best thing to happen to e-ink devices since sliced bread. It replaces the need to use any cables with an e-reader; since newer versions have a nice SSH server, and can also update itself. Since this is mostly used as is; and all the information required is on the <a href="https://github.com/koreader/koreader/wiki">Github Wiki</a>, there‚Äôs not much else to say here.</p><p>It is probably worth noting that the in-built re-flow options do tend to cause major artifacts on older hardware, and is best avoided. Almost equivalently, and at a far lower cost in terms of performance, page contents can be fit to width and zoomed in automatically, which is almost as good as working with <code>k2pdfopt</code> in some special cases.</p><h2 id="conclusions">Conclusions</h2><p>Given my unfortunate separation from my library back home; it is likely that my e-ink devices will continue to be my primary source of reading material. Plus the long retarded color e-ink market finally seems to be moving out of its stupor&nbsp;<sup id="fnref:9"><a href="#fn:9" role="doc-noteref">9</a></sup>. The only possible addendum to this methodology would probably involve integrating <code>orgmode</code> and the reMarkable 2 sometime. E-ink is here to stay. This setup would probably need revisions involving <code>rclone</code> or <code>syncthing</code> if I ever gave ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://rgoswami.me/posts/my-life-in-eink/">https://rgoswami.me/posts/my-life-in-eink/</a></em></p>]]>
            </description>
            <link>https://rgoswami.me/posts/my-life-in-eink/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26200630</guid>
            <pubDate>Sat, 20 Feb 2021 01:46:53 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[A request for Pinboard old-timers]]>
            </title>
            <description>
<![CDATA[
Score 225 | Comments 104 (<a href="https://news.ycombinator.com/item?id=26199676">thread link</a>) | @Alex3917
<br/>
February 19, 2021 | https://www.prettyfwd.com/t/XiK8ArVIT6uVItPGeH3lzA/ | <a href="https://web.archive.org/web/*/https://www.prettyfwd.com/t/XiK8ArVIT6uVItPGeH3lzA/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to extract article]]>
            </description>
            <link>https://www.prettyfwd.com/t/XiK8ArVIT6uVItPGeH3lzA/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26199676</guid>
            <pubDate>Fri, 19 Feb 2021 23:56:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The making of d20 version 3]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26199638">thread link</a>) | @blakewatson
<br/>
February 19, 2021 | https://blakewatson.com/journal/the-making-of-d20-version-3 | <a href="https://web.archive.org/web/*/https://blakewatson.com/journal/the-making-of-d20-version-3">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
        
            
                <article>
                    

                    <div>
                                                    <p>In hindsight, I can‚Äôt believe anyone paid money<sup id="fnref-516-v1"><a href="#fn-516-v1">1</a></sup> for the <a href="http://d20.blakewatson.com/">first version of d20</a>, which I released in <a href="https://blakewatson.com/journal/2016-my-year-in-review/#criticalhit"> September 2016</a>. But they did, and those few sells I made inspired a much more useful version 2, which was released in January 2018.</p>
<p>By the end of 2018, I had been using d20 extensively and running into some problems I wanted to address. I started writing some brand new code in December of that year. Two years and 144 commits later, I‚Äôm happy to announce that d20 version 3 is now for sale on the Mac App Store.</p>
<figure>
<img loading="lazy" src="https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2021/02/2.png?resize=1024%2C640&amp;ssl=1" alt="Screenshot of d20, showing a roll formula in a text input with multiple results underneath. Showing presets pane expanded with custom buttons like &quot;Long Bow&quot;." width="1024" height="640" srcset="https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2021/02/2.png?resize=1024%2C640&amp;ssl=1 1024w, https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2021/02/2.png?resize=300%2C188&amp;ssl=1 300w, https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2021/02/2.png?resize=768%2C480&amp;ssl=1 768w, https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2021/02/2.png?w=1440&amp;ssl=1 1440w" sizes="(max-width: 1000px) 100vw, 1000px" data-recalc-dims="1"><br>
</figure>
<p>You can check out the <a href="https://d20app.me/">d20 website</a> or <a href="https://apps.apple.com/us/app/d20-an-rpg-dice-roller/id1156311750">Mac App Store page</a> if you want to know more about the features. But I want to get into the decision making process, tech stack, and other tangents regarding the making of d20. Imagine this as the director‚Äôs commentary.</p>
<h2>Electron: can‚Äôt live with it, can‚Äôt live without it</h2>
<p>The biggest non-decision was whether the app would be powered by <a href="https://www.electronjs.org/">Electron</a>, go fully native, or go fully web-based. I had already used Electron for the first two versions. But I felt guilty about it. Electron is basically Google Chrome and NodeJS smashed together, so it‚Äôs pretty big and resource intensive. Seeing as d20 has a simple interface, very limited scope in what it‚Äôs trying to accomplish, and is meant to be Mac-only, Electron was a really terrible option.</p>
<p>But I went with Electron again for the same reason every other web developer does‚ÄîI know how to code for it without learning too much new stuff (e.g., Swift + Apple frameworks). Yes it‚Äôs way overkill, yes it‚Äôs absolutely ridiculous. But you either get d20 the Electron app, or you get nothing. That‚Äôs the great thing about Electron. It lowers the barrier to creating desktop applications and spawns tools and apps that otherwise would not exist. You‚Äôll have to endure a little bit of ridicule from Hacker News and, if you‚Äôre like me, your inner-critic, but I say YOLO. Don‚Äôt let your dreams be dreams.</p>
<h2>RANDOM.ORG</h2>
<p>Since version 2, d20 has integrated with <a href="https://www.random.org/">RANDOM.ORG</a> to provide true random numbers rather than pseudorandom ones generated by JavaScript. This ended up being the catalyst that pushed me to finish version 3. RANDOM.ORG brought their API out of beta and began charging for it. My old API key was no longer working and so d20 was quietly falling back to using pseudorandom JavaScript RNG.</p>
<p>This was not cool, considering that true random numbers is one of d20‚Äôs unique selling points. I made the decision to move to the commercial API, which costs $12 per month. I don‚Äôt like incurring the extra costs each month, but I do make enough in sales to cover it and it is personally one of my favorite features of d20; so I gotta keep it in there.</p>
<h2>Vue, Sass, Laravel Mix</h2>
<p>I doubled down on using <a href="https://vuejs.org/">Vue</a>. I had used it in version 2 but I was new to it at the time and I did a really poor job of code organization. I feel like the new version is much better. I‚Äôm a different programmer than I was when I first started d20 v3 so there are definitely things I would change if I were starting today (like using <a href="https://www.typescriptlang.org/">TypeScript</a>). That‚Äôs just part of the consequences for taking two years to finish it.</p>
<p>CSS is pretty amazing these days, but I went with <a href="https://sass-lang.com/">Sass</a> out of complacency or momentum or whatever you want to call it. I processed all the styles and scripts with <a href="https://laravel-mix.com/">Laravel Mix</a> which is a pretty great way to use <a href="https://webpack.js.org/">webpack</a> when you don‚Äôt feel like learning about webpack<sup id="fnref-516-mix"><a href="#fn-516-mix">2</a></sup>.</p>
<h2>Leaving behind <code>localStorage</code></h2>
<p>I have a bad habit of using <code>localStorage</code>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">web storage feature</a>, for everything. In d20 v2 I was saving all the presets in <code>localStorage</code>. But for v3 I moved to using a JSON file for saving presets and settings information. This is my first time using the file system in an Electron app so here‚Äôs hoping I did all of the Apple security stuff right.</p>
<p>The cool thing about this though is that it‚Äôs now much easier to back up your presets, move them to another machine, or share them with others. Just save the file. Boom. Easy. I will be able to rest easier knowing that I have reliable, persistent storage and that a user won‚Äôt wake up one day to find their data missing.</p>
<h2>Design</h2>
<p>These three images should give you an idea about the progression of UI design. Of course, I feel that the third version is far superior. I do think it‚Äôs funny how my color scheme seems to be trending pink-ward.</p>
<figure>
<img loading="lazy" src="https://i2.wp.com/blakewatson.com/wp/wp-content/uploads/2019/05/d20-main.png?resize=1024%2C640&amp;ssl=1" alt="D20 version 1 promotional screenshot. Basically a grid of buttons witb a list of dice roll results running down the left side of the window." width="1024" height="640" srcset="https://i2.wp.com/blakewatson.com/wp/wp-content/uploads/2019/05/d20-main.png?resize=1024%2C640&amp;ssl=1 1024w, https://i2.wp.com/blakewatson.com/wp/wp-content/uploads/2019/05/d20-main.png?resize=300%2C188&amp;ssl=1 300w, https://i2.wp.com/blakewatson.com/wp/wp-content/uploads/2019/05/d20-main.png?resize=768%2C480&amp;ssl=1 768w, https://i2.wp.com/blakewatson.com/wp/wp-content/uploads/2019/05/d20-main.png?w=1280&amp;ssl=1 1280w" sizes="(max-width: 1000px) 100vw, 1000px" data-recalc-dims="1"><br>
</figure>
<figure>
<img loading="lazy" src="https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2019/06/screenshot-1.png?resize=1024%2C640&amp;ssl=1" alt="d20 version 2 promotional screenshot. Dice buttons along the right side of the window. A large text input runs along the top with a list of dice roll results underneath." width="1024" height="640" srcset="https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2019/06/screenshot-1.png?resize=1024%2C640&amp;ssl=1 1024w, https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2019/06/screenshot-1.png?resize=300%2C188&amp;ssl=1 300w, https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2019/06/screenshot-1.png?resize=768%2C480&amp;ssl=1 768w, https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2019/06/screenshot-1.png?w=1440&amp;ssl=1 1440w" sizes="(max-width: 1000px) 100vw, 1000px" data-recalc-dims="1"><br>
</figure>
<figure>
<img loading="lazy" src="https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2021/02/1.png?resize=1024%2C640&amp;ssl=1" alt="Screenshot of d20, showing a rollformula in a text input with multiple results underneath. Captioned &quot;An elegant, powerful dice roller.&quot;" width="1024" height="640" srcset="https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2021/02/1.png?resize=1024%2C640&amp;ssl=1 1024w, https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2021/02/1.png?resize=300%2C188&amp;ssl=1 300w, https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2021/02/1.png?resize=768%2C480&amp;ssl=1 768w, https://i1.wp.com/blakewatson.com/wp/wp-content/uploads/2021/02/1.png?w=1440&amp;ssl=1 1440w" sizes="(max-width: 1000px) 100vw, 1000px" data-recalc-dims="1"><br>
</figure>
<p>I take the UI design seriously and the lack of nicely designed dice rollers on the Mac App Store was a big reason I made d20 originally. I‚Äôm pretty happy with how it turned out and I‚Äôm hoping to start getting sales information from Apple really soon to find out whether users agree.</p>
<h2>Problems and solutions</h2>
<p>I said earlier that I was beginning to run up against problems in v2. Many of those I have addressed in v3.</p>
<p>One of the major ones is what I‚Äôm calling ‚Äúmulti-roll.‚Äù The easiest way to describe this is that it lets you roll attack and damage at the same time. Technically, what it is doing is letting you separate different formulas with a comma but roll them at the same time. This means that you can also <em>save</em> them together, which means that now you can have a weapon as a preset button and clicking will roll the attack and the damage simultaneously, with each having its own result entry.</p>
<p>Another big problem was that v2 presets were simplistic‚Äîjust a list of buttons that each can roll one combo. If you have multiple characters, good luck rummaging through all your presets to find the ones you need.</p>
<p>I‚Äôm tackling this in v3 by introducing the concept of ‚Äúpreset groups,‚Äù which let you create different lists of presets (e.g., one per character). This plus multi-roll solve the biggest annoyances I had with v2.</p>
<h2>Submitting to the Mac App Store is hard</h2>
<p>Seriously, that was harder than building the app. There are a lot of articles recommending <code>electron-forge</code> but there‚Äôs not much help out there about what happens when something doesn‚Äôt work.</p>
<p>I ended up using its parts directly: <code>electron-packager</code>, <code>electron-osx-sign</code>, and <code>electron-osx-flat</code>. This topic deserves its own article probably but in summary:</p>
<ul>
<li>You need a ‚ÄúMac App Distribution‚Äù certificate from Apple.</li>
<li>You need a ‚Äúprovisioning profile‚Äù from Apple.</li>
<li>You need the entitlements files‚ÄîI just grab these off of the <a href="https://www.electronjs.org/docs/tutorial/mac-app-store-submission-guide">Electron site</a>, but if the app needs any special entitlements, you have to add those. For example: <code>com.apple.security.network.client</code> if your app needs to hit the web for stuff.</li>
<li>You need to package the app with <code>electron-packager</code>, which requires you have the aforementioned Apple cert installed onto your keychain.</li>
<li>You need to sign the app with <code>electron-osx-sign</code>.</li>
<li>You need to turn the <code>.app</code> into an installer with <code>electron-osx-flat</code>.</li>
<li>You need to send the resulting installer to Apple using their app called Transporter.</li>
</ul>
<p>Here are the three npm scripts I used to package, sign, and prep the installer for distribution on the Mac App Store:</p>
<pre><code>{
  "scripts": {
    "package": "electron-packager . d20 --out=out --platform=mas --arch=x64 --appBundleId=com.example.app_name --icon=./images/d20_icon --no-deref-symlinks --overwrite",
    "sign:mas": "electron-osx-sign out/d20-mas-x64/d20.app --entitlements=entitlements/parent.plist --entitlements-inherit=entitlements/child.plist --entitlements-loginhelper=entitlements/loginhelper.plist",
    "installer": "electron-osx-flat out/d20-mas-x64/d20.app --platform=mas"
  }
}
</code></pre>
<p>These resources helped me out a lot:</p>
<ul>
<li><a href="https://www.electronjs.org/docs/tutorial/mac-app-store-submission-guide">https://www.electronjs.org/docs/tutorial/mac-app-store-submission-guide</a></li>
<li><a href="https://epxx.co/artigos/electronsign.html">https://epxx.co/artigos/electronsign.html</a></li>
<li><a href="https://github.com/electron/electron-packager">electron-packager</a></li>
<li><a href="https://github.com/electron/electron-osx-sign">electron-osx-sign</a></li>
</ul>
<h2>Web vs app stores</h2>
<p>To be honest, I would have loved to just deploy d20 as a web app. But unfortunately it‚Äôs hard to get traffic to a web app versus getting the built-in audience an app store provides. It‚Äôs one thing to charge for a Mac app, but try to charge for a website that rolls dice and suddenly it seems ridiculous. I don‚Äôt know if there‚Äôs an app-store-like website for distributing web apps (<a href="https://itch.io/">itch.io</a> maybe?) but I doubt a web version would have had the same success (10-20 copies sold per month) that the Mac App Store provides with $0 of marketing effort.</p>
<p>It‚Äôs a technical challenge building an Electron version and a web version from the same codebase, but providing some kind of web version is on my radar. As much as I would love to go cross-platform and distribute Windows and Linux versions, I don‚Äôt have a good way to test those platforms. And my specific setup for working on my Mac (which I need thanks to my disability) isn‚Äôt conducive to OS or device switching. But at least providing a web version would open it up to more platforms.</p>
<h2>By the numbers</h2>
<p>In conclusion, here are some random stats/numbers for your amusement.</p>
<ul>
<li><strong>3.5</strong> years on the Mac App Store</li>
<li><strong>203</strong> commits across all versions</li>
<li><strong>d1,000,000:</strong> the largest die d20 v3 can roll</li>
<li><strong>100:</strong> number of random integers d20 requests from RANDOM.ORG when you roll a die</li>
<li><strong>$3.99:</strong> the price of d20 v1</li>
<li><strong>04/2020:</strong> highest grossing month ($200)</li>
<li><strong>$3.41k</strong> in lifetime total sales (before Apple‚Äôs cut)</li>
</ul>

                                            </div>
                </article>

            
            </div></div>]]>
            </description>
            <link>https://blakewatson.com/journal/the-making-of-d20-version-3</link>
            <guid isPermaLink="false">hacker-news-small-sites-26199638</guid>
            <pubDate>Fri, 19 Feb 2021 23:52:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Collections: The Universal Warrior, Part III: The Cult of the Badass]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26199396">thread link</a>) | @jrott
<br/>
February 19, 2021 | https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/ | <a href="https://web.archive.org/web/*/https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		
<p>This is the third and final part of a discussion (<a href="https://acoup.blog/2021/01/29/collections-the-universal-warrior-part-i-soldiers-warriors-and/">I</a>, <a href="https://acoup.blog/2021/02/05/collections-the-universal-warrior-part-iia-the-many-faces-of-battle/">IIa</a>, <a href="https://acoup.blog/2021/02/12/collections-the-universal-warrior-part-iib-a-soldiers-lot/">IIb</a>) discussion of the notion that there is a ‚Äòuniversal warrior‚Äô ‚Äì a transcendent sameness about either the experience of war or ‚Äòwarrior values‚Äô which might provide some sort of useful blueprint for life generally or some sort of fundamental truth about the experience of war.</p>



<p>Over the last three weeks, we‚Äôve looked at the historical evidence to see if there was any hint of some universal war experience or set of warrior values.  What we‚Äôve found instead is that almost everything about how humans engage in war, aside from the fact that they do so, varies tremendously from one culture to the next, from one place to the next, from one period to the next.  Cultural expectations, social values, technological conditions, entire systems of warfare and simple circumstance also condition the experience of war and the values that combatants have in extreme ways which render the search for a ‚Äòuniversal‚Äô set of warrior values a clearly doomed enterprise.</p>



<p>But, as laid out in the beginning, the ‚Äòuniversal warrior‚Äô wasn‚Äôt merely a (deeply flawed) argument about the structure and experiences of the past, but the foundation stone in an ideological blueprint for living one‚Äôs modern life.  And so it is time now that we turn from the (quite bad) historical roots of this idea to the (worse, it turns out) ideological implications of the idea.</p>



<p>But first, as always, if you like what you are reading here, please share it; if you really like it, you can support me on <a href="https://www.patreon.com/user?u=20122096">Patreon</a>. And if you want updates whenever a new post appears, you can click below for email updates or follow me on twitter (@BretDevereaux) for updates as to new posts as well as my occasional ancient history, foreign policy or military history musings.</p>






<p>(I couldn‚Äôt decide quite how I wanted to illustrate this essay and it didn‚Äôt seem like quite the right content for historical cat photos, so I‚Äôve opted to leave it without images.  I may go back and add pictures at a later date, but for now, it can stand purely as an essay.)</p>



<h2>Once More, With Feeling</h2>



<p>In a sense, while the previous three posts have been fun, they were really just a very long preamble to the argument I am making here, so I want to both lay out <em>why</em> I opened with a three-week long preamble before getting to the point (‚Äòhow else would you know it was me?‚Äô) and also pull together the conclusions from all of that before we move forward.</p>



<p>So why the preamble?  Because I wanted to make sure before we started discussing the underlying ideology that lurks <em>behind</em> claims of the universality of some ‚Äòwarrior ethos‚Äô we had defused the retort that, whatever the unpleasant implications, the ‚Äòuniversal warrior‚Äô was <em>historically true</em>.  This had to be done first because <strong>I am of the opinion that</strong> <strong>truth is an absolute defense</strong> in such matters; the universe contains a great many facts which are frustratingly inconvenient, yet as historians we have to deal with the world as it is rather than as we wish it to be (or wish it to have been).  Consequently, before I could complain about the ideology, it was necessary to determine if the historical theory was true, or even remotely plausible.</p>



<p>So we have spent three weeks hunting for the ‚Äòuniversal warrior‚Äô ‚Äì either in the form of a universal war <em>experience</em> or a universal set of <em>values</em>.  What we have found is:</p>



<ul><li>Far from there being one set way that combatants relate to their society, soldiers, warriors and civilians represent distinct categories defined by how people in war relate to their society.  Even <em>within</em> those categories, variety is considerable, leaving no one clear model of how combatants relate to their societies.</li><li>Moreover, war itself is changeable, moving through at least three (and probably four) distinct systems of land warfare alone, each with substantial differences in tactics, values, and experiences.</li><li>Moreover, different cultures understand and imagine the ideal qualities of combatants differently, often so dramatically differently that one culture‚Äôs definition of courage is not merely different from an other‚Äôs, but diametrically opposed.</li><li>Moreover, the actual experience of battle ‚Äì we discussed this mostly through the experience of fear ‚Äì isn‚Äôt universal either.  The fear of facing a cavalry charge is not the same sort of fear as the fear of enduring a week long artillery barrage, while ‚Äòwar is scary‚Äô in a general sense is hardly enough to set off the warrior or the soldier from any number of other scary and potentially hazardous jobs.</li><li>Moreover, the bonds of comradeship that support modern cohesion (often cited as a unique and universal experience) are, in fact, also historically contingent, both in that there are many systems for generating cohesion, not all of which involve tight bonds formed during military service and that some military systems don‚Äôt seek to develop cohesion in this sense at all.</li><li>Moreover, attitudes towards the hardships of war <em>also</em> vary wildly, as do the actual hardships in question.</li><li>Moreover, not only do different societies express different attitudes and values towards the wounded, but the nature of the wounds themselves has changed over time as military technology has become progressively more lethal; both states that apply not only to physical, but also mental wounding.</li></ul>



<p>In short, while there is enough commonality in war to suggest a definition that encompasses the idea (again, I rather prefer W. Lee‚Äôs definition of war as ‚Äúorganized group activity, conducted with lethal effects, that diminishes one [unconsenting] group for the benefit of another‚Äù), <em>within </em>that definition, <strong>there is far too much variety to suggest there is any one ‚Äòuniversal‚Äô experience of war or any one set of universal warrior values</strong>.</p>



<p>And I should note this is something we could demonstrate in more than a half-dozen different ways deploying just a fraction of the available scholarship on how the experience and values of war change from place to place.  Indeed, that is essentially what we have done.  <strong>Any <em>one</em> of the above points is enough to be fatal to the notion that there is some sort of ‚Äòuniversal‚Äô set of warriors values and experiences </strong>such that, as Pressfield openly states, a Spartiate could be simply dropped into a modern U.S. Marine regiment and fit in without skipping a beat (or his equally anachronistic notion that the decadent Athenian could be dropped into American civil society and also integrate seamlessly).  </p>



<p>But of course Pressfield isn‚Äôt offering a <em>history</em> (and indeed, he has not written one), he is offering an ideology and (intentionally or not) reshaping the historical facts to fit that ideology, shaving the corners off of the square peg so it will fit into the round hole of his moral assumptions.  His ideology requires a universal set of warrior values to serve as the foundation for his life philosophy and so, facts be damned, he <em>will</em> assert the existence of such a universal set of values.  The ideology, not the history, is the foundation, which is why Pressfield offers both anecdotes from Plutarch (a historical source) and his own books (modern historical fiction) as having equal truth value, even though the latter has no value as historical evidence; they both <strong>express the ideology</strong>.</p>



<p>So what is the ideology here?  Well, for that it is time to meet our old friend‚Ä¶</p>



<h2>The Cult of the Badass</h2>



<p>Pulling out the core ideology from Pressfield‚Äôs <a href="https://stevenpressfield.com/category/the-warrior-archetype/">videos </a>is a formidable task; there are fifty of them and so much of the core argument is submerged beneath endless anecdotes (some historical, some Pressfield openly invented for his historical fiction; all delivered with insufficient historical context).  But Pressfield‚Äôs videos are useful for this argument because he makes explicit a set of arguments which are usually only made <em>implicitly</em> through a set of emotional appeals which often are carried through the subtext of images and references rather than the text of what is being said.</p>



<p>(Marching through Pressfield‚Äôs videos was also frankly difficult because there are <a href="https://twitter.com/BretDevereaux/status/1350655580562731011"><em>just so many errors</em> </a>in them, I had to stop live-tweeting my way through them because if I kept doing it I‚Äôd never finish.  As a reminder, this is a fellow whose fiction<a href="https://en.wikipedia.org/wiki/Gates_of_Fire"> is on reading lists </a>at various U.S. military officer training programs, much to my continued sorrow.)</p>



<p>We may, I think, summarize Pressfield‚Äôs core argument as follows: the ‚Äòwarrior archetype‚Äô (he is using here the long-abandoned psychology of Carl Jung) represents a true human universal best understood by certain ‚Äòwarrior societies‚Äô (<em>especially</em> the Spartans, but also Alexander III, but somehow <em>not</em> the Macedonians or Philip II) who supposedly demonstrated martial excellence and who therefore are ‚Äúrepresentative of the purest expression of the warrior archetype‚Äù (his words).  Moreover, Pressfield argues that this understanding of the ‚Äòinner warrior‚Äô provides the best blueprint on which a person might fashion their lives, understanding their weaknesses as an ‚Äòinner enemy‚Äô that must be opposed by ‚Äòwarrior values‚Äô and ‚Äòmental toughness.‚Äô  And while Pressfield will admit that the ‚Äòwarrior archetype‚Äô can go astray (he says this of Alexander, though I‚Äôd argue that Alexander didn‚Äôt so much ‚Äògo astray‚Äô as he ‚Äòkept doing what he had done literally for his entire life, but began doing it to people who thought Alexander would only hurt people <em>they didn‚Äôt like</em>‚Äò), he nevertheless presents this ‚Äòwarrior archetype‚Äô as an expression of the highest possible human ideal.  <strong>In Pressfield‚Äôs ideological framework, it is the great warriors ‚Äì the Spartans, Alexander, Arjuna ‚Äì who stand atop the summit of human physical and moral achievement.</strong>  Non-warriors (mostly women) are valued in as much as they uphold elements of this warrior ideal so that warriors (mostly men) can give those ideals physical expression in action.  Even internal struggles must be reframed as a form of war, to be fought and defeated with the same values that best produce effective real-world violence.</p>


</div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/">https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/</a></em></p>]]>
            </description>
            <link>https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26199396</guid>
            <pubDate>Fri, 19 Feb 2021 23:20:59 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[F‚Äô: Flight Software and Embedded Systems Framework]]>
            </title>
            <description>
<![CDATA[
Score 135 | Comments 26 (<a href="https://news.ycombinator.com/item?id=26199346">thread link</a>) | @zeristor
<br/>
February 19, 2021 | https://nasa.github.io/fprime/ | <a href="https://web.archive.org/web/*/https://nasa.github.io/fprime/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main_content_wrap">
      <section id="main_content">
        <p>F¬¥ is a software framework for rapid development and deployment of embedded systems and spaceflight applications.
Originally developed at NASA‚Äôs Jet Propulsion Laboratory, F¬¥ is open source software that has been successfully deployed
for several space applications. It has been used for, but is not limited to, CubeSats, SmallSats, instruments, and
deployables.</p>

<p>F¬¥ has the following features:</p>
<ul>
  <li>Component architecture with well-defined interfaces</li>
  <li>C++ framework providing core capabilities like queues, threads, and operating-system abstraction</li>
  <li>Tools for designing systems and automatically generating code from systems design</li>
  <li>A standard library of flight-worthy components</li>
  <li>Testing tools for unit and system-level testing</li>
</ul>

<table>
  <thead>
    <tr>
      <th>F¬¥ Resources</th>
      <th>&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Features</td>
      <td><a href="https://nasa.github.io/fprime/features.html">Features</a></td>
    </tr>
    <tr>
      <td>Projects</td>
      <td><a href="https://nasa.github.io/fprime/projects.html">Projects</a></td>
    </tr>
    <tr>
      <td>Installation</td>
      <td><a href="https://nasa.github.io/fprime/INSTALL.html">INSTALL.md</a></td>
    </tr>
    <tr>
      <td>Tutorials</td>
      <td><a href="https://nasa.github.io/fprime/Tutorials/README.html">Tutorials</a></td>
    </tr>
    <tr>
      <td>User Guide</td>
      <td><a href="https://nasa.github.io/fprime/UsersGuide/guide.html">User Guide</a></td>
    </tr>
    <tr>
      <td>Repository</td>
      <td><a href="https://github.com/nasa/fprime">https://github.com/nasa/fprime</a></td>
    </tr>
    <tr>
      <td>Community Forum and Mailing List</td>
      <td><a href="https://groups.google.com/d/forum/fprime-community">https://groups.google.com/d/forum/fprime-community</a></td>
    </tr>
    <tr>
      <td>Community GitHub Organization</td>
      <td><a href="https://github.com/fprime-community">https://github.com/fprime-community</a></td>
    </tr>
    <tr>
      <td>Standard Reference Application</td>
      <td><a href="https://github.com/nasa/fprime/blob/master/Ref/README.md">Ref</a></td>
    </tr>
    <tr>
      <td>Raspberry PI Reference Application</td>
      <td><a href="https://github.com/nasa/fprime/blob/master/RPI/README.md">RPI</a></td>
    </tr>
    <tr>
      <td>Architecture Overview</td>
      <td><a href="https://nasa.github.io/fprime/Architecture/FPrimeArchitectureShort.pdf">Architecture</a></td>
    </tr>
  </tbody>
</table>

<h2 id="f-system-requirements">F¬¥ System Requirements</h2>

<p>In order to develop applications with F¬¥, the following requirements of the user‚Äôs system must be met.</p>

<ol>
  <li>Linux or Mac OS X operating system (or Windows Subsystem for Linux on Windows)</li>
  <li>CMake <a href="https://cmake.org/download/">https://cmake.org/download/</a> available on the system path</li>
  <li>Bash or Bash compatible shell</li>
  <li>CLang or GCC compiler</li>
  <li>Python 3 and PIP <a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a></li>
</ol>

<h2 id="quick-installation-guide">Quick Installation Guide</h2>

<p>F¬¥ can be quickly installed and ready to use by cloning the GitHub repository, installing Python code (typically in a
virtual environment), and building on of our reference applications. For full install instructions please see:
<a href="https://nasa.github.io/fprime/INSTALL.html">INSTALL.md</a>.</p>

<p><strong>Clone and Install</strong></p>
<div><div><pre><code>git clone https://github.com/nasa/fprime.git
cd fprime
pip install --upgrade wheel setuptools pip
pip install Fw/Python Gds/
</code></pre></div></div>
<p><strong>Build the Ref Application</strong></p>
<div><div><pre><code>cd Ref
fprime-util generate
fprime-util install
</code></pre></div></div>
<p><strong>Run the Ref Application</strong></p>


<h2 id="further-references">Further References</h2>

<p>Full information on the code and F¬¥ are available at our Github page:
<a href="http://github.com/nasa/fprime">http://github.com/nasa/fprime</a>.</p>

<p>To start with, follow the <a href="https://nasa.github.io/fprime/INSTALL.html">installation guide</a>. Then inspect
either the <a href="https://github.com/nasa/fprime/blob/master/Ref/README.md">reference application</a>, 
<a href="https://github.com/nasa/fprime/blob/master/RPI/README.md">rapberry pi reference</a>, or the
<a href="https://nasa.github.io/fprime/Tutorials/README.html">tutorials</a>.</p>

      </section>
    </div></div>]]>
            </description>
            <link>https://nasa.github.io/fprime/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26199346</guid>
            <pubDate>Fri, 19 Feb 2021 23:16:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Free and Safe Bookmarking Tool]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26199099">thread link</a>) | @totaldude87
<br/>
February 19, 2021 | https://booky.io/about | <a href="https://web.archive.org/web/*/https://booky.io/about">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><header id="loading__header"><div><p><span>‚Äå</span></p><nav><span>‚Äå </span><span>‚Äå</span></nav><p><span>‚Äå </span><span>‚Äå</span></p></div></header><span id="loading__spinner"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M24 12c-0.030-1.567-0.37-3.129-0.998-4.558-0.626-1.43-1.534-2.725-2.649-3.795s-2.436-1.918-3.867-2.476c-1.43-0.561-2.967-0.829-4.486-0.796-1.519 0.030-3.031 0.36-4.414 0.969-1.384 0.607-2.638 1.488-3.673 2.568s-1.855 2.36-2.395 3.745c-0.542 1.384-0.8 2.872-0.767 4.342 0.030 1.471 0.351 2.933 0.941 4.27 0.588 1.338 1.441 2.551 2.487 3.552s2.284 1.793 3.624 2.314c1.339 0.523 2.776 0.771 4.199 0.739 1.423-0.030 2.835-0.341 4.127-0.912 1.293-0.569 2.464-1.394 3.43-2.406s1.731-2.209 2.233-3.502c0.305-0.784 0.513-1.603 0.622-2.433 0.029 0.002 0.059 0.003 0.088 0.003 0.828 0 1.5-0.672 1.5-1.5 0-0.042-0.002-0.084-0.006-0.125h0.006zM21.617 15.983c-0.55 1.247-1.347 2.377-2.324 3.309s-2.133 1.668-3.381 2.151c-1.248 0.485-2.585 0.714-3.911 0.682-1.327-0.030-2.639-0.322-3.84-0.855-1.201-0.531-2.289-1.301-3.187-2.243s-1.606-2.057-2.070-3.259c-0.466-1.202-0.685-2.489-0.653-3.768 0.031-1.279 0.312-2.541 0.826-3.696 0.512-1.155 1.254-2.202 2.162-3.066s1.981-1.544 3.138-1.989c1.156-0.447 2.394-0.656 3.624-0.624 1.23 0.031 2.443 0.303 3.552 0.798 1.11 0.493 2.115 1.207 2.944 2.081s1.481 1.905 1.908 3.016c0.428 1.111 0.628 2.298 0.596 3.48h0.006c-0.003 0.041-0.006 0.083-0.006 0.125 0 0.774 0.586 1.41 1.338 1.491-0.146 0.816-0.387 1.613-0.721 2.367z"></path></svg></span></div>]]>
            </description>
            <link>https://booky.io/about</link>
            <guid isPermaLink="false">hacker-news-small-sites-26199099</guid>
            <pubDate>Fri, 19 Feb 2021 22:52:55 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[IDOM ‚Äì It's React, but in Python]]>
            </title>
            <description>
<![CDATA[
Score 22 | Comments 1 (<a href="https://news.ycombinator.com/item?id=26199008">thread link</a>) | @xdze2
<br/>
February 19, 2021 | https://rmorshea.github.io/articles/2021/idom-react-but-its-python/article/ | <a href="https://web.archive.org/web/*/https://rmorshea.github.io/articles/2021/idom-react-but-its-python/article/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-md-component="container">
      
      
        
      
      <main data-md-component="main">
        <div>
          
            
              
            
            
              
            
          
          <div>
            <article><a download="" href="https://rmorshea.github.io/articles/2021/idom-react-but-its-python/article/article.pdf" title="PDF Export"><svg style="height: 1.2rem; width: 1.2rem;" viewBox="0 0 384 512" xmlns="http://www.w3.org/2000/svg"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"></path></svg></a>
              
                
                
                
<p><a href="https://github.com/idom-team/idom" target="_blank">IDOM</a> is a new declarative Python
package for building highly interactive user interfaces.</p>
<ul>
<li><a href="https://github.com/idom-team/idom"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></span> https://github.com/idom-team/idom</a></li>
<li><a href="https://idom-docs.herokuapp.com/"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"></path></svg></span> https://idom-docs.herokuapp.com</a></li>
<li><a href="https://github.com/idom-team/idom/discussions"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"></path></svg></span> https://github.com/idom-team/idom/discussions</a></li>
</ul>
<p><a href="https://github.com/idom-team/idom"><img alt="idom logo" src="https://github.com/idom-team/idom/raw/929d07ff4a643320a6148336613621242284f8d2/docs/source/branding/idom-logo.png"></a></p>
<p>IDOM takes inspiration from <a href="https://reactjs.org/" target="_blank">React</a>, and wherever
possible, attempts to achieve parity with the features it copies more directly. Nowhere
is this more evident than the version of React's often lauded
<a href="https://reactjs.org/docs/hooks-intro.html" target="_blank">"Hooks"</a> that IDOM
implements in Python.</p>
<p>At a glance, the similarities between IDOM and React are rather striking. Below is a
React component which defines a simple <code>Counter</code> displaying the number of times a button
has been clicked:</p>
<div><pre><span></span><code><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>useState</span> <span>}</span> <span>from</span> <span>"react"</span><span>;</span>
<span>import</span> <span>ReactDOM</span> <span>from</span> <span>"react-dom"</span><span>;</span>

<span>function</span> <span>Counter</span><span>()</span> <span>{</span>
  <span>const</span> <span>[</span><span>count</span><span>,</span> <span>setCount</span><span>]</span> <span>=</span> <span>useState</span><span>(</span><span>0</span><span>);</span>
  <span>return</span> <span>(</span>
    <span>&lt;</span><span>div</span><span>&gt;</span>
      <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{()</span> <span>=&gt;</span> <span>setCount</span><span>(</span><span>count</span> <span>+</span> <span>1</span><span>)}&gt;</span><span>Click</span> <span>me</span><span>!</span><span>&lt;/</span><span>button</span><span>&gt;</span>
      <span>&lt;</span><span>p</span><span>&gt;{</span><span>`Click count: </span><span>${</span><span>count</span><span>}</span><span>`</span><span>}&lt;/</span><span>p</span><span>&gt;</span>
    <span>&lt;/</span><span>div</span><span>&gt;</span>
  <span>);</span>
<span>}</span>

<span>ReactDOM</span><span>.</span><span>render</span><span>(&lt;</span><span>Counter</span> <span>/&gt;,</span> <span>document</span><span>.</span><span>getElementById</span><span>(</span><span>"root"</span><span>));</span>
</code></pre></div>

<p>And this is the same component implemented in Python using IDOM:</p>
<div><pre><span></span><code><span>import</span> <span>idom</span>

<span>@idom</span><span>.</span><span>component</span>
<span>def</span> <span>Counter</span><span>():</span>
    <span>count</span><span>,</span> <span>set_count</span> <span>=</span> <span>idom</span><span>.</span><span>hooks</span><span>.</span><span>use_state</span><span>(</span><span>0</span><span>)</span>
    <span>return</span> <span>idom</span><span>.</span><span>html</span><span>.</span><span>div</span><span>(</span>
        <span>idom</span><span>.</span><span>html</span><span>.</span><span>button</span><span>(</span>
            <span>{</span><span>"onClick"</span><span>:</span> <span>lambda</span> <span>event</span><span>:</span> <span>set_count</span><span>(</span><span>count</span> <span>+</span> <span>1</span><span>)},</span>
            <span>"Click me!"</span>
        <span>),</span>
        <span>idom</span><span>.</span><span>html</span><span>.</span><span>p</span><span>(</span><span>f</span><span>"Click count: </span><span>{</span><span>count</span><span>}</span><span>"</span><span>)</span>
    <span>)</span>

<span>idom</span><span>.</span><span>run</span><span>(</span><span>Counter</span><span>)</span>
</code></pre></div>

<p>Which, when displayed in your browser, should look something like this:</p>
<p><img alt="click-counter-example" src="https://rmorshea.github.io/articles/2021/idom-react-but-its-python/click-counter.gif"></p>
<h2 id="why-do-we-need-idom">Why Do We Need IDOM?</h2>
<p>Over the <a href="https://www.npmtrends.com/react-vs-angular-vs-vue" target="_blank">past 5
years</a> front-end
developers seem to have concluded that programs written with a
<a href="https://www.youtube.com/watch?v=yGh0bjzj4IQ" target="_blank">declarative</a> style or
framework tend to be easier to understand and maintain than those done imperatively. Put
more simply, mutable state in programs can quickly lead to unsustainable complexity.
This trend is largely evidenced by the
<a href="https://gist.github.com/tkrotoff/b1caa4c3a185629299ec234d2314e190" target="_blank">rise</a>
of Javascript frameworks like <a href="https://vuejs.org/" target="_blank">Vue</a> and
<a href="https://reactjs.org/" target="_blank">React</a> which describe the logic of computations
without explicitly stating their control flow.</p>
<p><img alt="npm download trends" src="https://rmorshea.github.io/articles/2021/idom-react-but-its-python/npm-download-trends.png"></p>
<p>So what does this have to do with Python and IDOM? Well, because browsers are the de
facto "operating system of the internet", even back-end languages like Python have had
to figure out clever ways to integrate with them. While standard
<a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> APIs are well
suited to applications built using HTML templates, modern browser users expect a higher
degree of interactivity than this alone can achieve.</p>
<p>A variety of Python packages have since been created to help solve this problem:</p>
<ul>
<li><a href="https://github.com/jupyter-widgets/ipywidgets" target="_blank">IPyWidgets</a> - Adds
  interactive widgets to <a href="https://jupyter.org/" target="_blank">Jupyter Notebooks</a></li>
<li><a href="https://plotly.com/dash/" target="_blank">Dash</a> - Allows data scientists to produces
  enterprise-ready analytic apps</li>
<li><a href="https://www.streamlit.io/" target="_blank">Streamlit</a> - Turns simple Python scripts
  into interactive dashboards</li>
<li><a href="https://docs.bokeh.org/" target="_blank">Bokeh</a> - An interactive visualization
  library for modern web browsers</li>
</ul>
<p>However they each have drawbacks that can make them difficult to use.</p>
<ol>
<li>
<p><strong>Restrictive ecosystems</strong> - UI components developed for one framework cannot be
   easily ported to any of the others because their APIs are either too complex,
   undocumented, or are structurally inaccesible.</p>
</li>
<li>
<p><strong>Imperative paradigm</strong> - IPyWidgets and Bokeh have not embraced the same declarative
   design principles pioneered by front-end developers. Streamlit and Dash on the
   otherhand, are declarative, but fall short of the features provided by React or Vue.</p>
</li>
<li>
<p><strong>Limited layouts</strong> - At their initial inception, the developers of these libraries
   were driven by the visualization needs of data scientists so the ability to create
   complex UI layouts may not have been a primary engineering goal.</p>
</li>
</ol>
<p>A future article will address specific comparisons to each of the projects mentioned
above, but for now, we'll just focus on IDOM and its solutions to these problems.</p>
<h2 id="ecosystem-independence">Ecosystem Independence</h2>
<p>IDOM has a flexible set of core abstractions that allow it to interface with its peers.
At the time of writing, both Jupyter and Dash are supported, while Streamlit and Bokeh
are in the works:</p>
<ul>
<li><a href="https://github.com/idom-team/idom-jupyter" target="_blank">idom-jupyter</a> (try it now
  with
  <a href="https://mybinder.org/v2/gh/idom-team/idom-jupyter/main?filepath=notebooks%2Fintroduction.ipynb" target="_blank">Binder</a>)</li>
<li><a href="https://github.com/idom-team/idom-dash" target="_blank">idom-dash</a></li>
</ul>
<p>By providing well defined interfaces and straighforward protocols, IDOM makes it easy to
swap out any part of the stack with an alternate implementation if you want to. For
example, if you need a different web server for your application, IDOM already has 3
options to choose from or, use as blueprints to create your own:</p>
<ul>
<li><a href="https://github.com/sanic-org/sanic" target="_blank">Sanic</a></li>
<li><a href="https://github.com/pallets/flask" target="_blank">Flask</a></li>
<li><a href="https://github.com/tornadoweb/tornado" target="_blank">Tornado</a></li>
</ul>
<p>You can even target your usage of IDOM in your production-grade applications with IDOM's
Javascript <a href="https://github.com/idom-team/idom-client-react" target="_blank">React client library</a>. Just install
it in your front-end app and connect to a back-end websocket that's serving up IDOM
models. IDOM's own
<a href="https://idom-docs.herokuapp.com/docs/index.html" target="_blank">documentation</a> acts as
a prime example for this targeted usage - most of the page is static HTML, but embedded
in it are interactive examples that feature live views being served from a web socket:</p>
<p><img alt="live-examples-in-docs" src="https://rmorshea.github.io/articles/2021/idom-react-but-its-python/live-examples-in-docs.gif"></p>
<h2 id="declarative-components">Declarative Components</h2>
<p>IDOM, by adopting the hook design pattern from React, inherits many of its aesthetic and
functional characteristics. For those unfamiliar with hooks, user interfaces are
composed of basic <a href="https://en.wikipedia.org/wiki/HTML_element" target="_blank">HTML elements</a> that are
constructed and returned by special functions called "components". Then, through the
magic of hooks, those component functions can be made to have state. Consider the
component below which displays a basic representation of an
<a href="https://en.wikipedia.org/wiki/AND_gate" target="_blank">AND-gate</a>:</p>
<div><pre><span></span><code><span>import</span> <span>idom</span>

<span>@idom</span><span>.</span><span>component</span>
<span>def</span> <span>AndGate</span><span>():</span>
    <span>input_1</span><span>,</span> <span>toggle_1</span> <span>=</span> <span>use_toggle</span><span>()</span>
    <span>input_2</span><span>,</span> <span>toggle_2</span> <span>=</span> <span>use_toggle</span><span>()</span>
    <span>return</span> <span>idom</span><span>.</span><span>html</span><span>.</span><span>div</span><span>(</span>
        <span>idom</span><span>.</span><span>html</span><span>.</span><span>input</span><span>(</span>
            <span>{</span><span>"type"</span><span>:</span> <span>"checkbox"</span><span>,</span> <span>"onClick"</span><span>:</span> <span>lambda</span> <span>event</span><span>:</span> <span>toggle_1</span><span>()}</span>
        <span>),</span>
        <span>idom</span><span>.</span><span>html</span><span>.</span><span>input</span><span>(</span>
            <span>{</span><span>"type"</span><span>:</span> <span>"checkbox"</span><span>,</span> <span>"onClick"</span><span>:</span> <span>lambda</span> <span>event</span><span>:</span> <span>toggle_2</span><span>()}</span>
        <span>),</span>
        <span>idom</span><span>.</span><span>html</span><span>.</span><span>pre</span><span>(</span><span>f</span><span>"</span><span>{</span><span>input_1</span><span>}</span><span> AND </span><span>{</span><span>input_2</span><span>}</span><span> = </span><span>{</span><span>input_1</span> <span>and</span> <span>input_2</span><span>}</span><span>"</span><span>),</span>
    <span>)</span>

<span>def</span> <span>use_toggle</span><span>():</span>
    <span>state</span><span>,</span> <span>set_state</span> <span>=</span> <span>idom</span><span>.</span><span>hooks</span><span>.</span><span>use_state</span><span>(</span><span>False</span><span>)</span>

    <span>def</span> <span>toggle_state</span><span>():</span>
        <span>set_state</span><span>(</span><span>lambda</span> <span>old_state</span><span>:</span> <span>not</span> <span>old_state</span><span>)</span>

    <span>return</span> <span>state</span><span>,</span> <span>toggle_state</span>

<span>idom</span><span>.</span><span>run</span><span>(</span><span>AndGate</span><span>)</span>
</code></pre></div>

<p><img alt="and-gate-demo" src="https://rmorshea.github.io/articles/2021/idom-react-but-its-python/and-gate.gif"></p>
<p>Here's a very high level summary of how it works... the first time a view of the
component above is rendered, the <code>AndGate</code> function is called where its initial <code>state</code>
for <code>input_1</code> and <code>input_2</code> is <code>False</code>. The function then returns a series of HTML
elements with callbacks that respond to client-side events. Machinery behind the scenes
subsequently realizes that declaration and displays two checkbox buttons with the text
<code>False AND False = False</code>. Later, when a user clicks the now visible checkbox buttons,
client-side events are triggered, the associated callbacks respond by inverting the old
<code>state</code> from <code>False</code> to <code>True</code>, and a re-render of the component is scheduled. When
re-rendering, the function is again called, this time though, where <code>input_1</code> and
<code>input_2</code> have been updated to reflect the new <code>state</code>, thus causing the displayed text
to change.</p>
<p>In the code above, consider the fact that it never explicitely describes how to evolve
the frontend view when events occur. Instead, it declares that, given a particular
state, this is how the view should look. It's then IDOM's responsibility to figure out
how to bring that declaration into being. This behavior of defining outcomes without
stating the means by which to achieve them is what makes components in IDOM and React
"declarative". For comparison, a hypothetical, and a more imperative approach to
defining the same interface might look similar to the following:</p>
<div><pre><span></span><code><span>layout</span> <span>=</span> <span>Layout</span><span>()</span>

<span>def</span> <span>make_and_gate</span><span>():</span>
    <span>state</span> <span>=</span> <span>{</span><span>"input_1"</span><span>:</span> <span>False</span><span>,</span> <span>"input_2"</span><span>:</span> <span>False</span><span>}</span>
    <span>output_text</span> <span>=</span> <span>html</span><span>.</span><span>pre</span><span>()</span>
    <span>update_output_text</span><span>(</span><span>output_text</span><span>,</span> <span>state</span><span>)</span>

    <span>def</span> <span>toggle_input</span><span>(</span><span>index</span><span>):</span>
      <span>state</span><span>[</span><span>f</span><span>"input_</span><span>{</span><span>index</span><span>}</span><span>"</span><span>]</span> <span>=</span> <span>not</span> <span>state</span><span>[</span><span>f</span><span>"input_</span><span>{</span><span>index</span><span>}</span><span>"</span><span>]</span>
      <span>update_output_text</span><span>(</span><span>output_text</span><span>,</span> <span>state</span><span>)</span>

    <span>return</span> <span>html</span><span>.</span><span>div</span><span>(</span>
        <span>html</span><span>.</span><span>input</span><span>(</span>
            <span>{</span><span>"type"</span><span>:</span> <span>"checkbox"</span><span>,</span> <span>"onClick"</span><span>:</span> <span>lambda</span> <span>event</span><span>:</span> <span>toggle_input</span><span>(</span><span>1</span><span>)}</span>
        <span>),</span>
        <span>html</span><span>.</span><span>input</span><span>(</span>
            <span>{</span><span>"type"</span><span>:</span> <span>"checkbox"</span><span>,</span> <span>"onClick"</span><span>:</span> <span>lambda</span> <span>event</span><span>:</span> <span>toggle_input</span><span>(</span><span>2</span><span>)}</span>
        <span>),</span>
        <span>output_text</span>
    <span>)</span>

<span>def</span> <span>update_output_text</span><span>(</span><span>text</span><span>,</span> <span>state</span><span>):</span>
    <span>text</span><span>.</span><span>update</span><span>(</span>
        <span>children</span><span>=</span><span>"</span><span>{input_1}</span><span> AND </span><span>{input_2}</span><span> = </span><span>{output}</span><span>"</span><span>.</span><span>format</span><span>(</span>
            <span>input_1</span><span>=</span><span>state</span><span>[</span><span>"input_1"</span><span>],</span>
            <span>input_2</span><span>=</span><span>state</span><span>[</span><span>"input_2"</span><span>],</span>
            <span>output</span><span>=</span><span>state</span><span>[</span><span>"input_1"</span><span>]</span> <span>and</span> <span>state</span><span>[</span><span>"input_2"</span><span>],</span>
        <span>)</span>
    <span>)</span>

<span>layout</span><span>.</span><span>add_element</span><span>(</span><span>make_and_gate</span><span>())</span>
<span>layout</span><span>.</span><span>run</span><span>()</span>
</code></pre></div>

<p>In this imperative incarnation there are several disadvantages:</p>
<ol>
<li>
<p><strong>Refactoring is difficult</strong> - Functions are much more specialized to their
   particular usages in <code>make_and_gate</code> and thus cannot be easily generalized. By
   comparison, <code>use_toggle</code> from the declarative implementation could be applicable to
   any scenario where boolean indicators are toggled on and off.</p>
</li>
<li>
<p><strong>No clear static relations</strong> - There is no one section of code through which to
   discern the basic structure and behaviors of the view. This issue is exemplified by
   the fact that we must call <code>update_output_text</code> from two different locations. Once in
   the body of <code>make_and_gate</code> and again in the body of the callback <code>toggle_input</code>.
   This means that, to understand what the <code>output_text</code> might contain, we must also
   understand all the business logic that surrounds it.</p>
</li>
<li>
<p><strong>Referential links cause complexity</strong> - To evolve the view, various callbacks must
   hold references to all the elements that they will update. At the outset this makes
   writing programs difficult since elements must be passed up and down the call stack
   wherever they are needed. Considered further though, it also means that a function
   layers down in the call stack can accidentally or intentionally impact the behavior
   of ostensibly unrelated parts of the program.</p>
</li>
</ol>
<h2 id="virtual-document-object-model">Virtual Document Object Model</h2>
<p>To communicate between their back-end Python servers and Javascript clients, IDOM's
peers take an approach that aligns fairly closely with the
<a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" target="_blank">Model-View-Controller</a>
design pattern - the controller lives server-side (though not always), the model is
what's synchronized between the server and client, and the view is run client-side in</p></article></div></div></main></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://rmorshea.github.io/articles/2021/idom-react-but-its-python/article/">https://rmorshea.github.io/articles/2021/idom-react-but-its-python/article/</a></em></p>]]>
            </description>
            <link>https://rmorshea.github.io/articles/2021/idom-react-but-its-python/article/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26199008</guid>
            <pubDate>Fri, 19 Feb 2021 22:43:02 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Meth Kingpin Was Director of Operations at US Air Force Combat Controller School]]>
            </title>
            <description>
<![CDATA[
Score 12 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26198555">thread link</a>) | @AndrewBissell
<br/>
February 19, 2021 | https://narco.news/meth-kingpin-was-director-of-operations-for-combat-controller-school | <a href="https://web.archive.org/web/*/https://narco.news/meth-kingpin-was-director-of-operations-for-combat-controller-school">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-v-6d96295c=""><div data-v-6d96295c=""><p>On the skydiving forum <em><a href="https://www.dropzone.com/forums/topic/222999-weekend-raeford-pics/?tab=comments#comment-439487">Dropzone</a></em>, a post from 2002 shows a picture of an individual identifiable as Tim Thacker along with his siblings. </p><figure><div><div><p><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-11-at-12.35.02-PM-3.png" width="1214" height="1130"></p><p><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-16-at-4.59.19-PM-2.png" width="488" height="606"></p></div><div><p><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-19-at-1.21.51-PM.png" width="1572" height="1252"></p><p><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-19-at-1.31.10-PM-2.png" width="1274" height="990"></p></div></div><figcaption><em><a href="https://www.linkedin.com/in/tim-thacker-8b173b71/">LinkedIn</a></em>;<em> <a href="https://www.facebook.com/PoliceWarsaw/posts/yesterday-may-11-2016-officers-with-the-warsaw-police-department-responded-to-a-/960425930732138/">Facebook</a></em>;<em> <a href="https://www.dropzone.com/forums/topic/222999-weekend-raeford-pics/?tab=comments#comment-439487">Dropzone</a> (<a href="https://web.archive.org/web/20210219184359/https://www.dropzone.com/forums/topic/222999-weekend-raeford-pics/">archived link</a>)</em></figcaption></figure><p>The user SkymonkeyONE identifies Tim Thacker as the subject and lists his username on the <em>Dropzone</em> forum: "USSkydiver". Curiously, the user USSkydiver identifies himself as "Tim Tennant" in several of his <a href="https://www.dropzone.com/profile/1794-usskydiver/content/page/3/?all_activity=1">posts</a>, including one from <a href="https://www.dropzone.com/forums/topic/184982-it's-my-last-day-at-work---and-i-am-not-sad!/">February 4, 2005</a>, in which he states that he will officially retire from the United States Air Force on April 1, 2005 after 25 years of active duty service.</p><figure><div><div><p><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-19-at-1.30.33-PM.png" width="2176" height="732"></p></div></div><figcaption><a href="https://www.dropzone.com/forums/topic/184982-it's-my-last-day-at-work---and-i-am-not-sad!/?tab=comments#comment-86729">Link</a></figcaption></figure><p>In an <a href="https://www.socom.mil/TipOfTheSpear/June%202004%20Tip%20of%20the%20Spear.pdf">article</a> from the June 2004 issue of U.S. SOCOM's <em>Tip of the Spear</em>, a publication about the U.S. special operations forces (SOF), Master Sgt. Tim Tennant, United States Air Force, is listed as the Director of Operations for the USAF's Combat Controller School at Pope AFB, which is part of the Fort Bragg military complex near Fayetteville, NC. The USAF Combat Controllers (CCT) are an elite SOF unit that specialize in airborne warfare. According to a <a href="https://web.archive.org/web/20130628090639/http://www.af.mil/information/factsheets/factsheet.asp?id=174">fact sheet</a> published by the USAF about CCT:</p><blockquote>Air Force Special Operations Command's combat controllers, or CCT, are Battlefield Airmen assigned to special tactics squadrons. The CCT mission is to deploy undetected into combat and hostile environments to establish assault zones or airfields, while simultaneously conducting air traffic control, fire support, command and control, direct action, counter-terrorism, foreign internal defense, humanitarian assistance and special reconnaissance.</blockquote><figure><div><div><p><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-19-at-1.07.40-PM-2.png" width="1008" height="1302"></p></div></div><figcaption><em><a href="https://www.socom.mil/TipOfTheSpear/June%202004%20Tip%20of%20the%20Spear.pdf">U.S. SOCOM</a></em></figcaption></figure><p>In August of 2019, Tim Thacker of Raeford, NC was sentenced to 40 years for his role in a large-scale, multi-state <a href="https://www.justice.gov/usao-ednc/pr/hoke-county-man-sentenced-forty-years-drug-distribution">methamphetamine distribution</a> conspiracy going back over a decade, which he ran out of the municipal airport, P K Airpark-5w4, owned by the Thacker family, the same airport implicated in a massive cocaine trafficking conspiracy in 1984. His father, Gene Paul Thacker, a former Green Beret and Vietnam War veteran, was acquitted essentially on the basis of his character despite "overwhelming" evidence implicating him, <a href="https://www.sun-sentinel.com/news/fl-xpm-1985-05-31-8501210917-story.html">according</a> to the prosecutor.</p><figure><div><div><p><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-19-at-3.13.26-PM.png" width="1234" height="700"></p><p><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-19-at-3.12.41-PM.png" width="1234" height="700"></p></div></div><figcaption>Google Maps</figcaption></figure><figure><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-19-at-1.30.33-PM-3.png"></figure><p>On the <a href="https://www.dropzone.com/forums/topic/184982-it's-my-last-day-at-work---and-i-am-not-sad!/">Dropzone forum</a>, when asked about his plans after retirement from the Air Force, Tim mentioned that he would continue fighting the global war on terror with his old unit as a contractor.</p><figure><div><div><p><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-19-at-3.25.33-PM.png" width="1082" height="554"></p></div></div><figcaption><em><a href="https://www.dropzone.com/forums/topic/184982-it's-my-last-day-at-work---and-i-am-not-sad!/">Dropzone</a></em></figcaption></figure><figure><div><div><p><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-20-at-2.27.46-PM-1.png" width="1056" height="1100"></p><p><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-16-at-4.59.19-PM-5.png" width="488" height="606"></p></div><div><p><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-20-at-2.44.08-PM.png" width="632" height="662"></p></div><div><p><img src="https://publish.narco.news/content/images/2021/02/Screen-Shot-2021-02-20-at-2.41.42-PM.png" width="822" height="746"></p></div></div><figcaption><em><a href="https://www.facebook.com/PoliceWarsaw/posts/yesterday-may-11-2016-officers-with-the-warsaw-police-department-responded-to-a-/960425930732138/">Facebook</a> ;</em><a href="http://www.omniskore.com/comp/2003/nats/teams_pics/702.htm"><em>Omniskore</em></a><em>; </em><a href="https://www.dropzone.com/forums/topic/222999-weekend-raeford-pics/?tab=comments#comment-439487"><em>Dropzone</em></a></figcaption></figure></div></div></div>]]>
            </description>
            <link>https://narco.news/meth-kingpin-was-director-of-operations-for-combat-controller-school</link>
            <guid isPermaLink="false">hacker-news-small-sites-26198555</guid>
            <pubDate>Fri, 19 Feb 2021 21:57:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Rethinking Our Sister Planet: A Handbook for the Development of Venus (2017) [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26198358">thread link</a>) | @asterialite
<br/>
February 19, 2021 | http://venuslabs.org/Rethinking%20Our%20Sister%20Planet%20(ebook).pdf | <a href="https://web.archive.org/web/*/http://venuslabs.org/Rethinking%20Our%20Sister%20Planet%20(ebook).pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>|w&lt;%/‚ÄìJs√ó√é.8&lt;√ºEM√í/W√§√ÜF‚Ñ¢√®√û√á¬≤@∆í	o√≤u¬´z¬Ω¬ßÔøΩes¬¶&amp;\√´√§¬¶√é¬Ω√ö/√•∆í√ìÔøΩq¬´√¢√ì&lt;≈æ√∏b√ï√π√¨¬∫¬±
o√ò¬∫√ö√∂¬ø≈í√£√∞¬§n√îjw‚Äì√£√¥¬∫¬∫2¬≠√ä√ã¬æ‚Äò√ßo¬∂N¬∂√ä¬¢¬≤√ñ√∫≈ìsRÀú√ø√•!√®}√∫√•!√•YV¬´√öY√∂√í√ø√©?ÀÜ¬¢≈∏≈í¬∫	{√ë√ô√¥¬∫4√Ω¬∫√≠:ÀÜ√†√ú√ã√æ[gJTlr√´‚Äπu¬∞¬∏}ÔøΩ‚Ä¶√à≈∏‚Ä°√≤¬´¬•e*‚Ä∫√±√¢‚Ä°P√∂~∆í¬∑√èU¬°¬¨j√Ω√∂√≠g!¬∏¬æ√ò√∫¬±X7DF√º√ím√ß√∫√¢√ì√∏
|‚Ä¶√°√ã¬ºkrw&gt;√†&lt;√•/√£¬´|√õ√âj‚Ä¢m√õY√≠√å¬§∆í0N‚Äô;W√®√ä√í¬≥≈ìn¬π\u√Ø,¬π(√ø√´R¬™R]√°

^k¬≥5uMM√ü$¬Æ¬©√ùi‚Ä∫¬¢Q¬™‚Ä°√±√á√µ√≠√∫o√ì¬º≈íK¬¥‚Äî%l¬ß(√¨¬¥ÀÜe√º√∞¬∂3√ì≈°¬∑B√Ø¬ß¬©i¬¶√µ√Ø≈∏¬ø‚Ç¨√∫/c3√ê√¢!√î√Ü-2l‚Ç¨√Ü¬πEM¬∏√å\¬∑√µ¬¥√à]√ìL√í¬∂ndj√ö^√∞jh≈æ¬æ¬∫j√É¬æ2I#√∑¬°√ÇMh√á‚Äö‚Äúw√•√ñ√á√Ø&gt;‚Ä°:√Ω4√©√ä√°√®√™≈ìN|√ô¬∂√â√ÉJJ√õ‚Ä°N√°√ç¬®√∂¬∂√ì√Ω'ÀÜEL/≈æ‚Äô/
#√á:‚Ä°BÔøΩ3~√Ü≈æP9t¬´LTI}‚Ñ¢~¬´sst√ö√ñ¬π√Ø&gt;ÀÜ√µ¬ø√∏√∞√∏√É#¬æ√í¬®√Ñ√îp√ß¬≠√óbe‚Ä¢¬≠√¨:√≠√ÖUwu7M¬©~√ù√¢f√ô√∂^u√ñ≈°+0√æ,F√áÀú√ägw4¬´√ö)a√ø‚ÄπA√á|k√úlZ√ÖV¬™¬®√ö:√Æ√ô23(7‚Ä∞√°√ãu]√≠&amp;√át√àP√µ‚Äô?ÔøΩE‚Ä†√Æ:√ïÔøΩ≈Ω@‚Ä¢&gt;*√∑¬ª&nbsp;√π√é+√óU√ó√Ö¬ΩO,T_¬º'¬¥√π≈æ√ü√≠{√™√†¬ªX√û≈Ωz:√¨,(√±¬Øb√≠;√ê√èm√í√∂l¬¥‚Ä°¬°√º√õ8¬¨√Ø{√≠T‚Ä°√§√ò√©√©√ã√∏T0'h+P‚Ä¢e{‚Äô√î√¶¬∑¬°√æ(?‚Ç¨:√∏.¬≠?_√ï√ø}¬®5~√¨‚ÄòÔøΩ¬∫¬µ‚Ä¶1
Eg&nbsp;H√å¬¨¬¨q√Ω:Àú√ô√ñ:&lt;03^f~h√©‚Äû√øO[√ª¬£NW‚Ä¶,C√π5l√ê+D‚Äì}q@‚Äì√ï√ü
X¬¢|_)¬∞¬¨√´¬¢uh√ê¬∫√°¬∫J¬™v√ø_√õ√ãK√óB√ü$.i√ß?¬ΩÔøΩO`RTe/B¬¨√ª¬§F;¬®9≈æC5¬¢
√¨‚Ä∞√¢¬∞yt√≤v5I]a}*√¥√Ä√±5¬º‚Ä∞p√ß≈æ¬ø&amp;G√ºÔøΩc¬®√µa ¬™p≈∏9q√´@+'¬§√èP`[‚ÄöJ{hi¬ª¬¢√©√¢‚Äò√´¬©0√ë√òÔøΩ√†Àú&nbsp;‚Äπp
√à	g√´≈∏√Å‚Ä°√™B4‚Ä†√µ_√±@4√ê,M¬Æ√ñ‚Ä∞√èi¬∑√â√é√Æ√´√†‚Äû!‚Äì√Ñ√∂Q√ç¬Ω‚Ä†√è‚Äô‚Ä†≈ívV√∫≈ì≈æ√î¬≥≈°‚Äù√è√¥{√âÔøΩC√é
¬®kg¬©≈°√¶2√öe‚Äû‚Äù^√ãt¬•B¬∑√ï√£¬∂¬∏√à¬•≈†{¬¨T&amp;√Ü√£√ô5¬´√ª_√öI‚Ä°¬πMh‚Ä∫Y,:√û)&gt;nq8∆í√ç√πS¬¥
√ß√∞√î√ì√ç√úN¬¨‚Ä°≈°‚Äú8√ê\√Ü7√ê&nbsp;!¬®E¬Ωh¬æ√ê√±√¶‚Äî√∞√º&amp;w¬±/√ìh`X?‚Ç¨√ßÔøΩI}~ÔøΩd¬∫¬∞J√®¬∂+¬•:√∏√º!‚Äù√Ø~5√å√∂¬¨*%√∫‚Ä¢
R	√≥√†z~‚Äù√∑&nbsp;¬º
ÔøΩ√≥}R√Åuh√≥n√≤√•‚Äî√ó¬™4≈°¬¥(ÔøΩ¬∏√∂¬ø,√ù√∫[Z√ñ√óÔøΩ.
¬Æ√ø√ü^¬æ¬≠√ü√Ñ¬∫√∞√¥√´√∏√¥ÔøΩ¬º%enaS¬∑i√µw√Ω‚Ä°h~√¶;√ø√Ω@√ô√π√ò√ùN√¨V√ú≈æ√°cLc√•*7@Z√ñ‚Äò‚ÄûGP√æ√å+m≈∏Àú√ë_kHr&gt;‚Äù¬©√ú^Ux¬∑¬≠[√ä√ãXY‚Äú‚Äú√™‚Ä∫tv√õa√π√É‚Ä∫II*‚ÄûL
B)√ú¬¢~¬æ√Ñ√î~=ÔøΩF¬™¬Ω)‚Äî√∫\≈Ω√ñ√ãx√õ√£√§H¬§7N6F&amp;‚Äû¬∫‚Ä∫¬°ux‚Ä†6m‚Ä†√ª≈ær√∂≈ìb¬ºO√ÄA^¬ø¬¥&amp;√ó√Æ√ä¬™√ä6¬™$¬≥‚Ä∫√°,√¢&amp;!√™fÀú(D√ö√ëO!√®J¬µ¬¨D#‚Ä∞u√≠}√≥w≈æ√ü$√∫bWY√£¬¨‚Äî]√≠Zgl*√∏=≈°√âÔøΩ≈íJ¬©‚ÄûÀÜ‚Äû/√ü√ä√´`√π1¬¥√É‚Ä∫
‚Ä†‚Äö9≈°C√ê√™√ë‚Ä¢T√ë e√ª√ñ¬øÔøΩ}√Ç`i√ê√™ √ö¬£√¨
√†#√≤mc¬Æ√îTeQ√±≈∏`7*√è√Üx‚Ñ¢≈°√º¬∞¬¶√©√ú√Æ[√π√ÑMÔøΩH≈°¬∫√êÔøΩ	b`D√º¬±√Üg¬∏≈ílÔøΩ√øÔøΩrÔøΩ√é|6¬¶‚Ä†√æl√∑C√ò√Æ?l¬¢z√úZIxc‚Äî√Ä√ß√úU	v√ïhÔøΩT√ò:√π∆í¬£&gt;‚Äú√É(‚Ä∫¬¢¬°#Ha‚Ä¢√∫√ç ¬¶¬Ø7√†2Q\≈∏@√π1lu‚ÄùÀú+√§2√´¬≤?‚Äò√¢√ñ¬≥vÔøΩkb√™¬∂¬∏√õ√†≈°√¥)‚Ñ¢√ô‚Äö√§¬∫K√≠/B&amp;8√°√ï√ÜW‚Äö¬≤G\#‚Äû√è‚Ä¶8+[√ºZ¬§¬§¬£‚Ä∞¬∞)`+QlX¬≠&gt;~√†lÔøΩ‚ÄìN√´e¬®UX5l&amp;gÔøΩÔøΩ	√ô√ò√è‚Ä°g0jP;¬∏L
≈ì√Ån¬æ\∆íX‚Äπ√≤√Ä¬æQ‚ÄùIA√çK2v√Ç$~"¬µ¬¨¬µ√´√ò√ôÔøΩT√®√¶√Ω$√ì‚Ä¢√±‚Ç¨√ë√†¬ªh1yA≈°+J√∏‚Ä°:{√•√ü¬£¬™Ba√•¬£ÀÜ¬¥~ w&nbsp;√≥‚Ä°	√ü‚ÄûHk'¬®Zz-=z√ª√ûe ¬ß¬ÆuQ√π√ü¬∏!√ß√®‚ÄîY√π√î¬π¬º√áR?i‚Ä°√£√ø√ûh√ßpXB√Ä√Ö‚Ä†√ô‚Ç¨¬πM√Ü√∏q√ä?@¬£√Ø¬°‚Äù√Ñ≈°H‚Ñ¢r‚Äù‚Ä∫¬§¬¨‚Äì√Øm√¶√óY¬∑m¬≠s√¢B¬µ‚Ä°‚Ä¢Z√πFg√É√ü¬¶.‚Äù√ü~√´0tO¬Æ‚Äö:√∞√°p3-\‚Äö¬∫]PZ=¬®:√Ä[RN¬≤ÔøΩ√®¬¢`¬∞
√ù¬Øw9¬Ω‚Äî√ã\¬¶d_√∑;^&amp;x√Ñ|√¶¬±√†¬¢t√Æ√ë/√®≈°Th√ë¬¨&nbsp;b‚Äö‚Äπ3≈†√º¬øÔøΩEv~'ÀÜ≈Ω√§¬Æ,H‚Äú√±9‚Ç¨√®√í‚Äû*‚Äù¬∞d√ú+√ãX‚Ä†¬≤√ö¬©‚Äù-√™√ö≈í√ó√çUF√ª√ø]√§"¬©' L‚Ä∞‚Äî√õ√∞ÔøΩT‚Äò&gt;1√ç:‚Äú√æ{‚ÄöN¬•9&amp;‚Ç¨‚Ä†√∂ÔøΩ&amp;≈∏√Çf]bi≈æN3¬º√é7√Ωf¬™√ç¬∑A‚Ä∞L¬∫4√¥√õh≈Ω‚ÄôYR2j5√åoC√ñ,√¨0‚Ä°ZM√úa#√∞√ï√≤T√ú‚Ç¨A√ûÔøΩ&lt;ÔøΩ√≤c@ÀÜ¬Æ‚Äì4√óm√õ:x√¶4o√≠√¨F¬≥j√ú*¬∫¬ø]√ÜYtMm√ü$*√≥c√íÀÜ√Å1√ü‚ÄùdQ$<d√ó¬§a{!≈∏@ÔøΩ√≤p% √´√ìÔøΩ}√ù'$¬¨j√õzf√µjb√∂':e="">√å√Ü¬∂0Ne4√Ä√à√ÖP&amp;¬£¬Ø≈æ√∏UQ}c¬¥‚Äô√ó√ë√®@∆í`√Ä√é≈ì√≥‚Ä¢_√Ñ√äX√∏Ch≈Ω&amp;?√ì√±¬°U‚Äù¬æÔøΩ√∫√í¬°|√õ¬°P√¨9pXÀÜ6a¬º¬∏C¬•Àú∆í√†`oH‚Äπ@ eOx‚Äú&amp;√ù≈ía≈íÔøΩg√û¬∂≈ígAQ√©c√≤√î)√≠sb√∫:√¥S√ß,≈Ω√¨‚Äì‚Ä∞z≈°√á¬™z√ì$M√§:/‚Ä†l0√ä‚Äû6?√ã&nbsp;0√æE¬®‚ÄπqÀú≈∏¬´¬∂s≈æo¬Æ"$-√øÀÜ√¶√≤√ë√º¬Ω√π√∏ √ùk∆í¬§&amp;√ªFI#ÀÜy=&gt;¬Ø√´¬©≈°√¥√ä‚Ñ¢‚Äπ√©√á√°Zg‚Äì√ö√åm√øh√ÆQI√•*√∫‚Ä¶&nbsp;‚Äì1uÔøΩ¬¶a√ç{¬≥¬ºW"y√ôg¬±√∂1i$‚Ä°√≤d&gt;¬©j√ô√êFI;-¬´i¬æ#$√º?EÀÜ¬Ø≈í¬∏@ÀÜ=IA_√úRH5MOÔøΩ0m‚Ç¨‚Ç¨√®√∫?ÔøΩ√≤c√®√´√él;¬£¬ºr√ì√≠38√ø-%¬∞J‚Ñ¢¬µ¬®~P2‚Ä¶\√í#A√ßI√ä‚ÄûOj¬∏5≈ΩÀÜ(√É¬•√π]$‚Ä†¬¥≈ì√´¬ªt]√ª√ô¬ª'¬¨√Æ∆íGP√ß√ë{√®ÔøΩ√ê‚Ä†&nbsp;¬π)√®VtP√æ√èq√è√Ω√≥√Ä?t2ÔøΩE:U√£√ì6∆í≈∏XBMÀÜ¬∏;‚Ä¶¬≥y√Ø¬°qt‚Ñ¢√Å√¥√≥q√≥q¬≥¬ø/√Åt√±(!vw‚Ä¢√µ?¬∂ÔøΩk[ER≈æ√ìs√è3O`¬∑K‚Ä∞√å)≈°a√ñU,Pn√§√âX~B‚Ñ¢U‚Ä¶√ñÔøΩ√é√©‚Ä¶L√â!c≈†‚Äû-√™√µGP2¬•w¬•S√õ‚Äî&amp;√Ω¬µX√Æ√ü¬•¬øF√á√éR≈Ω¬•)¬™6g√ØF√Ü√±vdo_‚Äùq√ºÀÜ√æ¬ªD‚Äô‚Äî{√è‚Äú‚Ä¶+√õU=≈æ‚Äπ¬ºT√ê√õ*¬Ø√à¬∫¬´z'∆í√ª√≥√æ√≥√æ√≥√æ√§1√ØD√¶√ña9‚Äî,ÔøΩp2√õ√ôn¬Ø√ì√æ&gt;√á√à?√á√à?√á√à√øf1rT¬•√ú√ΩA¬∫~‚Äì‚Ä†√á‚Äîw.≈†/‚Äò√Å+N`3ÔøΩ¬¶√ß~≈Ω¬πaNY√å ‚Äπe≈Ω‚Äì¬™F(0l√ú|{¬≥√ë√¨¬πo¬°¬Æ‚Ä†¬∞C‚ÄîHI!√ât8;¬¨~√ßo¬∞¬´¬ÆT¬≤√∂g√¶m6&nbsp;X√í3¬°¬≥¬±√úÔøΩ KR`√ê¬¨{]Àú:√æ√ö‚Ä†‚Äùv¬øN√®‚Äî‚Ä∞√é√≤O(&gt;Wt3U¬π%X9=√≠¬≥¬§WumÔøΩ√î√ï√´!j√Å√ú¬∫6√Ωoh¬Æ≈ísÔøΩ¬¥√í¬¶√ñ&gt;√ÉX9¬∞‚Äú.¬π¬∏√º√â	g√ß‚ÄπR√´lH√í√¥ÔøΩ√î¬¶√è7Y'√î‚Ä†Fd`‚Äöm$x√è√áÀÜ√ä√°‚Äò0zr√É√æt_√ù&amp;&nbsp;@‚ÄùzO¬∞√ºH√®√≥√ë&amp;√¶C≈Ω√Ç¬º]C√™≈í¬ø¬´¬Æi≈í√¶√è≈ì&nbsp;√°‚Äû√¥rG¬¢}‚Ä°√©¬®¬Øn:‚Ä†L‚Äù√é√ü
8`¬ºÔøΩR√©w¬Æ√ø√ßJ&lt;{Bendstream
endobj
1195 0 obj
7817
endobj
1200 0 obj
&lt;&gt;
stream
x≈ì√≠]Qo√ú6√™7'@√™√ÜI≈°¬¶=√¨C√ö√≥√∂bUER:√†^≈Ω√óv≈í8√´8¬±['O¬ΩkÔøΩz@√õ¬øp?√º(R?‚ÄôCI¬ª√û√≠]ÔøΩ‚Ä°¬≤√ú√ëÔøΩ√é√å73¬§√§≈∏gy√Üfy√≥¬Ø√Ω√Ø√∑?ms¬Æf?√æ¬∫√Ω√≥v&gt;SY√éY!f¬¢√π¬¨*‚Äπ"¬´√ï√¨‚Äî√é.¬ø≈æ√Ω{‚Ä∫√ç≈°¬ø√º¬∏√ù<g(x¬°¬§√î¬øo√ø@√∂- ovf‚Äö3√û√±d"+i≈æ="" ÔøΩ√ä=":√û√±n~¬´yeS¬≤‚Äìz≈æn√ú¬ºa&nbsp;XÔøΩ√±Z√åX%¬™,√ó\K^e¬™√ñK*√´‚Äö√ï‚Äì√∫√ßmfh√ø√≥√ΩO¬≥¬ø_h0√Ω\≈æ√ï√∫√ë√ô√Ö√õV2‚Ä†EV5,d≈æ" y√è.~√ö¬æ√û¬ª√µ|¬Æiy√é√§√û¬≠√ì9s‚Äîj7o\="" l√çe√Üxqv{¬∑\√Ø‚Ä∫√π~)2y√ó-ÔøΩ¬¨√≤r√Ø√ñ="G¬∞√£√õu¬Ω/√ß√ª‚ÄögJ≈†¬Ω[√èlo.¬∫!¬∏√ê√å^¬π√ûs√ó√¨FS¬µ√ü‚Ä†√â¬ª3√ì√ã‚Äπ¬Ω[G¬Æsg¬æ√èr¬¶√Ö√ä¬Ω√±≈æ√®√Æ√¶Àún/√µ¬•YS√ç‚Äû7√å&amp;g+≈°√é¬∑oan[≈Ω_G¬≥o√¶¬πpGÔøΩX,‚Ä°gÔøΩ√Æ√Ñu√Ç$‚Äî¬¥√ò`√ç‚Äî√§√å‚Ç¨√†≈æ{=wq¬≤¬≠√á√ã" ¬•¬¥j]√º¬£q¬†v¬•*√èy7≈ím_:.¬≠¬∂¬™√õ)¬∏√ó<u√çw√Ä√¢√à="s:w¬ΩW¬Æ" √ÉÔøΩ¬¥√í¬∂√π√ê√úw√ç0‚Ä∞n¬´u√ë<√òÀÜ√ÄxÀú√î6\‚Äì¬≤¬±¬∞}v√ñ√ö¬¥√äy¬©¬≠s‚Äìu+‚Ñ¢√ªz¬°≈†≈íu√Ü√∫√¶}√á≈ít≈∏5b¬ªÔøΩ}m√∏e√Öe√ã√¨√¨√åm√¨¬•¬≥¬≥√ì¬†√ó√ö√ô‚Ä¢{l√°≈°gh‚Äú¬≠="" ¬®√î¬¢¬∏v5¬≤j√ó‚Äù√ó√Å≈°d√•√ï¬¥√ê¬´r\¬ª¬Ω√ä_u3√†√Ö¬ø¬∂√µ¬¥√´j√ãjo7‚Äù0?}√¥≈∏√¶'√ç¬¶√∂<xc*≈†^√•¬§¬±√î¬ºv¬•¬∑¬¶3¬∑~√®]√é√∑¬µ√ü√ß¬º√©="">ur¬ª‚Äö√Æ‚Äî√≥"+x)¬§√ß√Ål¬ØÔøΩ√ä¬≥√Ñ√ã√π¬æ‚Äì≈°T¬πs‚Äö√ñ√ë√¥u‚ÄîT√ÑCG√ª‚Ä†&gt;Ct√ù¬Øu√õÀú¬∂h'm√π-‚ÄôJ#√∑√¶√¥√Ü5√©√Å‚Äò√µ5¬∫≈†1√é[√§¬∂j¬Æ√é|A≈°‚Äú.r√ë√ª¬¨#‚Äù^¬Ø√Ñ‚Äò¬£¬≤√åZ√á¬¢‚Äî√ê+w√Æ√ª¬Ω√íq";√öC@√Ø√≥ÀÜE√†y√ê‚Ç¨≈†¬º≈æ√•√í¬Æ√Æ√≠√™,qQWÔøΩsÔøΩ√Öa¬∫_¬π'[@h¬¶w0$sg√öl√≥~¬∑¬Øh‚Äôis¬£√ù√ì_5¬Ø¬ÆV‚Ä¶"√º¬≠TZ¬Æ√ö√üT3√ø¬π¬ª√é¬¶!√∫8ÔøΩ√µ√ÖÔøΩ&gt;]√Ø¬π‚Ä¢‚Ä∞d=A√¨√òk√ö¬∏:/I%[&nbsp;√ÅP≈†Ec+√®√±‚ÄôdC√†√å‚Ç¨√Ö¬Æ¬£¬∏GN‚Äö(hZ=¬ÆB√¢∆í¬±	√Å√àaa‚Ä°‚Ä∫OX√∑‚Ç¨¬®:√Ø√©≈æ;√Ø¬πy‚Äú4¬±‚Ä∞`‚Ñ¢¬™√™√û1ÔøΩ¬∂/is¬•√≠&lt;‚Äπ√ô√Ü≈†¬•√è√¢6√¨Àú√ºz√≥√Ç√ò$√≤¬ª≈Ω√†√±xl¬≤cÔøΩ¬∏J√ã&nbsp;√¨≈íÀú√§√Üq√ã≈†2/h≈í√ó6√£c√ºC√£¬π√àjmH√Üx5W,√£,√ß1√Ñ[¬¥¬ø√∞¬≤√à√â¬≠√õ¬ª√ö¬≥`√è‚Ñ¢(√ö√ù2¬Ω‚Ç¨√ô¬ø+¬¨√Ø√à=X¬Ø‚Äò¬§o√ø‚Äì√≥√õp√≤√ù¬•~EYdJ√ß√∏Sb‚Äò*L&amp;tF)√ä‚Ä∫~-g√¨‚Ä†√§‚Äûl√ë≈ægj4¬∞X#√©¬±√Æ¬°‚Ä¢W‚Ç¨√±ÔøΩÔøΩ√£~√°P√í3√Ç≈æ&nbsp;Osk≈∏]_‚Äò√©√†3w√§&nbsp;√∫.√©‚Ä¢&amp;√ê~‚Äö‚Äî¬© ≈ì‚Ä∫j√≤‚Ñ¢≈†C√ä5√ÇÔøΩh:D√§√ónE√®≈°P#‚Äò0¬πE&amp;¬¶√π¬øY(F%Qi≈°thZP¬µ√ø‚Äö√â‚Ç¨-B$≈ìV‚Ä∞0√ÜF¬©h¬´0√ëH√≥c√ç{√ó√¥[G≈†¬∂,1Z√∞0√Ü√è‚Ä¢√•¬πÔøΩ¬™rÔøΩ]≈í¬™]~√±≈í,√§√ö√Å√∞*Q	≈∏√íA‚Ä¶‚Äùzd¬Æ6T|∆íL¬≥R(¬≤,¬®¬º|¬¢¬ßÀÜ√ìP#¬¶√±≈†√´"√∫√™‚Ä¶ÀÜ¬°√†d√ì¬µ‚Ç¨R√™P√±√ø¬°√∏≈°‚ÄîqH√±?R&nbsp;f
¬¥√†a√®m	¬°U‚Ä°√Ä√É√û√Éyl√µ¬π√´m=¬©¬®‚Ä¢‚Ä°wt3¬¨`Q¬¥I√ò‚Ä°√ã,Gy√™√î√∫‚Ä∞√ä‚Ä†√õ√ä√µKpE'¬∫‚Äú0√ôrL¬æ√ü3¬≠√ú‚Ä°√ó,tjaSeE√≠≈ì√∂√™u‚Äò¬£C
.√º√Ñ{‚Ä°ÔøΩN&lt;¬§n√ñ√ºF‚Äú√ªG$‚Ä°0M?√èC`√Üx√Ü‚ÄûH ¬∞RÔøΩ‚Ä¢ÔøΩN√´k‚Ñ¢‚Ä¢¬¨C√†2
√Äl√æ@ √£¬∫j!¬£¬∏%‚Ä†"√Ä√πh¬±}¬£ÔøΩZ√∑  Àúy‚Ä¢i√ß√¶f4√¶`Fv5‚ÄûÀúÀú¬Ø√ö√ÆiÀÜ9√§√©9√å√ê√ó√ê'¬¶√£Àú√¨≈Ωp‚Ä∞√ÑT√ï)I√Ñ¬∞q√™¬¢¬•m≈Ω¬£%:ZeP√è!√ë√∏JwW
?\i+.t¬∞^√•u‚Ä∫√ÅJIÀú√±‚Äû¬∂n0‚Ä¶ÔøΩk6_(√µ&gt;¬≤r√ç¬∑‚Ä°¬™√´√Ü√æ√ò\¬™cA‚Ç¨√±√í#¬ºÔøΩ≈ì√∂¬°¬£¬®¬¥√•¬¥¬¥√ô¬º,ÔøΩt√†Z¬©√ûh|√Ø"NdC&lt;√´s√°¬º,{¬Ø√ß"¬¥w¬¥)¬Ør‚Ä†√ø√ÄL¬™‚ÄúÔøΩ√°¬ß¬®¬≥Z#g√¢√®;√Ñ√è√è√∏¬©m¬ß‚Äì‚Ä∫&gt;√∫~√™√å	¬∂4¬Æba&lt;,{oW√ç√æ$pu¬≥`JsK¬ª√óNfE≈æ√â‚Äö'‚Äú√ô√ü6o6‚Ä∫√µk√â#√âlÔøΩ!‚Ñ¢5‚Äò√≤`2kÀÜ√£dvs√∞√¨√ï=lV√ö√Æ+F¬¨√ó)√§¬∏¬∏Q¬≤√≤,iS)¬ÆB¬≠^z√∂R!S%‚Ñ¢Xz√æ√£‚Äö√Ø¬∏‚Äò¬≠‚Ç¨√í2^b¬•√éL√ùY√ì‚Ç¨}√£"tT√∞]%√•]¬≥√¥llzb√ä‚Ä∫*=w¬≤B√â‚Ä°√é(¬π√¶FJ√è¬£w√ñ¬ø√è√í√≥‚Äî6√¥√ß¬¨√¥r√í7√®Vz‚Ç¨√Ü√£√™K√∞√ë ¬æ√¢y√Æ ≈†ÔøΩ√û-√õ√¨5¬π¬°√™√¥√îy&amp;¬∞]√•Y%√§H¬°√∫√≥¬©|sG√Ü4≈ìo√∑8√Ä√π/√°‚Ä∫∆í¬±¬Ø√Ä"a√ø√â¬∏¬∂^Ta2√æ`¬µkmA2n&lt;√Ä¬¥kmQ≈í1≈ìx¬ø√ó√ì√§0‚Ä°≈ì√©√¶¬©√óp√Åf√≥yw√™6√∏&amp;√≥√Æ  ¬∫√ô7¬≠‚ÄòG√âE¬¶j‚Ñ¢&gt;JN‚Äù¬∞ÔøΩ‚Ä¢¬Æ{√è~√¥~√ö¬ß≈Ω√†√û
yw√≤√ä¬π√í‚Ç¨¬´:1√Ø√æ≈ì‚Ä†√ØR√ÅJ√≤:≈°¬ª¬©√¶√Ö √ù‚Äπ&lt;6;k¬¢P¬¨¬¢/¬Æ√ê)√ê√í√áTÔøΩ'√†E≈°7&amp;
√ß¬±‚Ñ¢√ó)‚Äî√∞*TSoB√ì.¬©@√§E¬ø≈†√öyx√ñ‚Ä¶¬∂@g1c√•c√§@√ó‚Ä†p√Æ√Æ‚Ä†√û‚Äô¬§¬•-¬¶¬Ω√∏r√é+|√é¬æ¬£2w√éi¬Ø{√≥k9`ÔøΩ‚Ä°√ò‚Ä†√´ghlW.W√≥¬ß-≈°¬æHBg)‚Ä∫√ù¬ª√©≈†√à9√ó√∂E√æ&nbsp;√É]n√ç¬∞√öl√≠Dz?¬∑√∂ E‚Äò¬≤4@K¬∏√ñ1`¬∂√ñ√ê√Ä*ÔøΩ‚Ä°¬®bq¬£√ü√Ñ¬°√Ø≈ì√É√†0&nbsp;¬∞‚Äî]Àú√øZÔøΩj&nbsp;}√£√ß-&nbsp;√ó¬§√µ!8¬ª√©DNo!√ò√Æ√å,w&nbsp;
¬¶M:9!√à;q‚Ä†‚Ñ¢√ó[√à‚Äπ√è¬Ω√¶ÔøΩn_|√ù‚Äû√Ü√£√É9√É¬±√õ√ò√Ävy√ï;RÀú√Ø ÔøΩ&lt;
v(√í√Ñ√ô√ÑÔøΩ`#√ù‚Ñ¢S√©+√í*7VR1F√∏
Y√¥¬≤#√≠d¬ΩÀú‚Ñ¢z√Ø√©$√í≈∏D¬¢√£Ux{≈†cC‚Ç¨(√ç¬∑¬£‚Äû√Ä√∏U¬ø&amp;Zp‚Äî¬§≈æ‚Äúl√•*:√≤&lt;√Ä7z√π7¬∫0¬Ω√ót	8{¬∏√óÔøΩ`j3`Y≈∏v
√ÆÔøΩu[d5¬¥]√ºy√º&nbsp;_√µ√û√≥√´‚Ä∫√∞"d√ÖE¬¥4$?0¬¶¬≠t‚Äπt!√†X√Ä)√Ñ7¬£C¬•‚Ä∞≈°'√ù}ÀÜ&gt;‚Äò¬ÆÔøΩ‚Ä†]82√•A√≤√≥¬º7√ö√∂af¬£lG√ª√ë√ù√ñ√í√¥0"Hv"√Ñi√ù¬Æ¬¨Àú7_\¬Ω√ê√±√ê7‚Äò√êÔøΩ¬Ω¬•ÔøΩp¬™KR‚ÄökVp&nbsp;√∑x^√∞≈í√ïRy¬Æ1QBÔøΩ
‚Ä∞*√çQy‚Ñ¢√∂¬¥√ì,√≥¬∫t^√Än_√ö	\√±√ßy√©&nbsp;[¬•_‚Ä†¬¶qL5≈Ω‚Äû¬´K‚Äû‚Äù,&lt;√è02]≈Ω`L%√ë√¢¬ß√±ÔøΩ&gt;t¬ß√É‚Äör[¬ª:X!S@v@¬´¬∏‚Äπ√ï'|√≠‚Ç¨¬º‚Ñ¢L√§l‚Äì‚Ä¢g¬™b¬Ω&nbsp;¬•B‚ÄúÔøΩ√∂≈ì`¬µ√é‚ÄùCw√™YQ √ñ¬Æ≈°iBÀú<j2√∫√æl≈í√Æ‚Äú¬æd√∞≈í‚Ä†√¶√∞bnt√•l5l√©,√≠i0¬µ(√Ω¬£√ß√≥1}√èy‚Äπ√µ √≠‚Äì√µy√¶¬©^ae√è="">/=√´CSÔøΩ√¢√§√êi[‚Ä†
¬ß‚Äú¬æd¬∫	‚Äú&nbsp;√ÄF‚Ä¢≈∏hjKI√¨‚Äû≈íÔøΩt√ü√Æ√Å¬ßK‚Äò/]q√ë&lt;¬§a‚Ä∞¬™K√∏M‚ÄùH#1&gt;ÀÜ4¬∞‚Ñ¢¬®VÔøΩ√ë√É¬¶√Éu√∫¬ºi‚Ä¢;¬¥s√è4&amp;f6√ë√ú¬¢¬¥+¬º√∞¬æ$¬¨√ótgÔøΩ#0√Öaxs0c√∫%I¬∫J#√á√Øt{‚Äì¬æM√ò‚Ñ¢[¬¥¬´"‚Ä¢‚Ç¨¬°√ì`&amp;D[√°√®‚Äπt‚Äù1D5^(#¬ø‚Äπ√ó,√ΩÔøΩ√ç¬•∆í√±u¬ø√®‚Äî√≠‚Äôy/√¥zOh√ø¬¥j‚Ä∞7≈°F"‚Ä¶√¶√ú|¬ß√ä‚Ä†	√§‚Äò≈ìÔøΩYQ‚Ä∞√î√Ω√òiox√∂ÔøΩ‚Ä¶√ã6√ãKTÔøΩ√µ¬¥‚ÄûK¬£√ó≈†z√ÇÔøΩ√ã√ÆAL‚Äπ√üDT√ø\9¬¶√ÉÔøΩ3√í√î√£‚Äú0√ä√∏W¬ª{7d=R"LÔøΩX √ßE√®
‚Ä†√¢¬π
u¬ßq√¥¬π√ãh√Ç&gt;z√∫
¬Æ¬º¬∏t√∫√ªJ√ìj¬∂√≠¬ΩW√º&nbsp;k√à4√≤√ê¬≤J:√ô≈Ω¬≠7¬©¬∞2f√¥√ø;0√à√ë√ì≈íoiN|¬§ÔøΩN
hÔøΩ&amp;v√§‚Ä¢¬¨√ØrÔøΩÔøΩp√ëW/‚Ç¨t¬¢L]
≈í√™√£¬•@O√Ä√ü√É√ê¬∞‚Äπy√†3&lt;√Ä√¥:~R√ãD‚Ä¢Ur√®‚Ä†√¥¬ÆwjK≈∏√î√¶\√ã‚Äî‚Ä¶≈∏&lt;{√™√¢√∫√Å≈í√Æ‚Ç¨√é√ã√°¬±A|6h#√ìw5√Ä¬™√è√â‚ÄòÔøΩ√†¬π‚Äπ√®(ÔøΩ√®EdPÔøΩ;¬∏‚Äò√û¬Æ√ì	t‚Ä°E√°√Ç√Ä√©√ì ‚Ä†F¬∑~
¬≠‚Äπ‚Äö¬ªK√õ√Ä
√ñ‚Ä∞√ï√Ç√±√®√Ω√µ¬ºTc√ï&nbsp;G≈°
√µKrB¬£√ü+L\EwÔøΩ(√ó√ì7&lt;√©√ùr9 :ÔøΩ
,√é‚Ä°e!√ú√ß√Å√∂¬ª√ùI√Ω.√è‚Ä°√†√é|¬Æ√©‚Äô√ø√∞√¥√òOÀújv√ø!-8&gt;√í√¥√∏C√á√áP,5N&lt;√´‚Ç¨n"I√¥√ßÔøΩxe≈†√Ü√æ√çB√ó√Å¬∑¬£√à¬∏L≈ì¬∞√Ü√Ω‚Ä†&nbsp;√ó+f√ßJ+Uo√†h√ä4√û√Éh‚Ä∞√ó‚Äπ√ú‚Ä¶"≈Ω√µ√Ö√∫‚Ä∞‚Ä∫√º
¬≤¬§√´¬™
.√´F‚Ñ¢VAc¬∂∆í√ü√ªK+√ò√¶√ä√≥√®ÔøΩ∆í#U¬§¬≥√Ø≈æ‚ÄìA2√∞t¬µ√ë;s¬∂[√∞¬∫Q≈æ
c
%¬≥W≈Ωb¬¥√íFc6√¥^√á|¬•¬∏√Ñ5‚ÄúI}√∫∆íH&nbsp;√éÔøΩ√ì¬°~√Æ1	{≈∏j\¬™√ÄG≈∏‚Äú[‚ÄúvI√≥_I√´¬∑√®√è(Gua√¢√™¬•-√Ø√ãL)9√≤2ÀÜ≈íx‚Ä∞&gt;~√Ép&lt;√é√¶‚Äö√îf√ºn√Ç√Ñ‚Äô|‚Äù√Å‚Äù√§¬£/¬≠Vg¬£¬≤√Ø
v‚Äù‚Ä°G√ü√§√çW√í≈æ√≠K√ô‚Ä∫f√è¬¢√åT¬≠√ç√â¬∞(x‚Äú¬´‚Äî¬≥}√â¬µ√ê¬§√®yTJkvs√´√¶^√ìdU`√Å√∑ÔøΩ‚Ä∫W&amp;¬™¬¢nxh√ù(K¬°√É‚Ä†¬ÆZ√ì¬•w¬∫¬£dJr√≥1‚Ñ¢√©¬¥√Å~"¬∞iWe√£k¬≠3*eib¬Æ√óQ√§√∂‚Ä∫d¬≤hhx√è¬¶*¬ª'¬π(L¬≤√êw[
¬©√å¬•9Gq√ñ√∞√£≈†√ïÔøΩ]&nbsp;√∏¬ºÔøΩ‚Ä∞√ΩÀú‚Äô√´¬ø√≠-Zl√Ω≈°EV√óe]≈†√≠√Å¬∫b√ªÀÜ√ß
D¬∏^=
h√©-¬¢‚Äî√ê&nbsp;M√≥¬§r√¶√∂x√Ñ2¬¥√≠√á√∞√§∆í
√ã√∞√°√ûX‚Ä†≈∏~ÔøΩ√°ÔøΩe√∏√®∆ío,√É√è&gt;√à√∞√Ü2|√ºA‚Ä†7‚Äì√°√ßd¬∏≈æwÔøΩ√Ø¬≠+√É¬Ø√ß√ç√õ¬ª‚Ä¶√†√∂√Æ~Y√®¬∂,√∫nP≈æwI√Ωu.Y‚Äú√ÉJS√Øz√≥¬π√πtv¬µ√Ø‚ÄûÔøΩ¬©√ù¬∂∆í√ßM‚Ä∞bJtÀÜ¬º√ìN\y√©√§√ä¬•D¬°¬®&amp;L/√∞¬≥√ô√ç√∏‚Äû=√ôw&lt;¬Ø√õ√†Wx!√±¬°√´Ebr¬±√ª√¶√û√§√ç¬£√ú√û‚Ä∫√≠g‚Ä∞√¥√á¬§dZ‚Äò√ã√ä¬æ√él¬∂√Ö√ñf\¬ª%√ç√ô√Å√õ=‚Äú¬±¬®√Æ¬´‚Ä∫0√í√Ø√è-h[¬©VB√ñ¬Ω:√§√í√ô¬π~¬§G≈æo&gt;‚Äù&gt;¬≤\¬ß‚Äû≈†√É	√°,√¨
¬§[√Ä¬´√Ñ‚ÄûN¬≠√Ñ√õ¬Ø¬∫√¥√£≈æ√π1p¬∑[√àj‚Äî√∏‚Äô3√ág7!ÔøΩ¬ß√ê√æ√ò|‚Äò&nbsp;√ø¬™uPE¬∞s‚Ä∞E√ÅtP¬∞o√ú¬¶¬∏¬ß√∂S√ô4\‚Ä∞√í≈∏√Å9√å√†¬•3M≈ì√òO_I√Ö*‚Ñ¢√ï√ç√∑¬∂¬¶¬∏¬®√ùu]T√ß[¬∏¬Æ√®¬∏¬®]h?≈°;√†U"√ó√∞√¨b{¬πÔøΩ7¬æ¬™¬™K1√ì*√áy≈æW¬∫Q√•ys√©√Æ‚Äî¬µ√ä*‚Äì√âY√Ö¬´¬¨√π¬¨U6√Ωo≈†¬°√ÆwS,√ó√ëE√Ü+¬©√ö?)f¬´≈í‚Äöq√¶;D¬©ÔøΩÔøΩ‚Äú¬´√ßR4G&lt;√©‚Ä¶¬•√áN`√ó∆íÔøΩ≈æ+,‚Äû√®√ù¬∑√´y,`p_]z&amp;¬∑√ù¬¨¬•√£wE√è√ºR¬ºv&lt;`√∞√Éx@¬£√≤√≠¬¥9√´√ê√í√±AT~√¥)1¬Ω√µR√úy¬©√ß√∞√®yl¬πf√®√âbS¬¥√≠n¬•Bx3≈æ¬≤√îF¬°¬≠=√∞√â0r√ëw`¬¥‚Äû√Æ/√©¬≠¬¶√ê√ç√ã≈†¬π:√•ÔøΩ:EoT
¬Ωi√ë‚Ä¶!¬Ω≈°(√üK√∞√ú)¬∫]n√öHi√Ä√Ö"K√ú‚Äû√£*=q√ª¬Ω√ß√Æ√°√ΩeE√±¬æ¬¢√∂ÔøΩ9¬¥√Ç	@√ï√ÇWe√á√ú‚Äô&lt;‚Ä°√æsh¬∑√∏]√à‚Äô¬¥T3¬±√õ&nbsp;¬¨¬Ω√∞‚Ä°m√éÔøΩ√ßPÔøΩR√à√πv√ûQ√Å=	&nbsp;¬¨‚Ä∞8√á√å¬Ω?Gacl¬∂_k¬§`P¬¥√Å≈Ω√±*ÔøΩ≈Ω√ß√ús¬≤≈æFÔøΩZ√°√Æ√πV√úv√Å¬¨U√Ä.√ö*K‚Ä°¬∂¬º√∂‚Äú¬´√ù‚Äì√æ√è√ê,?K‚Äû¬º√∑¬¢√Ç¬∂¬£√ò√õ‚Äû≈†O]/√Æ2¬∂¬Ø‚Ç¨9f;Qq√ñ‚Äôx√Åz√Ø*≈°√ø‚Äû{√øfendstream
endobj
1201 0 obj
4716
endobj
1211 0 obj
&lt;&gt;
stream
x≈ì¬Ω][ÔøΩ√ú√Ü¬±¬≤/'‚Ä∫√í√ä¬∫√Ü√é√Å&lt;√∏√Ñ√öXK¬≥√ô√¨√≥H√öYI√ëz/√í≈Ω,√©)'	√Ä≈ì√º √ùl‚Äô√ΩuW59¬≥+√¨U¬¨¬æ√ï√•¬´G?¬≠√™J¬¨j√øg√∏√ø≈∏√ú√ø√Æ√ú¬¨√æ√∂¬Ø√Ω≈∏√∂√´‚Ä¢¬©D√ùI¬ªRÔøΩ¬™W¬∂m≈°√äv¬´√æeu√µ√ª√ï?√∂√Ö√ä√ø√π√ß√ü√∂√Ω{=‚Ä¶l≈í√ñ√Æ√Ø√∑√ø√ä&gt;;√´y≈†¬∂√íu√ó≈Ω&lt;‚Ä¶¬™$√ã√ì√ë)SK&nbsp;k√•√à√õ√ø√ù¬¥.¬£;]√ï2√é[{Ft≈Ω¬±Z	¬≠e√ï¬∏7¬§¬≠L√ßv√îvÔøΩ√®√±O√ª"√ê√ø√ª√≥ÔøΩ¬´√ø¬ªt√ª√Æ¬µ¬∫√™¬¨¬≤¬´√ã¬ø√Æ‚Ä°∆í+#¬™√és4¬∫v+¬´√ã√∑?&lt;¬π¬µ&gt;t¬§¬≤√¢√â¬≠‚Ä°G¬≠¬™t√ó=¬πu√°≈∏6Z¬©'¬∑√é#√Å¬ªH¬∞≈æ√™'¬∑√û√ô¬™√ñ¬™3‚Äò‚Ä∫{|p¬®*¬°m√ù&gt;¬π¬µ√ß‚Ä°¬≤i√≠‚Äú[√∑#&lt;√Ω√æ√∞H√â√äh7√ù√ãHp7r‚Äö√Åt√Ä√¢$≈∏‚Ä°√Ök‚Äò¬Æm/R≈ì√Ñ√∑^
SIm√ú|√Ø√£√∂√ñ√¨2ÔøΩ√É√ì√ö¬≠√¢Y~√º8¬ºg¬∫xD~√û‚Äù¬™Kf!¬∫≈Ω√ãx<l√Ä==‚Äπ√ì√†{√Ä√ñ¬¥≈Ω√Éa√ü¬¶¬∂√âc ‚Ä†√Ö="√ã≈æ‚Ä†!‚Äπ0≈∏l√º*">]¬æ√úw¬ßQ√ïm√£√Ñ√™√≤√ø¬Ω¬Ω√°√∑t√Ç√éÔøΩ;¬Ω≈†√ß√º√™yv√ã√Ñ‚Äòb3√ßi&lt;7ÔøΩ(`6≈ìwc¬¶√ª!N1√ú¬∂¬©k‚Äò√¢:‚Äô√á!&lt;'4M√Ç√ªvd¬´‚Äö¬≥¬∞z√ø0√ö√ª√∏√î√ü√é√ëx=G√é√ét√ñ¬®√°‚Äì-∆í‚ÄìI¬π¬§eDq√éy¬∞√áR≈ì√Ö!¬ØZ¬Ø√¢Sx¬≠`e`A√èXnH√å¬®^%¬∂+"¬∞F√äv√òp√Æs2.√¥d√¢√ß&lt;√é\‚Ä°^√Ö√á√ß√º¬¢y√Ør=√§√¥&gt;h¬ªc√§&lt;√û¬®√≠DÔøΩ√É‚Äπp√ê√π‚Äû¬Ω√≤‚Ä∞Z8√ûr√î√ûSi√ß
√õV{O√ï√®¬™i≈íY¬µ√é√â√©√ñ√ì√ùw√Ø5‚Ä¢¬∞n#√∑√¢√∞~√§¬æ√Æ¬®1MU7√Ç‚Ä∞~W¬µVj√è√ÉOw√π√∑}¬©¬™√é]x¬Æ√¶√∞√à√É√ì√âD
√ó√ë‚Ä∞‚Ç¨¬∏√±¬≤y%D≈í√©¬≤√∏¬ØYUy√è2C√°√éU,,√¥x√ç^=√ú√ö≈í√Ω√©o
H]√Ü	1‚Ä°≈æ√†w√Ä√ñ{ÔøΩ¬∞√†5if¬¢StmE¬≤&nbsp;cV5&gt;ÔøΩ√º¬Æ9W‚Ä∫√ô+∆í2‚Ä¢¬±rR‚Ä†¬ªqi√î|√¶N√©t√≤¬£√ß√¨√ä√û$A√ºx‚Ä†√ô¬´√â≈ì√Ñ√ã√®E'¬®$u3a√∏f‚ÄìHJ√∞3ÔøΩ√õ¬Æ‚Äô¬πFÔøΩ69‚Ä¢√ÑQ¬§√†R¬π√Å.√õ¬π^w√â¬™√Æ≈°q1¬Ω√Æ‚Ç¨z‚Äö"≈ægz≈æ/)"√è¬Ø¬°"‚Äöz¬æ√¥^&gt;]‚ÄöZS√±√õ¬æ‚Ä∞√É√ºTsK√ê√à¬ø!√íK"/√∑√Ør8J√±¬¥l√Æ√É√∞√•‚ÄôVG,i5)o"√† √ñ,_*H√†ÔøΩ;~¬øÀÜ¬§√°¬¨a¬Ω¬∞cÀú√ç√õ≈°¬º‚Äî√É√áe¬≠√¶m√ù&amp;‚Ç¨√æ‚Ä†a√ìq2√∞-h√µ¬µ_B√Ö%¬øÔøΩ¬±√∞T√ì√≠√Åp‚Ä¢‚Ñ¢=x√¶¬®√£"√∫D‚Äò√Ñ&nbsp;kJ&nbsp;¬∑√ê√∂√úqE√Ω|¬±√§¬¢√π√Ä‚Äù√á‚Äò¬º√´‚Ä°E√¶rI √Ö√¨.2¬≠DP√á√´√ü‚Ä†‚Ä¢}¬∏d&gt;^|Q0¬º√¢¬¢KX(o¬¢√ªKbfx√Øj0	u¬•√æMb`¬´√º&nbsp;
√ãa¬±apOor|0g√Ñx√≥¬π√°√´√πd¬¢y√èKp√ê4T√å√≥√®√à_√Ü‚Äî¬±¬µÔøΩ¬¶¬≤¬∂-`kc"¬∏√∂√£&lt;¬∫‚Äì√ÜV¬≠lv@√ó_;¬¶√Ω¬±‚Ä¢√ÇHP√ó√ë‚Äô≈†4e√∫
Z√å'k‚Ç¨`F3‚Ä∞I(¬§¬∞(√∞¬ØS√≥
√∑¬Ω/ÔøΩ‚Äö√£	ÔøΩ¬∏8F√©√•R(0.√à‚Äû2D‚Äπ.¬∑ÔøΩ¬æ√¢‚Ä¢≈†ÔøΩGn√≤}¬¢k√Ä~{√ò≈°¬™¬∂M;¬¶s√Ä√ª√±"8'ÔøΩ√õ%9¬ß√õ,C$√¶√Ω.ÀÜ√ê≈íYO√ºb√ë√•#¬ºÀú¬ß{¬®‚Äîb¬¥W√π^`√≤√Ñ&gt;O√¶G‚Ä∞√†‚Ä¢√¶`}w√®√år¬≠√†¬Ω‚Äî√•&gt;¬Ω,S√å'k@;y8¬º√®√ë√πÀú≈°ÔøΩ¬ø√∫√ç√ª|p
√º‚ÄöÔøΩ1&lt;√ù¬∞|y√∑x‚ÄîUj‚Äô‚Äπ√∑≈∏√∞ÔøΩ√∑√∏‚Äπ~k√é‚Ä°√è√≥¬æ6√Å√ú¬ΩK]‚Ä∞≈Ω‚Ä¶√µ_F√ö¬Ø√¢√∞¬ø‚Ä∫¬™‚ÄòJ¬ßnp9ÔøΩ√µ‚Äö√∑√ñy¬∂#LÔøΩy‚ÄìQl‚Äî√Ö√∫√Ø√û√ìz‚Ä¢√¨)W(√¢√è?&gt;<a+≈†√Å√Å1¬¢‚Ñ¢√Æs√´≈ì%‚Ñ¢k√ô√©√ß,5ÔøΩ¬∞$√â√∫9(√ë√©jk¬Ω≈ì¬•√≥@√¢ahhg¬±√µÀú¬¶ki√¢√†*√Ü ∆í√ë√â√Éw‚Äò≈íqa√•a¬π√Å="">,√ß‚Ñ¢_¬∞∆í‚Ä°&amp;|¬≤‚Ä∫√ßÔøΩX¬ºB:ÔøΩ7<t¬∫l{!ÔøΩ¬ºaÔøΩ √µ√á;¬†x[≈æ~≈ì√ãi√Ä`√≥√Ä¬ø√ûÔøΩ‚Ñ¢‚Äúh="">S¬©hc‚Ç¨C¬¨√π√¨‚Äû√ÅÀÜi√è
¬≠√ëd‚Ä†¬Ø+√°‚ÄìÔøΩ√•YÔøΩ~√Å≈íÀÜ@ÔøΩx√≤Bl0‚Ä°HFÔøΩ√±≈ì√°!‚Äì≈Ω/XR≈∏‚Ç¨√ÖÀú¬∏-√ó¬øRv&nbsp;‚Äûk√∞‚Ä∞n√ø^¬¥_√Ñ¬°w+pÀÜ¬æ‚Ä†√ñU=√ãt√≤¬≥hm¬®‚Äù√Å[Z√ö√í1tZ¬≥k√£√Ω√°√±$H4u*||√à∆í√û√Ö\√õ¬µ√É"√±1;√§Uq√Ü=√è√•√´√í¬£aFW5B¬ß√∏‚Äû(√∂¬≤‚Ñ¢X√Ñ\hQ'√¨‚Ç¨√¨≈°¬¶KÀÜ.≈æ¬∞¬∑¬∫SÔøΩ√±:f√Ü‚Ä†√èZ¬º≈†f'√Å√Ä≈°ÔøΩ√æ1√ò&nbsp;&nbsp;√¶¬≤√ÆJ¬®√£HhU¬©V√úQw√ÆP6?~√Ñ√öh#T‚Äô√Å√∏√Ä≈°‚Äû)√Øb√ª√õ¬∏ÀÜÔøΩy√†

√∏≈∏O=√∞UÔøΩkB¬π√ï√Å≈Ω‚Äπax¬∂≈æ‚Äπ√∏‚ÄùO&lt;‚Äùx¬∂c!wv√ã‚Ä∞r¬¢¬•&gt;¬æ√ô‚Ä∞√±√ß√ï√óBÀÜÔøΩ6z¬¢]¬º√Ç√¶(yd√Ö+h≈æ,"‚Ç¨c‚Äû√ë√é!P2¬®√£&nbsp;√ò¬ß<r√ò¬• ,ÔøΩn¬º√è¬§yhv@‚Ä¢‚Äìs_-m="√¢‚Ä†peY^∆íd√≥√ªÔøΩ‚ÄôP¬©&nbsp;‚Äì:¬´T√§√ç$√ã¬Ω2A]/x≈†√≥L¬∑i{_√òÔøΩ√¢‚Ñ¢|GÀú≈°t√Ö√ô√™Y√û√â√ºÔøΩQ:√Ä√õÔøΩ.$√áÔøΩ√ükb¬æc¬Ω|!¬µ7~√ß‚Äπ√Ö¬°‚ÄôÔøΩ¬±G√ßw<ÔøΩ√†‚ÄòC‚Äî¬πxa√ê√∞√Ü¬¢ÔøΩ‚Äò.B√ìRh√ä5=Yr‚Ä†√§√≥¬¥.(¬®4√Ø√∏OY,," kqt√∏e√£‚ÄìÔøΩ¬∫8¬Ø="" 3¬¥\¬ßt¬¢y√É¬¥jÔøΩ¬©‚Äπwy√¥p#√ß~‚Äú="" √É¬∂vc‚ÄîxeÔøΩ¬µrl√ë¬°r√Æ¬¥o!="" √´√≥√∂√°√æ‚Ä∞r√ù‚Äö¬∂bd+√†‚Ä¢‚Äì'x√áe√∏"+¬ºur√òh‚Äπ√™¬≠j="`$#,√¢¬∂√òI√Ö¬®¬¥¬ßX¬∂‚Äπ;¬•Fx√µ¬æb∆í√ø√øÔøΩ√¢&quot;¬æ¬∑√¶¬µl√Ç&nbsp;">c√ß√¶1D&lt;¬º%√≥√á¬¢:e√õ‚Ä¶√ú√ÉÀú√Ü0If2√èg√∂√ô‚Ä°¬ΩÀÜ1√¢√É√Ö√ÜC^]i¬≤i≈í¬øT√π$√ò
,m¬¨qhJ?√∂@¬¥√ê√∫≈Ω√ç{|u√°‚Äù√Ö√Ø¬º√Ç√•*@l¬Ø#;wZ]√è‚Äû‚Ä¶√àAWÔøΩ√®&amp;√É√Å√´¬Øosi√î&amp;k√∏‚Äû√ÖN√æ"?b√ô$%√±9I@a!‚Ä°√ûA¬Ωg√Ω√ß¬º√•√ò03¬º
[¬®¬°√å√â√≥√∑√ê≈°√∏‚Äò¬∂Q8‚Äû√õ
,≈ìLZ]√Ä
‚Äîq¬∏a‚Ä¢‚Äô¬Ø‚Ç¨Nm√æ√ë√©¬°√ü√©¬£¬•√Ä5;¬∑_√ç√Ü
|n¬Øe.¬≥WN|¬Æ|√º¬∂√âL¬•$.:√¥5‚Ñ¢¬™√©√¢g3l¬¥√é√Ø√®9¬ø√∂√Ç√∑
Q¬æ=+√Øf	√Ém"b√Ä∆í√ß¬±√∫ÔøΩ1√ü¬ªÔøΩFACb8√£LU√πh-√ü≈Ω√à√¥√®√¶√ò‚Ñ¢√∫¬°!√ç√õ%√ä,@y√ã¬∞≈ìG&nbsp;ÔøΩSeO[‚Äön^ H¬£l6;√î √è≈∏xH√∫‚Äì¬Ø√∂√•¬®‚Ç¨&nbsp;	¬æ3√®i|ZRK&gt;B‚Ä∞}H-W √†¬ø¬ØÀÜ‚Ä¶86K,¬∂oq≈æi√ª\@
√ûk‚Ñ¢√®√üCPH‚Ç¨‚Äö¬≥√§¬±9z√≥√ÉÔøΩ:l¬¶¬°?√õ‚Ä°¬®¬∑YEY√æ|m1¬∂K√ø1√ü√Ñ¬∏Àú*√à√ÅwI√ü¬∑√é\M["√©¬™,¬æ√ºy¬≥U[~√≥ZJVg√öT¬¶‚Äπ¬ºBÔøΩ¬ª√ã√¢y ¬æ√º‚Ä¶-%√∞3√≥O‚Ä¢
√Ü√ï√è|U¬∫\x‚Äî≈íÔøΩ√º√ÄÔøΩ&amp;√ç√ì√ø¬•RP√≤Aj¬∏¬´,j√¶¬ª√´√Å)√≥M%&nbsp;√≤√∞‚ÄùWs&nbsp;¬Ω`5,‚Ä°¬π‚Äû‚Ç¨√óQ¬æ√ΩxU√É√áA√ãUH√Ö√≤h‚Äú√ØE≈æ√±√†¬Ω‚Ä†m√´√Ä‚Äú\ÔøΩ≈†v9C√ç\¬Ω√∏√ù√πb√û*¬µ√Å)¬∑√éwD¬•√ü¬≤0o≈°k$¬æ8_|√æ)√±e‚Ä†S√à¬Ø$‚Ä°k√ï√ä)H+√Ç¬∑¬¨√ÉfÔøΩ¬§¬©Zm√áN¬ªo‚Ä¶u"_√∑2v√§+√§¬∫√≠√Ö√âÔøΩMS√∑v√ºHVR√î¬∫i≈í√ê}¬≥J[Y¬°u≈∏√é√≥¬µ√≤V√∏l6∆í-sK¬¥¬∂ÔøΩ¬≠‚Äî√Ü√™&gt;')√é‚Ç¨√°1&lt;√≤x|√£√∫¬•[¬•√¢√í√≠¬¥,√ì√Ü9U
S√Ç√ühh√Ω√≥;¬™;;q4M√∫√¶3`√∏2R√†&lt;√à√∑&amp;2ÔøΩ√©¬§xwY"√â√õf0}√ë¬∏√πd=√ø1√π%z√¢f,~O&gt;√æ{¬•,r√û√ú√á¬∏V√éOAJ}y^j‚Ä¶</r√∏¬•></t¬∫l{!ÔøΩ¬ºaÔøΩ></a+≈°√°√°1¬¢‚Ñ¢√Æs√´≈ì%‚Ñ¢k√π√©√ß,5ÔøΩ¬∞$√©√∫9(√±√©jk¬Ω≈ì¬•√≥@√¢ahhg¬±√µÀú¬¶ki√¢√†*√¶></l√†==‚Äπ√≥√†{√†√∂¬¥≈æ√£a√ü¬¶¬∂√©c></j2√∫√æl≈ì√Æ‚Äú¬æd√∞≈ì‚Ä†√¶√∞bnt√•l5l√©,√≠i0¬µ(√Ω¬£√ß√≥1}√Øy‚Äπ√µ></g(x¬°¬§√¥¬øo√ø@√∂-></d√ó¬§a{!√ø@ÔøΩ√≤p%></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="http://venuslabs.org/Rethinking%20Our%20Sister%20Planet%20(ebook).pdf">http://venuslabs.org/Rethinking%20Our%20Sister%20Planet%20(ebook).pdf</a></em></p>]]>
            </description>
            <link>http://venuslabs.org/Rethinking%20Our%20Sister%20Planet%20(ebook).pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-26198358</guid>
            <pubDate>Fri, 19 Feb 2021 21:39:08 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Skeleton and Principles for a Maintainable Test Suite]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 1 (<a href="https://news.ycombinator.com/item?id=26198173">thread link</a>) | @lukastyrychtr
<br/>
February 19, 2021 | https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/ | <a href="https://web.archive.org/web/*/https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
  <article>
    
      
      
<ul id="frontmatter">
    <li>
        <time datetime="2021-02-14T14:00:10.47Z">February 14, 2021</time>
    </li>
    <span></span>
    <li> 4133 words </li>
    <span></span>
    <li> 21 min </li>
</ul>

      <blockquote>
<p>This article is a sample from <a href="https://zero2prod.com/"><strong>Zero To Production In Rust</strong></a>, a book on backend development in Rust.<br>
You can get a copy of the book on <a href="https://zero2prod.com/">zero2prod.com</a>.<br>
<a href="https://www.lpalmieri.com/subscribe">Subscribe to the newsletter</a> to be notified when a new episode is published.</p>
</blockquote>

<p>We have used a test-driven approach to write all new pieces of functionality throughout the book.<br>
While this strategy has served us well, we have not invested a lot of time into <em>refactoring</em> our test code. As a result, our <code>tests</code> folder is a bit of mess at this point.<br>
Before moving forward, we will restructure our integration test suite to support us as our application grows in complexity and the number of tests increases.</p>

<ol>
<li><a href="https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/#why-do-we-write-tests">Why Do We Write Tests?</a></li>
<li><a href="https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/#why-dont-we-write-tests">Why Don't We Write Tests?</a></li>
<li><a href="https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/#test-code-is-still-code">Test Code Is Still Code</a></li>
<li><a href="https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/#our-test-suite">Our Test Suite</a></li>
<li><a href="https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/#test-discovery">Test Discovery</a></li>
<li><a href="https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/#one-test-file-one-crate">One Test File, One Crate</a></li>
<li><a href="https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/#sharing-test-helpers">Sharing Test Helpers</a></li>
<li><a href="https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/#sharing-startup-logic">Sharing Startup Logic</a>
<ul>
<li><a href="https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/#extracting-our-startup-code">Extracting Our Startup Code</a></li>
<li><a href="https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/#testing-hooks-in-our-startup-logic">Testing Hooks In Our Startup Logic</a></li>
</ul>
</li>
<li><a href="https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/#build-an-api-client">Build An API Client</a></li>
<li><a href="https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/#summary">Summary</a></li>
</ol>

<p>Is writing tests a good use of developers' time?</p>
<p>A good test suite is, first and foremost, a risk-mitigation measure.<br>
Automated tests reduce the risk associated with changes to an existing codebase - most regressions and bugs are caught in the continuous integration pipeline and never reach users. The team is therefore empowered to iterate faster and release more often.</p>
<p>Tests act as documentation as well.<br>
The test suite is often the best starting point when deep-diving in an unknown code base - it shows you how the code is supposed to behave and what scenarios are considered relevant enough to have dedicated tests for.</p>
<p>"Write a test suite!" should definitely be on your to-do list if you want to make your project more welcoming to new contributors.</p>
<p>There are other positive side-effects often associated with good tests - modularity, decoupling. These are harder to quantify, as we have yet to agree as an industry on what "good code" looks like.</p>

<p>Although there are compelling reasons to invest time and effort in writing a good test suite, reality is somewhat messier.</p>
<p>First, the development community did not always believe in the value of testing.<br>
We can find examples of test-driven development throughout the history of the discipline, but it is only with the "Extreme Programming" (XP) book that the practice entered the mainstream debate - in 1999!</p>
<p>Paradigm shifts do not happen overnight - it took years for the test-driven approach to gain traction as a "best practice" within the industry.</p>
<p>If test-driven development has won the minds and hearts of developers, the battle with management is often still undergoing.<br>
Good tests build technical leverage, but writing tests takes time. When a deadline is pressing, testing is often the first to be sacrificed.</p>
<p>As a consequence, most of the material you find around is either an introduction to testing or a guide on how to pitch its value to stakeholders.<br>
There is very little about testing <em>at scale</em> - what happens if you stick to the book and keep writing tests as the codebase grows to tens of thousands of lines, with hundreds of test cases?</p>

<p>All test suites start in the same way: an empty file, a world of possibilities.<br>
You go in, you add the first test. Easy, done.<br>
Then the second. Boom.<br>
The third. You just had to copy a few lines from the first, all good.<br>
The fourth...</p>
<p>After a while, test coverage starts to go down: new code is less thoroughly tested than the code you wrote at the very beginning of the project. Have you started to doubt the value of tests?<br>
Absolutely not, tests are great!<br>
Yet, you are writing fewer tests as the project moves forward.<br>
It's because of friction - it got progressively more cumbersome to write new tests as the codebase evolved.</p>
<blockquote>
<p>Test code is still code.</p>
</blockquote>
<p>It has to be modular, well-structured, sufficiently documented. It requires maintenance.<br>
If we do not actively invest in the health of our test suite, it will rot over time.<br>
Coverage goes down and soon enough we will find critical paths in our application code that are never exercised by automated tests.</p>
<p>You need to regularly step back to take a look at your test suite <em>as a whole</em>.<br>
Time to look at ours, isn't it?</p>

<p>All our integration tests live within a single file, <code>tests/health_check.rs</code>:</p>
<pre><code><span>//! tests/health_check.rs
// [...]

// Ensure that the `tracing` stack is only initialised once using `lazy_static`
</span><span>lazy_static::lazy_static! {
    </span><span>static ref </span><span>TRACING</span><span>: () = {
        </span><span>let</span><span> filter = </span><span>if </span><span>std::env::var("</span><span>TEST_LOG</span><span>").</span><span>is_ok</span><span>() { "</span><span>debug</span><span>" } </span><span>else </span><span>{ "" };
        </span><span>let</span><span> subscriber = </span><span>get_subscriber</span><span>("</span><span>test</span><span>".</span><span>into</span><span>(), filter.</span><span>into</span><span>());
        </span><span>init_subscriber</span><span>(subscriber);
    };
}

</span><span>pub struct </span><span>TestApp {
    </span><span>pub </span><span>address</span><span>: String,
    </span><span>pub </span><span>db_pool</span><span>: PgPool,
}

async </span><span>fn </span><span>spawn_app</span><span>() -&gt; TestApp {
    </span><span>// [...]
</span><span>}

</span><span>pub</span><span> async </span><span>fn </span><span>configure_database</span><span>(</span><span>config</span><span>: &amp;DatabaseSettings) -&gt; PgPool {
    </span><span>// [...]
</span><span>}

#[</span><span>actix_rt</span><span>::</span><span>test</span><span>]
async </span><span>fn </span><span>health_check_works</span><span>() {
    </span><span>// [...]
</span><span>}

#[</span><span>actix_rt</span><span>::</span><span>test</span><span>]
async </span><span>fn </span><span>subscribe_returns_a_200_for_valid_form_data</span><span>() {
    </span><span>// [...]
</span><span>}

#[</span><span>actix_rt</span><span>::</span><span>test</span><span>]
async </span><span>fn </span><span>subscribe_returns_a_400_when_data_is_missing</span><span>() {
    </span><span>// [...]
</span><span>}

#[</span><span>actix_rt</span><span>::</span><span>test</span><span>]
async </span><span>fn </span><span>subscribe_returns_a_400_when_fields_are_present_but_invalid</span><span>() {
    </span><span>// [...]
</span><span>}
</span></code></pre>
<p>There is only one test dealing with our health check endpoint - <code>health_check_works</code>.<br>
The other three tests are probing our <code>POST /subscriptions</code> endpoint while the rest of the code deals with shared setup steps (<code>spawn_app</code>, <code>TestApp</code>, <code>configure_database</code>, <code>TRACING</code>).</p>
<p>Why have we shoved everything in <code>tests/health_check.rs</code>?<br>
Because it was convenient!<br>
The setup functions were already there - it was easier to add another test case within the same file than figuring out how to share that code properly across multiple test modules.</p>
<p>Our main goal in this refactoring is <em>discoverability</em>: </p>
<ul>
<li>given an application endpoint, it should be easy to find the corresponding integration tests within the <code>tests</code> folder;</li>
<li>when writing a test, it should be easy to find the relevant test helper functions.</li>
</ul>
<p>We will focus on folder structure, but that  is definitely not the only tool available when it comes to test discovery.<br>
Test coverage tools can often tell you which tests triggered the execution of a certain line of application code.<br>
You can rely on techniques such as <a href="https://ferrous-systems.com/blog/coverage-marks/">coverage marks</a> to create an obvious link between test and application code.</p>
<p>As always, a multi-pronged approach is likely to give you the best results as the complexity of your test suite increases.</p>

<p>Before we start moving things around, let's nail down a few facts about integration testing in Rust.<br>
The <code>tests</code> folder is somewhat special - <code>cargo</code> knows to look into it searching for integration tests.</p>
<p>Each file within the <code>tests</code> folder gets compiled as its own crate.<br>
We can check this out by running <code>cargo build --tests</code> and then looking under <code>target/debug/deps</code>:</p>
<pre><code><span># Build test code, without running tests 
</span><span>cargo</span><span> build</span><span> --tests
</span><span># Find all files with a name starting with `health_check` 
</span><span>ls</span><span> target/debug/deps | </span><span>grep</span><span> health_check
</span></code></pre><pre><code><span>health_check-fc23645bf877da35
health_check-fc23645bf877da35.d
</span></code></pre>
<p>The trailing hashes will likely be different on your machine, but there should be two entries starting with <code>health_check-*</code>.<br>
What happens if you try to run it? </p>
<pre><code><span>./target/debug/deps/health_check-fc23645bf877da35
</span></code></pre><pre><code><span>running</span><span> 4 tests
</span><span>test</span><span> health_check_works ... ok
</span><span>test</span><span> subscribe_returns_a_400_when_fields_are_present_but_invalid ... ok
</span><span>test</span><span> subscribe_returns_a_400_when_data_is_missing ... ok
</span><span>test</span><span> subscribe_returns_a_200_for_valid_form_data ... ok

</span><span>test</span><span> result: ok. 4 passed; </span><span>finished</span><span> in 0.44s
</span></code></pre>
<p>That's right, it runs our integration tests!<br>
If we had five <code>*.rs</code> files under <code>tests</code>, we'd find five executables in <code>target/debug/deps</code>.</p>

<p>If each integration test file is its own executable, how do we share test helpers functions?</p>
<p>The first option is to define a stand-alone module - e.g. <code>tests/helpers/mod.rs</code><sup><a href="#test-common-folder">1</a></sup>.<br>
You can add common functions in <code>mod.rs</code> (or define other sub-modules in there) and then refer to <code>helpers</code> in your test file (e.g. <code>tests/health_check.rs</code>) with:</p>
<pre><code><span>//! tests/health_check.rs
// [...]
</span><span>mod </span><span>helpers;

</span><span>// [...]
</span></code></pre>
<p><code>helpers</code> is bundled in the <code>health_check</code> test executable as a sub-module and we get access to the functions it exposes in our test cases.<br>
This approach works fairly well to start out, but it leads to annoying <code>function is never used</code> warnings down the line.<br>
The issue is that <code>helpers</code> is bundled as a sub-module, it is not invoked as a third-party crate: <code>cargo</code> compiles each test executable in isolation and warns us if, for a specific test file, one or more public functions in <code>helpers</code> have never been invoked. This is bound to happen as your test suite grows - not all test files will use <em>all</em> your helper methods.</p>
<p>The second option takes full advantage of that each file under <code>tests</code> is its own executable - we can create sub-modules <em>scoped to a single test executable</em>!<br>
Let's create an <code>api</code> folder under <code>tests</code>, with a single <code>main.rs</code> file inside:</p>
<pre><code><span>tests/
  api/
    main.rs
  health_check.rs
</span></code></pre>
<p>First, we gain clarity: we are structuring <code>api</code> in the very same way we would structure a binary crate. Less magic - it builds on the same knowledge of the module system you built while working on application code.<br>
If you run <code>cargo build --tests</code> you should be able to spot</p>
<pre><code><span>Running</span><span> target/debug/deps/api-0a1bfb817843fdcf

</span><span>running</span><span> 0 tests

</span><span>test</span><span> result: ok. 0 passed; </span><span>finished</span><span> in 0.00s
</span></code></pre>
<p>in the output - <code>cargo</code> compiled <code>api</code> as a test executable, looking for tests cases.<br>
There is no need to define a <code>main</code> function in <code>main.rs</code> - the Rust test framework adds one for us behind the scenes<sup><a href="#custom-test-framework">2</a></sup>.</p>
<p>We can now add sub-modules in <code>main.rs</code>:</p>
<pre><code><span>//! tests/api/main.rs

</span><span>mod </span><span>helpers;
</span><span>mod </span><span>health_check;
</span><span>mod </span><span>subscriptions;
</span></code></pre>
<p>Add three empty files - <code>tests/api/helpers.rs</code>, <code>tests/api/health_check.rs</code> and <code>tests/api/subscriptions.rs</code>.<br>
Time to delete <code>tests/health_check.rs</code> and re-distribute its content:</p>
<pre><code><span>//! tests/api/helpers.rs
</span><span>use </span><span>sqlx::{Connection, Executor, PgConnection, PgPool};
</span><span>use </span><span>std::net::TcpListener;
</span><span>use </span><span>uuid::Uuid;
</span><span>use </span><span>zero2prod::configuration::{get_configuration, DatabaseSettings};
</span><span>use </span><span>zero2prod::e‚Ä¶</span></code></pre></article></section></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/">https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/</a></em></p>]]>
            </description>
            <link>https://www.lpalmieri.com/posts/skeleton-and-principles-for-a-maintainable-test-suite/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26198173</guid>
            <pubDate>Fri, 19 Feb 2021 21:20:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Stompenberg FX: Testing guitar effects pedal remotely]]>
            </title>
            <description>
<![CDATA[
Score 13 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26197848">thread link</a>) | @xavieralexandre
<br/>
February 19, 2021 | https://www.thomann.de/blog/en/stompenberg-effects/ | <a href="https://web.archive.org/web/*/https://www.thomann.de/blog/en/stompenberg-effects/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><h3>The idea</h3><p><strong>Stompenberg.</strong> Sounds like a brand of Swedish outdoor clothing, but also like a villain in the next James Bond film ‚Äì but in this case it‚Äôs actually a mash-up of two things. Stompenberg is the hybrid of <strong>‚Äústomp boxes‚Äù</strong> and <strong>‚ÄúHeisenberg‚Äù,</strong> which made the impossible possible after a long time of <strong>screwing</strong> and <strong>soldering.</strong>&nbsp;It‚Äôs a Thomann <strong>online app</strong> that allows musicians to<strong> test out real effect pedals</strong> with their own equipment, either <strong>from home</strong> or <strong>on the go</strong>. Below you will get a brief idea of the concept, development and implementation and of what <strong>Stompenberg</strong>&nbsp;is capable of‚Ä¶ üí•üé∂</p><hr><h3>Growing pains</h3><h4><strong>Planning&nbsp;</strong></h4><p>The <a href="https://www.thomann.de/gb/stompenberg_devices.html" target="_blank" rel="noopener noreferrer"><strong>selected pedals</strong></a> travel to the<strong> Thomann partner laboratory</strong> in <strong>Erlangen, Germany</strong> where they undergo some <strong>operations</strong> and <b>transformations&nbsp;</b>by our men in white with the <strong>license to solder.</strong></p><p>The following happens: A pedal is first deprived of its <strong>shell</strong>, <strong>pots</strong> and <strong>switches.</strong> The pots are measured to see what they do (whether they are <strong>linear, logarithmic,</strong> etc.) and replaced with <strong>digital pots</strong> and <strong>switches.</strong></p><p>Then, for reasons of shielding, the original <strong>housing</strong> is put back on. Everything is recognisable as a pedal again, but now, instead of pots and switches, <strong>ribbon cables</strong> hang from the orphaned holes.</p><h4><strong>The construction</strong></h4><p>This ever-growing Frankenstein is mounted on a <strong>rack drawer,</strong> which houses not only the <strong>power supply</strong> but also a <strong>mini-computer</strong> specially developed for this purpose, per pedal.</p><p><strong>Ribbon cable</strong> runs to the computer, audio cable into the pedal, everything is beautifully adjusted and balanced and then off to the rack!</p><p><img src="https://www.thomann.de/blog/wp-content/uploads/2018/12/1-1-300x200.jpg"></p><p><img src="https://www.thomann.de/blog/wp-content/uploads/2018/12/2-1-300x200.jpg"></p><p><img src="https://www.thomann.de/blog/wp-content/uploads/2018/12/4-300x200.jpg"></p><p><img src="https://www.thomann.de/blog/wp-content/uploads/2018/12/3-1-300x200.jpg"></p><hr><h3>Connection to the shop</h3><h4><strong>The longest guitar cable in the world‚Ä¶</strong></h4><p>‚Ä¶ is available from <strong>Thomann</strong> in the <strong>shop,</strong> but not from <strong><a href="https://www.thomann.de/gb/stompenberg_devices.html">Stompenberg</a>.</strong> From now on the <strong>soldering iron</strong> gets put away and is replaced by a <strong>PC</strong> and <strong>keyboard</strong> in Thomann‚Äôs Treppendorf. This is where our <strong>developers</strong> and <strong>designers</strong> sit, brooding over the visualization of the pedals and the interface that allows the pedals to be operated from anywhere in the world. From the logo to the controls to each button, everything comes from Thomann‚Äôs teamwork.</p><p>When you turn the <strong>virtual knob</strong> at home, the <strong>digital knob</strong> on the pedal in the Thomann lab is adjusted via this interface, while your sound runs through exactly this pedal and comes back to you with effect. There are<strong> 3</strong> <strong>modes</strong> and a lot of <strong>UI tricks</strong> to discover.</p><p><img src="https://www.thomann.de/blog/wp-content/uploads/2018/12/lava-150x150.jpg" width="275">&nbsp; <img src="https://www.thomann.de/blog/wp-content/uploads/2018/12/6-1024x682.jpg" width="412"></p><hr><h2><strong>The Interface</strong></h2><h4><strong>The effect device</strong></h4><p>Design and development flow together here with loving attention to detail: Every <strong>knob</strong> can be rotated, every <strong>footswitch</strong> can be stepped on and every <strong>lever</strong> is slidable. This replica <strong>behaves exactly like the real pedal</strong> in the lab, right down to the smallest <strong>LED,</strong> and can therefore be operated in exactly the same way.</p><h4><strong>The three modes: PLAY, REC &amp; LIVE</strong></h4><p><strong>PLAY:</strong> You feed <strong>pre-recorded samples</strong> or specially <strong>uploaded sounds</strong> through the pedals and operate the controls with <strong>both hands</strong> (if using a <strong>touchscreen)</strong> while the sound loops through the effect pedal.</p><p><strong>REC:</strong> If you want to go a step beyond, you can <strong>record your own riffs</strong> and loop them through the pedal of your choice!</p><p><strong>LIVE:</strong> The ultimate experience ‚Äì here you <strong>play live</strong> and get the result back directly from the Thomann lab. So you can try out the pedal, live, from the comfort of your bedroom, with just a small <strong>latency,</strong> but that‚Äôs not bad considering the signal travels virtually at the speed of light&nbsp;through the<strong> whole of Germany or even the whole of Europe.&nbsp;</strong></p><p>The bright side: Even if your pedal is busy and you end up in the waiting queue, you don‚Äôt have to listen to the dude in front of you butchering a cover of Stairway To Heaven üòâ</p><h4><strong>And the rest of my equipment?</strong></h4><p>If you want to know exactly how the distortion in front of your own amp is done, you might need a <strong>reamping box.</strong> But under certain circumstances the line output of the interface does the trick too, just turned down low. The result reads like a poem:</p><p>You play your own guitar</p><p>through a real pedal (which is somewhere else)</p><p>through your amp</p><p>through your cabinet or speakers</p><p>at the volume you want</p><p>and you can turn, shift and control all the knobs as you like.</p><p>‚Ä¶ and get a pretty accurate picture if this pedal will be your new one or if you prefer another one (which you tested with Stompenberg). No need to drive to Treppendorf, to send cardboard boxes back to Thomann halfway around the world, or to listen to annoying comments from the people waiting in line.</p><p><img loading="lazy" src="https://www.thomann.de/blog/wp-content/uploads/2018/12/8-1.jpg" alt="" width="1400" height="626" srcset="https://www.thomann.de/blog/wp-content/uploads/2018/12/8-1.jpg 1400w, https://www.thomann.de/blog/wp-content/uploads/2018/12/8-1-565x253.jpg 565w, https://www.thomann.de/blog/wp-content/uploads/2018/12/8-1-300x134.jpg 300w, https://www.thomann.de/blog/wp-content/uploads/2018/12/8-1-768x343.jpg 768w, https://www.thomann.de/blog/wp-content/uploads/2018/12/8-1-1024x458.jpg 1024w, https://www.thomann.de/blog/wp-content/uploads/2018/12/8-1-215x96.jpg 215w" sizes="(max-width: 1400px) 100vw, 1400px"></p><hr><h3><strong>The Future</strong></h3><p>The conversion is in full swing and while <strong>Stompenberg</strong> is running, our partners in <strong>Erlangen</strong> are taking more pedals apart every day to make them digitally accessible. There is plenty of room for <strong>growth</strong> ‚Äì ultimately, your <strong>demand</strong> determines the <strong>supply</strong> of pedals. So let‚Äôs go, the smiles of satisfied guitarists are what keep us motivated!</p><p>Your Thomann R&amp;D Team</p><hr><h2><a href="https://www.thomann.de/gb/stompenberg_devices.html" target="_blank" rel="noopener noreferrer">Get stompin‚Äô at Stompenberg now</a>!</h2><p>Our<strong> YouTube</strong> host <strong>Felix Fleer</strong> took a closer look at Stompberg. Enjoy the <strong>video</strong> and try out the tool yourself!</p><p><span><iframe width="640" height="360" src="https://www.youtube-nocookie.com/embed/1lBYRQUTzYk?version=3&amp;rel=1&amp;showsearch=0&amp;showinfo=1&amp;iv_load_policy=1&amp;fs=1&amp;hl=en-GB&amp;autohide=2&amp;wmode=transparent" allowfullscreen="true" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation"></iframe></span></p><div><p><img alt="Author‚Äôs gravatar" src="https://secure.gravatar.com/avatar/c9e90005014b2194675c8a066705c293?s=90&amp;d=blank&amp;r=g" srcset="https://secure.gravatar.com/avatar/c9e90005014b2194675c8a066705c293?s=180&amp;d=blank&amp;r=g 2x" height="90" width="90" loading="lazy"></p><p> Joe has been singing since he can remember and started playing guitar when he was 10. He's been using it as a songwriting tool ever since. He is passionate about melody and harmony and admires musicians who create these in unique ways. Check out his alternative / indie projects Best of Feelings and Zef Raƒçek.</p></div></div></div>]]>
            </description>
            <link>https://www.thomann.de/blog/en/stompenberg-effects/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26197848</guid>
            <pubDate>Fri, 19 Feb 2021 20:46:45 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[It's Not an Attention Economy. It's Attention Stewardship]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=26197135">thread link</a>) | @chrbutler
<br/>
February 19, 2021 | https://www.chrbutler.com/attention-stewardship | <a href="https://web.archive.org/web/*/https://www.chrbutler.com/attention-stewardship">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
<br>

<h6>‚Üê <a href="https://www.chrbutler.com/essays">See All Articles</a></h6>
        
<p>
Some people saw the thrashing idscape in which we tribulate coming from a long way off. And they called it ‚Äúthe attention economy.‚Äù
</p>
<p>
A recent <a href="https://www.nytimes.com/2021/02/04/opinion/michael-goldhaber-internet.html" target="_blank">New York Times opinion column by Charlie Warzel</a> reminded me that as easy as it has been to trace some of the more dangerous effects of the attention economy to events of the last decade, some people could tell where things were headed long, long before that. One of them was Michael Goldhaber, a theoretical physicist and, as Warzel grandly introduces him, ‚Äúthe internet prophet you‚Äôve never heard of.‚Äù Well, he had me at <i>internet</i>. And <i>prophet</i>. And <i>never heard of</i>.
</p>
<p>
Goldhaber has been writing about the attention economy for decades. In fact, back in 1997, he wrote an <a href="https://www.wired.com/1997/12/es-attention/" target="_blank">essay for <span>WIRED</span></a> about how the transactions of our dollars-and-cents economy would not only begin to include exchanges of attention, but would eventually be replaced entirely by them. For a population just getting to know the internet, the idea that attention would matter more than money was preposterous. For us who now know it well, it‚Äôs remarkably on-point.
</p>
<p>
Looking back, it‚Äôs fascinating ‚Äî and more than a little bit concerning ‚Äî to note that Goldhaber‚Äôs own pessimism was far more accurate than his optimism. He earnestly predicted that attention would replace money because ‚Äúattention can‚Äôt be bought.‚Äù Well, it turns out that it very much can. And as utopic as a moneyless future sounds, a future in which attention replaces money as our currency seems obviously worse when you consider what Goldhaber got <i>right</i>. He warned that the pressure individuals would feel to both attract and give attention would metastasize into a wide-spreading erosion of culture. Goldhaber believed that simple human psychology predicted this. He wrote, ‚ÄúOur abilities to pay attention are limited. Not so our abilities to receive it. The value of true modesty or humility is hard to sustain in an attention economy.‚Äù In a recent conversation in preparation for Charlie Warzel‚Äôs op-ed, Goldhaber echoed the same point: ‚ÄúWhen you have attention, you have power, and some people will try and succeed in getting huge amounts of attention, and they would not use it in equal or positive ways.‚Äù
</p>
<p>
We‚Äôve all lived and suffered that truth, especially acutely over the last few years, haven‚Äôt we? Warzel sums it up this way, ‚ÄúAttention is a bit like the air we breathe. And it feels as if our attention has become polluted.‚Äù
</p>
<p>
Warzel connects Goldhaber‚Äôs early warnings to their latest effects, including the attempted insurrection on January 6th. The mob may have been after many different things, but the one thing every participant seems to have had in common was a desire for attention. The event itself, he writes, was ‚Äúthe result of thousands of influencers and news outlets that, in an attempt to gain fortune and fame and attention, trotted out increasingly dangerous conspiracy theories on platforms optimized to amplify outrage.‚Äù Implied here is something I‚Äôd been observing as an increasingly rapid contagion of anti-truth since the day Donald Trump descended his escalator to declare his intention to destroy the country: that conspiracies and accusations of conspiracy are <i>products</i>, not byproducts of the attention economy. They‚Äôre not something to believe in, but merely material to exchange for attention. In an inversion of assumptions about meaning, it‚Äôs no longer relevant whether a person <i>believes</i> what they are saying as long as it is understood <i>why</i> they are saying it. Lies can be quite expedient.
</p>
<p>
That the attention economy is oversupplied with bile and bullshit is a compound problem. It‚Äôs obvious that the effects of peddling and buying lies can be profound. People can lose their grips on reality. Systems upon which many rely can fall apart. The equity of hundreds of years of history can dry up in a moment. These are the agonies of our public reckoning with how technology, truth, and treason have mixed and mingled in recent years. But we may get past this very shared and public struggle with truth and technology and still suffer the erosion of culture that Goldhaber warned about. Culture, after all, is bigger than political partisanship, bigger than sovereign nations, bigger than infrastructure, bigger than multinational corporations. Culture is a tapestry of ideas, beliefs, and agreements. And as powerful as any idea or belief or agreement may be, each relies upon attention.
</p>
<p>
Goldhaber also wrote, ‚ÄúWhen you pay attention to one thing, you ignore something else.‚Äù That is such a simple statement, but it‚Äôs no less profound. It explains why thousands of articles go unread as you read this one ‚Äî simple, indeed ‚Äî but also why the aggregate of billions of equally simple exchanges of attention lead to the grand murmurations of culture.
</p>
<p>
If attention is an economy, then, in theory, it should follow a simple law of supply and demand just like any other economic system. In other words, the value and supply of attention should settle at a point where the there‚Äôs enough attention to meet demand. The problem is that while such a balance can be expected of bars of gold or even shares of a videogame retailer‚Äôs stock, attention works by its own rules that upend the law of supply and demand. There will never be enough attention to meet demand.
</p>
<p>
Goldhaber puts it this way:
</p>
<blockquote>
‚ÄúThe attention economy is a zero-sum game. What one person gets, someone else is denied. The size of the attention pie can grow as more and more people join the world audience, but the size of the average slice can‚Äôt. Real attention to you, meaning minds focusing on you, is always limited by the number of minds there are. The more minds, the more attention - but also the more who might want attention. The total available attention per capita (per mind) is simply not going to change.‚Äù
</blockquote>
<p>
These very words that I have written and that you are now reading provide a good example of what Goldhaber is talking about. You‚Äôre reading this. That‚Äôs good for me. But that also means there are billions of things you‚Äôre <i>not</i> reading. That‚Äôs not good for the people who wrote them and whatever attention they hoped to get from you. Meanwhile, every moment that you spend paying attention to me is not only a moment you‚Äôre not paying attention to someone else, it‚Äôs a moment you‚Äôre not spending doing something that could get you attention. That‚Äôs where the law of supply and demand breaks down. Attention can‚Äôt be stored up or mass produced; it‚Äôs an inherently temporal matter. The more attention we pay, the less we can get.
</p>
<p>
But what if you don‚Äôt care about getting attention? This is a question that should be asked. It‚Äôs easy enough to say that the internet, and specifically things like social media, have trained us to desire and seek attention more and more rapidly than we did before. I‚Äôm willing to accept that as true. But I don‚Äôt think we can say that every one of us has been affected in the same way, or that the desire for attention has increased equally across all of humanity, or that the form attention takes and the means by which we seek it is a singular thing. Of course it is not. Though there are people willing to do all kinds of things simply for attention, not all of us go to such lengths. But even so, we do seek attention and we do pay it out. Our transactions may be much more mundane than a streamed coup, but they exist nonetheless and they are a finite resource.
</p>
<p>
That makes me wonder whether, through the frame of the attention economy, we are seeing its mechanics all wrong.
</p>
<p>
In the zero-sum attention game, the reader, you, gives the writer, me, your attention. You only get what I have written, for as long as you‚Äôre reading it. But by these terms, I stand to get ‚Äúmore.‚Äù There could be thousands of you reading this at the same time. Though I can‚Äôt store your attention on the shelf, I can still get more than I pay out. If I‚Äôm a good writer, I ‚Äúwin‚Äù the game. Is that really the best way to think of this? After all, surely you stand to gain something, too. In the zero sum attention game, I am the beneficiary of your attention. But what if we chose to reverse that? What if we chose to see the beneficiary of the attention economy not as the recipient, but as the one paying attention?
</p>
<p>
Perhaps, then, we might think differently about information. We might begin to care more about its <i>value</i> than its volume.
</p>
<p>
<a href="https://en.wikipedia.org/wiki/Ren%C3%A9_Girard" target="_blank">Ren√© Girard</a> was a widely influential thinker who certainly would have agreed. Girard is probably most famous for his thinking about the nature of human desire. He proposed that it‚Äôs not a singular phenomenon, but an aggregate effect. His <i>mimetic theory</i> suggests that what you and I want is not original, but derives from what others want ‚Äî that desire is an imitation. <i>Mimesis</i> is mimicry.
</p>
<p>
Naturally, this is a fiercely debated point. Even right now, you may be thinking of half a dozen things that you‚Äôve chosen for your own reasons, perhaps even at the resistance of others. That something as obviously personal as desire is really just the imitation of someone else‚Äôs desire seems, on its face, to be absurd. Is your favorite breakfast cereal really the end of an infinite regress of desires, and if so, originating with whom? That I can‚Äôt answer. Perhaps there‚Äôs a Girard scholar out there who can.
</p>
<p>
But the more interesting thing about Girard‚Äôs theories is the broader idea that, as this <a href="https://www.reddit.com/r/ThePortal/comments/cfmtq2/peter_thiel_during_the_portal_about_the_book/euiv3op/?utm_source=share&amp;utm_medium=web2x" target="_blank">incredibly robust Reddit explanation</a> puts it, ‚Äúsecrets may exist in far more abundance than we realize <span>AND</span> YET‚Ä¶There are reasons we don‚Äôt see them. And those reasons involve the details, mechanics and implications of Girard‚Äôs theories. How we focus our desire and our attention is less under our control than we realize.‚Äù
</p>
<p>
Regardless of the question of origin in Girard‚Äôs theory of desire, the mechanics of how desire and attention work together to influence people are obvious. This is why fortunes can be created within hours of a photograph of a celebrity wearing something interesting being published online. ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.chrbutler.com/attention-stewardship">https://www.chrbutler.com/attention-stewardship</a></em></p>]]>
            </description>
            <link>https://www.chrbutler.com/attention-stewardship</link>
            <guid isPermaLink="false">hacker-news-small-sites-26197135</guid>
            <pubDate>Fri, 19 Feb 2021 19:41:20 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[NFT/crypto art is exploding ‚Äì so here come the tech moguls to screw it up]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 1 (<a href="https://news.ycombinator.com/item?id=26196589">thread link</a>) | @smalera
<br/>
February 19, 2021 | https://www.businessofbusiness.com/articles/crypto-art-nft-beeple-christies-auction-token-ethereum-dada-blockchain/ | <a href="https://web.archive.org/web/*/https://www.businessofbusiness.com/articles/crypto-art-nft-beeple-christies-auction-token-ethereum-dada-blockchain/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main-section">
    <!-- .sidebar -->

    <section>
      
      

      <p>Next week the venerable British auction house Christie‚Äôs will set a precedent: It‚Äôs conducting the first ever auction of a digital artwork. And just to spice things up, there‚Äôs a crypto component to it all.&nbsp;</p>
<p><span>The groundbreaking Christie‚Äôs auction will feature the work of an artist calling himself </span><a href="https://www.beeple-crap.com/"><span>Beeple</span></a><span>. The artwork being sold is a massive digital collage of five thousand pieces of work Beeple has released on the internet daily over 5,000 days.&nbsp;</span></p>
<p><span>That art is delivered in the form of a plain old JPG, of the sort that you might encounter on any website. The crypto twist is that a unique digital token on the Ethereum blockchain (</span><a href="https://etherscan.io/address/0x2a46f2ffd99e19a89476e2f62270e0a35bbf0756#code"><span>you can see the code here</span></a><span>) was ‚Äúminted‚Äù&nbsp;by the artist, connecting it to the JPG file. To be precise, a </span><a href="https://simple.wikipedia.org/wiki/Cryptographic_hash_function"><span>cryptographic hash</span></a><span> of the image is embedded in a smart contract on the Ethereum blockchain. It‚Äôs sort of like painters of yore signing a canvas, except this takes place cryptographically, and on a blockchain. These are called non-fungible tokens, or NFTs.&nbsp;</span></p>
<p><span>The Christie‚Äôs auction is eagerly awaited. The auction house had earlier dabbled in crypto art with the October 2020 sale of a physical installation linked to an NFT called ‚ÄúBlock 21‚Äù. That piece </span><a href="https://www.nbcnews.com/tech/tech-news/how-blockchain-technology-reached-christie-s-changed-art-world-along-n1244951"><span>fetched $130,000</span></a><span> or almost 11 times its low estimate. &nbsp;</span></p>
<p><span>But the upcoming Beeple auction could bring in much more. Beeple </span><a href="https://unchainedpodcast.com/beeple-on-how-and-why-he-raked-in-3-5-million/"><span>earlier sold $3.5 million worth</span></a><span> of digital tokens in a single weekend in December, a landmark amount in the burgeoning field of crypto art. These sales happened on crypto focused marketplaces, so the Christie‚Äôs event is expected to expose the artist to a whole new crowd, as </span><a href="https://www.artnews.com/art-news/market/christies-beeple-blockchain-art-sale-1234583847/"><span>Art News has reported</span></a><span>.&nbsp;</span></p>
<p>Indeed, Christie‚Äôs alludes to this in its prospectus accompanying the auction. The earlier sales make putting a price estimate on the upcoming event ‚Äúimpossible to predict,‚Äù the auction-house says. ‚ÄúYour guess is as good as ours,‚Äù said Noah Davis, the Christie‚Äôs specialist overseeing the sale, in the prospectus. &nbsp;</p>
<h2>Here Come the Tech Moguls</h2>
<p><span>Christie‚Äôs isn‚Äôt alone in recognizing the potential ‚Äî&nbsp;and chasing the returns ‚Äî&nbsp;on crypto collectibles. Tech moguls appear to be enthusiastic about the trend. Mark Cuban kicked it all off at the end of January when he wrote a blog post praising ‚Äúthe store of value generation,‚Äù&nbsp;</span><span>a new cohort of people who understood that digital objects on a blockchain could hold their value just as well as a fine art painting, vintage car or rare baseball collection.&nbsp;</span></p>
<p><span>‚ÄúThis generation knows that a smart contract and the digital good it reflects ‚Ä¶ are a better investment than old school see, touch or feel uses,‚Äù the </span><a href="https://blogmaverick.com/2021/01/31/the-store-of-value-generation-is-kicking-your-ass-and-you-dont-even-know-it/'"><span>Shark Tank star wrote</span></a><span>.</span></p>
<p><span>Cuban‚Äôs fellow tech elites have followed his lead. The billionaire Chamath Palihapitiya </span><span>told Bloomberg</span><span> a few days ago that he has been building a ‚Äúfairly sizeable‚Äù collection of digital art and other NFTs. ‚ÄúThese may sound crazy to some, but I do think that that‚Äôs the next frontier of digital currency and digital assets,‚Äù he said. Palihapitiya is a long-time Bitcoin bull, and rumored sightings of the crypto whale had trickled through the Ether for weeks. ‚Äú</span><span>Is that you, @Chamath?</span><span>‚Äù became a punch-line in NFT circles.&nbsp;</span></p>
<p><span>Yesterday, the wine entrepreneur turned tech investor Gary Vaynerchuk </span><a href="https://twitter.com/CNBCFastMoney/status/1362192935937323011?s=20"><span>took to CNBC</span></a><span> to extol the virtues of NFTs and other alternative investments, including trading cards. He had been steadily increasing mentions of crypto tokens on his Twitter feed, where he talks to 2.2 million followers, over the last week (he also started following me, for some reason!). Here he is </span><a href="https://twitter.com/garyvee/status/1361886864538562568?s=20"><span>on Wednesday</span></a><span>: ‚ÄúMy current situation - I‚Äôm trying to trade cases of Chateau D'Yquem for #NFT. 2021 life, lol‚Äù</span></p>
<p><span>The tech millionaires and Christie‚Äôs are on to something. According to the </span><a href="https://cryptoart.io/data"><span>data site CryptoArt.io</span></a><span>, the value of all crypto art that changed hands in January was nearly $12 million. Twelve months ago, that figure stood at $160,000, representing growth of over 100 times over 12 months. February‚Äôs volumes have already topped January‚Äôs, and we‚Äôre only 18 days in.&nbsp;</span></p>
<p><span>A report from data site NonFungible.com and L‚ÄôAtelier, a unit of the French bank BNP Paribas </span><a href="https://nonfungible.com/blog/nft-yearly-report-2020"><span>released this week</span></a><span> says that crypto art now represents 24% of the entire NFT marketplace by value, accounting for the biggest ticket sales. The art segment lags only NFTs associated with ‚Äúmetaverses‚Äù or virtual worlds where users can buy pieces of land, outfits and other items that are secured by a blockchain.&nbsp;</span></p>
<h2><span>The dark side of crypto art</span></h2>
<p><span>As investors pile in to crypto art, and artists make millions from their sale, surely the utopian vision of a blockchain cutting out intermediaries and rewarding creators has been realized? Maybe not, as it turns out.&nbsp;</span></p>
<p><span>Beatriz Helena Ramos is the founder of a pioneering crypto art platform called </span><a href="https://dada.art/"><span>Dada</span></a><span>. An artist herself, she has worked on everything from editorial illustrations for the New York Times to animations for Disney and MTV. To hear Ramos tell it, the surging crypto art market has become successful‚Äîat the wrong thing.&nbsp;</span></p>
<p>‚ÄúWhat‚Äôs happening in the space is that the technology is very innovative, yet all of the social layer and the economic layer is just a repetition of everything from the legacy, default, world,‚Äù she says. ‚ÄúWhat we see with NFTs is that it‚Äôs producing the exact same outcomes that we were trying to disrupt.‚Äù</p>
<p>What are those outcomes, exactly? Ramos says the market remains tilted in favor of investors, and the vast majority of artists aren‚Äôt going to sell their work for millions the way Beeple has. Instead, they will toil in the long tail of art, replicating the star system of the current art market.&nbsp;</p>
<p><span>A </span><a href="https://powerdada.medium.com/the-inconvenient-truth-about-secondary-markets-886d5c929efa"><span>study by Massimo Franceschet</span></a><span>, a computer scientist at the University of Udine, on the largest crypto art platform Superrare shows that the crypto art market has more wealth disparity among artists than any country in the history of the world. Some 80% of sales go to the top 25% of artists. While artists on Superrare at present earn the lion‚Äôs share of sales volume, but as artworks get resold on secondary markets, Franceschet expects collectors to start earning more than artists by next June.&nbsp;</span></p>
<p><span>Ramos says she sees the human side of these statistics often. ‚ÄúWe see the casualties coming to us all the time. Tons of people who leave the space because they never sold anything, because they have to shill, because collectors actually harass artists on these chats and Discord channels. We‚Äôve heard some horror stories, and there‚Äôs no accountability for anything,‚Äù she says.&nbsp;</span></p>
<p>While blockchains hold out the possibility of tokenizing anything, they also quickly run into the limits of this reductive logic. As Ramos says, turning everything into a market leads to ‚Äúperverse‚Äù incentives, like an artists‚Äôs work rising after her death, ensuring the supply of work is limited. ‚ÄúMarkets can‚Äôt account for anything that isn‚Äôt quantitative,‚Äù she tells me. &nbsp;</p>
<p>Still, the lure of a blockchain‚Äôs ability to shift paradigms holds Ramos in its sway. She and a community of artists and technologists at Dada are working on a system that they believe will create fairer outcomes for artists and participants. They are focused on the social implications, and how the system might be governed.&nbsp;</p>
<p>‚ÄúYou can have huge networks with network effects, coordinating people with each other and creating things. You don‚Äôt need structures like companies and things like that,‚Äù she says. <span>‚Äú</span>Imagine the quality and broad value that can be created. All you have to do is coordinate them. And so blockchain comes again.‚Äù</p>
      

      

      



    </section><!-- .article-body -->

    
  </div></div>]]>
            </description>
            <link>https://www.businessofbusiness.com/articles/crypto-art-nft-beeple-christies-auction-token-ethereum-dada-blockchain/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26196589</guid>
            <pubDate>Fri, 19 Feb 2021 18:58:33 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Koo, India‚Äôs free-speech Twitter alternative]]>
            </title>
            <description>
<![CDATA[
Score 97 | Comments 168 (<a href="https://news.ycombinator.com/item?id=26196588">thread link</a>) | @donohoe
<br/>
February 19, 2021 | https://restofworld.org/2021/how-koo-became-a-right-wing-darling-in-india/ | <a href="https://web.archive.org/web/*/https://restofworld.org/2021/how-koo-became-a-right-wing-darling-in-india/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>

			<!-- Article Start -->
			
<p>It hasn‚Äôt been a quiet few weeks on Twitter in India. The country‚Äôs capital city has seen over four months of protest after Prime Minister Narendra Modi‚Äôs government enacted agricultural laws that would adversely affect farmers across India. <a href="https://www.bbc.com/news/world-asia-india-55899754">The farmer protests</a>, as the movement has come to be known, has taken to social media platforms like Twitter and Facebook to make the cause heard globally ‚Äî and it‚Äôs worked. Earlier this month, celebrities like <a href="https://www.dw.com/en/greta-thunberg-under-fire-for-tweeting-about-indian-farmers-toolkit/a-56458306">Greta Thunberg</a> and <a href="https://www.bbc.com/news/world-asia-india-55931894">Rihanna</a> weighed in with their tweets of support. Backlash <a href="https://www.bbc.com/news/world-asia-india-55931894">soon followed</a>.&nbsp;</p>



<p>But the government‚Äôs ire against global critics of Modi‚Äôs Hindu nationalist party has turned to Twitter itself. Citing threats to public order, on February 1, Indian authorities <a href="https://www.buzzfeednews.com/article/pranavdixit/indian-government-block-critics">appeared to have requested Twitter to suspend or remove</a> dozens of accounts on its platform. Twitter briefly complied but, after public outcry, reinstated the accounts and then <a href="https://www.cjr.org/the_media_today/twitter-stands-up-to-india-and-refuses-to-block-journalists.php">refused to remove</a> hundreds more.</p>



<p>It‚Äôs in the middle of this battle that Aprameya Radhakrishna‚Äôs 10-month-old social media platform was thrust into the spotlight. Soft-spoken and studious, Radhakrishna is a serial entrepreneur: in 2015, <a href="https://economictimes.indiatimes.com/magazines/panache/taxiforsure-founder-aprameya-radhakrishnas-life-after-sell-off/articleshow/48078627.cms">he sold his first company</a>, a ride-sharing app called TaxiForSure, to local giant Ola for $200 million. His latest venture is an app called Koo, <a href="https://www.kooapp.com/">a microblogging platform similar to Twitter</a> but for local-language speakers in India, a country with more than 20 languages and over 700 dialects.&nbsp;</p>



<p>After weeks of battling with Twitter, some of India‚Äôs most prominent Hindu nationalist politicians took to their social accounts and instructed their followers to leave Western social networks for Koo, a local, free-speech platform. ‚ÄúI am now on Koo,‚Äù <a href="https://twitter.com/PiyushGoyal/status/1359058583934013442">tweeted</a> India‚Äôs minister of commerce and industry, Piyush Goyal. ‚ÄúConnect with me on this Indian micro-blogging platform for real-time, exciting and exclusive updates.‚Äù Many of his <a href="https://twitter.com/PiyushGoyal">9.6 million followers</a> obliged. More right-wing politicians <a href="https://twitter.com/rsprasad/status/1360067772571545606?s=20">followed suit</a>, as did some of <a href="https://twitter.com/KanganaTeam/status/1361421114220576768">Bollywood</a>‚Äôs biggest stars.&nbsp;</p>



<p>Overnight, the platform went from a relatively obscure app to <a href="https://timesofindia.indiatimes.com/business/india-business/koo-lines-up-indian-investors-as-popularity-surges/articleshow/80867206.cms">headline news</a> and bagged <a href="https://economictimes.indiatimes.com/tech/funding/microblogging-platform-koo-bags-4-1-million-in-funding/articleshow/80685024.cms">$4.1 million in series A funding</a>.&nbsp;</p>



<p>Radhakrishna and his platform are in a curious position. The founder insists he‚Äôs apolitical ‚Äî he‚Äôs appeared in both <a href="https://www.ndtv.com/video/news/news/koo-app-everything-you-need-to-know-about-koo-the-indian-alternative-to-twitter-575160">left-leaning</a> and <a href="https://www.opindia.com/2021/02/rahul-roushan-aprameya-radhakrishna-koo-co-founder-twitter-alternative-made-in-india-interview/">right-wing</a> outlets in the days since Koo has found the limelight ‚Äî but is happily embracing the sudden rush to his app: Koo crossed <a href="https://www.livemint.com/technology/apps/koo-sees-10-fold-increase-in-downloads-this-week-crosses-3-million-users-11613038170243.html">3 million users </a>this month, fueled in large part by Modi‚Äôs party.&nbsp;</p>



<p>And while it‚Äôs unclear whether Koo will follow in the path of other social platforms <a href="https://www.usatoday.com/story/tech/2020/11/11/parler-mewe-gab-social-media-trump-election-facebook-twitter/6232351002/">that espouse ‚Äúfree speech‚Äù ideology</a>, it‚Äôs likely more Indian apps like Radhakrishna‚Äôs will follow. Prominent among Modi‚Äôs mantras for his vision of India is <em>Atmanirbhar Bharat: </em>a self-sufficient India. That vision <a href="https://restofworld.org/2021/indias-hashtag-war/">extends to the internet and social media</a>.&nbsp;</p>



<p>Six months before prominent right-wing politicians began heralding his app as India‚Äôs Twitter, Radhakrishna and his team submitted Koo to a government <em>atmanirbhar </em>social media challenge, <a href="https://navbharattimes.indiatimes.com/business/business-news/koo-app-wins-pm-modi-aatm-nirbhar-app-innovation-challenge/articleshow/77432196.cms">and won</a>.</p>



<p>Radhakrishna spoke to <em>Rest Of World </em>over Google Meet from Bangalore. This conversation has been edited for length and clarity.</p>



<hr>



<h4><strong>Tell me a bit about how you came up with the idea for Koo.&nbsp;</strong></h4>



<p>We started building it in November 2019 and launched it in March 2020. The idea behind it was that Twitter is existing in English in India, but the language speakers of India are not on Twitter. Let‚Äôs build a deeper experience for the language speakers. And because we built a deeper experience for the language speakers, we were able to make a very localized community.&nbsp;</p>



<p>We started with Kannada, then we did Hindi, then Telugu, Marathi, then Tamil: we launched all of these languages. Then, we started noticing Twitter was getting into trouble in the U.S. We said, Maybe we should just have English as well as the local languages, if ever Twitter gets into trouble or users want a separate option.&nbsp;</p>


		<figure>
			<div>
				<p><img src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/IMG-20210218-WA0009-1-40x71.jpg" data-src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/IMG-20210218-WA0009-1-600x1066.jpg" data-srcset="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/IMG-20210218-WA0009-1-400x711.jpg 400w, https://restofworld.org/wp-content/uploads/2021/02/IMG-20210218-WA0009-1-600x1067.jpg 600w, " sizes="(max-width: 640px) 100vw, 300px" alt="Aprameya Radhakrishna, a serial entrepreneur sold his first company, a ride-sharing app called TaxiForSure, for $200 million.">
					
				</p>
			</div>
						<figcaption itemprop="caption description">
				
				<span itemprop="copyrightHolder">Aprameya Radhakrishna</span>
			</figcaption>
		</figure>


<h4><strong>When you started Koo, how soon were you approached by government officials who saw the </strong><a href="http://www.makeinindia.com/about"><strong>‚ÄúMake in India‚Äù</strong></a><strong> potential for the app?&nbsp;</strong></h4>



<p>We were a two-month-old app when we applied to the <a href="https://innovate.mygov.in/app-challenge/">[<em>Atmanibhar Bharat</em>]</a> challenge. We got into that challenge at the last minute, almost. Nobody approached us or anything. We applied just like any other startup ‚Äî there were something like 7,000 social media startups that applied. We won that challenge, so that put us into the limelight: Oh, there‚Äôs an alternative microblogging platform that promotes local language<em>.&nbsp;</em></p>



<h4><strong>Walk me through how the last two or three weeks have been for you. Did you know that Piyush Goyal and the Ministry of Electronics and Technology would be encouraging their followers on Twitter to move to Koo en masse?&nbsp;</strong></h4>



<p>No. It‚Äôs been totally surreal for us. It‚Äôs totally welcome at Koo. We as a company are benefiting from the love that users who are shifting [from Twitter] are showing us. We weren‚Äôt expecting it, but it‚Äôs a pleasant surprise. We‚Äôre happy this move is happening.&nbsp;</p>



<h4><strong>Were you prepared for the sudden influx of users on the back end?&nbsp;</strong></h4>



<p>Not at all. Scaling 10x suddenly, in a week, is a challenge for any company, especially a 10-month-old startup. But we‚Äôve come through it; we are able to scale faster.&nbsp;</p>



<h4><strong>What were the user numbers like? Can you tell me how quickly they grew after the events of this month?&nbsp;</strong></h4>



<p>We were very small, we were sub-100,000 DAU [daily active users]. Now we‚Äôre close to a million DAU. Close, not a million yet but close.&nbsp;</p>



<h4><strong>By virtue of chance, or deliberate action, there‚Äôs an ideological framework under which Koo has been positioned. You don‚Äôt seem bothered by the fact that Koo is heralded </strong><a href="https://www.bbc.com/news/world-asia-india-56037901"><strong>as the right-wing‚Äôs answer to Twitter</strong></a><strong>. Politics has played a role in the sudden attention that Koo has received. Have you considered the risks of embracing the way your app has been politicized?&nbsp;</strong></h4>



<p>It depends on the actions on the app. That first community [we built] in Kannada was built in a slower manner, and it has people from all parties in Karnataka.&nbsp;</p>



<p>What we are seeing is that India wants to be more self-reliant. India includes everybody. Our app doesn‚Äôt understand ‚Äúleft‚Äù or ‚Äúright.‚Äù <em>I </em>don‚Äôt understand ‚Äúleft‚Äù or ‚Äúright.‚Äù I‚Äôm an entrepreneur; I‚Äôm extremely apolitical. And I‚Äôm all for the development of the country. If Koo as a statement can make us self-reliant on our own social networks and technology, then we should be cheering for it. We shouldn‚Äôt unnecessarily politicize it.</p>



<h4><strong>Social media is shaped by its users and early adopters. Most of Koo‚Äôs early video content partnerships with, say, Republic TV [a channel </strong><a href="https://www.theguardian.com/media/2020/dec/23/indian-news-channel-fined-in-uk-for-hate-speech-about-pakistan"><strong>notorious for its allegiance</strong></a><strong> with the ruling Hindu nationalist party] or Mitron [a short-form video app that Modi supporters </strong><a href="https://www.techradar.com/news/mitron-app-gives-tiktok-a-challenge-will-it-sustain-though"><strong>have embraced after the ban on TikTok</strong></a><strong>] have come to associate the app with a particular ideology. Are you worried Koo might get too polarized too quickly?&nbsp;</strong></h4>



<p>Not at all. In Karnataka, we have everybody [on Koo], as I said. As a business, we keep looking for partners to grow our business. Now, the partners who come aggressively and see the vision that we‚Äôre seeing as a free-expression platform and embrace the platform, we‚Äôre happy to welcome them. Why would I say no to somebody who wants to use our platform? Republic [TV] came first, that doesn‚Äôt mean I don‚Äôt want everybody else.&nbsp;</p>


    <figure>
      <div>
				<ul>
					<li>		<figure>
			<div>
				<p><img src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/KooPhone1-40x67.png" data-src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/KooPhone1-600x1066.png" data-srcset="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/KooPhone1-400x667.png 400w, https://restofworld.org/wp-content/uploads/2021/02/KooPhone1-600x1000.png 600w, " sizes="(max-width: 640px) calc(100vw + 40px), 50vw" alt="">
					
				</p>
			</div>
						<figcaption itemprop="caption description">
				
				
			</figcaption>
		</figure></li><li>		<figure>
			<div>
				<p><img src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/KooPhone3-40x67.png" data-src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/KooPhone3-600x1066.png" data-srcset="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/KooPhone3-400x667.png 400w, https://restofworld.org/wp-content/uploads/2021/02/KooPhone3-600x1000.png 600w, " sizes="(max-width: 640px) calc(100vw + 40px), 50vw" alt="">
					
				</p>
			</div>
						<figcaption itemprop="caption description">
				
				
			</figcaption>
		</figure></li><li>		<figure>
			<div>
				<p><img src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/KooPhone4-40x67.png" data-src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/KooPhone4-600x1066.png" data-srcset="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/KooPhone4-400x667.png 400w, https://restofworld.org/wp-content/uploads/2021/02/KooPhone4-600x1000.png 600w, " sizes="(max-width: 640px) calc(100vw + 40px), 50vw" alt="">
					
				</p>
			</div>
						<figcaption itemprop="caption description">
				
				
			</figcaption>
		</figure></li><li>		<figure>
			<div>
				<p><img src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/KooPhone2-40x67.png" data-src="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/KooPhone2-600x1066.png" data-srcset="https://149346090.v2.pressablecdn.com/wp-content/uploads/2021/02/KooPhone2-400x667.png 400w, https://restofworld.org/wp-content/uploads/2021/02/KooPhone2-600x1000.png 600w, " sizes="(max-width: 640px) calc(100vw + 40px), 50vw" alt="">
					
				</p>
			</div>
						<figcaption itemprop="caption description">
				
				
			</figcaption>
		</figure></li>
				</ul>
			</div>
      <figcaption>On Koo‚Äôs Hindi language setting, it‚Äôs easy to find the accounts of several of India‚Äôs biggest Hindu nationalist politicians next to celebrities and right-leaning media channels. The majority of the app‚Äôs top trending hashtags in Hindi are pro-Modi.</figcaption>
    </figure>


<h4><strong>In a recent BBC report about your app, there‚Äôs a rhetorical question, </strong><a href="https://www.bbc.com/news/world-asia-india-56037901"><strong>‚ÄúIs Koo India‚Äôs Parler?‚Äù</strong></a><strong> What do you make of that comparison?&nbsp;</strong></h4>



<p>Each platform comes into being for different reasons. I‚Äôve already explained my story. We were doing this irrespective of whether Twitter existed, got banned, got into trouble, or flourished in India.&nbsp;</p>



<p>We started in November 2019 because we said the voice of the Indian user who doesn‚Äôt speak English is not there. We are building an inclusive social media network for India. So what was your question?&nbsp;</p>



<h4><strong>My question was what do you make of Parler and‚Äî</strong></h4>



<p>Parler came into existence because there was an anti-Trump thing, and they wanted to do a pro-Trump thing. We don‚Äôt exist because of some anti or pro thing. We are existing today irrespective of whether Twitter gets into trouble or not, irrespective of one ideology being there or not. We exist because we want to give a voice to every Indian. The purpose of our existence is very different from what a Parler is.&nbsp;</p>



<h4><strong>What do you make of the ‚ÄúMake in India‚Äù push, considering Facebook and Twitter have </strong><a href="https://www.nytimes.com/2021/01/14/technology/trump-facebook-twitter.html"><strong>an undeniable influence</strong></a><strong> in our current political discourse?</strong></h4>



<p>Every social media [platform] has to be responsible, to a certain extent, of what they bring into a country because it defines a lot of things in the country, like youth culture or how citizens of a country react to a situation.&nbsp;</p>



<p>When a company is registered elsewhere and doesn‚Äôt take into consideration the nuances of the local culture, I think it can be dangerous. Indian entrepreneurs building for Indian cultural nuances is better than somebody who doesn‚Äôt understand the cultural nuances trying to build for India.</p>



<figure><blockquote><p>‚ÄúIndian entrepreneurs building for Indian cultural nuances is better than somebody who doesn‚Äôt understand the cultural nuances trying to build for India.‚Äù</p></blockquote></figure>



<h4><strong>The way Indian internet is shaping, </strong><a href="https://restofworld.org/2021/indias-hashtag-war/"><strong>an extreme version of ‚ÄúIndian apps for India‚Äù</strong></a><strong> is an entire separate internet for India, the way China has Weibo and its own social network. Do you think that kind of internet would be a good thing for India as a whole?&nbsp;</strong></h4>



<p>Absolutely, we should have our own <em>atmanirbhar</em> platforms. We ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://restofworld.org/2021/how-koo-became-a-right-wing-darling-in-india/">https://restofworld.org/2021/how-koo-became-a-right-wing-darling-in-india/</a></em></p>]]>
            </description>
            <link>https://restofworld.org/2021/how-koo-became-a-right-wing-darling-in-india/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26196588</guid>
            <pubDate>Fri, 19 Feb 2021 18:58:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Cleaner parallel curves with Euler spirals]]>
            </title>
            <description>
<![CDATA[
Score 124 | Comments 12 (<a href="https://news.ycombinator.com/item?id=26196470">thread link</a>) | @raphlinus
<br/>
February 19, 2021 | https://raphlinus.github.io/curves/2021/02/19/parallel-curves.html | <a href="https://web.archive.org/web/*/https://raphlinus.github.io/curves/2021/02/19/parallel-curves.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <!-- I should figure out a cleaner way to do this include, rather than cutting and pasting. Ah well.-->




<p><img src="https://raphlinus.github.io/assets/euler-parallel-flower.svg" alt="Many parallel curve of an Euler spiral, resembling a flower"></p>

<p>Determining <a href="https://en.wikipedia.org/wiki/Parallel_curve">parallel curves</a> is one of the basic 2D geometry operations. It has obvious applications in graphics, being the basis of creating a stroke outline from a path, but also in computer aided manufacturing (determining the path of a milling tool with finite radius) and path planning for robotics. There are plenty of solutions in the literature by now, but in this post I propose a cleaner solution.</p>

<p>A good survey paper is <a href="https://www.semanticscholar.org/paper/Comparing-Offset-Curve-Approximation-Methods-Elber-Lee/9ac1978746ec54bdd555b906e2ea1eb922cd6ffd">Comparing Offset Curve Approximation Methods</a>. The main difference between these approaches is the choice of curve representation. An example of a curve representation highly specialized for deriving parallel curves is the <a href="https://www.semanticscholar.org/paper/Pythagorean-hodographs-Farouki-Sakkalis/e20aeb60de908061797b6eaf3af79fdc7e5acdd7">Pythagorean Hodograph</a>. This parallel curve of a Pythagorean Hodograph is an exact parametric polynomial curve, but approximation techniques are still needed in practice, both to convert the source curve into the representation, and because the resulting curves are higher order rational polynomials, which require further approximation to convert into, say, cubic B√©ziers.</p>

<p>Specifically, this blog proposes piecewise Euler spirals as a curve representation particularly well suited to the parallel curve problem.</p>

<p>There‚Äôs an implementation of many of these ideas (currently still in PR stage) in <a href="https://github.com/linebender/kurbo/pull/169">kurbo</a>. I also used a colab notebook to explore a bunch of the math, and I‚Äôve made a <a href="https://github.com/raphlinus/raphlinus.github.io/blob/master/assets/Euler_spiral_scratchpad.ipynb">copy of that available</a> as well.</p>

<h2 id="the-cusp">The cusp</h2>

<p>One of the things that makes parallel curves special is that cusps often appear. In particular, a cusp appears whenever the radius of curvature of the source curve matches the offset. This is classified as an <a href="https://en.wikipedia.org/wiki/Cusp_(singularity)">ordinary cusp</a> and is a feature of many curve families ‚Äì we‚Äôll quantify that a bit more below.</p>

<p><img src="https://raphlinus.github.io/assets/euler-parallel-cusp.svg" alt="Parallel curve of an Euler spiral, showing the cusp"></p>

<p>A common feature of algorithms for computing parallel curves is identifying the location of the cusp, and subdividing there. That basically means solving for the specific value of curvature (the reciprocal of the offset distance). If the source curve is a cubic B√©zier, there can be up to four such cusps, and finding them requires some nontrivial numerical solving.</p>

<h2 id="curvature-as-a-function-of-arclength">Curvature as a function of arclength</h2>

<p>A theme of my approach to parallel curves (and much of my curve work in general, including my <a href="https://www.levien.com/phd/phd.html">thesis</a>), is to consider the relationship of curvature to arclength. A concrete intuition is that it is the position of the steering wheel as a car drives along the curve at constant speed. For some curves, curvature can be represented as a closed-form analytical formula as a function of arclength (the <a href="https://en.wikipedia.org/wiki/Ces%C3%A0ro_equation">Ces√†ro equation</a>), but in general determining the relation requires numerical techniques. For example, in the <a href="https://levien.com/euler_explorer/">Euler explorer</a>, there‚Äôs a plot of curvature as a function of arclength below the interactive cubic B√©zier. Experimenting with that is an excellent way to develop intuition.</p>

<p>One curve that <em>does</em> have an especially simple Ces√†ro equation is the Euler spiral. An Euler spiral segment has this formula:</p><p>

\[\kappa(s) = \kappa_0 + \kappa_1 s\]

</p><p>(A note for those trying to follow along with the detailed math and code: most of the math and numerical code uses $-0.5 \leq s \leq 0.5$ because it helps exploit even/odd symmetries, but the convention for parametrized curves, including the <a href="https://docs.rs/kurbo/0.8.0/kurbo/trait.ParamCurve.html">ParamCurve</a> trait in kurbo, is $0 \leq s \leq 1$. Thus, you‚Äôll frequently see offsets of 0.5. Similarly, you‚Äôll see various scaling to the actual arc length, while the parametrized curve convention assumes an arc length of 1. In this blog, we‚Äôll skim over such details, as the goal is to provide intuition without too much clutter from details.)</p>

<h2 id="the-parallel-curve-of-an-euler-spiral">The parallel curve of an Euler spiral</h2>

<p>In general, most curves do not have a simple formula for their parallel curve. The obvious exception is a circular arc, for which the parallel curve is another circular arc. Another curve family with tractable representation for its parallel curve is Pythagorean Hodographs.</p>

<p>Thanks to its exceptionally simple formulation as a Ces√†ro equation, the Euler spiral is one of the rare curves with a simple closed-form equation for its parallel curve. That equation was first published in a 1906 paper by Heinrich Wieleitner, <a href="https://books.google.com/books?id=UvpZAAAAYAAJ&amp;pg=PA373&amp;lpg=PA373&amp;dq=%22Die+Parallelkurve+der+Klothoide%22&amp;source=bl&amp;ots=fuY39VdPpd&amp;sig=K0AbL03rXAm_g4J9KsheQbbxyaA&amp;hl=en&amp;sa=X&amp;ved=2ahUKEwiUrcD1poTfAhVvFjQIHVthBPoQ6AEwAnoECAMQAQ#v=onepage&amp;q=%22Die%20Parallelkurve%20der%20Klothoide%22&amp;f=false">Die Parallelkurve der Klothoide</a>. For those who don‚Äôt read German, <a href="https://github.com/Rahix">Rahix</a> has kindly provided a translation into English: <a href="https://raphlinus.github.io/assets/clothoids.pdf">PDF</a>, <a href="https://raphlinus.github.io/assets/clothoids.text">TeX source</a>.</p>

<p>Going over this math, I see Wieleitner missed an opportunity for further simplification. The style at the time was to write the Ces√†ro equation in terms of the <em>radius</em> of curvature (the reciprocal of curvature), but especially for the Euler spiral and its parallel curve, using curvature directly yields a much simpler equation. With the cusp located at $s_0$, the equation is gratifyingly simple:</p><p>

\[\kappa(s) = \frac{c}{\sqrt{s - s_0}} + \frac{1}{l}\]

</p><p>The equation is graphed below, and clicking on it links to a <a href="https://www.desmos.com/calculator/qznzk9xnac">Desmos calculator graph</a> with sliders for the parameters.</p>

<p><a href="https://www.desmos.com/calculator/qznzk9xnac"><img src="https://raphlinus.github.io/assets/euler-spiral-parallel-cesaro.png" width="400" height="400"></a></p>

<p>Here $c$ is a coefficient dependent on the parameters of the spiral. To connect it to the notation in the Wieleitner paper, $c = a / \sqrt{2 l^3}$, and $s_0 = -a^2/{2l}$. I‚Äôve also made a <a href="https://www.desmos.com/calculator/imvqywsb8o">Desmos calculator graph</a> that interactively demonstrates the equivalence of this equation and the more involved one from the Wieleitner paper.</p>

<p>There are a number of other curves that have a cusp similar to the above, with characteristic inverse-square root curvature. The clearest connection is the <a href="https://en.wikipedia.org/wiki/Involute">circle involute</a>, which is the same but without the $1/l$ term, or in other words the Euler spiral parallel curve approaches the circle involute as the offset goes to infinity. This provides intuition for the fact that a circle involute is its own parallel curve. The circle involute is perhaps most famous as the optimized profile for meshing <a href="https://ciechanow.ski/gears/">gear</a> teeth, transferring force smoothly with no slop or friction.</p>

<p>Other curves with a similar cusp include the <a href="https://en.wikipedia.org/wiki/Cycloid">cycloid</a> (as well as its many variants including epicycloid, hypocycloid, astroid, deltoid, cardioid, and nephroid), as well as the <a href="https://en.wikipedia.org/wiki/Semicubical_parabola">semicubical parabola</a>. The latter is of particular interest because it can be exactly represented as a case of a cubic B√©zier (it is when the control arms form a symmetrical X).</p>

<p><img src="https://raphlinus.github.io/assets/semicubical_parabola.svg" alt="semicubical parabola"></p>

<p>The parallel curve of the Euler spiral is perfectly cromulent, and, following the tradition of Pythagorean Hodograph curves and their higher-order rational polynomials, we could simply require everything downstream to simply deal with them. But to make that downstream processing easier, we will convert back to piecewise Euler spirals, a more tractable representation.</p>

<h2 id="geometric-hermite-interpolation">Geometric Hermite interpolation</h2>

<p><a href="https://en.wikipedia.org/wiki/Hermite_interpolation">Hermite interpolation</a> is a well known technique. In its simplest form, it is used to generate a piecewise polynomial approximation to some function, where the parameters for each polynomial segment are determined from the values and derivatives of the endpoints. For example, in cubic Hermite interpolation, a cubic polynomial is determined from the values and first derivatives at the endpoints ‚Äì four values, corresponding to four coefficients for the polynomial. The result is C1 continuous as the derivatives exactly match (and are equal to the source curve).</p>

<p>In 2D, there is a distinction between C1 and G1 (geometric) continuity. In C1 continuity, the full derivatives must match, both direction and magnitude. For applications such as animating motion curves, the magnitude is important (it represents speed of motion), but for curves, it is not. G1 continuity requires that the tangents match, but does not specify the magnitude of the derivatives.</p>

<p>In these applications, geometric Hermite interpolation is more efficient, as all parameters of the curve are available to make the shape fit. The Euler spiral is especially well suited to geometric Hermite interpolation, and there is literature on this topic. For reasonable assumptions of smoothness (excluding fractal curves but including simple cusps), the accuracy scales as $O(n^4)$ ‚Äì a doubling of the number of subdivisions reduces the error by a factor of 16. This scaling is the same as cubic Hermite interpolation of a 1D function, not surprising as an Euler spiral segment approximates a cubic polynomial when $y$ values are small.</p>

<p>Section 8.2 of my <a href="https://www.levien.com/phd/phd.html">thesis</a> provides a secant method for determining the Euler spiral parameters from the G1 Hermite constraints, and that‚Äôs implemented in the <code>fit_euler</code> method in the <a href="https://github.com/linebender/kurbo/pull/169">kurbo PR</a>. That‚Äôs a good technique and its convergence is excellent (quadratic, as typical for Newton-style solvers for near-linear problems), but I‚Äôve also been experimenting with ways to do it better. The linked notebook explores a polynomial approximation (based on 2D Taylor‚Äôs series) that is much faster ‚Äì 7ns vs 240ns in my measurements, and should be very accurate over a wide range of parameters. I‚Äôm not quite done making the error bounds rigorous, but this approach should help make the overall algorithm lightning-fast.</p>

<p>Geometric Hermite interpolation works well to approximate the parallel curve of an Euler spiral segment with another Euler spiral segment:</p>

<p><img src="https://raphlinus.github.io/assets/euler-parallel-approx.svg" alt="Approximation of the parallel curve of an Euler spiral segment"></p>

<p>The true parallel curve is in blue, and the approximation in red. It has the same rough shape, but bulges out in the middle. We need to be able to estimate that error in order to make a more accurate approximation.</p>

<h3 id="a-simple-accurate-error-metric">A simple, accurate error metric</h3>

<p>The most common approach to approximation given a target error bound is adaptive subdivision: approximate the error, and if it exceeds the target, subdivide. Evaluating the error is not always easy; most generally, it‚Äôs based on numerical techniques such as evaluating the curve at several points along its length and testing how near those points lie to the source curve.</p>

<p>Fortunately, for approximating an Euler spiral parallel curve using an Euler spiral, there is an extremely simple formula for the error. In fact, it‚Äôs possible to avoid the adaptive subdivision altogether, and precisely predict how many subdivisions are needed to meet an error bound, as well as analytically place the subdivisions so each segment has the same error.</p>

<p>Normalized to a chord length of 1, where the arc ‚Ä¶</p></div></article></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://raphlinus.github.io/curves/2021/02/19/parallel-curves.html">https://raphlinus.github.io/curves/2021/02/19/parallel-curves.html</a></em></p>]]>
            </description>
            <link>https://raphlinus.github.io/curves/2021/02/19/parallel-curves.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26196470</guid>
            <pubDate>Fri, 19 Feb 2021 18:49:47 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Researchers looking for mRNA were ridiculed by colleagues]]>
            </title>
            <description>
<![CDATA[
Score 292 | Comments 99 (<a href="https://news.ycombinator.com/item?id=26196372">thread link</a>) | @fortran77
<br/>
February 19, 2021 | https://www.macleans.ca/society/science/scientists-mrna-covid-vaccines/ | <a href="https://web.archive.org/web/*/https://www.macleans.ca/society/science/scientists-mrna-covid-vaccines/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><p>Sixty years ago, the scientists who were pioneering the technology that would make today's COVID-19 vaccines possible were mocked and dismissed</p><div>
																		<p>A few days before Christmas, Matthew Meselson, a 90-year-old professor at Harvard, called his university‚Äôs health service to inquire about being vaccinated against COVID-19. He was eager for his shot. Meselson felt imprisoned in his Cambridge apartment, just blocks from the campus where he‚Äôd worked for six decades. He‚Äôd officially retired from teaching at the beginning of 2020, but continued his research as much as possible throughout the pandemic, wearing a K95 mask to work in his lab.</p>
<p>He longed to re-engage in the world around him. He missed his weekly date with close friends over lunch at Boston‚Äôs best French restaurant; they‚Äôd switched to Zoom, but staring into a computer screen is no replacement for lingering at linen-covered tables. He longed for his wife of 32 years, Jeanne Guillemin, who died from cancer late in 2019. Meselson was still figuring out how his world worked without her, and isolation made this hard task harder.</p>
<p>The person on the other end of the phone apologized to the professor. ‚ÄúWe don‚Äôt have a vaccine schedule yet,‚Äù she told him.</p>
<p>The first two COVID-19 vaccines to be approved for use in North America were developed, tested and delivered into freezers before many jurisdictions figured out how to administer them. The vaccines from Pfizer-BioNTech and Moderna are the first approved vaccines ever to employ modified mRNA, which is delivered sealed in a lipid shell. The mRNA slips into our cells, carrying instructions to make antibodies that target SARS-CoV-2. The vaccines function almost like a wanted poster: if you see these guys, get ‚Äôem. Then, the mRNA degrades, leaving no trace.</p>
<blockquote><p><strong>READ:&nbsp;<a href="https://www.macleans.ca/news/covid-19-vaccines-curbing-pandemic-vaxx-populi/">How quickly will the COVID-19 vaccines start curbing the pandemic in Canada?</a></strong></p></blockquote>
<p>The fact that mRNA is the basis of these vaccines contributed to their rapid development. In November, the <em>New York Times</em> reported that within two days of China releasing the genetic sequence of SARS-CoV-2, scientists at Moderna Inc., a 10-year-old company headquartered not far from Meselson‚Äôs home in Cambridge, ‚Äúplugged that data into its computers and came up with a design for an mRNA vaccine.‚Äù Meanwhile, BioNTech, a small biotech company in Germany that had been working on mRNA flu vaccines with the pharmaceutical powerhouse Pfizer, soon similarly turned its resources to generating an mRNA COVID vaccine.</p>
<p>But these fastest vaccines in history have been decades in the making. They‚Äôre the product of generations of scientists who built on one idea after another, and kept at it despite failed experiments, rejections, threats of deportation, a lack of funding and skepticism from contemporaries. They were inspired by the discovery of DNA: in 1951, a young English physical chemist named Rosalind Franklin took X-ray photographs that captured DNA‚Äôs helical shape; two years later, James Watson and Francis Crick of Cambridge University published the first report describing DNA‚Äôs double helix, for which they received the Nobel Prize. (Franklin died of ovarian cancer in 1958; her contributions were largely overlooked in her lifetime.) And they were driven not by a race to halt a raging pathogen or by the chance to patent a multi-billion-dollar drug, but by one big, irresistible question: What makes life?</p>
<p>‚ÄúThese weren‚Äôt people who wanted to solve little problems,‚Äù says Meselson. ‚ÄúThese were people who wanted to solve a great big problem.‚Äù</p>
<p>He was one of them.</p>
<p>***</p>
<p>Born in Colorado in 1930, Meselson zipped through the sciences at a young age. By 16, he enrolled at the University of Chicago. In 1957, while doing post-doctoral work at the California Institute of Technology (Caltech), Meselson and Frank Stahl demonstrated how DNA replicates itself, a model that had been suggested but never shown. Science historian Frederic Lawrence Holmes later characterized their work as ‚Äúthe most beautiful experiment in biology,‚Äù having revealed how life worked.</p>
<p>But many unanswered questions remained about what happens inside our cells. Meselson and colleagues knew that DNA resides in the nucleus, a compartment barricaded off from the rest of the cell by a membrane. On the other side of the membrane is the cytoplasm, a gelatinous liquid that fills the remainder of the cell. This is the home of tiny granules called ribosomes, which house RNA.</p>
<p>Around the same time that Meselson and Stahl published their groundbreaking work on DNA, French scientists discovered that cells made proteins through the ribosomes. DNA, despite holding the critical codes for life, is a relatively passive molecule. Ribosomes do the busy labour, building proteins to carry out the biological processes of survival. The question was how?</p>
<p>One of the French scientists, Dr. Fran√ßois Jacob, theorized that there must be an ‚Äúunstable intermediary‚Äù that went between the DNA and the RNA‚Äîsending messages from the DNA to the RNA, and then disappearing.</p>
<p>Jacob, a physician who‚Äôd been forced from medical school when Germany invaded France in 1940 and spent the war years fighting with Charles de Gaulle‚Äôs Free French Forces, called this theoretical intermediary ‚ÄúX.‚Äù Other researchers ‚Äúrolled their eyes in horror‚Äù when he presented his theory, Jacob recalled in his memoir, <em>The Statue Within</em>. ‚ÄúWith a little encouragement, my audience would have jeered and left,‚Äù he wrote.</p>
<div id="attachment_1216833"><p><img data-sizes="auto" src="https://www.macleans.ca/wp-content/uploads/2021/02/MATTHEW-MESELSON-DNA-FRANGOU-FEB02-766x431.jpg" alt="Meselson at Caltech in 1958 (Courtesy of the Caltech Archives)" width="766" height="431"></p><p>Meselson at Caltech in 1958 (Courtesy of the Caltech Archives)</p></div>
<p>In spring 1960, Jacob wrote to Meselson with a proposal: he and Sydney Brenner, a South African biologist at the University of Cambridge, would meet at Meselson‚Äôs lab at Caltech to find X. Meselson, who was in his first year on faculty, had developed a technique to track smaller molecules inside a cell. Jacob believed this technique would help identify X. That summer, with Jacob and Brenner in his lab, Meselson set up initial cultures and tests. Brenner took over the operations, while Jacob sat in a chair taking notes‚Äîpain from bomb fragments in his legs was worsened by the California humidity, says Meselson. For three weeks, they met with one failure after another. The ribosomes kept falling apart. Other scientists poked their heads in periodically and asked sarcastically for news of X. Jacob wrote that they ‚Äúcame to visit as one would visit the zoo.‚Äù On the trio‚Äôs very last scheduled day in the lab, Meselson, having given up on X, left. He flew to Boston to propose to his first wife.</p>
<p>Dejected, Jacob and Brenner went to Malibu Beach. The duo lay on the beach, watching huge waves of the Pacific crashing onto the sand and contemplating where their idea had gone wrong. Jacob wrote in his memoir: ‚ÄúSuddenly, Sydney gives a hoot. He leaps up, yelling, ‚ÄòThe magnesium! It‚Äôs the magnesium!‚Äô ‚Äù They raced back to the lab to run the experiment one last time, with additional magnesium. The result was spectacular. X existed.</p>
<blockquote><p><strong>READ:&nbsp;<a href="https://www.macleans.ca/news/theres-a-new-strain-of-covid-19-will-the-vaccines-work-against-it/">There‚Äôs a new strain of COVID-19. Will the vaccines work against it?</a></strong></p></blockquote>
<p>The pair gave a seminar the same day at Caltech to demonstrate X. Even then, no one believed them. They contacted Meselson in Boston that night to tell him. He was delighted. ‚ÄúIt didn‚Äôt occur to me that they would figure out what was going wrong on the very last day,‚Äù he says. When the trio published their findings in 1961, they renamed X as messenger RNA.</p>
<p>They did not imagine that their finding would be used for therapeutics or a vaccine. Their questions were more philosophical. Meselson says, ‚ÄúWe wondered what is it that allows you to put together the atoms of the ordinary periodic chart and end up with something that‚Äôs alive?‚Äù</p>
<p>Their work became the central tenet of molecular biology: DNA makes RNA makes protein makes life. It took another generation of scientists to find a way to harness RNA to treat and prevent illness.</p>
<p>***</p>
<p>As a kid in Kis√∫jsz√°ll√°s, Hungary, Katalin Karik√≥ watched her father, a butcher, dismember the carcasses of pigs. It was her first introduction to science. In the 1970s, while studying biochemistry at the University of Szeged, Karik√≥ heard about a new report from London: interferon, a type of protein made by the body to trigger a defence against a virus, was mediated by an RNA called 2-5A. Karik√≥ remembers a mentor talking to her about the discovery and being thrilled by the possibilities. He suggested to her that if they could make a synthetic version of a 2-5A molecule, they might be able to treat cancer or viral disease. ‚ÄúI immediately thought that what I was doing was tremendously important,‚Äù she says. It was the start of a 40-year quest to make synthetic RNA that could cure illness.</p>
<p>But she couldn‚Äôt secure funding in Hungary. Married with a two-year-old daughter, Karik√≥ saw no way to continue her work in her home country. She wrote to professors throughout Europe about joining their labs, but no one could hire her. In 1985, she received an offer from Temple University in Philadelphia. If she could get to the United States, a job was waiting for her.</p>
<p>At the time, Hungarian money could not legally be converted to another currency and taken out of the country. Worried about how their family would survive until her first paycheque, Karik√≥ and her husband, Bela Francia, sold their Russian-made car and converted the proceeds on the black market for a total of 900 British pounds. They sewed the money into their daughter‚Äôs teddy bear to smuggle it out of the country. The teddy bear‚Äôs owner, their daughter, Susan Francia, grew up to become a two-time Olympic gold medallist for the United States in rowing.</p>
<div id="attachment_1216834"><p><img data-sizes="auto" src="https://www.macleans.ca/wp-content/uploads/2021/02/KATALIN-KARIKO-MRNA-COVID-19-FRANGOU-FEB02.jpg" alt="Karik√≥ at home in Pennsylvania (Rachel Wisniewski)" width="820" height="547"></p><p>Karik√≥ at home in Pennsylvania (Rachel Wisniewski)</p></div>
<p>In their new home, things did not go as planned. Karik√≥‚Äôs bosses changed, she couldn‚Äôt get funding and she lost her job. Her supervisor cited her for deportation. Desperate to stay in the United States as her daughter entered first grade, Karik√≥ accepted a researcher post in Bethesda, Maryland. She commuted from Philadelphia every Monday morning at 3 a.m. and ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.macleans.ca/society/science/scientists-mrna-covid-vaccines/">https://www.macleans.ca/society/science/scientists-mrna-covid-vaccines/</a></em></p>]]>
            </description>
            <link>https://www.macleans.ca/society/science/scientists-mrna-covid-vaccines/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26196372</guid>
            <pubDate>Fri, 19 Feb 2021 18:41:24 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Gaussian Processes: from one to many outputs]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26196255">thread link</a>) | @wesselb
<br/>
February 19, 2021 | https://invenia.github.io/blog/2021/02/19/OILMM-pt1/ | <a href="https://web.archive.org/web/*/https://invenia.github.io/blog/2021/02/19/OILMM-pt1/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <div>
  
  <p><span>19 Feb 2021</span></p>
  <p>This is the first post in a three-part series we are preparing on multi-output Gaussian Processes. Gaussian Processes (GPs) are a popular tool in machine learning, and a technique that we routinely use in our work.
Essentially, GPs are a powerful Bayesian tool for regression problems (which can be extended to classification problems through some modifications).
As a Bayesian approach, GPs provide a natural and automatic mechanism to construct and calibrate uncertainties.
Naturally, getting <em>well</em>-calibrated uncertainties is not easy and depends on a combination of how well the model matches the data and on how much data is available.
Predictions made using GPs are not just point predictions: they are whole probability distributions, which is convenient for downstream tasks. There are several good references for those interested in learning more about the benefits of Bayesian methods, from <a href="https://towardsdatascience.com/an-introduction-to-bayesian-inference-e6186cfc87bc">introductory</a> <a href="https://towardsdatascience.com/what-is-bayesian-statistics-used-for">blog posts</a> to <a href="https://probml.github.io/pml-book/book0.html">classical</a> <a href="http://www.stat.columbia.edu/~gelman/book/">books</a>.</p>

<p>In this post (and in the forthcoming ones in this series), we are going to assume that the reader has some level of familiarity with GPs in the single-output setting.
We will try to keep the maths to a minimum, but will rely on mathematical notation whenever that helps making the message clear.
For those who are interested in an introduction to GPs‚Äîor just a refresher‚Äîwe point towards <a href="https://distill.pub/2019/visual-exploration-gaussian-processes/">other</a> <a href="https://medium.com/analytics-vidhya/intuitive-intro-to-gaussian-processes-328740cdc37f">resources</a>.
For a rigorous and in-depth introduction, the <a href="http://www.gaussianprocess.org/gpml/">book by Rasmussen and Williams</a> stands as one of the best references (and it is made freely available in electronic form by the authors).</p>

<p>We will start by discussing the extension of GPs from one to multiple dimensions, and review popular (and powerful) approaches from the literature.
In the following posts, we will look further into some powerful tricks that bring improved scalability and will also share some of our code.</p>

<h2 id="multi-output-gps">Multi-output GPs</h2>

<p>While most people with a background in machine learning or statistics are familiar with GPs, it is not uncommon to have only encountered their single-output formulation.
However, many interesting problems require the modelling of multiple outputs instead of just one.
Fortunately, it is simple to extend single-output GPs to multiple outputs, and there are a few different ways of doing so. We will call these constructions multi-output GPs (MOGPs).</p>

<p>An example application of a MOGP might be to predict both temperature and humidity as a function of time. Sometimes we might want to include binary or categorical outputs as well, but in this article we will limit the discussion to real-valued outputs.
(MOGPs are also sometimes called multi-task GPs, in which case an output is instead referred to as a task. But the idea is the same.)
Moreover we will refer to inputs as time, as in the time series setting, but all the discussion in here is valid for any kind of input.</p>

<p>The simplest way to extend GPs to multi-output problems is to model each of the outputs independently, with single-output GPs.
We call this model IGPs (for independent GPs). While conceptually simple, computationally cheap, and easy to implement, this approach fails to account for correlations between outputs.
If the outputs are correlated, knowing one can provide useful information about others (as we illustrate below), so assuming independence can hurt performance and, in many cases, limit it to being used as a baseline.</p>

<p>To define a general MOGP, all we have to do is to also specify how the outputs covary.
Perhaps the simplest way of doing this is by prescribing an additional covariance function (kernel) over outputs, \(k_{\mathrm{o}}(i, j)\), which specifies the covariance between outputs \(i\) and \(j\).
Combining this kernel over outputs with a kernel over inputs, e.g. \(k_{\mathrm{t}}(t, t')\), the full kernel of the MOGP is then given by</p><p>

\[\begin{equation}

k((i, t), (j, t')) = \operatorname{cov}(f_i(t), f_j(t')) = k_{\mathrm{o}}(i, j) k_{\mathrm{t}}(t, t'),

\end{equation}\]

</p><p>which says that the covariance between output \(i\) at input \(t\) and output \(j\) at input \(t'\) is equal to the product \(k_{\mathrm{o}}(i, j) k_{\mathrm{t}}(t, t')\).
When the kernel \(k((i, t), (j, t'))\) is a product between a kernel over outputs \(k_{\mathrm{o}}(i, j)\) and a kernel over inputs \(k_{\mathrm{t}}(t,t‚Äô)\), the kernel \(k((i, t), (j, t'))\) is called <em>separable</em>.
In the general case, the kernel \(k((i, t), (j, t'))\) does not have to be separable, i.e. it can be any arbitrary <a href="https://en.wikipedia.org/wiki/Positive-definite_function">positive-definite function</a>.</p>

<p>Contrary to IGPs, general MOGPs do model correlations between outputs, which means that they are able to use observations from one output to better predict another output.
We illustrate this below by contrasting the predictions for two of the outputs in the <a href="https://sccn.ucsd.edu/~arno/fam2data/publicly_available_EEG_data.html">EEG dataset</a>, one observed and one not observed, using IGPs and another flavour of MOGPs, the ILMM, which we will discuss in detail in the next section. Contrary to the independent GP (IGP), the ILMM is able to successfully predict F2 by exploiting the observations for F3 (and other outputs not shown).</p>

<p><img src="https://invenia.github.io/blog/public/images/eeg.png" alt="IGP_vs_MOGP">
Figure 1: Predictions for two of the outputs in the EEG dataset using two distinct MOGP approaches, the ILMM and the IGP.
All outputs are modelled jointly, but we only plot two of them for clarity.</p>

<h3 id="equivalence-to-single-output-gps">Equivalence to single-output GPs</h3>

<p>An interesting thing to notice is that a general MOGP kernel is just another kernel, like those used in single-output GPs, but one that now operates on an <em>extended</em> input space (because it also takes in \(i\) and \(j\) as input).
Mathematically, say one wants to model \(p\) outputs over some input space \(\mathcal{T}\).
By also letting the index of the output be part of the input, we can construct this extended input space: \(\mathcal{T}_{\mathrm{ext}} = \{1,...,p\} \times \mathcal{T}\). Then, a multi-output Gaussian process (MOGP) can be defined via a mean function, \(m\colon \mathcal{T}_{\mathrm{ext}} \to \mathbb{R}\), and a kernel, \(k\colon \mathcal{T}_{\mathrm{ext}}^2 \to \mathbb{R}\).
Under this construction it is clear that any property of single-output GPs immediately transfers to MOGPs, because MOGPs can simply be seen as single-output GPs on an extended input space.</p>

<p>An equivalent formulation of MOGPs can be obtained by stacking the multiple outputs into a vector, creating a <em>vector-valued GP</em>.
It is sometimes helpful to view MOGPs from this perspective, in which the multiple outputs are viewed as one multidimensional output.
We can use this equivalent formulation to define MOGP via a <em>vector-valued</em> mean function, \(m\colon \mathcal{T} \to \mathbb{R}^p\), and a <em>matrix-valued</em> kernel, \(k\colon\mathcal{T}^2 \to \mathbb{R}^{p \times p}\). This mean function and kernel are <em>not</em> defined on the extended input space; rather, in this equivalent formulation, they produce <em>multi-valued outputs</em>.
The vector-valued mean function corresponds to the mean of the vector-valued GP, \(m(t) = \mathbb{E}[f(t)]\), and the matrix-valued kernel to the covariance matrix of vector-valued GP, \(k(t, t‚Äô) = \mathbb{E}[(f(t) - m(t))(f(t‚Äô) - m(t‚Äô))^\top]\).
When the matrix-valued kernel is evaluated at \(t = t‚Äô\), the resulting matrix \(k(t, t) =  \mathbb{E}[(f(t) - m(t))(f(t) - m(t))^\top]\) is sometimes called the <em>instantaneous spatial covariance</em>: it describes a covariance between different outputs at a given point in time \(t\).</p>

<p>Because MOGPs can be viewed as single-output GPs on an extended input space, inference works exactly the same way.
However, by extending the input space we exacerbate the scaling issues inherent with GPs, because the total number of observations is counted by adding the numbers of observations for each output, and GPs scale badly in the number of observations.
While inference in the single-output setting requires the inversion of an \(n \times n\) matrix (where \(n\) is the number of data points), in the case of \(p\) outputs, assuming that at all times all outputs are observed,<sup id="fnref:1" role="doc-noteref"><a href="#fn:1">1</a></sup> this turns into the inversion of an \(np \times np\) matrix (assuming the same number of input points for each output as in the single output case), which can quickly become computationally intractable (i.e. not feasible to compute with limited computing power and time).
That is because the inversion of a \(q \times q\) matrix takes \(\mathcal{O}(q^3)\) time and \(\mathcal{O}(q^2)\) memory, meaning that time and memory performance will scale, respectively, cubically and quadratically on the number of points in time, \(n\), and outputs, \(p\).
In practice this scaling characteristic limits the application of this general MOGP formulation to data sets with very few outputs and data points.</p>

<h3 id="low-rank-approximations">Low-rank approximations</h3>

<p>A popular and powerful approach to making MOGPs computationally tractable is to impose a <a href="https://en.wikipedia.org/wiki/Rank_(linear_algebra)">low-rank</a> structure over the covariance between outputs.
That is equivalent to assuming that the data can be described by a set of latent (unobserved) Gaussian processes in which the number of these <em>latent processes</em> is fewer than the number of outputs.
This builds a simpler lower-dimensional representation of the data. The structure imposed over the covariance matrices through this lower-dimensional representation of the data can be exploited to perform the inversion operation more efficiently (we are going to discuss in detail one of these cases in the next post of this series).
There are a variety of different ways in which this kind of structure can be imposed, leading to an interesting class of models which we discuss in the next section.</p>

<p>This kind of assumption is typically used to make the method computationally cheaper.
However, these assumptions do bring extra <a href="https://en.wikipedia.org/wiki/Inductive_bias">inductive bias</a> to the model. Introducing inductive bias <a href="https://towardsdatascience.com/supercharge-your-model-performance-with-inductive-bias-48559dba5133">can be a powerful tool</a> in making the model more data-efficient and better-performing in practice, provided that such assumptions are adequate to the particular problem at hand.
For instance, <a href="https://epubs.siam.org/doi/pdf/10.1137/18M1183480">low-rank data</a> <a href="https://ieeexplore.ieee.org/document/1177153">occurs naturally</a> in <a href="https://www.sciencedirect.com/science/article/abs/pii/S0005109807003950">different settings</a>.
This also happens to be true in electricity grids, due to the <a href="https://lib.dr.iastate.edu/cgi/viewcontent.cgi?article=1031&amp;context=econ_las_conf">mathematical structure</a> of the ‚Ä¶</p></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://invenia.github.io/blog/2021/02/19/OILMM-pt1/">https://invenia.github.io/blog/2021/02/19/OILMM-pt1/</a></em></p>]]>
            </description>
            <link>https://invenia.github.io/blog/2021/02/19/OILMM-pt1/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26196255</guid>
            <pubDate>Fri, 19 Feb 2021 18:30:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Python Resources for Everybody]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26196218">thread link</a>) | @EntICOnc
<br/>
February 19, 2021 | https://learnbyexample.github.io/py_resources/ | <a href="https://web.archive.org/web/*/https://learnbyexample.github.io/py_resources/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><nav id="sidebar" aria-label="Table of contents"></nav><div id="page-wrapper"><div class="page"><div id="content"><main><h2><a href="#about" id="about">About</a></h2><p>This is a collection of Python <strong>learning</strong> resources. Many of the resources, especially the beginner ones, are free.</p><p><img src="https://learnbyexample.github.io/py_resources/images/info.svg" alt="info"> For a curated list of frameworks, libraries, software, etc, see <a href="https://github.com/vinta/awesome-python">awesome-python</a></p><h2><a href="#img-srcimageswarningsvg-altwarning--disclaimer-and-disclosure" id="img-srcimageswarningsvg-altwarning--disclaimer-and-disclosure"><img src="https://learnbyexample.github.io/py_resources/images/warning.svg" alt="warning"> Disclaimer and Disclosure</a></h2><p>I don't have personal experience with majority of the resources mentioned here. I have collected them from various recommendation threads on Reddit, Hacker News, Stackexchange sites, Twitter, GitHub, etc.</p><p><a href="https://learnbyexample.github.io/py_regular_expressions/">Python re(gex)?</a> and <a href="https://learnbyexample.github.io/100_page_python_intro/">100 Page Python Intro</a> are my own books.</p><h2><a href="#table-of-contents" id="table-of-contents">Table of Contents</a></h2><ul><li><a href="https://learnbyexample.github.io/py_resources/beginners.html">Beginner resources</a> <ul><li><a href="https://learnbyexample.github.io/py_resources/beginners.html#new-to-programming">New to programming</a></li><li><a href="https://learnbyexample.github.io/py_resources/beginners.html#new-to-python">New to Python</a></li><li><a href="https://learnbyexample.github.io/py_resources/beginners.html#courses-with-certificates">Courses with certificates</a></li><li><a href="https://learnbyexample.github.io/py_resources/beginners.html#exercises">Exercises</a></li><li><a href="https://learnbyexample.github.io/py_resources/beginners.html#projects">Projects</a></li><li><a href="https://learnbyexample.github.io/py_resources/beginners.html#debugging">Debugging</a></li><li><a href="https://learnbyexample.github.io/py_resources/beginners.html#tools-ide-and-text-editors">Tools, IDE and Text Editors</a></li><li><a href="https://learnbyexample.github.io/py_resources/beginners.html#cheatsheets">Cheatsheets</a></li><li><a href="https://learnbyexample.github.io/py_resources/beginners.html#documentation-and-getting-help">Documentation and getting help</a></li></ul></li><li><a href="https://learnbyexample.github.io/py_resources/specific.html">Specific features</a> <ul><li><a href="https://learnbyexample.github.io/py_resources/specific.html#async-and-concurrency">Async and concurrency</a></li><li><a href="https://learnbyexample.github.io/py_resources/specific.html#command-line-applications">Command line applications</a></li><li><a href="https://learnbyexample.github.io/py_resources/specific.html#context-managers">Context managers</a></li><li><a href="https://learnbyexample.github.io/py_resources/specific.html#decorators-and-closures">Decorators and closures</a></li><li><a href="https://learnbyexample.github.io/py_resources/specific.html#iterables-generators-yield-itertools">Iterables, Generators, Yield, Itertools</a></li><li><a href="https://learnbyexample.github.io/py_resources/specific.html#lambda">Lambda</a></li><li><a href="https://learnbyexample.github.io/py_resources/specific.html#lists-and-comprehensions">Lists and comprehensions</a></li><li><a href="https://learnbyexample.github.io/py_resources/specific.html#memoization">Memoization</a></li><li><a href="https://learnbyexample.github.io/py_resources/specific.html#os-interaction">OS interaction</a></li><li><a href="https://learnbyexample.github.io/py_resources/specific.html#profiling-code-and-speeding-up-python">Profiling code and speeding up Python</a></li><li><a href="https://learnbyexample.github.io/py_resources/specific.html#regular-expressions">Regular Expressions</a></li><li><a href="https://learnbyexample.github.io/py_resources/specific.html#virtual-environments-and-packaging">Virtual Environments and Packaging</a></li></ul></li><li><a href="https://learnbyexample.github.io/py_resources/intermediate.html">Intermediate to Advanced resources</a> <ul><li><a href="https://learnbyexample.github.io/py_resources/intermediate.html#intermediate">Intermediate</a></li><li><a href="https://learnbyexample.github.io/py_resources/intermediate.html#testing">Testing</a></li><li><a href="https://learnbyexample.github.io/py_resources/intermediate.html#algorithms-and-data-structures">Algorithms and data structures</a></li><li><a href="https://learnbyexample.github.io/py_resources/intermediate.html#design-patterns">Design patterns</a></li><li><a href="https://learnbyexample.github.io/py_resources/intermediate.html#advanced">Advanced</a></li></ul></li><li><a href="https://learnbyexample.github.io/py_resources/domain.html">Domain specific resources</a> <ul><li><a href="https://learnbyexample.github.io/py_resources/domain.html#bioinformatics">Bioinformatics</a></li><li><a href="https://learnbyexample.github.io/py_resources/domain.html#data-science">Data Science</a></li><li><a href="https://learnbyexample.github.io/py_resources/domain.html#gui-and-games">GUI and Games</a></li><li><a href="https://learnbyexample.github.io/py_resources/domain.html#machine-learning">Machine Learning</a></li><li><a href="https://learnbyexample.github.io/py_resources/domain.html#robotics-and-computer-vision">Robotics and Computer Vision</a></li><li><a href="https://learnbyexample.github.io/py_resources/domain.html#scientific-computing">Scientific computing</a></li><li><a href="https://learnbyexample.github.io/py_resources/domain.html#web-development">Web development</a></li></ul></li></ul><h2><a href="#acknowledgements" id="acknowledgements">Acknowledgements</a></h2><ul><li><a href="https://github.com/rust-lang/mdBook">mdBook</a></li><li><a href="https://github.com/JorelAli/mdBook-pagetoc">mdBook-pagetoc</a></li><li><a href="https://github.com/wilsonzlin/minify-html">minify-html</a></li><li><a href="https://commons.wikimedia.org/wiki/File:Warning_icon.svg">Warning</a> and <a href="https://commons.wikimedia.org/wiki/File:Info_icon_002.svg">Info</a> icons by <a href="https://commons.wikimedia.org/wiki/User:Amada44">Amada44</a> under public domain</li><li><a href="https://inkscape.org/">Inkscape</a></li><li><a href="https://github.com/RazrFalcon/svgcleaner">svgcleaner</a></li></ul><h2><a href="#license" id="license">License</a></h2><p>This work is licensed under a <a href="https://github.com/learnbyexample/py_resources/blob/master/LICENSE">Creative Commons Zero v1.0 Universal License</a></p></main><nav aria-label="Page navigation"><a rel="next" href="https://learnbyexample.github.io/py_resources/beginners.html" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right"> <i></i> </a></nav></div></div><nav aria-label="Page navigation"><a rel="next" href="https://learnbyexample.github.io/py_resources/beginners.html" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right"> <i></i> </a></nav></div></div>]]>
            </description>
            <link>https://learnbyexample.github.io/py_resources/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26196218</guid>
            <pubDate>Fri, 19 Feb 2021 18:27:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Nyan Cat on the Blockchain]]>
            </title>
            <description>
<![CDATA[
Score 89 | Comments 88 (<a href="https://news.ycombinator.com/item?id=26196027">thread link</a>) | @awaxman11
<br/>
February 19, 2021 | https://foundation.app/NyanCat/nyan-cat-219 | <a href="https://web.archive.org/web/*/https://foundation.app/NyanCat/nyan-cat-219">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><p>Nyan Cat is the name of an animation uploaded on April 2 2011, and became a viral internet sensation. The design of Nyan Cat was inspired by my cat Marty, who crossed the Rainbow Bridge but lives on in spirit.</p><p>I am the original artist behind the iconic GIF and have remastered the image for its 10 year anniversary.  Owning this piece grants the following stats:</p><p>Charisma +10<br>Luck +10<br>Happiness +15</p><hr><p>1400x1400 - 12 Frames</p></div></div>]]>
            </description>
            <link>https://foundation.app/NyanCat/nyan-cat-219</link>
            <guid isPermaLink="false">hacker-news-small-sites-26196027</guid>
            <pubDate>Fri, 19 Feb 2021 18:12:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Why Hotwire Could be the Future of Front-end Dev]]>
            </title>
            <description>
<![CDATA[
Score 13 | Comments 2 (<a href="https://news.ycombinator.com/item?id=26195969">thread link</a>) | @timdl
<br/>
February 19, 2021 | https://wizville.fr/en/blog/a-product-guys-take-on-hotwire-vs-vue-react/ | <a href="https://web.archive.org/web/*/https://wizville.fr/en/blog/a-product-guys-take-on-hotwire-vs-vue-react/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
						
							<p><span>I‚Äôve had the chance of talking directly to <a href="https://twitter.com/dhh" target="_blank" rel="noopener">@DHH</a>&nbsp;himself, creator of Ruby on Rails, on the 28th of January, mostly about Hotwire (video at the end of the post). Just writing this, as a product guy who never shipped a line of Ruby in production, still feels completely crazy.&nbsp;</span></p>
<h2><b>How it happened</b></h2>
<p><span>It all started as a joke. At <a href="https://wizville.fr/en/" target="_blank" rel="noopener">WizVille</a>, like most startups, we struggle to hire Fullstack Rails developers that match our (rather high) expectations. Which is a problem when your whole strategy is based on changing the way your customers go about their business through technology and innovation. Especially when you feel like you‚Äôve&nbsp;<a href="https://techcrunch.com/2020/10/15/wizville-local-monitor-helps-small-shops-track-google-maps-ratings-of-competitors/" target="_blank" rel="noopener">cracked it</a> and start having stronger traction than ever, both nationally and internationally, and have had <strong>3 senior Software Engineers positions open for 4 months (see our&nbsp;<a href="https://www.welcometothejungle.com/fr/companies/wizville/jobs/ruby-on-rails-developer-experimente-e-h-f-x_paris">remaining open position</a>)</strong>‚Ä¶&nbsp;</span></p>
<p><span>So one night, I call Cl√©ment, our CTO, and tell him : ¬´ Let‚Äôs ask DHH to come talk at our first ever WizVille-hosted tech event!¬ª. The idea would be to make a powerful statement to the Rails community in France: ¬´ WizVille means business, and takes inspiration from the best, you should join us! ¬ª.</span></p>
<p><span>Cl√©ment laughed and answered, ¬´ well, that‚Äôs a crazy idea, but he just launched Hotwire and a new version of Turbo today ¬ª. I open Hacker News, ¬´ <a href="https://hotwire.dev/" target="_blank" rel="noopener">Hotwire: HMTL over the wire</a> ¬ª is the #1 post. I find out about the tech and realize that not only Hotwire is a potential game changer, but also that this is the perfect opportunity.&nbsp;</span></p>
<p><span>It just took one email, I offered to gather as much of the French Rails community as possible for an event during which he could spread the word about Hotwire, and he accepted within 24 hours. I think he did because the email transpired the fact that I was maybe the most determined guy out there to be willing to gather as much of the Rails community for a dedicated event about HW.&nbsp;</span></p>
<h2><b>Not just another front-end framework</b></h2>
<p><span>At first, I thought Hotwire wasn‚Äôt meant to take over the front-end development game in David‚Äôs mind. But <strong>I was shocked by his answers and the displayed pureness of his ambition</strong> on why he created it and shipped HW for the world to use.&nbsp;</span></p>
<p><span>We all know David for his game changing vision with Rails, and his radical approach to working described in Rework and how it influenced the way the tech world sees work. But Rails was launched at a different time, when you‚Äôd think the competing technologies were ‚Äúrather clearly‚Äù retrograde.&nbsp;</span></p>
<p><span>We also know how powerful frameworks like Vue and React are today. </span> <span>So, assuming the potential limitations of Hotwire, since it‚Äôs HTML-based, and the incredible contenders there are in the front-end development world (lead by the likes of Facebook, Google‚Ä¶), I never thought David was going to pitch us an upcoming shift in the way apps are created‚Ä¶ even though it kinda feels obvious now that he‚Äôs described it to me.&nbsp;</span></p>
<h2><b>Why Hotwire could be the future&nbsp;</b></h2>
<ol>
<li aria-level="1"><span>You can learn Hotwire over a week-end according to David. On average it takes about a month or two with React. With V ue, about 2 to 4 weeks.&nbsp;</span></li>
<li aria-level="1"><b>Having to code everything in Javascript on the front-end has never been a free choice</b><span>: it‚Äôs always been a choice made out of the absence of alternatives. With HW, app builders won‚Äôt have to deal with the complexities of having developers specialized in a completely different technology. And will use the needed technology for the appropriate goal. That will dramatically increase the developer‚Äôs satisfaction since he will be able to use his preferred language and also manage most of the spectrum of web app building himself.&nbsp;</span></li>
<li aria-level="1"><span>Hotwire is an independent project from Rails, which means it works with any back end development framework.&nbsp;</span></li>
<li aria-level="1"><span>Hotwire also works on mobile. Out of Hey‚Äôs mobile app‚Äôs +100 screens, only one of them is built in native languages. There‚Äôs also a misconception about Strada (not released at the moment I‚Äôm writing this): it will just give developers a more conventionalized approach for interacting with their native apps, but that‚Äôs it.&nbsp;</span></li>
<li aria-level="1"><span>Hotwire works for every kind of app, save for apps that really require javascript‚Äôs abilities as a technology, and need to work independently in the client (calendars or apps like Figma). That kind of app is a very small fraction, and Hotwire can be combined with a JS framework like React or Vue if needed.&nbsp;</span></li>
</ol>
<p><b>So there you have all the ingredients to replace any front-end framework:</b></p>
<ul>
<li aria-level="1"><span>Speed: get your developers up to speed on your front-end framework faster, and therefore potentially ship your product faster</span></li>
<li aria-level="1"><span>Simplicity: easier for back-end developers to do otherwise complex front-end work</span></li>
<li aria-level="1"><span>Coherent technology choice : use complex front-end frameworks only when needed for some features</span></li>
<li aria-level="1"><span>Compatibility : works with all back-end frameworks and all types of web apps</span></li>
</ul>
<h2><b>Main concerns to date&nbsp;</b></h2>
<p><span>The main concerns are mostly related to <strong>how little time it‚Äôs been since Hotwire has been released</strong>. This means smaller community and stack overflow threads, and also fewer plugins. The most advanced design framework you could use is <a href="https://tailwindcss.com/" target="_blank" rel="noopener">Tailwind</a>, a CSS framework. Which may have us coding our own animations or having to combine with other libraries‚Ä¶? </span><span>Also, having to combine front-end frameworks in some cases, doesn‚Äôt feel ideal.</span></p>
<p><span>David told us that Hotwire was up to a much stronger start than Rails, so we could expect to have most of those concerns solved along the road.&nbsp;</span></p>
<p><b>But the mere fact that David Heinemier Hansson deeply believes that his personal mission is to liberate developers from the grip of Single-Page-Apps with Hotwire should definitely have everyone‚Äôs attention in Tech. And it definitely has ours at WizVille.&nbsp;</b></p>
<h2><b>About the event&nbsp;</b></h2>
<p><span>The event was called ¬´ Hotwire &amp; Startups: Dreaming bigger With Rails in 2021 ¬ª and you can enjoy David‚Äôs 1 hour fireside chat mainly about Hotwire below:&nbsp;</span></p>
<p><iframe width="669" height="376" src="https://www.youtube.com/embed/GtWc-xo9ZBo?start=4347&amp;feature=oembed&amp;enablejsapi=1&amp;origin=https://wizville.fr" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>
<p>We also asked their opinions about Hotwire to <a href="https://twitter.com/sylvainutard?lang=fr">Sylvain Utard</a> (AI General Manager @&nbsp;<a href="http://algolia.com/">Algolia</a>), and Nicolas Denayer (VP Engineering @&nbsp;<a href="http://doctolib.com/">Doctolib</a>) along with our own CTO, <a href="https://www.linkedin.com/in/clement-bruchon-37319545/?originalSubdomain=fr">Cl√©ment Bruchon</a>, see the video of the panel here (in French):</p>
<p><iframe width="669" height="376" src="https://www.youtube.com/embed/GtWc-xo9ZBo?start=296&amp;feature=oembed&amp;enablejsapi=1&amp;origin=https://wizville.fr" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>
<p><span>We plan on hosting a 2022 edition of a similar event and are sure to have even more to say on the matter of Hotwire vs React &amp; Vue.&nbsp;</span></p>
<h2><strong>About the author&nbsp;</strong></h2>
<p><a href="http://twitter.com/timdl">Timoth√©e de Laitre</a>&nbsp;is CEO &amp; Head of Product @ <a href="http://wizville.fr/en">WizVille</a>, a 30 people SaaS startup developing a Customer Feedback Platform dedicated to Retail Chains. See our currently open positions <a href="https://www.welcometothejungle.co/companies/wizville/jobs" target="_blank" rel="noopener">here.</a></p>

							</div></div>]]>
            </description>
            <link>https://wizville.fr/en/blog/a-product-guys-take-on-hotwire-vs-vue-react/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26195969</guid>
            <pubDate>Fri, 19 Feb 2021 18:07:54 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Parsec: Platform Abstraction for Security (secure obj storage, crypto services)]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26195270">thread link</a>) | @Terretta
<br/>
February 19, 2021 | https://parallaxsecond.github.io/parsec-book/overview.html | <a href="https://web.archive.org/web/*/https://parallaxsecond.github.io/parsec-book/overview.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page">
        <!-- Provide site root to javascript -->
        

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        

        <!-- Set the theme before any content is loaded, prevents flash -->
        

        <!-- Hide / unhide sidebar before it is displayed -->
        

        <nav id="sidebar" aria-label="Table of contents">
            
            
        </nav>

        <div id="page-wrapper">

            <div class="page">
                
                
                

                
                
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                

                <div id="content">
                    <main>
                        
<p><strong>Parsec</strong> is the <strong>P</strong>latform <strong>A</strong>bst<strong>R</strong>action for <strong>SEC</strong>urity, a new open-source initiative to
provide a common <a href="https://parallaxsecond.github.io/parsec-book/parsec_client/api_overview.html">API</a> to secure services in a platform-agnostic way.</p>
<p>Parsec aims to define a universal software standard for interacting with secure object storage and
cryptography services, creating a common way to interface with functions that would traditionally
have been accessed by more specialised APIs. Parsec establishes an ecosystem of developer-friendly
libraries in a variety of popular programming languages. Each library is designed to be highly
ergonomic and simple to consume. This growing ecosystem will put secure facilities at the fingertips
of developers across a broad range of use cases in infrastructure computing, edge computing and the
secure Internet of Things.</p>

<p>Today's computing platforms have evolved to offer a range of facilities for secure storage and
secure operations. There are hardware-backed facilities such as the Hardware Security Module (HSM)
or Trusted Platform Module (TPM). There are firmware services running in Trusted Execution
Environments (TEE). There are also cloud-based security services. At a bare minimum, security
facilities may be provided purely in software, where they are protected by mechanisms provided in
the operating system.</p>
<p>Over the years, software standards have emerged to allow developers to use these facilities from
their applications. But these standards bring with them the following challenges:</p>
<ul>
<li>They are defined with the expectation that the caller is the "owner" of the platform, meaning that
it has sole access to the underlying hardware. In reality, this is often not the case, because
the caller might reside in a container or virtual machine, where it is sharing the host hardware
with other applications. Existing software standards do not cater well for this situation.</li>
<li>They are defined exhaustively, with lengthy specifications detailing all permissible operations
and parameters. They are written from the perspective of the security device and its
capabilities, rather than from the perspective of the application and its use case. This can
offer a daunting and bewildering experience for developers, who spend a lot of time and effort
figuring out how to map their use case onto the API. There is nothing to tailor the API so that
it can be consumed easily for common, simple cases.</li>
<li>They are specific to a programming language such as C. To consume them in other languages, it is
necessary to use interoperability layers such as Foreign Function Interface (FFI), which can make
the developer experience even more cumbersome and unnatural. Interoperability layers can also be
a source of vulnerabilities.</li>
<li>Standards tend to be adopted based on some knowledge of the target platform. So while it might be
possible for code to be portable across multiple HSM vendors, for example, it is much harder to
make code portable between an HSM-based platform and a TPM-based platform.</li>
</ul>
<p>Parsec inverts this traditional approach to standardizing security interfaces, and it does so by
putting applications front and center. It offers an API that is no less comprehensive, but it does
so in a way that puts the needs of applications and their common use cases first.</p>
<p>Applications simply want the best-available security, and they want to be able to consume it in a
way that is simple, natural, and hard to get wrong.</p>
<p>The following observations can be made about such applications:</p>
<ul>
<li>They can be written in a variety of programming languages.</li>
<li>They may be written with no explicit knowledge of the hardware capabilities of the target
platform, such as whether an HSM or TPM is available.</li>
<li>They are often sharing the target platform hardware with other applications due to the use of
virtualization or containerization technology.</li>
<li>The secure assets owned by one application must be isolated from those owned by another. For
example, private keys provisioned on a hardware device must be isolated such that only the
provisioning application would be able to perform subsequent operations with those keys.</li>
<li>They have differing requirements in terms of permissible cryptographic algorithms and key
strengths.</li>
</ul>
<p>These observations motivate the need for a new platform abstraction that offers a common palette of
security primitives via a software interface that is both agnostic with respect to the underlying
hardware capabilities, and also capable of supporting multiple client applications on the same host,
whether those be within containers or within traditional virtual machines.</p>
<p>Parsec is a new software architecture and ecosystem that addresses this need.</p>

<p>Parsec is founded on the <a href="https://developer.arm.com/architectures/security-architectures/platform-security-architecture"><strong>Platform Security Architecture
(PSA)</strong></a>.
The PSA is a holistic set of threat models, security analyses, hardware and firmware architecture
specifications, and an open source firmware reference implementation. The PSA provides a recipe,
based on industry best practice, that allows security to be consistently designed in, at both a
hardware and firmware level.</p>
<p>One of the provisions of the PSA is the <a href="https://github.com/ARMmbed/mbed-crypto/blob/psa-crypto-api/docs/PSA_Cryptography_API_Specification.pdf"><strong>PSA Crypto
API</strong></a>.
The PSA Crypto API is a comprehensive library of modern security primitives covering the following
functional areas:</p>
<ul>
<li>Key provisioning and management</li>
<li>Hashing</li>
<li>Signing</li>
<li>Message Authentication Codes (MAC)</li>
<li>Asymmetric encryption</li>
<li>Symmetric encryption</li>
<li>Authenticated Encryption with Associated Data (AEAD)</li>
<li>Key derivation</li>
<li>Entropy (random number generation)</li>
</ul>
<p>A crucial characteristic of the PSA Crypto API is that applications always reference the keys
opaquely, making it ideally suited to implementations where keys are provisioned within hardware and
are never exposed.</p>
<p>The PSA Crypto API is defined in the C language. Parsec adopts the operations and contracts of the C
API, and uses them as the basis for a language-independent <a href="https://parallaxsecond.github.io/parsec-book/parsec_client/wire_protocol.html"><strong>wire
protocol</strong></a>. Each <a href="https://parallaxsecond.github.io/parsec-book/parsec_client/operations">operation</a> is defined,
along with all of its inputs and outputs, as a serializable contract, making it suitable to be
invoked over an Inter-Process Communication (IPC) transport. Parsec maintains functional equivalence
with the PSA Crypto API, but allows for out-of-process callers in any programming language.</p>

<p>The core component of Parsec is the <strong>security service</strong> (or <strong>security daemon</strong>). This is a
background process that runs on the host platform and provides connectivity with the secure
facilities of that host and surfaces the wire protocol based on PSA Crypto.</p>
<p>The security service listens on a suitable transport medium. The transport technology is one of
Parsec's many pluggable components, and no single transport is mandated. Choice of transport is
dependent on the operating system and the deployment. On Linux-based systems where the client
applications are running in containers (isolation with a shared kernel), the transport can be based
on Unix sockets.</p>
<p>Client applications make connections with the service by posting API requests to the transport
endpoint. This is usually done via a client library that hides the details of both the wire protocol
and the transport. This is one of the ways in which the client library simplifies the experience of
Parsec for application developers.</p>
<p>A single instance of the Parsec service executes on each physical host. In virtualized environments,
the Parsec service may reside on a specially-assigned guest, or potentially within the hypervisor.</p>
<p>The security service does not support remote client applications. Each physical host or node must
have its own instance of the service. However, it is possible for the service to initiate outbound
remote calls of other services, such as cloud-hosted HSM services.</p>

<p>In addition to surfacing the common API, the Parsec service is also responsible for brokering access
to the underlying security facilities amongst the multiple client applications. The exact way that
this is done will vary from one deployment to another. (See the section below on pluggable back-end
modules). Some of the brokering functionality may already reside in kernel drivers and other parts
of the software stack. The Parsec service is responsible for creating isolated views of key storage
and cryptographic services for each client application. The secure assets of one client must be kept
protected from those of another.</p>
<p>Central to this multi-tenant operation is the notion of <strong>application identity</strong> and the need for a
separate <strong>identity provider</strong> service. A Parsec-enabled host must contain an identity provider
service in addition to the Parsec service itself.</p>
<p>For more information about application identities and the identity provider, please refer to the
<a href="https://parallaxsecond.github.io/parsec-book/parsec_service/system_architecture.html"><strong>system architecture</strong></a> document.</p>

<p>The Parsec service employs a layered architecture, structured into a front-end and a back-end.</p>
<p>The front-end module provides the transport endpoint and listens for connections from clients. The
front-end understands the wire protocol and the common API. It is responsible for serialization and
de-serialization of the operation contracts.</p>
<p>The back-end modules are known as <strong>providers</strong>. An instance of the Parsec security service can load
one or more providers. Providers implement the API operations using platform-specific or
vendor-specific code. They provide the "last mile" of connectivity down to the underlying hardware,
software or firmware.</p>
<p>For a deeper dive into the modular structure of the Parsec service, please take a look at the
<a href="https://parallaxsecond.github.io/parsec-book/parsec_service/interfaces_and_dataflow.html"><strong>interfaces and dataflow</strong></a> design document.</p>
<p>Then delve into the <a href="https://parallaxsecond.github.io/parsec-book/parsec_service/source_code_structure.html"><strong>source code</strong></a> to discover the
back-end provider modules that exist. If you cannot find one that is compatible with the platform
you intend to use, then please consider contributing a new provider.</p>

<p>A key aim of Parsec is to evolve an ecosystem of developer-friendly client libraries in multiple
programming languages.</p>
<p>Parsec ‚Ä¶</p></main></div></div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://parallaxsecond.github.io/parsec-book/overview.html">https://parallaxsecond.github.io/parsec-book/overview.html</a></em></p>]]>
            </description>
            <link>https://parallaxsecond.github.io/parsec-book/overview.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26195270</guid>
            <pubDate>Fri, 19 Feb 2021 17:13:17 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Backup is essential This is Butterfly Backup]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26195250">thread link</a>) | @jajjarax
<br/>
February 19, 2021 | https://matteoguadrini.github.io/Butterfly-Backup/ | <a href="https://web.archive.org/web/*/https://matteoguadrini.github.io/Butterfly-Backup/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
      <header>
        
        
        

        <p>Butterfly Backup is a simple command line wrapper of rsync for complex task, written in python.</p>

        
        <p><a href="https://github.com/MatteoGuadrini/Butterfly-Backup">View the Project on GitHub <small>MatteoGuadrini/Butterfly-Backup</small></a></p>
        

        

        
        <ul>
          <li><a href="https://github.com/MatteoGuadrini/Butterfly-Backup/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/MatteoGuadrini/Butterfly-Backup/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/MatteoGuadrini/Butterfly-Backup">View On <strong>GitHub</strong></a></li>
        </ul>
        
      </header>
      <section>

      <p><img src="https://matteoguadrini.github.io/Butterfly-Backup/img/butterfly_backup.png" alt="Butterfly Backup"></p>

<p><img src="https://matteoguadrini.github.io/Butterfly-Backup/img/bb.png" alt="Greta oto"></p>

<p><a href="https://app.codacy.com/app/MatteoGuadrini/Butterfly-Backup?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=MatteoGuadrini/Butterfly-Backup&amp;utm_campaign=Badge_Grade_Dashboard"><img src="https://api.codacy.com/project/badge/Grade/7fc47024f17f4dffa3be08a7a5ab31bd" alt="Codacy Badge"></a>
<a href="https://circleci.com/gh/MatteoGuadrini/Butterfly-Backup"><img src="https://circleci.com/gh/MatteoGuadrini/Butterfly-Backup.svg?style=svg" alt="CircleCI"></a></p>


<p><strong>The plan is great when the backup plan is excellent!</strong></p>

<h2 id="what-is-that">What is that?</h2>
<p>Butterfly Backup is a <em>simple</em> command line wrapper of rsync for <em>complex</em> task, written in python.</p>

<h2 id="why-butterfly">Why butterfly?</h2>
<p>Butterfly Backup exploits the potential of rsync with maximum simplicity, maximum flexibility and more. Moreover,
its greatest strength is the organization of backups in a catalog, easy to consult.</p>

<h2 id="what-can-i-do">What can I do?</h2>
<p>With Butterfly Backup I can perform single or group backups (Full, Incremental, Differential and Mirror), restore, export, list and archive old backups.</p>

<h2 id="how-can-you-do-it">How can you do it?</h2>
<p>Naturally through the synergy of rsync and OpenSSH technology and the power of Python..</p>

<h2 id="which-platforms-support">Which platforms support?</h2>
<p>Butterfly Backup can backup Linux, BSD, MacOSX and Windows(with cygwin, see <a href="https://butterfly-backup.readthedocs.io/en/latest/">config docs</a>)</p>

<h2 id="real-uses">Real uses</h2>
<p>This list consists of only a few examples; applications can be endless:</p>
<ul>
  <li>Backing up periodically (ex. once a month) a folder where I store my photos over the years;</li>
  <li>Log‚Äôs backup of one or more servers;</li>
  <li>Backup of users of one or more machines;</li>
  <li>Backup system config of much servers;</li>
  <li>Create a backup snapshot of the my laptop;</li>
  <li>Create a central server than backupping client and server;</li>
  <li>Backup a entire file server, incrementally;</li>
</ul>

<h2 id="real-possibilities">Real possibilities</h2>
<ul>
  <li>Configuration for silently or bulk backup</li>
  <li>All backup are organized into a catalog</li>
  <li>List single or all backup by the catalog</li>
  <li>List detail of a single backup</li>
  <li>Backup single PC, with Full,Incremental,Differential and Mirror mode;</li>
  <li>Backup more PCs, with Full,Incremental,Differential and Mirror mode (with parallelism algorithm);</li>
  <li>Backup custom folder or predefined data (User,Config,Application,System,Log): see <a href="https://butterfly-backup.readthedocs.io/en/latest/#backup">backup docs</a></li>
  <li>Restore backup on the same PC</li>
  <li>Restore backup in other PC</li>
  <li>Restore backup in other operating system</li>
  <li>Apply retention policy to delete old backup</li>
  <li>Archive old backup in other file system or same (zip backup folder)</li>
  <li>Export one backup to another file system</li>
</ul>


<p><strong>Transform rsync in a powerfully backup/restore/archive tool</strong></p>

<h2 id="operation">Operation</h2>
<p>All operation of Butterfly Backup are <em>server to client</em>, agent-less. The server must be Unix machine with latest rsync installed.
This means that all commands must be executed by the backup server. Of course, nothing prevents the backup server from being itself (localhost).</p>

<p>To see all the operations and more examples, see the <a href="https://butterfly-backup.readthedocs.io/en/latest/">docs</a>.</p>

<h2 id="test">Test</h2>
<p>If you want to try or test Butterfly Backup before installing it, run the test:</p>
<div><div><pre><code><span>$</span><span> </span>git clone https://github.com/MatteoGuadrini/Butterfly-Backup.git
<span>$</span><span> </span><span>cd </span>Butterfly-Backup
<span>$</span><span> </span>bash test_bb.py
<span>...
</span><span>[92512a6e-506e-11eb-b747-2ba55b805ea5]
type = Full
path = /tmp/bb_repo/localhost/2021_01_06__23_28
name = localhost
os = Unix
timestamp = 2021-01-06 23:28:59
start = 2021-01-06 23:28:59
end = 2021-01-06 23:29:04
status = 0
</span></code></pre></div></div>

<h2 id="installation">Installation</h2>
<p>Install Butterfly Backup is very simple; run this:</p>
<div><div><pre><code>git clone https://github.com/MatteoGuadrini/Butterfly-Backup.git
<span>cd </span>Butterfly-Backup
<span>sudo </span>python3 setup.py
bb <span>--help</span>
man bb
</code></pre></div></div>

<h3 id="backup-machine">Backup machine</h3>
<p>Backup a single PC or server is a everyday task.
But most of the data may not change in the various backups made;
then, in these cases, an incremental backup is needed.
Butterfly Backup natively supports incremental and differential backups, starting from a full.
In this case, the first backup to be performed on the machine will be as follows:</p>
<div><div><pre><code>bb backup <span>--computer</span> pc1 <span>--destination</span> /nas/mybackup <span>--data</span> User Config <span>--type</span> MacOS <span>--mode</span> Full
</code></pre></div></div>
<p>or with short option:</p>
<div><div><pre><code>bb backup <span>-c</span> pc1 <span>-d</span> /nas/mybackup <span>-D</span> User Config <span>-t</span> MacOS <span>-m</span> Full
</code></pre></div></div>
<p>So we created a first <em>Full</em> backup, on a <em>MacOS</em> machine, considering the folders <em>User</em> -&gt; /Users and <em>Config</em> -&gt; /private/etc in the destination <em>/nas/mybackup</em></p>
<blockquote>
  <p><strong>Note</strong>: if you do not specify the user, Butterfly Backup will assume that the source and the destination know the same user; for example, I start the backup with the above command and my user is calling <em>arthur</em>, he will use the latter to log in to pc1.</p>
</blockquote>

<p>Now that we have our first Full backup, we can run <em>incremental</em> for the next few times.</p>
<div><div><pre><code>bb backup <span>--computer</span> pc1 <span>--destination</span> /nas/mybackup <span>--data</span> User Config <span>--type</span> MacOS
</code></pre></div></div>
<p>or with short option:</p>
<div><div><pre><code>bb backup <span>-c</span> pc1 <span>-d</span> /nas/mybackup <span>-D</span> User Config <span>-t</span> MacOS
</code></pre></div></div>
<blockquote>
  <p><strong>Note</strong>: Incremental mode performs a Full backup when they have not been done before.</p>
</blockquote>

<h3 id="restore-machine">Restore machine</h3>
<p>Before starting any restore, you need to understand what kind of data and in what time period you have to start.
So, let‚Äôs start checking our backups, with this command:</p>
<div><div><pre><code>bb list <span>--catalog</span> /nas/mybackup
</code></pre></div></div>
<p>The result will be the following:</p>
<div><div><pre><code>BUTTERFLY BACKUP CATALOG

Backup <span>id</span>: f65e5afe-9734-11e8-b0bb-005056a664e0
Hostname or ip: pc1
Timestamp: 2018-08-03 17:50:36

Backup <span>id</span>: 4f2b5f6e-9939-11e8-9ab6-005056a664e0
Hostname or ip: pc1
Timestamp: 2018-08-06 07:26:46

Backup <span>id</span>: cc6e2744-9944-11e8-b82a-005056a664e0
Hostname or ip: pc1
Timestamp: 2018-08-06 08:49:00
</code></pre></div></div>
<p>Select (copy) <em>Backup id</em> when you want restore a backup.
For exit, press <code>q</code>
Now, run this command for more detail (for example, try the first):</p>
<div><div><pre><code>bb list <span>--catalog</span> /nas/mybackup <span>--backup-id</span> f65e5afe-9734-11e8-b0bb-005056a664e0
</code></pre></div></div>
<p>The result will be the following:</p>
<div><div><pre><code>Backup <span>id</span>: f65e5afe-9734-11e8-b0bb-005056a664e0
Hostname or ip: pc1
Type: Full
Timestamp: 2018-08-03 17:50:36
Start: 2018-08-03 17:50:36
Finish: 2018-08-03 18:02:32
OS: MacOS
ExitCode: 0
Path: /nas/mybackup/pc1/2018_08_03__17_50
List: etc
Users
</code></pre></div></div>
<p>Now that we are sure that the selected backup is what we want (both in data and on date), run this command:</p>
<div><div><pre><code>bb restore <span>--computer</span> pc1 <span>--catalog</span> /nas/mybackup <span>--backup-id</span> f65e5afe-9734-11e8-b0bb-005056a664e0
</code></pre></div></div>
<p>So we have restored the data saved on the date indicated in our <em>pc1</em>.</p>

<h3 id="other-operation">Other operation</h3>
<p>With Butterfly Backup, you can perform Full, Incremental and Mirror backups, applying retention or archive rules;
you can activate the log function, so as to track any operation over time and/or increase verbosity.
Bulk backup operations can be performed using a simple text file, formatted in a list.
Is possible create, by means of openssh operations, a configuration and copy them into the machines impacted by the backup without causing the machine to request the password (key exchange).
For all this, <a href="https://butterfly-backup.readthedocs.io/en/latest/">Read the Docs</a> or run help:</p>




<h2 id="one-more-thing">One more thing</h2>
<p>The name butterfly, is born precisely because agent-less; like a butterfly takes the pollen from a flower and brings it elsewhere.
A backup or restore is performed without any iteration responsibility on the part of the final machine.
The performances are not altered.
While all the operations of Butterfly Backup are carried out, the impacted machine can continuously work with <em>peace of mind</em>.</p>

<h2 id="follow-the-project">Follow the project</h2>
<p>See the new features in development through this <a href="https://tree.taiga.io/project/matteoguadrini-butterfly-backup/kanban">link</a>.</p>

<h2 id="open-source">Open source</h2>
<p>Butterfly Backup is a open source project. Any contribute, It‚Äôs welcome.</p>

<p><strong>A great thanks</strong>.</p>

<p>For donations, press this</p>

<p>For me</p>

<p><a href="https://www.paypal.me/guos"><img src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" alt="paypal"></a></p>

<p>For <a href="http://www.telethon.it/">Telethon</a></p>

<p>The Telethon Foundation is a non-profit organization recognized by the Ministry of University and Scientific and Technological Research.
They were born in 1990 to respond to the appeal of patients suffering from rare diseases.
Come today, we are organized to dare to listen to them and answers, every day of the year.</p>

<p><a href="https://www.telethon.it/sostienici/dona-ora"> <img src="https://www.telethon.it/dev/_nuxt/img/c6d474e.svg" alt="Telethon" title="Telethon" width="200" height="104"> </a></p>

<p><a href="https://www.ioadottoilfuturo.it/">Adopt the future</a></p>


      </section>
      
    </div></div>]]>
            </description>
            <link>https://matteoguadrini.github.io/Butterfly-Backup/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26195250</guid>
            <pubDate>Fri, 19 Feb 2021 17:11:16 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Higher Kinded Types in Rust]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26195079">thread link</a>) | @ibraheemdev
<br/>
February 19, 2021 | https://rustyyato.github.io/type/system,type/families/2021/02/15/Type-Families-1.html | <a href="https://web.archive.org/web/*/https://rustyyato.github.io/type/system,type/families/2021/02/15/Type-Families-1.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>Do you want to use Higher Kinded Types (<code>HKT</code>) in Rust? Are you tired of waiting for <code>GAT</code>? Well, this is the place to be.</p>

<p>It‚Äôs easiest to understand <code>HKT</code> by analogy. In programming we have many different tiers of abstractions. Starting at the bottom we have <code>term</code>s (aka values) like <code>0</code>, <code>true</code>, <code>"hello world!"</code>. If we want to work with a lot of <code>term</code>s that share a property, we use <code>type</code>s. For example, if we want to work with ‚Ä¶</p>

<ul>
  <li>32-bit integer, we use <code>i32</code></li>
  <li>utf-8 strings, we use <code>&amp;str</code> or <code>String</code></li>
</ul>

<p>We generally use snake case to refer to <code>term</code>s generically like <code>x</code>, <code>im_an_integer</code>, and <code>database_connection</code>. We use functions to operate on these generic values.</p>

<div><div><pre><code><span>fn</span> <span>add_one</span><span>(</span>
    <span>// a generic 32-bit integer</span>
    <span>x</span><span>:</span> <span>i32</span>
<span>)</span> <span>-&gt;</span> <span>i32</span> <span>{</span> <span>x</span> <span>+</span> <span>1</span> <span>}</span>
</code></pre></div></div>

<p>Moving up the abstraction tiers, we come to <code>type</code>s. For example: <code>String</code>, <code>i32</code>, or <code>bool</code>. If we want to work with a lot of <code>type</code>s that share a property, we use <code>trait</code>s and generics. For example, if we want to work with ‚Ä¶</p>

<ul>
  <li>types that can be debug printed, we use <code>std::fmt::Debug</code></li>
  <li>types that can be iterated, we use <code>Iterator</code></li>
</ul>

<p>We generally use pascal case to refer to <code>types</code>s generically like <code>T</code>, <code>Self</code>, and <code>This</code>. We use generic functions to work with these generic types.</p>

<div><div><pre><code><span>fn</span> <span>print</span><span>&lt;</span><span>T</span><span>:</span> <span>Debug</span><span>&gt;</span><span>(</span><span>x</span><span>:</span> <span>T</span><span>)</span> <span>{</span>
    <span>println!</span><span>(</span><span>"{:?}"</span><span>,</span> <span>x</span><span>);</span>
<span>}</span>
</code></pre></div></div>

<p>Moving up the abstraction tiers again, we come to <code>kind</code>s. For example: <code>Option</code>, <code>Result</code>, or <code>Vec</code>. Wait what. Let‚Äôs take a step back. Before I mentioned that <code>String</code>, <code>i32</code>, and <code>bool</code> are types. We also have more types that we can use, generic types like <code>Option&lt;i32&gt;</code> or <code>Result&lt;String, String&gt;</code>. What if you want to generalize over these types? Something of the form <code>T&lt;U&gt;</code>. That‚Äôs where we get to kinds. For example:</p>

<ul>
  <li><code>i32</code> has the kind <code>Type</code></li>
  <li><code>Option&lt;i32&gt;</code> has the kind <code>Type</code></li>
  <li><code>'a</code> has the kind <code>Lifetime</code></li>
  <li><code>Option</code> has the kind <code>Type -&gt; Type</code>
    <ul>
      <li>W H A T, let‚Äôs stop and explain what‚Äôs going on here</li>
    </ul>
  </li>
</ul>

<p>Generic types can be represented as a function from kinds to kinds. For example, <code>Option</code> is a function that takes a <code>Type</code> and produces a <code>Type</code> (hence <code>Type -&gt; Type</code>). Let‚Äôs see some more examples:</p>

<ul>
  <li><code>Result</code> has the kind <code>Type -&gt; Type -&gt; Type</code>
    <ul>
      <li>I‚Äôll use this notation because that‚Äôs how it‚Äôs done in the literature</li>
      <li>Note: this is equivalent to <code>(Type, Type) -&gt; Type</code> (you can always transform a function that take a tuple of arguments into one that takes multiple arguments, and vice versa)</li>
    </ul>
  </li>
  <li>references have a kind <code>Lifetime -&gt; Type -&gt; Type</code>
    <ul>
      <li><code>&amp;'a T</code>, one lifetime and one type parameter :)</li>
    </ul>
  </li>
  <li>arrays have the kind <code>Type -&gt; usize -&gt; Type</code>
    <ul>
      <li><code>[T; len]</code>, one type and one <code>usize</code> <code>term</code> (getting close to dependent types, something we won‚Äôt touch in this post)</li>
    </ul>
  </li>
</ul>

<p>With this notion of <code>kind</code>s we are now well equipped to generalize over generics. Just one cinch, <code>Rust</code> doesn‚Äôt know about <code>kind</code>s! So how do we generalize over generics if we can‚Äôt even express the fundamental building blocks.</p>



<p>The key insight is that we can represent <code>kind</code>s as a system of types and traits. For example, here‚Äôs how to handle <code>Type -&gt; Type</code> kinds.</p>

<p>Note: I‚Äôll show how <code>Option</code> fits in, and introduce <code>Result&lt;_, E&gt;</code>, but I‚Äôll leave the implementation of <code>Vec</code> to you. It‚Äôs an interesting puzzle if you are inclined</p>

<div><div><pre><code><span>// `Option` has the kind `Type -&gt; Type`,</span>
<span>// we'll represent it with `OptionFamily`</span>
<span>struct</span> <span>OptionFamily</span><span>;</span>
<span>// `Result` has the kind `Type -&gt; Type -&gt; Type`,</span>
<span>// so we fill in one of the types with a concrete one</span>
<span>struct</span> <span>ResultFamily</span><span>&lt;</span><span>E</span><span>&gt;</span><span>(</span><span>PhantomData</span><span>&lt;</span><span>E</span><span>&gt;</span><span>);</span>

<span>// I'll leave the implementation of `VecFamily` to you</span>

<span>// This trait represents the `kind` `Type -&gt; Type`</span>
<span>pub</span> <span>trait</span> <span>OneTypeParam</span><span>&lt;</span><span>A</span><span>&gt;</span> <span>{</span>
    <span>// This represents the output of the function `Type -&gt; Type`</span>
    <span>// for a specific argument `A`.</span>
    <span>type</span> <span>This</span><span>;</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>A</span><span>&gt;</span> <span>OneTypeParam</span><span>&lt;</span><span>A</span><span>&gt;</span> <span>for</span> <span>OptionFamily</span> <span>{</span>
    <span>// `OptionFamily` represents `Type -&gt; Type`,</span>
    <span>// so filling in the first argument means</span>
    <span>// `Option&lt;A&gt;`</span>
    <span>type</span> <span>This</span> <span>=</span> <span>Option</span><span>&lt;</span><span>A</span><span>&gt;</span><span>;</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>A</span><span>,</span> <span>E</span><span>&gt;</span> <span>OneTypeParam</span><span>&lt;</span><span>A</span><span>&gt;</span> <span>for</span> <span>ResultFamily</span><span>&lt;</span><span>E</span><span>&gt;</span> <span>{</span>
    <span>// note how all results in this family have `E` as the error type</span>
    <span>// This is similar to how currying works in functional languages</span>
    <span>type</span> <span>This</span> <span>=</span> <span>Result</span><span>&lt;</span><span>A</span><span>,</span> <span>E</span><span>&gt;</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Note how a <code>trait</code> can act as a function over types, so you can encode the idea <code>Type -&gt; Type</code> using a trait!</p>

<p>Let‚Äôs also introduce a type alias for ease of use.</p>

<div><div><pre><code><span>// Option&lt;A&gt; == This&lt;OptionFamily, A&gt;</span>
<span>pub</span> <span>type</span> <span>This</span><span>&lt;</span><span>T</span><span>,</span> <span>A</span><span>&gt;</span> <span>=</span> <span>&lt;</span><span>T</span> <span>as</span> <span>OneTypeParam</span><span>&lt;</span><span>A</span><span>&gt;&gt;</span><span>::</span><span>This</span><span>;</span>
</code></pre></div></div>

<p>Now we can replace all usage of <code>Option</code>, <code>Result&lt;_, E&gt;</code> with <code>OptionFamily</code> or <code>ResultFamily&lt;E&gt;</code>! From this we can build up abstractions that ‚Äúrequire‚Äù HKT. Let‚Äôs start with the simplest abstraction <code>Functor</code>. This is just any <code>Type -&gt; Type</code> that has a notion of mapping a value. Generally <code>Functor</code> represents a collection, but it can do much more than that (But I won‚Äôt dive into <code>Functor</code> in particular in this post).</p>

<div><div><pre><code><span>trait</span> <span>Functor</span><span>&lt;</span><span>A</span><span>,</span> <span>B</span><span>&gt;</span><span>:</span> <span>OneTypeParam</span><span>&lt;</span><span>A</span><span>&gt;</span> <span>+</span> <span>OneTypeParam</span><span>&lt;</span><span>B</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>map</span><span>&lt;</span><span>F</span><span>&gt;</span><span>(</span><span>self</span><span>,</span> <span>this</span><span>:</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>A</span><span>&gt;</span><span>,</span> <span>f</span><span>:</span> <span>F</span><span>)</span> <span>-&gt;</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>B</span><span>&gt;</span>
    <span>where</span>
        <span>F</span><span>:</span> <span>Fn</span><span>(</span><span>A</span><span>)</span> <span>-&gt;</span> <span>B</span> <span>+</span> <span>Copy</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>This is quite a lot, so let‚Äôs soak it in.</p>

<div><div><pre><code><span>OneTypeParam</span><span>&lt;</span><span>A</span><span>&gt;</span> <span>+</span> <span>OneTypeParam</span><span>&lt;</span><span>B</span><span>&gt;</span>
</code></pre></div></div>

<p>First, we require that our families can be used with either type. This allows you to restrict the families in some ways, for example for <code>HashSet</code>, only allow <code>T: Hash + Eq</code>. <code>A</code> will be the input type, and <code>B</code> will be the output type.</p>

<div><div><pre><code><span>fn</span> <span>map</span><span>&lt;</span><span>F</span><span>&gt;</span><span>(</span><span>self</span><span>,</span> <span>this</span><span>:</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>A</span><span>&gt;</span><span>,</span> <span>f</span><span>:</span> <span>F</span><span>)</span> <span>-&gt;</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>B</span><span>&gt;</span>
<span>where</span>
    <span>F</span><span>:</span> <span>Fn</span><span>(</span><span>A</span><span>)</span> <span>-&gt;</span> <span>B</span> <span>+</span> <span>Copy</span><span>;</span>
</code></pre></div></div>

<p>Next we have this monstrous function! This will be easier to explain if we have a concrete family.</p>

<div><div><pre><code><span>/// for `OptionFamily`</span>
<span>fn</span> <span>map</span><span>&lt;</span><span>F</span><span>&gt;</span><span>(</span><span>self</span><span>,</span> <span>this</span><span>:</span> <span>Option</span><span>&lt;</span><span>A</span><span>&gt;</span><span>,</span> <span>f</span><span>:</span> <span>F</span><span>)</span> <span>-&gt;</span> <span>Option</span><span>&lt;</span><span>B</span><span>&gt;</span>
<span>where</span>
    <span>F</span><span>:</span> <span>Fn</span><span>(</span><span>A</span><span>)</span> <span>-&gt;</span> <span>B</span> <span>+</span> <span>Copy</span><span>;</span>
</code></pre></div></div>

<p>So this is just the same as the ordinary map in <code>Option</code>, except it requires <code>Fn</code>, instead of <code>FnOnce</code>. We could generalize over <code>Fn</code> and <code>FnOnce</code> if Rust had associated traits, but alas we don‚Äôt, so we‚Äôll have to make do with <code>Fn</code> (I‚Äôll leave it to you to figure out a nice way to abstract over <code>Fn</code>, <code>FnMut</code> and <code>FnOnce</code>). All we‚Äôve done is generalize it to <em>any</em> family, not just <code>Option</code>.</p>

<p>The <code>Copy</code> bound is nice for things like <code>Vec</code> where you need to apply the function multiple times. You can convert any <code>Fn</code> to a <code>Fn + Copy</code> because <code>&amp;_</code> implement <code>Fn</code> and are <code>Copy</code>.</p>

<p>So all together again:</p>

<div><div><pre><code><span>trait</span> <span>Functor</span><span>&lt;</span><span>A</span><span>,</span> <span>B</span><span>&gt;</span><span>:</span> <span>OneTypeParam</span><span>&lt;</span><span>A</span><span>&gt;</span> <span>+</span> <span>OneTypeParam</span><span>&lt;</span><span>B</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>map</span><span>&lt;</span><span>F</span><span>&gt;</span><span>(</span><span>self</span><span>,</span> <span>this</span><span>:</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>A</span><span>&gt;</span><span>,</span> <span>f</span><span>:</span> <span>F</span><span>)</span> <span>-&gt;</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>B</span><span>&gt;</span>
    <span>where</span>
        <span>F</span><span>:</span> <span>Fn</span><span>(</span><span>A</span><span>)</span> <span>-&gt;</span> <span>B</span> <span>+</span> <span>Copy</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p><code>Functor</code> just specifies a mapping operation. We can implement this rather easily.</p>

<div><div><pre><code><span>impl</span><span>&lt;</span><span>A</span><span>,</span> <span>B</span><span>&gt;</span> <span>Functor</span><span>&lt;</span><span>A</span><span>,</span> <span>B</span><span>&gt;</span> <span>for</span> <span>OptionFamily</span> <span>{</span>
    <span>fn</span> <span>map</span><span>&lt;</span><span>F</span><span>&gt;</span><span>(</span><span>self</span><span>,</span> <span>this</span><span>:</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>A</span><span>&gt;</span><span>,</span> <span>f</span><span>:</span> <span>F</span><span>)</span> <span>-&gt;</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>B</span><span>&gt;</span>
    <span>where</span>
        <span>F</span><span>:</span> <span>Fn</span><span>(</span><span>A</span><span>)</span> <span>-&gt;</span> <span>B</span> <span>+</span> <span>Copy</span> <span>{</span>
        <span>// I'm not cheating!</span>
        <span>this</span><span>.map</span><span>(</span><span>f</span><span>)</span>
    <span>}</span>
<span>}</span>

<span>// try out `VecFamily`, it doesn't need to be optimal, it just needs to work!</span>
</code></pre></div></div>

<p>Ok, but that‚Äôs boring, I hear you say. What about <code>Monad</code>? Typically it‚Äôs defined by it‚Äôs <code>bind</code> operation (We‚Äôll skip <code>Applicative</code> here, try it out yourself!). I‚Äôm not going to explain how <code>Monad</code> works, or why you would want it, just how to implement it.</p>

<div><div><pre><code><span>trait</span> <span>Monad</span><span>&lt;</span><span>A</span><span>,</span> <span>B</span><span>&gt;</span><span>:</span> <span>Functor</span><span>&lt;</span><span>A</span><span>,</span> <span>B</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>bind</span><span>&lt;</span><span>F</span><span>&gt;</span><span>(</span><span>self</span><span>,</span> <span>a</span><span>:</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>A</span><span>&gt;</span><span>,</span> <span>f</span><span>:</span> <span>F</span><span>)</span> <span>-&gt;</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>B</span><span>&gt;</span>
    <span>where</span>
        <span>F</span><span>:</span> <span>Fn</span><span>(</span><span>A</span><span>)</span> <span>-&gt;</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>B</span><span>&gt;</span> <span>+</span> <span>Copy</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Looks the same as <code>Functor</code> to me! ‚Ä¶ Wait, the bound on <code>F</code> looks funky. Let‚Äôs dig in to the <code>OptionFamily</code> implementation again, maybe that will clear things up.</p>

<div><div><pre><code><span>/// for `OptionFamily`</span>
<span>fn</span> <span>bind</span><span>&lt;</span><span>F</span><span>&gt;</span><span>(</span><span>self</span><span>,</span> <span>a</span><span>:</span> <span>Option</span><span>&lt;</span><span>A</span><span>&gt;</span><span>,</span> <span>f</span><span>:</span> <span>F</span><span>)</span> <span>-&gt;</span> <span>Option</span><span>&lt;</span><span>B</span><span>&gt;</span>
<span>where</span>
    <span>F</span><span>:</span> <span>Fn</span><span>(</span><span>A</span><span>)</span> <span>-&gt;</span> <span>Option</span><span>&lt;</span><span>B</span><span>&gt;</span> <span>+</span> <span>Copy</span><span>;</span>
</code></pre></div></div>

<p>This looks very familiar, ‚Ä¶ where have I seen this before? <code>Option::and_then</code> is that you?</p>

<div><div><pre><code><span>impl</span><span>&lt;</span><span>A</span><span>,</span> <span>B</span><span>&gt;</span> <span>Monad</span><span>&lt;</span><span>A</span><span>,</span> <span>B</span><span>&gt;</span> <span>for</span> <span>OptionFamily</span> <span>{</span>
    <span>fn</span> <span>bind</span><span>&lt;</span><span>F</span><span>&gt;</span><span>(</span><span>self</span><span>,</span> <span>this</span><span>:</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>A</span><span>&gt;</span><span>,</span> <span>f</span><span>:</span> <span>F</span><span>)</span> <span>-&gt;</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>B</span><span>&gt;</span>
    <span>where</span>
        <span>F</span><span>:</span> <span>Fn</span><span>(</span><span>A</span><span>)</span> <span>-&gt;</span> <span>This</span><span>&lt;</span><span>Self</span><span>,</span> <span>B</span><span>&gt;</span> <span>+</span> <span>Copy</span> <span>{</span>
        <span>// It fits üòâ</span>
        <span>this</span><span>.and_then</span><span>(</span><span>f</span><span>)</span>
    <span>}</span>
<span>}</span>

<span>// try out `VecFamily`, it doesn't need to be optimal, it just needs to work!</span>
</code></pre></div></div>

<p>In this way you can implement most, if not all <code>HKT</code> abstractions in stable Rust. However the ergonomics of these abstractions are downright abysmal. Bounds, bounds, bounds <em>everywhere</em>. We saw this a little in <code>Functor&lt;A, B&gt;</code>, we needed <code>OneTypeParam&lt;A&gt; + OneTypeParam&lt;B&gt;</code> (why does family need to be repeated!). Hopefully we can solve this on nightly, find out next time ‚Ä¶</p>

<p>If you can‚Äôt wait and must know more, check out <a href="https://github.com/rustyyato/type-families"><code>type-families</code></a>, an experimental crate that implements the ideas outlined in this blog post.</p>

<p>You can discuss this on reddit <a href="https://www.reddit.com/r/rust/comments/ll9un4/generalizing_over_generics_in_rust_part_1_aka/">here</a> or the users.rust-lang.org <a href="https://users.rust-lang.org/t/generalizing-over-generics-in-rust-part-1-aka-higher-kinded-types-in-rust/55716/2">here</a></p>

<p>Credits:</p>

<p>Thanks /u/CalligrapherMinute77 for requesting this post
Thanks /u/IshKebab for helping me reword the introduction to make things more clear</p>

  </div>
</article>

      </div>
    </div></div>]]>
            </description>
            <link>https://rustyyato.github.io/type/system,type/families/2021/02/15/Type-Families-1.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26195079</guid>
            <pubDate>Fri, 19 Feb 2021 16:56:34 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Serverless browser automation with AWS Lambda and Puppeteer]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26195005">thread link</a>) | @EntICOnc
<br/>
February 19, 2021 | https://acloudguru.com/blog/engineering/serverless-browser-automation-with-aws-lambda-and-puppeteer | <a href="https://web.archive.org/web/*/https://acloudguru.com/blog/engineering/serverless-browser-automation-with-aws-lambda-and-puppeteer">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div data-id="8a920a5" data-element_type="widget" data-widget_type="theme-post-content.default"><div><p>Manipulating a web browser environment with an API provides a wide range of automation capabilities for developers. It allows you to generate PDF files, screenshot webpages, or run health checks on a website, all from code. It can also enable you to automate form submissions, build UI tests, or diagnose performance issues. <a href="https://chromium.googlesource.com/chromium/src/+/lkgr/headless/README.md">Headless Chromium</a> is a popular package for operating a browser programmatically. Whether you are load testing a website or periodically fetching content, this can be configured with minimal code.&nbsp;</p><p>You can run a headless browser on your local development machine or a remote server. However, many typical browser automation tasks are a good fit for <a href="https://aws.amazon.com/lambda/">AWS Lambda</a>. You can configure a Lambda function to start on a schedule, or in response to an event. You can also configure Lambda to scale up for load testing operations, making it a cost effective alternative to managing a fleet of instances.</p><p>In this blog post, I show how you can deploy a browser automation task to Lambda. This example uses the <a href="https://aws.amazon.com/serverless/sam/">AWS Serverless Application Model</a> (AWS SAM) to simplify the deployment of cloud resources. You can download the code for this blog post from the companion <a href="https://github.com/aws-samples/scheduled-website-screenshot-app">GitHub repository</a>. To deploy to your AWS account, follow the instructions in the <a href="https://github.com/aws-samples/scheduled-website-screenshot-app/blob/main/README.md">README file</a>.</p><h2 id="h-overview">Overview</h2><p>In the example application, a Lambda function is invoked every 15 minutes to take a screenshot of a webpage and save the image to an S3 bucket. The architecture looks like this:</p><figure><img loading="lazy" width="622" height="272" src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image001.png" alt="" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image001.png 622w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image001.png 300w" sizes="(max-width: 622px) 100vw, 622px"></figure><ol><li>An <a href="https://aws.amazon.com/eventbridge/">Amazon EventBridge</a> rule invokes the Lambda function using a <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/scheduled-events.html">schedule expression</a>.</li><li>The Lambda function uses Chromium to load the target webpage. Once the page is loaded and rendered, it takes a screenshot.</li><li>The screenshot is saved to an <a href="https://aws.amazon.com/s3/">Amazon S3</a> bucket.</li></ol><h2 id="h-how-the-code-works">How the code works</h2><p>This Node.js example uses an npm package called <a href="https://github.com/puppeteer/puppeteer">Puppeteer</a>, which exposes a high-level API to control the Chromium browser. A snippet of the <a href="https://github.com/aws-samples/scheduled-website-screenshot-app/blob/main/src/app.js">Lambda function</a> shows how this works:</p><div><div><div><div><pre>browser = await chromium.puppeteer.launch({
 &nbsp; &nbsp; args: chromium.args,
     defaultViewport: chromium.defaultViewport,
 &nbsp;   executablePath: await chromium.executablePath,
     headless: chromium.headless,
     ignoreHTTPSErrors: true,
});

let page = await browser.newPage()
await page.goto(pageURL)
const buffer = await page.screenshot()</pre></div></div></div></div><p>This uses JavaScript <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Async_await">async/await</a> syntax to avoid callbacks and use sequential code flow. Once the browser object is defined, the code instructs Chromium (via Puppeteer) to fetch the webpage. After the page is loaded and the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction">DOM</a> is rendered in the headless Chromium instance, it stores a screenshot of the page in a buffer variable. Finally, the image is written to the S3 bucket:</p><pre>const&nbsp;s3result&nbsp;=&nbsp;await&nbsp;s3
 &nbsp;&nbsp;.upload({
 &nbsp;&nbsp;   Bucket:&nbsp;process.env.S3_BUCKET,
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key:&nbsp;`${Date.now()}.png`,
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Body:&nbsp;buffer,
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ContentType:&nbsp;'image/png',
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ACL:&nbsp;'public-read'
 &nbsp;&nbsp;&nbsp;})
 &nbsp;&nbsp;&nbsp;.promise()

console.log('S3 image URL:', s3result.Location) </pre><p>This uses the <a href="https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html#upload-property">S3 upload method</a> in the <a href="https://aws.amazon.com/sdk-for-javascript/">AWS SDK for JavaScript</a>. It defines the bucket and key, sets the content type to PNG, and then configures the access control list (ACL) so the object is publicly viewable. Finally, it logs the public URL of the stored object.</p><h2 id="h-packaging-puppeteer-for-the-lambda-function">Packaging Puppeteer for the Lambda function</h2><p>Lambda allows you to package dependencies together with your code as a zip file. The deployment package can be up to <a href="https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html">250 MB (unzipped)</a> or 50 MB (zipped, for direct upload). For larger packages, it‚Äôs recommended that you use the new <a href="https://acloudguru.com/blog/engineering/packaging-aws-lambda-functions-as-container-images">container packaging format</a> for Lambda functions, which allows packages of up to 10 GB.&nbsp;</p><p>If you use a tool like AWS SAM or <a href="https://www.serverless.com/">Serverless framework</a>, the packages are created on your development machine, then zipped and uploaded to the Lambda service. At runtime, these files are unzipped in the Lambda execution environment when the function is run. These tools can simplify this packaging process and help streamline your deployments.</p><p>However, when you use a dependency that contains a binary, you must ensure that you package a version of the binary that is compatible with the operating system used by Lambda. The Puppeteer package contains an entire Chromium browser bundled into the deployment. Since the browser relies on binaries, npm installs the binary that matches the operating system of your local development machine. However, Lambda requires the binary that matches its underlying operating system, which is Amazon Linux 2.</p><p>To help with this, many popular packages have been converted into <a href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html">Lambda layers</a> by the community. You can define up to five layers per Lambda function and these are copied into your deployment package when you create or update a function. For Chromium, this makes it easier to run one binary version in development and use another binary version at runtime. Learn more about <a href="https://aws.amazon.com/blogs/compute/using-lambda-layers-to-simplify-your-development-process/">creating and using Lambda layers</a> to simplify your development process.</p><h2 id="h-using-a-community-maintained-lambda-layer">Using a community-maintained Lambda layer</h2><p>One developer has packaged a <a href="https://github.com/alixaxel/chrome-aws-lambda">Chromium binary for AWS Lambda</a> and published this to GitHub. You can install this with Puppeteer in your Lambda function by including the libraries in package.json. You can also bundle both with an existing public Lambda layer. <a href="https://github.com/shelfio/chrome-aws-lambda-layer">This GitHub repo</a> frequently publishes new versions of the <em>chrome-aws-lambda</em> package, which you can include directly in your Lambda function.</p><p>Layers are only available in the AWS Region where they are published. The maintainers of this public repo have published this layer to 16 Regions and provided layer ARNs in the <a href="https://github.com/shelfio/chrome-aws-lambda-layer/blob/master/readme.md">README file</a>. These ARNs are public and you can include in any Lambda function in those Regions in any AWS account.&nbsp;</p><p>These are many popular libraries that have been bundled into Lambda layers by the community. <a href="https://github.com/mthenw/awesome-layers">This GitHub repo</a> aggregates layers for commonly used utilities like GeoIP, MySQL, OpenSSL, Pandas, scikit-learn, and many others. To use these in your Lambda functions from a compatible runtime, you only need to include the layer ARN in a supported Region.</p><h2 id="h-understanding-the-aws-sam-template">Understanding the AWS SAM template</h2><p>The Lambda function in this example could have been defined directly in the AWS Management Console. However, by using AWS SAM, you can define the same infrastructure as code. This helps create repeatable deployments quickly and reduces human error from clicking around the console.</p><p>The <a href="https://github.com/aws-samples/scheduled-website-screenshot-app/blob/main/template.yaml">AWS SAM template</a> defines all the AW resources used by the application. First, it declares an S3 bucket:</p><pre>&nbsp; S3Bucket:
    Type: AWS::S3::Bucket &nbsp;</pre><p>Next, the template defines the Lambda function and where the code can be found. Since it runs an entire browser within the function, the memory is set to 4096 MB. The timeout is configured to 15 seconds to ensure that the function ends if the target webpage is unresponsive.&nbsp;</p><pre>SnapshotFunction:
 &nbsp; &nbsp; Type: AWS::Serverless::Function
 &nbsp; &nbsp; Description: Invoked by EventBridge scheduled rule
 &nbsp; &nbsp; Properties:
 &nbsp; &nbsp; &nbsp; CodeUri: src/
 &nbsp; &nbsp; &nbsp; Handler: app.handler
 &nbsp; &nbsp; &nbsp; Runtime: nodejs12.x
 &nbsp; &nbsp; &nbsp; Timeout: 15
 &nbsp; &nbsp; &nbsp; MemorySize: 4096 </pre><p>The template includes a reference to the publicly available Chromium layer and substitutes the Region code at deployment time. Providing that the example is deployed in one of those 16 Regions where the layer is available, the layer ARN is valid:</p><pre>Layers:
  - !Sub 'arn:aws:lambda:${AWS::Region}:764866452798:layer:chrome-aws-lambda:22'</pre><p>Environment variables are used to set the target website URL and define the bucket name to store the image. Finally, since the function only writes data to S3, it uses an AWS SAM <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-policy-templates.html">policy template</a> to provide write permissions to the single bucket. This follows the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#grant-least-privilege">principle of least privilege</a>:</p><pre>Environment:
 &nbsp;Variables:
 &nbsp; TARGET_URL: 'https://serverlessland.com'
 &nbsp; S3_BUCKET: !Ref S3Bucket
 Policies:
 &nbsp; - S3WritePolicy:
 &nbsp; &nbsp; &nbsp; BucketName: !Ref S3Bucket </pre><p>Lambda functions are invoked in response to events. In this case, the function runs at a timed interval, which is managed by EventBridge. Using a schedule expression, the template configures the function to run every 15 minutes:</p><pre>Events:
 &nbsp;CheckWebsiteScheduledEvent:
 &nbsp; &nbsp;Type: Schedule
 &nbsp; &nbsp;Properties:
 &nbsp; &nbsp; &nbsp;Schedule: rate(15 minutes) </pre><p>Anytime you make changes to the Lambda function or the resource in this template, run <em>sam deploy</em> again to deploy the new version to the AWS Cloud. The AWS SAM CLI detects the differences between versions and deploys the new code and resources automatically.&nbsp;</p><h2 id="h-testing-the-function">Testing the function</h2><p>After deployment the example application, navigate to the <a href="https://console.aws.amazon.com/lambda/home">Lambda console</a>. Open <em>SnapshotFunction</em> deployed by AWS SAM. The function is invoked automatically every 15 minutes but you can trigger the function by choosing <em>Test</em>:</p><figure><img loading="lazy" width="1008" height="1001" src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image002.png" alt="" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image002.png 1008w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image002.png 300w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image002.png 150w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image002.png 768w" sizes="(max-width: 1008px) 100vw, 1008px"></figure><p>The <em>Log output</em> contains details of the function duration and the public URL of the image that is generated and stored in the S3 bucket. Navigate to this URL in a browser to view the screenshot:</p><figure><img loading="lazy" width="874" height="542" src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image004.png" alt="" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image004.png 874w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image004.png 300w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image004.png 768w" sizes="(max-width: 874px) 100vw, 874px"></figure><p>After the function has been deployed for a few hours, it has been invoked multiple times by the scheduled event. You can monitor its performance using <a href="https://aws.amazon.com/cloudwatch/">Amazon CloudWatch</a> metric. From the Lambda function, choose <em>Monitoring</em> to see the number of invocations, average duration, and any errors:</p><figure><img loading="lazy" width="1122" height="790" src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image006.png" alt="" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image006.png 1122w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image006.png 300w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image006.png 1024w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image006.png 768w" sizes="(max-width: 1122px) 100vw, 1122px"></figure><p>From the <a href="https://s3.console.aws.amazon.com/s3/buckets/">S3 console</a>, open the S3 bucket created by the AWS SAM deployment to see the date-stamped objects created by each Lambda invocation:</p><figure><img loading="lazy" width="985" height="686" src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image008.png" alt="" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image008.png 985w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image008.png 300w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/02/image008.png 768w" sizes="(max-width: 985px) 100vw, 985px"></figure><h2 id="h-conclusion">Conclusion</h2><p>Programmatically controlling a web browser enables you to automate many useful tasks with code. For many of these, you can use Lambda to minimize infrastructure overhead and simplify scaling. This blog post shows how to deploy an example application that uses a headless browser to take periodic screenshots of a webpage.</p><p>For commonly used libraries or packages with operating-system specific binaries, Lambda layers can help simplify deployment. Many libraries have publicly maintained layers you can include in your Lambda functions. With infrastructure as code tools like AWS SAM, you can define your code and layers together in YAML, to help create repeatable deployments and accelerate development.</p><p>For more serverless learning resources, visit <a href="https://serverlessland.com/">Serverless Land</a>.</p></div></div></div>]]>
            </description>
            <link>https://acloudguru.com/blog/engineering/serverless-browser-automation-with-aws-lambda-and-puppeteer</link>
            <guid isPermaLink="false">hacker-news-small-sites-26195005</guid>
            <pubDate>Fri, 19 Feb 2021 16:50:31 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[What on Earth is this Encryption Scheme?]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26194999">thread link</a>) | @LinuxBender
<br/>
February 19, 2021 | https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/ | <a href="https://web.archive.org/web/*/https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div itemprop="articleBody" id="content"><p>I have taken a couple terabytes of photos over the years, and have a mild phobia of deleting data, so I keep my photos on a <a href="https://www.synology.com/en-global">Synology DiskStation NAS</a>. I‚Äôve got all the files on the thing:</p><ul><li>backed up to the cloud</li><li>encrypted,</li></ul><p>because back in 2016, my <a href="https://www.instagram.com/p/BMpgY9zAGbD/">apartment was broken into and thieves took all the electronics</a>. I‚Äôve been slightly paranoid ever since.</p><p>The Synology NAS generally works pretty well, but the interface for decrypting a drive after booting is <em>extremely</em> painful. It‚Äôs about 10 clicks, a username, two different passwords, and a UI that is kinda wonky (it‚Äôs a desktop in a web browser)? Here‚Äôs a screengrab:</p><figure><video alt="Unlocking an encrypted drive in the Synology DiskStation UI" src="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/decrypt.mp4" width="588" muted="" autoplay="" loop="" playsinline=""></video><figcaption><p>22 seconds is my personal speed record.</p></figcaption></figure><p>There are alternative solutions to this ‚Äì you can set it up so that it <a href="https://www.synology.com/en-au/knowledgebase/DSM/tutorial/File_Sharing/How_to_encrypt_and_decrypt_shared_folders_on_my_Synology_NAS#t4_1">reads the encryption key from a USB disk on startup, for example</a> ‚Äì but, if I‚Äôm worried about the whole thing being stolen, it‚Äôs not a good idea to leave the encryption keys plugged into the thing, and it‚Äôs also not a nice UX to find and plug in a USB before turning the thing on.</p><p>This‚Ä¶ seems kinda silly to me, and something that should be solvable with ‚ú® <em>technology</em> ‚ú®. I‚Äôm only ever accessing this from one computer, for example, and every modern operating system has a good credential storage system (think <a href="https://support.apple.com/guide/keychain-access/what-is-keychain-access-kyca1083/mac"><em>Keychain Access</em></a> on OSX or <a href="https://support.microsoft.com/en-us/windows/accessing-credential-manager-1b5c916a-6a16-889f-8581-fc16e8165ac0"><em>Credential Manager</em></a> on Windows 10). So, maybe my computer could take care of supplying encryption keys to the DiskStation!</p><p>I went looking for options, and discovered that the DiskStation Software has a <a href="https://global.download.synology.com/download/Document/Software/DeveloperGuide/Package/FileStation/All/enu/Synology_File_Station_API_Guide.pdf">publicly-documented web API (pdf)</a>. At least, a <em>mostly</em> publicly documented web API ‚Äì there‚Äôs no documentation for the methods to mount and unmount encrypted shares.</p><p>That web API is <em>also</em> used by the desktop software though! So it should theoretically be possible to use <a href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_are_browser_developer_tools">browser devtools</a> to see exactly <em>what</em> is being sent to the DiskStation. ü§î</p><p>So, I clicked on all the right things in the Web UI, got to the bit where you type in the password, opened the devtools to the ‚ÄúNetwork Requests‚Äù tab, typed in <code>abc123</code> as my password, hit ‚Äúsend‚Äù and then watched for the requests:</p><figure><img src="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/encryption-dot-cgi.png" alt="Firefox devtools screenshot, showing a request to an ominously-named 'encryption.cgi'"><figcaption><p>hmmmmmmmmmmm</p></figcaption></figure><p>Hmmm, that <code>encryption.cgi</code> looks a little ominous. I wonder what‚Äôs in it?</p><figure><img src="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/public-key.png" alt="Firefox devtools screenshot, showing huge blob of base16-encoded public-key"><figcaption><p>Yep, looks like encryption, alright</p></figcaption></figure><p>Ok, a public key. And then the web interface loads a spinner, and makes a request to <code>entry.cgi</code>. Let‚Äôs take a look at the contents of that request:</p><figure><img src="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/ciphertext.png" alt="A devtools screenshot, showing a jumbled blob of base64-encoded data with the phrases 'rsa' and 'aes' sprinkled throughout."><figcaption><p>HMMMMMMMMMMMMMMMM</p></figcaption></figure><p>Ok, so if we want to send a magic request to mount the encrypted share, it‚Äôs not going to be enough to supply the encryption password; we‚Äôre also going to need to figure out how to <em>correctly</em> supply it ‚Äì how to <em>encrypt</em> the encryption password, so to speak.</p><h2 id="so-what-is-this-crypto-system">So, what is this crypto system?</h2><p>Right. Here‚Äôs a high-level overview:</p><ul><li>First, we fetch the <code>public_key</code> from the server. That‚Äôs the call to the <code>encryption.cgi</code> endpoint we saw earlier. This isn‚Äôt actually the entire public key, it‚Äôs only <em>part</em> of it. In fact, this is a 4096-bit integer, encoded in base-16. The <em>other</em> part of the public key is the number <code>0x10001 == 65537</code>, which is hardcoded into the JavaScript.</li><li>Then, we generate 501 bytes worth of random text from the charset <code>0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ~!@#$%^&amp;*()_+-/</code> (that‚Äôs 77 different possible characters; I have no idea why this set was chosen though!).</li><li>We encrypt that random text using our public key. The encryption method is <a href="https://tools.ietf.org/html/rfc3447#section-7.2">RSA with PKCS1.5 padding</a>.</li><li>We MD5-hash that random text a bunch of times with an 8-byte salt. The end result of this is 48 bytes which certainly <em>look</em> pretty random to the naked eye.</li><li>We split those 48 bytes into two components ‚Äì a 32-byte (== 256-bit) key, and a 16-byte initialisation vector.</li><li>Remember the password we typed in? Yeah, I‚Äôd forgotten about it too! But now, we <em>finally</em> take that password, and encrypt it with AES in Cipher Block Chaining (CBC) mode with PKCSv7 padding, using the 256-bit key and 16-byte IV we derived in the previous step.</li><li>We bundle the RSA ciphertext, the 8-byte salt, and the AES ciphertext together and ship them across to the DiskStation.</li></ul><p>Still with me? It‚Äôs ok if that didn‚Äôt all make loads of sense yet; we‚Äôll now go over the interesting bits more closely.</p><h3 id="symmetric--asymmetric-ciphers">Symmetric / Asymmetric Ciphers</h3><p>Fundamentally, we‚Äôre using two cryptographic algorithms in concert:</p><ul><li><strong>RSA</strong>: RSA is an <em>asymmetric</em> cryptographic algorithm. Asymmetric cryptographic systems have two <em>keys</em> ‚Äì a public key, which allows only for encryption of the data, and a private key, which allows for both encryption <em>and</em> decryption.</li><li><strong>AES</strong>: AES is a <em>symmetric</em> cryptographic algorithm. In symmetric cryptography, all parties have the same key, and that key allows you to both encrypt and decrypt.</li></ul><p>It seems weird that we‚Äôre using both of these at the same time, right? But both systems have weaknesses, and mixing them together is an attempt at minimising the disadvantages of both schemes.</p><p>The problem with <em>symmetric</em> crypto systems by themselves is that you need a way to get that one key to every party that needs it. But you can‚Äôt just <em>send</em> it to them, because you don‚Äôt have a secure channel yet! Your options are:</p><ul><li>Share the key over a different trusted channel beforehand, or</li><li>have both parties derive the same shared key (from e.g. some partial data that they negotiate over the wire beforehand).</li></ul><p>Asymmetric crypto doesn‚Äôt have this problem ‚Äì if you‚Äôre able to share a key that can only be used for encrypting and not for decrypting, then the decryption keys never have to leave the recipient machine. You can then encrypt some text, and nobody except for the recipient can decrypt it ‚Äì not even you! Put it on the internet, write it on a banner attached to the back of a propeller plane ‚Äì the message will only be readable by the intended recipient.</p><figure><img src="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/your-ciphertext-here.jpg" alt="A propeller plane with a banner reading 'your ciphertext here'"></figure><p>Asymmetric cryptography is <em>slow</em>, though, so doing it for lots of data is going to really hurt performance.</p><p>A common solution is to simply <em>make up</em> a symmetric key, perform some symmetric encryption using that key, then encrypt <em>that</em> key using asymmetric cryptography, and deliver both to the remote party. Then, the remote party can:</p><ul><li>First, perform asymmetric decryption to obtain the symmetric key</li><li>Then, use that symmetric key to decrypt the rest.</li></ul><p>That‚Äôs what <em>this</em> particular system is doing. ‚ú®</p><h3 id="a-quick-note-about-rsa">A quick note about RSA</h3><p>I don‚Äôt know much about how RSA works, but as part of researching this article I discovered that it‚Äôs pretty easy to implement badly, and <a href="https://blog.trailofbits.com/2019/07/08/fuck-rsa/">extremely difficult to implement well</a>.</p><figure><img src="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/rsa-correct.gif" alt="Two developers correctly implement RSA, 2010, colorised"><figcaption><p><a href="https://www.youtube.com/watch?v=vPwzHm6buB8">Two developers correctly implement RSA</a>, 2010, colorised</p></figcaption></figure><p>As software developers, we spend a lot of time shipping things once they get to a point of ‚Äúit looks like it works‚Äù. <strong>You can‚Äôt take that approach with cryptography</strong>, and because everything is so opaque, it‚Äôs a lot easier to declare that your implementation works without realising that it‚Äôs missing fundamentals. Like correctness, for example.</p><h3 id="lets-talk-about-random-keyslets-talk-about-you-and-me">Let‚Äôs talk about random keys<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup></h3><p>Recall that this algorithm is generating 501 random bytes from a 77-character set, and encrypting that with RSA. 501 seemed like an oddly specific number to me; here‚Äôs the specific set of circumstances that characterise <em>why</em> we‚Äôre generating a string of this length.</p><p>RSA is a <a href="https://en.wikipedia.org/wiki/Block_cipher"><em>block cipher</em></a>, which means it operates on distinct fixed-size blocks of input and produces fixed-size blocks of output. How big can each block be? Well, RSA public keys are made up of two numbers: a (very large) modulus <code>n</code>, and a much smaller exponent <code>e</code>. RSA is capable of encrypting any message that‚Äôs smaller than <code>n</code> if you convert it to a number. In our case, we said that our modulus was a seemingly-random 4096-bit integer ‚Äì that means (approximately) that we can encrypt 512-byte blocks.</p><p>There‚Äôs an important implication here: if you don‚Äôt have enough input for a block, you need to fill it up somehow. Normally this is called a <em>padding scheme</em><sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup> in block-based cryptography.</p><p>Now, the system on this NAS in particular uses <a href="https://tools.ietf.org/html/rfc3447#section-7.2.1">PKCS1-v1.5 padding</a>, which prepends the message (before encryption) with 3 bytes of headers <em>plus</em> a minimum of 8 bytes<sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup> of random garbage. That makes 11 bytes out of a 512 byte block, which means we‚Äôve got‚Ä¶ 501 bytes left for our message. ‚ú®</p><h3 id="lo-fi-key-derivation">Lo-fi key derivation</h3><p>So‚Ä¶ we‚Äôve got this 501-byte string, with each character being one of 77 possibilities, and we think we know <em>why</em> it was chosen to be 501 bytes long. But that‚Äôs not going to work for AES-encrypting the password:</p><ul><li>AES requires a key size of 128, 192, or 256 bits. That‚Äôs 16, 24, or 32 bytes respectively, but we‚Äôve got <em>lots</em> more than that.</li><li>We can‚Äôt, however, just take a subset of bytes from the text and go from there ‚Äì because they‚Äôre selected from a narrow subset of possible bytes (77 out of 255!), you‚Äôd be losing an <em>enormous</em> amount of entropy in the key, making the encrypted text about 44,000,000,000,000,000 times<sup id="fnref:5"><a href="#fn:5" role="doc-noteref">5</a></sup> easier to break.</li></ul><p>These constraints need to be managed. We can smooth over both by applying a <a href="https://en.wikipedia.org/wiki/Key_derivation_function">key derivation function</a>, based on repeated rounds of MD5 hashing and concatenating. Hash algorithms, in general, are good for this because they map input data to‚Ä¶ not random, but random-<em>looking</em> output data.</p><p>I like to think of hashing as ‚Äúentropy laundering‚Äù ‚Äì if you‚Äôve got 256 bits of entropy in a 16kB file, taking the first 256 bits will give you only 64 bits of entropy. If you hash the whole 16kB file, then the entropy goes back up to the maximum of the entropy in the file and the entropy provided by the hash algorithm. This works because hash algorithms are designed to exhibit an <a href="https://en.wikipedia.org/wiki/Avalanche_effect">avalanche effect</a>.</p><p>I do <em>not</em> have the tools or experience to evaluate whether this specific scheme is secure or not (this one seems esoteric, and the <a href="https://security.stackexchange.com/questions/19906/is-md5-considered-insecure">use of MD5 is scary</a>!)‚Ä¶ so let‚Äôs move briskly on.</p><h3 id="aes-encryption">AES-encryption</h3><p>Finally, after a bunch of outdated and somewhat esoteric primitives, we‚Äôre back to something that is <em>good</em> and <em>works</em> and <em>only slightly</em> a <a href="https://en.wiktionary.org/wiki/footgun">loaded footgun</a> and is <em>still recommended for widespread use!</em> It‚Äôs AES with a 256-bit key.</p><p>AES is our symmetric cipher. Like RSA, it operates on blocks of fixed length. <a href="https://crypto.stackexchange.com/questions/66314/whats-the-best-block-cipher-mode-of-operation-for-rsa/66321#66321">Unlike RSA</a>, these blocks can be chained together. The strategies to do this are called <a href="https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation">‚ÄúBlock cipher modes of operation‚Äù</a>, and AES implementations ship with a number of them. The problem is, this means you have access ‚Ä¶</p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/">https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/</a></em></p>]]>
            </description>
            <link>https://capnfabs.net/posts/wtf-encryption-scheme-synology-diskstation-nas/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26194999</guid>
            <pubDate>Fri, 19 Feb 2021 16:50:05 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Brave Browser leaks your Tor / Onion service requests through DNS]]>
            </title>
            <description>
<![CDATA[
Score 341 | Comments 84 (<a href="https://news.ycombinator.com/item?id=26194764">thread link</a>) | @todsacerdoti
<br/>
February 19, 2021 | https://ramble.pw/f/privacy/2387/brave-browser-leaks-your-tor-onion-service-requests-through | <a href="https://web.archive.org/web/*/https://ramble.pw/f/privacy/2387/brave-browser-leaks-your-tor-onion-service-requests-through">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
              <div lang="en" dir="ltr"><p>Edit: (Since this is gaining traction elsewhere.) I'm not trying to shit on Brave. I'm just wanting to help protect end-users who may use Brave for it's Tor feature to do stuff over Tor that should only be done with the actual Tor browser. If you're using Brave you probably use it because you expect a certain level of privacy/anonymity. Piping .onion requests through DNS where your ISP or DNS provider can see that <em>you</em> made a request for an .onion site defeats that purpose.</p>
<p>I'm also no NetSec expert but you don't have to be to replicate this. I'm just a dude with some websites and projects and I'm not certain I would have taken notice of this if it wasn't reported to me by a partner on another project who witnessed this behavior when monitoring his local requests leaving his network. He'll be doing his own write-up and is more equipped to discuss this in length than me.</p>
<hr><p>Testing out something that was noted a week or so ago, and wanting to replicate it for the purpose of this post.</p>
<p>Some of you know I'm working on an ad, tracker, and other BS blocking VPN service for an unrelated project to this site. Go to <a href="https://ramble.pw/f/incoghost">/f/incoghost</a> (<a href="https://incog.host/" rel="nofollow">website</a>) for more because I try to keep these things separated.</p>
<p>Anyhow, it was reported by a partner that Brave was leaking DNS requests for onion sites and I was able to confirm it at the time. Decided to spin up a VM with Brave and test with this site's Onion service (though it will do this for any .onion)</p>
<p>Example:</p>
<pre><code> Feb 18 12:02:25: query[A] rambleeeqrhty6s5jgefdfdtc6tfgg4jj6svr4jpgk4wjtg3qshwbaad.onion from 104.244.xx.xxx
</code></pre>
<p>What this entry shows (simply) is that the request made for the domain rambleeeqrhty6s5jgefdfdtc6tfgg4jj6svr4jpgk4wjtg3qshwbaad.onion made it to the DNS server and is tagged with the IP of the requester, which in this case is just the test / dev VPN. This shouldn't happen. There isn't any reason for Brave to attempt to resolve a .onion domain through traditional means as it would with a regular clearnet site.</p>
<p>This is especially worrisome for those of you who use Brave browser from your normal residential IP and (for whatever reason) use the Tor feature built into the browser to access Tor sites. Your ISP or DNS provider <em>will</em> know that a request made to a specific Tor site was made by <em>your</em> IP. With Brave, your ISP would know that you accessed <em>somesketchyonionsite.onion</em> .</p>
<p>TL;DR: If you're going to use Tor, use the Tor Browser and not Brave. The Tor browser itself doesn't leak these requests like Brave does.</p>
<hr><p>Edit: To clarify, the VPN service we're working on is no-logging but during this dev and testing period we're logging DNS requests while we work out the kinks in the blocklists. This has also allowed us to witness .onions being passed through which is a fault of Brave.</p>
<hr><p>Edit 2: Screenshot: <a href="https://images2.imgbox.com/98/46/1i084PbC_o.png" rel="nofollow">https://images2.imgbox.com/98/46/1i084PbC_o.png</a></p>
<p>That was me loading duckduckgo in a different container, with brave, while live fetching DNS requests made to the DNS server. I blurred out the non-onion requests. (Different VPN test location than in the above example so 209.x.x.x IP instead of the 104.x.x.x one in the original example.</p>
<hr><h3>EDIT 2: The mods of /r/privacy won't let this be posted. They say:</h3>
<blockquote>
<p>While we (vastly) prefer the Tor Browser over the Brave one, you'll need a better source than the one you found. Can you find something from a more widely recognized NetSec expert? Something along the lines of Bruce Schneier's blog or something at that level of credibility?</p>
</blockquote>
<p>and</p>
<blockquote>
<p>The problem with screenshots is that they can be faked, trivially. There are also a host of approaches that credible writers/reporters do in the NetSec space do before a line of text appears in print. It's this kind of journalism that we have to trust, since we humble Mods don't have the time or resources to vet. So, we'll need something better sourced. Sorry!</p>
</blockquote>
<p>and</p>
<blockquote>
<p>There are new posts everyday "warning" people of things that aren't legitimate, hence the caution. This is not a "security" subreddit. A moderator's job is to ensure that the subreddit doesn't devolve into conspiracy theories and misinformation. Security announcements should be vetted and confirmed, not independent claims that the mods have no time to independently verify.</p>
<blockquote>
<p>I can post the steps on how to easily replicate this by using pi-hole on their local networks. Anyone is capable of verifying this.</p>
</blockquote>
<p>Great. Please do so on r/brave, r/netsec, r/infosec, and other places where this is both directly relevant and appropriate to seek others confirmation. Once vetted by the community (and republished by professionals), you're welcome to post those official responses.</p>
</blockquote>
<p>/r/brave is private, invite only. I posted on netsec and infosec so we'll see. I guess /r/privacy must love Brave and not allow anything against it since it's so god damned easy to verify this...</p>
<p>All you have to do to VERIFY that this is happening is A.) Use Brave B.) Go to an Onion site C.) Observe DNS traffic. Install Pi-Hole on a Raspberry Pi or in a Virtual Machine on your desktop and run your DNS requests through it for ease of use and you can verify it. Not sure why they're so hesitant to inform their subscribers of this.</p>
<hr><p>Edit 3: Tested on both a Debian 10 and Ubuntu desktop. I'm not esteemed NetSec researcher and I'm not setting up a 100 different scenarios.</p>
</div>
            </div></div>]]>
            </description>
            <link>https://ramble.pw/f/privacy/2387/brave-browser-leaks-your-tor-onion-service-requests-through</link>
            <guid isPermaLink="false">hacker-news-small-sites-26194764</guid>
            <pubDate>Fri, 19 Feb 2021 16:27:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[We are starting to operate our CNC machines remotely]]>
            </title>
            <description>
<![CDATA[
Score 119 | Comments 93 (<a href="https://news.ycombinator.com/item?id=26193769">thread link</a>) | @Sharapolas
<br/>
February 19, 2021 | https://1d.works/how-we-started-operating-our-cnc-machines-remotely/ | <a href="https://web.archive.org/web/*/https://1d.works/how-we-started-operating-our-cnc-machines-remotely/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
                <div>
                    <h2 id="introduction"><strong>Introduction</strong></h2><p>Not only COVID-19 has brought many challenges to our daily lives, but it also has inspired a lot of change in how we work and do things. Some professions transitioned to remote work more easily than others. Factory workers and machine operators have been less lucky in this regard and that also applies to us in our CNC-based micro-factory.</p><p>Allowing more people to work remotely opens up many opportunities for businesses. Not only you can bring talent from anywhere in the world, but also you have more choices where to house the hardware allowing to optimise on cost. Furthermore, reaction times can be reduced if travel to the worksite can be eliminated. Quite a few IT professionals have been doing a good job from spectacular locations and we should strive to let more people experience that.</p><p>Another important aspect of structuring work such that it can be done remotely is that it is the first step to automating it. Local to remote, and remote to autonomous allows for a smoother transition than local to autonomous straight away. In the future, we plan on coupling our remote system to AI so if you‚Äôre interested, make sure to follow us on LinkedIn or Facebook!</p><p><strong>WARNING! </strong>Running machinery unsupervised is dangerous and must be avoided. This article is elaborating on how to operate machines more efficiently with more staff working remote, but does not suggest running machines without supervision or people on-site.</p><h2 id="how-corona-showed-us-an-opportunity"><strong>How Corona showed us an opportunity</strong></h2><p>Before the COVID-19 hit our workflow for a CNC job has been as follows:</p><ol><li>Make CAD/ CAM in the office;</li><li>Finalise CAM in the shop;</li><li>Run CNC jobs in the shop.</li></ol><p>However, during the quarantine at times it has become difficult to proceed this way because of the travel restrictions ( our CNC lab and office are based in different districts and district travel is cumbersome during quarantine ). We took up this challenge and used it as an opportunity to do the first step towards our micro-factory automation by doing more of the shop work remotely.</p><h2 id="the-cnc-lab-problem"><strong>The CNC lab problem</strong></h2><p>Running a CNC job required:</p><ol><li>Prepare the CAD/CAM files;</li><li>Setup the CNC machine for the job;</li><li>Loop: place the material, run the program, take out the cut parts, clean the table</li></ol><p>In our team, a single person has been doing all of these things. However, is it wise to use a skilled designer/ operator to be in charge of moving material and parts? Not really, because those skills could be invested in something with a much better return on investment (ROI).</p><p>Why don‚Äôt we have an unskilled person doing that work? Because CNC jobs are prone to small and costly mistakes, so to ensure high quality and safe operation, that person has to have some skills. Those skills need to either be brought in or be taught and as soon as a person has those skills we are back at having a skilled person doing a large amount of unskilled work.</p><h3 id="iteration-1">Iteration 1</h3><p>Our first step towards a solution was finding an unskilled person to be at the shop while we remote into the PC which controls the CNC machine. This has greatly improved our ROI and created a truly win-win situation because not only we are more efficiently using our time resources, but also created a new job position.</p><p>Still, there were issues to be solved. Coordination was done by phone and in order to operate the machine safely, we had to do multiple repeated questions making sure that it is safe to run the machine. Setup was particularly tricky because misunderstandings led to tool breakage and material waste. Lastly, making sure that the operation is proceeding smoothly was tricky as well since it required experienced evaluation and experience we did not have on-site.</p><h3 id="iteration-2">Iteration 2</h3><p>Having drawn conclusions from iteration 1, we‚Äôve decided to upgrade the CNC lab with a camera for more efficient and higher quality feedback. And it is surprising how much easier work became then!</p><figure><img src="https://cdn-images-1.medium.com/max/1600/1*ukzIoHs74MRrQd9Xu3ZBJQ.png" alt=""><figcaption>Figure 1. CNC shop&nbsp;camera</figcaption></figure><p>Much less coordination was required and we were much more confident operating the CNC machine knowing that the site was safe for operation. Setups became easier because we could verify that the right measurements were made.</p><p>Soon enough we‚Äôve found many things that could be improved:</p><ul><li>Running cameras in one window and remoting in on another tended to be inconvenient on a single screen workstation;</li><li>Although monitoring was much better, the single-camera setup did not allow to evaluate the quality of the finish or how smoothly the work was progressing;</li><li>When we were executing tool adjustments (eg. changing a bit in the tool chuck ) it was still hard to be sure that the right tool was where it needed to be;</li><li>It has become very apparent that some of the tasks could be semi-automated using feedback from the on-site worker. For example, at the beginning of each session, the machine needs to be initialised by moving it to reference and calibrating all the tools which involved checking if the site was clear for action and then going through a sequence of clicks;</li><li>Measurements still took a while to explain and then took a while to do properly.</li></ul><h3 id="iteration-3">Iteration 3</h3><p>Taking into account the inefficiencies we‚Äôve identified, we‚Äôve decided to work on a cohesive platform with an intuitive dashboard which would merge all the systems we have and provide the base for automation to be built upon.</p><p>First, was the network setup. We needed to merge multi-site networks into a mesh topology network where all the nodes could be interconnected which was solved using a hub and spoke topology VPN. Although, it does have its own drawbacks it had a good cost-benefit ratio when it comes to setup and deployment and is working for us for now.</p><p>Next, was building the dashboard which not only required the making of the UI but required figuring out how we‚Äôre going to expose and manage resources in our shop network. We decided to build the backend in the spirit of Kubernetes, so it is easy to manage at scale with the addition of new sensors, machines and full-blown sites themselves.</p><figure><img src="https://cdn-images-1.medium.com/max/1600/1*JYyqKIXsBTgfg8A-ENR-xw.png" alt=""><figcaption>Figure 2. CNC shop dashboard prototype</figcaption></figure><p>For the GUI we choose to go with Python‚Äôs Tkinter package in order to be able to rapidly iterate and once it reaches a stable state we‚Äôre planning to move it into a web app for easy access from any device. The dashboard is set up such that one could interface with the embedded CNC software by just doing the relevant actions on the dashboard.</p><h3 id="conclusions">Conclusions</h3><p>Based on our experience using the shop dashboard, it has helped us improve our process in the CNC shop by a mile. We are significantly more confident running remote jobs, have more oversight and control and the process is much more efficient with time.</p><p>It has also opened the possibility to (semi)-automate processes involved in running a CNC shop, which we are continuing to work with and will be posting later. We have a few ideas on how to couple the camera and control system with AI and that is an exciting prospect!</p><p>One key feature that the system requires is being able to remotely access the CNC control software. We are lucky to have it running on a PC which we can easily remote-in, but in case of embedded software, some middleware might be needed to control it remotely.</p><p>Allowing the machine operator to work remote adds value to our business as we could easier relocate the shop to cheaper areas, further from the cities or have talented engineers from nearly anywhere in the world away from work with us. That is why we will continue on this journey and will share it with you as we go!</p><hr><h3 id="check-out-more-">Check out more:</h3><ol><li><a href="https://1d.works/welcome-to-1d-works-cnc-lab/" rel="noopener">Welcome to 1D.works CNC Lab</a></li><li><a href="https://1d.works/object-oriented-computer-assisted-machining/" rel="noopener">Simplifying CAM workflow with Fusion 360</a></li><li><a href="https://1d.works/unique-products-at-scale-with-ai-infused-cad/" rel="noopener">Unique products at scale with AI-infused CAD</a></li></ol><p>and more in our <a href="https://1d.works/blog/" rel="noopener">blog</a></p><hr><h3 id="connect-">Connect!</h3><p>At <a href="https://1d.works/" rel="noopener nofollow noopener noopener">1D.works</a> we‚Äôre excited about the potential of AI to improve businesses and people‚Äôs lives. CAD and CAM are two of the largely unexplored territories we‚Äôre invested in. If you think you can benefit from a decade-long experience of applying machine learning to business processes, <a href="https://1d.works/" rel="noopener nofollow noopener noopener">get in touch</a>!</p><hr><figure><img src="https://cdn-images-1.medium.com/max/1600/1*ZttLaS6wTmFLgKZ6_9LeeA.png" alt=""></figure>
                </div>
            </section></div>]]>
            </description>
            <link>https://1d.works/how-we-started-operating-our-cnc-machines-remotely/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26193769</guid>
            <pubDate>Fri, 19 Feb 2021 14:53:57 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Universal Warrior, Part III: The Cult of the Badass]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26193719">thread link</a>) | @myWindoonn
<br/>
February 19, 2021 | https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/ | <a href="https://web.archive.org/web/*/https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		
<p>This is the third and final part of a discussion (<a href="https://acoup.blog/2021/01/29/collections-the-universal-warrior-part-i-soldiers-warriors-and/">I</a>, <a href="https://acoup.blog/2021/02/05/collections-the-universal-warrior-part-iia-the-many-faces-of-battle/">IIa</a>, <a href="https://acoup.blog/2021/02/12/collections-the-universal-warrior-part-iib-a-soldiers-lot/">IIb</a>) discussion of the notion that there is a ‚Äòuniversal warrior‚Äô ‚Äì a transcendent sameness about either the experience of war or ‚Äòwarrior values‚Äô which might provide some sort of useful blueprint for life generally or some sort of fundamental truth about the experience of war.</p>



<p>Over the last three weeks, we‚Äôve looked at the historical evidence to see if there was any hint of some universal war experience or set of warrior values.  What we‚Äôve found instead is that almost everything about how humans engage in war, aside from the fact that they do so, varies tremendously from one culture to the next, from one place to the next, from one period to the next.  Cultural expectations, social values, technological conditions, entire systems of warfare and simple circumstance also condition the experience of war and the values that combatants have in extreme ways which render the search for a ‚Äòuniversal‚Äô set of warrior values a clearly doomed enterprise.</p>



<p>But, as laid out in the beginning, the ‚Äòuniversal warrior‚Äô wasn‚Äôt merely a (deeply flawed) argument about the structure and experiences of the past, but the foundation stone in an ideological blueprint for living one‚Äôs modern life.  And so it is time now that we turn from the (quite bad) historical roots of this idea to the (worse, it turns out) ideological implications of the idea.</p>



<p>But first, as always, if you like what you are reading here, please share it; if you really like it, you can support me on <a href="https://www.patreon.com/user?u=20122096">Patreon</a>. And if you want updates whenever a new post appears, you can click below for email updates or follow me on twitter (@BretDevereaux) for updates as to new posts as well as my occasional ancient history, foreign policy or military history musings.</p>






<p>(I couldn‚Äôt decide quite how I wanted to illustrate this essay and it didn‚Äôt seem like quite the right content for historical cat photos, so I‚Äôve opted to leave it without images.  I may go back and add pictures at a later date, but for now, it can stand purely as an essay.)</p>



<h2>Once More, With Feeling</h2>



<p>In a sense, while the previous three posts have been fun, they were really just a very long preamble to the argument I am making here, so I want to both lay out <em>why</em> I opened with a three-week long preamble before getting to the point (‚Äòhow else would you know it was me?‚Äô) and also pull together the conclusions from all of that before we move forward.</p>



<p>So why the preamble?  Because I wanted to make sure before we started discussing the underlying ideology that lurks <em>behind</em> claims of the universality of some ‚Äòwarrior ethos‚Äô we had defused the retort that, whatever the unpleasant implications, the ‚Äòuniversal warrior‚Äô was <em>historically true</em>.  This had to be done first because <strong>I am of the opinion that</strong> <strong>truth is an absolute defense</strong> in such matters; the universe contains a great many facts which are frustratingly inconvenient, yet as historians we have to deal with the world as it is rather than as we wish it to be (or wish it to have been).  Consequently, before I could complain about the ideology, it was necessary to determine if the historical theory was true, or even remotely plausible.</p>



<p>So we have spent three weeks hunting for the ‚Äòuniversal warrior‚Äô ‚Äì either in the form of a universal war <em>experience</em> or a universal set of <em>values</em>.  What we have found is:</p>



<ul><li>Far from there being one set way that combatants relate to their society, soldiers, warriors and civilians represent distinct categories defined by how people in war relate to their society.  Even <em>within</em> those categories, variety is considerable, leaving no one clear model of how combatants relate to their societies.</li><li>Moreover, war itself is changeable, moving through at least three (and probably four) distinct systems of land warfare alone, each with substantial differences in tactics, values, and experiences.</li><li>Moreover, different cultures understand and imagine the ideal qualities of combatants differently, often so dramatically differently that one culture‚Äôs definition of courage is not merely different from an other‚Äôs, but diametrically opposed.</li><li>Moreover, the actual experience of battle ‚Äì we discussed this mostly through the experience of fear ‚Äì isn‚Äôt universal either.  The fear of facing a cavalry charge is not the same sort of fear as the fear of enduring a week long artillery barrage, while ‚Äòwar is scary‚Äô in a general sense is hardly enough to set off the warrior or the soldier from any number of other scary and potentially hazardous jobs.</li><li>Moreover, the bonds of comradeship that support modern cohesion (often cited as a unique and universal experience) are, in fact, also historically contingent, both in that there are many systems for generating cohesion, not all of which involve tight bonds formed during military service and that some military systems don‚Äôt seek to develop cohesion in this sense at all.</li><li>Moreover, attitudes towards the hardships of war <em>also</em> vary wildly, as do the actual hardships in question.</li><li>Moreover, not only do different societies express different attitudes and values towards the wounded, but the nature of the wounds themselves has changed over time as military technology has become progressively more lethal; both states that apply not only to physical, but also mental wounding.</li></ul>



<p>In short, while there is enough commonality in war to suggest a definition that encompasses the idea (again, I rather prefer W. Lee‚Äôs definition of war as ‚Äúorganized group activity, conducted with lethal effects, that diminishes one [unconsenting] group for the benefit of another‚Äù), <em>within </em>that definition, <strong>there is far too much variety to suggest there is any one ‚Äòuniversal‚Äô experience of war or any one set of universal warrior values</strong>.</p>



<p>And I should note this is something we could demonstrate in more than a half-dozen different ways deploying just a fraction of the available scholarship on how the experience and values of war change from place to place.  Indeed, that is essentially what we have done.  <strong>Any <em>one</em> of the above points is enough to be fatal to the notion that there is some sort of ‚Äòuniversal‚Äô set of warriors values and experiences </strong>such that, as Pressfield openly states, a Spartiate could be simply dropped into a modern U.S. Marine regiment and fit in without skipping a beat (or his equally anachronistic notion that the decadent Athenian could be dropped into American civil society and also integrate seamlessly).  </p>



<p>But of course Pressfield isn‚Äôt offering a <em>history</em> (and indeed, he has not written one), he is offering an ideology and (intentionally or not) reshaping the historical facts to fit that ideology, shaving the corners off of the square peg so it will fit into the round hole of his moral assumptions.  His ideology requires a universal set of warrior values to serve as the foundation for his life philosophy and so, facts be damned, he <em>will</em> assert the existence of such a universal set of values.  The ideology, not the history, is the foundation, which is why Pressfield offers both anecdotes from Plutarch (a historical source) and his own books (modern historical fiction) as having equal truth value, even though the latter has no value as historical evidence; they both <strong>express the ideology</strong>.</p>



<p>So what is the ideology here?  Well, for that it is time to meet our old friend‚Ä¶</p>



<h2>The Cult of the Badass</h2>



<p>Pulling out the core ideology from Pressfield‚Äôs <a href="https://stevenpressfield.com/category/the-warrior-archetype/">videos </a>is a formidable task; there are fifty of them and so much of the core argument is submerged beneath endless anecdotes (some historical, some Pressfield openly invented for his historical fiction; all delivered with insufficient historical context).  But Pressfield‚Äôs videos are useful for this argument because he makes explicit a set of arguments which are usually only made <em>implicitly</em> through a set of emotional appeals which often are carried through the subtext of images and references rather than the text of what is being said.</p>



<p>(Marching through Pressfield‚Äôs videos was also frankly difficult because there are <a href="https://twitter.com/BretDevereaux/status/1350655580562731011"><em>just so many errors</em> </a>in them, I had to stop live-tweeting my way through them because if I kept doing it I‚Äôd never finish.  As a reminder, this is a fellow whose fiction<a href="https://en.wikipedia.org/wiki/Gates_of_Fire"> is on reading lists </a>at various U.S. military officer training programs, much to my continued sorrow.)</p>



<p>We may, I think, summarize Pressfield‚Äôs core argument as follows: the ‚Äòwarrior archetype‚Äô (he is using here the long-abandoned psychology of Carl Jung) represents a true human universal best understood by certain ‚Äòwarrior societies‚Äô (<em>especially</em> the Spartans, but also Alexander III, but somehow <em>not</em> the Macedonians or Philip II) who supposedly demonstrated martial excellence and who therefore are ‚Äúrepresentative of the purest expression of the warrior archetype‚Äù (his words).  Moreover, Pressfield argues that this understanding of the ‚Äòinner warrior‚Äô provides the best blueprint on which a person might fashion their lives, understanding their weaknesses as an ‚Äòinner enemy‚Äô that must be opposed by ‚Äòwarrior values‚Äô and ‚Äòmental toughness.‚Äô  And while Pressfield will admit that the ‚Äòwarrior archetype‚Äô can go astray (he says this of Alexander, though I‚Äôd argue that Alexander didn‚Äôt so much ‚Äògo astray‚Äô as he ‚Äòkept doing what he had done literally for his entire life, but began doing it to people who thought Alexander would only hurt people <em>they didn‚Äôt like</em>‚Äò), he nevertheless presents this ‚Äòwarrior archetype‚Äô as an expression of the highest possible human ideal.  <strong>In Pressfield‚Äôs ideological framework, it is the great warriors ‚Äì the Spartans, Alexander, Arjuna ‚Äì who stand atop the summit of human physical and moral achievement.</strong>  Non-warriors (mostly women) are valued in as much as they uphold elements of this warrior ideal so that warriors (mostly men) can give those ideals physical expression in action.  Even internal struggles must be reframed as a form of war, to be fought and defeated with the same values that best produce effective real-world violence.</p>


</div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/">https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/</a></em></p>]]>
            </description>
            <link>https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26193719</guid>
            <pubDate>Fri, 19 Feb 2021 14:50:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Writing Our Own Cheat Engine]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26193563">thread link</a>) | @asicsp
<br/>
February 19, 2021 | https://lonami.dev/blog/woce-1/ | <a href="https://web.archive.org/web/*/https://lonami.dev/blog/woce-1/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><p>2021-02-07</p><p>last updated 2021-02-19</p></div><p>This is part 1 on the <em>Writing our own Cheat Engine</em> series:</p><ul><li>Part 1: Introduction</li><li><a href="https://lonami.dev/blog/woce-2">Part 2: Exact Value scanning</a></li><li><a href="https://lonami.dev/blog/woce-3">Part 3: Unknown initial value</a></li></ul><p><a href="https://cheatengine.org/">Cheat Engine</a> is a tool designed to modify single player games and contains other useful tools within itself that enable its users to debug games or other applications. It comes with a memory scanner, (dis)assembler, inspection tools and a handful other things. In this series, we will be writing our own tiny Cheat Engine capable of solving all steps of the tutorial, and diving into how it all works underneath.</p><p>Needless to say, we're doing this for private and educational purposes only. One has to make sure to not violate the EULA or ToS of the specific application we're attaching to. This series, much like cheatengine.org, does not condone the illegal use of the code shared.</p><p>Cheat Engine is a tool for Windows, so we will be developing for Windows as well. However, you can also <a href="https://stackoverflow.com/q/12977179/4759433">read memory from Linux-like systems</a>. <a href="https://github.com/scanmem/scanmem">GameConqueror</a> is a popular alternative to Cheat Engine on Linux systems, so if you feel adventurous, you could definitely follow along too! The techniques shown in this series apply regardless of how we read memory from a process. You will learn a fair bit about doing FFI in Rust too.</p><p>We will be developing the application in Rust, because it enables us to interface with the Windows API easily, is memory safe (as long as we're careful with <code>unsafe</code>!), and is speedy (we will need this for later steps in the Cheat Engine tutorial). You could use any language of your choice though. For example, <a href="https://lonami.dev/blog/ctypes-and-windows/">Python also makes it relatively easy to use the Windows API</a>. You don't need to be a Rust expert to follow along, but this series assumes some familiarity with C-family languages. Slightly advanced concepts like the use of <code>unsafe</code> or the <code>MaybeUninit</code> type will be briefly explained. What a <code>fn</code> is or what <code>let</code> does will not be explained.</p><p><a href="https://github.com/cheat-engine/cheat-engine/">Cheat Engine's source code</a> is mostly written in Pascal and C. And it's <em>a lot</em> of code, with a very flat project structure, and files ranging in the thousand lines of code each. It's daunting<sup><a href="#1">1</a></sup>. It's a mature project, with a lot of knowledge encoded in the code base, and a lot of features like distributed scanning or an entire disassembler. Unfortunately, there's not a lot of comments. For these reasons, I'll do some guesswork when possible as to how it's working underneath, rather than actually digging into what Cheat Engine is actually doing.</p><p>With that out of the way, let's get started!</p><h2 id="welcome-to-the-cheat-engine-tutorial">Welcome to the Cheat Engine Tutorial</h2><details open=""><summary>Cheat Engine Tutorial: Step 1</summary> <blockquote><p>This tutorial will teach you the basics of cheating in video games. It will also show you foundational aspects of using Cheat Engine (or CE for short). Follow the steps below to get started.</p><ol><li>Open Cheat Engine if it currently isn't running.</li><li>Click on the "Open Process" icon (it's the top-left icon with the computer on it, below "File".).</li><li>With the Process List window now open, look for this tutorial's process in the list. It will look something like &gt; "00001F98-Tutorial-x86_64.exe" or "0000047C-Tutorial-i386.exe". (The first 8 numbers/letters will probably be different.)</li><li>Once you've found the process, click on it to select it, then click the "Open" button. (Don't worry about all the &gt; other buttons right now. You can learn about them later if you're interested.)</li></ol><p>Congratulations! If you did everything correctly, the process window should be gone with Cheat Engine now attached to the &gt; tutorial (you will see the process name towards the top-center of CE).</p><p>Click the "Next" button below to continue, or fill in the password and click the "OK" button to proceed to that step.)</p><p>If you're having problems, simply head over to forum.cheatengine.org, then click on "Tutorials" to view beginner-friendly &gt; guides!</p></blockquote></details><h2 id="enumerating-processes">Enumerating processes</h2><p>Our first step is attaching to the process we want to work with. But we need a way to find that process in the first place! Having to open the task manager, look for the process we care about, noting down the process ID (PID), and slapping it in the source code is not satisfying at all. Instead, let's enumerate all the processes from within the program, and let the user select one by typing its name.</p><p>From a quick <a href="https://ddg.gg/winapi%20enumerate%20all%20processes">DuckDuckGo search</a>, we find an official tutorial for <a href="https://docs.microsoft.com/en-us/windows/win32/psapi/enumerating-all-processes">Enumerating All Processes</a>, which leads to the <a href="https://docs.microsoft.com/en-us/windows/win32/api/psapi/nf-psapi-enumprocesses"><code>EnumProcesses</code></a> call. Cool! Let's slap in the <a href="https://crates.io/crates/winapi"><code>winapi</code></a> crate on <code>Cargo.toml</code>, because I don't want to write all the definitions by myself:</p><pre><code data-lang="toml">[dependencies]
winapi = { version = "0.3.9", features = ["psapi"] }
</code></pre><p>Because <a href="https://docs.microsoft.com/en-us/windows/win32/api/psapi/nf-psapi-enumprocesses"><code>EnumProcesses</code></a> is in <code>Psapi.h</code> (you can see this in the online page of its documentation), we know we'll need the <code>psapi</code> crate feature. Another option is to search for it in the <a href="https://docs.rs/winapi/"><code>winapi</code> documentation</a> and noting down the parent module where its stored.</p><p>The documentation for the method has the following remark:</p><blockquote><p>It is a good idea to use a large array, because it is hard to predict how many processes there will be at the time you call <strong>EnumProcesses</strong>.</p></blockquote><p><em>Sidenote: reading the documentation for the methods we'll use from the Windows API is extremely important. There's a lot of gotchas involved, so we need to make sure we're extra careful.</em></p><p>1024 is a pretty big number, so let's go with that:</p><pre><code data-lang="rust">use std::io;
use std::mem;
use winapi::shared::minwindef::{DWORD, FALSE};

pub fn enum_proc() -&gt; io::Result&lt;Vec&lt;u32&gt;&gt; {
    let mut pids = Vec::&lt;DWORD&gt;::with_capacity(1024);
    let mut size = 0;
    // SAFETY: the pointer is valid and the size matches the capacity.
    if unsafe {
        winapi::um::psapi::EnumProcesses(
            pids.as_mut_ptr(),
            (pids.capacity() * mem::size_of::&lt;DWORD&gt;()) as u32,
            &amp;mut size,
        )
    } == FALSE
    {
        return Err(io::Error::last_os_error());
    }

    todo!()
}
</code></pre><p>We allocate enough space<sup><a href="#2">2</a></sup> for 1024 <code>pids</code> in a vector<sup><a href="#3">3</a></sup>, and pass a mutable pointer to the contents to <code>EnumProcesses</code>. Note that the size of the array is in <em>bytes</em>, not items, so we need to multiply the capacity by the size of <code>DWORD</code>. The API likes to use <code>u32</code> for sizes, unlike Rust which uses <code>usize</code>, so we need a cast.</p><p>Last, we need another mutable variable where the amount of bytes written is stored, <code>size</code>.</p><blockquote><p>If the function fails, the return value is zero. To get extended error information, call <a href="https://docs.microsoft.com/en-us/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror"><code>GetLastError</code></a>.</p></blockquote><p>That's precisely what we do. If it returns false (zero), we return the last OS error. Rust provides us with <a href="https://doc.rust-lang.org/stable/std/io/struct.Error.html#method.last_os_error"><code>std::io::Error::last_os_error</code></a>, which essentially makes that same call but returns a proper <code>io::Error</code> instance. Cool!</p><blockquote><p>To determine how many processes were enumerated, divide the <em>lpcbNeeded</em> value by <code>sizeof(DWORD)</code>.</p></blockquote><p>Easy enough:</p><pre><code data-lang="rust">let count = size as usize / mem::size_of::&lt;DWORD&gt;();
// SAFETY: the call succeeded and count equals the right amount of items.
unsafe { pids.set_len(count) };
Ok(pids)
</code></pre><p>Rust doesn't know that the memory for <code>count</code> items were initialized by the call, but we do, so we make use of the <a href="https://doc.rust-lang.org/stable/std/vec/struct.Vec.html#method.set_len"><code>Vec::set_len</code></a> call to indicate this. The Rust documentation even includes a FFI similar to our code!</p><p>Let's give it a ride:</p><pre><code data-lang="rust">fn main() {
    dbg!(enum_proc().unwrap().len());
}
</code></pre><pre><code>&gt;cargo run
   Compiling memo v0.1.0
    Finished dev [unoptimized + debuginfo] target(s) in 0.20s
     Running `target\debug\memo.exe`
[src\main.rs:27] enum_proc().unwrap().len() = 178
</code></pre><p>It works! But currently we only have a bunch of process identifiers, with no way of knowing which process they refer to.</p><blockquote><p>To obtain process handles for the processes whose identifiers you have just obtained, call the <a href="https://docs.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocess"><code>OpenProcess</code></a> function.</p></blockquote><p>Oh!</p><h2 id="opening-a-process">Opening a process</h2><p>The documentation for <code>OpenProcess</code> also contains the following:</p><blockquote><p>When you are finished with the handle, be sure to close it using the <a href="https://lonami.dev/blog/woce-1/closehandle"><code>CloseHandle</code></a> function.</p></blockquote><p>This sounds to me like the perfect time to introduce a custom <code>struct Process</code> with an <code>impl Drop</code>! We're using <code>Drop</code> to cleanup resources, not behaviour, so it's fine. <a href="https://internals.rust-lang.org/t/pre-rfc-leave-auto-trait-for-reliable-destruction/13825">Using <code>Drop</code> to cleanup behaviour is a bad idea</a>. But anyway, let's get back to the code:</p><pre><code data-lang="rust">use std::ptr::NonNull;
use winapi::ctypes::c_void;

pub struct Process {
    pid: u32,
    handle: NonNull&lt;c_void&gt;,
}

impl Process {
    pub fn open(pid: u32) -&gt; io::Result&lt;Self&gt; {
        todo!()
    }
}

impl Drop for Process {
    fn drop(&amp;mut self) {
        todo!()
    }
}
</code></pre><p>For <code>open</code>, we'll want to use <code>OpenProcess</code> (and we also need to add the <code>processthreadsapi</code> feature to the <code>winapi</code> dependency in <code>Cargo.toml</code>). It returns a <code>HANDLE</code>, which is a nullable mutable pointer to <code>c_void</code>. If it's null, the call failed, and if it's non-null, it succeeded and we have a valid handle. This is why we use Rust's <a href="https://doc.rust-lang.org/stable/std/ptr/struct.NonNull.html"><code>NonNull</code></a>:</p><pre><code data-lang="rust">// SAFETY: the call doesn't have dangerous side-effects.
NonNull::new(unsafe { winapi::um::processthreadsapi::OpenProcess(0, FALSE, pid) })
    .map(|handle| Self { pid, handle })
    .ok_or_else(io::Error::last_os_error)
</code></pre><p><code>NonNull</code> will return <code>Some</code> if the pointer is non-null. We map the non-null pointer to a <code>Process</code> instance with <code>Self { .. }</code>. <code>ok_or_else</code> converts the <code>Option</code> to a <code>Result</code> with the error builder function we provide if it was <code>None</code>.</p><p>The first parameter is a bitflag of permissions we want to have. For now, we can leave it as zero (all bits unset, no specific permissions granted). The second one is whether we want to inherit the handle, which we don't, and the third one is the process identifier. Let's close the resource handle on <code>Drop</code> (after adding <code>handleapi</code> to the crate features):</p><pre><code data-lang="rust">// SAFETY: the handle is valid and non-null.
unsafe { winapi::um::handleapi::CloseHandle(self.handle.as_mut()) };
</code></pre><p><code>CloseHandle</code> can actually fail (for example, on double-close), but given our invariants, it won't. You could add an <code>assert!</code> to panic if this is not the case.</p><p>We can now open processes, and they will be automatically closed on <code>Drop</code>. Does any of this work though?</p><pre><code data-lang="rust">fn main() {
    let mut success = 0;
    let mut failed = 0;
    enum_proc().unwrap().into_iter().for_each(|pid| match Process::open(pid) {
        Ok(_) =&gt; success += 1,
        Err(_) =&gt; failed += 1,
    });

    eprintln!("Successfully opened {}/{} processes", success, success + failed);
}
</code></pre><pre><code>&gt;cargo run
   Compiling memo v0.1.0
    ‚Ä¶</code></pre></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://lonami.dev/blog/woce-1/">https://lonami.dev/blog/woce-1/</a></em></p>]]>
            </description>
            <link>https://lonami.dev/blog/woce-1/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26193563</guid>
            <pubDate>Fri, 19 Feb 2021 14:36:04 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[CC Academy (Free Fellowship) opens its doors to the 3rd cohort of ML/FE/UX folks]]>
            </title>
            <description>
<![CDATA[
Score 19 | Comments 2 (<a href="https://news.ycombinator.com/item?id=26193517">thread link</a>) | @billnyetheai
<br/>
February 19, 2021 | https://www.notion.so/Chronic-Coder-Academy-Season-3-dbd4a42c517a4902b345a7fb7287cedf | <a href="https://web.archive.org/web/*/https://www.notion.so/Chronic-Coder-Academy-Season-3-dbd4a42c517a4902b345a7fb7287cedf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://www.notion.so/Chronic-Coder-Academy-Season-3-dbd4a42c517a4902b345a7fb7287cedf</link>
            <guid isPermaLink="false">hacker-news-small-sites-26193517</guid>
            <pubDate>Fri, 19 Feb 2021 14:31:18 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Brave Browser leaks your Tor / Onion service requests through DNS]]>
            </title>
            <description>
<![CDATA[
Score 27 | Comments 14 (<a href="https://news.ycombinator.com/item?id=26192574">thread link</a>) | @input_sh
<br/>
February 19, 2021 | https://ramble.pw/f/privacy/2387 | <a href="https://web.archive.org/web/*/https://ramble.pw/f/privacy/2387">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
              <div lang="en" dir="ltr"><p>Edit: (Since this is gaining traction elsewhere.) I'm not trying to shit on Brave. I'm just wanting to help protect end-users who may use Brave for it's Tor feature to do stuff over Tor that should only be done with the actual Tor browser. If you're using Brave you probably use it because you expect a certain level of privacy/anonymity. Piping .onion requests through DNS where your ISP or DNS provider can see that <em>you</em> made a request for an .onion site defeats that purpose.</p>
<p>I'm also no NetSec expert but you don't have to be to replicate this. I'm just a dude with some websites and projects and I'm not certain I would have taken notice of this if it wasn't reported to me by a partner on another project who witnessed this behavior when monitoring his local requests leaving his network. He'll be doing his own write-up and is more equipped to discuss this in length than me.</p>
<hr><p>Testing out something that was noted a week or so ago, and wanting to replicate it for the purpose of this post.</p>
<p>Some of you know I'm working on an ad, tracker, and other BS blocking VPN service for an unrelated project to this site. Go to <a href="https://ramble.pw/f/incoghost">/f/incoghost</a> (<a href="https://incog.host/" rel="nofollow">website</a>) for more because I try to keep these things separated.</p>
<p>Anyhow, it was reported by a partner that Brave was leaking DNS requests for onion sites and I was able to confirm it at the time. Decided to spin up a VM with Brave and test with this site's Onion service (though it will do this for any .onion)</p>
<p>Example:</p>
<pre><code> Feb 18 12:02:25: query[A] rambleeeqrhty6s5jgefdfdtc6tfgg4jj6svr4jpgk4wjtg3qshwbaad.onion from 104.244.xx.xxx
</code></pre>
<p>What this entry shows (simply) is that the request made for the domain rambleeeqrhty6s5jgefdfdtc6tfgg4jj6svr4jpgk4wjtg3qshwbaad.onion made it to the DNS server and is tagged with the IP of the requester, which in this case is just the test / dev VPN. This shouldn't happen. There isn't any reason for Brave to attempt to resolve a .onion domain through traditional means as it would with a regular clearnet site.</p>
<p>This is especially worrisome for those of you who use Brave browser from your normal residential IP and (for whatever reason) use the Tor feature built into the browser to access Tor sites. Your ISP or DNS provider <em>will</em> know that a request made to a specific Tor site was made by <em>your</em> IP. With Brave, your ISP would know that you accessed <em>somesketchyonionsite.onion</em> .</p>
<p>TL;DR: If you're going to use Tor, use the Tor Browser and not Brave. The Tor browser itself doesn't leak these requests like Brave does.</p>
<hr><p>Edit: To clarify, the VPN service we're working on is no-logging but during this dev and testing period we're logging DNS requests while we work out the kinks in the blocklists. This has also allowed us to witness .onions being passed through which is a fault of Brave.</p>
<hr><p>Edit 2: Screenshot: <a href="https://images2.imgbox.com/98/46/1i084PbC_o.png" rel="nofollow">https://images2.imgbox.com/98/46/1i084PbC_o.png</a></p>
<p>That was me loading duckduckgo in a different container, with brave, while live fetching DNS requests made to the DNS server. I blurred out the non-onion requests. (Different VPN test location than in the above example so 209.x.x.x IP instead of the 104.x.x.x one in the original example.</p>
<hr><h3>EDIT 2: The mods of /r/privacy won't let this be posted. They say:</h3>
<blockquote>
<p>While we (vastly) prefer the Tor Browser over the Brave one, you'll need a better source than the one you found. Can you find something from a more widely recognized NetSec expert? Something along the lines of Bruce Schneier's blog or something at that level of credibility?</p>
</blockquote>
<p>and</p>
<blockquote>
<p>The problem with screenshots is that they can be faked, trivially. There are also a host of approaches that credible writers/reporters do in the NetSec space do before a line of text appears in print. It's this kind of journalism that we have to trust, since we humble Mods don't have the time or resources to vet. So, we'll need something better sourced. Sorry!</p>
</blockquote>
<p>and</p>
<blockquote>
<p>There are new posts everyday "warning" people of things that aren't legitimate, hence the caution. This is not a "security" subreddit. A moderator's job is to ensure that the subreddit doesn't devolve into conspiracy theories and misinformation. Security announcements should be vetted and confirmed, not independent claims that the mods have no time to independently verify.</p>
<blockquote>
<p>I can post the steps on how to easily replicate this by using pi-hole on their local networks. Anyone is capable of verifying this.</p>
</blockquote>
<p>Great. Please do so on r/brave, r/netsec, r/infosec, and other places where this is both directly relevant and appropriate to seek others confirmation. Once vetted by the community (and republished by professionals), you're welcome to post those official responses.</p>
</blockquote>
<p>/r/brave is private, invite only. I posted on netsec and infosec so we'll see. I guess /r/privacy must love Brave and not allow anything against it since it's so god damned easy to verify this...</p>
<p>All you have to do to VERIFY that this is happening is A.) Use Brave B.) Go to an Onion site C.) Observe DNS traffic. Install Pi-Hole on a Raspberry Pi or in a Virtual Machine on your desktop and run your DNS requests through it for ease of use and you can verify it. Not sure why they're so hesitant to inform their subscribers of this.</p>
<hr><p>Edit 3: Tested on both a Debian 10 and Ubuntu desktop. I'm not esteemed NetSec researcher and I'm not setting up a 100 different scenarios.</p>
</div>
            </div></div>]]>
            </description>
            <link>https://ramble.pw/f/privacy/2387</link>
            <guid isPermaLink="false">hacker-news-small-sites-26192574</guid>
            <pubDate>Fri, 19 Feb 2021 12:51:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[‚ÄúI will slaughter you‚Äù]]>
            </title>
            <description>
<![CDATA[
Score 516 | Comments 225 (<a href="https://news.ycombinator.com/item?id=26192025">thread link</a>) | @ingve
<br/>
February 19, 2021 | https://daniel.haxx.se/blog/2021/02/19/i-will-slaughter-you/ | <a href="https://web.archive.org/web/*/https://daniel.haxx.se/blog/2021/02/19/i-will-slaughter-you/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		
<p>You might know that I‚Äôve posted funny emails I‚Äôve received on my blog several times in the past. The kind of emails people send me when they experience problems with some device they own (like a <a href="https://daniel.haxx.se/blog/2018/02/16/why-is-your-email-in-my-car/" data-type="post" data-id="10856">car</a>) and they contact me because my email address happens to be visible somewhere.</p>



<p>People sometimes say I should get a different email address or use another one in the curl license file, but I‚Äôve truly never had a problem with these emails, as they mostly remind me about the tough challenges the modern technical life bring to people and it gives me insights about what things that run curl.</p>



<p>But not all of these emails are ‚Äúfunny‚Äù.</p>



<h2>Category: not funny</h2>



<p>Today I received the following email</p>



<pre>From: Al Nocai &lt;[redacted]@icloud.com&gt;
Date: Fri, 19 Feb 2021 03:02:24 -0600
Subject: I will slaughter you</pre>



<p>That subject.</p>



<p>As an open source maintainer since over twenty years, I know flame wars and personal attacks and I have a fairly thick skin and I don‚Äôt let words get to me easily. It took me a minute to absorb and realize it was actually meant as a direct physical threat. It found its ways through and got to me. This level of aggressiveness is not what I‚Äôm prepared for.</p>



<p>Attached in this email, there were seven images and no text at all. The images all look like screenshots from a phone and the first one is clearly showing <a href="https://github.com/curl/curl/blob/master/include/curl/multi.h">source code I wrote</a> and my copyright line:</p>



<div><figure><a href="https://daniel.haxx.se/blog/wp-content/uploads/2021/02/image0.png"><img loading="lazy" width="295" height="640" src="https://daniel.haxx.se/blog/wp-content/uploads/2021/02/image0.png" alt=""></a></figure></div>



<p>The <a href="https://daniel.haxx.se/al/">other images</a> showed other source code and related build/software info of other components, but I couldn‚Äôt spot how they were associated with me in any way.</p>



<p>No explanation, just that subject and the seven images and I was left to draw my own conclusions.</p>



<p>I presume the name in the email is made up and the email account is probably a throw-away one. The time zone used in the <code>Date:</code> string might imply US <a href="https://www.timeanddate.com/time/zones/cst">central standard time</a> but could of course easily be phony as well. </p>



<h2>How I responded</h2>



<p>Normally I don‚Äôt respond to these confused emails because the distance between me and the person writing them is usually almost interplanetary. This time though, it was so far beyond what‚Äôs acceptable to me and in any decent society I couldn‚Äôt just let it slide. After I took a little pause and walked around my house for a few minutes to cool off, I wrote a really angry reply and sent it off.</p>



<blockquote><p>This was a totally and completely utterly unacceptable email and it hurt me deep in my soul. You should be ashamed and seriously reconsider your manners.</p><p>I have no idea what your screenshots are supposed to show, but clearly something somewhere is using code I wrote. Code I have written runs in virtually every Internet connected device on the planet and in most cases the users download and use it without even telling me, for free.</p><p>Clearly you don‚Äôt deserve my code.</p></blockquote>



<p>I don‚Äôt expect that it will be read or make any difference.</p>



<p>Update below, added after my initial post.</p>



<h2>Al Nocai‚Äôs response</h2>



<p>Contrary to my expectations above, he responded. It‚Äôs not even worth commenting but for transparency I‚Äôll include it here.</p>



<p><em>I do not care. Your bullshit software was an attack vector that cost me a multimillion dollar defense project.</em></p>



<p><em>Your bullshit software has been used to root me and multiple others. I lost over $15k in prototyping alone from bullshit rooting to the charge arbitrators.</em></p>



<p><em>I have now since October been sandboxed because of your bullshit software so dipshit google kids could grift me trying to get out of the sandbox because they are too piss poor to know shat they are doing.</em></p>



<p><em>You know what I did to deserve that? I tried to develop a trade route in tech and establish project based learning methodologies to make sure kids aren‚Äôt left behind. You know who is all over those god damn files? You are. Its sickening. I got breached in Oct 2020 through federal server hijacking, and I owe a great amount of that to you.</em></p>



<p><em>Ive had to sit and watch as i reported:</em></p>



<ol><li><em>fireeye Oct/2020</em></li><li><em>Solarwinds Oct/2020</em></li><li><em>Zyxel Modem Breach Oct/2020</em></li><li><em>Multiple Sigover attack vectors utilizing favicon XML injection</em></li><li><em>JS Stochastic templating utilizing comparison expressions to write to data registers</em></li><li><em>Get strong armed by $50billion companies because i exposed bullshit malware</em></li></ol>



<p><em>And i was rooted and had my important correspondence all rerouted as some sick fuck dismantled my life with the code you have your name plastered all over. I cant even leave the country because of the situation; qas you have so effectively built a code base to shit all over people, I dont give a shit how you feel about this.</em></p>



<p><em>You built a formula 1 race car and tossed the keys to kids with ego problems. Now i have to deal with Win10 0-days because this garbage.</em></p>



<p><em>I lost my family, my country my friends, my home and 6 years of work trying to build a better place for posterity. And it has beginnings in that code. That code is used to root and exploit people. That code is used to blackmail people.</em></p>



<p><em>So no, I don‚Äôt feel bad one bit. You knew exactly the utility of what you were building. And you thought it was all a big joke. Im not laughing. I am so far past that point now.</em></p>



<p><em>/- Al</em></p>



<h2>Al continues</h2>



<p>Nine hours after I first published this blog post , Al replied again with two additional emails. His third and forth emails to me.</p>



<h3>Email 3:</h3>



<p><em><a href="https://davidkrider.com/i-will-slaughter-you-daniel-haxx-se/">https://davidkrider.com/i-will-slaughter-you-daniel-haxx-se/</a><br>Step up. You arent scaring me. What led me here? The 5th violent attempt on my life. Apple terms of service? gtfo, thanks for the platform.</em></p>



<p>Amusingly he has found a blog post about my blog post.</p>



<h3>Email 4:</h3>



<p><em>There is the project: MOUT Ops Risk Analysis through Wide Band Em Spectrum analysis through different fourier transforms.<br>You and whoever the fuck david dick rider is, you are a part of this.<br>Federal server breaches-<br>Accomplice to attempted murder-<br>Fraud-<br>just a few.</em></p>



<p><em>I have talked to now: FBI FBI Regional, VA, VA OIG, FCC, SEC, NSA, DOH, GSA, DOI, CIA, CFPB, HUD, MS, Convercent, as of today 22 separate local law enforcement agencies calling my ass up and wasting my time.</em></p>



<p><em>You and dick ridin‚Äô dave are respinsible. I dont give a shit, call the cops. I cuss them out wheb they call and they all go silent.</em></p>



<p>I‚Äôve kept his peculiar formatting and typos. In email 4 there was also a PDF file attached named <code>BustyBabes 4.pdf</code>. It is apparently a 13 page document about the ‚ÄúNERVEBUS NERVOUS SYSTEM‚Äù described in the first paragraph as ‚ÄúNerveBus Nervous System aims to be a general utility platform that provides comprehensive and complex analysis to provide the end user with cohesive, coherent and ‚Äúreal-time‚Äù information about the environment it monitors.‚Äù. There‚Äôs no mention of curl or my name in the document.</p>



<p>Since I don‚Äôt know the status of this document I will not share it publicly, but here‚Äôs a screenshot of the front page:</p>



<div><figure><a href="https://daniel.haxx.se/blog/wp-content/uploads/2021/02/Screenshot_2021-02-20-BustyBabes-4-pdf.png"><img loading="lazy" src="https://daniel.haxx.se/blog/wp-content/uploads/2021/02/Screenshot_2021-02-20-BustyBabes-4-pdf.png" alt="" width="358" height="462"></a></figure></div>



<h2>Related</h2>



<p>This topic on <a href="https://news.ycombinator.com/item?id=26192025">hacker news</a> and <a href="https://www.reddit.com/r/programming/comments/lnhcrc/i_will_slaughter_you_daniel_stenberg_got_a_quite/">reddit</a>.</p>



<p>I have reported the threat to the Swedish police (where I live).</p>
	</div></div>]]>
            </description>
            <link>https://daniel.haxx.se/blog/2021/02/19/i-will-slaughter-you/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26192025</guid>
            <pubDate>Fri, 19 Feb 2021 11:36:23 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Compressive transformer PyTorch implementation with notes]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26192005">thread link</a>) | @vpj
<br/>
February 19, 2021 | https://nn.labml.ai/transformers/compressive/index.html | <a href="https://web.archive.org/web/*/https://nn.labml.ai/transformers/compressive/index.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="container">
    
    
    <div id="section-0">
        <div>
                
                
<p>This is an implementation of
<a href="https://arxiv.org/abs/1911.05507">Compressive Transformers for Long-Range Sequence Modelling</a>
in <a href="https://pytorch.org/">PyTorch</a>.</p>
<p>This is an extension of <a href="https://nn.labml.ai/transformers/xl/index.html">Transformer XL</a> where past memories
are compressed to give a longer attention range.
That is, the furthest $n_{cm} c$ memories are compressed into
$n_{cm}$ memories, where $c$ is the compression rate.</p>
<h2>Compression operation</h2>
<p>The compression operation is defined as
$f_c: \mathbb{R}^{nc \times d} \rightarrow \mathbb{R}^{n \times d}$.
The paper introduces multiple choices for $f_c$ and we have only implemented
1D convolution which seems to give the best results.
Each layer has a separate compression operation $f_c^{(i)}$ where
$i$ is the layer number.</p>
<h2>Training compression operation</h2>
<p>Since training compression with BPTT requires maintaining
a very large computational graph (many time steps), the paper proposes
an <em>auto-encoding loss</em> and an <em>attention reconstruction loss</em>.
The auto-encoding loss decodes the original memories from the compressed memories
and calculates the loss.
Attention reconstruction loss computes the multi-headed attention results
on the compressed memory and on uncompressed memory and gets a mean squared error
between them.
We have implemented the latter here since it gives better results.</p>
<p>This implementation uses pre-layer normalization
while the paper uses post-layer normalization.
Pre-layer norm does the layer norm before FFN[../feedforward.html) and
self-attention, and the pass-through in the residual connection is not normalized.
This is supposed to be more stable in standard transformer setups.</p>
<p>Here are <a href="https://nn.labml.ai/transformers/compressive/experiment.html">the training code</a> and a notebook for training a compressive transformer
model on the Tiny Shakespeare dataset.</p>
<p><a href="https://colab.research.google.com/github/lab-ml/nn/blob/master/labml_nn/transformers/compressive/experiment.ipynb"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg"></a>
<a href="https://web.lab-ml.com/run?uuid=0d9b5338726c11ebb7c80242ac1c0002"><img alt="View Run" src="https://img.shields.io/badge/labml-experiment-brightgreen"></a></p>
            </div>
            <div>
                <div><pre><span>54</span><span></span><span>from</span> <span>typing</span> <span>import</span> <span>Optional</span><span>,</span> <span>List</span>
<span>55</span>
<span>56</span><span>import</span> <span>torch</span>
<span>57</span><span>import</span> <span>torch.nn.functional</span> <span>as</span> <span>F</span>
<span>58</span><span>from</span> <span>torch</span> <span>import</span> <span>nn</span>
<span>59</span>
<span>60</span><span>from</span> <span>labml_helpers.module</span> <span>import</span> <span>Module</span><span>,</span> <span>TypedModuleList</span>
<span>61</span><span>from</span> <span>labml_nn.transformers.feed_forward</span> <span>import</span> <span>FeedForward</span>
<span>62</span><span>from</span> <span>labml_nn.transformers.mha</span> <span>import</span> <span>PrepareForMultiHeadAttention</span>
<span>63</span><span>from</span> <span>labml_nn.transformers.xl.relative_mha</span> <span>import</span> <span>RelativeMultiHeadAttention</span>
<span>64</span><span>from</span> <span>labml_nn.utils</span> <span>import</span> <span>clone_module_list</span></pre></div>
            </div>
        </div>
    <div id="section-1">
        <div>
                
                <h2>1D Convolution Compression $f_c$</h2>
<p>This is a simple wrapper around
<a href="https://pytorch.org/docs/stable/generated/torch.nn.Conv1d.html"><code>nn.Conv1d</code></a>
with some tensor dimension permutations.</p>
            </div>
            <div>
                <div><pre><span>67</span><span>class</span> <span>Conv1dCompression</span><span>(</span><span>Module</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-2">
        <div>
                
                <ul>
<li><code>compression_rate</code> $c$</li>
<li><code>d_model</code> is the embedding size</li>
</ul>
            </div>
            <div>
                <div><pre><span>75</span>    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>compression_rate</span><span>:</span> <span>int</span><span>,</span> <span>d_model</span><span>:</span> <span>int</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-3">
            
            <div>
                <div><pre><span>80</span>        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span>
<span>81</span>        <span>self</span><span>.</span><span>conv</span> <span>=</span> <span>nn</span><span>.</span><span>Conv1d</span><span>(</span><span>d_model</span><span>,</span> <span>d_model</span><span>,</span> <span>kernel_size</span><span>=</span><span>compression_rate</span><span>,</span> <span>stride</span><span>=</span><span>compression_rate</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-4">
        <div>
                
                <p><code>mem</code> has shape <code>[seq_len, batch, d_model]</code></p>
            </div>
            <div>
                <div><pre><span>83</span>    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>mem</span><span>:</span> <span>torch</span><span>.</span><span>Tensor</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-5">
            <div>
                
                <p>Permute the dimensions of <code>mem</code> so that we can run it through the convolution layer.
The convolution layer accepts in the form <code>[batch, features, sequence]</code></p>
            </div>
            <div>
                <div><pre><span>90</span>        <span>mem</span> <span>=</span> <span>mem</span><span>.</span><span>permute</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>0</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-6">
            <div>
                
                <p>Get compressed memory by running it through the convolution layer</p>
            </div>
            <div>
                <div><pre><span>92</span>        <span>c_mem</span> <span>=</span> <span>self</span><span>.</span><span>conv</span><span>(</span><span>mem</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-7">
            <div>
                
                <p>Permute back to form <code>[seq_len, batch, d_model]</code></p>
            </div>
            <div>
                <div><pre><span>94</span>        <span>return</span> <span>c_mem</span><span>.</span><span>permute</span><span>(</span><span>2</span><span>,</span> <span>0</span><span>,</span> <span>1</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-8">
        <div>
                
                <h2>Compressive Transformer Layer</h2>
<p>This is the implementation of a single compressive transformer layer</p>
            </div>
            <div>
                <div><pre><span>97</span><span>class</span> <span>CompressiveTransformerLayer</span><span>(</span><span>Module</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-9">
        <div>
                
                <ul>
<li><code>d_model</code> is the token embedding size</li>
<li><code>self_attn</code> is the <a href="https://nn.labml.ai/transformers/xl/relative_mha.html">self attention module</a></li>
<li><code>feed_forward</code> is the <a href="https://nn.labml.ai/transformers/feed_forward.html">feed forward module</a></li>
<li><code>dropout_prob</code> is the probability of dropping out after self attention and FFN</li>
<li><code>compress</code> is the compression function $f_c$</li>
</ul>
            </div>
            <div>
                <div><pre><span>103</span>    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>*</span><span>,</span>
<span>104</span>                 <span>d_model</span><span>:</span> <span>int</span><span>,</span>
<span>105</span>                 <span>self_attn</span><span>:</span> <span>RelativeMultiHeadAttention</span><span>,</span>
<span>106</span>                 <span>feed_forward</span><span>:</span> <span>FeedForward</span><span>,</span>
<span>107</span>                 <span>dropout_prob</span><span>:</span> <span>float</span><span>,</span>
<span>108</span>                 <span>compress</span><span>:</span> <span>Conv1dCompression</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-10">
            
            <div>
                <div><pre><span>116</span>        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span>
<span>117</span>        <span>self</span><span>.</span><span>compress</span> <span>=</span> <span>compress</span>
<span>118</span>        <span>self</span><span>.</span><span>size</span> <span>=</span> <span>d_model</span>
<span>119</span>        <span>self</span><span>.</span><span>self_attn</span> <span>=</span> <span>self_attn</span>
<span>120</span>        <span>self</span><span>.</span><span>feed_forward</span> <span>=</span> <span>feed_forward</span>
<span>121</span>        <span>self</span><span>.</span><span>dropout</span> <span>=</span> <span>nn</span><span>.</span><span>Dropout</span><span>(</span><span>dropout_prob</span><span>)</span>
<span>122</span>        <span>self</span><span>.</span><span>norm_self_attn</span> <span>=</span> <span>nn</span><span>.</span><span>LayerNorm</span><span>([</span><span>d_model</span><span>])</span>
<span>123</span>        <span>self</span><span>.</span><span>norm_ff</span> <span>=</span> <span>nn</span><span>.</span><span>LayerNorm</span><span>([</span><span>d_model</span><span>])</span></pre></div>
            </div>
        </div>
    <div id="section-11">
        <div>
                
                <p>Concatenate the normalized token embeddings with memory and compressed memory.</p>
<ul>
<li><code>z</code> is layer normalized token embeddings.</li>
<li><code>mem</code> and <code>c_mem</code> are memory and compressed memory (not normalized).</li>
</ul>
            </div>
            <div>
                <div><pre><span>125</span>    <span>def</span> <span>concat_memory</span><span>(</span><span>self</span><span>,</span> <span>z</span><span>:</span> <span>torch</span><span>.</span><span>Tensor</span><span>,</span> <span>mem</span><span>:</span> <span>Optional</span><span>[</span><span>torch</span><span>.</span><span>Tensor</span><span>],</span> <span>c_mem</span><span>:</span> <span>Optional</span><span>[</span><span>torch</span><span>.</span><span>Tensor</span><span>]):</span></pre></div>
            </div>
        </div>
    <div id="section-12">
            <div>
                
                <p>If there is no memory just return the token embeddings</p>
            </div>
            <div>
                <div><pre><span>134</span>        <span>if</span> <span>mem</span> <span>is</span> <span>None</span><span>:</span>
<span>135</span>            <span>return</span> <span>z</span></pre></div>
            </div>
        </div>
    <div id="section-13">
            <div>
                
                <p>If there are compressed memory concatenate that with memory</p>
            </div>
            <div>
                <div><pre><span>138</span>        <span>if</span> <span>c_mem</span> <span>is</span> <span>not</span> <span>None</span><span>:</span>
<span>139</span>            <span>mem</span> <span>=</span> <span>torch</span><span>.</span><span>cat</span><span>((</span><span>c_mem</span><span>,</span> <span>mem</span><span>),</span> <span>dim</span><span>=</span><span>0</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-14">
            <div>
                
                <p>Run the memory through the normalization layer</p>
            </div>
            <div>
                <div><pre><span>142</span>        <span>mem</span> <span>=</span> <span>self</span><span>.</span><span>norm_self_attn</span><span>(</span><span>mem</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-15">
            <div>
                
                <p>Concatenate normalized memory and normalized token embeddings</p>
            </div>
            <div>
                <div><pre><span>144</span>        <span>return</span> <span>torch</span><span>.</span><span>cat</span><span>((</span><span>mem</span><span>,</span> <span>z</span><span>),</span> <span>dim</span><span>=</span><span>0</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-16">
        <div>
                
                <ul>
<li><code>x</code> is a tensor of token level feature vectors of shape <code>[seq_len, batch_size, d_model]</code></li>
<li><code>mem</code> is a tensor of the past token level feature vectors (memory) of shape <code>[mem_len, batch_size, d_model]</code></li>
<li><code>c_mem</code> is a tensor of the compressed memory <code>[c_mem_len, batch_size, d_model]</code></li>
<li><code>mask</code> is a matrix of shape <code>[seq_len, c_mem_len + mem_len + seq_len, batch_size]</code> or <code>[seq_len, c_mem_len + mem_len + seq_len, 1]</code>.
<code>mask[i, j]</code> is  true if token at <code>i</code> can see token at <code>j</code>.</li>
</ul>
            </div>
            <div>
                <div><pre><span>146</span>    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>*</span><span>,</span>
<span>147</span>                <span>x</span><span>:</span> <span>torch</span><span>.</span><span>Tensor</span><span>,</span>
<span>148</span>                <span>mem</span><span>:</span> <span>Optional</span><span>[</span><span>torch</span><span>.</span><span>Tensor</span><span>],</span>
<span>149</span>                <span>c_mem</span><span>:</span> <span>Optional</span><span>[</span><span>torch</span><span>.</span><span>Tensor</span><span>],</span>
<span>150</span>                <span>mask</span><span>:</span> <span>torch</span><span>.</span><span>Tensor</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-17">
            <div>
                
                <p>Normalize the vectors before doing self attention</p>
            </div>
            <div>
                <div><pre><span>160</span>        <span>z</span> <span>=</span> <span>self</span><span>.</span><span>norm_self_attn</span><span>(</span><span>x</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-18">
            <div>
                
                <p>Normalize and concatenate memory and compressed memory</p>
            </div>
            <div>
                <div><pre><span>162</span>        <span>m_z</span> <span>=</span> <span>self</span><span>.</span><span>concat_memory</span><span>(</span><span>z</span><span>,</span> <span>mem</span><span>,</span> <span>c_mem</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-19">
            
            <div>
                <div><pre><span>164</span>        <span>self_attn</span> <span>=</span> <span>self</span><span>.</span><span>self_attn</span><span>(</span><span>query</span><span>=</span><span>z</span><span>,</span> <span>key</span><span>=</span><span>m_z</span><span>,</span> <span>value</span><span>=</span><span>m_z</span><span>,</span> <span>mask</span><span>=</span><span>mask</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-20">
            <div>
                
                <p>Add the attention results</p>
            </div>
            <div>
                <div><pre><span>166</span>        <span>x</span> <span>=</span> <span>x</span> <span>+</span> <span>self</span><span>.</span><span>dropout</span><span>(</span><span>self_attn</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-21">
            <div>
                
                <p>Normalize for feed-forward</p>
            </div>
            
        </div>
    <div id="section-22">
            <div>
                
                <p>Pass through the feed-forward network</p>
            </div>
            <div>
                <div><pre><span>171</span>        <span>ff</span> <span>=</span> <span>self</span><span>.</span><span>feed_forward</span><span>(</span><span>z</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-23">
            <div>
                
                <p>Add the feed-forward results back</p>
            </div>
            <div>
                <div><pre><span>173</span>        <span>x</span> <span>=</span> <span>x</span> <span>+</span> <span>self</span><span>.</span><span>dropout</span><span>(</span><span>ff</span><span>)</span></pre></div>
            </div>
        </div>
    
    <div id="section-25">
        <div>
                
                <h2>Compressive Transformer Model</h2>
<p>This consists of multiple compressive transformer layers</p>
            </div>
            <div>
                <div><pre><span>179</span><span>class</span> <span>CompressiveTransformer</span><span>(</span><span>Module</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-26">
            
            <div>
                <div><pre><span>186</span>    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>layer</span><span>:</span> <span>CompressiveTransformerLayer</span><span>,</span> <span>n_layers</span><span>:</span> <span>int</span><span>):</span>
<span>187</span>        <span>super</span><span>()</span><span>.</span><span>__init__</span><span>()</span></pre></div>
            </div>
        </div>
    <div id="section-27">
            <div>
                
                <p>Make copies of the transformer layer</p>
            </div>
            <div>
                <div><pre><span>189</span>        <span>self</span><span>.</span><span>layers</span> <span>=</span> <span>clone_module_list</span><span>(</span><span>layer</span><span>,</span> <span>n_layers</span><span>)</span></pre></div>
            </div>
        </div>
    <div id="section-28">
            <div>
                
                <p>Final normalization layer</p>
            </div>
            <div>
                <div><pre><span>191</span>        <span>self</span><span>.</span><span>norm</span> <span>=</span> <span>nn</span><span>.</span><span>LayerNorm</span><span>([</span><span>layer</span><span>.</span><span>size</span><span>])</span></pre></div>
            </div>
        </div>
    <div id="section-29">
        <div>
                
                <ul>
<li><code>x</code> is a tensor of the token embeddings vectors of shape <code>[seq_len, batch_size, d_model]</code></li>
<li><code>mem</code> is a list of tensors of the past token level feature vectors of shape
 <code>[mem_len, batch_size, d_model]</code> for each layer</li>
<li><code>c_mem</code> is a list of tensors of the compressed memory
 <code>[c_mem_len, batch_size, d_model]</code> for each layer</li>
<li><code>mask</code> is the masking matrix</li>
</ul>
            </div>
            <div>
                <div><pre><span>193</span>    <span>def</span> <span>forward</span><span>(</span><span>self</span><span>,</span> <span>x</span><span>:</span> <span>torch</span><span>.</span><span>Tensor</span><span>,</span> <span>mem</span><span>:</span> <span>List</span><span>[</span><span>torch</span><span>.</span><span>Tensor</span><span>],</span> <span>c_mem</span><span>:</span> <span>List</span><span>[</span><span>torch</span><span>.</span><span>Tensor</span><span>],</span> <span>mask</span><span>:</span> <span>torch</span><span>.</span><span>Tensor</span><span>):</span></pre></div>
            </div>
        </div>
    <div id="section-30">
            <div>
                
                <p>List to store token level feature vectors,
which will become the memories for the next sequential batch.</p>
            </div>
            
        </div>
    <div id="section-31">
        ‚Ä¶</div></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://nn.labml.ai/transformers/compressive/index.html">https://nn.labml.ai/transformers/compressive/index.html</a></em></p>]]>
            </description>
            <link>https://nn.labml.ai/transformers/compressive/index.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26192005</guid>
            <pubDate>Fri, 19 Feb 2021 11:34:03 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Towards a sustainable solution to open source sustainability]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26191853">thread link</a>) | @polm23
<br/>
February 19, 2021 | https://speaking.unlockopen.com/5JrQdv/towards-a-sustainable-solution-to-open-source-sustainability | <a href="https://web.archive.org/web/*/https://speaking.unlockopen.com/5JrQdv/towards-a-sustainable-solution-to-open-source-sustainability">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <div id="desc">
        <p>A few years ago, Heartbleed epitomized a massive open source sustainability problem for critical parts of the internet infrastructure. The bug, which affected the popular OpenSSL cryptographic software library, notably compromised the confidentiality of 4.5 million US patient records and cost the industry an estimated $500M.</p>
<p>It was soon revealed that the root-cause of the issue was that OpenSSL was precariously understaffed. Open source sustainability became a major theme overnight. Stories of maintainer burn-out made the headlines. And tentative solutions started to emerge, most of them donation-based.</p>
<p>In this talk we‚Äôll explore a number of existing strategies to fund open source and make it more sustainable, from patronage to dedicated ad networks. And we‚Äôll defend the idea that the best path to open source sustainability is to help companies understand the tangible business value they can get from contributing to open source.</p>

    </div>
</div></div>]]>
            </description>
            <link>https://speaking.unlockopen.com/5JrQdv/towards-a-sustainable-solution-to-open-source-sustainability</link>
            <guid isPermaLink="false">hacker-news-small-sites-26191853</guid>
            <pubDate>Fri, 19 Feb 2021 11:14:39 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[OpenNebula EE Maintenance Release 5.12.8 is available]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26191673">thread link</a>) | @amarti
<br/>
February 19, 2021 | https://opennebula.io/opennebula-enterprise-edition-maintenance-release-v-5-12-8-is-available/ | <a href="https://web.archive.org/web/*/https://opennebula.io/opennebula-enterprise-edition-maintenance-release-v-5-12-8-is-available/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div id="main">
			    <!-- .entry-header -->

				
					
<article id="post-30088">

    <!-- .entry-header -->

    <div>

		<p>The <strong>Enterprise Edition</strong> of OpenNebula is a tested, hardened, and production-ready version that incorporates additional bug fixes and software patches with minor enhancements developed by OpenNebula Systems.</p>
<p>While we make all our products open source under Apache License Version 2.0, the packages of the<strong> Enterprise Edition</strong> and the <strong>Enterprise Tools</strong> we‚Äôve created for Corporate Users are distributed under commercial license terms only to those customers with an active <a href="https://opennebula.io/subscriptions" target="_blank" rel="noopener noreferrer">OpenNebula Subscription</a>.</p>
<p>The following <strong>new features</strong> has been backported to 5.12.8:</p>
<ul>
<li>Add option to disable raw section validation.</li>
</ul>
<p>The following <strong>issues</strong> has been solved in 5.12.8:</p>
<ul>
<li>Fix RAFT Race condition when node fail to become leader.</li>
<li>Fix update service cardinality when terminating a VM.</li>
<li>Fix set VCPU range on Sunstone.</li>
<li>Fix OneGate context attributes when update VM template on Sunstone.</li>
<li>Fix update of the host zombie VM list.</li>
<li>Fix alias IPs in service role VM on Sunstone.</li>
<li>Fix option to edit VCENTER_PASSWORD from Sunstone.</li>
<li>Fix VM disk monitor for shared storage datastores.</li>
<li>Fix IPs dropdown on VMs datatable.</li>
<li>Fix monitoring IPs on Sunstone.</li>
</ul>
<p>If you are a customer with an active<strong> OpenNebula Subscription</strong>, you have immediate access to the packages for this EE Maintenance Release. Please <strong>check your private repository</strong> at the <a href="https://support.opennebula.pro/" target="_blank" rel="noopener noreferrer">OpenNebula Customer Portal</a>.</p>




		
		


        <div>
            <p><img alt="" src="https://secure.gravatar.com/avatar/a1737e9efc6920480d8a1abc8d21fd64?s=96&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/a1737e9efc6920480d8a1abc8d21fd64?s=192&amp;d=mm&amp;r=g 2x" height="96" width="96" loading="lazy">            </p>
            <div>
                <p><span id="autorblog">Michael Abdou</span></p><p>Customer Success Manager at OpenNebula</p>
            </div>
        </div>
	</div><!-- .entry-content -->

</article><!-- #post-## -->

					
<!-- #comments -->

				
			</div></div>]]>
            </description>
            <link>https://opennebula.io/opennebula-enterprise-edition-maintenance-release-v-5-12-8-is-available/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26191673</guid>
            <pubDate>Fri, 19 Feb 2021 10:49:32 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[How to be more productive without forcing yourself]]>
            </title>
            <description>
<![CDATA[
Score 248 | Comments 120 (<a href="https://news.ycombinator.com/item?id=26191516">thread link</a>) | @vitabenes
<br/>
February 19, 2021 | https://www.deprocrastination.co/blog/how-to-be-productive-without-forcing-yourself | <a href="https://web.archive.org/web/*/https://www.deprocrastination.co/blog/how-to-be-productive-without-forcing-yourself">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article><p><img src="https://www.deprocrastination.co/assets/illustrations/work_bad_rect.png" referrerpolicy="no-referrer" alt="How to be more productive without forcing yourself"></p><p>Imagine you could work more and be wildly productive. And the best thing about it? You wouldn‚Äôt need to force yourself to work.</p><p>There are people exactly like that who sit down and work without pushing themselves to do it. They even look forward to working. The good news is that you can learn to do it too.</p><p>Let‚Äôs get to it.</p><p>Most people have a negative mindset about work. People see work as an annoyance that keeps them from doing whatever they really want to do. They also think that resting and having nothing to do is an ideal state they‚Äôd like to be in forever. This leads to thinking that you need to push yourself to work. You need to use willpower to get yourself to do it.</p><p>It‚Äôs simple to understand where this attitude comes from:</p><ol><li>People usually want things they don‚Äôt have and think that grass is greener on the other side.</li><li>Everyone talks about how work is hard.</li><li>In comparison to dead-end or corporate jobs without impact or freedom, neverending leisure looks like paradise.</li></ol><p>In reality, most people who try to be in this nothing-to-do state for a long time become unhappy, depressed, and bored. Rich people who ‚Äúmade it‚Äù report how soon they become restless again.&nbsp;<a href="https://www.reddit.com/r/StopGaming/">People who game all the time</a>&nbsp;realize how empty it feels. Too much leisure isn‚Äôt satisfying for long.</p><p>On the other hand, there is a certain group of people who work a lot and enjoy it. Let‚Äôs call this group&nbsp;<em>producers</em>. By this, we don‚Äôt mean workaholics who escape from their whole life by working all the time. Producers have a healthy work-life balance. So what do they do that people who hate work don‚Äôt?</p><p>First, they tend to think about work differently.</p><p>For them, work is&nbsp;<a href="https://www.deprocrastination.co/blog/what-is-a-positive-feedback-loop-and-why-it-matters">a virtuous cycle of positive feedback loops</a>. Producers see&nbsp;<strong>work as a source of meaning and satisfaction</strong>. They see work as something that allows them to savor deserved leisure. They see rest as something that increases their life happiness and fuels their motivation towards work.</p><p>Second, their work is usually:</p><ul><li>Interesting</li><li>Meaningful</li><li>Well-defined</li></ul><p>If you check at least 1 or 2 boxes somehow, something magical happens:</p><p><strong>You don‚Äôt have to push yourself towards work anymore.</strong></p><p>Well-defined, meaningful, and especially interesting work is easy to look forward to.</p><p>Non-producers often think that these producers are lucky because they stumbled upon work like this. In reality, producers often go a long way to make their work fun.</p><h2>How to make work more interesting</h2><p>This is the crucial factor in whether work gets done.</p><p>You don‚Äôt have to see any meaning in your work for it to be interesting.</p><p>Even if the task is totally undefined, complex, and difficult, curiosity can carry you to its completion.</p><p>So how can you develop this curiosity towards work?</p><p>You have to give the work a chance to become interesting. How? By combining these 3 steps:</p><h3>1. Have less exposure towards super fun things</h3><p>Video games, surfing the internet, porn, alcohol, and drugs etc. make work significantly more difficult. Why?</p><p>They establish a certain standard of mental stimulation. Anything that‚Äôs not super fun will seem boring.</p><p><img src="https://www.deprocrastination.co/assets/illustrations/stimulation_standard.png" referrerpolicy="no-referrer" alt="We develop a Stimulation Standard"></p><p>Unfortunately, work often falls in the ‚Äúfeels bad‚Äù category. In comparison to games or social media, work can feel uninteresting or annoying.</p><p><img src="https://www.deprocrastination.co/assets/illustrations/stimulation_work_distractions.png" referrerpolicy="no-referrer" alt="Switching from distractions to work is hard"></p><p>You might argue that there are people who work just fine even while drinking alcohol, playing video games etc.</p><p>However, consider that there are two types of people: ones who can moderate their consumption and others who can‚Äôt. The latter society often describes as addicts.</p><p>Basically, if you‚Äôre addicted to any of the high-dopamine, low-effort activity, please quit it. At least temporarily so you can reestablish a healthy relationship to work. The more experienced we‚Äôre about the topic, the more obvious this is. There is no other way than to temporarily quit the addiction. If your vice is gaming, we‚Äôve covered&nbsp;<a href="https://www.deprocrastination.co/blog/should-i-quit-video-games">video gaming addiction here</a>.</p><p>Some can have a healthy relationship with, for example, gaming.</p><p>However, for some people gaming is kryptonite. Here are some signs that super-fun activities have a detrimental effect on your work:</p><ol><li>You rush and half-ass everything else in order to get to your super-fun activity.         When I (Mat) was addicted to gaming, everything during the day was half-assed so I could finally start playing.</li><li>You keep postponing or forgetting everything that isn‚Äôt urgent in order to get to your super fun activity. You have this book that you want to read but you never get to actually reading it.</li><li>Your orderliness suffers once you start with the super fun activity.        Most people who come back to gaming report how their sense of orderliness starts to depreciate rather quickly. Their room gets messy, they start skipping workouts, stop meal-prepping, start eating more junk food, stop organizing their days.</li></ol><p>If the points above describe you, it might be time to quit your super fun activity. At least for a while.</p><p>Once your brain is not constantly hyper-stimulated, it‚Äôs easier to find mundane activities like work or tidying more interesting.</p><h3>2. Get bored more often</h3><p>When you get bored, everything else becomes more interesting.</p><p>Don‚Äôt believe us? Try this little experiment. Turn everything off. Set a timer for 15 minutes. Sit on a chair and stare at a wall. Don‚Äôt move. Don‚Äôt consume any information. Don‚Äôt talk. Don‚Äôt write anything down. Just stare at the wall.</p><p>Except for zen masters, most of us will become restless after a few minutes. Often, our brain starts dreaming and imagining things. For the first few minutes, you might feel alright, thinking about your day. However, after 5 or 10 minutes, you‚Äôll be itching to do something, anything really. Suddenly, creating a website, writing an article, or drawing a picture sounds like more interesting, more fun.</p><p><img src="https://www.deprocrastination.co/assets/illustrations/stimulation_work_boredom.png" referrerpolicy="no-referrer" alt="Switching from boredom to work is easier"></p><p>If you feel like you never stop scrolling and consume content all the time, schedule a 15 minute boredom window for tomorrow right before you want to start working.&nbsp;<a href="https://www.deprocrastination.co/blog/how-to-use-boredom-to-procrastinate-less">Use boredom strategically.</a></p><h3>3. Dive deep into a topic</h3><p>It‚Äôs fun when we can connect the dots. When we can draw new connections between ideas, we get a rush.&nbsp;<em>Oh, I can see how this historical event contributed to an uprising‚Ä¶</em></p><p>The more connections we can draw within a topic, the more interested we become. This is what curiosity is all about.</p><p>If you take the time to watch a documentary related to what you‚Äôre working on, read a book about it, or find a couple relevant articles. You‚Äôll collect more dots to connect. You‚Äôll see how everything fits together.</p><p>When you do feel like watching something or have a free evening, instead of watching random videos or reruns of old TV shows, steer your attention to something related to what you need to do.</p><p>Give yourself time to develop an interest.</p><h2>How to make work more meaningful</h2><p>It's hard to feel motivated when you don't have a personal reason to do something.</p><p>However, ‚Äúmeaningful work‚Äù has become something of a buzzword.</p><p>Everyone is trying to find meaning in their work. This can be wasted energy, especially if you work in a corporate or a dead-end job. We say this so you don‚Äôt dwell on it and don‚Äôt feel frustrated because you can‚Äôt figure out how to save the world by doing what you do.</p><p>In any case, whatever your work is, you can make it meaningful enough to start.</p><p>Let‚Äôs say you have to study for an exam. You don‚Äôt find this particular class enjoyable. If you remind yourself why you chose to take the class and why studying is important for you, you will have an easier time persuading yourself to push through.</p><p>The fact is that some things simply need to be done. It's better if you find a compelling and personal reason to do them and get them over with as soon as possible, instead of putting them off forever.</p><p>When something is boring, ask yourself: Why do I need to do this? Find and reinforce the why behind the work.</p><h2>How to make work well-defined</h2><p>If you have a recipe that tells you step-by-step how to cook a meal, it is usually quite easy to follow. You know exactly where to start and how.</p><p>In today‚Äôs creative work, this often isn‚Äôt the case. There are no recipes for the work we need to do, or they don‚Äôt make the work any easier because the recipe would be too complex to understand.</p><p>Additionally, we often hamper our enthusiasm towards work by ourselves. How often do you find yourself with vague and unhelpful to-dos like ‚Äúwrite the essay‚Äù or ‚Äúmake a video.‚Äù</p><p>There are so many steps in ‚Äúmake a video‚Äù that this vague task definition only causes anxiety and procrastination.</p><p>We always say that it‚Äôs more difficult to start working than to keep working. Therefore we should make starting easier by defining well&nbsp;<em>how</em>&nbsp;to begin and&nbsp;<em>what</em>&nbsp;to begin with.</p><p>The better you can define how to start working, the easier it‚Äôll be to actually do it.</p><p>Basically, you do this in 3 steps:</p><h3>1. Always define exactly where you‚Äôll start</h3><p>This means you write down the next physical action to take.</p><p>Do you need to write an essay?</p><p>The next physical action is: Open the scientific study and start reading</p><p>Or: Create a document ‚Üí Create a rough draft in the next 15 minutes</p><p>Do you want to start learning coding?</p><p>The next physical action should be: Open freecodecamp.org ‚Üí Start solving the first challenge</p><p>It might sound silly to define the next physical action, but it isn‚Äôt. Finding it is easy, and you can do it immediately.</p><p>What‚Äôs the next physical action you need to take?</p><h3>2. Start with only having to work for 5/15 minutes</h3><p>You probably don't feel like creating a 20 slide presentation right now from scratch, and then presenting it in 2 hours.</p><p>You don't feel like writing a whole final thesis on a topic you barely know.</p><p>You don't feel like running a marathon.</p><p>But you might feel like looking up a couple pictures or articles for the presentation.</p><p>Or feel like writing a paragraph or two before lunch break.</p><p>Or feel like taking a 1km walk.</p><p>Those are the small steps along the longer journey.</p><p>We often underestimate the power of small steps, but they are essential because they help us get into the right routine.</p><p>If you start running a couple miles every other day, you'll get familiar with the routine and then you'll naturally want to start increasing the ‚Ä¶</p></article></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.deprocrastination.co/blog/how-to-be-productive-without-forcing-yourself">https://www.deprocrastination.co/blog/how-to-be-productive-without-forcing-yourself</a></em></p>]]>
            </description>
            <link>https://www.deprocrastination.co/blog/how-to-be-productive-without-forcing-yourself</link>
            <guid isPermaLink="false">hacker-news-small-sites-26191516</guid>
            <pubDate>Fri, 19 Feb 2021 10:27:31 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[German Physicist professor says evidence points to Covid escaped from lab]]>
            </title>
            <description>
<![CDATA[
Score 7 | Comments 4 (<a href="https://news.ycombinator.com/item?id=26191355">thread link</a>) | @dominik-2020
<br/>
February 19, 2021 | https://www.uni-hamburg.de/newsroom/presse/2021/pm8.html | <a href="https://web.archive.org/web/*/https://www.uni-hamburg.de/newsroom/presse/2021/pm8.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><div><p><img alt="Prof. Dr. Roland Wiesendanger" src="https://assets.rrz.uni-hamburg.de/instance_assets/uni/15056328/wisendanger-733x414-screen-6a3135136ea4c8abccd4c1a6e9d4b3b49f85e7e1.jpg"></p><p>Foto: Sebastian Engels</p><p>Prof. Dr. Roland Wiesendanger</p></div><p>Seit mehr als einem Jahr sorgt das Coronavirus f√ºr eine weltweite Krise. In einer Studie hat nun der Nanowissenschaftler Prof. Dr. Roland Wiesendanger den Ursprung des Virus beleuchtet. Er kommt zu dem Ergebnis, dass sowohl die Zahl als auch die Qualit√§t der Indizien f√ºr einen Laborunfall am virologischen Institut der Stadt Wuhan als Ursache der gegenw√§rtigen Pandemie sprechen.</p><p>Die Studie wurde im Zeitraum von Januar 2020 bis Dezember 2020 durchgef√ºhrt. Sie basiert auf einem interdisziplin√§ren wissenschaftlichen Ansatz sowie auf einer umfangreichen Recherche unter Nutzung verschiedenster Informationsquellen. Hierzu geh√∂ren unter anderem wissenschaftliche Literatur, Artikel in Print- und Online-Medien sowie pers√∂nliche Kommunikation mit internationalen Kolleginnen und Kollegen. Sie liefert keine hochwissenschaftlichen Beweise, wohl aber zahlreiche und schwerwiegende Indizien:</p>
<ul>
<li>Im Gegensatz zu fr√ºheren Coronaviren-bedingten Epidemien wie SARS und MERS konnte bis heute, d. h. weit √ºber ein Jahr nach Ausbruch der gegenw√§rtigen Pandemie, kein Zwischenwirtstier identifiziert werden, welches die √úbertragung von SARS-CoV-2-Erregern von Flederm√§usen auf den Menschen erm√∂glicht haben k√∂nnte. Die Zoonose-Theorie als m√∂gliche Erkl√§rung f√ºr die Pandemie besitzt daher keine fundierte wissenschaftliche Grundlage.</li>
<li>Die SARS-CoV-2-Viren k√∂nnen erstaunlich gut an menschliche Zellrezeptoren ankoppeln und in menschliche Zellen eindringen. Erm√∂glicht wird dies durch spezielle Zellrezeptor-Bindungsdom√§nen verbunden mit einer speziellen (Furin-)Spaltstelle des Coronavirus-Zacken-Proteins. Beide Eigenschaften zusammen waren bislang bei Coronaviren nicht bekannt und weisen auf einen nicht-nat√ºrlichen Ursprung des SARS-CoV-2-Erregers hin.</li>
<li>Flederm√§use wurden nicht auf dem in Verdacht geratenen Fischmarkt im Zentrum der Stadt Wuhan angeboten. Im virologischen Institut der Stadt Wuhan gibt es jedoch eine der weltweit gr√∂√üten Sammlungen von Fledermauserregern, welche von weit entfernten H√∂hlen in s√ºdchinesischen Provinzen stammen. Es ist extrem unwahrscheinlich, dass sich Flederm√§use aus dieser Entfernung von nahezu 2.000 km auf nat√ºrliche Weise auf den Weg nach Wuhan begeben haben, um dann in unmittelbarer N√§he dieses virologischen Instituts eine weltweite Pandemie auszul√∂sen.</li>
<li>Eine Forschungsgruppe am virologischen Institut der Stadt Wuhan hat √ºber viele Jahre hinweg gentechnische Manipulationen an Coronaviren vorgenommen mit dem Ziel, diese f√ºr Menschen ansteckender, gef√§hrlicher und t√∂dlicher zu machen. Dies ist in der wissenschaftlichen Fachliteratur durch zahlreiche Publikationen belegt.</li>
<li>Es existierten erhebliche Sicherheitsm√§ngel im virologischen Institut der Stadt Wuhan bereits vor Ausbruch der Coronavirus-Pandemie, welche dokumentiert sind.</li>
<li>Es gibt zahlreiche direkte Hinweise auf einen Laborursprung des SARS-CoV-2 Erregers. So soll sich eine junge Wissenschaftlerin des virologischen Instituts in Wuhan als erste infiziert haben. Es gibt ferner zahlreiche Hinweise darauf, dass sich bereits im Oktober 2019 der SARS-CoV-2 Erreger ausgehend von dem virologischen Institut in der Stadt Wuhan und dar√ºber hinaus verbreitet hat. Ferner gibt es Hinweise auf eine entsprechende Untersuchung des virologischen Instituts durch die chinesischen Beh√∂rden in der ersten Oktoberh√§lfte 2019.&nbsp; &nbsp;</li>
</ul>
<p>&nbsp;‚ÄûDie gegenw√§rtige Coronavirus-Pandemie beherrscht nicht nur die derzeitigen Schlagzeilen, sondern wird uns noch √ºber viele Jahre hinweg besch√§ftigen ‚Äì nicht zuletzt aufgrund der sozialen und wirtschaftlichen Auswirkungen. Seit Monaten steht verst√§ndlicherweise der Umgang mit und die Bew√§ltigung von der Corona-Krise im Vordergrund der Themen in der Politik und in den Medien. Von gro√üer Bedeutung ist jedoch schon heute die kritische wissenschaftsbasierte Auseinandersetzung mit der Frage nach dem Ursprung der derzeitigen Pandemie, denn nur auf Basis dieses Wissens k√∂nnen ad√§quate Vorkehrungen getroffen werden, die Wahrscheinlichkeit f√ºr das Auftreten √§hnlicher Pandemien in Zukunft so klein wie m√∂glich zu halten‚Äú, sagt Prof. Dr. Roland Wiesendanger.</p>
<p>Die Studie wurde im Januar 2021 fertiggestellt und zun√§chst in Wissenschaftskreisen verteilt und diskutiert. Mit der Ver√∂ffentlichung soll nun eine breit angelegte Diskussion angeregt werden, insbesondere im Hinblick auf die ethischen Aspekte der sogenannten ‚Äûgain-of-function‚Äú-Forschung, welche Krankheitserreger f√ºr Menschen ansteckender, gef√§hrlicher und t√∂dlicher macht. ‚ÄûDies kann nicht l√§nger nur Angelegenheit einer kleinen Gruppe von Wissenschaftlerinnen und Wissenschaftlern bleiben, sondern muss dringend Gegenstand einer √∂ffentlichen Debatte werden‚Äú, so der Autor der Studie.&nbsp;</p>
<p>Die Studie ist ver√∂ffentlicht unter: <a href="http://doi.org/10.13140/RG.2.2.31754.80323" target="_blank">http://doi.org/10.13140/RG.2.2.31754.80323</a></p><p><a target="_blank" href="https://www.uni-hamburg.de/newsroom/presse/2021/pm8/pm-8-21.pdf">Pressemitteilung als PDF</a></p></div></div></div>]]>
            </description>
            <link>https://www.uni-hamburg.de/newsroom/presse/2021/pm8.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26191355</guid>
            <pubDate>Fri, 19 Feb 2021 10:00:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[I made a PRORES-lookalike for Windows]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26191274">thread link</a>) | @CinematicStudio
<br/>
February 19, 2021 | https://cinematicstudio.app/blog/prores.html | <a href="https://web.archive.org/web/*/https://cinematicstudio.app/blog/prores.html">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><section>
            <div>
                <div>
					
					<div>
					<h2>
					I made a PRORES-lookalike for Windows
					</h2>



					
					
					<h2>Preface ‚Äì What is PRORES?
					</h2>
					<p>
PRORES is a line of intermediate codecs, which means they are intended for use during video editing, and not for practical end-user viewing. It‚Äôs been developed by Apple, back in 2007 (<a href="https://en.wikipedia.org/wiki/Apple_ProRes" target="_blank">Wikipedia</a>).
</p>


					<h2>Why did I do it?
					</h2>
					<div><p>
There have been several reasons, but it all boils down to: I got very frustrated with the implementation of the Windows decoders when dealing with .mp4 (h264 and h265 codecs) ‚Äì which are pretty much 98% of all videos out there.<br>

Since I‚Äôm actually developing a <a href="https://cinematicstudio.app/" target="_blank">video editor</a>, when it comes to loading video frames in memory, you can:<br>
1. use <a href="https://docs.microsoft.com/en-us/uwp/api/windows.media.playback.mediaplayer?view=winrt-19041" target="_blank">MediaPlayer</a> class, from Microsoft<br>
2. use <a href="https://ffmpeg.org/" target="_blank">ffmpeg</a></p><p>


MediaPlayer is unreliable and slow <a href="#n1">[1]</a>. And, wait for it, it has Video RAM memory leaks <a href="#n2">[2]</a>.<br>

Using ffmpeg: Most advice on the internet ‚Äì whether you can use ffmpeg in a commercial app or not ‚Äì ends with ‚Äúbut I‚Äôm not a lawyer‚Äù. I chose to avoid it, at least at the beginning <a href="#n3">[3]</a>. </p><p>

I initially went with using MediaPlayer. This frustrated me (and a lot of my users) a lot, making my app close to impossible to use in certain scenarios. Like, what if I want to play a video backwards, at 3x speed? What I‚Äôd do is cache that specific video segment ahead of time ‚Äì which not only did take a lot of RAM, but it also made my app show the ‚ÄúLoading‚Äù icon when you would press Play ‚Äì until I would pre-load all such segments.</p><p>

At some point I painfully realized: if I don‚Äôt do something similar to PRORES, I‚Äôm screwed. Clearly, the first idea was ‚Äì what if I could use the codecs from Apple? Spoiler alert: you can‚Äôt. <br>

So, what else could I do? Develop my own!

</p></div>





					<h2>Lets see the numbers!
					</h2>
					<div><p>
Well, I can‚Äôt say it was easy to develop this. I had to get creative quite a few times. But once I realized there‚Äôs really no way around it, I stuck with it. And I‚Äôve created some limitations, just to make sure frames will load up insanely fast.</p><p>

When you hit Play, the video project will strive to play at 60 frames / second ‚Äì even if your video project is 30 fps or something else. </p><p>

What this basically means, I have 16.66 milliseconds to load everything that‚Äôs needed (which if you have several video layers, means loading several video frames) and apply video effects on top of that. And, play the sound, of course.</p><p>

We can relax this requirement a bit, because even if the video project would play at 30 frames / second, it would still look smooth to you. So, I have 33.33 milliseconds tops to load all needed video frames and apply video effects on top of that.</p><p>

Applying video effects, such as blur, directional blur, masking, lighting takes an insane amount of time. By doing a lot of trial and error, I chose to do it like this ‚Äì I will show the video at 640 x 360 (no, it‚Äôs not as low res as you may think <a href="#n4">[4]</a>). This will make frame loading very fast, and the video effects will be fast as well. I will improve upon this <a href="#n5">[5]</a>.</p><p>

Complicated video effects can take up to 5ms on a decent GPU. They take slightly longer on older GPUs, but it‚Äôs still decent. It can take up to 9ms on an Nvidia Quadro M600M with 2GB of RAM (a 5-year old video card). Compounding video effects (several effects on top of each other) will be a bit harder <a href="#n6">[6]</a>.</p><p>

This still leaves us with 24.33 milliseconds to load video frames. In my tests, I load one video frame in 2ms on an Nvidia Geforce RTX 2070, and 3.45ms on Nvidia Quadro M600M. So, worst case scenario, I could still load 6-7 video frames in time for drawing them on-screen.</p><p>

One thing to note is that you will need a decent SSD for this to happen. Or, do a ‚Äúsacrifice play‚Äù ‚Äì basically hit Play, and this will be a bit slower the first time, so that Windows will be able to cache the video files in memory.
					
</p></div>


					<h2>Creating the PRORES-lookalike files
					</h2>
					<div><p>
When you import a video file, I will automatically create the PRORES-lookalike file. There‚Äôs no point in using MediaPlayer until the PRORES-lookalike is complete ‚Äì it would drain further resources (Memory + CPU + GPU) with very little gains.</p><p>

One thing I do, while creating the PRORES-lookalike, I will keep in memory the first 3.5 minutes of the video, thus, you can still have a decent preview in real-time while I‚Äôm doing this.</p><p>

To give you the numbers, it‚Äôs not something set in stone, it depends on the video I‚Äôm converting. It will range between 15-18 times faster than duration of the video on my Geforce RTX 2070 card. So for instance, it takes roughly 3:20 minutes to process a 1 hour video.</p></div>


					<h2>Behind the scenes
					</h2>
					<p>
What I‚Äôm doing is something remarkably simple, and after running a lot of tests, I realized it‚Äôs enough, at least for now. It‚Äôs similar to <a href="https://en.wikipedia.org/wiki/Motion_JPEG" target="_blank">Motion JPEG</a>, with the difference that I‚Äôm in control 100%. In other words, I always get to decide when each video frame is loaded and how long it stays in memory.					
</p>


					<h2>Is this battle tested?
					</h2>
					<p>
Yes! I‚Äôve had this in production since late September 2020. I‚Äôve done a few tweaks along the way, but the core code is the same.</p>


					<h2>How does it compare with ffmpeg?
					</h2>
					<p>
My take is that it‚Äôs 6-10 times faster. I‚Äôve looked into it in the last few days, but I can‚Äôt do a proper test just yet. I‚Äôve used <a href="https://github.com/unosquare/ffmediaelement" target="_blank">FFMediaElement library</a> to do some testing, but I can‚Äôt get it to use GPU (I did ask in the forum, will publish the results once I have them). At this time, for a 4K video, my results indicate processing a video frame takes 77ms on the CPU on my machine with the Geforce video card. I assume the GPU should be 5-7 times faster, thus it would likely take somewhere between 11-15ms, compared to 2ms for me.
</p>

					<h2>How does it compare with Apple PRORES?
					</h2>
					<div><p>
Honestly, I don‚Äôt know. I would say it should be roughly on-par, since I‚Äôm pretty sure the underlying concepts should be similar. It may be that Apple might generate the PRORES files faster, I‚Äôm not sure. But accessing them, I would say we should see similar times.</p><p>

If anyone wants to test this ‚Äì you‚Äôd need a machine with both MacOS and Windows 10 ‚Äì , drop me an email at <a href="mailto:cinematic@cinematicstudio.com">cinematic@cinematicstudio.com</a> I can easily allow turning on statistics that would show you the average video frame loading time.</p><p>

John @ Cinematic Studio</p></div>






					<h2>Notes
					</h2>
					<div>
<p>[1] For one thing, when you seek to a frame, you‚Äôre not entirely sure you‚Äôve actually gotten there, in <b>VideoFrameAvailable</b> event ‚Äì because of how they internally do caching. So even if Microsoft tells you you‚Äôre there, well you‚Äôre not. To give you an example, say you‚Äôre at position 10.5 seconds, and you want to go to position 20.1 seconds. When you receive the first 2-3 <b>VideoFrameAvailable</b> events, what you may get is frames at position 10.5 seconds, and at some point, you‚Äôll start receiving frames at position 20.1 seconds. </p><p>

In practice, I‚Äôve found out that 5 frames seems to be a safe bet ‚Äì in other words, I would go to position 20.1 seconds ‚Äì 5 frames, then simply ignore the first 5 frames. Even though in practice I never met a case when you would still get an invalid frame after the first 5 frames, it doesn‚Äôt really mean it can‚Äôt happen. This gets even worse if you need to do several seeks at very small intervals.</p><p>

There‚Äôs no way to go several frames ahead. You can only <b>StepForwardOneFrame()</b> and <b>StepBackwardOneFrame()</b>. In practice, going backward is roughly 5 times slower.</p><p>

Having several <b>MediaPlayer</b> instances doesn‚Äôt help things either ‚Äì in practice, I noticed that the more instances I would have, the slower everything got.</p><p>

Sometimes, I would get an infinite amount of <b>VideoFrameAvailable</b> events, because, that‚Äôs how Microsoft rolls.

<a name="n2"></a></p><p>[2] Finally, <b>VideoFrameAvailable</b> has memory leaks. I found this out the hard way ‚Äì from one user being very, lets say, frustrated. At Export, within 60-70 seconds, it sometimes could end eating up 8GB of video RAM when dealing with 4K footage.

<a name="n3"></a></p><p>[3] I‚Äôve pondered about using ffmpeg more times than I can count. </p><p>

There‚Äôs a lot of mambo jambo about whether/how you can use this in commercial code, because MPEG LA holds the patent for it ‚Äì so even if you use your own implementation, you‚Äôd still need to pay MPEG LA. It didn't really sit right with me. It's also unclear to me how they would figure out the number of "downloaded copies".</p><p>

I‚Äôve done another round of searching lately, and I‚Äôm in talks with <a href="https://x264.org/en/" target="_blank">x264</a> It seems I need to  obtain a license from them, in order to compile ffmpeg to use LGPL (thus, be able to use it commercially) ‚Äì this would be on top of what I'd pay MPEG LA.</p><p>

I won‚Äôt get my hopes up until I receive a quote from them ‚Äì the fact that you need to request a quote makes me think they‚Äôll do their best to milk you as much as possible.

<a name="n4"></a></p><p>[4] I can hear you screaming ‚Äì that‚Äôs sooo low res! Turns out it‚Äôs not. If you come to think about it, most of the time the video takes less than ¬º of the screen, the rest being occupied by the timeline, and other panes. And in the future, I will allow you to select a higher resolution, such as 1280 x 720, or simply 1920 x 1080 if you‚Äôve got some hard core video card.

<a name="n5"></a></p><p>[5] The next steps will be: once you settle on one video frame (you pause the project, and do some editing), to show the video frame at Full HD (1920 x 1080). It‚Äôs not as easy as you‚Äôd think, but I can do it :) 

<a name="n6"></a></p><p>[6] The more video effects you compound (one video effect on top of another, on top of another, and so on), the more GPU is needed. One of the reasons I chose to go with 640 x 360 resolution is that this gives a quite reasonable number of compound effects that can be played in real time. On a decent video card, you won‚Äôt really need any pre-rendering ahead of time (which pretty much breaks your flow).
					
</p></div>
					
	
					</div>
                </div>
            </div>
        </section></div>]]>
            </description>
            <link>https://cinematicstudio.app/blog/prores.html</link>
            <guid isPermaLink="false">hacker-news-small-sites-26191274</guid>
            <pubDate>Fri, 19 Feb 2021 09:44:12 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Where Everything Went Wrong: Error Handling and Error Messages in Rust (2020)]]>
            </title>
            <description>
<![CDATA[
Score 148 | Comments 181 (<a href="https://news.ycombinator.com/item?id=26191006">thread link</a>) | @lukastyrychtr
<br/>
February 19, 2021 | https://msirringhaus.github.io/Where-everything-went-wrong/ | <a href="https://web.archive.org/web/*/https://msirringhaus.github.io/Where-everything-went-wrong/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
    <p><strong>Today you are frustrated.</strong></p>

<p>This is so annoying. You√¢‚Ç¨‚Ñ¢ve written a Rust crate and now that you want to test it for the very first time, <em>it doesn√¢‚Ç¨‚Ñ¢t work!</em></p>

<p>Come on, Rust! How dare you? You promised that once one gets past the compiler, it.<br>
<em>Just.<br>
<strong>Works!</strong></em><br>
And now this!</p>

<p>Ok, ok. You calm yourself down. Lets start from the beginning. You want to create so called <a href="https://docs.sentry.io/platforms/native/guides/minidumps/">minidumps</a>. This is a file that contains information about a crashed program (like stacks of all threads, CPU registers, system info, etc.).
The minidump consists of various sections, such as the minidump header (including time of day, versions and basically a table of contents), a thread section (including all threads of the process and their stacks), memory mappings and libraries, etc. [Just to give some context, as all of this is actually not really important.]</p>

<p>For this, you created a <a href="https://github.com/msirringhaus/minidump_writer_linux">crate</a>. One section gets written after the other, while information about the targeted process is retrieved from the system. You even created a nice, simple API. You hand in a process ID and an open file, where the minidump should be written to. like this:</p>

<div><div><pre><code>    <span>MinidumpWriter</span><span>::</span><span>new</span><span>(</span><span>pid</span><span>,</span> <span>blamed_thread</span><span>)</span>
        <span>.dump</span><span>(</span><span>&amp;</span><span>mut</span> <span>dump_file</span><span>)</span>
        <span>.expect</span><span>(</span><span>"Dumping failed!"</span><span>)</span>
</code></pre></div></div>

<p>You can also hand in user specified memory regions that should be included in the dump, like so:</p>

<div><div><pre><code>    <span>let</span> <span>app_memory</span> <span>=</span> <span>AppMemory</span> <span>{</span>
        <span>ptr</span><span>:</span> <span>some_address</span><span>,</span>
        <span>length</span><span>:</span> <span>memory_size</span><span>,</span>
    <span>};</span>

    <span>MinidumpWriter</span><span>::</span><span>new</span><span>(</span><span>pid</span><span>,</span> <span>pid</span><span>)</span>
        <span>.set_app_memory</span><span>(</span><span>vec!</span><span>[</span><span>app_memory</span><span>])</span>
        <span>.dump</span><span>(</span><span>&amp;</span><span>mut</span> <span>tmpfile</span><span>)</span>
        <span>.expect</span><span>(</span><span>"Dumping failed"</span><span>);</span>
</code></pre></div></div>



<p>But when you run your nice library code in an application, you get <code>'Dumping failed: "Failed in ptrace::read: Sys(EIO)"'</code>.</p>

<p><em>How useless is that?!</em></p>

<p>Okay, maybe you could enhance your library error handling, a little. And by enhance, you mean √¢‚Ç¨≈ìimplement one in the first place√¢‚Ç¨ÔøΩ.</p>

<h2 id="state-of-the-dart">State of the dart</h2>

<p>Your current approach is to define</p>

<div><div><pre><code><span>type</span> <span>Error</span> <span>=</span> <span>Box</span><span>&lt;</span><span>dyn</span> <span>error</span><span>::</span><span>Error</span> <span>+</span> <span>std</span><span>::</span><span>marker</span><span>::</span><span>Send</span> <span>+</span> <span>std</span><span>::</span><span>marker</span><span>::</span><span>Sync</span><span>&gt;</span><span>;</span>
<span>pub</span> <span>type</span> <span>Result</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>=</span> <span>result</span><span>::</span><span>Result</span><span>&lt;</span><span>T</span><span>,</span> <span>Error</span><span>&gt;</span><span>;</span>
</code></pre></div></div>

<p>and using <code>Result&lt;T&gt;</code> in all of your functions as the return value and handing all of them to the parent function using <code>?</code>. Thus the original error pierces through your callstack like a dart through√¢‚Ç¨¬¶.jelly (Yes, you are good with words and you know it.).</p>

<div><div><pre><code>    <span>pub</span> <span>fn</span> <span>init</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>)</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>()</span><span>&gt;</span> <span>{</span>
        <span>self</span><span>.read_auxv</span><span>()</span><span>?</span><span>;</span>
        <span>self</span><span>.enumerate_threads</span><span>()</span><span>?</span><span>;</span>
        <span>self</span><span>.enumerate_mappings</span><span>()</span><span>?</span><span>;</span>
        <span>Ok</span><span>(())</span>
    <span>}</span>
</code></pre></div></div>

<p>In Rust parlance, this is also called bubbling up errors.</p>

<p>Usually, you just bubble up errors from libraries you use, but for the rare errors you have to define yourself, you currently just do</p>
<div><div><pre><code><span>Err</span><span>(</span><span>"Found no auxv entry"</span><span>.into</span><span>())</span>
</code></pre></div></div>

<p>Well, now you know there is an error, at least. And that it has <em>something</em> to do with your usage of <code>ptrace</code>. But you have no idea where that happens. You use that functionality in various places. Is it during the init-phase? During one of the sections? And if so, which one? What are you trying to read? And from where? Or in short: <strong>What is going on?!</strong></p>

<h2 id="shoes-off-get-some-tea-research-time">Shoes off, get some tea: Research time!</h2>

<p>Well, Rust has been around for quite some time now and they always boast about how error handling is a first class citizen and all that. So error handling should be a done deal, right? With a canonical way of dealing with errors, officially documented and all that should be right there, correct?</p>

<p>Oh boy, were you wrong.</p>

<p>Turns out, this is a very active field of√¢‚Ç¨¬¶mh√¢‚Ç¨¬¶experimentation, lets say. There has been <a href="https://blog.yoshuawuyts.com/error-handling-survey/">a survey</a> recently, listing and quickly describing most the different libraries and ways for error handling that emerged, fallen out of favor, got forked, died anyways, got superseded, fallen out of favor again, etc.
And the opinions seem to change frequently, if you should use <code>error-chain</code> or <code>failure</code> or <code>fehler</code> or <code>snafu</code> or <code>thiserror</code> or <code>anyhow</code> or <code>eyre</code> or√¢‚Ç¨¬¶</p>

<p>You opened a can of hornets there, or whatever that saying is.</p>

<p>Then you find <a href="https://blog.rust-lang.org/inside-rust/2020/11/23/What-the-error-handling-project-group-is-working-on.html">this gem</a> and don√¢‚Ç¨‚Ñ¢t know if you should laugh or cry. Almost six years after Rust hit 1.0 an error handling project group is formed. Six. Years. <em>(heavy breathing)</em></p>

<p>Well, okay. At least they are sorting it out now. Problem is, you need√¢‚Ç¨¬¶.<em>SIX YEARS? Are you serious?</em>√¢‚Ç¨¬¶ahem, sorry√¢‚Ç¨¬¶Problem is, you need helpful error messages now.</p>

<p>After reading a few decent blogs on the topic (like <a href="http://www.sheshbabu.com/posts/rust-error-handling/">this</a> or <a href="https://nick.groenen.me/posts/rust-error-handling/">that</a>), there seems to emerge a consensus, at least for libraries: Return something that derives from <code>std::error::Error</code>. Either implement them by hand, or use a crate that does it for you, using macro magic. like <code>thiserror</code>. Which method you use depends on your level of laziness plus your patience regarding compile times.</p>

<h2 id="examples-vs-reality">Examples vs. Reality</h2>

<p>Another post highlighted <a href="https://doc.rust-lang.org/rust-by-example/error/multiple_error_types/wrap_error.html">error wrapping</a>, a particularly intriguing idea to you.</p>

<p>Unfortunately, all the articles have the understandable, but rather annoying tendency to use very simple example code for illustration purposes. Unrealistically simple, you might even say. They have callstacks of depth 1, return only three kinds of error in total in their API, and their errors are obvious and easily describable (e.g. √¢‚Ç¨≈ìInput file XY not found in your √¢‚Ç¨Àúcounting words√¢‚Ç¨‚Ñ¢ program√¢‚Ç¨ÔøΩ).</p>

<p>You have a more complicated callstack, with tons of different errors and code reuse in different places. For example, the function you think is to blame for the above error is <code>copy_from_process()</code>, which calls <code>ptrace::read()</code>, which probably returns something like <code>Failed in ptrace::read: Sys(EIO)</code>.
This function is used in multiple places in your code, e.g.:</p>

<div><div><pre><code>√¢‚Äù≈ì√¢‚Äù‚Ç¨ init()
√¢‚Äù‚Äö   √¢‚Äù≈ì√¢‚Äù‚Ç¨ read_auxv()
√¢‚Äù‚Äö   √¢‚Äù‚Äö  √¢‚Äù≈ì√¢‚Äù‚Ç¨ open(format!("/proc/{}/auxv", self.pid))
√¢‚Äù‚Äö   √¢‚Äù‚Äö  √¢‚Äù‚Äù√¢‚Äù‚Ç¨ some_parsing()
√¢‚Äù‚Äö   √¢‚Äù≈ì√¢‚Äù‚Ç¨ ...
√¢‚Äù‚Äö   √¢‚Äù≈ì√¢‚Äù‚Ç¨ enumerate_mappings()
√¢‚Äù‚Äö   √¢‚Äù‚Äö  √¢‚Äù≈ì√¢‚Äù‚Ç¨ open(format!("/proc/{}/maps", self.pid))
√¢‚Äù‚Äö   √¢‚Äù‚Äö  √¢‚Äù‚Äù√¢‚Äù‚Ç¨ some_parsing()
√¢‚Äù‚Äö   √¢‚Äù‚Äö
√¢‚Äù‚Äö   √¢‚Äù‚Äù√¢‚Äù‚Ç¨ some_more_checks()
√¢‚Äù‚Äö      √¢‚Äù‚Äù√¢‚Äù‚Ç¨ copy_from_process()
√¢‚Äù‚Äö
√¢‚Äù‚Äù√¢‚Äù‚Ç¨ dump()
   √¢‚Äù‚Äö
   √¢‚Äù≈ì√¢‚Äù‚Ç¨ sections::header::write()
   √¢‚Äù‚Äö
   √¢‚Äù≈ì√¢‚Äù‚Ç¨ sections::thread_list_stream::write()
   √¢‚Äù‚Äö  √¢‚Äù‚Äù√¢‚Äù‚Ç¨ copy_from_process()
   √¢‚Äù‚Äö
   √¢‚Äù≈ì√¢‚Äù‚Ç¨ sections::mappings::write()
   √¢‚Äù‚Äö  √¢‚Äù‚Äù√¢‚Äù‚Ç¨ elf_identifier_for_mapping()
   √¢‚Äù‚Äö     √¢‚Äù‚Äù√¢‚Äù‚Ç¨ copy_from_process()
   √¢‚Äù‚Äö
   √¢‚Äù≈ì√¢‚Äù‚Ç¨ sections::app_memory::write()
   √¢‚Äù‚Äö  √¢‚Äù‚Äù√¢‚Äù‚Ç¨ copy_from_process()
   √¢‚Äù‚Äö
   √¢‚Äù‚Äù√¢‚Äù‚Ç¨ ...
</code></pre></div></div>

<p>Same goes for opening files, which happens in multiple places (two examples of which are shown in <code>init()</code>), so getting <code>FileNotFound</code> without context is going to be equally fun, and so on.</p>



<p>Wrapping errors still sounds like a nice idea, but one layer alone is not going to <del>wrap it</del> cut it.
Going with <code>copy_from_process()</code> as an example, you see a few possibilities:</p>
<ol>
  <li>Wrapping the <code>ptrace</code> error into an <code>CopyFromProcessError</code>, but that gives you nothing (except maybe some context, if you add some)</li>
  <li>With <code>InitError</code>s and <code>DumpingError</code>s that wrap the <code>ptrace</code> errors, you will still not know which section failed and why, but know if it was during <code>init()</code> or not.</li>
</ol>

<p>You might add context to option 2 as well (see below on how), but each section has a variety of reasons why it could fail. Some unique to the section, some shared among a few, some among all of them.</p>

<p>Complex problems sometimes require complex solutions, maybe?</p>

<h2 id="inc-err-ption">Inc <em>Err()</em> ption</h2>

<p>Using <code>thiserror</code> and the fabulous <code>#[from]</code> macro, you quickly define a plethora of errors and wrappers, starting from the deepest, darkest places in your callstack, wrapping your way up:</p>

<div><div><pre><code><span>#[derive(Debug,</span> <span>Error)]</span>
<span>pub</span> <span>enum</span> <span>PtraceDumperError</span> <span>{</span>
    <span>#[error(</span><span>"nix::ptrace() error"</span><span>)]</span>
    <span>PtraceError</span><span>(</span><span>#[from]</span> <span>nix</span><span>::</span><span>Error</span><span>),</span>
    <span>...</span>
<span>}</span>

<span>#[derive(Debug,</span> <span>Error)]</span>
<span>pub</span> <span>enum</span> <span>SectionAppMemoryError</span> <span>{</span>
    <span>#[error(</span><span>"Failed to copy memory from process"</span><span>)]</span>
    <span>CopyFromProcessError</span><span>(</span><span>#[from]</span> <span>PtraceDumperError</span><span>),</span>
    <span>...</span>
<span>}</span>

<span>#[derive(Debug,</span> <span>Error)]</span>
<span>pub</span> <span>enum</span> <span>DumpError</span> <span>{</span>
    <span>#[error(</span><span>"Error during init phase"</span><span>)]</span>
    <span>InitError</span><span>(</span><span>#[from]</span> <span>InitError</span><span>),</span>
    <span>#[error(transparent)]</span>
    <span>PtraceDumperError</span><span>(</span><span>#[from]</span> <span>PtraceDumperError</span><span>),</span>
    <span>#[error(</span><span>"Failed when writing section AppMemory"</span><span>)]</span>
    <span>SectionAppMemoryError</span><span>(</span><span>#[from]</span> <span>SectionAppMemoryError</span><span>),</span>
    <span>...</span>
</code></pre></div></div>

<p>The fun part is: You have to touch very little of your existing code, thanks to the automatic conversion from one error to the other, conveniently provided by <code>#[from]</code>:</p>
<div><div><pre><code><span>- pub fn init(&amp;mut self) -&gt; Result&lt;()&gt; {
</span><span>+ pub fn init(&amp;mut self) -&gt; Result&lt;(), InitError&gt; {
</span>     self.read_auxv()?;
     self.enumerate_threads()?;
     self.enumerate_mappings()?;
     Ok(())
 }
</code></pre></div></div>

<p>or</p>

<div><div><pre><code><span>- pub fn get_stack_info(&amp;self, int_stack_pointer: usize) -&gt; Result&lt;(usize, usize)&gt; {
</span><span>+ pub fn get_stack_info(&amp;self, int_stack_pointer: usize) -&gt; Result&lt;(usize, usize), DumperError&gt; {
</span> // snip

    let mapping = self
        .find_mapping(stack_pointer)
<span>-        .ok_or("No mapping for stack pointer found")?;
</span><span>+        .ok_or(DumperError::NoStackPointerMapping)?;
</span>    let offset = stack_pointer - mapping.start_address;
    let distance_to_end = mapping.size - offset;
  // snip
</code></pre></div></div>

<p>If you run your test binary again, you now get</p>
<div><div><pre><code>Failed when writing section AppMemory
</code></pre></div></div>
<p>which is√¢‚Ç¨¬¶.<em>(Throws a stack of papers from the desk)</em>√¢‚Ç¨¬¶short. Too short, and not that much more helpful, actually. Well, you know which section is failing. Thats good. But where are all the nice error messages you specified in your errors?</p>

<p>Hm, you do only use <code>println!("{}", error);</code>. Maybe <code>{:?}</code> is better?</p>
<div><div><pre><code>SectionAppMemoryError(CopyFromProcessError(PtraceError(Sys(EIO))))
</code></pre></div></div>

<p>Aha! Now you are getting somewhere! Tiny, tiny, painfully <strong>tiny</strong> steps, but you are getting somewhere! No error texts, but at least a chain!</p>

<p>Normal printing doesn√¢‚Ç¨‚Ñ¢t seem to recursively go through all the wrapped errors, but stop at the top most. For this, you need to either go through all the errors yourself by hand, or use a crate that does this for you. There are a number of them that provide this, but <code>anyhow</code> will do (its by the same author as <code>thiserror</code>, so interoperability shouldn√¢‚Ç¨‚Ñ¢t be an issue).</p>

<div><div><pre><code>    <span>println!</span><span>(</span><span>"{:#}"</span><span>,</span> <span>anyhow</span><span>::</span><span>Error</span><span>::</span><span>new</span><span>(</span><span>error</span><span>));</span>
</code></pre></div></div>

<p>aaaaand:</p>

<div><div><pre><code>Failed when writing section AppMemory: Failed to copy memory from process: nix::ptrace() error: EIO: I/O error
</code></pre></div></div>

<p><em>Collects papers from the ‚Ä¶</em></p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://msirringhaus.github.io/Where-everything-went-wrong/">https://msirringhaus.github.io/Where-everything-went-wrong/</a></em></p>]]>
            </description>
            <link>https://msirringhaus.github.io/Where-everything-went-wrong/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26191006</guid>
            <pubDate>Fri, 19 Feb 2021 08:57:40 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Software Engineers struggle to write ‚Äúchunks‚Äù function]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26190554">thread link</a>) | @javaguy1
<br/>
February 18, 2021 | https://shekhargulati.com/2021/02/18/why-do-software-engineers-struggle-to-write-chunks-function/ | <a href="https://web.archive.org/web/*/https://shekhargulati.com/2021/02/18/why-do-software-engineers-struggle-to-write-chunks-function/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><article id="post-6533">
	<!-- .entry-header -->

	
	
	<div>
		
<p>In the last couple of years, I took close to two hundred interviews. These interviews range from Java engineers with two years of experience to architects holding more than fifteen years of experience. The first round of our interview process, irrespective of the candidate experience, involves solving a small problem in a Google document.&nbsp;</p>



<p>I prefer Google docs because it removes the unnecessary fluff and most candidates are familiar with it. I understand that you may feel awkward and conscious when someone watches you while you are writing code. At the same time, it does give some understanding on how candidates keep calm under pressure, recover from their mistakes, and explain things.</p>



<p>I don‚Äôt expect people to write completely syntactically correct formatted code in Google docs. I give them 20 minutes of peaceful time to write the program. I once read that in other tech organizations, it is expected that you explain your approach and your thinking as you write code on a whiteboard (virtual or physical), but I prefer to give people an uninterrupted time so that they don‚Äôt have to do two things at a time. I try to make sure that they have understood the problem by giving them a couple of inputs and their expected output.&nbsp;</p>



<p>One question that I have used in most of our L1 interview rounds is shown below. Since 2021 I have stopped using this question so I thought it can be useful to share my analysis on how people performed in attempting this problem.</p>



<p><strong><em>You have to write a function that chunks an array into smaller arrays of specified size. For example, chunks([1,2,3,4,5] , 2) should return [[1,2],[3,4], [5]].</em></strong></p>



<p>Coming up with your own ‚ÄúFizz Buzz Test‚Äù[1] is not easy. I came up with the following requirements on which I evaluate such coding questions [2].</p>



<ol><li>It should be a real problem. The kind of problem you solve in a real-world scenario.</li><li>It should feel simple and give confidence to the developer that they can solve it.</li><li>The solution should not require more than 20 lines of code.</li><li>The problem should not be domain specific that it gives advantage to some candidates.</li><li>It should not require any special data structure, which you don‚Äôt use in your day to day work.</li><li>Problem should not have a long text. Anyone should be able to read the problem text in less than a minute.</li><li>It should not require knowledge of a special library function.</li><li>A reasonable developer should be able to write the first version in 15-20 minutes. Candidates do tend to miss a few aspects of the problem, so it can involve more than one iteration.</li></ol>



<p><strong><em>I have used this question for evaluating Java candidates only. It is possible that it is not a good question for your specific programming language. So, please keep </em></strong><strong><em>this point </em></strong><strong><em>in </em></strong><strong><em>your</em></strong><strong><em> mind.</em></strong></p>



<p>There are three skills that I am trying to evaluate about the candidate.</p>



<ol><li>Can they code?</li><li>Can they explain the code they have written?</li><li>Can they explain how they will test the code they have written?</li></ol>



<p>Coming back to the chunks problem, one possible Java solution is shown below.</p>


<pre title="">public static int[][] chunks(int[] numbers, int chunkSize) {
   int length = numbers.length;
   int resultArraySize = (length % chunkSize == 0) ? length / chunkSize : length / chunkSize + 1;
   int[][] result = new int[resultArraySize][];
 
   int numberArrIndex = 0;
   for (int i = 0; i &lt; resultArraySize; i++) {
       int chunkArraySize = i == resultArraySize - 1 &amp;&amp; (length % chunkSize != 0)
               ? length % chunkSize
               : chunkSize;
 
       int[] chunk = new int[chunkArraySize];
 
       for (int j = 0; j &lt; chunkArraySize; j++) {
           chunk[j] = numbers[numberArrIndex++];
       }
       result[i] = chunk;
   }
   return result;
}
</pre>


<p>Java 8 solution using the Stream API is shown below. I don‚Äôt expect candidates to write this version.</p>


<pre title="">public static int[][] chunk(int[] numbers, int size) {
   return IntStream.iterate(0, i -&gt; i + size)
           .limit((long) Math.ceil((double) numbers.length / size))
           .mapToObj(cur -&gt; Arrays.copyOfRange(numbers, cur, cur + size &gt; numbers.length ? numbers.length : cur + size))
           .toArray(int[][]::new);
}
</pre>


<p>My analysis is that only 10% of the total candidates solved the problem correctly in the first attempt. 30-40% missed a few scenarios and while explaining the solution they figured out the gaps and suggested improvements to fix their first version. And, remaining 50% failed to write even the partially correct first version.&nbsp;</p>



<p>Following are my observations on the attempts made by people:</p>



<ul><li>Candidates for some reason choose a function name different from chunks. I fail to understand why they don‚Äôt use function name as chunks. Some of the names used by candidates <em>getSmallArray</em>, <em>getChunksArray</em>, <em>getMeArray</em>, <em>getRefactorArray</em>, <em>getChunks</em>, <em>splitArrayInChunks</em>, <em>convertArray</em>, <em>splitArray</em>, <em>chunkInputArray</em>, etc.</li><li>Candidates who did well in the attempt first wrote chunks algorithm in plain English and then attempted to write code.</li><li>Candidates struggled to come up with the correct function declaration in the first go. They directly wrote the first version of the problem and then came up with the correct declaration.</li><li>Many candidates struggled with multi-dimensional array syntax.&nbsp;</li><li>The first solution written by most candidates didn‚Äôt handle the last chunk correctly. They created all chunks with equal size. So, the answer returned by their solution is [[1,2], [3,4], [5,0]]. Some candidates while explaining the solution with the example input figured out the problem and explained how they will handle this scenario.</li><li>Candidates struggled with the size of the result array. They need to consider whether the array is fully divisible by chunkSize or leaves a remainder.</li><li>Some candidates at times used String. They failed to make much progress.</li><li>Candidates make chunks an instance method of some class. They don‚Äôt think whether they should make the method static. For some reason, they think static is bad.</li><li>Some candidates prefer to convert an array to a List and then only they can write code.&nbsp;</li><li>Java developers still struggle with Generics. Only a handful of them were able to convert the program to a version that uses generics.</li><li>Only a handful of developers can eloquently explain the code they have written.&nbsp;</li></ul>



<p>By no means I am underestimating the pressure of giving an interview. Both taking a good interview and giving an interview are difficult. I know it is hard for most of us to write code when someone is watching us in an interview. But, given that this is the kind of code we write everyday and we do have to pair with others. I think it is still a better and scalable way to filter good candidates from average candidates.&nbsp;</p>



<h2>References</h2>



<ol><li>Fizz Buzz Test ‚Äì <a href="https://wiki.c2.com/?FizzBuzzTest">Link</a></li><li>Picking problems for programming interviews ‚Äì <a href="https://lethain.com/appropriate-programming-problems/">Link</a></li></ol>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->
</article></div>]]>
            </description>
            <link>https://shekhargulati.com/2021/02/18/why-do-software-engineers-struggle-to-write-chunks-function/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26190554</guid>
            <pubDate>Fri, 19 Feb 2021 07:18:00 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Write and Read Google Spreadsheet from Telegram Bot with Google Cloud Functions]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26190430">thread link</a>) | @fazlerocks
<br/>
February 18, 2021 | https://xakpc.info/write-and-read-google-spreadsheet-from-telegram-bot-with-google-cloud-functions | <a href="https://web.archive.org/web/*/https://xakpc.info/write-and-read-google-spreadsheet-from-telegram-bot-with-google-cloud-functions">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><section itemprop="articleBody mainEntityOfPage"><meta itemprop="thumbnailUrl image" content="https://cdn.hashnode.com/res/hashnode/image/upload/v1613670455547/FEONztOOP.png?w=1600&amp;h=840&amp;fit=crop&amp;crop=entropy&amp;auto=compress"><div><div itemprop="text"><p>Recently I faced a request</p>
<blockquote>
<p>I'm tracking the number of days off each person in my company in google sheets, where I manually add/subtract their remaining days off. Can a telegram bot show them how many days off they have left once they search for their names?</p>
</blockquote>
<p>The answer is yes, and here is how to do that with Google Cloud Functions and API.chat chatbot platform in <strong>under 100 lines of code</strong>.</p>
<h2 id="setup-google-functions">Setup Google Functions</h2>
<p>First, you need to set up cloud functions and give them access to our document. </p>
<p>Overall you will need two functions: <code>gsheet-get</code> to provide answers and <code>gsheet-add</code> to register users. Let's create them.</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1613663747484/Fas9Hx7_q.png?auto=compress" alt="image.png"></p>
<p>We do not care about the function code yet. When you set up the first function GCloud will probably ask you to enable Billing and, most importantly, will create a Service account - App Engine default service account. Usage of this account will allow you to perform <a target="_blank" href="https://github.com/googleapis/google-api-nodejs-client#service-account-credentials">server to server, app-level authentication</a>  later.</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1613663799653/PyiIOpK2x.png?auto=compress" alt="image.png"></p>
<p>But you do need to give access rights to our document to this account.</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1613662238923/jaVl7Falj.png?auto=compress" alt="image.png"></p>
<p>The document itself is quite simple 
<img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1613663879198/fqWuUfk7H.png?auto=compress" alt="image.png"></p>
<h2 id="function-google-sheet-add">Function <code>google-sheet-add</code></h2>
<p>This function will store the user channel (telegram in the case), chat id, and a name to your table. Google Functions support different languages, including <code>.net core 3.1</code>, but I found out that node.js gives more compact code, so let's stick to it, and sorry for <em>dotnetish</em> code-style</p>
<pre><code><span>const</span> { google } = <span>require</span>(<span>'googleapis'</span>);

<span>exports</span>.main = <span>async</span> (req, res) =&gt; {
  <span>let</span> auth = <span>await</span> google.auth.getClient({ <span>scopes</span>: [<span>'https://www.googleapis.com/auth/spreadsheets'</span>] });  
  <span>let</span> sheets = google.sheets({ <span>version</span>: <span>'v4'</span>, auth });
  <span>try</span>
  {
    <span>await</span> sheets.spreadsheets.values.append({
      <span>spreadsheetId</span>: <span>"INSERT-SHEET-ID-HERE"</span>,
      <span>range</span>: <span>"Days!A:C"</span>,
      <span>valueInputOption</span>: <span>"RAW"</span>,
      <span>insertDataOption</span>: <span>"INSERT_ROWS"</span>,
      <span>resource</span>: {
        <span>values</span>: [
          [req.query.channel, req.query.id, req.query.name]
        ],
      },
      <span>auth</span>: auth
    });    
    res.status(<span>200</span>).send();
  }
  <span>catch</span> (err)
  {
    res.status(<span>500</span>).send({ err })
  }
};
</code></pre>
<p>The code here will append provided values as a new row to the Days sheet. API.chat will provide user data such as channel, chat id, and the name of the user.</p>
<p>Don't forget to add <code>googleapis</code> dependency into <code>package.json</code></p>
<pre><code>{
  <span>"dependencies"</span>: {
    <span>"googleapis"</span>: <span>"^42"</span>
  }
}
</code></pre><p>The main need for this function is to match actual people with their telegram account. There could be more sophisticated ways to do this, but for now this simple way: ask user name - is enough.</p>
<p>That will give you all the required information about the user and you could start calculating his day-offs.</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1613665878737/i_tzh-dEv.png?auto=compress" alt="image.png"></p>
<h2 id="function-google-sheet-get">Function <code>google-sheet-get</code></h2>
<p>The second function is for getting data from Google Spreadsheet. </p>
<pre><code><span>const</span> { google } = <span>require</span>(<span>'googleapis'</span>);

<span>exports</span>.main = <span>async</span> (req, res) =&gt; {
  <span>const</span> chatId = req.query.id;
  <span>const</span> auth = <span>await</span> google.auth.getClient({ <span>scopes</span>: [<span>'https://www.googleapis.com/auth/spreadsheets'</span>] });  
  <span>const</span> sheets = google.sheets({ <span>version</span>: <span>'v4'</span>, auth });
  <span>try</span> 
  {
    <span>let</span> sheet = <span>await</span> sheets.spreadsheets.values.get({
      <span>spreadsheetId</span>: <span>'INSERT-SHEET-ID-HERE'</span>,
      <span>range</span>: <span>'Days!A:D'</span>
    });

    <span>const</span> rows = sheet.data.values;
    <span>if</span> (rows.length) {
      <span>let</span> finded = rows.find(<span><span>el</span> =&gt;</span> el[<span>1</span>] === chatId)      
      <span>if</span> (finded === <span>undefined</span>) {     
        res.status(<span>200</span>).send({ <span>CorrelationId</span>: req.query.request, <span>Messages</span>: [ <span>"Information not availible"</span> ] });
      } <span>else</span> {      
        res.status(<span>200</span>).send({ <span>CorrelationId</span>: req.query.request, <span>Messages</span>: [ <span>`You have <span>${finded[<span>3</span>]}</span> days off`</span> ] });
      }
    } <span>else</span> {
      <span>console</span>.warn(<span>'No data found.'</span>);
      res.status(<span>200</span>).send({ <span>CorrelationId</span>: req.query.request, <span>Messages</span>: [ <span>"No data found"</span> ] });
    }
    res.status(<span>200</span>).send();
  }
  <span>catch</span>  (err)
  {
    <span>console</span>.error(<span>'The API returned an error: '</span> + err)
    res.status(<span>500</span>).send({ err })
  }
};
</code></pre><p>The main thing I found out here is that google.sheets API filter does not allow you to filter on actual data - only on metadata. That's why you need to get the entire sheet and filter it in code. Like I said before, API.chat will provide your endpoint with chat-id for filtering. From there you can return a formatted string with the answer like that</p>
<pre><code>{
  <span>"Messages"</span>: [
    <span>"You have 7 days off"</span>
  ]
}
</code></pre><h2 id="chatbot-scenario">Chatbot Scenario</h2>
<p>Now when you have all endpoints in place and working you can create an actual chatbot. I will use my very own <a target="_blank" href="https://api.chat/">chatbot builder API.chat</a>. Scenario might be very simple, like that </p>
<pre><code><span>&lt;<span>bot</span>&gt;</span>
  <span>&lt;<span>states</span>&gt;</span>
    <span>&lt;<span>state</span> <span>name</span>=<span>"Start"</span>&gt;</span>
      <span>&lt;<span>transition</span> <span>input</span>=<span>"register"</span> <span>next</span>=<span>"Registration"</span>&gt;</span>Please enter your name<span>&lt;/<span>transition</span>&gt;</span>
      <span>&lt;<span>transition</span> <span>input</span>=<span>"*"</span> <span>next</span>=<span>"Start"</span> <span>pending_keyboard</span>=<span>"Register Me"</span>&gt;</span>Hello. Please Register first<span>&lt;/<span>transition</span>&gt;</span>      
    <span>&lt;/<span>state</span>&gt;</span>
    <span>&lt;<span>state</span> <span>name</span>=<span>"Registration"</span>&gt;</span>      
      <span>&lt;<span>transition</span> <span>input</span>=<span>"*"</span> <span>next</span>=<span>"Registered"</span> <span>morphology</span>=<span>"msg"</span> <span>action</span>=<span>"https://us-central1-REDACTED.cloudfunctions.net/gsheet-add?name={msg}"</span> <span>no_stop</span>=<span>"true"</span>&gt;</span>Welcome!<span>&lt;/<span>transition</span>&gt;</span>
    <span>&lt;/<span>state</span>&gt;</span>
    <span>&lt;<span>state</span> <span>name</span>=<span>"Registered"</span>&gt;</span>
      <span>&lt;<span>transition</span> <span>input</span>=<span>"days"</span> <span>next</span>=<span>"Registered"</span> <span>action</span>=<span>"https://us-central1-REDACTED.net/gsheet-get"</span> <span>pending_keyboard</span>=<span>"Days Off"</span>/&gt;</span>
      <span>&lt;<span>transition</span> <span>input</span>=<span>"*"</span> <span>next</span>=<span>"Registered"</span> <span>pending_keyboard</span>=<span>"Days Off"</span>&gt;</span>Press the button to get your Days off<span>&lt;/<span>transition</span>&gt;</span>
    <span>&lt;/<span>state</span>&gt;</span>
  <span>&lt;/<span>states</span>&gt;</span>
<span>&lt;/<span>bot</span>&gt;</span>
</code></pre><p>What we do here is register the user, asking his or her name, and pass it into <code>gsheet-add</code> action in query. After registration user stays in the <code>Registered</code> state forever with the ability to request their days-off through <code>gsheet-get</code> action at any time.</p>
<p>All that's left is to PUT this scenario to the chatbot scenario endpoint and our bot is ready to deliver.</p>
<pre><code>curl -v -X PUT "https://bot.api.chat/v1/bots/botName/scenario"
-H "Content-Type: application/xml"
-H "Cache-Control: no-cache"
-H "Ocp-Apim-Subscription-Key: REDACTED"
--data-raw '<span>&lt;<span>bot</span>&gt;</span>
  <span>&lt;<span>states</span>&gt;</span>
    <span>&lt;<span>state</span> <span>name</span>=<span>"Start"</span>&gt;</span>
      <span>&lt;<span>transition</span> <span>input</span>=<span>"register"</span> <span>next</span>=<span>"Registration"</span>&gt;</span>Please enter your name<span>&lt;/<span>transition</span>&gt;</span>
      <span>&lt;<span>transition</span> <span>input</span>=<span>"*"</span> <span>next</span>=<span>"Start"</span> <span>pending_keyboard</span>=<span>"Register Me"</span>&gt;</span>Hello. Please Register first<span>&lt;/<span>transition</span>&gt;</span>      
    <span>&lt;/<span>state</span>&gt;</span>
    <span>&lt;<span>state</span> <span>name</span>=<span>"Registration"</span>&gt;</span>      
      <span>&lt;<span>transition</span> <span>input</span>=<span>"*"</span> <span>next</span>=<span>"Registered"</span> <span>morphology</span>=<span>"msg"</span> <span>action</span>=<span>"https://us-central1-REDACTED.cloudfunctions.net/gsheet-add?name={msg}"</span> <span>no_stop</span>=<span>"true"</span>&gt;</span>Welcome!<span>&lt;/<span>transition</span>&gt;</span>
    <span>&lt;/<span>state</span>&gt;</span>
    <span>&lt;<span>state</span> <span>name</span>=<span>"Registered"</span>&gt;</span>
      <span>&lt;<span>transition</span> <span>input</span>=<span>"days"</span> <span>next</span>=<span>"Registered"</span> <span>action</span>=<span>"https://us-central1-REDACTED.cloudfunctions.net/gsheet-get"</span> <span>pending_keyboard</span>=<span>"Days Off"</span>/&gt;</span>
      <span>&lt;<span>transition</span> <span>input</span>=<span>"*"</span> <span>next</span>=<span>"Registered"</span> <span>pending_keyboard</span>=<span>"Days Off"</span>&gt;</span>Press the button to get your Days off<span>&lt;/<span>transition</span>&gt;</span>
    <span>&lt;/<span>state</span>&gt;</span>
  <span>&lt;/<span>states</span>&gt;</span>
<span>&lt;/<span>bot</span>&gt;</span>'
</code></pre><p>Let's count code lines</p>
<ul>
<li><code>google-sheet-add</code>: 25</li>
<li><code>google-sheet-get</code>: 30</li>
<li><code>scenario</code>: 15</li>
<li><strong>overall</strong>: 70 lines of code</li>
</ul>
<p>Not bad</p>
</div></div></section></div></div>]]>
            </description>
            <link>https://xakpc.info/write-and-read-google-spreadsheet-from-telegram-bot-with-google-cloud-functions</link>
            <guid isPermaLink="false">hacker-news-small-sites-26190430</guid>
            <pubDate>Fri, 19 Feb 2021 06:48:56 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[The Universal Warrior, Part III: The Cult of the Badass]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26190353">thread link</a>) | @parsecs
<br/>
February 18, 2021 | https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/ | <a href="https://web.archive.org/web/*/https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div>
		
<p>This is the third and final part of a discussion (<a href="https://acoup.blog/2021/01/29/collections-the-universal-warrior-part-i-soldiers-warriors-and/">I</a>, <a href="https://acoup.blog/2021/02/05/collections-the-universal-warrior-part-iia-the-many-faces-of-battle/">IIa</a>, <a href="https://acoup.blog/2021/02/12/collections-the-universal-warrior-part-iib-a-soldiers-lot/">IIb</a>) discussion of the notion that there is a ‚Äòuniversal warrior‚Äô ‚Äì a transcendent sameness about either the experience of war or ‚Äòwarrior values‚Äô which might provide some sort of useful blueprint for life generally or some sort of fundamental truth about the experience of war.</p>



<p>Over the last three weeks, we‚Äôve looked at the historical evidence to see if there was any hint of some universal war experience or set of warrior values.  What we‚Äôve found instead is that almost everything about how humans engage in war, aside from the fact that they do so, varies tremendously from one culture to the next, from one place to the next, from one period to the next.  Cultural expectations, social values, technological conditions, entire systems of warfare and simple circumstance also condition the experience of war and the values that combatants have in extreme ways which render the search for a ‚Äòuniversal‚Äô set of warrior values a clearly doomed enterprise.</p>



<p>But, as laid out in the beginning, the ‚Äòuniversal warrior‚Äô wasn‚Äôt merely a (deeply flawed) argument about the structure and experiences of the past, but the foundation stone in an ideological blueprint for living one‚Äôs modern life.  And so it is time now that we turn from the (quite bad) historical roots of this idea to the (worse, it turns out) ideological implications of the idea.</p>



<p>But first, as always, if you like what you are reading here, please share it; if you really like it, you can support me on <a href="https://www.patreon.com/user?u=20122096">Patreon</a>. And if you want updates whenever a new post appears, you can click below for email updates or follow me on twitter (@BretDevereaux) for updates as to new posts as well as my occasional ancient history, foreign policy or military history musings.</p>






<p>(I couldn‚Äôt decide quite how I wanted to illustrate this essay and it didn‚Äôt seem like quite the right content for historical cat photos, so I‚Äôve opted to leave it without images.  I may go back and add pictures at a later date, but for now, it can stand purely as an essay.)</p>



<h2>Once More, With Feeling</h2>



<p>In a sense, while the previous three posts have been fun, they were really just a very long preamble to the argument I am making here, so I want to both lay out <em>why</em> I opened with a three-week long preamble before getting to the point (‚Äòhow else would you know it was me?‚Äô) and also pull together the conclusions from all of that before we move forward.</p>



<p>So why the preamble?  Because I wanted to make sure before we started discussing the underlying ideology that lurks <em>behind</em> claims of the universality of some ‚Äòwarrior ethos‚Äô we had defused the retort that, whatever the unpleasant implications, the ‚Äòuniversal warrior‚Äô was <em>historically true</em>.  This had to be done first because <strong>I am of the opinion that</strong> <strong>truth is an absolute defense</strong> in such matters; the universe contains a great many facts which are frustratingly inconvenient, yet as historians we have to deal with the world as it is rather than as we wish it to be (or wish it to have been).  Consequently, before I could complain about the ideology, it was necessary to determine if the historical theory was true, or even remotely plausible.</p>



<p>So we have spent three weeks hunting for the ‚Äòuniversal warrior‚Äô ‚Äì either in the form of a universal war <em>experience</em> or a universal set of <em>values</em>.  What we have found is:</p>



<ul><li>Far from there being one set way that combatants relate to their society, soldiers, warriors and civilians represent distinct categories defined by how people in war relate to their society.  Even <em>within</em> those categories, variety is considerable, leaving no one clear model of how combatants relate to their societies.</li><li>Moreover, war itself is changeable, moving through at least three (and probably four) distinct systems of land warfare alone, each with substantial differences in tactics, values, and experiences.</li><li>Moreover, different cultures understand and imagine the ideal qualities of combatants differently, often so dramatically differently that one culture‚Äôs definition of courage is not merely different from an other‚Äôs, but diametrically opposed.</li><li>Moreover, the actual experience of battle ‚Äì we discussed this mostly through the experience of fear ‚Äì isn‚Äôt universal either.  The fear of facing a cavalry charge is not the same sort of fear as the fear of enduring a week long artillery barrage, while ‚Äòwar is scary‚Äô in a general sense is hardly enough to set off the warrior or the soldier from any number of other scary and potentially hazardous jobs.</li><li>Moreover, the bonds of comradeship that support modern cohesion (often cited as a unique and universal experience) are, in fact, also historically contingent, both in that there are many systems for generating cohesion, not all of which involve tight bonds formed during military service and that some military systems don‚Äôt seek to develop cohesion in this sense at all.</li><li>Moreover, attitudes towards the hardships of war <em>also</em> vary wildly, as do the actual hardships in question.</li><li>Moreover, not only do different societies express different attitudes and values towards the wounded, but the nature of the wounds themselves has changed over time as military technology has become progressively more lethal; both states that apply not only to physical, but also mental wounding.</li></ul>



<p>In short, while there is enough commonality in war to suggest a definition that encompasses the idea (again, I rather prefer W. Lee‚Äôs definition of war as ‚Äúorganized group activity, conducted with lethal effects, that diminishes one [unconsenting] group for the benefit of another‚Äù), <em>within </em>that definition, <strong>there is far too much variety to suggest there is any one ‚Äòuniversal‚Äô experience of war or any one set of universal warrior values</strong>.</p>



<p>And I should note this is something we could demonstrate in more than a half-dozen different ways deploying just a fraction of the available scholarship on how the experience and values of war change from place to place.  Indeed, that is essentially what we have done.  <strong>Any <em>one</em> of the above points is enough to be fatal to the notion that there is some sort of ‚Äòuniversal‚Äô set of warriors values and experiences </strong>such that, as Pressfield openly states, a Spartiate could be simply dropped into a modern U.S. Marine regiment and fit in without skipping a beat (or his equally anachronistic notion that the decadent Athenian could be dropped into American civil society and also integrate seamlessly).  </p>



<p>But of course Pressfield isn‚Äôt offering a <em>history</em> (and indeed, he has not written one), he is offering an ideology and (intentionally or not) reshaping the historical facts to fit that ideology, shaving the corners off of the square peg so it will fit into the round hole of his moral assumptions.  His ideology requires a universal set of warrior values to serve as the foundation for his life philosophy and so, facts be damned, he <em>will</em> assert the existence of such a universal set of values.  The ideology, not the history, is the foundation, which is why Pressfield offers both anecdotes from Plutarch (a historical source) and his own books (modern historical fiction) as having equal truth value, even though the latter has no value as historical evidence; they both <strong>express the ideology</strong>.</p>



<p>So what is the ideology here?  Well, for that it is time to meet our old friend‚Ä¶</p>



<h2>The Cult of the Badass</h2>



<p>Pulling out the core ideology from Pressfield‚Äôs <a href="https://stevenpressfield.com/category/the-warrior-archetype/">videos </a>is a formidable task; there are fifty of them and so much of the core argument is submerged beneath endless anecdotes (some historical, some Pressfield openly invented for his historical fiction; all delivered with insufficient historical context).  But Pressfield‚Äôs videos are useful for this argument because he makes explicit a set of arguments which are usually only made <em>implicitly</em> through a set of emotional appeals which often are carried through the subtext of images and references rather than the text of what is being said.</p>



<p>(Marching through Pressfield‚Äôs videos was also frankly difficult because there are <a href="https://twitter.com/BretDevereaux/status/1350655580562731011"><em>just so many errors</em> </a>in them, I had to stop live-tweeting my way through them because if I kept doing it I‚Äôd never finish.  As a reminder, this is a fellow whose fiction<a href="https://en.wikipedia.org/wiki/Gates_of_Fire"> is on reading lists </a>at various U.S. military officer training programs, much to my continued sorrow.)</p>



<p>We may, I think, summarize Pressfield‚Äôs core argument as follows: the ‚Äòwarrior archetype‚Äô (he is using here the long-abandoned psychology of Carl Jung) represents a true human universal best understood by certain ‚Äòwarrior societies‚Äô (<em>especially</em> the Spartans, but also Alexander III, but somehow <em>not</em> the Macedonians or Philip II) who supposedly demonstrated martial excellence and who therefore are ‚Äúrepresentative of the purest expression of the warrior archetype‚Äù (his words).  Moreover, Pressfield argues that this understanding of the ‚Äòinner warrior‚Äô provides the best blueprint on which a person might fashion their lives, understanding their weaknesses as an ‚Äòinner enemy‚Äô that must be opposed by ‚Äòwarrior values‚Äô and ‚Äòmental toughness.‚Äô  And while Pressfield will admit that the ‚Äòwarrior archetype‚Äô can go astray (he says this of Alexander, though I‚Äôd argue that Alexander didn‚Äôt so much ‚Äògo astray‚Äô as he ‚Äòkept doing what he had done literally for his entire life, but began doing it to people who thought Alexander would only hurt people <em>they didn‚Äôt like</em>‚Äò), he nevertheless presents this ‚Äòwarrior archetype‚Äô as an expression of the highest possible human ideal.  <strong>In Pressfield‚Äôs ideological framework, it is the great warriors ‚Äì the Spartans, Alexander, Arjuna ‚Äì who stand atop the summit of human physical and moral achievement.</strong>  Non-warriors (mostly women) are valued in as much as they uphold elements of this warrior ideal so that warriors (mostly men) can give those ideals physical expression in action.  Even internal struggles must be reframed as a form of war, to be fought and defeated with the same values that best produce effective real-world violence.</p>


</div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/">https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/</a></em></p>]]>
            </description>
            <link>https://acoup.blog/2021/02/19/collections-the-universal-warrior-part-iii-the-cult-of-the-badass/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26190353</guid>
            <pubDate>Fri, 19 Feb 2021 06:29:22 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Anjuna Support for Amazon Nitro Enclaves]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26189898">thread link</a>) | @boxstream
<br/>
February 18, 2021 | https://www.anjuna.io/amazon-nitro-enclaves | <a href="https://web.archive.org/web/*/https://www.anjuna.io/amazon-nitro-enclaves">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://www.anjuna.io/amazon-nitro-enclaves</link>
            <guid isPermaLink="false">hacker-news-small-sites-26189898</guid>
            <pubDate>Fri, 19 Feb 2021 04:52:13 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[LED Characterization]]>
            </title>
            <description>
<![CDATA[
Score 3 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26189817">thread link</a>) | @parsecs
<br/>
February 18, 2021 | https://blog.jaseg.de/posts/led-characterization/ | <a href="https://web.archive.org/web/*/https://blog.jaseg.de/posts/led-characterization/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://blog.jaseg.de/posts/led-characterization/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26189817</guid>
            <pubDate>Fri, 19 Feb 2021 04:38:07 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[12 requests per second: A realistic look at Python web frameworks]]>
            </title>
            <description>
<![CDATA[
Score 473 | Comments 227 (<a href="https://news.ycombinator.com/item?id=26188765">thread link</a>) | @gilad
<br/>
February 18, 2021 | https://suade.org/dev/12-requests-per-second-with-python/ | <a href="https://web.archive.org/web/*/https://suade.org/dev/12-requests-per-second-with-python/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://suade.org/dev/12-requests-per-second-with-python/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26188765</guid>
            <pubDate>Fri, 19 Feb 2021 02:21:36 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Dismantling Racism in Mathematics Instruction [pdf]]]>
            </title>
            <description>
<![CDATA[
Score 6 | Comments 3 (<a href="https://news.ycombinator.com/item?id=26188717">thread link</a>) | @kofejnik
<br/>
February 18, 2021 | https://equitablemath.org/wp-content/uploads/sites/2/2020/11/1_STRIDE1.pdf | <a href="https://web.archive.org/web/*/https://equitablemath.org/wp-content/uploads/sites/2/2020/11/1_STRIDE1.pdf">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://equitablemath.org/wp-content/uploads/sites/2/2020/11/1_STRIDE1.pdf</link>
            <guid isPermaLink="false">hacker-news-small-sites-26188717</guid>
            <pubDate>Fri, 19 Feb 2021 02:15:27 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[5-MeO-DMT: The Story Behind the '‚ÄúGod Molecule‚Äù (2020)]]>
            </title>
            <description>
<![CDATA[
Score 5 | Comments 0 (<a href="https://news.ycombinator.com/item?id=26188612">thread link</a>) | @mardiyah
<br/>
February 18, 2021 | https://doubleblindmag.com/5-meo-dmt-the-story-behind-the-god-molecule/ | <a href="https://web.archive.org/web/*/https://doubleblindmag.com/5-meo-dmt-the-story-behind-the-god-molecule/">archive.org</a>
<br/><!-- hnss:readable-content --><hr/>Unable to retrieve article]]>
            </description>
            <link>https://doubleblindmag.com/5-meo-dmt-the-story-behind-the-god-molecule/</link>
            <guid isPermaLink="false">hacker-news-small-sites-26188612</guid>
            <pubDate>Fri, 19 Feb 2021 02:03:26 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Squad: Forth on Chip-8]]>
            </title>
            <description>
<![CDATA[
Score 69 | Comments 8 (<a href="https://news.ycombinator.com/item?id=26188165">thread link</a>) | @RodgerTheGreat
<br/>
February 18, 2021 | https://internet-janitor.itch.io/squad | <a href="https://web.archive.org/web/*/https://internet-janitor.itch.io/squad">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><h2>Squad</h2>
<p>Squad is a <a href="https://en.wikipedia.org/wiki/Forth_(programming_language)" rel="nofollow noopener">Forth</a> interpreter that runs on the <a href="https://en.wikipedia.org/wiki/CHIP-8" rel="nofollow noopener">SCHIP</a> virtual machine. It extends the 8-bit operations of this host machine to 16 bit "cells", per tradition, which also allows pointers to be easily transported and manipulated on the stacks. The parameter and return stacks have room for 32 cells apiece, and at startup there is a bit over 1kb of free space available for user definitions.</p>
<p>While many niceties are missing from the built-in lexicon, due to space constraints, Squad is a fairly complete Forth environment, with a conventional outer and inner interpreter, immediate words, and a mutable return stack.&nbsp;Squad's functionality compares favorably to&nbsp;<a href="https://github.com/JohnEarnest/chip8Archive/blob/master/src/applejak" rel="nofollow noopener"></a><a href="https://internet-janitor.itch.io/applejak">Applejak</a>&nbsp;and&nbsp;<a href="https://internet-janitor.itch.io/bulb">Bulb</a>.</p>
<p>Dictionary entries consist of a pointer to the previous entry (or 0 for the root entry), a "type" cell (see "&gt;type") which distinguishes immediate words with its high byte and word classes with its low byte, the name of the word as a string (see "&gt;name"), and the body of the word itself (see "&gt;body"). Strings are represented with a custom encoding in which each character is a byte, and strings are null-terminated by the byte 0xFF. Properly-formed characters should be multiples of 5, and represent indices into the following alphabet:</p>
<pre>0123456789abcdefghijklmnopqrstuvwxyz+-&lt;&gt;=!@.,:;[]
</pre>
<p>Source code and other materials are also available on <a href="https://github.com/JohnEarnest/chip8Archive/tree/master/src/squad" rel="nofollow noopener">the CHIP-8 Archive</a>.</p>
<h2>Controls</h2>
<p>The ASWD keys and E are always interchangeable with the arrow keys and space.</p>
<p>The outer interpreter will prompt the user for a token at a time, and then either append it to the current definition or execute it, based on "mode". Whenever text is drawn with an inverted background, it is a pending input. Pressing right-arrow or space will confirm a selection, while the up and down arrows cycle between available options.</p>
<p>First, the outer interpreter will ask the user to choose between several coarse categories- a number ("num"), or one of six categories of word, described in detail below. Numbers are always shown in 16-bit hexadecimal. The up and down arrows will increment or decrement the number, while 2 and X will increment or decrement the the number by 256 at a time, to ease entering pointers and large values. If the user is ever prompted to enter a previously unused word name (see "name"), the entry can be terminated by choosing a space character (which will confirm the name up to but not including the space), or by pressing space (which will confirm the name up to and including the present pending character). Pressing Q while entering a new name will back up one character.</p>
<p>At the top level of the outer interpreter, the user may also press `Z`, which is a shorthand for entering ".s"; it will print the current contents of the parameter stack on a new line without modifying it.</p>
<h2>Simple Examples</h2>
<p>Bump allocator:</p>
<pre>: allot here @ + here ! ;</pre>
<p>Calculate and print some terms of the Fibonacci sequence imperatively:</p>
<pre>: fib  0 1 loop dup . swap over + dup 100 &gt; until ;</pre>
<h2>Vocabulary</h2>
<p>The following word lists include stack effects in parentheses. The names to the left of the "--" sign are the input arguments, bottom to top,&nbsp;and the names to the right are the results, if any, bottom to top.</p>
<h3>IO</h3>
<p>Input and output words. Type code 1.</p>
<ul><li>emit ( char -- ) print a single character to the terminal. The high byte of "char" is ignored.</li><li>space ( -- ) print a space to the terminal.</li><li>cr ( -- ) advance terminal output to a new line.</li><li>erase ( -- ) un-print a single character from the current line of terminal output.</li><li>type ( str -- ) given a string (as described above), print it to the terminal.</li><li>untype ( str -- ) erase a string, by issuing "erase" for each character.</li><li>num ( -- n ) prompt the user to enter a 16-bit number.</li><li>name ( -- ) prompt the user to enter a string for a new word name, appending this string to "here".</li><li>word ( type -- xt ) prompt the user to select the name of an existing word. If "type" is 0, any word. Otherwise, it should be the type code of one of these categories.</li><li>token ( -- x flag ) prompt the user for a token, as in the outer interpreter. If "flag" is 0, "x" is a number. Otherwise it's a dictionary entry ("xt").</li></ul>
<h3>Core</h3>
<p>Fundamental forth primitives. Type code 2.</p>
<ul><li>dup ( x -- x x ) copy the top of the parameter stack.</li><li>drop ( x -- ) discard the top of the parameter stack.</li><li>over ( x y -- x y x ) copy the second item on the parameter stack.</li><li>swap ( x y -- y x ) exchange the top two items on the parameter stack.</li><li>r&gt; ( | x -- x | ) move an item from the parameter stack to the return stack.</li><li>&gt;r ( x | -- | x ) move an item from the return stack to the parameter stack.</li><li>! ( x addr -- ) write a 16-bit value x to "addr".</li><li>c! ( x addr -- ) write an 8-bit value (the low byte of x) to "addr".</li><li>@ ( addr -- x ) read a 16-bit value from addr.</li><li>c@ ( addr -- x ) read an 8-bit value from addr.</li><li>not ( x -- flag ) logically invert the flag x.</li><li>&gt; ( x y -- flag ) is x greater than y?</li><li>&lt; ( x y -- flag ) is x less than y?</li><li>= ( x y -- flag ) is x equal to y?</li><li>xor ( x y -- z ) bitwise XOR of x and y.</li><li>and ( x y -- z ) bitwise AND of x and y.</li><li>or ( x y -- z ) bitwise OR of x and y.</li><li>- ( x y -- z ) difference of x and y.</li><li>+ ( x y -- z ) sum of x and y.</li></ul>
<h3>Mem</h3>
<p>Words concerning working with memory and dictionary entries. Type code 3.</p>
<ul><li>here ( -- addr ) a variable containing the address of the first available cell of memory.</li><li>head ( -- addr ) a variable containing the xt of the most recent dictionary entry.</li><li>mode ( -- addr ) a variable containing 0 during interpretation or 1 during compilation.</li><li>, ( x -- ) write a cell to here, incrementing here by 2.</li><li>,c ( x -- ) write a byte to here, incrementing here by 1.</li><li>,ret ( -- ) append an exit to the current definition. This word performs tail-call elimination if the exit follows a threaded code subroutine call.</li><li>,lit ( x -- ) append a literal (push a number) to the current definition.</li><li>,jump ( addr -- ) append an unconditional branch to threaded code at addr to the current definition.</li><li>,jump0 ( addr -- ) append a conditional branch (branch if top of parameter stack is 0) to threaded code at addr to the current definition.</li><li>,call ( xt -- ) append a subroutine call to the current definition. This word will do the right thing whether the provided xt is a "native" (built-in) or threaded code subroutine.</li><li>&gt;type ( xt -- n ) given a dictionary entry, get its category. High byte is the immediate flag, low byte is the category type code.</li><li>&gt;name ( xt -- str ) given a dictionary entry, get the address of its name (suitable for "type").</li><li>&gt;body ( xt -- addr ) given a dictionary entry, get the address where its body begins.</li><li>create ( -- ) prompt for a name, and create a new dictionary entry with that name.</li><li>exec ( xt -- ) given a dictionary entry, execute the word. interpretation counterpart to ",call".</li></ul>
<h3>Flow</h3>
<p>Immediate words, mostly for dealing with control flow and compilation state. Type code 4.</p>
<ul><li>if ... (else) ... then: basic conditional control structure. if consumes a boolean flag.</li><li>loop ... (again | until | while): basic infinite and conditional loops. until and while consume a boolean flag.</li><li>:imm ( -- )&nbsp;prompt for a new name, and then begin defining an immediate word. Counterpart to ":".</li><li>: &nbsp;( -- )&nbsp;prompt for a new name, and then begin defining an ordinary word.</li><li>; &nbsp;( -- )&nbsp;terminate a word and stop compiling.</li><li>exit ( -- )&nbsp;early return from a word; do not stop compiling.</li><li>[ &nbsp;&nbsp;( -- )&nbsp;switch to interpreting. Use with "]" and ",lit" to pre-evaluate constant expressions, for example.</li><li>] ( --&nbsp;)&nbsp;switch to compiling.</li></ul>
<h3>Env</h3>
<p>Helper words for maintaining and inspecting the Forth environment. Type code 5.</p>
<ul><li>free ( -- x ) how many bytes of memory are available?</li><li>forget ( -- ) prompt for a word name, and destroy that dictionary entry as well as all later definitions. This can really donk up your interpreter if you apply it to internal bits of Squad.</li><li>.s ( -- ) display the contents of the parameter stack without altering it.</li><li>words ( -- ) list all available words.</li></ul>
<h3>User</h3>
<p>"User-defined" (non-primitive) words. Type code 6.</p>
<pre>:    1+     1 +    ; ( x -- y )
:imm quote  0 word ; ( -- xt )</pre>
</div></div>]]>
            </description>
            <link>https://internet-janitor.itch.io/squad</link>
            <guid isPermaLink="false">hacker-news-small-sites-26188165</guid>
            <pubDate>Fri, 19 Feb 2021 01:06:01 GMT</pubDate>
        </item>
        <item>
            <title>
<![CDATA[Facebook Calls Australia's Bluff]]>
            </title>
            <description>
<![CDATA[
Score 4 | Comments 1 (<a href="https://news.ycombinator.com/item?id=26187669">thread link</a>) | @1cvmask
<br/>
February 18, 2021 | https://www.platformer.news/p/facebook-calls-australias-bluff | <a href="https://web.archive.org/web/*/https://www.platformer.news/p/facebook-calls-australias-bluff">archive.org</a>
<br/><!-- hnss:readable-content --><hr/><div id="readability-page-1" class="page"><div><div><figure><a target="_blank" href="https://cdn.substack.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fbb6d2995-a033-40d3-b2ea-14dd040d770b_7952x5304.jpeg"><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fbb6d2995-a033-40d3-b2ea-14dd040d770b_7952x5304.jpeg" data-attrs="{&quot;src&quot;:&quot;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/bb6d2995-a033-40d3-b2ea-14dd040d770b_7952x5304.jpeg&quot;,&quot;height&quot;:971,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:9776013,&quot;alt&quot;:&quot;A map of Australia. Photo by Joey Csunyo / Unsplash&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/jpeg&quot;,&quot;href&quot;:null}" alt="A map of Australia. Photo by Joey Csunyo / Unsplash"></a><figcaption>Joey Csunyo / Unsplash</figcaption></figure></div><p>Yesterday, I wrote that <a href="https://www.platformer.news/p/australias-bad-bargain-with-platforms">Australia‚Äôs News Media Bargaining Code threatened to splinter the internet</a>. On Wednesday morning, the splintering arrived: Google cut a deal with News Corp. that will ensure its services continue to be provided in Australia, and Facebook walked away from the bargaining table and began preventing people from sharing news links from Australian publishers around the world. </p><p>I think Facebook basically did the right thing, and Google basically did the wrong thing, even though Google had a much tougher call to make. Today, let‚Äôs talk about why the tech giants made the decisions that they did, why Australia‚Äôs shakedown is rotten, and what‚Äôs likely to happen next. (If you didn‚Äôt <a href="https://www.platformer.news/p/australias-bad-bargain-with-platforms">read my piece on the subject yesterday</a>, it offers a lot of useful context for what follows. I‚Äôve made it free for all subscribers to read.)</p><p>In development for three years, the bargaining code is intended to give Australia‚Äôs heavily concentrated media industry more leverage as publishers seek direct payment from Google and Facebook for the right to display links to their work. It does this by forcing the platforms into binding arbitration with publishers who bring cases, and puts the decision for how much the platform has to pay the publishers into the hands of the arbiter. Each side throws out a number, and the arbiter picks the one they think is most fair. </p><p>(The arbiter does <em>not</em> pick a number in between, by the way; I got that wrong yesterday and have corrected the post.)</p><p>By design, the arbitration process favors the publisher. Also by design, it encourages platforms to avoid the process altogether by signing one-off deals with individual publishers in hopes that they can get better terms that way. </p><p><strong>I. Google</strong></p><p>Over the past few days, Google has been signing deals with the biggest publishers in Australia for exactly this reason. <a href="https://www.businessinsider.com/google-australia-news-technology-seven-west-media-2021-2#:~:text=Google%20signed%20up%20a%20major,force%20payments%20to%20media%20outlets.">Seven West Media got a deal</a>, <a href="https://www.theguardian.com/media/2021/feb/17/nine-agrees-to-join-google-news-showcase-in-australia-for-reported-30m-a-year#:~:text=Australia's%20biggest%20locally%2Downed%20media,laws%20being%20debated%20in%20parliament.">Nine Entertainment got a deal</a>, and on Wednesday, one of the country‚Äôs biggest conglomerates ‚Äî Rupert Murdoch‚Äôs News Corp. ‚Äî&nbsp;got its deal. In exchange for an undisclosed sum, Google will feature News Corp. articles in its News Showcase product in Australia and beyond.</p><p>‚ÄúAmong the News Corp publications joining Google News Showcase will be the<em> Wall Street Journal</em>, <em>Barron‚Äôs</em>, <em>MarketWatch</em>, and the <em>New York Post</em>; in the UK: the<em> Times</em> and the <em>Sunday Times</em>; and the <em>Sun</em>; and in Australia a range of news platforms, including the <em>Australian</em>, news.com.au, Sky News, and multiple metropolitan and local titles,‚Äù the company told me in a statement.</p><p>As announced, the deals pertain to <a href="https://blog.google/outreach-initiatives/google-news-initiative/google-news-showcase/">Google News Showcase</a>, a tab within Google News that contains licensed content from official partners. But the people I‚Äôve spoken with are operating under the assumption that if there‚Äôs a deal between Google and a big publisher in Australia, that publisher either can‚Äôt or won‚Äôt be dragged to arbitration for showing links and snippets of text in search results.</p><p>Search, of course, is what Google cares about the most, and explains why the company caved. Removing links to news&nbsp;stories from Google would break the search engine in Australia, <a href="https://blogs.microsoft.com/on-the-issues/2021/02/11/endorsement-australias-proposal-technology-news/">opening it up to rivals</a>. And so the company signed a bunch of deals under duress. </p><p>(It‚Äôs worth mentioning that any Australian publisher aggrieved by an unfair exchange of value with Google here could opt out of search results&nbsp;at any time by adding one line of HTML to their website. But almost none of them do, because traffic from Google drives significant advertising and subscription revenue to them.)</p><p>With its moves today, Google has now invited every other country to pursue a similar protection racket. Parliament members in Canada and the European Union have already endorsed measures similar to Australia‚Äôs. And a basic tenet of the open web ‚Äî that hyperlinks can be freely displayed on any website ‚Äî&nbsp;just took a body blow.</p><p>I‚Äôd feel better about this if publishers said a single word about how much of their new Google revenue that they planned to spend on journalists‚Äô salaries, or news gathering. </p><p>They didn‚Äôt, though, and why would they? Australia‚Äôs bargaining code doesn‚Äôt say one word about requiring that any of this money be spent on journalism, either.  </p><p><strong>II.</strong> <strong>Facebook</strong></p><p>Unlike Google, Facebook‚Äôs core service doesn‚Äôt rely heavily on news articles. The company estimates that only about 4 percent of posts on the network are works of journalism. It is not all that hard to imagine opening up Facebook and scrolling for a few minutes, never to see a link to a news article at all ‚Äî&nbsp;and in fact, millions of people do this every day.</p><p>And so it is perhaps less surprising that when Google blinked at Australia‚Äôs demand, Facebook walked away. Here‚Äôs William Easton, <a href="https://about.fb.com/news/2021/02/changes-to-sharing-and-viewing-news-on-facebook-in-australia/">Facebook‚Äôs managing director for Australia and New Zealand</a>:</p><blockquote><p>While the government has made some changes, the proposed law fundamentally&nbsp;<a href="https://australia.fb.com/post/our-response-to-australias-proposed-news-media-laws/">fails to understand</a>&nbsp;how our services work.</p><p>Unfortunately, this means people and news organisations in Australia are now restricted from posting news links and sharing or viewing Australian and international news content on Facebook. Globally, posting and sharing news links from Australian publishers is also restricted. To do this, we are using a combination of technologies to restrict news content and we will have processes to review any content that was inadvertently removed.</p></blockquote><p>And just like that, news articles originating in Australia disappeared from Facebook.</p><p>Easton says that in the past year, Facebook sent more than 5 billion clicks to Australian publishers, whose value he estimated at AU$ 407 million. If the current situation holds, Facebook will send those same publishers zero clicks ‚Äî&nbsp;a move that, I imagine, may force publishers to recalibrate in their minds the relative value that Facebook and publishers provide one another.</p><p>Of course, many critics were apoplectic that Facebook had taken this move, calling it <a href="https://twitter.com/matthewstoller/status/1362135211606220800?s=20">a vile act of censorship</a>, <a href="https://twitter.com/JuddLegum/status/1362172282102304769">unchecked greed</a>, and <a href="https://twitter.com/evelyndouek/status/1362171044136710144">destruction of the public sphere</a>. </p><p>Certainly the execution of the ban left something to be desired. </p><p>Rather than building a blacklist of news sites to restrict, Facebook tried using its machine learning systems to identify news publishers, and the systems went <a href="https://www.abc.net.au/news/2021-02-18/bom-health-authorities-betoota-caught-in-facebook-news-ban/13166394?section=technology">predictably haywire</a>. There were reports that government and emergency pages, nonprofit groups, and the Bureau of Meteorology <a href="https://twitter.com/maxchalm/status/1362160410984476672?s=21">could no longer share</a>. Given how long the possibility of restricting links has loomed, you‚Äôd think Facebook would have better prepared for it to arrive.</p><p>And while I don‚Äôt want to make light of these mistakes, to the extent that they teach Facebook‚Äôs user base to seek their news elsewhere, they can serve a noble purpose. I don‚Äôt know a single journalist who feels comfortable with social networks being anyone‚Äôs primary source of news, particularly after years of daily reporting on the misinformation and conspiracy theories that so often thrive on them. And so it is more than a little strange to see so many people insisting that Facebook is obligated to share publishers‚Äô content, on whatever terms those publishers set.</p><p>Some, <a href="https://twitter.com/WillOremus/status/1362132040544628736?s=20">like OneZero‚Äôs Will Oremus</a>, have noted that removing high-quality news sources from Facebook will likely mean a boost for lower-quality blog posts, memes, and other junk. That seems fair, and I do think it bears watching. But what if, in the meantime, Australians simply ‚Ä¶ visit websites? Subscribe to newsletters? Read ‚Ä¶ books? I realize I sound hopelessly naive here. But if this is the beginning of more people coming to understand the value in visiting trusted news sources directly, I think we‚Äôd all be better off. Publishers included!</p><p>In reality, though, I suspect the great Australian news outage of 2021 will be short lived. Australia‚Äôs treasurer, a leading figure in the negotiations, <a href="https://twitter.com/joshfrydenberg/status/1362144150712315905?s=21">said he spoke with Mark Zuckerberg today</a>, and that negotiations continue. (<a href="https://www.nytimes.com/2021/02/17/business/media/australia-google-pay-for-news.html">Fun fact from the </a><em><a href="https://www.nytimes.com/2021/02/17/business/media/australia-google-pay-for-news.html">New York Times</a></em>: Australia‚Äôs treasurer was also ‚Äú<a href="https://www.smh.com.au/entertainment/celebrity/ryan-stokes-society-wedding-a-sizzler-20161202-gt30re.html" title="">the best man at the wedding of Ryan Stokes</a>, who is a son of Kerry Stokes, the billionaire owner of Seven West Media, one of the companies that have reached a deal with Google.‚Äù)</p><p>‚ÄúWe will continue to engage with the government on amendments to the law, with the aim of achieving a stable, fair path for both Facebook and publishers,‚Äù Facebook told me today when I asked for an update.</p><p>In the meantime, though, I‚Äôm glad Facebook called publishers‚Äô bluff. </p><p><strong>III. What‚Äôs next</strong></p><p>I wish Australia would take Facebook‚Äôs rejection as a sign it should rethink its approach to media regulation entirely. It could just tax companies based on their revenues, for example. It could earmark those revenues to support journalism ‚Äî nonprofit public media, even, <a href="http://www.orangemedianetwork.com/blog/screengaze/the-importance-of-public-broadcasting/article_dda75496-e27e-11e6-a558-2f6b46140340.html">which has consistently been shown to have powerful civic benefits</a>. Or it could pursue a bargaining code that requires big media conglomerates to create and support <em>jobs</em> in journalism, rather than simply accept tens of millions of dollars and spend them however they like ‚Äî or just return it to shareholders.</p><p>In reality, though, none of that seems likely to happen. Google‚Äôs capitulation means that Australian crony capitalism is now likely to be exported worldwide. Legacy media outlets will become richer ‚Äî&nbsp;and also more dependent on the tech giants that they excoriate daily for having too much power over them. All the while, the media industry will continue to consolidate, and it will be harder to get or keep a job in journalism.</p><p>A bargaining code that truly sought to level the playing field between the platforms and the public would take these realities into account. There is still time to amend it before Parliament takes a vote, and here‚Äôs hoping that lawmakers do ‚Äî both&nbsp;in Australia and beyond it.</p><h3>Message received</h3><p>Y‚Äôall really, really prefer the standard linking format. So we‚Äôre back to normal today ‚Äî though I still feel like I could make these feel more valuable somehow; maybe just arranging them differently. I‚Äôll keep you posted, but thanks to everyone who wrote in yesterday with feedback!</p><h3>The Ratio</h3><p><em>Today in news that could affect public perception of the big tech companies. See if you can spot today‚Äôs ‚Ä¶</em></p></div></div>
<br/><p><em>Article truncated for RSS feed. Read the full article at <a href="https://www.platformer.news/p/facebook-calls-australias-bluff">https://www.platformer.news/p/facebook-calls-australias-bluff</a></em></p>]]>
            </description>
            <link>https://www.platformer.news/p/facebook-calls-australias-bluff</link>
            <guid isPermaLink="false">hacker-news-small-sites-26187669</guid>
            <pubDate>Fri, 19 Feb 2021 00:07:28 GMT</pubDate>
        </item>
    </channel>
</rss>
